//>>built
/*
 URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js  *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
**************************************************************************** @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
 *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
**************************************************************************** @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
*/
require({cache:{"tslib/tslib":function(){var u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B;(function(C){function D(E,G){E!==F&&("function"===typeof Object.create?Object.defineProperty(E,"__esModule",{value:!0}):E.__esModule=!0);return function(O,H){return E[O]=G?G(O,H):H}}var F="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(E){C(D(F,D(E)))}):"object"===typeof module&&"object"===
typeof module.exports?C(D(F,D(module.exports))):C(D(F))})(function(C){var D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,G){E.__proto__=G}||function(E,G){for(var O in G)Object.prototype.hasOwnProperty.call(G,O)&&(E[O]=G[O])};u=function(E,G){function O(){this.constructor=E}if("function"!==typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");D(E,G);E.prototype=null===G?Object.create(G):(O.prototype=G.prototype,new O)};n=Object.assign||
function(E){for(var G,O=1,H=arguments.length;O<H;O++){G=arguments[O];for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(E[K]=G[K])}return E};h=function(E,G){var O={},H;for(H in E)Object.prototype.hasOwnProperty.call(E,H)&&0>G.indexOf(H)&&(O[H]=E[H]);if(null!=E&&"function"===typeof Object.getOwnPropertySymbols){var K=0;for(H=Object.getOwnPropertySymbols(E);K<H.length;K++)0>G.indexOf(H[K])&&Object.prototype.propertyIsEnumerable.call(E,H[K])&&(O[H[K]]=E[H[K]])}return O};r=function(E,G,O,H){var K=
arguments.length,P=3>K?G:null===H?H=Object.getOwnPropertyDescriptor(G,O):H,L;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)P=Reflect.decorate(E,G,O,H);else for(var M=E.length-1;0<=M;M--)if(L=E[M])P=(3>K?L(P):3<K?L(G,O,P):L(G,O))||P;return 3<K&&P&&Object.defineProperty(G,O,P),P};v=function(E,G){return function(O,H){G(O,H,E)}};z=function(E,G){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(E,G)};p=function(E,G,O,H){function K(P){return P instanceof
O?P:new O(function(L){L(P)})}return new (O||(O=Promise))(function(P,L){function M(X){try{R(H.next(X))}catch(U){L(U)}}function J(X){try{R(H["throw"](X))}catch(U){L(U)}}function R(X){X.done?P(X.value):K(X.value).then(M,J)}R((H=H.apply(E,G||[])).next())})};g=function(E,G){function O(R){return function(X){return H([R,X])}}function H(R){if(P)throw new TypeError("Generator is already executing.");for(;K;)try{if(P=1,L&&(M=R[0]&2?L["return"]:R[0]?L["throw"]||((M=L["return"])&&M.call(L),0):L.next)&&!(M=M.call(L,
R[1])).done)return M;if(L=0,M)R=[R[0]&2,M.value];switch(R[0]){case 0:case 1:M=R;break;case 4:return K.label++,{value:R[1],done:!1};case 5:K.label++;L=R[1];R=[0];continue;case 7:R=K.ops.pop();K.trys.pop();continue;default:if(!(M=K.trys,M=0<M.length&&M[M.length-1])&&(6===R[0]||2===R[0])){K=0;continue}if(3===R[0]&&(!M||R[1]>M[0]&&R[1]<M[3]))K.label=R[1];else if(6===R[0]&&K.label<M[1])K.label=M[1],M=R;else if(M&&K.label<M[2])K.label=M[2],K.ops.push(R);else{M[2]&&K.ops.pop();K.trys.pop();continue}}R=G.call(E,
K)}catch(X){R=[6,X],L=0}finally{P=M=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}var K={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},P,L,M,J;return J={next:O(0),"throw":O(1),"return":O(2)},"function"===typeof Symbol&&(J[Symbol.iterator]=function(){return this}),J};e=function(E,G){for(var O in E)"default"===O||Object.prototype.hasOwnProperty.call(G,O)||B(G,E,O)};B=Object.create?function(E,G,O,H){void 0===H&&(H=O);Object.defineProperty(E,H,{enumerable:!0,
get:function(){return G[O]}})}:function(E,G,O,H){void 0===H&&(H=O);E[H]=G[O]};b=function(E){var G="function"===typeof Symbol&&Symbol.iterator,O=G&&E[G],H=0;if(O)return O.call(E);if(E&&"number"===typeof E.length)return{next:function(){E&&H>=E.length&&(E=void 0);return{value:E&&E[H++],done:!E}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.");};a=function(E,G){var O="function"===typeof Symbol&&E[Symbol.iterator];if(!O)return E;E=O.call(E);var H,K=[];try{for(;(void 0===
G||0<G--)&&!(H=E.next()).done;)K.push(H.value)}catch(L){var P={error:L}}finally{try{H&&!H.done&&(O=E["return"])&&O.call(E)}finally{if(P)throw P.error;}}return K};c=function(){for(var E=[],G=0;G<arguments.length;G++)E=E.concat(a(arguments[G]));return E};d=function(){for(var E=0,G=0,O=arguments.length;G<O;G++)E+=arguments[G].length;E=Array(E);var H=0;for(G=0;G<O;G++)for(var K=arguments[G],P=0,L=K.length;P<L;P++,H++)E[H]=K[P];return E};f=function(E,G,O){if(O||2===arguments.length)for(var H=0,K=G.length,
P;H<K;H++)!P&&H in G||(P||(P=Array.prototype.slice.call(G,0,H)),P[H]=G[H]);return E.concat(P||Array.prototype.slice.call(G))};l=function(E){return this instanceof l?(this.v=E,this):new l(E)};m=function(E,G,O){function H(U){J[U]&&(R[U]=function(V){return new Promise(function(Q,Y){1<X.push([U,V,Q,Y])||K(U,V)})})}function K(U,V){try{var Q=J[U](V);Q.value instanceof l?Promise.resolve(Q.value.v).then(P,L):M(X[0][2],Q)}catch(Y){M(X[0][3],Y)}}function P(U){K("next",U)}function L(U){K("throw",U)}function M(U,
V){(U(V),X.shift(),X.length)&&K(X[0][0],X[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=O.apply(E,G||[]),R,X=[];return R={},H("next"),H("throw"),H("return"),R[Symbol.asyncIterator]=function(){return this},R};k=function(E){function G(K,P){O[K]=E[K]?function(L){return(H=!H)?{value:l(E[K](L)),done:"return"===K}:P?P(L):L}:P}var O,H;return O={},G("next"),G("throw",function(K){throw K;}),G("return"),O[Symbol.iterator]=function(){return this},O};q=function(E){function G(P){K[P]=
E[P]&&function(L){return new Promise(function(M,J){L=E[P](L);O(M,J,L.done,L.value)})}}function O(P,L,M,J){Promise.resolve(J).then(function(R){P({value:R,done:M})},L)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=E[Symbol.asyncIterator],K;return H?H.call(E):(E="function"===typeof b?b(E):E[Symbol.iterator](),K={},G("next"),G("throw"),G("return"),K[Symbol.asyncIterator]=function(){return this},K)};t=function(E,G){Object.defineProperty?Object.defineProperty(E,
"raw",{value:G}):E.raw=G;return E};var F=Object.create?function(E,G){Object.defineProperty(E,"default",{enumerable:!0,value:G})}:function(E,G){E["default"]=G};w=function(E){if(E&&E.__esModule)return E;var G={};if(null!=E)for(var O in E)"default"!==O&&Object.prototype.hasOwnProperty.call(E,O)&&B(G,E,O);F(G,E);return G};A=function(E){return E&&E.__esModule?E:{"default":E}};x=function(E,G,O,H){if("a"===O&&!H)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof G?
E!==G||!H:!G.has(E))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===O?H:"a"===O?H.call(E):H?H.value:G.get(E)};y=function(E,G,O,H,K){if("m"===H)throw new TypeError("Private method is not writable");if("a"===H&&!K)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof G?E!==G||!K:!G.has(E))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===H?K.call(E,
O):K?K.value=O:G.set(E,O),O};C("__extends",u);C("__assign",n);C("__rest",h);C("__decorate",r);C("__param",v);C("__metadata",z);C("__awaiter",p);C("__generator",g);C("__exportStar",e);C("__createBinding",B);C("__values",b);C("__read",a);C("__spread",c);C("__spreadArrays",d);C("__spreadArray",f);C("__await",l);C("__asyncGenerator",m);C("__asyncDelegator",k);C("__asyncValues",q);C("__makeTemplateObject",t);C("__importStar",w);C("__importDefault",A);C("__classPrivateFieldGet",x);C("__classPrivateFieldSet",
y)})},"esri/core/accessorSupport/decorators":function(){define("exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(u,n,h,r,v,z,p,g,e,b){u.aliasOf=n.aliasOf;u.autoDestroy=h.autoDestroy;u.cast=r.cast;u.enumeration=v.enumeration;u.ensureRange=z.ensureRange;u.property=z.property;u.propertyJSONMeta=z.propertyJSONMeta;u.reader=p.reader;
u.shared=g.shared;u.finalizeClass=e.finalizeClass;u.subclass=e.subclass;u.writer=b.writer;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["exports","../metadata"],function(u,n){u.autoDestroy=function(){return(h,r)=>{n.getOwnClassMetadata(h).autoDestroy=!0;return h[r]}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"app/utils/topic":function(){define(["require",
"exports","tslib","esri/core/Evented"],function(u,n,h,r){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(){function v(){}v.publish=function(z,p){return this.hub.emit.apply(this.hub,arguments)};v.subscribe=function(z,p){return this.hub.on.apply(this.hub,arguments)};v.hub=new r.default;return v}();n.default=u})},"app/App":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget esri/config esri/identity/IdentityManager esri/identity/OAuthInfo ./portal/Portal ./portal/PortalItem ./portal/PortalUser ./widgets/Alert ./widgets/InfoBox ./utils/panelFactory ./utils/viewFactory ./utils/appUtils ./utils/mapUtils/errorUtils ./utils/topic ./widgets/CalciteAlert esri/intl/locale".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);p=h.__importDefault(p);g=h.__importDefault(g);e=h.__importDefault(e);b=h.__importDefault(b);a=h.__importDefault(a);c=h.__importDefault(c);d=h.__importDefault(d);f=h.__importDefault(f);l=h.__importDefault(l);m=h.__importDefault(m);k=h.__importStar(k);t=h.__importDefault(t);w=h.__importDefault(w);A=h.__importStar(A);u=function(x){function y(B){var C=x.call(this,B)||this;C.alert=
null;C.panel=null;C.view=null;C.panelFactory=l.default();C.viewFactory=m.default();C.config=B.config;C.setDefaults(C.config);C.registerOAuthInfos(C.config);return C}h.__extends(y,x);y.prototype.postInitialize=function(){var B=this;this.showLoader(this.messagesCommon.loading);this.state={loadMessage:"init",mode:"loading",config:this.config,portal:null};this.addEventListeners();this.getPortal(this.config).then(function(){return B.loadData()}).then(function(){return B.createUI()}).then(function(){B.state=
h.__assign(h.__assign({},B.state),{mode:"ready"});B.setHelperServiceUrls();B.scheduleRender();t.default.publish("app/ready",B)}).catch(function(C){B.hideLoader();t.default.publish("alert/show",{type:"error",message:C&&C.message});B.scheduleRender()})};y.prototype.destroyPanel=function(){this.panel&&(this.panel.destroy(),this.panel=null)};y.prototype.render=function(){var B=this.state,C=B.config.isSingleView;return"ready"===B.mode?C?this.renderSingleView():v.tsx("div",null,v.tsx("div",{key:"action-bar",
id:"action-bar",class:"js-action-bar action-bar"}),this.panel?v.tsx("aside",{key:"panel-container",id:"panel-container",class:"panel-container js-panel esri-ui-component js-panel",afterRemoved:this.destroyPanel},v.tsx("div",{key:"loader",class:this.classes("loader js-loader")},v.tsx("div",{class:"loader-bars"}),v.tsx("div",{class:"loader-text"})),this.panel.render()):null,v.tsx("main",{class:"view-container js-view"},this.view?this.view.render():null),v.tsx("aside",{key:"contextual-container",id:"contextual-container",
class:"panel-container js-details-panel hide",afterRemoved:this.destroyPanel}),v.tsx("div",{key:"contextual-action-bar",id:"contextual-action-bar",class:"js-action-bar action-bar"})):v.tsx("div",null,this.renderAlert())};y.prototype.renderSingleView=function(){return v.tsx("div",null,this.view?this.view.render():null)};y.prototype.renderAlert=function(){return v.tsx("div",{key:"app-alert",id:"alertDiv"})};y.prototype.addEventListeners=function(){this.own([t.default.subscribe("alert/show",this.showAlert.bind(this)),
t.default.subscribe("alert/hide",this.hideAlert.bind(this)),t.default.subscribe("infobox/show",this.showInfoBox.bind(this)),t.default.subscribe("infobox/hide",this.hideInfoBox.bind(this)),t.default.subscribe("panel/show",this.showPanel.bind(this)),t.default.subscribe("panel/hide",this.hidePanel.bind(this)),t.default.subscribe("loader/hide",this.hideLoader.bind(this))])};y.prototype.loadData=function(){return h.__awaiter(this,void 0,void 0,function(){var B,C,D,F,E,G,O,H;return h.__generator(this,function(K){switch(K.label){case 0:B=
this.state.portal;C=this.state.config;D=C.urlParameters;F=D.webmap;E=D.layers;if(!F&&C.requiresWebId)return[2,Promise.reject({message:this.messagesPreplanned.error.mapNotSpecified})];C=this.state.config=h.__assign(h.__assign({},C),{projector:this,app:this,i18n:this.i18n,portal:B,user:B&&B.user});return F?[4,this.fetchItem(F)]:[3,2];case 1:G=K.sent(),this.state.config.webmapItem=G,K.label=2;case 2:return E&&E.length?[4,this.getLayers(E)]:[3,5];case 3:return O=K.sent(),[4,Promise.all(O).then(function(P){return P})];
case 4:H=K.sent(),this.state.config.layers=H,K.label=5;case 5:return[2,Promise.resolve(C)]}})})};y.prototype.getLayers=function(B){var C=this.state.portal;return B.map(function(D){return(new a.default({id:D,portal:C})).load()})};y.prototype.fetchItem=function(B){var C=new a.default({id:B,portal:this.state.portal});return C.load().then(function(){return C},function(D){q.showError(D);return Promise.reject({message:D.message})})};y.prototype.setActive=function(B){(B&&B.children[0]).classList.add("is-active")};
y.prototype.createUI=function(){var B=this,C=this.state.config,D=C.panel,F=C.view;C.app=this;return Promise.all([this.viewFactory.getView(F,C),this.panelFactory.getPanel(D,C)]).then(function(E){B.panel=E[1];B.view=E[0]}).catch(function(E){B.hideLoader();t.default.publish("alert/show",{type:"error",message:E&&E.message})})};y.prototype.showLoader=function(B){var C=document.querySelector("calcite-loader");C?C.active=!0:(B&&(document.querySelector(".js-loader-text").innerHTML=B),document.querySelector(".js-loader").classList.remove("hide"));
document.querySelector(".js-main-container").classList.add("hide");(B=document.querySelector(".js-global-nav"))&&B.classList.add("hide")};y.prototype.hideLoader=function(){var B=document.querySelector("calcite-loader");B?B.active=!1:document.querySelector(".js-loader").classList.add("hide");document.querySelector(".js-main-container").classList.remove("hide");(B=document.querySelector(".js-global-nav"))&&B.classList.remove("hide")};y.prototype.showAlert=function(B){if(document.querySelector("calcite-loader"))this.showCalciteAlert(B);
else{var C=B.type||"success";B=B.message||"";var D=document.createElement("div");D.setAttribute("id","alertDiv");this.hideLoader();document.body.appendChild(D);this.hideAlert();this.alert=new d.default({type:C,message:B});this.alert.container="alertDiv"}};y.prototype.showCalciteAlert=function(B){var C=B.type||"success",D=B.message||"";B=B.title||"";this.hideAlert();this.alert=new w.default({type:C,message:D,title:B})};y.prototype.hideAlert=function(){this.alert&&!this.alert.destroyed&&this.alert.destroy()};
y.prototype.showInfoBox=function(B){var C=document.createElement("div");C.setAttribute("id","infoBox");document.body.appendChild(C);this.hideInfoBox();this.infoBox=new f.default(B);this.infoBox.container="infoBox"};y.prototype.hideInfoBox=function(){this.infoBox&&!this.infoBox.destroyed&&this.infoBox.destroy()};y.prototype.showPanel=function(B){};y.prototype.hidePanel=function(){};y.prototype.setPortalUrl=function(B){var C=B.portalUrl;if(!B.isDebug&&-1===window.location.host.indexOf(".esri.com")){var D=
k.parseUrl(C);C=C.replace(D.host,window.location.host);B.portalUrl=C}return C};y.prototype.setConfigParams=function(B){var C=B.arcadeEditor,D=B.isDebug,F=C?k.parseUrl(C):null;C=!D&&C?C.replace(F.host,window.location.host):C;B.configParams={arcadeEditor:C,jsapiUrl:window.dojoConfig.jsapiUrl}};y.prototype.setHelperServiceUrls=function(){var B,C;p.default.routeServiceUrl=(null===(C=null===(B=this.state.portal.helperServices)||void 0===B?void 0:B.route)||void 0===C?void 0:C.url)||p.default.routeServiceUrl};
y.prototype.setGeometryService=function(){var B=this.state.portal;(B=B&&B.helperServices)&&B.geocode&&B.geocode.length&&(B=B&&B.geometry&&B.geometry.url)&&(p.default.geometryServiceUrl=B)};y.prototype.getPortal=function(B){var C=this;return g.default.checkAppAccess(B.portalUrl+"sharing",B.oauthAppId).then(function(D){return C.createPortal(D)},function(D){return C.createPortal(D)})};y.prototype.createPortal=function(B){var C=this,D=B.viewOnly,F=B.credential,E=new b.default;F&&F.hasOwnProperty("userId")&&
(E.authMode="immediate");return E.load().then(function(G){if(G=G&&G.error||null)t.default.publish("alert/show",{type:"error",message:C.messagesCommon.portalDown+"  ("+G.message+")"});else{G=void 0;var O=E.user;O&&(O=O&&O.sourceJSON,G=new c.default(O),G.sourceJSON=O,G.portal=E,G.isViewOnly=D||!1,G.read(O),G.init());E.credential=F;E.user=G;C.state=h.__assign(h.__assign({},C.state),{portal:E})}return E},function(G){t.default.publish("alert/show",{type:"error",message:C.messagesCommon.portalDown+"  ("+
G.message+")"})})};y.prototype.setDefaults=function(B){this.setPortalUrl(B);this.setConfigParams(B);var C=B.portalUrl;p.default.request.proxyUrl=B.proxyUrl||(C?C+"sharing/proxy":"");p.default.portalUrl=C};y.prototype.registerOAuthInfos=function(B){var C=B.oauthAppId;B=B.portalUrl;B=8<B.lastIndexOf("/")?B.substr(0,B.lastIndexOf("/")):B;C=new e.default({appId:C,portalUrl:B,locale:A.getLocale()});g.default.registerOAuthInfos([C])};h.__decorate([r.property()],y.prototype,"state",void 0);h.__decorate([r.property(),
v.messageBundle("mapviewer/common")],y.prototype,"messagesCommon",void 0);h.__decorate([r.property(),v.messageBundle("mapviewer/preplanned")],y.prototype,"messagesPreplanned",void 0);return y=h.__decorate([r.subclass("")],y)}(z.default);n.default=u})},"esri/identity/IdentityManager":function(){define(["../chunks/_rollupPluginBabelHelpers","../kernel","./IdentityManagerBase"],function(u,n,h){h=function(r){function v(){return r.apply(this,arguments)||this}u._inheritsLoose(v,r);return v}(h.IdentityManagerBase);
h.prototype.declaredClass="esri.identity.IdentityManager";h=new h;n.setId(h);return h})},"esri/identity/IdentityManagerBase":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/Evented ../core/events ../core/lang ../core/object ../core/promiseUtils ../core/reactiveUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./IdentityForm ./IdentityModal ./OAuthCredential ./OAuthInfo ./ServerInfo".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x){const y={},B=E=>{const G=(new f.Url(E.owningSystemUrl)).host;E=(new f.Url(E.server)).host;const O=/.+\.arcgis\.com$/i;return O.test(G)&&O.test(E)},C=(E,G)=>!!(B(E)&&G&&G.some(O=>O.test(E.server)));let D=null,F=null;try{D=window.localStorage,F=window.sessionStorage}catch{}m=function(E){function G(){var H=E.call(this)||this;H._portalConfig=globalThis.esriGeowConfig;H.serverInfos=[];H.oAuthInfos=[];H.credentials=[];H._soReqs=[];H._xoReqs=[];H._portals=
[];H.defaultOAuthInfo=null;H.defaultTokenValidity=60;H.dialog=null;H.formConstructor=q;H.tokenValidity=null;H.normalizeWebTierAuth=!1;H._appOrigin="null"!==window.origin?window.origin:window.location.origin;H._appUrlObj=f.urlToObject(window.location.href);H._busy=null;H._rejectOnPersistedPageShow=!1;H._oAuthLocationParams=null;H._gwTokenUrl="/sharing/rest/generateToken";H._agsRest="/rest/services";H._agsPortal=/\/sharing(\/|$)/i;H._agsAdmin=/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i;H._adminSvcs=
/\/rest\/admin\/services(\/|$)/i;H._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}];H._legacyFed=[];H._regexSDirUrl=/http.+\/rest\/services\/?/gi;H._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi;
H._gwUser=/http.+\/users\/([^\/]+)\/?.*/i;H._gwItem=/http.+\/items\/([^\/]+)\/?.*/i;H._gwGroup=/http.+\/groups\/([^\/]+)\/?.*/i;H._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i;H._createDefaultOAuthInfo=!0;H._hasTestedIfAppIsOnPortal=!1;H._getOAuthLocationParams();window.addEventListener("pageshow",K=>{H._pageShowHandler(K)});return H}n._inheritsLoose(G,E);var O=G.prototype;O.registerServers=function(H){const K=this.serverInfos;K?(H=H.filter(P=>!this.findServerInfo(P.server)),this.serverInfos=
K.concat(H)):this.serverInfos=H;H.forEach(P=>{P.owningSystemUrl&&this._portals.push(P.owningSystemUrl);P.hasPortal&&this._portals.push(P.server)})};O.registerOAuthInfos=function(H){const K=this.oAuthInfos;if(K){for(const P of H){const L=this.findOAuthInfo(P.portalUrl);L&&K.splice(K.indexOf(L),1)}this.oAuthInfos=K.concat(H)}else this.oAuthInfos=H};O.registerToken=function(H){H={...H};const K=this._sanitizeUrl(H.server),P=this._isServerRsrc(K);let L=this.findServerInfo(K),M=!0,J;L||(L=new x,L.server=
this._getServerInstanceRoot(K),P?L.hasServer=!0:(L.tokenServiceUrl=this._getTokenSvcUrl(K),L.hasPortal=!0),this.registerServers([L]));(J=this._findCredential(K))?(delete H.server,Object.assign(J,H),M=!1):(J=new u.Credential({userId:H.userId,server:L.server,token:H.token,expires:H.expires,ssl:H.ssl,scope:P?"server":"portal"}),J.resources=[K],this.credentials.push(J));J.emitTokenChange(!1);M||J.refreshServerTokens()};O.toJSON=function(){return b.fixJson({serverInfos:this.serverInfos.map(H=>H.toJSON()),
oAuthInfos:this.oAuthInfos.map(H=>H.toJSON()),credentials:this.credentials.map(H=>H.toJSON())})};O.initialize=function(H){if(H){"string"===typeof H&&(H=JSON.parse(H));var K=H.serverInfos,P=H.oAuthInfos;H=H.credentials;if(K){const L=[];K.forEach(M=>{M.server&&M.tokenServiceUrl&&L.push(M.declaredClass?M:new x(M))});L.length&&this.registerServers(L)}if(P){const L=[];P.forEach(M=>{M.appId&&L.push(M.declaredClass?M:new A(M))});L.length&&this.registerOAuthInfos(L)}H&&H.forEach(L=>{L.server&&L.token&&L.expires&&
L.expires>Date.now()&&(L=L.declaredClass?L:new u.Credential(L),L.emitTokenChange(),this.credentials.push(L))})}};O.findServerInfo=function(H){let K;H=this._sanitizeUrl(H);for(const P of this.serverInfos)if(this._hasSameServerInstance(P.server,H)){K=P;break}return K};O.findOAuthInfo=function(H){let K;H=this._sanitizeUrl(H);for(const P of this.oAuthInfos)if(this._hasSameServerInstance(P.portalUrl,H)){K=P;break}return K};O.findCredential=function(H,K){let P;H=this._sanitizeUrl(H);const L=this._isServerRsrc(H)?
"server":"portal";if(K)for(const M of this.credentials){if(this._hasSameServerInstance(M.server,H)&&K===M.userId&&M.scope===L){P=M;break}}else for(const M of this.credentials)if(this._hasSameServerInstance(M.server,H)&&-1!==this._getIdenticalSvcIdx(H,M)&&M.scope===L){P=M;break}return P};O.getCredential=function(H,K){let P=!0;if(K){var L=!!K.token;var M=K.error;P=!1!==K.prompt}K={...K};H=this._sanitizeUrl(H);const J=new AbortController,R=c.createResolver();if(K.signal)c.onAbort(K.signal,()=>{J.abort()});
c.onAbort(J,()=>{R.reject(new p("identity-manager:user-aborted","ABORTED"))});if(c.isAborted(J))return R.promise;K.signal=J.signal;const X=this._isAdminResource(H);if((L=L?this.findCredential(H):null)&&M&&M.details&&498===M.details.httpStatus)L.destroy();else if(L)return H=new p("identity-manager:not-authorized","You are currently signed in as: '"+L.userId+"'. You do not have access to this resource: "+H,{error:M}),R.reject(H),R.promise;if(M=this._findCredential(H,K))return R.resolve(M),R.promise;
let U=this.findServerInfo(H);if(U)!U.hasServer&&this._isServerRsrc(H)&&(U._restInfoPms=this._getTokenSvcUrl(H),U.hasServer=!0);else{M=this._getTokenSvcUrl(H);if(!M)return H=new p("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),R.reject(H),R.promise;U=new x;U.server=this._getServerInstanceRoot(H);"string"===typeof M?(U.tokenServiceUrl=M,U.hasPortal=!0):(U._restInfoPms=M,U.hasServer=!0);this.registerServers([U])}U.hasPortal&&void 0===U._selfReq&&(P||
f.hasSameOrigin(U.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(V=>V.tokenServiceUrl===U.tokenServiceUrl))&&(U._selfReq={owningTenant:K&&K.owningTenant,selfDfd:this._getPortalSelf(U.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),H)});return this._enqueue(H,U,K,R,X)};O.getResourceName=function(H){return this._isRESTService(H)?H.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(H)&&H.replace(this._gwUser,"$1")||this._gwItem.test(H)&&
H.replace(this._gwItem,"$1")||this._gwGroup.test(H)&&H.replace(this._gwGroup,"$1")||""};O.generateToken=function(H,K,P){const L=this._rePortalTokenSvc.test(H.tokenServiceUrl),M=new f.Url(this._appOrigin);var J=H.shortLivedTokenValidity;let R,X,U,V,Q,Y,fa;K&&(fa=this.tokenValidity||J||this.defaultTokenValidity,fa>J&&0<J&&(fa=J));P&&(R=P.isAdmin,X=P.serverUrl,U=P.token,Q=P.signal,Y=P.ssl,H.customParameters=P.customParameters);R?J=H.adminTokenServiceUrl:(J=H.tokenServiceUrl,V=new f.Url(J.toLowerCase()),
H.webTierAuth&&null!=P&&P.serverUrl&&!Y&&"http"===M.scheme&&(f.hasSameOrigin(M.uri,J,!0)||"https"===V.scheme&&M.host===V.host&&"7080"===M.port&&"7443"===V.port)&&(J=J.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));P={query:{request:"getToken",username:null==K?void 0:K.username,password:null==K?void 0:K.password,serverUrl:X,token:U,expiration:fa,referer:R||L?this._appOrigin:null,client:R?"referer":null,f:"json",...H.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(H,
P),signal:Q,...null==P?void 0:P.ioArgs};L||(P.withCredentials=!1);return z(J,P).then(da=>{da=da.data;if(!da||!da.token)return new p("identity-manager:authentication-failed","Unable to generate token");const ca=H.server;y[ca]||(y[ca]={});K&&(y[ca][K.username]=K.password);da.validity=fa;return da})};O.isBusy=function(){return!!this._busy};O.checkSignInStatus=function(H){return this.checkAppAccess(H,"").then(K=>K.credential)};O.checkAppAccess=function(H,K,P){let L=!1;return this.getCredential(H,{prompt:!1}).then(M=>
{let J;const R={f:"json"};if("portal"===M.scope)if(K&&(this._doPortalSignIn(H)||P&&P.force))J=M.server+"/sharing/rest/oauth2/validateAppAccess",R.client_id=K;else if(M.token)J=M.server+"/sharing/rest";else return{credential:M};else if(M.token)J=M.server+"/rest/services";else return{credential:M};M.token&&(R.token=M.token);return z(J,{query:R,authMode:"anonymous"}).then(X=>{if(!1===X.data.valid)throw new p("identity-manager:not-authorized",`You are currently signed in as: '${M.userId}'.`,X.data);L=
!!X.data.viewOnlyUserTypeApp;return{credential:M}}).catch(X=>{if("identity-manager:not-authorized"===X.name)throw X;X=X.details&&X.details.httpStatus;if(498===X)throw M.destroy(),new p("identity-manager:not-authenticated","User is not signed in.");if(400===X)throw new p("identity-manager:invalid-request");return{credential:M}})}).then(M=>({credential:M.credential,viewOnly:L}))};O.setOAuthResponseHash=function(H){H&&("#"===H.charAt(0)&&(H=H.substring(1)),this._processOAuthPopupParams(f.queryToObject(H)))};
O.setOAuthRedirectionHandler=function(H){this._oAuthRedirectFunc=H};O.setProtocolErrorHandler=function(H){this._protocolFunc=H};O.signIn=function(H,K,P={}){const L=c.createResolver(),M=()=>{var Q,Y,fa,da,ca;null==(Q=X)?void 0:Q.remove();null==(Y=U)?void 0:Y.remove();null==(fa=V)?void 0:fa.remove();null==(da=R)?void 0:da.destroy();null==(ca=this.dialog)?void 0:ca.destroy();this.dialog=R=X=U=V=null},J=()=>{M();this._oAuthDfd=null;L.reject(new p("identity-manager:user-aborted","ABORTED"))};if(P.signal)c.onAbort(P.signal,
()=>{J()});let R=new this.formConstructor;R.resource=this.getResourceName(H);R.server=K.server;this.dialog=new t;this.dialog.content=R;this.dialog.open=!0;this.emit("dialog-create");let X=R.on("cancel",J),U=d.watch(()=>this.dialog.open,J),V=R.on("submit",Q=>{this.generateToken(K,Q,{isAdmin:P.isAdmin,signal:P.signal}).then(Y=>{M();Y=new u.Credential({userId:Q.username,server:K.server,token:Y.token,expires:null!=Y.expires?Number(Y.expires):null,ssl:!!Y.ssl,isAdmin:P.isAdmin,validity:Y.validity});L.resolve(Y)}).catch(Y=>
{R.error=Y;R.signingIn=!1})});return L.promise};O.oAuthSignIn=function(H,K,P,L){const M=this._oAuthDfd=c.createResolver();if(null!=L&&L.signal)c.onAbort(L.signal,()=>{const da=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;da&&!da.closed?da.close():this.dialog&&Y()});M.resUrl_=H;M.sinfo_=K;M.oinfo_=P;let J;const R=P._oAuthCred;if(R.storage&&("authorization-code"===P.flowType||"auto"===P.flowType&&!P.popup&&8.4<=K.currentVersion)){let da=crypto.getRandomValues(new Uint8Array(32));J=f.base64UrlEncode(da);
R.codeVerifier=J;da=crypto.getRandomValues(new Uint8Array(32));R.stateUID=f.base64UrlEncode(da);R.save()||(R.codeVerifier=J=null)}else R.codeVerifier=null;this._getCodeChallenge(J).then(da=>{const ca=!L||!1!==L.oAuthPopupConfirmation;P.popup&&ca?(X=new this.formConstructor,X.oAuthPrompt=!0,X.server=K.server,this.dialog=new t,this.dialog.content=X,this.dialog.open=!0,this.emit("dialog-create"),U=X.on("cancel",Y),V=d.watch(()=>this.dialog.open,Y),Q=X.on("submit",()=>{fa();this._doOAuthSignIn(H,K,P,
da)})):this._doOAuthSignIn(H,K,P,da)});let X,U,V,Q;const Y=()=>{fa();this._oAuthDfd=null;M.reject(new p("identity-manager:user-aborted","ABORTED"))},fa=()=>{var da,ca,la,ha,S;null==(da=U)?void 0:da.remove();null==(ca=V)?void 0:ca.remove();null==(la=Q)?void 0:la.remove();null==(ha=X)?void 0:ha.destroy();null==(S=this.dialog)?void 0:S.destroy();this.dialog=null};return M.promise};O.destroyCredentials=function(){this.credentials&&this.credentials.slice().forEach(H=>{H.destroy()});this.emit("credentials-destroy")};
O.enablePostMessageAuth=function(H="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=e.on(window,"message",K=>{var P;if((K.origin===this._appOrigin||K.origin.endsWith(".arcgis.com"))&&"arcgis:auth:requestCredential"===(null==(P=K.data)?void 0:P.type)){const L=K.source;this.getCredential(H).then(M=>{L.postMessage({type:"arcgis:auth:credential",credential:{expires:M.expires,server:M.server,ssl:M.ssl,token:M.token,userId:M.userId}},
K.origin)}).catch(M=>{L.postMessage({type:"arcgis:auth:error",error:{name:M.name,message:M.message}},K.origin)})}})};O.disablePostMessageAuth=function(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)};O._getOAuthLocationParams=function(){var H=window.location.hash;if(H){"#"===H.charAt(0)&&(H=H.substring(1));H=f.queryToObject(H);let L=!1;if(H.access_token&&H.expires_in&&H.state&&H.hasOwnProperty("username"))try{H.state=JSON.parse(H.state),H.state.portalUrl&&
(this._oAuthLocationParams=H,L=!0)}catch{}else if(H.error&&H.error_description&&(console.log("IdentityManager OAuth Error: ",H.error," - ",H.error_description),"access_denied"===H.error&&(L=!0,H.state)))try{H.state=JSON.parse(H.state)}catch{}if(L){var K;window.location.hash=(null==(K=H.state)?void 0:K.hash)||""}}if(K=window.location.search){"?"===K.charAt(0)&&(K=K.substring(1));K=f.queryToObject(K);H=!1;if(K.code&&K.state)try{K.state=JSON.parse(K.state),K.state.portalUrl&&K.state.uid&&(this._oAuthLocationParams=
K,H=!0)}catch{}else if(K.error&&K.error_description&&(console.log("IdentityManager OAuth Error: ",K.error," - ",K.error_description),"access_denied"===K.error&&(H=!0,K.state)))try{K.state=JSON.parse(K.state)}catch{}if(H){var P;const L={...K};"code error error_description message_code persist state".split(" ").forEach(M=>{delete L[M]});H=f.objectToQuery(L);K=window.location.pathname+(H?`?${H}`:"")+((null==(P=K.state)?void 0:P.hash)||"");window.history.replaceState(window.history.state,"",K)}}};O._getOAuthToken=
function(H,K,P,L,M){H=H.replace(/^http:/i,"https:");return z(`${H}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:L&&M?{grant_type:"authorization_code",code:K,redirect_uri:L,client_id:P,code_verifier:M}:{grant_type:"refresh_token",refresh_token:K,client_id:P}}).then(J=>J.data)};O._getCodeChallenge=function(H){return H&&globalThis.isSecureContext?(H=(new TextEncoder).encode(H),crypto.subtle.digest("SHA-256",H).then(K=>f.base64UrlEncode(new Uint8Array(K)))):Promise.resolve(null)};
O._pageShowHandler=function(H){H.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(H=new p("identity-manager:user-aborted","ABORTED"),this._errbackFunc(H))};O._findCredential=function(H,K){let P=-1,L,M,J;const R=K&&K.token;K=K&&K.resource;const X=this._isServerRsrc(H)?"server":"portal",U=this.credentials.filter(V=>this._hasSameServerInstance(V.server,H)&&V.scope===X);H=K||H;if(U.length)if(1===U.length)if(K=U[0],M=(L=(J=this.findServerInfo(K.server))&&J.owningSystemUrl)&&this.findCredential(L,
K.userId),P=this._getIdenticalSvcIdx(H,K),R)-1!==P&&(K.resources.splice(P,1),this._removeResource(H,M));else return-1===P&&K.resources.push(H),this._addResource(H,M),K;else{let V,Q;U.some(Y=>{Q=this._getIdenticalSvcIdx(H,Y);return-1!==Q?(V=Y,M=(L=(J=this.findServerInfo(V.server))&&J.owningSystemUrl)&&this.findCredential(L,V.userId),P=Q,!0):!1});if(R)V&&(V.resources.splice(P,1),this._removeResource(H,M));else if(V)return this._addResource(H,M),V}};O._findOAuthInfo=function(H){let K=this.findOAuthInfo(H);
if(!K)for(const P of this.oAuthInfos)if(this._isIdProvider(P.portalUrl,H)){K=P;break}return K};O._addResource=function(H,K){K&&-1===this._getIdenticalSvcIdx(H,K)&&K.resources.push(H)};O._removeResource=function(H,K){let P=-1;K&&(P=this._getIdenticalSvcIdx(H,K),-1<P&&K.resources.splice(P,1))};O._useProxy=function(H,K){return K&&K.isAdmin&&!f.hasSameOrigin(H.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(H.tokenServiceUrl)&&"10.1"===String(H.currentVersion)&&!f.hasSameOrigin(H.tokenServiceUrl,
this._appOrigin)};O._getOrigin=function(H){H=new f.Url(H);return H.scheme+"://"+H.host+(null!=H.port?":"+H.port:"")};O._getServerInstanceRoot=function(H){const K=H.toLowerCase();let P=K.indexOf(this._agsRest);-1===P&&this._isAdminResource(H)&&(P=this._agsAdmin.test(H)?H.replace(this._agsAdmin,"$1").length:H.search(this._adminSvcs));-1===P&&(P=K.indexOf("/sharing"));-1===P&&"/"===K.substr(-1)&&(P=K.length-1);return-1<P?H.substring(0,P):H};O._hasSameServerInstance=function(H,K){"/"===H.substr(-1)&&
(H=H.slice(0,-1));H=H.toLowerCase();K=this._getServerInstanceRoot(K).toLowerCase();H=this._normalizeAGOLorgDomain(H);K=this._normalizeAGOLorgDomain(K);H=H.substr(H.indexOf(":"));K=K.substr(K.indexOf(":"));return H===K};O._normalizeAGOLorgDomain=function(H){const K=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,P=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,L=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;K.test(H)?H=H.replace(K,"https://www.arcgis.com"):P.test(H)?H=H.replace(P,
"https://devext.arcgis.com"):L.test(H)&&(H=H.replace(L,"https://qaext.arcgis.com"));return H};O._sanitizeUrl=function(H){const K=(r.request.proxyUrl||"").toLowerCase(),P=K?H.toLowerCase().indexOf(K+"?"):-1;-1!==P&&(H=H.substring(P+K.length+1));H=f.normalize(H);return f.urlToObject(H).path};O._isRESTService=function(H){return H.includes(this._agsRest)};O._isAdminResource=function(H){return this._agsAdmin.test(H)||this._adminSvcs.test(H)};O._isServerRsrc=function(H){return this._isRESTService(H)||this._isAdminResource(H)};
O._isIdenticalService=function(H,K){if(this._isRESTService(H)&&this._isRESTService(K)){H=this._getSuffix(H).toLowerCase();K=this._getSuffix(K).toLowerCase();var P=H===K;P||(P=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi,P=H.replace(P,"$1")===K.replace(P,"$1"))}else this._isAdminResource(H)&&this._isAdminResource(K)?P=!0:this._isServerRsrc(H)||this._isServerRsrc(K)||!this._isPortalDomain(H)||(P=!0);return P};O._isPortalDomain=function(H){const K=new f.Url(H.toLowerCase());H=this._portalConfig;
let P=this._gwDomains.some(L=>L.regex.test(K.uri));!P&&H&&(P=this._hasSameServerInstance(this._getServerInstanceRoot(H.restBaseUrl),K.uri));P||r.portalUrl&&(P=f.hasSameOrigin(K,r.portalUrl,!0));P||(P=this._portals.some(L=>this._hasSameServerInstance(L,K.uri)));return P=P||this._agsPortal.test(K.path)};O._isIdProvider=function(H,K){let P=-1,L=-1;this._gwDomains.forEach((J,R)=>{-1===P&&J.regex.test(H)&&(P=R);-1===L&&J.regex.test(K)&&(L=R)});let M=!1;if(-1<P&&-1<L)if(0===P||4===P){if(0===L||4===L)M=
!0}else if(1===P){if(1===L||2===L)M=!0}else 2===P?2===L&&(M=!0):3===P&&3===L&&(M=!0);if(!M){const J=this.findServerInfo(K),R=J&&J.owningSystemUrl;R&&B(J)&&this._isPortalDomain(R)&&this._isIdProvider(H,R)&&(M=!0)}return M};O._getIdenticalSvcIdx=function(H,K){let P=-1;for(let L=0;L<K.resources.length;L++)if(this._isIdenticalService(H,K.resources[L])){P=L;break}return P};O._getSuffix=function(H){return H.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")};O._getTokenSvcUrl=function(H){if(this._isRESTService(H)||
this._isAdminResource(H)){var K=this._getServerInstanceRoot(H);var P=K+"/admin/generateToken";H=K+"/rest/info";K=z(H,{query:{f:"json"}}).then(L=>L.data);return{adminUrl:P,promise:K}}if(this._isPortalDomain(H)){let L="";this._gwDomains.some(M=>{M.regex.test(H)&&(L=M.tokenServiceUrl);return!!L});L||this._portals.some(M=>{this._hasSameServerInstance(M,H)&&(L=M+this._gwTokenUrl);return!!L});L||(P=H.toLowerCase().indexOf("/sharing"),-1!==P&&(L=H.substring(0,P)+this._gwTokenUrl));L||(L=this._getOrigin(H)+
this._gwTokenUrl);L&&(P=(new f.Url(H)).port,/^http:\/\//i.test(H)&&"7080"===P&&(L=L.replace(/:7080/i,":7443")),L=L.replace(/http:/i,"https:"));return L}if(H.toLowerCase().includes("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"};O._processOAuthResponseParams=function(H,K,P){const L=K._oAuthCred;if(H.code){var M=L.codeVerifier;L.codeVerifier=null;L.stateUID=null;L.save();return this._getOAuthToken(P.server,H.code,K.appId,this._getRedirectURI(K,!0),M).then(J=>{const R=
new u.Credential({userId:J.username,server:P.server,token:J.access_token,expires:Date.now()+1E3*J.expires_in,ssl:J.ssl,oAuthState:H.state,_oAuthCred:L});K.userId=R.userId;L.storage=J.persist?D:F;L.refreshToken=J.refresh_token;L.token=null;L.expires=J.refresh_token_expires_in?Date.now()+1E3*J.refresh_token_expires_in:null;L.userId=R.userId;L.ssl=R.ssl;L.save();return R})}M=new u.Credential({userId:H.username,server:P.server,token:H.access_token,expires:Date.now()+1E3*Number(H.expires_in),ssl:"true"===
H.ssl,oAuthState:H.state,_oAuthCred:L});K.userId=M.userId;L.storage=H.persist?D:F;L.refreshToken=null;L.token=M.token;L.expires=M.expires;L.userId=M.userId;L.ssl=M.ssl;L.save();return Promise.resolve(M)};O._processOAuthPopupParams=function(H){var K;const P=this._oAuthDfd;this._oAuthDfd=null;P&&(clearInterval(this._oAuthIntervalId),null==(K=this._oAuthOnPopupHandle)?void 0:K.remove(),H.error?(K="access_denied"===H.error,H=new p(K?"identity-manager:user-aborted":"identity-manager:authentication-failed",
K?"ABORTED":"OAuth: "+H.error+" - "+H.error_description),P.reject(H)):this._processOAuthResponseParams(H,P.oinfo_,P.sinfo_).then(L=>{P.resolve(L)}).catch(L=>{P.reject(L)}))};O._setOAuthResponseQueryString=function(H){H&&("?"===H.charAt(0)&&(H=H.substring(1)),this._processOAuthPopupParams(f.queryToObject(H)))};O._exchangeToken=function(H,K,P){return z(`${H}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:K,token:P}}).then(L=>L.data.token)};O._getPlatformSelf=
function(H,K){H=H.replace(/^http:/i,"https:");return z(`${H}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":K,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0}).then(P=>P.data)};O._getPortalSelf=function(H,K){let P;this._gwDomains.some(L=>{L.regex.test(H)&&(P=L.customBaseUrl);return!!P});if(P)return Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:P,portalMode:"multitenant",
supportsOAuth:!0});this._appOrigin.startsWith("https:")?H=H.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(K)&&(H=H.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return z(H,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(L=>L.data)};O._doPortalSignIn=function(H){const K=this._portalConfig,P=window.location.href,L=this.findServerInfo(H);return(K||this._isPortalDomain(P))&&(L?L.hasPortal||L.owningSystemUrl&&this._isPortalDomain(L.owningSystemUrl):this._isPortalDomain(H))&&
(this._isIdProvider(P,H)||K&&(this._hasSameServerInstance(this._getServerInstanceRoot(K.restBaseUrl),H)||this._isIdProvider(K.restBaseUrl,H))||f.hasSameOrigin(P,H,!0))?!0:!1};O._checkProtocol=function(H,K,P,L){let M=!0;L=L?K.adminTokenServiceUrl:K.tokenServiceUrl;L.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&f.getProxyRule(L)&&(M=this._protocolFunc?!!this._protocolFunc({resourceUrl:H,serverInfo:K}):!1,M||(H=new p("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection."),
P(H)));return M};O._enqueue=function(H,K,P,L,M,J){L||(L=c.createResolver());L.resUrl_=H;L.sinfo_=K;L.options_=P;L.admin_=M;L.refresh_=J;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(H),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(L)):this._xoReqs.push(L):this._doSignIn(L);return L.promise};O._doSignIn=function(H){this._busy=H;this._rejectOnPersistedPageShow=!1;const K=U=>{var V=H.options_&&H.options_.resource;
const Q=H.resUrl_,Y=H.refresh_;let fa=!1;this.credentials.includes(U)||(Y&&this.credentials.includes(Y)?(Y.userId=U.userId,Y.token=U.token,Y.expires=U.expires,Y.validity=U.validity,Y.ssl=U.ssl,Y.creationTime=U.creationTime,fa=!0,U=Y):this.credentials.push(U));U.resources||(U.resources=[]);U.resources.includes(V||Q)||U.resources.push(V||Q);U.scope=this._isServerRsrc(Q)?"server":"portal";U.emitTokenChange();V=this._soReqs;const da={};this._soReqs=[];V.forEach(ca=>{if(!this._isIdenticalService(Q,ca.resUrl_)){const la=
this._getSuffix(ca.resUrl_);da[la]||(da[la]=!0,U.resources.push(ca.resUrl_))}});H.resolve(U);V.forEach(ca=>{this._hasSameServerInstance(this._getServerInstanceRoot(Q),ca.resUrl_)?ca.resolve(U):this._soReqs.push(ca)});this._busy=H.resUrl_=H.sinfo_=H.refresh_=null;fa||this.emit("credential-create",{credential:U});this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},P=U=>{H.reject(U);this._busy=H.resUrl_=H.sinfo_=H.refresh_=null;this._soReqs.length?
this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},L=(U,V,Q,Y)=>{var fa,da;const ca=H.sinfo_,la=!H.options_||!1!==H.options_.prompt,ha=ca.hasPortal&&this._findOAuthInfo(H.resUrl_);let S,ea;if(U)K(new u.Credential({userId:U,server:ca.server,token:Q||null,expires:null!=Y?Number(Y):null,ssl:!!V}));else if(window!==window.parent&&null!=(fa=this._appUrlObj.query)&&fa["arcgis-auth-origin"]&&null!=(da=this._appUrlObj.query)&&da["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),
H.resUrl_)){var ma;window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const sa=e.on(window,"message",ja=>{ja.source===window.parent&&ja.data&&("arcgis:auth:credential"===ja.data.type?(sa.remove(),ja.data.credential.expires<Date.now()?P(new p("identity-manager:credential-request-failed","Parent application's token has expired.")):K(new u.Credential(ja.data.credential))):"arcgis:auth:error"===ja.data.type&&(sa.remove(),"tokenExpiredError"===
ja.data.error.name?P(new p("identity-manager:credential-request-failed","Parent application's token has expired.")):P(p.fromJSON(ja.data.error))))});c.onAbort(null==(ma=H.options_)?void 0:ma.signal,()=>{sa.remove()})}else if(ha){let sa=ha._oAuthCred;sa||(U=new w(ha,D),V=new w(ha,F),U.isValid()&&V.isValid()?U.expires>V.expires?(sa=U,V.destroy()):(sa=V,U.destroy()):sa=U.isValid()?U:V,ha._oAuthCred=sa);if(sa.isValid()){S=new u.Credential({userId:sa.userId,server:ca.server,token:sa.token,expires:sa.expires,
ssl:sa.ssl,_oAuthCred:sa});const ja=ha.appId!==sa.appId&&this._doPortalSignIn(H.resUrl_);ja||sa.refreshToken?(H._pendingDfd=sa.refreshToken?this._getOAuthToken(ca.server,sa.refreshToken,sa.appId).then(wa=>{S.expires=Date.now()+1E3*wa.expires_in;S.token=wa.access_token;return S}):Promise.resolve(S),H._pendingDfd.then(wa=>ja?this._exchangeToken(wa.server,ha.appId,wa.token).then(Ja=>{wa.token=Ja;return wa}).catch(()=>wa):wa).then(wa=>{K(wa)}).catch(()=>{sa.destroy();L()})):K(S)}else if(this._oAuthLocationParams&&
this._hasSameServerInstance(ha.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===sa.stateUID&&sa.codeVerifier))U=this._oAuthLocationParams,this._oAuthLocationParams=null,H._pendingDfd=this._processOAuthResponseParams(U,ha,ca).then(ja=>{K(ja)}).catch(P);else{const ja=()=>{la?H._pendingDfd=this.oAuthSignIn(H.resUrl_,ca,ha,H.options_).then(K,P):(ea=new p("identity-manager:not-authenticated",
"User is not signed in."),P(ea))};this._doPortalSignIn(H.resUrl_)?H._pendingDfd=this._getPlatformSelf(ca.server,ha.appId).then(wa=>{f.hasSameOrigin(wa.portalUrl,this._appOrigin,!0)?(S=new u.Credential({userId:wa.username,server:ca.server,expires:Date.now()+1E3*wa.expires_in,token:wa.token}),K(S)):ja()}).catch(ja):ja()}}else la?this._checkProtocol(H.resUrl_,ca,P,H.admin_)&&(U=H.options_,H.admin_&&(U=U||{},U.isAdmin=!0),H._pendingDfd=this.signIn(H.resUrl_,ca,U).then(K,P)):(ea=new p("identity-manager:not-authenticated",
"User is not signed in."),P(ea))},M=()=>{const U=H.sinfo_;var V=U.owningSystemUrl;const Q=H.options_;let Y,fa,da,ca;Q&&(Y=Q.token,fa=Q.error,da=Q.prompt);ca=this._findCredential(V,{token:Y,resource:H.resUrl_});if(!ca)for(const la of this.credentials)if(this._isIdProvider(V,la.server)){ca=la;break}ca?(V=this.findCredential(H.resUrl_,ca.userId))?K(V):C(U,this._legacyFed)?(V=ca.toJSON(),V.server=U.server,V.resources=null,K(new u.Credential(V))):(H._pendingDfd=this.generateToken(this.findServerInfo(ca.server),
null,{serverUrl:H.resUrl_,token:ca.token,signal:H.options_.signal,ssl:ca.ssl})).then(la=>{K(new u.Credential({userId:ca.userId,server:U.server,token:la.token,expires:null!=la.expires?Number(la.expires):null,ssl:!!la.ssl,isAdmin:H.admin_,validity:la.validity}))},P):(this._busy=null,Y&&(H.options_.token=null),(H._pendingDfd=this.getCredential(V.replace(/\/?$/,"/sharing"),{resource:H.resUrl_,owningTenant:U.owningTenant,signal:H.options_.signal,token:Y,error:fa,prompt:da})).then(()=>{this._enqueue(H.resUrl_,
H.sinfo_,H.options_,H,H.admin_)},la=>{H.resUrl_=H.sinfo_=H.refresh_=null;H.reject(la)}))};this._errbackFunc=P;const J=H.sinfo_.owningSystemUrl,R=this._isServerRsrc(H.resUrl_),X=H.sinfo_._restInfoPms;X?X.promise.then(U=>{const V=H.sinfo_;V._restInfoPms&&(V.adminTokenServiceUrl=V._restInfoPms.adminUrl,V._restInfoPms=null,V.tokenServiceUrl=a.getDeepValue("authInfo.tokenServicesUrl",U)||a.getDeepValue("authInfo.tokenServiceUrl",U)||a.getDeepValue("tokenServiceUrl",U),V.shortLivedTokenValidity=a.getDeepValue("authInfo.shortLivedTokenValidity",
U),V.currentVersion=U.currentVersion,V.owningTenant=U.owningTenant,(U=V.owningSystemUrl=U.owningSystemUrl)&&this._portals.push(U));R&&V.owningSystemUrl?M():L()},()=>{H.sinfo_._restInfoPms=null;const U=new p("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");P(U)}):R&&J?M():H.sinfo_._selfReq?H.sinfo_._selfReq.selfDfd.then(U=>{const V={};let Q,Y,fa,da;U&&(Q=U.user&&U.user.username,V.username=Q,V.allSSL=U.allSSL,Y=U.supportsOAuth,fa=parseFloat(U.currentVersion),
"multitenant"===U.portalMode&&(da=U.customBaseUrl),H.sinfo_.currentVersion=fa);H.sinfo_.webTierAuth=!!Q;return Q&&this.normalizeWebTierAuth?this.generateToken(H.sinfo_,null,{ssl:V.allSSL}).catch(()=>null).then(ca=>{V.portalToken=ca&&ca.token;V.tokenExpiration=ca&&ca.expires;return V}):!Q&&Y&&4.4<=fa&&!this._findOAuthInfo(H.resUrl_)?this._generateOAuthInfo({portalUrl:H.sinfo_.server,customBaseUrl:da,owningTenant:H.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>V):V}).catch(()=>null).then(U=>
{H.sinfo_._selfReq=null;U?L(U.username,U.allSSL,U.portalToken,U.tokenExpiration):L()}):L()};O._generateOAuthInfo=function(H){let K,P=H.portalUrl;const L=H.customBaseUrl,M=H.owningTenant;if(H=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){K=window.location.href;let J=K.indexOf("?");-1<J&&(K=K.slice(0,J));J=K.search(/\/(apps|home)\//);K=-1<J?K.slice(0,J):null}H&&K?(this._hasTestedIfAppIsOnPortal=!0,H=z(K+"/sharing/rest",{query:{f:"json"}}).then(()=>{this.defaultOAuthInfo=
new A({appId:"arcgisonline",popupCallbackUrl:K+"/home/oauth-callback.html"})})):H=Promise.resolve();return H.then(()=>{if(this.defaultOAuthInfo)return P=P.replace(/^http:/i,"https:"),z(P+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:M,client_id:this.defaultOAuthInfo.appId,redirect_uri:f.makeAbsolute(this.defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(J=>{if(J.data.valid){const R=this.defaultOAuthInfo.clone();R.portalUrl=J.data.urlKey&&L?"https://"+J.data.urlKey.toLowerCase()+"."+
L:P;R.popup=window!==window.top||!(f.hasSameOrigin(P,this._appOrigin)||this._gwDomains.some(X=>X.regex.test(P)&&X.regex.test(this._appOrigin)));this.oAuthInfos.push(R)}})})};O._doOAuthSignIn=function(H,K,P,L){var M=P._oAuthCred,J={portalUrl:P.portalUrl};!P.popup&&P.preserveUrlHash&&window.location.hash&&(J.hash=window.location.hash);M.stateUID&&(J.uid=M.stateUID);J={client_id:P.appId,response_type:M.codeVerifier?"code":"token",state:JSON.stringify(J),expiration:P.expiration,locale:P.locale,redirect_uri:this._getRedirectURI(P,
!!M.codeVerifier)};P.forceLogin&&(J.force_login=!0);P.forceUserId&&P.userId&&(J.prepopulatedusername=P.userId);!P.popup&&this._doPortalSignIn(H)&&(J.redirectToUserOrgUrl=!0);M.codeVerifier&&(J.code_challenge=L||M.codeVerifier,J.code_challenge_method=L?"S256":"plain");L=P.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";M=L+"?"+f.objectToQuery(J);if(P.popup){const R=window.open(M,"esriJSAPIOAuth",P.popupWindowFeatures);R?(R.focus(),this._oAuthDfd.oAuthWin_=R,this._oAuthIntervalId=
setInterval(()=>{if(R.closed){clearInterval(this._oAuthIntervalId);this._oAuthOnPopupHandle.remove();const X=this._oAuthDfd;if(X){const U=new p("identity-manager:user-aborted","ABORTED");X.reject(U)}}},500),this._oAuthOnPopupHandle=e.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],X=>{"arcgis:auth:hash"===X.type?this.setOAuthResponseHash(X.detail):this._setOAuthResponseQueryString(X.detail)})):(H=new p("identity-manager:popup-blocked","ABORTED"),this._oAuthDfd.reject(H))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:J,authorizeUrl:L,resourceUrl:H,serverInfo:K,oAuthInfo:P}):window.location.href=M};O._getRedirectURI=function(H,K){const P=window.location.href.replace(/#.*$/,"");if(H.popup)return f.makeAbsolute(H.popupCallbackUrl);if(K){const L=f.urlToObject(P);L.query&&"code error error_description message_code persist state".split(" ").forEach(M=>{delete L.query[M]});return f.addQueryParameters(L.path,L.query)}return P};return G}(g);m.prototype.declaredClass=
"esri.identity.IdentityManagerBase";u.Credential=function(E){function G(H){var K=E.call(this,H)||this;K._oAuthCred=null;K.tokenRefreshBuffer=2;H&&H._oAuthCred&&(K._oAuthCred=H._oAuthCred);return K}n._inheritsLoose(G,E);var O=G.prototype;O.initialize=function(){this.resources=this.resources||[];null==this.creationTime&&(this.creationTime=Date.now())};O.refreshToken=function(){const H=v.id.findServerInfo(this.server),K=H&&H.owningSystemUrl,P=!!K&&"server"===this.scope,L=P&&C(H,v.id._legacyFed);var M=
H.webTierAuth;const J=M&&v.id.normalizeWebTierAuth;var R=y[this.server];R=R&&R[this.userId];let X=this.resources&&this.resources[0],U=P&&v.id.findServerInfo(K),V={username:this.userId,password:R},Q;if(!M||J)if(P&&!U&&v.id.serverInfos.some(Y=>{v.id._isIdProvider(K,Y.server)&&(U=Y);return!!U}),M=U&&v.id.findCredential(U.server,this.userId),!P||M)if(L)M.refreshToken();else{if(P)Q={serverUrl:X,token:M&&M.token,ssl:M&&M.ssl};else if(J)V=null,Q={ssl:this.ssl};else if(R)this.isAdmin&&(Q={isAdmin:!0});else{let Y;
X&&(X=v.id._sanitizeUrl(X),this._enqueued=1,Y=v.id._enqueue(X,H,null,null,this.isAdmin,this),Y.then(()=>{this._enqueued=0;this.refreshServerTokens()}).catch(()=>{this._enqueued=0}));return Y}return v.id.generateToken(P?U:H,P?null:V,Q).then(Y=>{this.token=Y.token;this.expires=null!=Y.expires?Number(Y.expires):null;this.creationTime=Date.now();this.validity=Y.validity;this.emitTokenChange();this.refreshServerTokens()}).catch(()=>{})}};O.refreshServerTokens=function(){"portal"===this.scope&&v.id.credentials.forEach(H=>
{const K=v.id.findServerInfo(H.server),P=K&&K.owningSystemUrl;H!==this&&H.userId===this.userId&&P&&"server"===H.scope&&(v.id._hasSameServerInstance(this.server,P)||v.id._isIdProvider(P,this.server))&&(C(K,v.id._legacyFed)?(H.token=this.token,H.expires=this.expires,H.creationTime=this.creationTime,H.validity=this.validity,H.emitTokenChange()):H.refreshToken())})};O.emitTokenChange=function(H){clearTimeout(this._refreshTimer);var K=this.server&&v.id.findServerInfo(this.server);const P=(K=K&&K.owningSystemUrl)&&
v.id.findServerInfo(K);!1===H||K&&"portal"!==this.scope&&(!P||!P.webTierAuth||v.id.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer();this.emit("token-change")};O.destroy=function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const H=v.id.credentials.indexOf(this);-1<H&&v.id.credentials.splice(H,1);this.emitTokenChange();this.emit("destroy")};
O.toJSON=function(){const H=b.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),K=this.resources;K&&0<K.length&&(H.resources=K.slice());return H};O._startRefreshTimer=function(){clearTimeout(this._refreshTimer);const H=6E4*this.tokenRefreshBuffer,K=2**31-1;let P=(this.validity?this.creationTime+6E4*this.validity:this.expires)-Date.now();0>P?P=0:P>K&&(P=K);this._refreshTimer=
setTimeout(this.refreshToken.bind(this),P>H?P-H:P)};return G}(g.EventedAccessor);h.__decorate([l.property()],u.Credential.prototype,"creationTime",void 0);h.__decorate([l.property()],u.Credential.prototype,"expires",void 0);h.__decorate([l.property()],u.Credential.prototype,"isAdmin",void 0);h.__decorate([l.property()],u.Credential.prototype,"oAuthState",void 0);h.__decorate([l.property()],u.Credential.prototype,"resources",void 0);h.__decorate([l.property()],u.Credential.prototype,"scope",void 0);
h.__decorate([l.property()],u.Credential.prototype,"server",void 0);h.__decorate([l.property()],u.Credential.prototype,"ssl",void 0);h.__decorate([l.property()],u.Credential.prototype,"token",void 0);h.__decorate([l.property()],u.Credential.prototype,"tokenRefreshBuffer",void 0);h.__decorate([l.property()],u.Credential.prototype,"userId",void 0);h.__decorate([l.property()],u.Credential.prototype,"validity",void 0);u.Credential=h.__decorate([k.subclass("esri.identity.Credential")],u.Credential);u.IdentityManagerBase=
m;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/identity/IdentityForm":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../intl/substitute ../widgets/Widget ../widgets/support/widgetUtils ../widgets/support/decorators/messageBundle ../widgets/support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){r=function(d){function f(m,k){m=d.call(this,m,k)||this;m._usernameInputNode=null;m._passwordInputNode=null;m.messages=null;m.signingIn=!1;m.server=null;m.resource=null;m.error=null;m.oAuthPrompt=!1;return m}u._inheritsLoose(f,d);var l=f.prototype;l.render=function(){const {error:m,server:k,resource:q,signingIn:t,oAuthPrompt:w,messages:A}=this,x=c.tsx("div",{class:"esri-identity-form__group"},g.substitute(w?A.oAuthInfo:A.info,{server:/\.arcgis\.com/i.test(k)?"ArcGIS Online":
k,resource:`(${q||A.lblItem})`})),y=w?null:c.tsx("div",{class:"esri-identity-form__group",key:"username"},c.tsx("label",{class:"esri-identity-form__label"},A.lblUser,c.tsx("input",{value:"",required:!0,autocomplete:"off",spellcheck:!1,type:"text",bind:this,afterCreate:b.storeNode,"data-node-ref":"_usernameInputNode",class:"esri-input"}))),B=w?null:c.tsx("div",{class:"esri-identity-form__group",key:"password"},c.tsx("label",{class:"esri-identity-form__label"},A.lblPwd,c.tsx("input",{value:"",required:!0,
type:"password",bind:this,afterCreate:b.storeNode,"data-node-ref":"_passwordInputNode",class:"esri-input"}))),C=c.tsx("div",{class:this.classes("esri-identity-form__group","esri-identity-form__footer")},c.tsx("input",{type:"submit",disabled:!!t,value:t?A.lblSigning:A.lblOk,class:"esri-button"}),c.tsx("input",{type:"button",value:A.lblCancel,bind:this,onclick:this._cancel,class:this.classes("esri-button","esri-button--secondary")})),D=m?c.tsx("div",null,m.details&&m.details.httpStatus?A.invalidUser:
A.noAuthService):null;return c.tsx("form",{class:"esri-identity-form",bind:this,onsubmit:this._submit},x,D,y,B,C)};l._cancel=function(){this._set("signingIn",!1);this._usernameInputNode&&(this._usernameInputNode.value="");this._passwordInputNode&&(this._passwordInputNode.value="");this.emit("cancel")};l._submit=function(m){m.preventDefault();this._set("signingIn",!0);this.emit("submit",this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&
this._passwordInputNode.value})};return f}(e);n.__decorate([h.property(),a.messageBundle("esri/identity/t9n/identity")],r.prototype,"messages",void 0);n.__decorate([h.property()],r.prototype,"signingIn",void 0);n.__decorate([h.property()],r.prototype,"server",void 0);n.__decorate([h.property()],r.prototype,"resource",void 0);n.__decorate([h.property()],r.prototype,"error",void 0);n.__decorate([h.property()],r.prototype,"oAuthPrompt",void 0);return r=n.__decorate([p.subclass("esri.identity.IdentityForm")],
r)})},"esri/identity/IdentityModal":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/handleUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../widgets/Widget ../widgets/support/widget ../widgets/support/decorators/messageBundle ../widgets/support/jsxFactory".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d){function f(Y,fa){var da=Object.keys(Y);
if(Object.getOwnPropertySymbols){var ca=Object.getOwnPropertySymbols(Y);fa&&(ca=ca.filter(function(la){return Object.getOwnPropertyDescriptor(Y,la).enumerable}));da.push.apply(da,ca)}return da}function l(Y){for(var fa=1;fa<arguments.length;fa++){var da=null!=arguments[fa]?arguments[fa]:{};fa%2?f(Object(da),!0).forEach(function(ca){var la=da[ca];ca in Y?Object.defineProperty(Y,ca,{value:la,enumerable:!0,configurable:!0,writable:!0}):Y[ca]=la}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,
Object.getOwnPropertyDescriptors(da)):f(Object(da)).forEach(function(ca){Object.defineProperty(Y,ca,Object.getOwnPropertyDescriptor(da,ca))})}return Y}z='input select textarea a[href] button [tabindex]:not(slot) audio[controls] video[controls] [contenteditable]:not([contenteditable\x3d"false"]) details\x3esummary:first-of-type details'.split(" ");var m=z.join(","),k=(p="undefined"===typeof Element)?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,
q=!p&&Element.prototype.getRootNode?function(Y){return Y.getRootNode()}:function(Y){return Y.ownerDocument},t=function(Y,fa,da){var ca=Array.prototype.slice.apply(Y.querySelectorAll(m));fa&&k.call(Y,m)&&ca.unshift(Y);return ca=ca.filter(da)},w=function la(fa,da,ca){for(var ha=[],S=Array.from(fa);S.length;){var ea=S.shift();if("SLOT"===ea.tagName){var ma=ea.assignedElements();ma=la(ma.length?ma:ea.children,!0,ca);ca.flatten?ha.push.apply(ha,ma):ha.push({scope:ea,candidates:ma})}else{k.call(ea,m)&&
ca.filter(ea)&&(da||!fa.includes(ea))&&ha.push(ea);ma=ea.shadowRoot||"function"===typeof ca.getShadowRoot&&ca.getShadowRoot(ea);var sa=!ca.shadowRootFilter||ca.shadowRootFilter(ea);ma&&sa?(ma=la(!0===ma?ea.children:ma.children,!0,ca),ca.flatten?ha.push.apply(ha,ma):ha.push({scope:ea,candidates:ma})):S.unshift.apply(S,ea.children)}}return ha},A=function(fa,da){return 0>fa.tabIndex&&(da||/^(AUDIO|VIDEO|DETAILS)$/.test(fa.tagName)||fa.isContentEditable)&&isNaN(parseInt(fa.getAttribute("tabindex"),10))?
0:fa.tabIndex},x=function(fa,da){return fa.tabIndex===da.tabIndex?fa.documentOrder-da.documentOrder:fa.tabIndex-da.tabIndex},y=function(fa){return"DETAILS"===fa.tagName&&Array.prototype.slice.apply(fa.children).some(function(da){return"SUMMARY"===da.tagName})},B=function(fa,da){for(var ca=0;ca<fa.length;ca++)if(fa[ca].checked&&fa[ca].form===da)return fa[ca]},C=function(fa){if(!fa.name)return!0;var da=fa.form||q(fa),ca=function(ha){return da.querySelectorAll('input[type\x3d"radio"][name\x3d"'+ha+'"]')};
if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var la=ca(window.CSS.escape(fa.name));else try{la=ca(fa.name)}catch(ha){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",ha.message),!1}ca=B(la,fa.form);return!ca||ca===fa},D=function(fa){fa=fa.getBoundingClientRect();var da=fa.height;return 0===fa.width&&0===da},F=function(fa,da){var ca=
da.displayCheck;da=da.getShadowRoot;if("hidden"===getComputedStyle(fa).visibility)return!0;var la=k.call(fa,"details\x3esummary:first-of-type")?fa.parentElement:fa;if(k.call(la,"details:not([open]) *"))return!0;la=q(fa).host;la=(null===la||void 0===la?void 0:la.ownerDocument.contains(la))||fa.ownerDocument.contains(fa);if(!ca||"full"===ca){if("function"===typeof da){for(ca=fa;fa;){var ha=fa.parentElement,S=q(fa);if(ha&&!ha.shadowRoot&&!0===da(ha))return D(fa);fa=fa.assignedSlot?fa.assignedSlot:ha||
S===fa.ownerDocument?ha:S.host}fa=ca}if(la)return!fa.getClientRects().length}else if("non-zero-area"===ca)return D(fa);return!1},E=function(fa,da){var ca;(ca=da.disabled)||(ca="INPUT"===da.tagName&&"hidden"===da.type);if(!(fa=ca||F(da,fa)||y(da)))a:{if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(da.tagName))for(fa=da.parentElement;fa;){if("FIELDSET"===fa.tagName&&fa.disabled){for(ca=0;ca<fa.children.length;ca++){var la=fa.children.item(ca);if("LEGEND"===la.tagName){fa=k.call(fa,"fieldset[disabled] *")?
!0:!la.contains(da);break a}}fa=!0;break a}fa=fa.parentElement}fa=!1}return fa?!1:!0},G=function(fa,da){return"INPUT"===da.tagName&&"radio"===da.type&&!C(da)||0>A(da)||!E(fa,da)?!1:!0},O=function(fa){fa=parseInt(fa.getAttribute("tabindex"),10);return isNaN(fa)||0<=fa?!0:!1},H=function ca(da){var la=[],ha=[];da.forEach(function(S,ea){var ma=!!S.scope,sa=ma?S.scope:S,ja=A(sa,ma),wa=ma?ca(S.candidates):sa;0===ja?ma?la.push.apply(la,wa):la.push(sa):ha.push({documentOrder:ea,tabIndex:ja,item:S,isScope:ma,
content:wa})});return ha.sort(x).reduce(function(S,ea){ea.isScope?S.push.apply(S,ea.content):S.push(ea.content);return S},[]).concat(la)},K=function(da,ca){ca=ca||{};da=ca.getShadowRoot?w([da],ca.includeContainer,{filter:G.bind(null,ca),flatten:!1,getShadowRoot:ca.getShadowRoot,shadowRootFilter:O}):t(da,ca.includeContainer,G.bind(null,ca));return H(da)},P=function(da,ca){ca=ca||{};return ca.getShadowRoot?w([da],ca.includeContainer,{filter:E.bind(null,ca),flatten:!0,getShadowRoot:ca.getShadowRoot}):
t(da,ca.includeContainer,E.bind(null,ca))},L=function(da,ca){ca=ca||{};if(!da)throw Error("No node provided");return!1===k.call(da,m)?!1:G(ca,da)},M=z.concat("iframe").join(","),J=function(da,ca){ca=ca||{};if(!da)throw Error("No node provided");return!1===k.call(da,M)?!1:E(ca,da)},R=function(){var da=[];return{activateTrap:function(ca){if(0<da.length){var la=da[da.length-1];la!==ca&&la.pause()}la=da.indexOf(ca);-1!==la&&da.splice(la,1);da.push(ca)},deactivateTrap:function(ca){ca=da.indexOf(ca);-1!==
ca&&da.splice(ca,1);0<da.length&&da[da.length-1].unpause()}}}(),X=function(da,ca){var la=-1;da.every(function(ha,S){return ca(ha)?(la=S,!1):!0});return la},U=function(da){for(var ca=arguments.length,la=Array(1<ca?ca-1:0),ha=1;ha<ca;ha++)la[ha-1]=arguments[ha];return"function"===typeof da?da.apply(void 0,la):da},V=function(da){return da.target.shadowRoot&&"function"===typeof da.composedPath?da.composedPath()[0]:da.target},Q=function(da,ca){var la=(null===ca||void 0===ca?void 0:ca.document)||document,
ha=l({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},ca),S=[],ea=[],ma=[],sa=null,ja=null,wa=!1,Ja=!1,va=void 0,ra=function(gb,Za,ab){return gb&&void 0!==gb[Za]?gb[Za]:ha[ab||Za]},Ba=function(gb){return ea.findIndex(function(Za){var ab=Za.tabbableNodes;return Za.container.contains(gb)||ab.find(function(ub){return ub===gb})})},Ha=function(gb){var Za=ha[gb];if("function"===typeof Za){for(var ab=arguments.length,ub=Array(1<ab?ab-1:0),yb=1;yb<ab;yb++)ub[yb-1]=arguments[yb];Za=Za.apply(void 0,
ub)}!0===Za&&(Za=void 0);if(!Za){if(void 0===Za||!1===Za)return Za;throw Error("`".concat(gb,"` was specified but was not a node, or did not return a node"));}ab=Za;if("string"===typeof Za&&(ab=la.querySelector(Za),!ab))throw Error("`".concat(gb,"` as selector refers to no known node"));return ab},ya=function(){var gb=Ha("initialFocus");if(!1===gb)return!1;void 0===gb&&(gb=0<=Ba(la.activeElement)?la.activeElement:(gb=ma[0])&&gb.firstTabbableNode||Ha("fallbackFocus"));if(!gb)throw Error("Your focus-trap needs to have at least one focusable element");
return gb},qa=function(){ea=S.map(function(gb){var Za=K(gb,ha.tabbableOptions),ab=P(gb,ha.tabbableOptions);return{container:gb,tabbableNodes:Za,focusableNodes:ab,firstTabbableNode:0<Za.length?Za[0]:null,lastTabbableNode:0<Za.length?Za[Za.length-1]:null,nextTabbableNode:function(ub){var yb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,tb=ab.findIndex(function(nb){return nb===ub});if(!(0>tb))return yb?ab.slice(tb+1).find(function(nb){return L(nb,ha.tabbableOptions)}):ab.slice(0,tb).reverse().find(function(nb){return L(nb,
ha.tabbableOptions)})}}});ma=ea.filter(function(gb){return 0<gb.tabbableNodes.length});if(0>=ma.length&&!Ha("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");},oa=function ab(Za){!1!==Za&&Za!==la.activeElement&&(Za&&Za.focus?(Za.focus({preventScroll:!!ha.preventScroll}),ja=Za,Za.tagName&&"input"===Za.tagName.toLowerCase()&&"function"===typeof Za.select&&Za.select()):ab(ya()))},Aa=function(Za){var ab=Ha("setReturnFocus",
Za);return ab?ab:!1===ab?!1:Za},Ka=function(Za){var ab=V(Za);0<=Ba(ab)||(U(ha.clickOutsideDeactivates,Za)?$a.deactivate({returnFocus:ha.returnFocusOnDeactivate&&!J(ab,ha.tabbableOptions)}):U(ha.allowOutsideClick,Za)||Za.preventDefault())},Wa=function(Za){var ab=V(Za),ub=0<=Ba(ab);ub||ab instanceof Document?ub&&(ja=ab):(Za.stopImmediatePropagation(),oa(ja||ya()))},Pa=function(Za){var ab=V(Za);qa();var ub=null;if(0<ma.length){var yb=Ba(ab),tb=0<=yb?ea[yb]:void 0;if(0>yb)ub=Za.shiftKey?ma[ma.length-
1].lastTabbableNode:ma[0].firstTabbableNode;else if(Za.shiftKey){var nb=X(ma,function(Nb){return ab===Nb.firstTabbableNode});0>nb&&(tb.container===ab||J(ab,ha.tabbableOptions)&&!L(ab,ha.tabbableOptions)&&!tb.nextTabbableNode(ab,!1))&&(nb=yb);0<=nb&&(ub=ma[0===nb?ma.length-1:nb-1].lastTabbableNode)}else nb=X(ma,function(Nb){return ab===Nb.lastTabbableNode}),0>nb&&(tb.container===ab||J(ab,ha.tabbableOptions)&&!L(ab,ha.tabbableOptions)&&!tb.nextTabbableNode(ab))&&(nb=yb),0<=nb&&(ub=ma[nb===ma.length-
1?0:nb+1].firstTabbableNode)}else ub=Ha("fallbackFocus");ub&&(Za.preventDefault(),oa(ub))},Ta=function(Za){"Escape"!==Za.key&&"Esc"!==Za.key&&27!==Za.keyCode||!1===U(ha.escapeDeactivates,Za)?"Tab"!==Za.key&&9!==Za.keyCode||Pa(Za):(Za.preventDefault(),$a.deactivate())},eb=function(Za){var ab=V(Za);0<=Ba(ab)||U(ha.clickOutsideDeactivates,Za)||U(ha.allowOutsideClick,Za)||(Za.preventDefault(),Za.stopImmediatePropagation())},Na=function(){if(wa)return R.activateTrap($a),va=ha.delayInitialFocus?setTimeout(function(){oa(ya())},
0):oa(ya()),la.addEventListener("focusin",Wa,!0),la.addEventListener("mousedown",Ka,{capture:!0,passive:!1}),la.addEventListener("touchstart",Ka,{capture:!0,passive:!1}),la.addEventListener("click",eb,{capture:!0,passive:!1}),la.addEventListener("keydown",Ta,{capture:!0,passive:!1}),$a},Sa=function(){if(wa)return la.removeEventListener("focusin",Wa,!0),la.removeEventListener("mousedown",Ka,!0),la.removeEventListener("touchstart",Ka,!0),la.removeEventListener("click",eb,!0),la.removeEventListener("keydown",
Ta,!0),$a};var $a={get active(){return wa},get paused(){return Ja},activate:function(Za){if(wa)return this;var ab=ra(Za,"onActivate"),ub=ra(Za,"onPostActivate"),yb=ra(Za,"checkCanFocusTrap");yb||qa();wa=!0;Ja=!1;sa=la.activeElement;ab&&ab();Za=function(){yb&&qa();Na();ub&&ub()};if(yb)return yb(S.concat()).then(Za,Za),this;Za();return this},deactivate:function(Za){if(!wa)return this;var ab=l({onDeactivate:ha.onDeactivate,onPostDeactivate:ha.onPostDeactivate,checkCanReturnFocus:ha.checkCanReturnFocus},
Za);clearTimeout(va);va=void 0;Sa();Ja=wa=!1;R.deactivateTrap($a);var ub=ra(ab,"onDeactivate"),yb=ra(ab,"onPostDeactivate");Za=ra(ab,"checkCanReturnFocus");var tb=ra(ab,"returnFocus","returnFocusOnDeactivate");ub&&ub();ab=function(){setTimeout(function(){tb&&oa(Aa(sa));yb&&yb()},0)};if(tb&&Za)return Za(Aa(sa)).then(ab,ab),this;ab();return this},pause:function(){if(Ja||!wa)return this;Ja=!0;Sa();return this},unpause:function(){if(!Ja||!wa)return this;Ja=!1;qa();Na();return this},updateContainerElements:function(Za){S=
[].concat(Za).filter(Boolean).map(function(ab){return"string"===typeof ab?la.querySelector(ab):ab});wa&&qa();return this}};$a.updateContainerElements(da);return $a};b=function(da){function ca(ha,S){var ea=da.call(this,ha,S)||this;ea.container=document.createElement("div");ea.content=null;ea.open=!1;ea._close=()=>{ea.open=!1};document.body.appendChild(ea.container);ea.own(r.watch(()=>ea.open,()=>ea._toggleFocusTrap()));return ea}u._inheritsLoose(ca,da);var la=ca.prototype;la.destroy=function(){this._destroyFocusTrap()};
la.render=function(){var ha=this.id;const {open:S,content:ea,title:ma,messages:sa}=this;var ja=S&&!!ea;const wa={["esri-identity-modal--open"]:ja,["esri-identity-modal--closed"]:!ja},Ja=d.tsx("button",{class:"esri-identity-modal__close-button","aria-label":sa.close,title:sa.close,bind:this,onclick:this._close,type:"button"},d.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),va=`${ha}_title`;ha=`${ha}_content`;const ra=ma?d.tsx("h1",{id:va,class:"esri-identity-modal__title"},ma):null;ja=
ja?d.tsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog","aria-labelledby":va,"aria-describedby":ha,afterCreate:this._createFocusTrap},Ja,ra,this._renderContent(ha)):null;return d.tsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",wa)},ja)};la._destroyFocusTrap=function(){var ha;null==(ha=this._focusTrap)?void 0:ha.deactivate({onDeactivate:null});this._focusTrap=null};la._toggleFocusTrap=function(){const {_focusTrap:ha,open:S}=this;ha&&(S?ha.activate():ha.deactivate())};
la._createFocusTrap=function(ha){this._destroyFocusTrap();const S=requestAnimationFrame(()=>{this._focusTrap=Q(ha,{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()});this.own(h.makeHandle(()=>cancelAnimationFrame(S)))};la._renderContent=function(ha){const S=this.content;return"string"===typeof S?d.tsx("div",{class:"esri-identity-modal__content",id:ha,innerHTML:S}):a.isWidget(S)?d.tsx("div",{class:"esri-identity-modal__content",id:ha},S.render()):S instanceof HTMLElement?d.tsx("div",
{class:"esri-identity-modal__content",id:ha,bind:S,afterCreate:this._attachToNode}):null};la._attachToNode=function(ha){ha.appendChild(this)};return ca}(b);n.__decorate([v.property({readOnly:!0})],b.prototype,"container",void 0);n.__decorate([v.property()],b.prototype,"content",void 0);n.__decorate([v.property()],b.prototype,"open",void 0);n.__decorate([v.property(),c.messageBundle("esri/t9n/common")],b.prototype,"messages",void 0);n.__decorate([v.property({aliasOf:"messages.auth.signIn"})],b.prototype,
"title",void 0);return b=n.__decorate([e.subclass("esri.identity.IdentityModal")],b)})},"esri/identity/OAuthCredential":function(){define(function(){let u=function(){function n(r,v){this.userId=this.token=this.stateUID=this.ssl=this.refreshToken=this.expires=this.codeVerifier=this.appId=this.storage=this.oAuthInfo=null;this.oAuthInfo=r;this.storage=v;this._init()}var h=n.prototype;h.isValid=function(){let r=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&
this.refreshToken)r=!0;else{const v=Date.now();this.expires>v&&(this.expires-v)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(r=!0)}return r};h.save=function(){if(!this.storage)return!1;const r=this._load(),v=this.oAuthInfo;if(v&&v.authNamespace&&v.portalUrl){let z=r[v.authNamespace];z||(z=r[v.authNamespace]={});this.appId||(this.appId=v.appId);z[v.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,
userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(r))}catch(p){return console.warn(p),!1}return!0}return!1};h.destroy=function(){const r=this._load(),v=this.oAuthInfo;if(v&&v.appId&&v.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var z=v.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken";const p=new FormData;p.append("f","json");p.append("auth_token",this.refreshToken||this.token);p.append("client_id",v.appId);
p.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(z,p);else{const g=new XMLHttpRequest;g.open("POST",z);g.send(p)}}if(v&&v.authNamespace&&v.portalUrl&&this.storage&&(z=r[v.authNamespace])){delete z[v.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(r))}catch(p){console.log(p)}}v&&(this.oAuthInfo=v._oAuthCred=null)};h._init=function(){var r=this._load();const v=this.oAuthInfo;v&&v.authNamespace&&
v.portalUrl&&(r=r[v.authNamespace])&&(r=r[v.portalUrl])&&(this.appId=r.appId,this.codeVerifier=r.codeVerifier,this.expires=r.expires,this.refreshToken=r.refreshToken,this.ssl=r.ssl,this.stateUID=r.stateUID,this.token=r.token,this.userId=r.userId)};h._load=function(){let r={};if(this.storage){const v=this.storage.getItem("esriJSAPIOAuth");if(v)try{r=JSON.parse(v)}catch(z){console.warn(z)}}return r};return n}();u.prototype.declaredClass="esri.identity.OAuthCredential";return u})},"esri/identity/OAuthInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){var e;h=e=function(b){function a(c){c=b.call(this,c)||this;c._oAuthCred=null;c.appId=null;c.authNamespace="/";c.expiration=20160;c.flowType="auto";c.forceLogin=!1;c.forceUserId=!1;c.locale=null;c.minTimeUntilExpiration=30;c.popup=!1;c.popupCallbackUrl="oauth-callback.html";c.popupWindowFeatures="height\x3d490,width\x3d800,resizable,scrollbars,status";c.portalUrl="https://www.arcgis.com";c.preserveUrlHash=!1;c.userId=null;return c}u._inheritsLoose(a,b);a.prototype.clone=function(){return e.fromJSON(this.toJSON())};
return a}(h.JSONSupport);n.__decorate([r.property({json:{write:!0}})],h.prototype,"appId",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"authNamespace",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"expiration",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"flowType",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"forceLogin",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"forceUserId",void 0);n.__decorate([r.property({json:{write:!0}})],
h.prototype,"locale",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"minTimeUntilExpiration",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"popup",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"popupCallbackUrl",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"popupWindowFeatures",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"portalUrl",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"preserveUrlHash",
void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"userId",void 0);return h=e=n.__decorate([g.subclass("esri.identity.OAuthInfo")],h)})},"esri/identity/ServerInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g){h=function(e){function b(a){a=e.call(this,
a)||this;a.adminTokenServiceUrl=null;a.currentVersion=null;a.hasPortal=null;a.hasServer=null;a.owningSystemUrl=null;a.owningTenant=null;a.server=null;a.shortLivedTokenValidity=null;a.tokenServiceUrl=null;a.webTierAuth=null;return a}u._inheritsLoose(b,e);return b}(h.JSONSupport);n.__decorate([r.property({json:{write:!0}})],h.prototype,"adminTokenServiceUrl",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"currentVersion",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,
"hasPortal",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"hasServer",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"owningSystemUrl",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"owningTenant",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"server",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"shortLivedTokenValidity",void 0);n.__decorate([r.property({json:{write:!0}})],h.prototype,"tokenServiceUrl",void 0);
n.__decorate([r.property({json:{write:!0}})],h.prototype,"webTierAuth",void 0);return h=n.__decorate([g.subclass("esri.identity.ServerInfo")],h)})},"app/portal/Portal":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/portal/Portal esri/request esri/intl/locale".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});v=h.__importDefault(v);z=h.__importDefault(z);p=h.__importStar(p);u=function(g){function e(b){b=g.call(this,b)||this;b.credential=
null;b.subscriptionInfo=null;b.defaultDevBasemap=null;b.allowedBetaFeatures=[];b.isDeveloper=!1;return b}h.__extends(e,g);e.prototype.fetchSettings=function(){var b=this;return z.default(this.restUrl+"/portals/self/settings",{query:{f:"json"},responseType:"json",method:"auto"}).then(function(a){b.settings=null===a||void 0===a?void 0:a.data;return b.settings})};e.prototype.fetchHelpMap=function(){var b=this,a=this.restUrl,c=this.getLocale();return z.default(a+"/portals/helpmap",{query:{culture:c,f:"json"},
responseType:"json",method:"auto"}).then(function(d){var f,l;b.helpMap=null===(l=null===(f=null===d||void 0===d?void 0:d.data)||void 0===f?void 0:f.helpMap)||void 0===l?void 0:l.m;return b.helpMap})};e.prototype.fetchBlockedApps=function(){return h.__awaiter(this,void 0,void 0,function(){var b,a,c,d,f=this;return h.__generator(this,function(l){switch(l.label){case 0:return b=this.restUrl,a=b+"}portals/self/signinSettings",(d=this.blockedApps)?[3,2]:[4,z.default(a,{query:{f:"json"},responseType:"json",
method:"auto"}).then(function(m){var k;f.blockedApps=(null===(k=null===m||void 0===m?void 0:m.data)||void 0===k?void 0:k.blockedApps)||[];return f.blockedApps})];case 1:d=l.sent(),l.label=2;case 2:return c=d,[2,c]}})})};e.prototype.fetchSubscriptionInfo=function(){var b=this;return z.default(this.restUrl+"/portals/self/subscriptionInfo",{query:{f:"json"},responseType:"json",method:"auto"}).then(function(a){b.subscriptionInfo=null===a||void 0===a?void 0:a.data;return b.subscriptionInfo})};e.prototype.isUniqueItemTitle=
function(b,a,c){return this.queryItems({query:"owner:"+this.user.username+" ownerfolder:"+(a||"root")+' type:"'+c+'" title:"'+b+'"',num:100}).then(function(d){return!(d.total?d.results:[]).some(function(f){return f.title===b})})};e.prototype.getUniqueItemTitle=function(b,a,c){return this.queryItems({query:"owner:"+this.user.username+" orgid:"+this.id+" ownerfolder:"+(a||"root")+' type:"'+c+'" title:"'+b+'"',num:100}).then(function(d){return d&&0<d.total?b+"_"+(d.total+1):b})};e.prototype.getRegion=
function(){var b=this.region,a=this.user;a=a&&a.region;var c=this.ipCntryCode,d=p.getLocale().split("-")[1]||"US";return a||b||c||d};e.prototype.getLocale=function(){var b,a,c=this.user;c=c&&(null===(b=null===c||void 0===c?void 0:c.culture)||void 0===b?void 0:b.toLowerCase());b=null===(a=this.culture)||void 0===a?void 0:a.toLowerCase();a=p.getLocale();return c||b||(null===a||void 0===a?void 0:a.toLowerCase())||"en-us"};e.prototype.getUnits=function(){var b=(this.region||"").toLowerCase(),a=this.units,
c=this.user,d=c&&c.units;c=c&&(c.region||"").toLowerCase();var f=(this.ipCntryCode||"").toLowerCase(),l=(p.getLocale()||"").toLowerCase();b="us"===c||"us"===b||"us"===f||-1<l.indexOf("us");return d||a||(b?"english":"metric")};e.prototype.getWorldLocator=function(){var b=this.helperServices.geocode,a=/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi,c=b.filter(function(f){return f.url.match(a)}),d=/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi;b=b.filter(function(f){return f.url.match(d)});
return(null===c||void 0===c?0:c.length)?c.shift():(null===b||void 0===b?0:b.length)?b.shift():null};e.prototype.getEnvironment=function(){var b=this.customBaseUrl;b=null===b||void 0===b?void 0:b.split(".")[0].replace("maps","");return-1<(null===b||void 0===b?void 0:b.indexOf("dev"))?"dev":-1<(null===b||void 0===b?void 0:b.indexOf("qa"))?"qa":""};e.prototype.isDeveloperSubscription=function(){var b=this.subscriptionInfo;if(b){var a=b.type;this.isDeveloper="active"===b.state&&("Developer Subscription"===
a||"Trial Developer"===a)}return this.isDeveloper};e.prototype.deleteItems=function(b){var a=this.user.userContentUrl+"/deleteItems";return(b=b&&b.length?b.map(function(c){return c.id}):[])&&b.length?z.default(a,{query:{items:b.join(","),f:"json"},responseType:"json",method:"post"}):Promise.resolve(!0)};e.prototype.addItem=function(b){var a=b&&(b.item.folderId||b.item.ownerFolder),c=b&&b.data;b=b&&b.item;var d=this.user.userContentUrl;a&&(d+="/"+a);return z.default(d+"/addItem",{query:h.__assign(h.__assign({},
b),{text:c,async:!0,overwrite:!1,f:"json"}),responseType:"json",method:"post"})};e.prototype.fetchNotifications=function(){var b=this,a=this.user;if(a)return a=a.get("url")+"/notifications",z.default(a,{query:{f:"json"},responseType:"json",method:"post"}).then(function(c){return(c&&c.data&&c.data.notifications||[]).map(b.formatNotification.bind(b))});Promise.resolve([])};e.prototype.formatNotification=function(b){return b};h.__decorate([r.property()],e.prototype,"credential",void 0);h.__decorate([r.property()],
e.prototype,"subscriptionInfo",void 0);h.__decorate([r.property()],e.prototype,"defaultDevBasemap",void 0);h.__decorate([r.property()],e.prototype,"allowedBetaFeatures",void 0);h.__decorate([r.property()],e.prototype,"devBasemapGalleryGroupQuery",void 0);h.__decorate([r.property()],e.prototype,"settings",void 0);h.__decorate([r.property()],e.prototype,"helpMap",void 0);h.__decorate([r.property()],e.prototype,"isDeveloper",void 0);h.__decorate([r.property()],e.prototype,"blockedApps",void 0);return e=
h.__decorate([r.subclass("esri.portal.Portal")],e)}(v.default);n.default=u})},"app/portal/PortalItem":function(){define("require exports tslib esri/core/accessorSupport/decorators ../utils/messageBundleLoader esri/portal/PortalItem esri/request esri/core/promiseUtils ../utils/appUtils".split(" "),function(u,n,h,r,v,z,p,g,e){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);p=h.__importDefault(p);g=h.__importStar(g);e=h.__importStar(e);u=function(b){function a(d){var f=b.call(this,
d)||this;f.isHostedService=!1;f.isOwnedByMyOrg=!1;f.isAdminView=!1;f.isOwner=!1;f.isAdmin=!1;f.canUpdate=!1;f.canDelete=!1;f.canSaveCopy=!1;f.isTable=!1;f.isDeleted=!1;f.isFeatureCollection=!1;f.when(function(){f.init()});return f}h.__extends(a,b);var c=a;a.prototype.init=function(){this.portalUser=this.portal&&this.portal.user||null;this.title=this.title||"";this.snippet=this.snippet||"";this.type=this.type||"Unknown";this.itemPageUrl=(this.portal&&this.portal.restUrl.replace("sharing/rest","home"))+
"/item.html?id\x3d"+this.id;this.setMessages();this.setAdminFlags();this.setTypekeywordFlags()};a.prototype.getRelatedItems=function(d,f){var l=this,m={WMA2Code:1,MobileApp2Code:1},k=null,q=null;return p.default(this.itemUrl+"/relatedItems",{query:{f:"json",relationshipType:d,direction:f}}).then(function(t){k=t&&t.data&&t.data.relatedItems||[];t=k.map(function(w){return(new c({sourceJSON:w,portal:l.portal})).load()});return g.eachAlways(t).then(function(w){w=w.filter(function(A){return A.value}).map(function(A){return A.value});
return(q=d in m?(w||[]).shift():w||[])&&q.length?q.slice(0):q})})};a.prototype.addRelationship=function(d,f){d=h.__assign({f:"json"},{relationshipType:f,destinationItemId:d.id,originItemId:this.id});f=this.portalUser&&this.portalUser.get("userContentUrl");return p.default(f+"/addRelationship",{callbackParamName:"callback",method:"post",query:d,responseType:"json"}).then(function(l){return l.data})};a.prototype.getSharingInfo=function(){return p.default(this.get("userItemUrl"),{callbackParamName:"callback",
method:"get",query:{f:"json"},responseType:"json"}).then(function(d){return d.data&&d.data.sharing})};a.prototype.share=function(d){d=h.__assign({},d);d={callbackParamName:"callback",method:"post",query:h.__assign({f:"json"},d),responseType:"json"};return p.default(this.get("userItemUrl")+"/share",d).then(function(f){return f.data})};a.prototype.hasCustomThumbnail=function(){var d=this.thumbnailUrl;return!(!d||-1!==d.indexOf("/thumbnail/ago_downloaded."))};a.prototype.getProperties=function(){return(this.get("sourceJSON")||
{}).properties||this.get("properties")||{}};a.prototype.updateProperties=function(d){var f=this;d={callbackParamName:"callback",method:"post",query:{f:"json",properties:JSON.stringify(d)},responseType:"json"};return p.default(this.get("userItemUrl")+"/update",d).then(function(){return f.reload()})};a.prototype.getResource=function(d){d="/resources/"+d;return p.default(this.get("userItemUrl")+d,{callbackParamName:"callback",method:"get",query:{f:"json"},responseType:"json"}).then(function(f){return f.data},
function(f){return null})};a.prototype.addResource=function(d,f,l){d={callbackParamName:"callback",method:"post",query:{f:"json",filename:f,resourcesPrefix:d,text:JSON.stringify(l)},responseType:"json"};return p.default(this.get("userItemUrl")+"/addResources",d).then(function(m){return m.data})};a.prototype.removeResource=function(d){d={callbackParamName:"callback",method:"post",query:{f:"json",resource:d},responseType:"json"};return p.default(this.get("userItemUrl")+"/removeResources",d).then(function(f){return f.data})};
a.prototype.updateResource=function(d,f,l){d={callbackParamName:"callback",method:"post",query:{f:"json",filename:f,resourcesPrefix:d,text:JSON.stringify(l)},responseType:"json"};return p.default(this.get("userItemUrl")+"/updateResources",d).then(function(m){return m.data})};Object.defineProperty(a.prototype,"sourceLabel",{get:function(){var d=this.type,f=this.typeKeywords,l=e.includes(f,"Service")||"Feature Collection"===d?this.messagesCommon.source+" ":"";return"Web Scene"===d?e.includes(f,"ViewingMode-Local")?
this.messagesCommon.localWebScene:this.messagesCommon.globalWebScene:l?l+d:d},enumerable:!1,configurable:!0});a.prototype.setAdminFlags=function(){var d=this.typeKeywords;this.isOwnedByMyOrg=(this.isOwner=this.portalUser&&this.owner===this.portalUser.username)||this.portalUser&&this.portalUser.orgId===this.orgId||!1;var f=this.isAdminView||this.portalUser&&this.portalUser.isOrgAdmin&&this.isOwnedByMyOrg;this.isAdmin=this.portalUser?this.isOwner||this.isItemAdmin()||f:!1;this.canSaveCopy=!e.includes(d,
"useOnly");this.canUpdate=this.isAdmin||this.itemControl&&-1<this.itemControl.indexOf("update");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&this.portalUser&&this.portalUser.userRole.canDeleteOrgItems()||!1};a.prototype.setTypekeywordFlags=function(){var d=this.typeKeywords;this.isHostedService=e.includes(d,"Hosted Service")&&"Insights Workbook"!==this.type;this.isFeatureCollection=e.includes(d,"Feature Collection");this.isTable=e.includes(d,"Table")};a.prototype.setMessages=function(){return h.__awaiter(this,
void 0,void 0,function(){var d;return h.__generator(this,function(f){switch(f.label){case 0:return[4,v.fetchMessageBundles(["mapviewer/common"])];case 1:return this.messagesCommon=d=f.sent()[0],[2]}})})};a.prototype.isItemAdmin=function(){var d=!1;d=this.owner;var f=this.portal,l=this.itemControl;l=l&&-1<l.indexOf("admin");var m=["esri_livingatlas","esri_demographics","esri_boundaries"];return d=f.isPortal&&!this.isOwner&&l&&-1<d.indexOf("esri_")&&!m.indexOf(d)?!1:!!l};h.__decorate([r.property()],
a.prototype,"portalUser",void 0);h.__decorate([r.property()],a.prototype,"relatedItems",void 0);h.__decorate([r.property()],a.prototype,"isHostedService",void 0);h.__decorate([r.property()],a.prototype,"isOwnedByMyOrg",void 0);h.__decorate([r.property()],a.prototype,"isAdminView",void 0);h.__decorate([r.property()],a.prototype,"isOwner",void 0);h.__decorate([r.property()],a.prototype,"isAdmin",void 0);h.__decorate([r.property()],a.prototype,"canUpdate",void 0);h.__decorate([r.property()],a.prototype,
"canDelete",void 0);h.__decorate([r.property()],a.prototype,"canSaveCopy",void 0);h.__decorate([r.property()],a.prototype,"portal",void 0);h.__decorate([r.property()],a.prototype,"serverToken",void 0);h.__decorate([r.property()],a.prototype,"ownerFolder",void 0);h.__decorate([r.property()],a.prototype,"status",void 0);h.__decorate([r.property()],a.prototype,"orgId",void 0);h.__decorate([r.property()],a.prototype,"advancedSettings",void 0);h.__decorate([r.property()],a.prototype,"itemPageUrl",void 0);
h.__decorate([r.property()],a.prototype,"isTable",void 0);h.__decorate([r.property()],a.prototype,"isDeleted",void 0);h.__decorate([r.property()],a.prototype,"isFeatureCollection",void 0);h.__decorate([r.property()],a.prototype,"messagesCommon",void 0);h.__decorate([r.property()],a.prototype,"sourceLabel",null);return a=c=h.__decorate([r.subclass("esri.Portal.PortalItem")],a)}(z.default);n.default=u})},"app/utils/messageBundleLoader":function(){define(["require","exports","tslib","esri/intl","esri/request"],
function(u,n,h,r,v){function z(g,e){return h.__awaiter(this,void 0,void 0,function(){var b,a;return h.__generator(this,function(c){switch(c.label){case 0:b=r.normalizeMessageBundleLocale(e),c.label=1;case 1:return c.trys.push([1,3,,5]),[4,p("./js/app/"+g+"_"+b.toLowerCase()+".json")];case 2:return a=c.sent(),[2,a];case 3:return c.sent(),[4,p("./js/app/"+g+"_en.json")];case 4:return a=c.sent(),[2,a];case 5:return[2]}})})}function p(g){return h.__awaiter(this,void 0,void 0,function(){var e,b;return h.__generator(this,
function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,v.default(""+g,{responseType:"json"})];case 1:return e=a.sent(),[2,(null===e||void 0===e?void 0:e.data)||{}];case 2:throw b=a.sent(),console.error("Error loading locale: "+g,b),Error(b);case 3:return[2]}})})}Object.defineProperty(n,"__esModule",{value:!0});n.fetchMessageBundles=n.createMessageBundleLoader=n.isLoadingLocale=void 0;r=h.__importStar(r);v=h.__importDefault(v);n.isLoadingLocale=!1;n.createMessageBundleLoader=function(g){return h.__awaiter(this,
void 0,void 0,function(){var e,b,a;return h.__generator(this,function(c){a=/^mapviewer\/(.+)/;r.registerMessageBundleLoader({pattern:a,fetchMessageBundle:function(d,f){return h.__awaiter(this,void 0,void 0,function(){var l,m;return h.__generator(this,function(k){switch(k.label){case 0:n.isLoadingLocale&&setTimeout(function(){return n.isLoadingLocale=!1},250);if(f===e)return[3,2];n.isLoadingLocale=!0;return[4,z("t9n/app",f)];case 1:b=k.sent(),e=f,k.label=2;case 2:return l=a.exec(d)[1],"all"!==l?[3,
3]:[2,b];case 3:return b[l]?[2,b[l]]:[3,4];case 4:return[4,z(l,f)];case 5:return m=k.sent(),[2,m]}})})}});return[2]})})};n.fetchMessageBundles=function(g,e){return h.__awaiter(this,void 0,void 0,function(){var b;return h.__generator(this,function(a){b=g.map(function(c){return r.fetchMessageBundle(c)});return[2,Promise.all(b)]})})}})},"app/utils/appUtils":function(){define(["require","exports"],function(u,n){Object.defineProperty(n,"__esModule",{value:!0});n.clamp=n.isRTL=n.find=n.isNodeVisible=n.toggleNode=
n.hideNode=n.showNode=n.parseUrl=n.concatUnique=n.filterOut=n.includes=n.objectToArray=n.stripStringTags=n.urlToObject=void 0;n.urlToObject=function(){var h=this,r={};(window.location.search||"?").substr(1).replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(v,z,p){r[z]=h.stripStringTags(decodeURIComponent(p));return""});return r};n.stripStringTags=function(h){return h.replace(/<\/?[^>]+>/g,"")};n.objectToArray=function(h){return Object.keys(h).map(function(r){return h[r]})};n.includes=function(h,r){return-1<
h.indexOf(r)};n.filterOut=function(h,r){return h.filter(function(v){return-1===r.indexOf(v)})};n.concatUnique=function(h,r){var v=[].concat(h||[]);r.forEach(function(z){z&&-1===v.indexOf(z)&&v.push(z)});return v};n.parseUrl=function(h){var r=document.createElement("a");r.href=h;for(var v=r.protocol.replace(":",""),z=r.hostname||window.location.host,p=r.port,g=r.search,e={},b=r.search.replace(/^\?/,"").split("\x26"),a=b.length,c=0,d;c<a;c++)b[c]&&(d=b[c].split("\x3d"),e[d[0]]=d[1]);return{source:h,
protocol:v,host:z,port:p,query:g,params:e,file:(r.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:r.hash.replace("#",""),path:r.pathname.replace(/^([^\/])/,"/$1"),relative:(r.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:r.pathname.replace(/^\//,"").split("/")}};n.showNode=function(h){(h="string"===typeof h?document.querySelector(h):h)&&h.classList.remove("hide")};n.hideNode=function(h){(h="string"===typeof h?document.querySelector(h):h)&&h.classList.add("hide")};n.toggleNode=function(h){this[h&&
h.classList.contains("hide")?"showNode":"hideNode"](h)};n.isNodeVisible=function(h){return h&&h.classList.contains("hide")?!1:!0};n.find=function(h,r){for(var v,z=0;z<h.length;z++)if(v=h[z],r(v))return v;return null};n.isRTL=function(){return"rtl"===document.getElementsByTagName("html")[0].getAttribute("dir")};n.clamp=function(h,r,v){return Math.min(Math.max(h,r),v)}})},"app/portal/PortalUser":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/request esri/portal/PortalUser ./Role".split(" "),
function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});v=h.__importDefault(v);z=h.__importDefault(z);p=h.__importDefault(p);u=function(g){function e(b){b=g.call(this,b)||this;b.isOrgUser=!1;b.isOrgAdmin=!1;b.isViewOnly=!1;b.canCreateItems=!1;b.canShare=!1;b.canShareOthers=!1;b.hasSubscriberContent=null;return b}h.__extends(e,g);e.prototype.init=function(){var b=this.userRole=this.setRole(),a=this.portal;this.isOrgUser=a.urlKey&&a.customBaseUrl||a.isPortal?!0:!1;this.isOrgAdmin=b.isAdmin();
this.userSettingsUrl=(this.portal&&this.portal.restUrl.replace("sharing/rest","home"))+"/user.html#settings";this.canCreateItems=!this.isOrgUser||b.canCreateItem();this.canShare=!this.isOrgUser||b.canShareItemToGroup()||b.canShareItemToOrg()||a.canSharePublic&&b.canShareItemToPublic();this.canShareOthers=b.canShareOthersItemsToGroup()||b.canShareOthersItemsToOrg()||a.canSharePublic&&b.canShareOthersItemsToPublic();Promise.all([this.cacheFolders(),this.cacheTags()])};e.prototype.setRole=function(){return this.userRole=
new p.default({portalUser:this})};e.prototype.cacheFolders=function(){var b=this,a=this.folders;return a?Promise.resolve(a):this.fetchFolders().then(this.toFolders.bind(this)).then(function(c){return b.folders=c})};e.prototype.toFolders=function(b){var a=this.username;b=b.sort(function(c,d){return c.title.localeCompare(d.title)});b.some(function(c){return c.id===a})||b.unshift({id:"",title:a});return b};e.prototype.cacheTags=function(){var b=this,a=this.tags||[],c=this.url+"/tags";return a&&a.length?
Promise.resolve(a):v.default(c,{query:{f:"json"},responseType:"json"}).then(function(d){d=d&&d.data&&d.data.tags;return b.userTags=d})};e.prototype.hasSubscriptionContent=function(){var b=this,a=this.hasSubscriberContent;return new Promise(function(c,d){return h.__awaiter(b,void 0,void 0,function(){var f,l;return h.__generator(this,function(m){switch(m.label){case 0:if(null===a)return[3,1];c(a);return[3,3];case 1:return[4,this.fetchProvisionedListings()];case 2:f=m.sent(),l=this.hasSubscriberContent=
0<f.total,c(l),m.label=3;case 3:return[2]}})})})};e.prototype.fetchProvisionedListings=function(){var b=this,a=this.provisionedListings,c=this.portal.restUrl+"/community/users/"+this.username+"/provisionedListings";return new Promise(function(d,f){return h.__awaiter(b,void 0,void 0,function(){var l;return h.__generator(this,function(m){switch(m.label){case 0:return a?[3,2]:[4,v.default(c,{query:{f:"json"},responseType:"json",method:"auto"})];case 1:l=m.sent(),this.provisionedListings=null===l||void 0===
l?void 0:l.data,m.label=2;case 2:return d(this.provisionedListings),[2]}})})})};return e=h.__decorate([r.subclass("esri.portal.PortalUser")],e)}(z.default);n.default=u})},"app/portal/Role":function(){define(["require","exports","tslib","esri/core/accessorSupport/decorators","./LevelAware"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});v=h.__importDefault(v);u=function(z){function p(g){var e=z.call(this)||this;e.id=null;e.baseRole=null;e.name=null;e.description=null;e.privileges=
[];e.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,manageLicenses:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,manageCollaborations:!1,manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,
manageUtilityServices:!1,manageCredits:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishServerServices:!1,publishServerGPServices:!1,registerDataStores:!1,bulkPublishFromDataStores:!1,enumerateDataStores:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,createItem:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1,viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1}},opendata:{user:{openDataAdmin:!1,
designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},publisher:{geoanalytics:!1,rasteranalysis:!1,createNotebooks:!1,scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}};g=g||{};var b=g.portalUser;b?(e.id=b.roleId?b.roleId:b.role,e.baseRole=b.role,e.setPrivileges(b.privileges)):(e.id=g.id,e.baseRole=g.role,e.name=g.name,e.description=g.description,
g.privileges&&e.setPrivileges(g.privileges));return e}h.__extends(p,z);p.prototype.isViewer=function(){return this.id&&this.id===this.SYSTEM_ROLES.VIEWER};p.prototype.isUser=function(){return this.id&&("org_user"===this.id||"account_user"===this.id)};p.prototype.isPublisher=function(){return this.id&&("org_publisher"===this.id||"account_publisher"===this.id)};p.prototype.isAdmin=function(){return this.id&&("org_admin"===this.id||"account_admin"===this.id)};p.prototype.isBasedOnUser=function(){return this.isUser()||
this.baseRole&&("org_user"===this.baseRole||"account_user"===this.baseRole)};p.prototype.isBasedOnPublisher=function(){return this.isPublisher()||this.baseRole&&("org_publisher"===this.baseRole||"account_publisher"===this.baseRole)};p.prototype.isBasedOnAdmin=function(){return this.isAdmin()||this.baseRole&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)};p.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&this.id&&0<this.id.length};p.prototype.canInviteUsers=
function(){return this.privilegeObj&&this.privilegeObj.portal.admin.inviteUsers};p.prototype.canDisableUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.disableUsers};p.prototype.canViewUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewUsers};p.prototype.canUpdateUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateUsers};p.prototype.canDeleteUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteUsers};
p.prototype.canChangeUserRoles=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.changeUserRoles};p.prototype.canViewOrgGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewGroups};p.prototype.canUpdateOrgGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateGroups};p.prototype.canDeleteOrgGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteGroups};p.prototype.canReassignOrgGroups=function(){return this.privilegeObj&&
this.privilegeObj.portal.admin.reassignGroups};p.prototype.canAssignUsersToOrgGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.assignToGroups};p.prototype.canManageEnterpriseGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageEnterpriseGroups};p.prototype.canViewOrgItems=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewItems};p.prototype.canUpdateOrgItems=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateItems};
p.prototype.canDeleteOrgItems=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteItems};p.prototype.canReassignOrgItems=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.reassignItems};p.prototype.canManageItems=function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||this.canDeleteOrgItems()||this.canReassignOrgItems())};p.prototype.canManageLicenses=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageLicenses};
p.prototype.canShareOthersItemsToGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.shareToGroup};p.prototype.canShareOthersItemsToOrg=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.shareToOrg};p.prototype.canShareOthersItemsToPublic=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.shareToPublic};p.prototype.canCreateUpdateCapableGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.createUpdateCapableGroup};p.prototype.canUpdateItemCategories=
function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateItemCategorySchema};p.prototype.canManageCollaborations=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageCollaborations};p.prototype.canManageSecurity=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageSecurity};p.prototype.canManageWebsite=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageWebsite};p.prototype.canManageRoles=function(){return this.privilegeObj&&
this.privilegeObj.portal.admin.manageRoles};p.prototype.canManageServers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageServers};p.prototype.canManageUtilityServices=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageUtilityServices};p.prototype.canManageCredits=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageCredits};p.prototype.canCreateGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.user.createGroup};
p.prototype.canJoinOrgGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.user.joinGroup};p.prototype.canJoinNonOrgGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.user.joinNonOrgGroup};p.prototype.canPublishFeatures=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishFeatures};p.prototype.canPublishTiles=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishTiles};p.prototype.canPublishScenes=function(){return this.privilegeObj&&
this.privilegeObj.portal.publisher.publishScenes};p.prototype.canPublishServerServices=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishServerServices};p.prototype.canPublishServerGPServices=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishServerGPServices};p.prototype.canPublishVectorTiles=function(){return!0};p.prototype.canPublishImageCollection=function(){return this.canPublishServerServices()};p.prototype.canCreateItem=function(){return this.privilegeObj&&
this.privilegeObj.portal.user.createItem};p.prototype.canShareItemToGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareToGroup};p.prototype.canShareItemToOrg=function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareToOrg};p.prototype.canShareItemToPublic=function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareToPublic};p.prototype.canShareGroupToOrg=function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareGroupToOrg};p.prototype.canShareGroupToPublic=
function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareGroupToPublic};p.prototype.canViewOrgUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.user.viewOrgUsers};p.prototype.canViewOrgUserContent=function(){return this.privilegeObj&&this.privilegeObj.portal.user.viewOrgItems};p.prototype.canViewOrgUserGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.user.viewOrgGroups};p.prototype.canViewTracks=function(){return this.privilegeObj&&this.privilegeObj.portal.user.viewTracks};
p.prototype.canEditFeatures=function(){return this.privilegeObj&&this.privilegeObj.features.user.edit};p.prototype.canEditFeaturesFullControl=function(){return this.privilegeObj&&this.privilegeObj.features.user.fullEdit};p.prototype.canManageOpenData=function(){return this.privilegeObj&&this.privilegeObj.opendata.user.openDataAdmin};p.prototype.canDesignateOpenDataGroups=function(){return this.privilegeObj&&this.privilegeObj.opendata.user.designateGroup};p.prototype.canUseGeocode=function(){return this.privilegeObj&&
this.privilegeObj.premium.user.geocode};p.prototype.canUseNetworkAnalysis=function(){return this.privilegeObj&&this.privilegeObj.premium.user.networkanalysis};p.prototype.canUseSpatialAnalysis=function(){return this.privilegeObj&&this.privilegeObj.premium.user.spatialanalysis};p.prototype.canUseGeoenrichment=function(){return this.privilegeObj&&this.privilegeObj.premium.user.geoenrichment};p.prototype.canUseDemographics=function(){return this.privilegeObj&&this.privilegeObj.premium.user.demographics};
p.prototype.canUseFeatureReport=function(){return this.privilegeObj&&this.privilegeObj.premium.user.featurereport};p.prototype.canUseGeoanalytics=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.geoanalytics};p.prototype.canUseRasterAnalysis=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.rasteranalysis};p.prototype.canPurchaseMarketplace=function(){return this.privilegeObj&&this.privilegeObj.marketplace.admin.purchase};p.prototype.canManageMarketplace=
function(){return this.privilegeObj&&this.privilegeObj.marketplace.admin.manage};p.prototype.canTrialMarketplace=function(){return this.privilegeObj&&this.privilegeObj.marketplace.admin.startTrial};p.prototype.canCreateNotebooks=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.createNotebooks};p.prototype.canScheduleNotebooks=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.scheduleNotebooks};p.prototype.canPublishNotebooks=function(){return this.privilegeObj&&
this.privilegeObj.premium.publisher.publishNotebooks};p.prototype.canCreateAdvancedNotebooks=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.createAdvancedNotebooks};p.prototype.canBulkPublishFromDataStores=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.bulkPublishFromDataStores};p.prototype.canEnumerateDataStores=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.enumerateDataStores};p.prototype.canRegisterDataStores=function(){return this.privilegeObj&&
this.privilegeObj.portal.publisher.registerDataStores};p.prototype.setPrivileges=function(g){this.privileges=g;this._initPrivilegesObject();g&&this._readPrivileges(g)};p.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};p.prototype._readPrivileges=function(g){var e=this;g&&g instanceof Array&&g.forEach(function(b){e._readPrivilege(b)})};p.prototype._readPrivilege=function(g){this._applyEffectToAction(!0,g)};p.prototype._applyEffectToAction=function(g,e){switch(e){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=
g;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=g;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=g;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=g;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=g;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=g;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=
g;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=g;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=g;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=g;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=g;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=g;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=
g;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=g;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=g;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=g;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=g;break;case "portal:admin:shareToGroup":this.privilegeObj.portal.admin.shareToGroup=g;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=
g;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=g;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=g;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=g;break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=g;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=g;break;
case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=g;break;case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=g;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=g;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=g;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=g;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=
g;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=g;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=g;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=g;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=g;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=
g;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=g;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=g;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=g;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=g;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=g;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=
g;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=g;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=g;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=g;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=g;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=g;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=
g;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=g;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=g;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=g;break;case "features:user:edit":this.privilegeObj.features.user.edit=g;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=g;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=g;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=
g;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=g;break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=g;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=g;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=g;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=g;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=
g;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=g;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=g;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=g;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=g;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=g;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=
g;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=g;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=g;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=g}};p.prototype._applyToAll=function(g){this.privilegeObj.portal.admin.inviteUsers=g;this.privilegeObj.portal.admin.disableUsers=g;this.privilegeObj.portal.admin.viewUsers=g;this.privilegeObj.portal.admin.updateUsers=
g;this.privilegeObj.portal.admin.deleteUsers=g;this.privilegeObj.portal.admin.changeUserRoles=g;this.privilegeObj.portal.admin.viewGroups=g;this.privilegeObj.portal.admin.updateGroups=g;this.privilegeObj.portal.admin.deleteGroups=g;this.privilegeObj.portal.admin.reassignGroups=g;this.privilegeObj.portal.admin.assignToGroups=g;this.privilegeObj.portal.admin.manageEnterpriseGroups=g;this.privilegeObj.portal.admin.viewItems=g;this.privilegeObj.portal.admin.updateItems=g;this.privilegeObj.portal.admin.deleteItems=
g;this.privilegeObj.portal.admin.reassignItems=g;this.privilegeObj.portal.admin.manageLicenses=g;this.privilegeObj.portal.admin.shareToGroup=g;this.privilegeObj.portal.admin.shareToOrg=g;this.privilegeObj.portal.admin.shareToPublic=g;this.privilegeObj.portal.admin.createUpdateCapableGroup=g;this.privilegeObj.portal.admin.updateItemCategorySchema=g;this.privilegeObj.portal.admin.manageCollaborations=g;this.privilegeObj.portal.admin.manageSecurity=g;this.privilegeObj.portal.admin.manageWebsite=g;this.privilegeObj.portal.admin.manageRoles=
g;this.privilegeObj.portal.admin.manageServers=g;this.privilegeObj.portal.admin.manageUtilityServices=g;this.privilegeObj.portal.admin.manageCredits=g;this.privilegeObj.portal.publisher.publishFeatures=g;this.privilegeObj.portal.publisher.publishTiles=g;this.privilegeObj.portal.publisher.publishScenes=g;this.privilegeObj.portal.publisher.publishServerServices=g;this.privilegeObj.portal.publisher.publishServerGPServices=g;this.privilegeObj.portal.user.createGroup=g;this.privilegeObj.portal.user.joinGroup=
g;this.privilegeObj.portal.user.joinNonOrgGroup=g;this.privilegeObj.portal.user.createItem=g;this.privilegeObj.portal.user.shareToGroup=g;this.privilegeObj.portal.user.shareToOrg=g;this.privilegeObj.portal.user.shareToPublic=g;this.privilegeObj.portal.user.shareGroupToOrg=g;this.privilegeObj.portal.user.shareGroupToPublic=g;this.privilegeObj.portal.user.viewOrgUsers=g;this.privilegeObj.portal.user.viewOrgItems=g;this.privilegeObj.portal.user.viewOrgGroups=g;this.privilegeObj.portal.user.viewTracks=
g;this.privilegeObj.features.user.edit=g;this.privilegeObj.opendata.user.openDataAdmin=g;this.privilegeObj.opendata.user.designateGroup=g;this.privilegeObj.premium.user.geocode=g;this.privilegeObj.premium.user.networkanalysis=g;this.privilegeObj.premium.user.spatialanalysis=g;this.privilegeObj.premium.user.geoenrichment=g;this.privilegeObj.premium.user.demographics=g;this.privilegeObj.premium.user.featurereport=g;this.privilegeObj.premium.publisher.geoanalytics=g;this.privilegeObj.premium.publisher.rasteranalysis=
g;this.privilegeObj.marketplace.admin.purchase=g;this.privilegeObj.marketplace.admin.manage=g;this.privilegeObj.marketplace.admin.startTrial=g;this.privilegeObj.premium.publisher.createNotebooks=g;this.privilegeObj.premium.publisher.scheduleNotebooks=g;this.privilegeObj.premium.publisher.publishNotebooks=g;this.privilegeObj.premium.publisher.createAdvancedNotebooks=g};return p=h.__decorate([r.subclass("")],p)}(v.default);n.default=u})},"app/portal/LevelAware":function(){define(["require","exports"],
function(u,n){Object.defineProperty(n,"__esModule",{value:!0});u=function(){return function(){this.SYSTEM_ROLES={VIEWER:"iAAAAAAAAAAAAAAA",DATA_EDITOR:"iBBBBBBBBBBBBBBB"};this.LICENSE_LEVELS={ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}}}();n.default=u})},"app/widgets/Alert":function(){define("require exports tslib esri/widgets/Widget esri/core/accessorSupport/decorators esri/widgets/support/widget ../utils/topic".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);
p=h.__importDefault(p);u=function(g){function e(b){b=g.call(this,b)||this;b.type="success";b.modifier="green";b.icon="Success";b.autoDismiss=!1;b.iconAltText="";b.message="";b.title="";b.hide=!1;b.dismiss=b.dismiss.bind(b);return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.setModifier()};e.prototype.setModifier=function(){"success"===this.type?(this.modifier="green",this.icon="Success",this.autoDismiss=!0):"error"===this.type?(this.modifier="red",this.icon="Error",this.autoDismiss=
!1):"warning"===this.type&&(this.modifier="red",this.icon="Error",this.autoDismiss=!1)};e.prototype.render=function(){var b;this.setModifier();var a="img/toast-icons/"+this.icon+"32.svg",c=(b={},b["alert-green"]="green"===this.modifier,b["alert-red"]="red"===this.modifier,b["is-active"]=!0,b);return z.tsx("div",{key:"app-alert",class:this.classes("alert alert-fixed alert-fade-in-down leader-1 trailer-1 js-alert",c)},z.tsx("img",{src:a,alt:this.iconAltText,class:"padding-right-half alert-icon",width:"32",
height:"32"}),this.message,z.tsx("a",{href:"#",class:"alert-close icon-ui-close icon-ui-flush js-alert-close","aria-label":"Close",onclick:this.dismiss}))};e.prototype.dismiss=function(b){b&&b.preventDefault();p.default.publish("alert/hide");this.destroy()};h.__decorate([v.property()],e.prototype,"type",void 0);h.__decorate([v.property()],e.prototype,"modifier",void 0);h.__decorate([v.property()],e.prototype,"icon",void 0);h.__decorate([v.property()],e.prototype,"autoDismiss",void 0);h.__decorate([v.property()],
e.prototype,"iconAltText",void 0);h.__decorate([v.property()],e.prototype,"message",void 0);h.__decorate([v.property()],e.prototype,"title",void 0);h.__decorate([v.property()],e.prototype,"hide",void 0);return e=h.__decorate([v.subclass("")],e)}(r.default);n.default=u})},"app/widgets/InfoBox":function(){define("require exports tslib esri/widgets/Widget esri/core/accessorSupport/decorators esri/widgets/support/widget".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});
r=h.__importDefault(r);u=function(p){function g(e){e=p.call(this,e)||this;e.message="";return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.style="top:0px; left:"+(document.querySelector("."+this.buddyNode).offsetLeft-20)+"px;"};g.prototype.render=function(){return z.tsx("div",{afterCreate:this.setPosition.bind(this),class:this.classes("info-box alert alert-fade-in-down js-info-box",{"is-active":!0})},this.message,z.tsx("a",{href:"#",class:"icon-ui-close icon-ui-flush info-box-close alert-close",
"aria-label":"Close",onclick:this.dismiss.bind(this)}))};g.prototype.setPosition=function(){document.querySelector(".js-info-box").setAttribute("style",this.style)};g.prototype.dismiss=function(e){e.preventDefault();this.destroy()};h.__decorate([v.property()],g.prototype,"buddyNode",void 0);h.__decorate([v.property()],g.prototype,"message",void 0);return g=h.__decorate([v.subclass("esri.widgets.InfoBox")],g)}(r.default);n.default=u})},"app/utils/panelFactory":function(){define(["require","exports"],
function(u,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){return{getPanel:function(h,r,v){return h?Promise.all([(new Promise(function(z,p){u(["../widgets/panels/"+h],z,p)})).then(__importStar)]).then(function(z){z=new z[0].default(r);z.container=v||"panel-container";return z}).catch(function(z){console.log(z);Promise.reject(z)}):Promise.resolve(null)}}}})},"app/utils/viewFactory":function(){define(["require","exports"],function(u,n){Object.defineProperty(n,"__esModule",{value:!0});
n.default=function(){return{getView:function(h,r){return h?Promise.all([(new Promise(function(v,z){u(["../widgets/views/"+h],v,z)})).then(__importStar)]).then(function(v){v=new v[0].default(r);v.container="view-container";return v}).catch(function(v){return null}):Promise.resolve(null)}}}})},"app/utils/mapUtils/errorUtils":function(){define("require exports tslib ../topic esri/intl/substitute esri/layers/support/arcgisLayerUrl ../messageBundleLoader".split(" "),function(u,n,h,r,v,z,p){function g(a){var c=
a&&a.type||"error";var d=a.name;d=void 0===d?"":d;var f=a.details,l=a.type;f=a.item||f&&f.layer||f&&f.item||{title:""};l="warning"===(void 0===l?"error":l)?n.messagesErrors.genericWarningTitle:n.messagesErrors.genericErrorTitle;-1<d.indexOf("layerview:create-error")?l=v.substitute(n.messagesErrors.failedToAddLayer,f):"request:server"===d||"identity-manager:not-authorized"===d?(d=f&&f.title||e(a)||"",l=v.substitute(n.messagesErrors.failedToAddLayer,{title:d})):"webmap:save"===d?l=n.messagesErrors.failedToSaveMap:
"csv"===d&&(l=v.substitute(n.messagesErrors.unableToAdd,{type:"CSV"}));d=l;l=a&&a.message||n.messagesErrors.genericError;f=a&&a.name;a&&a.details?(l=(l=a.details)&&l.errors||l&&l.error||[],f=a.item||a.details.layer||a.details.item||{title:""},l=l&&l.name?b(h.__assign(h.__assign({},l),{item:f})):l.length?b(h.__assign(h.__assign({},l.shift()),{item:f})):b(a)):f?l=b(a):l&&-1<l.toLowerCase().indexOf("you do not have access to this resource")&&(l=b({name:"webmap:no-permission",message:l}));return{type:c,
title:d,message:l}}function e(a){return(a=(a=(a=(null===a||void 0===a?void 0:a.details)||"")&&a.url)&&z.parse(a))&&a.title||""}function b(a){var c=a.name,d=a.details,f=a.item||d&&(d.layer||d.item)||{},l=null===d||void 0===d?void 0:d.messageCode;if(f){var m=f.portal;m=null===m||void 0===m?void 0:m.user}else m=null;f.title=f.title||e(a)||"";var k=a&&a.message||n.messagesErrors.genericError;if(f&&"layerview:spatial-reference-incompatible"===c)k=v.substitute(n.messagesErrors.spatialReference,f);else if(f&&
"featurelayerview:table-not-supported"===c)k=v.substitute(n.messagesErrors.tableNotSupported,f);else if(f&&"layer:unsupported-layer-type"===c)a=f&&f.resourceInfo||{type:""},k=v.substitute(n.messagesErrors.unsupportedLayerType,h.__assign(h.__assign({},f),a));else if(f&&"url:unknown-item-type"===c)k=v.substitute(n.messagesErrors.unsupportedUrlType,{});else if(f&&"imageserverraster:open"===c||"imagery-layer:fetch-service-info"===c)k=n.messagesErrors.unsupportedLayer;else if("request:server"===c&&(-1<
(null===k||void 0===k?void 0:k.indexOf("Unexpected token \x3c in JSON at position 0"))||-1<(null===k||void 0===k?void 0:k.indexOf("JSON.parse: unexpected character"))))k=0===d.httpStatus?n.messagesErrors.layerNotOGCFeatures:n.messagesErrors.layerNotAdded;else if("request:server"!==c||"CONT_0155"!==l)"request:server"===c&&400===d.httpStatus||"wmtslayer:unsupported-service-data"===c?k=(null===f||void 0===f?0:f.title)?v.substitute(n.messagesErrors.layerNotAddedSecure,f):n.messagesErrors.layerNotAdded:
"request:server"===c&&0===d.httpStatus&&"GeoJSON"===(null===d||void 0===d?void 0:d.type)?k=n.messagesErrors.layerNotGeoJSON:"request:server"===c&&(503===d.httpStatus||500===d.httpStatus||400===d.httpStatus||404===d.httpStatus||301===d.httpStatus&&"GeoJSON"===(null===d||void 0===d?void 0:d.type))?k=(null===f||void 0===f?0:f.title)?v.substitute(n.messagesErrors.layerNotAddedItem,f):n.messagesErrors.layerNotAdded:"TypeError"===c?k=n.messagesErrors.layerNotAdded:"request:not-secure"===c?k=n.messagesErrors.httpNotAllowed:
"webmap:save"===c?k=v.substitute(n.messagesErrors.layerNotSaved,f):"web-document-write:property-required"===c?k=v.substitute(n.messagesErrors.webMapPropRequired,d):"webmap:unsupported-version"===c?k=v.substitute(n.messagesErrors.webMapUnsupportedVersion,f):"webmap:no-permission"===c?k=v.substitute(n.messagesErrors.webMapNoPermission,f):"basemap:spatial-reference-incompatible"===c?k=v.substitute(n.messagesErrors.basemapIncompatibleSR,f):"basemap:spatial-reference-incompatible-layers"===c?k=v.substitute(n.messagesErrors.basemapLayersIncompatibleSR,
f):"basemap:spatial-reference-incompatible-basemap"===c?k=v.substitute(n.messagesErrors.basemapIncompatible,f):"basemap:arcgis-layers:url-mismatch"===c?k=n.messagesErrors.basemapNotAvailable:"feature-layer-source:unsupported-type"===c||"ogc-feature-layer:missing-property"===c?(a=f&&f.title||e(a),k=v.substitute(n.messagesErrors.unsupportedLayerType,{type:a||"Layer"})):"identity-manager:not-authorized"===c||"request:server"===c&&403===d.httpStatus?(f=(null===f||void 0===f?void 0:f.portalItem)||f,f=
null===f||void 0===f?void 0:f.typeKeywords,f=-1<(null===f||void 0===f?void 0:f.indexOf("Requires Subscription"))||-1<(null===f||void 0===f?void 0:f.indexOf("Requires Credits"))||!1,a=e(a),k=f?v.substitute((null===m||void 0===m?0:m.isOrgUser)?n.messagesErrors.subscriptionContentOrg:n.messagesErrors.subscriptionContentPublic,{title:a||""}):v.substitute(n.messagesErrors.failedToAddLayer,{title:a||""})):-1<(null===k||void 0===k?void 0:k.indexOf("Unable to identify latitudeField and/or longitudeField from"))?
k=n.messagesErrors.unableToAddCSV:"shortcut:invalid"===c?k=v.substitute(n.messagesErrors.shortcutInvalid,{name:a.currentCommand.alias}):"forms:missingRequiredField"===c?k=n.messagesErrors.missingRequiredField:"csv-layer:location-fields-not-found"===c?k=n.messagesErrors.csvLayerLocationFieldsNotFound:"wfs-layer:kvp-encoding-not-supported"===c?k=n.messagesErrors.wfsEncodingNotSupported:"web-document-write:unsupported-feature-effect"===c&&(k=n.tempErrorMessage);return k}Object.defineProperty(n,"__esModule",
{value:!0});n.getErrorInfo=n.showError=n.fetchErrorMessages=n.messagesErrors=n.tempErrorMessage=void 0;r=h.__importDefault(r);v=h.__importStar(v);z=h.__importStar(z);n.tempErrorMessage="Close the Filter pane before saving.";n.fetchErrorMessages=function(){return h.__awaiter(this,void 0,void 0,function(){var a;return h.__generator(this,function(c){switch(c.label){case 0:return[4,p.fetchMessageBundles(["mapviewer/errors"])];case 1:return a=c.sent()[0],n.messagesErrors=a,[2]}})})};n.showError=function(a,
c){a=g(h.__assign(h.__assign({},a&&a.error||a),{item:c}));r.default.publish("alert/show",a)};n.getErrorInfo=g})},"app/widgets/CalciteAlert":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget ./Alert".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);u=function(p){function g(e){e=p.call(this,e)||this;e.createContainer();return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.setModifier()};
g.prototype.onAfterCreate=function(e){e.active=!0;this.setFocus()};g.prototype.createContainer=function(){var e=this.container=document.createElement("calcite-alerts");document.body.appendChild(e)};g.prototype.setFocus=function(){if("error"===this.type||"warning"===this.type){var e=this.container,b=new MutationObserver(function(a){a=null===a||void 0===a?void 0:a[0];var c=a.target;"calcite-hydrated"===a.attributeName&&(b.disconnect(),c.setFocus())});b.observe(e,{attributes:!0,childList:!0,subtree:!0})}};
g.prototype.render=function(){var e=this.message;return v.tsx("div",null,v.tsx("calcite-alert",{bind:this,afterCreate:this.onAfterCreate,"intl-close":this.messages.close,label:"",color:this.modifier,id:"one","auto-dismiss":this.autoDismiss?"true":"false","auto-dismiss-duration":"fast",scale:"l"},v.tsx("div",{slot:"title"},this.title),v.tsx("div",{slot:"message"},e)))};h.__decorate([r.property(),v.messageBundle("mapviewer/common")],g.prototype,"messages",void 0);return g=h.__decorate([r.subclass("")],
g)}(z.default);n.default=u})},"app/widgets/globalNav/GlobalNav":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/Widget esri-global-nav/esri-global-nav ../../utils/appUtils esri/identity/IdentityManager ../../utils/topic ../../utils/notification ../../utils/urlUtils ../../utils/signin esri/core/domUtils esri/intl/locale ../../utils/messageBundleLoader".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){Object.defineProperty(n,"__esModule",{value:!0});v=h.__importDefault(v);
z=h.__importDefault(z);p=h.__importStar(p);g=h.__importDefault(g);e=h.__importDefault(e);a=h.__importStar(a);c=h.__importDefault(c);d=h.__importStar(d);f=h.__importStar(f);v=function(m){function k(q){var t=m.call(this,q)||this;t.hideClassicLink=!1;t.item=q.item;t.state=q.state;t.hideClassicLink=q.hideClassicLink;t.baseUrl=a.getBaseUrl(t.state.config,t.state.portal);t.addEventListeners();f.onLocaleChange(function(w){return h.__awaiter(t,void 0,void 0,function(){var A;return h.__generator(this,function(x){switch(x.label){case 0:return A=
this,[4,this.getMessages()];case 1:return A.messages=x.sent(),this.createGlobalNav(),[2]}})})});return t}h.__extends(k,m);k.prototype.createGlobalNav=function(q){return h.__awaiter(this,void 0,void 0,function(){var t,w,A;return h.__generator(this,function(x){switch(x.label){case 0:return t=document.getElementById("global-nav"),(null===t||void 0===t?0:t.firstChild)&&d.remove(t.firstChild),w=this,[4,this.getMessages()];case 1:return w.messages=x.sent(),A=this,[4,this.getNavStructure()];case 2:return A.menuData=
x.sent(),this.hideClassicLink||this.menuData.header.menus.push([this.getMapViewerClassicLink()]),z.default.createHeader({targetElm:".global-nav",menuData:this.menuData}),this.addGlobalNavEventListeners(),this.adjustForPortal(),[2]}})})};k.prototype.getMapViewerClassicLink=function(){var q=window.location.href.replace("apps/mapviewer/index.html","home/webmap/viewer.html");return{label:this.messages.globalNav.openClassic,href:q}};k.prototype.getMessages=function(){return h.__awaiter(this,void 0,void 0,
function(){var q;return h.__generator(this,function(t){switch(t.label){case 0:return[4,l.fetchMessageBundles(["mapviewer/all"])];case 1:return q=t.sent()[0],[2,q]}})})};k.prototype.getNavStructure=function(){var q=this;return Promise.all([(new Promise(function(t,w){u(["ago-globalnav-resources/structures/MapViewer"],t,w)})).then(h.__importStar)]).then(function(t){var w=q.state,A=w.config;return(new t[0].default({portal:w.portal,item:q.item,config:h.__assign(h.__assign({},A.urls),{restrictOrganizationPageToAdmin:A.restrictOrganizationPageToAdmin}),
noUserThumbnailUrl:"./img/no-user-thumb.jpg",i18n:q.messages,fetchNotifications:b.fetchNotifications,deleteNotifications:b.deleteNotifications})).spawnStructure()})};k.prototype.addGlobalNavEventListeners=function(){var q=document.querySelector(".esri-header-barrier");q.addEventListener("header:click:signin",this.loginToAccount.bind(this));q.addEventListener("header:click:signout",this.logoutOfAccount.bind(this));q.addEventListener("header:click:switch",this.openSwitchAccounts.bind(this));q.addEventListener("header::title:save",
this.publishEventAndUpdateTitle.bind(this))};k.prototype.addEventListeners=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(q){this.own([e.default.subscribe("map-saved",this.updateTitle.bind(this)),e.default.subscribe("mapProperties_updated",this.updateTitle.bind(this))]);return[2]})})};k.prototype.loginToAccount=function(){return c.default(this.state)};k.prototype.logoutOfAccount=function(q){q.preventDefault();this.state.portal.isPortal?(g.default.destroyCredentials(),
this.enterpriseLogOut()):(g.default.destroyCredentials(),this.agolLogOut())};k.prototype.agolLogOut=function(){var q=this.baseUrl+"/sharing/rest/oauth2/signout?redirect_uri\x3d"+window.location.href.split("?")[0];window.location.href=q};k.prototype.enterpriseLogOut=function(){window.location.href=this.baseUrl+"/sharing/rest/oauth2/signout?redirect_uri\x3d"+window.location.href};k.prototype.openSwitchAccounts=function(){var q=this.state,t=q.portal;q=q.config;var w=window.location.href,A=p.parseUrl(w);
t=q.isDebug?null:w.replace(A.host,t.portalHostname);t=this.getRedirectUri(t);t=window.open(this.baseUrl+("/home/pages/Account/manage_accounts.html#client_id\x3darcgisonline\x26redirect_uri\x3d"+t),"_blank");null===t||void 0===t?void 0:t.focus()};k.prototype.getRedirectUri=function(q){q=q||window.location.href;return-1<q.indexOf("index.html")?q.replace("index","account-switcher-callback"):q.endsWith("/#")?q.replace("/#","/account-switcher-callback.html"):q+"/account-switcher-callback.html"};k.prototype.publishEventAndUpdateTitle=
function(q){var t=null===q||void 0===q?void 0:q.detail;this.updateTitle(q);e.default.publish("title-updated",t)};k.prototype.updateTitle=function(q){var t=q&&q.item||this.item;t=q&&q.detail||(null===t||void 0===t?void 0:t.title);var w=document.createEvent("CustomEvent");w.initCustomEvent("header:update:inlineTitle",!0,!0,{label:t,brandText:t});document.querySelector(".esri-header-inline-title").dispatchEvent(w);document.querySelector("title").textContent=t;(w=this.state.mapView.map.portalItem)&&w.set&&
w.set("title",t);this.updateMVCLink(q)};k.prototype.updateMVCLink=function(q){if(q=document.getElementById("esri-header-menus-link-desktop-1-0")){var t=this.getMapViewerClassicLink();q.setAttribute("href",null===t||void 0===t?void 0:t.href)}};k.prototype.adjustForPortal=function(){if(this.state.portal.isPortal){var q=document.querySelector("button.esri-header-account-signin-control.-switch");if(q)return q.classList.add("hide")}};return k=h.__decorate([r.subclass("")],k)}(v.default);n.default=v})},
"esri-global-nav/esri-global-nav":function(){!function(u,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):u.esriGlobalNav=n()}(this,function(){function u(U){var V=U instanceof Node?U:document.createElement(U);return[].slice.call(arguments,1).forEach(function(Q){Q instanceof Node?V.appendChild(Q):"string"==typeof Q?V.innerHTML=Q:function la(fa,da,ca){for(var ha in da)"function"==typeof da[ha]?fa.addEventListener(ca+ha,da[ha]):
Object(da[ha])===da[ha]?la(fa,da[ha],ca+ha+"-"):fa.setAttribute(ca+ha,da[ha])}(V,Q,"")}),V}function n(U){for(;U.lastChild;)U.removeChild(U.lastChild);return U.appendChild(function(V){var Q=document.createDocumentFragment();return[].slice.call(V,1).forEach(function(Y){Y instanceof Node?Q.appendChild(Y):Q.appendChild(document.createTextNode(Y))}),Q}(arguments)),U}function h(U){if(Array.isArray(U)){for(var V=0,Q=Array(U.length);V<U.length;V++)Q[V]=U[V];return Q}return Array.from(U)}function r(U,V,Q){var Y=
document.createEvent("CustomEvent");Y.initCustomEvent(V,!0,!0,Q);U.dispatchEvent(Y)}function v(U){var V=void 0;U.addEventListener("blur",function(Q){Q.target instanceof Element&&(Q.target.removeAttribute("js-focus"),Q.target.removeAttribute("js-focus-ring"))},!0);U.addEventListener("focus",function(Q){Q=document.activeElement;Q instanceof Element&&"BODY"!==Q.tagName&&(Q.setAttribute("js-focus",""),V&&Q.setAttribute("js-focus-ring",""))},!0);window.addEventListener("keydown",function(){V=clearTimeout(V)||
setTimeout(function(){V=0},100)},!0)}function z(U){function V(wa,Ja){for(var va in Ja)void 0!==Ja[va]&&null!==Ja[va]&&(wa[va]=Ja[va]);return wa}function Q(){return V({class:""+ca,style:"transform: rotate(360deg);"},{id:ha,alt:S,viewBox:sa,width:ea,height:ma})}function Y(){ja.appendChild(u("img",V({style:(ea?"width:"+ea+"px":"")+"; "+(ma?"height:"+ma+"px":"")},{id:ha,alt:S,src:da,class:ca})))}var fa=U.imgDef,da=void 0===fa?"":fa;fa=U.imgClass;var ca=void 0===fa?"":fa;fa=U.wrapperClass;var la=U.inlineImg;
la=void 0!==la&&la;var ha=U.id,S=U.alt,ea=U.imgWidth,ma=U.imgHeight,sa=U.viewBox;U=U.$targetElm;var ja=u("span",{class:void 0===fa?"":fa});"string"==typeof da?da.indexOf(".svg")!==da.length-4||la?Y():function(wa,Ja,va){var ra=2<arguments.length&&void 0!==va?va:function(){},Ba=new XMLHttpRequest;Ba.addEventListener("readystatechange",function(){4===Ba.readyState&&(200===Ba.status?Ja(Ba.responseText):ra())});Ba.open("GET",wa);Ba.send()}(da,function(wa){ja.innerHTML=wa;u(ja.firstElementChild,Q())},function(){Y()}):
(fa=u(document.createElementNS("http://www.w3.org/2000/svg","svg"),Q(),u.apply(void 0,[document.createDocumentFragment()].concat(h(da.map(function(wa){return u(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:wa})}))))),ja.appendChild(fa));return U&&(U.innerHTML="",U.appendChild(ja)),ja}function p(){function U(){r(Q,"header:inlineTitle:deactivated",{event});setTimeout(function(){Q.focus()},0);r(Q,"header:menu:toggle",{state:"menu",target:S,type:"inlineTitle",control:Q,content:ha,event})}
function V(ea){F.newValue=Y.value;ea.keyCode&&13!==ea.keyCode||(F.newValue&&" "!==F.newValue&&F.newValue!==F.text&&r(Q,"header:title:submit",{title:F.newValue}),U())}var Q=u("button",{class:D+"-control",id:D+"-control",tabindex:"-1",aria:{expanded:!1,controls:D+"-content"}});Q.addEventListener("header:menu:open",function(ea){r(Q,"header:inlineTitle:activated",{event:ea})});Q.addEventListener("click",function(ea){r(Q,"header:click:inlineTitle",{event:ea});r(Q,"header:menu:toggle",{state:"menu",target:S,
type:"inlineTitle",control:Q,content:ha,event:ea})});var Y=u("input",{class:D+"-input",id:D+"-input",aria:{labelledby:D+"-input"}});Y.addEventListener("keyup",V);var fa=u("button",{class:D+"-action-button "+D+"-dismiss-button",aria:{labelledby:D+"-action-button"}},z({imgDef:t.md,imgClass:D+"-dismiss-icon"}));fa.addEventListener("click",U);var da=u("button",{class:D+"-action-button "+D+"-submit-button",aria:{labelledby:D+"-action-button"}},z({imgDef:w.lg,imgClass:D+"-submit-icon"}));da.addEventListener("click",
V);var ca=u("div",{class:"esri-header-lineBreak "+D+"-lineBreak"}),la=u("div",{class:"esri-header-lineBreak "+D+"-lineBreak lineBreak-right"});fa=u("span",{class:D+"-actionButton-container"},fa,da);var ha=u("div",{class:D+"-content",id:D+"-content",aria:{expanded:!1,labelledby:D+"-control"}},ca,Y,fa,la),S=u("span",{class:D,id:D,aria:{expanded:!1}},Q,ha);return S.addEventListener("header:inlineTitle:activated",function(ea){Y.value=F.text;S.setAttribute("aria-expanded","true");setTimeout(function(){Y.selectionStart=
F.text.length;Y.focus()},100)}),S.addEventListener("header:inlineTitle:deactivated",function(ea){S.setAttribute("aria-expanded","false");Y.value=""}),S.addEventListener("header:update:inlineTitle",function(ea){ea=ea.detail;if(!ea||ea.root&&!ea.editTitle)S.classList.add("hidden");else if(S.classList.remove("hidden"),ea.brandText){F.brandText&&F.pencilIcon?(F.brandText.parentNode.removeChild(F.brandText),F.pencilIcon.parentNode.removeChild(F.pencilIcon)):Q.setAttribute("tabindex","0");var ma=ea.maxViewWidth||
30;F.text=ea.brandText;F.pencilIcon=z({imgDef:y.sm,imgClass:D+"-edit-icon"});F.brandText=u("span",{class:D+"-text",style:"max-width: "+ma+"vw;"},ea.brandText);ea.titleFontSize&&(F.brandText.style.fontSize=ea.titleFontSize+"px");u(Q,F.brandText,F.pencilIcon);(ea=document.getElementById("esri-header-brand"))&&(ea.classList.contains("-fit-burger")&&S.classList.add("-fit-burger"),ea.parentElement.removeChild(ea))}}),S}function g(U){function V(wa){var Ja=void 0,va=ha(wa.props.href);if(Ja=wa.props.href?
u("a",{class:E+"-"+wa.class,href:wa.props.href,target:va,rel:"_blank"===va?"noopener":null},wa.icon||"",wa.label):u("button",{class:E+"-"+wa.class},wa.icon||"",wa.label),wa.id&&Ja.setAttribute("id",E+"-"+wa.id),wa.props.data)for(var ra in wa.props.data)Ja.setAttribute("data-"+ra,wa.props.data[ra]);return wa.props.newContext&&u(Ja,{target:"_blank",rel:"noopener"}),Ja}function Q(wa){return u("li",{class:E+"-subitem "+(wa.heading?E+"-subitem--heading":"")},wa.heading?u("p",{class:E+"-heading--label"},
wa.heading):"",V({class:"sublink",props:wa,label:wa.label}))}function Y(wa){return wa.length?u.apply(void 0,["div",{class:E+"-sublist--col"}].concat(h(wa.map(Q)))):null}function fa(wa){var Ja=z({imgDef:wa.icon,imgClass:E+"-sublink-image",imgWidth:wa.width,imgHeight:wa.height});return u("li",{class:E+"-subitem--featured"},V({class:"sublink--featured",props:wa,icon:Ja,label:u("span",{class:E+"-sublink-text"},wa.label)}))}function da(wa){var Ja=[].slice.call(document.querySelectorAll(".esri-header-menus-submenu")),
va="disabled"!==wa&&"init"!==wa&&wa.getAttribute("data-parent");va=document.querySelector("#"+va);"init"===wa?(wa=[].slice.call(document.querySelectorAll(".esri-header-menus-flyout")),wa.length&&wa.forEach(function(ra){var Ba=[].slice.call(ra.querySelectorAll(".esri-header-menus-flyout--categories-item"));Ba=document.querySelector("#"+Ba[0].getAttribute("data-parent"));"1"===[].slice.call(ra.querySelectorAll(".esri-header-menus-flyout--list-items"))[0].getAttribute("data-coltype")&&Ba.setAttribute("data-single",
"")})):"disabled"===wa?Ja.forEach(function(ra){ra.removeAttribute("data-single")}):va.setAttribute("data-single","")}function ca(wa,Ja,va,ra,Ba){var Ha=[],ya=[],qa="";switch(Ja){case "category":wa.cols.length&&wa.cols.forEach(function(oa){qa=u("li",{class:E+"-flyout--categories-item","data-id":va,"aria-current":0===va?"true":"false","data-parent":E+"-"+ea+"-submenu-"+ra+"-"+Ba,tabindex:-1},u("button",{class:E+"-flyout--categories-item_header",tabindex:0,click:function(Aa){!function(Ka){var Wa=Ka.target.parentNode.querySelector(".esri-header-menus-flyout--categories-details[aria-expanded]"),
Pa=Ka.target.parentNode.querySelector(".esri-header-menus-flyout--categories-item_header"),Ta="false"===Wa.getAttribute("aria-expanded")?"true":"false",eb=[].slice.call(Ka.target.parentNode.querySelectorAll(".esri-header-menus-flyout--categories-details_item")),Na=window.getComputedStyle(eb[0]);Ka=parseInt(Na.height)*eb.length;eb=parseInt(Na.marginTop)*eb.length+parseInt(Na.marginTop);Na=[].slice.call(document.querySelectorAll(".esri-header-menus-flyout--categories-item_header"));var Sa=[].slice.call(document.querySelectorAll(".esri-header-menus-flyout--categories-item")),
$a=[].slice.call(document.querySelectorAll(".esri-header-menus-flyout--list-items"));1024>window.innerWidth?([].slice.call(document.querySelectorAll(".esri-header-menus-flyout--categories-details[aria-expanded]")).forEach(function(gb){gb.setAttribute("aria-expanded","false");gb.style.height="0"}),Wa.setAttribute("aria-expanded",Ta),"true"==Ta?(Wa.style.height=Ka+eb+"px",Na.forEach(function(gb){gb.setAttribute("aria-current","false")}),Pa.setAttribute("aria-current","true")):(Wa.style.height="0",Pa.setAttribute("aria-current",
"false"))):Sa.forEach(function(gb,Za){gb.addEventListener("click",function(ab){ab=ab.target.parentNode;var ub=ab.getAttribute("data-id"),yb=$a[Za].getAttribute("data-id"),tb=$a[Za].getAttribute("data-coltype");$a.forEach(function(nb,Nb){nb.setAttribute("aria-current","false");Sa[Nb].setAttribute("aria-current","false")});ub===yb&&(da("1"===tb?ab:"disabled"),ab.setAttribute("aria-current","true"),$a[Za].setAttribute("aria-current","true"),$a[Za].focus())})})}(Aa)}},wa.category));oa.col.forEach(function(Aa){var Ka=
ha(Aa.href);ya.push(u("a",{href:Aa.href,class:E+"-flyout--categories-details_item","data-heading":Aa.heading?"true":"false",tabindex:-1,target:Ka,rel:"_blank"===Ka?"noopener":null},Aa.heading&&u("p",{class:E+"-flyout--categories-details_heading"},Aa.heading),Aa.label&&u("p",{class:E+"-flyout--categories-details_label"},Aa.label)))})});Ha.push(u(qa,u.apply(void 0,["div",{class:E+"-flyout--categories-details","aria-expanded":"false",tabindex:-1}].concat(ya))));break;case "label":wa.cols&&wa.cols.length&&
wa.cols.forEach(function(oa){var Aa=u("ul",{class:E+"-flyout--list-items_column"});oa.col.forEach(function(Ka){var Wa=ha(Ka.href);Ha.push(u(Aa,u("li",{class:E+"-flyout--list-items_name"},u("a",{href:Ka.href,class:E+"-flyout--list-items_anchor","data-heading":Ka.heading?"true":"false",target:Wa,rel:"_blank"===Wa?"noopener":null},Ka.heading&&u("p",{class:E+"-flyout--list-items_heading"},Ka.heading),Ka.label&&u("p",{class:E+"-flyout--list-items_label"},Ka.label)))))})})}return Ha}function la(wa){var Ja=
[];return wa.map(function(va){if(va.heading&&Ja.push(u("li",{class:E+"-entry--heading"},u("p",{class:E+"-entry--heading-label"},va.heading))),va.href&&va.label){var ra=ha(va.href);Ja.push(u("li",{class:E+"-entry--menus-subitem"},u("a",{href:va.href,class:E+"-entry-sublink",target:ra,rel:"_blank"===ra?"noopener":null},va.label)))}}),Ja}function ha(wa){if(wa){var Ja=0===wa.search(/^\//);wa=0>wa.indexOf(window.location.hostname);var va="";return Ja||!wa?va="_top":(Ja||wa)&&(va="_blank"),va}}function S(wa){var Ja=
[];return wa.forEach(function(va){if(va.heading&&Ja.push(u("li",{class:E+"-entry--heading"},u("p",{class:E+"-entry--heading-label"},va.heading))),va.href&&va.label){var ra=ha(va.href);Ja.push(u("li",{class:E+"-entry--menus-subitem"},u("a",{href:va.href,class:E+"-entry-sublink",target:ra,rel:"_blank"===ra?"noopener":null},u("p",{class:E+"-entry-sublink--title"},va.label),va.description?u("p",{class:E+"-sublink--description"},va.description):null)))}}),Ja}U=U.variant;var ea=void 0===U?"desktop":U,ma=
u("div",{class:E,id:E+"-"+ea});ma.classList.add("-"+ea);if(U="mobile"===ea){var sa=u("button",{class:E+"-toggle",id:E+"-"+ea+"-toggle",aria:{controls:E+"-content-"+ea,expanded:!1,haspopup:!0,labelledby:"esri-header-brand"}});z({imgDef:x.md,imgClass:E+"-image",id:E+"-image",$targetElm:sa});sa.addEventListener("click",function(wa){r(sa,"header:menu:toggle",{control:sa,content:ja,root:!0,state:"menu",target:ma,type:"root-toggle",event:wa})});u(ma,sa)}var ja=u("div",{class:E+"-content",id:E+"-content-"+
ea,aria:U?{hidden:!0,expanded:!1}:{}});return u(ma,ja),ma.addEventListener("header:update:menus",function(wa){(wa=wa.detail)?(ma.classList.remove("hidden"),wa.noBrand&&ma.classList.add("-no-brand"),n.apply(void 0,[ja].concat(h(wa.map(function(Ja,va){return u("div",{class:E+"-menu"},u.apply(void 0,["ul",{class:E+"-list",aria:{labelledby:"esri-header-brand"}}].concat(h(Ja.map(function(ra,Ba){var Ha=ra.icon?z({imgDef:ra.icon.path,imgClass:E+"-link-icon",imgWidth:ra.icon.width||"16px",imgHeight:ra.icon.height||
"16px"}):null,ya=V({class:"link "+(ra.hideLabelInDesktop?"-hide-label":"")+" "+(ra.active?"-is-active":""),id:"link-"+ea+"-"+va+"-"+Ba,props:ra,icon:Ha,label:u("span",{class:E+"-link-label"},ra.label)});Ha=u("li",{class:E+"-item"},ya);var qa=ra.menus&&0<ra.menus.length,oa=ra.cols&&ra.cols.length,Aa=ra.flyout&&0<ra.flyout.length,Ka=ra.tiles&&0<ra.tiles.length;if(qa||oa||Ka||Aa){var Wa=u("button",{class:E+"-submenu-toggle"},ra.label),Pa=oa&&0<ra.cols.filter(function($a){return"structured"===$a.type}).length,
Ta=!1,eb=0;if(qa){var Na=ra.menus.length;10<=Na&&(Ta=0==Na%3,eb=Math.min(Math.ceil(Na/9),3))}var Sa=u("div",{class:E+"-submenu",id:E+"-"+ea+"-submenu-"+va+"-"+Ba,"data-has-structured":Aa?"false":Pa,"data-has-flyout":Aa?"true":"false",aria:{hidden:!0,expanded:!1},data:{filled:qa&&Math.min(ra.menus.length,30)||"",structuredCols:oa||"",hasMultiCols:Ta,columns:eb}},Wa);Aa?function($a){var gb=$a.$subcontent,Za=$a.item,ab=$a.uuid,ub=$a.suuid,yb=u("ul",{class:E+"-flyout--categories"}),tb=u("div",{class:E+
"-flyout--list"});Za.flyout.forEach(function(nb,Nb){u.apply(void 0,[yb].concat(h(ca(nb,"category",Nb,ab,ub))));u(tb,u.apply(void 0,["div",{class:E+"-flyout--list-items","data-id":Nb,"data-coltype":nb.cols.length,"aria-current":0===Nb?"true":"false",tabindex:0}].concat(h(ca(nb,"label",Nb,ab,ub)))))});u(gb,u("div",{class:E+"-flyout"},u("div",{class:E+"-flyout--categories-wrapper"},yb),tb))}({$subcontent:Sa,item:ra,uuid:va,suuid:Ba}):oa?function($a){var gb=$a.$subcontent,Za=$a.item,ab=$a.uuid,ub=$a.suuid,
yb=u("div",{class:E+"-sublist--col-wrapper"});Za.cols&&(Za.cols.forEach(function(tb){var nb="standard",Nb=la,Tb=tb.border||"false";switch(tb.type){case "structured":nb="structured",Nb=S}u(yb,u("div",{class:E+"-sublist--col","data-coltype":nb,"data-menuborder":Tb},u.apply(void 0,["ul",{class:E+"-sublist","data-menutype":nb,aria:{labelledby:E+"-link-"+ea+"-"+ab+"-"+ub}}].concat(h(Nb(tb.items))))))}),u(gb,u("div",{class:E+"-sublist"},yb)))}({$subcontent:Sa,item:ra,uuid:va,suuid:Ba}):qa&&function($a){var gb=
$a.hasMenuItems,Za=$a.$subcontent,ab=$a.item,ub=$a.uuid;$a=$a.suuid;var yb="";10<=ab.menus.length&&18>=ab.menus.length?(gb=Math.ceil(ab.menus.length/2),yb=u("div",{class:E+"-sublist--col-wrapper "+E+"-columns-2"},Y(ab.menus.slice(0,gb)),Y(ab.menus.slice(gb,ab.menus.length)))):18<ab.menus.length&&27>=ab.menus.length?(gb=Math.ceil(ab.menus.length/3),yb=u("div",{class:E+"-sublist--col-wrapper "+E+"-columns-3"},Y(ab.menus.slice(0,gb)),Y(ab.menus.slice(gb,2*gb)),Y(ab.menus.slice(2*gb,ab.menus.length)))):
gb&&(yb=u("div",{class:E+"-sublist--col-wrapper"},Y(ab.menus.slice(0,ab.menus.length))));u(Za,u("ul",{class:E+"-sublist",aria:{labelledby:E+"-link-"+ea+"-"+ub+"-"+$a}},u(yb)))}({hasMenuItems:qa,$subcontent:Sa,item:ra,uuid:va,suuid:Ba});!Aa&&Ka&&u(Sa,function($a,gb,Za){return $a.length?u.apply(void 0,["ul",{class:E+"-sublist--featured",aria:{labelledby:E+"-link-"+ea+"-"+gb+"-"+Za},data:{filled:""+$a.slice(0,4).length}}].concat(h($a.slice(0,4).map(fa)))):null}(ra.tiles,va,Ba));u(Ha,Sa);ya.addEventListener("click",
function($a){r(ya,"header:menu:toggle",{control:ya,content:Sa,submenu:!0,state:"menu",type:"menu-toggle"});da("init");(function(){var gb=[].slice.call(document.querySelectorAll(".esri-header-menus-flyout--categories-item")),Za=[].slice.call(document.querySelectorAll(".esri-header-menus-flyout--list-items"));Za.length&&Za.forEach(function(ab,ub){gb[ub].setAttribute("aria-current","false");ab.setAttribute("aria-current","false");ab.hasAttribute("data-id")&&"0"===ab.getAttribute("data-id")&&gb[ub].hasAttribute("data-id")&&
"0"===gb[ub].getAttribute("data-id")&&(gb[ub].setAttribute("aria-current","true"),ab.setAttribute("aria-current","true"))})})()});Wa.addEventListener("click",function(){r(Wa,"header:menu:close",{control:ya,submenu:!0,content:Sa,type:"menu-close"});(function(){var $a=[].slice.call(document.querySelectorAll(".esri-header-menus-flyout--categories-item_header")),gb=[].slice.call(document.querySelectorAll(".esri-header-menus-flyout--categories-details"));$a.forEach(function(Za){Za.setAttribute("aria-current",
"false")});gb.forEach(function(Za){Za.setAttribute("aria-expanded","false");Za.style.height="0"})})()})}return Ha})))))}))))):ma.classList.add("hidden")}),ma.addEventListener("header:update:collapseMenus",function(wa){if((wa=wa.detail)&&-1<wa.indexOf(!0)){var Ja=document.getElementById("esri-header-brand")||document.getElementById("esri-header-inline-title");document.querySelector(".esri-header-menus-toggle").classList.add("-visible");Ja.classList.add("-fit-burger");document.getElementById("esri-header-menus-mobile").classList.add("-always-hamburger");
var va=[].slice.call(ma.querySelectorAll(".esri-header-menus-menu"));wa.forEach(function(ra,Ba){ra&&va[Ba].classList.add("-collapsed")})}}),ma}function e(){var U=u("button",{class:G+"-control",id:G+"-control",aria:{expanded:!1,controls:G+"-content"}});U.addEventListener("click",function(Y){r(U,"header:click:search",{event:Y});r(U,"header:menu:toggle",{control:U,content:V,state:"search",target:Q,type:"search-toggle",event:Y})});var V=u("div",{class:G+"-content",id:G+"-content",aria:{expanded:!1,labelledby:G+
"-control"}}),Q=u("div",{class:G},U,V);return Q.addEventListener("header:update:search",function(Y){var fa=Y.detail;if(!fa||fa.inline)return Q.classList.add("hidden");if(Q.classList.remove("hidden"),fa.hide)U.setAttribute("tabindex","-1");else if(u(U,{aria:{label:fa.label}}),z({imgDef:B.md,imgClass:G+"-image",id:G+"-image",$targetElm:U}),fa.dialog){fa.dialog.prefix="esri-header-search-dialog";var da=function(ca){function la(Ba){Ba&&"reset"===Ba.type&&(ea.value="");var Ha=ea.value;Ha!==ra&&(ra=Ha,
r(Ja,ca.prefix+":input",{value:ra,event:Ba}));va&&!Ha?(va=!1,S.removeAttribute("data-filled"),wa.removeAttribute("data-filled")):!va&&Ha&&(va=!0,u(S,{data:{filled:""}}),u(wa,{data:{filled:""}}));ma.nodeValue=Ha;ja.style.width=sa.scrollWidth+"px"}function ha(Ba){r(Ja,ca.prefix+":submit",{value:ea.value,event:Ba})}var S=u("label",{class:ca.prefix+"-label",for:ca.prefix+"-query-control"},ca.queryLabel),ea=u("input",{class:ca.prefix+"-control",id:ca.prefix+"-query-control",type:"search",name:"q",autocapitalize:"off",
autocomplete:"off",autocorrect:"off",spellcheck:"false"}),ma=document.createTextNode(""),sa=u("div",{class:ca.prefix+"-measure-text",aria:{hidden:!0}},ma),ja=u("div",{class:ca.prefix+"-measure"},sa),wa=u("button",{class:ca.prefix+"-submit",type:"submit",aria:{label:ca.submitLabel}}),Ja=u("form",{class:ca.prefix+"-form",action:ca.action,role:"search",aria:{label:ca.label}},S,ea,ja,wa);Ja.addEventListener(ca.prefix+":focus",function(){ea.focus()});var va=!1,ra="";return Ja.addEventListener("DOMNodeInserted",
function Ha(){Ja.parentNode&&(Ja.removeEventListener("DOMNodeInserted",Ha),r(Ja,ca.prefix+":update",ca))}),Ja.addEventListener(ca.prefix+":update",function(){Ja.ownerDocument.defaultView.matchMedia(ca.matchMedia||"(max-width: 720px)").addListener(la);ea.addEventListener("input",la);Ja.addEventListener("reset",la);Ja.addEventListener("submit",ha);Ja.addEventListener(ca.prefix+":unload",onunload)}),Ja}(fa.dialog);Y=u("button",{class:"esri-header-search-dialog-cancel",type:"reset"},u("span",fa.dialog.cancelLabel));
Y.addEventListener("click",function(ca){r(U,"header:menu:close",{control:U,content:V,state:"search",type:"search-close",event:ca})});u(da,Y);n(V,da);U.addEventListener("click",function(ca){"true"===U.getAttribute("aria-expanded")&&r(da,fa.dialog.prefix+":focus",{event:ca})})}}),Q}function b(){function U(){ra.showMoreButton&&ra.showMoreButton.classList.remove("hide");Ja.setAttribute("aria-expanded","false")}function V(Mb){ra&&!ra.loading&&(Wa(),Pa(),U(),sa(Mb))}function Q(Mb,Kb){var kb="0px 32px 24px 20px 18px 16px 14px 12px 10px 8px".split(" "),
rb=ra.browserIsEdge?"user-select-none":"",zb=u("li",{alt:"",class:"block link-off-black appLinkContainer grabbable "+(Kb.canAccess?"with-hover":"no-hover"),mousedown:J?ya.bind(null,Kb):sa,keyup:!ra.disabled&&J?Sa.bind(null,Kb):function(){},keydown:J?gb:function(){},role:"menuitem","data-id":Kb.itemId||Kb.uid||Kb.title});if(Kb.canAccess){var xb=u("a",{href:Kb.url,target:"_blank",blur:J?$a.bind(null,Kb):function(){},class:"appLink"});if(Kb.image){var ua=u("div",{class:"appIconImage "+rb});ua.appendChild(tb());
ua.appendChild(u("img",{class:"appIconPng",alt:"",src:Kb.image}));xb.appendChild(ua)}else{ua=Math.ceil(Ha(Kb.abbr||"","avenir")/5);var Oa=kb[ua];9<ua&&(Kb.abbr=Kb.abbr.substr(0,4),Oa=kb[ua=9]);kb=u("div",{class:"appIconImage"});kb.appendChild(tb());Oa="font-size: "+Oa+";";6<ua&&(Oa+=" font-weight: 500;");ua=u("span",{style:Oa,class:"avenir appIconSvgText "+rb},Kb.abbr);kb.appendChild(ua);kb.appendChild(u("img",{src:Kb.placeHolderIcon,alt:"",class:rb}));xb.appendChild(kb)}zb.appendChild(xb);rb=u("p",
{style:"margin:0 auto; text-align:center",class:rb},Kb.label);Kb.isNew&&xb.appendChild(u("div",{class:"app-indicator app-indicator-new"}));xb.appendChild(rb)}else Ba(Kb,zb,rb);Mb.appendChild(zb)}function Y(Mb,Kb,kb){r(ja,"header:apps:reorder",{icons:{primaryApps:Mb,secondaryApps:Kb,revisions:kb||{}}})}function fa(){Ja.setAttribute("aria-expanded","true");ra.showMoreButton.classList.add("hide")}function da(Mb){Mb===ra.bottomAppContainer&&1===ra.secondarySortable.toArray().length?Ka(!1):ra.secondarySortable.toArray().length||
Ka(!0)}function ca(Mb,Kb,kb){!ra.disabled&&Mb&&(Mb.canAccess?(V(),window.open(Mb.url,"_blank")):kb?(ra.removeStartApp=!1,oa(Mb.itemId||Mb.title,Kb)):(Mb=Mb.itemId||Mb.title,ra.dropdownWrapper.classList.remove("dragging"),ra.removedAppWithFoucs?ra.removedAppWithFoucs=null:ra.removedAppWithFoucs={uid:Mb,el:Kb}))}function la(Mb,Kb){var kb=Mb.item.children[1]&&"A"===Mb.item.children[1].nodeName?Mb.item.children[1]:Mb.item.children[0];Kb?(ra.recentlyRemovedHref=kb.href,kb.removeAttribute("href")):setTimeout(function(){kb.href=
ra.recentlyRemovedHref},1)}function ha(Mb){ra.dragAndDropIntro.classList.add("hide");Y(ra.primarySortable.toArray(),ra.secondarySortable.toArray())}var S=u("div",{class:L+"-content",id:L+"-content",aria:{expanded:!1,labelledby:L+"-control"}}),ea=u("span"),ma=u("button",{class:L+"-control",id:L+"-control",style:"display: none;",tabindex:"-1"},ea),sa=function(Mb){setTimeout(function(){r(ja,"header:menu:toggle",{state:"menu",target:wa,type:"root-toggle",control:ja,content:S,event:Mb})},1)},ja=ma;ma.addEventListener("click",
V);var wa=u("div",{class:L},ja),Ja=u("div",{class:L+" secondary-dropdown-menu",aria:{expanded:!1}},u("hr")),va=u("div",{class:L+" bottom-container"}),ra={maxDragErrorTollerance:1},Ba=function(Mb,Kb,kb){var rb=u("div",{class:"app-indicator app-indicator-removed",tabindex:0,click:oa.bind(null,Mb.uid,Kb),keyup:oa.bind(null,Mb.uid,Kb),keydown:gb});rb.innerHTML='\x3csvg xmlns\x3d"https://www.w3.org/2000/svg" width\x3d"12" height\x3d"12" viewBox\x3d"0 0 32 32"  class\x3d"default-svg-fill"\x3e\x3cpath d\x3d"M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/\x3e\x3c/svg\x3e';
var zb=u("div",{class:"missing-app-icon appIconImage",tabindex:0,blur:$a.bind(null,Mb),title:ra.i18n.removed});zb.appendChild(tb());Kb.appendChild(rb);Kb.appendChild(zb);Kb.appendChild(u("p",{style:"margin:0 auto; text-align:center",class:kb},Mb.label))},Ha=function rb(Kb,kb){var zb=(rb.canvas||(rb.canvas=document.createElement("canvas"))).getContext("2d");return zb.font=kb,zb.measureText(Kb).width},ya=function(Kb,kb){if(0===kb.button){if(ra.startClientX=kb.clientX,ra.startClientY=kb.clientY,ra.startApp=
Kb,ra.dragEventWasCanceled=!1,ra.startElement=kb.currentTarget,ra.disabled)return void(Kb.canAccess&&ra.dropdownNav.addEventListener("mouseup",qa));if(setTimeout(function(zb){ra.startElement.classList.remove("sortable-drag-class")},1),Kb.isNew){var rb=ra.primarySortable.toArray();ra.duplicateValueIndex&&rb.splice(ra.duplicateValueIndex,1);Y(rb,ra.secondarySortable.toArray(),{targetUid:kb.currentTarget.getAttribute("data-id"),isNew:!0,targetValue:null})}(kb.currentTarget&&kb.currentTarget.classList.remove("sortable-drag-class"),
ra.listenForMouseOverElement=kb.currentTarget.parentNode,ra.listenForMouseOverElement.addEventListener("mousemove",Ta),Kb.canAccess)?ra.dropdownNav.addEventListener("mouseup",V):(ra.dropdownNav.addEventListener("mouseup",Aa),"app-indicator app-indicator-removed"!==kb.target.classList.className&&"app-indicator app-indicator-removed"!==kb.target.parentNode.className&&"app-indicator app-indicator-removed"!==kb.target.parentNode.parentNode.className||(ra.removeStartApp=!0))}},qa=function rb(kb){ra.dropdownNav.removeEventListener("mouseup",
rb,!1);eb(kb.clientX,kb.clientY)||V()},oa=function(kb,rb,zb){if(!zb||Na(zb.keyCode))rb.parentNode&&rb.parentNode.removeChild(rb),setTimeout(function(){Y(ra.primarySortable.toArray(),ra.secondarySortable.toArray());da(ra.bottomAppContainer)},0)},Aa=function(kb){ra.dragEventWasCanceled=!0},Ka=function(kb){ra.bottomAppContainer.classList[kb?"add":"remove"]("drag-apps-here-box");ra.dragAppsHereText.classList[kb?"remove":"add"]("hide")},Wa=function(){ra.dropdownNav&&ra.dropdownNav.removeEventListener&&
ra.dropdownNav.removeEventListener("mouseup",V,!1)},Pa=function(){ra.listenForMouseOverElement&&ra.listenForMouseOverElement.removeEventListener("mousemove",Ta,!1)},Ta=function(kb){eb(kb.clientX,kb.clientY)&&(ra.simulatedDragEvent=!0,ra.dropdownWrapper.classList.add("dragging"),Pa())},eb=function(kb,rb){return!ra.dragEventWasCanceled&&!ra.disabled&&(Math.abs(kb-ra.startClientX)>ra.maxDragErrorTollerance||Math.abs(rb-ra.startClientY)>ra.maxDragErrorTollerance)},Na=function(kb){return!kb||13===kb},
Sa=function(kb,rb){if("app-indicator app-indicator-removed"!==rb.target.className&&32===rb.keyCode){if(ra.activeAccessibleListElement)return $a(kb,rb);var zb=kb.canAccess?rb.target.firstChild.firstChild:rb.target.firstChild;rb=rb.target.parentNode;var xb=rb.parentNode;var ua=Array.prototype.indexOf.call(rb.parentNode.children,rb);var Oa=ra.primarySortable.toArray().length;fa();var hb=ua+(xb===ra.bottomAppContainer?Oa+1:1);ra.activeAccessibleListElement=rb;ra.activeAccessibleListElementEvent=Za.bind(null,
kb,Nb(hb,xb),rb,xb,ua);rb.addEventListener("keydown",ra.activeAccessibleListElementEvent);zb&&(zb.classList.add("arrow-keys-enabled"),zb.classList.remove("arrow-keys-disabled"));zb.innerHTML=nb(Nb(ua+(xb===ra.bottomAppContainer?Oa+1:1),xb),xb)}return!1},$a=function(kb,rb){rb=rb.target||rb;(kb=kb.canAccess?rb.firstChild.firstChild:rb.firstChild)&&(kb.classList.remove("arrow-keys-enabled"),kb.classList.add("arrow-keys-disabled"));ra.activeAccessibleListElement&&(ra.activeAccessibleListElement.removeEventListener("keydown",
ra.activeAccessibleListElementEvent,!1),ra.activeAccessibleListElement=null)},gb=function(kb){32!==kb.keyCode&&40!==kb.keyCode&&38!==kb.keyCode||kb.preventDefault()},Za=function(kb,rb,zb,xb,ua,Oa){var hb=40===Oa.keyCode?"bottom":38===Oa.keyCode?"top":39===Oa.keyCode?M?"left":"right":37===Oa.keyCode?M?"right":"left":void 0;"bottom"===hb&&-1<rb.indexOf("bottom")&&ab(zb,ua,xb,3,kb,Oa);"top"===hb&&-1<rb.indexOf("top")&&ab(zb,ua,xb,-3,kb,Oa);"right"===hb&&-1<rb.indexOf("right")&&ab(zb,ua,xb,1,kb,Oa);"left"===
hb&&-1<rb.indexOf("left")&&ab(zb,ua,xb,-1,kb,Oa)},ab=function(kb,rb,zb,xb,ua,Oa){var hb=rb+xb,Cb=zb===ra.bottomAppContainer?zb.children.length-1:zb.children.length,Db=zb===ra.topAppContainer;Db&&hb<Cb||!Db&&hb<=Cb&&0<hb?zb.insertBefore(kb,0>xb?zb.children[hb]:zb.children[hb].nextSibling):Db?(yb(kb,rb,xb),da(ra.bottomAppContainer)):(ub(kb,rb,xb),da(ra.topAppContainer));$a(ua,Oa);ua.canAccess&&!ua.isNew?kb.children[0].focus():kb.children[1].focus();setTimeout(function(){ua.isNew?Y(ra.primarySortable.toArray(),
ra.secondarySortable.toArray(),{targetUid:ua.itemId||ua.title,isNew:!0,targetValue:null}):Y(ra.primarySortable.toArray(),ra.secondarySortable.toArray())},0)},ub=function(kb,rb,zb){var xb=ra.topAppContainer;rb=rb%3||3;var ua=Oa%3||3,Oa=ra.topAppContainer.children.length;return 1===Math.abs(zb)||3===ua?xb.appendChild(kb):2===rb&&1<ua?xb.insertBefore(kb,xb.children[Oa-(ua-1)]):1===rb&&Oa?xb.insertBefore(kb,xb.children[Oa-ua]):void xb.appendChild(kb)},yb=function(kb,rb,zb){var xb=ra.bottomAppContainer,
ua=ra.bottomAppContainer.children.length-1;rb=(rb+1)%3||3;return ua?1===Math.abs(zb)?xb.insertBefore(kb,xb.children[1]):2===rb&&1<ua?xb.insertBefore(kb,xb.children[2]):3===rb&&2==ua?xb.insertBefore(kb,xb.children[3]):void xb.insertBefore(kb,xb.children[1]):xb.appendChild(kb)},tb=function(){return u("span",{class:"arrow-keys-disabled"})},nb=function(kb){return kb.reduce(function(rb,zb){return rb+('\x3cdiv class\x3d"app-arrow app-arrow-'+zb+'"\x3e\x3c/div\x3e')},"")},Nb=function(kb,rb){var zb=[],xb=
ra.topAppContainer.children.length,ua=ra.bottomAppContainer.children.length,Oa=xb+ua;return 0<kb-1&&zb.push("left"),(kb+1<=Oa||!ua)&&kb!==xb&&zb.push("right"),0<kb-3&&zb.push("top"),(kb-xb+2<ua||rb===ra.topAppContainer)&&zb.push("bottom"),zb},Tb={group:"Apps",sort:!0,disabled:!J,animation:150,forceFallback:!0,delay:0,fallbackTolerance:0,ghostClass:"sortable-ghost-class",dragClass:"sortable-drag-class",onStart:function(kb){ra.dragAppsHereText.classList.add("hide");Wa();la(kb,!0)},onEnd:function(kb){return kb.preventDefault(),
Pa(),la(kb,!1),ra.dropdownWrapper.classList.remove("dragging"),ra.bottomAppContainer.classList.remove("on-drag-over"),ra.secondarySortable.toArray().length&&Ka(!1),!1},onMove:function(kb,rb){kb.to===ra.bottomAppContainer?ra.bottomAppContainer.classList.add("on-drag-over"):ra.bottomAppContainer.classList.remove("on-drag-over")},store:{get:function(kb){return kb.options.group.name&&kb.options.group.name.split("!")||[]},set:function(kb){ra.simulatedDragEvent?Y(kb.toArray(),ra.secondarySortable.toArray()):
ca(ra.startApp,ra.startElement,ra.removeStartApp);ra.startElement&&ra.startElement.classList.remove("sortable-drag-class");ra.simulatedDragEvent=!1}}},$b={group:"Apps",sort:!0,disabled:!J,animation:150,forceFallback:!0,delay:0,fallbackTolerance:0,ghostClass:"sortable-ghost-class",dragClass:"sortable-drag-class",onStart:function(kb){Wa();la(kb,!0)},onEnd:function(kb){kb.preventDefault();Pa();la(kb,!1);ra.dropdownWrapper.classList.remove("dragging");ra.secondarySortable.toArray().length||Ka(!0)},store:{get:function(kb){return kb.options.group.name&&
kb.options.group.name.split("!")||[]},set:function(kb){ra.simulatedDragEvent?Y(ra.primarySortable.toArray(),kb.toArray()):ca(ra.startApp,ra.startElement,ra.removeStartApp);ra.startElement&&ra.startElement.classList.remove("sortable-drag-class");ra.simulatedDragEvent=!1}}};return wa.addEventListener("header:update:apps",function(kb){if(kb=kb.detail){if(wa.classList.remove("hidden"),z({imgDef:A.md,imgClass:L+"-image",$targetElm:ea}),ja.removeAttribute("style"),kb.primary)if(kb.ieVersion&&function(Oa){"edge"===
Oa?ra.browserIsEdge=!0:"ie11"===Oa&&(Tb.ghostClass="sortable-ghost-class-with-pointer-events",$b.ghostClass="sortable-ghost-class-with-pointer-events")}(kb.ieVersion),!kb.disableDragAndDrop&&J||(ra.disabled=!0),kb.text&&(ra.i18n=kb.text||{}),kb.isLoading)ra.loading=!0,ja.className=L+"-control disabled-grid-icon",ja.setAttribute("tabindex","-1"),n(wa,ja);else{wa.appendChild(S);ja.className=L+"-control";ja.setAttribute("tabindex","0");u(ja,{aria:{label:kb.label}});var rb=kb.primary.length;rb=" dropdown-width-"+
(3>rb?rb:3);ra.topAppContainer=u("ul",{class:L+" appContainer primary",role:"menu"});ra.bottomAppContainer=u("ul",{class:L+" appContainer secondary",role:"menu"});ra.dropdownWrapper&&(S.innerHTML="",va.lastChild&&va.removeChild(va.lastChild));ra.dragAppsHereText=u("p",{class:"hide"},ra.i18n.dragAppsHere);ra.bottomAppContainer.appendChild(ra.dragAppsHereText);kb.secondary.length||Ka(!0);ra.primarySortable=P.create(ra.topAppContainer,Tb);ra.secondarySortable=P.create(ra.bottomAppContainer,$b);kb.primary.forEach(function(Oa,
hb){Q(ra.topAppContainer,Oa)});kb.secondary.forEach(function(Oa,hb){Q(ra.bottomAppContainer,Oa)});va.appendChild(ra.bottomAppContainer);Ja.appendChild(va);var zb=u("div",{class:""}),xb=u("p",{class:L+" drag-and-drop-intro"},ra.i18n.intro),ua=u("button",{class:L+" dismiss-intro-button",click:ha},ra.i18n.confirm);ra.dragAndDropIntro=kb.displayIntro&&!ra.disabled?u("div",{class:L+" intro-container"},xb,ua):"";kb=u("span");kb.innerHTML=' \x3csvg xmlns\x3d"https://www.w3.org/2000/svg" width\x3d"13" height\x3d"13" viewBox\x3d"0 0 32 32" class\x3d"down-carrot-svg default-svg-fill"\x3e\x3cpath d\x3d"M28 9v5L16 26 4 14V9l12 12L28 9z"\x3e\x3c/path\x3e\x3c/svg\x3e';
ra.showMoreButton=u("button",{class:L+" show-more-button",click:fa},ra.i18n.showMore,kb);ra.dropdownWrapper=u("div",{},ra.dragAndDropIntro,ra.topAppContainer,ra.showMoreButton,Ja);ra.dropdownNav=u("nav",{class:L+" dropdown-menu dropdown-right app-switcher-dropdown-menu "+rb,role:"menu"},ra.dropdownWrapper);zb.appendChild(ra.dropdownNav);S.appendChild(zb);n(wa,ja,S);ra.loading=!1;U()}}else wa.classList.add("hidden")}),wa}function a(U){var V=void 0,Q=void 0,Y=u("div",{class:"esri-header-canvas",tabindex:"-1",
data:{open:!1}});Y.addEventListener("click",function(){r(Y,"header:menu:close")});var fa=function(){var Pa=u("div",{class:"esri-header-branding-stripe",id:"esri-header-branding-stripe"});return Pa.addEventListener("header:update:brand",function(Ta){(Ta=Ta.detail)?(Pa.classList.remove("hidden"),Pa.style.backgroundColor=Ta.topStripe,Pa.classList.add("-visible")):Pa.classList.add("hidden")}),Pa}(),da=function(){var Pa=u("div",{class:"esri-header-brand"});return Pa.addEventListener("click",function(Ta){r(Pa,
"header:click:brand",{event:Ta})}),Pa.addEventListener("header:update:brand",function(Ta){if((Ta=Ta.detail)&&!Ta.editTitle){Pa.classList.remove("hidden");var eb=u("span",{class:"esri-header-brand",id:"esri-header-brand"});if(Ta.href&&(eb=u("a",{class:"esri-header-brand-link",id:"esri-header-brand",href:Ta.href})),u(Pa,eb),Ta.distributorImage){var Na=u("span",{class:"distributor-image"});z({imgDef:Ta.distributorImage,imgClass:"esri-header-brand-image",alt:"",imgWidth:Ta.distributorImageWidth,imgHeight:Ta.distributorImageHeight,
$targetElm:Na});u(eb,Na,u("span",{class:"distributor-image-border"}))}Ta.image&&(Na=u("span",{class:"brand-image"}),u(eb,{aria:{label:Ta.label}}),z({imgDef:Ta.image,imgClass:"esri-header-brand-image",alt:"",imgWidth:Ta.width,imgHeight:Ta.height,$targetElm:Na}),u(eb,Na));if(Ta.brandText){Na=Ta.image?"esri-header-brand-text -has-image":"esri-header-brand-text";var Sa=Ta.brandTextLink?"esri-header-brand-text -has-textLink":"esri-header-brand-text";u(eb,Ta.brandTextLink?u("a",{href:Ta.brandTextLink,class:Sa},
Ta.brandText):u("span",{class:Na},Ta.brandText))}}else Pa.classList.add("hidden")}),Pa}(),ca=p(),la=function(){var Pa=u("div",{class:"esri-header-account"}),Ta=document.createTextNode(""),eb=u("button",{class:"esri-header-account-control esri-header-account-control--signin"},Ta);eb.addEventListener("click",function(xb){r(eb,"header:click:signin",{event:xb})});var Na=u("span"),Sa=document.createTextNode(""),$a=u("span",{class:"esri-header-account-name"},Sa),gb=document.createTextNode(""),Za=u("span",
{class:"esri-header-account-id"},gb),ab=u("button",{class:"esri-header-account-control esri-header-account-control--signedin",id:"esri-header-account-control",aria:{controls:"esri-header-account-menu",expanded:!1,haspopup:!0}},Na,$a,Za);ab.addEventListener("click",function(xb){r(ab,"header:click:account",{event:xb});r(ab,"header:menu:toggle",{account:!0,control:ab,content:zb,state:"menu",target:Pa,type:"account-toggle"})});var ub=document.createTextNode(""),yb=u("button",{class:"esri-header-account-content-toggle"},
ub);yb.addEventListener("click",function(){r(yb,"header:menu:close",{control:ab,content:zb,type:"account-close"})});var tb=u("span"),nb=document.createTextNode(""),Nb=document.createTextNode(""),Tb=document.createTextNode("");$a=u("div",{class:"esri-header-account-content-info"},tb,u("span",{class:"esri-header-account-content-name"},nb),u("span",{class:"esri-header-account-content-id"},Nb),u("span",{class:"esri-header-account-content-group"},Tb));var $b=u("ul",{class:"esri-header-account-content-menu",
aria:{labelledby:"esri-header-account-control"}}),Mb=document.createTextNode(""),Kb=u("button",{class:"esri-header-account-signin-control -switch"},Mb);Kb.addEventListener("click",function(xb){r(Kb,"header:click:switch",{event:xb})});var kb=document.createTextNode(""),rb=u("button",{class:"esri-header-account-signin-control -logout"},kb);rb.addEventListener("click",function(xb){r(rb,"header:click:signout",{event:xb})});rb.addEventListener("keydown",function(xb){"Tab"===xb.key&&ab.focus()});Za=u("ul",
{class:"esri-header-account-signin-menu"},u("li",{class:"esri-header-account-signin-item"},Kb),u("li",{class:"esri-header-account-signin-item"},rb));var zb=u("div",{class:"esri-header-account-menu",id:"esri-header-account-menu",role:"group",aria:{expanded:!1,hidden:!0}},yb,$a,$b,Za);return Pa.addEventListener("header:update:account",function(xb){(xb=xb.detail)?(Pa.classList.remove("hidden"),u(ab,{aria:{label:xb.label}}),ub.nodeValue=xb.label,Ta.nodeValue=xb.controls.signin,Mb.nodeValue=xb.controls.switch,
kb.nodeValue=xb.controls.signout,xb.user?(Sa.nodeValue=nb.nodeValue=xb.user.name,gb.nodeValue=Nb.nodeValue=xb.user.id,Tb.nodeValue=xb.user.group,z({imgDef:xb.user.image,alt:"",imgClass:"esri-header-account-image",$targetElm:Na}),z({imgDef:xb.user.image,alt:"",imgClass:"esri-header-account-content-image",$targetElm:tb}),n.apply(void 0,[$b].concat(h(xb.menus.map(function(ua){return u("li",{class:"esri-header-account-content-item"},ua.newContext?u("a",{class:"esri-header-account-content-link",href:ua.href,
target:"_blank",rel:"noopener"},ua.label):u("a",{class:"esri-header-account-content-link",href:ua.href},ua.label))})))),n(Pa,ab,zb)):n(Pa,eb)):Pa.classList.add("hidden")}),Pa}(),ha=g({variant:"mobile"}),S=g({variant:"desktop"}),ea=e(),ma=function(){var Pa=u("div",{class:"esri-header-shopping-cart","data-cart-empty":"true"});Pa.addEventListener("click",function(Sa){r(Pa,"header:click:shoppingCart",{event:Sa})});var Ta=u("a",{href:"#",class:"esri-header-shopping-cart--icon",id:"esri-header-shopping-cart--icon"},
z({imgDef:C.md,imgClass:"esri-header-shopping-cart--image",id:"esri-header-shopping-cart--image"})),eb=u("div",{class:"esri-header-shopping-cart--items",id:"esri-header-shopping-cart--items"});u(Pa,Ta,eb);Pa.addEventListener("header:update:cart",function(Sa){(Sa=Sa.detail)?(Ta.setAttribute("href",""+Sa.url),Na(Sa.items),Pa.classList.remove("hidden")):Pa.classList.add("hidden")});Pa.addEventListener("header:shoppingcart:add",function(Sa){Na(Sa.detail,!0)});Pa.addEventListener("header:shoppingcart:remove",
function(Sa){Na(-Sa.detail,!0)});var Na=function(Sa,$a){var gb=parseInt(eb.innerHTML);Sa=(gb=isNaN(gb)||0>gb?0:gb)+parseInt(Sa);eb.innerHTML=999<=Sa?"999":Sa;0<Sa?(Pa.setAttribute("data-cart-empty","false"),$a&&(eb.setAttribute("data-cart-updated","true"),setTimeout(function(){eb.setAttribute("data-cart-updated","false")},1E3))):(eb.setAttribute("data-cart-updated","true"),setTimeout(function(){Pa.setAttribute("data-cart-empty","true")},1E3))};return Pa}(),sa=function(){function Pa(tb,nb){try{return tb.replace(new RegExp("(\\b)("+
nb.join("|").replace(/\+|\*|\(|\)\[/g,"")+")(\\b)","ig"),"$1\x3cstrong\x3e$2\x3c/strong\x3e$3")}catch(Nb){return tb}}var Ta=u("button",{class:"esri-header-inlineSearch-control",id:"esri-header-inlineSearch-control",aria:{expanded:!1,controls:"esri-header-inlineSearch-content"}});Ta.addEventListener("header:menu:open",function(tb){r(Ta,"header:inlineSearch:activated",{event:tb})});Ta.addEventListener("click",function(tb){r(Ta,"header:click:inlineSearch",{event:tb});r(Ta,"header:menu:toggle",{state:"menu",
target:ab,type:"inlineSearch",control:Ta,content:Za,event:tb});Na&&Na.focus()});var eb=u("button",{class:"esri-header-inlineSearch-close-button",id:"esri-header-inlineSearch-close-button",aria:{labelledby:"esri-header-inlineSearch-close-button"}},z({imgDef:t.md,imgClass:"esri-header-inlineSearch-dismiss-icon"}));eb.addEventListener("click",function(tb){r(Ta,"header:inlineSearch:deactivated",{event:tb});setTimeout(function(){Ta.focus()},0);r(Ta,"header:menu:toggle",{state:"menu",target:ab,type:"inlineSearch",
control:Ta,content:Za,event:tb})});var Na=u("input",{class:"esri-header-inlineSearch-input",id:"esri-header-inlineSearch-input"});Na.addEventListener("keyup",function(tb){return O.value=tb.target.value,O.value&&" "!==O.value?13===tb.keyCode&&O.value&&!O.isDisabled?window.location.href=O.action+"?q\x3d"+encodeURIComponent(O.value):void r(Ta,"header:search:typing",{search:O.value}):(O.isDisabled=!1,Sa.innerHTML="")});var Sa=u("div",{class:"esri-header-inlineSearch-suggestions",id:"esri-header-inlineSearch-suggestions",
aria:{expanded:!1,labelledby:"esri-header-inlineSearch-suggestions"}}),$a=u("div",{class:"esri-header-lineBreak esri-header-inlineSearch-lineBreak"}),gb=u("div",{class:"esri-header-lineBreak esri-header-inlineSearch-lineBreak lineBreak-right"}),Za=u("div",{class:"esri-header-inlineSearch-content",id:"esri-header-inlineSearch-content",aria:{expanded:!1,labelledby:"esri-header-inlineSearch-control"}},$a,Na,eb,Sa,gb),ab=u("div",{class:"esri-header-inlineSearch",aria:{expanded:!1}},Ta,Za);ab.addEventListener("header:inlineSearch:activated",
function(tb){ab.setAttribute("aria-expanded","true")});ab.addEventListener("header:inlineSearch:deactivated",function(tb){ab.setAttribute("aria-expanded","false");Sa.innerHTML="";Na.value=""});ab.addEventListener("header:search:populateSuggestions",function(tb){tb=tb.detail;(Sa.innerHTML="",O.isDisabled=tb.disabled,Array.isArray(tb))?ub(tb,O.value.split(" ")):tb.suggestions&&tb.suggestions.length&&yb(tb,O.value.split(" "))});var ub=function(tb,nb){var Nb=u("ul",{class:"esri-header-inlineSearch-simple-suggestion-list"});
tb.forEach(function(Tb){var $b=Tb.icon?u("img",{src:Tb.icon,class:"esri-header-inlineSearch-suggestion-icon",alt:""}):"",Mb=u("span");Mb.innerHTML=Pa(Tb.text,nb);Tb=u("li",{class:"esri-header-inlineSearch-suggestion"},Tb.href?u("a",{href:Tb.href},$b,Mb):u("span",{class:"inactive"},$b,Mb));Nb.appendChild(Tb);Tb=u("div",{class:"esri-header-inlineSearch-simple-suggestion-section"},Nb);Sa.appendChild(Tb)})},yb=function(tb,nb){var Nb=(tb.minIconWidth||"0")+"px";tb.suggestions.forEach(function(Tb,$b){var Mb=
Tb.header?u("p",{class:"esri-header-inlineSearch-suggestion-header"},Tb.header):u("p");$b=(Tb.header||0<$b)&&!Tb.hideHR?u("hr"):u("span");var Kb=u("ul",{class:"esri-header-inlineSearch-suggestion-list"}),kb=Tb.footer?u("a",{href:Tb.footer.href,class:"esri-header-inlineSearch-suggestion-footer"},Tb.footer.text):u("span");Tb.links.forEach(function(rb){var zb=u("span",{class:"esri-header-inlineSearch-suggestion-text"});zb.innerHTML=Pa(rb.text,nb);zb.appendChild(rb.secondary?u("div",{class:"esri-header-inlineSearch-suggestion-secondary-text"},
rb.secondary):u("span"));var xb=rb.icon?z({inlineImg:!0,alt:"",imgDef:"searchIcon"===rb.icon?B.sm:rb.icon,imgWidth:rb.iconSize||"22",imgHeight:"searchIcon"===rb.icon?"15px":rb.iconSize,imgClass:"esri-header-inlineSearch-suggestion-icon",wrapperClass:"esri-header-inlineSearch-suggestion-icon-wrapper"}):u("span",{class:"esri-header-inlineSearch-suggestion-icon-wrapper",style:"min-width: "+Nb+";"});xb.style.minWidth=Nb;rb.htmlIcon&&(xb.innerHTML=rb.htmlIcon);rb=u("li",{class:"esri-header-inlineSearch-suggestion"},
rb.href?u("a",{href:rb.href},xb,zb):u("span",{class:"inactive"},xb,zb));Kb.appendChild(rb)});Tb=u("div",{class:"esri-header-inlineSearch-suggestion-section"},Mb,$b,Kb,kb);Sa.appendChild(Tb)});Sa.appendChild(u("div",{class:"esri-header-inlineSearch-suggestions-bottom-padding"}))};return ab.addEventListener("header:update:inlineSearch",function(tb){if((tb=tb.detail)&&tb.inline)if(ab.classList.remove("hidden"),tb.hide)Ta.setAttribute("tabindex","-1");else{u(Ta,{aria:{label:tb.label}});z({imgDef:B.md,
imgClass:"esri-header-inlineSearch-image",id:"esri-header-inlineSearch-image",alt:"",$targetElm:Ta});O.image=B.md;O.action=tb.dialog&&tb.dialog.action;var nb=tb.dialog&&tb.dialog.queryLabel||"Search";Na.setAttribute("placeholder",nb);Na.setAttribute("aria-label",nb);eb.setAttribute("aria-label",tb.dialog&&tb.dialog.cancelLabel||"");tb.dialog&&(tb.dialog.prefix="esri-header-search-dialog")}else ab.classList.add("hidden")}),ab}(),ja=function(){var Pa=u("div",{class:R}),Ta=u("button",{class:R+"-control",
id:R+"-control",aria:{controls:R+"-menu",expanded:!1,haspopup:!0}});Ta.addEventListener("click",function($a){r(Ta,"header:click:notifications",{event:$a});r(Ta,"header:menu:toggle",{notifications:!0,control:Ta,content:Sa,state:"menu",target:Pa,type:"notifications-toggle"})});var eb=u("button",{class:R+"-dismiss-all"});eb.addEventListener("click",function($a){r(Ta,"header:click:notifications:dismiss",X)});var Na=u("ul",{class:R+"-messages"}),Sa=u("div",{class:R+"-menu",id:R+"-menu",aria:{expanded:!1,
hidden:!0}},Na);return Pa.addEventListener("header:update:notifications",function($a){var gb=$a.detail;if(gb){Pa.classList.remove("hidden");X=(gb.messages||[]).map(function(ab){return ab.id});$a=z({imgDef:q.md,imgClass:R+"-image",id:R+"-image"});if(gb.messages&&0<gb.messages.length){n(eb,gb.dismissAllLabel);var Za=u("span",{class:R+"-badge"},""+gb.messages.length);Ta.setAttribute("aria-label",gb.label||"Notifications");n(Ta,$a,Za);n.apply(void 0,[Na].concat(h(gb.messages.map(function(ab){var ub=u("button",
{class:R+"-message-dismiss",aria:{label:gb.dismissLabel}},z({imgDef:t.sm,imgClass:R+"-dismiss-icon"}));return ub.addEventListener("click",function(yb){r(Ta,"header:click:notifications:dismiss",[ab.id])}),u("li",{class:R+"-message"},u("span",{class:R+"-message-text"},ab.text,u("span",{class:R+"-message-date"},ab.date)),ub)}))));n(Sa,Na,eb)}else n(Ta,$a),$a=z({imgDef:gb.emptyMessage.image.path,imgClass:R+"-empty-image",viewBox:gb.emptyMessage.image.viewBox}),Za=u("p",{class:R+"-empty-text"},gb.emptyMessage.text),
$a=u("div",{class:R+"-empty"},$a,Za),n(Sa,$a);n(Pa,Ta,Sa)}else Pa.classList.add("hidden")}),Pa}(),wa=b(),Ja=u("div",{class:"esri-header-client"},la),va=u("div",{class:"esri-header-lineBreak"}),ra=u("div",{class:"esri-header -"+(U.theme||"web")+" "+(U.collapseMenus?"-always-hamburger":"")},fa,da,ha,ca,S,ea,sa,va,ma,ja,wa,Ja),Ba=u("div",{class:"esri-header-canvas"},Y,{class:"esri-header-wrap"},ra);v(Ba);Ba.addEventListener("header:update",function(Pa){Pa=Pa.detail;Pa.brand&&(Pa.brand.root=!0);r(fa,
"header:update:brand",Pa.brand);r(da,"header:update:brand",Pa.brand);r(ca,"header:update:inlineTitle",Pa.brand);r(ea,"header:update:search",Pa.search);r(sa,"header:update:inlineSearch",Pa.search);r(Ja.lastChild,"header:update:account",Pa.account);r(wa,"header:update:apps",Pa.apps);r(ja,"header:update:notifications",Pa.notifications);r(ma,"header:update:cart",Pa.cart);Pa.menus&&(Pa.menus.noBrand=!Pa.brand,r(S,"header:update:menus",Pa.menus),r(ha,"header:update:menus",Pa.menus));Pa.collapseMenus&&(r(S,
"header:update:collapseMenus",Pa.collapseMenus),r(ha,"header:update:collapseMenus",Pa.collapseMenus));Pa.brand&&Pa.brand.topStripe&&(Ba.style.marginTop="3px");Pa.notifications||Pa.apps||Pa.account||va.classList.add("esri-header-lineBreak-hidden");Ba.ownerDocument.defaultView.addEventListener("keydown",function(Ta){27===Ta.keyCode&&r(Ba,"header:menu:close")})});Ba.addEventListener("header:search:typing",function(Pa){r(sa,"header::search:typing",Pa.detail.search)});Ba.addEventListener("header:search:update:suggestions",
function(Pa){r(sa,"header:search:populateSuggestions",Pa.detail)});Ba.addEventListener("header:title:submit",function(Pa){r(sa,"header::title:save",Pa.detail.title)});Ba.addEventListener("header:apps:reorder",function(Pa){r(wa,"header::apps:reorder",Pa.detail.icons)});Ba.addEventListener("header:menu:toggle",function(Pa){Pa=Pa.detail;var Ta="true"!==Pa.control.getAttribute("aria-expanded")?"header:menu:open":"header:menu:close";r(Pa.control,Ta,Pa)});var Ha=null,ya=null,qa=null,oa=null,Aa=null,Ka=
null,Wa=null;return Ba.addEventListener("header:menu:open",function(Pa){Pa=Pa.detail;var Ta=Pa.control.closest(".esri-header-menus");Ta=Ta&&Ta.classList.contains("-mobile");Ta="menu-toggle"===Pa.type&&Q.matches||Ta;var eb=la===Pa.target&&V.matches;u(Pa.control,{aria:{expanded:!0}});u(Pa.content,{aria:{expanded:!0,hidden:!1}});oa&&oa.control!==Pa.control&&r(oa.control,"header:menu:close",oa);"menu-toggle"===Pa.type&&(oa=Pa);ea===Pa.target||sa===Pa.target?ya=Pa:ya&&(r(ea,"header:menu:close",ya),ya=
null);S===Pa.target||ha===Pa.target?qa=Pa:!qa||eb||Ta||(r(S,"header:menu:close",qa),r(ha,"header:menu:close",qa),qa=null);ca===Pa.target?Ka=Pa:Ka&&(r(ca,"header:menu:close",Ka),Ka=null);la===Pa.target?Ha=Pa:Ha&&(r(la,"header:menu:close",Ha),Ha=null);wa===Pa.target?Aa=Pa:Aa&&(r(wa,"header:menu:close",Aa),Aa=null);ja===Pa.target?Wa=Pa:Wa&&(r(ja,"header:menu:close",Wa),Wa=null);u(Y,{data:{open:!0,state:Pa.state}});u(Ba.ownerDocument.documentElement,{data:{"header-is-open":!0}})}),Ba.addEventListener("header:menu:close",
function(Pa){if(Pa=Pa.detail||ya||Ka||Ha||Aa||Wa||qa||oa){u(Pa.control,{aria:{expanded:!1}});u(Pa.content,{aria:{expanded:!1,hidden:!0}});var Ta=null!==Pa.control.closest(".-always-hamburger");Ta=!Q.matches&&!Ta||"menu-close"!==Pa.type&&"account-close"!==Pa.type;Ka&&Ka.control===Pa.control&&r(Ka.content,"header:inlineTitle:deactivated",Pa);ya&&ya.control===Pa.control&&r(ya.content.lastChild,"reset");ya&&ya.target===sa&&("inlineSearch"===Pa.type||V.matches)&&(qa||r(ya.content,"header:inlineSearch:deactivated",
Pa));Ta&&(u(Y,{data:{open:!1}}),Ba.ownerDocument.documentElement.removeAttribute("data-header-is-open"))}}),Ba.addEventListener("header:inlineSearch:activated",function(Pa){S.querySelector(".esri-header-menus-menu").classList.add("hidden");va.classList.add("hidden");ha.querySelector(".esri-header-menus-toggle").classList.add("hidden");V&&da.classList.add("hidden")}),Ba.addEventListener("header:inlineSearch:deactivated",function(Pa){S.querySelector(".esri-header-menus-menu").classList.remove("hidden");
va.classList.remove("hidden");ha.querySelector(".esri-header-menus-toggle").classList.remove("hidden");da.classList.remove("hidden")}),Ba.addEventListener("header:inlineTitle:activated",function(Pa){V.matches||(S.querySelector(".esri-header-menus-content").classList.add("hidden"),ha.querySelector(".esri-header-menus-toggle").classList.add("hidden"))}),Ba.addEventListener("header:inlineTitle:deactivated",function(Pa){Q.matches||S.querySelector(".esri-header-menus-content").classList.remove("hidden")}),
Ba.addEventListener("DOMNodeInserted",function Ta(){function eb(){var ub=$a.documentElement.clientHeight,yb=$a.documentElement.scrollHeight,tb=ub<yb?window.innerWidth:$a.documentElement.clientWidth;ab=getComputedStyle($a.documentElement).overflowY.replace("visible",ub<yb?"scroll":"visible");n(Za,":root{--esri-vw:"+tb+"px;--esri-vh:"+ub+"px}[data-header-is-open]{width:"+tb+"px;height:"+ub+"px;overflow-y:"+ab+"}");(Q=gb.matchMedia("(max-width: 1023px)")).matches?(S.querySelector(".esri-header-menus-content").classList.add("hidden"),
ha.querySelector(".esri-header-menus-content").classList.remove("hidden")):(S.querySelector(".esri-header-menus-content").classList.remove("hidden"),ha.querySelector(".esri-header-menus-content").classList.add("hidden"))}function Na(){V.matches?(r(Ba,"header:breakpoint:s"),ha.lastChild.appendChild(la),ja.classList.add("hidden"),wa.classList.add("hidden")):(r(Ba,"header:breakpoint:not:s"),Ja.appendChild(la),ja.classList.remove("hidden"),wa.classList.remove("hidden"))}function Sa(){Q.matches?r(Ba,"header:breakpoint:sm"):
(r(Ba,"header:breakpoint:not:sm"),r(Ba,"header:menu:close"))}var $a=Ba.ownerDocument,gb=$a.defaultView,Za=u("style"),ab=void 0;Ba.parentNode&&(Ba.removeEventListener("DOMNodeInserted",Ta),r(Ba,"header:update",U),u($a.head,Za),gb.addEventListener("orientationchange",eb),gb.addEventListener("resize",eb),V=gb.matchMedia("(max-width: 768px)"),Q=gb.matchMedia("(max-width: 1023px)"),V.addListener(Na),Q.addListener(Sa),Na(),Sa(),eb())}),Ba}function c(U,V){function Q(ha){ha.preventDefault();u(la,{aria:{expanded:!1}})}
var Y=u("button",{class:V+"-language-control",title:"Current language, "+U.buttonLabel},""+U.buttonLabel),fa=u("div",{class:V+"-language"},Y);Y.addEventListener("click",function(ha){ha.preventDefault();u(la,{aria:{expanded:!0}})});U.prefix=V+"-language-dialog";var da=function(ha){var S=u.apply(void 0,["select",{class:ha.prefix+"-choice",autofocus:"",aria:{label:ha.optionsLabel}}].concat(h(ha.options.map(function(ea){var ma=document.createElement("option");return ma.value=ea.value,ma.innerHTML=ea.label,
ma}))));ha=u("form",{class:ha.prefix,aria:{labelledby:ha.prefix+"-message",describedby:"dialog-description"},role:"dialog",tabindex:"-1"},u("p",{class:ha.prefix+"-message",id:ha.prefix+"-message"},u("strong",ha.greetingLabel)," ",ha.messageLabel),S,u("button",{class:ha.prefix+"-submit",type:"submit",aria:{label:ha.submitLabel+" "+ha.optionsLabel}},ha.submitLabel));return ha.addEventListener("submit",function(ea){ea.preventDefault();window.location.href=S.value}),ha}(U),ca=u("button",{class:V+"-language-dialog-close",
id:"dialog-description","aria-label":U.closeLabel},z({imgDef:t.md,imgClass:V+"-language-dialog-close-image"}));ca.addEventListener("click",Q);u(da,ca);var la=u("div",{class:V+"-language-dialog-barrier",aria:{expanded:!1}},da);return Y.addEventListener("click",function(){r(Y,"footer:click:language",U)}),fa.addEventListener("footer:update:language",function(ha){Y.innerHTML=""+U.buttonLabel;fa.ownerDocument.body.appendChild(la);fa.ownerDocument.defaultView.addEventListener("keydown",function(){27===
(0<arguments.length&&void 0!==arguments[0]?arguments[0]:event).keyCode&&Q(event)})}),fa}function d(U,V){function Q(){ca!==da.matches&&(ca=da.matches,la.forEach(function(ha){ca?function(S){var ea="true"!==S.nextElementSibling.getAttribute("aria-hidden");u(S,{tabindex:0,role:"button",aria:{expanded:!ea,haspopup:!ea}});S.addEventListener("click",Y);S.addEventListener("keypress",fa);u(S.nextElementSibling,{aria:{hidden:!0}})}(ha.firstChild):function(S){S.removeAttribute("aria-controls");S.removeAttribute("aria-expanded");
S.removeAttribute("aria-haspopup");S.removeAttribute("role");S.removeAttribute("tabindex");S.addEventListener("click",Y);S.addEventListener("keypress",fa);S.nextElementSibling.removeAttribute("aria-hidden")}(ha.firstChild)}))}function Y(ha){ha=ha.currentTarget;var S=ha.nextElementSibling,ea="true"!==S.getAttribute("aria-hidden");u(ha,{aria:{expanded:!ea,haspopup:!ea}});u(S,{aria:{hidden:ea}});u(ha,ea?{aria:{controls:0}}:{aria:{controls:S.id}})}function fa(ha){13!==ha.keyCode&&32!==ha.keyCode||(ha.preventDefault(),
r(ha.currentTarget,"click"))}var da=matchMedia("(max-width: 719px)"),ca=!1;da.addListener(Q);var la=U.menu.map(function(ha,S){return u("li",{class:V+"-menu-item",id:V+"-menu-link--"+S},u("span",{class:V+"-menu-link",id:V+"-heading-"+S},ha.label),u("div",{class:V+"-menu--sub",id:V+"-menu--sub--"+S,aria:{labelledby:V+"-menu-link--"+S}},u.apply(void 0,["ul",{class:V+"-menu-list--sub"}].concat(h(ha.menu.map(function(ea){return u("li",{class:V+"-menu-item--sub"},u("a",{class:V+"-menu-link--sub",href:ea.href,
"aria-labelledby":V+"-menu--sub--"+S},ea.label))}))))))});U=u("nav",{class:V+"-menu",aria:{label:U.label}},u.apply(void 0,["ul",{class:V+"-menu-list"}].concat(h(la))));return Q(),U}function f(U){var V=U.prefix||"esri-footer",Q=function(S,ea){if(S)return u("div",{class:ea+"-brand"},u("a",{class:ea+"-brand-link",href:S.href,aria:{label:S.label}},z({imgDef:S.path,imgClass:ea+"-brand-image"})))}(U.brand,V),Y=function(S,ea){return u("div",{class:ea+"-info",aria:{label:S.label}},u.apply(void 0,["ul",{class:ea+
"-info-list"}].concat(h(S.menu.map(function(ma,sa){return u("li",{class:ea+"-info-item",id:ea+"-info-link--"+sa},u("a",{class:ea+"-info-link",href:ma.href},ma.label))})))))}(U.info,V),fa=U.language?c(U.language,V):u("div",{class:"esri-footer-language"}),da=d(U.menu,V),ca=function(S,ea){var ma=document.createDocumentFragment();return S.menu.forEach(function(sa){var ja=sa.platform||sa.label.toLowerCase().replace(" ","-");u(ma,u("a",{class:ea+"-social-item "+ea+"-social-link -"+ja,href:sa.href,aria:{label:sa.label},
target:"_blank",rel:"noopener"},z({imgDef:sa.image.path,imgClass:ea+"-social-image",alt:"",imgWidth:30,imgHeight:30,viewBox:sa.image.viewBox})))}),u("div",{class:ea+"-social"},u("nav",{class:ea+"-social-nav",aria:{label:S.label||"Social Media"}},ma))}(U.social,V),la=function(S){var ea=S.breadcrumbHomeURL,ma=S.breadcrumbHomeLabel;if(S.showBreadcrumb){var sa=document.createDocumentFragment(),ja=S.breadcrumbs||[];return ja.forEach(function(wa,Ja){u(sa,u("li",{class:"esri-footer-breadcrumb--items"},"/",
Ja===ja.length-1?u("p",{href:wa.href,class:"esri-footer-breadcrumb--items-current"},""+wa.label):u("a",{href:wa.href,class:"esri-footer-breadcrumb--items-link"},""+wa.label)))}),u("div",{class:"esri-footer-breadcrumb"},u("a",{href:""+ea,class:"esri-footer-breadcrumb--pin"},ma),u("ul",{class:"esri-footer-breadcrumb--list"},sa))}}(U),ha=u("footer",{class:V+" "+(U.hideMenus?"skinny-footer":"")},u("div",{class:V+"-section--0"},la),u("div",{class:V+"--wrapper"},u("div",{class:V+"-section--1 "+(U.hideMenus?
"hidden":"")},Q,ca),u("div",{class:V+"-section--2 "+(U.hideMenus?"hidden":"")},da),u("div",{class:V+"-section--3"},fa,Y)));return ha.addEventListener("DOMNodeInserted",function ea(){ha.removeEventListener("DOMNodeInserted",ea);ha.addEventListener("focusin",function(){var ma=ha.ownerDocument.documentElement.scrollHeight-ha.scrollHeight;ma>ha.ownerDocument.defaultView.pageYOffset&&ha.ownerDocument.defaultView.scrollTo(0,ma)});U.hideMenus&&(document.querySelector(".esri-footer").setAttribute("data-minimal",
!0),document.querySelector(".esri-footer-barrier").classList.add("skinny-footer"));r(ha,"footer:update",U)}),v(ha),ha.addEventListener("footer:update",function(ea){function ma(){u(ha,{data:{hidden:0>window.pageYOffset}})}ea=ea.detail;ea.brand&&r(Q,"footer:update:brand",ea.brand);ea.info&&r(Y,"footer:update:info",ea.info);ea.language&&r(fa,"footer:update:language",ea.language);ea.menu&&r(da,"footer:update:menu",ea.menu);ea.social&&r(ca,"footer:update:social",ea.social);ha.ownerDocument.defaultView.addEventListener("scroll",
ma);ma()}),ha}function l(U){var V=U.targetElm;U=U.menuData;document.querySelector(V).classList.add("esri-header-barrier");U=a(U.header);document.querySelector(V).appendChild(U);window.esriHeader.node=U}function m(U){var V=U.targetElm;U=U.menuData;document.querySelector(V).classList.add("esri-footer-barrier");U=f(U.footer);document.querySelector(V).appendChild(U);window.esriFooter.node=U}Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||
Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(U){var V=this;if(!document.documentElement.contains(this))return null;do{if(V.matches(U))return V;V=V.parentElement}while(null!==V);return null});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(U){return typeof U}:function(U){return U&&"function"==typeof Symbol&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},q={md:["M18 16v-5.087A5.91 5.91 0 0 0 13.59 5.2a2 2 0 1 0-3.18 0A5.91 5.91 0 0 0 6 10.913V16a3 3 0 0 1-3 3v1h18v-1a3 3 0 0 1-3-3zM12 3a1 1 0 1 1-1 1 1.001 1.001 0 0 1 1-1zM5.643 19A3.992 3.992 0 0 0 7 16v-5.087A4.919 4.919 0 0 1 11.913 6h.174A4.919 4.919 0 0 1 17 10.913V16a3.992 3.992 0 0 0 1.357 3zM13 21h1a2 2 0 0 1-4 0h1a1 1 0 0 0 2 0z"]},
t={sm:["M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z"],md:["M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z"],lg:["M16.707 16l10.607 10.606-.708.707L16 16.707 5.394 27.313l-.708-.707L15.293 16 4.686 5.394l.708-.707L16 15.293 26.606 4.687l.708.707z"]},w={sm:["M2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637L5.5 12z"],md:["M4.581 13.276l.637-.636 3.288 3.098 10.073-9.92.637.637L8.506 17.01z"],
lg:["M24 4.685l-16.327 17.315-7.673-9.054.761-.648 6.95 8.203 15.561-16.501.728.685z"]},A={md:["M11.5 18.05a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zM12 20h-1v-1h1zM3.5 2.05A1.45 1.45 0 1 0 4.95 3.5 1.45 1.45 0 0 0 3.5 2.05zM4 4H3V3h1zm7.5 6.05a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zM12 12h-1v-1h1zm-8.5-1.95a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zM4 12H3v-1h1zm-.5 6.05a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zM4 20H3v-1h1zM19.5 4.95a1.45 1.45 0 1 0-1.45-1.45 1.45 1.45 0 0 0 1.45 1.45zM19 3h1v1h-1zm.5 7.05a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zM20 12h-1v-1h1zm-8.5-9.95a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zM12 4h-1V3h1zm7.5 14.05a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zM20 20h-1v-1h1z"]},
x={md:["M21 6H3V5h18zm0 6H3v1h18zm0 7H3v1h18z"]},y={sm:["M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"]},B={sm:["M9.85 9.153a5 5 0 1 0-.69.69l4.631 4.631.69-.69zm-1.02-.326A3.973 3.973 0 0 1 6 10a4.002 4.002 0 1 1 2.83-1.172z"],md:["M21.995 21.288l-6.855-6.855a7.517 7.517 0 1 0-.707.707l6.855 6.855zm-17.092-7.19a6.501 6.501 0 1 1 9.6-.45l-.854.855a6.501 6.501 0 0 1-8.746-.405z"]},
C={sm:["M5.35 14.5a.85.85 0 1 1-.85-.85.851.851 0 0 1 .85.85zm7.15-.85a.85.85 0 1 0 .85.85.851.851 0 0 0-.85-.85zM15.109 4l-1.19 5.99-9.213 1.024-.727.643a.197.197 0 0 0-.054.217.195.195 0 0 0 .183.126H13v1H4.108a1.196 1.196 0 0 1-.792-2.092l.65-.574-.916-7.126a.249.249 0 0 0-.244-.217L.177 2.966l.046-.898 2.609.02a1.167 1.167 0 0 1 1.1 1L4.065 4zM13.89 5H4.208l.718 4.982 8.155-.905z"],md:["M19.93 19.07A1.497 1.497 0 0 0 18.5 18H6.416a.5.5 0 0 1-.422-.768l.793-1.25 14.11-1.01L23.141 6H5.345L5.06 4.37a1.51 1.51 0 0 0-1.307-1.23L2.543 3H1.24l-.097.847 2.497.286a.502.502 0 0 1 .435.41l1.9 10.853-.826 1.301A1.497 1.497 0 0 0 6 18.94v.153a1.5 1.5 0 1 0 1 0V19h11.5a.497.497 0 0 1 .356.15 1.502 1.502 0 1 0 1.074-.08zM5.52 7h16.34l-1.757 7.027-13.188.942zM7.1 20.2v.6a.3.3 0 0 1-.3.3h-.6a.3.3 0 0 1-.3-.3v-.6a.3.3 0 0 1 .3-.3h.6a.3.3 0 0 1 .3.3zm13 .6a.3.3 0 0 1-.3.3h-.6a.3.3 0 0 1-.3-.3v-.6a.3.3 0 0 1 .3-.3h.6a.3.3 0 0 1 .3.3z"],
lg:["M27.964 25.259a1.591 1.591 0 0 0-.428-.794A1.574 1.574 0 0 0 26.415 24H6.54a.625.625 0 0 1-.476-1.032 142.875 142.875 0 0 0 1.692-1.992l19.161-2.017L29.11 8H6.72l-.14-1.375a2.56 2.56 0 0 0-2.186-2.277L4 4.29h-.001L1.979 4H1v1h.904l2.347.338a1.56 1.56 0 0 1 1.333 1.389l1.398 13.62c-.171.205-.598.71-1.677 1.97A1.626 1.626 0 0 0 6.541 25h19.874a.58.58 0 0 1 .198.04 2.015 2.015 0 1 0 1.351.219zM27.89 9l-1.808 9.041-18.136 1.91L6.823 9zm.21 18.3a.8.8 0 0 1-.8.8h-.6a.8.8 0 0 1-.8-.8v-.6a.8.8 0 0 1 .8-.8h.6a.8.8 0 0 1 .8.8zM6 27a2 2 0 1 0 2-2 2.002 2.002 0 0 0-2 2zm.9-.3a.8.8 0 0 1 .8-.8h.6a.8.8 0 0 1 .8.8v.6a.8.8 0 0 1-.8.8h-.6a.8.8 0 0 1-.8-.8z"]},
D="esri-header-inline-title",F={},E="esri-header-menus",G="esri-header-search",O={},H,K,P=(function(U){U.exports=function(){function V(Va,ib){if(!Va||!Va.nodeType||1!==Va.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(Va);this.el=Va;this.options=ib=ra({},ib);Va[kb]=this;var lb={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(Va.nodeName)?"li":"\x3e*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",
dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(Ub,nc){Ub.setData("Text",nc.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==V.supportPointer},pb;for(pb in lb)pb in ib||(ib[pb]=lb[pb]);for(var Jb in bd(ib),this)"_"===Jb.charAt(0)&&"function"==typeof this[Jb]&&(this[Jb]=this[Jb].bind(this));
this.nativeDraggable=!ib.forceFallback&&ac;fa(Va,"mousedown",this._onTapStart);fa(Va,"touchstart",this._onTapStart);ib.supportPointer&&fa(Va,"pointerdown",this._onTapStart);this.nativeDraggable&&(fa(Va,"dragover",this),fa(Va,"dragenter",this));Pc.push(this._onDragOver);ib.store&&this.sort(ib.store.get(this))}function Q(Va,ib){"clone"!==Va.lastPullMode&&(ib=!0);Aa&&Aa.state!==ib&&(la(Aa,"display",ib?"none":""),ib||Aa.state&&(Va.options.group.revertClone?(Ka.insertBefore(Aa,Wa),Va._animate(ya,Aa)):
Ka.insertBefore(Aa,ya)),Aa.state=ib)}function Y(Va,ib,lb){if(Va){lb=lb||zb;do if("\x3e*"===ib&&Va.parentNode===lb||Ja(Va,ib))return Va;while(void 0,Va=(Jb=(pb=Va).host)&&Jb.nodeType?Jb:pb.parentNode)}var pb,Jb;return null}function fa(Va,ib,lb){Va.addEventListener(ib,lb,Cb)}function da(Va,ib,lb){Va.removeEventListener(ib,lb,Cb)}function ca(Va,ib,lb){if(Va)if(Va.classList)Va.classList[lb?"add":"remove"](ib);else{var pb=(" "+Va.className+" ").replace(Mb," ").replace(" "+ib+" "," ");Va.className=(pb+
(lb?" "+ib:"")).replace(Mb," ")}}function la(Va,ib,lb){var pb=Va&&Va.style;if(pb){if(void 0===lb)return zb.defaultView&&zb.defaultView.getComputedStyle?lb=zb.defaultView.getComputedStyle(Va,""):Va.currentStyle&&(lb=Va.currentStyle),void 0===ib?lb:lb[ib];ib in pb||(ib="-webkit-"+ib);pb[ib]=lb+("string"==typeof lb?"":"px")}}function ha(Va,ib,lb){if(Va){Va=Va.getElementsByTagName(ib);ib=0;var pb=Va.length;if(lb)for(;ib<pb;ib++)lb(Va[ib],ib);return Va}return[]}function S(Va,ib,lb,pb,Jb,Ub,nc,rc){Va=Va||
ib[kb];var Rb=zb.createEvent("Event"),pc=Va.options,sc="on"+lb.charAt(0).toUpperCase()+lb.substr(1);Rb.initEvent(lb,!0,!0);Rb.to=Jb||ib;Rb.from=Ub||ib;Rb.item=pb||ib;Rb.clone=Aa;Rb.oldIndex=nc;Rb.newIndex=rc;ib.dispatchEvent(Rb);pc[sc]&&pc[sc].call(Va,Rb)}function ea(Va,ib,lb,pb,Jb,Ub,nc,rc){var Rb,pc,sc=Va[kb],Gc=sc.options.onMove;return(Rb=zb.createEvent("Event")).initEvent("move",!0,!0),Rb.to=ib,Rb.from=Va,Rb.dragged=lb,Rb.draggedRect=pb,Rb.related=Jb||ib,Rb.relatedRect=Ub||ib.getBoundingClientRect(),
Rb.willInsertAfter=rc,Va.dispatchEvent(Rb),Gc&&(pc=Gc.call(sc,Rb,nc)),pc}function ma(Va){Va.draggable=!1}function sa(){zc=!1}function ja(Va){Va=Va.tagName+Va.className+Va.src+Va.href+Va.textContent;for(var ib=Va.length,lb=0;ib--;)lb+=Va.charCodeAt(ib);return lb.toString(36)}function wa(Va,ib){var lb=0;if(!Va||!Va.parentNode)return-1;for(;Va=Va&&Va.previousElementSibling;)"TEMPLATE"===Va.nodeName.toUpperCase()||"\x3e*"!==ib&&!Ja(Va,ib)||lb++;return lb}function Ja(Va,ib){if(Va){var lb=(ib=ib.split(".")).shift().toUpperCase(),
pb=new RegExp("\\s("+ib.join("|")+")(?\x3d\\s)","g");return!(""!==lb&&Va.nodeName.toUpperCase()!=lb||ib.length&&((" "+Va.className+" ").match(pb)||[]).length!=ib.length)}return!1}function va(Va,ib){var lb,pb;return function(){void 0===lb&&(lb=arguments,pb=this,ua(function(){1===lb.length?Va.call(pb,lb[0]):Va.apply(pb,lb);lb=void 0},ib))}}function ra(Va,ib){if(Va&&ib)for(var lb in ib)ib.hasOwnProperty(lb)&&(Va[lb]=ib[lb]);return Va}function Ba(Va){return hb&&hb.dom?hb.dom(Va).cloneNode(!0):Oa?Oa(Va).clone(!0)[0]:
Va.cloneNode(!0)}function Ha(Va){return ua(Va,0)}if("undefined"==typeof window||!window.document)return function(){throw Error("Sortable.js requires a window with a document");};var ya,qa,oa,Aa,Ka,Wa,Pa,Ta,eb,Na,Sa,$a,gb,Za,ab,ub,yb,tb,nb,Nb,Tb,$b={},Mb=/\s+/g,Kb=/left|right|inline/,kb="Sortable"+(new Date).getTime(),rb=window,zb=rb.document,xb=rb.parseInt,ua=rb.setTimeout,Oa=rb.jQuery||rb.Zepto,hb=rb.Polymer,Cb=!1,Db=!1,ac="draggable"in zb.createElement("div"),kc=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&
((Tb=zb.createElement("x")).style.cssText="pointer-events:auto","auto"===Tb.style.pointerEvents),zc=!1,Zb=Math.abs,Qc=Math.min,fc=[],Pc=[],jd=va(function(Va,ib,lb){if(lb&&ib.scroll){var pb,Jb,Ub,nc,rc,Rb,pc=lb[kb],sc=ib.scrollSensitivity,Gc=ib.scrollSpeed,Rc=Va.clientX,tc=Va.clientY,$c=window.innerWidth,qd=window.innerHeight;if(eb!==lb&&(Ta=ib.scroll,eb=lb,Na=ib.scrollFn,!0===Ta)){Ta=lb;do if(Ta.offsetWidth<Ta.scrollWidth||Ta.offsetHeight<Ta.scrollHeight)break;while(Ta=Ta.parentNode)}Ta&&(Jb=(pb=
Ta).getBoundingClientRect(),Ub=(Zb(Jb.right-Rc)<=sc)-(Zb(Jb.left-Rc)<=sc),nc=(Zb(Jb.bottom-tc)<=sc)-(Zb(Jb.top-tc)<=sc));Ub||nc||(nc=(qd-tc<=sc)-(tc<=sc),((Ub=($c-Rc<=sc)-(Rc<=sc))||nc)&&(pb=rb));$b.vx===Ub&&$b.vy===nc&&$b.el===pb||($b.el=pb,$b.vx=Ub,$b.vy=nc,clearInterval($b.pid),pb&&($b.pid=setInterval(function(){if(Rb=nc?nc*Gc:0,rc=Ub?Ub*Gc:0,"function"==typeof Na)return Na.call(pc,rc,Rb,Va);pb===rb?rb.scrollTo(rb.pageXOffset+rc,rb.pageYOffset+Rb):(pb.scrollTop+=Rb,pb.scrollLeft+=rc)},24)))}},
30),bd=function(Va){function ib(Jb,Ub){return void 0!==Jb&&!0!==Jb||(Jb=lb.name),"function"==typeof Jb?Jb:function(nc,rc){nc=rc.options.group.name;return Ub?Jb:Jb&&(Jb.join?-1<Jb.indexOf(nc):nc==Jb)}}var lb={},pb=Va.group;pb&&"object"==(void 0===pb?"undefined":k(pb))||(pb={name:pb});lb.name=pb.name;lb.checkPull=ib(pb.pull,!0);lb.checkPut=ib(pb.put);lb.revertClone=pb.revertClone;Va.group=lb};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Cb={capture:Db=!1,
passive:Db}}}))}catch(Va){}return V.prototype={constructor:V,_onTapStart:function(Va){var ib,lb=this,pb=this.el,Jb=this.options,Ub=Jb.preventOnFilter,nc=Va.type,rc=Va.touches&&Va.touches[0],Rb=(rc||Va).target,pc=Va.target.shadowRoot&&Va.path&&Va.path[0]||Rb,sc=Jb.filter;if(function(Gc){Gc=Gc.getElementsByTagName("input");for(var Rc=Gc.length;Rc--;){var tc=Gc[Rc];tc.checked&&fc.push(tc)}}(pb),!(ya||/mousedown|pointerdown/.test(nc)&&0!==Va.button||Jb.disabled||pc.isContentEditable)&&(Rb=Y(Rb,Jb.draggable,
pb))&&Pa!==Rb){if(ib=wa(Rb,Jb.draggable),"function"==typeof sc){if(sc.call(this,Va,Rb,this))return S(lb,pc,"filter",Rb,pb,pb,ib),void(Ub&&Va.preventDefault())}else if(sc=sc&&sc.split(",").some(function(Gc){if(Gc=Y(pc,Gc.trim(),pb))return S(lb,Gc,"filter",Rb,pb,pb,ib),!0}))return void(Ub&&Va.preventDefault());Jb.handle&&!Y(pc,Jb.handle,pb)||this._prepareDragStart(Va,rc,Rb,ib)}},_prepareDragStart:function(Va,ib,lb,pb){var Jb,Ub=this,nc=Ub.el,rc=Ub.options,Rb=nc.ownerDocument;lb&&!ya&&lb.parentNode===
nc&&(tb=Va,Ka=nc,qa=(ya=lb).parentNode,Wa=ya.nextSibling,Pa=lb,ub=rc.group,Za=pb,this._lastX=(ib||Va).clientX,this._lastY=(ib||Va).clientY,ya.style["will-change"]="all",Jb=function(){Ub._disableDelayedDrag();ya.draggable=Ub.nativeDraggable;ca(ya,rc.chosenClass,!0);Ub._triggerDragStart(Va,ib);S(Ub,Ka,"choose",ya,Ka,Ka,Za)},rc.ignore.split(",").forEach(function(pc){ha(ya,pc.trim(),ma)}),fa(Rb,"mouseup",Ub._onDrop),fa(Rb,"touchend",Ub._onDrop),fa(Rb,"touchcancel",Ub._onDrop),fa(Rb,"selectstart",Ub),
rc.supportPointer&&fa(Rb,"pointercancel",Ub._onDrop),rc.delay?(fa(Rb,"mouseup",Ub._disableDelayedDrag),fa(Rb,"touchend",Ub._disableDelayedDrag),fa(Rb,"touchcancel",Ub._disableDelayedDrag),fa(Rb,"mousemove",Ub._disableDelayedDrag),fa(Rb,"touchmove",Ub._disableDelayedDrag),rc.supportPointer&&fa(Rb,"pointermove",Ub._disableDelayedDrag),Ub._dragStartTimer=ua(Jb,rc.delay)):Jb())},_disableDelayedDrag:function(){var Va=this.el.ownerDocument;clearTimeout(this._dragStartTimer);da(Va,"mouseup",this._disableDelayedDrag);
da(Va,"touchend",this._disableDelayedDrag);da(Va,"touchcancel",this._disableDelayedDrag);da(Va,"mousemove",this._disableDelayedDrag);da(Va,"touchmove",this._disableDelayedDrag);da(Va,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(Va,ib){(ib=ib||("touch"==Va.pointerType?Va:null))?(tb={target:ya,clientX:ib.clientX,clientY:ib.clientY},this._onDragStart(tb,"touch")):this.nativeDraggable?(fa(ya,"dragend",this),fa(Ka,"dragstart",this._onDragStart)):this._onDragStart(tb,!0);try{zb.selection?
Ha(function(){zb.selection.empty()}):window.getSelection().removeAllRanges()}catch(lb){}},_dragStarted:function(){if(Ka&&ya){var Va=this.options;ca(ya,Va.ghostClass,!0);ca(ya,Va.dragClass,!1);S(V.active=this,Ka,"start",ya,Ka,Ka,Za)}else this._nulling()},_emulateDragOver:function(){if(nb&&(this._lastX!==nb.clientX||this._lastY!==nb.clientY)){this._lastX=nb.clientX;this._lastY=nb.clientY;kc||la(oa,"display","none");var Va=zb.elementFromPoint(nb.clientX,nb.clientY),ib=Va,lb=Pc.length;if(Va&&Va.shadowRoot&&
(ib=Va=Va.shadowRoot.elementFromPoint(nb.clientX,nb.clientY)),ib){do{if(ib[kb]){for(;lb--;)Pc[lb]({clientX:nb.clientX,clientY:nb.clientY,target:Va,rootEl:ib});break}Va=ib}while(ib=ib.parentNode)}kc||la(oa,"display","")}},_onTouchMove:function(Va){if(tb){var ib=this.options,lb=ib.fallbackTolerance,pb=ib.fallbackOffset;ib=Va.touches?Va.touches[0]:Va;var Jb=ib.clientX-tb.clientX+pb.x;pb=ib.clientY-tb.clientY+pb.y;Jb=Va.touches?"translate3d("+Jb+"px,"+pb+"px,0)":"translate("+Jb+"px,"+pb+"px)";if(!V.active){if(lb&&
Qc(Zb(ib.clientX-this._lastX),Zb(ib.clientY-this._lastY))<lb)return;this._dragStarted()}this._appendGhost();Nb=!0;nb=ib;la(oa,"webkitTransform",Jb);la(oa,"mozTransform",Jb);la(oa,"msTransform",Jb);la(oa,"transform",Jb);Va.preventDefault()}},_appendGhost:function(){if(!oa){var Va=ya.getBoundingClientRect();var ib=la(ya);var lb=this.options;ca(oa=ya.cloneNode(!0),lb.ghostClass,!1);ca(oa,lb.fallbackClass,!0);ca(oa,lb.dragClass,!0);la(oa,"top",Va.top-xb(ib.marginTop,10));la(oa,"left",Va.left-xb(ib.marginLeft,
10));la(oa,"width",Va.width);la(oa,"height",Va.height);la(oa,"opacity","0.8");la(oa,"position","fixed");la(oa,"zIndex","100000");la(oa,"pointerEvents","none");lb.fallbackOnBody&&zb.body.appendChild(oa)||Ka.appendChild(oa);ib=oa.getBoundingClientRect();la(oa,"width",2*Va.width-ib.width);la(oa,"height",2*Va.height-ib.height)}},_onDragStart:function(Va,ib){var lb=this,pb=Va.dataTransfer,Jb=lb.options;lb._offUpEvents();ub.checkPull(lb,lb,ya,Va)&&((Aa=Ba(ya)).draggable=!1,Aa.style["will-change"]="",la(Aa,
"display","none"),ca(Aa,lb.options.chosenClass,!1),lb._cloneId=Ha(function(){Ka.insertBefore(Aa,ya);S(lb,Ka,"clone",ya)}));ca(ya,Jb.dragClass,!0);ib?("touch"===ib?(fa(zb,"touchmove",lb._onTouchMove),fa(zb,"touchend",lb._onDrop),fa(zb,"touchcancel",lb._onDrop),Jb.supportPointer&&(fa(zb,"pointermove",lb._onTouchMove),fa(zb,"pointerup",lb._onDrop))):(fa(zb,"mousemove",lb._onTouchMove),fa(zb,"mouseup",lb._onDrop)),lb._loopId=setInterval(lb._emulateDragOver,50)):(pb&&(pb.effectAllowed="move",Jb.setData&&
Jb.setData.call(lb,pb,ya)),fa(zb,"drop",lb),lb._dragStartId=Ha(lb._dragStarted))},_onDragOver:function(Va){var ib,lb=this.el;var pb=this.options;var Jb=pb.group;var Ub=V.active,nc=ub===Jb,rc=!1,Rb=pb.sort;if((void 0!==Va.preventDefault&&(Va.preventDefault(),pb.dragoverBubble||Va.stopPropagation()),!ya.animated&&(Nb=!0,Ub&&!pb.disabled&&(nc?Rb||(ib=!Ka.contains(ya)):yb===this||(Ub.lastPullMode=ub.checkPull(this,Ub,ya,Va))&&Jb.checkPut(this,Ub,ya,Va))&&(void 0===Va.rootEl||Va.rootEl===this.el)))&&(jd(Va,
pb,this.el),!zc)){if(pb=Y(Va.target,pb.draggable,lb),Jb=ya.getBoundingClientRect(),yb!==this&&(yb=this,rc=!0),ib)return Q(Ub,!0),qa=Ka,void(Aa||Wa?Ka.insertBefore(ya,Aa||Wa):Rb||Ka.appendChild(ya));!(ib=0===lb.children.length||lb.children[0]===oa)&&(ib=lb===Va.target)&&(ib=lb.lastElementChild.getBoundingClientRect(),ib=5<Va.clientY-(ib.top+ib.height)||5<Va.clientX-(ib.left+ib.width));if(ib){if(0!==lb.children.length&&lb.children[0]!==oa&&lb===Va.target&&(pb=lb.lastElementChild),pb){if(pb.animated)return;
var pc=pb.getBoundingClientRect()}Q(Ub,nc);!1!==ea(Ka,lb,ya,Jb,pb,pc,Va)&&(ya.contains(lb)||(lb.appendChild(ya),qa=lb),this._animate(Jb,ya),pb&&this._animate(pc,pb))}else if(pb&&!pb.animated&&pb!==ya&&void 0!==pb.parentNode[kb]){Sa!==pb&&($a=la(Sa=pb),gb=la(pb.parentNode));var sc=(pc=pb.getBoundingClientRect()).right-pc.left;ib=pc.bottom-pc.top;var Gc=Kb.test($a.cssFloat+$a.display)||"flex"==gb.display&&0===gb["flex-direction"].indexOf("row");Rb=pb.offsetWidth>ya.offsetWidth;var Rc=pb.offsetHeight>
ya.offsetHeight,tc=.5<(Gc?(Va.clientX-pc.left)/sc:(Va.clientY-pc.top)/ib);sc=pb.nextElementSibling;var $c=!1;Gc?(rc=ya.offsetTop,Gc=pb.offsetTop,$c=rc===Gc?pb.previousElementSibling===ya&&!Rb||tc&&Rb:pb.previousElementSibling===ya||ya.previousElementSibling===pb?.5<(Va.clientY-pc.top)/ib:rc<Gc):rc||($c=sc!==ya&&!Rc||tc&&Rc);Va=ea(Ka,lb,ya,Jb,pb,pc,Va,$c);!1!==Va&&(1!==Va&&-1!==Va||($c=1===Va),zc=!0,ua(sa,30),Q(Ub,nc),ya.contains(lb)||($c&&!sc?lb.appendChild(ya):pb.parentNode.insertBefore(ya,$c?sc:
pb)),qa=ya.parentNode,this._animate(Jb,ya),this._animate(pc,pb))}}},_animate:function(Va,ib){var lb=this.options.animation;if(lb){var pb=ib.getBoundingClientRect();1===Va.nodeType&&(Va=Va.getBoundingClientRect());la(ib,"transition","none");la(ib,"transform","translate3d("+(Va.left-pb.left)+"px,"+(Va.top-pb.top)+"px,0)");ib.offsetWidth;la(ib,"transition","all "+lb+"ms");la(ib,"transform","translate3d(0,0,0)");clearTimeout(ib.animated);ib.animated=ua(function(){la(ib,"transition","");la(ib,"transform",
"");ib.animated=!1},lb)}},_offUpEvents:function(){var Va=this.el.ownerDocument;da(zb,"touchmove",this._onTouchMove);da(zb,"pointermove",this._onTouchMove);da(Va,"mouseup",this._onDrop);da(Va,"touchend",this._onDrop);da(Va,"pointerup",this._onDrop);da(Va,"touchcancel",this._onDrop);da(Va,"pointercancel",this._onDrop);da(Va,"selectstart",this)},_onDrop:function(Va){var ib=this.el,lb=this.options;clearInterval(this._loopId);clearInterval($b.pid);clearTimeout(this._dragStartTimer);clearTimeout(this._cloneId);
clearTimeout(this._dragStartId);da(zb,"mouseover",this);da(zb,"mousemove",this._onTouchMove);this.nativeDraggable&&(da(zb,"drop",this),da(ib,"dragstart",this._onDragStart));this._offUpEvents();Va&&(Nb&&(Va.preventDefault(),lb.dropBubble||Va.stopPropagation()),oa&&oa.parentNode&&oa.parentNode.removeChild(oa),Ka!==qa&&"clone"===V.active.lastPullMode||Aa&&Aa.parentNode&&Aa.parentNode.removeChild(Aa),ya&&(this.nativeDraggable&&da(ya,"dragend",this),ma(ya),ya.style["will-change"]="",ca(ya,this.options.ghostClass,
!1),ca(ya,this.options.chosenClass,!1),S(this,Ka,"unchoose",ya,qa,Ka,Za),Ka!==qa?0<=(ab=wa(ya,lb.draggable))&&(S(null,qa,"add",ya,qa,Ka,Za,ab),S(this,Ka,"remove",ya,qa,Ka,Za,ab),S(null,qa,"sort",ya,qa,Ka,Za,ab),S(this,Ka,"sort",ya,qa,Ka,Za,ab)):ya.nextSibling!==Wa&&0<=(ab=wa(ya,lb.draggable))&&(S(this,Ka,"update",ya,qa,Ka,Za,ab),S(this,Ka,"sort",ya,qa,Ka,Za,ab)),V.active&&(null!=ab&&-1!==ab||(ab=Za),S(this,Ka,"end",ya,qa,Ka,Za,ab),this.save())));this._nulling()},_nulling:function(){Ka=ya=qa=oa=Wa=
Aa=Pa=Ta=eb=tb=nb=Nb=ab=Sa=$a=yb=ub=V.active=null;fc.forEach(function(Va){Va.checked=!0});fc.length=0},handleEvent:function(Va){switch(Va.type){case "drop":case "dragend":this._onDrop(Va);break;case "dragover":case "dragenter":ya&&(this._onDragOver(Va),Va.dataTransfer&&(Va.dataTransfer.dropEffect="move"),Va.preventDefault());break;case "mouseover":this._onDrop(Va);break;case "selectstart":Va.preventDefault()}},toArray:function(){for(var Va,ib=[],lb=this.el.children,pb=0,Jb=lb.length,Ub=this.options;pb<
Jb;pb++)Y(Va=lb[pb],Ub.draggable,this.el)&&ib.push(Va.getAttribute(Ub.dataIdAttr)||ja(Va));return ib},sort:function(Va){var ib={},lb=this.el;this.toArray().forEach(function(pb,Jb){Jb=lb.children[Jb];Y(Jb,this.options.draggable,lb)&&(ib[pb]=Jb)},this);Va.forEach(function(pb){ib[pb]&&(lb.removeChild(ib[pb]),lb.appendChild(ib[pb]))})},save:function(){var Va=this.options.store;Va&&Va.set(this)},closest:function(Va,ib){return Y(Va,ib||this.options.draggable,this.el)},option:function(Va,ib){var lb=this.options;
if(void 0===ib)return lb[Va];lb[Va]=ib;"group"===Va&&bd(lb)},destroy:function(){var Va=this.el;Va[kb]=null;da(Va,"mousedown",this._onTapStart);da(Va,"touchstart",this._onTapStart);da(Va,"pointerdown",this._onTapStart);this.nativeDraggable&&(da(Va,"dragover",this),da(Va,"dragenter",this));Array.prototype.forEach.call(Va.querySelectorAll("[draggable]"),function(ib){ib.removeAttribute("draggable")});Pc.splice(Pc.indexOf(this._onDragOver),1);this._onDrop();this.el=Va=null}},fa(zb,"touchmove",function(Va){V.active&&
Va.preventDefault()}),V.utils={on:fa,off:da,css:la,find:ha,is:function(Va,ib){return!!Y(Va,ib,Va)},extend:ra,throttle:va,closest:Y,toggleClass:ca,clone:Ba,index:wa,nextTick:Ha,cancelNextTick:function(Va){return clearTimeout(Va)}},V.create=function(Va,ib){return new V(Va,ib)},V.version="1.7.0",V}()}(H={exports:{}},H.exports),H.exports),L="esri-header-apps",M="rtl"===document.dir,J=(K=window,!/iPhone|iPad|iPod|Android/i.test(K.navigator.userAgent)),R="esri-header-notifications",X=[];return window.esriHeader=
{create:a},window.esriFooter={create:f},{createHeader:l,createFooter:m,create:function(U){var V=U.footerElm,Q=U.menuData;l({menuData:Q,targetElm:U.headerElm});m({menuData:Q,targetElm:V})}}})},"app/utils/notification":function(){define("require exports tslib moment/moment esri/intl/substitute ../utils/formatters esri/intl/locale esri/request ./messageBundleLoader".split(" "),function(u,n,h,r,v,z,p,g,e){function b(c,d,f){var l=c.received,m=c.id,k=p.getLocale().substring(0,2);return c&&c.received&&c.id?
(l={date:"en"===k?r.default(l).fromNow():z.fullDate(new Date(l)),id:m,text:""},"webapp_not_copied"===c.type&&d.isPortal&&(c.type="webapp_not_copied_portal"),f.types[c.type]&&(l.text=v.substitute(f.types[c.type],c.data)),"message_received"===c.type&&c.data&&c.data.message&&(l.text=c.data.message),l.text&&l):null}function a(c){return g.default(c.portalUrl+"community/users/"+c.username+"/notifications/"+c.id+"/delete",{method:"post",responseType:"json",query:{f:"json"}})}Object.defineProperty(n,"__esModule",
{value:!0});n.deleteNotifications=n._formatNotification=n.fetchNotifications=void 0;r=h.__importDefault(r);v=h.__importStar(v);z=h.__importStar(z);p=h.__importStar(p);g=h.__importDefault(g);n.fetchNotifications=function(c){return h.__awaiter(this,void 0,void 0,function(){var d,f;return h.__generator(this,function(l){switch(l.label){case 0:return[4,e.fetchMessageBundles(["mapviewer/notifications"])];case 1:return d=l.sent()[0],f=c.restUrl.replace("sharing/rest","home")+"/",[2,c.fetchNotifications().then(function(m){return(m||
[]).filter(function(k){return k&&"message_received"!==k.type}).filter(function(k){return d.types[k.type]}).map(function(k){k.data=h.__assign(h.__assign({},k.data),{homeAppRootUrl:f});return b(k,c,d)})})]}})})};n._formatNotification=b;n.deleteNotifications=function(c,d,f){f=f.map(function(l){return{username:d.username,portalUrl:c,id:l}}).map(a);return Promise.all(f)}})},"moment/moment":function(){(function(u,n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===
typeof define&&define.amd?define(n):u.moment=n()})(this,function(){function u(){return Jc.apply(null,arguments)}function n(aa){return aa instanceof Array||"[object Array]"===Object.prototype.toString.call(aa)}function h(aa){return null!=aa&&"[object Object]"===Object.prototype.toString.call(aa)}function r(aa){return void 0===aa}function v(aa){return"number"===typeof aa||"[object Number]"===Object.prototype.toString.call(aa)}function z(aa){return aa instanceof Date||"[object Date]"===Object.prototype.toString.call(aa)}
function p(aa,ka){var za=[],La;for(La=0;La<aa.length;++La)za.push(ka(aa[La],La));return za}function g(aa,ka){return Object.prototype.hasOwnProperty.call(aa,ka)}function e(aa,ka){for(var za in ka)g(ka,za)&&(aa[za]=ka[za]);g(ka,"toString")&&(aa.toString=ka.toString);g(ka,"valueOf")&&(aa.valueOf=ka.valueOf);return aa}function b(aa,ka,za,La){return tb(aa,ka,za,La,!0).utc()}function a(aa){null==aa._pf&&(aa._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,
invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return aa._pf}function c(aa){if(null==aa._isValid){var ka=a(aa),za=rc.call(ka.parsedDateParts,function(La){return null!=La});za=!isNaN(aa._d.getTime())&&0>ka.overflow&&!ka.empty&&!ka.invalidMonth&&!ka.invalidWeekday&&!ka.weekdayMismatch&&!ka.nullInput&&!ka.invalidFormat&&!ka.userInvalidated&&(!ka.meridiem||ka.meridiem&&za);aa._strict&&(za=za&&0===ka.charsLeftOver&&0===ka.unusedTokens.length&&
void 0===ka.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(aa))return za;aa._isValid=za}return aa._isValid}function d(aa){var ka=b(NaN);null!=aa?e(a(ka),aa):a(ka).userInvalidated=!0;return ka}function f(aa,ka){var za;r(ka._isAMomentObject)||(aa._isAMomentObject=ka._isAMomentObject);r(ka._i)||(aa._i=ka._i);r(ka._f)||(aa._f=ka._f);r(ka._l)||(aa._l=ka._l);r(ka._strict)||(aa._strict=ka._strict);r(ka._tzm)||(aa._tzm=ka._tzm);r(ka._isUTC)||(aa._isUTC=ka._isUTC);r(ka._offset)||(aa._offset=ka._offset);
r(ka._pf)||(aa._pf=a(ka));r(ka._locale)||(aa._locale=ka._locale);if(0<Rb.length)for(za=0;za<Rb.length;za++){var La=Rb[za];var mb=ka[La];r(mb)||(aa[La]=mb)}return aa}function l(aa){f(this,aa);this._d=new Date(null!=aa._d?aa._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===pc&&(pc=!0,u.updateOffset(this),pc=!1)}function m(aa){return aa instanceof l||null!=aa&&null!=aa._isAMomentObject}function k(aa){return 0>aa?Math.ceil(aa)||0:Math.floor(aa)}function q(aa){aa=+aa;var ka=0;0!==aa&&isFinite(aa)&&
(ka=k(aa));return ka}function t(aa,ka,za){var La=Math.min(aa.length,ka.length),mb=Math.abs(aa.length-ka.length),Eb=0,wb;for(wb=0;wb<La;wb++)(za&&aa[wb]!==ka[wb]||!za&&q(aa[wb])!==q(ka[wb]))&&Eb++;return Eb+mb}function w(aa){!1===u.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+aa)}function A(aa,ka){var za=!0;return e(function(){null!=u.deprecationHandler&&u.deprecationHandler(null,aa);if(za){for(var La=[],mb,Eb=0;Eb<arguments.length;Eb++){mb=
"";if("object"===typeof arguments[Eb]){mb+="\n["+Eb+"] ";for(var wb in arguments[0])mb+=wb+": "+arguments[0][wb]+", ";mb=mb.slice(0,-2)}else mb=arguments[Eb];La.push(mb)}w(aa+"\nArguments: "+Array.prototype.slice.call(La).join("")+"\n"+Error().stack);za=!1}return ka.apply(this,arguments)},ka)}function x(aa,ka){null!=u.deprecationHandler&&u.deprecationHandler(aa,ka);sc[aa]||(w(ka),sc[aa]=!0)}function y(aa){return aa instanceof Function||"[object Function]"===Object.prototype.toString.call(aa)}function B(aa,
ka){var za=e({},aa),La;for(La in ka)g(ka,La)&&(h(aa[La])&&h(ka[La])?(za[La]={},e(za[La],aa[La]),e(za[La],ka[La])):null!=ka[La]?za[La]=ka[La]:delete za[La]);for(La in aa)g(aa,La)&&!g(ka,La)&&h(aa[La])&&(za[La]=e({},za[La]));return za}function C(aa){null!=aa&&this.set(aa)}function D(aa,ka){var za=aa.toLowerCase();Rc[za]=Rc[za+"s"]=Rc[ka]=aa}function F(aa){return"string"===typeof aa?Rc[aa]||Rc[aa.toLowerCase()]:void 0}function E(aa){var ka={},za,La;for(La in aa)g(aa,La)&&(za=F(La))&&(ka[za]=aa[La]);
return ka}function G(aa){var ka=[],za;for(za in aa)ka.push({unit:za,priority:tc[za]});ka.sort(function(La,mb){return La.priority-mb.priority});return ka}function O(aa,ka,za){var La=""+Math.abs(aa);return(0<=aa?za?"+":"":"-")+Math.pow(10,Math.max(0,ka-La.length)).toString().substr(1)+La}function H(aa,ka,za,La){var mb=La;"string"===typeof La&&(mb=function(){return this[La]()});aa&&(rd[aa]=mb);ka&&(rd[ka[0]]=function(){return O(mb.apply(this,arguments),ka[1],ka[2])});za&&(rd[za]=function(){return this.localeData().ordinal(mb.apply(this,
arguments),aa)})}function K(aa){return aa.match(/\[[\s\S]/)?aa.replace(/^\[|\]$/g,""):aa.replace(/\\/g,"")}function P(aa){var ka=aa.match($c),za;var La=0;for(za=ka.length;La<za;La++)ka[La]=rd[ka[La]]?rd[ka[La]]:K(ka[La]);return function(mb){var Eb="",wb;for(wb=0;wb<za;wb++)Eb+=y(ka[wb])?ka[wb].call(mb,aa):ka[wb];return Eb}}function L(aa,ka){if(!aa.isValid())return aa.localeData().invalidDate();ka=M(ka,aa.localeData());Id[ka]=Id[ka]||P(ka);return Id[ka](aa)}function M(aa,ka){function za(mb){return ka.longDateFormat(mb)||
mb}var La=5;for(qd.lastIndex=0;0<=La&&qd.test(aa);)aa=aa.replace(qd,za),qd.lastIndex=0,--La;return aa}function J(aa,ka,za){Qd[aa]=y(ka)?ka:function(La,mb){return La&&za?za:ka}}function R(aa,ka){return g(Qd,aa)?Qd[aa](ka._strict,ka._locale):new RegExp(X(aa))}function X(aa){return U(aa.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(ka,za,La,mb,Eb){return za||La||mb||Eb}))}function U(aa){return aa.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function V(aa,ka){var za,La=ka;"string"===
typeof aa&&(aa=[aa]);v(ka)&&(La=function(mb,Eb){Eb[ka]=q(mb)});for(za=0;za<aa.length;za++)Rd[aa[za]]=La}function Q(aa,ka){V(aa,function(za,La,mb,Eb){mb._w=mb._w||{};ka(za,mb._w,mb,Eb)})}function Y(aa){return 0===aa%4&&0!==aa%100||0===aa%400}function fa(aa,ka){return function(za){return null!=za?(ca(this,aa,za),u.updateOffset(this,ka),this):da(this,aa)}}function da(aa,ka){return aa.isValid()?aa._d["get"+(aa._isUTC?"UTC":"")+ka]():NaN}function ca(aa,ka,za){if(aa.isValid()&&!isNaN(za))if("FullYear"===
ka&&Y(aa.year())&&1===aa.month()&&29===aa.date())aa._d["set"+(aa._isUTC?"UTC":"")+ka](za,aa.month(),la(za,aa.month()));else aa._d["set"+(aa._isUTC?"UTC":"")+ka](za)}function la(aa,ka){if(isNaN(aa)||isNaN(ka))return NaN;var za=(ka%12+12)%12;return 1===za?Y(aa+(ka-za)/12)?29:28:31-za%7%2}function ha(aa,ka){if(!aa.isValid())return aa;if("string"===typeof ka)if(/^\d+$/.test(ka))ka=q(ka);else if(ka=aa.localeData().monthsParse(ka),!v(ka))return aa;var za=Math.min(aa.date(),la(aa.year(),ka));aa._d["set"+
(aa._isUTC?"UTC":"")+"Month"](ka,za);return aa}function S(aa){return null!=aa?(ha(this,aa),u.updateOffset(this,!0),this):da(this,"Month")}function ea(){function aa(wb,dc){return dc.length-wb.length}var ka=[],za=[],La=[],mb;for(mb=0;12>mb;mb++){var Eb=b([2E3,mb]);ka.push(this.monthsShort(Eb,""));za.push(this.months(Eb,""));La.push(this.months(Eb,""));La.push(this.monthsShort(Eb,""))}ka.sort(aa);za.sort(aa);La.sort(aa);for(mb=0;12>mb;mb++)ka[mb]=U(ka[mb]),za[mb]=U(za[mb]);for(mb=0;24>mb;mb++)La[mb]=
U(La[mb]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+La.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+za.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+ka.join("|")+")","i")}function ma(aa,ka,za,La,mb,Eb,wb){ka=new Date(aa,ka,za,La,mb,Eb,wb);100>aa&&0<=aa&&isFinite(ka.getFullYear())&&ka.setFullYear(aa);return ka}function sa(aa){var ka=new Date(Date.UTC.apply(null,arguments));100>aa&&0<=aa&&isFinite(ka.getUTCFullYear())&&ka.setUTCFullYear(aa);return ka}function ja(aa,
ka,za){za=7+ka-za;return-((7+sa(aa,0,za).getUTCDay()-ka)%7)+za-1}function wa(aa,ka,za,La,mb){za=(7+za-La)%7;La=ja(aa,La,mb);La=1+7*(ka-1)+za+La;0>=La?(ka=aa-1,aa=(Y(ka)?366:365)+La):La>(Y(aa)?366:365)?(ka=aa+1,aa=La-(Y(aa)?366:365)):(ka=aa,aa=La);return{year:ka,dayOfYear:aa}}function Ja(aa,ka,za){var La=ja(aa.year(),ka,za);La=Math.floor((aa.dayOfYear()-La-1)/7)+1;1>La?(aa=aa.year()-1,ka=La+va(aa,ka,za)):La>va(aa.year(),ka,za)?(ka=La-va(aa.year(),ka,za),aa=aa.year()+1):(aa=aa.year(),ka=La);return{week:ka,
year:aa}}function va(aa,ka,za){var La=ja(aa,ka,za);ka=ja(aa+1,ka,za);return((Y(aa)?366:365)-La+ka)/7}function ra(aa,ka,za){var La;aa=aa.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],La=0;7>La;++La){var mb=b([2E3,1]).day(La);this._minWeekdaysParse[La]=this.weekdaysMin(mb,"").toLocaleLowerCase();this._shortWeekdaysParse[La]=this.weekdaysShort(mb,"").toLocaleLowerCase();this._weekdaysParse[La]=this.weekdays(mb,"").toLocaleLowerCase()}if(za)ka=
"dddd"===ka?Dc.call(this._weekdaysParse,aa):"ddd"===ka?Dc.call(this._shortWeekdaysParse,aa):Dc.call(this._minWeekdaysParse,aa);else if("dddd"===ka){ka=Dc.call(this._weekdaysParse,aa);if(-1!==ka)return ka;ka=Dc.call(this._shortWeekdaysParse,aa);if(-1!==ka)return ka;ka=Dc.call(this._minWeekdaysParse,aa)}else if("ddd"===ka){ka=Dc.call(this._shortWeekdaysParse,aa);if(-1!==ka)return ka;ka=Dc.call(this._weekdaysParse,aa);if(-1!==ka)return ka;ka=Dc.call(this._minWeekdaysParse,aa)}else{ka=Dc.call(this._minWeekdaysParse,
aa);if(-1!==ka)return ka;ka=Dc.call(this._weekdaysParse,aa);if(-1!==ka)return ka;ka=Dc.call(this._shortWeekdaysParse,aa)}return-1!==ka?ka:null}function Ba(){function aa(oc,kd){return kd.length-oc.length}var ka=[],za=[],La=[],mb=[],Eb;for(Eb=0;7>Eb;Eb++){var wb=b([2E3,1]).day(Eb);var dc=this.weekdaysMin(wb,"");var uc=this.weekdaysShort(wb,"");wb=this.weekdays(wb,"");ka.push(dc);za.push(uc);La.push(wb);mb.push(dc);mb.push(uc);mb.push(wb)}ka.sort(aa);za.sort(aa);La.sort(aa);mb.sort(aa);for(Eb=0;7>Eb;Eb++)za[Eb]=
U(za[Eb]),La[Eb]=U(La[Eb]),mb[Eb]=U(mb[Eb]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+mb.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+La.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+za.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+ka.join("|")+")","i")}function Ha(){return this.hours()%12||12}function ya(aa,ka){H(aa,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),ka)})}function qa(aa,
ka){return ka._meridiemParse}function oa(aa){return aa?aa.toLowerCase().replace("_","-"):aa}function Aa(aa){var ka=null;if(!Lc[aa]&&"undefined"!==typeof module&&module&&module.exports)try{ka=sd._abbr,require("./locale/"+aa),Ka(ka)}catch(za){}return Lc[aa]}function Ka(aa,ka){aa&&((ka=r(ka)?Pa(aa):Wa(aa,ka))?sd=ka:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+aa+" not found. Did you forget to load it?"));return sd._abbr}function Wa(aa,ka){if(null!==ka){var za=td;ka.abbr=aa;if(null!=
Lc[aa])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),za=Lc[aa]._config;else if(null!=ka.parentLocale)if(null!=Lc[ka.parentLocale])za=Lc[ka.parentLocale]._config;else if(za=Aa(ka.parentLocale),null!=za)za=za._config;else return Ad[ka.parentLocale]||(Ad[ka.parentLocale]=[]),Ad[ka.parentLocale].push({name:aa,
config:ka}),null;Lc[aa]=new C(B(za,ka));Ad[aa]&&Ad[aa].forEach(function(La){Wa(La.name,La.config)});Ka(aa);return Lc[aa]}delete Lc[aa];return null}function Pa(aa){var ka;aa&&aa._locale&&aa._locale._abbr&&(aa=aa._locale._abbr);if(!aa)return sd;if(!n(aa)){if(ka=Aa(aa))return ka;aa=[aa]}a:{ka=0;for(var za,La,mb,Eb;ka<aa.length;){Eb=oa(aa[ka]).split("-");za=Eb.length;for(La=(La=oa(aa[ka+1]))?La.split("-"):null;0<za;){if(mb=Aa(Eb.slice(0,za).join("-"))){aa=mb;break a}if(La&&La.length>=za&&t(Eb,La,!0)>=
za-1)break;za--}ka++}aa=sd}return aa}function Ta(aa){var ka;(ka=aa._a)&&-2===a(aa).overflow&&(ka=0>ka[ld]||11<ka[ld]?ld:1>ka[Ic]||ka[Ic]>la(ka[ed],ka[ld])?Ic:0>ka[wc]||24<ka[wc]||24===ka[wc]&&(0!==ka[Tc]||0!==ka[fd]||0!==ka[md])?wc:0>ka[Tc]||59<ka[Tc]?Tc:0>ka[fd]||59<ka[fd]?fd:0>ka[md]||999<ka[md]?md:-1,a(aa)._overflowDayOfYear&&(ka<ed||ka>Ic)&&(ka=Ic),a(aa)._overflowWeeks&&-1===ka&&(ka=Vc),a(aa)._overflowWeekday&&-1===ka&&(ka=Ge),a(aa).overflow=ka);return aa}function eb(aa,ka,za){return null!=aa?
aa:null!=ka?ka:za}function Na(aa){var ka=[];if(!aa._d){var za=new Date(u.now());za=aa._useUTC?[za.getUTCFullYear(),za.getUTCMonth(),za.getUTCDate()]:[za.getFullYear(),za.getMonth(),za.getDate()];if(aa._w&&null==aa._a[Ic]&&null==aa._a[ld]){var La=aa._w;if(null!=La.GG||null!=La.W||null!=La.E){var mb=1;var Eb=4;var wb=eb(La.GG,aa._a[ed],Ja(nb(),1,4).year);var dc=eb(La.W,1);var uc=eb(La.E,1);if(1>uc||7<uc)var oc=!0}else if(mb=aa._locale._week.dow,Eb=aa._locale._week.doy,dc=Ja(nb(),mb,Eb),wb=eb(La.gg,
aa._a[ed],dc.year),dc=eb(La.w,dc.week),null!=La.d){if(uc=La.d,0>uc||6<uc)oc=!0}else if(null!=La.e){if(uc=La.e+mb,0>La.e||6<La.e)oc=!0}else uc=mb;1>dc||dc>va(wb,mb,Eb)?a(aa)._overflowWeeks=!0:null!=oc?a(aa)._overflowWeekday=!0:(oc=wa(wb,dc,uc,mb,Eb),aa._a[ed]=oc.year,aa._dayOfYear=oc.dayOfYear)}if(null!=aa._dayOfYear){oc=eb(aa._a[ed],za[ed]);if(aa._dayOfYear>(Y(oc)?366:365)||0===aa._dayOfYear)a(aa)._overflowDayOfYear=!0;oc=sa(oc,0,aa._dayOfYear);aa._a[ld]=oc.getUTCMonth();aa._a[Ic]=oc.getUTCDate()}for(oc=
0;3>oc&&null==aa._a[oc];++oc)aa._a[oc]=ka[oc]=za[oc];for(;7>oc;oc++)aa._a[oc]=ka[oc]=null==aa._a[oc]?2===oc?1:0:aa._a[oc];24===aa._a[wc]&&0===aa._a[Tc]&&0===aa._a[fd]&&0===aa._a[md]&&(aa._nextDay=!0,aa._a[wc]=0);aa._d=(aa._useUTC?sa:ma).apply(null,ka);ka=aa._useUTC?aa._d.getUTCDay():aa._d.getDay();null!=aa._tzm&&aa._d.setUTCMinutes(aa._d.getUTCMinutes()-aa._tzm);aa._nextDay&&(aa._a[wc]=24);aa._w&&"undefined"!==typeof aa._w.d&&aa._w.d!==ka&&(a(aa).weekdayMismatch=!0)}}function Sa(aa){var ka;var za=
aa._i;var La=Jd.exec(za)||Mc.exec(za);if(La){a(aa).iso=!0;za=0;for(ka=ud.length;za<ka;za++)if(ud[za][1].exec(La[1])){var mb=ud[za][0];var Eb=!1!==ud[za][2];break}if(null==mb)aa._isValid=!1;else{if(La[3]){za=0;for(ka=gd.length;za<ka;za++)if(gd[za][1].exec(La[3])){var wb=(La[2]||" ")+gd[za][0];break}if(null==wb){aa._isValid=!1;return}}if(Eb||null==wb){if(La[4])if(Kd.exec(La[4]))var dc="Z";else{aa._isValid=!1;return}aa._f=mb+(wb||"")+(dc||"");Za(aa)}else aa._isValid=!1}}else aa._isValid=!1}function $a(aa){var ka=
Ed.exec(aa._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(ka){var za=ka[3],La=ka[2],mb=ka[5],Eb=ka[6],wb=ka[7],dc=parseInt(ka[4],10);za=[49>=dc?2E3+dc:999>=dc?1900+dc:dc,Sc.indexOf(za),parseInt(La,10),parseInt(mb,10),parseInt(Eb,10)];wb&&za.push(parseInt(wb,10));a:{if(wb=ka[1])if(wb=ke.indexOf(wb),La=(new Date(za[0],za[1],za[2])).getDay(),wb!==La){a(aa).weekdayMismatch=!0;wb=aa._isValid=!1;break a}wb=!0}wb&&(aa._a=za,(wb=ka[8])?ka=Sd[wb]:
ka[9]?ka=0:(ka=parseInt(ka[10],10),wb=ka%100,ka=(ka-wb)/100*60+wb),aa._tzm=ka,aa._d=sa.apply(null,aa._a),aa._d.setUTCMinutes(aa._d.getUTCMinutes()-aa._tzm),a(aa).rfc2822=!0)}else aa._isValid=!1}function gb(aa){var ka=Ld.exec(aa._i);null!==ka?aa._d=new Date(+ka[1]):(Sa(aa),!1===aa._isValid&&(delete aa._isValid,$a(aa),!1===aa._isValid&&(delete aa._isValid,u.createFromInputFallback(aa))))}function Za(aa){if(aa._f===u.ISO_8601)Sa(aa);else if(aa._f===u.RFC_2822)$a(aa);else{aa._a=[];a(aa).empty=!0;var ka=
""+aa._i,za,La,mb=ka.length,Eb=0;var wb=M(aa._f,aa._locale).match($c)||[];for(za=0;za<wb.length;za++){var dc=wb[za];if(La=(ka.match(R(dc,aa))||[])[0]){var uc=ka.substr(0,ka.indexOf(La));0<uc.length&&a(aa).unusedInput.push(uc);ka=ka.slice(ka.indexOf(La)+La.length);Eb+=La.length}if(rd[dc]){if(La?a(aa).empty=!1:a(aa).unusedTokens.push(dc),uc=aa,null!=La&&g(Rd,dc))Rd[dc](La,uc._a,uc,dc)}else aa._strict&&!La&&a(aa).unusedTokens.push(dc)}a(aa).charsLeftOver=mb-Eb;0<ka.length&&a(aa).unusedInput.push(ka);
12>=aa._a[wc]&&!0===a(aa).bigHour&&0<aa._a[wc]&&(a(aa).bigHour=void 0);a(aa).parsedDateParts=aa._a.slice(0);a(aa).meridiem=aa._meridiem;ka=aa._a;za=wc;mb=aa._locale;wb=aa._a[wc];Eb=aa._meridiem;null!=Eb&&(null!=mb.meridiemHour?wb=mb.meridiemHour(wb,Eb):null!=mb.isPM&&((mb=mb.isPM(Eb))&&12>wb&&(wb+=12),mb||12!==wb||(wb=0)));ka[za]=wb;Na(aa);Ta(aa)}}function ab(aa){if(!aa._d){var ka=E(aa._i);aa._a=p([ka.year,ka.month,ka.day||ka.date,ka.hour,ka.minute,ka.second,ka.millisecond],function(za){return za&&
parseInt(za,10)});Na(aa)}}function ub(aa){var ka=aa._i,za=aa._f;aa._locale=aa._locale||Pa(aa._l);if(null===ka||void 0===za&&""===ka)return d({nullInput:!0});"string"===typeof ka&&(aa._i=ka=aa._locale.preparse(ka));if(m(ka))return new l(Ta(ka));if(z(ka))aa._d=ka;else if(n(za))if(0===aa._f.length)a(aa).invalidFormat=!0,aa._d=new Date(NaN);else{for(ka=0;ka<aa._f.length;ka++){za=0;var La=f({},aa);null!=aa._useUTC&&(La._useUTC=aa._useUTC);La._f=aa._f[ka];Za(La);if(c(La)&&(za+=a(La).charsLeftOver,za+=10*
a(La).unusedTokens.length,a(La).score=za,null==mb||za<mb)){var mb=za;var Eb=La}}e(aa,Eb||La)}else za?Za(aa):yb(aa);c(aa)||(aa._d=null);return aa}function yb(aa){var ka=aa._i;r(ka)?aa._d=new Date(u.now()):z(ka)?aa._d=new Date(ka.valueOf()):"string"===typeof ka?gb(aa):n(ka)?(aa._a=p(ka.slice(0),function(za){return parseInt(za,10)}),Na(aa)):h(ka)?ab(aa):v(ka)?aa._d=new Date(ka):u.createFromInputFallback(aa)}function tb(aa,ka,za,La,mb){var Eb={};if(!0===za||!1===za)La=za,za=void 0;var wb;if(wb=h(aa))a:if(wb=
aa,Object.getOwnPropertyNames)wb=0===Object.getOwnPropertyNames(wb).length;else{for(var dc in wb)if(wb.hasOwnProperty(dc)){wb=!1;break a}wb=!0}if(wb||n(aa)&&0===aa.length)aa=void 0;Eb._isAMomentObject=!0;Eb._useUTC=Eb._isUTC=mb;Eb._l=za;Eb._i=aa;Eb._f=ka;Eb._strict=La;aa=new l(Ta(ub(Eb)));aa._nextDay&&(aa.add(1,"d"),aa._nextDay=void 0);return aa}function nb(aa,ka,za,La){return tb(aa,ka,za,La,!1)}function Nb(aa,ka){var za;1===ka.length&&n(ka[0])&&(ka=ka[0]);if(!ka.length)return nb();var La=ka[0];for(za=
1;za<ka.length;++za)if(!ka[za].isValid()||ka[za][aa](La))La=ka[za];return La}function Tb(aa){var ka=E(aa);aa=ka.year||0;var za=ka.quarter||0,La=ka.month||0,mb=ka.week||ka.isoWeek||0,Eb=ka.day||0,wb=ka.hour||0,dc=ka.minute||0,uc=ka.second||0,oc=ka.millisecond||0;a:{for(var kd in ka)if(-1===Dc.call(Ac,kd)||null!=ka[kd]&&isNaN(ka[kd])){ka=!1;break a}kd=!1;for(var Md=0;Md<Ac.length;++Md)if(ka[Ac[Md]]){if(kd){ka=!1;break a}parseFloat(ka[Ac[Md]])!==q(ka[Ac[Md]])&&(kd=!0)}ka=!0}this._isValid=ka;this._milliseconds=
+oc+1E3*uc+6E4*dc+36E5*wb;this._days=+Eb+7*mb;this._months=+La+3*za+12*aa;this._data={};this._locale=Pa();this._bubble()}function $b(aa){return aa instanceof Tb}function Mb(aa){return 0>aa?-1*Math.round(-1*aa):Math.round(aa)}function Kb(aa,ka){H(aa,0,0,function(){var za=this.utcOffset(),La="+";0>za&&(za=-za,La="-");return La+O(~~(za/60),2)+ka+O(~~za%60,2)})}function kb(aa,ka){aa=(ka||"").match(aa);if(null===aa)return null;aa=((aa[aa.length-1]||[])+"").match(le)||["-",0,0];ka=+(60*aa[1])+q(aa[2]);
return 0===ka?0:"+"===aa[0]?ka:-ka}function rb(aa,ka){return ka._isUTC?(ka=ka.clone(),aa=(m(aa)||z(aa)?aa.valueOf():nb(aa).valueOf())-ka.valueOf(),ka._d.setTime(ka._d.valueOf()+aa),u.updateOffset(ka,!1),ka):nb(aa).local()}function zb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function xb(aa,ka){var za=aa,La=null;$b(aa)?za={ms:aa._milliseconds,d:aa._days,M:aa._months}:v(aa)?(za={},ka?za[ka]=aa:za.milliseconds=aa):(La=me.exec(aa))?(za="-"===La[1]?-1:1,za={y:0,d:q(La[Ic])*za,h:q(La[wc])*
za,m:q(La[Tc])*za,s:q(La[fd])*za,ms:q(Mb(1E3*La[md]))*za}):(La=Td.exec(aa))?(za="-"===La[1]?-1:1,za={y:ua(La[2],za),M:ua(La[3],za),w:ua(La[4],za),d:ua(La[5],za),h:ua(La[6],za),m:ua(La[7],za),s:ua(La[8],za)}):null==za?za={}:"object"===typeof za&&("from"in za||"to"in za)&&(La=nb(za.from),za=nb(za.to),La.isValid()&&za.isValid()?(za=rb(za,La),La.isBefore(za)?za=Oa(La,za):(za=Oa(za,La),za.milliseconds=-za.milliseconds,za.months=-za.months),La=za):La={milliseconds:0,months:0},za={},za.ms=La.milliseconds,
za.M=La.months);za=new Tb(za);$b(aa)&&g(aa,"_locale")&&(za._locale=aa._locale);return za}function ua(aa,ka){aa=aa&&parseFloat(aa.replace(",","."));return(isNaN(aa)?0:aa)*ka}function Oa(aa,ka){var za={milliseconds:0,months:0};za.months=ka.month()-aa.month()+12*(ka.year()-aa.year());aa.clone().add(za.months,"M").isAfter(ka)&&--za.months;za.milliseconds=+ka-+aa.clone().add(za.months,"M");return za}function hb(aa,ka){return function(za,La){if(null!==La&&!isNaN(+La)){x(ka,"moment()."+ka+"(period, number) is deprecated. Please use moment()."+
ka+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var mb=za;za=La;La=mb}za=xb("string"===typeof za?+za:za,La);Cb(this,za,aa);return this}}function Cb(aa,ka,za,La){var mb=ka._milliseconds,Eb=Mb(ka._days);ka=Mb(ka._months);aa.isValid()&&(La=null==La?!0:La,ka&&ha(aa,da(aa,"Month")+ka*za),Eb&&ca(aa,"Date",da(aa,"Date")+Eb*za),mb&&aa._d.setTime(aa._d.valueOf()+mb*za),La&&u.updateOffset(aa,Eb||ka))}function Db(aa,ka){var za=12*(ka.year()-aa.year())+(ka.month()-
aa.month()),La=aa.clone().add(za,"months");0>ka-La?(aa=aa.clone().add(za-1,"months"),ka=(ka-La)/(La-aa)):(aa=aa.clone().add(za+1,"months"),ka=(ka-La)/(aa-La));return-(za+ka)||0}function ac(aa){if(void 0===aa)return this._locale._abbr;aa=Pa(aa);null!=aa&&(this._locale=aa);return this}function kc(){return this._locale}function zc(aa,ka){H(0,[aa,aa.length],0,ka)}function Zb(aa,ka,za,La,mb){if(null==aa)return Ja(this,La,mb).year;var Eb=va(aa,La,mb);ka>Eb&&(ka=Eb);aa=wa(aa,ka,za,La,mb);aa=sa(aa.year,0,
aa.dayOfYear);this.year(aa.getUTCFullYear());this.month(aa.getUTCMonth());this.date(aa.getUTCDate());return this}function Qc(aa,ka){ka[md]=q(1E3*("0."+aa))}function fc(aa){return aa}function Pc(aa,ka,za,La){var mb=Pa();ka=b().set(La,ka);return mb[za](ka,aa)}function jd(aa,ka,za){v(aa)&&(ka=aa,aa=void 0);aa=aa||"";if(null!=ka)return Pc(aa,ka,za,"month");var La=[];for(ka=0;12>ka;ka++)La[ka]=Pc(aa,ka,za,"month");return La}function bd(aa,ka,za,La){"boolean"!==typeof aa&&(za=ka=aa,aa=!1);v(ka)&&(za=ka,
ka=void 0);ka=ka||"";var mb=Pa();aa=aa?mb._week.dow:0;if(null!=za)return Pc(ka,(za+aa)%7,La,"day");mb=[];for(za=0;7>za;za++)mb[za]=Pc(ka,(za+aa)%7,La,"day");return mb}function Va(aa,ka,za,La){ka=xb(ka,za);aa._milliseconds+=La*ka._milliseconds;aa._days+=La*ka._days;aa._months+=La*ka._months;return aa._bubble()}function ib(aa){return 0>aa?Math.floor(aa):Math.ceil(aa)}function lb(aa){return function(){return this.as(aa)}}function pb(aa){return function(){return this.isValid()?this._data[aa]:NaN}}function Jb(aa,
ka,za,La,mb){return mb.relativeTime(ka||1,!!za,aa,La)}function Ub(aa){return(0<aa)-(0>aa)||+aa}function nc(){if(!this.isValid())return this.localeData().invalidDate();var aa=ne(this._milliseconds)/1E3,ka=ne(this._days),za=ne(this._months);var La=k(aa/60);var mb=k(La/60);aa%=60;La%=60;var Eb=k(za/12);za%=12;aa=aa?aa.toFixed(3).replace(/\.?0+$/,""):"";var wb=this.asSeconds();if(!wb)return"P0D";var dc=0>wb?"-":"",uc=Ub(this._months)!==Ub(wb)?"-":"",oc=Ub(this._days)!==Ub(wb)?"-":"";wb=Ub(this._milliseconds)!==
Ub(wb)?"-":"";return dc+"P"+(Eb?uc+Eb+"Y":"")+(za?uc+za+"M":"")+(ka?oc+ka+"D":"")+(mb||La||aa?"T":"")+(mb?wb+mb+"H":"")+(La?wb+La+"M":"")+(aa?wb+aa+"S":"")}var rc=Array.prototype.some?Array.prototype.some:function(aa){for(var ka=Object(this),za=ka.length>>>0,La=0;La<za;La++)if(La in ka&&aa.call(this,ka[La],La,ka))return!0;return!1};var Rb=u.momentProperties=[],pc=!1,sc={};u.suppressDeprecationWarnings=!1;u.deprecationHandler=null;var Gc=Object.keys?Object.keys:function(aa){var ka,za=[];for(ka in aa)g(aa,
ka)&&za.push(ka);return za};var Rc={},tc={},$c=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,qd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Id={},rd={},Ud=/\d/,Wc=/\d\d/,Vd=/\d{3}/,Wd=/\d{4}/,Nd=/[+-]?\d{6}/,Ec=/\d\d?/,Xd=/\d\d\d\d?/,Yd=/\d\d\d\d\d\d?/,cd=/\d{1,3}/,Zd=/\d{1,4}/,Fd=/[+-]?\d{1,6}/,oe=/\d+/,Bd=/[+-]?\d+/,pe=/Z|[+-]\d\d:?\d\d/gi,Od=/Z|[+-]\d\d(?::?\d\d)?/gi,
Gd=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Qd={},Rd={},ed=0,ld=1,Ic=2,wc=3,Tc=4,fd=5,md=6,Vc=7,Ge=8;H("Y",0,0,function(){var aa=this.year();return 9999>=aa?""+aa:"+"+aa});H(0,["YY",2],0,function(){return this.year()%100});H(0,["YYYY",4],0,"year");H(0,["YYYYY",5],0,"year");H(0,["YYYYYY",6,!0],0,"year");D("year","y");tc.year=1;J("Y",Bd);J("YY",Ec,Wc);J("YYYY",Zd,Wd);J("YYYYY",Fd,Nd);J("YYYYYY",
Fd,Nd);V(["YYYYY","YYYYYY"],ed);V("YYYY",function(aa,ka){ka[ed]=2===aa.length?u.parseTwoDigitYear(aa):q(aa)});V("YY",function(aa,ka){ka[ed]=u.parseTwoDigitYear(aa)});V("Y",function(aa,ka){ka[ed]=parseInt(aa,10)});u.parseTwoDigitYear=function(aa){return q(aa)+(68<q(aa)?1900:2E3)};var Hd=fa("FullYear",!0);var Dc=Array.prototype.indexOf?Array.prototype.indexOf:function(aa){var ka;for(ka=0;ka<this.length;++ka)if(this[ka]===aa)return ka;return-1};H("M",["MM",2],"Mo",function(){return this.month()+1});
H("MMM",0,0,function(aa){return this.localeData().monthsShort(this,aa)});H("MMMM",0,0,function(aa){return this.localeData().months(this,aa)});D("month","M");tc.month=8;J("M",Ec);J("MM",Ec,Wc);J("MMM",function(aa,ka){return ka.monthsShortRegex(aa)});J("MMMM",function(aa,ka){return ka.monthsRegex(aa)});V(["M","MM"],function(aa,ka){ka[ld]=q(aa)-1});V(["MMM","MMMM"],function(aa,ka,za,La){La=za._locale.monthsParse(aa,La,za._strict);null!=La?ka[ld]=La:a(za).invalidMonth=aa});var $d=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,
Sc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");H("w",["ww",2],"wo","week");H("W",["WW",2],"Wo","isoWeek");D("week","w");D("isoWeek","W");tc.week=5;tc.isoWeek=5;J("w",Ec);J("ww",Ec,Wc);J("W",Ec);J("WW",Ec,Wc);Q(["w","ww","W","WW"],function(aa,ka,za,La){ka[La.substr(0,1)]=q(aa)});H("d",0,"do","day");H("dd",0,0,function(aa){return this.localeData().weekdaysMin(this,aa)});H("ddd",0,0,function(aa){return this.localeData().weekdaysShort(this,aa)});H("dddd",0,0,function(aa){return this.localeData().weekdays(this,
aa)});H("e",0,0,"weekday");H("E",0,0,"isoWeekday");D("day","d");D("weekday","e");D("isoWeekday","E");tc.day=11;tc.weekday=11;tc.isoWeekday=11;J("d",Ec);J("e",Ec);J("E",Ec);J("dd",function(aa,ka){return ka.weekdaysMinRegex(aa)});J("ddd",function(aa,ka){return ka.weekdaysShortRegex(aa)});J("dddd",function(aa,ka){return ka.weekdaysRegex(aa)});Q(["dd","ddd","dddd"],function(aa,ka,za,La){La=za._locale.weekdaysParse(aa,La,za._strict);null!=La?ka.d=La:a(za).invalidWeekday=aa});Q(["d","e","E"],function(aa,
ka,za,La){ka[La]=q(aa)});var ke="Sun Mon Tue Wed Thu Fri Sat".split(" ");H("H",["HH",2],0,"hour");H("h",["hh",2],0,Ha);H("k",["kk",2],0,function(){return this.hours()||24});H("hmm",0,0,function(){return""+Ha.apply(this)+O(this.minutes(),2)});H("hmmss",0,0,function(){return""+Ha.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)});H("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)});H("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)});ya("a",!0);ya("A",
!1);D("hour","h");tc.hour=13;J("a",qa);J("A",qa);J("H",Ec);J("h",Ec);J("k",Ec);J("HH",Ec,Wc);J("hh",Ec,Wc);J("kk",Ec,Wc);J("hmm",Xd);J("hmmss",Yd);J("Hmm",Xd);J("Hmmss",Yd);V(["H","HH"],wc);V(["k","kk"],function(aa,ka,za){aa=q(aa);ka[wc]=24===aa?0:aa});V(["a","A"],function(aa,ka,za){za._isPm=za._locale.isPM(aa);za._meridiem=aa});V(["h","hh"],function(aa,ka,za){ka[wc]=q(aa);a(za).bigHour=!0});V("hmm",function(aa,ka,za){var La=aa.length-2;ka[wc]=q(aa.substr(0,La));ka[Tc]=q(aa.substr(La));a(za).bigHour=
!0});V("hmmss",function(aa,ka,za){var La=aa.length-4,mb=aa.length-2;ka[wc]=q(aa.substr(0,La));ka[Tc]=q(aa.substr(La,2));ka[fd]=q(aa.substr(mb));a(za).bigHour=!0});V("Hmm",function(aa,ka,za){za=aa.length-2;ka[wc]=q(aa.substr(0,za));ka[Tc]=q(aa.substr(za))});V("Hmmss",function(aa,ka,za){za=aa.length-4;var La=aa.length-2;ka[wc]=q(aa.substr(0,za));ka[Tc]=q(aa.substr(za,2));ka[fd]=q(aa.substr(La))});var Cd=fa("Hours",!0),td={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",
lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:Sc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:ke,meridiemParse:/[ap]\.?m?\.?/i},Lc={},Ad={},sd,Jd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Kd=/Z|[+-]\d\d(?::?\d\d)?/,ud=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],gd=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ld=/^\/?Date\((\-?\d+)/i,Ed=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Sd={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};u.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(aa){aa._d=new Date(aa._i+(aa._useUTC?" UTC":""))});u.ISO_8601=function(){};u.RFC_2822=function(){};var He=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var aa=nb.apply(null,arguments);return this.isValid()&&aa.isValid()?aa<this?this:aa:d()}),vd=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var aa=nb.apply(null,arguments);return this.isValid()&&aa.isValid()?
aa>this?this:aa:d()}),Ac="year quarter month week day hour minute second millisecond".split(" ");Kb("Z",":");Kb("ZZ","");J("Z",Od);J("ZZ",Od);V(["Z","ZZ"],function(aa,ka,za){za._useUTC=!0;za._tzm=kb(Od,aa)});var le=/([\+\-]|\d\d)/gi;u.updateOffset=function(){};var me=/^(\-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Td=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;xb.fn=Tb.prototype;
xb.invalid=function(){return xb(NaN)};var ae=hb(1,"add"),Ie=hb(-1,"subtract");u.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";u.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Je=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(aa){return void 0===aa?this.localeData():this.locale(aa)});H(0,["gg",2],0,function(){return this.weekYear()%100});H(0,["GG",2],0,function(){return this.isoWeekYear()%100});zc("gggg",
"weekYear");zc("ggggg","weekYear");zc("GGGG","isoWeekYear");zc("GGGGG","isoWeekYear");D("weekYear","gg");D("isoWeekYear","GG");tc.weekYear=1;tc.isoWeekYear=1;J("G",Bd);J("g",Bd);J("GG",Ec,Wc);J("gg",Ec,Wc);J("GGGG",Zd,Wd);J("gggg",Zd,Wd);J("GGGGG",Fd,Nd);J("ggggg",Fd,Nd);Q(["gggg","ggggg","GGGG","GGGGG"],function(aa,ka,za,La){ka[La.substr(0,2)]=q(aa)});Q(["gg","GG"],function(aa,ka,za,La){ka[La]=u.parseTwoDigitYear(aa)});H("Q",0,"Qo","quarter");D("quarter","Q");tc.quarter=7;J("Q",Ud);V("Q",function(aa,
ka){ka[ld]=3*(q(aa)-1)});H("D",["DD",2],"Do","date");D("date","D");tc.date=9;J("D",Ec);J("DD",Ec,Wc);J("Do",function(aa,ka){return aa?ka._dayOfMonthOrdinalParse||ka._ordinalParse:ka._dayOfMonthOrdinalParseLenient});V(["D","DD"],Ic);V("Do",function(aa,ka){ka[Ic]=q(aa.match(Ec)[0])});var be=fa("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear");D("dayOfYear","DDD");tc.dayOfYear=4;J("DDD",cd);J("DDDD",Vd);V(["DDD","DDDD"],function(aa,ka,za){za._dayOfYear=q(aa)});H("m",["mm",2],0,"minute");D("minute","m");
tc.minute=14;J("m",Ec);J("mm",Ec,Wc);V(["m","mm"],Tc);var Ke=fa("Minutes",!1);H("s",["ss",2],0,"second");D("second","s");tc.second=15;J("s",Ec);J("ss",Ec,Wc);V(["s","ss"],fd);var qe=fa("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)});H(0,["SS",2],0,function(){return~~(this.millisecond()/10)});H(0,["SSS",3],0,"millisecond");H(0,["SSSS",4],0,function(){return 10*this.millisecond()});H(0,["SSSSS",5],0,function(){return 100*this.millisecond()});H(0,["SSSSSS",6],0,function(){return 1E3*
this.millisecond()});H(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});H(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});H(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});D("millisecond","ms");tc.millisecond=16;J("S",cd,Ud);J("SS",cd,Wc);J("SSS",cd,Vd);var hd;for(hd="SSSS";9>=hd.length;hd+="S")J(hd,oe);for(hd="S";9>=hd.length;hd+="S")V(hd,Qc);var re=fa("Milliseconds",!1);H("z",0,0,"zoneAbbr");H("zz",0,0,"zoneName");var Gb=l.prototype;Gb.add=ae;Gb.calendar=
function(aa,ka){aa=aa||nb();var za=rb(aa,this).startOf("day");za=u.calendarFormat(this,za)||"sameElse";ka=ka&&(y(ka[za])?ka[za].call(this,aa):ka[za]);return this.format(ka||this.localeData().calendar(za,this,nb(aa)))};Gb.clone=function(){return new l(this)};Gb.diff=function(aa,ka,za){if(!this.isValid())return NaN;aa=rb(aa,this);if(!aa.isValid())return NaN;var La=6E4*(aa.utcOffset()-this.utcOffset());ka=F(ka);switch(ka){case "year":ka=Db(this,aa)/12;break;case "month":ka=Db(this,aa);break;case "quarter":ka=
Db(this,aa)/3;break;case "second":ka=(this-aa)/1E3;break;case "minute":ka=(this-aa)/6E4;break;case "hour":ka=(this-aa)/36E5;break;case "day":ka=(this-aa-La)/864E5;break;case "week":ka=(this-aa-La)/6048E5;break;default:ka=this-aa}return za?ka:k(ka)};Gb.endOf=function(aa){aa=F(aa);if(void 0===aa||"millisecond"===aa)return this;"date"===aa&&(aa="day");return this.startOf(aa).add(1,"isoWeek"===aa?"week":aa).subtract(1,"ms")};Gb.format=function(aa){aa||(aa=this.isUtc()?u.defaultFormatUtc:u.defaultFormat);
aa=L(this,aa);return this.localeData().postformat(aa)};Gb.from=function(aa,ka){return this.isValid()&&(m(aa)&&aa.isValid()||nb(aa).isValid())?xb({to:this,from:aa}).locale(this.locale()).humanize(!ka):this.localeData().invalidDate()};Gb.fromNow=function(aa){return this.from(nb(),aa)};Gb.to=function(aa,ka){return this.isValid()&&(m(aa)&&aa.isValid()||nb(aa).isValid())?xb({from:this,to:aa}).locale(this.locale()).humanize(!ka):this.localeData().invalidDate()};Gb.toNow=function(aa){return this.to(nb(),
aa)};Gb.get=function(aa){aa=F(aa);return y(this[aa])?this[aa]():this};Gb.invalidAt=function(){return a(this).overflow};Gb.isAfter=function(aa,ka){aa=m(aa)?aa:nb(aa);if(!this.isValid()||!aa.isValid())return!1;ka=F(ka)||"millisecond";return"millisecond"===ka?this.valueOf()>aa.valueOf():aa.valueOf()<this.clone().startOf(ka).valueOf()};Gb.isBefore=function(aa,ka){aa=m(aa)?aa:nb(aa);if(!this.isValid()||!aa.isValid())return!1;ka=F(ka)||"millisecond";return"millisecond"===ka?this.valueOf()<aa.valueOf():
this.clone().endOf(ka).valueOf()<aa.valueOf()};Gb.isBetween=function(aa,ka,za,La){aa=m(aa)?aa:nb(aa);ka=m(ka)?ka:nb(ka);if(!(this.isValid()&&aa.isValid()&&ka.isValid()))return!1;La=La||"()";return("("===La[0]?this.isAfter(aa,za):!this.isBefore(aa,za))&&(")"===La[1]?this.isBefore(ka,za):!this.isAfter(ka,za))};Gb.isSame=function(aa,ka){aa=m(aa)?aa:nb(aa);if(!this.isValid()||!aa.isValid())return!1;ka=F(ka)||"millisecond";if("millisecond"===ka)return this.valueOf()===aa.valueOf();aa=aa.valueOf();return this.clone().startOf(ka).valueOf()<=
aa&&aa<=this.clone().endOf(ka).valueOf()};Gb.isSameOrAfter=function(aa,ka){return this.isSame(aa,ka)||this.isAfter(aa,ka)};Gb.isSameOrBefore=function(aa,ka){return this.isSame(aa,ka)||this.isBefore(aa,ka)};Gb.isValid=function(){return c(this)};Gb.lang=Je;Gb.locale=ac;Gb.localeData=kc;Gb.max=vd;Gb.min=He;Gb.parsingFlags=function(){return e({},a(this))};Gb.set=function(aa,ka){if("object"===typeof aa){aa=E(aa);ka=G(aa);for(var za=0;za<ka.length;za++)this[ka[za].unit](aa[ka[za].unit])}else if(aa=F(aa),
y(this[aa]))return this[aa](ka);return this};Gb.startOf=function(aa){aa=F(aa);switch(aa){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===aa&&this.weekday(0);"isoWeek"===aa&&this.isoWeekday(1);"quarter"===aa&&this.month(3*Math.floor(this.month()/3));return this};Gb.subtract=Ie;Gb.toArray=function(){return[this.year(),
this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};Gb.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Gb.toDate=function(){return new Date(this.valueOf())};Gb.toISOString=function(aa){if(!this.isValid())return null;var ka=(aa=!0!==aa)?this.clone().utc():this;return 0>ka.year()||9999<ka.year()?L(ka,aa?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":
"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):y(Date.prototype.toISOString)?aa?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",L(ka,"Z")):L(ka,aa?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};Gb.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var aa="moment",ka="";this.isLocal()||(aa=0===this.utcOffset()?"moment.utc":"moment.parseZone",ka="Z");aa="["+aa+'("]';var za=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";
return this.format(aa+za+"-MM-DD[T]HH:mm:ss.SSS"+(ka+'[")]'))};Gb.toJSON=function(){return this.isValid()?this.toISOString():null};Gb.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};Gb.unix=function(){return Math.floor(this.valueOf()/1E3)};Gb.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};Gb.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Gb.year=Hd;Gb.isLeapYear=
function(){return Y(this.year())};Gb.weekYear=function(aa){return Zb.call(this,aa,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Gb.isoWeekYear=function(aa){return Zb.call(this,aa,this.isoWeek(),this.isoWeekday(),1,4)};Gb.quarter=Gb.quarters=function(aa){return null==aa?Math.ceil((this.month()+1)/3):this.month(3*(aa-1)+this.month()%3)};Gb.month=S;Gb.daysInMonth=function(){return la(this.year(),this.month())};Gb.week=Gb.weeks=function(aa){var ka=this.localeData().week(this);
return null==aa?ka:this.add(7*(aa-ka),"d")};Gb.isoWeek=Gb.isoWeeks=function(aa){var ka=Ja(this,1,4).week;return null==aa?ka:this.add(7*(aa-ka),"d")};Gb.weeksInYear=function(){var aa=this.localeData()._week;return va(this.year(),aa.dow,aa.doy)};Gb.isoWeeksInYear=function(){return va(this.year(),1,4)};Gb.date=be;Gb.day=Gb.days=function(aa){if(!this.isValid())return null!=aa?this:NaN;var ka=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=aa){var za=this.localeData();"string"===typeof aa&&(isNaN(aa)?
(aa=za.weekdaysParse(aa),aa="number"===typeof aa?aa:null):aa=parseInt(aa,10));return this.add(aa-ka,"d")}return ka};Gb.weekday=function(aa){if(!this.isValid())return null!=aa?this:NaN;var ka=(this.day()+7-this.localeData()._week.dow)%7;return null==aa?ka:this.add(aa-ka,"d")};Gb.isoWeekday=function(aa){if(!this.isValid())return null!=aa?this:NaN;if(null!=aa){var ka=this.localeData();aa="string"===typeof aa?ka.weekdaysParse(aa)%7||7:isNaN(aa)?null:aa;return this.day(this.day()%7?aa:aa-7)}return this.day()||
7};Gb.dayOfYear=function(aa){var ka=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==aa?ka:this.add(aa-ka,"d")};Gb.hour=Gb.hours=Cd;Gb.minute=Gb.minutes=Ke;Gb.second=Gb.seconds=qe;Gb.millisecond=Gb.milliseconds=re;Gb.utcOffset=function(aa,ka,za){var La=this._offset||0,mb;if(!this.isValid())return null!=aa?this:NaN;if(null!=aa){if("string"===typeof aa){if(aa=kb(Od,aa),null===aa)return this}else 16>Math.abs(aa)&&!za&&(aa*=60);!this._isUTC&&ka&&(mb=15*-Math.round(this._d.getTimezoneOffset()/
15));this._offset=aa;this._isUTC=!0;null!=mb&&this.add(mb,"m");La!==aa&&(!ka||this._changeInProgress?Cb(this,xb(aa-La,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,u.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?La:15*-Math.round(this._d.getTimezoneOffset()/15)};Gb.utc=function(aa){return this.utcOffset(0,aa)};Gb.local=function(aa){this._isUTC&&(this.utcOffset(0,aa),this._isUTC=!1,aa&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),
"m"));return this};Gb.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var aa=kb(pe,this._i);null!=aa?this.utcOffset(aa):this.utcOffset(0,!0)}return this};Gb.hasAlignedHourOffset=function(aa){if(!this.isValid())return!1;aa=aa?nb(aa).utcOffset():0;return 0===(this.utcOffset()-aa)%60};Gb.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};Gb.isLocal=function(){return this.isValid()?
!this._isUTC:!1};Gb.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Gb.isUtc=zb;Gb.isUTC=zb;Gb.zoneAbbr=function(){return this._isUTC?"UTC":""};Gb.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};Gb.dates=A("dates accessor is deprecated. Use date instead.",be);Gb.months=A("months accessor is deprecated. Use month instead",S);Gb.years=A("years accessor is deprecated. Use year instead",Hd);Gb.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(aa,ka){return null!=aa?("string"!==typeof aa&&(aa=-aa),this.utcOffset(aa,ka),this):-this.utcOffset()});Gb.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var aa={};f(aa,this);aa=ub(aa);if(aa._a){var ka=aa._isUTC?b(aa._a):nb(aa._a);this._isDSTShifted=this.isValid()&&0<t(aa._a,ka.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var Bc=C.prototype;
Bc.calendar=function(aa,ka,za){aa=this._calendar[aa]||this._calendar.sameElse;return y(aa)?aa.call(ka,za):aa};Bc.longDateFormat=function(aa){var ka=this._longDateFormat[aa],za=this._longDateFormat[aa.toUpperCase()];if(ka||!za)return ka;this._longDateFormat[aa]=za.replace(/MMMM|MM|DD|dddd/g,function(La){return La.slice(1)});return this._longDateFormat[aa]};Bc.invalidDate=function(){return this._invalidDate};Bc.ordinal=function(aa){return this._ordinal.replace("%d",aa)};Bc.preparse=fc;Bc.postformat=
fc;Bc.relativeTime=function(aa,ka,za,La){var mb=this._relativeTime[za];return y(mb)?mb(aa,ka,za,La):mb.replace(/%d/i,aa)};Bc.pastFuture=function(aa,ka){aa=this._relativeTime[0<aa?"future":"past"];return y(aa)?aa(ka):aa.replace(/%s/i,ka)};Bc.set=function(aa){var ka;for(ka in aa){var za=aa[ka];y(za)?this[ka]=za:this["_"+ka]=za}this._config=aa;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Bc.months=function(aa,ka){return aa?
n(this._months)?this._months[aa.month()]:this._months[(this._months.isFormat||$d).test(ka)?"format":"standalone"][aa.month()]:n(this._months)?this._months:this._months.standalone};Bc.monthsShort=function(aa,ka){return aa?n(this._monthsShort)?this._monthsShort[aa.month()]:this._monthsShort[$d.test(ka)?"format":"standalone"][aa.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};Bc.monthsParse=function(aa,ka,za){var La;if(this._monthsParseExact){a:{aa=aa.toLocaleLowerCase();
if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],La=0;12>La;++La){var mb=b([2E3,La]);this._shortMonthsParse[La]=this.monthsShort(mb,"").toLocaleLowerCase();this._longMonthsParse[La]=this.months(mb,"").toLocaleLowerCase()}if(za)ka="MMM"===ka?Dc.call(this._shortMonthsParse,aa):Dc.call(this._longMonthsParse,aa);else if("MMM"===ka){ka=Dc.call(this._shortMonthsParse,aa);if(-1!==ka)break a;ka=Dc.call(this._longMonthsParse,aa)}else{ka=Dc.call(this._longMonthsParse,
aa);if(-1!==ka)break a;ka=Dc.call(this._shortMonthsParse,aa)}ka=-1!==ka?ka:null}return ka}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(La=0;12>La;La++)if(mb=b([2E3,La]),za&&!this._longMonthsParse[La]&&(this._longMonthsParse[La]=new RegExp("^"+this.months(mb,"").replace(".","")+"$","i"),this._shortMonthsParse[La]=new RegExp("^"+this.monthsShort(mb,"").replace(".","")+"$","i")),za||this._monthsParse[La]||(mb="^"+this.months(mb,"")+"|^"+this.monthsShort(mb,
""),this._monthsParse[La]=new RegExp(mb.replace(".",""),"i")),za&&"MMMM"===ka&&this._longMonthsParse[La].test(aa)||za&&"MMM"===ka&&this._shortMonthsParse[La].test(aa)||!za&&this._monthsParse[La].test(aa))return La};Bc.monthsRegex=function(aa){if(this._monthsParseExact)return g(this,"_monthsRegex")||ea.call(this),aa?this._monthsStrictRegex:this._monthsRegex;g(this,"_monthsRegex")||(this._monthsRegex=Gd);return this._monthsStrictRegex&&aa?this._monthsStrictRegex:this._monthsRegex};Bc.monthsShortRegex=
function(aa){if(this._monthsParseExact)return g(this,"_monthsRegex")||ea.call(this),aa?this._monthsShortStrictRegex:this._monthsShortRegex;g(this,"_monthsShortRegex")||(this._monthsShortRegex=Gd);return this._monthsShortStrictRegex&&aa?this._monthsShortStrictRegex:this._monthsShortRegex};Bc.week=function(aa){return Ja(aa,this._week.dow,this._week.doy).week};Bc.firstDayOfYear=function(){return this._week.doy};Bc.firstDayOfWeek=function(){return this._week.dow};Bc.weekdays=function(aa,ka){return aa?
n(this._weekdays)?this._weekdays[aa.day()]:this._weekdays[this._weekdays.isFormat.test(ka)?"format":"standalone"][aa.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone};Bc.weekdaysMin=function(aa){return aa?this._weekdaysMin[aa.day()]:this._weekdaysMin};Bc.weekdaysShort=function(aa){return aa?this._weekdaysShort[aa.day()]:this._weekdaysShort};Bc.weekdaysParse=function(aa,ka,za){var La;if(this._weekdaysParseExact)return ra.call(this,aa,ka,za);this._weekdaysParse||(this._weekdaysParse=
[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(La=0;7>La;La++){var mb=b([2E3,1]).day(La);za&&!this._fullWeekdaysParse[La]&&(this._fullWeekdaysParse[La]=new RegExp("^"+this.weekdays(mb,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[La]=new RegExp("^"+this.weekdaysShort(mb,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[La]=new RegExp("^"+this.weekdaysMin(mb,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[La]||(mb="^"+this.weekdays(mb,
"")+"|^"+this.weekdaysShort(mb,"")+"|^"+this.weekdaysMin(mb,""),this._weekdaysParse[La]=new RegExp(mb.replace(".",""),"i"));if(za&&"dddd"===ka&&this._fullWeekdaysParse[La].test(aa)||za&&"ddd"===ka&&this._shortWeekdaysParse[La].test(aa)||za&&"dd"===ka&&this._minWeekdaysParse[La].test(aa)||!za&&this._weekdaysParse[La].test(aa))return La}};Bc.weekdaysRegex=function(aa){if(this._weekdaysParseExact)return g(this,"_weekdaysRegex")||Ba.call(this),aa?this._weekdaysStrictRegex:this._weekdaysRegex;g(this,"_weekdaysRegex")||
(this._weekdaysRegex=Gd);return this._weekdaysStrictRegex&&aa?this._weekdaysStrictRegex:this._weekdaysRegex};Bc.weekdaysShortRegex=function(aa){if(this._weekdaysParseExact)return g(this,"_weekdaysRegex")||Ba.call(this),aa?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;g(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gd);return this._weekdaysShortStrictRegex&&aa?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};Bc.weekdaysMinRegex=function(aa){if(this._weekdaysParseExact)return g(this,
"_weekdaysRegex")||Ba.call(this),aa?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;g(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Gd);return this._weekdaysMinStrictRegex&&aa?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};Bc.isPM=function(aa){return"p"===(aa+"").toLowerCase().charAt(0)};Bc.meridiem=function(aa,ka,za){return 11<aa?za?"pm":"PM":za?"am":"AM"};Ka("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(aa){var ka=aa%10;ka=1===q(aa%100/10)?"th":1===ka?"st":
2===ka?"nd":3===ka?"rd":"th";return aa+ka}});u.lang=A("moment.lang is deprecated. Use moment.locale instead.",Ka);u.langData=A("moment.langData is deprecated. Use moment.localeData instead.",Pa);var id=Math.abs,se=lb("ms"),te=lb("s"),ce=lb("m"),ad=lb("h"),de=lb("d"),ue=lb("w"),ve=lb("M"),we=lb("y"),xe=pb("milliseconds"),ee=pb("seconds"),wd=pb("minutes"),fe=pb("hours"),ye=pb("days"),ze=pb("months"),Te=pb("years"),xd=Math.round,Uc={ss:44,s:45,m:45,h:22,d:26,M:11},ne=Math.abs,Qb=Tb.prototype;Qb.isValid=
function(){return this._isValid};Qb.abs=function(){var aa=this._data;this._milliseconds=id(this._milliseconds);this._days=id(this._days);this._months=id(this._months);aa.milliseconds=id(aa.milliseconds);aa.seconds=id(aa.seconds);aa.minutes=id(aa.minutes);aa.hours=id(aa.hours);aa.months=id(aa.months);aa.years=id(aa.years);return this};Qb.add=function(aa,ka){return Va(this,aa,ka,1)};Qb.subtract=function(aa,ka){return Va(this,aa,ka,-1)};Qb.as=function(aa){if(!this.isValid())return NaN;var ka=this._milliseconds;
aa=F(aa);if("month"===aa||"year"===aa){var za=this._days+ka/864E5;za=this._months+4800*za/146097;return"month"===aa?za:za/12}za=this._days+Math.round(146097*this._months/4800);switch(aa){case "week":return za/7+ka/6048E5;case "day":return za+ka/864E5;case "hour":return 24*za+ka/36E5;case "minute":return 1440*za+ka/6E4;case "second":return 86400*za+ka/1E3;case "millisecond":return Math.floor(864E5*za)+ka;default:throw Error("Unknown unit "+aa);}};Qb.asMilliseconds=se;Qb.asSeconds=te;Qb.asMinutes=ce;
Qb.asHours=ad;Qb.asDays=de;Qb.asWeeks=ue;Qb.asMonths=ve;Qb.asYears=we;Qb.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*q(this._months/12):NaN};Qb._bubble=function(){var aa=this._milliseconds,ka=this._days,za=this._months,La=this._data;0<=aa&&0<=ka&&0<=za||0>=aa&&0>=ka&&0>=za||(aa+=864E5*ib(146097*za/4800+ka),za=ka=0);La.milliseconds=aa%1E3;aa=k(aa/1E3);La.seconds=aa%60;aa=k(aa/60);La.minutes=aa%60;aa=k(aa/60);La.hours=aa%24;ka+=k(aa/24);
aa=k(4800*ka/146097);za+=aa;ka-=ib(146097*aa/4800);aa=k(za/12);La.days=ka;La.months=za%12;La.years=aa;return this};Qb.clone=function(){return xb(this)};Qb.get=function(aa){aa=F(aa);return this.isValid()?this[aa+"s"]():NaN};Qb.milliseconds=xe;Qb.seconds=ee;Qb.minutes=wd;Qb.hours=fe;Qb.days=ye;Qb.weeks=function(){return k(this.days()/7)};Qb.months=ze;Qb.years=Te;Qb.humanize=function(aa){if(!this.isValid())return this.localeData().invalidDate();var ka=this.localeData();var za=!aa;var La=xb(this).abs(),
mb=xd(La.as("s")),Eb=xd(La.as("m")),wb=xd(La.as("h")),dc=xd(La.as("d")),uc=xd(La.as("M"));La=xd(La.as("y"));mb=mb<=Uc.ss&&["s",mb]||mb<Uc.s&&["ss",mb]||1>=Eb&&["m"]||Eb<Uc.m&&["mm",Eb]||1>=wb&&["h"]||wb<Uc.h&&["hh",wb]||1>=dc&&["d"]||dc<Uc.d&&["dd",dc]||1>=uc&&["M"]||uc<Uc.M&&["MM",uc]||1>=La&&["y"]||["yy",La];mb[2]=za;mb[3]=0<+this;mb[4]=ka;za=Jb.apply(null,mb);aa&&(za=ka.pastFuture(+this,za));return ka.postformat(za)};Qb.toISOString=nc;Qb.toString=nc;Qb.toJSON=nc;Qb.locale=ac;Qb.localeData=kc;Qb.toIsoString=
A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nc);Qb.lang=Je;H("X",0,0,"unix");H("x",0,0,"valueOf");J("x",Bd);J("X",/[+-]?\d+(\.\d{1,3})?/);V("X",function(aa,ka,za){za._d=new Date(1E3*parseFloat(aa,10))});V("x",function(aa,ka,za){za._d=new Date(q(aa))});u.version="2.23.0";var Jc=nb;u.fn=Gb;u.min=function(){var aa=[].slice.call(arguments,0);return Nb("isBefore",aa)};u.max=function(){var aa=[].slice.call(arguments,0);return Nb("isAfter",aa)};u.now=function(){return Date.now?
Date.now():+new Date};u.utc=b;u.unix=function(aa){return nb(1E3*aa)};u.months=function(aa,ka){return jd(aa,ka,"months")};u.isDate=z;u.locale=Ka;u.invalid=d;u.duration=xb;u.isMoment=m;u.weekdays=function(aa,ka,za){return bd(aa,ka,za,"weekdays")};u.parseZone=function(){return nb.apply(null,arguments).parseZone()};u.localeData=Pa;u.isDuration=$b;u.monthsShort=function(aa,ka){return jd(aa,ka,"monthsShort")};u.weekdaysMin=function(aa,ka,za){return bd(aa,ka,za,"weekdaysMin")};u.defineLocale=Wa;u.updateLocale=
function(aa,ka){if(null!=ka){var za=td;var La=Aa(aa);null!=La&&(za=La._config);ka=B(za,ka);ka=new C(ka);ka.parentLocale=Lc[aa];Lc[aa]=ka;Ka(aa)}else null!=Lc[aa]&&(null!=Lc[aa].parentLocale?Lc[aa]=Lc[aa].parentLocale:null!=Lc[aa]&&delete Lc[aa]);return Lc[aa]};u.locales=function(){return Gc(Lc)};u.weekdaysShort=function(aa,ka,za){return bd(aa,ka,za,"weekdaysShort")};u.normalizeUnits=F;u.relativeTimeRounding=function(aa){return void 0===aa?xd:"function"===typeof aa?(xd=aa,!0):!1};u.relativeTimeThreshold=
function(aa,ka){if(void 0===Uc[aa])return!1;if(void 0===ka)return Uc[aa];Uc[aa]=ka;"s"===aa&&(Uc.ss=ka-1);return!0};u.calendarFormat=function(aa,ka){aa=aa.diff(ka,"days",!0);return-6>aa?"sameElse":-1>aa?"lastWeek":0>aa?"lastDay":1>aa?"sameDay":2>aa?"nextDay":7>aa?"nextWeek":"sameElse"};u.prototype=Gb;u.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",
WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return u})},"app/utils/formatters":function(){define(["require","exports","tslib","esri/intl/locale"],function(u,n,h,r){Object.defineProperty(n,"__esModule",{value:!0});n.time=n.titleWithoutGuid=n.shortenNumber=n.completeDate=n.fullDate=void 0;r=h.__importStar(r);n.fullDate=function(v){var z=r.getLocale()||"en-us",p={year:"numeric",month:"short",day:"numeric"};return v&&-1<v?(new Intl.DateTimeFormat(z,p)).format(v):""};n.completeDate=function(v){var z=r.getLocale()||
"en-us",p={dateStyle:"full",timeStyle:"full",hour12:!1};return v&&-1<v?(new Intl.DateTimeFormat(z,p)).format(v):""};n.shortenNumber=function(v){var z=r.getLocale()||"en-us",p={style:"decimal"};return 1E6<=v?(new Intl.NumberFormat(z,p)).format(Math.round(v/1E5)/10)+"M":1E3<=v?(new Intl.NumberFormat(z,p)).format(Math.round(v/100)/10)+"K":v};n.titleWithoutGuid=function(v){return v.replace(/\b-[a-f\d]{32}\b/,"")};n.time=function(v,z){void 0===z&&(z=!0);var p=r.getLocale()||"en-us",g={hour:"numeric",minute:"numeric",
hour12:!1};z&&(g.second="numeric");return v&&-1<v?(new Intl.DateTimeFormat(p,g)).format(v):""}})},"app/utils/urlUtils":function(){define("require exports tslib esri/geometry/Extent esri/geometry/Point ./pictureMarkerSymbol".split(" "),function(u,n,h,r,v,z){function p(){var d=g()||{},f;for(f in d)d.hasOwnProperty(f)&&"string"===typeof d[f]&&(d[f]=d[f].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,""));return d}function g(){var d=location.search.substring(1);if(d){var f={},l=0;for(d=d.split("\x26");l<d.length;l++){var m=
d[l];if(m){var k=m.indexOf("\x3d"),q=void 0,t=void 0;0>k?(q=decodeURIComponent(m),t=""):(q=decodeURIComponent(m.slice(0,k)),t=decodeURIComponent(m.slice(k+1)));m=f[q];"string"===typeof m&&(m=f[q]=[m]);Array.isArray(m)?m.push(t):f[q]=t}}return f}return""}function e(d){var f={},l=encodeURIComponent,m=[],k;for(k in d){var q=d[k];if(q!==f[k]){var t=l(k)+"\x3d";if(Array.isArray(q))for(var w=0,A=q.length;w<A;++w)m.push(t+l(q[w]));else m.push(t+l(q))}}return m.join("\x26")}function b(d){var f=(d||{}).portalUrl;
d=(d||{}).isDebug;d=void 0===d?!1:d;var l=window.location,m=l.host;l=l.protocol;var k=a();d||(f=l+"//"+m+k+"sharing/rest/");return f}function a(){var d=window.location.pathname.split("/").filter(function(f){return f});d=d&&d.length?d[0]:"/";return"/"!==d&&"home"!==d?""+d:d}function c(d){if(!d)return null;var f=d.split(";");return 1===f.length?d.split(","):f}Object.defineProperty(n,"__esModule",{value:!0});n.getBasemap=n.getGraphic=n.parseMarker=n.getExtent=n.getZoom=n.getPoint=n.getPortalContext=
n.getPortalRestBaseUrl=n.getBaseUrl=n.cleanUrl=n.objectToQuery=n.queryToObject=n.urlWithoutParams=n.urlParams=void 0;r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importDefault(z);n.urlParams=p;n.urlWithoutParams=function(d){var f=d.indexOf("?");return-1!==f?d.slice(0,f):d};n.queryToObject=g;n.objectToQuery=e;n.cleanUrl=function(){var d=g()||{},f=p();if(f.hasOwnProperty("locale")){delete d.locale;var l=decodeURIComponent(e(d));window.history.pushState(null,null,location.pathname+"?"+l)}if(f.hasOwnProperty("layers")||
f.hasOwnProperty("url")||f.hasOwnProperty("webmap"))delete d.viewingmode,l=decodeURIComponent(e(d)),window.history.pushState(null,null,location.pathname+"?"+l)};n.getBaseUrl=function(d,f){if(f){d=f.customBaseUrl;var l=f.portalHostname;f=f.urlKey;return window.location.protocol+"//"+(f?f+"."+d:l)}return b(d)};n.getPortalRestBaseUrl=b;n.getPortalContext=a;n.getPoint=function(d){if(!d)return null;var f=c(d),l=f.length;if(2>l)return null;d=parseFloat(f[0]);var m=parseFloat(f[1]);if(isNaN(d)||isNaN(m))return null;
f=3===l?parseInt(f[2],10):4326;return new v.default({x:d,y:m,spatialReference:{wkid:f}})};n.getZoom=function(d){return d&&parseInt(d,10)};n.getExtent=function(d){if(!d)return null;var f=c(d),l=f.length;if(4>l)return null;d=parseFloat(f[0]);var m=parseFloat(f[1]),k=parseFloat(f[2]),q=parseFloat(f[3]);if(isNaN(d)||isNaN(m)||isNaN(k)||isNaN(q))return null;f=5===l?parseInt(f[4],10):4326;return new r.default({xmin:d,ymin:m,xmax:k,ymax:q,spatialReference:{wkid:f}})};n.parseMarker=function(d){return h.__awaiter(this,
void 0,void 0,function(){var f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H;return h.__generator(this,function(K){switch(K.label){case 0:if(!d)return[2,Promise.resolve()];f=c(d);l=f.length;return 2>l?[2,Promise.reject()]:[4,Promise.all([(new Promise(function(P,L){u(["esri/Graphic"],P,L)})).then(h.__importStar),(new Promise(function(P,L){u(["esri/PopupTemplate"],P,L)})).then(h.__importStar),(new Promise(function(P,L){u(["esri/symbols/PictureMarkerSymbol"],P,L)})).then(h.__importStar),(new Promise(function(P,
L){u(["esri/symbols/SimpleMarkerSymbol"],P,L)})).then(h.__importStar)])];case 1:return m=K.sent(),k=m[0],q=m[1],t=m[2],w=m[3],A=parseFloat(f[0]),x=parseFloat(f[1]),y=f[3],B=f[4]||z.default(),C=f[5],D=f[2]?parseInt(f[2],10):4326,F=B?new t.default({url:B,height:"32px",width:"32px"}):new w.default({outline:{width:1},size:14,color:[255,255,255,0]}),E=new v.default({x:A,y:x,spatialReference:{wkid:D}}),O=(G=y||C)?new q.default({title:y||null,content:C||null}):null,H=new k.default({geometry:E,symbol:F,popupTemplate:O}),
[2,H]}})})};n.getGraphic=function(d){return h.__awaiter(this,void 0,void 0,function(){var f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K;return h.__generator(this,function(P){switch(P.label){case 0:if(!d)return[2,Promise.resolve()];f=c(d);l=f.length;return 2>l?[2,Promise.reject()]:[4,Promise.all([(new Promise(function(L,M){u(["esri/Graphic"],L,M)})).then(h.__importStar),(new Promise(function(L,M){u(["esri/PopupTemplate"],L,M)})).then(h.__importStar),(new Promise(function(L,M){u(["esri/symbols/PictureMarkerSymbol"],
L,M)})).then(h.__importStar)])];case 1:return m=P.sent(),k=m[0],q=m[1],t=m[2],w=parseFloat(f[0]),A=parseFloat(f[1]),x=f[3],y=f[4],B=f[5],C=f[2]?parseInt(f[2],10):4326,D={url:u.toUrl("./symbols/marker.png"),width:"32px",height:"32px"},F=y?{url:y,height:"32px",width:"32px"}:D,E=new t.default(F),G=new v.default({x:w,y:A,spatialReference:{wkid:C}}),H=(O=x||B)?new q.default({title:x||null,content:B||null}):null,K=new k.default({geometry:G,symbol:E,popupTemplate:H}),[2,K]}})})};n.getBasemap=function(d,
f){return h.__awaiter(this,void 0,void 0,function(){var l,m,k,q,t,w,A,x,y,B,C,D;return h.__generator(this,function(F){switch(F.label){case 0:return d?[4,Promise.all([(new Promise(function(E,G){u(["esri/layers/Layer"],E,G)})).then(h.__importStar),(new Promise(function(E,G){u(["esri/Basemap"],E,G)})).then(h.__importStar)])]:[2,Promise.resolve()];case 1:l=F.sent(),m=l[0],k=l[1],q=m.default.fromArcGISServerUrl({url:d}),t=f?m.default.fromArcGISServerUrl({url:f}):Promise.resolve(),F.label=2;case 2:return F.trys.push([2,
7,,8]),[4,Promise.all([q,t])];case 3:return w=F.sent(),A=w[0],x=w[1],(y=(null===A||void 0===A?void 0:A.loadError)||(null===x||void 0===x?void 0:x.loadError))?[2,Promise.reject(y)]:[3,4];case 4:return B={baseLayers:[A],referenceLayers:x?[x]:[]},C=new k.default(B),[4,C.loadAll()];case 5:return F.sent(),[2,C];case 6:return[3,8];case 7:return D=F.sent(),[2,Promise.reject(D)];case 8:return[2]}})})}})},"app/utils/pictureMarkerSymbol":function(){define(["require","exports"],function(u,n){Object.defineProperty(n,
"__esModule",{value:!0});n.default=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDMjdDMDU2RTdEM0ExMUUzOTkyRUU3OTg1MDdCQzMzRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDMjdDMDU2RjdEM0ExMUUzOTkyRUU3OTg1MDdCQzMzRSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMyN0MwNTZDN0QzQTExRTM5OTJFRTc5ODUwN0JDMzNFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMyN0MwNTZEN0QzQTExRTM5OTJFRTc5ODUwN0JDMzNFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+aJP1/QAAAeNJREFUeNpi/P//PwM+IOdS4gCkEoA4AIj50aQ/AvEGIF7waE/PAXzmMOKzCGjJBGY2rnxeKQ0GNl5hBiAbRf7vr28Mvz6/Zfj87AaIPRFoWQHJFgEtKWDl4u8XVrNmYGRmRZH79uE1RDMTMwMLGzsDCysbw9tbRxl+f/tYCLRsAjbzmPD4toBfwRDDEmTw/99fht8/gL768Z0BpBakB5daFjwWybNyokYJLycLg6okN8PPLwwMN558YPj87TckCH//ZGAXEGVgYmaVJ8ciFOBjIs5Q6KvEwMMB0fLl+2+GjlWXGDYee0iUfiZiFBkp8TPUhqrBLQEBHk5WhpZ4YwZTNVG42L+/vymzKNJWGqdcrIsK9XyE7BN0wMvJSj2Lvvz4g1Pu8/ff1LNo+eGnOOUW77lDPYvO3fvI0Lz6ForPQKmuZuFZhtO3XhNlEdHJe8uZlwwHr76F5qOPKPmIqhZB4uMP2HewIogUwMRAJzBq0cBaxMjISJFFFz88OE/YAGYWBg4+YQao2ovkWOTw/e0jvJaBLGHnEWD4+PACA0gtSA/JFgGr5A/4LMNmCVQP6XGEyzJSLSHYCkJqqAgAqQOcwnL6AsC2AUgPKZYQbRG6ZSA+KZaQZBGyZbDEQqwlIAAQYACcTOWIFuSO8AAAAABJRU5ErkJggg\x3d\x3d"}})},
"app/utils/signin":function(){define(["require","exports","tslib","esri/identity/IdentityManager","./urlUtils"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importStar(v);n.default=function(z){var p=z.config;z=z.portal;r.default.setOAuthRedirectionHandler(function(g){g.authorizeParams.redirectToUserOrgUrl=p.isDebug?void 0:!0;g.authorizeParams.hideCancel=!0;g.authorizeParams.canHandleCrossOrgSignIn=!0;g.authorizeParams.force_login=!0;g.authorizeParams.showSignupOption=
!0;g.authorizeParams.signuptype="esri";window.location.href=g.authorizeUrl+"?"+v.objectToQuery(g.authorizeParams)});return r.default.getCredential(z.url)}})},"esri/views/2d/mapViewDeps":function(){define("exports ./engine/Stage ./LabelManager ./layers/graphics/GraphicsView2D ./layers/graphics/GraphicContainer ./navigation/MapViewNavigation ./magnifier/MagnifierView2D".split(" "),function(u,n,h,r,v,z,p){u.Stage=n.Stage;u.LabelManager=h;u.GraphicsView2D=r;u.GraphicContainer=v;u.MapViewNavigation=z;
u.MagnifierView2D=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/Stage":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/events ../../../core/has ../../../core/maybe ../../../core/reactiveUtils ../../../core/scheduling ../../../chunks/mat3f32 ../../../symbols/cim/CIMResourceManager ./Container ./webgl/enums ./webgl/Painter ./webgl/Profiler ../support/Timeline ../../support/screenshotUtils ../../webgl/context-util ../../webgl/enums ../../webgl/FramebufferObject ../../webgl/RenderingContext".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w){let A=function(x){function y(C,D){var F=x.call(this)||this;F._trash=new Set;F._renderRemainingTime=0;F._lastFrameRenderTime=0;F.renderRequested=!1;F.stage=n._assertThisInitialized(F);F._stationary=!0;const {canvas:E=document.createElement("canvas"),alpha:G=!0,stencil:O=!0,contextOptions:H={}}=D;F._canvas=E;const K=k.createContextOrErrorHTML("2d",E,{alpha:G,antialias:!1,depth:!0,stencil:O});F.context=new w.RenderingContext(z.isSome(K)?K:null,H);F.resourceManager=
new b;F.painter=new d(F.context,n._assertThisInitialized(F),F.resourceManager);v("esri-2d-profiler")&&(F._debugOutput=document.createElement("div"),F._debugOutput.setAttribute("style","margin: 24px 64px; position: absolute; color: red;"),C.appendChild(F._debugOutput));F._renderParameters={drawPhase:0,state:F.state,pixelRatio:window.devicePixelRatio,stationary:!1,globalOpacity:1,blendMode:null,deltaTime:-1,time:0,inFadeTransition:!1,effects:null,context:F.context,painter:F.painter,timeline:D.timeline||
new l.Timeline,renderingOptions:D.renderingOptions,requestRender:()=>F.requestRender(),requireFBO:!1,profiler:new f.Profiler(F.context,F._debugOutput),dataUploadCounter:0};F._taskHandle=g.addFrameTask({render:P=>F.renderFrame(P)});F._taskHandle.pause();F._lostWebGLContextHandle=r.on(E,"webglcontextlost",()=>{F.emit("webgl-error",{error:new h("webgl-context-lost")})});E.setAttribute("style","width: 100%; height:100%; display:block;");C.appendChild(E);return F}n._inheritsLoose(y,x);var B=y.prototype;
B.destroy=function(){this.removeAllChildren();this._emptyTrash();this._taskHandle.remove();this._taskHandle=null;this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null);this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas);this._debugOutput&&this._debugOutput.parentNode&&this._debugOutput.parentNode.removeChild(this._debugOutput);this.highlightOptions=null;this.resourceManager.destroy();this.painter.dispose();this.context.dispose();
this._canvas=null};B.trashDisplayObject=function(C){this._trash.add(C);this.requestRender()};B.untrashDisplayObject=function(C){return this._trash.delete(C)};B.requestRender=function(){this._renderRemainingTime=2E3;this.renderRequested||(this.renderRequested=!0,this.emit("will-render"),this._taskHandle.resume())};B.renderFrame=function(C){this._renderRemainingTime-=this._lastFrameRenderTime?C.time-this._lastFrameRenderTime:0;0>=this._renderRemainingTime&&this._taskHandle.pause();this._lastFrameRenderTime=
C.time;this.renderRequested=!1;this._renderParameters.state=this._state;this._renderParameters.stationary=this.stationary;this._renderParameters.pixelRatio=window.devicePixelRatio;this._renderParameters.globalOpacity=1;this._renderParameters.time=C.time;this._renderParameters.deltaTime=C.deltaTime;this._renderParameters.effects=null;this.processRender(this._renderParameters);this._emptyTrash();this.emit("post-render")};B._createTransforms=function(){return{dvs:e.create()}};B.renderChildren=function(C){for(const D of this.children)D.beforeRender(C);
this._renderChildren(this.children,C);for(const D of this.children)D.afterRender(C)};B._renderChildren=function(C,D){const F=this.context;F.resetInfo();D.profiler.recordStart("drawLayers");D.dataUploadCounter=0;D.drawPhase=c.WGLDrawPhase.MAP;this.painter.beforeRenderLayers(F,this.background);for(const E of C)E.processRender(D);this.painter.prepareDisplay(D,this.background,this.state.padding);this.painter.renderLayers(F);D.drawPhase=c.WGLDrawPhase.HIGHLIGHT;this.painter.beforeRenderLayers(F);for(const E of C)E.processRender(D);
this.painter.renderLayers(F);if(this._isLabelDrawPhaseRequired(C)){D.drawPhase=c.WGLDrawPhase.LABEL;this.painter.beforeRenderLayers(F);for(const E of C)E.processRender(D);this.painter.renderLayers(F)}if(v("esri-tiles-debug")){D.drawPhase=c.WGLDrawPhase.DEBUG;this.painter.beforeRenderLayers(F);for(const E of C)E.processRender(D);this.painter.renderLayers(F)}D.profiler.recordEnd("drawLayers");F.logInfo()};B.doRender=function(C){const D=this.context,{state:F,pixelRatio:E}=C;this._resizeCanvas(C);D.setViewport(0,
0,E*F.size[0],E*F.size[1]);D.setDepthWriteEnabled(!0);D.setStencilWriteMask(255);x.prototype.doRender.call(this,C)};B.takeScreenshot=function(){var C=n._asyncToGenerator(function*(D){const {framebufferWidth:F,framebufferHeight:E}={framebufferWidth:Math.round(this.state.size[0]*D.resolutionScale),framebufferHeight:Math.round(this.state.size[1]*D.resolutionScale)};var G=this.context,O=this._state.clone();if(null!=D.rotation){var H=O.viewpoint;O.viewpoint.rotation=D.rotation;O.viewpoint=H}var K={...this._renderParameters,
drawPhase:null,globalOpacity:1,stationary:!0,state:O,pixelRatio:1,time:performance.now(),deltaTime:0,blendMode:null,effects:null,inFadeTransition:!1};const P=new t.FramebufferObject(G,{colorTarget:q.TargetType.TEXTURE,depthStencilTarget:q.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER,width:F,height:E});O=G.getBoundFramebufferObject();H=G.getViewport();G.bindFramebuffer(P);G.setViewport(0,0,F,E);this._renderChildren(D.children,K);K=this._readbackScreenshot(P,{...D.cropArea,y:E-(D.cropArea.y+D.cropArea.height)});
G.bindFramebuffer(O);G.setViewport(H.x,H.y,H.width,H.height);this.requestRender();G=yield K;1===D.outputScale?D=G:(D=new ImageData(Math.round(G.width*D.outputScale),Math.round(G.height*D.outputScale)),m.resampleHermite(G,D,!0));return D});return function(D){return C.apply(this,arguments)}}();B._readbackScreenshot=function(){var C=n._asyncToGenerator(function*(D,F){const E=m.createEmptyImageData(F.width,F.height,document.createElement("canvas"));yield D.readPixelsAsync(F.x,F.y,F.width,F.height,q.PixelFormat.RGBA,
q.PixelType.UNSIGNED_BYTE,new Uint8Array(E.data.buffer));return E});return function(D,F){return C.apply(this,arguments)}}();B._resizeCanvas=function(C){const D=this._canvas,F=D.style,{state:{size:E},pixelRatio:G}=C;C=E[0];const O=E[1],H=Math.round(C*G),K=Math.round(O*G);if(D.width!==H||D.height!==K)D.width=H,D.height=K;F.width=C+"px";F.height=O+"px"};B._emptyTrash=function(){for(;0<this._trash.size;){const C=Array.from(this._trash);this._trash.clear();for(const D of C)D.processDetach()}};B._isLabelDrawPhaseRequired=
function(C){let D=!1;for(const F of C){if(!(F instanceof a.Container)){D=D||!1;break}if(F.hasLabels)return!0;D=D||this._isLabelDrawPhaseRequired(F.children)}return D};n._createClass(y,[{key:"background",get:function(){return this._background},set:function(C){this._background=C;this.requestRender()}},{key:"highlightOptions",get:function(){return this._highlightOptions},set:function(C){this._highlightOptionsHandle&&(this._highlightOptionsHandle.remove(),this._highlightOptionsHandle=null);if(this._highlightOptions=
C)this._highlightOptionsHandle=p.watch(()=>{var D;return null==(D=this._highlightOptions)?void 0:D.version},()=>{this.painter.setHighlightOptions(C);this.requestRender()},p.initial)}},{key:"renderingOptions",get:function(){return this._renderingOptions},set:function(C){this._renderingOptions=C;this.requestRender()}},{key:"state",get:function(){return this._state},set:function(C){this._state=C;this.requestRender()}},{key:"stationary",get:function(){return this._stationary},set:function(C){this._stationary!==
C&&(this._stationary=C,this.requestRender())}}]);return y}(a.Container);u.EXTRA_RENDER_TIME=2E3;u.Stage=A;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/CIMResourceManager":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../request","../../core/Error","../../core/promiseUtils"],function(u,n,h,r){function v(z,p){if(z.includes(";base64,")){const g=new Image;g.src=z;return g.decode().then(()=>({ok:!0,value:g})).catch(e=>r.isAbortError(e)?
{ok:!1,error:e}:{ok:!1,error:new h("invalid-resource",`Could not fetch requested resource at ${z}`)})}return n(z,{responseType:"image",...p}).then(g=>({ok:!0,value:g.data})).catch(g=>r.isAbortError(g)?{ok:!1,error:g}:{ok:!1,error:new h("invalid-resource",`Could not fetch requested resource at ${z}`)})}return function(){function z(){this._resourceMap=new Map;this._inFlightResourceMap=new Map;this.geometryEngine=null}var p=z.prototype;p.destroy=function(){this._inFlightResourceMap.clear();this._resourceMap.clear()};
p.getResource=function(g){var e;return null!=(e=this._resourceMap.get(g))?e:null};p.fetchResource=function(){var g=u._asyncToGenerator(function*(e,b){const a={width:0,height:0},c=this._resourceMap;var d=c.get(e);if(d)return a.width=d.width,a.height=d.height,a;if(d=this._inFlightResourceMap.get(e))return d;d=v(e,b);this._inFlightResourceMap.set(e,d);return d=d.then(f=>{this._inFlightResourceMap.delete(e);f.ok&&(c.set(e,f.value),f=f.value,a.width=f.width,a.height=f.height);return a})});return function(e,
b){return g.apply(this,arguments)}}();p.deleteResource=function(g){this._inFlightResourceMap.delete(g);this._resourceMap.delete(g)};return z}()})},"esri/views/2d/engine/Container":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/mat3f32","../../../layers/effects/EffectView","./DisplayObject"],function(u,n,h,r,v){v=function(z){function p(){var e=z.apply(this,arguments)||this;e._childrenSet=new Set;e._needsSort=!1;e.children=[];e._effectView=null;return e}n._inheritsLoose(p,
z);var g=p.prototype;g.updateTransitionProperties=function(e,b){z.prototype.updateTransitionProperties.call(this,e,b);this._effectView&&(this._effectView.transitionStep(e,b),this._effectView.transitioning&&this.requestRender())};g.doRender=function(e){e=this.createRenderParams(e);this.renderChildren(e)};g.addChild=function(e){return this.addChildAt(e,this.children.length)};g.addChildAt=function(e,b=this.children.length){if(!e||this.contains(e))return e;this._needsSort=!0;const a=e.parent;a&&a!==this&&
a.removeChild(e);b>=this.children.length?this.children.push(e):this.children.splice(b,0,e);this._childrenSet.add(e);e.parent=this;e.stage=this.stage;this!==this.stage&&(e.clips=this.clips);this.requestRender();return e};g.contains=function(e){return this._childrenSet.has(e)};g.removeAllChildren=function(){this._childrenSet.clear();this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0};g.removeChild=function(e){return this.contains(e)?
this.removeChildAt(this.children.indexOf(e)):e};g.removeChildAt=function(e){if(0>e||e>=this.children.length)return null;this._needsSort=!0;e=this.children.splice(e,1)[0];this._childrenSet.delete(e);this!==this.stage&&(e.clips=null);e.stage=null;e.parent=null;return e};g.sortChildren=function(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)};g._createTransforms=function(){return{dvs:h.create()}};g.onAttach=function(){z.prototype.onAttach.call(this);const e=this.stage;for(const b of this.children)b.stage=
e};g.onDetach=function(){z.prototype.onDetach.call(this);for(const e of this.children)e.stage=null};g.renderChildren=function(e){for(const b of this.children)b.beforeRender(e);for(const b of this.children)b.processRender(e);for(const b of this.children)b.afterRender(e)};g.createRenderParams=function(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}};n._createClass(p,[{key:"blendMode",get:function(){return this._blendMode},
set:function(e){this._blendMode=e;this.requestRender()}},{key:"clips",get:function(){return this._clips},set:function(e){this._clips=e;this.children.forEach(b=>b.clips=e)}},{key:"computedEffects",get:function(){var e,b;return null!=(e=null==(b=this._effectView)?void 0:b.effects)?e:null}},{key:"effect",get:function(){var e,b;return null!=(e=null==(b=this._effectView)?void 0:b.effect)?e:""},set:function(e){if(this._effectView||e)this._effectView||(this._effectView=new r.EffectView),this._effectView.effect=
e,this.requestRender()}}]);return p}(v.DisplayObject);u.Container=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/effects/EffectView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./parser ./utils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){function d(m){m=a.parse(m)||[];var k=(k=m[0])?"type"in k:!1;return k?[{scale:-1,effects:m}]:m}function f(m,k,q){var t,w,A,x;return null!=(t=m[0])&&t.effects&&null!=(w=k[0])&&w.effects?(-1===(null==(A=m[0])?void 0:A.scale)||-1===(null==(x=k[0])?void 0:x.scale))&&(1<m.length||1<k.length)&&0>=q?!1:c.canInterpolateEffects(m[0].effects,k[0].effects):!0}function l(m,k,q){var t,w;const A=m.length>k.length?m:k;m=m.length>k.length?k:m;const x=m[m.length-1];k=null!=(t=null==
x?void 0:x.scale)?t:q;t=null!=(w=null==x?void 0:x.effects)?w:[];for(w=m.length;w<A.length;w++)m.push({scale:k,effects:[...t]});for(w=0;w<A.length;w++)m[w].scale=-1===m[w].scale?q:m[w].scale,A[w].scale=-1===A[w].scale?q:A[w].scale,c.normalizeEffects(m[w].effects,A[w].effects)}u.EffectView=function(m){function k(t){t=m.call(this,t)||this;t._from=null;t._to=null;t._final=null;t._current=[];t._time=0;t.duration=v("mapview-transitions-duration");t.effects=[];return t}n._inheritsLoose(k,m);var q=k.prototype;
q.canTransitionTo=function(t){try{return 0<this.scale&&f(this._current,d(t),this.scale)}catch{return!1}};q.transitionStep=function(t,w){this._applyTimeTransition(t);this._updateForScale(w)};q.end=function(){this._applyTimeTransition(this.duration)};q._transitionTo=function(t){0<this.scale&&f(this._current,t,this.scale)?(this._final=t,this._to=z.clone(t),l(this._current,this._to,this.scale),this._from=z.clone(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t);this._set("effects",
this._current[0]?z.clone(this._current[0].effects):[])};q._applyTimeTransition=function(t){if(this._to&&this._from&&this._current&&this._final){this._time+=t;t=Math.min(1,this._time/this.duration);for(let A=0;A<this._current.length;A++){const x=this._current[A],y=this._from[A],B=this._to[A];var w=y.scale;x.scale=w+(B.scale-w)*t;for(w=0;w<x.effects.length;w++)x.effects[w].interpolate(y.effects[w],B.effects[w],t)}1===t&&(this._current=this._final,this._set("effects",this._current[0]?z.clone(this._current[0].effects):
[]),this._from=this._to=this._final=null)}};q._updateForScale=function(t){this._set("scale",t);if(0!==this._current.length){var w=this._current,A=this._current.length-1,x,y=1;if(1===w.length||t>=w[0].scale)var B=x=w[0].effects;else if(t<=w[A].scale)B=x=w[A].effects;else for(let C=0;C<A;C++){const D=w[C],F=w[C+1];if(D.scale>=t&&F.scale<=t){y=(t-D.scale)/(F.scale-D.scale);x=D.effects;B=F.effects;break}}for(t=0;t<this.effects.length;t++)this.effects[t].interpolate(x[t],B[t],y)}};n._createClass(k,[{key:"effect",
set:function(t){const w=this._get("effect");t=t||"";if(w!==t){this._set("effect",t);try{this._transitionTo(d(t))}catch(A){this._transitionTo([]),p.getLogger(this.declaredClass).warn("Invalid Effect",{effect:t,error:A})}}}},{key:"hasEffects",get:function(){return this.transitioning||!!this.effects.length}},{key:"scale",set:function(t){this._updateForScale(t)}},{key:"transitioning",get:function(){return null!==this._to}}]);return k}(r);h.__decorate([g.property()],u.EffectView.prototype,"_to",void 0);
h.__decorate([g.property()],u.EffectView.prototype,"duration",void 0);h.__decorate([g.property({value:""})],u.EffectView.prototype,"effect",null);h.__decorate([g.property({readOnly:!0})],u.EffectView.prototype,"effects",void 0);h.__decorate([g.property({readOnly:!0})],u.EffectView.prototype,"hasEffects",null);h.__decorate([g.property({value:0})],u.EffectView.prototype,"scale",null);h.__decorate([g.property({readOnly:!0})],u.EffectView.prototype,"transitioning",null);u.EffectView=h.__decorate([b.subclass("esri.layers.effects.EffectView")],
u.EffectView);u.canInterpolateEffectStops=f;u.convertEffectToStops=d;u.normalizeEffectStops=l;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/DisplayObject":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Evented ../../../core/has ../../../core/maybe ../../../core/promiseUtils".split(" "),function(u,n,h,r,v,z){const p=1/r("mapview-transitions-duration");h=function(g){function e(){var a=g.apply(this,
arguments)||this;a._fadeOutResolver=null;a._fadeInResolver=null;a._clips=null;a.computedVisible=!0;a.computedOpacity=1;a.fadeTransitionEnabled=!1;a.inFadeTransition=!1;a._isReady=!1;a._opacity=1;a._stage=null;a._visible=!0;return a}n._inheritsLoose(e,g);var b=e.prototype;b._getTransforms=function(){v.isNone(this._transforms)&&(this._transforms=this._createTransforms());return this._transforms};b.fadeIn=function(){if(this._fadeInResolver)return this._fadeInResolver.promise;this._fadeOutResolver&&(this._fadeOutResolver(),
this._fadeOutResolver=null);this.computedOpacity=0;this.fadeTransitionEnabled=!0;this._fadeInResolver=z.createResolver();this.requestRender();return this._fadeInResolver.promise};b.fadeOut=function(){if(this._fadeOutResolver)return this._fadeOutResolver.promise;this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null);this.fadeTransitionEnabled=!0;this._fadeOutResolver=z.createResolver();this.requestRender();return this._fadeOutResolver.promise};b.beforeRender=function(a){this.updateTransitionProperties(a.deltaTime,
a.state.scale)};b.afterRender=function(a){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)};b.remove=function(){var a;null==(a=this.parent)?void 0:a.removeChild(this)};b.setTransform=function(a){};b.processRender=function(a){this.stage&&this.computedVisible&&this.doRender(a)};b.requestRender=function(){this.stage&&this.stage.requestRender()};
b.processDetach=function(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null);this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null);this.onDetach();this.emit("detach")};b.updateTransitionProperties=function(a,c){if(this.fadeTransitionEnabled){c=this._fadeOutResolver||!this.visible?0:this.opacity;const d=this.computedOpacity;d===c?this.computedVisible=this.visible:(a*=p,this.computedOpacity=d>c?Math.max(c,d-a):Math.min(c,d+a),this.computedVisible=0<this.computedOpacity,
a=c===this.computedOpacity,this.inFadeTransition=!a,a||this.requestRender())}else this.computedOpacity=this.opacity,this.computedVisible=this.visible};b.onAttach=function(){};b.onDetach=function(){};b.doRender=function(a){};b.ready=function(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())};n._createClass(e,[{key:"clips",get:function(){return this._clips},set:function(a){this._clips=a;this.requestRender()}},{key:"isReady",get:function(){return this._isReady}},{key:"opacity",
get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=Math.min(1,Math.max(a,0)),this.requestRender())}},{key:"stage",get:function(){return this._stage},set:function(a){if(this._stage!==a){var c=this._stage;(this._stage=a)?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):c.trashDisplayObject(this)}}},{key:"transforms",get:function(){return this._getTransforms()}},{key:"visible",get:function(){return this._visible},set:function(a){this._visible!==
a&&(this._visible=a,this.requestRender())}}]);return e}(h);u.DisplayObject=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(u){u.WGLGeometryType=void 0;(function(n){n[n.FILL=0]="FILL";n[n.LINE=1]="LINE";n[n.MARKER=2]="MARKER";n[n.TEXT=3]="TEXT";n[n.LABEL=4]="LABEL"})(u.WGLGeometryType||(u.WGLGeometryType={}));u.WGLGeometryTransactionStatus=void 0;(function(n){n[n.SUCCEEDED=0]="SUCCEEDED";
n[n.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(u.WGLGeometryTransactionStatus||(u.WGLGeometryTransactionStatus={}));u.WGLDrawPhase=void 0;(function(n){n[n.NONE=0]="NONE";n[n.MAP=1]="MAP";n[n.LABEL=2]="LABEL";n[n.LABEL_ALPHA=4]="LABEL_ALPHA";n[n.HITTEST=8]="HITTEST";n[n.HIGHLIGHT=16]="HIGHLIGHT";n[n.CLIP=32]="CLIP";n[n.DEBUG=64]="DEBUG";n[n.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(u.WGLDrawPhase||(u.WGLDrawPhase={}));u.VVType=void 0;(function(n){n[n.SIZE=0]="SIZE";n[n.COLOR=1]="COLOR";n[n.OPACITY=
2]="OPACITY";n[n.ROTATION=3]="ROTATION"})(u.VVType||(u.VVType={}));u.WGLVVFlag=void 0;(function(n){n[n.NONE=0]="NONE";n[n.OPACITY=1]="OPACITY";n[n.COLOR=2]="COLOR";n[n.ROTATION=4]="ROTATION";n[n.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";n[n.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";n[n.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";n[n.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(u.WGLVVFlag||(u.WGLVVFlag={}));u.WGLVVTarget=void 0;(function(n){n[n.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";n[n.SCALE_TARGETS_OUTLINE=
256]="SCALE_TARGETS_OUTLINE";n[n.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";n[n.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(u.WGLVVTarget||(u.WGLVVTarget={}));u.MosaicType=void 0;(function(n){n[n.SPRITE=0]="SPRITE";n[n.GLYPH=1]="GLYPH"})(u.MosaicType||(u.MosaicType={}));u.WGLSymbologyType=void 0;(function(n){n[n.DEFAULT=0]="DEFAULT";n[n.SIMPLE=1]="SIMPLE";n[n.DOT_DENSITY=2]="DOT_DENSITY";n[n.OUTLINE_FILL=3]="OUTLINE_FILL";n[n.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE";n[n.HEATMAP=
5]="HEATMAP";n[n.PIE_CHART=6]="PIE_CHART"})(u.WGLSymbologyType||(u.WGLSymbologyType={}));Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/Painter":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../brushes ../vectorTiles/shaders/VTLMaterialManager ./BitBlitRenderer ./enums ./MaterialManager ./TextureManager ./WorldExtentClipRenderer ./effects/AnimationEffect ./effects/BlendEffect ./effects/FeatureEffect ./effects/HighlightEffect ./effects/HittestEffect ./effects/HittestEffectVTL ./effects/post-processing/EffectManager ./painter/RenderPass ../../../webgl/enums ../../../webgl/FramebufferObject ../../../webgl/Renderbuffer".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w){function A(y,B){switch(y){case z.WGLGeometryType.LINE:return h.brushes.line;case z.WGLGeometryType.TEXT:return h.brushes.text;case z.WGLGeometryType.LABEL:return h.brushes.label;case z.WGLGeometryType.FILL:switch(B){case z.WGLSymbologyType.DOT_DENSITY:return h.brushes.dotDensity;default:return h.brushes.fill}case z.WGLGeometryType.MARKER:switch(B){case z.WGLSymbologyType.HEATMAP:return h.brushes.heatmap;case z.WGLSymbologyType.PIE_CHART:return h.brushes.pieChart;
default:return h.brushes.marker}}}function x(y,B,C,D){return y!==z.WGLDrawPhase.HIGHLIGHT&&(1!==D||n.isSome(B)&&"normal"!==B||n.isSome(C)&&0<C.length)}return function(){function y(C,D,F){this.context=C;this._blitRenderer=new v.BitBlitRenderer;this._worldExtentClipRenderer=new e.WorldExtentClipRenderer;this._isClippedToWorldExtent=!1;this._brushCache=new Map;this._vtlMaterialManager=new r;this._blendEffect=new a.BlendEffect;this._fboPool=[];this.effects={highlight:new d,hittest:new f.HittestEffect,
hittestVTL:new l.HittestEffectVTL,integrate:new b.AnimationEffect,insideEffect:new c.FeatureEffect("inside"),outsideEffect:new c.FeatureEffect("outside")};this.materialManager=new p(C);this.textureManager=new g(D,F);this._effectsManager=new m.EffectManager}var B=y.prototype;B.getRenderTarget=function(){return this._renderTarget};B.setRenderTarget=function(C){this._renderTarget=C};B.getFbos=function(C,D){if(C!==this._lastWidth||D!==this._lastHeight){this._lastWidth=C;this._lastHeight=D;if(this._fbos){for(var F in this._fbos)this._fbos[F].resize(C,
D);return this._fbos}F={target:q.TextureType.TEXTURE_2D,pixelFormat:q.PixelFormat.RGBA,dataType:q.PixelType.UNSIGNED_BYTE,samplingMode:q.TextureSamplingMode.NEAREST,wrapMode:q.TextureWrapMode.CLAMP_TO_EDGE,width:C,height:D};const E={colorTarget:q.TargetType.TEXTURE,depthStencilTarget:q.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER};this._stencilBuf=C=new w.Renderbuffer(this.context,{width:C,height:D,internalFormat:q.RenderbufferFormat.DEPTH_STENCIL});this._fbos={output:new t.FramebufferObject(this.context,
E,F,C),blend:new t.FramebufferObject(this.context,E,F,C),effect0:new t.FramebufferObject(this.context,E,F,C)}}return this._fbos};B.acquireFbo=function(C,D){let F;F=0<this._fboPool.length?this._fboPool.pop():new t.FramebufferObject(this.context,{colorTarget:q.TargetType.TEXTURE,depthStencilTarget:q.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER},{target:q.TextureType.TEXTURE_2D,pixelFormat:q.PixelFormat.RGBA,dataType:q.PixelType.UNSIGNED_BYTE,samplingMode:q.TextureSamplingMode.NEAREST,wrapMode:q.TextureWrapMode.CLAMP_TO_EDGE,
width:C,height:D},this._stencilBuf);const E=F.descriptor;E.width===C&&E.height===D||F.resize(C,D);return F};B.releaseFbo=function(C){this._fboPool.push(C)};B.getSharedStencilBuffer=function(){return this._stencilBuf};B.beforeRenderLayers=function(C,D=null){const {width:F,height:E}=C.getViewport();this._prevFBO=C.getBoundFramebufferObject();const G=this.getFbos(F,E);C.bindFramebuffer(G.output);C.setColorMask(!0,!0,!0,!0);if(n.isSome(D)){const {r:O,g:H,b:K,a:P}=D.color;C.setClearColor(P*O/255,P*H/255,
P*K/255,P)}else C.setClearColor(0,0,0,0);C.setDepthWriteEnabled(!0);C.setClearDepth(1);C.clear(C.gl.COLOR_BUFFER_BIT|C.gl.DEPTH_BUFFER_BIT);C.setDepthWriteEnabled(!1)};B.beforeRenderLayer=function(C,D,F){const {context:E,blendMode:G,effects:O,requireFBO:H,drawPhase:K}=C;H||x(K,G,O,F)?(E.bindFramebuffer(this._fbos.blend),E.setColorMask(!0,!0,!0,!0),E.setClearColor(0,0,0,0),E.setDepthWriteEnabled(!0),E.setClearDepth(1),E.clear(E.gl.COLOR_BUFFER_BIT|E.gl.DEPTH_BUFFER_BIT),E.setDepthWriteEnabled(!1)):
(C=this._getOutputFBO(),E.bindFramebuffer(C));E.setDepthWriteEnabled(!1);E.setDepthTestEnabled(!1);E.setStencilTestEnabled(!0);E.setClearStencil(D);E.setStencilWriteMask(255);E.clear(E.gl.STENCIL_BUFFER_BIT)};B.compositeLayer=function(C,D){const {context:F,blendMode:E,effects:G,requireFBO:O,drawPhase:H}=C;if(O||x(H,E,G,D)){n.isSome(G)&&0<G.length&&H===z.WGLDrawPhase.MAP&&this._applyEffects(C,G);var K=this._getOutputFBO();F.bindFramebuffer(K);F.setStencilTestEnabled(!1);F.setStencilWriteMask(0);F.setBlendingEnabled(!0);
F.setBlendFunctionSeparate(q.BlendFactor.ONE,q.BlendFactor.ONE_MINUS_SRC_ALPHA,q.BlendFactor.ONE,q.BlendFactor.ONE_MINUS_SRC_ALPHA);F.setColorMask(!0,!0,!0,!0);K=n.isNone(E)||H===z.WGLDrawPhase.HIGHLIGHT?"normal":E;this._blendEffect.draw(C,this._fbos.blend.colorTexture,q.TextureSamplingMode.NEAREST,K,D)}};B.renderLayers=function(C){C.bindFramebuffer(this._prevFBO);if(this._fbos){var D=this._getOutputFBO();C.setDepthTestEnabled(!1);C.setStencilWriteMask(0);this._isClippedToWorldExtent?(C.setStencilTestEnabled(!0),
C.setStencilFunction(q.CompareFunction.EQUAL,1,255)):C.setStencilTestEnabled(!1);this.blitTexture(C,D.colorTexture,q.TextureSamplingMode.NEAREST)}};B.prepareDisplay=function(C,D,F){const {context:E}=C;E.bindFramebuffer(this._prevFBO);E.setColorMask(!0,!0,!0,!0);if(n.isSome(D)){const {r:G,g:O,b:H,a:K}=D.color;E.setClearColor(K*G/255,K*O/255,K*H/255,K)}else E.setClearColor(0,0,0,0);E.setStencilWriteMask(255);E.setClearStencil(0);E.clear(E.gl.COLOR_BUFFER_BIT|E.gl.STENCIL_BUFFER_BIT);this._isClippedToWorldExtent=
this._worldExtentClipRenderer.render(C,F)};B.dispose=function(){this.materialManager.dispose();this.textureManager.dispose();this._blitRenderer=n.disposeMaybe(this._blitRenderer);this._worldExtentClipRenderer=n.disposeMaybe(this._worldExtentClipRenderer);this._brushCache&&(this._brushCache.forEach(C=>C.dispose()),this._brushCache.clear(),this._brushCache=null);if(this._fbos)for(const C in this._fbos)this._fbos[C]&&this._fbos[C].dispose();for(const C of this._fboPool)C.dispose();this._fboPool.length=
0;if(this.effects)for(const C in this.effects)this.effects[C]&&this.effects[C].dispose();this._effectsManager.dispose();this._vtlMaterialManager=n.disposeMaybe(this._vtlMaterialManager);this._prevFBO=null};B.getBrush=function(C,D){C=A(C,D);D=this._brushCache.get(C);void 0===D&&(D=new C,this._brushCache.set(C,D));return this._brushCache.get(C)};B.renderObject=function(C,D,F,E){F=h.brushes[F];if(!F)return null;let G=this._brushCache.get(F);void 0===G&&(G=new F,this._brushCache.set(F,G));G.prepareState(C,
D,E);G.draw(C,D,E)};B.renderObjects=function(C,D,F,E){F=h.brushes[F];if(!F)return null;let G=this._brushCache.get(F);void 0===G&&(G=new F,this._brushCache.set(F,G));G.drawMany(C,D,E)};B.registerRenderPass=function(C){const D=C.brushes.map(F=>{this._brushCache.has(F)||this._brushCache.set(F,new F);return this._brushCache.get(F)});return new k(D,C)};B.setHighlightOptions=function(C){this.effects.highlight.setHighlightOptions(C)};B.blitTexture=function(C,D,F,E=1){C.setBlendingEnabled(!0);C.setBlendFunctionSeparate(q.BlendFactor.ONE,
q.BlendFactor.ONE_MINUS_SRC_ALPHA,q.BlendFactor.ONE,q.BlendFactor.ONE_MINUS_SRC_ALPHA);C.setColorMask(!0,!0,!0,!0);this._blitRenderer.render(C,D,F,E)};B.getPostProcessingEffects=function(C){return this._effectsManager.getPostProcessingEffects(C)};B._getOutputFBO=function(){return null!=this._renderTarget?this._renderTarget:this._fbos.output};B._applyEffects=function(C,D){const {context:F}=C;D=this._effectsManager.getPostProcessingEffects(D);for(const {postProcessingEffect:E,effect:G}of D)F.bindFramebuffer(this._fbos.blend),
E.draw(C,this._fbos.blend,G)};u._createClass(y,[{key:"vectorTilesMaterialManager",get:function(){return this._vtlMaterialManager}}]);return y}()})},"esri/views/2d/engine/brushes":function(){define("exports ./flow/BrushFlow ./imagery/BrushRasterBitmap ./imagery/BrushVectorField ./webgl/brushes/BrushBitmap ./webgl/brushes/BrushClip ./webgl/brushes/BrushOverlay ./webgl/brushes/WGLBrushDotDensity ./webgl/brushes/WGLBrushHeatmap ./webgl/brushes/WGLBrushInfo ./webgl/brushes/WGLBrushPieChart ./webgl/brushes/WGLBrushStencil ./webgl/brushes/WGLBrushVTLBackground ./webgl/brushes/WGLBrushVTLCircle ./webgl/brushes/WGLBrushVTLFill ./webgl/brushes/WGLBrushVTLLine ./webgl/brushes/WGLBrushVTLSymbol ./webgl/brushes/WGLGeometryBrushFill ./webgl/brushes/WGLGeometryBrushLabel ./webgl/brushes/WGLGeometryBrushLine ./webgl/brushes/WGLGeometryBrushMarker ./webgl/brushes/WGLGeometryBrushText".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x){const y={vtlBackground:d.WGLBrushVTLBackground,vtlFill:l.WGLBrushVTLFill,vtlLine:m.WGLBrushVTLLine,vtlCircle:f.WGLBrushVTLCircle,vtlSymbol:k.WGLBrushVTLSymbol};u.brushes={marker:A,line:w,fill:q,text:x,label:t,clip:z,stencil:c,bitmap:v,overlay:p,raster:h,rasterVF:r,flow:n,tileInfo:b,vtlBackground:d.WGLBrushVTLBackground,vtlFill:l.WGLBrushVTLFill,vtlLine:m.WGLBrushVTLLine,vtlCircle:f.WGLBrushVTLCircle,vtlSymbol:k.WGLBrushVTLSymbol,dotDensity:g,heatmap:e,
pieChart:a};u.vtlBrushes=y;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/flow/BrushFlow":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../chunks/mat3f32","../webgl/brushes/WGLBrush","../../../webgl/enums"],function(u,n,h,r,v){return function(z){function p(){var e=z.apply(this,arguments)||this;e._visualState={time:0,dvsMat3:h.create(),displayViewMat3:h.create()};return e}u._inheritsLoose(p,
z);var g=p.prototype;g.dispose=function(){};g.prepareState=function(e){({context:e}=e);e.setColorMask(!0,!0,!0,!0);e.setStencilFunction(v.CompareFunction.EQUAL,0,255)};g.draw=function(e,b){const {requestRender:a}=e,{displayData:c}=b;if(!n.isNone(c)&&("loaded"===c.state.name&&c.attach(e),"attached"===c.state.name)){var d=c.state.resources;!d.ready&&n.isSome(a)?a():(this._visualState.time=e.time/1E3,this._visualState.dvsMat3=b.transforms.dvs,this._visualState.displayViewMat3=e.state.displayViewMat3,
c.flowStyle.render(e,this._visualState,d),c.flowStyle.animated&&n.isSome(a)&&a())}};return p}(r)})},"esri/views/2d/engine/webgl/brushes/WGLBrush":function(){define(function(){return function(){function u(){this.name=this.constructor.name||"UnnamedBrush"}var n=u.prototype;n.prepareState=function(h,r,v){};n.draw=function(h,r,v){};n.drawMany=function(h,r,v){for(const z of r)this.draw(h,z,v)};return u}()})},"esri/views/2d/engine/imagery/BrushRasterBitmap":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./RasterBitmap ../webgl/VertexStream ../webgl/brushes/WGLBrush ../../../webgl/enums ../../../webgl/rasterUtils".split(" "),
function(u,n,h,r,v,z,p){return function(g){function e(){var a=g.apply(this,arguments)||this;a._desc={lut:{vsPath:"raster/lut",fsPath:"raster/lut",attributes:new Map([["a_position",0],["a_texcoord",1]])},stretch:{vsPath:"raster/stretch",fsPath:"raster/stretch",attributes:new Map([["a_position",0],["a_texcoord",1]])},hillshade:{vsPath:"raster/hillshade",fsPath:"raster/hillshade",attributes:new Map([["a_position",0],["a_texcoord",1]])}};a._rendererUniformInfos=new Map;return a}u._inheritsLoose(e,g);
var b=e.prototype;b.dispose=function(){this._quad&&this._quad.dispose()};b.prepareState=function({context:a},c){a.setBlendingEnabled(!0);a.setBlendFunctionSeparate(z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA,z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA);a.setColorMask(!0,!0,!0,!0);a.setStencilWriteMask(0);a.setStencilTestEnabled(!0);a.setStencilFunction(z.CompareFunction.EQUAL,c.stencilRef,255)};b.draw=function(a,c){var d;if(h.hasSource(c)&&!c.suspended){var {timeline:f,context:l,painter:m,
requestRender:k}=a;f.begin(this.name);var q=!(null!=(d=l.capabilities.textureFloat)&&d.textureFloatLinear);c.updateTexture(a);a=this._getShaderVariations(c,q);a=m.materialManager.getProgram(this._desc[c.symbolizerParameters.type],a);this._drawWithProgram(l,a,c,k);f.end(this.name)}};b._drawWithProgram=function(a,c,d,f,l=1,m=[0,0],k=!1){this._quad||(this._quad=new r(a,[0,0,1,0,0,1,1,1]));if(n.isSome(f)&&!c.isCompiled)f();else{var {symbolizerParameters:q,transformGrid:t,width:w,height:A,opacity:x}=d;
f=q.type;a.useProgram(c);var y=this._getShaderVariations(d);f=this._getUniformInfos(f,a,c,y);var {names:B,textures:C}=d.getTextures();p.setTextures(a,c,B,C);a=p.getBasicGridUniforms(l,m);k=p.getCommonUniforms(t,[w,A],[d.source.width,d.source.height],x,k);p.setUniforms(c,f,{u_coordScale:d.coordScale,u_dvsMat3:d.transforms.dvs,...a,...k});if(q.colormap){const {colormap:D,colormapOffset:F}=q;d=p.getColormapUniforms(D,F);p.setUniforms(c,f,d)}"stretch"===q.type?(d=p.getStretchUniforms(q),p.setUniforms(c,
f,d)):"hillshade"===q.type&&(d=p.getShadedReliefUniforms(q),p.setUniforms(c,f,d));this._quad.draw()}};b._getUniformInfos=function(a,c,d,f){a=0<f.length?a+"-"+f.join("-"):a;if(this._rendererUniformInfos.has(a))return this._rendererUniformInfos.get(a);c=p.getUniformLocationInfos(c,d);this._rendererUniformInfos.set(a,c);return c};b._getShaderVariations=function(a,c=!1){const d=[],{interpolation:f}=a,{type:l,colormap:m}=a.symbolizerParameters;"cubic"===f?d.push("bicubic"):"bilinear"===f&&"stretch"===
l&&null!=m?(d.push("bilinear"),d.push("nnedge")):c&&"bilinear"===f&&d.push("bilinear");a.isRendereredSource?d.push("noop"):m&&d.push("applyColormap");a.transformGrid&&(d.push("applyProjection"),1===a.transformGrid.spacing[0]&&d.push("lookupProjection"));return d};return e}(v)})},"esri/views/2d/engine/imagery/RasterBitmap":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f32 ../../../../chunks/vec2f32 ../../../../layers/support/rasterFunctions/pixelUtils ../DisplayObject ../../../webgl/enums ../../../webgl/rasterUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b){const a={bandCount:3,outMin:0,outMax:1,minCutOff:[0,0,0],maxCutOff:[255,255,255],factor:[1/255,1/255,1/255],useGamma:!1,gamma:[1,1,1],gammaCorrection:[1,1,1],colormap:null,colormapOffset:null,stretchType:"none",type:"stretch"};g=function(d){function f(m=null,k=null,q=null){var t=d.call(this)||this;t._textureInvalidated=!0;t._colormapTextureInvalidated=!0;t._supportsBilinearTexture=!0;t.stencilRef=0;t.coordScale=[1,1];t._symbolizerParameters=null;t.height=null;t.isRendereredSource=
!1;t.pixelRatio=1;t.resolution=0;t.rotation=0;t._source=null;t.rawPixelData=null;t._suspended=!1;t._bandIds=null;t._interpolation=null;t._transformGrid=null;t.width=null;t.x=0;t.y=0;t.source=m;t.transformGrid=k;t.interpolation=q;return t}n._inheritsLoose(f,d);var l=f.prototype;l.destroy=function(){const m=this.getTextures();null==m?void 0:m.textures.forEach(k=>k.dispose());this._colormapTexture=this._transformGridTexture=this._rasterTexture=null};l.invalidateTexture=function(){this._textureInvalidated||
(this._textureInvalidated=!0,this.requestRender())};l._createTransforms=function(){return{dvs:v.create()}};l.setTransform=function(m){const k=r.identity(this.transforms.dvs),[q,t]=m.toScreenNoRotation([0,0],[this.x,this.y]);var w=this.resolution/this.pixelRatio/m.resolution;const A=w*this.width;w*=this.height;const x=Math.PI*this.rotation/180;r.translate(k,k,z.fromValues(q,t));r.translate(k,k,z.fromValues(A/2,w/2));r.rotate(k,k,-x);r.translate(k,k,z.fromValues(-A/2,-w/2));r.scaleByVec2(k,k,z.fromValues(A,
w));r.multiply(this.transforms.dvs,m.displayViewMat3,k)};l.getTextures=function(){if(!this._rasterTexture)return null;const m=[],k=[];this._transformGridTexture&&(k.push(this._transformGridTexture),m.push("u_transformGrid"));this._rasterTexture&&(k.push(this._rasterTexture),m.push("u_image"));this._colormapTexture&&(k.push(this._colormapTexture),m.push("u_colormap"));return{names:m,textures:k}};l.onAttach=function(){this.invalidateTexture()};l.onDetach=function(){this.invalidateTexture()};l.updateTexture=
function({context:m}){if(this.stage){var k=this._isValidSource(this.source);k&&this._colormapTextureInvalidated&&(this._colormapTextureInvalidated=!1,this._updateColormapTexture(m));this._textureInvalidated&&(this._textureInvalidated=!1,this._createOrDestroyRasterTexture(m),this._rasterTexture&&(k?this.transformGrid&&!this._transformGridTexture&&(this._transformGridTexture=b.createTransformTexture(m,this.transformGrid)):this._rasterTexture.setData(null)),this.suspended||(this.ready(),this.requestRender()))}else{var q,
t;null==(k=this._rasterTexture)?void 0:k.dispose();null==(q=this._transformGridTexture)?void 0:q.dispose();null==(t=this._colormapTexture)?void 0:t.dispose();this._colormapTexture=this._transformGridTexture=this._rasterTextureBandIds=this._rasterTexture=null}};l._createOrDestroyRasterTexture=function(m){var k,q;const t=h.isSome(this.source)?p.extractBands(this.source,this.bandIds):null;if(this._isValidSource(t)){var w=!this._isBandIdschanged(this.bandIds);if(this._rasterTexture){if(w)return;this._rasterTexture.dispose();
this._rasterTexture=this._rasterTextureBandIds=null}this._supportsBilinearTexture=null==(k=m.capabilities.textureFloat)?void 0:k.textureFloatLinear;k=this._getTextureSamplingMethod(this.interpolation);w=this.isRendereredSource||!(null!=(q=m.capabilities.textureFloat)&&q.textureFloat);this._rasterTexture=b.createRasterTexture(m,t,k,w);this._rasterTextureBandIds=this.bandIds?[...this.bandIds]:null}else this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTexture=this._rasterTextureBandIds=
null)};l._isBandIdschanged=function(m){const k=this._rasterTextureBandIds;return!(null==k&&null==m||k&&m&&k.join("")===m.join(""))};l._isValidSource=function(m){var k;return h.isSome(m)&&0<(null==(k=m.pixels)?void 0:k.length)};l._getTextureSamplingMethod=function(m){const {type:k,colormap:q}=this.symbolizerParameters,t="lut"===k||"stretch"===k&&h.isSome(q);return!this._supportsBilinearTexture||t||"bilinear"!==m&&"cubic"!==m?"nearest":"bilinear"};l._updateColormapTexture=function(m){const k=this._colormap,
q=this.symbolizerParameters.colormap;if(!q)this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),this._colormap=null;else if(!k)this._colormapTexture=b.createColormapTexture(m,q),this._colormap=q;else if(q.length!==k.length||q.some((t,w)=>t!==k[w]))this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),this._colormapTexture=b.createColormapTexture(m,q),this._colormap=q};n._createClass(f,[{key:"symbolizerParameters",get:function(){return this._symbolizerParameters||
a},set:function(m){this._symbolizerParameters!==m&&(this._symbolizerParameters=m,this._colormapTextureInvalidated=!0)}},{key:"source",get:function(){return this._source},set:function(m){this._source!==m&&(this._source=m,this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTextureBandIds=this._rasterTexture=null),this.invalidateTexture())}},{key:"suspended",get:function(){return this._suspended},set:function(m){this._suspended&&!m&&this.stage&&(this.ready(),this.requestRender());this._suspended=
m}},{key:"bandIds",get:function(){return this._bandIds},set:function(m){this._bandIds=m;this._isBandIdschanged(m)&&this.invalidateTexture()}},{key:"interpolation",get:function(){return this._interpolation||"nearest"},set:function(m){this._interpolation=m;this._rasterTexture&&this._rasterTexture.setSamplingMode("bilinear"===this._getTextureSamplingMethod(m)?e.TextureSamplingMode.LINEAR:e.TextureSamplingMode.NEAREST)}},{key:"transformGrid",get:function(){return this._transformGrid},set:function(m){this._transformGrid=
m;this._transformGridTexture&&(this._transformGridTexture.dispose(),this._transformGridTexture=null)}}]);return f}(g.DisplayObject);let c=function(d){function f(){return d.apply(this,arguments)||this}n._inheritsLoose(f,d);n._createClass(f,[{key:"source",get:function(){return this._source}}]);return f}(g);u.RasterBitmap=g;u.RasterBitmapWithSource=c;u.hasSource=function(d){return h.isSome(d.source)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports",
"../../../core/maybe","../PixelBlock"],function(u,n,h){function r(m){return n.isSome(m)&&"esri.layers.support.PixelBlock"===m.declaredClass&&m.pixels&&0<m.pixels.length}function v(m,k,q,t,w,A,x,y){return{xmin:w<=q*m?0:w<q*m+m?w-q*m:m,ymin:A<=t*k?0:A<t*k+k?A-t*k:k,xmax:w+x<=q*m?0:w+x<q*m+m?w+x-q*m:m,ymax:A+y<=t*k?0:A+y<t*k+k?A+y-t*k:k}}function z(m,k,q,t,w,A){const {width:x,height:y}=q.block,{x:B,y:C}=q.offset,{width:D,height:F}=q.mosaic;q=v(x,y,t,w,B,C,D,F);let E=0;var G=0;if(A){var O=A.hasGCSSShiftTransform?
360:A.halfWorldWidth,H=x*A.resolutionX,K=A.startX+t*H;H=K+H;K<O&&H>O?G=A.rightPadding:K>=O&&(E=A.leftMargin-A.rightPadding,G=0)}q.xmax-=G;if("number"===typeof k)for(A=q.ymin;A<q.ymax;A++)for(G=(w*y+A-C)*D+(t*x-B)+E,O=q.xmin;O<q.xmax;O++)m[G+O]=k;else for(A=q.ymin;A<q.ymax;A++)for(G=(w*y+A-C)*D+(t*x-B)+E,O=A*x,K=q.xmin;K<q.xmax;K++)m[G+K]=k[O+K]}function p(m,k,q={}){const {clipOffset:t,clipSize:w,alignmentInfo:A,blockWidths:x}=q;if(x)return g(m,k,{blockWidths:x});var y=m.find(L=>r(L));if(n.isNone(y))return null;
q=w?w.width:k.width;const B=w?w.height:k.height;var C=y.width,D=y.height;const F=k.width/C,E=k.height/D;k={offset:t||{x:0,y:0},mosaic:w||k,block:{width:C,height:D}};C=y.pixelType;D=h.getPixelArrayConstructor(C);var G=y.pixels.length;y=[];for(var O=0;O<G;O++){var H=new D(q*B);for(let L=0;L<E;L++)for(let M=0;M<F;M++){var K=m[L*F+M];r(K)&&(K=K.pixels[O],z(H,K,k,M,L,A))}y.push(H)}let P;if(m.some(L=>n.isNone(L)||L.mask&&0<L.mask.length))for(P=new Uint8Array(q*B),D=0;D<E;D++)for(G=0;G<F;G++)H=m[D*F+G],
(O=n.isSome(H)?H.mask:null)?z(P,O,k,G,D,A):H?z(P,1,k,G,D,A):z(P,0,k,G,D,A);m=new h({width:q,height:B,pixels:y,pixelType:C,mask:P});m.updateStatistics();return m}function g(m,k,q){const t=m.find(G=>n.isSome(G));if(n.isNone(t))return null;var w=m.some(G=>n.isSome(G)?!!G.mask:!0);const {width:A,height:x}=k;k=w?new Uint8Array(A*x):null;({blockWidths:q}=q);const y=[],B=t.getPlaneCount(),C=h.getPixelArrayConstructor(t.pixelType);if(w)for(let G=0,O=0;G<m.length;O+=q[G],G++)if(w=m[G],r(w)){var D=w.mask;for(var F=
0;F<x;F++)for(var E=0;E<q[G];E++)k[F*A+E+O]=null==D?255:D[F*w.width+E]}for(w=0;w<B;w++){D=new C(A*x);for(let G=0,O=0;G<m.length;O+=q[G],G++)if(F=m[G],r(F)&&(E=F.pixels[w],null!=E))for(let H=0;H<x;H++)for(let K=0;K<q[G];K++)D[H*A+K+O]=E[H*F.width+K];y.push(D)}m=new h({width:A,height:x,mask:k,pixels:y,pixelType:t.pixelType});m.updateStatistics();return m}function e(m){if(!r(m))return null;const k=m.clone(),{width:q,height:t,pixels:w,mask:A}=m;var x=w[0];m=k.pixels[0];for(let C=2;C<t-1;C++){const D=
new Map;for(var y=C-2;y<C+2;y++)for(var B=0;4>B;B++){const F=y*q+B;c(D,x[F],A?A[F]:1)}m[C*q]=b(D);m[C*q+1]=m[C*q+2]=m[C*q];for(y=3;y<q-1;y++)B=(C-2)*q+y+1,c(D,x[B],A?A[B]:1),B=(C-1)*q+y+1,c(D,x[B],A?A[B]:1),B=C*q+y+1,c(D,x[B],A?A[B]:1),B=(C+1)*q+y+1,c(D,x[B],A?A[B]:1),B=(C-2)*q+y-3,a(D,x[B],A?A[B]:1),B=(C-1)*q+y-3,a(D,x[B],A?A[B]:1),B=C*q+y-3,a(D,x[B],A?A[B]:1),B=(C+1)*q+y-3,a(D,x[B],A?A[B]:1),m[C*q+y]=b(D);m[C*q+y+1]=m[C*q+y]}for(x=0;x<q;x++)m[x]=m[q+x]=m[2*q+x],m[(t-1)*q+x]=m[(t-2)*q+x];k.updateStatistics();
return k}function b(m){if(0===m.size)return 0;let k=0,q=-1,t=0;const w=m.keys();let A=w.next();for(;!A.done;)t=m.get(A.value),t>k&&(q=A.value,k=t),A=w.next();return q}function a(m,k,q){0!==q&&(q=m.get(k),1===q?m.delete(k):m.set(k,q-1))}function c(m,k,q){0!==q&&m.set(k,m.has(k)?m.get(k)+1:1)}function d(m,k,q){let {x:t,y:w}=k;const {width:A,height:x}=q;if(0===t&&0===w&&x===m.height&&A===m.width)return m;const {width:y,height:B}=m;k=Math.max(0,w);const C=Math.max(0,t),D=Math.min(t+A,y),F=Math.min(w+
x,B);if(0>D||0>F||!r(m))return null;t=Math.max(0,-t);w=Math.max(0,-w);const {pixels:E,mask:G}=m;var O=A*x,H=E.length;const K=[];for(var P=0;P<H;P++){var L=E[P],M=h.createEmptyBand(m.pixelType,O);for(let J=k;J<F;J++){const R=J*y;let X=(J+w-k)*A+t;for(let U=C;U<D;U++)M[X++]=L[R+U]}K.push(M)}O=new Uint8Array(O);for(H=k;H<F;H++)for(P=H*y,L=(H+w-k)*A+t,M=C;M<D;M++)O[L++]=G?G[P+M]:1;m=new h({width:q.width,height:q.height,pixelType:m.pixelType,pixels:K,mask:O});m.updateStatistics();return m}function f(m,
k=!0){if(!r(m))return null;const {pixels:q,width:t,height:w,mask:A,pixelType:x}=m;m=[];const y=Math.round(t/2),B=Math.round(w/2),C=w-1,D=t-1;for(var F=0;F<q.length;F++){var E=q[F],G=h.createEmptyBand(x,y*B),O=0;for(var H=0;H<w;H+=2)for(var K=0;K<t;K+=2){var P=E[H*t+K];if(k){var L=K===D?P:E[H*t+K+1];const M=H===C?P:E[H*t+K+t],J=K===D?M:H===C?L:E[H*t+K+t+1];G[O++]=(P+L+M+J)/4}else G[O++]=P}m.push(G)}F=null;if(A)for(F=new Uint8Array(y*B),E=0,G=0;G<w;G+=2)for(O=0;O<t;O+=2)H=A[G*t+O],k?(K=O===D?H:A[G*
t+O+1],P=G===C?H:A[G*t+O+t],L=O===D?P:G===C?K:A[G*t+O+t+1],F[E++]=H*K*P*L?1:0):F[E++]=H;return new h({width:y,height:B,pixelType:x,pixels:m,mask:F})}function l(m,k,q,t,w=.5){const {width:A,height:x}=m,{width:y,height:B}=k;m=t.cols;t=t.rows;k=Math.ceil(y/m-.1/m);const C=Math.ceil(B/t-.1/t);let D,F,E,G,O;const H=k*m;var K=H*C*t;const P=new Float32Array(K),L=new Float32Array(K),M=new Uint32Array(K),J=new Uint32Array(K);let R=0,X,U;for(let Y=0;Y<C;Y++)for(let fa=0;fa<k;fa++){var V=12*(Y*k+fa);K=q[V];
D=q[V+1];F=q[V+2];E=q[V+3];G=q[V+4];O=q[V+5];for(var Q=0;Q<t;Q++){R=(Y*t+Q)*H+fa*m;U=(Q+.5)/t;for(let da=0;da<Q;da++)X=(da+.5)/m,P[R+da]=(K*X+D*U+F)*A-w,L[R+da]=(E*X+G*U+O)*x-w,M[R+da]=Math.round(P[R+da]),J[R+da]=Math.round(L[R+da])}V+=6;K=q[V];D=q[V+1];F=q[V+2];E=q[V+3];G=q[V+4];O=q[V+5];for(V=0;V<t;V++)for(R=(Y*t+V)*H+fa*m,U=(V+.5)/t,Q=V;Q<m;Q++)X=(Q+.5)/m,P[R+Q]=(K*X+D*U+F)*A-w,L[R+Q]=(E*X+G*U+O)*x-w,M[R+Q]=Math.round(P[R+Q]),J[R+Q]=Math.round(L[R+Q])}return{offsets_x:P,offsets_y:L,offsets_xi:M,
offsets_yi:J,gridWidth:H}}u.approximateTransform=function(m,k,q,t,w="nearest"){if(!r(m))return null;"majority"===w&&(m=e(m));const {pixels:A,mask:x,pixelType:y}=m,B=m.width;var C=m.height;const D=h.getPixelArrayConstructor(y),F=A.length,{width:E,height:G}=k;m=!1;for(let J=0;J<q.length;J+=3)-1===q[J]&&-1===q[J+1]&&-1===q[J+2]&&(m=!0);const {offsets_x:O,offsets_y:H,offsets_xi:K,offsets_yi:P,gridWidth:L}=l({width:B,height:C},k,q,t,"majority"===w?0:.5);let M;k=(J,R,X)=>{const U=J instanceof Float32Array||
J instanceof Float64Array?0:.5;for(let V=0;V<G;V++){M=V*L;for(let Q=0;Q<E;Q++){if(0>O[M]||0>H[M])J[V*E+Q]=0;else if(X)J[V*E+Q]=R[K[M]+P[M]*B];else{const Y=Math.floor(O[M]),fa=Math.floor(H[M]),da=Math.ceil(O[M]),ca=Math.ceil(H[M]),la=O[M]-Y,ha=H[M]-fa;J[V*E+Q]=!x||x[Y+fa*B]&&x[Y+fa*B]&&x[Y+ca*B]&&x[da+ca*B]?(1-ha)*((1-la)*R[Y+fa*B]+la*R[da+fa*B])+ha*((1-la)*R[Y+ca*B]+la*R[da+ca*B])+U:R[K[M]+P[M]*B]}M++}}};q=[];for(C=0;C<F;C++)t=new D(E*G),k(t,A[C],"nearest"===w||"majority"===w),q.push(t);w=new h({width:E,
height:G,pixelType:y,pixels:q});if(x)w.mask=new Uint8Array(E*G),k(w.mask,x,!0);else if(m)for(w.mask=new Uint8Array(E*G),m=0;m<E*G;m++)w.mask[m]=0>O[m]||0>H[m]?0:1;w.updateStatistics();return w};u.clip=d;u.colorize=function(m,k){if(!r(m)||!k&&(k.indexedColormap||k.indexed2DColormap))return m;const q=m.clone();var t=q.pixels;let w=q.mask;const A=q.width*q.height;if(1!==t.length)return m;const {indexedColormap:x,indexed2DColormap:y,offset:B,alphaSpecified:C}=k;k=x.length-1;m=0;t=t[0];const D=new Uint8Array(t.length),
F=new Uint8Array(t.length),E=new Uint8Array(t.length);let G=0;if(x)if(w)for(m=0;m<A;m++)w[m]&&(G=4*(t[m]-B),G<B||G>k?w[m]=0:(D[m]=x[G],F[m]=x[G+1],E[m]=x[G+2],w[m]=x[G+3]));else{w=new Uint8Array(A);for(m=0;m<A;m++)G=4*(t[m]-B),G<B||G>k?w[m]=0:(D[m]=x[G],F[m]=x[G+1],E[m]=x[G+2],w[m]=x[G+3]);q.mask=w}else if(w)for(m=0;m<A;m++)w[m]&&(k=y[t[m]],D[m]=k[0],F[m]=k[1],E[m]=k[2],w[m]=k[3]);else{w=new Uint8Array(A);for(m=0;m<A;m++)k=y[t[m]],D[m]=k[0],F[m]=k[1],E[m]=k[2],w[m]=k[3];q.mask=w}q.pixels=[D,F,E];
q.statistics=null;q.pixelType="u8";q.maskIsAlpha=C;return q};u.createColormapLUT=function(m){if(m){var k=m.colormap;if(k&&0!==k.length){k=k.sort((C,D)=>C[0]-D[0]);var q=0;0>k[0][0]&&(q=k[0][0]);var t=Math.max(256,k[k.length-1][0]-q+1),w=new Uint8Array(4*t),A=[],x=0,y=0,B=5===k[0].length;if(65536<t)return k.forEach(C=>{A[C[0]-q]=B?C.slice(1):C.slice(1).concat([255])}),{indexed2DColormap:A,offset:q,alphaSpecified:B};if(m.fillUnspecified)for(m=k[y],x=m[0]-q;x<t;x++)w[4*x]=m[1],w[4*x+1]=m[2],w[4*x+2]=
m[3],w[4*x+3]=B?m[4]:255,x===m[0]-q&&(m=y===k.length-1?m:k[++y]);else for(x=0;x<k.length;x++)m=k[x],y=4*(m[0]-q),w[y]=m[1],w[y+1]=m[2],w[y+2]=m[3],w[y+3]=B?m[4]:255;return{indexedColormap:w,offset:q,alphaSpecified:B}}}};u.extractBands=function(m,k){if(null==k||!k.length||!r(m))return m;const q=m.pixels.length;return k&&k.some(t=>t>=q)||1===q&&1===k.length&&0===k[0]||q===k.length&&!k.some((t,w)=>t!==w)?m:new h({pixelType:m.pixelType,width:m.width,height:m.height,mask:m.mask,validPixelCount:m.validPixelCount,
maskIsAlpha:m.maskIsAlpha,pixels:k.map(t=>m.pixels[t]),statistics:m.statistics&&k.map(t=>m.statistics[t])})};u.getClipBounds=v;u.getLocalArithmeticNorthRotations=function(m,k){const {coefficients:q,spacing:t}=k,{offsets_x:w,offsets_y:A,gridWidth:x}=l(m,m,q,{rows:t[0],cols:t[1]},.5),{width:y,height:B}=m;m=new Float32Array(y*B);k=180/Math.PI;for(let F=0;F<B;F++)for(let E=0;E<y;E++){var C=F*x+E,D=0===F?C:C-x;const G=F===B-1?C:C+x;C=w[D]-w[G];D=A[G]-A[D];isNaN(C)||isNaN(D)?m[F*y+E]=90:(D=Math.atan2(D,
C)*k,D=(360+D)%360,m[F*y+E]=D)}return m};u.isValidPixelBlock=r;u.lookupPixels=function(m,k){if(!r(m))return null;const {pixels:q,mask:t}=m,w=m.width*m.height,A=q.length;let x=k.lut;({offset:k}=k);let y,B;x&&1===x[0].length&&(x=q.map(()=>x));const C=[];let D,F,E;if(k)if(null==t)for(y=0;y<A;y++){D=q[y];F=x[y];E=new Uint8Array(w);for(B=0;B<w;B++)E[B]=F[D[B]-k];C.push(E)}else for(y=0;y<A;y++){D=q[y];F=x[y];E=new Uint8Array(w);for(B=0;B<w;B++)t[B]&&(E[B]=F[D[B]-k]);C.push(E)}else if(null==t)for(y=0;y<
A;y++){D=q[y];F=x[y];E=new Uint8Array(w);for(B=0;B<w;B++)E[B]=F[D[B]];C.push(E)}else for(y=0;y<A;y++){D=q[y];F=x[y];E=new Uint8Array(w);for(B=0;B<w;B++)t[B]&&(E[B]=F[D[B]]);C.push(E)}m=new h({width:m.width,height:m.height,pixels:C,mask:t,pixelType:"u8"});m.updateStatistics();return m};u.mosaic=p;u.mosaicPixelData=function(m,k){if(!m||0===m.length)return null;var q=m.find(F=>F.pixelBlock);if(!q||n.isNone(q.pixelBlock))return null;var t=(q.extent.xmax-q.extent.xmin)/q.pixelBlock.width;const w=(q.extent.ymax-
q.extent.ymin)/q.pixelBlock.height,A=.01*Math.min(t,w),x=m.sort((F,E)=>Math.abs(F.extent.ymax-E.extent.ymax)>A?E.extent.ymax-F.extent.ymax:Math.abs(F.extent.xmin-E.extent.xmin)>A?F.extent.xmin-E.extent.xmin:0);var y=Math.min.apply(null,x.map(F=>F.extent.xmin));const B=Math.min.apply(null,x.map(F=>F.extent.ymin)),C=Math.max.apply(null,x.map(F=>F.extent.xmax)),D=Math.max.apply(null,x.map(F=>F.extent.ymax));m={x:Math.round((k.xmin-y)/t),y:Math.round((D-k.ymax)/w)};y={width:Math.round((C-y)/t),height:Math.round((D-
B)/w)};t={width:Math.round((k.xmax-k.xmin)/t),height:Math.round((k.ymax-k.ymin)/w)};if(Math.round(y.width/q.pixelBlock.width)*Math.round(y.height/q.pixelBlock.height)!==x.length||0>m.x||0>m.y||y.width<t.width||y.height<t.height)return null;q=x.map(F=>F.pixelBlock);q=p(q,y,{clipOffset:m,clipSize:t});return{extent:k,pixelBlock:q}};u.remapColor=function(m,k){if(!r(m))return null;m=m.clone();var {pixels:q}=m;const t=m.width*m.height,w=k.length,A=Math.floor(w/2),x=k[Math.floor(A)];q=q[0];let y,B,C,D,F,
E,G=!1;const O=new Uint8Array(t),H=new Uint8Array(t),K=new Uint8Array(t);let P=m.mask;const L=4===k[0].mappedColor.length;P||(P=new Uint8Array(t),P.fill(L?255:1),m.mask=P);for(F=0;F<t;F++)if(P[F]){y=q[F];G=!1;E=A;B=x;C=0;for(D=w-1;1<D-C;){if(y===B.value){G=!0;break}y>B.value?C=E:D=E;E=Math.floor((C+D)/2);B=k[Math.floor(E)]}G||(y===k[C].value?(B=k[C],G=!0):y===k[D].value?(B=k[D],G=!0):y<k[C].value?(G=!1,B=null):y>k[C].value&&(y<k[D].value?(B=k[C],G=!0):D===w-1?(G=!1,B=null):(B=k[D],G=!0)));G?(O[F]=
B.mappedColor[0],H[F]=B.mappedColor[1],K[F]=B.mappedColor[2],P[F]=B.mappedColor[3]):O[F]=H[F]=K[F]=P[F]=0}m.pixels=[O,H,K];m.mask=P;m.pixelType="u8";m.maskIsAlpha=L;return m};u.resampleByMajority=e;u.setValidBoundary=function(m,k,q){if(!r(m))return null;const {width:t,height:w}=m,A=k.x;k=k.y;const x=q.width+A;q=q.height+k;if(0>A||0>k||x>t||q>w||0===A&&0===k&&x===t&&q===w)return m;m.mask||(m.mask=new Uint8Array(t*w));const y=m.mask;for(let B=0;B<w;B++){const C=B*t;for(let D=0;D<t;D++)y[C+D]=B<k||B>=
q||D<A||D>=x?0:1}m.updateStatistics();return m};u.split=function(m,k,q){if(!r(m))return null;const {width:t,height:w}=k;let {width:A,height:x}=m;const y=new Map,B={x:0,y:0};q=null==q?1:1+q;for(let C=0;C<q;C++){const D=Math.ceil(A/t),F=Math.ceil(x/w);for(let E=0;E<F;E++){B.y=E*w;for(let G=0;G<D;G++){B.x=G*t;const O=d(m,B,k);y.set(`${C}/${E}/${G}`,O)}}C<q-1&&(m=f(m));A=Math.round(A/2);x=Math.round(x/2)}return y};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g,e,b,a){var c;const d=p.getLogger("esri.layers.support.PixelBlock");h=c=function(f){function l(k){k=f.call(this,
k)||this;k.width=null;k.height=null;k.pixelType="f32";k.validPixelCount=null;k.mask=null;k.maskIsAlpha=!1;k.pixels=null;k.statistics=null;return k}u._inheritsLoose(l,f);l.createEmptyBand=function(k,q){return new (c.getPixelArrayConstructor(k))(q)};l.getPixelArrayConstructor=function(k){let q;switch(k){case "u1":case "u2":case "u4":case "u8":q=Uint8Array;break;case "u16":q=Uint16Array;break;case "u32":q=Uint32Array;break;case "s8":q=Int8Array;break;case "s16":q=Int16Array;break;case "s32":q=Int32Array;
break;case "f32":q=Float32Array;break;case "f64":q=Float64Array;break;case "c64":case "c128":case "unknown":q=Float32Array}return q};var m=l.prototype;m.castPixelType=function(k){if(!k)return"f32";k=k.toLowerCase();["u1","u2","u4"].includes(k)?k="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(k)||(k="f32");return k};m.getPlaneCount=function(){return this.pixels&&this.pixels.length};m.addData=function(k){if(!k.pixels||k.pixels.length!==this.width*this.height)throw new r("pixelblock:invalid-or-missing-pixels",
"add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(k.pixels);this.statistics.push(k.statistics||{minValue:null,maxValue:null})};m.getAsRGBA=function(){const k=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(k);break;default:this._fillFrom8Bit(k)}return new Uint8ClampedArray(k)};
m.getAsRGBAFloat=function(){const k=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(k);return k};m.updateStatistics=function(){this.statistics=this.pixels.map(t=>this._calculateBandStatistics(t,this.mask));const k=this.mask;let q=0;if(k)for(let t=0;t<k.length;t++)k[t]&&q++;else q=this.width*this.height;this.validPixelCount=q};m.clamp=function(k){if(k&&"f64"!==k&&"f32"!==k){switch(k){case "u8":var q=[0,255];break;case "u16":q=[0,65535];break;case "u32":q=[0,4294967295];break;case "s8":q=
[-128,127];break;case "s16":q=[-32768,32767];break;case "s32":q=[-2147483648,2147483647];break;default:q=[-3.4*1E39,3.4*1E39]}var [t,w]=q;q=this.pixels;var A=this.width*this.height,x=q.length,y=[];for(let F=0;F<x;F++){var B=c.createEmptyBand(k,A);var C=q[F];for(let E=0;E<A;E++){var D=C[E];B[E]=D>w?w:D<t?t:D}y.push(B)}this.pixels=y;this.pixelType=k}};m.extractBands=function(k){if(g.isNone(k)||0===k.length||null==this.pixels||0===this.pixels.length)return this;var q=this.pixels.length;const t=k.some(w=>
w>=this.pixels.length);q=q===k.length&&!k.some((w,A)=>w!==A);return t||q?this:new c({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:k.map(w=>this.pixels[w]),statistics:this.statistics&&k.map(w=>this.statistics[w])})};m.clone=function(){const k=new c({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(k.mask=
this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let q;const t=c.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){k.pixels=[];const w=this.pixels[0].slice;for(q=0;q<this.pixels.length;q++)k.pixels[q]=w?this.pixels[q].slice(0,this.pixels[q].length):new t(this.pixels[q])}if(this.statistics)for(k.statistics=[],q=0;q<this.statistics.length;q++)k.statistics[q]=z.clone(this.statistics[q]);return k};m._fillFrom8Bit=function(k){const {mask:q,maskIsAlpha:t,
pixels:w}=this;if(k&&w&&w.length){var A,x;var y=A=x=w[0];3<=w.length?(A=w[1],x=w[2]):2===w.length&&(A=w[1]);var B=new Uint32Array(k),C=this.width*this.height;if(y.length!==C)d.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(q&&q.length===C)if(t)for(k=0;k<C;k++)q[k]&&(B[k]=q[k]<<24|x[k]<<16|A[k]<<8|y[k]);else for(k=0;k<C;k++)q[k]&&(B[k]=-16777216|x[k]<<16|A[k]<<8|y[k]);else for(k=0;k<C;k++)B[k]=-16777216|x[k]<<16|A[k]<<8|y[k]}else d.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};
m._fillFromNon8Bit=function(k){const {pixels:q,mask:t,statistics:w}=this;if(k&&q&&q.length){var A=this.pixelType,x=1,y=0;x=1;w&&0<w.length?(y=w.map(E=>E.minValue).reduce((E,G)=>Math.min(E,G)),x=w.map(E=>E.maxValue-E.minValue).reduce((E,G)=>Math.max(E,G)),x=255/x):(x=255,"s8"===A?(y=-128,x=127):"u16"===A?x=65535:"s16"===A?(y=-32768,x=32767):"u32"===A?x=4294967295:"s32"===A?(y=-2147483648,x=2147483647):"f32"===A?(y=-3.4*1E39,x=3.4*1E39):"f64"===A&&(y=-Number.MAX_VALUE,x=Number.MAX_VALUE),x=255/(x-y));
k=new Uint32Array(k);A=this.width*this.height;var B,C,D;var F=B=C=q[0];if(F.length!==A)return d.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=q.length)if(B=q[1],3<=q.length&&(C=q[2]),t&&t.length===A)for(D=0;D<A;D++)t[D]&&(k[D]=-16777216|(C[D]-y)*x<<16|(B[D]-y)*x<<8|(F[D]-y)*x);else for(D=0;D<A;D++)k[D]=-16777216|(C[D]-y)*x<<16|(B[D]-y)*x<<8|(F[D]-y)*x;else if(t&&t.length===A)for(D=0;D<A;D++)B=(F[D]-y)*x,t[D]&&(k[D]=-16777216|B<<16|B<<8|B);else for(D=0;D<A;D++)B=
(F[D]-y)*x,k[D]=-16777216|B<<16|B<<8|B}else d.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};m._fillFrom32Bit=function(k){const {pixels:q,mask:t}=this;if(!k||!q||!q.length)return d.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let w,A,x,y;w=A=x=q[0];3<=q.length?(A=q[1],x=q[2]):2===q.length&&(A=q[1]);const B=this.width*this.height;if(w.length!==B)return d.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");
let C=0;if(t&&t.length===B)for(y=0;y<B;y++)k[C++]=w[y],k[C++]=A[y],k[C++]=x[y],k[C++]=t[y]&1;else for(y=0;y<B;y++)k[C++]=w[y],k[C++]=A[y],k[C++]=x[y],k[C++]=1};m._calculateBandStatistics=function(k,q){let t=Infinity,w=-Infinity;const A=k.length;let x,y=0;if(q)for(x=0;x<A;x++)q[x]&&(y=k[x],t=y<t?y:t,w=y>w?y:w);else for(x=0;x<A;x++)y=k[x],t=y<t?y:t,w=y>w?y:w;return{minValue:t,maxValue:w}};return l}(v.JSONSupport);n.__decorate([e.property({json:{write:!0}})],h.prototype,"width",void 0);n.__decorate([e.property({json:{write:!0}})],
h.prototype,"height",void 0);n.__decorate([e.property({json:{write:!0}})],h.prototype,"pixelType",void 0);n.__decorate([b.cast("pixelType")],h.prototype,"castPixelType",null);n.__decorate([e.property({json:{write:!0}})],h.prototype,"validPixelCount",void 0);n.__decorate([e.property({json:{write:!0}})],h.prototype,"mask",void 0);n.__decorate([e.property({json:{write:!0}})],h.prototype,"maskIsAlpha",void 0);n.__decorate([e.property({json:{write:!0}})],h.prototype,"pixels",void 0);n.__decorate([e.property({json:{write:!0}})],
h.prototype,"statistics",void 0);return h=c=n.__decorate([a.subclass("esri.layers.support.PixelBlock")],h)})},"esri/views/webgl/rasterUtils":function(){define("exports ../../chunks/vec2f64 ./context-util ./enums ./FramebufferObject ./Texture".split(" "),function(u,n,h,r,v,z){u.createColormapTexture=function(p,g){return new z.Texture(p,{width:g.length/4,height:1,target:r.TextureType.TEXTURE_2D,pixelFormat:r.PixelFormat.RGBA,internalFormat:r.PixelFormat.RGBA,dataType:r.PixelType.UNSIGNED_BYTE,samplingMode:r.TextureSamplingMode.NEAREST,
wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1},g)};u.createFrameBuffer=function(p,g,e,b){b=new z.Texture(p,{width:g,height:e,target:r.TextureType.TEXTURE_2D,pixelFormat:r.PixelFormat.RGBA,internalFormat:r.PixelFormat.RGBA,samplingMode:r.TextureSamplingMode.NEAREST,dataType:b?r.PixelType.UNSIGNED_BYTE:r.PixelType.FLOAT,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1});return new v.FramebufferObject(p,{colorTarget:r.TargetType.TEXTURE,depthStencilTarget:r.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER,
width:g,height:e},b)};u.createRasterTexture=function(p,g,e="nearest",b=!1){var a;const c=(b=!(b&&"u8"===g.pixelType))?r.PixelType.FLOAT:r.PixelType.UNSIGNED_BYTE,d=null==g.pixels||0===g.pixels.length?null:b?g.getAsRGBAFloat():g.getAsRGBA(),f=null==(a=p.capabilities.textureFloat)?void 0:a.textureFloatLinear;return new z.Texture(p,{width:g.width,height:g.height,target:r.TextureType.TEXTURE_2D,pixelFormat:r.PixelFormat.RGBA,internalFormat:p.type===h.ContextType.WEBGL2&&b?r.SizedPixelFormat.RGBA32F:r.PixelFormat.RGBA,
samplingMode:!f||"bilinear"!==e&&"cubic"!==e?r.TextureSamplingMode.NEAREST:r.TextureSamplingMode.LINEAR,dataType:c,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1},d)};u.createTransformTexture=function(p,g){const {spacing:e,offsets:b,coefficients:a,size:[c,d]}=g;var f=1<e[0];g={width:f?4*c:c,height:d,target:r.TextureType.TEXTURE_2D,pixelFormat:r.PixelFormat.RGBA,internalFormat:p.type===h.ContextType.WEBGL2?r.SizedPixelFormat.RGBA32F:r.PixelFormat.RGBA,dataType:r.PixelType.FLOAT,samplingMode:r.TextureSamplingMode.NEAREST,
wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1};const l=new Float32Array(f?c*d*16:2*b.length);if(f)for(let m=0,k=0;m<a.length;m++)l[k++]=a[m],2===m%3&&(l[k++]=1);else for(f=0;f<d;f++)for(let m=0;m<c;m++){const k=4*(f*c+m),q=2*(m*d+f);l[k]=b[q];l[k+1]=b[q+1];l[k+3]=-1===b[q]?0:1}return new z.Texture(p,g,l)};u.getBasicGridUniforms=function(p,g){return{u_scale:p,u_offset:g}};u.getColormapUniforms=function(p,g){return{u_colormapOffset:g||0,u_colormapMaxIndex:p?p.length/4-1:0}};u.getCommonUniforms=
function(p,g,e,b=1,a=!0){return{u_flipY:a,u_applyTransform:p?!0:!1,u_opacity:b,u_transformSpacing:p?p.spacing:n.ZEROS,u_transformGridSize:p?p.size:n.ZEROS,u_targetImageSize:g,u_srcImageSize:e}};u.getShadedReliefUniforms=function(p){return{u_hillshadeType:p.hillshadeType,u_sinZcosAs:p.sinZcosAs,u_sinZsinAs:p.sinZsinAs,u_cosZs:p.cosZs,u_weights:p.weights,u_factor:p.factor,u_minValue:p.minValue,u_maxValue:p.maxValue}};u.getStretchUniforms=function(p){return{u_bandCount:p.bandCount,u_minOutput:p.outMin,
u_maxOutput:p.outMax,u_minCutOff:p.minCutOff,u_maxCutOff:p.maxCutOff,u_factor:p.factor,u_useGamma:p.useGamma,u_gamma:p.gamma,u_gammaCorrection:p.gammaCorrection}};u.getUniformLocationInfos=function(p,g){p=p.gl;g=g.glName;const e=p.getProgramParameter(g,p.ACTIVE_UNIFORMS),b=new Map;let a;for(let c=0;c<e;c++)(a=p.getActiveUniform(g,c))&&b.set(a.name,{location:p.getUniformLocation(g,a.name),info:a});return b};u.setTextures=function(p,g,e,b){e.length===b.length&&(b.some(a=>null==a)||e.some(a=>null==a)||
e.forEach((a,c)=>{g.setUniform1i(a,c);p.bindTexture(b[c],c)}))};u.setUniforms=function(p,g,e){Object.keys(e).forEach(b=>{var a=g.get(b)||g.get(b+"[0]");if(a){var c=e[b];if(null!==a&&null!=c)switch({info:a}=a,a.type){case r.UniformType.FLOAT:1<a.size?p.setUniform1fv(b,c):p.setUniform1f(b,c);break;case r.UniformType.FLOAT_VEC2:p.setUniform2fv(b,c);break;case r.UniformType.FLOAT_VEC3:p.setUniform3fv(b,c);break;case r.UniformType.FLOAT_VEC4:p.setUniform4fv(b,c);break;case r.UniformType.FLOAT_MAT3:p.setUniformMatrix3fv(b,
c);break;case r.UniformType.FLOAT_MAT4:p.setUniformMatrix4fv(b,c);break;case r.UniformType.INT:1<a.size?p.setUniform1iv(b,c):p.setUniform1i(b,c);break;case r.UniformType.BOOL:p.setUniform1i(b,c?1:0);break;case r.UniformType.INT_VEC2:case r.UniformType.BOOL_VEC2:p.setUniform2iv(b,c);break;case r.UniformType.INT_VEC3:case r.UniformType.BOOL_VEC3:p.setUniform3iv(b,c);break;case r.UniformType.INT_VEC4:case r.UniformType.BOOL_VEC4:p.setUniform4iv(b,c)}}})};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/FramebufferObject":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../core/maybe ./BufferObject ./checkWebGLError ./context-util ./enums ./Renderbuffer ./Texture ./Util".split(" "),function(u,n,h,r,v,z,p,g,e,b,a){function c(q){return"type"in q&&"texture"===q.type}function d(q){return c(q)||"pixelFormat"in q}function f(q,t){q.target!==g.TextureType.TEXTURE_2D&&q.target!==g.TextureType.TEXTURE_CUBE_MAP&&
console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!");void 0!==t.width&&0<=t.width&&void 0!==t.height&&0<=t.height?t.width===q.width&&t.height===q.height||console.error("Color attachment texture must match the framebuffer's!"):(t.width=q.width,t.height=q.height)}function l(q,t){void 0!==t.width&&0<=t.width&&void 0!==t.height&&0<=t.height?t.width===q.width&&t.height===q.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(t.width=q.width,t.height=q.height)}
function m(q){return q.descriptor.target===g.TextureType.TEXTURE_CUBE_MAP?g.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X:g.TextureType.TEXTURE_2D}const k=h.getLogger("esri.views.webgl.FrameBufferObject");h=function(){function q(w,A,x=null,y=null){this._context=w;this._stencilAttachment=this._depthAttachment=this._glName=null;this._colorAttachments=new Map;this._initialized=!1;this._desc={...A};w.instanceCounter.increment(g.ResourceType.FramebufferObject,this);if(r.isSome(x))for(Array.isArray(x)||(x=[x]),
w=0;w<x.length;++w){A=x[w];const C=g.ColorAttachment.COLOR_ATTACHMENT0+w;let D;d(A)?(c(A)?(D=A.descriptor,this._colorAttachments.set(C,A)):(D=A,this._colorAttachments.set(C,new b.Texture(this._context,D))),f(D,this._desc)):("type"in A&&"renderbuffer"===A.type?(D=A.descriptor,this._colorAttachments.set(C,A)):(D=A,this._colorAttachments.set(C,new e.Renderbuffer(this._context,D))),l(D,this._desc));this._validateColorAttachmentPoint(C)}if(r.isSome(y))if(d(y))this._context.capabilities.depthTexture||console.error("Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2"),
c(y)?(x=y.descriptor,this._depthStencilTexture=y):(x=y,this._depthStencilTexture=new b.Texture(this._context,x)),f(x,this._desc);else{var B;"type"in y&&"renderbuffer"===y.type?x=y.descriptor:(x=y,y=new e.Renderbuffer(this._context,x));w=null!=(B=this._desc.depthStencilTarget)?B:g.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER;w===g.DepthStencilTargetType.STENCIL_RENDER_BUFFER?this._stencilAttachment=y:w===g.DepthStencilTargetType.DEPTH_RENDER_BUFFER||w===g.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER?
this._depthAttachment=y:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER');l(x,this._desc)}}var t=q.prototype;t.dispose=function(){if(this._desc){var w=this._context.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null);this._context.bindFramebuffer(w);this._context.instanceCounter.decrement(g.ResourceType.FramebufferObject,
this);this._desc=null}};t.getColorTexture=function(w){return(w=this._colorAttachments.get(w))&&c(w)?w:null};t.attachColorTexture=function(w,A=g.ColorAttachment.COLOR_ATTACHMENT0){w&&(this._validateColorAttachmentPoint(A),f(w.descriptor,this._desc),this._disposeColorAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(w.glName,A)),this._colorAttachments.set(A,w))};t.detachColorTexture=function(w=g.ColorAttachment.COLOR_ATTACHMENT0){const A=this._colorAttachments.get(w);
if(c(A))return this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,w)),this._colorAttachments.delete(w),A};t.setColorTextureTarget=function(w,A=g.ColorAttachment.COLOR_ATTACHMENT0){const x=this._colorAttachments.get(A);c(x)&&this._framebufferTexture2D(x.glName,A,w)};t.attachDepthStencilTexture=function(w){if(!r.isNone(w)){var A=w.descriptor;A.pixelFormat!==g.PixelFormat.DEPTH_STENCIL&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");
A.dataType!==g.PixelType.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");f(A,this._desc);this._desc.depthStencilTarget&&this._desc.depthStencilTarget!==g.DepthStencilTargetType.DEPTH_STENCIL_TEXTURE&&(this._desc.depthStencilTarget=g.DepthStencilTargetType.DEPTH_STENCIL_TEXTURE);this._disposeDepthStencilAttachments();
this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(w.glName,g.DepthStencilAttachment));this._depthStencilTexture=w}};t.detachDepthStencilTexture=function(){const w=this._depthStencilTexture;w&&this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,g.DepthStencilAttachment));this._depthStencilTexture=null;return w};t.attachDepthStencilBuffer=function(w){if(!r.isNone(w)){var A=w.descriptor;A.internalFormat!==g.RenderbufferFormat.DEPTH_STENCIL&&
A.internalFormat!==g.RenderbufferFormat.DEPTH_COMPONENT16&&console.error("Depth/Stencil buffer must have correct internalFormat");l(A,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=A.internalFormat===g.RenderbufferFormat.DEPTH_STENCIL?g.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER:g.DepthStencilTargetType.DEPTH_RENDER_BUFFER;this._initialized&&(this._context.bindFramebuffer(this),A=this._context.gl,A.framebufferRenderbuffer(g.FramebufferTarget.FRAMEBUFFER,this._desc.depthStencilTarget===
g.DepthStencilTargetType.DEPTH_RENDER_BUFFER?A.DEPTH_ATTACHMENT:A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,w.glName));this._depthAttachment=w}};t.detachDepthStencilBuffer=function(){const w=this._context.gl,A=this._depthAttachment;A&&this._initialized&&(this._context.bindFramebuffer(this),w.framebufferRenderbuffer(g.FramebufferTarget.FRAMEBUFFER,this._desc.depthStencilTarget===g.DepthStencilTargetType.DEPTH_RENDER_BUFFER?w.DEPTH_ATTACHMENT:w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,null));this._depthAttachment=
null;return A};t.detachAll=function(){this._colorAttachments.forEach((w,A)=>this._detachColorAttachment(A));this.detachDepthStencilBuffer();this.detachDepthStencilTexture()};t.copyToTexture=function(w,A,x,y,B,C,D){(0>w||0>A||0>B||0>C)&&console.error("Offsets cannot be negative!");(0>=x||0>=y)&&console.error("Copy width and height must be greater than zero!");var F=this._desc;const E=D.descriptor;D.descriptor.target!==g.TextureType.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!");(w+
x>F.width||A+y>F.height||B+x>E.width||C+y>E.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");F=this._context;D=F.bindTexture(D,b.Texture.TEXTURE_UNIT_FOR_UPDATES);F.setActiveTexture(b.Texture.TEXTURE_UNIT_FOR_UPDATES);F.bindFramebuffer(this);F.gl.copyTexSubImage2D(g.TextureType.TEXTURE_2D,0,B,C,w,A,x,y);F.bindTexture(D,b.Texture.TEXTURE_UNIT_FOR_UPDATES)};t.readPixels=function(w,A,x,y,B,C,D){(0>=x||0>=y)&&console.error("Copy width and height must be greater than zero!");
D||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(w,A,x,y,B,C,D)};t.readPixelsAsync=function(){var w=n._asyncToGenerator(function*(A,x,y,B,C,D,F){if(this._context.type!==p.ContextType.WEBGL2)z.webglDebugEnabled()&&console.warn("Attempting to read pixels using pixel buffer object without WebGL2"),this.readPixels(A,x,y,B,C,D,F);else{var E=this._context.gl,G=v.BufferObject.createPixelPack(this._context,g.Usage.STREAM_READ,F.byteLength);
this._context.bindBuffer(G);this._context.bindFramebuffer(this);E.readPixels(A,x,y,B,C,D,0);this._context.unbindBuffer(g.BufferType.PIXEL_PACK_BUFFER);yield G.getSubDataAsync(F);G.dispose()}});return function(A,x,y,B,C,D,F){return w.apply(this,arguments)}}();t.resize=function(w,A){const x=this._desc;if(x.width!==w||x.height!==A)if(this._initialized){x.width=w;x.height=A;this._colorAttachments.forEach(y=>{y&&y.resize(w,A)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(w,A);else if(this._depthAttachment||
this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(w,A),this._stencilAttachment&&this._stencilAttachment.resize(w,A);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=!1}else x.width=w,x.height=A,this._colorAttachments.forEach(y=>{y&&y.resize(w,A)}),this._depthStencilTexture&&this._depthStencilTexture.resize(w,A)};t.initializeAndBind=function(w=g.FramebufferTarget.FRAMEBUFFER){var A,x,y,B;const C=this._context.gl;if(this._initialized)C.bindFramebuffer(w,
this.glName);else{this._glName&&C.deleteFramebuffer(this._glName);var D=this._context,F=C.createFramebuffer(),E=this._desc,G=null!=(A=E.colorTarget)?A:g.TargetType.RENDER_BUFFER;A=null!=(x=E.width)?x:1;x=null!=(y=E.height)?y:1;C.bindFramebuffer(w,F);0===this._colorAttachments.size&&(G===g.TargetType.TEXTURE||G===g.TargetType.CUBEMAP?this._colorAttachments.set(g.ColorAttachment.COLOR_ATTACHMENT0,new b.Texture(D,{target:this.descriptor.colorTarget===g.TargetType.CUBEMAP?g.TextureType.TEXTURE_CUBE_MAP:
g.TextureType.TEXTURE_2D,pixelFormat:g.PixelFormat.RGBA,dataType:g.PixelType.UNSIGNED_BYTE,samplingMode:g.TextureSamplingMode.NEAREST,wrapMode:g.TextureWrapMode.CLAMP_TO_EDGE,width:E.width,height:E.height})):(y=new e.Renderbuffer(D,{internalFormat:g.SizedPixelFormat.RGBA4,width:A,height:x}),this._colorAttachments.set(g.ColorAttachment.COLOR_ATTACHMENT0,y)));this._colorAttachments.forEach((O,H)=>{O&&(c(O)?this._framebufferTexture2D(O.glName,H,m(O),w):C.framebufferRenderbuffer(w,H,C.RENDERBUFFER,O.glName))});
y=null!=(B=E.depthStencilTarget)?B:g.DepthStencilTargetType.NONE;switch(y){case g.DepthStencilTargetType.DEPTH_RENDER_BUFFER:case g.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER:this._depthAttachment||(this._depthAttachment=new e.Renderbuffer(D,{internalFormat:E.depthStencilTarget===g.DepthStencilTargetType.DEPTH_RENDER_BUFFER?g.RenderbufferFormat.DEPTH_COMPONENT16:g.RenderbufferFormat.DEPTH_STENCIL,width:A,height:x}));C.framebufferRenderbuffer(w,y===g.DepthStencilTargetType.DEPTH_RENDER_BUFFER?
C.DEPTH_ATTACHMENT:C.DEPTH_STENCIL_ATTACHMENT,C.RENDERBUFFER,this._depthAttachment.glName);break;case g.DepthStencilTargetType.STENCIL_RENDER_BUFFER:this._stencilAttachment||(this._stencilAttachment=new e.Renderbuffer(D,{internalFormat:g.RenderbufferFormat.STENCIL_INDEX8,width:A,height:x}));C.framebufferRenderbuffer(w,C.STENCIL_ATTACHMENT,C.RENDERBUFFER,this._stencilAttachment.glName);break;case g.DepthStencilTargetType.DEPTH_STENCIL_TEXTURE:this._depthStencilTexture||(D.capabilities.depthTexture||
console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new b.Texture(D,{target:g.TextureType.TEXTURE_2D,pixelFormat:g.PixelFormat.DEPTH_STENCIL,dataType:g.PixelType.UNSIGNED_INT_24_8,samplingMode:g.TextureSamplingMode.NEAREST,wrapMode:g.TextureWrapMode.CLAMP_TO_EDGE,width:A,height:x})),this._framebufferTexture2D(this._depthStencilTexture.glName,C.DEPTH_STENCIL_ATTACHMENT,m(this._depthStencilTexture),
w)}z.webglValidateShadersEnabled()&&C.checkFramebufferStatus(w)!==C.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=F;this._initialized=!0}};t._framebufferTexture2D=function(w,A=g.ColorAttachment.COLOR_ATTACHMENT0,x=g.TextureType.TEXTURE_2D,y=g.FramebufferTarget.FRAMEBUFFER,B=0){this._context.gl.framebufferTexture2D(y,A,x,w,B)};t._detachColorAttachment=function(w){z.webglDebugEnabled()&&console.warn("Detaching an FBO attachment can be a slow due to invalidating framebuffer completeness!");
const A=this._context.gl,x=this._colorAttachments.get(w);c(x)?this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,w)):this._initialized&&(this._context.bindFramebuffer(this),A.framebufferRenderbuffer(g.FramebufferTarget.FRAMEBUFFER,w,A.RENDERBUFFER,null));this._colorAttachments.delete(w);return x};t._disposeColorAttachments=function(){this._colorAttachments.forEach((w,A)=>{this._detachColorAttachment(A);w.dispose()});this._colorAttachments.clear()};t._disposeDepthStencilAttachments=
function(){const w=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),w.framebufferRenderbuffer(g.FramebufferTarget.FRAMEBUFFER,this._desc.depthStencilTarget===g.DepthStencilTargetType.DEPTH_RENDER_BUFFER?w.DEPTH_ATTACHMENT:w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),w.framebufferRenderbuffer(g.FramebufferTarget.FRAMEBUFFER,
w.STENCIL_ATTACHMENT,w.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,w.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};t._validateColorAttachmentPoint=function(w){if(-1===q._MAX_COLOR_ATTACHMENTS){const A=this._context.capabilities.drawBuffers;q._MAX_COLOR_ATTACHMENTS=A?this._context.gl.getParameter(A.MAX_COLOR_ATTACHMENTS):
1}w-=g.ColorAttachment.COLOR_ATTACHMENT0;w+1>q._MAX_COLOR_ATTACHMENTS&&k.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${w+1}. Implementation supports up to ${q._MAX_COLOR_ATTACHMENTS} color attachments`)};n._createClass(q,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){const w=this._colorAttachments.get(g.ColorAttachment.COLOR_ATTACHMENT0);return w&&c(w)?w:null}},{key:"colorAttachment",
get:function(){return this._colorAttachments.get(g.ColorAttachment.COLOR_ATTACHMENT0)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}},{key:"gpuMemoryUsage",get:function(){return[...this._colorAttachments].reduce((w,[,A])=>w+a.getGpuMemoryUsage(A),
0)+a.getGpuMemoryUsage(this.depthStencilAttachment)}}]);return q}();h._MAX_COLOR_ATTACHMENTS=-1;u.FramebufferObject=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/BufferObject":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/maybe ../../core/typedArrayUtil ./checkWebGLError ./context-util ./enums".split(" "),function(u,n,h,r,v,z,p,g,e){const b=r.getLogger("esri.views.webgl.BufferObject");
r=function(){function a(d,f,l,m){this._context=d;this.bufferType=f;this.usage=l;this._glName=null;this._size=-1;this._indexType=void 0;d.instanceCounter.increment(e.ResourceType.BufferObject,this);this._glName=this._context.gl.createBuffer();p.checkWebGLError(this._context.gl);m&&this.setData(m)}a.createIndex=function(d,f,l){return new a(d,e.BufferType.ELEMENT_ARRAY_BUFFER,f,l)};a.createVertex=function(d,f,l){return new a(d,e.BufferType.ARRAY_BUFFER,f,l)};a.createUniform=function(d,f,l){if(d.type!==
g.ContextType.WEBGL2)throw Error("Uniform buffers are supported in WebGL2 only!");return new a(d,e.BufferType.UNIFORM_BUFFER,f,l)};a.createPixelPack=function(d,f=e.Usage.STREAM_READ,l){if(d.type!==g.ContextType.WEBGL2)throw Error("Pixel pack buffers are supported in WebGL2 only!");d=new a(d,e.BufferType.PIXEL_PACK_BUFFER,f);l&&d.setSize(l);return d};a.createPixelUnpack=function(d,f=e.Usage.STREAM_DRAW,l){if(d.type!==g.ContextType.WEBGL2)throw Error("Pixel unpack buffers are supported in WebGL2 only!");
return new a(d,e.BufferType.PIXEL_UNPACK_BUFFER,f,l)};var c=a.prototype;c.dispose=function(){var d;null!=(d=this._context)&&d.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(e.ResourceType.BufferObject,this),this._context=null):this._glName&&b.warn("Leaked WebGL buffer object")};c.setSize=function(d,f=null){0>=d&&b.error("Buffer size needs to be positive!");if(this.bufferType===e.BufferType.ELEMENT_ARRAY_BUFFER&&v.isSome(f))switch(this._indexType=
f,f){case e.DataType.UNSIGNED_SHORT:d*=2;break;case e.DataType.UNSIGNED_INT:d*=4}this._setBufferData(d)};c.setData=function(d){if(d){var f=d.byteLength;this.bufferType===e.BufferType.ELEMENT_ARRAY_BUFFER&&(z.isUint16Array(d)&&(f/=2,this._indexType=e.DataType.UNSIGNED_SHORT),z.isUint32Array(d)&&(f/=4,this._indexType=e.DataType.UNSIGNED_INT));this._setBufferData(f,d)}};c._setBufferData=function(d,f=null){this._size=d;const l=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);
this._context.bindBuffer(this);const m=this._context.gl;v.isSome(f)?m.bufferData(this.bufferType,f,this.usage):m.bufferData(this.bufferType,d,this.usage);p.checkWebGLError(m);this._isVAOAware&&this._context.bindVAO(l)};c.setSubData=function(d,f=0,l=0,m=d.byteLength){if(d){(0>f||f>=this._size)&&b.error("offset is out of range!");var k=f,q=l,t=m,w=d.byteLength;this.bufferType===e.BufferType.ELEMENT_ARRAY_BUFFER&&(z.isUint16Array(d)?(w/=2,k*=2,q*=2,t*=2):z.isUint32Array(d)&&(w/=4,k*=4,q*=4,t*=4));void 0===
m&&(m=w-1);l>=m&&b.error("end must be bigger than start!");f+l-m>this._size&&b.error("An attempt to write beyond the end of the buffer!");f=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);l=this._context.gl;m=ArrayBuffer.isView(d)?d.buffer:d;d=0===q&&t===d.byteLength?m:m.slice(q,t);l.bufferSubData(this.bufferType,k,d);p.checkWebGLError(l);this._isVAOAware&&this._context.bindVAO(f)}};c.setSubDataFromView=function(d,f,l,m){if(d){(0>f||f>=this._size)&&
b.error("offset is out of range!");l>=m&&b.error("end must be bigger than start!");f+l-m>this._size&&b.error("An attempt to write beyond the end of the buffer!");var k=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);var q=this._context.gl;this._context.type===g.ContextType.WEBGL2?q.bufferSubData(this.bufferType,f*d.BYTES_PER_ELEMENT,d,l,m-l):(l=0===l&&m===d.length?d:d.subarray(l,m),q.bufferSubData(this.bufferType,f*d.BYTES_PER_ELEMENT,l));p.checkWebGLError(q);
this._isVAOAware&&this._context.bindVAO(k)}};c.getSubData=function(d,f=0,l,m){if(this._context.type!==g.ContextType.WEBGL2)b.error("Get buffer subdata is supported in WebGL2 only!");else if(0>l||0>m)b.error("Problem getting subdata: offset and length were less than zero!");else{var k=h.isArrayLike(d)?d.BYTES_PER_ELEMENT:1;k*((null!=l?l:0)+(null!=m?m:0))>d.byteLength?b.error("Problem getting subdata: offset and length exceeded destination size!"):(f+k*(null!=m?m:0)>this.byteSize&&b.warn("Potential problem getting subdata: requested data exceeds buffer size!"),
k=this._context.gl,this._context.bindBuffer(this,e.BufferType.COPY_READ_BUFFER),k.getBufferSubData(e.BufferType.COPY_READ_BUFFER,f,d,l,m),this._context.unbindBuffer(e.BufferType.COPY_READ_BUFFER))}};c.getSubDataAsync=function(){var d=n._asyncToGenerator(function*(f,l=0,m,k){this._context.type!==g.ContextType.WEBGL2?b.error("Get buffer subdata is supported in WebGL2 only!"):(yield this._context.clientWaitAsync(),this.getSubData(f,l,m,k))});return function(f){return d.apply(this,arguments)}}();n._createClass(a,
[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return this.bufferType===e.BufferType.ELEMENT_ARRAY_BUFFER?this._indexType===e.DataType.UNSIGNED_INT?4*this._size:2*this._size:this._size}},{key:"_isVAOAware",get:function(){return this.bufferType===e.BufferType.ELEMENT_ARRAY_BUFFER||this.bufferType===e.BufferType.ARRAY_BUFFER}}]);return a}();u.BufferObject=r;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(u,n,h,r){function v(g,e){switch(e){case g.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case g.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case g.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";
case g.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case g.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case g.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const z=r.getLogger("esri/views/webgl"),p=!!h("enable-feature:webgl-debug");u.checkWebGLError=function(g){if(p){const e=g.getError();
e&&(g=v(g,e),z.error(new n("webgl-error","WebGL error occured",{message:g,stack:Error().stack})))}};u.hasFeatureFlagWebGLDebug=p;u.webglDebugEnabled=function(){return p};u.webglValidateShadersEnabled=function(){return p};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/Renderbuffer":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./context-util","./enums"],function(u,n,h,r){let v=function(){function z(g,e){this._context=
g;this._desc=e;this.type="renderbuffer";this._context.instanceCounter.increment(r.ResourceType.Renderbuffer,this);g=this._context.gl;this.glName=g.createRenderbuffer();this._context.bindRenderbuffer(this);const {width:b,height:a,internalFormat:c,multisampled:d}=e;if(d){if(this._context.type!==h.ContextType.WEBGL2)throw Error("Multisampled renderbuffers are not supported in WebGL1!");g.renderbufferStorageMultisample(g.RENDERBUFFER,this.samples,c,b,a)}else g.renderbufferStorage(g.RENDERBUFFER,c,b,a)}
var p=z.prototype;p.resize=function(g,e){const b=this._desc;if(b.width!==g||b.height!==e)b.width=g,b.height=e,g=this._context.gl,this._context.bindRenderbuffer(this),b.multisampled?g.renderbufferStorageMultisample(g.RENDERBUFFER,this.samples,b.internalFormat,b.width,b.height):g.renderbufferStorage(g.RENDERBUFFER,b.internalFormat,b.width,b.height)};p.dispose=function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(r.ResourceType.Renderbuffer,
this),this._context=null)};n._createClass(z,[{key:"descriptor",get:function(){return this._desc}},{key:"samples",get:function(){const g=this._desc.samples,e=this._context.parameters.maxSamples;return g?Math.min(g,e):e}}]);return z}();u.Renderbuffer=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/Texture":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/mathUtils ../../core/maybe ./checkWebGLError ./context-util ./enums ./capabilities/isWebGL2Context".split(" "),
function(u,n,h,r,v,z,p,g,e){function b(f){return v.isSome(f)&&"type"in f&&"compressed"===f.type}function a(f){var l;if(l=v.isSome(f)&&!b(f))l=!(v.isSome(f)&&"byteLength"in f);return l}function c(f){return f===g.TextureType.TEXTURE_3D||f===g.TextureType.TEXTURE_2D_ARRAY}function d(f,l,m,k=1){l=Math.max(l,m);f===g.TextureType.TEXTURE_3D&&(l=Math.max(l,k));return Math.round(Math.log(l)/Math.LN2)+1}h=function(){function f(m,k,q=null){this._context=m;this.type="texture";this._glName=null;this._descriptor=
void 0;this._wasImmutablyAllocated=this._wrapModeDirty=this._samplingModeDirty=!1;m.instanceCounter.increment(g.ResourceType.Texture,this);this._descriptor={target:g.TextureType.TEXTURE_2D,samplingMode:g.TextureSamplingMode.LINEAR,wrapMode:g.TextureWrapMode.REPEAT,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,isImmutable:!1,...k};if(m.type!==p.ContextType.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),c(this._descriptor.target)))throw Error("3D and array textures are not supported in WebGL1");
this._descriptor.target===g.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(q):this.setData(q)}var l=f.prototype;l.dispose=function(){this._context.gl&&this._glName&&(this._context.unbindTexture(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(g.ResourceType.Texture,this))};l.release=function(){this.dispose()};l.resize=function(m,k){const q=this._descriptor;if(q.width!==m||q.height!==k){if(this._wasImmutablyAllocated)throw Error("Immutable textures can't be resized!");
q.width=m;q.height=k;this._descriptor.target===g.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}};l._setDataCubeMap=function(m=null){for(let k=g.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;k<=g.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;k++)this._setData(m,k)};l.setData=function(m){this._setData(m)};l._setData=function(m,k){var q;if(this._context&&this._context.gl){var t=this._context.gl;this._glName||(this._glName=t.createTexture());void 0===m&&(m=null);var w=this._descriptor;
null!=(q=k)?q:k=w.target;q=c(k);if(null===m&&(w.width=w.width||4,w.height=w.height||4,q)){var A;w.depth=null!=(A=w.depth)?A:1}A=this._context.bindTexture(this,f.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(f.TEXTURE_UNIT_FOR_UPDATES);f._validateTexture(this._context,w);this._configurePixelStorage();var x=w.pixelFormat,y=w.internalFormat?w.internalFormat:this._deriveInternalFormat(x,w.dataType);if(a(m)){x=m.width;let B=m.height;m instanceof HTMLVideoElement&&(x=m.videoWidth,B=m.videoHeight);
w.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(k,y,w.hasMipmap,x,B,1);this._texImage(k,0,y,x,B,1,m);z.checkWebGLError(t);w.hasMipmap&&this.generateMipmap();void 0===w.width&&(w.width=x);void 0===w.height&&(w.height=B);q&&void 0===w.depth&&(w.depth=1)}else{const {width:B,height:C,depth:D}=w;null!=B&&null!=C||console.error("Width and height must be specified!");q&&null==D&&console.error("Depth must be specified!");w.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(k,y,w.hasMipmap,
B,C,D);t.DEPTH24_STENCIL8&&y===t.DEPTH_STENCIL&&(y=t.DEPTH24_STENCIL8);if(b(m)){const F=m.levels;m=d(k,B,C,D);q=Math.min(m-1,F.length-1);e(t)?t.texParameteri(w.target,t.TEXTURE_MAX_LEVEL,q):w.hasMipmap=w.hasMipmap&&m===F.length;const E=y;if(!(E in g.CompressedTextureFormat))throw Error("Attempting to use compressed data with an umcompressed format!");this._forEachMipmapLevel((G,O,H,K)=>{this._compressedTexImage(k,G,E,O,H,K,F[Math.min(G,F.length-1)])},q)}else v.isSome(m)?(this._texImage(k,0,y,B,C,
D,m),z.checkWebGLError(t),w.hasMipmap&&this.generateMipmap()):this._forEachMipmapLevel((F,E,G,O)=>{this._texImage(k,F,y,E,G,O,null);z.checkWebGLError(t)})}f._applySamplingMode(t,this._descriptor);f._applyWrapMode(t,this._descriptor);f._applyAnisotropicFilteringParameters(this._context,this._descriptor);z.checkWebGLError(t);this._context.bindTexture(A,f.TEXTURE_UNIT_FOR_UPDATES)}};l.updateData=function(m,k,q,t,w,A){A||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
const x=this._context.gl,y=this._descriptor,{pixelFormat:B,internalFormat:C,dataType:D,isImmutable:F,target:E}=y;if(F&&!this._wasImmutablyAllocated)throw Error("Cannot update immutable texture before allocation!");const G=this._context.bindTexture(this,f.TEXTURE_UNIT_FOR_UPDATES);(0>k||0>q||t>y.width||w>y.height||k+t>y.width||q+w>y.height)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();a(A)?x.texSubImage2D(E,m,k,q,B,D,A):b(A)?x.compressedTexSubImage2D(E,
m,k,q,t,w,C,A.levels[m]):x.texSubImage2D(E,m,k,q,t,w,B,D,A);this._context.bindTexture(G,f.TEXTURE_UNIT_FOR_UPDATES)};l.updateData3D=function(m,k,q,t,w,A,x,y){y||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const B=this._context.gl;if(!e(B))throw Error("3D textures are not supported in WebGL1");const C=this._descriptor,{pixelFormat:D,dataType:F,isImmutable:E,target:G,internalFormat:O}=C;if(E&&!this._wasImmutablyAllocated)throw Error("Cannot update immutable texture before allocation!");
c(G)||console.warn("Attempting to set 3D texture data on a non-3D texture");const H=this._context.bindTexture(this,f.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(f.TEXTURE_UNIT_FOR_UPDATES);(0>k||0>q||0>t||w>C.width||A>C.height||x>C.depth||k+w>C.width||q+A>C.height||t+x>C.depth)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();b(y)?(y=y.levels[m],B.compressedTexSubImage3D(G,m,k,q,t,w,A,x,O,y)):B.texSubImage3D(G,m,k,q,t,w,A,x,D,F,y);this._context.bindTexture(H,
f.TEXTURE_UNIT_FOR_UPDATES)};l.generateMipmap=function(){const m=this._descriptor;if(!m.hasMipmap){if(this._wasImmutablyAllocated)throw Error("Cannot add mipmaps to immutable texture after allocation");this._samplingModeDirty=m.hasMipmap=!0;f._validateTexture(this._context,m)}m.samplingMode===g.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,m.samplingMode=g.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):m.samplingMode===g.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,m.samplingMode=
g.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);const k=this._context.bindTexture(this,f.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(f.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(m.target);this._context.bindTexture(k,f.TEXTURE_UNIT_FOR_UPDATES)};l.setSamplingMode=function(m){m!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=m,this._samplingModeDirty=!0)};l.setWrapMode=function(m){m!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=m,f._validateTexture(this._context,
this._descriptor),this._wrapModeDirty=!0)};l.applyChanges=function(){const m=this._context.gl,k=this._descriptor;this._samplingModeDirty&&(f._applySamplingMode(m,k),this._samplingModeDirty=!1);this._wrapModeDirty&&(f._applyWrapMode(m,k),this._wrapModeDirty=!1)};l._deriveInternalFormat=function(m,k){if(this._context.type===p.ContextType.WEBGL1)return m;switch(k){case g.PixelType.FLOAT:switch(m){case g.PixelFormat.RGBA:return g.SizedPixelFormat.RGBA32F;case g.PixelFormat.RGB:return g.SizedPixelFormat.RGB32F;
default:throw Error("Unable to derive format");}case g.PixelType.UNSIGNED_BYTE:switch(m){case g.PixelFormat.RGBA:return g.SizedPixelFormat.RGBA8;case g.PixelFormat.RGB:return g.SizedPixelFormat.RGB8}default:return m}};l._configurePixelStorage=function(){const m=this._context.gl,{unpackAlignment:k,flipped:q,preMultiplyAlpha:t}=this._descriptor;m.pixelStorei(m.UNPACK_ALIGNMENT,k);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,q?1:0);m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t?1:0)};l._texStorage=function(m,
k,q,t,w,A){const x=this._context.gl;if(!e(x))throw Error("Immutable textures are not supported in WebGL1");if(!(k in g.SizedPixelFormat))throw Error("Immutable textures must have a sized internal format");this._descriptor.isImmutable&&(q=q?d(m,t,w,A):1,c(m)?x.texStorage3D(m,q,k,t,w,A):x.texStorage2D(m,q,k,t,w),this._wasImmutablyAllocated=!0)};l._texImage=function(m,k,q,t,w,A,x){const y=this._context.gl;let B=null;const C=this._context.type===p.ContextType.WEBGL2,D=c(m),{isImmutable:F,pixelFormat:E,
dataType:G}=this._descriptor;C&&(B=y);!C&&a(x)?y.texImage2D(m,0,q,E,G,x):F?v.isSome(x)&&(D?B.texSubImage3D(m,k,0,0,0,t,w,A,E,G,x):y.texSubImage2D(m,k,0,0,t,w,E,G,x)):(x=v.unwrap(x),D?B.texImage3D(m,k,q,t,w,A,0,E,G,x):y.texImage2D(m,k,q,t,w,0,E,G,x))};l._compressedTexImage=function(m,k,q,t,w,A,x){const y=this._context.gl;let B=null;const C=c(m),D=this._descriptor.isImmutable;if(C){if(this._context.type!==p.ContextType.WEBGL2)throw Error("3D textures are not supported in WebGL1");B=y}D?v.isSome(x)&&
(C?B.compressedTexSubImage3D(m,k,0,0,0,t,w,A,q,x):y.compressedTexSubImage2D(m,k,0,0,t,w,q,x)):C?B.compressedTexImage3D(m,k,q,t,w,A,0,x):y.compressedTexImage2D(m,k,q,t,w,0,x)};l._forEachMipmapLevel=function(m,k=Infinity){let {width:q,height:t,depth:w,hasMipmap:A,target:x}=this._descriptor;const y=x===g.TextureType.TEXTURE_3D;for(let B=0;;++B){m(B,q,t,w);if(!A||1===q&&1===t&&(!y||1===w)||B>=k)break;q=Math.max(1,q>>1);t=Math.max(1,t>>1);y&&(w=Math.max(1,w>>1))}};f._validateTexture=function(m,k){(0>k.width||
0>k.height||0>k.depth)&&console.error("Negative dimension parameters are not allowed!");m=e(m.gl);const q=r.isPowerOfTwo(k.width)&&r.isPowerOfTwo(k.height);m||!k.isImmutable&&!c(k.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!");m||q||("number"===typeof k.wrapMode?k.wrapMode!==g.TextureWrapMode.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(k.wrapMode.s!==g.TextureWrapMode.CLAMP_TO_EDGE||k.wrapMode.t!==g.TextureWrapMode.CLAMP_TO_EDGE)&&
console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),k.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};f._applySamplingMode=function(m,k){let q=k.samplingMode,t=k.samplingMode;if(q===g.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||q===g.TextureSamplingMode.LINEAR_MIPMAP_LINEAR)q=g.TextureSamplingMode.LINEAR,k.hasMipmap||(t=g.TextureSamplingMode.LINEAR);else if(q===g.TextureSamplingMode.NEAREST_MIPMAP_NEAREST||q===g.TextureSamplingMode.NEAREST_MIPMAP_LINEAR)q=
g.TextureSamplingMode.NEAREST,k.hasMipmap||(t=g.TextureSamplingMode.NEAREST);m.texParameteri(k.target,m.TEXTURE_MAG_FILTER,q);m.texParameteri(k.target,m.TEXTURE_MIN_FILTER,t)};f._applyWrapMode=function(m,k){"number"===typeof k.wrapMode?(m.texParameteri(k.target,m.TEXTURE_WRAP_S,k.wrapMode),m.texParameteri(k.target,m.TEXTURE_WRAP_T,k.wrapMode)):(m.texParameteri(k.target,m.TEXTURE_WRAP_S,k.wrapMode.s),m.texParameteri(k.target,m.TEXTURE_WRAP_T,k.wrapMode.t))};f._applyAnisotropicFilteringParameters=function(m,
k){var q;const t=m.capabilities.textureFilterAnisotropic;t&&m.gl.texParameterf(k.target,t.TEXTURE_MAX_ANISOTROPY,null!=(q=k.maxAnisotropy)?q:1)};n._createClass(f,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}},{key:"isDirty",get:function(){return this._samplingModeDirty||this._wrapModeDirty}}]);return f}();h.TEXTURE_UNIT_FOR_UPDATES=0;u.Texture=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(u){return window.WebGL2RenderingContext&&u instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","../../core/maybe","./enums"],function(u,n,h,r){function v(g){return g[0].stride}function z(g){switch(g){case r.PixelFormat.ALPHA:case r.PixelFormat.LUMINANCE:case r.PixelFormat.RED:case r.PixelFormat.RED_INTEGER:case r.SizedPixelFormat.R8:case r.SizedPixelFormat.R8I:case r.SizedPixelFormat.R8UI:case r.SizedPixelFormat.R8_SNORM:case r.RenderbufferFormat.STENCIL_INDEX8:return 1;
case r.PixelFormat.LUMINANCE_ALPHA:case r.PixelFormat.RG:case r.PixelFormat.RG_INTEGER:case r.SizedPixelFormat.RGBA4:case r.SizedPixelFormat.R16F:case r.SizedPixelFormat.R16I:case r.SizedPixelFormat.R16UI:case r.SizedPixelFormat.RG8:case r.SizedPixelFormat.RG8I:case r.SizedPixelFormat.RG8UI:case r.SizedPixelFormat.RG8_SNORM:case r.SizedPixelFormat.RGB565:case r.SizedPixelFormat.RGB5_A1:case r.RenderbufferFormat.DEPTH_COMPONENT16:return 2;case r.PixelFormat.DEPTH_COMPONENT:case r.PixelFormat.RGB:case r.PixelFormat.RGB_INTEGER:case r.SizedPixelFormat.RGB8:case r.SizedPixelFormat.RGB8I:case r.SizedPixelFormat.RGB8UI:case r.SizedPixelFormat.RGB8_SNORM:case r.SizedPixelFormat.SRGB8:case r.RenderbufferFormat.DEPTH_COMPONENT24:return 3;
case r.PixelFormat.DEPTH_STENCIL:case r.PixelFormat.RGBA:case r.PixelFormat.RGBA_INTEGER:case r.SizedPixelFormat.RGBA8:case r.SizedPixelFormat.R32F:case r.SizedPixelFormat.R11F_G11F_B10F:case r.SizedPixelFormat.RG16F:case r.SizedPixelFormat.R32I:case r.SizedPixelFormat.R32UI:case r.SizedPixelFormat.RG16I:case r.SizedPixelFormat.RG16UI:case r.SizedPixelFormat.RGBA8I:case r.SizedPixelFormat.RGBA8UI:case r.SizedPixelFormat.RGBA8_SNORM:case r.SizedPixelFormat.SRGB8_ALPHA8:case r.SizedPixelFormat.RGB9_E5:case r.SizedPixelFormat.RGB10_A2UI:case r.SizedPixelFormat.RGB10_A2:case r.RenderbufferFormat.DEPTH_STENCIL:case r.RenderbufferFormat.DEPTH_COMPONENT32F:case r.RenderbufferFormat.DEPTH24_STENCIL8:return 4;
case r.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case r.SizedPixelFormat.RGB16F:case r.SizedPixelFormat.RGB16I:case r.SizedPixelFormat.RGB16UI:return 6;case r.SizedPixelFormat.RG32F:case r.SizedPixelFormat.RG32I:case r.SizedPixelFormat.RG32UI:case r.SizedPixelFormat.RGBA16F:case r.SizedPixelFormat.RGBA16I:case r.SizedPixelFormat.RGBA16UI:return 8;case r.SizedPixelFormat.RGB32F:case r.SizedPixelFormat.RGB32I:case r.SizedPixelFormat.RGB32UI:return 12;case r.SizedPixelFormat.RGBA32F:case r.SizedPixelFormat.RGBA32I:case r.SizedPixelFormat.RGBA32UI:return 16;
case r.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case r.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case r.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case r.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case r.CompressedTextureFormat.COMPRESSED_R11_EAC:case r.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case r.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case r.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case r.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case r.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;
case r.CompressedTextureFormat.COMPRESSED_RG11_EAC:case r.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case r.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case r.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}function p(g){if(h.isNone(g))return 0;if("descriptor"in g)return g.glName?p(g.descriptor):0;const e=g.internalFormat||"pixelFormat"in g&&g.pixelFormat;if(!e)return 0;const b="hasMipmap"in g&&g.hasMipmap?1.3:1;g=g.width*g.height;return z(e)*g*b}u.bindVertexBufferLayout=
function(g,e,b,a,c=0){const d=g.gl,f=g.capabilities.instancing;g.bindBuffer(b);for(const l of a)if(g=e.get(l.name),void 0===g&&console.error(`There is no location for vertex attribute '${l.name}' defined.`),b=c*l.stride,4>=l.count)d.vertexAttribPointer(g,l.count,l.type,l.normalized,l.stride,l.offset+b),d.enableVertexAttribArray(g),0<l.divisor&&f&&f.vertexAttribDivisor(g,l.divisor);else if(9===l.count)for(a=0;3>a;a++)d.vertexAttribPointer(g+a,3,l.type,l.normalized,l.stride,l.offset+12*a+b),d.enableVertexAttribArray(g+
a),0<l.divisor&&f&&f.vertexAttribDivisor(g+a,l.divisor);else if(16===l.count)for(a=0;4>a;a++)d.vertexAttribPointer(g+a,4,l.type,l.normalized,l.stride,l.offset+16*a+b),d.enableVertexAttribArray(g+a),0<l.divisor&&f&&f.vertexAttribDivisor(g+a,l.divisor);else console.error("Unsupported vertex attribute element count: "+l.count)};u.getBytesPerElementFormat=z;u.getErrorString=function(g){g=g.gl;switch(g.getError()){case g.NO_ERROR:return null;case g.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";
case g.INVALID_VALUE:return"A numeric argument is out of range";case g.INVALID_OPERATION:return"The specified command is not allowed for the current state";case g.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case g.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case g.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"};u.getGpuMemoryUsage=p;u.getStride=v;u.unbindVertexBufferLayout=function(g,e,b,a){const c=
g.gl,d=g.capabilities.instancing;g.bindBuffer(b);for(const f of a)if(b=e.get(f.name),4>=f.count)c.disableVertexAttribArray(b),f.divisor&&0<f.divisor&&d&&d.vertexAttribDivisor(b,0);else if(9===f.count)for(a=0;3>a;a++)c.disableVertexAttribArray(b+a),f.divisor&&0<f.divisor&&d&&d.vertexAttribDivisor(b+a,0);else if(16===f.count)for(a=0;4>a;a++)c.disableVertexAttribArray(b+a),f.divisor&&0<f.divisor&&d&&d.vertexAttribDivisor(b+a,0);else console.error("Unsupported vertex attribute element count: "+f.count);
g.unbindBuffer(r.BufferType.ARRAY_BUFFER)};u.vertexCount=function(g,e){return g.vertexBuffers[e].size/v(g.layout[e])};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/VertexStream":function(){define(["../../../webgl/BufferObject","../../../webgl/enums","../../../webgl/VertexArrayObject","../../../webgl/VertexElementDescriptor"],function(u,n,h,r){return function(){function v(p,g){this.rctx=p;this._vertexBuffer=u.BufferObject.createVertex(p,
n.Usage.STATIC_DRAW,new Uint16Array(g));this._vao=new h.VertexArrayObject(p,new Map([["a_position",0]]),{geometry:[new r.VertexElementDescriptor("a_position",2,n.DataType.SHORT,0,4)]},{geometry:this._vertexBuffer});this._count=g.length/2}var z=v.prototype;z.bind=function(){this.rctx.bindVAO(this._vao)};z.unbind=function(){this.rctx.bindVAO(null)};z.dispose=function(){this._vao.dispose(!1);this._vertexBuffer.dispose()};z.draw=function(){this.rctx.bindVAO(this._vao);this.rctx.drawArrays(n.PrimitiveType.TRIANGLE_STRIP,
0,this._count)};return v}()})},"esri/views/webgl/VertexArrayObject":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../core/maybe ./enums ./Util".split(" "),function(u,n,h,r,v,z){const p=h.getLogger("esri.views.webgl.VertexArrayObject");h=function(){function g(b,a,c,d,f=null){this._context=b;this._locations=a;this._layout=c;this._buffers=d;this._indexBuffer=f;this._glName=null;this._initialized=!1;b.instanceCounter.increment(v.ResourceType.VertexArrayObject,
this)}var e=g.prototype;e.dispose=function(b=!0){if(this._context){if(this._glName){var a,c;const d=null==(a=this._context)?void 0:null==(c=a.capabilities)?void 0:c.vao;d?(d.deleteVertexArray(this._glName),this._glName=null):p.warn("Leaked WebGL VAO")}this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(b){for(const d in this._buffers)this._buffers[d].dispose(),delete this._buffers[d];this._indexBuffer=r.disposeMaybe(this._indexBuffer)}this._context.instanceCounter.decrement(v.ResourceType.VertexArrayObject,
this);this._context=null}else(this._glName||b&&0<Object.getOwnPropertyNames(this._buffers).length)&&p.warn("Leaked WebGL VAO")};e.initialize=function(){if(!this._initialized){var b=this._context.capabilities.vao;if(b){const a=b.createVertexArray();b.bindVertexArray(a);this._bindLayout();b.bindVertexArray(null);this._glName=a}this._initialized=!0}};e.bind=function(){this.initialize();const b=this._context.capabilities.vao;b?b.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};
e._bindLayout=function(){const {_buffers:b,_layout:a,_indexBuffer:c}=this;b||p.error("Vertex buffer dictionary is empty!");const d=this._context.gl;for(const f in b){const l=b[f];l||p.error("Vertex buffer is uninitialized!");const m=a[f];m||p.error("Vertex element descriptor is empty!");z.bindVertexBufferLayout(this._context,this._locations,l,m)}r.isSome(c)&&(this._context.capabilities.vao?d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c.glName):this._context.bindBuffer(c))};e.unbind=function(){this.initialize();
const b=this._context.capabilities.vao;b?b.bindVertexArray(null):this._unbindLayout()};e._unbindLayout=function(){const {_buffers:b,_layout:a}=this;b||p.error("Vertex buffer dictionary is empty!");for(const c in b){const d=b[c];d||p.error("Vertex buffer is uninitialized!");z.unbindVertexBufferLayout(this._context,this._locations,d,a[c])}r.isSome(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)};n._createClass(g,[{key:"glName",get:function(){return this._glName}},{key:"context",
get:function(){return this._context}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){return Object.keys(this._buffers).reduce((b,a)=>b+this._buffers[a].size,r.isSome(this._indexBuffer)?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}}]);return g}();u.VertexArrayObject=h;Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/imagery/BrushVectorField":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../webgl/brushes/WGLBrush","../../../webgl/enums"],function(u,n,h,r){const v=new Float32Array([.27058823529411763,.4588235294117647,.7098039215686275,1,.396078431372549,.5372549019607843,.7215686274509804,1,.5176470588235295,.6196078431372549,.7294117647058823,1,.6352941176470588,.7058823529411765,.7411764705882353,1,
.7529411764705882,.8,.7450980392156863,1,.8705882352941177,.8901960784313725,.7490196078431373,1,1,1,.7490196078431373,1,1,.8627450980392157,.6313725490196078,1,.9803921568627451,.7254901960784313,.5176470588235295,1,.9607843137254902,.596078431372549,.4117647058823529,1,.9294117647058824,.4588235294117647,.3176470588235294,1,.9098039215686274,.08235294117647059,.08235294117647059,1]),z={beaufort_ft:v,beaufort_m:v,beaufort_km:v,beaufort_mi:v,beaufort_kn:new Float32Array([.1568627450980392,.5725490196078431,
.7803921568627451,1,.34901960784313724,.6352941176470588,.7294117647058823,1,.5058823529411764,.7019607843137254,.6705882352941176,1,.6274509803921569,.7607843137254902,.6078431372549019,1,.7490196078431373,.8313725490196079,.5411764705882353,1,.8549019607843137,.9019607843137255,.4666666666666667,1,.9803921568627451,.9803921568627451,.39215686274509803,1,.9882352941176471,.8352941176470589,.3254901960784314,1,.9882352941176471,.7019607843137254,.4,1,.9803921568627451,.5529411764705883,.20392156862745098,
1,.9686274509803922,.43137254901960786,.16470588235294117,1,.9411764705882353,.2784313725490196,.11372549019607843,1]),classified_arrow:new Float32Array([.2196078431372549,.6588235294117647,0,1,.5450980392156862,1.2117647058823529,0,1,1,1,0,1,1,.5019607843137255,0,1,1,0,0,1]),ocean_current_m:new Float32Array([.3058823529411765,.10196078431372549,.6,1,.7019607843137254,.10588235294117647,.10196078431372549,1,.792156862745098,.5019607843137255,.10196078431372549,1,.6941176470588235,.6941176470588235,
.6941176470588235,1]),ocean_current_kn:new Float32Array([0,0,0,1,0,.1450980392156863,.39215686274509803,1,.3058823529411765,.10196078431372549,.6,1,.592156862745098,0,.39215686274509803,1,.7019607843137254,.10588235294117647,.10196078431372549,1,.6941176470588235,.3058823529411765,.10196078431372549,1,.792156862745098,.5019607843137255,.10196078431372549,1,.6941176470588235,.7019607843137254,.20392156862745098,1,.6941176470588235,.6941176470588235,.6941176470588235,1]),single_arrow:new Float32Array([0,
92/255,230/255,1]),wind_speed:new Float32Array([0,0,0,1])};return function(p){function g(){var b=p.apply(this,arguments)||this;b._desc={magdir:{vsPath:"raster/magdir",fsPath:"raster/magdir",attributes:new Map([["a_pos",0],["a_offset",1],["a_vv",2]])},scalar:{vsPath:"raster/scalar",fsPath:"raster/scalar",attributes:new Map([["a_pos",0],["a_offset",1],["a_vv",2]])}};return b}u._inheritsLoose(g,p);var e=g.prototype;e.dispose=function(){};e.prepareState=function({context:b},a){b.setBlendingEnabled(!0);
b.setBlendFunctionSeparate(r.BlendFactor.ONE,r.BlendFactor.ONE_MINUS_SRC_ALPHA,r.BlendFactor.ONE,r.BlendFactor.ONE_MINUS_SRC_ALPHA);b.setColorMask(!0,!0,!0,!0);b.setStencilWriteMask(0);b.setStencilTestEnabled(!0);b.setStencilOp(r.StencilOperation.KEEP,r.StencilOperation.KEEP,r.StencilOperation.REPLACE);b.setStencilFunction(r.CompareFunction.EQUAL,a.stencilRef,255)};e.draw=function(b,a){if(!n.isNone(a.source)&&0!==a.source.validPixelCount){var {timeline:c}=b;c.begin(this.name);a.updateVectorFieldVAO(b);
if("scalar"===b.renderPass){var d=a.vaoData.scalar;d&&this._drawScalars(b,a,d.vao,d.elementCount)}else(d=a.vaoData.magdir)&&this._drawTriangles(b,a,d.vao,d.elementCount);c.end(this.name)}};e._drawTriangles=function(b,a,c,d){const {context:f,painter:l,requestRender:m}=b,{symbolizerParameters:k}=a;var q=k.dataRange?["dataRange"]:[];"geographic"===k.rotationType&&q.push("rotationGeographic");q=l.materialManager.getProgram(this._desc.magdir,q);if(n.isSome(m)&&!q.isCompiled)m();else{f.useProgram(q);var {coordScale:t,
opacity:w,transforms:A}=a;q.setUniform2fv("u_coordScale",t);q.setUniform1f("u_opacity",w);q.setUniformMatrix3fv("u_dvsMat3",A.dvs);var {style:x,dataRange:y,rotation:B,symbolPercentRange:C}=k;q.setUniform4fv("u_colors",z[x]||z.single_arrow);q.setUniform2fv("u_dataRange",y);q.setUniform1f("u_rotation",B);q.setUniform2fv("u_symbolPercentRange",C);b=this._getSymbolSize(b,a);q.setUniform2fv("u_symbolSize",b);f.bindVAO(c);f.drawElements(r.PrimitiveType.TRIANGLES,d,r.DataType.UNSIGNED_INT,0)}};e._drawScalars=
function(b,a,c,d){const {context:f,painter:l,requestRender:m}=b,{symbolizerParameters:k}=a;var q=[];"wind_speed"===k.style?q.push("innerCircle"):k.dataRange&&q.push("dataRange");"geographic"===k.rotationType&&q.push("rotationGeographic");q=l.materialManager.getProgram(this._desc.scalar,q);if(n.isSome(m)&&!q.isCompiled)m();else{f.useProgram(q);var {coordScale:t,opacity:w,transforms:A}=a;q.setUniform2fv("u_coordScale",t);q.setUniform1f("u_opacity",w);q.setUniformMatrix3fv("u_dvsMat3",A.dvs);var {dataRange:x,
symbolPercentRange:y}=k;q.setUniform2fv("u_dataRange",x);q.setUniform2fv("u_symbolPercentRange",y);b=this._getSymbolSize(b,a);q.setUniform2fv("u_symbolSize",b);f.bindVAO(c);f.drawElements(r.PrimitiveType.TRIANGLES,d,r.DataType.UNSIGNED_INT,0)}};e._getSymbolSize=function(b,a){b=a.key?2**(b.displayLevel-a.key.level):a.resolution/b.state.resolution;const {symbolTileSize:c}=a.symbolizerParameters;return[c/(Math.round((a.width-a.offset[0])/c)*c)/b,c/(Math.round((a.height-a.offset[1])/c)*c)/b]};return g}(h)})},
"esri/views/2d/engine/webgl/brushes/BrushBitmap":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../definitions ../VertexStream ./WGLBrush ../../../../webgl/enums".split(" "),function(u,n,h,r,v,z){const p={nearest:{defines:[],samplingMode:z.TextureSamplingMode.NEAREST,mips:!1},bilinear:{defines:[],samplingMode:z.TextureSamplingMode.LINEAR,mips:!1},bicubic:{defines:["bicubic"],samplingMode:z.TextureSamplingMode.LINEAR,mips:!1},trilinear:{defines:[],samplingMode:z.TextureSamplingMode.LINEAR_MIPMAP_LINEAR,
mips:!0}};return function(g){function e(){var a=g.apply(this,arguments)||this;a._desc={vsPath:"raster/bitmap",fsPath:"raster/bitmap",attributes:new Map([["a_pos",0]])};return a}u._inheritsLoose(e,g);var b=e.prototype;b.dispose=function(){this._quad&&this._quad.dispose()};b.prepareState=function({context:a},c){a.setBlendingEnabled(!0);"additive"===c.blendFunction?a.setBlendFunctionSeparate(z.BlendFactor.ONE,z.BlendFactor.ONE,z.BlendFactor.ONE,z.BlendFactor.ONE):a.setBlendFunctionSeparate(z.BlendFactor.ONE,
z.BlendFactor.ONE_MINUS_SRC_ALPHA,z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA);a.setColorMask(!0,!0,!0,!0);a.setStencilWriteMask(0);a.setStencilTestEnabled(!0);a.setStencilFunction(z.CompareFunction.EQUAL,c.stencilRef,255)};b.draw=function(a,c){const {context:d,renderingOptions:f,painter:l,requestRender:m}=a;if(c.source){if("dynamic"===f.samplingMode){({state:t}=a);var k=c.resolution/c.pixelRatio/t.resolution,q=Math.round(a.pixelRatio)!==a.pixelRatio;k=1.05<k||.95>k;var t=t.rotation||k||q||
c.isSourceScaled||c.rotation?p.bilinear:p.nearest}else t=p[f.samplingMode];q=l.materialManager.getProgram(this._desc,t.defines);if(n.isSome(m)&&!q.isCompiled)m();else{a.timeline.begin(this.name);this._quad||(this._quad=new r(d,[0,0,1,0,0,1,1,1]));var {coordScale:w,computedOpacity:A,transforms:x}=c;c.setSamplingProfile(t);c.bind(a.context,h.TEXTURE_BINDING_BITMAP);d.useProgram(q);q.setUniformMatrix3fv("u_dvsMat3",x.dvs);q.setUniform1i("u_texture",h.TEXTURE_BINDING_BITMAP);q.setUniform2fv("u_coordScale",
w);q.setUniform1f("u_opacity",A);this._quad.draw();a.timeline.end(this.name)}}};return e}(v)})},"esri/views/2d/engine/webgl/brushes/BrushClip":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec4f32 ../Utils ./WGLBrush ../shaders/BackgroundPrograms ../../../../webgl/enums ../../../../webgl/ProgramTemplate".split(" "),function(u,n,h,r,v,z,p,g){return function(e){function b(){var c=e.apply(this,arguments)||this;c._color=h.fromValues(0,
1,0,1);return c}u._inheritsLoose(b,e);var a=b.prototype;a.dispose=function(){this._program&&this._program.dispose()};a.prepareState=function({context:c}){c.setStencilTestEnabled(!0);c.setBlendingEnabled(!1);c.setFaceCullingEnabled(!1);c.setColorMask(!1,!1,!1,!1);c.setStencilOp(p.StencilOperation.KEEP,p.StencilOperation.KEEP,p.StencilOperation.REPLACE);c.setStencilWriteMask(255);c.setStencilFunction(p.CompareFunction.ALWAYS,0,255)};a.draw=function(c,d){const {context:f,state:l,requestRender:m}=c;c=
r.createProgramDescriptor("clip",{geometry:[{location:0,name:"a_pos",count:2,type:p.DataType.SHORT}]});d=d.getVAO(f,l,c.attributes,c.bufferLayouts);n.isNone(d.indexBuffer)||(this._program||(this._program=g.createProgram(f,z.background)),n.isSome(m)&&!this._program.isCompiled?m():(f.useProgram(this._program),this._program.setUniform2fv("u_coord_range",[1,1]),this._program.setUniform4fv("u_color",this._color),this._program.setUniformMatrix3fv("u_dvsMat3",l.displayMat3),f.bindVAO(d),f.drawElements(p.PrimitiveType.TRIANGLES,
d.indexBuffer.size,p.DataType.UNSIGNED_INT,0),f.bindVAO()))};return b}(v)})},"esri/chunks/vec4f32":function(){define(["exports"],function(u){function n(){return new Float32Array(4)}function h(t){const w=new Float32Array(4);w[0]=t[0];w[1]=t[1];w[2]=t[2];w[3]=t[3];return w}function r(t,w,A,x){const y=new Float32Array(4);y[0]=t;y[1]=w;y[2]=A;y[3]=x;return y}function v(t,w){return new Float32Array(t,w,4)}function z(){return n()}function p(){return r(1,1,1,1)}function g(){return r(1,0,0,0)}function e(){return r(0,
1,0,0)}function b(){return r(0,0,1,0)}function a(){return r(0,0,0,1)}const c=n(),d=p(),f=g(),l=e(),m=b(),k=a(),q=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:h,fromValues:r,createView:v,zeros:z,ones:p,unitX:g,unitY:e,unitZ:b,unitW:a,ZEROS:c,ONES:d,UNIT_X:f,UNIT_Y:l,UNIT_Z:m,UNIT_W:k},Symbol.toStringTag,{value:"Module"}));u.ONES=d;u.UNIT_W=k;u.UNIT_X=f;u.UNIT_Y=l;u.UNIT_Z=m;u.ZEROS=c;u.clone=h;u.create=n;u.createView=v;u.fromValues=r;u.ones=p;u.unitW=a;u.unitX=g;u.unitY=e;u.unitZ=
b;u.vec4f32=q;u.zeros=z})},"esri/views/2d/engine/webgl/Utils":function(){define("exports ../../../../core/Error ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ../../../../symbols/cim/enums ./color ./enums ./SymbolProperties ../../../webgl/enums ../../../webgl/Texture ../../../webgl/VertexElementDescriptor".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c){function d(ca){const la={};for(const ha of ca)la[ha.name]=ha.strideInBytes;return la}function f(ca){switch(ca){case g.WGLGeometryType.MARKER:return L;
case g.WGLGeometryType.FILL:return M;case g.WGLGeometryType.LINE:return J;case g.WGLGeometryType.TEXT:return R;case g.WGLGeometryType.LABEL:return X}}function l(ca){switch(ca%4){case 0:case 2:return 4;case 1:case 3:return 1}}function m(ca){switch(ca){case b.DataType.BYTE:case b.DataType.UNSIGNED_BYTE:return 1;case b.DataType.SHORT:case b.DataType.UNSIGNED_SHORT:return 2;case b.DataType.FLOAT:case b.DataType.INT:case b.DataType.UNSIGNED_INT:return 4}}function k(ca){const la={};for(const ha in ca){let S=
0;la[ha]=ca[ha].map(ea=>{const ma=new c.VertexElementDescriptor(ea.name,ea.count,ea.type,S,0,ea.normalized||!1);S+=ea.count*m(ea.type);return ma});la[ha].forEach(ea=>ea.stride=S)}return la}const q=h.getLogger("esri.views.2d.engine.webgl.Utils");h=[{name:"geometry",strideInBytes:36}];const t=[{name:"geometry",strideInBytes:12}],w=[{name:"geometry",strideInBytes:36}],A=[{name:"geometry",strideInBytes:24}],x=[{name:"geometry",strideInBytes:12}],y=[{name:"geometry",strideInBytes:40}],B=[{name:"geometry",
strideInBytes:36}],C=[{name:"geometry",strideInBytes:36}],D=d(h),F=d(t),E=d(w),G=d(A),O=d(x),H=d(y),K=d(B),P=d(C),L=["geometry"],M=["geometry"],J=["geometry"],R=["geometry"],X=["geometry"],U={["geometry"]:b.Usage.STATIC_DRAW},V=new Map,Q=ca=>ca.startsWith("data:image/gif"),Y=ca=>ca.startsWith("data:image/png"),fa=ca=>{if(!ca)return!1;ca=ca.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(ca)&&/[\dz]$/i.test(ca)&&4<ca.length?!0:!1},da=ca=>{var la,ha;return"fill"===ca.type&&"CIMMarkerPlacementInsidePolygon"===
(null==ca?void 0:null==(la=ca.cim)?void 0:null==(ha=la.markerPlacement)?void 0:ha.type)};u.C_FILL_STRIDE_SPEC=E;u.C_FILL_STRIDE_SPEC_DD=O;u.C_FILL_STRIDE_SPEC_SIMPLE=G;u.C_FILL_VERTEX_DEF=w;u.C_FILL_VERTEX_DEF_DD=x;u.C_FILL_VERTEX_DEF_SIMPLE=A;u.C_HEATMAP_STRIDE_SPEC=F;u.C_HEATMAP_VERTEX_DEF=t;u.C_ICON_STRIDE_SPEC=D;u.C_ICON_VERTEX_DEF=h;u.C_LABEL_STRIDE_SPEC=P;u.C_LABEL_VERTEX_DEF=C;u.C_LINE_STRIDE_SPEC=H;u.C_LINE_VERTEX_DEF=y;u.C_TEXT_STRIDE_SPEC=K;u.C_TEXT_VERTEX_DEF=B;u.C_VBO_GEOMETRY="geometry";
u.C_VBO_INFO=U;u.C_VBO_PERINSTANCE="per_instance";u.C_VBO_PERINSTANCE_VV="per_instance_vv";u.allocateTypedArrayBuffer=function(ca,la){switch(la%4){case 0:case 2:return new Uint32Array(Math.floor(ca*la/4));case 1:case 3:return new Uint8Array(ca*la)}};u.allocateTypedArrayBufferwithData=function(ca,la){switch(la%4){case 0:case 2:return new Uint32Array(ca);case 1:case 3:return new Uint8Array(ca)}};u.charCodes=function(ca){const la=[];for(let ha=0;ha<ca.length;ha++)la.push(ca.charCodeAt(ha));return la};
u.copyMeshData=function(ca,la,ha,S,ea,ma,sa){for(const Ja in ma){var ja=ma[Ja].stride,wa=l(ja);const va=ma[Ja].data,ra=ha[Ja].data,Ba=ja*ea.vertexCount/wa,Ha=ja*ca/wa;ja=ja*ea.vertexFrom/wa;for(wa=0;wa<Ba;++wa)ra[wa+Ha]=va[wa+ja]}ha=ea.indexCount;for(ma=0;ma<ha;++ma)S[ma+la]=sa[ma+ea.indexFrom]-ea.vertexFrom+ca};u.createGeometryData=function(ca,la){const ha=[];for(let S=0;5>S;++S){const ea=f(S),ma={};for(const sa of ea)ma[sa]={data:la(S,sa)};ha.push({data:ca(S),buffers:ma})}return ha};u.createProgramDescriptor=
(ca,la)=>{if(!V.has(ca)){const ea=k(la);var ha=ea;var S={};for(const ma in ha){const sa=ha[ma];S[ma]=sa.length?sa[0].stride:0}ha=S;S=new Map;for(const ma in la)for(const sa of la[ma])S.set(sa.name,sa.location);la=S;V.set(ca,{strides:ha,bufferLayouts:ea,attributes:la})}return V.get(ca)};u.createTextureFromTexelData=function(ca,la){let ha,S;r.isPowerOfTwo(la.width)&&r.isPowerOfTwo(la.height)?(ha=!0,S=b.TextureSamplingMode.LINEAR_MIPMAP_LINEAR):(ha=!1,S=b.TextureSamplingMode.LINEAR);return new a.Texture(ca,
{target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,internalFormat:b.PixelFormat.RGBA,dataType:b.PixelType.UNSIGNED_BYTE,hasMipmap:ha,samplingMode:S,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,flipped:!0},la)};u.forEachGeometryType=function(ca){ca(g.WGLGeometryType.FILL);ca(g.WGLGeometryType.LINE);ca(g.WGLGeometryType.MARKER);ca(g.WGLGeometryType.TEXT);ca(g.WGLGeometryType.LABEL)};u.geometryToMappedGeometry=function(ca){return{vertexFrom:void 0,vertexTo:void 0,geometry:ca}};u.getBytes=m;
u.getCapType=function(ca){switch(ca){case "butt":return z.CapType.BUTT;case "round":return z.CapType.ROUND;case "square":return z.CapType.SQUARE;default:return q.error(new n("mapview-invalid-type",`Cap type ${ca} is not a valid option. Defaulting to round`)),z.CapType.ROUND}};u.getJoinType=function(ca){switch(ca){case "miter":return z.JoinType.MITER;case "bevel":return z.JoinType.BEVEL;case "round":return z.JoinType.ROUND;default:return q.error(new n("mapview-invalid-type",`Join type ${ca} is not a valid option. Defaulting to round`)),
z.JoinType.ROUND}};u.getNamedBuffers=f;u.getPMSResourceSize=function(ca){const la="maxVVSize"in ca&&ca.maxVVSize;ca="width"in ca&&ca.width||"size"in ca&&ca.size||0;return la?la:ca};u.getPixelArrayCtor=function(ca){switch(ca){case b.PixelType.UNSIGNED_BYTE:return Uint8Array;case b.PixelType.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case b.PixelType.FLOAT:return Float32Array;default:q.error(new n("webgl-utils",`Unable to handle type ${ca}`))}};u.getPixelBytes=function(ca){switch(ca){case b.PixelType.UNSIGNED_BYTE:return 1;
case b.PixelType.UNSIGNED_SHORT_4_4_4_4:return 2;case b.PixelType.FLOAT:return 4;default:q.error(new n("webgl-utils",`Unable to handle type ${ca}`))}};u.getStrides=function(ca,la){switch(ca){case g.WGLGeometryType.MARKER:switch(la){case g.WGLSymbologyType.HEATMAP:return F;default:return D}case g.WGLGeometryType.FILL:switch(la){case g.WGLSymbologyType.DOT_DENSITY:return O;case g.WGLSymbologyType.SIMPLE:case g.WGLSymbologyType.OUTLINE_FILL_SIMPLE:return G;default:return E}case g.WGLGeometryType.LINE:return H;
case g.WGLGeometryType.TEXT:return K;case g.WGLGeometryType.LABEL:return P}};u.getTextProperties=function(ca){return e.TextProperties.pool.acquire(ca.color?p.copyAndPremultiply(ca.color):[255,255,255,255],ca.haloColor?p.copyAndPremultiply(ca.haloColor):[255,255,255,255],v.pt2px(ca.haloSize),v.pt2px(ca.font.size),ca.angle*Math.PI/180,ca.xoffset/ca.font.size,ca.yoffset/ca.font.size,"left"===ca.horizontalAlignment?0:"right"===ca.horizontalAlignment?1:.5,"top"===ca.verticalAlignment?0:"bottom"===ca.verticalAlignment?
1:.5)};u.getTransformParams=function(ca){const {transform:la,hasZ:ha,hasM:S}=ca;return{transform:la,hasZ:ha,hasM:S}};u.getUrl=ca=>"imageData"in ca&&ca.imageData&&"contentType"in ca&&ca.contentType?`data:${ca.contentType};base64,${ca.imageData}`:"url"in ca?ca.url:null;u.getVVType=function(ca){switch(ca){case "opacity":return g.VVType.OPACITY;case "color":return g.VVType.COLOR;case "rotation":return g.VVType.ROTATION;case "size":return g.VVType.SIZE;default:return q.error(`Cannot interpret unknown vv: ${ca}`),
null}};u.is3D=ca=>ca.type&&ca.type.toLowerCase().includes("3d");u.isDefined=function(ca){return null!=ca};u.isGIF=ca=>"url"in ca&&ca.url&&(ca.url.includes(".gif")||Q(ca.url))||"contentType"in ca&&"image/gif"===ca.contentType||"imageData"in ca&&Q(ca.imageData);u.isGIFDataUri=Q;u.isImageResource=ca=>"url"in ca&&ca.url||"imageData"in ca&&ca.imageData;u.isMarkerPlacementInsidePolygon=da;u.isNumber=function(ca){return"number"===typeof ca};u.isPNG=ca=>"url"in ca&&ca.url&&(ca.url.includes(".png")||Y(ca.url))||
"contentType"in ca&&"image/png"===ca.contentType||"imageData"in ca&&Y(ca.imageData);u.isPNGDataUri=Y;u.isSVGImage=ca=>ca.includes("data:image/svg+xml");u.isSVGResource=ca=>"path"in ca&&fa(ca.path);u.isSimple=function(ca){switch(ca.type){case "line":return"CIMSolidStroke"===ca.cim.type&&!ca.dashTemplate;case "fill":return"CIMSolidFill"===ca.cim.type;case "esriSFS":return"esriSFSSolid"===ca.style||"esriSFSNull"===ca.style;case "esriSLS":return"esriSLSSolid"===ca.style||"esriSLSNull"===ca.style;default:return!1}};
u.isValidSVG=fa;u.shouldRepeat=function(ca){switch("cim"in ca?ca.cim.type:ca.type){case "esriSMS":case "esriPMS":case "CIMPointSymbol":return!1;case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":return da(ca);default:return!0}};u.strideToPackingFactor=l;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/color":function(){define(["exports","../../../../core/maybe","./number"],function(u,n,h){function r(p,g){Array.isArray(g)?
(p[0]=g[0],p[1]=g[1],p[2]=g[2],p[3]=g[3]):(p[0]=g.r,p[1]=g.g,p[2]=g.b,p[3]=g.a);return p}function v(p,g=0,e=!1){const b=p[g+3];p[g+0]*=b;p[g+1]*=b;p[g+2]*=b;e||(p[g+3]*=255);return p}const z=[0,0,0,0];u.copyAndPremultiply=function(p){return v(r([],p))};u.premultiplyAlpha=v;u.premultiplyAlphaRGBA=function(p){if(!p)return 0;const {r:g,g:e,b,a}=p;return h.i8888to32(g*a,e*a,b*a,255*a)};u.premultiplyAlphaRGBAArray=function(p){if(!p)return 0;const [g,e,b,a]=p;return h.i8888to32(a/255*g,a/255*e,a/255*b,
a)};u.premultiplyAlphaUint32=function(p){v(r(z,p));return h.i8888to32(z[0],z[1],z[2],z[3])};u.white=[255,255,255,1];u.writeColor=function(p,g,e=0){if(n.isNone(g))p[e+0]=0,p[e+1]=0,p[e+2]=0,p[e+3]=0;else{var {r:b,g:a,b:c,a:d}=g;p[e+0]=b*d/255;p[e+1]=a*d/255;p[e+2]=c*d/255;p[e+3]=d}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(u){function n(v,z,p){return Math.round(Math.max(Math.min(v,
p),z))}const h=new Float32Array(1),r=new Uint32Array(h.buffer);u.i16=function(v){return n(v,-32768,32767)};u.i1616to32=function(v,z){return 65535&v|z<<16};u.i32=function(v){return n(v,-2147483648,2147483647)};u.i8=function(v){return n(v,-128,127)};u.i8816to32=function(v,z,p){return v&255|(z&255)<<8|p<<16};u.i8888to32=function(v,z,p,g){return v&255|(z&255)<<8|(p&255)<<16|g<<24};u.numTo32=function(v){return v|0};u.toFloat32=function(v){r[0]=v;return h[0]};u.toUint32=function(v){h[0]=v;return r[0]};
u.u16=function(v){return n(v,0,65535)};u.u32=function(v){return n(v,0,4294967295)};u.u32to4Xu8=function(v){return[v&255,(v&65280)>>>8,(v&16711680)>>>16,(v&4278190080)>>>24]};u.u4u4to8=function(v,z){return 15&v|(15&z)<<4};u.u8=function(v){return n(v,0,255)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["exports","../../../../core/ObjectPool"],function(u,n){let h=function(){function r(){this.color=
[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}var v=r.prototype;v.acquire=function(z,p,g,e,b,a,c,d,f){this.color=z;this.haloColor=p;this.haloSize=g;this.size=e;this.angle=b;this.offsetX=a;this.offsetY=c;this.hAnchor=d;this.vAnchor=f};v.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=
this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};return r}();h.pool=new n(h);u.TextProperties=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/shaders/BackgroundPrograms":function(){define(["exports","./sources/resolver"],function(u,n){n={shaders:{vertexShader:n.resolveIncludes("background/background.vert"),fragmentShader:n.resolveIncludes("background/background.frag")},attributes:new Map([["a_pos",0]])};u.background=
n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/shaders/sources/resolver":function(){define(["exports","./shaderRepository","../../../../../webgl/ShaderCompiler"],function(u,n,h){const r=new h.ShaderCompiler(function(v){let z=n;v.split("/").forEach(p=>{z&&(z=z[p])});return z});u.resolveIncludes=function(v){return r.resolveIncludes(v)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/webgl/shaders/sources/shaderRepository":function(){define(function(){return{background:{"background.frag":"uniform lowp vec4 u_color;\nvoid main() {\ngl_FragColor \x3d u_color;\n}","background.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump vec2 u_coord_range;\nuniform mediump float u_depth;\nvoid main() {\nvec3 v_pos \x3d u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0);\ngl_Position \x3d vec4(v_pos.xy, 0.0, 1.0);\n}"},bitBlit:{"bitBlit.frag":"uniform lowp sampler2D u_tex;\nuniform lowp float u_opacity;\nvarying mediump vec2 v_uv;\nvoid main() {\nlowp vec4 color \x3d texture2D(u_tex, v_uv);\ngl_FragColor \x3d color *  u_opacity;\n}",
"bitBlit.vert":"attribute vec2 a_pos;\nattribute vec2 a_tex;\nvarying mediump vec2 v_uv;\nvoid main(void) {\ngl_Position \x3d vec4(a_pos, 0.0, 1.0);\nv_uv \x3d a_tex;\n}"},blend:{"blend.frag":"precision mediump float;\nuniform sampler2D u_layerTexture;\nuniform lowp float u_opacity;\nuniform lowp float u_inFadeOpacity;\n#ifndef NORMAL\nuniform sampler2D u_backbufferTexture;\n#endif\nvarying mediump vec2 v_uv;\nfloat rgb2v(in vec3 c) {\nreturn max(c.x, max(c.y, c.z));\n}\nvec3 rgb2hsv(in vec3 c) {\nvec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p \x3d c.g \x3c c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q \x3d c.r \x3c p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d \x3d q.x - min(q.w, q.y);\nfloat e \x3d 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(in vec3 c) {\nvec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec3 tint(in vec3 Cb, in vec3 Cs) {\nfloat vIn \x3d rgb2v(Cb);\nvec3 hsvTint \x3d rgb2hsv(Cs);\nvec3 hsvOut \x3d vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\nreturn hsv2rgb(hsvOut);\n}\nfloat overlay(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * (1.0 - 2.0 * (1.0 - Cs ) * (1.0 - Cb)) + step(0.5, Cs) * (2.0 * Cs * Cb);\n}\nfloat colorDodge(in float Cb, in float Cs) {\nreturn (Cb \x3d\x3d 0.0) ? 0.0 : (Cs \x3d\x3d 1.0) ? 1.0 : min(1.0, Cb / (1.0 - Cs));\n}\nfloat colorBurn(in float Cb, in float Cs) {\nreturn (Cb \x3d\x3d 1.0) ? 1.0 : (Cs \x3d\x3d 0.0) ? 0.0 : 1.0 - min(1.0, (1.0 - Cb) / Cs);\n}\nfloat hardLight(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * (2.0 * Cs * Cb) + step(0.5, Cs) * (1.0 - 2.0 * (1.0 - Cs) * (1.0 - Cb));\n}\nfloat reflectBlend(in float Cb, in float Cs) {\nreturn (Cs \x3d\x3d 1.0) ? Cs : min(Cb * Cb / (1.0 - Cs), 1.0);\n}\nfloat softLight(in float Cb, in float Cs) {\nif (Cs \x3c\x3d 0.5) {\nreturn Cb - (1.0 - 2.0 * Cs) * Cb * (1.0 - Cb);\n}\nif (Cb \x3c\x3d 0.25) {\nreturn Cb + (2.0 * Cs - 1.0) * Cb * ((16.0 * Cb - 12.0) * Cb + 3.0);\n}\nreturn Cb + (2.0 * Cs - 1.0) * (sqrt(Cb) - Cb);\n}\nfloat vividLight(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * colorBurn(Cb, 2.0 * Cs) + step(0.5, Cs) * colorDodge(Cb, (2.0 * (Cs - 0.5)));\n}\nfloat minv3(in vec3 c) {\nreturn min(min(c.r, c.g), c.b);\n}\nfloat maxv3(in vec3 c) {\nreturn max(max(c.r, c.g), c.b);\n}\nfloat lumv3(in vec3 c) {\nreturn dot(c, vec3(0.3, 0.59, 0.11));\n}\nfloat satv3(vec3 c) {\nreturn maxv3(c) - minv3(c);\n}\nvec3 clipColor(vec3 color) {\nfloat lum \x3d lumv3(color);\nfloat mincol \x3d minv3(color);\nfloat maxcol \x3d maxv3(color);\nif (mincol \x3c 0.0) {\ncolor \x3d lum + ((color - lum) * lum) / (lum - mincol);\n}\nif (maxcol \x3e 1.0) {\ncolor \x3d lum + ((color - lum) * (1.0 - lum)) / (maxcol - lum);\n}\nreturn color;\n}\nvec3 setLum(vec3 cbase, vec3 clum) {\nfloat lbase \x3d lumv3(cbase);\nfloat llum \x3d lumv3(clum);\nfloat ldiff \x3d llum - lbase;\nvec3 color \x3d cbase + vec3(ldiff);\nreturn clipColor(color);\n}\nvec3 setLumSat(vec3 cbase, vec3 csat, vec3 clum)\n{\nfloat minbase \x3d minv3(cbase);\nfloat sbase \x3d satv3(cbase);\nfloat ssat \x3d satv3(csat);\nvec3 color;\nif (sbase \x3e 0.0) {\ncolor \x3d (cbase - minbase) * ssat / sbase;\n} else {\ncolor \x3d vec3(0.0);\n}\nreturn setLum(color, clum);\n}\nvoid main() {\nvec4 src \x3d texture2D(u_layerTexture, v_uv);\n#ifdef NORMAL\ngl_FragColor \x3d src *  u_opacity;\n#else\nvec4 dst \x3d texture2D(u_backbufferTexture, v_uv);\nvec3 Cs \x3d src.a \x3d\x3d 0.0 ? src.rgb : vec3(src.rgb / src.a);\nvec3 Cb \x3d dst.a \x3d\x3d 0.0 ? dst.rgb : vec3(dst.rgb / dst.a);\nfloat as \x3d u_opacity * src.a;\nfloat ab \x3d dst.a;\n#ifdef DESTINATION_OVER\ngl_FragColor \x3d vec4(as * Cs * (1.0 - ab) + ab * Cb, as + ab - as * ab);\n#endif\n#ifdef SOURCE_IN\nvec4 color \x3d vec4(as * Cs * ab, as * ab);\nvec4 fadeColor \x3d (1.0 - u_opacity) * u_inFadeOpacity * vec4(ab * Cb, ab);\ngl_FragColor \x3d color + fadeColor;\n#endif\n#ifdef DESTINATION_IN\nvec4 color \x3d vec4(ab * Cb * as, ab * as);\nvec4 fadeColor \x3d (1.0 - u_opacity) * u_inFadeOpacity * vec4(ab * Cb, ab);\ngl_FragColor \x3d color + fadeColor;\n#endif\n#ifdef SOURCE_OUT\ngl_FragColor \x3d vec4(as * Cs * (1.0 - ab), as * (1.0 - ab));\n#endif\n#ifdef DESTINATION_OUT\ngl_FragColor \x3d vec4(ab * Cb * (1.0 - as), ab * (1.0 - as));\n#endif\n#ifdef SOURCE_ATOP\ngl_FragColor \x3d vec4(as * Cs * ab + ab * Cb * (1.0 - as), ab);\n#endif\n#ifdef DESTINATION_ATOP\ngl_FragColor \x3d vec4(as * Cs * (1.0 - ab) + ab * Cb * as, as);\n#endif\n#ifdef XOR\ngl_FragColor \x3d vec4(as * Cs * (1.0 - ab) + ab * Cb * (1.0 - as),\nas * (1.0 - ab) + ab * (1.0 - as));\n#endif\n#ifdef MULTIPLY\ngl_FragColor \x3d vec4(as * Cs * ab * Cb + (1.0 - ab) * as * Cs + (1.0 - as) * ab * Cb,\nas + ab * (1.0 - as));\n#endif\n#ifdef SCREEN\ngl_FragColor \x3d vec4((Cs + Cb - Cs * Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef OVERLAY\nvec3 f \x3d vec3(overlay(Cb.r, Cs.r), overlay(Cb.g, Cs.g), overlay(Cb.b, Cs.b));\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef DARKEN\ngl_FragColor \x3d vec4(min(Cs, Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef LIGHTER\ngl_FragColor \x3d vec4(as * Cs + ab * Cb, as + ab);\n#endif\n#ifdef LIGHTEN\ngl_FragColor \x3d vec4(max(Cs, Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR_DODGE\nvec3 f \x3d vec3(colorDodge(Cb.r, Cs.r), colorDodge(Cb.g, Cs.g), colorDodge(Cb.b, Cs.b));\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR_BURN\nvec3 f \x3d vec3(colorBurn(Cb.r, Cs.r), colorBurn(Cb.g, Cs.g), colorBurn(Cb.b, Cs.b));\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef HARD_LIGHT\nvec3 f \x3d vec3(hardLight(Cb.r, Cs.r), hardLight(Cb.g, Cs.g), hardLight(Cb.b, Cs.b));\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef SOFT_LIGHT\nvec3 f \x3d vec3(softLight(Cb.r, Cs.r), softLight(Cb.g, Cs.g), softLight(Cb.b, Cs.b));\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef DIFFERENCE\ngl_FragColor \x3d vec4(abs(Cb - Cs) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef EXCLUSION\nvec3 f \x3d Cs + Cb - 2.0 * Cs * Cb;\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef INVERT\ngl_FragColor \x3d vec4((1.0 - Cb) * as * ab + Cb * ab * (1.0 - as), ab);\n#endif\n#ifdef VIVID_LIGHT\nvec3 f \x3d vec3(vividLight(Cb.r, Cs.r),\nvividLight(Cb.g, Cs.g),\nvividLight(Cb.b, Cs.b));\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef HUE\nvec3 f \x3d setLumSat(Cs,Cb,Cb);\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef SATURATION\nvec3 f \x3d setLumSat(Cb,Cs,Cb);\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR\nvec3 f \x3d setLum(Cs,Cb);\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef LUMINOSITY\nvec3 f \x3d setLum(Cb,Cs);\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef PLUS\ngl_FragColor \x3d clamp(vec4(src.r + Cb.r, src.g + Cb.g, src.b + Cb.b, as + ab), 0.0, 1.0);\n#endif\n#ifdef MINUS\ngl_FragColor \x3d vec4(clamp(vec3(Cb.r - src.r, Cb.g - src.g, Cb.b - src.b), 0.0, 1.0), ab * as);\n#endif\n#ifdef AVERAGE\nvec3 f \x3d (Cb + Cs) / 2.0;\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef REFLECT\nvec3 f \x3d vec3(reflectBlend(Cb.r, Cs.r),\nreflectBlend(Cb.g, Cs.g),\nreflectBlend(Cb.b, Cs.b));\ngl_FragColor \x3d vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#endif\n}",
"blend.vert":"attribute vec2 a_position;\nvarying mediump vec2 v_uv;\nvoid main(void) {\ngl_Position \x3d vec4(a_position , 0.0, 1.0);\nv_uv \x3d (a_position + 1.0) / 2.0;\n}"},dot:{dot:{"dot.frag":"precision mediump float;\nvarying vec4 v_color;\nvarying float v_dotRatio;\nvarying float v_invEdgeRatio;\nuniform highp float u_tileZoomFactor;\nvoid main()\n{\nfloat dist \x3d length(gl_PointCoord - vec2(.5, .5)) * 2.;\nfloat alpha \x3d smoothstep(0., 1., v_invEdgeRatio * (dist - v_dotRatio) + 1.);\ngl_FragColor \x3d v_color * alpha;\n}",
"dot.vert":"precision highp float;\nattribute vec2 a_pos;\nuniform sampler2D u_texture;\nuniform highp mat3 u_dvsMat3;\nuniform highp float u_tileZoomFactor;\nuniform highp float u_dotSize;\nuniform highp float u_pixelRatio;\nvarying vec2 v_pos;\nvarying vec4 v_color;\nvarying float v_dotRatio;\nvarying float v_invEdgeRatio;\nconst float EPSILON \x3d 0.000001;\nvoid main()\n{\nmat3 tileToTileTexture \x3d mat3(  1., 0., 0.,\n0., -1., 0.,\n0., 1., 1.  );\nvec3 texCoords \x3d tileToTileTexture * vec3(a_pos.xy / 512., 1.);\nv_color \x3d texture2D(u_texture, texCoords.xy);\nfloat smoothEdgeWidth \x3d max(u_dotSize / 2., 1.) ;\nfloat z \x3d 0.;\nz +\x3d 2.0 * step(v_color.a, EPSILON);\ngl_PointSize \x3d (smoothEdgeWidth + u_dotSize);\ngl_Position \x3d vec4((u_dvsMat3 * vec3(a_pos + .5, 1.)).xy, z, 1.);\nv_dotRatio \x3d u_dotSize / gl_PointSize;\nv_invEdgeRatio \x3d -1. / ( smoothEdgeWidth / gl_PointSize );\ngl_PointSize  *\x3d (u_pixelRatio * u_tileZoomFactor);\n}"}},
filtering:{"bicubic.glsl":"vec4 computeWeights(float v) {\nfloat b \x3d 1.0 / 6.0;\nfloat v2 \x3d v * v;\nfloat v3 \x3d v2 * v;\nfloat w0 \x3d b * (-v3 + 3.0 * v2 - 3.0 * v + 1.0);\nfloat w1 \x3d b * (3.0 * v3  - 6.0 * v2 + 4.0);\nfloat w2 \x3d b * (-3.0 * v3 + 3.0 * v2 + 3.0 * v + 1.0);\nfloat w3 \x3d b * v3;\nreturn vec4(w0, w1, w2, w3);\n}\nvec4 bicubicOffsetsAndWeights(float v) {\nvec4 w \x3d computeWeights(v);\nfloat g0 \x3d w.x + w.y;\nfloat g1 \x3d w.z + w.w;\nfloat h0 \x3d 1.0 - (w.y / g0) + v;\nfloat h1 \x3d 1.0 + (w.w / g1) - v;\nreturn vec4(h0, h1, g0, g1);\n}\nvec4 sampleBicubicBSpline(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 eX \x3d vec2(1.0 / texSize.x, 0.0);\nvec2 eY \x3d vec2(0.0, 1.0 / texSize.y);\nvec2 texel \x3d coords * texSize - 0.5;\nvec3 hgX \x3d bicubicOffsetsAndWeights(fract(texel).x).xyz;\nvec3 hgY \x3d bicubicOffsetsAndWeights(fract(texel).y).xyz;\nvec2 coords10 \x3d coords + hgX.x * eX;\nvec2 coords00 \x3d coords - hgX.y * eX;\nvec2 coords11 \x3d coords10 + hgY.x * eY;\nvec2 coords01 \x3d coords00 + hgY.x * eY;\ncoords10 \x3d coords10 - hgY.y * eY;\ncoords00 \x3d coords00 - hgY.y * eY;\nvec4 color00 \x3d texture2D(sampler, coords00);\nvec4 color10 \x3d texture2D(sampler, coords10);\nvec4 color01 \x3d texture2D(sampler, coords01);\nvec4 color11 \x3d texture2D(sampler, coords11);\ncolor00 \x3d mix(color00, color01, hgY.z);\ncolor10 \x3d mix(color10, color11, hgY.z);\ncolor00 \x3d mix(color00, color10, hgX.z);\nreturn color00;\n}",
"bilinear.glsl":"vec4 sampleBilinear(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 texelStart \x3d floor(coords * texSize);\nvec2 coord0 \x3d texelStart / texSize;\nvec2 coord1 \x3d (texelStart +  vec2(1.0, 0.0)) / texSize;\nvec2 coord2 \x3d (texelStart +  vec2(0.0, 1.0)) / texSize;\nvec2 coord3 \x3d (texelStart +  vec2(1.0, 1.0)) / texSize;\nvec4 color0 \x3d texture2D(sampler, coord0);\nvec4 color1 \x3d texture2D(sampler, coord1);\nvec4 color2 \x3d texture2D(sampler, coord2);\nvec4 color3 \x3d texture2D(sampler, coord3);\nvec2 blend \x3d fract(coords * texSize);\nvec4 color01 \x3d mix(color0, color1, blend.x);\nvec4 color23 \x3d mix(color2, color3, blend.x);\nvec4 color \x3d mix(color01, color23, blend.y);\n#ifdef NNEDGE\nfloat alpha \x3d floor(color0.a * color1.a * color2.a * color3.a + 0.5);\ncolor \x3d color * alpha + (1.0 - alpha) * texture2D(sampler, coords);\n#endif\nreturn color;\n}",
"epx.glsl":"vec4 sampleEPX(sampler2D sampler, float size, vec2 coords, vec2 texSize) {\nvec2 invSize \x3d 1.0 / texSize;\nvec2 texel \x3d coords * texSize;\nvec2 texel_i \x3d floor(texel);\nvec2 texel_frac \x3d fract(texel);\nvec4 colorP \x3d texture2D(sampler, texel_i * invSize);\nvec4 colorP1 \x3d vec4(colorP);\nvec4 colorP2 \x3d vec4(colorP);\nvec4 colorP3 \x3d vec4(colorP);\nvec4 colorP4 \x3d vec4(colorP);\nvec4 colorA \x3d texture2D(sampler, (texel_i - vec2(0.0, 1.0)) * invSize);\nvec4 colorB \x3d texture2D(sampler, (texel_i + vec2(1.0, 0.0)) * invSize);\nvec4 colorC \x3d texture2D(sampler, (texel_i - vec2(1.0, 0.0)) * invSize);\nvec4 colorD \x3d texture2D(sampler, (texel_i + vec2(0.0, 1.0)) * invSize);\nif (colorC \x3d\x3d colorA \x26\x26 colorC !\x3d colorD \x26\x26 colorA !\x3d colorB) {\ncolorP1 \x3d colorA;\n}\nif (colorA \x3d\x3d colorB \x26\x26 colorA !\x3d colorC \x26\x26 colorB !\x3d colorD) {\ncolorP2 \x3d colorB;\n}\nif (colorD \x3d\x3d colorC \x26\x26 colorD !\x3d colorB \x26\x26 colorC !\x3d colorA) {\ncolorP3 \x3d colorC;\n}\nif (colorB \x3d\x3d colorD \x26\x26 colorB !\x3d colorA \x26\x26 colorD !\x3d colorC) {\ncolorP4 \x3d colorD;\n}\nvec4 colorP12 \x3d mix(colorP1, colorP2, texel_frac.x);\nvec4 colorP34 \x3d mix(colorP1, colorP2, texel_frac.x);\nreturn mix(colorP12, colorP34, texel_frac.y);\n}"},
fx:{integrate:{"integrate.frag":"precision mediump float;\nuniform lowp sampler2D u_sourceTexture;\nuniform lowp sampler2D u_maskTexture;\nuniform mediump float u_zoomLevel;\nuniform highp float u_timeDelta;\nuniform highp float u_animationTime;\nvarying highp vec2 v_texcoord;\n#include \x3cmaterials/utils.glsl\x3e\nvoid main()\n{\n#ifdef DELTA\nvec4 texel \x3d texture2D(u_sourceTexture, v_texcoord);\nvec4 data0 \x3d texture2D(u_maskTexture, v_texcoord);\nfloat flags \x3d data0.r * 255.0;\nfloat groupMinZoom \x3d data0.g * 255.0;\nfloat isVisible \x3d getFilterBit(flags, 0);\nfloat wouldClip \x3d step(groupMinZoom, u_zoomLevel);\nfloat direction \x3d wouldClip * 1.0 + (1.0 - wouldClip) * -1.0;\nfloat dt \x3d u_timeDelta / max(u_animationTime, 0.0001);\nvec4 nextState \x3d vec4(texel + direction * dt);\ngl_FragColor \x3d  vec4(nextState);\n#elif defined(UPDATE)\nvec4 texel \x3d texture2D(u_sourceTexture, v_texcoord);\ngl_FragColor \x3d texel;\n#endif\n}",
"integrate.vert":"precision mediump float;\nattribute vec2 a_pos;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord \x3d a_pos;\ngl_Position \x3d vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n}"}},heatmap:{heatmapResolve:{"heatmapResolve.frag":"precision highp float;\n#ifdef HEATMAP_PRECISION_HALF_FLOAT\n#define COMPRESSION_FACTOR 4.0\n#else\n#define COMPRESSION_FACTOR 1.0\n#endif\nuniform sampler2D u_texture;\nuniform sampler2D u_gradient;\nuniform vec2 u_densityMinAndInvRange;\nuniform float u_densityNormalization;\nvarying vec2 v_uv;\nvoid main() {\nvec4 data \x3d texture2D(u_texture, v_uv);\nfloat density \x3d data.r * COMPRESSION_FACTOR;\ndensity *\x3d u_densityNormalization;\ndensity \x3d (density - u_densityMinAndInvRange.x) * u_densityMinAndInvRange.y;\nvec4 color \x3d texture2D(u_gradient, vec2(density, 0.5));\ngl_FragColor \x3d vec4(color.rgb * color.a, color.a);\n}",
"heatmapResolve.vert":"precision highp float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nvarying vec2 v_uv;\nconst float UV_TO_TILE_SPACE \x3d 512.;\nvoid main() {\nv_uv \x3d a_pos;\ngl_Position \x3d vec4((u_dvsMat3 * vec3(a_pos * UV_TO_TILE_SPACE, 1.)).xy, 1., 1.);\n}"}},highlight:{"blur.frag":"varying mediump vec2 v_texcoord;\nuniform mediump vec4 u_direction;\nuniform mediump mat4 u_channelSelector;\nuniform mediump float u_sigma;\nuniform sampler2D u_texture;\nmediump float gauss1(mediump vec2 dir) {\nreturn exp(-dot(dir, dir) / (2.0 * u_sigma * u_sigma));\n}\nmediump vec4 selectChannel(mediump vec4 sample) {\nreturn u_channelSelector * sample;\n}\nvoid accumGauss1(mediump float i, inout mediump float tot, inout mediump float weight) {\nmediump float w \x3d gauss1(i * u_direction.xy);\ntot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw))[3] * w;\nweight +\x3d w;\n}\nvoid main(void) {\nmediump float tot \x3d 0.0;\nmediump float weight \x3d 0.0;\naccumGauss1(-5.0, tot, weight);\naccumGauss1(-4.0, tot, weight);\naccumGauss1(-3.0, tot, weight);\naccumGauss1(-2.0, tot, weight);\naccumGauss1(-1.0, tot, weight);\naccumGauss1(0.0, tot, weight);\naccumGauss1(1.0, tot, weight);\naccumGauss1(2.0, tot, weight);\naccumGauss1(3.0, tot, weight);\naccumGauss1(4.0, tot, weight);\naccumGauss1(5.0, tot, weight);\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, tot / weight);\n}",
"highlight.frag":"varying mediump vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform mediump float u_sigma;\nuniform sampler2D u_shade;\nuniform mediump vec2 u_minMaxDistance;\nmediump float estimateDistance() {\nmediump float y \x3d texture2D(u_texture, v_texcoord)[3];\nconst mediump float y0 \x3d 0.5;\nmediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * u_sigma);\nmediump float d \x3d (y - y0) / m0;\nreturn d;\n}\nmediump vec4 shade(mediump float d) {\nmediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\nmappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\nreturn texture2D(u_shade, vec2(mappedDistance, 0.5));\n}\nvoid main(void) {\nmediump float d \x3d estimateDistance();\ngl_FragColor \x3d shade(d);\n}",
"textured.vert":"attribute mediump vec2 a_position;\nattribute mediump vec2 a_texcoord;\nvarying mediump vec2 v_texcoord;\nvoid main(void) {\ngl_Position \x3d vec4(a_position, 0.0, 1.0);\nv_texcoord \x3d a_texcoord;\n}"},magnifier:{"magnifier.frag":"uniform lowp vec4 u_background;\nuniform mediump sampler2D u_readbackTexture;\nuniform mediump sampler2D u_maskTexture;\nuniform mediump sampler2D u_overlayTexture;\nuniform bool u_maskEnabled;\nuniform bool u_overlayEnabled;\nvarying mediump vec2 v_texCoord;\nconst lowp float barrelFactor \x3d 1.1;\nlowp vec2 barrel(lowp vec2 uv) {\nlowp vec2 uvn \x3d uv * 2.0 - 1.0;\nif (uvn.x \x3d\x3d 0.0 \x26\x26 uvn.y \x3d\x3d 0.0) {\nreturn vec2(0.5, 0.5);\n}\nlowp float theta \x3d atan(uvn.y, uvn.x);\nlowp float r \x3d pow(length(uvn), barrelFactor);\nreturn r * vec2(cos(theta), sin(theta)) * 0.5 + 0.5;\n}\nvoid main(void)\n{\nlowp vec4 color \x3d texture2D(u_readbackTexture, barrel(v_texCoord));\ncolor \x3d (color + (1.0 - color.a) * u_background);\nlowp float mask \x3d u_maskEnabled ? texture2D(u_maskTexture, v_texCoord).a : 1.0;\ncolor *\x3d mask;\nlowp vec4 overlayColor \x3d u_overlayEnabled ? texture2D(u_overlayTexture, v_texCoord) : vec4(0);\ngl_FragColor \x3d overlayColor + (1.0 - overlayColor.a) * color;\n}",
"magnifier.vert":"precision mediump float;\nattribute mediump vec2 a_pos;\nuniform mediump vec4 u_drawPos;\nvarying mediump vec2 v_texCoord;\nvoid main(void)\n{\nv_texCoord \x3d a_pos;\ngl_Position \x3d vec4(u_drawPos.xy + vec2(a_pos - 0.5) * u_drawPos.zw, 0.0, 1.0);\n}"},materials:{"attributeData.glsl":"uniform highp sampler2D u_attributeData0;\nuniform highp sampler2D u_attributeData1;\nuniform highp sampler2D u_attributeData2;\nuniform highp sampler2D u_attributeData3;\nuniform highp sampler2D u_attributeData4;\nuniform highp sampler2D u_attributeData5;\nuniform highp int u_attributeTextureSize;\nhighp vec2 getAttributeDataCoords(in highp vec3 id) {\nhighp vec3  texel \x3d unpackDisplayIdTexel(id);\nhighp float size \x3d float(u_attributeTextureSize);\nhighp float u32 \x3d float(int(texel.r) + int(texel.g) * 256 + int(texel.b) * 256 * 256);\nhighp float col \x3d mod(u32, size);\nhighp float row \x3d (u32 - col) / size;\nhighp float u \x3d col / size;\nhighp float v \x3d row / size;\nreturn vec2(u, v);\n}\nhighp vec2 getAttributeDataTextureCoords(in highp vec3 id) {\nreturn (getAttributeDataCoords(id) * 2.0) - 1.0 + (.5 / vec2(u_attributeTextureSize));\n}\nhighp vec4 getAttributeData0(in highp vec3 id) {\nvec2 coords \x3d getAttributeDataCoords(id);\nreturn texture2D(u_attributeData0, coords);\n}\nhighp vec4 getAttributeData1(in highp vec3 id) {\nhighp vec2 coords \x3d getAttributeDataCoords(id);\nreturn texture2D(u_attributeData1, coords);\n}\nhighp vec4 getAttributeData2(in highp vec3 id) {\nhighp vec2 coords \x3d getAttributeDataCoords(id);\nreturn texture2D(u_attributeData2, coords);\n}\nhighp vec4 getAttributeData3(in highp vec3 id) {\nhighp vec2 coords \x3d getAttributeDataCoords(id);\nreturn texture2D(u_attributeData3, coords);\n}\nhighp vec4 getAttributeData4(in highp vec3 id) {\nhighp vec2 coords \x3d getAttributeDataCoords(id);\nreturn texture2D(u_attributeData4, coords);\n}\nhighp vec4 getAttributeData5(in highp vec3 id) {\nhighp vec2 coords \x3d getAttributeDataCoords(id);\nreturn texture2D(u_attributeData5, coords);\n}\nfloat u88VVToFloat(in vec2 v) {\nbool isMagic \x3d v.x \x3d\x3d 255.0 \x26\x26 v.y \x3d\x3d 255.0;\nif (isMagic) {\nreturn NAN_MAGIC_NUMBER;\n}\nreturn (v.x + v.y * float(0x100)) - 32768.0;\n}",
"barycentric.glsl":"float inTriangle(vec3 bary) {\nvec3 absBary \x3d abs(bary);\nreturn step((absBary.x + absBary.y + absBary.z), 1.05);\n}\nvec3 xyToBarycentric(in vec2 pos, in vec2 v0,  in vec2 v1, in vec2 v2) {\nmat3 xyToBarycentricMat3 \x3d mat3(\nv1.x * v2.y - v2.x * v1.y, v2.x * v0.y - v0.x * v2.y, v0.x * v1.y - v1.x * v0.y,\nv1.y - v2.y, v2.y - v0.y, v0.y - v1.y,\nv2.x - v1.x, v0.x - v2.x, v1.x - v0.x\n);\nfloat A2 \x3d v0.x * (v1.y - v2.y) + v1.x * (v2.y - v0.y) + v2.x * (v0.y - v1.y);\nreturn (1. / A2) * xyToBarycentricMat3 * vec3(1., pos);\n}",
"constants.glsl":"const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\nconst float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\nconst float C_RAD_TO_DEG \x3d 180.0 / 3.141592654;\nconst float SIGNED_BYTE_TO_UNSIGNED \x3d 128.0;\nconst float POSITION_PRECISION \x3d 1.0 / 8.0;\nconst float FILL_POSITION_PRECISION \x3d 1.0 / 1.0;\nconst float SOFT_EDGE_RATIO \x3d 1.0;\nconst float THIN_LINE_WIDTH_FACTOR \x3d 1.1;\nconst float THIN_LINE_HALF_WIDTH \x3d 1.0;\nconst float EXTRUDE_SCALE_PLACEMENT_PADDING \x3d 1.0 / 4.0;\nconst float OFFSET_PRECISION \x3d 1.0 / 8.0;\nconst float OUTLINE_SCALE \x3d 1.0 / 5.0;\nconst float SDF_FONT_SIZE \x3d 24.0;\nconst float MAX_SDF_DISTANCE \x3d 8.0;\nconst float PLACEMENT_PADDING \x3d 8.0;\nconst float EPSILON \x3d 0.00001;\nconst float EPSILON_HITTEST \x3d 0.05;\nconst int MAX_FILTER_COUNT \x3d 2;\nconst int ATTR_VV_SIZE \x3d 0;\nconst int ATTR_VV_COLOR \x3d 1;\nconst int ATTR_VV_OPACITY \x3d 2;\nconst int ATTR_VV_ROTATION \x3d 3;\nconst highp float NAN_MAGIC_NUMBER \x3d 1e-30;\nconst int BITSET_GENERIC_LOCK_COLOR \x3d 1;\nconst int BITSET_GENERIC_CONSIDER_ALPHA_ONLY \x3d 4;\nconst int BITSET_MARKER_ALIGNMENT_MAP \x3d 0;\nconst int BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE \x3d 2;\nconst int BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY \x3d 3;\nconst int BITSET_TYPE_FILL_OUTLINE \x3d 0;\nconst int BITSET_FILL_RANDOM_PATTERN_OFFSET \x3d 2;\nconst int BITSET_LINE_SCALE_DASH \x3d 2;",
fill:{"common.glsl":"#include \x3cmaterials/symbologyTypeUtils.glsl\x3e\n#ifdef PATTERN\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_sampleAlphaOnly;\n#endif\n#if SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_DOT_DENSITY\nuniform lowp vec4 u_isActive[ 2 ];\nuniform highp float u_dotValue;\nuniform highp float u_tileDotsOverArea;\nuniform highp float u_dotTextureDotCount;\nuniform mediump float u_tileZoomFactor;\n#endif\nvarying highp vec3 v_id;\nvarying lowp vec4 v_color;\nvarying lowp float v_opacity;\nvarying mediump vec4 v_aux1;\n#ifdef PATTERN\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nvarying lowp float v_isOutline;\n#endif\n#if SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_DOT_DENSITY\nvarying highp vec2 v_dotTextureCoords;\nvarying highp vec4 v_dotThresholds[ 2 ];\n#endif",
"fill.frag":"precision highp float;\n#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/utils.glsl\x3e\n#include \x3cmaterials/fill/common.glsl\x3e\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\n#endif\n#if SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_DOT_DENSITY\nuniform mediump mat4 u_dotColors[ 2 ];\nuniform sampler2D u_dotTextures[ 2 ];\nuniform vec4 u_dotBackgroundColor;\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#include \x3cmaterials/shared/line/common.glsl\x3e\n#include \x3cmaterials/shared/line/line.frag\x3e\nlowp vec4 drawLine() {\nfloat v_lineWidth \x3d v_aux1.x;\nvec2  v_normal    \x3d v_aux1.yz;\nLineData inputs \x3d LineData(\nv_color,\nv_normal,\nv_lineWidth,\nv_opacity,\nv_id\n);\nreturn shadeLine(inputs);\n}\n#endif\nlowp vec4 drawFill() {\nlowp vec4 out_color \x3d vec4(0.);\n#ifdef HITTEST\nout_color \x3d v_color;\n#elif defined(PATTERN)\nmediump vec4 v_tlbr \x3d v_aux1;\nmediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\n#ifdef VV_COLOR\nif (v_sampleAlphaOnly \x3e 0.5) {\ncolor.rgb \x3d vec3(color.a);\n}\n#endif\nout_color \x3d v_opacity * v_color * color;\n#elif SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_DOT_DENSITY \x26\x26 !defined(HIGHLIGHT)\nvec4 textureThresholds0 \x3d texture2D(u_dotTextures[0], v_dotTextureCoords);\nvec4 textureThresholds1 \x3d texture2D(u_dotTextures[1], v_dotTextureCoords);\nvec4 difference0 \x3d v_dotThresholds[0] - textureThresholds0;\nvec4 difference1 \x3d v_dotThresholds[1] - textureThresholds1;\n#ifdef DD_DOT_BLENDING\nvec4 isPositive0 \x3d step(0.0, difference0);\nvec4 isPositive1 \x3d step(0.0, difference1);\nfloat weightSum \x3d dot(isPositive0, difference0) + dot(isPositive1, difference1);\nfloat lessThanEqZero \x3d step(weightSum, 0.0);\nfloat greaterThanZero \x3d 1.0 - lessThanEqZero ;\nfloat divisor \x3d (weightSum + lessThanEqZero);\nvec4 weights0 \x3d difference0 * isPositive0 / divisor;\nvec4 weights1 \x3d difference1 * isPositive1 / divisor;\nvec4 dotColor \x3d u_dotColors[0] * weights0 + u_dotColors[1] * weights1;\nvec4 preEffectColor \x3d greaterThanZero * dotColor + lessThanEqZero * u_dotBackgroundColor;\n#else\nfloat diffMax \x3d max(max4(difference0), max4(difference1));\nfloat lessThanZero \x3d step(diffMax, 0.0);\nfloat greaterOrEqZero \x3d 1.0 - lessThanZero;\nvec4 isMax0 \x3d step(diffMax, difference0);\nvec4 isMax1 \x3d step(diffMax, difference1);\nvec4 dotColor \x3d u_dotColors[0] * isMax0 + u_dotColors[1] * isMax1;\nvec4 preEffectColor \x3d greaterOrEqZero * dotColor + lessThanZero * u_dotBackgroundColor;\n#endif\nout_color \x3d preEffectColor;\n#else\nout_color \x3d v_opacity * v_color;\n#endif\n#ifdef HIGHLIGHT\nout_color.a \x3d 1.0;\n#endif\nreturn out_color;\n}\nvoid main() {\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nif (v_isOutline \x3e 0.5) {\ngl_FragColor \x3d drawLine();\n} else {\ngl_FragColor \x3d drawFill();\n}\n#else\ngl_FragColor \x3d drawFill();\n#endif\n}",
"fill.vert":"#include \x3cmaterials/symbologyTypeUtils.glsl\x3e\n#define PACKED_LINE\nprecision highp float;\nattribute float a_bitset;\n#if SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_DOT_DENSITY\nattribute float a_inverseArea;\nvec4 a_color \x3d vec4(0.0, 0.0, 0.0, 1.0);\nvec2 a_zoomRange \x3d vec2(0.0, 10000.0);\n#else\nattribute vec4 a_color;\nattribute vec4 a_aux2;\nattribute vec4 a_aux3;\n#ifndef SYMBOLOGY_TYPE_IS_SIMPLE_LIKE\nattribute vec4 a_aux1;\nattribute vec2 a_zoomRange;\n#else\nvec2 a_zoomRange \x3d vec2(0.0, 10000.0);\n#endif\n#endif\nuniform vec2 u_tileOffset;\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/fill/common.glsl\x3e\n#include \x3cmaterials/fill/hittest.glsl\x3e\n#if SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_DOT_DENSITY\nvec4 dotThreshold(vec4 featureAttrOverFeatureArea, float dotValue, float tileDotsOverArea) {\nreturn featureAttrOverFeatureArea * (1.0 / dotValue)  * (1.0 / tileDotsOverArea);\n}\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#include \x3cmaterials/shared/line/common.glsl\x3e\n#include \x3cmaterials/shared/line/line.vert\x3e\nvoid drawLine(out lowp vec4 out_color, out highp vec3 out_pos) {\nLineData outputs \x3d buildLine(\nout_pos,\na_id,\na_pos,\na_color,\n(a_aux3.xy - 128.) / 16.,\n(a_aux3.zw - 128.) / 16.,\n0.,\na_aux2.z / 16.,\na_bitset,\nvec4(0.),\nvec2(0.),\na_aux2.w / 16.\n);\nv_id      \x3d outputs.id;\nv_opacity \x3d outputs.opacity;\nv_aux1    \x3d vec4(outputs.lineHalfWidth, outputs.normal, 0.);\nout_color \x3d outputs.color;\n}\n#endif\nvoid drawFill(out lowp vec4 out_color, out highp vec3 out_pos) {\nfloat a_bitSet \x3d a_bitset;\nout_color \x3d getColor(a_color, a_bitSet, BITSET_GENERIC_LOCK_COLOR);\nv_opacity \x3d getOpacity();\nv_id      \x3d norm(a_id);\n#if SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_DOT_DENSITY\nmat3 tileToTileNormalized \x3d mat3(  2. / 512.,  0.,  0.,\n0., -2. / 512.,  0.,\n-1.,  1.,  1.  );\nout_pos   \x3d tileToTileNormalized * vec3((a_pos * FILL_POSITION_PRECISION), 1.);\n#else\nout_pos   \x3d u_dvsMat3 * vec3(a_pos * FILL_POSITION_PRECISION, 1.);\n#endif\n#ifdef PATTERN\nvec4  a_tlbr   \x3d a_aux1;\nfloat a_width  \x3d a_aux2.x;\nfloat a_height \x3d a_aux2.y;\nvec2  a_offset \x3d a_aux2.zw;\nvec2  a_scale  \x3d a_aux3.xy;\nfloat a_angle  \x3d a_aux3.z;\nvec2 scale \x3d (1.0 / SIGNED_BYTE_TO_UNSIGNED) * a_scale;\nfloat width \x3d u_zoomFactor * a_width * scale.x;\nfloat height \x3d u_zoomFactor * a_height * scale.y;\nfloat angle \x3d C_256_TO_RAD * a_angle;\nfloat sinA \x3d sin(angle);\nfloat cosA \x3d cos(angle);\nfloat dx \x3d 0.0;\nfloat dy \x3d 0.0;\nif (getBit(a_bitset, BITSET_FILL_RANDOM_PATTERN_OFFSET) \x3e 0.5) {\nfloat id \x3d rgba2float(vec4(a_id, 0.0));\ndx \x3d rand(vec2(id, 0.0));\ndy \x3d rand(vec2(0.0, id));\n}\nmat3 patternMatrix \x3d mat3(cosA / width, sinA / height, 0,\n-sinA / width, cosA / height, 0,\ndx,            dy,           1);\nvec2 tileOffset \x3d vec2(u_tileOffset.x * cosA - u_tileOffset.y * sinA, u_tileOffset.x * sinA + u_tileOffset.y * cosA);\ntileOffset \x3d mod(tileOffset, vec2(a_aux2.x, a_aux2.y));\nvec2 symbolOffset \x3d (a_offset - tileOffset) / vec2(width, height);\nv_tileTextureCoord \x3d (patternMatrix * vec3(a_pos * FILL_POSITION_PRECISION, 1.0)).xy - symbolOffset;\nv_aux1 \x3d a_tlbr / u_mosaicSize.xyxy;\nv_sampleAlphaOnly \x3d getBit(a_bitset, BITSET_GENERIC_CONSIDER_ALPHA_ONLY);\n#elif SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_DOT_DENSITY\nvec4 ddAttributeData0 \x3d getAttributeData2(a_id) * u_isActive[0] * a_inverseArea;\nvec4 ddAttributeData1 \x3d getAttributeData3(a_id) * u_isActive[1] * a_inverseArea;\nfloat size \x3d u_tileZoomFactor * 512.0 * 1.0 / u_pixelRatio;\nv_dotThresholds[0] \x3d dotThreshold(ddAttributeData0, u_dotValue, u_tileDotsOverArea);\nv_dotThresholds[1] \x3d dotThreshold(ddAttributeData1, u_dotValue, u_tileDotsOverArea);\nv_dotTextureCoords \x3d (a_pos * FILL_POSITION_PRECISION + 0.5) / size;\n#endif\n}\n#ifdef HITTEST\nvoid draw(out lowp vec4 out_color, out highp vec3 out_pos) {\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nif (getBit(a_bitset, BITSET_TYPE_FILL_OUTLINE) \x3e 0.5) {\nout_pos \x3d vec3(0., 0., 2.);\nreturn;\n}\n#endif\nhittestFill(out_color, out_pos);\ngl_PointSize \x3d 1.0;\n}\n#elif defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nvoid draw(out lowp vec4 out_color, out highp vec3 out_pos) {\nv_isOutline \x3d getBit(a_bitset, BITSET_TYPE_FILL_OUTLINE);\nif (v_isOutline \x3e 0.5) {\ndrawLine(out_color, out_pos);\n} else {\ndrawFill(out_color, out_pos);\n}\n}\n#else\n#define draw drawFill\n#endif\nvoid main()\n{\nINIT;\nhighp vec3 pos  \x3d vec3(0.);\nhighp vec4 color  \x3d vec4(0.);\ndraw(color, pos);\nv_color \x3d color;\ngl_Position \x3d vec4(clip(v_color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}",
"hittest.glsl":"#ifdef HITTEST\n#include \x3cmaterials/hittest/common.glsl\x3e\nattribute vec2 a_pos1;\nattribute vec2 a_pos2;\nvoid hittestFill(\nout lowp vec4 out_color,\nout highp vec3 out_pos\n) {\nvec3 pos        \x3d u_viewMat3 * u_tileMat3 * vec3(a_pos  * FILL_POSITION_PRECISION, 1.);\nvec3 pos1       \x3d u_viewMat3 * u_tileMat3 * vec3(a_pos1 * FILL_POSITION_PRECISION, 1.);\nvec3 pos2       \x3d u_viewMat3 * u_tileMat3 * vec3(a_pos2 * FILL_POSITION_PRECISION, 1.);\nfloat hittestDist \x3d u_hittestDist;\nfloat dist \x3d distPointTriangle(u_hittestPos, pos.xy, pos1.xy, pos2.xy);\nout_pos \x3d vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif (dist \x3c 0. || dist \x3e\x3d hittestDist) {\nout_pos.z +\x3d 2.0;\n}\nout_color \x3d vec4(1. / 255., 0, 0, dist \x3d\x3d 0. ? (1. / 255.) : 0.);\n}\n#endif"},
hittest:{"common.glsl":"#ifdef HITTEST\nuniform float u_hittestDist;\nuniform highp vec2 u_hittestPos;\nfloat projectScalar(vec2 a, vec2 b) {\nreturn dot(a, normalize(b));\n}\nfloat distPointSegment(vec2 p0, vec2 p1, vec2 p2) {\nvec2 L \x3d p2 - p1;\nvec2 A \x3d p0 - p1;\nfloat projAL \x3d projectScalar(A, L);\nfloat t \x3d clamp(projAL / length(L), 0., 1.);\nreturn distance(p0, p1 + t * (p2 - p1));\n}\nvoid hittestMarker(out lowp vec4 out_color, out highp vec3 out_pos, in highp vec3 pos, float size) {\nfloat dist \x3d distance(pos, vec3(u_hittestPos, 1.));\nout_pos \x3d vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif ((dist - size) \x3e u_hittestDist) {\nout_pos.z +\x3d 2.0;\n}\nout_color \x3d vec4(1. / 255., 0, 0, (dist - size) \x3c 0. ? (1. / 255.) : 0.);\n}\nfloat intersectPointTriangleBary(vec2 p, vec2 a, vec2 b, vec2 c) {\nreturn inTriangle(xyToBarycentric(p, a, b, c));\n}\nfloat distPointTriangle(vec2 p, vec2 a, vec2 b, vec2 c) {\nvec2 ba \x3d b - a;\nvec2 ca \x3d c - a;\nfloat crossProduct \x3d ba.x * ca.y - ca.x * ba.y;\nbool isParallel \x3d crossProduct \x3c EPSILON_HITTEST \x26\x26 crossProduct \x3e -EPSILON_HITTEST;\nif (isParallel) {\nreturn -1.;\n}\nif (intersectPointTriangleBary(p.xy, a, b, c) \x3d\x3d 1.) {\nreturn 0.;\n}\nfloat distAB \x3d distPointSegment(p, a, b);\nfloat distBC \x3d distPointSegment(p, b, c);\nfloat distCA \x3d distPointSegment(p, c, a);\nreturn min(min(distAB, distBC), distCA);\n}\n#endif"},
icon:{"common.glsl":"#include \x3cutil/encoding.glsl\x3e\nuniform lowp vec2 u_mosaicSize;\nvarying lowp vec4 v_color;\nvarying highp vec3 v_id;\nvarying highp vec4 v_sizeTex;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nvarying lowp vec4 v_outlineColor;\nvarying mediump float v_outlineWidth;\nvarying mediump float v_distRatio;\nvarying mediump float v_overridingOutlineColor;\nvarying mediump float v_isThin;\n#endif\n#ifdef SDF\nvec4 getColor(vec2 v_size, vec2 v_tex) {\nlowp vec4 fillPixelColor \x3d v_color;\nfloat d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\nfloat size \x3d max(v_size.x, v_size.y);\nfloat dist \x3d d * size * SOFT_EDGE_RATIO * v_distRatio;\nfillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\nfloat outlineWidth \x3d v_outlineWidth;\n#ifdef HIGHLIGHT\noutlineWidth \x3d max(outlineWidth, 4.0 * v_isThin);\n#endif\nif (outlineWidth \x3e 0.25) {\nlowp vec4 outlinePixelColor \x3d v_overridingOutlineColor * v_color + (1.0 - v_overridingOutlineColor) * v_outlineColor;\nfloat clampedOutlineSize \x3d min(outlineWidth, size);\noutlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\nreturn v_opacity * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\n}\nreturn v_opacity * fillPixelColor;\n}\n#else\nvec4 getColor(vec2 _v_size, vec2 v_tex) {\nlowp vec4 texColor \x3d texture2D(u_texture, v_tex);\nreturn v_opacity * texColor * v_color;\n}\n#endif",
heatmapAccumulate:{"common.glsl":"varying lowp vec4 v_hittestResult;\nvarying mediump vec2 v_offsetFromCenter;\nvarying highp float v_fieldValue;","heatmapAccumulate.frag":"precision mediump float;\n#include \x3cmaterials/icon/heatmapAccumulate/common.glsl\x3e\n#ifdef HEATMAP_PRECISION_HALF_FLOAT\n#define COMPRESSION_FACTOR 0.25\n#else\n#define COMPRESSION_FACTOR 1.0\n#endif\nuniform lowp sampler2D u_texture;\nvoid main() {\n#ifdef HITTEST\ngl_FragColor \x3d v_hittestResult;\n#else\nfloat radius \x3d length(v_offsetFromCenter);\nfloat shapeWeight \x3d step(radius, 1.0);\nfloat oneMinusRadiusSquared \x3d 1.0 - radius * radius;\nfloat kernelWeight \x3d oneMinusRadiusSquared * oneMinusRadiusSquared;\ngl_FragColor \x3d vec4(shapeWeight * kernelWeight * v_fieldValue * COMPRESSION_FACTOR);\n#endif\n}",
"heatmapAccumulate.vert":"precision highp float;\nattribute vec2 a_vertexOffset;\nvec4 a_color \x3d vec4(0.0);\nvec2 a_zoomRange \x3d vec2(0.0, 10000.0);\nuniform float u_radius;\nuniform float u_isFieldActive;\nconst float TILE_TO_CLIP_SPACE \x3d 2.0 / 512.0;\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/hittest/common.glsl\x3e\n#include \x3cmaterials/icon/heatmapAccumulate/common.glsl\x3e\nvoid main() {\nfloat filterFlags \x3d getFilterFlags();\n#ifdef HITTEST\nhighp vec4 out_hittestResult \x3d vec4(0.);\nhighp vec3 out_pos \x3d vec3(0.);\nvec3 pos \x3d u_viewMat3 * u_tileMat3 * vec3(a_pos * POSITION_PRECISION, 1.0);\nhittestMarker(out_hittestResult, out_pos, pos, u_radius);\nv_hittestResult \x3d out_hittestResult;\ngl_PointSize \x3d 1.;\ngl_Position \x3d vec4(clip(a_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\nv_offsetFromCenter \x3d sign(a_vertexOffset);\nv_fieldValue \x3d getAttributeData2(a_id).x * u_isFieldActive + 1.0 - u_isFieldActive;\nvec3 centerPos \x3d vec3(a_pos * POSITION_PRECISION * TILE_TO_CLIP_SPACE - 1.0, 1.0);\nvec3 vertexPos \x3d centerPos + vec3(v_offsetFromCenter, 0.0) * u_radius * TILE_TO_CLIP_SPACE;\ngl_Position \x3d vec4(clip(a_color, vertexPos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},
"hittest.glsl":"#ifdef HITTEST\n#include \x3cmaterials/hittest/common.glsl\x3e\nattribute vec2 a_vertexOffset1;\nattribute vec2 a_vertexOffset2;\nattribute vec2 a_texCoords1;\nattribute vec2 a_texCoords2;\nvec2 getTextureCoords(in vec3 bary, in vec2 texCoords0, in vec2 texCoords1, in vec2 texCoords2) {\nreturn texCoords0 * bary.x + texCoords1 * bary.y + texCoords2 * bary.z;\n}\nvoid hittestIcon(\ninout lowp vec4 out_color,\nout highp vec3 out_pos,\nin vec3 pos,\nin vec3 offset,\nin vec2 size,\nin float scaleFactor,\nin float isMapAligned\n) {\nout_pos \x3d vec3(getAttributeDataTextureCoords(a_id), 0.0);\nvec3 posBase \x3d u_viewMat3 * u_tileMat3  * pos;\nvec3 offset1 \x3d scaleFactor * vec3(a_vertexOffset1 / 16.0, 0.);\nvec3 offset2 \x3d scaleFactor * vec3(a_vertexOffset2 / 16.0, 0.);\nvec2 pos0    \x3d (posBase + getMatrixNoDisplay(isMapAligned) * offset).xy;\nvec2 pos1    \x3d (posBase + getMatrixNoDisplay(isMapAligned) * offset1).xy;\nvec2 pos2    \x3d (posBase + getMatrixNoDisplay(isMapAligned) * offset2).xy;\nvec3 bary0 \x3d xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, -u_hittestDist), pos0, pos1, pos2);\nvec3 bary1 \x3d xyToBarycentric(u_hittestPos + vec2(0., -u_hittestDist), pos0, pos1, pos2);\nvec3 bary2 \x3d xyToBarycentric(u_hittestPos + vec2(u_hittestDist, -u_hittestDist), pos0, pos1, pos2);\nvec3 bary3 \x3d xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, 0.), pos0, pos1, pos2);\nvec3 bary4 \x3d xyToBarycentric(u_hittestPos, pos0, pos1, pos2);\nvec3 bary5 \x3d xyToBarycentric(u_hittestPos + vec2(u_hittestDist, 0.), pos0, pos1, pos2);\nvec3 bary6 \x3d xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, u_hittestDist), pos0, pos1, pos2);\nvec3 bary7 \x3d xyToBarycentric(u_hittestPos + vec2(0., u_hittestDist), pos0, pos1, pos2);\nvec3 bary8 \x3d xyToBarycentric(u_hittestPos + vec2(u_hittestDist, u_hittestDist), pos0, pos1, pos2);\nvec2 tex0 \x3d a_texCoords  / u_mosaicSize;\nvec2 tex1 \x3d a_texCoords1 / u_mosaicSize;\nvec2 tex2 \x3d a_texCoords2 / u_mosaicSize;\nfloat alphaSum \x3d 0.;\nalphaSum +\x3d inTriangle(bary0) * getColor(size, getTextureCoords(bary0, tex0, tex1, tex2)).a;\nalphaSum +\x3d inTriangle(bary1) * getColor(size, getTextureCoords(bary1, tex0, tex1, tex2)).a;\nalphaSum +\x3d inTriangle(bary2) * getColor(size, getTextureCoords(bary2, tex0, tex1, tex2)).a;\nalphaSum +\x3d inTriangle(bary3) * getColor(size, getTextureCoords(bary3, tex0, tex1, tex2)).a;\nalphaSum +\x3d inTriangle(bary4) * getColor(size, getTextureCoords(bary4, tex0, tex1, tex2)).a;\nalphaSum +\x3d inTriangle(bary5) * getColor(size, getTextureCoords(bary5, tex0, tex1, tex2)).a;\nalphaSum +\x3d inTriangle(bary6) * getColor(size, getTextureCoords(bary6, tex0, tex1, tex2)).a;\nalphaSum +\x3d inTriangle(bary7) * getColor(size, getTextureCoords(bary7, tex0, tex1, tex2)).a;\nout_pos.z +\x3d step(alphaSum, .05) * 2.0;\nout_color \x3d vec4(1. / 255., 0., 0., alphaSum / 255.);\n}\n#endif",
"icon.frag":"precision mediump float;\n#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/utils.glsl\x3e\n#include \x3cmaterials/icon/common.glsl\x3e\nvoid main()\n{\n#ifdef HITTEST\nvec4 color \x3d v_color;\n#else\nvec4 color \x3d getColor(v_sizeTex.xy, v_sizeTex.zw);\n#endif\n#ifdef HIGHLIGHT\ncolor.a \x3d step(1.0 / 255.0, color.a);\n#endif\ngl_FragColor \x3d color;\n}","icon.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_outlineColor;\nattribute vec4 a_sizeAndOutlineWidth;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nattribute vec2 a_bitSetAndDistRatio;\nattribute vec2 a_zoomRange;\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/icon/common.glsl\x3e\n#include \x3cmaterials/icon/hittest.glsl\x3e\nfloat getMarkerScaleFactor(inout vec2 size, in float referenceSize) {\n#ifdef VV_SIZE\nfloat f \x3d getSize(size.y) / size.y;\nfloat sizeFactor \x3d size.y / referenceSize;\nreturn getSize(referenceSize) / referenceSize;\n#else\nreturn 1.;\n#endif\n}\nvoid main()\n{\nINIT;\nfloat a_bitSet \x3d a_bitSetAndDistRatio.x;\nvec3  pos           \x3d vec3(a_pos * POSITION_PRECISION, 1.0);\nvec2  size          \x3d a_sizeAndOutlineWidth.xy * a_sizeAndOutlineWidth.xy / 128.0;\nvec3  offset        \x3d vec3(a_vertexOffset / 16.0, 0.);\nfloat outlineSize   \x3d a_sizeAndOutlineWidth.z * a_sizeAndOutlineWidth.z / 128.0;\nfloat isMapAligned  \x3d getBit(a_bitSet, BITSET_MARKER_ALIGNMENT_MAP);\nfloat referenceSize \x3d a_sizeAndOutlineWidth.w * a_sizeAndOutlineWidth.w / 128.0;\nfloat scaleSymbolProportionally \x3d getBit(a_bitSet, BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY);\nfloat scaleFactor               \x3d getMarkerScaleFactor(size, referenceSize);\nsize.xy     *\x3d scaleFactor;\noffset.xy   *\x3d scaleFactor;\noutlineSize *\x3d scaleSymbolProportionally * (scaleFactor - 1.0) + 1.0;\nvec2 v_tex   \x3d a_texCoords / u_mosaicSize;\nfloat filterFlags \x3d getFilterFlags();\nv_color    \x3d getColor(a_color, a_bitSet, BITSET_GENERIC_LOCK_COLOR);\nv_opacity  \x3d getOpacity();\nv_id       \x3d norm(a_id);\nv_pos      \x3d u_dvsMat3 * pos + getMatrix(isMapAligned) * getRotation()  * offset;\nv_sizeTex  \x3d vec4(size.xy, v_tex.xy);\n#ifdef SDF\nv_isThin   \x3d getBit(a_bitSet, BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE);\n#ifdef VV_COLOR\nv_overridingOutlineColor \x3d v_isThin;\n#else\nv_overridingOutlineColor \x3d 0.0;\n#endif\nv_outlineWidth \x3d min(outlineSize, max(max(size.x, size.y) - 0.99, 0.0));\nv_outlineColor \x3d a_outlineColor;\nv_distRatio \x3d a_bitSetAndDistRatio.y / 126.0;\n#endif\n#ifdef HITTEST\nhighp vec4 out_color \x3d vec4(0.);\nhighp vec3 out_pos   \x3d vec3(0.);\nhittestIcon(out_color, out_pos, pos, offset, size, scaleFactor, isMapAligned);\nv_color \x3d out_color;\ngl_PointSize \x3d 1.;\ngl_Position \x3d vec4(clip(v_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\ngl_Position \x3d vec4(clip(v_color, v_pos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},
label:{"common.glsl":"uniform mediump float u_zoomLevel;\nuniform mediump float u_mapRotation;\nuniform mediump float u_mapAligned;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying mediump vec2 v_tex;\nvarying mediump vec4 v_color;\nvarying lowp vec4 v_animation;","label.frag":"#include \x3cmaterials/text/text.frag\x3e","label.vert":"precision highp float;\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/text/common.glsl\x3e\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texAndSize;\nattribute vec4 a_refSymbolAndPlacementOffset;\nattribute vec4 a_glyphData;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHalo;\nuniform float u_mapRotation;\nuniform float u_mapAligned;\nfloat getZ(in float minZoom, in float maxZoom, in float angle) {\nfloat glyphAngle \x3d angle * 360.0 / 254.0;\nfloat mapAngle \x3d u_mapRotation * 360.0 / 254.0;\nfloat diffAngle \x3d min(360.0 - abs(mapAngle - glyphAngle), abs(mapAngle - glyphAngle));\nfloat z \x3d 0.0;\nz +\x3d u_mapAligned * (2.0 * (1.0 - step(minZoom, u_currentZoom)));\nz +\x3d u_mapAligned * 2.0 * step(90.0, diffAngle);\nz +\x3d 2.0 * (1.0 - step(u_currentZoom, maxZoom));\nreturn z;\n}\nvoid main()\n{\nINIT;\nfloat groupMinZoom    \x3d getMinZoom();\nfloat glyphMinZoom    \x3d a_glyphData.x;\nfloat glyphMaxZoom    \x3d a_glyphData.y;\nfloat glyphAngle      \x3d a_glyphData.z;\nfloat a_minZoom          \x3d max(groupMinZoom, glyphMinZoom);\nfloat a_placementPadding \x3d a_refSymbolAndPlacementOffset.x * EXTRUDE_SCALE_PLACEMENT_PADDING;\nvec2  a_placementDir     \x3d unpack_u8_nf32(a_refSymbolAndPlacementOffset.zw);\nfloat a_refSymbolSize    \x3d a_refSymbolAndPlacementOffset.y;\nfloat fontSize           \x3d a_texAndSize.z;\nfloat haloSize           \x3d a_texAndSize.w * OUTLINE_SCALE;\nvec2  vertexOffset \x3d a_vertexOffset * OFFSET_PRECISION;\nvec3  pos          \x3d vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat z            \x3d getZ(a_minZoom, glyphMaxZoom, glyphAngle);\nfloat fontScale    \x3d fontSize / SDF_FONT_SIZE;\nfloat halfSize     \x3d getSize(a_refSymbolSize) / 2.0;\nfloat animation    \x3d pow(getAnimationState(), vec4(2.0)).r;\nv_color     \x3d animation * ((1.0 - u_isHalo) * a_color + (u_isHalo * a_haloColor));\nv_opacity   \x3d 1.0;\nv_tex       \x3d a_texCoords / u_mosaicSize;\nv_edgeDistanceOffset \x3d u_isHalo * haloSize / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  \x3d 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\nvec2 placementOffset \x3d a_placementDir * (halfSize + a_placementPadding);\nvec3 glyphOffset     \x3d u_displayMat3 * vec3(vertexOffset + placementOffset, 0.0);\nvec3 v_pos           \x3d vec3((u_dvsMat3 * pos + glyphOffset).xy, z);\ngl_Position \x3d vec4(v_pos, 1.0);\n#ifdef DEBUG\nv_color \x3d vec4(a_color.rgb, z \x3d\x3d 0.0 ? 1.0 : 0.645);\n#endif\n}"},
line:{"common.glsl":"varying lowp vec4 v_color;\nvarying highp vec3 v_id;\nvarying mediump vec2 v_normal;\nvarying mediump float v_lineHalfWidth;\nvarying lowp float v_opacity;\n#ifdef PATTERN\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\n#endif\n#if defined(PATTERN) || defined(SDF)\nvarying highp float v_accumulatedDistance;\n#endif\n#ifdef SDF\nvarying mediump float v_lineWidthRatio;\n#endif","hittest.glsl":"#include \x3cmaterials/hittest/common.glsl\x3e\n#ifdef HITTEST\nattribute vec2 a_pos1;\nattribute vec2 a_pos2;\nvoid hittestLine(out lowp vec4 out_color, out highp vec3 out_pos, float halfWidth) {\nvec3 pos        \x3d u_viewMat3 * u_tileMat3 * vec3(a_pos  * POSITION_PRECISION, 1.);\nvec3 pos1       \x3d u_viewMat3 * u_tileMat3 * vec3(a_pos1 * POSITION_PRECISION, 1.);\nvec3 pos2       \x3d u_viewMat3 * u_tileMat3 * vec3(a_pos2 * POSITION_PRECISION, 1.);\nvec3 outTextureCoords \x3d vec3(getAttributeDataTextureCoords(a_id), 0.0);\nfloat dist \x3d min(distPointSegment(u_hittestPos, pos.xy, pos1.xy),\ndistPointSegment(u_hittestPos, pos.xy, pos2.xy)) - halfWidth;\nout_pos \x3d vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif (dist \x3e\x3d u_hittestDist) {\nout_pos.z +\x3d 2.0;\n}\nout_color \x3d vec4(1. / 255., 0, 0, dist \x3c\x3d 0. ? (1. / 255.) : 0.);\n}\n#endif",
"line.frag":"precision lowp float;\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/symbologyTypeUtils.glsl\x3e\n#include \x3cmaterials/line/common.glsl\x3e\n#include \x3cmaterials/shared/line/common.glsl\x3e\n#include \x3cmaterials/shared/line/line.frag\x3e\n#ifdef HITTEST\nvoid main() {\ngl_FragColor \x3d v_color;\n}\n#else\nvoid main() {\nLineData inputs \x3d LineData(\nv_color,\nv_normal,\nv_lineHalfWidth,\nv_opacity,\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nv_tlbr,\nv_patternSize,\n#endif\n#ifdef SDF\nv_lineWidthRatio,\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance,\n#endif\n#endif\nv_id\n);\ngl_FragColor \x3d shadeLine(inputs);\n}\n#endif",
"line.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_offsetAndNormal;\nattribute vec2 a_accumulatedDistanceAndHalfWidth;\nattribute vec4 a_tlbr;\nattribute vec4 a_segmentDirection;\nattribute vec2 a_aux;\nattribute vec2 a_zoomRange;\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/symbologyTypeUtils.glsl\x3e\n#include \x3cmaterials/line/common.glsl\x3e\n#include \x3cmaterials/line/hittest.glsl\x3e\n#include \x3cmaterials/shared/line/common.glsl\x3e\n#include \x3cmaterials/shared/line/line.vert\x3e\n#ifdef HITTEST\nvoid draw() {\nfloat aa        \x3d 0.5 * u_antialiasing;\nfloat a_halfWidth \x3d a_accumulatedDistanceAndHalfWidth.y / 16.;\nfloat a_cimHalfWidth \x3d a_aux.x / 16. ;\nvec2  a_offset \x3d a_offsetAndNormal.xy / 16.;\nfloat baseWidth \x3d getBaseLineHalfWidth(a_halfWidth, a_cimHalfWidth);\nfloat halfWidth \x3d getLineHalfWidth(baseWidth, aa);\nhighp vec3 pos  \x3d vec3(0.);\nv_color \x3d vec4(0.);\nhittestLine(v_color, pos, halfWidth);\ngl_PointSize \x3d 1.;\ngl_Position \x3d vec4(clip(v_color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}\n#else\nvoid draw()\n{\nhighp vec3 pos \x3d vec3(0.);\nLineData outputs \x3d buildLine(\npos,\na_id,\na_pos,\na_color,\na_offsetAndNormal.xy / 16.,\na_offsetAndNormal.zw / 16.,\na_accumulatedDistanceAndHalfWidth.x,\na_accumulatedDistanceAndHalfWidth.y / 16.,\na_segmentDirection.w,\na_tlbr,\na_segmentDirection.xy / 16.,\na_aux.x / 16.\n);\nv_id              \x3d outputs.id;\nv_color           \x3d outputs.color;\nv_normal          \x3d outputs.normal;\nv_lineHalfWidth   \x3d outputs.lineHalfWidth;\nv_opacity         \x3d outputs.opacity;\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nv_tlbr          \x3d outputs.tlbr;\nv_patternSize   \x3d outputs.patternSize;\n#endif\n#ifdef SDF\nv_lineWidthRatio \x3d outputs.lineWidthRatio;\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance \x3d outputs.accumulatedDistance;\n#endif\n#endif\ngl_Position \x3d vec4(clip(outputs.color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}\n#endif\nvoid main() {\nINIT;\ndraw();\n}"},
pie:{"pie.frag":"precision mediump float;\n#include \x3cutil/atan2.glsl\x3e\n#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/utils.glsl\x3e\n#include \x3cmaterials/icon/common.glsl\x3e\nvarying float v_size;\nvarying vec2 v_offset;\nvarying vec2 v_filteredSectorToColorId[NUMBER_OF_FIELDS];\nvarying float v_numOfEntries;\nvarying float v_maxSectorAngle;\nuniform lowp vec4 u_colors[NUMBER_OF_FIELDS];\nuniform lowp vec4 u_defaultColor;\nuniform lowp vec4 u_othersColor;\nuniform lowp vec4 u_outlineColor;\nuniform float u_donutRatio;\nuniform float u_sectorThreshold;\nstruct FilteredChartInfo {\nfloat endSectorAngle;\nint colorId;\n};\nlowp vec4 getSectorColor(in int index, in vec2 filteredSectorToColorId[NUMBER_OF_FIELDS]) {\n#if __VERSION__ \x3d\x3d 300\nmediump int colorIndex \x3d int(filteredSectorToColorId[index].y);\nreturn u_colors[colorIndex];\n#else\nmediump int colorIndex;\nfor (int i \x3d 0; i \x3c NUMBER_OF_FIELDS; ++i) {\nif (i \x3d\x3d index) {\ncolorIndex \x3d int(filteredSectorToColorId[i].y);\n}\n}\nfor (int i \x3d 0; i \x3c NUMBER_OF_FIELDS; ++i) {\nif (i \x3d\x3d colorIndex) {\nreturn u_colors[i];\n}\n}\nreturn u_colors[NUMBER_OF_FIELDS - 1];\n#endif\n}\nconst int OTHER_SECTOR_ID \x3d 255;\n#ifdef HITTEST\nvec4 getColor() {\nreturn v_color;\n}\n#else\nvec4 getColor() {\nfloat angle \x3d 90.0 - C_RAD_TO_DEG * atan2(v_offset.y, v_offset.x);\nif (angle \x3c 0.0) {\nangle +\x3d 360.0;\n} else if (angle \x3e 360.0) {\nangle \x3d mod(angle, 360.0);\n}\nint numOfEntries \x3d int(v_numOfEntries);\nfloat maxSectorAngle \x3d v_maxSectorAngle;\nlowp vec4 fillColor \x3d (maxSectorAngle \x3e 0.0 || u_sectorThreshold \x3e 0.0) ? u_othersColor : u_defaultColor;\nlowp vec4 prevColor \x3d vec4(0.0);\nlowp vec4 nextColor \x3d vec4(0.0);\nfloat startSectorAngle \x3d 0.0;\nfloat endSectorAngle \x3d 0.0;\nif (angle \x3c maxSectorAngle) {\nfor (int index \x3d 0; index \x3c NUMBER_OF_FIELDS; ++index) {\nstartSectorAngle \x3d endSectorAngle;\nendSectorAngle \x3d v_filteredSectorToColorId[index].x;\nif (endSectorAngle \x3e angle) {\nfillColor \x3d getSectorColor(index, v_filteredSectorToColorId);\nprevColor \x3d u_sectorThreshold !\x3d 0.0 \x26\x26 index \x3d\x3d 0 \x26\x26 abs(360.0 - maxSectorAngle) \x3c EPSILON ? u_othersColor :\ngetSectorColor(index \x3e 0 ? index - 1 : numOfEntries - 1, v_filteredSectorToColorId);\nnextColor \x3d u_sectorThreshold !\x3d 0.0 \x26\x26 abs(endSectorAngle - maxSectorAngle) \x3c EPSILON ? u_othersColor :\ngetSectorColor(index \x3c numOfEntries - 1 ? index + 1 : 0, v_filteredSectorToColorId);\nbreak;\n}\nif (index \x3d\x3d numOfEntries - 1) {\nbreak;\n}\n}\n} else {\nprevColor \x3d getSectorColor(numOfEntries - 1, v_filteredSectorToColorId);\nnextColor \x3d getSectorColor(0, v_filteredSectorToColorId);\nstartSectorAngle \x3d maxSectorAngle;\nendSectorAngle \x3d 360.0;\n}\nlowp vec4 outlineColor \x3d u_outlineColor;\nfloat offset \x3d length(v_offset);\nfloat distanceSize \x3d offset * v_size;\nif (startSectorAngle !\x3d 0.0 || endSectorAngle !\x3d 360.0) {\nfloat distanceToStartSector \x3d (angle - startSectorAngle);\nfloat distanceToEndSector \x3d (endSectorAngle - angle);\nfloat sectorThreshold \x3d 0.6;\nfloat beginSectorAlpha \x3d smoothstep(0.0, sectorThreshold, distanceToStartSector * offset);\nfloat endSectorAlpha \x3d smoothstep(0.0, sectorThreshold, distanceToEndSector * offset);\nif (endSectorAlpha \x3e 0.0) {\nfillColor \x3d mix(nextColor, fillColor, endSectorAlpha);\n} else if (beginSectorAlpha \x3e 0.0) {\nfillColor \x3d mix(prevColor, fillColor, beginSectorAlpha);\n}\n}\nfloat donutSize \x3d u_donutRatio * (v_size - v_outlineWidth);\nfloat endOfDonut \x3d donutSize - v_outlineWidth;\nfloat aaThreshold \x3d 0.75;\nfloat innerCircleAlpha \x3d endOfDonut - aaThreshold \x3e 0.0 ? smoothstep(endOfDonut - aaThreshold, endOfDonut + aaThreshold, distanceSize) : 1.0;\nfloat outerCircleAlpha \x3d 1.0 - smoothstep(v_size - aaThreshold, v_size + aaThreshold , distanceSize);\nfloat circleAlpha \x3d innerCircleAlpha * outerCircleAlpha;\nfloat startOfOutline \x3d v_size - v_outlineWidth;\nif (startOfOutline \x3e 0.0 \x26\x26 v_outlineWidth \x3e 0.25) {\nfloat outlineFactor \x3d smoothstep(startOfOutline - aaThreshold, startOfOutline + aaThreshold, distanceSize);\nfloat innerLineFactor \x3d donutSize - aaThreshold \x3e 0.0 ? 1.0 - smoothstep(donutSize - aaThreshold, donutSize + aaThreshold , distanceSize) : 0.0;\nfillColor \x3d mix(fillColor, outlineColor, innerLineFactor + outlineFactor);\n}\nreturn v_opacity * circleAlpha * fillColor;\n}\n#endif\nvoid main()\n{\nvec4 color \x3d getColor();\n#ifdef HIGHLIGHT\ncolor.a \x3d step(1.0 / 255.0, color.a);\n#endif\ngl_FragColor \x3d color;\n}",
"pie.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_outlineColor;\nattribute vec4 a_sizeAndOutlineWidth;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nattribute vec2 a_bitSetAndDistRatio;\nattribute vec2 a_zoomRange;\nuniform float u_outlineWidth;\nuniform mediump float u_sectorThreshold;\nvarying float v_size;\nvarying vec2 v_offset;\nvarying vec2 v_filteredSectorToColorId[NUMBER_OF_FIELDS];\nvarying float v_numOfEntries;\nvarying float v_maxSectorAngle;\nstruct FilteredChartInfo {\nfloat endSectorAngle;\nint colorId;\n};\nint filter(in float sectorAngle,\nin int currentIndex,\ninout FilteredChartInfo filteredInfo,\ninout vec2 filteredSectorToColorId[NUMBER_OF_FIELDS]) {\nif (sectorAngle \x3e u_sectorThreshold * 360.0) {\nfilteredInfo.endSectorAngle +\x3d sectorAngle;\n#if __VERSION__ \x3d\x3d 300\nfilteredSectorToColorId[filteredInfo.colorId] \x3d vec2(filteredInfo.endSectorAngle, currentIndex);\n#else\nfor (int i \x3d 0; i \x3c NUMBER_OF_FIELDS; i++) {\nif (i \x3d\x3d filteredInfo.colorId) {\nfilteredSectorToColorId[i] \x3d vec2(filteredInfo.endSectorAngle, currentIndex);\n}\n}\n#endif\n++filteredInfo.colorId;\n}\nreturn 0;\n}\nint filterValues(inout vec2 filteredSectorToColorId[NUMBER_OF_FIELDS],\ninout FilteredChartInfo filteredInfo,\nin float sectorAngles[NUMBER_OF_FIELDS]) {\nfor (int index \x3d 0; index \x3c NUMBER_OF_FIELDS; ++index) {\nfloat sectorValue \x3d sectorAngles[index];\nfilter(sectorValue, index, filteredInfo, filteredSectorToColorId);\n}\nreturn filteredInfo.colorId;\n}\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/icon/common.glsl\x3e\n#include \x3cmaterials/hittest/common.glsl\x3e\nvec2 getMarkerSize(inout vec2 offset, inout vec2 baseSize, inout float outlineSize, in float referenceSize, in float bitSet) {\nvec2 outSize \x3d baseSize;\n#ifdef VV_SIZE\nfloat r \x3d 0.5 * getSize(referenceSize) / referenceSize;\noutSize.xy *\x3d r;\noffset.xy *\x3d r;\nfloat scaleSymbolProportionally \x3d getBit(bitSet, BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY);\noutlineSize *\x3d scaleSymbolProportionally * (r - 1.0) + 1.0;\n#endif\nreturn outSize;\n}\nvec3 getOffset(in vec2 in_offset, float a_bitSet) {\nfloat isMapAligned \x3d getBit(a_bitSet, BITSET_MARKER_ALIGNMENT_MAP);\nvec3  offset       \x3d vec3(in_offset, 0.0);\nreturn getMatrix(isMapAligned) * offset;\n}\nfloat filterNaNValues(in float value) {\nreturn value !\x3d NAN_MAGIC_NUMBER ? value : 0.0;\n}\nvoid main()\n{\nINIT;\nvec2  a_size   \x3d a_sizeAndOutlineWidth.xy * a_sizeAndOutlineWidth.xy / 128.0;\nvec2  a_offset \x3d a_vertexOffset / 16.0;\nfloat outlineSize \x3d u_outlineWidth;\nfloat a_bitSet \x3d a_bitSetAndDistRatio.x;\nvec2 size \x3d getMarkerSize(a_offset, a_size, outlineSize, a_sizeAndOutlineWidth.w * a_sizeAndOutlineWidth.w / 128.0, a_bitSet);\nfloat filterFlags \x3d getFilterFlags();\nvec3  pos         \x3d vec3(a_pos * POSITION_PRECISION, 1.0);\nv_opacity      \x3d getOpacity();\nv_id           \x3d norm(a_id);\nv_pos          \x3d u_dvsMat3 * pos + getOffset(a_offset, a_bitSet);\nv_offset       \x3d sign(a_texCoords - 0.5);\nv_size         \x3d max(size.x, size.y);\nv_outlineWidth \x3d outlineSize;\nfloat attributeData[10];\nvec4 attributeData0 \x3d getAttributeData3(a_id);\nattributeData[0] \x3d filterNaNValues(attributeData0.x);\nattributeData[1] \x3d filterNaNValues(attributeData0.y);\nattributeData[2] \x3d filterNaNValues(attributeData0.z);\nattributeData[3] \x3d filterNaNValues(attributeData0.w);\n#if (NUMBER_OF_FIELDS \x3e 4)\nvec4 attributeData1 \x3d getAttributeData4(a_id);\nattributeData[4] \x3d filterNaNValues(attributeData1.x);\nattributeData[5] \x3d filterNaNValues(attributeData1.y);\nattributeData[6] \x3d filterNaNValues(attributeData1.z);\nattributeData[7] \x3d filterNaNValues(attributeData1.w);\n#endif\n#if (NUMBER_OF_FIELDS \x3e 8)\nvec4 attributeData2 \x3d getAttributeData5(a_id);\nattributeData[8] \x3d filterNaNValues(attributeData2.x);\nattributeData[9] \x3d filterNaNValues(attributeData2.y);\n#endif\nfloat sum \x3d 0.0;\nfor (int i \x3d 0; i \x3c NUMBER_OF_FIELDS; ++i) {\nsum +\x3d attributeData[i];\n}\nfloat sectorAngles[NUMBER_OF_FIELDS];\nfor (int i \x3d 0; i \x3c NUMBER_OF_FIELDS; ++i) {\nsectorAngles[i] \x3d 360.0 * attributeData[i] / sum;\n}\nvec2 filteredSectorToColorId[NUMBER_OF_FIELDS];\nFilteredChartInfo filteredInfo \x3d FilteredChartInfo(0.0, 0);\nint numOfEntries \x3d filterValues(filteredSectorToColorId, filteredInfo, sectorAngles);\nv_numOfEntries \x3d float(numOfEntries);\nv_maxSectorAngle \x3d filteredInfo.endSectorAngle;\n#if __VERSION__ \x3d\x3d 300\nv_filteredSectorToColorId \x3d filteredSectorToColorId;\n#else\nfor (int i \x3d 0; i \x3c NUMBER_OF_FIELDS; ++i) {\nif (i \x3d\x3d numOfEntries) {\nbreak;\n}\nv_filteredSectorToColorId[i] \x3d filteredSectorToColorId[i];\n}\n#endif\n#ifdef HITTEST\nhighp vec3 out_pos \x3d vec3(0.0);\nv_color            \x3d vec4(0.0);\nhittestMarker(v_color, out_pos, u_viewMat3 * u_tileMat3 *  pos, v_size);\ngl_PointSize \x3d 1.0;\ngl_Position \x3d vec4(clip(v_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\ngl_Position \x3d vec4(clip(v_color, v_pos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},
shared:{line:{"common.glsl":"#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) \x26\x26 defined(PATTERN)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_sampleAlphaOnly;\n#endif\nstruct LineData {\nlowp vec4 color;\nmediump vec2 normal;\nmediump float lineHalfWidth;\nlowp float opacity;\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nmediump vec4 tlbr;\nmediump vec2 patternSize;\n#endif\n#ifdef SDF\nmediump float lineWidthRatio;\n#endif\n#if defined(PATTERN) || defined(SDF)\nhighp float accumulatedDistance;\n#endif\n#endif\nhighp vec3 id;\n};",
"line.frag":"uniform lowp float u_blur;\n#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) \x26\x26 !defined(HIGHLIGHT)\n#if defined(PATTERN) || defined(SDF)\nuniform sampler2D u_texture;\nuniform highp float u_pixelRatio;\n#endif\n#endif\n#if defined(SDF) \x26\x26 !defined(HIGHLIGHT) \x26\x26 !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nlowp vec4 getLineColor(LineData line) {\nmediump float adjustedPatternWidth \x3d line.patternSize.x * 2.0 * line.lineWidthRatio;\nmediump float relativeTexX \x3d fract(line.accumulatedDistance / adjustedPatternWidth);\nmediump float relativeTexY \x3d 0.5 + 0.25 * line.normal.y;\nmediump vec2 texCoord \x3d mix(line.tlbr.xy, line.tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist \x3d d * line.lineHalfWidth;\nreturn line.opacity * clamp(0.5 - dist, 0.0, 1.0) * line.color;\n}\n#elif defined(PATTERN) \x26\x26 !defined(HIGHLIGHT) \x26\x26 !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nlowp vec4 getLineColor(LineData line) {\nmediump float lineHalfWidth \x3d line.lineHalfWidth;\nmediump float adjustedPatternWidth \x3d line.patternSize.x * 2.0 * lineHalfWidth / line.patternSize.y;\nmediump float relativeTexX \x3d fract(line.accumulatedDistance / adjustedPatternWidth);\nmediump float relativeTexY \x3d 0.5 + 0.5 * line.normal.y;\nmediump vec2 texCoord \x3d mix(line.tlbr.xy, line.tlbr.zw, vec2(relativeTexY, relativeTexX));\nlowp vec4 color \x3d texture2D(u_texture, texCoord);\n#ifdef VV_COLOR\nif (v_sampleAlphaOnly \x3e 0.5) {\ncolor.rgb \x3d vec3(color.a);\n}\n#endif\nreturn line.opacity * line.color * color;\n}\n#else\nlowp vec4 getLineColor(LineData line) {\nreturn line.opacity * line.color;\n}\n#endif\nvec4 shadeLine(LineData line)\n{\nmediump float thinLineFactor \x3d max(THIN_LINE_WIDTH_FACTOR * step(line.lineHalfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nmediump float fragDist \x3d length(line.normal) * line.lineHalfWidth;\nlowp float alpha \x3d clamp(thinLineFactor * (line.lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\nlowp vec4 out_color \x3d getLineColor(line) * alpha;\n#ifdef HIGHLIGHT\nout_color.a \x3d step(1.0 / 255.0, out_color.a);\n#endif\n#ifdef ID\nif (out_color.a \x3c 1.0 / 255.0) {\ndiscard;\n}\nout_color \x3d vec4(line.id, 0.0);\n#endif\nreturn out_color;\n}",
"line.vert":"float getBaseLineHalfWidth(in float lineHalfWidth, in float referenceHalfWidth) {\n#ifdef VV_SIZE\nfloat refLineWidth \x3d 2.0 * referenceHalfWidth;\nreturn 0.5 * (lineHalfWidth / max(referenceHalfWidth, EPSILON)) * getSize(refLineWidth);\n#else\nreturn lineHalfWidth;\n#endif\n}\nfloat getLineHalfWidth(in float baseWidth, in float aa) {\nfloat halfWidth \x3d max(baseWidth + aa, 0.45) + 0.1 * aa;\n#ifdef HIGHLIGHT\nhalfWidth \x3d max(halfWidth, 2.0);\n#endif\nreturn halfWidth;\n}\nvec2 getDist(in vec2 offset, in float halfWidth) {\nfloat thinLineFactor \x3d max(THIN_LINE_WIDTH_FACTOR * step(halfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nreturn thinLineFactor * halfWidth * offset;\n}\nLineData buildLine(\nout vec3 out_pos,\nin vec3 in_id,\nin vec2 in_pos,\nin vec4 in_color,\nin vec2 in_offset,\nin vec2 in_normal,\nin float in_accumulatedDist,\nin float in_lineHalfWidth,\nin float in_bitSet,\nin vec4 in_tlbr,\nin vec2 in_segmentDirection,\nin float in_referenceHalfWidth\n)\n{\nfloat aa        \x3d 0.5 * u_antialiasing;\nfloat baseWidth \x3d getBaseLineHalfWidth(in_lineHalfWidth, in_referenceHalfWidth);\nfloat halfWidth \x3d getLineHalfWidth(baseWidth, aa);\nfloat z         \x3d 2.0 * step(baseWidth, 0.0);\nvec2  dist      \x3d getDist(in_offset, halfWidth);\nvec3  offset    \x3d u_displayViewMat3 * vec3(dist, 0.0);\nvec3  pos       \x3d u_dvsMat3 * vec3(in_pos * POSITION_PRECISION, 1.0) + offset;\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nvec4  color     \x3d in_color;\nfloat opacity   \x3d 1.0;\n#else\nvec4  color     \x3d getColor(in_color, in_bitSet, BITSET_GENERIC_LOCK_COLOR);\nfloat opacity   \x3d getOpacity();\n#ifdef SDF\nconst float SDF_PATTERN_HALF_WIDTH \x3d 15.5;\nfloat scaleDash \x3d getBit(in_bitSet, BITSET_LINE_SCALE_DASH);\nfloat lineWidthRatio \x3d (scaleDash * max(halfWidth - 0.55 * u_antialiasing, 0.25) + (1.0 - scaleDash)) / SDF_PATTERN_HALF_WIDTH;\n#endif\n#endif\n#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) \x26\x26 defined(PATTERN)\nv_sampleAlphaOnly \x3d getBit(in_bitSet, BITSET_GENERIC_CONSIDER_ALPHA_ONLY);\n#endif\nout_pos \x3d vec3(pos.xy, z);\nreturn LineData(\ncolor,\nin_normal,\nhalfWidth,\nopacity,\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nin_tlbr / u_mosaicSize.xyxy,\nvec2(in_tlbr.z - in_tlbr.x, in_tlbr.w - in_tlbr.y),\n#endif\n#ifdef SDF\nlineWidthRatio,\n#endif\n#if defined(PATTERN) || defined(SDF)\nin_accumulatedDist * u_zoomFactor + dot(in_segmentDirection, dist),\n#endif\n#endif\nnorm(in_id)\n);\n}"}},
"symbologyTypeUtils.glsl":"#if SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_OUTLINE_FILL || SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_OUTLINE_FILL_SIMPLE\n#define SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#endif\n#if SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_SIMPLE || SYMBOLOGY_TYPE \x3d\x3d SYMBOLOGY_TYPE_OUTLINE_FILL_SIMPLE\n#define SYMBOLOGY_TYPE_IS_SIMPLE_LIKE\n#endif",text:{"common.glsl":"uniform highp vec2 u_mosaicSize;\nvarying highp vec3 v_id;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nvarying lowp vec4 v_color;\nvarying highp vec2 v_tex;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying lowp float v_transparency;",
"hittest.glsl":"#include \x3cmaterials/hittest/common.glsl\x3e","text.frag":"precision mediump float;\n#include \x3cmaterials/text/common.glsl\x3e\nuniform lowp sampler2D u_texture;\n#ifdef HITTEST\nvec4 getColor() {\nreturn v_color;\n}\n#else\nvec4 getColor()\n{\nfloat SDF_CUTOFF \x3d (2.0 / 8.0);\nfloat SDF_BASE_EDGE_DIST \x3d 1.0 - SDF_CUTOFF;\nlowp float dist \x3d texture2D(u_texture, v_tex).a;\nmediump float edge \x3d SDF_BASE_EDGE_DIST - v_edgeDistanceOffset;\n#ifdef HIGHLIGHT\nedge /\x3d 2.0;\n#endif\nlowp float aa \x3d v_antialiasingWidth;\nlowp float alpha \x3d smoothstep(edge - aa, edge + aa, dist);\nreturn alpha * v_color * v_opacity;\n}\n#endif\nvoid main()\n{\ngl_FragColor \x3d getColor();\n}",
"text.vert":"precision highp float;\n#include \x3cmaterials/utils.glsl\x3e\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/text/common.glsl\x3e\n#include \x3cmaterials/text/hittest.glsl\x3e\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texFontSize;\nattribute vec4 a_aux;\nattribute vec2 a_zoomRange;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHalo;\nfloat getTextSize(inout vec2 offset, inout float baseSize, in float referenceSize) {\n#ifdef VV_SIZE\nfloat r \x3d getSize(referenceSize) / referenceSize;\nbaseSize *\x3d r;\noffset.xy *\x3d r;\nreturn baseSize;\n#endif\nreturn baseSize;\n}\nvoid main()\n{\nINIT;\nfloat a_referenceSize \x3d a_aux.z * a_aux.z / 256.0;\nfloat a_bitSet        \x3d a_aux.w;\nfloat a_fontSize      \x3d a_texFontSize.z;\nvec2  a_offset        \x3d a_vertexOffset * OFFSET_PRECISION;\nvec3  in_pos        \x3d vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat fontSize      \x3d getTextSize(a_offset, a_fontSize, a_referenceSize);\nfloat fontScale     \x3d fontSize / SDF_FONT_SIZE;\nvec3  offset        \x3d getRotation() * vec3(a_offset, 0.0);\nmat3  extrudeMatrix \x3d getBit(a_bitSet, 0) \x3d\x3d 1.0 ? u_displayViewMat3 : u_displayMat3;\nv_color   \x3d u_isHalo * a_haloColor + (1.0 - u_isHalo) * getColor(a_color, a_bitSet, 1);\nv_opacity \x3d getOpacity();\nv_id      \x3d norm(a_id);\nv_tex     \x3d a_texCoords / u_mosaicSize;\nv_pos     \x3d u_dvsMat3 * in_pos + extrudeMatrix * offset;\nv_edgeDistanceOffset \x3d u_isHalo * OUTLINE_SCALE * a_texFontSize.w / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  \x3d 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\n#ifdef HITTEST\nhighp vec3 out_pos  \x3d vec3(0.);\nv_color \x3d vec4(0.);\nhittestMarker(v_color, out_pos, u_viewMat3 * u_tileMat3 *  vec3(a_pos * POSITION_PRECISION, 1.0)\n+ u_tileMat3 * offset, fontSize / 2.);\ngl_PointSize \x3d 1.;\ngl_Position \x3d vec4(clip(v_color, out_pos, getFilterFlags(), a_zoomRange), 1.0);\n#else\ngl_Position \x3d  vec4(clip(v_color, v_pos, getFilterFlags(), a_zoomRange), 1.0);\n#endif\n}"},
"utils.glsl":"float rshift(in float u32, in int amount) {\nreturn floor(u32 / pow(2.0, float(amount)));\n}\nfloat getBit(in float bitset, in int bitIndex) {\nfloat offset \x3d pow(2.0, float(bitIndex));\nreturn mod(floor(bitset / offset), 2.0);\n}\nfloat getFilterBit(in float bitset, in int bitIndex) {\nreturn getBit(bitset, bitIndex + 1);\n}\nfloat getHighlightBit(in float bitset) {\nreturn getBit(bitset, 0);\n}\nhighp vec3 unpackDisplayIdTexel(in highp vec3 bitset) {\nfloat isAggregate \x3d getBit(bitset.b, 7);\nreturn (1.0 - isAggregate) * bitset + isAggregate * (vec3(bitset.rgb) - vec3(0.0, 0.0, float(0x80)));\n}\nvec4 unpack(in float u32) {\nfloat r \x3d mod(rshift(u32, 0), 255.0);\nfloat g \x3d mod(rshift(u32, 8), 255.0);\nfloat b \x3d mod(rshift(u32, 16), 255.0);\nfloat a \x3d mod(rshift(u32, 24), 255.0);\nreturn vec4(r, g, b, a);\n}\nvec3 norm(in vec3 v) {\nreturn v /\x3d 255.0;\n}\nvec4 norm(in vec4 v) {\nreturn v /\x3d 255.0;\n}\nfloat max4(vec4 target) {\nreturn max(max(max(target.x, target.y), target.z), target.w);\n}\nvec2 unpack_u8_nf32(vec2 bytes) {\nreturn (bytes - 127.0) / 127.0;\n}\nhighp float rand(in vec2 co) {\nhighp float a \x3d 12.9898;\nhighp float b \x3d 78.233;\nhighp float c \x3d 43758.5453;\nhighp float dt \x3d dot(co, vec2(a,b));\nhighp float sn \x3d mod(dt, 3.14);\nreturn fract(sin(sn) * c);\n}",
"vcommon.glsl":"#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/utils.glsl\x3e\n#include \x3cmaterials/attributeData.glsl\x3e\n#include \x3cmaterials/vv.glsl\x3e\n#include \x3cmaterials/barycentric.glsl\x3e\nattribute vec2 a_pos;\nattribute highp vec3 a_id;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform highp mat3 u_tileMat3;\nuniform highp mat3 u_viewMat3;\nuniform highp float u_pixelRatio;\nuniform mediump float u_zoomFactor;\nuniform mediump float u_antialiasing;\nuniform mediump float u_currentZoom;\nvec4 VV_ADATA \x3d vec4(0.0);\nvoid loadVisualVariableData(inout vec4 target) {\n#ifdef SUPPORTS_TEXTURE_FLOAT\ntarget.rgba \x3d getAttributeData2(a_id);\n#else\nvec4 data0 \x3d getAttributeData2(a_id);\nvec4 data1 \x3d getAttributeData3(a_id);\ntarget.r \x3d u88VVToFloat(data0.rg * 255.0);\ntarget.g \x3d u88VVToFloat(data0.ba * 255.0);\ntarget.b \x3d u88VVToFloat(data1.rg * 255.0);\ntarget.a \x3d u88VVToFloat(data1.ba * 255.0);\n#endif\n}\n#ifdef VV\n#define INIT loadVisualVariableData(VV_ADATA)\n#else\n#define INIT\n#endif\nvec4 getColor(in vec4 a_color, in float a_bitSet, int index) {\n#ifdef VV_COLOR\nfloat isColorLocked   \x3d getBit(a_bitSet, index);\nreturn getVVColor(VV_ADATA[ATTR_VV_COLOR], a_color, isColorLocked);\n#else\nreturn a_color;\n#endif\n}\nfloat getOpacity() {\n#ifdef VV_OPACITY\nreturn getVVOpacity(VV_ADATA[ATTR_VV_OPACITY]);\n#else\nreturn 1.0;\n#endif\n}\nfloat getSize(in float in_size) {\n#ifdef VV_SIZE\nreturn getVVSize(in_size, VV_ADATA[ATTR_VV_SIZE]);\n#else\nreturn in_size;\n#endif\n}\nmat3 getRotation() {\n#ifdef VV_ROTATION\nreturn getVVRotationMat3(mod(VV_ADATA[ATTR_VV_ROTATION], 360.0));\n#else\nreturn mat3(1.0);\n#endif\n}\nfloat getFilterFlags() {\n#ifdef IGNORES_SAMPLER_PRECISION\nreturn ceil(getAttributeData0(a_id).x * 255.0);\n#else\nreturn getAttributeData0(a_id).x * 255.0;\n#endif\n}\nvec4 getAnimationState() {\nreturn getAttributeData1(a_id);\n}\nfloat getMinZoom() {\nvec4 data0 \x3d getAttributeData0(a_id) * 255.0;\nreturn data0.g;\n}\nmat3 getMatrixNoDisplay(float isMapAligned) {\nreturn isMapAligned * u_viewMat3 * u_tileMat3 + (1.0 - isMapAligned) * u_tileMat3;\n}\nmat3 getMatrix(float isMapAligned) {\nreturn isMapAligned * u_displayViewMat3 + (1.0 - isMapAligned) * u_displayMat3;\n}\nvec3 clip(inout vec4 color, inout vec3 pos, in float filterFlags, in vec2 minMaxZoom) {\npos.z +\x3d 2.0 * (1.0 - getFilterBit(filterFlags, 0));\n#ifdef INSIDE\npos.z +\x3d 2.0 * (1.0 - getFilterBit(filterFlags, 1));\n#elif defined(OUTSIDE)\npos.z +\x3d 2.0 * getFilterBit(filterFlags, 1);\n#elif defined(HIGHLIGHT)\n#if !defined(HIGHLIGHT_ALL)\npos.z +\x3d 2.0 * (1.0 - getHighlightBit(filterFlags));\n#endif\n#endif\npos.z +\x3d 2.0 * (step(minMaxZoom.y, u_currentZoom) + (1.0 - step(minMaxZoom.x, u_currentZoom)));\nreturn pos;\n}",
"vv.glsl":"#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n#define VV_SIZE\n#endif\n#if defined(VV_COLOR) || defined(VV_SIZE) || defined(VV_OPACITY) || defined(VV_ROTATION)\n#define VV\n#endif\n#ifdef VV_COLOR\nuniform highp float u_vvColorValues[8];\nuniform vec4 u_vvColors[8];\n#endif\n#ifdef VV_SIZE_MIN_MAX_VALUE\nuniform highp vec4 u_vvSizeMinMaxValue;\n#endif\n#ifdef VV_SIZE_SCALE_STOPS\nuniform highp float u_vvSizeScaleStopsValue;\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nuniform highp float u_vvSizeFieldStopsValues[6];\nuniform float u_vvSizeFieldStopsSizes[6];\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nuniform highp float u_vvSizeUnitValueWorldToPixelsRatio;\n#endif\n#ifdef VV_OPACITY\nuniform highp float u_vvOpacityValues[8];\nuniform float u_vvOpacities[8];\n#endif\n#ifdef VV_ROTATION\nuniform lowp float u_vvRotationType;\n#endif\nbool isNan(float val) {\nreturn (val \x3d\x3d NAN_MAGIC_NUMBER);\n}\n#ifdef VV_SIZE_MIN_MAX_VALUE\nfloat getVVMinMaxSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nfloat interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\ninterpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\nreturn u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\n}\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nconst int VV_SIZE_N \x3d 6;\nfloat getVVStopsSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nif (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\nreturn u_vvSizeFieldStopsSizes[0];\n}\nfor (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\nif (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\nfloat f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\nreturn mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\n}\n}\nreturn u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\n}\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nfloat getVVUnitValue(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nreturn u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\n}\n#endif\n#ifdef VV_OPACITY\nconst int VV_OPACITY_N \x3d 8;\nfloat getVVOpacity(float opacityValue) {\nif (isNan(opacityValue)) {\nreturn 1.0;\n}\nif (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\nreturn u_vvOpacities[0];\n}\nfor (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\nif (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\nfloat f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\nreturn mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\n}\n}\nreturn u_vvOpacities[VV_OPACITY_N - 1];\n}\n#endif\n#ifdef VV_ROTATION\nmat4 getVVRotation(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat4(1, 0, 0, 0,\n0, 1, 0, 0,\n0, 0, 1, 0,\n0, 0, 0, 1);\n}\nfloat rotation \x3d rotationValue;\nif (u_vvRotationType \x3d\x3d 1.0) {\nrotation \x3d 90.0 - rotation;\n}\nfloat angle \x3d C_DEG_TO_RAD * rotation;\nfloat sinA \x3d sin(angle);\nfloat cosA \x3d cos(angle);\nreturn mat4(cosA, sinA, 0, 0,\n-sinA,  cosA, 0, 0,\n0,     0, 1, 0,\n0,     0, 0, 1);\n}\nmat3 getVVRotationMat3(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat3(1, 0, 0,\n0, 1, 0,\n0, 0, 1);\n}\nfloat rotation \x3d rotationValue;\nif (u_vvRotationType \x3d\x3d 1.0) {\nrotation \x3d 90.0 - rotation;\n}\nfloat angle \x3d C_DEG_TO_RAD * -rotation;\nfloat sinA \x3d sin(angle);\nfloat cosA \x3d cos(angle);\nreturn mat3(cosA, -sinA, 0,\nsinA, cosA, 0,\n0,    0,    1);\n}\n#endif\n#ifdef VV_COLOR\nconst int VV_COLOR_N \x3d 8;\nvec4 getVVColor(float colorValue, vec4 fallback, float isColorLocked) {\nif (isNan(colorValue) || isColorLocked \x3d\x3d 1.0) {\nreturn fallback;\n}\nif (colorValue \x3c\x3d u_vvColorValues[0]) {\nreturn u_vvColors[0];\n}\nfor (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\nif (u_vvColorValues[i] \x3e\x3d colorValue) {\nfloat f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\nreturn mix(u_vvColors[i-1], u_vvColors[i], f);\n}\n}\nreturn u_vvColors[VV_COLOR_N - 1];\n}\n#endif\nfloat getVVSize(in float size, in float vvSize)  {\n#ifdef VV_SIZE_MIN_MAX_VALUE\nreturn getVVMinMaxSize(vvSize, size);\n#elif defined(VV_SIZE_SCALE_STOPS)\nreturn u_vvSizeScaleStopsValue;\n#elif defined(VV_SIZE_FIELD_STOPS)\nfloat outSize \x3d getVVStopsSize(vvSize, size);\nreturn isNan(outSize) ? size : outSize;\n#elif defined(VV_SIZE_UNIT_VALUE)\nreturn getVVUnitValue(vvSize, size);\n#else\nreturn size;\n#endif\n}"},
overlay:{overlay:{"overlay.frag":"precision lowp float;\nuniform lowp sampler2D u_texture;\nuniform lowp float u_opacity;\nvarying mediump vec2 v_uv;\nvoid main() {\nvec4 color \x3d texture2D(u_texture, v_uv);\ngl_FragColor \x3d color *  u_opacity;\n}","overlay.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_uv;\nuniform highp mat3 u_dvsMat3;\nvarying mediump vec2 v_uv;\nvoid main(void) {\nv_uv \x3d a_uv;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0);\ngl_Position \x3d vec4(pos.xy, 0.0, 1.0);\n}"}},
"post-processing":{blit:{"blit.frag":"precision mediump float;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\ngl_FragColor \x3d texture2D(u_texture, v_uv);\n}"},bloom:{composite:{"composite.frag":"precision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D u_blurTexture1;\nuniform sampler2D u_blurTexture2;\nuniform sampler2D u_blurTexture3;\nuniform sampler2D u_blurTexture4;\nuniform sampler2D u_blurTexture5;\nuniform float u_bloomStrength;\nuniform float u_bloomRadius;\nuniform float u_bloomFactors[NUMMIPS];\nuniform vec3 u_bloomTintColors[NUMMIPS];\nfloat lerpBloomFactor(const in float factor) {\nfloat mirrorFactor \x3d 1.2 - factor;\nreturn mix(factor, mirrorFactor, u_bloomRadius);\n}\nvoid main() {\ngl_FragColor \x3d u_bloomStrength * (\nlerpBloomFactor(u_bloomFactors[0]) * vec4(u_bloomTintColors[0], 1.0) * texture2D(u_blurTexture1, v_uv) +\nlerpBloomFactor(u_bloomFactors[1]) * vec4(u_bloomTintColors[1], 1.0) * texture2D(u_blurTexture2, v_uv) +\nlerpBloomFactor(u_bloomFactors[2]) * vec4(u_bloomTintColors[2], 1.0) * texture2D(u_blurTexture3, v_uv) +\nlerpBloomFactor(u_bloomFactors[3]) * vec4(u_bloomTintColors[3], 1.0) * texture2D(u_blurTexture4, v_uv) +\nlerpBloomFactor(u_bloomFactors[4]) * vec4(u_bloomTintColors[4], 1.0) * texture2D(u_blurTexture5, v_uv)\n);\n}"},
gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\n#define SIGMA RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize \x3d 1.0 / u_texSize;\nfloat fSigma \x3d float(SIGMA);\nfloat weightSum \x3d gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum \x3d texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i \x3d 1; i \x3c KERNEL_RADIUS; i ++) {\nfloat x \x3d float(i);\nfloat w \x3d gaussianPdf(x, fSigma);\nvec2 uvOffset \x3d u_direction * invSize * x;\nvec4 sample1 \x3d texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 \x3d texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum +\x3d (sample1 + sample2) * w;\nweightSum +\x3d 2.0 * w;\n}\ngl_FragColor \x3d pixelColorSum /weightSum;\n}"},
luminosityHighPass:{"luminosityHighPass.frag":"precision mediump float;\nuniform sampler2D u_texture;\nuniform vec3 u_defaultColor;\nuniform float u_defaultOpacity;\nuniform float u_luminosityThreshold;\nuniform float u_smoothWidth;\nvarying vec2 v_uv;\nvoid main() {\nvec4 texel \x3d texture2D(u_texture, v_uv);\nvec3 luma \x3d vec3(0.299, 0.587, 0.114);\nfloat v \x3d dot(texel.xyz, luma);\nvec4 outputColor \x3d vec4(u_defaultColor.rgb, u_defaultOpacity);\nfloat alpha \x3d smoothstep(u_luminosityThreshold, u_luminosityThreshold + u_smoothWidth, v);\ngl_FragColor \x3d mix(outputColor, texel, alpha);\n}"}},
blur:{gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nuniform float u_sigma;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize \x3d 1.0 / u_texSize;\nfloat fSigma \x3d u_sigma;\nfloat weightSum \x3d gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum \x3d texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i \x3d 1; i \x3c KERNEL_RADIUS; i ++) {\nfloat x \x3d float(i);\nfloat w \x3d gaussianPdf(x, fSigma);\nvec2 uvOffset \x3d u_direction * invSize * x;\nvec4 sample1 \x3d texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 \x3d texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum +\x3d (sample1 + sample2) * w;\nweightSum +\x3d 2.0 * w;\n}\ngl_FragColor \x3d pixelColorSum /weightSum;\n}"},
"radial-blur":{"radial-blur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nconst float sampleDist \x3d 1.0;\nconst float sampleStrength \x3d 2.2;\nvoid main(void) {\nfloat samples[10];\nsamples[0] \x3d -0.08;\nsamples[1] \x3d -0.05;\nsamples[2] \x3d -0.03;\nsamples[3] \x3d -0.02;\nsamples[4] \x3d -0.01;\nsamples[5] \x3d  0.01;\nsamples[6] \x3d  0.02;\nsamples[7] \x3d  0.03;\nsamples[8] \x3d  0.05;\nsamples[9] \x3d  0.08;\nvec2 dir \x3d 0.5 - v_uv;\nfloat dist \x3d sqrt(dir.x * dir.x + dir.y * dir.y);\ndir \x3d dir / dist;\nvec4 color \x3d texture2D(u_colorTexture,v_uv);\nvec4 sum \x3d color;\nfor (int i \x3d 0; i \x3c 10; i++) {\nsum +\x3d texture2D(u_colorTexture, v_uv + dir * samples[i] * sampleDist);\n}\nsum *\x3d 1.0 / 11.0;\nfloat t \x3d dist * sampleStrength;\nt \x3d clamp(t, 0.0, 1.0);\ngl_FragColor \x3d mix(color, sum, t);\n}"}},
dra:{"dra.frag":"precision mediump float;\nuniform sampler2D u_minColor;\nuniform sampler2D u_maxColor;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\nvec4 minColor \x3d texture2D(u_minColor, vec2(0.5));\nvec4 maxColor \x3d texture2D(u_maxColor, vec2(0.5));\nvec4 color \x3d texture2D(u_texture, v_uv);\nvec3 minColorUnpremultiply \x3d minColor.rgb / minColor.a;\nvec3 maxColorUnpremultiply \x3d maxColor.rgb / maxColor.a;\nvec3 colorUnpremultiply \x3d color.rgb / color.a;\nvec3 range \x3d maxColorUnpremultiply - minColorUnpremultiply;\ngl_FragColor \x3d vec4(color.a * (colorUnpremultiply - minColorUnpremultiply) / range, color.a);\n}",
"min-max":{"min-max.frag":"#extension GL_EXT_draw_buffers : require\nprecision mediump float;\n#define CELL_SIZE 2\nuniform sampler2D u_minTexture;\nuniform sampler2D u_maxTexture;\nuniform vec2 u_srcResolution;\nuniform vec2 u_dstResolution;\nvarying vec2 v_uv;\nvoid main() {\nvec2 srcPixel \x3d floor(gl_FragCoord.xy) * float(CELL_SIZE);\nvec2 onePixel \x3d vec2(1.0) / u_srcResolution;\nvec2 uv \x3d (srcPixel + 0.5) / u_srcResolution;\nvec4 minColor \x3d vec4(1.0);\nvec4 maxColor \x3d vec4(0.0);\nfor (int y \x3d 0; y \x3c CELL_SIZE; ++y) {\nfor (int x \x3d 0; x \x3c CELL_SIZE; ++x) {\nvec2 offset \x3d uv + vec2(x, y) * onePixel;\nminColor \x3d min(minColor, texture2D(u_minTexture, offset));\nmaxColor \x3d max(maxColor, texture2D(u_maxTexture, offset));\n}\n}\ngl_FragData[0] \x3d minColor;\ngl_FragData[1] \x3d maxColor;\n}"}},
"drop-shadow":{composite:{"composite.frag":"precision mediump float;\nuniform sampler2D u_layerFBOTexture;\nuniform sampler2D u_blurTexture;\nuniform vec4 u_shadowColor;\nuniform vec2 u_shadowOffset;\nuniform highp mat3 u_displayViewMat3;\nvarying vec2 v_uv;\nvoid main() {\nvec3 offset \x3d u_displayViewMat3 * vec3(u_shadowOffset, 0.0);\nvec4 layerColor \x3d texture2D(u_layerFBOTexture, v_uv);\nvec4 blurColor \x3d texture2D(u_blurTexture, v_uv - offset.xy / 2.0);\ngl_FragColor \x3d ((1.0 - layerColor.a) * blurColor.a * u_shadowColor + layerColor);\n}"}},
"edge-detect":{"frei-chen":{"frei-chen.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nvarying vec2 v_uv;\nvec2 texel \x3d vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[9];\nconst mat3 g0 \x3d mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );\nconst mat3 g1 \x3d mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );\nconst mat3 g2 \x3d mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );\nconst mat3 g3 \x3d mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );\nconst mat3 g4 \x3d mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );\nconst mat3 g5 \x3d mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );\nconst mat3 g6 \x3d mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );\nconst mat3 g7 \x3d mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );\nconst mat3 g8 \x3d mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );\nvoid main() {\nG[0] \x3d g0,\nG[1] \x3d g1,\nG[2] \x3d g2,\nG[3] \x3d g3,\nG[4] \x3d g4,\nG[5] \x3d g5,\nG[6] \x3d g6,\nG[7] \x3d g7,\nG[8] \x3d g8;\nmat3 I;\nfloat cnv[9];\nvec3 sample;\nfor (float i \x3d 0.0; i \x3c 3.0; i++) {\nfor (float j \x3d 0.0; j \x3c 3.0; j++) {\nsample \x3d texture2D(u_colorTexture, v_uv + texel * vec2(i - 1.0,j - 1.0)).rgb;\nI[int(i)][int(j)] \x3d length(sample);\n}\n}\nfor (int i \x3d 0; i \x3c 9; i++) {\nfloat dp3 \x3d dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] \x3d dp3 * dp3;\n}\nfloat M \x3d (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);\nfloat S \x3d (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);\ngl_FragColor \x3d vec4(vec3(sqrt(M / S)), texture2D(u_colorTexture, v_uv).a);\n}"},
sobel:{"sobel.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel \x3d vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 \x3d mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );\nconst mat3 g1 \x3d mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] \x3d g0;\nG[1] \x3d g1;\nfor (float i \x3d 0.0; i \x3c 3.0; i++) {\nfor (float j \x3d 0.0; j \x3c 3.0; j++) {\nsample \x3d texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] \x3d length(sample);\n}\n}\nfor (int i \x3d 0; i \x3c 2; i++) {\nfloat dp3 \x3d dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] \x3d dp3 * dp3;\n}\ngl_FragColor \x3d vec4(vec3(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1])), texture2D(u_colorTexture, v_uv).a);\n}"}},
"edge-enhance":{"edge-enhance.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel \x3d vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 \x3d mat3( 1.0, 0.0, -1.0, 1.0, 0.0, -1.0, 1.0, 0.0, -1.0 );\nconst mat3 g1 \x3d mat3( 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, -1.0, -1.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] \x3d g0;\nG[1] \x3d g1;\nfor (float i \x3d 0.0; i \x3c 3.0; i++) {\nfor (float j \x3d 0.0; j \x3c 3.0; j++) {\nsample \x3d texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] \x3d length(sample);\n}\n}\nfor (int i \x3d 0; i \x3c 2; i++) {\nfloat dp3 \x3d dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] \x3d dp3 * dp3;\n}\nvec4 color \x3d texture2D(u_colorTexture, v_uv);\ngl_FragColor \x3d vec4(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1]) * color);\n}"},
filterEffect:{"filterEffect.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform mat4 u_coefficients;\nvarying vec2 v_uv;\nvoid main() {\nvec4 color \x3d texture2D(u_colorTexture, v_uv);\nvec4 rgbw \x3d u_coefficients * vec4(color.a \x3e 0.0 ? color.rgb / color.a : vec3(0.0), 1.0);\nfloat a \x3d color.a;\ngl_FragColor \x3d vec4(a * rgbw.rgb, a);\n}"},pp:{"pp.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying vec2 v_uv;\nvoid main() {\ngl_Position \x3d vec4(a_position, 0.0, 1.0);\nv_uv \x3d (a_position + 1.0) / 2.0;\n}"}},
raster:{bitmap:{"bitmap.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform highp vec2 u_coordScale;\nuniform lowp float u_opacity;\n#include \x3cfiltering/bicubic.glsl\x3e\nvoid main() {\n#ifdef BICUBIC\nvec4 color \x3d sampleBicubicBSpline(u_texture, v_texcoord, u_coordScale);\n#else\nvec4 color \x3d texture2D(u_texture, v_texcoord);\n#endif\nfloat alpha \x3d u_opacity * color.a;\ngl_FragColor \x3d vec4(alpha * color.rgb, alpha);\n}","bitmap.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord \x3d a_pos;\ngl_Position \x3d vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"},
common:{"common.glsl":"uniform sampler2D u_image;\nuniform int u_bandCount;\nuniform bool u_flipY;\nuniform float u_opacity;\nuniform int u_resampling;\nuniform vec2 u_srcImageSize;\n#ifdef APPLY_PROJECTION\n#include \x3craster/common/projection.glsl\x3e\n#endif\n#ifdef BICUBIC\n#include \x3cfiltering/bicubic.glsl\x3e\n#endif\n#ifdef BILINEAR\n#include \x3cfiltering/bilinear.glsl\x3e\n#endif\nvec2 getPixelLocation(vec2 coords) {\nvec2 targetLocation \x3d u_flipY ? vec2(coords.s, 1.0 - coords.t) : coords;\n#ifdef APPLY_PROJECTION\ntargetLocation \x3d projectPixelLocation(targetLocation);\n#endif\nreturn targetLocation;\n}\nbool isOutside(vec2 coords){\nif (coords.t\x3e1.00001 ||coords.t\x3c-0.00001 || coords.s\x3e1.00001 ||coords.s\x3c-0.00001) {\nreturn true;\n} else {\nreturn false;\n}\n}\nvec4 getPixel(vec2 pixelLocation) {\n#ifdef BICUBIC\nvec4 color \x3d sampleBicubicBSpline(u_image, pixelLocation, u_srcImageSize);\n#elif defined(BILINEAR)\nvec4 color \x3d sampleBilinear(u_image, pixelLocation, u_srcImageSize);\n#else\nvec4 color \x3d texture2D(u_image, pixelLocation);\n#endif\nreturn color;\n}",
"contrastBrightness.glsl":"uniform float u_contrastOffset;\nuniform float u_brightnessOffset;\nvec4 adjustContrastBrightness(vec4 currentPixel, bool isFloat) {\nvec4 pixelValue \x3d isFloat ? currentPixel * 255.0 : currentPixel;\nfloat maxI \x3d 255.0;\nfloat mid \x3d 128.0;\nfloat c \x3d u_contrastOffset;\nfloat b \x3d u_brightnessOffset;\nvec4 v;\nif (c \x3e 0.0 \x26\x26 c \x3c 100.0) {\nv \x3d (200.0 * pixelValue - 100.0 * maxI + 2.0 * maxI * b) / (2.0 * (100.0 - c)) + mid;\n} else if (c \x3c\x3d 0.0 \x26\x26 c \x3e -100.0) {\nv \x3d (200.0 * pixelValue - 100.0 * maxI + 2.0 * maxI * b) * (100.0 + c) / 20000.0 + mid;\n} else if (c \x3d\x3d 100.0) {\nv \x3d (200.0 * pixelValue - 100.0 * maxI + (maxI + 1.0) * (100.0 - c) + 2.0 * maxI * b);\nv \x3d (sign(v) + 1.0) / 2.0;\n} else if (c \x3d\x3d -100.0) {\nv \x3d vec4(mid, mid, mid, currentPixel.a);\n}\nreturn vec4(v.r / 255.0, v.g / 255.0, v.b / 255.0, currentPixel.a);\n}",
"projection.glsl":"uniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nvec2 projectPixelLocation(vec2 coords) {\n#ifdef LOOKUP_PROJECTION\nvec4 pv \x3d texture2D(u_transformGrid, coords);\nreturn vec2(pv.r, pv.g);\n#endif\nvec2 index_image \x3d floor(coords * u_targetImageSize);\nvec2 oneTransformPixel \x3d vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform \x3d floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos \x3d fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location \x3d index_transform + oneTransformPixel * 0.5;\nif (pos.s \x3c\x3d pos.t) {\nvec4 ll_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;\n}"},
flow:{"getFadeOpacity.glsl":"uniform float u_decayRate;\nuniform float u_fadeToZero;\nfloat getFadeOpacity(float x) {\nfloat cutOff \x3d mix(0.0, exp(-u_decayRate), u_fadeToZero);\nreturn (exp(-u_decayRate * x) - cutOff) / (1.0 - cutOff);\n}","getFragmentColor.glsl":"vec4 getFragmentColor(vec4 color, float dist, float size, float featheringSize) {\nfloat featheringStart \x3d clamp(0.5 - featheringSize / size, 0.0, 0.5);\nif (dist \x3e featheringStart) {\ncolor *\x3d 1.0 - (dist - featheringStart) / (0.5 - featheringStart);\n}\nreturn color;\n}",
imagery:{"imagery.frag":"precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform float u_Min;\nuniform float u_Max;\nuniform float u_featheringSize;\n#include \x3craster/flow/vv.glsl\x3e\nfloat getIntensity(float v) {\nreturn u_Min + v * (u_Max - u_Min);\n}\nvoid main(void) {\nvec4 sampled \x3d texture2D(u_texture, v_texcoord);\nfloat intensity \x3d getIntensity(sampled.r);\ngl_FragColor \x3d getColor(intensity);\ngl_FragColor.a *\x3d getOpacity(sampled.r);\ngl_FragColor.a *\x3d sampled.a;\ngl_FragColor.rgb *\x3d gl_FragColor.a;\n}",
"imagery.vert":"attribute vec2 a_position;\nattribute vec2 a_texcoord;\nuniform mat3 u_dvsMat3;\nvarying vec2 v_texcoord;\nvoid main(void) {\nvec2 xy \x3d (u_dvsMat3 * vec3(a_position, 1.0)).xy;\ngl_Position \x3d vec4(xy, 0.0, 1.0);\nv_texcoord \x3d a_texcoord;\n}"},particles:{"particles.frag":"precision highp float;\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying float v_size;\nuniform float u_featheringSize;\n#include \x3craster/flow/getFragmentColor.glsl\x3e\nvoid main(void) {\ngl_FragColor \x3d getFragmentColor(v_color, length(v_texcoord - 0.5), v_size, u_featheringSize);\n}",
"particles.vert":"attribute vec4 a_xyts0;\nattribute vec4 a_xyts1;\nattribute vec4 a_typeIdDurationSeed;\nattribute vec4 a_extrudeInfo;\nuniform mat3 u_dvsMat3;\nuniform mat3 u_displayViewMat3;\nuniform float u_time;\nuniform float u_trailLength;\nuniform float u_flowSpeed;\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying float v_size;\nuniform float u_featheringSize;\nuniform float u_introFade;\n#include \x3craster/flow/vv.glsl\x3e\n#include \x3craster/flow/getFadeOpacity.glsl\x3e\nvoid main(void) {\nvec2 position0 \x3d a_xyts0.xy;\nfloat t0 \x3d a_xyts0.z;\nfloat speed0 \x3d a_xyts0.w;\nvec2 position1 \x3d a_xyts1.xy;\nfloat t1 \x3d a_xyts1.z;\nfloat speed1 \x3d a_xyts1.w;\nfloat type \x3d a_typeIdDurationSeed.x;\nfloat id \x3d a_typeIdDurationSeed.y;\nfloat duration \x3d a_typeIdDurationSeed.z;\nfloat seed \x3d a_typeIdDurationSeed.w;\nvec2 e0 \x3d a_extrudeInfo.xy;\nvec2 e1 \x3d a_extrudeInfo.zw;\nfloat animationPeriod \x3d duration + u_trailLength;\nfloat scaledTime \x3d u_time * u_flowSpeed;\nfloat randomizedTime \x3d scaledTime + seed * animationPeriod;\nfloat t \x3d mod(randomizedTime, animationPeriod);\nfloat fUnclamped \x3d (t - t0) / (t1 - t0);\nfloat f \x3d clamp(fUnclamped, 0.0, 1.0);\nfloat clampedTime \x3d mix(t0, t1, f);\nfloat speed \x3d mix(speed0, speed1, f);\nvec2 extrude;\nvec2 position;\nfloat fadeOpacity;\nfloat introOpacity;\nif (type \x3d\x3d 2.0) {\nif (fUnclamped \x3c 0.0 || (fUnclamped \x3e 1.0 \x26\x26 t1 !\x3d duration)) {\ngl_Position \x3d vec4(0.0, 0.0, -2.0, 1.0);\nreturn;\n}\nvec2 ortho \x3d mix(e0, e1, f);\nvec2 parallel;\nparallel \x3d normalize(position1 - position0) * 0.5;\nif (id \x3d\x3d 1.0) {\nextrude \x3d ortho;\nv_texcoord \x3d vec2(0.5, 0.0);\n} else if (id \x3d\x3d 2.0) {\nextrude \x3d -ortho;\nv_texcoord \x3d vec2(0.5, 1.0);\n} else if (id \x3d\x3d 3.0) {\nextrude \x3d ortho + parallel;\nv_texcoord \x3d vec2(1.0, 0.0);\n} else if (id \x3d\x3d 4.0) {\nextrude \x3d -ortho + parallel;\nv_texcoord \x3d vec2(1.0, 1.0);\n}\nfadeOpacity \x3d getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity \x3d 1.0 - exp(-clampedTime);\nv_size \x3d getSize(speed);\nv_color \x3d getColor(speed);\nv_color.a *\x3d getOpacity(speed);\nposition \x3d mix(position0, position1, f);\n} else {\nif (fUnclamped \x3c 0.0) {\ngl_Position \x3d vec4(0.0, 0.0, -2.0, 1.0);\nreturn;\n}\nif (id \x3d\x3d 1.0) {\nextrude \x3d e0;\nv_texcoord \x3d vec2(0.5, 0.0);\nfadeOpacity \x3d getFadeOpacity((t - t0) / u_trailLength);\nintroOpacity \x3d 1.0 - exp(-t0);\nv_size \x3d getSize(speed0);\nv_color \x3d getColor(speed0);\nv_color.a *\x3d getOpacity(speed0);\nposition \x3d position0;\n} else if (id \x3d\x3d 2.0) {\nextrude \x3d -e0;\nv_texcoord \x3d vec2(0.5, 1.0);\nfadeOpacity \x3d getFadeOpacity((t - t0) / u_trailLength);\nintroOpacity \x3d 1.0 - exp(-t0);\nv_size \x3d getSize(speed0);\nv_color \x3d getColor(speed0);\nv_color.a *\x3d getOpacity(speed0);\nposition \x3d position0;\n} else if (id \x3d\x3d 3.0) {\nextrude \x3d mix(e0, e1, f);\nv_texcoord \x3d vec2(0.5, 0.0);\nfadeOpacity \x3d getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity \x3d 1.0 - exp(-clampedTime);\nv_size \x3d getSize(speed);\nv_color \x3d getColor(speed);\nv_color.a *\x3d getOpacity(speed);\nposition \x3d mix(position0, position1, f);\n} else if (id \x3d\x3d 4.0) {\nextrude \x3d -mix(e0, e1, f);\nv_texcoord \x3d vec2(0.5, 1.0);\nfadeOpacity \x3d getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity \x3d 1.0 - exp(-clampedTime);\nv_size \x3d getSize(speed);\nv_color \x3d getColor(speed);\nv_color.a *\x3d getOpacity(speed);\nposition \x3d mix(position0, position1, f);\n}\n}\nvec2 xy \x3d (u_dvsMat3 * vec3(position, 1.0) + u_displayViewMat3 * vec3(extrude * v_size, 0.0)).xy;\ngl_Position \x3d vec4(xy, 0.0, 1.0);\nv_color.a *\x3d fadeOpacity;\nv_color.a *\x3d mix(1.0, introOpacity, u_introFade);\nv_color.rgb *\x3d v_color.a;\n}"},
streamlines:{"streamlines.frag":"precision highp float;\nvarying float v_side;\nvarying float v_time;\nvarying float v_totalTime;\nvarying float v_timeSeed;\nvarying vec4 v_color;\nvarying float v_size;\nuniform float u_time;\nuniform float u_trailLength;\nuniform float u_flowSpeed;\nuniform float u_featheringSize;\nuniform float u_introFade;\n#include \x3craster/flow/getFragmentColor.glsl\x3e\n#include \x3craster/flow/getFadeOpacity.glsl\x3e\nvoid main(void) {\nfloat t \x3d mod(v_timeSeed * (v_totalTime + u_trailLength) + u_time * u_flowSpeed, v_totalTime + u_trailLength) - v_time;\nvec4 color \x3d v_color * step(0.0, t) * getFadeOpacity(t / u_trailLength);\ncolor *\x3d mix(1.0, 1.0 - exp(-v_time), u_introFade);\ngl_FragColor \x3d getFragmentColor(color, length((v_side + 1.0) / 2.0 - 0.5), v_size, u_featheringSize);\n}",
"streamlines.vert":"attribute vec3 a_positionAndSide;\nattribute vec3 a_timeInfo;\nattribute vec2 a_extrude;\nattribute float a_speed;\nuniform mat3 u_dvsMat3;\nuniform mat3 u_displayViewMat3;\nvarying float v_time;\nvarying float v_totalTime;\nvarying float v_timeSeed;\nvarying vec4 v_color;\nvarying float v_side;\nvarying float v_size;\nuniform float u_featheringSize;\n#include \x3craster/flow/vv.glsl\x3e\nvoid main(void) {\nvec4 lineColor \x3d getColor(a_speed);\nfloat lineOpacity \x3d getOpacity(a_speed);\nfloat lineSize \x3d getSize(a_speed);\nvec2 position \x3d a_positionAndSide.xy;\nv_side \x3d a_positionAndSide.z;\nvec2 xy \x3d (u_dvsMat3 * vec3(position, 1.0) + u_displayViewMat3 * vec3(a_extrude * lineSize, 0.0)).xy;\ngl_Position \x3d vec4(xy, 0.0, 1.0);\nv_time \x3d a_timeInfo.x;\nv_totalTime \x3d a_timeInfo.y;\nv_timeSeed \x3d a_timeInfo.z;\nv_color \x3d lineColor;\nv_color.a *\x3d lineOpacity;\nv_color.rgb *\x3d v_color.a;\nv_size \x3d lineSize;\n}"},
"vv.glsl":"#define MAX_STOPS 8\n#ifdef VV_COLOR\nuniform float u_color_stops[MAX_STOPS];\nuniform vec4 u_color_values[MAX_STOPS];\nuniform int u_color_count;\n#else\nuniform vec4 u_color;\n#endif\n#ifdef VV_OPACITY\nuniform float u_opacity_stops[MAX_STOPS];\nuniform float u_opacity_values[MAX_STOPS];\nuniform int u_opacity_count;\n#else\nuniform float u_opacity;\n#endif\n#ifdef VV_SIZE\nuniform float u_size_stops[MAX_STOPS];\nuniform float u_size_values[MAX_STOPS];\nuniform int u_size_count;\n#else\nuniform float u_size;\n#endif\nuniform float u_featheringOffset;\nvec4 getColor(float x) {\n#ifdef VV_COLOR\nvec4 color \x3d u_color_values[0];\n{\nfor (int i \x3d 1; i \x3c MAX_STOPS; i++) {\nif (i \x3e\x3d u_color_count) {\nbreak;\n}\nfloat x1 \x3d u_color_stops[i - 1];\nif (x \x3c x1) {\nbreak;\n}\nfloat x2 \x3d u_color_stops[i];\nvec4 y2 \x3d u_color_values[i];\nif (x \x3c x2) {\nvec4 y1 \x3d u_color_values[i - 1];\ncolor \x3d y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\ncolor \x3d y2;\n}\n}\n}\n#else\nvec4 color \x3d u_color;\n#endif\nreturn color;\n}\nfloat getOpacity(float x) {\n#ifdef VV_OPACITY\nfloat opacity \x3d u_opacity_values[0];\n{\nfor (int i \x3d 1; i \x3c MAX_STOPS; i++) {\nif (i \x3e\x3d u_opacity_count) {\nbreak;\n}\nfloat x1 \x3d u_opacity_stops[i - 1];\nif (x \x3c x1) {\nbreak;\n}\nfloat x2 \x3d u_opacity_stops[i];\nfloat y2 \x3d u_opacity_values[i];\nif (x \x3c x2) {\nfloat y1 \x3d u_opacity_values[i - 1];\nopacity \x3d y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\nopacity \x3d y2;\n}\n}\n}\n#else\nfloat opacity \x3d u_opacity;\n#endif\nreturn opacity;\n}\nfloat getSize(float x) {\n#ifdef VV_SIZE\nfloat size \x3d u_size_values[0];\n{\nfor (int i \x3d 1; i \x3c MAX_STOPS; i++) {\nif (i \x3e\x3d u_size_count) {\nbreak;\n}\nfloat x1 \x3d u_size_stops[i - 1];\nif (x \x3c x1) {\nbreak;\n}\nfloat x2 \x3d u_size_stops[i];\nfloat y2 \x3d u_size_values[i];\nif (x \x3c x2) {\nfloat y1 \x3d u_size_values[i - 1];\nsize \x3d y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\nsize \x3d y2;\n}\n}\n}\n#else\nfloat size \x3d u_size;\n#endif\nreturn size + 2.0 * u_featheringSize * u_featheringOffset;\n}"},
hillshade:{"hillshade.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include \x3craster/common/common.glsl\x3e\nuniform int u_hillshadeType;\nuniform float u_sinZcosAs[6];\nuniform float u_sinZsinAs[6];\nuniform float u_cosZs[6];\nuniform float u_weights[6];\nuniform vec2 u_factor;\nuniform float u_minValue;\nuniform float u_maxValue;\n#include \x3craster/lut/colorize.glsl\x3e\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p \x3d c.g \x3c c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q \x3d c.r \x3c p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d \x3d q.x - min(q.w, q.y);\nfloat e \x3d 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec4 overlay(float val, float minValue, float maxValue, float hillshade) {\nval \x3d clamp((val - minValue) / (maxValue - minValue), 0.0, 1.0);\nvec4 rgb \x3d colorize(vec4(val, val, val, 1.0), 255.0);\nvec3 hsv \x3d rgb2hsv(rgb.xyz);\nhsv.z \x3d hillshade;\nreturn vec4(hsv2rgb(hsv), 1.0) * rgb.a;\n}\nvoid main() {\nvec2 pixelLocation \x3d getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel \x3d getPixel(pixelLocation);\nif (currentPixel.a \x3d\x3d 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nvec2 onePixel \x3d 1.0 / u_srcImageSize;\nif (pixelLocation.s \x3c onePixel.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (pixelLocation.t \x3c onePixel.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (pixelLocation.s \x3e 1.0 - onePixel.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (pixelLocation.t \x3e 1.0 - onePixel.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nvec4 va \x3d texture2D(u_image, pixelLocation + onePixel * axy);\nvec4 vb \x3d texture2D(u_image, pixelLocation + onePixel * bxy);\nvec4 vc \x3d texture2D(u_image, pixelLocation + onePixel * cxy);\nvec4 vd \x3d texture2D(u_image, pixelLocation + onePixel * dxy);\nvec4 ve \x3d texture2D(u_image, pixelLocation);\nvec4 vf \x3d texture2D(u_image, pixelLocation + onePixel * fxy);\nvec4 vg \x3d texture2D(u_image, pixelLocation + onePixel * gxy);\nvec4 vh \x3d texture2D(u_image, pixelLocation + onePixel * hxy);\nvec4 vi \x3d texture2D(u_image, pixelLocation + onePixel * ixy);\nfloat dzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r * u_factor.s;\nfloat dzy \x3d (vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r * u_factor.t;\nfloat dzd \x3d sqrt(1.0 + dzx * dzx + dzy * dzy);\nfloat hillshade \x3d 0.0;\nif (u_hillshadeType \x3d\x3d 0){\nfloat cosDelta \x3d u_sinZsinAs[0] * dzy - u_sinZcosAs[0] * dzx;\nfloat z \x3d (u_cosZs[0] + cosDelta) / dzd;\nif (z \x3c 0.0)  z \x3d 0.0;\nhillshade \x3d z;\n} else {\nfor (int k \x3d 0; k \x3c 6; k++) {\nfloat cosDelta \x3d u_sinZsinAs[k] * dzy - u_sinZcosAs[k] * dzx;\nfloat z \x3d (u_cosZs[k] + cosDelta) / dzd;\nif (z \x3c 0.0) z \x3d 0.0;\nhillshade \x3d hillshade + z * u_weights[k];\nif (k \x3d\x3d 5) break;\n}\n}\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\n#ifdef APPLY_COLORMAP\ngl_FragColor \x3d overlay(ve.r, u_minValue, u_maxValue, hillshade) * alpha * u_opacity;\n#else\ngl_FragColor \x3d vec4(hillshade, hillshade, hillshade, 1.0) * alpha * u_opacity;\n#endif\n}",
"hillshade.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord \x3d a_pos;\ngl_Position \x3d vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"},lut:{"colorize.glsl":"uniform sampler2D u_colormap;\nuniform float u_colormapOffset;\nuniform float u_colormapMaxIndex;\nvec4 colorize(vec4 currentPixel, float scaleFactor) {\nfloat clrIndex \x3d clamp(currentPixel.r * scaleFactor - u_colormapOffset, 0.0, u_colormapMaxIndex);\nvec2 clrPosition \x3d vec2((clrIndex + 0.5) / (u_colormapMaxIndex + 1.0), 0.0);\nvec4 color \x3d texture2D(u_colormap, clrPosition);\nvec4 result \x3d vec4(color.rgb, color.a * currentPixel.a);\nreturn result;\n}",
"lut.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include \x3craster/common/common.glsl\x3e\n#include \x3craster/lut/colorize.glsl\x3e\nvoid main() {\nvec2 pixelLocation \x3d getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel \x3d getPixel(pixelLocation);\nvec4 result \x3d colorize(currentPixel, 1.0);\ngl_FragColor \x3d vec4(result.xyz, 1.0) * result.a * u_opacity;\n}","lut.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform highp float u_scale;\nuniform highp vec2 u_offset;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord \x3d a_pos * u_scale + u_offset;\ngl_Position \x3d vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"},
magdir:{"magdir.frag":"precision mediump float;\nvarying vec4 v_color;\nuniform lowp float u_opacity;\nvoid main() {\ngl_FragColor \x3d v_color * u_opacity;\n}","magdir.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_vv;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform vec2 u_symbolSize;\nuniform vec2 u_symbolPercentRange;\nuniform vec2 u_dataRange;\nuniform float u_rotation;\nuniform vec4 u_colors[12];\nvarying vec4 v_color;\nvoid main()\n{\nfloat angle \x3d a_offset.y + u_rotation;\n#ifndef ROTATION_GEOGRAPHIC\nangle \x3d 3.14159265359 * 2.0 - angle - 3.14159265359 / 2.0;\n#endif\nvec2 offset \x3d vec2(cos(angle), sin(angle)) * a_offset.x;\n#ifdef DATA_RANGE\nfloat valuePercentage \x3d clamp((a_vv.y - u_dataRange.x) / (u_dataRange.y - u_dataRange.x), 0.0, 1.0);\nfloat sizeRatio \x3d u_symbolPercentRange.x + valuePercentage * (u_symbolPercentRange.y - u_symbolPercentRange.x);\nfloat sizePercentage \x3d clamp(sizeRatio, u_symbolPercentRange.x, u_symbolPercentRange.y);\n#else\nfloat sizePercentage \x3d (u_symbolPercentRange.x + u_symbolPercentRange.y) / 2.0;\n#endif\nvec2 pos \x3d a_pos + offset * sizePercentage * u_symbolSize;\nv_color \x3d u_colors[int(a_vv.x)];\ngl_Position \x3d vec4(u_dvsMat3 * vec3(pos * u_coordScale, 1.0), 1.0);\n}"},
reproject:{"reproject.frag":"precision mediump float;\nvarying vec2 v_texcoord;\n#include \x3craster/common/common.glsl\x3e\nvoid main() {\nvec2 pixelLocation \x3d getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 1.0);\nreturn;\n}\nvec4 currentPixel \x3d getPixel(pixelLocation);\ngl_FragColor \x3d vec4(currentPixel.rgb, 1.0) * currentPixel.a * u_opacity;\n}","reproject.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord \x3d a_position;\ngl_Position \x3d vec4(2.0 * (a_position - 0.5), 0.0, 1.0);\n}"},
scalar:{"scalar.frag":"precision mediump float;\nuniform lowp float u_opacity;\nvarying vec2 v_pos;\nconst vec4 outlineColor \x3d vec4(0.2, 0.2, 0.2, 1.0);\nconst float outlineSize \x3d 0.02;\nconst float innerRadius \x3d 0.25;\nconst float outerRadius \x3d 0.42;\nconst float innerSquareLength \x3d 0.15;\nvoid main() {\nmediump float dist \x3d length(v_pos);\nmediump float fillalpha1 \x3d smoothstep(outerRadius, outerRadius + outlineSize, dist);\nfillalpha1 *\x3d (1.0-smoothstep(outerRadius + outlineSize, outerRadius + 0.1 + outlineSize, dist));\n#ifdef INNER_CIRCLE\nmediump float fillalpha2 \x3d smoothstep(innerRadius, innerRadius + outlineSize, dist);\nfillalpha2 *\x3d (1.0-smoothstep(innerRadius + outlineSize, innerRadius + 0.1 + outlineSize, dist));\n#else\nmediump float fillalpha2 \x3d (abs(v_pos.x) \x3c innerSquareLength ? 1.0 : 0.0) * (abs(v_pos.y) \x3c innerSquareLength ? 1.0 : 0.0);\n#endif\ngl_FragColor \x3d (fillalpha2 + fillalpha1) * outlineColor * u_opacity;\n}",
"scalar.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_vv;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform vec2 u_symbolSize;\nuniform vec2 u_symbolPercentRange;\nuniform vec2 u_dataRange;\nvarying vec2 v_pos;\nvoid main()\n{\n#ifdef DATA_RANGE\nfloat valuePercentage \x3d clamp((a_vv.y - u_dataRange.x) / (u_dataRange.y - u_dataRange.x), 0.0, 1.0);\nfloat sizeRatio \x3d u_symbolPercentRange.x + valuePercentage * (u_symbolPercentRange.y - u_symbolPercentRange.x);\nfloat sizePercentage \x3d clamp(sizeRatio, u_symbolPercentRange.x, u_symbolPercentRange.y);\n#else\nfloat sizePercentage \x3d (u_symbolPercentRange.x + u_symbolPercentRange.y) / 2.0;\n#endif\nvec2 size \x3d u_symbolSize * sizePercentage;\nvec2 pos \x3d a_pos + a_offset * size;\nv_pos \x3d a_offset;\ngl_Position \x3d vec4(u_dvsMat3 * vec3(pos * u_coordScale, 1.0), 1.0);\n}"},
stretch:{"stretch.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include \x3craster/common/common.glsl\x3e\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput;\nuniform float u_maxOutput;\nuniform float u_factor[3];\nuniform bool u_useGamma;\nuniform float u_gamma[3];\nuniform float u_gammaCorrection[3];\n#include \x3craster/lut/colorize.glsl\x3e\nfloat stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, bool useGamma, float gamma, float gammaCorrection) {\nif (val \x3e\x3d maxCutOff) {\nreturn maxOutput;\n} else if (val \x3c\x3d minCutOff) {\nreturn minOutput;\n}\nfloat stretchedVal;\nif (useGamma) {\nfloat tempf \x3d 1.0;\nfloat outRange \x3d maxOutput - minOutput;\nfloat relativeVal \x3d (val - minCutOff) / (maxCutOff - minCutOff);\nif (gamma \x3e 1.0) {\ntempf -\x3d pow(1.0 / outRange, relativeVal * gammaCorrection);\n}\nstretchedVal \x3d (tempf * outRange * pow(relativeVal, 1.0 / gamma) + minOutput) / 255.0;\n} else {\nstretchedVal \x3d minOutput + (val - minCutOff) * factor;\n}\nreturn stretchedVal;\n}\nvoid main() {\nvec2 pixelLocation \x3d getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel \x3d getPixel(pixelLocation);\n#ifdef NOOP\ngl_FragColor \x3d vec4(currentPixel.rgb, 1.0) * currentPixel.a * u_opacity;\nreturn;\n#endif\nif (u_bandCount \x3d\x3d 1) {\nfloat grayVal \x3d stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_useGamma, u_gamma[0], u_gammaCorrection[0]);\n#ifdef APPLY_COLORMAP\nvec4 result \x3d colorize(vec4(grayVal, grayVal, grayVal, 1.0), u_useGamma ? 255.0 : 1.0);\ngl_FragColor \x3d vec4(result.xyz, 1.0) * result.a * currentPixel.a * u_opacity;\n#else\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, 1.0) * currentPixel.a * u_opacity;\n#endif\n} else {\nfloat redVal \x3d stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_useGamma, u_gamma[0], u_gammaCorrection[0]);\nfloat greenVal \x3d stretchOneValue(currentPixel.g, u_minCutOff[1], u_maxCutOff[1], u_minOutput, u_maxOutput, u_factor[1], u_useGamma, u_gamma[1], u_gammaCorrection[1]);\nfloat blueVal \x3d stretchOneValue(currentPixel.b, u_minCutOff[2], u_maxCutOff[2], u_minOutput, u_maxOutput, u_factor[2], u_useGamma, u_gamma[2], u_gammaCorrection[2]);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, 1.0) * currentPixel.a * u_opacity;\n}\n}",
"stretch.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform highp float u_scale;\nuniform highp vec2 u_offset;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord \x3d a_pos * u_scale + u_offset;\ngl_Position \x3d vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"}},stencil:{"stencil.frag":"void main() {\ngl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\n}","stencil.vert":"attribute vec2 a_pos;\nuniform mat3 u_worldExtent;\nvoid main() {\ngl_Position \x3d vec4(u_worldExtent * vec3(a_pos, 1.0), 1.0);\n}"},
tileInfo:{"tileInfo.frag":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\nvoid main(void) {\nlowp vec4 color \x3d texture2D(u_texture, v_tex);\ngl_FragColor \x3d 0.75 * color;\n}","tileInfo.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_coord_ratio;\nuniform mediump vec2 u_delta;\nuniform mediump vec2 u_dimensions;\nvarying mediump vec2 v_tex;\nvoid main() {\nmediump vec2 offset \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\nvec3 v_pos \x3d u_dvsMat3 * vec3(offset, 1.0);\ngl_Position \x3d vec4(v_pos.xy, 0.0, 1.0);\nv_tex \x3d a_pos;\n}"},
util:{"atan2.glsl":"float atan2(in float y, in float x) {\nfloat t0, t1, t2, t3, t4;\nt3 \x3d abs(x);\nt1 \x3d abs(y);\nt0 \x3d max(t3, t1);\nt1 \x3d min(t3, t1);\nt3 \x3d 1.0 / t0;\nt3 \x3d t1 * t3;\nt4 \x3d t3 * t3;\nt0 \x3d         - 0.013480470;\nt0 \x3d t0 * t4 + 0.057477314;\nt0 \x3d t0 * t4 - 0.121239071;\nt0 \x3d t0 * t4 + 0.195635925;\nt0 \x3d t0 * t4 - 0.332994597;\nt0 \x3d t0 * t4 + 0.999995630;\nt3 \x3d t0 * t3;\nt3 \x3d (abs(y) \x3e abs(x)) ? 1.570796327 - t3 : t3;\nt3 \x3d x \x3c 0.0 ?  3.141592654 - t3 : t3;\nt3 \x3d y \x3c 0.0 ? -t3 : t3;\nreturn t3;\n}",
"encoding.glsl":"const vec4 rgba2float_factors \x3d vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}"}}})},"esri/views/webgl/ShaderCompiler":function(){define(["exports"],function(u){let n=function(){function h(v){this.readFile=v}var r=h.prototype;r.resolveIncludes=function(v){return this._resolve(v)};r._resolve=function(v,z=new Map){if(z.has(v))return z.get(v);
const p=this._read(v);if(!p)throw Error(`cannot find shader file ${v}`);const g=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let e=g.exec(p);const b=[];for(;null!=e;)b.push({path:e[1],start:e.index,length:e[0].length}),e=g.exec(p);let a=0,c="";b.forEach(d=>{c+=p.slice(a,d.start);c+=z.has(d.path)?"":this._resolve(d.path,z);a=d.start+d.length});c+=p.slice(a);z.set(v,c);return c};r._read=function(v){return this.readFile(v)};return h}();u.ShaderCompiler=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/webgl/ProgramTemplate":function(){define(["exports","./Program"],function(u,n){u.createProgram=function(h,r,v=""){return new n.Program(h,v+r.shaders.vertexShader,v+r.shaders.fragmentShader,r.attributes)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/Program":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/has ../../core/maybe ./checkWebGLError ./context-util ./enums ./ShaderTranspiler".split(" "),
function(u,n,h,r,v,z,p,g,e){function b(f,l,m){f=f.gl;const k=f.createShader(l);f.shaderSource(k,m);f.compileShader(k);z.webglValidateShadersEnabled()&&!f.getShaderParameter(k,f.COMPILE_STATUS)&&(console.error("Compile error in ".concat(l===g.ShaderType.VERTEX_SHADER?"vertex":"fragment"," shader")),console.error(f.getShaderInfoLog(k)),console.error(a(m)));d.enabled&&(d.compiledLOC+=m.match(/\n/g).length+1);return k}function a(f){let l=2;return f.replace(/\n/g,()=>{var m=l++;m=1E3<=m?m.toString():("  "+
m).slice(-3);return"\n"+m+":"})}function c(f,l,m){const k=f.get(l);return k?h.update(k,m):(f.set(l,Array.from(m)),!0)}r=function(){function f(m,k,q,t,w=new Map){this._context=m;this._locations=t;this._uniformBlockBindings=w;this._refCount=1;this._compiled=!1;this._nameToUniformLocation={};this._nameToUniform1={};this._nameToUniform1v=new Map;this._nameToUniform2=new Map;this._nameToUniform3=new Map;this._nameToUniform4=new Map;this._nameToUniformMatrix3=new Map;this._nameToUniformMatrix4=new Map;
m||console.error("RenderingContext isn't initialized!");0===k.length&&console.error("Shaders source should not be empty!");this._context.type===p.ContextType.WEBGL2&&(k=e.transpileShader(k,g.ShaderType.VERTEX_SHADER),q=e.transpileShader(q,g.ShaderType.FRAGMENT_SHADER));this._vShader=b(this._context,g.ShaderType.VERTEX_SHADER,k);this._fShader=b(this._context,g.ShaderType.FRAGMENT_SHADER,q);this._vShader&&this._fShader||console.error("Error loading shaders!");this._context.instanceCounter.increment(g.ResourceType.Shader,
this);z.webglValidateShadersEnabled()&&(this.vertexShader=k,this.fragmentShader=q)}var l=f.prototype;l.dispose=function(){if(!(0<--this._refCount)){var m=this._context.gl;this._vShader&&(m.deleteShader(this._vShader),this._vShader=null,this._context.instanceCounter.decrement(g.ResourceType.Shader,this));this._fShader&&(m.deleteShader(this._fShader),this._fShader=null);this._glName&&(m.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(g.ResourceType.Program,this))}};
l.ref=function(){++this._refCount};l._getUniformLocation=function(m){void 0===this._nameToUniformLocation[m]&&(++d.numUniforms,this._nameToUniformLocation[m]=this._context.gl.getUniformLocation(this.glName,m));return this._nameToUniformLocation[m]};l.hasUniform=function(m){return null!==this._getUniformLocation(m)};l.setUniform1i=function(m,k){const q=this._nameToUniform1[m];if(void 0===q||k!==q)this._context.gl.uniform1i(this._getUniformLocation(m),k),this._nameToUniform1[m]=k};l.setUniform1iv=function(m,
k){c(this._nameToUniform1v,m,k)&&this._context.gl.uniform1iv(this._getUniformLocation(m),k)};l.setUniform2iv=function(m,k){c(this._nameToUniform2,m,k)&&this._context.gl.uniform2iv(this._getUniformLocation(m),k)};l.setUniform3iv=function(m,k){c(this._nameToUniform3,m,k)&&this._context.gl.uniform3iv(this._getUniformLocation(m),k)};l.setUniform4iv=function(m,k){c(this._nameToUniform4,m,k)&&this._context.gl.uniform4iv(this._getUniformLocation(m),k)};l.setUniform1f=function(m,k){const q=this._nameToUniform1[m];
if(void 0===q||k!==q)this._context.gl.uniform1f(this._getUniformLocation(m),k),this._nameToUniform1[m]=k};l.setUniform1fv=function(m,k){c(this._nameToUniform1v,m,k)&&this._context.gl.uniform1fv(this._getUniformLocation(m),k)};l.setUniform2f=function(m,k,q){const t=this._nameToUniform2.get(m);if(void 0===t)this._context.gl.uniform2f(this._getUniformLocation(m),k,q),this._nameToUniform2.set(m,[k,q]);else if(k!==t[0]||q!==t[1])this._context.gl.uniform2f(this._getUniformLocation(m),k,q),t[0]=k,t[1]=q};
l.setUniform2fv=function(m,k){c(this._nameToUniform2,m,k)&&this._context.gl.uniform2fv(this._getUniformLocation(m),k)};l.setUniform3f=function(m,k,q,t){const w=this._nameToUniform3.get(m);if(void 0===w)this._context.gl.uniform3f(this._getUniformLocation(m),k,q,t),this._nameToUniform3[m]=[k,q,t];else if(k!==w[0]||q!==w[1]||t!==w[2])this._context.gl.uniform3f(this._getUniformLocation(m),k,q,t),w[0]=k,w[1]=q,w[2]=t};l.setUniform3fv=function(m,k){c(this._nameToUniform3,m,k)&&this._context.gl.uniform3fv(this._getUniformLocation(m),
k)};l.setUniform4f=function(m,k,q,t,w){const A=this._nameToUniform4.get(m);if(void 0===A)this._context.gl.uniform4f(this._getUniformLocation(m),k,q,t,w),this._nameToUniform4.set(m,[k,q,t,w]);else if(void 0===A||k!==A[0]||q!==A[1]||t!==A[2]||w!==A[3])this._context.gl.uniform4f(this._getUniformLocation(m),k,q,t,w),A[0]=k,A[1]=q,A[2]=t,A[3]=w};l.setUniform4fv=function(m,k){c(this._nameToUniform4,m,k)&&this._context.gl.uniform4fv(this._getUniformLocation(m),k)};l.setUniformMatrix3fv=function(m,k,q=!1){c(this._nameToUniformMatrix3,
m,k)&&this._context.gl.uniformMatrix3fv(this._getUniformLocation(m),q,k)};l.setUniformMatrix4fv=function(m,k,q=!1){c(this._nameToUniformMatrix4,m,k)&&this._context.gl.uniformMatrix4fv(this._getUniformLocation(m),q,k)};l.stop=function(){};n._createClass(f,[{key:"glName",get:function(){if(v.isSome(this._glName))return this._glName;if(v.isNone(this._vShader))return null;const m=this._context.gl,k=m.createProgram();m.attachShader(k,this._vShader);m.attachShader(k,this._fShader);this._locations.forEach((q,
t)=>m.bindAttribLocation(k,q,t));m.linkProgram(k);z.webglValidateShadersEnabled()&&!m.getProgramParameter(k,m.LINK_STATUS)&&console.error("Could not link shader\n"+`validated: ${m.getProgramParameter(k,m.VALIDATE_STATUS)}`+`, gl error ${m.getError()}`+`, vertex: ${m.getShaderParameter(this._vShader,m.COMPILE_STATUS)}`+`, fragment: ${m.getShaderParameter(this._fShader,m.COMPILE_STATUS)}`+`, info log: ${m.getProgramInfoLog(k)}`+`, vertex source: ${this.vertexShader}`+`, fragment source: ${this.fragmentShader}`);
if(this._context.type===p.ContextType.WEBGL2)for(const [q,t]of this._uniformBlockBindings){const w=m.getUniformBlockIndex(k,q);4294967295>w&&m.uniformBlockBinding(k,w,t)}this._glName=k;this._context.instanceCounter.increment(g.ResourceType.Program,this);return k}},{key:"hasGLName",get:function(){return v.isSome(this._glName)}},{key:"isCompiled",get:function(){if(this._compiled)return!0;const m=this._context.gl.getExtension("KHR_parallel_shader_compile");return null==m?this._compiled=!0:this._compiled=
!!this._context.gl.getProgramParameter(this.glName,m.COMPLETION_STATUS_KHR)}}]);return f}();const d={compiledLOC:0,numUniforms:0,enabled:!1};u.Program=r;u.test=d;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/ShaderTranspiler":function(){define("exports ../../core/has ../../core/maybe ./enums ./reservedWordsGLSL3 ./testUtils".split(" "),function(u,n,h,r,v,z){function p(){function w(Q){Q.length&&P.push({type:k[G],data:Q,position:J,line:L,
column:M})}function A(){K=K.length?[]:K;if("/"===H&&"*"===O)return J=E+F-1,G=0,H=O,F+1;if("/"===H&&"/"===O)return J=E+F-1,G=1,H=O,F+1;if("#"===O)return G=2,J=E+F,F;if(/\s/.test(O))return G=9,J=E+F,F;R=/\d/.test(O);X=/[^\w_]/.test(O);J=E+F;G=R?4:X?3:9999;return F}function x(){if(("\r"===O||"\n"===O)&&"\\"!==H)return w(K.join("")),G=999,F;K.push(O);H=O;return F+1}function y(){if("."===H&&/\d/.test(O))return G=5,F;if("/"===H&&"*"===O)return G=0,F;if("/"===H&&"/"===O)return G=1,F;if("."===O&&K.length){for(;B(K););
G=5;return F}if(";"===O||")"===O||"("===O){if(K.length)for(;B(K););w(O);G=999;return F+1}var Q=2===K.length&&"\x3d"!==O;if(/[\w_\d\s]/.test(O)||Q){for(;B(K););G=999;return F}K.push(O);H=O;return F+1}function B(Q){var Y=0;do{var fa=l.indexOf(Q.slice(0,Q.length+Y).join(""));var da=l[fa];if(-1===fa){if(0<Y--+Q.length)continue;da=Q.slice(0,1).join("")}w(da);J+=da.length;K=K.slice(da.length);return K.length}while(1)}function C(){if("."===O||/[eE]/.test(O))return K.push(O),G=5,H=O,F+1;if("x"===O&&1===K.length&&
"0"===K[0])return G=11,K.push(O),H=O,F+1;if(/[^\d]/.test(O))return w(K.join("")),G=999,F;K.push(O);H=O;return F+1}function D(){"f"===O&&(K.push(O),H=O,F+=1);if(/[eE]/.test(O)||"-"===O&&/[eE]/.test(H))return K.push(O),H=O,F+1;if(/[^\d]/.test(O))return w(K.join("")),G=999,F;K.push(O);H=O;return F+1}var F=0,E=0,G=999,O,H,K=[],P=[],L=1,M=0,J=0,R=!1,X=!1,U="",V;return function(Q){P=[];if(null!==Q){Q=Q.replace?Q.replace(/\r\n/g,"\n"):Q;F=0;U+=Q;for(V=U.length;O=U[F],F<V;){Q=F;switch(G){case 0:"/"===O&&
"*"===H?(K.push(O),w(K.join("")),G=999):(K.push(O),H=O);F+=1;break;case 1:F=x();break;case 2:F=x();break;case 3:F=y();break;case 4:F=C();break;case 11:/[^a-fA-F0-9]/.test(O)?(w(K.join("")),G=999):(K.push(O),H=O,F+=1);break;case 5:F=D();break;case 9999:if(/[^\d\w_]/.test(O)){var Y=K.join("");G=-1<f.indexOf(Y)?8:-1<m.indexOf(Y)?7:6;w(K.join(""));G=999}else K.push(O),H=O,F+=1;break;case 9:/[^\s]/g.test(O)?(w(K.join("")),G=999):(K.push(O),H=O,F+=1);break;case 999:F=A()}if(Q!==F)switch(U[Q]){case "\n":M=
0;++L;break;default:++M}}E+=F;U=U.slice(F);return P}K.length&&w(K.join(""));G=10;w("(eof)");return P}}function g(w){return w.map(A=>"eof"!==A.type?A.data:"").join("")}function e(w,A="100",x="300 es"){const y=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const B of w)if("preprocessor"===B.type){const C=y.exec(B.data);if(C){w=C[1].replace(/\s\s+/g," ");if(w===x)return w;if(w===A)return B.data="#version "+x,A;throw Error("unknown glsl version: "+w);}}w.splice(0,0,{type:"preprocessor",data:"#version "+
x},{type:"whitespace",data:"\n"});return null}function b(w,A,x,y){y=y||x;for(const B of w)if("ident"===B.type&&B.data===x)return y in A?A[y]++:A[y]=0,b(w,A,y+"_"+A[y],y);return x}function a(w,A,x="afterVersion"){const y={data:"\n",type:"whitespace"},B=D=>D<w.length?/[^\r\n]$/.test(w[D].data):!1;let C=function(D){let F=-1,E=0,G=-1;for(let H=0;H<D.length;H++){var O=D[H];"preprocessor"===O.type&&(O.data.match(/#(if|ifdef|ifndef)\s+.+/)?++E:O.data.match(/#endif\s*.*/)&&--E);("afterVersion"===x||"afterPrecision"===
x)&&"preprocessor"===O.type&&/^#version/.test(O.data)&&(G=Math.max(G,H));if("afterPrecision"===x&&"keyword"===O.type&&"precision"===O.data){a:{for(O=H;O<D.length;O++){const K=D[O];if("operator"===K.type&&";"===K.data)break a}O=null}if(null===O)throw Error("precision statement not followed by any semicolons!");G=Math.max(G,O)}F<G&&0===E&&(F=H)}return F+1}(w);B(C-1)&&w.splice(C++,0,y);for(const D of A)w.splice(C++,0,D);B(C-1)&&B(C)&&w.splice(C,0,y)}function c(w,A,x,y="lowp"){a(w,[{type:"keyword",data:"out"},
{type:"whitespace",data:" "},{type:"keyword",data:y},{type:"whitespace",data:" "},{type:"keyword",data:x},{type:"whitespace",data:" "},{type:"ident",data:A},{type:"operator",data:";"}],"afterPrecision")}function d(w,A,x,y,B="lowp"){a(w,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:y.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},
{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:B},{type:"whitespace",data:" "},{type:"keyword",data:x},{type:"whitespace",data:" "},{type:"ident",data:A},{type:"operator",data:";"}],"afterPrecision")}n={exports:{}};(function(w){(function(A){A=A();void 0!==A&&(w.exports=A)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})})(n);
const f=n.exports;n={exports:{}};(function(w){(function(A){A=A();void 0!==A&&(w.exports=A)})(function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})})(n);const l=n.exports;n={exports:{}};(function(w){(function(A){A=A();void 0!==A&&(w.exports=A)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})})(n);
const m=n.exports;var k="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const q=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"],t=new Map;u.transpileShader=function(w,A){var x=z.shaderTranspiler.enableCache?t.get(w):null;if(h.isSome(x))return x;x=p();var y=[];y=y.concat(x(w));x=y=y.concat(x(null));if("300 es"===e(x,"100","300 es"))return w;var B=y=null;const C={},D={};for(let O=
0;O<x.length;++O){const H=x[O];switch(H.type){case "keyword":A===r.ShaderType.VERTEX_SHADER&&"attribute"===H.data?H.data="in":"varying"===H.data&&(H.data=A===r.ShaderType.VERTEX_SHADER?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(H.data.trim())&&(H.data=H.data.replace(/(2D|Cube|EXT)/g,""));A===r.ShaderType.FRAGMENT_SHADER&&"gl_FragColor"===H.data&&(y||(y=b(x,C,"fragColor"),c(x,y,"vec4")),H.data=y);if(A===r.ShaderType.FRAGMENT_SHADER&&"gl_FragData"===H.data){{var F=
void 0;let K=void 0;var E=x;var G=O+1;let P=-1;for(;G<E.length;G++){const L=E[G];if("operator"===L.type&&("["===L.data&&(K=G),"]"===L.data)){F=G;break}"integer"===L.type&&(P=parseInt(L.data,10))}K&&F&&E.splice(K,F-K+1);E=P}F=b(x,C,"fragData");d(x,F,"vec4",E,"mediump");H.data=F}else A===r.ShaderType.FRAGMENT_SHADER&&"gl_FragDepthEXT"===H.data&&(B||(B=b(x,C,"gl_FragDepth")),H.data=B);break;case "ident":if(v.includes(H.data)){if(E=A===r.ShaderType.VERTEX_SHADER)a:{for(E=O-1;0<=E;E--)if(F=x[E],"whitespace"!==
F.type&&"block-comment"!==F.type)if("keyword"===F.type){if("attribute"===F.data||"in"===F.data){E=!0;break a}}else break;E=!1}if(E)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");H.data in D||(D[H.data]=b(x,C,H.data));H.data=D[H.data]}}}for(A=x.length-1;0<=A;--A)y=x[A],"preprocessor"===y.type&&((B=y.data.match(/#extension\s+(.*):/))&&B[1]&&q.includes(B[1].trim())&&(B=x[A+1],x.splice(A,B&&"whitespace"===B.type?2:1)),(B=y.data.match(/#ifdef\s+(.*)/))&&B[1]&&
q.includes(B[1].trim())&&(y.data="#if 1"),(B=y.data.match(/#ifndef\s+(.*)/))&&B[1]&&q.includes(B[1].trim())&&(y.data="#if 0"));x=g(x);z.shaderTranspiler.enableCache&&t.set(w,x);return x};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/testUtils":function(){define(["exports"],function(u){u.shaderTranspiler={enableCache:!1};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/BrushOverlay":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../definitions ../Utils ./WGLBrush ../../../../webgl/enums".split(" "),function(u,n,h,r,v,z){return function(p){function g(){var b=p.apply(this,arguments)||this;
b._desc={vsPath:"overlay/overlay",fsPath:"overlay/overlay",attributes:new Map([["a_pos",0],["a_uv",1]])};return b}u._inheritsLoose(g,p);var e=g.prototype;e.dispose=function(){};e.prepareState=function({context:b}){b.setBlendingEnabled(!0);b.setColorMask(!0,!0,!0,!0);b.setBlendFunctionSeparate(z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA,z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA);b.setStencilWriteMask(0);b.setStencilTestEnabled(!0);b.setStencilFunction(z.CompareFunction.GREATER,255,
255)};e.draw=function(b,a){const {context:c,painter:d,requestRender:f}=b;if(a.isReady){var {computedOpacity:l,dvsMat3:m,isWrapAround:k,texture:q}=a;b.timeline.begin(this.name);var t=d.materialManager.getProgram(this._desc);if(n.isSome(f)&&!t.isCompiled)f();else{var w=r.createProgramDescriptor("overlay",{geometry:[{location:0,name:"a_pos",count:2,type:z.DataType.FLOAT}],tex:[{location:1,name:"a_uv",count:2,type:z.DataType.UNSIGNED_SHORT}]});if(a=a.getVAO(c,w.bufferLayouts,w.attributes))c.bindVAO(a),
c.useProgram(t),c.bindTexture(q,h.TEXTURE_BINDING_BITMAP),t.setUniformMatrix3fv("u_dvsMat3",m),t.setUniform1i("u_texture",h.TEXTURE_BINDING_BITMAP),t.setUniform1f("u_opacity",l),c.drawArrays(z.PrimitiveType.TRIANGLE_STRIP,0,k?10:4),c.bindVAO(),b.timeline.end(this.name)}}};return g}(v)})},"esri/views/2d/engine/webgl/brushes/WGLBrushDotDensity":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../core/RandomLCG ../definitions ../enums ./WGLGeometryBrushFill ../techniques/utils ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/FramebufferObject ../../../../webgl/Renderbuffer ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){return function(f){function l(){var k=f.apply(this,arguments)||this;k._dotTextureSize=0;k._dotTextures=null;k._dotSamplers=new Int32Array([r.TEXTURE_BINDING_RENDERER_0,r.TEXTURE_BINDING_RENDERER_1]);k._dotVAO=null;k._dotDesc={vsPath:"dot/dot",fsPath:"dot/dot",attributes:new Map([["a_pos",0]])};return k}u._inheritsLoose(l,f);var m=l.prototype;m.dispose=function(){f.prototype.dispose.call(this);this._disposeTextures();this._dotFBO=n.disposeMaybe(this._dotFBO);this._dotVAO=
n.disposeMaybe(this._dotVAO)};m.getGeometryType=function(){return v.WGLGeometryType.FILL};m.supportsSymbology=function(k){return k===v.WGLSymbologyType.DOT_DENSITY};m._drawFills=function(k,q,t,w,A,x){const {passOptions:y}=k;n.isSome(y)&&"hittest"===y.type?f.prototype._drawFills.call(this,k,q,t,w,A,x):(t=this._drawDotLocations(k,q,t,A,x),this._drawDotDensity(k,q,t))};m._drawDotDensity=function(k,q,t){const {context:w,painter:A,rendererInfo:x,requestRender:y}=k,B=A.materialManager.getProgram(this._dotDesc);
if(n.isSome(y)&&!B.isCompiled)y();else{var {rendererSchema:C}=x;p.assertRendererSchema(C,"dot-density");var D=this._createDotDensityMesh(w,this._dotDesc.attributes,{geometry:[{name:"a_pos",count:2,type:e.DataType.SHORT,divisor:0,normalized:!1,offset:0,stride:4}]});w.setStencilTestEnabled(!0);w.useProgram(B);B.setUniform1f("u_tileZoomFactor",1);B.setUniform1i("u_texture",this._dotSamplers[0]);B.setUniform1f("u_dotSize",Math.max(C.dotSize,1));B.setUniform1f("u_pixelRatio",window.devicePixelRatio);this._setSharedUniforms(B,
k,q);w.bindTexture(t,this._dotSamplers[0]);w.bindVAO(D);w.drawArrays(e.PrimitiveType.POINTS,0,262144)}};m._drawDotLocations=function(k,q,t,w,A){const {context:x,rendererInfo:y,requiredLevel:B}=k,C=x.getViewport();var {rendererSchema:D}=y;p.assertRendererSchema(D,"dot-density");const {dotScale:F,colors:E,activeDots:G,backgroundColor:O,dotValue:H}=D;x.setViewport(0,0,512,512);D=x.getBoundFramebufferObject();const K=this._createFBO(x);x.bindFramebuffer(K);x.setClearColor(0,0,0,0);x.clear(x.gl.COLOR_BUFFER_BIT|
x.gl.STENCIL_BUFFER_BIT);x.setStencilTestEnabled(!1);q=1/2**(B-q.key.level);const P=r.TILE_SIZE,L=P*window.devicePixelRatio*P*window.devicePixelRatio,M=1/q*(1/q);k=F?k.state.scale/F:1;t.setUniform1f("u_tileZoomFactor",q);t.setUniform1f("u_tileDotsOverArea",L/(r.TILE_SIZE*window.devicePixelRatio*r.TILE_SIZE*window.devicePixelRatio));t.setUniformMatrix4fv("u_dotColors",E);t.setUniform4fv("u_isActive",G);t.setUniform4fv("u_dotBackgroundColor",O);t.setUniform1f("u_dotValue",Math.max(1,H*k*M));this._bindDotDensityTextures(x,
t,y,P);x.drawElements(e.PrimitiveType.TRIANGLES,w,e.DataType.UNSIGNED_INT,A);x.setViewport(C.x,C.y,C.width,C.height);x.bindFramebuffer(D);return K.colorTexture};m._createFBO=function(k){if(n.isNone(this._dotFBO)){const q={target:e.TextureType.TEXTURE_2D,pixelFormat:e.PixelFormat.RGBA,dataType:e.PixelType.UNSIGNED_BYTE,samplingMode:e.TextureSamplingMode.NEAREST,wrapMode:e.TextureWrapMode.CLAMP_TO_EDGE,width:512,height:512},t={colorTarget:e.TargetType.TEXTURE,depthStencilTarget:e.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER},
w=new a.Renderbuffer(k,{width:512,height:512,internalFormat:e.RenderbufferFormat.DEPTH_STENCIL});this._dotFBO=new b.FramebufferObject(k,t,q,w)}return this._dotFBO};m._disposeTextures=function(){if(this._dotTextures){for(let k=0;k<this._dotTextures.length;k++)this._dotTextures[k].dispose();this._dotTextures=null}};m._bindDotDensityTextures=function(k,q,t,w){({rendererSchema:t}=t);p.assertRendererSchema(t,"dot-density");w=this._createDotDensityTextures(k,w,t.seed);q.setUniform1iv("u_dotTextures",this._dotSamplers);
for(q=0;q<w.length;q++)k.bindTexture(w[q],this._dotSamplers[q])};m._createDotDensityMesh=function(k,q,t){if(n.isNone(this._dotVAO)){var w=new Int16Array(524288);for(let A=0;512>A;A++)for(let x=0;512>x;x++)w[2*(x+512*A)]=x,w[2*(x+512*A)+1]=A;w=g.BufferObject.createVertex(k,e.Usage.STATIC_DRAW,w);this._dotVAO=new d.VertexArrayObject(k,q,t,{geometry:w},null)}return this._dotVAO};m._createDotDensityTextures=function(k,q,t){if(this._dotTextureSize!==q||this._seed!==t)this._disposeTextures(),this._dotTextureSize=
q,this._seed=t;null===this._dotTextures&&(t=new h(t),this._dotTextures=[this._allocDotDensityTexture(k,q,t),this._allocDotDensityTexture(k,q,t)]);return this._dotTextures};m._allocDotDensityTexture=function(k,q,t){const w=new Float32Array(q*q*4);for(let A=0;A<w.length;A++)w[A]=t.getFloat();return new c.Texture(k,{wrapMode:e.TextureWrapMode.REPEAT,pixelFormat:e.PixelFormat.RGBA,dataType:e.PixelType.FLOAT,samplingMode:e.TextureSamplingMode.NEAREST,width:q,height:q},w)};return l}(z)})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey ../techniques/utils ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g){function e(b){const a={geometry:[{location:0,name:"a_pos",count:2,type:g.DataType.SHORT},{location:1,name:"a_id",count:3,type:g.DataType.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:g.DataType.UNSIGNED_BYTE},{location:3,name:"a_color",count:4,type:g.DataType.UNSIGNED_BYTE,normalized:!0},{location:4,name:"a_aux1",count:4,type:g.DataType.UNSIGNED_SHORT},{location:5,name:"a_aux2",count:4,type:g.DataType.SHORT},{location:6,name:"a_aux3",count:4,type:g.DataType.UNSIGNED_BYTE},
{location:7,name:"a_zoomRange",count:2,type:g.DataType.UNSIGNED_SHORT}]};switch(b.symbologyType){case h.WGLSymbologyType.SIMPLE:case h.WGLSymbologyType.OUTLINE_FILL_SIMPLE:a.geometry.splice(7,1),a.geometry.splice(4,1)}return{shader:"materials/fill",vertexLayout:a}}return function(b){function a(){return b.apply(this,arguments)||this}u._inheritsLoose(a,b);var c=a.prototype;c.dispose=function(){};c.getGeometryType=function(){return h.WGLGeometryType.FILL};c.supportsSymbology=function(d){return d!==h.WGLSymbologyType.DOT_DENSITY};
c.drawGeometry=function(d,f,l,m){const {context:k,painter:q,rendererInfo:t,requiredLevel:w,passOptions:A,requestRender:x}=d;var y=z.FillMaterialKey.load(l.materialKey),B=p.getTechniqueFromMaterialKey(y.data);const C=n.isSome(A)&&"hittest"===A.type;var D=q.materialManager;const {shader:F,vertexLayout:E,hittestAttributes:G}=n.unwrapOr(B.programSpec,e(y));B=g.PrimitiveType.TRIANGLES;let O=r.createProgramDescriptor(y.data,E);C&&(O=this._getTriangleDesc(l.materialKey,O,G),B=g.PrimitiveType.POINTS);const {attributes:H,
bufferLayouts:K}=O;m=D.getMaterialProgram(d,y,F,H,m);!n.isSome(x)||C||m.isCompiled?(k.useProgram(m),this._setSharedUniforms(m,d,f),m.setUniform2f("u_tileOffset",512*f.key.col,512*f.key.row),y.textureBinding&&(q.textureManager.bindTextures(k,m,y),m.setUniform1f("u_zoomFactor",1/2**(w-f.key.level))),D=1/d.pixelRatio,m.setUniform1f("u_blur",D),m.setUniform1f("u_antialiasing",D),this._setSizeVVUniforms(y,m,t,f),this._setColorAndOpacityVVUniforms(y,m,t),y=l.target.getVAO(k,K,H,C),D=l.indexCount,l=l.indexFrom*
Uint32Array.BYTES_PER_ELEMENT,C&&(D/=3,l/=3),k.bindVAO(y),this._drawFills(d,f,m,B,D,l)):x()};c._drawFills=function(d,f,l,m,k,q){d.context.drawElements(m,k,g.DataType.UNSIGNED_INT,q)};return a}(v)})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../definitions ./WGLBrush ../materialKey/MaterialKey ../../../../webgl/enums".split(" "),function(u,n,h,r,v,z){return function(p){function g(){var b=p.apply(this,
arguments)||this;b._computeDesc=new Map;return b}u._inheritsLoose(g,p);var e=g.prototype;e.prepareState=function({context:b},a,c){c&&c.includes("hittest")?b.setBlendFunctionSeparate(z.BlendFactor.ONE,z.BlendFactor.ONE,z.BlendFactor.ONE,z.BlendFactor.ONE):b.setBlendFunctionSeparate(z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA,z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA);b.setBlendingEnabled(!0);b.setColorMask(!0,!0,!0,!0);b.setStencilWriteMask(0);b.setStencilTestEnabled(!0);b.setStencilFunction(z.CompareFunction.EQUAL,
a.stencilRef,255)};e.draw=function(b,a,c){var d=this.getGeometryType();a.commit(b);d=a.getGeometry(d);n.isNone(d)||(b.timeline.begin(this.name),b.attributeView.bindTextures(b.context),d.forEachCommand(f=>{const l=v.MaterialKeyBase.load(f.materialKey).symbologyType;this.supportsSymbology(l)&&this.drawGeometry(b,a,f,c)}))};e._setSharedUniforms=function(b,a,c){const {displayLevel:d,pixelRatio:f,state:l,passOptions:m}=a;n.isSome(m)&&"hittest"===m.type&&(b.setUniform2fv("u_hittestPos",m.position),b.setUniform1f("u_hittestDist",
m.distance));b.setUniform1f("u_pixelRatio",f);b.setUniformMatrix3fv("u_tileMat3",c.transforms.tileMat3);b.setUniformMatrix3fv("u_viewMat3",l.viewMat3);b.setUniformMatrix3fv("u_dvsMat3",c.transforms.dvs);b.setUniformMatrix3fv("u_displayViewMat3",l.displayViewMat3);b.setUniform1f("u_currentZoom",Math.round(d*h.MIN_MAX_ZOOM_PRECISION_FACTOR));b.setUniform1i("u_attributeTextureSize",a.attributeView.size);b.setUniform1i("u_attributeData0",h.TEXTURE_BINDING_ATTRIBUTE_DATA_0);b.setUniform1i("u_attributeData1",
h.TEXTURE_BINDING_ATTRIBUTE_DATA_1);b.setUniform1i("u_attributeData2",h.TEXTURE_BINDING_ATTRIBUTE_DATA_2);b.setUniform1i("u_attributeData3",h.TEXTURE_BINDING_ATTRIBUTE_DATA_3);b.setUniform1i("u_attributeData4",h.TEXTURE_BINDING_ATTRIBUTE_DATA_4);b.setUniform1i("u_attributeData5",h.TEXTURE_BINDING_ATTRIBUTE_DATA_5)};e._setSizeVVUniforms=function(b,a,c,d){b.vvSizeMinMaxValue&&a.setUniform4fv("u_vvSizeMinMaxValue",c.vvSizeMinMaxValue);b.vvSizeScaleStops&&a.setUniform1f("u_vvSizeScaleStopsValue",c.vvSizeScaleStopsValue);
b.vvSizeFieldStops&&(d=c.getSizeVVFieldStops(d.key.level),a.setUniform1fv("u_vvSizeFieldStopsValues",d.values),a.setUniform1fv("u_vvSizeFieldStopsSizes",d.sizes));b.vvSizeUnitValue&&a.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",c.vvSizeUnitValueToPixelsRatio)};e._setColorAndOpacityVVUniforms=function(b,a,c){b.vvColor&&(a.setUniform1fv("u_vvColorValues",c.vvColorValues),a.setUniform4fv("u_vvColors",c.vvColors));b.vvOpacity&&(a.setUniform1fv("u_vvOpacityValues",c.vvOpacityValues),a.setUniform1fv("u_vvOpacities",
c.vvOpacities))};e._setRotationVVUniforms=function(b,a,c){b.vvRotation&&a.setUniform1f("u_vvRotationType","geographic"===c.vvMaterialParameters.vvRotationType?0:1)};e._getTriangleDesc=function(b,a,c=["a_pos"]){const d=a.bufferLayouts.geometry;c=c.map(m=>d.findIndex(k=>k.name===m));b=`${b}-${c.join("-")}`;var f=this._computeDesc.get(b);if(!f){f=a.strides;const m=a.strides.geometry,k=new Map(a.attributes);var l=d.map(t=>({...t}));a=Math.max(...a.attributes.values());l={geometry:l};let q=0;for(const t of c)c=
d[t],l.geometry.push({count:c.count,name:c.name+"1",divisor:c.divisor,normalized:c.normalized,offset:m+c.offset,stride:m,type:c.type}),l.geometry.push({count:c.count,name:c.name+"2",divisor:c.divisor,normalized:c.normalized,offset:2*m+c.offset,stride:m,type:c.type}),k.set(c.name+"1",a+ ++q),k.set(c.name+"2",a+ ++q);f={bufferLayouts:l,attributes:k,strides:f};this._computeDesc.set(b,f)}return f};return g}(r)})},"esri/views/2d/engine/webgl/materialKey/MaterialKey":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../core/Error","../alignmentUtils","../enums"],function(u,n,h,r,v){function z(t){return t===v.WGLSymbologyType.SIMPLE||t===v.WGLSymbologyType.OUTLINE_FILL_SIMPLE}function p(t){return t===v.WGLSymbologyType.OUTLINE_FILL||t===v.WGLSymbologyType.OUTLINE_FILL_SIMPLE}const g=Object.keys(v.WGLSymbologyType).filter(t=>"number"===typeof v.WGLSymbologyType[t]).reduce((t,w)=>({...t,[w]:v.WGLSymbologyType[w]}),{});let e=function(){function t(A){this._data=0;this._data=A}t.load=function(A){const x=
this.shared;x.data=A;return x};var w=t.prototype;w.setBit=function(A,x){A=1<<A;this._data=x?this._data|A:this._data&~A};w.bit=function(A){return(this._data&1<<A)>>A};w.setBits=function(A,x,y){for(let B=x,C=0;B<y;B++,C++)this.setBit(B,0!==(A&1<<C))};w.bits=function(A,x){let y=0;for(let B=A,C=0;B<x;B++,C++)y|=this.bit(B)<<C;return y};w.hasVV=function(){return!1};w.setVV=function(A,x){};w.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:v.WGLSymbologyType[this.symbologyType],
options:g,namespace:"SYMBOLOGY_TYPE"}}};w.getVariationHash=function(){return this._data&~(7&this.textureBinding)};n._createClass(t,[{key:"data",get:function(){return this._data},set:function(A){this._data=A}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(A){this.setBits(A,8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(A){this.setBit(20,A)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(A){this.setBit(11,A)}},{key:"pattern",get:function(){return!!this.bit(12)},
set:function(A){this.setBit(12,A)}},{key:"textureBinding",get:function(){return this.bits(0,8)},set:function(A){this.setBits(A,0,8)}},{key:"symbologyType",get:function(){return this.bits(21,26)},set:function(A){this.setBits(A,21,26)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case v.WGLGeometryType.FILL:return"fill";case v.WGLGeometryType.MARKER:return"marker";case v.WGLGeometryType.LINE:return"line";case v.WGLGeometryType.TEXT:return"text";case v.WGLGeometryType.LABEL:return"label";
default:throw new h(`Unable to handle unknown geometryType: ${this.geometryType}`);}}}]);return t}();e.shared=new e(0);const b=t=>function(w){function A(){return w.apply(this,arguments)||this}n._inheritsLoose(A,w);var x=A.prototype;x.hasVV=function(){return w.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};x.setVV=function(y,B){w.prototype.setVV.call(this,y,B);{var C=this.geometryType;const D=v.WGLVVFlag.SIZE_FIELD_STOPS|v.WGLVVFlag.SIZE_MINMAX_VALUE|
v.WGLVVFlag.SIZE_SCALE_STOPS|v.WGLVVFlag.SIZE_UNIT_VALUE,F=(y&(v.WGLVVTarget.FIELD_TARGETS_OUTLINE|v.WGLVVTarget.MINMAX_TARGETS_OUTLINE|v.WGLVVTarget.SCALE_TARGETS_OUTLINE|v.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;B=C===v.WGLGeometryType.LINE&&B.isOutline||C===v.WGLGeometryType.FILL&&p(B.symbologyType)?D&F:D&~F}y&=B;this.vvSizeMinMaxValue=!!(y&v.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(y&v.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(y&v.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=
!!(y&v.WGLVVFlag.SIZE_SCALE_STOPS)};n._createClass(A,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(y){this.setBit(16,y)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(y){this.setBit(17,y)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(y){this.setBit(18,y)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(y){this.setBit(19,y)}}]);return A}(t),a=t=>function(w){function A(){return w.apply(this,
arguments)||this}n._inheritsLoose(A,w);var x=A.prototype;x.hasVV=function(){return w.prototype.hasVV.call(this)||this.vvRotation};x.setVV=function(y,B){w.prototype.setVV.call(this,y,B);this.vvRotation=!B.isOutline&&!!(y&v.WGLVVFlag.ROTATION)};n._createClass(A,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(y){this.setBit(15,y)}}]);return A}(t),c=t=>function(w){function A(){return w.apply(this,arguments)||this}n._inheritsLoose(A,w);var x=A.prototype;x.hasVV=function(){return w.prototype.hasVV.call(this)||
this.vvColor};x.setVV=function(y,B){w.prototype.setVV.call(this,y,B);this.vvColor=!B.isOutline&&!!(y&v.WGLVVFlag.COLOR)};n._createClass(A,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(y){this.setBit(13,y)}}]);return A}(t),d=t=>function(w){function A(){return w.apply(this,arguments)||this}n._inheritsLoose(A,w);var x=A.prototype;x.hasVV=function(){return w.prototype.hasVV.call(this)||this.vvOpacity};x.setVV=function(y,B){w.prototype.setVV.call(this,y,B);this.vvOpacity=!B.isOutline&&
!!(y&v.WGLVVFlag.OPACITY)};n._createClass(A,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(y){this.setBit(14,y)}}]);return A}(t);let f=function(t){function w(){return t.apply(this,arguments)||this}n._inheritsLoose(w,t);w.load=function(A){const x=this.shared;x.data=A;return x};w.from=function(A){const {symbologyType:x,vvFlags:y}=A,B=this.load(0);B.geometryType=v.WGLGeometryType.FILL;B.symbologyType=x;x!==v.WGLSymbologyType.DOT_DENSITY&&B.setVV(y,A);return B.data};w.prototype.getVariation=
function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return w}(c(d(b(e))));f.shared=new f(0);let l=function(t){function w(){return t.apply(this,arguments)||this}n._inheritsLoose(w,t);w.load=function(A){const x=this.shared;x.data=A;return x};w.from=function(A){const {symbologyType:x,vvFlags:y}=
A,B=this.load(0);B.geometryType=v.WGLGeometryType.MARKER;B.symbologyType=x;x!==v.WGLSymbologyType.HEATMAP&&B.setVV(y,A);return B.data};w.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return w}(c(d(a(b(e)))));l.shared=new l(0);let m=function(t){function w(){return t.apply(this,
arguments)||this}n._inheritsLoose(w,t);w.load=function(A){const x=this.shared;x.data=A;return x};w.from=function(A){const x=this.load(0);x.geometryType=v.WGLGeometryType.LINE;x.symbologyType=A.symbologyType;x.setVV(A.vvFlags,A);return x.data};w.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};
return w}(c(d(b(e))));m.shared=new m(0);let k=function(t){function w(){return t.apply(this,arguments)||this}n._inheritsLoose(w,t);w.load=function(A){const x=this.shared;x.data=A;return x};w.from=function(A){const x=this.load(0);x.geometryType=v.WGLGeometryType.TEXT;x.symbologyType=A.symbologyType;x.setVV(A.vvFlags,A);return x.data};w.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,
vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return w}(c(d(a(b(e)))));k.shared=new k(0);let q=function(t){function w(){return t.apply(this,arguments)||this}n._inheritsLoose(w,t);w.load=function(A){const x=this.shared;x.data=A;return x};w.from=function(A){const x=this.load(0);x.geometryType=v.WGLGeometryType.LABEL;x.symbologyType=A.symbologyType;x.setVV(A.vvFlags,A);x.mapAligned=r.isMapAligned(A.placement);return x.data};w.prototype.getVariation=
function(){return{...t.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return w}(b(e));q.shared=new q(0);u.FillMaterialKey=f;u.LabelMaterialKey=q;u.LineMaterialKey=m;u.MarkerMaterialKey=l;u.MaterialKeyBase=e;u.TextMaterialKey=k;u.createMaterialKey=function(t,w){switch(t){case v.WGLGeometryType.FILL:return f.from(w);case v.WGLGeometryType.LINE:return m.from(w);
case v.WGLGeometryType.MARKER:return l.from(w);case v.WGLGeometryType.TEXT:return k.from(w);case v.WGLGeometryType.LABEL:return q.from(w);default:throw Error(`Unable to createMaterialKey for unknown geometryType ${t}`);}};u.hasOutlineFillSymbology=function(t){return p(t.symbologyType)};u.hasSimpleSymbology=function(t){return z(t.symbologyType)};u.hydrateMaterialKey=function(t){switch(e.load(t).geometryType){case v.WGLGeometryType.MARKER:return new l(t);case v.WGLGeometryType.FILL:return new f(t);
case v.WGLGeometryType.LINE:return new m(t);case v.WGLGeometryType.TEXT:return new k(t);case v.WGLGeometryType.LABEL:return new q(t)}};u.isOutlineFillSymbology=p;u.isSimpleSymbology=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/alignmentUtils":function(){define(["exports"],function(u){u.HAlign=void 0;(function(n){n[n.Left=-1]="Left";n[n.Center=0]="Center";n[n.Right=1]="Right"})(u.HAlign||(u.HAlign={}));u.VAlign=void 0;(function(n){n[n.Top=
1]="Top";n[n.Center=0]="Center";n[n.Bottom=-1]="Bottom";n[n.Baseline=2]="Baseline"})(u.VAlign||(u.VAlign={}));u.getAlignmentFromPlacement=function(n){switch(n){case "above-left":case "esriServerPointLabelPlacementAboveLeft":return[u.HAlign.Right,u.VAlign.Bottom];case "above-center":case "above-along":case "esriServerPointLabelPlacementAboveCenter":case "esriServerLinePlacementAboveAlong":return[u.HAlign.Center,u.VAlign.Bottom];case "above-right":case "esriServerPointLabelPlacementAboveRight":return[u.HAlign.Left,
u.VAlign.Bottom];case "center-left":case "esriServerPointLabelPlacementCenterLeft":return[u.HAlign.Right,u.VAlign.Center];case "center-center":case "center-along":case "esriServerPointLabelPlacementCenterCenter":case "esriServerLinePlacementCenterAlong":return[u.HAlign.Center,u.VAlign.Center];case "center-right":case "esriServerPointLabelPlacementCenterRight":return[u.HAlign.Left,u.VAlign.Center];case "below-left":case "esriServerPointLabelPlacementBelowLeft":return[u.HAlign.Right,u.VAlign.Top];case "below-center":case "below-along":case "esriServerPointLabelPlacementBelowCenter":case "esriServerLinePlacementBelowAlong":return[u.HAlign.Center,
u.VAlign.Top];case "below-right":case "esriServerPointLabelPlacementBelowRight":return[u.HAlign.Left,u.VAlign.Top];case "always-horizontal":case "esriServerPolygonPlacementAlwaysHorizontal":return[u.HAlign.Center,u.VAlign.Center];default:return console.debug(`Found invalid placement type ${n}`),[u.HAlign.Center,u.VAlign.Center]}};u.getJustification=function(n){switch(n){case "left":return u.HAlign.Left;case "right":return u.HAlign.Right;case "center":return u.HAlign.Center}};u.getXAnchorDirection=
function(n){switch(n){case "left":return u.HAlign.Left;case "right":return u.HAlign.Right;case "center":return u.HAlign.Center}};u.getXDirection=function(n){switch(n){case u.HAlign.Right:return-1;case u.HAlign.Center:return 0;case u.HAlign.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${n}`),0}};u.getYAnchorDirection=function(n){switch(n){case "top":return u.VAlign.Top;case "middle":return u.VAlign.Center;case "baseline":return u.VAlign.Baseline;case "bottom":return u.VAlign.Bottom}};
u.getYDirection=function(n){switch(n){case u.VAlign.Top:return 1;case u.VAlign.Center:return 0;case u.VAlign.Bottom:case u.VAlign.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${n}`),0}};u.isMapAligned=function(n){switch(n){case "above-along":case "below-along":case "center-along":case "esriServerLinePlacementAboveAlong":case "esriServerLinePlacementBelowAlong":case "esriServerLinePlacementCenterAlong":return!0;default:return!1}};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/techniques/utils":function(){define("exports ../../../../../core/Error ../enums ../materialKey/MaterialKey ./Technique ./dotDensity/TechniqueDotDensity ./heatmap/TechniqueHeatmap ./pieChart/TechniquePieChart".split(" "),function(u,n,h,r,v,z,p,g){u.assertRendererSchema=function(e,b){if(e.type!==b)throw new n("material-view-model:unexpected-renderer-schema",`expected to find renderer schema of type "${b}" but found type "${e.type}"`);
};u.getTechniqueFromMaterialKey=function(e){const {geometryType:b,symbologyType:a}=r.MaterialKeyBase.load(e);switch(b){case h.WGLGeometryType.FILL:switch(a){case h.WGLSymbologyType.DOT_DENSITY:return z.DotDensityTechnique}break;case h.WGLGeometryType.MARKER:switch(a){case h.WGLSymbologyType.HEATMAP:return p.HeatmapTechnique;case h.WGLSymbologyType.PIE_CHART:return g.PieChartTechnique}}return v.Technique};u.getTechniqueFromRenderer=function(e){switch(e.type){case "dot-density":return z.DotDensityTechnique;
case "heatmap":return p.HeatmapTechnique;case "pie-chart":return g.PieChartTechnique;default:return v.Technique}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/techniques/Technique":function(){define(["exports","../../../../../core/maybe"],function(u,n){let h=function(){function r(){}r.getStorageSpec=function(v){return null};r.createOrUpdateRendererSchema=function(v,z){return n.isSome(v)&&"default"===v.type?v:{type:"default"}};
r.getVariation=function(v){return{}};r.getVariationHash=function(v){return 0};return r}();h.type="default";h.programSpec=null;u.Technique=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/techniques/dotDensity/TechniqueDotDensity":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../color ../../definitions ../Technique ../../../../../webgl/enums".split(" "),function(u,
n,h,r,v,z,p){z=function(g){function e(){return g.apply(this,arguments)||this}n._inheritsLoose(e,g);e.getStorageSpec=function({attributes:b}){return{visualVariables:!1,attributes:null!=b?b:null}};e._createRendererSchema=function(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}};e.createOrUpdateRendererSchema=function(b,a){const {attributes:c,dotValue:d,referenceScale:f,
dotSize:l,dotBlendingEnabled:m,seed:k,backgroundColor:q}=a;b=h.isSome(b)&&"dot-density"===b.type?b:this._createRendererSchema();b.dotValue=d;b.dotSize=l;b.dotScale=f;b.dotBlending=m;b.seed=k;const {colors:t,activeDots:w,backgroundColor:A}=b;for(var x=0;x<v.DOT_DENSITY_MAX_FIELDS;x++)r.writeColor(t,x>=c.length?null:c[x].color,4*x);for(x=0;8>x;x++)w[x]=x<a.attributes.length?1:0;r.writeColor(A,q);return b};e.getVariation=function(b){return{ddDotBlending:b.dotBlending}};e.getVariationHash=function(b){return b.dotBlending?
1:0};return e}(z.Technique);z.type="dot-density";z.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:p.DataType.SHORT},{location:1,name:"a_id",count:3,type:p.DataType.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:p.DataType.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:p.DataType.FLOAT}]}};u.DotDensityTechnique=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/techniques/heatmap/TechniqueHeatmap":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../renderers/support/heatmapUtils ../Technique ../../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p){z=function(g){function e(){return g.apply(this,arguments)||this}n._inheritsLoose(e,g);e.getStorageSpec=function({field:b,valueExpression:a}){return{visualVariables:!1,attributes:b||a?[{field:b,valueExpression:a}]:null}};e._createRendererSchema=function(){return{type:"heatmap",radius:-1,referenceScale:-1,isFieldActive:0,minDensity:-1,densityRange:-1,kernel:null,gradient:null,gradientHash:"invalid"}};e.createOrUpdateRendererSchema=function(b,a){const {radius:c,minDensity:d,maxDensity:f,
referenceScale:l,field:m,valueExpression:k,colorStops:q}=a;a=f-d;const t=m||k?1:0,w=q.map(({color:y,ratio:B})=>`${B}:${y.toString()}`).join();let A=!0,x;h.isSome(b)&&"heatmap"===b.type?(x=b,A=w!==b.gradientHash):x=this._createRendererSchema();x.radius=r.pt2px(c);x.minDensity=d;x.densityRange=a;x.referenceScale=l;x.isFieldActive=t;A&&(x.gradient=v.generateGradient(q),x.gradientHash=w);return x};return e}(z.Technique);z.type="heatmap";z.programSpec={shader:"materials/icon/heatmapAccumulate",vertexLayout:{geometry:[{location:0,
name:"a_pos",count:2,type:p.DataType.SHORT},{location:1,name:"a_vertexOffset",count:2,type:p.DataType.SHORT},{location:4,name:"a_id",count:4,type:p.DataType.UNSIGNED_BYTE}]}};u.HeatmapTechnique=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/techniques/pieChart/TechniquePieChart":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../Color ../../../../../../core/maybe ../../../../../../core/screenUtils ../../color ../../definitions ../Technique ../../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g,e){g=function(b){function a(){return b.apply(this,arguments)||this}n._inheritsLoose(a,b);a.getStorageSpec=function({attributes:c}){return{visualVariables:!0,attributes:null!=c?c:null}};a._createRendererSchema=function(){return{type:"pie-chart",colors:new Float32Array(4*p.CHART_MAX_FIELDS),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}};a.createOrUpdateRendererSchema=
function(c,d){const {attributes:f,defaultColor:l,holePercentage:m,othersCategory:k,outline:q}=d;c=r.isSome(c)&&"pie-chart"===c.type?c:this._createRendererSchema();for(d=0;d<p.CHART_MAX_FIELDS;d++){const t=d>=f.length?new h([0,0,0,0]):f[d].color;z.writeColor(c.colors,t,4*d)}z.writeColor(c.defaultColor,l);z.writeColor(c.othersColor,null==k?void 0:k.color);z.writeColor(c.outlineColor,null==q?void 0:q.color);c.outlineWidth=v.pt2px((null==q?void 0:q.width)||0);c.holePercentage=m;c.sectorThreshold=(null==
k?void 0:k.threshold)||0;c.numberOfFields=f.length;return c};a.getVariation=function(c){return{numberOfFields:c.numberOfFields}};a.getVariationHash=function(c){return c.numberOfFields};return a}(g.Technique);g.type="pie-chart";g.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:e.DataType.SHORT},{location:1,name:"a_vertexOffset",count:2,type:e.DataType.SHORT},{location:2,name:"a_texCoords",count:2,type:e.DataType.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",
count:2,type:e.DataType.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:e.DataType.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:e.DataType.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:e.DataType.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:e.DataType.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:e.DataType.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]};u.PieChartTechnique=g;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushHeatmap":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Logger ../../../../../core/maybe ../enums ../VertexStream ./WGLGeometryBrushMarker ../techniques/utils ../../../../webgl/context-util ../../../../webgl/enums ../../../../webgl/FramebufferObject ../../../../webgl/Texture".split(" "),function(u,n,h,r,v,z,p,g,e,b,a){const c=n.getLogger("esri.views.2d.engine.webgl.brushes.WGLBrushHeatmap"),
d={vsPath:"heatmap/heatmapResolve",fsPath:"heatmap/heatmapResolve",attributes:new Map([["a_position",0]])};return function(f){function l(){return f.apply(this,arguments)||this}u._inheritsLoose(l,f);var m=l.prototype;m.supportsSymbology=function(k){return k===r.WGLSymbologyType.HEATMAP};m.dispose=function(){f.prototype.dispose.call(this);this._accumulateOutputTexture=h.disposeMaybe(this._accumulateOutputTexture);this._accumulateFramebuffer=h.disposeMaybe(this._accumulateFramebuffer);this._resolveGradientTexture=
h.disposeMaybe(this._resolveGradientTexture);this._tileQuad=h.disposeMaybe(this._tileQuad)};m.drawGeometry=function(k,q,t,w){const {defines:A}=this._loadQualityProfile(k.context);f.prototype.drawGeometry.call(this,k,q,t,w?[...w,...A]:A)};m._drawMarkers=function(k,q,t,w,A,x,y){const {context:B}=k,C=B.getBoundFramebufferObject(),D=B.getViewport();this._prepareAccumulatePass(k,q,t,y);B.drawElements(w,A,e.DataType.UNSIGNED_INT,x);y||this._drawResolvePass(k,q,C,D)};m._prepareAccumulatePass=function(k,
q,t,w){const {context:A,rendererInfo:x,state:y,displayLevel:B}=k;({rendererSchema:k}=x);p.assertRendererSchema(k,"heatmap");const {referenceScale:C,radius:D,isFieldActive:F}=k;this._loadResources(A);this._updateResources(k);t.setUniform1f("u_radius",D*(0!==C?C/y.scale:1)*2**(q.key.level-B));w||(A.bindFramebuffer(this._accumulateFramebuffer),t.setUniform1f("u_isFieldActive",F),A.setViewport(0,0,this._accumulateFramebuffer.width,this._accumulateFramebuffer.height),A.setBlendingEnabled(!0),A.setBlendFunction(e.BlendFactor.ONE,
e.BlendFactor.ONE),A.setClearColor(0,0,0,0),A.clear(e.ClearBufferBit.COLOR_BUFFER_BIT))};m._drawResolvePass=function(k,q,t,w){const {context:A,painter:x,rendererInfo:y}=k;var {rendererSchema:B}=y;p.assertRendererSchema(B,"heatmap");const {radius:C,minDensity:D,densityRange:F}=B;({defines:B}=this._loadQualityProfile(A));B=x.materialManager.getProgram(d,B);A.useProgram(B);this._setSharedUniforms(B,k,q);A.bindFramebuffer(t);A.setViewport(0,0,w.width,w.height);A.setBlendFunction(e.BlendFactor.ONE,e.BlendFactor.ONE_MINUS_SRC_ALPHA);
A.bindTexture(this._accumulateOutputTexture,8);A.bindTexture(this._resolveGradientTexture,9);B.setUniform1i("u_texture",8);B.setUniform1i("u_gradient",9);B.setUniform2f("u_densityMinAndInvRange",D,1/F);B.setUniform1f("u_densityNormalization",3/(C*C*Math.PI));this._tileQuad.draw()};m._loadResources=function(k){var q,t,w,A;const x=k.type===g.ContextType.WEBGL2,{dataType:y,samplingMode:B,shadingRate:C}=this._loadQualityProfile(k);null!=(q=this._accumulateOutputTexture)?q:this._accumulateOutputTexture=
new a.Texture(k,{target:e.TextureType.TEXTURE_2D,pixelFormat:x?e.PixelFormat.RED:e.PixelFormat.RGBA,internalFormat:x?y===e.PixelType.FLOAT?e.SizedPixelFormat.R32F:e.SizedPixelFormat.R16F:e.PixelFormat.RGBA,dataType:y,samplingMode:B,wrapMode:e.TextureWrapMode.CLAMP_TO_EDGE,width:Math.round(512*C),height:Math.round(512*C)});null!=(t=this._accumulateFramebuffer)?t:this._accumulateFramebuffer=new b.FramebufferObject(k,{},this._accumulateOutputTexture);null!=(w=this._resolveGradientTexture)?w:this._resolveGradientTexture=
new a.Texture(k,{target:e.TextureType.TEXTURE_2D,pixelFormat:e.PixelFormat.RGBA,dataType:e.PixelType.UNSIGNED_BYTE,samplingMode:e.TextureSamplingMode.LINEAR,wrapMode:e.TextureWrapMode.CLAMP_TO_EDGE});null!=(A=this._tileQuad)?A:this._tileQuad=new v(k,[0,0,1,0,0,1,1,1])};m._updateResources=function(k){const {gradientHash:q,gradient:t}=k;this._prevGradientHash!==q&&(this._resolveGradientTexture.resize(t.length/4,1),this._resolveGradientTexture.setData(t),this._prevGradientHash=q)};m._loadQualityProfile=
function(k){if(h.isNone(this._qualityProfile)){const {textureFloat:q,colorBufferFloat:t}=k.capabilities,{textureFloat:w,textureFloatLinear:A,textureHalfFloat:x,textureHalfFloatLinear:y,HALF_FLOAT:B}=q,{textureFloat:C,textureHalfFloat:D,floatBlend:F}=t;let E,G;k=w&&C&&F;const O=x&&D;k&&A?(E=e.PixelType.FLOAT,G=e.TextureSamplingMode.LINEAR):O&&y?(E=B,G=e.TextureSamplingMode.LINEAR):k?(E=e.PixelType.FLOAT,G=e.TextureSamplingMode.NEAREST):O?(E=B,G=e.TextureSamplingMode.NEAREST):c.error("Missing webgl extensions for heatmap!");
G===e.TextureSamplingMode.NEAREST&&c.warnOnce("Missing linear filtering webgl extension(s). Heatmap quality may be reduced.");this._qualityProfile={dataType:E,samplingMode:G,shadingRate:.5,defines:E===B?["heatmapPrecisionHalfFloat"]:[]}}return this._qualityProfile};return l}(z)})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey ../techniques/utils ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g){const e={shader:"materials/icon",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:g.DataType.SHORT},{location:1,name:"a_vertexOffset",count:2,type:g.DataType.SHORT},{location:2,name:"a_texCoords",count:2,type:g.DataType.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:g.DataType.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:g.DataType.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:g.DataType.UNSIGNED_BYTE,normalized:!0},{location:6,
name:"a_outlineColor",count:4,type:g.DataType.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:g.DataType.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:g.DataType.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]};return function(b){function a(){return b.apply(this,arguments)||this}u._inheritsLoose(a,b);var c=a.prototype;c.dispose=function(){};c.getGeometryType=function(){return h.WGLGeometryType.MARKER};c.supportsSymbology=function(d){return d!==
h.WGLSymbologyType.HEATMAP&&d!==h.WGLSymbologyType.PIE_CHART};c.drawGeometry=function(d,f,l,m){const {context:k,painter:q,rendererInfo:t,state:w,passOptions:A,requestRender:x}=d;var y=z.MarkerMaterialKey.load(l.materialKey),B=p.getTechniqueFromMaterialKey(y.data);const C=n.isSome(A)&&"hittest"===A.type,{shader:D,vertexLayout:F,hittestAttributes:E}=n.unwrapOr(B.programSpec,e);B=g.PrimitiveType.TRIANGLES;var G=r.createProgramDescriptor(y.data,F);C&&(G=this._getTriangleDesc(l.materialKey,G,E),B=g.PrimitiveType.POINTS);
const {attributes:O,bufferLayouts:H}=G;m=q.materialManager.getMaterialProgram(d,y,D,O,m);!n.isSome(x)||C||m.isCompiled?(k.useProgram(m),y.textureBinding&&q.textureManager.bindTextures(k,m,y,!0),this._setSharedUniforms(m,d,f),m.setUniformMatrix3fv("u_displayMat3",y.vvRotation?w.displayViewMat3:w.displayMat3),this._setSizeVVUniforms(y,m,t,f),this._setColorAndOpacityVVUniforms(y,m,t),this._setRotationVVUniforms(y,m,t),y=l.target.getVAO(k,H,O,C),G=l.indexCount,l=l.indexFrom*Uint32Array.BYTES_PER_ELEMENT,
C&&(G/=3,l/=3),k.bindVAO(y),this._drawMarkers(d,f,m,B,G,l,C),k.bindVAO(null)):x()};c._drawMarkers=function(d,f,l,m,k,q,t){d.context.drawElements(m,k,g.DataType.UNSIGNED_INT,q)};return a}(v)})},"esri/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec4f32 ../DefaultVertexAttributeLayouts ./WGLBrush ../shaders/BackgroundPrograms ../shaders/TileInfoPrograms ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/ProgramTemplate ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){return function(d){function f(){var m=d.apply(this,arguments)||this;m._color=h.fromValues(1,0,0,1);return m}u._inheritsLoose(f,d);var l=f.prototype;l.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&
(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};l.prepareState=function({context:m}){m.setBlendingEnabled(!0);m.setBlendFunctionSeparate(e.BlendFactor.ONE,e.BlendFactor.ONE_MINUS_SRC_ALPHA,e.BlendFactor.ONE,e.BlendFactor.ONE_MINUS_SRC_ALPHA);m.setColorMask(!0,!0,!0,!0);m.setStencilWriteMask(0);m.setStencilTestEnabled(!1)};l.draw=function(m,k){const {context:q,requestRender:t}=m;if(k.isReady)if(this._loadWGLResources(q),!n.isSome(t)||this._outlineProgram.isCompiled&&
this._tileInfoProgram.isCompiled){q.bindVAO(this._outlineVertexArrayObject);q.useProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix3fv("u_dvsMat3",k.transforms.dvs);this._outlineProgram.setUniform2f("u_coord_range",k.rangeX,k.rangeY);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);q.drawArrays(e.PrimitiveType.LINE_STRIP,0,4);if(m=this._getTexture(q,k))q.bindVAO(this._tileInfoVertexArrayObject),q.useProgram(this._tileInfoProgram),
q.bindTexture(m,0),this._tileInfoProgram.setUniformMatrix3fv("u_dvsMat3",k.transforms.dvs),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform2f("u_coord_ratio",k.rangeX/k.width,k.rangeY/k.height),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",m.descriptor.width,m.descriptor.height),q.drawArrays(e.PrimitiveType.TRIANGLE_STRIP,0,4);q.bindVAO()}else t()};l._loadWGLResources=function(m){if(!this._outlineProgram||!this._tileInfoProgram){var k=
b.createProgram(m,z.background),q=b.createProgram(m,p.tileInfo),t=new Int8Array([0,0,1,0,1,1,0,1]);t=g.BufferObject.createVertex(m,e.Usage.STATIC_DRAW,t);t=new c.VertexArrayObject(m,z.background.attributes,r.Pos2b,{geometry:t});var w=new Int8Array([0,0,1,0,0,1,1,1]);w=g.BufferObject.createVertex(m,e.Usage.STATIC_DRAW,w);m=new c.VertexArrayObject(m,p.tileInfo.attributes,r.Pos2b,{geometry:w});this._outlineProgram=k;this._tileInfoProgram=q;this._outlineVertexArrayObject=t;this._tileInfoVertexArrayObject=
m}};l._getTexture=function(m,k){if(k.texture&&k.triangleCountReportedInDebug===k.triangleCount)return k.texture;k.triangleCountReportedInDebug=k.triangleCount;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","300"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));const q=k.triangleCount;let t=k.key.id;0<k.triangleCount&&(t+=`, ${q}`);const w=this._canvas,A=w.getContext("2d");
A.font="24px sans-serif";A.textAlign="left";A.textBaseline="top";A.clearRect(0,0,300,32);1E5<q?(A.fillStyle="red",A.fillRect(0,0,300,32),A.fillStyle="black"):(A.clearRect(0,0,300,32),A.fillStyle="blue");A.fillText(t,0,0);k.texture=new a.Texture(m,{target:e.TextureType.TEXTURE_2D,pixelFormat:e.PixelFormat.RGBA,dataType:e.PixelType.UNSIGNED_BYTE,samplingMode:e.TextureSamplingMode.NEAREST,wrapMode:e.TextureWrapMode.CLAMP_TO_EDGE},w);return k.texture};return f}(v)})},"esri/views/2d/engine/webgl/DefaultVertexAttributeLayouts":function(){define(["exports",
"../../../webgl/enums","../../../webgl/VertexElementDescriptor"],function(u,n,h){const r={geometry:[new h.VertexElementDescriptor("a_pos",2,n.DataType.BYTE,0,2)]},v={geometry:[new h.VertexElementDescriptor("a_pos",2,n.DataType.BYTE,0,4),new h.VertexElementDescriptor("a_tex",2,n.DataType.BYTE,2,4)]};n={geometry:[new h.VertexElementDescriptor("a_pos",2,n.DataType.UNSIGNED_SHORT,0,4)]};u.Pos2b=r;u.Pos2us=n;u.PosTex2b=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/webgl/shaders/TileInfoPrograms":function(){define(["exports","./sources/resolver"],function(u,n){n={shaders:{vertexShader:n.resolveIncludes("tileInfo/tileInfo.vert"),fragmentShader:n.resolveIncludes("tileInfo/tileInfo.frag")},attributes:new Map([["a_pos",0]])};u.tileInfo=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushPieChart":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers",
"../enums","./WGLGeometryBrushMarker","../techniques/utils","../../../../webgl/enums"],function(u,n,h,r,v){return function(z){function p(){return z.apply(this,arguments)||this}u._inheritsLoose(p,z);var g=p.prototype;g.supportsSymbology=function(e){return e===n.WGLSymbologyType.PIE_CHART};g._drawMarkers=function(e,b,a,c,d,f,l){({context:b}=e);({rendererInfo:e}=e);({rendererSchema:e}=e);r.assertRendererSchema(e,"pie-chart");a.setUniform4fv("u_colors",e.colors);a.setUniform4fv("u_defaultColor",e.defaultColor);
a.setUniform4fv("u_othersColor",e.othersColor);a.setUniform4fv("u_outlineColor",e.outlineColor);a.setUniform1f("u_donutRatio",e.holePercentage);a.setUniform1f("u_sectorThreshold",e.sectorThreshold);a.setUniform1f("u_outlineWidth",e.outlineWidth);b.drawElements(c,d,v.DataType.UNSIGNED_INT,f)};return p}(h)})},"esri/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec4f32 ../DefaultVertexAttributeLayouts ./WGLBrush ../shaders/BackgroundPrograms ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/ProgramTemplate ../../../../webgl/VertexArrayObject".split(" "),
function(u,n,h,r,v,z,p,g,e,b){return function(a){function c(){var f=a.apply(this,arguments)||this;f._color=h.fromValues(1,0,0,1);f._initialized=!1;return f}u._inheritsLoose(c,a);var d=c.prototype;d.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};d.prepareState=function({context:f},l){f.setDepthWriteEnabled(!1);f.setDepthTestEnabled(!1);f.setStencilTestEnabled(!0);
f.setBlendingEnabled(!1);f.setColorMask(!1,!1,!1,!1);f.setStencilOp(g.StencilOperation.KEEP,g.StencilOperation.KEEP,g.StencilOperation.REPLACE);f.setStencilWriteMask(255);f.setStencilFunctionSeparate(g.Face.FRONT_AND_BACK,g.CompareFunction.GREATER,l.stencilRef,255)};d.draw=function(f,l){const {context:m,requestRender:k}=f;this._initialized||this._initialize(m);n.isSome(k)&&!this._solidProgram.isCompiled?k():(m.bindVAO(this._solidVertexArrayObject),m.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",
l.transforms.dvs),this._solidProgram.setUniform2fv("u_coord_range",[l.rangeX,l.rangeY]),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),m.drawArrays(g.PrimitiveType.TRIANGLE_STRIP,0,4),m.bindVAO())};d._initialize=function(f){if(this._initialized)return!0;const l=e.createProgram(f,z.background);if(!l)return!1;var m=new Int8Array([0,0,1,0,0,1,1,1]);m=p.BufferObject.createVertex(f,g.Usage.STATIC_DRAW,m);f=new b.VertexArrayObject(f,z.background.attributes,
r.Pos2b,{geometry:m});this._solidProgram=l;this._solidVertexArrayObject=f;return this._initialized=!0};return c}(v)})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLBackground":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../chunks/mat3f32 ../../../../../chunks/vec4f32 ../definitions ../enums ../number ./WGLBrush ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/VertexArrayObject".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){b=function(f){function l(){var k=f.apply(this,arguments)||this;k._color=z.fromValues(1,0,0,1);k._patternMatrix=v.create();k._programOptions={id:!1,pattern:!1};return k}n._inheritsLoose(l,f);var m=l.prototype;m.dispose=function(){this._vao&&(this._vao.dispose(),this._vao=null)};m.drawMany=function(k,q){const {context:t,painter:w,styleLayerUID:A,requestRender:x}=k;this._loadWGLResources(k);const y=k.displayLevel;var B=k.styleLayer,C=B.backgroundMaterial;const D=w.vectorTilesMaterialManager;
var F=B.getPaintValue("background-color",y);const E=B.getPaintValue("background-opacity",y),G=B.getPaintValue("background-pattern",y),O=void 0!==G,H=F[3]*E,K=k.spriteMosaic;let P,L;const M=(window.devicePixelRatio|1)>p.VTL_HIGH_RES_CUTOFF?2:1;k=k.drawPhase===g.WGLDrawPhase.HITTEST;const J=this._programOptions;J.id=k;J.pattern=O;C=D.getMaterialProgram(t,C,J);if(!r.isSome(x)||k||C.isCompiled){t.bindVAO(this._vao);t.useProgram(C);if(O){F=K.getMosaicItemPosition(G,!0);if(r.isSome(F)){const {tl:R,br:X,
page:U}=F;P=X[0]-R[0];L=X[1]-R[1];F=K.getPageSize(U);r.isSome(F)&&(K.bind(t,c.TextureSamplingMode.LINEAR,U,p.VTL_TEXTURE_BINDING_UNIT_SPRITES),C.setUniform4f("u_tlbr",R[0],R[1],X[0],X[1]),C.setUniform2fv("u_mosaicSize",F),C.setUniform1i("u_texture",p.VTL_TEXTURE_BINDING_UNIT_SPRITES))}C.setUniform1f("u_opacity",E)}else this._color[0]=H*F[0],this._color[1]=H*F[1],this._color[2]=H*F[2],this._color[3]=H,C.setUniform4fv("u_color",this._color);C.setUniform1f("u_depth",B.z||0);k&&(B=e.u32to4Xu8(A+1),C.setUniform4fv("u_id",
B));for(const R of q)C.setUniform1f("u_coord_range",R.rangeX),C.setUniformMatrix3fv("u_dvsMat3",R.transforms.dvs),O&&(B=M*R.width*Math.max(2**(Math.round(y)-R.key.level),1),q=B/h.nextPowerOfTwo(P),B/=h.nextPowerOfTwo(L),this._patternMatrix[0]=q,this._patternMatrix[4]=B,C.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)),t.setStencilFunction(c.CompareFunction.EQUAL,R.stencilRef,255),t.drawArrays(c.PrimitiveType.TRIANGLE_STRIP,0,4)}else x()};m._loadWGLResources=function(k){if(!this._vao){var {context:q,
styleLayer:t}=k;k=t.backgroundMaterial;var w=new Int8Array([0,0,1,0,0,1,1,1]);w=a.BufferObject.createVertex(q,c.Usage.STATIC_DRAW,w);this._vao=new d.VertexArrayObject(q,k.getAttributeLocations(),k.getLayoutInfo(),{geometry:w})}};return l}(b);u.WGLBrushVTLBackground=b;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLCircle":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g){p=function(e){function b(){var c=e.apply(this,arguments)||this;c._programOptions={id:!1};return c}n._inheritsLoose(b,e);var a=b.prototype;a.dispose=function(){};a.drawMany=function(c,d){const {context:f,displayLevel:l,requiredLevel:m,state:k,drawPhase:q,painter:t,spriteMosaic:w,styleLayerUID:A,requestRender:x}=c;if(d.some(G=>{var O,H;return null!=(O=null==(H=G.layerData.get(A))?void 0:H.circleIndexCount)?O:!1})){c=c.styleLayer;var y=c.circleMaterial,B=t.vectorTilesMaterialManager,
C=c.getPaintValue("circle-translate",l),D=c.getPaintValue("circle-translate-anchor",l),F=q===v.WGLDrawPhase.HITTEST,E=this._programOptions;E.id=F;B=B.getMaterialProgram(f,y,E);if(F||!h.isSome(x)||B.isCompiled){f.useProgram(B);B.setUniformMatrix3fv("u_displayMat3",D===r.TranslateAnchor.VIEWPORT?k.displayMat3:k.displayViewMat3);B.setUniform2fv("u_circleTranslation",C);B.setUniform1f("u_depth",c.z);B.setUniform1f("u_antialiasingWidth",1.2);C=-1;F&&(F=z.u32to4Xu8(A+1),B.setUniform4fv("u_id",F));for(const G of d)G.layerData.has(A)&&
(G.key.level!==C&&(C=G.key.level,y.setDataUniforms(B,l,c,C,w)),d=G.layerData.get(A),d.circleIndexCount&&(d.prepareForRendering(f),F=d.circleVertexArrayObject,h.isNone(F)||(f.bindVAO(F),B.setUniformMatrix3fv("u_dvsMat3",G.transforms.dvs),m!==G.key.level?f.setStencilFunction(g.CompareFunction.EQUAL,G.stencilRef,255):f.setStencilFunction(g.CompareFunction.GREATER,255,255),f.drawElements(g.PrimitiveType.TRIANGLES,d.circleIndexCount,g.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*d.circleIndexStart),
G.triangleCount+=d.circleIndexCount/3)))}else x()}};return b}(p);u.WGLBrushVTLCircle=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLFill":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(u,n,h,r,v,z,p,g,e){const b=1/65536;g=function(a){function c(){var f=
a.apply(this,arguments)||this;f._fillProgramOptions={id:!1,pattern:!1};f._outlineProgramOptions={id:!1};return f}n._inheritsLoose(c,a);var d=c.prototype;d.dispose=function(){};d.drawMany=function(f,l){const {displayLevel:m,drawPhase:k,renderPass:q,spriteMosaic:t,styleLayerUID:w}=f;var A=!1;for(var x of l)if(x.layerData.has(w)){var y=x.layerData.get(w);if(0<y.fillIndexCount||0<y.outlineIndexCount){A=!0;break}}if(A){A=f.styleLayer;var B=A.getPaintProperty("fill-pattern");y=(x=void 0!==B)&&B.isDataDriven;
if(x&&!y){var C=B.getValue(m);C=t.getMosaicItemPosition(C,!0)}B=!x&&A.getPaintValue("fill-antialias",m);var D=!0,F=1;if(!x){var E=A.getPaintProperty("fill-color"),G=A.getPaintProperty("fill-opacity");null!=E&&E.isDataDriven||null!=G&&G.isDataDriven||(F=A.getPaintValue("fill-color",m),F=A.getPaintValue("fill-opacity",m)*F[3],1<=F&&(D=!1))}if(!D||"opaque"!==q){var O;k===z.WGLDrawPhase.HITTEST&&(O=p.u32to4Xu8(w+1));E=A.getPaintValue("fill-translate",m);G=A.getPaintValue("fill-translate-anchor",m);(D||
"translucent"!==q)&&this._drawFill(f,w,A,l,E,G,x,C,y,O);C=!A.hasDataDrivenOutlineColor&&A.outlineUsesFillColor&&1>F;B&&"opaque"!==q&&!C&&this._drawOutline(f,w,A,l,E,G,O)}}};d._drawFill=function(f,l,m,k,q,t,w,A,x,y){if(!w||x||!h.isNone(A)){var {context:B,displayLevel:C,state:D,drawPhase:F,painter:E,pixelRatio:G,spriteMosaic:O,requestRender:H}=f;f=m.fillMaterial;var K=E.vectorTilesMaterialManager,P=G>v.VTL_HIGH_RES_CUTOFF?2:1,L=F===z.WGLDrawPhase.HITTEST,M=this._fillProgramOptions;M.id=L;M.pattern=
w;K=K.getMaterialProgram(B,f,M);if(!h.isSome(H)||L||K.isCompiled){B.useProgram(K);h.isSome(A)&&({page:A}=A,M=O.getPageSize(A),h.isSome(M)&&(O.bind(B,e.TextureSamplingMode.LINEAR,A,v.VTL_TEXTURE_BINDING_UNIT_SPRITES),K.setUniform2fv("u_mosaicSize",M),K.setUniform1i("u_texture",v.VTL_TEXTURE_BINDING_UNIT_SPRITES)));K.setUniformMatrix3fv("u_displayMat3",t===r.TranslateAnchor.VIEWPORT?D.displayMat3:D.displayViewMat3);K.setUniform2fv("u_fillTranslation",q);K.setUniform1f("u_depth",m.z+b);L&&K.setUniform4fv("u_id",
y);q=-1;for(const J of k)if(J.layerData.has(l)&&(J.key.level!==q&&(q=J.key.level,f.setDataUniforms(K,C,m,q,O)),k=J.layerData.get(l),k.fillIndexCount&&(k.prepareForRendering(B),t=k.fillVertexArrayObject,!h.isNone(t)))){B.bindVAO(t);K.setUniformMatrix3fv("u_dvsMat3",J.transforms.dvs);B.setStencilFunction(e.CompareFunction.EQUAL,J.stencilRef,255);w&&K.setUniform1f("u_patternFactor",J.rangeX/(P*J.width*Math.max(2**(Math.round(C)-J.key.level),1)));if(x){t=k.patternMap;if(!t)continue;for(const [R,X]of t)t=
O.getPageSize(R),h.isSome(t)&&(O.bind(B,e.TextureSamplingMode.LINEAR,R,v.VTL_TEXTURE_BINDING_UNIT_SPRITES),K.setUniform2fv("u_mosaicSize",t),K.setUniform1i("u_texture",v.VTL_TEXTURE_BINDING_UNIT_SPRITES),B.drawElements(e.PrimitiveType.TRIANGLES,X[1],e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*X[0]))}else B.drawElements(e.PrimitiveType.TRIANGLES,k.fillIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*k.fillIndexStart);J.triangleCount+=k.fillIndexCount/3}}else H()}};d._drawOutline=
function(f,l,m,k,q,t,w){const {context:A,displayLevel:x,state:y,drawPhase:B,painter:C,pixelRatio:D,spriteMosaic:F,requestRender:E}=f;f=m.outlineMaterial;var G=C.vectorTilesMaterialManager;const O=.75/D,H=B===z.WGLDrawPhase.HITTEST,K=this._outlineProgramOptions;K.id=H;G=G.getMaterialProgram(A,f,K);if(!h.isSome(E)||H||G.isCompiled){A.useProgram(G);G.setUniformMatrix3fv("u_displayMat3",t===r.TranslateAnchor.VIEWPORT?y.displayMat3:y.displayViewMat3);G.setUniform2fv("u_fillTranslation",q);G.setUniform1f("u_depth",
m.z+b);G.setUniform1f("u_outline_width",O);H&&G.setUniform4fv("u_id",w);q=-1;for(const P of k)P.layerData.has(l)&&(P.key.level!==q&&(q=P.key.level,f.setDataUniforms(G,x,m,q,F)),k=P.layerData.get(l),k.prepareForRendering(A),k.outlineIndexCount&&(t=k.outlineVertexArrayObject,h.isNone(t)||(A.bindVAO(t),G.setUniformMatrix3fv("u_dvsMat3",P.transforms.dvs),A.setStencilFunction(e.CompareFunction.EQUAL,P.stencilRef,255),A.drawElements(e.PrimitiveType.TRIANGLES,k.outlineIndexCount,e.DataType.UNSIGNED_INT,
Uint32Array.BYTES_PER_ELEMENT*k.outlineIndexStart),P.triangleCount+=k.outlineIndexCount/3)))}else E()};return c}(g);u.WGLBrushVTLFill=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLLine":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g,e){g=function(b){function a(){var d=b.apply(this,arguments)||this;d._programOptions={id:!1,pattern:!1,sdf:!1};return d}n._inheritsLoose(a,b);var c=a.prototype;c.dispose=function(){};c.drawMany=function(d,f){const {context:l,displayLevel:m,state:k,drawPhase:q,painter:t,pixelRatio:w,spriteMosaic:A,styleLayerUID:x,requestRender:y}=d;if(f.some(J=>{var R,X;return null!=(R=null==(X=J.layerData.get(x))?void 0:X.lineIndexCount)?R:!1})){d=d.styleLayer;var B=d.lineMaterial,C=t.vectorTilesMaterialManager,
D=d.getPaintValue("line-translate",m),F=d.getPaintValue("line-translate-anchor",m),E=d.getPaintProperty("line-pattern"),G=void 0!==E,O=G&&E.isDataDriven;if(G&&!O){E=E.getValue(m);var H=A.getMosaicItemPosition(E)}var K;E=!1;if(!G){var P=d.getPaintProperty("line-dasharray");E=(K=void 0!==P)&&P.isDataDriven;K&&!E&&(H=P.getValue(m),H=d.getDashKey(H,d.getLayoutValue("line-cap",m)),H=A.getMosaicItemPosition(H))}P=1/w;var L=q===z.WGLDrawPhase.HITTEST,M=this._programOptions;M.id=L;M.pattern=G;M.sdf=K;K=C.getMaterialProgram(l,
B,M);if(!h.isSome(y)||L||K.isCompiled){l.useProgram(K);K.setUniformMatrix3fv("u_displayViewMat3",k.displayViewMat3);K.setUniformMatrix3fv("u_displayMat3",F===r.TranslateAnchor.VIEWPORT?k.displayMat3:k.displayViewMat3);K.setUniform2fv("u_lineTranslation",D);K.setUniform1f("u_depth",d.z);K.setUniform1f("u_antialiasing",P);L&&(D=p.u32to4Xu8(x+1),K.setUniform4fv("u_id",D));H&&h.isSome(H)&&({page:D}=H,F=A.getPageSize(D),h.isSome(F)&&(A.bind(l,e.TextureSamplingMode.LINEAR,D,v.VTL_TEXTURE_BINDING_UNIT_SPRITES),
K.setUniform2fv("u_mosaicSize",F),K.setUniform1i("u_texture",v.VTL_TEXTURE_BINDING_UNIT_SPRITES)));D=-1;for(const J of f)if(J.layerData.has(x)&&(J.key.level!==D&&(D=J.key.level,B.setDataUniforms(K,m,d,D,A)),K.setUniform1f("u_zoomFactor",2**(m-D)/w),f=J.layerData.get(x),f.lineIndexCount&&(f.prepareForRendering(l),F=f.lineVertexArrayObject,!h.isNone(F)))){l.bindVAO(F);K.setUniformMatrix3fv("u_dvsMat3",J.transforms.dvs);l.setStencilFunction(e.CompareFunction.EQUAL,J.stencilRef,255);if(O||E){F=f.patternMap;
if(!F)continue;for(const [R,X]of F)F=A.getPageSize(R),h.isSome(F)&&(A.bind(l,e.TextureSamplingMode.LINEAR,R,v.VTL_TEXTURE_BINDING_UNIT_SPRITES),K.setUniform2fv("u_mosaicSize",F),K.setUniform1i("u_texture",v.VTL_TEXTURE_BINDING_UNIT_SPRITES),l.drawElements(e.PrimitiveType.TRIANGLES,X[1],e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*X[0]))}else l.drawElements(e.PrimitiveType.TRIANGLES,f.lineIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*f.lineIndexStart);J.triangleCount+=f.lineIndexCount/
3}}else y()}};return a}(g);u.WGLBrushVTLLine=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec2f32 ../../vectorTiles/decluttering/config ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../GeometryUtils ../number ./WGLBrush ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){const d=1/65536;a=function(f){function l(){var k=f.apply(this,arguments)||this;k._iconProgramOptions={id:!1,sdf:!1};k._sdfProgramOptions={id:!1};k._spritesTextureSize=r.create();return k}n._inheritsLoose(l,f);var m=l.prototype;m.dispose=function(){};m.drawMany=function(k,q){const {drawPhase:t,styleLayerUID:w}=k,A=k.styleLayer;let x;t===g.WGLDrawPhase.HITTEST&&(x=b.u32to4Xu8(w+1));this._drawIcons(k,A,q,x);this._drawText(k,A,q,x)};m._drawIcons=function(k,q,t,w){const {context:A,
displayLevel:x,drawPhase:y,painter:B,spriteMosaic:C,state:D,styleLayerUID:F,requestRender:E}=k,G=q.iconMaterial;var O=B.vectorTilesMaterialManager,H=!1;for(var K of t)if(K.layerData.has(F)){var P=K.layerData.get(F);if(0<P.iconPerPageElementsMap.size){H=!0;break}}if(H){H=q.getPaintValue("icon-translate",x);K=q.getPaintValue("icon-translate-anchor",x);var L=q.getLayoutValue("icon-rotation-alignment",x);L===z.RotationAlignment.AUTO&&(L=q.getLayoutValue("symbol-placement",x)===z.SymbolPlacement.POINT?
z.RotationAlignment.VIEWPORT:z.RotationAlignment.MAP);var M=L===z.RotationAlignment.MAP;M=q.getLayoutValue("icon-keep-upright",x)&&M;var J=P.isIconSDF;P=y===g.WGLDrawPhase.HITTEST;var R=this._iconProgramOptions;R.id=P;R.sdf=J;O=O.getMaterialProgram(A,G,R);if(!h.isSome(E)||P||O.isCompiled){A.useProgram(O);O.setUniformMatrix3fv("u_displayViewMat3",L===z.RotationAlignment.MAP?D.displayViewMat3:D.displayMat3);O.setUniformMatrix3fv("u_displayMat3",K===z.TranslateAnchor.VIEWPORT?D.displayMat3:D.displayViewMat3);
O.setUniform2fv("u_iconTranslation",H);O.setUniform1f("u_depth",q.z);O.setUniform1f("u_mapRotation",e.degToByte(D.rotation));O.setUniform1f("u_keepUpright",M?1:0);O.setUniform1f("u_level",10*x);O.setUniform1i("u_texture",p.VTL_TEXTURE_BINDING_UNIT_SPRITES);O.setUniform1f("u_fadeDuration",v.FADE_DURATION/1E3);P&&O.setUniform4fv("u_id",w);w=-1;for(const X of t)if(X.layerData.has(F)&&(X.key.level!==w&&(w=X.key.level,G.setDataUniforms(O,x,q,w,C)),P=X.layerData.get(F),0!==P.iconPerPageElementsMap.size&&
(P.prepareForRendering(A),P.updateOpacityInfo(),t=P.iconVertexArrayObject,!h.isNone(t)))){A.bindVAO(t);O.setUniformMatrix3fv("u_dvsMat3",X.transforms.dvs);O.setUniform1f("u_time",(performance.now()-P.lastOpacityUpdate)/1E3);for(const [U,V]of P.iconPerPageElementsMap)this._renderIconRange(k,O,V,U,X)}}else E()}};m._renderIconRange=function(k,q,t,w,A){const {context:x,spriteMosaic:y}=k;this._spritesTextureSize[0]=y.getWidth(w)/4;this._spritesTextureSize[1]=y.getHeight(w)/4;q.setUniform2fv("u_mosaicSize",
this._spritesTextureSize);y.bind(x,c.TextureSamplingMode.LINEAR,w,p.VTL_TEXTURE_BINDING_UNIT_SPRITES);x.setStencilTestEnabled(!0);x.setStencilFunction(c.CompareFunction.GREATER,255,255);x.setStencilWriteMask(0);x.drawElements(c.PrimitiveType.TRIANGLES,t[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]);A.triangleCount+=t[1]/3};m._drawText=function(k,q,t,w){const {context:A,displayLevel:x,drawPhase:y,glyphMosaic:B,painter:C,pixelRatio:D,spriteMosaic:F,state:E,styleLayerUID:G,requestRender:O}=
k;k=q.textMaterial;const H=C.vectorTilesMaterialManager;var K=!1;for(var P of t)if(P.layerData.has(G)){var L=P.layerData.get(G);if(0<L.glyphPerPageElementsMap.size){K=!0;break}}if(K&&(L=q.getPaintProperty("text-opacity"),!L||L.isDataDriven||0!==L.getValue(x))){L=q.getPaintProperty("text-color");var M=!L||L.isDataDriven||0<L.getValue(x)[3];L=q.getPaintProperty("text-halo-width");P=q.getPaintProperty("text-halo-color");var J=(!L||L.isDataDriven||0<L.getValue(x))&&(!P||P.isDataDriven||0<P.getValue(x)[3]);
if(M||J){L=q.getLayoutValue("text-rotation-alignment",x);L===z.RotationAlignment.AUTO&&(L=q.getLayoutValue("symbol-placement",x)===z.SymbolPlacement.POINT?z.RotationAlignment.VIEWPORT:z.RotationAlignment.MAP);P=L===z.RotationAlignment.MAP;P=q.getLayoutValue("text-keep-upright",x)&&P;K=y===g.WGLDrawPhase.HITTEST;var R=.8*3/D;this._glyphTextureSize||(this._glyphTextureSize=r.fromValues(B.width/4,B.height/4));var X=q.getPaintValue("text-translate",x),U=q.getPaintValue("text-translate-anchor",x),V=this._sdfProgramOptions;
V.id=K;var Q=H.getMaterialProgram(A,k,V);if(!h.isSome(O)||K||Q.isCompiled){A.useProgram(Q);Q.setUniformMatrix3fv("u_displayViewMat3",L===z.RotationAlignment.MAP?E.displayViewMat3:E.displayMat3);Q.setUniformMatrix3fv("u_displayMat3",U===z.TranslateAnchor.VIEWPORT?E.displayMat3:E.displayViewMat3);Q.setUniform2fv("u_textTranslation",X);Q.setUniform1f("u_depth",q.z+d);Q.setUniform2fv("u_mosaicSize",this._glyphTextureSize);Q.setUniform1f("u_mapRotation",e.degToByte(E.rotation));Q.setUniform1f("u_keepUpright",
P?1:0);Q.setUniform1f("u_level",10*x);Q.setUniform1i("u_texture",p.VTL_TEXTURE_BINDING_UNIT_GLYPHS);Q.setUniform1f("u_antialiasingWidth",R);Q.setUniform1f("u_fadeDuration",v.FADE_DURATION/1E3);K&&Q.setUniform4fv("u_id",w);w=-1;for(const Y of t)Y.layerData.has(G)&&(Y.key.level!==w&&(w=Y.key.level,k.setDataUniforms(Q,x,q,w,F)),L=Y.layerData.get(G),0!==L.glyphPerPageElementsMap.size&&(L.prepareForRendering(A),L.updateOpacityInfo(),t=L.textVertexArrayObject,h.isNone(t)||(A.bindVAO(t),Q.setUniformMatrix3fv("u_dvsMat3",
Y.transforms.dvs),A.setStencilTestEnabled(!0),A.setStencilFunction(c.CompareFunction.GREATER,255,255),A.setStencilWriteMask(0),t=(performance.now()-L.lastOpacityUpdate)/1E3,Q.setUniform1f("u_time",t),L.glyphPerPageElementsMap.forEach((fa,da)=>{this._renderGlyphRange(A,fa,da,B,Q,J,M,Y)}))))}else O()}}};m._renderGlyphRange=function(k,q,t,w,A,x,y,B){w.bind(k,c.TextureSamplingMode.LINEAR,t,p.VTL_TEXTURE_BINDING_UNIT_GLYPHS);x&&(A.setUniform1f("u_halo",1),k.drawElements(c.PrimitiveType.TRIANGLES,q[1],
c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*q[0]),B.triangleCount+=q[1]/3);y&&(A.setUniform1f("u_halo",0),k.drawElements(c.PrimitiveType.TRIANGLES,q[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*q[0]),B.triangleCount+=q[1]/3)};return l}(a);u.WGLBrushVTLSymbol=a;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p){return function(g){function e(){return g.apply(this,arguments)||this}u._inheritsLoose(e,g);var b=e.prototype;b.dispose=function(){};b.getGeometryType=function(){return h.WGLGeometryType.LABEL};b.supportsSymbology=function(a){return!0};b.drawGeometry=function(a,c,d,f){const {context:l,painter:m,state:k,rendererInfo:q,passOptions:t,requestRender:w}=a,A=z.LabelMaterialKey.load(d.materialKey);var x=n.isSome(t)&&"hittest"===t.type;const y=A.mapAligned?1:0;if(y||!(1<=Math.abs(c.key.level-
Math.round(100*a.displayLevel)/100))){var {bufferLayouts:B,attributes:C}=r.createProgramDescriptor(A.data,{geometry:[{location:0,name:"a_pos",count:2,type:p.DataType.SHORT},{location:1,name:"a_id",count:4,type:p.DataType.UNSIGNED_BYTE},{location:2,name:"a_color",count:4,type:p.DataType.UNSIGNED_BYTE,normalized:!0},{location:3,name:"a_haloColor",count:4,type:p.DataType.UNSIGNED_BYTE,normalized:!0},{location:4,name:"a_texAndSize",count:4,type:p.DataType.UNSIGNED_BYTE},{location:5,name:"a_refSymbolAndPlacementOffset",
count:4,type:p.DataType.UNSIGNED_BYTE},{location:6,name:"a_glyphData",count:4,type:p.DataType.UNSIGNED_BYTE},{location:7,name:"a_vertexOffset",count:2,type:p.DataType.SHORT},{location:8,name:"a_texCoords",count:2,type:p.DataType.UNSIGNED_SHORT}]});f=m.materialManager.getMaterialProgram(a,A,"materials/label",C,f);!n.isSome(w)||x||f.isCompiled?(a.context.setStencilFunction(p.CompareFunction.EQUAL,0,255),l.useProgram(f),this._setSharedUniforms(f,a,c),m.textureManager.bindTextures(l,f,A),x=1===y?k.displayViewMat3:
k.displayMat3,this._setSizeVVUniforms(A,f,q,c),f.setUniform1f("u_mapRotation",Math.floor(k.rotation/360*254)),f.setUniform1f("u_mapAligned",y),f.setUniformMatrix3fv("u_displayMat3",x),f.setUniform1f("u_opacity",1),f.setUniform2fv("u_screenSize",a.state.size),f.setUniform1f("u_isHalo",1),a=d.target.getVAO(l,B,C),c=d.indexFrom*Uint32Array.BYTES_PER_ELEMENT,l.bindVAO(a),l.drawElements(p.PrimitiveType.TRIANGLES,d.indexCount,p.DataType.UNSIGNED_INT,c),f.setUniform1f("u_isHalo",0),l.drawElements(p.PrimitiveType.TRIANGLES,
d.indexCount,p.DataType.UNSIGNED_INT,c),l.setStencilTestEnabled(!0),l.setBlendingEnabled(!0)):w()}};return e}(v)})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey ../../../../webgl/enums".split(" "),function(u,n,h,r,v,z,p){return function(g){function e(){return g.apply(this,arguments)||this}u._inheritsLoose(e,g);var b=e.prototype;b.dispose=
function(){};b.getGeometryType=function(){return h.WGLGeometryType.LINE};b.supportsSymbology=function(a){return!0};b.drawGeometry=function(a,c,d,f){const {context:l,painter:m,rendererInfo:k,displayLevel:q,passOptions:t,requestRender:w}=a,A=z.LineMaterialKey.load(d.materialKey),x=n.isSome(t)&&"hittest"===t.type;var y=r.createProgramDescriptor(A.data,{geometry:[{location:0,name:"a_pos",count:2,type:p.DataType.SHORT},{location:1,name:"a_id",count:4,type:p.DataType.UNSIGNED_BYTE},{location:2,name:"a_color",
count:4,type:p.DataType.UNSIGNED_BYTE,normalized:!0},{location:3,name:"a_offsetAndNormal",count:4,type:p.DataType.BYTE},{location:4,name:"a_accumulatedDistanceAndHalfWidth",count:2,type:p.DataType.UNSIGNED_SHORT},{location:5,name:"a_tlbr",count:4,type:p.DataType.UNSIGNED_SHORT},{location:6,name:"a_segmentDirection",count:4,type:p.DataType.BYTE},{location:7,name:"a_aux",count:2,type:p.DataType.UNSIGNED_SHORT},{location:8,name:"a_zoomRange",count:2,type:p.DataType.UNSIGNED_SHORT}]});let B=p.PrimitiveType.TRIANGLES;
x&&(y=this._getTriangleDesc(d.materialKey,y),B=p.PrimitiveType.POINTS);const {attributes:C,bufferLayouts:D}=y;f=m.materialManager.getMaterialProgram(a,A,"materials/line",C,f);!n.isSome(w)||x||f.isCompiled?(y=1/a.pixelRatio,l.useProgram(f),this._setSharedUniforms(f,a,c),A.textureBinding&&m.textureManager.bindTextures(l,f,A),f.setUniform1f("u_zoomFactor",2**(q-c.key.level)),f.setUniform1f("u_blur",0+y),f.setUniform1f("u_antialiasing",y),this._setSizeVVUniforms(A,f,k,c),this._setColorAndOpacityVVUniforms(A,
f,k),l.setFaceCullingEnabled(!1),a=d.target.getVAO(l,D,C,x),c=d.indexCount,d=d.indexFrom*Uint32Array.BYTES_PER_ELEMENT,x&&(c/=3,d/=3),l.bindVAO(a),l.drawElements(B,c,p.DataType.UNSIGNED_INT,d)):w()};return e}(v)})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey ../../../../webgl/enums".split(" "),function(u,n,h,r,v,z,p){return function(g){function e(){return g.apply(this,
arguments)||this}u._inheritsLoose(e,g);var b=e.prototype;b.dispose=function(){};b.getGeometryType=function(){return h.WGLGeometryType.TEXT};b.supportsSymbology=function(a){return!0};b.drawGeometry=function(a,c,d,f){const {context:l,painter:m,rendererInfo:k,state:q,passOptions:t,requestRender:w}=a,A=z.TextMaterialKey.load(d.materialKey),x=n.isSome(t)&&"hittest"===t.type,{bufferLayouts:y,attributes:B}=r.createProgramDescriptor(A.data,{geometry:[{location:0,name:"a_pos",count:2,type:p.DataType.SHORT},
{location:1,name:"a_id",count:4,type:p.DataType.UNSIGNED_BYTE},{location:2,name:"a_color",count:4,type:p.DataType.UNSIGNED_BYTE,normalized:!0},{location:3,name:"a_haloColor",count:4,type:p.DataType.UNSIGNED_BYTE,normalized:!0},{location:4,name:"a_texFontSize",count:4,type:p.DataType.UNSIGNED_BYTE},{location:5,name:"a_aux",count:4,type:p.DataType.BYTE},{location:6,name:"a_zoomRange",count:2,type:p.DataType.UNSIGNED_SHORT},{location:7,name:"a_vertexOffset",count:2,type:p.DataType.SHORT},{location:8,
name:"a_texCoords",count:2,type:p.DataType.UNSIGNED_SHORT}]});f=m.materialManager.getMaterialProgram(a,A,"materials/text",B,f);if(!n.isSome(w)||x||f.isCompiled){l.useProgram(f);var C=p.PrimitiveType.TRIANGLES;x&&(C=p.PrimitiveType.POINTS);this._setSharedUniforms(f,a,c);m.textureManager.bindTextures(l,f,A);f.setUniformMatrix3fv("u_displayMat3",q.displayMat3);f.setUniformMatrix3fv("u_displayViewMat3",q.displayViewMat3);this._setSizeVVUniforms(A,f,k,c);this._setColorAndOpacityVVUniforms(A,f,k);this._setRotationVVUniforms(A,
f,k);f.setUniform1f("u_isHalo",1);a=d.target.getVAO(l,y,B);c=d.indexFrom*Uint32Array.BYTES_PER_ELEMENT;l.bindVAO(a);l.drawElements(p.PrimitiveType.TRIANGLES,d.indexCount,p.DataType.UNSIGNED_INT,c);f.setUniform1f("u_isHalo",0);l.drawElements(C,d.indexCount,p.DataType.UNSIGNED_INT,c)}else w()};return e}(v)})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterialManager":function(){define(["../enums","./Programs"],function(u,n){return function(){function h(){this._programByKey=new Map}var r=h.prototype;
r.dispose=function(){this._programByKey.forEach(v=>v.dispose());this._programByKey.clear()};r.getMaterialProgram=function(v,z,p){const g=z.key<<3|this._getMaterialOptionsValue(z.type,p);if(this._programByKey.has(g))return this._programByKey.get(g);var e=this._getProgramTemplate(z.type);({shaders:e}=e);const {vertexShader:b,fragmentShader:a}=e(p);p=z.getShaderHeader();e=z.getShaderMain();p=b.replace("#pragma header",p).replace("#pragma main",e);v=v.programCache.acquire(p,a,z.getAttributeLocations());
this._programByKey.set(g,v);return v};r._getMaterialOptionsValue=function(v,z){switch(v){case u.ShaderProgramType.BACKGROUND:return(z.pattern?1:0)<<1|(z.id?1:0);case u.ShaderProgramType.FILL:return(z.pattern?1:0)<<1|(z.id?1:0);case u.ShaderProgramType.OUTLINE:return z.id?1:0;case u.ShaderProgramType.LINE:return(z.sdf?1:0)<<2|(z.pattern?1:0)<<1|(z.id?1:0);case u.ShaderProgramType.ICON:return(z.sdf?1:0)<<1|(z.id?1:0);case u.ShaderProgramType.CIRCLE:return z.id?1:0;case u.ShaderProgramType.TEXT:return z.id?
1:0;default:return 0}};r._getProgramTemplate=function(v){switch(v){case u.ShaderProgramType.BACKGROUND:return n.background;case u.ShaderProgramType.CIRCLE:return n.circle;case u.ShaderProgramType.FILL:return n.fill;case u.ShaderProgramType.ICON:return n.icon;case u.ShaderProgramType.LINE:return n.line;case u.ShaderProgramType.OUTLINE:return n.outline;case u.ShaderProgramType.TEXT:return n.text;default:return null}};return h}()})},"esri/views/2d/engine/vectorTiles/shaders/Programs":function(){define(["exports",
"./sources/resolver","../../../../webgl/programUtils"],function(u,n,h){u.background={shaders:r=>({vertexShader:h.glslifyDefineMap({ID:r.id,PATTERN:r.pattern})+n.resolveIncludes("background/background.vert"),fragmentShader:h.glslifyDefineMap({ID:r.id,PATTERN:r.pattern})+n.resolveIncludes("background/background.frag")})};u.circle={shaders:r=>({vertexShader:h.glslifyDefineMap({ID:r.id})+n.resolveIncludes("circle/circle.vert"),fragmentShader:h.glslifyDefineMap({ID:r.id})+n.resolveIncludes("circle/circle.frag")})};
u.fill={shaders:r=>({vertexShader:h.glslifyDefineMap({ID:r.id,PATTERN:r.pattern})+n.resolveIncludes("fill/fill.vert"),fragmentShader:h.glslifyDefineMap({ID:r.id,PATTERN:r.pattern})+n.resolveIncludes("fill/fill.frag")})};u.icon={shaders:r=>({vertexShader:h.glslifyDefineMap({ID:r.id,SDF:r.sdf})+n.resolveIncludes("icon/icon.vert"),fragmentShader:h.glslifyDefineMap({ID:r.id,SDF:r.sdf})+n.resolveIncludes("icon/icon.frag")})};u.line={shaders:r=>({vertexShader:h.glslifyDefineMap({ID:r.id,PATTERN:r.pattern,
SDF:r.sdf})+n.resolveIncludes("line/line.vert"),fragmentShader:h.glslifyDefineMap({ID:r.id,PATTERN:r.pattern,SDF:r.sdf})+n.resolveIncludes("line/line.frag")})};u.outline={shaders:r=>({vertexShader:h.glslifyDefineMap({ID:r.id})+n.resolveIncludes("outline/outline.vert"),fragmentShader:h.glslifyDefineMap({ID:r.id})+n.resolveIncludes("outline/outline.frag")})};u.text={shaders:r=>({vertexShader:h.glslifyDefineMap({ID:r.id})+n.resolveIncludes("text/text.vert"),fragmentShader:h.glslifyDefineMap({ID:r.id})+
n.resolveIncludes("text/text.frag")})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/sources/resolver":function(){define(["exports","./shaderRepository","../../../../../webgl/ShaderCompiler"],function(u,n,h){const r=new h.ShaderCompiler(function(v){let z=n;v.split("/").forEach(p=>{z&&(z=z[p])});return z});u.resolveIncludes=function(v){return r.resolveIncludes(v)};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/sources/shaderRepository":function(){define(function(){return{background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main() {\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d u_opacity * color;\n#else\ngl_FragColor \x3d u_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"background.vert":"precision mediump float;\nattribute vec2 a_pos;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\nuniform mediump vec4 u_tlbr;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\n#endif\nvoid main() {\ngl_Position \x3d vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\n#ifdef PATTERN\nv_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d u_tlbr / u_mosaicSize.xyxy;\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float dist \x3d length(v_offset);\nmediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\nlowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\ngl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"circle.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_circleTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_stroke_color \x3d stroke_color * stroke_opacity;\nv_stroke_width \x3d stroke_width;\nv_radius \x3d radius;\nv_blur \x3d max(blur, u_antialiasingWidth / (radius + stroke_width));\nmediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\nv_offset \x3d offset;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d fract(v_tileTextureCoord);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d v_color[3] * color;\n#else\ngl_FragColor \x3d v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"fill.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_fillTranslation;\n#ifdef PATTERN\n#include \x3cutil/util.glsl\x3e\nuniform mediump vec2 u_mosaicSize;\nuniform mediump float u_patternFactor;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n#ifdef PATTERN\nfloat patternWidth \x3d nextPOT(tlbr.z - tlbr.x);\nfloat patternHeight \x3d nextPOT(tlbr.w - tlbr.y);\nfloat scaleX \x3d 1.0 / (patternWidth * u_patternFactor);\nfloat scaleY \x3d 1.0 / (patternHeight * u_patternFactor);\nmat3 patterMat \x3d mat3(scaleX, 0.0,    0.0,\n0.0,    -scaleY, 0.0,\n0.0,    0.0,    1.0);\nv_tileTextureCoord \x3d (patterMat * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d tlbr / u_mosaicSize.xyxy;\n#endif\nvec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump flaot v_halo_width;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\n#include \x3cutil/encoding.glsl\x3e\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\nlowp vec4 fillPixelColor \x3d v_color;\nfloat d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\nconst float softEdgeRatio \x3d 0.248062016;\nfloat size \x3d max(v_size.x, v_size.y);\nfloat dist \x3d d * softEdgeRatio * size;\nfillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\nif (v_halo_width \x3e 0.25) {\nlowp vec4 outlinePixelColor \x3d u_outlineColor;\nconst float outlineLimitRatio \x3d (16.0 / 86.0);\nfloat clampedOutlineSize \x3d softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\noutlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\ngl_FragColor \x3d v_opacity * mixColors(fillPixelColor, outlinePixelColor);\n}\nelse {\ngl_FragColor \x3d v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor \x3d texture2D(u_texture, v_tex);\ngl_FragColor \x3d v_opacity * texColor;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump float v_halo_width;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_iconTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\nconst float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\nconst float tileCoordRatio \x3d 1.0 / 8.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nv_color \x3d color;\nv_opacity \x3d opacity;\n#ifdef SDF\nv_halo_width \x3d halo_width;\n#endif\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_opacity *\x3d interpolatedOpacity;\nmediump float a_angle         \x3d a_levelInfo[1];\nmediump float a_minLevel      \x3d a_levelInfo[2];\nmediump float a_maxLevel      \x3d a_levelInfo[3];\nmediump vec2 a_tex            \x3d a_texAngleRange.xy;\nmediump float delta_z \x3d 0.0;\nmediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_opacity, 0.0);\nvec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\nv_size \x3d abs(offset);\n#ifdef SDF\noffset \x3d (120.0 / 86.0) * offset;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_tex \x3d a_tex.xy / u_mosaicSize;\n}"},
line:{"line.frag":"precision lowp float;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#if defined (PATTERN) || defined(SDF)\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\nuniform sampler2D u_texture;\nuniform mediump float u_antialiasing;\n#endif\n#ifdef SDF\n#include \x3cutil/encoding.glsl\x3e\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\nlowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\nmediump float relativeTexX \x3d fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color \x3d texture2D(u_texture, texCoord);\ngl_FragColor \x3d alpha * v_color[3] * color;\n#elif defined(SDF)\nmediump float relativeTexX \x3d fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d  0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist \x3d d * (v_lineHalfWidth + u_antialiasing / 2.0);\ngl_FragColor \x3d alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n#else\ngl_FragColor \x3d alpha * v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"line.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_extrude_offset;\nattribute vec4 a_dir_normal;\nattribute vec2 a_accumulatedDistance;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump float u_zoomFactor;\nuniform mediump vec2 u_lineTranslation;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale \x3d 1.0 / 31.0;\nconst mediump float tileCoordRatio \x3d 8.0;\n#if defined (SDF)\nconst mediump float sdfPatternHalfWidth \x3d 15.5;\n#endif\n#if defined (PATTERN) || defined(SDF)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_blur \x3d blur + u_antialiasing;\nv_normal \x3d a_dir_normal.zw * scale;\n#if defined (PATTERN) || defined(SDF)\nv_tlbr          \x3d tlbr / u_mosaicSize.xyxy;\nv_patternSize   \x3d vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\n#if defined (PATTERN)\nv_widthRatio \x3d width / v_patternSize.y;\n#else\nv_widthRatio \x3d width / sdfPatternHalfWidth / 2.0;\n#endif\n#endif\nv_lineHalfWidth \x3d (width + u_antialiasing) * 0.5;\nmediump vec2 dir \x3d a_dir_normal.xy * scale;\nmediump vec2 offset_ \x3d a_extrude_offset.zw * scale * offset;\nmediump vec2 dist \x3d v_lineHalfWidth * scale * a_extrude_offset.xy;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n#if defined (PATTERN) || defined(SDF)\nv_accumulatedDistance \x3d a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d abs(v_normal.y);\nlowp float alpha \x3d smoothstep(1.0, 0.0, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_fillTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale \x3d 1.0 / 15.0;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_normal \x3d a_xnormal;\nmediump vec2 dist \x3d u_outline_width * scale * a_offset;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
text:{"text.frag":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d texture2D(u_texture, v_tex).a;\nmediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_textTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying lowp vec2 v_tex;\nconst float offsetPrecision \x3d 1.0 / 8.0;\nconst mediump float edgePos \x3d 0.75;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nconst float sdfFontScale \x3d 1.0 / 24.0;\nconst float sdfPixel \x3d 3.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nif (u_halo \x3e 0.5)\n{\nv_color \x3d halo_color * opacity;\nhalo_width *\x3d sdfPixel;\nhalo_blur *\x3d sdfPixel;\n}\nelse\n{\nv_color \x3d color * opacity;\nhalo_width \x3d 0.0;\nhalo_blur \x3d 0.0;\n}\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_color *\x3d interpolatedOpacity;\nmediump float a_angle       \x3d a_levelInfo[1];\nmediump float a_minLevel    \x3d a_levelInfo[2];\nmediump float a_maxLevel    \x3d a_levelInfo[3];\nmediump vec2 a_tex          \x3d a_texAngleRange.xy;\nmediump float a_visMinAngle    \x3d a_texAngleRange.z;\nmediump float a_visMaxAngle    \x3d a_texAngleRange.w;\nmediump float delta_z \x3d 0.0;\nmediump float angle \x3d mod(a_angle + u_mapRotation, 256.0);\nif (a_visMinAngle \x3c a_visMaxAngle)\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\n}\nelse\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\n}\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_color[3], 0.0);\nv_tex \x3d a_tex.xy / u_mosaicSize;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_edgeDistance \x3d edgePos - halo_width / size;\nv_edgeWidth \x3d (u_antialiasingWidth + halo_blur) / size;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n}"},
util:{"encoding.glsl":"const vec4 rgba2float_factors \x3d vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}","util.glsl":"float nextPOT(in float x) {\nreturn pow(2.0, ceil(log2(abs(x))));\n}"}}})},"esri/views/webgl/programUtils":function(){define(["exports"],function(u){u.glslifyDefineMap=function(n){let h="";for(const z in n){var r=n[z];if("boolean"===
typeof r)r&&(h+=`#define ${z}\n`);else if("number"===typeof r)h+=`#define ${z} ${r.toFixed()}\n`;else if("object"===typeof r){{const {options:p,value:g}=r;var v="number"===typeof p[g]}if(v){const {value:p,options:g,namespace:e}=r;r=e?`${e}_`:"";for(const b in g)h+=`#define ${r}${b} ${g[b].toFixed()}\n`;h+=`#define ${z} ${r}${p}\n`}else{v=r.options;let p=0;for(const g in v)h+=`#define ${v[g]} ${(p++).toFixed()}\n`;h+=`#define ${z} ${v[r.value]}\n`}}}return h};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define("exports ../../../../core/maybe ./DefaultVertexAttributeLayouts ./shaders/BitBlitPrograms ../../../webgl/BufferObject ../../../webgl/enums ../../../webgl/ProgramTemplate ../../../webgl/VertexArrayObject".split(" "),function(u,n,h,r,v,z,p,g){let e=function(){function b(){this._initialized=!1}var a=b.prototype;a.dispose=function(){this._program=n.disposeMaybe(this._program);this._vertexArrayObject=
n.disposeMaybe(this._vertexArrayObject)};a.render=function(c,d,f,l){c&&(this._initialized||this._initialize(c),c.setBlendFunctionSeparate(z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA,z.BlendFactor.ONE,z.BlendFactor.ONE_MINUS_SRC_ALPHA),c.bindVAO(this._vertexArrayObject),c.useProgram(this._program),d.setSamplingMode(f),c.bindTexture(d,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",l),c.drawArrays(z.PrimitiveType.TRIANGLE_STRIP,0,4),c.bindTexture(null,0),c.bindVAO())};
a._initialize=function(c){if(this._initialized)return!0;const d=p.createProgram(c,r.bitBlit);if(!d)return!1;const f=new Int8Array(16);f[0]=-1;f[1]=-1;f[2]=0;f[3]=0;f[4]=1;f[5]=-1;f[6]=1;f[7]=0;f[8]=-1;f[9]=1;f[10]=0;f[11]=1;f[12]=1;f[13]=1;f[14]=1;f[15]=1;c=new g.VertexArrayObject(c,r.bitBlit.attributes,h.PosTex2b,{geometry:v.BufferObject.createVertex(c,z.Usage.STATIC_DRAW,f)});this._program=d;this._vertexArrayObject=c;return this._initialized=!0};return b}();u.BitBlitRenderer=e;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/shaders/BitBlitPrograms":function(){define(["exports","./sources/resolver"],function(u,n){n={shaders:{vertexShader:n.resolveIncludes("bitBlit/bitBlit.vert"),fragmentShader:n.resolveIncludes("bitBlit/bitBlit.frag")},attributes:new Map([["a_pos",0],["a_tex",1]])};u.bitBlit=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/MaterialManager":function(){define(["../../../../core/maybe",
"./enums","./shaders/MaterialPrograms"],function(u,n,h){const r=p=>p===n.WGLDrawPhase.HITTEST||p===n.WGLDrawPhase.LABEL_ALPHA,v=({rendererInfo:p,drawPhase:g},e,b,a)=>{e=e.getVariationHash();a=a.join(".");g=(r(g)?1:0)|(g===n.WGLDrawPhase.HIGHLIGHT?2:0);return`${e}-${a}-${g}-${p.getVariationHash()}-${u.isSome(b)&&b.join(".")}`},z=(p,g,e,b)=>{b=b.reduce((a,c)=>({...a,[c]:p.context.driverTest[c]}),{});g={...g.getVariation(),...p.rendererInfo.getVariation(),highlight:p.drawPhase===n.WGLDrawPhase.HIGHLIGHT,
id:r(p.drawPhase),...b};if(u.isSome(e))for(const a of e)g[a]=!0;return g};return function(){function p(e){this._rctx=e;this._programByKey=new Map}var g=p.prototype;g.dispose=function(){this._programByKey.forEach(e=>e.dispose());this._programByKey.clear()};g.getProgram=function(e,b=[],a=[]){const c=e.vsPath+"."+e.fsPath+JSON.stringify(b)+a.join(".");if(this._programByKey.has(c))return this._programByKey.get(c);a=a.reduce((m,k)=>({...m,[k]:this._rctx.driverTest[k]}),{});b={...b.map(m=>"string"===typeof m?
{name:m,value:!0}:m).reduce((m,k)=>({...m,[k.name]:k.value}),{}),...a};const {vsPath:d,fsPath:f,attributes:l}=e;e=h.createProgramTemplate(d,f,l,b);e=this._rctx.programCache.acquire(e.shaders.vertexShader,e.shaders.fragmentShader,e.attributes);if(!e)throw Error("Unable to get program for key: ${key}");this._programByKey.set(c,e);return e};g.getMaterialProgram=function(e,b,a,c,d,f=["ignoresSamplerPrecision"]){const l=v(e,b,d,f);if(this._programByKey.has(l))return this._programByKey.get(l);e=z(e,b,d,
f);a=h.createProgramTemplate(a,a,c,e);a=this._rctx.programCache.acquire(a.shaders.vertexShader,a.shaders.fragmentShader,a.attributes);if(!a)throw Error("Unable to get program for key: ${key}");this._programByKey.set(l,a);return a};return p}()})},"esri/views/2d/engine/webgl/shaders/MaterialPrograms":function(){define(["exports","./sources/resolver","../../../../webgl/programUtils"],function(u,n,h){u.createProgramTemplate=(r,v,z,p)=>{r+=r.substring(r.lastIndexOf("/"));v+=v.substring(v.lastIndexOf("/"));
{const e={};for(const b in p){{let a=void 0;var g=b;a=""+g[0].toUpperCase();for(let c=1;c<g.length;c++){const d=g[c];d===d.toUpperCase()?(a+="_",a+=d):a+=d.toUpperCase()}g=a}e[g]=p[b]}p=h.glslifyDefineMap(e)}return{attributes:z,shaders:{vertexShader:p+n.resolveIncludes(`${r}.vert`),fragmentShader:p+n.resolveIncludes(`${v}.frag`)}}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/TextureManager":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../config ../../../../request ../../../../core/BidiText ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/screenUtils ../../../../chunks/vec2 ../../../../chunks/vec2f32 ../../../../symbols/cim/Rasterizer ./definitions ./enums ./fontUtils ./GlyphMosaic ./GlyphSource ./SDFConverter ./SpriteMosaic ./Utils ./animatedFormats/apng ./animatedFormats/gif ./util/Result ./util/symbolUtils ../../../support/QueueProcessor ../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D){function F(P,L){return E.apply(this,arguments)}function E(){E=u._asyncToGenerator(function*(P,L){P=w.getUrl(P);var M;if(P.includes(";base64,")){L=P.indexOf(";base64,")+8;L=P.substring(L);L=atob(L);P=new Uint8Array(L.length);for(M=0;M<L.length;M++)P[M]=L.charCodeAt(M);M=P.buffer}else try{const {data:J}=yield h(P,{responseType:"array-buffer",...L});M=J}catch(J){if(!g.isAbortError(J))return new v("mapview-invalid-resource",`Could not fetch requested resource at ${P}`)}return M});
return E.apply(this,arguments)}function G(P,L){L=Math.round(e.pt2px(L)*window.devicePixelRatio);return Math.min(P,L*(128<=L?2:4))}const O=a.create(),H=z.getLogger("esri.views.2d.engine.webgl.TextureManager");let K=function(){function P(L,M,J){this.mosaicType=L;this.page=M;this.sdf=J}P.fromMosaic=function(L,M){return new P(L,M.page,M.sdf)};return P}();return function(){function P(M,J){this._requestRender=M;this.resourceManager=J;this._invalidFontsMap=new Map;this._sdfConverter=new q(126);this._bindingInfos=
[];this._hashToBindingIndex=new Map;this._ongoingRasterizations=new Map;this._imageRequestQueue=new C.QueueProcessor({concurrency:10,process:function(){var R=u._asyncToGenerator(function*(X,U){g.throwIfAborted(U);try{return yield h(X,{responseType:"image",signal:U})}catch(V){if(!g.isAbortError(V))throw new v("mapview-invalid-resource",`Could not fetch requested resource at ${X}`,V);throw V;}});return function(X,U){return R.apply(this,arguments)}}()});this._spriteMosaic=new t(2048,2048,500);this._glyphSource=
new k(`${n.fontsUrl}/{fontstack}/{range}.pbf`);this._glyphMosaic=new m(1024,1024,this._glyphSource);this._rasterizer=new c(J)}var L=P.prototype;L.dispose=function(){this._spriteMosaic.dispose();this._glyphMosaic.dispose();this._rasterizer.dispose();this._sdfConverter.dispose();this._sdfConverter=this._glyphMosaic=this._spriteMosaic=null;this._hashToBindingIndex.clear();this._bindingInfos=this._hashToBindingIndex=null;this._ongoingRasterizations.clear();this._ongoingRasterizations=null;this._imageRequestQueue.clear();
this._imageRequestQueue=null};L.rasterizeItem=function(){var M=u._asyncToGenerator(function*(J,R,X,U){if(p.isNone(J))return H.error(new v("mapview-null-resource","Unable to rasterize null resource",void 0)),null;switch(J.type){case "text":case "esriTS":return J=yield this._rasterizeText(J,X,U),J.forEach(V=>this._setTextureBinding(f.MosaicType.GLYPH,V)),{glyphMosaicItems:J};default:if(w.is3D(J))return H.error(new v("mapview-invalid-type",`MapView does not support symbol type: ${J.type}`,J)),null;J=
yield this._rasterizeSpriteSymbol(J,R,U);y.ok(J)&&J&&this._setTextureBinding(f.MosaicType.SPRITE,J);return{spriteMosaicItem:J}}});return function(J,R,X,U){return M.apply(this,arguments)}}();L.bindTextures=function(M,J,R,X=!1){if(0!==R.textureBinding){var U=this._bindingInfos[R.textureBinding-1];R=U.page;X=X?D.TextureSamplingMode.LINEAR_MIPMAP_LINEAR:D.TextureSamplingMode.LINEAR;switch(U.mosaicType){case f.MosaicType.SPRITE:{U=this.sprites.getWidth(R);const V=this.sprites.getHeight(R);U=b.set(O,U,
V);this._spriteMosaic.bind(M,X,R,d.TEXTURE_BINDING_SPRITE_ATLAS);J.setUniform1i("u_texture",d.TEXTURE_BINDING_SPRITE_ATLAS);J.setUniform2fv("u_mosaicSize",U);break}case f.MosaicType.GLYPH:U=b.set(O,this.glyphs.width,this.glyphs.height);this._glyphMosaic.bind(M,X,R,d.TEXTURE_BINDING_GLYPH_ATLAS);J.setUniform1i("u_texture",d.TEXTURE_BINDING_GLYPH_ATLAS);J.setUniform2fv("u_mosaicSize",U);break;default:H.error("mapview-texture-manager",`Cannot handle unknown type ${U.mosaicType}`)}}};L._hashMosaic=function(M,
J){return 1|M<<1|(J.sdf?1:0)<<2|J.page<<3};L._setTextureBinding=function(M,J){const R=this._hashMosaic(M,J);this._hashToBindingIndex.has(R)||(M=K.fromMosaic(M,J),this._hashToBindingIndex.set(R,this._bindingInfos.length+1),this._bindingInfos.push(M));J.textureBinding=this._hashToBindingIndex.get(R)};L._rasterizeText=function(){var M=u._asyncToGenerator(function*(J,R,X){let U,V;U="cim"in J?J.fontName:l.getFullyQualifiedFontName(J.font);V=J.text;J=this._invalidFontsMap.has(U);R=R?R:w.charCodes(r.bidiText(V)[0]);
try{return yield this._glyphMosaic.getGlyphItems(J?"arial-unicode-ms-regular":U,R,X)}catch(Q){return H.error(new v("mapview-invalid-resource",`Couldn't find font ${U}. Falling back to Arial Unicode MS Regular`,void 0)),this._invalidFontsMap.set(U,!0),this._glyphMosaic.getGlyphItems("arial-unicode-ms-regular",R,X)}});return function(J,R,X){return M.apply(this,arguments)}}();L._rasterizeSpriteSymbol=function(){var M=u._asyncToGenerator(function*(J,R,X){if(w.isSimple(J))return null;R=B.keyFromSymbol(J);
if(this._spriteMosaic.has(R))return this._spriteMosaic.getSpriteItem(R);if(w.isSVGResource(J)||w.isImageResource(J)&&!w.isMarkerPlacementInsidePolygon(J))return this._handleAsyncResource(R,J,X);if(X=this._rasterizer.rasterizeJSONResource(J,1)){const {size:U,image:V,sdf:Q,simplePattern:Y}=X;return this._addItemToMosaic(R,U,{type:"static",data:V},w.shouldRepeat(J),Q,Y)}return new v("TextureManager","unrecognized or null rasterized image")});return function(J,R,X){return M.apply(this,arguments)}}();
L._handleAsyncResource=function(){var M=u._asyncToGenerator(function*(J,R,X){if(this._ongoingRasterizations.has(J))return this._ongoingRasterizations.get(J);R=w.isSVGResource(R)?this._handleSVG(R,J,X):this._handleImage(R,J,X);this._ongoingRasterizations.set(J,R);try{yield R,this._ongoingRasterizations.delete(J)}catch{this._ongoingRasterizations.delete(J)}return R});return function(J,R,X){return M.apply(this,arguments)}}();L._handleSVG=function(){var M=u._asyncToGenerator(function*(J,R,X){J=yield this._sdfConverter.draw(J.path,
X);return this._addItemToMosaic(R,[126,126],{type:"static",data:new Uint32Array(J.buffer)},!1,!0,!0)});return function(J,R,X){return M.apply(this,arguments)}}();L._handleGIFOrPNG=function(){var M=u._asyncToGenerator(function*(J,R,X){var U=yield F(J,X);if(y.ok(U)){var V=x.isGIF(U);const Q=A.isPNG(U);if(!V&&!Q)return new v("mapview-invalid-resource","Image data is neither GIF nor PNG!");let Y;try{const fa=J.animatedSymbolProperties||{},da=J.objectId;V&&x.isAnimatedGIF(U)?Y=yield x.GIF.create(U,fa,da,
this._requestRender,X):Q&&A.isAnimatedPNG(U)&&(Y=yield A.APNG.create(U,fa,da,this._requestRender,X))}catch(fa){if(!g.isAbortError(fa))return new v("mapview-invalid-resource","Could not fetch requested resource!")}if(Y&&y.ok(Y))return this._addItemToMosaic(R,[Y.width,Y.height],{type:"animated",data:Y},w.shouldRepeat(J),!1,!1);X=new Blob([U],{type:V?"image/gif":"image/png"});if((X=yield this._imageFromBlob(X))&&X instanceof HTMLImageElement){U=X.width;V=X.height;"esriPMS"===J.type&&(U=Math.round(G(X.width,
w.getPMSResourceSize(J))),V=Math.round(U/X.width*X.height));const {size:fa,sdf:da,image:ca}=this._rasterizer.rasterizeImageResource(U,V,X,"cim"in J?J.cim.colorSubstitutions:void 0);return this._addItemToMosaic(R,fa,{type:"static",data:ca},w.shouldRepeat(J),da,!1)}}return new v("mapview-invalid-resource","Could not handle resource!")});return function(J,R,X){return M.apply(this,arguments)}}();L._handleImage=function(){var M=u._asyncToGenerator(function*(J,R,X){if(w.isGIF(J)||w.isPNG(J))return this._handleGIFOrPNG(J,
R,X);const U=w.getUrl(J);try{let Q;const Y=this.resourceManager.getResource(U);if(p.isSome(Y))Q=Y;else{const {data:S}=yield this._imageRequestQueue.push(U,{...X});Q=S}if(w.isSVGImage(U))if("width"in J&&"height"in J)Q.width=e.pt2px(J.width),Q.height=e.pt2px(J.height);else if("cim"in J){var V;const S=J.cim;Q.width=e.pt2px(null!=(V=S.width)?V:S.scaleX*S.size);Q.height=e.pt2px(S.size)}if(!Q.width||!Q.height)return null;let fa=Q.width,da=Q.height;"esriPMS"===J.type&&(fa=Math.round(G(Q.width,w.getPMSResourceSize(J))),
da=Math.round(fa/Q.width*Q.height));const {size:ca,sdf:la,image:ha}=this._rasterizer.rasterizeImageResource(fa,da,Q,"cim"in J?J.cim.colorSubstitutions:void 0);return this._addItemToMosaic(R,ca,{type:"static",data:ha},w.shouldRepeat(J),la,!1)}catch(Q){if(!g.isAbortError(Q))return new v("mapview-invalid-resource",`Could not fetch requested resource at ${U}. ${Q.message}`)}});return function(J,R,X){return M.apply(this,arguments)}}();L._imageFromBlob=function(){var M=u._asyncToGenerator(function*(J){J=
window.URL.createObjectURL(J);try{const {data:R}=yield this._imageRequestQueue.push(J);window.URL.revokeObjectURL(J);return R}catch(R){window.URL.revokeObjectURL(J);if(!g.isAbortError(R))return new v("mapview-invalid-resource",`Could not fetch requested resource at ${J}`);throw R;}});return function(J){return M.apply(this,arguments)}}();L._addItemToMosaic=function(M,J,R,X,U,V){return this._spriteMosaic.addSpriteItem(M,J,R,X,U,V)};u._createClass(P,[{key:"sprites",get:function(){return this._spriteMosaic}},
{key:"glyphs",get:function(){return this._glyphMosaic}}]);return P}()})},"esri/core/BidiText":function(){define(["exports","./BidiEngine"],function(u,n){const h=new n;u.bidiText=function(r){if(!h.hasBidiChar(r))return[r,!1];let v;v="rtl"===h.checkContextual(r)?"IDNNN":"ICNNN";return[h.bidiTransform(r,v,"VLYSN"),!0]};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/Rasterizer":function(){define(["./CIMSymbolHelper","./Rect","./SDFHelper",
"./utils"],function(u,n,h,r){return function(){function v(p){this._resourceManager=p}var z=v.prototype;z.dispose=function(){this._rasterizationCanvas=null};z.rasterizeJSONResource=function(p,g,e){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===p.type||"esriSFS"===p.type){const [k,q,t]=u.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,p.style,g);return{size:[q,t],image:new Uint32Array(k.buffer),sdf:!1,simplePattern:!0,anchorX:0,
anchorY:0}}if("simple-line"===p.type||"esriSLS"===p.type||"line"===p.type&&p.dashTemplate){if("simple-line"===p.type||"esriSLS"===p.type)switch(e=u.slsDashToTemplateArray(p.style,p.cap),p.cap){case "butt":p="Butt";break;case "square":p="Square";break;default:p="Round"}else e=p.dashTemplate,p=p.cim.capStyle;const [k,q,t]=u.SymbolHelper.rasterizeSimpleLine(e,p);return{size:[q,t],image:new Uint32Array(k.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let b,a;"simple-marker"===p.type||"esriSMS"===
p.type||"line-marker"===p.type?(p=u.CIMSymbolHelper.fromSimpleMarker(p),a=h.getSDFInfo(p)):p.cim&&"CIMHatchFill"===p.cim.type?(p=u.CIMSymbolHelper.fromCIMHatchFill(p.cim),b=new n(p.frame.xmin,-p.frame.ymax,p.frame.xmax-p.frame.xmin,p.frame.ymax-p.frame.ymin)):p.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===p.cim.markerPlacement.type?(p=u.CIMSymbolHelper.fromCIMInsidePolygon(p.cim),b=new n(p.frame.xmin,-p.frame.ymax,p.frame.xmax-p.frame.xmin,p.frame.ymax-p.frame.ymin)):(p=p.cim,a=h.getSDFInfo(p));
if(a&&!e){const [k,q,t]=h.buildSDF(a);return k?{size:[q,t],image:new Uint32Array(k.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const [c,d,f,l,m]=u.CIMSymbolHelper.rasterize(this._rasterizationCanvas,p,b,this._resourceManager,!e);return c?{size:[d,f],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:l,anchorY:m}:null};z.rasterizeImageResource=function(p,g,e,b){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));this._rasterizationCanvas.width=
p;this._rasterizationCanvas.height=g;var a=this._rasterizationCanvas.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):(e.setAttribute("width",`${p}px`),e.setAttribute("height",`${g}px`),a.drawImage(e,0,0,p,g));e=a.getImageData(0,0,p,g);e=new Uint8Array(e.data);if(b)for(var c of b)if(c&&c.oldColor&&4===c.oldColor.length&&c.newColor&&4===c.newColor.length){const [d,f,l,m]=c.oldColor,[k,q,t,w]=c.newColor;if(d!==k||f!==q||l!==t||m!==w)for(b=0;b<e.length;b+=4)d===e[b]&&f===e[b+1]&&l===e[b+
2]&&m===e[b+3]&&(e[b]=k,e[b+1]=q,e[b+2]=t,e[b+3]=w)}for(b=0;b<e.length;b+=4)c=e[b+3]/255,e[b]*=c,e[b+1]*=c,e[b+2]*=c;a=e;c=p;b=g;if(512<=c||512<=b){a=c/b;1<a?(c=512,b=Math.round(512/a)):(b=512,c=Math.round(512*a));a=new Uint8Array(4*c*b);const d=new Uint8ClampedArray(a.buffer);r.resampleHermite(e,p,g,d,c,b,!1)}return{size:[c,b],image:new Uint32Array(a.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}};return v}()})},"esri/symbols/cim/CIMSymbolHelper":function(){define("exports ../../Color ../../core/BidiText ../../core/floatRGBA ../../core/lang ../../core/Logger ../../core/mathUtils ../../core/maybe ../../core/RandomLCG ../../core/screenUtils ../../geometry/support/aaBoundingRect ../../geometry/support/boundsUtils ./CIMPlacements ./CIMSymbolDrawHelper ./enums ./utils ../../views/2d/engine/vectorTiles/GeometryUtils ../../views/2d/engine/webgl/definitions ../../views/2d/engine/webgl/mesh/templates/shapingUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t){function w(V,Q){switch(Q.type){case "CIMSymbolReference":return w(V,Q.symbol);case "CIMPointSymbol":V.drawSymbol(Q,{x:0,y:0});break;case "CIMLineSymbol":V.drawSymbol(Q,{paths:[[[0,0],[0,1]]]});break;case "CIMPolygonSymbol":V.drawSymbol(Q,{rings:[[[0,0],[0,1],[0,0]]]});break;case "CIMTextSymbol":V.drawSymbol(Q,{x:0,y:0});break;case "CIMVectorMarker":{const Y=new d.Placement;V.drawMarker(Q,Y)}}return V.envelope()}function A(V){if(!V)return 0;switch(V.type){case "CIMMarkerPlacementAlongLineSameSize":return Math.abs(V.offset);
case "CIMMarkerPlacementAlongLineRandomSize":return Math.abs(V.offset);case "CIMMarkerPlacementAtExtremities":return Math.abs(V.offset);case "CIMMarkerPlacementAtMeasuredUnits":return Math.abs(V.offset);case "CIMMarkerPlacementAtRatioPositions":return Math.abs(V.offset);case "CIMMarkerPlacementInsidePolygon":return 0;case "CIMMarkerPlacementOnLine":return Math.abs(V.offset);case "CIMMarkerPlacementOnVertices":return Math.abs(V.offset);case "CIMMarkerPlacementPolygonCenter":return 0;default:return 0}}
function x(V){if(!V)return 0;switch(V.type){case "CIMGeometricEffectArrow":return Math.abs(.5*V.width);case "CIMGeometricEffectBuffer":return Math.abs(V.size);case "CIMGeometricEffectExtension":return Math.abs(V.length);case "CIMGeometricEffectJog":return Math.abs(.5*V.length);case "CIMGeometricEffectMove":return Math.max(Math.abs(m.getValue(V.offsetX)),Math.abs(m.getValue(V.offsetY)));case "CIMGeometricEffectOffset":return Math.abs(V.offset);case "CIMGeometricEffectOffsetTangent":return Math.abs(V.offset);
case "CIMGeometricEffectRadial":return Math.abs(V.length);case "CIMGeometricEffectRegularPolygon":return Math.abs(V.radius);case "CIMGeometricEffectRotate":return 0;case "CIMGeometricEffectScale":return 0;case "CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(V.fromWidth),Math.abs(V.toWidth));case "CIMGeometricEffectWave":return Math.abs(V.amplitude);default:return 0}}function y(V){if(!V)return 0;let Q=0;for(const Y of V)Q+=x(Y);return Q}const B=Math.PI,C=B/2,D=96/72,F=Math.PI/180,E=z.getLogger("esri.symbols.cim.CIMSymbolHelper");
z=function(){function V(){}var Q=V.prototype;Q.getSymbolInflateSize=function(Y,fa,da,ca,la){Y||(Y=[0,0,0,0]);return fa?this._getInflateSize(Y,fa,da,ca,la):Y};V.safeSize=function(Y){const fa=Math.max(Math.abs(Y[0]),Math.abs(Y[2]));Y=Math.max(Math.abs(Y[1]),Math.abs(Y[3]));return Math.sqrt(fa*fa+Y*Y)};Q._vectorMarkerBounds=function(Y,fa,da,ca){let la=!0;const ha=a.create();if(fa&&fa.markerGraphics)for(const S of fa.markerGraphics)fa=[0,0,0,0],S.geometry&&(c.getBoundsXY(ha,S.geometry),fa[0]=0,fa[1]=
0,fa[2]=0,fa[3]=0,this.getSymbolInflateSize(fa,S.symbol,da,0,ca),ha[0]+=fa[0],ha[1]+=fa[1],ha[2]+=fa[2],ha[3]+=fa[3],la?(Y[0]=ha[0],Y[1]=ha[1],Y[2]=ha[2],Y[3]=ha[3],la=!1):(Y[0]=Math.min(Y[0],ha[0]),Y[1]=Math.min(Y[1],ha[1]),Y[2]=Math.max(Y[2],ha[2]),Y[3]=Math.max(Y[3],ha[3])));return Y};Q._getInflateSize=function(Y,fa,da,ca,la){return void 0!==fa.symbolLayers?(Y=this._getLayersInflateSize(Y,fa.symbolLayers,da,ca,la),fa=y(fa.effects),0<fa&&(Y[0]-=fa,Y[1]-=fa,Y[2]+=fa,Y[3]+=fa),Y):this._getTextInflatedSize(Y,
fa,la)};Q._getLayersInflateSize=function(Y,fa,da,ca,la){let ha=!0;if(!fa)return Y;for(const wa of fa)if(wa){var S=[0,0,0,0];switch(wa.type){case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":fa=wa;var ea=fa.width;ea=fa.capStyle===l.LineCapStyle.Square||fa.joinStyle===l.LineJoinStyle.Miter?ea/1.4142135623730951:ea/2;S[0]=-ea;S[1]=-ea;S[2]=ea;S[3]=ea;break;case "CIMCharacterMarker":case "CIMVectorMarker":case "CIMPictureMarker":fa=wa;if("CIMVectorMarker"===wa.type){if(ea=wa,S=this._vectorMarkerBounds(S,
ea,da,la),ea.frame){var ma=(ea.frame.xmin+ea.frame.xmax)/2,sa=(ea.frame.ymin+ea.frame.ymax)/2;S[0]-=ma;S[1]-=sa;S[2]-=ma;S[3]-=sa;ea=ea.size/(ea.frame.ymax-ea.frame.ymin);S[0]*=ea;S[1]*=ea;S[2]*=ea;S[3]*=ea}}else"CIMPictureMarker"===wa.type?(S=wa,ma=da.getResource(S.url),ea=1,g.isSome(ma)&&ma.height&&(ea=ma.width/ma.height),ma=fa.size/2,S=fa.size*ea*S.scaleX/2,S=[-S,-ma,S,ma]):(S=fa.size/2,S=[-S,-S,S,S]);fa.anchorPoint&&("Absolute"===fa.anchorPointUnits?(ea=fa.anchorPoint.x,ma=fa.anchorPoint.y):(ea=
fa.anchorPoint.x*(S[2]-S[0]),ma=fa.anchorPoint.y*(S[3]-S[1])),S[0]-=ea,S[1]-=ma,S[2]-=ea,S[3]-=ma);ea=m.getValue(fa.rotation);fa.rotateClockwise&&(ea=-ea);ca&&(ea-=ca);ea&&(ma=F*ea,ea=Math.cos(ma),ma=Math.sin(ma),sa=a.create([k.C_INFINITY,k.C_INFINITY,-k.C_INFINITY,-k.C_INFINITY]),a.expandPointInPlace(sa,[S[0]*ea-S[1]*ma,S[0]*ma+S[1]*ea]),a.expandPointInPlace(sa,[S[0]*ea-S[3]*ma,S[0]*ma+S[3]*ea]),a.expandPointInPlace(sa,[S[2]*ea-S[1]*ma,S[2]*ma+S[1]*ea]),a.expandPointInPlace(sa,[S[2]*ea-S[3]*ma,S[2]*
ma+S[3]*ea]),S=sa);ea=m.getValue(fa.offsetX);ma=m.getValue(fa.offsetY);if(ca){var ja=F*ca;sa=Math.cos(ja);ja=Math.sin(ja);const Ja=ea*ja+ma*sa;ea=ea*sa-ma*ja;ma=Ja}S[0]+=ea;S[1]+=ma;S[2]+=ea;S[3]+=ma;fa=A(fa.markerPlacement);0<fa&&(S[0]-=fa,S[1]-=fa,S[2]+=fa,S[3]+=fa)}fa=y(wa.effects);0<fa&&(S[0]-=fa,S[1]-=fa,S[2]+=fa,S[3]+=fa);ha?(Y[0]=S[0],Y[1]=S[1],Y[2]=S[2],Y[3]=S[3],ha=!1):(Y[0]=Math.min(Y[0],S[0]),Y[1]=Math.min(Y[1],S[1]),Y[2]=Math.max(Y[2],S[2]),Y[3]=Math.max(Y[3],S[3]))}return Y};Q._getTextInflatedSize=
function(Y,fa,da){var ca,la;const ha=null!=(ca=fa.height)?ca:10;Y[0]=-ha/2;Y[1]=-ha/2;Y[2]=ha/2;Y[3]=ha/2;if(!da)return Y;da=da.get(fa);if(!da)return Y;const {text:S,mosaicItem:ea}=da;if(!ea||0===ea.glyphMosaicItems.length)return Y;da=f.lineGapType2LineHeight(fa.lineGapType,null!=(la=fa.lineGap)?la:0,ha);la=h.bidiText(S)[1];fa=t.shapeGlyphs(ea.glyphMosaicItems,la,{scale:ha/q.GLYPH_SIZE,angle:m.getValue(fa.angle),xOffset:m.getValue(fa.offsetX),yOffset:m.getValue(fa.offsetY),hAlign:f.horizontalAlignment2HAlign(fa.horizontalAlignment),
vAlign:f.verticalAlignment2VAlign(fa.verticalAlignment),maxLineWidth:512,lineHeight:q.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(da||1,4)),decoration:fa.font.decoration||"none",isCIM:!0}).boundsT;Y[0]=fa.x-fa.halfWidth;Y[1]=-fa.y-fa.halfHeight;Y[2]=fa.x+fa.halfWidth;Y[3]=-fa.y+fa.halfHeight;return Y};return V}();let G=function(){function V(){}V.getEnvelope=function(Q,Y){Y=new f.EnvDrawHelper(Y);if(Array.isArray(Q)){let fa;for(const da of Q)fa?fa.union(w(Y,da)):fa=w(Y,da);return fa}return w(Y,Q)};
V.getTextureAnchor=function(Q,Y){Q=this.getEnvelope(Q,Y);if(!Q)return[0,0,0];Y=Q.height*D+2;return[(Q.x+.5*Q.width)*D/(Q.width*D+2),-(Q.y+.5*Q.height)*D/Y,Y]};V.rasterize=function(Q,Y,fa,da,ca=!0){var la=fa||this.getEnvelope(Y,da);if(!la)return[null,0,0,0,0];const ha=(la.x+.5*la.width)*D,S=(la.y+.5*la.height)*D;Q.width=la.width*D;Q.height=la.height*D;fa||(Q.width+=2,Q.height+=2);fa=Q.getContext("2d");la=f.Transformation.createScale(D,-D);la.translate(.5*Q.width-ha,.5*Q.height+S);da=new f.CanvasDrawHelper(fa,
da,la);switch(Y.type){case "CIMPointSymbol":da.drawSymbol(Y,{type:"point",x:0,y:0});break;case "CIMVectorMarker":la=new d.Placement,da.drawMarker(Y,la)}Y=fa.getImageData(0,0,Q.width,Q.height);Y=new Uint8Array(Y.data);if(ca)for(da=0;da<Y.length;da+=4)ca=Y[da+3]/255,Y[da]*=ca,Y[da+1]*=ca,Y[da+2]*=ca;return[Y,Q.width,Q.height,-ha/Q.width,-S/Q.height]};V.fromTextSymbol=function(Q){const {angle:Y,color:fa,font:da,haloColor:ca,haloSize:la,horizontalAlignment:ha,kerning:S,text:ea,verticalAlignment:ma,xoffset:sa,
yoffset:ja}=Q;let wa,Ja;if(da){var va=da.family;var ra=da.style;var Ba=da.weight;wa=da.size;Ja=da.decoration}Q=!1;ea&&(Q=h.bidiText(ea)[1]);var Ha=l.BlockProgression.BTT,ya=l.FontEffects.Normal,qa=l.FontEncoding.Unicode;va=va||"Arial";b:{if(Ba)switch(Ba.toLowerCase()){case "bold":case "bolder":Ba="bold";break b}Ba=""}b:{if(ra)switch(ra.toLowerCase()){case "italic":case "oblique":ra="italic";break b}ra=""}Ba=Ba&&ra?`${Ba}-${ra}`:`${Ba}${ra}`;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",
enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMTextSymbol",angle:Y,blockProgression:Ha,depth3D:1,extrapolateBaselines:!0,fontEffects:ya,fontEncoding:qa,fontFamilyName:va,fontStyleName:Ba,fontType:l.FontType.Unspecified,haloSize:la,height:wa,hinting:l.GlyphHinting.Default,horizontalAlignment:L(null!=ha?ha:"center"),kerning:S,letterWidth:100,
ligatures:!0,lineGapType:"Multiple",offsetX:m.getValue(sa),offsetY:m.getValue(ja),strikethrough:"line-through"===Ja,underline:"underline"===Ja,symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:J(fa)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:J(ca)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:Q?l.TextReadingDirection.RTL:l.TextReadingDirection.LTR,verticalAlignment:M(null!=
ma?ma:"baseline"),verticalGlyphOrientation:l.VerticalGlyphOrientation.Right,wordSpacing:100,billboardMode3D:l.BillBoardMode.FaceNearPlane},textString:ea}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}};V.fromPictureFillSymbol=function(Q){const {height:Y,outline:fa,width:da,xoffset:ca,xscale:la,yoffset:ha,yscale:S}=Q,ea=[],ma={type:"CIMPolygonSymbol",symbolLayers:ea};if(fa){const {cap:ja,join:wa,miterLimit:Ja,width:va}=fa;ea.push({type:"CIMSolidStroke",color:J(fa.color),
capStyle:K(ja),joinStyle:P(wa),miterLimit:Ja,width:va})}let sa=Q.url;"esriPFS"===Q.type&&Q.imageData&&(sa=Q.imageData);Q="angle"in Q?Q.angle:0;ea.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:l.TextureFilter.Picture,tintColor:null,url:sa,height:Y*(S||1),width:da*(la||1),offsetX:m.getValue(ca),offsetY:m.getValue(ha),rotation:m.getValue(-Q),colorSubstitutions:null});return ma};V.fromSimpleFillSymbol=function(Q){const {color:Y,style:fa,outline:da}=Q;Q=[];const ca={type:"CIMPolygonSymbol",
symbolLayers:Q};var la=null;if(da){const {cap:S,join:ea,style:ma}=da;"solid"!==ma&&"none"!==ma&&"esriSLSSolid"!==ma&&"esriSLSNull"!==ma&&(la=[{type:"CIMGeometricEffectDashes",dashTemplate:R(ma,S),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);Q.push({type:"CIMSolidStroke",color:J(da.color),capStyle:K(S),joinStyle:P(ea),miterLimit:da.miterLimit,width:da.width,effects:la})}if(fa&&"solid"!==fa&&"none"!==fa&&"esriSFSSolid"!==fa&&"esriSFSNull"!==fa){la={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",
color:J(Y),capStyle:l.LineCapStyle.Butt,joinStyle:l.LineJoinStyle.Miter,width:.75}]};let S=0;var ha=p.nextPowerOfTwo(Math.ceil(window.devicePixelRatio));ha=U(fa)?8*ha:10*ha;switch(fa){case "vertical":case "esriSFSVertical":S=90;break;case "forward-diagonal":case "esriSFSForwardDiagonal":S=-45;break;case "backward-diagonal":case "esriSFSBackwardDiagonal":S=45;break;case "cross":case "esriSFSCross":S=0;break;case "diagonal-cross":case "esriSFSDiagonalCross":S=-45}Q.push({type:"CIMHatchFill",lineSymbol:la,
offsetX:0,offsetY:0,rotation:S,separation:ha});"cross"===fa||"esriSFSCross"===fa?Q.push({type:"CIMHatchFill",lineSymbol:v.clone(la),offsetX:0,offsetY:0,rotation:90,separation:ha}):("diagonal-cross"===fa||"esriSFSDiagonalCross"===fa)&&Q.push({type:"CIMHatchFill",lineSymbol:v.clone(la),offsetX:0,offsetY:0,rotation:45,separation:ha})}else!fa||"solid"!==fa&&"esriSFSSolid"!==fa||Q.push({type:"CIMSolidFill",enable:!0,color:J(Y)});return ca};V.fromSimpleLineSymbol=function(Q){const {cap:Y,color:fa,join:da,
marker:ca,miterLimit:la,style:ha,width:S}=Q;Q=null;"solid"!==ha&&"none"!==ha&&"esriSLSSolid"!==ha&&"esriSLSNull"!==ha&&(Q=[{type:"CIMGeometricEffectDashes",dashTemplate:R(ha,Y),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const ea=[];if(ca){let ma;switch(ca.placement){case "begin-end":ma=l.ExtremityPlacement.Both;break;case "begin":ma=l.ExtremityPlacement.JustBegin;break;case "end":ma=l.ExtremityPlacement.JustEnd;break;default:ma=l.ExtremityPlacement.None}const sa=V.fromSimpleMarker(ca,
S,fa).symbolLayers[0];sa.markerPlacement={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:ma,offsetAlongLine:0};ea.push(sa)}"none"!==ha&&"esriSLSNull"!==ha&&ea.push({type:"CIMSolidStroke",color:J(fa),capStyle:K(Y),joinStyle:P(da),miterLimit:la,width:S,effects:Q});return{type:"CIMLineSymbol",symbolLayers:ea}};V.fromPictureMarker=function(Q){const {angle:Y,height:fa,width:da,xoffset:ca,yoffset:la}=Q;let ha=Q.url;"esriPMS"===Q.type&&Q.imageData&&(ha=Q.imageData);return{type:"CIMPointSymbol",
symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:l.TextureFilter.Picture,tintColor:null,url:ha,size:fa,width:da,offsetX:m.getValue(ca),offsetY:m.getValue(la),rotation:m.getValue(-Y)}]}};V.fromSimpleMarker=function(Q,Y,fa){var da,{style:ca}=Q;fa=null!=(da=Q.color)?da:fa;if("path"===ca){Y=[];"outline"in Q&&Q.outline&&(da=Q.outline,Y.push({type:"CIMSolidStroke",enable:!0,width:b.pt2px(Math.round(b.px2pt(da.width))),color:J(da.color)}));Y.push({type:"CIMSolidFill",
enable:!0,color:J(fa),path:Q.path});const [ea,ma]=X("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:m.getValue(-Q.angle),size:m.getValue(Q.size||6),offsetX:m.getValue(Q.xoffset),offsetY:m.getValue(Q.yoffset),frame:ea,markerGraphics:[{type:"CIMMarkerGraphic",geometry:ma,symbol:{type:"CIMPolygonSymbol",symbolLayers:Y}}]}]}}const [la,ha]=X(ca);let S;ha&&la&&(da=[],"outline"in Q&&Q.outline?(ca=Q.outline,da.push({type:"CIMSolidStroke",enable:!0,width:.667<
ca.width?b.pt2px(Math.round(b.px2pt(ca.width))):ca.width,color:J(ca.color)})):!Y||"line-marker"!==Q.type||"cross"!==Q.style&&"x"!==Q.style||da.push({type:"CIMSolidStroke",enable:!0,width:Y,color:J(fa)}),da.push({type:"CIMSolidFill",enable:!0,color:J(fa)}),fa={type:"CIMPolygonSymbol",symbolLayers:da},S={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:m.getValue(-Q.angle),size:m.getValue(Q.size||6*Y),offsetX:m.getValue(Q.xoffset),offsetY:m.getValue(Q.yoffset),frame:la,
markerGraphics:[{type:"CIMMarkerGraphic",geometry:ha,symbol:fa}]}]});return S};V.fromCIMHatchFill=function(Q){var Y;const fa=null!=(Y=Q.separation)?Y:4;Y=fa/2;const da=Q.lineSymbol;for(Q=this._getLineSymbolPeriod(Q.lineSymbol)||4;4>Q;)Q*=2;Q/=2;return{type:"CIMVectorMarker",frame:{xmin:-Q,xmax:Q,ymin:-Y,ymax:Y},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-Q,0],[Q,0]]]},symbol:da}],size:fa}};V._getLineSymbolPeriod=function(Q){if(Q){const Y=this._getEffectsRepeat(Q.effects);if(Y)return Y;
if(Q.symbolLayers)for(const fa of Q.symbolLayers)if(fa){if(Q=this._getEffectsRepeat(fa.effects))return Q;switch(fa.type){case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":case "CIMObjectMarker3D":case "CIMglTFMarker3D":if(Q=this._getPlacementRepeat(fa.markerPlacement))return Q}}}return 0};V._getEffectsRepeat=function(Q){if(Q)for(var Y of Q)if(Y)switch(Y.type){case "CIMGeometricEffectDashes":if((Q=Y.dashTemplate)&&Q.length){Y=0;for(const fa of Q)Y+=fa;Q.length&1&&(Y*=2);return Y}break;
case "CIMGeometricEffectWave":return Y.period;default:E.error(`unsupported geometric effect type ${Y.type}`)}return 0};V._getPlacementRepeat=function(Q){if(Q)switch(Q.type){case "CIMMarkerPlacementAlongLineSameSize":case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineVariableSize":if((Q=Q.placementTemplate)&&Q.length){let Y=0;for(const fa of Q)Y+=fa;Q.length&1&&(Y*=2);return Y}}return 0};V.fromCIMInsidePolygon=function(Q){var Y,fa=Q.markerPlacement;const da={type:Q.type,
...Q,markerPlacement:null,anchorPoint:null};Q=Math.abs(fa.stepX);const ca=Math.abs(fa.stepY);var la=(null!=(Y=fa.randomness)?Y:100)/100;let ha,S;if("Random"===fa.gridType){Y=b.px2pt(q.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE);const ea=Math.max(Math.floor(Y/Q),1),ma=Math.max(Math.floor(Y/ca),1);Y=ea*Q/2;ha=ma*ca/2;S=2*ha;fa=new e(fa.seed);const sa=la*Q/1.5,ja=la*ca/1.5;la=[];for(let wa=0;wa<ea;wa++)for(let Ja=0;Ja<ma;Ja++){const va=wa*Q-Y+sa*(.5-fa.getFloat()),ra=Ja*ca-ha+ja*(.5-fa.getFloat());la.push({x:va,
y:ra});0===wa&&la.push({x:va+2*Y,y:ra});0===Ja&&la.push({x:va,y:ra+2*ha})}}else!0===fa.shiftOddRows?(Y=Q/2,ha=ca,S=2*ca,la=[{x:-Y,y:0},{x:Y,y:0},{x:0,y:ha},{x:0,y:-ha}]):(Y=Q/2,ha=ca/2,S=ca,la=[{x:0,y:0}]);Q=la.map(ea=>({type:"CIMMarkerGraphic",geometry:ea,symbol:{type:"CIMPointSymbol",symbolLayers:[da]}}));return{type:"CIMVectorMarker",frame:{xmin:-Y,xmax:Y,ymin:-ha,ymax:ha},markerGraphics:Q,size:S}};V.getFillColor=function(Q){if(!Q)return null;switch(Q.type){case "CIMPolygonSymbol":if(Q.symbolLayers)for(const Y of Q.symbolLayers)if(Q=
V.getFillColor(Y),null!=Q)return Q;break;case "CIMTextSymbol":return V.getFillColor(Q.symbol);case "CIMSolidFill":return Q.color}};V.getStrokeColor=function(Q){if(Q)switch(Q.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(Q.symbolLayers)for(const Y of Q.symbolLayers)if(Q=V.getStrokeColor(Y),void 0!==Q)return Q;break;case "CIMTextSymbol":return V.getStrokeColor(Q.symbol);case "CIMSolidStroke":return Q.color}};V.getStrokeWidth=function(Q){if(Q)switch(Q.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(Q.symbolLayers)for(const Y of Q.symbolLayers)if(Q=
V.getStrokeWidth(Y),void 0!==Q)return Q;break;case "CIMTextSymbol":return V.getStrokeWidth(Q.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return Q.width}};V.getSize=function(Q){if(Q)switch(Q.type){case "CIMTextSymbol":return Q.height;case "CIMPointSymbol":var Y=0;if(Q.symbolLayers)for(var fa of Q.symbolLayers)if(fa)switch(fa.type){case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":case "CIMObjectMarker3D":case "CIMglTFMarker3D":Q=fa.size,Q>Y&&
(Y=Q)}return Y;case "CIMLineSymbol":case "CIMPolygonSymbol":fa=0;if(Q.symbolLayers)for(Y of Q.symbolLayers)if(Y)switch(Y.type){case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":Q=Y.width;Q>fa&&(fa=Q);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":case "CIMObjectMarker3D":case "CIMglTFMarker3D":m.isCIMMarkerStrokePlacement(Y.markerPlacement)&&(Q=Y.size,Q>fa&&(fa=Q))}return fa}};V.getMarkerScaleRatio=function(Q){if(Q)switch(Q.type){case "CIMVectorMarker":if(!1!==
Q.scaleSymbolsProportionally&&Q.frame)return Q.size/(Q.frame.ymax-Q.frame.ymin)}return 1};return V}(),O=function(){function V(){}V.rasterizeSimpleFill=function(Q,Y,fa){"solid"!==Y&&"none"!==Y&&"esriSFSSolid"!==Y&&"esriSFSNull"!==Y||console.error("Unexpected: style does not require rasterization");fa=p.nextPowerOfTwo(Math.ceil(fa));var da=U(Y)?8*fa:16*fa;const ca=2*fa;Q.width=da;Q.height=da;const la=Q.getContext("2d");la.strokeStyle="#FFFFFF";la.lineWidth=fa;la.beginPath();if("vertical"===Y||"cross"===
Y||"esriSFSCross"===Y||"esriSFSVertical"===Y)la.moveTo(da/2,-ca),la.lineTo(da/2,da+ca);if("horizontal"===Y||"cross"===Y||"esriSFSCross"===Y||"esriSFSHorizontal"===Y)la.moveTo(-ca,da/2),la.lineTo(da+ca,da/2);if("forward-diagonal"===Y||"diagonal-cross"===Y||"esriSFSDiagonalCross"===Y||"esriSFSForwardDiagonal"===Y)la.moveTo(-ca,-ca),la.lineTo(da+ca,da+ca),la.moveTo(da-ca,-ca),la.lineTo(da+ca,ca),la.moveTo(-ca,da-ca),la.lineTo(ca,da+ca);if("backward-diagonal"===Y||"diagonal-cross"===Y||"esriSFSBackwardDiagonal"===
Y||"esriSFSDiagonalCross"===Y)la.moveTo(da+ca,-ca),la.lineTo(-ca,da+ca),la.moveTo(ca,-ca),la.lineTo(-ca,ca),la.moveTo(da+ca,da-ca),la.lineTo(da-ca,da+ca);la.stroke();Y=la.getImageData(0,0,Q.width,Q.height);Y=new Uint8Array(Y.data);for(da=0;da<Y.length;da+=4)fa=Y[da+3]/255,Y[da]*=fa,Y[da+1]*=fa,Y[da+2]*=fa;return[Y,Q.width,Q.height]};V.rasterizeSimpleLine=function(Q,Y){return this.rasterizeDash(Q,Y)};V.rasterizeDash=function(Q,Y){var fa="Butt"===Y,da="Square"===Y;Y=!fa&&!da;1===Q.length%2&&(Q=[...Q,
...Q]);var ca=0;for(var la of Q)ca+=la;la=Math.round(15.5*ca);ca=new Float32Array(31*la);let ha=0,S=0,ea=.5,ma=!0;for(var sa of Q){ha=S;for(S+=15.5*sa;ea<=S;){for(Q=.5;31>Q;){const ja=Y?(Q-15.5)*(Q-15.5):Math.abs(Q-15.5);ca[(Q-.5)*la+ea-.5]=ma?fa?Math.max(Math.max(ha+7.75-ea,ja),Math.max(ea-S+7.75,ja)):ja:Y?Math.min((ea-ha)*(ea-ha)+ja,(ea-S)*(ea-S)+ja):da?Math.min(Math.max(ea-ha,ja),Math.max(S-ea,ja)):Math.min(Math.max(ea-ha+7.75,ja),Math.max(S+7.75-ea,ja));Q++}ea++}ma=!ma}fa=ca.length;sa=new Uint8Array(4*
fa);for(da=0;da<fa;++da)r.packFloatRGBA((Y?Math.sqrt(ca[da]):ca[da])/15.5,sa,4*da);return[sa,la,31]};return V}(),H=function(){function V(){}V.findApplicableOverrides=function(Q,Y,fa){if(Q&&Y){if(Q.primitiveName){let da=!1;for(const ca of fa)if(ca.primitiveName===Q.primitiveName){da=!0;break}if(!da)for(const ca of Y)ca.primitiveName===Q.primitiveName&&fa.push(ca)}switch(Q.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(Q.effects)for(const da of Q.effects)V.findApplicableOverrides(da,
Y,fa);if(Q.symbolLayers)for(const da of Q.symbolLayers)V.findApplicableOverrides(da,Y,fa);break;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMSolidFill":case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":if(Q.effects)for(const da of Q.effects)V.findApplicableOverrides(da,Y,fa);Q.markerPlacement&&V.findApplicableOverrides(Q.markerPlacement,Y,fa);if("CIMVectorMarker"===Q.type){if(Q.markerGraphics)for(const da of Q.markerGraphics)V.findApplicableOverrides(da,
Y,fa),V.findApplicableOverrides(da.symbol,Y,fa)}else"CIMCharacterMarker"===Q.type?V.findApplicableOverrides(Q.symbol,Y,fa):"CIMHatchFill"===Q.type?V.findApplicableOverrides(Q.lineSymbol,Y,fa):"CIMPictureMarker"===Q.type&&V.findApplicableOverrides(Q.animatedSymbolProperties,Y,fa)}}};V.findEffectOverrides=function(Q,Y,fa){if(Y&&Q){var da=Q.length;for(let la=0;la<da;la++){var ca=Q[la];if(ca=null==ca?void 0:ca.primitiveName){let ha=!1;for(const S of fa)if(S.primitiveName===ca){ha=!0;break}if(!ha)for(const S of Y)S.primitiveName===
ca&&fa.push(S)}}}};V.applyOverrides=function(Q,Y,fa,da){if(Y){if(Q.primitiveName)for(const la of Y)if(la.primitiveName===Q.primitiveName){var ca=(ca=la.propertyName)?ca.charAt(0).toLowerCase()+ca.substr(1):ca;da&&da.push({cim:Q,nocapPropertyName:ca,value:Q[ca]});la.expression&&(la.value=V.toValue(la.propertyName,la.expression));if(fa){let ha=!1;for(const S of fa)S.primitiveName===Q.primitiveName&&(ha=!0);ha||fa.push(la)}Q[ca]=la.value}switch(Q.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(Q.effects)for(const la of Q.effects)V.applyOverrides(la,
Y,fa,da);if(Q.symbolLayers)for(const la of Q.symbolLayers)V.applyOverrides(la,Y,fa,da);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(Q.effects)for(const la of Q.effects)V.applyOverrides(la,Y,fa,da);if("CIMVectorMarker"===Q.type&&Q.markerGraphics)for(const la of Q.markerGraphics)V.applyOverrides(la,Y,fa,da),V.applyOverrides(la.symbol,Y,fa,da)}}};V.restoreOverrides=function(Q){for(const Y of Q)Y.cim[Y.nocapPropertyName]=Y.value};V.buildOverrideKey=function(Q){let Y="";for(const fa of Q)void 0!==
fa.value&&(Y+=`${fa.primitiveName}${fa.propertyName}${JSON.stringify(fa.value)}`);return Y};V.toValue=function(Q,Y){return"DashTemplate"===Q?Y.split(" ").map(fa=>Number(fa)):"Color"===Q?(Q=(new n(Y)).toRgba(),Q[3]*=255,Q):Y};return V}();const K=V=>{if(!V)return l.LineCapStyle.Butt;switch(V){case "butt":return l.LineCapStyle.Butt;case "square":return l.LineCapStyle.Square;case "round":return l.LineCapStyle.Round}},P=V=>{if(!V)return l.LineJoinStyle.Miter;switch(V){case "miter":return l.LineJoinStyle.Miter;
case "round":return l.LineJoinStyle.Round;case "bevel":return l.LineJoinStyle.Bevel}},L=V=>{if(g.isNone(V))return"Center";switch(V){case "left":return"Left";case "right":return"Right";case "center":return"Center"}},M=V=>{if(g.isNone(V))return"Center";switch(V){case "baseline":return"Baseline";case "top":return"Top";case "middle":return"Center";case "bottom":return"Bottom"}},J=V=>{if(!V)return[0,0,0,0];const {r:Q,g:Y,b:fa,a:da}=V;return[Q,Y,fa,255*da]},R=(V,Q)=>{Q="butt"===Q;switch(V){case "dash":case "esriSLSDash":return Q?
[4,3]:[3,4];case "dash-dot":case "esriSLSDashDot":return Q?[4,3,1,3]:[3,4,0,4];case "dot":case "esriSLSDot":return Q?[1,3]:[0,4];case "long-dash":case "esriSLSLongDash":return Q?[8,3]:[7,4];case "long-dash-dot":case "esriSLSLongDashDot":return Q?[8,3,1,3]:[7,4,0,4];case "long-dash-dot-dot":case "esriSLSDashDotDot":return Q?[8,3,1,3,1,3]:[7,4,0,4,0,4];case "short-dash":case "esriSLSShortDash":return Q?[4,1]:[3,2];case "short-dash-dot":case "esriSLSShortDashDot":return Q?[4,1,1,1]:[3,2,0,2];case "short-dash-dot-dot":case "esriSLSShortDashDotDot":return Q?
[4,1,1,1,1,1]:[3,2,0,2,0,2];case "short-dot":case "esriSLSShortDot":return Q?[1,1]:[0,2];case "solid":case "esriSLSSolid":case "none":return E.error("Unexpected: style does not require rasterization"),[0,0];default:return E.error(`Tried to rasterize SLS, but found an unexpected style: ${V}!`),[0,0]}},X=V=>{if("circle"===V||"esriSMSCircle"===V){var Q=Math.acos(.995);V=Math.ceil(B/Q/4);0===V&&(V=1);Q=C/V;V*=4;var Y=[];Y.push([50,0]);for(let fa=1;fa<V;fa++)Y.push([50*Math.cos(fa*Q),-50*Math.sin(fa*Q)]);
Y.push([50,0]);Q={rings:[Y]};Y={xmin:-50,ymin:-50,xmax:50,ymax:50}}else"cross"===V||"esriSMSCross"===V?(Q={rings:[[[0,50],[0,0],[50,0],[50,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,50],[0,50]]]},Y={xmin:-50,ymin:-50,xmax:50,ymax:50}):"diamond"===V||"esriSMSDiamond"===V?(Q={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},Y={xmin:-50,ymin:-50,xmax:50,ymax:50}):"square"===V||"esriSMSSquare"===V?(Q={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},Y={xmin:-50,ymin:-50,xmax:50,
ymax:50}):"x"===V||"esriSMSX"===V?(Q={rings:[[[0,0],[50,50],[50,50],[0,0],[50,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,50],[0,0]]]},Y={xmin:-50,ymin:-50,xmax:50,ymax:50}):"triangle"===V||"esriSMSTriangle"===V?(V=2/3*100,Y=V-100,Q={rings:[[[-57.735026918962575,Y],[0,V],[57.735026918962575,Y],[-57.735026918962575,Y]]]},Y={xmin:-57.735026918962575,ymin:Y,xmax:57.735026918962575,ymax:V}):"arrow"===V&&(Q={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},Y={xmin:-50,
ymin:-50,xmax:50,ymax:50});return[Y,Q]},U=V=>"vertical"===V||"horizontal"===V||"cross"===V||"esriSFSCross"===V||"esriSFSVertical"===V||"esriSFSHorizontal"===V;u.CIMSimbolInflatedSizeHelper=z;u.CIMSymbolHelper=G;u.OverrideHelper=H;u.SymbolHelper=O;u.slsDashToTemplateArray=R;u.symbolToCIM=function(V){if(!V||!V.type)return null;let Q;switch(V.type){case "cim":return V.data;case "web-style":return V;case "simple-marker":Q=G.fromSimpleMarker(V);break;case "picture-marker":Q=G.fromPictureMarker(V);break;
case "simple-line":Q=G.fromSimpleLineSymbol(V);break;case "simple-fill":Q=G.fromSimpleFillSymbol(V);break;case "picture-fill":Q=G.fromPictureFillSymbol(V);break;case "text":Q=G.fromTextSymbol(V)}return{type:"CIMSymbolReference",symbol:Q}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/floatRGBA":function(){define(["exports","./mathUtils"],function(u,n){function h(g,e=0){let b=0;for(let a=0;4>a;a++)b+=g[e+a]*z[a];return b}function r(g){return g-
Math.floor(g)}const v=[1,256,65536,16777216],z=[1/256,1/65536,1/16777216,1/4294967296],p=h(new Uint8ClampedArray([255,255,255,255]));u.packFloatRGBA=function(g,e,b=0){g=n.clamp(g,0,p);for(let a=0;4>a;a++)e[b+a]=Math.floor(256*r(g*v[a]))};u.unpackFloatRGBA=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/CIMPlacements":function(){define(["exports"],function(u){let n=function(){function r(){this.setIdentity()}var v=r.prototype;v.getAngle=
function(){if(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)this.rz=Math.atan2(this.rz_s,this.rz_c);return this.rz};v.setIdentity=function(){this.tz=this.ty=this.tx=0;this.s=1;this.rz=this.ry=this.rx=0;this.rz_c=1;this.rz_s=0};v.setTranslate=function(z,p){this.tx=z;this.ty=p};v.setTranslateZ=function(z){this.tz=z};v.setRotateCS=function(z,p){this.rz=void 0;this.rz_c=z;this.rz_s=p};v.setRotate=function(z){this.rz=z;this.rz_s=this.rz_c=void 0};v.setRotateY=function(z){this.ry=z};v.setScale=
function(z){this.s=z};v.setMeasure=function(z){this.m=z};return r}(),h=function(){function r(){}r.prototype.next=function(){return null};return r}();u.EmptyPlacementCursor=h;u.Placement=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/CIMSymbolDrawHelper":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/BidiText ../../core/Logger ../../core/maybe ../../core/ObjectPool ../../core/screenUtils ../../geometry/support/aaBoundingRect ../../geometry/support/boundsUtils ../../geometry/support/centroid ../../geometry/support/jsonUtils ./CIMEffects ./CIMOperators ./CIMPlacements ./CIMResourceManager ./enums ./Rect ./TextRasterizer ../../views/2d/engine/webgl/alignmentUtils ../../views/2d/engine/webgl/definitions ../../views/2d/engine/webgl/mesh/templates/shapingUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A){const x=Math.PI/180,y=r.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");let B=function(){function K(L){this._t=L}K.createIdentity=function(){return new K([1,0,0,0,1,0])};var P=K.prototype;P.clone=function(){return new K(this._t.slice())};P.transform=function(L){const M=this._t;return[M[0]*L[0]+M[1]*L[1]+M[2],M[3]*L[0]+M[4]*L[1]+M[5]]};K.createScale=function(L,M){return new K([L,0,0,0,M,0])};P.scale=function(L,M){const J=this._t;J[0]*=L;J[1]*=L;
J[2]*=L;J[3]*=M;J[4]*=M;J[5]*=M;return this};P.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};K.createTranslate=function(L,M){return new K([0,0,L,0,0,M])};P.translate=function(L,M){const J=this._t;J[2]+=L;J[5]+=M;return this};K.createRotate=function(L){const M=Math.cos(L);L=Math.sin(L);return new K([M,-L,0,L,M,0])};P.rotate=function(L){return K.multiply(this,K.createRotate(L),this)};K.multiply=function(L,M,J){L=L._t;M=M._t;const R=L[1]*M[0]+L[4]*M[1],X=L[2]*M[0]+
L[5]*M[1]+M[2],U=L[0]*M[3]+L[3]*M[4],V=L[1]*M[3]+L[4]*M[4],Q=L[2]*M[3]+L[5]*M[4]+M[5],Y=J._t;Y[0]=L[0]*M[0]+L[3]*M[1];Y[1]=R;Y[2]=X;Y[3]=U;Y[4]=V;Y[5]=Q;return J};P.invert=function(){const L=this._t;let M=L[0]*L[4]-L[1]*L[3];if(0===M)return new K([0,0,0,0,0,0]);M=1/M;return new K([L[4]*M,-L[1]*M,(L[1]*L[5]-L[2]*L[4])*M,-L[3]*M,L[0]*M,(L[2]*L[3]-L[0]*L[5])*M])};return K}();r=function(){function K(L,M){this._transfos=[];this._sizeTransfos=[];this._geomUnitsPerPoint=1;this._placementPool=new z(f.Placement,
null,null,100);this._earlyReturn=!1;this._mapRotation=0;this._resourceManager=L||new l;this._transfos.push(M||B.createIdentity());this._sizeTransfos.push(M?M.scaleRatio():1)}var P=K.prototype;P.setTransform=function(L,M){this._transfos=[L||B.createIdentity()];this._sizeTransfos=[M?M:L?L.scaleRatio():1]};P.setGeomUnitsPerPoint=function(L){this._geomUnitsPerPoint=L};P.transformPt=function(L){return this._transfos[this._transfos.length-1].transform(L)};P.transformSize=function(L){return L*this._sizeTransfos[this._sizeTransfos.length-
1]};P.reverseTransformPt=function(L){return this._transfos[this._transfos.length-1].invert().transform(L)};P.reverseTransformSize=function(L){return L/this._sizeTransfos[this._sizeTransfos.length-1]};P.geomUnitsPerPoint=function(){return this.isEmbedded()?1:this._geomUnitsPerPoint};P.isEmbedded=function(){return 1<this._transfos.length};P.back=function(){return this._transfos[this._transfos.length-1]};P.push=function(L,M){M=M?L.scaleRatio():1;B.multiply(L,this.back(),L);this._transfos.push(L);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-
1]*M)};P.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};P.drawSymbol=function(L,M){if(L)switch(L.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(L,M);break;case "CIMTextSymbol":this.drawTextSymbol(L,M)}};P.drawMultiLayerSymbol=function(L,M){if(L){var J=L.symbolLayers;if(J)if((L=L.effects)&&0<L.length){if(M=this.executeEffects(L,M))for(L=M.next();L;)this.drawSymbolLayers(J,L),L=M.next()}else this.drawSymbolLayers(J,M)}};
P.executeEffects=function(L,M){const J=this._resourceManager.geometryEngine;M=new c.SimpleGeometryCursor(M);for(const R of L)(L=d.getEffectOperator(R))&&(M=L.execute(M,R,this.geomUnitsPerPoint(),J));return M};P.drawSymbolLayers=function(L,M){let J=L.length;for(;J--;){const X=L[J];if(X&&!1!==X.enable){var R=X.effects;if(R&&0<R.length){if(R=this.executeEffects(R,M)){let U=null;for(;(U=R.next())&&(this.drawSymbolLayer(X,U),!this._earlyReturn););}}else this.drawSymbolLayer(X,M);if(this._earlyReturn)break}}};
P.drawSymbolLayer=function(L,M){switch(L.type){case "CIMSolidFill":this.drawSolidFill(M,L.color);break;case "CIMHatchFill":this.drawHatchFill(M,L);break;case "CIMPictureFill":this.drawPictureFill(M,L);break;case "CIMGradientFill":this.drawGradientFill(M,L);break;case "CIMSolidStroke":this.drawSolidStroke(M,L.color,L.width,L.capStyle,L.joinStyle,L.miterLimit);break;case "CIMPictureStroke":this.drawPictureStroke(M,L);break;case "CIMGradientStroke":this.drawGradientStroke(M,L);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawMarkerLayer(L,
M)}};P.drawHatchFill=function(L,M){const J=this._buildHatchPolyline(M,L,this.geomUnitsPerPoint());J&&(this.pushClipPath(L),this.drawMultiLayerSymbol(M.lineSymbol,J),this.popClipPath())};P.drawPictureFill=function(L,M){};P.drawGradientFill=function(L,M){};P.drawPictureStroke=function(L,M){};P.drawGradientStroke=function(L,M){};P.drawMarkerLayer=function(L,M){var J=L.markerPlacement;if(J){const X=d.getPlacementOperator(J);if(X){var R="CIMMarkerPlacementInsidePolygon"===J.type;R&&this.pushClipPath(M);
if(M=X.execute(M,J,this.geomUnitsPerPoint(),this._resourceManager.geometryEngine))for(J=null;(J=M.next())&&(this.drawMarker(L,J),!this._earlyReturn););R&&this.popClipPath()}}else{J=this._placementPool.acquire();if(a.isPoint(M))J.tx=M.x,J.ty=M.y,this.drawMarker(L,J);else if(a.isPolygon(M))[J.tx,J.ty]=b.polygonCentroid(M),this.drawMarker(L,J);else for(R of M.points)if(J.tx=R[0],J.ty=R[1],this.drawMarker(L,J),this._earlyReturn)break;this._placementPool.release(J)}};P.drawMarker=function(L,M){switch(L.type){case "CIMCharacterMarker":case "CIMPictureMarker":this.drawPictureMarker(L,
M);break;case "CIMVectorMarker":this.drawVectorMarker(L,M)}};P.drawPictureMarker=function(L,M){var J,R,X,U,V;if(L){var Q=this._resourceManager.getResource(L.url),Y=null!=(J=L.size)?J:10;if(!(v.isNone(Q)||0>=Y)&&(J=Q.width,Q=Q.height,J&&Q)){Q=J/Q;J=null!=(R=L.scaleX)?R:1;R=B.createIdentity();var fa=L.anchorPoint;if(fa){let da=fa.x;fa=fa.y;"Absolute"!==L.anchorPointUnits&&(da*=Y*Q*J,fa*=Y);R.translate(-da,-fa)}Q=null!=(X=L.rotation)?X:0;L.rotateClockwise&&(Q=-Q);this._mapRotation&&(Q+=this._mapRotation);
Q&&R.rotate(Q*x);X=null!=(U=L.offsetX)?U:0;U=null!=(V=L.offsetY)?V:0;if(X||U)this._mapRotation&&(Q=x*this._mapRotation,V=Math.cos(Q),Q=Math.sin(Q),J=X*Q+U*V,X=X*V-U*Q,U=J),R.translate(X,U);V=this.geomUnitsPerPoint();1!==V&&R.scale(V,V);(V=M.getAngle())&&R.rotate(V);R.translate(M.tx,M.ty);this.push(R,!1);this.drawImage(L.url,Y,L.scaleX);this.pop()}}};P.drawVectorMarker=function(L,M){var J,R,X,U;if(L){var V=L.markerGraphics;if(V){var Q=null!=(J=L.size)?J:10,Y=(J=L.frame)?J.ymax-J.ymin:0;Y=Q&&Y?Q/Y:
1;Q=B.createIdentity();J&&Q.translate(.5*-(J.xmax+J.xmin),.5*-(J.ymax+J.ymin));var fa=L.anchorPoint;if(fa){let da=fa.x;fa=fa.y;"Absolute"!==L.anchorPointUnits?J&&(da*=J.xmax-J.xmin,fa*=J.ymax-J.ymin):(da/=Y,fa/=Y);Q.translate(-da,-fa)}1!==Y&&Q.scale(Y,Y);J=null!=(R=L.rotation)?R:0;L.rotateClockwise&&(J=-J);this._mapRotation&&(J+=this._mapRotation);J&&Q.rotate(J*x);R=null!=(X=L.offsetX)?X:0;X=null!=(U=L.offsetY)?U:0;if(R||X)this._mapRotation&&(J=x*this._mapRotation,U=Math.cos(J),J=Math.sin(J),Y=R*
J+X*U,R=R*U-X*J,X=Y),Q.translate(R,X);U=this.geomUnitsPerPoint();1!==U&&Q.scale(U,U);(U=M.getAngle())&&Q.rotate(U);Q.translate(M.tx,M.ty);this.push(Q,L.scaleSymbolsProportionally);for(const da of V)if(da&&da.symbol&&da.geometry||y.error("Invalid marker graphic",da),this.drawSymbol(da.symbol,da.geometry),this._earlyReturn)break;this.pop()}}};P.drawTextSymbol=function(L,M){var J,R,X,U;if(L&&a.isPoint(M)&&!(0>=(null!=(J=L.height)?J:10))){J=B.createIdentity();var V=null!=(R=L.angle)?R:0;(V=-V)&&J.rotate(V*
x);R=null!=(X=L.offsetX)?X:0;X=null!=(U=L.offsetY)?U:0;(R||X)&&J.translate(R,X);U=this.geomUnitsPerPoint();1!==U&&J.scale(U,U);J.translate(M.x,M.y);this.push(J,!1);this.drawText(L);this.pop()}};P._buildHatchPolyline=function(L,M,J){var R=(void 0!==L.separation?L.separation:4)*J,X=void 0!==L.rotation?L.rotation:0;if(0===R)return null;0>R&&(R=-R);for(var U=0,V=.5*R;U>V;)U-=R;for(;U<-V;)U+=R;U=g.create();e.getBoundsXY(U,M);U[0]-=V;U[1]-=V;U[2]+=V;U[3]+=V;for(var Q=[[U[0],U[1]],[U[0],U[3]],[U[2],U[3]],
[U[2],U[1]]];180<X;)X-=180;for(;0>X;)X+=180;V=Math.cos(X*x);var Y=Math.sin(X*x);X=-R*Y;M=R*V;U=(void 0!==L.offsetX?L.offsetX*J:0)*Y-(void 0!==L.offsetY?L.offsetY*J:0)*V;let fa;var da=L=Number.MAX_VALUE;fa=J=-Number.MAX_VALUE;for(var ca of Q){var la=ca[0];const ha=ca[1];Q=V*la+Y*ha;la=-Y*la+V*ha;da=Math.min(da,Q);L=Math.min(L,la);fa=Math.max(fa,Q);J=Math.max(J,la)}L=Math.floor(L/R)*R;ca=V*da-Y*L-X*U/R;da=Y*da+V*L-M*U/R;Q=V*fa-Y*L-X*U/R;U=Y*fa+V*L-M*U/R;R=1+Math.round((J-L)/R);V=[];for(Y=0;Y<R;Y++)ca+=
X,da+=M,Q+=X,U+=M,V.push([[ca,da],[Q,U]]);return{paths:V}};return K}();let C=function(K){function P(M,J){M=K.call(this,M,J)||this;M.reset();return M}n._inheritsLoose(P,K);var L=P.prototype;L.reset=function(){this._xmin=this._ymin=Infinity;this._xmax=this._ymax=-Infinity;this._clipCount=0};L.envelope=function(){return new k(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};L.bounds=function(){return g.fromValues(this._xmin,this._ymin,this._xmax,this._ymax)};L.drawSolidFill=function(M){!M||
0<this._clipCount||(a.isPolygon(M)?this._processPath(M.rings,0):a.isPolyline(M)?this._processPath(M.paths,0):a.isExtent(M)?(M=E(M))&&this._processPath(M.rings,0):console.error("drawSolidFill Unexpected geometry type!"))};L.drawSolidStroke=function(M,J,R){!M||0<this._clipCount||(J=.5*this.transformSize(R),a.isPolygon(M)?this._processPath(M.rings,J):a.isPolyline(M)?this._processPath(M.paths,J):a.isExtent(M)?(M=E(M))&&this._processPath(M.rings,J):console.error("drawSolidStroke unexpected geometry type!"))};
L.pushClipPath=function(M){this.drawSolidFill(M);++this._clipCount};L.popClipPath=function(){--this._clipCount};L.drawImage=function(M,J,R){let X=R*J,U=J;M=this._resourceManager.getResource(M);!J&&v.isSome(M)&&(X=R*M.width,U=M.height);this._merge(this.transformPt([-X/2,-U/2]),0);this._merge(this.transformPt([-X/2,U/2]),0);this._merge(this.transformPt([X/2,-U/2]),0);this._merge(this.transformPt([X/2,U/2]),0)};L.drawText=function(M){this._textRasterizer||(this._textRasterizer=new q)};L._processPath=
function(M,J){if(M)for(const R of M)if(M=R?R.length:0,1<M){this._merge(this.transformPt(R[0]),J);for(let X=1;X<M;++X)this._merge(this.transformPt(R[X]),J)}};L._merge=function(M,J){M[0]-J<this._xmin&&(this._xmin=M[0]-J);M[0]+J>this._xmax&&(this._xmax=M[0]+J);M[1]-J<this._ymin&&(this._ymin=M[1]-J);M[1]+J>this._ymax&&(this._ymax=M[1]+J)};return P}(r),D=function(K){function P(){var M=K.apply(this,arguments)||this;M._searchPoint=[0,0];M._searchDistPoint=0;return M}n._inheritsLoose(P,K);var L=P.prototype;
L.hitTest=function(M,J,R,X,U,V){V*=p.pt2px(1);this.setTransform();this.setGeomUnitsPerPoint(V);this._searchPoint=[(M[0]+M[2])/2,(M[1]+M[3])/2];this._searchDistPoint=(M[2]-M[0])/2/V;this._textInfo=X;this._mapRotation=J&&("CIMPointSymbol"===J.type&&"Map"!==J.angleAlignment||"CIMTextSymbol"===J.type)?U:0;this._earlyReturn=!1;this.drawSymbol(J,R);return this._earlyReturn};L.drawSolidFill=function(M,J){this._hitTestFill(M)};L.drawHatchFill=function(M,J){this._hitTestFill(M)};L.drawPictureFill=function(M,
J){this._hitTestFill(M)};L.drawGradientFill=function(M,J){this._hitTestFill(M)};L.drawSolidStroke=function(M,J,R,X,U,V){this._hitTestStroke(M,R)};L.drawPictureStroke=function(M,J){this._hitTestStroke(M,J.width)};L.drawGradientStroke=function(M,J){this._hitTestStroke(M,J.width)};L.drawMarkerLayer=function(M,J){M.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===M.markerPlacement.type?this._hitTestFill(J):K.prototype.drawMarkerLayer.call(this,M,J)};L.pushClipPath=function(M){};L.popClipPath=function(){};
L.drawImage=function(M,J,R){M=this._resourceManager.getResource(M);if(!v.isNone(M)&&0!==M.height&&0!==J){J*=this.geomUnitsPerPoint();R=M.width/M.height*R*J;M=this.reverseTransformPt(this._searchPoint);var X=this._searchDistPoint;Math.abs(M[0])<R/2+X&&Math.abs(M[1])<J/2+X&&(this._earlyReturn=!0)}};L.drawText=function(M){var J,R,X=this._textInfo;if(X&&(X=X.get(M))){var {text:U,mosaicItem:V}=X;if(V&&0!==V.glyphMosaicItems.length){X=null!=(J=M.height)?J:10;J=H(M.lineGapType,null!=(R=M.lineGap)?R:0,X);
R=h.bidiText(U)[1];M=A.shapeGlyphs(V.glyphMosaicItems,R,{scale:X/w.GLYPH_SIZE,angle:0,xOffset:0,yOffset:0,hAlign:G(M.horizontalAlignment),vAlign:O(M.verticalAlignment),maxLineWidth:512,lineHeight:w.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(J||1,4)),decoration:M.font.decoration||"none",isCIM:!0});J=this.reverseTransformPt(this._searchPoint);R=J[0];J=J[1];for(const Q of M.glyphs)if(R>Q.xTopLeft&&R<Q.xBottomRight&&J>-Q.yBottomRight&&J<-Q.yTopLeft){this._earlyReturn=!0;break}}}};L._hitTestFill=function(M){let J=
null;if(a.isExtent(M))J=[[[M.xmin,M.ymin],[M.xmin,M.ymax],[M.xmax,M.ymax],[M.xmax,M.ymin],[M.xmin,M.ymin]]];else if(a.isPolygon(M))J=M.rings;else if(a.isPolyline(M))J=M.paths;else return;M=this.reverseTransformPt(this._searchPoint);this._pointInPolygon(M,J)&&(this._earlyReturn=!0);if(!this._earlyReturn){const R=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(M,J,R)&&(this._earlyReturn=!0)}};L._hitTestStroke=function(M,J){let R=null;if(a.isExtent(M))R=[[[M.xmin,
M.ymin],[M.xmin,M.ymax],[M.xmax,M.ymax],[M.xmax,M.ymin],[M.xmin,M.ymin]]];else if(a.isPolygon(M))R=M.rings;else if(a.isPolyline(M))R=M.paths;else return;M=this.reverseTransformPt(this._searchPoint);J*=this.geomUnitsPerPoint();const X=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(M,R,J/2+X)&&(this._earlyReturn=!0)};L._pointInPolygon=function(M,J){let R=0;for(const X of J){J=X.length;for(let U=1;U<J;++U){const V=X[U-1],Q=X[U];V[1]>M[1]!==Q[1]>M[1]&&(0<(Q[0]-
V[0])*(M[1]-V[1])-(Q[1]-V[1])*(M[0]-V[0])?R++:R--)}}return 0!==R};L._nearLine=function(M,J,R){for(const U of J){J=U.length;for(let V=1;V<J;++V){var X=U[V-1];const Q=U[V];let Y=(Q[0]-X[0])*(Q[0]-X[0])+(Q[1]-X[1])*(Q[1]-X[1]);if(0!==Y&&(Y=Math.sqrt(Y),Math.abs(((Q[0]-X[0])*(M[1]-X[1])-(Q[1]-X[1])*(M[0]-X[0]))/Y)<R&&(X=((Q[0]-X[0])*(M[0]-X[0])+(Q[1]-X[1])*(M[1]-X[1]))/Y,X>-R&&X<Y+R)))return!0}}return!1};return P}(r),F=function(K){function P(M,J,R){J=K.call(this,J,R)||this;J._ctx=M;return J}n._inheritsLoose(P,
K);var L=P.prototype;L.drawSolidFill=function(M,J){if(M){if(a.isPolygon(M))this._buildPath(M.rings,!0);else if(a.isPolyline(M))this._buildPath(M.paths,!0);else if(a.isExtent(M))this._buildPath(E(M).rings,!0);else if(a.isMultipoint(M))console.log("CanvasDrawHelper.drawSolidFill - No implementation!");else return;M=this._ctx;M.fillStyle="string"===typeof J?J:"rgba("+Math.round(J[0])+","+Math.round(J[1])+","+Math.round(J[2])+","+J[3]/255+")";M.fill("evenodd")}};L.drawSolidStroke=function(M,J,R,X,U,V){if(M&&
J&&0!==R){if(a.isPolygon(M))this._buildPath(M.rings,!0);else if(a.isPolyline(M))this._buildPath(M.paths,!1);else if(a.isExtent(M))this._buildPath(E(M).rings,!0);else{console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");return}M=this._ctx;M.strokeStyle="string"===typeof J?J:"rgba("+Math.round(J[0])+","+Math.round(J[1])+","+Math.round(J[2])+","+J[3]/255+")";M.lineWidth=this.transformSize(R)+.5;this._setCapStyle(X);this._setJoinStyle(U);M.miterLimit=V;M.stroke()}};L.pushClipPath=function(M){this._ctx.save();
if(a.isPolygon(M))this._buildPath(M.rings,!0);else if(a.isPolyline(M))this._buildPath(M.paths,!0);else if(a.isExtent(M))this._buildPath(E(M).rings,!0);else return;this._ctx.clip("evenodd")};L.popClipPath=function(){this._ctx.restore()};L.drawImage=function(M,J,R){M=this._resourceManager.getResource(M);if(!v.isNone(M)){var X=this._ctx,U=X.canvas.width;X=X.canvas.height;var V=M.width/M.height*R*J,Q=R*J;J||(V=R*M.width,Q=R*M.height);J=this.transformPt([0,0]);R=this.transformSize(V);Q=this.transformSize(Q);
this._ctx.drawImage(M,0,0,M.width,M.height,J[0]-R/2,J[1]-Q/2,Math.min(R,U),Math.min(Q,X))}};L.drawText=function(M){this._textRasterizer||(this._textRasterizer=new q)};L._buildPath=function(M,J){const R=this._ctx;R.beginPath();if(M)for(const X of M)if(M=X?X.length:0,1<M){let U=this.transformPt(X[0]);R.moveTo(U[0],U[1]);for(let V=1;V<M;++V)U=this.transformPt(X[V]),R.lineTo(U[0],U[1]);J&&R.closePath()}};L._setCapStyle=function(M){switch(M){case m.LineCapStyle.Butt:this._ctx.lineCap="butt";break;case m.LineCapStyle.Round:this._ctx.lineCap=
"round";break;case m.LineCapStyle.Square:this._ctx.lineCap="square"}};L._setJoinStyle=function(M){switch(M){case m.LineJoinStyle.Bevel:this._ctx.lineJoin="bevel";break;case m.LineJoinStyle.Round:this._ctx.lineJoin="round";break;case m.LineJoinStyle.Miter:this._ctx.lineJoin="miter"}};return P}(r);const E=K=>K?{spatialReference:K.spatialReference,rings:[[[K.xmin,K.ymin],[K.xmin,K.ymax],[K.xmax,K.ymax],[K.xmax,K.ymin],[K.xmin,K.ymin]]]}:null,G=K=>{switch(K){case "Left":return t.HAlign.Left;case "Right":return t.HAlign.Right;
case "Center":return t.HAlign.Center;case "Justify":return y.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),t.HAlign.Center}},O=K=>{switch(K){case "Top":return t.VAlign.Top;case "Center":return t.VAlign.Center;case "Bottom":return t.VAlign.Bottom;case "Baseline":return t.VAlign.Baseline}},H=(K,P,L)=>{switch(K){case "ExtraLeading":return 1+P/L;case "Multiple":return P;case "Exact":return P/L}};u.CIMSymbolDrawHelper=r;u.C_DEG_TO_RAD=x;u.CanvasDrawHelper=F;u.EnvDrawHelper=
C;u.HittestDrawHelper=D;u.Transformation=B;u.horizontalAlignment2HAlign=G;u.lineGapType2LineHeight=H;u.verticalAlignment2VAlign=O;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/CIMEffects":function(){define(["exports","../../core/lang"],function(u,n){let h=function(){function r(v){this._geometry=v}r.prototype.next=function(){const v=this._geometry;this._geometry=null;return v};return r}();u.SimpleGeometryCursor=h;u.clone=function(r){return n.clone(r)};
Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/CIMOperators":function(){define("exports ./effects/EffectAddControlPoints ./effects/EffectArrow ./effects/EffectBuffer ./effects/EffectControlMeasureLine ./effects/EffectCut ./effects/EffectDashes ./effects/EffectDonut ./effects/EffectJog ./effects/EffectMove ./effects/EffectOffset ./effects/EffectReverse ./effects/EffectRotate ./effects/EffectScale ./effects/EffectWave ./placements/PlacementAlongLineSameSize ./placements/PlacementAtExtremities ./placements/PlacementAtRatioPositions ./placements/PlacementInsidePolygon ./placements/PlacementOnLine ./placements/PlacementOnVertices ./placements/PlacementPolygonCenter".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x){u.getEffectOperator=function(y){if(!y)return null;switch(y.type){case "CIMGeometricEffectAddControlPoints":return n.EffectAddControlPoints.local();case "CIMGeometricEffectArrow":return h.EffectArrow.local();case "CIMGeometricEffectBuffer":return r.EffectBuffer.local();case "CIMGeometricEffectControlMeasureLine":return v.EffectControlMeasureLine.local();case "CIMGeometricEffectCut":return z.EffectCut.local();case "CIMGeometricEffectDashes":return p.EffectDashes.local();
case "CIMGeometricEffectDonut":return g.EffectDonut.local();case "CIMGeometricEffectJog":return e.EffectJog.local();case "CIMGeometricEffectMove":return b.EffectMove.local();case "CIMGeometricEffectOffset":return a.EffectOffset.local();case "CIMGeometricEffectReverse":return c.EffectReverse.local();case "CIMGeometricEffectRotate":return d.EffectRotate.local();case "CIMGeometricEffectScale":return f.EffectScale.local();case "CIMGeometricEffectWave":return l.EffectWave.local()}return null};u.getPlacementOperator=
function(y){if(!y)return null;switch(y.type){case "CIMMarkerPlacementAlongLineSameSize":return m.PlacementAlongLineSameSize.local();case "CIMMarkerPlacementAtExtremities":return k.PlacementAtExtremities.local();case "CIMMarkerPlacementAtRatioPositions":return q.PlacementAtRatioPositions.local();case "CIMMarkerPlacementInsidePolygon":return t.PlacementInsidePolygon.local();case "CIMMarkerPlacementOnLine":return w.PlacementOnLine.local();case "CIMMarkerPlacementOnVertices":return A.PlacementOnVertices.local();
case "CIMMarkerPlacementPolygonCenter":return x.PlacementPolygonCenter.local()}return null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectAddControlPoints":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(u,n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};p.prototype.execute=function(g,e,b,a){return new z(g,
e,b)};return p}();v.instance=null;let z=function(){function p(e,b,a){this._inputGeometries=e;this._angleTolerance=void 0!==b.angleTolerance?b.angleTolerance:120;this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}var g=p.prototype;g.next=function(){for(var e=this._inputGeometries.next();e;){if(h.isPolygon(e))return this._isClosed=!0,e=n.clone(e),this._processMultipath(e.rings),e;if(h.isPolyline(e))return this._isClosed=!1,e=n.clone(e),this._processMultipath(e.paths),e;if(h.isExtent(e)){if(this._maxCosAngle)return e;
this._isClosed=!0;e=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];this._processPath(e);return{rings:[e]}}e=this._inputGeometries.next()}return null};g._processMultipath=function(e){if(e)for(const b of e)this._processPath(b)};g._processPath=function(e){if(e){let b=e.length,a=e[0],c,d,f,l,m,k;this._isClosed&&++b;for(let q=1;q<b;++q){let t;t=this._isClosed&&q===b-1?e[0]:e[q];const w=t[0]-a[0],A=t[1]-a[1],x=Math.sqrt(w*w+A*A);1<q&&0<x&&0<f&&(c*w+d*A)/x/f<=this._maxCosAngle&&
r.setId(a,1);1===q&&(l=w,m=A,k=x);0<x&&(a=t,c=w,d=A,f=x)}this._isClosed&&0<f&&0<k&&(c*l+d*m)/k/f<=this._maxCosAngle&&r.setId(e[0],1)}};return p}();u.EffectAddControlPoints=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/CIMCursor":function(){define(["exports","../../core/lang","../../geometry/support/jsonUtils","./CIMPlacements"],function(u,n,h,r){function v(k){if(!k)return null;h.isPoint(k)?k.y=-k.y:h.isPolygon(k)?p(k.rings):h.isPolyline(k)?
p(k.paths):h.isMultipoint(k)&&z(k.points)}function z(k){if(k){const q=k.length;for(let t=0;t<q;t++)k[t][1]=-k[t][1]}}function p(k){if(k)for(const q of k)z(q)}function g(k){if(k){var q=k.length;for(--q;0<q;--q)k[q][0]-=k[q-1][0],k[q][1]-=k[q-1][1]}}function e(k){if(k)for(const q of k)g(q)}function b(k){if(k){const q=k.length;for(let t=1;t<q;++t)k[t][0]+=k[t-1][0],k[t][1]+=k[t-1][1]}}function a(k){if(k)for(const q of k)b(q)}function c(k){k&&(h.isPolygon(k)?a(k.rings):h.isPolyline(k)?a(k.paths):h.isMultipoint(k)&&
b(k.points),v(k))}function d(k){k&&k.reverse()}function f(k){return{rings:[[[k.xmin,k.ymin],[k.xmin,k.ymax],[k.xmax,k.ymax],[k.xmax,k.ymin],[k.xmin,k.ymin]]]}}let l=function(){function k(q,t,w,A){this.acceptPolygon=t;this.acceptPolyline=w;this.geomUnitsPerPoint=A;this.pathIndex=this.pathCount=-1;this.iteratePath=!1;q&&(h.isPolygon(q)?t&&(this.multiPath=q.rings,this.isClosed=!0):h.isPolyline(q)?w&&(this.multiPath=q.paths,this.isClosed=!1):h.isExtent(q)&&t&&(this.multiPath=f(q).rings,this.isClosed=
!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new r.Placement}k.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;const q=this.processPath(this.multiPath[this.pathIndex]);if(q)return q}this.pathIndex=this.pathCount=-1;return this.multiPath=null};return k}(),m=function(){function k(q,t,w,A){this.inputGeometries=q;this.acceptPolygon=t;this.acceptPolyline=w;this.geomUnitsPerPoint=
A;this.pathIndex=this.pathCount=-1;this.iteratePath=!1}k.prototype.next=function(){for(;;){if(!this.multiPath){for(var q=this.inputGeometries.next();q;)if(h.isPolygon(q)?this.acceptPolygon&&(this.multiPath=q.rings,this.isClosed=!0):h.isPolyline(q)?this.acceptPolyline&&(this.multiPath=q.paths,this.isClosed=!1):h.isExtent(q)&&this.acceptPolygon&&(this.multiPath=f(q).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length;this.pathIndex=-1;break}else q=this.inputGeometries.next();
if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,q=this.processPath(this.multiPath[this.pathIndex]))return q;this.pathIndex=this.pathCount=-1;this.multiPath=null}};return k}();u.PathGeometryCursor=m;u.PathTransformationCursor=l;u.cloneAndDecodeGeometry=function(k){k=n.clone(k);c(k);return k};u.deltaDecodeGeometry=c;u.deltaEncodeGeometry=function(k){k&&(v(k),h.isPolygon(k)?e(k.rings):h.isPolyline(k)?e(k.paths):h.isMultipoint(k)&&
g(k.points))};u.getCoord2D=function(k,q,t){return[k[0]+(q[0]-k[0])*t,k[1]+(q[1]-k[1])*t]};u.getId=function(k){return k[4]};u.isClosedPath=function(k){return k&&0!==k.length?k[0][0]===k[k.length-1][0]&&k[0][1]===k[k.length-1][1]:!1};u.reverseMultipath=function(k){if(k)for(const q of k)d(q)};u.reversePath=d;u.setId=function(k,q){k[4]=q};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectArrow":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../CIMCursor","../CurveHelper","../enums"],function(u,n,h,r,v){const z=v.GeometricEffectArrowType.OpenEnded;let p=function(){function e(){}e.local=function(){null===e.instance&&(e.instance=new e);return e.instance};e.prototype.execute=function(b,a,c,d){return new g(b,a,c)};return e}();p.instance=null;let g=function(e){function b(c,d,f){c=e.call(this,c,!1,!0)||this;c._curveHelper=new r.CurveHelper;c._width=(void 0!==d.width?d.width:5)*f;c._arrowType=void 0!==d.geometricEffectArrowType?d.geometricEffectArrowType:
void 0!==d.arrowType?d.arrowType:z;c._offsetFlattenError=r.PIXEL_TOLERANCE*f;return c}n._inheritsLoose(b,e);var a=b.prototype;a.processPath=function(c){switch(this._arrowType){default:return this._constructSimpleArrow(c,!0);case v.GeometricEffectArrowType.Block:return this._constructSimpleArrow(c,!1);case v.GeometricEffectArrowType.Crossed:return this._constructCrossedArrow(c)}};a._constructSimpleArrow=function(c,d){var f=this._curveHelper.calculatePathLength(c),l=this._width;f<2*l&&(l=f/2);f=this._curveHelper.getSubCurve(c,
0,f-l);if(!f)return null;var m=l/2;if(this._curveHelper.isEmpty(f,!1))return null;l=this._constructOffset(f,-m);if(!l)return null;f=this._constructOffset(f,m);if(!f)return null;const k=this._constructArrowBasePoint(l,-m/2);if(!k)return null;m=this._constructArrowBasePoint(f,m/2);if(!m)return null;c=c[c.length-1];d||(this._makeControlPoint(f,!0),this._makeControlPoint(l,!0));const q=new r.PathHelper;q.addPath(f,!0);q.lineTo(m);this._makeControlPoint(q.path());q.lineTo(c);this._makeControlPoint(q.path());
q.lineTo(k);this._makeControlPoint(q.path());q.addPath(l,!1);return d?{paths:[q.path()]}:(q.close(),{rings:[q.path()]})};a._constructCrossedArrow=function(c){var d=this._curveHelper.calculatePathLength(c),f=this._width;d<3.732050807568877*f&&(f=d/3.732050807568877);var l=this._curveHelper.getSubCurve(c,0,d-2.732050807568877*f);if(!l)return null;var m=f/2;if(this._curveHelper.isEmpty(l,!1))return null;const k=this._constructOffset(l,m);if(!k)return null;l=this._constructOffset(l,-m);if(!l)return null;
d=this._curveHelper.getSubCurve(c,0,d-f);if(!d||this._curveHelper.isEmpty(d,!1))return null;f=this._constructOffset(d,m);if(!f)return null;var q=this._constructOffset(d,-m);if(!q)return null;d=f[f.length-1];f=this._constructArrowBasePoint(f,m/2);if(!f)return null;const t=q[q.length-1];m=this._constructArrowBasePoint(q,-m/2);if(!m)return null;c=c[c.length-1];this._makeControlPoint(k,!1);this._makeControlPoint(l,!1);q=new r.PathHelper;q.addPath(k,!0);this._makeControlPoint(q.path());q.lineTo(t);q.lineTo(m);
this._makeControlPoint(q.path());q.lineTo(c);this._makeControlPoint(q.path());q.lineTo(f);this._makeControlPoint(q.path());q.lineTo(d);this._makeControlPoint(q.path());q.addPath(l,!1);return{paths:[q.path()]}};a._constructOffset=function(c,d){return this._curveHelper.offset(c,d,v.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError)};a._constructArrowBasePoint=function(c,d){if(!c||2>c.length)return null;var f=c[c.length-2];c=c[c.length-1];f=[c[0]-f[0],c[1]-f[1]];this._curveHelper.normalize(f);
return[c[0]+f[1]*d,c[1]-f[0]*d]};a._makeControlPoint=function(c,d=!1){d?h.setId(c[0],1):h.setId(c[c.length-1],1)};return b}(h.PathGeometryCursor);u.EffectArrow=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/CurveHelper":function(){define(["exports","./enums"],function(u,n){let h=function(){function v(){this._path=[]}var z=v.prototype;z.path=function(){return this._path};z.addPath=function(p,g){g||p.reverse();Array.prototype.push.apply(this._path,
p);g||p.reverse()};v.mergePath=function(p,g){g&&Array.prototype.push.apply(p,g)};z.startPath=function(p){this._path.push(p)};z.lineTo=function(p){this._path.push(p)};z.close=function(){const p=this._path;1<p.length&&(p[0][0]!==p[p.length-1][0]||p[0][1]!==p[p.length-1][1])&&p.push([p[0][0],p[0][1]])};return v}(),r=function(){function v(p,g){}var z=v.prototype;z.normalize=function(p){const g=Math.sqrt(p[0]*p[0]+p[1]*p[1]);0!==g&&(p[0]/=g,p[1]/=g)};z.calculateLength=function(p,g){const e=g[0]-p[0];p=
g[1]-p[1];return Math.sqrt(e*e+p*p)};z.calculateSegLength=function(p,g){return this.calculateLength(p[g],p[g+1])};z.calculatePathLength=function(p){let g=0;const e=p?p.length:0;for(let b=0;b<e-1;++b)g+=this.calculateSegLength(p,b);return g};z.calculatePathArea=function(p){let g=0;const e=p?p.length:0;for(let b=0;b<e-1;++b)g+=(p[b+1][0]-p[b][0])*(p[b+1][1]+p[b][1]);return g/2};z.getCoord2D=function(p,g,e){return[p[0]+(g[0]-p[0])*e,p[1]+(g[1]-p[1])*e]};z.getSegCoord2D=function(p,g,e){return this.getCoord2D(p[g],
p[g+1],e)};z.getAngle=function(p,g,e){return Math.atan2(g[1]-p[1],g[0]-p[0])};z.getSegAngle=function(p,g,e){return this.getAngle(p[g],p[g+1],e)};z.getAngleCS=function(p,g,e){e=g[0]-p[0];p=g[1]-p[1];g=Math.sqrt(e*e+p*p);return 0<g?[e/g,p/g]:[1,0]};z.getSegAngleCS=function(p,g,e){return this.getAngleCS(p[g],p[g+1],e)};z.cut=function(p,g,e,b){e=0>=e?p[g]:this.getSegCoord2D(p,g,e);p=1<=b?p[g+1]:this.getSegCoord2D(p,g,b);return[e,p]};z.addSegment=function(p,g,e){e&&p.push(g[0]);p.push(g[1])};z.getSubCurve=
function(p,g,e){const b=[];return this.appendSubCurve(b,p,g,e)?b:null};z.appendSubCurve=function(p,g,e,b){const a=g?g.length-1:0;let c=0,d=!0,f=0;for(;f<a;){const m=this.calculateSegLength(g,f);if(0!==m){if(d){if(c+m>e){var l=(e-c)/m;let k=1,q=!1;c+m>=b&&(k=(b-c)/m,q=!0);(l=this.cut(g,f,l,k))&&this.addSegment(p,l,d);if(q)break;d=!1}}else{if(c+m>b){(g=this.cut(g,f,0,(b-c)/m))&&this.addSegment(p,g,d);break}this.addSegment(p,[g[f],g[f+1]],d)}c+=m}++f}return!0};z.getCIMPointAlong=function(p,g){const e=
p?p.length-1:0;let b=0,a=-1;for(;a<e;){++a;const c=this.calculateSegLength(p,a);if(0!==c){if(b+c>g)return this.getCoord2D(p[a],p[a+1],(g-b)/c);b+=c}}return null};z.isEmpty=function(p,g){if(!p||1>=p.length)return!0;const e=p?p.length-1:0;let b=-1;for(;b<e;)if(++b,p[b+1][0]!==p[b][0]||p[b+1][1]!==p[b][1]||g&&p[b+1][2]!==p[b][2])return!1;return!0};z.offset=function(p,g,e,b,a){if(!p||2>p.length)return null;var c=0,d=p[c++];for(a=c;c<p.length;){var f=p[c];if(f[0]!==d[0]||f[1]!==d[1])c!==a&&(p[a]=p[c]),
d=p[a++];c++}(c=p[0][0]===p[a-1][0]&&p[0][1]===p[a-1][1])&&--a;if(a<(c?3:2))return null;f=[];d=c?p[a-1]:null;let l=p[0];for(let w=0;w<a;w++){const A=w===a-1?c?p[0]:null:p[w+1];if(d)if(A){var m=[A[0]-l[0],A[1]-l[1]];this.normalize(m);var k=[l[0]-d[0],l[1]-d[1]];this.normalize(k);var q=k[0]*m[1]-k[1]*m[0],t=k[0]*m[0]+k[1]*m[1];if(0===q&&1===t){l=A;continue}if(0<=q===0>=g)1>t&&(m=[m[0]-k[0],m[1]-k[1]],this.normalize(m),k=Math.sqrt((1+t)/2),k>1/b&&(k=-Math.abs(g)/k,f.push([l[0]-m[0]*k,l[1]-m[1]*k])));
else switch(e){case n.GeometricEffectOffsetMethod.Mitered:if(d=Math.sqrt((1+t)/2),0<d&&1/d<b){m=[m[0]-k[0],m[1]-k[1]];this.normalize(m);k=Math.abs(g)/d;f.push([l[0]-m[0]*k,l[1]-m[1]*k]);break}case n.GeometricEffectOffsetMethod.Bevelled:f.push([l[0]+k[1]*g,l[1]-k[0]*g]);f.push([l[0]+m[1]*g,l[1]-m[0]*g]);break;case n.GeometricEffectOffsetMethod.Rounded:if(1>t){f.push([l[0]+k[1]*g,l[1]-k[0]*g]);d=Math.floor(2.5*(1-t));if(0<d){q=t=1/d;for(let x=1;x<d;x++,q+=t){const y=[k[1]*(1-q)+m[1]*q,-k[0]*(1-q)-m[0]*
q];this.normalize(y);f.push([l[0]+y[0]*g,l[1]+y[1]*g])}}f.push([l[0]+m[1]*g,l[1]-m[0]*g])}break;default:0>q?(f.push([l[0]+(k[1]+k[0])*g,l[1]+(k[1]-k[0])*g]),f.push([l[0]+(m[1]-m[0])*g,l[1]-(m[0]+m[1])*g])):(d=Math.sqrt((1+Math.abs(t))/2),m=[m[0]-k[0],m[1]-k[1]],this.normalize(m),k=g/d,f.push([l[0]-m[0]*k,l[1]-m[1]*k]))}}else m=[l[0]-d[0],l[1]-d[1]],this.normalize(m),f.push([l[0]+m[1]*g,l[1]-m[0]*g]);else m=[A[0]-l[0],A[1]-l[1]],this.normalize(m),f.push([l[0]+m[1]*g,l[1]-m[0]*g]);d=l;l=A}if(f.length<
(c?3:2))return null;c&&f.push([f[0][0],f[0][1]]);return f};return v}();u.CurveHelper=r;u.PIXEL_TOLERANCE=.03;u.PathHelper=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectBuffer":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper","../enums"],function(u,n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};p.prototype.execute=function(g,
e,b,a){return new z(g,e,b,a)};return p}();v.instance=null;let z=function(){function p(g,e,b,a){this._inputGeometries=g;this._curveHelper=new h.CurveHelper;this._size=(void 0!==e.size?e.size:1)*b;this._offsetFlattenError=h.PIXEL_TOLERANCE*b}p.prototype.next=function(){let g=this._inputGeometries.next();for(;g;){if(n.isExtent(g))if(0<this._size){var e=this._curveHelper.offset([[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]],this._size,r.GeometricEffectOffsetMethod.Rounded,
4,this._offsetFlattenError);if(e)return{rings:[e]}}else if(0>this._size){if(0<Math.min(g.xmax-g.xmin,g.ymax-g.ymin)+2*this._size)return{xmin:g.xmin-this._size,xmax:g.xmax+this._size,ymin:g.ymin-this._size,ymax:g.ymax+this._size}}else return g;if(n.isPolygon(g)){if(0===this._size)return g;e=[];for(const a of g.rings){var b=this._curveHelper.offset(a,this._size,r.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError);b&&e.push(b)}if(e.length)return{rings:e}}if(n.isPolyline(g)&&0<this._size){e=
[];for(const a of g.paths)if(a&&1<a.length){b=this._curveHelper.offset(a,this._size,r.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError);const c=this._curveHelper.offset(a,-this._size,r.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError);if(b&&c){for(let d=c.length-1;0<=d;d--)b.push(c[d]);b.push([b[0][0],b[0][1]]);e.push(b)}}if(e.length)return{rings:e}}n.isPoint(g);g=this._inputGeometries.next()}return null};return p}();u.EffectBuffer=v;Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectControlMeasureLine":function(){define(["exports","../../../geometry/support/jsonUtils","../CIMCursor","../enums"],function(u,n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};p.prototype.execute=function(g,e,b,a){return new z(g,e,b)};return p}();v.instance=null;let z=function(){function p(e,b,a){var c;this._default_point_size=20;this._inputGeometries=e;this._geomUnitsPerPoint=
a;this._rule=null!=(c=b.rule)?c:r.GeometricEffectControlMeasureLineRule.FullGeometry;this._default_size=this._default_point_size*a}var g=p.prototype;g.next=function(){let e;for(;e=this._inputGeometries.next();){let b;n.isPoint(e)?b=this._processGeom([[[e.x,e.y]]]):n.isMultipoint(e)?b=this._processGeom([e.points]):n.isPolyline(e)?b=this._processGeom(e.paths):n.isPolygon(e)&&(b=this._processGeom(e.rings));if(b&&b.length)return{paths:b}}return null};g._clone=function(e){return[e[0],e[1]]};g._mid=function(e,
b){return[(e[0]+b[0])/2,(e[1]+b[1])/2]};g._mix=function(e,b,a,c){return[e[0]*b+a[0]*c,e[1]*b+a[1]*c]};g._add=function(e,b){return[e[0]+b[0],e[1]+b[1]]};g._add2=function(e,b,a){return[e[0]+b,e[1]+a]};g._sub=function(e,b){return[e[0]-b[0],e[1]-b[1]]};g._dist=function(e,b){return Math.sqrt((e[0]-b[0])*(e[0]-b[0])+(e[1]-b[1])*(e[1]-b[1]))};g._norm=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])};g._normalize=function(e,b=1){b/=this._norm(e);e[0]*=b;e[1]*=b};g._leftPerpendicular=function(e){const b=
e[0];e[0]=-e[1];e[1]=b};g._leftPerp=function(e){return[-e[1],e[0]]};g._rightPerpendicular=function(e){const b=-e[0];e[0]=e[1];e[1]=b};g._rightPerp=function(e){return[e[1],-e[0]]};g._dotProduct=function(e,b){return e[0]*b[0]+e[1]*b[1]};g._crossProduct=function(e,b){return e[0]*b[1]-e[1]*b[0]};g._rotateDirect=function(e,b,a){const c=e[0]*a+e[1]*b;e[0]=e[0]*b-e[1]*a;e[1]=c};g._makeCtrlPt=function(e){e=[e[0],e[1]];h.setId(e,1);return e};g._addAngledTicks=function(e,b,a,c){const d=this._sub(a,b);this._normalize(d);
var f=this._crossProduct(d,this._sub(c,b));c=0<f?this._rightPerp(d):this._leftPerp(d);f=Math.abs(f)/2;const l=[];l.push([b[0]+(c[0]-d[0])*f,b[1]+(c[1]-d[1])*f]);l.push(b);l.push(a);l.push([a[0]+(c[0]+d[0])*f,a[1]+(c[1]+d[1])*f]);e.push(l)};g._addBezier2=function(e,b,a,c,d){if(0===d--)e.push(c);else{var f=this._mid(b,a);a=this._mid(a,c);var l=this._mid(f,a);this._addBezier2(e,b,f,l,d);this._addBezier2(e,l,a,c,d)}};g._addBezier3=function(e,b,a,c,d,f){if(0===f--)e.push(d);else{var l=this._mid(b,a),m=
this._mid(a,c);c=this._mid(c,d);a=this._mid(l,m);m=this._mid(m,c);var k=this._mid(a,m);this._addBezier3(e,b,l,a,k,f);this._addBezier3(e,k,m,c,d,f)}};g._add90DegArc=function(e,b,a,c,d){c=null!=d?d:0<this._crossProduct(this._sub(a,b),this._sub(c,b));d=this._mid(b,a);const f=this._sub(d,b);c?this._leftPerpendicular(f):this._rightPerpendicular(f);d[0]+=f[0];d[1]+=f[1];this._addBezier3(e,b,this._mix(b,.33333,d,.66667),this._mix(a,.33333,d,.66667),a,4)};g._addArrow=function(e,b,a){var c=b[0],d=b[1],f=b[b.length-
1],l=this._sub(c,d);this._normalize(l);const m=this._crossProduct(l,this._sub(f,d));d=.5*m;var k=this._leftPerp(l);const q=[f[0]-k[0]*m,f[1]-k[1]*m];var t=b.length-1;f=[];f.push(a?[-k[0],-k[1]]:k);var w=[-l[0],-l[1]];for(a=1;a<t-1;a++){l=this._sub(b[a+1],b[a]);this._normalize(l);var A=this._dotProduct(l,w);k=this._crossProduct(l,w);A=Math.sqrt((1+A)/2);w=this._sub(l,w);this._normalize(w);w[0]/=A;w[1]/=A;f.push(0>k?[-w[0],-w[1]]:w);w=l}f.push(this._rightPerp(w));for(t=f.length-1;0<t;t--)e.push([b[t][0]+
f[t][0]*d,b[t][1]+f[t][1]*d]);e.push([q[0]+f[0][0]*d,q[1]+f[0][1]*d]);e.push([q[0]+f[0][0]*m,q[1]+f[0][1]*m]);e.push(c);e.push([q[0]-f[0][0]*m,q[1]-f[0][1]*m]);e.push([q[0]-f[0][0]*d,q[1]-f[0][1]*d]);for(c=1;c<f.length;c++)e.push([b[c][0]-f[c][0]*d,b[c][1]-f[c][1]*d])};g._cp2=function(e,b,a){return 2<=e.length?e[1]:this._add2(e[0],b*this._default_size,a*this._default_size)};g._cp3=function(e,b,a,c){if(3<=e.length)return e[2];a=this._mix(e[0],1-a,b,a);e=this._sub(b,e[0]);this._normalize(e);this._rightPerpendicular(e);
return[a[0]+e[0]*c*this._default_size,a[1]+e[1]*c*this._default_size]};g._arrowPath=function(e){if(2<e.length)return e;const b=e[0];e=this._cp2(e,-4,0);const a=this._sub(b,e);this._normalize(a);const c=this._rightPerp(a);return[b,e,[b[0]+(c[0]-a[0])*this._default_size,b[1]+(c[1]-a[1])*this._default_size]]};g._arrowLastSeg=function(e){var b=e[0];const a=this._cp2(e,-4,0);if(3<=e.length)b=e[e.length-1];else{e=this._sub(b,a);this._normalize(e);const c=this._rightPerp(e);b=[b[0]+(c[0]-e[0])*this._default_size,
b[1]+(c[1]-e[1])*this._default_size]}return[a,b]};g._processGeom=function(e){if(!e)return null;const b=[];for(const a of e){if(!a||0===a.length)continue;const c=a.length;let d=a[0];switch(this._rule){case r.GeometricEffectControlMeasureLineRule.PerpendicularFromFirstSegment:{const f=this._cp2(a,0,-1),l=this._cp3(a,f,.5,4),m=[];m.push(l);m.push(this._mid(d,f));b.push(m);break}case r.GeometricEffectControlMeasureLineRule.ReversedFirstSegment:{const f=this._cp2(a,0,-1);b.push([f,d]);break}case r.GeometricEffectControlMeasureLineRule.PerpendicularToSecondSegment:{const f=
this._cp2(a,-4,1),l=this._cp3(a,f,.882353,-1.94),m=[];m.push(this._mid(f,l));m.push(d);b.push(m);break}case r.GeometricEffectControlMeasureLineRule.SecondSegmentWithTicks:{const f=this._cp2(a,-4,1),l=this._cp3(a,f,.882353,-1.94),m=this._sub(l,f);let k;k=0<this._crossProduct(m,this._sub(d,f))?this._rightPerp(k):this._leftPerp(m);const q=[];q.push([f[0]+(k[0]-m[0])/3,f[1]+(k[1]-m[1])/3]);q.push(f);q.push(l);q.push([l[0]+(k[0]+m[0])/3,l[1]+(k[1]+m[1])/3]);b.push(q);break}case r.GeometricEffectControlMeasureLineRule.DoublePerpendicular:{const f=
this._cp2(a,0,-1),l=this._cp3(a,f,.5,3),m=this._mid(d,f),k=this._sub(m,l);this._normalize(k);const q=this._crossProduct(k,this._sub(d,l));this._leftPerpendicular(k);const t=[];t.push(d);t.push([l[0]+k[0]*q,l[1]+k[1]*q]);b.push(t);const w=[];w.push([l[0]-k[0]*q,l[1]-k[1]*q]);w.push(f);b.push(w);break}case r.GeometricEffectControlMeasureLineRule.OppositeToFirstSegment:{const f=this._cp2(a,0,-1),l=this._cp3(a,f,.5,3),m=this._mid(d,f),k=this._sub(m,l);this._normalize(k);const q=this._crossProduct(k,this._sub(d,
l));this._leftPerpendicular(k);const t=[];t.push([l[0]+k[0]*q,l[1]+k[1]*q]);t.push([l[0]-k[0]*q,l[1]-k[1]*q]);b.push(t);break}case r.GeometricEffectControlMeasureLineRule.TriplePerpendicular:{const f=this._cp2(a,0,-1),l=this._cp3(a,f,.5,4),m=this._mid(d,f),k=this._sub(m,l);this._normalize(k);const q=this._crossProduct(k,this._sub(d,l));this._leftPerpendicular(k);const t=[];t.push([l[0]+k[0]*q*.8,l[1]+k[1]*q*.8]);t.push([m[0]+.8*(d[0]-m[0]),m[1]+.8*(d[1]-m[1])]);b.push(t);b.push([l,m]);const w=[];
w.push([l[0]-k[0]*q*.8,l[1]-k[1]*q*.8]);w.push([m[0]+.8*(f[0]-m[0]),m[1]+.8*(f[1]-m[1])]);b.push(w);break}case r.GeometricEffectControlMeasureLineRule.HalfCircleFirstSegment:{const f=this._cp2(a,0,-1),l=this._cp3(a,f,.5,4),m=this._mid(d,f);let k=this._sub(f,d);const q=Math.cos(Math.PI/18),t=Math.sin(Math.PI/18),w=Math.sqrt((1+q)/2),A=Math.sqrt((1-q)/2),x=[];let y;0<this._crossProduct(k,this._sub(l,d))?(x.push(d),k=this._sub(d,m),y=f):(x.push(f),k=this._sub(f,m),y=d);this._rotateDirect(k,w,A);k[0]/=
w;k[1]/=w;for(let B=1;18>=B;B++)x.push(this._add(m,k)),this._rotateDirect(k,q,t);x.push(y);b.push(x);break}case r.GeometricEffectControlMeasureLineRule.HalfCircleSecondSegment:{const f=this._cp2(a,0,-1),l=this._cp3(a,f,1,-1);let m=this._sub(d,f);this._normalize(m);const k=this._crossProduct(m,this._sub(l,f))/2;this._leftPerpendicular(m);const q=[f[0]+m[0]*k,f[1]+m[1]*k];m=this._sub(f,q);const t=Math.cos(Math.PI/18);let w=Math.sin(Math.PI/18);0<k&&(w=-w);const A=[f];for(let x=1;18>=x;x++)this._rotateDirect(m,
t,w),A.push(this._add(q,m));b.push(A);break}case r.GeometricEffectControlMeasureLineRule.HalfCircleExtended:{const f=this._cp2(a,0,-2),l=this._cp3(a,f,1,-1);let m;if(4<=c)m=a[3];else{const A=this._sub(d,f);m=this._add(l,A)}const k=this._dist(f,l)/2/.75,q=this._sub(f,d);this._normalize(q,k);const t=this._sub(l,m);this._normalize(t,k);b.push([m,l]);const w=[this._clone(l)];this._addBezier3(w,l,this._add(l,t),this._add(f,q),f,4);w.push(d);b.push(w);break}case r.GeometricEffectControlMeasureLineRule.OpenCircle:{const f=
this._cp2(a,-2,0),l=this._sub(f,d),m=Math.cos(Math.PI/18),k=-Math.sin(Math.PI/18),q=[f];for(let t=1;33>=t;t++)this._rotateDirect(l,m,k),q.push(this._add(d,l));b.push(q);break}case r.GeometricEffectControlMeasureLineRule.CoverageEdgesWithTicks:{const f=this._cp2(a,0,-1);let l;if(3<=c)l=a[2];else{const w=this._sub(f,d),A=this._leftPerp(w);l=[d[0]+A[0]-.25*w[0],d[1]+A[1]-.25*w[1]]}let m;if(4<=c)m=a[3];else{const w=this._mid(d,f),A=this._sub(d,f);this._normalize(A);this._leftPerpendicular(A);const x=
this._crossProduct(A,this._sub(l,w));this._rightPerpendicular(A);m=[l[0]+A[0]*x*2,l[1]+A[1]*x*2]}const k=this._sub(f,d);let q,t;q=0<this._crossProduct(k,this._sub(l,d))?this._rightPerp(k):this._leftPerp(k);t=[];t.push(l);t.push(d);t.push([d[0]+(q[0]-k[0])/3,d[1]+(q[1]-k[1])/3]);b.push(t);q=0<this._crossProduct(k,this._sub(m,f))?this._rightPerp(q):this._leftPerp(k);t=[];t.push([f[0]+(q[0]+k[0])/3,f[1]+(q[1]+k[1])/3]);t.push(f);t.push(m);b.push(t);break}case r.GeometricEffectControlMeasureLineRule.GapExtentWithDoubleTicks:{const f=
this._cp2(a,0,2),l=this._cp3(a,f,0,1);let m;if(4<=c)m=a[3];else{const k=this._sub(f,d);m=this._add(l,k)}this._addAngledTicks(b,d,f,this._mid(l,m));this._addAngledTicks(b,l,m,this._mid(d,f));break}case r.GeometricEffectControlMeasureLineRule.GapExtentMidline:{const f=this._cp2(a,2,0),l=this._cp3(a,f,0,1);let m;if(4<=c)m=a[3];else{const q=this._sub(f,d);m=this._add(l,q)}const k=[];k.push(this._mid(d,l));k.push(this._mid(f,m));b.push(k);break}case r.GeometricEffectControlMeasureLineRule.Chevron:{const f=
this._cp2(a,-1,-1);let l;if(3<=c)l=a[2];else{const m=this._sub(f,d);this._leftPerpendicular(m);l=this._add(d,m)}b.push([f,this._makeCtrlPt(d),l]);break}case r.GeometricEffectControlMeasureLineRule.PerpendicularWithArc:{const f=this._cp2(a,0,-2),l=this._cp3(a,f,.5,-1);let m=this._sub(f,d);const k=this._norm(m);m[0]/=k;m[1]/=k;const q=this._crossProduct(m,this._sub(l,d));let t=this._dotProduct(m,this._sub(l,d));t<.05*k?t=.05*k:t>.95*k&&(t=.95*k);const w=[d[0]+m[0]*t,d[1]+m[1]*t];this._leftPerpendicular(m);
let A=[];A.push([w[0]-m[0]*q,w[1]-m[1]*q]);A.push([w[0]+m[0]*q,w[1]+m[1]*q]);b.push(A);const x=[f[0]+m[0]*q,f[1]+m[1]*q];m=this._sub(f,x);const y=Math.cos(Math.PI/18);let B=Math.sin(Math.PI/18);0>q&&(B=-B);A=[d,f];for(let C=1;9>=C;C++)this._rotateDirect(m,y,B),A.push(this._add(x,m));b.push(A);break}case r.GeometricEffectControlMeasureLineRule.ClosedHalfCircle:{const f=this._cp2(a,2,0),l=this._mid(d,f),m=this._sub(f,l),k=Math.cos(Math.PI/18),q=Math.sin(Math.PI/18),t=[d,f];for(let w=1;18>=w;w++)this._rotateDirect(m,
k,q),t.push(this._add(l,m));b.push(t);break}case r.GeometricEffectControlMeasureLineRule.TripleParallelExtended:{const f=this._cp2(a,0,-2),l=this._cp3(a,f,1,-2),m=this._mid(d,f),k=this._sub(l,f);this._normalize(k);const q=Math.abs(this._crossProduct(k,this._sub(m,f)))/2,t=this._dist(f,l),w=[f,d];w.push([d[0]+k[0]*t*.5,d[1]+k[1]*t*.5]);b.push(w);const A=[];A.push([m[0]-k[0]*q,m[1]-k[1]*q]);A.push([m[0]+k[0]*t*.375,m[1]+k[1]*t*.375]);h.setId(A[A.length-1],1);A.push([m[0]+k[0]*t*.75,m[1]+k[1]*t*.75]);
b.push(A);b.push([f,l]);break}case r.GeometricEffectControlMeasureLineRule.ParallelWithTicks:{const f=this._cp2(a,3,0),l=this._cp3(a,f,.5,-1),m=this._sub(l,f);this._normalize(m);const k=this._crossProduct(m,this._sub(l,d));this._leftPerpendicular(m);this._addAngledTicks(b,d,f,l);this._addAngledTicks(b,this._mix(d,1,m,k),this._mix(f,1,m,k),this._mid(d,f));break}case r.GeometricEffectControlMeasureLineRule.Parallel:{const f=this._cp2(a,3,0),l=this._cp3(a,f,.5,-1),m=this._sub(f,d);this._normalize(m);
const k=this._leftPerp(m),q=this._crossProduct(m,this._sub(l,d));let t=[d,f];b.push(t);t=[];t.push([d[0]+k[0]*q,d[1]+k[1]*q]);t.push([f[0]+k[0]*q,f[1]+k[1]*q]);b.push(t);break}case r.GeometricEffectControlMeasureLineRule.PerpendicularToFirstSegment:{const f=this._cp2(a,3,0),l=this._cp3(a,f,.5,-1),m=this._mid(d,f),k=this._sub(f,d);this._normalize(k);const q=this._crossProduct(k,this._sub(l,d));this._leftPerpendicular(k);const t=[];t.push([m[0]-k[0]*q*.25,m[1]-k[1]*q*.25]);t.push([m[0]+k[0]*q*1.25,
m[1]+k[1]*q*1.25]);b.push(t);break}case r.GeometricEffectControlMeasureLineRule.ParallelOffset:{const f=this._cp2(a,3,0),l=this._cp3(a,f,.5,-1),m=this._sub(f,d);this._normalize(m);const k=this._crossProduct(m,this._sub(l,d));this._leftPerpendicular(m);const q=[];q.push([d[0]-m[0]*k,d[1]-m[1]*k]);q.push([f[0]-m[0]*k,f[1]-m[1]*k]);b.push(q);const t=[];t.push([d[0]+m[0]*k,d[1]+m[1]*k]);t.push([f[0]+m[0]*k,f[1]+m[1]*k]);b.push(t);break}case r.GeometricEffectControlMeasureLineRule.OffsetOpposite:{const f=
this._cp2(a,3,0),l=this._cp3(a,f,.5,-1),m=this._sub(f,d);this._normalize(m);const k=this._crossProduct(m,this._sub(l,d));this._leftPerpendicular(m);const q=[];q.push([d[0]-m[0]*k,d[1]-m[1]*k]);q.push([f[0]-m[0]*k,f[1]-m[1]*k]);b.push(q);break}case r.GeometricEffectControlMeasureLineRule.OffsetSame:{const f=this._cp2(a,3,0),l=this._cp3(a,f,.5,-1),m=this._sub(f,d);this._normalize(m);const k=this._crossProduct(m,this._sub(l,d));this._leftPerpendicular(m);const q=[];q.push([d[0]+m[0]*k,d[1]+m[1]*k]);
q.push([f[0]+m[0]*k,f[1]+m[1]*k]);b.push(q);break}case r.GeometricEffectControlMeasureLineRule.CircleWithArc:{let f=this._cp2(a,3,0);const l=this._cp3(a,f,.5,-1);let m,k;if(4<=c)m=a[3],k=0<this._crossProduct(this._sub(m,f),this._sub(l,f));else{m=f;k=0<this._crossProduct(this._sub(m,d),this._sub(l,d));const x=24*this._geomUnitsPerPoint,y=this._sub(m,d);this._normalize(y,x);const B=Math.sqrt(2)/2;this._rotateDirect(y,B,k?B:-B);f=this._add(d,y)}const q=this._sub(f,d),t=Math.cos(Math.PI/18),w=Math.sin(Math.PI/
18),A=[f];for(let x=1;36>=x;x++)this._rotateDirect(q,t,w),A.push(this._add(d,q));this._add90DegArc(A,f,m,l,k);h.setId(A[A.length-8],1);b.push(A);break}case r.GeometricEffectControlMeasureLineRule.DoubleJog:{let f=this._cp2(a,-3,1),l;l=3<=c?a[2]:this._add(d,this._sub(d,f));let m;if(4<=c)m=a[3];else{const C=d;d=f;m=l;const D=this._dist(d,C),F=this._dist(m,C);let E=30*this._geomUnitsPerPoint;.5*D<E&&(E=.5*D);.5*F<E&&(E=.5*F);f=this._mix(d,E/D,C,(D-E)/D);l=this._mix(m,E/F,C,(F-E)/F)}const k=this._mid(d,
f),q=this._mid(m,l),t=this._dist(d,f),w=this._dist(l,m);let A=Math.min(t,w)/8;A=Math.min(A,24*this._geomUnitsPerPoint);const x=Math.cos(Math.PI/4);let y=this._sub(d,f);this._normalize(y,A);0<this._crossProduct(y,this._sub(m,f))?this._rotateDirect(y,x,-x):this._rotateDirect(y,x,x);let B=[];B.push(f);B.push(this._add(k,y));B.push(this._sub(k,y));B.push(d);b.push(B);y=this._sub(m,l);this._normalize(y,A);0>this._crossProduct(y,this._sub(d,l))?this._rotateDirect(y,x,x):this._rotateDirect(y,x,-x);B=[];
B.push(l);B.push(this._add(q,y));B.push(this._sub(q,y));B.push(m);b.push(B);break}case r.GeometricEffectControlMeasureLineRule.PerpendicularOffset:{const f=this._cp2(a,-4,1),l=this._cp3(a,f,.882353,-1.94),m=this._sub(l,f);0<this._crossProduct(m,this._sub(d,f))?this._rightPerpendicular(m):this._leftPerpendicular(m);const k=[m[0]/8,m[1]/8],q=this._sub(this._mid(f,l),k);b.push([q,d]);break}case r.GeometricEffectControlMeasureLineRule.LineExcludingLastSegment:{const f=this._arrowPath(a),l=[];let m=f.length-
2;for(;m--;)l.push(f[m]);b.push(l);break}case r.GeometricEffectControlMeasureLineRule.MultivertexArrow:{const f=this._arrowPath(a),l=[];this._addArrow(l,f,!1);b.push(l);break}case r.GeometricEffectControlMeasureLineRule.CrossedArrow:{const f=this._arrowPath(a),l=[];this._addArrow(l,f,!0);b.push(l);break}case r.GeometricEffectControlMeasureLineRule.ChevronArrow:{const [f,l]=this._arrowLastSeg(a),m=10*this._geomUnitsPerPoint,k=this._sub(d,f);this._normalize(k);const q=this._crossProduct(k,this._sub(l,
f)),t=this._leftPerp(k),w=[l[0]-t[0]*q*2,l[1]-t[1]*q*2],A=[];A.push([l[0]+k[0]*m,l[1]+k[1]*m]);A.push(d);A.push([w[0]+k[0]*m,w[1]+k[1]*m]);b.push(A);break}case r.GeometricEffectControlMeasureLineRule.ChevronArrowOffset:{const [f,l]=this._arrowLastSeg(a),m=this._sub(d,f);this._normalize(m);const k=this._crossProduct(m,this._sub(l,f));this._leftPerpendicular(m);const q=[l[0]-m[0]*k,l[1]-m[1]*k],t=[];t.push([q[0]+m[0]*k*.5,q[1]+m[1]*k*.5]);t.push(this._mid(q,d));t.push([q[0]-m[0]*k*.5,q[1]-m[1]*k*.5]);
b.push(t);break}case r.GeometricEffectControlMeasureLineRule.PartialFirstSegment:{const [f,l]=this._arrowLastSeg(a),m=this._sub(d,f);this._normalize(m);const k=this._crossProduct(m,this._sub(l,f));this._leftPerpendicular(m);b.push([f,[l[0]-m[0]*k,l[1]-m[1]*k]]);break}case r.GeometricEffectControlMeasureLineRule.Arch:{const f=this._cp2(a,0,-1),l=this._cp3(a,f,.5,1),m=this._sub(d,f),k=this._mix(l,1,m,.55),q=this._mix(l,1,m,-.55),t=[d];this._addBezier2(t,d,k,l,4);this._addBezier2(t,l,q,f,4);b.push(t);
break}case r.GeometricEffectControlMeasureLineRule.CurvedParallelTicks:{const f=this._cp2(a,-4,1),l=this._cp3(a,f,.882353,-1.94),m=this._sub(l,f);0<this._crossProduct(m,this._sub(d,f))?this._rightPerpendicular(m):this._leftPerpendicular(m);const k=[m[0]/8,m[1]/8],q=this._sub(this._mid(f,l),k),t=this._sub(this._mix(f,.75,l,.25),k),w=this._sub(this._mix(f,.25,l,.75),k),A=[f];this._addBezier2(A,f,t,q,3);this._addBezier2(A,q,w,l,3);b.push(A);for(let x=0;8>x;x++){const y=A[2*x+1],B=[this._clone(y)];B.push(this._add(y,
[m[0]/4,m[1]/4]));b.push(B)}break}case r.GeometricEffectControlMeasureLineRule.Arc90Degrees:{const f=this._cp2(a,0,-1),l=this._cp3(a,f,.5,1),m=[f];this._add90DegArc(m,f,d,l);b.push(m);break}default:b.push(a)}}return b};return p}();u.EffectControlMeasureLine=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectCut":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(u,
n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};p.prototype.execute=function(g,e,b,a){return new z(g,e,b)};return p}();v.instance=null;let z=function(p){function g(e,b,a){e=p.call(this,e,!0,!0)||this;e._curveHelper=new r.CurveHelper;e._beginCut=(void 0!==b.beginCut?b.beginCut:1)*a;e._endCut=(void 0!==b.endCut?b.endCut:1)*a;e._middleCut=(void 0!==b.middleCut?b.middleCut:0)*a;e._invert=void 0!==b.invert?b.invert:!1;0>e._beginCut&&(e._beginCut=
0);0>e._endCut&&(e._endCut=0);0>e._middleCut&&(e._middleCut=0);return e}n._inheritsLoose(g,p);g.prototype.processPath=function(e){var b=this._beginCut;const a=this._endCut,c=this._middleCut,d=this._curveHelper.calculatePathLength(e),f=[];if(!this._invert)0===b&&0===a&&0===c?f.push(e):b+a+c>=d||(0===c?(e=this._curveHelper.getSubCurve(e,b,d-a))&&f.push(e):((b=this._curveHelper.getSubCurve(e,b,.5*(d-c)))&&f.push(b),(b=this._curveHelper.getSubCurve(e,.5*(d+c),d-a))&&f.push(b)));else if(0!==b||0!==a||
0!==c)b+a+c>=d?f.push(e):((b=this._curveHelper.getSubCurve(e,0,b))&&f.push(b),(b=this._curveHelper.getSubCurve(e,.5*(d-c),.5*(d+c)))&&f.push(b),(b=this._curveHelper.getSubCurve(e,d-a,a))&&f.push(b));return 0===f.length?null:{paths:f}};return g}(h.PathGeometryCursor);u.EffectCut=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectDashes":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../CIMCursor ../CurveHelper ../enums ../GeometryWalker".split(" "),
function(u,n,h,r,v,z){let p=function(){function e(){}e.local=function(){null===e.instance&&(e.instance=new e);return e.instance};e.prototype.execute=function(b,a,c,d){return new g(b,a,c)};return e}();p.instance=null;let g=function(e){function b(a,c,d){var f,l;a=e.call(this,a,!0,!0)||this;a._walker=new z.GeometryWalker;a._walker.updateTolerance(d);a._endings=c.lineDashEnding;a._customDashPos=-(null!=(f=c.offsetAlongLine)?f:0)*d;a._offsetAtEnd=(null!=(l=c.customEndingOffset)?l:0)*d;a._pattern=new z.DashPattern;
a._pattern.init(c.dashTemplate,!0);a._pattern.scale(d);return a}n._inheritsLoose(b,e);b.prototype.processPath=function(a){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[a]};if(!this.iteratePath){var c=!0;switch(this._endings){default:this._pattern.extPtGap=0;break;case v.LineDashEnding.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case v.LineDashEnding.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case v.LineDashEnding.NoConstraint:this.isClosed||
(c=!1);break;case v.LineDashEnding.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var d=this._walker.calculatePathLength(a);if(this._pattern.isEmpty()||d<.1*this._pattern.length()||!this._walker.init(a,this._pattern,c))return{paths:[a]}}if(this.iteratePath)a=this._pattern.nextValue();else{switch(this._endings){default:c=.5*this._pattern.firstValue();break;case v.LineDashEnding.HalfGap:c=.5*-this._pattern.lastValue();break;case v.LineDashEnding.FullGap:c=-this._pattern.lastValue();
break;case v.LineDashEnding.FullPattern:c=0;break;case v.LineDashEnding.NoConstraint:case v.LineDashEnding.Custom:c=-this._customDashPos}a=c/this._pattern.length();a-=Math.floor(a);c=a*this._pattern.length();this._pattern.reset();a=this._pattern.nextValue();for(d=!1;c>=a;)c-=a,a=this._pattern.nextValue(),d=!d;a-=c;d?(this._walker.nextPosition(a),a=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(a),a=this._pattern.nextValue(),this._walker.nextPosition(a),a=this._pattern.nextValue())}(c=
this._walker.nextCurve(a))?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),r.PathHelper.mergePath(c,this._firstCurve),this._firstCurve=null)):(a=this._pattern.nextValue(),!this._walker.nextPosition(a)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(c=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,c=this._firstCurve,this._firstCurve=null);return{paths:[c]}};return b}(h.PathGeometryCursor);u.EffectDashes=
p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/GeometryWalker":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./CIMCursor","./CurveHelper"],function(u,n,h,r){let v=function(){function g(){this._values=[];this._currentValue=this._length=this.ctrlPtGap=this.extPtGap=0}var e=g.prototype;e.isEmpty=function(){return 0===this._values.length};e.size=function(){return this._values.length};e.init=function(b,a,c=!0){this._setEmpty();
if(!b||0===b.length)return!1;for(let d=0;d<b.length;d++){let f=Math.abs(b[d]);c&&1E-7>f&&(f=1E-7);this._values.push(f);this._length+=f}a&&b.length&1&&(this._length*=2);if(0===this._length)return!1;this.ctrlPtGap=this.extPtGap=0;this._currentValue=-1;return!0};e.scale=function(b){const a=this._values?this._values.length:0;for(let c=0;c<a;++c)this._values[c]*=b;this._length*=b;this.extPtGap*=b;this.ctrlPtGap*=b};e.addValue=function(b){this._length+=b;this._values.push(b)};e.firstValue=function(){return this._values[0]};
e.lastValue=function(){return this._values[this._values.length-1]};e.nextValue=function(){this._currentValue++;this._currentValue===this._values.length&&(this._currentValue=0);return this._values[this._currentValue]};e.reset=function(){this._currentValue=-1};e.length=function(){return this._length};e._setEmpty=function(){this.extPtGap=this.ctrlPtGap=this._length=0;this._currentValue=-1;this._values.length=0};return g}();u.EndType=void 0;(function(g){g[g.FAIL=0]="FAIL";g[g.END=1]="END";g[g.CONTINUE=
2]="CONTINUE"})(u.EndType||(u.EndType={}));let z=function(){function g(){this.reset()}var e=g.prototype;e.reset=function(){this.segment=-1;this.abscissa=this.segmentLength=0;this.isPartEnd=this.isPathEnd=!1};e.isValid=function(){return-1!==this.segment};e.copyTo=function(b){b.segment=this.segment;b.segmentLength=this.segmentLength;b.abscissa=this.abscissa;b.isPathEnd=this.isPathEnd;b.isPartEnd=this.isPartEnd};return g}(),p=function(g){function e(a=0,c=!1){a=g.call(this,a,c)||this;a._tolerance=r.PIXEL_TOLERANCE;
a._currentPosition=new z;return a}n._inheritsLoose(e,g);var b=e.prototype;b.updateTolerance=function(a){this._tolerance=r.PIXEL_TOLERANCE*a};b.init=function(a,c,d=!0){d?(this._patternLength=c.length(),this._partExtPtGap=c.extPtGap,this._partCtrlPtGap=c.ctrlPtGap):this._partCtrlPtGap=this._partExtPtGap=this._patternLength=0;this._currentPosition.reset();this._partSegCount=0;this._path=a;this._seg=-1;return this._setPosAtNextPart()};b.curPositionIsValid=function(){return this._currentPosition.isValid()};
b.nextPosition=function(a,c=u.EndType.FAIL){const d=new z;if(!this._nextPosition(a,d,null,c))return!1;d.copyTo(this._currentPosition);return!0};b.curPointAndAngle=function(a){a.pt=this._getPoint(this._currentPosition);const [c,d]=this._getAngle(this._currentPosition);a.ca=c;a.sa=d};b.nextPointAndAngle=function(a,c,d=u.EndType.FAIL){const f=new z;if(!this._nextPosition(a,f,null,d))return!1;f.copyTo(this._currentPosition);c.pt=this._getPoint(f);const [l,m]=this._getAngle(f);c.ca=l;c.sa=m;return!0};
b.nextCurve=function(a){if(0===a)return null;const c=[],d=new z;if(!this._nextPosition(a,d,c,u.EndType.END))return null;d.copyTo(this._currentPosition);return c};b.isPathEnd=function(){return this._currentPosition.isPathEnd};b.getPathEnd=function(){if(-1===this._currentPosition.segment)throw Error("missing segment");return this._path[this._currentPosition.segment+1]};b._nextPosition=function(a,c,d,f){if(this._currentPosition.isPathEnd)return!1;var l=this._currentPosition.abscissa;0<this._currentPosition.segmentLength&&
(l/=this._currentPosition.segmentLength);for(this._currentPosition.copyTo(c);c.abscissa+a*this._partLengthRatio>c.segmentLength+this._tolerance;)if(d&&(0===d.length&&(0===l?(l=this._path[c.segment],d.push([l[0],l[1]])):d.push(this.getSegCoord2D(this._path,c.segment,l))),l=this._path[c.segment+1],d.push([l[0],l[1]])),l=0,a-=(c.segmentLength-c.abscissa)/this._partLengthRatio,this._partSegCount)c.segment=this._nextSegment(),c.segmentLength=this.calculateSegLength(this._path,c.segment),c.abscissa=0,this._partSegCount--;
else{if(!this._setPosAtNextPart()){if(f===u.EndType.FAIL)return!1;c.segmentLength=this.calculateSegLength(this._path,c.segment);c.isPartEnd=!0;f===u.EndType.END?(c.abscissa=c.segmentLength,c.isPathEnd=!0):c.abscissa=c.segmentLength+a;return!0}this._currentPosition.copyTo(c)}c.abscissa+=a*this._partLengthRatio;d&&(0===d.length&&(0===l?(a=this._path[c.segment],d.push([a[0],a[1]])):d.push(this.getSegCoord2D(this._path,c.segment,l))),a=c.abscissa/c.segmentLength,1===a?(a=this._path[c.segment+1],d.push([a[0],
a[1]])):d.push(this.getSegCoord2D(this._path,c.segment,a)));!this._partSegCount&&Math.abs(c.abscissa-c.segmentLength)<this._tolerance&&(c.isPathEnd=this._partIsLast,c.isPartEnd=!0);return!0};b._getPoint=function(a){if(-1===a.segment)throw Error("missing segment");return this.getSegCoord2D(this._path,a.segment,0>=a.segmentLength?0:a.abscissa/a.segmentLength)};b._getAngle=function(a){if(-1===a.segment)throw Error("missing segment");return this.getSegAngleCS(this._path,a.segment,0>=a.segmentLength?0:
a.abscissa/a.segmentLength)};b._setPosAtNextPart=function(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;this._partLength=0;this._partIsLast=!0;for(this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this._nextSegment()),this._partSegCount++,1===h.getId(this._path[this._getEndPointIndex()])){this._partIsLast=!this._hasNextSegment();break}for(var a=this._partSegCount;a;)this._previousSegment(),
--a;this._currentPosition.segment=this._nextSegment();this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment);this._currentPosition.abscissa=0;this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1;--this._partSegCount;a=this._getStartPointIndex();this._ctrlPtBegin=1===h.getId(this._path[a]);a=a+this._partSegCount+1;a>=this._path.length&&(a=0);this._ctrlPtEnd=1===h.getId(this._path[a]);if(0<this._patternLength){a=this._ctrlPtBegin?this._partCtrlPtGap:
this._partExtPtGap;const c=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let d=Math.round((this._partLength-(a+c))/this._patternLength);0>=d&&(d=0<a+c?0:1);this._partLengthRatio=this._partLength/(a+c+d*this._patternLength);.01>this._partLengthRatio&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0};b._hasNextSegment=function(){return this._seg<this._path.length-2};b._previousSegment=function(){return--this._seg};b._nextSegment=function(){return++this._seg};b._getStartPointIndex=
function(){return this._seg};b._getEndPointIndex=function(){return this._seg+1};return e}(r.CurveHelper);u.DashPattern=v;u.GeometryWalker=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectDonut":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper","../enums"],function(u,n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};p.prototype.execute=
function(g,e,b,a){return new z(g,e,b)};return p}();v.instance=null;let z=function(){function p(g,e,b){this._inputGeometries=g;this._curveHelper=new h.CurveHelper;this._width=(void 0!==e.width?e.width:2)*b;switch(e.method){default:this._method=r.GeometricEffectOffsetMethod.Mitered;break;case r.GeometricEffectDonutMethod.Bevelled:this._method=r.GeometricEffectOffsetMethod.Bevelled;break;case r.GeometricEffectDonutMethod.Rounded:case r.GeometricEffectDonutMethod.TrueBuffer:this._method=r.GeometricEffectOffsetMethod.Rounded;
break;case r.GeometricEffectDonutMethod.Square:this._method=r.GeometricEffectOffsetMethod.Square}this._option=e.option;this._offsetFlattenError=h.PIXEL_TOLERANCE*b}p.prototype.next=function(){for(var g=this._inputGeometries.next();g;){if(n.isExtent(g)&&0<this._width){if(0>Math.min(g.xmax-g.xmin,g.ymax-g.ymin)-2*this._width)return g;var e=[];e.push([[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]);e.push([[g.xmin+this._width,g.ymin+this._width],[g.xmax-this._width,
g.ymin+this._width],[g.xmax-this._width,g.ymax-this._width],[g.xmin+this._width,g.ymax-this._width],[g.xmin+this._width,g.ymin+this._width]]);return{rings:e}}if(n.isPolygon(g)&&0<this._width){e=[];for(const b of g.rings){g=this._curveHelper.calculatePathLength(b);const a=this._curveHelper.offset(b,this._width,this._method,4,this._offsetFlattenError);a&&(0>g&&a.reverse(),e.push(a))}if(e.length)return{rings:e}}g=this._inputGeometries.next()}return null};return p}();u.EffectDonut=v;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectJog":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(u,n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};p.prototype.execute=function(g,e,b,a){return new z(g,e,b)};return p}();v.instance=null;let z=function(p){function g(e,b,a){e=p.call(this,e,!1,!0)||this;e._curveHelper=
new r.CurveHelper;e._length=(void 0!==b.length?b.length:20)*a;e._angle=void 0!==b.angle?b.angle:225;e._position=void 0!==b.position?b.position:50;0>e._length&&(e._length=-e._length);20>e._position&&(e._position=20);80<e._position&&(e._position=80);e._mirror=!1;return e}n._inheritsLoose(g,p);g.prototype.processPath=function(e){if(this._curveHelper.isEmpty(e,!1))return null;const b=e[0];e=e[e.length-1];this._curveHelper.normalize([e[0]-b[0],e[1]-b[1]]);const a=[b[0]+(e[0]-b[0])*this._position/100,b[1]+
(e[1]-b[1])*this._position/100],c=Math.cos((90-this._angle)/180*Math.PI);let d=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(d=-d);this._mirror=!this._mirror;return{paths:[[b,[a[0]-this._length/2*c,a[1]-this._length/2*d],[a[0]+this._length/2*c,a[1]+this._length/2*d],e]]}};return g}(h.PathGeometryCursor);u.EffectJog=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectMove":function(){define(["exports","../../../core/lang",
"../../../geometry/support/jsonUtils"],function(u,n,h){let r=function(){function z(){}z.local=function(){null===z.instance&&(z.instance=new z);return z.instance};z.prototype.execute=function(p,g,e,b){return new v(p,g,e)};return z}();r.instance=null;let v=function(){function z(g,e,b){this._inputGeometries=g;this._offsetX=void 0!==e.offsetX?e.offsetX*b:0;this._offsetY=void 0!==e.offsetY?-e.offsetY*b:0}var p=z.prototype;p.next=function(){for(var g=this._inputGeometries.next();g;){if(h.isExtent(g))return{xmin:g.xmin+
this._offsetX,xmax:g.xmax+this._offsetX,ymin:g.ymin+this._offsetY,ymax:g.ymax+this._offsetY};if(h.isPolygon(g))return g=n.clone(g),this._moveMultipath(g.rings,this._offsetX,this._offsetY),g;if(h.isPolyline(g))return g=n.clone(g),this._moveMultipath(g.paths,this._offsetX,this._offsetY),g;if(h.isMultipoint(g))return g=n.clone(g),this._movePath(g.points,this._offsetX,this._offsetY),g;if(h.isPoint(g))return{x:g.x+this._offsetX,y:g.y+this._offsetY};g=this._inputGeometries.next()}return null};p._moveMultipath=
function(g,e,b){if(g)for(const a of g)this._movePath(a,e,b)};p._movePath=function(g,e,b){if(g)for(const a of g)a[0]+=e,a[1]+=b};return z}();u.EffectMove=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectOffset":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper","../enums"],function(u,n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};
p.prototype.execute=function(g,e,b,a){return new z(g,e,b)};return p}();v.instance=null;let z=function(){function p(g,e,b){var a;this._inputGeometries=g;this._curveHelper=new h.CurveHelper;this._offset=(null!=(a=e.offset)?a:1)*b;this._method=e.method;this._option=e.option;this._offsetFlattenError=h.PIXEL_TOLERANCE*b}p.prototype.next=function(){for(var g=this._inputGeometries.next();g;){if(0===this._offset)return g;if(n.isExtent(g)){if(this._method===r.GeometricEffectOffsetMethod.Rounded&&0<this._offset){var e=
this._curveHelper.offset([[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]],-this._offset,this._method,4,this._offsetFlattenError);return e?{rings:[e]}:null}if(0<Math.min(g.xmax-g.xmin,g.ymax-g.ymin)+2*this._offset)return{xmin:g.xmin-this._offset,xmax:g.xmax+this._offset,ymin:g.ymin-this._offset,ymax:g.ymax+this._offset}}if(n.isPolygon(g)){var b=[];for(e of g.rings){const a=this._curveHelper.offset(e,-this._offset,this._method,4,this._offsetFlattenError);a&&b.push(a)}if(b.length)return{rings:b}}if(n.isPolyline(g)){b=
[];for(const a of g.paths)(g=this._curveHelper.offset(a,-this._offset,this._method,4,this._offsetFlattenError))&&b.push(g);if(b.length)return{paths:b}}g=this._inputGeometries.next()}return null};return p}();u.EffectOffset=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectReverse":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(u,n,h,r){let v=function(){function p(){}
p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};p.prototype.execute=function(g,e,b,a){return new z(g,e,b)};return p}();v.instance=null;let z=function(){function p(g,e,b){this._inputGeometries=g;this._reverse=void 0!==e.reverse?e.reverse:!0}p.prototype.next=function(){for(var g=this._inputGeometries.next();g;){if(!this._reverse)return g;if(h.isPolyline(g))return g=n.clone(g),r.reverseMultipath(g.paths),g;g=this._inputGeometries.next()}return null};return p}();u.EffectReverse=
v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectRotate":function(){define(["exports","../../../core/lang","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils"],function(u,n,h,r,v){let z=function(){function g(){}g.local=function(){null===g.instance&&(g.instance=new g);return g.instance};g.prototype.execute=function(e,b,a,c){return new p(e,b,a)};return g}();
z.instance=null;let p=function(){function g(b,a,c){this._inputGeometries=b;this._rotateAngle=void 0!==a.angle?a.angle*Math.PI/180:0}var e=g.prototype;e.next=function(){for(var b=this._inputGeometries.next();b;){if(0===this._rotateAngle)return b;var a=h.create();r.getBoundsXY(a,b);const c=(a[2]+a[0])/2;a=(a[3]+a[1])/2;if(v.isExtent(b))return b={rings:[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]},this._rotateMultipath(b.rings,c,a),b;if(v.isPolygon(b))return b=
n.clone(b),this._rotateMultipath(b.rings,c,a),b;if(v.isPolyline(b))return b=n.clone(b),this._rotateMultipath(b.paths,c,a),b;if(v.isMultipoint(b))return b=n.clone(b),this._rotatePath(b.points,c,a),b;if(v.isPoint(b))return b;b=this._inputGeometries.next()}return null};e._rotateMultipath=function(b,a,c){if(b)for(const d of b)this._rotatePath(d,a,c)};e._rotatePath=function(b,a,c){if(b){const d=Math.cos(this._rotateAngle),f=Math.sin(this._rotateAngle);for(const l of b){b=l[0]-a;const m=l[1]-c;l[0]=a+b*
d-m*f;l[1]=c+b*f+m*d}}};return g}();u.EffectRotate=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectScale":function(){define(["exports","../../../core/lang","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils"],function(u,n,h,r,v){let z=function(){function g(){}g.local=function(){null===g.instance&&(g.instance=new g);return g.instance};g.prototype.execute=
function(e,b,a,c){return new p(e,b,a)};return g}();z.instance=null;let p=function(){function g(b,a,c){this._inputGeometries=b;this._xFactor=void 0!==a.xScaleFactor?a.xScaleFactor:1.15;this._yFactor=void 0!==a.yScaleFactor?a.yScaleFactor:1.15}var e=g.prototype;e.next=function(){for(var b=this._inputGeometries.next();b;){if(1===this._xFactor&&1===this._yFactor)return b;var a=h.create();r.getBoundsXY(a,b);const c=(a[2]+a[0])/2;a=(a[3]+a[1])/2;if(v.isExtent(b))return b={rings:[[[b.xmin,b.ymin],[b.xmin,
b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]},this._scaleMultipath(b.rings,c,a),b;if(v.isPolygon(b))return b=n.clone(b),this._scaleMultipath(b.rings,c,a),b;if(v.isPolyline(b))return b=n.clone(b),this._scaleMultipath(b.paths,c,a),b;if(v.isMultipoint(b))return b=n.clone(b),this._scalePath(b.points,c,a),b;if(v.isPoint(b))return b;b=this._inputGeometries.next()}return null};e._scaleMultipath=function(b,a,c){if(b)for(const d of b)this._scalePath(d,a,c)};e._scalePath=function(b,a,c){if(b)for(const d of b)b=
(d[1]-c)*this._yFactor,d[0]=a+(d[0]-a)*this._xFactor,d[1]=c+b};return g}();u.EffectScale=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/effects/EffectWave":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper","../enums","../GeometryWalker"],function(u,n,h,r,v){let z=function(){function g(){}g.local=function(){null===g.instance&&(g.instance=new g);return g.instance};g.prototype.execute=function(e,b,a,c){return new p(e,
b,a)};return g}();z.instance=null;let p=function(){function g(b,a,c){this._inputGeometries=b;this._height=(void 0!==a.amplitude?a.amplitude:2)*c;this._period=(void 0!==a.period?a.period:3)*c;this._style=a.waveform;0>=this._height&&(this._height=Math.abs(this._height));0>=this._period&&(this._period=Math.abs(this._period));this._pattern=new v.DashPattern;this._pattern.addValue(this._period);this._pattern.addValue(this._period);this._walker=new v.GeometryWalker;this._walker.updateTolerance(c)}var e=
g.prototype;e.next=function(){for(var b=this._inputGeometries.next();b;){if(0===this._height||0===this._period)return b;if(n.isPolyline(b)){const a=this._processGeom(b.paths);if(a.length)return{paths:a}}if(n.isPolygon(b)&&(b=this._processGeom(b.rings),b.length))return{rings:b};b=this._inputGeometries.next()}return null};e._processGeom=function(b){const a=[];for(const c of b)if(this._walker.init(c,this._pattern))switch(this._style){default:a.push(this._constructCurve(c,!1));break;case r.GeometricEffectWaveform.Square:a.push(this._constructSquare(c));
break;case r.GeometricEffectWaveform.Triangle:a.push(this._constructTriangle(c));break;case r.GeometricEffectWaveform.Random:a.push(this._constructCurve(c,!0))}else a.push(c);return a};e._constructCurve=function(b,a){const c=new h.PathHelper;var d=this._walker.calculatePathLength(b),f=Math.round(d/this._period);0===f&&(f=1);const l=this._period/16,m=1/(16*f+1);d=2*Math.PI*d/(d/f);f=2*Math.PI*Math.random();const k=2*Math.PI*Math.random(),q=2*Math.PI*Math.random(),t=.75-Math.random()/2,w=.75-Math.random()/
2,A={};this._walker.curPointAndAngle(A);c.startPath(A.pt);let x=0;for(;;)if(this._walker.nextPointAndAngle(l,A)){const y=x;x+=m;let B;if(a){const C=this._height/2*(1+.3*Math.sin(t*d*y+f));B=C*Math.sin(d*y+k);B+=C*Math.sin(w*d*y+q);B/=2}else B=.5*this._height*Math.sin(.5*d*y);c.lineTo([A.pt[0]-B*A.sa,A.pt[1]+B*A.ca])}else{c.lineTo(b[b.length-1]);break}return c.path()};e._constructSquare=function(b){const a=new h.PathHelper;b=this._walker.calculatePathLength(b);Math.round(b/this._period);for(b=!0;;){let c=
!1;if(this._walker.curPositionIsValid()){const d={};this._walker.curPointAndAngle(d);const f={};if(this._walker.nextPointAndAngle(this._period,f)){const l={};this._walker.nextPointAndAngle(this._period,l)&&(b?(a.startPath(d.pt),b=!1):a.lineTo(d.pt),a.lineTo([d.pt[0]-this._height/2*d.sa,d.pt[1]+this._height/2*d.ca]),a.lineTo([f.pt[0]-this._height/2*f.sa,f.pt[1]+this._height/2*f.ca]),a.lineTo([f.pt[0]+this._height/2*f.sa,f.pt[1]-this._height/2*f.ca]),a.lineTo([l.pt[0]+this._height/2*l.sa,l.pt[1]-this._height/
2*l.ca]),c=!0)}}if(!c){a.lineTo(this._walker.getPathEnd());break}}return a.path()};e._constructTriangle=function(b){const a=new h.PathHelper;b=this._walker.calculatePathLength(b);Math.round(b/this._period);for(b=!0;;){let c=!1;if(this._walker.curPositionIsValid()){const d={};this._walker.curPointAndAngle(d);const f={};if(this._walker.nextPointAndAngle(this._period/2,f)){const l={};this._walker.nextPointAndAngle(this._period,l)&&(this._walker.nextPosition(this._period/2)&&(b?(a.startPath(d.pt),b=!1):
a.lineTo(d.pt),a.lineTo([f.pt[0]-this._height/2*f.sa,f.pt[1]+this._height/2*f.ca]),a.lineTo([l.pt[0]+this._height/2*l.sa,l.pt[1]-this._height/2*l.ca])),c=!0)}}if(!c){a.lineTo(this._walker.getPathEnd());break}}return a.path()};return g}();u.EffectWave=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/placements/PlacementAlongLineSameSize":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../enums",
"../GeometryWalker"],function(u,n,h,r,v){let z=function(){function g(){}g.local=function(){null===g.instance&&(g.instance=new g);return g.instance};g.prototype.execute=function(e,b,a,c){return new p(e,b,a)};return g}();z.instance=null;let p=function(g){function e(a,c,d){var f;a=g.call(this,a,!0,!0)||this;a._geometryWalker=new v.GeometryWalker;a._geometryWalker.updateTolerance(d);a._angleToLine=null!=(f=c.angleToLine)?f:!0;a._offset=(c.offset?c.offset:0)*d;a._originalEndings=c.endings;a._offsetAtEnd=
(c.customEndingOffset?c.customEndingOffset:0)*d;a._position=-(c.offsetAlongLine?c.offsetAlongLine:0)*d;a._pattern=new v.DashPattern;a._pattern.init(c.placementTemplate,!1);a._pattern.scale(d);a._endings=a._originalEndings;return a}n._inheritsLoose(e,g);var b=e.prototype;b.processPath=function(a){if(this._pattern.isEmpty())return null;if(this.iteratePath)var c=this._pattern.nextValue();else{this._endings=this._originalEndings===r.PlacementEndings.WithFullGap&&this.isClosed?r.PlacementEndings.WithMarkers:
this._originalEndings;this._pattern.extPtGap=0;let d=!0;switch(this._endings){case r.PlacementEndings.NoConstraint:c=-this._position;c=this._adjustPosition(c);d=!1;break;default:c=-this._pattern.lastValue()/2;break;case r.PlacementEndings.WithFullGap:c=-this._pattern.lastValue();this._pattern.extPtGap=this._pattern.lastValue();break;case r.PlacementEndings.WithMarkers:c=0;break;case r.PlacementEndings.Custom:c=-this._position,c=this._adjustPosition(c),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(a,
this._pattern,d))return null;this._pattern.reset();for(a=0;c>a;)c-=a,a=this._pattern.nextValue();c=a-=c;this.iteratePath=!0}a={};if(!this._geometryWalker.nextPointAndAngle(c,a)||this._endings===r.PlacementEndings.WithFullGap&&this._geometryWalker.isPathEnd())return this.iteratePath=!1,null;if(this._endings===r.PlacementEndings.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed))return null;this.internalPlacement.setTranslate(a.pt[0]-this._offset*a.sa,a.pt[1]+this._offset*
a.ca);this._angleToLine&&this.internalPlacement.setRotateCS(a.ca,a.sa);return this.internalPlacement};b._adjustPosition=function(a){a/=this._pattern.length();a-=Math.floor(a);return a*this._pattern.length()};return e}(h.PathTransformationCursor);u.PlacementAlongLineSameSize=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/placements/PlacementAtExtremities":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor",
"../CurveHelper","../enums"],function(u,n,h,r,v){let z=function(){function g(){}g.local=function(){null===g.instance&&(g.instance=new g);return g.instance};g.prototype.execute=function(e,b,a,c){return new p(e,b,a)};return g}();z.instance=null;let p=function(g){function e(a,c,d){a=g.call(this,a,!1,!0)||this;a._curveHelper=new r.CurveHelper;a._angleToLine=void 0!==c.angleToLine?c.angleToLine:!0;a._offset=void 0!==c.offset?c.offset*d:0;a._type=c.extremityPlacement;a._position=void 0!==c.offsetAlongLine?
c.offsetAlongLine*d:0;a._beginProcessed=!1;return a}n._inheritsLoose(e,g);var b=e.prototype;b.processPath=function(a){let c;switch(this._type){default:this._beginProcessed?(c=this._atExtremities(a,this._position,!1),this.iteratePath=this._beginProcessed=!1):(c=this._atExtremities(a,this._position,!0),this.iteratePath=this._beginProcessed=!0);break;case v.ExtremityPlacement.JustBegin:c=this._atExtremities(a,this._position,!0);break;case v.ExtremityPlacement.JustEnd:c=this._atExtremities(a,this._position,
!1);case v.ExtremityPlacement.None:}return c};b._atExtremities=function(a,c,d){var f=a.length;if(2>f)return null;var l=d?1:f-2;const m=d?f:-1,k=d?1:-1;let q=0;d=d?a[0]:a[f-1];for(f=l;f!==m;f+=k){l=d;d=a[f];const t=this._curveHelper.calculateLength(l,d);if(q+t>c){a=(c-q)/t;const [w,A]=this._curveHelper.getAngleCS(l,d,a);a=h.getCoord2D(l,d,a);this.internalPlacement.setTranslate(a[0]-this._offset*A,a[1]+this._offset*w);this._angleToLine&&this.internalPlacement.setRotateCS(-w,-A);return this.internalPlacement}q+=
t}return null};return e}(h.PathTransformationCursor);u.PlacementAtExtremities=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/placements/PlacementAtRatioPositions":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../GeometryWalker"],function(u,n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};p.prototype.execute=function(g,e,b,a){return new z(g,
e,b)};return p}();v.instance=null;let z=function(p){function g(e,b,a){e=p.call(this,e,!0,!0)||this;e._walker=new r.GeometryWalker;e._walker.updateTolerance(a);e._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;e._offset=void 0!==b.offset?b.offset*a:0;e._beginGap=void 0!==b.beginPosition?b.beginPosition*a:0;e._endGap=void 0!==b.endPosition?b.endPosition*a:0;e._flipFirst=void 0!==b.flipFirst?b.flipFirst:!0;e._pattern=new r.DashPattern;e._pattern.init(b.positionArray,!1,!1);e._subPathLen=0;e._posCount=
e._pattern.size();e._isFirst=!0;e._prevPos=0;return e}n._inheritsLoose(g,p);g.prototype.processPath=function(e){if(this._pattern.isEmpty())return null;if(this.iteratePath){e=this._pattern.nextValue()*this._subPathLen;var b=this._beginGap+e;e=b-this._prevPos;this._prevPos=b}else{this._posCount=this._pattern.size();this._isFirst=!0;this._prevPos=0;this._subPathLen=this._walker.calculatePathLength(e)-this._beginGap-this._endGap;if(0>this._subPathLen)return this.iteratePath=!1,null;if(!this._walker.init(e,
this._pattern,!1))return null;this._pattern.reset();e=this._pattern.nextValue()*this._subPathLen;b=this._beginGap+e;e=b-this._prevPos;this._prevPos=b;this.iteratePath=!0}b={};if(!this._walker.nextPointAndAngle(e,b,r.EndType.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(b.pt[0]-this._offset*b.sa,b.pt[1]+this._offset*b.ca);e=this._isFirst&&this._flipFirst;let a;this._angleToLine?(a=b.ca,b=b.sa):(a=1,b=0);e&&(a=-a,b=-b);this.internalPlacement.setRotateCS(a,b);this._isFirst=
!1;this._posCount--;0===this._posCount&&(this.iteratePath=!1);return this.internalPlacement};return g}(h.PathTransformationCursor);u.PlacementAtRatioPositions=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/placements/PlacementInsidePolygon":function(){define(["exports","../../../core/RandomLCG","../CIMPlacements","../enums"],function(u,n,h,r){let v=function(){function p(){}p.local=function(){null===p.instance&&(p.instance=new p);return p.instance};
p.prototype.execute=function(g,e,b,a){return new z(g,e,b,a)};return p}();v.instance=null;let z=function(){function p(e,b,a,c){var d,f,l;this._currentY=this._currentX=this._yMax=this._yMin=this._xMax=this._xMin=0;this._stepX=Math.abs(null!=(d=b.stepX)?d:16)*a;this._stepY=Math.abs(null!=(f=b.stepY)?f:16)*a;if(0!==this._stepX&&0!==this._stepY&&e&&void 0!==e.rings&&e.rings){this._gridType=null!=(l=b.gridType)?l:r.PlacementGridType.Fixed;if(this._gridType===r.PlacementGridType.Random){var m,k;a=null!=
(m=b.seed)?m:13;this._randomLCG=new n(1*a);this._randomness=(null!=(k=b.randomness)?k:100)/100;this._gridAngle=0;this._shiftOddRows=!1;this._cosAngle=1;this._offsetY=this._offsetX=this._sinAngle=0}else{var q,t,w,A;this._randomness=0;this._gridAngle=null!=(q=b.gridAngle)?q:0;this._shiftOddRows=null!=(t=b.shiftOddRows)?t:!1;this._offsetX=(null!=(w=b.offsetX)?w:0)*a;this._offsetY=(null!=(A=b.offsetY)?A:0)*a;this._cosAngle=Math.cos(this._gridAngle/180*Math.PI);this._sinAngle=-Math.sin(this._gridAngle/
180*Math.PI);if(this._stepX)if(0>this._offsetX)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(0>this._offsetY)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginY=this._graphicOriginX=0;this._internalPlacement=new h.Placement;this._calculateMinMax(e);this._geometry=e}}var g=p.prototype;g.next=function(){return this._geometry?
this._nextInside():null};g._calculateMinMax=function(e){this._yMax=this._yMin=this._xMax=this._xMin=0;let b,a,c,d,f;a=c=Number.MAX_VALUE;d=f=-Number.MAX_VALUE;for(const m of e.rings){const k=m?m.length:0;for(let q=0;q<k;++q){var l=m[q][0]-this._graphicOriginX-this._offsetX;b=m[q][1]-this._graphicOriginY-this._offsetY;e=this._cosAngle*l-this._sinAngle*b;l=this._sinAngle*l+this._cosAngle*b;a=Math.min(a,e);d=Math.max(d,e);c=Math.min(c,l);f=Math.max(f,l)}}a+=this._graphicOriginX;d+=this._graphicOriginX;
c+=this._graphicOriginY;f+=this._graphicOriginY;this._xMin=Math.round(a/this._stepX);this._xMax=Math.round(d/this._stepX);this._yMin=Math.round(c/this._stepY);this._yMax=Math.round(f/this._stepY);this._currentX=this._xMax+1;this._currentY=this._yMin-1};g._nextInside=function(){for(;;){if(this._currentX>this._xMax){this._currentY++;if(this._currentY>this._yMax)return null;this._currentX=this._xMin;this._shiftOddRows&&this._currentY%2&&this._currentX--}var e=this._currentX*this._stepX+this._offsetX;
this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const b=this._currentY*this._stepY+this._offsetY;this._currentX++;let a;this._gridType===r.PlacementGridType.Random?(a=this._graphicOriginX+e+this._stepX*this._randomness*(.5-this._randomLCG.getFloat())*2/3,e=this._graphicOriginY+b+this._stepY*this._randomness*(.5-this._randomLCG.getFloat())*2/3):(a=this._graphicOriginX+this._cosAngle*e+this._sinAngle*b,e=this._graphicOriginY-this._sinAngle*e+this._cosAngle*b);this._internalPlacement.setTranslate(a,
e);return this._internalPlacement}};return p}();u.PlacementInsidePolygon=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/placements/PlacementOnLine":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../enums"],function(u,n,h,r,v){let z=function(){function g(){}g.local=function(){null===g.instance&&(g.instance=new g);return g.instance};g.prototype.execute=function(e,b,a,c){return new p(e,
b,a)};return g}();z.instance=null;let p=function(g){function e(a,c,d){a=g.call(this,a,!0,!0)||this;a._curveHelper=new r.CurveHelper;a._angleToLine=void 0!==c.angleToLine?c.angleToLine:!0;a._offset=void 0!==c.offset?c.offset*d:0;a._relativeTo=c.relativeTo;a._position=void 0!==c.startPointOffset?c.startPointOffset*d:0;a._epsilon=.001*d;return a}n._inheritsLoose(e,g);var b=e.prototype;b.processPath=function(a){var c=this._position;if(this._relativeTo===v.PlacementOnLineRelativeTo.SegmentMidpoint){this.iteratePath||
(this._segmentCount=a.length,this._curSegment=1,this.iteratePath=!0);for(;this._curSegment<this._segmentCount;){var d=this._curSegment;this._curSegment++;c=a[d-1];d=a[d];const f=this._curveHelper.calculateLength(c,d);if(f<this._epsilon)continue;a=.5+this._position/f;const [l,m]=this._curveHelper.getAngleCS(c,d,a);a=h.getCoord2D(c,d,a);this.internalPlacement.setTranslate(a[0]-this._offset*m,a[1]+this._offset*l);this._angleToLine&&this.internalPlacement.setRotateCS(l,m);return this.internalPlacement}this.iteratePath=
!1;return null}this._relativeTo===v.PlacementOnLineRelativeTo.LineEnd&&h.reversePath(a);c=this.onLine(a,c);this._relativeTo===v.PlacementOnLineRelativeTo.LineEnd&&h.reversePath(a);return c};b.onLine=function(a,c){let d,f=!1;switch(this._relativeTo){default:d=this._curveHelper.calculatePathLength(a)/2+c;break;case v.PlacementOnLineRelativeTo.LineBeginning:d=c;break;case v.PlacementOnLineRelativeTo.LineEnd:d=c,f=!0}const l=a.length;let m=0,k=a[0];for(let q=1;q<l;++q){c=k;k=a[q];const t=this._curveHelper.calculateLength(c,
k);if(m+t>d){a=(d-m)/t;const [w,A]=this._curveHelper.getAngleCS(c,k,a);a=h.getCoord2D(c,k,a);c=f?-this._offset:this._offset;this.internalPlacement.setTranslate(a[0]-c*A,a[1]+c*w);this._angleToLine&&(f?this.internalPlacement.setRotateCS(-w,-A):this.internalPlacement.setRotateCS(w,A));return this.internalPlacement}m+=t}return null};return e}(h.PathTransformationCursor);u.PlacementOnLine=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/placements/PlacementOnVertices":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(u,n,h,r){function v(g,e){const b=Math.PI;for(;Math.abs(e-g)>b+2E-15;)e=e-g>b?e-2*b:e+2*b;return(g+e)/2}let z=function(){function g(){}g.local=function(){null===g.instance&&(g.instance=new g);return g.instance};g.prototype.execute=function(e,b,a,c){return new p(e,b,a)};return g}();z.instance=null;let p=function(g){function e(a,c,d){a=g.call(this,a,!0,!0)||this;a._curveHelper=new r.CurveHelper;a._angleToLine=void 0!==
c.angleToLine?c.angleToLine:!0;a._offset=void 0!==c.offset?c.offset*d:0;a._endPoints=void 0!==c.placeOnEndPoints?c.placeOnEndPoints:!0;a._controlPoints=void 0!==c.placeOnControlPoints?c.placeOnControlPoints:!0;a._regularVertices=void 0!==c.placeOnRegularVertices?c.placeOnRegularVertices:!0;a._tags=[];a._tagIterator=0;return a}n._inheritsLoose(e,g);var b=e.prototype;b.processPath=function(a){this.iteratePath||(this._preparePath(a),this.iteratePath=!0);if(this._tagIterator>=this._tags.length)return this._tagIterator=
this._tags.length=0,this.iteratePath=!1,null;a=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(a[2]);let c=a[0],d=a[1];if(0!==this._offset){const f=Math.cos(a[2]);c-=this._offset*Math.sin(a[2]);d+=this._offset*f}this.internalPlacement.setTranslate(c,d);this._tagIterator++;return this.internalPlacement};b._preparePath=function(a){this._tagIterator=this._tags.length=0;const c=h.isClosedPath(a),d=a.length-1;let f=0,l=0,m=0,k=0,q=0,t,w;for(;f<d;){f++;t=a[f-1];w=a[f];
const A=h.getId(t),x=h.getId(w);if(this._angleToLine||0!==this._offset)k=this._curveHelper.getAngle(t,w,0);1===f?c?(l=k,m=A):(this._endPoints||this._controlPoints&&1===A)&&this._tags.push([t[0],t[1],k]):1===A?this._controlPoints&&this._tags.push([t[0],t[1],v(q,k)]):this._regularVertices&&this._tags.push([t[0],t[1],v(q,k)]);if(this._angleToLine||0!==this._offset)q=this._curveHelper.getAngle(t,w,1);f===d&&(c?1===x||1===m?this._controlPoints&&this._tags.push([w[0],w[1],v(q,l)]):this._regularVertices&&
this._tags.push([w[0],w[1],v(q,l)]):(this._endPoints||this._controlPoints&&1===x)&&this._tags.push([w[0],w[1],q]))}this._tagIterator=0};return e}(h.PathTransformationCursor);u.PlacementOnVertices=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/placements/PlacementPolygonCenter":function(){define(["exports","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../CIMPlacements","../enums"],function(u,n,h,
r,v){let z=function(){function g(){}g.local=function(){null===g.instance&&(g.instance=new g);return g.instance};g.prototype.execute=function(e,b,a,c){return new p(e,b,a)};return g}();z.instance=null;let p=function(){function g(b,a,c){this._geometry=b;this._offsetX=void 0!==a.offsetX?a.offsetX*c:0;this._offsetY=void 0!==a.offsetY?a.offsetY*c:0;this._method=void 0!==a.method?a.method:v.PlacementPolygonCenterMethod.OnPolygon;this._internalPlacement=new r.Placement}var e=g.prototype;e.next=function(){const b=
this._geometry;this._geometry=null;return b&&void 0!==b.rings?this._polygonCenter(b):null};e._polygonCenter=function(b){switch(this._method){default:case v.PlacementPolygonCenterMethod.CenterOfMass:case v.PlacementPolygonCenterMethod.BoundingBoxCenter:{const a=n.create();h.getBoundsXY(a,b);this._internalPlacement.setTranslate((a[2]+a[0])/2+this._offsetX,(a[3]+a[1])/2+this._offsetY)}}return this._internalPlacement};return g}();u.PlacementPolygonCenter=z;Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/Rect":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(u){return function(){function n(h=0,r=0,v=0,z=0){this.x=h;this.y=r;this.width=v;this.height=z}n.prototype.union=function(h){this.x=Math.min(this.x,h.x);this.y=Math.min(this.y,h.y);this.width=Math.max(this.width,h.width);this.height=Math.max(this.height,h.height)};u._createClass(n,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return n}()})},
"esri/symbols/cim/TextRasterizer":function(){define(["../../core/screenUtils"],function(u){let n=function(){function r(){}var v=r.prototype;v.rasterizeText=function(z,p){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var g=this._textRasterizationCanvas,e=g.getContext("2d");this._setFontProperties(e,p);this.parameters=p;this.textLines=z.split(/\r?\n/);this.lineHeight=this._computeLineHeight();z=this._computeTextWidth(e,p);const {decoration:b,weight:a}=
p.font;this.lineThroughWidthOffset=b&&"line-through"===b?.1*this.lineHeight:0;var c=this.lineHeight*this.textLines.length;g.width=z+2*this.lineThroughWidthOffset;g.height=c;this.renderedLineHeight=Math.round(this.lineHeight*p.pixelRatio);this.renderedHaloSize=p.halo.size*p.pixelRatio;this.renderedWidth=z*p.pixelRatio;this.renderedHeight=c*p.pixelRatio;this.lineThroughWidthOffset*=p.pixelRatio;g=p.color;this.fillStyle=`rgba(${g.slice(0,3).toString()},${g[3]})`;this.haloStyle=`rgb(${p.halo.color.slice(0,
3).toString()})`;g=this.renderedLineHeight;z=this.renderedHaloSize;this._setFontProperties(e,p);c=e.textAlign;var d=this.renderedWidth;c=("center"===c?.5*d:"right"===c?d:0)+z;d=this.lineThroughWidthOffset;let f=0;0<z&&this._renderHalo(e,c,z,d,f,p);f+=z;d+=c;for(var l of this.textLines)e.globalCompositeOperation="destination-out",e.fillStyle="rgb(0, 0, 0)",e.fillText(l,d,f),e.globalCompositeOperation="source-over",e.fillStyle=this.fillStyle,e.fillText(l,d,f),b&&"none"!==b&&this._renderDecoration(e,
d,f,b,a),f+=g;l=this.renderedWidth+2*this.lineThroughWidthOffset;g=this.renderedHeight;e=e.getImageData(0,0,l,g);e=new Uint8Array(e.data);if(p.premultiplyColors)for(z=0;z<e.length;z+=4)p=e[z+3]/255,e[z]*=p,e[z+1]*=p,e[z+2]*=p;return{size:[l,g],image:new Uint32Array(e.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}};v._renderHalo=function(z,p,g,e,b,a){const c=this.renderedWidth,d=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas"));
this._haloRasterizationCanvas.width=c;this._haloRasterizationCanvas.height=d;const f=this._haloRasterizationCanvas,l=f.getContext("2d");l.clearRect(0,0,c,d);this._setFontProperties(l,a);const {decoration:m,weight:k}=a.font;l.fillStyle=this.haloStyle;l.strokeStyle=this.haloStyle;a=3>this.renderedHaloSize;l.lineJoin=a?"miter":"round";a?this._renderHaloEmulated(l,p,g,m,k):this._renderHaloNative(l,p,g,m,k);z.globalAlpha=this.parameters.halo.color[3];z.drawImage(f,0,0,c,d,e,b,c,d);z.globalAlpha=1};v._renderHaloEmulated=
function(z,p,g,e,b){const a=this.renderedLineHeight,c=this.renderedHaloSize;for(const d of this.textLines){for(const [f,l]of h)z.fillText(d,p+c*f,g+c*l);e&&"none"!==e&&this._renderDecoration(z,p,g,e,b);g+=a}};v._renderHaloNative=function(z,p,g,e,b){const a=this.renderedLineHeight,c=this.renderedHaloSize;for(const d of this.textLines){const f=2*c;for(let l=0;5>l;l++)z.lineWidth=(.6+.1*l)*f,z.strokeText(d,p,g),e&&"none"!==e&&this._renderDecoration(z,p,g,e,b);g+=a}};v._setFontProperties=function(z,p){var g=
p.font;g=`${g.style} ${g.weight} ${u.pt2px(p.size*p.pixelRatio)}px ${g.family}, sans-serif`;z.font=g;z.textBaseline="top";switch(p.horizontalAlignment){case "left":p="left";break;case "right":p="right";break;case "center":p="center";break;default:p="left"}z.textAlign=p};v.computeTextSize=function(z,p){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const g=this._textRasterizationCanvas;var e=g.getContext("2d");this._setFontProperties(e,p);this.parameters=
p;this.textLines=z.split(/\r?\n/);this.lineHeight=this._computeLineHeight();z=this._computeTextWidth(e,p);e=this.lineHeight*this.textLines.length;g.width=z;g.height=e;return[z*p.pixelRatio,e*p.pixelRatio]};v._computeTextWidth=function(z,p){let g=0;for(const e of this.textLines)g=Math.max(g,z.measureText(e).width);p=p.font;if("italic"===p.style||"oblique"===p.style||"string"===typeof p.weight&&("bold"===p.weight||"bolder"===p.weight)||"number"===typeof p.weight&&600<p.weight)g+=.3*z.measureText("w").width;
g+=2*this.parameters.halo.size;return Math.round(g)};v._computeLineHeight=function(){let z=1.275*this.parameters.size;const p=this.parameters.font.decoration;p&&"underline"===p&&(z*=1.3);return Math.round(z+2*this.parameters.halo.size)};v._renderDecoration=function(z,p,g,e,b){const a=.9*this.lineHeight;b="bold"===b?.06:"bolder"===b?.09:.04;switch(z.textAlign){case "center":p-=this.renderedWidth/2;break;case "right":p-=this.renderedWidth}const c=z.textBaseline;if("underline"===e)switch(c){case "top":g+=
a;break;case "middle":g+=a/2}else if("line-through"===e)switch(c){case "top":g+=a/1.5;break;case "middle":g+=a/3}z.save();z.beginPath();z.strokeStyle=z.fillStyle;z.lineWidth=Math.ceil(a*b);z.moveTo(p-this.lineThroughWidthOffset,g);z.lineTo(p+this.renderedWidth+2*this.lineThroughWidthOffset,g);z.stroke();z.restore()};return r}();const h=[];for(let r=0;360>r;r+=22.5)h.push([Math.cos(Math.PI*r/180),Math.sin(Math.PI*r/180)]);return n})},"esri/views/2d/engine/webgl/mesh/templates/shapingUtils":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2 ../../../../../../chunks/vec2f32 ../../alignmentUtils ../../number ../../Rect ../../collisions/BoundingBox".split(" "),
function(u,n,h,r,v,z,p,g,e,b){const a=Math.PI/180;let c=function(){function m(q,t,w,A){this._rotationT=r.create();this.minZoom=this._yBounds=this._xBounds=0;this.maxZoom=255;this._bounds=null;const x=w.rect,y=new Float32Array(8);q*=A;t*=A;const B=w.code?x.width*A:w.metrics.width,C=w.code?x.height*A:w.metrics.height;y[0]=q;y[1]=t;y[2]=q+B;y[3]=t;y[4]=q;y[5]=t+C;y[6]=q+B;y[7]=t+C;this._data=y;this._setTextureCoords(x);this._scale=A;this._mosaic=w;this.x=q;this.y=t;this.maxOffset=Math.max(q+B,t+C)}var k=
m.prototype;k.setTransform=function(q){this._T=q;this._offsets=null};k._setOffsets=function(q){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const t=this._offsets,w=new Float32Array(8),A=h.multiply(r.create(),this._rotationT,this._T);r.transformMany(w,q,A);t.upperLeft=g.i1616to32(8*w[0],8*w[1]);t.upperRight=g.i1616to32(8*w[2],8*w[3]);t.lowerLeft=g.i1616to32(8*w[4],8*w[5]);t.lowerRight=g.i1616to32(8*w[6],8*w[7])};k._setTextureCoords=function({x:q,y:t,width:w,height:A}){this._texcoords=
{upperLeft:g.i1616to32(q,t),upperRight:g.i1616to32(q+w,t),lowerLeft:g.i1616to32(q,t+A),lowerRight:g.i1616to32(q+w,t+A)}};n._createClass(m,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(q){this._angle=q;h.fromRotation(this._rotationT,-q);this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},
{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){this._offsets||this._setOffsets(this._data);return this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){if(!this._bounds){const {height:x,
width:y}=this._mosaic.metrics;var q=y*this._scale,t=Math.abs(x)*this._scale,w=new Float32Array(8);w[0]=this.x;w[1]=this.y;w[2]=this.x+q;w[3]=this.y;w[4]=this.x;w[5]=this.y+t;w[6]=this.x+q;w[7]=this.y+t;q=h.multiply(r.create(),this._rotationT,this._T);r.transformMany(w,w,q);t=q=Infinity;let B=0;var A=0;for(let C=0;4>C;C++){const D=w[2*C],F=w[2*C+1];q=Math.min(q,D);t=Math.min(t,F);B=Math.max(B,D);A=Math.max(A,F)}w=B-q;A-=t;this._bounds=new b(q+w/2,t+A/2,w,A)}return this._bounds}}]);return m}();const d=
(m,k)=>({code:0,page:0,sdf:!0,rect:new e(0,0,11,8),textureBinding:k,metrics:{advance:0,height:4,width:m,left:0,top:0}});let f=function(){function m(q,t,w){this._rotation=0;this._decorate(q,t,w);this.glyphs=q;this.bounds=this._createBounds(q);this.isMultiline=1<t.length;this._hasRotation=0!==w.angle;this._T=this._createGlyphTransform(this.bounds,w);for(const A of q)A.setTransform(this._T)}var k=m.prototype;k.setRotation=function(q){if(0!==q||0!==this._rotation){this._rotation=q;var t=this._T;q=h.fromRotation(r.create(),
q);h.multiply(t,q,t);for(const w of this.glyphs)w.setTransform(this._T)}};k._decorate=function(q,t,w){if(w.decoration&&"none"!==w.decoration&&q.length){var A=w.scale;w="underline"===w.decoration?30:20;var x=q[0].textureBinding;for(const y of t)q.push(new c(y.startX*A,y.startY*A+w*A,d((y.width+y.glyphWidthEnd)*A,x),1))}};k._createBounds=function(q){let t=Infinity,w=Infinity,A=0;var x=0;for(const y of q)t=Math.min(t,y.xTopLeft),w=Math.min(w,y.yTopLeft),A=Math.max(A,y.xTopLeft+y.width),x=Math.max(x,
y.yBottomRight);q=A-t;x-=w;return new b(t+q/2,w+x/2,q,x)};k._createGlyphTransform=function(q,t){const w=a*t.angle,A=r.create(),x=z.create();h.translate(A,A,v.set(x,t.xOffset,-t.yOffset));t.isCIM?h.rotate(A,A,w):(h.translate(A,A,v.set(x,q.x,q.y)),h.rotate(A,A,w),h.translate(A,A,v.set(x,-q.x,-q.y)));return A};n._createClass(m,[{key:"boundsT",get:function(){var q=this.bounds;const t=v.set(z.create(),q.x,q.y);v.transformMat2d(t,t,this._T);return this._hasRotation?(q=Math.max(q.width,q.height),new b(t[0],
t[1],q,q)):new b(t[0],t[1],q.width,q.height)}}]);return m}(),l=function(m,k,q,t,w,A){this.startY=this.startX=this.glyphWidthEnd=0;this.start=Math.max(0,Math.min(k,q));this.end=Math.max(0,Math.max(k,q));this.end<m.length&&(this.glyphWidthEnd=m[this.end].metrics.width);this.width=t;this.yMin=w;this.yMax=A};u.ShapedGlyph=c;u.ShapingInfo=f;u.shapeGlyphs=function(m,k,q){const t=q.scale,w=[];{var A=[];var x=1/q.scale*q.maxLineWidth;var y=k?m.length-1:0;var B=k?-1:m.length;k=k?-1:1;var C=y,D=0,F=0;let H=
C,K=H,P=0,L=Infinity,M=0;for(;C!==B;){const {code:J,metrics:R}=m[C];var E=Math.abs(R.top);10!==J&&32!==J&&(L=Math.min(L,E),M=Math.max(M,E+R.height));10===J?(C!==y&&(A.push(new l(m,H,C-k,D,L,M)),L=Infinity,M=0),D=0,H=C+k,K=C+k,F=0):32===J?(K=C+k,F=0,P=R.advance,D+=R.advance):(D>x&&(K!==H?(E=K-2*k,D-=P,A.push(new l(m,H,E,D-F,L,M)),L=Infinity,M=0,H=K,D=F):(A.push(new l(m,H,C-k,D,L,M)),L=Infinity,M=0,K=H=C,D=0)),D+=R.advance,F+=R.advance);C+=k}x=new l(m,H,C-k,D,L,M);0<=x.start&&x.end<m.length&&A.push(x)}for(x=
0;x<A.length;x++);x=y=A[0].yMin;y=A[A.length-1].yMax+q.lineHeight*(A.length-1)+("underline"===q.decoration?4:0)-y;const {vAlign:G,hAlign:O}=q;B=G===p.VAlign.Baseline?1:0;x=(1-B)*-x+y/2*(B?0:G-1)+-26*(B?1:0);for(y=0;y<A.length;y++){const {start:H,end:K,width:P}=A[y];B=P/2*(O+1)*-1-3;k=y*q.lineHeight+x-3;A[y].startX=B;A[y].startY=k;for(C=H;C<=K;C++)D=m[C],10!==D.code&&(F=new c(B+D.metrics.left,k-D.metrics.top,D,t),B+=D.metrics.advance,w.push(F))}return new f(w,A,q)};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec2f32"],function(u,n){return function(){function h(v,z,p,g){this.center=n.fromValues(v,z);this.centerT=n.create();this.halfWidth=p/2;this.halfHeight=g/2;this.width=p;this.height=g}var r=h.prototype;r.clone=function(){return new h(this.x,this.y,this.width,this.height)};r.serialize=function(v){v.writeF32(this.center[0]);
v.writeF32(this.center[1]);v.push(this.width);v.push(this.height);return v};r.findCollisionDelta=function(v,z=4){return Math.log2(Math.min((v.halfWidth+this.halfWidth+z)/Math.abs(v.centerT[0]-this.centerT[0]),(v.halfHeight+this.halfHeight+z)/Math.abs(v.centerT[1]-this.centerT[1])))};r.extend=function(v){const z=Math.min(this.xmin,v.xmin),p=Math.min(this.ymin,v.ymin),g=Math.max(this.xmax,v.xmax)-z;v=Math.max(this.ymax,v.ymax)-p;this.width=g;this.height=v;this.halfWidth=g/2;this.halfHeight=v/2;this.x=
z+g/2;this.y=p+v/2};h.deserialize=function(v){const z=v.readF32(),p=v.readF32(),g=v.readInt32();v=v.readInt32();return new h(z,p,g,v)};u._createClass(h,[{key:"x",get:function(){return this.center[0]},set:function(v){this.center[0]=v}},{key:"y",get:function(){return this.center[1]},set:function(v){this.center[1]=v}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},
{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}}]);return h}()})},"esri/symbols/cim/SDFHelper":function(){define(["exports","../../core/floatRGBA","../../geometry/support/jsonUtils","./Rect"],function(u,n,h,r){function v(p){if(!p)return null;switch(p.type){case "CIMPointSymbol":var g=
p.symbolLayers;if(!g||1!==g.length)break;return v(g[0]);case "CIMVectorMarker":p=p.markerGraphics;if(!p||1!==p.length)break;var e=p[0];if(!e)break;p=e.geometry;if(!p)break;e=e.symbol;if(!e||"CIMPolygonSymbol"!==e.type&&"CIMLineSymbol"!==e.type||null!=(g=e.symbolLayers)&&g.some(b=>!!b.effects))break;return{geom:p,asFill:"CIMPolygonSymbol"===e.type};case "sdf":return{geom:p.geom,asFill:p.asFill}}return null}function z(p){let g=Infinity,e=-Infinity,b=Infinity,a=-Infinity;for(const c of p)for(const d of c)d[0]<
g&&(g=d[0]),d[0]>e&&(e=d[0]),d[1]<b&&(b=d[1]),d[1]>a&&(a=d[1]);return[g,b,e,a]}u.buildSDF=function(p){var g=p.geom;var e=g?g.rings?g.rings:g.paths?g.paths:void 0!==g.xmin&&void 0!==g.ymin&&void 0!==g.xmax&&void 0!==g.ymax?[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]:null:null;g=Infinity;var b=-Infinity;var a=Infinity,c=-Infinity;for(var d of e)for(var f of d)f[0]<g&&(g=f[0]),f[0]>b&&(b=f[0]),f[1]<a&&(a=f[1]),f[1]>c&&(c=f[1]);b=new r(g,a,b-g,c-a);a=64/Math.max(b.width,
b.height);d=Math.round(b.width*a)+62;f=Math.round(b.height*a)+62;g=[];for(var l of e)if(l&&1<l.length){e=[];for(var m of l){let [D,F]=m;D-=b.x;F-=b.y;D*=a;F*=a;D+=30.5;F+=30.5;p.asFill?e.push([D,F]):e.push([Math.round(D),Math.round(F)])}p.asFill&&(c=e.length-1,e[0][0]===e[c][0]&&e[0][1]===e[c][1]||e.push(e[0]));g.push(e)}var k;l=d*f;m=Array(l);for(e=0;e<l;++e)m[e]=962;for(k of g)for(e=k.length,b=1;b<e;++b){a=k[b-1];c=k[b];var q=void 0,t=void 0;a[0]<c[0]?(q=a[0],t=c[0]):(q=c[0],t=a[0]);var w=void 0,
A=void 0;a[1]<c[1]?(w=a[1],A=c[1]):(w=c[1],A=a[1]);var x=Math.floor(q)-31;t=Math.floor(t)+31;w=Math.floor(w)-31;A=Math.floor(A)+31;0>x&&(x=0);t>d&&(t=d);0>w&&(w=0);A>f&&(A=f);q=c[0]-a[0];const D=c[1]-a[1],F=q*q+D*D;for(;x<t;x++)for(let E=w;E<A;E++){var y=(x-a[0])*q+(E-a[1])*D,B=void 0;0>y?(B=a[0],y=a[1]):y>F?(B=c[0],y=c[1]):(y/=F,B=a[0]+y*q,y=a[1]+y*D);B=(x-B)*(x-B)+(E-y)*(E-y);y=(f-E-1)*d+x;B<m[y]&&(m[y]=B)}}for(k=0;k<l;++k)m[k]=Math.sqrt(m[k]);k=m;if(p.asFill)for(var C of g)for(p=C.length,g=1;g<
p;++g)for(l=C[g-1],m=C[g],l[0]<m[0]?(e=l[0],b=m[0]):(e=m[0],b=l[0]),l[1]<m[1]?(c=l[1],a=m[1]):(c=m[1],a=l[1]),e=Math.floor(e),b=Math.floor(b)+1,c=Math.floor(c),a=Math.floor(a)+1,31>e&&(e=31),b>d-31&&(b=d-31),31>c&&(c=31),a>f-31&&(a=f-31);c<a;++c)if(l[1]>c!==m[1]>c){t=(f-c-1)*d;for(w=e;w<b;++w)w<(m[0]-l[0])*(c-l[1])/(m[1]-l[1])+l[0]&&(k[t+w]=-k[t+w]);for(w=31;w<e;++w)k[t+w]=-k[t+w]}C=k.length;p=new Uint8Array(4*C);for(g=0;g<C;++g)n.packFloatRGBA(.5-k[g]/62,p,4*g);C=p;return[C,d,f]};u.getExtent=function(p){return p?
p.rings?z(p.rings):p.paths?z(p.paths):h.isExtent(p)?[p.xmin,p.ymin,p.xmax,p.ymax]:null:null};u.getSDFInfo=v;u.getSDFMetrics=function(p,g,e,b,a){const [c,d,f,l]=p;if(f<c||l<d)return[0,0,0];var m=f-c,k=l-d;p=64/Math.max(m,k);m=Math.round(m*p);k=Math.round(k*p)+62;let q=1;g&&(q=k/p/(g.ymax-g.ymin));let t=0,w=0;b&&(a?g&&e&&0<g.ymax-g.ymin&&(t=b.x/((g.xmax-g.xmin)/(g.ymax-g.ymin)*e),w=b.y/e):(t=b.x,w=b.y));t=.5*(g.xmax+g.xmin)+t*(g.xmax-g.xmin);w=.5*(g.ymax+g.ymin)+w*(g.ymax-g.ymin);t=(t-c)*p+31;w=(w-
d)*p+31;return[q,t/(m+62)-.5,-(w/k-.5)]};u.getSDFSymbol=function(p){p=p.markerGraphics;if(!p||1!==p.length)return null;p=p[0];if(!p)return null;p=p.symbol;return!p||"CIMPolygonSymbol"!==p.type&&"CIMLineSymbol"!==p.type?null:p};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/fontUtils":function(){define(["exports"],function(u){function n(h){h=h.toLowerCase().split(" ").join("-");switch(h){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";
case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";default:return h}}u.getFontDecorationTop=function(h){switch(h){case "underline":return-26;case "line-through":return-18}return NaN};u.getFontFamily=n;u.getFullyQualifiedFontName=function(h){a:{if(h.weight)switch(h.weight.toLowerCase()){case "bold":case "bolder":var r="-bold";break a}r=""}a:{if(h.style)switch(h.style.toLowerCase()){case "italic":case "oblique":var v="-italic";break a}v=""}r+=v;
return n(h.family)+(0<r.length?r:"-regular")};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/GlyphMosaic":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/promiseUtils ./Rect ./RectangleBinPack ../../../webgl/enums ../../../webgl/Texture".split(" "),function(u,n,h,r,v,z,p){function g(b){const a=new Set;for(const c of b)a.add(Math.floor(c/256));return a}function e(b,a,c){b.has(a)||
b.set(a,c().then(()=>{b.delete(a)}).catch(d=>{b.delete(a);h.throwIfNotAbortError(d)}));return b.get(a)}return function(){function b(c,d,f){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphCache={};this._textures=[];this._rangePromises=new Map;this.width=c;this.height=d;this._glyphSource=f;this._binPack=new v(c-4,d-4);this._glyphData.push(new Uint8Array(c*d));this._dirties.push(!0);this._textures.push(null);this._initDecorationGlyph()}var a=b.prototype;a.dispose=
function(){this._binPack=null;for(const c of this._textures)c&&c.dispose();this._textures.length=0;this._glyphData.length=0};a._initDecorationGlyph=function(){var c=[117,149,181,207,207,181,149,117];const d=[];for(let f=0;f<c.length;f++){const l=c[f];for(let m=0;11>m;m++)d.push(l)}c={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(d)};this._recordGlyph(c)};a.getGlyphItems=function(){var c=u._asyncToGenerator(function*(d,f,l){const m=this._getGlyphCache(d);yield this._fetchRanges(d,
f,l);return f.map(k=>this._getMosaicItem(m,d,k))});return function(d,f,l){return c.apply(this,arguments)}}();a.bind=function(c,d,f,l){const m=this._getTexture(c,f);m.setSamplingMode(d);this._dirties[f]&&(m.setData(this._glyphData[f]),this._dirties[f]=!1);c.bindTexture(m,l)};a._getGlyphCache=function(c){this._glyphCache[c]||(this._glyphCache[c]={});return this._glyphCache[c]};a._getTexture=function(c,d){this._textures[d]||(this._textures[d]=new p.Texture(c,{pixelFormat:z.PixelFormat.ALPHA,dataType:z.PixelType.UNSIGNED_BYTE,
width:this.width,height:this.height},new Uint8Array(this.width*this.height)));return this._textures[d]};a._invalidate=function(){this._dirties[this._currentPage]=!0};a._fetchRanges=function(){var c=u._asyncToGenerator(function*(d,f,l){const m=[];g(f).forEach(k=>{m.push(this._fetchRange(d,k,l))});yield Promise.all(m)});return function(d,f,l){return c.apply(this,arguments)}}();a._fetchRange=function(){var c=u._asyncToGenerator(function*(d,f,l){return 256<f?null:e(this._rangePromises,d+f,()=>this._glyphSource.getRange(d,
f,l))});return function(d,f,l){return c.apply(this,arguments)}}();a._getMosaicItem=function(c,d,f){if(!c[f]){d=this._glyphSource.getGlyph(d,f);if(!d||!d.metrics)return{rect:new r(0,0,0,0),page:0,metrics:{left:0,width:0,height:0,advance:0,top:0},code:f,sdf:!0};const l=this._recordGlyph(d);c[f]={rect:l,page:this._currentPage,metrics:d.metrics,code:f,sdf:!0};this._invalidate()}return c[f]};a._recordGlyph=function(c){var d=c.metrics;if(0===d.width)d=new r(0,0,0,0);else{const f=d.width+6,l=d.height+6;
d=this._binPack.allocate(f,l);d.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph(),this._binPack=new v(this.width-4,this.height-4),d=this._binPack.allocate(f,l));const m=this._glyphData[this._currentPage];c=c.bitmap;let k,q;if(c)for(let t=0;t<l;t++){k=f*t;q=this.width*(d.y+t)+d.x;for(let w=
0;w<f;w++)m[q+w]=c[k+w]}n("esri-glyph-debug")&&this._showDebugPage(m)}return d};a._showDebugPage=function(c){const d=document.createElement("canvas"),f=d.getContext("2d"),l=new ImageData(this.width,this.height),m=l.data;d.width=this.width;d.height=this.height;d.style.border="1px solid black";for(let k=0;k<c.length;++k)m[4*k]=c[k],m[4*k+1]=0,m[4*k+2]=0,m[4*k+3]=255;f.putImageData(l,0,0);document.body.appendChild(d)};return b}()})},"esri/views/2d/engine/webgl/RectangleBinPack":function(){define(["../../../../chunks/_rollupPluginBabelHelpers",
"./Rect"],function(u,n){return function(){function h(v,z){this._height=this._width=0;this._free=[];this._width=v;this._height=z;this._free.push(new n(0,0,v,z))}var r=h.prototype;r.allocate=function(v,z){if(v>this._width||z>this._height)return new n;let p=null,g=-1;for(let e=0;e<this._free.length;++e){const b=this._free[e];v<=b.width&&z<=b.height&&(null===p||b.y<=p.y&&b.x<=p.x)&&(p=b,g=e)}if(null===p)return new n;this._free.splice(g,1);p.width<p.height?(p.width>v&&this._free.push(new n(p.x+v,p.y,p.width-
v,z)),p.height>z&&this._free.push(new n(p.x,p.y+z,p.width,p.height-z))):(p.width>v&&this._free.push(new n(p.x+v,p.y,p.width-v,p.height)),p.height>z&&this._free.push(new n(p.x,p.y+z,v,p.height-z)));return new n(p.x,p.y,v,z)};r.release=function(v){for(let z=0;z<this._free.length;++z){const p=this._free[z];if(p.y===v.y&&p.height===v.height&&p.x+p.width===v.x)p.width+=v.width;else if(p.x===v.x&&p.width===v.width&&p.y+p.height===v.y)p.height+=v.height;else if(v.y===p.y&&v.height===p.height&&v.x+v.width===
p.x)p.x=v.x,p.width+=v.width;else if(v.x===p.x&&v.width===p.width&&v.y+v.height===p.y)p.y=v.y,p.height+=v.height;else continue;this._free.splice(z,1);this.release(v)}this._free.push(v)};u._createClass(h,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);return h}()})},"esri/views/2d/engine/webgl/GlyphSource":function(){define(["../../../../request","../../../../core/pbf"],function(u,n){let h=function(){function v(p){this._metrics=[];for(this._bitmaps=
[];p.next();)switch(p.tag()){case 1:{const g=p.getMessage();for(;g.next();)switch(g.tag()){case 3:{const e=g.getMessage();let b,a,c,d,f,l,m;for(;e.next();)switch(e.tag()){case 1:b=e.getUInt32();break;case 2:a=e.getBytes();break;case 3:c=e.getUInt32();break;case 4:d=e.getUInt32();break;case 5:f=e.getSInt32();break;case 6:l=e.getSInt32();break;case 7:m=e.getUInt32();break;default:e.skip()}e.release();b&&(this._metrics[b]={width:c,height:d,left:f,top:l,advance:m},this._bitmaps[b]=a);break}default:g.skip()}g.release();
break}default:p.skip()}}var z=v.prototype;z.getMetrics=function(p){return this._metrics[p]};z.getBitmap=function(p){return this._bitmaps[p]};return v}(),r=function(){function v(){this._ranges=[]}var z=v.prototype;z.getRange=function(p){return this._ranges[p]};z.addRange=function(p,g){this._ranges[p]=g};return v}();return function(){function v(p){this._glyphInfo={};this._baseURL=p}var z=v.prototype;z.getRange=function(p,g,e){const b=this._getFontStack(p);if(b.getRange(g))return Promise.resolve();const a=
256*g,c=a+255;p=this._baseURL.replace("{fontstack}",p).replace("{range}",a+"-"+c);return u(p,{responseType:"array-buffer",...e}).then(d=>{b.addRange(g,new h(new n(new Uint8Array(d.data),new DataView(d.data))))})};z.getGlyph=function(p,g){if(p=this._getFontStack(p)){var e=Math.floor(g/256);if(!(256<e)&&(p=p.getRange(e)))return{metrics:p.getMetrics(g),bitmap:p.getBitmap(g)}}};z._getFontStack=function(p){let g=this._glyphInfo[p];g||(g=this._glyphInfo[p]=new r);return g};return v}()})},"esri/views/2d/engine/webgl/SDFConverter":function(){define(["../../../../core/floatRGBA",
"../../../../core/promiseUtils"],function(u,n){return function(){function h(v){this.size=v;const z=document.createElement("canvas");z.width=z.height=v;this._context=z.getContext("2d");this._gridOuter=new Float64Array(v*v);this._gridInner=new Float64Array(v*v);this._f=new Float64Array(v);this._d=new Float64Array(v);this._z=new Float64Array(v+1);this._v=new Int16Array(v)}var r=h.prototype;r.dispose=function(){this._context=this._gridOuter=this._gridInner=this._f=this._d=this._z=this._v=null;this._svg&&
(document.body.removeChild(this._svg),this._svg=null)};r.draw=function(v,z,p=31){this._initSVG();const g=this.createSVGString(v);return new Promise((e,b)=>{const a=new Image;a.src="data:image/svg+xml; charset\x3dutf8, "+encodeURIComponent(g);a.onload=()=>{a.onload=null;this._context.clearRect(0,0,this.size,this.size);this._context.drawImage(a,0,0,this.size,this.size);var d=this._context.getImageData(0,0,this.size,this.size);const f=new Uint8Array(this.size*this.size*4);for(let l=0;l<this.size*this.size;l++){const m=
d.data[4*l+3]/255;this._gridOuter[l]=1===m?0:0===m?1E20:Math.max(0,.5-m)**2;this._gridInner[l]=1===m?1E20:0===m?0:Math.max(0,m-.5)**2}this._edt(this._gridOuter,this.size,this.size);this._edt(this._gridInner,this.size,this.size);for(d=0;d<this.size*this.size;d++)u.packFloatRGBA(.5-(this._gridOuter[d]-this._gridInner[d])/(2*p),f,4*d);e(f)};const c=z&&z.signal;if(c)n.onAbort(c,()=>b(n.createAbortError()))})};r._initSVG=function(){if(!this._svg){const v=document.createElementNS("http://www.w3.org/2000/svg",
"svg");v.setAttribute("style","position: absolute;");v.setAttribute("width","0");v.setAttribute("height","0");v.setAttribute("aria-hidden","true");v.setAttribute("role","presentation");document.body.appendChild(v);this._svg=v}};r.createSVGString=function(v){this._initSVG();const z=document.createElementNS("http://www.w3.org/2000/svg","path");z.setAttribute("d",v);this._svg.appendChild(z);v=z.getBBox();var p=v.width/v.height;const g=this.size/2;let e,b,a;1<p?(b=e=g/v.width,a=this.size/4,p=g-1/p*g/
2):(e=b=g/v.height,a=g-g*p/2,p=this.size/4);z.setAttribute("style",`transform: matrix(${e}, 0, 0, ${b}, ${-v.x*e+a}, ${-v.y*b+p})`);v=`<svg style="fill:red;" height="${this.size}" width="${this.size}" xmlns="http://www.w3.org/2000/svg">${this._svg.innerHTML}</svg>`;this._svg.removeChild(z);return v};r._edt=function(v,z,p){const g=this._f,e=this._d,b=this._v,a=this._z;for(var c=0;c<z;c++){for(var d=0;d<p;d++)g[d]=v[d*z+c];this._edt1d(g,e,b,a,p);for(d=0;d<p;d++)v[d*z+c]=e[d]}for(c=0;c<p;c++){for(d=
0;d<z;d++)g[d]=v[c*z+d];this._edt1d(g,e,b,a,z);for(d=0;d<z;d++)v[c*z+d]=Math.sqrt(e[d])}};r._edt1d=function(v,z,p,g,e){p[0]=0;g[0]=-1E20;g[1]=1E20;for(let b=1,a=0;b<e;b++){let c=(v[b]+b*b-(v[p[a]]+p[a]*p[a]))/(2*b-2*p[a]);for(;c<=g[a];)a--,c=(v[b]+b*b-(v[p[a]]+p[a]*p[a]))/(2*b-2*p[a]);a++;p[a]=b;g[a]=c;g[a+1]=1E20}for(let b=0,a=0;b<e;b++){for(;g[a+1]<b;)a++;z[b]=(b-p[a])*(b-p[a])+v[p[a]]}};return h}()})},"esri/views/2d/engine/webgl/SpriteMosaic":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ./definitions ./GeometryUtils ./Rect ./RectangleBinPack ../../../webgl/enums ../../../webgl/Texture".split(" "),
function(u,n,h,r,v,z,p,g){function e(b){return b&&"static"===b.type}return function(){function b(c,d,f=0){this._mosaicPages=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=1;(0>=c||0>=d)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=c;this._pageHeight=d;0<f&&(this._maxItemSize=f);this.pixelRatio=window.devicePixelRatio||1;this._binPack=new z(this._pageWidth,
this._pageHeight);this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight))},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0})}var a=b.prototype;a.getWidth=function(c){return c>=this._mosaicPages.length?-1:this._mosaicPages[c].size[0]};a.getHeight=function(c){return c>=this._mosaicPages.length?-1:this._mosaicPages[c].size[1]};a.getPageTexture=function(c){return c<this._mosaicPages.length?this._mosaicPages[c].texture:
null};a.has=function(c){return this._mosaicRects.has(c)};a.getSpriteItem=function(c){return this._mosaicRects.get(c)};a.addSpriteItem=function(c,d,f,l,m,k){if(this._mosaicRects.has(c))return this._mosaicRects.get(c);let q,t,w;e(f)?[q,t,w]=this._allocateImage(d[0],d[1]):(q=new v(0,0,d[0],d[1]),t=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:f,size:[d[0]+2*h.SPRITE_PADDING,d[1]+2*h.SPRITE_PADDING],dirty:!0,texture:void 0}));if(0>=q.width||0>=q.height)return null;k={rect:q,width:d[0],
height:d[1],sdf:m,simplePattern:k,pixelRatio:1,page:t};this._mosaicRects.set(c,k);e(f)&&this._copy({rect:q,spriteSize:d,spriteData:f.data,page:t,pageSize:w,repeat:l,sdf:m});return k};a.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};a.processNextItem=function(){const c=this._spriteCopyQueue.pop();c&&this._copy(c)};a.getSpriteItems=function(c){const d={};for(const f of c)d[f]=this.getSpriteItem(f);return d};a.getMosaicItemPosition=function(c){const d=(c=this.getSpriteItem(c))&&
c.rect;if(!d)return null;d.width=c.width;d.height=c.height;const f=h.SPRITE_PADDING,l=this._mosaicPages[c.page];return{size:[c.width,c.height],tl:[(d.x+f)/l[0],(d.y+f)/l[1]],br:[(d.x+f+c.width)/l[0],(d.y+f+c.height)/l[1]],page:c.page}};a.bind=function(c,d,f=0,l=0){f=this._mosaicPages[f];const m=f.mosaicsData;var k=f.texture;k||(k=f.size,k=e(m)?new g.Texture(c,{pixelFormat:p.PixelFormat.RGBA,dataType:p.PixelType.UNSIGNED_BYTE,width:k[0],height:k[1]},new Uint8Array(m.data.buffer)):new g.Texture(c,{pixelFormat:p.PixelFormat.RGBA,
dataType:p.PixelType.UNSIGNED_BYTE,samplingMode:p.TextureSamplingMode.LINEAR,wrapMode:p.TextureWrapMode.CLAMP_TO_EDGE,width:k[0],height:k[1]},null),f.texture=k);k.setSamplingMode(d);e(m)?(c.bindTexture(k,l),f.dirty&&(k.setData(new Uint8Array(m.data.buffer)),k.generateMipmap())):m.data.bindFrame(c,k,l);f.dirty=!1};b._copyBits=function(c,d,f,l,m,k,q,t,w,A,x){let y=l*d+f;q=t*k+q;if(x)for(q-=k,x=-1;x<=A;x++,y=((x+A)%A+l)*d+f,q+=k)for(t=-1;t<=w;t++)m[q+t]=c[y+(t+w)%w];else for(f=0;f<A;f++){for(l=0;l<w;l++)m[q+
l]=c[y+l];y+=d;q+=k}};a._copy=function(c){if(!(c.page>=this._mosaicPages.length)){var d=this._mosaicPages[c.page],f=d.mosaicsData;if(!e(d.mosaicsData))throw new n("mapview-invalid-resource","unsuitable data type!");var l=c.spriteData;(f=f.data)&&l||console.error("Source or target images are uninitialized!");b._copyBits(l,c.spriteSize[0],0,0,f,c.pageSize[0],c.rect.x+h.SPRITE_PADDING,c.rect.y+h.SPRITE_PADDING,c.spriteSize[0],c.spriteSize[1],c.repeat);d.dirty=!0}};a._allocateImage=function(c,d){c+=2*
h.SPRITE_PADDING;d+=2*h.SPRITE_PADDING;var f=Math.max(c,d);if(this._maxItemSize&&this._maxItemSize<f){f=2**Math.ceil(r.log2(c));const l=2**Math.ceil(r.log2(d));c=new v(0,0,c,d);this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(f*l)},size:[f,l],dirty:!0,texture:void 0});return[c,this._mosaicPages.length-1,[f,l]]}f=this._binPack.allocate(c,d);return 0>=f.width?(f=this._mosaicPages[this._currentPage],!f.dirty&&e(f.mosaicsData)&&(f.mosaicsData.data=null),this._currentPage=this._mosaicPages.length,
this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(this._pageWidth*this._pageHeight)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0}),this._binPack=new z(this._pageWidth,this._pageHeight),this._allocateImage(c,d)):[f,this._currentPage,[this._pageWidth,this._pageHeight]]};a.dispose=function(){this._binPack=null;for(const d of this._mosaicPages){var c=d.texture;c&&c.dispose();c=d.mosaicsData;e(c)||c.data.destroy()}this._mosaicPages=null;this._mosaicRects.clear()};
u._createClass(b,[{key:"itemCount",get:function(){return this._mosaicRects.size}}]);return b}()})},"esri/views/2d/engine/webgl/animatedFormats/apng":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/_commonjsHelpers ../../../../../core/Error ../../../../../core/promiseUtils ../../../../../core/time ./BaseAnimatableTextureResource".split(" "),function(u,n,h,r,v,z,p){function g(f,l,m){return e.apply(this,arguments)}function e(){e=n._asyncToGenerator(function*(f,
l,m){f=c(f);if(f instanceof Error)throw f;yield f.createImages();v.throwIfAborted(m);const {frames:k,width:q,height:t}=f;m=document.createElement("canvas");m.width=q;m.height=t;m=m.getContext("2d");const w=[];f=[];for(const x of k){f.push(z.Milliseconds(x.delay));var A=x.imageElement;m.globalCompositeOperation=0===x.blendOp?"copy":"source-over";const y=2===x.disposeOp&&m.getImageData(x.left,x.top,x.width,x.height);m.drawImage(A,x.left,x.top);A=m.getImageData(0,0,q,t);w.push(A);0!==x.disposeOp&&(1===
x.disposeOp?m.clearRect(x.left,x.top,x.width,x.height):2===x.disposeOp&&m.putImageData(y,x.left,x.top))}return{frameDurations:f,selectFrame:x=>{l(w[x])},width:q,height:t}});return e.apply(this,arguments)}function b(f){const l=new Uint8Array(f);return!d.some((m,k)=>m!==l[k])}var a={exports:{}};(function(f,l){(function(m,k){f.exports=k()})(h.commonjsGlobal,function(){return function(m){function k(t){if(q[t])return q[t].exports;var w=q[t]={exports:{},id:t,loaded:!1};m[t].call(w.exports,w,w.exports,k);
w.loaded=!0;return w.exports}var q={};k.m=m;k.c=q;k.p="";return k(0)}([function(m,k,q){function t(G,O){var H=new DataView(G.buffer),K=8,P=void 0,L=void 0,M=void 0;do L=H.getUint32(K),P=K+4,P=Array.prototype.slice.call(G.subarray(P,P+4)),P=String.fromCharCode.apply(String,P),M=O(P,G,K,L),K+=12+L;while(!1!==M&&"IEND"!=P&&K<G.length)}function w(G){for(var O=new Uint8Array(G.length),H=0;H<G.length;H++)O[H]=G.charCodeAt(H);return O}function A(G,O,H){var K=new Uint8Array(H);K.set(G.subarray(O,O+H));return K}
Object.defineProperty(k,"__esModule",{value:!0});k.isNotPNG=function(G){return G===B};k.isNotAPNG=function(G){return G===C};k.default=function(G){var O=new Uint8Array(G);if(Array.prototype.some.call(D,function(V,Q){return V!==O[Q]}))return B;var H=!1;t(O,function(V){return!(H="acTL"===V)});if(!H)return C;var K=[],P=[],L=null,M=null,J=0,R=new y.APNG;t(O,function(V,Q,Y,fa){var da=new DataView(Q.buffer);switch(V){case "IHDR":L=Q.subarray(Y+8,Y+8+fa);R.width=da.getUint32(Y+8);R.height=da.getUint32(Y+
12);break;case "acTL":R.numPlays=da.getUint32(Y+8+4);break;case "fcTL":M&&(R.frames.push(M),J++);M=new y.Frame;M.width=da.getUint32(Y+8+4);M.height=da.getUint32(Y+8+8);M.left=da.getUint32(Y+8+12);M.top=da.getUint32(Y+8+16);V=da.getUint16(Y+8+20);Q=da.getUint16(Y+8+22);0===Q&&(Q=100);M.delay=1E3*V/Q;10>=M.delay&&(M.delay=100);R.playTime+=M.delay;M.disposeOp=da.getUint8(Y+8+24);M.blendOp=da.getUint8(Y+8+25);M.dataParts=[];0===J&&2===M.disposeOp&&(M.disposeOp=1);break;case "fdAT":M&&M.dataParts.push(Q.subarray(Y+
8+4,Y+8+fa));break;case "IDAT":M&&M.dataParts.push(Q.subarray(Y+8,Y+8+fa));break;case "IEND":P.push(A(Q,Y,12+fa));break;default:K.push(A(Q,Y,12+fa))}});M&&R.frames.push(M);if(0==R.frames.length)return C;var X=new Blob(K),U=new Blob(P);R.frames.forEach(function(V){var Q=[];Q.push(D);L.set(E(V.width),0);L.set(E(V.height),4);Q.push(F("IHDR",L));Q.push(X);V.dataParts.forEach(function(Y){return Q.push(F("IDAT",Y))});Q.push(U);V.imageData=new Blob(Q,{type:"image/png"});delete V.dataParts;Q=null});return R};
var x=(m=q(1))&&m.__esModule?m:{default:m},y=q(2),B=Error("Not a PNG"),C=Error("Not an animated PNG"),D=new Uint8Array([137,80,78,71,13,10,26,10]),F=function(G,O){var H=G.length+O.length,K=new Uint8Array(H+8),P=new DataView(K.buffer);P.setUint32(0,O.length);K.set(w(G),4);K.set(O,8);G=(0,x.default)(K,4,H);P.setUint32(H+4,G);return K},E=function(G){return new Uint8Array([G>>>24&255,G>>>16&255,G>>>8&255,G&255])}},function(m,k){Object.defineProperty(k,"__esModule",{value:!0});k.default=function(w){var A=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,x=-1,y=A;for(A+=2<arguments.length&&void 0!==arguments[2]?arguments[2]:w.length-A;y<A;y++)x=x>>>8^q[(x^w[y])&255];return x^-1};var q=new Uint32Array(256);for(m=0;256>m;m++){k=m;for(var t=0;8>t;t++)k=0!==(k&1)?3988292384^k>>>1:k>>>1;q[m]=k}},function(m,k,q){function t(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(k,"__esModule",{value:!0});k.Frame=k.APNG=void 0;var w=function(){function x(y,
B){for(var C=0;C<B.length;C++){var D=B[C];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(y,D.key,D)}}return function(y,B,C){B&&x(y.prototype,B);C&&x(y,C);return y}}(),A=(m=q(3))&&m.__esModule?m:{default:m};k.APNG=function(){function x(){t(this,x);this.playTime=this.numPlays=this.height=this.width=0;this.frames=[]}w(x,[{key:"createImages",value:function(){return Promise.all(this.frames.map(function(y){return y.createImage()}))}},{key:"getPlayer",
value:function(y){var B=this,C=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return this.createImages().then(function(){return new A.default(B,y,C)})}}]);return x}();k.Frame=function(){function x(){t(this,x);this.blendOp=this.disposeOp=this.delay=this.height=this.width=this.top=this.left=0;this.imageElement=this.imageData=null}w(x,[{key:"createImage",value:function(){var y=this;return this.imageElement?Promise.resolve():new Promise(function(B,C){var D=URL.createObjectURL(y.imageData);
y.imageElement=document.createElement("img");y.imageElement.onload=function(){URL.revokeObjectURL(D);B()};y.imageElement.onerror=function(){URL.revokeObjectURL(D);y.imageElement=null;C(Error("Image creation error"))};y.imageElement.src=D})}}]);return x}()},function(m,k,q){function t(A,x){if("function"!==typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,
configurable:!0}});x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}Object.defineProperty(k,"__esModule",{value:!0});var w=function(){function A(x,y){for(var B=0;B<y.length;B++){var C=y[B];C.enumerable=C.enumerable||!1;C.configurable=!0;"value"in C&&(C.writable=!0);Object.defineProperty(x,C.key,C)}}return function(x,y,B){y&&A(x.prototype,y);B&&A(x,B);return x}}();m=q(4);m=function(A){function x(y,B,C){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");
var D=(x.__proto__||Object.getPrototypeOf(x)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");D=!D||"object"!==typeof D&&"function"!==typeof D?this:D;D.playbackRate=1;D._currentFrameNumber=0;D._ended=!1;D._paused=!0;D._numPlays=0;D._apng=y;D.context=B;D.stop();C&&D.play();return D}t(x,A);w(x,[{key:"renderNextFrame",value:function(){this._currentFrameNumber=(this._currentFrameNumber+1)%this._apng.frames.length;this._currentFrameNumber===this._apng.frames.length-
1&&(this._numPlays++,0!==this._apng.numPlays&&this._numPlays>=this._apng.numPlays&&(this._paused=this._ended=!0));this._prevFrame&&1==this._prevFrame.disposeOp?this.context.clearRect(this._prevFrame.left,this._prevFrame.top,this._prevFrame.width,this._prevFrame.height):this._prevFrame&&2==this._prevFrame.disposeOp&&this.context.putImageData(this._prevFrameData,this._prevFrame.left,this._prevFrame.top);var y=this.currentFrame;this._prevFrame=y;this._prevFrameData=null;2==y.disposeOp&&(this._prevFrameData=
this.context.getImageData(y.left,y.top,y.width,y.height));0==y.blendOp&&this.context.clearRect(y.left,y.top,y.width,y.height);this.context.drawImage(y.imageElement,y.left,y.top);this.emit("frame",this._currentFrameNumber);this._ended&&this.emit("end")}},{key:"play",value:function(){var y=this;this.emit("play");this._ended&&this.stop();this._paused=!1;var B=performance.now()+this.currentFrame.delay/this.playbackRate;requestAnimationFrame(function F(D){if(!y._ended&&!y._paused){if(D>=B){for(;D-B>=y._apng.playTime/
y.playbackRate;)B+=y._apng.playTime/y.playbackRate,y._numPlays++;do y.renderNextFrame(),B+=y.currentFrame.delay/y.playbackRate;while(!y._ended&&D>B)}requestAnimationFrame(F)}})}},{key:"pause",value:function(){this._paused||(this.emit("pause"),this._paused=!0)}},{key:"stop",value:function(){this.emit("stop");this._numPlays=0;this._ended=!1;this._paused=!0;this._currentFrameNumber=-1;this.context.clearRect(0,0,this._apng.width,this._apng.height);this.renderNextFrame()}},{key:"currentFrameNumber",get:function(){return this._currentFrameNumber}},
{key:"currentFrame",get:function(){return this._apng.frames[this._currentFrameNumber]}},{key:"paused",get:function(){return this._paused}},{key:"ended",get:function(){return this._ended}}]);return x}((m&&m.__esModule?m:{default:m}).default);k.default=m},function(m,k){function q(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function t(A){return"function"===typeof A}function w(A){return"object"===typeof A&&null!==A}m.exports=q;q.EventEmitter=q;q.prototype._events=void 0;
q.prototype._maxListeners=void 0;q.defaultMaxListeners=10;q.prototype.setMaxListeners=function(A){if("number"!==typeof A||0>A||isNaN(A))throw TypeError("n must be a positive number");this._maxListeners=A;return this};q.prototype.emit=function(A){var x;this._events||(this._events={});if("error"===A&&(!this._events.error||w(this._events.error)&&!this._events.error.length)){var y=arguments[1];if(y instanceof Error)throw y;var B=Error('Uncaught, unspecified "error" event. ('+y+")");B.context=y;throw B;
}B=this._events[A];if(void 0===B)return!1;if(t(B))switch(arguments.length){case 1:B.call(this);break;case 2:B.call(this,arguments[1]);break;case 3:B.call(this,arguments[1],arguments[2]);break;default:y=Array.prototype.slice.call(arguments,1),B.apply(this,y)}else if(w(B)){y=Array.prototype.slice.call(arguments,1);var C=B.slice();B=C.length;for(x=0;x<B;x++)C[x].apply(this,y)}return!0};q.prototype.addListener=function(A,x){if(!t(x))throw TypeError("listener must be a function");this._events||(this._events=
{});this._events.newListener&&this.emit("newListener",A,t(x.listener)?x.listener:x);this._events[A]?w(this._events[A])?this._events[A].push(x):this._events[A]=[this._events[A],x]:this._events[A]=x;w(this._events[A])&&!this._events[A].warned&&(x=void 0!==this._maxListeners?this._maxListeners:q.defaultMaxListeners)&&0<x&&this._events[A].length>x&&(this._events[A].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",
this._events[A].length),"function"===typeof console.trace&&console.trace());return this};q.prototype.on=q.prototype.addListener;q.prototype.once=function(A,x){function y(){this.removeListener(A,y);B||(B=!0,x.apply(this,arguments))}if(!t(x))throw TypeError("listener must be a function");var B=!1;y.listener=x;this.on(A,y);return this};q.prototype.removeListener=function(A,x){if(!t(x))throw TypeError("listener must be a function");if(!this._events||!this._events[A])return this;var y=this._events[A];
var B=y.length;var C=-1;if(y===x||t(y.listener)&&y.listener===x)delete this._events[A],this._events.removeListener&&this.emit("removeListener",A,x);else if(w(y)){for(;0<B--;)if(y[B]===x||y[B].listener&&y[B].listener===x){C=B;break}if(0>C)return this;1===y.length?(y.length=0,delete this._events[A]):y.splice(C,1);this._events.removeListener&&this.emit("removeListener",A,x)}return this};q.prototype.removeAllListeners=function(A){if(!this._events)return this;if(!this._events.removeListener)return 0===
arguments.length?this._events={}:this._events[A]&&delete this._events[A],this;if(0===arguments.length){for(x in this._events)"removeListener"!==x&&this.removeAllListeners(x);this.removeAllListeners("removeListener");this._events={};return this}var x=this._events[A];if(t(x))this.removeListener(A,x);else if(x)for(;x.length;)this.removeListener(A,x[x.length-1]);delete this._events[A];return this};q.prototype.listeners=function(A){return this._events&&this._events[A]?t(this._events[A])?[this._events[A]]:
this._events[A].slice():[]};q.prototype.listenerCount=function(A){if(this._events){A=this._events[A];if(t(A))return 1;if(A)return A.length}return 0};q.listenerCount=function(A,x){return A.listenerCount(x)}}])})})(a);const c=h.getDefaultExportFromCjs(a.exports);p=function(f){function l(){return f.apply(this,arguments)||this}n._inheritsLoose(l,f);l.create=function(){var m=n._asyncToGenerator(function*(k,q,t,w,A){w=new l(w);try{yield w._load(k,q,t,A)}catch(x){if(!v.isAbortError(x))return new r("invalid-resource",
`Could not load PNG: ${x.message}`)}return w});return function(k,q,t,w,A){return m.apply(this,arguments)}}();l.prototype._loadAnimation=function(){var m=n._asyncToGenerator(function*(k,q,t){return g(k,q,t)});return function(k,q,t){return m.apply(this,arguments)}}();return l}(p.BaseAnimatableTextureResource);const d=[137,80,78,71,13,10,26,10];u.APNG=p;u.isAnimatedPNG=function(f){if(!b(f))return!1;const l=new DataView(f);f=new Uint8Array(f);let m=8,k;do{const q=l.getUint32(m);k=String.fromCharCode.apply(String,
Array.prototype.slice.call(f.subarray(m+4,m+8)));if("acTL"===k)return!0;m+=12+q}while("IEND"!==k&&m<f.length);return!1};u.isPNG=b;u.parseApng=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/animatedFormats/BaseAnimatableTextureResource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/maybe ../../../../../core/promiseUtils ../definitions ./utils".split(" "),
function(u,n,h,r,v,z,p){let g=function(){function e(a){this._requestRender=a;this._frameData=null}var b=e.prototype;b.destroy=function(){this._playHandle.remove()};b.bindFrame=function(a,c,d){a.bindTexture(c,d);r.isNone(this._frameData)||(c.updateData(0,z.SPRITE_PADDING,z.SPRITE_PADDING,this._frameData.width,this._frameData.height,this._frameData),this._frameData=null)};b._load=function(){var a=n._asyncToGenerator(function*(c,d,f,l){try{const m=yield this._loadAnimation(c,k=>{this._frameData=k;this._requestRender.requestRender()},
l);this.frameCount=m.frameDurations.length;this.width=m.width;this.height=m.height;this._playHandle=p.play(m,d,f)}catch(m){if(!v.isAbortError(m))return new h("invalid-resource","Could not parse animated resource.")}});return function(c,d,f,l){return a.apply(this,arguments)}}();return e}();u.BaseAnimatableTextureResource=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/animatedFormats/utils":function(){define(["exports","../../../../../core/time",
"../../../../../symbols/cim/enums","../grouping"],function(u,n,h,r){function v(c){return n.Milliseconds(c.frameDurations.reduce((d,f)=>d+f,0))}function z(c){const {width:d,height:f}=c;return{frameDurations:c.frameDurations.reverse(),selectFrame:l=>{c.selectFrame(c.frameDurations.length-1-l)},width:d,height:f}}function p(c,d){const {width:f,height:l,selectFrame:m}=c,k=v(c),q=d/k;return{frameDurations:c.frameDurations.map(t=>n.Milliseconds(t*q)),selectFrame:m,width:f,height:l}}function g(c,d){const {width:f,
height:l,selectFrame:m}=c;c=c.frameDurations.slice();const k=c.shift();c.unshift(n.Milliseconds(k+d));return{frameDurations:c,selectFrame:m,width:f,height:l}}function e(c,d){const {width:f,height:l,selectFrame:m}=c;c=c.frameDurations.slice();const k=c.pop();c.push(n.Milliseconds(k+d));return{frameDurations:c,selectFrame:m,width:f,height:l}}function b(c,d,f){let {repeatType:l}=d;null==l&&(l=h.AnimatedSymbolRepeatType.Loop);!0===d.reverseAnimation&&(c=z(c));null!=d.duration&&(c=p(c,n.Milliseconds(1E3*
d.duration)));if(null!=d.repeatDelay){const m=1E3*d.repeatDelay;l===h.AnimatedSymbolRepeatType.Loop?c=e(c,n.Milliseconds(m)):l===h.AnimatedSymbolRepeatType.Oscillate&&(c=g(e(c,n.Milliseconds(m/2)),n.Milliseconds(m/2)))}null!=d.startTimeOffset?d=n.Milliseconds(1E3*d.startTimeOffset):null!=d.randomizeStartTime?(f=r.getMaterialGroup(f),d=r.getRandomValue(f,null!=d.randomizeStartSeed?d.randomizeStartSeed:82749913),d=n.Milliseconds(d*v(c))):d=n.Milliseconds(0);return new a(c,d,l)}let a=function(){function c(d,
f,l){this._animation=d;this._repeatType=l;this._direction=1;this._currentFrame=0;this.timeToFrame=this._animation.frameDurations[this._currentFrame];for(d=0;f>d;)d+=this.timeToFrame,this.nextFrame();this._animation.selectFrame(this._currentFrame)}c.prototype.nextFrame=function(){this._currentFrame+=this._direction;if(0<this._direction){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case h.AnimatedSymbolRepeatType.None:this._currentFrame-=this._direction;break;
case h.AnimatedSymbolRepeatType.Loop:this._currentFrame=0;break;case h.AnimatedSymbolRepeatType.Oscillate:this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case h.AnimatedSymbolRepeatType.None:this._currentFrame-=this._direction;break;case h.AnimatedSymbolRepeatType.Loop:this._currentFrame=this._animation.frameDurations.length-1;break;case h.AnimatedSymbolRepeatType.Oscillate:this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=
this._animation.frameDurations[this._currentFrame];this._animation.selectFrame(this._currentFrame)};return c}();u.Player=a;u.adjustDuration=p;u.appendDelay=e;u.createPlayer=b;u.getDuration=v;u.play=function(c,d,f){function l(){t=m&&setTimeout(()=>{k.nextFrame();q=k.timeToFrame;l()},q)}const m=null!=d.playAnimation?d.playAnimation:!0,k=b(c,d,f);let q=k.timeToFrame,t;l();return{remove:()=>{m&&clearTimeout(t)}}};u.prependDelay=g;u.reverse=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/webgl/grouping":function(){define(["exports","../../../../core/string"],function(u,n){function h(r,v){if("string"===typeof r)r=n.numericHash(r+`-seed(${v})`);else{let z=12;r^=v;do r=107*(r>>8^r)+z|0;while(0!==--z)}return(1+r/-2147483648)/2}u.getMaterialGroup=function(r){return Math.floor(10*h(r,53290320))};u.getRandomValue=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/animatedFormats/gif":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/promiseUtils ../../../../../core/time ../../../../../geometry/support/meshUtils/exporters/gltf/imageutils ./BaseAnimatableTextureResource".split(" "),
function(u,n,h,r,v,z,p){function g(B,C,D){return e.apply(this,arguments)}function e(){e=n._asyncToGenerator(function*(B,C,D){B=A(B);var F=t(B,!0);const {width:E,height:G}=B.lsd;B=document.createElement("canvas");B.width=E;B.height=G;B=B.getContext("2d");const O=[];D=[];for(const K of F){D.push(v.Milliseconds(K.delay));F=new ImageData(K.patch,K.dims.width,K.dims.height);var H=z.imageTypeToCanvas(F);F=3===K.disposalType&&B.getImageData(K.dims.left,K.dims.top,K.dims.width,K.dims.height);B.drawImage(H,
K.dims.left,K.dims.top);H=B.getImageData(0,0,E,G);O.push(H);1!==K.disposalType&&(2===K.disposalType?B.clearRect(K.dims.left,K.dims.top,K.dims.width,K.dims.height):3===K.disposalType&&B.putImageData(F,K.dims.left,K.dims.top))}return{frameDurations:D,selectFrame:K=>{C(O[K])},width:E,height:G}});return e.apply(this,arguments)}function b(B){const C=new Uint8Array(B);return!y.some((D,F)=>D!==C[F])}var a={},c={},d={};Object.defineProperty(d,"__esModule",{value:!0});d.loop=d.conditional=d.parse=void 0;d.parse=
function F(C,D){var E=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},G=3<arguments.length&&void 0!==arguments[3]?arguments[3]:E;if(Array.isArray(D))D.forEach(function(H){return F(C,H,E,G)});else if("function"===typeof D)D(C,E,G,F);else{var O=Object.keys(D)[0];Array.isArray(D[O])?(G[O]={},F(C,D[O],E,G[O])):G[O]=D[O](C,E,G,F)}return E};d.conditional=function(C,D){return function(F,E,G,O){D(F,E,G)&&O(F,C,E,G)}};d.loop=function(C,D){return function(F,E,G,O){for(var H=[],K=F.pos;D(F,E,G);){var P=
{};O(F,C,E,P);if(F.pos===K)break;K=F.pos;H.push(P)}return H}};var f={};Object.defineProperty(f,"__esModule",{value:!0});f.readBits=f.readArray=f.readUnsigned=f.readString=f.peekBytes=f.readBytes=f.peekByte=f.readByte=f.buildStream=void 0;f.buildStream=function(C){return{data:C,pos:0}};var l=function(){return function(C){return C.data[C.pos++]}};f.readByte=l;f.peekByte=function(){var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return function(D){return D.data[D.pos+C]}};var m=function(C){return function(D){return D.data.subarray(D.pos,
D.pos+=C)}};f.readBytes=m;f.peekBytes=function(C){return function(D){return D.data.subarray(D.pos,D.pos+C)}};f.readString=function(C){return function(D){return Array.from(m(C)(D)).map(function(F){return String.fromCharCode(F)}).join("")}};f.readUnsigned=function(C){return function(D){D=m(2)(D);return C?(D[1]<<8)+D[0]:(D[0]<<8)+D[1]}};f.readArray=function(C,D){return function(F,E,G){E="function"===typeof D?D(F,E,G):D;G=m(C);for(var O=Array(E),H=0;H<E;H++)O[H]=G(F);return O}};f.readBits=function(C){return function(D){D=
l()(D);for(var F=Array(8),E=0;8>E;E++)F[7-E]=!!(D&1<<E);return Object.keys(C).reduce(function(G,O){var H=C[O];if(H.length){for(var K=H.length,P=0,L=0;L<K;L++)P+=F[H.index+L]&&Math.pow(2,K-L-1);G[O]=P}else G[O]=F[H.index];return G},{})}};(function(C){Object.defineProperty(C,"__esModule",{value:!0});C["default"]=void 0;var D={blocks:function(H){for(var K=[],P=H.data.length,L=0,M=(0,f.readByte)()(H);0!==M&&M;M=(0,f.readByte)()(H)){if(H.pos+M>=P){P-=H.pos;K.push((0,f.readBytes)(P)(H));L+=P;break}K.push((0,
f.readBytes)(M)(H));L+=M}H=new Uint8Array(L);for(P=L=0;P<K.length;P++)H.set(K[P],L),L+=K[P].length;return H}},F=(0,d.conditional)({gce:[{codes:(0,f.readBytes)(2)},{byteSize:(0,f.readByte)()},{extras:(0,f.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,f.readUnsigned)(!0)},{transparentColorIndex:(0,f.readByte)()},{terminator:(0,f.readByte)()}]},function(H){H=(0,f.peekBytes)(2)(H);return 33===H[0]&&249===H[1]}),E=(0,d.conditional)({image:[{code:(0,
f.readByte)()},{descriptor:[{left:(0,f.readUnsigned)(!0)},{top:(0,f.readUnsigned)(!0)},{width:(0,f.readUnsigned)(!0)},{height:(0,f.readUnsigned)(!0)},{lct:(0,f.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,d.conditional)({lct:(0,f.readArray)(3,function(H,K,P){return Math.pow(2,P.descriptor.lct.size+1)})},function(H,K,P){return P.descriptor.lct.exists}),{data:[{minCodeSize:(0,f.readByte)()},D]}]},function(H){return 44===(0,
f.peekByte)()(H)}),G=(0,d.conditional)({text:[{codes:(0,f.readBytes)(2)},{blockSize:(0,f.readByte)()},{preData:function(H,K,P){return(0,f.readBytes)(P.text.blockSize)(H)}},D]},function(H){H=(0,f.peekBytes)(2)(H);return 33===H[0]&&1===H[1]}),O=(0,d.conditional)({application:[{codes:(0,f.readBytes)(2)},{blockSize:(0,f.readByte)()},{id:function(H,K,P){return(0,f.readString)(P.blockSize)(H)}},D]},function(H){H=(0,f.peekBytes)(2)(H);return 33===H[0]&&255===H[1]});D=(0,d.conditional)({comment:[{codes:(0,
f.readBytes)(2)},D]},function(H){H=(0,f.peekBytes)(2)(H);return 33===H[0]&&254===H[1]});F=[{header:[{signature:(0,f.readString)(3)},{version:(0,f.readString)(3)}]},{lsd:[{width:(0,f.readUnsigned)(!0)},{height:(0,f.readUnsigned)(!0)},{gct:(0,f.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,f.readByte)()},{pixelAspectRatio:(0,f.readByte)()}]},(0,d.conditional)({gct:(0,f.readArray)(3,function(H,K){return Math.pow(2,K.lsd.gct.size+
1)})},function(H,K){return K.lsd.gct.exists}),{frames:(0,d.loop)([F,O,D,E,G],function(H){H=(0,f.peekByte)()(H);return 33===H||44===H})}];C["default"]=F})(c);var k={};Object.defineProperty(k,"__esModule",{value:!0});k.deinterlace=void 0;k.deinterlace=function(C,D){for(var F=Array(C.length),E=C.length/D,G=[0,4,2,1],O=[8,8,4,2],H=0,K=0;4>K;K++)for(var P=G[K];P<E;P+=O[K]){var L=P,M=C.slice(H*D,(H+1)*D);F.splice.apply(F,[L*D,D].concat(M));H++}return F};var q={};Object.defineProperty(q,"__esModule",{value:!0});
q.lzw=void 0;q.lzw=function(C,D,F){var E,G,O,H,K,P,L,M,J=Array(F),R=Array(4096),X=Array(4096),U=Array(4097);var V=1<<C;var Q=V+1;var Y=V+2;var fa=-1;var da=C+1;var ca=(1<<da)-1;for(G=0;G<V;G++)R[G]=0,X[G]=G;for(O=H=E=K=P=M=L=0;O<F;){if(0===P){if(E<da){H+=D[L]<<E;E+=8;L++;continue}G=H&ca;H>>=da;E-=da;if(G>Y||G==Q)break;if(G==V){da=C+1;ca=(1<<da)-1;Y=V+2;fa=-1;continue}if(-1==fa){U[P++]=X[G];K=fa=G;continue}var la=G;G==Y&&(U[P++]=K,G=fa);for(;G>V;)U[P++]=X[G],G=R[G];K=X[G]&255;U[P++]=K;4096>Y&&(R[Y]=
fa,X[Y]=K,Y++,0===(Y&ca)&&4096>Y&&(da++,ca+=Y));fa=la}P--;J[M++]=U[P];O++}for(O=M;O<F;O++)J[O]=0;return J};Object.defineProperty(a,"__esModule",{value:!0});var t=a.decompressFrames=a.decompressFrame=A=a.parseGIF=void 0,w=c&&c.__esModule?c:{default:c},A=a.parseGIF=function(C){C=new Uint8Array(C);return(0,d.parse)((0,f.buildStream)(C),w["default"])},x=function(C,D,F){if(C.image){var E=C.image,G=E.descriptor.width*E.descriptor.height;G=(0,q.lzw)(E.data.minCodeSize,E.data.blocks,G);E.descriptor.lct.interlaced&&
(G=(0,k.deinterlace)(G,E.descriptor.width));G={pixels:G,dims:{top:C.image.descriptor.top,left:C.image.descriptor.left,width:C.image.descriptor.width,height:C.image.descriptor.height}};G.colorTable=E.descriptor.lct&&E.descriptor.lct.exists?E.lct:D;C.gce&&(G.delay=10*(C.gce.delay||10),G.disposalType=C.gce.extras.disposal,C.gce.extras.transparentColorGiven&&(G.transparentIndex=C.gce.transparentColorIndex));if(F){C=G.pixels.length;D=new Uint8ClampedArray(4*C);for(F=0;F<C;F++){E=4*F;var O=G.pixels[F],
H=G.colorTable[O]||[0,0,0];D[E]=H[0];D[E+1]=H[1];D[E+2]=H[2];D[E+3]=O!==G.transparentIndex?255:0}G.patch=D}return G}console.warn("gif frame does not have associated image.")};a.decompressFrame=x;t=a.decompressFrames=function(C,D){return C.frames.filter(function(F){return F.image}).map(function(F){return x(F,C.gct,D)})};p=function(C){function D(){return C.apply(this,arguments)||this}n._inheritsLoose(D,C);D.create=function(){var F=n._asyncToGenerator(function*(E,G,O,H,K){H=new D(H);try{yield H._load(E,
G,O,K)}catch(P){if(!r.isAbortError(P))return new h("invalid-resource",`Could not load GIF: ${P.message}`)}return H});return function(E,G,O,H,K){return F.apply(this,arguments)}}();D.prototype._loadAnimation=function(){var F=n._asyncToGenerator(function*(E,G,O){return g(E,G,O)});return function(E,G,O){return F.apply(this,arguments)}}();return D}(p.BaseAnimatableTextureResource);const y=[71,73,70];u.GIF=p;u.isAnimatedGIF=function(C){function D(){O++;G+=8;const K=E.getUint8(G++);G+=K&128?3*2**((K&7)+
1):0;G++;F()}function F(){let K;for(;K=E.getUint8(G++);)G+=K}if(!b(C))return!1;const E=new DataView(C);C=E.getUint8(10);let G=13+(C&128?3*2**((C&7)+1):0),O=0;for(C=!1;!C;){switch(E.getUint8(G++)){case 33:a:{switch(E.getUint8(G++)){case 249:G++;G+=4;F();break;case 1:O++;G++;G+=12;F();break;case 254:F();break;case 255:G++;G+=8;G+=3;F();break;default:var H=!1;break a}H=!0}if(!H)return!1;break;case 44:D();break;case 59:C=!0;break;default:return!1}if(1<O)return!0}return!1};u.isGIF=b;u.parseGif=g;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/meshUtils/exporters/gltf/imageutils":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/Error ../../../../../core/maybe ../../../../../core/urlUtils".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(a){const c=b(a);if(v.isNone(c))throw new r("imageToArrayBuffer","Unsupported image type");const d=yield g(a);a=yield new Promise(f=>
c.toBlob(f,d));if(!a)throw new r("imageToArrayBuffer","Failed to encode image");return{data:yield a.arrayBuffer(),type:d}});return p.apply(this,arguments)}function g(a){return e.apply(this,arguments)}function e(){e=n._asyncToGenerator(function*(a){if(!(a instanceof HTMLImageElement))return"image/png";a=a.src;return z.isDataProtocol(a)?({mediaType:a}=z.dataComponents(a),"image/jpeg"===a?a:"image/png"):/\.png$/i.test(a)?"image/png":/\.(jpg|jpeg)$/i.test(a)?"image/jpeg":"image/png"});return e.apply(this,
arguments)}function b(a){if(a instanceof HTMLCanvasElement)return a;if(a instanceof HTMLVideoElement)return null;const c=document.createElement("canvas");c.width=a.width;c.height=a.height;const d=c.getContext("2d");a instanceof HTMLImageElement?d.drawImage(a,0,0,a.width,a.height):a instanceof ImageData&&d.putImageData(a,0,0);return c}u.encodeBase64DataUri=function(a){const c=[];a=new Uint8Array(a);for(let d=0;d<a.length;d++)c.push(String.fromCharCode(a[d]));return"data:application/octet-stream;base64,"+
btoa(c.join(""))};u.imageToArrayBuffer=function(a){return p.apply(this,arguments)};u.imageToDataURI=function(a){a=b(a);return v.isSome(a)?a.toDataURL():""};u.imageTypeToCanvas=b;u.isArrayBufferPNG=function(a){if(8>a.byteLength)return!1;a=new Uint8Array(a);return 137===a[0]&&80===a[1]&&78===a[2]&&71===a[3]&&13===a[4]&&10===a[5]&&26===a[6]&&10===a[7]};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/util/Result":function(){define(["exports",
"../../../../../core/Error"],function(u,n){u.ok=function(h,r){return h&&"name"in h?(r&&r.error(new n(h.name,h.message,h.details)),!1):!0};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/util/symbolUtils":function(){define(["exports"],function(u){u.keyFromSymbol=function(n){switch(n.type){case "esriSMS":return`${n.style}.${n.path}`;case "esriSLS":return`${n.style}.${n.cap}`;case "esriSFS":return`${n.style}`;case "esriPFS":case "esriPMS":return n.imageData?
`${n.imageData}${n.width}${n.height}`:`${n.url}${n.width}${n.height}`;default:return"mosaicHash"in n?n.mosaicHash:JSON.stringify(n)}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/WorldExtentClipRenderer":function(){define("exports ../../../../core/maybe ../../../../chunks/common ../../../../chunks/mat3 ../../../../chunks/mat3f32 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ./VertexStream ./shaders/StencilPrograms ../../../webgl/enums ../../../webgl/ProgramTemplate".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){const d=z.fromValues(-.5,-.5);z=function(){function f(){this._centerNdc=g.create();this._pxToNdc=g.create();this._worldDimensionsPx=g.create();this._mat3=v.create();this._initialized=!1}var l=f.prototype;l.dispose=function(){this._program=n.disposeMaybe(this._program);this._quad=n.disposeMaybe(this._quad)};l.render=function(m,k){const {context:q}=m;if(!this._updateGeometry(m,k))return!1;this._initialized||this._initialize(q);q.setDepthWriteEnabled(!1);q.setDepthTestEnabled(!1);
q.setColorMask(!1,!1,!1,!1);q.setBlendingEnabled(!1);q.setStencilOp(a.StencilOperation.KEEP,a.StencilOperation.KEEP,a.StencilOperation.REPLACE);q.setStencilFunction(a.CompareFunction.ALWAYS,1,255);q.setStencilTestEnabled(!0);q.useProgram(this._program);this._program.setUniformMatrix3fv("u_worldExtent",this._mat3);this._quad.draw();this._quad.unbind();return!0};l._initialize=function(m){if(!this._initialized){var k=c.createProgram(m,b.stencil);k&&(this._program=k,this._quad=new e(m,[0,0,1,0,0,1,1,
1]),this._initialized=!0)}};l._updateGeometry=function(m,k){const {state:q,pixelRatio:t}=m,{size:w,rotation:A}=q,x=Math.round(w[0]*t),y=Math.round(w[1]*t);if(!q.spatialReference.isWrappable)return!1;m=h.toRadian(A);const B=Math.abs(Math.cos(m)),C=Math.abs(Math.sin(m)),D=Math.round(q.worldScreenWidth);if(Math.round(x*B+y*C)<=D)return!1;const F=(k.left-k.right)*t/x;k=(k.bottom-k.top)*t/y;p.set(this._worldDimensionsPx,D*t,x*C+y*B,1);p.set(this._pxToNdc,2/x,-2/y,1);p.set(this._centerNdc,F,k,1);k=this._mat3;
r.fromTranslation(k,this._centerNdc);r.scale(k,k,this._pxToNdc);0!==A&&r.rotate(k,k,m);r.scale(k,k,this._worldDimensionsPx);r.translate(k,k,d);return!0};return f}();u.WorldExtentClipRenderer=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/shaders/StencilPrograms":function(){define(["exports","./sources/resolver"],function(u,n){n={shaders:{vertexShader:n.resolveIncludes("stencil/stencil.vert"),fragmentShader:n.resolveIncludes("stencil/stencil.frag")},
attributes:new Map([["a_pos",0]])};u.stencil=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/AnimationEffect":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../definitions ../VertexStream ./Effect".split(" "),function(u,n,h,r,v,z){z=function(p){function g(){var b=p.apply(this,arguments)||this;b.defines=[];b._desc={vsPath:"fx/integrate",fsPath:"fx/integrate",attributes:new Map([["a_position",
0]])};return b}n._inheritsLoose(g,p);var e=g.prototype;e.dispose=function(){this._quad&&this._quad.dispose()};e.bind=function(){};e.unbind=function(){};e.draw=function(b,a){if(a.size){var {context:c,renderingOptions:d}=b;this._quad||(this._quad=new v(c,[0,0,1,0,0,1,1,1]));var f=c.getBoundFramebufferObject(),{x:l,y:m,width:k,height:q}=c.getViewport();a.bindTextures(c);var t=a.getBlock(r.ATTRIBUTE_DATA_ANIMATION);if(!h.isNone(t)){var w=t.getFBO(c);t=t.getFBO(c,1);c.setViewport(0,0,a.size,a.size);this._computeDelta(b,
t,d.labelsAnimationTime);this._updateAnimationState(b,t,w);c.bindFramebuffer(f);c.setViewport(l,m,k,q)}}};e._computeDelta=function(b,a,c){const {context:d,painter:f,displayLevel:l}=b,m=f.materialManager.getProgram(this._desc,["delta"]);d.bindFramebuffer(a);d.setClearColor(0,0,0,0);d.clear(d.gl.COLOR_BUFFER_BIT);d.useProgram(m);m.setUniform1i("u_maskTexture",r.TEXTURE_BINDING_ATTRIBUTE_DATA_0);m.setUniform1i("u_sourceTexture",r.TEXTURE_BINDING_ATTRIBUTE_DATA_1);m.setUniform1f("u_timeDelta",b.deltaTime);
m.setUniform1f("u_animationTime",c);m.setUniform1f("u_zoomLevel",Math.round(10*l));this._quad.draw()};e._updateAnimationState=function(b,a,c){const {context:d,painter:f}=b;b=f.materialManager.getProgram(this._desc,["update"]);d.bindTexture(a.colorTexture,1);d.useProgram(b);b.setUniform1i("u_sourceTexture",1);d.bindFramebuffer(c);d.setClearColor(0,0,0,0);d.clear(d.gl.COLOR_BUFFER_BIT);this._quad.draw()};return g}(z.Effect);u.AnimationEffect=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/webgl/effects/Effect":function(){define(["exports"],function(u){let n=function(){function h(){this.name=this.constructor.name}h.prototype.createOptions=function(r,v){return null};return h}();u.Effect=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/BlendEffect":function(){define("exports ../../../../../core/Error ../../../../../core/Logger ../../../../../core/maybe ../enums ../VertexStream ../shaders/BlendPrograms ../../../../webgl/enums ../../../../webgl/Texture".split(" "),
function(u,n,h,r,v,z,p,g,e){const b=h.getLogger("esri.views.2d.engine.webgl.effects.blendEffects.BlendEffect");h=function(){function a(){this._size=[0,0]}var c=a.prototype;c.dispose=function(d){this._backBufferTexture=r.disposeMaybe(this._backBufferTexture);this._quad=r.disposeMaybe(this._quad)};c.draw=function(d,f,l,m,k){const {context:q,drawPhase:t}=d;this._setupShader(q);m&&"normal"!==m&&t!==v.WGLDrawPhase.LABEL?this._drawBlended(d,f,l,m,k):(d=p.createProgramTemplate("normal"),(d=q.programCache.acquire(d.shaders.vertexShader,
d.shaders.fragmentShader,d.attributes))?(q.useProgram(d),f.setSamplingMode(l),q.bindTexture(f,0),d.setUniform1i("u_layerTexture",0),d.setUniform1f("u_opacity",k),q.setBlendingEnabled(!0),q.setBlendFunction(g.BlendFactor.ONE,g.BlendFactor.ONE_MINUS_SRC_ALPHA),f=this._quad,f.draw(),f.unbind(),d.dispose()):b.error(new n("mapview-BlendEffect",'Error creating shader program for blend mode "normal"')))};c._drawBlended=function(d,f,l,m,k){const {context:q,state:t,pixelRatio:w,inFadeTransition:A}=d;var {size:x}=
t,y=q.getBoundFramebufferObject();let B;r.isSome(y)?(x=y.descriptor,B=x.width,x=x.height):(B=Math.round(w*x[0]),x=Math.round(w*x[1]));this._createOrResizeTexture(d,B,x);d=this._backBufferTexture;y.copyToTexture(0,0,B,x,0,0,d);q.setStencilTestEnabled(!1);q.setStencilWriteMask(0);q.setBlendingEnabled(!0);q.setDepthTestEnabled(!1);q.setDepthWriteEnabled(!1);y=p.createProgramTemplate(m);(y=q.programCache.acquire(y.shaders.vertexShader,y.shaders.fragmentShader,y.attributes))?(q.useProgram(y),d.setSamplingMode(l),
q.bindTexture(d,0),y.setUniform1i("u_backbufferTexture",0),f.setSamplingMode(l),q.bindTexture(f,1),y.setUniform1i("u_layerTexture",1),y.setUniform1f("u_opacity",k),y.setUniform1f("u_inFadeOpacity",A?1:0),q.setBlendFunction(g.BlendFactor.ONE,g.BlendFactor.ZERO),f=this._quad,f.draw(),f.unbind(),y.dispose(),q.setBlendFunction(g.BlendFactor.ONE,g.BlendFactor.ONE_MINUS_SRC_ALPHA)):b.error(new n("mapview-BlendEffect",`Error creating shader program for blend mode ${m}`))};c._setupShader=function(d){this._quad||
(this._quad=new z(d,[-1,-1,1,-1,-1,1,1,1]))};c._createOrResizeTexture=function(d,f,l){({context:d}=d);if(null===this._backBufferTexture||f!==this._size[0]||l!==this._size[1])this._backBufferTexture?this._backBufferTexture.resize(f,l):this._backBufferTexture=new e.Texture(d,{target:g.TextureType.TEXTURE_2D,pixelFormat:g.PixelFormat.RGBA,internalFormat:g.PixelFormat.RGBA,dataType:g.PixelType.UNSIGNED_BYTE,wrapMode:g.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:g.TextureSamplingMode.LINEAR,flipped:!1,
width:f,height:l}),this._size[0]=f,this._size[1]=l};return a}();u.BlendEffect=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/shaders/BlendPrograms":function(){define(["exports","./sources/resolver"],function(u,n){u.createProgramTemplate=function(h){return{attributes:new Map([["a_pos",0],["a_tex",1]]),shaders:{vertexShader:`#define ${h.replace("-","_").toUpperCase()}\n`+n.resolveIncludes("blend/blend.vert"),fragmentShader:`#define ${h.replace("-",
"_").toUpperCase()}\n`+n.resolveIncludes("blend/blend.frag")}}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/FeatureEffect":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Effect","../../../../webgl/enums"],function(u,n,h,r){h=function(v){function z(g){var e=v.call(this)||this;e.name=e.constructor.name;e.defines=[g];return e}n._inheritsLoose(z,v);var p=z.prototype;p.dispose=function(){};
p.bind=function({context:g,painter:e}){this._prev=g.getBoundFramebufferObject();const {width:b,height:a}=g.getViewport();e=e.getFbos(b,a).effect0;g.bindFramebuffer(e);g.setColorMask(!0,!0,!0,!0);g.setClearColor(0,0,0,0);g.clear(g.gl.COLOR_BUFFER_BIT)};p.unbind=function(){};p.draw=function(g,e){const {context:b,painter:a}=g;e=a.getPostProcessingEffects(e);const c=b.getBoundFramebufferObject();for(const {postProcessingEffect:d,effect:f}of e)d.draw(g,c,f);b.bindFramebuffer(this._prev);b.setStencilTestEnabled(!1);
a.blitTexture(b,c.colorTexture,r.TextureSamplingMode.NEAREST);b.setStencilTestEnabled(!0)};return z}(h.Effect);u.FeatureEffect=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/HighlightEffect":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../BitBlitRenderer ./Effect ./highlight/HighlightGradient ./highlight/HighlightRenderer ./highlight/HighlightSurfaces ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g){return function(e){function b(){var c=e.apply(this,arguments)||this;c.defines=["highlight"];c._hlRenderer=new z;c._hlGradient=new v;c._width=void 0;c._height=void 0;c._hlSurfaces=new p;c._adjustedWidth=void 0;c._adjustedHeight=void 0;c._blitRenderer=new h.BitBlitRenderer;return c}u._inheritsLoose(b,e);var a=b.prototype;a.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._hlGradient&&this._hlGradient.destroy();
this._boundFBO=null};a.bind=function(c){const {context:d,painter:f}=c,{width:l,height:m}=d.getViewport(),k=f.getFbos(l,m).effect0;this.setup(c,l,m);d.bindFramebuffer(k);d.setColorMask(!0,!0,!0,!0);d.setClearColor(0,0,0,0);d.clear(d.gl.COLOR_BUFFER_BIT)};a.unbind=function(){};a.setup=function({context:c},d,f){this._width=d;this._height=f;const l=d%4,m=f%4;d+=2>l?-l:4-l;f+=2>m?-m:4-m;this._adjustedWidth=d;this._adjustedHeight=f;this._boundFBO=c.getBoundFramebufferObject();d=Math.round(1*d);f=Math.round(1*
f);this._hlRenderer.setup(c,d,f);this._hlSurfaces.setup(c,d,f)};a.draw=function({context:c}){const d=c.getBoundFramebufferObject();c.setViewport(0,0,1*this._adjustedWidth,1*this._adjustedHeight);c.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);c.setStencilTestEnabled(!1);c.setClearColor(0,0,0,0);c.clear(c.gl.COLOR_BUFFER_BIT);this._blitRenderer.render(c,d.colorTexture,g.TextureSamplingMode.NEAREST,1);c.setStencilTestEnabled(!1);c.setBlendingEnabled(!1);c.setColorMask(!1,!1,!1,!0);c.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);
c.setClearColor(0,0,0,0);c.clear(c.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(c,this._hlSurfaces.sharedBlur1Tex);c.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);c.setClearColor(0,0,0,0);c.clear(c.gl.COLOR_BUFFER_BIT);this._hlRenderer.finalBlur(c,this._hlSurfaces.sharedBlur2Tex);c.bindFramebuffer(this._boundFBO);c.setBlendingEnabled(!0);c.setColorMask(!0,!0,!0,!0);c.setViewport(0,0,this._width,this._height);this._hlRenderer.renderHighlight(c,this._hlSurfaces.sharedBlur1Tex,this._hlGradient);
this._boundFBO=null};a.setHighlightOptions=function(c){this._hlGradient.setHighlightOptions(c)};return b}(r.Effect)})},"esri/views/2d/engine/webgl/effects/highlight/HighlightGradient":function(){define(["../../../../../../core/Logger","../../definitions","./parameters","../../../../../webgl/enums","../../../../../webgl/Texture"],function(u,n,h,r,v){function z(e,b){b.fillColor[0]=e.color.r/255;b.fillColor[1]=e.color.g/255;b.fillColor[2]=e.color.b/255;b.fillColor[3]=e.color.a;e.haloColor?(b.outlineColor[0]=
e.haloColor.r/255,b.outlineColor[1]=e.haloColor.g/255,b.outlineColor[2]=e.haloColor.b/255,b.outlineColor[3]=e.haloColor.a):(b.outlineColor[0]=b.fillColor[0],b.outlineColor[1]=b.fillColor[1],b.outlineColor[2]=b.fillColor[2],b.outlineColor[3]=b.fillColor[3]);b.fillColor[3]*=e.fillOpacity;b.outlineColor[3]*=e.haloOpacity;b.fillColor[0]*=b.fillColor[3];b.fillColor[1]*=b.fillColor[3];b.fillColor[2]*=b.fillColor[3];b.outlineColor[0]*=b.outlineColor[3];b.outlineColor[1]*=b.outlineColor[3];b.outlineColor[2]*=
b.outlineColor[3];b.outlineWidth=h.HIGHLIGHT_SIZING.outlineWidth;b.outerHaloWidth=h.HIGHLIGHT_SIZING.outerHaloWidth;b.innerHaloWidth=h.HIGHLIGHT_SIZING.innerHaloWidth;b.outlinePosition=h.HIGHLIGHT_SIZING.outlinePosition}const p=u.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient"),g=[0,0,0,0];return function(){function e(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:h.HIGHLIGHT_SIZING.outlinePosition,outlineWidth:h.HIGHLIGHT_SIZING.outlineWidth,
innerHaloWidth:h.HIGHLIGHT_SIZING.innerHaloWidth,outerHaloWidth:h.HIGHLIGHT_SIZING.outerHaloWidth};this.shadeTexChanged=!0;this.texelData=new Uint8Array(4*h.SHADE_TEXTURE_SIZE);this.minMaxDistance=[0,0]}var b=e.prototype;b.setHighlightOptions=function(a){function c(w,A,x){t[0]=(1-x)*w[0]+x*A[0];t[1]=(1-x)*w[1]+x*A[1];t[2]=(1-x)*w[2]+x*A[2];t[3]=(1-x)*w[3]+x*A[3]}const d=this._convertedHighlightOptions;z(a,d);a=d.outlinePosition-d.outlineWidth/2-d.outerHaloWidth;const f=d.outlinePosition-d.outlineWidth/
2,l=d.outlinePosition+d.outlineWidth/2,m=d.outlinePosition+d.outlineWidth/2+d.innerHaloWidth;var k=Math.sqrt(Math.PI/2)*h.SIGMA,q=Math.abs(a)>k?Math.round(10*(Math.abs(a)-k))/10:0;k=Math.abs(m)>k?Math.round(10*(Math.abs(m)-k))/10:0;q&&!k?p.error("The outer rim of the highlight is "+q+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!q&&k?p.error("The inner rim of the highlight is "+k+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):
q&&k&&p.error("The highlight is "+Math.max(q,k)+"px away from the edge of the feature; consider reducing some width values.");const t=[void 0,void 0,void 0,void 0];({texelData:k}=this);for(let w=0;w<h.SHADE_TEXTURE_SIZE;++w)q=a+w/(h.SHADE_TEXTURE_SIZE-1)*(m-a),q<a?(t[4*w]=0,t[4*w+1]=0,t[4*w+2]=0,t[4*w+3]=0):q<f?c(g,d.outlineColor,(q-a)/(f-a)):q<l?[t[0],t[1],t[2],t[3]]=d.outlineColor:q<m?c(d.outlineColor,d.fillColor,(q-l)/(m-l)):[t[4*w],t[4*w+1],t[4*w+2],t[4*w+3]]=d.fillColor,k[4*w]=255*t[0],k[4*w+
1]=255*t[1],k[4*w+2]=255*t[2],k[4*w+3]=255*t[3];this.minMaxDistance[0]=a;this.minMaxDistance[1]=m;this.shadeTexChanged=!0};b.applyHighlightOptions=function(a,c){this.shadeTex||(this.shadeTex=new v.Texture(a,{target:r.TextureType.TEXTURE_2D,pixelFormat:r.PixelFormat.RGBA,dataType:r.PixelType.UNSIGNED_BYTE,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,width:h.SHADE_TEXTURE_SIZE,height:1,samplingMode:r.TextureSamplingMode.LINEAR}));this.shadeTexChanged&&(this.shadeTex.updateData(0,0,0,h.SHADE_TEXTURE_SIZE,
1,this.texelData),this.shadeTexChanged=!1);a.bindTexture(this.shadeTex,n.TEXTURE_BINDING_HIGHLIGHT_1);c.setUniform2fv("u_minMaxDistance",this.minMaxDistance)};b.destroy=function(){this.shadeTex&&(this.shadeTex.dispose(),this.shadeTex=null)};return e}()})},"esri/views/2d/engine/webgl/effects/highlight/parameters":function(){define(["exports"],function(u){u.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1];u.HIGHLIGHT_SIZING={outlineWidth:1.3,outerHaloWidth:.4,innerHaloWidth:.4,
outlinePosition:0};u.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.SHADE_TEXTURE_SIZE=256;u.SIGMA=1;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/highlight/HighlightRenderer":function(){define("../../definitions ./parameters ../../shaders/HighlightPrograms ../../../../../webgl/BufferObject ../../../../../webgl/enums ../../../../../webgl/ProgramTemplate ../../../../../webgl/VertexArrayObject ../../../../../webgl/VertexElementDescriptor".split(" "),
function(u,n,h,r,v,z,p,g){return function(){function e(){this._height=this._width=void 0;this._resources=null}var b=e.prototype;b.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources=null)};b.preBlur=function(a,c){a.bindTexture(c,u.TEXTURE_BINDING_HIGHLIGHT_0);a.useProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",
[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",n.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX);a.bindVAO(this._resources.quadVAO);a.drawArrays(v.PrimitiveType.TRIANGLE_STRIP,0,4);a.bindVAO()};b.finalBlur=function(a,c){a.bindTexture(c,u.TEXTURE_BINDING_HIGHLIGHT_0);a.useProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",n.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX);
a.bindVAO(this._resources.quadVAO);a.drawArrays(v.PrimitiveType.TRIANGLE_STRIP,0,4);a.bindVAO()};b.renderHighlight=function(a,c,d){a.bindTexture(c,u.TEXTURE_BINDING_HIGHLIGHT_0);a.useProgram(this._resources.highlightProgram);d.applyHighlightOptions(a,this._resources.highlightProgram);a.bindVAO(this._resources.quadVAO);a.setBlendingEnabled(!0);a.setBlendFunction(v.BlendFactor.ONE,v.BlendFactor.ONE_MINUS_SRC_ALPHA);a.drawArrays(v.PrimitiveType.TRIANGLE_STRIP,0,4);a.bindVAO()};b._initialize=function(a,
c,d){this._width=c;this._height=d;c=r.BufferObject.createVertex(a,v.Usage.STATIC_DRAW,(new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1])).buffer);d=new p.VertexArrayObject(a,new Map([["a_position",0],["a_texcoord",1]]),{geometry:[new g.VertexElementDescriptor("a_position",2,v.DataType.BYTE,0,4),new g.VertexElementDescriptor("a_texcoord",2,v.DataType.UNSIGNED_BYTE,2,4)]},{geometry:c});const f=z.createProgram(a,h.highlight),l=z.createProgram(a,h.blur);a.useProgram(f);f.setUniform1i("u_texture",u.TEXTURE_BINDING_HIGHLIGHT_0);
f.setUniform1i("u_shade",u.TEXTURE_BINDING_HIGHLIGHT_1);f.setUniform1f("u_sigma",n.SIGMA);a.useProgram(l);l.setUniform1i("u_texture",u.TEXTURE_BINDING_HIGHLIGHT_0);l.setUniform1f("u_sigma",n.SIGMA);this._resources={quadGeometry:c,quadVAO:d,highlightProgram:f,blurProgram:l}};b.setup=function(a,c,d){this._resources?(this._width=c,this._height=d):this._initialize(a,c,d)};return e}()})},"esri/views/2d/engine/webgl/shaders/HighlightPrograms":function(){define(["exports","./sources/resolver"],function(u,
n){const h={shaders:{vertexShader:n.resolveIncludes("highlight/textured.vert"),fragmentShader:n.resolveIncludes("highlight/highlight.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])};n={shaders:{vertexShader:n.resolveIncludes("highlight/textured.vert"),fragmentShader:n.resolveIncludes("highlight/blur.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])};u.blur=n;u.highlight=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/highlight/HighlightSurfaces":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../webgl/enums","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(u,n,h,r){function v(z,p,g){p=new r.Texture(z,{target:n.TextureType.TEXTURE_2D,pixelFormat:n.PixelFormat.RGBA,dataType:n.PixelType.UNSIGNED_BYTE,wrapMode:n.TextureWrapMode.CLAMP_TO_EDGE,width:p,height:g,samplingMode:n.TextureSamplingMode.LINEAR});z=new h.FramebufferObject(z,{colorTarget:n.TargetType.TEXTURE,depthStencilTarget:n.DepthStencilTargetType.STENCIL_RENDER_BUFFER},p);return[p,z]}
return function(){function z(){this._height=this._width=void 0;this._resources=null}var p=z.prototype;p.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};p._initialize=function(g,e,b){this._width=e;this._height=b;const [a,c]=v(g,e,b),[d,f]=v(g,e,b);this._resources={sharedBlur1Tex:a,sharedBlur1Fbo:c,sharedBlur2Tex:d,sharedBlur2Fbo:f}};
p.setup=function(g,e,b){!this._resources||this._width===e&&this._height===b||this.dispose();this._resources||this._initialize(g,e,b)};u._createClass(z,[{key:"sharedBlur1Tex",get:function(){return this._resources.sharedBlur1Tex}},{key:"sharedBlur1Fbo",get:function(){return this._resources.sharedBlur1Fbo}},{key:"sharedBlur2Tex",get:function(){return this._resources.sharedBlur2Tex}},{key:"sharedBlur2Fbo",get:function(){return this._resources.sharedBlur2Fbo}}]);return z}()})},"esri/views/2d/engine/webgl/effects/HittestEffect":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../definitions ./Effect ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z){v=function(p){function g(){var b=p.apply(this,arguments)||this;b.name=b.constructor.name;b.defines=["hittest"];return b}n._inheritsLoose(g,p);var e=g.prototype;e.dispose=function(){h.isSome(this._fbo)&&this._fbo.dispose()};e.createOptions=function({pixelRatio:b},a,c=r.HITTEST_RADIUS){if(!a.length)return null;a=a.shift();const d=a.point.x,f=a.point.y;this._outstanding=a;return{type:"hittest",distance:c*b,position:[d,f]}};e.bind=function(b){const {context:a,attributeView:c}=b;
c.size&&(b=c.getBlock(r.ATTRIBUTE_DATA_GPGPU),h.isNone(b)||(b=b.getFBO(a),a.setViewport(0,0,c.size,c.size),a.bindFramebuffer(b),a.setColorMask(!0,!0,!0,!0),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.DEPTH_BUFFER_BIT)))};e.unbind=function(b){};e.draw=function(b){const {context:a,attributeView:c}=b;var d=c.getBlock(r.ATTRIBUTE_DATA_GPGPU);if(!h.isNone(this._outstanding))if(b=this._outstanding.resolver,h.isNone(d))b.resolve([]),this._outstanding=null;else{var f=d.getFBO(a);d=new Uint8Array(f.width*
f.height*4);f.readPixels(0,0,f.width,f.height,z.PixelFormat.RGBA,z.PixelType.UNSIGNED_BYTE,d);f=[];for(let l=0;l<d.length;l+=4){const m=d[l+3];d[l]&&f.push({id:l/4,directHits:m})}this._outstanding=null;f.sort((l,m)=>m.directHits===l.directHits?m.id-l.id:m.directHits-l.directHits);b.resolve(f.map(l=>l.id))}};return g}(v.Effect);u.HittestEffect=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/HittestEffectVTL":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../definitions ./Effect ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z){v=function(p){function g(){var b=p.apply(this,arguments)||this;b.name=b.constructor.name;b.defines=["id"];b._lastSize=0;return b}n._inheritsLoose(g,p);var e=g.prototype;e.dispose=function(){h.isSome(this._fbo)&&this._fbo.dispose()};e.bind=function({context:b,painter:a}){const {width:c,height:d}=b.getViewport();this._boundFBO=b.getBoundFramebufferObject();a=a.getFbos(c,d).effect0;b.bindFramebuffer(a);b.setColorMask(!0,!0,!0,!0);b.setClearColor(0,0,0,0);b.clear(b.gl.COLOR_BUFFER_BIT)};
e.unbind=function({context:b}){b.bindFramebuffer(this._boundFBO);this._boundFBO=null};e.draw=function({context:b,state:a,pixelRatio:c},d,f=2*r.HITTEST_RADIUS){const l=b.getBoundFramebufferObject(),m=a.size[1]*c,k=Math.round(f*c),q=k/2,t=k/2;this._ensureBuffer(k);d.forEach((w,A)=>{var x=new Map;l.readPixels(Math.floor(A.x*c-k/2),Math.floor(m-A.y*c-k/2),k,k,z.PixelFormat.RGBA,z.PixelType.UNSIGNED_BYTE,this._buf);for(let C=0;C<this._buf32.length;C++){const D=this._buf32[C];if(4294967295!==D&&0!==D){var y=
C%k,B=k-Math.floor(C/k);y=(q-y)*(q-y)+(t-B)*(t-B);B=x.has(D)?x.get(D):4294967295;x.set(D,Math.min(y,B))}}x=Array.from(x).sort((C,D)=>C[1]-D[1]).map(C=>C[0]);w.resolve(x);d.delete(A)})};e._ensureBuffer=function(b){this._lastSize!==b&&(this._lastSize=b,this._buf=new Uint8Array(4*b*b),this._buf32=new Uint32Array(this._buf.buffer))};return g}(v.Effect);u.HittestEffectVTL=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/post-processing/EffectManager":function(){define("exports ./Bloom ./Blur ./Colorize ./DropShadow ./Opacity".split(" "),
function(u,n,h,r,v,z){const p={colorize:()=>new r.Colorize,blur:()=>new h.Blur,bloom:()=>new n.Bloom,opacity:()=>new z.Opacity,"drop-shadow":()=>new v.DropShadow};let g=function(){function e(){this._effectMap=new Map}var b=e.prototype;b.dispose=function(){this._effectMap.forEach(a=>a.dispose());this._effectMap.clear()};b.getPostProcessingEffects=function(a){if(!a||0===a.length)return[];const c=[];for(const d of a){a:switch(a=d.type,a){case "bloom":case "blur":case "opacity":case "drop-shadow":break a;
default:a="colorize"}let f=this._effectMap.get(a);f||(f=p[a](),this._effectMap.set(a,f));c.push({postProcessingEffect:f,effect:d})}return c};return e}();u.EffectManager=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/post-processing/Bloom":function(){define(["exports","../../VertexStream","../../../../../webgl/enums","../../../../../webgl/FramebufferObject"],function(u,n,h,r){const v=[1,0],z=[0,1],p=[1,.8,.6,.4,.2],
g=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];let e=function(){function b(){this._compositeFBO=this._intensityFBO=null;this._mipsFBOs=Array(5);this._nMips=5;this._kernelSizeArray=[3,5,7,9,11];this._size=[0,0];this._programDesc={luminosityHighPass:{vsPath:"post-processing/pp",fsPath:"post-processing/bloom/luminosityHighPass",attributes:new Map([["a_position",0]])},gaussianBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/bloom/gaussianBlur",attributes:new Map([["a_position",0]])},composite:{vsPath:"post-processing/pp",
fsPath:"post-processing/bloom/composite",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",attributes:new Map([["a_position",0]])}}}var a=b.prototype;a.dispose=function(){this._quad&&(this._quad.dispose(),this._quad=null);this._intensityFBO&&(this._intensityFBO.dispose(),this._intensityFBO=null);this._compositeFBO&&(this._compositeFBO.dispose(),this._compositeFBO=null);if(this._mipsFBOs){for(let c=0;c<this._nMips;c++)this._mipsFBOs[c]&&(this._mipsFBOs[c].horizontal.dispose(),
this._mipsFBOs[c].vertical.dispose());this._mipsFBOs=null}};a.draw=function(c,d,f){const {width:l,height:m}=d,{context:k,painter:q}=c,{materialManager:t}=q;var w=k.gl;const A=this._programDesc,{strength:x,radius:y,threshold:B}=f;this._quad||(this._quad=new n(k,[-1,-1,1,-1,-1,1,1,1]));this._createOrResizeResources(c,l,m);k.setStencilTestEnabled(!1);k.setBlendingEnabled(!0);k.setBlendFunction(h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA);k.setStencilWriteMask(0);c=this._quad;c.bind();k.bindFramebuffer(this._intensityFBO);
f=t.getProgram(A.luminosityHighPass);k.useProgram(f);k.bindTexture(d.colorTexture,0);f.setUniform1i("u_texture",0);f.setUniform3fv("u_defaultColor",[0,0,0]);f.setUniform1f("u_defaultOpacity",0);f.setUniform1f("u_luminosityThreshold",B);f.setUniform1f("u_smoothWidth",.01);f=[Math.round(l/2),Math.round(m/2)];k.setViewport(0,0,f[0],f[1]);k.setClearColor(0,0,0,0);k.clear(w.COLOR_BUFFER_BIT);c.draw();k.setBlendingEnabled(!1);w=this._intensityFBO.colorTexture;for(let C=0;C<this._nMips;C++){const D=t.getProgram(A.gaussianBlur,
[{name:"radius",value:this._kernelSizeArray[C]}]);k.useProgram(D);k.bindTexture(w,C+1);D.setUniform1i("u_colorTexture",C+1);D.setUniform2fv("u_texSize",f);D.setUniform2fv("u_direction",v);k.setViewport(0,0,f[0],f[1]);const F=this._mipsFBOs[C];k.bindFramebuffer(F.horizontal);c.draw();w=F.horizontal.colorTexture;k.bindFramebuffer(F.vertical);k.bindTexture(w,C+1);D.setUniform2fv("u_direction",z);c.draw();w=F.vertical.colorTexture;f[0]=Math.round(f[0]/2);f[1]=Math.round(f[1]/2)}k.setViewport(0,0,l,m);
f=t.getProgram(A.composite,[{name:"nummips",value:5}]);k.bindFramebuffer(this._compositeFBO);k.useProgram(f);f.setUniform1f("u_bloomStrength",x);f.setUniform1f("u_bloomRadius",y);f.setUniform1fv("u_bloomFactors",p);f.setUniform3fv("u_bloomTintColors",g);k.bindTexture(this._mipsFBOs[0].vertical.colorTexture,1);f.setUniform1i("u_blurTexture1",1);k.bindTexture(this._mipsFBOs[1].vertical.colorTexture,2);f.setUniform1i("u_blurTexture2",2);k.bindTexture(this._mipsFBOs[2].vertical.colorTexture,3);f.setUniform1i("u_blurTexture3",
3);k.bindTexture(this._mipsFBOs[3].vertical.colorTexture,4);f.setUniform1i("u_blurTexture4",4);k.bindTexture(this._mipsFBOs[4].vertical.colorTexture,5);f.setUniform1i("u_blurTexture5",5);c.draw();k.bindFramebuffer(d);k.setBlendingEnabled(!0);d=t.getProgram(A.blit);k.useProgram(d);k.bindTexture(this._compositeFBO.colorTexture,6);d.setUniform1i("u_texture",6);k.setBlendFunction(h.BlendFactor.ONE,h.BlendFactor.ONE);c.draw();c.unbind();k.setBlendFunction(h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA);
k.setStencilTestEnabled(!0)};a._createOrResizeResources=function(c,d,f){({context:c}=c);if(!this._compositeFBO||this._size[0]!==d||this._size[1]!==f){this._size[0]=d;this._size[1]=f;var l=[Math.round(d/2),Math.round(f/2)];this._compositeFBO?this._compositeFBO.resize(d,f):this._compositeFBO=new r.FramebufferObject(c,{colorTarget:h.TargetType.TEXTURE,depthStencilTarget:h.DepthStencilTargetType.NONE,width:d,height:f});this._intensityFBO?this._intensityFBO.resize(l[0],l[1]):this._intensityFBO=new r.FramebufferObject(c,
{colorTarget:h.TargetType.TEXTURE,depthStencilTarget:h.DepthStencilTargetType.NONE,width:l[0],height:l[1]},{target:h.TextureType.TEXTURE_2D,pixelFormat:h.PixelFormat.RGBA,internalFormat:h.PixelFormat.RGBA,dataType:h.PixelType.UNSIGNED_BYTE,wrapMode:h.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:h.TextureSamplingMode.LINEAR,flipped:!1,width:l[0],height:l[1]});for(d=0;d<this._nMips;d++)this._mipsFBOs[d]?(this._mipsFBOs[d].horizontal.resize(l[0],l[1]),this._mipsFBOs[d].vertical.resize(l[0],l[1])):this._mipsFBOs[d]=
{horizontal:new r.FramebufferObject(c,{colorTarget:h.TargetType.TEXTURE,depthStencilTarget:h.DepthStencilTargetType.NONE,width:l[0],height:l[1]},{target:h.TextureType.TEXTURE_2D,pixelFormat:h.PixelFormat.RGBA,internalFormat:h.PixelFormat.RGBA,dataType:h.PixelType.UNSIGNED_BYTE,wrapMode:h.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:h.TextureSamplingMode.LINEAR,flipped:!1,width:l[0],height:l[1]}),vertical:new r.FramebufferObject(c,{colorTarget:h.TargetType.TEXTURE,depthStencilTarget:h.DepthStencilTargetType.NONE,
width:l[0],height:l[1]},{target:h.TextureType.TEXTURE_2D,pixelFormat:h.PixelFormat.RGBA,internalFormat:h.PixelFormat.RGBA,dataType:h.PixelType.UNSIGNED_BYTE,wrapMode:h.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:h.TextureSamplingMode.LINEAR,flipped:!1,width:l[0],height:l[1]})},l[0]=Math.round(l[0]/2),l[1]=Math.round(l[1]/2)}};return b}();u.Bloom=e;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/post-processing/Blur":function(){define(["exports",
"../../VertexStream","../../../../../webgl/enums","../../../../../webgl/FramebufferObject"],function(u,n,h,r){const v=[1,0],z=[0,1];let p=function(){function g(){this._blurFBO=null;this._size=[0,0];this._programDesc={gaussianBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/gaussianBlur",attributes:new Map([["a_position",0]])},radialBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/radial-blur",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",
attributes:new Map([["a_position",0]])}}}var e=g.prototype;e.dispose=function(){this._blurFBO&&(this._blurFBO.dispose(),this._blurFBO=null)};e.draw=function(b,a,c){const {context:d}=b,{type:f,radius:l}=c;0!==l&&(this._createOrResizeResources(b),this._quad||(this._quad=new n(d,[-1,-1,1,-1,-1,1,1,1])),c=this._quad,c.bind(),"blur"===f?this._gaussianBlur(b,a,l):this._radialBlur(b,a),c.unbind())};e._gaussianBlur=function(b,a,c){const {context:d,state:f,painter:l,pixelRatio:m}=b;var {size:k}=f,{materialManager:q}=
l;b=this._quad;k=[Math.round(m*k[0]),Math.round(m*k[1])];const t=this._blurFBO;q=q.getProgram(this._programDesc.gaussianBlur,[{name:"radius",value:Math.ceil(c)}]);d.useProgram(q);d.setBlendingEnabled(!1);d.bindFramebuffer(t);d.bindTexture(a.colorTexture,4);q.setUniform1i("u_colorTexture",4);q.setUniform2fv("u_texSize",k);q.setUniform2fv("u_direction",v);q.setUniform1f("u_sigma",c);b.draw();d.bindFramebuffer(a);d.setStencilWriteMask(0);d.setStencilTestEnabled(!1);d.setDepthWriteEnabled(!1);d.setDepthTestEnabled(!1);
d.bindTexture(t.colorTexture,5);q.setUniform1i("u_colorTexture",5);q.setUniform2fv("u_direction",z);b.draw();d.setBlendingEnabled(!0);d.setBlendFunction(h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA);d.setStencilTestEnabled(!0)};e._radialBlur=function(b,a){const {context:c,painter:d}=b,{materialManager:f}=d,l=this._programDesc;b=this._quad;const m=this._blurFBO;c.bindFramebuffer(m);const k=f.getProgram(l.radialBlur);c.useProgram(k);c.setBlendingEnabled(!1);c.bindTexture(a.colorTexture,4);k.setUniform1i("u_colorTexture",
4);b.draw();c.bindFramebuffer(a);c.setStencilWriteMask(0);c.setStencilTestEnabled(!1);c.setDepthWriteEnabled(!1);c.setDepthTestEnabled(!1);c.setBlendingEnabled(!0);a=f.getProgram(l.blit);c.useProgram(a);c.bindTexture(m.colorTexture,5);a.setUniform1i("u_texture",5);c.setBlendFunction(h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA);b.draw()};e._createOrResizeResources=function(b){const {context:a,state:c,pixelRatio:d}=b;var {size:f}=c;b=Math.round(d*f[0]);f=Math.round(d*f[1]);this._blurFBO&&this._size[0]===
b&&this._size[1]===f||(this._size[0]=b,this._size[1]=f,this._blurFBO?this._blurFBO.resize(b,f):this._blurFBO=new r.FramebufferObject(a,{colorTarget:h.TargetType.TEXTURE,depthStencilTarget:h.DepthStencilTargetType.NONE,width:b,height:f},{target:h.TextureType.TEXTURE_2D,pixelFormat:h.PixelFormat.RGBA,internalFormat:h.PixelFormat.RGBA,dataType:h.PixelType.UNSIGNED_BYTE,wrapMode:h.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:h.TextureSamplingMode.LINEAR,flipped:!1,width:b,height:f}))};return g}();u.Blur=
p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/post-processing/Colorize":function(){define(["exports","../../VertexStream","../../../../../webgl/enums","../../../../../webgl/Texture"],function(u,n,h,r){let v=function(){function z(){this._size=[0,0];this._programDesc={vsPath:"post-processing/pp",fsPath:"post-processing/filterEffect",attributes:new Map([["a_position",0]])}}var p=z.prototype;p.dispose=function(){this._layerFBOTexture&&
(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)};p.draw=function(g,e,b){const {width:a,height:c}=e;this._createOrResizeResources(g,a,c);const {context:d,painter:f}=g,{materialManager:l}=f,m=this._programDesc;g=this._quad;b=b.colorMatrix;g.bind();const k=this._layerFBOTexture;d.bindFramebuffer(e);e.copyToTexture(0,0,a,c,0,0,k);d.setBlendingEnabled(!1);d.setStencilTestEnabled(!1);e=l.getProgram(m);d.useProgram(e);d.bindTexture(k,2);e.setUniformMatrix4fv("u_coefficients",b);e.setUniform1i("u_colorTexture",
2);g.draw();d.setBlendingEnabled(!0);d.setBlendFunction(h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA);d.setStencilTestEnabled(!0);g.unbind()};p._createOrResizeResources=function(g,e,b){({context:g}=g);this._layerFBOTexture&&this._size[0]===e&&this._size[1]===b||(this._size[0]=e,this._size[1]=b,this._layerFBOTexture?this._layerFBOTexture.resize(e,b):this._layerFBOTexture=new r.Texture(g,{target:h.TextureType.TEXTURE_2D,pixelFormat:h.PixelFormat.RGBA,internalFormat:h.PixelFormat.RGBA,dataType:h.PixelType.UNSIGNED_BYTE,
wrapMode:h.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:h.TextureSamplingMode.LINEAR,flipped:!1,width:e,height:b}),this._quad||(this._quad=new n(g,[-1,-1,1,-1,-1,1,1,1])))};return z}();u.Colorize=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/post-processing/DropShadow":function(){define("exports ../../../../../../core/screenUtils ../../VertexStream ../../../../../webgl/enums ../../../../../webgl/FramebufferObject ../../../../../webgl/Texture".split(" "),
function(u,n,h,r,v,z){const p=[1,0],g=[0,1];let e=function(){function b(){this._verticalBlurFBO=this._horizontalBlurFBO=null;this._size=[0,0];this._programDesc={blur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/gaussianBlur",attributes:new Map([["a_position",0]])},composite:{vsPath:"post-processing/pp",fsPath:"post-processing/drop-shadow/composite",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",attributes:new Map([["a_position",
0]])}}}var a=b.prototype;a.dispose=function(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null);this._horizontalBlurFBO&&(this._horizontalBlurFBO.dispose(),this._horizontalBlurFBO=null);this._verticalBlurFBO&&(this._verticalBlurFBO.dispose(),this._verticalBlurFBO=null)};a.draw=function(c,d,f){const {context:l,state:m,painter:k}=c,{materialManager:q}=k,t=this._programDesc,w=d.width,A=d.height,x=[Math.round(w/2),Math.round(A/2)],{blurRadius:y,offsetX:B,offsetY:C,color:D}=
f;f=[n.pt2px(B/2),n.pt2px(C/2)];this._createOrResizeResources(c,w,A,x);const F=this._horizontalBlurFBO;c=this._verticalBlurFBO;l.setStencilWriteMask(0);l.setStencilTestEnabled(!1);l.setDepthWriteEnabled(!1);l.setDepthTestEnabled(!1);const E=this._layerFBOTexture;d.copyToTexture(0,0,w,A,0,0,E);this._quad||(this._quad=new h(l,[-1,-1,1,-1,-1,1,1,1]));l.setViewport(0,0,x[0],x[1]);const G=this._quad;G.bind();l.setBlendingEnabled(!1);const O=q.getProgram(t.blur,[{name:"radius",value:Math.ceil(y)}]);l.useProgram(O);
l.bindFramebuffer(F);l.bindTexture(d.colorTexture,4);O.setUniform1i("u_colorTexture",4);O.setUniform2fv("u_texSize",x);O.setUniform2fv("u_direction",p);O.setUniform1f("u_sigma",y);G.draw();l.bindFramebuffer(c);l.bindTexture(F.colorTexture,5);O.setUniform1i("u_colorTexture",5);O.setUniform2fv("u_direction",g);G.draw();l.bindFramebuffer(d);l.setViewport(0,0,w,A);d=q.getProgram(t.composite);l.useProgram(d);l.bindTexture(c.colorTexture,2);d.setUniform1i("u_blurTexture",2);l.bindTexture(E,3);d.setUniform1i("u_layerFBOTexture",
3);d.setUniform4fv("u_shadowColor",[D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3]]);d.setUniformMatrix3fv("u_displayViewMat3",m.displayMat3);d.setUniform2fv("u_shadowOffset",f);G.draw();l.setBlendingEnabled(!0);l.setStencilTestEnabled(!0);l.setBlendFunction(r.BlendFactor.ONE,r.BlendFactor.ONE_MINUS_SRC_ALPHA);G.unbind()};a._createOrResizeResources=function(c,d,f,l){({context:c}=c);this._horizontalBlurFBO&&this._size[0]===d&&this._size[1]===f||(this._size[0]=d,this._size[1]=f,this._horizontalBlurFBO?
this._horizontalBlurFBO.resize(l[0],l[1]):this._horizontalBlurFBO=new v.FramebufferObject(c,{colorTarget:r.TargetType.TEXTURE,depthStencilTarget:r.DepthStencilTargetType.NONE,width:l[0],height:l[1]},{target:r.TextureType.TEXTURE_2D,pixelFormat:r.PixelFormat.RGBA,internalFormat:r.PixelFormat.RGBA,dataType:r.PixelType.UNSIGNED_BYTE,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:r.TextureSamplingMode.LINEAR,flipped:!1,width:l[0],height:l[1]}),this._verticalBlurFBO?this._verticalBlurFBO.resize(l[0],
l[1]):this._verticalBlurFBO=new v.FramebufferObject(c,{colorTarget:r.TargetType.TEXTURE,depthStencilTarget:r.DepthStencilTargetType.NONE,width:l[0],height:l[1]},{target:r.TextureType.TEXTURE_2D,pixelFormat:r.PixelFormat.RGBA,internalFormat:r.PixelFormat.RGBA,dataType:r.PixelType.UNSIGNED_BYTE,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:r.TextureSamplingMode.LINEAR,flipped:!1,width:l[0],height:l[1]}),this._layerFBOTexture?this._layerFBOTexture.resize(d,f):this._layerFBOTexture=new z.Texture(c,
{target:r.TextureType.TEXTURE_2D,pixelFormat:r.PixelFormat.RGBA,internalFormat:r.PixelFormat.RGBA,dataType:r.PixelType.UNSIGNED_BYTE,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:r.TextureSamplingMode.LINEAR,flipped:!1,width:d,height:f}))};return b}();u.DropShadow=e;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/effects/post-processing/Opacity":function(){define(["exports","../../../../../webgl/enums","../../../../../webgl/Texture"],
function(u,n,h){let r=function(){function v(){this._size=[0,0]}var z=v.prototype;z.dispose=function(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)};z.draw=function(p,g,e){const {width:b,height:a}=g;this._createOrResizeResources(p,b,a);const {context:c,painter:d}=p;({amount:p}=e);e=c.gl;const f=this._layerFBOTexture;c.bindFramebuffer(g);g.copyToTexture(0,0,b,a,0,0,f);c.setBlendingEnabled(!0);c.setStencilTestEnabled(!1);c.setDepthTestEnabled(!1);c.setClearColor(0,
0,0,0);c.clear(e.COLOR_BUFFER_BIT);d.blitTexture(c,f,n.TextureSamplingMode.NEAREST,p)};z._createOrResizeResources=function(p,g,e){({context:p}=p);this._layerFBOTexture&&this._size[0]===g&&this._size[1]===e||(this._size[0]=g,this._size[1]=e,this._layerFBOTexture?this._layerFBOTexture.resize(g,e):this._layerFBOTexture=new h.Texture(p,{target:n.TextureType.TEXTURE_2D,pixelFormat:n.PixelFormat.RGBA,internalFormat:n.PixelFormat.RGBA,dataType:n.PixelType.UNSIGNED_BYTE,wrapMode:n.TextureWrapMode.CLAMP_TO_EDGE,
samplingMode:n.TextureSamplingMode.NEAREST,flipped:!1,width:g,height:e}))};return v}();u.Opacity=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/painter/RenderPass":function(){define(["../../../../../core/arrayUtils","../../../../../core/maybe","../enums"],function(u,n,h){return function(){function r(z,p){var g;this.brushes=z;this.name=p.name;this.drawPhase=p.drawPhase||h.WGLDrawPhase.MAP;this._targetFn=p.target;this.effects=
p.effects||[];this.enableDefaultDraw=null!=(g=p.enableDefaultDraw)?g:()=>!0}var v=r.prototype;v.render=function(z){const {context:p,profiler:g}=z,e=this._targetFn();var b=this.drawPhase&z.drawPhase;g.recordPassStart(this.name);if(b){this.enableDefaultDraw()&&this._doRender(z,e);g.recordPassEnd();for(const a of this.effects){if(!a.enable())continue;b=a.apply;g.recordPassStart(this.name+"."+b.name);g.recordBrushStart(b.name);const c=a.args&&a.args(),{x:d,y:f,width:l,height:m}=p.getViewport(),k=p.getBoundFramebufferObject();
b.bind(z,c);const q=b.createOptions(z,c),t=z.passOptions;z.passOptions=q;this._doRender(z,e,b.defines);z.passOptions=t;b.draw(z,c);b.unbind(z,c);p.bindFramebuffer(k);p.setViewport(d,f,l,m);g.recordBrushEnd();g.recordPassEnd()}}};v._doRender=function(z,p,g){if(!n.isNone(p))if(u.isArrayLike(p))for(const e of p){if(e.visible)for(const b of this.brushes)z.profiler.recordBrushStart(b.name),b.prepareState(z,e,g),b.draw(z,e,g),z.profiler.recordBrushEnd()}else for(const e of this.brushes)z.profiler.recordBrushStart(e.name),
e.prepareState(z,p,g),e.draw(z,p,g),z.profiler.recordBrushEnd()};return r}()})},"esri/views/2d/engine/webgl/Profiler":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/CircularArray ../../../../core/Evented ../../../../core/has ../../../../core/maybe ../../../webgl/capabilities/DisjointTimerQuery".split(" "),function(u,n,h,r,v,z,p){const g=v("esri-2d-profiler");v=function(){function e(a,c){this._events=new r;this._entries=new Map;this._timings=new h(10);if(g){this._ext=
p.createDisjointTimerQuery(a.gl,{});this._debugOutput=c;var d=a.gl;if(this.enableCommandLogging)for(const f in d)if("function"===typeof d[f]){const l=d[f],m=f.includes("draw");d[f]=(...k)=>{this._events.emit("command",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:f,args:k,isDrawCommand:m});this._currentSummary&&(this._currentSummary.commands++,m&&this._currentSummary.drawCommands++);return l.apply(d,k)}}}}var b=e.prototype;b.recordContainerStart=function(a){g&&
(this._currentContainer=a)};b.recordContainerEnd=function(){g&&(this._currentContainer=null)};b.recordPassStart=function(a){g&&(this._currentPass=a,this._initSummary())};b.recordPassEnd=function(){g&&(this._currentPass=null,this._emitSummary())};b.recordBrushStart=function(a){g&&(this._currentBrush=a)};b.recordBrushEnd=function(){g&&(this._currentBrush=null)};b.recordStart=function(a){if(g&&z.isSome(this._ext)){if(this._entries.has(a)){const m=this._entries.get(a);var c=this._ext.resultAvailable(m.query),
d=this._ext.disjoint();if(c&&!d){c=this._ext.getResult(m.query)/1E6;d=0;if(z.isSome(this._timings.enqueue(c))){d=this._timings.entries;const k=d.length;let q=0;for(var f of d)q+=f;d=q/k}f=c.toFixed(2);c=d?d.toFixed(2):"--";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${a}, ${f} ms (${c} last 10 avg)\n${m.commandsLen} Commands (${m.drawCommands} draw)`),console.log("RenderPass breakdown: "),console.table(m.summaries),console.log("Commands: ",m.commands),console.groupEnd()):console.log(`Frame report for ${a}, ${f} ms (${c} last 10 avg)`);
this._debugOutput.innerHTML=`${f} (${c})`}for(const k of m.handles)k.remove();this._entries.delete(a)}const l={name:a,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(l.handles.push(this._events.on("command",m=>{l.commandsLen++;l.commands.push(m);m.isDrawCommand&&l.drawCommands++})),l.handles.push(this._events.on("summary",m=>{l.summaries.push(m)})));this._ext.beginTimeElapsed(l.query);this._entries.set(a,l)}};b.recordEnd=
function(a){g&&z.isSome(this._ext)&&this._entries.has(a)&&this._ext.endTimeElapsed()};b._initSummary=function(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})};b._emitSummary=function(){this.enableCommandLogging&&this._events.emit("summary",this._currentSummary)};n._createClass(e,[{key:"enableCommandLogging",get:function(){return!("object"===typeof g&&g.disableCommands)}}]);return e}();u.Profiler=v;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/CircularArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],function(u,n){return function(){function h(v){this._start=this.size=0;this.maxSize=v;this._buffer=Array(v)}var r=h.prototype;r.enqueue=function(v){if(this.size===this.maxSize){const z=this._buffer[this._start];this._buffer[this._start]=v;this._start=(this._start+1)%this.maxSize;return z}this._buffer[(this._start+this.size++)%this.maxSize]=
v;return null};r.dequeue=function(){if(0===this.size)return null;const v=this._buffer[this._start];this._buffer[this._start]=null;this.size--;this._start=(this._start+1)%this.maxSize;return v};r.peek=function(){return 0===this.size?null:this._buffer[this._start]};r.find=function(v){if(0===this.size)return null;for(const z of this._buffer)if(n.isSome(z)&&v(z))return z;return null};r.clear=function(v){let z=this.dequeue();for(;n.isSome(z);)v&&v(z),z=this.dequeue()};u._createClass(h,[{key:"entries",
get:function(){return this._buffer}}]);return h}()})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["exports","./isWebGL2Context"],function(u,n){let h=function(r,v,z,p,g,e,b,a){this.createQuery=r;this.resultAvailable=v;this.getResult=z;this.disjoint=p;this.beginTimeElapsed=g;this.endTimeElapsed=e;this.createTimestamp=b;this.timestampBits=a};u.DisjointTimerQuery=h;u.createDisjointTimerQuery=function(r,v){if(v.disjointTimerQuery)return null;let z=r.getExtension("EXT_disjoint_timer_query_webgl2");
return z&&n(r)?new h(()=>r.createQuery(),p=>r.getQueryParameter(p,r.QUERY_RESULT_AVAILABLE),p=>r.getQueryParameter(p,r.QUERY_RESULT),()=>r.getParameter(z.GPU_DISJOINT_EXT),p=>r.beginQuery(z.TIME_ELAPSED_EXT,p),()=>r.endQuery(z.TIME_ELAPSED_EXT),p=>z.queryCounterEXT(p,z.TIMESTAMP_EXT),()=>r.getQuery(z.TIMESTAMP_EXT,z.QUERY_COUNTER_BITS_EXT)):(z=r.getExtension("EXT_disjoint_timer_query"))?new h(()=>z.createQueryEXT(),p=>z.getQueryObjectEXT(p,z.QUERY_RESULT_AVAILABLE_EXT),p=>z.getQueryObjectEXT(p,z.QUERY_RESULT_EXT),
()=>r.getParameter(z.GPU_DISJOINT_EXT),p=>z.beginQueryEXT(z.TIME_ELAPSED_EXT,p),()=>z.endQueryEXT(z.TIME_ELAPSED_EXT),p=>z.queryCounterEXT(p,z.TIMESTAMP_EXT),()=>z.getQueryEXT(z.TIMESTAMP_EXT,z.QUERY_COUNTER_BITS_EXT)):null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/RenderingContext":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/time ./checkWebGLError ./context-util ./ContextState ./enums ./InstanceCounter ./ProgramCache ./renderState ./Texture ./Util ./WebGLDriverTest ./capabilities/Capabilities ./capabilities/isWebGL2Context".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){function q(A,x,y,B){x?B!==x&&A.bindBuffer(y,x.glName):A.bindBuffer(y,null);return x}function t(A,x){switch(A){case e.PrimitiveType.POINTS:return 2*x;case e.PrimitiveType.TRIANGLES:return x/3;case e.PrimitiveType.TRIANGLE_STRIP:return x-2;case e.PrimitiveType.TRIANGLE_FAN:return x-2;default:return 0}}let w=function(){function A(y,B){this.gl=y;this.instanceCounter=new b.InstanceCounter;this.programCache=new a.ProgramCache(this);this._state=new g.ContextState;
this._numOfTriangles=this._numOfDrawCalls=0;this.type=k(y)?p.ContextType.WEBGL2:p.ContextType.WEBGL1;this._loadExtensions();this.configure(B)}var x=A.prototype;x.configure=function(y){this._capabilities=new m.Capabilities(this.gl,y);this._parameters=this._loadParameters(y);y=this.gl.getParameter(this.gl.VIEWPORT);this._state=new g.ContextState;this._state.viewport={x:y[0],y:y[1],width:y[2],height:y[3]};this._stateTracker=new c.StateTracker({setBlending:B=>{B?(this.setBlendingEnabled(!0),this.setBlendEquationSeparate(B.opRgb,
B.opAlpha),this.setBlendFunctionSeparate(B.srcRgb,B.dstRgb,B.srcAlpha,B.dstAlpha),B=B.color,this.setBlendColor(B.r,B.g,B.b,B.a)):this.setBlendingEnabled(!1)},setCulling:B=>{B?(this.setFaceCullingEnabled(!0),this.setCullFace(B.face),this.setFrontFace(B.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:B=>{B?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(B.factor,B.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:B=>{B?(this.setDepthTestEnabled(!0),this.setDepthFunction(B.func)):
this.setDepthTestEnabled(!1)},setStencilTest:B=>{if(B){this.setStencilTestEnabled(!0);const C=B.function;this.setStencilFunction(C.func,C.ref,C.mask);B=B.operation;this.setStencilOp(B.fail,B.zFail,B.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:B=>{B?(this.setDepthWriteEnabled(!0),this.setDepthRange(B.zNear,B.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:B=>{B?this.setColorMask(B.r,B.g,B.b,B.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:B=>{B?this.setStencilWriteMask(B.mask):
this.setStencilWriteMask(0)}});this.enforceState();this._driverTest=new l.WebGLDriverTest(this)};x.dispose=function(){this.programCache.dispose();this.bindVAO(null);this.unbindBuffer(e.BufferType.ARRAY_BUFFER);this.unbindBuffer(e.BufferType.ELEMENT_ARRAY_BUFFER);k(this.gl)&&(this.unbindBuffer(e.BufferType.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(e.BufferType.PIXEL_PACK_BUFFER),this.unbindBuffer(e.BufferType.PIXEL_UNPACK_BUFFER),this.unbindBuffer(e.BufferType.COPY_READ_BUFFER),
this.unbindBuffer(e.BufferType.COPY_WRITE_BUFFER));this._state.textureUnitMap.length=0;z.webglDebugEnabled()&&this.instanceCounter.printResourceCount()};x.setPipelineState=function(y){this._stateTracker.setPipeline(y)};x.setBlendingEnabled=function(y){this._state.blend!==y&&(!0===y?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._state.blend=y,this._stateTracker.invalidateBlending())};x.externalProgramUpdate=function(){var y;null==(y=this._state.program)?void 0:y.stop();this._state.program=
null};x.externalTextureUnitUpdate=function(y,B){for(let C=0;C<y.length;++C)this._state.textureUnitMap[y[C]]=null;0<=B&&(this._state.activeTexture=B)};x.externalVertexArrayObjectUpdate=function(){const y=this.capabilities.vao;y&&(y.bindVertexArray(null),this._state.vertexArrayObject=null);this._state.vertexBuffer=null;this._state.indexBuffer=null};x.externalVertexBufferUpdate=function(){this._state.vertexBuffer=null};x.externalIndexBufferUpdate=function(){this._state.indexBuffer=null};x.setBlendColor=
function(y,B,C,D){if(y!==this._state.blendColor.r||B!==this._state.blendColor.g||C!==this._state.blendColor.b||D!==this._state.blendColor.a)this.gl.blendColor(y,B,C,D),this._state.blendColor.r=y,this._state.blendColor.g=B,this._state.blendColor.b=C,this._state.blendColor.a=D,this._stateTracker.invalidateBlending()};x.setBlendFunction=function(y,B){if(y!==this._state.blendFunction.srcRGB||B!==this._state.blendFunction.dstRGB)this.gl.blendFunc(y,B),this._state.blendFunction.srcRGB=y,this._state.blendFunction.srcAlpha=
y,this._state.blendFunction.dstRGB=B,this._state.blendFunction.dstAlpha=B,this._stateTracker.invalidateBlending()};x.setBlendFunctionSeparate=function(y,B,C,D){if(this._state.blendFunction.srcRGB!==y||this._state.blendFunction.srcAlpha!==C||this._state.blendFunction.dstRGB!==B||this._state.blendFunction.dstAlpha!==D)this.gl.blendFuncSeparate(y,B,C,D),this._state.blendFunction.srcRGB=y,this._state.blendFunction.srcAlpha=C,this._state.blendFunction.dstRGB=B,this._state.blendFunction.dstAlpha=D,this._stateTracker.invalidateBlending()};
x.setBlendEquation=function(y){this._state.blendEquation.mode!==y&&(this.gl.blendEquation(y),this._state.blendEquation.mode=y,this._state.blendEquation.modeAlpha=y,this._stateTracker.invalidateBlending())};x.setBlendEquationSeparate=function(y,B){if(this._state.blendEquation.mode!==y||this._state.blendEquation.modeAlpha!==B)this.gl.blendEquationSeparate(y,B),this._state.blendEquation.mode=y,this._state.blendEquation.modeAlpha=B,this._stateTracker.invalidateBlending()};x.setColorMask=function(y,B,
C,D){if(this._state.colorMask.r!==y||this._state.colorMask.g!==B||this._state.colorMask.b!==C||this._state.colorMask.a!==D)this.gl.colorMask(y,B,C,D),this._state.colorMask.r=y,this._state.colorMask.g=B,this._state.colorMask.b=C,this._state.colorMask.a=D,this._stateTracker.invalidateColorWrite()};x.setClearColor=function(y,B,C,D){if(this._state.clearColor.r!==y||this._state.clearColor.g!==B||this._state.clearColor.b!==C||this._state.clearColor.a!==D)this.gl.clearColor(y,B,C,D),this._state.clearColor.r=
y,this._state.clearColor.g=B,this._state.clearColor.b=C,this._state.clearColor.a=D};x.setFaceCullingEnabled=function(y){this._state.faceCulling!==y&&(!0===y?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._state.faceCulling=y,this._stateTracker.invalidateCulling())};x.setPolygonOffsetFillEnabled=function(y){this._state.polygonOffsetFill!==y&&(!0===y?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._state.polygonOffsetFill=y,this._stateTracker.invalidatePolygonOffset())};
x.setPolygonOffset=function(y,B){if(this._state.polygonOffset[0]!==y||this._state.polygonOffset[1]!==B)this._state.polygonOffset[0]=y,this._state.polygonOffset[1]=B,this.gl.polygonOffset(y,B),this._stateTracker.invalidatePolygonOffset()};x.setCullFace=function(y){this._state.cullFace!==y&&(this.gl.cullFace(y),this._state.cullFace=y,this._stateTracker.invalidateCulling())};x.setFrontFace=function(y){this._state.frontFace!==y&&(this.gl.frontFace(y),this._state.frontFace=y,this._stateTracker.invalidateCulling())};
x.setScissorTestEnabled=function(y){this._state.scissorTest!==y&&(!0===y?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._state.scissorTest=y)};x.setScissorRect=function(y,B,C,D){if(this._state.scissorRect.x!==y||this._state.scissorRect.y!==B||this._state.scissorRect.width!==C||this._state.scissorRect.height!==D)this.gl.scissor(y,B,C,D),this._state.scissorRect.x=y,this._state.scissorRect.y=B,this._state.scissorRect.width=C,this._state.scissorRect.height=D};x.setDepthTestEnabled=
function(y){this._state.depthTest!==y&&(!0===y?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._state.depthTest=y,this._stateTracker.invalidateDepthTest())};x.setClearDepth=function(y){this._state.clearDepth!==y&&(this.gl.clearDepth(y),this._state.clearDepth=y)};x.setDepthFunction=function(y){this._state.depthFunction!==y&&(this.gl.depthFunc(y),this._state.depthFunction=y,this._stateTracker.invalidateDepthTest())};x.setDepthWriteEnabled=function(y){this._state.depthWrite!==
y&&(this.gl.depthMask(y),this._state.depthWrite=y,this._stateTracker.invalidateDepthWrite())};x.setDepthRange=function(y,B){if(this._state.depthRange.zNear!==y||this._state.depthRange.zFar!==B)this.gl.depthRange(y,B),this._state.depthRange.zNear=y,this._state.depthRange.zFar=B,this._stateTracker.invalidateDepthWrite()};x.setStencilTestEnabled=function(y){this._state.stencilTest!==y&&(!0===y?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._state.stencilTest=y,this._stateTracker.invalidateStencilTest())};
x.setClearStencil=function(y){y!==this._state.clearStencil&&(this.gl.clearStencil(y),this._state.clearStencil=y)};x.setStencilFunction=function(y,B,C){if(this._state.stencilFunction.func!==y||this._state.stencilFunction.ref!==B||this._state.stencilFunction.mask!==C)this.gl.stencilFunc(y,B,C),this._state.stencilFunction.face=e.Face.FRONT_AND_BACK,this._state.stencilFunction.func=y,this._state.stencilFunction.ref=B,this._state.stencilFunction.mask=C,this._stateTracker.invalidateStencilTest()};x.setStencilFunctionSeparate=
function(y,B,C,D){if(this._state.stencilFunction.face!==y||this._state.stencilFunction.func!==B||this._state.stencilFunction.ref!==C||this._state.stencilFunction.mask!==D)this.gl.stencilFuncSeparate(y,B,C,D),this._state.stencilFunction.face=y,this._state.stencilFunction.func=B,this._state.stencilFunction.ref=C,this._state.stencilFunction.mask=D,this._stateTracker.invalidateStencilTest()};x.setStencilWriteMask=function(y){this._state.stencilWriteMask!==y&&(this.gl.stencilMask(y),this._state.stencilWriteMask=
y,this._stateTracker.invalidateStencilWrite())};x.setStencilOp=function(y,B,C){if(this._state.stencilOperation.face!==e.Face.FRONT_AND_BACK||this._state.stencilOperation.fail!==y||this._state.stencilOperation.zFail!==B||this._state.stencilOperation.zPass!==C)this.gl.stencilOp(y,B,C),this._state.stencilOperation.face=e.Face.FRONT_AND_BACK,this._state.stencilOperation.fail=y,this._state.stencilOperation.zFail=B,this._state.stencilOperation.zPass=C,this._stateTracker.invalidateStencilTest()};x.setStencilOpSeparate=
function(y,B,C,D){if(this._state.stencilOperation.face!==y||this._state.stencilOperation.fail!==B||this._state.stencilOperation.zFail!==C||this._state.stencilOperation.zPass!==D)this.gl.stencilOpSeparate(y,B,C,D),this._state.stencilOperation.face=y,this._state.stencilOperation.fail=B,this._state.stencilOperation.zFail=C,this._state.stencilOperation.zPass=D,this._stateTracker.invalidateStencilTest()};x.setActiveTexture=function(y,B=!1){const C=this._state.activeTexture;0<=y&&(B||y!==this._state.activeTexture)&&
(this.gl.activeTexture(e.BASE_TEXTURE_UNIT+y),this._state.activeTexture=y);return C};x.clear=function(y){y&&this.gl.clear(y)};x.clearSafe=function(y,B=255){y&&(y&e.ClearBufferBit.COLOR_BUFFER_BIT&&this.setColorMask(!0,!0,!0,!0),y&e.ClearBufferBit.DEPTH_BUFFER_BIT&&this.setDepthWriteEnabled(!0),y&e.ClearBufferBit.STENCIL_BUFFER_BIT&&this.setStencilWriteMask(B),this.gl.clear(y))};x.drawArrays=function(y,B,C){z.webglDebugEnabled()&&(this._numOfDrawCalls++,this._numOfTriangles+=t(y,C));this.gl.drawArrays(y,
B,C);z.webglDebugEnabled()&&(y=f.getErrorString(this))&&console.error("drawArrays:",y)};x.drawElements=function(y,B,C,D){z.webglDebugEnabled()&&(this._numOfDrawCalls++,this._numOfTriangles+=t(y,B));this.gl.drawElements(y,B,C,D);if(z.webglDebugEnabled()){const O=f.getErrorString(this);if(O){var F,E=this.getBoundVAO(),G=null==E?void 0:E.indexBuffer;E={indexBuffer:G,vertexBuffers:null==E?void 0:E.vertexBuffers};y={mode:y,count:B,type:C,offset:D};G=null!=(F=h.applySome(G,H=>H.size))?F:0;B=D+B;console.error(`drawElements: ${O}${G<
B?`. Buffer is too small. Attempted to draw index ${B} of ${G}`:""}`,{args:y,vao:E})}}};x.logInfo=function(){z.webglDebugEnabled()&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)};x.resetInfo=function(){z.webglDebugEnabled()&&(this._numOfTriangles=this._numOfDrawCalls=0)};x.setViewport=function(y,B,C,D){C=Math.max(Math.round(C),1);D=Math.max(Math.round(D),1);const F=this._state.viewport;if(F.x!==y||F.y!==B||F.width!==C||F.height!==D)F.x=y,F.y=B,F.width=C,F.height=
D,this.gl.viewport(y,B,C,D)};x.getViewport=function(){return{x:this._state.viewport.x,y:this._state.viewport.y,width:this._state.viewport.width,height:this._state.viewport.height}};x.useProgram=function(y){var B,C;this._state.program!==y&&(null==(B=this._state.program)?void 0:B.stop(),this._state.program=y,this.gl.useProgram(null!=(C=null==y?void 0:y.glName)?C:null))};x.bindTexture=function(y,B,C=!1){(B>=this.parameters.maxTextureImageUnits||0>B)&&console.error("Input texture unit is out of range of available units!");
const D=this._state.textureUnitMap[B];if(h.isNone(y)||null==y.glName)return h.isSome(D)&&(this.setActiveTexture(B,C),this.gl.bindTexture(D.descriptor.target,null)),this._state.textureUnitMap[B]=null,D;if(!C&&D===y)return y.isDirty&&(this.setActiveTexture(B,C),y.applyChanges()),D;this.setActiveTexture(B,C);this.gl.bindTexture(y.descriptor.target,y.glName);y.applyChanges();this._state.textureUnitMap[B]=y;return D};x.unbindTexture=function(y){if(!h.isNone(y))for(let B=0;B<this.parameters.maxTextureImageUnits;B++)this._state.textureUnitMap[B]===
y&&(this.bindTexture(null,B),this._state.textureUnitMap[B]=null)};x.bindFramebuffer=function(y,B=!1){if(B||this._state.readFramebuffer!==y||this._state.drawFramebuffer!==y)h.isNone(y)?(this.gl.bindFramebuffer(e.FramebufferTarget.FRAMEBUFFER,null),this._state.readFramebuffer=null,this._state.drawFramebuffer=null):(y.initializeAndBind(e.FramebufferTarget.FRAMEBUFFER),this._state.readFramebuffer=y,this._state.drawFramebuffer=y)};x.bindFramebufferSeparate=function(y,B,C=!1){const D=B===e.FramebufferTarget.READ_FRAMEBUFFER,
F=D?this._state.readFramebuffer:this._state.drawFramebuffer;if(C||F!==y)h.isNone(y)?this.gl.bindFramebuffer(B,null):y.initializeAndBind(B),D?this._state.readFramebuffer=h.unwrapOr(y,null):this._state.drawFramebuffer=h.unwrapOr(y,null)};x.blitFramebuffer=function(y,B,C=0,D=0,F=y.width,E=y.height,G=0,O=0,H=B.width,K=B.height,P=e.ClearBufferBit.COLOR_BUFFER_BIT,L=e.TextureSamplingMode.NEAREST){this.bindFramebufferSeparate(y,e.FramebufferTarget.READ_FRAMEBUFFER);this.bindFramebufferSeparate(B,e.FramebufferTarget.DRAW_FRAMEBUFFER);
this.gl.blitFramebuffer(C,D,F,E,G,O,H,K,P,L)};x.bindBuffer=function(y,B){if(y){var C;null!=(C=B)?C:B=y.bufferType;switch(B){case e.BufferType.ARRAY_BUFFER:this._state.vertexBuffer=q(this.gl,y,B,this._state.vertexBuffer);break;case e.BufferType.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=q(this.gl,y,B,this._state.indexBuffer);break;case e.BufferType.UNIFORM_BUFFER:this._state.uniformBuffer=q(this.gl,y,B,this._state.uniformBuffer);break;case e.BufferType.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=
q(this.gl,y,B,this._state.pixelPackBuffer);break;case e.BufferType.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=q(this.gl,y,B,this._state.pixelUnpackBuffer);break;case e.BufferType.COPY_READ_BUFFER:this._state.copyReadBuffer=q(this.gl,y,B,this._state.copyReadBuffer);break;case e.BufferType.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=q(this.gl,y,B,this._state.copyWriteBuffer)}}};x.bindRenderbuffer=function(y){const B=this.gl;y||(B.bindRenderbuffer(B.RENDERBUFFER,null),this._state.renderbuffer=
null);this._state.renderbuffer!==y&&(B.bindRenderbuffer(B.RENDERBUFFER,y.glName),this._state.renderbuffer=y)};x._getBufferBinding=function(y,B){if(B>=this.parameters.maxUniformBufferBindings||0>B)return console.error("Uniform buffer binding point is out of range!"),null;y=this._state.uniformBufferBindingPoints;let C=y[B];h.isNone(C)&&(C={buffer:null,offset:0,size:0},y[B]=C);return C};x.bindBufferBase=function(y,B,C){const D=this._getBufferBinding(y,B);h.isNone(D)||D.buffer===C&&0===D.offset&&0===
D.size||(this.gl.bindBufferBase(y,B,C?C.glName:null),D.buffer=C,D.offset=0,D.size=0)};x.bindBufferRange=function(y,B,C,D,F){const E=this._getBufferBinding(y,B);h.isNone(E)||E.buffer===C&&E.offset===D&&E.size===F||(0!==D%this._parameters.uniformBufferOffsetAlignment?console.error("Uniform buffer binding offset is not a multiple of the context offset alignment"):(this.gl.bindBufferRange(y,B,C.glName,D,F),E.buffer=C,E.offset=D,E.size=F))};x.bindUBO=function(y,B,C,D){h.isNone(B)?this.bindBufferBase(e.BufferType.UNIFORM_BUFFER,
y,null):(z.webglDebugEnabled()&&(null!=D?D:B.byteLength)>this._parameters.maxUniformBlockSize&&console.error("Attempting to bind more data than the maximum uniform block size"),B.initialize(),void 0!==C&&void 0!==D?this.bindBufferRange(e.BufferType.UNIFORM_BUFFER,y,B.buffer,C,D):this.bindBufferBase(e.BufferType.UNIFORM_BUFFER,y,B.buffer))};x.unbindUBO=function(y){for(let B=0,C=this._state.uniformBufferBindingPoints.length;B<C;B++){const D=this._state.uniformBufferBindingPoints[B];h.isSome(D)&&D.buffer===
y.buffer&&this.bindBufferBase(e.BufferType.UNIFORM_BUFFER,B,null)}};x.unbindBuffer=function(y){switch(y){case e.BufferType.ARRAY_BUFFER:this._state.vertexBuffer=q(this.gl,null,y,this._state.vertexBuffer);break;case e.BufferType.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=q(this.gl,null,y,this._state.indexBuffer);break;case e.BufferType.UNIFORM_BUFFER:this._state.uniformBuffer=q(this.gl,null,y,this._state.uniformBuffer);break;case e.BufferType.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=q(this.gl,
null,y,this._state.pixelPackBuffer);break;case e.BufferType.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=q(this.gl,null,y,this._state.pixelUnpackBuffer);break;case e.BufferType.COPY_READ_BUFFER:this._state.copyReadBuffer=q(this.gl,null,y,this._state.copyReadBuffer);break;case e.BufferType.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=q(this.gl,null,y,this._state.copyWriteBuffer)}};x.bindVAO=function(y=null){h.isNone(y)?this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=
null):this._state.vertexArrayObject!==y&&(y.bind(),this._state.vertexArrayObject=y)};x.clientWaitAsync=function(){var y=n._asyncToGenerator(function*(B=v.Milliseconds(10)){const C=this.gl,D=C.fenceSync(e.SyncCondition.SYNC_GPU_COMMANDS_COMPLETE,0);this.instanceCounter.increment(e.ResourceType.Sync,D);C.flush();let F;do yield r.after(B),F=C.clientWaitSync(D,0,0);while(F===e.ClientWaitSyncStatus.TIMEOUT_EXPIRED);this.instanceCounter.decrement(e.ResourceType.Sync,D);C.deleteSync(D);if(F===e.ClientWaitSyncStatus.WAIT_FAILED)throw Error("Client wait failed");
});return function(){return y.apply(this,arguments)}}();x.getBoundFramebufferObject=function(y=e.FramebufferTarget.FRAMEBUFFER){return y===e.FramebufferTarget.READ_FRAMEBUFFER?this._state.readFramebuffer:this._state.drawFramebuffer};x.getBoundVAO=function(){return this._state.vertexArrayObject};x.resetState=function(){this.useProgram(null);this.bindVAO(null);this.bindFramebuffer(null,!0);this.unbindBuffer(e.BufferType.ARRAY_BUFFER);this.unbindBuffer(e.BufferType.ELEMENT_ARRAY_BUFFER);k(this.gl)&&
(this.unbindBuffer(e.BufferType.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(e.BufferType.PIXEL_PACK_BUFFER),this.unbindBuffer(e.BufferType.PIXEL_UNPACK_BUFFER),this.unbindBuffer(e.BufferType.COPY_READ_BUFFER),this.unbindBuffer(e.BufferType.COPY_WRITE_BUFFER));for(let y=0;y<this.parameters.maxTextureImageUnits;++y)this.bindTexture(null,y);this.setBlendingEnabled(!1);this.setBlendFunction(e.BlendFactor.ONE,e.BlendFactor.ZERO);this.setBlendEquation(e.BlendOperation.ADD);
this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(e.Face.BACK);this.setFrontFace(e.CullMode.CCW);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(e.CompareFunction.LESS);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(e.CompareFunction.ALWAYS,0,0);this.setStencilOp(e.StencilOperation.KEEP,
e.StencilOperation.KEEP,e.StencilOperation.KEEP);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};x.enforceState=function(){var y,B;const C=this.gl;var D=this.capabilities.vao;D&&D.bindVertexArray(null);for(let H=0;H<this.parameters.maxVertexAttributes;H++)C.disableVertexAttribArray(H);this._state.vertexBuffer?
C.bindBuffer(this._state.vertexBuffer.bufferType,this._state.vertexBuffer.glName):C.bindBuffer(e.BufferType.ARRAY_BUFFER,null);this._state.indexBuffer?C.bindBuffer(this._state.indexBuffer.bufferType,this._state.indexBuffer.glName):C.bindBuffer(e.BufferType.ELEMENT_ARRAY_BUFFER,null);if(k(C)){var F,E;this._state.uniformBuffer?C.bindBuffer(this._state.uniformBuffer.bufferType,this._state.uniformBuffer.glName):C.bindBuffer(e.BufferType.UNIFORM_BUFFER,null);for(var G=0;G<this._parameters.maxUniformBufferBindings;G++){var O=
this._state.uniformBufferBindingPoints[G];if(h.isSome(O)){const {buffer:H,offset:K,size:P}=O;null!==H?0===K&&0===P?C.bindBufferBase(e.BufferType.UNIFORM_BUFFER,G,H.glName):C.bindBufferRange(e.BufferType.UNIFORM_BUFFER,G,H.glName,K,P):C.bindBufferBase(e.BufferType.UNIFORM_BUFFER,G,null)}}this._state.pixelPackBuffer?C.bindBuffer(this._state.pixelPackBuffer.bufferType,this._state.pixelPackBuffer.glName):C.bindBuffer(e.BufferType.PIXEL_PACK_BUFFER,null);this._state.pixelUnpackBuffer?C.bindBuffer(this._state.pixelUnpackBuffer.bufferType,
this._state.pixelUnpackBuffer.glName):C.bindBuffer(e.BufferType.PIXEL_UNPACK_BUFFER,null);this._state.copyReadBuffer?C.bindBuffer(this._state.copyReadBuffer.bufferType,this._state.copyReadBuffer.glName):C.bindBuffer(e.BufferType.COPY_READ_BUFFER,null);this._state.copyWriteBuffer?C.bindBuffer(this._state.copyWriteBuffer.bufferType,this._state.copyWriteBuffer.glName):C.bindBuffer(e.BufferType.COPY_WRITE_BUFFER,null);C.bindFramebuffer(e.FramebufferTarget.READ_FRAMEBUFFER,null);C.readBuffer(C.BACK);this._state.readFramebuffer&&
(C.bindFramebuffer(e.FramebufferTarget.READ_FRAMEBUFFER,this._state.readFramebuffer.glName),C.readBuffer(e.ColorAttachment.COLOR_ATTACHMENT0));C.bindFramebuffer(e.FramebufferTarget.DRAW_FRAMEBUFFER,null!=(F=null==(E=this._state.drawFramebuffer)?void 0:E.glName)?F:null)}else this._state.readFramebuffer=this._state.drawFramebuffer,C.bindFramebuffer(e.FramebufferTarget.FRAMEBUFFER,null!=(G=null==(O=this._state.drawFramebuffer)?void 0:O.glName)?G:null);if(D&&this._state.vertexArrayObject){if(D=this._state.vertexArrayObject)this._state.vertexArrayObject.unbind(),
this._state.vertexArrayObject=null;this.bindVAO(D)}C.useProgram(null!=(y=null==(B=this._state.program)?void 0:B.glName)?y:null);C.blendColor(this._state.blendColor.r,this._state.blendColor.g,this._state.blendColor.b,this._state.blendColor.a);C.bindRenderbuffer(C.RENDERBUFFER,this._state.renderbuffer?this._state.renderbuffer.glName:null);!0===this._state.blend?C.enable(this.gl.BLEND):C.disable(this.gl.BLEND);C.blendEquationSeparate(this._state.blendEquation.mode,this._state.blendEquation.modeAlpha);
C.blendFuncSeparate(this._state.blendFunction.srcRGB,this._state.blendFunction.dstRGB,this._state.blendFunction.srcAlpha,this._state.blendFunction.dstAlpha);C.clearColor(this._state.clearColor.r,this._state.clearColor.g,this._state.clearColor.b,this._state.clearColor.a);C.clearDepth(this._state.clearDepth);C.clearStencil(this._state.clearStencil);C.colorMask(this._state.colorMask.r,this._state.colorMask.g,this._state.colorMask.b,this._state.colorMask.a);C.cullFace(this._state.cullFace);C.depthFunc(this._state.depthFunction);
C.depthRange(this._state.depthRange.zNear,this._state.depthRange.zFar);!0===this._state.depthTest?C.enable(C.DEPTH_TEST):C.disable(C.DEPTH_TEST);C.depthMask(this._state.depthWrite);C.frontFace(this._state.frontFace);C.lineWidth(1);!0===this._state.faceCulling?C.enable(C.CULL_FACE):C.disable(C.CULL_FACE);C.polygonOffset(this._state.polygonOffset[0],this._state.polygonOffset[1]);!0===this._state.polygonOffsetFill?C.enable(C.POLYGON_OFFSET_FILL):C.disable(C.POLYGON_OFFSET_FILL);C.scissor(this._state.scissorRect.x,
this._state.scissorRect.y,this._state.scissorRect.width,this._state.scissorRect.height);!0===this._state.scissorTest?C.enable(C.SCISSOR_TEST):C.disable(C.SCISSOR_TEST);C.stencilFunc(this._state.stencilFunction.func,this._state.stencilFunction.ref,this._state.stencilFunction.mask);C.stencilOpSeparate(this._state.stencilOperation.face,this._state.stencilOperation.fail,this._state.stencilOperation.zFail,this._state.stencilOperation.zPass);!0===this._state.stencilTest?C.enable(C.STENCIL_TEST):C.disable(C.STENCIL_TEST);
C.stencilMask(this._state.stencilWriteMask);for(y=0;y<this.parameters.maxTextureImageUnits;y++)C.activeTexture(e.BASE_TEXTURE_UNIT+y),C.bindTexture(e.TextureType.TEXTURE_2D,null),C.bindTexture(e.TextureType.TEXTURE_CUBE_MAP,null),k(C)&&(C.bindTexture(e.TextureType.TEXTURE_3D,null),C.bindTexture(e.TextureType.TEXTURE_2D_ARRAY,null)),B=this._state.textureUnitMap[y],h.isSome(B)&&C.bindTexture(B.descriptor.target,B.glName);C.activeTexture(e.BASE_TEXTURE_UNIT+this._state.activeTexture);C.viewport(this._state.viewport.x,
this._state.viewport.y,this._state.viewport.width,this._state.viewport.height);this.resetInfo()};x._loadExtensions=function(){this.type===p.ContextType.WEBGL1&&this.gl.getExtension("OES_element_index_uint");this.gl.getExtension("KHR_parallel_shader_compile")};x._loadParameters=function(y){var B,C=this.capabilities.textureFilterAnisotropic;y=null!=(B=y.maxAnisotropy)?B:Infinity;B=k(this.gl);const D=this.gl;C={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:C?Math.min(this.gl.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY),y):1,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),maxUniformBufferBindings:B?D.getParameter(D.MAX_UNIFORM_BUFFER_BINDINGS):0,maxVertexUniformBlocks:B?D.getParameter(D.MAX_VERTEX_UNIFORM_BLOCKS):0,maxFragmentUniformBlocks:B?D.getParameter(D.MAX_FRAGMENT_UNIFORM_BLOCKS):
0,maxUniformBlockSize:B?D.getParameter(D.MAX_UNIFORM_BLOCK_SIZE):0,uniformBufferOffsetAlignment:B?D.getParameter(D.UNIFORM_BUFFER_OFFSET_ALIGNMENT):1,maxArrayTextureLayers:B?D.getParameter(D.MAX_ARRAY_TEXTURE_LAYERS):1,maxSamples:B?D.getParameter(D.MAX_SAMPLES):1};d.Texture.TEXTURE_UNIT_FOR_UPDATES=C.maxTextureImageUnits-1;return C};n._createClass(A,[{key:"driverTest",get:function(){return this._driverTest}},{key:"contextAttributes",get:function(){return this.gl.getContextAttributes()}},{key:"parameters",
get:function(){return this._parameters}},{key:"capabilities",get:function(){return this._capabilities}}]);return A}();u.RenderingContext=w;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/ContextState":function(){define(["exports","./enums"],function(u,n){u.ContextState=function(){this.blend=!1;this.blendColor={r:0,g:0,b:0,a:0};this.blendFunction={srcRGB:n.BlendFactor.ONE,dstRGB:n.BlendFactor.ZERO,srcAlpha:n.BlendFactor.ONE,dstAlpha:n.BlendFactor.ZERO};
this.blendEquation={mode:n.BlendOperation.ADD,modeAlpha:n.BlendOperation.ADD};this.colorMask={r:!0,g:!0,b:!0,a:!0};this.faceCulling=!1;this.cullFace=n.Face.BACK;this.frontFace=n.CullMode.CCW;this.scissorTest=!1;this.scissorRect={x:0,y:0,width:0,height:0};this.depthTest=!1;this.depthFunction=n.CompareFunction.LESS;this.clearDepth=1;this.depthWrite=!0;this.depthRange={zNear:0,zFar:1};this.viewport=null;this.polygonOffsetFill=this.stencilTest=!1;this.polygonOffset=[0,0];this.stencilFunction={face:n.Face.FRONT_AND_BACK,
func:n.CompareFunction.ALWAYS,ref:0,mask:1};this.clearStencil=0;this.stencilWriteMask=1;this.stencilOperation={face:n.Face.FRONT_AND_BACK,fail:n.StencilOperation.KEEP,zFail:n.StencilOperation.KEEP,zPass:n.StencilOperation.KEEP};this.clearColor={r:0,g:0,b:0,a:0};this.copyWriteBuffer=this.copyReadBuffer=this.pixelUnpackBuffer=this.pixelPackBuffer=this.uniformBuffer=this.indexBuffer=this.vertexBuffer=this.program=null;this.uniformBufferBindingPoints=[];this.renderbuffer=this.drawFramebuffer=this.readFramebuffer=
null;this.activeTexture=0;this.textureUnitMap=[]};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/InstanceCounter":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../support/AllocationTracer","./enums"],function(u,n,h,r){const v={RECORD_ALLOCATIONS:!1};let z=function(){function p(){this._current=[];this._max=[];for(this._allocations=new h.AllocationTracer(v.RECORD_ALLOCATIONS);this._current.length<r.ResourceType.COUNT;)this._current.push(0),
this._max.push(0)}var g=p.prototype;g.resetMax=function(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)};g.increment=function(e,b){const a=++this._current[e];this._max[e]=Math.max(a,this._max[e]);this._allocations.add(b)};g.decrement=function(e,b){--this._current[e];this._allocations.remove(b)};g.printResourceCount=function(){if(0<this.total){console.log("Live objects:");for(let e=0;e<r.ResourceType.COUNT;++e){const b=this._current[e];0<b&&console.log(`${r.ResourceType[e]}: ${b}`)}}this._allocations.print()};
n._createClass(p,[{key:"max",get:function(){return this._max}},{key:"current",get:function(){return this._current}},{key:"total",get:function(){return this.current.reduce((e,b)=>e+b,0)}}]);return p}();u.InstanceCounter=z;u.test=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/AllocationTracer":function(){define(["exports"],function(u){let n=function(){function h(v){this._allocations=new Map;v?Error.stackTraceLimit=Infinity:(this.add=
()=>{},this.remove=()=>{})}var r=h.prototype;r.add=function(v){this._allocations.set(v,Error().stack)};r.remove=function(v){this._allocations.delete(v)};r.print=function(){if(0<this._allocations.size){console.log(`${this._allocations.size} live object allocations:`);const v=new Map;this._allocations.forEach(z=>{var p;v.set(z,(null!=(p=v.get(z))?p:0)+1)});v.forEach((z,p)=>{p=p.split("\n");p.shift();p.shift();console.log(`${z}: ${p.shift()}`);p.forEach(g=>console.log("   ",g))})}};return h}();u.AllocationTracer=
n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/ProgramCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../core/NestedMap","./Program"],function(u,n,h,r,v){let z=function(){function p(e){this._rctx=e;this._store=new r.NestedMap}var g=p.prototype;g.dispose=function(){this._store.forEach(e=>e.forEach(b=>b.dispose()));this._store.clear()};g.acquire=function(e,b,a,c){const d=this._store.get(e,
b);if(h.isSome(d))return d.ref(),d;a=new v.Program(this._rctx,e,b,a,c);a.ref();this._store.set(e,b,a);return a};n._createClass(p,[{key:"test",get:function(){let e=0;this._store.forEach(b=>b.forEach(a=>e+=a.hasGLName?2:1));return{cachedWebGLObjects:e}}}]);return p}();u.ProgramCache=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/NestedMap":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(u,n){let h=function(){function r(){this._outer=
new Map}var v=r.prototype;v.clear=function(){this._outer.clear()};v.get=function(z,p){var g;return null==(g=this._outer.get(z))?void 0:g.get(p)};v.set=function(z,p,g){const e=this._outer.get(z);e?e.set(p,g):this._outer.set(z,new Map([[p,g]]))};v.delete=function(z,p){const g=this._outer.get(z);g&&(g.delete(p),0===g.size&&this._outer.delete(z))};v.forEach=function(z){this._outer.forEach((p,g)=>z(p,g))};n._createClass(r,[{key:"empty",get:function(){return 0===this._outer.size}}]);return r}();u.NestedMap=
h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/renderState":function(){define(["exports","../3d/webgl-engine/lib/basicInterfaces","./enums"],function(u,n,h){function r(P){return B.intern(P)}function v(P){return C.intern(P)}function z(P){return D.intern(P)}function p(P){return F.intern(P)}function g(P){return E.intern(P)}function e(P){return G.intern(P)}function b(P){return O.intern(P)}function a(P){return H.intern(P)}function c(P){return"["+
P.join(",")+"]"}function d(P){return P?c([P.srcRgb,P.srcAlpha,P.dstRgb,P.dstAlpha,P.opRgb,P.opAlpha,P.color.r,P.color.g,P.color.b,P.color.a]):null}function f(P){return P?c([P.face,P.mode]):null}function l(P){return P?c([P.factor,P.units]):null}function m(P){return P?c([P.func]):null}function k(P){return P?c([P.function.func,P.function.ref,P.function.mask,P.operation.fail,P.operation.zFail,P.operation.zPass]):null}function q(P){return P?c([P.zNear,P.zFar]):null}function t(P){return P?c([P.r,P.g,P.b,
P.a]):null}function w(P){return P?c([P.mask]):null}const A={face:h.Face.BACK,mode:h.CullMode.CCW},x={face:h.Face.FRONT,mode:h.CullMode.CCW};var y=function(){function P(L,M){this.makeKey=L;this.makeRef=M;this.interns=new Map}P.prototype.intern=function(L){if(!L)return null;const M=this.makeKey(L),J=this.interns;J.has(M)||J.set(M,this.makeRef(L));return J.get(M)};return P}();const B=new y(d,P=>({__tag:"Blending",...P})),C=new y(f,P=>({__tag:"Culling",...P})),D=new y(l,P=>({__tag:"PolygonOffset",...P})),
F=new y(m,P=>({__tag:"DepthTest",...P})),E=new y(k,P=>({__tag:"StencilTest",...P})),G=new y(q,P=>({__tag:"DepthWrite",...P})),O=new y(t,P=>({__tag:"ColorWrite",...P})),H=new y(w,P=>({__tag:"StencilWrite",...P})),K=new y(function(P){return P?c([d(P.blending),f(P.culling),l(P.polygonOffset),m(P.depthTest),k(P.stencilTest),q(P.depthWrite),t(P.colorWrite),w(P.stencilWrite)]):null},P=>({blending:r(P.blending),culling:v(P.culling),polygonOffset:z(P.polygonOffset),depthTest:p(P.depthTest),stencilTest:g(P.stencilTest),
depthWrite:e(P.depthWrite),colorWrite:b(P.colorWrite),stencilWrite:a(P.stencilWrite)}));y=function(){function P(M){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=M}var L=P.prototype;L.setPipeline=function(M){if(this._pipelineInvalid||M!==this._pipeline)this._setBlending(M.blending),this._setCulling(M.culling),this._setPolygonOffset(M.polygonOffset),
this._setDepthTest(M.depthTest),this._setStencilTest(M.stencilTest),this._setDepthWrite(M.depthWrite),this._setColorWrite(M.colorWrite),this._setStencilWrite(M.stencilWrite),this._pipeline=M;this._pipelineInvalid=!1};L.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};L.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};L.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};L.invalidateDepthTest=function(){this._pipelineInvalid=
this._depthTestInvalid=!0};L.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};L.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};L.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};L.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};L._setBlending=function(M){this._blending=this._setSubState(M,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=
!1};L._setCulling=function(M){this._culling=this._setSubState(M,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};L._setPolygonOffset=function(M){this._polygonOffset=this._setSubState(M,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};L._setDepthTest=function(M){this._depthTest=this._setSubState(M,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=
!1};L._setStencilTest=function(M){this._stencilTest=this._setSubState(M,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};L._setDepthWrite=function(M){this._depthWrite=this._setSubState(M,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};L._setColorWrite=function(M){this._colorWrite=this._setSubState(M,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=
!1};L._setStencilWrite=function(M){this._stencilWrite=this._setSubState(M,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};L._setSubState=function(M,J,R,X){if(R||M!==J)X(M),this._pipelineInvalid=!0;return M};return P}();u.StateTracker=y;u.backFaceCullingParams=A;u.cullingParams=P=>P===n.CullFaceOptions.Back?A:P===n.CullFaceOptions.Front?x:null;u.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};u.defaultDepthWriteParams={zNear:0,zFar:1};u.frontFaceCullingParams=
x;u.makeBlending=r;u.makeColorWrite=b;u.makeCulling=v;u.makeDepthTest=p;u.makeDepthWrite=e;u.makePipelineState=function(P){return K.intern(P)};u.makePolygonOffset=z;u.makeStencilTest=g;u.makeStencilWrite=a;u.separateBlendingParams=function(P,L,M,J,R=h.BlendOperation.ADD,X=h.BlendOperation.ADD,U=[0,0,0,0]){return{srcRgb:P,srcAlpha:L,dstRgb:M,dstAlpha:J,opRgb:R,opAlpha:X,color:{r:U[0],g:U[1],b:U[2],a:U[3]}}};u.simpleBlendingParams=function(P,L,M=h.BlendOperation.ADD,J=[0,0,0,0]){return{srcRgb:P,srcAlpha:P,
dstRgb:L,dstAlpha:L,opRgb:M,opAlpha:M,color:{r:J[0],g:J[1],b:J[2],a:J[3]}}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/basicInterfaces":function(){define(["exports"],function(u){u.CullFaceOptions=void 0;(function(n){n[n.None=0]="None";n[n.Front=1]="Front";n[n.Back=2]="Back";n[n.COUNT=3]="COUNT"})(u.CullFaceOptions||(u.CullFaceOptions={}));u.DepthTestFunction=void 0;(function(n){n[n.Less=0]="Less";n[n.Lequal=1]="Lequal";
n[n.COUNT=2]="COUNT"})(u.DepthTestFunction||(u.DepthTestFunction={}));u.AntiAliasingMode=void 0;(function(n){n[n.NONE=0]="NONE";n[n.SMAA=1]="SMAA"})(u.AntiAliasingMode||(u.AntiAliasingMode={}));u.TransparencyPassType=void 0;(function(n){n[n.Color=0]="Color";n[n.Alpha=1]="Alpha";n[n.FrontFace=2]="FrontFace";n[n.NONE=3]="NONE";n[n.COUNT=4]="COUNT"})(u.TransparencyPassType||(u.TransparencyPassType={}));u.RenderRequestType=void 0;(function(n){n[n.BACKGROUND=0]="BACKGROUND";n[n.UPDATE=1]="UPDATE"})(u.RenderRequestType||
(u.RenderRequestType={}));u.ResourceState=void 0;(function(n){n[n.NOT_LOADED=0]="NOT_LOADED";n[n.LOADING=1]="LOADING";n[n.LOADED=2]="LOADED"})(u.ResourceState||(u.ResourceState={}));u.StencilBits=void 0;(function(n){n[n.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded";n[n.OutlineVisualElementMask=2]="OutlineVisualElementMask"})(u.StencilBits||(u.StencilBits={}));u.UpdatePolicy=void 0;(function(n){n[n.ASYNC=0]="ASYNC";n[n.SYNC=1]="SYNC"})(u.UpdatePolicy||(u.UpdatePolicy={}));u.Object3DState=
void 0;(function(n){n[n.Highlight=0]="Highlight";n[n.MaskOccludee=1]="MaskOccludee";n[n.COUNT=2]="COUNT"})(u.Object3DState||(u.Object3DState={}));u.PrimitiveType=void 0;(function(n){n[n.Triangle=0]="Triangle";n[n.Point=1]="Point";n[n.Line=2]="Line"})(u.PrimitiveType||(u.PrimitiveType={}));u.PowerOfTwoResizeMode=void 0;(function(n){n[n.STRETCH=1]="STRETCH";n[n.PAD=2]="PAD"})(u.PowerOfTwoResizeMode||(u.PowerOfTwoResizeMode={}));u.ValidationState=void 0;(function(n){n[n.CHANGED=0]="CHANGED";n[n.UNCHANGED=
1]="UNCHANGED"})(u.ValidationState||(u.ValidationState={}));u.AlphaDiscardMode=void 0;(function(n){n[n.Blend=0]="Blend";n[n.Opaque=1]="Opaque";n[n.Mask=2]="Mask";n[n.MaskBlend=3]="MaskBlend";n[n.COUNT=4]="COUNT"})(u.AlphaDiscardMode||(u.AlphaDiscardMode={}));u.Decorations=void 0;(function(n){n[n.OFF=0]="OFF";n[n.ON=1]="ON"})(u.Decorations||(u.Decorations={}));Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/WebGLDriverTest":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ./testDoublePrecisionArithmetic ./testFloatBufferBlend ./testSamplerPrecision ./testSVGPremultipliedAlpha".split(" "),
function(u,n,h,r,v,z,p){let g=function(){function e(b){this.context=b;this._floatBufferBlendWorking=v.testFloatBufferBlend(b);p.testSVGPremultipliedAlpha(b).then(a=>this._svgAlwaysPremultipliesAlpha=!a)}n._createClass(e,[{key:"floatBufferBlendWorking",get:function(){if(h.isNone(this._floatBufferBlendWorking))throw Error("floatBufferBlendWorking test not yet available");return this._floatBufferBlendWorking}},{key:"svgAlwaysPremultipliesAlpha",get:function(){if(h.isNone(this._svgAlwaysPremultipliesAlpha))throw Error("svgAlwaysPremultipliesAlpha test not yet available");
return this._svgAlwaysPremultipliesAlpha}},{key:"doublePrecisionRequiresObfuscation",get:function(){if(h.isNone(this._doublePrecisionRequiresObfuscation)){const b=r.testDoublePrecisionArithmetic(this.context,!1),a=r.testDoublePrecisionArithmetic(this.context,!0);this._doublePrecisionRequiresObfuscation=0!==b&&(0===a||5<b/a)}return this._doublePrecisionRequiresObfuscation}},{key:"ignoresSamplerPrecision",get:function(){h.isNone(this._ignoresSamplerPrecision)&&(this._ignoresSamplerPrecision=z.testSamplerPrecision(this.context));
return this._ignoresSamplerPrecision}}]);return e}();u.WebGLDriverTest=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/testDoublePrecisionArithmetic":function(){define("exports ../../core/floatRGBA ../../chunks/vec3f64 ./BufferObject ./doublePrecisionUtils ./enums ./FramebufferObject ./VertexArrayObject ./VertexElementDescriptor".split(" "),function(u,n,h,r,v,z,p,g,e){u.testDoublePrecisionArithmetic=function(b,a){var c=new p.FramebufferObject(b,
{colorTarget:z.TargetType.TEXTURE,depthStencilTarget:z.DepthStencilTargetType.NONE},{target:z.TextureType.TEXTURE_2D,wrapMode:z.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:z.PixelFormat.RGBA,dataType:z.PixelType.UNSIGNED_BYTE,samplingMode:z.TextureSamplingMode.NEAREST,width:1,height:1});const d=r.BufferObject.createVertex(b,z.Usage.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),f=new g.VertexArrayObject(b,new Map([["position",0]]),{geometry:[new e.VertexElementDescriptor("position",2,z.DataType.UNSIGNED_SHORT,
0,4)]},{geometry:d}),l=h.fromValues(5633261.287538229,2626832.878767164,1434988.0495278358),m=h.fromValues(5633271.46742708,2626873.6381334523,1434963.231608387);a=b.programCache.acquire(`\n\n  precision highp float;\n\n  attribute vec2 position;\n\n  uniform vec3 u_highA;\n  uniform vec3 u_lowA;\n  uniform vec3 u_highB;\n  uniform vec3 u_lowB;\n\n  varying vec4 v_color;\n\n  ${a?"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION":""}\n\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\n\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\n  }\n\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\n  }\n\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\n    vec3 t1 = dpPlusFrc(hiA, hiB);\n    vec3 e = dpMinusFrc(t1, hiA);\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\n    return t1 + t2;\n  }\n\n  #else\n\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\n    vec3 t1 = hiA + hiB;\n    vec3 e = t1 - hiA;\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\n    return t1 + t2;\n  }\n\n  #endif\n\n  const float MAX_RGBA_FLOAT =\n    255.0 / 256.0 +\n    255.0 / 256.0 / 256.0 +\n    255.0 / 256.0 / 256.0 / 256.0 +\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\n\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\n\n  vec4 float2rgba(const float value) {\n    // Make sure value is in the domain we can represent\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\n\n    // Decompose value in 32bit fixed point parts represented as\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\n    // by a power of 256 (this removes the bits that are represented in the previous\n    // component) and then converts the fractional part to 8bits.\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\n\n    // Convert uint8 values (from 0 to 255) to floating point representation for\n    // the shader\n    const float toU8AsFloat = 1.0 / 255.0;\n\n    return fixedPointU8 * toU8AsFloat;\n  }\n\n  void main() {\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\n\n    v_color = float2rgba(val.z / 25.0);\n\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\n  }\n  `,
"\n  precision highp float;\n\n  varying vec4 v_color;\n\n  void main() {\n    gl_FragColor \x3d v_color;\n  }\n  ",new Map([["position",0]]));var k=new Float32Array(6);v.encodeDoubleArray(l,k,3);var q=new Float32Array(6);v.encodeDoubleArray(m,q,3);b.useProgram(a);a.setUniform3f("u_highA",k[0],k[2],k[4]);a.setUniform3f("u_lowA",k[1],k[3],k[5]);a.setUniform3f("u_highB",q[0],q[2],q[4]);a.setUniform3f("u_lowB",q[1],q[3],q[5]);k=a;q=b.getBoundFramebufferObject();const {x:t,y:w,width:A,height:x}=b.getViewport();
b.bindFramebuffer(c);b.setViewport(0,0,1,1);b.bindVAO(f);b.drawArrays(z.PrimitiveType.TRIANGLE_STRIP,0,4);a=new Uint8Array(4);c.readPixels(0,0,1,1,z.PixelFormat.RGBA,z.PixelType.UNSIGNED_BYTE,a);k.dispose();f.dispose(!1);d.dispose();c.dispose();b.setViewport(t,w,A,x);b.bindFramebuffer(q);b=(l[2]-m[2])/25;c=n.unpackFloatRGBA(a);return Math.abs(b-c)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/doublePrecisionUtils":function(){define(["exports"],
function(u){const n=new Float32Array(2);u.decodeDoubleArray=function(h,r,v){for(let z=0;z<v;++z)r[z]=h[2*z]+h[2*z+1]};u.encodeDoubleArray=function(h,r,v){for(let z=0;z<v;++z)r[2*z]=h[z],r[2*z+1]=h[z]-r[2*z]};u.encodeDoubleHi=function(h,r){const v=h.length;for(let z=0;z<v;++z)n[0]=h[z],r[z]=n[0];return r};u.encodeDoubleLo=function(h,r){const v=h.length;for(let z=0;z<v;++z)n[0]=h[z],n[1]=h[z]-n[0],r[z]=n[1];return r};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/webgl/testFloatBufferBlend":function(){define("exports ../3d/webgl-engine/lib/OrderIndependentTransparency ./BufferObject ./context-util ./enums ./FramebufferObject ./renderState ./VertexArrayObject ./VertexElementDescriptor".split(" "),function(u,n,h,r,v,z,p,g,e){var b={exports:{}};(function(a){(function(c){c=c();void 0!==c&&(a.exports=c)})(function(){function c(x){if(null==w){w={};A={};for(var y in x)"number"==typeof x[y]&&(w[x[y]]=y,A[y]=x[y])}}function d(){if(null==w)throw"WebGLDebugUtils.init(ctx) not called";
}function f(x){d();var y=w[x];return void 0!==y?"gl."+y:"/*UNKNOWN WebGL ENUM*/ 0x"+x.toString(16)}function l(x,y,B,C){x=t[x];if(void 0!==x&&(x=x[y],void 0!==x&&x[B])){if("object"===typeof x[B]&&void 0!==x[B].enumBitwiseOr){y=x[B].enumBitwiseOr;B=0;x=[];for(var D=0;D<y.length;++D){var F=A[y[D]];0!==(C&F)&&(B|=F,x.push(f(F)))}return B===C?x.join(" | "):f(C)}return f(C)}return null===C?"null":void 0===C?"undefined":C.toString()}function m(x,y,B){x.__defineGetter__(B,function(){return y[B]});x.__defineSetter__(B,
function(C){y[B]=C})}function k(x,y,B,C){function D(H,K){return function(){B&&B(K,arguments);var P=H[K].apply(H,arguments),L=C.getError();0!=L&&(F[L]=!0,y(L,K,arguments));return P}}C=C||x;c(x);y=y||function(H,K,P){for(var L="",M=P.length,J=0;J<M;++J)L+=(0==J?"":", ")+l(K,M,J,P[J]);H="WebGL error "+f(H)+" in "+K+"("+L+")";window.console&&window.console.error?window.console.error(H):window.console&&window.console.log&&window.console.log(H)};var F={},E={},G;for(G in x)if("function"==typeof x[G])if("getExtension"!=
G)E[G]=D(x,G);else{var O=D(x,G);E[G]=function(){var H=O.apply(x,arguments);return k(H,y,B,C)}}else m(E,x,G);E.getError=function(){for(var H in F)if(F.hasOwnProperty(H)&&F[H])return F[H]=!1,H;return x.NO_ERROR};return E}function q(x){var y=x.getParameter(x.MAX_VERTEX_ATTRIBS),B=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,B);for(var C=0;C<y;++C)x.disableVertexAttribArray(C),x.vertexAttribPointer(C,4,x.FLOAT,!1,0,0),x.vertexAttrib1f(C,0);x.deleteBuffer(B);y=x.getParameter(x.MAX_TEXTURE_IMAGE_UNITS);
for(C=0;C<y;++C)x.activeTexture(x.TEXTURE0+C),x.bindTexture(x.TEXTURE_CUBE_MAP,null),x.bindTexture(x.TEXTURE_2D,null);x.activeTexture(x.TEXTURE0);x.useProgram(null);x.bindBuffer(x.ARRAY_BUFFER,null);x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,null);x.bindFramebuffer(x.FRAMEBUFFER,null);x.bindRenderbuffer(x.RENDERBUFFER,null);x.disable(x.BLEND);x.disable(x.CULL_FACE);x.disable(x.DEPTH_TEST);x.disable(x.DITHER);x.disable(x.SCISSOR_TEST);x.blendColor(0,0,0,0);x.blendEquation(x.FUNC_ADD);x.blendFunc(x.ONE,x.ZERO);
x.clearColor(0,0,0,0);x.clearDepth(1);x.clearStencil(-1);x.colorMask(!0,!0,!0,!0);x.cullFace(x.BACK);x.depthFunc(x.LESS);x.depthMask(!0);x.depthRange(0,1);x.frontFace(x.CCW);x.hint(x.GENERATE_MIPMAP_HINT,x.DONT_CARE);x.lineWidth(1);x.pixelStorei(x.PACK_ALIGNMENT,4);x.pixelStorei(x.UNPACK_ALIGNMENT,4);x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!1);x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);x.UNPACK_COLORSPACE_CONVERSION_WEBGL&&x.pixelStorei(x.UNPACK_COLORSPACE_CONVERSION_WEBGL,x.BROWSER_DEFAULT_WEBGL);
x.polygonOffset(0,0);x.sampleCoverage(1,!1);x.scissor(0,0,x.canvas.width,x.canvas.height);x.stencilFunc(x.ALWAYS,0,4294967295);x.stencilMask(4294967295);x.stencilOp(x.KEEP,x.KEEP,x.KEEP);x.viewport(0,0,x.canvas.width,x.canvas.height);for(x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT|x.STENCIL_BUFFER_BIT);x.getError(););}var t={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},
getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,
6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT",
"DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},
w=null,A=null;return{init:c,mightBeEnum:function(x){d();return void 0!==w[x]},glEnumToString:f,glFunctionArgToString:l,glFunctionArgsToString:function(x,y){for(var B="",C=y.length,D=0;D<C;++D)B+=(0==D?"":", ")+l(x,C,D,y[D]);return B},makeDebugContext:k,makeLostContextSimulatingCanvas:function(x){function y(Q){return"function"==typeof Q?Q:function(Y){Q.handleEvent(Y)}}function B(){for(var Q=Object.keys(V),Y=0;Y<Q.length;++Y)delete V[Q]}function C(){++R;L||J==R&&x.loseContext()}function D(Q,Y){var fa=
Q[Y];return function(){C();if(!L)return fa.apply(Q,arguments)}}function F(Q){return{statusMessage:Q,preventDefault:function(){X=!0}}}function E(Q){for(var Y in Q)"function"==typeof Q[Y]?K[Y]=D(Q,Y):m(K,Q,Y);K.getError=function(){C();if(!L)for(var ca;ca=G.getError();)V[ca]=!0;for(ca in V)if(V[ca])return delete V[ca],ca;return K.NO_ERROR};var fa="createBuffer createFramebuffer createProgram createRenderbuffer createShader createTexture".split(" ");for(Y=0;Y<fa.length;++Y){var da=fa[Y];K[da]=function(ca){return function(){C();
if(L)return null;var la=ca.apply(Q,arguments);la.__webglDebugContextLostId__=P;M.push(la);return la}}(Q[da])}fa="getActiveAttrib getActiveUniform getBufferParameter getContextAttributes getAttachedShaders getFramebufferAttachmentParameter getParameter getProgramParameter getProgramInfoLog getRenderbufferParameter getShaderParameter getShaderInfoLog getShaderSource getTexParameter getUniform getUniformLocation getVertexAttrib".split(" ");for(Y=0;Y<fa.length;++Y)da=fa[Y],K[da]=function(ca){return function(){C();
return L?null:ca.apply(Q,arguments)}}(K[da]);fa="isBuffer isEnabled isFramebuffer isProgram isRenderbuffer isShader isTexture".split(" ");for(Y=0;Y<fa.length;++Y)da=fa[Y],K[da]=function(ca){return function(){C();return L?!1:ca.apply(Q,arguments)}}(K[da]);K.checkFramebufferStatus=function(ca){return function(){C();return L?K.FRAMEBUFFER_UNSUPPORTED:ca.apply(Q,arguments)}}(K.checkFramebufferStatus);K.getAttribLocation=function(ca){return function(){C();return L?-1:ca.apply(Q,arguments)}}(K.getAttribLocation);
K.getVertexAttribOffset=function(ca){return function(){C();return L?0:ca.apply(Q,arguments)}}(K.getVertexAttribOffset);K.isContextLost=function(){return L};return K}var G,O=[],H=[];var K={};var P=1,L=!1,M=[],J=0,R=0,X=!1,U=0,V={};x.getContext=function(Q){return function(){var Y=Q.apply(x,arguments);if(Y instanceof WebGLRenderingContext){if(Y!=G){if(G)throw"got different context";G=Y;K=E(G)}return K}return Y}}(x.getContext);(function(Q){var Y=Q.addEventListener;Q.addEventListener=function(fa,da,ca){switch(fa){case "webglcontextlost":O.push(y(da));
break;case "webglcontextrestored":H.push(y(da));break;default:Y.apply(Q,arguments)}}})(x);x.loseContext=function(){if(!L){L=!0;J=0;for(++P;G.getError(););B();V[G.CONTEXT_LOST_WEBGL]=!0;var Q=F("context lost"),Y=O.slice();setTimeout(function(){for(var fa=0;fa<Y.length;++fa)Y[fa](Q);0<=U&&setTimeout(function(){x.restoreContext()},U)},0)}};x.restoreContext=function(){L&&H.length&&setTimeout(function(){if(!X)throw"can not restore. webglcontestlost listener did not call event.preventDefault";for(var Q=
0;Q<M.length;++Q){var Y=M[Q];Y instanceof WebGLBuffer?G.deleteBuffer(Y):Y instanceof WebGLFramebuffer?G.deleteFramebuffer(Y):Y instanceof WebGLProgram?G.deleteProgram(Y):Y instanceof WebGLRenderbuffer?G.deleteRenderbuffer(Y):Y instanceof WebGLShader?G.deleteShader(Y):Y instanceof WebGLTexture&&G.deleteTexture(Y)}q(G);L=!1;R=0;X=!1;Q=H.slice();Y=F("context restored");for(var fa=0;fa<Q.length;++fa)Q[fa](Y)},0)};x.loseContextInNCalls=function(Q){if(L)throw"You can not ask a lost contet to be lost";J=
R+Q};x.getNumCalls=function(){return R};x.setRestoreTimeout=function(Q){U=Q};return x},resetToInitialState:q}})})(b);u.testFloatBufferBlend=function(a){var c,d,f;if(!a.gl)return!1;if(a.type===r.ContextType.WEBGL1){var l,m;return!(null==(l=a.capabilities.textureFloat)||!l.textureFloat||null==(m=a.capabilities.colorBufferFloat)||!m.textureFloat)}if(!((null==(c=a.capabilities.textureFloat)?0:c.textureFloat)&&(null==(d=a.capabilities.colorBufferFloat)?0:d.textureFloat)&&(null==(f=a.capabilities.colorBufferFloat)?
0:f.floatBlend)))return!1;c=new z.FramebufferObject(a,{colorTarget:v.TargetType.TEXTURE,depthStencilTarget:v.DepthStencilTargetType.NONE},{target:v.TextureType.TEXTURE_2D,wrapMode:v.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:v.PixelFormat.RGBA,dataType:v.PixelType.FLOAT,internalFormat:v.SizedPixelFormat.RGBA32F,samplingMode:v.TextureSamplingMode.NEAREST,width:1,height:1});d=h.BufferObject.createVertex(a,v.Usage.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1]));f=new g.VertexArrayObject(a,new Map([["a_pos",
0]]),{geometry:[new e.VertexElementDescriptor("a_pos",2,v.DataType.UNSIGNED_SHORT,0,4)]},{geometry:d});l=a.programCache.acquire("\n  precision highp float;\n  attribute vec2 a_pos;\n\n  void main() {\n    gl_Position \x3d vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n   precision highp float;\n\n   void main() {\n    gl_FragColor \x3d vec4(0.5, 0.5, 0.5, 0.5);\n   }\n  ",new Map([["a_pos",0]]));a.useProgram(l);m=a.getBoundFramebufferObject();const {x:k,y:q,width:t,height:w}=a.getViewport();a.bindFramebuffer(c);
a.setViewport(0,0,1,1);a.bindVAO(f);a.drawArrays(v.PrimitiveType.TRIANGLE_STRIP,0,4);var A=p.makePipelineState({blending:n.blendingAlpha});a.setPipelineState(A);a.drawArrays(v.PrimitiveType.TRIANGLE_STRIP,0,4);b.exports.init(a);A=a.gl.getError();a.setViewport(k,q,t,w);a.bindFramebuffer(m);l.dispose();f.dispose(!1);d.dispose();c.dispose();return 1282===A?(console.warn("Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back."),!1):!0};Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/OrderIndependentTransparency":function(){define(["exports","./basicInterfaces","../../../webgl/enums","../../../webgl/renderState"],function(u,n,h,r){const v=r.separateBlendingParams(h.BlendFactor.SRC_ALPHA,h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA,h.BlendFactor.ONE_MINUS_SRC_ALPHA),z=r.simpleBlendingParams(h.BlendFactor.ONE,h.BlendFactor.ONE),p=r.simpleBlendingParams(h.BlendFactor.ZERO,h.BlendFactor.ONE_MINUS_SRC_ALPHA),
g={factor:-1,units:-2};u.OITPolygonOffset=g;u.OITPolygonOffsetLimit=5E5;u.blendingAlpha=p;u.blendingColor=z;u.blendingDefault=v;u.getOITPolygonOffset=function(e){return e?g:null};u.oitBlending=function(e){return e===n.TransparencyPassType.FrontFace?null:e===n.TransparencyPassType.Alpha?p:z};u.oitDepthTest=function(e,b=h.CompareFunction.LESS){return e===n.TransparencyPassType.NONE||e===n.TransparencyPassType.FrontFace?b:h.CompareFunction.LEQUAL};u.oitDepthWrite=function(e){return e===n.TransparencyPassType.FrontFace?
r.defaultDepthWriteParams:null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/testSamplerPrecision":function(){define("exports ../../core/Logger ./BufferObject ./enums ./FramebufferObject ./Texture ./VertexArrayObject ./VertexElementDescriptor".split(" "),function(u,n,h,r,v,z,p,g){const e=n.getLogger("esri.views.WebGLDriverTest");u.testSamplerPrecision=function(b){var a=new v.FramebufferObject(b,{colorTarget:r.TargetType.TEXTURE,depthStencilTarget:r.DepthStencilTargetType.NONE},
{target:r.TextureType.TEXTURE_2D,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:r.PixelFormat.RGBA,dataType:r.PixelType.UNSIGNED_BYTE,samplingMode:r.TextureSamplingMode.NEAREST,width:1,height:1});const c=new Uint8Array(4),d=h.BufferObject.createVertex(b,r.Usage.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),f=new p.VertexArrayObject(b,new Map([["a_position",0]]),{geometry:[new g.VertexElementDescriptor("a_position",2,r.DataType.SHORT,0,4)]},{geometry:d}),l=b.programCache.acquire("\nprecision highp float;\nattribute vec2 a_pos;\nuniform highp sampler2D u_texture;\nvarying vec4 v_color;\n\nfloat getBit(in float bitset, in int bitIndex) {\n  float offset \x3d pow(2.0, float(bitIndex));\n  return mod(floor(bitset / offset), 2.0);\n}\n\nvoid main() {\n  vec4 value \x3d texture2D(u_texture, vec2(0.0));\n  float bit \x3d getBit(value.x * 255.0, 1);\n\n  v_color \x3d bit * vec4(1.0);\n  gl_Position \x3d vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n}\n",
"\nprecision highp float;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor \x3d v_color;\n}\n",new Map([["a_pos",0]]));b.useProgram(l);var m=new z.Texture(b,{target:r.TextureType.TEXTURE_2D,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:r.PixelFormat.RGBA,dataType:r.PixelType.UNSIGNED_BYTE,samplingMode:r.TextureSamplingMode.NEAREST,width:1,height:1},new Uint8Array([2,255,0,0]));l.setUniform1i("u_texture",0);b.bindTexture(m,0);m=b.getBoundFramebufferObject();b.bindFramebuffer(a);b.useProgram(l);
const {x:k,y:q,width:t,height:w}=b.getViewport();b.setViewport(0,0,1,1);b.bindVAO(f);b.drawArrays(r.PrimitiveType.TRIANGLE_STRIP,0,4);b.setViewport(k,q,t,w);a.readPixels(0,0,1,1,r.PixelFormat.RGBA,r.PixelType.UNSIGNED_BYTE,c);l.dispose();f.dispose(!1);d.dispose();a.dispose();(a=255!==c[0]||255!==c[1]||255!==c[2]||255!==c[3])&&e.warn(`A problem was detected with your graphics driver. Your driver does not appear to honor sampler precision specifiers, which may result in rendering issues due to numerical instability. We recommend ensuring that your drivers have been updated to the latest version. Applying lowp sampler workaround. [${c[0]}.${c[1]}.${c[2]}.${c[3]}]`);
b.bindFramebuffer(m);return a};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/testSVGPremultipliedAlpha":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../2d/engine/webgl/DefaultVertexAttributeLayouts ./BufferObject ./enums ./FramebufferObject ./Texture ./VertexArrayObject".split(" "),function(u,n,h,r,v,z,p,g){function e(){e=n._asyncToGenerator(function*(b){const a=new Image;a.src="data:image/svg+xml,%3C%3Fxml version\x3d'1.0' encoding\x3d'UTF-8'%3F%3E%3Csvg width\x3d'5' height\x3d'5' version\x3d'1.1' viewBox\x3d'0 0 5 5' xmlns\x3d'http://www.w3.org/2000/svg'%3E%3Crect width\x3d'5' height\x3d'5' fill\x3d'%23f00' fill-opacity\x3d'.5'/%3E%3C/svg%3E%0A";
a.width=5;a.height=5;yield a.decode();if(!b.gl)return!0;const c=new z.FramebufferObject(b,{colorTarget:v.TargetType.TEXTURE,depthStencilTarget:v.DepthStencilTargetType.NONE},{target:v.TextureType.TEXTURE_2D,wrapMode:v.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:v.PixelFormat.RGBA,dataType:v.PixelType.UNSIGNED_BYTE,samplingMode:v.TextureSamplingMode.NEAREST,width:1,height:1}),d=r.BufferObject.createVertex(b,v.Usage.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),f=new g.VertexArrayObject(b,new Map([["a_pos",
0]]),h.Pos2us,{geometry:d}),l=b.programCache.acquire("\n  precision highp float;\n\n  attribute vec2 a_pos;\n  varying vec2 v_uv;\n\n  void main() {\n    v_uv \x3d a_pos;\n    gl_Position \x3d vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n  precision highp float;\n\n  varying vec2 v_uv;\n  uniform sampler2D u_texture;\n\n  void main() {\n    gl_FragColor \x3d texture2D(u_texture, v_uv);\n  }\n  ",new Map([["a_pos",0]]));b.useProgram(l);const m=new p.Texture(b,{dataType:v.PixelType.UNSIGNED_BYTE,
pixelFormat:v.PixelFormat.RGBA,preMultiplyAlpha:!1,wrapMode:v.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:v.TextureSamplingMode.LINEAR},a);b.bindTexture(m,0);l.setUniform1i("u_texture",0);const k=b.getBoundFramebufferObject(),{x:q,y:t,width:w,height:A}=b.getViewport();b.bindFramebuffer(c);b.setViewport(0,0,1,1);b.setClearColor(0,0,0,0);b.setBlendingEnabled(!1);b.clearSafe(v.ClearBufferBit.COLOR_BUFFER_BIT);b.bindVAO(f);b.drawArrays(v.PrimitiveType.TRIANGLE_STRIP,0,4);const x=new Uint8Array(4);c.readPixels(0,
0,1,1,v.PixelFormat.RGBA,v.PixelType.UNSIGNED_BYTE,x);l.dispose();f.dispose(!1);d.dispose();c.dispose();m.dispose();b.setViewport(q,t,w,A);b.bindFramebuffer(k);a.src="";return 255===x[0]});return e.apply(this,arguments)}u.testSVGPremultipliedAlpha=function(b){return e.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities/Capabilities":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ./DisjointTimerQuery ./DrawBuffers ./Instancing ./load ./LoseContext ./VertexArrayObjects".split(" "),
function(u,n,h,r,v,z,p,g){let e=function(){function b(a,c){this.gl=a;this._textureFloatLinear=this._fragDepth=this._shaderTextureLOD=this._standardDerivatives=this._depthTexture=null;this._disabledExtensions=c.disabledExtensions||{};this._debugWebGLExtensions=c.debugWebGLExtensions||{}}b.prototype.enable=function(a){return this[a]};n._createClass(b,[{key:"drawBuffers",get:function(){this._drawBuffers||(this._drawBuffers=r.load(this.gl,this._disabledExtensions));return this._drawBuffers}},{key:"instancing",
get:function(){this._instancing||(this._instancing=v.load(this.gl));return this._instancing}},{key:"vao",get:function(){this._vertexArrayObject||(this._vertexArrayObject=g.load(this.gl,this._disabledExtensions));return this._vertexArrayObject}},{key:"compressedTextureETC",get:function(){this._compressedTextureETC||(this._compressedTextureETC=z.loadCompressedTextureETC(this.gl,this._disabledExtensions));return this._compressedTextureETC}},{key:"compressedTextureS3TC",get:function(){this._compressedTextureS3TC||
(this._compressedTextureS3TC=z.loadCompressedTextureS3TC(this.gl,this._disabledExtensions));return this._compressedTextureS3TC}},{key:"textureFilterAnisotropic",get:function(){this._textureFilterAnisotropic||(this._textureFilterAnisotropic=z.loadTextureFilterAnisotropicCapability(this.gl,this._disabledExtensions));return this._textureFilterAnisotropic}},{key:"disjointTimerQuery",get:function(){this._disjointTimerQuery||(this._disjointTimerQuery=h.createDisjointTimerQuery(this.gl,this._disabledExtensions));
return this._disjointTimerQuery}},{key:"textureFloat",get:function(){this._textureFloat||(this._textureFloat=z.loadTextureFloat(this.gl,this._disabledExtensions));return this._textureFloat}},{key:"colorBufferFloat",get:function(){this._colorBufferFloat||(this._colorBufferFloat=z.loadColorBufferFloat(this.gl,this._disabledExtensions));return this._colorBufferFloat}},{key:"blendMinMax",get:function(){this._minMaxBlending||(this._minMaxBlending=z.loadMinMaxBlending(this.gl,this._disabledExtensions));
return this._minMaxBlending}},{key:"depthTexture",get:function(){null===this._depthTexture&&(this._depthTexture=z.loadBooleanExtension(this.gl,this._disabledExtensions,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]));return this._depthTexture}},{key:"standardDerivatives",get:function(){null===this._standardDerivatives&&(this._standardDerivatives=z.loadBooleanExtension(this.gl,this._disabledExtensions,"standardDerivatives",!0,["OES_standard_derivatives"]));
return this._standardDerivatives}},{key:"shaderTextureLOD",get:function(){null===this._shaderTextureLOD&&(this._shaderTextureLOD=z.loadBooleanExtension(this.gl,this._disabledExtensions,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]));return this._shaderTextureLOD}},{key:"fragDepth",get:function(){null===this._fragDepth&&(this._fragDepth=z.loadBooleanExtension(this.gl,this._disabledExtensions,"fragDepth",!0,["EXT_frag_depth"]));return this._fragDepth}},{key:"loseContext",get:function(){this._loseContext||
(this._loseContext=p.load(this.gl,this._debugWebGLExtensions));return this._loseContext}},{key:"textureNorm16",get:function(){this._textureNorm16||(this._textureNorm16=z.loadTextureNorm16(this.gl,this._disabledExtensions));return this._textureNorm16}},{key:"textureFloatLinear",get:function(){null===this._textureFloatLinear&&(this._textureFloatLinear=z.loadBooleanExtension(this.gl,this._disabledExtensions,"textureFloatLinear",!1,["OES_texture_float_linear"]));return this._textureFloatLinear}}]);return b}();
u.Capabilities=e;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities/DrawBuffers":function(){define(["exports","./isWebGL2Context"],function(u,n){u.load=function(h,r){return r.disjointTimerQuery?null:n(h)?{drawBuffers:h.drawBuffers.bind(h),MAX_DRAW_BUFFERS:h.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:h.MAX_COLOR_ATTACHMENTS}:r.drawBuffers?null:(h=h.getExtension("WEBGL_draw_buffers"))?{drawBuffers:h.drawBuffersWEBGL.bind(h),MAX_DRAW_BUFFERS:h.MAX_DRAW_BUFFERS_WEBGL,
MAX_COLOR_ATTACHMENTS:h.MAX_COLOR_ATTACHMENTS_WEBGL}:null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities/Instancing":function(){define(["exports","./isWebGL2Context"],function(u,n){u.load=function(h){return n(h)?{drawArraysInstanced:h.drawArraysInstanced.bind(h),drawElementsInstanced:h.drawElementsInstanced.bind(h),vertexAttribDivisor:h.vertexAttribDivisor.bind(h)}:(h=h.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:h.drawArraysInstancedANGLE.bind(h),
drawElementsInstanced:h.drawElementsInstancedANGLE.bind(h),vertexAttribDivisor:h.vertexAttribDivisorANGLE.bind(h)}:null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities/load":function(){define(["exports","./isWebGL2Context"],function(u,n){u.loadBooleanExtension=function(h,r,v,z,p){if(z&&n(h))return!0;if(r[v])return!1;for(const g of p)if(h.getExtension(g))return!0;return!1};u.loadColorBufferFloat=function(h,r){if(n(h)){var v=
!r.colorBufferHalfFloat&&h.getExtension("EXT_color_buffer_half_float")||!r.colorBufferFloat&&h.getExtension("EXT_color_buffer_float"),z=!r.colorBufferFloat&&h.getExtension("EXT_color_buffer_float");r=!r.floatBlend&&!r.colorBufferFloat&&h.getExtension("EXT_float_blend");return v||z||r?{textureFloat:!!z,textureHalfFloat:!!v,floatBlend:!!r,R16F:h.R16F,RG16F:h.RG16F,RGBA16F:h.RGBA16F,R32F:h.R32F,RG32F:h.RG32F,RGBA32F:h.RGBA32F,R11F_G11F_B10F:h.R11F_G11F_B10F,RGB16F:h.RGB16F}:null}return h instanceof WebGLRenderingContext?
(v=!r.colorBufferHalfFloat&&h.getExtension("EXT_color_buffer_half_float"),z=!r.colorBufferFloat&&h.getExtension("WEBGL_color_buffer_float"),h=!r.floatBlend&&!r.colorBufferFloat&&h.getExtension("EXT_float_blend"),v||z||h?{textureFloat:!!z,textureHalfFloat:!!v,floatBlend:!!h,RGBA16F:v?v.RGBA16F_EXT:void 0,RGB16F:v?v.RGB16F_EXT:void 0,RGBA32F:z?z.RGBA32F_EXT:void 0}:null):null};u.loadCompressedTextureETC=function(h,r){return r.compressedTextureETC?null:(h=h.getExtension("WEBGL_compressed_texture_etc"))?
{COMPRESSED_R11_EAC:h.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:h.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:h.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:h.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:h.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:h.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:h.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:h.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC,
COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null};u.loadCompressedTextureS3TC=function(h,r){return r.compressedTextureS3TC?null:(h=h.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:h.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:h.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:h.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:h.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null};u.loadMinMaxBlending=function(h,r){return n(h)?{MIN:h.MIN,
MAX:h.MAX}:r.blendMinMax?null:(h=h.getExtension("EXT_blend_minmax"))?{MIN:h.MIN_EXT,MAX:h.MAX_EXT}:null};u.loadTextureFilterAnisotropicCapability=function(h,r){return r.textureFilterAnisotropic?null:(h=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("MOZ_EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:h.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:h.TEXTURE_MAX_ANISOTROPY_EXT}:null};u.loadTextureFloat=
function(h,r){if(n(h))return{textureFloat:!0,textureFloatLinear:!r.textureFloatLinear&&!!h.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!0,HALF_FLOAT:h.HALF_FLOAT,R16F:h.R16F,RG16F:h.RG16F,RGBA16F:h.RGBA16F,R32F:h.R32F,RG32F:h.RG32F,RGBA32F:h.RGBA32F,R11F_G11F_B10F:h.R11F_G11F_B10F,RGB16F:h.RGB16F};if(h instanceof WebGLRenderingContext){const v=!r.textureHalfFloat&&h.getExtension("OES_texture_half_float");return{textureFloat:!r.textureFloat&&!!h.getExtension("OES_texture_float"),
textureFloatLinear:!r.textureFloatLinear&&!!h.getExtension("OES_texture_float_linear"),textureHalfFloat:!!v,textureHalfFloatLinear:!r.textureHalfFloatLinear&&!!h.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:v?v.HALF_FLOAT_OES:void 0}}return null};u.loadTextureNorm16=function(h,r){return!n(h)||r.textureNorm16?null:(h=h.getExtension("EXT_texture_norm16"))?{R16:h.R16_EXT,RG16:h.RG16_EXT,RGB16:h.RGB16_EXT,RGBA16:h.RGBA16_EXT,R16_SNORM:h.R16_SNORM_EXT,RG16_SNORM:h.RG16_SNORM_EXT,RGB16_SNORM:h.RGB16_SNORM_EXT,
RGBA16_SNORM:h.RGBA16_SNORM_EXT}:null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities/LoseContext":function(){define(["exports"],function(u){u.load=function(n,h){const r=h.loseContext&&n.getExtension("WEBGL_lose_context");return r?{loseRenderingContext:()=>r.loseContext()}:null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["exports",
"./isWebGL2Context"],function(u,n){u.load=function(h,r){return n(h)?{createVertexArray:h.createVertexArray.bind(h),deleteVertexArray:h.deleteVertexArray.bind(h),bindVertexArray:h.bindVertexArray.bind(h)}:r.vao?null:(h=h.getExtension("OES_vertex_array_object")||h.getExtension("MOZ_OES_vertex_array_object")||h.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:h.createVertexArrayOES.bind(h),deleteVertexArray:h.deleteVertexArrayOES.bind(h),bindVertexArray:h.bindVertexArrayOES.bind(h)}:
null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/LabelManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/HandleOwner ../../core/has ../../core/Logger ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./engine/webgl/collisions/CollisionEngine".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){p.getLogger("esri.views.2d.layers.labels.LabelManager");h=function(f){function l(k){k=f.call(this,k)||this;k._applyVisibilityPassThrottled=g.throttle(k._applyVisibilityPass,32,u._assertThisInitialized(k));k.lastUpdateId=-1;k.updateRequested=!1;k.view=null;return k}u._inheritsLoose(l,f);var m=l.prototype;m.initialize=function(){this.collisionEngine=new d.CollisionEngine};m.destroy=function(){this.collisionEngine=null;this._applyVisibilityPassThrottled.remove();this._applyVisibilityPassThrottled=
null};m.update=function(k){this._applyVisibilityPassThrottled(k)};m.viewChange=function(){this.requestUpdate()};m.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())};m.processUpdate=function(k){this._set("updateParameters",k);this.updateRequested&&(this.updateRequested=!1,this.update(k))};m._applyVisibilityPass=function(k){try{const q=this.view.featuresTilingScheme.getClosestInfoForScale(k.state.scale).level;this.collisionEngine.run(this.view.allLayerViews.items,
k,q)}catch(q){}};u._createClass(l,[{key:"updating",get:function(){return this.updateRequested}}]);return l}(v.HandleOwnerMixin(h));n.__decorate([e.property()],h.prototype,"updateRequested",void 0);n.__decorate([e.property({readOnly:!0})],h.prototype,"updateParameters",void 0);n.__decorate([e.property()],h.prototype,"updating",null);n.__decorate([e.property()],h.prototype,"view",void 0);return h=n.__decorate([c.subclass("esri.views.2d.layers.labels.LabelManager")],h)})},"esri/views/2d/engine/webgl/collisions/CollisionEngine":function(){define("exports ../../../../../core/maybe ../../../../../core/screenUtils ../definitions ./CollisionGrid ./visualVariableSimpleUtils".split(" "),
function(u,n,h,r,v,z){function p(a,c){const d=[];a.forEachTile(f=>d.push(f));d.sort((f,l)=>f.instanceId-l.instanceId);d.forEach(f=>{n.isSome(f.labelMetrics)&&f.isReady&&c(f,f.labelMetrics.getCursor())})}function g(a){return c=>h.pt2px(z.getSizeForValueSimple(c,a))}function e(a){for(const c of a)if(a="featureReduction"in c&&c.featureReduction&&"labelingInfo"in c.featureReduction&&c.featureReduction,a=(null==a?void 0:a.labelingInfo)||[],a=[...c.labelingInfo||[],...a],c.labelsVisible&&a.length&&a.some(d=>
"none"===d.deconflictionStrategy))return!0;return!1}let b=function(){function a(){}var c=a.prototype;c.run=function(d,f,l){const m=[];for(let w=d.length-1;0<=w;w--)a:{var k=void 0,q=m,t=d[w];if(!t.layer||"feature"!==t.layer.type&&"csv"!==t.layer.type&&"geojson"!==t.layer.type&&"ogc-feature"!==t.layer.type&&"stream"!==t.layer.type&&"subtype-group"!==t.layer.type&&"wfs"!==t.layer.type)break a;const A=t.layer.geometryType,x=!e("subtype-group"===t.layer.type?t.layer.sublayers.items:[t.layer]),y={};if("subtype-group"!==
t.layer.type){if("heatmap"===(null==(k=t.tileRenderer)?void 0:k.type))break a;b:{k=t.layer.renderer;if(k="visualVariables"in k&&k.visualVariables)for(const B of k)if("size"===B.type){k=g(B);break b}k=null}y[0]=k}k=t.tileRenderer;n.isNone(k)||q.push({tileRenderer:k,vvEvaluators:y,deconflictionEnabled:x,geometryType:A,visible:t.layer.visible&&!t.suspended})}this._transformMetrics(m,f);this._runCollision(m,f,l)};c._runCollision=function(d,f,l){const [m,k]=f.state.size;f=new v.CollisionBitsetGrid(m*f.pixelRatio,
k*f.pixelRatio);for(const {tileRenderer:q,deconflictionEnabled:t,visible:w}of d){const A=q.featuresView.attributeView;t?w?(this._prepare(q),this._collideVisible(f,q,l),this._collideInvisible(f,q)):p(q,(x,y)=>{for(;y.nextId();)A.setLabelMinZoom(y.id,255)}):p(q,(x,y)=>{for(;y.nextId();)A.setLabelMinZoom(y.id,0)})}};c._isFiltered=function(d,f,l){f=f.getFilterFlags(d);d=!l.hasFilter||!!(f&r.FILTER_FLAG_0);l=n.isNone(l.featureEffect)||l.featureEffect.excludedLabelsVisible||!!(f&r.EFFECT_FLAG_0);return!(d&&
l)};c._prepare=function(d){const f=d.featuresView.attributeView,l=new Set;p(d,(m,k)=>{for(;k.nextId();)l.has(k.id)||(l.add(k.id),this._isFiltered(k.id,f,d.layerView)?f.setLabelMinZoom(k.id,254):0!==f.getLabelMinZoom(k.id)?f.setLabelMinZoom(k.id,255):f.setLabelMinZoom(k.id,0))})};c._collideVisible=function(d,f,l){const m=f.featuresView.attributeView,k=new Set;p(f,(q,t)=>{for(;t.nextId();)if(!k.has(t.id))if(q.key.level!==l)m.setLabelMinZoom(t.id,254);else if(0===m.getLabelMinZoom(t.id))switch(d.insertMetrics(t)){case v.HAS_COLLISION:m.setLabelMinZoom(t.id,
254);k.add(t.id);break;case v.NONE:m.setLabelMinZoom(t.id,0),k.add(t.id)}})};c._collideInvisible=function(d,f){const l=f.featuresView.attributeView,m=new Set;p(f,(k,q)=>{for(;q.nextId();)if(!m.has(q.id)&&255===l.getLabelMinZoom(q.id))switch(d.insertMetrics(q)){case v.HAS_COLLISION:l.setLabelMinZoom(q.id,255);m.add(q.id);break;case v.NONE:l.setLabelMinZoom(q.id,0),m.add(q.id)}})};c._transformMetrics=function(d,f){for(const {tileRenderer:l,geometryType:m,vvEvaluators:k}of d)p(l,(q,t)=>{const w=l.featuresView.attributeView;
q=q.transforms.labelMat2d;q[4]=Math.round(q[4]);q[5]=Math.round(q[5]);const A=q[4],x=q[5],y="polyline"===m;for(;t.next();){const G=t.boundsCount,O=t.anchorX,H=t.anchorY;var B=t.size,C=k[0];if(n.isSome(C)){var D=w.getVVSize(t.id);C=C(D);B=isNaN(C)||null==C||Infinity===C?B:C}C=B/2*t.directionX;B=B/2*t.directionY;for(D=0;D<G;D++){var F=O,E=t.anchorY;y?(F=F+t.boundsX(D)+C,E=E+t.boundsY(D)+B,f.state.rotation?(F=q[0]*F+q[2]*E+q[4],E=q[1]*F+q[3]*E+q[5]):(F+=A,E+=x),t.setBoundsComputedAnchorX(D,Math.floor(F)),
t.setBoundsComputedAnchorY(D,Math.floor(E))):(f.state.rotation?(F=q[0]*O+q[2]*H+q[4],E=q[1]*O+q[3]*H+q[5]):(F+=A,E+=x),F=F+t.boundsX(D)+C,E=E+t.boundsY(D)+B,t.setBoundsComputedAnchorX(D,F),t.setBoundsComputedAnchorY(D,E))}}})};return a}();u.CollisionEngine=b;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/collisions/CollisionGrid":function(){define(["exports","../../../../../core/mathUtils","../definitions","../../../layers/features/support/StaticBitSet"],
function(u,n,h,r){let v=function(){function p(e,b){this.width=e;this.height=b;e=Math.ceil(e/1);b=Math.ceil(b/1);this._cols=e;this._rows=b;this._cells=r.StaticBitSet.create(e*b)}var g=p.prototype;g.insertMetrics=function(e){const b=this._hasCollision(e);0===b&&this._markMetrics(e);return b};g.getCellId=function(e,b){return e+b*this._cols};g.has=function(e){return this._cells.has(e)};g.hasRange=function(e,b){return this._cells.hasRange(e,b)};g.set=function(e){this._cells.set(e)};g.setRange=function(e,
b){this._cells.setRange(e,b)};g._hasCollision=function(e){const b=e.id;let a=0,c=0;e.save();do{const d=e.boundsCount;a+=d;for(let f=0;f<d;f++){const l=e.boundsComputedAnchorX(f),m=e.boundsComputedAnchorY(f),k=e.boundsWidth(f)+2,q=e.boundsHeight(f)+2;switch(this._collide(l,m,k,q)){case 2:return 2;case 1:c++}}}while(e.peekId()===b&&e.next());e.restore();return a===c?1:0};g._collide=function(e,b,a,c){e-=a/2;b-=c/2;a=e+a;var d=b+c;if(0>a||0>d||e>this.width||b>this.height)return 1;c=n.clamp(Math.floor(e/
1),0,this._cols);var f=n.clamp(Math.floor(b/1),0,this._rows);e=n.clamp(Math.ceil(a/1),0,this._cols);b=n.clamp(Math.ceil(d/1),0,this._rows);for(a=f;a<=b;a++)for(d=c;d<=e;d++)if(f=this.getCellId(d,a),this.has(f))return 2;return 0};g._mark=function(e,b,a,c){e-=a/2;b-=c/2;a=e+a;var d=b+c;c=n.clamp(Math.floor(e/1),0,this._cols);var f=n.clamp(Math.floor(b/1),0,this._rows);e=n.clamp(Math.ceil(a/1),0,this._cols);b=n.clamp(Math.ceil(d/1),0,this._rows);for(a=f;a<=b;a++)for(d=c;d<=e;d++)f=this.getCellId(d,a),
this.set(f);return!1};g._markMetrics=function(e){const b=e.id;do{const a=e.boundsCount;for(let c=0;c<a;c++){const d=e.boundsComputedAnchorX(c),f=e.boundsComputedAnchorY(c),l=e.boundsWidth(c)+2,m=e.boundsHeight(c)+2;this._mark(d,f,l,m)}}while(e.peekId()===b&&e.next())};return p}(),z=function(){function p(e,b=2){this._bucketSize=e;this._rowsLength=h.TILE_SIZE/e;this._colsLength=h.TILE_SIZE/e;this._elementsPerBucket=b;this._grid=this._initGrid()}var g=p.prototype;g.checkOverlap=function(e,b){e=Math.floor(e/
this._bucketSize);b=Math.floor(b/this._bucketSize);return 0>e||e>=this._rowsLength||0>b||b>=this._colsLength?!0:this._grid[b*this._colsLength+e]>=this._elementsPerBucket};g.markUsed=function(e,b){this._grid[Math.floor(b/this._bucketSize)*this._colsLength+Math.floor(e/this._bucketSize)]+=1};g.reset=function(){this._grid=this._initGrid()};g._initGrid=function(){return new Uint8Array(this._rowsLength*this._colsLength)};return p}();u.CollisionBitsetGrid=v;u.CollisionGrid=z;u.HAS_COLLISION=2;u.NONE=0;
u.OUTSIDE_EXTENT=1;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/StaticBitSet":function(){define(["exports"],function(u){let n=function(){function h(v,z){this._mask=0;this._buf=v;this._mask=z}h.fromBuffer=function(v,z){return new h(v,z)};h.create=function(v,z=4294967295){v=new Uint32Array(Math.ceil(v/32));return new h(v,z)};var r=h.prototype;r._getIndex=function(v){return Math.floor(v/32)};r.has=function(v){v&=this._mask;
return!!(this._buf[this._getIndex(v)]&1<<v%32)};r.hasRange=function(v,z){for(;v%32&&v!==z;){if(this.has(v))return!0;v++}for(;z%32&&v!==z;){if(this.has(v))return!0;z--}if(v===z)return!1;for(v/=32;v!==z/32;v++)if(this._buf[v])return!0;return!1};r.set=function(v){v&=this._mask;const z=this._getIndex(v);this._buf[z]|=1<<v%32};r.setRange=function(v,z){for(;v%32&&v!==z;)this.set(v++);for(;z%32&&v!==z;)this.set(z--);if(v!==z)for(v/=32;v!==z/32;v++)this._buf[v]=4294967295};r.unset=function(v){v&=this._mask;
const z=this._getIndex(v);this._buf[z]&=4294967295^1<<v%32};r.resize=function(v){const z=this._buf;v=new Uint32Array(Math.ceil(v/32));v.set(z);this._buf=v};r.or=function(v){for(let z=0;z<this._buf.length;z++)this._buf[z]|=v._buf[z];return this};r.and=function(v){for(let z=0;z<this._buf.length;z++)this._buf[z]&=v._buf[z];return this};r.xor=function(v){for(let z=0;z<this._buf.length;z++)this._buf[z]^=v._buf[z];return this};r.ior=function(v){for(let z=0;z<this._buf.length;z++)this._buf[z]|=~v._buf[z];
return this};r.iand=function(v){for(let z=0;z<this._buf.length;z++)this._buf[z]&=~v._buf[z];return this};r.ixor=function(v){for(let z=0;z<this._buf.length;z++)this._buf[z]^=~v._buf[z];return this};r.any=function(){for(let v=0;v<this._buf.length;v++)if(this._buf[v])return!0;return!1};r.copy=function(v){for(let z=0;z<this._buf.length;z++)this._buf[z]=v._buf[z];return this};r.clone=function(){return new h(this._buf.slice(),this._mask)};r.clear=function(){for(let v=0;v<this._buf.length;v++)this._buf[v]=
0};r.forEachSet=function(v){for(let z=0;z<this._buf.length;z++){let p=this._buf[z],g=32*z;if(p)for(;p;)p&1&&v(g),p>>>=1,g++}};r.countSet=function(){let v=0;this.forEachSet(z=>{v++});return v};return h}();u.StaticBitSet=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/collisions/visualVariableSimpleUtils":function(){define(["exports","../../../../../core/mathUtils","../../../../../renderers/support/lengthUtils","../../../../../renderers/visualVariables/support/sizeVariableUtils"],
function(u,n,h,r){function v(e,b){switch(b.transformationType){case r.TransformationType.Additive:var a=z(b.minSize,e);return e+=a||b.minDataValue;case r.TransformationType.Constant:return a=(a=b.stops)&&a.length&&a[0].size,null==a&&(a=b.minSize),e=z(a,e);case r.TransformationType.ClampedLinear:a=(e-b.minDataValue)/(b.maxDataValue-b.minDataValue);var c=z(b.minSize,e),d=z(b.maxSize,e);e=e<=b.minDataValue?c:e>=b.maxDataValue?d:c+a*(d-c);return e;case r.TransformationType.Proportional:return a=e/b.minDataValue,
c=z(b.minSize,e),e=z(b.maxSize,e),e=n.clamp(a*c,c,e);case r.TransformationType.Stops:{const [f,l,m]=p(e,b.cache.ipData);f===l?e=z(b.stops[f].size,e):(a=z(b.stops[f].size,e),e=z(b.stops[l].size,e),e=a+(e-a)*m)}return e;case r.TransformationType.RealWorldSize:{a=h.meterIn[b.valueUnit];c=z(b.minSize,e);d=z(b.maxSize,e);({valueRepresentation:b}=b);let f=null;f="area"===b?2*Math.sqrt(e/g)/a:"radius"===b||"distance"===b?2*e/a:e/a;e=n.clamp(f,c,d)}return e;case r.TransformationType.Identity:return e;case r.TransformationType.Unknown:return null}}
function z(e,b){return"number"===typeof e?e:v(b,e)}function p(e,b){if(b){var a=0,c=b.length-1;b.some((d,f)=>{if(e<d)return c=f,!0;a=f;return!1});return[a,c,(e-b[a])/(b[c]-b[a])]}}const g=Math.PI;u.getSizeForValueSimple=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/graphics/GraphicsView2D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/BidiText ../../../../core/HandleOwner ../../../../core/has ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/reactiveUtils ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/coordsUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtilsSync ../../../../geometry/support/spatialReferenceUtils ../../../../layers/graphics/data/projectionSupport ../../../../symbols/cim/CIMSymbolHelper ../../../../symbols/support/defaults ../../engine/webgl/definitions ../../engine/webgl/enums ../../engine/webgl/GraphicTile ../../engine/webgl/TileData ../../engine/webgl/WGLDisplayObject ../../engine/webgl/mesh/MeshData ../../engine/webgl/mesh/factories/WGLMeshFactory ../../engine/webgl/mesh/templates/WGLTemplateStore ../../engine/webgl/util/Matcher ../features/schemaUtils ../features/support/AttributeStore ../features/support/ComputedAttributeStorage ../features/support/GraphicsReader ./GraphicStore ./graphicsUtils ../support/cimSymbolUtils ../../../layers/GraphicsView ../../../webgl/capabilities ../features/createSymbolSchema".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M,J,R,X,U,V,Q){function Y(da,ca,la){if(la.has(da))return la.get(da);ca={tile:ca,addedOrModified:[],removed:[]};la.set(da,ca);return ca}const fa=z("esri-2d-graphic-debug");h=function(da){function ca(ha){ha=da.call(this,ha)||this;ha._storage=new L.ComputedAttributeStorage;ha._displayIds=new Map;ha._controller=new AbortController;ha._tiles=new Map;ha._graphicStoreUpdate=!1;ha._graphicsSet=new Set;ha._matcher=Promise.resolve(null);
ha._tileUpdateSet=new Set;ha._tilesToUpdate=new Map;ha._graphicIdToAbortController=new Map;ha._attached=!1;ha._updatingGraphicsTimer=null;ha._hashToExpandedSymbol=new Map;ha._hashToExpandedSymbolPromise=new Map;ha._hashToCIMSymbolPromise=new Map;ha._hashToCIM=new Map;ha._processing=!1;ha._needsProcessing=!1;ha._pendingUpdate={added:new Set,updated:new Set,removed:new Set};ha.lastUpdateId=-1;ha.updateRequested=!1;ha.graphicUpdateHandler=ha.graphicUpdateHandler.bind(u._assertThisInitialized(ha));return ha}
u._inheritsLoose(ca,da);var la=ca.prototype;la.destroy=function(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=null,this.notifyChange("updating"));this._controller.abort();this.container.destroy();this._set("graphics",null);this._graphicStore.clear();this._attributeStore=null;this._hashToExpandedSymbol.clear();this.renderer=this.view=null;this._hashToCIM.clear();this._hashToCIMSymbolPromise.clear();this._hashToExpandedSymbolPromise.clear()};la._createMatcher=
function(ha,S,ea){ha&&(ha=K.createMatcherSchema({indexCount:0,fields:{}},"feature",ha),this._matcher=H.createMatcher(ha,S,null,ea))};la._createDisplayId=function(ha){this._displayIds.has(ha)||this._displayIds.set(ha,this._storage.createDisplayId());return this._displayIds.get(ha)};la.initialize=function(){this._attributeStore=new P({type:"local",initialize:S=>Promise.resolve(this.container.attributeView.initialize(S)),update:S=>this.container.attributeView.requestUpdate(S),render:()=>this.container.requestRender()},
V.getWebGLCapabilities("2d"),()=>this.notifyChange("updating"));this.container.hasHighlight=()=>this._attributeStore.hasHighlight;const ha=new O.WGLTemplateStore(this.container.getMaterialItems.bind(this.container),this.view.featuresTilingScheme.tileInfo);this._graphicStore=new J(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,S=>{this._createDisplayId(S.uid);this._setFilterState(S.uid,S.visible)},S=>{const ea=this._displayIds.get(S.uid);this._displayIds.delete(S.uid);
this._storage.releaseDisplayId(ea)},this._hashToCIM);this._meshFactory=new G.WGLMeshFactory(null,this.uid,ha);this._templateStore=ha;this.handles.add([e.watch(()=>this.renderer,S=>{this._createMatcher(S,ha,this.container.stage.resourceManager);for(const ea of this.graphics)this._pendingUpdate.updated.add(ea);this.requestUpdate()}),this.view.graphicsTileStore.on("update",S=>this._onTileUpdate(S)),this.container.on("attach",()=>{fa&&this.container.enableRenderingBounds(()=>this._graphicStore.getAllBounds());
0<this.graphics.items.length&&this._graphicsChangeHandler({target:this.graphics,added:this.graphics.items,removed:[],moved:[]});this.handles.add(this.graphics.on("change",ea=>this._graphicsChangeHandler(ea)),"graphics");const S=this.container.stage.resourceManager;this._createMatcher(this.renderer,ha,S);this._graphicStore.setResourceManager(S);this._attached=!0;this.notifyChange("updating")})]);this._onTileUpdate({added:this.view.graphicsTileStore.tiles,removed:[]})};la.hitTest=function(ha){if(!this.view||
!this.view.position)return[];const {resolution:S,rotation:ea}=this.view.state;return this._graphicStore.hitTest(ha.x,ha.y,2,S,ea)};la.update=function(ha){g.throwIfAborted(this._controller.signal);({resolution:ha}=ha.state);this._graphicStore.updateLevel(ha);this._graphicStoreUpdate=!0;this.updateRequested=!1;0<this._pendingUpdate.updated.size&&(this._processing?this._needsProcessing=!0:this._updateGraphics())};la.viewChange=function(){this.requestUpdate()};la.requestUpdate=function(){this.updateRequested||
(this.updateRequested=!0,this.requestUpdateCallback())};la.processUpdate=function(ha){this.updateRequested&&(this.updateRequested=!1,this.update(ha))};la.graphicUpdateHandler=function(ha){const {graphic:S,property:ea,newValue:ma}=ha;switch(ea){case "attributes":case "geometry":case "symbol":this._pendingUpdate.updated.add(S);this.requestUpdate();break;case "visible":this._setFilterState(S.uid,ma),this._attributeStore.sendUpdates()}};la.setHighlight=function(ha){const S=ha.map(ea=>this._displayIds.get(ea));
this._attributeStore.setHighlight(ha,S)};la._getIntersectingTiles=function(ha){ha=this._graphicStore.getBounds(ha);if(!ha||0===l.width(ha)||0===l.height(ha))return[];const S=R.intersectingInternationalDateline(ha,this.view.spatialReference);return p.isSome(S)?[...new Set([...this.view.graphicsTileStore.boundsIntersections(S[0]),...this.view.graphicsTileStore.boundsIntersections(S[1])])]:this.view.graphicsTileStore.boundsIntersections(ha)};la._updateTile=function(){var ha=u._asyncToGenerator(function*(S){g.throwIfAborted(this._controller.signal);
const ea=S.tile;var ma=this._getGraphicsData(this._templateStore,ea,S.addedOrModified);ma=yield this._processGraphics(ea,ma);g.throwIfAborted(this._controller.signal);this._patchTile(ea.key,{type:"update",addOrUpdate:ma,remove:S.removed,end:!0,clear:!1,sort:!1});return ma});return function(S){return ha.apply(this,arguments)}}();la._patchTile=function(ha,S){this._tiles.has(ha)&&(ha=this._tiles.get(ha),this.container.onTileData(ha,S),this.container.requestRender())};la._graphicsChangeHandler=function(ha){const S=
this._pendingUpdate;for(const ea of ha.added)S.added.add(ea);for(const ea of ha.moved)S.updated.add(ea);for(const ea of ha.removed)this._pendingUpdate.added.has(ea)?S.added.delete(ea):S.removed.add(ea);this._processing?this._needsProcessing=!0:this._updateGraphics()};la._getGraphicsToUpdate=function(){const ha={added:[],removed:[],updated:[]};if(!this.graphics)return ha;const S=this._pendingUpdate;for(const ea of this.graphics.items)S.added.has(ea)?ha.added.push(ea):S.updated.has(ea)&&ha.updated.push(ea);
for(const ea of S.removed)this._graphicStore.has(ea)&&ha.removed.push(ea);S.added.clear();S.removed.clear();S.updated.clear();return ha};la._updateGraphics=function(){var ha=u._asyncToGenerator(function*(){this._processing=!0;const {added:S,removed:ea,updated:ma}=this._getGraphicsToUpdate(),sa=this._tilesToUpdate;try{if(!this._graphicStoreUpdate){var {resolution:ja}=this.view.state;this._graphicStore.updateLevel(ja)}ja=[];const ra=Array(S.length+ea.length);for(let Ha=0;Ha<ma.length;Ha++){var wa=ma[Ha];
const ya=this._getIntersectingTiles(wa);for(const qa of ya){var Ja=qa.id;Y(Ja,qa,sa).removed.push(this._displayIds.get(wa.uid))}ja.push(this._updateGraphic(wa,null));ra[Ha]=wa}var va=ma.length;for(wa=0;wa<S.length;wa++){const Ha=S[wa];ra[va+wa]=Ha;this._graphicsSet.add(Ha);ja.push(this._addGraphic(Ha))}for(const Ha of ea){this._abortProcessingGraphic(Ha.uid);const ya=this._getIntersectingTiles(Ha);for(const qa of ya)Ja=qa.id,Y(Ja,qa,sa).removed.push(this._displayIds.get(Ha.uid));this._graphicsSet.delete(Ha);
this._graphicStore.remove(Ha)}this._flipUpdatingGraphics();yield Promise.all(ja);let Ba;for(va=0;va<ra.length;va++){Ba=ra[va];const Ha=this._getIntersectingTiles(Ba);for(const ya of Ha)Ja=ya.id,Y(Ja,ya,sa).addedOrModified.push(Ba)}this._graphicStore.updateZ();Ja=[];for(const [,Ha]of sa)Ja.push(this._updateTile(Ha));yield Promise.all(Ja)}catch(ra){g.isAbortError(ra)}for(const ra of ea)try{const Ba=yield this._getSymbolForGraphic(ra,null);if(Ba){const Ha=Ba.hash();this._hashToExpandedSymbol.delete(Ha)}}catch(Ba){g.isAbortError(Ba)}sa.clear();
this.notifyChange("updating");this._processing=!1;this._needsProcessing&&(this._needsProcessing=!1,this._updateGraphics())});return function(){return ha.apply(this,arguments)}}();la._getArcadeInfo=function(ha){const S=(ha.attributes?Object.keys(ha.attributes):[]).map(ea=>({name:ea,alias:ea,type:"string"===typeof ha.attributes[ea]?"esriFieldTypeString":"esriFieldTypeDouble"}));return p.isNone(ha.geometry)?null:{geometryType:k.getJsonType(ha.geometry),spatialReference:f.fromJSON(ha.geometry.spatialReference),
fields:S}};la._getSymbolForGraphic=function(ha,S){g.throwIfAborted(this._controller.signal);return p.isSome(ha.symbol)?Promise.resolve(ha.symbol):p.isSome(this.renderer)?this.renderer.getSymbolAsync(ha,{scale:this.view.scale,signal:p.isSome(S)?S.signal:null}):Promise.resolve(this._getNullSymbol(ha))};la._getCIMSymbol=function(ha,S,ea){var ma=this._hashToCIM.get(S);if(ma)return Promise.resolve(ma);ha=A.symbolToCIM(ha);if(p.isSome(ha)){if("CIMSymbolReference"===ha.type)return ma=ha,this._hashToCIM.set(S,
ma),Promise.resolve(ma);if(ma=this._hashToCIMSymbolPromise.get(S))return ma;ma=ha.fetchCIMSymbol(ea).then(sa=>{this._hashToCIM.set(S,sa.data);this._hashToCIMSymbolPromise.delete(S);return sa}).catch(sa=>{this._hashToCIMSymbolPromise.delete(S);g.throwIfAbortError(sa);return null});this._hashToCIMSymbolPromise.set(S,ma);return ma}return Promise.resolve(null)};la._expandCIMSymbol=function(ha,S,ea,ma){var sa=this._hashToExpandedSymbol.get(ea);if(sa)return Promise.resolve(sa);if(sa=this._hashToExpandedSymbolPromise.get(ea))return sa;
sa=this.container.stage;S=this._getArcadeInfo(S);const ja=K.createSymbolSchemaOptions(null);ha=Q.createSymbolSchema(ha,ja);sa=X.expandSymbol(ha,S,sa.resourceManager,ma);this._hashToExpandedSymbolPromise.set(ea,sa);sa.then(wa=>{this._hashToExpandedSymbol.set(ea,wa);this._hashToExpandedSymbolPromise.delete(ea);return wa});return sa};la._getSymbolResources=function(){var ha=u._asyncToGenerator(function*(S,ea){g.throwIfAborted(this._controller.signal);return this.container.stage?this._getSymbolForGraphic(S,
ea).then(ma=>{const sa=ma.hash();return this._getCIMSymbol(ma,sa,ea).then(ja=>p.isNone(ja)?null:this._expandCIMSymbol(ja,S,sa,ea).then(wa=>{const Ja=wa.layers.filter(va=>"text"===va.type&&"string"===typeof va.text);if(Ja&&0<Ja.length){const va=Array(Ja.length);for(let Ba=0;Ba<Ja.length;Ba++){const Ha=Ja[Ba],ya=[],[qa]=r.bidiText(Ha.text);Ha.text=qa;for(let oa=0;oa<qa.length;oa++)ya.push(qa.charCodeAt(oa));va[Ba]={symbol:Ha,id:Ba,glyphIds:ya}}const ra=new Map;return this.container.getMaterialItems(va).then(Ba=>
{for(let Ha=0;Ha<Ja.length;Ha++){const ya=Ja[Ha];ra.set(ya.cim,{text:ya.text,mosaicItem:Ba[Ha].mosaicItem})}return{symbol:wa,textInfo:ra,hash:sa}})}return{symbol:wa,hash:sa}}))}).catch(ma=>{g.throwIfAbortError(ma);return null}):null});return function(S,ea){return ha.apply(this,arguments)}}();la._projectAndNormalizeGeometry=function(){var ha=u._asyncToGenerator(function*(S,ea){g.throwIfAborted(this._controller.signal);if(p.isNone(S.geometry)||"mesh"===S.geometry.type)return null;var ma=S.geometry;
k.isPolygon(ma)?ma.rings=ma.rings:k.isPolyline(ma)?ma.paths=ma.paths:k.isExtent(ma)&&(S=yield this._getSymbolForGraphic(S,ea),g.throwIfAborted(this._controller.signal),ma=R.isMarkerSymbol(S.type)||R.isTextSymbol(S.type)?ma.center:R.polygonFromExtent(ma));yield w.checkProjectionSupport(ma.spatialReference,this.view.spatialReference);S=q.normalizeCentralMeridianForDisplay(ma);ma=w.project(S,ma.spatialReference,this.view.spatialReference);m.closeRingsAndFixWinding(ma);return ma});return function(S,ea){return ha.apply(this,
arguments)}}();la._onTileUpdate=function(ha){const S=t.getInfo(this.view.spatialReference);if(ha.added&&0<ha.added.length)for(const ea of ha.added)this._addNewTile(ea,S);if(ha.removed&&0<ha.removed.length)for(const ea of ha.removed)this._removeTile(ea.key)};la._addGraphic=function(){var ha=u._asyncToGenerator(function*(S){this._abortProcessingGraphic(S.uid);g.throwIfAborted(this._controller.signal);var ea=new AbortController;this._graphicIdToAbortController.set(S.uid,ea);ea={signal:ea.signal};try{yield this._addOrUpdateGraphic(S,
ea),g.throwIfAborted(this._controller.signal),this._graphicIdToAbortController.delete(S.uid)}catch(ma){if(this._graphicIdToAbortController.delete(S.uid),!g.isAbortError(ma))throw ma;}});return function(S){return ha.apply(this,arguments)}}();la._updateGraphic=function(ha,S){g.throwIfAborted(this._controller.signal);const ea=this._projectAndNormalizeGeometry(ha,S);S=this._getSymbolResources(ha,S);return Promise.all([ea,S]).then(([ma,sa])=>{g.throwIfAborted(this._controller.signal);this._graphicStore.addOrModify(ha,
sa,ma)})};la._addOrUpdateGraphic=function(ha,S){g.throwIfAborted(this._controller.signal);const ea=this._projectAndNormalizeGeometry(ha,S);S=this._getSymbolResources(ha,S);return Promise.all([ea,S]).then(([ma,sa])=>{g.throwIfAborted(this._controller.signal);this._graphicsSet.has(ha)&&this._graphicStore.addOrModify(ha,sa,ma)})};la._addTile=function(ha){var S=this.view.featuresTilingScheme.getTileBounds(l.create(),ha);S=new C.GraphicTile(ha,S[0],S[3]);this._tiles.set(ha,S);this.container.addChild(S);
return S};la._addNewTile=function(){var ha=u._asyncToGenerator(function*(S,ea){const ma=this._addTile(S.key),sa=this._graphicStore.queryTileData(this._templateStore,S);if(0!==sa.length){if(ea){ea=Math.round((ea.valid[1]-ea.valid[0])/S.resolution);for(var ja of sa)ja.geometry&&(k.isPoint(ja.geometry)||k.isMultipoint(ja.geometry))&&this._wrapPoints(ja,ea)}ja=S.key;this._tileUpdateSet.add(S.key);this.notifyChange("updating");try{const wa={type:"update",clear:!1,addOrUpdate:yield this._processGraphics(S,
sa),remove:[],end:!0,sort:!1};ma.patch(wa);this._tileUpdateSet.delete(ja);this.notifyChange("updating")}catch(wa){if(this._tileUpdateSet.delete(ja),this.notifyChange("updating"),!g.isAbortError(wa))throw wa;}}});return function(S,ea){return ha.apply(this,arguments)}}();la._removeTile=function(ha){if(this._tiles.has(ha)){var S=this._tiles.get(ha);this.container.removeChild(S);S.destroy();this._tiles.delete(ha)}};la._setFilterState=function(ha,S){const ea=this._displayIds.get(ha);ha=this._attributeStore.getHighlightFlag(ha);
this._attributeStore.setData(ea,0,0,ha|(S?y.FILTER_FLAG_0:0))};la._getGraphicsData=function(ha,S,ea){const ma=t.getInfo(this.view.spatialReference);ha=this._graphicStore.getGraphicsData(ha,S,ea);if(ma){S=Math.round((ma.valid[1]-ma.valid[0])/S.resolution);for(const sa of ha)sa.geometry&&(k.isPoint(sa.geometry)||k.isMultipoint(sa.geometry))&&this._wrapPoints(sa,S)}return ha};la._wrapPoints=function(ha,S){const ea=ha.geometry;k.isMultipoint(ea)?this._wrapMultipoint(ea,S):this._wrapPoint(ha,S)};la._wrapMultipoint=
function(ha,S){var ea=ha.points;const ma=[];let sa=0,ja=0;for(const [wa,Ja]of ea)ma.push([wa+sa,Ja]),sa=0,S===R.TILE_SIZE?(ea=5*R.PIXEL_BUFFER,wa+ja<ea?(ma.push([S,0]),sa=-S):wa+ja>R.TILE_SIZE-ea&&(ma.push([-S,0]),sa=S)):wa+ja<-R.PIXEL_BUFFER?(ma.push([S,0]),sa=-S):wa+ja>R.TILE_SIZE+R.PIXEL_BUFFER&&(ma.push([-S,0]),sa=S),ja+=wa;ha.points=ma};la._wrapPoint=function(ha,S){const ea=ha.geometry;if(S===R.TILE_SIZE){const ma=5*R.PIXEL_BUFFER;ea.x<ma?ha.geometry={points:[[ea.x,ea.y],[S,0]]}:ea.x>R.TILE_SIZE-
ma&&(ha.geometry={points:[[ea.x,ea.y],[-S,0]]})}else ea.x<-R.PIXEL_BUFFER?ha.geometry={points:[[ea.x,ea.y],[S,0]]}:ea.x>R.TILE_SIZE+R.PIXEL_BUFFER&&(ha.geometry={points:[[ea.x,ea.y],[-S,0]]})};la._processGraphics=function(ha,S,ea){if(!S||!S.length||!this._meshFactory)return null;const ma=M.GraphicsReader.from(S,this.uid),sa=this._meshFactory;return this._matcher.then(ja=>sa.analyzeGraphics(ma,this.container.stage.resourceManager,ja,null,null,ea).then(()=>{this._attributeStore.sendUpdates();return this._processAnalyzedGraphics(ha,
ma)}))};la._processAnalyzedGraphics=function(ha,S){const ea=this._meshFactory;var ma=S.getSize();S=S.getCursor();const sa=new E.MeshData(ha.key.id,{features:ma,records:ma,metrics:0},B.WGLSymbologyType.DEFAULT,!1,!1);for(ma=[];S.next();){const ja=S.readGraphic();ja.insertAfter=-1===ja.insertAfter?-1:this._displayIds.get(ja.insertAfter);ja.displayId=this._displayIds.get(ja.attributes[this.uid]);const wa=new F(ja.displayId);wa.insertAfter=ja.insertAfter;ma.push(wa);ea.writeGraphic(sa,S,ha.level,this.container.stage.resourceManager)}ha=
sa.serialize(ha.tileInfoView.tileInfo.isWrappable);return 1!==ha.length?new D.TileData:D.TileData.fromVertexData(ha[0].message,ma)};la._abortProcessingGraphic=function(ha){this._graphicIdToAbortController.has(ha)&&this._graphicIdToAbortController.get(ha).abort()};la._getNullSymbol=function(ha){ha=ha.geometry;return k.isPolyline(ha)?x.errorPolylineSymbol2D:k.isPolygon(ha)||k.isExtent(ha)?x.errorPolygonSymbol2D:x.errorPointSymbol2D};la._flipUpdatingGraphics=function(){this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer);
this._updatingGraphicsTimer=setTimeout(()=>{this._updatingGraphicsTimer=null;this.notifyChange("updating")},160);this.notifyChange("updating")};u._createClass(ca,[{key:"updating",get:function(){return!this._attached||null!==this._updatingGraphicsTimer||0<this._tileUpdateSet.size||0<this._tilesToUpdate.size||this._attributeStore.isUpdating()}}]);return ca}(U.GraphicsView(v.HandleOwnerMixin(h)));n.__decorate([b.property({constructOnly:!0})],h.prototype,"requestUpdateCallback",void 0);n.__decorate([b.property()],
h.prototype,"container",void 0);n.__decorate([b.property({constructOnly:!0})],h.prototype,"graphics",void 0);n.__decorate([b.property()],h.prototype,"updating",null);n.__decorate([b.property()],h.prototype,"view",void 0);n.__decorate([b.property()],h.prototype,"updateRequested",void 0);return h=n.__decorate([d.subclass("esri.views.2d.layers.support.GraphicsView2D")],h)})},"esri/geometry/support/normalizeUtilsSync":function(){define("exports ../../core/maybe ./aaBoundingRect ./boundsUtils ./coordsUtils ./jsonUtils ./normalizeUtilsCommon ./spatialReferenceUtils".split(" "),
function(u,n,h,r,v,z,p,g){function e(w,A){if(n.isNone(w))return null;var x=w.spatialReference,y=g.getInfo(x);w="toJSON"in w?w.toJSON():w;if(!y)return w;x=g.isWebMercator(x)?102100:4326;const B=p.cutParams[x].maxX,C=p.cutParams[x].minX;if(z.isPoint(w))return a(w,B,C);if(z.isMultipoint(w))w.points=w.points.map(D=>a(D,B,C));else{if(z.isExtent(w))return b(w,y);if(z.isPolygon(w)||z.isPolyline(w)){x=r.getBoundsXY(q,w);y=x[0];x=x[2];const D=2*p.offsetMagnitude(y,C)*B;w=0===D?w:p.updatePolyGeometry(w,D);
y+=D;x+=D;return x>B?m(w,B,A):y<C?m(w,C,A):w}}return w}function b(w,A){if(!A)return w;const x=c(w,A).map(y=>y.extent);return 2>x.length?x[0]||w:2<x.length?(w.xmin=A.valid[0],w.xmax=A.valid[1],w):{rings:x.map(y=>[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]])}}function a(w,A,x){if(Array.isArray(w)){var y=w[0];y>A?(x=p.offsetMagnitude(y,A),w[0]=y+-2*x*A):y<x&&(A=p.offsetMagnitude(y,x),w[0]=y+-2*A*x)}else y=w.x,y>A?(x=p.offsetMagnitude(y,A),w.x+=-2*x*A):y<x&&(A=p.offsetMagnitude(y,
x),w.x+=-2*A*x);return w}function c(w,A){const x=[],{ymin:y,ymax:B,xmin:C,xmax:D}=w;var F=w.xmax-w.xmin;const [E,G]=A.valid,{x:O,frameId:H}=d(w.xmin,A),{x:K,frameId:P}=d(w.xmax,A);w=O===K&&0<F;if(F>2*G){F={xmin:C<D?O:K,ymin:y,xmax:G,ymax:B};w={xmin:E,ymin:y,xmax:C<D?K:O,ymax:B};A={xmin:0,ymin:y,xmax:G,ymax:B};const L={xmin:E,ymin:y,xmax:0,ymax:B},M=[],J=[];f(F,A)&&M.push(H);f(F,L)&&J.push(H);f(w,A)&&M.push(P);f(w,L)&&J.push(P);for(let R=H+1;R<P;R++)M.push(R),J.push(R);x.push(new k(F,[H]),new k(w,
[P]),new k(A,M),new k(L,J))}else O>K||w?x.push(new k({xmin:O,ymin:y,xmax:G,ymax:B},[H]),new k({xmin:E,ymin:y,xmax:K,ymax:B},[P])):x.push(new k({xmin:O,ymin:y,xmax:K,ymax:B},[H]));return x}function d(w,A){const [x,y]=A.valid;A=2*y;var B=0;w>y?(B=Math.ceil(Math.abs(w-y)/A),w-=B*A):w<x&&(B=Math.ceil(Math.abs(w-x)/A),w+=B*A,B=-B);return{x:w,frameId:B}}function f(w,A){const {xmin:x,ymin:y,xmax:B,ymax:C}=A;return l(w,x,y)&&l(w,x,C)&&l(w,B,C)&&l(w,B,y)}function l(w,A,x){return A>=w.xmin&&A<=w.xmax&&x>=w.ymin&&
x<=w.ymax?!0:!1}function m(w,A,x=!0){const y=!z.isPolyline(w);y&&v.closeRings(w);if(x)return(new t).cut(w,A);x=y?w.rings:w.paths;const B=y?4:2,C=x.length;A*=-2;for(let D=0;D<C;D++){const F=x[D];if(F&&F.length>=B){const E=[];for(const G of F)E.push([G[0]+A,G[1]]);x.push(E)}}y?w.rings=x:w.paths=x;return w}let k=function(w,A){this.extent=w;this.frameIds=A};const q=h.create();let t=function(){function w(){this.linesIn=[];this.linesOut=[]}var A=w.prototype;A.cut=function(x,y){this.xCut=y;if(x.rings)this.closed=
!0,y=x.rings,this.minPts=4;else if(x.paths)this.closed=!1,y=x.paths,this.minPts=2;else return null;for(var B of y)if(B&&!(B.length<this.minPts)){y=!0;for(const C of B)y?(this.moveTo(C),y=!1):this.lineTo(C);this.closed&&this.close()}this._pushLineIn();this._pushLineOut();y=[];for(const C of this.linesIn)C&&C.length>=this.minPts&&y.push(C);B=-2*this.xCut;for(const C of this.linesOut)if(C&&C.length>=this.minPts){for(const D of C)D[0]+=B;y.push(C)}this.closed?x.rings=y:x.paths=y;return x};A.moveTo=function(x){this._pushLineIn();
this._pushLineOut();this._prevSide=this._side(x[0]);this._moveTo(x[0],x[1],this._prevSide);this._firstPt=this._prevPt=x};A.lineTo=function(x){const y=this._side(x[0]);if(-1===y*this._prevSide){const B=this._intersect(this._prevPt,x);this._lineTo(this.xCut,B,0);this._prevSide=0}this._lineTo(x[0],x[1],y);this._prevSide=y;this._prevPt=x};A.close=function(){const x=this._firstPt,y=this._prevPt;x[0]===y[0]&&x[1]===y[1]||this.lineTo(x);this._checkClosingPt(this.lineIn);this._checkClosingPt(this.lineOut)};
A._moveTo=function(x,y,B){this.closed?(this.lineIn.push([0>=B?x:this.xCut,y]),this.lineOut.push([0<=B?x:this.xCut,y])):(0>=B&&this.lineIn.push([x,y]),0<=B&&this.lineOut.push([x,y]))};A._lineTo=function(x,y,B){this.closed?(this._addPolyVertex(this.lineIn,0>=B?x:this.xCut,y),this._addPolyVertex(this.lineOut,0<=B?x:this.xCut,y)):0>B?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([x,y])):0<B?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([x,y])):0>this._prevSide?(this.lineIn.push([x,
y]),this.lineOut.push([x,y])):0<this._prevSide&&(this.lineOut.push([x,y]),this.lineIn.push([x,y]))};A._addPolyVertex=function(x,y,B){const C=x.length;1<C&&x[C-1][0]===y&&x[C-2][0]===y?x[C-1][1]=B:x.push([y,B])};A._checkClosingPt=function(x){const y=x.length;3<y&&x[0][0]===this.xCut&&x[y-2][0]===this.xCut&&x[1][0]===this.xCut&&(x[0][1]=x[y-2][1],x.pop())};A._side=function(x){return x<this.xCut?-1:x>this.xCut?1:0};A._intersect=function(x,y){return x[1]+(this.xCut-x[0])/(y[0]-x[0])*(y[1]-x[1])};A._pushLineIn=
function(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn);this.lineIn=[]};A._pushLineOut=function(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut);this.lineOut=[]};return w}();u.CutVertical=t;u.normalizeCentralMeridianForDisplay=function(w){return e(w,!1)};u.normalizeCentralMeridianSync=function(w){return e(w,!0)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(u,n,h,r,v,z,p){function g(m,k){if(!k)return null;if("x"in k){var q={x:0,y:0};[q.x,q.y]=m(k.x,k.y,c);null!=k.z&&(q.z=k.z);null!=k.m&&(q.m=k.m);return q}if("xmin"in k)return q={xmin:0,ymin:0,xmax:0,ymax:0},[q.xmin,q.ymin]=m(k.xmin,k.ymin,c),[q.xmax,q.ymax]=m(k.xmax,k.ymax,c),k.hasZ&&(q.zmin=k.zmin,q.zmax=k.zmax,q.hasZ=!0),k.hasM&&(q.mmin=k.mmin,q.mmax=k.mmax,q.hasM=!0),q;if("rings"in k)return{rings:e(k.rings,m),hasM:k.hasM,hasZ:k.hasZ};if("paths"in k)return{paths:e(k.paths,m),hasM:k.hasM,hasZ:k.hasZ};
if("points"in k)return{points:b(k.points,m),hasM:k.hasM,hasZ:k.hasZ}}function e(m,k){const q=[];for(const t of m)q.push(b(t,k));return q}function b(m,k){const q=[];for(const t of m)m=k(t[0],t[1],[0,0]),q.push(m),2<t.length&&m.push(t[2]),3<t.length&&m.push(t[3]);return q}function a(){a=n._asyncToGenerator(function*(m,k){k&&(m=Array.isArray(m)?m.map(q=>h.isSome(q.geometry)&&q.geometry.spatialReference):[m],yield r.initializeProjection(m.map(q=>({source:q,dest:k}))))});return a.apply(this,arguments)}
const c=[0,0],d=g.bind(null,p.lngLatToXY),f=g.bind(null,p.xyToLngLat),l=new (function(){function m(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var k=m.prototype;k.push=function(){var q=n._asyncToGenerator(function*(t,w,A){if(!(t&&t.length&&w&&A)||z.equals(w,A))return t;const x={geometries:t,inSpatialReference:w,outSpatialReference:A,resolve:null};this._jobs.push(x);return new Promise(y=>{x.resolve=y;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(t,
w,A){return q.apply(this,arguments)}}();k._process=function(){this._timer=null;const q=this._jobs.shift();if(q){var {geometries:t,inSpatialReference:w,outSpatialReference:A,resolve:x}=q;p.canProject(w,A)?z.isWebMercator(A)?x(t.map(d)):x(t.map(f)):x(r.projectMany(v.jsonAdapter,t,w,A,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return m}());u.checkProjectionSupport=function(m,k){return a.apply(this,arguments)};u.project=function(m,k,q,t){if(!m)return m;q||(q=k,k=m.spatialReference);
return z.isValid(k)&&z.isValid(q)&&!z.equals(k,q)?p.canProject(k,q)?(m=z.isWebMercator(q)?d(m):f(m),m.spatialReference=q,m):r.projectMany(v.jsonAdapter,[m],k,q,null,t)[0]:m};u.projectMany=function(m,k,q){return l.push(m,k,q)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(u){let n=function(p,g,e){this.x=p;this.y=g;this.spatialReference=e;this.m=this.z=void 0},h=function(p,g,e,
b){this.rings=p;this.spatialReference=g;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);b&&(this.hasM=b)},r=function(p,g,e,b){this.paths=p;this.spatialReference=g;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);b&&(this.hasM=b)},v=function(p,g,e,b){this.points=p;this.spatialReference=g;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);b&&(this.hasM=b)},z=function(p,g,e,b,a){this.xmin=p;this.ymin=g;this.xmax=e;this.ymax=b;this.spatialReference=a;this.mmax=this.mmin=this.zmax=this.zmin=void 0};u.jsonAdapter={convertToGEGeometry:function(p,
g){return null==g?null:p.convertJSONToGeometry(g)},exportPoint:function(p,g,e){e=new n(p.getPointX(g),p.getPointY(g),e);const b=p.hasZ(g),a=p.hasM(g);b&&(e.z=p.getPointZ(g));a&&(e.m=p.getPointM(g));return e},exportPolygon:function(p,g,e){return new h(p.exportPaths(g),e,p.hasZ(g),p.hasM(g))},exportPolyline:function(p,g,e){return new r(p.exportPaths(g),e,p.hasZ(g),p.hasM(g))},exportMultipoint:function(p,g,e){return new v(p.exportPoints(g),e,p.hasZ(g),p.hasM(g))},exportExtent:function(p,g,e){var b=p.hasZ(g);
const a=p.hasM(g);e=new z(p.getXMin(g),p.getYMin(g),p.getXMax(g),p.getYMax(g),e);b&&(b=p.getZExtent(g),e.zmin=b.vmin,e.zmax=b.vmax);a&&(p=p.getMExtent(g),e.mmin=p.vmin,e.mmax=p.vmax);return e}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/GraphicTile":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ./DirtyMap ./DisplayRecordStore ./WGLBuffers ./WGLTile".split(" "),function(u,n,h,r,v,z){z=function(p){function g(){var b=
p.apply(this,arguments)||this;b._data=null;b._displayList=null;b._lastCommitTime=0;b._hasData=!1;b._invalidated=!1;b._wglBuffers=null;b._dirtyMap=new h;return b}n._inheritsLoose(g,p);var e=g.prototype;e.destroy=function(){p.prototype.destroy.call(this);this.clear()};e.getGeometry=function(b){return this._wglBuffers&&this._wglBuffers.has(b)?this._wglBuffers.get(b):null};e.getDisplayList=function(){return this._displayList};e.patch=function(b){if(!0===b.clear)this.clear(),this._hasData=!1;else{var a=
b.addOrUpdate,c=b.remove;!this._data&&a&&a.tileDisplayData.displayObjects.length?(a.tileDisplayData.computeDisplayList(),this._dirtyMap=new h,this._dispRecStore=r.fromTileData(a,this._dirtyMap),this._data=a,this._dirtyMap.markAllDirty(),this._hasData=!0,b.end&&this.ready()):this._data?a&&a.tileDisplayData.displayObjects.length||c.length?this._doPatchData(b):b.end&&this.ready():b.end&&this.ready();b.end&&!this._data&&this.clear();this.requestRender();this.emit("change")}};e.commit=function(b){if(!b.time||
b.time!==this._lastCommitTime)if(this._lastCommitTime=b.time,this.visible&&this._data&&(this._wglBuffers||(this._wglBuffers=new v(b.context)),this._dirtyMap.hasDirty()||this._invalidated))this._invalidated=!1,this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._displayList=this._data.tileDisplayData.displayList.clone(),this._displayObjects=this._data.tileDisplayData.displayObjects.slice(),this._dirtyMap.markAllClean()};e.clear=function(){this._dispRecStore=this._displayList=this._data=
null;this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null)};e._doPatchData=function(b){this._invalidated=!0;this._patchData(b)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=r.fromTileData(this._data,this._dirtyMap));this.requestRender()};e._patchData=function(b){let a=!0;var c=b.addOrUpdate&&b.addOrUpdate.tileDisplayData&&b.addOrUpdate.tileDisplayData.displayObjects||[],d=(b.remove||[]).slice();for(var f of c)null!=f.insertAfter&&d.push(f.id);for(var l of d)if(d=
this._data.tileDisplayData.displayObjectRegistry.get(l)){this._data.tileDisplayData.displayList.removeFromList(d.displayRecords);for(var m of d.displayRecords)this._dispRecStore.delete(m);this._data.tileDisplayData.displayObjectRegistry.delete(l);d=this._data.tileDisplayData.displayObjects.indexOf(d);this._data.tileDisplayData.displayObjects.splice(d,1)}for(const w of c){c=this._data.tileDisplayData.displayObjectRegistry.get(w.id);let A;if(c){l=c.displayRecords;c.set(w);c.displayRecords=l;l=c.displayRecords.length;
for(m=0;m<l;++m)if(d=c.displayRecords[m],f=w.displayRecords[m],m>=w.displayRecords.length||d.geometryType!==f.geometryType||d.symbolLevel!==f.symbolLevel||d.zOrder!==f.zOrder||d.materialKey!==f.materialKey)this._dispRecStore.delete(c.displayRecords[m]),m<w.displayRecords.length&&(c.displayRecords[m]=void 0);c.displayRecords.length=w.displayRecords.length}else if(c=w.copy(),c.displayRecords=[],this._data.tileDisplayData.displayObjectRegistry.set(w.id,c),l=this._data.tileDisplayData.displayObjects,
null!=c.insertAfter?(A={},0<=c.insertAfter?(m=this._data.tileDisplayData.displayObjectRegistry.get(c.insertAfter))?(f=l.indexOf(m)+1,f<l.length?l.splice(f,0,c):(l.push(c),f=l.length)):(l.push(c),f=l.length):(l.unshift(c),f=0)):(l.push(c),f=l.length),A)for(m=0<w.displayRecords.length?1:0,d=0,--f;0<=f&&d<m;--f)for(var k=l[f].displayRecords.length-1;0<=k&&d<m;--k){var q=l[f].displayRecords[k],t=this._data.tileDisplayData.displayList.getDPInfoType();A[t]||(A[t]=q,++d)}l=w.displayRecords.length;for(m=
0;m<l;++m){d=w.displayRecords[m];(f=c.displayRecords[m])?(f.meshData=d.meshData,f.materialKey=d.materialKey):(f=d.copy(),f.vertexFrom=void 0,f.indexFrom=void 0,c.displayRecords[m]=f);q=d.geometryType;k=this._data.tileDisplayData.displayList.getDPInfoType();t=b.addOrUpdate.tileBufferData.geometries[q];q=t.vertexBuffer;t=t.indexBuffer;let x=void 0;A&&(x=A[k]?this._data.tileDisplayData.displayList.splitAfter(A[k]):-1);a=this._dispRecStore.setMeshData(f,d,q,t,x)&&a;A&&null!=f.indexFrom&&null!=f.indexFrom&&
(A[k]=f)}}return a};n._createClass(g,[{key:"hasData",get:function(){return!!this._hasData}},{key:"displayObjects",get:function(){var b;return null!=(b=this._displayObjects)?b:[]}}]);return g}(z.WGLTile);u.GraphicTile=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/DirtyMap":function(){define(function(){return function(){function u(){this._dirties=[{vertexFrom:-1,vertexCount:-1,indexFrom:-1,indexCount:-1,allDirty:!1},{vertexFrom:-1,
vertexCount:-1,indexFrom:-1,indexCount:-1,allDirty:!1},{vertexFrom:-1,vertexCount:-1,indexFrom:-1,indexCount:-1,allDirty:!1},{vertexFrom:-1,vertexCount:-1,indexFrom:-1,indexCount:-1,allDirty:!1},{vertexFrom:-1,vertexCount:-1,indexFrom:-1,indexCount:-1,allDirty:!1}]}var n=u.prototype;n.hasDirty=function(){return this._dirties.some(h=>-1!==h.indexCount||h.allDirty)};n.markAllClean=function(){for(const h of this._dirties)h.indexFrom=-1,h.indexCount=-1,h.vertexFrom=-1,h.vertexCount=-1,h.allDirty=!1};
n.markAllDirty=function(){for(const h of this._dirties)h.allDirty=!0};n.forEach=function(h){for(let r=0;r<this._dirties.length;++r){const {indexCount:v,indexFrom:z,vertexCount:p,vertexFrom:g,allDirty:e}=this._dirties[r],b={};let a=void 0,c=!1;if(e||-1!==g&&0<p)b.geometry={count:p,from:g,allDirty:e},c=!0;if(e||-1!==z&&0<v)a={count:v,from:z,allDirty:e},c=!0;c&&h({indices:a,vertices:b},r)}};n.markDirtyIndices=function(h,r,v){h=this._dirties[h];if(!h.allDirty)if(-1!==h.indexCount){const z=Math.min(h.indexFrom,
r);r=Math.max(h.indexFrom+h.indexCount,r+v)-z;h.indexFrom=z;h.indexCount=r}else h.indexFrom=r,h.indexCount=v};n.markDirtyVertices=function(h,r,v,z){h=this._dirties[h];h.allDirty||(-1!==h.vertexCount?(r=Math.min(h.vertexFrom,v),v=Math.max(h.vertexFrom+h.vertexCount,v+z)-r,h.vertexFrom=r,h.vertexCount=v):(h.vertexFrom=v,h.vertexCount=z))};return u}()})},"esri/views/2d/engine/webgl/DisplayRecordStore":function(){define(["../../../../core/has","./FreeList","./Utils"],function(u,n,h){const r=["FILL","LINE",
"MARKER","TEXT","LABEL"];return function(){function v(p,g,e,b){this._strides=p;this._displayList=g;this._freeListsAndStorage={};this._dirtyMap=null;this._dirtyMap=e;for(const a in p){this._freeListsAndStorage[a]={vtxFreeList:b?new n.FreeList(b):null,idxFreeList:b?new n.FreeList(b):null,vertexBuffers:{},indexBuffer:b?new Uint32Array(b):null};for(const c in p[a])this._freeListsAndStorage[a].vertexBuffers[c]={data:b?h.allocateTypedArrayBuffer(b,p[a][c]):null,stride:p[a][c]}}}v.fromTileData=function(p,
g){var e,b=p.getStrides(),a={};for(e=0;e<b.length;e++)a[r[e]]=b[e];e=a;b=[0,0,0,0,0];a=[0,0,0,0,0];var c=p.tileDisplayData.displayObjects;for(var d of c)for(var f of d.displayRecords)b[f.geometryType]=Math.max(b[f.geometryType],f.vertexFrom+f.vertexCount),a[f.geometryType]=Math.max(a[f.geometryType],f.indexFrom+f.indexCount);g=new v(e,p.tileDisplayData.displayList,g,null);for(d=0;d<p.tileBufferData.geometries.length;++d){f=b[d];c=a[d];var l=p.tileBufferData.geometries[d];e=g._storageFor(r[d]);const m=
p.tileBufferData.geometries[d].indexBuffer;e.indexBuffer=m;e.idxFreeList=new n.FreeList(m.length);e.idxFreeList.allocate(c);let k;for(const q in l.vertexBuffer)c=p.tileBufferData.geometries[d].vertexBuffer[q],e.vertexBuffers[q].data=c.data,e.vertexBuffers[q].stride=c.stride,l=h.strideToPackingFactor(c.stride),c=c.data.length*l/c.stride,k||(k=c);e.vtxFreeList=new n.FreeList(k);e.vtxFreeList.allocate(f)}return g};var z=v.prototype;z.delete=function(p){const g=r[p.geometryType];this._freeVertices(g,
p.vertexFrom,p.vertexCount);this._freeIndices(g,p.indexFrom,p.indexCount);this._displayList.removeFromList(p);p.vertexFrom=void 0;p.indexFrom=void 0};z.setMeshData=function(p,g,e,b,a){const c=r[p.geometryType];p.meshData=null;let d=void 0,f=void 0;void 0===p.vertexFrom?(f=g.vertexCount,d=this._allocateVertices(c,f)):g.vertexCount>p.vertexCount?(this._freeVertices(c,p.vertexFrom,p.vertexCount),f=g.vertexCount,d=this._allocateVertices(c,f)):g.vertexCount===p.vertexCount?(d=p.vertexFrom,f=p.vertexCount):
(this._freeVertices(c,p.vertexFrom+g.vertexCount,p.vertexCount-g.vertexCount),d=p.vertexFrom,f=g.vertexCount);let l=!0,m=void 0,k=void 0,q=void 0;void 0===p.indexFrom?(m=a,q=g.indexCount,k=this._allocateIndices(c,q)):g.indexCount>p.indexCount?(m=this._displayList.removeFromList(p),this._freeIndices(c,p.indexFrom,p.indexCount),q=g.indexCount,k=this._allocateIndices(c,q)):g.indexCount===p.indexCount?(l=!1,k=p.indexFrom,q=p.indexCount):(m=this._displayList.removeFromList(p),this._freeIndices(c,p.indexFrom+
g.indexCount,p.indexCount-g.indexCount),k=p.indexFrom,q=g.indexCount);if(-1!==d&&-1!==k){a=this._storageFor(c);h.copyMeshData(d,k,a.vertexBuffers,a.indexBuffer,g,e,b);p.vertexFrom=d;p.indexFrom=k;p.vertexCount=g.vertexCount;p.indexCount=g.indexCount;if(this._dirtyMap){this._dirtyMap.markDirtyIndices(p.geometryType,p.indexFrom,p.indexCount);for(const t in e)this._dirtyMap.markDirtyVertices(p.geometryType,t,p.vertexFrom,p.vertexCount)}l&&this._displayList.addToList(p,m);return!0}-1!==d&&this._freeVertices(c,
d,f);-1!==k&&this._freeIndices(c,k,q);p.setMeshDataFromBuffers(g,e,b);p.vertexFrom=void 0;p.vertexCount=0;p.indexFrom=void 0;p.indexCount=0;return!1};z.tryAddMeshData=function(p,g){const e=g.vertexBuffer;g=g.indexBuffer;var b=r[p.geometryType];const a=this._allocateVertices(b,p.vertexCount);if(-1===a)return this._freeVertices(b,a,p.vertexCount),!1;const c=this._allocateIndices(b,p.indexCount);if(-1===c)return this._freeVertices(b,a,p.vertexCount),this._freeIndices(b,c,p.indexCount),!1;b=this._storageFor(b);
h.copyMeshData(a,c,b.vertexBuffers,b.indexBuffer,p,e,g);p.vertexFrom=a;p.indexFrom=c;if(this._dirtyMap){this._dirtyMap.markDirtyIndices(p.geometryType,p.indexFrom,p.indexCount);for(const d in e)this._dirtyMap.markDirtyVertices(p.geometryType,d,a,p.vertexCount)}this._displayList.addToList(p);return!0};z._allocateVertices=function(p,g){p=this._storageFor(p);g=p.vtxFreeList.allocate(g);return-1===g||.5<p.vtxFreeList.fragmentation?-1:g};z._freeVertices=function(p,g,e){this._storageFor(p).vtxFreeList.free(g,
e)};z._freeIndices=function(p,g,e){this._storageFor(p).idxFreeList.free(g,e)};z._allocateIndices=function(p,g){p=this._storageFor(p);g=p.idxFreeList.allocate(g);return-1===g||.5<p.idxFreeList.fragmentation?-1:g};z._storageFor=function(p){return this._freeListsAndStorage[p]};z._stridesFor=function(p,g){return this._strides[p][g]};return v}()})},"esri/views/2d/engine/webgl/FreeList":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(u,n){let h=function(){function v(p){this._largestRange=
null;this._parent=p;this._updateLargestRange()}var z=v.prototype;z.rangeCreated=function(p){if(!this._largestRange||p.count>this._largestRange.count)this._largestRange=p};z.rangeResized=function(p,g){if(p===this._largestRange)p.count<g&&this._updateLargestRange();else if(!this._largestRange||p.count>this._largestRange.count)this._largestRange=p};z.findBestRange=function(p){let g=this._parent._freeHead,e=null;for(;null!==g;)g.count>=p&&(!e||g.count-p<e.count-p)&&(e=g),g=g.next;return e};z.findAdjacentRanges=
function(p,g){let e=!0,b=!1,a=null,c=this._parent._freeHead;for(;e&&!b;){const d=null!==c?c.from:this._parent._size;p>=(null!==a?a.from+a.count:0)&&p+g<=d?(e=!1,b=!0):null!==c?(a=c,c=c.next):e=!1}return[a,c]};z._updateLargestRange=function(){let p=null,g=this._parent._freeHead;for(;null!==g;){if(!p||g.count>p.count)p=g;g=g.next}this._largestRange=p};n._createClass(v,[{key:"largestRange",get:function(){return this._largestRange}}]);return v}(),r=function(){function v(p,g){this._allocated=0;this._size=
p;this._freeHead=0<p?{from:0,count:p,prev:null,next:null}:null;this._bookKeeper=g||new h(this);this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}var z=v.prototype;z.allocate=function(p){const g=this._bookKeeper.findBestRange(p);if(null===g)return-1;const e=g.from,b=g.count;g.from+=p;g.count-=p;this._bookKeeper.rangeResized(g,e,b);this._allocated+=p;0===g.count&&(p=null!==g.prev?this._freeHead:g.next,v._removeRange(g),this._freeHead=p);return e};z.free=function(p,g){const [e,b]=this._bookKeeper.findAdjacentRanges(p,
g);p={from:p,count:g,prev:e,next:b};null!==e&&(e.next=p);null!==b&&(b.prev=p);this._bookKeeper.rangeCreated(p);this._allocated-=g;if(null!==b&&p.from+p.count===b.from){g=p.from;var a=p.count;v._fuse(p,b);v._removeRange(b);this._bookKeeper.rangeResized(p,g,a);this._bookKeeper.rangeResized(b,void 0,0)}null!==e&&e.from+e.count===p.from&&(g=e.from,a=e.count,v._fuse(e,p),v._removeRange(p),this._bookKeeper.rangeResized(e,g,a),this._bookKeeper.rangeResized(p,void 0,0));this._freeHead=null!==p.prev?this._freeHead:
p};v._removeRange=function(p){null!==p.prev?null!==p.next?(p.prev.next=p.next,p.next.prev=p.prev):p.prev.next=null:null!==p.next&&(p.next.prev=null)};v._fuse=function(p,g){p.count+=g.count;p.next=g.next;g.from+=g.count;g.count=0;null!==g.next&&(g.next.prev=p)};n._createClass(v,[{key:"fragmentation",get:function(){const p=this._size-this._allocated;return 0===p?0:1-this._bookKeeper.largestRange.count/p}}]);return v}();u.FreeList=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/webgl/WGLBuffers":function(){define(["./Utils","../../../webgl/BufferObject","../../../webgl/enums","../../../webgl/VertexArrayObject"],function(u,n,h,r){return function(){function v(p){this.geometryMap=u.createGeometryData(()=>({indexBuffer:n.BufferObject.createIndex(p,h.Usage.STATIC_DRAW),vao:null}),(g,e)=>({vertexBuffer:n.BufferObject.createVertex(p,u.C_VBO_INFO[e])}))}var z=v.prototype;z.dispose=function(){for(let p=0;5>p;p++){const g=this.geometryMap[p];if(g){g.data.vao&&
g.data.vao.dispose(!1);g.data.indexBuffer&&g.data.indexBuffer.dispose();for(const e in g.buffers)g.buffers[e]&&g.buffers[e].data.vertexBuffer.dispose()}}};z.get=function(p){const g=this.geometryMap[p];return{getVAO(e,b,a){if(!g.data.vao){const c={};for(const d in g.buffers)c[d]=g.buffers[d].data.vertexBuffer;g.data.vao=new r.VertexArrayObject(e,a,b,c,g.data.indexBuffer)}return g.data.vao}}};z.has=function(p){return null!=this.geometryMap[p]};z.upload=function(p,g){g.forEach((e,b)=>{this._upload(e,
b,p)})};z._upload=function(p,g,e){p.indices&&(p.indices.allDirty?this._uploadIndices(e,g):null!=p.indices.from&&null!=p.indices.count&&this._uploadIndices(e,g,p.indices.from,p.indices.count));if(p.vertices){p=p.vertices;for(const b in p){const a=p[b];a.allDirty?this._uploadVertices(e,g,b):null!=a.from&&null!=a.count&&this._uploadVertices(e,g,b,a.from,a.count)}}};z._uploadVertices=function(p,g,e,b,a){const c=this.geometryMap[g];c&&(g=p.geometries[g].vertexBuffer[e])&&(p=g.stride,g=g.data.buffer,c.buffers[e]&&
0<g.byteLength&&(null!=b&&null!=a?c.buffers[e].data.vertexBuffer.setSubData(g,b*p,b*p,(b+a)*p):c.buffers[e].data.vertexBuffer.setData(g)))};z._uploadIndices=function(p,g,e,b){const a=this.geometryMap[g];a&&(p=p.geometries[g].indexBuffer.buffer,a.data.indexBuffer&&0<p.byteLength&&(null!=e&&null!=b?a.data.indexBuffer.setSubData(p,4*e,4*e,4*(e+b)):a.data.indexBuffer.setData(p)))};return v}()})},"esri/views/2d/engine/webgl/WGLTile":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat2d ../../../../chunks/mat3 ../../../../chunks/mat3f32 ../../../../chunks/vec2 ../../../../chunks/vec2f32 ./definitions ./TiledDisplayObject".split(" "),
function(u,n,h,r,v,z,p,g,e){let b=function(){function a(){}var c=a.prototype;c.acquire=function(d){return{refCount:1,version:-1,labelMat2d:v.create(),tileMat3:v.create(),dvs:v.create()}};c.release=function(d){};return a}();e=function(a){function c(f,l,m){return a.call(this,f,l,m,g.TILE_SIZE,g.TILE_SIZE)||this}n._inheritsLoose(c,a);var d=c.prototype;d.destroy=function(){a.prototype.destroy.call(this);this._transforms&&c.TransformCache.release(this.key.hash)};d.setTransform=function(f,l){var m=l/(f.resolution*
f.pixelRatio),k=this.transforms.tileMat3;const [q,t]=f.toScreenNoRotation([0,0],[this.x,this.y]);r.set(k,this.width/this.rangeX*m,0,0,0,this.height/this.rangeY*m,0,q,t,1);r.multiply(this.transforms.dvs,f.displayViewMat3,k);m=this.transforms.labelMat2d;l=f.getScreenTransform(m,l);k=p.create();z.transformMat2d(k,[this.x,this.y],l);h.fromTranslation(m,k);h.multiply(m,f.viewMat2d,m)};d._createTransforms=function(){return c.TransformCache.acquire(this.key.hash)};return c}(e.TiledDisplayObject);e.TransformCache=
new b;u.WGLTile=e;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/TiledDisplayObject":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/mat3","../DisplayObject","../../tiling/TileKey"],function(u,n,h,r,v){r=function(z){function p(e,b,a,c,d,f=c,l=d){var m=z.call(this)||this;m.triangleCountReportedInDebug=0;m.triangleCount=0;m.texture=null;m.key=new v(e);m.x=b;m.y=a;m.width=c;m.height=
d;m.rangeX=f;m.rangeY=l;return m}n._inheritsLoose(p,z);var g=p.prototype;g.destroy=function(){this.texture&&(this.texture.dispose(),this.texture=null)};g.setTransform=function(e,b){b/=e.resolution*e.pixelRatio;const a=this.transforms.tileMat3,[c,d]=e.toScreenNoRotation([0,0],[this.x,this.y]);h.set(a,this.width/this.rangeX*b,0,0,0,this.height/this.rangeY*b,0,c,d,1);h.multiply(this.transforms.dvs,e.displayViewMat3,a)};return p}(r.DisplayObject);u.TiledDisplayObject=r;Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/TileData":function(){define("exports ../../../../core/maybe ./enums ./MemoryRequirements ./TileBufferData ./TileDisplayData ./Utils ./WGLDisplayRecord ./cpuMapped/DisplayRecordReader ./mesh/VertexBuffer ./mesh/VertexVector ./util/Writer".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c){const d=new r,f=new r;r=function(){function l(){this.tileBufferData=this.tileDisplayData=null}var m=l.prototype;m.reshuffle=function(){d.reset();var k=
[[],[],[],[],[]];var q=this.tileDisplayData.displayObjects;for(var t of q)for(var w of t.displayRecords)k[w.geometryType].push(w);for(var A of k)for(var x of A)x&&d.needMore(x.geometryType,x.meshData?x.meshData.vertexCount:x.vertexCount,x.meshData?x.meshData.indexData.length:x.indexCount);A=k.length;x=new v;for(q=0;q<A;++q){x.geometries[q].indexBuffer=new Uint32Array(Math.round(1.5*d.indicesFor(q)));t=[];for(var y in this.tileBufferData.geometries[q].vertexBuffer)t.push(this.tileBufferData.geometries[q].vertexBuffer[y].stride);
t=l._computeVertexAlignment(t);w=Math.round(1.5*d.verticesFor(q));t=l._align(w,t);for(var B in this.tileBufferData.geometries[q].vertexBuffer)w=this.tileBufferData.geometries[q].vertexBuffer[B].stride,x.geometries[q].vertexBuffer[B]={stride:w,data:p.allocateTypedArrayBuffer(t,w)}}f.reset();this.tileDisplayData.displayList.clear();for(y=0;y<A;++y){B=k[y];for(const C of B){if(C.meshData)C.writeMeshDataToBuffers(f.verticesFor(y),x.geometries[y].vertexBuffer,f.indicesFor(y),x.geometries[y].indexBuffer),
C.meshData=null;else{B=this.tileBufferData.geometries[y].vertexBuffer;q=this.tileBufferData.geometries[y].indexBuffer;t=x.geometries[y].vertexBuffer;w=x.geometries[y].indexBuffer;const D=f.verticesFor(y),F=f.indicesFor(y);p.copyMeshData(D,F,t,w,C,B,q);C.vertexFrom=D;C.indexFrom=F}f.needMore(y,C.vertexCount,C.indexCount)}}for(const C of this.tileDisplayData.displayObjects)this.tileDisplayData.displayList.addToList(C.displayRecords);this.tileBufferData=x};m.getStrides=function(){const k=[];for(let q=
0;q<this.tileBufferData.geometries.length;++q){const t=this.tileBufferData.geometries[q];k[q]={};for(const w in t.vertexBuffer)k[q][w]=t.vertexBuffer[w].stride}return k};m.clone=function(){const k=new l;k.tileBufferData=this.tileBufferData.clone();k.tileDisplayData=this.tileDisplayData.clone();return k};m._guessSize=function(){const {displayObjects:k}=this.tileDisplayData,q=Math.min(k.length,4);let t=0;for(let w=0;w<q;w++)t=Math.max(t,k[w].displayRecords.length);return 2*(12*k.length+k.length*t*40)};
m.serialize=function(){const k=this.tileBufferData.serialize(),q=this.tileBufferData.getBuffers(),t=this.tileDisplayData.serialize(new c(Int32Array,this._guessSize())).buffer();q.push(t);return{result:{displayData:t,bufferData:k},transferList:q}};l.fromVertexData=function(k,q){const t={},w=new Map;for(const A of q)w.set(A.id,A);p.forEachGeometryType(A=>{const x=k.data[A];if(n.isSome(x)){const B=e.DisplayRecordReader.from(x.records).getCursor();for(;B.next();){var y=B.id;const C=B.materialKey,D=B.indexFrom,
F=B.indexCount,E=B.vertexFrom,G=B.vertexCount,O=w.get(y);y=new g(y,A,C);y.indexFrom=D;y.indexCount=F;y.vertexFrom=E;y.vertexCount=G;O.displayRecords.push(y)}t[A]=b.VertexBuffers.fromVertexData(x,A)}else t[A]=(new a.VertexVectors(A,0,h.WGLSymbologyType.DEFAULT)).intoBuffers()});return l.fromMeshData({displayObjects:q,vertexBuffersMap:t})};l.fromMeshData=function(k){const q=new l,t=new z,w=new v;t.displayObjects=k.displayObjects;for(const A in k.vertexBuffersMap){const x=k.vertexBuffersMap[A];w.geometries[A].indexBuffer=
x.indexBuffer;w.geometries[A].vertexBuffer=x.namedBuffers}q.tileDisplayData=t;q.tileBufferData=w;return q};l.bind=function(k,q){const t=new l;t.tileDisplayData=k;t.tileBufferData=q;return t};l.create=function(k,q){const t=new l;t.tileDisplayData=new z;t.tileDisplayData.displayObjects=k;const w=[0,0,0,0,0],A=[0,0,0,0,0],x=[[],[],[],[],[]];for(var y of k)for(var B of y.displayRecords)x[B.geometryType].push(B),w[B.geometryType]+=B.meshData.vertexCount,A[B.geometryType]+=B.meshData.indexData.length;k=
new v;q=[q.fill||{},q.line||{},q.icon||{},q.text||{},q.label||{}];for(y=0;5>y;y++){B=new Uint32Array(A[y]);{var C=q[y];var D=w[y];const F={};for(const E in C){const G={data:p.allocateTypedArrayBuffer(D,C[E]),stride:C[E]};F[E]=G}C=F}g.writeAllMeshDataToBuffers(x[y],C,B);k.geometries[y]={indexBuffer:B,vertexBuffer:C}}t.tileBufferData=k;return t};l._align=function(k,q){const t=k%q;return 0===t?k:k+(q-t)};l._computeVertexAlignment=function(k){let q=!1,t=!1;for(const w of k)2===w%4?q=!0:0!==w%4&&(t=!0);
return t?4:q?2:1};return l}();u.TileData=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/MemoryRequirements":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],function(u){return function(){function n(){this._byGeometryType=null}var h=n.prototype;h.reset=function(){this._byGeometryType=null};h.verticesFor=function(r){return this._byGeometryType?this._byGeometryType[r].vertices:0};h.indicesFor=function(r){return this._byGeometryType?
this._byGeometryType[r].indices:0};h.needMore=function(r,v,z){if(v||z)this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]),r=this._byGeometryType[r],r.vertices+=v,r.indices+=z};u._createClass(n,[{key:"satisfied",get:function(){return!this._byGeometryType}}]);return n}()})},"esri/views/2d/engine/webgl/TileBufferData":function(){define(["./Utils"],function(u){return function(){function n(){this.geometries=
[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}var h=n.prototype;h.clone=function(){const r=new n;for(let v=0;v<this.geometries.length;v++){const z=this.geometries[v],p=r.geometries[v];p.indexBuffer=z.indexBuffer.slice();p.vertexBuffer={};for(const g in z.vertexBuffer){const {data:e,stride:b}=z.vertexBuffer[g];p.vertexBuffer[g]={data:e.slice(),stride:b}}}return r};
n.deserialize=function(r){const v=new n;for(let z=0;5>z;++z){v.geometries[z].indexBuffer=new Uint32Array(r.geometries[z].indexBuffer);v.geometries[z].vertexBuffer={};for(const p in r.geometries[z].vertexBuffer)v.geometries[z].vertexBuffer[p]={data:u.allocateTypedArrayBufferwithData(r.geometries[z].vertexBuffer[p].data,r.geometries[z].vertexBuffer[p].stride),stride:r.geometries[z].vertexBuffer[p].stride}}return v};h.serialize=function(){const r={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,
vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]};for(let v=0;5>v;++v)for(const z in this.geometries[v].vertexBuffer)r.geometries[v].vertexBuffer[z]={data:this.geometries[v].vertexBuffer[z].data.buffer,stride:this.geometries[v].vertexBuffer[z].stride};return r};
h.getBuffers=function(){const r=[];for(let v=0;5>v;++v){r.push(this.geometries[v].indexBuffer.buffer);for(const z in this.geometries[v].vertexBuffer)r.push(this.geometries[v].vertexBuffer[z].data.buffer)}return r};return n}()})},"esri/views/2d/engine/webgl/TileDisplayData":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","./GraphicDisplayList","./WGLDisplayObject","./util/serializationUtils"],function(u,n,h,r){return function(){function v(){}var z=v.prototype;z.computeDisplayList=
function(){this._displayList=new n;for(const p of this.displayObjects)for(const g of p.displayRecords)this._displayList.addToList(g)};z.clone=function(){const p=new v;this.displayObjects&&(p.displayObjects=this.displayObjects.map(g=>g.clone()));return p};z.serialize=function(p){r.serializeList(p,this.displayObjects);return p};z._deserializeObjects=function(p){var g=p.readInt32();g=Array(g);const e=new Map;for(let b=0;b<g.length;++b){const a=h.deserialize(p);g[b]=a;e.set(a.id,a)}this.displayObjects=
g;this._displayList=null;this._displayObjectRegistry=e};v.deserialize=function(p){const g=new v;g._deserializeObjects(p);return g};u._createClass(v,[{key:"displayObjectRegistry",get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(const p of this.displayObjects)this._displayObjectRegistry.set(p.id,p)}return this._displayObjectRegistry}},{key:"displayList",get:function(){return this._displayList}}]);return v}()})},"esri/views/2d/engine/webgl/GraphicDisplayList":function(){define(["../../../../chunks/_rollupPluginBabelHelpers",
"./materialKey/MaterialKey"],function(u,n){function h(e,b,a,...c){b<e.length?e.splice(b,a,...c):e.push(...c)}let r=function(){function e(){this.symbolLevels=[]}var b=e.prototype;b.replay=function(a,c,d){for(const m of this.symbolLevels)for(const k of m.zLevels){var f=k.geometryDPInfo.unified;if(f)for(const q of f){const {geometryType:t,materialKey:w,indexFrom:A,indexCount:x}=q;f=n.MaterialKeyBase.load(w).symbologyType;f=a.painter.getBrush(t,f);var l=c.getGeometry(t);l={geometryType:t,materialKey:w,
indexFrom:A,indexCount:x,target:l};f.prepareState(a,c);f.drawGeometry(a,c,l,d)}}};b.clear=function(){this.symbolLevels.length=0};b.addToList=function(a,c){if(Array.isArray(a))for(const d of a)this._addToList(d,c);else this._addToList(a,c)};b.removeFromList=function(a){Array.isArray(a)||(a=[a]);let c=null;for(const d of a)c=this._removeFromList(d);return c};b.clone=function(){const a=new e;for(const c of this.symbolLevels)a.symbolLevels.push(c.clone());return a};b.splitAfter=function(a){const c=this._getDisplayList(a.symbolLevel,
a.zOrder),d=c.length,f=a.indexFrom+a.indexCount;for(let l=0;l<d;++l){const m=c[l];if(m.geometryType===a.geometryType&&f>m.indexFrom&&f<=m.indexFrom+m.indexCount)return f<m.indexFrom+m.indexCount&&(a=new v,a.geometryType=m.geometryType,a.materialKey=m.materialKey,a.indexFrom=f,a.indexCount=m.indexFrom+m.indexCount-f,c.splice(l+1,0,a),m.indexCount=f-m.indexFrom),l}};b._addToList=function(a,c){const d=this._getDisplayList(a.symbolLevel,a.zOrder);c=null!=c?c:d.length-1;var f=0<=c&&c<d.length?d[c]:null;
null!==f&&f.materialKey===a.materialKey&&f.indexFrom+f.indexCount===a.indexFrom&&f.geometryType===a.geometryType?f.indexCount+=a.indexCount:(f=new v,f.indexFrom=a.indexFrom,f.indexCount=a.indexCount,f.materialKey=a.materialKey,f.geometryType=a.geometryType,h(d,c+1,0,f))};b._removeFromList=function(a){const c=this._getDisplayList(a.symbolLevel,a.zOrder);var d=c.length;let f=void 0;for(var l=0;l<d;++l){var m=c[l];if(a.indexFrom+a.indexCount>m.indexFrom&&a.indexFrom<m.indexFrom+m.indexCount&&m.geometryType===
a.geometryType){f=l;break}}if(void 0!==f){d=c[f];if(a.indexFrom===d.indexFrom)return d.indexCount-=a.indexCount,d.indexFrom+=a.indexCount,0===d.indexCount&&h(c,f,1),f-1;if(a.indexFrom+a.indexCount===d.indexFrom+d.indexCount)return d.indexCount-=a.indexCount,0===d.indexCount?(h(c,f,1),f-1):f;{l=d.indexFrom;m=a.indexFrom-d.indexFrom;const k=a.indexCount;a=d.indexFrom+d.indexCount-(a.indexFrom+a.indexCount);d.indexCount=m;const q=new v;q.geometryType=d.geometryType;q.materialKey=d.materialKey;q.indexFrom=
l+m+k;q.indexCount=a;h(c,f+1,0,q);return f}}return null};b._getDisplayList=function(a,c){let d;var f=this.symbolLevels.length;for(let m=0;m<f;m++)if(this.symbolLevels[m].symbolLevel===a){d=this.symbolLevels[m];break}d||(d=new g,d.symbolLevel=a,this.symbolLevels.push(d));let l;a=d.zLevels.length;for(f=0;f<a;f++)if(d.zLevels[f].zLevel===c){l=d.zLevels[f];break}l||(l=new p,l.geometryDPInfo=new z,l.zLevel=c,d.zLevels.push(l));l.geometryDPInfo.unified||(l.geometryDPInfo.unified=[]);return l.geometryDPInfo.unified};
b.getDPInfoType=function(){return"unified"};u._createClass(e,[{key:"empty",get:function(){return!this.symbolLevels||0===this.symbolLevels.length}}]);return e}(),v=function(){function e(){this.materialKey=null;this.indexCount=this.indexFrom=0}e.prototype.clone=function(){const b=new e;b.geometryType=this.geometryType;b.materialKey=this.materialKey;b.indexFrom=this.indexFrom;b.indexCount=this.indexCount;return b};return e}(),z=function(){function e(){this.unified=this.label=this.text=this.marker=this.line=
this.fill=null}e.prototype.clone=function(){const b=new e;b.fill=this.fill&&this.fill.map(a=>a.clone());b.line=this.line&&this.line.map(a=>a.clone());b.marker=this.marker&&this.marker.map(a=>a.clone());b.text=this.text&&this.text.map(a=>a.clone());b.label=this.label&&this.label.map(a=>a.clone());b.unified=this.unified&&this.unified.map(a=>a.clone());return b};return e}(),p=function(){function e(){this.geometryDPInfo=new z}e.prototype.clone=function(){const b=new e;b.zLevel=this.zLevel;b.geometryDPInfo=
this.geometryDPInfo.clone();return b};return e}(),g=function(){function e(){this.zLevels=[]}e.prototype.clone=function(){const b=new e;b.symbolLevel=this.symbolLevel;for(const a of this.zLevels)b.zLevels.push(a.clone());return b};return e}();return r})},"esri/views/2d/engine/webgl/WGLDisplayObject":function(){define(["./WGLDisplayRecord","./util/serializationUtils"],function(u,n){return function(){function h(v){this.insertAfter=null;this.id=v;this.displayRecords=[]}var r=h.prototype;r.copy=function(){const v=
new h(this.id);v.set(this);return v};r.clone=function(){const v=new h(this.id);v.displayRecords=this.displayRecords.map(z=>z.clone());v.insertAfter=this.insertAfter;return v};r.set=function(v){this.id=v.id;this.displayRecords=v.displayRecords;this.insertAfter=v.insertAfter};r.serialize=function(v){v.push(this.id);n.serializeList(v,this.displayRecords);return v};h.deserialize=function(v){const z=v.readInt32(),p=new h(z);p.displayRecords=n.deserializeList(v,u,{id:z});return p};return h}()})},"esri/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["../../../../chunks/_rollupPluginBabelHelpers",
"./MeshData","./Utils"],function(u,n,h){return function(){function r(z,p,g,e=0,b=0){this.id=z;this.geometryType=p;this.materialKey=g;this.minZoom=e;this.maxZoom=b;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}var v=r.prototype;v.clone=function(){return this.copy()};v.copy=function(){const z=new r(this.id,this.geometryType,this.materialKey);z.vertexFrom=this.vertexFrom;z.vertexCount=this.vertexCount;z.indexFrom=this.indexFrom;z.indexCount=
this.indexCount;z.zOrder=this.zOrder;z.symbolLevel=this.symbolLevel;z.meshData=this.meshData;z.minZoom=this.minZoom;z.maxZoom=this.maxZoom;return z};v.setMeshDataFromBuffers=function(z,p,g){const e=new n;for(const b in p){const a=p[b].stride,c=p[b].data,d=[],f=h.strideToPackingFactor(a);for(let l=0;l<a*z.vertexCount/f;++l)d[l]=c[l+a*z.vertexFrom/f];e.vertexData.set(b,d)}e.indexData.length=0;for(p=0;p<z.indexCount;++p)e.indexData[p]=g[p+z.indexFrom]-z.vertexFrom;e.vertexCount=z.vertexCount;this.meshData=
e};v.readMeshDataFromBuffers=function(z,p){this.meshData?this.meshData.clear():this.meshData=new n;for(const g in z){const e=z[g].stride,b=z[g].data,a=[],c=h.strideToPackingFactor(e);for(let d=0;d<e*this.vertexCount/c;++d)a[d]=b[d+e*this.vertexFrom/c];this.meshData.vertexData.set(g,a)}this.meshData.indexData.length=0;for(z=0;z<this.indexCount;++z)this.meshData.indexData[z]=p[z+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};v.writeMeshDataToBuffers=function(z,p,g,e){for(const b in p){const a=
p[b].stride,c=this.meshData.vertexData.get(b),d=p[b].data,f=h.strideToPackingFactor(a);for(let l=0;l<a*this.meshData.vertexCount/f;++l)d[l+a*z/f]=c[l]}for(p=0;p<this.meshData.indexData.length;++p)e[p+g]=this.meshData.indexData[p]+z;this.vertexFrom=z;this.vertexCount=this.meshData.vertexCount;this.indexFrom=g;this.indexCount=this.meshData.indexData.length};r.writeAllMeshDataToBuffers=function(z,p,g){let e=0,b=0;for(const a of z)a.writeMeshDataToBuffers(e,p,b,g),e+=a.vertexCount,b+=a.indexCount};v._computeSortKey=
function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};v.serialize=function(z){z.push(this.geometryType);z.push(this.materialKey);z.push(this.vertexFrom);z.push(this.vertexCount);z.push(this.indexFrom);z.push(this.indexCount);z.push(this.minZoom);z.push(this.maxZoom);return z};r.deserialize=function(z,p){const g=z.readInt32(),e=z.readInt32();p=new r(p.id,g,e);p.vertexFrom=z.readInt32();p.vertexCount=z.readInt32();p.indexFrom=z.readInt32();p.indexCount=z.readInt32();
p.minZoom=z.readInt32();p.maxZoom=z.readInt32();return p};u._createClass(r,[{key:"sortKey",get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey}}]);return r}()})},"esri/views/2d/engine/webgl/MeshData":function(){define(function(){return function(){function u(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}var n=u.prototype;n.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};n.update=function(h,r,v){for(const z in h)this.vertexData.set(z,
h[z]);for(const z in this.vertexData)null===h[z]&&this.vertexData.delete(z);this.vertexCount=r;this.indexData=v};return u}()})},"esri/views/2d/engine/webgl/util/serializationUtils":function(){define(["exports"],function(u){u.deserializeList=function(n,h,r){var v=n.readInt32();v=Array(v);for(let z=0;z<v.length;z++)v[z]=h.deserialize(n,r);return v};u.serializeList=function(n,h){if(null===h)n.push(0);else{n.push(h.length);for(const r of h)r.serialize(n);return n}};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/cpuMapped/DisplayRecordReader":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../definitions"],function(u,n,h,r){let v=function(){function p(e){this._cursor=this._head=e}p.from=function(e,b=0,a=e.byteLength/z.BYTES_PER_RECORD-b){e=new z(new Int32Array(e,b*z.BYTES_PER_RECORD,a*z.ELEMENTS_PER_RECORD));return new p(e)};var g=p.prototype;g.size=function(){let e=this._cursor,
b=0;for(;e;)b+=e.size(),e=e._link;return b};g.seekIndex=function(e){for(this._cursor=this._head;this._cursor;){const b=this._cursor.size();if(e<b)return this._cursor._index=e,!0;e-=b;this._cursor=this._cursor._link}return!1};g.forEach=function(e){const b=this.getCursor();for(;b.next();)e(b)};g.link=function(e){if(this._head){for(var b=this._head;b._link;)b=b._link;b._link=e._head;b._link._indexStart=b._indexStart+b.size()}else this._head=e._head};g.getCursor=function(){return this.copy()};g.lookup=
function(e){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(e);){if(!this._cursor._link)return!1;this._cursor=this._cursor._link}return!!this._cursor};g.copy=function(){var e;const b=new p(null==(e=this._head)?void 0:e.copy());if(!b._head)return b;e=b._head;let a=b._head._link;for(;a;)e._link=a.copy(),e=a,a=e._link;return b};g.next=function(){if(!this._cursor)return!1;if(!this._cursor.next()){if(!this._cursor._link)return!1;this._cursor=this._cursor._link;return this.next()}return!0};
g.peekId=function(){var e;return null!=(e=this._cursor.peekId())?e:this._cursor._link.peekId()};g.delete=function(e){let b=this._head,a=null;for(;b;){if(b.delete(e))return b.isEmpty()&&(h.isSome(a)&&(a._link=b._link),b===this._head&&(this._head=b._link),b===this._cursor&&(this._cursor=b._link)),!0;a=b;b=b._link}return!1};n._createClass(p,[{key:"id",get:function(){return this._cursor.id},set:function(e){this._cursor.id=e}},{key:"materialKey",get:function(){return this._cursor.materialKey},set:function(e){this._cursor.materialKey=
e}},{key:"insertAfter",get:function(){return this._cursor.insertAfter}},{key:"indexFrom",get:function(){return this._cursor.indexFrom},set:function(e){this._cursor.indexFrom=e}},{key:"indexCount",get:function(){return this._cursor.indexCount},set:function(e){this._cursor.indexCount=e}},{key:"vertexFrom",get:function(){return this._cursor.vertexFrom},set:function(e){this._cursor.vertexFrom=e}},{key:"vertexCount",get:function(){return this._cursor.vertexCount},set:function(e){this._cursor.vertexCount=
e}},{key:"sortKey",get:function(){return this._cursor.sortKey},set:function(e){this._cursor.sortKey=e}},{key:"index",get:function(){return this._cursor._indexStart+this._cursor._index}}]);return p}();v.ELEMENTS_PER_RECORD=r.DISPLAY_RECORD_INT_PER_ELEMENT;v.BYTES_PER_RECORD=v.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;let z=function(){function p(e){this._link=null;this._index=-1;this._deletedCount=this._indexStart=0;this._offsets={instance:null};this._packedRecords=e}p.from=function(e,b=0,a=
e.byteLength/this.BYTES_PER_RECORD-b){return new p(new Int32Array(e,b*this.BYTES_PER_RECORD,a*this.ELEMENTS_PER_RECORD))};var g=p.prototype;g.delete=function(e){const b=this._index,a=this.lookup(e);if(a)for(this.id=2147483647,++this._deletedCount;this.next()&&this.id===e;)this.id=2147483647,++this._deletedCount;this._index=b;return a};g.isEmpty=function(){return this._deletedCount===this.size()};g.link=function(e){this._link?this._link.link(e):this._link=e};g.lookup=function(e){if(h.isNone(this._offsets.instance)){this._offsets.instance=
new Map;var b=this.copy();b._index=-1;let a=0;for(;b.next();)b.id!==a&&(this._offsets.instance.set(b.id,b._index),a=b.id)}if(!this._offsets.instance.has(e))return!1;b=this._index;this._index=this._offsets.instance.get(e);return 2147483647===this.id?(this._index=b,!1):!0};g.size=function(){return this._packedRecords.length/p.ELEMENTS_PER_RECORD};g.next=function(){for(;++this._index<this.size()&&2147483647===this.id;);return this._index<this.size()};g.peekId=function(){const e=(this._index+1)*p.ELEMENTS_PER_RECORD;
return e>=this._packedRecords.length?0:this._packedRecords[e]};g.getCursor=function(){return this.copy()};g.copy=function(){const e=new p(this._packedRecords);e._indexStart=this._indexStart;e._link=this._link;e._index=this._index;e._offsets=this._offsets;e._deletedCount=this._deletedCount;return e};n._createClass(p,[{key:"id",get:function(){return this._packedRecords[this._index*p.ELEMENTS_PER_RECORD]},set:function(e){this._packedRecords[this._index*p.ELEMENTS_PER_RECORD]=e}},{key:"materialKey",get:function(){return this._packedRecords[this._index*
p.ELEMENTS_PER_RECORD+1]},set:function(e){this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+1]=e}},{key:"insertAfter",get:function(){return this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+2]}},{key:"indexFrom",get:function(){return this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+3]},set:function(e){this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+3]=e}},{key:"indexCount",get:function(){return this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+4]},set:function(e){this._packedRecords[this._index*
p.ELEMENTS_PER_RECORD+4]=e}},{key:"vertexFrom",get:function(){return this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+5]},set:function(e){this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+5]=e}},{key:"vertexCount",get:function(){return this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+6]},set:function(e){this._packedRecords[this._index*p.ELEMENTS_PER_RECORD+6]=e}},{key:"sortKey",get:function(){this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer));
return this._packedRecordsF32[this._index*p.ELEMENTS_PER_RECORD+7]},set:function(e){this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer));this._packedRecordsF32[this._index*p.ELEMENTS_PER_RECORD+7]=e}},{key:"index",get:function(){return this._index}}]);return p}();z.ELEMENTS_PER_RECORD=r.DISPLAY_RECORD_INT_PER_ELEMENT;z.BYTES_PER_RECORD=z.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;u.DisplayRecordReader=v;Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["exports","../Utils"],function(u,n){let h=function(){function v(z,p){this.data=z;this.stride=p}v.decode=function(z){const p=n.allocateTypedArrayBufferwithData(z.data,z.stride);return new v(p,z.stride)};v.fromVertexVector=function(z){const p=n.allocateTypedArrayBufferwithData(z.data.buffer(),z.stride);return new v(p,z.stride)};return v}(),r=function(){function v(z,p,g){this.geometryType=z;this.indexBuffer=
new Uint32Array(p);this.namedBuffers=g}v.decode=function(z){const p=z.geometryType,g=z.indexBuffer,e={};for(const b in z.namedBuffers)e[b]=h.decode(z.namedBuffers[b]);return new v(p,g,e)};v.fromVertexData=function(z,p){const g=z.indices,e=n.allocateTypedArrayBufferwithData(z.vertices,z.stride);z={geometry:new h(e,z.stride)};return new v(p,g,z)};v.fromVertexVectors=function(z){const p=z.geometryType,g=z.indexVector.buffer(),e={};for(const b in z.namedVectors)e[b]=h.fromVertexVector(z.namedVectors[b]);
return new v(p,g,e)};return v}();u.VertexBuffers=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/VertexVector":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../Utils","./VertexBuffer","../util/Writer"],function(u,n,h,r,v){let z=function(){function g(e,b){this.data=e;this.stride=b}g.prototype.transfer=function(e,b){const a=this.data.buffer();e.vertexCount=this.vertexCount;e.data=a;e.stride=
this.stride;b.push(a)};n._createClass(g,[{key:"vertexCount",get:function(){const e=this.data.length/(this.stride/4);e!==(e|0)&&console.debug("Corrupted stride");return e}}]);return g}(),p=function(){function g(b,a,c){this.geometryType=b;this.indexVector=new v(Uint32Array,6*a);this.namedVectors={};b=h.getStrides(b,c);for(const d in b){c=b[d];let f;switch(c%4){case 0:case 2:f=new v(Uint32Array,c*a);break;case 1:case 3:f=new v(Uint8Array,c*a)}this.namedVectors[d]=new z(f,c)}}var e=g.prototype;e.get=
function(b){return this.namedVectors[b].data};e.getVector=function(b){return this.namedVectors[b]};e.transfer=function(b,a){const c=this.indexVector.buffer(),d={};a.push(c);for(const f in this.namedVectors){const l=this.namedVectors[f];d[f]={};l.transfer(d[f],a)}b.geometryType=this.geometryType;b.indexBuffer=c;b.namedBuffers=d;this.destroy()};e.intoBuffers=function(){const b=r.VertexBuffers.fromVertexVectors(this);this.destroy();return b};e.destroy=function(){this.namedVectors=this.indexVector=null};
return g}();u.VertexVector=z;u.VertexVectors=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers"],function(u){return function(){function n(r,v){this._pos=0;v=v?this._roundToNearest(v,r.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(v);this._buffer=new r(this._array);this._ctor=r;this._i16View=new Int16Array(this._array)}var h=n.prototype;h._roundToNearest=
function(r,v){r=Math.round(r);return r+(v-r%v)};h._ensureSize=function(r){if(this._pos+r>=this._buffer.length){r=this._roundToNearest(1.25*(this._array.byteLength+r*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);r=new ArrayBuffer(r);const v=new this._ctor(r);v.set(this._buffer,0);this._array=r;this._buffer=v;this._i16View=new Int16Array(this._array)}};h.ensureSize=function(r){this._ensureSize(r)};h.writeF32=function(r){this._ensureSize(1);const v=this._pos;(new Float32Array(this._array,
4*this._pos,1))[0]=r;this._pos++;return v};h.push=function(r){this._ensureSize(1);const v=this._pos;this._buffer[this._pos++]=r;return v};h.writeFixed=function(r){this._buffer[this._pos++]=r};h.setValue=function(r,v){this._buffer[r]=v};h.i1616Add=function(r,v,z){this._i16View[2*r]+=v;this._i16View[2*r+1]+=z};h.getValue=function(r){return this._buffer[r]};h.incr=function(r){if(this._buffer.length<r)throw Error("Increment index overflows the target buffer");this._buffer[r]++};h.decr=function(r){this._buffer[r]--};
h.writeRegion=function(r){this._ensureSize(r.length);const v=this._pos;this._buffer.set(r,this._pos);this._pos+=r.length;return v};h.writeManyFrom=function(r,v,z){for(this._ensureSize(z-v);v!==z;v++)this.writeFixed(r._buffer[v])};h.buffer=function(){const r=this._array.slice(0,4*this._pos);this.destroy();return r};h.toArray=function(){const r=this._array,v=[];for(let z=0;z<r.byteLength/4;z++)v.push(r[z]);return v};h.seek=function(r){this._pos=r};h.destroy=function(){this._buffer=this._array=null};
u._createClass(n,[{key:"length",get:function(){return this._pos}}]);return n}()})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../tiling/PagedTileQueue ../../../tiling/TileInfoView ../../../tiling/TileKey ../../../tiling/TileQueue ../../../tiling/TileStrategy ../definitions ../DisplayId ../enums ../Utils ./VertexDataWriter ../../../layers/features/support/tileUtils".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d){function f(m){switch(m){case 1:case 8:case 32:return-1;
case 2:case 64:return 0;case 4:case 16:case 128:return 1}}function l(m){switch(m){case 1:case 2:case 4:return-1;case 8:case 16:return 0;case 32:case 64:case 128:return 1}}h=function(){function m(q,t,w,A,x,y=0){this.hasRecords=this._hasAggregate=!1;this._data={self:new Map,neighbors:[]};this._version=0;this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,sortKey:0,id:0,materialKey:0,indexStart:0,vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0};this.hint=
t;this.tileKey=q;this._hasAggregate=A;this._pixelBufferEnabled=x;this._version=y;this._symbologyType=w}var k=m.prototype;k.serialize=function(q){const t=[];t.push(this._serializeTileVertexData(this.tileKey,this.tileKey,this._data.self));this._data.neighbors.forEach((w,A)=>{var x=1<<A;A=f(x);x=l(x);A=d.getPow2NeighborKey(new v(this.tileKey),A,x,q);A=this._serializeTileVertexData(this.tileKey,A.id,w.vertexData);A.message.bufferIds=w.displayIds;t.push(A)});return t};k._serializeTileVertexData=function(q,
t,w){var A,x,y,B,C;const D=[];w={[b.WGLGeometryType.MARKER]:null==(A=w.get(b.WGLGeometryType.MARKER))?void 0:A.serialize(D),[b.WGLGeometryType.FILL]:null==(x=w.get(b.WGLGeometryType.FILL))?void 0:x.serialize(D),[b.WGLGeometryType.LINE]:null==(y=w.get(b.WGLGeometryType.LINE))?void 0:y.serialize(D),[b.WGLGeometryType.TEXT]:null==(B=w.get(b.WGLGeometryType.TEXT))?void 0:B.serialize(D),[b.WGLGeometryType.LABEL]:null==(C=w.get(b.WGLGeometryType.LABEL))?void 0:C.serialize(D)};return{message:{tileKeyOrigin:q,
tileKey:t,data:w,version:this._version},transferList:D}};k.featureStart=function(q,t){this._current.insertAfter=q;this._current.sortKey=t};k.featureEnd=function(){};k.recordStart=function(q,t,w,A){this._current.writer=this._getVertexWriter(w);this._current.overlaps=0;this._current.indexStart=this._current.writer.indexCount;this._current.vertStart=this._current.writer.vertexCount;this._current.bufferingEnabled=A;this._current.id=q;this._current.materialKey=t;this._current.geometryType=w;this._current.isDotDensity=
!1;this._current.writer.recordStart()};k.recordCount=function(){return this._current.writer.recordCount};k.vertexCount=function(){return this._current.writer.vertexCount};k.indexCount=function(){return this._current.writer.indexCount};k.vertexEnsureSize=function(q){this._current.writer.vertexEnsureSize(q)};k.indexEnsureSize=function(q){this._current.writer.indexEnsureSize(q)};k.vertexBounds=function(q,t,w,A){this._current.bufferingEnabled&&this._addOverlap(q,t,w,A)};k.vertexWrite=function(q){this._current.writer.writeVertex(q)};
k.vertexWriteF32=function(q){this._current.writer.writeVertexF32(q)};k.vertexEnd=function(){};k.vertexWriter=function(){return this._current.writer.vertexWriter};k.indexWrite=function(q){this._current.writer.writeIndex(q)};k.indexWriter=function(){return this._current.writer.indexWriter};k.metricWriter=function(){return this._current.writer.metricWriter};k.metricStart=function(q,t,w,A,x,y,B,C){this._current.writer=this._getVertexWriter(b.WGLGeometryType.LABEL);const D=this._current.writer.metricWriter;
D.push(e.getDisplayIdTexel(q));D.push(t);D.push(w);D.push(A);D.push(x);D.push(y);D.push(B);D.push(C);D.push(255);this._current.metricBoxLenPointer=D.push(0)};k.metricEnd=function(){const q=this._current.writer.metricWriter;0===q.getValue(this._current.metricBoxLenPointer)&&q.seek(q.length-10)};k.metricBoxWrite=function(q,t,w,A){const x=this._current.writer.metricWriter;x.incr(this._current.metricBoxLenPointer);x.push(0);x.push(0);x.push(q);x.push(t);x.push(w);x.push(A)};k.recordEnd=function(){var q=
this._current.vertStart,t=this._current.writer.vertexCount-q;if(!t)return!1;this.hasRecords=!0;var w=this._current.indexStart;this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,w,this._current.writer.indexCount-w,q,t,this._current.sortKey);if(!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===b.WGLGeometryType.LABEL)return!0;q=this._current.writer;for(t=0;8>t;t++){var A=1<<t;if(this._current.overlaps&
A){this._data.neighbors[t]||(this._data.neighbors[t]={vertexData:new Map,displayIds:new Set});w=this._data.neighbors[t];var x=this._current.geometryType;if(!w.vertexData.has(x)){var y=a.getStrides(x,this._symbologyType).geometry;y=new c.VertexDataWriter(x,y,g.PATCH_PIXEL_BUFFER_ALLOC_SIZE);w.vertexData.set(x,y)}x=w.vertexData.get(this._current.geometryType);y=4096*-f(A);A=4096*-l(A);x.copyLastFrom(q,y,A);w.displayIds.add(this._current.id)}}return!0};k._addOverlap=function(q,t,w,A){this._current.overlaps|=
255^((q<0+w?148:q>=g.TILE_SIZE-w?41:189)|(t<0+A?224:t>=g.TILE_SIZE-A?7:231))};k._getVertexWriter=function(q){if(!this._data.self.has(q)){const t=this._data.self,w=a.getStrides(q,this._symbologyType).geometry;t.set(q,new c.VertexDataWriter(q,w,this.hint.records))}return this._data.self.get(q)};n._createClass(m,[{key:"hasAggregates",get:function(){return this._hasAggregate}},{key:"hasPixelBufferEnabled",get:function(){return this._pixelBufferEnabled}}]);return m}();u.MeshData=h;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/DisplayId":function(){define(["exports"],function(u){u.AGGREGATE_VALID_FILTERS_MASK=254;u.DISPLAY_ID_TEXEL_MASK=8388607;u.DISPLAY_ID_TYPE_AGGREGATE=1;u.DISPLAY_ID_TYPE_FEATURE=0;u.DISPLAY_ID_TYPE_MASK=8388608;u.NONAGGREGATE_VALID_FILTERS_MASK=255;u.createDisplayId=function(n,h){return((h?8388608:0)|n)>>>0};u.getDisplayIdFilterMask=n=>1===(n&8388608)>>>23?254:255;u.getDisplayIdTexel=n=>n&8388607;u.getDisplayIdType=
n=>(n&8388608)>>>23;u.isAggregateId=function(n){return 1===(n&8388608)>>>23};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/VertexDataWriter":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../definitions","./heuristics","../util/Writer"],function(u,n,h,r,v){let z=function(){function p(e,b,a){this._start={index:0,vertex:0};a=r.getMeshSizeHint(e,b,a);b/=4;this.geometryType=e;this._records=
new v(Int32Array,a.recordBytes);this._indices=new v(Uint32Array,a.indexBytes);this._vertices=new v(Uint32Array,a.vertexBytes);this._metrics=new v(Float32Array,0);this._strideInt=b}var g=p.prototype;g.serialize=function(e){const b=this._records.buffer(),a=this._indices.buffer(),c=this._vertices.buffer(),d=this._metrics.length?this._metrics.buffer():null,f=4*this._strideInt;e.push(b,a,c);return{stride:f,records:b,indices:a,vertices:c,metrics:d}};g.vertexEnsureSize=function(e){this._vertices.ensureSize(e)};
g.indexEnsureSize=function(e){this._indices.ensureSize(e)};g.recordStart=function(){this._start.index=this._indices.length;this._start.vertex=this._vertices.length};g.recordEnd=function(e,b,a,c,d,f,l,m){this._records.push(e);this._records.push(b);this._records.push(a);this._records.push(c);this._records.push(d);this._records.push(f);this._records.push(l);this._records.writeF32(m)};g.writeIndex=function(e){this._indices.push(e)};g.writeVertex=function(e){this._vertices.push(e)};g.writeVertexF32=function(e){this._vertices.writeF32(e)};
g.copyLastFrom=function(e,b,a){var c=e._records.length-h.DISPLAY_RECORD_INT_PER_ELEMENT;const d=e._records.getValue(c),f=e._records.getValue(c+1),l=e._records.getValue(c+2),m=e._records.getValue(c+4),k=e._records.getValue(c+6);c=e._records.getValue(c+7);const q=this._vertices.length;var t=(e._start.vertex-this._vertices.length)/this._strideInt;const w=this._indices.length,A=this.vertexCount;for(var x=e._start.index;x!==e._indices.length;x++){const y=e._indices.getValue(x);this._indices.push(y-t)}for(t=
e._start.vertex;t!==e._vertices.length;t++)x=e._vertices.getValue(t),this._vertices.push(x);for(e=q;e<=this._vertices.length;e+=this._strideInt)this._vertices.i1616Add(e,b,a);this._records.push(d);this._records.push(f);this._records.push(l);this._records.push(w);this._records.push(m);this._records.push(A);this._records.push(k);this._records.push(c)};n._createClass(p,[{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",get:function(){return this._records.length/h.DISPLAY_RECORD_INT_PER_ELEMENT}},
{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},{key:"vertexWriter",get:function(){return this._vertices}},{key:"metricWriter",get:function(){return this._metrics}}]);return p}();u.VertexDataWriter=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/heuristics":function(){define(["exports",
"../definitions","../enums"],function(u,n,h){const r=new Map;r.set(h.WGLGeometryType.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4});r.set(h.WGLGeometryType.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8});r.set(h.WGLGeometryType.FILL,{multiplier:1,indicesPerRecord:10,verticesPerRecord:10});r.set(h.WGLGeometryType.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});r.set(h.WGLGeometryType.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});u.getMeshHeuristic=
function(v){return r.get(v)};u.getMeshSizeHint=function(v,z,p){const {indicesPerRecord:g,multiplier:e,verticesPerRecord:b}=r.get(v);return{recordBytes:p*n.DISPLAY_RECORD_INT_PER_ELEMENT*Uint32Array.BYTES_PER_ELEMENT,indexBytes:e*g*p*Uint32Array.BYTES_PER_ELEMENT,vertexBytes:e*b*p*z}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/tileUtils":function(){define(["exports","./Tile"],function(u,n){function h(r,v,z,p){r=
r.clone();const g=1<<r.level;v=r.col+v;z=r.row+z;p&&0>v?(r.col=v+g,--r.world):v>=g?(r.col=v-g,r.world+=1):r.col=v;r.row=z;return r}u.getPow2NeighborKey=h;u.getPow2NeighborTile=function(r,v,z){v=h(r.key,v,z,r.tileInfoView.tileInfo.isWrappable);return new n.Tile(r.tileInfoView,v)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/maybe ../../../../../../core/promiseUtils ../../../../../../geometry/libtess ../../DisplayId ../templates/WGLLabelTemplate ../templates/WGLMarkerTemplate ../templates/WGLTemplateStore".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(){function a(d,f,l){this._loadPromise=z.loadLibtess();this._geometryType=d;this._idField=f;this._templateStore=l}var c=a.prototype;c.update=function(d,f){r.isSome(d.mesh.labels)&&(this._labelTemplates=this._createLabelTemplates(d.mesh.labels,f));this._schema=d};c._createLabelTemplates=function(d,f){const l=new Map;if("simple"===d.type){for(var m of d.classes)d=g.fromLabelClass(m,f),l.set(m.index,d);return l}for(const k in d.classes){m=d.classes[k];for(const q of m)m=
g.fromLabelClass(q,f),l.set(q.index,m)}return l};c.analyze=function(){var d=n._asyncToGenerator(function*(f,l,m,k,q,t,w){if(!v.isAborted(w)){var A;"dictionary"===m.type&&(A=yield m.analyze(this._idField,f.copy(),l,q,t,w));for(l=0;f.next();){var x=void 0;x=A?A[l++]:r.isSome(k)&&p.isAggregateId(f.getDisplayId())&&1!==f.readAttribute("cluster_count")?k.match(this._idField,f,this._geometryType,q,t):m.match(this._idField,f,this._geometryType,q,t);f.setGroupId(x);if(b.isDynamicId(x)){x=this._templateStore.getDynamicTemplateGroup(x);
for(const y of x)y&&y.analyze&&y.analyze(this._templateStore,f,q,t)}}yield this._loadPromise;return this._templateStore.finalize(w)}});return function(f,l,m,k,q,t,w){return d.apply(this,arguments)}}();c.analyzeGraphics=function(){var d=n._asyncToGenerator(function*(f,l,m,k,q,t){if(!v.isAborted(t)){f=f.getCursor();for(m&&(yield m.analyze(this._idField,f.copy(),l,k,q,t));f.next();){l=f.getGroupId();if(null==l||-1===l)l=m.match(this._idField,f,f.geometryType,k,q),f.setGroupId(l);if(b.isDynamicId(l)){const w=
this._templateStore.getDynamicTemplateGroup(l);for(const A of w)A&&A.analyze&&A.analyze(this._templateStore,f,k,q)}f.setGroupId(l)}yield this._loadPromise;return this._templateStore.finalize(t)}});return function(f,l,m,k,q,t){return d.apply(this,arguments)}}();c.writeGraphic=function(d,f,l,m){const k=f.getGroupId(),q=f.getDisplayId(),t=this._templateStore.getTemplateGroup(k);d.featureStart(f.insertAfter,0);if(null!=q){if(b.isDynamicId(k))for(const w of t)w&&w.bindFeature(f,null,null);if(t){for(const w of t)w&&
w.write(d,f,l,m);d.featureEnd()}}};c.writeCursor=function(d,f,l,m,k,q,t){const w=f.getGroupId(),A=f.getDisplayId(),x=this._templateStore.getTemplateGroup(w),y=this._schema.mesh.sortKey;let B=0;r.isSome(y)&&(B=null!=y.fieldIndex?f.getComputedNumericAtIndex(y.fieldIndex):null!=y.field?f.readAttribute(y.field):f.readAttribute(this._idField),B*="asc"===y.order?1:-1);d.featureStart(0,null==B||isNaN(B)?0:B);if(null!=A&&x){if(b.isDynamicId(w))for(const C of x)C.bindFeature(f,l,m);for(const C of x)C.write(d,
f,k,t);r.isSome(q)&&d.hasRecords&&(l=q&&this._findLabelRef(x),this._writeLabels(d,f,q,l,k,t));d.featureEnd()}};c._findLabelRef=function(d){for(const f of d)if(f instanceof e)return f;return null};c._writeLabels=function(d,f,l,m,k,q){for(const t of l)if(r.isSome(t)&&t){const {glyphs:w,rtl:A,index:x}=t;l=this._labelTemplates.get(x);l.setZoomLevel(k);l.bindReferenceTemplate(m);l.bindTextInfo(w,A);l.write(d,f,null,q)}};n._createClass(a,[{key:"templates",get:function(){return this._templateStore}}]);return a}();
u.WGLMeshFactory=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/mathUtils ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../alignmentUtils ../../color ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./segmentUtils ./WGLTextTemplate".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){const m=h.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),k=(t,w="mapview-labeling")=>m.error(new n(w,t)),q=function(t){const w=new Map;return A=>{w.has(A)||w.set(A,t(A));return w.get(A)}}(t=>{let w=0;if(0===t)return Infinity;for(;!(t%2);)w++,t/=2;return w});return function(t){function w(x,y,B,C){var D,F,E;var G=t.call(this,x,B.font.size,B.haloSize||0,B.font.size,B.color&&e.premultiplyAlphaRGBAArray(B.color)||0,B.haloColor&&e.premultiplyAlphaRGBAArray(B.haloColor)||
0,B.horizontalAlignment,B.verticalAlignment,g.isMapAligned(y.labelPlacement)?p.Alignment.MAP:p.Alignment.SCREEN,B.font.decoration,!1,B.angle||0,B.xoffset,B.yoffset,B.lineWidth,B.lineHeight,null,null,null,null,null)||this;G._outLineLabelAngle=0;G._refPlacementPadding=0;G._refPlacementDirX=0;G._refPlacementDirY=0;G._refOffsetX=0;G._refOffsetY=0;G._zoomLevel=0;G.geometryType=a.WGLGeometryType.LABEL;G._allowOverrun=null!=(D=y.allowOverrun)?D:!1;G._repeatLabel=null!=(F=y.repeatLabel)?F:!0;G._labelPosition=
null!=(E=y.labelPosition)?E:"curved";D=!!y.minScale&&C.scaleToZoom(y.minScale)||0;D=r.clamp(D,0,25.5);C=!!y.maxScale&&C.scaleToZoom(y.maxScale)||255;C=r.clamp(C,0,25.5);const [O,H]=g.getAlignmentFromPlacement(y.labelPlacement);G._xAlignD=O;G._yAlignD=H;G._minZoom=D;G._maxZoom=C;G._refPlacementPadding=z.pt2px(B.haloSize)+b.TEXT_PLACEMENT_PADDING;G._repeatLabelDistance=y.repeatLabelDistance?z.pt2px(y.repeatLabelDistance):128;x=d.LabelMaterialKey.load(x);x.sdf=!0;G._materialKey=x.data;return G}u._inheritsLoose(w,
t);w.fromLabelClass=function(x,y){if("esriServerLinePlacementCenterAlong"===x.labelPlacement){const B=x.symbol;B.xoffset=0;B.yoffset=0;B.angle=0;B.font.decoration="none"}return new w(x.materialKey,x,x.symbol,y)};var A=w.prototype;A.setZoomLevel=function(x){this._zoomLevel=x};A.bindReferenceTemplate=function(x){let y=g.getXDirection(this._xAlignD),B=g.getYDirection(this._yAlignD);this._refOffsetY=this._refOffsetX=0;if(v.isNone(x))this._refSymbolAndPlacementOffset=c.i8888to32(0,0,Math.floor(127*y+127),
Math.floor(127*B+127));else{if("circle"===x.boundsType&&(y||B)){var C=Math.sqrt(y*y+B*B);y/=C;B/=C}C=Math.max(x.height,x.width);this._refSymbolAndPlacementOffset=c.i8888to32(4*this._refPlacementPadding,C,Math.floor(127*y+127),Math.floor(127*B+127));this._referenceSize=C;this._refPlacementDirX=y;this._refPlacementDirY=B;this._refOffsetX=x.xOffset;this._refOffsetY=x.yOffset}};A._write=function(x,y){if(!v.isNone(this._shapingInfo)){var B=this._shapingInfo,C=y.getDisplayId(),D="esriGeometryPolygon"===
y.geometryType?y.readLegacyCentroid():y.readLegacyGeometry();if(D)switch(this.current={out:x,inId:C,inShaping:B,zoomLevel:this._zoomLevel},y.geometryType){case "esriGeometryPolyline":this._placeLineLabels(D);break;case "esriGeometryPoint":case "esriGeometryPolygon":this._placePointLabels(D);break;default:k("mapview-labeling",`Geometry of type ${y.geometryType} is not supported`)}}};A._isVisible=function(x,y){const B=Math.floor(10*this.current.zoomLevel);return Math.floor(10*x)<=B&&B<=Math.floor(10*
y)};A._placePointLabels=function(x){const {out:y,inId:B,inShaping:C}=this.current;this._writeGlyphs(y,B,x,C)};A._placeLineLabels=function(x){x=f.smoothPaths(x.paths,this.current.inShaping.bounds.width);const y=this._placeSubdivGlyphs.bind(this),B=(this._shapedBox.width+this._repeatLabelDistance)/2;for(const C of x)f.pathDivide(C,B,y,this._repeatLabel)};A._placeSubdivGlyphs=function(x,y,B,C){var D=q(y),F=this._shapedBox.width/2,E=Math.sqrt(this._repeatLabelDistance)/2;B=Math.min(B,C-B);F=this.current.inShaping.isMultiline?
25:Math.log2(B/(E+F/2));D=Math.max(this._minZoom,this.current.zoomLevel+1-(0===y?F:Math.min(D,F)));F=this.current.zoomLevel-D;E=this._shapedBox.width/2*2**F;this.current.inShaping.isMultiline?0===y&&this._placeStraight(x,D):this._allowOverrun&&0>F?this._placeStraightAlong(x,this._minZoom):"parallel"===this._labelPosition?this._placeStraightAlong(x,D):"curved"===this._labelPosition&&this._placeCurved(x,D,E)};A._placeStraight=function(x,y){const {out:B,inId:C,inShaping:D}=this.current,F=Math.ceil((180/
Math.PI*x.angle+180)%360);this._outLineLabelAngle=Math.round(254/360*Math.ceil(180/Math.PI*x.angle%360));this._writeGlyphs(B,C,x,D,y);this._outLineLabelAngle=Math.round(254/360*F);this._writeGlyphs(B,C,x,D,y)};A._placeCurved=function(x,y,B){const {out:C,inId:D}=this.current;C.metricStart(D,y,x.x,x.y,0,0,0,0);const F=x.clone(),E=(180/Math.PI*x.angle+180)%360;this._outLineLabelAngle=Math.round(180/Math.PI*x.angle%360*(254/360));this._placeFirst(F,y,1);this._placeBack(x,F,y,B,1);this._placeForward(x,
F,y,B,1);this._outLineLabelAngle=Math.round(254/360*E);this._placeFirst(F,y,0);this._placeBack(x,F,y,B,0);this._placeForward(x,F,y,B,0);C.metricEnd()};A._placeStraightAlong=function(x,y){const {out:B,inId:C}=this.current;B.metricStart(C,y,x.x,x.y,0,0,0,0);const D=x.clone(),F=(180/Math.PI*x.angle+180)%360;this._outLineLabelAngle=Math.round(180/Math.PI*x.angle%360*(254/360));this._placeFirst(D,y,1,!0);this._outLineLabelAngle=Math.round(254/360*F);this._placeFirst(D,y,0,!0);B.metricEnd()};A._placeBack=
function(x,y,B,C,D){const F=x.clone();for(x=x.backwardLength+0;F.prev()&&!(x>=C);)this._placeOnSegment(F,y,x,B,-1,D),x+=F.length+0};A._placeForward=function(x,y,B,C,D){const F=x.clone();for(x=x.remainingLength+0;F.next()&&!(x>=C);)this._placeOnSegment(F,y,x,B,1,D),x+=F.length+0};A._placeFirst=function(x,y,B,C=!1){const D=this.current.inShaping;var F=D.glyphs;const E=this.current.zoomLevel,{out:G,inId:O}=this.current;for(const H of F)F=H.x>D.bounds.x?B:1-B,F=Math.max(0,E+Math.log2(Math.abs(H.x+H.width/
2-D.bounds.x)/(F*x.remainingLength+(1-F)*x.backwardLength))),F=Math.max(y,C?0:F),H.maxZoom=25,H.angle=x.angle+(1-B)*Math.PI,H.minZoom=F,this._writeGlyph(G,O,x.x,x.y,H),B&&this._isVisible(H.minZoom,H.maxZoom)&&(F=H.bounds,G.metricBoxWrite(F.center[0],F.center[1],F.width,F.height))};A._placeOnSegment=function(x,y,B,C,D,F){var E=this.current.inShaping.glyphs;const {out:G,inId:O}=this.current,H=this.current.inShaping,K=this.current.zoomLevel;var P=x.x+x.dx/x.length*-D*B,L=x.y+x.dy/x.length*-D*B;for(const J of E)if((E=
J.x>H.bounds.x?F:1-F)&&1===D||!E&&-1===D){var M=Math.abs(J.x+J.width/2-H.bounds.x);E=Math.max(0,K+Math.log2(M/B)-.1);M=Math.max(C,K+Math.log2(M/(B+x.length+0)));0!==E&&(J.angle=x.angle+(1-F)*Math.PI,J.minZoom=M,J.maxZoom=E,this._writeGlyph(G,O,P,L,J),F&&this._isVisible(J.minZoom,J.maxZoom)&&(E=J.bounds,G.metricBoxWrite(E.center[0]+(x.x-y.x),E.center[1]+(x.y-y.y),E.width,E.height)))}};A._writeGlyphs=function(x,y,B,C,D=this._minZoom){if(!(0>B.x||512<=B.x||0>B.y||512<=B.y)){var F=B.x+this._refOffsetX;
B=B.y-this._refOffsetY;for(const E of C.glyphs)E.minZoom=D,E.maxZoom=this._maxZoom,this._writeGlyph(x,y,F,B,E);C=C.boundsT;x.metricStart(y,D,F,B,this._refPlacementDirX,this._refPlacementDirY,this._referenceSize,this._materialKey);x.metricBoxWrite(C.center[0],C.center[1],C.width,C.height);x.metricEnd()}};A._writeVertexCommon=function(x,y,B,C){const D=this._color,F=this._haloColor,E=c.i8888to32(0,0,this._size,this._haloSize);C=c.i8888to32(Math.floor(10*Math.max(C.minZoom,this._minZoom)),Math.floor(10*
Math.min(C.maxZoom,this._maxZoom)),this._outLineLabelAngle,0);x.vertexWrite(B);x.vertexWrite(y);x.vertexWrite(D);x.vertexWrite(F);x.vertexWrite(E);x.vertexWrite(this._refSymbolAndPlacementOffset);x.vertexWrite(C)};u._createClass(w,[{key:"_shapedBox",get:function(){return v.unwrap(this._shapingInfo).bounds}}]);return w}(l)})},"esri/views/2d/engine/webgl/mesh/templates/segmentUtils":function(){define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/maybe","./util"],
function(u,n,h,r){function v(b){return b.length-1}function z(b){let a=0;for(let c=0;c<v(b);c++)a+=p(b,c);return a}function p(b,a,c=1){const [d,f]=b[a+1];return Math.sqrt(d*d+f*f)*c}function g(b,a,c,d,f){if(!(c<a)){var l=d.clone().seek(c/2);h.isNone(l)||(b(l.clone(),c,f),c=(c-a)/2,l=h.unwrap(l.seek(a/2)),g(b,a,c,d,f+1),g(b,a,c,l,f+1))}}let e=function(){function b(c,d,f,l,m){this._segments=c;this._index=d;this._distance=f;this._xStart=l;this._yStart=m;this._done=!1}b.create=function(c){return new b(c,
0,0,c[0][0],c[0][1])};var a=b.prototype;a.clone=function(){return new b(this._segments,this._index,this._distance,this.xStart,this.yStart)};a.equals=function(c){return this._index===c._index||c._index===this._index-1&&(0===this._distance||1===c._distance)||c._index===this._index+1&&(1===this._distance||0===c._distance)};a.leq=function(c){return this._index<c._index||this._index===c._index&&this._distance<=c._distance};a.geq=function(c){return this._index>c._index||this._index===c._index&&this._distance>=
c._distance};a.hasPrev=function(){return 0<=this._index-1};a.hasNext=function(){return this._index+1<v(this._segments)};a.next=function(){if(!this.hasNext())return null;this._xStart+=this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this};a.prev=function(){if(!this.hasPrev())return this._done=!0,null;--this._index;this._xStart-=this.dx;this._yStart-=this.dy;this._distance=1;return this};a._seekBackwards=function(c,d){var f=this.backwardLength;if(c<=f)return this._distance=(f-c)/
this.length,this;for(f=this.backwardLength;this.prev();){if(f+this.length>c)return this._seekBackwards(c-f);f+=this.length}this._distance=0;return d?this:null};a.seek=function(c,d=!1){if(0>c)return this._seekBackwards(Math.abs(c),d);if(c<=this.remainingLength)return this._distance=(this.backwardLength+c)/this.length,this;let f=this.remainingLength;for(;this.next();){if(f+this.length>c)return this.seek(c-f,d);f+=this.length}this._distance=1;return d?this:null};n._createClass(b,[{key:"_segment",get:function(){return this._segments[this._index+
1]}},{key:"angle",get:function(){const c=this.dy;let d=Math.acos((0*c+-1*-this.dx)/(1*this.length));0<c&&(d=2*Math.PI-d);return d}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+this.distance*this.dx}},{key:"y",get:function(){return this.yStart+this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},{key:"xMidpoint",get:function(){return this.xStart+
.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){const {dx:c,dy:d}=this;return Math.sqrt(c*c+d*d)}},{key:"remainingLength",get:function(){return this.length*(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},{key:"done",get:function(){return this._done}}]);
return b}();u.SegmentCursor=e;u.pathDivide=function(b,a,c,d=!0){const f=z(b);b=e.create(b);const l=f/2;if(d){d=Math.floor(Math.max((f-a)/2,0)/a);b.seek(l-d*a);for(let m=-d;m<=d;m++)512>b.x&&0<=b.x&&512>b.y&&0<=b.y&&c(b.clone(),m,l+m*a,f),b.seek(a)}else b.seek(l),c(b.clone(),0,l+0*a,f)};u.pathLength=z;u.pathSubdivide=function(b,a,c){g(c,a,z(b),e.create(b),0)};u.segmentAt=function(b,a){return b[a+1]};u.segmentCount=v;u.segmentLength=p;u.smoothPaths=function(b,a){for(let F=0;F<b.length;F++){var c=b[F];
const E=[];E.push(c[0]);for(var d=1;d<c.length;d++){let [G,O]=E[d-1];G+=c[d][0];O+=c[d][1];E.push([G,O])}a:{c=E;d=a;if(0>=d)break a;const G=c.length;if(3>G)break a;const O=[];var f=0;O.push(0);for(var l=1;l<G;l++)f+=r.dist(c[l],c[l-1]),O.push(f);d=Math.min(d,.2*f);f=[];f.push(c[0][0]);f.push(c[0][1]);l=c[G-1][0];const H=c[G-1][1];var m=r.sub([0,0],c[0],c[1]);r.normalize(m);c[0][0]+=d*m[0];c[0][1]+=d*m[1];r.sub(m,c[G-1],c[G-2]);r.normalize(m);c[G-1][0]+=d*m[0];c[G-1][1]+=d*m[1];for(m=1;m<G;m++)O[m]+=
d;O[G-1]+=d;m=.5*d;for(let K=1;K<G-1;K++){let P=0,L=0,M=0;for(var k=K-1;0<=k&&!(O[k+1]<O[K]-m);k--){var q=m+O[k+1]-O[K],t=O[k+1]-O[k],w=O[K]-O[k]<m?1:q/t;if(1E-6>Math.abs(w))break;var A=w*w,x=w*q-.5*A*t,y=w*t/d,B=c[k+1],C=c[k][0]-B[0],D=c[k][1]-B[1];P+=y/x*(B[0]*w*q+.5*A*(q*C-t*B[0])-A*w*t*C/3);L+=y/x*(B[1]*w*q+.5*A*(q*D-t*B[1])-A*w*t*D/3);M+=y}for(k=K+1;k<G&&!(O[k-1]>O[K]+m);k++){q=m-O[k-1]+O[K];t=O[k]-O[k-1];w=O[k]-O[K]<m?1:q/t;if(1E-6>Math.abs(w))break;A=w*w;x=w*q-.5*A*t;y=w*t/d;B=c[k-1];C=c[k][0]-
B[0];D=c[k][1]-B[1];P+=y/x*(B[0]*w*q+.5*A*(q*C-t*B[0])-A*w*t*C/3);L+=y/x*(B[1]*w*q+.5*A*(q*D-t*B[1])-A*w*t*D/3);M+=y}f.push(P/M);f.push(L/M)}f.push(l);f.push(H);for(let K=0,P=0;K<G;K++)c[K][0]=f[P++],c[K][1]=f[P++]}c=[];c.push(E[0]);for(d=1;d<E.length;d++){const [G,O]=E[d-1],[H,K]=E[d];c.push([Math.round(H-G),Math.round(K-O)])}b[F]=c}return b};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/util":function(){define(["exports"],
function(u){function n(h,r){return Math.sqrt(h*h+r*r)}u.DEFAULT_MAX_ZOOM=100;u.DEFAULT_MIN_ZOOM=0;u.dist=function(h,r){return n(h[0]-r[0],h[1]-r[1])};u.getLimitCosine=function(h=2){return 1/Math.max(h,1)};u.getMinMaxZoom=function(h,r){const v=!!h.minScale&&r.scaleToZoom(h.minScale)||0;h=!!h.maxScale&&r.scaleToZoom(h.maxScale)||100;return[v,h]};u.isExtent=function(h){return void 0!==h.xmin&&void 0!==h.ymin&&void 0!==h.xmax&&void 0!==h.ymax};u.isFunction=function(h){return"function"===typeof h};u.isMultipoint=
function(h){return void 0!==h.points};u.isPoint=function(h){return void 0!==h.x&&void 0!==h.y};u.isPolygon=function(h){return void 0!==h.rings};u.isPolyline=function(h){return void 0!==h.paths};u.len=n;u.normalize=function(h){const r=n(h[0],h[1]);h[0]/=r;h[1]/=r};u.sub=function(h,r,v){h[0]=r[0]-v[0];h[1]=r[1]-v[1];return h};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/BidiText ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLMeshTemplate".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){return function(d){function f(l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P=!1,L,M){var J=d.call(this)||this;J._xOffset=h.pt2px(F);J._yOffset=h.pt2px(E);J._decoration=B||"none";J._color=t;J._haloColor=w;J._haloSize=Math.min(Math.floor(5*h.pt2px(h.toPt(k))),127);J._size=Math.min(Math.round(h.pt2px(m)),127);m=Math.min(Math.round(h.pt2px(q||m)),127);J._referenceSize=Math.round(Math.sqrt(256*m));J._scale=J._size/p.GLYPH_SIZE;J._angle=D;J._justify=v.getJustification(A||"center");
J._xAlignD=v.getXAnchorDirection(A||"center");J._yAlignD=v.getYAnchorDirection(x||"baseline");J._baseline="baseline"===(x||"baseline");J._bitset=(y===r.Alignment.MAP?1:0)|(C?1:0)<<1;l=e.MaterialKeyBase.load(l);l.sdf=!0;J._materialKey=l.data;J._lineWidth=h.pt2px(G)||512;J._lineHeight=O||1;J._textPlacement=H;J._effects=K;J._isCIM=P;J._minMaxZoom=g.i1616to32(Math.round(L*p.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(M*p.MIN_MAX_ZOOM_PRECISION_FACTOR));return J}u._inheritsLoose(f,d);f.fromText=function(l,
m){const k=new f(l.materialKey,l.font.size,l.haloSize||0,l.font.size,l.color&&z.premultiplyAlphaRGBAArray(l.color)||0,l.haloColor&&z.premultiplyAlphaRGBAArray(l.haloColor)||0,l.horizontalAlignment,l.verticalAlignment,r.Alignment.SCREEN,l.font.decoration,!1,l.angle||0,l.xoffset,l.yoffset,l.lineWidth,l.lineHeight,null,null,!1,b.DEFAULT_MIN_ZOOM,b.DEFAULT_MAX_ZOOM),[,q]=n.bidiText(l.text);k.bindTextInfo(m,q);k._vertexBoundsScale=l.maxVVSize?l.maxVVSize/l.font.size:1;return k};f.fromCIMText=function(l,
m,k){var q=l.scaleFactor||1;const t=l.size*l.sizeRatio*q,[w,A]=b.getMinMaxZoom(l.scaleInfo,k);k=new f(l.materialKey,t,l.outlineSize*l.sizeRatio,l.referenceSize,z.premultiplyAlphaRGBA(l.color),z.premultiplyAlphaRGBA(l.outlineColor),l.horizontalAlignment,l.verticalAlignment,l.alignment,l.decoration,l.colorLocked,l.angle,l.offsetX*l.sizeRatio*q,l.offsetY*l.sizeRatio*q,512,1,l.markerPlacement,l.effects,!0,w,A);[,q]=n.bidiText(l.text);k.bindTextInfo(m,q);k._vertexBoundsScale=l.maxVVSize?l.maxVVSize/t:
1;return k};return f}(a(c))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../layers/graphics/featureConversionUtils ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./shapingUtils".split(" "),function(u,n,h,r,v,z,p,g,e,b){return a=>function(c){function d(...l){l=
c.call(this,...l)||this;l._isCIM=!1;l._vertexBoundsScale=1;l.geometryType=p.WGLGeometryType.TEXT;l._aux=g.i8888to32(0,0,l._referenceSize,l._bitset);return l}u._inheritsLoose(d,c);var f=d.prototype;f.bindTextInfo=function(l,m){this._shapingInfo=l&&l.length?n.applySome(l,k=>b.shapeGlyphs(k,m,{scale:this._scale,angle:this._angle,xOffset:this._xOffset,yOffset:this._yOffset,hAlign:this._xAlignD,vAlign:this._yAlignD,maxLineWidth:Math.max(32,Math.min(this._lineWidth,512)),lineHeight:z.MAGIC_LABEL_LINE_HEIGHT*
Math.max(.25,Math.min(this._lineHeight,4)),decoration:this._decoration,isCIM:this._isCIM})):null};f._write=function(l,m,k,q){const t=m.getDisplayId();this._writeGeometry(l,m,t,k,q)};f._writeGeometry=function(l,m,k,q,t){const w=this._shapingInfo;if(!n.isNone(w)){if(n.isSome(this._textPlacement))return m=null!=t?t:m.readLegacyGeometryForDisplay(),this._writePlacedText(l,k,m,w,q);q=t?r.deltaDecodeGeometry(r.convertFromGeometry(t),2):"esriGeometryPolygon"===m.geometryType?m.readCentroid():m.readGeometryForDisplay();
if(!n.isNone(q)){if(q.isPoint){const [A,x]=q.coords;return!l.hasAggregates&&l.hasPixelBufferEnabled&&(0>A||512<=A||0>x||512<=x)?void 0:this._writeGlyphs(l,k,{x:A,y:x},w)}q.forEachVertex((A,x)=>this._writeGlyphs(l,k,{x:A,y:x},w))}}};f._writePlacedText=function(l,m,k,q,t){var w=n.unwrap(this._textPlacement);if(k=v.CIMMarkerPlacementHelper.getPlacement(k,w,h.pt2px(1),t.geometryEngine))for(var A=k.next();null!=A;)t=-A.getAngle(),q.setRotation(t),w=A.tx,A=-A.ty,0>w||512<=w||0>A||512<=A||(this._writeGlyphs(l,
m,{x:w,y:A},q),q.setRotation(-t)),A=k.next()};f._writeGlyphs=function(l,m,k,q){const t=e.MaterialKeyBase.load(this._materialKey),w=g.i1616to32(Math.round(8*k.x),Math.round(8*k.y)),A=this._vertexBoundsScale,x=q.bounds,y=2*Math.max(x.width,x.height);for(const B of q.glyphs)t.textureBinding=B.textureBinding,l.recordStart(m,t.data,this.geometryType,!0),l.vertexBounds(k.x+x.x+this._xOffset,k.y+x.y-this._yOffset,y*A,y*A),this._writeVertices(l,m,w,B),l.recordEnd()};f._writeGlyph=function(l,m,k,q,t){var w=
e.MaterialKeyBase.load(this._materialKey);const A=g.i1616to32(Math.round(8*k),Math.round(8*q));w.textureBinding=t.textureBinding;l.recordStart(m,w.data,this.geometryType,!0);w=t.bounds;const x=this._vertexBoundsScale;l.vertexBounds(k+w.x*x,q+w.y*x,w.width*x,w.height*x);this._writeVertices(l,m,A,t);l.recordEnd()};f._writeVertices=function(l,m,k,q){const t=l.vertexCount();this._writeVertexCommon(l,m,k,q);l.vertexWrite(q.offsets.upperLeft);l.vertexWrite(q.texcoords.upperLeft);l.vertexEnd();this._writeVertexCommon(l,
m,k,q);l.vertexWrite(q.offsets.upperRight);l.vertexWrite(q.texcoords.upperRight);l.vertexEnd();this._writeVertexCommon(l,m,k,q);l.vertexWrite(q.offsets.lowerLeft);l.vertexWrite(q.texcoords.lowerLeft);l.vertexEnd();this._writeVertexCommon(l,m,k,q);l.vertexWrite(q.offsets.lowerRight);l.vertexWrite(q.texcoords.lowerRight);l.vertexEnd();l.indexWrite(t+0);l.indexWrite(t+1);l.indexWrite(t+2);l.indexWrite(t+1);l.indexWrite(t+3);l.indexWrite(t+2)};f._writeVertexCommon=function(l,m,k,q){q=this._color;const t=
this._haloColor,w=g.i8888to32(0,0,this._referenceSize,this._bitset),A=g.i8888to32(0,0,this._size,this._haloSize);l.vertexWrite(k);l.vertexWrite(m);l.vertexWrite(q);l.vertexWrite(t);l.vertexWrite(A);l.vertexWrite(w);l.vertexWrite(this._minMaxZoom)};return d}(a)})},"esri/symbols/cim/placements/CIMMarkerPlacementHelper":function(){define(["exports","../CIMCursor","../CIMOperators"],function(u,n,h){let r=function(){function v(){}v.getPlacement=function(z,p,g,e){const b=h.getPlacementOperator(p);if(!b)return null;
z=n.cloneAndDecodeGeometry(z);return b.execute(z,p,g,e)};return v}();u.CIMMarkerPlacementHelper=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["../../../../../../core/maybe","../../../../../../symbols/cim/effects/CIMEffectHelper"],function(u,n){return function(){function h(){}var r=h.prototype;r.bindFeature=function(v,z,p){};r.write=function(v,z,p,g){var e;if(u.isNone(this._effects)||
0===(null==(e=this._effects)?void 0:e.length))return this._write(v,z,g);p=n.CIMEffectHelper.executeEffects(this._effects,z.readLegacyGeometryForDisplay(),g.geometryEngine);for(e=n.CIMEffectHelper.next(p);e;)this._write(v,z,g,e),e=n.CIMEffectHelper.next(p)};r._write=function(v,z,p,g){};return h}()})},"esri/symbols/cim/effects/CIMEffectHelper":function(){define(["exports","../../../geometry/support/jsonUtils","../CIMCursor","../CIMEffects","../CIMOperators"],function(u,n,h,r,v){const z=96/72;let p=
function(){function g(){}g.executeEffects=function(e,b,a){b=h.cloneAndDecodeGeometry(b);b=new r.SimpleGeometryCursor(b);for(const c of e)(e=v.getEffectOperator(c))&&(b=e.execute(b,c,z,a));return b};g.next=function(e){e=e.next();h.deltaEncodeGeometry(e);return e};g.applyEffects=function(e,b,a){if(!e)return b;b=new r.SimpleGeometryCursor(b);for(var c of e)(e=v.getEffectOperator(c))&&(b=e.execute(b,c,1,a));for(a=null;c=b.next();)a?n.isPolyline(a)?n.isPolyline(c)&&a.paths.push(...c.paths):n.isPolygon(a)&&
n.isPolygon(c)&&a.rings.push(...c.rings):a=c;return a};return g}();u.CIMEffectHelper=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../../../../../symbols/cim/enums ../../color ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLMeshTemplate".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f){return function(l){function m(k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M,J,R,X,U){var V=l.call(this)||this;V.angle=w;V.height=y;V.width=x;V.xOffset=q*M;V.yOffset=t*M;V._markerPlacement=J;V._effects=R;V._anchorX=.5-(.5+K)*H.width/H.width;V._anchorY=.5-(.5+P)*H.height/H.height;V._minMaxZoom=b.i1616to32(Math.round(X*g.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(U*g.MIN_MAX_ZOOM_PRECISION_FACTOR));q=(O===z.Alignment.MAP?g.BITSET_MARKER_ALIGNMENT_MAP:g.BITSET_MARKER_ALIGNMENT_SCREEN)|
(F?g.BITSET_GENERIC_LOCK_COLOR:0)|(G?g.BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE:0)|(E?g.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY:0);t=H&&H.sdf;k=a.MarkerMaterialKey.load(k);k.sdf=t;k.pattern=!0;k.textureBinding=H.textureBinding;V._materialKey=k.data;V._fillColor=A;V._outlineColor=C;V._sizeOutlineWidth=b.i8888to32(Math.round(Math.min(Math.sqrt(128*x),255)),Math.round(Math.min(Math.sqrt(128*y),255)),Math.round(Math.min(Math.sqrt(128*D),255)),Math.round(Math.min(Math.sqrt(128*B),255)));A=H.rect.x+
g.SPRITE_PADDING;B=H.rect.y+g.SPRITE_PADDING;C=A+H.width;H=B+H.height;V._offsets.xUpperLeft=A;V._offsets.yUpperLeft=B;V._offsets.xUpperRight=C;V._offsets.yUpperRight=B;V._offsets.xBottomLeft=A;V._offsets.yBottomLeft=H;V._offsets.xBottomRight=C;V._offsets.yBottomRight=H;k.symbologyType===e.WGLSymbologyType.PIE_CHART?(V._texUpperLeft=b.i1616to32(0,1),V._texUpperRight=b.i1616to32(1,1),V._texBottomLeft=b.i1616to32(0,0),V._texBottomRight=b.i1616to32(1,0)):(V._texUpperLeft=b.i1616to32(A,B),V._texUpperRight=
b.i1616to32(C,B),V._texBottomLeft=b.i1616to32(A,H),V._texBottomRight=b.i1616to32(C,H));x=x*L*M;y=y*L*M;V._bitestAndDistRatio=b.i1616to32(q,Math.round(64*L));V._computedWidth=x;V._computedHeight=y;x=v.create();y=r.create();V._applyTransformation(y,x);return V}u._inheritsLoose(m,l);m.fromCIMMarker=function(k,q,t){const w=k.size,A=(q&&q.width||1)/(q&&q.height||1)*k.scaleX;var x=k.scaleSymbolsProportionally&&k.frameHeight?w/k.frameHeight:1;let y=p.premultiplyAlphaRGBA(k.color);const B=p.premultiplyAlphaRGBA(k.outlineColor),
C=h.pt2px(w),D=C*A,F=h.pt2px(k.offsetX||0),E=h.pt2px(k.offsetY||0);x*=h.pt2px(k.outlineWidth||0);const G=k.alignment||z.Alignment.SCREEN,O=h.pt2px(k.referenceSize),[H,K]=c.getMinMaxZoom(k.scaleInfo,t);q.sdf||0!==y||(y=-1);t=k.rotation||0;k.rotateClockwise||(t=-t);let P=0,L=0;const M=k.anchorPoint;M&&(k.isAbsoluteAnchorPoint?w&&(P=-M.x/(w*A),L=M.y/w):(P=M.x,L=M.y));q=new m(k.materialKey,F,E,t,y,D,C,O,B,x,k.colorLocked,k.scaleSymbolsProportionally,!1,G,q,P,L,k.sizeRatio,n.unwrapOr(k.scaleFactor,1),
k.markerPlacement,k.effects,H,K);q._vertexBoundsScaleX=k.maxVVSize?k.maxVVSize/D:1;q._vertexBoundsScaleY=k.maxVVSize?k.maxVVSize/C:1;return q};m.fromPictureMarker=function(k,q){const t=Math.round(h.pt2px(k.width)),w=Math.round(h.pt2px(k.height)),A=g.PICTURE_FILL_COLOR,x=Math.round(h.pt2px(k.xoffset||0)),y=Math.round(h.pt2px(k.yoffset||0));q=new m(k.materialKey,x,y,k.angle,A,t,w,w,0,0,!1,!1,!1,z.Alignment.SCREEN,q,0,0,1,1,null,null,c.DEFAULT_MIN_ZOOM,c.DEFAULT_MAX_ZOOM);q._vertexBoundsScaleX=k.maxVVSize?
k.maxVVSize/k.width:1;q._vertexBoundsScaleY=k.maxVVSize?k.maxVVSize/k.height:1;return q};m.fromSimpleMarker=function(k,q){const t=p.premultiplyAlphaRGBAArray(k.color),w=Math.round(h.pt2px(k.size)),A=Math.round(h.pt2px(k.xoffset||0)),x=Math.round(h.pt2px(k.yoffset||0)),y=k.style;var B=k.outline;const C=(B&&B.color&&p.premultiplyAlphaRGBAArray(B.color))|0;B=(B&&B.width&&Math.round(h.pt2px(B.width)))|0;q=new m(k.materialKey,A,x,k.angle,t,w,w,w,C,B,!1,!1,"esriSMSCross"===y||"esriSMSX"===y,z.Alignment.SCREEN,
q,0,0,1.96875,1,null,null,c.DEFAULT_MIN_ZOOM,c.DEFAULT_MAX_ZOOM);q.boundsType="esriSMSCircle"===y?"circle":"square";q._vertexBoundsScaleX=k.maxVVSize?k.maxVVSize/k.size:1;q._vertexBoundsScaleY=k.maxVVSize?k.maxVVSize/k.size:1;return q};m.fromLineSymbolMarker=function(k,q){const t=p.premultiplyAlphaRGBAArray(k.color),w=Math.round(h.pt2px(6*k.lineWidth)),A="cross"===k.style||"x"===k.style;switch(k.placement){case "begin-end":var x=z.ExtremityPlacement.Both;break;case "begin":x=z.ExtremityPlacement.JustBegin;
break;case "end":x=z.ExtremityPlacement.JustEnd;break;default:x=z.ExtremityPlacement.None}x={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:x,offsetAlongLine:0};q=new m(k.materialKey,0,0,0,t,w,w,w/6,t,A?Math.round(h.pt2px(k.lineWidth)):0,!1,!1,A,z.Alignment.MAP,q,0,0,1.96875,1,x,null,c.DEFAULT_MIN_ZOOM,c.DEFAULT_MAX_ZOOM);q.boundsType="circle"===k.style?"circle":"square";return q};return m}(d(f))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2 ../../../../../../chunks/vec2f32 ../../../../../../layers/graphics/featureConversionUtils ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper ../../definitions ../../enums ../../number ../../materialKey/MaterialKey".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){const f=3.14159265359/180;return l=>function(m){function k(...t){t=m.call(this,...t)||this;t.angle=0;t.xOffset=0;t.yOffset=0;t.width=0;t.height=0;t.boundsType="square";t._anchorX=0;t._anchorY=0;t._computedWidth=0;t._computedHeight=0;t._vertexBoundsScaleX=1;t._vertexBoundsScaleY=1;t._offsets={xUpperLeft:0,yUpperLeft:0,xUpperRight:0,yUpperRight:0,xBottomLeft:0,yBottomLeft:0,xBottomRight:0,yBottomRight:0};t.geometryType=a.WGLGeometryType.MARKER;return t}u._inheritsLoose(k,
m);var q=k.prototype;q._write=function(t,w,A,x){const y=w.getDisplayId();t.recordStart(y,this._materialKey,this.geometryType,!0);this._writeGeometry(t,w,y,A,x);t.recordEnd()};q._writeGeometry=function(t,w,A,x,y){if(n.isSome(this._markerPlacement))return this._writePlacedMarkers(t,w,x,y);if(!y&&"esriGeometryPoint"===w.geometryType)return x=w.getX(),w=w.getY(),!t.hasAggregates&&t.hasPixelBufferEnabled&&(0>x||513<=x||0>w||513<=w)?void 0:this._writeVertices(t,A,this._getPos(x,w),x,w);w=y?g.deltaDecodeGeometry(g.convertFromGeometry(y),
2):"esriGeometryPolygon"===w.geometryType?w.readCentroid():w.readGeometryForDisplay();if(!n.isNone(w)){if(w.isPoint){const [B,C]=w.coords;return!t.hasAggregates&&t.hasPixelBufferEnabled&&(0>B||512<=B||0>C||512<=C)?void 0:this._writeVertices(t,A,this._getPos(B,C),B,C)}w.forEachVertex((B,C)=>{const D=2*b.TILE_SIZE;B<-D||B>=D||C<-D||C>=D||this._writeVertices(t,A,this._getPos(B,C),B,C)})}};q._writePlacedMarkers=function(t,w,A,x){x=null!=x?x:w.readLegacyGeometryForDisplay();if(A=e.CIMMarkerPlacementHelper.getPlacement(x,
n.unwrap(this._markerPlacement),h.pt2px(1),A.geometryEngine)){w=w.getDisplayId();x=p.create();for(var y=v.create(),B=A.next();null!=B;){const C=B.tx,D=-B.ty;-128<=C&&640>=C&&-128<=D&&640>=D&&(this._applyTransformation(y,x,-B.getAngle()/f),this._writeVertices(t,w,this._getPos(C,D),C,D));B=A.next()}}};q._writeVertices=function(t,w,A,x,y){const B=d.MarkerMaterialKey.load(this._materialKey);switch(B.symbologyType){case a.WGLSymbologyType.HEATMAP:return this._writeHeatmapVertices(t,w,A,x,y);default:return this._writeMarkerVertices(t,
w,B,A,x,y)}};q._writeMarkerVertices=function(t,w,A,x,y,B){var C=A.vvRotation;A=t.vertexCount();let D=this._computedWidth*this._vertexBoundsScaleX;var F=this._computedHeight*this._vertexBoundsScaleY;this.angle&&(D=F=Math.max(D,F));C&&(C=Math.max(this.xOffset,this.yOffset),D+=C,F+=C);t.vertexBounds(y+this.xOffset,B-this.yOffset,D,F);t.vertexWrite(x);t.vertexWrite(this._offsetUpperLeft);t.vertexWrite(this._texUpperLeft);t.vertexWrite(this._bitestAndDistRatio);t.vertexWrite(w);t.vertexWrite(this._fillColor);
t.vertexWrite(this._outlineColor);t.vertexWrite(this._sizeOutlineWidth);t.vertexWrite(this._minMaxZoom);t.vertexEnd();t.vertexWrite(x);t.vertexWrite(this._offsetUpperRight);t.vertexWrite(this._texUpperRight);t.vertexWrite(this._bitestAndDistRatio);t.vertexWrite(w);t.vertexWrite(this._fillColor);t.vertexWrite(this._outlineColor);t.vertexWrite(this._sizeOutlineWidth);t.vertexWrite(this._minMaxZoom);t.vertexEnd();t.vertexWrite(x);t.vertexWrite(this._offsetBottomLeft);t.vertexWrite(this._texBottomLeft);
t.vertexWrite(this._bitestAndDistRatio);t.vertexWrite(w);t.vertexWrite(this._fillColor);t.vertexWrite(this._outlineColor);t.vertexWrite(this._sizeOutlineWidth);t.vertexWrite(this._minMaxZoom);t.vertexEnd();t.vertexWrite(x);t.vertexWrite(this._offsetBottomRight);t.vertexWrite(this._texBottomRight);t.vertexWrite(this._bitestAndDistRatio);t.vertexWrite(w);t.vertexWrite(this._fillColor);t.vertexWrite(this._outlineColor);t.vertexWrite(this._sizeOutlineWidth);t.vertexWrite(this._minMaxZoom);t.vertexEnd();
this._writeIndices(t,A)};q._writeHeatmapVertices=function(t,w,A,x,y){const B=t.vertexCount();t.vertexBounds(x+this.xOffset,y-this.yOffset,this.width,this.height);t.vertexWrite(A);t.vertexWrite(this._offsetUpperLeft);t.vertexWrite(w);t.vertexEnd();t.vertexWrite(A);t.vertexWrite(this._offsetUpperRight);t.vertexWrite(w);t.vertexEnd();t.vertexWrite(A);t.vertexWrite(this._offsetBottomLeft);t.vertexWrite(w);t.vertexEnd();t.vertexWrite(A);t.vertexWrite(this._offsetBottomRight);t.vertexWrite(w);t.vertexEnd();
this._writeIndices(t,B)};q._writeIndices=function(t,w){t.indexWrite(w+0);t.indexWrite(w+1);t.indexWrite(w+2);t.indexWrite(w+1);t.indexWrite(w+3);t.indexWrite(w+2)};q._applyTransformation=function(t,w,A=0){r.fromTranslation(t,p.fromValues(this.xOffset,-this.yOffset));0!==this.angle+A&&r.rotate(t,t,f*(this.angle+A));A=this._computedWidth;const x=this._computedHeight,y=(this._anchorX-.5)*A,B=(this._anchorY-.5)*x;z.set(w,y,B);z.transformMat2d(w,w,t);this._offsetUpperLeft=c.i1616to32(16*w[0],16*w[1]);
this._offsets.xUpperLeft=w[0];this._offsets.yUpperLeft=w[1];z.set(w,y+A,B);z.transformMat2d(w,w,t);this._offsetUpperRight=c.i1616to32(16*w[0],16*w[1]);this._offsets.xUpperRight=w[0];this._offsets.yUpperRight=w[1];z.set(w,y,B+x);z.transformMat2d(w,w,t);this._offsetBottomLeft=c.i1616to32(16*w[0],16*w[1]);this._offsets.xBottomLeft=w[0];this._offsets.yBottomLeft=w[1];z.set(w,y+A,B+x);z.transformMat2d(w,w,t);this._offsetBottomRight=c.i1616to32(16*w[0],16*w[1]);this._offsets.xBottomRight=w[0];this._offsets.yBottomRight=
w[1]};q._getPos=function(t,w){return c.i1616to32(Math.round(8*t),Math.round(8*w))};return k}(l)})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../../../../../symbols/support/defaultsJSON ../../enums ../../materialKey/MaterialKey ./WGLDynamicFillTemplate ./WGLDynamicLineTemplate ./WGLDynamicMarkerTemplate ./WGLDynamicTextTemplate ./WGLFillTemplate ./WGLLineTemplate ./WGLMarkerTemplate ./WGLTextTemplate ../../util/Lock ../../util/Result ../../../../layers/features/textUtils ../../../../layers/support/cimSymbolUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w){function A(G,O){const H=G.length;G.push(null);O.then(K=>G[H]=K);return G}function x(G){return!!(G&1)}const y=r.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),B=[];r={isOutline:!1,placement:null,symbologyType:p.WGLSymbologyType.DEFAULT,vvFlags:0};const C={...z.errorPointSymbolJSON,hash:JSON.stringify(z.errorPointSymbolJSON),materialKey:g.createMaterialKey(p.WGLGeometryType.MARKER,r)},D={...z.errorPolylineSymbolJSON,hash:JSON.stringify(z.errorPolylineSymbolJSON),
materialKey:g.createMaterialKey(p.WGLGeometryType.LINE,r)},F={...z.errorPolygonSymbolJSON,hash:JSON.stringify(z.errorPolygonSymbolJSON),materialKey:g.createMaterialKey(p.WGLGeometryType.FILL,r)};z=function(){function G(H,K){this._templateIdCounter=this._idCounter=1;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._cimTemplateCache=new Map;this._cimAnalyses=[];this._lock=new k.Lock;this._fetchResource=H;this._tileInfo=K}var O=G.prototype;
O.createTemplateGroup=function(H,K){this._initErrorTemplates();const P=H.hash;if(this._symbolToTemplate.has(P))return this._symbolToTemplate.get(P);const L=[];K&&this._createMeshTemplates(L,K,!0);this._createMeshTemplates(L,H,!1);H=this._createGroupId("expanded-cim"===H.type&&E(H));this._idToTemplateGroup.set(H,L);this._symbolToTemplate.set(P,H);return H};O.getTemplateGroup=function(H){return this._idToTemplateGroup.has(H)?this._idToTemplateGroup.get(H):B};O.getDynamicTemplateGroup=function(H){if(!this._idToTemplateGroup.has(H))return B;
x(H)||y.error("mapview-template-store",`Id ${H} does not refer to a dynamic template`);return this._idToTemplateGroup.get(H)};O.getMosaicItem=function(H,K){const P=this._createTemplateId(),L=new Promise(M=>this._idToResolver.set(P,M));this._fetchQueue.push({symbol:H,id:P,glyphIds:K});return L};O.finalize=function(H){return this._fetchQueue.length||this._lock.isHeld()?k.withLock(this._lock,this._fetchAllQueuedResources.bind(this),H):Promise.resolve()};O._initErrorTemplates=function(){this._errorTemplates||
(this._errorTemplates={fill:this._createMeshTemplates([],F,!1),marker:this._createMeshTemplates([],C,!1),line:this._createMeshTemplates([],D,!1)})};O._fetchAllQueuedResources=function(H){if(!this._fetchQueue.length)return Promise.resolve();const K=this._fetchQueue,P=this._cimAnalyses;this._fetchQueue=[];this._cimAnalyses=[];return Promise.all(P).then(()=>this._fetchResource(K,H).then(L=>{for(const {id:M,mosaicItem:J}of L)this._idToResolver.get(M)(J),this._idToResolver.delete(M)})).catch(L=>{v.isAbortError(L)?
this._fetchQueue=this._fetchQueue.concat(K):"worker:port-closed"!==L.name&&y.error(new h("mapview-template-store","Unable to fetch requested texture resources",L))})};O._createGroupId=function(H){return this._idCounter++<<1|(H?1:0)};O._createTemplateId=function(){return this._templateIdCounter++};O._createSMS=function(){var H=n._asyncToGenerator(function*(K){const {spriteMosaicItem:P}=yield this.getMosaicItem(K);return q.ok(P,y)?l.fromSimpleMarker(K,P):this._markerError});return function(K){return H.apply(this,
arguments)}}();O._createPMS=function(){var H=n._asyncToGenerator(function*(K){const {spriteMosaicItem:P}=yield this.getMosaicItem(K);return q.ok(P,y)?l.fromPictureMarker(K,P):this._markerError});return function(K){return H.apply(this,arguments)}}();O._createSFS=function(){var H=n._asyncToGenerator(function*(K,P){const {spriteMosaicItem:L}=yield this.getMosaicItem(K);return q.ok(L,y)?d.fromSimpleFill(K,L,P):this._fillError});return function(K,P){return H.apply(this,arguments)}}();O._createPFS=function(){var H=
n._asyncToGenerator(function*(K,P){const {spriteMosaicItem:L}=yield this.getMosaicItem(K);return q.ok(L,y)?d.fromPictureFill(K,L,P):this._fillError});return function(K,P){return H.apply(this,arguments)}}();O._createSLS=function(){var H=n._asyncToGenerator(function*(K,P){({spriteMosaicItem:P}=yield this.getMosaicItem(K));return q.ok(P,y)?f.fromSimpleLine(K,P):this._lineError});return function(K,P){return H.apply(this,arguments)}}();O._createLMS=function(){var H=n._asyncToGenerator(function*(K){const {spriteMosaicItem:P}=
yield this.getMosaicItem(K);return q.ok(P,y)?l.fromLineSymbolMarker(K,P):this._markerError});return function(K){return H.apply(this,arguments)}}();O._createTS=function(){var H=n._asyncToGenerator(function*(K){const {glyphMosaicItems:P}=yield this.getMosaicItem(K);return m.fromText(K,P)});return function(K){return H.apply(this,arguments)}}();O._createCIMText=function(){var H=n._asyncToGenerator(function*(K){const {glyphMosaicItems:P}=yield this.getMosaicItem(w.cimLayerToRasterizationInfo(K),t.codepoints(K.text));
return q.ok(P,y)?m.fromCIMText(K,P,this._tileInfo):this._textError});return function(K){return H.apply(this,arguments)}}();O._createCIMFill=function(){var H=n._asyncToGenerator(function*(K){const {spriteMosaicItem:P}=yield this.getMosaicItem(w.cimLayerToRasterizationInfo(K));return q.ok(P,y)?d.fromCIMFill(K,P,this._tileInfo):this._fillError});return function(K){return H.apply(this,arguments)}}();O._createCIMLine=function(){var H=n._asyncToGenerator(function*(K){const {spriteMosaicItem:P}=yield this.getMosaicItem(w.cimLayerToRasterizationInfo(K));
return q.ok(P,y)?f.fromCIMLine(K,P,this._tileInfo):this._lineError});return function(K){return H.apply(this,arguments)}}();O._createCIMMarker=function(){var H=n._asyncToGenerator(function*(K){const {spriteMosaicItem:P}=yield this.getMosaicItem(w.cimLayerToRasterizationInfo(K));return q.ok(P,y)?l.fromCIMMarker(K,P,this._tileInfo):this._markerError});return function(K){return H.apply(this,arguments)}}();O._createCIM=function(){var H=n._asyncToGenerator(function*(K){const P=K.templateHash;if(this._cimTemplateCache.has(P))return this._cimTemplateCache.get(P);
let L;switch(K.type){case "marker":L=yield this._createCIMMarker(K);break;case "line":L=yield this._createCIMLine(K);break;case "fill":L=yield this._createCIMFill(K);break;case "text":L=yield this._createCIMText(K)}this._cimTemplateCache.set(P,L);return L});return function(K){return H.apply(this,arguments)}}();O._createDynamicCIM=function(){var H=n._asyncToGenerator(function*(K){const P=K.templateHash;if(this._cimTemplateCache.has(P))return this._cimTemplateCache.get(P);let L;switch(K.type){case "marker":L=
a.fromCIMMarker(K,this._tileInfo);break;case "line":L=b.fromCIMLine(K,this._tileInfo);break;case "fill":L=e.fromCIMFill(K,this._tileInfo);break;case "text":L=c.fromCIMText(K,this._tileInfo)}this._cimTemplateCache.set(P,L);return L});return function(K){return H.apply(this,arguments)}}();O._createPrimitiveMeshTemplates=function(H,K,P){switch(K.type){case "esriSMS":return A(H,this._createSMS(K));case "esriPMS":return A(H,this._createPMS(K));case "esriSFS":return A(H,this._createSFS(K,P));case "line-marker":return A(H,
this._createLMS(K));case "esriPFS":return A(H,this._createPFS(K,P));case "esriSLS":return A(H,this._createSLS(K,!1));case "esriTS":return A(H,this._createTS(K));default:return y.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),H}};O._createMeshTemplates=function(H,K,P){if(K.type.includes("3d"))return y.error("3D symbols are not supported with MapView"),H;if("expanded-cim"===K.type){for(const L of K.layers)"function"===typeof L.materialHash?A(H,this._createDynamicCIM(L)):
A(H,this._createCIM(L));return H}if("composite-symbol"===K.type){for(const L of K.layers)this._createPrimitiveMeshTemplates(H,L,P);return H}return"cim"===K.type||"label"===K.type||"web-style"===K.type?H:this._createPrimitiveMeshTemplates(H,K,P)};n._createClass(G,[{key:"_markerError",get:function(){return this._errorTemplates.marker[0]}},{key:"_fillError",get:function(){return this._errorTemplates.fill[0]}},{key:"_lineError",get:function(){return this._errorTemplates.line[0]}},{key:"_textError",get:function(){return this._errorTemplates.line[0]}}]);
return G}();const E=G=>{if(!G.layers)return!1;for(const O of G.layers)if("function"===typeof O.materialHash)return!0;return!1};u.WGLTemplateStore=z;u.errorPointSchema2D=C;u.errorPolygonSchema2D=F;u.errorPolylineSchema2D=D;u.isDynamicId=x;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){return function(d){function f(l,m,k){var q;var t=d.call(this,l)||this;t._minMaxZoom=p.i1616to32(Math.round(m*v.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(k*v.MIN_MAX_ZOOM_PRECISION_FACTOR));e.isFunction(l.color)?t._dynamicPropertyMap.set("fillColor",(C,D,F)=>(C=l.color(C,D,F))&&r.premultiplyAlphaRGBA(C)||0):(m=l.color,t.fillColor=m&&r.premultiplyAlphaRGBA(m)||0);const w="CIMMarkerPlacementInsidePolygon"===(null==(q=l.cim.placement)?void 0:q.type)&&l.cim.placement.shiftOddRows?
2:1,A=l.height;e.isFunction(A)?t._dynamicPropertyMap.set("_height",(C,D,F)=>A(C,D,F)*w):t._height=(A||0)*w;const x=l.offsetX;e.isFunction(x)?t._dynamicPropertyMap.set("_offsetX",(C,D,F)=>h.pt2px(x(C,D,F))):t._offsetX=h.pt2px(x||0);const y=l.offsetY;e.isFunction(y)?t._dynamicPropertyMap.set("_offsetY",(C,D,F)=>h.pt2px(-y(C,D,F))):t._offsetY=h.pt2px(-y||0);q=l.scaleX;e.isFunction(q)?t._dynamicPropertyMap.set("_scaleX",q):t._scaleX=q||1;const B=l.angle;e.isFunction(B)?t._dynamicPropertyMap.set("_angle",
(C,D,F)=>z.radToByte(B(C,D,F))):t._angle=z.radToByte(B)||0;n.isSome(l.effects)&&(q=l.effects,e.isFunction(q)?t._dynamicPropertyMap.set("_effects",q):t._effects=q);t._cimFillLayer=l;t._bitset=(l.colorLocked?v.BITSET_GENERIC_LOCK_COLOR:0)|(l.applyRandomOffset?v.BITSET_FILL_RANDOM_PATTERN_OFFSET:0)|(l.sampleAlphaOnly?v.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0);t._fillMaterialKey=g.FillMaterialKey.load(l.materialKey);return t}u._inheritsLoose(f,d);f.fromCIMFill=function(l,m){const [k,q]=e.getMinMaxZoom(l.scaleInfo,
m);return new f(l,k,q)};f.prototype.bindFeature=function(l,m,k){const q=l.readLegacyFeature();this._dynamicPropertyMap.forEach((A,x)=>{this[x]=A(q,m,k)});l=this._fillMaterialKey;var t=this._materialCache,w=this._cimFillLayer.materialHash;w=w(q,m,k);w=t.get(w);t=null;w&&c.ok(w.spriteMosaicItem)&&(t=w.spriteMosaicItem);if(t){const {rect:A,width:x,height:y}=t;w=A.x+v.SPRITE_PADDING;const B=A.y+v.SPRITE_PADDING,C=w+x,D=B+y;let F=Math.round(h.pt2px(this._height));0>=F&&(F=D-B);let E=Math.round(h.pt2px(this._height/
y*x||0));0>=E&&(E=C-w);const G=this._scaleX;this.tl=p.i1616to32(w,B);this.br=p.i1616to32(C,D);this.aux2_1=p.i1616to32(E,F);this.aux2_2=p.i1616to32(this._offsetX,this._offsetY);this.aux3=p.i8888to32(G,1,this._angle,0);l.sdf=t.sdf;l.pattern=!0;l.textureBinding=t.textureBinding}else this.aux3=this.aux2_2=this.aux2_1=this.br=this.tl=0,l.sdf=!1,l.pattern=!1,l.textureBinding=0;this._materialKey=l.data};return f}(b(a))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../enums ../../number ../../Utils ../../materialKey/MaterialKey ./templateUtils ./WGLLineTemplate".split(" "),
function(u,n,h,r,v,z,p,g,e){return b=>function(a){function c(...f){f=a.call(this,...f)||this;f.forceLibtess=!1;f._bitset=0;f._lineTemplate=null;f.geometryType=r.WGLGeometryType.FILL;return f}u._inheritsLoose(c,a);var d=c.prototype;d._maybeAddLineTemplate=function(f){this._lineTemplate=e.fromFillOutline(f)};d._write=function(f,l,m,k){m="esriGeometryPoint"===l.geometryType;const q=p.FillMaterialKey.load(this._materialKey);f.recordStart(l.getDisplayId(),this._materialKey,this.geometryType,m);this._writeGeometry(f,
l,q,k,m);p.hasOutlineFillSymbology(q)&&n.isSome(this._lineTemplate)&&this._lineTemplate.writeGeometry(f,l,k,m);f.recordEnd()};d._writeGeometry=function(f,l,m,k,q){k=this._getGeometry(l,k,q);n.isNone(k)||(q=[],100<k.maxLength||this.forceLibtess||!g.triangulate(q,k)?(k=g.triangulateLibtess(k),this._writeVertices(f,l,k,[k.length/2],m)):q.length&&this._writeVertices(f,l,k.coords,k.lengths,m,q))};d._writeVertex=function(f,l,m,k,q,t){const w=v.i1616to32(1*k,1*q);f.vertexBounds(k,q,0,0);f.vertexWrite(w);
f.vertexWrite(l);m.symbologyType===r.WGLSymbologyType.DOT_DENSITY?f.vertexWriteF32(1/Math.abs(t.readGeometryArea())):(f.vertexWrite(this.fillColor),l=p.hasSimpleSymbology(m),l||(f.vertexWrite(this.tl),f.vertexWrite(this.br)),f.vertexWrite(this.aux2_1),f.vertexWrite(this.aux2_2),f.vertexWrite(this.aux3),l||f.vertexWrite(this._minMaxZoom))};d._writeVertices=function(f,l,m,k,q,t){var w=l.getDisplayId();w|=this._bitset<<24;var A=k.reduce((y,B)=>y+B);const x=z.getStrides(q.geometryType,q.symbologyType).geometry/
4;k=f.vertexCount();f.vertexEnsureSize(x*A);A=0;if(t)for(const y of t)this._writeVertex(f,w,q,m[2*y],m[2*y+1],l),A++;else for(t=0;t<m.length;t+=2)this._writeVertex(f,w,q,Math.round(m[t]),Math.round(m[t+1]),l),A++;f.indexEnsureSize(A);for(l=0;l<A;l++)f.indexWrite(l+k)};d._getGeometry=function(f,l,m){return(f=l?h.deltaDecodeGeometry(h.convertFromGeometry(l),2):f.readGeometryForDisplay())?g.clipMarshall(f,m?256:8):null};return c}(b)})},"esri/views/2d/engine/webgl/mesh/templates/templateUtils":function(){define("exports ../../../../../../core/maybe ../../../../../../chunks/earcut ../../../../../../geometry/libtess ../../../../../../layers/graphics/OptimizedGeometry ../../definitions ../../Geometry ../../TileClipper ../bufcut".split(" "),
function(u,n,h,r,v,z,p,g,e){function b(f,l,m){let k=0;for(let q=1;q<m;q++)k+=(f[2*(l+q)]-f[2*(l+q-1)])*(f[2*(l+q)+1]+f[2*(l+q-1)+1]);return k}function a(f,l,m,k,q){let t=0;for(;m<k;m+=3){const w=2*(f[m]-q),A=2*(f[m+1]-q),x=2*(f[m+2]-q);t+=Math.abs((l[w]-l[x])*(l[A+1]-l[w+1])-(l[w]-l[A])*(l[x+1]-l[w+1]))}return t}const c=new g.TileClipper(0,0,0,1,0),d=new g.TileClipper(0,0,0,1,0);c.setExtent(z.TILE_SIZE);d.setExtent(z.TILE_SIZE);u.area=b;u.clipLinesMarshall=function(f,l){d.setPixelMargin(l);const m=
-l;l=z.TILE_SIZE+l;let k=[];var q=!1;let t=0;for(;t<f.length;){const w=[],A=f[t];if(!A)return null;d.reset(p.GeometryType.LineString);let [x,y]=A[0];if(q)d.moveTo(x,y);else{if(x<m||x>l||y<m||y>l){q=!0;continue}w.push({x,y})}let B=!1;const C=A.length;for(let D=1;D<C;++D)if(x+=A[D][0],y+=A[D][1],q)d.lineTo(x,y);else{if(x<m||x>l||y<m||y>l){B=!0;break}w.push({x,y})}if(B)q=!0;else{if(q){if(q=d.resultWithStarts())for(const D of q)k.push(D)}else k.push({line:w,start:0});t++;q=!1}}k=k.filter(w=>1<w.line.length);
return 0===k.length?null:k};u.clipMarshall=function(f,l){if(n.isNone(f))return null;a:{var m=z.TILE_SIZE+128;var k=0;for(var q=0;q<f.lengths.length;q++){var t=f.lengths[q];for(var w=0;w<t;w++){const A=f.coords[2*(w+k)],x=f.coords[2*(w+k)+1];if(-128>A||A>m||-128>x||x>m){m=!0;break a}}k+=t}m=!1}if(!m)return f;c.setPixelMargin(l);c.reset(p.GeometryType.Polygon);l=0;for(m=0;m<f.lengths.length;m++){k=f.lengths[m];q=f.coords[2*(0+l)];t=f.coords[2*(0+l)+1];c.moveTo(q,t);for(w=1;w<k;w++)q=f.coords[2*(w+l)],
t=f.coords[2*(w+l)+1],c.lineTo(q,t);c.close();l+=k}m=c.result(!1);if(!m)return null;f=[];l=[];for(const A of m){m=0;for(const x of A)l.push(x.x),l.push(x.y),m++;f.push(m)}return new v(f,l)};u.triangleArea=function(f,l,m,k,q){let t=0;for(;m<k;m+=3){const w=2*(f.getValue(m)-q),A=2*(f.getValue(m+1)-q),x=2*(f.getValue(m+2)-q);t+=Math.abs((l[w]-l[x])*(l[A+1]-l[w+1])-(l[w]-l[A])*(l[x+1]-l[w+1]))}return t};u.triangleAreaArray=a;u.triangulate=function(f,l){const {coords:m,lengths:k,hasIndeterminateRingOrder:q}=
l;if(q)return!1;l=0;for(var t=0;t<k.length;){let x=t,y=k[t];t=b(m,l,y);for(var w=[];++x<k.length;){var A=k[x];const B=b(m,l+y,A);if(!(0<B))break;t+=B;w.push(l+y);y+=A}A=f.length;e.bufcut(f,m,l,l+y,w,2,0);w=a(f,m,A,f.length,0);t=Math.abs(t);if(1E-5<Math.abs((w-t)/Math.max(1E-7,t)))return f.length=0,!1;t=x;l+=y}return!0};u.triangulateEarcut=function(f,l,m){const {coords:k,lengths:q,hasIndeterminateRingOrder:t}=l;if(t)return!1;let w=0;for(var A=0;A<q.length;){let y=A,B=q[A];for(A=[];++y<q.length;){var x=
q[y];if(!(0<b(k,w+B,x)))break;A.push(w+B-w);B+=x}x=l.coords.slice(2*w,2*(w+B));A=h.earcut(x,A,2);for(const C of A)f.push(C+m+w);A=y;w+=B}return!0};u.triangulateLibtess=function(f){const {coords:l,lengths:m}=f;({buffer:f}=r.triangulate(l,m));return f};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/bufcut":function(){define(["exports"],function(u){function n(x,y,B,C,D,F,E){let G;B=0;for(let O=C,H=D-F;O<D;O+=F)B+=(x[H+y*F]-
x[O+y*F])*(x[O+1+y*F]+x[H+1+y*F]),H=O;if(E===0<B)for(;C<D;C+=F)G=z(C+y*F,x[C+y*F],x[C+1+y*F],G);else for(D-=F;D>=C;D-=F)G=z(D+y*F,x[D+y*F],x[D+1+y*F],G);G&&m(G,G.next)&&(p(G),G=G.next);return G}function h(x,y=x){if(!x)return x;let B;do if(B=!1,x.steiner||!m(x,x.next)&&0!==a(x.prev,x,x.next))x=x.next;else{p(x);x=y=x.prev;if(x===x.next)break;B=!0}while(B||x!==y);return y}function r(x,y,B,C,D,F,E,G){if(x){!G&&F&&(x=b(x,C,D,F));for(var O=x;x.prev!==x.next;){var H=x.prev,K=x.next;if(F)var P=v(x,C,D,F);
else a:{P=x;var L=P.prev,M=P;const J=P.next;if(0<=a(L,M,J)){P=!1;break a}let R=P.next.next;const X=R;let U=0;for(;R!==P.prev&&(0===U||R!==X);){U++;if(d(L.x,L.y,M.x,M.y,J.x,J.y,R.x,R.y)&&0<=a(R.prev,R,R.next)){P=!1;break a}R=R.next}P=!0}if(P)y.push(H.index/B+E),y.push(x.index/B+E),y.push(K.index/B+E),p(x),O=x=K.next;else if(x=K,x===O){if(!G)r(h(x),y,B,C,D,F,E,1);else if(1===G){G=y;O=B;H=E;K=x;do P=K.prev,L=K.next.next,!m(P,L)&&c(P,K,K.next,L)&&f(P,L)&&f(L,P)&&(G.push(P.index/O+H),G.push(K.index/O+
H),G.push(L.index/O+H),p(K),p(K.next),K=x=L),K=K.next;while(K!==x);x=K;r(x,y,B,C,D,F,E,2)}else if(2===G)a:{G=x;do{for(O=G.next.next;O!==G.prev;){if(H=G.index!==O.index){P=P=P=void 0;H=G;K=O;if(P=H.next.index!==K.index&&H.prev.index!==K.index){b:{P=H;do{if(P.index!==H.index&&P.next.index!==H.index&&P.index!==K.index&&P.next.index!==K.index&&c(P,P.next,H,K)){P=!0;break b}P=P.next}while(P!==H);P=!1}P=!P}if(P=P&&f(H,K)&&f(K,H)){P=H;L=!1;M=(H.x+K.x)/2;K=(H.y+K.y)/2;do P.y>K!==P.next.y>K&&P.next.y!==P.y&&
M<(P.next.x-P.x)*(K-P.y)/(P.next.y-P.y)+P.x&&(L=!L),P=P.next;while(P!==H);P=L}H=P}if(H){x=q(G,O);G=h(G,G.next);x=h(x,x.next);r(G,y,B,C,D,F,E,0);r(x,y,B,C,D,F,E,0);break a}O=O.next}G=G.next}while(G!==x)}break}}}}function v(x,y,B,C){const D=x.prev,F=x.next;if(0<=a(D,x,F))return!1;const E=D.x>x.x?D.x>F.x?D.x:F.x:x.x>F.x?x.x:F.x,G=D.y>x.y?D.y>F.y?D.y:F.y:x.y>F.y?x.y:F.y,O=l(D.x<x.x?D.x<F.x?D.x:F.x:x.x<F.x?x.x:F.x,D.y<x.y?D.y<F.y?D.y:F.y:x.y<F.y?x.y:F.y,y,B,C);y=l(E,G,y,B,C);B=x.prevZ;for(C=x.nextZ;B&&
B.z>=O&&C&&C.z<=y;){if(B!==x.prev&&B!==x.next&&d(D.x,D.y,x.x,x.y,F.x,F.y,B.x,B.y)&&0<=a(B.prev,B,B.next))return!1;B=B.prevZ;if(C!==x.prev&&C!==x.next&&d(D.x,D.y,x.x,x.y,F.x,F.y,C.x,C.y)&&0<=a(C.prev,C,C.next))return!1;C=C.nextZ}for(;B&&B.z>=O;){if(B!==x.prev&&B!==x.next&&d(D.x,D.y,x.x,x.y,F.x,F.y,B.x,B.y)&&0<=a(B.prev,B,B.next))return!1;B=B.prevZ}for(;C&&C.z<=y;){if(C!==x.prev&&C!==x.next&&d(D.x,D.y,x.x,x.y,F.x,F.y,C.x,C.y)&&0<=a(C.prev,C,C.next))return!1;C=C.nextZ}return!0}function z(x,y,B,C){x=
t.create(x,y,B);C?(x.next=C.next,x.prev=C,C.next.prev=x,C.next=x):(x.prev=x,x.next=x);return x}function p(x){x.next.prev=x.prev;x.prev.next=x.next;x.prevZ&&(x.prevZ.nextZ=x.nextZ);x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function g(x){let y=x,B=x;do{if(y.x<B.x||y.x===B.x&&y.y<B.y)B=y;y=y.next}while(y!==x);return B}function e(x,y){let B=y;const C=x.x,D=x.y;let F=-Infinity,E;do{if(D<=B.y&&D>=B.next.y&&B.next.y!==B.y){var G=B.x+(D-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(G<=C&&G>F){F=G;if(G===C){if(D===B.y)return B;
if(D===B.next.y)return B.next}E=B.x<B.next.x?B:B.next}}B=B.next}while(B!==y);if(!E)return null;if(C===F)return E.prev;y=E;G=E.x;const O=E.y;let H=Infinity,K;for(B=E.next;B!==y;)C>=B.x&&B.x>=G&&C!==B.x&&d(D<O?C:F,D,G,O,D<O?F:C,D,B.x,B.y)&&(K=Math.abs(D-B.y)/(C-B.x),(K<H||K===H&&B.x>E.x)&&f(B,x)&&(E=B,H=K)),B=B.next;return E}function b(x,y,B,C){for(var D;D!==x;D=D.next){D=D||x;null===D.z&&(D.z=l(D.x,D.y,y,B,C));if(D.prev.next!==D||D.next.prev!==D)return D.prev.next=D,D.next.prev=D,b(x,y,B,C);D.prevZ=
D.prev;D.nextZ=D.next}x.prevZ.nextZ=null;x.prevZ=null;a:for(B=1;;){C=x;y=x=null;let F=0;for(;C;){F++;D=C;let E=0;for(;E<B&&D;E++)D=D.nextZ;let G=B;for(;0<E||0<G&&D;){let O;0===E?(O=D,D=D.nextZ,G--):0!==G&&D?C.z<=D.z?(O=C,C=C.nextZ,E--):(O=D,D=D.nextZ,G--):(O=C,C=C.nextZ,E--);y?y.nextZ=O:x=O;O.prevZ=y;y=O}C=D}y.nextZ=null;B*=2;if(2>F)break a}return x}function a(x,y,B){return(y.y-x.y)*(B.x-y.x)-(y.x-x.x)*(B.y-y.y)}function c(x,y,B,C){return m(x,y)&&m(B,C)||m(x,C)&&m(B,y)?!0:0<a(x,y,B)!==0<a(x,y,C)&&
0<a(B,C,x)!==0<a(B,C,y)}function d(x,y,B,C,D,F,E,G){return 0<=(D-E)*(y-G)-(x-E)*(F-G)&&0<=(x-E)*(C-G)-(B-E)*(y-G)&&0<=(B-E)*(F-G)-(D-E)*(C-G)}function f(x,y){return 0>a(x.prev,x,x.next)?0<=a(x,y,x.next)&&0<=a(x,x.prev,y):0>a(x,y,x.prev)||0>a(x,x.next,y)}function l(x,y,B,C,D){x=32767*(x-B)*D;y=32767*(y-C)*D;x=(x|x<<8)&16711935;x=(x|x<<4)&252645135;x=(x|x<<2)&858993459;y=(y|y<<8)&16711935;y=(y|y<<4)&252645135;y=(y|y<<2)&858993459;return(x|x<<1)&1431655765|((y|y<<1)&1431655765)<<1}function m(x,y){return x.x===
y.x&&x.y===y.y}function k(x,y){return x.x-y.x}function q(x,y){const B=t.create(x.index,x.x,x.y),C=t.create(y.index,y.x,y.y),D=x.next,F=y.prev;x.next=y;y.prev=x;B.next=D;D.prev=B;C.next=B;B.prev=C;F.next=C;C.prev=F;return C}let t=function(){function x(){this.y=this.x=this.index=0;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}x.create=function(y,B,C){const D=A<w.length?w[A++]:new x;D.index=y;D.x=B;D.y=C;D.prev=null;D.next=null;D.z=null;D.prevZ=null;D.nextZ=null;D.steiner=!1;
return D};return x}();const w=[];let A=0;for(let x=0;8096>x;x++)w.push(new t);u.bufcut=function(x,y,B,C,D,F,E){A=0;var G=(C-B)*F,O=D&&D.length;const H=O?(D[0]-B)*F:G;var K=n(y,B,C,0,H,F,!0);if(K&&K.next!==K.prev){var P;if(O){O=[];for(let R=0,X=D.length;R<X;R++){const U=n(y,B,C,D[R]*F,R<X-1?D[R+1]*F:C*F,F,!1);U===U.next&&(U.steiner=!0);O.push(g(U))}O.sort(k);for(var L of O){C=L;D=K;if(D=e(C,D))C=q(D,C),h(C,C.next);K=h(K,K.next)}}if(G>80*F){var M=G=y[B*F];var J=P=y[1+B*F];for(L=F;L<H;L+=F)C=y[L+B*F],
D=y[L+1+B*F],M=Math.min(M,C),J=Math.min(J,D),G=Math.max(G,C),P=Math.max(P,D);P=Math.max(G-M,P-J);P=0!==P?1/P:0}r(K,x,F,M,J,P,E,0)}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../color ../../definitions ../../number ../../Utils ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLMeshTemplate".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){const d=n.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");return function(f){function l(m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M){var J=f.call(this)||this;m=e.LineMaterialKey.load(m);k&&(m.sdf=k.sdf,m.pattern=!0,m.textureBinding=k.textureBinding);J._capType=t;J._joinType=w;J._miterLimitCosine=b.getLimitCosine(A);J.tessellationProperties._fillColor=x;J.tessellationProperties._tl=y;J.tessellationProperties._br=B;J._hasPattern=C;J._isDashed=D;J._zOrder=K;J._effects=
P;J._minMaxZoom=p.i1616to32(Math.round(L*z.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(M*z.MIN_MAX_ZOOM_PRECISION_FACTOR));J._materialKey=m.data;J.tessellationProperties._bitset=(E?z.BITSET_GENERIC_LOCK_COLOR:0)|(G?z.BITSET_TYPE_FILL_OUTLINE:0)|(F?z.BITSET_LINE_SCALE_DASH:0)|(O?z.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0);J.tessellationProperties._halfWidth=.5*q;J.tessellationProperties._halfReferenceWidth=.5*H;J.tessellationProperties.offset=0;J._initializeTessellator(!1);return J}u._inheritsLoose(l,f);
l.fromCIMLine=function(m,k,q){var t=m.color,w=m.scaleFactor||1;const A=!!m.dashTemplate;let x=m.cap;A&&x===r.CapType.ROUND&&(x=r.CapType.SQUARE);const y=m.join;w*=h.pt2px(m.width);const B=h.pt2px(m.referenceWidth),C=h.pt2px(m.miterLimit);t=t&&v.premultiplyAlphaRGBA(t)||0;const [D,F]=b.getMinMaxZoom(m.scaleInfo,q);if(!k)return new l(m.materialKey,k,w,x,y,C,t,0,0,!1,A,m.scaleDash,m.colorLocked,!1,m.sampleAlphaOnly,B,m.zOrder,m.effects,D,F);const {rect:E,width:G,height:O}=k;var H=E.x+z.SPRITE_PADDING;
const K=E.y+z.SPRITE_PADDING;q=H+G;const P=K+O;H=p.i1616to32(H,K);q=p.i1616to32(q,P);return new l(m.materialKey,k,w,x,y,C,t,H,q,!0,A,m.scaleDash,m.colorLocked,!1,m.sampleAlphaOnly,B,m.zOrder,m.effects,D,F)};l.fromFillOutline=function(m){var k;const q=e.FillMaterialKey.load(m.materialKey);return e.hasOutlineFillSymbology(q)&&m.outline&&"esriSLSSolid"===(null==(k=m.outline)?void 0:k.style)?l.fromSimpleLine({hash:"",materialKey:m.materialKey,...m.outline},null,!0):null};l.fromSimpleLine=function(m,k,
q=!1){var {color:t}=m;const w="esriSLSSolid"!==m.style&&"esriSLSNull"!==m.style,A=g.getCapType(m.cap||"round"),x=g.getJoinType(m.join||"round");t=t&&"esriSLSNull"!==m.style&&v.premultiplyAlphaRGBAArray(t)||0;"esriSLSNull"===m.style&&(t=0);const y=h.pt2px(m.width),B=m.miterLimit;if(!k)return new l(m.materialKey,k,y,A,x,B,t,0,0,!1,w,!0,!1,q,!1,y,0,null,b.DEFAULT_MIN_ZOOM,b.DEFAULT_MAX_ZOOM);const {rect:C,width:D,height:F}=k;var E=C.x+z.SPRITE_PADDING;const G=C.y+z.SPRITE_PADDING;var O=E+D;const H=G+
F;E=p.i1616to32(E,G);O=p.i1616to32(O,H);return new l(m.materialKey,k,y,A,x,B,t,E,O,!0,w,!0,!1,q,!1,y,0,null,b.DEFAULT_MIN_ZOOM,b.DEFAULT_MAX_ZOOM)};l.fromPictureLineSymbol=function(m,k,q,t){d.error("PictureLineSymbol support does not exist!");return null};return l}(a(c))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../definitions ../../enums ../../number ../../TurboLine ../../materialKey/MaterialKey ./templateUtils".split(" "),
function(u,n,h,r,v,z,p,g){const e=(c,d,f)=>(l,m,k,q,t,w,A,x,y,B,C)=>{k=v.i1616to32(C,Math.ceil(16*c._halfWidth));A=v.i8888to32(Math.round(16*A),Math.round(16*x),Math.round(16*y),Math.round(16*B));t=v.i8888to32(16*t,16*w,0,c._bitset);w=c.out;w.vertexBounds(l,m,d,f);w.vertexWrite(v.i1616to32(8*l,8*m));w.vertexWrite(c.id);w.vertexWrite(c._fillColor);w.vertexWrite(A);w.vertexWrite(k);w.vertexWrite(c._tl);w.vertexWrite(c._br);w.vertexWrite(t);w.vertexWrite(v.i1616to32(Math.ceil(16*c._halfReferenceWidth),
0));w.vertexWrite(c.minMaxZoom);w.vertexEnd();return c.offset+c.vertexCount++},b=(c,d,f)=>(l,m,k,q,t,w,A,x,y,B,C)=>{k=v.i1616to32(16*c._halfWidth,16*c._halfReferenceWidth);A=v.i8888to32(16*A+128,16*x+128,16*y+128,16*B+128);x=c.out;y=c._bitset<<24|c.id;x.vertexBounds(l,m,d,f);x.vertexWrite(v.i1616to32(8*l,8*m));x.vertexWrite(y);x.vertexWrite(c._fillColor);l=p.hasSimpleSymbology(c.key);l||(x.vertexWrite(0),x.vertexWrite(0));x.vertexWrite(0);x.vertexWrite(k);x.vertexWrite(A);l||x.vertexWrite(c.minMaxZoom);
x.vertexEnd();return c.offset+c.vertexCount++},a=c=>(d,f,l)=>{const m=c.out;m.indexWrite(d);m.indexWrite(f);m.indexWrite(l);c.indexCount+=3};return c=>function(d){function f(...m){m=d.call(this,...m)||this;m.tessellationProperties={};m._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0};m.geometryType=r.WGLGeometryType.LINE;return m}u._inheritsLoose(f,d);var l=f.prototype;l.writeGeometry=function(m,k,q,t){this._writeGeometry(m,k,q,t)};l._initializeTessellator=function(m){var k=p.LineMaterialKey.load(this._materialKey),
q=p.FillMaterialKey.load(this._materialKey),t=this._tessellationOptions;k=k.vvSizeFieldStops||k.vvSizeMinMaxValue||k.vvSizeScaleStops||k.vvSizeUnitValue;m=this.tessellationProperties._halfWidth<h.THIN_LINE_HALF_WIDTH_THRESHOLD&&!m&&!k;this.tessellationProperties.minMaxZoom=this._minMaxZoom;t.wrapDistance=65535;t.textured=this._isDashed||this._hasPattern;t.offset=this.tessellationProperties.offset;t.halfWidth=this.tessellationProperties._halfWidth;t=m?0:1;q=p.hasOutlineFillSymbology(q)?b:e;this._lineTessellator=
new z.LineTessellation(q(this.tessellationProperties,t,t),a(this.tessellationProperties),m)};l._write=function(m,k,q,t){q="esriGeometryPoint"===k.geometryType;m.recordStart(k.getDisplayId(),this._materialKey,this.geometryType,q);this._writeGeometry(m,k,t,q);m.recordEnd()};l._writeGeometry=function(m,k,q,t){q=null!=q?q:k.readLegacyGeometryForDisplay();t=this._getLines(q,t);n.isNone(t)||this._writeVertices(m,k,t)};l._getLines=function(m,k){if(n.isNone(m))return null;m=m.paths||m.rings;return n.isNone(m)?
null:g.clipLinesMarshall(m,k?256:16)};l._writeVertices=function(m,k,q){const t=k.getDisplayId(),w=m.vertexCount(),A=this.tessellationProperties;k=this._tessellationOptions;A.out=m;A.id=t;A.indexCount=0;A.vertexCount=0;A.offset=w;k.capType=this._capType;k.joinType=this._joinType;m=p.FillMaterialKey.load(this._materialKey);this.tessellationProperties.key=p.hasOutlineFillSymbology(m)?m:p.LineMaterialKey.load(this._materialKey);for(const {line:x,start:y}of q)k.initialDistance=y%65535,this._lineTessellator.tessellate(x,
k)};return f}(c)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/Logger","../../../../../../symbols/cim/cimAnalyzer","../../../../../../symbols/cim/utils","./WGLMeshTemplate"],function(u,n,h,r,v){const z=n.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");return function(p){function g(e){var b=p.call(this)||this;b._ongoingMaterialRequestMap=new Map;b._materialCache=new Map;
b._dynamicPropertyMap=new Map;b._cimLayer=e;return b}u._inheritsLoose(g,p);g.prototype.analyze=function(e,b,a,c,d){if(d&&0===d.length)return null;const f=d&&0<d.length,l=b.readLegacyFeature();b=b.getObjectId();const m=this._materialCache;var k=this._cimLayer.materialHash;if(!k)return z.error("A Dynamic mesh template must have a material hash value or function!"),Promise.reject(null);const q="function"===typeof k?k(l,a,c,b):k;if(m.has(q))return e=m.get(q),Promise.resolve(e);if(k=this._ongoingMaterialRequestMap.get(q))return k;
k=this._cimLayer;const t=h.analyzeCIMResource(k.cim,this._cimLayer.materialOverrides);t.mosaicHash=q;const {type:w,url:A}=k;b={cim:t,type:w,mosaicHash:q,url:A,size:null,dashTemplate:null,text:null,fontName:null,objectId:b,animatedSymbolProperties:null};switch(w){case "marker":b.size=r.evaluateValueOrFunction(k.size,l,a,c);b.animatedSymbolProperties=r.evaluateValueOrFunction(k.animatedSymbolProperties,l,a,c);break;case "line":b.dashTemplate=k.dashTemplate;break;case "text":b.text=r.evaluateValueOrFunction(k.text,
l,a,c),b.fontName=r.evaluateValueOrFunction(k.fontName,l,a,c)}e=e.getMosaicItem(b,d).then(x=>{f||(this._ongoingMaterialRequestMap.delete(q),m.set(q,x));return x}).catch(x=>{this._ongoingMaterialRequestMap.delete(q);z.error(".analyze()",x.message);return null});f||this._ongoingMaterialRequestMap.set(q,e);return e};return g}(v)})},"esri/symbols/cim/cimAnalyzer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../core/lang ../../core/Logger ../../core/maybe ../../core/screenUtils ../../core/string ../../support/arcadeOnDemand ./CIMSymbolHelper ./enums ./SDFHelper ./utils ./effects/CIMEffectHelper ../../views/2d/arcade/callExpressionWithFeature ../../views/2d/engine/webgl/definitions ../../views/2d/engine/webgl/fontUtils ../../views/2d/engine/webgl/grouping".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q){function t(ja){switch(ja){case "Butt":return a.CapType.BUTT;case "Square":return a.CapType.SQUARE;default:return a.CapType.ROUND}}function w(ja){switch(ja){case "Bevel":return a.JoinType.BEVEL;case "Miter":return a.JoinType.MITER;default:return a.JoinType.ROUND}}function A(ja){switch(ja){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return ma.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),
"center"}}function x(ja){switch(ja){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}}function y(ja){let wa="",Ja="";ja&&(ja=ja.toLowerCase(),ja.includes("italic")?wa="italic":ja.includes("oblique")&&(wa="oblique"),ja.includes("bold")?Ja="bold":ja.includes("light")&&(Ja="lighter"));return{style:wa,weight:Ja}}function B(ja,wa,Ja,va){let ra;ja[wa]?ra=ja[wa]:(ra={},ja[wa]=ra);ra[Ja]=va}function C(ja){return(ja=ja.markerPlacement)&&ja.angleToLine?
a.Alignment.MAP:a.Alignment.SCREEN}function D(){D=n._asyncToGenerator(function*(ja,wa,Ja,va,ra){va=null!=va?va:[];if(!ja)return va;let Ba;const Ha={};if("CIMSymbolReference"===ja.type){if(Ba=ja.symbol,ja=ja.primitiveOverrides){var ya=[];for(const oa of ja){var qa=oa.valueExpressionInfo;qa&&wa?(qa=e.createRendererExpression(qa.expression,wa.spatialReference,wa.fields).then(Aa=>{Aa&&B(Ha,oa.primitiveName,oa.propertyName,Aa)}),ya.push(qa)):null!=oa.value&&B(Ha,oa.primitiveName,oa.propertyName,oa.value)}0<
ya.length&&(yield Promise.all(ya))}}else return ma.error("Expect cim type to be 'CIMSymbolReference'"),va;ya=[];S(Ba,Ja,ya);0<ya.length&&(yield Promise.all(ya));switch(Ba.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":F(Ba,ja,Ha,wa,va,Ja,ra)}return va});return D.apply(this,arguments)}function F(ja,wa,Ja,va,ra,Ba,Ha){if(ja){var ya=ja.symbolLayers;if(ya){var qa=ja.effects,oa=b.CIMSymbolHelper.getSize(ja);if("CIMPointSymbol"===ja.type&&"Map"===ja.angleAlignment)var Aa=a.Alignment.MAP;
for(var Ka=ya.length;Ka--;){var Wa=ya[Ka];if(!Wa||!1===Wa.enable)continue;let nb;qa&&qa.length&&(nb=[...qa]);var Pa=Wa.effects;Pa&&Pa.length&&(qa?nb.push(...Pa):nb=[...Pa]);Pa=[];b.OverrideHelper.findEffectOverrides(nb,wa,Pa);Pa=0<Pa.length?fa(nb,Pa,Ja,va):nb;var Ta=[];b.OverrideHelper.findApplicableOverrides(Wa,wa,Ta);switch(Wa.type){case "CIMSolidFill":E(Wa,Pa,Ja,Ta,va,ra);break;case "CIMPictureFill":G(Wa,Pa,Ja,Ta,va,Ba,ra);break;case "CIMHatchFill":O(Wa,Pa,Ja,Ta,va,ra);break;case "CIMGradientFill":{var eb=
Ja,Na=va,Sa=ra;const [Nb,Tb]=ha(Ta,Wa.primitiveName,Pa,null,null);var $a=g.numericHash(JSON.stringify(Wa)+Tb).toString();Sa.push({type:"fill",templateHash:$a,materialHash:Nb?la($a,eb,Ta,Na):$a,cim:Wa,materialOverrides:null,colorLocked:Wa.colorLocked,effects:Pa,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,applyRandomOffset:!1,sampleAlphaOnly:!1})}break;case "CIMSolidStroke":H(Wa,Pa,Ja,Ta,va,ra,"CIMPolygonSymbol"===ja.type,oa);break;case "CIMPictureStroke":K(Wa,Pa,Ja,
Ta,va,ra,"CIMPolygonSymbol"===ja.type,oa);break;case "CIMGradientStroke":{eb=Ja;Na=va;Sa=ra;$a="CIMPolygonSymbol"===ja.type;var gb=oa,Za=Wa.primitiveName,ab=void 0!==Wa.width?Wa.width:4,ub=t(Wa.capStyle),yb=w(Wa.joinStyle),tb=Wa.miterLimit;const [Nb,Tb]=ha(Ta,Za,Pa,null,null),$b=g.numericHash(JSON.stringify(Wa)+Tb).toString();Sa.push({type:"line",templateHash:$b,materialHash:Nb?la($b,eb,Ta,Na):$b,cim:Wa,materialOverrides:null,isOutline:$a,colorLocked:Wa.colorLocked,effects:Pa,color:{r:128,g:128,b:128,
a:1},width:Q(Za,eb,"Width",Na,ab),cap:Q(Za,eb,"CapStyle",Na,ub),join:Q(Za,eb,"JoinStyle",Na,yb),miterLimit:Q(Za,eb,"MiterLimit",Na,tb),referenceWidth:gb,zOrder:U(Wa.name),dashTemplate:null,scaleDash:!1,sampleAlphaOnly:!1})}break;case "CIMCharacterMarker":P(Wa,Pa,Ja,Ta,va,ra);break;case "CIMPictureMarker":if(P(Wa,Pa,Ja,Ta,va,ra))break;"CIMLineSymbol"===ja.type&&(Aa=C(Wa));L(Wa,Pa,Ja,Ta,va,Ba,ra,Aa,oa);break;case "CIMVectorMarker":if(P(Wa,Pa,Ja,Ta,va,ra))break;"CIMLineSymbol"===ja.type&&(Aa=C(Wa));
eb=Ja;Na=va;Sa=ra;$a=Ba;gb=Aa;Za=oa;ab=Ha;if(yb=Wa.markerGraphics){ub=0;Wa.scaleSymbolsProportionally&&(tb=Wa.frame)&&(ub=tb.ymax-tb.ymin);tb=da(Wa.markerPlacement,Ta,eb,Na);for(const Nb of yb)if(Nb&&(yb=Nb.symbol))switch(yb.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":J(Wa,Pa,tb,null,Nb,Ta,eb,Na,Sa,$a,gb,Za,ub,ab);break;case "CIMTextSymbol":M(Wa,Pa,tb,Nb,eb,Ta,Na,Sa,gb,Za,ub)}}break;default:ma.error("Cannot analyze CIM layer",Wa.type)}}}}}function E(ja,wa,Ja,va,ra,Ba){const Ha=
ja.primitiveName,ya=d.fromCIMColor(ja.color),[qa,oa]=ha(va,Ha,wa,null,null),Aa=g.numericHash(JSON.stringify(ja)+oa).toString();Ba.push({type:"fill",templateHash:Aa,materialHash:qa?()=>Aa:Aa,cim:ja,materialOverrides:null,colorLocked:ja.colorLocked,color:Q(Ha,Ja,"Color",ra,ya,V),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:wa,applyRandomOffset:!1,sampleAlphaOnly:!0})}function G(ja,wa,Ja,va,ra,Ba,Ha){const ya=ja.primitiveName,qa=ja.tintColor?d.fromCIMColor(ja.tintColor):{r:255,g:255,b:255,a:1},
[oa,Aa]=ha(va,ya,wa,null,null);va=g.numericHash(JSON.stringify(ja)+Aa).toString();const Ka=g.numericHash(`${ja.url}${JSON.stringify(ja.colorSubstitutions)}`).toString();let Wa=d.getValue(ja.scaleX);if("width"in ja){const Pa=ja.width;let Ta=1;Ba=Ba.getResource(ja.url);z.isSome(Ba)&&(Ta=Ba.width/Ba.height);Wa/=ja.height/Pa*Ta}Ha.push({type:"fill",templateHash:va,materialHash:oa?()=>Ka:Ka,cim:ja,materialOverrides:null,colorLocked:ja.colorLocked,effects:wa,color:Q(ya,Ja,"TintColor",ra,qa,V),height:Q(ya,
Ja,"Height",ra,ja.height),scaleX:Q(ya,Ja,"ScaleX",ra,Wa),angle:Q(ya,Ja,"Rotation",ra,d.getValue(ja.rotation)),offsetX:Q(ya,Ja,"OffsetX",ra,d.getValue(ja.offsetX)),offsetY:Q(ya,Ja,"OffsetY",ra,d.getValue(ja.offsetY)),url:ja.url,applyRandomOffset:!1,sampleAlphaOnly:!1})}function O(ja,wa,Ja,va,ra,Ba){const Ha=["Rotation","OffsetX","OffsetY"],ya=va.filter(Ta=>Ta.primitiveName!==ja.primitiveName&&!Ha.includes(Ta.propertyName)),qa=ja.primitiveName,[oa,Aa]=ha(va,qa,wa,null,null);va=g.numericHash(JSON.stringify(ja)+
Aa).toString();const Ka=g.numericHash(`${ja.separation}${JSON.stringify(ja.lineSymbol)}`).toString();let Wa={r:255,g:255,b:255,a:1};if(ja.lineSymbol){var Pa;const Ta=null==(Pa=ja.lineSymbol)?void 0:Pa.symbolLayers.find(eb=>"CIMSolidStroke"===eb.type);Ta&&(Wa=d.fromCIMColor(Ta.color))}Ba.push({type:"fill",templateHash:va,materialHash:oa?la(Ka,Ja,ya,ra):Ka,cim:ja,materialOverrides:ya,colorLocked:ja.colorLocked,effects:wa,color:Wa,height:Q(qa,Ja,"Separation",ra,ja.separation),scaleX:1,angle:Q(qa,Ja,
"Rotation",ra,d.getValue(ja.rotation)),offsetX:Q(qa,Ja,"OffsetX",ra,d.getValue(ja.offsetX)),offsetY:Q(qa,Ja,"OffsetY",ra,d.getValue(ja.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!0})}function H(ja,wa,Ja,va,ra,Ba,Ha,ya){const qa=ja.primitiveName,oa=d.fromCIMColor(ja.color),Aa=void 0!==ja.width?ja.width:4,Ka=t(ja.capStyle),Wa=w(ja.joinStyle),Pa=ja.miterLimit,[Ta,eb]=ha(va,qa,wa,null,null),Na=g.numericHash(JSON.stringify(ja)+eb).toString();let Sa;if(wa&&wa instanceof Array&&0<wa.length&&(va=wa[wa.length-
1],"CIMGeometricEffectDashes"===va.type&&"NoConstraint"===va.lineDashEnding&&null===va.offsetAlongLine)){wa=[...wa];var $a=wa.pop();Sa=$a.dashTemplate;$a=$a.scaleDash}Ba.push({type:"line",templateHash:Na,materialHash:Ta?()=>Na:Na,cim:ja,materialOverrides:null,isOutline:Ha,colorLocked:ja.colorLocked,effects:wa,color:Q(qa,Ja,"Color",ra,oa,V),width:Q(qa,Ja,"Width",ra,Aa),cap:Q(qa,Ja,"CapStyle",ra,Ka),join:Q(qa,Ja,"JoinStyle",ra,Wa),miterLimit:Q(qa,Ja,"MiterLimit",ra,Pa),referenceWidth:ya,zOrder:U(ja.name),
dashTemplate:Sa,scaleDash:$a,sampleAlphaOnly:!0})}function K(ja,wa,Ja,va,ra,Ba,Ha,ya){const qa=g.numericHash(`${ja.url}${JSON.stringify(ja.colorSubstitutions)}`).toString(),oa=ja.primitiveName,Aa=d.fromCIMColor(ja.tintColor),Ka=void 0!==ja.width?ja.width:4,Wa=t(ja.capStyle),Pa=w(ja.joinStyle),Ta=ja.miterLimit,[eb,Na]=ha(va,oa,wa,null,null);va=g.numericHash(JSON.stringify(ja)+Na).toString();Ba.push({type:"line",templateHash:va,materialHash:eb?()=>qa:qa,cim:ja,materialOverrides:null,isOutline:Ha,colorLocked:ja.colorLocked,
effects:wa,color:Q(oa,Ja,"TintColor",ra,Aa,V),width:Q(oa,Ja,"Width",ra,Ka),cap:Q(oa,Ja,"CapStyle",ra,Wa),join:Q(oa,Ja,"JoinStyle",ra,Pa),miterLimit:Q(oa,Ja,"MiterLimit",ra,Ta),referenceWidth:ya,zOrder:U(ja.name),dashTemplate:null,scaleDash:!1,url:ja.url,sampleAlphaOnly:!1})}function P(ja,wa,Ja,va,ra,Ba){const Ha=ja.markerPlacement;if(!Ha||"CIMMarkerPlacementInsidePolygon"!==Ha.type)return!1;var ya=Math.abs(Ha.stepX),qa=Math.abs(Ha.stepY);if(0===ya||0===qa)return!0;const oa=["Rotation","OffsetX","OffsetY"],
Aa=va.filter(Na=>Na.primitiveName!==ja.primitiveName&&!oa.includes(Na.propertyName)),Ka="url"in ja?ja.url:null,[Wa,Pa]=ha(va,Ha.primitiveName,wa,null,null);va=g.numericHash(JSON.stringify(ja)+Pa).toString();let Ta=null;if("Random"===Ha.gridType){var eb=p.px2pt(m.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE);const Na=Math.max(Math.floor(eb/ya),1),Sa=Math.max(Math.floor(eb/qa),1);eb=qa*Sa;Ta=$a=>$a?$a*Sa:0;ya=Na*ya/eb}else Ha.shiftOddRows?(eb=2*qa,Ta=Na=>Na?2*Na:0,ya=ya/qa*.5):(eb=qa,Ta=null,ya/=qa);qa={r:255,
g:255,b:255,a:1};"tintColor"in ja&&(qa=d.fromCIMColor(ja.tintColor));Ba.push({type:"fill",templateHash:va,materialHash:Wa?la(va,Ja,Aa,ra):va,cim:ja,materialOverrides:Aa,colorLocked:ja.colorLocked,effects:wa,color:Q(Ha.primitiveName,Ja,"TintColor",ra,qa,V),height:Q(Ha.primitiveName,Ja,"StepY",ra,eb,Ta),scaleX:ya,angle:Q(Ha.primitiveName,Ja,"GridAngle",ra,Ha.gridAngle),offsetX:Q(Ha.primitiveName,Ja,"OffsetX",ra,d.getValue(Ha.offsetX)),offsetY:Q(Ha.primitiveName,Ja,"OffsetY",ra,d.getValue(Ha.offsetY)),
url:Ka,applyRandomOffset:"Random"===Ha.gridType,sampleAlphaOnly:!Ka});return!0}function L(ja,wa,Ja,va,ra,Ba,Ha,ya,qa){var oa;const Aa=ja.primitiveName,Ka=d.getValue(ja.size);let Wa=d.getValue(ja.scaleX);const Pa=d.getValue(ja.rotation),Ta=d.getValue(ja.offsetX),eb=d.getValue(ja.offsetY),Na=ja.tintColor?d.fromCIMColor(ja.tintColor):{r:255,g:255,b:255,a:1},Sa=g.numericHash(`${ja.url}${JSON.stringify(ja.colorSubstitutions)}${JSON.stringify(ja.animatedSymbolProperties)}`).toString(),$a=da(ja.markerPlacement,
va,Ja,ra),gb=ca(ja.animatedSymbolProperties,va,Ja,ra),[Za,ab]=ha(va,Aa,wa,$a,gb);va=g.numericHash(JSON.stringify(ja)+ab).toString();const ub=null!=(oa=ja.anchorPoint)?oa:{x:0,y:0};if("width"in ja){oa=ja.width;let yb=1;Ba=Ba.getResource(ja.url);z.isSome(Ba)&&(yb=Ba.width/Ba.height);Wa/=Ka/oa*yb}Ha.push({type:"marker",templateHash:va,materialHash:ja.animatedSymbolProperties&&!0===ja.animatedSymbolProperties.randomizeStartTime?(yb,tb,nb,Nb)=>{nb=q.getMaterialGroup(Nb);yb=d.evaluateValueOrFunction(gb,
yb,tb);return Sa+`-MATERIALGROUP(${nb})`+`-ASP(${JSON.stringify(yb)})`}:Za?(yb,tb)=>{yb=d.evaluateValueOrFunction(gb,yb,tb);return Sa+`-ASP(${JSON.stringify(yb)})`}:Sa,cim:ja,materialOverrides:null,colorLocked:ja.colorLocked,effects:wa,scaleSymbolsProportionally:!1,alignment:ya,size:Q(Aa,Ja,"Size",ra,Ka),scaleX:Q(Aa,Ja,"ScaleX",ra,Wa),rotation:Q(Aa,Ja,"Rotation",ra,Pa),offsetX:Q(Aa,Ja,"OffsetX",ra,Ta),offsetY:Q(Aa,Ja,"OffsetY",ra,eb),color:Q(Aa,Ja,"TintColor",ra,Na,V),anchorPoint:{x:ub.x,y:-ub.y},
isAbsoluteAnchorPoint:"Relative"!==ja.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:ja.rotateClockwise,referenceSize:qa,sizeRatio:1,markerPlacement:$a,url:ja.url,animatedSymbolProperties:gb})}function M(ja,wa,Ja,va,ra,Ba,Ha,ya,qa,oa,Aa){b.OverrideHelper.findApplicableOverrides(va,Ba,[]);var Ka=va.geometry;if("x"in Ka&&"y"in Ka){var Wa=va.symbol;var Pa=Wa.underline?"underline":Wa.strikethrough?"line-through":"none";var Ta=y(Wa.fontStyleName),eb=k.getFontFamily(Wa.fontFamilyName);
Wa.font={family:eb,decoration:Pa,...Ta};var Na=ja.frame,Sa=Ka.x-.5*(Na.xmin+Na.xmax),$a=Ka.y-.5*(Na.ymin+Na.ymax),gb=ja.size/Aa;Aa=ja.primitiveName;Ka=d.getValue(Wa.height)*gb;Na=d.getValue(Wa.angle);Sa=d.getValue(ja.offsetX)+(d.getValue(Wa.offsetX)+Sa)*gb;$a=d.getValue(ja.offsetY)+(d.getValue(Wa.offsetY)+$a)*gb;var Za=d.fromCIMColor(b.CIMSymbolHelper.getFillColor(Wa)),ab=d.fromCIMColor(b.CIMSymbolHelper.getStrokeColor(Wa)),ub=b.CIMSymbolHelper.getStrokeWidth(Wa);ub||(ab=d.fromCIMColor(b.CIMSymbolHelper.getFillColor(Wa.haloSymbol)),
ub=Wa.haloSize*gb);var [yb,tb]=ha(Ba,Aa,wa,Ja,null);Ba=JSON.stringify(ja.effects)+Number(ja.colorLocked)+JSON.stringify(ja.anchorPoint)+ja.anchorPointUnits+JSON.stringify(ja.markerPlacement);Ba=g.numericHash(JSON.stringify(va)+Ba+tb).toString();var nb=Q(va.primitiveName,ra,"TextString",Ha,va.textString,d._adjustTextCase,Wa.textCase);if(null!=nb){({fontStyleName:va}=Wa);var Nb=eb+(va?"-"+va.toLowerCase():"-regular");"string"===typeof nb&&nb.includes("[")&&Wa.fieldMap&&(nb=d.createLabelOverrideFunction(Wa.fieldMap,
nb,Wa.textCase));ya.push({type:"text",templateHash:Ba,materialHash:yb||"function"===typeof nb||nb.match(/\[(.*?)\]/)?(Tb,$b,Mb)=>Nb+"-"+d.evaluateValueOrFunction(nb,Tb,$b,Mb):Nb+"-"+g.numericHash(nb),cim:Wa,materialOverrides:null,colorLocked:ja.colorLocked,effects:wa,alignment:qa,anchorPoint:{x:ja.anchorPoint?ja.anchorPoint.x:0,y:ja.anchorPoint?ja.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==ja.anchorPointUnits,fontName:Nb,decoration:Pa,weight:Q(Aa,ra,"Weight",Ha,Ta.weight),style:Q(Aa,ra,"Size",
Ha,Ta.style),size:Q(Aa,ra,"Size",Ha,Ka),angle:Q(Aa,ra,"Rotation",Ha,Na),offsetX:Q(Aa,ra,"OffsetX",Ha,Sa),offsetY:Q(Aa,ra,"OffsetY",Ha,$a),horizontalAlignment:A(Wa.horizontalAlignment),verticalAlignment:x(Wa.verticalAlignment),text:nb,color:Za,outlineColor:ab,outlineSize:ub,referenceSize:oa,sizeRatio:1,markerPlacement:Ja})}}}function J(ja,wa,Ja,va,ra,Ba,Ha,ya,qa,oa,Aa,Ka,Wa,Pa){var Ta=ra.symbol;const eb=Ta.symbolLayers;if(eb)if(Pa)X(ja,wa,Ja,va,ra,Ha,Ba,ya,qa,oa,Aa,Ka,Wa);else if(Pa=eb.length,eb&&
2===eb.length&&eb[0].enable&&eb[1].enable&&"CIMSolidStroke"===eb[0].type&&"CIMSolidFill"===eb[1].type&&!eb[0].effects&&!eb[1].effects)R(ja,wa,Ja,va,ra,eb,Ba,Ha,ya,qa,Aa,Ka,Wa);else if(Ta=f.CIMEffectHelper.applyEffects(Ta.effects,ra.geometry,oa.geometryEngine))for(;Pa--;){var Na=eb[Pa];if(Na&&!1!==Na.enable)switch(Na.type){case "CIMSolidFill":case "CIMSolidStroke":{var Sa,$a=f.CIMEffectHelper.applyEffects(Na.effects,Ta,oa.geometryEngine),gb=c.getExtent($a);if(!gb)continue;const [ub,yb,tb]=c.getSDFMetrics(gb,
ja.frame,ja.size,ja.anchorPoint,"Relative"!==ja.anchorPointUnits);var Za="CIMSolidFill"===Na.type;$a={type:"sdf",geom:$a,asFill:Za};var ab=ja.primitiveName;gb=null!=(Sa=d.getValue(ja.size))?Sa:10;const nb=d.getValue(ja.rotation),Nb=d.getValue(ja.offsetX),Tb=d.getValue(ja.offsetY),$b=Na.path,Mb=Na.primitiveName,Kb=Za?d.fromCIMColor(b.CIMSymbolHelper.getFillColor(Na)):d.fromCIMColor(b.CIMSymbolHelper.getStrokeColor(Na)),kb=Za?{r:0,g:0,b:0,a:0}:d.fromCIMColor(b.CIMSymbolHelper.getStrokeColor(Na)),rb=
b.CIMSymbolHelper.getStrokeWidth(Na);if(!Za&&!rb)break;Za=!1;let zb="";for(const ua of Ba)if(ua.primitiveName===Mb||ua.primitiveName===ab)void 0!==ua.value?zb+=`-${ua.primitiveName}-${ua.propertyName}-${JSON.stringify(ua.value)}`:ua.valueExpressionInfo&&(Za=!0);z.isSome(wa)&&"function"===typeof wa&&(Za=!0);ab=JSON.stringify({...ja,markerGraphics:null});const xb=g.numericHash(JSON.stringify($a)+$b).toString();Na={type:"marker",templateHash:g.numericHash(JSON.stringify(ra)+JSON.stringify(Na)+ab+zb).toString(),
materialHash:Za?()=>xb:xb,cim:$a,materialOverrides:null,colorLocked:ja.colorLocked,effects:wa,scaleSymbolsProportionally:ja.scaleSymbolsProportionally,alignment:Aa,anchorPoint:{x:yb,y:tb},isAbsoluteAnchorPoint:!1,size:Q(ja.primitiveName,Ha,"Size",ya,gb),rotation:Q(ja.primitiveName,Ha,"Rotation",ya,nb),offsetX:Q(ja.primitiveName,Ha,"OffsetX",ya,Nb),offsetY:Q(ja.primitiveName,Ha,"OffsetY",ya,Tb),scaleX:1,frameHeight:Wa,rotateClockwise:ja.rotateClockwise,referenceSize:Ka,sizeRatio:ub,color:Q(Mb,Ha,"Color",
ya,Kb,V),outlineColor:Q(Mb,Ha,"Color",ya,kb,V),outlineWidth:Q(Mb,Ha,"Width",ya,rb),markerPlacement:Ja,animatedSymbolProperties:va,path:$b};qa.push(Na);break}default:X(ja,wa,Ja,va,ra,Ha,Ba,ya,qa,oa,Aa,Ka,Wa)}}}function R(ja,wa,Ja,va,ra,Ba,Ha,ya,qa,oa,Aa,Ka,Wa){var Pa=ra.geometry;const Ta=Ba[0];Ba=Ba[1];var eb=c.getExtent(Pa);if(eb){var [Na,Sa,$a]=c.getSDFMetrics(eb,ja.frame,ja.size,ja.anchorPoint,"Relative"!==ja.anchorPointUnits);Pa={type:"sdf",geom:Pa,asFill:!0};var gb=ja.primitiveName;eb=d.getValue(ja.size);
var Za=d.getValue(ja.rotation),ab=d.getValue(ja.offsetX),ub=d.getValue(ja.offsetY),yb=Ba.path,tb=Ba.primitiveName,nb=Ta.primitiveName,Nb=d.fromCIMColor(b.CIMSymbolHelper.getFillColor(Ba)),Tb=d.fromCIMColor(b.CIMSymbolHelper.getStrokeColor(Ta)),$b=b.CIMSymbolHelper.getStrokeWidth(Ta),Mb=!1,Kb="";for(const rb of Ha)if(rb.primitiveName===tb||rb.primitiveName===nb||rb.primitiveName===gb)void 0!==rb.value?Kb+=`-${rb.primitiveName}-${rb.propertyName}-${JSON.stringify(rb.value)}`:rb.valueExpressionInfo&&
(Mb=!0);Ha=JSON.stringify({...ja,markerGraphics:null});var kb=g.numericHash(JSON.stringify(Pa)+yb).toString();ja={type:"marker",templateHash:g.numericHash(JSON.stringify(ra)+JSON.stringify(Ba)+JSON.stringify(Ta)+Ha+Kb).toString(),materialHash:Mb?()=>kb:kb,cim:Pa,materialOverrides:null,colorLocked:ja.colorLocked,effects:wa,scaleSymbolsProportionally:ja.scaleSymbolsProportionally,alignment:Aa,anchorPoint:{x:Sa,y:$a},isAbsoluteAnchorPoint:!1,size:Q(ja.primitiveName,ya,"Size",qa,eb),rotation:Q(ja.primitiveName,
ya,"Rotation",qa,Za),offsetX:Q(ja.primitiveName,ya,"OffsetX",qa,ab),offsetY:Q(ja.primitiveName,ya,"OffsetY",qa,ub),scaleX:1,frameHeight:Wa,rotateClockwise:ja.rotateClockwise,referenceSize:Ka,sizeRatio:Na,color:Q(tb,ya,"Color",qa,Nb,V),outlineColor:Q(nb,ya,"Color",qa,Tb,V),outlineWidth:Q(nb,ya,"Width",qa,$b),markerPlacement:Ja,path:yb,animatedSymbolProperties:va};oa.push(ja)}}function X(ja,wa,Ja,va,ra,Ba,Ha,ya,qa,oa,Aa,Ka,Wa){ra={type:ja.type,enable:!0,name:ja.name,colorLocked:ja.colorLocked,primitiveName:ja.primitiveName,
anchorPoint:ja.anchorPoint,anchorPointUnits:ja.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:ja.rotateClockwise,rotation:0,size:ja.size,billboardMode3D:ja.billboardMode3D,depth3D:ja.depth3D,frame:ja.frame,markerGraphics:[ra],scaleSymbolsProportionally:ja.scaleSymbolsProportionally,respectFrame:ja.respectFrame,clippingPath:ja.clippingPath};let Pa=[];const Ta=["Rotation","OffsetX","OffsetY"];Pa=Ha.filter(ub=>ub.primitiveName!==ja.primitiveName||!Ta.includes(ub.propertyName));var eb="";for(var Na of Ha)void 0!==
Na.value&&(eb+=`-${Na.primitiveName}-${Na.propertyName}-${JSON.stringify(Na.value)}`);const [Sa,$a,gb]=b.CIMSymbolHelper.getTextureAnchor(ra,oa);Ha=ja.primitiveName;oa=d.getValue(ja.rotation);Na=d.getValue(ja.offsetX);const Za=d.getValue(ja.offsetY);eb=g.numericHash(JSON.stringify(ra)+eb).toString();const ab=0<Pa.length||z.isSome(wa)&&"function"===typeof wa;wa={type:"marker",templateHash:eb,materialHash:ab?la(eb,Ba,Pa,ya):eb,cim:ra,materialOverrides:Pa,colorLocked:ja.colorLocked,effects:wa,scaleSymbolsProportionally:ja.scaleSymbolsProportionally,
alignment:Aa,anchorPoint:{x:Sa,y:$a},isAbsoluteAnchorPoint:!1,size:ja.size,rotation:Q(Ha,Ba,"Rotation",ya,oa),offsetX:Q(Ha,Ba,"OffsetX",ya,Na),offsetY:Q(Ha,Ba,"OffsetY",ya,Za),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:Wa,rotateClockwise:ja.rotateClockwise,referenceSize:Ka,sizeRatio:gb/p.pt2px(ja.size),markerPlacement:Ja,animatedSymbolProperties:va};qa.push(wa)}function U(ja){return ja&&0===ja.indexOf("Level_")&&(ja=parseInt(ja.substr(6),10),!isNaN(ja))?
ja:0}function V(ja){if(!ja||0===ja.length)return null;ja=(new h(ja)).toRgba();return{r:ja[0],g:ja[1],b:ja[2],a:ja[3]}}function Q(ja,wa,Ja,va,ra,Ba,Ha){if(ja=wa[ja]){const ya=ja[Ja];if("string"===typeof ya||"number"===typeof ya||ya instanceof Array)return Ba?Ba.call(null,ya,Ha):ya;if(null!=ya&&ya instanceof e.ArcadeExpression)return(qa,oa,Aa)=>{qa=l(ya,qa,{$view:Aa},va.geometryType,oa);null!==qa&&Ba&&(qa=Ba.call(null,qa,Ha));return null!==qa?qa:ra}}return ra}function Y(ja){return ja?ja.charAt(0).toLowerCase()+
ja.substr(1):ja}function fa(ja,wa,Ja,va){for(const ra of wa)if(ra.valueExpressionInfo){const Ba=Ja[ra.primitiveName]&&Ja[ra.primitiveName][ra.propertyName];Ba instanceof e.ArcadeExpression&&(ra.fn=(Ha,ya,qa)=>l(Ba,Ha,{$view:qa},va.geometryType,ya))}return(ra,Ba,Ha)=>{for(var ya of wa)ya.fn&&(ya.value=ya.fn(ra,Ba,Ha));ra=[];for(let oa of ja){var qa;if(Ba=null==(qa=oa)?void 0:qa.primitiveName){Ha=!1;for(const Aa of wa)Aa.primitiveName===Ba&&(ya=Y(Aa.propertyName),null!=Aa.value&&Aa.value!==oa[ya]&&
(Ha||(oa=r.clone(oa),Ha=!0),oa[ya]=Aa.value))}ra.push(oa)}return ra}}function da(ja,wa,Ja,va){const ra=[];b.OverrideHelper.findApplicableOverrides(ja,wa,ra);if(0===ra.length)return ja;for(const Ba of ra)if(Ba.valueExpressionInfo){const Ha=Ja[Ba.primitiveName]&&Ja[Ba.primitiveName][Ba.propertyName];Ha instanceof e.ArcadeExpression&&(Ba.fn=(ya,qa,oa)=>l(Ha,ya,{$view:oa},va.geometryType,qa))}return(Ba,Ha,ya)=>{for(const qa of ra)qa.fn&&(qa.value=qa.fn(Ba,Ha,ya));Ba=r.clone(ja);Ha=ja.primitiveName;for(const qa of ra)qa.primitiveName===
Ha&&(ya=Y(qa.propertyName),null!=qa.value&&qa.value!==Ba[ya]&&(Ba[ya]=qa.value));return Ba}}function ca(ja,wa,Ja,va){const ra=[];b.OverrideHelper.findApplicableOverrides(ja,wa,ra);if(0===ra.length)return ja;for(const Ba of ra)if(Ba.valueExpressionInfo){const Ha=Ja[Ba.primitiveName]&&Ja[Ba.primitiveName][Ba.propertyName];Ha instanceof e.ArcadeExpression&&(Ba.fn=(ya,qa,oa)=>l(Ha,ya,{$view:oa},va.geometryType,qa))}return(Ba,Ha,ya)=>{for(const qa of ra)qa.fn&&(qa.value=qa.fn(Ba,Ha,ya));Ba=r.clone(ja);
Ha=ja.primitiveName;for(const qa of ra)qa.primitiveName===Ha&&(ya=Y(qa.propertyName),null!=qa.value&&qa.value!==Ba[ya]&&(Ba[ya]=qa.value));return Ba}}function la(ja,wa,Ja,va){for(const ra of Ja)if(ra.valueExpressionInfo){const Ba=wa[ra.primitiveName]&&wa[ra.primitiveName][ra.propertyName];Ba instanceof e.ArcadeExpression&&(ra.fn=(Ha,ya,qa)=>l(Ba,Ha,{$view:qa},va.geometryType,ya))}return(ra,Ba,Ha)=>{for(const ya of Ja)ya.fn&&(ya.value=ya.fn(ra,Ba,Ha));return g.numericHash(ja+b.OverrideHelper.buildOverrideKey(Ja)).toString()}}
function ha(ja,wa,Ja,va,ra){let Ba=!1,Ha="";for(const ya of ja)ya.primitiveName===wa&&(void 0!==ya.value?Ha+=`-${ya.primitiveName}-${ya.propertyName}-${JSON.stringify(ya.value)}`:ya.valueExpressionInfo&&(Ba=!0));z.isSome(Ja)&&"function"===typeof Ja&&(Ba=!0);z.isSome(va)&&"function"===typeof va&&(Ba=!0);z.isSome(ra)&&"function"===typeof ra&&(Ba=!0);return[Ba,Ha]}function S(ja,wa,Ja){if(ja&&wa)switch(ja.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(ja=ja.symbolLayers)for(const va of ja)switch(ea(va,
wa,Ja),va.type){case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMCharacterMarker":case "CIMPictureMarker":"url"in va&&va.url&&Ja.push(wa.fetchResource(va.url,null));break;case "CIMVectorMarker":if(ja=va.markerGraphics)for(const ra of ja)ra&&(ja=ra.symbol)&&S(ja,wa,Ja)}}}function ea(ja,wa,Ja){ja.effects&&!z.isSome(wa.geometryEngine)&&(sa?Ja.push(sa):d.isGeometryEngineRequired(ja.effects)&&(sa=d.importGeometryEngine(),Ja.push(sa),
sa.then(va=>wa.geometryEngine=va)))}const ma=v.getLogger("esri.symbols.cim.cimAnalyzer");let sa;u.analyzeCIMResource=function(ja,wa){if(!wa||0===wa.length)return ja;ja=JSON.parse(JSON.stringify(ja));b.OverrideHelper.applyOverrides(ja,wa);return ja};u.analyzeCIMSymbol=function(ja,wa,Ja,va,ra){return D.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/arcade/callExpressionWithFeature":function(){define(["../../../core/Error",
"../../../core/Logger","../../../geometry/support/quantizationUtils"],function(u,n,h){function r(z){const p={};switch(z){case "esriGeometryPoint":return(g,e,b,a)=>h.unquantizePoint(e,p,g,b,a);case "esriGeometryPolygon":return(g,e,b,a)=>h.unquantizePolygon(e,p,g,b,a);case "esriGeometryPolyline":return(g,e,b,a)=>h.unquantizePolyline(e,p,g,b,a);case "esriGeometryMultipoint":return(g,e,b,a)=>h.unquantizeMultipoint(e,p,g,b,a);default:return n.getLogger("esri.views.2d.support.arcadeOnDemand").error(new u("mapview-arcade",
`Unable to handle geometryType: ${z}`)),g=>g}}const v=new Map;return function(z,p,g,e,b){if(z.referencesGeometry()&&b){{const {transform:a,hasZ:c,hasM:d}=b;v.has(e)||v.set(e,r(e));e=v.get(e)(p.geometry,a,c,d);p={...p,geometry:e}}}p=z.repurposeFeature(p);try{return z.evaluate({...g,$feature:p})}catch(a){return n.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe",
"./jsonUtils"],function(u,n,h){function r({scale:F,translate:E},G){return Math.round((G-E[0])/F[0])}function v({scale:F,translate:E},G){return Math.round((E[1]-G)/F[1])}function z(F,E,G){const O=[];let H,K,P,L;for(let M=0;M<G.length;M++){const J=G[M];if(0<M){if(P=r(F,J[0]),L=v(F,J[1]),P!==H||L!==K)O.push(E(J,P-H,L-K)),H=P,K=L}else H=r(F,J[0]),K=v(F,J[1]),O.push(E(J,H,K))}return 0<O.length?O:null}function p(F,E,G,O){return z(F,G?O?D:C:O?C:B,E)}function g(F,E,G,O){const H=[];G=G?O?D:C:O?C:B;for(O=0;O<
E.length;O++){const K=z(F,G,E[O]);K&&3<=K.length&&H.push(K)}return H.length?H:null}function e(F,E,G,O){const H=[];G=G?O?D:C:O?C:B;for(O=0;O<E.length;O++){const K=z(F,G,E[O]);K&&2<=K.length&&H.push(K)}return H.length?H:null}function b({scale:F,translate:E},G){return G*F[0]+E[0]}function a({scale:F,translate:E},G){return E[1]-G*F[1]}function c(F,E,G){const O=Array(G.length);if(!G.length)return O;const [H,K]=F.scale;let P=b(F,G[0][0]);F=a(F,G[0][1]);O[0]=E(G[0],P,F);for(let L=1;L<G.length;L++){const M=
G[L];P+=M[0]*H;F-=M[1]*K;O[L]=E(M,P,F)}return O}function d(F,E,G){const O=Array(G.length);for(let H=0;H<G.length;H++)O[H]=c(F,E,G[H]);return O}function f(F,E,G,O){return c(F,G?O?D:C:O?C:B,E)}function l(F,E,G,O){return d(F,G?O?D:C:O?C:B,E)}function m(F,E,G,O){return d(F,G?O?D:C:O?C:B,E)}function k(F,E,G){let [O,H]=G[0],K=Math.min(O,E[0]),P=Math.min(H,E[1]),L=Math.max(O,E[2]);E=Math.max(H,E[3]);for(let M=1;M<G.length;M++){const [J,R]=G[M];O+=J;H+=R;0>J&&(K=Math.min(K,O));0<J&&(L=Math.max(L,O));0>R?
P=Math.min(P,H):0<R&&(E=Math.max(E,H))}F[0]=K;F[1]=P;F[2]=L;F[3]=E;return F}function q(F,E){if(!E.length)return null;F[0]=F[1]=Number.POSITIVE_INFINITY;F[2]=F[3]=Number.NEGATIVE_INFINITY;for(let G=0;G<E.length;G++)k(F,F,E[G]);return F}function t(F,E,G,O,H){E.xmin=r(F,G.xmin);E.ymin=v(F,G.ymin);E.xmax=r(F,G.xmax);E.ymax=v(F,G.ymax);E!==G&&(O&&(E.zmin=G.zmin,E.zmax=G.zmax),H&&(E.mmin=G.mmin,E.mmax=G.mmax));return E}function w(F,E,G,O,H){E.points=p(F,G.points,O,H);return E}function A(F,E,G,O,H){E.x=
r(F,G.x);E.y=v(F,G.y);E!==G&&(O&&(E.z=G.z),H&&(E.m=G.m));return E}function x(F,E,G,O,H){F=g(F,G.rings,O,H);if(!F)return null;E.rings=F;return E}function y(F,E,G,O,H){F=e(F,G.paths,O,H);if(!F)return null;E.paths=F;return E}const B=(F,E,G)=>[E,G],C=(F,E,G)=>[E,G,F[2]],D=(F,E,G)=>[E,G,F[2],F[3]];u.equals=function(F,E){if(F===E||null==F&&null==E)return!0;if(null==F||null==E)return!1;let G,O,H,K;F&&"upperLeft"===F.originPosition?(G=F.translate[0],O=F.translate[1],F=F.scale[0]):(G=n.isSome(F.extent)?F.extent.xmin:
0,O=n.isSome(F.extent)?F.extent.ymax:0,F=F.tolerance);E&&"upperLeft"===E.originPosition?(H=E.translate[0],K=E.translate[1],E=E.scale[0]):(H=n.isSome(E.extent)?E.extent.xmin:0,K=n.isSome(E.extent)?E.extent.ymax:0,E=E.tolerance);return G===H&&O===K&&F===E};u.getQuantizedBoundsCoordsArray=k;u.getQuantizedBoundsCoordsArrayArray=q;u.getQuantizedBoundsPaths=function(F){return q([0,0,0,0],F)};u.getQuantizedBoundsPoints=function(F){const E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.NEGATIVE_INFINITY];return k(E,E,F)};u.getQuantizedBoundsRings=function(F){return q([0,0,0,0],F)};u.quantizeBounds=function(F,E,G){E[0]=r(F,G[0]);E[3]=v(F,G[1]);E[2]=r(F,G[2]);E[1]=v(F,G[3]);return E};u.quantizeExtent=t;u.quantizeGeometry=function(F,E){return F&&E?h.isPoint(E)?A(F,{},E,!1,!1):h.isPolyline(E)?y(F,{},E,!1,!1):h.isPolygon(E)?x(F,{},E,!1,!1):h.isMultipoint(E)?w(F,{},E,!1,!1):h.isExtent(E)?t(F,{},E,!1,!1):null:null};u.quantizeMultipoint=w;u.quantizePaths=e;u.quantizePoint=A;u.quantizePoints=
p;u.quantizePolygon=x;u.quantizePolyline=y;u.quantizeRings=g;u.quantizeX=r;u.quantizeY=v;u.toQuantizationTransform=function(F){return F?{originPosition:"upper-left"===F.originPosition?"upperLeft":"lower-left"===F.originPosition?"lowerLeft":F.originPosition,scale:F.tolerance?[F.tolerance,F.tolerance]:[1,1],translate:n.isSome(F.extent)?[F.extent.xmin,F.extent.ymax]:[0,0]}:null};u.unquantizeBounds=function(F,E,G){return G?(E[0]=b(F,G[0]),E[1]=a(F,G[3]),E[2]=b(F,G[2]),E[3]=a(F,G[1]),E):[b(F,E[0]),a(F,
E[3]),b(F,E[2]),a(F,E[1])]};u.unquantizeCoordsArray=c;u.unquantizeCoordsArrayArray=d;u.unquantizeExtent=function(F,E,G,O,H){E.xmin=b(F,G.xmin);E.ymin=a(F,G.ymin);E.xmax=b(F,G.xmax);E.ymax=a(F,G.ymax);E!==G&&(O&&(E.zmin=G.zmin,E.zmax=G.zmax),H&&(E.mmin=G.mmin,E.mmax=G.mmax));return E};u.unquantizeMultipoint=function(F,E,G,O,H){n.isSome(G)&&(E.points=f(F,G.points,O,H));return E};u.unquantizePaths=l;u.unquantizePoint=function(F,E,G,O,H){if(n.isNone(G))return E;E.x=b(F,G.x);E.y=a(F,G.y);E!==G&&(O&&(E.z=
G.z),H&&(E.m=G.m));return E};u.unquantizePoints=f;u.unquantizePolygon=function(F,E,G,O,H){n.isSome(G)&&(E.rings=m(F,G.rings,O,H));return E};u.unquantizePolyline=function(F,E,G,O,H){n.isSome(G)&&(E.paths=l(F,G.paths,O,H));return E};u.unquantizeRings=m;u.unquantizeX=b;u.unquantizeY=a;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){return function(c){function d(f,l,m){var k=c.call(this,f)||this;k._minMaxZoom=z.i1616to32(Math.round(l*v.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(m*v.MIN_MAX_ZOOM_PRECISION_FACTOR));k._cimLineLayer=f;let q=0;g.isFunction(f.width)||(q=.5*h.pt2px(f.width));k._dynamicPropertyMap.set("_halfWidth",(A,x,y)=>g.isFunction(f.width)?.5*h.pt2px(f.width(A,x,y)):q);g.isFunction(f.cap)?k._dynamicPropertyMap.set("_capType",f.cap):k._capType=f.cap;g.isFunction(f.join)?k._dynamicPropertyMap.set("_joinType",
f.join):k._joinType=f.join;const t=f.color;g.isFunction(t)?k._dynamicPropertyMap.set("_fillColor",(A,x,y)=>r.premultiplyAlphaRGBA(t(A,x,y))):k._fillColor=t&&r.premultiplyAlphaRGBA(t)||0;const w=f.miterLimit;g.isFunction(w)?k._dynamicPropertyMap.set("_miterLimitCosine",(A,x,y)=>g.getLimitCosine(w(A,x,y))):k._miterLimitCosine=g.getLimitCosine(w);n.isSome(f.effects)&&(l=f.effects,g.isFunction(l)?k._dynamicPropertyMap.set("_effects",l):k._effects=l);k._scaleFactor=f.scaleFactor||1;k._isDashed=null!=f.dashTemplate;
k.tessellationProperties._bitset=(f.colorLocked?v.BITSET_GENERIC_LOCK_COLOR:0)|(f.scaleDash?v.BITSET_LINE_SCALE_DASH:0)|(f.sampleAlphaOnly?v.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0);k._materialKey=f.materialKey;k._initializeTessellator(!0);return k}u._inheritsLoose(d,c);d.fromCIMLine=function(f,l){const [m,k]=g.getMinMaxZoom(f.scaleInfo,l);return new d(f,m,k)};d.prototype.bindFeature=function(f,l,m){const k=f.readLegacyFeature();this._dynamicPropertyMap.forEach((t,w)=>{this[w]=t(k,l,m)});this._halfWidth*=
this._scaleFactor;f=this._materialCache;var q=this._cimLineLayer.materialHash;q=q(k,l,m);q=f.get(q);f=null;q&&a.ok(q.spriteMosaicItem)&&(f=q.spriteMosaicItem);if(f){this._hasPattern=!0;const {rect:t,width:w,height:A}=f;q=t.x+v.SPRITE_PADDING;const x=t.y+v.SPRITE_PADDING,y=q+w,B=x+A;this.tessellationProperties._tl=z.i1616to32(q,x);this.tessellationProperties._br=z.i1616to32(y,B)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=
this._fillColor;this.tessellationProperties._halfWidth=this._halfWidth;this.tessellationProperties.offset=0;this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;q=p.LineMaterialKey.load(this._materialKey);f&&(q.sdf=f.sdf,q.pattern=!0,q.textureBinding=f.textureBinding);this._materialKey=q.data};return d}(e(b))})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../../../../../symbols/cim/enums ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m){const k=p.create(),q=z.create(),t=h.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate");return function(w){function A(x,y,B){var C=w.call(this,x)||this;C._cimMarkerLayer=x;C._minMaxZoom=a.i1616to32(Math.round(y*b.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(B*b.MIN_MAX_ZOOM_PRECISION_FACTOR));const D=x.color;d.isFunction(D)?C._dynamicPropertyMap.set("_fillColor",(K,P,L)=>e.premultiplyAlphaRGBA(D(K,P,L))):C._fillColor=e.premultiplyAlphaRGBA(D);const F=
x.outlineColor;d.isFunction(F)?C._dynamicPropertyMap.set("_outlineColor",(K,P,L)=>e.premultiplyAlphaRGBA(F(K,P,L))):C._outlineColor=e.premultiplyAlphaRGBA(F);const E=x.size;d.isFunction(E)?C._dynamicPropertyMap.set("_size",(K,P,L)=>v.pt2px(E(K,P,L))):C._size=v.pt2px(E)||0;y=x.scaleX;d.isFunction(y)?C._dynamicPropertyMap.set("_scaleX",y):C._scaleX=y||1;const G=x.offsetX;d.isFunction(G)?C._dynamicPropertyMap.set("xOffset",(K,P,L)=>v.pt2px(G(K,P,L))):C.xOffset=v.pt2px(G)||0;const O=x.offsetY;d.isFunction(O)?
C._dynamicPropertyMap.set("yOffset",(K,P,L)=>v.pt2px(O(K,P,L))):C.yOffset=v.pt2px(O)||0;const H=x.outlineWidth;d.isFunction(H)?C._dynamicPropertyMap.set("_outlineWidth",(K,P,L)=>v.pt2px(H(K,P,L))):C._outlineWidth=v.pt2px(H)||0;y=x.rotation;d.isFunction(y)?C._dynamicPropertyMap.set("_angle",y):C._angle=y||0;r.isSome(x.effects)&&(y=x.effects,d.isFunction(y)?C._dynamicPropertyMap.set("_effects",y):C._effects=y);r.isSome(x.markerPlacement)&&(y=x.markerPlacement,d.isFunction(y)?C._dynamicPropertyMap.set("_markerPlacement",
y):C._markerPlacement=y);C._scaleFactor=r.unwrapOr(x.scaleFactor,1);C._bitSet=(x.alignment===g.Alignment.MAP?1:0)|(x.colorLocked?1:0)<<1|(x.scaleSymbolsProportionally?1:0)<<3;C._materialKey=x.materialKey;return C}u._inheritsLoose(A,w);A.fromCIMMarker=function(x,y){const [B,C]=d.getMinMaxZoom(x.scaleInfo,y);return new A(x,B,C)};A.prototype.bindFeature=function(x,y,B){const C=x.readLegacyFeature();x=x.getObjectId();this._dynamicPropertyMap.forEach((X,U)=>{this[U]=X(C,y,B)});var D=this._cimMarkerLayer.materialHash;
x="function"===typeof D?D(C,y,B,x):D;if((x=this._materialCache.get(x))&&m.ok(x.spriteMosaicItem)&&x.spriteMosaicItem){x=x.spriteMosaicItem;D=this._cimMarkerLayer.sizeRatio;var F=x.width/x.height*this._scaleX,E=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,G=this._size,O=G*F,H=this.xOffset,K=this.yOffset;this.xOffset*=this._scaleFactor;this.yOffset*=this._scaleFactor;var P=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/v.pt2px(this._cimMarkerLayer.frameHeight):
1,L=this._outlineWidth*P,M=v.pt2px(this._cimMarkerLayer.referenceSize),J=P=0,R=this._cimMarkerLayer.anchorPoint;R&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(P=-R.x/(this._size*F),J=R.y/this._size):(P=R.x,J=R.y));this._sizeOutlineWidth=a.i8888to32(Math.round(Math.min(Math.sqrt(128*O),255)),Math.round(Math.min(Math.sqrt(128*G),255)),Math.round(Math.min(Math.sqrt(128*L),255)),Math.round(Math.min(Math.sqrt(128*M),255)));this.angle=E;this._bitestAndDistRatio=a.i1616to32(this._bitSet,Math.round(64*
D));F=x.rect.x+b.SPRITE_PADDING;E=x.rect.y+b.SPRITE_PADDING;L=F+x.width;M=E+x.height;this._texUpperLeft=a.i1616to32(F,E);this._texUpperRight=a.i1616to32(L,E);this._texBottomLeft=a.i1616to32(F,M);this._texBottomRight=a.i1616to32(L,M);F=c.MarkerMaterialKey.load(this._materialKey);F.sdf=x.sdf;F.pattern=!0;F.textureBinding=x.textureBinding;this._materialKey=F.data;this._anchorX=.5-(.5+P)*x.width/x.width;this._anchorY=.5-(.5+J)*x.height/x.height;O=O*D*this._scaleFactor;G=G*D*this._scaleFactor;O*=x.rect.width/
x.width;G*=x.rect.height/x.height;this._computedWidth=O;this._computedHeight=G;this._applyTransformation(q,k);this.xOffset=H;this.yOffset=K}else t.error(new n("mapview-cim","Encountered an error when binding feature"))};return A}(f(l))})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLDynamicMeshTemplate ../../../../layers/features/textUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){return function(f){function l(k,q,t){var w=f.call(this,k)||this;w._horizontalAlignment="center";w._verticalAlignment="middle";w._textToGlyphs=new Map;w._minMaxZoom=g.i1616to32(Math.round(q*p.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(t*p.MIN_MAX_ZOOM_PRECISION_FACTOR));q=k.scaleFactor||1;w._cimTextLayer=k;const A=k.color;b.isFunction(A)?w._dynamicPropertyMap.set("_color",(D,F,E)=>z.premultiplyAlphaRGBA(A(D,F,E))):w._color=z.premultiplyAlphaRGBA(A);const x=k.outlineColor;
b.isFunction(x)?w._dynamicPropertyMap.set("_haloColor",(D,F,E)=>z.premultiplyAlphaRGBA(x(D,F,E))):w._haloColor=z.premultiplyAlphaRGBA(x);let y;b.isFunction(k.size)||(y=Math.min(Math.round(h.pt2px(k.size*k.sizeRatio)),127));w._dynamicPropertyMap.set("_size",(D,F,E)=>b.isFunction(k.size)?Math.min(Math.round(h.pt2px(k.size(D,F,E)*k.sizeRatio)),127):y);b.isFunction(k.outlineSize)?w._dynamicPropertyMap.set("_haloSize",(D,F,E)=>Math.min(Math.floor(5*h.pt2px(k.outlineSize(D,F,E)*k.sizeRatio)),127)):w._haloSize=
Math.min(Math.floor(5*h.pt2px(k.outlineSize*k.sizeRatio)),127);let B;b.isFunction(k.offsetX)||(B=Math.round(h.pt2px(k.offsetX*k.sizeRatio)));w._dynamicPropertyMap.set("_xOffset",(D,F,E)=>b.isFunction(k.offsetX)?Math.round(h.pt2px(k.offsetX(D,F,E)*k.sizeRatio)):B);let C;b.isFunction(k.offsetY)||(C=Math.round(h.pt2px(k.offsetY*k.sizeRatio)));w._dynamicPropertyMap.set("_yOffset",(D,F,E)=>b.isFunction(k.offsetY)?Math.round(h.pt2px(k.offsetY(D,F,E)*k.sizeRatio)):C);b.isFunction(k.angle)?w._dynamicPropertyMap.set("_angle",
k.angle):w._angle=k.angle;b.isFunction(k.horizontalAlignment)?w._dynamicPropertyMap.set("_horizontalAlignment",k.horizontalAlignment):w._horizontalAlignment=k.horizontalAlignment;b.isFunction(k.verticalAlignment)?w._dynamicPropertyMap.set("_verticalAlignment",k.verticalAlignment):w._verticalAlignment=k.verticalAlignment;n.isSome(k.effects)&&(t=k.effects,b.isFunction(t)?w._dynamicPropertyMap.set("_effects",t):w._effects=t);n.isSome(k.markerPlacement)&&(t=k.markerPlacement,b.isFunction(t)?w._dynamicPropertyMap.set("_markerPlacement",
t):w._textPlacement=t);b.isFunction(k.text)?w._dynamicPropertyMap.set("_text",k.text):w._text=k.text;w._scaleFactor=q;q=Math.min(Math.round(h.pt2px(k.referenceSize*k.sizeRatio)),127);w._referenceSize=Math.round(Math.sqrt(256*q));w._materialKey=k.materialKey;q=e.TextMaterialKey.load(w._materialKey);q.sdf=!0;w._bitset=(k.alignment===r.Alignment.MAP?1:0)|(k.colorLocked?1:0)<<1;w._materialKey=q.data;w._decoration="none";w._lineHeight=1;w._lineWidth=512;w._isCIM=!0;return w}u._inheritsLoose(l,f);l.fromCIMText=
function(k,q){const [t,w]=b.getMinMaxZoom(k.scaleInfo,q);return new l(k,t,w)};var m=l.prototype;m.analyze=function(){var k=u._asyncToGenerator(function*(q,t,w,A){var x=t.readLegacyFeature();var y=this._cimTextLayer;x="string"===typeof y.text?y.text:"function"===typeof y.text?y.text(x,w,A):"";(q=yield f.prototype.analyze.call(this,q,t,w,A,d.codepoints(x)))&&q.glyphMosaicItems&&this._textToGlyphs.set(x,q.glyphMosaicItems);return q});return function(q,t,w,A){return k.apply(this,arguments)}}();m.bindFeature=
function(k,q,t){const w=k.readLegacyFeature();this._dynamicPropertyMap.forEach((A,x)=>{this[x]=A(w,q,t)});this._text&&0!==this._text.length?(this._size*=this._scaleFactor,this._scale=this._size/p.GLYPH_SIZE,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=v.getXAnchorDirection(n.unwrapOr(this._horizontalAlignment,"center")),this._yAlignD=v.getYAnchorDirection(n.unwrapOr(this._verticalAlignment,"baseline")),k=this._textToGlyphs.get(this._text),this.bindTextInfo(k,!1)):
this._shapingInfo=null};return l}(a(c))})},"esri/views/2d/layers/features/textUtils":function(){define(["exports"],function(u){u.codepoints=function(n){const h=Array(n.length);for(let r=0;r<n.length;r++)h[r]=n.charCodeAt(r);return h};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLMeshTemplate".split(" "),
function(u,n,h,r,v,z,p,g,e,b){return function(a){function c(d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E){var G=a.call(this)||this;G._effects=D;d=p.FillMaterialKey.load(d);f&&(d.sdf=f.sdf,d.pattern=!0,d.textureBinding=f.textureBinding);G.fillColor=l;G.tl=m;G.br=k;G.aux2_1=z.i1616to32(q,t);G.aux2_2=z.i1616to32(w,A);G.aux3=z.i8888to32(x,y,B,0);G._bitset=C;G._minMaxZoom=z.i1616to32(Math.round(F*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(E*r.MIN_MAX_ZOOM_PRECISION_FACTOR));G._materialKey=d.data;return G}u._inheritsLoose(c,
a);c.fromCIMFill=function(d,f,l){var m=d.color;m=m&&h.premultiplyAlphaRGBA(m)||0;const k=d.materialKey,[q,t]=g.getMinMaxZoom(d.scaleInfo,l);l=(d.colorLocked?r.BITSET_GENERIC_LOCK_COLOR:0)|(d.applyRandomOffset?r.BITSET_FILL_RANDOM_PATTERN_OFFSET:0)|(d.sampleAlphaOnly?r.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0);if(!f)return new c(k,null,m,0,0,0,0,0,0,0,0,0,l,d.effects,q,t);const {rect:w,width:A,height:x}=f;var y=d.scaleX||1,B=w.x+r.SPRITE_PADDING;const C=w.y+r.SPRITE_PADDING;var D=B+A;const F=C+x;var E=
d.height;let G=Math.round(E);0>=G&&(G=F-C);y=Math.round(y*E);0>=y&&(y=D-B);E=n.pt2px(d.offsetX||0);const O=n.pt2px(-d.offsetY||0);B=z.i1616to32(B,C);D=z.i1616to32(D,F);return new c(k,f,m,B,D,y,G,E,O,128,128,v.degToByte(d.angle),l,d.effects,q,t)};c.fromSimpleFill=function(d,f,l=!1){var {color:m}=d;m=m&&"esriSFSNull"!==d.style&&h.premultiplyAlphaRGBAArray(m)||0;l=l?r.BITSET_GENERIC_LOCK_COLOR:0;const k=d.materialKey;if(f){const {rect:w,width:A,height:x}=f;var q=w.x+r.SPRITE_PADDING;const y=w.y+r.SPRITE_PADDING;
var t=q+A;const B=y+x;q=z.i1616to32(q,y);t=z.i1616to32(t,B);f=new c(k,f,m,q,t,A,x,0,0,128,128,0,l,null,g.DEFAULT_MIN_ZOOM,g.DEFAULT_MAX_ZOOM)}else f=new c(k,null,m,0,0,0,0,0,0,0,0,0,l,null,g.DEFAULT_MIN_ZOOM,g.DEFAULT_MAX_ZOOM);f._maybeAddLineTemplate(d);return f};c.fromPictureFill=function(d,f,l=!1){const m=r.PICTURE_FILL_COLOR,{rect:k,width:q,height:t}=f;var w=k.x+r.SPRITE_PADDING,A=k.y+r.SPRITE_PADDING,x=w+q,y=A+t;w=z.i1616to32(w,A);x=z.i1616to32(x,y);y=Math.round(n.pt2px(d.width));A=Math.round(n.pt2px(d.height));
const B=n.pt2px(d.xoffset),C=n.pt2px(-d.yoffset);f=new c(d.materialKey,f,m,w,x,y,A,B,C,128*d.xscale,128*d.yscale,0,l?r.BITSET_GENERIC_LOCK_COLOR:0,null,g.DEFAULT_MIN_ZOOM,g.DEFAULT_MAX_ZOOM);f._maybeAddLineTemplate(d);return f};return c}(e(b))})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/promiseUtils"],function(u,n,h){function r(){r=n._asyncToGenerator(function*(z,p,g){try{yield z.acquire(),yield p(g),
z.release()}catch(e){throw z.release(),e;}});return r.apply(this,arguments)}let v=function(){function z(){this._resolver=null}var p=z.prototype;p.isHeld=function(){return!!this._resolver};p.acquire=function(){var g=n._asyncToGenerator(function*(){this._resolver?(yield this._resolver.promise,yield this.acquire()):this._resolver=h.createResolver()});return function(){return g.apply(this,arguments)}}();p.release=function(){const g=this._resolver;this._resolver=null;g.resolve()};return z}();u.Lock=v;
u.withLock=function(z,p,g){return r.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/support/cimSymbolUtils":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../symbols/cim/cimAnalyzer","../../../../symbols/cim/ExpandedCIM","./webStyleUtils"],function(u,n,h,r,v){const z=function(){var e=n._asyncToGenerator(function*(b,a,c,d){return Promise.all(b.map(f=>g(f,a,c,d)))});return function(b,
a,c,d){return e.apply(this,arguments)}}(),p=function(){var e=n._asyncToGenerator(function*(b,a,c){return new r.ExpandedCIM(yield h.analyzeCIMSymbol(b.data,a,c),b.data,b.rendererKey,b.maxVVSize)});return function(b,a,c){return e.apply(this,arguments)}}(),g=function(){var e=n._asyncToGenerator(function*(b,a,c,d){return b?"cim"===b.type?p(b,a,c):"web-style"===b.type?(b={type:"cim",data:yield v.fetchCIMSymbolReference(b,null,d),rendererKey:b.rendererKey,maxVVSize:b.maxVVSize},p(b,a,c)):b:null});return function(b,
a,c,d){return e.apply(this,arguments)}}();u.cimLayerToRasterizationInfo=function(e){if(!e)return null;const {type:b,cim:a,url:c,materialHash:d}=e,f={cim:a,type:b,mosaicHash:d,url:c,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null};switch(b){case "marker":f.size=e.size;f.path=e.path;f.animatedSymbolProperties=e.animatedSymbolProperties;break;case "line":f.dashTemplate=e.dashTemplate;break;case "text":f.text=e.text,f.fontName=e.fontName}return f};u.expandSymbol=
g;u.expandSymbols=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/ExpandedCIM":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../views/2d/engine/webgl/enums","../../views/2d/engine/webgl/materialKey/MaterialKey"],function(u,n,h,r){const v={marker:h.WGLGeometryType.MARKER,fill:h.WGLGeometryType.FILL,line:h.WGLGeometryType.LINE,text:h.WGLGeometryType.TEXT};let z=function(){function p(g,e,b,a){const c={minScale:null==
e?void 0:e.minScale,maxScale:null==e?void 0:e.maxScale};var d=c.minScale||c.maxScale?c.minScale+"-"+c.maxScale:"";this.layers=g;this.data=e;this.hash=this._createHash()+d;this.rendererKey=b;e={isOutline:!1,placement:null,symbologyType:h.WGLSymbologyType.DEFAULT,vvFlags:b};for(const f of g)g=v[f.type],e.isOutline="line"===f.type&&f.isOutline,f.materialKey=r.createMaterialKey(g,e),f.maxVVSize=a,f.scaleInfo=c,f.templateHash+=d}p.prototype._createHash=function(){let g="";for(const e of this.layers)g+=
e.templateHash;return g};n._createClass(p,[{key:"type",get:function(){return"expanded-cim"}}]);return p}();u.ExpandedCIM=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/support/webStyleUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/devEnvironmentUtils ../../../../core/Error ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../portal/Portal ../../../../chunks/persistableUrlUtils ../../../../symbols/support/styleUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b){function a(){a=n._asyncToGenerator(function*(m,k,q){if(!m.name)throw new r("style-symbol-reference-name-missing","Missing name in style symbol reference");if(m.styleName&&"Esri2DPointSymbolsStyle"===m.styleName)return c(m,q);try{const t=yield b.fetchStyle(m,k,q);return f(t,m.name,k,q)}catch(t){return z.throwIfAborted(t),null}});return a.apply(this,arguments)}function c(m,k){return d.apply(this,arguments)}function d(){d=n._asyncToGenerator(function*(m,k){m=b.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,
m.name);try{const q=yield b.requestJSON(m,k);return b.makeCIMSymbolRef(q.data)}catch(q){return z.throwIfAborted(q),null}});return d.apply(this,arguments)}function f(m,k,q,t){return l.apply(this,arguments)}function l(){l=n._asyncToGenerator(function*(m,k,q,t){var w=m.data;m={portal:q&&v.isSome(q.portal)?q.portal:g.getDefault(),url:p.urlToObject(m.baseUrl),origin:"portal-item"};w=w.items.find(A=>A.name===k);if(!w)throw new r("symbolstyleutils:symbol-name-not-found",`The symbol name '${k}' could not be found`,
{symbolName:k});w=e.fromJSON(b.symbolUrlFromStyleItem(w,"cimRef"),m);h.isDevEnvironment()&&(w=h.adjustStaticAGOUrl(w));try{const A=yield b.requestJSON(w,t);return b.makeCIMSymbolRef(A.data)}catch(A){return z.throwIfAborted(A),null}});return l.apply(this,arguments)}u.fetchCIMSymbolReference=function(m,k,q){return a.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(u){const n=
/^devext.arcgis.com$/,h=/^qaext.arcgis.com$/,r=/^[\w-]*\.mapsdevext.arcgis.com$/,v=/^[\w-]*\.mapsqa.arcgis.com$/,z=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,n,h,/^jsapps.esri.com$/,r,v];u.adjustStaticAGOUrl=function(p,g){return p?(g=g||globalThis.location.hostname)?null!=g.match(n)||null!=g.match(r)?p.replace("static.arcgis.com","staticdev.arcgis.com"):null!=g.match(h)||null!=g.match(v)?p.replace("static.arcgis.com","staticqa.arcgis.com"):p:p:p};u.isDevEnvironment=function(p){p=p||globalThis.location.hostname;
return z.some(g=>{var e;return null!=(null==(e=p)?void 0:e.match(g))})};u.isTelemetryDevEnvironment=function(p){p=p||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(z).some(g=>{var e;return null!=(null==(e=p)?void 0:e.match(g))})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/LRUCache ../../../../../support/arcadeOnDemand ../../../arcade/callExpressionWithFeature ../../../layers/support/cimSymbolUtils".split(" "),
function(u,n,h,r,v,z,p,g,e){function b(y,B,C,D){return a.apply(this,arguments)}function a(){a=h._asyncToGenerator(function*(y,B,C,D){switch(y.type){case "simple":case "heatmap":return k.fromBasicRenderer(y,B,C,D);case "map":return w.fromUVRenderer(y,B,C,D);case "interval":return t.fromCBRenderer(y,B,C,D);case "dictionary":return x.fromDictionaryRenderer(y,B,C,D);case "pie-chart":return q.fromPieChartRenderer(y,B,C,D);case "subtype":return q.fromSubtypes(y,B,C,D)}});return a.apply(this,arguments)}
function c(y,B){return d.apply(this,arguments)}function d(){d=h._asyncToGenerator(function*(y,B){const C=y||1;if("number"===typeof C)return(F,E,G)=>C;const D=yield p.createRendererExpression(C,B.spatialReference,B.fields);return(F,E,G)=>g(D,F,{$view:G},B.geometryType,E)||1});return d.apply(this,arguments)}function f(){return l.apply(this,arguments)}function l(){l=h._asyncToGenerator(function*(){A||(A=new Promise((y,B)=>u(["../../../layers/features/createSymbolSchema"],y,B)));return A});return l.apply(this,
arguments)}const m=v.getLogger("esri/views/2d/engine/webgl/util/Matcher");let k=function(){function y(){this.type="feature";this._defaultResult=null}y.fromBasicRenderer=function(){var C=h._asyncToGenerator(function*(D,F,E,G){const O=new y;D.symbol&&(D=yield e.expandSymbol(D.symbol,E,G),F=F.createTemplateGroup(D,null),O.setDefault(F));return O});return function(D,F,E,G){return C.apply(this,arguments)}}();y.fromPieChartRenderer=function(){var C=h._asyncToGenerator(function*(D,F,E,G){const O=new y;if(D.markerSymbol){const H=
yield e.expandSymbol(D.markerSymbol,E,G);let K;D.fillSymbol&&(K=yield e.expandSymbol(D.fillSymbol,E,G));D=F.createTemplateGroup(H,K);O.setDefault(D)}return O});return function(D,F,E,G){return C.apply(this,arguments)}}();var B=y.prototype;B.size=function(){return 1};B.getDefault=function(){return this._defaultResult};B.setDefault=function(C){this._defaultResult=C};B.match=function(C,D,F,E,G){return this.getDefault()};B.analyze=function(){var C=h._asyncToGenerator(function*(D,F,E,G,O,H){return null});
return function(D,F,E,G,O,H){return C.apply(this,arguments)}}();return y}(),q=function(y){function B(C,D){var F=y.call(this)||this;F._subMatchers=C;F._subtypeField=D;return F}h._inheritsLoose(B,y);B.fromSubtypes=function(){var C=h._asyncToGenerator(function*(D,F,E,G){const O=new Map,H=[];for(const K in D.renderers){const P=parseInt(K,10),L=b(D.renderers[K],F,E,G).then(M=>O.set(P,M));H.push(L)}yield Promise.all(H);return new B(O,D.subtypeField)});return function(D,F,E,G){return C.apply(this,arguments)}}();
B.prototype.match=function(C,D,F,E,G){var O=D.readAttribute(this._subtypeField);return(O=this._subMatchers.get(O))?O.match(C,D,F,E,G):null};return B}(k),t=function(y){function B(D,F,E,G){var O=y.call(this)||this;O.type="interval";O._intervals=[];O._isMaxInclusive=F;O._fieldIndex=G;O._field=D;O._normalizationInfo=E;return O}h._inheritsLoose(B,y);B.fromCBRenderer=function(){var D=h._asyncToGenerator(function*(F,E,G,O){const {isMaxInclusive:H,normalizationField:K,normalizationTotal:P,normalizationType:L}=
F,M=new B(F.field,H,{normalizationField:K,normalizationTotal:P,normalizationType:L},F.fieldIndex),J=yield e.expandSymbol(F.backgroundFillSymbol,G,O);yield Promise.all(F.intervals.map(function(){var R=h._asyncToGenerator(function*(X){var U=yield e.expandSymbol(X.symbol,G,O);U=yield E.createTemplateGroup(U,J);M.add({min:X.min,max:X.max},U)});return function(X){return R.apply(this,arguments)}}()));if(F=yield e.expandSymbol(F.defaultSymbol,G,O))F=yield E.createTemplateGroup(F,J),M.setDefault(F);return M});
return function(F,E,G,O){return D.apply(this,arguments)}}();var C=B.prototype;C.add=function(D,F){this._intervals.push({interval:D,result:F});this._intervals.sort((E,G)=>E.interval.min-G.interval.min)};C.size=function(){return y.prototype.size.call(this)+this._intervals.length};C.match=function(D,F,E,G,O){if(null==this._fieldIndex&&!this._field)return this.getDefault();D=null!=this._fieldIndex?F.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(F);if(!D&&(null===D||void 0===D||isNaN(D)))return this.getDefault();
for(F=0;F<this._intervals.length;F++){const {interval:H,result:K}=this._intervals[F];E=this._isMaxInclusive?D<=H.max:D<H.max;if(D>=H.min&&E)return K}return this.getDefault()};C._needsNormalization=function(){const D=this._normalizationInfo;return D&&(D.normalizationField||D.normalizationTotal||D.normalizationType)};C._getValueFromField=function(D){const F=D.readAttribute(this._field);if(!this._needsNormalization()||null==F)return F;const {normalizationField:E,normalizationTotal:G,normalizationType:O}=
this._normalizationInfo;D=!!E&&D.readAttribute(E);if(O)switch(O){case "esriNormalizeByField":return(D||void 0)&&F/D;case "esriNormalizeByLog":return Math.log(F)*Math.LOG10E;case "esriNormalizeByPercentOfTotal":return F/G*100;default:m.error(`Found unknown normalization type: ${O}`)}else m.error("Normalization is required, but no type was set!")};return B}(k),w=function(y){function B(D,F,E){var G=y.call(this)||this;G.type="map";G._nullResult=null;G._resultsMap=new Map;G._fieldsIndex=E;G._fields=D;
G._seperator=F||"";return G}h._inheritsLoose(B,y);B.fromUVRenderer=function(){var D=h._asyncToGenerator(function*(F,E,G,O){const H=F.fieldDelimiter,K=[F.field];F.field2&&K.push(F.field2);F.field3&&K.push(F.field3);const P=yield e.expandSymbol(F.backgroundFillSymbol,G,O),L=new B(K,H,F.fieldIndex);yield Promise.all(F.map.map(function(){var M=h._asyncToGenerator(function*(J){var R=yield e.expandSymbol(J.symbol,G,O);R=yield E.createTemplateGroup(R,P);"\x3cNull\x3e"===J.value?L.setNullResult(R):L.add(J.value,
R)});return function(J){return M.apply(this,arguments)}}()));if(F=yield e.expandSymbol(F.defaultSymbol,G,O))F=yield E.createTemplateGroup(F,P),L.setDefault(F);return L});return function(F,E,G,O){return D.apply(this,arguments)}}();var C=B.prototype;C.setNullResult=function(D){this._nullResult=D};C.add=function(D,F){this._resultsMap.set(D.toString(),F)};C.size=function(){return y.prototype.size.call(this)+this._resultsMap.size};C.match=function(D,F,E,G,O){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();
D=null!=this._fieldsIndex?F.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(F);if(null!==this._nullResult&&(null==D||""===D||"\x3cNull\x3e"===D))return this._nullResult;if(!D&&null==D)return this.getDefault();D=D.toString();return this._resultsMap.has(D)?this._resultsMap.get(D):this.getDefault()};C._getValueFromFields=function(D){const F=[];for(const E of this._fields){const G=D.readAttribute(E);null==G||""===G?F.push("\x3cNull\x3e"):F.push(G)}return F.join(this._seperator)};
return B}(k),A,x=function(y){function B(D,F,E,G,O,H){var K=y.call(this)||this;K.type="dictionary";K._groupIdCache=new z(100);K._loader=D;K._fieldMap=D.fieldMap;K._symbolFields=D.getSymbolFields();K._templates=F;K._info=E;K._scaleFn=G;K._schemaUtilsModule=O;K._symbolOptions=H;return K}h._inheritsLoose(B,y);B.fromDictionaryRenderer=function(){var D=h._asyncToGenerator(function*(F,E,G,O){const [{DictionaryLoader:H},K]=yield Promise.all([new Promise((L,M)=>u(["../../../../../renderers/support/DictionaryLoader"],
L,M)),f()]);O=new H(F.url,F.config,F.fieldMap);yield O.fetchResources({spatialReference:G.spatialReference,fields:G.fields});const P=yield c(F.scaleExpression,G);return new B(O,E,G,P,K,F.symbolOptions)});return function(F,E,G,O){return D.apply(this,arguments)}}();var C=B.prototype;C._analyzeFeature=function(){var D=h._asyncToGenerator(function*(F,E,G,O,H){F=F.readLegacyFeature();const K=this._scaleFn(F,G,O);G=this._attributeHash(F)+"-"+K;const P=this._groupIdCache.get(G);if(P)return P;O=yield this._loader.getSymbolAsync(F,
{...O,spatialReference:this._info.spatialReference,abortOptions:H,fields:this._info.fields});O=this._schemaUtilsModule.createSymbolSchema(O,this._symbolOptions);E=e.expandSymbol(O,this._info,E,H).then(L=>{if("expanded-cim"!==L.type)return m.error(new r("mapview-bad-type",`Found unexpected type ${L.type} in dictionary response`)),null;L.hash+="-"+K;for(const M of L.layers)M.scaleFactor=K,M.templateHash+="-"+K;return this._templates.createTemplateGroup(L,null)});this._groupIdCache.put(G,E,1);return E});
return function(F,E,G,O,H){return D.apply(this,arguments)}}();C.analyze=function(){var D=h._asyncToGenerator(function*(F,E,G,O,H,K){F=E.getCursor();for(E=[];F.next();)E.push(this._analyzeFeature(F,G,O,H,K));return Promise.all(E)});return function(F,E,G,O,H,K){return D.apply(this,arguments)}}();C.match=function(D,F,E,G,O){return null};C._attributeHash=function(D){let F="";for(const E of this._symbolFields){const G=this._fieldMap[E];G&&(F+=D.attributes[G]+"-")}return F};return B}(k);n.DictionaryMatcher=
x;n.FeatureMatcher=k;n.IntervalMatcher=t;n.MapMatcher=w;n.SubtypeMatcher=q;n.createMatcher=b;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/schemaUtils":function(){define("exports ../../../../core/Error ../../../../core/has ../../../../core/lang ../../../../core/Logger ../../../../core/maybe ../../../../core/screenUtils ../../../../core/sql ../../engine/webgl/enums ../../engine/webgl/Utils ../../engine/webgl/techniques/utils ../../engine/webgl/util/vvFlagUtils ./createSymbolSchema ./support/pixelBuffering ./support/rendererUtils ../support/clusterUtils ../support/util".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){function q(da){let ca=0,la=0,ha=e.WGLSymbologyType.DEFAULT;if(z.isSome(da)){la=f.getPtMaxVVSize(da);"visualVariables"in da&&(ca=c.getVVFlags(da.visualVariables||[]),"dot-density"===da.type&&(ha=e.WGLSymbologyType.DOT_DENSITY));"heatmap"===da.type&&(ha=e.WGLSymbologyType.HEATMAP);if("dictionary"===da.type)return{maxVVSize:la,vvFlags:ca,symbologyType:e.WGLSymbologyType.DEFAULT};if("pie-chart"===da.type)return{maxVVSize:la,vvFlags:ca,symbologyType:e.WGLSymbologyType.PIE_CHART};
if(ha!==e.WGLSymbologyType.DOT_DENSITY&&ha!==e.WGLSymbologyType.HEATMAP){var S=da.getSymbols();"backgroundFillSymbol"in da&&da.backgroundFillSymbol&&S.push(da.backgroundFillSymbol);let ma=da=!0;for(const sa of S)if("cim"===sa.type&&(ma=!1),"simple-fill"===sa.type||"picture-fill"===sa.type){S=(S=sa.outline)&&"none"!==S.style&&"solid"!==S.style;var ea="simple-fill"===sa.type&&"none"!==sa.style&&"solid"!==sa.style;ea="picture-fill"===sa.type||ea||S;S&&(da=!1);ea&&(ma=!1)}da?ha=ma?e.WGLSymbologyType.OUTLINE_FILL_SIMPLE:
e.WGLSymbologyType.OUTLINE_FILL:ma&&(ha=e.WGLSymbologyType.SIMPLE)}}return{vvFlags:ca,maxVVSize:la,symbologyType:ha}}function t(da,ca){da=r.clone(da);return da.some(la=>{{const S=la.labelPlacement;var ha=fa[ca];la.symbol?ha?(ha.includes(S)||(ha=ha[0],S&&Y.warn(`Found invalid label placement type ${S} for ${ca}. Defaulting to ${ha}`),la.labelPlacement=ha),la=!1):(Y.error(new n("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${ca} is not supported`)),la=!0):
(Y.warn("No ILabelClass symbol specified."),la=!0)}return la})?[]:da}function w(da,ca=!1){try{var la,ha;const S=D(da,ca),ea=O(da),ma={};S.map(ja=>{a:{switch(ja.target){case "feature":y(ma,x(da),ja);ja=void 0;break a;case "aggregate":if(!("featureReduction"in da)){ja=void 0;break a}var wa=da.featureReduction;switch(wa.type){case "selection":throw new n("ValidationError","Mapview does not support `selection` reduction type",wa);case "binning":y(ma,x(da),ja);ma.aggregate||(ma.aggregate={name:"aggregate",
type:"bin",filters:null,input:"feature",params:{fixedBinLevel:wa.fixedBinLevel},attributes:{}});A(ma.aggregate,ja.attributes.fields);ja=void 0;break a;case "cluster":y(ma,x(da),ja);ma.aggregate||(ma.aggregate={name:"aggregate",type:"cluster",input:"feature",filters:null,attributes:{},params:{clusterRadius:p.pt2px(wa.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(p.pt2px(wa.clusterMaxSize)/64),fields:ja.aggregateFields}});A(ma.aggregate,ja.attributes.fields);ja=void 0;break a}}ja=void 0}return ja});
const sa=z.isSome(da.subtypeCode)?`${da.subtypeField} = ${da.subtypeCode}`:null;return{source:{definitionExpression:g.sqlAnd(da.definitionExpression,sa),fields:da.fields.map(ja=>ja.toJSON()),gdbVersion:da.gdbVersion,historicMoment:null==(la=da.historicMoment)?void 0:la.getTime(),outFields:da.availableFields,pixelBuffer:da.pixelBuffer,spatialReference:da.spatialReference.toJSON(),timeExtent:null==(ha=da.timeExtent)?void 0:ha.toJSON(),customParameters:da.customParameters},attributes:{fields:{},indexCount:0},
processors:S,tileRenderer:ea,targets:ma}}catch(S){if("ValidationError"===S.fieldName)return Y.error(S),null;throw S;}}function A(da,ca){for(const la in ca){const ha=ca[la];if(ha.target!==da.name)continue;const S=da.attributes[la];S?(S.context.mesh=S.context.mesh||ha.context.mesh,S.context.storage=S.context.storage||ha.context.storage):da.attributes[la]=ha}return da}function x(da){var ca,la,ha,S,ea;return[null!=(ca=null==(la=z.unwrap(da.filter))?void 0:la.toJSON())?ca:null,null!=(ha=null==(S=z.unwrap(null==
(ea=z.unwrap(da.featureEffect))?void 0:ea.filter))?void 0:S.toJSON())?ha:null]}function y(da,ca,la){da.feature||(da.feature={name:"feature",input:"source",filters:ca,attributes:{}});A(da.feature,la.attributes.fields);return da}function B(da,ca){return ca.field?C(da,{...ca,type:"field",field:ca.field}):ca.valueExpression?C(da,{...ca,type:"expression",valueExpression:ca.valueExpression}):{field:null,fieldIndex:null}}function C(da,ca){switch(ca.type){case "expression":var la=ca.valueExpression;if(!da.fields[la]){var ha=
da.indexCount++;da.fields[la]={...ca,name:la,fieldIndex:ha}}return{fieldIndex:da.fields[la].fieldIndex};case "label-expression":return la=JSON.stringify(ca.label),da.fields[la]||(ha=da.indexCount++,da.fields[la]={...ca,name:la,fieldIndex:ha}),{fieldIndex:da.fields[la].fieldIndex};case "field":la=ca.field;if("aggregate"===ca.target&&da.fields[la])return{field:la};da.fields[la]={...ca,name:la};return{field:la};case "statistic":return da.fields[ca.name]={...ca},{field:ca.name}}}function D(da,ca=!1){const la=
[];let ha=0;la.push(G(da,ha++,ca));return la}function F(da,ca,la,ha,S,ea=!1){ca=C(ca,{type:"label-expression",target:ha,context:{mesh:!0},resultType:"string",label:{labelExpression:la.labelExpression,labelExpressionInfo:la.labelExpressionInfo?{expression:la.labelExpressionInfo.expression}:null,symbol:!!la.symbol,where:la.where}});({fieldIndex:ca}=ca);da=q(da);return{...d.createSymbolSchema(la,da,ea),fieldIndex:ca,target:ha,index:S}}function E(da,ca,la){const ha="featureReduction"in ca&&ca.featureReduction;
if(!ha)return{fields:[],labels:[],matcher:null,rendererOverride:null};const S=[];let ea=null,ma=k.toJSONGeometryType(ca.geometryType),sa=[],ja=null;if(ha)switch(ha.type){case "selection":throw new n("ValidationError","Mapview does not support `selection` reduction type",ha);case "cluster":case "binning":if("cluster"===ha.type?ma="esriGeometryPoint":"binning"===ha.type&&(ma="esriGeometryPolygon"),ha.renderer){for(const wa of ha.fields)m.convertAggregateFieldFromPublic(S,wa);ja=ha.renderer;ea=J(null,
"aggregate",ha.renderer,la);sa=ha&&ha.labelsVisible&&ha.labelingInfo||[]}else"cluster"===ha.type&&(ja=m.createClusterRenderer(S,ca.renderer,ha,null),ha.symbol&&(ca=q(ja),ea={type:"simple",symbol:d.createSymbolSchema(ha.symbol,ca,la),symbologyType:ca.symbologyType}),sa=ha&&ha.labelsVisible&&ha.labelingInfo||[])}K(da,S);return{labels:t(sa,"binning"===ha.type?"esriGeometryPolygon":ma),matcher:ea,fields:S,rendererOverride:ja}}function G(da,ca,la=!1){const ha={indexCount:0,fields:{}};ca="featureReduction"in
da&&da.featureReduction?"aggregate":"feature";if("sublayers"in da){var S={type:"subtype",subtypeField:da.subtypeField,renderers:{},symbologyType:e.WGLSymbologyType.DEFAULT},ea={type:"subtype",mapping:{},target:"feature"};var ma={type:"subtype",classes:{}};var sa={type:"symbol",target:"feature",aggregateFields:[],attributes:ha,storage:ea,mesh:{matcher:S,aggregateMatcher:null,labels:ma,sortKey:null}},ja=new Set;let va=0;for(const {renderer:ra,subtypeCode:Ba,labelingInfo:Ha,labelsVisible:ya}of da.sublayers){da=
J(ha,ca,ra,la);const qa=P(ha,ca,ra),oa=ya&&Ha;if("visualVariables"in ra&&ra.visualVariables&&ra.visualVariables.length)throw new n("ValidationError","Visual variables are currently not supported for subtype layers");if("dictionary"===da.type)throw new n("ValidationError","Dictionary renderer is not supported in subtype layers");if("subtype"===da.type)throw new n("ValidationError","Nested subtype renderers is not supported");if(z.isSome(qa)&&"subtype"===qa.type)throw new n("ValidationError","Nested subtype storage is not supported");
if(z.isSome(qa)&&z.isSome(qa.attributeMapping))throw new n("ValidationError","Non-visual-variable attributes are not supported in subtype layers");if("heatmap"===da.type)throw new n("ValidationError","Heatmaps are not supported in subtype layers");if("pie-chart"===da.type)throw new n("ValidationError","Pie-charts are not supported in subtype layers");if(ja.has(Ba))throw new n("ValidationError","Subtype codes for sublayers must be unique");ja.add(Ba);S.renderers[Ba]=da;ea.mapping[Ba]=qa;oa&&(ma.classes[Ba]=
oa.map(Aa=>F(ra,ha,Aa,"feature",va++,la)))}return sa}if("heatmap"===da.renderer.type&&"raster"===l.getSupportedHeatmapRenderer()){const {radius:va,fieldOffset:ra,field:Ba}=da.renderer;return{type:"heatmap",aggregateFields:[],attributes:ha,target:ca,storage:null,mesh:{radius:va,fieldOffset:ra,field:B(ha,{target:ca,field:Ba,resultType:"numeric"}).field}}}S=E(ha,da,la);ea=k.toJSONGeometryType(da.geometryType);const wa=null!=(ma=S.rendererOverride)?ma:da.renderer;ma=J(ha,ca,wa,la);sa=P(ha,ca,wa);ja=H(ha,
da.orderBy);let Ja=0;da=[...t(da.labelsVisible&&da.labelingInfo||[],ea).map(va=>F(wa,ha,va,"feature",Ja++,la)),...S.labels.map(va=>F(wa,ha,va,"aggregate",Ja++,la))];return{type:"symbol",target:ca,attributes:ha,aggregateFields:S.fields,storage:sa,mesh:{matcher:ma,labels:{type:"simple",classes:da},aggregateMatcher:S.matcher,sortKey:ja}}}function O(da){var ca;return"heatmap"===(null==(ca=da.renderer)?void 0:ca.type)&&"raster"===l.getSupportedHeatmapRenderer()?{type:"heatmap"}:{type:"symbol"}}function H(da,
ca){if(z.isNone(ca)||!ca.length)return null;1<ca.length&&Y.warn(`Layer rendering currently only supports ordering by 1 orderByInfo, but found ${ca.length}. All but the first will be discarded`);ca=ca[0];const la="ascending"===ca.order?"asc":"desc";if(ca.field)return{field:ca.field,order:la};if(ca.valueExpression)return{fieldIndex:C(da,{type:"expression",target:"feature",valueExpression:ca.valueExpression,resultType:"numeric"}).fieldIndex,order:la};Y.error(new n("ValidationError","Expected to find a field or valueExpression for OrderByInfo",
ca));return null}function K(da,ca){const la={mesh:!0,storage:!0};for(const ha of ca){const {name:S,outStatistic:ea}=ha,{statisticType:ma,onStatisticField:sa}=ea;let ja=ca=null,wa=null;"onStatisticValueExpression"in ea?ja=C(da,{type:"expression",target:"feature",valueExpression:ea.onStatisticValueExpression,resultType:"numeric"}).fieldIndex:"onStatisticNormalizationField"in ea?(ca=C(da,{type:"field",target:"feature",field:sa,resultType:"numeric"}).field,wa=ea.onStatisticNormalizationField):ca=C(da,
{type:"field",target:"feature",field:sa,resultType:"numeric"}).field;C(da,{type:"statistic",target:"aggregate",name:S,context:la,inField:ca,inNormalizationField:wa,inFieldIndex:ja,statisticType:ma})}}function P(da,ca,la){let ha;switch(la.type){case "simple":case "class-breaks":case "unique-value":case "dictionary":ha={visualVariables:!0,attributes:null};break;default:ha=a.getTechniqueFromRenderer(la).getStorageSpec(la)}return L(da,ca,ha,la)}function L(da,ca,la,ha){if(z.isNone(la))return null;const {visualVariables:S,
attributes:ea}=la;la=null;S&&"visualVariables"in ha&&(la=M(da,ca,ha.visualVariables));const ma=z.isSome(la)?4:0;ha=null;z.isSome(ea)&&(ha=ea.map((sa,ja)=>{const {field:wa,fieldIndex:Ja}=B(da,{valueExpression:sa.valueExpression,field:sa.field,resultType:"numeric",target:ca});return{binding:ja+ma,field:wa,fieldIndex:Ja}}));return{type:"simple",target:ca,attributeMapping:ha,vvMapping:la}}function M(da,ca,la){if(!la||!la.length)return[];const ha={storage:!0};return l.simplifyVisualVariables(la).map(S=>
{var ea;const ma=b.getVVType(S.type),{field:sa,fieldIndex:ja}=B(da,{target:ca,valueExpression:S.valueExpression,field:S.field,context:ha,resultType:"numeric"});switch(S.type){case "size":return"$view.scale"===S.valueExpression?null:{type:"size",binding:ma,field:sa,fieldIndex:ja,normalizationField:B(da,{target:ca,field:S.normalizationField,context:ha,resultType:"numeric"}).field,valueRepresentation:null!=(ea=S.valueRepresentation)?ea:null};case "color":return{type:"color",binding:ma,field:sa,fieldIndex:ja,
normalizationField:B(da,{target:ca,field:S.normalizationField,context:ha,resultType:"numeric"}).field};case "opacity":return{type:"opacity",binding:ma,field:sa,fieldIndex:ja,normalizationField:B(da,{target:ca,field:S.normalizationField,context:ha,resultType:"numeric"}).field};case "rotation":return{type:"rotation",binding:ma,field:sa,fieldIndex:ja}}}).filter(S=>S)}function J(da,ca,la,ha=!1){da=z.unwrapOr(da,{indexCount:0,fields:{}});switch(la.type){case "simple":case "dot-density":return R(da,la,
ha);case "class-breaks":return U(da,ca,la,ha);case "unique-value":return V(da,ca,la,ha);case "dictionary":return ca=q(la),la={type:"dictionary",config:la.config,fieldMap:la.fieldMap,scaleExpression:la.scaleExpression,url:la.url,symbolOptions:ca,symbologyType:ca.symbologyType};case "heatmap":return Q(da,la,ha);case "pie-chart":return X(da,la,ha)}}function R(da,ca,la=!1){da=ca.getSymbols();da=da.length?da[0]:null;ca=q(ca);return{type:"simple",symbol:d.createSymbolSchema(da,ca,la),symbologyType:ca.symbologyType}}
function X(da,ca,la=!1){var ha=ca.getSymbols();da=ha[0];ha=1<ha.length?ha[1]:null;ca=q(ca);return{type:"pie-chart",markerSymbol:d.createSymbolSchema(da,ca,la),fillSymbol:d.createSymbolSchema(ha,ca,la),symbologyType:ca.symbologyType}}function U(da,ca,la,ha=!1){const S=la.backgroundFillSymbol,{field:ea,fieldIndex:ma}=B(da,{target:ca,field:la.field,valueExpression:la.valueExpression,resultType:"numeric",context:{mesh:!0,use:"renderer.field"}});ca=la.normalizationType;ca="log"===ca?"esriNormalizeByLog":
"percent-of-total"===ca?"esriNormalizeByPercentOfTotal":"field"===ca?"esriNormalizeByField":null;const sa=q(la),ja=la.classBreakInfos.map(wa=>({symbol:d.createSymbolSchema(wa.symbol,sa,ha),min:wa.minValue,max:wa.maxValue})).sort((wa,Ja)=>wa.min-Ja.min);return{type:"interval",attributes:da.fields,field:ea,fieldIndex:ma,backgroundFillSymbol:d.createSymbolSchema(S,sa,ha),defaultSymbol:d.createSymbolSchema(la.defaultSymbol,sa,ha),intervals:ja,normalizationField:la.normalizationField,normalizationTotal:la.normalizationTotal,
normalizationType:ca,isMaxInclusive:la.isMaxInclusive,symbologyType:sa.symbologyType}}function V(da,ca,la,ha=!1){const S=[],ea=la.backgroundFillSymbol;ca={target:ca,context:{mesh:!0},resultType:"string"};if(la.field&&"string"!==typeof la.field)throw new n("ValidationError","Expected renderer.field to be a string",la);const {field:ma,fieldIndex:sa}=B(da,{...ca,field:la.field,valueExpression:la.valueExpression}),ja=q(la);for(const wa of la.uniqueValueInfos)S.push({value:""+wa.value,symbol:d.createSymbolSchema(wa.symbol,
ja,ha)});return{type:"map",attributes:da.fields,field:ma,fieldIndex:sa,field2:B(da,{...ca,field:la.field2}).field,field3:B(da,{...ca,field:la.field3}).field,fieldDelimiter:la.fieldDelimiter,backgroundFillSymbol:d.createSymbolSchema(ea,ja),defaultSymbol:d.createSymbolSchema(la.defaultSymbol,ja),map:S,symbologyType:ja.symbologyType}}function Q(da,ca,la=!1){da=ca.getSymbols();da=da.length?da[0]:null;ca=q(ca);return{type:"heatmap",symbol:d.createSymbolSchema(da,ca,la),symbologyType:ca.symbologyType}}
const Y=v.getLogger("esri.views.2d.layers.features.schemaUtils"),fa={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};u.createSymbolSchema=d.createSymbolSchema;u.addAggregateFields=K;u.createMatcherSchema=J;u.createRendererAttributeSchema=B;u.createSchema=function(da){h("esri-2d-update-debug")&&console.debug("Created new schema",
w(da,!0));return w(da)};u.createSymbolSchemaOptions=q;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["exports","../enums","../visualVariablesUtils"],function(u,n,h){u.getVVFlags=function(r){if(!r)return n.WGLVVFlag.NONE;let v=0;for(const z of r)"size"===z.type?(r=h.getTypeOfSizeVisualVariable(z),v|=r,"outline"===z.target&&(v|=r<<4)):"color"===z.type?v|=n.WGLVVFlag.COLOR:"opacity"===z.type?
v|=n.WGLVVFlag.OPACITY:"rotation"===z.type&&(v|=n.WGLVVFlag.ROTATION);return v};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define(["exports","../../../../core/Error","../../../../core/Logger","./enums","./Utils"],function(u,n,h,r,v){const z=h.getLogger("esri.views.2d.engine.webgl");u.getTypeOfSizeVisualVariable=function(p){if(v.isNumber(p.minDataValue)&&v.isNumber(p.maxDataValue)&&null!=p.minSize&&
null!=p.maxSize)return r.WGLVVFlag.SIZE_MINMAX_VALUE;if((p.expression&&"view.scale"===p.expression||p.valueExpression&&"$view.scale"===p.valueExpression)&&Array.isArray(p.stops))return r.WGLVVFlag.SIZE_SCALE_STOPS;if((null!=p.field||p.expression&&"view.scale"!==p.expression||p.valueExpression&&"$view.scale"!==p.valueExpression)&&(Array.isArray(p.stops)||"levels"in p&&p.levels))return r.WGLVVFlag.SIZE_FIELD_STOPS;if((null!=p.field||p.expression&&"view.scale"!==p.expression||p.valueExpression&&"$view.scale"!==
p.valueExpression)&&null!=p.valueUnit)return r.WGLVVFlag.SIZE_UNIT_VALUE;z.error(new n("mapview-bad-type","Found invalid size VisualVariable",p));return r.WGLVVFlag.NONE};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/createSymbolSchema":function(){define(["exports","../../engine/webgl/enums","../../engine/webgl/materialKey/MaterialKey"],function(u,n,h){function r(p){switch(p.type){case "line-marker":var g;return{type:"line-marker",
color:null==(g=p.color)?void 0:g.toJSON(),placement:p.placement,style:p.style};default:return p.constructor.fromJSON(p.toJSON()).toJSON()}}function v(p,g,e){var b=h.createMaterialKey(n.WGLGeometryType.FILL,g);b=e?h.hydrateMaterialKey(b):b;var a=p.clone();p=a.outline;const c=h.isOutlineFillSymbology(g.symbologyType);c||(a.outline=null);a={materialKey:b,hash:a.hash(),...r(a)};if(c)return a;b=[];b.push(a);p&&(g=h.createMaterialKey(n.WGLGeometryType.LINE,{...g,isOutline:!0}),e={materialKey:e?h.hydrateMaterialKey(g):
g,hash:p.hash(),...r(p)},b.push(e));return{type:"composite-symbol",layers:b,hash:b.reduce((d,f)=>f.hash+d,"")}}function z(p,g,e){var b=h.isOutlineFillSymbology(g.symbologyType)?n.WGLSymbologyType.DEFAULT:g.symbologyType;b=h.createMaterialKey(n.WGLGeometryType.LINE,{...g,symbologyType:b});const a=e?h.hydrateMaterialKey(b):b;p=p.clone();b=p.marker;p.marker=null;const c=[];c.push({materialKey:a,hash:p.hash(),...r(p)});if(b){var d;g=h.createMaterialKey(n.WGLGeometryType.MARKER,g);e=e?h.hydrateMaterialKey(g):
g;b.color=null!=(d=b.color)?d:p.color;c.push({materialKey:e,hash:b.hash(),lineWidth:p.width,...r(b)})}return{type:"composite-symbol",layers:c,hash:c.reduce((f,l)=>l.hash+f,"")}}u.createSymbolSchema=function(p,g,e){if(!p)return null;switch(p.type){case "simple-fill":case "picture-fill":return v(p,g,e);case "simple-marker":case "picture-marker":var b=h.createMaterialKey(n.WGLGeometryType.MARKER,g);e=e?h.hydrateMaterialKey(b):b;b=r(p);return p={materialKey:e,hash:p.hash(),...b,angle:p.angle,maxVVSize:g.maxVVSize};
case "simple-line":return z(p,g,e);case "text":return b=h.createMaterialKey(n.WGLGeometryType.TEXT,g),e=e?h.hydrateMaterialKey(b):b,b=r(p),p={materialKey:e,hash:p.hash(),...b,angle:p.angle,maxVVSize:g.maxVVSize};case "label":return b=p.toJSON(),g=h.createMaterialKey(n.WGLGeometryType.LABEL,{...g,placement:b.labelPlacement}),p={materialKey:e?h.hydrateMaterialKey(g):g,hash:p.hash(),...b,labelPlacement:b.labelPlacement};case "cim":return{type:"cim",rendererKey:g.vvFlags,data:p.data,maxVVSize:g.maxVVSize};
case "CIMSymbolReference":return{type:"cim",rendererKey:g.vvFlags,data:p,maxVVSize:g.maxVVSize};case "web-style":return{...r(p),type:"web-style",hash:p.hash(),rendererKey:g.vvFlags,maxVVSize:g.maxVVSize};default:throw Error(`symbol not supported ${p.type}`);}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/pixelBuffering":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/screenUtils ../../../../../symbols/cim/CIMSymbolHelper ../../../../../symbols/cim/Rect ../../../engine/webgl/definitions ../../graphics/graphicsUtils ../../support/cimSymbolUtils".split(" "),
function(u,n,h,r,v,z,p,g){function e(A){if(!("visualVariables"in A&&A.hasVisualVariables("size")))return 0;A=A.getVisualVariablesForType("size");if(!A[0])return 0;A=A[0];if("outline"===A.target)return 0;if("stops"===A.transformationType)return A.stops.map(x=>x.size).reduce(k,0);if("clamped-linear"===A.transformationType){let x=-Infinity,y=-Infinity;x="number"===typeof A.maxSize?A.maxSize:A.maxSize.stops.map(B=>B.size).reduce(k,0);y="number"===typeof A.minSize?A.minSize:A.minSize.stops.map(B=>B.size).reduce(k,
0);return Math.max(x,y)}if("real-world-size"===A.transformationType)return 30}function b(){b=n._asyncToGenerator(function*(A,x,y,B,C,D){if(!A||D&&"cluster"===D.type)return 0;if("heatmap"===A.type)return Math.round(h.pt2px(A.radius));if("dot-density"===A.type)return 0;if("dictionary"===A.type)return"esriGeometryPoint"===x||"esriGeometryMultipoint"===x?100:200;D=A.getSymbols();A=e(A);const F=[];for(const E of D)F.push(f(E,A,y,x,B,C));x=yield Promise.all(F);return h.pt2px(x.reduce(k,0))});return b.apply(this,
arguments)}function a(A,x){return null==A?x:A}function c(A,x,y,B,C,D){return d.apply(this,arguments)}function d(){d=n._asyncToGenerator(function*(A,x,y,B,C,D){if("simple-marker"===A.type)return x=Math.max(a(A.size,12),x),m(A)+.707*x;if("picture-marker"===A.type)return y=Math.max(a(A.height,12),x),x=a(A.width,12)*(y/a(A.height,12))/2,y/=2,m(A)+Math.sqrt(x*x+y*y);if("text"===A.type){if(y=A.text&&A.text.length){x=[];for(B=0;B<y;B++)x.push({...w,code:A.text.charCodeAt(B)});x={glyphMosaicItems:x}}else x=
{glyphMosaicItems:[w]};p.getTextSymbolSize(t,A.toJSON(),x);return Math.max(Math.abs(t[0]),Math.abs(t[1]))+Math.max(t[2],t[3])}return"simple-line"===A.type?(y=Math.max(a(A.width,.75),x)/2,A.marker?Math.max(6*A.width,2*x):y):"simple-fill"===A.type||"picture-fill"===A.type?Math.max(null==A.outline?0:a(A.outline.width,0),x)/2:"cim"===A.type?(yield g.expandSymbol({type:"cim",rendererKey:0,data:A.data,maxVVSize:x},{geometryType:B,fields:C,spatialReference:D},y),(A=r.CIMSymbolHelper.getEnvelope(A.data,y))?
Math.sqrt(A.width*A.width+A.height*A.height):0):"web-style"===A.type?c(yield A.fetchCIMSymbol(),x,y,B,C,D):0});return d.apply(this,arguments)}function f(A,x,y,B,C,D){return l.apply(this,arguments)}function l(){l=n._asyncToGenerator(function*(A,x,y,B,C,D){return A.type in q?Math.min(yield c(A,x,y,B,C,D),75):0});return l.apply(this,arguments)}function m(A){const x=a(A.xoffset,0);A=a(A.yoffset,0);return Math.sqrt(x*x+A*A)}function k(A,x){return Math.max(A,x)}const q={"simple-marker":1,"picture-marker":1,
text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1},t=[0,0,0,0],w={sdf:!0,code:99,metrics:z.AVERAGE_GLYPH_MOSAIC_ITEM.metrics,rect:new v(0,0,24,24),page:0,textureBinding:2};u.computePxBuffer=function(A,x,y,B,C,D){return b.apply(this,arguments)};u.getPtMaxVVSize=e;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("exports ../../../../core/BidiText ../../../../core/maybe ../../../../core/screenUtils ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/spatialReferenceUtils ../../engine/webgl/alignmentUtils ../../engine/webgl/definitions ../../engine/webgl/mesh/templates/shapingUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b){u.PIXEL_BUFFER=50;u.TILE_SIZE=512;u.getTextSymbolSize=function(a,c,d){var f,l,m;if(!d||0===d.glyphMosaicItems.length)return a;const k=n.bidiText(c.text)[1];c=b.shapeGlyphs(d.glyphMosaicItems,k,{scale:r.pt2px(c.font.size)/e.GLYPH_SIZE,angle:null!=(f=c.angle)?f:0,xOffset:null!=(l=c.xoffset)?l:0,yOffset:null!=(m=c.yoffset)?m:0,hAlign:g.getXAnchorDirection(c.horizontalAlignment||"center"),vAlign:g.getYAnchorDirection(c.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,
Math.min(c.lineWidth||512,512)),lineHeight:e.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(c.lineHeight||1,4)),decoration:c.font.decoration||"none",isCIM:!1}).bounds;a[0]=r.pt2px(c.x-c.halfWidth);a[1]=r.pt2px(c.y-c.halfHeight);a[2]=r.pt2px(c.width);a[3]=r.pt2px(c.height);return a};u.graphicGeometryToNumber=function(a){switch(h.unwrap(a.geometry).type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};u.intersectingInternationalDateline=function(a,c){c=p.getInfo(c);if(!c)return null;
const [d,f]=c.valid;return a[2]>f?[z.create([a[0],a[1],f,a[3]]),z.create([d,a[1],d+a[2]-f,a[3]])]:a[0]<d?[z.create([d,a[1],a[2],a[3]]),z.create([f-(d-a[0]),a[1],f,a[3]])]:null};u.isMarkerSymbol=function(a){return"simple-marker"===a||"picture-marker"===a||"esriSMS"===a||"esriPMS"===a};u.isTextSymbol=function(a){return"text"===a||"esriTS"===a};u.polygonFromExtent=function(a){if(!a)return null;const {xmin:c,ymin:d,xmax:f,ymax:l,spatialReference:m}=a;return new v({rings:[[[c,d],[c,l],[f,l],[f,d],[c,d]]],
spatialReference:m})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/rendererUtils":function(){define("exports ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/screenUtils ../../../../webgl/capabilities".split(" "),function(u,n,h,r,v,z){function p(a){return("size"===a.type||"color"===a.type||"opacity"===a.type)&&null!=a.stops}function g(a){var c=a.type;var d=a.stops;
if(8>=d.length)c=d;else if(b.warn(`Found ${d.length} Visual Variable stops, but MapView only supports ${8}. Displayed stops will be simplified.`),16<d.length){{const [x,...y]=d;var f=y.pop(),l=y[0].value,m=y[y.length-1].value,k=(m-l)/6;const B=[];for(;l<m;l+=k){for(var q=0;l>=y[q].value;)q++;var t=y[q],w=d[q-1],A=l-w.value;t=t.value===w.value?1:A/(t.value-w.value);"color"===c?(w=y[q],q=d[q-1],A=w.color.clone(),A.r=(1-t)*q.color.r+t*A.r,A.g=(1-t)*q.color.g+t*A.g,A.b=(1-t)*q.color.b+t*A.b,A.a=(1-t)*
q.color.a+t*A.a,B.push({value:l,color:A,label:w.label})):"size"===c?(w=y[q],A=d[q-1],q=v.toPt(w.size),A=v.toPt(A.size),B.push({value:l,size:(1-t)*A+t*q,label:w.label})):(w=y[q],B.push({value:l,opacity:(1-t)*d[q-1].opacity+t*w.opacity,label:w.label}))}c=[x,...B,f]}}else{{const [x,...y]=d;for(c=y.pop();6<y.length;){f=d=0;for(m=1;m<y.length;m++)k=Math.abs(y[m].value-y[m-1].value),k>f&&(f=k,d=m);y.splice(d,1)}c=[x,...y,c]}}a.stops=c;return a}function e(){if(h("heatmap-force-raster"))return"raster";const {supportsTextureFloat:a,
supportsTextureHalfFloat:c,supportsColorBufferFloat:d,supportsColorBufferFloatBlend:f,supportsColorBufferHalfFloat:l}=z.getWebGLCapabilities("2d");return a&&d&&f||c&&l?"symbol":h("heatmap-allow-raster-fallback")?"raster":"none"}const b=r.getLogger("esri.views.2d.layers.features.support.rendererUtils");u.getSupportedHeatmapRenderer=e;u.isRendererSupported=function(a){if(!a)return!0;switch(a.type){case "dot-density":if(!z.getWebGLCapabilities("2d").supportsTextureFloat)return b.error(new n("webgl-missing-extension",
"Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1;break;case "heatmap":if(a=e(),"none"===a||"raster"===a&&!h("heatmap-force-raster")){const c=z.getWebGLCapabilities("2d"),d=["supportsTextureFloat","supportsTextureHalfFloat","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter(f=>!c[f]).join(", ");if("none"===a)return b.errorOnce(new n("webgl-missing-extension",`Missing WebGL${c.type} requirements for Heatmap: ${d}`)),!1;
"raster"===a&&b.warnOnce(`Missing WebGL${c.type} requirements for accelerated Heatmap: ${d}. Feature support may be limited.`)}}return!0};u.simplifyVVRenderer=a=>{if(!("visualVariables"in a&&a.visualVariables&&a.visualVariables.length))return a;a=a.clone();const c=a.visualVariables.map(d=>p(d)?g(d):d);a.visualVariables=c;return a};u.simplifyVisualVariables=function(a){return a.map(c=>p(c)?g(c.clone()):c)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/layers/support/clusterUtils":function(){define("exports ../../../../core/Error ../../../../core/has ../../../../core/Logger ../../../../core/maybe ../../../../core/MD5 ../../../../renderers/visualVariables/SizeVariable ../../../../renderers/visualVariables/support/SizeStop ../../engine/LevelDependentSizeVariable".split(" "),function(u,n,h,r,v,z,p,g,e){function b(w,A,x){switch(w){case "avg":case "avg_angle":return`cluster_avg_${A}`;case "mode":return`cluster_type_${A}`;case "norm":return w=
A.toLowerCase()+",norm:field,"+x.toLowerCase(),"cluster_avg_"+z.createMD5Hash(w)}}function a(w,A){const {name:x,outStatistic:y}=A,{onStatisticField:B,onStatisticValueExpression:C,statisticType:D}=y;C?(A=z.createMD5Hash(C.toLowerCase()),w.push({name:x,outStatistic:{onStatisticField:A,onStatisticValueExpression:C,statisticType:D}})):B?w.push({name:x,outStatistic:{onStatisticField:B,statisticType:D}}):f.error(new n("mapview-unsupported-field","Unable to handle field",{field:A}))}function c(w,A,x){const y=
z.createMD5Hash(A),B="mode"===x?`cluster_type_${y}`:`cluster_avg_${y}`;w.some(C=>C.name===B)||w.push({name:B,outStatistic:{onStatisticField:y,onStatisticValueExpression:A,statisticType:x}});return B}function d(w,A,x,y){if("cluster_count"===A||w.some(C=>C.name===A))return A;const B=b(x,A,y);w.some(C=>C.name===B)||("norm"===x?w.push({name:B,outStatistic:{onStatisticField:A,onStatisticNormalizationField:y,statisticType:x}}):w.push({name:B,outStatistic:{onStatisticField:A,statisticType:x}}));return B}
const f=r.getLogger("esri.views.2d.layers.support.clusterUtils");h.add("esri-cluster-arcade-enabled",!0);const l=h("esri-cluster-arcade-enabled"),m=w=>{for(const A of w)if("size"===A.type)return A;return null},k=w=>{for(const A of w)if("cluster_count"===A.field)return!0;return!1},q=(w,A)=>{const x=[new g({value:0,size:0}),new g({value:1})];if(v.isNone(A))return new p({field:"cluster_count",stops:[...x,new g({value:2,size:0})]});const y=Object.keys(A).reduce((B,C)=>({...B,[C]:[...x,new g({value:Math.max(2,
A[C].minValue),size:w.clusterMinSize}),new g({value:Math.max(3,A[C].maxValue),size:w.clusterMaxSize})]}),{});return new e.LevelDependentSizeVariable({field:"cluster_count",levels:y})},t=w=>{const A=x=>f.error(new n("Unsupported-renderer",x,{renderer:w}));if("unique-value"===w.type){if(w.field2||w.field3)return A("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===w.type){if(w.normalizationField){const x=w.normalizationType;if("field"!==x)return A(`FeatureReductionCluster does not support a normalizationType of ${x}`),
!1}}else if("simple"!==w.type)return A(`FeatureReductionCluster does not support renderers of type ${w.type}`),!1;if(!l){if("valueExpression"in w&&w.valueExpression)return A("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in w&&w.visualVariables||[]).some(x=>!!("valueExpression"in x&&x.valueExpression)))return A("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),
!1}return!0};u.convertAggregateFieldFromPublic=a;u.createClusterCountSizeVariable=q;u.createClusterRenderer=(w,A,x,y)=>{A=A.clone();if(!t(A))return A;if(x.fields)for(var B of x.fields)a(w,B);if("visualVariables"in A){B=(A.visualVariables||[]).filter(D=>"$view.scale"!==D.valueExpression);const C=m(B);B.forEach(D=>{"rotation"===D.type?D.field?D.field=d(w,D.field,"avg_angle"):D.valueExpression&&(D.field=c(w,D.valueExpression,"avg_angle"),D.valueExpression=null):D.normalizationField?(D.field=d(w,D.field,
"norm",D.normalizationField),D.normalizationField=null):D.field?D.field=d(w,D.field,"avg"):(D.field=c(w,D.valueExpression,"avg"),D.valueExpression=null)});v.isNone(C)&&!k(B)&&(B.push(q(x,y)),A.dynamicClusterSize=!0);A.visualVariables=B}switch(A.type){case "unique-value":A.field?A.field=d(w,A.field,"mode"):A.valueExpression&&(A.field=c(w,A.valueExpression,"mode"),A.valueExpression=null);break;case "class-breaks":A.normalizationField?(A.field=d(w,A.field,"norm",A.normalizationField),A.normalizationField=
null):A.field?A.field=d(w,A.field,"avg"):(A.field=c(w,A.valueExpression,"avg"),A.valueExpression=null)}return A};u.findSizeVV=m;u.hasClusterCountVV=k;u.isClusterCompatibleRenderer=t;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MD5":function(){define(["exports"],function(u){function n(g,e){const b=(g&65535)+(e&65535);return(g>>16)+(e>>16)+(b>>16)<<16|b&65535}function h(g,e,b,a,c,d){g=n(n(e,g),n(a,d));return n(g<<c|g>>>32-c,b)}function r(g,e,
b,a,c,d,f){return h(e&b|~e&a,g,e,c,d,f)}function v(g,e,b,a,c,d,f){return h(e&a|b&~a,g,e,c,d,f)}function z(g,e,b,a,c,d,f){return h(b^(e|~a),g,e,c,d,f)}const p={Base64:0,Hex:1,String:2,Raw:3};u.createMD5Hash=function(g,e=p.Hex){e=e||p.Base64;var b=[];for(let c=0,d=8*g.length;c<d;c+=8)b[c>>5]|=(g.charCodeAt(c/8)&255)<<c%32;{g=8*g.length;b[g>>5]|=128<<g%32;b[(g+64>>>9<<4)+14]=g;g=1732584193;var a=-271733879;let c=-1732584194,d=271733878;for(let f=0;f<b.length;f+=16){const l=g,m=a,k=c,q=d;g=r(g,a,c,d,
b[f+0],7,-680876936);d=r(d,g,a,c,b[f+1],12,-389564586);c=r(c,d,g,a,b[f+2],17,606105819);a=r(a,c,d,g,b[f+3],22,-1044525330);g=r(g,a,c,d,b[f+4],7,-176418897);d=r(d,g,a,c,b[f+5],12,1200080426);c=r(c,d,g,a,b[f+6],17,-1473231341);a=r(a,c,d,g,b[f+7],22,-45705983);g=r(g,a,c,d,b[f+8],7,1770035416);d=r(d,g,a,c,b[f+9],12,-1958414417);c=r(c,d,g,a,b[f+10],17,-42063);a=r(a,c,d,g,b[f+11],22,-1990404162);g=r(g,a,c,d,b[f+12],7,1804603682);d=r(d,g,a,c,b[f+13],12,-40341101);c=r(c,d,g,a,b[f+14],17,-1502002290);a=r(a,
c,d,g,b[f+15],22,1236535329);g=v(g,a,c,d,b[f+1],5,-165796510);d=v(d,g,a,c,b[f+6],9,-1069501632);c=v(c,d,g,a,b[f+11],14,643717713);a=v(a,c,d,g,b[f+0],20,-373897302);g=v(g,a,c,d,b[f+5],5,-701558691);d=v(d,g,a,c,b[f+10],9,38016083);c=v(c,d,g,a,b[f+15],14,-660478335);a=v(a,c,d,g,b[f+4],20,-405537848);g=v(g,a,c,d,b[f+9],5,568446438);d=v(d,g,a,c,b[f+14],9,-1019803690);c=v(c,d,g,a,b[f+3],14,-187363961);a=v(a,c,d,g,b[f+8],20,1163531501);g=v(g,a,c,d,b[f+13],5,-1444681467);d=v(d,g,a,c,b[f+2],9,-51403784);c=
v(c,d,g,a,b[f+7],14,1735328473);a=v(a,c,d,g,b[f+12],20,-1926607734);g=h(a^c^d,g,a,b[f+5],4,-378558);d=h(g^a^c,d,g,b[f+8],11,-2022574463);c=h(d^g^a,c,d,b[f+11],16,1839030562);a=h(c^d^g,a,c,b[f+14],23,-35309556);g=h(a^c^d,g,a,b[f+1],4,-1530992060);d=h(g^a^c,d,g,b[f+4],11,1272893353);c=h(d^g^a,c,d,b[f+7],16,-155497632);a=h(c^d^g,a,c,b[f+10],23,-1094730640);g=h(a^c^d,g,a,b[f+13],4,681279174);d=h(g^a^c,d,g,b[f+0],11,-358537222);c=h(d^g^a,c,d,b[f+3],16,-722521979);a=h(c^d^g,a,c,b[f+6],23,76029189);g=h(a^
c^d,g,a,b[f+9],4,-640364487);d=h(g^a^c,d,g,b[f+12],11,-421815835);c=h(d^g^a,c,d,b[f+15],16,530742520);a=h(c^d^g,a,c,b[f+2],23,-995338651);g=z(g,a,c,d,b[f+0],6,-198630844);d=z(d,g,a,c,b[f+7],10,1126891415);c=z(c,d,g,a,b[f+14],15,-1416354905);a=z(a,c,d,g,b[f+5],21,-57434055);g=z(g,a,c,d,b[f+12],6,1700485571);d=z(d,g,a,c,b[f+3],10,-1894986606);c=z(c,d,g,a,b[f+10],15,-1051523);a=z(a,c,d,g,b[f+1],21,-2054922799);g=z(g,a,c,d,b[f+8],6,1873313359);d=z(d,g,a,c,b[f+15],10,-30611744);c=z(c,d,g,a,b[f+6],15,-1560198380);
a=z(a,c,d,g,b[f+13],21,1309151649);g=z(g,a,c,d,b[f+4],6,-145523070);d=z(d,g,a,c,b[f+11],10,-1120210379);c=z(c,d,g,a,b[f+2],15,718787259);a=z(a,c,d,g,b[f+9],21,-343485551);g=n(g,l);a=n(a,m);c=n(c,k);d=n(d,q)}b=[g,a,c,d]}switch(e){case p.Raw:return b;case p.Hex:e=[];for(let c=0,d=4*b.length;c<d;c++)e.push("0123456789abcdef".charAt(b[c>>2]>>c%4*8+4&15)+"0123456789abcdef".charAt(b[c>>2]>>c%4*8&15));return e=e.join("");case p.String:e=[];for(let c=0,d=32*b.length;c<d;c+=8)e.push(String.fromCharCode(b[c>>
5]>>>c%32&255));return e=e.join("");case p.Base64:e=[];for(let c=0,d=4*b.length;c<d;c+=3)for(g=(b[c>>2]>>c%4*8&255)<<16|(b[c+1>>2]>>(c+1)%4*8&255)<<8|b[c+2>>2]>>(c+2)%4*8&255,a=0;4>a;a++)8*c+6*a>32*b.length?e.push("\x3d"):e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>6*(3-a)&63));return e=e.join("")}};u.outputTypes=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/LevelDependentSizeVariable":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../renderers/visualVariables/SizeVariable ../../../renderers/visualVariables/support/sizeVariableUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b){var a;u.LevelDependentSizeVariable=a=function(c){function d(){return c.apply(this,arguments)||this}n._inheritsLoose(d,c);var f=d.prototype;f.writeLevels=function(l,m,k){for(const q in l){m.stops=this.levels[q];break}};f.clone=function(){return new a({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:b.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,
minDataValue:this.minDataValue,minSize:b.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(l=>l.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:r.clone(this.levels)})};return d}(e);h.__decorate([v.property()],u.LevelDependentSizeVariable.prototype,"levels",void 0);
h.__decorate([g.writer("levels")],u.LevelDependentSizeVariable.prototype,"writeLevels",null);u.LevelDependentSizeVariable=a=h.__decorate([p.subclass("esri.views.2d.engine.LevelDependentSizeVariable")],u.LevelDependentSizeVariable);Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/support/util":function(){define(["exports","../../../../core/jsonMap"],function(u,n){const h=new n.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",
esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});u.analyzeRings=function(r,v,z){const p=[],g=[];let e=0,b=0;for(const a of r){r=b;let c=a[0][0],d=a[0][1];p[b++]=c;p[b++]=d;let f=0;for(let l=1;l<a.length;++l){const m=c,k=d;c=a[l][0];d=a[l][1];f+=d*m-c*k;p[b++]=c;p[b++]=d}v(f/2);0<f?(0<r-e&&(z(e,r,p,g),e=r),g.length=0):0>f?0<r-e?g.push(.5*(r-e)):b=r:b=r}0<b-e&&z(e,b,p,g)};u.canUseMajorityInterpolationOnDataSource=function(r){const {bandCount:v,
attributeTable:z,colormap:p,pixelType:g}=r.rasterInfo;return 1===v&&(null!=z||null!=p||"u8"===g||"s8"===g)};u.toJSONGeometryType=function(r){return h.toJSON(r)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/diffUtils ../../../../../layers/support/FieldsIndex ../../../engine/webgl/definitions ../../../engine/webgl/DisplayId ../../../engine/webgl/Utils ../../../engine/webgl/util/debug ../tileRenderers/support/visualVariablesUtils ../../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m){function k(y,B){return C=>B(y(C))}const q=v.getLogger("esri.views.layers.2d.features.support.AttributeStore"),t=f.createDebugLogger(f.DEBUG_ATTR_UPDATES,q);var w=r("esri-shared-array-buffer"),A=r("esri-atomics");let x=function(){function y(C,D,F,E){this.size=0;this.texelSize=4;const {pixelType:G,layout:O,textureOnly:H}=E;this.textureOnly=H||!1;this.pixelType=G;this._ctype=D;this.layout=O;this._resetRange();this._shared=C;this.size=F;H||(this.data=this._initData(G,
F,C,D))}var B=y.prototype;B.unsetComponentAllTexels=function(C,D){const F=p.unwrap(this.data);for(let E=0;E<this.size*this.size;E++)F[E*this.texelSize+C]&=~D;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};B.setComponentAllTexels=function(C,D){const F=p.unwrap(this.data);for(let E=0;E<this.size*this.size;E++)F[E*this.texelSize+C]|=255&D;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};B.setComponent=function(C,D,F){const E=p.unwrap(this.data);for(const G of F)E[G*this.texelSize+C]|=D,
this.dirtyStart=Math.min(this.dirtyStart,G),this.dirtyEnd=Math.max(this.dirtyEnd,G)};B.setComponentTexel=function(C,D,F){p.unwrap(this.data)[F*this.texelSize+C]|=D;this.dirtyStart=Math.min(this.dirtyStart,F);this.dirtyEnd=Math.max(this.dirtyEnd,F)};B.unsetComponentTexel=function(C,D,F){p.unwrap(this.data)[F*this.texelSize+C]&=~D;this.dirtyStart=Math.min(this.dirtyStart,F);this.dirtyEnd=Math.max(this.dirtyEnd,F)};B.getData=function(C,D){C=c.getDisplayIdTexel(C);return p.unwrap(this.data)[C*this.texelSize+
D]};B.setData=function(C,D,F){C=c.getDisplayIdTexel(C);0===(this.layout&1<<D)?q.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[C*this.texelSize+D]=F,this.dirtyStart=Math.min(this.dirtyStart,C),this.dirtyEnd=Math.max(this.dirtyEnd,C))};B.lock=function(){this.pixelType===m.PixelType.UNSIGNED_BYTE&&this._shared&&A&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};B.unlock=function(){this.pixelType===m.PixelType.UNSIGNED_BYTE&&this._shared&&A&&
"local"!==this._ctype&&Atomics.store(this.data,0,0)};B.expand=function(C){this.size=C;if(!this.textureOnly){C=this._initData(this.pixelType,C,this._shared,this._ctype);const D=p.unwrap(this.data);C.set(D);this.data=C}};B.toMessage=function(){const C=this.dirtyStart,D=this.dirtyEnd;var F=this.texelSize;if(C>D)return null;this._resetRange();const E=!this._shared&&"local"!==this._ctype,G=this.pixelType,O=this.layout,H=p.unwrap(this.data);F=E&&H.slice(C*F,(D+1)*F)||null;return{start:C,end:D,data:F,pixelType:G,
layout:O}};B._initData=function(C,D,F,E){F=F&&"local"!==E?SharedArrayBuffer:ArrayBuffer;C=d.getPixelArrayCtor(C);D=new C(new F(D*D*4*C.BYTES_PER_ELEMENT));for(C=0;C<D.length;C+=4)D[C+1]=255;return D};B._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};n._createClass(y,[{key:"buffer",get:function(){return p.applySome(this.data,C=>C.buffer)}}]);return y}();return function(){function y(C,D,F=()=>{}){this._client=C;this.config=D;this._notifyChange=F;this._attributeComputeMap=new Map;
this._blocks=[];this._filters=Array(a.MAX_FILTERS);this._targetType=0;this._abortController=new AbortController;this._hasScaleExpr=!1;this._size=32;this._idsToHighlight=new Set;C=D.supportsTextureFloat?m.PixelType.FLOAT:m.PixelType.UNSIGNED_BYTE;t(`Creating AttributeStore ${w?"with":"without"} shared memory`);this._blockDescriptors=[{pixelType:m.PixelType.UNSIGNED_BYTE,layout:1},{pixelType:m.PixelType.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:m.PixelType.UNSIGNED_BYTE,layout:15,textureOnly:!0},
{pixelType:C,layout:15},{pixelType:C,layout:15},{pixelType:C,layout:15},{pixelType:C,layout:15}];this._blocks=this._blockDescriptors.map(()=>null)}var B=y.prototype;B.destroy=function(){this._abortController.abort()};B.isUpdating=function(){return!!this._currUpdate||!!this._nextUpdate};B.update=function(C,D){this.config=D;D=D.schema.processors[0].storage;const F=e.diff(this._schema,D);if(C.targets.feature||C.targets.aggregate)C.storage.data=!0;if(F&&(r("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",
F),C.storage.data=!0,this._schema=D,this._attributeComputeMap.clear(),!p.isNone(D))){switch(D.target){case "feature":this._targetType=c.DISPLAY_ID_TYPE_FEATURE;break;case "aggregate":this._targetType=c.DISPLAY_ID_TYPE_AGGREGATE}if("subtype"===D.type)for(const E in D.mapping){if(C=D.mapping[E],p.isSome(C)&&p.isSome(C.vvMapping))for(const G of C.vvMapping)this._bindAttribute(G)}else{if(p.isSome(D.vvMapping))for(const E of D.vvMapping)this._bindAttribute(E);if(p.isSome(D.attributeMapping))for(const E of D.attributeMapping)this._bindAttribute(E)}}};
B.onTileData=function(C,D){if(!p.isNone(D.addOrUpdate))for(C=D.addOrUpdate.getCursor();C.next();)D=C.getDisplayId(),this.setAttributeData(D,C)};B.invalidateResources=function(){this._createResourcesPromise=null;this._abortController.abort();this._abortController=new AbortController};B.setHighlight=function(){var C=n._asyncToGenerator(function*(D,F){const E=this._getBlock(0);F=F.map(G=>c.getDisplayIdTexel(G));E.lock();E.unsetComponentAllTexels(0,1);E.setComponent(0,1,F);E.unlock();this._idsToHighlight.clear();
for(const G of D)this._idsToHighlight.add(G);yield this.sendUpdates()});return function(D,F){return C.apply(this,arguments)}}();B.updateFilters=function(){var C=n._asyncToGenerator(function*(D,F,E){const {service:G,spatialReference:O}=E;({filters:F}=F);F=F.map((H,K)=>this._updateFilter(H,K,G,O));(yield Promise.all(F)).some(H=>H)&&(D.storage.filters=!0,r("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))});return function(D,F,E){return C.apply(this,arguments)}}();
B.setData=function(C,D,F,E){const G=c.getDisplayIdTexel(C);this._ensureSizeForTexel(G);this._getBlock(D).setData(C,F,E)};B.getData=function(C,D,F){return this._getBlock(D).getData(C,F)};B.getHighlightFlag=function(C){return this._idsToHighlight.has(C)?a.HIGHLIGHT_FLAG:0};B.unsetAttributeData=function(C){C=c.getDisplayIdTexel(C);this._getBlock(0).setData(C,0,0)};B.setAttributeData=function(C,D){const F=c.getDisplayIdTexel(C);this._ensureSizeForTexel(F);this._getBlock(0).setData(F,0,this.getFilterFlags(D));
if(this._targetType===c.getDisplayIdType(C)){C=this._attributeComputeMap;var E=this.config.supportsTextureFloat?1:2;C.size&&C.forEach((G,O)=>{const H=O*E%4;O=this._getBlock(Math.floor(O*E/4)+a.ATTRIBUTE_DATA_VV);G=G(D);if(this.config.supportsTextureFloat)O.setData(F,H,G);else if(G===a.NAN_MAGIC_NUMBER)O.setData(F,H,255),O.setData(F,H+1,255);else{G=z.clamp(Math.round(G),-32767,32766)+32768;const K=(G&65280)>>8;O.setData(F,H,G&255);O.setData(F,H+1,K)}})}};B.sendUpdates=function(){r("esri-2d-update-debug")&&
console.debug("AttributeStore::sendUpdate");this._notifyChange();if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=g.createResolver(),this._nextUpdate.promise;const C={blocks:this._blocks.map(D=>p.isSome(D)?D.toMessage():null)};return this._currUpdate=this._createResources().then(()=>{var D=()=>{this._currUpdate=null;if(this._nextUpdate){const F=this._nextUpdate;this._nextUpdate=null;this.sendUpdates().then(()=>F.resolve())}else r("esri-2d-update-debug")&&
console.debug("AttributeStore::sendUpdate::No additional updates queued");this._notifyChange()};r("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::client.update");D=this._client.update(C,this._signal).then(D).catch(D);this._client.render(this._signal);return D}).catch(D=>{if(g.isAbortError(D))return this._createResourcesPromise=null,this._createResources();this._notifyChange();q.error(new h("mapview-attribute-store","Encountered an error during client update",D))})};B._ensureSizeForTexel=
function(C){for(;C>=this._size*this._size&&!this._expand(););};B._bindAttribute=function(C){function D(){return C.normalizationField?G=>{const O=G.readAttribute(C.normalizationField);return O?G.readAttribute(C.field)/O:null}:G=>G.readAttribute(C.field)}function F(){C.normalizationField&&q.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported.");return G=>G.getComputedNumericAtIndex(C.fieldIndex)}let E;if(null!=C.fieldIndex)E=F();else if(C.field)E=
D();else return;C.valueRepresentation&&(E=k(E,G=>l.getVisualVariableSizeValueRepresentationRatio(G,C.valueRepresentation)));this._attributeComputeMap.set(C.binding,k(E,G=>null===G||isNaN(G)||Infinity===G?a.NAN_MAGIC_NUMBER:G))};B._createResources=function(){if(p.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(a.ATTRIBUTE_DATA_ANIMATION);this._getBlock(a.ATTRIBUTE_DATA_GPGPU);t("Initializing AttributeStore");var C={shared:w&&"local"!==this._client.type,size:this._size,
blocks:p.mapMany(this._blocks,D=>({textureOnly:D.textureOnly,buffer:D.buffer,pixelType:D.pixelType}))};this._createResourcesPromise=C=this._client.initialize(C,this._signal).catch(D=>{g.isAbortError(D)?this._createResourcesPromise=null:q.error(new h("mapview-attribute-store","Encountered an error during client initialization",D))});C.then(()=>p.isNone(this._createResourcesPromise)?this._createResources():void 0);return C};B._getBlock=function(C){var D=this._blocks[C];if(p.isSome(D))return D;t(`Initializing AttributeBlock at index ${C}`);
D=new x(w,this._client.type,this._size,this._blockDescriptors[C]);this._blocks[C]=D;this._createResourcesPromise=null;return D};B._expand=function(){if(this._size<this.config.maxTextureSize){const C=this._size<<=1;t("Expanding block size to",C,this._blocks);p.forEachSome(this._blocks,D=>D.expand(C));this._createResourcesPromise=null;this._size=C;return 0}q.error(new h("mapview-limitations","Maximum number of onscreen features exceeded."));return-1};B._updateFilter=function(){var C=n._asyncToGenerator(function*(D,
F,E,G){const O=this._filters[F],H=p.isSome(O)&&O.hash;if(!O&&!D||H===JSON.stringify(D))return!1;if(p.isNone(D)){if(!O)return!1;D=1<<F+1;E=this._getBlock(0);this._filters[F]=null;E.setComponentAllTexels(0,D);this.sendUpdates();return!0}yield(yield this._getFilter(F,E)).update(D,G);return!0});return function(D,F,E,G){return C.apply(this,arguments)}}();B._getFilter=function(){var C=n._asyncToGenerator(function*(D,F){var E=this._filters[D];if(p.isSome(E))return E;({default:E}=yield new Promise((G,O)=>
u(["./FeatureFilter"],H=>G(Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}))),O)));F=new E({geometryType:F.geometryType,hasM:!1,hasZ:!1,timeInfo:F.timeInfo,fieldsIndex:new b(F.fields)});return this._filters[D]=F});return function(D,F){return C.apply(this,arguments)}}();B.isVisible=function(C){return!!(this._getBlock(0).getData(C,0)&2)};B.getFilterFlags=function(C){let D=0;var F=c.getDisplayIdFilterMask(C.getDisplayId());for(let G=0;G<this._filters.length;G++){var E=
this._filters[G];E=!(F&1<<G)||p.isNone(E)||E.check(C);D|=(E?1:0)<<G}F=0;this._idsToHighlight.size&&(C=C.getObjectId(),F=this.getHighlightFlag(C));return D<<1|F};n._createClass(y,[{key:"hasScaleExpr",get:function(){return this._hasScaleExpr}},{key:"_signal",get:function(){return this._abortController.signal}},{key:"hasHighlight",get:function(){return 0<this._idsToHighlight.size}}]);return y}()})},"esri/views/2d/engine/webgl/util/debug":function(){define(["exports"],function(u){u.DEBUG_ATTR_UPDATES=
!1;u.createDebugLogger=(n,h)=>n&&((...r)=>h.warn("DEBUG:",...r))||(()=>null);Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("exports ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../engine/webgl/color ../../../../engine/webgl/definitions ../../../../engine/webgl/enums ../../../../engine/webgl/visualVariablesUtils".split(" "),function(u,
n,h,r,v,z,p){function g(l){return{value:l.value,size:h.toPt(l.size)}}function e(l){return l.map(m=>g(m))}function b(l){return"string"===typeof l||"number"===typeof l?h.toPt(l):{type:"size",expression:l.expression,stops:e(l.stops)}}function a(l){const m={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"===typeof l.field)if(l.stops){if(8<l.stops.length)return null;l=l.stops;for(var k=0;8>k;++k){const q=l[Math.min(k,l.length-1)];m.values[k]=q.value;m.opacities[k]=q.opacity}}else return null;
else if(l.stops&&0<=l.stops.length)for(l=l.stops&&0<=l.stops.length&&l.stops[0].opacity,k=0;8>k;k++)m.values[k]=Infinity,m.opacities[k]=l;else return null;return m}function c(l,m,k){l[4*m]=k.r/255;l[4*m+1]=k.g/255;l[4*m+2]=k.b/255;l[4*m+3]=k.a}function d(l){if(n.isNone(l)||l.normalizationField)return null;const m={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"===typeof l.field)if(l.stops){if(8<l.stops.length)return null;m.field=
l.field;l=l.stops;for(var k=0;8>k;++k){const q=l[Math.min(k,l.length-1)];m.values[k]=q.value;c(m.colors,k,q.color)}}else return null;else if(l.stops&&0<=l.stops.length)for(l=l.stops&&0<=l.stops.length&&l.stops[0].color,k=0;8>k;k++)m.values[k]=Infinity,c(m.colors,k,l);else return null;for(l=0;32>l;l+=4)r.premultiplyAlpha(m.colors,l,!0);return m}const f=l=>{const m=[],k=[];l=e(l);const q=l.length;for(let t=0;6>t;t++){const w=l[Math.min(t,q-1)];m.push(w.value);k.push(null==w.size?v.NAN_MAGIC_NUMBER:
h.pt2px(w.size))}return{values:new Float32Array(m),sizes:new Float32Array(k)}};u.convertColorVariable=d;u.convertVisualVariables=function(l){const m=l&&0<l.length?{}:null,k=m?{}:null;if(!m)return{vvFields:m,vvRanges:k};for(const q of l)if(q.field&&(m[q.type]=q.field),"size"===q.type)switch(k.size||(k.size={}),l=q,p.getTypeOfSizeVisualVariable(l)){case z.WGLVVFlag.SIZE_MINMAX_VALUE:k.size.minMaxValue={minDataValue:l.minDataValue,maxDataValue:l.maxDataValue,minSize:b(l.minSize),maxSize:b(l.maxSize)};
break;case z.WGLVVFlag.SIZE_SCALE_STOPS:k.size.scaleStops={stops:e(l.stops)};break;case z.WGLVVFlag.SIZE_FIELD_STOPS:if(l.levels){const t={};for(const w in l.levels)t[w]=f(l.levels[w]);k.size.fieldStops={type:"level-dependent",levels:t}}else k.size.fieldStops={type:"static",...f(l.stops)};break;case z.WGLVVFlag.SIZE_UNIT_VALUE:k.size.unitValue={unit:l.valueUnit,valueRepresentation:l.valueRepresentation}}else"color"===q.type?k.color=d(q):"opacity"===q.type?k.opacity=a(q):"rotation"===q.type&&(k.rotation=
{type:q.rotationType});return{vvFields:m,vvRanges:k}};u.getVisualVariableSizeValueRepresentationRatio=function(l,m){if(!l||!m)return l;switch(m){case "radius":case "distance":return 2*l;case "area":return Math.sqrt(l)}return l};u.getVisualVariablesFields=function(l){const m=l&&0<l.length?{}:null;m&&l.forEach(k=>{const q=k.type;k.field&&(m[q]=k.field)});return m};u.normalizeSizeElement=b;u.normalizeSizeStops=e;u.stopToSizeStop=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/layers/features/support/ComputedAttributeStorage":function(){define(["exports","../../../engine/webgl/DisplayId","./DisplayIdGenerator","./StaticBitSet"],function(u,n,h,r){function v(p,g,e){if(!(p.length>g))for(;p.length<=g;)p.push(e)}let z=function(){function p(){this._numerics=[];this._strings=[];this._idGenerator=new h.DisplayIdGenerator;this._allocatedSize=256;this._bitsets=[];this._instanceIds=[];this._bounds=[]}var g=p.prototype;g.createBitset=function(){const e=this._bitsets.length;
this._bitsets.push(r.StaticBitSet.create(this._allocatedSize,n.DISPLAY_ID_TEXEL_MASK));return e+1};g.getBitset=function(e){return this._bitsets[e-1]};g._expand=function(){this._allocatedSize<<=1;for(const e of this._bitsets)e.resize(this._allocatedSize)};g._ensureNumeric=function(e,b){this._numerics[e]||(this._numerics[e]=[]);v(this._numerics[e],b,0)};g._ensureInstanceId=function(e){v(this._instanceIds,e,0)};g._ensureString=function(e,b){this._strings[e]||(this._strings[e]=[]);v(this._strings[e],
b,null)};g.createDisplayId=function(e=!1){const b=this._idGenerator.createId();b>this._allocatedSize&&this._expand();return n.createDisplayId(b,e)};g.releaseDisplayId=function(e){for(const b of this._bitsets)b.unset(e);return this._idGenerator.releaseId(e&n.DISPLAY_ID_TEXEL_MASK)};g.getComputedNumeric=function(e,b){return this.getComputedNumericAtIndex(e&n.DISPLAY_ID_TEXEL_MASK,0)};g.setComputedNumeric=function(e,b,a){return this.setComputedNumericAtIndex(e&n.DISPLAY_ID_TEXEL_MASK,a,0)};g.getComputedString=
function(e,b){return this.getComputedStringAtIndex(e&n.DISPLAY_ID_TEXEL_MASK,0)};g.setComputedString=function(e,b,a){return this.setComputedStringAtIndex(e&n.DISPLAY_ID_TEXEL_MASK,0,a)};g.getComputedNumericAtIndex=function(e,b){e&=n.DISPLAY_ID_TEXEL_MASK;this._ensureNumeric(b,e);return this._numerics[b][e]};g.setComputedNumericAtIndex=function(e,b,a){e&=n.DISPLAY_ID_TEXEL_MASK;this._ensureNumeric(b,e);this._numerics[b][e]=a};g.getInstanceId=function(e){e&=n.DISPLAY_ID_TEXEL_MASK;this._ensureInstanceId(e);
return this._instanceIds[e]};g.setInstanceId=function(e,b){e&=n.DISPLAY_ID_TEXEL_MASK;this._ensureInstanceId(e);this._instanceIds[e]=b};g.getComputedStringAtIndex=function(e,b){e&=n.DISPLAY_ID_TEXEL_MASK;this._ensureString(b,e);return this._strings[b][e]};g.setComputedStringAtIndex=function(e,b,a){e&=n.DISPLAY_ID_TEXEL_MASK;this._ensureString(b,e);this._strings[b][e]=a};g.getXMin=function(e){return this._bounds[4*(e&n.DISPLAY_ID_TEXEL_MASK)]};g.getYMin=function(e){return this._bounds[4*(e&n.DISPLAY_ID_TEXEL_MASK)+
1]};g.getXMax=function(e){return this._bounds[4*(e&n.DISPLAY_ID_TEXEL_MASK)+2]};g.getYMax=function(e){return this._bounds[4*(e&n.DISPLAY_ID_TEXEL_MASK)+3]};g.setBounds=function(e,b){b=b.readHydratedGeometry();if(!b||!b.coords.length)return!1;let a=Infinity,c=Infinity,d=-Infinity,f=-Infinity;b.forEachVertex((l,m)=>{a=Math.min(a,l);c=Math.min(c,m);d=Math.max(d,l);f=Math.max(f,m)});e&=n.DISPLAY_ID_TEXEL_MASK;v(this._bounds,4*e+4,0);this._bounds[4*e]=a;this._bounds[4*e+1]=c;this._bounds[4*e+2]=d;this._bounds[4*
e+3]=f;return!0};return p}();u.ComputedAttributeStorage=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/DisplayIdGenerator":function(){define(["exports","../../../engine/webgl/DisplayId"],function(u,n){let h=function(){function r(){this._freeIds=[];this._idCounter=1}var v=r.prototype;v.createId=function(z=!1){return n.createDisplayId(this._getFreeId(),z)};v.releaseId=function(z){this._freeIds.push(z)};v._getFreeId=
function(){return this._freeIds.length?this._freeIds.pop():this._idCounter++};return r}();u.DisplayIdGenerator=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/GraphicsReader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry/support/jsonUtils ../../../../../layers/graphics/featureConversionUtils ./FeatureSetReader ./FeatureSetReaderJSON".split(" "),function(u,n,h,r,
v,z){z=function(p){function g(b,a){return p.call(this,b,a,null)||this}n._inheritsLoose(g,p);g.from=function(b,a){const c=v.FeatureSetReader.createInstance(),d=[];b=b.filter(f=>!!f.geometry);for(const f of b)b=h.getJsonType(f.geometry),r.convertFromGraphics(d,[f],b,!1,!1,a);return new g(c,d)};var e=g.prototype;e.readGraphic=function(){return this._current};e.getCursor=function(){return this.copy()};e.copy=function(){const b=new g(this.instance,this._features);this.copyInto(b);return b};n._createClass(g,
[{key:"geometryType",get:function(){const b=this._current;return b?b.geometryType:null}},{key:"insertAfter",get:function(){return this._current.insertAfter}}]);return g}(z.FeatureSetReaderJSON);u.GraphicsReader=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/FeatureSetReader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry ../../../../../core/has ../../../../../core/maybe ../../../../../layers/graphics/centroid ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedGeometry ./StaticBitSet ../../../../../geometry/support/jsonUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b){var a,c,d;let f=0;h=null!=(a=r("featurelayer-simplify-thresholds"))?a:[.5,.5,.5,.5];const l=h[0],m=h[1],k=h[2],q=h[3];a=null!=(c=r("featurelayer-simplify-payload-size-factors"))?c:[1,2,4];const t=a[0],w=a[1],A=a[2],x=null!=(d=r("featurelayer-simplify-mobile-factor"))?d:2,y=r("esri-mobile");r=function(){function B(D,F){this.type="FeatureSetReader";this.arcadeDeclaredClass="esri.arcade.Feature";this.seen=!1;this._ty=this._tx=this.instance=0;this._sy=this._sx=1;this._deleted=
null;this._joined=[];this._objectIdToIndex=null;this._level=0;this.instance=D;this._layerSchema=F}B.createInstance=function(){f++;return f=65535<f?0:f};var C=B.prototype;C.getAreaSimplificationThreshold=function(D,F){let E=1;const G=y?x:1;4E6<F?E=A*G:1E6<F?E=w*G:5E5<F?E=t*G:1E5<F&&(E=G);F=0;4E3<D?F=q*E:2E3<D?F=k*E:100<D?F=m:15<D&&(F=l);D=8;4>this._level?D=1:5>this._level?D=2:6>this._level&&(D=4);return F*D};C.setArcadeSpatialReference=function(D){this._arcadeSpatialReference=D};C.attachStorage=function(D){this._storage=
D};C.getQuantizationTransform=function(){throw Error("Unable to find transform for featureSet");};C.getStorage=function(){return this._storage};C.getComputedNumeric=function(D){return this.getComputedNumericAtIndex(0)};C.setComputedNumeric=function(D,F){return this.setComputedNumericAtIndex(F,0)};C.getComputedString=function(D){return this.getComputedStringAtIndex(0)};C.setComputedString=function(D,F){return this.setComputedStringAtIndex(0,F)};C.getComputedNumericAtIndex=function(D){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),
D)};C.setComputedNumericAtIndex=function(D,F){this._storage.setComputedNumericAtIndex(this.getDisplayId(),D,F)};C.getComputedStringAtIndex=function(D){return this._storage.getComputedStringAtIndex(this.getDisplayId(),D)};C.setComputedStringAtIndex=function(D,F){return this._storage.setComputedStringAtIndex(this.getDisplayId(),D,F)};C.transform=function(D,F,E,G){const O=this.copy();O._tx+=D;O._ty+=F;O._sx*=E;O._sy*=G;return O};C.readAttribute=function(D,F=!1){var E=this._readAttribute(D,F);if(void 0!==
E)return E;for(const G of this._joined)if(G.setIndex(this.getIndex()),E=G._readAttribute(D,F),void 0!==E)return E};C.readAttributes=function(){const D=this._readAttributes();for(const F of this._joined){F.setIndex(this.getIndex());const E=F._readAttributes();for(const G of Object.keys(E))D[G]=E[G]}return D};C.joinAttributes=function(D){this._joined.push(D)};C.readArcadeFeature=function(){return this};C.geometry=function(){var D=this.readHydratedGeometry();D=p.convertToGeometry(D,this.geometryType,
this.hasZ,this.hasM);if(D=b.fromJSON(D))D.spatialReference=this._arcadeSpatialReference;return D};C.field=function(D){if(this.hasField(D))return this.readAttribute(D,!0);for(const F of this._joined)if(F.setIndex(this.getIndex()),F.hasField(D))return F._readAttribute(D,!0);throw Error(`Field ${D} does not exist`);};C.setField=function(D,F){throw Error("Unable to update feature attribute values, feature is readonly");};C.keys=function(){return this.getFieldNames()};C.castToText=function(){return JSON.stringify(this.readLegacyFeature())};
C.gdbVersion=function(){return null};C.fullSchema=function(){return this._layerSchema};C.castAsJson=function(D=null){return{attributes:this._readAttributes(),geometry:!0===(null==D?void 0:D.keepGeometryType)?this.geometry():this.geometry().toJSON()}};C.castAsJsonAsync=function(D,F=null){return Promise.resolve(this.castAsJson(F))};C.removeIds=function(D){if(v.isNone(this._objectIdToIndex)){var F=new Map;const E=this.getCursor();for(;E.next();)F.set(E.getObjectId(),E.getIndex());this._objectIdToIndex=
F}F=this._objectIdToIndex;for(const E of D)F.has(E)&&this.removeAtIndex(F.get(E))};C.removeAtIndex=function(D){v.isNone(this._deleted)&&(this._deleted=e.StaticBitSet.create(this.getSize()));this._deleted.set(D)};C.readGeometryForDisplay=function(){return this.readUnquantizedGeometry(!0)};C.readLegacyGeometryForDisplay=function(){return this.readLegacyGeometry(!0)};C.features=function*(){const D=this.getCursor();for(;D.next();)yield D.readOptimizedFeature()};C._getExists=function(){return v.isNone(this._deleted)||
!this._deleted.has(this.getIndex())};C._computeCentroid=function(){if("esriGeometryPolygon"!==this.geometryType)return null;const D=this.readUnquantizedGeometry();if(!D||D.hasIndeterminateRingOrder)return null;const F=v.unwrapOr(this.getQuantizationTransform(),null);return z.getCentroidOptimizedGeometry(new g,D,this.hasM,this.hasZ,F)};C.copyInto=function(D){D.seen=this.seen;D._storage=this._storage;D._arcadeSpatialReference=this._arcadeSpatialReference;D._joined=this._joined;D._tx=this._tx;D._ty=
this._ty;D._sx=this._sx;D._sy=this._sy;D._deleted=this._deleted;D._objectIdToIndex=this._objectIdToIndex};n._createClass(B,[{key:"isEmpty",get:function(){return v.isSome(this._deleted)&&this._deleted.countSet()===this.getSize()}},{key:"level",set:function(D){this._level=D}}]);return B}();u.FeatureSetReader=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(u,n){function h(v,
z,p,g,e,b,a=1){b=e?b?4:3:b?3:2;let c=p,d=p+b,f=0,l=0,m=p=0,k=0;for(let q=0,t=g-1;q<t;q++,c+=b,d+=b){g=z[c];const w=z[c+1],A=z[c+2],x=z[d],y=z[d+1],B=z[d+2];let C=g*y-x*w;m+=C;f+=(g+x)*C;l+=(w+y)*C;e&&(C=g*B-x*A,p+=(A+B)*C,k+=C);g<v[0]&&(v[0]=g);g>v[1]&&(v[1]=g);w<v[2]&&(v[2]=w);w>v[3]&&(v[3]=w);e&&(A<v[4]&&(v[4]=A),A>v[5]&&(v[5]=A))}0<m*a&&(m*=-1);0<k*a&&(k*=-1);if(!m)return null;v=[f,l,.5*m];e&&(v[3]=p,v[4]=.5*k);return v}function r(v,z,p,g,e){e=g?e?4:3:e?3:2;let b=z,a=z+e,c=0,d=0,f=0,l=0;for(let t=
0,w=p-1;t<w;t++,b+=e,a+=e){var m=v[b];const A=v[b+1],x=v[b+2],y=v[a],B=v[a+1],C=v[a+2];if(g){{var k=y-m;var q=B-A;const D=C-x;k=Math.sqrt(k*k+q*q+D*D)}}else k=y-m,q=B-A,k=Math.sqrt(k*k+q*q);k&&(c+=k,g?(m=[m+.5*(y-m),A+.5*(B-A),x+.5*(C-x)],d+=k*m[0],f+=k*m[1],l+=k*m[2]):(m=[m+.5*(y-m),A+.5*(B-A)],d+=k*m[0],f+=k*m[1]))}return 0<c?g?[d/c,f/c,l/c]:[d/c,f/c]:0<p?g?[v[z],v[z+1],v[z+2]]:[v[z],v[z+1]]:null}u.getCentroidOptimizedGeometry=function(v,z,p,g,e){if(n.isNone(z)||!z.lengths.length)return null;const b=
"upperLeft"===(null==e?void 0:e.originPosition)?-1:1;v.lengths.length&&(v.lengths.length=0);v.coords.length&&(v.coords.length=0);e=v.coords;const a=[],c=p?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:d,coords:f}=z,l=p?g?4:3:g?3:2;let m=0;for(var k of d){const q=h(c,f,m,k,p,g,b);q&&a.push(q);
m+=k*l}a.sort((q,t)=>{let w=b*q[2]-b*t[2];0===w&&p&&(w=q[4]-t[4]);return w});a.length&&(k=6*a[0][2],e[0]=a[0][0]/k,e[1]=a[0][1]/k,p&&(k=6*a[0][4],e[2]=0!==k?a[0][3]/k:0),e[0]<c[0]||e[0]>c[1]||e[1]<c[2]||e[1]>c[3]||p&&(e[2]<c[4]||e[2]>c[5]))&&(e.length=0);if(!e.length)if(z=z.lengths[0]?r(f,0,d[0],p,g):null)e[0]=z[0],e[1]=z[1],p&&2<z.length&&(e[2]=z[2]);else return null;return v};u.lineCentroid=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/FeatureSetReaderJSON":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ./FeatureSetReader".split(" "),
function(u,n,h,r,v,z){function p({coords:e,lengths:b}){let a=0;for(const c of b){for(b=1;b<c;b++)e[2*(a+b)]+=e[2*(a+b)-2],e[2*(a+b)+1]+=e[2*(a+b)-1];a+=c}}let g=function(e){function b(c,d,f){c=e.call(this,c,f)||this;c._featureIndex=-1;c._dateFields=new Set;c._geometryType=null==f?void 0:f.geometryType;c._features=d;return c}n._inheritsLoose(b,e);b.fromFeatures=function(c,d){const {objectIdField:f,geometryType:l}=d,m=r.convertFromFeatures([],c,l,!1,!1,f);for(let k=0;k<m.length;k++)m[k].displayId=c[k].displayId;
return b.fromOptimizedFeatures(m,d)};b.fromFeatureSet=function(c,d){c=r.convertFromFeatureSet(c,d.objectIdField);return b.fromOptimizedFeatureSet(c,d)};b.fromOptimizedFeatureSet=function(c,d){const {features:f}=c;d=b.fromOptimizedFeatures(f,d);d._exceededTransferLimit=c.exceededTransferLimit;d._transform=c.transform;for(const l of c.fields)"esriFieldTypeDate"===l.type&&d._dateFields.add(l.name);return d};b.fromOptimizedFeatures=function(c,d,f){const l=z.FeatureSetReader.createInstance();c=new b(l,
c,d);c._transform=f;return c};var a=b.prototype;a.removeIds=function(c){const d=new Set(c);this._features=this._features.filter(f=>!d.has(f.objectId))};a.append=function(c){for(const d of c)this._features.push(d)};a.getSize=function(){return this._features.length};a.getCursor=function(){return this.copy()};a.getQuantizationTransform=function(){return this._transform};a.getAttributeHash=function(){let c="";for(const d in this._current.attributes)c+=this._current.attributes[d];return c};a.getIndex=
function(){return this._featureIndex};a.setIndex=function(c){this._featureIndex=c};a.getObjectId=function(){return this._current.objectId};a.getDisplayId=function(){return this._current.displayId};a.setDisplayId=function(c){this._current.displayId=c};a.getGroupId=function(){return this._current.groupId};a.setGroupId=function(c){this._current.groupId=c};a.copy=function(){const c=new b(this.instance,this._features,this.fullSchema());this.copyInto(c);return c};a.next=function(){for(;++this._featureIndex<
this._features.length&&!this._getExists(););return this._featureIndex<this._features.length};a.readLegacyFeature=function(){return r.convertToFeature(this._current,this.geometryType,this.hasZ,this.hasM)};a.readOptimizedFeature=function(){return this._current};a.readLegacyPointGeometry=function(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null};a.readLegacyGeometry=function(){const c=this.readGeometry();return r.convertToGeometry(c,this.geometryType,this.hasZ,this.hasM)};a.readLegacyCentroid=
function(){const c=this.readCentroid();return h.isNone(c)?null:{x:c.coords[0]*this._sx+this._tx,y:c.coords[1]*this._sy+this._ty}};a.readGeometryArea=function(){return v.hasGeometry(this._current)?r.getQuantizedArea(this._current.geometry,2):0};a.readUnquantizedGeometry=function(){var c=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!c)return c;c=c.clone();p(c);return c};a.readHydratedGeometry=function(){var c=this._current.geometry;if(h.isNone(c))return null;c=c.clone();h.isSome(this._transform)&&
r.unquantizeOptimizedGeometry(c,c,this.hasZ,this.hasM,this._transform);return c};a.getXHydrated=function(){if(!v.hasGeometry(this._current))return 0;const c=this._current.geometry.coords[0],d=this.getQuantizationTransform();return h.isNone(d)?c:c*d.scale[0]+d.translate[0]};a.getYHydrated=function(){if(!v.hasGeometry(this._current))return 0;const c=this._current.geometry.coords[1],d=this.getQuantizationTransform();return h.isNone(d)?c:d.translate[1]-c*d.scale[1]};a.getX=function(){return v.hasGeometry(this._current)?
this._current.geometry.coords[0]*this._sx+this._tx:0};a.getY=function(){return v.hasGeometry(this._current)?this._current.geometry.coords[1]*this._sy+this._ty:0};a.readGeometry=function(){if(!v.hasGeometry(this._current))return null;const c=this._current.geometry.clone();if(c.isPoint)return c.coords[0]=c.coords[0]*this._sx+this._tx,c.coords[1]=c.coords[1]*this._sy+this._ty,c;let d=0;for(const f of c.lengths)c.coords[2*d]=c.coords[2*d]*this._sx+this._tx,c.coords[2*d+1]=c.coords[2*d+1]*this._sy+this._ty,
d+=f;return c};a.readCentroid=function(){if(!v.hasGeometry(this._current))return null;if(h.isNone(this._current.centroid)){var c=this._computeCentroid();if(h.isNone(c))return null;c.coords[0]=(c.coords[0]-this._tx)/this._sx;c.coords[1]=(c.coords[1]-this._ty)/this._sy;this._current.centroid=c}c=this._current.centroid.clone();c.coords[0]=c.coords[0]*this._sx+this._tx;c.coords[1]=c.coords[1]*this._sx+this._ty;return c};a.hasField=function(c){return c in this._current.attributes?!0:this.getFieldNames().map(d=>
d.toLowerCase()).includes(c.toLowerCase())};a.getFieldNames=function(){return Object.keys(this._current.attributes)};a._readAttribute=function(c,d){var f=this._current.attributes[c];if(void 0!==f)return null!=f&&d&&this._dateFields.has(c)?new Date(f):f;f=this.readAttributes();c=c.toLocaleLowerCase().trim();for(const l in f)if(l.toLocaleLowerCase().trim()===c)return c=this._current.attributes[l],null!=c&&d&&this._dateFields.has(l)?new Date(c):c};a.copyInto=function(c){e.prototype.copyInto.call(this,
c);c._featureIndex=this._featureIndex;c._transform=this._transform;c._dateFields=this._dateFields};a._readAttributes=function(){return this._current.attributes};n._createClass(b,[{key:"_current",get:function(){return this._features[this._featureIndex]}},{key:"geometryType",get:function(){return this._geometryType}},{key:"hasFeatures",get:function(){return!!this._features.length}},{key:"hasNext",get:function(){return this._featureIndex+1<this._features.length}},{key:"exceededTransferLimit",get:function(){return this._exceededTransferLimit}},
{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}}]);return b}(z.FeatureSetReader);u.FeatureSetReaderJSON=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/graphics/GraphicStore":function(){define("../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/rbush ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/boundsUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/spatialReferenceUtils ../../../../symbols/cim/CIMSymbolDrawHelper ../../../../symbols/cim/CIMSymbolHelper ./GraphicStoreItem ./graphicsUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){function c(k,q,t,w,A){f.minX=q;f.minY=t;f.maxX=w;f.maxY=A;return k.search(f)}function d(k){return{minX:k.bounds[0],minY:k.bounds[1],maxX:k.bounds[2],maxY:k.bounds[3]}}const f={minX:0,minY:0,maxX:0,maxY:0},l=r.create(),m=(k,q)=>{const t=a.graphicGeometryToNumber(k.graphic),w=a.graphicGeometryToNumber(q.graphic);return t===w?q.zorder-k.zorder:t-w};return function(){function k(t,w,A,x,y,B,C){this._graphics=x;this._onAdd=y;this._onRemove=B;this._hashToCIM=C;this._index=
h.rbush(9,d);this._itemByGraphic=new Map;this._inflatedSizeHelper=new e.CIMSimbolInflatedSizeHelper;this._tileInfoView=t;this._uidFieldName=A;if(t=t.getClosestInfoForScale(w))this._resolution=this._tileInfoView.getTileResolution(t.level)}var q=k.prototype;q.setResourceManager=function(t){this._cimResourceManager=t;this._hittestDrawHelper=new g.HittestDrawHelper(t)};q.hitTest=function(t,w,A,x,y){t=z.normalizeMapX(t,this._tileInfoView.spatialReference);var B=.5*x*window.devicePixelRatio*A;l[0]=t-B;
l[1]=w-B;l[2]=t+B;l[3]=w+B;A=.5*x*(A+a.PIXEL_BUFFER);w=c(this._index,t-A,w-A,t+A,w+A);if(!w||0===w.length)return[];t=[];A=r.create();B=r.create();for(var C of w){const {geometry:D,symbolResource:F}=C;this._getSymbolBounds(A,F,D,B,y);B[3]=B[2]=B[1]=B[0]=0;r.intersects(A,l)&&C.graphic.visible&&t.push(C)}if(0===t.length)return[];C=this._hittestDrawHelper;w=[];for(const D of t){const {geometry:F,symbolResource:E}=D,{hash:G,textInfo:O}=E;(t=this._hashToCIM.get(G))&&C.hitTest(l,t.symbol,F,O,y,x)&&w.push(D)}w.sort(m);
return w.map(D=>D.graphic)};q.getGraphicsData=function(t,w,A){const x=this._searchForItems(w);if(0===x.length||0===A.length)return[];x.sort((G,O)=>G.zorder-O.zorder);x[0].insertAfter=-1;for(var y=1;y<x.length;y++)x[y].insertAfter=x[y-1].graphic.uid;x.sort((G,O)=>G.graphic.uid-O.graphic.uid);A.sort((G,O)=>G.uid-O.uid);let B=y=0,C;const D=w.resolution,F=[],E={originPosition:"upperLeft",scale:[D,D],translate:[w.bounds[0],w.bounds[3]]};for(const G of A){for(B=-2;y<x.length;)if(C=x[y],y++,G.uid===C.graphic.uid){B=
C.insertAfter;break}if(!C.geometry||-2===B)continue;A=C.getGeometryQuantized(E,w.bounds,this._tileInfoView.spatialReference,D);const O={...C.graphic.attributes};O[this._uidFieldName]=G.uid;null==C.groupId&&(C.groupId=t.createTemplateGroup(C.symbol,null));F.push({centroid:b.getCentroidQuantized(C,E),geometry:A,attributes:O,symbol:C.symbol,groupId:C.groupId,insertAfter:B,zorder:C.zorder})}F.sort((G,O)=>G.zorder-O.zorder);return F};q.queryTileData=function(t,w){if(0===this._graphics.length)return[];
const {bounds:A,resolution:x}=w,y=this._searchForItems(w),B=[];if(0===y.length)return B;this._createTileGraphics(B,t,y,{originPosition:"upperLeft",scale:[x,x],translate:[A[0],A[3]]},w);return B};q.has=function(t){return this._itemByGraphic.has(t)};q.getBounds=function(t){return(t=this._itemByGraphic.get(t))?t.bounds:null};q.getAllBounds=function(){return Array.from(this._itemByGraphic.values()).filter(t=>t.graphic.visible).map(t=>t.bounds)};q.addOrModify=function(t,w,A){if(t&&!u.isNone(w)){this.has(t)&&
this.remove(t);this._onAdd(t);var x=[0,0,0,0],y=this._getSymbolBounds(null,w,A,x,0);w=b.acquire(t,w,A,u.isSome(y)?y:null,x);this._itemByGraphic.set(t,w);A&&this._index.insert(w);return w.bounds}};q.remove=function(t){if(this._itemByGraphic.has(t)){this._onRemove(t);var w=this._itemByGraphic.get(t);w.bounds&&this._index.remove(w);this._itemByGraphic.delete(t)}};q.updateZ=function(){const t=this._graphics.items;for(let A=0;A<t.length;A++){var w=t[A];if(w=this._itemByGraphic.get(w))w.zorder=A}};q.update=
function(t,w,A){const x=this._itemByGraphic.get(t);x.groupId=null;const y=r.clone(x.bounds);this._index.remove(x);const B=this._getSymbolBounds(x.bounds,w,A,x.size,0);u.isSome(B)&&x.set(t,w,A,B,x.size);A&&this._index.insert(x);return{oldBounds:y,newBounds:x.bounds}};q.updateLevel=function(t){if(this._resolution!==t){this._resolution=t;this._index.clear();var w=this._itemByGraphic;t=[];for(const [,A]of w)w=this._getSymbolBounds(A.bounds,A.symbolResource,A.geometry,A.size,0),A.geometry&&u.isSome(w)&&
(A.bounds=w,t.push(A));this._index.load(t)}};q.clear=function(){this._itemByGraphic.clear();this._index.clear()};q._createTileGraphics=function(t,w,A,x,y){const B=this._uidFieldName,C=this._tileInfoView.spatialReference,{bounds:D,resolution:F}=y;A.sort((H,K)=>H.zorder-K.zorder);let E,G,O;for(let H=0;H<A.length;H++){G=A[H];y=G.graphic;E=G.getGeometryQuantized(x,D,C,F);O=0===H?-1:A[H-1].graphic.uid;const K={...G.graphic.attributes};K[B]=y.uid;null==G.groupId&&(G.groupId=w.createTemplateGroup(G.symbol,
null));t.push({centroid:b.getCentroidQuantized(G,x),geometry:E,attributes:K,symbol:G.symbol,groupId:G.groupId,insertAfter:O,zorder:G.zorder})}};q._searchForItems=function(t){var w=this._tileInfoView.spatialReference,A=t.bounds;if(w.isWrappable){const [x,y]=p.getInfo(w).valid;w=1E-5>Math.abs(A[2]-y);const B=1E-5>Math.abs(A[0]-x);if(!(w&&B||!w&&!B))return t=t.resolution,t=w?r.create([x,A[1],x+t*a.PIXEL_BUFFER,A[3]]):r.create([y-t*a.PIXEL_BUFFER,A[1],y,A[3]]),A=c(this._index,A[0],A[1],A[2],A[3]),t=c(this._index,
t[0],t[1],t[2],t[3]),[...new Set([...A,...t])]}return c(this._index,A[0],A[1],A[2],A[3])};q._getSymbolBounds=function(t,w,A,x,y){if(!w||!w.symbol||!A)return null;t||(t=r.create());v.getBoundsXY(t,A);if(!x||0===x[0]&&0===x[1]&&0===x[2]&&0===x[3]){const {hash:B,textInfo:C}=w;w=this._hashToCIM.get(B);if(!w)return null;x||(x=[0,0,0,0]);y=this._inflatedSizeHelper.getSymbolInflateSize(x,w.symbol,this._cimResourceManager,y,C);x[0]=n.pt2px(y[0]);x[1]=n.pt2px(y[1]);x[2]=n.pt2px(y[2]);x[3]=n.pt2px(y[3])}y=
this._resolution;x=e.CIMSimbolInflatedSizeHelper.safeSize(x);t[0]-=x*y;t[1]-=x*y;t[2]+=x*y;t[3]+=x*y;return t};return k}()})},"esri/views/2d/layers/graphics/GraphicStoreItem":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/jsonUtils ../../../../geometry/support/quantizationUtils ../../../../geometry/support/spatialReferenceUtils ../../../../layers/graphics/featureConversionUtils ../../../../layers/graphics/OptimizedGeometry".split(" "),
function(u,n,h,r,v,z,p,g,e){function b(d){d.coords.length=0;d.lengths.length=0}const a=new e,c=new e;e=function(){function d(){this.bounds=h.create();this.graphic=null}d.acquire=function(l=null,m,k,q,t){let w;0===d._pool.length?w=new d:(w=d._pool.pop(),this._set.delete(w));w.acquire(l,m,k,q,t);return w};d.release=function(l){l&&!this._set.has(l)&&(l.release(),this._pool.push(l),this._set.add(l))};d.getCentroidQuantized=function(l,m){if(v.isPolygon(l.geometry)){const k=l.symbol;if(n.isNone(k))return null;
if(0<(null==k?void 0:k.layers.length)&&k.layers.some(q=>"text"===q.type||"marker"===q.type))return l=r.polygonCentroid(l.geometry),null!==l?z.quantizePoint(m,{},{x:l[0],y:l[1]},!1,!1):null}return null};var f=d.prototype;f.acquire=function(l=null,m,k,q,t){l&&this.set(l,m,k,q,t)};f.release=function(){this.geometry=this.symbolResource=this.graphic=null};f.set=function(l,m,k,q,t){this.graphic=l;this.geometry=k;this.symbolResource=m;this.bounds=q;t&&(this.size=t)};f.getGeometryQuantized=function(l,m,k,
q){var t=this.geometry;if(v.isPolygon(t)){if(t=t.rings,1===t.length&&2===t[0].length)return z.quantizeGeometry(l,{paths:[[t[0][0],t[0][1]]]})}else{if(v.isPolyline(t))return b(a),b(c),g.convertFromPolyline(a,t),g.generalizeOptimizedGeometry(c,a,t.hasZ,t.hasM,"esriGeometryPolyline",l.scale[0]),g.quantizeOptimizedGeometry(a,c,t.hasZ,t.hasM,"esriGeometryPolyline",l),g.convertToPolyline(a,t.hasZ,t.hasM);if(v.isMultipoint(t)){const w=.5*q*Math.max(Math.abs(this.size[0])+this.size[2]-this.size[0],Math.abs(this.size[1])+
this.size[3]-this.size[1]);k=p.getInfo(k);t=t.points;if(k){const [A,x]=k.valid,y=x-A;t=t.filter(B=>{if(B[0]+w>x||B[0]-w<A){const C=[...B];C[0]=B[0]+w>x?C[0]-y:C[0]+y;return h.containsPointWithMargin(m,B,w)||h.containsPointWithMargin(m,C,w)}return h.containsPointWithMargin(m,B,w)})}return 0===t.length?{points:t}:z.quantizeGeometry(l,{points:t})}}return z.quantizeGeometry(l,this.geometry)};u._createClass(d,[{key:"symbol",get:function(){return this.symbolResource.symbol}}]);return d}();e._pool=[];e._set=
new Set;return e})},"esri/views/layers/GraphicsView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g,e){u.GraphicsView=b=>{b=function(a){function c(){var d=a.apply(this,arguments)||this;d.graphics=null;d.renderer=null;return d}n._inheritsLoose(c,
a);return c}(r.IdentifiableMixin(b));h.__decorate([v.property()],b.prototype,"graphics",void 0);h.__decorate([v.property()],b.prototype,"renderer",void 0);h.__decorate([v.property()],b.prototype,"updating",void 0);h.__decorate([v.property()],b.prototype,"view",void 0);return b=h.__decorate([e.subclass("esri.views.layers.GraphicsView")],b)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/graphics/GraphicContainer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers",
"../../engine/webgl/enums","./BaseGraphicContainer"],function(u,n,h){return function(r){function v(){return r.apply(this,arguments)||this}u._inheritsLoose(v,r);var z=v.prototype;z.renderChildren=function(p){this.attributeView.bindTextures(p.context,!1);this.children.some(g=>g.hasData)&&(r.prototype.renderChildren.call(this,p),p.drawPhase===n.WGLDrawPhase.MAP&&this._renderChildren(p),this.hasHighlight()&&p.drawPhase===n.WGLDrawPhase.HIGHLIGHT&&this._renderHighlight(p),this._boundsRenderer&&this._boundsRenderer.doRender(p))};
z._renderHighlight=function(p){var {painter:g}=p;g=g.effects.highlight;g.bind(p);this._renderChildren(p,g.defines);g.draw(p);g.unbind()};return v}(h)})},"esri/views/2d/layers/graphics/BaseGraphicContainer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../engine/FeatureContainer","./GraphicBoundsRenderer","../../../webgl/enums"],function(u,n,h,r){return function(v){function z(g){g=v.call(this,g)||this;g.hasHighlight=()=>!0;return g}u._inheritsLoose(z,v);var p=z.prototype;p.destroy=
function(){v.prototype.destroy.call(this);this._boundsRenderer&&(this._boundsRenderer.destroy(),this._boundsRenderer=null)};p.enableRenderingBounds=function(g){this._boundsRenderer=new h(g);this.requestRender()};p.onTileData=function(g,e){g.patch(e);this.contains(g)||this.addChild(g);this.requestRender()};p.onTileError=function(g){g.clear();this.contains(g)||this.addChild(g)};p._renderChildren=function(g,e){for(const b of this.children)b.isReady&&b.hasData&&(b.commit(g),g.context.setStencilFunction(r.CompareFunction.EQUAL,
b.stencilRef,255),b._displayList.replay(g,b,e))};u._createClass(z,[{key:"hasLabels",get:function(){return!1}}]);return z}(n.FeatureContainer)})},"esri/views/2d/engine/FeatureContainer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/promiseUtils ../../../core/Queue ./webgl/AttributeStoreView ./webgl/TileContainer ./webgl/WGLRendererInfo".split(" "),function(u,n,h,r,v,z,p){z=function(g){function e(a){var c=g.call(this,a)||this;c._rendererInfo=new p.WGLRendererInfo;
c._materialItemsRequestQueue=new r;c.attributeView=new v.AttributeStoreView(()=>c.onAttributeStoreUpdate());return c}n._inheritsLoose(e,g);var b=e.prototype;b.destroy=function(){this.removeAllChildren();this.children.forEach(a=>a.destroy());this.attributeView.destroy();this._materialItemsRequestQueue.clear()};b.setRendererInfo=function(a,c,d){this._rendererInfo.setInfo(a,c,d);this.requestRender()};b.getMaterialItems=function(){var a=n._asyncToGenerator(function*(c,d){if(!c||0===c.length)return null;
const f=h.createResolver();this._materialItemsRequestQueue.push({items:c,abortOptions:d,resolver:f});this.requestRender();return f.promise});return function(c,d){return a.apply(this,arguments)}}();b.doRender=function(a){a.context.capabilities.enable("textureFloat");a.context.capabilities.enable("vao");if(0<this._materialItemsRequestQueue.length){let c=this._materialItemsRequestQueue.pop();for(;c;)this._processMaterialItemRequest(a,c),c=this._materialItemsRequestQueue.pop()}g.prototype.doRender.call(this,
a)};b.renderChildren=function(a){for(const c of this.children)c.commit(a);this._rendererInfo.update(a.state);g.prototype.renderChildren.call(this,a)};b.createRenderParams=function(a){a=g.prototype.createRenderParams.call(this,a);a.rendererInfo=this._rendererInfo;a.attributeView=this.attributeView;return a};b.onAttributeStoreUpdate=function(){};b._processMaterialItemRequest=function(a,{items:c,abortOptions:d,resolver:f}){const {painter:l,pixelRatio:m}=a;a=c.map(k=>l.textureManager.rasterizeItem(k.symbol,
m,k.glyphIds,d));Promise.all(a).then(k=>{this.stage?(k=k.map((q,t)=>({id:c[t].id,mosaicItem:q})),f.resolve(k)):f.reject()},f.reject)};return e}(z);u.FeatureContainer=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/AttributeStoreView":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/has ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ./definitions ./DisplayId ./Utils ./util/debug ../../../webgl/enums ../../../webgl/FramebufferObject ../../../webgl/Texture".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f){const l=v.getLogger("esri.views.2d.engine.webgl.AttributeStoreView"),m=a.createDebugLogger(a.DEBUG_ATTR_UPDATES,l);let k=function(){function q(w,A,x){this._lastTexture=this._texture=null;this._fbos={};this.texelSize=4;const {buffer:y,pixelType:B,textureOnly:C}=w;w=b.getPixelArrayCtor(B);this.shared=x;this.pixelType=B;this.size=A;this.textureOnly=C;C||(this.data=new w(z.unwrap(y)));this._resetRange()}var t=q.prototype;t.destroy=function(){z.applySome(this._texture,
w=>w.dispose());for(const w in this._fbos)z.applySome(this._fbos[w],A=>{"0"===w&&A.detachColorTexture();A.dispose()}),this._fbos[w]=null;this._texture=null};t.setData=function(w,A,x){w=e.getDisplayIdTexel(w);const y=z.unwrap(this.data);A=w*this.texelSize+A;!y||A>=y.length||(y[A]=x,this.dirtyStart=Math.min(this.dirtyStart,w),this.dirtyEnd=Math.max(this.dirtyEnd,w))};t.getData=function(w,A){if(z.isNone(this.data))return null;w=e.getDisplayIdTexel(w)*this.texelSize+A;return!this.data||w>=this.data.length?
null:this.data[w]};t.getTexture=function(w){return z.unwrapOr(this._texture,()=>this._initTexture(w))};t.getFBO=function(w,A=0){if(z.isNone(this._fbos[A])){const x={colorTarget:c.TargetType.TEXTURE,depthStencilTarget:c.DepthStencilTargetType.NONE},y=0===A?this.getTexture(w):this._textureDesc;this._fbos[A]=new d.FramebufferObject(w,x,y)}return this._fbos[A]};t.updateTexture=function(w,A){if(!this.locked){try{const x=this.dirtyStart,y=this.dirtyEnd;if(!this.hasDirty)return;this._resetRange();const B=
z.unwrap(this.data).buffer,C=this.getTexture(w),D=(x-x%this.size)/this.size,F=(y-y%this.size)/this.size,E=D*this.size*4,G=4*(this.size+F*this.size)-E,O=b.getPixelArrayCtor(this.pixelType),H=new O(B,E*O.BYTES_PER_ELEMENT,G),K=this.size;w=F-D+1;if(w>this.size){l.error(new h("mapview-webgl","Out-of-bounds index when updating AttributeData"));return}C.updateData(0,0,D,K,w,H)}catch(x){}A()}};t.update=function(w){const {data:A,start:x,end:y}=w;if(z.isSome(A)){const B=this.data,C=x*this.texelSize;for(let D=
0;D<A.length;D++)w.layout&1<<D%this.texelSize&&(B[C+D]=A[D])}this.dirtyStart=Math.min(this.dirtyStart,x);this.dirtyEnd=Math.max(this.dirtyEnd,y)};t.resize=function(w,A){const x=this.size;this.size=A;this.textureOnly?x!==this.size&&(this._lastTexture=this._texture,this._texture=null):(A=b.getPixelArrayCtor(this.pixelType),this.destroy(),this.data=new A(z.unwrap(w.buffer)))};t._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};t._initTexture=function(w){const A=new f.Texture(w,this._textureDesc,
z.unwrapOr(this.data,void 0));if(z.isSome(this._lastTexture)&&this._fbos[0]){const B=this._lastTexture.descriptor.width,C=this._lastTexture.descriptor.height,D=this._lastTexture.descriptor.dataType,F=this._lastTexture.descriptor.pixelFormat,E=this.getFBO(w);var x=b.getPixelBytes(D),y=b.getPixelArrayCtor(D);x=new ArrayBuffer(B*C*x*this.texelSize);y=new y(x);x=w.getBoundFramebufferObject();const {x:G,y:O,width:H,height:K}=w.getViewport();w.bindFramebuffer(E);E.readPixels(0,0,B,C,F,D,y);A.updateData(0,
0,0,2*B,C/2,y);w.setViewport(G,O,H,K);w.bindFramebuffer(x)}this.destroy();return this._texture=A};n._createClass(q,[{key:"_textureDesc",get:function(){return{target:c.TextureType.TEXTURE_2D,wrapMode:c.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:c.PixelFormat.RGBA,dataType:this.pixelType,samplingMode:c.TextureSamplingMode.NEAREST,width:this.size,height:this.size}}},{key:"locked",get:function(){return this.pixelType===c.PixelType.UNSIGNED_BYTE&&this.shared&&!this.textureOnly&&r("esri-atomics")&&this.data?
1===Atomics.load(this.data,0):!1}},{key:"hasDirty",get:function(){return this.dirtyEnd>=this.dirtyStart}}]);return q}();v=function(){function q(w){this._onUpdate=w;this._locked=this._forceNextUpload=this._initialized=!1}var t=q.prototype;t.initialize=function(w){const {blocks:A,shared:x,size:y}=w;this.shared=x;this.size=y;m("Initializing AttributeStoreView",w);if(z.isNone(this._data))this._data=z.mapMany(A,B=>new k(B,y,x));else for(w=0;w<this._data.length;w++){const B=this._data[w],C=A[w];z.isSome(C)&&
(z.isNone(B)?this._data[w]=new k(C,y,x):B.resize(C,y))}this._initialized=!0};t.destroy=function(){z.applySome(this._data,w=>z.mapMany(w,A=>A.destroy()));z.applySome(this._defaultTexture,w=>w.dispose())};t.isEmpty=function(){return z.isNone(this._data)};t.isUpdating=function(){const w=z.isSome(this._pendingAttributeUpdate);r("esri-2d-log-updating")&&console.log(`Updating AttributeStoreView ${w}\n  -> hasPendingUpdate ${w}`);return w};t.getBlock=function(w){return z.isNone(this._data)?null:this._data[w]};
t.setLabelMinZoom=function(w,A){this.setData(w,0,1,A)};t.getLabelMinZoom=function(w){return this.getData(w,0,1,255)};t.getFilterFlags=function(w){return this.getData(w,0,0,0)};t.getVVSize=function(w){return this.getData(w,g.ATTRIBUTE_DATA_VV,0,0)};t.getData=function(w,A,x,y){if(!this._data)return 0;A=z.unwrap(this._data)[A];if(z.isNone(A))return 0;w=A.getData(w,x);return z.isSome(w)?w:y};t.setData=function(w,A,x,y){A=z.unwrap(this._data)[A];z.unwrap(A).setData(w,x,y)};t.lockTextureUpload=function(){this._locked=
!0};t.unlockTextureUpload=function(){this._locked=!1};t.forceTextureUpload=function(){this._forceNextUpload=!0};t.requestUpdate=function(){var w=n._asyncToGenerator(function*(A){if(this._pendingAttributeUpdate)l.error(new h("mapview-webgl","Tried to update attribute data with a pending update"));else{var x=p.createResolver();m("AttributeStoreView Update Requested",A);this._pendingAttributeUpdate={data:A,resolver:x};return x.promise}});return function(A){return w.apply(this,arguments)}}();t.update=
function(){if(this._initialized&&z.isSome(this._pendingAttributeUpdate)){r("esri-2d-update-debug")&&console.debug("AttributeStoreView::update");const {data:w,resolver:A}=this._pendingAttributeUpdate,x=z.unwrap(this._data);for(let y=0;y<w.blocks.length;y++){const B=w.blocks[y];z.applySome(x[y],C=>z.applySome(B,D=>{m(`Updating block ${y}`,D);C.update(D)}))}this._pendingAttributeUpdate=null;A();this._onUpdate()}};t.bindTextures=function(w,A=!0){this.update();const x=this._getDefaultTexture(w);if(this._initialized){var y=
z.unwrap(this._data);if(!this._locked||this._forceNextUpload)z.forEachSome(y,B=>B.updateTexture(w,()=>this._onUpdate())),this._forceNextUpload=!1;w.bindTexture(z.mapOr(y[g.ATTRIBUTE_DATA_FILTER_FLAGS],x,B=>B.getTexture(w)),g.TEXTURE_BINDING_ATTRIBUTE_DATA_0);A&&(w.bindTexture(z.mapOr(y[g.ATTRIBUTE_DATA_GPGPU],x,B=>B.getTexture(w)),g.TEXTURE_BINDING_GPGPU),w.bindTexture(z.mapOr(y[g.ATTRIBUTE_DATA_ANIMATION],x,B=>B.getTexture(w)),g.TEXTURE_BINDING_ATTRIBUTE_DATA_1),w.bindTexture(z.mapOr(y[g.ATTRIBUTE_DATA_VV],
x,B=>B.getTexture(w)),g.TEXTURE_BINDING_ATTRIBUTE_DATA_2),w.bindTexture(z.mapOr(y[g.ATTRIBUTE_DATA_DD1],x,B=>B.getTexture(w)),g.TEXTURE_BINDING_ATTRIBUTE_DATA_3),w.bindTexture(z.mapOr(y[g.TEXTURE_BINDING_ATTRIBUTE_DATA_4],x,B=>B.getTexture(w)),g.TEXTURE_BINDING_ATTRIBUTE_DATA_4),w.bindTexture(z.mapOr(y[g.TEXTURE_BINDING_ATTRIBUTE_DATA_5],x,B=>B.getTexture(w)),g.TEXTURE_BINDING_ATTRIBUTE_DATA_5))}else w.bindTexture(x,g.TEXTURE_BINDING_ATTRIBUTE_DATA_0),A&&(w.bindTexture(x,g.TEXTURE_BINDING_ATTRIBUTE_DATA_1),
w.bindTexture(x,g.TEXTURE_BINDING_ATTRIBUTE_DATA_2),w.bindTexture(x,g.TEXTURE_BINDING_ATTRIBUTE_DATA_3),w.bindTexture(x,g.TEXTURE_BINDING_ATTRIBUTE_DATA_4),w.bindTexture(x,g.TEXTURE_BINDING_ATTRIBUTE_DATA_5),w.bindTexture(x,g.TEXTURE_BINDING_GPGPU))};t._getDefaultTexture=function(w){z.isNone(this._defaultTexture)&&(this._defaultTexture=new f.Texture(w,{wrapMode:c.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:c.PixelFormat.RGBA,dataType:c.PixelType.UNSIGNED_BYTE,samplingMode:c.TextureSamplingMode.NEAREST,
width:1,height:1},new Uint8Array(4)));return this._defaultTexture};return q}();u.AttributeStoreView=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/TileContainer":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ./enums ./WGLContainer ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil".split(" "),function(u,n,h,r,v,z){const p=(g,e)=>0!==g.key.level-e.key.level?g.key.level-e.key.level:0!==g.key.row-
e.key.row?g.key.row-e.key.row:g.key.col-e.key.col;return function(g){function e(a){var c=g.call(this)||this;c._tileInfoView=a;return c}u._inheritsLoose(e,g);var b=e.prototype;b.renderChildren=function(a){this.sortChildren(p);this.setStencilReference(a);g.prototype.renderChildren.call(this,a)};b.createRenderParams=function(a){const {state:c}=a;a=g.prototype.createRenderParams.call(this,a);a.requiredLevel=this._tileInfoView.getClosestInfoForScale(c.scale).level;a.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(c.scale);
return a};b.prepareRenderPasses=function(a){const c=g.prototype.prepareRenderPasses.call(this,a);c.push(a.registerRenderPass({name:"stencil",brushes:[z],drawPhase:h.WGLDrawPhase.DEBUG|h.WGLDrawPhase.MAP|h.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()}));n("esri-tiles-debug")&&c.push(a.registerRenderPass({name:"tileInfo",brushes:[v],drawPhase:h.WGLDrawPhase.DEBUG,target:()=>this.children}));return c};b.getStencilTarget=function(){return this.children};b.updateTransforms=function(a){for(const c of this.children){const d=
this._tileInfoView.getTileResolution(c.key);c.setTransform(a,d)}};b.setStencilReference=function(a){a=1;for(const c of this.children)c.stencilRef=a++};u._createClass(e,[{key:"requiresDedicatedFBO",get:function(){return!1}}]);return e}(r)})},"esri/views/2d/engine/webgl/WGLContainer":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../chunks/mat3f32 ../brushes ../Container ./ClippingInfo ./enums".split(" "),function(u,n,h,r,v,z,p,g){return function(e){function b(){var c=
e.apply(this,arguments)||this;c.name=c.constructor.name;return c}u._inheritsLoose(b,e);var a=b.prototype;a._createTransforms=function(){return{dvs:r.create()}};a.doRender=function(c){const d=this.createRenderParams(c),{painter:f,globalOpacity:l,profiler:m,drawPhase:k}=d,q=k===g.WGLDrawPhase.LABEL||k===g.WGLDrawPhase.HIGHLIGHT?1:l*this.computedOpacity;m.recordContainerStart(this.name);f.beforeRenderLayer(d,this._clippingInfos?255:0,q);this.updateTransforms(c.state);this.renderChildren(d);f.compositeLayer(d,
q);m.recordContainerEnd()};a.renderChildren=function(c){h.isNone(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(c.painter));for(const d of this.children)d.beforeRender(c);for(const d of this._renderPasses)try{d.render(c)}catch(f){}for(const d of this.children)d.afterRender(c)};a.createRenderParams=function(c){c.requireFBO=this.requiresDedicatedFBO;return c};a.prepareRenderPasses=function(c){return[c.registerRenderPass({name:"clip",brushes:[v.brushes.clip],target:()=>this._clippingInfos,
drawPhase:g.WGLDrawPhase.MAP|g.WGLDrawPhase.LABEL|g.WGLDrawPhase.LABEL_ALPHA|g.WGLDrawPhase.DEBUG|g.WGLDrawPhase.HIGHLIGHT})]};a.updateTransforms=function(c){for(const d of this.children)d.setTransform(c)};a.onAttach=function(){e.prototype.onAttach.call(this);this._updateClippingInfo()};a.onDetach=function(){e.prototype.onDetach.call(this);this._updateClippingInfo()};a._updateClippingInfo=function(){h.isSome(this._clippingInfos)&&(this._clippingInfos.forEach(d=>d.destroy()),this._clippingInfos=null);
if(this.stage){var c=this._clips;h.isSome(c)&&c.length&&(this._clippingInfos=c.items.map(d=>p.fromClipArea(this.stage,d)));this.requestRender()}};u._createClass(b,[{key:"clips",set:function(c){this._clips=c;this.children.forEach(d=>d.clips=c);this._updateClippingInfo()}}]);return b}(z.Container)})},"esri/views/2d/engine/webgl/ClippingInfo":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/reactiveUtils ../../../../chunks/mat3f32 ../DisplayObject ./Mesh2D ../../../webgl/VertexArrayObject".split(" "),
function(u,n,h,r,v,z,p,g,e){const b=h.getLogger("esri.views.2d.engine.webgl.ClippingInfo");return function(a){function c(f,l){var m=a.call(this)||this;m._clip=l;m._cache={};m.stage=f;m._handle=v.watch(()=>l.version,()=>m._invalidate());m.ready();return m}u._inheritsLoose(c,a);c.fromClipArea=function(f,l){return new c(f,l)};var d=c.prototype;d._destroyGL=function(){r.isSome(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null);r.isSome(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=
null)};d.destroy=function(){this._destroyGL();this._handle.remove()};d.getVAO=function(f,l,m,k){const [q,t]=l.size;if("geometry"===this._clip.type||this._lastWidth!==q||this._lastHeight!==t)this._lastWidth=q,this._lastHeight=t,this._destroyGL();if(r.isNone(this._cache.vao)){l=this._createMesh(l,this._clip);const w=l.getIndexBuffer(f),A=l.getVertexBuffers(f);this._cache.mesh=l;this._cache.vao=new e.VertexArrayObject(f,m,k,A,w)}return this._cache.vao};d._createTransforms=function(){return{dvs:z.create()}};
d._invalidate=function(){this._destroyGL();this.requestRender()};d._createScreenRect=function(f,l){const [m,k]=f.size;f="string"===typeof l.left?parseFloat(l.left)/100*m:l.left;const q="string"===typeof l.right?parseFloat(l.right)/100*m:l.right,t="string"===typeof l.top?parseFloat(l.top)/100*k:l.top;l="string"===typeof l.bottom?parseFloat(l.bottom)/100*k:l.bottom;return{x:f,y:t,width:Math.max(m-q-f,0),height:Math.max(k-l-t,0)}};d._createMesh=function(f,l){switch(l.type){case "rect":return g.fromRect(this._createScreenRect(f,
l));case "path":return g.fromPath(l);case "geometry":return g.fromGeometry(f,l);default:return b.error(new n("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),g.fromRect({x:0,y:0,width:1,height:1})}};return c}(p.DisplayObject)})},"esri/views/2d/engine/webgl/Mesh2D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../chunks/earcut ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../layers/graphics/featureConversionUtils ../../../../layers/graphics/OptimizedGeometry ./number ../../../webgl/BufferObject ../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){const d=h.getLogger("esri.views.2d.engine.webgl.Mesh2D"),f=({coords:l,lengths:m},k)=>{const q=[];for(let A=0,x=0;A<m.length;x+=m[A],A+=1){const y=x;for(var t=[];A<m.length-1;A+=1,x+=m[A]){{var w=x+m[A];let B=0;for(let C=1;C<m[A+1];C++)B+=(l[2*(w+C)]-l[2*(w+C-1)])*(l[2*(w+C)+1]+l[2*(w+C-1)+1]);w=k?0<B:0>B}if(!w)break;t.push(x+m[A]-y)}w=l.slice(2*y,2*(x+m[A]));t=v.earcut(w,t,2);for(const B of t)q.push(B+y)}return q};return function(){function l(k,q,t,w=!1){this._cache=
{};this.vertices=k;this.indices=q;this.primitiveType=t;this.isMapSpace=w}l.fromRect=function({x:k,y:q,width:t,height:w}){return l.fromScreenExtent({xmin:k,ymin:q,xmax:k+t,ymax:q+w})};l.fromPath=function(k){var q=g.convertFromNestedArray(new e,k.path,!1,!1);k=q.coords;q=new Uint32Array(f(q,!0));const t=new Uint32Array(k.length/2);for(let w=0;w<t.length;w++)t[w]=b.i1616to32(Math.floor(k[2*w]),Math.floor(k[2*w+1]));return new l({geometry:t},q,c.PrimitiveType.TRIANGLES)};l.fromGeometry=function(k,q){const t=
q.geometry.type;switch(t){case "polygon":return l.fromPolygon(k,q.geometry);case "extent":return l.fromMapExtent(k,q.geometry);default:return d.error(new n("mapview-bad-type",`Unable to create a mesh from type ${t}`,q)),l.fromRect({x:0,y:0,width:1,height:1})}};l.fromPolygon=function(k,q){var t=g.convertFromPolygon(new e,q,!1,!1);q=t.coords;t=new Uint32Array(f(t,!1));const w=new Uint32Array(q.length/2),A=p.create(),x=p.create();for(let y=0;y<w.length;y++)z.set(A,q[2*y],q[2*y+1]),k.toScreen(x,A),w[y]=
b.i1616to32(Math.floor(x[0]),Math.floor(x[1]));return new l({geometry:w},t,c.PrimitiveType.TRIANGLES,!0)};l.fromScreenExtent=function({xmin:k,xmax:q,ymin:t,ymax:w}){k={geometry:new Uint32Array([b.i1616to32(k,t),b.i1616to32(q,t),b.i1616to32(k,w),b.i1616to32(k,w),b.i1616to32(q,t),b.i1616to32(q,w)])};q=new Uint32Array([0,1,2,3,4,5]);return new l(k,q,c.PrimitiveType.TRIANGLES)};l.fromMapExtent=function(k,q){const [t,w]=k.toScreen([0,0],[q.xmin,q.ymin]),[A,x]=k.toScreen([0,0],[q.xmax,q.ymax]);k={geometry:new Uint32Array([b.i1616to32(t,
w),b.i1616to32(A,w),b.i1616to32(t,x),b.i1616to32(t,x),b.i1616to32(A,w),b.i1616to32(A,x)])};q=new Uint32Array([0,1,2,3,4,5]);return new l(k,q,c.PrimitiveType.TRIANGLES)};var m=l.prototype;m.destroy=function(){r.isSome(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const k in this._cache.vertexBuffers)r.isSome(this._cache.vertexBuffers[k])&&this._cache.vertexBuffers[k].dispose()};m.getIndexBuffer=function(k,q=c.Usage.STATIC_DRAW){this._cache.indexBuffer||(this._cache.indexBuffer=a.BufferObject.createIndex(k,
q,this.indices));return this._cache.indexBuffer};m.getVertexBuffers=function(k,q=c.Usage.STATIC_DRAW){this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce((t,w)=>({...t,[w]:a.BufferObject.createVertex(k,q,this.vertices[w])}),{}));return this._cache.vertexBuffers};u._createClass(l,[{key:"elementType",get:function(){a:switch(this.indices.BYTES_PER_ELEMENT){case 1:var k=c.DataType.UNSIGNED_BYTE;break a;case 2:k=c.DataType.UNSIGNED_SHORT;break a;case 4:k=c.DataType.UNSIGNED_INT;
break a;default:throw new n("Cannot get DataType of array");}return k}}]);return l}()})},"esri/views/2d/engine/webgl/WGLRendererInfo":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/screenUtils ../../../../core/unitUtils ../../../../renderers/support/lengthUtils ./Utils ./techniques/Technique ./techniques/utils ../../../webgl/capabilities".split(" "),function(u,n,h,r,v,z,p,g,e,b){function a(d,f){const l=f.length;if(d<f[0].value||1===
l)return f[0].size;for(let m=1;m<l;m++)if(d<f[m].value)return f[m-1].size+(d-f[m-1].value)/(f[m].value-f[m-1].value)*(f[m].size-f[m-1].size);return f[l-1].size}let c=function(){function d(){this.symbolLevels=[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",
vvOpacityEnabled:!1};this._technique=g.Technique}var f=d.prototype;f.getSizeVVFieldStops=function(l){const m=this._vvSizeFieldStops;switch(m.type){case "static":return m;case "level-dependent":return h.unwrapOr(m.levels[l],()=>{var k=Infinity,q=0;for(var t in m.levels){const w=parseFloat(t),A=Math.abs(l-w);A<k&&(k=A,q=w)}if(Infinity===k)return{sizes:new Float32Array([0,0,0,0,0,0]),values:new Float32Array([0,0,0,0,0,0])};k=2**((l-q)/2);q=h.unwrap(m.levels[q]);t=new Float32Array(q.values);t[2]*=k;t[3]*=
k;return{sizes:h.unwrap(q.sizes),values:t}})}};f.update=function(l){h.isSome(this._vvInfo)&&this._updateVisualVariables(this._vvInfo.vvRanges,l)};f.setInfo=function(l,m,k){this._updateEffects(k);this._vvInfo=m;this._technique=e.getTechniqueFromRenderer(l);this.rendererSchema=this._technique.createOrUpdateRendererSchema(this.rendererSchema,l)};f.getVariation=function(){return{...this._technique.getVariation(this.rendererSchema),outsideLabelsVisible:this.outsideLabelsVisible,supportsTextureFloat:b.getWebGLCapabilities("2d").supportsTextureFloat}};
f.getVariationHash=function(){return this._technique.getVariationHash(this.rendererSchema)<<1|(this.outsideLabelsVisible?1:0)};f._updateEffects=function(l){h.isSome(l)?this.outsideLabelsVisible=l.excludedLabelsVisible:this.outsideLabelsVisible=!1};f._updateVisualVariables=function(l,m){const k=this._vvMaterialParameters;k.vvOpacityEnabled=!1;k.vvSizeEnabled=!1;k.vvColorEnabled=!1;k.vvRotationEnabled=!1;if(l){var q=l.size;if(q){k.vvSizeEnabled=!0;if(q.minMaxValue){const w=q.minMaxValue;let A;if(p.isDefined(w.minSize)&&
p.isDefined(w.maxSize))if(p.isNumber(w.minSize)&&p.isNumber(w.maxSize)){A=r.pt2px(w.minSize);var t=r.pt2px(w.maxSize)}else t=m.scale,A=r.pt2px(a(t,w.minSize.stops)),t=r.pt2px(a(t,w.maxSize.stops));this.vvSizeMinMaxValue.set([w.minDataValue,w.maxDataValue,A,t])}q.scaleStops&&(this.vvSizeScaleStopsValue=r.pt2px(a(m.scale,q.scaleStops.stops)));q.unitValue&&(this.vvSizeUnitValueToPixelsRatio=v.getMetersPerUnitForSR(m.spatialReference)/z.meterIn[q.unitValue.unit]/m.resolution);q.fieldStops&&(this._vvSizeFieldStops=
q.fieldStops)}if(m=l.color)k.vvColorEnabled=!0,this.vvColorValues.set(m.values),this.vvColors.set(m.colors);if(m=l.opacity)k.vvOpacityEnabled=!0,this.vvOpacityValues.set(m.values),this.vvOpacities.set(m.opacities);if(l=l.rotation)k.vvRotationEnabled=!0,k.vvRotationType=l.type}};n._createClass(d,[{key:"vvMaterialParameters",get:function(){return this._vvMaterialParameters}}]);return d}();u.WGLRendererInfo=c;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/layers/graphics/GraphicBoundsRenderer":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat3 ../../../../chunks/mat3f32 ../../../../chunks/vec2f32 ../../../../chunks/vec3f32 ../../../../geometry/support/normalizeUtils ../../engine/DisplayObject ../../engine/webgl/Utils ../../../webgl/BufferObject ../../../webgl/enums ../../../webgl/VertexArrayObject".split(" "),function(u,n,h,r,v,z,p,g,e,b,a){const c=Math.PI/180,d=()=>g.createProgramDescriptor("bounds",
{geometry:[{location:0,name:"a_position",count:2,type:b.DataType.FLOAT}]});return function(f){function l(k){var q=f.call(this)||this;q._dvsMat3=h.create();q._localOrigin={x:0,y:0};q._getBounds=k;return q}u._inheritsLoose(l,f);var m=l.prototype;m.destroy=function(){this._vao&&(this._vao.dispose(!0),this._indexBuffer=this._vertexBuffer=this._vao=null);this._program&&(this._program.dispose(),this._program=null)};m.doRender=function(k){const {context:q}=k,t=this._getBounds();1>t.length||(this._createShaderProgram(q),
this._updateMatricesAndLocalOrigin(k),this._updateBufferData(q,t),q.setBlendingEnabled(!0),q.setDepthTestEnabled(!1),q.setStencilWriteMask(0),q.setStencilTestEnabled(!1),q.setBlendFunction(b.BlendFactor.ONE,b.BlendFactor.ONE_MINUS_SRC_ALPHA),q.setColorMask(!0,!0,!0,!0),k=this._program,q.bindVAO(this._vao),q.useProgram(k),k.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),q.gl.lineWidth(1),q.drawElements(b.PrimitiveType.LINES,8*t.length,b.DataType.UNSIGNED_INT,0),q.bindVAO())};m._createTransforms=function(){return{dvs:h.create()}};
m._createShaderProgram=function(k){this._program||(this._program=k.programCache.acquire("precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos \x3d u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position \x3d vec4(pos.xy, 0.0, 1.0);\n        }","precision mediump float;\n      void main() {\n        gl_FragColor \x3d vec4(0.75, 0.0, 0.0, 0.75);\n      }",d().attributes))};m._updateMatricesAndLocalOrigin=
function(k){var {state:q}=k;const {displayMat3:t,size:w,resolution:A,pixelRatio:x,rotation:y,viewpoint:B}=q;k=c*y;const {x:C,y:D}=B.targetGeometry;q=z.normalizeMapX(C,q.spatialReference);this._localOrigin.x=q;this._localOrigin.y=D;q=x*w[0];const F=x*w[1],E=A*q,G=A*F,O=n.identity(this._dvsMat3);n.multiply(O,O,t);n.translate(O,O,r.fromValues(q/2,F/2));n.scale(O,O,v.fromValues(w[0]/E,-F/G,1));n.rotate(O,O,-k)};m._updateBufferData=function(k,q){const {x:t,y:w}=this._localOrigin,A=new Float32Array(8*q.length),
x=new Uint32Array(8*q.length);let y=0,B=0;for(const C of q)C&&(A[2*y]=C[0]-t,A[2*y+1]=C[1]-w,A[2*y+2]=C[0]-t,A[2*y+3]=C[3]-w,A[2*y+4]=C[2]-t,A[2*y+5]=C[3]-w,A[2*y+6]=C[2]-t,A[2*y+7]=C[1]-w,x[B+0]=y+0,x[B+1]=y+3,x[B+2]=y+3,x[B+3]=y+2,x[B+4]=y+2,x[B+5]=y+1,x[B+6]=y+1,x[B+7]=y+0,y+=4,B+=8);this._vertexBuffer?this._vertexBuffer.setData(A.buffer):this._vertexBuffer=e.BufferObject.createVertex(k,b.Usage.DYNAMIC_DRAW,A.buffer);this._indexBuffer?this._indexBuffer.setData(x):this._indexBuffer=e.BufferObject.createIndex(k,
b.Usage.DYNAMIC_DRAW,x);this._vao||(q=d(),this._vao=new a.VertexArrayObject(k,q.attributes,q.bufferLayouts,{geometry:this._vertexBuffer},this._indexBuffer))};return l}(p.DisplayObject)})},"esri/chunks/vec3f32":function(){define(["exports"],function(u){function n(){return new Float32Array(3)}function h(k){const q=new Float32Array(3);q[0]=k[0];q[1]=k[1];q[2]=k[2];return q}function r(k,q,t){const w=new Float32Array(3);w[0]=k;w[1]=q;w[2]=t;return w}function v(k,q){return new Float32Array(k,q,3)}function z(){return n()}
function p(){return r(1,1,1)}function g(){return r(1,0,0)}function e(){return r(0,1,0)}function b(){return r(0,0,1)}const a=n(),c=p(),d=g(),f=e(),l=b(),m=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:h,fromValues:r,createView:v,zeros:z,ones:p,unitX:g,unitY:e,unitZ:b,ZEROS:a,ONES:c,UNIT_X:d,UNIT_Y:f,UNIT_Z:l},Symbol.toStringTag,{value:"Module"}));u.ONES=c;u.UNIT_X=d;u.UNIT_Y=f;u.UNIT_Z=l;u.ZEROS=a;u.clone=h;u.create=n;u.createView=v;u.fromValues=r;u.ones=p;u.unitX=g;u.unitY=e;
u.unitZ=b;u.vec3f32=m;u.zeros=z})},"esri/views/2d/navigation/MapViewNavigation":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Viewpoint ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/Point ../viewpointUtils ./ZoomBox ./actions/Pan ./actions/Pinch ./actions/Rotate".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){const m=new h({targetGeometry:new b}),k=[0,0];h=function(q){function t(A){A=q.call(this,A)||this;A._endTimer=null;A.animationManager=null;return A}u._inheritsLoose(t,q);var w=t.prototype;w.initialize=function(){this.pan=new d({navigation:this});this.rotate=new l({navigation:this});this.pinch=new f({navigation:this});this.zoomBox=new c({view:this.view,navigation:this})};w.destroy=function(){this.pan.destroy();this.rotate.destroy();this.pinch.destroy();this.zoomBox.destroy();
this.pan=this.rotate=this.pinch=this.zoomBox=this.animationManager=null};w.begin=function(){this._set("interacting",!0)};w.end=function(){this._lastEventTimestamp=performance.now();this._startTimer(250)};w.zoom=function(){var A=u._asyncToGenerator(function*(x,y=this._getDefaultAnchor()){this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>x?this.zoomIn(y):this.zoomOut(y);this.setViewpoint(y,x,0,[0,0])});return function(x){return A.apply(this,arguments)}}();
w.zoomIn=function(){var A=u._asyncToGenerator(function*(x){var y=this.view;y=y.constraints.snapToNextScale(y.scale);return this._zoomToScale(y,x)});return function(x){return A.apply(this,arguments)}}();w.zoomOut=function(){var A=u._asyncToGenerator(function*(x){var y=this.view;y=y.constraints.snapToPreviousScale(y.scale);return this._zoomToScale(y,x)});return function(x){return A.apply(this,arguments)}}();w.setViewpoint=function(A,x,y,B){this.begin();this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,
A,x,y,B);this.end()};w.setViewpointImmediate=function(A,x=0,y=[0,0],B=this._getDefaultAnchor()){this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,B,A,x,y)};w.continousRotateClockwise=function(){const A=this.get("view.viewpoint");this.animationManager.animateContinous(A,x=>{a.rotateBy(x,x,-1)})};w.continousRotateCounterclockwise=function(){const A=this.get("view.viewpoint");this.animationManager.animateContinous(A,x=>{a.rotateBy(x,x,1)})};w.resetRotation=function(){this.view.rotation=
0};w.continousPanLeft=function(){this._continuousPan([-10,0])};w.continousPanRight=function(){this._continuousPan([10,0])};w.continousPanUp=function(){this._continuousPan([0,10])};w.continousPanDown=function(){this._continuousPan([0,-10])};w.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();this.end();null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))};w._continuousPan=function(A){this.animationManager.animateContinous(this.view.viewpoint,
x=>{a.translateBy(x,x,A);this.view.constraints.constrainByGeometry(x)})};w._startTimer=function(A){return null!==this._endTimer?this._endTimer:this._endTimer=setTimeout(()=>{this._endTimer=null;const x=performance.now()-this._lastEventTimestamp;250>x?this._endTimer=this._startTimer(x):this._set("interacting",!1)},A)};w._getDefaultAnchor=function(){const {size:A,padding:{left:x,right:y,top:B,bottom:C}}=this.view;k[0]=.5*(A[0]-y+x);k[1]=.5*(A[1]-C+B);return k};w._zoomToScale=function(){var A=u._asyncToGenerator(function*(x,
y=this._getDefaultAnchor()){const {view:B}=this,{constraints:C,scale:D,viewpoint:F,size:E,padding:G}=B,O=C.canZoomInTo(x),H=C.canZoomOutTo(x);if(!(x<D&&!O||x>D&&!H))return a.padAndScaleAndRotateBy(m,F,x/D,0,y,E,G),C.constrainByGeometry(m),B.goTo(m,{animate:!0})});return function(x){return A.apply(this,arguments)}}();w._scaleRotateTranslateViewpoint=function(A,x,y,B,C){var {view:D}=this;const {size:F,padding:E,constraints:G,scale:O,viewpoint:H}=D;var K=O*y;D=G.canZoomInTo(K);K=G.canZoomOutTo(K);if(1>
y&&!D||1<y&&!K)y=1;a.translateBy(H,H,C);a.padAndScaleAndRotateBy(A,H,y,B,x,F,E);return G.constrainByGeometry(A)};return t}(r);n.__decorate([v.property()],h.prototype,"animationManager",void 0);n.__decorate([v.property({type:Boolean,readOnly:!0})],h.prototype,"interacting",void 0);n.__decorate([v.property()],h.prototype,"pan",void 0);n.__decorate([v.property()],h.prototype,"pinch",void 0);n.__decorate([v.property()],h.prototype,"rotate",void 0);n.__decorate([v.property()],h.prototype,"view",void 0);
n.__decorate([v.property()],h.prototype,"zoomBox",void 0);return h=n.__decorate([e.subclass("esri.views.2d.navigation.MapViewNavigation")],h)})},"esri/views/2d/navigation/ZoomBox":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../input/InputManager".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(f){f=a.call(this,f)||this;f._container=null;f._overlay=null;f._backgroundShape=null;f._boxShape=null;f._box={x:0,y:0,width:0,height:0};f._redraw=f._redraw.bind(u._assertThisInitialized(f));return f}u._inheritsLoose(c,a);var d=c.prototype;d.destroy=function(){this.view=null};d._start=function(){this._createContainer();this._createOverlay();this.navigation.begin()};d._update=function(f,l,m,k){this._box.x=f;this._box.y=l;this._box.width=m;this._box.height=
k;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};d._end=function(f,l,m,k,q){const t=this.view;f=t.toMap(r.createScreenPoint(f+.5*m,l+.5*k));m=Math.max(m/t.width,k/t.height);-1===q&&(m=1/m);this._destroyOverlay();this.navigation.end();t.goTo({center:f,scale:t.scale*m})};d._updateBox=function(f,l,m,k){const q=this._boxShape;q.setAttributeNS(null,"x",""+f);q.setAttributeNS(null,"y",""+l);q.setAttributeNS(null,"width",""+m);q.setAttributeNS(null,"height",""+k);q.setAttributeNS(null,"class",
"esri-zoom-box__outline")};d._updateBackground=function(f,l,m,k){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(f,l,m,k,this.view.width,this.view.height))};d._createContainer=function(){const f=document.createElement("div");f.className="esri-zoom-box__container";this.view.root.appendChild(f);this._container=f};d._createOverlay=function(){var f=this.view.width,l=this.view.height;const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M 0 0 L "+
f+" 0 L "+f+" "+l+" L 0 "+l+" Z");m.setAttributeNS(null,"class","esri-zoom-box__overlay-background");f=document.createElementNS("http://www.w3.org/2000/svg","rect");l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");l.setAttributeNS(null,"class","esri-zoom-box__overlay");l.appendChild(m);l.appendChild(f);this._container.appendChild(l);this._backgroundShape=m;this._boxShape=f;this._overlay=l};
d._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null};d._toSVGPath=function(f,l,m,k,q,t){m=f+m;k=l+k;return"M 0 0 L "+q+" 0 L "+q+" "+t+" L 0 "+t+" ZM "+f+" "+l+" L "+f+" "+k+" L "+m+" "+k+" L "+m+" "+l+" Z"};d._handleDrag=function(f,l){var m=f.x,k=f.y,q=f.origin.x;const t=f.origin.y;let w;m>q?(w=q,q=m-q):(w=m,q-=m);k>t?(m=t,k-=t):(m=k,k=t-k);switch(f.action){case "start":this._start();
break;case "update":this._update(w,m,q,k);break;case "end":this._end(w,m,q,k,l)}f.stopPropagation()};d._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var {x:f,y:l,width:m,height:k}=this._box;this._updateBox(f,l,m,k);this._updateBackground(f,l,m,k);this._rafId=requestAnimationFrame(this._redraw)}};u._createClass(c,[{key:"view",set:function(f){this._handles&&this._handles.forEach(l=>{l.remove()});this._handles=null;this._destroyOverlay();this._set("view",f);f&&(f.on("drag",["Shift"],
l=>this._handleDrag(l,1),b.ViewEventPriorities.INTERNAL),f.on("drag",["Shift","Ctrl"],l=>this._handleDrag(l,-1),b.ViewEventPriorities.INTERNAL))}}]);return c}(h);n.__decorate([v.property()],h.prototype,"navigation",void 0);n.__decorate([v.property()],h.prototype,"view",null);return h=n.__decorate([e.subclass("esri.views.2d.navigation.ZoomBox")],h)})},"esri/views/2d/navigation/actions/Pan":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/reactiveUtils ../../../../core/screenUtils ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../viewpointUtils ../../../navigation/PanPlanarMomentumEstimator ../../../../geometry/Point".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){h=function(q){function t(A){var x=q.call(this,A)||this;x.animationTime=0;x.momentumEstimator=new m.PanPlanarMomentumEstimator(500,6,.92);x.momentum=null;x.tmpMomentum=f.create();x.momentumFinished=!1;x.viewpoint=new r({targetGeometry:new k,scale:0,rotation:0});z.when(()=>x.momentumFinished,()=>x.navigation.stop());return x}u._inheritsLoose(t,q);var w=t.prototype;w.begin=function(A,x){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(x);
this.previousDrag=x};w.update=function(A,x){this.addToEstimator(x);let y=x.center.x,B=x.center.y;const C=this.previousDrag;y=C?C.center.x-y:-y;B=C?B-C.center.y:B;A.viewpoint=l.translateBy(this.viewpoint,A.viewpoint,[y||0,B||0]);this.previousDrag=x};w.end=function(A,x){this.addToEstimator(x);this.momentum=A.navigation.momentumEnabled?this.momentumEstimator.evaluateMomentum():null;this.animationTime=0;if(this.momentum)this.onAnimationUpdate(A);this.previousDrag=null;this.navigation.end()};w.addToEstimator=
function(A){var x=A.center.x;const y=A.center.y,B=p.createScreenPointArray(-x,y);x=f.fromValues(-x,y,0);this.momentumEstimator.add(B,x,.001*A.timestamp)};w.onAnimationUpdate=function(A){this.navigation.animationManager.animateContinous(A.viewpoint,(x,y)=>{this.momentumFinished=!this.momentum||this.momentum.isFinished(this.animationTime);y*=.001;if(!this.momentumFinished){const B=this.momentum.valueDelta(this.animationTime,y);d.scale(this.tmpMomentum,this.momentum.direction,B);l.translateBy(x,x,this.tmpMomentum);
A.constraints.constrainByGeometry(x)}this.animationTime+=y})};w.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())};return t}(v);n.__decorate([g.property()],h.prototype,"momentumFinished",void 0);n.__decorate([g.property()],h.prototype,"viewpoint",void 0);n.__decorate([g.property()],h.prototype,"navigation",void 0);return h=n.__decorate([c.subclass("esri.views.2d.navigation.actions.Pan")],h)})},"esri/views/navigation/PanPlanarMomentumEstimator":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/vec3 ../../chunks/vec3f64 ./FilteredFiniteDifference ./Momentum".split(" "),
function(u,n,h,r,v,z){let p=function(g){function e(b,a,c,d,f){b=g.call(this,b,a,c)||this;b.sceneVelocity=d;b.direction=f;return b}n._inheritsLoose(e,g);e.prototype.value=function(b){return g.prototype.valueFromInitialVelocity.call(this,this.sceneVelocity,b)};return e}(z.Momentum);z=function(){function g(b=300,a=12,c=.84){this.minimumInitialVelocity=b;this.stopVelocity=a;this.friction=c;this.enabled=!0;this.time=new v.FilteredFiniteDifference(.6);this.screen=[new v.FilteredFiniteDifference(.4),new v.FilteredFiniteDifference(.4)];
this.scene=[new v.FilteredFiniteDifference(.6),new v.FilteredFiniteDifference(.6),new v.FilteredFiniteDifference(.6)];this.tmpDirection=r.create()}var e=g.prototype;e.add=function(b,a,c){!this.enabled||this.time.hasLastValue&&.015>this.time.computeDelta(c)||(this.screen[0].update(b[0]),this.screen[1].update(b[1]),this.scene[0].update(a[0]),this.scene[1].update(a[1]),this.scene[2].update(a[2]),this.time.update(c))};e.reset=function(){this.screen[0].reset();this.screen[1].reset();this.scene[0].reset();
this.scene[1].reset();this.scene[2].reset();this.time.reset()};e.evaluateMomentum=function(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;var b=this.screen[0].filteredDelta;const a=this.screen[1].filteredDelta;b=Math.sqrt(b*b+a*a)/this.time.filteredDelta;return Math.abs(b)<this.minimumInitialVelocity?null:this.createMomentum(b,this.stopVelocity,this.friction)};e.createMomentum=function(b,a,c){h.set(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);
const d=h.length(this.tmpDirection);0<d&&h.scale(this.tmpDirection,this.tmpDirection,1/d);return new p(b,a,c,d/this.time.filteredDelta,this.tmpDirection)};return g}();u.PanPlanarMomentum=p;u.PanPlanarMomentumEstimator=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/navigation/FilteredFiniteDifference":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(u,n){let h=function(){function r(z){this.gain=z}var v=r.prototype;
v.update=function(z){if(this.hasLastValue){const p=this.computeDelta(z);this._updateDelta(p)}this.lastValue=z};v.reset=function(){this.filteredDelta=this.lastValue=void 0};v.computeDelta=function(z){return z-this.lastValue};v._updateDelta=function(z){this.filteredDelta=this.hasFilteredDelta?(1-this.gain)*this.filteredDelta+this.gain*z:z};n._createClass(r,[{key:"hasLastValue",get:function(){return void 0!==this.lastValue}},{key:"hasFilteredDelta",get:function(){return void 0!==this.filteredDelta}}]);
return r}();u.FilteredFiniteDifference=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/navigation/Momentum":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(u,n){let h=function(){function r(z,p,g){this._initialVelocity=z;this._stopVelocity=p;this._friction=g;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}var v=r.prototype;v.isFinished=function(z){return z>
this.duration};v.value=function(z){return this.valueFromInitialVelocity(this._initialVelocity,z)};v.valueDelta=function(z,p){const g=this.value(z);return this.value(z+p)-g};v.valueFromInitialVelocity=function(z,p){p=Math.min(p,this.duration);const g=1-this.friction;return z*(g**p-1)/Math.log(g)};n._createClass(r,[{key:"duration",get:function(){return this._duration}},{key:"friction",get:function(){return this._friction}}]);return r}();u.Momentum=h;Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/navigation/actions/Pinch":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/reactiveUtils ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../viewpointUtils ../../../navigation/RotationMomentumEstimator ../../../navigation/ZoomMomentumEstimator ../../../../geometry/Point".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){h=function(q){function t(A){var x=q.call(this,A)||this;x._animationTime=0;x._momentumFinished=!1;x._rotationMomentumEstimator=new l.RotationMomentumEstimator(.6,.15,.95);x._rotationDirection=1;x._zoomDirection=1;x._zoomMomentumEstimator=new m.ZoomMomentumEstimator;x._zoomOnly=null;x.zoomMomentum=null;x.rotateMomentum=null;x.viewpoint=new r({targetGeometry:new k,scale:0,rotation:0});x.own(z.when(()=>x._momentumFinished,()=>x.navigation.stop()));return x}
u._inheritsLoose(t,q);var w=t.prototype;w.begin=function(A,x){this.navigation.begin();this._rotationMomentumEstimator.reset();this._zoomMomentumEstimator.reset();this._zoomOnly=null;this._previousAngle=this._startAngle=x.angle;this._previousRadius=this._startRadius=x.radius;this._previousCenter=x.center;this._updateTimestamp=null;A.constraints.rotationEnabled&&this.addToRotateEstimator(0,x.timestamp);this.addToZoomEstimator(x,1)};w.update=function(A,x){null===this._updateTimestamp&&(this._updateTimestamp=
x.timestamp);const y=x.angle,B=x.radius,C=x.center,D=Math.abs(180*(y-this._startAngle)/Math.PI),F=Math.abs(B-this._startRadius),E=this._startRadius/B;if(this._previousRadius){const G=B/this._previousRadius;let O=180*(y-this._previousAngle)/Math.PI;this._rotationDirection=0<=O?1:-1;this._zoomDirection=1<=G?1:-1;A.constraints.rotationEnabled?(null===this._zoomOnly&&200<x.timestamp-this._updateTimestamp&&(this._zoomOnly=0<F-D),null===this._zoomOnly||this._zoomOnly?O=0:this.addToRotateEstimator(y-this._startAngle,
x.timestamp)):O=0;this.addToZoomEstimator(x,E);this.navigation.setViewpoint([C.x,C.y],1/G,O,[this._previousCenter.x-C.x,C.y-this._previousCenter.y])}this._previousAngle=y;this._previousRadius=B;this._previousCenter=C};w.end=function(A){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum();this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum();this._animationTime=0;if(this.rotateMomentum||this.zoomMomentum)this.onAnimationUpdate(A);this.navigation.end()};w.addToRotateEstimator=
function(A,x){this._rotationMomentumEstimator.add(A,.001*x)};w.addToZoomEstimator=function(A,x){this._zoomMomentumEstimator.add(x,.001*A.timestamp)};w.canZoomIn=function(A){const x=A.scale;A=A.constraints.effectiveMaxScale;return 0===A||x>A};w.canZoomOut=function(A){const x=A.scale;A=A.constraints.effectiveMinScale;return 0===A||x<A};w.onAnimationUpdate=function(A){this.navigation.animationManager.animateContinous(A.viewpoint,(x,y)=>{var B=!this.canZoomIn(A)&&1<this._zoomDirection||!this.canZoomOut(A)&&
1>this._zoomDirection,C=!this.rotateMomentum||this.rotateMomentum.isFinished(this._animationTime);B=B||!this.zoomMomentum||this.zoomMomentum.isFinished(this._animationTime);y*=.001;this._momentumFinished=C&&B;if(!this._momentumFinished){C=this.rotateMomentum?Math.abs(this.rotateMomentum.valueDelta(this._animationTime,y))*this._rotationDirection*180/Math.PI:0;B=this.zoomMomentum?Math.abs(this.zoomMomentum.valueDelta(this._animationTime,y)):1;const F=d.create();var D=d.create();if(this._previousCenter){c.set(F,
this._previousCenter.x,this._previousCenter.y);f.getPaddingScreenTranslation(D,A.size,A.padding);c.add(F,F,D);const {constraints:E,scale:G}=A;D=G*B;1>B&&!E.canZoomInTo(D)?(B=G/E.effectiveMaxScale,this.rotateMomentum=this.zoomMomentum=null):1<B&&!E.canZoomOutTo(D)&&(B=G/E.effectiveMinScale,this.rotateMomentum=this.zoomMomentum=null);f.scaleAndRotateBy(x,A.viewpoint,B,C,F,A.size);A.constraints.constrainByGeometry(x)}}this._animationTime+=y})};w.stopMomentumNavigation=function(){if(this.rotateMomentum||
this.zoomMomentum)this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop()};return t}(v);n.__decorate([p.property()],h.prototype,"_momentumFinished",void 0);n.__decorate([p.property()],h.prototype,"viewpoint",void 0);n.__decorate([p.property()],h.prototype,"navigation",void 0);return h=n.__decorate([a.subclass("esri.views.2d.navigation.actions.Pinch")],h)})},"esri/views/navigation/RotationMomentumEstimator":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","./MomentumEstimator"],function(u,n,h){h=function(r){function v(z=3,p=.01,g=.95,e=12){return r.call(this,z,p,g,e)||this}n._inheritsLoose(v,r);v.prototype.add=function(z,p){if(this.value.hasLastValue){const g=this.value.lastValue;for(z-=g;z>Math.PI;)z-=2*Math.PI;for(;z<-Math.PI;)z+=2*Math.PI;z=g+z}r.prototype.add.call(this,z,p)};return v}(h.MomentumEstimator);u.RotationMomentumEstimator=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/navigation/MomentumEstimator":function(){define(["exports","../../core/mathUtils","./FilteredFiniteDifference","./Momentum"],function(u,n,h,r){let v=function(){function z(g=2.5,e=.01,b=.95,a=12){this.minimumInitialVelocity=g;this.stopVelocity=e;this.friction=b;this.maxVelocity=a;this.enabled=!0;this.value=new h.FilteredFiniteDifference(.8);this.time=new h.FilteredFiniteDifference(.3)}var p=z.prototype;p.add=function(g,e){if(this.enabled){if(this.time.hasLastValue){if(.01>this.time.computeDelta(e))return;
if(this.value.hasFilteredDelta){const b=this.value.computeDelta(g);0>this.value.filteredDelta*b&&this.value.reset()}}this.time.update(e);this.value.update(g)}};p.reset=function(){this.value.reset();this.time.reset()};p.evaluateMomentum=function(){if(!this.enabled||!this.value.hasFilteredDelta)return null;let g=this.value.filteredDelta/this.time.filteredDelta;g=n.clamp(g,-this.maxVelocity,this.maxVelocity);return Math.abs(g)<this.minimumInitialVelocity?null:this.createMomentum(g,this.stopVelocity,
this.friction)};p.createMomentum=function(g,e,b){return new r.Momentum(g,e,b)};return z}();u.MomentumEstimator=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/navigation/ZoomMomentumEstimator":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./Momentum","./MomentumEstimator"],function(u,n,h,r){let v=function(z){function p(e,b,a){return z.call(this,e,b,a)||this}n._inheritsLoose(p,z);var g=p.prototype;g.value=function(e){e=
z.prototype.value.call(this,e);return Math.exp(e)};g.valueDelta=function(e,b){const a=z.prototype.value.call(this,e);e=z.prototype.value.call(this,e+b);return Math.exp(e-a)};return p}(h.Momentum);h=function(z){function p(e=2.5,b=.01,a=.95,c=12){return z.call(this,e,b,a,c)||this}n._inheritsLoose(p,z);var g=p.prototype;g.add=function(e,b){z.prototype.add.call(this,Math.log(e),b)};g.createMomentum=function(e,b,a){return new v(e,b,a)};return p}(r.MomentumEstimator);u.ZoomMomentum=v;u.ZoomMomentumEstimator=
h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/navigation/actions/Rotate":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../viewpointUtils ../../../../geometry/Point".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f){const l=c.create(),m=c.create();h=function(k){function q(w){w=k.call(this,w)||this;w._previousCenter=c.create();w.viewpoint=new r({targetGeometry:new f,scale:0,rotation:0});return w}u._inheritsLoose(q,k);var t=q.prototype;t.begin=function(w,A){this.navigation.begin();a.set(this._previousCenter,A.center.x,A.center.y)};t.update=function(w,A){const {state:{size:x,padding:y}}=w;a.set(l,A.center.x,A.center.y);d.getAnchor(m,x,y);w.viewpoint=d.rotateBy(this.viewpoint,
w.state.paddedViewState.viewpoint,d.angleBetween(m,this._previousCenter,l));a.copy(this._previousCenter,l)};t.end=function(){this.navigation.end()};return q}(v);n.__decorate([z.property()],h.prototype,"viewpoint",void 0);n.__decorate([z.property()],h.prototype,"navigation",void 0);return h=n.__decorate([b.subclass("esri.views.2d.actions.Rotate")],h)})},"esri/views/2d/magnifier/MagnifierView2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Handles ../../../core/mathUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/urlUtils ../../../chunks/mat3f32 ../engine/DisplayObject ../engine/webgl/DefaultVertexAttributeLayouts ../engine/webgl/enums ../engine/webgl/shaders/MagnifierPrograms ../../magnifier/resources ../../webgl/BufferObject ../../webgl/enums ../../webgl/Texture ../../webgl/VertexArrayObject".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q){return function(t){function w(){var x=t.call(this)||this;x._handles=new h;x._resourcePixelRatio=1;x.visible=!1;return x}u._inheritsLoose(w,t);var A=w.prototype;A.destroy=function(){this._handles.destroy();this._handles=null;this._disposeRenderResources();this._resourcesTask&&(this._resourcesTask.abort(),this._resourcesTask=null)};A._createTransforms=function(){return{dvs:e.create()}};A.doRender=function(x){const y=x.context;if(!this._resourcesTask)this._reloadResources();
else if(x.drawPhase===c.WGLDrawPhase.MAP&&this._canRender()){this._updateResources(x);var B=this._magnifier;if(!v.isNone(B.position)){var C=x.pixelRatio,D=B.size*C,F=Math.ceil(1/B.factor*D);this._readbackTexture.resize(F,F);var {size:E}=x.state;x=C*E[0];E=C*E[1];var G=.5*F,O=.5*F,H=r.clamp(C*B.position.x,G,x-G-1),K=r.clamp(E-C*B.position.y,O,E-O-1);y.setBlendingEnabled(!0);G=H-G;O=K-O;var P=this._readbackTexture;y.bindTexture(P,0);y.gl.copyTexImage2D(P.descriptor.target,0,P.descriptor.pixelFormat,
G,O,F,F,0);var L=(F=null==(L=this.background)?void 0:L.color)?[F.a*F.r/255,F.a*F.g/255,F.a*F.b/255,F.a]:[1,1,1,1];F=-1+(H+B.offset.x*C)/x*2;C=-1+(K-B.offset.y*C)/E*2;x=D/x*2;D=D/E*2;E=this._program;y.bindVAO(this._vertexArrayObject);y.bindTexture(this._overlayTexture,6);y.bindTexture(this._maskTexture,7);y.useProgram(E);E.setUniform4fv("u_background",L);E.setUniform1i("u_readbackTexture",0);E.setUniform1i("u_overlayTexture",6);E.setUniform1i("u_maskTexture",7);E.setUniform4f("u_drawPos",F,C,x,D);
E.setUniform1i("u_maskEnabled",B.maskEnabled?1:0);E.setUniform1i("u_overlayEnabled",B.overlayEnabled?1:0);y.setStencilTestEnabled(!1);y.setColorMask(!0,!0,!0,!0);y.drawArrays(m.PrimitiveType.TRIANGLE_STRIP,0,4);y.bindVAO()}}};A._canRender=function(){return this.mask&&this.overlay&&null!=this._magnifier};A._reloadResources=function(){var x=this;this._resourcesTask&&this._resourcesTask.abort();const y=v.isSome(this._magnifier)?this._magnifier.maskUrl:null,B=v.isSome(this._magnifier)?this._magnifier.overlayUrl:
null;this._resourcesTask=z.createTask(function(){var C=u._asyncToGenerator(function*(D){const F=v.isNone(y)||v.isNone(B)?f.loadMagnifierResources(D):null,E=v.isSome(y)?n(y,{responseType:"image",signal:D}).then(H=>H.data):F.then(H=>H.mask);D=v.isSome(B)?n(B,{responseType:"image",signal:D}).then(H=>H.data):F.then(H=>H.overlay);const [G,O]=yield Promise.all([E,D]);x.mask=G;x.overlay=O;x._disposeRenderResources();x.requestRender()});return function(D){return C.apply(this,arguments)}}())};A._disposeRenderResources=
function(){this._readbackTexture=v.disposeMaybe(this._readbackTexture);this._overlayTexture=v.disposeMaybe(this._overlayTexture);this._maskTexture=v.disposeMaybe(this._maskTexture);this._vertexArrayObject=v.disposeMaybe(this._vertexArrayObject);this._program=v.disposeMaybe(this._program)};A._updateResources=function(x){x.pixelRatio!==this._resourcePixelRatio&&this._disposeRenderResources();if(!this._readbackTexture){var y=x.context;this._resourcePixelRatio=x.pixelRatio;var B=Math.ceil(this._magnifier.size*
x.pixelRatio);this._program=d.createMagnifierProgram(y);var C=new Uint16Array([0,1,0,0,1,1,1,0]);this._vertexArrayObject=new q.VertexArrayObject(y,d.magnifierProgramTemplate.attributes,a.Pos2us,{geometry:l.BufferObject.createVertex(y,m.Usage.STATIC_DRAW,C)});this.overlay.width=B;this.overlay.height=B;this._overlayTexture=new k.Texture(y,{target:m.TextureType.TEXTURE_2D,pixelFormat:m.PixelFormat.RGBA,internalFormat:m.PixelFormat.RGBA,dataType:m.PixelType.UNSIGNED_BYTE,wrapMode:m.TextureWrapMode.CLAMP_TO_EDGE,
samplingMode:m.TextureSamplingMode.NEAREST,flipped:!0,preMultiplyAlpha:g.isSVG(this.overlay.src)&&x.context.driverTest.svgAlwaysPremultipliesAlpha?!1:!0},this.overlay);this.mask.width=B;this.mask.height=B;this._maskTexture=new k.Texture(y,{target:m.TextureType.TEXTURE_2D,pixelFormat:m.PixelFormat.ALPHA,internalFormat:m.PixelFormat.ALPHA,dataType:m.PixelType.UNSIGNED_BYTE,wrapMode:m.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:m.TextureSamplingMode.NEAREST,flipped:!0},this.mask);x=1/this._magnifier.factor;
this._readbackTexture=new k.Texture(y,{target:m.TextureType.TEXTURE_2D,pixelFormat:m.PixelFormat.RGBA,internalFormat:m.PixelFormat.RGBA,dataType:m.PixelType.UNSIGNED_BYTE,wrapMode:m.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:m.TextureSamplingMode.LINEAR,flipped:!1,width:Math.ceil(x*B),height:Math.ceil(x*B)})}};u._createClass(w,[{key:"background",get:function(){return this._background},set:function(x){this._background=x;this.requestRender()}},{key:"magnifier",get:function(){return this._magnifier},
set:function(x){this._magnifier=x;this._handles.removeAll();this._handles.add([p.watch(()=>x.version,()=>{this.visible=x.visible&&v.isSome(x.position)&&0<x.size;this.requestRender()},p.initial),p.watch(()=>[x.maskUrl,x.overlayUrl],()=>this._reloadResources()),p.watch(()=>x.size,()=>{this._disposeRenderResources();this.requestRender()})])}}]);return w}(b.DisplayObject)})},"esri/views/2d/engine/webgl/shaders/MagnifierPrograms":function(){define(["exports","./sources/resolver","../../../../webgl/ProgramTemplate"],
function(u,n,h){const r={shaders:{vertexShader:n.resolveIncludes("magnifier/magnifier.vert"),fragmentShader:n.resolveIncludes("magnifier/magnifier.frag")},attributes:new Map([["a_pos",0]])};u.createMagnifierProgram=function(v){return h.createProgram(v,r)};u.magnifierProgramTemplate=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/magnifier/resources":function(){define(["require","exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils",
"../../support/requestImageUtils"],function(u,n,h,r,v){function z(){z=h._asyncToGenerator(function*(g){var e=new Promise((a,c)=>u(["./mask-svg"],d=>a(p(d)),c)),b=new Promise((a,c)=>u(["./overlay-svg"],d=>a(p(d)),c));e=v.requestImage((yield e).default,{signal:g});b=v.requestImage((yield b).default,{signal:g});b={mask:yield e,overlay:yield b};r.throwIfAborted(g);return b});return z.apply(this,arguments)}const p=g=>Object.freeze(Object.defineProperty({__proto__:null,default:g},Symbol.toStringTag,{value:"Module"}));
n.loadMagnifierResources=function(g){return z.apply(this,arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/requestImageUtils":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../request"],function(u,n,h){function r(){r=n._asyncToGenerator(function*(v,z){({data:v}=yield h(v,{responseType:"image",...z}));return v});return r.apply(this,arguments)}u.requestImage=function(v,z){return r.apply(this,arguments)};Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["exports","../../../chunks/mat4"],function(u,n){u.mat4=n.mat4;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["exports","../../../chunks/mat4f32"],function(u,n){u.mat4f32=n.mat4f32;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["exports",
"../../../chunks/vec3f32"],function(u,n){u.vec3f32=n.vec3f32;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["exports","../../../chunks/vec4f32"],function(u,n){u.vec4f32=n.vec4f32;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/Bitmap":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/mat3 ../../../chunks/mat3f32 ../../../chunks/vec2f32 ./DisplayObject ./ImageryBitmapSource ../../webgl/enums ../../webgl/Texture".split(" "),
function(u,n,h,r,v,z,p,g,e,b){function a(f){return f&&"render"in f}function c(f){const l=document.createElement("canvas");l.width=f.width;l.height=f.height;f.render(l.getContext("2d"));return l}function d(f,l,m){const k={target:e.TextureType.TEXTURE_2D,pixelFormat:e.PixelFormat.RGBA,internalFormat:e.PixelFormat.RGBA,dataType:e.PixelType.UNSIGNED_BYTE,wrapMode:e.TextureWrapMode.CLAMP_TO_EDGE};l&&m&&(k.width=l,k.height=m);return new b.Texture(f,k)}p=function(f){function l(k=null,q,t=!0){var w=f.call(this)||
this;w.requestRenderOnSourceChangedEnabled=t;w._textureInvalidated=!0;w.stencilRef=0;w.coordScale=[1,1];w._height=void 0;w.pixelRatio=1;w.resolution=0;w.rotation=0;w._source=null;w._width=void 0;w.x=0;w.y=0;w.blendFunction=q;w.source=k;w.requestRender=w.requestRender.bind(n._assertThisInitialized(w));return w}n._inheritsLoose(l,f);var m=l.prototype;m.destroy=function(){this._texture&&(this._texture.dispose(),this._texture=null)};m.beforeRender=function(k){f.prototype.beforeRender.call(this,k);this.updateTexture(k.context)};
m.invalidateTexture=function(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())};m._createTransforms=function(){return{dvs:v.create()}};m.setTransform=function(k){const q=r.identity(this.transforms.dvs),[t,w]=k.toScreenNoRotation([0,0],[this.x,this.y]);var A=this.resolution/this.pixelRatio/k.resolution;const x=A*this.width;A*=this.height;const y=Math.PI*this.rotation/180;r.translate(q,q,z.fromValues(t,w));r.translate(q,q,z.fromValues(x/
2,A/2));r.rotate(q,q,-y);r.translate(q,q,z.fromValues(-x/2,-A/2));r.scaleByVec2(q,q,z.fromValues(x,A));r.multiply(this.transforms.dvs,k.displayViewMat3,q)};m.setSamplingProfile=function(k){this._texture&&(k.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(k.samplingMode))};m.bind=function(k,q){this._texture&&k.bindTexture(this._texture,q)};m.updateTexture=function(k){if(this.stage)this._textureInvalidated&&(this._textureInvalidated=!1,this._texture||
(this._texture=this.source?d(k,this.sourceWidth,this.sourceHeight):d(k)),(k=this.source)?(this._texture.resize(this.sourceWidth,this.sourceHeight),a(k)?k instanceof g?(k=k.getRenderedRasterPixels(),this._texture.setData(h.isSome(k)?k.renderedRasterPixels:null)):this._texture.setData(c(k)):!k||"render"in k||this._texture.setData(k),this.ready()):this._texture.setData(null));else{var q;null==(q=this._texture)?void 0:q.dispose();this._texture=null}};m.onAttach=function(){this.invalidateTexture()};m.onDetach=
function(){this.invalidateTexture()};n._createClass(l,[{key:"isSourceScaled",get:function(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}},{key:"height",get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(k){this._height=k}},{key:"source",get:function(){return this._source},set:function(k){this._source=k;this.invalidateTexture()}},{key:"sourceHeight",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:
this._source.height}},{key:"sourceWidth",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}},{key:"width",get:function(){return void 0!==this._width?this._width:this.sourceWidth},set:function(k){this._width=k}}]);return l}(p.DisplayObject);u.Bitmap=p;u.isImageSource=a;u.rasterize=c;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/ImageryBitmapSource":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../core/maybe"],function(u,n){return function(){function h(v,z,p){this.pixelBlock=v;this.extent=z;this.originalPixelBlock=p}var r=h.prototype;r.render=function(v){var z=this.pixelBlock;if(!n.isNone(z)){var p=this.filter({pixelBlock:z});n.isNone(p.pixelBlock)||(z=p.pixelBlock.getAsRGBA(),p=v.createImageData(p.pixelBlock.width,p.pixelBlock.height),p.data.set(z),v.putImageData(p,0,0))}};r.getRenderedRasterPixels=function(){const v=this.filter({pixelBlock:this.pixelBlock});return n.isNone(v.pixelBlock)?
null:{width:v.pixelBlock.width,height:v.pixelBlock.height,renderedRasterPixels:new Uint8Array(v.pixelBlock.getAsRGBA().buffer)}};u._createClass(h,[{key:"width",get:function(){return n.isSome(this.pixelBlock)?this.pixelBlock.width:0}},{key:"height",get:function(){return n.isSome(this.pixelBlock)?this.pixelBlock.height:0}}]);return h}()})},"esri/views/2d/engine/BitmapContainer":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","./brushes","./webgl/enums","./webgl/WGLContainer"],
function(u,n,h,r,v){v=function(z){function p(){return z.apply(this,arguments)||this}n._inheritsLoose(p,z);p.prototype.prepareRenderPasses=function(g){const e=g.registerRenderPass({name:"bitmap",brushes:[h.brushes.bitmap],target:()=>this.children,drawPhase:r.WGLDrawPhase.MAP});return[...z.prototype.prepareRenderPasses.call(this,g),e]};n._createClass(p,[{key:"requiresDedicatedFBO",get:function(){return this.children.some(g=>"additive"===g.blendFunction)}}]);return p}(v);u.BitmapContainer=v;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/BitmapTile":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/mat3f32","./Bitmap","./webgl/TiledDisplayObject"],function(u,n,h,r,v){v=function(z){function p(e,b,a,c,d,f=null){var l=z.call(this,e,b,a,c,d)||this;l.bitmap=new r.Bitmap(f,"standard",!1);l.bitmap.coordScale=[c,d];l.bitmap.once("isReady",()=>l.ready());return l}n._inheritsLoose(p,z);var g=p.prototype;g.destroy=
function(){z.prototype.destroy.call(this);this.bitmap.destroy()};g.beforeRender=function(e){z.prototype.beforeRender.call(this,e);this.bitmap.beforeRender(e)};g.afterRender=function(e){z.prototype.afterRender.call(this,e);this.bitmap.afterRender(e)};g._createTransforms=function(){return{dvs:h.create(),tileMat3:h.create()}};g.setTransform=function(e,b){z.prototype.setTransform.call(this,e,b);this.bitmap.transforms.dvs=this.transforms.dvs};g.onAttach=function(){this.bitmap.stage=this.stage};g.onDetach=
function(){this.bitmap&&(this.bitmap.stage=null)};n._createClass(p,[{key:"stencilRef",get:function(){return this.bitmap.stencilRef},set:function(e){this.bitmap.stencilRef=e}}]);return p}(v.TiledDisplayObject);u.BitmapTile=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/BitmapTileContainer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/aaBoundingRect ./BitmapTile ./brushes ./webgl/enums ./webgl/TileContainer".split(" "),
function(u,n,h,r,v,z,p){p=function(g){function e(){return g.apply(this,arguments)||this}n._inheritsLoose(e,g);var b=e.prototype;b.createTile=function(a){const c=this._tileInfoView.getTileBounds(h.create(),a),[d,f]=this._tileInfoView.tileInfo.size;return new r.BitmapTile(a,c[0],c[3],d,f)};b.prepareRenderPasses=function(a){const c=a.registerRenderPass({name:"bitmap (tile)",brushes:[v.brushes.bitmap],target:()=>this.children.map(d=>d.bitmap),drawPhase:z.WGLDrawPhase.MAP});return[...g.prototype.prepareRenderPasses.call(this,
a),c]};b.doRender=function(a){this.visible&&a.drawPhase===z.WGLDrawPhase.MAP&&g.prototype.doRender.call(this,a)};n._createClass(e,[{key:"requiresDedicatedFBO",get:function(){return this.children.some(a=>"additive"===a.bitmap.blendFunction)}}]);return e}(p);u.BitmapTileContainer=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/TileLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/HandleOwner ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISMapService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./support/arcgisLayerUrl ./support/commonProperties ./support/Sublayer".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K){const P="Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Elevation/World_Hillshade_Dark Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" ");
v=function(L){function M(...R){R=L.call(this,...R)||this;R.listMode="show";R.isReference=null;R.operationalLayerType="ArcGISTiledMapServiceLayer";R.resampling=!0;R.sourceJSON=null;R.spatialReference=null;R.path=null;R.sublayers=null;R.type="tile";R.url=null;return R}u._inheritsLoose(M,L);var J=M.prototype;J.normalizeCtorArgs=function(R,X){return"string"===typeof R?{url:R,...X}:R};J.load=function(R){const X=z.isSome(R)?R.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},
R).catch(g.throwIfAbortError).then(()=>this._fetchService(X)));return Promise.resolve(this)};J.readSpatialReference=function(R,X){return(R=R||X.tileInfo&&X.tileInfo.spatialReference)&&k.fromJSON(R)};J.writeSublayers=function(R,X,U,V){if(this.loaded&&R){R=R.slice().reverse().flatten(({sublayers:fa})=>fa&&fa.toArray().reverse()).toArray();var Q=[],Y={writeSublayerStructure:!1,...V};R.forEach(fa=>{fa=fa.write({},Y);Q.push(fa)});Q.some(fa=>1<Object.keys(fa).length)&&(X.layers=Q)}};J.castTileServers=function(R){return Array.isArray(R)?
R.map(X=>e.urlToObject(X).path):null};J.fetchTile=function(R,X,U,V={}){({signal:V}=V);R=this.getTileUrl(R,X,U);return h(R,{responseType:"image",signal:V,query:{...this.refreshParameters}}).then(Q=>Q.data)};J.getTileUrl=function(R,X,U){const V=e.objectToQuery({...this.parsedUrl.query,blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null,...this.customParameters,token:this.apiKey}),Q=this.tileServers;return`${Q&&Q.length?Q[X%Q.length]:this.parsedUrl.path}/tile/${R}/${X}/${U}${V?"?"+V:""}`};J._fetchService=
function(R){return(new Promise((X,U)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new r("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");X({data:this.sourceJSON})}else{if(!this.parsedUrl)throw new r("tile-layer:undefined-url","layer's url is not defined");var V=O.parse(this.parsedUrl.path);if(z.isSome(V)&&"ImageServer"===V.serverType)throw new r("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");
h(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:R}).then(X,U)}})).then(X=>{X.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));this.sourceJSON=X.data;this.read(X.data,{origin:"service",url:this.parsedUrl});if(10.1===this.version&&!O.isHostedAgolService(this.url))return this._fetchServerVersion(this.url,R).then(U=>{this.read({currentVersion:U})}).catch(()=>{})})};J._fetchServerVersion=function(R,X){if(!O.isArcGISUrl(R))return Promise.reject();
R=R.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return h(R,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:X}).then(U=>{if(U.data&&U.data.currentVersion)return U.data.currentVersion;throw new r("tile-layer:version-not-available");})};J._getMapName=function(R){return(R=R.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&R[2]};J._getDefaultAttribution=
function(R){if(R){R=R.toLowerCase();for(let U=0,V=P.length;U<V;U++){var X=P[U];if(X.toLowerCase().includes(R))return e.makeAbsolute("//static.arcgis.com/attribution/"+X)}}};J._getDefaultTileServers=function(R){const X=-1!==R.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),U=-1!==R.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return X||U?[R,R.replace(X?/server\.arcgisonline/i:/services\.arcgisonline/i,X?"services.arcgisonline":"server.arcgisonline")]:[]};u._createClass(M,[{key:"attributionDataUrl",
get:function(){var R;const X=null==(R=this.parsedUrl)?void 0:R.path.toLowerCase();return X&&this._getDefaultAttribution(this._getMapName(X))}},{key:"tileServers",get:function(){return this._getDefaultTileServers(this.parsedUrl.path)}},{key:"hasOverriddenFetchTile",get:function(){return!this.fetchTile.__isDefault__}}]);return M}(y.BlendLayer(G.SublayersOwner(E.ScaleRangeLayer(C.OperationalLayer(D.PortalLayer(w.ArcGISCachedService(A.ArcGISMapService(x.ArcGISService(p.MultiOriginJSONMixin(v.HandleOwnerMixin(F.RefreshableLayer(t.APIKeyMixin(B.CustomParametersMixin(q))))))))))))));
n.__decorate([b.property({readOnly:!0})],v.prototype,"attributionDataUrl",null);n.__decorate([b.property({type:["show","hide","hide-children"]})],v.prototype,"listMode",void 0);n.__decorate([b.property({json:{read:!0,write:!0}})],v.prototype,"blendMode",void 0);n.__decorate([b.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],v.prototype,"isReference",void 0);n.__decorate([b.property({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],v.prototype,"operationalLayerType",
void 0);n.__decorate([b.property({type:Boolean})],v.prototype,"resampling",void 0);n.__decorate([b.property()],v.prototype,"sourceJSON",void 0);n.__decorate([b.property({type:k})],v.prototype,"spatialReference",void 0);n.__decorate([f.reader("spatialReference",["spatialReference","tileInfo"])],v.prototype,"readSpatialReference",null);n.__decorate([b.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],v.prototype,"path",void 0);n.__decorate([b.property({readOnly:!0})],
v.prototype,"sublayers",void 0);n.__decorate([m.writer("sublayers",{layers:{type:[K]}})],v.prototype,"writeSublayers",null);n.__decorate([b.property({json:{read:!1,write:!1}})],v.prototype,"popupEnabled",void 0);n.__decorate([b.property()],v.prototype,"tileServers",null);n.__decorate([d.cast("tileServers")],v.prototype,"castTileServers",null);n.__decorate([b.property({readOnly:!0,json:{read:!1}})],v.prototype,"type",void 0);n.__decorate([b.property(H.url)],v.prototype,"url",void 0);v=n.__decorate([l.subclass("esri.layers.TileLayer")],
v);v.prototype.fetchTile.__isDefault__=!0;return v})},"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/serviceTileInfoProperty ../support/TilemapCache ../../geometry/SpatialReference".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){u.ArcGISCachedService=f=>{f=function(l){function m(){var q=l.apply(this,arguments)||this;q.copyright=null;q.minScale=0;q.maxScale=0;q.spatialReference=null;q.tileInfo=null;q.tilemapCache=null;return q}n._inheritsLoose(m,l);var k=m.prototype;k.readMinScale=function(q,t){return null!=t.minLOD&&null!=t.maxLOD?q:0};k.readMaxScale=function(q,t){return null!=t.minLOD&&null!=t.maxLOD?q:0};k.readTilemapCache=function(q,t){return t.capabilities&&t.capabilities.includes("Tilemap")?
new c.TilemapCache({layer:this}):null};n._createClass(m,[{key:"supportsBlankTile",get:function(){return 10.2<=this.version}}]);return m}(f);h.__decorate([v.property({json:{read:{source:"copyrightText"}}})],f.prototype,"copyright",void 0);h.__decorate([v.property()],f.prototype,"minScale",void 0);h.__decorate([e.reader("service","minScale")],f.prototype,"readMinScale",null);h.__decorate([v.property()],f.prototype,"maxScale",void 0);h.__decorate([e.reader("service","maxScale")],f.prototype,"readMaxScale",
null);h.__decorate([v.property({type:d})],f.prototype,"spatialReference",void 0);h.__decorate([v.property({readOnly:!0})],f.prototype,"supportsBlankTile",null);h.__decorate([v.property(a.serviceTileInfoProperty)],f.prototype,"tileInfo",void 0);h.__decorate([v.property()],f.prototype,"tilemapCache",void 0);h.__decorate([e.reader("service","tilemapCache",["capabilities"])],f.prototype,"readTilemapCache",null);h.__decorate([v.property()],f.prototype,"version",void 0);return f=h.__decorate([b.subclass("esri.layers.mixins.ArcGISCachedService")],
f)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(u,n){function h(v,z,p,g){if(!v)return null;const {minScale:e,maxScale:b,minLOD:a,maxLOD:c}=z;if(null!=a&&null!=c)return g&&g.ignoreMinMaxLOD?n.fromJSON(v):n.fromJSON({...v,lods:v.lods.filter(({level:d})=>null!=d&&d>=a&&d<=c)});if(0!==e&&0!==b){const d=e?Math.round(1E4*e)/1E4:Infinity,f=b?Math.round(1E4*b)/
1E4:-Infinity;return n.fromJSON({...v,lods:v.lods.filter(l=>{l=Math.round(1E4*l.scale)/1E4;return l<=d&&l>=f})})}return n.fromJSON(v)}const r={type:n,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:h}}}}};u.readServiceTileInfo=h;u.serviceTileInfoProperty=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t){var w;h=new h.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});r=w=function(A){function x(B){B=A.call(this,B)||this;B.dpi=96;B.format=null;B.origin=null;B.minScale=0;B.maxScale=0;B.size=null;B.spatialReference=null;return B}u._inheritsLoose(x,A);x.create=function(B=
{}){const {resolutionFactor:C=1,scales:D,size:F=256,spatialReference:E=l.WebMercator,numLODs:G=24}=B;if(!k.isValid(E)){B=[];if(D)for(var O=0;O<D.length;O++){var H=D[O];B.push({level:O,scale:H,resolution:H})}else for(O=5E-4,H=G-1;0<=H;H--)B.unshift({level:H,scale:O,resolution:O}),O*=2;return new w({dpi:96,lods:B,origin:new f(0,0,E),size:[F,F],spatialReference:E})}O=k.getInfo(E);B=B.origin?new f({x:B.origin.x,y:B.origin.y,spatialReference:E}):O?new f({x:O.origin[0],y:O.origin[1],spatialReference:E}):
new f({x:0,y:0,spatialReference:E});O=1/(39.37*z.getMetersPerUnitForSR(E)*96);H=[];if(D)for(var K=0;K<D.length;K++){var P=D[K];H.push({level:K,scale:P,resolution:P*O})}else{var L=k.isGeographic(E)?512/F*5.916575275917094E8:256/F*5.91657527591555E8;K=Math.ceil(G/C);H.push({level:0,scale:L,resolution:L*O});for(P=1;P<K;P++)L/=2**C,H.push({level:P,scale:L,resolution:L*O})}return new w({dpi:96,lods:H,origin:B,size:[F,F],spatialReference:E})};var y=x.prototype;y.readOrigin=function(B,C){return f.fromJSON({spatialReference:C.spatialReference,
...B})};y.readSize=function(B,C){return[C.cols,C.rows]};y.writeSize=function(B,C){C.cols=B[0];C.rows=B[1]};y.zoomToScale=function(B){const C=this.scales;if(0>=B)return C[0];if(B>=C.length-1)return C[C.length-1];{const D=Math.floor(B);return C[D]/(C[D]/C[D+1])**(B-D)}};y.scaleToZoom=function(B){const C=this.scales,D=C.length-1;let F=0;for(;F<D;F++){const E=C[F],G=C[F+1];if(E<=B)break;if(G===B)return F+1;if(E>B&&G<B)return F+Math.log(E/B)/Math.log(E/G)}return F};y.snapScale=function(B,C=.95){B=this.scaleToZoom(B);
return B%Math.floor(B)>=C?this.zoomToScale(Math.ceil(B)):this.zoomToScale(Math.floor(B))};y.tileAt=function(B,C,D,F){var E=this.lodAt(B);if(!E)return null;let G;if("number"===typeof C)G=C,C=D;else{if(k.equals(C.spatialReference,this.spatialReference))G=C.x,C=C.y;else{F=q.project(C,this.spatialReference);if(v.isNone(F))return null;G=F.x;C=F.y}F=D}D=E.resolution*this.size[0];E=E.resolution*this.size[1];F||(F={id:null,level:0,row:0,col:0,extent:m.create()});F.level=B;F.row=Math.floor((this.origin.y-
C)/E+.001);F.col=Math.floor((G-this.origin.x)/D+.001);this.updateTileInfo(F);return F};y.updateTileInfo=function(B,C=w.ExtrapolateOptions.NONE){var D=this.lodAt(B.level);D||C!==w.ExtrapolateOptions.POWER_OF_TWO||(C=this.lods[this.lods.length-1],C.level<B.level&&(D=C));if(D){var F=B.level-D.level;C=D.resolution*this.size[0]/2**F;D=D.resolution*this.size[1]/2**F;B.id=`${B.level}/${B.row}/${B.col}`;B.extent||(B.extent=m.create());B.extent[0]=this.origin.x+B.col*C;B.extent[1]=this.origin.y-(B.row+1)*
D;B.extent[2]=B.extent[0]+C;B.extent[3]=B.extent[1]+D}};y.upsampleTile=function(B){const C=this._upsampleLevels[B.level];if(!C||-1===C.parentLevel)return!1;B.level=C.parentLevel;B.row=Math.floor(B.row/C.factor+.001);B.col=Math.floor(B.col/C.factor+.001);this.updateTileInfo(B);return!0};y.getTileBounds=function(B,C){var {resolution:D}=this.lodAt(C.level);const F=D*this.size[0];D*=this.size[1];B[0]=this.origin.x+C.col*F;B[1]=this.origin.y-(C.row+1)*D;B[2]=B[0]+F;B[3]=B[1]+D;return B};y.lodAt=function(B){return this._levelToLOD&&
this._levelToLOD[B]||null};y.clone=function(){return w.fromJSON(this.write({}))};y.getOrCreateCompatible=function(B,C){if(256===this.size[0]&&256===this.size[1])return 256===B?this:null;const D=[],F=this.lods.length;for(let E=0;E<F;E++){const G=this.lods[E];D.push(new t({level:G.level,scale:G.scale,resolution:G.resolution*C}))}return new w({size:[B,B],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:D})};y._initializeUpsampleLevels=
function(){const B=this.lods;this._upsampleLevels=[];let C=null;for(let D=0;D<B.length;D++){const F=B[D];this._upsampleLevels[F.level]={parentLevel:C?C.level:-1,factor:C?C.resolution/F.resolution:0};C=F}};u._createClass(x,[{key:"isWrappable",get:function(){const {spatialReference:B,origin:C}=this;if(B&&C){const D=k.getInfo(B);return B.isWrappable&&Math.abs(D.origin[0]-C.x)<=D.dx}return!1}},{key:"lods",set:function(B){let C=0,D=0;const F=[];this._levelToLOD={};B&&(C=-Infinity,D=Infinity,B.forEach(E=>
{F.push(E.scale);C=E.scale>C?E.scale:C;D=E.scale<D?E.scale:D;this._levelToLOD[E.level]=E}));this._set("scales",F);this._set("minScale",C);this._set("maxScale",D);this._set("lods",B);this._initializeUpsampleLevels()}}]);return x}(r.JSONSupport);n.__decorate([p.property({type:Number,json:{write:!0}})],r.prototype,"compressionQuality",void 0);n.__decorate([p.property({type:Number,json:{write:!0}})],r.prototype,"dpi",void 0);n.__decorate([p.property({type:String,json:{read:h.read,write:h.write,origins:{"web-scene":{read:!1,
write:!1}}}})],r.prototype,"format",void 0);n.__decorate([p.property({readOnly:!0})],r.prototype,"isWrappable",null);n.__decorate([p.property({type:f,json:{write:!0}})],r.prototype,"origin",void 0);n.__decorate([a.reader("origin")],r.prototype,"readOrigin",null);n.__decorate([p.property({type:[t],value:null,json:{write:!0}})],r.prototype,"lods",null);n.__decorate([p.property({readOnly:!0})],r.prototype,"minScale",void 0);n.__decorate([p.property({readOnly:!0})],r.prototype,"maxScale",void 0);n.__decorate([p.property({readOnly:!0})],
r.prototype,"scales",void 0);n.__decorate([p.property({cast:A=>Array.isArray(A)?A:"number"===typeof A?[A,A]:[256,256]})],r.prototype,"size",void 0);n.__decorate([a.reader("size",["rows","cols"])],r.prototype,"readSize",null);n.__decorate([d.writer("size",{cols:{type:b.Integer},rows:{type:b.Integer}})],r.prototype,"writeSize",null);n.__decorate([p.property({type:l,json:{write:!0}})],r.prototype,"spatialReference",void 0);r=w=n.__decorate([c.subclass("esri.layers.support.TileInfo")],r);(function(A){A=
A.ExtrapolateOptions||(A.ExtrapolateOptions={});A[A.NONE=0]="NONE";A[A.POWER_OF_TWO=1]="POWER_OF_TWO"})(r||(r={}));return r})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g){var e;h=e=function(b){function a(c){c=
b.call(this,c)||this;c.cols=null;c.level=0;c.levelValue=null;c.origin=null;c.resolution=0;c.rows=null;c.scale=0;return c}u._inheritsLoose(a,b);a.prototype.clone=function(){return new e({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return a}(h.JSONSupport);n.__decorate([r.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],h.prototype,"cols",void 0);n.__decorate([r.property({type:p.Integer,
json:{write:!0}})],h.prototype,"level",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"levelValue",void 0);n.__decorate([r.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],h.prototype,"origin",void 0);n.__decorate([r.property({type:Number,json:{write:!0}})],h.prototype,"resolution",void 0);n.__decorate([r.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],h.prototype,
"rows",void 0);n.__decorate([r.property({type:Number,json:{write:!0}})],h.prototype,"scale",void 0);return h=e=n.__decorate([g.subclass("esri.layers.support.LOD")],h)})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/byteSizeEstimations ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./Tilemap".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A){var x;const y=e.getLogger("esri.layers.support.TilemapCache");u.TilemapCache=x=function(B){function C(F){F=B.call(this,F)||this;F._pendingTilemapRequests={};F._availableLevels={};F.levels=5;F.cacheByteSize=2*z.ByteSizeUnit.MEGABYTES;F.request=r;F._prefetchingEnabled=!0;return F}n._inheritsLoose(C,B);var D=C.prototype;D.initialize=function(){this._tilemapCache=new b(this.cacheByteSize);this.own([d.watch(()=>{const {layer:F}=this;return[null==F?void 0:
F.parsedUrl,null==F?void 0:F.tileServers,null==F?void 0:F.apiKey,null==F?void 0:F.customParameters]},()=>this._initializeTilemapDefinition()),d.watch(()=>{var F,E;return null==(F=this.layer)?void 0:null==(E=F.tileInfo)?void 0:E.lods},F=>this._initializeAvailableLevels(F),d.syncAndInitial)]);this._initializeTilemapDefinition()};D.castLevels=function(F){return 2>=F?(y.error("Minimum levels for Tilemap is 3, but got ",F),3):F};D.fetchTilemap=function(F,E,G,O){if(!this._availableLevels[F])return Promise.reject(new p("tilemap-cache:level-unavailable",
`Level ${F} is unavailable in the service`));const H=this._tmpTilemapDefinition;if(F=this._tilemapFromCache(F,E,G,H))return Promise.resolve(F);const K=O&&O.signal;O={...O,signal:null};return new Promise((P,L)=>{c.onAbort(K,()=>L(c.createAbortError()));const M=A.tilemapDefinitionId(H);let J=this._pendingTilemapRequests[M];if(!J){J=A.Tilemap.fromDefinition(H,O).then(X=>{this._tilemapCache.put(M,X,X.byteSize);return X});const R=()=>delete this._pendingTilemapRequests[M];this._pendingTilemapRequests[M]=
J;J.then(R,R)}J.then(P,L)})};D.getAvailability=function(F,E,G){return this._availableLevels[F]?(F=this._tilemapFromCache(F,E,G,this._tmpTilemapDefinition))?F.getAvailability(E,G):"unknown":"unavailable"};D.fetchAvailability=function(F,E,G,O){return this._availableLevels[F]?this.fetchTilemap(F,E,G,O).catch(H=>H).then(H=>{if(H instanceof A.Tilemap){H=H.getAvailability(E,G);if("unavailable"===H)throw new p("tile-map:tile-unavailable","Tile is not available",{level:F,row:E,col:G});return H}if(c.isAbortError(H))throw H;
return"unknown"}):Promise.reject(new p("tilemap-cache:level-unavailable",`Level ${F} is unavailable in the service`))};D.fetchAvailabilityUpsample=function(F,E,G,O,H){O.level=F;O.row=E;O.col=G;const K=this.layer.tileInfo;K.updateTileInfo(O);const P=this.fetchAvailability(F,E,G,H).catch(L=>{if(c.isAbortError(L))throw L;if(K.upsampleTile(O))return this.fetchAvailabilityUpsample(O.level,O.row,O.col,O);throw L;});this._fetchAvailabilityUpsamplePrefetch(O.id,F,E,G,H,P);return P};D._fetchAvailabilityUpsamplePrefetch=
function(){var F=n._asyncToGenerator(function*(E,G,O,H,K,P){if(this._prefetchingEnabled){var L=`prefetch-${E}`;if(!this.handles.has(L)){var M=new AbortController;P.then(()=>M.abort(),()=>M.abort());var J=!1;this.handles.add({remove(){J||(J=!0,M.abort())}},L);yield f.waitTicks(10,M.signal).catch(()=>{});J||(J=!0,this.handles.remove(L));if(!c.isAborted(M))for(E={id:E,level:G,row:O,col:H},K={...K,signal:M.signal},G=this.layer.tileInfo,O=0;x._prefetches.length<x._maxPrefetch&&G.upsampleTile(E);++O){const R=
this.fetchAvailability(E.level,E.row,E.col,K);x._prefetches.push(R);H=()=>{x._prefetches.removeUnordered(R)};R.then(H,H)}}}});return function(E,G,O,H,K,P){return F.apply(this,arguments)}}();D._initializeTilemapDefinition=function(){var F;if(this.layer.parsedUrl){var {parsedUrl:E,apiKey:G,customParameters:O}=this.layer;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:E.path,query:l.objectToQuery({...E.query,...O,token:null!=G?G:null==(F=E.query)?void 0:F.token}),tileServers:this.layer.tileServers,
request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};D._tilemapFromCache=function(F,E,G,O){O.level=F;O.row=E-E%this.size;O.col=G-G%this.size;F=A.tilemapDefinitionId(O);return this._tilemapCache.get(F)};D._initializeAvailableLevels=function(F){this._availableLevels={};F&&F.forEach(E=>this._availableLevels[E.level]=!0)};n._createClass(C,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const F=this;return{get prefetchingEnabled(){return F._prefetchingEnabled},
set prefetchingEnabled(E){F._prefetchingEnabled=E},hasTilemap(E,G,O){return!!F._tilemapFromCache(E,G,O,F._tmpTilemapDefinition)}}}}]);return C}(g.HandleOwnerMixin(v));u.TilemapCache._maxPrefetch=4;u.TilemapCache._prefetches=new a({initialSize:x._maxPrefetch});h.__decorate([m.property({constructOnly:!0,type:Number})],u.TilemapCache.prototype,"levels",void 0);h.__decorate([t.cast("levels")],u.TilemapCache.prototype,"castLevels",null);h.__decorate([m.property({readOnly:!0,type:Number})],u.TilemapCache.prototype,
"size",null);h.__decorate([m.property({constructOnly:!0,type:Number})],u.TilemapCache.prototype,"cacheByteSize",void 0);h.__decorate([m.property({constructOnly:!0})],u.TilemapCache.prototype,"layer",void 0);h.__decorate([m.property({constructOnly:!0})],u.TilemapCache.prototype,"request",void 0);u.TilemapCache=x=h.__decorate([w.subclass("esri.layers.support.TilemapCache")],u.TilemapCache);Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],
function(u){function n(h){return 32+h.length}u.ByteSizeUnit=void 0;(function(h){h[h.KILOBYTES=1024]="KILOBYTES";h[h.MEGABYTES=1048576]="MEGABYTES";h[h.GIGABYTES=1073741824]="GIGABYTES"})(u.ByteSizeUnit||(u.ByteSizeUnit={}));u.estimateAttributesObjectSize=function(h){if(!h)return 0;let r=32;for(const v in h)if(h.hasOwnProperty(v)){const z=h[v];switch(typeof z){case "string":r+=n(z);break;case "number":r+=16;break;case "boolean":r+=4}}return r};u.estimateFixedArraySize=function(h,r){return 32+h.length*
r};u.estimateNumberByteSize=function(){return 16};u.estimateStringByteSize=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Tilemap":function(){define(["exports","../../request","../../core/arrayUtils","../../core/Error","../../core/lang"],function(u,n,h,r,v){function z(g){if("vector-tile"===g.service.type)var e=`${g.service.url}/tilemap/${g.level}/${g.row}/${g.col}/${g.width}/${g.height}`;else e=g.service.tileServers,e=`${e&&e.length?
e[g.row%e.length]:g.service.url}/tilemap/${g.level}/${g.row}/${g.col}/${g.width}/${g.height}`;(g=g.service.query)&&(e=`${e}?${g}`);return e}let p=function(){function g(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var e=g.prototype;e.getAvailability=function(b,a){if("unknown"!==this._allAvailability)return this._allAvailability;b=(b-this.location.top)*this.location.width+(a-this.location.left);a=b>>3;const c=this._tileAvailabilityBitSet;return 0>
a||a>c.length?"unknown":c[a]&1<<b%8?"available":"unavailable"};e._updateFromData=function(b){let a=!0,c=!0;const d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let f=0;for(let l=0;l<b.length;l++){const m=l%8;b[l]?(c=!1,d[f]|=1<<m):a=!1;7===m&&++f}c?this._allAvailability="unavailable":a?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=d,this.byteSize+=d.length)};g.fromDefinition=function(b,a){const c=b.service.request||n,{row:d,
col:f,width:l,height:m}=b,k={query:{f:"json"}};a=a?{...k,...a}:k;return c(z(b),a).then(q=>q.data).catch(q=>{if(q&&q.details&&422===q.details.httpStatus)return{location:{top:d,left:f,width:l,height:m},valid:!0,data:h.constant(l*m,0)};throw q;}).then(q=>{if(q.location&&(q.location.top!==d||q.location.left!==f||q.location.width!==l||q.location.height!==m))throw new r("tilemap:location-mismatch","Tilemap response for different location than requested",{response:q,definition:{top:d,left:f,width:l,height:m}});
return g.fromJSON(q)})};g.fromJSON=function(b){g._validateJSON(b);const a=new g;a.location=Object.freeze(v.clone(b.location));a._updateFromData(b.data);return Object.freeze(a)};g._validateJSON=function(b){if(!b||!b.location)throw new r("tilemap:missing-location","Location missing from tilemap response");if(!1===b.valid)throw new r("tilemap:invalid","Tilemap response was marked as invalid");if(!b.data)throw new r("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(b.data))throw new r("tilemap:data-mismatch",
"Data must be an array of numbers");if(b.data.length!==b.location.width*b.location.height)throw new r("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return g}();u.Tilemap=p;u.tilemapDefinitionId=function(g){return`${g.level}/${g.row}/${g.col}/${g.width}/${g.height}`};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/mixins/ArcGISMapService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/promiseUtils ../../core/urlUtils ../../core/Version ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../support/commonProperties".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m){u.ArcGISMapService=k=>{k=function(q){function t(){var A=q.apply(this,arguments)||this;A.capabilities=void 0;A.copyright=null;A.fullExtent=null;A.legendEnabled=!0;A.spatialReference=null;A.version=void 0;return A}n._inheritsLoose(t,q);var w=t.prototype;w.readCapabilities=function(A,x){var y,B,C=x.capabilities&&x.capabilities.split(",").map(M=>M.toLowerCase().trim());if(!C)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,
supportsTileMap:!1},exportMap:null,exportTiles:null};var D=this.type;A=C.includes("data");const F=C.includes("query"),E=C.includes("map"),G=!!x.exportTilesAllowed;C=C.includes("tilemap");const O="tile"!==D&&!!x.supportsDynamicLayers,H="tile"!==D&&(!x.tileInfo||O),K="tile"!==D&&(!x.tileInfo||O);D="tile"!==D;const P=x.cimVersion&&p.Version.parse(x.cimVersion),L=null!=(y=null==P?void 0:P.since(1,4))?y:!1;y=null!=(B=null==P?void 0:P.since(2,0))?B:!1;return{operations:{supportsExportMap:E,supportsExportTiles:G,
supportsIdentify:F,supportsQuery:A,supportsTileMap:C},exportMap:E?{supportsArcadeExpressionForLabeling:L,supportsSublayersChanges:D,supportsDynamicLayers:O,supportsSublayerVisibility:H,supportsSublayerDefinitionExpression:K,supportsCIMSymbols:y}:null,exportTiles:G?{maxExportTilesCount:+x.maxExportTilesCount}:null}};w.readVersion=function(A,x){(A=x.currentVersion)||(A=x.hasOwnProperty("capabilities")||x.hasOwnProperty("tables")?10:x.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return A};w.fetchSublayerInfo=
function(){var A=n._asyncToGenerator(function*(x,y){yield this.fetchAllLayersAndTables(y);return this._allLayersAndTablesMap.get(x)});return function(x,y){return A.apply(this,arguments)}}();w.fetchAllLayersAndTables=function(){var A=n._asyncToGenerator(function*(x){yield this.load(x);this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=r(z.urlToObject(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(B=>{this._allLayersAndTablesMap=
new Map;for(const C of B.data.layers)this._allLayersAndTablesMap.set(C.id,C);return{result:B.data}},B=>({error:B})));const y=yield this._allLayersAndTablesPromise;v.throwIfAborted(x);if("result"in y)return y.result;throw y.error;});return function(x){return A.apply(this,arguments)}}();return t}(k);h.__decorate([g.property({readOnly:!0})],k.prototype,"capabilities",void 0);h.__decorate([c.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers",
"tileInfo"])],k.prototype,"readCapabilities",null);h.__decorate([g.property({json:{read:{source:"copyrightText"}}})],k.prototype,"copyright",void 0);h.__decorate([g.property({type:f})],k.prototype,"fullExtent",void 0);h.__decorate([g.property(m.id)],k.prototype,"id",void 0);h.__decorate([g.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],k.prototype,"legendEnabled",void 0);h.__decorate([g.property(m.popupEnabled)],k.prototype,
"popupEnabled",void 0);h.__decorate([g.property({type:l})],k.prototype,"spatialReference",void 0);h.__decorate([g.property({readOnly:!0})],k.prototype,"version",void 0);h.__decorate([c.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],k.prototype,"readVersion",null);return k=h.__decorate([d.subclass("esri.layers.mixins.ArcGISMapService")],k)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/Version":function(){define(["exports",
"./Error"],function(u,n){let h=function(){function r(z,p,g=""){this.major=z;this.minor=p;this._context=g}var v=r.prototype;v.lessThan=function(z,p){return this.major<z||z===this.major&&this.minor<p};v.since=function(z,p){return!this.lessThan(z,p)};v.validate=function(z){if(this.major!==z.major)throw new n((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:z});
};v.clone=function(){return new r(this.major,this.minor,this._context)};r.parse=function(z,p=""){const [g,e]=z.split(".");var b=/^\s*\d+\s*$/;if(!g||!g.match||!g.match(b))throw new n((p&&p+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:z});if(!e||!e.match||!e.match(b))throw new n((p&&p+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:z});z=parseInt(g,10);b=parseInt(e,10);return new r(z,b,p)};return r}();u.Version=
h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/mixins/SublayersOwner":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/CollectionFlattener ../../core/Error ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/utils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/PropertyOrigin ../support/Sublayer ../support/sublayerUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){function q(x,y){const B=[],C={};if(!x)return B;x.forEach(D=>{const F=new m;F.read(D,y);C[F.id]=F;null!=D.parentLayerId&&-1!==D.parentLayerId?(D=C[D.parentLayerId],D.sublayers||(D.sublayers=[]),D.sublayers.unshift(F)):B.unshift(F)});return B}function t(x,y){x&&x.forEach(B=>{y(B);B.sublayers&&B.sublayers.length&&t(B.sublayers,y)})}const w=p.getLogger("esri.layers.TileLayer"),A=r.ofType(m);u.SublayersOwner=x=>{x=function(y){function B(...D){var F=y.call(this,
...D)||this;F.allSublayers=new v({getCollections:()=>[F.sublayers],getChildrenFunction(E){return E.sublayers}});F.sublayersSourceJSON={[l.OriginId.SERVICE]:{},[l.OriginId.PORTAL_ITEM]:{},[l.OriginId.WEB_SCENE]:{},[l.OriginId.WEB_MAP]:{}};F.own(g.watch(()=>F.sublayers,(E,G)=>F._handleSublayersChange(E,G),g.sync));return F}n._inheritsLoose(B,y);var C=B.prototype;C.readSublayers=function(D,F){if(F&&D){var {sublayersSourceJSON:E}=this,G=l.nameToId(F.origin);if(!(G<l.OriginId.SERVICE||(E[G]={context:F,
visibleLayers:D.visibleLayers||E[G].visibleLayers,layers:D.layers||E[G].layers},G>l.OriginId.SERVICE))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var {sublayers:O,origin:H}=this.createSublayersForOrigin("web-document");D=c.getProperties(this);D.setDefaultOrigin(H);this._set("sublayers",new A(O));D.setDefaultOrigin("user")}}};C.findSublayerById=function(D){return this.allSublayers.find(F=>F.id===D)};C.createServiceSublayers=function(){return this.createSublayersForOrigin("service").sublayers};
C.createSublayersForOrigin=function(D){const F="web-document"===D?l.nameToId("web-map"):l.nameToId(D);let E=l.OriginId.SERVICE;D=this.sublayersSourceJSON[l.OriginId.SERVICE].layers;let G=this.sublayersSourceJSON[l.OriginId.SERVICE].context,O=null;var H=[l.OriginId.PORTAL_ITEM,l.OriginId.WEB_SCENE,l.OriginId.WEB_MAP].filter(R=>R<=F);for(var K of H)H=this.sublayersSourceJSON[K],k.isSublayerOverhaul(H.layers)&&(E=K,D=H.layers,G=H.context,H.visibleLayers&&(O={visibleLayers:H.visibleLayers,context:H.context}));
K=[l.OriginId.PORTAL_ITEM,l.OriginId.WEB_SCENE,l.OriginId.WEB_MAP].filter(R=>R>E&&R<=F);let P=null;for(var L of K){const {layers:R,visibleLayers:X,context:U}=this.sublayersSourceJSON[L];R&&(P={layers:R,context:U});X&&(O={visibleLayers:X,context:U})}L=q(D,G);const M=new Map,J=new Set;if(P)for(const R of P.layers)M.set(R.id,R);if(O)for(const R of O.visibleLayers)J.add(R);t(L,R=>{P&&R.read(M.get(R.id),P.context);O&&R.read({defaultVisibility:J.has(R.id)},O.context)});return{origin:l.idToName(E),sublayers:new A({items:L})}};
C.read=function(D,F){y.prototype.read.call(this,D,F);this.readSublayers(D,F)};C._handleSublayersChange=function(D,F){F&&(F.forEach(E=>{E.parent=null;E.layer=null}),this.handles.remove("sublayers-owner"));D&&(D.forEach(E=>{E.parent=this;E.layer=this}),this.handles.add([D.on("after-add",({item:E})=>{E.parent=this;E.layer=this}),D.on("after-remove",({item:E})=>{E.parent=null;E.layer=null})],"sublayers-owner"),"tile"===this.type&&this.handles.add(D.on("before-changes",E=>{w.error(new z("tilelayer:sublayers-non-modifiable",
"ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this}));E.preventDefault()}),"sublayers-owner"))};return B}(x);h.__decorate([e.property({readOnly:!0})],x.prototype,"allSublayers",void 0);h.__decorate([e.property({readOnly:!0,type:r.ofType(m)})],x.prototype,"serviceSublayers",void 0);h.__decorate([e.property({value:null,type:A,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],x.prototype,"sublayers",void 0);h.__decorate([e.property({readOnly:!0})],x.prototype,"sublayersSourceJSON",
void 0);return x=h.__decorate([f.subclass("esri.layers.mixins.SublayersOwner")],x)};u.forEachSublayer=t;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Sublayer":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../PopupTemplate ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/PieChartRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../renderers/support/types ../../request ../../symbols ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/Identifiable ../../core/lang ../../core/Loadable ../../core/Logger ../../core/maybe ../../core/MultiOriginJSONSupport ../../core/sql ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/utils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ./arcgisLayerUrl ./FeatureType ./Field ./FieldsIndex ./LabelClass ./LayerFloorInfo ./source/DataLayerSource ./source/MapLayerSource ../../rest/support/Query ../../support/popupUtils ../../geometry/Extent".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M,J,R,X,U,V,Q,Y,fa,da,ca,la,ha){function S(Ha){return Ha&&"esriSMS"===Ha.type}function ea(Ha,ya,qa){var oa;Ha=this.originIdOf(ya)>=J.nameToId(qa.origin);return{ignoreOrigin:!0,allowNull:Ha,enabled:qa?"map-image"===(null==(oa=qa.layer)?void 0:oa.type)&&(qa.writeSublayerStructure||Ha):!1}}function ma(Ha,ya,qa){var oa;return{enabled:qa?"tile"===(null==(oa=qa.layer)?void 0:oa.type)&&this._isOverridden(ya):!1}}function sa(Ha,
ya,qa){return{ignoreOrigin:!0,enabled:qa&&qa.writeSublayerStructure||!1}}function ja(Ha,ya,qa){return{ignoreOrigin:!0,enabled:qa?qa.writeSublayerStructure||this.originIdOf(ya)>=J.nameToId(qa.origin):!1}}const wa=Ha=>Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"}));var Ja;const va=B.getLogger("esri.layers.support.Sublayer");let ra=0;const Ba=new Set;Ba.add("layer");Ba.add("parent");Ba.add("loaded");Ba.add("loadStatus");Ba.add("loadError");Ba.add("loadWarnings");
r=Ja=function(Ha){function ya(oa){oa=Ha.call(this,oa)||this;oa.capabilities=void 0;oa.fields=null;oa.fullExtent=null;oa.globalIdField=null;oa.legendEnabled=!0;oa.objectIdField=null;oa.popupEnabled=!0;oa.popupTemplate=null;oa.sourceJSON=null;oa.title=null;oa.typeIdField=null;oa.types=null;return oa}n._inheritsLoose(ya,Ha);var qa=ya.prototype;qa.load=function(){var oa=n._asyncToGenerator(function*(Aa){var Ka=this;this.addResolvingPromise(n._asyncToGenerator(function*(){var Wa;if(!Ka.layer&&!Ka.url)throw new t("sublayer:missing-layer",
"Sublayer can't be loaded without being part of a layer",{sublayer:Ka});let Pa=null;if(!Ka.layer||Ka.originIdOf("url")>J.OriginId.SERVICE||"data-layer"===(null==(Wa=Ka.source)?void 0:Wa.type))Pa=(yield m(Ka.url,{responseType:"json",query:{f:"json"},...Aa})).data;else{var Ta;Wa=Ka.id;"map-layer"===(null==(Ta=Ka.source)?void 0:Ta.type)&&(Wa=Ka.source.mapLayerId);Pa=yield Ka.layer.fetchSublayerInfo(Wa,Aa)}Pa&&(Ka.sourceJSON=Pa,Ka.read({layerDefinition:Pa},{origin:"service"}))})());return this});return function(Aa){return oa.apply(this,
arguments)}}();qa.readCapabilities=function(oa,Aa){Aa=Aa.layerDefinition||Aa;oa=(oa=Aa.capabilities||oa)?oa.toLowerCase().split(",").map(Wa=>Wa.trim()):[];const Ka=this.url?R.parse(this.url):null;oa=oa.includes(C.isSome(Ka)&&"MapServer"===Ka.serverType?"data":"query");return{exportMap:{supportsModification:!!Aa.canModifyLayer},operations:{supportsQuery:oa}}};qa.readGlobalIdFieldFromService=function(oa,Aa){Aa=Aa.layerDefinition||Aa;if(Aa.globalIdField)return Aa.globalIdField;if(Aa.fields)for(const Ka of Aa.fields)if("esriFieldTypeGlobalID"===
Ka.type)return Ka.name};qa.writeLabelingInfo=function(oa,Aa,Ka,Wa){oa&&oa.length&&(Aa.layerDefinition={drawingInfo:{labelingInfo:oa.map(Pa=>Pa.write({},Wa))}})};qa.readMinScale=function(oa,Aa){return Aa.minScale||Aa.layerDefinition&&Aa.layerDefinition.minScale||0};qa.readMaxScale=function(oa,Aa){return Aa.maxScale||Aa.layerDefinition&&Aa.layerDefinition.maxScale||0};qa.readObjectIdFieldFromService=function(oa,Aa){Aa=Aa.layerDefinition||Aa;if(Aa.objectIdField)return Aa.objectIdField;if(Aa.fields)for(const Ka of Aa.fields)if("esriFieldTypeOID"===
Ka.type)return Ka.name};qa.readOpacity=function(oa,Aa){oa=Aa.layerDefinition;return 1-.01*(null!=oa.transparency?oa.transparency:oa.drawingInfo.transparency)};qa.writeOpacity=function(oa,Aa,Ka,Wa){Aa.layerDefinition={drawingInfo:{transparency:100-100*oa}}};qa.writeParent=function(oa,Aa){Aa.parentLayerId=this.parent&&this.parent!==this.layer?M.ensureInteger(this.parent.id):-1};qa.castSublayers=function(oa){return M.ensureType(q.ofType(Ja),oa)};qa.writeSublayers=function(oa,Aa,Ka){this.get("sublayers.length")&&
(Aa[Ka]=this.sublayers.map(Wa=>Wa.id).toArray().reverse())};qa.readTypeIdField=function(oa,Aa){Aa=Aa.layerDefinition||Aa;let Ka=Aa.typeIdField;Ka&&Aa.fields&&(Ka=Ka.toLowerCase(),oa=Aa.fields.find(Wa=>Wa.name.toLowerCase()===Ka))&&(Ka=oa.name);return null};qa.writeVisible=function(oa,Aa,Ka,Wa){Aa[Ka]=this.getAtOrigin("defaultVisibility","service")||oa};qa.clone=function(){const {store:oa}=O.getProperties(this),Aa=new Ja;O.getProperties(Aa).store=oa.clone(Ba);this.commitProperty("url");Aa._lastParsedUrl=
this._lastParsedUrl;return Aa};qa.createPopupTemplate=function(oa){return la.createPopupTemplate(this,oa)};qa.createQuery=function(){return new ca({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};qa.createFeatureLayer=function(){var oa=n._asyncToGenerator(function*(){var Aa,Ka;if(this.hasOwnProperty("sublayers"))return null;const Wa=null==(Aa=this.layer)?void 0:Aa.parsedUrl;Aa=new (yield new Promise((Pa,Ta)=>u(["../FeatureLayer"],eb=>Pa(wa(eb)),Ta))).default({url:Wa.path});Wa&&this.source&&
("map-layer"===this.source.type?Aa.layerId=this.source.mapLayerId:Aa.dynamicDataSource=this.source);null!=this.layer.refreshInterval&&(Aa.refreshInterval=this.layer.refreshInterval);this.definitionExpression&&(Aa.definitionExpression=this.definitionExpression);this.floorInfo&&(Aa.floorInfo=x.clone(this.floorInfo));this.originIdOf("labelingInfo")>J.OriginId.SERVICE&&(Aa.labelingInfo=x.clone(this.labelingInfo));this.originIdOf("labelsVisible")>J.OriginId.DEFAULTS&&(Aa.labelsVisible=this.labelsVisible);
this.originIdOf("legendEnabled")>J.OriginId.DEFAULTS&&(Aa.legendEnabled=this.legendEnabled);this.originIdOf("visible")>J.OriginId.DEFAULTS&&(Aa.visible=this.visible);this.originIdOf("minScale")>J.OriginId.DEFAULTS&&(Aa.minScale=this.minScale);this.originIdOf("maxScale")>J.OriginId.DEFAULTS&&(Aa.maxScale=this.maxScale);this.originIdOf("opacity")>J.OriginId.DEFAULTS&&(Aa.opacity=this.opacity);this.originIdOf("popupTemplate")>J.OriginId.DEFAULTS&&(Aa.popupTemplate=x.clone(this.popupTemplate));this.originIdOf("renderer")>
J.OriginId.SERVICE&&(Aa.renderer=x.clone(this.renderer));"data-layer"===(null==(Ka=this.source)?void 0:Ka.type)&&(Aa.dynamicDataSource=this.source.clone());this.originIdOf("title")>J.OriginId.DEFAULTS&&(Aa.title=this.title);"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>J.OriginId.DEFAULTS&&(Aa.customParameters=this.layer.customParameters);"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>J.OriginId.DEFAULTS&&(Aa.customParameters=this.layer.customParameters);
return Aa});return function(){return oa.apply(this,arguments)}}();qa.getField=function(oa){return this.fieldsIndex.get(oa)};qa.getFeatureType=function(oa){const {typeIdField:Aa,types:Ka}=this;if(!Aa||!oa)return null;const Wa=oa.attributes?oa.attributes[Aa]:void 0;if(null==Wa)return null;let Pa=null;Ka.some(Ta=>{const {id:eb}=Ta;if(null==eb)return!1;eb.toString()===Wa.toString()&&(Pa=Ta);return!!Pa});return Pa};qa.getFieldDomain=function(oa,Aa){return(Aa=this.getFeatureType(Aa&&Aa.feature))&&(Aa=Aa.domains&&
Aa.domains[oa])&&"inherited"!==Aa.type?Aa:this._getLayerDomain(oa)};qa.queryFeatures=function(){var oa=n._asyncToGenerator(function*(Aa=this.createQuery(),Ka){var Wa,Pa,Ta,eb,Na,Sa;yield this.load();if(null==(Wa=this.capabilities)||null==(Pa=Wa.operations)||!Pa.supportsQuery)throw new t("Sublayer.queryFeatures","this layer doesn't support queries.");const [{executeQuery:$a},{default:gb}]=yield Promise.all([new Promise((Za,ab)=>u(["../../rest/query/operations/query"],Za,ab)),new Promise((Za,ab)=>u(["../../rest/support/FeatureSet"],
ub=>Za(wa(ub)),ab))]);Aa=yield $a(this.url,ca.from(Aa),null!=(Ta=null==(eb=this.layer)?void 0:eb.spatialReference)?Ta:null,{...Ka,query:{...null==(Na=this.layer)?void 0:Na.customParameters,token:null==(Sa=this.layer)?void 0:Sa.apiKey}});Ta=gb.fromJSON(Aa.data);if(null!=Ta&&Ta.features)for(const Za of Ta.features)Za.sourceLayer=this;return Ta});return function(){return oa.apply(this,arguments)}}();qa.toExportImageJSON=function(oa){var Aa;const Ka={id:this.id,source:(null==(Aa=this.source)?void 0:Aa.toJSON())||
{mapLayerId:this.id,type:"mapLayer"}};oa=F.sqlAnd(oa,this.definitionExpression);C.isSome(oa)&&(Ka.definitionExpression=oa);const Wa=["renderer","labelingInfo","opacity","labelsVisible"].reduce((Pa,Ta)=>{Pa[Ta]=this.originIdOf(Ta);return Pa},{});Object.keys(Wa).some(Pa=>Wa[Pa]>J.OriginId.SERVICE)&&(oa=Ka.drawingInfo={},Wa.renderer>J.OriginId.SERVICE&&(oa.renderer=this.renderer?this.renderer.toJSON():null),Wa.labelsVisible>J.OriginId.SERVICE&&(oa.showLabels=this.labelsVisible),this.labelsVisible&&Wa.labelingInfo>
J.OriginId.SERVICE&&(oa.labelingInfo=this.labelingInfo?this.labelingInfo.map(Pa=>Pa.write({},{origin:"service",layer:this.layer})):null,oa.showLabels=!0),Wa.opacity>J.OriginId.SERVICE&&(oa.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(oa.renderer));return Ka};qa._assignDefaultSymbolColors=function(oa){this._forEachSimpleMarkerSymbols(oa,Aa=>{Aa.color||"esriSMSX"!==Aa.style&&"esriSMSCross"!==Aa.style||(Aa.color=Aa.outline&&Aa.outline.color?Aa.outline.color:[0,0,0,0])})};qa._forEachSimpleMarkerSymbols=
function(oa,Aa){if(oa){const Ka="uniqueValueInfos"in oa?oa.uniqueValueInfos:"classBreakInfos"in oa?oa.classBreakInfos:[];for(const Wa of Ka)S(Wa.symbol)&&Aa(Wa.symbol);"symbol"in oa&&S(oa.symbol)&&Aa(oa.symbol);"defaultSymbol"in oa&&S(oa.defaultSymbol)&&Aa(oa.defaultSymbol)}};qa._setAndNotifyLayer=function(oa,Aa){const Ka=this.layer,Wa=this._get(oa);let Pa,Ta;switch(oa){case "definitionExpression":case "floorInfo":Pa="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":Pa=
"supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":Pa="supportsDynamicLayers",Ta="supportsModification"}const eb=O.getProperties(this).getDefaultOrigin();if("service"!==eb){if(Pa&&!1===this.get(`layer.capabilities.exportMap.${Pa}`)){this._logLockedError(oa,`capability not available 'layer.capabilities.exportMap.${Pa}'`);return}if(Ta&&!1===this.get(`capabilities.exportMap.${Ta}`)){this._logLockedError(oa,`capability not available 'capabilities.exportMap.${Ta}'`);
return}}"source"===oa&&"not-loaded"!==this.loadStatus?this._logLockedError(oa,"'source' can't be changed after calling sublayer.load()"):(this._set(oa,Aa),"service"!==eb&&Wa!==Aa&&Ka&&Ka.emit&&Ka.emit("sublayer-update",{propertyName:oa,target:this}))};qa._handleSublayersChange=function(oa,Aa){Aa&&(Aa.forEach(Ka=>{Ka.parent=null;Ka.layer=null}),this.handles.removeAll());oa&&(oa.forEach(Ka=>{Ka.parent=this;Ka.layer=this.layer}),this.handles.add([oa.on("after-add",({item:Ka})=>{Ka.parent=this;Ka.layer=
this.layer}),oa.on("after-remove",({item:Ka})=>{Ka.parent=null;Ka.layer=null}),oa.on("before-changes",Ka=>{const Wa=this.get("layer.capabilities.exportMap.supportsSublayersChanges");null==Wa||Wa||(va.error(new t("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),Ka.preventDefault())})]))};qa._logLockedError=function(oa,Aa){va.error(new t("sublayer:locked",`Property '${String(oa)}' can't be changed on Sublayer from the layer '${this.layer.id}'`,
{reason:Aa,sublayer:this,layer:this.layer}))};qa._getLayerDomain=function(oa){return(oa=this.fieldsIndex.get(oa))?oa.domain:null};n._createClass(ya,[{key:"definitionExpression",set:function(oa){this._setAndNotifyLayer("definitionExpression",oa)}},{key:"fieldsIndex",get:function(){return new V(this.fields||[])}},{key:"floorInfo",set:function(oa){this._setAndNotifyLayer("floorInfo",oa)}},{key:"id",get:function(){const oa=this._get("id");return null==oa?ra++:oa},set:function(oa){this._get("id")!==oa&&
(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",oa))}},{key:"labelingInfo",set:function(oa){this._setAndNotifyLayer("labelingInfo",oa)}},{key:"labelsVisible",set:function(oa){this._setAndNotifyLayer("labelsVisible",oa)}},{key:"layer",set:function(oa){this._set("layer",oa);this.sublayers&&this.sublayers.forEach(Aa=>Aa.layer=oa)}},{key:"listMode",set:function(oa){this._set("listMode",
oa)}},{key:"minScale",set:function(oa){this._setAndNotifyLayer("minScale",oa)}},{key:"maxScale",set:function(oa){this._setAndNotifyLayer("maxScale",oa)}},{key:"effectiveScaleRange",get:function(){const {minScale:oa,maxScale:Aa}=this;return{minScale:oa,maxScale:Aa}}},{key:"opacity",set:function(oa){this._setAndNotifyLayer("opacity",oa)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(oa){if(oa)for(const Aa of oa.getSymbols())if(k.isSymbol3D(Aa)){va.warn("Sublayer renderer should use 2D symbols");
break}this._setAndNotifyLayer("renderer",oa)}},{key:"source",get:function(){return this._get("source")||new da.MapLayerSource({mapLayerId:this.id})},set:function(oa){this._setAndNotifyLayer("source",oa)}},{key:"sublayers",set:function(oa){this._handleSublayersChange(oa,this._get("sublayers"));this._set("sublayers",oa)}},{key:"url",get:function(){var oa,Aa;const Ka=null!=(oa=null==(Aa=this.layer)?void 0:Aa.parsedUrl)?oa:this._lastParsedUrl;oa=this.source;if(!Ka)return null;this._lastParsedUrl=Ka;if("map-layer"===
(null==oa?void 0:oa.type))return`${Ka.path}/${oa.mapLayerId}`;oa={layer:JSON.stringify({source:this.source})};return`${Ka.path}/dynamicLayer?${E.objectToQuery(oa)}`},set:function(oa){oa?this._override("url",oa):this._clearOverride("url")}},{key:"visible",set:function(oa){this._setAndNotifyLayer("visible",oa)}}]);return ya}(w.HandleOwnerMixin(D.MultiOriginJSONMixin(A.IdentifiableMixin(y))));r.test={isMapImageLayerOverridePolicy:Ha=>Ha===sa||Ha===ea,isTileImageLayerOverridePolicy:Ha=>Ha===ma};h.__decorate([G.property({readOnly:!0})],
r.prototype,"capabilities",void 0);h.__decorate([K.reader("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],r.prototype,"readCapabilities",null);h.__decorate([G.property({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:ea}}})],r.prototype,"definitionExpression",null);h.__decorate([G.property({type:[U],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],r.prototype,"fields",void 0);
h.__decorate([G.property({readOnly:!0})],r.prototype,"fieldsIndex",null);h.__decorate([G.property({type:Y,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:ea},origins:{"web-scene":{read:!1,write:!1}}}})],r.prototype,"floorInfo",null);h.__decorate([G.property({type:ha,json:{read:{source:"layerDefinition.extent"}}})],r.prototype,"fullExtent",void 0);h.__decorate([G.property({type:String})],r.prototype,
"globalIdField",void 0);h.__decorate([K.reader("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],r.prototype,"readGlobalIdFieldFromService",null);h.__decorate([G.property({type:M.Integer,json:{write:{ignoreOrigin:!0}}})],r.prototype,"id",null);h.__decorate([G.property({value:null,type:[Q],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:sa}}})],r.prototype,"labelingInfo",null);
h.__decorate([L.writer("labelingInfo")],r.prototype,"writeLabelingInfo",null);h.__decorate([G.property({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:sa}}})],r.prototype,"labelsVisible",null);h.__decorate([G.property({value:null})],r.prototype,"layer",null);h.__decorate([G.property({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",
overridePolicy:ja}}})],r.prototype,"legendEnabled",void 0);h.__decorate([G.property({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],r.prototype,"listMode",null);h.__decorate([G.property({type:Number,value:0,json:{write:{overridePolicy:sa}}})],r.prototype,"minScale",null);h.__decorate([K.reader("minScale",["minScale","layerDefinition.minScale"])],r.prototype,"readMinScale",null);h.__decorate([G.property({type:Number,value:0,json:{write:{overridePolicy:sa}}})],
r.prototype,"maxScale",null);h.__decorate([K.reader("maxScale",["maxScale","layerDefinition.maxScale"])],r.prototype,"readMaxScale",null);h.__decorate([G.property({readOnly:!0})],r.prototype,"effectiveScaleRange",null);h.__decorate([G.property({type:String})],r.prototype,"objectIdField",void 0);h.__decorate([K.reader("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],r.prototype,"readObjectIdFieldFromService",null);h.__decorate([G.property({type:Number,value:1,
json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:sa}}})],r.prototype,"opacity",null);h.__decorate([K.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],r.prototype,"readOpacity",null);h.__decorate([L.writer("opacity")],r.prototype,"writeOpacity",null);h.__decorate([G.property({json:{type:M.Integer,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:sa}}})],r.prototype,"parent",void 0);h.__decorate([L.writer("parent")],
r.prototype,"writeParent",null);h.__decorate([G.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(Ha,ya){return!ya.disablePopup}},write:{target:"disablePopup",overridePolicy:ja,writer(Ha,ya,qa){ya[qa]=!Ha}}}})],r.prototype,"popupEnabled",void 0);h.__decorate([G.property({type:v,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:ja}}})],r.prototype,"popupTemplate",void 0);h.__decorate([G.property({readOnly:!0})],r.prototype,"defaultPopupTemplate",null);
h.__decorate([G.property({types:l.rendererTypes,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:sa},origins:{"web-scene":{types:l.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:sa}}}}})],r.prototype,"renderer",null);h.__decorate([G.property({types:{key:"type",base:null,typeMap:{"data-layer":fa.DataLayerSource,"map-layer":da.MapLayerSource}},cast(Ha){if(Ha){if("mapLayerId"in Ha)return M.ensureClass(da.MapLayerSource,Ha);if("dataSource"in
Ha)return M.ensureClass(fa.DataLayerSource,Ha)}return Ha},json:{name:"layerDefinition.source",write:{overridePolicy:sa}}})],r.prototype,"source",null);h.__decorate([G.property()],r.prototype,"sourceJSON",void 0);h.__decorate([G.property({value:null,json:{type:[M.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:sa}}})],r.prototype,"sublayers",null);h.__decorate([H.cast("sublayers")],r.prototype,"castSublayers",null);h.__decorate([L.writer("sublayers")],r.prototype,"writeSublayers",
null);h.__decorate([G.property({type:String,json:{name:"name",write:{overridePolicy:ja}}})],r.prototype,"title",void 0);h.__decorate([G.property({type:String})],r.prototype,"typeIdField",void 0);h.__decorate([K.reader("typeIdField",["layerDefinition.typeIdField"])],r.prototype,"readTypeIdField",null);h.__decorate([G.property({type:[X],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],r.prototype,"types",void 0);h.__decorate([G.property({type:String,json:{read:{source:"layerUrl"},
write:{target:"layerUrl",overridePolicy:ma}}})],r.prototype,"url",null);h.__decorate([G.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:sa}}})],r.prototype,"visible",null);h.__decorate([L.writer("visible")],r.prototype,"writeVisible",null);return r=Ja=h.__decorate([P.subclass("esri.layers.support.Sublayer")],r)})},"esri/layers/support/sublayerUtils":function(){define(["exports","../../core/maybe","../../core/accessorSupport/PropertyOrigin"],
function(u,n,h){function r(v,z){if(!v||!v.length||n.isNone(z))return!0;z=z.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).map(e=>e.id).toArray();if(v.length>z.length)return!1;let p=0;const g=z.length;for(const {id:e}of v){for(;p<g&&z[p]!==e;)p++;if(p>=g)return!1}return!0}u.isExportDynamic=function(v,z,p){return v.some(g=>{const e=g.source;return!(!e||"map-layer"===e.type&&e.mapLayerId===g.id&&(n.isNone(e.gdbVersion)||e.gdbVersion===p))||g.originIdOf("renderer")>h.OriginId.SERVICE||
g.originIdOf("labelingInfo")>h.OriginId.SERVICE||g.originIdOf("opacity")>h.OriginId.SERVICE||g.originIdOf("labelsVisible")>h.OriginId.SERVICE})?!0:!r(v,z)};u.isSublayerOverhaul=function(v){return!!v&&v.some(z=>null!=z.minScale||z.layerDefinition&&null!=z.layerDefinition.minScale)};u.shouldWriteSublayerStructure=function(v,z,p){return z.flatten(({sublayers:g})=>g).length!==v.length||v.some(g=>g.originIdOf("minScale")>p||g.originIdOf("maxScale")>p||g.originIdOf("renderer")>p||g.originIdOf("labelingInfo")>
p||g.originIdOf("opacity")>p||g.originIdOf("labelsVisible")>p||g.originIdOf("source")>p)?!0:!r(v,z)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/MapImageLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../TimeExtent ../core/Error ../core/HandleOwner ../core/loadAll ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/PropertyOrigin ../geometry/Extent ../geometry/support/scaleUtils ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISMapService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./mixins/TemporalLayer ./support/commonProperties ./support/ExportImageParameters ./support/Sublayer ./support/sublayerUtils ./support/versionUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M,J,R){z=function(X){function U(...Q){Q=X.call(this,...Q)||this;Q.datesInUnknownTimezone=!1;Q.dpi=96;Q.gdbVersion=null;Q.imageFormat="png24";Q.imageMaxHeight=2048;Q.imageMaxWidth=2048;Q.imageTransparency=!0;Q.isReference=null;Q.labelsVisible=!1;Q.operationalLayerType="ArcGISMapServiceLayer";Q.sourceJSON=null;Q.sublayers=null;Q.type="map-image";Q.url=null;return Q}u._inheritsLoose(U,X);var V=U.prototype;V.normalizeCtorArgs=
function(Q,Y){return"string"===typeof Q?{url:Q,...Y}:Q};V.load=function(Q){const Y=g.isSome(Q)?Q.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},Q).catch(b.throwIfAbortError).then(()=>this._fetchService(Y)));return Promise.resolve(this)};V.readImageFormat=function(Q,Y){return(Q=Y.supportedImageFormatTypes)&&Q.includes("PNG32")?"png32":"png24"};V.writeSublayers=function(Q,Y,fa,da){if(this.loaded&&Q){Q=Q.slice().reverse().flatten(({sublayers:S})=>S&&S.toArray().reverse()).toArray();
fa=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const S=q.nameToId(da.origin);S===q.OriginId.PORTAL_ITEM?(fa=this.createSublayersForOrigin("service").sublayers,fa=J.shouldWriteSublayerStructure(Q,fa,q.OriginId.SERVICE)):S>q.OriginId.PORTAL_ITEM&&(fa=this.createSublayersForOrigin("portal-item"),fa=J.shouldWriteSublayerStructure(Q,fa.sublayers,q.nameToId(fa.origin)))}var ca=[],la={writeSublayerStructure:fa,...da},ha=fa;Q.forEach(S=>
{const ea=S.write({},la);ca.push(ea);ha=ha||"user"===S.originOf("visible")});ca.some(S=>1<Object.keys(S).length)&&(Y.layers=ca);ha&&(Y.visibleLayers=Q.filter(S=>S.visible).map(S=>S.id))}};V.createExportImageParameters=function(Q,Y,fa,da){var ca=da&&da.pixelRatio||1;Q&&10<=this.version&&(Q=Q.clone().shiftCentralMeridian());var la=new L.ExportImageParameters({layer:this,floors:null==da?void 0:da.floors,scale:w.getScale({extent:Q,width:Y})*ca});const ha=la.toJSON();la.destroy();la=!da||!da.rotation||
10.3>this.version?{}:{rotation:-da.rotation};var S=Q&&Q.spatialReference;S=S.wkid||JSON.stringify(S.toJSON());ha.dpi*=ca;ca={};if(null!=da&&da.timeExtent){const {start:ea,end:ma}=da.timeExtent.toJSON();ca.time=ea&&ma&&ea===ma?""+ea:`${null==ea?"null":ea},${null==ma?"null":ma}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(ca.time="null,null");return{bbox:Q&&Q.xmin+","+Q.ymin+","+Q.xmax+","+Q.ymax,bboxSR:S,imageSR:S,size:Y+","+fa,...ha,...la,...ca}};V.fetchImage=function(){var Q=u._asyncToGenerator(function*(Y,
fa,da,ca){var la;Y={responseType:"image",signal:null!=(la=null==ca?void 0:ca.signal)?la:null,query:{...this.parsedUrl.query,...this.createExportImageParameters(Y,fa,da,ca),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}};const ha=this.parsedUrl.path+"/export";if(null!=Y.query.dynamicLayers&&!this.capabilities.exportMap.supportsDynamicLayers)throw new v("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,
{query:Y.query});return h(ha,Y).then(S=>S.data).catch(S=>{if(b.isAbortError(S))throw S;throw new v("mapimagelayer:image-fetch-error",`Unable to load image: ${ha}`,{error:S});})});return function(Y,fa,da,ca){return Q.apply(this,arguments)}}();V.fetchRecomputedExtents=function(){var Q=u._asyncToGenerator(function*(Y={}){({data:Y}=yield h(this.url,{...Y,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}}));const {extent:fa,fullExtent:da,timeExtent:ca}=Y;Y=fa||da;return{fullExtent:Y&&
t.fromJSON(Y),timeExtent:ca&&r.fromJSON({start:ca[0],end:ca[1]})}});return function(){return Q.apply(this,arguments)}}();V.loadAll=function(){return p.loadAll(this,Q=>{Q(this.allSublayers)})};V.serviceSupportsSpatialReference=function(Q){return R.serviceSupportsSpatialReference(this,Q)};V._fetchService=function(){var Q=u._asyncToGenerator(function*(Y){if(this.sourceJSON)this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});else{var {data:fa,ssl:da}=yield h(this.parsedUrl.path,{query:{f:"json",
...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:Y});da&&(this.url=this.url.replace(/^http:/i,"https:"));this.sourceJSON=fa;this.read(fa,{origin:"service",url:this.parsedUrl})}});return function(Y){return Q.apply(this,arguments)}}();return U}(C.BlendLayer(K.TemporalLayer(O.ScaleRangeLayer(H.SublayersOwner(y.ArcGISMapService(B.ArcGISService(F.OperationalLayer(E.PortalLayer(e.MultiOriginJSONMixin(G.RefreshableLayer(x.APIKeyMixin(D.CustomParametersMixin(z.HandleOwnerMixin(A))))))))))))));
n.__decorate([a.property({type:Boolean})],z.prototype,"datesInUnknownTimezone",void 0);n.__decorate([a.property()],z.prototype,"dpi",void 0);n.__decorate([a.property()],z.prototype,"gdbVersion",void 0);n.__decorate([a.property()],z.prototype,"imageFormat",void 0);n.__decorate([l.reader("imageFormat",["supportedImageFormatTypes"])],z.prototype,"readImageFormat",null);n.__decorate([a.property({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],z.prototype,"imageMaxHeight",void 0);n.__decorate([a.property({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],
z.prototype,"imageMaxWidth",void 0);n.__decorate([a.property()],z.prototype,"imageTransparency",void 0);n.__decorate([a.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],z.prototype,"isReference",void 0);n.__decorate([a.property({json:{read:!1,write:!1}})],z.prototype,"labelsVisible",void 0);n.__decorate([a.property({type:["ArcGISMapServiceLayer"]})],z.prototype,"operationalLayerType",void 0);n.__decorate([a.property({json:{read:!1,write:!1}})],z.prototype,
"popupEnabled",void 0);n.__decorate([a.property()],z.prototype,"sourceJSON",void 0);n.__decorate([a.property({json:{write:{ignoreOrigin:!0}}})],z.prototype,"sublayers",void 0);n.__decorate([k.writer("sublayers",{layers:{type:[M]},visibleLayers:{type:[f.Integer]}})],z.prototype,"writeSublayers",null);n.__decorate([a.property({type:["show","hide","hide-children"]})],z.prototype,"listMode",void 0);n.__decorate([a.property({json:{read:!1},readOnly:!0,value:"map-image"})],z.prototype,"type",void 0);n.__decorate([a.property(P.url)],
z.prototype,"url",void 0);return z=n.__decorate([m.subclass("esri.layers.MapImageLayer")],z)})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],function(u,n){function h(r,v){v=n.getMetersPerUnitForSR(v);return r/(v*n.inchesPerMeter*96)}u.getExtentForScale=function(r,v){const z=r.extent;r=r.width;v=h(v,z.spatialReference);return z.clone().expand(v*r/z.width)};u.getResolutionForScale=h;u.getScale=function(r,v){v=v||r.extent;r=r.width;const z=n.getMetersPerUnitForSR(v&&
v.spatialReference);return v&&r?v.width/r*z*n.inchesPerMeter*96:0};u.getScaleForResolution=function(r,v){v=n.getMetersPerUnitForSR(v);return r*v*n.inchesPerMeter*96};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/ExportImageParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/sql ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ./floorFilterUtils ./sublayerUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){const m={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};u.ExportImageParameters=function(k){function q(w){w=k.call(this,w)||this;w.floors=null;w.scale=0;return w}n._inheritsLoose(q,k);var t=q.prototype;t.destroy=function(){this.layer=null};t.toJSON=
function(){var w=this.layer;w={dpi:w.dpi,format:w.imageFormat,transparent:w.imageTransparency,gdbVersion:w.gdbVersion||null};this.hasDynamicLayers&&this.dynamicLayers?w.dynamicLayers=this.dynamicLayers:w={...w,layers:this.layers,layerDefs:this.layerDefs};return w};n._createClass(q,[{key:"dynamicLayers",get:function(){if(!this.hasDynamicLayers)return null;const w=this.visibleSublayers.map(A=>{const x=f.getLayerFloorFilterClause(this.floors,A);return A.toExportImageJSON(x)});return w.length?JSON.stringify(w):
null}},{key:"hasDynamicLayers",get:function(){return this.layer&&l.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}},{key:"layer",set:function(w){this._get("layer")!==w&&(this._set("layer",w),this.handles.remove("layer"),w&&this.handles.add([w.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),w.on("sublayer-update",A=>this.notifyChange(m[A.propertyName]))],"layer"))}},{key:"layers",get:function(){const w=this.visibleSublayers;return w?w.length?
"show:"+w.map(A=>A.id).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var w;const A=!(null==(w=this.floors)||!w.length);w=this.visibleSublayers.filter(x=>null!=x.definitionExpression||A&&null!=x.floorInfo);return w.length?JSON.stringify(w.reduce((x,y)=>{var B=f.getLayerFloorFilterClause(this.floors,y);B=p.sqlAnd(B,y.definitionExpression);z.isSome(B)&&(x[y.id]=B);return x},{})):null}},{key:"version",get:function(){this.commitProperty("layers");this.commitProperty("layerDefs");this.commitProperty("dynamicLayers");
this.commitProperty("timeExtent");const w=this.layer;w&&(w.commitProperty("dpi"),w.commitProperty("imageFormat"),w.commitProperty("imageTransparency"),w.commitProperty("gdbVersion"));return(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){const w=[];if(!this.layer)return w;var A=this.layer.sublayers;const x=y=>{const B=this.scale,C=0===y.minScale||B<=y.minScale,D=0===y.maxScale||B>=y.maxScale;y.visible&&(0===B||C&&D)&&(y.sublayers?y.sublayers.forEach(x):w.unshift(y))};A&&A.forEach(x);
A=this._get("visibleSublayers");return!A||A.length!==w.length||A.some((y,B)=>w[B]!==y)?w:A}}]);return q}(v.HandleOwnerMixin(r));h.__decorate([g.property({readOnly:!0})],u.ExportImageParameters.prototype,"dynamicLayers",null);h.__decorate([g.property()],u.ExportImageParameters.prototype,"floors",void 0);h.__decorate([g.property({readOnly:!0})],u.ExportImageParameters.prototype,"hasDynamicLayers",null);h.__decorate([g.property()],u.ExportImageParameters.prototype,"layer",null);h.__decorate([g.property({readOnly:!0})],
u.ExportImageParameters.prototype,"layers",null);h.__decorate([g.property({readOnly:!0})],u.ExportImageParameters.prototype,"layerDefs",null);h.__decorate([g.property({type:Number})],u.ExportImageParameters.prototype,"scale",void 0);h.__decorate([g.property(d.combinedViewLayerTimeExtentProperty)],u.ExportImageParameters.prototype,"timeExtent",void 0);h.__decorate([g.property({readOnly:!0})],u.ExportImageParameters.prototype,"version",null);h.__decorate([g.property({readOnly:!0})],u.ExportImageParameters.prototype,
"visibleSublayers",null);u.ExportImageParameters=h.__decorate([c.subclass("esri.layers.mixins.ExportImageParameters")],u.ExportImageParameters);Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/floorFilterUtils":function(){define(["exports"],function(u){function n(h,r){if(null==h||!h.length)return null;h=h.filter(v=>""!==v).map(v=>`'${v}'`);h.push("''");return`${r} IN (${h.join(",")}) OR ${r} IS NULL`}u.getFloorFilterClause=function(h){var r;
const v=h.layer;return"floorInfo"in v&&null!=(r=v.floorInfo)&&r.floorField&&"floors"in h.view?n(h.view.floors,v.floorInfo.floorField):null};u.getLayerFloorFilterClause=function(h,r){var v;return"floorInfo"in r&&null!=(v=r.floorInfo)&&v.floorField?n(h,r.floorInfo.floorField):null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/VectorTileLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/lang ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/imageUtils ./support/SpriteSource ./support/TileInfo ./support/vectorTileLayerLoader ../portal/support/jsonContext ../portal/support/urlUtils ../chunks/persistableUrlUtils ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository ../views/webgl/capabilities".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M){p=function(J){function R(...U){U=J.call(this,...U)||this;U._spriteSourceMap=new Map;U.currentStyleInfo=null;U.style=null;U.isReference=null;U.operationalLayerType="VectorTileLayer";U.type="vector-tile";U.url=null;U.symbolCollisionBoxesVisible=!1;U.path=null;return U}u._inheritsLoose(R,J);var X=R.prototype;X.normalizeCtorArgs=function(U,V){return"string"===typeof U?{url:U,...V}:U};X.destroy=function(){if(this.sourceNameToSource)for(const U of Object.values(this.sourceNameToSource))null==
U?void 0:U.destroy();this._spriteSourceMap.clear()};X.prefetchResources=function(){var U=u._asyncToGenerator(function*(V){yield this.loadSpriteSource(globalThis.devicePixelRatio||1,V)});return function(V){return U.apply(this,arguments)}}();X.load=function(U){var V=this;const Q=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},U).catch(g.throwIfAbortError).then(u._asyncToGenerator(function*(){if(V.portalItem&&V.portalItem.id){var Y=`${V.portalItem.itemUrl}/resources/styles/root.json`;
(yield h(Y,{...U,query:{f:"json",...V.customParameters,token:V.apiKey}})).data&&V.read({url:Y},O.createForItemRead(V.portalItem))}})).catch(g.throwIfAbortError).then(()=>this._loadStyle(U));this.addResolvingPromise(Q);return Promise.resolve(this)};X.writeStyleUrl=function(U,V){U&&e.isProtocolRelative(U)&&(U=`https:${U}`);const Q=z.unwrap(H.parseKnownArcGISOnlineDomain(U));V.styleUrl=K.ensureMainOnlineDomain(U,Q)};X.readVersion=function(U,V){return V.version?parseFloat(V.version):parseFloat(V.currentVersion)};
X.loadSpriteSource=function(){var U=u._asyncToGenerator(function*(V=1,Q){if(!this._spriteSourceMap.has(V)){var Y;const fa=M.getWebGLCapabilities("2d").maxTextureSize,da=null!=(Y=this.currentStyleInfo)&&Y.spriteUrl?e.addQueryParameters(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null;Y=new F(da,V,fa,this.currentStyleInfo.spriteFormat);yield Y.load(Q);this._spriteSourceMap.set(V,Y)}return this._spriteSourceMap.get(V)});return function(){return U.apply(this,arguments)}}();
X.setSpriteSource=function(){var U=u._asyncToGenerator(function*(V,Q="png",Y=1,fa){const da=M.getWebGLCapabilities("2d").maxTextureSize;V=V?e.addQueryParameters(V,{...this.customParameters,token:this.apiKey}):null;if(!V)return null;Q=new F(V,Y,da,Q);try{return yield Q.load(fa),this._spriteSourceMap.clear(),this._spriteSourceMap.set(Y,Q),this.currentStyleInfo.spriteUrl=V,this.emit("spriteSource-change",{spriteSource:Q}),Q}catch(ca){g.throwIfAbortError(ca)}return null});return function(V){return U.apply(this,
arguments)}}();X.loadStyle=function(){var U=u._asyncToGenerator(function*(V,Q){var Y;const fa=V||this.style||this.url;if(this._loadingTask&&"string"===typeof fa&&this.url===fa)return this._loadingTask.promise;null==(Y=this._loadingTask)?void 0:Y.abort();this._loadingTask=g.createTask(da=>{this._spriteSourceMap.clear();return this._getSourceAndStyle(fa,{signal:da})},Q);return this._loadingTask.promise});return function(V,Q){return U.apply(this,arguments)}}();X.getStyleLayerId=function(U){return this.styleRepository.getStyleLayerId(U)};
X.getStyleLayerIndex=function(U){return this.styleRepository.getStyleLayerIndex(U)};X.getPaintProperties=function(U){return v.clone(this.styleRepository.getPaintProperties(U))};X.setPaintProperties=function(U,V){const Q=this.styleRepository.isPainterDataDriven(U);this.styleRepository.setPaintProperties(U,V);const Y=this.styleRepository.isPainterDataDriven(U);this.emit("paint-change",{layer:U,paint:V,isDataDriven:Q||Y})};X.getStyleLayer=function(U){return v.clone(this.styleRepository.getStyleLayer(U))};
X.setStyleLayer=function(U,V){this.styleRepository.setStyleLayer(U,V);this.emit("style-layer-change",{layer:U,index:V})};X.deleteStyleLayer=function(U){this.styleRepository.deleteStyleLayer(U);this.emit("delete-style-layer",{layer:U})};X.getLayoutProperties=function(U){return v.clone(this.styleRepository.getLayoutProperties(U))};X.setLayoutProperties=function(U,V){this.styleRepository.setLayoutProperties(U,V);this.emit("layout-change",{layer:U,layout:V})};X.setStyleLayerVisibility=function(U,V){this.styleRepository.setStyleLayerVisibility(U,
V);this.emit("style-layer-visibility-change",{layer:U,visibility:V})};X.getStyleLayerVisibility=function(U){return this.styleRepository.getStyleLayerVisibility(U)};X.write=function(U,V){return null!=V&&V.origin&&!this.styleUrl?(V.messages&&V.messages.push(new r("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):J.prototype.write.call(this,U,V)};X.getTileUrl=function(U,V,Q){return null};X._getSourceAndStyle=
function(){var U=u._asyncToGenerator(function*(V,Q){if(!V)throw Error("invalid style!");Q=yield G.loadMetadata(V,{...Q,query:{...this.customParameters,token:this.apiKey}});"webp"!==Q.spriteFormat||(yield D.checkWebPSupport("lossy"))||(Q.spriteFormat="png");this._set("currentStyleInfo",{...Q});"string"===typeof V?(this.url=V,this.style=null):(this.url=null,this.style=V);this._set("sourceNameToSource",Q.sourceNameToSource);this._set("primarySource",Q.sourceNameToSource[Q.primarySourceName]);this._set("styleRepository",
new L(Q.style));this.read(Q.layerDefinition,{origin:"service"});this.emit("load-style")});return function(V,Q){return U.apply(this,arguments)}}();X._getDefaultAttribution=function(U){var V=U.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);U="OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" ");
if(V){var Q=V[2]&&V[2].toLowerCase();if(Q){V=V[1]||"";for(const Y of U)if(Y.toLowerCase().includes(Q))return e.normalize(`//static.arcgis.com/attribution/Vector${V}/${Y}`)}}};X._loadStyle=function(){var U=u._asyncToGenerator(function*(V){var Q,Y;return null!=(Q=null==(Y=this._loadingTask)?void 0:Y.promise)?Q:this.loadStyle(null,V)});return function(V){return U.apply(this,arguments)}}();u._createClass(R,[{key:"attributionDataUrl",get:function(){var U=this.currentStyleInfo;U=U&&U.serviceUrl&&e.urlToObject(U.serviceUrl);
return U?(U=this._getDefaultAttribution(U.path))?e.addQueryParameters(U,{...this.customParameters,token:this.apiKey}):null:null}},{key:"capabilities",get:function(){const U=this.primarySource;return U?U.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}},{key:"fullExtent",get:function(){var U;return(null==(U=this.primarySource)?void 0:U.fullExtent)||null}},{key:"parsedUrl",get:function(){return this.serviceUrl?e.urlToObject(this.serviceUrl):null}},{key:"serviceUrl",
get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}},{key:"spatialReference",get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null}},{key:"styleUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}},{key:"tileInfo",get:function(){var U;const V=[];for(var Q in this.sourceNameToSource)V.push(this.sourceNameToSource[Q]);Q=(null==(U=this.primarySource)?void 0:U.tileInfo)||new E;if(1<V.length)for(U=0;U<V.length;U++)P.areSchemasOverlapping(Q,
V[U].tileInfo)&&(Q=P.unionTileInfos(Q,V[U].tileInfo));return Q}}]);return R}(A.BlendLayer(C.ScaleRangeLayer(t.ArcGISCachedService(w.ArcGISService(y.OperationalLayer(B.PortalLayer(x.CustomParametersMixin(q.APIKeyMixin(p.MultiOriginJSONMixin(k))))))))));n.__decorate([b.property({readOnly:!0})],p.prototype,"attributionDataUrl",null);n.__decorate([b.property({type:["show","hide"]})],p.prototype,"listMode",void 0);n.__decorate([b.property({json:{read:!0,write:!0}})],p.prototype,"blendMode",void 0);n.__decorate([b.property({readOnly:!0,
json:{read:!1}})],p.prototype,"capabilities",null);n.__decorate([b.property({readOnly:!0})],p.prototype,"currentStyleInfo",void 0);n.__decorate([b.property({json:{read:!1},readOnly:!0,type:l})],p.prototype,"fullExtent",null);n.__decorate([b.property()],p.prototype,"style",void 0);n.__decorate([b.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],p.prototype,"isReference",void 0);n.__decorate([b.property({type:["VectorTileLayer"]})],p.prototype,"operationalLayerType",
void 0);n.__decorate([b.property({readOnly:!0})],p.prototype,"parsedUrl",null);n.__decorate([b.property({readOnly:!0})],p.prototype,"serviceUrl",null);n.__decorate([b.property({type:m,readOnly:!0})],p.prototype,"spatialReference",null);n.__decorate([b.property({readOnly:!0})],p.prototype,"styleRepository",void 0);n.__decorate([b.property({readOnly:!0})],p.prototype,"sourceNameToSource",void 0);n.__decorate([b.property({readOnly:!0})],p.prototype,"primarySource",void 0);n.__decorate([b.property({type:String,
readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],p.prototype,"styleUrl",null);n.__decorate([f.writer(["portal-item","web-document"],"styleUrl")],p.prototype,"writeStyleUrl",null);n.__decorate([b.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:E})],p.prototype,"tileInfo",null);n.__decorate([b.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],p.prototype,"type",void 0);n.__decorate([b.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},
"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],p.prototype,"url",void 0);n.__decorate([b.property({readOnly:!0})],p.prototype,"version",void 0);n.__decorate([c.reader("version",["version","currentVersion"])],p.prototype,"readVersion",null);n.__decorate([b.property({type:Boolean})],p.prototype,"symbolCollisionBoxesVisible",void 0);n.__decorate([b.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],p.prototype,"path",void 0);return p=n.__decorate([d.subclass("esri.layers.VectorTileLayer")],
p)})},"esri/layers/support/imageUtils":function(){define(["exports"],function(u){let n=null;u.checkWebPSupport=function(h){if(n)return n;const r={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA\x3d\x3d",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA\x3d\x3d",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};
return n=new Promise(v=>{const z=new Image;z.onload=()=>{z.onload=z.onerror=null;v(0<z.width&&0<z.height)};z.onerror=()=>{z.onload=z.onerror=null;v(!1)};z.src="data:image/webp;base64,"+r[h]})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/SpriteSource":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../request","../../core/Error","../../core/Logger","../../core/urlUtils"],function(u,n,h,r,v){const z=r.getLogger("esri.layers.support.SpriteSource");
return function(){function p(e,b,a,c){this.baseURL=e;this.devicePixelRatio=b;this.maxTextureSize=a;this._spriteImageFormat=c;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}var g=p.prototype;g.getSpriteInfo=function(e){return this._spritesData[e]};g.load=function(){var e=u._asyncToGenerator(function*(b){if(this.baseURL){this.loadStatus="loading";try{yield this._loadSprites(b),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus=
"failed"});return function(b){return e.apply(this,arguments)}}();g._loadSprites=function(e){this._isRetina=1.15<this.devicePixelRatio?!0:!1;const b=v.urlToObject(this.baseURL),a=b.query?"?"+v.objectToQuery(b.query):"",c=this._isRetina?"@2x":"",d=`${b.path}${c}.${this._spriteImageFormat}${a}`;return Promise.all([n(`${b.path}${c}.json${a}`,e),n(d,{responseType:"image",...e})]).then(([f,l])=>{var m=Object.keys(f.data);if(!m||0===m.length||1===m.length&&"_ssl"===m[0]||!l||!l.data)return this._spritesData=
this.image=null,this.width=this.height=0,null;this._spritesData=f.data;f=l.data;l=Math.max(this.maxTextureSize,4096);if(f.width>l||f.height>l)throw f=`Sprite resource for style ${b.path} is bigger than the maximum allowed of ${l} pixels}`,z.error(f),new h("SpriteSource",f);this.width=f.width;this.height=f.height;l=document.createElement("canvas");m=l.getContext("2d");l.width=f.width;l.height=f.height;m.drawImage(f,0,0,f.width,f.height);f=m.getImageData(0,0,f.width,f.height);f=new Uint8Array(f.data);
for(m=0;m<f.length;m+=4)l=f[m+3]/255,f[m]*=l,f[m+1]*=l,f[m+2]*=l;this.image=f})};u._createClass(p,[{key:"spriteNames",get:function(){const e=[];for(const b in this._spritesData)e.push(b);e.sort();return e}}]);return p}()})},"esri/layers/support/vectorTileLayerLoader":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../request ../../core/promiseUtils ../../core/urlUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),function(u,n,h,r,v,z,p){function g(){g=
n._asyncToGenerator(function*(q,t){const w={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[A,x]="string"===typeof q?[q,null]:[null,q.jsonUrl];yield a(w,"esri",q,x,t);q={layerDefinition:w.validatedSource,url:A,serviceUrl:w.sourceUrl,style:w.style,styleUrl:w.styleUrl,spriteUrl:w.style.sprite&&b(w.styleBase,w.style.sprite),spriteFormat:w.spriteFormat,glyphsUrl:w.style.glyphs&&b(w.styleBase,
w.style.glyphs),sourceNameToSource:w.sourceNameToSource,primarySourceName:w.primarySourceName};e(q.spriteUrl);e(q.glyphsUrl);return q});return g.apply(this,arguments)}function e(q){q&&(q=z.getOrigin(q),k&&!k.includes(q)&&k.push(q))}function b(...q){let t=void 0;for(let w=0;w<q.length;++w)z.isProtocolRelative(q[w])?t&&(t=t.split("://")[0]+":"+q[w].trim()):t=z.isAbsolute(q[w])?q[w]:z.join(t,q[w]);return z.removeTrailingSlash(t)}function a(q,t,w,A,x){return c.apply(this,arguments)}function c(){c=n._asyncToGenerator(function*(q,
t,w,A,x){v.throwIfAborted(x);let y,B;if("string"===typeof w){w=z.normalize(w);e(w);var C=yield r(w,{...x,responseType:"json",query:{f:"json",...null==x?void 0:x.query}});C.ssl&&(y&&(y=y.replace(/^http:/i,"https:")),B&&(B=B.replace(/^http:/i,"https:")));B=y=w}else C={data:w},y=w.jsonUrl||null,B=A;C=C.data;if(C.sources)return q.styleUrl=y||null,d(q,C,B,x);if(!C.sources)return q.sourceUrl?l(q,C,B,!1,t,x):(q.sourceUrl=y||null,l(q,C,B,!0,t,x));throw Error("You must specify the URL or the JSON for a service or for a style.");
});return c.apply(this,arguments)}function d(q,t,w,A){return f.apply(this,arguments)}function f(){f=n._asyncToGenerator(function*(q,t,w,A){w=w?z.removeFile(w):z.getAppBaseUrl();q.styleBase=w;q.style=t;q.styleUrl&&e(q.styleUrl);t["sprite-format"]&&"webp"===t["sprite-format"].toLowerCase()&&(q.spriteFormat="webp");const x=[];if(t.sources&&t.sources.esri){const y=t.sources.esri;y.url?yield a(q,"esri",b(w,y.url),void 0,A):x.push(a(q,"esri",y,w,A))}for(const y of Object.keys(t.sources))"esri"!==y&&"vector"===
t.sources[y].type&&(t.sources[y].url?x.push(a(q,y,b(w,t.sources[y].url),void 0,A)):t.sources[y].tiles&&x.push(a(q,y,t.sources[y],w,A)));yield Promise.all(x)});return f.apply(this,arguments)}function l(q,t,w,A,x,y){return m.apply(this,arguments)}function m(){m=n._asyncToGenerator(function*(q,t,w,A,x,y){w=w?z.removeTrailingSlash(w)+"/":z.getAppBaseUrl();if(t.hasOwnProperty("tileInfo"))var B=t;else{var C={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,
spatialReference:{wkid:102100}},D=78271.51696400007,F=2.958287637957775E8,E=[],G=t.hasOwnProperty("minzoom")?+t.minzoom:0,O=t.hasOwnProperty("maxzoom")?+t.maxzoom:22;for(let H=0;H<=O;H++)H>=G&&E.push({level:H,scale:F,resolution:D}),D/=2,F/=2;for(B of t.tiles)e(b(w,B));B={capabilities:"TilesOnly",initialExtent:C,fullExtent:C,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:E,spatialReference:{wkid:102100}}}}C=
new p(x,z.addQueryParameters(w,null==y?void 0:y.query),B);if(!A&&q.primarySourceName in q.sourceNameToSource){D=q.sourceNameToSource[q.primarySourceName];if(!D.isCompatibleWith(C))return;null!=C.fullExtent&&(null!=D.fullExtent?D.fullExtent.union(C.fullExtent):D.fullExtent=C.fullExtent.clone());D.tileInfo.lods.length<C.tileInfo.lods.length&&(D.tileInfo=C.tileInfo)}A?(q.sourceBase=w,q.source=t,q.validatedSource=B,q.primarySourceName=x,q.sourceUrl&&e(q.sourceUrl)):e(w);q.sourceNameToSource[x]=C;if(!q.style){if(null==
t.defaultStyles)throw Error();return"string"===typeof t.defaultStyles?a(q,"",b(w,t.defaultStyles,"root.json"),void 0,y):a(q,"",t.defaultStyles,b(w,"root.json"),y)}});return m.apply(this,arguments)}const k=h.defaults&&h.defaults.io.corsEnabledServers;u.loadMetadata=function(q,t){return g.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TilemapIndex ../TilemapRequest ./VectorTilesRequestManager".split(" "),
function(u,n,h,r,v,z,p,g,e){return function(){function b(c,d,f){this.fullExtent=this.capabilities=this.tileInfo=this.tilemap=null;this.name=c;this.sourceUrl=d;c=h.urlToObject(this.sourceUrl);d=n.clone(f);var l=d.tiles;if(c)for(var m=0;m<l.length;m++){var k=h.urlToObject(l[m]);k&&(h.isAbsolute(k.path)||(k.path=h.join(c.path,k.path)),l[m]=h.addQueryParameters(k.path,{...c.query,...k.query}))}this.tileServers=l;m=f.capabilities&&f.capabilities.split(",").map(q=>q.toLowerCase().trim());l=!0===(null==
f?void 0:f.exportTilesAllowed);m=!0===(null==m?void 0:m.includes("tilemap"));k=l&&f.hasOwnProperty("maxExportTilesCount")?f.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:l,supportsTileMap:m},exportTiles:l?{maxExportTilesCount:+k}:null};this.tileInfo=v.readServiceTileInfo(d.tileInfo,d,null,{ignoreMinMaxLOD:!0});d=f.tileMap?h.addQueryParameters(h.join(c.path,f.tileMap),c.query):null;m?(this.type="vector-tile",this.tilemap=new g(new z.TilemapCache({layer:{parsedUrl:c,tileInfo:this.tileInfo,
type:"vector-tile",tileServers:this.tileServers}}),d)):d&&(this.tilemap=new p(d));this.fullExtent=r.fromJSON(f.fullExtent)}var a=b.prototype;a.destroy=function(){};a.getRefKey=function(){var c=u._asyncToGenerator(function*(d,f){var l,m;return null!=(l=null==(m=this.tilemap)?void 0:m.dataKey(d,f))?l:d});return function(d,f){return c.apply(this,arguments)}}();a.requestTile=function(c,d,f,l){return e.request(this.tileServers[d%this.tileServers.length],c,d,f,l)};a.isCompatibleWith=function(c){var d=this.tileInfo;
c=c.tileInfo;if(!d.spatialReference.equals(c.spatialReference)||!d.origin.equals(c.origin)||Math.round(d.dpi)!==Math.round(c.dpi))return!1;d=d.lods;c=c.lods;const f=Math.min(d.length,c.length);for(let l=0;l<f;l++){const m=d[l],k=c[l];if(m.level!==k.level||Math.round(m.scale)!==Math.round(k.scale))return!1}return!0};return b}()})},"esri/views/2d/engine/vectorTiles/TilemapIndex":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],
function(u,n,h,r){return function(){function v(p){this.url=p}var z=v.prototype;z.fetchTileIndex=function(){var p=u._asyncToGenerator(function*(){this._tileIndexPromise||(this._tileIndexPromise=n(this.url).then(g=>g.data.index));return this._tileIndexPromise});return function(){return p.apply(this,arguments)}}();z.dataKey=function(){var p=u._asyncToGenerator(function*(g,e){const b=yield this.fetchTileIndex();h.throwIfAborted(e);return this._getIndexedDataKey(b,g)});return function(g,e){return p.apply(this,
arguments)}}();z._getIndexedDataKey=function(p,g){const e=[g];if(0>g.level||0>g.row||0>g.col||0<g.row>>g.level||0<g.col>>g.level)return null;for(;0!==g.level;)g=new r(g.level-1,g.row>>1,g.col>>1,g.world),e.push(g);g=e.pop();let b,a;if(1===p)return g;for(;e.length;)if(b=e.pop(),a=(b.col&1)+((b.row&1)<<1),p){if(0===p[a]){g=null;break}if(1===p[a]){g=b;break}g=b;p=p[a]}return g};return v}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],
function(u,n){let h=function(){function r(z,p,g,e){this.set(z,p,g,e)}r.getId=function(z,p,g,e){return"object"===typeof z?`${z.level}/${z.row}/${z.col}/${z.world}`:`${z}/${p}/${g}/${e}`};var v=r.prototype;v.acquire=function(z,p,g,e){this.set(z,p,g,e)};v.contains=function(z){const p=z.level-this.level;return this.row===z.row>>p&&this.col===z.col>>p&&this.world===z.world};v.equals=function(z){return this.level===z.level&&this.row===z.row&&this.col===z.col&&this.world===z.world};v.clone=function(){return new r(this)};
v.release=function(){this.world=this.col=this.row=this.level=0};v.set=function(z,p,g,e){if(null==z)this.world=this.col=this.row=this.level=0;else if("object"===typeof z)this.level=z.level||0,this.row=z.row||0,this.col=z.col||0,this.world=z.world||0;else if("string"===typeof z){const [b,a,c,d]=z.split("/");this.level=parseFloat(b);this.row=parseFloat(a);this.col=parseFloat(c);this.world=parseFloat(d)}else this.level=+z,this.row=+p,this.col=+g,this.world=+e||0;return this};v.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};
v.getParentKey=function(){return 0>=this.level?null:new r(this.level-1,this.row>>1,this.col>>1,this.world)};v.getChildKeys=function(){const z=this.level+1,p=this.row<<1,g=this.col<<1,e=this.world;return[new r(z,p,g,e),new r(z,p,g+1,e),new r(z,p+1,g,e),new r(z,p+1,g+1,e)]};v.compareRowMajor=function(z){return this.row<z.row?-1:this.row>z.row?1:this.col<z.col?-1:this.col>z.col?1:0};u._createClass(r,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(z){this.set(z)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return r}();h.pool=new n(h,null,null,25,50);return h})},"esri/views/2d/engine/vectorTiles/TilemapRequest":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],function(u,n,h,r){return function(){function v(p,g){this._tilemap=p;this._tileIndexUrl=g}var z=v.prototype;z.fetchTileIndex=function(){var p=u._asyncToGenerator(function*(g){this._tileIndexPromise||
(this._tileIndexPromise=n(this._tileIndexUrl,{query:{...null==g?void 0:g.query}}).then(e=>e.data.index));return this._tileIndexPromise});return function(g){return p.apply(this,arguments)}}();z.dataKey=function(p,g){const {level:e,row:b,col:a}=p,c=new r(p);return this._tilemap.fetchAvailabilityUpsample(e,b,a,c,g).then(()=>{c.world=p.world;return c}).catch(d=>{if(h.isAbortError(d))throw d;return null})};return v}()})},"esri/views/2d/engine/vectorTiles/style/VectorTilesRequestManager":function(){define(["exports",
"../../../../../request","../../../../../core/lang"],function(u,n,h){function r(z,p){const g=v.get(z);if(g)return g.then(e=>h.clone(e));p=n(z,{responseType:"array-buffer",...p}).then(({data:e})=>{v.delete(z);return e}).catch(e=>{v.delete(z);throw e;});v.set(z,p);return p}const v=new Map;u.request=function(z,p,g,e,b){z=z.replace(/\{z\}/gi,p.toString()).replace(/\{y\}/gi,g.toString()).replace(/\{x\}/gi,e.toString());return r(z,b)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/portal/support/urlUtils":function(){define(["exports"],function(u){const n=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,h={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};u.parseKnownArcGISOnlineDomain=function(r){r=null==r?void 0:r.match(n);if(!r)return null;const [,v,z,p]=r;if(!v)return null;let g=r=null,
e=null;const {devext:b,qaext:a,www:c}=h;if(z)if(r=v,p)switch(p.toLowerCase()){case "devext":({customBaseUrl:g,portalHostname:e}=b);break;case "qa":({customBaseUrl:g,portalHostname:e}=a);break;default:return null}else({customBaseUrl:g,portalHostname:e}=c);else switch(v.toLowerCase()){case "devext":({customBaseUrl:g,portalHostname:e}=b);break;case "qaext":({customBaseUrl:g,portalHostname:e}=a);break;case "www":({customBaseUrl:g,portalHostname:e}=c);break;default:return null}return{customBaseUrl:g,isPortal:!1,
portalHostname:e,urlKey:r}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["exports","../../../../layers/support/TileInfo"],function(u,n){u.areSchemasOverlapping=function(h,r){if(h===r)return!0;if(!h&&null!=r||null!=h&&!r||!h.spatialReference.equals(r.spatialReference)||h.dpi!==r.dpi)return!1;var v=h.origin;const z=r.origin;if(1E-6<=Math.abs(v.x-z.x)||1E-6<=Math.abs(v.y-z.y))return!1;h.lods[0].scale>
r.lods[0].scale?(v=h,h=r):v=r;for(r=v.lods[0].scale;r>=h.lods[h.lods.length-1].scale-1E-6;r/=2)if(1E-6>Math.abs(r-h.lods[0].scale))return!0;return!1};u.unionTileInfos=function(h,r){if(h===r)return h;if(!h&&null!=r)return r;if(null!=h&&!r)return h;const v=h.size[0],z=h.format,p=h.dpi,g={x:h.origin.x,y:h.origin.y},e=h.spatialReference.toJSON();var b=h.lods[0].scale>r.lods[0].scale?h.lods[0]:r.lods[0];h=(h.lods[h.lods.length-1].scale<=r.lods[r.lods.length-1].scale?h.lods[h.lods.length-1]:r.lods[r.lods.length-
1]).scale;r=[];let a=b.scale;b=b.resolution;let c=0;for(;a>h;)r.push({level:c,resolution:b,scale:a}),c++,a/=2,b/=2;return new n({size:[v,v],dpi:p,format:z||"pbf",origin:g,lods:r,spatialReference:e})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./context-util"],function(u,n,h,r){function v(f){switch(f){case r.ContextType.WEBGL1:return z();
case r.ContextType.WEBGL2:return p()}}function z(){if(!e){{const f=new c,l=g(r.ContextType.WEBGL1,f);h.isNone(l)||(f.supportsElementIndexUint=null!==l.getExtension("OES_element_index_uint"),f.supportsStandardDerivatives=null!==l.getExtension("OES_standard_derivatives"),f.supportsInstancedArrays=null!==l.getExtension("ANGLE_instanced_arrays"),f.supportsTextureFloat=null!==l.getExtension("OES_texture_float"),f.supportsTextureHalfFloat=null!==l.getExtension("OES_texture_half_float"),f.supportsColorBufferFloat=
null!==l.getExtension("WEBGL_color_buffer_float"),f.supportsColorBufferFloatBlend=null!==l.getExtension("EXT_float_blend"),f.supportsColorBufferHalfFloat=null!==l.getExtension("EXT_color_buffer_half_float"));e=f}}return e}function p(){if(!b){{const f=new d,l=g(r.ContextType.WEBGL2,f);h.isNone(l)||(f.supportsColorBufferFloat=null!==l.getExtension("EXT_color_buffer_float"),f.supportsColorBufferFloatBlend=null!==l.getExtension("EXT_float_blend"),f.supportsColorBufferHalfFloat=f.supportsColorBufferFloat||
null!==l.getExtension("EXT_color_buffer_half_float"));b=f}}return b}function g(f,l){const m=document.createElement("canvas");if(!m)return null;let k=r.createContext(m,f,{failIfMajorPerformanceCaveat:!0});h.isNone(k)&&(k=r.createContext(m,f),h.isSome(k)&&(l.majorPerformanceCaveat=!0));if(h.isNone(k))return k;if(f===r.ContextType.WEBGL1){if(f=k.getParameter(k.VERSION),f=null==f?void 0:f.match(/^WebGL\s+([\d.]*)/))f=parseFloat(f[1]),l.available=.94<=f}else l.available=!0;l.maxTextureSize=k.getParameter(k.MAX_TEXTURE_SIZE);
l.supportsVertexShaderSamplers=0<k.getParameter(k.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(f=k.getShaderPrecisionFormat(k.FRAGMENT_SHADER,k.HIGH_FLOAT))l.supportsHighPrecisionFragment=0<f.precision;return k}let e,b,a=function(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=
this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1},c=function(f){function l(){var m=f.apply(this,arguments)||this;m.type=r.ContextType.WEBGL1;return m}n._inheritsLoose(l,f);return l}(a),d=function(f){function l(){var m=f.apply(this,arguments)||this;m.type=r.ContextType.WEBGL2;m.supportsElementIndexUint=!0;m.supportsStandardDerivatives=!0;m.supportsInstancedArrays=!0;m.supportsTextureFloat=!0;m.supportsTextureHalfFloat=!0;return m}n._inheritsLoose(l,
f);return l}(a);u.getWebGL1Capabilities=z;u.getWebGL2Capabilities=p;u.getWebGLCapabilities=function(f){for(f=r.getContextTypes(f);1<f.length;){const l=v(f.shift());if(l.available)return l}return v(f.shift())};u.getWebGLVersionCapabilities=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],function(u,n,h){function r(g){const e=n("esri-force-webgl");if(e===u.ContextType.WEBGL1||
e===u.ContextType.WEBGL2)return[e];switch(g){case "2d":return n("mac")&&n("chrome")?[u.ContextType.WEBGL1,u.ContextType.WEBGL2]:[u.ContextType.WEBGL2,u.ContextType.WEBGL1];case "3d":return[u.ContextType.WEBGL2,u.ContextType.WEBGL1]}}function v(g,e,b={}){if(!window.WebGLRenderingContext)return p(g,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;e=z(g,e,b);h.isNone(e)&&p(g,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');
return e}function z(g,e,b={}){e=e===u.ContextType.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let a=null;for(const c of e){try{a=g.getContext(c,b)}catch(d){}if(a)break}return a}function p(g,e){(g=g.parentNode)&&(g.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+e+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
u.ContextType=void 0;(function(g){g[g.WEBGL1=1]="WEBGL1";g[g.WEBGL2=2]="WEBGL2"})(u.ContextType||(u.ContextType={}));u.createContext=z;u.createContextOrErrorHTML=function(g,e,b={}){for(g=r(g);1<g.length;){const a=z(e,g.shift(),b);if(h.isSome(a))return a}return v(e,g.shift(),b)};u.getContextTypes=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/TileLayerView2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/support/spatialReferenceUtils ./BitmapTileLayerView2D ./LayerView2D ./support/imageUtils ../tiling/TileInfoView ../tiling/TileKey ../tiling/TileQueue ../tiling/TileStrategy ../../layers/LayerView ../../layers/RefreshableLayerView ../../layers/TileLayerView ../../support/drapedUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x){const y=[0,0];p=function(B){function C(){var F=B.apply(this,arguments)||this;F._tileStrategy=null;F._fetchQueue=null;F.layer=null;return F}u._inheritsLoose(C,B);var D=C.prototype;D.update=function(F){this._fetchQueue.pause();this._fetchQueue.state=F.state;this._tileStrategy.update(F);this._fetchQueue.resume()};D.attach=function(){const F="tileServers"in this.layer?this.layer.tileServers:null;this._tileInfoView=new l(this.layer.tileInfo,this.layer.fullExtent);
this._fetchQueue=new k({tileInfoView:this._tileInfoView,concurrency:F&&10*F.length||10,process:(E,G)=>this.fetchTile(E,G)});this._tileStrategy=new q({cachePolicy:"keep",resampling:this.resampling,acquireTile:E=>this.acquireTile(E),releaseTile:E=>this.releaseTile(E),tileInfoView:this._tileInfoView});this.requestUpdate();this.handles.add(v.watch(()=>this.resampling,()=>{this.doRefresh()}));B.prototype.attach.call(this)};D.detach=function(){B.prototype.detach.call(this);this._tileStrategy.destroy();
this._fetchQueue.clear();this.container.removeAllChildren();this._fetchQueue=this._tileStrategy=this._tileInfoView=null};D.moveStart=function(){this.requestUpdate()};D.viewChange=function(){this.requestUpdate()};D.moveEnd=function(){this.requestUpdate()};D.supportsSpatialReference=function(F){var E;return a.equals(null==(E=this.layer.tileInfo)?void 0:E.spatialReference,F)};D.createFetchPopupFeaturesQueryGeometry=function(F,E){return x.createQueryGeometry(F,E,this.view)};D.doRefresh=function(){var F=
u._asyncToGenerator(function*(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach(E=>this._enqueueTileFetch(E)))});return function(){return F.apply(this,arguments)}}();D.isUpdating=function(){var F,E;return null!=(F=null==(E=this._fetchQueue)?void 0:E.updating)?F:!1};D.acquireTile=function(F){F=this._bitmapView.createTile(F);const E=F.bitmap;[E.x,E.y]=this._tileInfoView.getTileCoords(y,F.key);E.resolution=this._tileInfoView.getTileResolution(F.key);[E.width,
E.height]=this._tileInfoView.tileInfo.size;this._enqueueTileFetch(F);this._bitmapView.addChild(F);this.requestUpdate();return F};D.releaseTile=function(F){this._fetchQueue.abort(F.key.id);this._bitmapView.removeChild(F);F.once("detach",()=>F.destroy());this.requestUpdate()};D.fetchTile=function(){var F=u._asyncToGenerator(function*(E,G={}){var O="tilemapCache"in this.layer?this.layer.tilemapCache:null;const {signal:H,resamplingLevel:K=0}=G;if(!O)try{return yield this._fetchImage(E,H)}catch(L){if(!r.isAbortError(L)&&
!this.resampling)return f.createBlankImage(this._tileInfoView.tileInfo.size);if(3>K&&(O=this._tileInfoView.getTileParentId(E.id)))return O=new m(O),G=yield this.fetchTile(O,{...G,resamplingLevel:K+1}),f.resampleImage(this._tileInfoView,G,O,E);throw L;}G=new m(0,0,0,0);let P;try{yield O.fetchAvailabilityUpsample(E.level,E.row,E.col,G,{signal:H});if(G.level!==E.level&&!this.resampling)return f.createBlankImage(this._tileInfoView.tileInfo.size);P=yield this._fetchImage(G,H)}catch(L){if(r.isAbortError(L))throw L;
P=yield this._fetchImage(E,H)}return this.resampling?f.resampleImage(this._tileInfoView,P,G,E):P});return function(E){return F.apply(this,arguments)}}();D._enqueueTileFetch=function(){var F=u._asyncToGenerator(function*(E){if(!this._fetchQueue.has(E.key.id)){try{const G=yield this._fetchQueue.push(E.key);E.bitmap.source=G;E.bitmap.width=this._tileInfoView.tileInfo.size[0];E.bitmap.height=this._tileInfoView.tileInfo.size[1];E.once("attach",()=>this.requestUpdate())}catch(G){r.isAbortError(G)||h.getLogger(this.declaredClass).error(G)}this.requestUpdate()}});
return function(E){return F.apply(this,arguments)}}();D._fetchImage=function(){var F=u._asyncToGenerator(function*(E,G){return this.layer.fetchTile(E.level,E.row,E.col,{signal:G})});return function(E,G){return F.apply(this,arguments)}}();u._createClass(C,[{key:"resampling",get:function(){return!("resampling"in this.layer)||!1!==this.layer.resampling}}]);return C}(A(w(c.BitmapTileLayerView2D(d.LayerView2DMixin(t)))));n.__decorate([z.property()],p.prototype,"_fetchQueue",void 0);n.__decorate([z.property()],
p.prototype,"resampling",null);return p=n.__decorate([b.subclass("esri.views.2d.layers.TileLayerView2D")],p)})},"esri/views/2d/layers/BitmapTileLayerView2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../engine/BitmapTileContainer".split(" "),function(u,n,h,r,v,
z,p,g,e,b){u.BitmapTileLayerView2D=a=>{a=function(c){function d(){return c.apply(this,arguments)||this}n._inheritsLoose(d,c);var f=d.prototype;f.attach=function(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`);this._bitmapView=new b.BitmapTileContainer(this._tileInfoView);this.container.addChild(this._bitmapView)};f.detach=function(){var l;this.container.removeChild(this._bitmapView);null==(l=this._bitmapView)?void 0:l.removeAllChildren()};return d}(a);return a=h.__decorate([e.subclass("esri.views.2d.layers.BitmapTileLayerView2D")],
a)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/LayerView2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/collectionUtils ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../engine/Container ../../layers/support/ClipArea ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){const q=r.ofType({key:"type",base:f,typeMap:{rect:l,path:k,geometry:m}});u.LayerView2DMixin=t=>{t=function(w){function A(){var y=w.apply(this,arguments)||this;y.attached=!1;y.clips=new q;y.lastUpdateId=-1;y.moving=!1;y.updateRequested=!1;return y}n._inheritsLoose(A,w);var x=A.prototype;x.initialize=function(){var y,B,C,D;const F=null!=(y=null==(B=this.view)?void 0:B.spatialReferenceLocked)?y:!0;(null==(C=this.view)?0:C.spatialReference)&&F&&!this.spatialReferenceSupported?
this.addResolvingPromise(Promise.reject(new z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new d.Container),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([p.watch(()=>this.suspended,E=>{this.container&&(this.container.visible=!E);this.view&&!E&&this.updateRequested&&this.view.requestUpdate()},p.syncAndInitial),
p.watch(()=>{var E,G;return null!=(E=null==(G=this.layer)?void 0:G.opacity)?E:1},E=>{this.container&&(this.container.opacity=E)},p.syncAndInitial),p.watch(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",E=>{this.container&&(this.container.blendMode=E)},p.syncAndInitial),p.watch(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,E=>{this.container&&(this.container.effect=E)},p.syncAndInitial),p.on(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)})]),
null!=(D=this.view)&&D.whenLayerView?this.view.whenLayerView(this.layer).then(E=>{E===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))};x.destroy=function(){this.processDetach();this.updateRequested=!1};x.processAttach=function(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())};x.processDetach=function(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=
!1)};x.isVisibleAtScale=function(y){const B=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!B)return!0;const {minScale:C,maxScale:D}=B;return(0===C||y<=C)&&(0===D||y>=D)};x.requestUpdate=function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())};x.processUpdate=function(y){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",y),this.updateRequested&&!this.suspended&&
(this.updateRequested=!1,this.update(y)))};x.hitTest=function(y,B){return Promise.resolve(null)};x.supportsSpatialReference=function(y){return!0};x.canResume=function(){return this.spatialReferenceSupported?w.prototype.canResume.call(this)?this.visibleAtCurrentScale:!1:!1};x.getSuspendInfo=function(){const y=w.prototype.getSuspendInfo.call(this),B=!this.spatialReferenceSupported,C=this.visibleAtCurrentScale;B&&(y.spatialReferenceNotSupported=B);C&&(y.outsideScaleRange=C);return y};n._createClass(A,
[{key:"spatialReferenceSupported",get:function(){var y;const B=null==(y=this.view)?void 0:y.spatialReference;return null==B||this.supportsSpatialReference(B)}},{key:"updating",get:function(){var y;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null==(y=this.updatingHandles)||!y.updating))}},{key:"visibleAtCurrentScale",get:function(){return this.isVisibleAtScale(this.view.scale)}}]);return A}(t);h.__decorate([g.property()],t.prototype,
"attached",void 0);h.__decorate([g.property({type:q,set(w){w=v.referenceSetter(w,this._get("clips"),q);this._set("clips",w)}})],t.prototype,"clips",void 0);h.__decorate([g.property()],t.prototype,"container",void 0);h.__decorate([g.property()],t.prototype,"moving",void 0);h.__decorate([g.property({readOnly:!0})],t.prototype,"spatialReferenceSupported",null);h.__decorate([g.property({readOnly:!0})],t.prototype,"updateParameters",void 0);h.__decorate([g.property()],t.prototype,"updateRequested",void 0);
h.__decorate([g.property()],t.prototype,"updating",null);h.__decorate([g.property()],t.prototype,"view",void 0);h.__decorate([g.property({readOnly:!0})],t.prototype,"visibleAtCurrentScale",null);return t=h.__decorate([c.subclass("esri.views.2d.layers.LayerView2D")],t)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/support/ClipArea":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e){h=function(b){function a(){return b.apply(this,arguments)||this}u._inheritsLoose(a,b);return a}(h.JSONSupport);return h=n.__decorate([e.subclass("esri.views.layers.support.ClipArea")],h)})},"esri/views/layers/support/ClipRect":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),
function(u,n,h,r,v,z,p,g){var e;r=e=function(b){function a(){var c=b.apply(this,arguments)||this;c.type="rect";c.left=null;c.right=null;c.top=null;c.bottom=null;return c}u._inheritsLoose(a,b);a.prototype.clone=function(){return new e({left:this.left,right:this.right,top:this.top,bottom:this.bottom})};u._createClass(a,[{key:"version",get:function(){return(this._get("version")||0)+1}}]);return a}(g);n.__decorate([h.property({type:[Number,String],json:{write:!0}})],r.prototype,"left",void 0);n.__decorate([h.property({type:[Number,
String],json:{write:!0}})],r.prototype,"right",void 0);n.__decorate([h.property({type:[Number,String],json:{write:!0}})],r.prototype,"top",void 0);n.__decorate([h.property({type:[Number,String],json:{write:!0}})],r.prototype,"bottom",void 0);n.__decorate([h.property({readOnly:!0})],r.prototype,"version",null);return r=e=n.__decorate([p.subclass("esri.views.layers.support.ClipRect")],r)})},"esri/views/layers/support/Geometry":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/Geometry ../../../geometry/support/jsonUtils ./ClipArea ../../../geometry/Extent ../../../geometry/Polygon".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){var f;h={base:e,key:"type",typeMap:{extent:c,polygon:d}};a=f=function(l){function m(){var k=l.apply(this,arguments)||this;k.type="geometry";k.geometry=null;return k}u._inheritsLoose(m,l);m.prototype.clone=function(){return new f({geometry:this.geometry.clone()})};u._createClass(m,[{key:"version",get:function(){return(this._get("version")||0)+1}}]);return m}(a);n.__decorate([r.property({types:h,json:{read:b.fromJSON,write:!0}})],a.prototype,"geometry",void 0);n.__decorate([r.property({readOnly:!0})],
a.prototype,"version",null);return a=f=n.__decorate([g.subclass("esri.views.layers.support.Geometry")],a)})},"esri/views/layers/support/Path":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),function(u,n,h,r,v,z,p,g){r=function(e){function b(){var a=e.apply(this,
arguments)||this;a.type="path";a.path=[];return a}u._inheritsLoose(b,e);u._createClass(b,[{key:"version",get:function(){return(this._get("version")||0)+1}}]);return b}(g);n.__decorate([h.property({type:[[[Number]]],json:{write:!0}})],r.prototype,"path",void 0);n.__decorate([h.property({readOnly:!0})],r.prototype,"version",null);return r=n.__decorate([p.subclass("esri.views.layers.support.Path")],r)})},"esri/views/2d/layers/support/imageUtils":function(){define(["exports"],function(u){function n(h){const r=
document.createElement("canvas");[r.width,r.height]=h;return r}u.createBlankImage=n;u.resampleImage=function(h,r,v,z){if(v.level===z.level)return r;const p=h.tileInfo.size;var g=h.getTileResolution(v.level),e=h.getTileResolution(z.level),b=h.getLODInfoAt(z.level),a=b.getXForColumn(z.col);z=b.getYForRow(z.row);b=h.getLODInfoAt(v.level);h=b.getXForColumn(v.col);const c=b.getYForRow(v.row);b=(r instanceof HTMLImageElement?r.naturalWidth:r.width)/p[0];v=(r instanceof HTMLImageElement?r.naturalHeight:
r.height)/p[1];a=Math.round((a-h)/g*b);z=Math.round(-(z-c)/g*v);h=Math.round(e/g*p[0]*b);g=Math.round(e/g*p[1]*v);e=n(p);e.getContext("2d").drawImage(r,a,z,h,g,0,0,p[0],p[1]);return e};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/RefreshableLayerView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b){return a=>{a=function(c){function d(){return c.apply(this,arguments)||this}u._inheritsLoose(d,c);d.prototype.initialize=function(){this.handles.add(v.on(()=>this.layer,"refresh",f=>{this.doRefresh(f.dataChanged).catch(l=>{r.isAbortError(l)||h.getLogger(this.declaredClass).error(l)})}),"RefreshableLayerView")};return d}(a);n.__decorate([z.property()],a.prototype,"layer",void 0);return a=n.__decorate([b.subclass("esri.layers.mixins.RefreshableLayerView")],a)}})},"esri/views/layers/TileLayerView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../renderers/support/clickToleranceUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){return c=>{c=function(d){function f(){return d.apply(this,arguments)||this}u._inheritsLoose(f,d);f.prototype.fetchPopupFeatures=function(){var l=u._asyncToGenerator(function*(m,k){var q=this,{layer:t}=this;if(!m)throw new h("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t});if("tile"!==t.type)throw new h("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:t.type});const w=this.get("view.scale");t=t.allSublayers.toArray().filter(A=>
{const x=0===A.minScale||w<=A.minScale,y=0===A.maxScale||w>=A.maxScale;return A.popupTemplate&&A.popupEnabled&&A.visible&&x&&y});return v.eachAlways(t.map(function(){var A=u._asyncToGenerator(function*(x){const y=x.createQuery();var B=r.isSome(k)?k.event:null;B=a.calculateTolerance({renderer:x.renderer,event:B});y.geometry=q.createFetchPopupFeaturesQueryGeometry(m,B);y.outFields=yield x.popupTemplate.getRequiredFields();return(yield x.queryFeatures(y)).features});return function(x){return A.apply(this,
arguments)}}())).then(A=>[].concat(...A.map(x=>x.value).filter(Boolean)))});return function(m,k){return l.apply(this,arguments)}}();return f}(c);n.__decorate([z.property()],c.prototype,"layer",void 0);return c=n.__decorate([b.subclass("esri.layers.mixins.TileLayerView")],c)}})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(u){function n(v,z){return z?"xoffset"in z&&z.xoffset?Math.max(v,Math.abs(z.xoffset)):"yoffset"in z&&z.yoffset?Math.max(v,Math.abs(z.yoffset||
0)):v:v}function h(v,z){if("number"===typeof v)return v;if(v&&v.stops&&v.stops.length){{v=v.stops;let p=z=0;for(let g=0;g<v.length;g++){const e=v[g].size;"number"===typeof e&&(z+=e,p++)}v=z/p}return v}return z}function r(v,z){if(!z)return v;z=z.filter(e=>"size"===e.type).map(e=>{const {maxSize:b,minSize:a}=e;return(h(b,v)+h(a,v))/2});let p=0;const g=z.length;if(0===g)return v;for(let e=0;e<g;e++)p+=z[e];return Math.max(Math.floor(p/g),v)}u.calculateTolerance=function(v){const z=v&&v.renderer;v="touch"===
(v&&v.event&&v.event.pointerType)?9:6;if(!z)return v;v="visualVariables"in z?r(v,z.visualVariables):v;if("simple"===z.type)return n(v,z.symbol);if("unique-value"===z.type){let p=v;z.uniqueValueInfos.forEach(g=>{p=n(p,g.symbol)});return p}if("class-breaks"===z.type){let p=v;z.classBreakInfos.forEach(g=>{p=n(p,g.symbol)});return p}return v};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/drapedUtils":function(){define("exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils ../../geometry/Extent".split(" "),
function(u,n,h,r,v,z){function p(e,b,a,c=new z){let d;if("2d"===a.type)d=b*a.resolution;else if("3d"===a.type){var f=a.overlayPixelSizeInMapUnits(e),l=a.basemapSpatialReference;d=h.isSome(l)&&!l.equals(a.spatialReference)?r.getMetersPerUnitForSR(l)/r.getMetersPerUnitForSR(a.spatialReference):b*f}b=e.x-d;f=e.y-d;l=e.x+d;e=e.y+d;({spatialReference:a}=a);c.xmin=Math.min(b,l);c.ymin=Math.min(f,e);c.xmax=Math.max(b,l);c.ymax=Math.max(f,e);c.spatialReference=a;return c}const g=new z;u.createQueryGeometry=
p;u.intersectsDrapedGeometry=function(e,b,a){e=a.toMap(e);if(h.isNone(e))return!1;const c=v.calculateTolerance();return p(e,c,a,g).intersects(b)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/VectorTileLayerView2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/diffUtils ../../../geometry/support/aaBoundingRect ../../../geometry/support/spatialReferenceUtils ../engine/vectorTiles/enums ../engine/vectorTiles/TileHandler ../engine/vectorTiles/TileManager ../engine/vectorTiles/VectorTile ../engine/vectorTiles/VectorTileContainer ../engine/vectorTiles/decluttering/debugging ../engine/vectorTiles/style/StyleDefinition ../engine/vectorTiles/style/StyleRepository ./LayerView2D ./support/Display ../tiling/TileInfoViewPOT ../tiling/TileQueue ../../layers/LayerView".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F){function E(O){if(z.isNone(O))return 0;switch(O.type){case "partial":return Object.keys(O.diff).length;case "complete":return Math.max(Object.keys(O.oldValue).length,Object.keys(O.newValue).length);case "collection":return Object.keys(O.added).length+Object.keys(O.changed).length+Object.keys(O.removed).length}}const G=v.getLogger("esri.views.2d.layers.VectorTileLayerView2D");v=function(O){function H(){var P=O.apply(this,arguments)||this;
P._styleChanges=[];P._fetchQueue=null;P._parseQueue=null;P._isTileHandlerReady=!1;P.fading=!1;return P}u._inheritsLoose(H,O);var K=H.prototype;K.hitTest=function(){var P=u._asyncToGenerator(function*(L,M){if(!this._tileHandlerPromise)return null;yield this._tileHandlerPromise;M=yield this._vectorTileContainer.hitTest(M);if(!M||0===M.length)return null;M=M[0]-1;var J=this._styleRepository;const R=J.getStyleLayerByUID(M);if(!R)return null;J=J.getStyleLayerIndex(R.id);return[{type:"graphic",mapPoint:L,
layer:this.layer,graphic:new h({attributes:{layerId:J,layerName:R.id,layerUID:M},layer:this.layer,sourceLayer:this.layer})}]});return function(L,M){return P.apply(this,arguments)}}();K.update=function(P){this._tileHandlerPromise&&this._isTileHandlerReady&&(P.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),this._tileHandler.devicePixelRatio=P.pixelRatio):0<this._styleChanges.length?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),
this._fetchQueue.state=P.state,this._parseQueue.state=P.state,this._tileManager.update(P)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))};K.attach=function(){const {style:P}=this.layer.currentStyleInfo;this._styleRepository=new x(P);this._tileInfoView=new C(this.layer.tileInfo,this.layer.fullExtent);this._vectorTileContainer=new t.VectorTileContainer(this._tileInfoView);this._tileHandler=new m.TileHandler(this.layer,this._styleRepository,window.devicePixelRatio||1);this.container.addChild(this._vectorTileContainer);
this._start();this.handles.add([this._vectorTileContainer.on("fade-start",()=>{this.fading=!0;this.notifyChange("updating");this.requestUpdate()}),this._vectorTileContainer.on("fade-complete",()=>{var L;null==(L=this._collisionBoxesDisplay)?void 0:L.requestRender();this.fading=!1;this.notifyChange("updating");this.requestUpdate()}),g.watch(()=>this.layer.symbolCollisionBoxesVisible,L=>{L?(this._collisionBoxesDisplay=new B.Display({render:M=>this._renderCollisionBoxes(M.context)}),this.container.addChild(this._collisionBoxesDisplay)):
(this.container.removeChild(this._collisionBoxesDisplay),this._collisionBoxesDisplay=null)},g.initial),this.layer.on("paint-change",L=>{if(L.isDataDriven)this._styleChanges.push({type:l.StyleUpdateType.PAINTER_CHANGED,data:L}),this.notifyChange("updating"),this.requestUpdate();else{const J=this._styleRepository;var M=J.getLayerById(L.layer);M&&(M=M.type===A.StyleLayerType.SYMBOL,J.setPaintProperties(L.layer,L.paint),M&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender())}}),
this.layer.on("layout-change",L=>{const M=this._styleRepository,J=M.getLayerById(L.layer);if(J){var R=c.diff(J.layout,L.layout);z.isNone(R)||(c.hasDiff(R,"visibility")&&1===E(R)?(M.setLayoutProperties(L.layer,L.layout),J.type===A.StyleLayerType.SYMBOL&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender()):(this._styleChanges.push({type:l.StyleUpdateType.LAYOUT_CHANGED,data:L}),this.notifyChange("updating"),this.requestUpdate()))}}),this.layer.on("style-layer-visibility-change",
L=>{const M=this._styleRepository,J=M.getLayerById(L.layer);J&&(M.setStyleLayerVisibility(L.layer,L.visibility),J.type===A.StyleLayerType.SYMBOL&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender())}),this.layer.on("style-layer-change",L=>{this._styleChanges.push({type:l.StyleUpdateType.LAYER_CHANGED,data:L});this.notifyChange("updating");this.requestUpdate()}),this.layer.on("delete-style-layer",L=>{this._styleChanges.push({type:l.StyleUpdateType.LAYER_REMOVED,data:L});
this.notifyChange("updating");this.requestUpdate()}),this.layer.on("load-style",()=>this._loadStyle()),this.layer.on("spriteSource-change",L=>{this._newSpriteSource=L.spriteSource;this._styleChanges.push({type:l.StyleUpdateType.SPRITES_CHANGED,data:null});L=this._styleRepository.layers;for(const M of L)switch(M.type){case A.StyleLayerType.SYMBOL:M.getLayoutProperty("icon-image")&&this._styleChanges.push({type:l.StyleUpdateType.LAYOUT_CHANGED,data:{layer:M.id,layout:M.layout}});break;case A.StyleLayerType.LINE:M.getPaintProperty("line-pattern")&&
this._styleChanges.push({type:l.StyleUpdateType.PAINTER_CHANGED,data:{layer:M.id,paint:M.paint,isDataDriven:M.isPainterDataDriven()}});break;case A.StyleLayerType.FILL:M.getLayoutProperty("fill-pattern")&&this._styleChanges.push({type:l.StyleUpdateType.PAINTER_CHANGED,data:{layer:M.id,paint:M.paint,isDataDriven:M.isPainterDataDriven()}})}this.notifyChange("updating");this.requestUpdate()})],this.declaredClass)};K.detach=function(){var P,L;this._stop();this.container.removeAllChildren();null==(P=this._vectorTileContainer)?
void 0:P.destroy();this._vectorTileContainer=null;null==(L=this._tileHandler)?void 0:L.destroy();this._tileHandler=null;this.handles.remove(this.declaredClass)};K.moveStart=function(){this.requestUpdate()};K.viewChange=function(){this.requestUpdate()};K.moveEnd=function(){this._collisionBoxesDisplay&&this._vectorTileContainer.restartDeclutter();this.requestUpdate()};K.supportsSpatialReference=function(P){var L;return f.equals(null==(L=this.layer.tileInfo)?void 0:L.spatialReference,P)};K.canResume=
function(){let P=O.prototype.canResume.call(this);const {currentStyleInfo:L}=this.layer;if(P&&null!=L&&L.layerDefinition){const M=this.view.scale,{minScale:J,maxScale:R}=L.layerDefinition;L&&L.layerDefinition&&(J&&J<M&&(P=!1),R&&R>M&&(P=!1))}return P};K.isUpdating=function(){const P=this._vectorTileContainer.children;return!this._isTileHandlerReady||!this._fetchQueue||!this._parseQueue||this._fetchQueue.updating||this._parseQueue.updating||0<P.length&&P.some(L=>L.invalidating)||this.fading};K.acquireTile=
function(P){const L=this._createVectorTile(P);this._tileHandlerPromise.then(()=>{this._fetchQueue.push(L.key).then(M=>this._parseQueue.push({key:L.key,data:M})).then(M=>{L.once("attach",()=>this.requestUpdate());L.setData(M);this.requestUpdate();this.notifyChange("updating")}).catch(M=>{this.notifyChange("updating");p.isAbortError(M)||G.error(M)})});return L};K.releaseTile=function(P){P=P.key.id;this._fetchQueue.abort(P);this._parseQueue.abort(P);this.requestUpdate()};K._start=function(){this._stop();
this._tileManager=new k.TileManager({acquireTile:M=>this.acquireTile(M),releaseTile:M=>this.releaseTile(M),tileInfoView:this._tileInfoView},this._vectorTileContainer);if(this.layer.currentStyleInfo){var P=new AbortController,L=this._tileHandler.start({signal:P.signal}).then(()=>{this._fetchQueue=new D({tileInfoView:this._tileInfoView,process:(M,J)=>this._getTileData(M,J),concurrency:15});this._parseQueue=new D({tileInfoView:this._tileInfoView,process:(M,J)=>this._parseTileData(M,J),concurrency:8});
this.requestUpdate();this._isTileHandlerReady=!0});this._tileHandler.spriteMosaic.then(M=>{this._vectorTileContainer.setStyleResources(M,this._tileHandler.glyphMosaic,this._styleRepository);this.requestUpdate()});this._tileHandlerAbortController=P;this._tileHandlerPromise=L}};K._stop=function(){if(this._tileHandlerAbortController&&this._vectorTileContainer){var P=this._tileHandlerAbortController;P&&P.abort();this._tileHandlerPromise=null;this._isTileHandlerReady=!1;this._fetchQueue&&(this._fetchQueue.destroy(),
this._fetchQueue=null);this._parseQueue&&(this._parseQueue.destroy(),this._parseQueue=null);this._tileManager&&(this._tileManager.destroy(),this._tileManager=null);this._vectorTileContainer.removeAllChildren()}};K._getTileData=function(){var P=u._asyncToGenerator(function*(L,M){L=yield this._tileHandler.fetchTileData(L,M);this.notifyChange("updating");return L});return function(L,M){return P.apply(this,arguments)}}();K._parseTileData=function(){var P=u._asyncToGenerator(function*(L,M){return this._tileHandler.parseTileData(L,
M)});return function(L,M){return P.apply(this,arguments)}}();K._applyStyleChanges=function(){var P=u._asyncToGenerator(function*(){this._isTileHandlerReady=!1;this._fetchQueue.pause();this._parseQueue.pause();this._fetchQueue.clear();this._parseQueue.clear();this._tileManager.clearCache();var L=this._styleChanges;try{yield this._tileHandler.updateStyle(L)}catch(V){G.error("error applying vector-tiles style update",V.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=
!0}const M=this._styleRepository,J=[];L.forEach(V=>{V.type===l.StyleUpdateType.LAYER_REMOVED&&(V=M.getLayerById(V.data.layer))&&J.push(V.uid)});const R=[];let X;L.forEach(V=>{const Q=V.data;switch(V.type){case l.StyleUpdateType.PAINTER_CHANGED:M.setPaintProperties(Q.layer,Q.paint);X=Q.layer;break;case l.StyleUpdateType.LAYOUT_CHANGED:M.setLayoutProperties(Q.layer,Q.layout);X=Q.layer;break;case l.StyleUpdateType.LAYER_REMOVED:M.deleteStyleLayer(Q.layer);return;case l.StyleUpdateType.LAYER_CHANGED:M.setStyleLayer(Q.layer,
Q.index);X=Q.layer.id;break;case l.StyleUpdateType.SPRITES_CHANGED:this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(this._newSpriteSource)),X=this._newSpriteSource=null}(V=M.getLayerById(X))&&R.push(V.uid)});L=this._vectorTileContainer.children;if(0<J.length){this._vectorTileContainer.deleteStyleLayers(J);for(var U of L)U.deleteLayerData(J)}this._fetchQueue.resume();this._parseQueue.resume();if(0<R.length){U=[];for(const V of L)L=this._fetchQueue.push(V.key).then(Q=>this._parseQueue.push({key:V.key,
data:Q,styleLayerUIDs:R})).then(Q=>V.setData(Q)),U.push(L);yield Promise.all(U)}this._styleChanges=[];this._isTileHandlerReady=!0;this.notifyChange("updating");this.requestUpdate()});return function(){return P.apply(this,arguments)}}();K._loadStyle=function(){var P=u._asyncToGenerator(function*(){var {style:L}=this.layer.currentStyleInfo;L=r.clone(L);this._isTileHandlerReady=!1;this._fetchQueue.pause();this._parseQueue.pause();this._fetchQueue.clear();this._parseQueue.clear();this.notifyChange("updating");
this._styleRepository=new x(L);this._vectorTileContainer.destroy();this._tileManager.clear();this._tileHandlerAbortController.abort();this._tileHandlerAbortController=new AbortController;const {signal:M}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,L),yield this._tileHandlerPromise}catch(J){if(!p.isAbortError(J))throw J;}M.aborted||(L=yield this._tileHandler.spriteMosaic,this._vectorTileContainer.setStyleResources(L,this._tileHandler.glyphMosaic,
this._styleRepository));this._fetchQueue.resume();this._parseQueue.resume();this._isTileHandlerReady=!0;this.notifyChange("updating");this.requestUpdate()});return function(){return P.apply(this,arguments)}}();K._createVectorTile=function(P){const L=this._tileInfoView.getTileBounds(d.create(),P);return new q.VectorTile(P,L[0],L[3],512,512,this._styleRepository)};K._renderCollisionBoxes=function(P){for(const L of this._vectorTileContainer.children)if(L.symbols){const M=[];for(const [,J]of L.symbols)M.push(...J);
w.drawColliders(P,M)}};return H}(y.LayerView2DMixin(F));n.__decorate([e.property()],v.prototype,"_fetchQueue",void 0);n.__decorate([e.property()],v.prototype,"_parseQueue",void 0);n.__decorate([e.property()],v.prototype,"_isTileHandlerReady",void 0);n.__decorate([e.property()],v.prototype,"fading",void 0);return v=n.__decorate([a.subclass("esri.views.2d.layers.VectorTileLayerView2D")],v)})},"esri/views/2d/engine/vectorTiles/TileHandler":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/workers/workers ./GlyphMosaic ./GlyphSource ./SpriteMosaic ./decluttering/debugging ../../tiling/TileKey".split(" "),
function(u,n,h,r,v,z,p,g,e,b){let a=function(){function c(f,l,m){this._layer=f;this._styleRepository=l;this.devicePixelRatio=m;this._connection=this._glyphMosaic=this._spriteMosaic=null}var d=c.prototype;d.destroy=function(){this._connection&&(this._connection.close(),this._connection=null);this._layer=this._styleRepository=null;this._spriteMosaic&&(this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic=null)};d.start=function(){var f=n._asyncToGenerator(function*(l){this._spriteSourcePromise=
this._layer.loadSpriteSource(this.devicePixelRatio,l);this._spriteSourcePromise.then(k=>{this._spriteMosaic=new g(1024,1024,250);this._spriteMosaic.setSpriteSource(k)});const m=new p(this._layer.currentStyleInfo.glyphsUrl?r.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new z(1024,1024,m);this._broadcastPromise=v.open("WorkerTileHandler",{client:this,schedule:l.schedule,signal:l.signal}).then(k=>{this._connection=
k;this._connection.broadcast("setStyle",this._layer.currentStyleInfo.style,l)})});return function(l){return f.apply(this,arguments)}}();d.updateStyle=function(){var f=n._asyncToGenerator(function*(l){yield this._broadcastPromise;return this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",l))});return function(l){return f.apply(this,arguments)}}();d.setSpriteSource=function(f){const l=new g(1024,1024,250);l.setSpriteSource(f);this._spriteMosaic=l;this._spriteSourcePromise=Promise.resolve(f);
return l};d.setStyle=function(){var f=n._asyncToGenerator(function*(l,m){yield this._broadcastPromise;this._styleRepository=l;this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,null);this._spriteSourcePromise.then(k=>{this._spriteMosaic=new g(1024,1024,250);this._spriteMosaic.setSpriteSource(k)});l=new p(this._layer.currentStyleInfo.glyphsUrl?r.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=
new z(1024,1024,l);return this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",m))});return function(l,m){return f.apply(this,arguments)}}();d.fetchTileData=function(f,l){return this._getRefKeys(f,l).then(m=>{const k=this._layer.sourceNameToSource,q=[];for(const t in k)q.push(t);return this._getSourcesData(q,m,l)})};d.parseTileData=function(f,l){const m=f&&f.data;if(!m)return Promise.resolve(null);const {sourceName2DataAndRefKey:k,transferList:q}=m;return 0===Object.keys(k).length?
Promise.resolve(null):this._broadcastPromise.then(()=>this._connection.invoke("createTileAndParse",{key:f.key.id,sourceName2DataAndRefKey:k,styleLayerUIDs:f.styleLayerUIDs},{...l,transferList:q}))};d.getSprites=function(){var f=n._asyncToGenerator(function*(l){yield this._spriteSourcePromise;return this._spriteMosaic.getSpriteItems(l)});return function(l){return f.apply(this,arguments)}}();d.getGlyphs=function(f){return this._glyphMosaic.getGlyphItems(f.font,f.codePoints)};d.perfReport=function({key:f,
milliseconds:l}){e.perfAdd(f,l,"ms")};d._getTilePayload=function(){var f=n._asyncToGenerator(function*(l,m,k){l=b.pool.acquire(l.id);const q=this._layer.sourceNameToSource[m],{level:t,row:w,col:A}=l;b.pool.release(l);try{return{protobuff:yield q.requestTile(t,w,A,k),sourceName:m}}catch(x){if(h.isAbortError(x))throw x;return{protobuff:null,sourceName:m}}});return function(l,m,k){return f.apply(this,arguments)}}();d._getRefKeys=function(f,l){const m=this._layer.sourceNameToSource,k=[];for(const q in m){const t=
m[q].getRefKey(f,l);k.push(t)}return h.eachAlways(k)};d._getSourcesData=function(f,l,m){const k=[];for(let q=0;q<l.length;q++)if(null==l[q].value||null==f[q])k.push(null);else{const t=this._getTilePayload(l[q].value,f[q],m);k.push(t)}return h.eachAlways(k).then(q=>{const t={},w=[];for(let A=0;A<q.length;A++)q[A].value&&q[A].value&&q[A].value.protobuff&&0<q[A].value.protobuff.byteLength&&(t[q[A].value.sourceName]={refKey:l[A].value.id,protobuff:q[A].value.protobuff},w.push(q[A].value.protobuff));return{sourceName2DataAndRefKey:t,
transferList:w}})};n._createClass(c,[{key:"spriteMosaic",get:function(){return this._spriteSourcePromise.then(()=>this._spriteMosaic)}},{key:"glyphMosaic",get:function(){return this._glyphMosaic}}]);return c}();u.TileHandler=a;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/GlyphMosaic":function(){define(["./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(u,n,h,r){return function(){function v(p,
g,e){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=p;this.height=g;this._glyphSource=e;this._binPack=new u(p-4,g-4);this._glyphData.push(new Uint8Array(p*g));this._dirties.push(!0);this._textures.push(void 0)}var z=v.prototype;z.getGlyphItems=function(p,g){const e=[],b=this._glyphSource,a=new Set,c=1/256;for(const f of g)a.add(Math.floor(f*c));const d=[];a.forEach(f=>{if(256>=f){const l=
p+f;this._rangePromises.has(l)?d.push(this._rangePromises.get(l)):(f=b.getRange(p,f).then(()=>{this._rangePromises["delete"](l)},()=>{this._rangePromises["delete"](l)}),this._rangePromises.set(l,f),d.push(f))}});return Promise.all(d).then(()=>{let f=this._glyphIndex[p];f||(f={},this._glyphIndex[p]=f);for(const t of g){var l=f[t];if(l){e[t]={sdf:!0,rect:l.rect,metrics:l.metrics,page:l.page,code:t};continue}var m=b.getGlyph(p,t);if(!m||!m.metrics)continue;l=m.metrics;let w;if(0===l.width)w=new n(0,
0,0,0);else{const A=l.width+6,x=l.height+6;var k=A%4?4-A%4:4,q=x%4?4-x%4:4;1===k&&(k=5);1===q&&(q=5);w=this._binPack.allocate(A+k,x+q);w.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new u(this.width-4,this.height-4),w=this._binPack.allocate(A+k,x+q));k=this._glyphData[this._currentPage];m=m.bitmap;
let y;if(m)for(let B=0;B<x;B++){q=A*B;y=this.width*(w.y+B+1)+w.x;for(let C=0;C<A;C++)k[y+C+1]=m[q+C]}}f[t]={rect:w,metrics:l,tileIDs:null,page:this._currentPage};e[t]={sdf:!0,rect:w,metrics:l,page:this._currentPage,code:t};this._dirties[this._currentPage]=!0}return e})};z.removeGlyphs=function(p){for(const g in this._glyphIndex){const e=this._glyphIndex[g];if(!e)continue;let b;for(const a in e)if(b=e[a],b.tileIDs["delete"](p),0===b.tileIDs.size){const c=this._glyphData[b.page],d=b.rect;let f,l;for(let m=
0;m<d.height;m++)for(f=this.width*(d.y+m)+d.x,l=0;l<d.width;l++)c[f+l]=0;delete e[a];this._dirties[b.page]=!0}}};z.bind=function(p,g,e,b=0){this._textures[e]||(this._textures[e]=new r.Texture(p,{pixelFormat:h.PixelFormat.ALPHA,dataType:h.PixelType.UNSIGNED_BYTE,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));const a=this._textures[e];a.setSamplingMode(g);this._dirties[e]&&a.setData(this._glyphData[e]);p.bindTexture(a,b);this._dirties[e]=!1};z.dispose=function(){this._binPack=
null;for(const p of this._textures)p&&p.dispose();this._textures.length=0};return v}()})},"esri/views/2d/engine/vectorTiles/RectangleBinPack":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../webgl/Rect"],function(u,n){return function(){function h(v,z){this._height=this._width=0;this._free=[];this._width=v;this._height=z;this._free.push(new n(0,0,v,z))}var r=h.prototype;r.allocate=function(v,z){if(v>this._width||z>this._height)return new n;let p=null,g=-1;for(let e=0;e<this._free.length;++e){const b=
this._free[e];v<=b.width&&z<=b.height&&(null===p||b.y<=p.y&&b.x<=p.x)&&(p=b,g=e)}if(null===p)return new n;this._free.splice(g,1);p.width<p.height?(p.width>v&&this._free.push(new n(p.x+v,p.y,p.width-v,z)),p.height>z&&this._free.push(new n(p.x,p.y+z,p.width,p.height-z))):(p.width>v&&this._free.push(new n(p.x+v,p.y,p.width-v,p.height)),p.height>z&&this._free.push(new n(p.x,p.y+z,v,p.height-z)));return new n(p.x,p.y,v,z)};r.release=function(v){for(let z=0;z<this._free.length;++z){const p=this._free[z];
if(p.y===v.y&&p.height===v.height&&p.x+p.width===v.x)p.width+=v.width;else if(p.x===v.x&&p.width===v.width&&p.y+p.height===v.y)p.height+=v.height;else if(v.y===p.y&&v.height===p.height&&v.x+v.width===p.x)p.x=v.x,p.width+=v.width;else if(v.x===p.x&&v.width===p.width&&v.y+v.height===p.y)p.y=v.y,p.height+=v.height;else continue;this._free.splice(z,1);this.release(v)}this._free.push(v)};u._createClass(h,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);
return h}()})},"esri/views/2d/engine/vectorTiles/GlyphSource":function(){define(["../../../../request","../../../../core/pbf"],function(u,n){let h=function(){function v(p){this._metrics=[];this._bitmaps=[];if(p)for(;p.next();)switch(p.tag()){case 1:{const g=p.getMessage();for(;g.next();)switch(g.tag()){case 3:{const e=g.getMessage();let b,a,c,d,f,l,m;for(;e.next();)switch(e.tag()){case 1:b=e.getUInt32();break;case 2:a=e.getBytes();break;case 3:c=e.getUInt32();break;case 4:d=e.getUInt32();break;case 5:f=
e.getSInt32();break;case 6:l=e.getSInt32();break;case 7:m=e.getUInt32();break;default:e.skip()}e.release();b&&(this._metrics[b]={width:c,height:d,left:f,top:l,advance:m},this._bitmaps[b]=a);break}default:g.skip()}g.release();break}default:p.skip()}}var z=v.prototype;z.getMetrics=function(p){return this._metrics[p]};z.getBitmap=function(p){return this._bitmaps[p]};return v}(),r=function(){function v(){this._ranges=[]}var z=v.prototype;z.getRange=function(p){return this._ranges[p]};z.addRange=function(p,
g){this._ranges[p]=g};return v}();return function(){function v(p){this._glyphInfo={};this._baseURL=p}var z=v.prototype;z.getRange=function(p,g){const e=this._getFontStack(p);if(e.getRange(g))return Promise.resolve();const b=256*g,a=b+255;if(this._baseURL)return p=this._baseURL.replace("{fontstack}",p).replace("{range}",b+"-"+a),u(p,{responseType:"array-buffer"}).then(c=>{e.addRange(g,new h(new n(new Uint8Array(c.data),new DataView(c.data))))}).catch(()=>{e.addRange(g,new h)});e.addRange(g,new h);
return Promise.resolve()};z.getGlyph=function(p,g){if(p=this._getFontStack(p)){var e=Math.floor(g/256);if(!(256<e)&&(p=p.getRange(e)))return{metrics:p.getMetrics(g),bitmap:p.getBitmap(g)}}};z._getFontStack=function(p){let g=this._glyphInfo[p];g||(g=this._glyphInfo[p]=new r);return g};return v}()})},"esri/views/2d/engine/vectorTiles/SpriteMosaic":function(){define(["../../../../symbols/cim/CIMSymbolHelper","./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(u,
n,h,r,v){return function(){function z(g,e,b=0){this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;(0>=g||0>=e)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=g;this._pageHeight=e;0<b&&(this._maxItemSize=b);this._binPack=new n(g-4,e-4)}var p=z.prototype;p.dispose=function(){this._binPack=null;this._mosaicRects={};
for(const g of this._textures)g&&g.dispose();this._textures.length=0};p.getWidth=function(g){return g>=this._size.length?-1:this._size[g][0]};p.getHeight=function(g){return g>=this._size.length?-1:this._size[g][1]};p.getPageSize=function(g){return g>=this._size.length?null:this._size[g]};p.setSpriteSource=function(g){this.dispose();this.pixelRatio=g.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new n(this._pageWidth-4,this._pageHeight-4);const e=new Uint32Array(Math.floor(this._pageWidth)*
Math.floor(this._pageHeight));this._mosaicsData[0]=e;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=g};p.getSpriteItem=function(g,e=!1){var b=this._mosaicRects[g];if(b)return b;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;let a;g&&g.startsWith("dasharray-")?([b,a]=this._rasterizeDash(g),e=!0):b=this._sprites.getSpriteInfo(g);if(!b||!b.width||!b.height||0>b.width||0>b.height)return null;const c=b.width,d=b.height,
[f,l,m]=this._allocateImage(c,d);if(0>=f.width)return null;this._copy(f,b,l,m,e,a);b={rect:f,width:c,height:d,sdf:b.sdf,simplePattern:!1,pixelRatio:b.pixelRatio,page:l};return this._mosaicRects[g]=b};p.getSpriteItems=function(g){const e={};for(const b of g)e[b.name]=this.getSpriteItem(b.name,b.repeat);return e};p.getMosaicItemPosition=function(g,e){e=(g=this.getSpriteItem(g,e))&&g.rect;if(!e)return null;e.width=g.width;e.height=g.height;return{tl:[e.x+2,e.y+2],br:[e.x+2+g.width,e.y+2+g.height],page:g.page}};
p.bind=function(g,e,b=0,a=0){this._textures[b]||(this._textures[b]=new v.Texture(g,{pixelFormat:r.PixelFormat.RGBA,dataType:r.PixelType.UNSIGNED_BYTE,wrapMode:r.TextureWrapMode.CLAMP_TO_EDGE,width:this._size[b][0],height:this._size[b][1]},new Uint8Array(this._mosaicsData[b].buffer)));const c=this._textures[b];c.setSamplingMode(e);this._dirties[b]&&c.setData(new Uint8Array(this._mosaicsData[b].buffer));g.bindTexture(c,a);this._dirties[b]=!1};z._copyBits=function(g,e,b,a,c,d,f,l,m,k,q){let t=a*e+b;
f=l*d+f;if(q)for(f-=d,q=-1;q<=k;q++,t=((q+k)%k+a)*e+b,f+=d)for(l=-1;l<=m;l++)c[f+l]=g[t+(l+m)%m];else for(b=0;b<k;b++){for(a=0;a<m;a++)c[f+a]=g[t+a];t+=e;f+=d}};p._copy=function(g,e,b,a,c,d){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(b>=this._mosaicsData.length)){var f=new Uint32Array(d?d.buffer:this._sprites.image.buffer),l=this._mosaicsData[b];l&&f||console.error("Source or target images are uninitialized!");z._copyBits(f,d?e.width:this._sprites.width,e.x,e.y,l,a[0],g.x+2,g.y+2,e.width,
e.height,c);this._dirties[b]=!0}};p._allocateImage=function(g,e){g+=2;e+=2;var b=Math.max(g,e);if(this._maxItemSize&&this._maxItemSize<b)return b=new h(0,0,g,e),this._mosaicsData.push(new Uint32Array(g*e)),this._dirties.push(!0),this._size.push([g,e]),this._textures.push(void 0),[b,this._mosaicsData.length-1,[g,e]];b=g%4?4-g%4:4;let a=e%4?4-e%4:4;1===b&&(b=5);1===a&&(a=5);b=this._binPack.allocate(g+b,e+a);return 0>=b.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),
this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new n(this._pageWidth-4,this._pageHeight-4),this._allocateImage(g,e)):[b,this._currentPage,[this._pageWidth,this._pageHeight]]};p._rasterizeDash=function(g){var e=g.match(/\[(.*?)\]/);if(!e)return null;e=e[1].split(",").map(Number);g=g.slice(g.lastIndexOf("-")+1);const [b,
a,c]=u.SymbolHelper.rasterizeDash(e,g);g=new Uint8Array(b.buffer);return[{x:0,y:0,width:a,height:c,sdf:!0,pixelRatio:1},g]};return z}()})},"esri/views/2d/engine/vectorTiles/decluttering/debugging":function(){define(["exports"],function(u){function n(h,r){return`${Math.round(10*h)/10}${r}`}u.drawColliders=function(h,r){const v=window.COLLISION_XRAY;for(let d=0;d<r.length;++d){const f=!r[d].unique.show;if(v||!f)for(const l of r[d].colliders){if(!l.enabled)continue;var z=!r[d].unique.parts[l.partIndex].show;
if(!v&&z)continue;var p=l.xScreen,g=l.yScreen;const m=l.dxScreen,k=l.dyScreen;h.globalAlpha=f||z?.2:1;z=h;var e=p-1,b=g-1;z.fillStyle="green";z.fillRect(e,b,3,3);z=h;e=p+m;b=g+k;var a=l.width,c=l.height;z.strokeStyle="red";z.strokeRect(e,b,a,c);z=h;p=p+m-1;g=g+k-1;z.fillStyle="blue";z.fillRect(p,g,3,3);h.globalAlpha=1}}};u.drawGridIndex=function(h,r){h.strokeStyle="black";const v=r.cellSize,z=r.rows,p=r.columns;for(let g=0;g<z;g++){const e=r.cells[g],b=g*v,a=(g+1)*v;for(let c=0;c<p;c++){const d=e[c],
f=c*v;h.strokeRect(f,b,(c+1)*v-f,a-b);h.fillText(`cells:${d.length}`,f+4,b+12)}}};u.perfAdd=function(h,r,v){if(window.PERFORMANCE_RECORDING_STORAGE){var z=window.PERFORMANCE_RECORDING_STORAGE;z.perf=z.perf||{};z=z.perf;z[h]=z[h]||{start:null,time:0,min:void 0,max:void 0,samples:[],unit:v};z[h].time+=r;z[h].samples.push(r);if(null==z[h].min||r<z[h].min)z[h].min=r;if(null==z[h].max||r>z[h].max)z[h].max=r}};u.perfClear=function(){window.PERFORMANCE_RECORDING_STORAGE&&(window.PERFORMANCE_RECORDING_STORAGE.perf=
{})};u.perfElement=function(h){if(!window.PERFORMANCE_RECORDING_STORAGE){var r=document.createElement("div");r.innerHTML="No recorded data is present because performance recording is disabled.";return r}r=document.createElement("div");var v=window.PERFORMANCE_RECORDING_STORAGE.perf;var z='\x3ctable style\x3d"border-collapse: collapse;"\x3e'+`<tr style="text-weight: bold; border-bottom: 1px solid "${h}";"><td>Name</td><td>Total</td><td>Runs</td><td>Average</td><td>Min</td><td>Distribution</td><td>Max</td><td>Histogram (${50} bins)</td></tr>`;
const p=[];for(var g in v)p.push({name:g,value:v[g].time/v[g].samples.length,sortkey:v[g].max});p.sort((f,l)=>-(f.sortkey-l.sortkey));g=p.map(f=>f.name);for(var e of g)z+="\x3ctr\x3e",z+=`<td>${e}</td>`,z+=`<td>${n(v[e].time,v[e].unit)}</td>`,z+=`<td>${v[e].samples.length}</td>`,z+=`<td>${n(v[e].time/v[e].samples.length,v[e].unit)}</td>`,z+=`<td style="text-align: right;">${n(v[e].min,v[e].unit)}</td>`,z+="\x3ctd data-distribution\x3d'1'\x3e\x3c/td\x3e",z+=`<td>${n(v[e].max,v[e].unit)}</td>`,z+="\x3ctd data-histogram\x3d'1'\x3e\x3c/td\x3e",
z+="\x3c/tr\x3e";r.innerHTML=z+"\x3ctable\x3e";z=r.querySelectorAll("td[data-distribution\x3d'1']");e=r.querySelectorAll("td[data-histogram\x3d'1']");for(let f=0;f<z.length;f++){let l=z[f];var b=document.createElement("canvas");b.height=10;b.width=100;var a=b.getContext("2d");a.strokeStyle=h;a.beginPath();a.moveTo(0,5);a.lineTo(100,5);if(v[g[f]].max>v[g[f]].min+.001)for(const m of v[g[f]].samples){var c=(m-v[g[f]].min)/(v[g[f]].max-v[g[f]].min);a.moveTo(100*c,3);a.lineTo(100*c,7)}a.stroke();a.strokeRect((p[f].value-
v[g[f]].min)/(v[g[f]].max-v[g[f]].min)*100-2,0,4,9);l.appendChild(b);l=e[f];{b=Array(50);for(a=0;a<b.length;a++)b[a]=0;for(const k of v[g[f]].samples)a=(k-v[g[f]].min)/(v[g[f]].max-v[g[f]].min),b[1===a?b.length-1:Math.floor(a*b.length)]++;a=document.createElement("canvas");a.height=30;a.width=120;c=a.getContext("2d");c.strokeStyle=h;c.fillStyle=h;let m=0;for(var d=0;d<b.length;d++)m=Math.max(m,b[d]);for(d=0;d<b.length;d++){const k=b[d];c.fillRect(d*a.width/b.length,a.height*(1-k/m),a.width/b.length,
k/m*a.height)}c.beginPath();c.moveTo(0,a.height);c.lineTo(a.width,a.height);c.stroke();l.appendChild(a)}}h=r.querySelectorAll("td");for(v=0;v<h.length;v++)h[v].style.padding="5px";return r};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/TileManager":function(){define(["exports","../../../../core/LRUCache","../../../../core/maybe","../../tiling/TileCoverage","../../tiling/TileKey"],function(u,n,h,r,v){const z=(g,e)=>g+1/
(1<<2*e);let p=function(){function g(b,a){this._tiles=new Map;this._tileCache=new n(40,c=>c.dispose());this._viewSize=[0,0];this._visibleTiles=new Map;this.acquireTile=b.acquireTile;this.releaseTile=b.releaseTile;this.tileInfoView=b.tileInfoView;this._container=a}var e=g.prototype;e.destroy=function(){for(const [,b]of this._tiles)b.dispose();this._tiles=null;this._tileCache.clear();this._tileCache=null};e.update=function(b){this._updateCacheSize(b);const a=this.tileInfoView;b=a.getTileCoverage(b.state,
0,"smallest");const {spans:c,lodInfo:d}=b,{level:f}=d,l=this._tiles,m=new Set,k=new Set;for(const {row:t,colFrom:w,colTo:A}of c)for(let x=w;x<=A;x++){const y=v.getId(f,t,d.normalizeCol(x),d.getWorldForColumn(x)),B=this._getOrAcquireTile(y);m.add(y);B.processed()?this._addToContainer(B):k.add(new v(y))}for(const [t,w]of l)w.isCoverage=m.has(t);for(var q of k)this._findPlaceholdersForMissingTiles(q,m);q=!1;for(const [t,w]of l)w.neededForCoverage=m.has(t),w.neededForCoverage||w.isHoldingForFade&&a.intersects(b,
w.key)&&m.add(t),w.isFading&&(q=!0);for(const [t]of this._tiles)m.has(t)||this._releaseTile(t);r.pool.release(b);return!q};e.clear=function(){this._tiles.clear();this._tileCache.clear();this._visibleTiles.clear()};e.clearCache=function(){this._tileCache.clear()};e._findPlaceholdersForMissingTiles=function(b,a){var c=[];for(const [,d]of this._tiles)this._addPlaceholderChild(c,d,b,a);c=c.reduce(z,0);1E-6>Math.abs(1-c)||this._addPlaceholderParent(b.id,a)};e._addPlaceholderChild=function(b,a,c,d){if(!(a.key.level<=
c.level)&&a.hasData()){{var f=a.key;const l=f.level-c.level;f=c.row===f.row>>l&&c.col===f.col>>l&&c.world===f.world}f&&(this._addToContainer(a),d.add(a.id),b.push(a.key.level-c.level))}};e._addPlaceholderParent=function(b,a){const c=this._tiles;for(;;){{const [f,l,m,k]=b.split("/");b=parseInt(f,10);b=0===b?null:`${b-1}/${parseInt(l,10)>>1}/${parseInt(m,10)>>1}/${parseInt(k,10)}`}if(!b||a.has(b))break;const d=c.get(b);if(d&&d.hasData()){this._addToContainer(d);a.add(d.id);break}}};e._getOrAcquireTile=
function(b){let a=this._tiles.get(b);if(a)return a;(a=this._tileCache.pop(b))||(a=this.acquireTile(new v(b)));this._tiles.set(b,a);return a};e._releaseTile=function(b){const a=this._tiles.get(b);this.releaseTile(a);this._removeFromContainer(a);this._tiles.delete(b);a.hasData()?this._tileCache.put(b,a,1):a.dispose()};e._addToContainer=function(b){let a;const c=[],d=this._container;if(!d.contains(b)){var f=this._visibleTiles;for(const [,l]of f)this._canConnectDirectly(b,l)&&c.push(l),h.isNone(a)&&this._canConnectDirectly(l,
b)&&(a=l);if(h.isSome(a)){for(const l of c)a.childrenTiles.delete(l),b.childrenTiles.add(l),l.parentTile=b;a.childrenTiles.add(b);b.parentTile=a}else for(const l of c)b.childrenTiles.add(l),l.parentTile=b;f.set(b.id,b);d.addChild(b)}};e._removeFromContainer=function(b){this._visibleTiles.delete(b.id);this._container.removeChild(b);if(h.isSome(b.parentTile)){b.parentTile.childrenTiles.delete(b);for(const a of b.childrenTiles)h.isSome(b.parentTile)&&b.parentTile.childrenTiles.add(a)}for(const a of b.childrenTiles)a.parentTile=
b.parentTile;b.parentTile=null;b.childrenTiles.clear()};e._canConnectDirectly=function(b,a){b=b.key;let {level:c,row:d,col:f,world:l}=a.key;for(a=this._visibleTiles;0<c;){c--;d>>=1;f>>=1;if(b.level===c&&b.row===d&&b.col===f&&b.world===l)return!0;if(a.has(`${c}/${d}/${f}/${l}`))break}return!1};e._updateCacheSize=function(b){b=b.state.size;if(b[0]!==this._viewSize[0]||b[1]!==this._viewSize[1]){var a=Math.ceil(b[0]/512)+1,c=Math.ceil(b[1]/512)+1;this._viewSize[0]=b[0];this._viewSize[1]=b[1];this._tileCache.maxSize=
5*a*c}};return g}();u.TileManager=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/VectorTile":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f32 ./enums ./RenderBucket ./decluttering/config ../webgl/TiledDisplayObject".split(" "),function(u,n,h,r,v,z,p,g,e){e=function(a){function c(f,l,m,k,q,t,w=null){l=a.call(this,f,l,m,k,q,
4096,4096)||this;l._memCache=w;l.type="vector-tile";l._referenced=0;l._hasSymbolBuckets=!1;l._memoryUsedByLayerData=0;l.layerData=new Map;l.layerCount=0;l.status="loading";l.allSymbolsFadingOut=!1;l.lastOpacityUpdate=0;l.symbols=new Map;l.isCoverage=!1;l.neededForCoverage=!1;l.decluttered=!1;l.invalidating=!1;l.parentTile=null;l.childrenTiles=new Set;l._processed=!1;l._referenced=1;l.styleRepository=t;l.id=f.id;return l}n._inheritsLoose(c,a);var d=c.prototype;d.setData=function(f){this.changeDataImpl(f);
this.requestRender();this.ready();this.invalidating=!1;this._processed=!0};d.deleteLayerData=function(f){let l=!1;for(const m of f)this.layerData.has(m)&&(f=this.layerData.get(m),this._memoryUsedByLayerData-=f.memoryUsed,f.type===z.BucketType.SYMBOL&&this.symbols.has(m)&&(this.symbols.delete(m),l=!0),f.destroy(),this.layerData.delete(m),this.layerCount--);h.isSome(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData);l&&this.emit("symbols-changed");this.requestRender()};
d.processed=function(){return this._processed};d.hasData=function(){return 0<this.layerCount};d.dispose=function(){"unloaded"!==this.status&&(b.delete(this),c._destroyRenderBuckets(this.layerData),this.layerData=null,this._memoryUsedByLayerData=this.layerCount=0,this.destroy(),this.status="unloaded")};d.release=function(){return 0===--this._referenced?(this.dispose(),this.stage=null,!0):!1};d.retain=function(){++this._referenced};d.changeDataImpl=function(f){let l=!1;if(f){const {bucketsWithData:m,
emptyBuckets:k}=f;f=this._createRenderBuckets(m);if(k&&0<k.byteLength){const q=new Uint32Array(k);for(const t of q)this._deleteLayerData(t)}for(const [q,t]of f)this._deleteLayerData(q),t.type===z.BucketType.SYMBOL&&(this.symbols.set(q,t.symbols),l=!0),this._memoryUsedByLayerData+=t.memoryUsed,this.layerData.set(q,t),this.layerCount++;h.isSome(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData)}this._hasSymbolBuckets=!1;for(const [,m]of this.layerData)m.type===
z.BucketType.SYMBOL&&(this._hasSymbolBuckets=!0);l&&this.emit("symbols-changed")};d.attachWithContext=function(f){this.stage={context:f,trashDisplayObject(l){l.processDetach()},untrashDisplayObject(){return!1}}};d.setTransform=function(f,l){a.prototype.setTransform.call(this,f,l);var m=l/(f.resolution*f.pixelRatio);l=this.width/this.rangeX*m;m*=this.height/this.rangeY;const k=[0,0];f.toScreen(k,[this.x,this.y]);const q=this.transforms.tileUnitsToPixels;r.identity(q);r.translate(q,q,k);r.rotate(q,
q,Math.PI*f.rotation/180);r.scale(q,q,[l,m,1])};d._createTransforms=function(){return{dvs:v.create(),tileMat3:v.create(),tileUnitsToPixels:v.create()}};c._destroyRenderBuckets=function(f){if(f){var l=new Set;f.forEach(m=>{l.has(m)||(m.destroy(),l.add(m))});f.clear()}};d._createRenderBuckets=function(f){const l=new Map,m=new Map;for(const k of f){f=this._deserializeBucket(k,m);for(const q of f.layerUIDs)l.set(q,f)}return l};d._deserializeBucket=function(f,l){let m=l.get(f);if(m)return m;switch((new Uint32Array(f))[0]){case z.BucketType.FILL:m=
new p.FillRenderBucket(f,this.styleRepository);break;case z.BucketType.LINE:m=new p.LineRenderBucket(f,this.styleRepository);break;case z.BucketType.SYMBOL:m=new p.SymbolRenderBucket(f,this.styleRepository,this);break;case z.BucketType.CIRCLE:m=new p.CircleRenderBucket(f,this.styleRepository)}l.set(f,m);return m};d._deleteLayerData=function(f){if(this.layerData.has(f)){var l=this.layerData.get(f);this._memoryUsedByLayerData-=l.memoryUsed;l.destroy();this.layerData.delete(f);this.layerCount--}};n._createClass(c,
[{key:"hasSymbolBuckets",get:function(){return this._hasSymbolBuckets}},{key:"isFading",get:function(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<g.FADE_DURATION}},{key:"isHoldingForFade",get:function(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<g.FADE_DURATION)}},{key:"wasRequested",get:function(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}},{key:"referenced",get:function(){return this._referenced}},
{key:"memoryUsage",get:function(){return(this._memoryUsedByLayerData+256)/(this._referenced||1)}}]);return c}(e.TiledDisplayObject);const b=new Map;u.VectorTile=e;u.printAllocations=function(){b.forEach((a,c)=>{console.log(`\n${c.key}:`);a[0].forEach(d=>console.log(d));console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d");a[1].forEach(d=>console.log(d))})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/RenderBucket":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./enums ./decluttering/util ../../../webgl/BufferObject ../../../webgl/enums ../../../webgl/VertexArrayObject".split(" "),
function(u,n,h,r,v,z,p,g){let e=function(){function f(m,k){this.layerUIDs=[];this.isDestroyed=!1;this.data=m;this.memoryUsed=m.byteLength;let q=1;m=new Uint32Array(m);this.layerUIDs=[];const t=m[q++];for(let w=0;w<t;w++)this.layerUIDs[w]=m[q++];this.bufferDataOffset=q;k&&(this.layer=k.getStyleLayerByUID(this.layerUIDs[0]))}var l=f.prototype;l.destroy=function(){this.isDestroyed||(this.doDestroy(),this.isDestroyed=!0)};l.prepareForRendering=function(m){h.isNone(this.data)||(this.doPrepareForRendering(m,
this.data,this.bufferDataOffset),this.data=null)};n._createClass(f,[{key:"isPreparedForRendering",get:function(){return h.isNone(this.data)}},{key:"offset",get:function(){return this.bufferDataOffset}}]);return f}(),b=function(f){function l(k,q){q=f.call(this,k,q)||this;q.type=r.BucketType.LINE;q.lineIndexStart=0;q.lineIndexCount=0;k=new Uint32Array(k);let t=q.bufferDataOffset;q.lineIndexStart=k[t++];q.lineIndexCount=k[t++];const w=k[t++];if(0<w){const A=new Map;for(let x=0;x<w;x++){const y=k[t++],
B=k[t++],C=k[t++];A.set(y,[B,C])}q.patternMap=A}q.bufferDataOffset=t;return q}n._inheritsLoose(l,f);var m=l.prototype;m.hasData=function(){return 0<this.lineIndexCount};m.triangleCount=function(){return this.lineIndexCount/3};m.doDestroy=function(){h.isSome(this.lineVertexArrayObject)&&this.lineVertexArrayObject.dispose();h.isSome(this.lineVertexBuffer)&&this.lineVertexBuffer.dispose();h.isSome(this.lineIndexBuffer)&&this.lineIndexBuffer.dispose();this.lineIndexBuffer=this.lineVertexBuffer=this.lineVertexArrayObject=
null;this.memoryUsed=0};m.doPrepareForRendering=function(k,q,t){q=new Uint32Array(q);var w=new Int32Array(q.buffer);const A=q[t++];this.lineVertexBuffer=z.BufferObject.createVertex(k,p.Usage.STATIC_DRAW,new Int32Array(w.buffer,4*t,A));t+=A;w=q[t++];this.lineIndexBuffer=z.BufferObject.createIndex(k,p.Usage.STATIC_DRAW,new Uint32Array(q.buffer,4*t,w));t+=w;t=this.layer.lineMaterial;this.lineVertexArrayObject=new g.VertexArrayObject(k,t.getAttributeLocations(),t.getLayoutInfo(),{geometry:this.lineVertexBuffer},
this.lineIndexBuffer)};return l}(e),a=function(f){function l(k,q){q=f.call(this,k,q)||this;q.type=r.BucketType.FILL;q.fillIndexStart=0;q.fillIndexCount=0;q.outlineIndexStart=0;q.outlineIndexCount=0;k=new Uint32Array(k);let t=q.bufferDataOffset;q.fillIndexStart=k[t++];q.fillIndexCount=k[t++];q.outlineIndexStart=k[t++];q.outlineIndexCount=k[t++];const w=k[t++];if(0<w){const A=new Map;for(let x=0;x<w;x++){const y=k[t++],B=k[t++],C=k[t++];A.set(y,[B,C])}q.patternMap=A}q.bufferDataOffset=t;return q}n._inheritsLoose(l,
f);var m=l.prototype;m.hasData=function(){return 0<this.fillIndexCount||0<this.outlineIndexCount};m.triangleCount=function(){return(this.fillIndexCount+this.outlineIndexCount)/3};m.doDestroy=function(){h.isSome(this.fillVertexArrayObject)&&this.fillVertexArrayObject.dispose();h.isSome(this.fillVertexBuffer)&&this.fillVertexBuffer.dispose();h.isSome(this.fillIndexBuffer)&&this.fillIndexBuffer.dispose();this.fillIndexBuffer=this.fillVertexBuffer=this.fillVertexArrayObject=null;h.isSome(this.outlineVertexArrayObject)&&
this.outlineVertexArrayObject.dispose();h.isSome(this.outlineVertexBuffer)&&this.outlineVertexBuffer.dispose();h.isSome(this.outlineIndexBuffer)&&this.outlineIndexBuffer.dispose();this.outlineIndexBuffer=this.outlineVertexBuffer=this.outlineVertexArrayObject=null;this.memoryUsed=0};m.doPrepareForRendering=function(k,q,t){q=new Uint32Array(q);var w=new Int32Array(q.buffer),A=q[t++];this.fillVertexBuffer=z.BufferObject.createVertex(k,p.Usage.STATIC_DRAW,new Int32Array(w.buffer,4*t,A));t+=A;A=q[t++];
this.fillIndexBuffer=z.BufferObject.createIndex(k,p.Usage.STATIC_DRAW,new Uint32Array(q.buffer,4*t,A));t+=A;A=q[t++];this.outlineVertexBuffer=z.BufferObject.createVertex(k,p.Usage.STATIC_DRAW,new Int32Array(w.buffer,4*t,A));t+=A;w=q[t++];this.outlineIndexBuffer=z.BufferObject.createIndex(k,p.Usage.STATIC_DRAW,new Uint32Array(q.buffer,4*t,w));t+=w;q=this.layer;t=q.fillMaterial;q=q.outlineMaterial;this.fillVertexArrayObject=new g.VertexArrayObject(k,t.getAttributeLocations(),t.getLayoutInfo(),{geometry:this.fillVertexBuffer},
this.fillIndexBuffer);this.outlineVertexArrayObject=new g.VertexArrayObject(k,q.getAttributeLocations(),q.getLayoutInfo(),{geometry:this.outlineVertexBuffer},this.outlineIndexBuffer)};return l}(e),c=function(f){function l(k,q,t){q=f.call(this,k,q)||this;q.type=r.BucketType.SYMBOL;q.iconPerPageElementsMap=new Map;q.glyphPerPageElementsMap=new Map;q.symbolInstances=[];q.isIconSDF=!1;q.opacityChanged=!1;q.lastOpacityUpdate=0;q.symbols=[];const w=new Uint32Array(k),A=new Int32Array(k);k=new Float32Array(k);
let x=q.bufferDataOffset;q.isIconSDF=!!w[x++];var y=w[x++];for(var B=0;B<y;B++){var C=w[x++],D=w[x++],F=w[x++];q.iconPerPageElementsMap.set(C,[D,F])}y=w[x++];for(B=0;B<y;B++)C=w[x++],D=w[x++],F=w[x++],q.glyphPerPageElementsMap.set(C,[D,F]);y=w[x++];B=w[x++];q.iconOpacity=new Int32Array(y);q.textOpacity=new Int32Array(B);x=v.deserializeSymbols(w,A,k,x,q.symbols,t);q.bufferDataOffset=x;return q}n._inheritsLoose(l,f);var m=l.prototype;m.hasData=function(){return 0<this.iconPerPageElementsMap.size||0<
this.glyphPerPageElementsMap.size};m.triangleCount=function(){let k=0;for(const [,q]of this.iconPerPageElementsMap)k+=q[1];for(const [,q]of this.glyphPerPageElementsMap)k+=q[1];return k/3};m.doDestroy=function(){h.isSome(this.iconVertexArrayObject)&&this.iconVertexArrayObject.dispose();h.isSome(this.iconVertexBuffer)&&this.iconVertexBuffer.dispose();h.isSome(this.iconOpacityBuffer)&&this.iconOpacityBuffer.dispose();h.isSome(this.iconIndexBuffer)&&this.iconIndexBuffer.dispose();this.iconIndexBuffer=
this.iconOpacityBuffer=this.iconVertexBuffer=this.iconVertexArrayObject=null;h.isSome(this.textVertexArrayObject)&&this.textVertexArrayObject.dispose();h.isSome(this.textVertexBuffer)&&this.textVertexBuffer.dispose();h.isSome(this.textOpacityBuffer)&&this.textOpacityBuffer.dispose();h.isSome(this.textIndexBuffer)&&this.textIndexBuffer.dispose();this.textIndexBuffer=this.textOpacityBuffer=this.textVertexBuffer=this.textVertexArrayObject=null;this.memoryUsed=0};m.updateOpacityInfo=function(){if(this.opacityChanged){this.opacityChanged=
!1;var k=h.unwrap(this.iconOpacity),q=h.unwrap(this.iconOpacityBuffer);0<k.length&&k.byteLength===q.size&&q.setSubData(k);k=h.unwrap(this.textOpacity);q=h.unwrap(this.textOpacityBuffer);0<k.length&&k.byteLength===q.size&&q.setSubData(k)}};m.doPrepareForRendering=function(k,q,t){q=new Uint32Array(q);var w=new Int32Array(q.buffer),A=q[t++];this.iconVertexBuffer=z.BufferObject.createVertex(k,p.Usage.STATIC_DRAW,new Int32Array(w.buffer,4*t,A));t+=A;A=q[t++];this.iconIndexBuffer=z.BufferObject.createIndex(k,
p.Usage.STATIC_DRAW,new Uint32Array(q.buffer,4*t,A));t+=A;A=q[t++];this.textVertexBuffer=z.BufferObject.createVertex(k,p.Usage.STATIC_DRAW,new Int32Array(w.buffer,4*t,A));t+=A;w=q[t++];this.textIndexBuffer=z.BufferObject.createIndex(k,p.Usage.STATIC_DRAW,new Uint32Array(q.buffer,4*t,w));t+=w;this.iconOpacityBuffer=z.BufferObject.createVertex(k,p.Usage.STATIC_DRAW,h.unwrap(this.iconOpacity).buffer);this.textOpacityBuffer=z.BufferObject.createVertex(k,p.Usage.STATIC_DRAW,h.unwrap(this.textOpacity).buffer);
q=this.layer;t=q.iconMaterial;q=q.textMaterial;this.iconVertexArrayObject=new g.VertexArrayObject(k,t.getAttributeLocations(),t.getLayoutInfo(),{geometry:this.iconVertexBuffer,opacity:this.iconOpacityBuffer},this.iconIndexBuffer);this.textVertexArrayObject=new g.VertexArrayObject(k,q.getAttributeLocations(),q.getLayoutInfo(),{geometry:this.textVertexBuffer,opacity:this.textOpacityBuffer},this.textIndexBuffer)};return l}(e),d=function(f){function l(k,q){q=f.call(this,k,q)||this;q.type=r.BucketType.CIRCLE;
q.circleIndexStart=0;q.circleIndexCount=0;k=new Uint32Array(k);let t=q.bufferDataOffset;q.circleIndexStart=k[t++];q.circleIndexCount=k[t++];q.bufferDataOffset=t;return q}n._inheritsLoose(l,f);var m=l.prototype;m.hasData=function(){return 0<this.circleIndexCount};m.triangleCount=function(){return this.circleIndexCount/3};m.doDestroy=function(){h.isSome(this.circleVertexArrayObject)&&this.circleVertexArrayObject.dispose();h.isSome(this.circleVertexBuffer)&&this.circleVertexBuffer.dispose();h.isSome(this.circleIndexBuffer)&&
this.circleIndexBuffer.dispose();this.circleIndexBuffer=this.circleVertexBuffer=this.circleVertexArrayObject=null;this.memoryUsed=0};m.doPrepareForRendering=function(k,q,t){q=new Uint32Array(q);var w=new Int32Array(q.buffer);const A=q[t++];this.circleVertexBuffer=z.BufferObject.createVertex(k,p.Usage.STATIC_DRAW,new Int32Array(w.buffer,4*t,A));t+=A;w=q[t++];this.circleIndexBuffer=z.BufferObject.createIndex(k,p.Usage.STATIC_DRAW,new Uint32Array(q.buffer,4*t,w));t+=w;t=this.layer.circleMaterial;this.circleVertexArrayObject=
new g.VertexArrayObject(k,t.getAttributeLocations(),t.getLayoutInfo(),{geometry:this.circleVertexBuffer},this.circleIndexBuffer)};return l}(e);u.CircleRenderBucket=d;u.FillRenderBucket=a;u.LineRenderBucket=b;u.RenderBucketBase=e;u.SymbolRenderBucket=c;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/util":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe",
"../enums","./core"],function(u,n,h,r,v){let z=function(b){this.tile=b;this.parent=null;this.children=new Set},p=function(){function b(){this.nodes=new Map;this.roots=new Set}var a=b.prototype;a.create=function(c){const d=new z(c);let f;const l=[];this.nodes.forEach(m=>{this._canConnectDirectly(d,m)&&l.push(m);!f&&this._canConnectDirectly(m,d)&&(f=m)});if(f){for(const m of l)f.children.delete(m),d.children.add(m),m.parent=d;f.children.add(d);d.parent=f}else{this.roots.add(d);for(const m of l)d.children.add(m),
m.parent=d,this.roots.delete(m)}this.nodes.set(c.key.id,d);return d};a.destroy=function(c){h.isSome(c.parent)?(c.parent.children.delete(c),c.children.forEach(d=>{h.isSome(c.parent)&&c.parent.children.add(d)})):this.roots.delete(c);c.children.forEach(d=>{(d.parent=c.parent)||this.roots.add(d)});this.nodes.delete(c.tile.key.id)};a.clear=function(){this.roots.clear();this.nodes.clear()};a._canConnectDirectly=function(c,d){let {level:f,row:l,col:m}=d.tile.key;for({world:d}=d.tile.key;0<f;){f--;l>>=1;
m>>=1;if(c.tile.key.level===f&&c.tile.key.row===l&&c.tile.key.col===m&&c.tile.key.world===d)return!0;if(this.nodes.has(`${f}/${l}/${m}/${d}`))break}return!1};return b}(),g=function(){function b(){this._tileGraph=new p;this._tileArray=null}var a=b.prototype;a.has=function(c){return"string"===typeof c?this._tileGraph.nodes.has(c):this._tileGraph.nodes.has(c.key.id)};a.getAll=function(){this._tileArray||(this._tileArray=[],this._tileGraph.nodes.forEach(c=>{this._tileArray.push(c.tile)}));return this._tileArray};
a.getRoots=function(){const c=[];this._tileGraph.roots.forEach(d=>{c.push(d.tile)});return c};a.getParent=function(c){c=this._tileGraph.nodes.get("string"===typeof c?c:c.key.id);return h.isSome(c.parent)&&c.parent.tile};a.getChildren=function(c){const d=[];this._tileGraph.nodes.get("string"===typeof c?c:c.key.id).children.forEach(f=>{d.push(f.tile)});return d};a.get=function(c){return this._tileGraph.nodes.get(c).tile};a.removeKey=function(c){c=this._tileGraph.nodes.get(c);this._tileGraph.destroy(c);
this._tileArray=null};a.forEach=function(c){this._tileGraph.nodes.forEach((d,f)=>c(d.tile,f))};a.add=function(c){this._tileGraph.create(c);this._tileArray=null};a.remove=function(c){c=this._tileGraph.nodes.get(c.key.id);this._tileGraph.destroy(c);this._tileArray=null};a.clear=function(){this._tileGraph.clear();this._tileArray=[]};return b}(),e=function(){function b(c,d,f){this._rows=Math.ceil(d/f);this._columns=Math.ceil(c/f);this._cellSize=f;this.cells=Array(this._rows);for(c=0;c<this._rows;c++)for(this.cells[c]=
Array(this._columns),d=0;d<this._columns;d++)this.cells[c][d]=[]}var a=b.prototype;a.getCell=function(c,d){d=Math.min(Math.max(Math.floor(d/this._cellSize),0),this._rows-1);c=Math.min(Math.max(Math.floor(c/this._cellSize),0),this._columns-1);return this.cells[d]&&this.cells[d][c]||null};a.getCellSpan=function(c,d,f,l){return[Math.min(Math.max(Math.floor(c/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(d/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(f/this._cellSize),
0),this.columns-1),Math.min(Math.max(Math.floor(l/this._cellSize),0),this.rows-1)]};n._createClass(b,[{key:"cellSize",get:function(){return this._cellSize}},{key:"columns",get:function(){return this._columns}},{key:"rows",get:function(){return this._rows}}]);return b}();u.GridIndex=e;u.TileForest=g;u.TileGraph=p;u.TileNode=z;u.deserializeSymbols=function(b,a,c,d,f,l){const m=a[d++];for(let t=0;t<m;t++){const w=new v.VTLSymbol(l);w.xTile=a[d++];w.yTile=a[d++];w.hash=a[d++];w.priority=a[d++];var k=
a[d++];for(var q=0;q<k;q++){const A=a[d++],x=a[d++],y=a[d++],B=a[d++],C=!!a[d++],D=a[d++],F=c[d++],E=c[d++],G=a[d++],O=a[d++];w.colliders.push({xTile:A,yTile:x,dxPixels:y,dyPixels:B,hard:C,partIndex:D,width:G,height:O,minLod:F,maxLod:E})}k=b[d++];for(q=0;q<k;q++)w.textVertexRanges.push([b[d++],b[d++]]);k=b[d++];for(q=0;q<k;q++)w.iconVertexRanges.push([b[d++],b[d++]]);f.push(w)}return d};u.tileCoordChange=function(b,a,c,d,f,l){c-=f;if(0<=c)return(a>>c)+(d-(l<<c))*(b>>c);c=-c;return a-(l-(d<<c))*(b>>
c)<<c};u.writeOpacityToBuffers=function(b,a,c){for(const [t,w]of b.symbols){{var d=b,f=a,l=c,m=w;const A=d.layerData.get(t);if(A.type===r.BucketType.SYMBOL){for(const x of m){m=x.unique;var k=void 0;if(x.selectedForRendering){var q=m.parts[0];k=q.startOpacity;q=q.targetOpacity;d.allSymbolsFadingOut=d.allSymbolsFadingOut&&0===q;k=l?Math.floor(127*k)|q<<7:q?255:0;k|=k<<24|k<<16|k<<8}else k=0;for(const [y,B]of x.iconVertexRanges)for(q=y;q<y+B;q+=4)A.iconOpacity[q/4]=k;x.selectedForRendering?(k=m.parts[1],
m=k.startOpacity,k=k.targetOpacity,d.allSymbolsFadingOut=d.allSymbolsFadingOut&&0===k,m=l?Math.floor(127*m)|k<<7:k?255:0,k=m<<24|m<<16|m<<8|m):k=0;for(const [y,B]of x.textVertexRanges)for(m=y;m<y+B;m+=4)A.textOpacity[m/4]=k}A.lastOpacityUpdate=f;A.opacityChanged=!0}}}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/core":function(){define(["exports"],function(u){u.VTLSymbol=function(n){this.hash=this.yTile=
this.xTile=0;this.priority=1;this.colliders=[];this.textVertexRanges=[];this.iconVertexRanges=[];this.tile=n};u.VTLUniqueSymbol=function(){this.tileSymbols=[];this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}];this.show=!1};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/VectorTileContainer":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/aaBoundingRect ./decluttering/SymbolFader ./style/StyleDefinition ../webgl/enums ../webgl/RenderableTile ../webgl/TileContainer ../../tiling/TileCoverage ../../tiling/TileKey ../../../webgl/enums".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){function f(l,m){if(l){const k=l.getLayoutProperty("visibility");if(!k||k.getValue()!==p.Visibility.NONE&&(void 0===l.minzoom||l.minzoom<m+1E-6)&&(void 0===l.maxzoom||l.maxzoom>=m-1E-6))return!0}return!1}b=function(l){function m(q){q=l.call(this,q)||this;q._backgroundTiles=[];q._pointToCallbacks=new Map;return q}n._inheritsLoose(m,l);var k=m.prototype;k.destroy=function(){this.removeAllChildren();this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=
null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null);h.isSome(this._symbolFader)&&(this._symbolFader.clear(),this._symbolFader=null);this._styleRepository=null;this._backgroundTiles=[];this._pointToCallbacks.clear()};k.setStyleResources=function(q,t,w){this._spriteMosaic=q;this._glyphMosaic=t;this._styleRepository=w;h.isNone(this._symbolFader)&&(q=new z.SymbolFader(this._styleRepository,this.children),q.on("fade-start",()=>{this.emit("fade-start");this.requestRender()}),q.on("fade-complete",
()=>{this.emit("fade-complete");this.requestRender()}),this._symbolFader=q);h.unwrap(this._symbolFader).styleRepository=w};k.setSpriteMosaic=function(q){this._spriteMosaic.dispose();this._spriteMosaic=q};k.deleteStyleLayers=function(q){h.isSome(this._symbolFader)&&this._symbolFader.deleteStyleLayers(q)};k.hitTest=function(){var q=n._asyncToGenerator(function*(t){const w=r.createResolver();this._pointToCallbacks.set(t,w);this.requestRender();return w.promise});return function(t){return q.apply(this,
arguments)}}();k.enterTileInvalidation=function(){for(const q of this.children)q.invalidating=!0};k.createRenderParams=function(q){return{...l.prototype.createRenderParams.call(this,q),renderPass:null,styleLayer:null,styleLayerUID:-1,glyphMosaic:this._glyphMosaic,spriteMosaic:this._spriteMosaic,hasClipping:!!this._clippingInfos}};k.doRender=function(q){!this.visible||q.drawPhase!==g.WGLDrawPhase.MAP&&q.drawPhase!==g.WGLDrawPhase.DEBUG||void 0===this._spriteMosaic||l.prototype.doRender.call(this,q)};
k.addChild=function(q){l.prototype.addChild.call(this,q);h.isSome(this._symbolFader)?this._symbolFader.addTile(q):q.decluttered=!0;this.requestRender();return q};k.removeChild=function(q){h.isSome(this._symbolFader)&&this._symbolFader.removeTile(q);this.requestRender();return l.prototype.removeChild.call(this,q)};k.renderChildren=function(q){const {drawPhase:t}=q;if(t===g.WGLDrawPhase.DEBUG)l.prototype.renderChildren.call(this,q);else if(this._doRender(q),0<this._pointToCallbacks.size){q.drawPhase=
g.WGLDrawPhase.HITTEST;const w=q.painter.effects.hittestVTL;w.bind(q);this._doRender(q);w.draw(q,this._pointToCallbacks);w.unbind(q);q.drawPhase=t}};k.removeAllChildren=function(){for(let q=0;q<this.children.length;q++){const t=this.children[q];h.isSome(this._symbolFader)&&this._symbolFader.removeTile(t);t.dispose()}l.prototype.removeAllChildren.call(this)};k.getStencilTarget=function(){return this.children.filter(q=>q.neededForCoverage&&q.hasData())};k.restartDeclutter=function(){h.isSome(this._symbolFader)&&
this._symbolFader.restartDeclutter()};k._doRender=function(q){const {context:t}=q;var w=this._styleRepository;if(w){var A=w.layers,x=!0;q.drawPhase===g.WGLDrawPhase.HITTEST&&(x=!1);0<w.backgroundBucketIds.length&&(q.renderPass="background",this._renderBackgroundLayers(q,w.backgroundBucketIds));l.prototype.renderChildren.call(this,q);q.drawPhase===g.WGLDrawPhase.MAP&&this._fade(q.displayLevel,q.state);if((w=this.children.filter(B=>B.visible&&B.hasData()))&&0!==w.length){for(var y of w)y.triangleCount=
0;t.setStencilWriteMask(0);t.setColorMask(!0,!0,!0,!0);t.setStencilOp(d.StencilOperation.KEEP,d.StencilOperation.KEEP,d.StencilOperation.REPLACE);t.setStencilTestEnabled(!0);t.setBlendingEnabled(!1);t.setDepthTestEnabled(!0);t.setDepthWriteEnabled(!0);t.setDepthFunction(d.CompareFunction.LEQUAL);t.setClearDepth(1);t.clear(t.gl.DEPTH_BUFFER_BIT);q.renderPass="opaque";for(y=A.length-1;0<=y;y--)this._renderStyleLayer(A[y],q,w);t.setDepthWriteEnabled(!1);t.setBlendingEnabled(x);t.setBlendFunctionSeparate(d.BlendFactor.ONE,
d.BlendFactor.ONE_MINUS_SRC_ALPHA,d.BlendFactor.ONE,d.BlendFactor.ONE_MINUS_SRC_ALPHA);q.renderPass="translucent";for(x=0;x<A.length;x++)this._renderStyleLayer(A[x],q,w);t.setDepthTestEnabled(!1);q.renderPass="symbol";for(x=0;x<A.length;x++)this._renderStyleLayer(A[x],q,w)}t.bindVAO();t.setStencilTestEnabled(!0);t.setBlendingEnabled(!0)}};k._fade=function(q,t){h.isSome(this._symbolFader)&&(this._symbolFader.update(q,t)||this.requestRender())};k._renderStyleLayer=function(q,t,w){const {painter:A,renderPass:x}=
t;if(void 0!==q){var y=q.getLayoutProperty("visibility");if(!y||y.getValue()!==p.Visibility.NONE){switch(q.type){case p.StyleLayerType.BACKGROUND:return;case p.StyleLayerType.FILL:if("opaque"!==x&&"translucent"!==t.renderPass)return;var B="vtlFill";break;case p.StyleLayerType.LINE:if("translucent"!==x)return;B="vtlLine";break;case p.StyleLayerType.CIRCLE:if("symbol"!==x)return;B="vtlCircle";break;case p.StyleLayerType.SYMBOL:if("symbol"!==x)return;B="vtlSymbol"}w=q.type===p.StyleLayerType.SYMBOL?
w.filter(C=>C.decluttered):w.filter(C=>C.neededForCoverage);if("vtlSymbol"!==B&&(y=t.displayLevel,0===w.length||void 0!==q.minzoom&&q.minzoom>=y+1E-6||void 0!==q.maxzoom&&q.maxzoom<y-1E-6))return;y=q.uid;t.styleLayerUID=y;t.styleLayer=q;for(const C of w)if(C.layerData.has(y)){A.renderObjects(t,w,B);break}}}};k._renderBackgroundLayers=function(q,t){const {context:w,displayLevel:A,painter:x,state:y}=q,B=this._styleRepository;var C=!1;for(var D of t)if(B.getLayerById(D).type===p.StyleLayerType.BACKGROUND&&
f(B.getLayerById(D),A)){C=!0;break}if(C){C=this._tileInfoView.getTileCoverage(q.state,0,"smallest");var {spans:F,lodInfo:E}=C,{level:G}=E,O=v.create();D=[];if(this._renderPasses){var H=this._renderPasses[0];h.isSome(this._clippingInfos)&&(H.brushes[0].prepareState(q,this._clippingInfos[0]),H.brushes[0].drawMany(q,this._clippingInfos))}H=this._backgroundTiles;var K=0;for(const {row:L,colFrom:M,colTo:J}of F)for(let R=M;R<=J;R++){if(K<H.length){var P=H[K];P.key.set(G,L,E.normalizeCol(R),E.getWorldForColumn(R));
this._tileInfoView.getTileBounds(O,P.key,!1);P.x=O[0];P.y=O[3]}else{P=new c(G,L,E.normalizeCol(R),E.getWorldForColumn(R));const X=this._tileInfoView.getTileBounds(v.create(),P);P=new e.RenderableTile(P,X[0],X[3],512,512,4096,4096);H.push(P)}P.setTransform(y,this._tileInfoView.getTileResolution(P.key));D.push(P);K++}w.setStencilWriteMask(0);w.setColorMask(!0,!0,!0,!0);w.setStencilOp(d.StencilOperation.KEEP,d.StencilOperation.KEEP,d.StencilOperation.REPLACE);w.setStencilFunction(d.CompareFunction.EQUAL,
0,255);G=!0;q.drawPhase===g.WGLDrawPhase.HITTEST&&(G=!1);w.setStencilTestEnabled(G);for(const L of t)t=B.getLayerById(L),t.type===p.StyleLayerType.BACKGROUND&&f(t,A)&&(q.styleLayerUID=t.uid,q.styleLayer=t,x.renderObjects(q,D,"vtlBackground"));a.pool.release(C)}};return m}(b);u.VectorTileContainer=b;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolFader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/maybe ./config ./core ./jobs ./SymbolDeclutterer ./SymbolRepository ./util ../style/StyleDefinition".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){h=function(c){function d(l,m){var k=c.call(this)||this;k.styleRepository=l;k._tileToHandle=new Map;k._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]};k._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]};k._completed=!1;k._symbolRepository=new e.SymbolRepository(4096,m,()=>new z.VTLUniqueSymbol);k._symbolDeclutterer=new g.SymbolDeclutterer(m,k._symbolRepository,(q,t,w)=>new p.CollisionJob(q,t,w,k.styleRepository,k._zoom,k._viewState.rotation),(q,
t)=>{q.allSymbolsFadingOut=!0;q.lastOpacityUpdate=t;b.writeOpacityToBuffers(q,t,!0);q.decluttered=!0;q.requestRender()},(q,t)=>k.styleRepository.getStyleLayerByUID(q.styleLayerUID).z-k.styleRepository.getStyleLayerByUID(t.styleLayerUID).z,q=>{q=k.styleRepository.getStyleLayerByUID(q);return k._zoom+1E-6<q.minzoom||k._zoom-1E-6>=q.maxzoom?!1:(q=q.getLayoutProperty("visibility"))&&q.getValue()===a.Visibility.NONE?!1:!0});return k}n._inheritsLoose(d,c);var f=d.prototype;f.addTile=function(l){l.decluttered=
!1;this._tileToHandle.set(l,l.on("symbols-changed",()=>{this._symbolRepository.add(l);this.restartDeclutter()}));this._symbolRepository.add(l);this.restartDeclutter()};f.removeTile=function(l){const m=this._tileToHandle.get(l);m&&(this._symbolRepository.removeTile(l),this.restartDeclutter(),m.remove(),this._tileToHandle.delete(l))};f.update=function(l,m){this._zoom=l;this._viewState={scale:m.scale,rotation:m.rotation,center:[m.center[0],m.center[1]],size:[m.size[0],m.size[1]]};this._continueDeclutter();
return this._completed};f.restartDeclutter=function(){this._completed=!1;this._symbolDeclutterer.restart();this._notifyUnstable()};f.clear=function(){this._completed=!1;this._symbolRepository=null;this._symbolDeclutterer.restart();this._tileToHandle.forEach(l=>l.remove());this._tileToHandle.clear()};f.deleteStyleLayers=function(l){this._symbolRepository.deleteStyleLayers(l)};f._continueDeclutter=function(){if(!this._completed||this.stale)this._symbolDeclutterer.running||(this._declutterZoom=this._zoom,
this._declutterViewState.center[0]=this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),(this._completed=this._symbolDeclutterer.continue(v.DECLUTTER_BUDGET))&&
this._scheduleNotifyStable()};f._scheduleNotifyStable=function(){r.isSome(this._stableNotificationHandle)&&clearTimeout(this._stableNotificationHandle);this._stableNotificationHandle=setTimeout(()=>{this._stableNotificationHandle=null;this.emit("fade-complete")},1.5*v.FADE_DURATION)};f._notifyUnstable=function(){r.isSome(this._stableNotificationHandle)&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null);this.emit("fade-start")};n._createClass(d,[{key:"stale",get:function(){return this._zoom!==
this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}}]);return d}(h);u.SymbolFader=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/jobs":function(){define(["exports","../../../../../chunks/mat3f32","./config",
"./util","../style/StyleDefinition"],function(u,n,h,r,v){let z=function(){function p(e,b,a,c,d,f){this._symbols=e;this._styleRepository=c;this._zoom=d;this._currentSymbolCursor=this._currentLayerCursor=0;this._styleProps=new Map;this._allNeededMatrices=new Map;this._gridIndex=new r.GridIndex(b,a,h.COLLISION_GRID_CELL_SIZE);this._si=Math.sin(Math.PI*f/180);this._co=Math.cos(Math.PI*f/180);for(const l of e)for(const m of l.symbols)this._allNeededMatrices.has(m.tile)||this._allNeededMatrices.set(m.tile,
n.clone(m.tile.transforms.tileUnitsToPixels))}var g=p.prototype;g.work=function(e){const b=this._gridIndex,a=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const x=this._symbols[this._currentLayerCursor],y=this._getProperties(x.styleLayerUID);for(;this._currentSymbolCursor<x.symbols.length;this._currentSymbolCursor++){if(99===this._currentSymbolCursor%100&&performance.now()-a>e)return!1;var c=x.symbols[this._currentSymbolCursor];
if(!c.unique.show)continue;{var d=c,f=this._si,l=this._co,m=this._allNeededMatrices.get(c.tile),k=this._zoom;const {iconRotationAlignment:E,textRotationAlignment:G,iconTranslate:O,iconTranslateAnchor:H,textTranslate:K,textTranslateAnchor:P}=y;var q=0;for(const L of d.colliders){const [M,J]=0===L.partIndex?O:K;var t=0===L.partIndex?H:P,w=L.minLod<=k&&k<=L.maxLod;q+=w?0:1;L.enabled=w;L.xScreen=L.xTile*m[0]+L.yTile*m[3]+m[6];L.yScreen=L.xTile*m[1]+L.yTile*m[4]+m[7];t===v.TranslateAnchor.MAP?(L.xScreen+=
l*M-f*J,L.yScreen+=f*M+l*J):(L.xScreen+=M,L.yScreen+=J);v.RotationAlignment.VIEWPORT===(0===L.partIndex?E:G)?(L.dxScreen=L.dxPixels,L.dyScreen=L.dyPixels):(L.dxScreen=l*(L.dxPixels+L.width/2)-f*(L.dyPixels+L.height/2)-L.width/2,L.dyScreen=f*(L.dxPixels+L.width/2)+l*(L.dyPixels+L.height/2)-L.height/2)}0<d.colliders.length&&q===d.colliders.length&&(d.unique.show=!1)}d=c.unique;if(!d.show)continue;const {iconAllowOverlap:B,iconIgnorePlacement:C,textAllowOverlap:D,textIgnorePlacement:F}=y;for(const E of c.colliders)if(E.enabled&&
(f=d.parts[E.partIndex],f.show)){if(l=!(E.partIndex?D:B))a:{l=E.xScreen+E.dxScreen;m=E.yScreen+E.dyScreen;k=l+E.width;q=m+E.height;const [G,O,H,K]=b.getCellSpan(l,m,k,q);for(t=O;t<=K;t++)for(w=G;w<=H;w++){var A=b.cells[t][w];for(const P of A){A=P.xScreen+P.dxScreen;const L=P.yScreen+P.dyScreen,M=A+P.width,J=L+P.height;if(!(k<A||l>M||q<L||m>J)){l=!0;break a}}}l=!1}l&&(E.hard?d.show=!1:f.show=!1)}if(d.show)for(const E of c.colliders){if(!E.enabled)continue;if(E.partIndex?F:C)continue;if(!d.parts[E.partIndex].show)continue;
c=E.xScreen+E.dxScreen;f=E.yScreen+E.dyScreen;const [G,O,H,K]=this._gridIndex.getCellSpan(c,f,c+E.width,f+E.height);for(c=O;c<=K;c++)for(f=G;f<=H;f++)this._gridIndex.cells[c][f].push(E)}}}return!0};g._getProperties=function(e){var b=this._styleProps.get(e);if(b)return b;b=this._zoom;const a=this._styleRepository.getStyleLayerByUID(e);var c=a.getLayoutValue("symbol-placement",b)!==v.SymbolPlacement.POINT;let d=a.getLayoutValue("icon-rotation-alignment",b);d===v.RotationAlignment.AUTO&&(d=c?v.RotationAlignment.MAP:
v.RotationAlignment.VIEWPORT);let f=a.getLayoutValue("text-rotation-alignment",b);f===v.RotationAlignment.AUTO&&(f=c?v.RotationAlignment.MAP:v.RotationAlignment.VIEWPORT);c=a.getPaintValue("icon-translate",b);const l=a.getPaintValue("icon-translate-anchor",b),m=a.getPaintValue("text-translate",b),k=a.getPaintValue("text-translate-anchor",b);b={iconAllowOverlap:a.getLayoutValue("icon-allow-overlap",b),iconIgnorePlacement:a.getLayoutValue("icon-ignore-placement",b),textAllowOverlap:a.getLayoutValue("text-allow-overlap",
b),textIgnorePlacement:a.getLayoutValue("text-ignore-placement",b),iconRotationAlignment:d,textRotationAlignment:f,iconTranslateAnchor:l,iconTranslate:c,textTranslateAnchor:k,textTranslate:m};this._styleProps.set(e,b);return b};return p}();u.CollisionJob=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe",
"./config"],function(u,n,h,r){function v(p,g){if(p.priority-g.priority)return p.priority-g.priority;const e=p.tile.key,b=g.tile.key;return e.world-b.world?e.world-b.world:e.level-b.level?e.level-b.level:e.row-b.row?e.row-b.row:e.col-b.col?e.col-b.col:p.xTile-g.xTile?p.xTile-g.xTile:p.yTile-g.yTile}let z=function(){function p(e,b,a,c,d,f){this._visibleTiles=e;this._symbolRepository=b;this._createCollisionJob=a;this._assignTileSymbolsOpacity=c;this._symbolLayerSorter=d;this._isLayerVisible=f;this._selectionJob=
null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}var g=p.prototype;g.setScreenSize=function(e,b){this._screenWidth===e&&this._screenHeight===b||this.restart();this._screenWidth=e;this._screenHeight=b};g.restart=function(){this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=
!0};g.continue=function(e){this._selectionJob||(this._selectionJob=this._createSelectionJob());if(!this._selectionJobCompleted){var b=performance.now();if(!this._selectionJob.work(e))return!1;this._selectionJobCompleted=!0;e=Math.max(0,e-(performance.now()-b));if(0===e)return!1}this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight));if(!this._collisionJobCompleted){b=performance.now();if(!this._collisionJob.work(e))return!1;
this._collisionJobCompleted=!0;e=Math.max(0,e-(performance.now()-b));if(0===e)return!1}this._opacityJob||(this._opacityJob=this._createOpacityJob());if(!this._opacityJobCompleted){b=performance.now();if(!this._opacityJob.work(e))return!1;this._opacityJobCompleted=!0;e=Math.max(0,e-(performance.now()-b));if(0===e)return!1}this._running=!1;return!0};g._createSelectionJob=function(){const e=this._symbolRepository.uniqueSymbols;for(let l=0;l<e.length;l++){const m=e[l];for(let k=0;k<m.uniqueSymbols.length;k++){const q=
m.uniqueSymbols[k];for(const t of q.tileSymbols)t.selectedForRendering=!1}}const b=[];let a=0,c=0;const d=this._isLayerVisible,f=this._symbolLayerSorter;return{work:function(l){const m=performance.now();for(;c<e.length;c++,a=0){const q=e[c];var k=q.styleLayerUID;if(!d(k)){b[c]||(b[c]={styleLayerUID:k,symbols:[]});continue}b[c]=b[c]||{styleLayerUID:k,symbols:[]};const t=b[c];for(;a<q.uniqueSymbols.length;a++){k=q.uniqueSymbols[a];if(99===a%100&&performance.now()-m>l)return!1;let w=null,A=!1,x=!1;for(const y of k.tileSymbols)if(!x||
!A){const B=y.tile;if(!w||B.isCoverage||B.neededForCoverage&&!A){w=y;if(B.neededForCoverage||B.isCoverage)x=!0;B.isCoverage&&(A=!0)}}w.selectedForRendering=!0;if(x){t.symbols.push(w);k.show=!0;for(const y of k.parts)y.show=!0}else k.show=!1}}for(const q of b)q.symbols.sort(v);return!0},get sortedSymbols(){return b.sort(f)}}};g._createOpacityJob=function(){function e(d,f){var l=d.symbols;for(const [,k]of l){var m=k;l=f;for(const q of m){m=q.unique;for(const t of m.parts)t.startOpacity+=(l-t.startTime)/
r.FADE_DURATION*(.5<t.targetOpacity?1:-1),t.startOpacity=Math.min(Math.max(t.startOpacity,0),1),t.startTime=l,t.targetOpacity=m.show&&t.show?1:0}}b(d,f);for(const k of d.childrenTiles)e(k,f)}const b=this._assignTileSymbolsOpacity,a=this._visibleTiles;let c=0;return{work(d){const f=performance.now();for(;c<a.length;c++){if(performance.now()-f>d)return!1;const l=a[c];if(h.isSome(l.parentTile))continue;const m=performance.now();e(l,m)}return!0}}};n._createClass(p,[{key:"running",get:function(){return this._running}}]);
return p}();u.SymbolDeclutterer=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolRepository":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./util"],function(u,n,h,r){let v=function(){function z(g,e,b){this.tileCoordRange=g;this._visibleTiles=e;this._createUnique=b;this._tiles=new Map;this._uniqueSymbolsReferences=new Map}var p=z.prototype;
p.add=function(g,e){this._uniqueSymbolLayerArray=null;let b=this._tiles.get(g.id);b||(b={symbols:new Map},this._tiles.set(g.id,b));var a=new Map;if(e)for(var c of e)b.symbols.has(c)&&(a.set(c,b.symbols.get(c)),b.symbols.delete(c));else for(var [d]of g.layerData)b.symbols.has(d)&&(a.set(d,b.symbols.get(d)),b.symbols.delete(d));this._removeSymbols(a);e=g.symbols;a=new Map;for(const [f,l]of e)if(c=l.length,32<=c){d=this.tileCoordRange;do d/=2,c/=4;while(8<c&&64<d);c=new r.GridIndex(this.tileCoordRange,
this.tileCoordRange,d);a.set(f,{flat:l,index:c});b.symbols.set(f,{flat:l,index:c});for(const m of l)c.getCell(m.xTile,m.yTile).push(m)}else a.set(f,{flat:l}),b.symbols.set(f,{flat:l});this._addSymbols(g.key,e)};p.deleteStyleLayers=function(g){this._uniqueSymbolLayerArray=null;for(const [e,b]of this._tiles){const a=new Map;for(const c of g)b.symbols.has(c)&&(a.set(c,b.symbols.get(c)),b.symbols.delete(c));this._removeSymbols(a);0===b.symbols.size&&this._tiles.delete(e)}};p.removeTile=function(g){this._uniqueSymbolLayerArray=
null;const e=this._tiles.get(g.id);if(e){var b=new Map;for(const [a]of g.symbols)e.symbols.has(a)&&(b.set(a,e.symbols.get(a)),e.symbols.delete(a));this._removeSymbols(b);0===e.symbols.size&&this._tiles.delete(g.id)}};p._removeSymbols=function(g){for(const [b,{flat:a}]of g)for(const c of a){g=c.unique;var e=g.tileSymbols;const d=e.length-1;for(let f=0;f<d;f++)if(e[f]===c){e[f]=e[d];break}e.length=d;0===d&&(e=this._uniqueSymbolsReferences.get(b),e.delete(g),0===e.size&&this._uniqueSymbolsReferences.delete(b));
c.unique=null}};p._addSymbols=function(g,e){if(0!==e.size){var b=this._visibleTiles;for(const a of b)a.parentTile||a.key.world!==g.world||a.key.level===g.level&&!a.key.equals(g)||this._matchSymbols(a,g,e);for(const [a,c]of e)for(const d of c)h.isNone(d.unique)&&(g=this._createUnique(),d.unique=g,g.tileSymbols.push(d),e=this._uniqueSymbolsReferences.get(a),e||(e=new Set,this._uniqueSymbolsReferences.set(a,e)),e.add(g))}};p._matchSymbols=function(g,e,b){if(g.key.level>e.level){var a=g.key.level-e.level;
if(g.key.row>>a!==e.row||g.key.col>>a!==e.col)return}if(e.level>g.key.level&&(a=e.level-g.key.level,e.row>>a!==g.key.row||e.col>>a!==g.key.col))return;if(e.equals(g.key))for(var c of g.childrenTiles)this._matchSymbols(c,e,b);else{c=new Map;for(const [l,m]of b){var d=[];for(const q of m)b=r.tileCoordChange(this.tileCoordRange,q.xTile,e.level,e.col,g.key.level,g.key.col),a=r.tileCoordChange(this.tileCoordRange,q.yTile,e.level,e.row,g.key.level,g.key.row),0<=b&&b<this.tileCoordRange&&0<=a&&a<this.tileCoordRange&&
d.push({symbol:q,xTransformed:b,yTransformed:a});b=[];a=g.key.level<e.level?1:1<<g.key.level-e.level;const k=this._tiles.get(g.id).symbols.get(l);if(k){const q=k.flat;for(const t of d){var f=!1;let w;const A=t.xTransformed,x=t.yTransformed;w=h.isSome(k.index)?k.index.getCell(A,x):q;d=t.symbol;const y=d.hash;for(const B of w)if(y===B.hash&&Math.abs(A-B.xTile)<=a&&Math.abs(x-B.yTile)<=a){f=B.unique;d.unique=f;f.tileSymbols.push(d);f=!0;break}f||b.push(d)}}0<b.length&&c.set(l,b)}for(const l of g.childrenTiles)this._matchSymbols(l,
e,c)}};p._createUniqueSymbolLayerArray=function(){var g=this._uniqueSymbolsReferences;const e=Array(g.size);let b=0;for(const [a,c]of g){const d=Array(c.size);g=0;for(const f of c)d[g++]=f;e[b]={styleLayerUID:a,uniqueSymbols:d};b++}return e};n._createClass(z,[{key:"uniqueSymbols",get:function(){h.isNone(this._uniqueSymbolLayerArray)&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray());return this._uniqueSymbolLayerArray}}]);return z}();u.SymbolRepository=v;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/RenderableTile":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/mat3f32","./TiledDisplayObject"],function(u,n,h,r){r=function(v){function z(){return v.apply(this,arguments)||this}n._inheritsLoose(z,v);z.prototype._createTransforms=function(){return{dvs:h.create(),tileMat3:h.create()}};return z}(r.TiledDisplayObject);u.RenderableTile=r;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/support/Display":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../engine/Bitmap","../../engine/BitmapContainer"],function(u,n,h,r){r=function(v){function z(g){var e=v.call(this)||this;e.requestRender=e.requestRender.bind(n._assertThisInitialized(e));e._layerView=g;e._canvas=document.createElement("canvas");e._context=e._canvas.getContext("2d");e._bitmap=new h.Bitmap(null,"standard",
!1);e.addChild(e._bitmap);return e}n._inheritsLoose(z,v);var p=z.prototype;p.doRender=function(g){const e=g.state,b=this._createCustomRenderParams(g),a=this._canvas,c=this._bitmap,d=window.devicePixelRatio;a.width=e.size[0]*d;a.height=e.size[1]*d;c.resolution=e.resolution;const f=e.clone();f.pixelRatio=d;c.pixelRatio=d;b.state=f;c.x=e.viewpoint.targetGeometry.x-Math.abs(e.extent.xmax-e.extent.xmin)/2;c.y=e.viewpoint.targetGeometry.y+Math.abs(e.extent.ymax-e.extent.ymin)/2;this._layerView.render(b);
c.source=a;c.rotation=e.rotation;v.prototype.doRender.call(this,{...g,state:f})};p._createCustomRenderParams=function(g){return{globalOpacity:g.globalOpacity,state:g.state,stationary:g.stationary,pixelRatio:window.devicePixelRatio,context:this._context}};return z}(r.BitmapContainer);u.Display=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/TileInfoViewPOT":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../layers/support/TileInfo",
"./TileInfoView","./TileKey"],function(u,n,h,r){return function(v){function z(){var g=v.apply(this,arguments)||this;g._fullCacheLodInfos=null;g._levelByScale={};return g}u._inheritsLoose(z,v);var p=z.prototype;p.getTileParentId=function(g){g=r.pool.acquire(g);const e=0===g.level?null:r.getId(g.level-1,g.row>>1,g.col>>1,g.world);r.pool.release(g);return e};p.getTileCoverage=function(g,e,b){g=v.prototype.getTileCoverage.call(this,g,e,b);if(!g)return g;const a=1<<g.lodInfo.level;g.spans=g.spans.filter(c=>
0<=c.row&&c.row<a);return g};p.scaleToLevel=function(g){this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos);if(this._levelByScale[g])return this._levelByScale[g];{var e=this._fullCacheLodInfos;if(g>e[0].scale)return e[0].level;let b;for(let a=0;a<e.length-1;a++)if(b=e[a+1],g>b.scale)return e=e[a],e.level+(e.scale-g)/(e.scale-b.scale);return e[e.length-1].level}};p._initializeFullCacheLODs=function(g){g=0===g[0].level?g.map(e=>({level:e.level,resolution:e.resolution,scale:e.scale})):
n.create({size:this.tileInfo.size[0],spatialReference:this.tileInfo.spatialReference}).lods.map(e=>({level:e.level,resolution:e.resolution,scale:e.scale}));for(let e=0;e<g.length;e++)this._levelByScale[g[e].scale]=g[e].level;this._fullCacheLodInfos=g};return z}(h)})},"esri/views/2d/layers/FeatureLayerView2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../AggregateGraphic ../../../geometry ../../../Graphic ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../layers/effects/FeatureEffectView ../../../layers/support/FeatureFilter ../../../rest/support/FeatureSet ../../../rest/support/Query ../engine/webgl/definitions ./LayerView2D ./features/schemaUtils ./features/tileRenderers ./features/support/rendererUtils ./support/clusterUtils ./support/FeatureCommandQueue ./support/FeatureLayerProxy ./support/util ../tiling/TileManager ../../layers/FeatureLayerView ../../layers/LayerView ../../layers/RefreshableLayerView ../../webgl/capabilities ../../../geometry/Extent".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M){function J(X){return X&&"openPorts"in X}const R=b.getLogger("esri.views.2d.layers.FeatureLayerView2D");r=function(X){function U(){var Q=X.apply(this,arguments)||this;Q._pipelineIsUpdating=!0;Q._commandsQueue=new F({process:Y=>{switch(Y.type){case "processed-edit":return Q._doEdit(Y);case "refresh":return Q._doRefresh(Y.dataChanged);case "update":return Q._doUpdate()}}});Q._visibilityOverrides=new Set;Q._highlightIds=new Map;
Q._updateHighlight=c.debounce(u._asyncToGenerator(function*(){return Q._proxy.setHighlight(Array.from(Q._highlightIds.keys()))}));Q._uploadsLocked=!1;Q._needsClusterSizeUpdate=!1;Q.featureEffectView=new k;Q._lastDefinitionExpression=null;return Q}u._inheritsLoose(U,X);var V=U.prototype;V.destroy=function(){var Q;a.applySome(this._updateClusterSizeTask,Y=>Y.remove());null==(Q=this._proxy)?void 0:Q.destroy();this._commandsQueue.destroy()};V.initialize=function(){this.addResolvingPromise(Promise.all([this._initProxy(),
this._initServiceOptions()]));this.handles.add([this.on("valueRangesChanged",Q=>{this._set("_aggregateValueRanges",Q.valueRanges)}),d.watch(()=>this.featureEffect,Q=>{this.featureEffectView.featureEffect=Q},{initial:!0,sync:!0})])};V._initProxy=function(){var Q=u._asyncToGenerator(function*(){var Y=this.layer;if("isTable"in Y&&Y.isTable)throw new p("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});const fa="capabilities"in Y&&Y.capabilities.operations.supportsQuery;
if(("feature"===Y.type||"subtype-group"===Y.type)&&!fa)throw new p("featurelayerview:query-not-supported","layer view requires a layer with query capability",{layer:Y});this._proxy&&this._proxy.destroy();Y=this._createClientOptions();this._set("_proxy",new E({client:Y}));return this._proxy.when()});return function(){return Q.apply(this,arguments)}}();V._initServiceOptions=function(){var Q=u._asyncToGenerator(function*(){this._set("_serviceOptions",yield this._createServiceOptions());return this._serviceOptions});
return function(){return Q.apply(this,arguments)}}();V.highlight=function(Q){var Y;let fa;Q instanceof v?fa=[Q.getObjectId()]:"number"===typeof Q||"string"===typeof Q?fa=[Q]:Array.isArray(Q)&&0<Q.length?fa="number"===typeof Q[0]||"string"===typeof Q[0]?Q:Q.map(da=>null==da?void 0:da.getObjectId()):z.isCollection(Q)&&0<Q.length&&(fa=Q.map(da=>null==da?void 0:da.getObjectId()).toArray());fa=null==(Y=fa)?void 0:Y.filter(da=>null!=da);if(!fa||!fa.length)return{remove:()=>{}};this._addHighlight(fa);return{remove:()=>
this._removeHighlight(fa)}};V.hasHighlight=function(){return!!this._highlightIds.size};V.hitTest=function(){var Q=u._asyncToGenerator(function*(Y,fa){if(!this.tileRenderer)return null;fa=yield this.tileRenderer.hitTest(fa);if(0===fa.length)return null;const {features:da,aggregates:ca}=yield this._proxy.getFeatures(fa);return[...ca.map(la=>this._createGraphicHit(Y,h.fromJSON(la))),...da.map(la=>this._createGraphicHit(Y,v.fromJSON(la)))]});return function(Y,fa){return Q.apply(this,arguments)}}();V.queryAggregates=
function(){var Q=u._asyncToGenerator(function*(){return(yield this._proxy.getAggregates()).map(Y=>h.fromJSON(Y))});return function(){return Q.apply(this,arguments)}}();V.queryStatistics=function(){return this._proxy.queryStatistics()};V.querySummaryStatistics=function(){var Q=u._asyncToGenerator(function*(Y,fa,da){fa={...fa,scale:this.view.scale};return this._proxy.querySummaryStatistics(this._cleanUpQuery(Y),fa,da)});return function(Y,fa,da){return Q.apply(this,arguments)}}();V.queryUniqueValues=
function(){var Q=u._asyncToGenerator(function*(Y,fa,da){fa={...fa,scale:this.view.scale};return this._proxy.queryUniqueValues(this._cleanUpQuery(Y),fa,da)});return function(Y,fa,da){return Q.apply(this,arguments)}}();V.queryClassBreaks=function(){var Q=u._asyncToGenerator(function*(Y,fa,da){fa={...fa,scale:this.view.scale};return this._proxy.queryClassBreaks(this._cleanUpQuery(Y),fa,da)});return function(Y,fa,da){return Q.apply(this,arguments)}}();V.queryHistogram=function(){var Q=u._asyncToGenerator(function*(Y,
fa,da){fa={...fa,scale:this.view.scale};return this._proxy.queryHistogram(this._cleanUpQuery(Y),fa,da)});return function(Y,fa,da){return Q.apply(this,arguments)}}();V.queryFeatures=function(Q,Y){return this.queryFeaturesJSON(Q,Y).then(fa=>{fa=t.fromJSON(fa);fa.features.forEach(da=>this._setLayersForFeature(da));return fa})};V.queryVisibleFeatures=function(Q,Y){return this._proxy.queryVisibleFeatures(this._cleanUpQuery(Q),Y).then(fa=>{fa=t.fromJSON(fa);fa.features.forEach(da=>this._setLayersForFeature(da));
return fa})};V.queryFeaturesJSON=function(Q,Y){return this._proxy.queryFeatures(this._cleanUpQuery(Q),Y)};V.queryObjectIds=function(Q,Y){return this._proxy.queryObjectIds(this._cleanUpQuery(Q),Y)};V.queryFeatureCount=function(Q,Y){return this._proxy.queryFeatureCount(this._cleanUpQuery(Q),Y)};V.queryExtent=function(Q,Y){return this._proxy.queryExtent(this._cleanUpQuery(Q),Y).then(fa=>({count:fa.count,extent:M.fromJSON(fa.extent)}))};V.setVisibility=function(Q,Y){Y?this._visibilityOverrides.delete(Q):
this._visibilityOverrides.add(Q);this._update()};V.update=function(Q){if(this._tileStrategy&&this.tileRenderer){var {hasMissingTiles:Y,added:fa,removed:da}=this._tileStrategy.update(Q);(fa.length||da.length)&&this._proxy.updateTiles({added:fa,removed:da});Y&&this.requestUpdate();this.notifyChange("updating")}};V.attach=function(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`);this._tileStrategy=new O.TileManager({acquireTile:Q=>this._acquireTile(Q),releaseTile:Q=>this._releaseTile(Q),
tileInfoView:this.view.featuresTilingScheme,buffer:0});this.handles.add(d.watch(()=>this.renderingConfigHash,()=>this._update(),d.initial),"attach");"stream"!==this.layer.type&&this.handles.add(this.layer.on("edits",Q=>this._edit(Q)),"attach")};V.detach=function(){var Q;this._commandsQueue.clear();null==(Q=this._proxy)?void 0:Q.stop();this.container.removeAllChildren();this.handles.remove("attach");this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null);this._tileStrategy&&
(this._tileStrategy.destroy(),this._tileStrategy=null);this._tileRendererHash=null};V.moveStart=function(){this.requestUpdate()};V.viewChange=function(){this.requestUpdate()};V.moveEnd=function(){this.requestUpdate()};V.isUpdating=function(){var Q;const Y="renderer"in this.layer&&null!=this.layer.renderer,fa=this._commandsQueue.updating,da=null!=this._updatingRequiredFieldsPromise,ca=!this._proxy||!this._proxy.isReady,la=this._pipelineIsUpdating,ha=null==this.tileRenderer||(null==(Q=this.tileRenderer)?
void 0:Q.updating);Q=Y&&(fa||da||ca||la||ha);g("esri-2d-log-updating")&&console.log(`Updating FLV2D: ${Q}\n  -> hasRenderer ${Y}\n  -> hasPendingCommand ${fa}\n  -> updatingRequiredFields ${da}\n  -> updatingProxy ${ca}\n  -> updatingPipeline ${la}\n  -> updatingTileRenderer ${ha}\n`);return Q};V._createClientOptions=function(){return{setUpdating:Q=>{this._set("_pipelineIsUpdating",Q)},emitEvent:Q=>{this.emit(Q.name,Q.event)}}};V._detectQueryMode=function(){var Q=u._asyncToGenerator(function*(Y){var fa;
const da="editingInfo"in this.layer&&(null==(fa=this.layer.editingInfo)?void 0:fa.lastEditDate);fa=!!this.layer.refreshInterval;if("path"in Y&&("feature"===this.layer.type||"subtype-group"===this.layer.type)&&"point"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&(da||!fa)&&g("featurelayer-snapshot-enabled"))try{const ca=yield this.layer.queryFeatureCount(),la=g("featurelayer-snapshot-point-min-threshold");if(ca<=la)return{mode:"snapshot",
featureCount:ca};const ha=g("featurelayer-snapshot-point-max-threshold"),S=g("featurelayer-snapshot-point-coverage"),ea=this.view.extent,ma=a.unwrap(this.layer.fullExtent),sa=null==ma?void 0:ma.clone().intersection(ea),ja=a.isSome(sa)?sa.width*sa.height:0,wa=(null==ma?NaN:ma.width)*(null==ma?NaN:ma.height);Y=0===wa?0:ja/wa;if(ca<=ha&&Y>=S)return{mode:"snapshot",featureCount:ca}}catch(ca){R.warn("mapview-feature-layer","Encountered an error when querying for featureCount",{error:ca})}return{mode:"on-demand"}});
return function(Y){return Q.apply(this,arguments)}}();V._createServiceOptions=function(){var Q=u._asyncToGenerator(function*(){var Y,fa=this.layer;if("stream"===fa.type)return null;const {capabilities:da,objectIdField:ca}=fa,la=fa.fields.map(ra=>ra.toJSON()),ha=a.isSome(fa.fullExtent)&&fa.fullExtent.toJSON(),S=G.toJSONGeometryType(fa.geometryType),ea=fa.timeInfo&&fa.timeInfo.toJSON()||null,ma=fa.spatialReference?fa.spatialReference.toJSON():null,sa="feature"===fa.type?fa.globalIdField:null;let ja;
"ogc-feature"===fa.type?ja=fa.source.getFeatureDefinition():J(fa.source)?ja=yield fa.source.openPorts():fa.parsedUrl&&(ja=e.clone(fa.parsedUrl),"dynamicDataSource"in fa&&fa.dynamicDataSource&&(ja.query={layer:JSON.stringify({source:fa.dynamicDataSource})}));fa="datesInUnknownTimezone"in this.layer&&this.layer.datesInUnknownTimezone;const wa=null!=(Y="subtypeField"in this.layer&&this.layer.subtypeField)?Y:null,{mode:Ja,featureCount:va}=yield this._detectQueryMode(ja);Y=this.layer.objectIdField;if("feature"===
this.layer.type&&a.isSome(this.layer.orderBy)&&this.layer.orderBy.length){const ra=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;ra&&(Y=ra)}return{type:Ja,timeReferenceUnknownClient:fa,subtypeField:wa,featureCount:va,globalIdField:sa,maxRecordCount:da.query.maxRecordCount,tileMaxRecordCount:da.query.tileMaxRecordCount,capabilities:da,fields:la,fullExtent:ha,geometryType:S,objectIdField:ca,source:ja,timeInfo:ea,spatialReference:ma,orderByFields:Y}});return function(){return Q.apply(this,
arguments)}}();V._createMemoryServiceOptions=function(){var Q=u._asyncToGenerator(function*(Y){Y=yield Y.openPorts();return{...this._createServiceOptions(),type:"memory",source:Y}});return function(Y){return Q.apply(this,arguments)}}();V._cleanUpQuery=function(Q){Q=w.from(Q)||this.createQuery();Q.outSpatialReference||(Q.outSpatialReference=this.view.spatialReference);return Q};V._update=function(){var Q=u._asyncToGenerator(function*(){return this._commandsQueue.push({type:"update"})});return function(){return Q.apply(this,
arguments)}}();V._edit=function(){var Q=u._asyncToGenerator(function*(Y){if(this.suspended)this._clearTiles();else if(this._validateEdit(Y))return this._commandsQueue.push({type:"edit",edits:Y})});return function(Y){return Q.apply(this,arguments)}}();V.doRefresh=function(){var Q=u._asyncToGenerator(function*(Y){if(this._tileStrategy.tileKeys().length){if(!this.suspended||!Y)return this._commandsQueue.push({type:"refresh",dataChanged:Y});this._clearTiles()}});return function(Y){return Q.apply(this,
arguments)}}();V._clearTiles=function(){this._tileStrategy.tileKeys().length&&(this._proxy.updateTiles({added:[],removed:this._tileStrategy.tileKeys()}),this._tileStrategy.clear(),this.requestUpdate(),this._commandsQueue.clear(),this._update())};V._validateEdit=function(Q){const Y="globalIdField"in this.layer&&this.layer.globalIdField,fa=Q.deletedFeatures.some(ca=>-1===ca.objectId||!ca.objectId),da=Y&&this.availableFields.includes(Y);return fa&&!da?(R.error(new p("mapview-apply-edits",`Editing the specified service requires the layer's globalIdField, ${Y} to be included the layer's outFields for updates to be reflected on the map`)),
null):Q};V._doUpdate=function(){var Q=u._asyncToGenerator(function*(){try{if(!this.destroyed&&this._hasRequiredSupport(this.layer)&&this._tileStrategy){var {featureEffectView:Y,filter:fa}=this;yield this._updateRequiredFields();var {renderer:da}=this._getEffectiveRenderer();this._set("_effectiveRenderer",da);var ca=this._createSchemaConfig(),la=this._createConfiguration(ca,fa,Y.filter),ha=this._lastDefinitionExpression!==la.schema.source.definitionExpression;this._lastDefinitionExpression=la.schema.source.definitionExpression;
var S=la.schema.tileRenderer,ea=this._createTileRendererHash(S);"snapshot"===this._serviceOptions.type&&(la.schema.source.featureCount=this._serviceOptions.featureCount);if(ea!==this._tileRendererHash){yield this._initTileRenderer(S,da);const ma=this.layer,sa="stream"===ma.type?yield this._initServiceOptions():this._serviceOptions;this.tileRenderer.onConfigUpdate(da);"stream"!==ma.type&&J(ma.source)&&(sa.source=yield ma.source.openPorts());const ja={added:this._tileStrategy.tileKeys(),removed:[]};
yield this._proxy.startup(this.view.featuresTilingScheme,la,sa,ja);this.hasHighlight()&&(yield this._proxy.setHighlight(Array.from(this._highlightIds.keys())));yield this._onceTilesUpdated();this.tileRenderer.onConfigUpdate(da)}else{"snapshot"===this._serviceOptions.type&&ha&&(la.schema.source.featureCount=yield this.layer.queryFeatureCount());const ma=yield this._proxy.update(la);(ma.mesh||ma.targets.aggregate)&&this._lockGPUUploads();try{yield this._proxy.applyUpdate(ma)}catch(sa){c.isAbortError(sa)||
R.error(sa)}(ma.mesh||ma.targets.aggregate)&&this._unlockGPUUploads();this.tileRenderer.onConfigUpdate(da);this._updateClusterSizeVariable();this._forceAttributeTextureUpload()}this._tileRendererHash=ea;this.tileRenderer.invalidateLabels();this.requestUpdate()}}catch(ma){}});return function(){return Q.apply(this,arguments)}}();V._doEdit=function(){var Q=u._asyncToGenerator(function*(Y){try{yield this._proxy.onEdits(Y)}catch(fa){c.isAbortError(fa)}});return function(Y){return Q.apply(this,arguments)}}();
V._doRefresh=function(){var Q=u._asyncToGenerator(function*(Y){var fa;this._lockGPUUploads();try{yield this._proxy.refresh(Y)}catch(da){c.isAbortError(da)}this._unlockGPUUploads();null!=(fa=this.layer)&&fa.featureReduction&&this._updateClusterSizeVariable()});return function(Y){return Q.apply(this,arguments)}}();V._updateClusterSizeVariable=function(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)};V._createUpdateClusterSizeTask=
function(Q,Y){return d.watch(()=>this._aggregateValueRanges,fa=>{this._updateClusterEffectiveRendererSizeVariable(Q,Y,fa);this._needsClusterSizeUpdate=!0;this._uploadsLocked||this._updateClusterSizeVariable()})};V._updateClusterEffectiveRendererSizeVariable=function(){var Q=u._asyncToGenerator(function*(Y,fa,da){if(Y.dynamicClusterSize&&"visualVariables"in Y&&Y.visualVariables){var ca=D.findSizeVV(Y.visualVariables);a.isSome(ca)&&"cluster_count"===ca.field&&(ca=Y.visualVariables.indexOf(ca),Y.visualVariables[ca]=
D.createClusterCountSizeVariable(fa,da),Y=Y.clone(),Y.dynamicClusterSize=!0,this._set("_effectiveRenderer",Y))}});return function(Y,fa,da){return Q.apply(this,arguments)}}();V._getEffectiveRenderer=function(){var Q="renderer"in this.layer&&this.layer.renderer;const Y=this.layer.featureReduction;a.isSome(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null);if(Y&&"renderer"in Y&&Y.renderer){Q=[];for(const da of null!=(fa=Y.fields)?fa:[]){var fa;D.convertAggregateFieldFromPublic(Q,
da)}return{renderer:Y.renderer,aggregateFields:Q,featureReduction:Y}}return Y&&"cluster"===Y.type&&D.isClusterCompatibleRenderer(Q)?(fa=[],Q=D.createClusterRenderer(fa,Q,Y,this._aggregateValueRanges),a.applySome(this._updateClusterSizeTask,da=>da.remove()),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(Q,Y),{renderer:Q,aggregateFields:fa,featureReduction:Y}):{renderer:Q,aggregateFields:[],featureReduction:null}};V._acquireTile=function(Q){Q=this.tileRenderer.acquireTile(Q);Q.once("attach",
()=>{this.requestUpdate()});return Q};V._releaseTile=function(Q){this.tileRenderer.releaseTile(Q)};V._initTileRenderer=function(){var Q=u._asyncToGenerator(function*(Y,fa){Y=yield B.createOrReuseTileRenderer(Y,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null);if(this.destroyed)return null;this._proxy.tileRenderer=Y;this._set("tileRenderer",
Y);this.tileRenderer.install(this.container);this.tileRenderer.onConfigUpdate(fa);this.requestUpdate();return this.tileRenderer});return function(Y,fa){return Q.apply(this,arguments)}}();V._createTileRendererHash=function(Q){return`${Q.type}`};V._injectOverrides=function(Q){var Y=a.isSome(Q)?Q.timeExtent:null;Y=a.isSome(this.timeExtent)&&a.isSome(Y)?this.timeExtent.intersection(Y):this.timeExtent||Y;var fa=null;const da="floorInfo"in this.layer&&this.layer.floorInfo;da&&(fa=a.isSome(Q)&&Q.where,fa=
this._addFloorFilterClause(fa));if(!this._visibilityOverrides.size&&!Y&&!da)return a.isSome(Q)?Q.toJSON():null;Q=a.isSome(Q)&&Q.clone()||new q;Q.timeExtent=Y;fa&&(Q.where=fa);Q=Q.toJSON();Q.hiddenIds=Array.from(this._visibilityOverrides);return Q};V._addFloorFilterClause=function(Q){var Y=this.layer;Q=Q||"";if("floorInfo"in Y&&Y.floorInfo){var fa,da=this.view.floors;if(!da||!da.length)return Q;null!=(fa=Y.floorInfo.viewAllLevelIds)&&fa.length&&(da=Y.floorInfo.viewAllLevelIds);fa=da.filter(ca=>""!==
ca).map(ca=>"'"+ca+"'");fa.push("''");Y=Y.floorInfo.floorField;da="("+Y+" IN ({ids}) OR "+Y+" IS NULL)";da=da.replace("{ids}",fa.join(", "));a.isSome(Q)&&Q.includes(Y)&&(fa=new RegExp("AND \\("+Y+".*NULL\\)","g"),Q=Q.replace(fa,""),fa=new RegExp("\\("+Y+".*NULL\\)","g"),Q=Q.replace(fa,""),Q=Q.replace(/\s+/g," ").trim());Q=""!==Q?"("+Q+") AND "+da:da}return""!==Q?Q:null};V._createConfiguration=function(Q,Y,fa){const da="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():
void 0,ca="feature"===this.layer.type?this.layer.gdbVersion:void 0,la=Array(A.MAX_FILTERS);Y=this._injectOverrides(Y);la[0]=Y;la[1]=a.isSome(fa)?fa.toJSON():null;Q=y.createSchema(Q);if(a.isNone(Q))return null;fa=L.getWebGLCapabilities("2d");return{availableFields:this.availableFields,gdbVersion:ca,historicMoment:da,devicePixelRatio:window.devicePixelRatio||1,filters:la,schema:Q,supportsTextureFloat:fa.supportsTextureFloat,maxTextureSize:fa.maxTextureSize}};V._hasRequiredSupport=function(Q){return"renderer"in
Q?C.isRendererSupported(Q.renderer):!0};V._onceTilesUpdated=function(){this.requestUpdate();return d.whenOnce(()=>!this._pipelineIsUpdating)};V._lockGPUUploads=function(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())};V._unlockGPUUploads=function(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())};V._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()};V._createSchemaConfig=function(){return{renderer:"renderer"in
this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:"feature"===this.layer.type?this.layer.historicMoment:null,labelsVisible:"labelsVisible"in this.layer&&this.layer.labelsVisible,labelingInfo:"labelingInfo"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,
featureEffect:this.featureEffect,filter:this.filter,gdbVersion:"feature"===this.layer.type?this.layer.gdbVersion:null,pixelBuffer:0,orderBy:"orderBy"in this.layer&&this.layer.orderBy?this.layer.orderBy:null,customParameters:{..."customParameters"in this.layer?this.layer.customParameters:void 0,token:"apiKey"in this.layer?this.layer.apiKey:void 0},subtypeCode:"subtypeCode"in this.layer?this.layer.subtypeCode:void 0,subtypeField:"subtypeField"in this.layer?this.layer.subtypeField:void 0}};V._addHighlight=
function(Q){for(const Y of Q)this._highlightIds.has(Y)?(Q=this._highlightIds.get(Y),this._highlightIds.set(Y,Q+1)):this._highlightIds.set(Y,1);this._updateHighlight().catch(Y=>{c.isAbortError(Y)||R.error(Y)})};V._removeHighlight=function(Q){for(const Y of Q)this._highlightIds.has(Y)&&(Q=this._highlightIds.get(Y)-1,0===Q?this._highlightIds.delete(Y):this._highlightIds.set(Y,Q));this._updateHighlight().catch(Y=>{c.isAbortError(Y)||R.error(Y)})};V._setLayersForFeature=function(Q){const Y=this.layer;
Q.layer=Y;Q.sourceLayer=Y};V._createGraphicHit=function(Q,Y){this._setLayersForFeature(Y);a.isSome(Y.geometry)&&(Y.geometry.spatialReference=this.view.spatialReference);return{type:"graphic",graphic:Y,layer:this.layer,mapPoint:Q}};u._createClass(U,[{key:"orderByFields",get:function(){return"stream"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}},{key:"labelsVisible",get:function(){const Q="subtype-group"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&
Q.some(Y=>Y.labelingInfo&&Y.labelsVisible)}},{key:"queryMode",get:function(){return this._serviceOptions.type}},{key:"renderingConfigHash",get:function(){if(!this.layer)return null;const Q=this.availableFields;var Y=this.layer;const fa=this.view.floors,{definitionExpression:da}=Y,ca="subtype-group"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,la="renderer"in Y&&Y.renderer,ha="feature"===Y.type?Y.gdbVersion:void 0,S="feature"===Y.type&&Y.historicMoment?Y.historicMoment.getTime():
void 0,{timeExtent:ea}=this,ma="customParameters"in Y?JSON.stringify(Y.customParameters):void 0,sa="apiKey"in Y?Y.apiKey:void 0,ja="stream"===Y.type?`${JSON.stringify(Y.geometryDefinition)}${Y.definitionExpression}`:null,wa=JSON.stringify(this.clips);Y=Y.featureReduction&&Y.featureReduction.toJSON();const Ja="orderBy"in this.layer&&JSON.stringify(this.layer.orderBy),va="sublayers"in this.layer&&this.layer.sublayers.items.reduce((ra,Ba)=>ra+`${Ba.visible?1:0}.${JSON.stringify(Ba.renderer)}.${Ba.labelsVisible}\n.${JSON.stringify(Ba.labelingInfo)}`,
"");return JSON.stringify({orderBy:Ja,sublayerHash:va,subtypeCode:"subtypeCode"in this.layer&&this.layer.subtypeCode,filterHash:a.isSome(this.filter)&&this.filter.toJSON(),effectHash:a.isSome(this.featureEffect)&&this.featureEffect.toJSON(),streamFilter:ja,gdbVersion:ha,definitionExpression:da,historicMoment:S,availableFields:Q,renderer:la,labelingInfo:ca,timeExtent:ea,floors:fa,clipsHash:wa,featureReduction:Y,customParameters:ma,apiKey:sa})}},{key:"hasFilter",get:function(){const Q=!!("floorInfo"in
this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||Q||!!this._visibilityOverrides.size||!!this.timeExtent}}]);return U}(H(P(x.LayerView2DMixin(K))));n.__decorate([f.property()],r.prototype,"_serviceOptions",void 0);n.__decorate([f.property()],r.prototype,"_proxy",void 0);n.__decorate([f.property()],r.prototype,"_pipelineIsUpdating",void 0);n.__decorate([f.property()],r.prototype,"_effectiveRenderer",void 0);n.__decorate([f.property()],r.prototype,"_aggregateValueRanges",
void 0);n.__decorate([f.property()],r.prototype,"_commandsQueue",void 0);n.__decorate([f.property()],r.prototype,"featureEffectView",void 0);n.__decorate([f.property()],r.prototype,"labelsVisible",null);n.__decorate([f.property({readOnly:!0})],r.prototype,"queryMode",null);n.__decorate([f.property()],r.prototype,"renderingConfigHash",null);n.__decorate([f.property()],r.prototype,"tileRenderer",void 0);n.__decorate([f.property()],r.prototype,"updating",void 0);return r=n.__decorate([m.subclass("esri.views.2d.layers.FeatureLayerView2D")],
r)})},"esri/AggregateGraphic":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./Graphic ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/has ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g){h=function(e){function b(){var c=e.apply(this,arguments)||this;c.isAggregate=!0;return c}u._inheritsLoose(b,e);var a=b.prototype;a.getEffectivePopupTemplate=function(c){return this.popupTemplate?this.popupTemplate:
(c=this.sourceLayer&&this.sourceLayer.featureReduction)&&"popupTemplate"in c&&c.popupEnabled?c.popupTemplate:null};a.getObjectId=function(){return this.objectId};return b}(h);n.__decorate([r.property({type:Boolean})],h.prototype,"isAggregate",void 0);n.__decorate([r.property({type:[String,Number],json:{read:!0}})],h.prototype,"objectId",void 0);return h=n.__decorate([g.subclass("esri.AggregateGraphic")],h)})},"esri/layers/effects/FeatureEffectView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/has ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./EffectView".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(f){var l=a.call(this,f)||this;l._filter=null;l.duration=r("mapview-transitions-duration");l._excludedEffectView=new b.EffectView(f);l._includedEffectView=new b.EffectView(f);return l}u._inheritsLoose(c,a);var d=c.prototype;d.transitionStep=function(f,l){this._set("scale",l);this.transitioning?(this._includedEffectView.transitionStep(f,l),this._excludedEffectView.transitionStep(f,l),this.transitioning||(this._filter=null)):(this._excludedEffectView.scale=
l,this._includedEffectView.scale=l)};d.end=function(){this._includedEffectView.end();this._excludedEffectView.end();this._filter=null};d._transitionTo=function(f){const l=this._get("featureEffect");f=v.unwrap(f);const m=v.unwrap(null==f?void 0:f.includedEffect),k=v.unwrap(null==f?void 0:f.excludedEffect),q=this._includedEffectView.canTransitionTo(m)&&this._excludedEffectView.canTransitionTo(k);this._includedEffectView.effect=m;this._excludedEffectView.effect=k;this._set("featureEffect",f);this._filter=
(null==f?void 0:f.filter)||(null==l?void 0:l.filter)||null;q||this.end()};u._createClass(c,[{key:"excludedEffects",get:function(){return this._excludedEffectView.effects}},{key:"featureEffect",set:function(f){this._get("featureEffect")!==f&&this._transitionTo(f)}},{key:"filter",get:function(){var f;return this._filter||(null==(f=v.unwrap(this.featureEffect))?void 0:f.filter)||null}},{key:"hasEffects",get:function(){return this._excludedEffectView.hasEffects||this._includedEffectView.hasEffects}},
{key:"includedEffects",get:function(){return this._includedEffectView.effects}},{key:"scale",set:function(f){this._set("scale",f);this._excludedEffectView.scale=f;this._includedEffectView.scale=f}},{key:"transitioning",get:function(){return this._excludedEffectView.transitioning||this._includedEffectView.transitioning}}]);return c}(h);n.__decorate([z.property()],h.prototype,"_filter",void 0);n.__decorate([z.property()],h.prototype,"_excludedEffectView",void 0);n.__decorate([z.property()],h.prototype,
"_includedEffectView",void 0);n.__decorate([z.property()],h.prototype,"duration",void 0);n.__decorate([z.property()],h.prototype,"excludedEffects",null);n.__decorate([z.property()],h.prototype,"featureEffect",null);n.__decorate([z.property()],h.prototype,"filter",null);n.__decorate([z.property()],h.prototype,"hasEffects",null);n.__decorate([z.property()],h.prototype,"includedEffects",null);n.__decorate([z.property({value:0})],h.prototype,"scale",null);n.__decorate([z.property()],h.prototype,"transitioning",
null);return h=n.__decorate([e.subclass("esri.layers.effects.FeatureEffectView")],h)})},"esri/views/2d/layers/features/tileRenderers":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers"],function(u,n,h){function r(){r=h._asyncToGenerator(function*(z,p){if(!z)return null;switch(z.type){case "symbol":return new (yield new Promise((g,e)=>u(["./tileRenderers/SymbolTileRenderer"],b=>g(v(b)),e))).default(p);case "heatmap":return new (yield new Promise((g,e)=>u(["./tileRenderers/HeatmapTileRenderer"],
b=>g(v(b)),e))).default(p)}});return r.apply(this,arguments)}const v=z=>Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));n.createOrReuseTileRenderer=function(z,p){return r.apply(this,arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/support/FeatureCommandQueue":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ../../../support/QueueProcessor".split(" "),
function(u,n,h,r,v,z,p,g,e){function b(f){return f.some(l=>l.globalId)}function a(f){return f.filter(l=>!l.error).map(l=>{var m;return null!=(m=l.objectId)?m:l.globalId})}function c(f,l){f=new Set(f);for(const m of l.values())f.add(m);return f}function d(f,l){f=new Set(f);for(const m of l.values())f.delete(m);return f}h=function(f){function l(k){k=f.call(this,k)||this;k._hasGlobalIds=!1;return k}u._inheritsLoose(l,f);var m=l.prototype;m.normalizeCtorArgs=function(k){this._queueProcessor=new e.QueueProcessor({concurrency:1,
process:k.process});return{}};m.destroy=function(){this.clear()};m.clear=function(){this._queueProcessor.clear()};m.push=function(k){const q=this._queueProcessor;var t=q.last();switch(k.type){case "update":case "refresh":if((null==t?void 0:t.type)===k.type)return;q.push(k).finally(()=>this.notifyChange("updating"));break;case "edit":(t="processed-edit"===(null==t?void 0:t.type)?t:null)&&q.popLast();k=this._mergeEdits(t,k);for(const w of k)q.push(w).finally(()=>this.notifyChange("updating"))}this.notifyChange("updating")};
m._mergeEdits=function(k,q){var t,w;const {addedFeatures:A,deletedFeatures:x,updatedFeatures:y}=q.edits;if(this._hasGlobalIds=this._hasGlobalIds||b(A)||b(y)||b(x))return q=[...A,...y],[k,{type:"processed-edit",edits:{addOrModified:q,removed:x}}];q=new Set(a(null!=(t=null==k?void 0:k.edits.addOrModified)?t:[]));k=new Set(a(null!=(w=null==k?void 0:k.edits.removed)?w:[]));w=new Set([...a(A),...a(y)]);t=new Set(a(x));q=Array.from(c(d(q,t),w)).map(B=>({objectId:B}));k=Array.from(c(d(k,w),t)).map(B=>({objectId:B}));
return[{type:"processed-edit",edits:{addOrModified:q,removed:k}}]};u._createClass(l,[{key:"updating",get:function(){return 0<this._queueProcessor.length}}]);return l}(h);n.__decorate([r.property({readOnly:!0})],h.prototype,"updating",null);return h=n.__decorate([g.subclass("esri.views.2d.layers.support.FeatureCommandQueue")],h)})},"esri/views/2d/layers/support/FeatureLayerProxy":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Promise ../../../../core/promiseUtils ../../../../core/workers/workers ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(f){f=a.call(this,f)||this;f._startupResolver=r.createResolver();f.isReady=!1;return f}u._inheritsLoose(c,a);var d=c.prototype;d.initialize=function(){this._controller=new AbortController;this.addResolvingPromise(this._startWorker(this._controller.signal))};d.destroy=function(){this._controller.abort();this._connection&&this._connection.close()};d.startup=function(){var f=u._asyncToGenerator(function*(l,m,k,q){yield this.when();var t=this._controller.signal;
t=Array.isArray(k.source)?{transferList:k.source,signal:t}:void 0;l=l.tileInfo.toJSON();yield this._connection.invoke("startup",{service:k,config:m,tileInfo:l,tiles:q},t);this._startupResolver.resolve();this._set("isReady",!0)});return function(l,m,k,q){return f.apply(this,arguments)}}();d.updateTiles=function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;return r.ignoreAbortErrors(this._connection.invoke("updateTiles",l))});return function(l){return f.apply(this,arguments)}}();
d.update=function(){var f=u._asyncToGenerator(function*(l){l={config:l};yield this._startupResolver.promise;return this._connection.invoke("update",l)});return function(l){return f.apply(this,arguments)}}();d.applyUpdate=function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;return this._connection.invoke("applyUpdate",l)});return function(l){return f.apply(this,arguments)}}();d.setHighlight=function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;
return r.ignoreAbortErrors(this._connection.invoke("controller.setHighlight",l))});return function(l){return f.apply(this,arguments)}}();d.stop=function(){var f=u._asyncToGenerator(function*(){yield this._startupResolver.promise;if(!this.closed)return r.ignoreAbortErrors(this._connection.invoke("stop"))});return function(){return f.apply(this,arguments)}}();d.refresh=function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;return r.ignoreAbortErrors(this._connection.invoke("controller.refresh",
l))});return function(l){return f.apply(this,arguments)}}();d.querySummaryStatistics=function(){var f=u._asyncToGenerator(function*(l,m,k){yield this._startupResolver.promise;return this._connection.invoke("controller.querySummaryStatistics",{query:l.toJSON(),params:m},k)});return function(l,m,k){return f.apply(this,arguments)}}();d.queryUniqueValues=function(){var f=u._asyncToGenerator(function*(l,m,k){yield this._startupResolver.promise;return this._connection.invoke("controller.queryUniqueValues",
{query:l.toJSON(),params:m},k)});return function(l,m,k){return f.apply(this,arguments)}}();d.queryClassBreaks=function(){var f=u._asyncToGenerator(function*(l,m,k){yield this._startupResolver.promise;return this._connection.invoke("controller.queryClassBreaks",{query:l.toJSON(),params:m},k)});return function(l,m,k){return f.apply(this,arguments)}}();d.queryHistogram=function(){var f=u._asyncToGenerator(function*(l,m,k){yield this._startupResolver.promise;return this._connection.invoke("controller.queryHistogram",
{query:l.toJSON(),params:m},k)});return function(l,m,k){return f.apply(this,arguments)}}();d.queryFeatures=function(){var f=u._asyncToGenerator(function*(l,m){yield this._startupResolver.promise;return this._connection.invoke("controller.queryFeatures",l.toJSON(),m)});return function(l,m){return f.apply(this,arguments)}}();d.queryVisibleFeatures=function(){var f=u._asyncToGenerator(function*(l,m){yield this._startupResolver.promise;return this._connection.invoke("controller.queryVisibleFeatures",
l.toJSON(),m)});return function(l,m){return f.apply(this,arguments)}}();d.queryObjectIds=function(){var f=u._asyncToGenerator(function*(l,m){yield this._startupResolver.promise;return this._connection.invoke("controller.queryObjectIds",l.toJSON(),m)});return function(l,m){return f.apply(this,arguments)}}();d.queryFeatureCount=function(){var f=u._asyncToGenerator(function*(l,m){yield this._startupResolver.promise;return this._connection.invoke("controller.queryFeatureCount",l.toJSON(),m)});return function(l,
m){return f.apply(this,arguments)}}();d.queryExtent=function(){var f=u._asyncToGenerator(function*(l,m){return this._connection.invoke("controller.queryExtent",l.toJSON(),m)});return function(l,m){return f.apply(this,arguments)}}();d.queryLatestObservations=function(){var f=u._asyncToGenerator(function*(l,m){yield this._startupResolver.promise;return this._connection.invoke("controller.queryLatestObservations",l.toJSON(),m)});return function(l,m){return f.apply(this,arguments)}}();d.queryStatistics=
function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;return this._connection.invoke("controller.queryStatistics",l)});return function(l){return f.apply(this,arguments)}}();d.getObjectId=function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;return this._connection.invoke("controller.getObjectId",l)});return function(l){return f.apply(this,arguments)}}();d.getDisplayId=function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;
return this._connection.invoke("controller.getDisplayId",l)});return function(l){return f.apply(this,arguments)}}();d.getFeatures=function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;return this._connection.invoke("controller.getFeatures",l)});return function(l){return f.apply(this,arguments)}}();d.getAggregates=function(){var f=u._asyncToGenerator(function*(){yield this._startupResolver.promise;return this._connection.invoke("controller.getAggregates")});return function(){return f.apply(this,
arguments)}}();d.getAggregateValueRanges=function(){var f=u._asyncToGenerator(function*(){yield this._startupResolver.promise;return this._connection.invoke("controller.getAggregateValueRanges")});return function(){return f.apply(this,arguments)}}();d.mapValidDisplayIds=function(){var f=u._asyncToGenerator(function*(l){yield this._startupResolver.promise;return this._connection.invoke("controller.mapValidDisplayIds",l)});return function(l){return f.apply(this,arguments)}}();d.onEdits=function(){var f=
u._asyncToGenerator(function*(l){yield this._startupResolver.promise;return r.ignoreAbortErrors(this._connection.invoke("controller.onEdits",l))});return function(l){return f.apply(this,arguments)}}();d.enableEvent=function(){var f=u._asyncToGenerator(function*(l,m){yield this._startupResolver.promise;return r.ignoreAbortErrors(this._connection.invoke("controller.enableEvent",{name:l,value:m}))});return function(l,m){return f.apply(this,arguments)}}();d.pauseStream=function(){return r.ignoreAbortErrors(this._connection.invoke("controller.pauseStream"))};
d.resumeStream=function(){return r.ignoreAbortErrors(this._connection.invoke("controller.resumeStream"))};d._startWorker=function(){var f=u._asyncToGenerator(function*(l){try{this._connection=yield v.open("Pipeline",{client:this.client,strategy:"dedicated",signal:l})}catch(m){r.throwIfNotAbortError(m)}});return function(l){return f.apply(this,arguments)}}();u._createClass(c,[{key:"tileRenderer",set:function(f){this.client.tileRenderer=f}},{key:"closed",get:function(){return this._connection.closed}}]);
return c}(h.EsriPromise);n.__decorate([z.property()],h.prototype,"isReady",void 0);n.__decorate([z.property()],h.prototype,"client",void 0);n.__decorate([z.property()],h.prototype,"tileRenderer",null);return h=n.__decorate([b.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],h)})},"esri/views/2d/tiling/TileManager":function(){define(["exports","../../../core/maybe","./TileCoverage","./TileKey"],function(u,n,h,r){let v=function(){function z(g){this._tiles=new Map;this.buffer=0;this.acquireTile=
g.acquireTile;this.releaseTile=g.releaseTile;this.tileInfoView=g.tileInfoView;this.buffer=g.buffer}var p=z.prototype;p.destroy=function(){};p.clear=function(){this._tiles.forEach(g=>this._releaseTile(g))};p.tileKeys=function(){const g=[];this._tiles.forEach((e,b)=>g.push(b));return g};p.update=function(g){g=this.tileInfoView.getTileCoverage(g.state,this.buffer,"closest");const {spans:e,lodInfo:b}=g,{level:a}=b,c=[],d=[],f=new Set,l=new Set;for(const {row:m,colFrom:k,colTo:q}of e)for(let t=k;t<=q;t++){const w=
r.getId(a,m,b.normalizeCol(t),b.getWorldForColumn(t)),A=this._getOrAcquireTile(c,w);f.add(w);A.isReady?A.visible=!0:l.add(A.key)}l.forEach(m=>this._addPlaceholders(f,m));this._tiles.forEach(m=>{f.has(m.key.id)||(d.push(m.key.id),this._releaseTile(m))});h.pool.release(g);return{hasMissingTiles:0<l.size,added:c,removed:d}};p._getOrAcquireTile=function(g,e){if(!this._tiles.has(e)){const b=this.acquireTile(new r(e));g.push(e);this._tiles.set(e,b);b.visible=!1}return this._tiles.get(e)};p._getTile=function(g){return this._tiles.get(g)};
p._releaseTile=function(g){this._tiles.delete(g.key.id);this.releaseTile(g)};p._addPlaceholders=function(g,e){const b=this._addPlaceholderChildren(g,e);1E-6>Math.abs(1-b)||this._addPlaceholderParent(g,e)||(this._getTile(e.id).visible=!0)};p._addPlaceholderChildren=function(g,e){let b=0;this._tiles.forEach(a=>{b+=this._addPlaceholderChild(g,a,e)});return b};p._addPlaceholderChild=function(g,e,b){if(e.key.level<=b.level||!e.hasData||!b.contains(e.key))return 0;e.visible=!0;g.add(e.key.id);return 1/
(1<<2*(e.key.level-b.level))};p._addPlaceholderParent=function(g,e){e=e.getParentKey();let b=0,a=null;for(;n.isSome(e);){if(g.has(e.id))return!0;const c=this._getTile(e.id);if(null!=c&&c.isReady)return c.visible=!0,g.add(c.key.id),!0;null!=c&&c.hasData&&c.patchCount>b&&(b=c.patchCount,a=c);e=e.getParentKey()}return a?(a.visible=!0,g.add(a.key.id),!0):!1};return z}();u.TileManager=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/FeatureLayerView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/deprecate ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/commonProperties ../../layers/support/FeatureEffect ../../layers/support/FeatureFilter ../../layers/support/fieldUtils ../../layers/support/floorFilterUtils ../../rest/support/Query ../../support/arcadeOnDemand ./support/popupUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A){const x=v.getLogger("esri.views.layers.FeatureLayerView");return y=>{y=function(B){function C(...F){F=B.call(this,...F)||this;F._updatingRequiredFieldsPromise=null;F.filter=null;F.timeExtent=null;F.layer=null;F.requiredFields=[];F.view=null;return F}u._inheritsLoose(C,B);var D=C.prototype;D.initialize=function(){this.handles.add([g.watch(()=>{var F;const E=this.layer;return[null==E?void 0:null==(F=E.elevationInfo)?void 0:F.featureExpressionInfo,
null==E?void 0:E.displayField,null==E?void 0:E.timeInfo,E&&"renderer"in E&&E.renderer,E&&"labelingInfo"in E&&E.labelingInfo,E&&"floorInfo"in E&&E.floorInfo,this.filter,this.featureEffect,this.timeExtent]},()=>this._handleRequiredFieldsChange(),g.syncAndInitial),g.on(()=>{var F;return null==(F=this.view)?void 0:F.floors},"change",()=>this._handleRequiredFieldsChange()),g.on(()=>{const F=this.layer;return F&&"sublayers"in F&&F.sublayers},"change",()=>this._handleRequiredFieldsChange())])};D.highlight=
function(F){throw Error("missing implementation");};D.createQuery=function(){var F={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};F=z.isSome(this.filter)?this.filter.createQuery(F):new t(F);if("feature"===this.layer.type){const E=q.getFloorFilterClause(this);z.isSome(E)&&(F.where=F.where?`(${F.where}) AND (${E})`:E)}z.isSome(this.timeExtent)&&(F.timeExtent=z.isSome(F.timeExtent)?F.timeExtent.intersection(this.timeExtent):this.timeExtent.clone());return F};D.queryFeatures=
function(F,E){throw Error("missing implementation");};D.queryObjectIds=function(F,E){throw Error("missing implementation");};D.queryFeatureCount=function(F,E){throw Error("missing implementation");};D.queryExtent=function(F,E){throw Error("missing implementation");};D.fetchPopupFeatures=function(){var F=u._asyncToGenerator(function*(E,G){if(E=this.validateFetchPopupFeatures(G))throw E;return this.fetchClientPopupFeatures(G)});return function(E,G){return F.apply(this,arguments)}}();D._loadArcadeModules=
function(F){if(F.get("expressionInfos.length")||Array.isArray(F.content)&&F.content.some(E=>"expression"===E.type))return w.loadArcade()};D._handleRequiredFieldsChange=function(){const F=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",F);F.then(()=>{this._updatingRequiredFieldsPromise===F&&this._set("_updatingRequiredFieldsPromise",null)})};D._updateRequiredFields=function(){var F=u._asyncToGenerator(function*(){if(this.layer&&this.view){var E="3d"===this.view.type,{layer:G,
layer:{fieldsIndex:O,objectIdField:H}}=this,K="renderer"in G&&G.renderer,P="orderBy"in G&&G.orderBy,L=G.featureReduction,M=new Set;K=yield p.eachAlways([K?K.collectRequiredFields(M,O):null,k.collectLabelingFields(M,G),E?k.collectElevationFields(M,G):null,z.isSome(this.filter)?k.collectFilterFields(M,G,this.filter):null,z.isSome(this.featureEffect)?k.collectFilterFields(M,G,this.featureEffect.filter):null,L?k.collectFeatureReductionFields(M,G,L):null,P?k.collectOrderByInfos(M,G,P):null]);G.timeInfo&&
this.timeExtent&&k.collectFields(M,G.fieldsIndex,[G.timeInfo.startField,G.timeInfo.endField]);"feature"===G.type&&G.floorInfo&&k.collectFields(M,G.fieldsIndex,[G.floorInfo.floorField]);"subtype-group"===G.type&&(k.collectField(M,O,G.subtypeField),P=G.sublayers.map(J=>{var R;return Promise.all([null==(R=J.renderer)?void 0:R.collectRequiredFields(M,O),k.collectLabelingFields(M,J)])}),yield p.eachAlways(P));for(const J of K)J.error&&x.error(J.error);k.collectField(M,O,H);E&&"displayField"in G&&G.displayField&&
k.collectField(M,O,G.displayField);E=Array.from(M).sort();this._set("requiredFields",E)}});return function(){return F.apply(this,arguments)}}();D.validateFetchPopupFeatures=function(F){if(z.isNone(F))return null;for(const E of F.clientGraphics){const G=E.layer;if("popupEnabled"in G&&!G.popupEnabled)return new r("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:G});if(E.isAggregate){if(!(G.featureReduction&&"popupTemplate"in G.featureReduction&&G.featureReduction.popupEnabled&&G.featureReduction.popupTemplate))return new r("featurelayerview:fetchPopupFeatures",
"Popups are disabled",{layer:G})}else if("popupTemplate"in G&&!A.getFetchPopupTemplate(G,F))return new r("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:G})}};D.fetchClientPopupFeatures=function(){var F=u._asyncToGenerator(function*(E){const G=z.isSome(E)?E.clientGraphics:null;if(!G||0===G.length)return[];const O=Array(G.length),H=new Map,K=yield this.createPopupQuery(E);for(let L=0;L<G.length;L++){const M=G[L];if(M.isAggregate){O[L]=M;continue}var {layer:P}=
M;if(!("popupEnabled"in P))continue;const J=k.unpackFieldNames(this.layer.fieldsIndex,K.outFields);P=A.getFetchPopupTemplate(P,E);if(z.isNone(P))continue;const R=yield this._loadArcadeModules(P);R&&R.arcadeUtils.hasGeometryOperations(P)||!k.featureHasFields(J,M)?H.set(M.getObjectId(),L):O[L]=M}if("stream"===this.layer.type||0===H.size)return O.filter(Boolean);K.objectIds=Array.from(H.keys());try{const L=yield this.layer.queryFeatures(K);for(const M of L.features){const J=H.get(M.getObjectId());O[J]=
M}}catch{}return O.filter(Boolean)});return function(E){return F.apply(this,arguments)}}();D.createPopupQuery=function(){var F=u._asyncToGenerator(function*(E){const G=this.layer.createQuery(),O=new Set;var H=!1,K=z.isSome(E)&&E.clientGraphics?E.clientGraphics.map(P=>P.layer):[this.layer];for(const P of K)if("popupEnabled"in P&&(K=A.getFetchPopupTemplate(P,E),!z.isNone(K))){H=(H=yield this._loadArcadeModules(K))&&H.arcadeUtils.hasGeometryOperations(K);H=!("point"!==this.layer.geometryType&&!H);K=
yield A.getRequiredFields(this.layer,K);for(const L of K)O.add(L)}G.returnGeometry=H;G.returnZ=H;G.returnM=H;G.outFields=Array.from(O);G.outSpatialReference=this.view.spatialReference;"feature"===this.layer.type&&(E=q.getFloorFilterClause(this),z.isSome(E)&&(G.where=G.where?`(${G.where}) AND (${E})`:E));return G});return function(E){return F.apply(this,arguments)}}();D.canResume=function(){return!B.prototype.canResume.call(this)||z.isSome(this.timeExtent)&&this.timeExtent.isEmpty?!1:!0};u._createClass(C,
[{key:"availableFields",get:function(){const {layer:F,layer:{fieldsIndex:E},requiredFields:G}=this;return"outFields"in F&&F.outFields?k.fixFields(E,[...k.unpackFieldNames(E,F.outFields),...G]):k.fixFields(E,G)}},{key:"effect",get:function(){h.deprecatedProperty(x,"effect",{replacement:"featureEffect",version:"4.22"});return this.featureEffect},set:function(F){h.deprecatedProperty(x,"effect",{replacement:"featureEffect",version:"4.22"});this.featureEffect=F}},{key:"featureEffect",get:function(){return this.layer&&
"featureEffect"in this.layer?this.layer.featureEffect:null},set:function(F){void 0===F?this._clearOverride("featureEffect"):this._override("featureEffect",F)}},{key:"maximumNumberOfFeatures",get:function(){return 0},set:function(F){x.error("#maximumNumberOfFeatures\x3d","Setting maximum number of features is not supported")}},{key:"maximumNumberOfFeaturesExceeded",get:function(){return!1}}]);return C}(y);n.__decorate([e.property()],y.prototype,"_updatingRequiredFieldsPromise",void 0);n.__decorate([e.property({readOnly:!0})],
y.prototype,"availableFields",null);n.__decorate([e.property()],y.prototype,"effect",null);n.__decorate([e.property({type:l})],y.prototype,"featureEffect",null);n.__decorate([e.property({type:m})],y.prototype,"filter",void 0);n.__decorate([e.property(f.combinedViewLayerTimeExtentProperty)],y.prototype,"timeExtent",void 0);n.__decorate([e.property()],y.prototype,"layer",void 0);n.__decorate([e.property({type:Number})],y.prototype,"maximumNumberOfFeatures",null);n.__decorate([e.property({readOnly:!0,
type:Boolean})],y.prototype,"maximumNumberOfFeaturesExceeded",null);n.__decorate([e.property({readOnly:!0})],y.prototype,"requiredFields",void 0);n.__decorate([e.property()],y.prototype,"suspended",void 0);n.__decorate([e.property()],y.prototype,"view",void 0);return y=n.__decorate([d.subclass("esri.views.layers.FeatureLayerView")],y)}})},"esri/views/layers/support/popupUtils":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","../../../layers/support/fieldUtils"],
function(u,n,h,r){function v(){v=n._asyncToGenerator(function*(z,p=z.popupTemplate){if(h.isNone(p))return[];const g=yield p.getRequiredFields(z.fieldsIndex);({lastEditInfoEnabled:p}=p);const {objectIdField:e,typeIdField:b,globalIdField:a,relationships:c}=z;if(g.includes("*"))return["*"];p=p?yield r.getFeatureEditFields(z):[];const d=r.fixFields(z.fieldsIndex,[...g,...p]);b&&d.push(b);d&&e&&z.fieldsIndex.has(e)&&!d.includes(e)&&d.push(e);d&&a&&z.fieldsIndex.has(a)&&!d.includes(a)&&d.push(a);c&&c.forEach(f=>
{({keyField:f}=f);d&&f&&z.fieldsIndex.has(f)&&!d.includes(f)&&d.push(f)});return d});return v.apply(this,arguments)}u.getFetchPopupTemplate=function(z,p){return z.popupTemplate?z.popupTemplate:h.isSome(p)&&p.defaultPopupTemplateEnabled&&h.isSome(z.defaultPopupTemplate)?z.defaultPopupTemplate:null};u.getRequiredFields=function(z){return v.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl":function(){define([],1)},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){var e;r=e=function(b){function a(c){c=b.call(this,c)||this;c.color=new h([0,0,0,1]);return c}u._inheritsLoose(a,b);a.prototype.clone=function(){return new e(v.clone({color:this.color}))};return a}(r.JSONSupport);n.__decorate([z.property({type:h,json:{write:!0}})],r.prototype,"color",void 0);return r=e=n.__decorate([g.subclass("esri.webmap.background.ColorBackground")],r)})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],
function(u,n){u.getIconPath=function(h){const r=n.getAssetUrl("esri/themes/base/images/files/");return h?"text/plain"===h?`${r}text-32.svg`:"application/pdf"===h?`${r}pdf-32.svg`:"text/csv"===h?`${r}csv-32.svg`:"application/gpx+xml"===h?`${r}gpx-32.svg`:"application/x-dwf"===h?`${r}cad-32.svg`:"application/postscript"===h||"application/json"===h||"text/xml"===h||"model/vrml"===h?`${r}code-32.svg`:"application/x-zip-compressed"===h||"application/x-7z-compressed"===h||"application/x-gzip"===h||"application/x-tar"===
h||"application/x-gtar"===h||"application/x-bzip2"===h||"application/gzip"===h||"application/x-compress"===h||"application/x-apple-diskimage"===h||"application/x-rar-compressed"===h||"application/zip"===h?`${r}zip-32.svg`:h.includes("image/")?`${r}image-32.svg`:h.includes("audio/")?`${r}sound-32.svg`:h.includes("video/")?`${r}video-32.svg`:h.includes("msexcel")||h.includes("ms-excel")||h.includes("spreadsheetml")?`${r}excel-32.svg`:h.includes("msword")||h.includes("ms-word")||h.includes("wordprocessingml")?
`${r}word-32.svg`:h.includes("powerpoint")||h.includes("presentationml")?`${r}report-32.svg`:`${r}generic-32.svg`:`${r}generic-32.svg`};u.isSupportedImage=function(h){h=h.toLowerCase();return"image/bmp"===h||"image/emf"===h||"image/exif"===h||"image/gif"===h||"image/x-icon"===h||"image/jpeg"===h||"image/png"===h||"image/tiff"===h||"image/x-wmf"===h};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),
function(u,n,h,r,v,z,p,g){function e(f,l,m){return f.units[l][m]}function b(f,l,m,k=2,q="abbr"){return`${g.formatNumber(l,{minimumFractionDigits:k,maximumFractionDigits:k})} ${e(f,m,q)}`}function a(f,l,m,k=2,q="abbr"){return`${g.formatNumber(l,{minimumFractionDigits:k,maximumFractionDigits:k,signDisplay:"exceptZero"})} ${e(f,m,q)}`}function c(f,l,m){if(l===m)return f;switch(m){case "arithmetic":return-f+90;case "geographic":return-f-90}}const d=["B","kB","MB","GB","TB"];u.formatAngleDegrees=function(f,
l,m,k,q){f=h.cyclicalDegrees.normalize(c(p.convertUnit(f,l,"degrees"),m,k),0,!0);q=v.unwrapOr(q,2);return g.formatNumber(f,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:q,minimumFractionDigits:q})};u.formatDMS=function(f,l,m=2){f=p.convertUnit(f,l,"degrees");l=f-Math.floor(f);f-=l;l*=60;let k=l-Math.floor(l);l-=k;k*=60;return`${f.toFixed()}\u00b0 ${l.toFixed()}' ${k.toFixed(m)}"`};u.formatDecimal=b;u.formatFileSize=function(f,l){let m=0===l?0:Math.floor(Math.log(l)/Math.log(n.ByteSizeUnit.KILOBYTES));
m=r.clamp(m,0,d.length-1);l=g.formatNumber(l/n.ByteSizeUnit.KILOBYTES**m,{maximumFractionDigits:2});return z.replace(f.units.bytes[d[m]],{fileSize:l})};u.formatImperialArea=function(f,l,m,k=2,q="abbr"){const t=p.preferredImperialAreaUnit(l,m);return b(f,p.convertUnit(l,m,t),t,k,q)};u.formatImperialLength=function(f,l,m,k=2,q="abbr"){const t=p.preferredImperialLengthUnit(l,m);return b(f,p.convertUnit(l,m,t),t,k,q)};u.formatImperialRelativeLength=function(f,l,m,k=2,q="abbr"){const t=p.preferredImperialLengthUnit(l,
m);return a(f,p.convertUnit(l,m,t),t,k,q)};u.formatImperialRelativeVerticalLength=function(f,l,m,k=2,q="abbr"){const t=p.preferredImperialVerticalLengthUnit(l,m);return a(f,p.convertUnit(l,m,t),t,k,q)};u.formatImperialVerticalLength=function(f,l,m,k=2,q="abbr"){const t=p.preferredImperialVerticalLengthUnit(l,m);return b(f,p.convertUnit(l,m,t),t,k,q)};u.formatMetricArea=function(f,l,m,k=2,q="abbr"){const t=p.preferredMetricAreaUnit(l,m);return b(f,p.convertUnit(l,m,t),t,k,q)};u.formatMetricLength=
function(f,l,m,k=2,q="abbr"){const t=p.preferredMetricLengthUnit(l,m);return b(f,p.convertUnit(l,m,t),t,k,q)};u.formatMetricRelativeLength=function(f,l,m,k=2,q="abbr"){const t=p.preferredMetricLengthUnit(l,m);return a(f,p.convertUnit(l,m,t),t,k,q)};u.formatMetricRelativeVerticalLength=function(f,l,m,k=2,q="abbr"){const t=p.preferredMetricVerticalLengthUnit(l,m);return a(f,p.convertUnit(l,m,t),t,k,q)};u.formatMetricVerticalLength=function(f,l,m,k=2,q="abbr"){const t=p.preferredMetricVerticalLengthUnit(l,
m);return b(f,p.convertUnit(l,m,t),t,k,q)};u.formatRelativeAngleDegrees=function(f,l,m,k,q){m!==k&&(f=-f);f=p.convertUnit(f,l,"degrees")%360;q=v.unwrapOr(q,2);return g.formatNumber(f,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:q,minimumFractionDigits:q,signDisplay:"exceptZero"})};u.formatRelativeDecimal=a;u.unitName=e;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/uriUtils":function(){define(["exports","../../core/string"],
function(u,n){function h(v){let z=null;r.some(p=>{p.pattern.test(v)&&(z=p);return!!z});return z}const r=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},
{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},
{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];u.autoLink=function(v,z){if("string"!==typeof z||!z)return z;const p=h(z);if(!p)return z;const g=z.match(p.pattern);v=n.replace(n.replace(p.label,
{messages:v,hierPart:g&&g[2]}),{appName:p.appName});return z.replace(p.pattern,`<a${p.target?` target="${p.target}"`:""} href="$1"${"_blank"===p.target?' rel\x3d"noreferrer"':""}>${v}</a>`)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),function(u,n,h,r,v,z){function p(d){if(!d)return"en-us";
if(b.has(d.toLowerCase()))return d.toLowerCase();{d=d.split("-")[0].toLowerCase();let l=null;for(f of b.keys())if(f.startsWith(d)){l=f;break}var f=l}return f||"en-us"}function g(){g=h._asyncToGenerator(function*(d=z.getLocale()){d=p(d);if(a&&d===c)return a;a=(new Promise((f,l)=>u(["../../chunks/index"],f,l))).then(f=>f.index);c=d;try{const [f,l]=yield Promise.all([a,b.get(c)()]);c===d&&(f.am4core.options.defaultLocale=l.default);f.am4core.options.suppressWarnings=!0;f.am4core.options.autoDispose=
!0}catch{return c=a=null}return a});return g.apply(this,arguments)}r="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var e=[{name:"default",colors:[].concat(r.slice(30,39),r.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const b=new Map([["ar",()=>(new Promise((d,f)=>u(["../../chunks/ar"],d,f))).then(d=>d.ar)],["bg-bg",()=>(new Promise((d,
f)=>u(["../../chunks/bg_BG"],d,f))).then(d=>d.bg_BG)],["bs-ba",()=>(new Promise((d,f)=>u(["../../chunks/bs_BA"],d,f))).then(d=>d.bs_BA)],["ca-es",()=>(new Promise((d,f)=>u(["../../chunks/ca_ES"],d,f))).then(d=>d.ca_ES)],["cs-cz",()=>(new Promise((d,f)=>u(["../../chunks/cs_CZ"],d,f))).then(d=>d.cs_CZ)],["da-dk",()=>(new Promise((d,f)=>u(["../../chunks/da_DK"],d,f))).then(d=>d.da_DK)],["de-de",()=>(new Promise((d,f)=>u(["../../chunks/de_DE"],d,f))).then(d=>d.de_DE)],["de-ch",()=>(new Promise((d,f)=>
u(["../../chunks/de_CH"],d,f))).then(d=>d.de_CH)],["el-gr",()=>(new Promise((d,f)=>u(["../../chunks/el_GR"],d,f))).then(d=>d.el_GR)],["en-us",()=>(new Promise((d,f)=>u(["../../chunks/en_US"],d,f))).then(d=>d.en_US)],["en-ca",()=>(new Promise((d,f)=>u(["../../chunks/en_CA"],d,f))).then(d=>d.en_CA)],["es-es",()=>(new Promise((d,f)=>u(["../../chunks/es_ES"],d,f))).then(d=>d.es_ES)],["et-ee",()=>(new Promise((d,f)=>u(["../../chunks/et_EE"],d,f))).then(d=>d.et_EE)],["fi-fi",()=>(new Promise((d,f)=>u(["../../chunks/fi_FI"],
d,f))).then(d=>d.fi_FI)],["fr-fr",()=>(new Promise((d,f)=>u(["../../chunks/fr_FR"],d,f))).then(d=>d.fr_FR)],["he-il",()=>(new Promise((d,f)=>u(["../../chunks/he_IL"],d,f))).then(d=>d.he_IL)],["hr-hr",()=>(new Promise((d,f)=>u(["../../chunks/hr_HR"],d,f))).then(d=>d.hr_HR)],["hu-hu",()=>(new Promise((d,f)=>u(["../../chunks/hu_HU"],d,f))).then(d=>d.hu_HU)],["id-id",()=>(new Promise((d,f)=>u(["../../chunks/id_ID"],d,f))).then(d=>d.id_ID)],["it-it",()=>(new Promise((d,f)=>u(["../../chunks/it_IT"],d,f))).then(d=>
d.it_IT)],["ja-jp",()=>(new Promise((d,f)=>u(["../../chunks/ja_JP"],d,f))).then(d=>d.ja_JP)],["ko-kr",()=>(new Promise((d,f)=>u(["../../chunks/ko_KR"],d,f))).then(d=>d.ko_KR)],["lt-lt",()=>(new Promise((d,f)=>u(["../../chunks/lt_LT"],d,f))).then(d=>d.lt_LT)],["lv-lv",()=>(new Promise((d,f)=>u(["../../chunks/lv_LV"],d,f))).then(d=>d.lv_LV)],["nb-no",()=>(new Promise((d,f)=>u(["../../chunks/nb_NO"],d,f))).then(d=>d.nb_NO)],["nl-nl",()=>(new Promise((d,f)=>u(["../../chunks/nl_NL"],d,f))).then(d=>d.nl_NL)],
["pl-pl",()=>(new Promise((d,f)=>u(["../../chunks/pl_PL"],d,f))).then(d=>d.pl_PL)],["pt-br",()=>(new Promise((d,f)=>u(["../../chunks/pt_BR"],d,f))).then(d=>d.pt_BR)],["pt-pt",()=>(new Promise((d,f)=>u(["../../chunks/pt_PT"],d,f))).then(d=>d.pt_PT)],["ro-ro",()=>(new Promise((d,f)=>u(["../../chunks/ro_RO"],d,f))).then(d=>d.ro_RO)],["ru-ru",()=>(new Promise((d,f)=>u(["../../chunks/ru_RU"],d,f))).then(d=>d.ru_RU)],["sk-sk",()=>(new Promise((d,f)=>u(["../../chunks/sk_SK"],d,f))).then(d=>d.sk_SK)],["sl-sl",
()=>(new Promise((d,f)=>u(["../../chunks/sl_SL"],d,f))).then(d=>d.sl_SL)],["sr-rs",()=>(new Promise((d,f)=>u(["../../chunks/sr_RS"],d,f))).then(d=>d.sr_RS)],["sv-se",()=>(new Promise((d,f)=>u(["../../chunks/sv_SE"],d,f))).then(d=>d.sv_SE)],["th-th",()=>(new Promise((d,f)=>u(["../../chunks/th_TH"],d,f))).then(d=>d.th_TH)],["tr-tr",()=>(new Promise((d,f)=>u(["../../chunks/tr_TR"],d,f))).then(d=>d.tr_TR)],["uk-ua",()=>(new Promise((d,f)=>u(["../../chunks/uk_UA"],d,f))).then(d=>d.uk_UA)],["vi-vn",()=>
(new Promise((d,f)=>u(["../../chunks/vi_VN"],d,f))).then(d=>d.vi_VN)],["zh-cn",()=>(new Promise((d,f)=>u(["../../chunks/zh_Hans"],d,f))).then(d=>d.zh_Hans)],["zh-hk",()=>(new Promise((d,f)=>u(["../../chunks/zh_Hant"],d,f))).then(d=>d.zh_Hant)],["zh-tw",()=>(new Promise((d,f)=>u(["../../chunks/zh_Hant"],d,f))).then(d=>d.zh_Hant)]]);let a,c;n.getChartLocale=p;n.getColorSet=function(d,f="default"){const l=e.find(m=>m.name===f);return l?l.colors.map(m=>d.color(m)):null};n.loadChartsModule=function(){return g.apply(this,
arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f){r=function(l){function m(q,t){q=l.call(this,q,t)||this;q.iconClass="esri-icon-zoom-in-magnifying-glass";q.label=void 0;q.messages=null;q.view=null;q.viewModel=new f;return q}u._inheritsLoose(m,l);var k=m.prototype;k.initialize=function(){this._zoomInButton=new d({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new d({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};k.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();
this._zoomOutButton=this._zoomInButton=null};k.render=function(){const q=this.viewModel,t={["esri-zoom--horizontal"]:"horizontal"===this.layout};this._zoomInButton.enabled="ready"===q.state&&q.canZoomIn;this._zoomOutButton.enabled="ready"===q.state&&q.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return c.tsx("div",{class:this.classes("esri-zoom esri-widget",t)},this._zoomInButton.render(),this._zoomOutButton.render())};k.zoomIn=function(){return this.viewModel.zoomIn()};
k.zoomOut=function(){return this.viewModel.zoomOut()};u._createClass(m,[{key:"layout",set:function(q){"horizontal"!==q&&(q="vertical");this._set("layout",q)}}]);return m}(e);n.__decorate([p.property()],r.prototype,"iconClass",void 0);n.__decorate([p.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],r.prototype,"label",void 0);n.__decorate([p.property({value:"vertical"})],r.prototype,"layout",null);n.__decorate([p.property(),a.messageBundle("esri/widgets/Zoom/t9n/Zoom")],r.prototype,
"messages",void 0);n.__decorate([h.aliasOf("viewModel.view")],r.prototype,"view",void 0);n.__decorate([p.property({type:f})],r.prototype,"viewModel",void 0);return r=n.__decorate([g.subclass("esri.widgets.Zoom")],r)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){r=function(c){function d(){var l=c.apply(this,arguments)||this;l.enabled=!0;l.iconClass="";l.title="";return l}u._inheritsLoose(d,c);var f=d.prototype;f.render=function(){const l=this.enabled?0:-1,m={[this.iconClass]:!!this.iconClass};return b.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:l,
title:this.title},b.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",m)}),b.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};f._triggerAction=function(){this.action.call(this)};return d}(g);n.__decorate([h.property()],r.prototype,"action",void 0);n.__decorate([h.property()],r.prototype,"enabled",void 0);n.__decorate([h.property()],r.prototype,"iconClass",void 0);n.__decorate([h.property()],r.prototype,"title",void 0);n.__decorate([e.accessibleHandler()],
r.prototype,"_triggerAction",null);return r=n.__decorate([p.subclass("esri.widgets.IconButton")],r)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(u,n,h,r,v,z,
p,g,e,b,a){h=function(c){function d(l){l=c.call(this,l)||this;l.canZoomIn=!1;l.canZoomOut=!1;return l}u._inheritsLoose(d,c);var f=d.prototype;f.destroy=function(){this.view=null};f.zoomIn=function(){if(this.canZoomIn){var l=this.view;"2d"===l.type?l.mapViewNavigation.zoomIn():r.ignoreAbortErrors(l.goTo({zoomFactor:2}))}};f.zoomOut=function(){if(this.canZoomOut){var l=this.view;"2d"===l.type?l.mapViewNavigation.zoomOut():r.ignoreAbortErrors(l.goTo({zoomFactor:.5}))}};u._createClass(d,[{key:"state",
get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(l){l?"2d"===l.type?this._zoomConditions=new b({view:l}):"3d"===l.type&&(this._zoomConditions=new a({view:l})):this._zoomConditions=null;this._set("view",l)}}]);return d}(h);n.__decorate([v.property()],h.prototype,"_zoomConditions",void 0);n.__decorate([v.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],h.prototype,"canZoomIn",void 0);n.__decorate([v.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],h.prototype,"canZoomOut",void 0);n.__decorate([v.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([v.property()],h.prototype,"view",null);return h=n.__decorate([e.subclass("esri.widgets.Zoom.ZoomViewModel")],h)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){h=function(e){function b(){return e.apply(this,arguments)||this}u._inheritsLoose(b,e);u._createClass(b,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const a=this.get("view.animation.target.scale")||this.get("view.scale"),c=this.get("view.constraints.effectiveMaxScale");return 0===c||a>c}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const a=this.get("view.animation.target.scale")||this.get("view.scale"),c=this.get("view.constraints.effectiveMinScale");
return 0===c||a<c}}]);return b}(h);n.__decorate([r.property({readOnly:!0})],h.prototype,"canZoomIn",null);n.__decorate([r.property({readOnly:!0})],h.prototype,"canZoomOut",null);n.__decorate([r.property()],h.prototype,"view",void 0);return h=n.__decorate([g.subclass("esri.widgets.Zoom.ZoomConditions2D")],h)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){h=function(e){function b(){return e.apply(this,arguments)||this}u._inheritsLoose(b,e);u._createClass(b,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]);return b}(h);n.__decorate([r.property({readOnly:!0})],h.prototype,"canZoomIn",null);n.__decorate([r.property({readOnly:!0})],h.prototype,"canZoomOut",null);n.__decorate([r.property()],h.prototype,"view",void 0);return h=n.__decorate([g.subclass("esri.widgets.Zoom.ZoomConditions3D")],
h)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d,
f){r=function(l){function m(q,t){q=l.call(this,q,t)||this;q.goToOverride=null;q.iconClass="esri-icon-locate-circled";q.label=void 0;q.messages=null;q.view=null;q.viewModel=new b;return q}u._inheritsLoose(m,l);var k=m.prototype;k.reset=function(){return this.viewModel.reset()};k.render=function(){const {orientation:q,state:t}=this.viewModel;var w="disabled"===t,A="compass"===("rotation"===t?"rotation":"compass");const x=w?-1:0;w={["esri-disabled"]:w,["esri-interactive"]:!w};A={["esri-icon-compass"]:A,
["esri-icon-dial"]:!A};const {messages:y}=this;return d.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",w),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:x,"aria-label":y.reset,title:y.reset},d.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",A),styles:this._toRotationTransform(q)}),d.tsx("span",{class:"esri-icon-font-fallback-text"},y.reset))};k._reset=function(){this.viewModel.reset()};k._toRotationTransform=function(q){return{transform:`rotateZ(${q.z}deg)`}};
return m}(e);n.__decorate([h.aliasOf("viewModel.goToOverride")],r.prototype,"goToOverride",void 0);n.__decorate([p.property()],r.prototype,"iconClass",void 0);n.__decorate([p.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],r.prototype,"label",void 0);n.__decorate([p.property(),c.messageBundle("esri/widgets/Compass/t9n/Compass")],r.prototype,"messages",void 0);n.__decorate([h.aliasOf("viewModel.view")],r.prototype,"view",void 0);n.__decorate([p.property({type:b})],r.prototype,"viewModel",
void 0);n.__decorate([a.accessibleHandler()],r.prototype,"_reset",null);return r=n.__decorate([g.subclass("esri.widgets.Compass")],r)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){h=function(d){function f(m){m=d.call(this,m)||this;m._handles=new r;m.orientation={x:0,y:0,z:0};m.view=null;m._updateForCamera=m._updateForCamera.bind(u._assertThisInitialized(m));m._updateForRotation=m._updateForRotation.bind(u._assertThisInitialized(m));m._updateRotationWatcher=m._updateRotationWatcher.bind(u._assertThisInitialized(m));return m}u._inheritsLoose(f,d);var l=f.prototype;l.initialize=function(){this._handles.add(z.watch(()=>this.view,this._updateRotationWatcher,
z.initial))};l.destroy=function(){this._handles=v.removeMaybe(this._handles);this.view=null};l.reset=function(){if(this.get("view.ready")){var m={};"2d"===this.view.type?m.rotation=0:m.heading=0;this.callGoTo({target:m})}};l._updateForRotation=function(m){void 0!==m&&null!==m&&(this.orientation={z:m})};l._updateForCamera=function(m){m&&(this.orientation={x:0,y:0,z:-m.heading})};l._updateRotationWatcher=function(m){this._handles.removeAll();m&&this._handles.add("2d"===m.type?z.watch(()=>null==m?void 0:
m.rotation,this._updateForRotation,z.initial):z.watch(()=>null==m?void 0:m.camera,this._updateForCamera,z.initial))};u._createClass(f,[{key:"canShowNorth",get:function(){const m=this.get("view.spatialReference");return!(!m||!m.isWebMercator&&!m.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return f}(c.GoToMixin(h));n.__decorate([p.property({readOnly:!0})],h.prototype,"canShowNorth",null);n.__decorate([p.property()],
h.prototype,"orientation",void 0);n.__decorate([p.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([p.property()],h.prototype,"view",void 0);return h=n.__decorate([a.subclass("esri.widgets.CompassViewModel")],h)})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){u.GoToMixin=e=>{e=function(b){function a(...c){c=b.call(this,...c)||this;c.goToOverride=null;c.view=null;return c}n._inheritsLoose(a,b);a.prototype.callGoTo=function(c){const {view:d}=this;return this.goToOverride?this.goToOverride(d,c):d.goTo(c.target,c.options)};return a}(e);h.__decorate([r.property()],e.prototype,"goToOverride",void 0);h.__decorate([r.property()],e.prototype,"view",void 0);return e=h.__decorate([g.subclass("esri.widgets.support.GoTo")],e)};Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){const q={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},t=window.CSS;p=function(w){function A(y,B){y=w.call(this,y,B)||this;y.abilities=null;y.displayType="auto";y.graphic=null;y.label=void 0;y.messages=null;y.messagesUnits=null;y.selectedFile=null;y.submitting=!1;y.viewModel=new d;y.visibleElements={...q};y._supportsImageOrientation=t&&t.supports&&t.supports("image-orientation",
"from-image");y._addAttachmentForm=null;y._updateAttachmentForm=null;return y}u._inheritsLoose(A,w);var x=A.prototype;x.initialize=function(){this.own([r.on(()=>{var y;return null==(y=this.viewModel)?void 0:y.attachmentInfos},"change",()=>this.scheduleRender()),r.watch(()=>{var y;return null==(y=this.viewModel)?void 0:y.mode},()=>this._modeChanged(),r.initial)])};x.castVisibleElements=function(y){return{...q,...y}};x.addAttachment=function(){const {_addAttachmentForm:y,viewModel:B}=this;this._set("submitting",
!0);this._set("error",null);return B.addAttachment(y).then(C=>{this._set("submitting",!1);this._set("error",null);B.mode="view";return C}).catch(C=>{this._set("submitting",!1);this._set("error",new h("attachments:add-attachment",this.messages.addErrorMessage,C));throw C;})};x.deleteAttachment=function(y){const {viewModel:B}=this;this._set("submitting",!0);this._set("error",null);return B.deleteAttachment(y).then(C=>{this._set("submitting",!1);this._set("error",null);B.mode="view";return C}).catch(C=>
{this._set("submitting",!1);this._set("error",new h("attachments:delete-attachment",this.messages.deleteErrorMessage,C));throw C;})};x.updateAttachment=function(){const {viewModel:y}=this,{_updateAttachmentForm:B}=this;this._set("submitting",!0);this._set("error",null);return y.updateAttachment(B).then(C=>{this._set("submitting",!1);this._set("error",null);y.mode="view";return C}).catch(C=>{this._set("submitting",!1);this._set("error",new h("attachments:update-attachment",this.messages.updateErrorMessage,
C));throw C;})};x.render=function(){const {submitting:y,viewModel:B}=this,{state:C}=B;return k.tsx("div",{class:this.classes("esri-attachments","esri-widget")},y?this.renderProgressBar():null,"loading"===C?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};x.renderErrorMessage=function(){const {error:y,visibleElements:B}=this;return y&&B.errorMessage?k.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},y.message):null};x.renderAttachments=function(){const {mode:y,
activeAttachmentInfo:B}=this.viewModel;return"add"===y?this.renderAddForm():"edit"===y?this.renderDetailsForm(B):this.renderAttachmentContainer()};x.renderLoading=function(){return k.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},k.tsx("div",{class:"esri-attachments__loader"}))};x.renderProgressBar=function(){return this.visibleElements.progressBar?k.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};x.renderAddForm=function(){const {submitting:y,selectedFile:B}=
this;var C=y||!B,D=this.visibleElements.cancelAddButton?k.tsx("button",{type:"button",bind:this,disabled:y,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",y&&"esri-button--disabled")},this.messages.cancel):null;C=this.visibleElements.addSubmitButton?k.tsx("button",{type:"submit",disabled:C,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:C})},this.messages.add):
null;const F=B?k.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},B.name):null;D=k.tsx("form",{bind:this,afterCreate:l.storeNode,afterRemoved:l.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},k.tsx("fieldset",{class:"esri-attachments__file-fieldset"},F,k.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},B?this.messages.changeFile:this.messages.selectFile,k.tsx("input",{class:"esri-attachments__file-input",
type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),C,D);return k.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},D)};x.renderDetailsForm=function(y){const {visibleElements:B,viewModel:C,selectedFile:D,submitting:F}=this,{contentType:E,size:G,url:O}=y;var {abilities:H}=C,K=F||!D,P=H.editing&&H.operations.delete&&B.deleteButton?k.tsx("button",{key:"delete-button",type:"button",disabled:F,bind:this,onclick:R=>this._submitDeleteAttachment(R,y),class:this.classes("esri-button",
"esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:F})},this.messages.delete):null;K=H.editing&&H.operations.update&&B.updateButton?k.tsx("button",{disabled:K,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:K})},this.messages.update):null;const L=this.visibleElements.cancelUpdateButton?k.tsx("button",{disabled:F,key:"cancel-button",type:"button",bind:this,
onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:F})},this.messages.cancel):null;var M=D?k.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},D.name):null;H=H.editing&&H.operations.update?k.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},M,k.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,
k.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null;M=k.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},k.tsx("label",null,v.formatFileSize(this.messagesUnits,G)));const J=k.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},k.tsx("label",null,E));P=k.tsx("form",{bind:this,afterCreate:l.storeNode,afterRemoved:l.discardNode,"data-node-ref":"_updateAttachmentForm",
onsubmit:this._submitUpdateAttachment},k.tsx("div",{class:"esri-attachments__metadata"},M,J),H,k.tsx("div",{class:"esri-attachments__actions"},P,L,K));return k.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},k.tsx("a",{class:"esri-attachments__item-link",href:O,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:y,size:400}),k.tsx("div",{class:"esri-attachments__item-link-overlay"},k.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},k.tsx("svg",
{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},k.tsx("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),k.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),P)};x.renderImageMask=function({attachmentInfo:y,size:B}){var {supportsResizeAttachments:C}=this.viewModel;const {contentType:D,name:F,url:E}=y,G=C&&f.isSupportedImage(D);y=(y=this._getCSSTransform(y,G))?{transform:y,"image-orientation":"none"}:{};const O=E.includes("?")?
"\x26":"?";B=G?`${E}${O}w=${B}`:f.getIconPath(D);C={["esri-attachments__image--resizable"]:C};return k.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!G},"esri-attachments__item-mask")},k.tsx("img",{styles:y,alt:F,src:B,class:this.classes(C,"esri-attachments__image")}))};x.renderAttachmentInfo=function({attachmentInfo:y,displayType:B}){var {viewModel:C}=this;({abilities:C}=C);const {name:D,url:F}=y;B=this.renderImageMask({attachmentInfo:y,size:"list"===B?48:400});var E=C.editing?
k.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",l.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;E=k.tsx("label",{class:"esri-attachments__label"},k.tsx("span",{class:"esri-attachments__filename"},D||this.messages.noTitle),E);B=[B,E];C=C.editing?k.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":y.id,
onclick:()=>this._startEditAttachment(y),type:"button"},B):k.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:F,target:"_blank"},B);return k.tsx("li",{class:"esri-attachments__item",key:y},C)};x.renderAttachmentContainer=function(){const {effectiveDisplayType:y,viewModel:B,visibleElements:C}=this,{attachmentInfos:D,abilities:F}=B;var E=D&&D.length;const G={["esri-attachments__container--list"]:"preview"!==y,["esri-attachments__container--preview"]:"preview"===y},O=F.editing&&
F.operations.add&&C.addButton?k.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},k.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;E=E?k.tsx("ul",{class:"esri-attachments__items"},D.toArray().map(H=>this.renderAttachmentInfo({attachmentInfo:H,displayType:y}))):k.tsx("div",{class:"esri-widget__content--empty"},
this.messages.noAttachments);return k.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",G)},E,O)};x._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};x._handleFileInputChange=function(y){y=(y=y.target)&&y.files&&y.files.item(0);this._set("selectedFile",y)};x._submitDeleteAttachment=function(y,B){y.preventDefault();this.deleteAttachment(B)};x._submitAddAttachment=function(y){y.preventDefault();this.addAttachment()};x._submitUpdateAttachment=
function(y){y.preventDefault();this.updateAttachment()};x._startEditAttachment=function(y){const {viewModel:B}=this;B.activeAttachmentInfo=y;B.mode="edit"};x._startAddAttachment=function(){this.viewModel.mode="add"};x._cancelForm=function(y){y.preventDefault();this.viewModel.mode="view"};x._getCSSTransform=function(y,B){({orientationInfo:y}=y);return!this._supportsImageOrientation&&B&&y?[y.rotation?`rotate(${y.rotation}deg)`:"",y.mirrored?"scaleX(-1)":""].join(" "):""};u._createClass(A,[{key:"effectiveDisplayType",
get:function(){const {displayType:y}=this;return y&&"auto"!==y?y:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return A}(c);n.__decorate([z.aliasOf("viewModel.abilities")],p.prototype,"abilities",void 0);n.__decorate([b.property()],p.prototype,"displayType",void 0);n.__decorate([b.property({readOnly:!0})],p.prototype,"effectiveDisplayType",null);n.__decorate([z.aliasOf("viewModel.graphic")],p.prototype,"graphic",void 0);n.__decorate([b.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],p.prototype,"label",void 0);n.__decorate([b.property(),m.messageBundle("esri/widgets/Attachments/t9n/Attachments")],p.prototype,"messages",void 0);n.__decorate([b.property(),m.messageBundle("esri/core/t9n/Units")],p.prototype,"messagesUnits",void 0);n.__decorate([b.property({readOnly:!0})],p.prototype,"selectedFile",void 0);n.__decorate([b.property({readOnly:!0})],p.prototype,"submitting",void 0);n.__decorate([b.property({readOnly:!0})],p.prototype,"error",void 0);n.__decorate([b.property({type:d})],
p.prototype,"viewModel",void 0);n.__decorate([b.property()],p.prototype,"visibleElements",void 0);n.__decorate([e.cast("visibleElements")],p.prototype,"castVisibleElements",null);return p=n.__decorate([a.subclass("esri.widgets.Attachments")],p)})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m){const k={editing:!1,operations:{add:!0,update:!0,delete:!0}},q=v.ofType(f);r=function(t){function w(x){var y=t.call(this,x)||this;y._getAttachmentsPromise=null;y._attachmentLayer=null;y.abilities={...k};y.activeAttachmentInfo=null;y.attachmentInfos=new q;y.graphic=null;y.mode="view";y.own(g.watch(()=>y.graphic,()=>y._graphicChanged(),g.initial));return y}u._inheritsLoose(w,t);var A=w.prototype;A.destroy=function(){this.graphic=this._attachmentLayer=null};
A.castAbilities=function(x){return{...k,...x}};A.getAttachments=function(){var x=u._asyncToGenerator(function*(){const {_attachmentLayer:y,attachmentInfos:B}=this;if(!y||"function"!==typeof y.queryAttachments)throw new z("invalid-layer","getAttachments(): A valid layer is required.");const C=this._getFeatureId();var D=new l({objectIds:[C],returnMetadata:!0});const F=[];this._getAttachmentsPromise=D=y.queryAttachments(D).then(E=>E[C]||F).catch(()=>F);this.notifyChange("state");D=yield D;B.removeAll();
D.length&&B.addMany(D);this._getAttachmentsPromise=null;this.notifyChange("state");return D});return function(){return x.apply(this,arguments)}}();A.addAttachment=function(){var x=u._asyncToGenerator(function*(y){const {_attachmentLayer:B,attachmentInfos:C,graphic:D,abilities:F}=this;if(!y)throw new z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:y});if(!F.operations.add)throw new z("invalid-abilities","addAttachment(): add abilities are required.");if(!B||"function"!==
typeof B.addAttachment)throw new z("invalid-layer","addAttachment(): A valid layer is required.");y=yield B.addAttachment(D,y).then(E=>this._queryAttachment(E.objectId));C.add(y);return y});return function(y){return x.apply(this,arguments)}}();A.deleteAttachment=function(){var x=u._asyncToGenerator(function*(y){const {_attachmentLayer:B,attachmentInfos:C,graphic:D,abilities:F}=this;if(!y)throw new z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:y});
if(!F.operations.delete)throw new z("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!B||"function"!==typeof B.deleteAttachments)throw new z("invalid-layer","deleteAttachment(): A valid layer is required.");const E=yield B.deleteAttachments(D,[y.id]).then(()=>y);C.remove(E);return E});return function(y){return x.apply(this,arguments)}}();A.updateAttachment=function(){var x=u._asyncToGenerator(function*(y,B=this.activeAttachmentInfo){const {_attachmentLayer:C,attachmentInfos:D,
graphic:F,abilities:E}=this;if(!y)throw new z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:y});if(!B)throw new z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:B});if(!E.operations.update)throw new z("invalid-abilities","updateAttachment(): Update abilities are required.");const G=D.findIndex(O=>O===B);if(!C||"function"!==typeof C.updateAttachment)throw new z("invalid-layer","updateAttachment(): A valid layer is required.");
y=yield C.updateAttachment(F,B.id,y).then(O=>this._queryAttachment(O.objectId));D.splice(G,1,y);return y});return function(y){return x.apply(this,arguments)}}();A._queryAttachment=function(){var x=u._asyncToGenerator(function*(y){if(!y)throw new z("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:B}=this,C=this._getFeatureId();y=new l({objectIds:[C],attachmentsWhere:`AttachmentId=${y}`,returnMetadata:!0});return B.queryAttachments(y).then(D=>D[C][0])});return function(y){return x.apply(this,
arguments)}}();A._getFeatureId=function(){const {_attachmentLayer:x,graphic:y}=this;if(!x||!y)return null;const {objectIdField:B}=x,{attributes:C}=y;return C&&C[B]};A._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};A._setAttachmentLayer=function(){var {graphic:x}=this;this._attachmentLayer=(x=m.getSourceLayer(x))?"scene"===x.type&&p.isSome(x.associatedLayer)?x.associatedLayer:x:null};u._createClass(w,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return w}(r);n.__decorate([e.property()],r.prototype,"abilities",void 0);n.__decorate([c.cast("abilities")],r.prototype,"castAbilities",null);n.__decorate([e.property()],r.prototype,"activeAttachmentInfo",void 0);n.__decorate([e.property({readOnly:!0,type:q})],r.prototype,"attachmentInfos",void 0);n.__decorate([e.property({type:h})],
r.prototype,"graphic",void 0);n.__decorate([e.property()],r.prototype,"mode",void 0);n.__decorate([e.property({readOnly:!0})],r.prototype,"state",null);n.__decorate([e.property({readOnly:!0})],r.prototype,"supportsResizeAttachments",null);return r=n.__decorate([d.subclass("esri.widgets.Attachments.AttachmentsViewModel")],r)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){function c(){c=n._asyncToGenerator(function*(S,ea){return"function"===typeof S?S.call(null,ea):S});return c.apply(this,arguments)}function d(S){return S?V.test(S):!1}function f(S,ea){if(!d(ea)||!S)return null;const ma=ea.replace(V,"").toLowerCase();let sa;S.some(ja=>ja.name.toLowerCase()===ma?(sa=ja,!0):!1);return sa}function l(S,ea){return(ea=m(ea,S))?ea.name:S}function m(S,ea){return S&&"function"===typeof S.getField?S.getField(ea):null}function k({formattedAttributes:S,
template:ea,fieldInfoMap:ma}){return`${z.replace(z.replace(ea,sa=>{{const ja=ma.get(sa.toLowerCase());sa=`{${ja&&ja.fieldName||sa}}`}return sa}),S).replace(R,"")}`.trim()}function q(S,ea,ma=!1){const sa=ea[S];"string"===typeof sa&&(ma=(ma?encodeURIComponent(sa):sa).replace(U,"%27"),ea[S]=ma)}function t(S,ea=!1){const ma={...S};Object.keys(ma).forEach(sa=>q(sa,ma,ea));return ma}function w(S,ea){return S.replace(X,(ma,sa,ja)=>(ma=m(ea,ja))?`{${ma.name}}`:sa)}function A(S,ea,ma){return(S=w(S,ma))?S.replace(fa,
(sa,ja,wa)=>{ja=`${ja||wa}`.trim();return z.replace(sa,t(ea,ja&&"{"!==ja[0]))}):S}function x(S,ea){var ma=ea.fieldName,sa=y(ea.fieldInfos,ma),ja=null==sa?void 0:sa.clone();sa=ea.preventPlacesFormatting;ea=ea.layer;var wa=m(ea,ma);if(ja&&"date"===(null==wa?void 0:wa.type)){wa=ja.format||new b;wa.dateFormat=wa.dateFormat||"short-date-short-time";var Ja;if(!(Ja=!(null!=ea&&ea.layer)&&"feature"===(null==ea?void 0:ea.type)&&ea.datesInUnknownTimezone)){if(Ja=!(null==ea||!ea.layer))Ja=ea.layer,Ja="map-image"===
(null==Ja?void 0:Ja.type);Ja=Ja&&ea.layer.datesInUnknownTimezone}wa.dateTimeFormatOptions=Ja?{timeZone:"UTC"}:null;ja.format=wa}ja=ja&&ja.format;if("string"===typeof S&&e.isRasterPixelValueField(ma)&&ja)return ja.formatRasterPixelValue(S);"string"!==typeof S||!ja||null!=ja.dateFormat||null==ja.places&&null==ja.digitSeparator||(ma=Number(S),isNaN(ma)||(S=ma));return"string"===typeof S||null==S||null==ja?D(S):sa?g.formatNumber(S,{...g.convertNumberFormatToIntlOptions(ja),minimumFractionDigits:0,maximumFractionDigits:20}):
ja.format(S)}function y(S,ea){if(S&&S.length&&ea){var ma=ea.toLowerCase(),sa=void 0;S.some(ja=>ja.fieldName&&ja.fieldName.toLowerCase()===ma?(sa=ja,!0):!1);return sa}}function B({fieldName:S,graphic:ea,layer:ma}){if(P(S)||!ma||"function"!==typeof ma.getFeatureType)return null;const {typeIdField:sa}=ma;return sa&&S===sa?(S=ma.getFeatureType(ea))?S.name:null:null}function C({fieldName:S,value:ea,graphic:ma,layer:sa}){return P(S)||!sa||"function"!==typeof sa.getFieldDomain?null:(S=sa.getFieldDomain(S,
{feature:ma}))&&"coded-value"===S.type?S.getName(ea):null}function D(S){return"string"===typeof S?S.replace(Q,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):S}function F(S){const {value:ea,fieldName:ma,fieldInfos:sa,fieldInfoMap:ja,layer:wa,graphic:Ja}=S;return null==ea?"":(S=C({fieldName:ma,value:ea,graphic:Ja,layer:wa}))||(S=B({fieldName:ma,graphic:Ja,layer:wa}))?S:ja.get(ma.toLowerCase())?x(ea,{fieldInfos:sa||Array.from(ja.values()),fieldName:ma,layer:wa}):(S=wa&&wa.fieldsIndex)&&S.isDateField(ma)?
p.formatDate(ea,ca):D(ea)}function E(S,ea){return G.apply(this,arguments)}function G(){G=n._asyncToGenerator(function*(S,ea){var ma,sa;const {layer:ja,graphic:wa,outFields:Ja,objectIds:va,returnGeometry:ra,spatialReference:Ba}=S;S=va[0];if("number"!==typeof S&&"string"!==typeof S)return J.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:ja,graphic:wa,objectId:S,requiredFields:Ja}),null;if(null==(ma=ja.capabilities)||null==(sa=ma.operations)||!sa.supportsQuery)return J.warn("The specified layer cannot be queried. The following fields will not be available.",
{layer:ja,graphic:wa,requiredFields:Ja,returnGeometry:ra}),null;ma=ja.createQuery();ma.objectIds=va;ma.outFields=null!=Ja&&Ja.length?Ja:[ja.objectIdField];ma.returnGeometry=!!ra;ma.returnZ=!!ra;ma.returnM=!!ra;ma.outSpatialReference=Ba;return(yield ja.queryFeatures(ma,ea)).features[0]});return G.apply(this,arguments)}function O(S){return H.apply(this,arguments)}function H(){H=n._asyncToGenerator(function*(S){var ea;if(null==(ea=S.expressionInfos)||!ea.length)return!1;ea=yield a.loadArcade();({arcadeUtils:{hasGeometryFunctions:ea}}=
ea);return ea(S)});return H.apply(this,arguments)}function K(){K=n._asyncToGenerator(function*({graphic:S,popupTemplate:ea,layer:ma,spatialReference:sa},ja){if(ma&&ea&&("function"===typeof ma.load&&(yield ma.load(ja)),S.attributes)){var wa=S.attributes[ma.objectIdField];if(null!=wa){wa=[wa];var Ja=yield ea.getRequiredFields(ma.fieldsIndex),va=e.featureHasFields(Ja,S);Ja=va?[]:Ja;ea=ea.returnGeometry||(yield O(ea));if(!va||ea)if(ma=yield E({layer:ma,graphic:S,outFields:Ja,objectIds:wa,returnGeometry:ea,
spatialReference:sa},ja))ma.geometry&&(S.geometry=ma.geometry),ma.attributes&&(S.attributes={...S.attributes,...ma.attributes})}}});return K.apply(this,arguments)}function P(S=""){return S?S.includes("relationships/"):!1}function L({attributes:S,graphic:ea,relatedInfo:ma,fieldInfos:sa,fieldInfoMap:ja,layer:wa}){S&&ea&&ma&&Object.keys(ea.attributes).forEach(Ja=>{var va=(va={layerId:ma.relation.id.toString(),fieldName:Ja},`${"relationships/"}${va.layerId}/${va.fieldName}`);S[va]=F({fieldName:va,fieldInfos:sa,
fieldInfoMap:ja,layer:wa,value:ea.attributes[Ja],graphic:ea})})}function M({attributes:S,relatedInfo:ea,fieldInfoMap:ma,fieldInfos:sa,layer:ja}){S&&ea&&(ea.relatedFeatures&&ea.relatedFeatures&&ea.relatedFeatures.forEach(wa=>L({attributes:S,graphic:wa,relatedInfo:ea,fieldInfoMap:ma,fieldInfos:sa,layer:ja})),ea.relatedStatsFeatures&&ea.relatedStatsFeatures&&ea.relatedStatsFeatures.forEach(wa=>L({attributes:S,graphic:wa,relatedInfo:ea,fieldInfoMap:ma,fieldInfos:sa,layer:ja})))}const J=r.getLogger("esri.widgets.Feature.support.featureUtils"),
R=/href=(""|'')/gi,X=/(\{([^\{\r\n]+)\})/g,U=/'/g,V=/^\s*expression\//i,Q=/(\n)/gi,Y=/[\u00A0-\u9999<>&]/gim,fa=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,da=/^(?:mailto:|tel:)/,ca=p.convertDateFormatToIntlOptions("short-date-short-time"),la=S=>{if(!S)return!1;S=S.toUpperCase();return S.includes("CURRENT_TIMESTAMP")||S.includes("CURRENT_DATE")||S.includes("CURRENT_TIME")},ha=({layer:S,method:ea,query:ma,definitionExpression:sa})=>{var ja,wa;null!=(ja=S.capabilities)&&null!=(wa=ja.query)&&wa.supportsCacheHint&&
"attachments"!==ea&&(S=v.isSome(ma.where)&&ma.where,ea=v.isSome(ma.geometry)&&ma.geometry,la(sa)||la(S)||"extent"===(null==ea?void 0:ea.type)||"tile"===ma.resultType||(ma.cacheHint=!0))};u.applyTextFormattingHTML=D;u.createfieldInfoMap=function(S,ea){const ma=new Map;S&&S.forEach(sa=>{const ja=l(sa.fieldName,ea);sa.fieldName=ja;ma.set(ja.toLowerCase(),sa)});return ma};u.fixTokens=w;u.formatAttributes=function({fieldInfos:S,attributes:ea,layer:ma,graphic:sa,fieldInfoMap:ja,relatedInfos:wa}){const Ja=
{};null==wa?void 0:wa.forEach(va=>M({attributes:Ja,relatedInfo:va,fieldInfoMap:ja,fieldInfos:S,layer:ma}));Object.keys(ea).forEach(va=>{Ja[va]=F({fieldName:va,fieldInfos:S,fieldInfoMap:ja,layer:ma,value:ea[va],graphic:sa})});return Ja};u.formatEditInfo=function(S,ea){const {creatorField:ma,creationDateField:sa,editorField:ja,editDateField:wa}=S;if(ea){S=ea[wa];if("number"===typeof S)return ea=ea[ja],{type:"edit",date:p.formatDate(S,ca),user:ea};S=ea[sa];return"number"===typeof S?(ea=ea[ma],{type:"create",
date:p.formatDate(S,ca),user:ea}):null}};u.formatValueToFieldInfo=x;u.getAllFieldInfos=function(S){const ea=[];if(!S)return ea;const {fieldInfos:ma,content:sa}=S;ma&&ea.push(...ma);if(!sa||!Array.isArray(sa))return ea;sa.forEach(ja=>{"fields"===ja.type&&(ja=ja&&ja.fieldInfos)&&ea.push(...ja)});return ea};u.getFieldInfo=y;u.getFieldInfoLabel=function(S,ea){return(ea=f(ea,null==S?void 0:S.fieldName))?ea.title||null:S?S.label||S.fieldName:null};u.getFixedFieldName=l;u.getFixedFieldNames=function(S,ea){return S&&
S.map(ma=>l(ma,ea))};u.getSourceLayer=function(S){if(!v.isNone(S))return S.get("sourceLayer")||S.get("layer")};u.graphicCallback=function(S,ea){return c.apply(this,arguments)};u.htmlEntities=function(S){return S.replace(Y,ea=>`&#${ea.charCodeAt(0)};`)};u.isExpressionField=d;u.isRelatedField=P;u.preLayerQueryCallback=({query:S,layer:ea,method:ma})=>{ha({layer:ea,method:ma,query:S,definitionExpression:`${ea.definitionExpression} ${ea.serviceDefinitionExpression}`})};u.preRequestCallback=({queryPayload:S,
layer:ea,method:ma})=>{ha({layer:ea,method:ma,query:S,definitionExpression:`${ea.definitionExpression} ${ea.serviceDefinitionExpression}`})};u.queryUpdatedFeature=function(S,ea){return K.apply(this,arguments)};u.shouldOpenInNewTab=function(S=""){if(S)return!da.test(S.trim().toLowerCase())};u.substituteAttributes=k;u.substituteFieldsInLinksAndAttributes=function({attributes:S,globalAttributes:ea,layer:ma,text:sa,expressionAttributes:ja,fieldInfoMap:wa}){return sa?k({formattedAttributes:ea,template:A(sa,
{...ea,...ja,...S},ma),fieldInfoMap:wa}):""};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){r=function(f){function l(k,q){k=f.call(this,k,q)||this;k.creator=null;k.graphic=null;k.viewModel=null;k._addTargetToAnchors=t=>{Array.from(t.querySelectorAll("a")).forEach(w=>{a.shouldOpenInNewTab(w.href)&&!w.hasAttribute("target")&&w.setAttribute("target","_blank")})};return k}u._inheritsLoose(l,f);var m=l.prototype;m.renderLoading=function(){return d.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},d.tsx("div",{class:"esri-feature-content__loader"}))};
m.renderCreated=function(){var k;const q=null==(k=this.viewModel)?void 0:k.created;return q?q instanceof HTMLElement?d.tsx("div",{key:q,bind:q,afterCreate:this._attachToNode}):c.isWidget(q)?d.tsx("div",{key:q},!q.destroyed&&q.render()):d.tsx("div",{key:q,innerHTML:q,afterCreate:this._addTargetToAnchors}):null};m.render=function(){var k;const q=null==(k=this.viewModel)?void 0:k.state;return d.tsx("div",{class:"esri-feature-content"},"loading"===q?this.renderLoading():this.renderCreated())};m._attachToNode=
function(k){k.appendChild(this)};return l}(e);n.__decorate([h.aliasOf("viewModel.creator")],r.prototype,"creator",void 0);n.__decorate([h.aliasOf("viewModel.graphic")],r.prototype,"graphic",void 0);n.__decorate([p.property({type:b})],r.prototype,"viewModel",void 0);return r=n.__decorate([g.subclass("esri.widgets.Feature.FeatureContent")],r)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){r=function(d){function f(m){var k=d.call(this,m)||this;k._loadingPromise=null;k.created=null;k.creator=null;k.destroyer=null;k.graphic=null;k.handles.add(z.watch(()=>k.creator,q=>{k._destroyContent();k._createContent(q)},z.initial));return k}u._inheritsLoose(f,d);var l=f.prototype;l.destroy=function(){this._destroyContent()};l._destroyContent=function(){const {created:m,graphic:k,destroyer:q}=this;m&&(c.graphicCallback(q,{graphic:k}).catch(()=>null),this._set("created",
null))};l._createContent=function(){var m=u._asyncToGenerator(function*(k){var {graphic:q}=this;this._loadingPromise=k=c.graphicCallback(k,{graphic:q}).catch(()=>null);this.notifyChange("state");q=yield k;k===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",q))});return function(k){return m.apply(this,arguments)}}();u._createClass(f,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return f}(v.HandleOwnerMixin(r));n.__decorate([p.property({readOnly:!0})],
r.prototype,"created",void 0);n.__decorate([p.property()],r.prototype,"creator",void 0);n.__decorate([p.property()],r.prototype,"destroyer",void 0);n.__decorate([p.property({type:h})],r.prototype,"graphic",void 0);n.__decorate([p.property({readOnly:!0})],r.prototype,"state",null);return r=n.__decorate([a.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],r)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m){v=function(k){function q(w,A){w=k.call(this,w,A)||this;w._featureElementInfo=null;w.attributes=null;w.description=null;w.expressionInfos=null;w.fieldInfos=null;w.title=null;w.viewModel=new a;w.messages=null;w.messagesURIUtils=null;return w}u._inheritsLoose(q,k);var t=q.prototype;t.initialize=function(){this._featureElementInfo=new c;this.own(h.watch(()=>{var w,A;return[null==(w=this.viewModel)?void 0:w.description,null==(A=this.viewModel)?void 0:A.title]},
()=>this._setupFeatureElementInfo(),h.initial))};t.destroy=function(){this._featureElementInfo.destroy()};t.renderFieldInfo=function(w,A){var {attributes:x}=this.viewModel;const y=w.fieldName,B=w.label||y;x=x?null==x[y]?"":x[y]:"";w=!(!w.format||!w.format.dateFormat);x="number"!==typeof x||w?d.autoLink(this.messagesURIUtils,x):this._forceLTR(x);w={["esri-feature-fields__field-data--date"]:w};return m.tsx("tr",{key:`fields-element-info-row-${y}-${A}`},m.tsx("th",{key:`fields-element-info-row-header-${y}-${A}`,
class:"esri-feature-fields__field-header",innerHTML:B}),m.tsx("td",{key:`fields-element-info-row-data-${y}-${A}`,class:this.classes("esri-feature-fields__field-data",w),innerHTML:x}))};t.renderFields=function(){const {formattedFieldInfos:w}=this.viewModel;return null!=w&&w.length?m.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},m.tsx("tbody",null,w.map((A,x)=>this.renderFieldInfo(A,x)))):null};t.render=function(){var w;return m.tsx("div",{class:"esri-feature-fields"},
null==(w=this._featureElementInfo)?void 0:w.render(),this.renderFields())};t._setupFeatureElementInfo=function(){const {description:w,title:A}=this;this._featureElementInfo.set({description:w,title:A})};t._forceLTR=function(w){return`&lrm;${w}`};return q}(b);n.__decorate([r.aliasOf("viewModel.attributes")],v.prototype,"attributes",void 0);n.__decorate([r.aliasOf("viewModel.description")],v.prototype,"description",void 0);n.__decorate([r.aliasOf("viewModel.expressionInfos")],v.prototype,"expressionInfos",
void 0);n.__decorate([r.aliasOf("viewModel.fieldInfos")],v.prototype,"fieldInfos",void 0);n.__decorate([r.aliasOf("viewModel.title")],v.prototype,"title",void 0);n.__decorate([g.property({type:a})],v.prototype,"viewModel",void 0);n.__decorate([g.property(),l.messageBundle("esri/widgets/Feature/t9n/Feature")],v.prototype,"messages",void 0);n.__decorate([g.property(),l.messageBundle("esri/widgets/support/t9n/uriUtils")],v.prototype,"messagesURIUtils",void 0);return v=n.__decorate([e.subclass("esri.widgets.Feature.FeatureFields")],
v)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),function(u,n,h,r,v,z,p,g,e,b,a){h=function(c){function d(f){f=
c.call(this,f)||this;f.attributes=null;f.expressionInfos=null;f.description=null;f.fieldInfos=null;f.title=null;return f}u._inheritsLoose(d,c);u._createClass(d,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:f,fieldInfos:l}=this,m=[];null==l?void 0:l.forEach(k=>{if(!k.hasOwnProperty("visible")||k.visible)k=k.clone(),k.label=a.getFieldInfoLabel(k,f),m.push(k)});return m}}]);return d}(h);n.__decorate([r.property()],h.prototype,"attributes",void 0);n.__decorate([r.property({type:[e]})],
h.prototype,"expressionInfos",void 0);n.__decorate([r.property()],h.prototype,"description",void 0);n.__decorate([r.property({type:[b]})],h.prototype,"fieldInfos",void 0);n.__decorate([r.property({readOnly:!0})],h.prototype,"formattedFieldInfos",null);n.__decorate([r.property()],h.prototype,"title",void 0);return h=n.__decorate([g.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],h)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){r=function(c){function d(l,m){l=c.call(this,l,m)||this;l.description=null;l.headingLevel=2;l.title=null;return l}u._inheritsLoose(d,c);var f=d.prototype;f.render=function(){return a.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};f.renderTitle=function(){const {title:l}=this;return l?a.tsx(e.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},l):null};f.renderDescription=function(){const {description:l}=
this;return l?a.tsx("div",{key:"description",class:"esri-feature-element-info__description"},l):null};return d}(g);n.__decorate([h.property()],r.prototype,"description",void 0);n.__decorate([h.property()],r.prototype,"headingLevel",void 0);n.__decorate([h.property()],r.prototype,"title",void 0);return r=n.__decorate([p.subclass("esri.widgets.Feature.support.FeatureElementInfo")],r)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],
function(u,n,h,r){const v={heading:"esri-widget__heading"};u.CSS=v;u.Heading=function(z,p){const g=n.clamp(Math.ceil(z.level),1,6),e=`h${g}`;delete z.level;return r.tsx(e,{...z,class:h.classes(v.heading,z.class),role:"heading","aria-level":String(g)},p)};u.incrementHeadingLevel=function(z,p=1){return n.clamp(Math.ceil(z+p),1,6)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w){z=function(A){function x(B,C){var D=A.call(this,B,C)||this;D._refreshTimer=null;D._refreshIntervalInfo=null;D._featureElementInfo=null;D.attributes=null;D.activeMediaInfoIndex=null;D.description=null;D.fieldInfoMap=null;D.layer=null;D.mediaInfos=null;D.popupTemplate=null;D.relatedInfos=null;D.title=null;D.viewModel=new d;D.messages=null;D._getChartDependencies=function(){var F=u._asyncToGenerator(function*(E){const G=yield m.loadChartsModule(),{destroyed:O,
viewModel:H}=u._assertThisInitialized(D);if(!O&&H&&E){var {activeMediaInfo:K}=H,P=yield D._getRendererColors(G);D._renderChart({chartDiv:E,mediaInfo:K,chartsModule:G,colorMap:P})}});return function(E){return F.apply(this,arguments)}}();return D}u._inheritsLoose(x,A);var y=x.prototype;y.initialize=function(){this._featureElementInfo=new f;this.own([r.watch(()=>{var B,C;return[null==(B=this.viewModel)?void 0:B.activeMediaInfo,null==(C=this.viewModel)?void 0:C.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),
r.initial),r.watch(()=>{var B,C;return[null==(B=this.viewModel)?void 0:B.description,null==(C=this.viewModel)?void 0:C.title]},()=>this._setupFeatureElementInfo(),r.initial)])};y.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};y.render=function(){var B;return t.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(B=this._featureElementInfo)?void 0:B.render(),this.renderMedia())};y.renderMedia=function(){const {formattedMediaInfoCount:B}=
this.viewModel;return B?t.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};y.renderImageMediaInfo=function(B){var {_refreshIntervalInfo:C}=this;const {activeMediaInfoIndex:D,formattedMediaInfoCount:F}=this.viewModel,{value:E,refreshInterval:G,altText:O,title:H,type:K}=B,{sourceURL:P,linkURL:L}=E;B=l.shouldOpenInNewTab(L)?"_blank":"_self";const M="_blank"===B?"noreferrer":
"";C=G?C:null;C=t.tsx("img",{alt:O||H,key:`media-${K}-${D}-${F}-${C?C.timestamp:0}`,src:C?C.sourceURL:P});return(B=L?t.tsx("a",{title:H,href:L,rel:M,target:B},C):null)?B:C};y.renderChartMediaInfo=function(B){const {activeMediaInfoIndex:C,formattedMediaInfoCount:D}=this.viewModel;return t.tsx("div",{key:`media-${B.type}-${C}-${D}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};y.renderMediaInfoType=function(){const {activeMediaInfo:B}=this.viewModel;return B?
"image"===B.type?this.renderImageMediaInfo(B):B.type.includes("chart")?this.renderChartMediaInfo(B):null:null};y.renderMediaInfo=function(){var {activeMediaInfo:B}=this.viewModel;if(!B)return null;const C=B.title?t.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:B.title}):null;B=B.caption?t.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:B.caption}):null;return t.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},
t.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),C,B)};y.renderMediaPageButton=function(B){if(2>this.viewModel.formattedMediaInfoCount)return null;const C=(B="previous"===B)?this.messages.previous:this.messages.next,D=B?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),F=B?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),E=B?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return t.tsx("button",{type:"button",key:B?"media-previous":"media-next",title:C,"aria-label":C,tabIndex:0,class:D,bind:this,onclick:B?this._previous:this._next},t.tsx("span",
{"aria-hidden":"true",class:F}),t.tsx("span",{"aria-hidden":"true",class:E}))};y._setupFeatureElementInfo=function(){const {description:B,title:C}=this;this._featureElementInfo.set({description:B,title:C})};y._next=function(){this.viewModel.next()};y._previous=function(){this.viewModel.previous()};y._getRendererColors=function(){var B=u._asyncToGenerator(function*(C){var D;const {am4core:F}=C;C=null==(D=this.viewModel)?void 0:D.layer;const E=new Map;if(!C)return E;const G=yield a.getColorsFromRenderer(C.renderer);
G.delete(null);if(!Array.from(G.values()).every(O=>1===(null==O?void 0:O.length)))return E;E.set("default-line-value",F.color({r:50,g:50,b:50,a:1}));Array.from(G.keys()).forEach(O=>{O&&E.set(O,F.color(G.get(O)[0].toCss(!0)))});return E});return function(C){return B.apply(this,arguments)}}();y._handleMediaKeyup=function(B){const C=h.eventKey(B);"ArrowLeft"===C&&(B.stopPropagation(),this.viewModel.previous());"ArrowRight"===C&&(B.stopPropagation(),this.viewModel.next())};y._renderChart=function(B){const {abilities:C}=
this.viewModel,{chartsModule:D,chartDiv:F,mediaInfo:E,colorMap:G}=B,{value:O,type:H}=E,{am4core:K}=D,P=m.getColorSet(K);w.isDarkTheme()&&K.useTheme(D.am4themes_dark);const L=window.matchMedia("(prefers-reduced-motion: reduce)");C.chartAnimation&&!L.matches?K.useTheme(D.am4themes_animated):K.unuseTheme(D.am4themes_animated);K.useTheme(function(M){M instanceof K.ColorSet&&P&&(M.list=P)});B="pie-chart"===H?this._createPieChart(B):this._createXYChart(B);F.setAttribute("aria-label",E.altText||E.title);
B.data=O.series.map(M=>({["tooltip"]:M.tooltip,["value"]:M.value,["color"]:G.get(M.fieldName)})).filter(M=>"pie-chart"===H?0<M.value:!0)};y._customizeChartTooltip=function(B,C){B.label.wrap=!0;B.label.maxWidth=200;B.autoTextColor=!1;B.getFillFromObject=!1;B.label.fill=C.color("#ffffff");B.background.fill=C.color({r:0,g:0,b:0,a:.7})};y._createPieChart=function(B){const {chartDiv:C,chartsModule:D}=B,{am4core:F,am4charts:E}=D;B=F.create(C,E.PieChart);B.rtl=k.isRTL(this.container);const G=B.series.push(new E.PieSeries);
G.labels.template.disabled=!0;G.ticks.template.disabled=!0;G.dataFields.value="value";G.dataFields.category="tooltip";this._customizeChartTooltip(G.tooltip,F);G.slices.template.tooltipText=B.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";G.slices.template.propertyFields.fill="color";G.slices.template.propertyFields.stroke="color";return B};y._getMinSeriesValue=function(B){let C=0;B.forEach(D=>C=Math.min(D.value,C));return C};y._createColumnChart=
function(B,C){const {chartsModule:D,mediaInfo:F}=C;({value:C}=F);const {am4core:E,am4charts:G}=D,O=B.xAxes.push(new G.CategoryAxis);O.dataFields.category="tooltip";O.renderer.labels.template.disabled=!0;this._customizeChartTooltip(O.tooltip,E);O.tooltip.events.on("sizechanged",()=>{O.tooltip.dy=-O.tooltip.contentHeight});var H=B.yAxes.push(new G.ValueAxis);const K=H.renderer.labels.template;H.renderer.minLabelPosition=.05;H.renderer.maxLabelPosition=.95;H.min=this._getMinSeriesValue(C.series);this._customizeChartTooltip(H.tooltip,
E);K.wrap=!0;H=B.series.push(new G.ColumnSeries);H.dataFields.valueY="value";H.dataFields.categoryX="tooltip";H.columns.template.propertyFields.fill="color";H.columns.template.propertyFields.stroke="color";B.cursor=new G.XYCursor;15<C.series.length&&(B.scrollbarX=new E.Scrollbar)};y._createBarChart=function(B,C){const {chartsModule:D,mediaInfo:F}=C;({value:C}=F);const {am4core:E,am4charts:G}=D,O=B.yAxes.push(new G.CategoryAxis);O.dataFields.category="tooltip";O.renderer.inversed=!0;O.renderer.labels.template.disabled=
!0;this._customizeChartTooltip(O.tooltip,E);O.tooltip.events.on("sizechanged",()=>{O.tooltip.dx=O.tooltip.contentWidth});var H=B.xAxes.push(new G.ValueAxis);const K=H.renderer.labels.template;H.renderer.minLabelPosition=.05;H.renderer.maxLabelPosition=.95;H.min=this._getMinSeriesValue(C.series);this._customizeChartTooltip(H.tooltip,E);K.wrap=!0;H=B.series.push(new G.ColumnSeries);H.dataFields.valueX="value";H.dataFields.categoryY="tooltip";H.columns.template.propertyFields.fill="color";H.columns.template.propertyFields.stroke=
"color";B.cursor=new G.XYCursor;15<C.series.length&&(B.scrollbarY=new E.Scrollbar)};y._createLineChart=function(B,C){const {chartsModule:D,mediaInfo:F,colorMap:E}=C;({value:C}=F);const {am4core:G,am4charts:O}=D,H=B.xAxes.push(new O.CategoryAxis);H.dataFields.category="tooltip";H.renderer.labels.template.disabled=!0;this._customizeChartTooltip(H.tooltip,G);H.tooltip.events.on("sizechanged",()=>{H.tooltip.dy=-H.tooltip.contentHeight});var K=B.yAxes.push(new O.ValueAxis),P=K.renderer.labels.template;
K.renderer.minLabelPosition=.05;K.renderer.maxLabelPosition=.95;K.min=this._getMinSeriesValue(C.series);this._customizeChartTooltip(K.tooltip,G);P.wrap=!0;K=B.series.push(new O.LineSeries);K.dataFields.categoryX="tooltip";K.dataFields.valueY="value";K.strokeWidth=1;if(P=E.get("default-line-value"))K.stroke=P;K=K.bullets.push(new O.CircleBullet);K.propertyFields.fill="color";K.propertyFields.stroke="color";B.cursor=new O.XYCursor;15<C.series.length&&(B.scrollbarX=new G.Scrollbar)};y._createXYChart=
function(B){const {chartDiv:C,chartsModule:D,mediaInfo:F}=B,{type:E}=F,{am4core:G,am4charts:O}=D,H=G.create(C,O.XYChart);H.rtl=k.isRTL(this.container);"column-chart"===E&&this._createColumnChart(H,B);"bar-chart"===E&&this._createBarChart(H,B);"line-chart"===E&&this._createLineChart(H,B);return H};y._clearMediaRefreshTimer=function(){const {_refreshTimer:B}=this;B&&(clearTimeout(B),this._refreshTimer=null)};y._updateMediaInfoTimestamp=function(B){const C=Date.now();this._refreshIntervalInfo={timestamp:C,
sourceURL:this._getImageSource(B,C)};this.scheduleRender()};y._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:B}=this.viewModel;B&&"image"===B.type&&B.refreshInterval&&this._setRefreshTimeout(B)};y._setRefreshTimeout=function(B){const {refreshInterval:C,value:D}=B;C&&(B=6E4*C,this._updateMediaInfoTimestamp(D.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(D.sourceURL)},B))};y._getImageSource=function(B,C){const D=B.includes("?")?
"\x26":"?",[F,E=""]=B.split("#");return`${F}${D}timestamp=${C}${E?"#":""}${E}`};return x}(c);n.__decorate([v.aliasOf("viewModel.attributes")],z.prototype,"attributes",void 0);n.__decorate([v.aliasOf("viewModel.activeMediaInfoIndex")],z.prototype,"activeMediaInfoIndex",void 0);n.__decorate([v.aliasOf("viewModel.description")],z.prototype,"description",void 0);n.__decorate([v.aliasOf("viewModel.fieldInfoMap")],z.prototype,"fieldInfoMap",void 0);n.__decorate([v.aliasOf("viewModel.layer")],z.prototype,
"layer",void 0);n.__decorate([v.aliasOf("viewModel.mediaInfos")],z.prototype,"mediaInfos",void 0);n.__decorate([v.aliasOf("viewModel.popupTemplate")],z.prototype,"popupTemplate",void 0);n.__decorate([v.aliasOf("viewModel.relatedInfos")],z.prototype,"relatedInfos",void 0);n.__decorate([v.aliasOf("viewModel.title")],z.prototype,"title",void 0);n.__decorate([e.property({type:d})],z.prototype,"viewModel",void 0);n.__decorate([e.property(),q.messageBundle("esri/widgets/Feature/t9n/Feature")],z.prototype,
"messages",void 0);return z=n.__decorate([b.subclass("esri.widgets.Feature.FeatureMedia")],z)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(u,n,h,r,v,z,p,g,e,b,a){function c(A,x,y){v.getOrCreateMapValue(A,
x,()=>[]).push(...y)}function d(){d=n._asyncToGenerator(function*(A){const x=new Map;if("visualVariables"in A&&A.visualVariables){var y=A.visualVariables.filter(D=>"color"===D.type);for(const D of y){y=D.field||D.valueExpression;const F=(yield b.getRampStops(D)).map(E=>E.color);c(x,y,F)}}if("heatmap"===A.type){var B=a.getHeatmapRampStops(A).map(D=>D.color);c(x,A.field,B)}else if("pie-chart"===A.type){for(const D of A.attributes)c(x,D.field,[D.color]);c(x,null,[null==A?void 0:null==(B=A.othersCategory)?
void 0:B.color,e.getColorFromSymbol(A.backgroundFillSymbol,null)])}else if("dot-density"===A.type){for(const D of A.attributes)c(x,D.field,[D.color]);c(x,null,[A.backgroundColor])}else if("unique-value"===A.type){var C;if("predominance"===(null==(C=A.authoringInfo)?void 0:C.type))for(const D of A.uniqueValueInfos)c(x,D.value.toString(),[e.getColorFromSymbol(D.symbol,null)]);else{B=A.uniqueValueInfos.map(O=>e.getColorFromSymbol(O.symbol,null));const {field:D,field2:F,field3:E,valueExpression:G}=A;
(D||G)&&c(x,D||G,B);F&&c(x,F,B);E&&c(x,E,B)}}else"class-breaks"===A.type?(B=A.classBreakInfos.map(D=>e.getColorFromSymbol(D.symbol,null)),c(x,A.field||A.valueExpression,B)):"simple"===A.type&&c(x,null,[e.getColorFromSymbol(A.symbol,null)]);"defaultSymbol"in A&&A.defaultSymbol&&c(x,null,[e.getColorFromSymbol(A.defaultSymbol,null)]);x.forEach((D,F)=>{D=h.unique(D.filter(Boolean),(E,G)=>JSON.stringify(E)===JSON.stringify(G));x.set(F,D)});return x});return d.apply(this,arguments)}function f(A,x,y){let B=
"";0===x?B=q.lt+" ":x===y&&(B=q.gt+" ");return B+A}function l(A){let x=A.minValue,y=A.maxValue;const B=A.isFirstBreak?"":q.gt+" ";A="percent-of-total"===A.normalizationType?q.pct:"";x=null==x?"":p.format(x);y=null==y?"":p.format(y);return B+x+A+" "+q.ld+" "+y+A}function m(A,x){return"normalizationField"in A&&A.normalizationField?{type:"normalized-field",field:A.field,normalizationField:A.normalizationField}:"field"in A&&A.field?{type:"field",field:A.field}:"valueExpression"in A&&A.valueExpression?
{type:"expression",expression:A.valueExpression,title:A.valueExpressionTitle,returnType:x}:null}const k=r.getLogger("esri.renderers.support.utils"),q={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},t={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},w={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",
year:"year"};r=z.convertDateFormatToIntlOptions("short-date");u.calculateDateFormatInterval=function(A){A=A.map(D=>new Date(D));const x=A.length;let y=Infinity,B=null;for(let D=0;D<x-1;D++){const F=A[D];let E=Infinity,G=null;for(let O=D+1;O<x;O++){var C=A[O];C=F.getFullYear()!==C.getFullYear()&&"year"||F.getMonth()!==C.getMonth()&&"month"||F.getDate()!==C.getDate()&&"day"||F.getHours()!==C.getHours()&&"hour"||F.getMinutes()!==C.getMinutes()&&"minute"||F.getSeconds()!==C.getSeconds()&&"second"||"millisecond";
const H=t[C];H<E&&(E=H,G=C)}E<y&&(y=E,B=G)}return B};u.createClassBreakLabel=l;u.createColorStops=function(A){const {values:x,colors:y,labelIndexes:B,isDate:C,dateFormatOptions:D}=A;return x.map((F,E)=>{let G=null;if(!B||B.includes(E)){let O;(O=C?z.formatDate(F,D):p.format(F))&&(G=f(O,E,x.length-1))}return new g({value:F,color:y[E],label:G})})};u.createUniqueValueLabel=function(A){const {value:x,domain:y,fieldInfo:B,dateFormatInterval:C}=A;A=String(x);const D=y&&"codedValues"in y&&y.codedValues?y.getName(x):
null;D?A=D:"number"===typeof x&&(A=B&&"date"===B.type?z.formatDate(x,C&&z.convertDateFormatToIntlOptions(w[C])):p.format(x));return A};u.getAttribute=m;u.getAttributes=function(A,x){const y=[];if("class-breaks"===A.type||"heatmap"===A.type)y.push(m(A,"number"));else if("unique-value"===A.type){var B=A.authoringInfo;if(B&&"relationship"===B.type){if(B.field1&&B.field2){var C=B.field2.field;const D=B.field2.normalizationField;y.push(m({field:B.field1.field,normalizationField:B.field1.normalizationField}));
y.push(m({field:C,normalizationField:D}))}}else C=A.uniqueValueInfos[0],B=null,C&&C.value&&(C=typeof A.uniqueValueInfos[0].value,"string"===C||"number"===C)&&(B=C),y.push(m(A,B)),[A.field2,A.field3].forEach(D=>D&&y.push({type:"field",field:D}))}else"attributes"in A&&A.attributes.forEach(D=>y.push(m(D,"number")));(A=x?x(A):"visualVariables"in A?A.visualVariables:null)&&A.forEach(D=>y.push(m(D,"number")));return h.unique(y.filter(Boolean),(D,F)=>"field"===D.type&&"field"===F.type?D.field===F.field:
"normalized-field"===D.type&&"normalized-field"===F.type?D.field===F.field&&D.normalizationField===F.normalizationField:"expression"===D.type&&"expression"===F.type?D.expression===F.expression:!1)};u.getColorsFromRenderer=function(A){return d.apply(this,arguments)};u.setLabelsForClassBreaks=function(A){const x=A.classBreakInfos,y=A.normalizationType;let B=[];if(x&&x.length)if("standard-deviation"===A.classificationMethod)k.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");
else if(A.round){B.push(x[0].minValue);for(const C of x)B.push(C.maxValue);B=p.round(B);x.forEach((C,D)=>{C.label=l({minValue:0===D?B[0]:B[D],maxValue:B[D+1],isFirstBreak:0===D,normalizationType:y})})}else x.forEach((C,D)=>{C.label=l({minValue:C.minValue,maxValue:C.maxValue,isFirstBreak:0===D,normalizationType:y})})};u.timelineDateFormatOptions=r;u.updateClassBreak=function(A){if("standard-deviation"===A.classificationMethod)k.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");
else{var x=A.classBreaks,y=A.change,B=y.index;y=y.value;var C=x.length,D=-1,F=-1;0===B?D=B:B===C?F=B-1:(F=B-1,D=B);A=A.normalizationType;B=null;-1<D&&D<C&&(B=x[D],B.minValue=y,B.label=l({minValue:B.minValue,maxValue:B.maxValue,isFirstBreak:0===D,normalizationType:A}));-1<F&&F<C&&(B=x[F],B.maxValue=y,B.label=l({minValue:B.minValue,maxValue:B.maxValue,isFirstBreak:0===F,normalizationType:A}))}};u.updateColorStops=function(A){const {stops:x,changes:y,isDate:B,dateFormatOptions:C}=A,D=x.map(E=>E.value);
A=[];for(const E of y)A.push(E.index),D[E.index]=E.value;const F=p.round(D,{indexes:A});x.forEach((E,G)=>{E.value=D[G];if(null!=E.label){let O,H=null;(O=B?z.formatDate(F[G],C):p.format(F[G]))&&(H=f(O,G,x.length-1));E.label=H}})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(u,n,h){function r(a,c){return a-c}function v(a,c){let d;d=Number(a.toFixed(c));
d<a?a=d+1/10**c:(a=d,d-=1/10**c);d=Number(d.toFixed(c));a=Number(a.toFixed(c));return[d,a]}function z(a,c,d,f,l){a=g(a,c,d,f);c=null==a.next||a.next<=l;return(null==a.previous||a.previous<=l)&&c||a.previous+a.next<=2*l}function p(a){a=String(a);var c=a.match(e);if(c&&c[1])return{integer:c[1].split("").length,fractional:c[3]?c[3].split("").length:0};if(a.toLowerCase().includes("e")&&(c=a.split("e"),a=c[0],c=c[1],a&&c)){a=Number(a);c=Number(c);const d=0<c;d||(c=Math.abs(c));a=p(a);d?(a.integer+=c,a.fractional=
c>a.fractional?0:a.fractional-c):(a.fractional+=c,a.integer=c>a.integer?1:a.integer-c);return a}return{integer:0,fractional:0}}function g(a,c,d,f){const l={previous:null,next:null};if(null!=d){const m=a-d;l.previous=Math.floor(Math.abs(100*(c-d-m)/m))}null!=f&&(a=f-a,l.next=Math.floor(Math.abs(100*(f-c-a)/a)));return l}const e=/^-?(\d+)(\.(\d+))?$/i,b={maximumFractionDigits:20};u.format=function(a){return h.formatNumber(a,b)};u.numDigits=p;u.percentChange=g;u.round=function(a,c={}){a=a.slice(0);const {tolerance:d=
2,strictBounds:f=!1,indexes:l=a.map((k,q)=>q)}=c;l.sort(r);for(c=0;c<l.length;c++){const k=l[c],q=a[k],t=0===k?null:a[k-1],w=k===a.length-1?null:a[k+1],A=p(q).fractional;if(A){let x=0,y=!1;for(var m=void 0;x<=A&&!y;)m=v(q,x),m=f&&0===c?m[1]:m[0],y=z(q,m,t,w,d),x++;y&&(a[k]=m)}}return a};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){function f(H){H=H.symbolLayers;if(!H)return null;let K=null;H.forEach(P=>{if("object"!==P.type||null==P.resource.href)K="water"===P.type?g.unwrap(P.color):g.isSome(P.material)?g.unwrap(P.material.color):null});return K?new r(K):null}function l(H,K){if(null==K)return H;H=H.toRgba();H[3]*=K;return new r(H)}function m(H,K,P){if(H=H.symbolLayers){var L=M=>{M=g.isSome(M)?M:null;K=K||M||null!=P&&O;return l(K,P)};H.forEach(M=>{if("object"!==M.type||null==M.resource.href||
K)if("water"===M.type)M.color=L(M.color);else{var J=g.isSome(M.material)?M.material.color:null;J=L(J);g.isNone(M.material)?M.material=new d.Symbol3DMaterial({color:J}):M.material.color=J;null!=P&&"outline"in M&&g.isSome(M.outline)&&g.isSome(M.outline.color)&&(M.outline.color=l(M.outline.color,P))}})}}function k(H,K){return q.apply(this,arguments)}function q(){q=h._asyncToGenerator(function*(H,K){(H=H.symbolLayers)&&(yield z.forEach(H,function(){var P=h._asyncToGenerator(function*(L){return t(L,K)});
return function(L){return P.apply(this,arguments)}}()))});return q.apply(this,arguments)}function t(H,K){return w.apply(this,arguments)}function w(){w=h._asyncToGenerator(function*(H,K){switch(H.type){case "extrude":H.size="number"===typeof K[2]?K[2]:0;break;case "icon":case "line":case "text":K=A(K);g.isSome(K)&&(H.size=K);break;case "path":{const P=B(K,b.ONES,[H.width,void 0,H.height]);H.width=F(K[0],H.width,1,P);H.height=F(K[2],H.height,1,P)}break;case "object":yield x(H,K)}});return w.apply(this,
arguments)}function A(H){for(const K of H)if("number"===typeof K)return K;return null}function x(H,K){return y.apply(this,arguments)}function y(){y=h._asyncToGenerator(function*(H,K){const {resourceSize:P,symbolSize:L}=yield C(H),M=B(K,P,L);H.width=F(K[0],L[0],P[0],M);H.depth=F(K[1],L[1],P[1],M);H.height=F(K[2],L[2],P[2],M)});return y.apply(this,arguments)}function B(H,K,P){for(let L=0;3>L;L++){const M=H[L];switch(M){case "symbol-value":return null!=P[L]?P[L]/K[L]:1;case "proportional":break;default:if(M&&
K[L])return M/K[L]}}return 1}function C(H){return D.apply(this,arguments)}function D(){D=h._asyncToGenerator(function*(H){const K=yield(yield new Promise((X,U)=>u(["./symbolLayerUtils"],X,U))).computeObjectLayerResourceSize(H,10),{width:P,height:L,depth:M}=H;H=[P,M,L];let J=1;for(var R=0;3>R;R++)if(null!=H[R]){J=H[R]/K[R];break}for(R=0;3>R;R++)null==H[R]&&(H[R]=K[R]*J);return{resourceSize:K,symbolSize:H}});return D.apply(this,arguments)}function F(H,K,P,L){switch(H){case "proportional":return P*L;
case "symbol-value":return null!=K?K:P;default:return H}}function E(){E=h._asyncToGenerator(function*(H,K){if(H&&K){if(v.isSymbol3D(H))return k(H,K);if(v.isSymbol2D(H)&&(K=A(K),!g.isNone(K)))switch(H.type){case "simple-marker":H.size=K;break;case "picture-marker":{const P=H.width/H.height;1<P?(H.width=K,H.height=K*P):(H.width=K*P,H.height=K);break}case "simple-line":H.width=K;break;case "text":H.font.size=K}}});return E.apply(this,arguments)}const G=/\/resource\/(.*?)\.svg$/,O=new r("white");n.applyColorToSymbol=
function(H,K,P){if(H&&(K||null!=P))if(K&&(K=new r(K)),v.isSymbol3D(H))m(H,K,P);else if(v.isSymbol2D(H)){if(K=K||H.color)H.color=l(K,P);null!=P&&"outline"in H&&H.outline&&H.outline.color&&(H.outline.color=l(H.outline.color,P))}};n.applyOpacityToColor=l;n.applyRotationToSymbol=function(H,K,P){H&&null!=K&&(v.isSymbol3D(H)?(H=H.symbolLayers)&&H.forEach(L=>{if(L&&"object"===L.type)switch(P){case "tilt":L.tilt=K;break;case "roll":L.roll=K;break;default:L.heading=K}}):!v.isSymbol2D(H)||"simple-marker"!==
H.type&&"picture-marker"!==H.type&&"text"!==H.type||(H.angle=K))};n.applySizesToSymbol=function(H,K){return E.apply(this,arguments)};n.getCSSFilterFromEffectList=function(H){if(!H)return null;H=H.effects.filter(K=>"bloom"!==K.type).map(K=>K.toJSON());return a.effectFunctionsFromJSON(H)};n.getColorFromSymbol=function(H,K){if(!H)return null;let P=null;v.isSymbol3D(H)?P=f(H):v.isSymbol2D(H)&&(P=H.color?new r(H.color):null);return P?l(P,K):null};n.getIconHref=function(H,K){K=K.resource.href;return!p("esri-canvas-svg-support")&&
H.styleOrigin&&G.test(K)?K.replace(G,"/resource/png/$1.png"):K};n.getSymbolOutlineSize=function(H){if(!H)return 0;if(v.isSymbol3D(H)){{const K=H.symbolLayers&&H.symbolLayers.length;K?(H=H.symbolLayers.getItemAt(K-1),H="outline"in H?g.get(H,"outline","size"):void 0):H=void 0}return g.isSome(H)?H:0}return(H=c.getStroke(H))&&e.px2pt(H.width)||0};n.isVolumetricSymbol=function(H){if(g.isNone(H)||!("symbolLayers"in H)||g.isNone(H.symbolLayers))return!1;switch(H.type){case "point-3d":return H.symbolLayers.some(K=>
"object"===K.type);case "line-3d":return H.symbolLayers.some(K=>"path"===K.type);case "polygon-3d":return H.symbolLayers.some(K=>"object"===K.type||"extrude"===K.type);default:return!1}};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(u,n,h,r,v,z,p){function g(d){if(!d)return null;
let f;switch(d.type){case "simple-fill":case "picture-fill":case "simple-marker":f=g(d.outline);break;case "simple-line":{const l=z.pt2px(d.width);"none"!==d.style&&0!==l&&(f={color:d.color,style:c(d.style),width:l,cap:d.cap,join:"miter"===d.join?z.pt2px(d.miterLimit):d.join});break}default:f=null}return f}const e={left:"start",center:"middle",right:"end",justify:"start"},b={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},a=new v(1E3),c=(()=>{const d={};return f=>
{if(d[f])return d[f];const l=f.replace(/-/g,"");return d[f]=l}})();h=new h([128,128,128]);u.defaultThematicColor=h;u.dekebabifyLineStyle=c;u.getFill=function(d){const f=d.style;let l=null;if(d)switch(d.type){case "simple-marker":"cross"!==f&&"x"!==f&&(l=d.color);break;case "simple-fill":"solid"===f?l=d.color:"none"!==f&&(l={type:"pattern",x:0,y:0,src:n.getAssetUrl(`esri/symbols/patterns/${f}.png`),width:5,height:5});break;case "picture-fill":l={type:"pattern",src:d.url,width:z.pt2px(d.width)*d.xscale,
height:z.pt2px(d.height)*d.yscale,x:z.pt2px(d.xoffset),y:z.pt2px(d.yoffset)};break;case "text":l=d.color;break;case "cim":l=p.getCIMSymbolColor(d)}return l};u.getPatternUrlWithColor=function(d,f){const l=d+"-"+f;return void 0!==a.get(l)?Promise.resolve(a.get(l)):r(d,{responseType:"image"}).then(m=>{m=m.data;const k=m.naturalWidth,q=m.naturalHeight,t=document.createElement("canvas");t.width=k;t.height=q;const w=t.getContext("2d");w.fillStyle=f;w.fillRect(0,0,k,q);w.globalCompositeOperation="destination-in";
w.drawImage(m,0,0);m=t.toDataURL();a.put(l,m);return m})};u.getSVGAlign=function(d){return d=(d=d.horizontalAlignment)&&e[d.toLowerCase()]||"middle"};u.getSVGBaseline=function(d){return(d=d.verticalAlignment)&&b[d.toLowerCase()]||"alphabetic"};u.getSVGBaselineShift=function(d){return"bottom"===d.verticalAlignment?"super":null};u.getStroke=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(u){return function(){function n(r,
v){this._storage=new u.MemCacheStorage;this._storage.maxSize=r;v&&this._storage.registerRemoveFunc("",v)}var h=n.prototype;h.put=function(r,v){this._storage.put(r,v,1,1)};h.pop=function(r){return this._storage.pop(r)};h.get=function(r){return this._storage.get(r)};h.clear=function(){this._storage.clearAll()};h.destroy=function(){this._storage.destroy()};return n}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(u,n,h){function r(c){c=h.toCIMSymbolJSON(c);
if("CIMTextSymbol"===c.type)return c.height;let d=0;if(c.symbolLayers)for(const f of c.symbolLayers)h.isCIMMarker(f)&&f.size>d?d=f.size:h.isCIMStroke(f)&&f.width>d?d=f.width:h.isCIMFill(f);return d}function v(c,d,f,l){if("CIMTextSymbol"===c.type)c.height*=d;else{if(f&&c.effects)for(const m of c.effects)g(m,d);if(c.symbolLayers)for(const m of c.symbolLayers)switch(m.type){case "CIMPictureMarker":case "CIMVectorMarker":z(m,d,l);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=l&&l.preserveOutlineWidth||
!m.width||(m.width*=d);break;case "CIMPictureFill":m.height&&(m.height*=d);m.offsetX&&(m.offsetX*=d);m.offsetY&&(m.offsetY*=d);break;case "CIMHatchFill":v(m.lineSymbol,d,!0,{...l,preserveOutlineWidth:!1}),m.offsetX&&(m.offsetX*=d),m.offsetY&&(m.offsetY*=d),m.separation&&(m.separation*=d)}}}function z(c,d,f){c.markerPlacement&&p(c.markerPlacement,d);c.offsetX&&(c.offsetX*=d);c.offsetY&&(c.offsetY*=d);c.anchorPoint&&"Absolute"===c.anchorPointUnits&&(c.anchorPoint={x:c.anchorPoint.x*d,y:c.anchorPoint.y*
d});c.size*=d;if("CIMVectorMarker"===c.type&&c.markerGraphics)for(const l of c.markerGraphics)c.scaleSymbolsProportionally||v(l.symbol,d,!0,f)}function p(c,d){h.isCIMMarkerStrokePlacement(c)&&c.offset&&(c.offset*=d);switch(c.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":c.customEndingOffset&&(c.customEndingOffset*=d);c.offsetAlongLine&&(c.offsetAlongLine*=d);if(c.placementTemplate&&c.placementTemplate.length){var f=c.placementTemplate.map(l=>l*d);c.placementTemplate=
f}break;case "CIMMarkerPlacementAlongLineVariableSize":c.maxRandomOffset&&(c.maxRandomOffset*=d);c.placementTemplate&&c.placementTemplate.length&&(f=c.placementTemplate.map(l=>l*d),c.placementTemplate=f);break;case "CIMMarkerPlacementOnLine":c.startPointOffset&&(c.startPointOffset*=d);break;case "CIMMarkerPlacementAtExtremities":c.offsetAlongLine&&(c.offsetAlongLine*=d);break;case "CIMMarkerPlacementAtRatioPositions":c.beginPosition&&(c.beginPosition*=d);c.endPosition&&(c.endPosition*=d);break;case "CIMMarkerPlacementPolygonCenter":c.offsetX&&
(c.offsetX*=d);c.offsetY&&(c.offsetY*=d);break;case "CIMMarkerPlacementInsidePolygon":c.offsetX&&(c.offsetX*=d),c.offsetY&&(c.offsetY*=d),c.stepX&&(c.stepX*=d),c.stepY&&(c.stepY*=d)}}function g(c,d){switch(c.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":c.width&&(c.width*=d);break;case "CIMGeometricEffectBuffer":c.size&&(c.size*=d);break;case "CIMGeometricEffectCut":c.beginCut&&(c.beginCut*=d);c.endCut&&(c.endCut*=d);c.middleCut&&(c.middleCut*=d);break;case "CIMGeometricEffectDashes":c.customEndingOffset&&
(c.customEndingOffset*=d);c.offsetAlongLine&&(c.offsetAlongLine*=d);if(c.dashTemplate&&c.dashTemplate.length){const f=c.dashTemplate.map(l=>l*d);c.dashTemplate=f}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":c.length&&(c.length*=d);break;case "CIMGeometricEffectMove":c.offsetX&&(c.offsetX*=d);c.offsetY&&(c.offsetY*=d);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":c.offset&&(c.offset*=d);break;case "CIMGeometricEffectRegularPolygon":c.radius&&
(c.radius*=d);break;case "CIMGeometricEffectTaperedPolygon":c.fromWidth&&(c.fromWidth*=d);c.length&&(c.length*=d);c.toWidth&&(c.toWidth*=d);break;case "CIMGeometricEffectWave":c.amplitude&&(c.amplitude*=d),c.period&&(c.period*=d)}}function e(c,d){let f;f="CIMTextSymbol"===c.type?c.symbol:c;c="CIMPolygonSymbol"===c.type;if(f.symbolLayers)for(const l of f.symbolLayers)if(!(l.colorLocked||c&&(h.isCIMStroke(l)||h.isCIMMarker(l)&&l.markerPlacement&&h.isCIMMarkerStrokePlacement(l.markerPlacement))))switch(l.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":l.tintColor&&
b(d,l.tintColor);break;case "CIMVectorMarker":l.markerGraphics.forEach(m=>{e(m.symbol,d)});break;case "CIMSolidStroke":case "CIMSolidFill":b(d,l.color);break;case "CIMHatchFill":e(l.lineSymbol,d)}}function b(c,d){for(const f of c)if(f.join(".")===d.join("."))return;c.push(d)}function a(c,d,f){var l="CIMTextSymbol"===c.type?c.symbol:c;c="CIMPolygonSymbol"===l.type?!0:!1;if(l.symbolLayers)for(const m of l.symbolLayers)if(!m.colorLocked){if(c)if(f){if({layersToColor:l}=f,(h.isCIMStroke(m)||h.isCIMMarker(m)&&
m.markerPlacement&&h.isCIMMarkerStrokePlacement(m.markerPlacement))&&"fill"===l||h.isCIMFill(m)&&"outline"===l)continue}else if(h.isCIMStroke(m)||h.isCIMMarker(m)&&m.markerPlacement&&h.isCIMMarkerStrokePlacement(m.markerPlacement))continue;l=d.toArray();switch(m.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":m.tintColor=l;break;case "CIMVectorMarker":m.markerGraphics.forEach(k=>{a(k.symbol,d,f)});break;case "CIMSolidStroke":case "CIMSolidFill":m.color=l;break;case "CIMHatchFill":a(m.lineSymbol,
d,f)}}}u.applyCIMSymbolColor=function(c,d,f){d instanceof n||(d=new n(d));(c=h.toCIMSymbolJSON(c))&&a(c,d,f)};u.applyCIMSymbolRotation=function(c,d,f=!1){c=h.toCIMSymbolJSON(c);f&&0!==d&&(d=360-d);if("CIMTextSymbol"===c.type)c.angle=d;else if("CIMPointSymbol"===c.type&&c.symbolLayers){f=d-(c.angle||0);for(const l of c.symbolLayers)if(h.isCIMMarker(l)){let m=l.rotation||0;m=l.rotateClockwise?m-f:m+f;l.rotation=m}c.angle=d}};u.getCIMSymbolColor=function(c){c=h.toCIMSymbolJSON(c);const d=[];e(c,d);return d.length?
new n(h.fromCIMColor(d[0])):null};u.getCIMSymbolRotation=function(c,d=!1){c=h.toCIMSymbolJSON(c);return"CIMTextSymbol"===c.type||"CIMPointSymbol"===c.type?d&&0!==c.angle?360-c.angle:c.angle||0:0};u.getCIMSymbolSize=r;u.scaleCIMMarker=z;u.scaleCIMSymbolTo=function(c,d,f){const l=h.toCIMSymbolJSON(c);c=r(c);if(0===c)if("CIMTextSymbol"===l.type)l.height=d;else{if(l.symbolLayers)for(const m of l.symbolLayers)switch(m.type){case "CIMPictureMarker":case "CIMVectorMarker":m.size=d;break;case "CIMPictureStroke":case "CIMSolidStroke":m.width=
d}}else v(l,d/c,!1,f)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(u,n){function h(r,v){"string"!==typeof r&&(r=String(r));switch(v){case "LowerCase":return r.toLowerCase();case "Allcaps":return r.toUpperCase();default:return r}}n._adjustTextCase=h;n.colorToArray=function(r){return[r.r,r.g,r.b,r.a]};n.createLabelOverrideFunction=function(r,v,z){const p=a=>{let c=a.length;for(;c--;)if(!" /-,\n".includes(a.charAt(c)))return!1;
return!0},g=[];var e=0;let b=-1;do b=v.indexOf("[",e),b>=e&&(b>e&&(e=v.substr(e,b-e),g.push([e,null,p(e)])),e=b+1,b=v.indexOf("]",e),b>=e&&(b>e&&(e=v.substr(e,b-e),(e=r[e])&&g.push([null,e,!1])),e=b+1));while(-1!==b);e<v.length-1&&(r=v.substr(e),g.push([r,null,p(r)]));return a=>{let c="",d=null;for(const f of g){const [l,m,k]=f;if(l)k?d=l:(d&&(c+=d,d=null),c+=l);else{const q=a.attributes[m];q&&(d&&(c+=d,d=null),c+=q)}}return h(c,z)}};n.evaluateValueOrFunction=function(r,v,z,p){return"function"===
typeof r?r(v,z,p):r};n.fromCIMColor=function(r){return r?{r:r[0],g:r[1],b:r[2],a:r[3]/255}:{r:0,g:0,b:0,a:0}};n.getValue=r=>isNaN(r)||!r?0:r;n.importGeometryEngine=function(){return new Promise((r,v)=>u(["../../geometry/geometryEngineJSON"],r,v))};n.isCIMFill=function(r){return"CIMGradientFill"===r.type||"CIMHatchFill"===r.type||"CIMPictureFill"===r.type||"CIMSolidFill"===r.type||"CIMWaterFill"===r.type};n.isCIMMarker=function(r){return"CIMVectorMarker"===r.type||"CIMPictureMarker"===r.type||"CIMBarChartMarker"===
r.type||"CIMCharacterMarker"===r.type||"CIMPieChartMarker"===r.type||"CIMStackedBarChartMarker"===r.type};n.isCIMMarkerStrokePlacement=function(r){return"CIMMarkerPlacementAlongLineRandomSize"===r.type||"CIMMarkerPlacementAlongLineSameSize"===r.type||"CIMMarkerPlacementAlongLineVariableSize"===r.type||"CIMMarkerPlacementAtExtremities"===r.type||"CIMMarkerPlacementAtMeasuredUnits"===r.type||"CIMMarkerPlacementAtRatioPositions"===r.type||"CIMMarkerPlacementOnLine"===r.type||"CIMMarkerPlacementOnVertices"===
r.type};n.isCIMStroke=function(r){return"CIMGradientStroke"===r.type||"CIMPictureStroke"===r.type||"CIMSolidStroke"===r.type};n.isGeometryEngineRequired=r=>{if(!r)return!1;for(const v of r)switch(v.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};n.resampleHermite=function(r,v,z,p,g,e,b=!0){const a=v/g;z/=e;const c=Math.ceil(a/2),d=Math.ceil(z/2);for(let m=0;m<e;m++)for(let k=0;k<g;k++){const q=4*(k+(b?e-m-1:m)*g);var f=0;let t=0,w=0,A=0,x=0,y=0,B=0;const C=
(m+.5)*z;for(let D=Math.floor(m*z);D<(m+1)*z;D++){var l=Math.abs(C-(D+.5))/d;const F=(k+.5)*a;l*=l;for(let E=Math.floor(k*a);E<(k+1)*a;E++){let G=Math.abs(F-(E+.5))/c;f=Math.sqrt(l+G*G);-1<=f&&1>=f&&(f=2*f*f*f-3*f*f+1,0<f&&(G=4*(E+D*v),B+=f*r[G+3],w+=f,255>r[G+3]&&(f=f*r[G+3]/250),A+=f*r[G],x+=f*r[G+1],y+=f*r[G+2],t+=f))}}p[q]=A/t;p[q+1]=x/t;p[q+2]=y/t;p[q+3]=B/w}};n.toCIMSymbolJSON=function(r){var v;return null==(v=r.data)?void 0:v.symbol};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(u,n,h,r,v){function z(d,f){const l=[],m=d.length-1;5===d.length?l.push(0,2,4):l.push(0,m);return d.map((k,q)=>l.includes(q)?v.createStopLabel(k,q,m,f):null)}function p(){p=h._asyncToGenerator(function*(d,f,l){let m=!1,k=[],q=[];if(d.stops){var t=d.stops;k=t.map(A=>A.value);(m=t.some(A=>!!A.label))&&(q=t.map(A=>A.label))}t=k[k.length-1];
if(null==k[0]&&null==t)return null;const w=m?null:z(k,l);return(yield Promise.all(k.map(function(){var A=h._asyncToGenerator(function*(x,y){const B="opacity"===d.type?yield g(x,d,f):(yield new Promise((C,D)=>u(["../../../renderers/visualVariables/support/visualVariableUtils"],C,D))).getColor(d,x);return{value:x,color:B,label:m?q[y]:w[y]}});return function(x,y){return A.apply(this,arguments)}}()))).reverse()});return p.apply(this,arguments)}function g(d,f){return e.apply(this,arguments)}function e(){e=
h._asyncToGenerator(function*(d,f,l=c){l=new r(l);d=(yield new Promise((m,k)=>u(["../../../renderers/visualVariables/support/visualVariableUtils"],m,k))).getOpacity(f,d);null!=d&&(l.a=d);return l});return e.apply(this,arguments)}function b(d,f){const {startIndex:l,endIndex:m,weight:k}=a(d,f);if(l===m)return f[l].color;d=r.blendColors(f[l].color,f[m].color,k);return new r(d)}function a(d,f){let l=0,m=f.length-1;f.some((k,q)=>{if(d<k.value)return m=q,!0;l=q;return!1});return{startIndex:l,endIndex:m,
weight:(d-f[l].value)/(f[m].value-f[l].value)}}const c=new r([64,64,64]);n.getColorFromPointCloudStops=b;n.getRampStops=function(d,f,l){return p.apply(this,arguments)};n.getRampStopsForPointCloud=function(d){let f=!1,l=[],m=[];l=d.map(t=>t.value);(f=d.some(t=>!!t.label))&&(m=d.map(t=>t.label));const k=l[l.length-1];if(null==l[0]&&null==k)return null;const q=f?null:z(l,!1);return l.map((t,w)=>{const A=b(t,d);return{value:t,color:A,label:f?m[w]:q[w]}}).reverse()};n.getStrectchRampStops=function(d,f){let l=
[];if(d&&"multipart"===d.type)d.colorRamps.reverse().forEach((m,k)=>{0===k?l.push({value:f.max,color:new r(m.toColor),label:"high"}):l.push({value:null,color:new r(m.toColor),label:""});k===d.colorRamps.length-1?l.push({value:f.min,color:new r(m.fromColor),label:"low"}):l.push({value:null,color:new r(m.fromColor),label:""})});else{let m,k;d&&"algorithmic"===d.type?(m=d.fromColor,k=d.toColor):(m=[0,0,0,1],k=[255,255,255,1]);l=[{value:f.max,color:new r(k),label:"high"},{value:f.min,color:new r(m),label:"low"}]}return l};
Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),function(u,n,h,r,v,z,p){function g(c){return e.apply(this,arguments)}function e(){e=h._asyncToGenerator(function*(c){if(!("visualVariables"in c&&c.visualVariables))return null;
c=c.visualVariables.find(l=>"color"===l.type);if(!c)return null;var d=null,f=null;if(c.stops){if(1===c.stops.length)return c.stops[0].color;d=c.stops[0].value;f=c.stops[c.stops.length-1].value}d+=(f-d)/2;({getColor:f}=yield new Promise((l,m)=>u(["../../../renderers/visualVariables/support/visualVariableUtils"],l,m)));return f(c,d)});return e.apply(this,arguments)}function b(){b=h._asyncToGenerator(function*(c,d){const f=c.trailCap,l=c.trailWidth||1;c=d||(yield g(c))||c.color;return new p({cap:f,color:c,
width:l})});return b.apply(this,arguments)}const a=v.convertDateFormatToIntlOptions("short-date");n.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];n.SPECIAL_CHARS_GREATER_THAN="\x3e";n.SPECIAL_CHARS_LESS_THAN="\x3c";n.createStopLabel=function(c,d,f,l){let m="";0===d?m="\x3c ":d===f&&(m="\x3e ");d=null;d=l?v.formatDate(c,a):z.format(c);return m+d};n.getMedianColor=g;n.getSymbolForFlowRenderer=function(c,d){return b.apply(this,arguments)};Object.defineProperties(n,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(u,n){u.getHeatmapRampStops=function(h){if(!h.colorStops)return[];const r=[...h.colorStops].filter(z=>{var p;return 0<(null==(p=z.color)?void 0:p.a)});let v=r.length-1;if(r&&r[0]){const z=r[v];z&&1!==z.ratio&&(r.push(new n({ratio:1,color:z.color})),v++)}return r.map((z,p)=>{let g="";if(0===p){var e;g=(null==
(e=h.legendOptions)?void 0:e.minLabel)||"low"}else if(p===v){var b;g=(null==(b=h.legendOptions)?void 0:b.maxLabel)||"high"}return{color:z.color,label:g,ratio:z.ratio}}).reverse()};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){const d={chartAnimation:!0};h=function(f){function l(k){k=f.call(this,k)||this;k.abilities={...d};k.activeMediaInfoIndex=0;k.attributes=null;k.description=null;k.fieldInfoMap=null;k.formattedAttributes=null;k.expressionAttributes=null;k.layer=null;k.mediaInfos=null;k.popupTemplate=null;k.relatedInfos=null;k.title=null;return k}u._inheritsLoose(l,f);var m=l.prototype;m.castAbilities=function(k){return{...d,...k}};m.setActiveMedia=function(k){this._setContentElementMedia(k)};
m.next=function(){this._pageContentElementMedia(1)};m.previous=function(){this._pageContentElementMedia(-1)};m._setContentElementMedia=function(k){const {formattedMediaInfoCount:q}=this;this.activeMediaInfoIndex=(k+q)%q};m._pageContentElementMedia=function(k){const {activeMediaInfoIndex:q}=this;this._setContentElementMedia(q+k)};m._formatMediaInfos=function(){const {attributes:k,mediaInfos:q,formattedAttributes:t,expressionAttributes:w,fieldInfoMap:A,layer:x}=this;return null==q?void 0:q.map(y=>{y=
null==y?void 0:y.clone();if(!y)return null;y.title=a.substituteFieldsInLinksAndAttributes({attributes:k,fieldInfoMap:A,globalAttributes:t,expressionAttributes:w,layer:x,text:y.title});y.caption=a.substituteFieldsInLinksAndAttributes({attributes:k,fieldInfoMap:A,globalAttributes:t,expressionAttributes:w,layer:x,text:y.caption});y.altText=a.substituteFieldsInLinksAndAttributes({attributes:k,fieldInfoMap:A,globalAttributes:t,expressionAttributes:w,layer:x,text:y.altText});if("image"===y.type){var {value:B}=
y;this._setImageValue({value:B,formattedAttributes:t,layer:x});return y.value.sourceURL?y:void 0}return"pie-chart"===y.type||"line-chart"===y.type||"column-chart"===y.type||"bar-chart"===y.type?({value:B}=y,this._setChartValue({value:B,chartType:y.type,attributes:k,formattedAttributes:t,layer:x}),y):null}).filter(Boolean)};m._setImageValue=function(k){const {fieldInfoMap:q}=this,{value:t,formattedAttributes:w,layer:A}=k,{linkURL:x,sourceURL:y}=t;y&&(k=a.fixTokens(y,A),t.sourceURL=a.substituteAttributes({formattedAttributes:w,
template:k,fieldInfoMap:q}));x&&(k=a.fixTokens(x,A),t.linkURL=a.substituteAttributes({formattedAttributes:w,template:k,fieldInfoMap:q}))};m._setChartValue=function(k){const {value:q,attributes:t,formattedAttributes:w,chartType:A,layer:x}=k,{popupTemplate:y,relatedInfos:B}=this,{fields:C,normalizeField:D}=q;q.fields=a.getFixedFieldNames(C,x);D&&(q.normalizeField=a.getFixedFieldName(D,x));if(C.some(E=>!!(null!=w[E]||a.isRelatedField(E)&&B.size))){var F=null==y?void 0:y.fieldInfos;C.forEach(E=>{a.isRelatedField(E)?
q.series=[...q.series,...this._getRelatedChartInfos({fieldInfos:F,fieldName:E,formattedAttributes:w,chartType:A,value:q})]:(E=this._getChartOption({value:q,attributes:t,chartType:A,formattedAttributes:w,fieldName:E,fieldInfos:F}),q.series.push(E))})}};m._getRelatedChartInfos=function(k){var q;const {fieldInfos:t,fieldName:w,formattedAttributes:A,chartType:x,value:y}=k,B=[];k=c.getRelatedFieldInfo(w);const {layerId:C,fieldName:D}=k;k=null==(q=this.relatedInfos)?void 0:q.get(C.toString());if(!k)return B;
const {relatedFeatures:F,relation:E}=k;if(!E||!F)return B;({cardinality:q}=E);F.forEach(G=>{const {attributes:O}=G;O&&Object.keys(O).forEach(H=>{H===D&&B.push(this._getChartOption({value:y,attributes:O,formattedAttributes:A,fieldName:w,chartType:x,relatedFieldName:H,fieldInfos:t}))})});return"one-to-many"===q||"many-to-many"===q?B:[B[0]]};m._getTooltip=function({label:k,value:q,chartType:t}){return"pie-chart"===t?`${k}`:`${k}: ${q}`};m._getChartOption=function(k){const {value:q,attributes:t,formattedAttributes:w,
fieldName:A,relatedFieldName:x,fieldInfos:y,chartType:B}=k,{layer:C,fieldInfoMap:D}=this,{normalizeField:F,tooltipField:E}=q;k=F?a.isRelatedField(F)?t[c.getRelatedFieldInfo(F).fieldName]:t[F]:null;var G=x&&void 0!==t[x]?t[x]:void 0!==t[A]?t[A]:w[A];k=new b({fieldName:A,value:void 0===G?null:G&&k?G/k:G});if(a.isRelatedField(A)){var O,H,K,P,L;G=D.get(A.toLowerCase());const J=D.get(E.toLowerCase());var M=null!=(O=null==G?void 0:G.fieldName)?O:A;O=null!=(H=null==J?void 0:J.fieldName)?H:E;H=null!=(K=null!=
(P=null!=(L=w[O])?L:null==G?void 0:G.label)?P:null==G?void 0:G.fieldName)?K:x;k.tooltip=this._getTooltip({label:H,value:w[M],chartType:B});return k}P=a.getFieldInfo(y,A);K=a.getFixedFieldName(A,C);P=E&&void 0!==w[E]?w[E]:a.getFieldInfoLabel(P||new e({fieldName:K}),null==(M=this.popupTemplate)?void 0:M.expressionInfos);k.tooltip=this._getTooltip({label:P,value:w[K],chartType:B});return k};u._createClass(l,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||
null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return l}(h);n.__decorate([r.property()],h.prototype,"abilities",void 0);n.__decorate([p.cast("abilities")],h.prototype,"castAbilities",null);n.__decorate([r.property()],h.prototype,"activeMediaInfoIndex",void 0);n.__decorate([r.property({readOnly:!0})],h.prototype,"activeMediaInfo",null);n.__decorate([r.property()],h.prototype,
"attributes",void 0);n.__decorate([r.property()],h.prototype,"description",void 0);n.__decorate([r.property()],h.prototype,"fieldInfoMap",void 0);n.__decorate([r.property()],h.prototype,"formattedAttributes",void 0);n.__decorate([r.property()],h.prototype,"expressionAttributes",void 0);n.__decorate([r.property({readOnly:!0})],h.prototype,"formattedMediaInfos",null);n.__decorate([r.property()],h.prototype,"layer",void 0);n.__decorate([r.property({readOnly:!0})],h.prototype,"formattedMediaInfoCount",
null);n.__decorate([r.property()],h.prototype,"mediaInfos",void 0);n.__decorate([r.property()],h.prototype,"popupTemplate",void 0);n.__decorate([r.property()],h.prototype,"relatedInfos",void 0);n.__decorate([r.property()],h.prototype,"title",void 0);return h=n.__decorate([g.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],h)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../kernel ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P){function L(da,ca){if(!ca.relationships)return null;let la=null;({relationships:ca}=ca);ca.some(ha=>ha.id===parseInt(da,10)?(la=ha,!0):!1);return la}function M({originRelationship:da,relationships:ca,layerId:la}){let ha;ca&&ca.some(S=>{`${S.relatedTableId}`===la&&S.id===da.id&&(ha=S);return!!ha});return ha}function J(da,ca){ca=ca.toLowerCase();for(const la in da)if(la.toLowerCase()===ca)return da[la];return null}function R(da,
ca,la,ha){const S=new O;S.outFields=["*"];S.relationshipId="number"===typeof ca.id?ca.id:parseInt(ca.id,10);S.objectIds=[da.attributes[la.objectIdField]];return la.queryRelatedFeatures(S,ha)}function X(da,ca,la){let ha=0;const S=[];for(;ha<ca.length;)S.push(`${da} IN (${ca.slice(ha,la+ha)})`),ha+=la;return S.join(" OR ")}function U(da,ca,la,ha){return V.apply(this,arguments)}function V(){V=n._asyncToGenerator(function*(da,ca,la,ha){var S=la.layerId.toString();const {layerInfo:ea,relation:ma,relatedFields:sa,
outStatistics:ja,url:wa,sourceSpatialReference:Ja}=ca;S=M({originRelationship:ma,relationships:ea.relationships,layerId:S});if(S.relationshipTableId&&S.keyFieldInRelationshipTable){la=(yield R(da,S,la,ha))[da.attributes[la.objectIdField]];if(!la)return null;const va=la.features.map(ra=>ra.attributes[ea.objectIdField]);if(0<(null==ja?void 0:ja.length)&&ea.supportsStatistics)return ca=new C,ca.where=X(ea.objectIdField,va,1E3),ca.outFields=sa,ca.outStatistics=ja,ca.sourceSpatialReference=Ja,ca={features:Promise.resolve(la),
statsFeatures:b.executeQueryJSON(wa,ca)},z.eachAlways(ca)}return(S=null==S?void 0:S.keyField)?(la=p.isNumericField(Q(ea.fields,S)),da=J(da.attributes,ma.keyField),S=la?`${S}=${da}`:`${S}='${da}'`,da=b.executeQueryJSON(wa,new C({where:S,outFields:ca.relatedFields,sourceSpatialReference:Ja}),ha),ca=ca.outStatistics&&0<ca.outStatistics.length&&ea.supportsStatistics?b.executeQueryJSON(wa,new C({where:S,outFields:ca.relatedFields,outStatistics:ca.outStatistics,sourceSpatialReference:Ja}),ha):null,ha={features:da},
ca&&(ha.statsFeatures=ca),z.eachAlways(ha)):null});return V.apply(this,arguments)}function Q(da,ca){if(null!=da){ca=ca.toLowerCase();for(const la of da)if(la&&la.name.toLowerCase()===ca)return la}return null}const Y=v.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),fa=new Map;u.createRelatedInfo=function(da,ca){if(da=L(da,ca))return{url:`${ca.url}/${da.relatedTableId}`,sourceSpatialReference:ca.spatialReference,relation:da,relatedFields:[],outStatistics:[]}};u.getDestinationRelation=
M;u.getRelatedFieldInfo=function(da){if(!P.isRelatedField(da))return null;const [ca,la]=da.split("/").slice(1);return{layerId:ca,fieldName:la}};u.queryLayerInfos=function({relatedInfos:da,layer:ca},la){const ha={};da.forEach((S,ea)=>{({relation:S}=S);if(!S)throw ea=new r("relation-required","A relation is required on a layer to retrieve related records."),Y.error(ea),ea;({relatedTableId:S}=S);if("number"!==typeof S)throw ea=new r("A related table ID is required on a layer to retrieve related records."),
Y.error(ea),ea;S=`${ca.url}/${S}`;const ma=fa.get(S),sa=ma?ma:h(S,{query:{f:"json"},signal:la&&la.signal});ma||fa.set(S,sa);ha[ea]=sa});return z.eachAlways(ha)};u.queryRelatedFeatures=function({graphic:da,relatedInfos:ca,layer:la},ha){const S={};ca.forEach((ea,ma)=>{ea.layerInfo&&(S[ma]=U(da,ea,la,ha))});return z.eachAlways(S)};u.setRelatedFeatures=function(da,ca){if(ca&&da){var {features:la,statsFeatures:ha}=da;da=la&&la.value;ca.relatedFeatures=da?da.features:[];da=ha&&ha.value;ca.relatedStatsFeatures=
da?da.features:[]}};u.updateRelatedInfo=function({relatedInfo:da,fieldName:ca,fieldInfo:la}){da.relatedFields.push(ca);la.statisticType&&(ca=new K({statisticType:la.statisticType,onStatisticField:ca,outStatisticFieldName:ca}),da.outStatistics.push(ca))};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"arcgis-components/wrappers/InfoBanner":function(){define(["../Component","../InfoBanner/index"],function(u,n){return function(h){function r(z){if(v[z])return v[z].exports;
var p=v[z]={i:z,l:!1,exports:{}};return h[z].call(p.exports,p,p.exports,r),p.l=!0,p.exports}var v={};return r.m=h,r.c=v,r.d=function(z,p,g){r.o(z,p)||Object.defineProperty(z,p,{enumerable:!0,get:g})},r.r=function(z){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"});Object.defineProperty(z,"__esModule",{value:!0})},r.t=function(z,p){if((1&p&&(z=r(z)),8&p)||4&p&&"object"==typeof z&&z&&z.__esModule)return z;var g=Object.create(null);if(r.r(g),
Object.defineProperty(g,"default",{enumerable:!0,value:z}),2&p&&"string"!=typeof z)for(var e in z)r.d(g,e,function(b){return z[b]}.bind(null,e));return g},r.n=function(z){var p=z&&z.__esModule?function(){return z.default}:function(){return z};return r.d(p,"a",p),p},r.o=function(z,p){return Object.prototype.hasOwnProperty.call(z,p)},r.p="",r(r.s=982)}({0:function(h,r,v){function z(f,l){function m(){this.constructor=f}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+
" is not a constructor or null");c(f,l);f.prototype=null===l?Object.create(l):(m.prototype=l.prototype,new m)}function p(f,l){var m={},k;for(k in f)Object.prototype.hasOwnProperty.call(f,k)&&0>l.indexOf(k)&&(m[k]=f[k]);if(null!=f&&"function"==typeof Object.getOwnPropertySymbols){var q=0;for(k=Object.getOwnPropertySymbols(f);q<k.length;q++)0>l.indexOf(k[q])&&Object.prototype.propertyIsEnumerable.call(f,k[q])&&(m[k[q]]=f[k[q]])}return m}function g(f,l,m,k){var q,t=arguments.length,w=3>t?l:null===k?
k=Object.getOwnPropertyDescriptor(l,m):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(f,l,m,k);else for(var A=f.length-1;0<=A;A--)(q=f[A])&&(w=(3>t?q(w):3<t?q(l,m,w):q(l,m))||w);return 3<t&&w&&Object.defineProperty(l,m,w),w}function e(f,l,m,k){return new (m||(m=Promise))(function(q,t){function w(y){try{x(k.next(y))}catch(B){t(B)}}function A(y){try{x(k.throw(y))}catch(B){t(B)}}function x(y){var B;y.done?q(y.value):(B=y.value,B instanceof m?B:new m(function(C){C(B)})).then(w,
A)}x((k=k.apply(f,l||[])).next())})}function b(f,l){function m(x){return function(y){return function(B){if(k)throw new TypeError("Generator is already executing.");for(;A;)try{if(k=1,q&&(t=2&B[0]?q.return:B[0]?q.throw||((t=q.return)&&t.call(q),0):q.next)&&!(t=t.call(q,B[1])).done)return t;switch(q=0,t&&(B=[2&B[0],t.value]),B[0]){case 0:case 1:t=B;break;case 4:return A.label++,{value:B[1],done:!1};case 5:A.label++;q=B[1];B=[0];continue;case 7:B=A.ops.pop();A.trys.pop();continue;default:if(!(t=A.trys,
(t=0<t.length&&t[t.length-1])||6!==B[0]&&2!==B[0])){A=0;continue}if(3===B[0]&&(!t||B[1]>t[0]&&B[1]<t[3]))A.label=B[1];else if(6===B[0]&&A.label<t[1])A.label=t[1],t=B;else if(t&&A.label<t[2])A.label=t[2],A.ops.push(B);else{t[2]&&A.ops.pop();A.trys.pop();continue}}B=l.call(f,A)}catch(C){B=[6,C],q=0}finally{k=t=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([x,y])}}var k,q,t,w,A={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return w={next:m(0),throw:m(1),
return:m(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function a(f,l){for(var m=0,k=l.length,q=f.length;m<k;m++,q++)f[q]=l[m];return f}v.d(r,"d",function(){return z});v.d(r,"a",function(){return d});v.d(r,"f",function(){return p});v.d(r,"c",function(){return g});v.d(r,"b",function(){return e});v.d(r,"e",function(){return b});v.d(r,"g",function(){return a});var c=function(f,l){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,k){m.__proto__=
k}||function(m,k){for(var q in k)Object.prototype.hasOwnProperty.call(k,q)&&(m[q]=k[q])})(f,l)},d=function(){return(d=Object.assign||function(f){for(var l,m=1,k=arguments.length;m<k;m++)for(var q in l=arguments[m])Object.prototype.hasOwnProperty.call(l,q)&&(f[q]=l[q]);return f}).apply(this,arguments)};Object.create;Object.create},16:function(h,r){h.exports=u},170:function(h,r){r=function(){return this}();try{r=r||(new Function("return this"))()}catch(v){"object"==typeof window&&(r=window)}h.exports=
r},189:function(h,r){function v(){throw Error("setTimeout has not been defined");}function z(){throw Error("clearTimeout has not been defined");}function p(q){if(c===setTimeout)return setTimeout(q,0);if((c===v||!c)&&setTimeout)return c=setTimeout,setTimeout(q,0);try{return c(q,0)}catch(t){try{return c.call(null,q,0)}catch(w){return c.call(this,q,0)}}}function g(){m&&f&&(m=!1,f.length?l=f.concat(l):k=-1,l.length&&e())}function e(){if(!m){var q=p(g);m=!0;for(var t=l.length;t;){f=l;for(l=[];++k<t;)f&&
f[k].run();k=-1;t=l.length}f=null;m=!1;(function(w){if(d===clearTimeout)return clearTimeout(w);if((d===z||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(w);try{d(w)}catch(A){try{return d.call(null,w)}catch(x){return d.call(this,w)}}})(q)}}function b(q,t){this.fun=q;this.array=t}function a(){}h=h.exports={};try{var c="function"==typeof setTimeout?setTimeout:v}catch(q){c=v}try{var d="function"==typeof clearTimeout?clearTimeout:z}catch(q){d=z}!0;var f,l=[],m=!1,k=-1;h.nextTick=function(q){var t=
Array(arguments.length-1);if(1<arguments.length)for(var w=1;w<arguments.length;w++)t[w-1]=arguments[w];l.push(new b(q,t));1!==l.length||m||p(e)};b.prototype.run=function(){this.fun.apply(null,this.array)};h.title="browser";h.browser=!0;h.env={};h.argv=[];h.version="";h.versions={};h.on=a;h.addListener=a;h.once=a;h.off=a;h.removeListener=a;h.removeAllListeners=a;h.emit=a;h.prependListener=a;h.prependOnceListener=a;h.listeners=function(q){return[]};h.binding=function(q){throw Error("process.binding is not supported");
};h.cwd=function(){return"/"};h.chdir=function(q){throw Error("process.chdir is not supported");};h.umask=function(){return 0}},28:function(h,r,v){(function(z,p){h.exports=function(){function g(){var Q=setTimeout;return function(){return Q(e,1)}}function e(){for(var Q=0;Q<y;Q+=2)(0,H[Q])(H[Q+1]),H[Q]=void 0,H[Q+1]=void 0;y=0}function b(Q,Y){var fa=this,da=new this.constructor(c);void 0===da[R]&&A(da);var ca=fa._state;if(ca){var la=arguments[ca-1];D(function(){return w(ca,da,la,fa._result)})}else q(fa,
da,Q,Y);return da}function a(Q){if(Q&&"object"==typeof Q&&Q.constructor===this)return Q;var Y=new this(c);return f(Y,Q),Y}function c(){}function d(Q,Y,fa){Y.constructor===Q.constructor&&fa===b&&Y.constructor.resolve===a?function(da,ca){1===ca._state?m(da,ca._result):2===ca._state?k(da,ca._result):q(ca,void 0,function(la){return f(da,la)},function(la){return k(da,la)})}(Q,Y):void 0===fa?m(Q,Y):"function"==typeof fa?function(da,ca,la){D(function(ha){var S=!1,ea=function(ma,sa,ja,wa){try{ma.call(sa,
ja,wa)}catch(Ja){return Ja}}(la,ca,function(ma){S||(S=!0,ca!==ma?f(ha,ma):m(ha,ma))},function(ma){S||(S=!0,k(ha,ma))},ha._label);!S&&ea&&(S=!0,k(ha,ea))},da)}(Q,Y,fa):m(Q,Y)}function f(Q,Y){if(Q===Y)k(Q,new TypeError("You cannot resolve a promise with itself"));else if(da=typeof(fa=Y),null===fa||"object"!==da&&"function"!==da)m(Q,Y);else{fa=void 0;try{fa=Y.then}catch(ca){return void k(Q,ca)}d(Q,Y,fa)}var fa,da}function l(Q){Q._onerror&&Q._onerror(Q._result);t(Q)}function m(Q,Y){void 0===Q._state&&
(Q._result=Y,Q._state=1,0!==Q._subscribers.length&&D(t,Q))}function k(Q,Y){void 0===Q._state&&(Q._state=2,Q._result=Y,D(l,Q))}function q(Q,Y,fa,da){var ca=Q._subscribers,la=ca.length;Q._onerror=null;ca[la]=Y;ca[la+1]=fa;ca[la+2]=da;0===la&&Q._state&&D(t,Q)}function t(Q){var Y=Q._subscribers,fa=Q._state;if(0!==Y.length){for(var da=void 0,ca=void 0,la=Q._result,ha=0;ha<Y.length;ha+=3)da=Y[ha],ca=Y[ha+fa],da?w(fa,da,ca,la):ca(la);Q._subscribers.length=0}}function w(Q,Y,fa,da){var ca="function"==typeof fa,
la=void 0,ha=void 0,S=!0;if(ca){try{la=fa(da)}catch(ea){S=!1,ha=ea}if(Y===la)return void k(Y,new TypeError("A promises callback cannot return that same promise."))}else la=da;void 0!==Y._state||(ca&&S?f(Y,la):!1===S?k(Y,ha):1===Q?m(Y,la):2===Q&&k(Y,la))}function A(Q){Q[R]=X++;Q._state=void 0;Q._result=void 0;Q._subscribers=[]}var x=Array.isArray?Array.isArray:function(Q){return"[object Array]"===Object.prototype.toString.call(Q)},y=0,B=void 0,C=void 0,D=function(Q,Y){H[y]=Q;H[y+1]=Y;2===(y+=2)&&(C?
C(e):J())},F="undefined"!=typeof window?window:void 0,E=F||{};E=E.MutationObserver||E.WebKitMutationObserver;var G="undefined"==typeof self&&void 0!==z&&"[object process]"==={}.toString.call(z),O="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,H=Array(1E3),K,P,L,M,J=void 0;G?J=function(){return z.nextTick(e)}:E?(P=0,L=new E(e),M=document.createTextNode(""),L.observe(M,{characterData:!0}),J=function(){M.data=P=++P%2}):O?((K=new MessageChannel).port1.onmessage=
e,J=function(){return K.port2.postMessage(0)}):J=void 0===F?function(){try{var Q=Function("return this")().require("vertx");return void 0!==(B=Q.runOnLoop||Q.runOnContext)?function(){B(e)}:g()}catch(Y){return g()}}():g();var R=Math.random().toString(36).substring(2),X=0,U=function(){function Q(Y,fa){this._instanceConstructor=Y;this.promise=new Y(c);this.promise[R]||A(this.promise);x(fa)?(this.length=fa.length,this._remaining=fa.length,this._result=Array(this.length),0===this.length?m(this.promise,
this._result):(this.length=this.length||0,this._enumerate(fa),0===this._remaining&&m(this.promise,this._result))):k(this.promise,Error("Array Methods must be provided an Array"))}return Q.prototype._enumerate=function(Y){for(var fa=0;void 0===this._state&&fa<Y.length;fa++)this._eachEntry(Y[fa],fa)},Q.prototype._eachEntry=function(Y,fa){var da=this._instanceConstructor,ca=da.resolve;if(ca===a){var la=ca=void 0,ha=!1;try{ca=Y.then}catch(S){ha=!0,la=S}ca===b&&void 0!==Y._state?this._settledAt(Y._state,
fa,Y._result):"function"!=typeof ca?(this._remaining--,this._result[fa]=Y):da===V?(da=new da(c),ha?k(da,la):d(da,Y,ca),this._willSettleAt(da,fa)):this._willSettleAt(new da(function(S){return S(Y)}),fa)}else this._willSettleAt(ca(Y),fa)},Q.prototype._settledAt=function(Y,fa,da){var ca=this.promise;void 0===ca._state&&(this._remaining--,2===Y?k(ca,da):this._result[fa]=da);0===this._remaining&&m(ca,this._result)},Q.prototype._willSettleAt=function(Y,fa){var da=this;q(Y,void 0,function(ca){return da._settledAt(1,
fa,ca)},function(ca){return da._settledAt(2,fa,ca)})},Q}(),V=function(){function Q(Y){this[R]=X++;this._result=this._state=void 0;this._subscribers=[];if(c!==Y){if("function"!=typeof Y)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof Q)(function(fa,da){try{da(function(ca){f(fa,ca)},function(ca){k(fa,ca)})}catch(ca){k(fa,ca)}})(this,Y);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}return Q.prototype.catch=function(Y){return this.then(null,Y)},Q.prototype.finally=function(Y){var fa=this.constructor;return"function"==typeof Y?this.then(function(da){return fa.resolve(Y()).then(function(){return da})},function(da){return fa.resolve(Y()).then(function(){throw da;})}):this.then(Y,Y)},Q}();return V.prototype.then=b,V.all=function(Q){return(new U(this,Q)).promise},V.race=function(Q){var Y=this;return x(Q)?new Y(function(fa,da){for(var ca=Q.length,la=0;la<ca;la++)Y.resolve(Q[la]).then(fa,
da)}):new Y(function(fa,da){return da(new TypeError("You must pass an array to race."))})},V.resolve=a,V.reject=function(Q){var Y=new this(c);return k(Y,Q),Y},V._setScheduler=function(Q){C=Q},V._setAsap=function(Q){D=Q},V._asap=D,V.polyfill=function(){var Q=void 0;if(void 0!==p)Q=p;else if("undefined"!=typeof self)Q=self;else try{Q=Function("return this")()}catch(da){throw Error("polyfill failed because global object is unavailable in this environment");}var Y=Q.Promise;if(Y){var fa=null;try{fa=Object.prototype.toString.call(Y.resolve())}catch(da){}if("[object Promise]"===
fa&&!Y.cast)return}Q.Promise=V},V.Promise=V,V}()}).call(this,v(189),v(170))},30:function(h,r,v){function z(H){return H.reduce(function(K,P){return P&&P.relatedItems?K.concat(P.relatedItems.map(function(L){return L})):K},[])}function p(H,K,P){return H(K,{query:Object(b.a)({f:"json"},P)}).then(function(L){return L.data})}function g(H,K){void 0===K&&(K=100);for(var P=[],L=0;L<Math.ceil(H.length/K);L++)P.push(H.slice(L*K,(L+1)*K));return P.filter(function(M){return 0<M.length})}function e(H){var K=H.itemIds,
P=H.request,L=H.groupIds,M=H.portal.restUrl+"/content/itemsgroups";return new a.Promise(function(J,R){P(M,{method:"get",query:{f:"json",items:K,groups:L}}).then(function(X){J(X.data)},R)})}v.d(r,"u",function(){return c});v.d(r,"n",function(){return d});v.d(r,"h",function(){return f});v.d(r,"e",function(){return l});v.d(r,"f",function(){return m});v.d(r,"j",function(){return k});v.d(r,"o",function(){return q});v.d(r,"l",function(){return t});v.d(r,"k",function(){return w});v.d(r,"m",function(){return A});
v.d(r,"c",function(){return x});v.d(r,"d",function(){return y});v.d(r,"r",function(){return B});v.d(r,"s",function(){return C});v.d(r,"t",function(){return D});v.d(r,"g",function(){return F});v.d(r,"p",function(){return E});v.d(r,"q",function(){return G});v.d(r,"v",function(){return p});v.d(r,"a",function(){return g});v.d(r,"i",function(){return e});v.d(r,"b",function(){return O});var b=v(0),a=v(28),c=function(H){return function(K,P){return H({url:K,content:P.query},{usePost:"post"===P.method}).then(function(L){return{data:L}})}},
d=function(H,K,P){return p(H,K.restUrl+"/portals/self",{culture:P,default:!0})},f=function(H,K,P){return p(H,K.restUrl+"/content/items/"+P+"/data")},l=function(H,K,P,L){return p(H,K.restUrl+"/community/groups",Object(b.a)({q:P},L))},m=function(H,K,P){return p(H,K.restUrl+"/community/groups/"+P+"/categorySchema")},k=function(H,K,P){return p(H,K.restUrl+"/portals/"+(P||K.id)+"/categorySchema")},q=function(H,K){return p(H,K.restUrl+"/portals/"+K.id+"/servers")},t=function(H,K,P,L){return H(K.restUrl+
"/portals/"+(P||K.id)+"/collaborationsSummary",L)},w=function(H,K,P,L){return H(K.restUrl+"/portals/"+(P||K.id)+"/collaboratedItems",L)},A=function(H,K,P){return p(H,location.protocol+"//"+K.portalHostname+"/sharing/rest/portals/"+(P||"self"))},x=function(H,K,P){return H(K.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+K.id+" AND access:public",num:100,start:P||1,sortField:"title",sortOrder:"asc"}}).then(function(L){return L.data.total>L.data.start+L.data.num?x(H,K,L.data.start+L.data.num).then(function(M){return Object(b.a)(Object(b.a)({},
M),{data:Object(b.a)(Object(b.a)({},M.data),{results:L.data.results.concat(M.data.results)})})}):L})},y=function(H,K,P,L){return H(K.restUrl+"/community/users/"+P+"/provisionedListings",{query:{f:"json",num:100,start:L||1}}).then(function(M){var J=a.Promise.all(M.data.provisionedListings.filter(function(X){return X.itemId}).map(function(X){return(new a.Promise(function(U,V){H(K.restUrl+"/content/items/"+X.itemId,{method:"get",query:{f:"json"}}).then(function(Q){U(Q.data)},V)})).catch(function(U){return console.error(U)})})),
R=M.data.provisionedListings.map(function(X){return p(H,K.restUrl+"/content/items/"+(X.id||X.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(U){return U},function(U){})});return M.data.total>M.data.start+M.data.num?y(H,K,P,M.data.start+M.data.num).then(function(X){return a.Promise.all([J].concat(R)).then(function(U){return U[0].results.concat(z(U.slice(1))).concat(X)})}):a.Promise.all([J].concat(R)).then(function(X){return X[0].filter(function(U){return void 0!==
U}).concat(z(X.slice(1)))})})},B=function(H,K,P){return p(H,K.restUrl+"/community/users/"+(P||K.user.username))},C=function(H,K,P){return p(H,K.restUrl+"/content/users/"+(P||K.user.username),{num:1})},D=function(H,K,P){return p(H,K.restUrl+"/content/groups/"+P)},F=function(H,K,P){return p(H,K.restUrl+"/community/groups",P)},E=function(H,K){return p(H,K.restUrl+"/portals/self/settings")},G=function(H,K){return p(H,K.restUrl+"/portals/self/trustedOrgs",{num:100})},O=function(H,K){return void 0===K&&
(K=","),H.map(function(P){return P.id}).join(K)}},709:function(h,r){h.exports=n},982:function(h,r,v){v.r(r);v.d(r,"InfoBanner",function(){return b});var z=v(0),p=v(16);h=v(709);var g=v.n(h),e=v(30),b=function(){function a(c){var d=this;this.options=c;var f=c.bottomContainer;(this.topContainer=c.topContainer,this.bottomContainer=f,c.bannerConfig)?this.setupBanners(c.bannerConfig):c.request&&c.portal&&c.apiVersion&&(f=4===c.apiVersion?c.request:this.shimmedRequest.bind(this),c=4===c.apiVersion?c.portal:
Object(z.a)(Object(z.a)({},c.portal),{restUrl:c.portal.portalUrl.slice(0,-1),credential:c.portal.user&&c.portal.user.credential?c.portal.user.credential:void 0}),Object(e.p)(f,c).then(function(l){d.setupBanners(l.informationalBanner)}))}return a.prototype.destroy=function(){this.topContainer&&(this.topProjector.stop(),this.topContainer.remove?this.topContainer.remove():this.topContainer.parentNode&&this.topContainer.parentNode.removeChild(this.topContainer));this.bottomContainer&&(this.bottomProjector.stop(),
this.bottomContainer.remove?this.bottomContainer.remove():this.bottomContainer.parentNode&&this.bottomContainer.parentNode.removeChild(this.bottomContainer))},a.prototype.setupBanners=function(c){c&&c.enabled&&(this.topContainer&&(this.topProjector=this.createProjector(this.topContainer,"top-info-banner","top",c)),this.bottomContainer&&(this.bottomProjector=this.createProjector(this.bottomContainer,"bottom-info-banner","bottom",c)))},a.prototype.createProjector=function(c,d,f,l){var m={key:d,position:f,
bannerConfig:l};return this.store=Object(p.createStore)(function(k,q){q.type;q.payload;return Object(z.a)({},m)},m),Object(p.createProjector)(this.store,function(k){return k(g.a,Object(z.a)({},m))},c)},a.prototype.shimmedRequest=function(c,d){var f=Object(z.a)({},d.query);return this.options.portal&&this.options.portal.user&&this.options.portal.user.credential&&-1<c.indexOf(this.options.portal.restUrl)&&(f.token=this.options.portal.user.credential.token),this.options.request({url:c,content:d.query},
{usePost:"post"===d.method}).then(function(l){return{data:l}})},a}()}})})},"arcgis-components/Component":function(){define(function(){return function(u){function n(r){if(h[r])return h[r].exports;var v=h[r]={i:r,l:!1,exports:{}};return u[r].call(v.exports,v,v.exports,n),v.l=!0,v.exports}var h={};return n.m=u,n.c=h,n.d=function(r,v,z){n.o(r,v)||Object.defineProperty(r,v,{enumerable:!0,get:z})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,v){if((1&v&&(r=n(r)),8&v)||4&v&&"object"==typeof r&&r&&r.__esModule)return r;var z=Object.create(null);if(n.r(z),Object.defineProperty(z,"default",{enumerable:!0,value:r}),2&v&&"string"!=typeof r)for(var p in r)n.d(z,p,function(g){return r[g]}.bind(null,p));return z},n.n=function(r){var v=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(v,"a",v),v},n.o=function(r,v){return Object.prototype.hasOwnProperty.call(r,
v)},n.p="",n(n.s=809)}({0:function(u,n,h){function r(c,d){function f(){this.constructor=c}if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");b(c,d);c.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)}function v(c,d){var f={},l;for(l in c)Object.prototype.hasOwnProperty.call(c,l)&&0>d.indexOf(l)&&(f[l]=c[l]);if(null!=c&&"function"==typeof Object.getOwnPropertySymbols){var m=0;for(l=Object.getOwnPropertySymbols(c);m<
l.length;m++)0>d.indexOf(l[m])&&Object.prototype.propertyIsEnumerable.call(c,l[m])&&(f[l[m]]=c[l[m]])}return f}function z(c,d,f,l){var m,k=arguments.length,q=3>k?d:null===l?l=Object.getOwnPropertyDescriptor(d,f):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)q=Reflect.decorate(c,d,f,l);else for(var t=c.length-1;0<=t;t--)(m=c[t])&&(q=(3>k?m(q):3<k?m(d,f,q):m(d,f))||q);return 3<k&&q&&Object.defineProperty(d,f,q),q}function p(c,d,f,l){return new (f||(f=Promise))(function(m,k){function q(A){try{w(l.next(A))}catch(x){k(x)}}
function t(A){try{w(l.throw(A))}catch(x){k(x)}}function w(A){var x;A.done?m(A.value):(x=A.value,x instanceof f?x:new f(function(y){y(x)})).then(q,t)}w((l=l.apply(c,d||[])).next())})}function g(c,d){function f(w){return function(A){return function(x){if(l)throw new TypeError("Generator is already executing.");for(;t;)try{if(l=1,m&&(k=2&x[0]?m.return:x[0]?m.throw||((k=m.return)&&k.call(m),0):m.next)&&!(k=k.call(m,x[1])).done)return k;switch(m=0,k&&(x=[2&x[0],k.value]),x[0]){case 0:case 1:k=x;break;
case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++;m=x[1];x=[0];continue;case 7:x=t.ops.pop();t.trys.pop();continue;default:if(!(k=t.trys,(k=0<k.length&&k[k.length-1])||6!==x[0]&&2!==x[0])){t=0;continue}if(3===x[0]&&(!k||x[1]>k[0]&&x[1]<k[3]))t.label=x[1];else if(6===x[0]&&t.label<k[1])t.label=k[1],k=x;else if(k&&t.label<k[2])t.label=k[2],t.ops.push(x);else{k[2]&&t.ops.pop();t.trys.pop();continue}}x=d.call(c,t)}catch(y){x=[6,y],m=0}finally{l=k=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:
void 0,done:!0}}([w,A])}}var l,m,k,q,t={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return q={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(q[Symbol.iterator]=function(){return this}),q}function e(c,d){for(var f=0,l=d.length,m=c.length;f<l;f++,m++)c[m]=d[f];return c}h.d(n,"d",function(){return r});h.d(n,"a",function(){return a});h.d(n,"f",function(){return v});h.d(n,"c",function(){return z});h.d(n,"b",function(){return p});h.d(n,"e",function(){return g});
h.d(n,"g",function(){return e});var b=function(c,d){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(f[m]=l[m])})(c,d)},a=function(){return(a=Object.assign||function(c){for(var d,f=1,l=arguments.length;f<l;f++)for(var m in d=arguments[f])Object.prototype.hasOwnProperty.call(d,m)&&(c[m]=d[m]);return c}).apply(this,arguments)};Object.create;Object.create},15:function(u,n,h){function r(z){return function g(){for(var e=
this,b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];return b.length>=z.length?z.call.apply(z,Object(v.g)([this],b)):function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return g.call.apply(g,Object(v.g)(Object(v.g)([e],b),c))}}}h.d(n,"a",function(){return r});var v=h(0)},441:function(u,n,h){!function(r){var v="".concat("http://www.w3.org/","2000/svg"),z="".concat("http://www.w3.org/","1999/xlink"),p=[],g=function(E,G){var O={};return Object.keys(E).forEach(function(H){O[H]=E[H]}),
G&&Object.keys(G).forEach(function(H){O[H]=G[H]}),O},e=function(E,G){return E.vnodeSelector===G.vnodeSelector&&(E.properties&&G.properties?E.properties.key===G.properties.key&&E.properties.bind===G.properties.bind:!E.properties&&!G.properties)},b=function(E){if("string"!=typeof E)throw Error("Style values must be strings");},a=function(E,G,O,H){var K=E[G];if(""!==K.vnodeSelector){var P=K.properties;if(!(P&&(void 0===P.key?P.bind:P.key)))for(P=0;P<E.length;P++)if(P!==G&&e(E[P],K))throw{error:Error("".concat(O.vnodeSelector,
" had a ").concat(K.vnodeSelector," child ").concat("added"===H?H:"removed",", but there is now more than one. You must add unique key properties to make them distinguishable.")),parentNode:O,childNode:K};}},c=[],d=!1,f=function(E){(E.children||[]).forEach(f);E.properties&&E.properties.afterRemoved&&E.properties.afterRemoved.apply(E.properties.bind||E.properties,[E.domNode])},l=function(){d=!1;c.forEach(f);c.length=0},m=function(E){c.push(E);d||(d=!0,"undefined"!=typeof window&&"requestIdleCallback"in
window?window.requestIdleCallback(l,{timeout:16}):setTimeout(l,16))},k=function(E){var G=E.domNode;if(E.properties){var O=E.properties.exitAnimation;if(O)return G.style.pointerEvents="none",void O(G,function(){G.parentNode&&(G.parentNode.removeChild(G),m(E))},E.properties)}G.parentNode&&(G.parentNode.removeChild(G),m(E))},q=function(E,G,O){!function(H,K,P){if(K)for(var L=0;L<K.length;L++)t(K[L],H,void 0,P)}(E,G.children,O);G.text&&(E.textContent=G.text);(function(H,K,P){if(K)for(var L=P.eventHandlerInterceptor,
M=Object.keys(K),J=M.length,R=function(U){var V,Q=M[U];U=K[Q];if("className"===Q)throw Error('Property "className" is not supported, use "class".');if("class"===Q)w(H,U,!0);else if("classes"===Q){var Y=Object.keys(U),fa=Y.length;for(Q=0;Q<fa;Q++){var da=Y[Q];U[da]&&H.classList.add(da)}}else if("styles"===Q)for(Y=Object.keys(U),fa=Y.length,Q=0;Q<fa;Q++){da=Y[Q];var ca=U[da];ca&&(b(ca),P.styleApplyer(H,da,ca))}else"key"!==Q&&null!=U&&(Y=typeof U,"function"===Y?(0===Q.lastIndexOf("on",0)&&(L&&(U=L(Q,
U,H,K)),"oninput"===Q&&(V=U,U=function(la){V.apply(this,[la]);la.target["oninput-value"]=la.target.value})),H[Q]=U):P.namespace===v?"href"===Q?H.setAttributeNS(z,Q,U):H.setAttribute(Q,U):"string"===Y&&"value"!==Q&&"innerHTML"!==Q?H.setAttribute(Q,U):H[Q]=U)},X=0;X<J;X++)R(X)})(E,G.properties,O);G.properties&&G.properties.afterCreate&&G.properties.afterCreate.apply(G.properties.bind||G.properties,[E,O,G.vnodeSelector,G.properties,G.children])},t=function(E,G,O,H){var K=0,P=E.vnodeSelector,L=G.ownerDocument;
if(""===P){var M=E.domNode=L.createTextNode(E.text);void 0!==O?G.insertBefore(M,O):G.appendChild(M)}else{for(var J=0;J<=P.length;++J){var R=P.charAt(J);if(J===P.length||"."===R||"#"===R)R=P.charAt(K-1),K=P.slice(K,J),"."===R?M.classList.add(K):"#"===R?M.id=K:("svg"===K&&(H=g(H,{namespace:v})),void 0!==H.namespace?M=E.domNode=L.createElementNS(H.namespace,K):(M=E.domNode=E.domNode||L.createElement(K),"input"===K&&E.properties&&void 0!==E.properties.type&&M.setAttribute("type",E.properties.type)),void 0!==
O?G.insertBefore(M,O):M.parentNode!==G&&G.appendChild(M)),K=J+1}q(M,E,H)}},w=function(E,G,O){G&&G.split(" ").forEach(function(H){H&&E.classList.toggle(H,O)})};var A=function(E,G,O){var H=E.domNode,K=!1;if(E===G)return!1;var P=!1;if(""===G.vnodeSelector){if(G.text!==E.text)return E=H.ownerDocument.createTextNode(G.text),H.parentNode.replaceChild(E,H),G.domNode=E,K=!0;G.domNode=H}else 0===G.vnodeSelector.lastIndexOf("svg",0)&&(O=g(O,{namespace:v})),E.text!==G.text&&(P=!0,void 0===G.text?H.removeChild(H.firstChild):
H.textContent=G.text),G.domNode=H,P=function(L,M,J,R,X){if(J===R)return!1;R=R||p;for(var U,V=(J=J||p).length,Q=R.length,Y=U=0,fa=!1;Y<Q;){var da=U<V?J[U]:void 0,ca=R[Y];if(void 0!==da&&e(da,ca))fa=A(da,ca,X)||fa,U++;else{a:{da=J;var la=ca;if(""!==la.vnodeSelector)for(var ha=U+1;ha<da.length;ha++)if(e(da[ha],la)){da=ha;break a}da=-1}if(0<=da){for(;U<da;U++)k(J[U]),a(J,U,L,"removed");fa=A(J[da],ca,X)||fa;U=da+1}else t(ca,M,U<V?J[U].domNode:void 0,X),ca.properties&&(da=ca.properties.enterAnimation)&&
da(ca.domNode,ca.properties),a(R,Y,L,"added")}Y++}if(V>U)for(;U<V;U++)k(J[U]),a(J,U,L,"removed");return fa}(G,H,E.children,G.children,O)||P,P=function(L,M,J,R){if(J){for(var X=!1,U=Object.keys(J),V=U.length,Q=0;Q<V;Q++){var Y=U[Q],fa=J[Y],da=M[Y];if("class"===Y)da!==fa&&(w(L,da,!1),w(L,fa,!0));else if("classes"===Y){var ca=L.classList,la=Object.keys(fa),ha=la.length;for(Y=0;Y<ha;Y++){var S=la[Y],ea=!!fa[S];ea!==!!da[S]&&(X=!0,ea?ca.add(S):ca.remove(S))}}else if("styles"===Y)for(ca=Object.keys(fa),
la=ca.length,Y=0;Y<la;Y++)ha=ca[Y],S=fa[ha],S!==da[ha]&&(X=!0,S?(b(S),R.styleApplyer(L,ha,S)):R.styleApplyer(L,ha,""));else(fa||"string"!=typeof da||(fa=""),"value"===Y)?(ca=L[Y],ca!==fa&&(L["oninput-value"]?ca===L["oninput-value"]:fa!==da)&&(L[Y]=fa,L["oninput-value"]=void 0),fa!==da&&(X=!0)):fa!==da&&(da=typeof fa,"function"===da&&R.eventHandlerInterceptor||(R.namespace===v?"href"===Y?L.setAttributeNS(z,Y,fa):L.setAttribute(Y,fa):"string"===da&&"innerHTML"!==Y?"role"===Y&&""===fa?L.removeAttribute(Y):
L.setAttribute(Y,fa):L[Y]!==fa&&(L[Y]=fa),X=!0))}return X}}(H,E.properties,G.properties,O)||P,G.properties&&G.properties.afterUpdate&&G.properties.afterUpdate.apply(G.properties.bind||G.properties,[H,O,G.vnodeSelector,G.properties,G.children]);return P&&G.properties&&G.properties.updateAnimation&&G.properties.updateAnimation(H,G.properties,E.properties),K};var x=function(E,G){return{getLastRender:function(){return E},update:function(O){if(E.vnodeSelector!==O.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");
var H=E;E=O;A(H,O,G)},domNode:E.domNode}},y={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(E,G,O){"-"===G.charAt(0)?E.style.setProperty(G,O):E.style[G]=O}},B={create:function(E,G){return G=g(y,G),t(E,document.createElement("div"),void 0,G),x(E,G)},append:function(E,G,O){return O=g(y,O),t(G,E,void 0,O),x(G,O)},insertBefore:function(E,G,O){return O=g(y,O),t(G,E.parentNode,E,O),x(G,O)},merge:function(E,G,O){return O=g(y,O),G.domNode=E,q(E,G,O),x(G,
O)},replace:function(E,G,O){return O=g(y,O),t(G,E.parentNode,E,O),E.parentNode.removeChild(E),x(G,O)}},C=function(E,G,O){for(var H=0,K=G.length;H<K;H++){var P=G[H];Array.isArray(P)?C(E,P,O):null!=P&&!1!==P&&("string"==typeof P&&(P={vnodeSelector:"",properties:void 0,children:void 0,text:P.toString(),domNode:null}),O.push(P))}};var D=Array.prototype.find?function(E,G){return E.find(G)}:function(E,G){return E.filter(G)[0]};var F=function(E,G){var O=E;return G.forEach(function(H){O=O&&O.children?D(O.children,
function(K){return K.domNode===H}):void 0}),O};r.createCache=function(){var E,G;return{invalidate:function(){E=G=void 0},result:function(O,H){if(E)for(var K=0;K<O.length;K++)E[K]!==O[K]&&(G=void 0);return G||(G=H(),E=O),G}}};r.createMapping=function(E,G,O){var H=[],K=[];return{results:K,map:function(P){for(var L=P.map(E),M=K.slice(),J=0,R=0;R<P.length;R++){var X=P[R],U=L[R];if(U===H[J])K[R]=M[J],O(X,M[J],R),J++;else{for(var V=!1,Q=1;Q<H.length+1;Q++){var Y=(J+Q)%H.length;if(H[Y]===U){K[R]=M[Y];O(P[R],
M[Y],R);J=Y+1;V=!0;break}}V||(K[R]=G(X,R))}}K.length=P.length;H=L}}};r.createProjector=function(E){var G,O,H=g(y,E),K=H.performanceLogger,P=!0,L=!1,M=[],J=[],R=function(U,V,Q){H.eventHandlerInterceptor=function(fa,da,ca){function la(ha){ca("domEvent",ha);for(var S=da(),ea=ha.currentTarget,ma=S.domNode,sa=[];ea&&ea!==ma;)sa.push(ea),ea=ea.parentNode;sa.reverse();var ja;S=F(S.getLastRender(),sa);return fa.scheduleRender(),S&&(ja=S.properties["on".concat(ha.type)].apply(S.properties.bind||this,arguments)),
ca("domEventProcessed",ha),ja}return function(ha,S,ea,ma){return la}}(G,function(){return Y},K);var Y=U(V,Q(),H);M.push(Y);J.push(Q)},X=function(){if(O=void 0,P){P=!1;K("renderStart",void 0);for(var U=0;U<M.length;U++){var V=J[U]();K("rendered",void 0);M[U].update(V);K("patched",void 0)}K("renderDone",void 0);P=!0}};return G={renderNow:X,scheduleRender:function(){O||L||(O=requestAnimationFrame(X))},stop:function(){O&&(cancelAnimationFrame(O),O=void 0);L=!0},resume:function(){L=!1;P=!0;G.scheduleRender()},
append:function(U,V){R(B.append,U,V)},insertBefore:function(U,V){R(B.insertBefore,U,V)},merge:function(U,V){R(B.merge,U,V)},replace:function(U,V){R(B.replace,U,V)},detach:function(U){for(var V=0;V<J.length;V++)if(J[V]===U)return J.splice(V,1),M.splice(V,1)[0];throw Error("renderFunction was not found");}}};r.dom=B;r.h=function(E,G,O){if(Array.isArray(G))O=G,G=void 0;else if(G&&("string"==typeof G||G.vnodeSelector)||O&&("string"==typeof O||O.vnodeSelector))throw Error("h called with invalid arguments");
var H,K;return O&&1===O.length&&"string"==typeof O[0]?H=O[0]:O&&(C(E,O,K=[]),0===K.length&&(K=void 0)),{vnodeSelector:E,properties:G,children:K,text:""===H?void 0:H,domNode:null}};Object.defineProperty(r,"__esModule",{value:!0})}(n)},5:function(u,n,h){function r(c){return 0===Object.keys(c).length&&c.constructor===Object}function v(c){return null!=c}function z(c,d){return b.apply(null,arguments)}function p(c,d){return a.apply(null,arguments)}h.d(n,"b",function(){return r});h.d(n,"a",function(){return v});
h.d(n,"e",function(){return e});h.d(n,"c",function(){return z});h.d(n,"d",function(){return p});var g=h(0);u=h(15);var e=Object(u.a)(function(c,d){d=Object(g.a)({},d);return delete d[c],d}),b=Object(u.a)(function(c,d){return Object.keys(d).reduce(function(f,l){return f[l]=c(d[l],l,d),f},{})}),a=Object(u.a)(function(c,d){return Object.keys(d).reduce(function(f,l){return c(d[l],l,d)&&(f[l]=d[l]),f},{})})},63:function(u,n,h){function r(){for(var v=[],z=0;z<arguments.length;z++)v[z]=arguments[z];return function(p){return v.reduceRight(function(g,
e){return e(g)},p)}}h.d(n,"a",function(){return r})},809:function(u,n,h){function r(q,t,w,A){var x=new m({key:"root"},t);q&&(x.store=q);var y=Object(c.createProjector)(A);t=Object(a.a)(Object(a.a)({},y),{append:function(B){return y.append(B,function(){return x.render.bind(x)(x.tsx.bind(x))})}});return t.append(w),q&&q.subscribe(function(){return y.scheduleRender()}),t}function v(q,t){return function(w){return function(A,x){return function(y,B){return x(w,Object(a.a)(Object(a.a)(Object(a.a)({},A),
q(B(),A)),t(y,A)))}}}}function z(){for(var q=[],t=0;t<arguments.length;t++)q[t]=arguments[t];return function(w){return function(A,x){var y=w(A,x);A=d.a;var B=y.dispatch;x=q.map(function(C){return C({dispatch:function(D){return B(D)},getState:y.getState})});return B=A.apply(void 0,x)(y.dispatch),Object(a.a)(Object(a.a)({},y),{dispatch:B})}}}function p(q){return function(t){return function(w,A){return t(function(x,y){if("@@shunt/SETSTATE"===y.type)return y.payload;x=w(x,y);return-1===y.type.indexOf("@@component/INIT")&&
q(y,x),x},A)}}}function g(q){return function(t){t.dispatch;var w=t.getState;return function(A){return function(x){var y=A(x);return q(x,w()),y}}}}function e(q){var t=Object(f.d)(function(w){return"function"==typeof w},q);return function(w,A){return void 0===w&&(w={}),Object(f.c)(function(x,y){return x(w[y],A)},t)}}function b(q,t){var w=t,A=[];t={dispatch:function(x){return w=q(w,x),A.forEach(function(y){return y()}),x},subscribe:function(x){return A.push(x),function(){A.splice(A.indexOf(x),1)}},getState:function(){return w}};
return t.dispatch({type:"@@component/INIT"+Math.random().toString(36).substring(7)}),t}h.r(n);h.d(n,"createProjector",function(){return r});h.d(n,"Component",function(){return l});h.d(n,"RootComponent",function(){return m});h.d(n,"connect",function(){return v});h.d(n,"applyMiddleware",function(){return z});h.d(n,"shunt",function(){return p});h.d(n,"thunk",function(){return k});h.d(n,"addListener",function(){return g});h.d(n,"combineReducers",function(){return e});h.d(n,"createStore",function(){return b});
var a=h(0),c=h(441),d=h(63),f=h(5),l=function(){function q(t){this.childComponents={};this.state={};this.props=t}return q.prototype.componentDidConnect=function(){},q.prototype.componentWillReceiveProps=function(t){},q.prototype.setState=function(t){this.state=Object(a.a)(Object(a.a)({},this.state),t);this.store?this.store.dispatch({type:this.props.key+"_COMPONENT_STATE_UPDATE"}):console.warn("\n                A component's 'setState' method was called from its constructor function.\n                Set component state directly in the constructor function, and use 'setState' in callbacks etc.\n            ")},
q.prototype.tsx=function(t,w,A){var x=Array.prototype.slice.call(arguments).slice(2);if("string"==typeof t)var y=c.h.apply(this,[t,w,x]);else if(t.prototype&&t.prototype.constructor.name){var B=t;x=Object(a.a)(Object(a.a)({},w),{children:x});var C=this.childComponents[x.key];C?(C.componentWillReceiveProps(x),C.props=x,y=C.render(C.tsx.bind(C))):((C=this.childComponents[x.key]=new B(x)).store=this.store,C.componentDidConnect(),y=C.render(C.tsx.bind(C)))}else y=(B=t)(Object(a.a)(Object(a.a)({},w),{children:x}),
this.tsx.bind(this));return"function"==typeof y?y(this.store.dispatch,this.store.getState):y},q}(),m=function(q){function t(w,A){w=q.call(this,w)||this;return w.renderRoot=A,w}return Object(a.d)(t,q),t.prototype.render=function(w){var A=this;return w(function(x,y){return A.renderRoot(y)})},t}(l);void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var q=/function\s([^(]{1,})\(/.exec(this.toString());return q&&1<q.length?
q[1].trim():""},set:function(q){}});var k=function(q){var t=q.dispatch,w=q.getState;return function(A){return function(x){return"function"==typeof x?x(t,w):A(x)}}}}})})},"arcgis-components/InfoBanner/index":function(){define(["../Component"],function(u){return function(n){function h(v){if(r[v])return r[v].exports;var z=r[v]={i:v,l:!1,exports:{}};return n[v].call(z.exports,z,z.exports,h),z.l=!0,z.exports}var r={};return h.m=n,h.c=r,h.d=function(v,z,p){h.o(v,z)||Object.defineProperty(v,z,{enumerable:!0,
get:p})},h.r=function(v){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"});Object.defineProperty(v,"__esModule",{value:!0})},h.t=function(v,z){if((1&z&&(v=h(v)),8&z)||4&z&&"object"==typeof v&&v&&v.__esModule)return v;var p=Object.create(null);if(h.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:v}),2&z&&"string"!=typeof v)for(var g in v)h.d(p,g,function(e){return v[e]}.bind(null,g));return p},h.n=function(v){var z=v&&v.__esModule?
function(){return v.default}:function(){return v};return h.d(z,"a",z),z},h.o=function(v,z){return Object.prototype.hasOwnProperty.call(v,z)},h.p="",h(h.s=858)}({0:function(n,h,r){function v(d,f){function l(){this.constructor=d}if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");a(d,f);d.prototype=null===f?Object.create(f):(l.prototype=f.prototype,new l)}function z(d,f){var l={},m;for(m in d)Object.prototype.hasOwnProperty.call(d,
m)&&0>f.indexOf(m)&&(l[m]=d[m]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(m=Object.getOwnPropertySymbols(d);k<m.length;k++)0>f.indexOf(m[k])&&Object.prototype.propertyIsEnumerable.call(d,m[k])&&(l[m[k]]=d[m[k]])}return l}function p(d,f,l,m){var k,q=arguments.length,t=3>q?f:null===m?m=Object.getOwnPropertyDescriptor(f,l):m;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(d,f,l,m);else for(var w=d.length-1;0<=w;w--)(k=d[w])&&(t=(3>q?
k(t):3<q?k(f,l,t):k(f,l))||t);return 3<q&&t&&Object.defineProperty(f,l,t),t}function g(d,f,l,m){return new (l||(l=Promise))(function(k,q){function t(x){try{A(m.next(x))}catch(y){q(y)}}function w(x){try{A(m.throw(x))}catch(y){q(y)}}function A(x){var y;x.done?k(x.value):(y=x.value,y instanceof l?y:new l(function(B){B(y)})).then(t,w)}A((m=m.apply(d,f||[])).next())})}function e(d,f){function l(A){return function(x){return function(y){if(m)throw new TypeError("Generator is already executing.");for(;w;)try{if(m=
1,k&&(q=2&y[0]?k.return:y[0]?k.throw||((q=k.return)&&q.call(k),0):k.next)&&!(q=q.call(k,y[1])).done)return q;switch(k=0,q&&(y=[2&y[0],q.value]),y[0]){case 0:case 1:q=y;break;case 4:return w.label++,{value:y[1],done:!1};case 5:w.label++;k=y[1];y=[0];continue;case 7:y=w.ops.pop();w.trys.pop();continue;default:if(!(q=w.trys,(q=0<q.length&&q[q.length-1])||6!==y[0]&&2!==y[0])){w=0;continue}if(3===y[0]&&(!q||y[1]>q[0]&&y[1]<q[3]))w.label=y[1];else if(6===y[0]&&w.label<q[1])w.label=q[1],q=y;else if(q&&w.label<
q[2])w.label=q[2],w.ops.push(y);else{q[2]&&w.ops.pop();w.trys.pop();continue}}y=f.call(d,w)}catch(B){y=[6,B],k=0}finally{m=q=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([A,x])}}var m,k,q,t,w={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]};return t={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t}function b(d,f){for(var l=0,m=f.length,k=d.length;l<m;l++,k++)d[k]=f[l];return d}r.d(h,"d",function(){return v});
r.d(h,"a",function(){return c});r.d(h,"f",function(){return z});r.d(h,"c",function(){return p});r.d(h,"b",function(){return g});r.d(h,"e",function(){return e});r.d(h,"g",function(){return b});var a=function(d,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,m){l.__proto__=m}||function(l,m){for(var k in m)Object.prototype.hasOwnProperty.call(m,k)&&(l[k]=m[k])})(d,f)},c=function(){return(c=Object.assign||function(d){for(var f,l=1,m=arguments.length;l<m;l++)for(var k in f=
arguments[l])Object.prototype.hasOwnProperty.call(f,k)&&(d[k]=f[k]);return d}).apply(this,arguments)};Object.create;Object.create},16:function(n,h){n.exports=u},858:function(n,h,r){r.r(h);var v=r(0);n=function(z){function p(g){return z.call(this,g)||this}return Object(v.d)(p,z),p.prototype.render=function(g){var e=this.props.position,b=this.props.bannerConfig;return g("div",{classes:{"info-banner":!0,"info-banner--top":"top"===e,"info-banner--bottom":"bottom"===e},style:"background-color: "+b.bgColor+
"; color: "+b.fontColor},g("p",{class:"info-banner-text"},b.text))},p}(r(16).Component);h.default=n}})})},"app/widgets/panels/MapMaker/panels/ContextualPanel":function(){define("require exports tslib ./Panel ../../../actionBars/ContextualActionBar ../../../../utils/topic esri/core/accessorSupport/decorators esri/widgets/support/widget ../../../../widgets/panels/MapMaker/LayerSwitcher ../charts/ConfigureCharts".split(" "),function(u,n,h,r,v,z,p,g,e,b){Object.defineProperty(n,"__esModule",{value:!0});
r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importDefault(z);e=h.__importDefault(e);b=h.__importDefault(b);u=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}h.__extends(c,a);c.prototype.destroy=function(){a.prototype.destroy.call(this);this.removeLayerSwitcher();this.removeConfigureCharts()};c.prototype.addEventListeners=function(){var d=this;a.prototype.addEventListeners.call(this);this.own([this.state.map.webMap.allLayers.on("change",function(f){return d.deselectLayer(f)})])};
c.prototype.deselectLayer=function(d){d=(d=d.removed)&&d.slice(0);var f=this.payload;(null===d||void 0===d?0:d.some(function(l){var m;return l.id===(null===f||void 0===f?void 0:f.id)||(null===(m=null===f||void 0===f?void 0:f.parent)||void 0===m?void 0:m.id)===l.id}))&&z.default.publish("layer-deselected",f)};c.prototype.readAppSettings=function(){this.actionBarExpanded=this.state.config.appSettings.contextualPanel.actionBar.expanded};c.prototype.writeAppSettings=function(){this.actionBarExpanded=
this.state.config.appSettings.contextualPanel.actionBar.expanded};c.prototype.destroyWidget=function(d){this.actionBar.findAction(this.activeActionName);this.removeConfigureCharts();a.prototype.destroyWidget.call(this,d)};c.prototype.onChartSelected=function(d){var f,l=d.selectedChartId,m=d.layer,k=this.lastActionName,q=this.actionBar;!1!==d.isAddingPanel&&(this.state.selectedChartId=l,this.destroyWidget(k),this.collapsePanel(!0),this.payload=m,null===(f=this.layerSwitcher)||void 0===f?void 0:f.set("selectedLayer",
m),this.selectedChartId=l,this.removeConfigureCharts(),d=document.createElement("div"),this.container.appendChild(d),q=q.findAction("configurechart"),this.configureCharts=new b.default({layer:m,panel:this,state:this.state,action:q,configureChartsContainer:d,selectedChartId:l,showConfigure:!1}))};c.prototype.onLayerSelected=function(d){var f,l,m=d.layer,k=d.action,q=d.showPanel;if(d.firstLayer)this.payload=m,null===(f=this.layerSwitcher)||void 0===f?void 0:f.set("selectedLayer",m);else{var t=this.payload;
d=this.lastActionName;f=this.actionBar;var w=this.activeMapWidgetName,A=k||this.getSelectedLayerAction(m);if(!k&&d&&t&&t.id===m.id)this.collapsePanel(!1),f.setActive(A,!1,!0);else{this.payload=m;null===(l=this.layerSwitcher)||void 0===l?void 0:l.set("selectedLayer",m);if("analysis"===d){this.collapsePanel(!1);f.setActive(d,!1,!0);return}(!A&&d||k&&k!==d||A!==d)&&this.destroyWidget(d);!1===q&&this.isCollapsed()?!1===q&&this.isCollapsed()&&this.destroyWidget(this.activeActionName):(this.activeActionName=
A||"layerproperties",f.setActive(A||"layerproperties",!1,!0),l=f.findAction(this.activeActionName||"layerproperties"),(null===l||void 0===l?0:l.hidden)&&d&&f.disableAction(d),this.addPanelWidget({action:l}),l&&"timeslider"===(null===l||void 0===l?void 0:l.name)||this.collapsePanel(!1))}w&&(this.destroyWidget(w||d),this.activeMapWidgetName=null)}};c.prototype.collapsePanel=function(d){a.prototype.collapsePanel.call(this,d);var f=d?"add":"remove";document.querySelectorAll(".js-app-flyout").forEach(function(l){return l.classList[f]("hide")})};
c.prototype.getSelectedLayerAction=function(d){var f=this.lastActionName,l=this.payload,m=this.actionBar,k=d.type,q=m.findAction(f),t=(null===q||void 0===q?void 0:q.canModify)&&(null===q||void 0===q?void 0:q.canModify(d));return q&&q.isLayerAction&&l&&l.id===d.id?f:"map-notes"!==k||this.isClassicMapNotesLayer(d)?"route"===k?(d=m.findAction("directions"))&&!d.hidden?"directions":"layerproperties":q&&q.isLayerAction?("feature"===k||t)&&d.url&&(!d.isTable||d.isTable&&"configurechart"===f)?f:null:"layerproperties":
(d=m.findAction("sketch"))?"sketch":"layerproperties"};c.prototype.onLayerDeselected=function(d){d=this.activeActionName;this.payload=null;"editfeatures"!==d&&"analysis"!==d&&(this.collapsePanel(!0),this.destroyAllWidgets())};c.prototype.onSetFocus=function(){var d=this.currentPanel,f=this.layerSwitcher,l=this.numPanels,m=this.activeActionName;if(f&&!f.destroyed)f[1<l&&"directions"!==m||"editfeatures"===m||"analysis"===m?"hide":"show"]();var k=1<l?"back-button":"dismiss-button";setTimeout(function(){return(null===
d||void 0===d?0:d.setFocus)?null===d||void 0===d?void 0:d.setFocus(k):null},50)};c.prototype.onAddActionBar=function(d){var f=this;this.actionBar=new v.default({state:this.state,panel:this,theme:this.theme,expanded:this.actionBarExpanded,container:d});this.own(this.actionBar.on("click",this.handleActionClick.bind(this)));d.addEventListener("calciteActionBarToggle",function(l){return f.actionBarToggle(l)})};c.prototype.actionBarToggle=function(d){var f=this.state.config.appSettings;f.contextualPanel.actionBar.expanded=
d.target.expanded;z.default.publish("app-properties-updated",f)};c.prototype.onAddHeader=function(){return g.tsx("div",{class:"layer-switcher",bind:this,afterCreate:this.addLayerSwitcher})};c.prototype.addLayerSwitcher=function(d){var f=this.payload,l=this.state;this.removeLayerSwitcher();this.layerSwitcher=new e.default({container:d,selectedLayer:f,state:l})};c.prototype.removeLayerSwitcher=function(){var d=this.layerSwitcher;d&&!d.destroyed&&(d.destroy(),this.layerSwitcher=null)};c.prototype.removeConfigureCharts=
function(){var d=this.configureCharts;!d||null!==d&&void 0!==d&&d.destroyed||(d.destroy(),this.configureCharts=null);d=document.querySelector(".js-charts-config-ux");null===d||void 0===d?void 0:d.remove()};c.prototype.isClassicMapNotesLayer=function(d){return"map-notes"===(null===d||void 0===d?void 0:d.type)&&!(null===d||void 0===d?0:d.get("capabilities.operations.supportsMapNotesEditing"))};return c=h.__decorate([p.subclass("")],c)}(r.default);n.default=u})},"app/widgets/panels/MapMaker/panels/Panel":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget esri/core/domUtils ../../../../utils/topic".split(" "),
function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);p=h.__importStar(p);g=h.__importDefault(g);z=function(e){function b(a){a=e.call(this,a)||this;a.slot="primary-panel";a.position="leading";a.theme="dark";a.heightScale="s";a.detached=!1;a.actionBarExpanded=!1;a.widgets={};a.isLoadingWidget=!1;return a}h.__extends(b,e);b.prototype.postInitialize=function(){this.readAppSettings();this.addEventListeners()};b.prototype.destroy=function(){this.destroyAllWidgets();
this.removeMutationObserver()};b.prototype.render=function(){return v.tsx("div",{bind:this,afterCreate:this.onAfterCreate},v.tsx("calcite-action-bar",{slot:"action-bar",class:"calcite-theme-"+this.theme,bind:this,afterCreate:this.onAddActionBar}),this.onAddHeader())};b.prototype.processAction=function(a,c){var d=this.actionBar,f=a;"string"===typeof a&&(f=d.findAction(a));this.panelOptions=c;(null===f||void 0===f?0:f.hidden)&&d.disableAction(this.lastActionName);d.setActive(f.name);this.handleActionClick({action:f})};
b.prototype.addEventListeners=function(){this.own([g.default.subscribe("trigger-action",this.handleAppMessage.bind(this)),g.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),g.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this)),g.default.subscribe("chart-selected",this.onChartSelected.bind(this)),g.default.subscribe("mapView_changed",this.onMapViewChanged.bind(this))])};b.prototype.readAppSettings=function(){};b.prototype.actionBarToggle=function(a){};b.prototype.onMapViewChanged=
function(a){};b.prototype.togglePanelVisibility=function(){var a=this.container;this.collapsePanel(!a.collapsed&&!a.hidden&&"hidden"!==a.style.visibility)};b.prototype.collapsePanel=function(a){var c,d=this.container,f=this.activeActionName;d.collapsed=a;g.default.publish("calciteShellPanelToggle",a);if(d=d.querySelector("calcite-panel"))d.dismissed=a;if(a)f&&(a=null===(c=this.actionBar)||void 0===c?void 0:c.findAction(f))&&(a.active=!1);else this.onSetFocus()};b.prototype.collapsePanelAndDestroy=
function(a){this.collapsePanel(a);a&&this.destroyWidget(this.activeActionName)};b.prototype.loadingPanel=function(a){this.container.loading=a};b.prototype.isCollapsed=function(){var a=this.container;return a.collapsed||a.hidden||"hidden"===a.style.visibility};b.prototype.onAfterCreate=function(a){var c=this;this.calcitePanel=a;this.setupMutationObserver();var d=this.defaultWidgetName;if(d)this.actionBar.once("loaded",function(){c.activeActionName=d;var f=c.actionBar.findAction(d);c.addPanelWidget({action:f})})};
b.prototype.onAddActionBar=function(a){};b.prototype.onAddHeader=function(){};b.prototype.clearPanel=function(){var a=this.calcitePanel;["calcite-flow","calcite-action-pad","calcite-panel","calcite-popover"].forEach(function(c){(c=a.querySelector(c))&&p.remove(c)})};b.prototype.getAllWidgets=function(){var a=this.widgets;return Object.keys(a).map(function(c){return a[c]})};b.prototype.getAllWidgetNames=function(){var a=this.widgets;return Object.keys(a).length?Object.keys(a).map(function(c){return c}):
[]};b.prototype.findWidget=function(a){var c=this.widgets;return c&&c[a]};b.prototype.destroyWidget=function(a){var c=this.findWidget(a);c&&(c.destroy&&!c.destroyed&&c.destroy(),this.activeActionName=this.activeWidget=null,delete this.widgets[a])};b.prototype.destroyAllWidgets=function(){var a=this;this.getAllWidgetNames().forEach(function(c){return a.destroyWidget(c)});this.widgets={};this.activeMapWidgetName=this.activeActionName=this.activeWidget=null};b.prototype.handleActionClick=function(a){var c=
this,d=null===a||void 0===a?void 0:a.action;if(d){var f=d.isModalWidget;d=d.isPopoverWidget;this.isLoadingWidget?(this.qdAction=a,setTimeout(function(){return c.handleActionClick(c.qdAction)},125)):(f||d?this.handleModalActionClick(a):this.handlePanelActionClick(a),this.qdAction=null)}};b.prototype.handleModalActionClick=function(a){this.addModalWidget(a)};b.prototype.handlePanelActionClick=function(a){var c,d=a.action,f=d.isMapWidget,l=d.isDestroyWidget,m=this.activeActionName;!m||m!==d.name&&m!==
(null===(c=d.sourceAction)||void 0===c?void 0:c.name)?this.addPanelWidget(a):((f||l)&&this.destroyWidget(m),f||this.togglePanelVisibility())};b.prototype.handleAppMessage=function(a){var c,d,f,l=a.currentTarget?a.currentTarget["data-action"]:a.action;l=null===(c=this.actionBar)||void 0===c?void 0:c.findAction(null===l||void 0===l?void 0:l.name);c=this.state.config.app.isFullScreen;a=a.modifier;l&&(c&&g.default.publish("toggle-fullscreen"),a&&this.activeActionName===l.name?(!l.isMapWidget&&this.isCollapsed()&&
(this.togglePanelVisibility(),null===(d=this.actionBar)||void 0===d?void 0:d.setActive(l.name,!1)),g.default.publish("trigger-hotkey",{action:l,modifier:a})):c&&this.activeActionName===l.name?this.isCollapsed()&&(this.togglePanelVisibility(),null===(f=this.actionBar)||void 0===f?void 0:f.setActive(l.name,!1)):(null===l||void 0===l?0:l.hidden)||(null===l||void 0===l?0:l.disabled)||this.processAction(l,a))};b.prototype.onLayerSelected=function(a){};b.prototype.onLayerDeselected=function(a){};b.prototype.onChartSelected=
function(a,c){};b.prototype.onActionClick=function(a){};b.prototype.addPanelWidget=function(a){var c,d,f;return h.__awaiter(this,void 0,void 0,function(){var l,m,k,q,t,w,A,x,y,B,C,D,F,E,G;return h.__generator(this,function(O){switch(O.label){case 0:l=a.action;m=l.sourceAction;k=l.name;q=l.isMapWidget;t=this;w=t.calcitePanel;A=t.activeActionName;x=t.lastActionName;if(!k)return[2];y=this.container;B=l.detached;C=l.heightScale;D=l.widthScale;y.detached=B||this.detached||!1;y.detachedHeightScale=C||this.heightScale;
y.heightScale=C||this.heightScale;y.widthScale=D||"m";this.destroyWidget(A);null===(c=this.actionBar)||void 0===c?void 0:c.scheduleRender();this.clearPanel();q?this.collapsePanel(!0):this.isCollapsed()&&this.togglePanelVisibility();x&&(null===(d=this.actionBar)||void 0===d?void 0:d.disableAction(x));F=q?null:w;return[4,this.createWidget(l,F)];case 1:if(E=O.sent())G=(null===m||void 0===m?void 0:m.name)||k,null===(f=this.actionBar)||void 0===f?void 0:f.setActive(G,!0,!0),this.activeWidget=this.widgets[k]=
E,this.lastActionName=this.activeActionName=k,q&&(this.activeMapWidgetName=k);return[2]}})})};b.prototype.setupMutationObserver=function(){var a=this;this.removeMutationObserver();(this.mutationObserver=new MutationObserver(function(){return a.onObserverUpdate()})).observe(this.calcitePanel,{childList:!0,subtree:!0})};b.prototype.removeMutationObserver=function(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)};b.prototype.removeComponentMutationObserver=function(){this.componentMutationObserver&&
(this.componentMutationObserver.disconnect(),this.componentMutationObserver=null)};b.prototype.onObserverUpdate=function(){var a=this,c=this.calcitePanel,d=c.querySelectorAll("calcite-panel"),f=c.querySelector("arcgis-charts-config-create-flow");c=c.querySelector("arcgis-sketch");var l=this.numPanels=(null===d||void 0===d?void 0:d.length)||0;if(null===d||void 0===d?0:d.length){this.removeComponentMutationObserver();var m=d[l-1];this.currentPanel!==m&&(this.currentPanel=m,this.onSetFocus(),m.addEventListener("calcitePanelDismissedChange",
function(k){a.collapsePanel(m.dismissed);m.dismissed&&(k=a.actionBar.findAction(a.activeActionName),null===k||void 0===k?void 0:k.setFocus(),k.isDestroyWidget&&a.destroyWidget(k.name))}))}else f?f!==this.currentPanel&&(this.currentPanel=f,this.observeComponentPanel(f)):c?(this.activeActionName="sketch",this.onSetFocus()):(this.removeComponentMutationObserver(),this.currentPanel=null)};b.prototype.observeComponentPanel=function(a){var c=this;this.removeComponentMutationObserver();(this.componentMutationObserver=
new MutationObserver(function(d){if(c.numPanels=(null===a||void 0===a?void 0:a.panelNumber)+1||0)c.onSetFocus()})).observe(a,{childList:!0,subtree:!0,attributeFilter:["panel-number"]})};b.prototype.onSetFocus=function(){};b.prototype.addToggleWidget=function(a){return h.__awaiter(this,void 0,void 0,function(){var c,d,f;return h.__generator(this,function(l){switch(l.label){case 0:return c=a.action,d=c.name,[4,this.createWidget(c)];case 1:return f=l.sent(),this.widgets[d]=f,[2]}})})};b.prototype.addModalWidget=
function(a){var c;return h.__awaiter(this,void 0,void 0,function(){var d,f,l,m,k,q,t,w,A=this;return h.__generator(this,function(x){switch(x.label){case 0:d=a.action;f=d.sourceAction;l=d.name;m=d.isPopoverWidget;k=f?f.name:d.name;if(q=this.activeModalWidgetName)this.actionBar.disableAction(q),this.activeModalWidgetName=null;m&&this.collapsePanel(!0);if(!l||l===q)return[3,2];null===(c=this.actionBar)||void 0===c?void 0:c.setActive(l,!0);this.activeModalWidgetName=l;return[4,this.createWidget(d)];case 1:w=
(t=x.sent())&&t.on&&t.on(["close"],function(){var y,B;A.actionBar&&(null===(y=A.actionBar)||void 0===y?void 0:y.setActive(k,!0,!1),null===(B=A.actionBar)||void 0===B?void 0:B.scheduleRender());A.activeModalWidgetName=null;w.remove();t.element&&(t.element.active=!1);setTimeout(function(){return t.destroy()},125)}),x.label=2;case 2:return[2]}})})};b.prototype.createWidget=function(a,c){return h.__awaiter(this,void 0,void 0,function(){var d,f,l,m,k,q,t,w,A,x,y,B;return h.__generator(this,function(C){switch(C.label){case 0:d=
this;f=d.isLoadingWidget;l=d.payload;m=d.panelOptions;k=d.state;q=d.selectedItems;t=d.app;w=d.heightScale;A=a.wrapper||a.name;if(f)return[3,3];this.isLoadingWidget=!0;this.loadingPanel(!0);x=a.basePath||"../wrappers/";return[4,(new Promise(function(D,F){u([""+x+A],D,F)})).then(h.__importStar)];case 1:return y=C.sent(),[4,y.createWidget({payload:l,options:m,action:a,state:k,panel:this,sourceAction:null===a||void 0===a?void 0:a.sourceAction,selectedItems:q,heightScale:w,app:t,container:c})];case 2:return B=
C.sent(),this.panelOptions=null,this.isLoadingWidget=!1,this.loadingPanel(!1),[2,B];case 3:return[2]}})})};return b=h.__decorate([r.subclass("")],b)}(z.default);n.default=z})},"app/widgets/actionBars/ContextualActionBar":function(){define(["require","exports","tslib","esri/core/accessorSupport/decorators","./ActionBar"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});v=h.__importDefault(v);u=function(z){function p(g){return z.call(this,g)||this}h.__extends(p,z);p.prototype.postInitialize=
function(){z.prototype.postInitialize.call(this)};p.prototype.getActionNames=function(){return this.actions=["layerproperties layerstyles processingtemplates imagedisplayorder layerfilter effects cluster configurepopup configureattributes labels configurechart formauthoring".split(" "),["editfeatures","timeslider","sketch"],["maptools"],[]]};return p=h.__decorate([r.subclass("")],p)}(v.default);n.default=u})},"app/widgets/actionBars/ActionBar":function(){define("require exports tslib ./ActionSet ./ActionPad ../../utils/topic esri/core/accessorSupport/decorators esri/widgets/support/widget".split(" "),
function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importDefault(z);u=function(e){function b(a){return e.call(this,a)||this}h.__extends(b,e);b.prototype.postInitialize=function(){var a=this;e.prototype.postInitialize.call(this);this.container.addEventListener("calcitePopoverOpen",function(){a.hideActionPad();a.disableAction(a.activeActionName);a.actionPadActiveAction=null;a.actionPadAction=null;a.actionPadSourceAction=null})};
b.prototype.getActionNames=function(){};b.prototype.updateTips=function(a){z.default.publish("tips-show",a&&a.name)};b.prototype.handleActionClick=function(a){var c=a.selectorTarget||a.target||a.action,d=c.id;if(d){d=this.findAction(d);var f=d.isModalWidget,l=d.isPopoverWidget,m=d.isActionPadWidget,k=d.disabled;(null===d||void 0===d?0:d.isActionMenu)?this.destroyTooltip():k||(z.default.publish("action-click",d),this.hideActionPad(),this.hideModals(),this.actionPadHandle&&d.name!==this.actionPadAction&&
(this.actionPadHandle.remove(),this.actionPadHandle=null),this.updateTips(d),m?(this.actionPadAction!==d.name&&this.setActive(c,!0),this.handleActionPadClick(a)):(this.actionPadAction=null,f||l||this.setActive(c),this.emit("click",{action:d,event:a,target:c})))}};b.prototype.handleActionHover=function(a){if((a=a.selectorTarget||a.target)&&"CALCITE-ACTION"===a.tagName){var c=this.findAction(a.id);this.showTooltip(a,c)}};b.prototype.handleActionPadClick=function(a){var c=this,d=a.selectorTarget||a.target||
a.action;a=this.portal;var f=this.state,l=this.panel,m=this.findAction(d.id),k=m.name,q=m.actions;if(this.actionPadAction===k)this.closeActionPad(!0),this.actionPadSourceAction=this.actionPadAction=null,this.actionPadHandle&&(this.actionPadHandle.remove(),this.actionPadHandle=null),m.setFocus();else{this.actionPadAction=k;a=this.actionPad=new v.default({portal:a,state:f,panel:l,positionElement:d,sourceAction:m,actions:q});this.setActive(d,!0,!0);setTimeout(function(){c.destroyTooltip()},125);this.actionPadHandle&&
(this.actionPadHandle.remove(),this.actionPadHandle=null);var t=this.actionPadHandle=a.on("click",function(w){t.remove();c.actionPadHandle=null;var A=w.action;c.actionPadActiveAction=A;c.actionPadSourceAction=A.name;c.actionPad.destroy();c.actionPad=null;c.emit("click",{action:A,event:w,target:d})})}};b.prototype.onAppClick=function(a){var c=a.target;a=this.actionPad;var d=c.closest("calcite-action-pad");c=c.closest("calcite-action-bar");this.destroyTooltip();!a||d||c||(this.hideActionPad(),this.actionPadAction=
null,a&&!a.destroyed&&(a.destroy(),this.actionPad=null))};b.prototype.hideActionPad=function(){var a=this.actionPad,c=this.actionPadAction;if(a){var d=a.popover;c=document.getElementById(c);this.disableAction(c);d.open=!1;a.destroyed||(a.destroy(),this.actionPad=null)}};b.prototype.hideModals=function(){var a=this.panel.activeModalWidgetName;a&&this.disableAction(a)};b.prototype.closeActionPad=function(a){var c=this.actionPad,d=this.actionPadHandle,f=this.actionPadSourceAction;if(c){var l=c.popover&&
c.popover.open;c.actionPadActiveAction&&(l||a)&&this.destroyWidget(f);d.remove();this.actionPadHandle=null;c&&!c.destroyed&&(c.destroy(),this.actionPad=null);this.scheduleRender()}else a&&f&&this.destroyWidget(f)};b.prototype.destroyWidget=function(a){var c=this.panel;c.destroyWidget(a);c.clearPanel();c.collapsePanel(!0)};h.__decorate([p.property(),g.messageBundle("mapviewer/mapMaker")],b.prototype,"messagesMapMaker",void 0);return b=h.__decorate([p.subclass("")],b)}(r.default);n.default=u})},"app/widgets/actionBars/ActionSet":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/core/domUtils esri/widgets/Widget ../../utils/topic".split(" "),
function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importStar(z);p=h.__importDefault(p);g=h.__importDefault(g);p=function(e){function b(a){a=e.call(this,a)||this;a.actionInfos={misc:[]};a.expanded=!1;a.prefix="action";a.theme="dark";a.mode="loading";return a}h.__extends(b,e);b.prototype.postInitialize=function(){var a=this;this.handleActionHover=this.handleActionHover.bind(this);this.handleActionClick=this.handleActionClick.bind(this);this.destroyTooltip=this.destroyTooltip.bind(this);
this.portalUser=this.portal&&this.portal.user;this.actions=this.getActionNames()||[];this.loadActionGroups();this.own([g.default.subscribe("app-click",this.onAppClick.bind(this))]);this.container.addEventListener("calciteActionBarToggle",function(c){return a.expanded=a.container.expanded})};b.prototype.destroy=function(){this.getAllActions().forEach(function(a){return a.destroy()})};b.prototype.onAppClick=function(a){};b.prototype.getActionNames=function(){};b.prototype.loadActionGroups=function(){return h.__awaiter(this,
void 0,void 0,function(){var a;return h.__generator(this,function(c){switch(c.label){case 0:return a=this.actions.map(this.addActionGroup.bind(this)),[4,Promise.all(a)];case 1:return c.sent(),this.mode="loaded",this.emit("loaded"),[2]}})})};b.prototype.addActionGroup=function(a,c){return h.__awaiter(this,void 0,void 0,function(){var d=this;return h.__generator(this,function(f){return[2,new Promise(function(l){return h.__awaiter(d,void 0,void 0,function(){var m,k=this;return h.__generator(this,function(q){switch(q.label){case 0:this.actionInfos[c]=
[];if(!a||!a.length)return[3,2];m=a.map(function(t){return k.addAction(k.actionInfos[c],t)});return[4,Promise.all(m)];case 1:q.sent(),q.label=2;case 2:return l(),[2]}})})})]})})};b.prototype.addAction=function(a,c,d){var f=this;return new Promise(function(l){f.fetchAction(c).then(function(m){return h.__awaiter(f,void 0,void 0,function(){var k,q,t,w=this;return h.__generator(this,function(A){switch(A.label){case 0:k=new m.default({state:this.state,sourceAction:d,actionBar:this,active:c===this.defaultActionName,
messagesCommon:this.messagesCommon,messages:this.messagesActions});a.push(k);if(!k.isActionMenu)return[3,2];q=k.actions.map(function(x){return w.addAction(w.actionInfos.misc,x,k)});return[4,Promise.all(q)];case 1:t=A.sent(),k.actions=t,A.label=2;case 2:return l(k),[2]}})})})})};b.prototype.setActive=function(a,c,d){var f=this.container,l=a;"string"===typeof a&&(l=document.getElementById(a));if(l){var m=l.getAttribute("id");if(m=this.findAction(m)){var k=m.active;c||(a&&f.querySelectorAll(".js-action:not(.js-toggle)").forEach(function(q){return q.active=
!1}),this.getAllActions("panel").forEach(function(q){return q.active=!1}));m.active=d?!0:!k;l.active=m.active}}};b.prototype.disableAction=function(a){var c=a;"string"===typeof a&&(c=document.getElementById(a));c&&(a=c.getAttribute("id"),this.findAction(a).active=!1,c.active=!1)};b.prototype.getActive=function(){var a=this.getAllActions().filter(function(c){return c.active});return a&&a.length?a.shift():null};b.prototype.fetchAction=function(a){return h.__awaiter(this,void 0,void 0,function(){var c;
return h.__generator(this,function(d){switch(d.label){case 0:return[4,(new Promise(function(f,l){u(["./actions/"+a],f,l)})).then(h.__importStar)];case 1:return c=d.sent(),[2,c]}})})};b.prototype.findAction=function(a){var c=this.getAllActions().filter(function(d){return d.name===a||d.id===a});return c&&c.length?c.shift():null};b.prototype.handleActionClick=function(a){};b.prototype.handleActionHover=function(a){};b.prototype.onAfterCreate=function(a){var c="calcite-theme-"+this.theme,d=document.createElement("calcite-tooltip");
d.innerHTML=this.messagesCommon.expand;d.label=this.messagesCommon.expand;d.classList.add(c);d.slot="expand-tooltip";a.appendChild(d);this.actionBar=a;a=this.container;a.addEventListener("click",this.handleActionClick);a.addEventListener("mouseover",this.handleActionHover);a.addEventListener("mouseout",this.destroyTooltip)};b.prototype.expand=function(){var a=this.expanded,c=this.actionBar;c&&(c.expanded=a,this.scheduleRender())};b.prototype.hideAllOverflowMenus=function(){this.container.querySelectorAll("calcite-action-group").forEach(function(a){return a.menuOpen=
!1})};b.prototype.getAllActions=function(a){var c=this.actionInfos;a=Object.keys(c).map(function(d){return c[d]});return a=[].concat.apply([],a)};b.prototype.getAllActionGroups=function(){var a=this.actionInfos;return Object.keys(a).filter(function(c){return"misc"!==c}).map(function(c){return a[c]})};b.prototype.showTooltip=function(a,c){this.destroyTooltip();var d=c.actionBar;d=c.isActionPadWidget&&d.actionPad;if(!this.expanded&&!d){d="calcite-theme-"+this.theme;var f=this.tooltip=document.createElement("calcite-tooltip");
f.referenceElement=a;f.open=!0;f.classList.add(d);f.innerHTML=c.label||"";f.label=c.label||"";document.body.appendChild(f)}};b.prototype.destroyTooltip=function(){this.tooltip&&(z.remove(this.tooltip),this.tooltip=null)};b.prototype.render=function(){var a=this.getAllActionGroups();return a&&a.length?v.tsx("calcite-action-bar",{"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,bind:this,afterCreate:this.onAfterCreate,expanded:this.expanded},a.map(this.renderActionGroup.bind(this))):
v.tsx("div",null)};b.prototype.renderActionGroup=function(a,c){var d=this,f=this.prefix,l=this.theme,m=c===(this.actions&&this.actions.length)-1?"bottom-actions":null,k=this.actions[c+1];k=!k||!k.length;return"loaded"===this.mode?1===(null===a||void 0===a?void 0:a.length)?this.renderAction(c,a[0],0,m):m?this.renderBottomActions(a,c):v.tsx("calcite-action-group",{class:"js-action-group",key:"group-"+f+"-"+c,bind:this,afterCreate:k?this.expand:null,"intl-more":this.messagesCommon.more,slot:m},v.tsx("calcite-tooltip",
{slot:"menu-tooltip",class:"calcite-theme-"+l},this.messagesCommon.more),a.map(function(q,t){return d.renderAction(c,q,t,m)})):null};b.prototype.renderBottomActions=function(a,c){var d=this;return a.map(function(f,l){return d.renderAction(c,f,l,"bottom-actions")})};b.prototype.renderAction=function(a,c,d,f){if(c&&!c.hidden){var l=c.text,m=c.name,k=c.indicator,q=c.disabled,t=c.active,w=c.iconName,A=c.prefix,x=c.textEnabled,y=c.scale;return c.isActionMenu?this.renderActionMenu(a,c,d,f):v.tsx("calcite-action",
{id:m||"",class:"js-action",key:A+"-"+a+"-"+d,label:l||"",text:l||"",indicator:k,disabled:q,active:t,onmouseover:this.handleActionHover,textEnabled:x,scale:y,icon:w,slot:f})}return null};b.prototype.renderActionMenu=function(a,c,d,f){var l=this,m=c.text,k=c.name,q=c.scale,t=c.actions;return v.tsx("calcite-action-menu",{expanded:!0,label:k,placement:"trailing-start",scale:q,slot:f||""},v.tsx("calcite-action",{id:k||"",class:"js-action",key:k+"-"+a+"-"+d,label:m||"",text:m||"",indicator:c.indicator,
disabled:c.disabled,active:c.active,onfocus:this.handleActionHover,textEnabled:c.textEnabled,scale:q,icon:c.iconName,slot:"trigger"}),t.map(function(w,A){return l.renderAction(d,w,A,null)}))};h.__decorate([r.property(),v.messageBundle("mapviewer/common")],b.prototype,"messagesCommon",void 0);h.__decorate([r.property(),v.messageBundle("mapviewer/actions")],b.prototype,"messagesActions",void 0);h.__decorate([r.property()],b.prototype,"mode",void 0);return b=h.__decorate([r.subclass("")],b)}(p.default);
n.default=p})},"app/widgets/actionBars/ActionPad":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/core/domUtils esri/core/events ./ActionSet".split(" "),function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importStar(z);p=h.__importStar(p);g=h.__importDefault(g);u=function(e){function b(a){a=e.call(this,a)||this;a.placement="trailing-start";a.theme="dark";a.xoffset="0";a.yoffset="0";a.createContainer();return a}
h.__extends(b,e);b.prototype.postInitialize=function(){e.prototype.postInitialize.call(this);this.reposition=this.reposition.bind(this)};b.prototype.destroy=function(){e.prototype.destroy.call(this);var a=this.actionPad,c=this.popover,d=this.sourceAction;a&&z.remove(a);c&&z.remove(c);if(null===d||void 0===d?0:d.actionBar)a=d.actionBar.actionBar,null===a||void 0===a?void 0:a.removeEventListener("calciteActionBarToggle",this.reposition)};b.prototype.addFocusHandler=function(){var a=this.popover,c=this.sourceAction,
d=null===c||void 0===c?void 0:c.actionBar,f=a.querySelectorAll("calcite-action"),l=f[f.length-1],m=f[0];a.addEventListener("keydown",function(k){var q=k||window.event;if(9===(q.which||q.keyCode)){q=k.shiftKey;var t=document.activeElement;if(d&&t===l&&!q||t===m&&q)k.preventDefault(),k.stopPropagation(),d.handleActionClick({action:c})}})};b.prototype.onAfterCreate=function(a){var c=this,d=this.placement,f=this.xoffset,l=this.yoffset,m=this.popover,k=this.sourceAction,q="calcite-theme-"+this.theme;m.appendChild(a);
m.setAttribute("placement",k&&k.placement||d);m.setAttribute("x-offset",f);m.setAttribute("y-offset",l);m.classList.add(q);this.setPosition(m);var t=this.actionPad=m.querySelector("calcite-action-pad");this.own(p.on(t,"click",this.handleActionClick.bind(this)));(null===k||void 0===k?0:k.actionBar)&&k.actionBar.actionBar.addEventListener("calciteActionBarToggle",this.reposition);setTimeout(function(){m.open=!0;var w=t.querySelectorAll("calcite-action")[0];setTimeout(function(){return w.setFocus()},
50);c.addFocusHandler()},50)};b.prototype.reposition=function(){var a=this.popover;setTimeout(function(){return a.reposition()},25)};b.prototype.setPosition=function(a){var c=this.positionElement;a.referenceElement=c?c:this.createReferenceElement()};b.prototype.createReferenceElement=function(){var a=this.position.native,c=a.x;a=a.y;var d=this.referenceElement=document.createElement("div");d.style.left=c+"px";d.style.top=a+"px";d.style.width="1px";d.style.height="1px";d.style.position="absolute";
document.body.appendChild(d);return d};b.prototype.handleActionClick=function(a){var c=a.selectorTarget||a.target,d=this.findAction(c.id);d.disabled||(this.popover.open=!1,this.emit("click",{action:d,event:a,target:c}))};b.prototype.createContainer=function(){var a=this.popover=document.createElement("calcite-popover");a.label="";document.body.appendChild(a);this.container=a};b.prototype.render=function(){var a=this.getAllActionGroups(),c=this.theme;return"loaded"===this.mode?v.tsx("div",null,v.tsx("calcite-action-pad",
{class:"calcite-theme-"+c,expandDisabled:!0,expanded:!0,afterCreate:this.onAfterCreate,"intl-expand":this.messagesCommon.expand,"intl-collapse":this.messagesCommon.collapse,bind:this},a.map(this.renderActionGroup.bind(this)))):v.tsx("div",null)};b.prototype.renderAction=function(a,c,d){if(c&&!c.hidden){var f=c.name;return v.tsx("calcite-action",{id:c.id||f||"",class:"js-action",key:c.prefix+"-"+a+"-"+d,label:c.label,text:c.text||"",indicator:c.indicator,disabled:c.disabled,active:c.active,textEnabled:c.textEnabled,
scale:c.scale,icon:c.iconName})}return null};return b=h.__decorate([r.subclass("")],b)}(g.default);n.default=u})},"app/widgets/actionBars/actions/layerproperties":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,e)||this;e.name="layerproperties";e.label=e.messages.layerProps;
e.text=e.messages.layerProps;e.disabled=!0;e.isLayerAction=!0;e.iconName="sliders-horizontal";return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.own([v.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};g.prototype.onLayerSelected=function(e){this.disabled=!1;this.scheduleRender()};g.prototype.onLayerDeselected=function(e){this.disabled=
!0;this.indicator=this.active=!1;this.scheduleRender()};return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/Action":function(){define(["require","exports","tslib","esri/core/accessorSupport/decorators","esri/widgets/Widget"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});v=h.__importDefault(v);u=function(z){function p(g){var e,b,a=z.call(this,g)||this;a.name="";a.wrapper="";a.label="";a.text="";a.theme="dark";a.placement="trailing-start";
a.scale="m";a.hidden=!1;a.detached=!1;a.widthScale="m";a.heightScale="l";a.active=!1;a.disabled=!1;a.indicator=!1;a.textEnabled=!1;a.isDestroyWidget=!1;a.isActionPadWidget=!1;a.isMapWidget=!1;a.isModalWidget=!1;a.isPopoverWidget=!1;a.isActionMenu=!1;a.isLayerAction=!1;var c=a.state=null===g||void 0===g?void 0:g.state;a.messages=null===g||void 0===g?void 0:g.messages;a.messagesCommon=null===g||void 0===g?void 0:g.messagesCommon;a.portal=c.portal;a.portalUser=null===a||void 0===a?void 0:a.portal.user;
a.userRole=null===(e=null===a||void 0===a?void 0:a.portalUser)||void 0===e?void 0:e.userRole;a.map=null===(b=c.mapView)||void 0===b?void 0:b.map;a.portalItem=a.map&&a.map.portalItem;return a}h.__extends(p,z);p.prototype.loadLayer=function(g){return g&&g.load?g.load():Promise.resolve(g)};p.prototype.setFocus=function(){var g=this.actionBar.container.querySelector("calcite-action#"+this.name);g&&g.setFocus()};p.prototype.disable=function(g){this.disabled=g||!1};p.prototype.activate=function(g){void 0===
g&&(g=!1);this.active=g};p.prototype.indicate=function(g){void 0===g&&(g=!1);this.indicator=g};p.prototype.actionCallback=function(g){this.active=!0};h.__decorate([r.property()],p.prototype,"messages",void 0);h.__decorate([r.property()],p.prototype,"messagesCommon",void 0);h.__decorate([r.property()],p.prototype,"active",void 0);h.__decorate([r.property()],p.prototype,"disabled",void 0);h.__decorate([r.property()],p.prototype,"indicator",void 0);h.__decorate([r.property()],p.prototype,"textEnabled",
void 0);return p=h.__decorate([r.subclass("")],p)}(v.default);n.default=u})},"app/widgets/actionBars/actions/layerstyles":function(){define("require exports tslib ./Action ../../../utils/layerUtils ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importStar(v);z=h.__importDefault(z);u=function(g){function e(b){b=g.call(this,b)||this;b.name="layerstyles";b.label=b.messages.layerStyles;
b.text=b.messages.layerStyles;b.hidden=!1;b.disabled=!0;b.isLayerAction=!0;b.iconName="shapes";return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([z.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),z.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),z.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};e.prototype.onLayerSelected=function(b){var a=this,c=b.layer;this.loadLayer(c).then(function(){a.hidden=!a.canModify(c);
a.disabled=!1;a.scheduleRender()})};e.prototype.canModify=function(b){var a,c=v.isDynamicLayer(b),d=v.isMapImageLayer(b),f="geo-rss"===(null===b||void 0===b?void 0:b.type),l=b.layer?v.supportsModification(b):!0;c=b.layer&&!b.sublayers&&d&&c&&l&&"Feature Layer"===(null===(a=null===b||void 0===b?void 0:b.sourceJSON)||void 0===a?void 0:a.type);a=v.isImageryLayer(b);d=v.isLikeFeatureLayer(b)||"wfs"===b.type;return b&&!b.isTable&&(d||c||f||a||"ogc-feature"===(null===b||void 0===b?void 0:b.type))};e.prototype.onLayerDeselected=
function(b){this.hidden=!1;this.disabled=!0;this.indicator=this.active=!1;this.scheduleRender()};return e=h.__decorate([p.subclass("")],e)}(r.default);n.default=u})},"app/utils/layerUtils":function(){define(["require","exports","tslib","esri/request","esri/layers/support/arcgisLayerUrl"],function(u,n,h,r,v){function z(a,c){return(a.supportedSpatialReferences||[]).find(function(d){return d.equals(c)})?!0:!1}function p(a){var c=a.layers,d=a.popupTemplate;a.popupEnabled&&!d&&a.createPopupTemplate&&(a.popupTemplate=
a.createPopupTemplate());(null===c||void 0===c?0:c.length)&&c.forEach(function(f){return p(f)})}function g(a){var c,d,f={geojson:1,csv:1},l=(null===a||void 0===a?void 0:a.layer)||a;l=l&&l.url&&"Feature Layer"===(null===(c=null===l||void 0===l?void 0:l.sourceJSON)||void 0===c?void 0:c.type);c=null===a||void 0===a?void 0:a.isTable;var m=(null===(d=null===a||void 0===a?void 0:a.layer)||void 0===d?void 0:d.type)||(null===a||void 0===a?void 0:a.type);return a.url&&m in f||l||c}function e(a){return(a=(a&&
a.layer||a).type)&&("map-layer"===a||"map-image"===a||"tile"===a)}function b(a){return a&&a.get&&a.get("capabilities.exportMap.supportsDynamicLayers")||!1}Object.defineProperty(n,"__esModule",{value:!0});n.isSupportedChartsLayer=n.fetchUpdates=n.isImageryLayerRF=n.isImageryLayer=n.isMapImageLayer=n.supportsData=n.supportsExportTiles=n.supportsEditing=n.supportsModification=n.supportsExportMap=n.supportsQuery=n.isTilesOnly=n.hasLiveData=n.canCluster=n.isTrackViewLayer=n.isBasemapLayer=n.isLikeFeatureLayer=
n.isDynamicLayer=n.getCacheMaxAge=n.checkPopup=n.checkWMTSSpatialReferences=n.isSameSpatialReference=void 0;r=h.__importDefault(r);v=h.__importStar(v);n.isSameSpatialReference=function(a,c){var d=(a||{}).tileInfo,f={};return"wmts"===a.type&&z(a,c)?!0:!(a.type in f)&&c&&(null===d||void 0===d?0:d.spatialReference)?c.equals(d.spatialReference):"map-image"!==a.type&&"imagery"!==a.type&&"wmts"!==a.type||!a.spatialReference?!0:c.equals(a.spatialReference)};n.checkWMTSSpatialReferences=z;n.checkPopup=p;
n.getCacheMaxAge=function(a){var c=a.sourceJSON,d=a.portalItem;a=null===d||void 0===d?void 0:d.isHostedService;d=(null===d||void 0===d?void 0:d.advancedSettings)||{};c=(c=(null===c||void 0===c?void 0:c.cacheMaxAge)||(null===d||void 0===d?void 0:d.cacheMaxAge))?parseInt(c):a?30:6;return Math.ceil(c/60*100)/100};n.isDynamicLayer=function(a){var c=a&&a.layer;return e(a)?c?b(c):b(a):!1};n.isLikeFeatureLayer=g;n.isBasemapLayer=function(a,c){c=c.basemap;return c.baseLayers.concat(c.referenceLayers).flatten(function(d){return(null===
d||void 0===d?void 0:d.allSublayers)||(null===d||void 0===d?void 0:d.sublayers)||(null===d||void 0===d?void 0:d.layers)}).includes(a)};n.isTrackViewLayer=function(a){return(a=a.portalItem)&&((null===a||void 0===a?void 0:a.typeKeywords)||[]).find(function(c){return"Location Tracking Service"===c})||!1};n.canCluster=function(a){var c=a.geometryType,d=a.type,f=a.renderer;f=f&&f.type;return!("feature"===d&&!a.url)&&"point"===c&&"stream"!==d&&"heatmap"!==f&&"pie-chart"!==f};n.hasLiveData=function(a){var c;
return(null===(c=null===a||void 0===a?void 0:a.timeInfo)||void 0===c?0:c.hasLiveData)?!0:!1};n.isTilesOnly=function(a){var c;a=a.sourceJSON;return-1<(null===(c=null===a||void 0===a?void 0:a.capabilities)||void 0===c?void 0:c.toLowerCase().split(",").map(function(d){return d.trim()}).indexOf("tilesonly"))||!1};n.supportsQuery=function(a){return(a=a&&a.layer||a)&&(a&&a.get&&a.get("capabilities.operations.supportsQuery")||!1)};n.supportsExportMap=function(a){return a&&(a&&a.get&&a.get("capabilities.operations.supportsExportMap")||
!1)};n.supportsModification=function(a){return a&&(a&&a.get?a.get("capabilities.exportMap.supportsModification"):!0)};n.supportsEditing=function(a){return a&&(a&&a.get&&a.get("capabilities.operations.supportsEditing")||!1)};n.supportsExportTiles=function(a){return a&&a.get&&a.get("capabilities.exportTiles")||!1};n.supportsData=function(a){return a&&a.get&&a.get("capabilities.operations.supportsIdentify")||!1};n.isMapImageLayer=e;n.isImageryLayer=function(a){var c={imagery:1,"imagery-tile":1};return(a=
(a&&a.layer||a).type)&&a in c};n.isImageryLayerRF=function(a){var c={imagery:1};return(a=(a&&a.layer||a).type)&&a in c};n.fetchUpdates=function(a){return r.default(a.url,{responseType:"json",query:{returnUpdates:!0,f:"json"}}).then(function(c){return c.data})};n.isSupportedChartsLayer=function(a){var c,d,f,l,m,k,q,t=(null===(c=null===a||void 0===a?void 0:a.layer)||void 0===c?void 0:c.type)||(null===a||void 0===a?void 0:a.type);t=a.url&&"csv"===t;c=!0===(null===(f=null===(d=a.portalItem)||void 0===
d?void 0:d.typeKeywords)||void 0===f?void 0:f.includes("Location Tracking Service"));f=void 0!==a.url&&!0===v.isHostedAgolService(a.url);d=!!f&&void 0===(null===(l=null===a||void 0===a?void 0:a.sourceJSON)||void 0===l?void 0:l.sqlParserVersion)&&10.91<=a.version;l=f&&void 0===(null===(m=null===a||void 0===a?void 0:a.sourceJSON)||void 0===m?void 0:m.sqlParserVersion)||10.91<=a.version&&!0===(null===(q=null===(k=null===a||void 0===a?void 0:a.sourceJSON)||void 0===k?void 0:k.sqlParserVersion)||void 0===
q?void 0:q.includes("PG_"));m=g(a)&&!t&&(l||d);return void 0!==a&&m&&!c}})},"app/widgets/actionBars/actions/processingtemplates":function(){define("require exports tslib ./Action ../../../utils/layerUtils ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importStar(v);z=h.__importDefault(z);u=function(g){function e(b){b=g.call(this,b)||this;b.name="processingtemplates";b.label=
b.messages.processingTemplates;b.text=b.messages.processingTemplates;b.hidden=!1;b.disabled=!0;b.isLayerAction=!0;b.iconName="processing-templates";return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([z.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),z.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};e.prototype.onLayerSelected=function(b){var a=this,c=b.layer;this.loadLayer(c).then(function(){a.hidden=!a.canModify(c);a.disabled=!1})};
e.prototype.canModify=function(b){var a=v.isImageryLayerRF(b);return b&&!b.isTable&&a};e.prototype.onLayerDeselected=function(b){this.hidden=!1;this.disabled=!0;this.indicator=this.active=!1};return e=h.__decorate([p.subclass("")],e)}(r.default);n.default=u})},"app/widgets/actionBars/actions/imagedisplayorder":function(){define("require exports tslib ./Action ../../../utils/layerUtils ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,
"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importStar(v);z=h.__importDefault(z);u=function(g){function e(b){b=g.call(this,b)||this;b.name="imagedisplayorder";b.label=b.messages.imageDisplayOrder;b.text=b.messages.imageDisplayOrder;b.hidden=!1;b.disabled=!0;b.isLayerAction=!0;b.iconName="feature-display-order";return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([z.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),z.default.subscribe("layer-deselected",
this.onLayerDeselected.bind(this))])};e.prototype.onLayerSelected=function(b){var a=this,c=b.layer;this.loadLayer(c).then(function(){a.hidden=!a.canModify(c);a.disabled=!1})};e.prototype.canModify=function(b){var a=v.isImageryLayerRF(b);return b&&!b.isTable&&a&&b.fields&&0<b.fields.length};e.prototype.onLayerDeselected=function(b){this.disabled=this.hidden=!0;this.indicator=this.active=!1};return e=h.__decorate([p.subclass("")],e)}(r.default);n.default=u})},"app/widgets/actionBars/actions/layerfilter":function(){define("require exports tslib ./Action ../../../utils/layerUtils ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),
function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importStar(v);z=h.__importDefault(z);u=function(g){function e(b){b=g.call(this,b)||this;b.name="layerfilter";b.label=b.messages.layerFilter;b.text=b.messages.layerFilter;b.hidden=!1;b.disabled=!0;b.isLayerAction=!0;b.isDestroyWidget=!0;b.iconName="filter";return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([z.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),
z.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),z.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};e.prototype.onLayerSelected=function(b){b=b.layer;this.disabled=!1;this.hidden=!this.canModify(b);this.scheduleRender()};e.prototype.onLayerDeselected=function(b){this.hidden=!1;this.disabled=!0;this.indicator=this.active=!1;this.scheduleRender()};e.prototype.canModify=function(b){var a,c,d,f,l,m=this.isMapImageLayer(b);m=b.layer&&!b.sublayers&&m&&"Feature Layer"===
(null===(a=null===b||void 0===b?void 0:b.sourceJSON)||void 0===a?void 0:a.type)&&v.isDynamicLayer(b);a="tile"===(null===(c=null===b||void 0===b?void 0:b.layer)||void 0===c?void 0:c.type)||"tile"===(null===b||void 0===b?void 0:b.type);c="wms"===(null===(d=null===b||void 0===b?void 0:b.layer)||void 0===d?void 0:d.type)||"wms"===(null===b||void 0===b?void 0:b.type);d="wfs"===(null===b||void 0===b?void 0:b.type);var k=v.isLikeFeatureLayer(b),q="Annotation Layer"===(null===(f=null===b||void 0===b?void 0:
b.sourceJSON)||void 0===f?void 0:f.type)||"Annotation SubLayer"===(null===(l=null===b||void 0===b?void 0:b.sourceJSON)||void 0===l?void 0:l.type);f=b.hasOwnProperty("networkLink")||"kml"===b.type;l=m&&v.supportsModification(b);var t=this.isMosaicImageryLayer(b);return b&&!a&&!c&&!q&&!f&&(k||d||m||!1===l)||t};e.prototype.isMapImageLayer=function(b){return(b=(b&&b.layer||b).type)&&"map-image"===b};e.prototype.isMosaicImageryLayer=function(b){var a,c=b&&b.layer||b;b=c.type;c=c.capabilities;return b&&
"imagery"===b&&(null===(a=null===c||void 0===c?void 0:c.operations)||void 0===a?void 0:a.supportsQuery)};return e=h.__decorate([p.subclass("")],e)}(r.default);n.default=u})},"app/widgets/actionBars/actions/effects":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators ../../../utils/layerUtils".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);p=h.__importStar(p);u=
function(g){function e(b){b=g.call(this,b)||this;b.name="effects";b.label=b.messages.effects;b.text=b.messages.effects;b.disabled=!0;b.hidden=!1;b.iconName="effects";b.isLayerAction=!0;b.isDestroyWidget=!0;return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([v.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};e.prototype.onLayerSelected=function(b){var a=this,c=b.layer;this.disabled=
!1;this.loadLayer(c).then(function(){a.hidden=!a.canModify(c);a.disabled=!1})};e.prototype.onLayerDeselected=function(b){this.disabled=!0;this.indicator=this.active=this.hidden=!1};e.prototype.canModify=function(b){var a=b.layer?p.supportsModification(b):!0,c="feature"===(null===b||void 0===b?void 0:b.type)&&!(null===b||void 0===b?0:b.url)||"stream"===(null===b||void 0===b?void 0:b.type);return!b.isTable&&!c&&(null===b||void 0===b?void 0:b.hasOwnProperty("blendMode"))&&a};return e=h.__decorate([z.subclass("")],
e)}(r.default);n.default=u})},"app/widgets/actionBars/actions/cluster":function(){define("require exports tslib ./Action ../../../utils/topic ../../../utils/layerUtils esri/core/accessorSupport/decorators esri/core/watchUtils".split(" "),function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importStar(z);g=h.__importStar(g);u=function(e){function b(a){a=e.call(this,a)||this;a.name="cluster";a.hidden=!1;a.disabled=!0;a.label=
a.messages.cluster;a.text=a.messages.cluster;a.isLayerAction=!0;a.iconName="clustering";return a}h.__extends(b,e);b.prototype.postInitialize=function(){this.own([v.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};b.prototype.onLayerSelected=function(a){var c=this,d;a=a.layer;this.canCluster(a);this.selectedLayer=a;null===(d=this.selectedLayerChange)||
void 0===d?void 0:d.remove();this.selectedLayerChange=g.watch(this.selectedLayer,"renderer",function(){return c.canCluster(c.selectedLayer)})};b.prototype.onLayerDeselected=function(a){var c;this.hidden=!1;this.disabled=!0;this.indicator=this.active=!1;this.selectedLayer=null;null===(c=this.selectedLayerChange)||void 0===c?void 0:c.remove();this.scheduleRender()};b.prototype.canCluster=function(a){this.hidden=!z.canCluster(a);this.disabled=!1;this.scheduleRender()};return b=h.__decorate([p.subclass("")],
b)}(r.default);n.default=u})},"esri/core/watchUtils":function(){define("exports ./deprecate ./events ./lang ./Logger ./promiseUtils".split(" "),function(u,n,h,r,v,z){function p(k,q,t,w){var A=Array.isArray(q)?q:q.includes(",")?q.split(","):[q];q=k.watch(q,t,w);for(const x of A)A=x.trim().replace(m,"$1"),w=k.get(A),t.call(k,w,w,A,k);return q}function g(k,q,t,w,A){A=k.watch(q,(y,B,C,D)=>{if(!t||t(y))null==w?void 0:w.call(k,y,B,C,D)},A);if(Array.isArray(q))for(var x of q){const y=k.get(x);t&&t(y)&&(null==
w?void 0:w.call(k,y,y,q,k))}else x=k.get(q),t&&t(x)&&(null==w?void 0:w.call(k,x,x,q,k));return A}function e(k,q,t,w,A){function x(){D&&(D.remove(),D=null)}const y="function"===typeof w?w:null,B="object"===typeof w?w:null;"boolean"===typeof w&&(A=w);let C=!1,D;const F=z.createDeferred();z.onAbort(B,()=>{x();F.reject(z.createAbortError())});w={then:F.promise.then.bind(F.promise),catch:F.promise.catch.bind(F.promise),remove:x};Object.freeze(w);D=g(k,q,t,(E,G,O,H)=>{C=!0;x();y&&y.call(k,E,G,O,H);F.resolve({value:E,
oldValue:G,propertyName:O,target:H})},A);C&&x();return w}function b(k){return!!k}function a(k){return!k}function c(k){return!0===k}function d(k){return!1===k}function f(k){return void 0!==k}function l(k){return void 0===k}n.deprecatedModule(v.getLogger("esri.core.watchUtils"),"esri/core/watchUtils",{replacement:"esri/core/reactiveUtils",warnOnce:!0,version:"4.24"});const m=/\?(\.|$)/g;u.init=p;u.on=function(k,q,t,w,A,x,y){function B(F){const E=C[F];E&&(x&&x(E.target,F,k,t),E.handle.remove(),delete C[F])}
const C={},D=p(k,q,(F,E,G)=>{B(G);h.isEventTarget(F)&&(C[G]={handle:h.on(F,t,w),target:F},A&&A(F,G,k,t))},y);return{remove(){D.remove();for(const F in C)B(F)}}};u.once=function(k,q,t,w){return e(k,q,null,t,w)};u.pausable=function(k,q,t,w){let A=!1;const x=k.watch(q,(y,B,C,D)=>{A||t.call(k,y,B,C,D)},w);return{remove(){x.remove()},pause(){A=!0},resume(){A=!1}}};u.watch=function(k,q,t,w){return k.watch(q,t,w)};u.when=function(k,q,t,w){return g(k,q,b,t,w)};u.whenDefined=function(k,q,t,w){return g(k,q,
f,t,w)};u.whenDefinedOnce=function(k,q,t,w){return e(k,q,f,t,w)};u.whenEqual=function(k,q,t,w,A){return g(k,q,x=>r.equals(t,x),w,A)};u.whenEqualOnce=function(k,q,t,w,A){return e(k,q,x=>r.equals(t,x),w,A)};u.whenFalse=function(k,q,t,w){return g(k,q,d,t,w)};u.whenFalseOnce=function(k,q,t,w){return e(k,q,d,t,w)};u.whenNot=function(k,q,t,w){return g(k,q,a,t,w)};u.whenNotOnce=function(k,q,t,w){return e(k,q,a,t,w)};u.whenOnce=function(k,q,t,w){return e(k,q,b,t,w)};u.whenTrue=function(k,q,t,w){return g(k,
q,c,t,w)};u.whenTrueOnce=function(k,q,t,w){return e(k,q,c,t,w)};u.whenUndefined=function(k,q,t,w){return g(k,q,l,t,w)};u.whenUndefinedOnce=function(k,q,t,w){return e(k,q,l,t,w)};u.whenValidOnce=e;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"app/widgets/actionBars/actions/configurepopup":function(){define("require exports tslib ./Action ../../../utils/topic ../../../utils/layerUtils esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,
z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importStar(z);u=function(g){function e(b){b=g.call(this,b)||this;b.name="configurepopup";b.hidden=!1;b.disabled=!0;b.label=b.messages.configurePopup;b.text=b.messages.configurePopup;b.isLayerAction=!0;b.iconName="configure-popup";return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([v.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-selected",
this.onLayerSelected.bind(this)),v.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};e.prototype.onLayerSelected=function(b){b=this.canModify(b.layer);this.disabled=!1;this.hidden=!b;this.scheduleRender()};e.prototype.onLayerDeselected=function(b){this.hidden=!1;this.disabled=!0;this.indicator=this.active=!1;this.scheduleRender()};e.prototype.canModify=function(b){var a,c,d=z.supportsQuery(b)||b.queryable,f=(null===b||void 0===b?0:b.layer)?z.supportsData(b.layer):!1,l=z.isMapImageLayer(b);
f=b.layer&&!b.sublayers&&l&&(d||f)&&"Feature Layer"===(null===(a=null===b||void 0===b?void 0:b.sourceJSON)||void 0===a?void 0:a.type);a="wms"===(null===(c=b.layer)||void 0===c?void 0:c.type)&&d;c=z.isLikeFeatureLayer(b)||"ogc-feature"===b.type||"wfs"===b.type;d=z.isImageryLayer(b)&&!b.isTable;return b&&(c||f||a||d)};e.prototype.canConfigure=function(){return!0};return e=h.__decorate([p.subclass("")],e)}(r.default);n.default=u})},"app/widgets/actionBars/actions/configureattributes":function(){define("require exports tslib ./Action ../../../utils/topic ../../../utils/layerUtils esri/core/accessorSupport/decorators".split(" "),
function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importStar(z);u=function(g){function e(b){b=g.call(this,b)||this;b.name="configureattributes";b.hidden=!1;b.disabled=!0;b.label=b.messages.configureAttributes;b.text=b.messages.configureAttributes;b.isLayerAction=!0;b.iconName="feature-details";return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([v.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),
v.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};e.prototype.onLayerSelected=function(b){this.hidden=!this.canModify(b.layer);this.disabled=!1;this.scheduleRender()};e.prototype.onLayerDeselected=function(b){this.hidden=!1;this.disabled=!0;this.indicator=this.active=!1;this.scheduleRender()};e.prototype.canModify=function(b){var a,c=z.supportsQuery(b),d=(null===b||void 0===b?0:b.layer)?z.supportsData(b.layer):
!1,f=z.isMapImageLayer(b);c=b.layer&&!b.sublayers&&f&&(c||d)&&"Feature Layer"===(null===(a=null===b||void 0===b?void 0:b.sourceJSON)||void 0===a?void 0:a.type);a=z.isLikeFeatureLayer(b)||"ogc-feature"===b.type||"wfs"===b.type;d=z.isImageryLayer(b)&&!b.isTable;return b&&(a||c||d)};e.prototype.canConfigure=function(){return!0};return e=h.__decorate([p.subclass("")],e)}(r.default);n.default=u})},"app/widgets/actionBars/actions/sketch":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators esri/core/watchUtils".split(" "),
function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);p=h.__importStar(p);u=function(g){function e(b){b=g.call(this,b)||this;b.name="sketch";b.disabled=!1;b.label=b.messages.addSketch;b.text=b.messages.addSketch;b.isDestroyWidget=!0;b.heightScale="s";b.widthScale="m";b.iconName="pencil-mark";b.hidden=!1;return b}h.__extends(e,g);e.prototype.postInitialize=function(){var b=this,a=this.state.map.webMap.allLayers;p.whenFalseOnce(this.state.mapView,
"updating",function(){return h.__awaiter(b,void 0,void 0,function(){return h.__generator(this,function(c){this.updateSketchLabel();return[2]})})});this.own([v.default.subscribe("mapView_changed",function(){b.active=!1;b.scheduleRender()}),a.on("change",function(){return b.updateSketchLabel()})])};e.prototype.onLayerSelected=function(b){var a=this,c=b.layer;this.loadLayer(c).then(function(){return a.canModify(c)})};e.prototype.canModify=function(b){var a=this,c=!0;b?b&&(c=this.isClassicMapNotesLayer(b)):
c=!this.state.map.webMap.allLayers.filter(function(d){return"map-notes"===(null===d||void 0===d?void 0:d.type)}).every(function(d){return a.isClassicMapNotesLayer(d)});this.disabled=c;this.scheduleRender();return!c};e.prototype.updateSketchLabel=function(){var b=this,a=this.state.map.webMap.allLayers.find(function(c){return"map-notes"===c.type&&!b.isClassicMapNotesLayer(c)});this.label=a?this.messages.sketch:this.messages.addSketch;this.text=a?this.messages.sketch:this.messages.addSketch;this.actionBar.scheduleRender()};
e.prototype.isClassicMapNotesLayer=function(b){return"map-notes"===(null===b||void 0===b?void 0:b.type)&&!(null===b||void 0===b?0:b.get("capabilities.operations.supportsMapNotesEditing"))};return e=h.__decorate([z.subclass("")],e)}(r.default);n.default=u})},"app/widgets/actionBars/actions/configurechart":function(){define("require exports tslib ./Action ../../../utils/topic ../../../utils/layerUtils esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",
{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importStar(z);u=function(g){function e(b){b=g.call(this,b)||this;b.name="configurechart";b.label=b.messages.configureChart;b.text=b.messages.configureChart;b.isLayerAction=!0;b.isDestroyWidget=!0;b.hidden=!1;b.disabled=!0;b.iconName="chart-gear";return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([v.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),
v.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};e.prototype.onLayerSelected=function(b){var a=this,c=b.layer;this.loadLayer(c).then(function(){var d=a.canModify(c);a.hidden=!d;a.disabled=!1;a.scheduleRender()})};e.prototype.onLayerDeselected=function(){this.hidden=!1;this.disabled=!0;this.indicator=this.active=!1;this.scheduleRender()};e.prototype.canModify=function(b){return z.isSupportedChartsLayer(b)};e.prototype.canConfigure=function(){return!0};return e=h.__decorate([p.subclass("")],
e)}(r.default);n.default=u})},"app/widgets/actionBars/actions/formauthoring":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,e)||this;e.canEdit=!1;e.name="formauthoring";e.label=e.messages.forms;e.text=e.messages.forms;e.disabled=!0;e.hidden=e.isEmbedded();e.isModalWidget=
!0;e.iconName="smart-form";e.canEdit=!0;return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.own([v.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),v.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};g.prototype.onLayerSelected=function(e){e=e.layer;this.disabled=!1;this.hidden=!this.canModify(e);this.scheduleRender()};g.prototype.onLayerDeselected=function(e){this.hidden=
this.isEmbedded();this.disabled=!0;this.indicator=this.active=!1;this.scheduleRender()};g.prototype.canModify=function(e){return!this.isEmbedded()&&this.canEdit&&this.isEditable(e)};g.prototype.canEditFeatures=function(){var e=this.portalUser,b=null===e||void 0===e?void 0:e.userRole;return e&&(null===b||void 0===b?void 0:b.canEditFeatures())};g.prototype.isEmbedded=function(){var e=this.state.config.urlParameters;return null===e||void 0===e?void 0:e.embedded};g.prototype.isEditable=function(e){var b=
e.editingEnabled;return"feature"===e.type&&("undefined"===typeof b||b)&&!0===e.get("capabilities.operations.supportsEditing")};return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/labels":function(){define("require exports tslib ./Action ../../../utils/layerUtils ../../../utils/topic esri/core/accessorSupport/decorators esri/core/watchUtils".split(" "),function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);
v=h.__importStar(v);z=h.__importDefault(z);g=h.__importStar(g);u=function(e){function b(a){a=e.call(this,a)||this;a.name="labels";a.label=a.messages.lables;a.text=a.messages.lables;a.hidden=!1;a.disabled=!0;a.isLayerAction=!0;a.iconName="label";return a}h.__extends(b,e);b.prototype.postInitialize=function(){this.own([z.default.subscribe("chart-selected",this.onLayerSelected.bind(this)),z.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),z.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this))])};
b.prototype.onLayerSelected=function(a){var c=this,d;a=a.layer;this.hidden=!(this.canLabel()&&this.canModify(a));this.disabled=!1;this.selectedLayer=a;null===(d=this.selectedLayerChange)||void 0===d?void 0:d.remove();this.selectedLayerChange=g.watch(this.selectedLayer,"renderer",function(){c.hidden=!c.canModify(c.selectedLayer);c.scheduleRender()});this.scheduleRender()};b.prototype.onLayerDeselected=function(a){var c;this.hidden=!1;this.disabled=!0;this.indicator=this.active=!1;this.selectedLayer=
null;null===(c=this.selectedLayerChange)||void 0===c?void 0:c.remove();this.scheduleRender()};b.prototype.canModify=function(a){var c,d=v.isDynamicLayer(a),f=v.isMapImageLayer(a);d=a.layer&&!a.sublayers&&f&&d&&"Feature Layer"===(null===(c=null===a||void 0===a?void 0:a.sourceJSON)||void 0===c?void 0:c.type);c=v.isLikeFeatureLayer(a)||"ogc-feature"===a.type||"wfs"===a.type;return a&&!a.isTable&&(c||d)};b.prototype.canLabel=function(){return!0};return b=h.__decorate([p.subclass("")],b)}(r.default);n.default=
u})},"app/widgets/actionBars/actions/search":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,e)||this;e.name="search";e.label=e.messages.search;e.text=e.messages.search;e.disabled=!1;e.isMapWidget=!0;e.iconName="search";e.textEnabled=!0;return e}h.__extends(g,p);g.prototype.postInitialize=
function(){var e=this;this.own([v.default.subscribe("mapView_changed",function(){e.active=!1;e.scheduleRender()})])};return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/measurement":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,
e)||this;e.name="measurement";e.label=e.messages.measure;e.text=e.messages.measure;e.isMapWidget=!0;e.iconName="measure";e.textEnabled=!0;return e}h.__extends(g,p);g.prototype.postInitialize=function(){var e=this;this.own([v.default.subscribe("mapView_changed",function(){e.active=!1;e.scheduleRender()})])};return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/directions":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),
function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,e)||this;e.name="directions";e.label=e.messages.directions;e.text=e.messages.directions;e.active=!1;e.disabled=e.canUseDirection();e.hidden=e.canUseDirection();e.isDestroyWidget=!0;e.heightScale="s";e.widthScale="m";e.iconName="road-sign";e.textEnabled=!0;return e}h.__extends(g,p);g.prototype.canUseDirection=function(){var e,b,a=this.portal,
c=this.portalUser,d=this.userRole,f=(null===(b=null===(e=null===a||void 0===a?void 0:a.helperServices)||void 0===e?void 0:e.route)||void 0===b?void 0:b.url)||!1;e=a.urlKey&&a.customBaseUrl||a.isPortal?!0:!1;return!f||!c||!e||e&&!d.canUseNetworkAnalysis()};g.prototype.postInitialize=function(){var e=this;this.own([v.default.subscribe("mapView_changed",function(){e.active=!1;e.scheduleRender()})])};return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/coordconversion":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),
function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,e)||this;e.name="coordinateconversion";e.label=e.messages.coordConversion;e.text=e.messages.coordConversion;e.disabled=!1;e.isMapWidget=!0;e.iconName="point";e.textEnabled=!0;return e}h.__extends(g,p);g.prototype.postInitialize=function(){var e=this;this.own([v.default.subscribe("mapView_changed",function(){e.active=!1;e.scheduleRender()})])};
return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/editfeatures":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators esri/identity/IdentityManager esri/core/watchUtils".split(" "),function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);p=h.__importDefault(p);g=h.__importStar(g);u=function(e){function b(a){a=e.call(this,a)||this;
a.canEdit=!1;a.name="editfeatures";a.label=a.messages.editFeatures;a.text=a.messages.editFeatures;a.disabled=!0;a.hidden=!0;a.iconName="pencil-square";a.canEdit=!0;a.isDestroyWidget=!0;return a}h.__extends(b,e);b.prototype.postInitialize=function(){var a=this,c=this.state.mapView;c.when(function(){a.own([c.map.allLayers.on("change",function(d){return a.hasEditableLayer(c)}),v.default.subscribe("layer-editing-toggle",function(){return a.hasEditableLayer(c)})]);a.hasEditableLayer(c)});this.own([v.default.subscribe("mapView_changed",
function(){a.active=!1;a.scheduleRender()})])};b.prototype.hasEditableLayer=function(a){var c=this;g.whenFalseOnce(a,"updating",function(){return h.__awaiter(c,void 0,void 0,function(){var d,f,l,m,k,q=this,t;return h.__generator(this,function(w){d=this.state.map;f=d.webMap;l=f.layers;(null===l||void 0===l?0:l.length)?(k=(m=null===(t=f.editableLayers)||void 0===t?void 0:t.length)&&l.some(function(A){return q.isPublic(A)}),this.hidden=this.disabled=!this.canEdit&&!k||!m):this.hidden=this.disabled=!0;
setTimeout(function(){return q.actionBar.scheduleRender()},125);return[2]})})})};b.prototype.isPublic=function(a){return(null===a||void 0===a?0:a.url)&&p.default.findCredential(null===a||void 0===a?void 0:a.url)?!1:!0};return b=h.__decorate([z.subclass("")],b)}(r.default);n.default=u})},"app/widgets/actionBars/actions/timeslider":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators esri/core/watchUtils ../../../widgets/panels/MapMaker/timesettings/timeSliderUtils".split(" "),
function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);p=h.__importStar(p);g=h.__importStar(g);u=function(e){function b(a){a=e.call(this,a)||this;a.timeSliderCreated=!1;a.name="timeslider";a.label=a.messages.time;a.text=a.messages.time;a.isMapWidget=!0;a.iconName="clock";a.disabled=!0;a.hidden=!0;a.isMapWidget=!0;a.timeSliderCreated=!1;return a}h.__extends(b,e);b.prototype.destroy=function(){e.prototype.destroy.call(this)};b.prototype.postInitialize=
function(){var a=this,c=this.state.mapView;c.when(function(){return h.__awaiter(a,void 0,void 0,function(){var d,f=this;return h.__generator(this,function(l){switch(l.label){case 0:return d=c.map,[4,d.loadAll()];case 1:return l.sent(),this.isTimeEnabledMap(),this.own([v.default.subscribe("mapView_changed",function(m){m.when(function(){f.active=!1;f.hasTemporalLayers();f.scheduleRender()})}),v.default.subscribe("layer-time-toggle",function(){f.hasTemporalLayers();f.actionBar.scheduleRender()}),v.default.subscribe("timeSlider_updated",
function(){f.hasTemporalLayers();f.timeSliderCreated||f.addTimeSlider();f.scheduleRender()}),p.watch(this,"active",function(){f.active||(f.timeSliderCreated=!1)}),p.watch(d,"widgets",function(){f.active||f.isTimeEnabledMap()}),d.allLayers.on("change",function(m){var k,q=m.added;m=m.removed;q=q&&q.slice(0).shift();m=m&&m.slice(0).shift();var t=f.isBasemapLayer(q)||f.isBasemapLayer(m);m="hide"!==(null===m||void 0===m?void 0:m.listMode)&&"hide"!==(null===q||void 0===q?void 0:q.listMode)&&"map-notes"!==
(null===q||void 0===q?void 0:q.type)&&!t;t=f.state.timeSliderWidget;q=(null===q||void 0===q?void 0:q.useViewTime)&&(null===(k=null===q||void 0===q?void 0:q.timeInfo)||void 0===k?void 0:k.fullTimeExtent);k=f.hasTemporalLayers();m&&!t&&q?f.addTimeSlider():!k&&t&&(f.actionBar.panel.processAction("timeslider"),f.timeSliderCreated=!1,f.active=!1)})]),[2]}})})})};b.prototype.isBasemapLayer=function(a){var c=this.state.mapView.map.basemap;return c.referenceLayers.concat(c.baseLayers).includes(a)};b.prototype.removeTimesliderWidget=
function(a,c){var d;c=c.map.webMap;a&&(null===(d=c.widgets)||void 0===d?0:d.timeSlider)&&(c.widgets.timeSlider=void 0)};b.prototype.isTimeEnabledMap=function(){this.hidden=this.disabled=this.hasTemporalLayers()?!1:!0;this.addTimeSlider()};b.prototype.hasTemporalLayers=function(){this.hidden=this.disabled=g.hasTemporalLayer(this.state.mapView)?!1:!0;this.removeTimesliderWidget(this.disabled,this.state);return!this.disabled};b.prototype.addTimeSlider=function(){var a=this,c=this.state.mapView.map;this.disabled||
this.state.timeSliderWidget||c.loadAll().then(function(){a.actionBar.panel.processAction("timeslider");a.timeSliderCreated=!0;a.active=!0;a.scheduleRender()})};return b=h.__decorate([z.subclass("")],b)}(r.default);n.default=u})},"app/widgets/panels/MapMaker/timesettings/timeSliderUtils":function(){define("require exports tslib esri/TimeExtent esri/TimeInterval esri/support/timeUtils".split(" "),function(u,n,h,r,v,z){function p(t){return(t=t.map)?(t.allLayers||[]).filter(function(w){var A;return(null===
w||void 0===w?void 0:w.useViewTime)&&(null===(A=null===w||void 0===w?void 0:w.timeInfo)||void 0===A?void 0:A.fullTimeExtent)}):!1}function g(t){return h.__awaiter(this,void 0,void 0,function(){var w,A,x,y,B,C,D;return h.__generator(this,function(F){switch(F.label){case 0:return w=q(t),[4,m(t)];case 1:return A=F.sent(),x=null===w||void 0===w?void 0:w.currentTimeExtent,y=c(t),B=(null===w||void 0===w?void 0:w.mode)||e(t),C=b(t),D=d(A,t),[2,{fullTimeExtent:A,currentTimeExtent:x,numStops:y,mode:B,stopDelay:C,
stopInterval:D}]}})})}function e(t){var w=q(t),A=a(t),x=null===w||void 0===w?void 0:w.currentTimeExtent;return x?(w=x.start,x=x.end,w&&(null===w||void 0===w?void 0:w.getTime())===(null===x||void 0===x?void 0:x.getTime())?t="instant":2>A?(A=q(t),a(t),t=((null===A||void 0===A?void 0:A.fullTimeExtent)||{}).start,w=new Date(0),t=(A=((null===A||void 0===A?void 0:A.currentTimeExtent)||{}).start)&&A.getTime()!==t.getTime()&&A.getTime()!==w.getTime()?"cumulative-from-end":"cumulative-from-start"):t="time-window",
t):2>A?"cumulative-from-start":"time-window"}function b(t){t=q(t);return(null===t||void 0===t?void 0:t.stopDelay)||2E3}function a(t){t=q(t);return(null===t||void 0===t?void 0:t.numThumbs)||2}function c(t){t=q(t);return(null===t||void 0===t?void 0:t.numStops)||10}function d(t,w,A){var x,y,B=c(w),C=q(w),D=(null===(x=null===C||void 0===C?void 0:C.stopInterval)||void 0===x?0:x.count)?null:null===C||void 0===C?void 0:C.stopInterval;x=(null===(y=null===C||void 0===C?void 0:C.stops)||void 0===y?0:y.length)?
C.stops:null;if(!C||A)return f(t,w,A);if(D)return{unit:D.unit,value:D.value};if(x)return{dates:x.slice(0)};if(B)return{count:B}}function f(t,w,A){var x;w=k(w);A="milliseconds"===(null===(x=null===w||void 0===w?void 0:w.interval)||void 0===x?void 0:x.unit)?!0:A;if(w&&!A)return w.interval;t=(t.end.getTime()-t.start.getTime())/10;return 31104E8<t?l(t,31104E8,"centuries"):31104E7<t?l(t,31104E7,"decades"):31104E6<t?l(t,31104E6,"years"):2592E6<t?l(t,2592E6,"months"):6048E5<t?l(t,6048E5,"weeks"):864E5<t?
l(t,864E5,"days"):36E5<t?l(t,36E5,"hours"):6E4<t?l(t,6E4,"minutes"):1E3<t?l(t,1E3,"seconds"):l(t,1,"minutes")}function l(t,w,A){return{value:Math.round(t/w),unit:A}}function m(t,w){return h.__awaiter(this,void 0,void 0,function(){var A,x,y,B,C,D,F,E;return h.__generator(this,function(G){switch(G.label){case 0:return A=p(t),x=q(t),[4,z.getTimeExtentFromLayers(A,void 0)];case 1:return y=G.sent(),B=w?null:null===x||void 0===x?void 0:x.fullTimeExtent,C=null===B||void 0===B?void 0:B.start,D=null===B||
void 0===B?void 0:B.end,F=C===D,E=new r.default({start:new Date(C||y.start||Date.now()),end:new Date(D||y.end.getTime()+(F?6E4:0)||Date.now())}),E.start=new Date(new Date(E.start.getFullYear(),E.start.getMonth(),E.start.getDate(),E.start.getHours(),E.start.getMinutes(),0,0)),E.end=new Date(new Date(E.end.getFullYear(),E.end.getMonth(),E.end.getDate(),E.end.getHours(),E.end.getMinutes(),0,0)),E.start>E.end&&(E=new r.default({start:y.start,end:y.end})),[2,E]}})})}function k(t){t=p(t);if(t.length){var w=
t.items.shift().timeInfo;t.some(function(A){var x=A.timeInfo;if(w&&x){var y=w?JSON.stringify(w.toJSON()):null;x=x?JSON.stringify(x.toJSON()):null;y=y===x}else y=!1;return w=y?A.timeInfo:null})}return w}function q(t){t=t.map.widgets;return null===t||void 0===t?void 0:t.timeSlider}Object.defineProperty(n,"__esModule",{value:!0});n.getTimeSlider=n.getTimeInfo=n.fullTimeExtentContainsLayerTimeExtent=n.getFullTimeExtent=n.findClosestThumbIndex=n.toInterval=n.getTimeInterval=n.getNumStops=n.getStopDelay=
n.getMode=n.getTimeSliderProperties=n.getTimeSettingsFromView=n.getTemporalLayers=n.hasTemporalLayer=void 0;r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importStar(z);n.hasTemporalLayer=function(t){return(t=t.map)?(t.allLayers||[]).some(function(w){var A;return"wms"!==(null===w||void 0===w?void 0:w.type)&&(null===w||void 0===w?void 0:w.useViewTime)&&(null===(A=null===w||void 0===w?void 0:w.timeInfo)||void 0===A?void 0:A.fullTimeExtent)}):!1};n.getTemporalLayers=p;n.getTimeSettingsFromView=
g;n.getTimeSliderProperties=function(t){return h.__awaiter(this,void 0,void 0,function(){var w,A,x,y,B,C,D;return h.__generator(this,function(F){switch(F.label){case 0:return w=q(t),[4,g(t)];case 1:A=F.sent();x=A.fullTimeExtent;y=A.stopDelay;B=(null===w||void 0===w?void 0:w.mode)||A.mode;var E=A.currentTimeExtent;F=A.mode;var G=A.fullTimeExtent;if(E){var O=E.start;E=E.end;if("cumulative-from-start"===F)var H=E;else if("cumulative-from-end"===F)var K=O;else"instant"===F?H=K=O:(K=O||G.start,H=E||G.end)}C=
K||H?new r.default({start:K,end:H}):null;K=A.stopInterval;H={count:A.numStops};if(K&&K.unit)H={interval:new v.default({unit:K.unit,value:K.value})};else if(null===K||void 0===K?0:K.dates)H={dates:K.dates.splice(0)};D=H;return[2,{loop:!0,fullTimeExtent:x,playRate:y,stops:D,mode:B,timeExtent:C}]}})})};n.getMode=e;n.getStopDelay=b;n.getNumStops=c;n.getTimeInterval=d;n.toInterval=f;n.findClosestThumbIndex=function(t,w){w=q(w).values||[];var A=(null===w||void 0===w?0:w.length)?w[0]:null;if(t<A)return 0;
for(var x=1;x<w.length;x++){if(w[x]>=t)return t-A<w[x]-t?x-1:x;if(x<w.length-1)A=w[x];else return x}};n.getFullTimeExtent=m;n.fullTimeExtentContainsLayerTimeExtent=function(t,w){return!0};n.getTimeInfo=k;n.getTimeSlider=q})},"app/widgets/actionBars/actions/table":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);
u=function(p){function g(e){e=p.call(this,e)||this;e.name="table";e.label=e.messages.showTable;e.text=e.messages.showTable;e.disabled=!0;e.iconName="table";return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.own([v.default.subscribe("table-selected",this.onTableSelected.bind(this)),v.default.subscribe("table-deselected",this.onTableDeselected.bind(this))])};g.prototype.onTableSelected=function(e){this.disabled=!1;this.scheduleRender()};g.prototype.onTableDeselected=function(e){this.disabled=
!0;this.indicator=this.active=!1;this.scheduleRender()};return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/panels/MapMaker/LayerSwitcher":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget ../../../utils/topic".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);p=h.__importDefault(p);u=function(g){function e(b){b=g.call(this,b)||this;b.showLayers=
!0;b.showTables=!0;b.showBasemap=!0;b.allLayers={};return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.addEventListeners()};e.prototype.render=function(){var b=this;return v.tsx("div",null,v.tsx("calcite-combobox",{key:"layer-switcher-combobox","selection-mode":"single","allow-custom-values":"false",class:"calcite-theme-dark",hidden:this.selectedLayer?!1:!0,bind:this,afterCreate:function(a){return b.comboBoxElement=a},onCalciteComboboxChange:function(a){return b.onSelectionChange(a)}},
this.renderGroups()))};e.prototype.renderGroups=function(){var b=this;return this.getLayerInfos().filter(function(a){var c,d;return null===(d=null===(c=a.layers)||void 0===c?void 0:c.items)||void 0===d?void 0:d.length}).map(function(a){var c,d=null===(c=null===a||void 0===a?void 0:a.layers)||void 0===c?void 0:c.items;return v.tsx("calcite-combobox-item-group",{bind:b,label:a.title},b.renderItems(d))})};e.prototype.renderItems=function(b){var a=this,c=[];b.filter(function(d){return"hide"!==d.listMode}).reduceRight(function(d,
f){return c.push(a.renderItem(f))},null);return c};e.prototype.renderItem=function(b){var a=this.selectedLayer,c=this.getUniqueValue(b);a=this.isSelected(a,b);var d=b.sublayers,f=b.layers,l=(null===b||void 0===b?void 0:b.title)||this.messages.untitledLayer;d=!(b.type in{wmts:1})&&"hide-children"!==b.listMode&&(d||f);this.allLayers[c]=b;return v.tsx("calcite-combobox-item",{key:l.replace(" ","-"),value:c,"text-label":l,selected:a},(null===d||void 0===d?0:d.length)?this.renderItems(d):null)};e.prototype.isSelected=
function(b,a){b=this.getUniqueValue(b);a=this.getUniqueValue(a);return b===a};e.prototype.open=function(){this.container.active=!0};e.prototype.close=function(){this.container.active=!1};e.prototype.hide=function(){this.container.setAttribute("hidden",!0)};e.prototype.show=function(){this.container.removeAttribute("hidden")};e.prototype.setFocus=function(){};e.prototype.addEventListeners=function(){var b=this;this.own([this.state.mapView.map.allLayers.on("change",function(a){return b.onLayersChanged(a)})])};
e.prototype.onSelectionChange=function(b){var a;b=null===(a=null===b||void 0===b?void 0:b.detail)||void 0===a?void 0:a.selectedItems;(null===b||void 0===b?0:b.length)?(a=b[0],b=a.value,a.selected&&b&&this.selectedLayer&&b!==this.selectedLayer.id&&(a=this.selectedLayer=this.allLayers[b],p.default.publish("layer-selected",{layer:a}),p.default.publish("layerswitcher-selected",a))):this.comboBoxElement.value=this.selectedLayer.id};e.prototype.onLayersChanged=function(b){};e.prototype.getUniqueValue=function(b){var a=
null===b||void 0===b?void 0:b.layer;return(a?a.id+"_":"")+(null===b||void 0===b?void 0:b.id)};e.prototype.getLayerInfos=function(){var b=this.state.map.webMap,a=b.layers,c=b.allTables,d=b.basemap;b=d.baseLayers;d=d.referenceLayers;return[{title:this.messages.layers,layers:this.showLayers?a:null},{title:this.messages.tables,layers:this.showTables?c:null},{title:this.messages.basemaps,layers:this.showBasemap?(b||[]).concat(d||[]):null}]};h.__decorate([r.property(),v.messageBundle("mapviewer/mapMaker")],
e.prototype,"messages",void 0);h.__decorate([r.property()],e.prototype,"selectedLayer",void 0);return e=h.__decorate([r.subclass("")],e)}(z.default);n.default=u})},"app/widgets/panels/MapMaker/charts/ConfigureCharts":function(){define("require exports tslib arcgis-charts-shared-utils esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget ../../../../utils/topic".split(" "),function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});p=h.__importDefault(p);
g=h.__importDefault(g);u=function(e){function b(a){var c=e.call(this,a)||this;c.showConfigure=!1;c.onListChange=function(d){var f,l;!0===(null===(f=d.detail)||void 0===f?void 0:f.isDelete)&&(c.layer.charts=null===(l=c.layer)||void 0===l?void 0:l.charts.filter(function(m){return m.id!==d.detail.chartId}));g.default.publish("charts-updated")};c.onConfigChange=function(d){return h.__awaiter(c,void 0,void 0,function(){var f,l,m,k,q,t,w,A,x,y=this,B,C,D,F,E,G,O;return h.__generator(this,function(H){switch(H.label){case 0:this.chartsAppContainer=
f=d.target;l=this;m=l.layer;k=l.chartsAppContainer;this.state.selectedChartId=null===(B=d.detail.config)||void 0===B?void 0:B.id;g.default.publish("action-click",{name:"chart",payload:{chartsAppContainer:k,config:d.detail.config,handleScaleChange:this.onScaleChange.bind(this)}});if((null===m||void 0===m?void 0:m.id)!==(null===(C=f.featureLayer)||void 0===C?void 0:C.id))return[3,2];q=null===(D=m.charts)||void 0===D?void 0:D.map(function(K){return K.id});t=null===(F=f.chartsConfig)||void 0===F?void 0:
F.filter(function(K){return!0!==(null===q||void 0===q?void 0:q.includes(K.id))});w=function(K){return h.__awaiter(y,void 0,void 0,function(){var P;return h.__generator(this,function(L){switch(L.label){case 0:return[4,Promise.all(K.map(function(M){return r.validateWebChart({input:M})}))];case 1:return P=L.sent(),[2,K.filter(function(M,J){return P[J].valid})]}})})};return[4,w(t)];case 1:A=H.sent(),0<A.length?(m.charts=h.__spreadArray(h.__spreadArray([],null!==(E=m.charts)&&void 0!==E?E:[]),A.map(function(K){K=
h.__assign({},K);void 0!==K.dataSource&&delete K.dataSource;return K})),x=new Set,m.charts=m.charts.filter(function(K){var P=x.has(K.id);x.add(K.id);return!P})):m.charts=null===(G=m.charts)||void 0===G?void 0:G.map(function(K){var P;return(null===K||void 0===K?void 0:K.id)===(null===(P=d.detail.config)||void 0===P?void 0:P.id)?(K=h.__assign({},d.detail.config),delete K.dataSource,K):K}),g.default.publish("charts-updated"),H.label=2;case 2:return g.default.publish("chart-selected",{selectedChartId:null===
(O=d.detail.config)||void 0===O?void 0:O.id,layer:k.featureLayer,isAddingPanel:!1}),[2]}})})};return c}h.__extends(b,e);b.prototype.postInitialize=function(){var a=this;this.chartsAppContainer=this.createAppContainer();this.createConfigureChartsPanel(this.configureChartsContainer);this.own([g.default.subscribe("action-click",function(c){var d,f,l;c&&"configurechart"===c.name?a.chartsAppContainer.openConfig=!1===c.active:(a.chartsAppContainer.openConfig=!0===c.isLayerAction?!1:null===(l=null===(f=
null===(d=a.panel)||void 0===d?void 0:d.actionBar)||void 0===f?void 0:f.findAction("configurechart"))||void 0===l?void 0:l.active,c&&"table"===c.name&&(a.chartsAppContainer.config=void 0))}),g.default.subscribe("layer-selected",function(){var c,d;void 0!==(null===(c=a.state)||void 0===c?void 0:c.selectedData)&&(a.state.selectedData=void 0);void 0!==(null===(d=a.chartsAppContainer)||void 0===d?void 0:d.config)&&(a.chartsAppContainer.config=void 0)}),g.default.subscribe("table-selected",function(){var c;
void 0!==(null===(c=a.state)||void 0===c?void 0:c.selectedData)&&(a.state.selectedData=void 0)}),g.default.subscribe("layer-added",function(){var c;void 0!==(null===(c=a.state)||void 0===c?void 0:c.selectedData)&&(a.state.selectedData=void 0)}),g.default.subscribe("table-added",function(){var c;void 0!==(null===(c=a.state)||void 0===c?void 0:c.selectedData)&&(a.state.selectedData=void 0)})])};b.prototype.destroy=function(){var a,c;null===(a=this.configureContainer)||void 0===a?void 0:a.remove();this.chartsAppContainer.removeEventListener("arcgisChartsAppChartsConfigChange",
this.onConfigChange);this.chartsAppContainer.removeEventListener("arcgisChartsAppChartsListChange",this.onListChange);!0===(null===(c=document.querySelector("calcite-shell-center-row").querySelector("calcite-panel"))||void 0===c?void 0:c.dismissed)&&(this.chartsAppContainer.removeEventListener("arcgisChartsAppChartScaleChange",this.onScaleChange),this.chartsAppContainer.remove())};b.prototype.render=function(){return z.tsx("div",{style:"display: flex; flex: 1 1 auto; flex-direction: column; overflow: hidden;"})};
b.prototype.createConfigureChartsPanel=function(a){a&&this.chartsAppContainer&&(this.configureContainer=a,this.chartsAppContainer.configReferenceElement=this.configureContainer,this.chartsAppContainer.openConfig=this.showConfigure,this.configureContainer.style.display=!0===this.showConfigure?"flex":"none",this.chartsAppContainer.configHeaderTitle=this.messages.titleBeta,!1===this.showConfigure&&this.showChartsPanel())};b.prototype.showChartsPanel=function(){g.default.publish("action-click",{name:"chart",
payload:{chartsAppContainer:this.chartsAppContainer,config:this.chartsAppContainer.config,handleScaleChange:this.onScaleChange.bind(this)}})};b.prototype.addEventListeners=function(){var a=this;this.chartsAppContainer.addEventListener("arcgisChartsAppChartClose",function(c){var d,f;c=null===(f=null===(d=c.target)||void 0===d?void 0:d.configReferenceElement)||void 0===f?void 0:f.hasChildNodes();g.default.publish("action-click",{name:"chart",payload:null});g.default.publish("chart-selected",{selectedChartId:void 0,
layer:a.layer,isAddingPanel:!1});!1===c&&(a.chartsAppContainer.removeEventListener("arcgisChartsAppChartScaleChange",a.onScaleChange),a.configureContainer.remove(),a.chartsAppContainer.remove())});this.chartsAppContainer.addEventListener("arcgisChartsAppChartsConfigOpen",function(c){var d,f;a.chartsAppContainer.openConfig=!0;null===(d=a.panel)||void 0===d?void 0:d.handleActionClick({action:a.action});null===(f=a.panel)||void 0===f?void 0:f.collapsePanelAndDestroy(!1)});this.chartsAppContainer.addEventListener("arcgisChartsAppChartsConfigClose",
function(){var c,d,f,l,m;a.chartsAppContainer.openConfig=!1;null===(c=a.configureContainer)||void 0===c?void 0:c.remove();"configurechart"===(null===(d=a.panel)||void 0===d?void 0:d.activeActionName)&&(null===(f=a.panel)||void 0===f?void 0:f.collapsePanelAndDestroy(!0),null!==a.panel&&(a.panel.activeActionName=null),a.state.selectedChartId=null===(l=a.chartsAppContainer.config)||void 0===l?void 0:l.id);!0===(null===(m=document.querySelector("calcite-shell-center-row").querySelector("calcite-panel"))||
void 0===m?void 0:m.dismissed)&&(a.chartsAppContainer.removeEventListener("arcgisChartsAppChartScaleChange",a.onScaleChange),a.chartsAppContainer.remove())});this.chartsAppContainer.addEventListener("arcgisChartsAppChartScaleChange",this.onScaleChange.bind(this));this.chartsAppContainer.addEventListener("arcgisChartsAppSelectionChange",function(c){var d;a.state.selectedData=null===(d=c.target)||void 0===d?void 0:d.selectionData})};b.prototype.createAppContainer=function(){var a=this,c,d,f,l,m,k,q,
t=this.chartsAppContainer=document.querySelector("arcgis-charts-app-container");null===t&&(t=this.chartsAppContainer=document.createElement("arcgis-charts-app-container"),t.usePopupTemplateFieldsInfo=!0,t.chartPanelScalable=!0,t.autoReloadNewChartIds=!1,t.hideGuides=!1,t.hideZoomAction=!0,t.view=this.state.mapView,document.body.appendChild(t),this.addEventListeners());this.chartsAppContainer.addEventListener("arcgisChartsAppChartsConfigChange",this.onConfigChange);this.chartsAppContainer.addEventListener("arcgisChartsAppChartsListChange",
this.onListChange);this.layer.charts=null===(c=this.layer.charts)||void 0===c?void 0:c.map(function(w,A){w.id===w.title.content.text&&(w.id="Chart "+a.layer.id+"_"+Date.now()+"_"+A);return w});t.featureLayer=this.layer;c=null!==(d=t.chartsConfig)&&void 0!==d?d:null===(f=this.layer)||void 0===f?void 0:f.charts;t.config=null!==(l=null===c||void 0===c?void 0:c.find(function(w){return w.id===a.state.selectedChartId}))&&void 0!==l?l:t.config;t.chartsConfig=(null!==(q=null!==(k=null===(m=this.layer)||void 0===
m?void 0:m.charts)&&void 0!==k?k:t.chartsConfig)&&void 0!==q?q:[]).slice(0);t.selectionData=void 0;g.default.publish("action-click",{name:"chart",payload:{chartsAppContainer:t,config:t.config,handleScaleChange:this.onScaleChange.bind(this)}});return t};b.prototype.onScaleChange=function(a){var c=document.querySelector("calcite-shell-center-row"),d=this.chartsAppContainer;if(null!==c){if("up"===a.detail)switch(c.heightScale){case "s":c.setAttribute("height-scale","m");d.disableDownScaleAction=!1;break;
case "m":c.setAttribute("height-scale","l"),d.disableUpScaleAction=!0}else switch(c.heightScale){case "m":c.setAttribute("height-scale","s");d.disableDownScaleAction=!0;break;case "l":c.setAttribute("height-scale","m"),d.disableUpScaleAction=!1}c.heightScale=c.getAttribute("height-scale")}};b.prototype.onConfigureChartClick=function(a){};h.__decorate([v.property()],b.prototype,"panel",void 0);h.__decorate([v.property()],b.prototype,"layer",void 0);h.__decorate([v.property()],b.prototype,"state",void 0);
h.__decorate([v.property()],b.prototype,"action",void 0);h.__decorate([v.property()],b.prototype,"selectedChartId",void 0);h.__decorate([v.property()],b.prototype,"showConfigure",void 0);h.__decorate([v.property()],b.prototype,"configureChartsContainer",void 0);h.__decorate([v.property(),z.messageBundle("mapviewer/charts")],b.prototype,"messages",void 0);return b=h.__decorate([v.subclass("")],b)}(p.default);n.default=u})},"arcgis-charts-shared-utils/index":function(){define(["require","exports"],
function(u,n){function h(W,I){return W<I?-1:W>I?1:W>=I?0:NaN}function r(W){function I(ba,ia,pa,ta){null==pa&&(pa=0);for(null==ta&&(ta=ba.length);pa<ta;){const Ca=pa+ta>>>1;0>N(ba[Ca],ia)?pa=Ca+1:ta=Ca}return pa}let T=W,N=W;return 1===W.length&&(T=(ba,ia)=>W(ba)-ia,N=function(ba){return(ia,pa)=>h(ba(ia),pa)}(W)),{left:I,center:function(ba,ia,pa,ta){null==pa&&(pa=0);null==ta&&(ta=ba.length);ta=I(ba,ia,pa,ta-1);return ta>pa&&T(ba[ta-1],ia)>-T(ba[ta],ia)?ta-1:ta},right:function(ba,ia,pa,ta){null==pa&&
(pa=0);for(null==ta&&(ta=ba.length);pa<ta;){const Ca=pa+ta>>>1;0<N(ba[Ca],ia)?ta=Ca:pa=Ca+1}return pa}}}function v(W,I){let T,N;if(void 0===I)for(var ba of W)null!=ba&&(void 0===T?ba>=ba&&(T=N=ba):(T>ba&&(T=ba),N<ba&&(N=ba)));else{ba=-1;for(let ia of W)null!=(ia=I(ia,++ba,W))&&(void 0===T?ia>=ia&&(T=N=ia):(T>ia&&(T=ia),N<ia&&(N=ia)))}return[T,N]}function z(W){return W}function p(W){return function(){return W}}function g(W,I,T){I=(I-W)/Math.max(0,T);W=Math.floor(Math.log(I)/Math.LN10);I/=Math.pow(10,
W);return 0<=W?(I>=cb?10:I>=ob?5:I>=Ab?2:1)*Math.pow(10,W):-Math.pow(10,-W)/(I>=cb?10:I>=ob?5:I>=Ab?2:1)}function e(W){return Math.ceil(Math.log(function(I,T){let N=0;if(void 0===T)for(var ba of I)null!=ba&&(ba=+ba)>=ba&&++N;else{ba=-1;for(let ia of I)null!=(ia=T(ia,++ba,I))&&(ia=+ia)>=ia&&++N}return N}(W))/Math.LN2)+1}function b(){function W(ba){Array.isArray(ba)||(ba=Array.from(ba));var ia,pa,ta=ba.length,Ca=Array(ta);for(ia=0;ia<ta;++ia)Ca[ia]=I(ba[ia],ia,ba);var Da=T(Ca),Ia=Da[0];Da=Da[1];var xa=
N(Ca,Ia,Da);if(!Array.isArray(xa)){ia=Da;var Fa=+xa;if(T===v&&([Ia,Da]=function(Xa,fb,bb){let jb;for(;;){const qb=g(Xa,fb,bb);if(qb===jb||0===qb||!isFinite(qb))return[Xa,fb];0<qb?(Xa=Math.floor(Xa/qb)*qb,fb=Math.ceil(fb/qb)*qb):0>qb&&(Xa=Math.ceil(Xa*qb)/qb,fb=Math.floor(fb*qb)/qb);jb=qb}}(Ia,Da,Fa)),xa=function(Xa,fb,bb){var jb,qb,Hb,Bb=-1;if(bb=+bb,(Xa=+Xa)==(fb=+fb)&&0<bb)return[Xa];if((jb=fb<Xa)&&(qb=Xa,Xa=fb,fb=qb),0===(Hb=g(Xa,fb,bb))||!isFinite(Hb))return[];if(0<Hb)for(bb=Math.round(Xa/Hb),
qb=Math.round(fb/Hb),bb*Hb<Xa&&++bb,qb*Hb>fb&&--qb,Xa=Array(qb=qb-bb+1);++Bb<qb;)Xa[Bb]=(bb+Bb)*Hb;else for(Hb=-Hb,bb=Math.round(Xa*Hb),qb=Math.round(fb*Hb),bb/Hb<Xa&&++bb,qb/Hb>fb&&--qb,Xa=Array(qb=qb-bb+1);++Bb<qb;)Xa[Bb]=(bb+Bb)/Hb;return jb&&Xa.reverse(),Xa}(Ia,Da,Fa),xa[xa.length-1]>=Da)ia>=Da&&T===v?(ia=g(Ia,Da,Fa),isFinite(ia)&&(0<ia?Da=(Math.floor(Da/ia)+1)*ia:0>ia&&(Da=(Math.ceil(Da*-ia)+1)/-ia))):xa.pop()}for(Fa=xa.length;xa[0]<=Ia;)xa.shift(),--Fa;for(;xa[Fa-1]>Da;)xa.pop(),--Fa;var Ga,
Ra=Array(Fa+1);for(ia=0;ia<=Fa;++ia)(Ga=Ra[ia]=[]).x0=0<ia?xa[ia-1]:Ia,Ga.x1=ia<Fa?xa[ia]:Da;for(ia=0;ia<ta;++ia)Ia<=(pa=Ca[ia])&&pa<=Da&&Ra[Qa(xa,pa,0,Fa)].push(ba[ia]);return Ra}var I=z,T=v,N=e;return W.value=function(ba){return arguments.length?(I="function"==typeof ba?ba:p(ba),W):I},W.domain=function(ba){return arguments.length?(T="function"==typeof ba?ba:p([ba[0],ba[1]]),W):T},W.thresholds=function(ba){return arguments.length?(N="function"==typeof ba?ba:Array.isArray(ba)?p(Ua.call(ba)):p(ba),
W):N},W}function a(W,I){let T;if(void 0===I)for(var N of W)null!=N&&(T<N||void 0===T&&N>=N)&&(T=N);else{N=-1;for(let ba of W)null!=(ba=I(ba,++N,W))&&(T<ba||void 0===T&&ba>=ba)&&(T=ba)}return T}function c(W,I){let T;if(void 0===I)for(var N of W)null!=N&&(T>N||void 0===T&&N>=N)&&(T=N);else{N=-1;for(let ba of W)null!=(ba=I(ba,++N,W))&&(T>ba||void 0===T&&ba>=ba)&&(T=ba)}return T}function d(W,I,T=0,N=W.length-1,ba=h){for(;N>T;){if(600<N-T){var ia=N-T+1,pa=I-T+1,ta=Math.log(ia),Ca=.5*Math.exp(2*ta/3);ta=
.5*Math.sqrt(ta*Ca*(ia-Ca)/ia)*(0>pa-ia/2?-1:1);d(W,I,Math.max(T,Math.floor(I-pa*Ca/ia+ta)),Math.min(N,Math.floor(I+(ia-pa)*Ca/ia+ta)),ba)}ia=W[I];pa=T;Ca=N;f(W,T,I);for(0<ba(W[N],ia)&&f(W,T,N);pa<Ca;){f(W,pa,Ca);++pa;for(--Ca;0>ba(W[pa],ia);)++pa;for(;0<ba(W[Ca],ia);)--Ca}0===ba(W[T],ia)?f(W,T,Ca):(++Ca,f(W,Ca,N));Ca<=I&&(T=Ca+1);I<=Ca&&(N=Ca-1)}return W}function f(W,I,T){const N=W[I];W[I]=W[T];W[T]=N}function l(W,I,T){if(W=Float64Array.from(function*(ba,ia){if(void 0===ia)for(var pa of ba)null!=
pa&&(pa=+pa)>=pa&&(yield pa);else{pa=-1;for(let ta of ba)null!=(ta=ia(ta,++pa,ba))&&(ta=+ta)>=ta&&(yield ta)}}(W,T)),T=W.length){if(0>=(I=+I)||2>T)return c(W);if(1<=I)return a(W);I*=T-1;T=Math.floor(I);var N=a(d(W,T).subarray(0,T+1));return N+(c(W.subarray(T+1))-N)*(I-T)}}function m(W,I){let T=0;if(void 0===I)for(var N of W)(N=+N)&&(T+=N);else{N=-1;for(let ba of W)(ba=+I(ba,++N,W))&&(T+=ba)}return T}function k(W,I,T,N){return new (T||(T=Promise))(function(ba,ia){function pa(Da){try{Ca(N.next(Da))}catch(Ia){ia(Ia)}}
function ta(Da){try{Ca(N.throw(Da))}catch(Ia){ia(Ia)}}function Ca(Da){var Ia;Da.done?ba(Da.value):(Ia=Da.value,Ia instanceof T?Ia:new T(function(xa){xa(Ia)})).then(pa,ta)}Ca((N=N.apply(W,I||[])).next())})}function q(W){if(null==W)W=void 0===W?"[object Undefined]":"[object Null]";else if(dg&&dg in Object(W)){var I=dd.call(W,nd),T=W[nd];try{W[nd]=void 0;var N=!0}catch(ia){}var ba=ge.call(W);W=(N&&(I?W[nd]=T:delete W[nd]),ba)}else W=Ue.call(W);return W}function t(W){return null!=W&&"object"==typeof W}
function w(W){return"symbol"==typeof W||t(W)&&"[object Symbol]"==q(W)}function A(W,I){for(var T=-1,N=null==W?0:W.length,ba=Array(N);++T<N;)ba[T]=I(W[T],T,W);return ba}function x(W){if("string"==typeof W)return W;if(yd(W))return A(W,x)+"";if(w(W))return eg?eg.call(W):"";var I=W+"";return"0"==I&&-Infinity==1/W?"-0":I}function y(W){var I=typeof W;return null!=W&&("object"==I||"function"==I)}function B(W){return W}function C(W){if(!y(W))return!1;W=q(W);return"[object Function]"==W||"[object GeneratorFunction]"==
W||"[object AsyncFunction]"==W||"[object Proxy]"==W}function D(W){if(null!=W){try{return Hh.call(W)}catch(I){}return W+""}return""}function F(W,I){W=null==W?void 0:W[I];a:{I=!(!y(W)||(T=W,fg&&fg in T))&&(C(W)?Ih:Jh).test(D(W));break a;var T}return I?W:void 0}function E(W,I,T){switch(T.length){case 0:return W.call(I);case 1:return W.call(I,T[0]);case 2:return W.call(I,T[0],T[1]);case 3:return W.call(I,T[0],T[1],T[2])}return W.apply(I,T)}function G(W){return W!=W}function O(W,I){return!(null==W||!W.length)&&
-1<function(T,N,ba){return N==N?function(ia,pa,ta){--ta;for(var Ca=ia.length;++ta<Ca;)if(ia[ta]===pa)return ta;return-1}(T,N,ba):function(ia,pa,ta,Ca){var Da=ia.length;for(ta+=Ca?1:-1;Ca?ta--:++ta<Da;)if(pa(ia[ta],ta,ia))return ta;return-1}(T,G,ba)}(W,I,0)}function H(W,I){var T=typeof W;return!!(I=null==I?9007199254740991:I)&&("number"==T||"symbol"!=T&&Kh.test(W))&&-1<W&&0==W%1&&W<I}function K(W,I,T){"__proto__"==I&&hf?hf(W,I,{configurable:!0,enumerable:!0,value:T,writable:!0}):W[I]=T}function P(W,
I){return W===I||W!=W&&I!=I}function L(W,I,T){var N=W[I];Lh.call(W,I)&&P(N,T)&&(void 0!==T||I in W)||K(W,I,T)}function M(W,I,T,N){var ba=!T;T||(T={});for(var ia=-1,pa=I.length;++ia<pa;){var ta=I[ia],Ca=N?N(T[ta],W[ta],ta,T,W):void 0;void 0===Ca&&(Ca=W[ta]);ba?K(T,ta,Ca):L(T,ta,Ca)}return T}function J(W,I){return Mh(function(T,N,ba){return N=gg(void 0===N?T.length-1:N,0),function(){for(var ia=arguments,pa=-1,ta=gg(ia.length-N,0),Ca=Array(ta);++pa<ta;)Ca[pa]=ia[N+pa];pa=-1;for(ta=Array(N+1);++pa<N;)ta[pa]=
ia[pa];return ta[N]=ba(Ca),E(T,this,ta)}}(W,I,B),W+"")}function R(W){return"number"==typeof W&&-1<W&&0==W%1&&9007199254740991>=W}function X(W){return null!=W&&R(W.length)&&!C(W)}function U(W,I,T){if(!y(T))return!1;var N=typeof I;return!!("number"==N?X(T)&&H(I,T.length):"string"==N&&I in T)&&P(T[I],W)}function V(W){var I=W&&W.constructor;return W===("function"==typeof I&&I.prototype||Nh)}function Q(W){return t(W)&&"[object Arguments]"==q(W)}function Y(W){return function(I){return W(I)}}function fa(W,
I){var T=yd(W),N=!T&&jf(W),ba=!T&&!N&&Ve(W),ia=!T&&!N&&!ba&&Hf(W);if(T=T||N||ba||ia){N=W.length;for(var pa=String,ta=-1,Ca=Array(N);++ta<N;)Ca[ta]=pa(ta);N=Ca}else N=[];pa=N.length;for(var Da in W)!I&&!Oh.call(W,Da)||T&&("length"==Da||ba&&("offset"==Da||"parent"==Da)||ia&&("buffer"==Da||"byteLength"==Da||"byteOffset"==Da)||H(Da,pa))||N.push(Da);return N}function da(W,I){return function(T){return W(I(T))}}function ca(W){if(!V(W))return Ph(W);var I=[],T;for(T in Object(W))Qh.call(W,T)&&"constructor"!=
T&&I.push(T);return I}function la(W){return X(W)?fa(W):ca(W)}function ha(W){if(X(W))W=fa(W,!0);else if(y(W)){var I=V(W),T=[];for(N in W)("constructor"!=N||!I&&Rh.call(W,N))&&T.push(N);W=T}else{var N=[];if(null!=W)for(I in Object(W))N.push(I);W=N}return W}function S(W,I){if(yd(W))return!1;var T=typeof W;return!("number"!=T&&"symbol"!=T&&"boolean"!=T&&null!=W&&!w(W))||Sh.test(W)||!Th.test(W)||null!=I&&W in Object(I)}function ea(W){var I=-1,T=null==W?0:W.length;for(this.clear();++I<T;){var N=W[I];this.set(N[0],
N[1])}}function ma(W,I){for(var T=W.length;T--;)if(P(W[T][0],I))return T;return-1}function sa(W){var I=-1,T=null==W?0:W.length;for(this.clear();++I<T;){var N=W[I];this.set(N[0],N[1])}}function ja(W,I){W=W.__data__;var T=typeof I;return("string"==T||"number"==T||"symbol"==T||"boolean"==T?"__proto__"!==I:null===I)?W["string"==typeof I?"string":"hash"]:W.map}function wa(W){var I=-1,T=null==W?0:W.length;for(this.clear();++I<T;){var N=W[I];this.set(N[0],N[1])}}function Ja(W,I){if("function"!=typeof W||
null!=I&&"function"!=typeof I)throw new TypeError("Expected a function");var T=function(){var N=arguments,ba=I?I.apply(this,N):N[0],ia=T.cache;if(ia.has(ba))return ia.get(ba);N=W.apply(this,N);return T.cache=ia.set(ba,N)||ia,N};return T.cache=new (Ja.Cache||wa),T}function va(W,I){return yd(W)?W:S(W,I)?[W]:Uh(null==W?"":x(W))}function ra(W){if("string"==typeof W||w(W))return W;var I=W+"";return"0"==I&&-Infinity==1/W?"-0":I}function Ba(W,I){for(var T=0,N=(I=va(I,W)).length;null!=W&&T<N;)W=W[ra(I[T++])];
return T&&T==N?W:void 0}function Ha(W,I){for(var T=-1,N=I.length,ba=W.length;++T<N;)W[ba+T]=I[T];return W}function ya(W){return yd(W)||jf(W)||!!(hg&&W&&W[hg])}function qa(W,I,T,N,ba){var ia=-1,pa=W.length;T||(T=ya);for(ba||(ba=[]);++ia<pa;){var ta=W[ia];0<I&&T(ta)?1<I?qa(ta,I-1,T,N,ba):Ha(ba,ta):N||(ba[ba.length]=ta)}return ba}function oa(W){if(!t(W))return!1;var I=q(W);!(I="[object Error]"==I||"[object DOMException]"==I)&&(I="string"==typeof W.message&&"string"==typeof W.name)&&(t(W)&&"[object Object]"==
q(W)?(W=If(W),null===W?W=!0:(W=Vh.call(W,"constructor")&&W.constructor,W="function"==typeof W&&W instanceof W&&ig.call(W)==Wh)):W=!1,I=!W);return I}function Aa(W){this.size=(this.__data__=new sa(W)).size}function Ka(){return[]}function Wa(W,I,T){I=I(W);return yd(W)?I:Ha(I,T(W))}function Pa(W){return Wa(W,la,Jf)}function Ta(W){return Wa(W,ha,jg)}function eb(W){var I=new W.constructor(W.byteLength);return(new kf(I)).set(new kf(W)),I}function Na(W,I,T){var N,ba=W.constructor;switch(I){case "[object ArrayBuffer]":return eb(W);
case "[object Boolean]":case "[object Date]":return new ba(+W);case "[object DataView]":return function(ia,pa){pa=pa?eb(ia.buffer):ia.buffer;return new ia.constructor(pa,ia.byteOffset,ia.byteLength)}(W,T);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return function(ia,pa){pa=pa?eb(ia.buffer):
ia.buffer;return new ia.constructor(pa,ia.byteOffset,ia.length)}(W,T);case "[object Map]":case "[object Set]":return new ba;case "[object Number]":case "[object String]":return new ba(W);case "[object RegExp]":return(N=new W.constructor(W.source,Xh.exec(W))).lastIndex=W.lastIndex,N;case "[object Symbol]":return kg?Object(kg.call(W)):{}}}function Sa(W,I,T,N,ba,ia){var pa,ta=1&I,Ca=2&I,Da=4&I;if(T&&(pa=ba?T(W,N,ba,ia):T(W)),void 0!==pa)return pa;if(!y(W))return W;if(N=yd(W)){if(pa=function(Ga){var Ra=
Ga.length,Xa=new Ga.constructor(Ra);return Ra&&"string"==typeof Ga[0]&&Yh.call(Ga,"index")&&(Xa.index=Ga.index,Xa.input=Ga.input),Xa}(W),!ta)return function(Ga,Ra){var Xa=-1,fb=Ga.length;for(Ra||(Ra=Array(fb));++Xa<fb;)Ra[Xa]=Ga[Xa];return Ra}(W,pa)}else{var Ia=Le(W),xa="[object Function]"==Ia||"[object GeneratorFunction]"==Ia;if(Ve(W))return function(Ga,Ra){if(Ra)return Ga.slice();Ra=Ga.length;Ra=lg?lg(Ra):new Ga.constructor(Ra);return Ga.copy(Ra),Ra}(W,ta);if("[object Object]"==Ia||"[object Arguments]"==
Ia||xa&&!ba){if(pa=Ca||xa?{}:function(Ga){return"function"!=typeof Ga.constructor||V(Ga)?{}:Zh(If(Ga))}(W),!ta)return Ca?function(Ga,Ra){return M(Ga,jg(Ga),Ra)}(W,function(Ga,Ra){return Ga&&M(Ra,ha(Ra),Ga)}(pa,W)):function(Ga,Ra){return M(Ga,Jf(Ga),Ra)}(W,function(Ga,Ra){return Ga&&M(Ra,la(Ra),Ga)}(pa,W))}else{if(!Kc[Ia])return ba?W:{};pa=Na(W,Ia,ta)}}ia||(ia=new Aa);if(ba=ia.get(W))return ba;ia.set(W,pa);$h(W)?W.forEach(function(Ga){pa.add(Sa(Ga,I,T,Ga,W,ia))}):ai(W)&&W.forEach(function(Ga,Ra){pa.set(Ra,
Sa(Ga,I,T,Ra,W,ia))});var Fa=N?void 0:(Da?Ca?Ta:Pa:Ca?ha:la)(W);return function(Ga,Ra){for(var Xa=-1,fb=null==Ga?0:Ga.length;++Xa<fb&&!1!==Ra(Ga[Xa],Xa,Ga););}(Fa||W,function(Ga,Ra){Fa&&(Ga=W[Ra=Ga]);L(pa,Ra,Sa(Ga,I,T,Ra,W,ia))}),pa}function $a(W){var I=-1,T=null==W?0:W.length;for(this.__data__=new wa;++I<T;)this.add(W[I])}function gb(W,I){for(var T=-1,N=null==W?0:W.length;++T<N;)if(I(W[T],T,W))return!0;return!1}function Za(W,I){return W.has(I)}function ab(W,I,T,N,ba,ia){var pa=1&T,ta=W.length,Ca=
I.length;if(ta!=Ca&&!(pa&&Ca>ta))return!1;Ca=ia.get(W);var Da=ia.get(I);if(Ca&&Da)return Ca==I&&Da==W;Ca=-1;Da=!0;var Ia=2&T?new $a:void 0;ia.set(W,I);for(ia.set(I,W);++Ca<ta;){var xa=W[Ca],Fa=I[Ca];if(N)var Ga=pa?N(Fa,xa,Ca,I,W,ia):N(xa,Fa,Ca,W,I,ia);if(void 0!==Ga){if(Ga)continue;Da=!1;break}if(Ia){if(!gb(I,function(Ra,Xa){if(!Ia.has(Xa)&&(xa===Ra||ba(xa,Ra,T,N,ia)))return Ia.push(Xa)})){Da=!1;break}}else if(xa!==Fa&&!ba(xa,Fa,T,N,ia)){Da=!1;break}}return ia.delete(W),ia.delete(I),Da}function ub(W){var I=
-1,T=Array(W.size);return W.forEach(function(N,ba){T[++I]=[ba,N]}),T}function yb(W){var I=-1,T=Array(W.size);return W.forEach(function(N){T[++I]=N}),T}function tb(W,I,T,N,ba,ia){var pa=yd(W),ta=yd(I),Ca=pa?"[object Array]":Le(W),Da=ta?"[object Array]":Le(I),Ia="[object Object]"==(Ca="[object Arguments]"==Ca?"[object Object]":Ca);ta="[object Object]"==(Da="[object Arguments]"==Da?"[object Object]":Da);if((Da=Ca==Da)&&Ve(W)){if(!Ve(I))return!1;pa=!0;Ia=!1}return Da&&!Ia?(ia||(ia=new Aa),pa||Hf(W)?ab(W,
I,T,N,ba,ia):function(xa,Fa,Ga,Ra,Xa,fb,bb){switch(Ga){case "[object DataView]":if(xa.byteLength!=Fa.byteLength||xa.byteOffset!=Fa.byteOffset)break;xa=xa.buffer;Fa=Fa.buffer;case "[object ArrayBuffer]":return!(xa.byteLength!=Fa.byteLength||!fb(new kf(xa),new kf(Fa)));case "[object Boolean]":case "[object Date]":case "[object Number]":return P(+xa,+Fa);case "[object Error]":return xa.name==Fa.name&&xa.message==Fa.message;case "[object RegExp]":case "[object String]":return xa==Fa+"";case "[object Map]":var jb=
ub;case "[object Set]":if(jb||(jb=yb),xa.size!=Fa.size&&!(1&Ra))break;if(Ga=bb.get(xa))return Ga==Fa;Ra|=2;bb.set(xa,Fa);Fa=ab(jb(xa),jb(Fa),Ra,Xa,fb,bb);return bb.delete(xa),Fa;case "[object Symbol]":if(Kf)return Kf.call(xa)==Kf.call(Fa)}return!1}(W,I,Ca,T,N,ba,ia)):1&T||(pa=Ia&&mg.call(W,"__wrapped__"),Ca=ta&&mg.call(I,"__wrapped__"),!pa&&!Ca)?!!Da&&(ia||(ia=new Aa),function(xa,Fa,Ga,Ra,Xa,fb){var bb=1&Ga,jb=Pa(xa),qb=jb.length;if(qb!=Pa(Fa).length&&!bb)return!1;for(var Hb=qb;Hb--;){var Bb=jb[Hb];
if(!(bb?Bb in Fa:bi.call(Fa,Bb)))return!1}var vb=fb.get(xa);Bb=fb.get(Fa);if(vb&&Bb)return vb==Fa&&Bb==xa;vb=!0;fb.set(xa,Fa);fb.set(Fa,xa);for(var ec=bb;++Hb<qb;){var Lb=xa[Bb=jb[Hb]],ic=Fa[Bb];if(Ra)var jc=bb?Ra(ic,Lb,Bb,Fa,xa,fb):Ra(Lb,ic,Bb,xa,Fa,fb);if(void 0===jc?Lb!==ic&&!Xa(Lb,ic,Ga,Ra,fb):!jc){vb=!1;break}ec||(ec="constructor"==Bb)}vb&&!ec&&(Ga=xa.constructor,Ra=Fa.constructor,!(Ga!=Ra&&"constructor"in xa&&"constructor"in Fa)||"function"==typeof Ga&&Ga instanceof Ga&&"function"==typeof Ra&&
Ra instanceof Ra||(vb=!1));return fb.delete(xa),fb.delete(Fa),vb}(W,I,T,N,ba,ia)):(W=pa?W.value():W,I=Ca?I.value():I,ia||(ia=new Aa),ba(W,I,T,N,ia))}function nb(W,I,T,N,ba){return W===I||(null==W||null==I||!t(W)&&!t(I)?W!=W&&I!=I:tb(W,I,T,N,nb,ba))}function Nb(W,I){return function(T){return null!=T&&T[W]===I&&(void 0!==I||W in Object(T))}}function Tb(W){var I=function(T){for(var N=la(T),ba=N.length;ba--;){var ia=N[ba],pa=T[ia];N[ba]=[ia,pa,pa==pa&&!y(pa)]}return N}(W);return 1==I.length&&I[0][2]?
Nb(I[0][0],I[0][1]):function(T){return T===W||function(N,ba,ia,pa){var ta=ia.length,Ca=ta,Da=!pa;if(null==N)return!Ca;for(N=Object(N);ta--;){var Ia=ia[ta];if(Da&&Ia[2]?Ia[1]!==N[Ia[0]]:!(Ia[0]in N))return!1}for(;++ta<Ca;){var xa=(Ia=ia[ta])[0],Fa=N[xa],Ga=Ia[1];if(Da&&Ia[2]){if(void 0===Fa&&!(xa in N))return!1}else{Ia=new Aa;if(pa)var Ra=pa(Fa,Ga,xa,N,ba,Ia);if(void 0===Ra?!nb(Ga,Fa,3,pa,Ia):!Ra)return!1}}return!0}(T,W,I)}}function $b(W,I){return S(W)&&I==I&&!y(I)?Nb(ra(W),I):function(T){var N=null==
T?void 0:Ba(T,W);N=void 0===N?void 0:N;if(void 0===N&&N===I){if(N=null!=T){N=T;var ba=W,ia=-1;T=(ba=va(ba,N)).length;for(var pa=!1;++ia<T;){var ta=ra(ba[ia]);if(!(pa=null!=N&&null!=N&&ta in Object(N)))break;N=N[ta]}N=pa||++ia!=T?pa:!!(T=null==N?0:N.length)&&R(T)&&H(ta,T)&&(yd(N)||jf(N))}ta=N}else ta=nb(I,N,3);return ta}}function Mb(W){return S(W)?(I=ra(W),function(T){return null==T?void 0:T[I]}):function(T){return function(N){return Ba(N,T)}}(W);var I}function Kb(W){return t(W)&&X(W)}function kb(W,
I,T){for(var N=-1,ba=null==W?0:W.length;++N<ba;)if(T(I,W[N]))return!0;return!1}function rb(W){if(null==W)return!0;if(X(W)&&(yd(W)||"string"==typeof W||"function"==typeof W.splice||Ve(W)||Hf(W)||jf(W)))return!W.length;var I=Le(W);if("[object Map]"==I||"[object Set]"==I)return!W.size;if(V(W))return!ca(W).length;for(var T in W)if(ci.call(W,T))return!1;return!0}function zb(W,I,T,N){return void 0===W||P(W,ng[T])&&!di.call(N,T)?I:W}function xb(W){return"\\"+ei[W]}function ua(W,I,T){var N=og.imports._.templateSettings||
og;T&&U(W,I,T)&&(I=void 0);W=null==W?"":x(W);I=pg({},I,N,zb);var ba,ia;T=pg({},I.imports,N.imports,zb);var pa=la(T),ta=function(xa,Fa){return A(Fa,function(Ga){return xa[Ga]})}(T,pa),Ca=0;T=I.interpolate||lf;var Da="__p +\x3d '";T=RegExp((I.escape||lf).source+"|"+T.source+"|"+(T===qg?fi:lf).source+"|"+(I.evaluate||lf).source+"|$","g");var Ia=rg.call(I,"sourceURL")?"//# sourceURL\x3d"+(I.sourceURL+"").replace(/\s/g," ")+"\n":"";W.replace(T,function(xa,Fa,Ga,Ra,Xa,fb){return Ga||(Ga=Ra),Da+=W.slice(Ca,
fb).replace(gi,xb),Fa&&(ba=!0,Da+="' +\n__e("+Fa+") +\n'"),Xa&&(ia=!0,Da+="';\n"+Xa+";\n__p +\x3d '"),Ga&&(Da+="' +\n((__t \x3d ("+Ga+")) \x3d\x3d null ? '' : __t) +\n'"),Ca=fb+xa.length,xa});Da+="';\n";if(I=rg.call(I,"variable")&&I.variable){if(hi.test(I))throw Error("Invalid `variable` option passed into `_.template`");}else Da="with (obj) {\n"+Da+"\n}\n";Da=(ia?Da.replace(ii,""):Da).replace(ji,"$1").replace(ki,"$1;");Da="function("+(I||"obj")+") {\n"+(I?"":"obj || (obj \x3d {});\n")+"var __t, __p \x3d ''"+
(ba?", __e \x3d _.escape":"")+(ia?", __j \x3d Array.prototype.join;\nfunction print() { __p +\x3d __j.call(arguments, '') }\n":";\n")+Da+"return __p\n}";I=li(function(){return Function(pa,Ia+"return "+Da).apply(void 0,ta)});if(I.source=Da,oa(I))throw I;return I}function Oa(W,I){return ua(W)(I)}function hb(W,I){let T=Ib.English;W=function(N){let ba=N;if(void 0!==N&&-1!==N.indexOf("-")){const [ia,pa]=N.split("-");ba=`${ia}-${pa.toUpperCase()}`}return ba}(W);void 0!==W&&(!0===I.includes(W)?T=W:(W=function(N){const ba=
null==N?void 0:N.match(/^([a-z]{2})-([A-Z]{2})$/);let ia=Ib.English;return null!=ba&&1<(null==ba?void 0:ba.length)?ia=ba[1]:2===(null==N?void 0:N.length)&&N.toLowerCase()===N&&(ia=N),ia}(W),!0===I.includes(W)&&(T=W)));return T}function Cb(W=document.documentElement){var I,T;W=null!==(T=null===(I=function ia(ba){let pa;return pa=void 0===ba||ba===document||ba===window?null:ba.closest("[lang]")||ia(ba.getRootNode().host),pa}(W))||void 0===I?void 0:I.lang)&&void 0!==T?T:window.navigator.language;T=Object.values(Ib);
I=Object.values(sg);T=hb(W,T);W=hb(W,I);return{locale:T,rtl:tg.includes(T),formatLocale:W}}function Db(W=Cb().locale){return k(this,void 0,void 0,function*(){let I=yield new Promise(function(T,N){u(["./common.t9n.en-48fdb340"],T,N)});switch(W){case Ib.Arabic:I=yield new Promise(function(T,N){u(["./common.t9n.ar-6158b983"],T,N)});break;case Ib.Bosnian:I=yield new Promise(function(T,N){u(["./common.t9n.bs-d4dfe972"],T,N)});break;case Ib.Bulgarian:I=yield new Promise(function(T,N){u(["./common.t9n.bg-82dea66d"],
T,N)});break;case Ib.Catalan:I=yield new Promise(function(T,N){u(["./common.t9n.ca-6bb6a4ef"],T,N)});break;case Ib.Czech:I=yield new Promise(function(T,N){u(["./common.t9n.cs-6d33ebd1"],T,N)});break;case Ib.Danish:I=yield new Promise(function(T,N){u(["./common.t9n.da-854ea267"],T,N)});break;case Ib.German:I=yield new Promise(function(T,N){u(["./common.t9n.de-60e08a0f"],T,N)});break;case Ib.Greek:I=yield new Promise(function(T,N){u(["./common.t9n.el-35befddf"],T,N)});break;case Ib.EnglishUSA:I=yield new Promise(function(T,
N){u(["./common.t9n.en-US-cee60f30"],T,N)});break;case Ib.Spanish:I=yield new Promise(function(T,N){u(["./common.t9n.es-1b7f3bb3"],T,N)});break;case Ib.Estonian:I=yield new Promise(function(T,N){u(["./common.t9n.et-f64b72b8"],T,N)});break;case Ib.Finnish:I=yield new Promise(function(T,N){u(["./common.t9n.fi-619d677d"],T,N)});break;case Ib.French:I=yield new Promise(function(T,N){u(["./common.t9n.fr-99950bce"],T,N)});break;case Ib.Hebrew:I=yield new Promise(function(T,N){u(["./common.t9n.he-21907db5"],
T,N)});break;case Ib.Croatian:I=yield new Promise(function(T,N){u(["./common.t9n.hr-46a02997"],T,N)});break;case Ib.Hungarian:I=yield new Promise(function(T,N){u(["./common.t9n.hu-7b37859e"],T,N)});break;case Ib.Indonesian:I=yield new Promise(function(T,N){u(["./common.t9n.id-d3a8642f"],T,N)});break;case Ib.Italian:I=yield new Promise(function(T,N){u(["./common.t9n.it-6f8764e6"],T,N)});break;case Ib.Japanese:I=yield new Promise(function(T,N){u(["./common.t9n.ja-e6b7ce72"],T,N)});break;case Ib.Korean:I=
yield new Promise(function(T,N){u(["./common.t9n.ko-3e196b9a"],T,N)});break;case Ib.Lithuanian:I=yield new Promise(function(T,N){u(["./common.t9n.lt-5549c8b5"],T,N)});break;case Ib.Latvian:I=yield new Promise(function(T,N){u(["./common.t9n.lv-41d39593"],T,N)});break;case Ib.NorwegianBokml:I=yield new Promise(function(T,N){u(["./common.t9n.nb-ed922bb7"],T,N)});break;case Ib.Dutch:I=yield new Promise(function(T,N){u(["./common.t9n.nl-26df7c75"],T,N)});break;case Ib.Polish:I=yield new Promise(function(T,
N){u(["./common.t9n.pl-c39677ea"],T,N)});break;case Ib.PortugueseBrazil:I=yield new Promise(function(T,N){u(["./common.t9n.pt-BR-bbd0d8e0"],T,N)});break;case Ib.PortuguesePortugal:I=yield new Promise(function(T,N){u(["./common.t9n.pt-PT-0703ed20"],T,N)});break;case Ib.Romanian:I=yield new Promise(function(T,N){u(["./common.t9n.ro-ba5bf90b"],T,N)});break;case Ib.Russian:I=yield new Promise(function(T,N){u(["./common.t9n.ru-92e93e61"],T,N)});break;case Ib.Serbian:I=yield new Promise(function(T,N){u(["./common.t9n.sr-7a1fc25d"],
T,N)});break;case Ib.Slovak:I=yield new Promise(function(T,N){u(["./common.t9n.sk-56c0f8ec"],T,N)});break;case Ib.Slovenian:I=yield new Promise(function(T,N){u(["./common.t9n.sl-2ad8c706"],T,N)});break;case Ib.Swedish:I=yield new Promise(function(T,N){u(["./common.t9n.sv-01b78f8f"],T,N)});break;case Ib.Thai:I=yield new Promise(function(T,N){u(["./common.t9n.th-21c1b4dc"],T,N)});break;case Ib.Turkish:I=yield new Promise(function(T,N){u(["./common.t9n.tr-9a488789"],T,N)});break;case Ib.Ukrainian:I=
yield new Promise(function(T,N){u(["./common.t9n.uk-21e3cdd9"],T,N)});break;case Ib.Vietnamese:I=yield new Promise(function(T,N){u(["./common.t9n.vi-1891eba5"],T,N)});break;case Ib.ChineseChina:I=yield new Promise(function(T,N){u(["./common.t9n.zh-CN-9d8cda56"],T,N)});break;case Ib.ChineseHongKong:I=yield new Promise(function(T,N){u(["./common.t9n.zh-HK-6fcee9d5"],T,N)});break;case Ib.ChineseTaiwan:I=yield new Promise(function(T,N){u(["./common.t9n.zh-TW-66092e8c"],T,N)})}return I})}function ac(W){const {colorIndex:I,
opacity:T,histogramOverlays:N}=W;W=Math.max(0,null!=I?I:0);const ba=[...!0===N?mi:ug],[ia,pa,ta,Ca]=ba[W%ba.length];return[ia,pa,ta,void 0!==T?255*T:Ca]}function kc(W){return[0,0,0,255*(null!=W?W:.7)]}function zc(W=1){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random()),255*W]}function Zb(W){const I={family:"Arial, Helvetica, sans-serif",size:10,style:"normal",weight:"normal",decoration:"none"};switch(W){case Cc.ChartTitle:I.size=18;break;case Cc.AxisTitle:I.size=
14;break;case Cc.LegendText:I.size=12;break;case Cc.LegendTitle:I.size=13;break;case Cc.DescriptionText:I.size=11}return I}function Qc(W="",I=Zb(),T){let N="center";return T!==Cc.DataLabels&&T!==Cc.GuideLabel||(N=void 0),{type:"esriTS",color:kc(),text:W,font:I,horizontalAlignment:N}}function fc(W){const {text:I,visible:T,font:N,type:ba}=null!=W?W:{text:"",visible:!0,font:Zb()};return{type:"chartText",visible:T,content:Qc(I,N,ba)}}function Pc(W){var I,T,N;const ba=null!==(I=null==W?void 0:W.useRandomColor)&&
void 0!==I&&I;I=null==W?void 0:W.useRampColor;const ia=null!==(T=null==W?void 0:W.width)&&void 0!==T?T:1;T=null==W?void 0:W.isHistogramOverlay;let pa=null!==(N=null==W?void 0:W.color)&&void 0!==N?N:kc(1);return!0===ba?pa=zc():void 0!==I&&(pa=ac(!0===T?{colorIndex:I.colorIndex,histogramOverlays:T}:{colorIndex:I.colorIndex})),void 0!==(null==W?void 0:W.opacity)&&(pa[3]=W.opacity),{type:"esriSLS",style:"esriSLSSolid",color:pa,width:ia}}function jd(){return{type:"category",characterLimit:11}}function bd(){return{type:"number",
intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:3}}}function Va(W="Value Axis"){const I=fc({text:W,visible:!0,font:Zb(Cc.AxisTitle)});W=fc({text:W,visible:!0,font:Zb(Cc.AxisLabels)});return I.content.verticalAlignment="middle",I.content.horizontalAlignment="center",{type:"chartAxis",visible:!0,title:I,labels:W,valueFormat:bd(),lineSymbol:Pc({color:Lf})}}function ib(){return{type:"chartLegend",visible:!0,title:fc({text:"",visible:!0,font:Zb(Cc.LegendTitle)}),body:Qc("",Zb(Cc.LegendText)),
position:"right",maxHeight:NaN}}function lb(W){return{type:"chartOverlay",visible:!0,created:!1,symbol:Pc({useRampColor:{colorIndex:W},isHistogramOverlay:!0})}}function pb(){return k(this,void 0,void 0,function*(){return(yield Db()).defaultTitle})}function Jb(){return`Chart ${Date.now()}`}function Ub(W){const I=Sa(W,5);if(void 0!==W&&"featureLayer"===W.type){I.featureLayer.layerType="ArcGISFeatureLayer";let N=0;void 0!==W.featureLayer.id?N=W.featureLayer.id:void 0!==W.featureLayer.url&&(N=(T=W.featureLayer.url).substring(T.lastIndexOf("/")+
1));I.featureLayer.id=N}var T;return I}function nc(W=!1){return{type:"esriSMS",style:"esriSMSCircle",color:!0===W?zc(.7):ac({colorIndex:0,opacity:.7}),size:7}}function rc(W=!1){return{type:"chartOverlays",trendLine:{type:"chartOverlay",created:!1,visible:!0,symbol:{type:"esriSLS",style:"esriSLSSolid",color:!0===W?zc():ac({colorIndex:1}),width:2}}}}function Rb(W){return k(this,void 0,void 0,function*(){var I=yield Db();const T=[],N=I.xAxis;let ba;I=Va(I.statistics.count);const ia=Pc({opacity:75});
switch(I.grid=ia,W){case "barSeries":ba=function(pa="Category Axis"){const ta=fc({text:pa,visible:!0,font:Zb(Cc.AxisTitle)});ta.content.horizontalAlignment="center";ta.content.verticalAlignment="middle";pa=fc({text:pa,visible:!0,font:Zb(Cc.AxisLabels)});return{type:"chartAxis",visible:!0,title:ta,labels:pa,valueFormat:jd(),lineSymbol:Pc({color:Lf})}}(N);break;case "scatterSeries":ba=Va(N);ba.grid=ia;break;case "lineSeries":case "histogramSeries":ba=Va(N)}return void 0!==ba&&T.push(ba,I),T})}function pc(){return{type:"histogramSeries",
id:"histogramSeries",name:"histogramSeries",x:"",binCount:32,overlays:{type:"chartOverlays",mean:lb(1),median:lb(2),standardDeviation:lb(3),comparisonDistribution:lb(4)},dataTransformationType:na.None,fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:ac({colorIndex:0,opacity:.7})},colorType:"colorMatch",dataLabels:fc({text:"",visible:!1,font:Zb(Cc.DataLabels)}),rotated:!1}}function sc(W){void 0===W?We=Mf:(We={},Object.keys(Mf).forEach(I=>{var T;We[I]=null!==(T=W[I])&&void 0!==T?T:Mf[I]}))}function Gc(){return void 0===
We&&sc(),We}function Rc(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,
"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,
"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,
"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,
display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,
"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,
"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,
"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,
"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,
"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,
"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,
top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,
"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function tc(W){var I=W||{},T={},N;for(N in I)T[N]=I[N];(W=T).whiteList=W.whiteList||mf.whiteList;W.onAttr=W.onAttr||mf.onAttr;W.onIgnoreAttr=W.onIgnoreAttr||mf.onIgnoreAttr;W.safeAttrValue=W.safeAttrValue||mf.safeAttrValue;this.options=W}function $c(W){return W.replace(ni,"\x26lt;").replace(oi,"\x26gt;")}function qd(W){return W.replace(pi,"\x26quot;")}function Id(W){return W.replace(qi,'"')}function rd(W){return W.replace(ri,function(I,T){return"x"===
T[0]||"X"===T[0]?String.fromCharCode(parseInt(T.substr(1),16)):String.fromCharCode(parseInt(T,10))})}function Ud(W){return W.replace(si,":").replace(ti," ")}function Wc(W){for(var I="",T=0,N=W.length;T<N;T++)I+=32>W.charCodeAt(T)?" ":W.charAt(T);return nf.trim(I)}function Vd(W){return W=Wc(W=Ud(W=rd(W=Id(W))))}function Wd(W){return W=$c(W=qd(W))}function Nd(W,I){for(;I<W.length;I++){var T=W[I];if(" "!==T)return"\x3d"===T?I:-1}}function Ec(W,I){for(;0<I;I--){var T=W[I];if(" "!==T)return"\x3d"===T?
I:-1}}function Xd(W){return'"'===W[0]&&'"'===W[W.length-1]||"'"===W[0]&&"'"===W[W.length-1]?W.substr(1,W.length-2):W}function Yd(W){var I=W||{},T={},N;for(N in I)T[N]=I[N];(W=T).stripIgnoreTag&&(W.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),W.onIgnoreTag=Dd.onIgnoreTagStripAll);W.whiteList=W.whiteList||W.allowList||Dd.whiteList;W.onTag=W.onTag||Dd.onTag;W.onTagAttr=W.onTagAttr||Dd.onTagAttr;W.onIgnoreTag=W.onIgnoreTag||Dd.onIgnoreTag;
W.onIgnoreTagAttr=W.onIgnoreTagAttr||Dd.onIgnoreTagAttr;W.safeAttrValue=W.safeAttrValue||Dd.safeAttrValue;W.escapeHtml=W.escapeHtml||Dd.escapeHtml;this.options=W;!1===W.css?this.cssFilter=!1:(W.css=W.css||{},this.cssFilter=new ui(W.css))}function cd(W,I){let T;if(void 0!==W&&0<W.length)if(void 0!==I&&I<W.length)T=W[I].type;else{const N=W[0].type;!0===W.every(ba=>ba.type===N)?T=N:!1===W.some(ba=>"lineSeries"!==ba.type&&"barSeries"!==ba.type)&&(T="comboLineAndBarSeries")}return T}function Zd(W){var I;
let T;return"barSeries"!==W.type&&"lineSeries"!==W.type||(T=null!==(I=W.stackedType)&&void 0!==I?I:"sideBySide"),T}function Fd(W){let I=W,T="";"'"===W.charAt(0)&&"'"===W.charAt(W.length-1)&&(I=W.slice(1,-1),T="'");I=I.replace(/'/g,"''");W="";return!0===function(N){let ba=!1;"number"!=typeof N&&(ba=[...N].some(ia=>255<ia.charCodeAt(0)));return ba}(I)&&(W="N"),`${W}${T}${I}${T}`}function oe(W){const {value:I,keepSurroundingQuotes:T,escape:N}=W;var ba=I.trim();W="";"'"===ba.charAt(0)&&"'"===ba.charAt(ba.length-
1)&&(ba=ba.slice(1,-1),!0===T&&(W="'"));if(!1!==N){{let ia=ba;ba=(ia=ia.replace(/'/g,"''"),ia=ia.replace(/[/\\"|[\]\\]/g,"\\$\x26"),ia)}}return ba=`${W}${ba}${W}`,ba}function Bd(W){return null==W||""===`${W}`.trim()}function pe(W){return W.map(I=>`${I.id}`).filter(I=>"undefined"!==I)}function Od(W,I){let T=[];const N=null!=I?I:pe(W);return T=W.filter(ba=>N.includes(ba.id)).map(ba=>"y"in ba?ba.y:void 0).filter(ba=>void 0!==ba),Array.from(new Set(T))}function Gd(W){var I,T;const {seriesConfig:N,visibleSeriesId:ba,
filteredData:ia}=W,pa=function(Ia,xa){const Fa=new Map,Ga=null!=xa?xa:pe(Ia);return Ia.forEach(Ra=>{var Xa;if(Ga.includes(Ra.id)&&"y"in Ra){const fb=null!==(Xa=Fa.get(Ra.type))&&void 0!==Xa?Xa:[];fb.push(Ra.y);Fa.set(Ra.type,fb)}}),Fa}(N,ba),ta=null===(T=null===(I=N.find(Ia=>"lineSeries"===Ia.type))||void 0===I?void 0:I.stackNegativeValuesToBaseline)||void 0===T||T;let Ca=Number.MIN_SAFE_INTEGER,Da=Number.MAX_SAFE_INTEGER;return ia.forEach((Ia,xa)=>{pa.forEach(Fa=>{var Ga;if(!1===ta){var Ra=0;for(Ga=
0;Ga<Fa.length;Ga+=1)Ra+=Ia[Fa[Ga]],Ca=Math.max(Ca,Ra),Da=Math.min(Da,Ra)}else{let Xa=[],fb=[];for(let bb=0;bb<Fa.length;bb+=1){const jb=Ia[Fa[bb]];0>jb?fb[xa]=(null!==(Ra=fb[xa])&&void 0!==Ra?Ra:0)+jb:Xa[xa]=(null!==(Ga=Xa[xa])&&void 0!==Ga?Ga:0)+jb}Xa=Xa.filter(bb=>Number.isFinite(bb)).sort((bb,jb)=>bb-jb);fb=fb.filter(bb=>Number.isFinite(bb)).sort((bb,jb)=>bb-jb);Ca=Math.max(Ca,0<Xa.length?Xa[Xa.length-1]:fb[fb.length-1]);Da=Math.min(Da,0<fb.length?fb[0]:Xa[0])}})}),{stackedMinY:Da,stackedMaxY:Ca}}
function Qd(W){return"next"===W.toLowerCase()?"next":(W=W&&W.match(/^(\d)\.(\d+)/))&&{major:parseInt(W[1],10),minor:parseInt(W[2],10)}}function Rd(W){return void 0===W&&(W="4.21"),"https://js.arcgis.com/"+W+"/"}function ed(W){if(!W||Qd(W)){var I=W;void 0===I&&(I="4.21");W=Rd(I);I=Qd(I);W="next"!==I&&3===I.major?W+(10>=I.minor?"js/":"")+"esri/css/esri.css":W+"esri/themes/light/main.css"}return W}function ld(W,I){W=ed(W);var T=document.querySelector('link[href*\x3d"'+W+'"]');return T||function(N,ba){ba?
(ba=document.querySelector(ba),ba.parentNode.insertBefore(N,ba)):document.head.appendChild(N)}(T=function(N){var ba=document.createElement("link");return ba.rel="stylesheet",ba.href=N,ba}(W),I),T}function Ic(W,I,T){var N;T&&(N=function(ia,pa){var ta=function(Ca){pa(Ca.error||Error("There was an error attempting to load "+ia.src));ia.removeEventListener("error",ta,!1)};return ia.addEventListener("error",ta,!1),ta}(W,T));var ba=function(){I(W);W.removeEventListener("load",ba,!1);N&&W.removeEventListener("error",
N,!1)};W.addEventListener("load",ba,!1)}function wc(){return document.querySelector("script[data-esri-loader]")}function Tc(){var W=window.require;return W&&W.on}function fd(W){void 0===W&&(W={});var I={};[vi,W].forEach(function(ba){for(var ia in ba)Object.prototype.hasOwnProperty.call(ba,ia)&&(I[ia]=ba[ia])});var T=I.version,N=I.url||Rd(T);return new vg.Promise(function(ba,ia){var pa=wc();if(pa){var ta=pa.getAttribute("src");ta!==N?ia(Error("The ArcGIS API for JavaScript is already loaded ("+ta+
").")):Tc()?ba(pa):Ic(pa,ba,ia)}else Tc()?ia(Error("The ArcGIS API for JavaScript is already loaded.")):((ta=I.css)&&ld(!0===ta?T:ta,I.insertCssBefore),pa=function(Ca){var Da=document.createElement("script");return Da.type="text/javascript",Da.src=Ca,Da.setAttribute("data-esri-loader","loading"),Da}(N),Ic(pa,function(){pa.setAttribute("data-esri-loader","loaded");ba(pa)},ia),document.body.appendChild(pa))})}function md(W){return new vg.Promise(function(I,T){var N=window.require.on("error",T);window.require(W,
function(){for(var ba=[],ia=0;ia<arguments.length;ia++)ba[ia]=arguments[ia];N.remove();I(ba)})})}function Vc(W){return k(this,void 0,void 0,function*(){return function(I,T){if(void 0===T&&(T={}),Tc())return md(I);var N=wc();N=N&&N.getAttribute("src");return!T.url&&N&&(T.url=N),fd(T).then(function(){return md(I)})}(W,{version:"next",css:!0})})}function Ge(W,I,T,N){T=null==N||"number"==typeof N||"boolean"==typeof N?N:T(N);var ba=I.get(T);return void 0===ba&&(ba=W.call(this,N),I.set(T,ba)),ba}function Hd(W,
I,T){var N=Array.prototype.slice.call(arguments,3),ba=T(N),ia=I.get(ba);return void 0===ia&&(ia=W.apply(this,N),I.set(ba,ia)),ia}function Dc(W,I){var T=I.cache.create();return(1===W.length?Ge:Hd).bind(this,W,T,I.serializer)}function $d(){return JSON.stringify(arguments)}function Sc(){this.cache=Object.create(null)}function ke(W){return k(this,void 0,void 0,function*(){const [I]=yield Vc([od.FeatureLayer]),T=void 0!==W&&"type"in W&&"feature"===W.type;return W instanceof I||T})}function Cd(W){return k(this,
void 0,void 0,function*(){return!0===(yield ke(W))?W:W.layer})}function td(W,I){var T,N;return k(this,void 0,void 0,function*(){const ba=yield Cd(W);yield ba.load();let ia=ba.fields.map(pa=>pa.toJSON());if(!0===I&&void 0!==(null===(T=null==ba?void 0:ba.popupTemplate)||void 0===T?void 0:T.fieldInfos)){const pa=null===(N=null==ba?void 0:ba.popupTemplate)||void 0===N?void 0:N.fieldInfos.filter(ta=>ba.fieldsIndex.get(ta.fieldName)).map(ta=>{const Ca=ba.fieldsIndex.get(ta.fieldName);return Ca.alias=ta.label,
Ca.toJSON()});ia=wi(pa,ia,"name")}return ia=ia.map(pa=>{pa=Object.assign({},pa);return pa.alias=!0===Bd(pa.alias)?pa.name:pa.alias,pa}),ia})}function Lc(W,I=[]){return I.find(T=>T.name===W)}function Ad(W){var I;W=W.find(T=>"esriFieldTypeOID"===T.type);return null!==(I=null==W?void 0:W.name)&&void 0!==I?I:""}function sd(W){return["esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeSmallInteger","esriFieldTypeInteger"].includes(W.type)}function Jd(W,I){let T="";return void 0!==W&&!0===W.includes("\x3d")&&
(T=!1!==I?oe({value:W.split("\x3d")[0]}):W.split("\x3d")[0].trim()),T}function Mc(W){const {where:I,normalize:T,keepSurroundingQuotes:N,escape:ba}=W;W="";return void 0!==I&&!0===I.includes("\x3d")&&(W=I.split("\x3d")[1].trim(),W=!1===T?Fd(W):oe({value:W,keepSurroundingQuotes:N,escape:ba})),W}function Kd(W){let I=!1;void 0===W||""===W?I=!0:!0===W.includes("\x3d")&&(I=Jd(W,!1)===Mc({where:W,normalize:!1}));return I}function ud(W){var I,T,N;let ba=he.Simple;void 0!==(null==W?void 0:W[0])&&(!1===Kd(null===
(I=W[0].query)||void 0===I?void 0:I.where)?ba=he.SplitByFieldValues:void 0===(null===(T=W[0].query)||void 0===T?void 0:T.outStatistics)?ba=he.NoAggregation:"pieSeries"===cd(W,0)&&void 0===(null===(N=W[0].query)||void 0===N?void 0:N.groupByFieldsForStatistics)?ba=he.MultipleNumericFieldsAggregation:1<W.length&&(ba=he.SplitByNumericalFields));return ba}function gd(W,I){var T;return k(this,void 0,void 0,function*(){const N=(yield td(W)).find(ba=>I.toUpperCase()===ba.name.toUpperCase());return null!==
(T=null==N?void 0:N.name)&&void 0!==T?T:I})}function Ld(W){var I,T,N,ba,ia;let pa=null!==(T=null===(I=null==W?void 0:W.sourceJSON)||void 0===I?void 0:I.maxRecordCount)&&void 0!==T?T:Ae.maxRecords;return(null===(ba=null===(N=null==W?void 0:W.sourceJSON)||void 0===N?void 0:N.advancedQueryCapabilities)||void 0===ba?void 0:ba.supportsMaxRecordCountFactor)&&(pa=(null===(ia=null==W?void 0:W.sourceJSON)||void 0===ia?NaN:ia.maxRecordCount)*Ae.maxRecordCountFactor),pa}function Ed(W,I){let T;W=Array.from(new Set(W)).filter(N=>
null!=N&&""!==N&&!1===Kd(N));return W.sort((N,ba)=>ba.length-N.length),1===W.length?[T]=W:null==W||W.forEach(N=>{void 0!==N&&(!0===Bd(T)?T=`(${N})`:!1===(null==T?void 0:T.includes(N))&&(T=`${T} ${null!=I?I:"AND"} (${N})`))}),null!=T?T:"1 \x3d 1"}function Sd(W){var I,T;return k(this,void 0,void 0,function*(){const {queryObject:N,chartQuery:ba,outFields:ia,start:pa,num:ta,maxRecordCountFactor:Ca,filter:Da,returnDistinctValues:Ia,cacheHint:xa}=W;var [Fa]=yield Vc([od.Query]);Fa=new Fa;Fa.returnGeometry=
!1;const Ga=yield Cd(N);if(Fa.where=Ed([null==ba?void 0:ba.where,Da,Ga.definitionExpression]),Fa.outFields=null!=ia?ia:["*"],Fa.groupByFieldsForStatistics=null!==(I=null==ba?void 0:ba.groupByFieldsForStatistics)&&void 0!==I?I:Fa.groupByFieldsForStatistics,Fa.orderByFields=null!==(T=null==ba?void 0:ba.orderByFields)&&void 0!==T?T:[],Fa.returnDistinctValues=null!=Ia&&Ia,void 0!==(null==ba?void 0:ba.outStatistics)){const [Ra]=yield Vc([od.StatisticDefinition]);Fa.outStatistics=ba.outStatistics.map(Xa=>
Ra.fromJSON(Xa))}if(void 0!==(null==ba?void 0:ba.extent)){const [Ra]=yield Vc([od.Extent]);Fa.geometry=new Ra(ba.extent)}return void 0!==Ca&&(Fa.maxRecordCountFactor=Ca),Fa.cacheHint=!1!==xa,void 0!==N&&void 0!==pa&&(Fa.start=pa,Fa.num=null!=ta?ta:Ld(Ga)),Fa})}function He(W){var I,T;return!0===(null===(T=null===(I=null==W?void 0:W.sourceJSON)||void 0===I?void 0:I.advancedQueryCapabilities)||void 0===T?void 0:T.supportsMaxRecordCountFactor)?Ae.maxRecordCountFactor:void 0}function vd(W=Cb().locale){return k(this,
void 0,void 0,function*(){let I=yield new Promise(function(T,N){u(["./errors.t9n.en-a08db8f4"],T,N)});switch(W){case Ib.Arabic:I=yield new Promise(function(T,N){u(["./errors.t9n.ar-502bfd25"],T,N)});break;case Ib.Bosnian:I=yield new Promise(function(T,N){u(["./errors.t9n.bs-13069a6f"],T,N)});break;case Ib.Bulgarian:I=yield new Promise(function(T,N){u(["./errors.t9n.bg-654afcba"],T,N)});break;case Ib.Catalan:I=yield new Promise(function(T,N){u(["./errors.t9n.ca-c403da1e"],T,N)});break;case Ib.Czech:I=
yield new Promise(function(T,N){u(["./errors.t9n.cs-dc268980"],T,N)});break;case Ib.Danish:I=yield new Promise(function(T,N){u(["./errors.t9n.da-d7270a9c"],T,N)});break;case Ib.German:I=yield new Promise(function(T,N){u(["./errors.t9n.de-eface513"],T,N)});break;case Ib.Greek:I=yield new Promise(function(T,N){u(["./errors.t9n.el-e2f11895"],T,N)});break;case Ib.EnglishUSA:I=yield new Promise(function(T,N){u(["./errors.t9n.en-US-811efe62"],T,N)});break;case Ib.Spanish:I=yield new Promise(function(T,
N){u(["./errors.t9n.es-32b08219"],T,N)});break;case Ib.Estonian:I=yield new Promise(function(T,N){u(["./errors.t9n.et-7fea93bf"],T,N)});break;case Ib.Finnish:I=yield new Promise(function(T,N){u(["./errors.t9n.fi-8ecf8a8d"],T,N)});break;case Ib.French:I=yield new Promise(function(T,N){u(["./errors.t9n.fr-a1d429e0"],T,N)});break;case Ib.Hebrew:I=yield new Promise(function(T,N){u(["./errors.t9n.he-ad57e62b"],T,N)});break;case Ib.Croatian:I=yield new Promise(function(T,N){u(["./errors.t9n.hr-fed010ee"],
T,N)});break;case Ib.Hungarian:I=yield new Promise(function(T,N){u(["./errors.t9n.hu-528c5c2e"],T,N)});break;case Ib.Indonesian:I=yield new Promise(function(T,N){u(["./errors.t9n.id-970909f0"],T,N)});break;case Ib.Italian:I=yield new Promise(function(T,N){u(["./errors.t9n.it-c4c5a8e0"],T,N)});break;case Ib.Japanese:I=yield new Promise(function(T,N){u(["./errors.t9n.ja-90a1fcc8"],T,N)});break;case Ib.Korean:I=yield new Promise(function(T,N){u(["./errors.t9n.ko-21824da1"],T,N)});break;case Ib.Lithuanian:I=
yield new Promise(function(T,N){u(["./errors.t9n.lt-099eaca2"],T,N)});break;case Ib.Latvian:I=yield new Promise(function(T,N){u(["./errors.t9n.lv-a0755e78"],T,N)});break;case Ib.NorwegianBokml:I=yield new Promise(function(T,N){u(["./errors.t9n.nb-0a5d7938"],T,N)});break;case Ib.Dutch:I=yield new Promise(function(T,N){u(["./errors.t9n.nl-44bcd628"],T,N)});break;case Ib.Polish:I=yield new Promise(function(T,N){u(["./errors.t9n.pl-8bb0569d"],T,N)});break;case Ib.PortugueseBrazil:I=yield new Promise(function(T,
N){u(["./errors.t9n.pt-BR-ca375f60"],T,N)});break;case Ib.PortuguesePortugal:I=yield new Promise(function(T,N){u(["./errors.t9n.pt-PT-ee89a682"],T,N)});break;case Ib.Romanian:I=yield new Promise(function(T,N){u(["./errors.t9n.ro-f15385eb"],T,N)});break;case Ib.Russian:I=yield new Promise(function(T,N){u(["./errors.t9n.ru-357176fa"],T,N)});break;case Ib.Serbian:I=yield new Promise(function(T,N){u(["./errors.t9n.sr-0e2c3b66"],T,N)});break;case Ib.Slovak:I=yield new Promise(function(T,N){u(["./errors.t9n.sk-2b644a9f"],
T,N)});break;case Ib.Slovenian:I=yield new Promise(function(T,N){u(["./errors.t9n.sl-654a6600"],T,N)});break;case Ib.Swedish:I=yield new Promise(function(T,N){u(["./errors.t9n.sv-9e9512c3"],T,N)});break;case Ib.Thai:I=yield new Promise(function(T,N){u(["./errors.t9n.th-29d62ed5"],T,N)});break;case Ib.Turkish:I=yield new Promise(function(T,N){u(["./errors.t9n.tr-9770a961"],T,N)});break;case Ib.Ukrainian:I=yield new Promise(function(T,N){u(["./errors.t9n.uk-3f5d97cb"],T,N)});break;case Ib.Vietnamese:I=
yield new Promise(function(T,N){u(["./errors.t9n.vi-330d3713"],T,N)});break;case Ib.ChineseChina:I=yield new Promise(function(T,N){u(["./errors.t9n.zh-CN-b2fd8601"],T,N)});break;case Ib.ChineseHongKong:I=yield new Promise(function(T,N){u(["./errors.t9n.zh-HK-4dfe194e"],T,N)});break;case Ib.ChineseTaiwan:I=yield new Promise(function(T,N){u(["./errors.t9n.zh-TW-38eed815"],T,N)})}return I})}function Ac(W){var I,T,N;return k(this,void 0,void 0,function*(){const {queryObject:ba,statsList:ia,filter:pa,
extent:ta,returnDistinctValues:Ca,abortKey:Da}=W,Ia=new Map;if(void 0!==ba&&void 0!==ia&&0<ia.length){const Ga=[];ia.forEach(Xa=>{const {statisticType:fb,onStatisticField:bb,outStatisticFieldName:jb}=Xa;Ga.push({statisticType:fb,onStatisticField:bb,outStatisticFieldName:null==jb?void 0:jb.toUpperCase()})});var xa=yield Sd({queryObject:ba,chartQuery:{where:pa,extent:ta,outStatistics:Ga},returnDistinctValues:Ca});try{var Fa=yield ba.queryFeatures(xa,{signal:void 0!==Da?null===(I=Xe.get(Da))||void 0===
I?void 0:I.signal:void 0})}catch(Xa){if([xa]=yield Vc([od.PromiseUtils]),!1===xa.isAbortError(Xa))throw Fa=yield vd(),new Nf(of.QueryFeaturesError,Fa.queryError,Xa);}const Ra=null===(N=null===(T=null==Fa?void 0:Fa.features)||void 0===T?void 0:T[0])||void 0===N?void 0:N.attributes;void 0!==Ra&&ia.forEach(Xa=>{({outStatisticFieldName:Xa}=Xa);if(void 0!==Xa){const fb=Xa.toUpperCase();fb in Ra&&Ia.set(Xa,Ra[fb])}})}return Ia})}function le(W){var I;return k(this,void 0,void 0,function*(){const {queryObject:T,
chartQuery:N,outFields:ba,start:ia,num:pa,returnDistinctValues:ta,returnUniqueIdsOnly:Ca,abortKey:Da}=W;var Ia=[];if(void 0!==T){var xa=He(yield Cd(T));xa=yield Sd({queryObject:T,chartQuery:N,outFields:ba,start:ia,num:pa,maxRecordCountFactor:xa,returnDistinctValues:ta});try{Ia=!0===Ca?yield T.queryObjectIds(xa):(yield T.queryFeatures(xa,{signal:void 0!==Da?null===(I=Xe.get(Da))||void 0===I?void 0:I.signal:void 0})).features}catch(Fa){if([xa]=yield Vc([od.PromiseUtils]),!1===xa.isAbortError(Fa))throw Ia=
yield vd(),new Nf(of.QueryFeaturesError,Ia.queryError,Fa);}}return Ia})}function me(W){return k(this,void 0,void 0,function*(){let I=0;const T=[],{featureCount:N,maxRecords:ba}=W;let {start:ia}=W,pa=[];for(;I<Ae.maxParallelRequests&&ia<N;){const ta=Object.assign(Object.assign({},W),{start:ia,num:ba});T.push(le(ta));ia+=ba;I+=1}return pa=(yield Promise.all(T)).reduce((ta,Ca)=>[...ta,...Ca],[]),pa})}function Td(W){var I;return k(this,void 0,void 0,function*(){const {queryObject:T,chartQuery:N,outFields:ba,
filter:ia,returnDistinctValues:pa,returnUniqueIdsOnly:ta,featureCount:Ca,num:Da,start:Ia,noBatch:xa,abortKey:Fa}=W;var Ga=yield Sd({queryObject:T,chartQuery:N,outFields:ba,filter:ia,returnDistinctValues:pa});Ga=Object.assign(Object.assign({},N),{where:Ga.where});var Ra=[];if(void 0!==T){var Xa=yield Cd(T),fb=Ad(yield td(T));fb=null!==(I=null!=Ca?Ca:(yield Ac({queryObject:T,filter:Ed([ia,null==N?void 0:N.where]),statsList:[{statisticType:"count",onStatisticField:fb,outStatisticFieldName:"count"}],
abortKey:Fa})).get("count"))&&void 0!==I?I:NaN;const jb=Ld(Xa);if(!0!==xa&&fb>jb&&!0===Xa.capabilities.query.supportsPagination){var bb=0;Ra=0;Xa=Math.ceil(Math.ceil(fb/jb)/Ae.maxParallelRequests);const qb=[];for(;Ra<Xa;)bb=Ra*Ae.maxParallelRequests*jb,bb=me(Object.assign(Object.assign({chartQuery:Ga,outFields:ba},{queryObject:T,start:bb,maxRecords:jb,featureCount:fb,returnDistinctValues:pa,abortKey:Fa}),{returnUniqueIdsOnly:ta})),qb.push(bb),Ra+=1;Ra=(yield Promise.all(qb)).flat()}else 0<fb&&(Ra=
yield le({queryObject:T,chartQuery:Ga,outFields:ba,returnDistinctValues:pa,returnUniqueIdsOnly:ta,num:Da,start:Ia,abortKey:Fa}))}return Ra})}function ae(W,I){return W===na.None||W===na.Log&&0<I||W===na.Sqrt&&0<=I}function Ie(W,I){const T={valid:!1};return!0===I?T.invalidType=Xc.HistogramEmptyField:W===na.Log?T.invalidType=Xc.NegativeValueInLogCalculation:W===na.Sqrt&&(T.invalidType=Xc.NegativeValueInSqrtCalculation),T}function Je(W){return b().thresholds((I,T,N)=>function(ba,ia,pa){ba=+ba;ia=+ia;
pa=2>(Ca=arguments.length)?(ia=ba,ba=0,1):3>Ca?1:+pa;for(var ta=-1,Ca=0|Math.max(0,Math.ceil((ia-ba)/pa)),Da=Array(Ca);++ta<Ca;)Da[ta]=ba+ta*pa;return Da}(W).map(ba=>T+ba/W*(N-T)))}function be(W,I){const {x:T,dataTransformationType:N}=I;I=W.length;{const {field:Ca,data:Da,transformation:Ia}={field:T,data:W,transformation:N};W=0;let xa=Number.MAX_SAFE_INTEGER;const Fa=[...Da];for(let Ga=0;Ga<Fa.length;Ga+=1){var ba=Fa[Ga][Ca];if("number"==typeof ba){xa=Math.min(xa,ba);{let Ra=ba;switch(Ia){case na.Log:Ra=
Math.log(ba);break;case na.Sqrt:Ra=Math.sqrt(ba)}ba=Ra}Fa[Ga][Ca]=ba;W+=1}}W={transformedData:Fa,nonNullCount:W,min:xa}}const {transformedData:ia,nonNullCount:pa,min:ta}=W;W=2>pa;return{rawData:ia,dataCompatibleWithTransformation:ae(N,ta),dataCountIncompatible:W,countExcludingNulls:pa,countIncludingNulls:I}}function Ke(W,I){var T,N,ba,ia;const {x:pa,binCount:ta}=W;W={valid:!0};if(void 0!==I){var Ca=I.map(Fa=>Fa[pa]);let Ia=[];Ia=Je(null!=ta?ta:32)(Ca).map(Fa=>{var Ga,Ra;return{count:Fa.length,minValue:null!==
(Ga=Fa.x0)&&void 0!==Ga?Ga:NaN,maxValue:null!==(Ra=Fa.x1)&&void 0!==Ra?Ra:NaN}});const xa=null!==(T=function(Fa,Ga){let Ra=0,Xa=0;if(void 0===Ga)for(var fb of Fa)null!=fb&&(fb=+fb)>=fb&&(++Ra,Xa+=fb);else{fb=-1;for(let bb of Fa)null!=(bb=Ga(bb,++fb,Fa))&&(bb=+bb)>=bb&&(++Ra,Xa+=bb)}if(Ra)return Xa/Ra}(Ca))&&void 0!==T?T:NaN;T=null!==(N=function(Fa,Ga){{let Xa,fb=0,bb=0,jb=0;if(void 0===Ga)for(var Ra of Fa)null!=Ra&&(Ra=+Ra)>=Ra&&(Xa=Ra-bb,bb+=Xa/++fb,jb+=Xa*(Ra-bb));else{Ra=-1;for(let qb of Fa)null!=
(qb=Ga(qb,++Ra,Fa))&&(qb=+qb)>=qb&&(Xa=qb-bb,bb+=Xa/++fb,jb+=Xa*(qb-bb))}Fa=1<fb?jb/(fb-1):void 0}return Fa?Math.sqrt(Fa):Fa}(Ca))&&void 0!==N?N:NaN;N=null!==(ba=l(Ca,.5,Da))&&void 0!==ba?ba:NaN;ba=Ia[0].minValue;var Da=Ia[Ia.length-1].maxValue;Ca=null!==(ia=m(Ca))&&void 0!==ia?ia:NaN;ia=m(Ia,Fa=>Fa.count);W.data={mean:xa,median:N,stddev:T,min:ba,max:Da,bins:Ia,count:I.length,nulls:I.length-ia,sum:Ca}}return W}function qe(W,I,T,N){var ba=N?" !\x3d\x3d ":" \x3d\x3d\x3d ",ia=N?" || ":" \x26\x26 ",pa=
N?"!":"";N=N?"":"!";switch(W){case "null":return I+ba+"null";case "array":return pa+"Array.isArray("+I+")";case "object":return"("+pa+I+ia+"typeof "+I+ba+'"object"'+ia+N+"Array.isArray("+I+"))";case "integer":return"(typeof "+I+ba+'"number"'+ia+N+"("+I+" % 1)"+ia+I+ba+I+(T?ia+pa+"isFinite("+I+")":"")+")";case "number":return"(typeof "+I+ba+'"'+W+'"'+(T?ia+pa+"isFinite("+I+")":"")+")";default:return"typeof "+I+ba+'"'+W+'"'}}function hd(W){for(var I={},T=0;T<W.length;T++)I[W[T]]=!0;return I}function re(W){return"number"==
typeof W?"["+W+"]":xi.test(W)?"."+W:"['"+Gb(W)+"']"}function Gb(W){return W.replace(yi,"\\$\x26").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Bc(W){return"'"+Gb(W)+"'"}function id(W,I){return'""'==W?I:(W+" + "+I).replace(/([^\\])' \+ '/g,"$1")}function se(W){return W.replace(/~/g,"~0").replace(/\//g,"~1")}function te(W){return W.replace(/~1/g,"/").replace(/~0/g,"~")}function ce(W,I,T,N,ba,ia,pa,ta,Ca,Da){if(N&&"object"==typeof N&&!Array.isArray(N)){for(var Ia in I(N,
ba,ia,pa,ta,Ca,Da),N){var xa=N[Ia];if(Array.isArray(xa)){if(Ia in ie.arrayKeywords)for(var Fa=0;Fa<xa.length;Fa++)ce(W,I,T,xa[Fa],ba+"/"+Ia+"/"+Fa,ia,ba,Ia,N,Fa)}else if(Ia in ie.propsKeywords){if(xa&&"object"==typeof xa)for(var Ga in xa)ce(W,I,T,xa[Ga],ba+"/"+Ia+"/"+Ga.replace(/~/g,"~0").replace(/\//g,"~1"),ia,ba,Ia,N,Ga)}else(Ia in ie.keywords||W.allKeys&&!(Ia in ie.skipKeywords))&&ce(W,I,T,xa,ba+"/"+Ia,ia,ba,Ia,N)}T(N,ba,ia,pa,ta,Ca,Da)}}function ad(W,I,T){var N=this._refs[T];if("string"==typeof N){if(!this._refs[N])return ad.call(this,
W,I,N);N=this._refs[N]}if((N=N||this._schemas[T])instanceof pf)return ve(N.schema,this._opts.inlineRefs)?N.schema:N.validate||this._compile(N);var ba,ia,pa;T=de.call(this,I,T);return T&&(ba=T.schema,I=T.root,pa=T.baseId),ba instanceof pf?ia=ba.validate||W.call(this,ba.schema,I,void 0,pa):void 0!==ba&&(ia=ve(ba,this._opts.inlineRefs)?ba:W.call(this,ba,I,void 0,pa)),ia}function de(W,I){var T=Me.parse(I),N=Me.serialize(T).split("#")[0]+"#",ba=ee(this._getId(W.schema));if(0===Object.keys(W.schema).length||
N!==ba){N=wd(N);var ia=this._refs[N];if("string"==typeof ia)return(ba=de.call(this,W,ia))?(I=ba.schema,W=ba.baseId,ba=ba.root,N=this._getId(I),T=(N&&(W=fe(W,N)),ue.call(this,T,W,I,ba))):T=void 0,T;if(ia instanceof pf)ia.validate||this._compile(ia);else{if(!((ia=this._schemas[N])instanceof pf))return;if(ia.validate||this._compile(ia),N==wd(I))return{schema:ia,root:W,baseId:ba}}W=ia;if(!W.schema)return;ba=ee(this._getId(W.schema))}return ue.call(this,T,ba,W.schema,W)}function ue(W,I,T,N){if(W.fragment=
W.fragment||"","/"==W.fragment.slice(0,1)){W=W.fragment.split("/");for(var ba=1;ba<W.length;ba++){var ia=W[ba];if(ia){if(void 0===(T=T[ia=qf.unescapeFragment(ia)]))break;var pa;!zi[ia]&&((pa=this._getId(T))&&(I=fe(I,pa)),T.$ref)&&(ia=fe(I,T.$ref),(ia=de.call(this,N,ia))&&(T=ia.schema,N=ia.root,I=ia.baseId))}}return void 0!==T&&T!==N.schema?{schema:T,root:N,baseId:I}:void 0}}function ve(W,I){return!1!==I&&(void 0===I||!0===I?we(W):I?xe(W)<=I:void 0)}function we(W){var I;if(Array.isArray(W))for(var T=
0;T<W.length;T++){if("object"==typeof(I=W[T])&&!we(I))return!1}else for(T in W)if("$ref"==T||"object"==typeof(I=W[T])&&!we(I))return!1;return!0}function xe(W){var I,T=0;if(Array.isArray(W))for(var N=0;N<W.length;N++){if("object"==typeof(I=W[N])&&(T+=xe(I)),T==1/0)return 1/0}else for(N in W){if("$ref"==N)return 1/0;if(Ai[N])T++;else if("object"==typeof(I=W[N])&&(T+=xe(I)+1),T==1/0)return 1/0}return T}function ee(W,I){return!1!==I&&(W=wd(W)),Me.serialize(Me.parse(W)).split("#")[0]+"#"}function wd(W){return W?
W.replace(Bi,""):""}function fe(W,I){return I=wd(I),Me.resolve(W,I)}function ye(W,I,T){this.message=T||ye.message(W,I);this.missingRef=Of.url(W,I);this.missingSchema=Of.normalizeId(Of.fullPath(this.missingRef))}function ze(W){return W.prototype=Object.create(Error.prototype),W.prototype.constructor=W,W}function Te(W,I,T){var N=Uc.call(this,W,I,T);return 0<=N?{index:N,compiling:!0}:(N=this._compilations.length,this._compilations[N]={schema:W,root:I,baseId:T},{index:N,compiling:!1})}function xd(W,I,
T){W=Uc.call(this,W,I,T);0<=W&&this._compilations.splice(W,1)}function Uc(W,I,T){for(var N=0;N<this._compilations.length;N++){var ba=this._compilations[N];if(ba.schema==W&&ba.root==I&&ba.baseId==T)return N}return-1}function ne(W,I){return"var pattern"+W+" \x3d new RegExp("+rf.toQuotedString(I[W])+");"}function Qb(W){return"var default"+W+" \x3d defaults["+W+"];"}function Jc(W,I){return void 0===I[W]?"":"var refVal"+W+" \x3d refVal["+W+"];"}function aa(W){return"var customRule"+W+" \x3d customRules["+
W+"];"}function ka(W,I){if(!W.length)return"";for(var T="",N=0;N<W.length;N++)T+=I(N,W);return T}function za(W){return W="full"==W?"full":"fast",Ci.copy(za[W])}function La(W){var I=W.match(Di);if(!I)return!1;W=+I[1];var T=+I[2];I=+I[3];return 1<=T&&12>=T&&1<=I&&I<=(2!=T||0!=W%4||0==W%100&&0!=W%400?Ei[T]:29)}function mb(W,I){var T=W.match(Fi);if(!T)return!1;W=T[1];var N=T[2],ba=T[3];T=T[5];return(23>=W&&59>=N&&59>=ba||23==W&&59==N&&60==ba)&&(!I||T)}function Eb(W){if(Gi.test(W))return!1;try{return new RegExp(W),
!0}catch(I){return!1}}function wb(W){if(!(this instanceof wb))return new wb(W);W=this._opts=wg.copy(W)||{};(function(T){var N=T._opts.logger;if(!1===N)T.logger={log:Ne,warn:Ne,error:Ne};else{if(void 0===N&&(N=console),!("object"==typeof N&&N.log&&N.warn&&N.error))throw Error("logger must implement log, warn and error methods");T.logger=N}})(this);this._schemas={};this._refs={};this._fragments={};this._formats=Hi(W.format);this._cache=W.cache||new Ii;this._loadingSchemas={};this._compilations=[];this.RULES=
Ji();a:switch(W.schemaId){case "auto":var I=Md;break a;case "id":I=oc;break a;default:I=kd}this._getId=I;W.loopRequired=W.loopRequired||1/0;"property"==W.errorDataPath&&(W._errorDataPathProperty=!0);void 0===W.serialize&&(W.serialize=Ki);this._metaOpts=function(T){T=wg.copy(T._opts);for(var N=0;N<xg.length;N++)delete T[xg[N]];return T}(this);W.formats&&function(T){for(var N in T._opts.formats)T.addFormat(N,T._opts.formats[N])}(this);W.keywords&&function(T){for(var N in T._opts.keywords)T.addKeyword(N,
T._opts.keywords[N])}(this);(function(T){var N;T._opts.$data&&(N=Li,T.addMetaSchema(N,N.$id,!0));!1!==T._opts.meta&&(N=yg,T._opts.$data&&(N=zg(N,Mi)),T.addMetaSchema(N,sf,!0),T._refs["http://json-schema.org/schema"]=sf)})(this);"object"==typeof W.meta&&this.addMetaSchema(W.meta);W.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}});(function(T){var N=T._opts.schemas;if(N)if(Array.isArray(N))T.addSchema(N);else for(var ba in N)T.addSchema(N[ba],ba)})(this)}function dc(W,I){return I=
Be.normalizeId(I),W._schemas[I]||W._refs[I]||W._fragments[I]}function uc(W,I,T){for(var N in I){var ba=I[N];ba.meta||T&&!T.test(N)||(W._cache.del(ba.cacheKey),delete I[N])}}function oc(W){return W.$id&&this.logger.warn("schema $id ignored",W.$id),W.id}function kd(W){return W.id&&this.logger.warn("schema id ignored",W.id),W.$id}function Md(W){if(W.$id&&W.id&&W.$id!=W.id)throw Error("schema $id is different from id");return W.$id||W.id}function tf(W,I){if(W._schemas[I]||W._refs[I])throw Error('schema with key or id "'+
I+'" already exists');}function Ne(){}function uf(W){const I=W.lastIndexOf("/");return-1!==I?W.slice(I+1):W}function Pf(W,I){return k(this,void 0,void 0,function*(){let T=[];if("featureLayer"===W.dataSource.type&&void 0!==I){const N=yield function(ba,ia){var pa;return k(this,void 0,void 0,function*(){const ta=yield td(ia),Ca=[],Da=yield vd();for(let Ia=0;Ia<ba.length;Ia+=1){const xa=null===(pa=ba[Ia].query)||void 0===pa?void 0:pa.outStatistics;if(void 0!==xa)for(let Fa=0;Fa<xa.length;Fa+=1){const Ga=
xa[Fa],Ra=Lc(Ga.onStatisticField,ta);if(void 0!==Ra&&!1===sd(Ra)&&"count"!==Ga.statisticType){const Xa=`series[${Ia}].query.outStatistics[${Fa}]`;Ca.push({keyword:Qf.NonNumericAggregation,message:Oa(Da.nonNumericAggregation,{dataPath:Xa}),dataPath:Xa,params:{fieldName:Ga.onStatisticField,fieldType:Ra.type,aggregationRequested:Ga.statisticType}})}}}return Ca})}(W.series,I);T=T.concat(N)}return T=T.concat(yield function(N){return k(this,void 0,void 0,function*(){const ba=[],ia=yield vd();if(void 0!==
N&&1<N.series.length){const pa=new Set;let ta=0;N.series.forEach((Ca,Da)=>{(pa.add(Ca.id),pa.size===ta)?(Da=`series[${Da}].id`,ba.push({keyword:Qf.DuplicateSeriesID,message:Oa(ia.duplicateSeriesID,{dataPath:Da,seriesID:Ca.id,seriesName:Ca.name}),dataPath:Da,params:{seriesId:Ca.id,seriesName:Ca.name}})):ta+=1})}return ba})}(W)),T})}function gc(W,I){return k(this,void 0,void 0,function*(){let T=[];if("featureLayer"===(null==W?void 0:W.dataSource.type)&&void 0!==I){const N=yield function(ba){var ia,
pa,ta;return k(this,void 0,void 0,function*(){const Ca=yield vd();var Da=yield Cd(ba);try{yield Da.load()}catch(xa){var Ia=null!==(ia=Da.url)&&void 0!==ia?ia:"";Da=null!==(ta=null===(pa=Da.portalItem)||void 0===pa?void 0:pa.id)&&void 0!==ta?ta:"";Ia={keyword:of.LayerLoadFailure,message:Oa(Ca.layerLoadFailure,{url:Ia,portalItemId:Da}),params:{url:Ia,portalItemId:Da}}}return Ia})}(I);void 0!==N&&(T=T.concat(N))}return T})}function Z(W,I){return k(this,void 0,void 0,function*(){return void 0!==W&&(W=
yield Promise.all(W.map(T=>k(this,void 0,void 0,function*(){return gd(I,T)})))),W})}const na={None:"none",Log:"logarithmic",Sqrt:"squareRoot"},Ea=r(h).right;r(function(W){return null===W?NaN:+W}).center;var Qa=Ea,Ua=Array.prototype.slice,cb=Math.sqrt(50),ob=Math.sqrt(10),Ab=Math.sqrt(2),Sb="object"==typeof global&&global&&global.Object===Object&&global,Hc="object"==typeof self&&self&&self.Object===Object&&self,Yb=Sb||Hc||Function("return this")(),bc=Yb.Symbol,xc=Object.prototype,dd=xc.hasOwnProperty,
ge=xc.toString,nd=bc?bc.toStringTag:void 0,Ue=Object.prototype.toString,dg=bc?bc.toStringTag:void 0,yd=Array.isArray,Ag=bc?bc.prototype:void 0,eg=Ag?Ag.toString:void 0,Bg,Rf=Yb["__core-js_shared__"],fg=(Bg=/[^.]+$/.exec(Rf&&Rf.keys&&Rf.keys.IE_PROTO||""))?"Symbol(src)_1."+Bg:"",Hh=Function.prototype.toString,Jh=/^\[object .+?Constructor\]$/,Ih=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
"$1.*?")+"$"),Sf=F(Yb,"WeakMap"),Cg=Object.create,Zh=function(){function W(){}return function(I){if(!y(I))return{};if(Cg)return Cg(I);W.prototype=I;I=new W;return W.prototype=void 0,I}}(),Ni=Date.now,hf=function(){try{var W=F(Object,"defineProperty");return W({},"",{}),W}catch(I){}}(),Mh=function(W){var I=0,T=0;return function(){var N=Ni(),ba=16-(N-T);if(T=N,0<ba){if(800<=++I)return arguments[0]}else I=0;return W.apply(void 0,arguments)}}(hf?function(W,I){return hf(W,"toString",{configurable:!0,enumerable:!1,
value:(T=I,function(){return T}),writable:!0});var T}:B),Kh=/^(?:0|[1-9]\d*)$/,Lh=Object.prototype.hasOwnProperty,gg=Math.max,Nh=Object.prototype,Dg=Object.prototype,Oi=Dg.hasOwnProperty,Pi=Dg.propertyIsEnumerable,jf=Q(function(){return arguments}())?Q:function(W){return t(W)&&Oi.call(W,"callee")&&!Pi.call(W,"callee")},Eg="object"==typeof n&&n&&!n.nodeType&&n,Fg=Eg&&"object"==typeof module&&module&&!module.nodeType&&module,Gg=Fg&&Fg.exports===Eg?Yb.Buffer:void 0,Ve=(Gg?Gg.isBuffer:void 0)||function(){return!1},
Nc={};Nc["[object Float32Array]"]=Nc["[object Float64Array]"]=Nc["[object Int8Array]"]=Nc["[object Int16Array]"]=Nc["[object Int32Array]"]=Nc["[object Uint8Array]"]=Nc["[object Uint8ClampedArray]"]=Nc["[object Uint16Array]"]=Nc["[object Uint32Array]"]=!0;Nc["[object Arguments]"]=Nc["[object Array]"]=Nc["[object ArrayBuffer]"]=Nc["[object Boolean]"]=Nc["[object DataView]"]=Nc["[object Date]"]=Nc["[object Error]"]=Nc["[object Function]"]=Nc["[object Map]"]=Nc["[object Number]"]=Nc["[object Object]"]=
Nc["[object RegExp]"]=Nc["[object Set]"]=Nc["[object String]"]=Nc["[object WeakMap]"]=!1;var Hg="object"==typeof n&&n&&!n.nodeType&&n,Ye=Hg&&"object"==typeof module&&module&&!module.nodeType&&module,Tf=Ye&&Ye.exports===Hg&&Sb.process;a:{try{var Ce=Ye&&Ye.require&&Ye.require("util").types||Tf&&Tf.binding&&Tf.binding("util");break a}catch(W){}Ce=void 0}var Ig=Ce&&Ce.isTypedArray,Hf=Ig?Y(Ig):function(W){return t(W)&&R(W.length)&&!!Nc[q(W)]},Oh=Object.prototype.hasOwnProperty,Ph=da(Object.keys,Object),
Qh=Object.prototype.hasOwnProperty,Rh=Object.prototype.hasOwnProperty,Uf,pg=(Uf=function(W,I,T,N){M(I,ha(I),W,N)},J(function(W,I){var T=-1,N=I.length,ba=1<N?I[N-1]:void 0,ia=2<N?I[2]:void 0;ba=3<Uf.length&&"function"==typeof ba?(N--,ba):void 0;ia&&U(I[0],I[1],ia)&&(ba=3>N?void 0:ba,N=1);for(W=Object(W);++T<N;)(ia=I[T])&&Uf(W,ia,T,ba);return W})),Th=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sh=/^\w*$/,Ze=F(Object,"create"),Qi=Object.prototype.hasOwnProperty,Ri=Object.prototype.hasOwnProperty;
ea.prototype.clear=function(){this.__data__=Ze?Ze(null):{};this.size=0};ea.prototype.delete=function(W){W=this.has(W)&&delete this.__data__[W];return this.size-=W?1:0,W};ea.prototype.get=function(W){var I=this.__data__;return Ze?(W=I[W],"__lodash_hash_undefined__"===W?void 0:W):Qi.call(I,W)?I[W]:void 0};ea.prototype.has=function(W){var I=this.__data__;return Ze?void 0!==I[W]:Ri.call(I,W)};ea.prototype.set=function(W,I){var T=this.__data__;return this.size+=this.has(W)?0:1,T[W]=Ze&&void 0===I?"__lodash_hash_undefined__":
I,this};var Si=Array.prototype.splice;sa.prototype.clear=function(){this.__data__=[];this.size=0};sa.prototype.delete=function(W){var I=this.__data__;W=ma(I,W);return!(0>W)&&(W==I.length-1?I.pop():Si.call(I,W,1),--this.size,!0)};sa.prototype.get=function(W){var I=this.__data__;W=ma(I,W);return 0>W?void 0:I[W][1]};sa.prototype.has=function(W){return-1<ma(this.__data__,W)};sa.prototype.set=function(W,I){var T=this.__data__,N=ma(T,W);return 0>N?(++this.size,T.push([W,I])):T[N][1]=I,this};var $e=F(Yb,
"Map");wa.prototype.clear=function(){this.size=0;this.__data__={hash:new ea,map:new ($e||sa),string:new ea}};wa.prototype.delete=function(W){W=ja(this,W).delete(W);return this.size-=W?1:0,W};wa.prototype.get=function(W){return ja(this,W).get(W)};wa.prototype.has=function(W){return ja(this,W).has(W)};wa.prototype.set=function(W,I){var T=ja(this,W),N=T.size;return T.set(W,I),this.size+=T.size==N?0:1,this};Ja.Cache=wa;var Ti=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
Ui=/\\(\\)?/g,Uh=function(W){W=Ja(W,function(T){return 500===I.size&&I.clear(),T});var I=W.cache;return W}(function(W){var I=[];return 46===W.charCodeAt(0)&&I.push(""),W.replace(Ti,function(T,N,ba,ia){I.push(ba?ia.replace(Ui,"$1"):N||T)}),I}),hg=bc?bc.isConcatSpreadable:void 0,If=da(Object.getPrototypeOf,Object),ig=Function.prototype.toString,Vh=Object.prototype.hasOwnProperty,Wh=ig.call(Object),li=J(function(W,I){try{return E(W,void 0,I)}catch(T){return oa(T)?T:Error(T)}});Aa.prototype.clear=function(){this.__data__=
new sa;this.size=0};Aa.prototype.delete=function(W){var I=this.__data__;W=I.delete(W);return this.size=I.size,W};Aa.prototype.get=function(W){return this.__data__.get(W)};Aa.prototype.has=function(W){return this.__data__.has(W)};Aa.prototype.set=function(W,I){var T=this.__data__;if(T instanceof sa){var N=T.__data__;if(!$e||199>N.length)return N.push([W,I]),this.size=++T.size,this;T=this.__data__=new wa(N)}return T.set(W,I),this.size=T.size,this};var Jg="object"==typeof n&&n&&!n.nodeType&&n,Kg=Jg&&
"object"==typeof module&&module&&!module.nodeType&&module,Lg=Kg&&Kg.exports===Jg?Yb.Buffer:void 0,lg=Lg?Lg.allocUnsafe:void 0,Vi=Object.prototype.propertyIsEnumerable,Mg=Object.getOwnPropertySymbols,Jf=Mg?function(W){return null==W?[]:(W=Object(W),function(I,T){for(var N=-1,ba=null==I?0:I.length,ia=0,pa=[];++N<ba;){var ta=I[N];T(ta,N,I)&&(pa[ia++]=ta)}return pa}(Mg(W),function(I){return Vi.call(W,I)}))}:Ka,jg=Object.getOwnPropertySymbols?function(W){for(var I=[];W;)Ha(I,Jf(W)),W=If(W);return I}:Ka,
Vf=F(Yb,"DataView"),Wf=F(Yb,"Promise"),Oe=F(Yb,"Set"),Wi=D(Vf),Xi=D($e),Yi=D(Wf),Zi=D(Oe),$i=D(Sf),De=q;(Vf&&"[object DataView]"!=De(new Vf(new ArrayBuffer(1)))||$e&&"[object Map]"!=De(new $e)||Wf&&"[object Promise]"!=De(Wf.resolve())||Oe&&"[object Set]"!=De(new Oe)||Sf&&"[object WeakMap]"!=De(new Sf))&&(De=function(W){var I=q(W);if(W=(W="[object Object]"==I?W.constructor:void 0)?D(W):"")switch(W){case Wi:return"[object DataView]";case Xi:return"[object Map]";case Yi:return"[object Promise]";case Zi:return"[object Set]";
case $i:return"[object WeakMap]"}return I});var Le=De,Yh=Object.prototype.hasOwnProperty,kf=Yb.Uint8Array,Xh=/\w*$/,Ng=bc?bc.prototype:void 0,kg=Ng?Ng.valueOf:void 0,Og=Ce&&Ce.isMap,ai=Og?Y(Og):function(W){return t(W)&&"[object Map]"==Le(W)},Pg=Ce&&Ce.isSet,$h=Pg?Y(Pg):function(W){return t(W)&&"[object Set]"==Le(W)},Kc={};Kc["[object Arguments]"]=Kc["[object Array]"]=Kc["[object ArrayBuffer]"]=Kc["[object DataView]"]=Kc["[object Boolean]"]=Kc["[object Date]"]=Kc["[object Float32Array]"]=Kc["[object Float64Array]"]=
Kc["[object Int8Array]"]=Kc["[object Int16Array]"]=Kc["[object Int32Array]"]=Kc["[object Map]"]=Kc["[object Number]"]=Kc["[object Object]"]=Kc["[object RegExp]"]=Kc["[object Set]"]=Kc["[object String]"]=Kc["[object Symbol]"]=Kc["[object Uint8Array]"]=Kc["[object Uint8ClampedArray]"]=Kc["[object Uint16Array]"]=Kc["[object Uint32Array]"]=!0;Kc["[object Error]"]=Kc["[object Function]"]=Kc["[object WeakMap]"]=!1;$a.prototype.add=$a.prototype.push=function(W){return this.__data__.set(W,"__lodash_hash_undefined__"),
this};$a.prototype.has=function(W){return this.__data__.has(W)};var Qg=bc?bc.prototype:void 0,Kf=Qg?Qg.valueOf:void 0,bi=Object.prototype.hasOwnProperty,mg=Object.prototype.hasOwnProperty,Xf,aj=(Xf={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;"},function(W){return null==Xf?void 0:Xf[W]}),Rg=/[&<>"']/g,bj=RegExp(Rg.source),ci=Object.prototype.hasOwnProperty,ng=Object.prototype,di=ng.hasOwnProperty,ei={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},
qg=/<%=([\s\S]+?)%>/g,og={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:qg,variable:"",imports:{_:{escape:function(W){return(W=null==W?"":x(W))&&bj.test(W)?W.replace(Rg,aj):W}}}},ii=/\b__p \+= '';/g,ji=/\b(__p \+=) '' \+/g,ki=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hi=/[()=,{}\[\]\/\s]/,fi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lf=/($^)/,gi=/['\n\r\u2028\u2029\\]/g,rg=Object.prototype.hasOwnProperty,cj=Oe&&1/yb(new Oe([,-0]))[1]==1/0?function(W){return new Oe(W)}:function(){},wi=J(function(W){var I,
T=function(N){var ba=null==N?0:N.length;return ba?N[ba-1]:void 0}(W);return Kb(T)&&(T=void 0),function(N,ba,ia){var pa=-1,ta=O,Ca=N.length,Da=!0,Ia=[],xa=Ia;if(ia)Da=!1,ta=kb;else if(200<=Ca){if(ta=ba?null:cj(N))return yb(ta);Da=!1;ta=Za;xa=new $a}else xa=ba?[]:Ia;a:for(;++pa<Ca;){var Fa=N[pa],Ga=ba?ba(Fa):Fa;if(Fa=ia||0!==Fa?Fa:0,Da&&Ga==Ga){for(var Ra=xa.length;Ra--;)if(xa[Ra]===Ga)continue a;ba&&xa.push(Ga);Ia.push(Fa)}else ta(xa,Ga,ia)||(xa!==Ia&&xa.push(Ga),Ia.push(Fa))}return Ia}(qa(W,1,Kb,
!0),"function"==typeof(I=T)?I:null==I?B:"object"==typeof I?yd(I)?$b(I[0],I[1]):Tb(I):Mb(I))});const Cc={AxisLabels:"axisLabels",GuideLabel:"guideLabel",AxisTitle:"axisTitle",ChartTitle:"chartTitle",DataLabels:"dataLabels",LegendTitle:"legendTitle",LegendText:"legendText",DescriptionText:"descriptionText"},Ib={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",
Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},sg=[...Object.values(Ib),"en-AU","en-GB","es-ES","es-MX","de-CH","de-DE","it-CH","it-IT"],tg=
[Ib.Arabic,Ib.Hebrew],Ae={maxRecordCountFactor:5,maxParallelRequests:4,maxRecords:2E3,orderByJSAPIDelimiter:" ",outStatistics:{statisticType:"count",onStatisticField:"OBJECTID",outStatisticFieldName:"arcgis_charts_outStatisticFieldName_default_key"},uniqueIdsName:"arcgisChartsUniqueIds"},Lf=[156,156,156,255],Sg=[156,156,156,255],ug=[[31,120,180,255],[166,206,227,255],[51,160,44,255],[178,223,138,255],[227,26,28,255],[251,154,153,255],[255,127,0,255],[253,191,111,255],[106,61,154,255],[202,178,214,
255]],mi=[[104,104,104,255],[51,124,235,255],[132,0,168,255],[156,156,156,255]],Mf={maxBarUniqueSeriesCountTotal:1E4,maxBarTwoSeriesCountPerSeries:1E3,maxBarTwoSeriesCountTotal:2E3,maxBarThreePlusSeriesCountPerSeries:100,maxBarThreePlusSeriesCountTotal:2E3,maxScatterPointsBeforeAggregation:1E4,maxScatterPointsAfterAggregation:1E4,maxLineChartMarkersCountTotal:1E4,maxLineChartSeriesCount:100,maxPieChartSliceCountTotal:300};let We;var Tg,Ug,Vg=Object.prototype,Wg=Function.prototype.toString,dj=Vg.hasOwnProperty,
ej=Wg.call(Object),fj=Vg.toString,gj=(Tg=Object.getPrototypeOf,Ug=Object,function(W){return Tg(Ug(W))}),hj=function(W){var I;if(!(I=!W||"object"!=typeof W||"[object Object]"!=fj.call(W))&&(I=!1,null!=W&&"function"!=typeof W.toString))try{I=!!(W+"")}catch(T){}if(I)return!1;W=gj(W);if(null===W)return!0;W=dj.call(W,"constructor")&&W.constructor;return"function"==typeof W&&W instanceof W&&Wg.call(W)==ej},Ee={exports:{}},Oc={},af={exports:{}},je={},ij=/javascript\s*:/gim;je.whiteList=Rc();je.getDefaultWhiteList=
Rc;je.onAttr=function(W,I,T){};je.onIgnoreAttr=function(W,I,T){};je.safeAttrValue=function(W,I){return ij.test(I)?"":I};var bf={indexOf:function(W,I){var T;if(Array.prototype.indexOf)return W.indexOf(I);var N=0;for(T=W.length;N<T;N++)if(W[N]===I)return N;return-1},forEach:function(W,I,T){var N;if(Array.prototype.forEach)return W.forEach(I,T);var ba=0;for(N=W.length;ba<N;ba++)I.call(T,W[ba],ba,W)},trim:function(W){return String.prototype.trim?W.trim():W.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(W){return String.prototype.trimRight?
W.trimRight():W.replace(/(\s*$)/g,"")}},mf=je,jj=function(W,I){function T(){if(!ba){var Da=bf.trim(W.slice(ia,pa)),Ia=Da.indexOf(":");if(-1!==Ia){var xa=bf.trim(Da.slice(0,Ia));Ia=bf.trim(Da.slice(Ia+1));xa&&(Da=I(ia,ta.length,xa,Ia,Da))&&(ta+=Da+"; ")}}ia=pa+1}";"!==(W=bf.trimRight(W))[W.length-1]&&(W+=";");for(var N=W.length,ba=!1,ia=0,pa=0,ta="";pa<N;pa++){var Ca=W[pa];if("/"===Ca&&"*"===W[pa+1]){Ca=W.indexOf("*/",pa+2);if(-1===Ca)break;ia=(pa=Ca+1)+1;ba=!1}else"("===Ca?ba=!0:")"===Ca?ba=!1:";"===
Ca?ba||T():"\n"===Ca&&T()}return bf.trim(ta)};tc.prototype.process=function(W){if(!(W=(W=W||"").toString()))return"";var I=this.options,T=I.whiteList,N=I.onAttr,ba=I.onIgnoreAttr,ia=I.safeAttrValue;return jj(W,function(pa,ta,Ca,Da,Ia){var xa=T[Ca],Fa=!1;if(!0===xa?Fa=xa:"function"==typeof xa?Fa=xa(Da):xa instanceof RegExp&&(Fa=xa.test(Da)),!0!==Fa&&(Fa=!1),Da=ia(Ca,Da)){var Ga;pa={position:ta,sourcePosition:pa,source:Ia,isWhite:Fa};return Fa?null==(Ga=N(Ca,Da,pa))?Ca+":"+Da:Ga:null==(Ga=ba(Ca,Da,
pa))?void 0:Ga}})};!function(W,I){for(var T in(I=W.exports=function(N,ba){return(new tc(ba)).process(N)}).FilterCSS=tc,je)I[T]=je[T]}(af,af.exports);var pd={indexOf:function(W,I){var T;if(Array.prototype.indexOf)return W.indexOf(I);var N=0;for(T=W.length;N<T;N++)if(W[N]===I)return N;return-1},forEach:function(W,I,T){var N;if(Array.prototype.forEach)return W.forEach(I,T);var ba=0;for(N=W.length;ba<N;ba++)I.call(T,W[ba],ba,W)},trim:function(W){return String.prototype.trim?W.trim():W.replace(/(^\s*)|(\s*$)/g,
"")},spaceIndex:function(W){return(W=/\s|\n|\t/.exec(W))?W.index:-1}},kj=af.exports.getDefaultWhiteList,nf=pd,Xg=new af.exports.FilterCSS,ni=/</g,oi=/>/g,pi=/"/g,qi=/&quot;/g,ri=/&#([a-zA-Z0-9]*);?/gim,si=/&colon;?/gim,ti=/&newline;?/gim,vf=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Yg=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Zg=/u\s*r\s*l\s*\(.*/gi;Oc.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href",
"alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],
ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")};
Oc.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color",
"size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],
tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")}};Oc.onTag=function(W,I,T){};Oc.onIgnoreTag=function(W,I,T){};Oc.onTagAttr=function(W,I,T){};Oc.onIgnoreTagAttr=function(W,I,T){};Oc.safeAttrValue=function(W,I,T,N){if(T=Vd(T),"href"===I||"src"===I){if("#"===(T=nf.trim(T)))return"#";if("http://"!==T.substr(0,7)&&"https://"!==T.substr(0,8)&&"mailto:"!==T.substr(0,7)&&"tel:"!==T.substr(0,4)&&"data:image/"!==T.substr(0,11)&&"ftp://"!==
T.substr(0,6)&&"./"!==T.substr(0,2)&&"../"!==T.substr(0,3)&&"#"!==T[0]&&"/"!==T[0])return""}else if("background"===I){if(vf.lastIndex=0,vf.test(T))return""}else if("style"===I){if((Yg.lastIndex=0,Yg.test(T))||(Zg.lastIndex=0,Zg.test(T)&&(vf.lastIndex=0,vf.test(T))))return"";!1!==N&&(T=(N=N||Xg).process(T))}return T=Wd(T)};Oc.escapeHtml=$c;Oc.escapeQuote=qd;Oc.unescapeQuote=Id;Oc.escapeHtmlEntities=rd;Oc.escapeDangerHtml5Entities=Ud;Oc.clearNonPrintableCharacter=Wc;Oc.friendlyAttrValue=Vd;Oc.escapeAttrValue=
Wd;Oc.onIgnoreTagStripAll=function(){return""};Oc.StripTagBody=function(W,I){"function"!=typeof I&&(I=function(){});var T=!Array.isArray(W),N=[],ba=!1;return{onIgnoreTag:function(ia,pa,ta){return T||-1!==nf.indexOf(W,ia)?ta.isClosing?(N.push([!1!==ba?ba:ta.position,ta.position+10]),ba=!1,"[/removed]"):(ba||(ba=ta.position),"[removed]"):I(ia,pa,ta)},remove:function(ia){var pa="",ta=0;return nf.forEach(N,function(Ca){pa+=ia.slice(ta,Ca[0]);ta=Ca[1]}),pa+=ia.slice(ta)}}};Oc.stripCommentTag=function(W){for(var I=
"",T=0;T<W.length;){var N=W.indexOf("\x3c!--",T);if(-1===N){I+=W.slice(T);break}I+=W.slice(T,N);T=W.indexOf("--\x3e",N);if(-1===T)break;T+=3}return I};Oc.stripBlankChar=function(W){W=W.split("");return(W=W.filter(function(I){I=I.charCodeAt(0);return 127!==I&&(!(31>=I)||10===I||13===I)})).join("")};Oc.cssFilter=Xg;Oc.getDefaultCSSWhiteList=kj;var Pe={},lj=/[^a-zA-Z0-9_:\.\-]/gim;Pe.parseTag=function(W,I,T){var N="",ba=0,ia=!1,pa=!1,ta=0,Ca=W.length,Da="",Ia="";ta=0;a:for(;ta<Ca;ta++)if(Ia=W.charAt(ta),
!1===ia)"\x3c"===Ia&&(ia=ta);else if(!1===pa)if("\x3c"===Ia)N+=T(W.slice(ba,ta)),ba=ia=ta;else if("\x3e"===Ia)N+=T(W.slice(ba,ia)),ba=Ia=W.slice(ia,ta+1),Da=pd.spaceIndex(ba),ba=-1===Da?ba.slice(1,-1):ba.slice(1,Da+1),Da=("/"===(ba=pd.trim(ba).toLowerCase()).slice(0,1)&&(ba=ba.slice(1)),"/"===ba.slice(-1)&&(ba=ba.slice(0,-1)),ba),N+=I(ia,N.length,Da,Ia,"\x3c/"===Ia.slice(0,2)),ba=ta+1,ia=!1;else{if('"'===Ia||"'"===Ia){Da=1;for(var xa=W.charAt(ta-Da);""===xa.trim()||"\x3d"===xa;){if("\x3d"===xa){pa=
Ia;continue a}xa=W.charAt(ta-++Da)}}}else Ia===pa&&(pa=!1);return ba<W.length&&(N+=T(W.substr(ba))),N};Pe.parseAttr=function(W,I){function T(Da,Ia){1>(Da=(Da=pd.trim(Da)).replace(lj,"").toLowerCase()).length||(Da=I(Da,Ia||""))&&ba.push(Da)}for(var N=0,ba=[],ia=!1,pa=W.length,ta=0;ta<pa;ta++){var Ca=W.charAt(ta);if(!1!==ia||"\x3d"!==Ca)if(!1===ia||ta!==N||'"'!==Ca&&"'"!==Ca||"\x3d"!==W.charAt(ta-1))/\s|\n|\t/.test(Ca)&&((W=W.replace(/\s|\n|\t/g," "),!1===ia)?-1===(Ca=Nd(W,ta))?(T(pd.trim(W.slice(N,
ta))),ia=!1,N=ta+1):ta=Ca-1:-1===(Ca=Ec(W,ta-1))&&(T(ia,Xd(pd.trim(W.slice(N,ta)))),ia=!1,N=ta+1));else{if(-1===(Ca=W.indexOf(Ca,ta+1)))break;T(ia,pd.trim(W.slice(N+1,Ca)));ia=!1;N=(ta=Ca)+1}else ia=W.slice(N,ta),N=ta+1}return N<W.length&&(!1===ia?T(W.slice(N)):T(ia,Xd(pd.trim(W.slice(N))))),pd.trim(ba.join(" "))};var ui=af.exports.FilterCSS,Dd=Oc,mj=Pe.parseTag,nj=Pe.parseAttr;Yd.prototype.process=function(W){if(!(W=(W=W||"").toString()))return"";var I=this.options,T=I.whiteList,N=I.onTag,ba=I.onIgnoreTag,
ia=I.onTagAttr,pa=I.onIgnoreTagAttr,ta=I.safeAttrValue,Ca=I.escapeHtml,Da=this.cssFilter;I.stripBlankChar&&(W=Dd.stripBlankChar(W));I.allowCommentTag||(W=Dd.stripCommentTag(W));var Ia=!1;I.stripIgnoreTagBody&&(Ia=Dd.StripTagBody(I.stripIgnoreTagBody,ba),ba=Ia.onIgnoreTag);W=mj(W,function(xa,Fa,Ga,Ra,Xa){Fa={sourcePosition:xa,position:Fa,isClosing:Xa,isWhite:T.hasOwnProperty(Ga)};if(null!=(xa=N(Ga,Ra,Fa)))return xa;if(Fa.isWhite){if(Fa.isClosing)return"\x3c/"+Ga+"\x3e";xa=function(bb){var jb=pd.spaceIndex(bb);
if(-1===jb)return{html:"",closing:"/"===bb[bb.length-2]};jb="/"===(bb=pd.trim(bb.slice(jb+1,-1)))[bb.length-1];return jb&&(bb=pd.trim(bb.slice(0,-1))),{html:bb,closing:jb}}(Ra);var fb=T[Ga];Fa=nj(xa.html,function(bb,jb){var qb,Hb=-1!==pd.indexOf(fb,bb);return null==(qb=ia(Ga,bb,jb,Hb))?Hb?(jb=ta(Ga,bb,jb,Da))?bb+'\x3d"'+jb+'"':bb:null==(qb=pa(Ga,bb,jb,Hb))?void 0:qb:qb});Ra="\x3c"+Ga;return Fa&&(Ra+=" "+Fa),xa.closing&&(Ra+=" /"),Ra+="\x3e"}return null==(xa=ba(Ga,Ra,Fa))?Ca(Ra):xa},Ca);return Ia&&
(W=Ia.remove(W)),W};!function(W,I){function T(ia,pa){return(new N(pa)).process(ia)}var N=Yd,ba;for(ba in(I=W.exports=T).filterXSS=T,I.FilterXSS=N,Oc)I[ba]=Oc[ba];for(ba in Pe)I[ba]=Pe[ba];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=W.exports)}(Ee,Ee.exports);var oj=function(){function W(I,T){var N,ba=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted",
"preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:"alt border height src style width".split(" "),li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:"border cellpadding cellspacing height style width".split(" "),tbody:[],tr:["align",
"height","style","valign"],td:"align colspan height nowrap rowspan style valign width".split(" "),th:"align colspan height nowrap rowspan style valign width".split(" "),u:[],ul:[],video:"autoplay controls height loop muted poster preload width".split(" ")};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there arcgis-quickcapture mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");
this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(ia,pa,ta,Ca){return"a"===ia&&"href"===pa||("img"===ia||"source"===ia)&&"src"===pa?ba.sanitizeUrl(ta):Ee.exports.safeAttrValue(ia,pa,ta,Ca)}};I&&!T?N=I:I&&T?(N=Object.create(this.arcgisFilterOptions),Object.keys(I).forEach(function(ia){"whiteList"===ia?N.whiteList=ba._extendObjectOfArrays([ba.arcgisWhiteList,I.whiteList||{}]):N[ia]=I[ia]})):(N=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=
N;this._xssFilter=new Ee.exports.FilterXSS(N)}return W.prototype.sanitize=function(I,T){switch(void 0===T&&(T={}),typeof I){case "number":return isNaN(I)||!isFinite(I)?null:I;case "boolean":return I;case "string":return this._xssFilter.process(I);case "object":return this._iterateOverObject(I,T);default:if(!T.allowUndefined||void 0!==I)return null}},W.prototype.sanitizeUrl=function(I,T){T=(null!=T?T:{}).isProtocolRequired;T=void 0===T||T;var N=this._trim(I.substring(0,I.indexOf(":"))),ba="/"===I,
ia=/^#/.test(I),pa=N&&-1<this.allowedProtocols.indexOf(N.toLowerCase());return ba||ia||pa?Ee.exports.escapeAttrValue(I):N||T?"":Ee.exports.escapeAttrValue("https://".concat(I))},W.prototype.sanitizeHTMLAttribute=function(I,T,N,ba){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(I,T,N,ba):Ee.exports.safeAttrValue(I,T,N,ba)},W.prototype.validate=function(I,T){void 0===T&&(T={});T=this.sanitize(I,T);return{isValid:I===T,sanitized:T}},W.prototype._extendObjectOfArrays=
function(I){var T={};return I.forEach(function(N){Object.keys(N).forEach(function(ba){Array.isArray(N[ba])&&Array.isArray(T[ba])?T[ba]=T[ba].concat(N[ba]):T[ba]=N[ba]})}),T},W.prototype._iterateOverObject=function(I,T){var N=this;void 0===T&&(T={});try{var ba=!1,ia=void 0;if(Array.isArray(I))ia=I.reduce(function(pa,ta){var Ca=N.validate(ta,T);return Ca.isValid?pa.concat([ta]):(ba=!0,pa.concat([Ca.sanitized]))},[]);else{if(!hj(I))return T.allowUndefined&&void 0===I?void 0:null;ia=Object.keys(I).reduce(function(pa,
ta){var Ca=I[ta],Da=N.validate(Ca,T);return Da.isValid?pa[ta]=Ca:(ba=!0,pa[ta]=Da.sanitized),pa},{})}return ba?ia:I}catch(pa){return null}},W.prototype._trim=function(I){return String.prototype.trim?I.trim():I.replace(/(^\s*)|(\s*$)/g,"")},W}(),vg={Promise:"undefined"!=typeof window?window.Promise:void 0},vi={};const od={Field:"esri/layers/support/Field",FeatureSet:"esri/rest/support/FeatureSet",FieldUtils:"esri/layers/support/fieldUtils",SymbolUtils:"esri/symbols/support/symbolUtils",Config:"esri/config",
PortalItem:"esri/portal/PortalItem",Portal:"esri/portal/Portal",Map:"esri/Map",MapView:"esri/views/MapView",Histogram:"esri/smartMapping/statistics/histogram",SummaryStatistics:"esri/smartMapping/statistics/summaryStatistics",FeatureLayer:"esri/layers/FeatureLayer",Query:"esri/rest/support/Query",StatisticDefinition:"esri/rest/support/StatisticDefinition",Extent:"esri/geometry/Extent",Graphic:"esri/Graphic",RendererJsonUtils:"esri/renderers/support/jsonUtils",Error:"esri/core/Error",PromiseUtils:"esri/core/promiseUtils",
Request:"esri/request"};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Yf={};Sc.prototype.has=function(W){return W in this.cache};Sc.prototype.get=function(W){return this.cache[W]};Sc.prototype.set=function(W,I){this.cache[W]=I};var pj={create:function(){return new Sc}};Yf=function(W,I){return(I&&I.strategy?I.strategy:Dc)(W,{cache:I&&I.cache?I.cache:pj,serializer:I&&I.serializer?I.serializer:$d})};Yf.strategies=
{variadic:function(W,I){var T=I.cache.create();return Hd.bind(this,W,T,I.serializer)},monadic:function(W,I){var T=I.cache.create();return Ge.bind(this,W,T,I.serializer)}};const he={Simple:0,NoAggregation:1,SplitByFieldValues:2,SplitByNumericalFields:3,MultipleNumericFieldsAggregation:4},wf=Yf(W=>k(void 0,void 0,void 0,function*(){var I,T=W.featureCollection;if(void 0!==T&&void 0!==(null===(I=T.layers)||void 0===I?void 0:I[0])){I=T.layers[0];var N=I.featureSet;T=I.layerDefinition}else T=W.layerDefinition;
I={};if(void 0!==N){const [ba]=yield Vc([od.FeatureSet]);I.source=ba.fromJSON(N).features;const [ia]=yield Vc([od.Field]);void 0!==(null==T?void 0:T.fields)&&(I.fields=T.fields.map(pa=>ia.fromJSON(pa)))}else I.id=W.id,void 0!==(null==T?void 0:T.id)&&(I.layerId=T.id),void 0!==W.url&&(I.url=W.url),void 0!==W.itemId&&void 0!==(null==T?void 0:T.id)&&(I.portalItem={id:W.itemId});void 0!==T&&(N=T.drawingInfo,void 0!==(null==N?void 0:N.renderer)&&([T]=yield Vc([od.RendererJsonUtils]),I.renderer=T.fromJSON(N.renderer)));
[N]=yield Vc([od.FeatureLayer]);return new N(I)})),Xe=new Map,of={Default:"defaultError",LayerLoadFailure:"layerLoadFailure",QueryFeaturesError:"queryFeaturesError",ChartDisposed:"ChartDisposeError"};class Nf extends Error{constructor(W,I,T){super(I);this.name=W;this.details=T}}const Qf={NonNumericAggregation:"nonNumericAggregation",DuplicateSeriesID:"duplicateSeriesId"},Pd={Required:"required",MinLength:"minLength",MinItems:"minItems",MaxItems:"maxItems",Pattern:"pattern",AdditionalProperties:"additionalProperties",
Enum:"enum",AnyOf:"anyOf"},Xc={BadData:"badData",HistogramEmptyField:"histogramEmptyField",BarElementExceedsLimit:"barElementExceedsLimit",LineChartExceedsLimit:"lineChartExceedsLimit",PieChartExceedsLimit:"pieChartExceedsLimit",PieChartMixOfNegativePositiveSlices:"PieChartMixOfNegativePositiveSlices",NegativeValueInSqrtCalculation:"negativeValueInSqrtCalculation",NegativeValueInLogCalculation:"negativeValueInLogCalculation"},xf={$schema:"http://json-schema.org/draft-07/schema#",definitions:{RESTFieldType:{enum:"esriFieldTypeBlob esriFieldTypeDate esriFieldTypeDouble esriFieldTypeGUID esriFieldTypeGeometry esriFieldTypeGlobalID esriFieldTypeInteger esriFieldTypeOID esriFieldTypeRaster esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeString esriFieldTypeXML".split(" "),
type:"string",title:"RESTFieldType"},RESTStatisticType:{enum:"avg count max min no_aggregation percentile_cont percentile_disc stddev sum var".split(" "),type:"string",title:"RESTStatisticType"},RESTSimpleLineSymbolStyle:{enum:"esriSLSDash esriSLSDashDot esriSLSDashDotDot esriSLSDot esriSLSNull esriSLSSolid".split(" "),type:"string",title:"RESTSimpleLineSymbolStyle"},RESTSimpleMarkerSymbolStyle:{enum:"esriSMSCircle esriSMSCross esriSMSDiamond esriSMSSquare esriSMSTriangle esriSMSX".split(" "),type:"string",
title:"RESTSimpleMarkerSymbolStyle"},RESTSimpleFillSymbolStyle:{enum:"esriSFSBackwardDiagonal esriSFSCross esriSFSDiagonalCross esriSFSForwardDiagonal esriSFSHorizontal esriSFSNull esriSFSSolid esriSFSVertical".split(" "),type:"string",title:"RESTSimpleFillSymbolStyle"},RESTHorizontalAlignment:{enum:["center","justify","left","right"],type:"string",title:"RESTHorizontalAlignment"},RESTVerticalAlignment:{enum:["baseline","bottom","middle","top"],type:"string",title:"RESTVerticalAlignment"},RESTSymbolType:{enum:"esriPFS esriPMS esriSFS esriSLS esriSMS esriTS".split(" "),
type:"string",title:"RESTSymbolType"},RESTFontStyle:{enum:["italic","normal","oblique"],type:"string",title:"RESTFontStyle"},RESTFontWeight:{enum:["bold","bolder","lighter","normal"],type:"string",title:"RESTFontWeight"},RESTFontDecoration:{enum:["line-through","none","underline"],type:"string",title:"RESTFontDecoration"},RESTRendererType:{enum:"class-breaks dictionary dot-density heatmap pie-chart simple unique-value".split(" "),type:"string",title:"RESTRendererType"},WebChartTypes:{enum:"barSeries boxPlotSeries buffer category chart chartAxis chartGuide chartLegend chartOverlay chartOverlays chartText comboLineAndBarSeries cursorCrosshair date gaugeAxisTick gaugeNeedle gaugeSeries histogramSeries lineSeries number pieSeries pieTick probabilityPlotSeries profileGraphSeries scatterSeries".split(" "),
type:"string",title:"WebChartTypes"},WebChartDataTransformations:{title:"WebChartDataTransformations",enum:["logarithmic","none","squareRoot"],type:"string"},WebChartColoringPatterns:{title:"WebChartColoringPatterns",enum:["colorMatch","singleColor"],type:"string"},WebChartLegendPositions:{title:"WebChartLegendPositions",enum:["bottom","left","right","top"],type:"string"},WebChartStackedKinds:{enum:["sideBySide","stacked","stacked100"],type:"string",title:"WebChartStackedKinds"},WebChartProbabilityPlotKinds:{title:"WebChartProbabilityPlotKinds",
enum:["normalQQPlot","qqPlot"],type:"string"},WebChartSortOrderKinds:{enum:["ASC","DESC"],type:"string",title:"WebChartSortOrderKinds"},WebChartDataSourceTypes:{enum:["featureLayer","inline"],type:"string",title:"WebChartDataSourceTypes"},WebChartLineSmoothedKinds:{enum:["bezier","monotoneX","monotoneY"],type:"string",title:"WebChartLineSmoothedKinds"},WebChartTimeIntervalUnits:{enum:"esriTimeUnitsDays esriTimeUnitsHours esriTimeUnitsMinutes esriTimeUnitsMonths esriTimeUnitsSeconds esriTimeUnitsWeeks esriTimeUnitsYears".split(" "),
type:"string",title:"WebChartTimeIntervalUnits"},WebChartNullPolicyTypes:{enum:["interpolate","null","zero"],type:"string",title:"WebChartNullPolicyTypes"},WebChartTimeAggregationTypes:{enum:["equalIntervalsFromEndTime","equalIntervalsFromStartTime"],type:"string",title:"WebChartTimeAggregationTypes"},WebChartLabelBehavior:{enum:["none","rotate","stagger","wrap"],type:"string",title:"WebChartLabelBehavior"},RGBObject:{description:"JSON representation of the color object",title:"RGBObject",type:"object",
properties:{r:{type:"number",title:"r"},g:{type:"number",title:"g"},b:{type:"number",title:"b"},a:{default:1,type:"number",title:"a"}},additionalProperties:!1,required:["b","g","r"]},RGBArray:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3,title:"RGBArray"},WebChartConfigFields:{description:"Is an object which dictate which data-item field should be used for defining a property of the rendered element (line, point, bars, etc). Used in inline data source mode only.",
title:"WebChartConfigFields",type:"object",properties:{fillColor:{type:"string",title:"fillColor"},fillOpacity:{type:"string",title:"fillOpacity"},fillStyle:{type:"string",title:"fillStyle"},lineColor:{type:"string",title:"lineColor"},lineOpacity:{type:"string",title:"lineOpacity"},lineWidth:{type:"string",title:"lineWidth"},lineStyle:{type:"string",title:"lineStyle"},markerSize:{type:"string",title:"markerSize"},outlineColor:{type:"string",title:"outlineColor"},outlineOpacity:{type:"string",title:"outlineOpacity"},
outlineWidth:{type:"string",title:"outlineWidth"},outlineStyle:{type:"string",title:"outlineStyle"},displayLabel:{type:"string",title:"displayLabel"}},additionalProperties:!1},WebChartDataItemColor:{anyOf:[{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"string"}],title:"WebChartDataItemColor"},WebChartDataItemValue:{anyOf:[{type:"string",
format:"date-time"},{type:"array",items:{type:"string"}},{type:"array",items:{type:"number"}},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:["null","string","number","boolean"]}],title:"WebChartDataItemValue"},WebChartDataItem:{description:"JSON representation of a typical data item",title:"WebChartDataItem",
type:"object",additionalProperties:{anyOf:[{type:"string",format:"date-time"},{type:"array",items:{type:"string"}},{type:"array",items:{type:"number"}},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:["null","string","number","boolean"]}]}},WebChartScatterPlotDataItem:{description:"JSON representation of the processed data for a Scatter plot",
title:"WebChartScatterPlotDataItem",type:"object",properties:{r2:{type:"number",title:"r2"},trendLinePoints:{type:"array",items:[{$ref:"#/definitions/WebChartDataItem"},{$ref:"#/definitions/WebChartDataItem"}],minItems:2,maxItems:2,title:"trendLinePoints"},data:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"data"}},additionalProperties:!1,required:["data"]},TimeIntervalInfo:{title:"TimeIntervalInfo",type:"object",properties:{timeIntervalUnits:{enum:"esriTimeUnitsDays esriTimeUnitsHours esriTimeUnitsMinutes esriTimeUnitsMonths esriTimeUnitsSeconds esriTimeUnitsWeeks esriTimeUnitsYears".split(" "),
type:"string",title:"timeIntervalUnits"},timeIntervalSize:{type:"number",title:"timeIntervalSize"}},additionalProperties:!1},WebChartBarAndLineChartDataItem:{description:"JSON representation of the processed data for a Line or Bar chart",title:"WebChartBarAndLineChartDataItem",type:"object",properties:{dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"},timeIntervalInfo:{$ref:"#/definitions/TimeIntervalInfo",title:"timeIntervalInfo"}},additionalProperties:!1,required:["dataItems"]},
WebChartBin:{description:"JSON representation of a Histogram bin",title:"WebChartBin",type:"object",properties:{count:{type:"number",title:"count"},minValue:{description:"Min value in the bin",type:"number",title:"minValue"},maxValue:{description:"Max value in the bin",type:"number",title:"maxValue"},symbol:{description:"JSON representation of a typical data item",$ref:"#/definitions/WebChartDataItem",title:"symbol"}},additionalProperties:!1,required:["count","maxValue","minValue"]},WebChartHistogramDataItem:{description:"JSON representation of the processed data for a Histogram",
title:"WebChartHistogramDataItem",type:"object",properties:{mean:{type:"number",title:"mean"},median:{type:"number",title:"median"},stddev:{type:"number",title:"stddev"},max:{type:"number",title:"max"},min:{type:"number",title:"min"},sum:{description:"Sum of the values of all the points",type:"number",title:"sum"},count:{description:"Number of all the points/features in un-binned data (including only non-null entries)",type:"number",title:"count"},nulls:{description:"Number of null entries in the pool of points",
type:"number",title:"nulls"},bins:{type:"array",items:{$ref:"#/definitions/WebChartBin"},title:"bins"}},additionalProperties:!1,required:"bins max mean median min stddev".split(" ")},WebChartDataTypes:{anyOf:[{$ref:"#/definitions/WebChartDataItem"},{$ref:"#/definitions/WebChartScatterPlotDataItem"},{$ref:"#/definitions/WebChartBarAndLineChartDataItem"},{$ref:"#/definitions/WebChartHistogramDataItem"},{type:"array",items:{$ref:"#/definitions/WebChartDataItem"}}],title:"WebChartDataTypes"},WebChartInlineDataSource:{description:"JSON representation of the inline data source",
title:"WebChartInlineDataSource",type:"object",properties:{type:{description:"Represents a unique string identifier for the type of chart data source. It is **inline** for inline data (arrays of POJOs).",type:"string",enum:["inline"],title:"type"},processed:{description:"Indicates whether the data is already processed and be used right away. If it is `false`, then the data needs to go through some transformation before being assigned to chart/series.",type:"boolean",title:"processed"},configFields:{description:"An object that is used to pass custom configuration like selecting the fill color based on a dataSource field.",
$ref:"#/definitions/WebChartConfigFields",title:"configFields"},data:{description:"Structure containing all the data for the chart. It can be pre-processed (see `WebChartDataTypes`) or not (WebChartDataItem[])",anyOf:[{$ref:"#/definitions/WebChartDataItem"},{$ref:"#/definitions/WebChartScatterPlotDataItem"},{$ref:"#/definitions/WebChartBarAndLineChartDataItem"},{$ref:"#/definitions/WebChartHistogramDataItem"},{type:"array",items:{$ref:"#/definitions/WebChartDataItem"}}],title:"data"}},additionalProperties:!1,
required:["data","processed","type"]},WebChartFeatureLayerDataSource:{description:"JSON representation of the feature layer data source",title:"WebChartFeatureLayerDataSource",type:"object",properties:{type:{description:"Represents a unique string identifier for the type of chart data source. It is **featureLayer** for [Feature Layer](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html) data.",type:"string",enum:["featureLayer"],title:"type"},featureLayer:{$ref:"#/definitions/IFeatureLayer",
description:"Carries the properties necessary to build a JSAPI Feature Layer in order to fetch the chart data.",title:"featureLayer"},filter:{description:"A string representing **any legal SQL where clause** which helps filter a sub-set of the original data which is to be adopted for all types of data visualizations. This `where` clause is **AND**-ed with series' level `where` clause during the chart's data processing routines. Whenever a data query is made by the chart, this `where` clause is respected.",
type:"string",title:"filter"}},additionalProperties:!1,required:["featureLayer","type"]},WebChartDataSources:{anyOf:[{$ref:"#/definitions/WebChartInlineDataSource"},{$ref:"#/definitions/WebChartFeatureLayerDataSource"}],title:"WebChartDataSources"},WebChartText:{description:"Stores info on how some text is rendered on the chart and whether it is visible or not.",title:"WebChartText",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartText object. For ChartText object, it is "chartText".',
type:"string",enum:["chartText"],title:"type"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},content:{$ref:"#/definitions/ITextSymbol",description:"Contains the styling info and text content. Details on **esriTS** are [here](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm).",title:"content"}},additionalProperties:!1,required:["content","type"]},WebChartCursorCrosshair:{description:"JSON representation of the cursor's crosshair for a chart.",
title:"WebChartCursorCrosshair",type:"object",properties:{type:{description:"Represents a unique string identifier for the chart cursor's crosshair.",type:"string",enum:["cursorCrosshair"],title:"type"},style:{description:"Contains styling info on how the chart cursor's crosshair should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"style"},verticalLineVisible:{description:"Indicates whether the vertical crosshair line should be displayed",default:!1,type:"boolean",title:"verticalLineVisible"},
horizontalLineVisible:{description:"Indicates whether the horizontal crosshair line should be displayed",default:!1,type:"boolean",title:"horizontalLineVisible"}},additionalProperties:!1,required:["type"]},WebChartLegend:{description:"JSON representation of the Chart's legend box",title:"WebChartLegend",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartLegend object. For ChartLegend object, it is "chartLegend".',type:"string",enum:["chartLegend"],title:"type"},
visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},title:{description:"Contains styling info on how the title of the legend box should be rendered",$ref:"#/definitions/WebChartText",title:"title"},body:{$ref:"#/definitions/ITextSymbol",description:"Contains styling info on how legend body (excluding the **title**) should be rendered",title:"body"},position:{$ref:"#/definitions/WebChartLegendPositions",description:'Positions the legends at `"right"`, `"left"`, `"top"`, or `"bottom"` of the chart.',
title:"position"},maxHeight:{default:50,type:["null","number"],title:"maxHeight"},roundMarkers:{description:"If set to true, the legend markers are displayed as circles. Otherwise they are rounded rectangles.",default:!1,type:"boolean",title:"roundMarkers"}},additionalProperties:!1,required:["body","position","type"]},WebChartPieChartLegend:{description:"Specific legend for the Pie chart",title:"WebChartPieChartLegend",type:"object",properties:{displayNumericValue:{description:"Indicates whether the numeric value associated to a slice is to be displayed in the legend.\nIf both displayNumericValue \x26 displayPercentage are true on a same label, they will be displayed as `percentage (value)`",
default:!1,type:"boolean",title:"displayNumericValue"},displayPercentage:{description:"Indicates whether the percentage to a slice is to be displayed in the legend.\nIf both displayNumericValue \x26 displayPercentage are true on a same label, they will be displayed as `percentage (value)`",default:!1,type:"boolean",title:"displayPercentage"},labelMaxWidth:{description:"Maximum width in pixels of the label displaying the slice name. If the label is larger than the maximum width, it will automatically wrap.",
default:200,type:"number",title:"labelMaxWidth"},valueLabelMaxWidth:{description:"Maximum width in pixels of the label displaying the slice name. If the label is larger than the maximum width, it will automatically wrap.",default:200,type:"number",title:"valueLabelMaxWidth"},type:{description:'Represents a unique string identifier for the ChartLegend object. For ChartLegend object, it is "chartLegend".',type:"string",enum:["chartLegend"],title:"type"},visible:{description:"Determines the visibility of the content.",
default:!0,type:"boolean",title:"visible"},title:{description:"Contains styling info on how the title of the legend box should be rendered",$ref:"#/definitions/WebChartText",title:"title"},body:{$ref:"#/definitions/ITextSymbol",description:"Contains styling info on how legend body (excluding the **title**) should be rendered",title:"body"},position:{$ref:"#/definitions/WebChartLegendPositions",description:'Positions the legends at `"right"`, `"left"`, `"top"`, or `"bottom"` of the chart.',title:"position"},
maxHeight:{default:50,type:["null","number"],title:"maxHeight"},roundMarkers:{description:"If set to true, the legend markers are displayed as circles. Otherwise they are rounded rectangles.",default:!1,type:"boolean",title:"roundMarkers"}},additionalProperties:!1,required:["body","position","type"]},WebChartOverlay:{description:"JSON representation of the chart's overlays like trendline scatter plot, and median in histogram",title:"WebChartOverlay",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartOverlay object. For ChartOverlay object, it is "chartOverlay".',
type:"string",enum:["chartOverlay"],title:"type"},created:{description:"Determines whether the overlay is created under the hood. It may or may not be visible.",default:!1,type:"boolean",title:"created"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},symbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the overlay should be rendered",title:"symbol"}},additionalProperties:!1,required:["symbol","type"]},
NumberFormatOptions:{description:"Defines how the numerical(value) axis data should be formatted.",title:"NumberFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the NumberFormatOptions object. For NumberFormatOptions object, it is "number". It can help us to differentiate numerical (value) axis from other types of axes viz., date-time axis and category axis.',type:"string",enum:["number"],title:"type"},intlOptions:{$ref:"#/definitions/Intl.NumberFormatOptions",
description:"Represents the JS native [Intl.NumberFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat), which is based on [CLDR](http://cldr.unicode.org/translation/numbers-currency/number-patterns) specifications.",title:"intlOptions"}},additionalProperties:!1,required:["intlOptions","type"]},DateTimeFormatOptions:{description:"Defines how the DateTime axis data should be formatted.",title:"DateTimeFormatOptions",type:"object",
properties:{type:{description:'Represents a unique string identifier for the NumberFormatOptions object. For NumberFormatOptions object, it is "date". It can help us to differentiate date-time axis from other types of axes viz., numeric (value) axis and category axis.',type:"string",enum:["date"],title:"type"},intlOptions:{$ref:"#/definitions/Intl.DateTimeFormatOptions",description:"Represent the JS native [Intl.DateTimeFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormatt), which is based on [CLDR](http://cldr.unicode.org/translation/date-time-1/date-time-patterns) specifications.",
title:"intlOptions"}},additionalProperties:!1,required:["intlOptions","type"]},CategoryFormatOptions:{description:"Defines how the category axis data (Categories) should be formatted.",title:"CategoryFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the CategoryFormatOptions object. For CategoryFormatOptions object, it is "category". It can help us to differentiate category axis from other types of axes, viz., date-time axis and numeric (value) axis.',
type:"string",enum:["category"],title:"type"},characterLimit:{description:"Represents a positive integer which represents the limit on the number of characters to be displayed for all the category strings. The truncated string are appended with `...`. If property is not present or `null`, no truncation is done.",minimum:1,multipleOf:1,type:["null","number"],title:"characterLimit"}},additionalProperties:!1,required:["type"]},WebChartGuide:{description:"JSON representation of the chart's guide object. Can be used to represent both line and fill guides.",
title:"WebChartGuide",type:"object",properties:{type:{description:'Represents a unique string identifier for the Guide object. For Guide class, it is "chartGuide".',type:"string",enum:["chartGuide"],title:"type"},start:{description:"Determines the value where the guide should begin.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"start"},end:{description:"Determines the value where the guide should end. If it is not specified, we get a line guide, otherwise we get a fill/rectangular guide.",
anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"end"},style:{description:"Determines how the guide should be rendered. Line guide requires [esriSLS](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm) format, and fill guide requires [esriSFS](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm) format.",anyOf:[{$ref:"#/definitions/ISimpleFillSymbol"},{$ref:"#/definitions/ISimpleLineSymbol"}],title:"style"},
name:{description:"A unique string identifier which is used to refer to a particular guide. It is displayed in the Chart Authoring UI to differentiate between different guides.",type:"string",title:"name"},label:{description:"Defines a text label for the given guide. It is displayed on the chart next to the concerned guide and is styled using **esriTS** format.",$ref:"#/definitions/ITextSymbol",title:"label"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",
title:"visible"},above:{description:"Determines whether the guide should be rendered on top of (overlapping) the series or under the series.",default:!1,type:"boolean",title:"above"}},additionalProperties:!1,required:["name","start","style","type"]},WebChartAxis:{description:"JSON representation of the chart's axis object",title:"WebChartAxis",type:"object",properties:{type:{description:'Represents a unique string identifier for the WebChartAxis object. For ChartAxis object, it is "chartAxis".',type:"string",
enum:["chartAxis"],title:"type"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},isLogarithmic:{description:"Specifies whether the axis has a logarithmic scale or not.",default:!1,type:"boolean",title:"isLogarithmic"},title:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the title of the axis should be rendered",title:"title"},valueFormat:{description:"Specifies how numerical/categorical/date-time values should be formatted.",
anyOf:[{$ref:"#/definitions/NumberFormatOptions"},{$ref:"#/definitions/DateTimeFormatOptions"},{$ref:"#/definitions/CategoryFormatOptions"}],title:"valueFormat"},minimum:{description:"The minimum value which the axis should represent, when it is not defined or null, then the minimum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"minimum"},maximum:{description:"The maximum value which the axis should represent, when it is not defined or null, then the maximum value for the corresponding axis is automatically calculated.",
type:["null","number"],title:"maximum"},grid:{description:"Dictates how the grid lines associated with a particular axis should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"grid"},guides:{description:"Represent an array of guides that should be rendered onto the axis.",type:"array",items:{$ref:"#/definitions/WebChartGuide"},title:"guides"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the axis line should be rendered.",title:"lineSymbol"},
labels:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the axis labels should be rendered.",title:"labels"},scrollbarVisible:{description:"Represents an option to add scrollbar to the axis of the chart",default:!1,type:"boolean",title:"scrollbarVisible"},displayZeroLine:{description:"Represents an option to hide/un-hide the zero line on value axis",default:!1,type:"boolean",title:"displayZeroLine"},integerOnlyValues:{description:"Represents an option to show `integer-only` values for a value axis",
default:!1,type:"boolean",title:"integerOnlyValues"},displayCursorTooltip:{description:"Specifies whether cursor tooltip should be displayed.",default:!1,type:"boolean",title:"displayCursorTooltip"},buffer:{description:"Allows setting a buffer to a **value axis** to provide some space around the series.",default:!1,type:"boolean",title:"buffer"}},additionalProperties:!1,required:["labels","lineSymbol","title","type","valueFormat"]},WebChartGaugeAxisTick:{description:"JSON representation of the gauge axis ticks.",
title:"WebChartGaugeAxisTick",type:"object",properties:{type:{description:'Represents a unique string identifier for the GaugeAxisTick object. For WebChartGaugeAxisTick object, it is "gaugeAxisTick".',type:"string",enum:["gaugeAxisTick"],title:"type"},spacing:{minimum:0,default:50,type:"number",title:"spacing"},visible:{description:"Determines the visibility of the axis ticks.",default:!0,type:"boolean",title:"visible"}},additionalProperties:!1,required:["type"]},WebChartNeedle:{title:"WebChartNeedle",
type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartNeedle object. For WebChartNeedle object, it is "gaugeNeedle".',type:"string",enum:["gaugeNeedle"],title:"type"},visible:{description:"Hides or shows the needle.",default:!0,type:"boolean",title:"visible"},symbol:{description:"Contains styling info on how the needle should be rendered",$ref:"#/definitions/ISimpleFillSymbol",title:"symbol"},startWidth:{description:"Represents the needle's thickness at the bottom (chart's center), in px",
minimum:1,default:10,type:["null","number"],title:"startWidth"},endWidth:{description:"Represents the needle's thickness at the top, in px",minimum:1,default:1,type:["null","number"],title:"endWidth"},innerRadius:{description:"Represents the size of the hole in the middle of the chart. Can be visualized when guides are displayed.",minimum:0,maximum:100,default:25,type:["null","number"],title:"innerRadius"},displayPin:{description:"Hides or shows the needle's pin (centroid circle)",default:!1,type:"boolean",
title:"displayPin"}},additionalProperties:!1,required:["type"]},WebChartGaugeAxis:{description:"JSON representation of the gauge chart's axis object. Inherits from the WebChartAxis properties.",title:"WebChartGaugeAxis",type:"object",properties:{innerLabel:{description:"Specifies how the axis' inner label needs to be displayed",$ref:"#/definitions/WebChartText",title:"innerLabel"},needle:{description:"Specifies how the axis' needle needs to be displayed",$ref:"#/definitions/WebChartNeedle",title:"needle"},
ticks:{description:"Specifies how the axis' ticks need to be displayed",$ref:"#/definitions/WebChartGaugeAxisTick",title:"ticks"},labelsIncrement:{description:"If a label has a value being a multiple of that property, it will be displayed. Otherwise it will be hidden.\nIf the property is `undefined` or 0, all the labels will be displayed.",default:"undefined",type:"number",title:"labelsIncrement"},onlyShowFirstAndLastLabels:{description:"Specifies if only the first and last labels need to be displayed. If set to `true` all the other labels\nwill be hidden.\nTheir visibility still depends on the axis labels visibility (WebChartAxis.labels.visible).",
default:!1,type:"boolean",title:"onlyShowFirstAndLastLabels"},type:{description:'Represents a unique string identifier for the WebChartAxis object. For ChartAxis object, it is "chartAxis".',type:"string",enum:["chartAxis"],title:"type"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},isLogarithmic:{description:"Specifies whether the axis has a logarithmic scale or not.",default:!1,type:"boolean",title:"isLogarithmic"},title:{$ref:"#/definitions/WebChartText",
description:"Contains styling info on how the title of the axis should be rendered",title:"title"},valueFormat:{description:"Specifies how numerical/categorical/date-time values should be formatted.",anyOf:[{$ref:"#/definitions/NumberFormatOptions"},{$ref:"#/definitions/DateTimeFormatOptions"},{$ref:"#/definitions/CategoryFormatOptions"}],title:"valueFormat"},minimum:{description:"The minimum value which the axis should represent, when it is not defined or null, then the minimum value for the corresponding axis is automatically calculated.",
type:["null","number"],title:"minimum"},maximum:{description:"The maximum value which the axis should represent, when it is not defined or null, then the maximum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"maximum"},grid:{description:"Dictates how the grid lines associated with a particular axis should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"grid"},guides:{description:"Represent an array of guides that should be rendered onto the axis.",
type:"array",items:{$ref:"#/definitions/WebChartGuide"},title:"guides"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the axis line should be rendered.",title:"lineSymbol"},labels:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the axis labels should be rendered.",title:"labels"},scrollbarVisible:{description:"Represents an option to add scrollbar to the axis of the chart",default:!1,type:"boolean",title:"scrollbarVisible"},
displayZeroLine:{description:"Represents an option to hide/un-hide the zero line on value axis",default:!1,type:"boolean",title:"displayZeroLine"},integerOnlyValues:{description:"Represents an option to show `integer-only` values for a value axis",default:!1,type:"boolean",title:"integerOnlyValues"},displayCursorTooltip:{description:"Specifies whether cursor tooltip should be displayed.",default:!1,type:"boolean",title:"displayCursorTooltip"},buffer:{description:"Allows setting a buffer to a **value axis** to provide some space around the series.",
default:!1,type:"boolean",title:"buffer"}},additionalProperties:!1,required:["labels","lineSymbol","title","type","valueFormat"]},WebChartQuery:{description:"Chart query object inspired by [JSAPI Query](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html) class.",title:"WebChartQuery",type:"object",properties:{where:{description:"Acts as a filter on the base data for attribute-based filtering.",type:"string",title:"where"},groupByFieldsForStatistics:{description:"An array of fields which determine how the base data is grouped. Only one **groupBy** Field is supported, but ArcGIS JSAPI [supports multiple groupBy fields](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#groupByFieldsForStatistics). While splitting by multiple group-by fields is possible, it is not being done because of the number of series it will give rise to (equal to the length of the Cartesian product set) possibly making the visualization hard to interpret.",
maxItems:1,type:"array",items:{type:"string"},title:"groupByFieldsForStatistics"},outStatistics:{description:"Represents an array of statistics definitions which dictate how a particular field should be aggregated. Refer to [JSAPI Statistics Definition class](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html) for more info.",type:"array",items:{$ref:"#/definitions/IStatisticDefinition"},title:"outStatistics"},orderByFields:{description:"Represents the sorting order of the output result. More info present in [JSAPI docs](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#orderByFields). The format of any entry in this array is `field_name sorting_order`. When `sorting_order` is not defined, it is assumed to be ascending",
examples:["STATE_NAME DESC","CITY_NAME ASC","CITY_NAME"],type:"array",items:{type:"string"},title:"orderByFields"},extent:{description:"Acts as a filter on the base data for spatial filtering. Only the features matching the given extent will be displayed on the chart. It is a [JSAPI Extent object](https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Extent.html)",$ref:"#/definitions/IExtent",title:"extent"}},additionalProperties:!1},WebChartSeries:{description:"JSON representation of the chart's series object. All other series extends this interface.",
type:"object",properties:{type:{type:"string",title:"type"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",
type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",
description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:["colorType","id","name","type","x"],title:"WebChartSeries"},WebChartBarChartSeries:{description:"[Bar chart](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/bar-chart.htm) shows the categorical distribution of String/DateTime data.",
title:"WebChartBarChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the BarChartSeries object. For BarSeries object, it is "barSeries".',type:"string",enum:["barSeries"],title:"type"},y:{description:"Specifies which field represents the y-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},stackedType:{description:'Specifies how the bars/columns should be placed when multiple bar series are rendered in the same chart, say when "split by" operation is executed on any field or when multiple attributes/fields corresponding to the same set of classes are to be visualized.',
enum:["sideBySide","stacked","stacked100"],type:"string",title:"stackedType"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the columns/bars should be rendered",title:"fillSymbol"},dataLabels:{$ref:"#/definitions/WebChartText",description:"Specifies how the data labels should be rendered.",title:"dataLabels"},rotated:{description:"Specifies whether the bars/columns are rotated or not. When it is `true`, we get vertical columns. When it is `false`, we get horizontal ones.",
default:!1,type:"boolean",title:"rotated"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",
type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",
description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"}},additionalProperties:!1,required:"colorType dataLabels fillSymbol id name type x y".split(" ")},HistogramOverlays:{description:"Object containing Histogram overlays",title:"HistogramOverlays",type:"object",properties:{type:{description:'Represents a unique string identifier for the HistogramOverlays object. For HistogramOverlays object, it is "chartOverlays".',
type:"string",enum:["chartOverlays"],title:"type"},mean:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the mean overlay for histogram.",title:"mean"},median:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the median overlay for histogram.",title:"median"},standardDeviation:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the standard deviation overlay for histogram.",title:"standardDeviation"},comparisonDistribution:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the comparison distribution overlay for histogram.",
title:"comparisonDistribution"}},additionalProperties:!1,required:["comparisonDistribution","mean","median","standardDeviation","type"]},WebChartHistogramSeries:{description:"[Histogram](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/histogram.htm) shows the numerical(frequency) distribution of a numerical field.",title:"WebChartHistogramSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the HistogramSeries object. For BarSeries object, it is "histogramSeries".',
type:"string",enum:["histogramSeries"],title:"type"},binCount:{description:"Bin count must be a positive integer.",minimum:1,multipleOf:1,default:32,type:["null","number"],title:"binCount"},overlays:{$ref:"#/definitions/HistogramOverlays",description:"Specifies the chart overlays. Histogram supports 4 overlays: **mean**, **median**, **standardDeviation** and **comparisonDistribution**.",title:"overlays"},dataTransformationType:{$ref:"#/definitions/WebChartDataTransformations",description:"Specifies how the data should be transformed (e.g. square root, log, etc.) before binning.",
title:"dataTransformationType"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the columns/bars should be rendered",title:"fillSymbol"},rotated:{description:"Specifies whether the bars/columns are rotated or not. When it is `true`, we get vertical columns. When it is `false`, we get horizontal ones.",default:!1,type:"boolean",title:"rotated"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",
default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",
minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:"colorType dataTransformationType fillSymbol id name overlays type x".split(" ")},ScatterPlotOverlays:{description:"Object containing Scatter Plot overlays",
title:"ScatterPlotOverlays",type:"object",properties:{type:{description:'Represents a unique string identifier for the ScatterPlotOverlays object. For ScatterPlotOverlays object, it is "chartOverlays".',type:"string",enum:["chartOverlays"],title:"type"},trendLine:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the trendline overlay for scatter plot.",title:"trendLine"}},additionalProperties:!1,required:["trendLine","type"]},WebChartScatterPlotSeries:{description:"[Scatter plot](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/scatter-plot.htm) shows the relationship between two numerical fields.",
title:"WebChartScatterPlotSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the ScatterSeries object. For ScatterSeries object, it is "scatterSeries".',type:"string",enum:["scatterSeries"],title:"type"},y:{description:"Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",description:'Specifies how each data point in the scatter plot should be rendered. The type is `"esriSMS"` and it is adopted from the [REST API Types](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm#GUID-C8D40B32-5F4B-45EB-8048-6D5A8763E13B).',
title:"markerSymbol"},overlays:{$ref:"#/definitions/ScatterPlotOverlays",description:"Specifies all the chart overlays. The scatter plot implements only 1 overlay, **trendLine**.",title:"overlays"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},
dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",
minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:"colorType id markerSymbol name overlays type x y".split(" ")},WebChartPieChartTick:{description:"JSON representation of the pie ticks.",
title:"WebChartPieChartTick",type:"object",properties:{type:{description:'Represents a unique string identifier for the WebChartPieChartTick object. For PieTick object, it is "pieTick".',type:"string",enum:["pieTick"],title:"type"},visible:{description:"Determines the visibility of the tick.\nAssigning the `true` value will only be considered when the data labels are visible (`series.dataLabels.visible`) and\nwhen the data label associated to the tick is outside of the chart (`series.dataLabelsOffset` \x3e 0).",
type:"boolean",title:"visible"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the pie chart ticks should be rendered",title:"lineSymbol"}},additionalProperties:!1,required:["lineSymbol","type"]},WebChartPieChartSlice:{description:"JSON representation of the pie slices",title:"WebChartPieChartSlice",type:"object",properties:{sliceId:{description:"A unique string used identify the slice of a pie chart.",type:"string",title:"sliceId"},label:{description:"Custom label for the slice.\nFor grouped slice, the default value is `Other`.\nFor regular slice, it will be either the category or field name.",
type:"string",title:"label"},fillSymbol:{description:"Contains styling info on how the slice should be rendered. If not provided, the slice will\nbe styled with default values.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"}},additionalProperties:!1,required:["sliceId"]},WebChartPieChartGroupSlice:{description:"JSON representation of the pie grouped slice",title:"WebChartPieChartGroupSlice",type:"object",properties:{percentageThreshold:{description:"Slices that have a percent value equal or lesser to this threshold are grouped into a unique slice",
type:"number",title:"percentageThreshold"},dataLabels:{description:"Specifies how the grouped slice data labels should be rendered.\nIf the property is not set the `series.dataLabels` will be used instead.",$ref:"#/definitions/WebChartText",title:"dataLabels"},sliceId:{description:"A unique string used identify the slice of a pie chart.",type:"string",title:"sliceId"},label:{description:"Custom label for the slice.\nFor grouped slice, the default value is `Other`.\nFor regular slice, it will be either the category or field name.",
type:"string",title:"label"},fillSymbol:{description:"Contains styling info on how the slice should be rendered. If not provided, the slice will\nbe styled with default values.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"}},additionalProperties:!1,required:["percentageThreshold","sliceId"]},WebChartPieChartSeries:{description:"JSON representation of the Pie Chart series",title:"WebChartPieChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the PieSeries object. For PieSeries object, it is "pieSeries".',
type:"string",enum:["pieSeries"],title:"type"},y:{description:"Specifies which field represents the y-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",minimum:0,maximum:100,default:50,type:["null","number"],title:"innerRadius"},
startAngle:{default:-90,type:["null","number"],title:"startAngle"},endAngle:{default:270,type:["null","number"],title:"endAngle"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the slices should be rendered",title:"fillSymbol"},displayNumericValueOnDataLabel:{description:"Indicates whether the numeric value associated to a slice is to be displayed on its data label.\nIf both displayNumericValue \x26 displayPercentage are true on a same label, they will be displayed as `percentage (value)`.\nThis property will be ignored if the chart options `dataLabelFormatter` is provided.",
default:!0,type:"boolean",title:"displayNumericValueOnDataLabel"},displayPercentageOnDataLabel:{description:"Indicates whether the percentage associated to a slice is to be displayed on its data label.\nIf both displayNumericValue \x26 displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `dataLabelFormatter` is provided.",default:!1,type:"boolean",title:"displayPercentageOnDataLabel"},displayNumericValueOnTooltip:{description:"Indicates whether the numeric value associated to a slice is to be displayed on its tooltip.\nIf both displayNumericValue \x26 displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `tooltipFormatter` is provided.",
default:!0,type:"boolean",title:"displayNumericValueOnTooltip"},displayPercentageOnTooltip:{description:"Indicates whether the percentage associated to a slice is to be displayed on its tooltip.\nIf both displayNumericValue \x26 displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `tooltipFormatter` is provided.",default:!0,type:"boolean",title:"displayPercentageOnTooltip"},numericValueFormat:{description:"Specifies how the numerical values should be formatted (applied to label, tooltip and legend)",
$ref:"#/definitions/NumberFormatOptions",title:"numericValueFormat"},percentValueFormat:{description:"Specifies how the percent values should be formatted (applied to label, tooltip and legend)",$ref:"#/definitions/NumberFormatOptions",title:"percentValueFormat"},valuePrefix:{description:"Adds a prefix to all the values displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"valuePrefix"},valueSuffix:{description:"Adds a suffix to all the values displayed on the pie chart: data labels, tooltips and legend",
type:"string",title:"valueSuffix"},percentagePrefix:{description:"Adds a prefix to all the percentages displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"percentagePrefix"},percentageSuffix:{description:"Adds a suffix to all the percentages displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"percentageSuffix"},dataLabelsCharacterLimit:{description:'If set, the category on the data label is truncated to display only `characterLimit` characters, and an ellipsis ("...")\nis added to the end of the label.\nThis does not affect the value and percentage part of the labels.\nDoes not apply to tooltips and legend labels.',
default:"undefined",minimum:1,multipleOf:1,type:["null","number"],title:"dataLabelsCharacterLimit"},ticks:{description:"Specifies how to render the ticks shown on each slide.\nTicks will be displayed with default values if not provided.",$ref:"#/definitions/WebChartPieChartTick",title:"ticks"},dataLabelsOffset:{description:"Determines in pixel how far the data labels should be placed from their slice.\nIf a negative value is provided the label will be placed inside of the chart.",type:"number",title:"dataLabelsOffset"},
sliceGrouping:{description:"Specifies if and how the slices under a given percentage threshold are grouped into a unique slice",$ref:"#/definitions/WebChartPieChartGroupSlice",title:"sliceGrouping"},slices:{description:"An array of WebChartPieChartSlice representing the ids, labels and styles of the pie slices.\n\nWhen this property is not defined, or when a pie slice does not have a matching slice in this array,\nthe series' fillSymbol will be used. If the series' fillSymbol does not contain color information, colors from the\ncolor ramps will be utilized.",
type:"array",items:{$ref:"#/definitions/WebChartPieChartSlice"},title:"slices"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},
name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",
minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:"colorType fillSymbol id name type x y".split(" ")},WebChartGaugeSeries:{description:"JSON representation of the `Gauge` series",
title:"WebChartGaugeSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the GaugeSeries object. For GaugeSeries object, it is "gaugeSeries".',type:"string",enum:["gaugeSeries"],title:"type"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,
type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",
minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:["colorType","id","name","type","x"]},WebChartLineChartSeries:{description:"JSON representation of the Line Chart series",
title:"WebChartLineChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the LineSeries object. For LineSeries object, it is "lineSeries".',type:"string",enum:["lineSeries"],title:"type"},y:{type:"string",title:"y"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the line/line segments should be rendered",title:"lineSymbol"},lineSmoothed:{description:"Specifies whether line segments should be smoothed.",default:!1,
type:"boolean",title:"lineSmoothed"},showArea:{description:"Indicates whether line series show area.",default:!1,type:"boolean",title:"showArea"},markerVisible:{description:"Indicates whether to show or hide the markers/bullets of the line series.",default:!0,type:"boolean",title:"markerVisible"},markerSymbol:{description:"Contains styling info on how the marker should be rendered",$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},areaColor:{description:"Specifies the color of the filled area for line chart.\nareaColor will be applied only if showArea is true, and is defaulted to the line color if not provided.",
type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"areaColor"},rotated:{description:"Specifies whether the series should be rotated.",default:!1,type:"boolean",title:"rotated"},stackedType:{description:'Specifies how the lines should be placed when multiple line series are rendered in the same chart, say when "split by" operation is executed on any field or\nwhen multiple attributes/fields corresponding to the same set of classes are to be visualized.',
default:"sideBySide",enum:["sideBySide","stacked","stacked100"],type:"string",title:"stackedType"},stackNegativeValuesToBaseline:{description:"Specifies how negative values are treated in stacked series.\nIf true, negative values will be stacked on the base line.\nIf false, negative values will be stacked in relation to their previous values in the stack.",default:!0,type:"boolean",title:"stackNegativeValuesToBaseline"},timeIntervalUnits:{description:"The time unit that corresponds to the `timeIntervalSize`. Valid options include seconds, minutes, hours, days, weeks, months, and years.",
enum:"esriTimeUnitsDays esriTimeUnitsHours esriTimeUnitsMinutes esriTimeUnitsMonths esriTimeUnitsSeconds esriTimeUnitsWeeks esriTimeUnitsYears".split(" "),type:"string",title:"timeIntervalUnits"},timeIntervalSize:{description:"The span of time that will be binned or aggregated together. This property must be used in conjunction with `timeIntervalUnits`.",minimum:0,type:"number",title:"timeIntervalSize"},timeAggregationType:{description:"The time interval alignment type. Valid options include `equalIntervalsFromStartTime` and `equalIntervalsFromEndTime`.",
default:"equalIntervalsFromStartTime",enum:["equalIntervalsFromEndTime","equalIntervalsFromStartTime"],type:"string",title:"timeAggregationType"},trimIncompleteTimeInterval:{description:"Determines whether incomplete time intervals at the start or end of the data span (depending on the `timeAggregationType`) will be removed from the chart.\nIncomplete intervals on a chart can cause misleading results in which the period in question is under- or overreported due to a different amount of time in the interval.\nSetting `true` indicates to trim these incomplete intervals. Setting `false` does not trim incomplete intervals.",
default:!0,type:"boolean",title:"trimIncompleteTimeInterval"},nullPolicy:{description:"How summarized bins returning a null value are displayed. Supported options are `null`, `zero`, and `interpolate`.",default:"null",enum:["interpolate","null","zero"],type:"string",title:"nullPolicy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",
default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",
minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:"colorType id lineSymbol name type x y".split(" ")},WebChartBoxPlotSeries:{description:"JSON representation of the Box plot series",
title:"WebChartBoxPlotSeries",type:"object",properties:{type:{type:"string",enum:["boxPlotSeries"],title:"type"},y:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}],title:"y"},showOutliers:{type:"boolean",title:"showOutliers"},showInnerPoints:{type:"boolean",title:"showInnerPoints"},showMean:{type:"boolean",title:"showMean"},standardizeValues:{type:"boolean",title:"standardizeValues"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"},rotated:{type:"boolean",title:"rotated"},
id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",
type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",
description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:"colorType fillSymbol id name showInnerPoints showMean showOutliers standardizeValues type x y".split(" ")},WebChartProbabilityPlotSeries:{description:"JSON representation of the Probability plot series",
title:"WebChartProbabilityPlotSeries",type:"object",properties:{type:{type:"string",enum:["probabilityPlotSeries"],title:"type"},y:{type:"string",title:"y"},probabilityPlotType:{$ref:"#/definitions/WebChartProbabilityPlotKinds",title:"probabilityPlotType"},dataTransformationType:{$ref:"#/definitions/WebChartDataTransformations",title:"dataTransformationType"},showReferenceLine:{type:"boolean",title:"showReferenceLine"},standardizeValues:{type:"boolean",title:"standardizeValues"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",
title:"markerSymbol"},referenceLineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",title:"referenceLineSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",
title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",
minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:"colorType dataTransformationType id markerSymbol name probabilityPlotType referenceLineSymbol showReferenceLine standardizeValues type x y".split(" ")},
WebChartProfileGraphSeries:{description:"JSON representation of the Profile graph series",title:"WebChartProfileGraphSeries",type:"object",properties:{type:{type:"string",enum:["profileGraphSeries"],title:"type"},y:{type:"string",title:"y"},horizontalUnits:{type:"string",title:"horizontalUnits"},verticalUnits:{type:"string",title:"verticalUnits"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",title:"lineSymbol"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",
type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.",default:!0,type:"boolean",title:"dataTooltipVisible"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Specifies a query object associated with a particular series containing info on what data to fetch for that series.",
$ref:"#/definitions/WebChartQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the feature layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",
$ref:"#/definitions/WebChartText",title:"dataLabels"}},additionalProperties:!1,required:"colorType horizontalUnits id lineSymbol markerSymbol name type verticalUnits x y".split(" ")},WebChartSeriesType:{description:"Type containing all the series types available",anyOf:[{$ref:"#/definitions/WebChartBarChartSeries"},{$ref:"#/definitions/WebChartHistogramSeries"},{$ref:"#/definitions/WebChartScatterPlotSeries"},{$ref:"#/definitions/WebChartPieChartSeries"},{$ref:"#/definitions/WebChartGaugeSeries"},
{$ref:"#/definitions/WebChartLineChartSeries"},{$ref:"#/definitions/WebChartBoxPlotSeries"},{$ref:"#/definitions/WebChartProbabilityPlotSeries"},{$ref:"#/definitions/WebChartProfileGraphSeries"}],title:"WebChartSeriesType"},WebMapWebChart:{description:"Gives a JSON representation of the Chart object without the dataSource Object. Used in the Webmap Viewer workflows.",type:"object",properties:{version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",
enum:["1.0.0"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",
$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",
type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",
type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all. For XY Chart only.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nThe default value for the horizontal axis is "rotate".',default:"rotated",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},
verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",
items:{description:"Type containing all the series types available",anyOf:[{$ref:"#/definitions/WebChartBarChartSeries"},{$ref:"#/definitions/WebChartHistogramSeries"},{$ref:"#/definitions/WebChartScatterPlotSeries"},{$ref:"#/definitions/WebChartPieChartSeries"},{$ref:"#/definitions/WebChartGaugeSeries"},{$ref:"#/definitions/WebChartLineChartSeries"},{$ref:"#/definitions/WebChartBoxPlotSeries"},{$ref:"#/definitions/WebChartProbabilityPlotSeries"},{$ref:"#/definitions/WebChartProfileGraphSeries"}]},
title:"series"}},additionalProperties:!1,required:["series","type","version"],title:"WebMapWebChart"},WebMapWebGaugeChart:{description:"JSON representation of Gauge",type:"object",properties:{innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",default:50,type:["null","number"],title:"innerRadius"},startAngle:{description:"Represents where is the chart's starting point",default:-180,type:["null","number"],
title:"startAngle"},endAngle:{description:"Represents where is the chart's ending point. To be related with startAngle. If endAngle-startAngle is 360 the chart will render as full circle.",default:180,type:["null","number"],title:"endAngle"},axes:{description:"Array of one WebChartGaugeAxis",type:"array",items:[{$ref:"#/definitions/WebChartGaugeAxis"}],minItems:1,maxItems:1,title:"axes"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",
enum:["1.0.0"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",
$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",
type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all. For XY Chart only.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nThe default value for the horizontal axis is "rotate".',
default:"rotated",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",
minItems:1,type:"array",items:{description:"Type containing all the series types available",anyOf:[{$ref:"#/definitions/WebChartBarChartSeries"},{$ref:"#/definitions/WebChartHistogramSeries"},{$ref:"#/definitions/WebChartScatterPlotSeries"},{$ref:"#/definitions/WebChartPieChartSeries"},{$ref:"#/definitions/WebChartGaugeSeries"},{$ref:"#/definitions/WebChartLineChartSeries"},{$ref:"#/definitions/WebChartBoxPlotSeries"},{$ref:"#/definitions/WebChartProbabilityPlotSeries"},{$ref:"#/definitions/WebChartProfileGraphSeries"}]},
title:"series"}},additionalProperties:!1,required:["axes","series","type","version"],title:"WebMapWebGaugeChart"},WebChart:{description:"Gives a JSON representation of the Chart object. Used by ArcGIS Charts packages.",type:"object",properties:{dataSource:{description:"Property representing the datasource. Can be Feature layer or vanilla POJOs.",anyOf:[{$ref:"#/definitions/WebChartInlineDataSource"},{$ref:"#/definitions/WebChartFeatureLayerDataSource"}],title:"dataSource"},version:{description:"Version of the specification. Used to identify when a saved config was created.",
type:"string",enum:["1.0.0"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",
$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",
type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",
type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all. For XY Chart only.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nThe default value for the horizontal axis is "rotate".',default:"rotated",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},
verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",
items:{description:"Type containing all the series types available",anyOf:[{$ref:"#/definitions/WebChartBarChartSeries"},{$ref:"#/definitions/WebChartHistogramSeries"},{$ref:"#/definitions/WebChartScatterPlotSeries"},{$ref:"#/definitions/WebChartPieChartSeries"},{$ref:"#/definitions/WebChartGaugeSeries"},{$ref:"#/definitions/WebChartLineChartSeries"},{$ref:"#/definitions/WebChartBoxPlotSeries"},{$ref:"#/definitions/WebChartProbabilityPlotSeries"},{$ref:"#/definitions/WebChartProfileGraphSeries"}]},
title:"series"}},additionalProperties:!1,required:["dataSource","series","type","version"],title:"WebChart"},WebGaugeChart:{type:"object",properties:{dataSource:{description:"Property representing the datasource. Can be Feature layer or vanilla POJOs.",anyOf:[{$ref:"#/definitions/WebChartInlineDataSource"},{$ref:"#/definitions/WebChartFeatureLayerDataSource"}],title:"dataSource"},innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",
default:50,type:["null","number"],title:"innerRadius"},startAngle:{description:"Represents where is the chart's starting point",default:-180,type:["null","number"],title:"startAngle"},endAngle:{description:"Represents where is the chart's ending point. To be related with startAngle. If endAngle-startAngle is 360 the chart will render as full circle.",default:180,type:["null","number"],title:"endAngle"},axes:{description:"Array of one WebChartGaugeAxis",type:"array",items:[{$ref:"#/definitions/WebChartGaugeAxis"}],
minItems:1,maxItems:1,title:"axes"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["1.0.0"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},title:{description:"Specifies heading/title of the chart.",
$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",
type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all. For XY Chart only.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nThe default value for the horizontal axis is "rotate".',
default:"rotated",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",
minItems:1,type:"array",items:{description:"Type containing all the series types available",anyOf:[{$ref:"#/definitions/WebChartBarChartSeries"},{$ref:"#/definitions/WebChartHistogramSeries"},{$ref:"#/definitions/WebChartScatterPlotSeries"},{$ref:"#/definitions/WebChartPieChartSeries"},{$ref:"#/definitions/WebChartGaugeSeries"},{$ref:"#/definitions/WebChartLineChartSeries"},{$ref:"#/definitions/WebChartBoxPlotSeries"},{$ref:"#/definitions/WebChartProbabilityPlotSeries"},{$ref:"#/definitions/WebChartProfileGraphSeries"}]},
title:"series"}},additionalProperties:!1,required:["axes","dataSource","series","type","version"],title:"WebGaugeChart"},OverlayTerms:{enum:["Mean","Median","Normal Distribution","Standard Deviation","Trendline"],type:"string",title:"OverlayTerms"},CalculatedMinMaxBoundsPayload:{type:"object",properties:{isXAxis:{type:"boolean",title:"isXAxis"},minimum:{type:["null","number"],title:"minimum"},maximum:{type:["null","number"],title:"maximum"}},additionalProperties:!1,required:["isXAxis"],title:"CalculatedMinMaxBoundsPayload"},
ChartDeletePayload:{type:"object",properties:{chartId:{type:"string",title:"chartId"}},additionalProperties:!1,required:["chartId"],title:"ChartDeletePayload"},LegendItemVisibility:{type:"object",properties:{visible:{type:"boolean",title:"visible"},seriesId:{type:"string",title:"seriesId"},overlayType:{enum:["Mean","Median","Normal Distribution","Standard Deviation","Trendline"],type:"string",title:"overlayType"},sliceId:{type:"string",title:"sliceId"},sliceData:{description:"JSON representation of a typical data item",
$ref:"#/definitions/WebChartDataItem",title:"sliceData"}},additionalProperties:!1,required:["visible"],title:"LegendItemVisibility"},IFeatureLayer:{description:"Feature layers can be created by referencing a layer from either a map service or a feature service or by specifying a feature collection object.\nUse a map service if you just want to retrieve geometries and attributes from the server and symbolize them yourself. Use a feature service if\nyou want to take advantage of symbols from the service's source map document. Also, use a feature service if you plan on doing editing with the\nfeature layer. Feature layers honor any feature templates configured in the source map document. Feature collection objects are used to create\na feature layer based on the supplied definition.",
title:"IFeatureLayer",type:"object",properties:{capabilities:{description:"A comma-separated string listing which editing operations are allowed on an editable feature service.",type:"string",title:"capabilities"},definitionEditor:{description:"Stores interactive filters.",$ref:"#/definitions/IDefinitionEditor",title:"definitionEditor"},disablePopup:{description:"Indicates whether to allow a client to ignore popups defined by the service item.",enum:[!0],type:"boolean",title:"disablePopup"},featureCollection:{description:"A featureCollection object defining a layer of features whose geometry and attributes are either stored directly within the web map or with an item. Feature Collections can be created from CSVs, shapefiles, GPX, or map notes.",
title:"featureCollection"},featureCollectionType:{description:"Indicates the type of features in the feature collection. If featureCollectionType is missing, it means the feature collection is a regular single-layer or multi-layer feature collection.",enum:["markup","notes","route"],type:"string",title:"featureCollectionType"},layerDefinition:{description:"A layerDefinition object defining the attribute schema and drawing information for the layer.",$ref:"#/definitions/ILayerDefinition",title:"layerDefinition"},
layerType:{description:"String indicating the layer type.",type:"string",enum:["ArcGISFeatureLayer"],title:"layerType"},mode:{description:"0 is snapshot mode. 1 is on-demand mode. 2 is selection-only mode. Used with ArcGIS feature services and individual layers in ArcGIS map services.",enum:[0,1,2],type:"number",title:"mode"},popupInfo:{description:"A popupInfo object defining the content of popup windows when you click or query a feature.",$ref:"#/definitions/IPopupInfo",title:"popupInfo"},refreshInterval:{description:"Refresh interval of the layer in minutes. Non-zero value indicates automatic layer refresh at the specified interval. Value of 0 indicates auto refresh is not enabled.",
type:"number",title:"refreshInterval"},showLabels:{description:"Labels will display if this property is set to true and the layer also has a labelingInfo property associated with it. This property can get stored in the web map config and in the item/data.",enum:[!0],type:"boolean",title:"showLabels"},visibleLayers:{description:"An array of sublayer ids that should appear visible. Used with feature layers that are based on feature collections.",type:"array",items:{type:"number"},title:"visibleLayers"},
id:{description:"A unique identifying string for the layer.",title:"id"},name:{description:"Layer name",type:"string",title:"name"},itemId:{description:"Optional string containing the item ID of the service if it's registered on ArcGIS Online or your organization's portal.",type:"string",title:"itemId"},maxScale:{description:"Integer property used to determine the maximum scale at which the layer is displayed.",type:"number",title:"maxScale"},minScale:{description:"Integer property used to determine the minimum scale at which the layer is displayed.",
type:"number",title:"minScale"},opacity:{description:"The degree of transparency applied to the layer on the client side, where 0 is full transparency and 1 is no transparency.",type:"number",title:"opacity"},showLegend:{description:"Boolean property indicating whether to display in the legend.",type:"boolean",title:"showLegend"},title:{description:"A user-friendly string title for the layer that can be used in a table of contents.",type:"string",title:"title"},type:{description:"Deprecated, use layerType instead.",
type:"string",title:"type"},visibility:{description:"Boolean property determining whether the layer is initially visible in the web map.",type:"boolean",title:"visibility"},url:{description:"The URL to the layer. Not applicable to all layer types.",type:"string",title:"url"},timeAnimation:{description:"This property is applicable to layers that support time. If 'true', timeAnimation is enabled.",type:"boolean",title:"timeAnimation"}},additionalProperties:!1,required:["id","layerType"]},IDefinitionEditor:{description:"The definitionEditor stores interactive filters at the same level as layerDefinition.",
title:"IDefinitionEditor",type:"object",properties:{inputs:{description:"An array of input objects.",type:"array",items:{$ref:"#/definitions/IDefinitionInput"},title:"inputs"},parameterizedExpression:{description:"A string value representing the where clause for the interactive filter.",type:"string",title:"parameterizedExpression"}},additionalProperties:!1},IDefinitionInput:{title:"IDefinitionInput",type:"object",properties:{hint:{description:"A string value representing a hint for the input.",type:"string",
title:"hint"},parameters:{description:"An array of parameter objects.",type:"array",items:{$ref:"#/definitions/IDefinitionParameter"},title:"parameters"},prompt:{description:"A string value representing the prompt for the input.",type:"string",title:"prompt"}},additionalProperties:!1},IDefinitionParameter:{title:"IDefinitionParameter",type:"object",properties:{defaultValue:{description:"The default value that is automatically given if nothing is provided.",type:["string","number"],title:"defaultValue"},
fieldName:{description:"A string value representing the name of the field to query.",type:"string",title:"fieldName"},parameterId:{description:"Number given to uniquely identify the specified parameter.",title:"parameterId"},type:{description:"The field type for the specified field parameter.",enum:"esriFieldTypeBlob esriFieldTypeDate esriFieldTypeDouble esriFieldTypeGUID esriFieldTypeGeometry esriFieldTypeGlobalID esriFieldTypeInteger esriFieldTypeOID esriFieldTypeRaster esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeString esriFieldTypeXML".split(" "),
type:"string",title:"type"},utcValue:{description:"An integer value representing exact UNIX time used when defaultValue is a date string.",type:"number",title:"utcValue"}},additionalProperties:!1},ILayerDefinition:{description:'`ILayerDefinition` can also be imported from the following packages:\n\n```js\nimport { ILayerDefinition } from "@esri/arcgis-rest-service-admin";\nimport { ILayerDefinition } from "@esri/arcgis-rest-feature-layer";\n```',title:"ILayerDefinition",type:"object",properties:{allowGeometryUpdates:{description:"Boolean value indicating whether the geometry of the features in the layer can be edited.",
type:"boolean",title:"allowGeometryUpdates"},capabilities:{description:"A comma separated list of supported capabilities, e.g. Query,Editing.",type:"string",title:"capabilities"},copyrightText:{description:"String value for the copyright text information for the layer.",type:"string",title:"copyrightText"},currentVersion:{description:"Numeric value indicating the server version of the layer.",type:"number",title:"currentVersion"},defaultVisibility:{description:"Boolean value indicating whether the layer's visibility is turned on.",
type:"boolean",title:"defaultVisibility"},definitionEditor:{description:"Stores interactive filters.",$ref:"#/definitions/IDefinitionEditor",title:"definitionEditor"},definitionExpression:{description:"SQL-based definition expression string that narrows the data to be displayed in the layer.",type:"string",title:"definitionExpression"},description:{description:"String value of the layer as defined in the map service.",type:"string",title:"description"},displayField:{description:"A string value that summarizes the feature.",
type:"string",title:"displayField"},drawingInfo:{description:"Contains drawing, labeling, and transparency information.",title:"drawingInfo"},extent:{description:"An object defining the rectangular area.",anyOf:[{$ref:"#/definitions/IExtent"},{type:"null"}],title:"extent"},editingInfo:{description:"An object defining the editing info (last edit date).",$ref:"#/definitions/IEditingInfo",title:"editingInfo"},featureReduction:{description:"Feature reductions declutter the screen by hiding features that would otherwise intersect with other features on screen.",
title:"featureReduction"},fields:{description:"An array of field objects containing information about the attribute fields for the feature collection or layer.",type:"array",items:{$ref:"#/definitions/IField"},title:"fields"},geometryType:{description:"A string defining the type of geometry. Possible geometry types are: esriGeometryPoint, esriGeometryMultipoint, esriGeometryPolyline, esriGeometryPolygon, and esriGeometryEnvelope.",enum:["esriGeometryEnvelope","esriGeometryMultipoint","esriGeometryPoint",
"esriGeometryPolygon","esriGeometryPolyline"],type:"string",title:"geometryType"},globalIdField:{description:"The unique identifier for a feature or table row within a geodatabase.",type:"string",title:"globalIdField"},hasAttachments:{description:"Indicates whether attachments should be loaded for the layer.",type:"boolean",title:"hasAttachments"},hasStaticData:{description:"Boolean value indicating whether data changes. True if it does not.",type:"boolean",title:"hasStaticData"},htmlPopupType:{description:"String value indicating the HTML popup type.",
enum:["esriServerHTMLPopupTypeAsHTMLText","esriServerHTMLPopupTypeAsURL","esriServerHTMLPopupTypeNone"],type:"string",title:"htmlPopupType"},id:{description:"The identifier assigned to the layer.",type:"number",title:"id"},isDataVersioned:{description:"Boolean value indicating whether the data is versioned.",type:"boolean",title:"isDataVersioned"},maxRecordCount:{description:"Numeric value indicating tbe maximum number of records that will be returned at once for a query.",type:"number",title:"maxRecordCount"},
maxScale:{description:"Represents the maximum scale at which the layer definition will be applied. This does not apply to layers of type: ArcGISMapServiceLayer, ImageServiceVectorLayer or ImageServiceLayer.",type:"number",title:"maxScale"},minScale:{description:"Represents the minimum scale at which the layer definition will be applied. This does not apply to layers of type: ArcGISMapServiceLayer, ImageServiceVectorLayer or ImageServiceLayer.",type:"number",title:"minScale"},name:{description:"Contains a unique name for the layer that can be displayed in a legend.",
type:"string",title:"name"},objectIdField:{description:"Indicates the name of the object ID field in the dataset.",type:"string",title:"objectIdField"},overrideSymbols:{description:"Dictates whether a client can support having an end user modify symbols on individual features.",type:"boolean",title:"overrideSymbols"},rangeInfos:{description:"Indicates range information",title:"rangeInfos"},source:{description:"An object indicating the layerDefinition's layer source.",title:"source"},spatialReference:{description:"An object containing the WKID or WKT identifying the spatial reference of the layer's geometry.",
$ref:"#/definitions/ISpatialReference",title:"spatialReference"},supportedQueryFormats:{description:"String value indicating the output formats that are supported in a query.",type:"string",title:"supportedQueryFormats"},supportsAdvancedQueries:{description:"Boolean value indicating whether the layer supports orderByFields in a query operation.",type:"boolean",title:"supportsAdvancedQueries"},supportsAttachmentsByUploadId:{description:"Boolean value indicating whether the layer supports uploading attachments with the Uploads operation. This can then be used in the Add Attachment and Update Attachment operations.",
type:"boolean",title:"supportsAttachmentsByUploadId"},supportsCalculate:{description:"Boolean value indicating whether the layer supports the Calculate REST operation when updating features.",type:"boolean",title:"supportsCalculate"},supportsRollbackOnFailureParameter:{description:"Boolean value indicating whether the layer supports rolling back edits made on a feature layer if some of the edits fail.",type:"boolean",title:"supportsRollbackOnFailureParameter"},supportsStatistics:{description:"Boolean value indicating whether feature layer query operations support statistical functions.",
type:"boolean",title:"supportsStatistics"},supportsValidateSql:{description:"Boolean value indicating whether the validateSQL operation is supported across a feature service layer.",type:"boolean",title:"supportsValidateSql"},templates:{description:"A property of the layer definition when there are no types defined; otherwise, templates are defined as properties of the types.",type:"array",items:{$ref:"#/definitions/ITemplate"},title:"templates"},timeInfo:{description:"The time info metadata of the layer. May be set for feature layers inside a feature collection item.",
title:"timeInfo"},type:{description:"Indicates whether the layerDefinition applies to a Feature Layer or a Table.",enum:["Feature Layer","Table"],type:"string",title:"type"},typeIdField:{description:"Contains the name of the field holding the type ID for the features.",type:"string",title:"typeIdField"},types:{description:"Contains information about an attribute field.",title:"types"},visibilityField:{description:"String value indicating the attribute field that is used to control the visibility of a feature.\nIf applicable, when rendering a feature the client should use this field to control visibility.\nThe field's values are 0 \x3d do not display, 1 \x3d display.",
type:"string",title:"visibilityField"},relationships:{type:"array",items:{},title:"relationships"},editFieldsInfo:{type:"object",properties:{creationDateField:{type:"string",title:"creationDateField"},creatorField:{type:"string",title:"creatorField"},editDateField:{type:"string",title:"editDateField"},editorField:{type:"string",title:"editorField"}},additionalProperties:!1,title:"editFieldsInfo"},parentLayerId:{type:"number",title:"parentLayerId"},ownershipBasedAccessControlForFeatures:{type:"boolean",
title:"ownershipBasedAccessControlForFeatures"},syncCanReturnChanges:{type:"boolean",title:"syncCanReturnChanges"},archivingInfo:{type:"object",properties:{supportsQueryWithHistoricMoment:{type:"boolean",title:"supportsQueryWithHistoricMoment"},startArchivingMoment:{type:"number",title:"startArchivingMoment"}},additionalProperties:!1,title:"archivingInfo"},supportsValidateSQL:{type:"boolean",title:"supportsValidateSQL"},advancedQueryCapabilities:{type:"object",properties:{supportsPagination:{type:"boolean",
title:"supportsPagination"},supportsTrueCurve:{type:"boolean",title:"supportsTrueCurve"},supportsQueryWithDistance:{type:"boolean",title:"supportsQueryWithDistance"},supportsReturningQueryExtent:{type:"boolean",title:"supportsReturningQueryExtent"},supportsStatistics:{type:"boolean",title:"supportsStatistics"},supportsOrderBy:{type:"boolean",title:"supportsOrderBy"},supportsDistinct:{type:"boolean",title:"supportsDistinct"},supportsSqlExpression:{type:"boolean",title:"supportsSqlExpression"},supportsPercentileStatistics:{type:"boolean",
title:"supportsPercentileStatistics"}},additionalProperties:!1,title:"advancedQueryCapabilities"},allowTrueCurvesUpdates:{type:"boolean",title:"allowTrueCurvesUpdates"},onlyAllowTrueCurveUpdatesByTrueCurveClients:{type:"boolean",title:"onlyAllowTrueCurveUpdatesByTrueCurveClients"},supportsApplyEditsWithGlobalIds:{type:"boolean",title:"supportsApplyEditsWithGlobalIds"},subtypeField:{type:"string",title:"subtypeField"},indexes:{type:"array",items:{},title:"indexes"},dateFieldsTimeReference:{type:"object",
properties:{timeZone:{type:"string",title:"timeZone"},respectsDaylightSaving:{type:"boolean",title:"respectsDaylightSaving"}},additionalProperties:!1,title:"dateFieldsTimeReference"},useStandardizedQueries:{type:"boolean",title:"useStandardizedQueries"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"}},additionalProperties:!1},IExtent:{description:'Extents are used to define rectangles and bounding boxes.\n\n`IExtent` can also be imported from the following packages:\n\n```js\nimport { IExtent } from "@esri/arcgis-rest-geocoding";\nimport { IExtent } from "@esri/arcgis-rest-service-admin";\nimport { IExtent } from "@esri/arcgis-rest-feature-layer";\n```',
title:"IExtent",type:"object",properties:{xmin:{type:"number",title:"xmin"},ymin:{type:"number",title:"ymin"},zmin:{type:"number",title:"zmin"},xmax:{type:"number",title:"xmax"},ymax:{type:"number",title:"ymax"},zmax:{type:"number",title:"zmax"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',
$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},additionalProperties:!1,required:["xmax","xmin","ymax","ymin"]},ISpatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',
title:"ISpatialReference",type:"object",properties:{wkid:{type:"number",title:"wkid"},latestWkid:{type:"number",title:"latestWkid"},vcsWkid:{type:"number",title:"vcsWkid"},latestVcsWkid:{type:"number",title:"latestVcsWkid"},wkt:{type:"string",title:"wkt"},latestWkt:{type:"string",title:"latestWkt"}},additionalProperties:!1},IEditingInfo:{title:"IEditingInfo",type:"object",properties:{lastEditDate:{description:"date of last edit to the layer",type:"number",title:"lastEditDate"}},additionalProperties:!1},
IField:{description:'Contains information about an attribute field.\n\n`IField` can also be imported from the following packages:\n\n```js\nimport { IField } from "@esri/arcgis-rest-feature-layer";\n```',title:"IField",type:"object",properties:{name:{description:"A string defining the field name.",type:"string",title:"name"},type:{$ref:"#/definitions/FieldType",description:"A string defining the field type.",title:"type"},alias:{description:"A string defining the field alias.",type:"string",title:"alias"},
domain:{description:"Information for a field with a domain",type:"object",properties:{type:{$ref:"#/definitions/DomainType",description:"A string defining the domain type.",title:"type"},name:{description:"A string defining the field name.",type:"string",title:"name"},range:{description:"A 2 element array defining the range of possible values.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"range"},codedValues:{description:"An array of CodedValues for domains of type codedValue.",
type:"array",items:{description:"CodedValue type",type:"object",properties:{name:{description:"User-friendly name for what the code means.",type:"string",title:"name"},code:{description:"The value stored in the feature attribute.",type:["string","number"],title:"code"}},additionalProperties:!1,required:["code","name"]},title:"codedValues"},description:{description:"Description of the domain",type:"string",title:"description"},mergePolicy:{description:"Merge policy",type:"string",title:"mergePolicy"},
splitPolicy:{description:"Split Policy",type:"string",title:"splitPolicy"}},additionalProperties:!1,required:["type"],title:"domain"},editable:{description:"A Boolean defining whether this field is editable.",type:"boolean",title:"editable"},exactMatch:{description:"A Boolean defining whether or not the field is an exact match.",type:"boolean",title:"exactMatch"},length:{description:"A number defining how many characters are allowed in a string. field.",type:"number",title:"length"},nullable:{description:"A Boolean defining whether this field can have a null value.",
type:"boolean",title:"nullable"},defaultValue:{description:"The value written in for new records by default.",title:"defaultValue"}},additionalProperties:!1,required:["name","type"]},FieldType:{description:"Field type.",title:"FieldType",enum:"esriFieldTypeBlob esriFieldTypeDate esriFieldTypeDouble esriFieldTypeGUID esriFieldTypeGeometry esriFieldTypeGlobalID esriFieldTypeInteger esriFieldTypeOID esriFieldTypeRaster esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeString esriFieldTypeXML".split(" "),
type:"string"},DomainType:{description:"Domain types",title:"DomainType",enum:["codedValue","inherited","range"],type:"string"},ITemplate:{description:"Templates describe features that can be created in a layer. They are generally used with feature collections and editable web-based CSV layers.\nTemplates are not used with ArcGIS feature services as these already have templates defined in the service. They are also defined as properties\nof the layer definition when there are no defined types. Otherwise, templates are defined as properties of the types.",
title:"ITemplate",type:"object",properties:{description:{description:"A string value containing a detailed description of the template.",title:"description"},drawingTool:{description:"An optional string that can define a client-side drawing tool to be used with this feature. For example, map notes used by the Online Map Viewer use this to represent the viewer's different drawing tools.",enum:"esriFeatureEditToolAutoCompletePolygon esriFeatureEditToolCircle esriFeatureEditToolDownArrow esriFeatureEditToolEllipse esriFeatureEditToolFreehand esriFeatureEditToolLeftArrow esriFeatureEditToolLine esriFeatureEditToolNone esriFeatureEditToolPoint esriFeatureEditToolPolygon esriFeatureEditToolRectangle esriFeatureEditToolRightArrow esriFeatureEditToolText esriFeatureEditToolTriangle esriFeatureEditToolUpArrow".split(" "),
type:"string",title:"drawingTool"},name:{description:"A string containing a user-friendly name for the template.",type:"string",title:"name"},prototype:{description:"A feature object representing a prototypical feature for the template.",$ref:"#/definitions/IFeature",title:"prototype"}},additionalProperties:!1},IFeature:{description:'a spatial entity and its corresponding properties\n\n`IFeature` can also be imported from the following packages:\n\n```js\nimport { IFeature } from "@esri/arcgis-rest-feature-layer";\nimport { IFeature } from "@esri/arcgis-rest-routing";\n```',
title:"IFeature",type:"object",properties:{geometry:{description:'a building block for discrete geometries\n\n`IGeometry` can also be imported from the following packages:\n\n```js\nimport { IGeometry } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/IGeometry",title:"geometry"},attributes:{type:"object",additionalProperties:{},title:"attributes"},symbol:{$ref:"#/definitions/ISymbol",title:"symbol"}},additionalProperties:!1,required:["attributes"]},IGeometry:{description:'a building block for discrete geometries\n\n`IGeometry` can also be imported from the following packages:\n\n```js\nimport { IGeometry } from "@esri/arcgis-rest-feature-layer";\n```',
title:"IGeometry",type:"object",properties:{spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',
$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},additionalProperties:!1},ISymbol:{title:"ISymbol",type:"object",properties:{type:{$ref:"#/definitions/SymbolType",title:"type"},style:{type:"string",title:"style"}},additionalProperties:!1,required:["type"]},SymbolType:{title:"SymbolType",enum:"esriPFS esriPMS esriSFS esriSLS esriSMS esriTS".split(" "),type:"string"},IPopupInfo:{description:"Defines the look and feel of popup windows when a user clicks or queries a feature.",title:"IPopupInfo",
type:"object",properties:{description:{description:"A string that appears in the body of the popup window as a description. It is also possible to specify the description as HTML-formatted content.",type:["null","string"],title:"description"},expressionInfos:{description:"List of Arcade expressions added to the pop-up.",type:"array",items:{$ref:"#/definitions/IPopupExpressionInfo"},title:"expressionInfos"},fieldInfos:{description:"Array of fieldInfo information properties. This information is provided by the service layer definition. When the description uses name/value pairs, the order of the array is how the fields display in the editable Map Viewer popup and the resulting popup. It is also possible to specify HTML-formatted content.",
type:"array",items:{$ref:"#/definitions/IFieldInfo"},title:"fieldInfos"},layerOptions:{description:"Additional options that can be defined for the popup layer.",type:"object",properties:{showNoDataRecords:{description:"Indicates whether or not the NoData records should be displayed.",type:"boolean",title:"showNoDataRecords"}},additionalProperties:!1,required:["showNoDataRecords"],title:"layerOptions"},mediaInfos:{description:"Array of various mediaInfo to display. Can be of type image, piechart, barchart, columnchart, or linechart. The order given is the order in which is displays.",
type:"array",items:{$ref:"#/definitions/IMediaInfo"},title:"mediaInfos"},popupElements:{description:"An array of popupElement objects that represent an ordered list of popup elements.",type:"array",items:{$ref:"#/definitions/IPopupElement"},title:"popupElements"},relatedRecordsInfo:{description:"Indicates whether to enable related records if they exist on a layer.",$ref:"#/definitions/IRelatedRecordsInfo",title:"relatedRecordsInfo"},showAttachments:{description:"Indicates whether attachments will be loaded for feature layers that have attachments.",
type:"boolean",title:"showAttachments"},title:{description:"A string that appears at the top of the popup window as a title.",type:"string",title:"title"}},additionalProperties:!1},IPopupExpressionInfo:{description:"Arcade expression added to the pop-up.",title:"IPopupExpressionInfo",type:"object",properties:{expression:{description:"The Arcade expression.",type:"string",title:"expression"},name:{description:"Unique identifier for the expression.",type:"string",title:"name"},returnType:{description:"Return type of the Arcade expression, can be number or string. Defaults to string value. Number values are assumed to be double. This can be determined by the authoring client by executing the expression using a sample feature(s), although it can be corrected by the user. Knowing the returnType allows the authoring client to present fields in relevant contexts. For example, numeric fields in numeric contexts such as charts.",
enum:["number","string"],type:"string",title:"returnType"},title:{description:"Title of the expression.",type:"string",title:"title"}},additionalProperties:!1},IFieldInfo:{description:"Defines how a field in the dataset participates (or does not participate) in a popup window.",title:"IFieldInfo",type:"object",properties:{fieldName:{description:"A string containing the field name as defined by the service. Anywhere that a fieldname is referenced as {field-name} in popupInfo, an Arcade expression can also be referenced as{expression/}`.",
title:"fieldName"},format:{description:"A format object used with numerical or date fields to provide more detail about how the value should be displayed in a web map popup window.",$ref:"#/definitions/IFieldFormat",title:"format"},isEditable:{description:"A Boolean determining whether users can edit this field. Not applicable to Arcade expressions.",type:"boolean",title:"isEditable"},label:{description:"A string containing the field alias. This can be overridden by the web map author. Not applicable to Arcade expressions as title is used instead.",
type:"string",title:"label"},stringFieldOption:{description:"A string determining what type of input box editors see when editing the field. Applies only to string fields. Not applicable to Arcade expressions.",enum:["richtext","textarea","textbox"],type:"string",title:"stringFieldOption"},tooltip:{description:"A string providing an editing hint for editors of the field. Not applicable to Arcade expressions.",type:"string",title:"tooltip"},visible:{description:"A Boolean determining whether the field is visible in the popup window.",
type:"boolean",title:"visible"}},additionalProperties:!1},IFieldFormat:{description:"The format object can be used with numerical or date fields to provide more detail about how values should be displayed in popup windows.",title:"IFieldFormat",type:"object",properties:{dateFormat:{description:"A string used with date fields to specify how the date should appear in popup windows.",enum:"dayShortMonthYear longDate longMonthDayYear longMonthYear shortDate shortDateLE shortDateLELongTime shortDateLELongTime24 shortDateLEShortTime shortDateLEShortTime24 shortDateLongTime shortDateLongTime24 shortDateShortTime shortDateShortTime24 shortMonthYear year".split(" "),
type:"string",title:"dateFormat"},digitSeparator:{description:"A Boolean used with numerical fields. A value of true allows the number to have a digit (or thousands) separator when the value appears in popup windows.\nDepending on the locale, this separator is a decimal point or a comma. A value of false means that no separator will be used.",type:"boolean",title:"digitSeparator"},places:{description:"An integer used with numerical fields to specify the number of supported decimal places that should appear in popup windows. Any places beyond this value are rounded.",
type:"number",title:"places"}},additionalProperties:!1},IMediaInfo:{description:"Defines an image or a chart to be displayed in a popup window.",title:"IMediaInfo",type:"object",properties:{caption:{description:"A string caption describing the media.",title:"caption"},refreshInterval:{description:"Refresh interval of the layer in minutes. Non-zero value indicates automatic layer refresh at the specified interval. Value of 0 indicates auto refresh is not enabled. If the property does not exist, it's equivalent to having a value of 0. Only applicable when type is set to image.",
title:"refreshInterval"},title:{description:"A string title for the media.",type:["null","string"],title:"title"},type:{description:"A string defining the type of media.",enum:["barchart","columnchart","image","linechart","piechart"],type:"string",title:"type"},value:{description:"A value object containing information about how the image should be retrieved or how the chart should be constructed.",anyOf:[{$ref:"#/definitions/IMediaInfoValue"},{type:"null"}],title:"value"}},additionalProperties:!1},
IMediaInfoValue:{description:"The value object contains information for popup windows about how images should be retrieved or charts constructed.",title:"IMediaInfoValue",type:"object",properties:{fields:{description:"Used with charts. An array of strings, with each string containing the name of a field to display in the chart.",type:"array",items:{type:"string"},title:"fields"},linkURL:{description:"Used with images. A string containing a URL to be launched in a browser when a user clicks the image.",
type:"string",title:"linkURL"},normalizeField:{description:"Used with charts. An optional string containing the name of a field. The values of all fields in the chart will be normalized (divided) by the value of this field.",type:"string",title:"normalizeField"},sourceURL:{description:"Used with images. A string containing the URL to the image.",type:"string",title:"sourceURL"},tooltipField:{description:"String value indicating the tooltip for a chart specified from another field. This field is needed when related records are not sued. It is used for showing tooltips from another field in the same layer or related layer/table.",
type:"string",title:"tooltipField"}},additionalProperties:!1},IPopupElement:{description:"Popup elements allow users to author popups, using multiple elements such as tabular views, string description, media (charts and images), and attachments of the attributes\nand control the order in which they appear. Specifically, popupElements do the following:\n1) provide the ability to explicitly add a field/ value table in addition to a description,\n2) allow adding multiple description elements, and\n3) allow a user to author and consume elements of a popup in the order of their choosing.",
title:"IPopupElement",type:"object",properties:{displayType:{description:"This property applies to elements of type attachments. A string value indicating how to display the attachment.\nPossible values are, preview, and list. If list is specified, attachments show as links.",enum:["list","preview"],type:"string",title:"displayType"},fieldInfos:{description:"This property applies to elements of type fields. It is an array of popupInfo.fieldInfo objects representing a field/value pair displayed as a table within the popupElement.\nIf the fieldInfos property is not provided, the popupElement will display whatever is specified directly in the popupInfo.fieldInfos property.",
type:"array",items:{$ref:"#/definitions/IFieldInfo"},title:"fieldInfos"},mediaInfos:{description:"This property applies to elements of type media. An array of popupInfo.mediaInfo objects representing an image or chart for display.\nIf no mediaInfos property is provided, the popupElement will display whatever is specified in the popupInfo.mediaInfo property.",type:"array",items:{$ref:"#/definitions/IMediaInfo"},title:"mediaInfos"},text:{description:"This property applies to elements of type text. This is string value indicating the text to be displayed within the popupElement.\nIf no text property is provided, the popupElement will display whatever is specified in the popupInfo.description property.",
type:"string",title:"text"},type:{description:"String value indicating which elements to use.",enum:["attachments","fields","media","text"],type:"string",title:"type"}},additionalProperties:!1},IRelatedRecordsInfo:{description:"The sort in the popupInfo for the parent feature. This impacts the sorting order for the returned child records.",title:"IRelatedRecordsInfo",type:"object",properties:{orderByFields:{description:"Array of orderByFields objects indicating the field display order for the related records and whether they should be sorted in ascending 'asc' or descending 'desc' order.",
type:"array",items:{$ref:"#/definitions/IOrderByField"},title:"orderByFields"},showRelatedRecords:{description:"Required boolean value indicating whether to display related records. If true, client should let the user navigate to the related records. Defaults to true if the layer participates in a relationship AND the related layer/table has already been added to the map (either as an operationalLayer or as a table).",type:"boolean",title:"showRelatedRecords"}},additionalProperties:!1,required:["showRelatedRecords"]},
IOrderByField:{description:"Object indicating the field display order for the related records and whether they should be sorted in ascending or descending order.",title:"IOrderByField",type:"object",properties:{field:{description:"The attribute value of the field selected that will drive the sorting of related records.",type:"string",title:"field"},order:{description:"Set the ascending or descending sort order of the returned related records.",enum:["asc","desc"],type:"string",title:"order"}},additionalProperties:!1},
ITextSymbol:{title:"ITextSymbol",type:"object",properties:{type:{type:"string",enum:["esriTS"],title:"type"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},backgroundColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"backgroundColor"},borderLineSize:{type:"number",title:"borderLineSize"},borderLineColor:{type:"array",items:[{type:"number"},{type:"number"},
{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"borderLineColor"},haloSize:{type:"number",title:"haloSize"},haloColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"haloColor"},verticalAlignment:{enum:["baseline","bottom","middle","top"],type:"string",title:"verticalAlignment"},horizontalAlignment:{enum:["center","justify","left","right"],type:"string",title:"horizontalAlignment"},rightToLeft:{type:"boolean",title:"rightToLeft"},
kerning:{type:"boolean",title:"kerning"},font:{$ref:"#/definitions/IFont",title:"font"},text:{type:"string",title:"text"},angle:{type:"number",title:"angle"},xoffset:{type:"number",title:"xoffset"},yoffset:{type:"number",title:"yoffset"},style:{type:"string",title:"style"}},additionalProperties:!1,required:["type"]},IFont:{title:"IFont",type:"object",properties:{family:{type:"string",title:"family"},size:{type:"number",title:"size"},style:{enum:["italic","normal","oblique"],type:"string",title:"style"},
weight:{enum:["bold","bolder","lighter","normal"],type:"string",title:"weight"},decoration:{enum:["line-through","none","underline"],type:"string",title:"decoration"}},additionalProperties:!1},ISimpleLineSymbol:{title:"ISimpleLineSymbol",type:"object",properties:{type:{type:"string",enum:["esriSLS"],title:"type"},style:{enum:"esriSLSDash esriSLSDashDot esriSLSDashDotDot esriSLSDot esriSLSNull esriSLSSolid".split(" "),type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},
{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},width:{type:"number",title:"width"}},additionalProperties:!1,required:["type"]},"Intl.NumberFormatOptions":{title:"Intl.NumberFormatOptions",type:"object",properties:{localeMatcher:{type:"string",title:"localeMatcher"},style:{type:"string",title:"style"},currency:{type:"string",title:"currency"},currencyDisplay:{type:"string",title:"currencyDisplay"},currencySign:{type:"string",title:"currencySign"},useGrouping:{type:"boolean",
title:"useGrouping"},minimumIntegerDigits:{type:"number",title:"minimumIntegerDigits"},minimumFractionDigits:{type:"number",title:"minimumFractionDigits"},maximumFractionDigits:{type:"number",title:"maximumFractionDigits"},minimumSignificantDigits:{type:"number",title:"minimumSignificantDigits"},maximumSignificantDigits:{type:"number",title:"maximumSignificantDigits"},compactDisplay:{type:"string",title:"compactDisplay"},notation:{type:"string",title:"notation"},signDisplay:{type:"string",title:"signDisplay"},
unit:{type:"string",title:"unit"},unitDisplay:{type:"string",title:"unitDisplay"}},additionalProperties:!1},"Intl.DateTimeFormatOptions":{title:"Intl.DateTimeFormatOptions",type:"object",properties:{localeMatcher:{enum:["best fit","lookup"],type:"string",title:"localeMatcher"},weekday:{enum:["long","narrow","short"],type:"string",title:"weekday"},era:{enum:["long","narrow","short"],type:"string",title:"era"},year:{enum:["2-digit","numeric"],type:"string",title:"year"},month:{enum:["2-digit","long",
"narrow","numeric","short"],type:"string",title:"month"},day:{enum:["2-digit","numeric"],type:"string",title:"day"},hour:{enum:["2-digit","numeric"],type:"string",title:"hour"},minute:{enum:["2-digit","numeric"],type:"string",title:"minute"},second:{enum:["2-digit","numeric"],type:"string",title:"second"},timeZoneName:{enum:["long","short"],type:"string",title:"timeZoneName"},formatMatcher:{enum:["basic","best fit"],type:"string",title:"formatMatcher"},hour12:{type:"boolean",title:"hour12"},timeZone:{type:"string",
title:"timeZone"},dateStyle:{enum:["full","long","medium","short"],type:"string",title:"dateStyle"},timeStyle:{enum:["full","long","medium","short"],type:"string",title:"timeStyle"},calendar:{type:"string",title:"calendar"},dayPeriod:{enum:["long","narrow","short"],type:"string",title:"dayPeriod"},numberingSystem:{type:"string",title:"numberingSystem"},hourCycle:{enum:["h11","h12","h23","h24"],type:"string",title:"hourCycle"},fractionalSecondDigits:{enum:[0,1,2,3],type:"number",title:"fractionalSecondDigits"}},
additionalProperties:!1},ISimpleFillSymbol:{title:"ISimpleFillSymbol",type:"object",properties:{type:{type:"string",enum:["esriSFS"],title:"type"},style:{enum:"esriSFSBackwardDiagonal esriSFSCross esriSFSDiagonalCross esriSFSForwardDiagonal esriSFSHorizontal esriSFSNull esriSFSSolid esriSFSVertical".split(" "),type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},outline:{$ref:"#/definitions/ISimpleLineSymbol",
title:"outline"}},additionalProperties:!1,required:["type"]},IStatisticDefinition:{title:"IStatisticDefinition",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc).",enum:"avg count max min percentile_cont percentile_disc stddev sum var".split(" "),type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",
type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},additionalProperties:!1,required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",
type:"string",title:"outStatisticFieldName"}},additionalProperties:!1,required:["onStatisticField","statisticType"]},ISimpleMarkerSymbol:{title:"ISimpleMarkerSymbol",type:"object",properties:{type:{type:"string",enum:["esriSMS"],title:"type"},style:{enum:"esriSMSCircle esriSMSCross esriSMSDiamond esriSMSSquare esriSMSTriangle esriSMSX".split(" "),type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},
size:{type:"number",title:"size"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"},angle:{type:"number",title:"angle"},xoffset:{type:"number",title:"xoffset"},yoffset:{type:"number",title:"yoffset"}},additionalProperties:!1,required:["type"]}},$ref:"#/definitions/WebChart"};var $g={};!function(W,I){!function(T){function N(){for(var Ma=arguments.length,Ya=Array(Ma),db=0;db<Ma;db++)Ya[db]=arguments[db];if(1<Ya.length){Ya[0]=Ya[0].slice(0,-1);Ma=Ya.length-1;for(db=1;db<Ma;++db)Ya[db]=
Ya[db].slice(1,-1);return Ya[Ma]=Ya[Ma].slice(1),Ya.join("")}return Ya[0]}function ba(Ma){return"(?:"+Ma+")"}function ia(Ma){return void 0===Ma?"undefined":null===Ma?"null":Object.prototype.toString.call(Ma).split(" ").pop().split("]").shift().toLowerCase()}function pa(Ma){return Ma.toUpperCase()}function ta(Ma){var Ya=N("[0-9]","[A-Fa-f]"),db=ba(ba("%[EFef]"+Ya+"%"+Ya+Ya+"%"+Ya+Ya)+"|"+ba("%[89A-Fa-f]"+Ya+"%"+Ya+Ya)+"|"+ba("%"+Ya+Ya)),sb=N("[\\:\\/\\?\\#\\[\\]\\@]","[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]"),
Fb=Ma?"[\\uE000-\\uF8FF]":"[]";Ma=N("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",Ma?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");ba("[A-Za-z]"+N("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*");ba(ba(db+"|"+N(Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]","[\\:]"))+"*");var Vb=ba(ba("25[0-5]")+"|"+ba("2[0-4][0-9]")+"|"+ba("1[0-9][0-9]")+"|"+ba("0?[1-9][0-9]")+"|0?0?[0-9]");Vb=ba(Vb+"\\."+Vb+"\\."+Vb+"\\."+Vb);var Wb=ba(Ya+"{1,4}"),vc=ba(ba(Wb+"\\:"+Wb)+"|"+Vb),cc=ba(ba(Wb+"\\:")+
"{6}"+vc),yc=ba("\\:\\:"+ba(Wb+"\\:")+"{5}"+vc),lc=ba(ba(Wb)+"?\\:\\:"+ba(Wb+"\\:")+"{4}"+vc),Zc=ba(ba(ba(Wb+"\\:")+"{0,1}"+Wb)+"?\\:\\:"+ba(Wb+"\\:")+"{3}"+vc),yf=ba(ba(ba(Wb+"\\:")+"{0,2}"+Wb)+"?\\:\\:"+ba(Wb+"\\:")+"{2}"+vc),cf=ba(ba(ba(Wb+"\\:")+"{0,3}"+Wb)+"?\\:\\:"+Wb+"\\:"+vc);vc=ba(ba(ba(Wb+"\\:")+"{0,4}"+Wb)+"?\\:\\:"+vc);var df=ba(ba(ba(Wb+"\\:")+"{0,5}"+Wb)+"?\\:\\:"+Wb);Wb=ba(ba(ba(Wb+"\\:")+"{0,6}"+Wb)+"?\\:\\:");cc=ba([cc,yc,lc,Zc,yf,cf,vc,df,Wb].join("|"));yc=ba(ba(Ma+"|"+db)+"+");
ba("[vV]"+Ya+"+\\."+N(Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]","[\\:]")+"+");ba(ba(db+"|"+N(Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]"))+"*");lc=ba(db+"|"+N(Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]","[\\:\\@]"));return ba(ba(db+"|"+N(Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]","[\\@]"))+"+"),ba(ba(lc+"|"+N("[\\/\\?]",Fb))+"*"),{NOT_SCHEME:new RegExp(N("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(N("[^\\%\\:]",Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]"),
"g"),NOT_HOST:new RegExp(N("[^\\%\\[\\]\\:]",Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]"),"g"),NOT_PATH:new RegExp(N("[^\\%\\/\\:\\@]",Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]"),"g"),NOT_PATH_NOSCHEME:new RegExp(N("[^\\%\\/\\@]",Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]"),"g"),NOT_QUERY:new RegExp(N("[^\\%]",Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]","[\\:\\@\\/\\?]",Fb),"g"),NOT_FRAGMENT:new RegExp(N("[^\\%]",Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]","[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(N("[^]",
Ma,"[\\!\\$\\\x26\\'\\(\\)\\*\\+\\,\\;\\\x3d]"),"g"),UNRESERVED:new RegExp(Ma,"g"),OTHER_CHARS:new RegExp(N("[^\\%]",Ma,sb),"g"),PCT_ENCODED:new RegExp(db,"g"),IPV4ADDRESS:new RegExp("^("+Vb+")$"),IPV6ADDRESS:new RegExp("^\\[?("+cc+")"+ba(ba("\\%25|\\%(?!"+Ya+"{2})")+"("+yc+")")+"?\\]?$")}}function Ca(Ma){throw new RangeError(Fc[Ma]);}function Da(Ma,Ya){var db=Ma.split("@"),sb="";1<db.length&&(sb=db[0]+"@",Ma=db[1]);db=sb;sb=(Ma=Ma.replace(mc,".")).split(".");Ma=[];for(var Fb=sb.length;Fb--;)Ma[Fb]=
Ya(sb[Fb]);return db+Ma.join(".")}function Ia(Ma){for(var Ya=[],db=0,sb=Ma.length;db<sb;){var Fb=Ma.charCodeAt(db++);if(55296<=Fb&&56319>=Fb&&db<sb){var Vb=Ma.charCodeAt(db++);56320==(64512&Vb)?Ya.push(((1023&Fb)<<10)+(1023&Vb)+65536):(Ya.push(Fb),db--)}else Ya.push(Fb)}return Ya}function xa(Ma){Ma=Ma.charCodeAt(0);return 16>Ma?"%0"+Ma.toString(16).toUpperCase():128>Ma?"%"+Ma.toString(16).toUpperCase():2048>Ma?"%"+(Ma>>6|192).toString(16).toUpperCase()+"%"+(63&Ma|128).toString(16).toUpperCase():"%"+
(Ma>>12|224).toString(16).toUpperCase()+"%"+(Ma>>6&63|128).toString(16).toUpperCase()+"%"+(63&Ma|128).toString(16).toUpperCase()}function Fa(Ma){for(var Ya="",db=0,sb=Ma.length;db<sb;){var Fb=parseInt(Ma.substr(db+1,2),16);if(128>Fb)Ya+=String.fromCharCode(Fb),db+=3;else if(194<=Fb&&224>Fb){if(6<=sb-db){var Vb=parseInt(Ma.substr(db+4,2),16);Ya+=String.fromCharCode((31&Fb)<<6|63&Vb)}else Ya+=Ma.substr(db,6);db+=6}else if(224<=Fb){if(9<=sb-db){Vb=parseInt(Ma.substr(db+4,2),16);var Wb=parseInt(Ma.substr(db+
7,2),16);Ya+=String.fromCharCode((15&Fb)<<12|(63&Vb)<<6|63&Wb)}else Ya+=Ma.substr(db,9);db+=9}else Ya+=Ma.substr(db,3),db+=3}return Ya}function Ga(Ma,Ya){function db(sb){var Fb=Fa(sb);return Fb.match(Ya.UNRESERVED)?Fb:sb}return Ma.scheme&&(Ma.scheme=String(Ma.scheme).replace(Ya.PCT_ENCODED,db).toLowerCase().replace(Ya.NOT_SCHEME,"")),void 0!==Ma.userinfo&&(Ma.userinfo=String(Ma.userinfo).replace(Ya.PCT_ENCODED,db).replace(Ya.NOT_USERINFO,xa).replace(Ya.PCT_ENCODED,pa)),void 0!==Ma.host&&(Ma.host=
String(Ma.host).replace(Ya.PCT_ENCODED,db).toLowerCase().replace(Ya.NOT_HOST,xa).replace(Ya.PCT_ENCODED,pa)),void 0!==Ma.path&&(Ma.path=String(Ma.path).replace(Ya.PCT_ENCODED,db).replace(Ma.scheme?Ya.NOT_PATH:Ya.NOT_PATH_NOSCHEME,xa).replace(Ya.PCT_ENCODED,pa)),void 0!==Ma.query&&(Ma.query=String(Ma.query).replace(Ya.PCT_ENCODED,db).replace(Ya.NOT_QUERY,xa).replace(Ya.PCT_ENCODED,pa)),void 0!==Ma.fragment&&(Ma.fragment=String(Ma.fragment).replace(Ya.PCT_ENCODED,db).replace(Ya.NOT_FRAGMENT,xa).replace(Ya.PCT_ENCODED,
pa)),Ma}function Ra(Ma){return Ma.replace(/^0*(.*)/,"$1")||"0"}function Xa(Ma,Ya){Ya=Ma.match(Ya.IPV4ADDRESS)||[];return(Ya=Ob(Ya,2)[1])?Ya.split(".").map(Ra).join("."):Ma}function fb(Ma,Ya){var db=Ma.match(Ya.IPV6ADDRESS)||[];db=Ob(db,3);var sb=db[1];db=db[2];if(sb){Ma=sb.toLowerCase().split("::").reverse();sb=Ob(Ma,2);Ma=sb[0];sb=(sb=sb[1])?sb.split(":").map(Ra):[];var Fb=Ma.split(":").map(Ra),Vb=Ya.IPV4ADDRESS.test(Fb[Fb.length-1]),Wb=Vb?7:8,vc=Fb.length-Wb;Ma=Array(Wb);for(var cc=0;cc<Wb;++cc)Ma[cc]=
sb[cc]||Fb[vc+cc]||"";Vb&&(Ma[Wb-1]=Xa(Ma[Wb-1],Ya));Ya=Ma.reduce(function(yc,lc,Zc){lc&&"0"!==lc||((lc=yc[yc.length-1])&&lc.index+lc.length===Zc?lc.length++:yc.push({index:Zc,length:1}));return yc},[]).sort(function(yc,lc){return lc.length-yc.length})[0];sb=void 0;Ya&&1<Ya.length?(sb=Ma.slice(0,Ya.index),Ya=Ma.slice(Ya.index+Ya.length),sb=sb.join(":")+"::"+Ya.join(":")):sb=Ma.join(":");return db&&(sb+="%"+db),sb}return Ma}function bb(Ma){var Ya=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{},db={},sb=!1!==Ya.iri?jc:ic;"suffix"===Ya.reference&&(Ma=(Ya.scheme?Ya.scheme+":":"")+"//"+Ma);var Fb=Ma.match(qj);if(Fb){rj?(db.scheme=Fb[1],db.userinfo=Fb[3],db.host=Fb[4],db.port=parseInt(Fb[5],10),db.path=Fb[6]||"",db.query=Fb[7],db.fragment=Fb[8],isNaN(db.port)&&(db.port=Fb[5])):(db.scheme=Fb[1]||void 0,db.userinfo=-1!==Ma.indexOf("@")?Fb[3]:void 0,db.host=-1!==Ma.indexOf("//")?Fb[4]:void 0,db.port=parseInt(Fb[5],10),db.path=Fb[6]||"",db.query=-1!==Ma.indexOf("?")?Fb[7]:void 0,db.fragment=
-1!==Ma.indexOf("#")?Fb[8]:void 0,isNaN(db.port)&&(db.port=Ma.match(/\/\/(?:.|\n)*:(?:\/|\?|#|$)/)?Fb[4]:void 0));db.host&&(db.host=fb(Xa(db.host,sb),sb));void 0!==db.scheme||void 0!==db.userinfo||void 0!==db.host||void 0!==db.port||db.path||void 0!==db.query?void 0===db.scheme?db.reference="relative":void 0===db.fragment?db.reference="absolute":db.reference="uri":db.reference="same-document";Ya.reference&&"suffix"!==Ya.reference&&Ya.reference!==db.reference&&(db.error=db.error||"URI is not a "+Ya.reference+
" reference.");Fb=zd[(Ya.scheme||db.scheme||"").toLowerCase()];if(Ya.unicodeSupport||Fb&&Fb.unicodeSupport)Ga(db,sb);else{if(db.host&&(Ya.domainHost||Fb&&Fb.domainHost))try{db.host=Qe.toASCII(db.host.replace(sb.PCT_ENCODED,Fa).toLowerCase())}catch(Vb){db.error=db.error||"Host's domain name can not be converted to ASCII via punycode: "+Vb}Ga(db,ic)}Fb&&Fb.parse&&Fb.parse(db,Ya)}else db.error=db.error||"URI can not be parsed.";return db}function jb(Ma,Ya){Ya=!1!==Ya.iri?jc:ic;var db=[];return void 0!==
Ma.userinfo&&(db.push(Ma.userinfo),db.push("@")),void 0!==Ma.host&&db.push(fb(Xa(String(Ma.host),Ya),Ya).replace(Ya.IPV6ADDRESS,function(sb,Fb,Vb){return"["+Fb+(Vb?"%25"+Vb:"")+"]"})),"number"!=typeof Ma.port&&"string"!=typeof Ma.port||(db.push(":"),db.push(String(Ma.port))),db.length?db.join(""):void 0}function qb(Ma){for(var Ya=[];Ma.length;)if(Ma.match(ah))Ma=Ma.replace(ah,"");else if(Ma.match(bh))Ma=Ma.replace(bh,"/");else if(Ma.match(ch))Ma=Ma.replace(ch,"/"),Ya.pop();else if("."===Ma||".."===
Ma)Ma="";else{var db=Ma.match(sj);if(!db)throw Error("Unexpected dot segment condition");db=db[0];Ma=Ma.slice(db.length);Ya.push(db)}return Ya.join("")}function Hb(Ma){var Ya=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},db=Ya.iri?jc:ic,sb=[],Fb=zd[(Ya.scheme||Ma.scheme||"").toLowerCase()];if((Fb&&Fb.serialize&&Fb.serialize(Ma,Ya),Ma.host)&&!db.IPV6ADDRESS.test(Ma.host)&&(Ya.domainHost||Fb&&Fb.domainHost))try{Ma.host=Ya.iri?Qe.toUnicode(Ma.host):Qe.toASCII(Ma.host.replace(db.PCT_ENCODED,
Fa).toLowerCase())}catch(Wb){Ma.error=Ma.error||"Host's domain name can not be converted to "+(Ya.iri?"Unicode":"ASCII")+" via punycode: "+Wb}Ga(Ma,db);"suffix"!==Ya.reference&&Ma.scheme&&(sb.push(Ma.scheme),sb.push(":"));db=jb(Ma,Ya);if(void 0!==db&&("suffix"!==Ya.reference&&sb.push("//"),sb.push(db),Ma.path&&"/"!==Ma.path.charAt(0)&&sb.push("/")),void 0!==Ma.path){var Vb=Ma.path;Ya.absolutePath||Fb&&Fb.absolutePath||(Vb=qb(Vb));void 0===db&&(Vb=Vb.replace(/^\/\//,"/%2F"));sb.push(Vb)}return void 0!==
Ma.query&&(sb.push("?"),sb.push(Ma.query)),void 0!==Ma.fragment&&(sb.push("#"),sb.push(Ma.fragment)),sb.join("")}function Bb(Ma,Ya){var db=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},sb={};return arguments[3]||(Ma=bb(Hb(Ma,db),db),Ya=bb(Hb(Ya,db),db)),!(db=db||{}).tolerant&&Ya.scheme?(sb.scheme=Ya.scheme,sb.userinfo=Ya.userinfo,sb.host=Ya.host,sb.port=Ya.port,sb.path=qb(Ya.path||""),sb.query=Ya.query):(void 0!==Ya.userinfo||void 0!==Ya.host||void 0!==Ya.port?(sb.userinfo=Ya.userinfo,
sb.host=Ya.host,sb.port=Ya.port,sb.path=qb(Ya.path||""),sb.query=Ya.query):(Ya.path?("/"===Ya.path.charAt(0)?sb.path=qb(Ya.path):(void 0===Ma.userinfo&&void 0===Ma.host&&void 0===Ma.port||Ma.path?Ma.path?sb.path=Ma.path.slice(0,Ma.path.lastIndexOf("/")+1)+Ya.path:sb.path=Ya.path:sb.path="/"+Ya.path,sb.path=qb(sb.path)),sb.query=Ya.query):(sb.path=Ma.path,void 0!==Ya.query?sb.query=Ya.query:sb.query=Ma.query),sb.userinfo=Ma.userinfo,sb.host=Ma.host,sb.port=Ma.port),sb.scheme=Ma.scheme),sb.fragment=
Ya.fragment,sb}function vb(Ma,Ya){return Ma&&Ma.toString().replace(Ya&&Ya.iri?jc.PCT_ENCODED:ic.PCT_ENCODED,Fa)}function ec(Ma){return"boolean"==typeof Ma.secure?Ma.secure:"wss"===String(Ma.scheme).toLowerCase()}function Lb(Ma){var Ya=Fa(Ma);return Ya.match(tj)?Ya:Ma}var ic=ta(!1),jc=ta(!0),Ob=function(){return function(Ma,Ya){if(Array.isArray(Ma))return Ma;if(Symbol.iterator in Object(Ma)){var db=[],sb=!0,Fb=!1,Vb=void 0;try{for(var Wb,vc=Ma[Symbol.iterator]();!(sb=(Wb=vc.next()).done)&&(db.push(Wb.value),
!Ya||db.length!==Ya);sb=!0);}catch(cc){Fb=!0,Vb=cc}finally{try{!sb&&vc.return&&vc.return()}finally{if(Fb)throw Vb;}}return db}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),qc=function(Ma){if(Array.isArray(Ma)){for(var Ya=0,db=Array(Ma.length);Ya<Ma.length;Ya++)db[Ya]=Ma[Ya];return db}return Array.from(Ma)},Xb=/^xn--/,Pb=/[^\0-\x7E]/,mc=/[\x2E\u3002\uFF0E\uFF61]/g,Fc={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input \x3e\x3d 0x80 (not a basic code point)",
"invalid-input":"Invalid input"},hc=Math.floor,Yc=String.fromCharCode,Fe=function(Ma,Ya){return Ma+22+75*(26>Ma)-((0!=Ya)<<5)},zf=function(Ma,Ya,db){var sb=0;Ma=db?hc(Ma/700):Ma>>1;for(Ma+=hc(Ma/Ya);455<Ma;sb+=36)Ma=hc(Ma/35);return hc(sb+36*Ma/(Ma+38))},dh=function(Ma){var Ya=[],db=Ma.length,sb=0,Fb=128,Vb=72,Wb=Ma.lastIndexOf("-");0>Wb&&(Wb=0);for(var vc=0;vc<Wb;++vc)128<=Ma.charCodeAt(vc)&&Ca("not-basic"),Ya.push(Ma.charCodeAt(vc));for(Wb=0<Wb?Wb+1:0;Wb<db;){vc=sb;for(var cc=1,yc=36;;yc+=36){Wb>=
db&&Ca("invalid-input");var lc=Ma.charCodeAt(Wb++);lc=10>lc-48?lc-22:26>lc-65?lc-65:26>lc-97?lc-97:36;(36<=lc||lc>hc((2147483647-sb)/cc))&&Ca("overflow");sb+=lc*cc;var Zc=yc<=Vb?1:yc>=Vb+26?26:yc-Vb;if(lc<Zc)break;lc=36-Zc;cc>hc(2147483647/lc)&&Ca("overflow");cc*=lc}cc=Ya.length+1;Vb=zf(sb-vc,cc,0==vc);hc(sb/cc)>2147483647-Fb&&Ca("overflow");Fb+=hc(sb/cc);sb%=cc;Ya.splice(sb++,0,Fb)}return String.fromCodePoint.apply(String,Ya)},ih=function(Ma){var Ya=[],db=(Ma=Ia(Ma)).length,sb=128,Fb=0,Vb=72,Wb=
!0,vc=!1,cc=void 0;try{for(var yc,lc=Ma[Symbol.iterator]();!(Wb=(yc=lc.next()).done);Wb=!0){var Zc=yc.value;128>Zc&&Ya.push(Yc(Zc))}}catch(ef){vc=!0,cc=ef}finally{try{!Wb&&lc.return&&lc.return()}finally{if(vc)throw cc;}}for((vc=Wb=Ya.length)&&Ya.push("-");vc<db;){yc=2147483647;cc=!0;lc=!1;Zc=void 0;try{for(var yf,cf=Ma[Symbol.iterator]();!(cc=(yf=cf.next()).done);cc=!0){var df=yf.value;df>=sb&&df<yc&&(yc=df)}}catch(ef){lc=!0,Zc=ef}finally{try{!cc&&cf.return&&cf.return()}finally{if(lc)throw Zc;}}cc=
vc+1;yc-sb>hc((2147483647-Fb)/cc)&&Ca("overflow");Fb+=(yc-sb)*cc;sb=yc;yc=!0;lc=!1;Zc=void 0;try{for(var eh,Zf=Ma[Symbol.iterator]();!(yc=(eh=Zf.next()).done);yc=!0){var fh=eh.value;if(fh<sb&&2147483647<++Fb&&Ca("overflow"),fh==sb){for(var Af=Fb,Bf=36;;Bf+=36){var Cf=Bf<=Vb?1:Bf>=Vb+26?26:Bf-Vb;if(Af<Cf)break;var gh=Af-Cf,hh=36-Cf;Ya.push(Yc(Fe(Cf+gh%hh,0)));Af=hc(gh/hh)}Ya.push(Yc(Fe(Af,0)));Vb=zf(Fb,cc,vc==Wb);Fb=0;++vc}}}catch(ef){lc=!0,Zc=ef}finally{try{!yc&&Zf.return&&Zf.return()}finally{if(lc)throw Zc;
}}++Fb;++sb}return Ya.join("")},Qe={version:"2.1.0",ucs2:{decode:Ia,encode:function(Ma){return String.fromCodePoint.apply(String,qc(Ma))}},decode:dh,encode:ih,toASCII:function(Ma){return Da(Ma,function(Ya){return Pb.test(Ya)?"xn--"+ih(Ya):Ya})},toUnicode:function(Ma){return Da(Ma,function(Ya){return Xb.test(Ya)?dh(Ya.slice(4).toLowerCase()):Ya})}},zd={},qj=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?::(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,rj=void 0==="".match(/(){0}/)[1],
ah=/^\.\.?\//,bh=/^\/\.(\/|$)/,ch=/^\/\.\.(\/|$)/,sj=/^\/?(?:.|\n)*?(?=\/|$)/,ff={scheme:"http",domainHost:!0,parse:function(Ma,Ya){return Ma.host||(Ma.error=Ma.error||"HTTP URIs must have a host."),Ma},serialize:function(Ma,Ya){Ya="https"===String(Ma.scheme).toLowerCase();return Ma.port!==(Ya?443:80)&&""!==Ma.port||(Ma.port=void 0),Ma.path||(Ma.path="/"),Ma}},jh={scheme:"https",domainHost:ff.domainHost,parse:ff.parse,serialize:ff.serialize},gf={scheme:"ws",domainHost:!0,parse:function(Ma,Ya){return Ma.secure=
ec(Ma),Ma.resourceName=(Ma.path||"/")+(Ma.query?"?"+Ma.query:""),Ma.path=void 0,Ma.query=void 0,Ma},serialize:function(Ma,Ya){if(Ma.port!==(ec(Ma)?443:80)&&""!==Ma.port||(Ma.port=void 0),"boolean"==typeof Ma.secure&&(Ma.scheme=Ma.secure?"wss":"ws",Ma.secure=void 0),Ma.resourceName){Ya=Ma.resourceName.split("?");var db=Ob(Ya,2);Ya=db[0];db=db[1];Ma.path=Ya&&"/"!==Ya?Ya:void 0;Ma.query=db;Ma.resourceName=void 0}return Ma.fragment=void 0,Ma}},kh={scheme:"wss",domainHost:gf.domainHost,parse:gf.parse,
serialize:gf.serialize},uj={},Df=ba(ba("%[EFef][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f]")+"|"+ba("%[89A-Fa-f][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f]")+"|"+ba("%[0-9A-Fa-f][0-9A-Fa-f]")),Ef=N("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\\x3c\\\x3eA-Z\\x5E-\\x7E]",'[\\"\\\\]'),tj=/[A-Za-z0-9\-\.\_\~\xA0-\u200D\u2010-\u2029\u202F-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]/g,Re=new RegExp(Df,"g"),vj=new RegExp(N("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Ef),"g"),lh=new RegExp(N("[^]",
"[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]","[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g");Df={scheme:"mailto",parse:function(Ma,Ya){var db=Ma.to=Ma.path?Ma.path.split(","):[];if(Ma.path=void 0,Ma.query){for(var sb=!1,Fb={},Vb=Ma.query.split("\x26"),Wb=0,vc=Vb.length;Wb<vc;++Wb){var cc=Vb[Wb].split("\x3d");switch(cc[0]){case "to":cc=cc[1].split(",");for(var yc=0,lc=cc.length;yc<lc;++yc)db.push(cc[yc]);break;case "subject":Ma.subject=vb(cc[1],Ya);
break;case "body":Ma.body=vb(cc[1],Ya);break;default:sb=!0,Fb[vb(cc[0],Ya)]=vb(cc[1],Ya)}}sb&&(Ma.headers=Fb)}Ma.query=void 0;sb=0;for(Fb=db.length;sb<Fb;++sb){Vb=db[sb].split("@");if(Vb[0]=vb(Vb[0]),Ya.unicodeSupport)Vb[1]=vb(Vb[1],Ya).toLowerCase();else try{Vb[1]=Qe.toASCII(vb(Vb[1],Ya).toLowerCase())}catch(Zc){Ma.error=Ma.error||"Email address's domain name can not be converted to ASCII via punycode: "+Zc}db[sb]=Vb.join("@")}return Ma},serialize:function(Ma,Ya){var db=Ma.to;if(db=null!=db?db instanceof
Array?db:"number"!=typeof db.length||db.split||db.setInterval||db.call?[db]:Array.prototype.slice.call(db):[]){for(var sb=0,Fb=db.length;sb<Fb;++sb){var Vb=String(db[sb]),Wb=Vb.lastIndexOf("@"),vc=Vb.slice(0,Wb).replace(Re,Lb).replace(Re,pa).replace(vj,xa);Vb=Vb.slice(Wb+1);try{Vb=Ya.iri?Qe.toUnicode(Vb):Qe.toASCII(vb(Vb,Ya).toLowerCase())}catch(yc){Ma.error=Ma.error||"Email address's domain name can not be converted to "+(Ya.iri?"Unicode":"ASCII")+" via punycode: "+yc}db[sb]=vc+"@"+Vb}Ma.path=db.join(",")}Ya=
Ma.headers=Ma.headers||{};Ma.subject&&(Ya.subject=Ma.subject);Ma.body&&(Ya.body=Ma.body);db=[];for(var cc in Ya)Ya[cc]!==uj[cc]&&db.push(cc.replace(Re,Lb).replace(Re,pa).replace(lh,xa)+"\x3d"+Ya[cc].replace(Re,Lb).replace(Re,pa).replace(lh,xa));return db.length&&(Ma.query=db.join("\x26")),Ma}};var wj=/^([^:]+):(.*)/;Ef={scheme:"urn",parse:function(Ma,Ya){var db=Ma.path&&Ma.path.match(wj);if(db){var sb=Ya.scheme||Ma.scheme||"urn",Fb=db[1].toLowerCase();db=db[2];sb=zd[sb+":"+(Ya.nid||Fb)];Ma.nid=Fb;
Ma.nss=db;Ma.path=void 0;sb&&(Ma=sb.parse(Ma,Ya))}else Ma.error=Ma.error||"URN can not be parsed.";return Ma},serialize:function(Ma,Ya){var db=Ma.nid,sb=zd[(Ya.scheme||Ma.scheme||"urn")+":"+(Ya.nid||db)];sb&&(Ma=sb.serialize(Ma,Ya));sb=Ma;return sb.path=(db||Ya.nid)+":"+Ma.nss,sb}};var xj=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,mh={scheme:"urn:uuid",parse:function(Ma,Ya){return Ma.uuid=Ma.nss,Ma.nss=void 0,Ya.tolerant||Ma.uuid&&Ma.uuid.match(xj)||(Ma.error=Ma.error||"UUID is not valid."),
Ma},serialize:function(Ma,Ya){return Ma.nss=(Ma.uuid||"").toLowerCase(),Ma}};zd[ff.scheme]=ff;zd[jh.scheme]=jh;zd[gf.scheme]=gf;zd[kh.scheme]=kh;zd[Df.scheme]=Df;zd[Ef.scheme]=Ef;zd[mh.scheme]=mh;T.SCHEMES=zd;T.pctEncChar=xa;T.pctDecChars=Fa;T.parse=bb;T.removeDotSegments=qb;T.serialize=Hb;T.resolveComponents=Bb;T.resolve=function(Ma,Ya,db){var sb={scheme:"null"};if(db)for(var Fb in db)sb[Fb]=db[Fb];return Hb(Bb(bb(Ma,sb),bb(Ya,sb),sb,!0),sb)};T.normalize=function(Ma,Ya){return"string"==typeof Ma?
Ma=Hb(bb(Ma,Ya),Ya):"object"===ia(Ma)&&(Ma=bb(Hb(Ma,Ya),Ya)),Ma};T.equal=function(Ma,Ya,db){return"string"==typeof Ma?Ma=Hb(bb(Ma,db),db):"object"===ia(Ma)&&(Ma=Hb(Ma,db)),"string"==typeof Ya?Ya=Hb(bb(Ya,db),db):"object"===ia(Ya)&&(Ya=Hb(Ya,db)),Ma===Ya};T.escapeComponent=function(Ma,Ya){return Ma&&Ma.toString().replace(Ya&&Ya.iri?jc.ESCAPE:ic.ESCAPE,xa)};T.unescapeComponent=vb;Object.defineProperty(T,"__esModule",{value:!0})}(I)}(0,$g);var Ff=function N(I,T){if(I===T)return!0;if(I&&T&&"object"==
typeof I&&"object"==typeof T){if(I.constructor!==T.constructor)return!1;var ba,ia,pa;if(Array.isArray(I)){if((ba=I.length)!=T.length)return!1;for(ia=ba;0!=ia--;)if(!N(I[ia],T[ia]))return!1;return!0}if(I.constructor===RegExp)return I.source===T.source&&I.flags===T.flags;if(I.valueOf!==Object.prototype.valueOf)return I.valueOf()===T.valueOf();if(I.toString!==Object.prototype.toString)return I.toString()===T.toString();if((ba=(pa=Object.keys(I)).length)!==Object.keys(T).length)return!1;for(ia=ba;0!=
ia--;)if(!Object.prototype.hasOwnProperty.call(T,pa[ia]))return!1;for(ia=ba;0!=ia--;)if(ba=pa[ia],!N(I[ba],T[ba]))return!1;return!0}return I!=I&&T!=T},Se={copy:function(I,T){for(var N in T=T||{},I)T[N]=I[N];return T},checkDataType:qe,checkDataTypes:function(I,T,N){if(1===I.length)return qe(I[0],T,N,!0);var ba="";I=hd(I);for(var ia in I.array&&I.object&&(ba=I.null?"(":"(!"+T+" || ",ba+="typeof "+T+' !\x3d\x3d "object")',delete I.null,delete I.array,delete I.object),I.number&&delete I.integer,I)ba+=
(ba?" \x26\x26 ":"")+qe(ia,T,N,!0);return ba},coerceToTypes:function(I,T){if(Array.isArray(T)){for(var N=[],ba=0;ba<T.length;ba++){var ia=T[ba];(nh[ia]||"array"===I&&"array"===ia)&&(N[N.length]=ia)}if(N.length)return N}else{if(nh[T])return[T];if("array"===I&&"array"===T)return["array"]}},toHash:hd,getProperty:re,escapeQuotes:Gb,equal:Ff,ucs2length:function(I){for(var T,N=0,ba=I.length,ia=0;ia<ba;)N++,55296<=(T=I.charCodeAt(ia++))&&56319>=T&&ia<ba&&56320==(64512&(T=I.charCodeAt(ia)))&&ia++;return N},
varOccurences:function(I,T){return(I=I.match(new RegExp(T+"[^0-9]","g")))?I.length:0},varReplace:function(I,T,N){return T+="([^0-9])",N=N.replace(/\$/g,"$$$$"),I.replace(new RegExp(T,"g"),N+"$1")},schemaHasRules:function(I,T){if("boolean"==typeof I)return!I;for(var N in I)if(T[N])return!0},schemaHasRulesExcept:function(I,T,N){if("boolean"==typeof I)return!I&&"not"!=N;for(var ba in I)if(ba!=N&&T[ba])return!0},schemaUnknownRules:function(I,T){if("boolean"!=typeof I)for(var N in I)if(!T[N])return N},
toQuotedString:Bc,getPathExpr:function(I,T,N,ba){return id(I,N?"'/' + "+T+(ba?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):ba?"'[' + "+T+" + ']'":"'[\\'' + "+T+" + '\\']'")},getPath:function(I,T,N){T=Bc(N?"/"+se(T):re(T));return id(I,T)},getData:function(I,T,N){if(""===I)return"rootData";if("/"==I[0]){if(!yj.test(I))throw Error("Invalid JSON-pointer: "+I);var ba=I;T="rootData"}else{if(!(ba=I.match(zj)))throw Error("Invalid JSON-pointer: "+I);if(I=+ba[1],"#"==(ba=ba[2])){if(I>=T)throw Error("Cannot access property/index "+
I+" levels up, current level is "+T);return N[T-I]}if(I>T)throw Error("Cannot access data "+I+" levels up, current level is "+T);if(T="data"+(T-I||""),!ba)return T}N=T;ba=ba.split("/");for(I=0;I<ba.length;I++){var ia=ba[I];ia&&(T+=re(te(ia)),N+=" \x26\x26 "+T)}return N},unescapeFragment:function(I){return te(decodeURIComponent(I))},unescapeJsonPointer:te,escapeFragment:function(I){return encodeURIComponent(se(I))},escapeJsonPointer:se},nh=hd(["string","number","integer","boolean","null"]),xi=/^[a-z$_][a-z$_0-9]*$/i,
yi=/'|\\/g,yj=/^\/(?:[^~]|~0|~1)*$/,zj=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/,$f=function(I){Se.copy(I,this)},oh={},ie=oh=function(I,T,N){"function"==typeof T&&(N=T,T={});ce(T,"function"==typeof(N=T.cb||N)?N:N.pre||function(){},N.post||function(){},I,"",I)};ie.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};ie.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ie.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ie.skipKeywords=
{default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var Me=$g,qf=Se,pf=$f,Aj=oh;ad.normalizeId=wd;ad.fullPath=ee;ad.url=fe;ad.ids=function(I){var T=wd(this._getId(I)),N={"":T},ba={"":ee(T,!1)},ia={},pa=this;return Aj(I,{allKeys:!0},function(ta,Ca,Da,Ia,xa,Fa,Ga){if(""!==Ca){Da=pa._getId(ta);Fa=N[Ia];Ia=ba[Ia]+"/"+
xa;if(void 0!==Ga&&(Ia+="/"+("number"==typeof Ga?Ga:qf.escapeFragment(Ga))),"string"==typeof Da)if(Da=Fa=wd(Fa?Me.resolve(Fa,Da):Da),Ga=pa._refs[Da],"string"==typeof Ga&&(Ga=pa._refs[Ga]),Ga&&Ga.schema){if(!Ff(ta,Ga.schema))throw Error('id "'+Da+'" resolves to more than one schema');}else if(Da!=wd(Ia))if("#"==Da[0]){if(ia[Da]&&!Ff(ta,ia[Da]))throw Error('id "'+Da+'" resolves to more than one schema');ia[Da]=ta}else pa._refs[Da]=Ia;N[Ca]=Fa;ba[Ca]=Ia}}),ia};ad.inlineRef=ve;ad.schema=de;var zi=qf.toHash(["properties",
"patternProperties","enum","dependencies","definitions"]),Ai=qf.toHash("type format pattern maxLength minLength maxProperties minProperties maxItems minItems maximum minimum uniqueItems multipleOf required enum".split(" ")),Bi=/#\/?$/,Of=ad,ph=ze(function(I){this.message="validation failed";this.errors=I;this.ajv=this.validation=!0}),ag=ze(ye);ye.message=function(I,T){return"can't resolve reference "+T+" from id "+I};var qh=function(I,T){T||(T={});"function"==typeof T&&(T={cmp:T});var N,ba="boolean"==
typeof T.cycles&&T.cycles,ia=T.cmp&&(N=T.cmp,function(ta){return function(Ca,Da){return N({key:Ca,value:ta[Ca]},{key:Da,value:ta[Da]})}}),pa=[];return function Da(Ca){if(Ca&&Ca.toJSON&&"function"==typeof Ca.toJSON&&(Ca=Ca.toJSON()),void 0!==Ca){if("number"==typeof Ca)return isFinite(Ca)?""+Ca:"null";if("object"!=typeof Ca)return JSON.stringify(Ca);var Ia;if(Array.isArray(Ca)){var xa="[";for(Ia=0;Ia<Ca.length;Ia++)Ia&&(xa+=","),xa+=Da(Ca[Ia])||"null";return xa+"]"}if(null===Ca)return"null";if(-1!==
pa.indexOf(Ca)){if(ba)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Fa=pa.push(Ca)-1,Ga=Object.keys(Ca).sort(ia&&ia(Ca));xa="";for(Ia=0;Ia<Ga.length;Ia++){var Ra=Ga[Ia],Xa=Da(Ca[Ra]);Xa&&(xa&&(xa+=","),xa+=JSON.stringify(Ra)+":"+Xa)}return pa.splice(Fa,1),"{"+xa+"}"}}(I)},bg=function(I,T,N){function ba(Ob){Ob=Ob.rules;for(var qc=0;qc<Ob.length;qc++)if(ia(Ob[qc]))return!0}function ia(Ob){var qc;if(!(qc=void 0!==I.schema[Ob.keyword])&&(qc=Ob.implements))a:{Ob=
Ob.implements;for(qc=0;qc<Ob.length;qc++)if(void 0!==I.schema[Ob[qc]]){qc=!0;break a}qc=void 0}return qc}N="";var pa=!0===I.schema.$async,ta=I.util.schemaHasRulesExcept(I.schema,I.RULES.all,"$ref"),Ca=I.self._getId(I.schema);if(I.opts.strictKeywords){var Da=I.util.schemaUnknownRules(I.schema,I.RULES.keywords);if(Da){Da="unknown keyword: "+Da;if("log"!==I.opts.strictKeywords)throw Error(Da);I.logger.warn(Da)}}if(I.isTop&&(N+=" var validate \x3d ",pa&&(I.async=!0,N+="async "),N+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",
Ca&&(I.opts.sourceCode||I.opts.processCode)&&(N+=" /*# sourceURL\x3d"+Ca+" */ ")),"boolean"==typeof I.schema||!ta&&!I.schema.$ref){T="false schema";Da=I.level;var Ia=I.dataLevel,xa=I.schema[T],Fa=I.schemaPath+I.util.getProperty(T),Ga=I.errSchemaPath+"/"+T;Ca=!I.opts.allErrors;T="data"+(Ia||"");var Ra="valid"+Da;!1===I.schema?(I.isTop?Ca=!0:N+=" var "+Ra+" \x3d false; ",(jc=jc||[]).push(N),N="",!1!==I.createErrors?(N+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+
I.util.toQuotedString(Ga)+" , params: {} ",!1!==I.opts.messages&&(N+=" , message: 'boolean schema is false' "),I.opts.verbose&&(N+=" , schema: false , parentSchema: validate.schema"+I.schemaPath+" , data: "+T+" "),N+=" } "):N+=" {} ",Fa=N,N=jc.pop(),!I.compositeRule&&Ca?I.async?N+=" throw new ValidationError(["+Fa+"]); ":N+=" validate.errors \x3d ["+Fa+"]; return false; ":N+=" var err \x3d "+Fa+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; "):I.isTop?N+=
pa?" return data; ":" validate.errors \x3d null; return true; ":N+=" var "+Ra+" \x3d true; ";return I.isTop&&(N+=" }; return validate; "),N}if(I.isTop){var Xa=I.isTop;Da=I.level=0;Ia=I.dataLevel=0;T="data";if(I.rootId=I.resolve.fullPath(I.self._getId(I.root.schema)),I.baseId=I.baseId||I.rootId,delete I.isTop,I.dataPathArr=[""],void 0!==I.schema.default&&I.opts.useDefaults&&I.opts.strictDefaults){Ga="default is ignored in the schema root";if("log"!==I.opts.strictDefaults)throw Error(Ga);I.logger.warn(Ga)}N+=
" var vErrors \x3d null;  var errors \x3d 0;      if (rootData \x3d\x3d\x3d undefined) rootData \x3d data; "}else{Da=I.level;T="data"+((Ia=I.dataLevel)||"");if(Ca&&(I.baseId=I.resolve.url(I.baseId,Ca)),pa&&!I.async)throw Error("async schema in sync schema");N+=" var errs_"+Da+" \x3d errors;"}Ra="valid"+Da;Ca=!I.opts.allErrors;var fb="",bb="",jb=I.schema.type,qb=Array.isArray(jb);if(jb&&I.opts.nullable&&!0===I.schema.nullable&&(qb?-1==jb.indexOf("null")&&(jb=jb.concat("null")):"null"!=jb&&(jb=[jb,
"null"],qb=!0)),qb&&1==jb.length&&(jb=jb[0],qb=!1),I.schema.$ref&&ta){if("fail"==I.opts.extendRefs)throw Error('$ref: validation keywords used in schema at path "'+I.errSchemaPath+'" (see option extendRefs)');!0!==I.opts.extendRefs&&(ta=!1,I.logger.warn('$ref: keywords ignored in schema at path "'+I.errSchemaPath+'"'))}if(I.schema.$comment&&I.opts.$comment&&(N+=" "+I.RULES.all.$comment.code(I,"$comment")),jb){if(I.opts.coerceTypes)var Hb=I.util.coerceToTypes(I.opts.coerceTypes,jb);Fa=I.RULES.types[jb];
if(Hb||qb||!0===Fa||Fa&&!ba(Fa)){Fa=I.schemaPath+".type";Ga=I.errSchemaPath+"/type";Fa=I.schemaPath+".type";Ga=I.errSchemaPath+"/type";if(N+=" if ("+I.util[qb?"checkDataTypes":"checkDataType"](jb,T,I.opts.strictNumbers,!0)+") { ",Hb){var Bb="dataType"+Da,vb="coerced"+Da;N+=" var "+Bb+" \x3d typeof "+T+"; var "+vb+" \x3d undefined; ";"array"==I.opts.coerceTypes&&(N+=" if ("+Bb+" \x3d\x3d 'object' \x26\x26 Array.isArray("+T+") \x26\x26 "+T+".length \x3d\x3d 1) { "+T+" \x3d "+T+"[0]; "+Bb+" \x3d typeof "+
T+"; if ("+I.util.checkDataType(I.schema.type,T,I.opts.strictNumbers)+") "+vb+" \x3d "+T+"; } ");N+=" if ("+vb+" !\x3d\x3d undefined) ; ";var ec=Hb;if(ec){var Lb;xa=-1;for(var ic=ec.length-1;xa<ic;)"string"==(Lb=ec[xa+=1])?N+=" else if ("+Bb+" \x3d\x3d 'number' || "+Bb+" \x3d\x3d 'boolean') "+vb+" \x3d '' + "+T+"; else if ("+T+" \x3d\x3d\x3d null) "+vb+" \x3d ''; ":"number"==Lb||"integer"==Lb?(N+=" else if ("+Bb+" \x3d\x3d 'boolean' || "+T+" \x3d\x3d\x3d null || ("+Bb+" \x3d\x3d 'string' \x26\x26 "+
T+" \x26\x26 "+T+" \x3d\x3d +"+T+" ","integer"==Lb&&(N+=" \x26\x26 !("+T+" % 1)"),N+=")) "+vb+" \x3d +"+T+"; "):"boolean"==Lb?N+=" else if ("+T+" \x3d\x3d\x3d 'false' || "+T+" \x3d\x3d\x3d 0 || "+T+" \x3d\x3d\x3d null) "+vb+" \x3d false; else if ("+T+" \x3d\x3d\x3d 'true' || "+T+" \x3d\x3d\x3d 1) "+vb+" \x3d true; ":"null"==Lb?N+=" else if ("+T+" \x3d\x3d\x3d '' || "+T+" \x3d\x3d\x3d 0 || "+T+" \x3d\x3d\x3d false) "+vb+" \x3d null; ":"array"==I.opts.coerceTypes&&"array"==Lb&&(N+=" else if ("+Bb+" \x3d\x3d 'string' || "+
Bb+" \x3d\x3d 'number' || "+Bb+" \x3d\x3d 'boolean' || "+T+" \x3d\x3d null) "+vb+" \x3d ["+T+"]; ")}(jc=jc||[]).push(N+" else {   ");N="";!1!==I.createErrors?(N+=" { keyword: 'type' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ga)+" , params: { type: '",N+=qb?""+jb.join(","):""+jb,N+="' } ",!1!==I.opts.messages&&(N+=" , message: 'should be ",N+=qb?""+jb.join(","):""+jb,N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+Fa+" , parentSchema: validate.schema"+
I.schemaPath+" , data: "+T+" "),N+=" } "):N+=" {} ";Fa=N;N=jc.pop();!I.compositeRule&&Ca?I.async?N+=" throw new ValidationError(["+Fa+"]); ":N+=" validate.errors \x3d ["+Fa+"]; return false; ":N+=" var err \x3d "+Fa+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";Fa=Ia?"data"+(Ia-1||""):"parentData";N=N+(" } if ("+vb+" !\x3d\x3d undefined) {   ")+(T+" \x3d "+vb+"; ");Ia||(N+="if ("+Fa+" !\x3d\x3d undefined)");N+=" "+Fa+"["+(Ia?I.dataPathArr[Ia]:"parentDataProperty")+
"] \x3d "+vb+"; } "}else(jc=jc||[]).push(N),N="",!1!==I.createErrors?(N+=" { keyword: 'type' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ga)+" , params: { type: '",N+=qb?""+jb.join(","):""+jb,N+="' } ",!1!==I.opts.messages&&(N+=" , message: 'should be ",N+=qb?""+jb.join(","):""+jb,N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+Fa+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+T+" "),N+=" } "):N+=" {} ",Fa=N,N=jc.pop(),!I.compositeRule&&
Ca?I.async?N+=" throw new ValidationError(["+Fa+"]); ":N+=" validate.errors \x3d ["+Fa+"]; return false; ":N+=" var err \x3d "+Fa+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";N+=" } "}}if(I.schema.$ref&&!ta)N+=" "+I.RULES.all.$ref.code(I,"$ref")+" ",Ca&&(N+=" } if (errors \x3d\x3d\x3d ",N+=Xa?"0":"errs_"+Da,N+=") { ",bb+="}");else if(ta=I.RULES)for(Ia=-1,Lb=ta.length-1;Ia<Lb;)if(ba(Fa=ta[Ia+=1])){if(Fa.type&&(N+=" if ("+I.util.checkDataType(Fa.type,T,
I.opts.strictNumbers)+") { "),I.opts.useDefaults)if("object"==Fa.type&&I.schema.properties){if(xa=I.schema.properties,Bb=Object.keys(xa))for(ec=-1,ic=Bb.length-1;ec<ic;)if(void 0!==(Ga=xa[vb=Bb[ec+=1]]).default)if(vb=T+I.util.getProperty(vb),I.compositeRule){if(I.opts.strictDefaults){Ga="default is ignored for: "+vb;if("log"!==I.opts.strictDefaults)throw Error(Ga);I.logger.warn(Ga)}}else N+=" if ("+vb+" \x3d\x3d\x3d undefined ","empty"==I.opts.useDefaults&&(N+=" || "+vb+" \x3d\x3d\x3d null || "+vb+
" \x3d\x3d\x3d '' "),N+=" ) "+vb+" \x3d ","shared"==I.opts.useDefaults?N+=" "+I.useDefault(Ga.default)+" ":N+=" "+JSON.stringify(Ga.default)+" ",N+="; "}else if("array"==Fa.type&&Array.isArray(I.schema.items)&&(Bb=I.schema.items))for(xa=-1,ec=Bb.length-1;xa<ec;)if(void 0!==(Ga=Bb[xa+=1]).default)if(vb=T+"["+xa+"]",I.compositeRule){if(I.opts.strictDefaults){Ga="default is ignored for: "+vb;if("log"!==I.opts.strictDefaults)throw Error(Ga);I.logger.warn(Ga)}}else N+=" if ("+vb+" \x3d\x3d\x3d undefined ",
"empty"==I.opts.useDefaults&&(N+=" || "+vb+" \x3d\x3d\x3d null || "+vb+" \x3d\x3d\x3d '' "),N+=" ) "+vb+" \x3d ","shared"==I.opts.useDefaults?N+=" "+I.useDefault(Ga.default)+" ":N+=" "+JSON.stringify(Ga.default)+" ",N+="; ";if(xa=Fa.rules)for(Ga=-1,vb=xa.length-1;Ga<vb;)ia(Bb=xa[Ga+=1])&&(Bb=Bb.code(I,Bb.keyword,Fa.type))&&(N+=" "+Bb+" ",Ca&&(fb+="}"));if(Ca&&(N+=" "+fb+" ",fb=""),Fa.type&&(N+=" } ",jb&&jb===Fa.type&&!Hb)){N+=" else { ";var jc;Fa=I.schemaPath+".type";Ga=I.errSchemaPath+"/type";(jc=
jc||[]).push(N);N="";!1!==I.createErrors?(N+=" { keyword: 'type' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ga)+" , params: { type: '",N+=qb?""+jb.join(","):""+jb,N+="' } ",!1!==I.opts.messages&&(N+=" , message: 'should be ",N+=qb?""+jb.join(","):""+jb,N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+Fa+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+T+" "),N+=" } "):N+=" {} ";Fa=N;N=jc.pop();!I.compositeRule&&Ca?I.async?N+=" throw new ValidationError(["+
Fa+"]); ":N+=" validate.errors \x3d ["+Fa+"]; return false; ":N+=" var err \x3d "+Fa+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";N+=" } "}Ca&&(N+=" if (errors \x3d\x3d\x3d ",N+=Xa?"0":"errs_"+Da,N+=") { ",bb+="}")}return Ca&&(N+=" "+bb+" "),Xa?(pa?(N+=" if (errors \x3d\x3d\x3d 0) return data;           ",N+=" else throw new ValidationError(vErrors); "):(N+=" validate.errors \x3d vErrors; ",N+=" return errors \x3d\x3d\x3d 0;       "),N+=" }; return validate;"):
N+=" var "+Ra+" \x3d errors \x3d\x3d\x3d errs_"+Da+";",N},rf=Se,Bj=rf.ucs2length,rh={},Gf=rh=function(){this._cache={}};Gf.prototype.put=function(I,T){this._cache[I]=T};Gf.prototype.get=function(I){return this._cache[I]};Gf.prototype.del=function(I){delete this._cache[I]};Gf.prototype.clear=function(){this._cache={}};var Ci=Se,Di=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Ei=[0,31,28,31,30,31,30,31,31,30,31,30,31],Fi=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,sh=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,
Cj=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,
th=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,uh=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,
vh=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,wh=/^(?:\/(?:[^~/]|~0|~1)*)*$/,xh=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,yh=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;za.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,
"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":th,url:uh,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:sh,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,
regex:Eb,uuid:vh,"json-pointer":wh,"json-pointer-uri-fragment":xh,"relative-json-pointer":yh};za.full={date:La,time:mb,"date-time":function(I){I=I.split(Dj);return 2==I.length&&La(I[0])&&mb(I[1],!0)},uri:function(I){return Ej.test(I)&&Cj.test(I)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,
"uri-template":th,url:uh,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:sh,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,
regex:Eb,uuid:vh,"json-pointer":wh,"json-pointer-uri-fragment":xh,"relative-json-pointer":yh};var Dj=/t|\s/i,Ej=/\/|:/,Gi=/[^\\]\\Z/,zh=function(I,T,N){var ba;N=" ";var ia=I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T,Ia=!I.opts.allErrors,xa="data"+(pa||""),Fa=I.opts.$data&&ta&&ta.$data;Fa?(N+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,pa,I.dataPathArr)+"; ",ba="schema"+ia):ba=ta;var Ga="maximum"==T,Ra=Ga?"exclusiveMaximum":"exclusiveMinimum",
Xa=I.schema[Ra],fb=I.opts.$data&&Xa&&Xa.$data,bb=Ga?"\x3c":"\x3e",jb=Ga?"\x3e":"\x3c",qb=void 0;if(!Fa&&"number"!=typeof ta&&void 0!==ta)throw Error(T+" must be number");if(!fb&&void 0!==Xa&&"number"!=typeof Xa&&"boolean"!=typeof Xa)throw Error(Ra+" must be number or boolean");if(fb){Xa=I.util.getData(Xa.$data,pa,I.dataPathArr);var Hb="exclusive"+ia;Ga="exclType"+ia;var Bb="exclIsNumber"+ia;pa="' + "+(Bb="op"+ia)+" + '";N=N+(" var schemaExcl"+ia+" \x3d "+Xa+";  var ")+(Hb+"; var "+Ga+" \x3d typeof "+
(Xa="schemaExcl"+ia)+"; if ("+Ga+" !\x3d 'boolean' \x26\x26 "+Ga+" !\x3d 'undefined' \x26\x26 "+Ga+" !\x3d 'number') { ");var vb;qb=Ra;(vb=vb||[]).push(N);N="";!1!==I.createErrors?(N+=" { keyword: '"+(qb||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: {} ",!1!==I.opts.messages&&(N+=" , message: '"+Ra+" should be boolean' "),I.opts.verbose&&(N+=" , schema: validate.schema"+Ca+" , parentSchema: validate.schema"+I.schemaPath+
" , data: "+xa+" "),N+=" } "):N+=" {} ";var ec=N;N=vb.pop();!I.compositeRule&&Ia?I.async?N+=" throw new ValidationError(["+ec+"]); ":N+=" validate.errors \x3d ["+ec+"]; return false; ":N+=" var err \x3d "+ec+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";N+=" } else if ( ";Fa&&(N+=" ("+ba+" !\x3d\x3d undefined \x26\x26 typeof "+ba+" !\x3d 'number') || ");N+=" "+Ga+" \x3d\x3d 'number' ? ( ("+Hb+" \x3d "+ba+" \x3d\x3d\x3d undefined || "+Xa+" "+bb+"\x3d "+
ba+") ? "+xa+" "+jb+"\x3d "+Xa+" : "+xa+" "+jb+" "+ba+" ) : ( ("+Hb+" \x3d "+Xa+" \x3d\x3d\x3d true) ? "+xa+" "+jb+"\x3d "+ba+" : "+xa+" "+jb+" "+ba+" ) || "+xa+" !\x3d\x3d "+xa+") { var op"+ia+" \x3d "+Hb+" ? '"+bb+"' : '"+bb+"\x3d'; ";void 0===ta&&(qb=Ra,Da=I.errSchemaPath+"/"+Ra,ba=Xa,Fa=fb)}else pa=bb,(Bb="number"==typeof Xa)&&Fa?(Bb="'"+pa+"'",N+=" if ( ",Fa&&(N+=" ("+ba+" !\x3d\x3d undefined \x26\x26 typeof "+ba+" !\x3d 'number') || "),N+=" ( "+ba+" \x3d\x3d\x3d undefined || "+Xa+" "+bb+"\x3d "+
ba+" ? "+xa+" "+jb+"\x3d "+Xa+" : "+xa+" "+jb+" "+ba+" ) || "+xa+" !\x3d\x3d "+xa+") { "):(Bb&&void 0===ta?(Hb=!0,qb=Ra,Da=I.errSchemaPath+"/"+Ra,ba=Xa,jb+="\x3d"):(Bb&&(ba=Math[Ga?"min":"max"](Xa,ta)),Xa===(!Bb||ba)?(Hb=!0,qb=Ra,Da=I.errSchemaPath+"/"+Ra,jb+="\x3d"):(Hb=!1,pa+="\x3d")),Bb="'"+pa+"'",N+=" if ( ",Fa&&(N+=" ("+ba+" !\x3d\x3d undefined \x26\x26 typeof "+ba+" !\x3d 'number') || "),N+=" "+xa+" "+jb+" "+ba+" || "+xa+" !\x3d\x3d "+xa+") { ");qb=qb||T;(vb=vb||[]).push(N);N="";!1!==I.createErrors?
(N+=" { keyword: '"+(qb||"_limit")+"' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { comparison: "+Bb+", limit: "+ba+", exclusive: "+Hb+" } ",!1!==I.opts.messages&&(N+=" , message: 'should be "+pa+" ",N+=Fa?"' + "+ba:ba+"'"),I.opts.verbose&&(N+=" , schema:  ",N+=Fa?"validate.schema"+Ca:""+ta,N+="         , parentSchema: validate.schema"+I.schemaPath+" , data: "+xa+" "),N+=" } "):N+=" {} ";ec=N;return N=vb.pop(),!I.compositeRule&&Ia?I.async?N+=
" throw new ValidationError(["+ec+"]); ":N+=" validate.errors \x3d ["+ec+"]; return false; ":N+=" var err \x3d "+ec+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",N+=" } ",Ia&&(N+=" else { "),N},Ah=function(I,T,N){var ba;N=" ";var ia=I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T,Ia=!I.opts.allErrors,xa="data"+(pa||""),Fa=I.opts.$data&&ta&&ta.$data;if(Fa?(N+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,
pa,I.dataPathArr)+"; ",ba="schema"+ia):ba=ta,!Fa&&"number"!=typeof ta)throw Error(T+" must be number");N+="if ( ";Fa&&(N+=" ("+ba+" !\x3d\x3d undefined \x26\x26 typeof "+ba+" !\x3d 'number') || ");var Ga=Ga||[];Ga.push(N+(" "+xa+".length "+("maxItems"==T?"\x3e":"\x3c")+" "+ba+") { "));N="";!1!==I.createErrors?(N+=" { keyword: '"+(T||"_limitItems")+"' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { limit: "+ba+" } ",!1!==I.opts.messages&&(N+=" , message: 'should NOT have ",
N+="maxItems"==T?"more":"fewer",N+=" than ",N+=Fa?"' + "+ba+" + '":""+ta,N+=" items' "),I.opts.verbose&&(N+=" , schema:  ",N+=Fa?"validate.schema"+Ca:""+ta,N+="         , parentSchema: validate.schema"+I.schemaPath+" , data: "+xa+" "),N+=" } "):N+=" {} ";T=N;return N=Ga.pop(),!I.compositeRule&&Ia?I.async?N+=" throw new ValidationError(["+T+"]); ":N+=" validate.errors \x3d ["+T+"]; return false; ":N+=" var err \x3d "+T+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",
N+="} ",Ia&&(N+=" else { "),N},Bh=function(I,T,N){var ba;N=" ";var ia=I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T,Ia=!I.opts.allErrors,xa="data"+(pa||""),Fa=I.opts.$data&&ta&&ta.$data;if(Fa?(N+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,pa,I.dataPathArr)+"; ",ba="schema"+ia):ba=ta,!Fa&&"number"!=typeof ta)throw Error(T+" must be number");N+="if ( ";Fa&&(N+=" ("+ba+" !\x3d\x3d undefined \x26\x26 typeof "+ba+" !\x3d 'number') || ");!1===
I.opts.unicode?N+=" "+xa+".length ":N+=" ucs2length("+xa+") ";var Ga=Ga||[];Ga.push(N+(" "+("maxLength"==T?"\x3e":"\x3c")+" "+ba+") { "));N="";!1!==I.createErrors?(N+=" { keyword: '"+(T||"_limitLength")+"' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { limit: "+ba+" } ",!1!==I.opts.messages&&(N+=" , message: 'should NOT be ",N+="maxLength"==T?"longer":"shorter",N+=" than ",N+=Fa?"' + "+ba+" + '":""+ta,N+=" characters' "),I.opts.verbose&&(N+=
" , schema:  ",N+=Fa?"validate.schema"+Ca:""+ta,N+="         , parentSchema: validate.schema"+I.schemaPath+" , data: "+xa+" "),N+=" } "):N+=" {} ";T=N;return N=Ga.pop(),!I.compositeRule&&Ia?I.async?N+=" throw new ValidationError(["+T+"]); ":N+=" validate.errors \x3d ["+T+"]; return false; ":N+=" var err \x3d "+T+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",N+="} ",Ia&&(N+=" else { "),N},Ch=function(I,T,N){var ba;N=" ";var ia=I.level,pa=I.dataLevel,ta=
I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T,Ia=!I.opts.allErrors,xa="data"+(pa||""),Fa=I.opts.$data&&ta&&ta.$data;if(Fa?(N+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,pa,I.dataPathArr)+"; ",ba="schema"+ia):ba=ta,!Fa&&"number"!=typeof ta)throw Error(T+" must be number");N+="if ( ";Fa&&(N+=" ("+ba+" !\x3d\x3d undefined \x26\x26 typeof "+ba+" !\x3d 'number') || ");var Ga=Ga||[];Ga.push(N+(" Object.keys("+xa+").length "+("maxProperties"==T?"\x3e":"\x3c")+" "+ba+") { "));
N="";!1!==I.createErrors?(N+=" { keyword: '"+(T||"_limitProperties")+"' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { limit: "+ba+" } ",!1!==I.opts.messages&&(N+=" , message: 'should NOT have ",N+="maxProperties"==T?"more":"fewer",N+=" than ",N+=Fa?"' + "+ba+" + '":""+ta,N+=" properties' "),I.opts.verbose&&(N+=" , schema:  ",N+=Fa?"validate.schema"+Ca:""+ta,N+="         , parentSchema: validate.schema"+I.schemaPath+" , data: "+xa+" "),N+=" } "):
N+=" {} ";T=N;return N=Ga.pop(),!I.compositeRule&&Ia?I.async?N+=" throw new ValidationError(["+T+"]); ":N+=" validate.errors \x3d ["+T+"]; return false; ":N+=" var err \x3d "+T+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",N+="} ",Ia&&(N+=" else { "),N},Dh={$ref:function(I,T,N){var ba,ia;N=" ";var pa=I.dataLevel,ta=I.schema[T],Ca=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;var Da="data"+(pa||""),Ia="valid"+I.level;if("#"==ta||"#/"==ta)I.isRoot?(ba=I.async,
ia="validate"):(ba=!0===I.root.schema.$async,ia="root.refVal[0]");else{var xa=I.resolveRef(I.baseId,ta,I.isRoot);if(void 0===xa)if(xa=I.MissingRefError.message(I.baseId,ta),"fail"==I.opts.missingRefs)I.logger.error(xa),(Ga=Ga||[]).push(N),N="",!1!==I.createErrors?(N+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ca)+" , params: { ref: '"+I.util.escapeQuotes(ta)+"' } ",!1!==I.opts.messages&&(N+=" , message: 'can\\'t resolve reference "+I.util.escapeQuotes(ta)+
"' "),I.opts.verbose&&(N+=" , schema: "+I.util.toQuotedString(ta)+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ",ta=N,N=Ga.pop(),!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+ta+"]); ":N+=" validate.errors \x3d ["+ta+"]; return false; ":N+=" var err \x3d "+ta+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",T&&(N+=" if (false) { ");else{if("ignore"!=I.opts.missingRefs)throw new I.MissingRefError(I.baseId,
ta,xa);I.logger.warn(xa);T&&(N+=" if (true) { ")}else if(xa.inline){Ca=I.util.copy(I);Ca.level++;var Fa="valid"+Ca.level;Ca.schema=xa.schema;Ca.schemaPath="";Ca.errSchemaPath=ta;N+=" "+I.validate(Ca).replace(/validate\.schema/g,xa.code)+" ";T&&(N+=" if ("+Fa+") { ")}else ba=!0===xa.$async||I.async&&!1!==xa.$async,ia=xa.code}if(ia){var Ga;(Ga=Ga||[]).push(N);N="";I.opts.passContext?N+=" "+ia+".call(this, ":N+=" "+ia+"( ";N+=" "+Da+", (dataPath || '')";'""'!=I.errorPath&&(N+=" + "+I.errorPath);pa=N+=
" , "+(pa?"data"+(pa-1||""):"parentData")+" , "+(pa?I.dataPathArr[pa]:"parentDataProperty")+", rootData)  ";if(N=Ga.pop(),ba){if(!I.async)throw Error("async schema referenced by sync schema");T&&(N+=" var "+Ia+"; ");N+=" try { await "+pa+"; ";T&&(N+=" "+Ia+" \x3d true; ");N+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors \x3d\x3d\x3d null) vErrors \x3d e.errors; else vErrors \x3d vErrors.concat(e.errors); errors \x3d vErrors.length; ";T&&(N+=" "+Ia+" \x3d false; ");N+=" } ";
T&&(N+=" if ("+Ia+") { ")}else N+=" if (!"+pa+") { if (vErrors \x3d\x3d\x3d null) vErrors \x3d "+ia+".errors; else vErrors \x3d vErrors.concat("+ia+".errors); errors \x3d vErrors.length; } ",T&&(N+=" else { ")}return N},allOf:function(I,T,N){N=" ";var ba=I.schema[T],ia=I.schemaPath+I.util.getProperty(T);T=I.errSchemaPath+"/"+T;var pa=!I.opts.allErrors,ta=I.util.copy(I),Ca="";ta.level++;var Da="valid"+ta.level,Ia=ta.baseId,xa=!0;if(ba)for(var Fa,Ga=-1,Ra=ba.length-1;Ga<Ra;)Fa=ba[Ga+=1],(I.opts.strictKeywords?
"object"==typeof Fa&&0<Object.keys(Fa).length||!1===Fa:I.util.schemaHasRules(Fa,I.RULES.all))&&(xa=!1,ta.schema=Fa,ta.schemaPath=ia+"["+Ga+"]",ta.errSchemaPath=T+"/"+Ga,N+="  "+I.validate(ta)+" ",ta.baseId=Ia,pa&&(N+=" if ("+Da+") { ",Ca+="}"));return pa&&(N+=xa?" if (true) { ":" "+Ca.slice(0,-1)+" "),N},anyOf:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T);T=I.errSchemaPath+"/"+T;var Ca=!I.opts.allErrors;ia="data"+(ia||"");var Da="valid"+ba;
ba="errs__"+ba;var Ia=I.util.copy(I),xa="";Ia.level++;var Fa="valid"+Ia.level;if(pa.every(function(jb){return I.opts.strictKeywords?"object"==typeof jb&&0<Object.keys(jb).length||!1===jb:I.util.schemaHasRules(jb,I.RULES.all)})){var Ga=Ia.baseId;N+=" var "+ba+" \x3d errors; var "+Da+" \x3d false;  ";var Ra=I.compositeRule;I.compositeRule=Ia.compositeRule=!0;if(pa)for(var Xa,fb=-1,bb=pa.length-1;fb<bb;)Xa=pa[fb+=1],Ia.schema=Xa,Ia.schemaPath=ta+"["+fb+"]",Ia.errSchemaPath=T+"/"+fb,N+="  "+I.validate(Ia)+
" ",Ia.baseId=Ga,N+=" "+Da+" \x3d "+Da+" || "+Fa+"; if (!"+Da+") { ",xa+="}";I.compositeRule=Ia.compositeRule=Ra;N+=" "+xa+" if (!"+Da+") {   var err \x3d   ";!1!==I.createErrors?(N+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: {} ",!1!==I.opts.messages&&(N+=" , message: 'should match some schema in anyOf' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+ia+
" "),N+=" } "):N+=" {} ";N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";!I.compositeRule&&Ca&&(I.async?N+=" throw new ValidationError(vErrors); ":N+=" validate.errors \x3d vErrors; return false; ");N+=" } else {  errors \x3d "+ba+"; if (vErrors !\x3d\x3d null) { if ("+ba+") vErrors.length \x3d "+ba+"; else vErrors \x3d null; } ";I.opts.allErrors&&(N+=" } ")}else Ca&&(N+=" if (true) { ");return N},$comment:function(I,T,N){N=" ";var ba=I.schema[T];T=I.errSchemaPath+
"/"+T;I.opts.allErrors;ba=I.util.toQuotedString(ba);return!0===I.opts.$comment?N+=" console.log("+ba+");":"function"==typeof I.opts.$comment&&(N+=" self._opts.$comment("+ba+", "+I.util.toQuotedString(T)+", validate.root.schema);"),N},const:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T),Ca=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;var Da="data"+(ia||""),Ia="valid"+ba,xa=I.opts.$data&&pa&&pa.$data;xa&&(N+=" var schema"+ba+" \x3d "+I.util.getData(pa.$data,
ia,I.dataPathArr)+"; ");xa||(N+=" var schema"+ba+" \x3d validate.schema"+ta+";");var Fa=Fa||[];Fa.push(N+("var "+Ia+" \x3d equal("+Da+", schema"+ba+"); if (!"+Ia+") {   "));N="";!1!==I.createErrors?(N+=" { keyword: 'const' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ca)+" , params: { allowedValue: schema"+ba+" } ",!1!==I.opts.messages&&(N+=" , message: 'should be equal to constant' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+
I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ";ba=N;return N=Fa.pop(),!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+ba+"]); ":N+=" validate.errors \x3d ["+ba+"]; return false; ":N+=" var err \x3d "+ba+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",N+=" }",T&&(N+=" else { "),N},contains:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T),Ca=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;
var Da="data"+(ia||""),Ia="valid"+ba;ia="errs__"+ba;var xa=I.util.copy(I);xa.level++;var Fa="valid"+xa.level,Ga="i"+ba,Ra=xa.dataLevel=I.dataLevel+1,Xa="data"+Ra,fb=I.baseId;ba=I.opts.strictKeywords?"object"==typeof pa&&0<Object.keys(pa).length||!1===pa:I.util.schemaHasRules(pa,I.RULES.all);(N+="var "+ia+" \x3d errors;var "+Ia+";",ba)?(Ia=I.compositeRule,I.compositeRule=xa.compositeRule=!0,xa.schema=pa,xa.schemaPath=ta,xa.errSchemaPath=Ca,N+=" var "+Fa+" \x3d false; for (var "+Ga+" \x3d 0; "+Ga+" \x3c "+
Da+".length; "+Ga+"++) { ",xa.errorPath=I.util.getPathExpr(I.errorPath,Ga,I.opts.jsonPointers,!0),pa=Da+"["+Ga+"]",xa.dataPathArr[Ra]=Ga,Ga=I.validate(xa),xa.baseId=fb,2>I.util.varOccurences(Ga,Xa)?N+=" "+I.util.varReplace(Ga,Xa,pa)+" ":N+=" var "+Xa+" \x3d "+pa+"; "+Ga+" ",I.compositeRule=xa.compositeRule=Ia,N=N+(" if ("+Fa+") break; }    if (!")+(Fa+") {")):N+=" if ("+Da+".length \x3d\x3d 0) {";var bb=bb||[];bb.push(N);N="";!1!==I.createErrors?(N+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+
I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ca)+" , params: {} ",!1!==I.opts.messages&&(N+=" , message: 'should contain a valid item' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ";ta=N;return N=bb.pop(),!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+ta+"]); ":N+=" validate.errors \x3d ["+ta+"]; return false; ":N+=" var err \x3d "+ta+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",
N+=" } else { ",ba&&(N+="  errors \x3d "+ia+"; if (vErrors !\x3d\x3d null) { if ("+ia+") vErrors.length \x3d "+ia+"; else vErrors \x3d null; } "),I.opts.allErrors&&(N+=" } "),N},dependencies:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T);T=I.errSchemaPath+"/"+T;var Ca=!I.opts.allErrors;ia="data"+(ia||"");var Da="errs__"+ba,Ia=I.util.copy(I),xa="";Ia.level++;var Fa="valid"+Ia.level,Ga={},Ra={},Xa=I.opts.ownProperties;for(jb in pa)if("__proto__"!=
jb){var fb=pa[jb],bb=Array.isArray(fb)?Ra:Ga;bb[jb]=fb}N+="var "+Da+" \x3d errors;";pa=I.errorPath;for(var jb in N+="var missing"+ba+";",Ra)if((bb=Ra[jb]).length){if(N+=" if ( "+ia+I.util.getProperty(jb)+" !\x3d\x3d undefined ",Xa&&(N+=" \x26\x26 Object.prototype.hasOwnProperty.call("+ia+", '"+I.util.escapeQuotes(jb)+"') "),Ca){N+=" \x26\x26 ( ";var qb=bb;if(qb)for(var Hb=-1,Bb=qb.length-1;Hb<Bb;)fb=qb[Hb+=1],Hb&&(N+=" || "),N+=" ( ( "+(ic=ia+(Lb=I.util.getProperty(fb)))+" \x3d\x3d\x3d undefined ",
Xa&&(N+=" || ! Object.prototype.hasOwnProperty.call("+ia+", '"+I.util.escapeQuotes(fb)+"') "),N+=") \x26\x26 (missing"+ba+" \x3d "+I.util.toQuotedString(I.opts.jsonPointers?fb:Lb)+") ) ";N+=")) {  ";fb="missing"+ba;qb="' + "+fb+" + '";I.opts._errorDataPathProperty&&(I.errorPath=I.opts.jsonPointers?I.util.getPathExpr(pa,fb,!0):pa+" + "+fb);var vb=vb||[];vb.push(N);N="";!1!==I.createErrors?(N+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+
" , params: { property: '"+I.util.escapeQuotes(jb)+"', missingProperty: '"+qb+"', depsCount: "+bb.length+", deps: '"+I.util.escapeQuotes(1==bb.length?bb[0]:bb.join(", "))+"' } ",!1!==I.opts.messages&&(N+=" , message: 'should have ",1==bb.length?N+="property "+I.util.escapeQuotes(bb[0]):N+="properties "+I.util.escapeQuotes(bb.join(", ")),N+=" when property "+I.util.escapeQuotes(jb)+" is present' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+
" , data: "+ia+" "),N+=" } "):N+=" {} ";bb=N;N=vb.pop();!I.compositeRule&&Ca?I.async?N+=" throw new ValidationError(["+bb+"]); ":N+=" validate.errors \x3d ["+bb+"]; return false; ":N+=" var err \x3d "+bb+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; "}else if(N+=" ) { ",Hb=bb){Bb=-1;for(var ec=Hb.length-1;Bb<ec;){fb=Hb[Bb+=1];var Lb=I.util.getProperty(fb),ic=(qb=I.util.escapeQuotes(fb),ia+Lb);I.opts._errorDataPathProperty&&(I.errorPath=I.util.getPath(pa,
fb,I.opts.jsonPointers));N+=" if ( "+ic+" \x3d\x3d\x3d undefined ";Xa&&(N+=" || ! Object.prototype.hasOwnProperty.call("+ia+", '"+I.util.escapeQuotes(fb)+"') ");N+=") {  var err \x3d   ";!1!==I.createErrors?(N+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { property: '"+I.util.escapeQuotes(jb)+"', missingProperty: '"+qb+"', depsCount: "+bb.length+", deps: '"+I.util.escapeQuotes(1==bb.length?bb[0]:bb.join(", "))+"' } ",
!1!==I.opts.messages&&(N+=" , message: 'should have ",1==bb.length?N+="property "+I.util.escapeQuotes(bb[0]):N+="properties "+I.util.escapeQuotes(bb.join(", ")),N+=" when property "+I.util.escapeQuotes(jb)+" is present' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+ia+" "),N+=" } "):N+=" {} ";N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; } "}}N+=" }   ";Ca&&(xa+="}",N+=" else { ")}I.errorPath=
pa;vb=Ia.baseId;for(jb in Ga)fb=Ga[jb],(I.opts.strictKeywords?"object"==typeof fb&&0<Object.keys(fb).length||!1===fb:I.util.schemaHasRules(fb,I.RULES.all))&&(N+=" "+Fa+" \x3d true; if ( "+ia+I.util.getProperty(jb)+" !\x3d\x3d undefined ",Xa&&(N+=" \x26\x26 Object.prototype.hasOwnProperty.call("+ia+", '"+I.util.escapeQuotes(jb)+"') "),N+=") { ",Ia.schema=fb,Ia.schemaPath=ta+I.util.getProperty(jb),Ia.errSchemaPath=T+"/"+I.util.escapeFragment(jb),N+="  "+I.validate(Ia)+" ",Ia.baseId=vb,N+=" }  ",Ca&&
(N+=" if ("+Fa+") { ",xa+="}"));return Ca&&(N+="   "+xa+" if ("+Da+" \x3d\x3d errors) {"),N},enum:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T),Ca=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;var Da="data"+(ia||""),Ia="valid"+ba,xa=I.opts.$data&&pa&&pa.$data;xa&&(N+=" var schema"+ba+" \x3d "+I.util.getData(pa.$data,ia,I.dataPathArr)+"; ");ia="i"+ba;pa="schema"+ba;xa||(N+=" var "+pa+" \x3d validate.schema"+ta+";");N+="var "+Ia+";";xa&&(N+=" if (schema"+
ba+" \x3d\x3d\x3d undefined) "+Ia+" \x3d true; else if (!Array.isArray(schema"+ba+")) "+Ia+" \x3d false; else {");N+=Ia+" \x3d false;for (var "+ia+"\x3d0; "+ia+"\x3c"+pa+".length; "+ia+"++) if (equal("+Da+", "+pa+"["+ia+"])) { "+Ia+" \x3d true; break; }";xa&&(N+="  }  ");var Fa=Fa||[];Fa.push(N+(" if (!"+Ia+") {   "));N="";!1!==I.createErrors?(N+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ca)+" , params: { allowedValues: schema"+ba+" } ",
!1!==I.opts.messages&&(N+=" , message: 'should be equal to one of the allowed values' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ";ba=N;return N=Fa.pop(),!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+ba+"]); ":N+=" validate.errors \x3d ["+ba+"]; return false; ":N+=" var err \x3d "+ba+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",N+=" }",T&&
(N+=" else { "),N},format:function(I,T,N){var ba=" ",ia=I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;var Ia="data"+(pa||"");if(!1===I.opts.format)return T&&(ba+=" if (true) { "),ba;var xa,Fa=I.opts.$data&&ta&&ta.$data;Fa?(ba+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,pa,I.dataPathArr)+"; ",xa="schema"+ia):xa=ta;pa=I.opts.unknownFormats;var Ga=Array.isArray(pa);if(Fa)ba+=" var "+(Ra="format"+ia)+" \x3d formats["+xa+
"]; var "+(Xa="isObject"+ia)+" \x3d typeof "+Ra+" \x3d\x3d 'object' \x26\x26 !("+Ra+" instanceof RegExp) \x26\x26 "+Ra+".validate; var "+(fb="formatType"+ia)+" \x3d "+Xa+" \x26\x26 "+Ra+".type || 'string'; if ("+Xa+") { ",I.async&&(ba+=" var async"+ia+" \x3d "+Ra+".async; "),ba+=" "+Ra+" \x3d "+Ra+".validate; } if (  ",Fa&&(ba+=" ("+xa+" !\x3d\x3d undefined \x26\x26 typeof "+xa+" !\x3d 'string') || "),ba+=" (","ignore"!=pa&&(ba+=" ("+xa+" \x26\x26 !"+Ra+" ",Ga&&(ba+=" \x26\x26 self._opts.unknownFormats.indexOf("+
xa+") \x3d\x3d -1 "),ba+=") || "),ba+=" ("+Ra+" \x26\x26 "+fb+" \x3d\x3d '"+N+"' \x26\x26 !(typeof "+Ra+" \x3d\x3d 'function' ? ",I.async?ba+=" (async"+ia+" ? await "+Ra+"("+Ia+") : "+Ra+"("+Ia+")) ":ba+=" "+Ra+"("+Ia+") ",ba+=" : "+Ra+".test("+Ia+"))))) {";else{var Ra;if(!(Ra=I.formats[ta])){if("ignore"==pa)return I.logger.warn('unknown format "'+ta+'" ignored in schema at path "'+I.errSchemaPath+'"'),T&&(ba+=" if (true) { "),ba;if(Ga&&0<=pa.indexOf(ta))return T&&(ba+=" if (true) { "),ba;throw Error('unknown format "'+
ta+'" is used in schema at path "'+I.errSchemaPath+'"');}var Xa,fb=(Xa="object"==typeof Ra&&!(Ra instanceof RegExp)&&Ra.validate)&&Ra.type||"string";if(Xa){var bb=!0===Ra.async;Ra=Ra.validate}if(fb!=N)return T&&(ba+=" if (true) { "),ba;if(bb){if(!I.async)throw Error("async format in sync schema");ba+=" if (!(await "+(N="formats"+I.util.getProperty(ta)+".validate")+"("+Ia+"))) { "}else ba+=" if (! ",N="formats"+I.util.getProperty(ta),Xa&&(N+=".validate"),ba=ba+("function"==typeof Ra?" "+N+"("+Ia+") ":
" "+N+".test("+Ia+") ")+") { "}var jb=jb||[];jb.push(ba);ba="";!1!==I.createErrors?(ba+=" { keyword: 'format' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { format:  ",ba+=Fa?""+xa:""+I.util.toQuotedString(ta),ba+="  } ",!1!==I.opts.messages&&(ba+=" , message: 'should match format \"",ba+=Fa?"' + "+xa+" + '":""+I.util.escapeQuotes(ta),ba+="\"' "),I.opts.verbose&&(ba+=" , schema:  ",ba+=Fa?"validate.schema"+Ca:""+I.util.toQuotedString(ta),ba+=
"         , parentSchema: validate.schema"+I.schemaPath+" , data: "+Ia+" "),ba+=" } "):ba+=" {} ";ta=ba;return ba=jb.pop(),!I.compositeRule&&T?I.async?ba+=" throw new ValidationError(["+ta+"]); ":ba+=" validate.errors \x3d ["+ta+"]; return false; ":ba+=" var err \x3d "+ta+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",ba+=" } ",T&&(ba+=" else { "),ba},if:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T);
T=I.errSchemaPath+"/"+T;var Ca=!I.opts.allErrors;ia="data"+(ia||"");var Da="valid"+ba,Ia="errs__"+ba,xa=I.util.copy(I);xa.level++;var Fa="valid"+xa.level,Ga=I.schema.then,Ra=I.schema.else;Ga=void 0!==Ga&&(I.opts.strictKeywords?"object"==typeof Ga&&0<Object.keys(Ga).length||!1===Ga:I.util.schemaHasRules(Ga,I.RULES.all));Ra=void 0!==Ra&&(I.opts.strictKeywords?"object"==typeof Ra&&0<Object.keys(Ra).length||!1===Ra:I.util.schemaHasRules(Ra,I.RULES.all));var Xa=xa.baseId;if(Ga||Ra){var fb;xa.createErrors=
!1;xa.schema=pa;xa.schemaPath=ta;xa.errSchemaPath=T;pa=I.compositeRule;I.compositeRule=xa.compositeRule=!0;N=N+(" var "+Ia+" \x3d errors; var "+Da+" \x3d true;    ")+(I.validate(xa)+" ");xa.baseId=Xa;xa.createErrors=!0;N+="  errors \x3d "+Ia+"; if (vErrors !\x3d\x3d null) { if ("+Ia+") vErrors.length \x3d "+Ia+"; else vErrors \x3d null; }  ";I.compositeRule=xa.compositeRule=pa;Ga?(N+=" if ("+Fa+") {  ",xa.schema=I.schema.then,xa.schemaPath=I.schemaPath+".then",xa.errSchemaPath=I.errSchemaPath+"/then",
N+="  "+I.validate(xa)+" ",xa.baseId=Xa,N+=" "+Da+" \x3d "+Fa+"; ",Ga&&Ra?N+=" var "+(fb="ifClause"+ba)+" \x3d 'then'; ":fb="'then'",N+=" } ",Ra&&(N+=" else { ")):N+=" if (!"+Fa+") { ";Ra&&(xa.schema=I.schema.else,xa.schemaPath=I.schemaPath+".else",xa.errSchemaPath=I.errSchemaPath+"/else",N+="  "+I.validate(xa)+" ",xa.baseId=Xa,N+=" "+Da+" \x3d "+Fa+"; ",Ga&&Ra?N+=" var "+(fb="ifClause"+ba)+" \x3d 'else'; ":fb="'else'",N+=" } ");N+=" if (!"+Da+") {   var err \x3d   ";!1!==I.createErrors?(N+=" { keyword: 'if' , dataPath: (dataPath || '') + "+
I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { failingKeyword: "+fb+" } ",!1!==I.opts.messages&&(N+=" , message: 'should match \"' + "+fb+" + '\" schema' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+ia+" "),N+=" } "):N+=" {} ";N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";!I.compositeRule&&Ca&&(I.async?N+=" throw new ValidationError(vErrors); ":N+=" validate.errors \x3d vErrors; return false; ");
N+=" }   ";Ca&&(N+=" else { ")}else Ca&&(N+=" if (true) { ");return N},items:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T),Ca=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;ia="data"+(ia||"");var Da="valid"+ba,Ia="errs__"+ba,xa=I.util.copy(I),Fa="";xa.level++;var Ga="valid"+xa.level;ba="i"+ba;var Ra=xa.dataLevel=I.dataLevel+1,Xa="data"+Ra,fb=I.baseId;if(N+="var "+Ia+" \x3d errors;var "+Da+";",Array.isArray(pa)){var bb=I.schema.additionalItems;
if(!1===bb){N+=" "+Da+" \x3d "+ia+".length \x3c\x3d "+pa.length+"; ";var jb=Ca;Ca=I.errSchemaPath+"/additionalItems";var qb=qb||[];qb.push(N+("  if (!"+Da+") {   "));N="";!1!==I.createErrors?(N+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ca)+" , params: { limit: "+pa.length+" } ",!1!==I.opts.messages&&(N+=" , message: 'should NOT have more than "+pa.length+" items' "),I.opts.verbose&&(N+=" , schema: false , parentSchema: validate.schema"+
I.schemaPath+" , data: "+ia+" "),N+=" } "):N+=" {} ";Ca=N;N=qb.pop();!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+Ca+"]); ":N+=" validate.errors \x3d ["+Ca+"]; return false; ":N+=" var err \x3d "+Ca+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";N+=" } ";Ca=jb;T&&(Fa+="}",N+=" else { ")}if(pa){var Hb;qb=-1;for(Da=pa.length-1;qb<Da;)if(Hb=pa[qb+=1],I.opts.strictKeywords?"object"==typeof Hb&&0<Object.keys(Hb).length||!1===Hb:I.util.schemaHasRules(Hb,
I.RULES.all)){N+=" "+Ga+" \x3d true; if ("+ia+".length \x3e "+qb+") { ";jb=ia+"["+qb+"]";xa.schema=Hb;xa.schemaPath=ta+"["+qb+"]";xa.errSchemaPath=Ca+"/"+qb;xa.errorPath=I.util.getPathExpr(I.errorPath,qb,I.opts.jsonPointers,!0);xa.dataPathArr[Ra]=qb;var Bb=I.validate(xa);xa.baseId=fb;2>I.util.varOccurences(Bb,Xa)?N+=" "+I.util.varReplace(Bb,Xa,jb)+" ":N+=" var "+Xa+" \x3d "+jb+"; "+Bb+" ";N+=" }  ";T&&(N+=" if ("+Ga+") { ",Fa+="}")}}"object"==typeof bb&&(I.opts.strictKeywords?"object"==typeof bb&&
0<Object.keys(bb).length||!1===bb:I.util.schemaHasRules(bb,I.RULES.all))&&(xa.schema=bb,xa.schemaPath=I.schemaPath+".additionalItems",xa.errSchemaPath=I.errSchemaPath+"/additionalItems",N+=" "+Ga+" \x3d true; if ("+ia+".length \x3e "+pa.length+") {  for (var "+ba+" \x3d "+pa.length+"; "+ba+" \x3c "+ia+".length; "+ba+"++) { ",xa.errorPath=I.util.getPathExpr(I.errorPath,ba,I.opts.jsonPointers,!0),jb=ia+"["+ba+"]",xa.dataPathArr[Ra]=ba,Bb=I.validate(xa),xa.baseId=fb,2>I.util.varOccurences(Bb,Xa)?N+=
" "+I.util.varReplace(Bb,Xa,jb)+" ":N+=" var "+Xa+" \x3d "+jb+"; "+Bb+" ",T&&(N+=" if (!"+Ga+") break; "),N+=" } }  ",T&&(N+=" if ("+Ga+") { ",Fa+="}"))}else if(I.opts.strictKeywords?"object"==typeof pa&&0<Object.keys(pa).length||!1===pa:I.util.schemaHasRules(pa,I.RULES.all))xa.schema=pa,xa.schemaPath=ta,xa.errSchemaPath=Ca,N+="  for (var "+ba+" \x3d 0; "+ba+" \x3c "+ia+".length; "+ba+"++) { ",xa.errorPath=I.util.getPathExpr(I.errorPath,ba,I.opts.jsonPointers,!0),jb=ia+"["+ba+"]",xa.dataPathArr[Ra]=
ba,Bb=I.validate(xa),xa.baseId=fb,2>I.util.varOccurences(Bb,Xa)?N+=" "+I.util.varReplace(Bb,Xa,jb)+" ":N+=" var "+Xa+" \x3d "+jb+"; "+Bb+" ",T&&(N+=" if (!"+Ga+") break; "),N+=" }";return T&&(N+=" "+Fa+" if ("+Ia+" \x3d\x3d errors) {"),N},maximum:zh,minimum:zh,maxItems:Ah,minItems:Ah,maxLength:Bh,minLength:Bh,maxProperties:Ch,minProperties:Ch,multipleOf:function(I,T,N){var ba;N=" ";var ia=I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T,Ia=!I.opts.allErrors,
xa="data"+(pa||""),Fa=I.opts.$data&&ta&&ta.$data;if(Fa?(N+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,pa,I.dataPathArr)+"; ",ba="schema"+ia):ba=ta,!Fa&&"number"!=typeof ta)throw Error(T+" must be number");N+="var division"+ia+";if (";Fa&&(N+=" "+ba+" !\x3d\x3d undefined \x26\x26 ( typeof "+ba+" !\x3d 'number' || ");N+=" (division"+ia+" \x3d "+xa+" / "+ba+", ";I.opts.multipleOfPrecision?N+=" Math.abs(Math.round(division"+ia+") - division"+ia+") \x3e 1e-"+I.opts.multipleOfPrecision+" ":N+=" division"+
ia+" !\x3d\x3d parseInt(division"+ia+") ";N+=" ) ";Fa&&(N+="  )  ");var Ga=Ga||[];Ga.push(N+" ) {   ");N="";!1!==I.createErrors?(N+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { multipleOf: "+ba+" } ",!1!==I.opts.messages&&(N+=" , message: 'should be multiple of ",N+=Fa?"' + "+ba:ba+"'"),I.opts.verbose&&(N+=" , schema:  ",N+=Fa?"validate.schema"+Ca:""+ta,N+="         , parentSchema: validate.schema"+I.schemaPath+" , data: "+
xa+" "),N+=" } "):N+=" {} ";T=N;return N=Ga.pop(),!I.compositeRule&&Ia?I.async?N+=" throw new ValidationError(["+T+"]); ":N+=" validate.errors \x3d ["+T+"]; return false; ":N+=" var err \x3d "+T+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",N+="} ",Ia&&(N+=" else { "),N},not:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T),Ca=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;ia="data"+(ia||"");ba="errs__"+
ba;var Da=I.util.copy(I);Da.level++;var Ia="valid"+Da.level;if(I.opts.strictKeywords?"object"==typeof pa&&0<Object.keys(pa).length||!1===pa:I.util.schemaHasRules(pa,I.RULES.all)){Da.schema=pa;Da.schemaPath=ta;Da.errSchemaPath=Ca;var xa;pa=I.compositeRule;I.compositeRule=Da.compositeRule=!0;Da.createErrors=!1;Da.opts.allErrors&&(xa=Da.opts.allErrors,Da.opts.allErrors=!1);N=N+(" var "+ba+" \x3d errors;   ")+(I.validate(Da)+" ");Da.createErrors=!0;xa&&(Da.opts.allErrors=xa);I.compositeRule=Da.compositeRule=
pa;N+=" if ("+Ia+") {   ";var Fa=Fa||[];Fa.push(N);N="";!1!==I.createErrors?(N+=" { keyword: 'not' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ca)+" , params: {} ",!1!==I.opts.messages&&(N+=" , message: 'should NOT be valid' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+ia+" "),N+=" } "):N+=" {} ";xa=N;N=Fa.pop();!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+xa+"]); ":N+=" validate.errors \x3d ["+
xa+"]; return false; ":N+=" var err \x3d "+xa+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";N+=" } else {  errors \x3d "+ba+"; if (vErrors !\x3d\x3d null) { if ("+ba+") vErrors.length \x3d "+ba+"; else vErrors \x3d null; } ";I.opts.allErrors&&(N+=" } ")}else N+="  var err \x3d   ",!1!==I.createErrors?(N+=" { keyword: 'not' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Ca)+" , params: {} ",!1!==I.opts.messages&&(N+=
" , message: 'should NOT be valid' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+ia+" "),N+=" } "):N+=" {} ",N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",T&&(N+=" if (false) { ");return N},oneOf:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T);T=I.errSchemaPath+"/"+T;var Ca=!I.opts.allErrors;ia="data"+(ia||"");var Da="valid"+
ba,Ia="errs__"+ba,xa=I.util.copy(I),Fa="";xa.level++;var Ga="valid"+xa.level,Ra=xa.baseId,Xa="prevValid"+ba;ba="passingSchemas"+ba;N+="var "+Ia+" \x3d errors , "+Xa+" \x3d false , "+Da+" \x3d false , "+ba+" \x3d null; ";var fb=I.compositeRule;I.compositeRule=xa.compositeRule=!0;if(pa)for(var bb,jb=-1,qb=pa.length-1;jb<qb;)bb=pa[jb+=1],(I.opts.strictKeywords?"object"==typeof bb&&0<Object.keys(bb).length||!1===bb:I.util.schemaHasRules(bb,I.RULES.all))?(xa.schema=bb,xa.schemaPath=ta+"["+jb+"]",xa.errSchemaPath=
T+"/"+jb,N+="  "+I.validate(xa)+" ",xa.baseId=Ra):N+=" var "+Ga+" \x3d true; ",jb&&(N+=" if ("+Ga+" \x26\x26 "+Xa+") { "+Da+" \x3d false; "+ba+" \x3d ["+ba+", "+jb+"]; } else { ",Fa+="}"),N+=" if ("+Ga+") { "+Da+" \x3d "+Xa+" \x3d true; "+ba+" \x3d "+jb+"; }";return I.compositeRule=xa.compositeRule=fb,N+=Fa+"if (!"+Da+") {   var err \x3d   ",!1!==I.createErrors?(N+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { passingSchemas: "+
ba+" } ",!1!==I.opts.messages&&(N+=" , message: 'should match exactly one schema in oneOf' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+ia+" "),N+=" } "):N+=" {} ",N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",!I.compositeRule&&Ca&&(I.async?N+=" throw new ValidationError(vErrors); ":N+=" validate.errors \x3d vErrors; return false; "),N+="} else {  errors \x3d "+Ia+"; if (vErrors !\x3d\x3d null) { if ("+
Ia+") vErrors.length \x3d "+Ia+"; else vErrors \x3d null; }",I.opts.allErrors&&(N+=" } "),N},pattern:function(I,T,N){var ba;N=" ";var ia=I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;var Ia="data"+(pa||""),xa=I.opts.$data&&ta&&ta.$data;xa?(N+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,pa,I.dataPathArr)+"; ",ba="schema"+ia):ba=ta;N+="if ( ";xa&&(N+=" ("+ba+" !\x3d\x3d undefined \x26\x26 typeof "+ba+" !\x3d 'string') || ");
N+=" !"+(xa?"(new RegExp("+ba+"))":I.usePattern(ta))+".test("+Ia+") ) {   ";var Fa=Fa||[];Fa.push(N);N="";!1!==I.createErrors?(N+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { pattern:  ",N+=xa?""+ba:""+I.util.toQuotedString(ta),N+="  } ",!1!==I.opts.messages&&(N+=" , message: 'should match pattern \"",N+=xa?"' + "+ba+" + '":""+I.util.escapeQuotes(ta),N+="\"' "),I.opts.verbose&&(N+=" , schema:  ",N+=xa?"validate.schema"+
Ca:""+I.util.toQuotedString(ta),N+="         , parentSchema: validate.schema"+I.schemaPath+" , data: "+Ia+" "),N+=" } "):N+=" {} ";ba=N;return N=Fa.pop(),!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+ba+"]); ":N+=" validate.errors \x3d ["+ba+"]; return false; ":N+=" var err \x3d "+ba+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",N+="} ",T&&(N+=" else { "),N},properties:function(I,T,N){function ba(Yc){return"__proto__"!==Yc}N=" ";var ia=
I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;pa="data"+(pa||"");var Ia="errs__"+ia,xa=I.util.copy(I),Fa="";xa.level++;var Ga="valid"+xa.level,Ra="key"+ia,Xa="idx"+ia,fb=xa.dataLevel=I.dataLevel+1,bb="data"+fb,jb="dataProperties"+ia,qb=Object.keys(ta||{}).filter(ba),Hb=I.schema.patternProperties||{},Bb=Object.keys(Hb).filter(ba),vb=I.schema.additionalProperties,ec=qb.length||Bb.length,Lb=!1===vb,ic="object"==typeof vb&&Object.keys(vb).length,
jc=I.opts.removeAdditional,Ob=Lb||ic||jc,qc=I.opts.ownProperties,Xb=I.baseId,Pb=I.schema.required;if(Pb&&(!I.opts.$data||!Pb.$data)&&Pb.length<I.opts.loopRequired)var mc=I.util.toHash(Pb);if(N+="var "+Ia+" \x3d errors;var "+Ga+" \x3d true;",qc&&(N+=" var "+jb+" \x3d undefined;"),Ob){if(N+=qc?" "+jb+" \x3d "+jb+" || Object.keys("+pa+"); for (var "+Xa+"\x3d0; "+Xa+"\x3c"+jb+".length; "+Xa+"++) { var "+Ra+" \x3d "+jb+"["+Xa+"]; ":" for (var "+Ra+" in "+pa+") { ",ec){if(N+=" var isAdditional"+ia+" \x3d !(false ",
qb.length)if(8<qb.length)N+=" || validate.schema"+Ca+".hasOwnProperty("+Ra+") ";else if(qb){Pb=-1;for(var Fc=qb.length-1;Pb<Fc;)Ob=qb[Pb+=1],N+=" || "+Ra+" \x3d\x3d "+I.util.toQuotedString(Ob)+" "}if(Bb.length&&Bb)for(Pb=-1,Fc=Bb.length-1;Pb<Fc;)Ob=Bb[Pb+=1],N+=" || "+I.usePattern(Ob)+".test("+Ra+") ";N+=" ); if (isAdditional"+ia+") { "}"all"==jc?N+=" delete "+pa+"["+Ra+"]; ":(ia=I.errorPath,Ob="' + "+Ra+" + '",(I.opts._errorDataPathProperty&&(I.errorPath=I.util.getPathExpr(I.errorPath,Ra,I.opts.jsonPointers)),
Lb)?jc?N+=" delete "+pa+"["+Ra+"]; ":(Lb=Da,Da=I.errSchemaPath+"/additionalProperties",(hc=hc||[]).push(N+(" "+Ga+" \x3d false; ")),N="",!1!==I.createErrors?(N+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { additionalProperty: '"+Ob+"' } ",!1!==I.opts.messages&&(N+=" , message: '",I.opts._errorDataPathProperty?N+="is an invalid additional property":N+="should NOT have additional properties",N+="' "),I.opts.verbose&&
(N+=" , schema: false , parentSchema: validate.schema"+I.schemaPath+" , data: "+pa+" "),N+=" } "):N+=" {} ",Da=N,N=hc.pop(),!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+Da+"]); ":N+=" validate.errors \x3d ["+Da+"]; return false; ":N+=" var err \x3d "+Da+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",Da=Lb,T&&(N+=" break; ")):ic&&("failing"==jc?(N+=" var "+Ia+" \x3d errors;  ",Ob=I.compositeRule,I.compositeRule=xa.compositeRule=!0,xa.schema=
vb,xa.schemaPath=I.schemaPath+".additionalProperties",xa.errSchemaPath=I.errSchemaPath+"/additionalProperties",xa.errorPath=I.opts._errorDataPathProperty?I.errorPath:I.util.getPathExpr(I.errorPath,Ra,I.opts.jsonPointers),Lb=pa+"["+Ra+"]",xa.dataPathArr[fb]=Ra,vb=I.validate(xa),xa.baseId=Xb,2>I.util.varOccurences(vb,bb)?N+=" "+I.util.varReplace(vb,bb,Lb)+" ":N+=" var "+bb+" \x3d "+Lb+"; "+vb+" ",N+=" if (!"+Ga+") { errors \x3d "+Ia+"; if (validate.errors !\x3d\x3d null) { if (errors) validate.errors.length \x3d errors; else validate.errors \x3d null; } delete "+
pa+"["+Ra+"]; }  ",I.compositeRule=xa.compositeRule=Ob):(xa.schema=vb,xa.schemaPath=I.schemaPath+".additionalProperties",xa.errSchemaPath=I.errSchemaPath+"/additionalProperties",xa.errorPath=I.opts._errorDataPathProperty?I.errorPath:I.util.getPathExpr(I.errorPath,Ra,I.opts.jsonPointers),Lb=pa+"["+Ra+"]",xa.dataPathArr[fb]=Ra,vb=I.validate(xa),xa.baseId=Xb,2>I.util.varOccurences(vb,bb)?N+=" "+I.util.varReplace(vb,bb,Lb)+" ":N+=" var "+bb+" \x3d "+Lb+"; "+vb+" ",T&&(N+=" if (!"+Ga+") break; "))),I.errorPath=
ia);ec&&(N+=" } ");N+=" }  ";T&&(N+=" if ("+Ga+") { ",Fa+="}")}ec=I.opts.useDefaults&&!I.compositeRule;if(qb.length&&qb)for(ic=-1,jc=qb.length-1;ic<jc;){vb=ta[Ob=qb[ic+=1]];if(I.opts.strictKeywords?"object"==typeof vb&&0<Object.keys(vb).length||!1===vb:I.util.schemaHasRules(vb,I.RULES.all))if(Pb=I.util.getProperty(Ob),ia=(Lb=pa+Pb,ec&&void 0!==vb.default),xa.schema=vb,xa.schemaPath=Ca+Pb,xa.errSchemaPath=Da+"/"+I.util.escapeFragment(Ob),xa.errorPath=I.util.getPath(I.errorPath,Ob,I.opts.jsonPointers),
xa.dataPathArr[fb]=I.util.toQuotedString(Ob),vb=I.validate(xa),(xa.baseId=Xb,2>I.util.varOccurences(vb,bb))?(vb=I.util.varReplace(vb,bb,Lb),Pb=Lb):(Pb=bb,N+=" var "+bb+" \x3d "+Lb+"; "),ia)N+=" "+vb+" ";else{if(mc&&mc[Ob]){N+=" if ( "+Pb+" \x3d\x3d\x3d undefined ";qc&&(N+=" || ! Object.prototype.hasOwnProperty.call("+pa+", '"+I.util.escapeQuotes(Ob)+"') ");N+=") { "+Ga+" \x3d false; ";ia=I.errorPath;Lb=Da;var hc;Pb=I.util.escapeQuotes(Ob);I.opts._errorDataPathProperty&&(I.errorPath=I.util.getPath(ia,
Ob,I.opts.jsonPointers));Da=I.errSchemaPath+"/required";(hc=hc||[]).push(N);N="";!1!==I.createErrors?(N+=" { keyword: 'required' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { missingProperty: '"+Pb+"' } ",!1!==I.opts.messages&&(N+=" , message: '",I.opts._errorDataPathProperty?N+="is a required property":N+="should have required property \\'"+Pb+"\\'",N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+Ca+" , parentSchema: validate.schema"+
I.schemaPath+" , data: "+pa+" "),N+=" } "):N+=" {} ";Da=N;N=hc.pop();!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+Da+"]); ":N+=" validate.errors \x3d ["+Da+"]; return false; ":N+=" var err \x3d "+Da+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";Da=Lb;I.errorPath=ia;N+=" } else { "}else T?(N+=" if ( "+Pb+" \x3d\x3d\x3d undefined ",qc&&(N+=" || ! Object.prototype.hasOwnProperty.call("+pa+", '"+I.util.escapeQuotes(Ob)+"') "),N+=") { "+Ga+
" \x3d true; } else { "):(N+=" if ("+Pb+" !\x3d\x3d undefined ",qc&&(N+=" \x26\x26   Object.prototype.hasOwnProperty.call("+pa+", '"+I.util.escapeQuotes(Ob)+"') "),N+=" ) { ");N+=" "+vb+" } "}T&&(N+=" if ("+Ga+") { ",Fa+="}")}if(Bb.length&&Bb)for(mc=-1,hc=Bb.length-1;mc<hc;)if(vb=Hb[Ob=Bb[mc+=1]],I.opts.strictKeywords?"object"==typeof vb&&0<Object.keys(vb).length||!1===vb:I.util.schemaHasRules(vb,I.RULES.all))xa.schema=vb,xa.schemaPath=I.schemaPath+".patternProperties"+I.util.getProperty(Ob),xa.errSchemaPath=
I.errSchemaPath+"/patternProperties/"+I.util.escapeFragment(Ob),N+=qc?" "+jb+" \x3d "+jb+" || Object.keys("+pa+"); for (var "+Xa+"\x3d0; "+Xa+"\x3c"+jb+".length; "+Xa+"++) { var "+Ra+" \x3d "+jb+"["+Xa+"]; ":" for (var "+Ra+" in "+pa+") { ",N+=" if ("+I.usePattern(Ob)+".test("+Ra+")) { ",xa.errorPath=I.util.getPathExpr(I.errorPath,Ra,I.opts.jsonPointers),Lb=pa+"["+Ra+"]",xa.dataPathArr[fb]=Ra,vb=I.validate(xa),xa.baseId=Xb,2>I.util.varOccurences(vb,bb)?N+=" "+I.util.varReplace(vb,bb,Lb)+" ":N+=" var "+
bb+" \x3d "+Lb+"; "+vb+" ",T&&(N+=" if (!"+Ga+") break; "),N+=" } ",T&&(N+=" else "+Ga+" \x3d true; "),N+=" }  ",T&&(N+=" if ("+Ga+") { ",Fa+="}");return T&&(N+=" "+Fa+" if ("+Ia+" \x3d\x3d errors) {"),N},propertyNames:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T);T=I.errSchemaPath+"/"+T;var Ca=!I.opts.allErrors;ia="data"+(ia||"");var Da="errs__"+ba,Ia=I.util.copy(I);Ia.level++;var xa="valid"+Ia.level;if(N+="var "+Da+" \x3d errors;",I.opts.strictKeywords?
"object"==typeof pa&&0<Object.keys(pa).length||!1===pa:I.util.schemaHasRules(pa,I.RULES.all)){Ia.schema=pa;Ia.schemaPath=ta;Ia.errSchemaPath=T;pa="key"+ba;var Fa="idx"+ba,Ga="i"+ba,Ra="' + "+pa+" + '",Xa="data"+(Ia.dataLevel=I.dataLevel+1),fb="dataProperties"+ba,bb=I.opts.ownProperties,jb=I.baseId;bb&&(N+=" var "+fb+" \x3d undefined; ");N=N+(bb?" "+fb+" \x3d "+fb+" || Object.keys("+ia+"); for (var "+Fa+"\x3d0; "+Fa+"\x3c"+fb+".length; "+Fa+"++) { var "+pa+" \x3d "+fb+"["+Fa+"]; ":" for (var "+pa+
" in "+ia+") { ")+(" var startErrs"+ba+" \x3d errors; ");Fa=I.compositeRule;I.compositeRule=Ia.compositeRule=!0;fb=I.validate(Ia);Ia.baseId=jb;2>I.util.varOccurences(fb,Xa)?N+=" "+I.util.varReplace(fb,Xa,pa)+" ":N+=" var "+Xa+" \x3d "+pa+"; "+fb+" ";I.compositeRule=Ia.compositeRule=Fa;N+=" if (!"+xa+") { for (var "+Ga+"\x3dstartErrs"+ba+"; "+Ga+"\x3cerrors; "+Ga+"++) { vErrors["+Ga+"].propertyName \x3d "+pa+"; }   var err \x3d   ";!1!==I.createErrors?(N+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+
I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { propertyName: '"+Ra+"' } ",!1!==I.opts.messages&&(N+=" , message: 'property name \\'"+Ra+"\\' is invalid' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+ia+" "),N+=" } "):N+=" {} ";N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";!I.compositeRule&&Ca&&(I.async?N+=" throw new ValidationError(vErrors); ":N+=" validate.errors \x3d vErrors; return false; ");
Ca&&(N+=" break; ");N+=" } }"}return Ca&&(N+="  if ("+Da+" \x3d\x3d errors) {"),N},required:function(I,T,N){N=" ";var ba=I.level,ia=I.dataLevel,pa=I.schema[T],ta=I.schemaPath+I.util.getProperty(T);T=I.errSchemaPath+"/"+T;var Ca=!I.opts.allErrors,Da="data"+(ia||""),Ia="valid"+ba,xa=I.opts.$data&&pa&&pa.$data;xa&&(N+=" var schema"+ba+" \x3d "+I.util.getData(pa.$data,ia,I.dataPathArr)+"; ");var Fa="schema"+ba;if(!xa)if(pa.length<I.opts.loopRequired&&I.schema.properties&&Object.keys(I.schema.properties).length){var Ga=
[];if(pa)for(var Ra=-1,Xa=pa.length-1;Ra<Xa;){ia=pa[Ra+=1];var fb=I.schema.properties[ia];fb&&(I.opts.strictKeywords?"object"==typeof fb&&0<Object.keys(fb).length||!1===fb:I.util.schemaHasRules(fb,I.RULES.all))||(Ga[Ga.length]=ia)}}else Ga=pa;if(xa||Ga.length){pa=I.errorPath;Ra=xa||Ga.length>=I.opts.loopRequired;ia=I.opts.ownProperties;if(Ca){if(N+=" var missing"+ba+"; ",Ra)xa||(N+=" var "+Fa+" \x3d validate.schema"+ta+"; "),Ga="' + "+(Xa="schema"+ba+"["+(Ra="i"+ba)+"]")+" + '",I.opts._errorDataPathProperty&&
(I.errorPath=I.util.getPathExpr(pa,Xa,I.opts.jsonPointers)),N+=" var "+Ia+" \x3d true; ",xa&&(N+=" if (schema"+ba+" \x3d\x3d\x3d undefined) "+Ia+" \x3d true; else if (!Array.isArray(schema"+ba+")) "+Ia+" \x3d false; else {"),N+=" for (var "+Ra+" \x3d 0; "+Ra+" \x3c "+Fa+".length; "+Ra+"++) { "+Ia+" \x3d "+Da+"["+Fa+"["+Ra+"]] !\x3d\x3d undefined ",ia&&(N+=" \x26\x26   Object.prototype.hasOwnProperty.call("+Da+", "+Fa+"["+Ra+"]) "),N+="; if (!"+Ia+") break; } ",xa&&(N+="  }  "),(bb=bb||[]).push(N+
("  if (!"+Ia+") {   ")),N="",!1!==I.createErrors?(N+=" { keyword: 'required' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { missingProperty: '"+Ga+"' } ",!1!==I.opts.messages&&(N+=" , message: '",I.opts._errorDataPathProperty?N+="is a required property":N+="should have required property \\'"+Ga+"\\'",N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ",
ta=N;else{N+=" if ( ";if(Ga)for(Ra=-1,Xa=Ga.length-1;Ra<Xa;)Ia=Ga[Ra+=1],Ra&&(N+=" || "),N+=" ( ( "+(Fa=Da+(xa=I.util.getProperty(Ia)))+" \x3d\x3d\x3d undefined ",ia&&(N+=" || ! Object.prototype.hasOwnProperty.call("+Da+", '"+I.util.escapeQuotes(Ia)+"') "),N+=") \x26\x26 (missing"+ba+" \x3d "+I.util.toQuotedString(I.opts.jsonPointers?Ia:xa)+") ) ";N+=") {  ";var bb;Ga="' + "+(Xa="missing"+ba)+" + '";I.opts._errorDataPathProperty&&(I.errorPath=I.opts.jsonPointers?I.util.getPathExpr(pa,Xa,!0):pa+" + "+
Xa);(bb=bb||[]).push(N);N="";!1!==I.createErrors?(N+=" { keyword: 'required' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { missingProperty: '"+Ga+"' } ",!1!==I.opts.messages&&(N+=" , message: '",I.opts._errorDataPathProperty?N+="is a required property":N+="should have required property \\'"+Ga+"\\'",N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ";
ta=N}N=bb.pop();!I.compositeRule&&Ca?I.async?N+=" throw new ValidationError(["+ta+"]); ":N+=" validate.errors \x3d ["+ta+"]; return false; ":N+=" var err \x3d "+ta+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";N+=" } else { "}else if(Ra)xa||(N+=" var "+Fa+" \x3d validate.schema"+ta+"; "),Ga="' + "+(Xa="schema"+ba+"["+(Ra="i"+ba)+"]")+" + '",I.opts._errorDataPathProperty&&(I.errorPath=I.util.getPathExpr(pa,Xa,I.opts.jsonPointers)),xa&&(N+=" if ("+Fa+" \x26\x26 !Array.isArray("+
Fa+")) {  var err \x3d   ",!1!==I.createErrors?(N+=" { keyword: 'required' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { missingProperty: '"+Ga+"' } ",!1!==I.opts.messages&&(N+=" , message: '",I.opts._errorDataPathProperty?N+="is a required property":N+="should have required property \\'"+Ga+"\\'",N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ",
N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; } else if ("+Fa+" !\x3d\x3d undefined) { "),N+=" for (var "+Ra+" \x3d 0; "+Ra+" \x3c "+Fa+".length; "+Ra+"++) { if ("+Da+"["+Fa+"["+Ra+"]] \x3d\x3d\x3d undefined ",ia&&(N+=" || ! Object.prototype.hasOwnProperty.call("+Da+", "+Fa+"["+Ra+"]) "),N+=") {  var err \x3d   ",!1!==I.createErrors?(N+=" { keyword: 'required' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { missingProperty: '"+
Ga+"' } ",!1!==I.opts.messages&&(N+=" , message: '",I.opts._errorDataPathProperty?N+="is a required property":N+="should have required property \\'"+Ga+"\\'",N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ",N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; } } ",xa&&(N+="  }  ");else if(bb=Ga)for(ba=-1,Ca=bb.length-1;ba<Ca;)Ia=bb[ba+=1],xa=I.util.getProperty(Ia),
Fa=(Ga=I.util.escapeQuotes(Ia),Da+xa),I.opts._errorDataPathProperty&&(I.errorPath=I.util.getPath(pa,Ia,I.opts.jsonPointers)),N+=" if ( "+Fa+" \x3d\x3d\x3d undefined ",ia&&(N+=" || ! Object.prototype.hasOwnProperty.call("+Da+", '"+I.util.escapeQuotes(Ia)+"') "),N+=") {  var err \x3d   ",!1!==I.createErrors?(N+=" { keyword: 'required' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(T)+" , params: { missingProperty: '"+Ga+"' } ",!1!==I.opts.messages&&(N+=" , message: '",
I.opts._errorDataPathProperty?N+="is a required property":N+="should have required property \\'"+Ga+"\\'",N+="' "),I.opts.verbose&&(N+=" , schema: validate.schema"+ta+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+Da+" "),N+=" } "):N+=" {} ",N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; } ";I.errorPath=pa}else Ca&&(N+=" if (true) {");return N},uniqueItems:function(I,T,N){var ba;N=" ";var ia=I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+
I.util.getProperty(T),Da=I.errSchemaPath+"/"+T;T=!I.opts.allErrors;var Ia="data"+(pa||""),xa="valid"+ia,Fa=I.opts.$data&&ta&&ta.$data;if(Fa?(N+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,pa,I.dataPathArr)+"; ",ba="schema"+ia):ba=ta,(ta||Fa)&&!1!==I.opts.uniqueItems){Fa&&(N+=" var "+xa+"; if ("+ba+" \x3d\x3d\x3d false || "+ba+" \x3d\x3d\x3d undefined) "+xa+" \x3d true; else if (typeof "+ba+" !\x3d 'boolean') "+xa+" \x3d false; else { ");N+=" var i \x3d "+Ia+".length , "+xa+" \x3d true , j; if (i \x3e 1) { ";
ba=I.schema.items&&I.schema.items.type;ia=Array.isArray(ba);!ba||"object"==ba||"array"==ba||ia&&(0<=ba.indexOf("object")||0<=ba.indexOf("array"))?N+=" outer: for (;i--;) { for (j \x3d i; j--;) { if (equal("+Ia+"[i], "+Ia+"[j])) { "+xa+" \x3d false; break outer; } } } ":(N=N+(" var itemIndices \x3d {}, item; for (;i--;) { var item \x3d "+Ia+"[i];  if (")+(I.util["checkDataType"+(ia?"s":"")](ba,"item",I.opts.strictNumbers,!0)+") continue; "),ia&&(N+=" if (typeof item \x3d\x3d 'string') item \x3d '\"' + item; "),
N+=" if (typeof itemIndices[item] \x3d\x3d 'number') { "+xa+" \x3d false; j \x3d itemIndices[item]; break; } itemIndices[item] \x3d i; } ");N+=" } ";Fa&&(N+="  }  ");N+=" if (!"+xa+") {   ";var Ga=Ga||[];Ga.push(N);N="";!1!==I.createErrors?(N+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { i: i, j: j } ",!1!==I.opts.messages&&(N+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),
I.opts.verbose&&(N+=" , schema:  ",N+=Fa?"validate.schema"+Ca:""+ta,N+="         , parentSchema: validate.schema"+I.schemaPath+" , data: "+Ia+" "),N+=" } "):N+=" {} ";ta=N;N=Ga.pop();!I.compositeRule&&T?I.async?N+=" throw new ValidationError(["+ta+"]); ":N+=" validate.errors \x3d ["+ta+"]; return false; ":N+=" var err \x3d "+ta+";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";N+=" } ";T&&(N+=" else { ")}else T&&(N+=" if (true) { ");return N},validate:bg},
cg=Se.toHash,Eh="multipleOf maximum exclusiveMaximum minimum exclusiveMinimum maxLength minLength pattern additionalItems maxItems minItems uniqueItems maxProperties minProperties required additionalProperties enum format const".split(" "),yg={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},
{default:0}]},simpleTypes:{enum:"array boolean integer null number object string".split(" ")},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",
exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",
default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",
additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},
oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Fh=yg,Fj=/^[a-z_$][a-z0-9_$-]*$/i,Gj=function(I,T,N){var ba;N=" ";var ia=I.level,pa=I.dataLevel,ta=I.schema[T],Ca=I.schemaPath+I.util.getProperty(T),Da=I.errSchemaPath+"/"+T,Ia=!I.opts.allErrors,xa="data"+(pa||""),Fa="valid"+ia,Ga="errs__"+ia,Ra=I.opts.$data&&ta&&ta.$data;Ra?(N+=" var schema"+ia+" \x3d "+I.util.getData(ta.$data,pa,I.dataPathArr)+"; ",ba="schema"+ia):ba=ta;var Xa,fb="definition"+ia,bb=this.definition,jb="";if(Ra&&
bb.$data){var qb="keywordValidate"+ia;var Hb=bb.validateSchema;N+=" var "+fb+" \x3d RULES.custom['"+T+"'].definition; var "+qb+" \x3d "+fb+".validate;"}else{if(!(Xa=I.useCustomRule(this,ta,I.schema,I)))return;ba="validate.schema"+Ca;qb=Xa.code;var Bb=bb.compile;var vb=bb.inline;var ec=bb.macro}T=qb+".errors";ta="i"+ia;var Lb="ruleErr"+ia,ic=bb.async;if(ic&&!I.async)throw Error("async keyword in sync schema");if(vb||ec||(N+=T+" \x3d null;"),N+="var "+Ga+" \x3d errors;var "+Fa+";",Ra&&bb.$data&&(jb+=
"}",N+=" if ("+ba+" \x3d\x3d\x3d undefined) { "+Fa+" \x3d true; } else { ",Hb&&(jb+="}",N+=" "+Fa+" \x3d "+fb+".validateSchema("+ba+"); if ("+Fa+") { ")),vb)bb.statements?N+=" "+Xa.validate+" ":N+=" "+Fa+" \x3d "+Xa.validate+"; ";else if(ec){ia=I.util.copy(I);jb="";ia.level++;var jc="valid"+ia.level;ia.schema=Xa.validate;ia.schemaPath="";Xa=I.compositeRule;I.compositeRule=ia.compositeRule=!0;Bb=I.validate(ia).replace(/validate\.schema/g,qb);I.compositeRule=ia.compositeRule=Xa;N+=" "+Bb}else{(Xb=Xb||
[]).push(N);N="  "+qb+".call( ";I.opts.passContext?N+="this":N+="self";Bb||!1===bb.schema?N+=" , "+xa+" ":N+=" , "+ba+" , "+xa+" , validate.schema"+I.schemaPath+" ";N+=" , (dataPath || '')";'""'!=I.errorPath&&(N+=" + "+I.errorPath);var Ob=pa?"data"+(pa-1||""):"parentData",qc=pa?I.dataPathArr[pa]:"parentDataProperty";Xa=N+=" , "+Ob+" , "+qc+" , rootData )  ";N=Xb.pop();!1===bb.errors?(N+=" "+Fa+" \x3d ",ic&&(N+="await "),N+=Xa+"; "):N+=ic?" var "+(T="customErrors"+ia)+" \x3d null; try { "+Fa+" \x3d await "+
Xa+"; } catch (e) { "+Fa+" \x3d false; if (e instanceof ValidationError) "+T+" \x3d e.errors; else throw e; } ":" "+T+" \x3d null; "+Fa+" \x3d "+Xa+"; "}if(bb.modifying&&(N+=" if ("+Ob+") "+xa+" \x3d "+Ob+"["+qc+"];"),N+=""+jb,bb.valid)Ia&&(N+=" if (true) { ");else{var Xb;N+=" if ( ";void 0===bb.valid?(N+=" !",N+=ec?""+jc:""+Fa):N+=" "+!bb.valid+" ";jc=this.keyword;(Xb=Xb||[]).push(N+") { ");(Xb=Xb||[]).push("");N="";!1!==I.createErrors?(N+=" { keyword: '"+(jc||"custom")+"' , dataPath: (dataPath || '') + "+
I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { keyword: '"+this.keyword+"' } ",!1!==I.opts.messages&&(N+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),I.opts.verbose&&(N+=" , schema: validate.schema"+Ca+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+xa+" "),N+=" } "):N+=" {} ";Ob=N;N=Xb.pop();!I.compositeRule&&Ia?I.async?N+=" throw new ValidationError(["+Ob+"]); ":N+=" validate.errors \x3d ["+Ob+"]; return false; ":N+=" var err \x3d "+Ob+
";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ";Ob=N;N=Xb.pop();vb?bb.errors?"full"!=bb.errors&&(N+="  for (var "+ta+"\x3d"+Ga+"; "+ta+"\x3cerrors; "+ta+"++) { var "+Lb+" \x3d vErrors["+ta+"]; if ("+Lb+".dataPath \x3d\x3d\x3d undefined) "+Lb+".dataPath \x3d (dataPath || '') + "+I.errorPath+"; if ("+Lb+".schemaPath \x3d\x3d\x3d undefined) { "+Lb+'.schemaPath \x3d "'+Da+'"; } ',I.opts.verbose&&(N+=" "+Lb+".schema \x3d "+ba+"; "+Lb+".data \x3d "+xa+"; "),N+=
" } "):!1===bb.errors?N+=" "+Ob+" ":(N+=" if ("+Ga+" \x3d\x3d errors) { "+Ob+" } else {  for (var "+ta+"\x3d"+Ga+"; "+ta+"\x3cerrors; "+ta+"++) { var "+Lb+" \x3d vErrors["+ta+"]; if ("+Lb+".dataPath \x3d\x3d\x3d undefined) "+Lb+".dataPath \x3d (dataPath || '') + "+I.errorPath+"; if ("+Lb+".schemaPath \x3d\x3d\x3d undefined) { "+Lb+'.schemaPath \x3d "'+Da+'"; } ',I.opts.verbose&&(N+=" "+Lb+".schema \x3d "+ba+"; "+Lb+".data \x3d "+xa+"; "),N+=" } } "):ec?(N+="   var err \x3d   ",!1!==I.createErrors?
(N+=" { keyword: '"+(jc||"custom")+"' , dataPath: (dataPath || '') + "+I.errorPath+" , schemaPath: "+I.util.toQuotedString(Da)+" , params: { keyword: '"+this.keyword+"' } ",!1!==I.opts.messages&&(N+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),I.opts.verbose&&(N+=" , schema: validate.schema"+Ca+" , parentSchema: validate.schema"+I.schemaPath+" , data: "+xa+" "),N+=" } "):N+=" {} ",N+=";  if (vErrors \x3d\x3d\x3d null) vErrors \x3d [err]; else vErrors.push(err); errors++; ",
!I.compositeRule&&Ia&&(I.async?N+=" throw new ValidationError(vErrors); ":N+=" validate.errors \x3d vErrors; return false; ")):!1===bb.errors?N+=" "+Ob+" ":(N+=" if (Array.isArray("+T+")) { if (vErrors \x3d\x3d\x3d null) vErrors \x3d "+T+"; else vErrors \x3d vErrors.concat("+T+"); errors \x3d vErrors.length;  for (var "+ta+"\x3d"+Ga+"; "+ta+"\x3cerrors; "+ta+"++) { var "+Lb+" \x3d vErrors["+ta+"]; if ("+Lb+".dataPath \x3d\x3d\x3d undefined) "+Lb+".dataPath \x3d (dataPath || '') + "+I.errorPath+";  "+
Lb+'.schemaPath \x3d "'+Da+'";  ',I.opts.verbose&&(N+=" "+Lb+".schema \x3d "+ba+"; "+Lb+".data \x3d "+xa+"; "),N+=" } } else { "+Ob+" } ");N+=" } ";Ia&&(N+=" else { ")}return N},Hj={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Fh.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Fh.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},
dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Li={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",
anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},Gh=function pa(T,N,ba,ia){function ta(Xb,Pb,mc,Fc){var hc=!Pb||Pb&&Pb.schema==Xb;if(Pb.schema!=N.schema)return pa.call(Ra,Xb,Pb,mc,Fc);mc=!0===Xb.$async;Fc=bg({isTop:!0,schema:Xb,isRoot:hc,baseId:Fc,root:Pb,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:ag,RULES:jc,validate:bg,util:rf,resolve:ad,resolveRef:Ca,usePattern:xa,useDefault:Fa,useCustomRule:Ga,opts:Xa,formats:ic,logger:Ra.logger,self:Ra});
Fc=ka(fb,Jc)+ka(jb,ne)+ka(Hb,Qb)+ka(vb,aa)+Fc;Xa.processCode&&(Fc=Xa.processCode(Fc,Xb));try{var Yc=(new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",Fc))(Ra,jc,ic,N,fb,Hb,vb,Ff,Bj,ph);fb[0]=Yc}catch(Fe){throw Ra.logger.error("Error compiling schema, function code:",Fc),Fe;}return Yc.schema=Xb,Yc.errors=null,Yc.refs=bb,Yc.refVal=fb,Yc.root=hc?Yc:Pb,mc&&(Yc.$async=!0),!0===Xa.sourceCode&&(Yc.source={code:Fc,patterns:jb,defaults:Hb}),
Yc}function Ca(Xb,Pb,mc){Pb=ad.url(Xb,Pb);var Fc,hc=bb[Pb];if(void 0!==hc)return Ia(Fc=fb[hc],Fc="refVal["+hc+"]");if(!mc&&N.refs&&(mc=N.refs[Pb],void 0!==mc))return Ia(Fc=N.refVal[mc],Fc=Da(Pb,Fc));Fc=Da(Pb);mc=ad.call(Ra,ta,N,Pb);void 0===mc&&(hc=ba&&ba[Pb])&&(mc=ad.inlineRef(hc,Xa.inlineRefs)?hc:pa.call(Ra,hc,N,ba,Xb));if(void 0!==mc)return fb[bb[Pb]]=mc,Ia(mc,Fc);delete bb[Pb];!0}function Da(Xb,Pb){var mc=fb.length;return fb[mc]=Pb,bb[Xb]=mc,"refVal"+mc}function Ia(Xb,Pb){return"object"==typeof Xb||
"boolean"==typeof Xb?{code:Pb,schema:Xb,inline:!0}:{code:Pb,$async:Xb&&!!Xb.$async}}function xa(Xb){var Pb=qb[Xb];return void 0===Pb&&(Pb=qb[Xb]=jb.length,jb[Pb]=Xb),"pattern"+Pb}function Fa(Xb){switch(typeof Xb){case "boolean":case "number":return""+Xb;case "string":return rf.toQuotedString(Xb);case "object":if(null===Xb)return"null";var Pb=qh(Xb),mc=Bb[Pb];return void 0===mc&&(mc=Bb[Pb]=Hb.length,Hb[mc]=Xb),"default"+mc}}function Ga(Xb,Pb,mc,Fc){if(!1!==Ra._opts.validateSchema){var hc=Xb.definition.dependencies;
if(hc&&!hc.every(function(zf){return Object.prototype.hasOwnProperty.call(mc,zf)}))throw Error("parent schema must have all required keywords: "+hc.join(","));if((hc=Xb.definition.validateSchema)&&!hc(Pb)){hc="keyword schema is invalid: "+Ra.errorsText(hc.errors);if("log"!=Ra._opts.validateSchema)throw Error(hc);Ra.logger.error(hc)}}hc=Xb.definition.compile;var Yc=Xb.definition.inline,Fe=Xb.definition.macro;if(hc)Pb=hc.call(Ra,Pb,mc,Fc);else if(Fe)Pb=Fe.call(Ra,Pb,mc,Fc),!1!==Xa.validateSchema&&Ra.validateSchema(Pb,
!0);else if(Yc)Pb=Yc.call(Ra,Fc,Xb.keyword,Pb,mc);else if(!(Pb=Xb.definition.validate))return;if(void 0===Pb)throw Error('custom keyword "'+Xb.keyword+'"failed to compile');Xb=vb.length;return vb[Xb]=Pb,{code:"customRule"+Xb,validate:Pb}}var Ra=this,Xa=this._opts,fb=[void 0],bb={},jb=[],qb={},Hb=[],Bb={},vb=[];N=N||{schema:T,refVal:fb,refs:bb};var ec=Te.call(this,T,N,ia),Lb=this._compilations[ec.index];if(ec.compiling)return Lb.callValidate=function Pb(){var mc=Lb.validate,Fc=mc.apply(this,arguments);
return Pb.errors=mc.errors,Fc};var ic=this._formats,jc=this.RULES;try{var Ob=ta(T,N,ba,ia);Lb.validate=Ob;var qc=Lb.callValidate;return qc&&(qc.schema=Ob.schema,qc.errors=null,qc.refs=Ob.refs,qc.refVal=Ob.refVal,qc.root=Ob.root,qc.$async=Ob.$async,Xa.sourceCode&&(qc.source=Ob.source)),Ob}finally{xd.call(this,T,N,ia)}},Be=ad,Ii=rh,Ki=qh,Hi=za,Ji=function(){var T=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength",
"minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:"$ref const enum not anyOf oneOf allOf if".split(" ")}],N=["type","$comment"];return T.all=cg(N),T.types=cg("number integer string array object boolean null".split(" ")),T.forEach(function(ba){ba.rules=ba.rules.map(function(ia){if("object"==
typeof ia){var pa=Object.keys(ia)[0];var ta=ia[pa];ia=pa;ta.forEach(function(Ca){N.push(Ca);T.all[Ca]=!0})}return N.push(ia),T.all[ia]={keyword:ia,code:Dh[ia],implements:ta}});T.all.$comment={keyword:"$comment",code:Dh.$comment};ba.type&&(T.types[ba.type]=ba)}),T.keywords=cg(N.concat("$schema $id id $data $async title description default definitions examples readOnly writeOnly contentMediaType contentEncoding additionalItems then else".split(" "))),T.custom={},T},zg=function(T,N){for(var ba=0;ba<
N.length;ba++){T=JSON.parse(JSON.stringify(T));var ia,pa=N[ba].split("/"),ta=T;for(ia=1;ia<pa.length;ia++)ta=ta[pa[ia]];for(ia=0;ia<Eh.length;ia++){pa=Eh[ia];var Ca=ta[pa];Ca&&(ta[pa]={anyOf:[Ca,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return T},wg=Se;wb.prototype.validate=function(T,N){var ba;if("string"==typeof T){if(!(ba=this.getSchema(T)))throw Error('no schema with key or ref "'+T+'"');}else ba=this._addSchema(T),ba=ba.validate||this._compile(ba);
N=ba(N);!0!==ba.$async&&(this.errors=ba.errors);return N};wb.prototype.compile=function(T,N){T=this._addSchema(T,void 0,N);return T.validate||this._compile(T)};wb.prototype.addSchema=function(T,N,ba,ia){if(Array.isArray(T)){for(N=0;N<T.length;N++)this.addSchema(T[N],void 0,ba,ia);return this}var pa=this._getId(T);if(void 0!==pa&&"string"!=typeof pa)throw Error("schema id must be string");return tf(this,N=Be.normalizeId(N||pa)),this._schemas[N]=this._addSchema(T,ba,ia,!0),this};wb.prototype.addMetaSchema=
function(T,N,ba){return this.addSchema(T,N,ba,!0),this};wb.prototype.validateSchema=function(T,N){var ba=T.$schema;if(void 0!==ba&&"string"!=typeof ba)throw Error("$schema must be a string");(ba=ba||this._opts.defaultMeta)||(ba=this._opts.meta,ba=(this._opts.defaultMeta="object"==typeof ba?this._getId(ba)||ba:this.getSchema(sf)?sf:void 0,this._opts.defaultMeta));if(!ba)return this.logger.warn("meta-schema not available"),this.errors=null,!0;T=this.validate(ba,T);if(!T&&N){N="schema is invalid: "+
this.errorsText();if("log"!=this._opts.validateSchema)throw Error(N);this.logger.error(N)}return T};wb.prototype.getSchema=function(T){var N=dc(this,T);switch(typeof N){case "object":return N.validate||this._compile(N);case "string":return this.getSchema(N);case "undefined":var ba=Be.schema.call(this,{schema:{}},T);if(ba){N=ba.schema;var ia=ba.root;ba=ba.baseId;var pa=Gh.call(this,N,ia,void 0,ba);T=(this._fragments[T]=new $f({ref:T,fragment:!0,schema:N,root:ia,baseId:ba,validate:pa}),pa)}else T=void 0;
return T}};wb.prototype.removeSchema=function(T){if(T instanceof RegExp)return uc(this,this._schemas,T),uc(this,this._refs,T),this;switch(typeof T){case "undefined":return uc(this,this._schemas),uc(this,this._refs),this._cache.clear(),this;case "string":var N=dc(this,T);return N&&this._cache.del(N.cacheKey),delete this._schemas[T],delete this._refs[T],this;case "object":N=(N=this._opts.serialize)?N(T):T,this._cache.del(N),(T=this._getId(T))&&(T=Be.normalizeId(T),delete this._schemas[T],delete this._refs[T])}return this};
wb.prototype.addFormat=function(T,N){"string"==typeof N&&(N=new RegExp(N));return this._formats[T]=N,this};wb.prototype.errorsText=function(T,N){if(!(T=T||this.errors))return"No errors";var ba=void 0===(N=N||{}).separator?", ":N.separator;N=void 0===N.dataVar?"data":N.dataVar;for(var ia="",pa=0;pa<T.length;pa++){var ta=T[pa];ta&&(ia+=N+ta.dataPath+" "+ta.message+ba)}return ia.slice(0,-ba.length)};wb.prototype._addSchema=function(T,N,ba,ia){if("object"!=typeof T&&"boolean"!=typeof T)throw Error("schema should be object or boolean");
var pa=this._opts.serialize;pa=pa?pa(T):T;var ta=this._cache.get(pa);if(ta)return ta;ia=ia||!1!==this._opts.addUsedSchema;(ta=Be.normalizeId(this._getId(T)))&&ia&&tf(this,ta);var Ca;(N=!1!==this._opts.validateSchema&&!N)&&!(Ca=ta&&ta==Be.normalizeId(T.$schema))&&this.validateSchema(T,!0);var Da=Be.ids.call(this,T);ba=new $f({id:ta,schema:T,localRefs:Da,cacheKey:pa,meta:ba});"#"!=ta[0]&&ia&&(this._refs[ta]=ba);this._cache.put(pa,ba);N&&Ca&&this.validateSchema(T,!0);return ba};wb.prototype._compile=
function(T,N){function ba(){var ta=T.validate,Ca=ta.apply(this,arguments);return ba.errors=ta.errors,Ca}if(T.compiling)return T.validate=ba,ba.schema=T.schema,ba.errors=null,ba.root=N||ba,!0===T.schema.$async&&(ba.$async=!0),ba;var ia;T.compiling=!0;T.meta&&(ia=this._opts,this._opts=this._metaOpts);try{var pa=Gh.call(this,T.schema,N,T.localRefs)}catch(ta){throw delete T.validate,ta;}finally{T.compiling=!1,T.meta&&(this._opts=ia)}return T.validate=pa,T.refs=pa.refs,T.refVal=pa.refVal,T.root=pa.root,
pa};wb.prototype.compileAsync=function pa(N,ba,ia){function ta(xa){return(xa=xa.$schema)&&!Da.getSchema(xa)?pa.call(Da,{$ref:xa},!0):Promise.resolve()}function Ca(xa){try{return Da._compile(xa)}catch(Fa){if(Fa instanceof ag)return function(Ga){function Ra(){delete Da._loadingSchemas[Xa]}var Xa=Ga.missingSchema;if(Da._refs[Xa]||Da._schemas[Xa])throw Error("Schema "+Xa+" is loaded but "+Ga.missingRef+" cannot be resolved");(Ga=Da._loadingSchemas[Xa])||(Ga=Da._loadingSchemas[Xa]=Da._opts.loadSchema(Xa)).then(Ra,
Ra);return Ga.then(function(fb){if(!Da._refs[Xa]&&!Da._schemas[Xa])return ta(fb).then(function(){Da._refs[Xa]||Da._schemas[Xa]||Da.addSchema(fb,Xa,void 0,ba)})}).then(function(){return Ca(xa)})}(Fa);throw Fa;}}var Da=this;if("function"!=typeof this._opts.loadSchema)throw Error("options.loadSchema should be a function");"function"==typeof ba&&(ia=ba,ba=void 0);var Ia=ta(N).then(function(){var xa=Da._addSchema(N,void 0,ba);return xa.validate||Ca(xa)});ia&&Ia.then(function(xa){ia(null,xa)},ia);return Ia};
wb.prototype.addKeyword=function(N,ba){function ia(Da,Ia,xa){for(var Fa,Ga=0;Ga<pa.length;Ga++){var Ra=pa[Ga];if(Ra.type==Ia){Fa=Ra;break}}Fa||(Fa={type:Ia,rules:[]},pa.push(Fa));Ia={keyword:Da,definition:xa,custom:!0,code:Gj,implements:xa.implements};Fa.rules.push(Ia);pa.custom[Da]=Ia}var pa=this.RULES;if(pa.keywords[N])throw Error("Keyword "+N+" is already defined");if(!Fj.test(N))throw Error("Keyword "+N+" is not a valid identifier");if(ba){this.validateKeyword(ba,!0);var ta=ba.type;if(Array.isArray(ta))for(var Ca=
0;Ca<ta.length;Ca++)ia(N,ta[Ca],ba);else ia(N,ta,ba);(ta=ba.metaSchema)&&(ba.$data&&this._opts.$data&&(ta={anyOf:[ta,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),ba.validateSchema=this.compile(ta,!0))}return pa.keywords[N]=pa.all[N]=!0,this};wb.prototype.getKeyword=function(N){var ba=this.RULES.custom[N];return ba?ba.definition:this.RULES.keywords[N]||!1};wb.prototype.removeKeyword=function(N){var ba=this.RULES;delete ba.keywords[N];delete ba.all[N];delete ba.custom[N];
for(var ia=0;ia<ba.length;ia++)for(var pa=ba[ia].rules,ta=0;ta<pa.length;ta++)if(pa[ta].keyword==N){pa.splice(ta,1);break}return this};wb.prototype.validateKeyword=function pa(ba,ia){pa.errors=null;var ta=this._validateKeyword=this._validateKeyword||this.compile(Hj,!0);if(ta(ba))return!0;if(pa.errors=ta.errors,ia)throw Error("custom keyword definition is invalid: "+this.errorsText(ta.errors));return!1};wb.ValidationError=ph;wb.MissingRefError=ag;wb.$dataMetaSchema=zg;var sf="http://json-schema.org/draft-07/schema",
xg=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Mi=["/properties"];const Ij=function(){const ba=new wb({allErrors:!0});return(ia,pa)=>k(this,void 0,void 0,function*(){var ta=xf;"gaugeSeries"===pa&&(ta=Object.assign(Object.assign({},xf),{$ref:"#/definitions/WebGaugeChart"}));ta=ba.compile(ta);ta(ia);let Ca=[];return null!==ta.errors&&void 0!==ta.errors&&(Ca=yield function(Da){return k(this,void 0,void 0,function*(){const Ia=yield vd();return Da.map(xa=>{var Fa=xa;const Ga="."===
xa.dataPath[0]?xa.dataPath.substring(1):xa.dataPath;switch(xa.keyword){case Pd.Required:Fa=Object.assign(Object.assign({},xa),{message:Oa(Ia.requiredProperty,{dataPath:Ga,missingProperty:xa.params.missingProperty})});break;case Pd.MinLength:Fa=Object.assign(Object.assign({},xa),{message:Oa(Ia.minLength,{dataPath:Ga,limit:xa.params.limit.toString()})});break;case Pd.MinItems:Fa=Object.assign(Object.assign({},xa),{message:Oa(Ia.minItems,{dataPath:Ga,limit:xa.params.limit.toString()})});break;case Pd.MaxItems:Fa=
Object.assign(Object.assign({},xa),{message:Oa(Ia.maxItems,{dataPath:Ga,limit:xa.params.limit.toString()})});break;case Pd.Pattern:"\\w+"===xa.params.pattern&&(Fa=Object.assign(Object.assign({},xa),{message:Oa(Ia.whiteSpacePattern,{dataPath:Ga}),params:{}}));break;case Pd.AdditionalProperties:Fa=Object.assign(Object.assign({},xa),{message:Oa(Ia.additionalProperty,{dataPath:Ga,additionalProperty:xa.params.additionalProperty})});break;case Pd.Enum:Fa=Object.assign(Object.assign({},xa),{message:Oa(Ia.enumValues,
{dataPath:Ga,allowedValues:xa.params.allowedValues.join(", ")})});break;case Pd.AnyOf:Fa=[],"#/properties/series/items/anyOf"===xa.schemaPath?Fa=xf.definitions.WebChart.properties.series.items.anyOf.map(Ra=>uf(Ra.$ref)):"#/properties/dataSource/anyOf"===xa.schemaPath&&(Fa=xf.definitions.WebChart.properties.dataSource.anyOf.map(Ra=>uf(Ra.$ref))),Fa=Object.assign(Object.assign({},xa),{params:Fa,message:Oa(Ia.anyOfValues,{dataPath:Ga,schemaOptions:Fa.join(", ")})})}return Fa})})}(ta.errors)),Ca})}();
n.ActionModes={MonoSelection:"monoSelection",MultiSelection:"multiSelection",MultiSelectionWithCtrlKey:"multiSelectionWithCtrlKey",Zoom:"zoom",None:"none"};n.ArcgisChartsError=Nf;n.ConfigErrorKeywords=Pd;n.ConfigWarningKeywords=Qf;n.DataWarningKeywords=Xc;n.ErrorKeywords=of;n.JSAPIModules=od;n.QueryType=he;n.RTLLocales=tg;n.SelectionSource={SelectionByClickOrRange:"SelectionByClickOrRange",ProgrammaticSelection:"ProgrammaticSelection",ClearSelection:"ClearSelection"};n.SupportedLocales=Ib;n.SupportedLocalesForFormats=
sg;n.TextElements=Cc;n.abortControllerMap=Xe;n.abortPendingQueries=function(ba){if(void 0!==ba){const ia=Xe.get(ba);void 0!==ia&&ia.abort();Xe.set(ba,new AbortController)}};n.canShowLegend=function(ba){let ia=!1;switch(cd(ba)){case "pieSeries":ia=!0;break;case "barSeries":case "lineSeries":case "comboLineAndBarSeries":ia=1<ba.length;break;case "histogramSeries":case "scatterSeries":ia=Object.values(ba[0].overlays).some(pa=>!0===pa.created)}return ia};n.combineFilters=Ed;n.convertChartSpec=function(ba,
ia){var pa,ta,Ca,Da,Ia;return k(this,void 0,void 0,function*(){let xa=Sa(ba,5);if(void 0!==xa){if(void 0===xa.version&&(xa.version="1.0.0"),void 0!==ia)if(void 0===xa.dataSource||void 0===xa.dataSource.type||"inline"===xa.dataSource.type)xa.dataSource=ia;else if("featureLayer"===(null===(pa=xa.dataSource)||void 0===pa?void 0:pa.type)&&void 0===(null===(Ca=null===(ta=xa.dataSource)||void 0===ta?void 0:ta.featureLayer)||void 0===Ca?void 0:Ca.id)&&void 0!==ia.featureLayer){var {featureLayer:Fa}=ia;const Ga=
{id:Fa.id,layerType:"ArcGISFeatureLayer",itemId:Fa.itemId},Ra=null===(Ia=null===(Da=Fa.featureCollection)||void 0===Da?void 0:Da.layers)||void 0===Ia?void 0:Ia[0];void 0!==Ra?({layerDefinition:Fa}=Ra,Ga.featureCollection={layers:[{featureSet:Ra,layerDefinition:Fa}]}):(Ga.url=Fa.url,Ga.layerDefinition=Fa.layerDefinition);xa.dataSource.featureLayer=Ga}!1===rb(xa.axes)&&(xa.axes=xa.axes.map((Ga,Ra)=>{var Xa,fb,bb,jb,qb;return delete Ga.calculateAutomaticMaximum,delete Ga.calculateAutomaticMinimum,"barSeries"===
(null===(Xa=xa.series)||void 0===Xa?void 0:Xa[0].type)&&0===Ra&&"number"===(null===(fb=Ga.valueFormat)||void 0===fb?void 0:fb.type)&&(Ga.valueFormat=jd()),void 0!==(null===(qb=null===(jb=null===(bb=Ga.title)||void 0===bb?void 0:bb.content)||void 0===jb?void 0:jb.font)||void 0===qb?void 0:qb.style)&&(Ga.title.content.font.style=Ga.title.content.font.style.toLowerCase()),Ga}));!1===rb(xa.series)&&(xa.series=xa.series.map((Ga,Ra)=>{var Xa,fb,bb;void 0===Ga.id&&(Ga.id=`Series ${Date.now()}-${Ra}`);Ra=
cd(xa.series,Ra);return"barSeries"!==Ra&&"lineSeries"!==Ra||"median"!==(null===(bb=null===(fb=null===(Xa=Ga.query)||void 0===Xa?void 0:Xa.outStatistics)||void 0===fb?void 0:fb[0])||void 0===bb?void 0:bb.statisticType)||(Ga.query.outStatistics[0].statisticType="percentile_cont"),"barSeries"===Ra&&void 0!==Ga.multipleBarType&&(Ga.stackedType=Ga.multipleBarType,delete Ga.multipleBarType),"pieSeries"===Ra&&void 0!==Ga.sliceGrouping&&(Ga.sliceGrouping.sliceId="sliceGrouperOther",void 0!==Ga.sliceGrouping.groupName&&
(Ga.sliceGrouping=Object.assign(Object.assign({},Ga.sliceGrouping),{label:Ga.sliceGrouping.groupName}),delete Ga.sliceGrouping.groupName),void 0!==Ga.sliceGrouping.groupSliceSymbol&&(Ga.sliceGrouping=Object.assign(Object.assign({},Ga.sliceGrouping),{fillSymbol:Ga.sliceGrouping.groupSliceSymbol}),delete Ga.sliceGrouping.groupSliceSymbol)),Ga}));void 0!==xa.legend&&!1===Number.isFinite(xa.legend.maxHeight)&&(xa.legend.maxHeight=NaN);xa=yield function(Ga){var Ra,Xa;return k(this,void 0,void 0,function*(){const fb=
Sa(Ga,5);if("featureLayer"===(null===(Ra=null==Ga?void 0:Ga.dataSource)||void 0===Ra?void 0:Ra.type)&&0<(null===(Xa=null==Ga?void 0:Ga.series)||void 0===Xa?void 0:Xa.length)){const bb=yield wf(Ga.dataSource.featureLayer);fb.series=yield Promise.all(fb.series.map(jb=>k(this,void 0,void 0,function*(){var qb;const Hb=Object.assign({},jb);if(Hb.x=yield gd(bb,jb.x),void 0!==Hb.y&&(Hb.y=yield gd(bb,jb.y)),void 0!==jb.query){let {where:Bb,groupByFieldsForStatistics:vb,outStatistics:ec,orderByFields:Lb}=
jb.query;if(vb=yield Z(vb,bb),void 0!==Lb){let ic=[],jc=[];Lb.forEach(Ob=>{""!==Ob&&void 0!==Ob&&(Ob=Ob.split(" "),ic.push(Ob[0]),jc.push(Ob[1]))});0<ic.length&&(ic=yield Z(ic,bb),Lb=ic.map((Ob,qc)=>`${Ob} ${jc[qc]}`))}if(void 0!==ec&&(ec=yield Promise.all(ec.map(ic=>k(this,void 0,void 0,function*(){const jc=Object.assign({},ic);return jc.onStatisticField=yield gd(bb,ic.onStatisticField),jc})))),void 0!==Bb&&!1===Kd(Bb)){const ic=Jd(null===(qb=jb.query)||void 0===qb?void 0:qb.where);qb=Bb.split("\x3d");
Bb=`${yield gd(bb,ic)} = ${qb[1].trim()}`}void 0!==Hb.query&&(void 0!==Bb&&(Hb.query.where=Bb),void 0!==vb&&(Hb.query.groupByFieldsForStatistics=vb),void 0!==ec&&(Hb.query.outStatistics=ec),void 0!==Lb&&(Hb.query.orderByFields=Lb))}return Hb})))}return fb})}(xa)}return xa})};n.createInvalidDataInfoForHistogram=Ie;n.defaultAxisLineColor=Lf;n.defaultGridLineOpacity=75;n.defaultOpacity=.7;n.defaultPieCategoryFieldName="arcgis_charts_pie_category_from_fields_name";n.defaultPieTickColor=Sg;n.defaultPieValueFieldName=
"arcgis_charts_pie_category_from_fields_value";n.defaultSliceGroupingId="sliceGrouperOther";n.escapeSQLString=Fd;n.fetchComponentLocaleStrings=function(ba,ia){return k(this,void 0,void 0,function*(){var pa=ba.tagName.toLowerCase();const {locale:ta,rtl:Ca}=Cb(ba);pa=yield function(Ia){return k(this,void 0,void 0,function*(){const {path:xa,locale:Fa,baseURL:Ga}=Ia;let Ra={};try{Ra=yield(yield fetch(`${Ga}t9n/${xa}.t9n.${Fa}.json`)).json()}catch(Xa){Ra=yield(yield fetch(`${Ga}t9n/${xa}.t9n.${Ib.English}.json`)).json()}return Ra})}({path:pa,
locale:ta,baseURL:ia});let Da=ba.getAttribute("dir");return"ltr"!==Da&&"rtl"!==Da&&(Da=!0===Ca?"rtl":"ltr"),{strings:pa,direction:Da}})};n.fetchFeatureLayerFieldsInfo=td;n.fetchInlineRawHistogramData=be;n.fetchLanguageDirection=function(ba){({rtl:ba}=Cb(ba));return!0===ba?"rtl":"ltr"};n.findMatchingLayerFieldName=gd;n.formatMessage=Oa;n.generateRandomRestColor=zc;n.getChartLimits=Gc;n.getChartTechnicalLimits=function(){return{maxScatterCellsPerQuery:500,maxScatterCellsPerQueryForStandard:175,maxElementsPerSelectionQuery:25,
maxOIDsPerSelectionQuery:2E3}};n.getDataMinMaxFromVisibleSeries=function(ba){var ia,pa,ta;let Ca,Da;var Ia=NaN;let xa=NaN;const {chartConfig:Fa,chartData:Ga,visibleSeriesId:Ra}=ba;({series:ba}=Fa);if(0<(null==ba?void 0:ba.length)){Ia=null!==(ia=Zd(ba[0]))&&void 0!==ia?ia:"sideBySide";const {x:Xa}=ba[0];ia=Ga.filter(fb=>null!==fb[Xa]);[Ca,Da]=v(ia,fb=>fb[Xa]);switch(!0===("date"===(null===(ta=null===(pa=Fa.axes)||void 0===pa?void 0:pa[1])||void 0===ta?void 0:ta.valueFormat.type))&&void 0!==Ca&&void 0!==
Da&&([Ca,Da]=[(new Date(Ca)).valueOf(),(new Date(Da)).valueOf()]),Ia){case "stacked100":xa=Ia=NaN;break;case "stacked":{const {stackedMinY:fb,stackedMaxY:bb}=Gd({seriesConfig:ba,filteredData:ia,visibleSeriesId:Ra});Ia=fb;xa=bb;break}default:for(Ia=Number.MAX_SAFE_INTEGER,xa=Number.MIN_SAFE_INTEGER,pa=Od(ba,Ra),ta=0;ta<pa.length;ta+=1){const fb=pa[ta],[bb,jb]=v(ia,qb=>qb[fb]);void 0!==bb&&bb<Ia&&(Ia=bb);void 0!==jb&&jb>xa&&(xa=jb)}}}return{minY:Ia,maxY:xa,minX:Ca,maxX:Da}};n.getDataWarningObject=function(ba){return k(this,
void 0,void 0,function*(){const {invalidType:ia,elementCount:pa,seriesCount:ta}=ba;var Ca=yield vd(),Da={keyword:Xc.BadData,message:Ca.defaultInvalidChart},Ia=Cb().formatLocale;Ia=new Intl.NumberFormat(Ia);var xa=Gc();switch(ia){case Xc.BarElementExceedsLimit:var Fa=Da=NaN,Ga="";1===ta?(Ga=Ca.uniqueSeriesBarCountCannotExceedLimit,Da=xa.maxBarUniqueSeriesCountTotal):2===ta?(Ga=Ca.twoSeriesBarCountCannotExceedLimit,Da=xa.maxBarTwoSeriesCountTotal,Fa=xa.maxBarTwoSeriesCountPerSeries):void 0!==ta&&2<
ta&&(Ga=Ca.threePlusSeriesBarCountCannotExceedLimit,Da=xa.maxBarThreePlusSeriesCountTotal,Fa=xa.maxBarThreePlusSeriesCountPerSeries);xa=Ia.format(Da);Ca=Ia.format(Fa);Ia=void 0!==pa?Ia.format(pa):"";Da={keyword:Xc.BarElementExceedsLimit,message:Oa(Ga,{totalLimit:xa,seriesLimit:Ca,elementCount:Ia}),params:{actualCount:null!=pa?pa:NaN,totalLimit:Da,seriesLimit:Fa}};break;case Xc.LineChartExceedsLimit:{Da=Ca.lineChartSeriesAndMarkersCannotExceedLimit;Fa=xa.maxLineChartMarkersCountTotal;xa=xa.maxLineChartSeriesCount;
Ga=Ia.format(Fa);Ca=Ia.format(xa);const Ra=void 0!==pa?Ia.format(pa):"";Ia=void 0!==ta?Ia.format(ta):"";Da={keyword:Xc.LineChartExceedsLimit,message:Oa(Da,{seriesCount:Ia,elementCount:Ra,seriesLimit:Ca,totalLimit:Ga}),params:{actualCount:null!=pa?pa:NaN,totalLimit:Fa,seriesLimit:xa}}}break;case Xc.PieChartExceedsLimit:Da=Ca.pieChartSlicesCannotExceedLimit;xa=xa.maxPieChartSliceCountTotal;Fa=Ia.format(xa);Ia=void 0!==pa?Ia.format(pa):"";Da={keyword:Xc.PieChartExceedsLimit,message:Oa(Da,{sliceCount:Ia,
totalLimit:Fa}),params:{actualCount:null!=pa?pa:NaN,totalLimit:xa}};break;case Xc.PieChartMixOfNegativePositiveSlices:Da={keyword:Xc.PieChartMixOfNegativePositiveSlices,message:Ca.pieChartCannotHaveMixtureOfPositiveAndNegativeSlices};break;case Xc.NegativeValueInSqrtCalculation:Da={keyword:Xc.NegativeValueInSqrtCalculation,message:Ca.negativeValueInDataForSqrtTransformation};break;case Xc.NegativeValueInLogCalculation:Da={keyword:Xc.NegativeValueInLogCalculation,message:Ca.negativeValueInDataForLogTransformation};
break;case Xc.HistogramEmptyField:Da={keyword:Xc.HistogramEmptyField,message:Ca.histogramEmptyField}}return Da})};n.getDefaultAggregationTypeLabel=function(ba){return k(this,void 0,void 0,function*(){var ia=yield Db();switch(ba){case "avg":ia=ia.statistics.mean;break;case "percentile_cont":ia=ia.statistics.median;break;case "sum":ia=ia.statistics.sum;break;case "min":ia=ia.statistics.minimum;break;case "max":ia=ia.statistics.maximum;break;case "var":ia=ia.statistics.variance;break;case "percentile_disc":ia=
ia.statistics.discretePercentitle;break;case "no_aggregation":ia=ia.statistics.noAggregation;break;default:ia=ia.statistics.count}return ia})};n.getDefaultAxes=Rb;n.getDefaultBackground=function(){return[255,255,255,255]};n.getDefaultBarChart=function(ba,ia=Jb()){return k(this,void 0,void 0,function*(){return{version:"1.0.0",type:"chart",id:ia,title:fc({text:yield pb(),visible:!0,font:Zb(Cc.ChartTitle)}),subTitle:fc(),footer:fc({text:"",visible:!0,font:Zb(Cc.DescriptionText)}),background:[255,255,
255,255],axes:yield Rb("barSeries"),dataSource:Ub(ba),series:[],legend:ib()}})};n.getDefaultBarChartColumnSymbol=function(ba,ia=!1){return{type:"esriSFS",style:"esriSFSSolid",color:!0===ia?zc(.7):ac({colorIndex:null!=ba?ba:0,opacity:.7}),outline:{type:"esriSLS",color:!0===ia?zc(.7):ac({colorIndex:null!=ba?ba:0,opacity:.7})}}};n.getDefaultBarChartSeries=function(ba){var ia;return k(this,void 0,void 0,function*(){const pa=null!==(ia=ba.objectIDField)&&void 0!==ia?ia:"ObjectID",ta=`${"count"}_${pa}_0`.toUpperCase(),
Ca=(yield Db()).countSeries;return{type:"barSeries",id:Ca,name:Ca,query:{outStatistics:[{statisticType:"count",onStatisticField:pa,outStatisticFieldName:ta}],orderByFields:[],groupByFieldsForStatistics:[]},x:"",y:ta,colorType:"colorMatch",stackedType:"sideBySide",fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:ac({colorIndex:ba.seriesIndex,opacity:.7})},dataLabels:fc({text:"",visible:!1,font:Zb(Cc.DataLabels),type:Cc.DataLabels}),rotated:!1}})};n.getDefaultCategoryFormat=jd;n.getDefaultChartText=
fc;n.getDefaultColor=kc;n.getDefaultDataSource=Ub;n.getDefaultDateFormat=function(){return{type:"date",intlOptions:{}}};n.getDefaultFont=Zb;n.getDefaultHistogram=function(ba,ia=Jb()){return k(this,void 0,void 0,function*(){return{version:"1.0.0",type:"chart",id:ia,title:fc({text:yield pb(),visible:!0,font:Zb(Cc.ChartTitle)}),subTitle:fc(),footer:fc({text:"",visible:!0,font:Zb(Cc.DescriptionText)}),background:[255,255,255,255],axes:yield Rb("histogramSeries"),dataSource:Ub(ba),series:[pc()],legend:ib()}})};
n.getDefaultHistogramSeries=pc;n.getDefaultLegend=ib;n.getDefaultLineChart=function(ba,ia=Jb()){return k(this,void 0,void 0,function*(){return{version:"1.0.0",type:"chart",id:ia,title:fc({text:yield pb(),visible:!0,font:Zb(Cc.ChartTitle)}),subTitle:fc(),footer:fc({text:"",visible:!0,font:Zb(Cc.DescriptionText)}),background:[255,255,255,255],axes:yield Rb("lineSeries"),dataSource:Ub(ba),series:[],legend:ib()}})};n.getDefaultLineChartMarkerSymbol=function(ba=!1){return{type:"esriSMS",style:"esriSMSCircle",
color:!0===ba?zc(.7):ac({colorIndex:0,opacity:.7}),size:4}};n.getDefaultLineChartSeries=function(ba){var ia;return k(this,void 0,void 0,function*(){const pa=null!==(ia=ba.objectIDField)&&void 0!==ia?ia:"ObjectID",ta=`${"count"}_${pa}_0`.toUpperCase(),Ca=(yield Db()).countSeries;return{type:"lineSeries",id:Ca,name:Ca,query:{outStatistics:[{statisticType:"count",onStatisticField:pa,outStatisticFieldName:ta}],orderByFields:[],groupByFieldsForStatistics:[]},x:"",y:ta,colorType:"colorMatch",lineSymbol:{type:"esriSLS",
style:"esriSLSSolid",color:ac({colorIndex:ba.seriesIndex,opacity:.7}),width:2},markerSymbol:{type:"esriSMS",style:"esriSMSCircle",color:ac({colorIndex:ba.seriesIndex,opacity:.7}),size:4},dataLabels:fc({text:"",visible:!1,font:Zb(Cc.DataLabels)}),rotated:!1,timeIntervalSize:0,timeIntervalUnits:"esriTimeUnitsDays",timeAggregationType:"equalIntervalsFromStartTime",trimIncompleteTimeInterval:!0,nullPolicy:"null"}})};n.getDefaultLineSymbol=Pc;n.getDefaultNoR2Label=function(){return k(this,void 0,void 0,
function*(){return(yield Db()).notAvailable})};n.getDefaultNumberFormat=bd;n.getDefaultOverlay=lb;n.getDefaultPercentNumberFormat=function(){return{type:"number",intlOptions:{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}}};n.getDefaultPieChart=function(ba,ia=Jb()){return k(this,void 0,void 0,function*(){return{version:"1.0.0",type:"chart",id:ia,title:fc({text:yield pb(),visible:!0,font:Zb(Cc.ChartTitle)}),subTitle:fc(),footer:fc({text:"",visible:!0,font:Zb(Cc.DescriptionText)}),
background:[255,255,255,255],dataSource:Ub(ba),series:[],legend:Object.assign(Object.assign({},ib()),{displayNumericValue:!1,displayPercentage:!0})}})};n.getDefaultPieChartSeries=function(ba){var ia;return k(this,void 0,void 0,function*(){const pa=null!==(ia=ba.objectIDField)&&void 0!==ia?ia:"ObjectID",ta=`${"count"}_${pa}_0`.toUpperCase(),Ca=(yield Db()).countSeries;return{type:"pieSeries",id:Ca,name:Ca,query:{outStatistics:[{statisticType:"count",onStatisticField:pa,outStatisticFieldName:ta}],orderByFields:[],
groupByFieldsForStatistics:[]},x:"",y:ta,colorType:"colorMatch",fillSymbol:{type:"esriSFS",style:"esriSFSSolid"},dataLabels:fc({text:"",visible:!1,font:Zb(Cc.DataLabels),type:Cc.DataLabels}),startAngle:-90,endAngle:270,dataLabelsCharacterLimit:11,displayNumericValueOnDataLabel:!1,displayPercentageOnDataLabel:!0,numericValueFormat:Object.assign(Object.assign({},bd()),{intlOptions:{minimumFractionDigits:1,maximumFractionDigits:1}}),percentValueFormat:Object.assign(Object.assign({},bd()),{intlOptions:{minimumFractionDigits:1,
maximumFractionDigits:1}}),ticks:{type:"pieTick",visible:!0,lineSymbol:Pc({width:1,color:Sg})}}})};n.getDefaultScatterPlot=function(ba,ia=Jb()){return k(this,void 0,void 0,function*(){return{version:"1.0.0",type:"chart",id:ia,title:fc({text:yield pb(),visible:!0,font:Zb(Cc.ChartTitle)}),subTitle:fc(),footer:fc({text:"",visible:!0,font:Zb(Cc.DescriptionText)}),background:[255,255,255,255],axes:yield Rb("scatterSeries"),dataSource:Ub(ba),series:[{type:"scatterSeries",id:ia,name:ia,x:"",y:"",colorType:"colorMatch",
markerSymbol:nc(),overlays:rc(),dataLabels:fc({text:"",visible:!1,font:Zb(Cc.DataLabels)})}],legend:ib()}})};n.getDefaultScatterPlotMarkerSymbol=nc;n.getDefaultStackedType=function(){return"sideBySide"};n.getDefaultStatNumberFormat=function(){return{type:"number",intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2}}};n.getDefaultTextSymbol=Qc;n.getDefaultTimeAggregationTypeLabel=function(ba){return k(this,void 0,void 0,function*(){var ia=yield Db();switch(ba){case "equalIntervalsFromEndTime":ia=
ia.timeAggregationTypes.end;break;case "equalIntervalsFromStartTime":ia=ia.timeAggregationTypes.start;break;default:ia=""}return ia})};n.getDefaultTitle=pb;n.getDefaultTrendLine=rc;n.getDefaultValueAxis=Va;n.getFeatureLayer=wf;n.getFeatureLayerDataSource=function(ba){const {id:ia,layerId:pa,renderer:ta,sourceJSON:Ca,url:Da}=null!=ba?ba:{};ba={type:"featureLayer",featureLayer:{id:null!=ia?ia:"",layerType:"ArcGISFeatureLayer"}};if(void 0!==pa||void 0!==ta){const Ia={};void 0!==pa&&(Ia.id=pa);void 0!==
ta&&(Ia.drawingInfo={renderer:ta.toJSON()});ba.featureLayer.layerDefinition=Ia}return void 0!==(null==Ca?void 0:Ca.serviceItemId)&&(ba.featureLayer.itemId=Ca.serviceItemId),void 0!==Da&&(ba.featureLayer.url=Da),ba};n.getFeatureLayerDateFields=function(ba){return ba.filter(ia=>"esriFieldTypeDate"===ia.type).map(ia=>ia.name)};n.getFeatureLayerFromQueryObject=Cd;n.getFeatureLayerNumericFields=function(ba){return ba.filter(ia=>sd(ia)).map(ia=>ia.name)};n.getFieldAlias=function(ba=[],ia){var pa,ta;return null!==
(ta=null===(pa=ba.find(Ca=>Ca.name===ia))||void 0===pa?void 0:pa.alias)&&void 0!==ta?ta:ia};n.getFieldFromName=Lc;n.getFieldList=function(ba,ia){return k(this,void 0,void 0,function*(){let pa;return"featureLayer"===ba.type&&(pa=yield td(ia)),pa})};n.getFieldsByFeatureLayerSource=function(ba,ia){return k(this,void 0,void 0,function*(){let pa;return pa=void 0!==ba.featureLayer?yield wf(ba.featureLayer):ba,td(pa,ia)})};n.getLocaleInfo=Cb;n.getMaxRecordCountFactor=He;n.getMaxRecords=Ld;n.getObjectIdField=
Ad;n.getOneRampColor=ac;n.getOverlayColorIndex=function(ba){switch(ba){case "Mean":ba=1;break;case "Median":ba=2;break;case "Standard Deviation":ba=3;break;default:ba=0}return ba};n.getQueryObject=function(ba){return k(this,void 0,void 0,function*(){const {featureLayer:ia,view:pa,chartConfig:ta}=ba;let Ca;"featureLayer"===(null==ta?void 0:ta.dataSource.type)&&(void 0!==ia?void 0!==pa&&!1===ia.isTable?(ia.outFields=["*"],Ca=yield pa.whenLayerView(ia)):Ca=ia:void 0!==ta.dataSource.featureLayer&&(Ca=
yield wf(ta.dataSource.featureLayer)));return Ca})};n.getQueryType=ud;n.getRendererFieldNames=function(ba){return k(this,void 0,void 0,function*(){const ia=new Set;return!1===ba.isTable&&(yield ba.renderer.collectRequiredFields(ia,ba.fieldsIndex)),[...ia]})};n.getRendererInfo=function(ba){let ia,pa,ta;return void 0!==ba&&(ia=ba.type,"unique-value"!==ia&&"class-breaks"!==ia||(pa=ba.field,"class-breaks"===ia&&(ta=ba.normalizationField))),{rendererType:ia,rendererField:pa,rendererNormalizationField:ta}};
n.getSeriesStackedType=Zd;n.getSeriesType=cd;n.getSplitByField=Jd;n.getSplitByValue=Mc;n.getTimeIntervalUnitLabel=function(ba,ia){switch(ba){case "esriTimeUnitsSeconds":ba=ia.seconds;break;case "esriTimeUnitsMinutes":ba=ia.minutes;break;case "esriTimeUnitsHours":ba=ia.hours;break;case "esriTimeUnitsDays":ba=ia.days;break;case "esriTimeUnitsWeeks":ba=ia.weeks;break;case "esriTimeUnitsMonths":ba=ia.months;break;case "esriTimeUnitsYears":ba=ia.years;break;default:ba=""}return ba};n.getYList=Od;n.hexToRGB=
function(ba){let ia;null!==/^#?([a-fA-F0-9]{6})$/.exec(ba)&&(ba=ba.replace("#",""),ia=[parseInt(ba.slice(0,2),16),parseInt(ba.slice(2,4),16),parseInt(ba.slice(4,6),16),255]);return ia};n.histogramBinCount=32;n.isAbsoluteTruthWhereClause=Kd;n.isDataCompatibleWithTransformation=ae;n.isEmptyStringField=Bd;n.isFeatureLayer=ke;n.isIntegerField=function(ba){return["esriFieldTypeSmallInteger","esriFieldTypeInteger"].includes(ba.type)};n.isNumberOfElementsUnderLimit=function(ba,ia,pa){let ta=!0;const {maxBarUniqueSeriesCountTotal:Ca,
maxBarTwoSeriesCountPerSeries:Da,maxBarTwoSeriesCountTotal:Ia,maxBarThreePlusSeriesCountPerSeries:xa,maxBarThreePlusSeriesCountTotal:Fa,maxLineChartMarkersCountTotal:Ga,maxLineChartSeriesCount:Ra,maxPieChartSliceCountTotal:Xa}=Gc();switch(pa){case "barSeries":case "comboLineAndBarSeries":pa=ba/ia;0===ia?ta=!0:1===ia?ta=ba<=Ca:2===ia?ta=ba<=Ia&&pa<=Da:2<ia&&(ta=ba<=Fa&&pa<=xa);break;case "lineSeries":ta=ba<=Ga&&ia<=Ra;break;case "pieSeries":ta=ba<=Xa}return ta};n.isNumericField=sd;n.isPartialConfig=
function(ba){var ia,pa,ta,Ca,Da,Ia,xa,Fa,Ga,Ra,Xa,fb,bb,jb,qb,Hb;let Bb=!1;switch(cd(null==ba?void 0:ba.series)){case "barSeries":case "lineSeries":case "histogramSeries":Bb=0===(null!==(Ca=null===(ta=null===(pa=null===(ia=null==ba?void 0:ba.series)||void 0===ia?void 0:ia[0])||void 0===pa?void 0:pa.x)||void 0===ta?void 0:ta.length)&&void 0!==Ca?Ca:0);break;case "scatterSeries":var vb=null==ba?void 0:ba.series;Bb=0===(null!==(xa=null===(Ia=null===(Da=null==vb?void 0:vb[0])||void 0===Da?void 0:Da.x)||
void 0===Ia?void 0:Ia.length)&&void 0!==xa?xa:0)||0===(null!==(Ra=null===(Ga=null===(Fa=null==vb?void 0:vb[0])||void 0===Fa?void 0:Fa.y)||void 0===Ga?void 0:Ga.length)&&void 0!==Ra?Ra:0);break;case "pieSeries":Da=null==ba?void 0:ba.series,Bb=ud(Da)===he.MultipleNumericFieldsAggregation?0===(null!==(bb=null===(fb=null===(Xa=null===(vb=null==Da?void 0:Da[0])||void 0===vb?void 0:vb.query)||void 0===Xa?void 0:Xa.outStatistics)||void 0===fb?void 0:fb.length)&&void 0!==bb?bb:0):0===(null!==(Hb=null===(qb=
null===(jb=null==Da?void 0:Da[0])||void 0===jb?void 0:jb.x)||void 0===qb?void 0:qb.length)&&void 0!==Hb?Hb:0)}return Bb};n.isPropertyKeyInData=function(ba,ia){ia=ia.find(pa=>pa in ba);return{isInItem:void 0!==ia,expr:ia}};n.isSFS=function(ba){return"esriSFS"===ba.type};n.isSLS=function(ba){return"esriSLS"===ba.type};n.isSMS=function(ba){return"esriSMS"===ba.type};n.isSeriesUsingTimeBinning=function(ba){const {series:ia,xAxisValueFormatType:pa,setTimeBinningInfoWhenNotProvided:ta}=ba;ba=!1;if("lineSeries"===
cd([ia])&&"date"===pa&&ud([ia])!==he.NoAggregation){const {timeIntervalUnits:Ca,timeIntervalSize:Da}=ia;ba=!0===ta||void 0!==Da&&0<Da&&void 0!==Ca}return ba};n.isStandardFeatureLayer=function(ba){return k(this,void 0,void 0,function*(){let ia=!0;if(!0===(!0===ba.url.includes(".arcgis.com/"))&&void 0!==ba.sourceJSON.serviceItemId){{var pa=ba.url;let ta=pa.toLowerCase();const Ca=ta.indexOf("/rest/services");pa=(ta=-1<Ca?pa.substring(0,Ca):pa,`${ta}/rest/info`)}try{const [ta,Ca]=yield Vc([od.Request,
od.Portal]),Da=(yield ta(pa,{query:{f:"json"}})).data;if(void 0!==Da.owningTenant&&void 0!==Da.owningSystemUrl){const Ia=new Ca({sourceJSON:(yield ta(`${Da.owningSystemUrl}/sharing/rest/portals/${Da.owningTenant}`,{authMode:"immediate",query:{f:"json"}})).data});yield Ia.load();ia=void 0===Ia.sourceJSON.subscriptionInfo.dataStoreLevel}}catch(ta){}}return ia})};n.isSupportedChart=function(ba,ia){let pa=!1;void 0!==ia&&(pa=ba.includes(cd(null==ia?void 0:ia.series)),ba=cd(ia.series),"scatterSeries"===
ba?(ia="sizePolicy"in ia.series[0],pa=pa&&!1===ia):"histogramSeries"===ba&&(ia=Object.values(na).includes(ia.series[0].dataTransformationType),pa=pa&&!0===ia));return pa};n.isValidNumber=function(ba){return null!=ba&&!1===Number.isNaN(ba)&&!0===Number.isFinite(ba)};n.loadJSAPIModules=Vc;n.localeParseFloat=function(ba,ia){const [,pa,,,,ta]=(1111.1).toLocaleString(ia);ba=ba.replace(pa,"").replace(ta,".");return parseFloat(ba)};n.mapQuery=Sd;n.normalizeString=oe;n.normalizeWhereClause=function(ba,ia){var pa=
void 0===ia||ia;ia=Jd(ba);ba=Mc({where:ba,normalize:pa,keepSurroundingQuotes:!0});pa="";return""!==ia&&""!==ba&&(pa=`${ia} = ${ba}`),pa};n.processInlineHistogramRawData=function(ba,ia){let pa={valid:!0};const {rawData:ta,dataCompatibleWithTransformation:Ca,dataCountIncompatible:Da}=be(ba,ia);return pa=!1===Ca||!0===Da?Ie(ia.dataTransformationType,Da):Ke(ia,ta),pa};n.queryAllFeatures=Td;n.queryDefaults=Ae;n.queryStatistics=Ac;n.queryUniqueIDs=function(ba){return k(this,void 0,void 0,function*(){const {queryObject:ia,
extent:pa,filter:ta,uniqueFeature:Ca,abortKey:Da}=ba;return yield Td({queryObject:ia,abortKey:Da,chartQuery:{where:ta,extent:pa},returnDistinctValues:!0,returnUniqueIdsOnly:!0,featureCount:!0===Ca?1:void 0})})};n.ramp=ug;n.sanitizeHTMLOutput=function(ba){return(new oj).sanitize(ba)};n.setChartLimits=sc;n.transformInlineHistogramData=Ke;n.uniqueValues=function(ba){return k(this,void 0,void 0,function*(){const {queryObject:ia,extent:pa,filter:ta,field:Ca,abortKey:Da}=ba;return(yield Td({queryObject:ia,
chartQuery:{where:ta,extent:pa},outFields:[Ca],returnDistinctValues:!0,abortKey:Da})).map(Ia=>Ia.attributes[Ca]).filter(Ia=>void 0!==Ia)})};n.updateSeriesVisibility=function(ba,ia){var pa;if(void 0!==ia){const {seriesId:ta,overlayType:Ca,visible:Da}=ba.detail;switch(Ca){case "Mean":ba=ia.series[0].overlays.mean;break;case "Median":ba=ia.series[0].overlays.median;break;case "Standard Deviation":ba=ia.series[0].overlays.standardDeviation;break;case "Normal Distribution":ba=ia.series[0].overlays.comparisonDistribution;
break;case "Trendline":ba=ia.series[0].overlays.trendLine;break;default:ba=null===(pa=null==ia?void 0:ia.series)||void 0===pa?void 0:pa.find(Ia=>Ia.id===ta)}void 0!==ba&&(ba.visible=Da)}};n.validateSeriesType=function(ba,ia){return k(this,void 0,void 0,function*(){if(void 0!==(null==ia?void 0:ia.series)){const ta=yield vd();for(let Ca=0;Ca<ia.series.length;Ca+=1){var pa=ia.series[Ca].type;!1===ba.includes(pa)&&(pa=Oa(ta.invalidSeriesType,{receivedType:pa,seriesIndex:`${Ca}`,expectedType:ba.join(` ${ta.or} `)}),
console.error(pa))}}})};n.validateWebChart=function(ba){return k(this,void 0,void 0,function*(){const {input:ia,seriesType:pa,queryObject:ta}=ba,Ca=yield Ij(ia,pa);let Da=[],Ia=[];return void 0!==ia&&0===Ca.length&&(Ia=yield gc(ia,ta),0===Ia.length&&(Da=yield Pf(ia,ta))),{valid:0===Ca.length&&0===Da.length&&0===Ia.length,schemaErrors:Ca,customErrors:Ia,warnings:Da}})};Object.defineProperty(n,"__esModule",{value:!0})})},"app/widgets/panels/MapMaker/panels/PrimaryPanel":function(){define("require exports tslib ./Panel ../../../../widgets/actionBars/PrimaryActionBar ../../../../utils/topic esri/core/accessorSupport/decorators esri/core/Collection ../../../../utils/getUniqueLayerId".split(" "),
function(u,n,h,r,v,z,p,g,e){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importDefault(z);g=h.__importDefault(g);r=function(b){function a(c){return b.call(this,c)||this}h.__extends(a,b);a.prototype.addEventListeners=function(){var c=this;b.prototype.addEventListeners.call(this);this.own([z.default.subscribe("layer-added",function(d){return c.showSketchPopover(d)})])};a.prototype.readAppSettings=function(){this.actionBarExpanded=this.state.config.appSettings.primaryPanel.actionBar.expanded};
a.prototype.destroyWidget=function(c){"layers"!==c&&"basemaps"!==c&&"tables"!==c||this.saveSelectedLayersForAction(c);b.prototype.destroyWidget.call(this,c)};a.prototype.saveSelectedLayersForAction=function(c){if(c=(c=this.findWidget(c))&&(c.layerList||c.tableList))c=c.get("selectedItems"),this.selectedItems=!this.payload&&(null===c||void 0===c?0:c.length)?new g.default(c.map(function(d){return e.getUniqueLayerId(d.layer)})):this.payload?new g.default([e.getUniqueLayerId(this.payload)]):new g.default};
a.prototype.saveSelectedLayers=function(c){this.selectedItems=new g.default(c&&c.map(function(d){return e.getUniqueLayerId(d)}))};a.prototype.onLayerSelected=function(c){this.payload=c=c.layer||c;this.saveSelectedLayers([c])};a.prototype.onChartSelected=function(c){this.payload=c=c.layer;this.saveSelectedLayers([c])};a.prototype.onLayerDeselected=function(c){this.selectedItems=this.selectedLayers=this.selectedBasemapLayers=this.payload=null};a.prototype.onActionClick=function(c){var d,f=c.name;c=
c.active;var l=(null===(d=this.actionBar)||void 0===d?void 0:d.findAction("maplegend")).active;"layerstyles"===f?(!c&&!l||c&&l)&&this.processAction("maplegend"):"maplegend"!==f&&l&&this.processAction("maplegend")};a.prototype.onSetFocus=function(){var c=this.currentPanel,d=1<this.numPanels?"back-button":"dismiss-button";setTimeout(function(){return null===c||void 0===c?void 0:c.setFocus(d)},50)};a.prototype.onAddActionBar=function(c){var d=this;this.actionBar=new v.default({state:this.state,panel:this,
expanded:this.actionBarExpanded,container:c,theme:this.theme,defaultActionName:this.defaultWidgetName});this.own(this.actionBar.on("click",this.handleActionClick.bind(this)));c.addEventListener("calciteActionBarToggle",function(f){return d.actionBarToggle(f)})};a.prototype.actionBarToggle=function(c){var d=this.state.config.appSettings;d.primaryPanel.actionBar.expanded=c.target.expanded;z.default.publish("app-properties-updated",d)};a.prototype.collapsePanel=function(c){b.prototype.collapsePanel.call(this,
c);var d=c?"add":"remove";document.querySelectorAll(".js-app-primary-flyout").forEach(function(f){return f.classList[d]("hide")})};a.prototype.showSketchPopover=function(c){var d;return h.__awaiter(this,void 0,void 0,function(){var f,l,m,k,q,t,w,A,x;return h.__generator(this,function(y){switch(y.label){case 0:f=this.state.config;l=f.appSettings;m=null===(d=null===l||void 0===l?void 0:l.tips)||void 0===d?void 0:d.showNewSketchLayerTip;if(!m||"map-notes"!==(null===c||void 0===c?void 0:c.type))return[3,
3];k=this;q=k.config;t=k.state;w=t.portal;return[4,(new Promise(function(B,C){u(["../wrappers/sketchlayerpopover"],B,C)})).then(h.__importStar)];case 1:return A=y.sent(),[4,A.createWidget({portal:w,payload:c,state:t,config:q})];case 2:return x=y.sent(),[2,x];case 3:return[2]}})})};return a=h.__decorate([p.subclass("")],a)}(r.default);n.default=r})},"app/widgets/actionBars/PrimaryActionBar":function(){define("require exports tslib esri/core/accessorSupport/decorators ./ActionBar ../../utils/topic".split(" "),
function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});v=h.__importDefault(v);z=h.__importDefault(z);u=function(p){function g(e){return p.call(this,e)||this}h.__extends(g,p);g.prototype.postInitialize=function(){p.prototype.postInitialize.call(this)};g.prototype.getActionNames=function(){return this.actions=["adddata layers tables basemaps charts maplegend bookmarks".split(" "),["file","mapproperties"],["share","createapp","print"],["moreinfo"]]};g.prototype.handleActionClick=function(e){"fullscreen"!==
(e.selectorTarget||e.target||e.action).id?(this.processFullScreen(),p.prototype.handleActionClick.call(this,e)):this.handleFullScreenClick(e)};g.prototype.processFullScreen=function(){this.panel.app.isFullScreen&&(this.setActive("fullscreen",!1),z.default.publish("toggle-fullscreen"),this.activeNodes=null)};g.prototype.handleFullScreenClick=function(e){var b=this;e=this.activeNodes;var a=this.panel.app.isFullScreen;a?(e.forEach(function(c){return b.setActive(c,!0,!0)}),this.activeNodes=null):this.activeNodes=
this.getAllActions().filter(function(c){return c.active}).map(function(c){return c.name});this.setActive("fullscreen",a);z.default.publish("toggle-fullscreen")};return g=h.__decorate([r.subclass("")],g)}(v.default);n.default=u})},"app/widgets/actionBars/actions/adddata":function(){define(["require","exports","tslib","./Action","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,
g)||this;g.name="adddata";g.label=g.messages.addData;g.text=g.messages.addData;g.disabled=!1;g.iconName="plus-circle";g.isActionMenu=!0;g.actions="addfromonline addfromcsv addfromkml addfromurl addfromrss addfromjson addsketch addroute addfromtileurl addfromogcurl addfromwfsurl addfromwmsurl addfromwmtsurl".split(" ");return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromonline":function(){define(["require","exports",
"tslib","./addbase","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromonline";g.label=g.messages.addFromOnline;g.text=g.messages.addFromOnline;g.textEnabled=!0;g.iconName="search";return g}h.__extends(p,z);p.prototype.postInitialize=function(){z.prototype.postInitialize.call(this)};return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addbase":function(){define(["require",
"exports","tslib","./Action","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){return z.call(this,g)||this}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromcsv":function(){define(["require","exports","tslib","./addfromurl","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",
{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromcsv";g.wrapper="addfromurl";g.label=g.messages.addFromCSV;g.text=g.messages.addFromCSV;g.iconName="file-csv";g.typeHint="csv";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromurl":function(){define(["require","exports","tslib","./addbase","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,
"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromurl";g.label=g.messages.addFromUrl;g.text=g.messages.addFromUrl;g.textEnabled=!0;g.detached=!0;g.heightScale="l";g.widthScale="m";g.iconName="server";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromkml":function(){define(["require","exports","tslib","./addfromurl","esri/core/accessorSupport/decorators"],
function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromkml";g.wrapper="addfromurl";g.label=g.messages.addFromKML;g.text=g.messages.addFromKML;g.iconName="layer-kml";g.typeHint="kml";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromrss":function(){define(["require","exports","tslib","./addfromurl","esri/core/accessorSupport/decorators"],
function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromrss";g.wrapper="addfromurl";g.label=g.messages.addFromRSS;g.text=g.messages.addFromRSS;g.iconName="layer";g.typeHint="georss";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromjson":function(){define(["require","exports","tslib","./addfromurl","esri/core/accessorSupport/decorators"],
function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromjson";g.wrapper="addfromurl";g.label=g.messages.addGeoJSON;g.text=g.messages.addGeoJSON;g.iconName="layer";g.typeHint="geojson";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addsketch":function(){define(["require","exports","tslib","./addbase","esri/core/accessorSupport/decorators"],
function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addsketch";g.label=g.messages.sketch;g.text=g.messages.sketch;g.textEnabled=!0;g.isPopoverWidget=!0;g.iconName="pencil-mark";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addroute":function(){define("require exports tslib ./addbase esri/core/accessorSupport/decorators esri/widgets/support/widget".split(" "),
function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(p){function g(e){e=p.call(this,e)||this;e.name="addroute";e.textEnabled=!0;e.isPopoverWidget=!0;e.iconName="road-sign";e.disabled=e.canUseDirection();e.hidden=e.canUseDirection();return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.text=this.label=this.messagesMapMaker.routeLayerTitle};g.prototype.canUseDirection=function(){var e,b,a=this.portal,c=this.portalUser,d=this.userRole,
f=(null===(b=null===(e=null===a||void 0===a?void 0:a.helperServices)||void 0===e?void 0:e.route)||void 0===b?void 0:b.url)||!1;e=a.urlKey&&a.customBaseUrl||a.isPortal?!0:!1;return!f||!c||!e||e&&!d.canUseNetworkAnalysis()};h.__decorate([v.property(),z.messageBundle("mapviewer/mapMaker")],g.prototype,"messagesMapMaker",void 0);return g=h.__decorate([v.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromtileurl":function(){define(["require","exports","tslib","./addbase",
"esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromtileurl";g.label=g.messages.addFromTileUrl;g.text=g.messages.addFromTileUrl;g.textEnabled=!0;g.detached=!0;g.heightScale="l";g.widthScale="m";g.iconName="tile-layer";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromogcurl":function(){define(["require",
"exports","tslib","./addbase","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromogcurl";g.label=g.messages.addFromOGC;g.text=g.messages.addFromOGC;g.textEnabled=!0;g.detached=!0;g.heightScale="l";g.widthScale="m";g.iconName="feature-layer";g.typeHint="ogc";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromwfsurl":function(){define(["require",
"exports","tslib","./addbase","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromwfsurl";g.label=g.messages.addFromWFS;g.text=g.messages.addFromWFS;g.textEnabled=!0;g.detached=!0;g.heightScale="l";g.widthScale="m";g.iconName="feature-layer";g.typeHint="wfs";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromwmsurl":function(){define(["require",
"exports","tslib","./addbase","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromwmsurl";g.label=g.messages.addFromWMS;g.text=g.messages.addFromWMS;g.textEnabled=!0;g.detached=!0;g.heightScale="l";g.widthScale="m";g.iconName="feature-layer";g.typeHint="wms";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/addfromwmtsurl":function(){define(["require",
"exports","tslib","./addbase","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="addfromwmtsurl";g.label=g.messages.addFromWMTS;g.text=g.messages.addFromWMTS;g.textEnabled=!0;g.detached=!0;g.heightScale="l";g.widthScale="m";g.iconName="feature-layer";g.typeHint="wmts";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},
"app/widgets/actionBars/actions/layers":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,e)||this;e.name="layers";e.label=e.messages.layers;e.text=e.messages.layers;e.disabled=!1;e.iconName="layers";return e}h.__extends(g,p);g.prototype.postInitialize=function(){var e=this;
this.own([v.default.subscribe("layer-added",function(){return e.layersUpdated(!1)}),v.default.subscribe("layer-removed",this.layersUpdated.bind(this)),v.default.subscribe("layers-updated",this.layersUpdated.bind(this))])};g.prototype.layersUpdated=function(e){this.active||e||(this.indicator=!0);this.scheduleRender()};return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/tables":function(){define("require exports tslib ./Action esri/core/accessorSupport/decorators ../../../utils/topic".split(" "),
function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);z=h.__importDefault(z);u=function(p){function g(e){e=p.call(this,e)||this;e.name="tables";e.label=e.messages.tables;e.text=e.messages.tables;e.disabled=!1;e.iconName="table";return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.own([z.default.subscribe("table-added",this.tablesUpdated.bind(this)),z.default.subscribe("table-removed",this.tablesUpdated.bind(this))])};g.prototype.tablesUpdated=
function(){this.active||(this.indicator=!0);this.scheduleRender()};g.prototype.hasTables=function(){var e=this,b=this.state.mapView;return b.when(function(){var a=b.map.tables;e.disabled=(null===a||void 0===a?0:a.length)?!0:!1;return e.disabled})};return g=h.__decorate([v.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/basemaps":function(){define("require exports tslib ./Action esri/core/accessorSupport/decorators ../../../utils/topic".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,
"__esModule",{value:!0});r=h.__importDefault(r);z=h.__importDefault(z);u=function(p){function g(e){e=p.call(this,e)||this;e.name="basemaps";e.label=e.messages.basemap;e.text=e.messages.basemap;e.active=!1;e.disabled=!1;e.iconName="basemap";return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.own([z.default.subscribe("basemaplayer-added",this.layersUpdated.bind(this)),z.default.subscribe("basemaplayer-removed",this.layersUpdated.bind(this)),z.default.subscribe("basemap-updated",this.layersUpdated.bind(this))])};
g.prototype.layersUpdated=function(){this.active||(this.indicator=!0);this.scheduleRender()};return g=h.__decorate([v.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/charts":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators ../../../utils/mapUtils/canSaveMap".split(" "),function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(g){function e(b){b=
g.call(this,b)||this;b.name="charts";b.label=b.messages.charts;b.text=b.messages.charts;b.disabled=!1;b.iconName="graph-bar";return b}h.__extends(e,g);e.prototype.postInitialize=function(){this.own([v.default.subscribe("layer-added",this.layersUpdated.bind(this)),v.default.subscribe("layer-removed",this.layersUpdated.bind(this)),v.default.subscribe("layers-updated",this.layersUpdated.bind(this)),v.default.subscribe("charts-updated",this.chartsUpdated.bind(this))])};e.prototype.layersUpdated=function(){this.disabled=
!1};e.prototype.chartsUpdated=function(){this.active||(this.indicator=!0)};e.prototype.canUpdate=function(){var b=this.state,a=b.portal;b=b.mapView;var c=b.map;c=null===c||void 0===c?void 0:c.portalItem;var d=a.user,f=d&&d.canCreateItems;return!d||!c&&f||p.canUpdate(b,a)};return e=h.__decorate([z.subclass("")],e)}(r.default);n.default=u})},"app/utils/mapUtils/canSaveMap":function(){define(["require","exports"],function(u,n){function h(v,z){v=v.map;var p=z.user;z=p&&p.isViewOnly||!1;v=null===v||void 0===
v?void 0:v.portalItem;p=!z&&p&&p.canCreateItems;return(!z&&v&&(v.canSaveCopy||v.isAdmin)||!v)&&p}function r(v,z){v=v.map;return(v=null===v||void 0===v?void 0:v.portalItem)&&v.canUpdate}Object.defineProperty(n,"__esModule",{value:!0});n.canSave=n.canUpdate=n.canCopy=void 0;n.canCopy=h;n.canUpdate=r;n.canSave=function(v,z){return h(v,z)||r(v,z)}})},"app/widgets/actionBars/actions/maplegend":function(){define(["require","exports","tslib","./Action","esri/core/accessorSupport/decorators"],function(u,
n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="maplegend";g.label=g.messages.layerLegend;g.text=g.messages.layerLegend;g.disabled=!1;g.iconName="legend";return g}h.__extends(p,z);p.prototype.postInitialize=function(){};return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/bookmarks":function(){define(["require","exports","tslib","./Action","esri/core/accessorSupport/decorators"],
function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="bookmarks";g.label=g.messages.bookmarks;g.text=g.messages.bookmarks;g.disabled=!0;g.iconName="bookmark";return g}h.__extends(p,z);p.prototype.postInitialize=function(){var g=this;this.state.mapView.when(function(){g.hasBookmarks()})};p.prototype.hasBookmarks=function(){this.disabled=!1;this.scheduleRender()};return p=h.__decorate([v.subclass("")],p)}(r.default);
n.default=u})},"app/widgets/actionBars/actions/file":function(){define("require exports tslib esri/core/accessorSupport/decorators ../../../utils/mapUtils/canSaveMap ../actions/save".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);u=function(p){function g(e){e=p.call(this,e)||this;e.actions=[];e.basemapUpdated=!1;e.name="file";e.label=e.messages.saveAndOpen;e.text=e.messages.saveAndOpen;e.textEnabled=!0;e.disabled=!1;e.iconName="folder";e.isActionMenu=
!0;e.actions=["savemap","savemapas","opennewmap","openmap"];return e}h.__extends(g,p);g.prototype.canSaveMap=function(){var e=this.state.portal,b=this.map,a=e.user,c=this.hasBasemap(),d=v.canCopy({map:b},e);e=v.canUpdate({map:b},e);this.disabled=!1;return c&&a&&(d||e)};return g=h.__decorate([r.subclass("")],g)}(z.default);n.default=u})},"app/widgets/actionBars/actions/save":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/watchUtils ../../../utils/mapUtils/canSaveMap esri/core/accessorSupport/decorators".split(" "),
function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importStar(z);u=function(e){function b(a){a=e.call(this,a)||this;a.actions=[];a.basemapUpdated=!1;a.name="savemapas";a.label=a.messages.saveMap;a.text=a.messages.saveMap;a.isActionPadWidget=!0;a.actions=[["savemap","savemapas"],[]];a.disabled=!1;a.iconName="save";return a}h.__extends(b,e);b.prototype.postInitialize=function(){var a=this;e.prototype.postInitialize.call(this);
var c=this.state.mapView,d="styles-updated filters-updated popup-updated featureReduction-updated attributes-updated visible-range-updated transparency-updated blending-updated layer-added layer-removed layer-updated table-added table-removed basemap-layer-added basemap-layer-removed layer-title-change title-updated layer-legend-toggle layer-time-toggle clustering-updated labeling-updated mapProperties_updated timeSlider_updated bookmarks_updated charts-updated effects-updated".split(" ");this.mapUpdated=
this.mapUpdated.bind(this);c.when(function(){var f=a.map=null===c||void 0===c?void 0:c.map;a.handles=d.map(function(l){return v.default.subscribe(l,a.mapUpdated)});a.handles.push(z.watch(f,"basemap",function(l){a.state.ignoreBasemapChange||(a.basemapUpdated=l?!0:!1,a.mapUpdated(l))}));f.bookmarks.on("change",a.mapUpdated.bind(a));a.handles.push(v.default.subscribe("map-saved",a.mapSaved.bind(a)))})};b.prototype.destroy=function(){e.prototype.destroy.call(this);this.handles&&this.handles.length&&this.handles.forEach(function(a){return a.remove()})};
b.prototype.mapUpdated=function(a){a=this.canSaveMap();!this.disabled&&a&&(this.indicator=!0,this.disabled=!1,v.default.publish("map-updated"));this.scheduleRender()};b.prototype.mapSaved=function(){this.indicator=!1;this.canSaveMap()};b.prototype.canSaveMap=function(){var a=this.state.portal,c=this.map,d=a.user,f=this.hasBasemap(),l=p.canCopy({map:c},a);a=p.canUpdate({map:c},a);(d=f&&d&&(l||a))&&(l&&!a||!l&&a)?(this.isActionPadWidget=!1,this.isModalWidget=!0,this.name=l?"savemapas":"savemap"):(this.isActionPadWidget=
!0,this.isModalWidget=!1,this.name="save");this.disabled=!d;this.actionBar.scheduleRender();return d};b.prototype.hasBasemap=function(){var a=this.map;return this.basemapUpdated||a&&a.basemap?!0:!1};return b=h.__decorate([g.subclass("")],b)}(r.default);n.default=u})},"app/widgets/actionBars/actions/opennewmap":function(){define(["require","exports","tslib","./Action","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);
u=function(z){function p(g){g=z.call(this,g)||this;g.name="opennewmap";g.label=g.messages.openNewMap;g.text=g.messages.openNewMap;g.disabled=!1;g.isModalWidget=!0;g.textEnabled=!0;g.iconName="map";return g}h.__extends(p,z);p.prototype.canCreateMap=function(){var g=this.portalUser;return g&&g.canCreateItems};return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/openmap":function(){define(["require","exports","tslib","./Action","esri/core/accessorSupport/decorators"],
function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="openmap";g.label=g.messages.openExistingMap;g.text=g.messages.openExistingMap;g.disabled=!1;g.textEnabled=!0;g.iconName="folder-open";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/savemapas":function(){define("require exports tslib ./Action ../../../utils/mapUtils/canSaveMap esri/core/accessorSupport/decorators esri/core/watchUtils ../../../utils/topic".split(" "),
function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);p=h.__importStar(p);g=h.__importDefault(g);u=function(e){function b(a){a=e.call(this,a)||this;a.name="savemapas";a.label=a.messages.saveMapAs;a.text=a.messages.saveMapAs;a.textEnabled=!0;a.disabled=!a.canSaveMap();a.isModalWidget=!0;a.iconName="save";return a}h.__extends(b,e);b.prototype.postInitialize=function(){var a=this;this.own([p.watch(this.sourceAction,"indicator",function(){return a.setIndicator()}),
g.default.subscribe("map-saved",function(){return a.update(!0)})]);var c=this.getSaveAction();this.update(c&&!c.hidden);this.setIndicator()};b.prototype.setIndicator=function(){var a,c=this.getSaveAction();this.indicator=this.disabled||null===(a=this.sourceAction)||void 0===a||!a.indicator||(null===c||void 0===c?0:c.indicator)?!1:!0};b.prototype.canSaveMap=function(){var a=this.state;return v.canCopy(a.mapView,a.portal)};b.prototype.update=function(a){this.disabled=!this.canSaveMap()};b.prototype.getSaveAction=
function(){var a=this.actionBar;return this.saveAction||(this.saveAction=a.findAction("savemap"))};return b=h.__decorate([z.subclass("")],b)}(r.default);n.default=u})},"app/widgets/actionBars/actions/savemap":function(){define("require exports tslib ./Action ../../../utils/mapUtils/canSaveMap esri/core/accessorSupport/decorators esri/core/watchUtils ../../../utils/topic".split(" "),function(u,n,h,r,v,z,p,g){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);p=h.__importStar(p);
g=h.__importDefault(g);u=function(e){function b(a){a=e.call(this,a)||this;a.name="savemap";a.label=a.messagesCommon.save;a.text=a.messagesCommon.save;a.textEnabled=!0;a.isModalWidget=!0;a.iconName="save";a.disabled=!a.canSaveMap();a.hidden=!a.canSaveMap();return a}h.__extends(b,e);b.prototype.postInitialize=function(){var a=this;this.own([p.watch(this.sourceAction,"indicator",function(){return a.setIndicator()}),g.default.subscribe("map-saved",function(){return a.update()})]);this.setIndicator()};
b.prototype.setIndicator=function(){var a;this.indicator=!this.disabled&&(null===(a=this.sourceAction)||void 0===a?void 0:a.indicator)||!1};b.prototype.canSaveMap=function(){var a=this.state;return v.canUpdate(a.mapView,a.portal)};b.prototype.update=function(){this.disabled=this.hidden=!this.canSaveMap()};return b=h.__decorate([z.subclass("")],b)}(r.default);n.default=u})},"app/widgets/actionBars/actions/mapproperties":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),
function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,e)||this;e.name="mapproperties";e.label=e.messages.mapProperties;e.text=e.messages.mapProperties;e.disabled=!1;e.iconName="gear";return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.own(v.default.subscribe("map-saved",this.onMapSaved.bind(this)))};g.prototype.onMapSaved=function(e){this.disabled=!1};g.prototype.canModify=function(){var e=
this.portalUser,b=this.state.mapView.map.portalItem;return e||!e&&b};return g=h.__decorate([z.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/fullscreen":function(){define(["require","exports","tslib","./Action","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="fullscreen";g.label=g.messages.hideInterface;g.text=g.messages.hideInterface;
g.disabled=!1;g.iconName="monitor";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/share":function(){define("require exports tslib ./Action ../../../utils/topic esri/core/accessorSupport/decorators".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);u=function(p){function g(e){e=p.call(this,e)||this;e.name="share";e.label=e.messages.share;e.text=
e.messages.share;e.active=!1;e.disabled=!e.canShare();e.isModalWidget=!0;e.textEnabled=!1;e.iconName="share";return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.own(v.default.subscribe("map-saved",this.onMapSaved.bind(this)))};g.prototype.onMapSaved=function(e){this.disabled=!this.canShare()};g.prototype.canShare=function(){var e=this.portalUser,b=this.state.mapView.map.portalItem;return e&&b&&(b.isAdmin&&e.canShare||e.canShareOthers)};return g=h.__decorate([z.subclass("")],g)}(r.default);
n.default=u})},"app/widgets/actionBars/actions/print":function(){define(["require","exports","tslib","./Action","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="print";g.label=g.messages.printMap;g.text=g.messages.printMap;g.disabled=!1;g.iconName="print";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/createapp":function(){define("require exports tslib ./Action esri/core/accessorSupport/decorators ../../../utils/topic".split(" "),
function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);z=h.__importDefault(z);u=function(p){function g(e){e=p.call(this,e)||this;e.name="createapp";e.label=e.messages.createapp;e.text=e.messages.createapp;e.disabled=!e.canCreateApp();e.iconName="apps";e.isPopoverWidget=!0;return e}h.__extends(g,p);g.prototype.postInitialize=function(){this.own(z.default.subscribe("map-saved",this.onMapSaved.bind(this)));this.hidden=this.portal.isDeveloperSubscription()};g.prototype.onMapSaved=
function(e){this.disabled=!this.canCreateApp()};g.prototype.canCreateApp=function(){var e=this.portalUser,b=e?this.userRole:null;return this.state.mapView.map.portalItem&&e&&(b&&b.canCreateItem()||!(null===e||void 0===e?0:e.isOrgUser))};return g=h.__decorate([v.subclass("")],g)}(r.default);n.default=u})},"app/widgets/actionBars/actions/feedback":function(){define(["require","exports","tslib","./Action","esri/core/accessorSupport/decorators"],function(u,n,h,r,v){Object.defineProperty(n,"__esModule",
{value:!0});r=h.__importDefault(r);u=function(z){function p(g){g=z.call(this,g)||this;g.name="feedback";g.label=g.messages.feedback;g.text=g.messages.feedback;g.active=!1;g.isModalWidget=!0;g.iconName="speech-bubble-plus";return g}h.__extends(p,z);return p=h.__decorate([v.subclass("")],p)}(r.default);n.default=u})},"app/widgets/actionBars/actions/moreinfo":function(){define("require exports tslib ./Action esri/core/accessorSupport/decorators ../../../utils/topic esri/core/reactiveUtils".split(" "),
function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);z=h.__importDefault(z);p=h.__importStar(p);u=function(g){function e(b){var a,c=g.call(this,b)||this;c.name="moreinfo";c.label=c.messages.moreInfo;c.text=c.messages.moreInfo;c.active=!1;c.isModalWidget=!0;c.iconName="information";c.indicator=c.showIndicator(null===(a=null===b||void 0===b?void 0:b.state)||void 0===a?void 0:a.config);c.hidden=c.isHidden();c.own([p.watch(function(){return c.get("indicator")},
function(){var d;return c.updateIndicator(null===(d=null===b||void 0===b?void 0:b.state)||void 0===d?void 0:d.config)})]);return c}h.__extends(e,g);e.prototype.isHidden=function(){return this.state.portal.isPortal};e.prototype.showIndicator=function(b){var a=!1;b&&(a=b.appSettings.moreInfo,a=(null===a||void 0===a?void 0:a.version)===b.authoringAppVersion?!1:!0);return a};e.prototype.updateIndicator=function(b){var a=b.appSettings;a.moreInfo?a.moreInfo.version=b.authoringAppVersion:a.moreInfo={version:b.authoringAppVersion};
z.default.publish("app-properties-updated",a)};return e=h.__decorate([v.subclass("")],e)}(r.default);n.default=u})},"app/utils/getUniqueLayerId":function(){define(["require","exports"],function(u,n){Object.defineProperty(n,"__esModule",{value:!0});n.getUniqueLayerId=void 0;n.getUniqueLayerId=function(h){var r=h.layer;h=h.id;return Number.isInteger(h)?(r?r.id+"#":"")+h:h}})},"app/widgets/panels/MapMaker/panels/CenterRow":function(){define("require exports tslib ./Panel esri/core/accessorSupport/decorators ../../../../utils/topic".split(" "),
function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);z=h.__importDefault(z);u=function(p){function g(){var e=null!==p&&p.apply(this,arguments)||this;e.detached=!0;return e}h.__extends(g,p);g.prototype.onAddActionBar=function(e){e.hidden=!0};g.prototype.addEventListeners=function(){p.prototype.addEventListeners.call(this);this.own(z.default.subscribe("action-click",this.onActionClick.bind(this)))};g.prototype.collapsePanel=function(e){p.prototype.collapsePanel.call(this,
e);this.container.hidden=e};g.prototype.onLayerSelected=function(e){var b,a;e=e.layer;if((null===e||void 0===e?void 0:e.id)!==(null===(b=this.payload)||void 0===b?void 0:b.id))if(null===e||void 0===e?0:e.isTable)this.payload=e,this.addPanelWidget({action:{name:"table"}});else if((null===e||void 0===e||!e.isTable)&&(null===e||void 0===e?void 0:e.id)!==(null===(a=this.payload)||void 0===a?void 0:a.id))this.onLayerDeselected(e)};g.prototype.onLayerDeselected=function(e){this.payload=null;this.collapsePanel(!0);
this.clearPanel();this.destroyAllWidgets();this.selectedItems=null};g.prototype.onAfterCreate=function(e){this.calcitePanel=e};g.prototype.onActionClick=function(e){var b,a,c,d;e&&"table"===e.name?(this.setHeightScale("s"),e=null===e||void 0===e?void 0:e.payload,(null===e||void 0===e?void 0:e.id)!==(null===(b=this.payload)||void 0===b?void 0:b.id)&&(this.payload=e,this.handlePanelActionClick({action:{name:"table"}}))):e&&"chart"===e.name&&(null===(null===e||void 0===e?void 0:e.payload)?(this.payload=
null,this.collapsePanel(!0)):void 0!==(null===(a=e.payload)||void 0===a?void 0:a.config)&&(null===(d=null===(c=this.payload)||void 0===c?void 0:c.config)||void 0===d?void 0:d.id)!==e.payload.config.id&&(this.payload=null===e||void 0===e?void 0:e.payload,this.addPanelWidget({action:{name:"chart",heightScale:"m"}})))};g.prototype.handlePanelActionClick=function(e){this.addPanelWidget({action:{name:"table"}})};g.prototype.destroyAllWidgets=function(){p.prototype.destroyAllWidgets.call(this);this.payload=
null;this.setHeightScale("s")};g.prototype.setHeightScale=function(e){this.container.setAttribute("height-scale",e||"s")};return g=h.__decorate([v.subclass("")],g)}(r.default);n.default=u})},"app/widgets/panels/MapMaker/timesettings/timeExtentToMode":function(){define(["require","exports"],function(u,n){Object.defineProperty(n,"__esModule",{value:!0});n.getMode=void 0;n.getMode=function(h){var r,v;if((null===h||void 0===h?0:h.start)&&(null===h||void 0===h?0:h.end))return"time-window";if((null===h||
void 0===h||!h.start)&&(null===h||void 0===h?0:h.end))return"cumulative-from-start";if((null===h||void 0===h?0:h.start)&&(null===h||void 0===h||!h.end))return"cumulative-from-end";if((null===(r=null===h||void 0===h?void 0:h.start)||void 0===r?void 0:r.getTime())===(null===(v=null===h||void 0===h?void 0:h.end)||void 0===v?void 0:v.getTime()))return"instant"}})},"app/utils/snappingOptions":function(){define(["require","exports","tslib","esri/views/interactive/snapping/SnappingOptions"],function(u,n,
h,r){Object.defineProperty(n,"__esModule",{value:!0});n.deleteSnappingOptions=n.copyCurrentToWebMap=n.readSnappingOptions=n.writeSnappingOptions=n.findLayer=n.getSnappableLayers=n.getSnappingOptionsStorageIds=void 0;r=h.__importDefault(r);var v=window.sessionStorage;n.getSnappingOptionsStorageIds=function(b){var a;b=null===(a=b.map.portalItem)||void 0===a?void 0:a.id;return{current:"snappingOptionsCurrent",webmap:b?"snappingOptionsWebmap-"+b:void 0}};n.getSnappableLayers=function(b){return b.map.layers.toArray()};
n.findLayer=function(b,a){return b.map.layers.find(function(c){return a&&c.id===a})};n.writeSnappingOptions=function(b,a){b=n.getSnappingOptionsStorageIds(b);var c=b.current,d=p(a);c&&v.setItem(c,JSON.stringify(d));b.webmap&&(b=b.webmap,a=p(a),b&&v.setItem(b,JSON.stringify(a)))};n.readSnappingOptions=function(b){var a=n.getSnappingOptionsStorageIds(b),c=a.current;a=a.webmap;c=z(b,c?JSON.parse(v.getItem(c)):void 0);b=a?z(b,a?JSON.parse(v.getItem(a)):void 0):void 0;return{current:c,webmap:b}};n.copyCurrentToWebMap=
function(b){var a=n.readSnappingOptions(b);a.current&&(b=n.getSnappingOptionsStorageIds(b).webmap,a=p(a.current),b&&v.setItem(b,JSON.stringify(a)))};n.deleteSnappingOptions=function(b){b=n.getSnappingOptionsStorageIds(b);v.removeItem(b.current)};var z=function(b,a){return a?new r.default(h.__assign(h.__assign({},a),{featureSources:g(b,a.featureSourcesIds)})):void 0},p=function(b){return b?{enabled:b.enabled,selfEnabled:b.selfEnabled,featureEnabled:b.featureEnabled,featureSourcesIds:e(b.featureSources)}:
void 0},g=function(b,a){return(n.getSnappableLayers(b)||[]).map(function(c){return{layer:c,enabled:-1<a.indexOf(c.id)}}).filter(function(c){return c})},e=function(b){return(b||[]).filter(function(a){return a.enabled}).map(function(a){var c;return null===(c=a.layer)||void 0===c?void 0:c.id})}})},"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){h=function(c){function d(f){f=c.call(this,f)||this;f.enabled=!1;f.enabledToggled=!1;f.selfEnabled=!0;f.featureEnabled=!0;f.featureSources=new r;f.distance=a.defaults.distance;f.touchSensitivityMultiplier=a.defaults.touchSensitivityMultiplier;return f}u._inheritsLoose(d,c);u._createClass(d,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},
{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&this.featureEnabled}}]);return d}(h);n.__decorate([v.property()],h.prototype,"enabled",void 0);n.__decorate([v.property()],h.prototype,"enabledToggled",void 0);n.__decorate([v.property()],h.prototype,"selfEnabled",void 0);n.__decorate([v.property()],h.prototype,"featureEnabled",void 0);n.__decorate([v.property({type:r.ofType(b)})],h.prototype,"featureSources",void 0);n.__decorate([v.property()],h.prototype,"distance",void 0);
n.__decorate([v.property()],h.prototype,"touchSensitivityMultiplier",void 0);n.__decorate([v.property({readOnly:!0})],h.prototype,"effectiveEnabled",null);n.__decorate([v.property({readOnly:!0})],h.prototype,"effectiveSelfEnabled",null);n.__decorate([v.property({readOnly:!0})],h.prototype,"effectiveFeatureEnabled",null);return h=n.__decorate([e.subclass("esri.views.interactive.snapping.SnappingOptions")],h)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){h=function(e){function b(a){a=e.call(this,a)||this;a.layer=null;a.enabled=!0;a.updating=!1;a.availability=1;return a}u._inheritsLoose(b,e);return b}(h);n.__decorate([r.property({constructOnly:!0})],h.prototype,"layer",void 0);n.__decorate([r.property()],h.prototype,"enabled",void 0);n.__decorate([r.property()],h.prototype,"updating",void 0);n.__decorate([r.property()],h.prototype,"availability",void 0);return h=n.__decorate([g.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
h)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p){let g=function(e){function b(){var a=e.apply(this,arguments)||this;a.enabled=!0;return a}n._inheritsLoose(b,e);return b}(v.JSONSupport);h.__decorate([z.property({type:Boolean})],g.prototype,
"enabled",void 0);g=h.__decorate([p.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],g);v=function(e){function b(a){a=e.call(this,a)||this;a.lineSnapper=new g;a.parallelLineSnapper=new g;a.rightAngleSnapper=new g;a.rightAngleTriangleSnapper=new g;a.shortLineThreshold=15;a.distance=5;a.pointThreshold=1E-6;a.intersectionParallelLineThreshold=1E-6;a.parallelLineThreshold=1E-6;a.touchSensitivityMultiplier=1.5;a.pointOnLineThreshold=1E-6;a.orange=new r([255,127,0]);a.lineHintWidthReference=
3;a.lineHintWidthTarget=3;a.lineHintFadedExtensions=.3;a.parallelLineHintWidth=2;a.parallelLineHintLength=24;a.parallelLineHintOffset=1.5;a.rightAngleHintSize=24;a.rightAngleHintOutlineSize=1.5;return a}n._inheritsLoose(b,e);return b}(v.JSONSupport);h.__decorate([z.property({type:g,constructOnly:!0,nonNullable:!0,json:{write:!0}})],v.prototype,"lineSnapper",void 0);h.__decorate([z.property({type:g,constructOnly:!0,nonNullable:!0,json:{write:!0}})],v.prototype,"parallelLineSnapper",void 0);h.__decorate([z.property({type:g,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],v.prototype,"rightAngleSnapper",void 0);h.__decorate([z.property({type:g,constructOnly:!0,nonNullable:!0,json:{write:!0}})],v.prototype,"rightAngleTriangleSnapper",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],v.prototype,"shortLineThreshold",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],v.prototype,"distance",void 0);h.__decorate([z.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],v.prototype,"pointThreshold",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],v.prototype,"intersectionParallelLineThreshold",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],v.prototype,"parallelLineThreshold",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],v.prototype,"touchSensitivityMultiplier",
void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],v.prototype,"pointOnLineThreshold",void 0);h.__decorate([z.property({type:r,nonNullable:!0})],v.prototype,"orange",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],v.prototype,"lineHintWidthReference",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],v.prototype,"lineHintWidthTarget",void 0);h.__decorate([z.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],v.prototype,"lineHintFadedExtensions",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],v.prototype,"parallelLineHintWidth",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],v.prototype,"parallelLineHintLength",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],v.prototype,"parallelLineHintOffset",
void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],v.prototype,"rightAngleHintSize",void 0);h.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],v.prototype,"rightAngleHintOutlineSize",void 0);v=h.__decorate([p.subclass("esri.views.interactive.snapping.Settings.Defaults")],v);h=new v;u.defaults=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"app/widgets/views/Map":function(){define("require exports tslib ../../utils/topic esri/WebMap esri/views/MapView esri/core/promiseUtils esri/Viewpoint esri/core/reactiveUtils esri/core/CollectionFlattener esri/widgets/Expand esri/widgets/Search esri/widgets/Zoom esri/widgets/Compass esri/widgets/Home esri/widgets/FloorFilter ../actionBars/MapContextMenu ../../utils/mapUtils/errorUtils ../../utils/project ../../utils/messageBundleLoader ../../utils/urlUtils ../../utils/itemUtils ../../utils/mapUtils/addToMap esri/core/Collection esri/Basemap ../panels/MapMaker/FullScreen".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D){Object.defineProperty(n,"__esModule",{value:!0});r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importDefault(z);p=h.__importStar(p);g=h.__importDefault(g);e=h.__importStar(e);b=h.__importDefault(b);a=h.__importDefault(a);c=h.__importDefault(c);d=h.__importDefault(d);f=h.__importDefault(f);l=h.__importDefault(l);m=h.__importDefault(m);k=h.__importDefault(k);y=h.__importStar(y);B=h.__importDefault(B);C=h.__importDefault(C);D=h.__importDefault(D);
var F=function(){function E(G){var O;G=this.state=null===G||void 0===G?void 0:G.state;G=this.config=null===G||void 0===G?void 0:G.config;this.webmapItem=null===G||void 0===G?void 0:G.webmapItem;this.webMap=null===G||void 0===G?void 0:G.webMap;this.layers=null===G||void 0===G?void 0:G.layers;this.portal=null===G||void 0===G?void 0:G.portal;this.urlParameters=null===G||void 0===G?void 0:G.urlParameters;this.container=(null===G||void 0===G?void 0:G.container)||"viewDiv";var H=null===(O=null===this||
void 0===this?void 0:this.urlParameters)||void 0===O?void 0:O.detached;this.popupPosition=(null===G||void 0===G?0:G.popupPosition)||!H?"top-left":"top-right";this.loadMapView()}E.prototype.loadMapView=function(){var G=this,O=this.urlParameters;return this.createMap().then(function(H){return h.__awaiter(G,void 0,void 0,function(){var K,P,L=this;return h.__generator(this,function(M){switch(M.label){case 0:return K=this.webMap=H,[4,this.createMapView()];case 1:return P=M.sent(),[4,this.loadLayers(K)];
case 2:return M.sent(),this.addLayersChangeHandler(),this.hideSublayers(K),setTimeout(function(){return h.__awaiter(L,void 0,void 0,function(){var J,R,X,U;return h.__generator(this,function(V){switch(V.label){case 0:return J=O.find,R=O.marker,J||R?[4,x.findQuery(J,P)]:[3,3];case 1:return V.sent(),[4,x.goToMarker(R,P)];case 2:V.sent(),V.label=3;case 3:return U=this,[4,this.getInitialExtent()];case 4:return X=U.initialExtent=V.sent(),[4,this.mapView.goTo({target:X})];case 5:return V.sent(),this.zoomToScale(),
this.clearUrlParameters(),[2]}})})},25),r.default.publish("webmap/load",this.mapView),[2,this.mapView]}})})},function(H){return G.onCreateMapError(H)})};E.prototype.createMapView=function(){var G;return h.__awaiter(this,void 0,void 0,function(){var O,H,K,P,L=this;return h.__generator(this,function(M){switch(M.label){case 0:return O=null===(G=this.mapView)||void 0===G?void 0:G.padding,this.mapView&&!this.mapView.destroyed&&(this.mapView.map=null,this.mapView.destroy(),this.mapView=null,this.popupDockEnabledHandle&&
(this.popupDockEnabledHandle.remove(),this.popupDockEnabledHandle=null),this.mapSpatialReferenceHandle&&(this.mapSpatialReferenceHandle.remove(),this.mapSpatialReferenceHandle=null),this.popupActionsHandler&&(this.popupActionsHandler.destroy(),this.popupActionsHandler=null),this.popupSelectedFeatureHandler&&(this.popupSelectedFeatureHandler.destroy(),this.popupSelectedFeatureHandler=null),this.layerEditingChangeHandler&&(this.layerEditingChangeHandler.remove(),this.layerEditingChangeHandler=null)),
H=this,K=H.webMap,P=this.mapView=new z.default(this.getViewProperties(K)),P.set("padding",O),P.ui.components=["attribution"],P.highlightOptions.fillOpacity=0,[4,P.when()];case 1:return M.sent(),window.esriMapView=P,this.state.mapView=P,r.default.publish("mapView_changed",P),this.updateBookmarks(),this.readAppSettings(P),this.addWidgets(P),this.addClickHandler(P),setTimeout(function(){return L.checkForErrors()},500),this.watchPopup(P),this.watchSpatialReference(P),this.watchPopupActions(P),[2,P]}})})};
E.prototype.watchPopup=function(G){var O=this;this.popupDockEnabledHandle=e.watch(function(){return G.popup.dockEnabled},function(H){var K=O.config.appSettings;K.map.popup.dockEnabled=H;r.default.publish("app-properties-updated",K)})};E.prototype.watchSpatialReference=function(G){return h.__awaiter(this,void 0,void 0,function(){var O=this;return h.__generator(this,function(H){this.mapSpatialReferenceHandle=e.watch(function(){return G.spatialReference},function(){return h.__awaiter(O,void 0,void 0,
function(){var K;return h.__generator(this,function(P){switch(P.label){case 0:return K=this,[4,this.getInitialExtent()];case 1:return[2,K.initialExtent=P.sent()]}})})});return[2]})})};E.prototype.watchPopupActions=function(G){var O=this,H=G.popup;this.popupSelectedFeatureHandler=e.watch(function(){return[H.selectedFeature,H.location]},function(K){O.addPopupActions(H)});this.popupActionsHandler=G.popup.on("trigger-action",function(K){return O.handlePopupAction(K)});this.layerEditingChangeHandler=r.default.subscribe("layer-editing-toggle",
function(){return O.addPopupActions(H)})};E.prototype.updateBookmarks=function(){var G=this,O=this.state.mapView,H=O.spatialReference,K=O.map.bookmarks;K.some(function(P){var L;return!H.equals(null===(L=null===P||void 0===P?void 0:P.extent)||void 0===L?void 0:L.spatialReference)})&&K.forEach(function(P){return h.__awaiter(G,void 0,void 0,function(){var L,M,J;return h.__generator(this,function(R){switch(R.label){case 0:return L=P.viewpoint,M=P.extent,L?[4,t.project(null===L||void 0===L?void 0:L.targetGeometry,
O)]:[3,2];case 1:return J=R.sent(),L.set("targetGeometry",J),P.set("viewPoint",L),[3,4];case 2:return[4,t.project(M,O)];case 3:J=R.sent(),P.set("extent",J),R.label=4;case 4:return[2]}})})})};E.prototype.readAppSettings=function(G){var O=this.config.appSettings;O&&(G.popup.dockEnabled=O.map.popup.dockEnabled)};E.prototype.checkForErrors=function(){var G=this;setTimeout(function(){var O=G.state,H=O.mapView;(O=O.webMap)&&p.eachAlways(O.allLayers.map(function(K){return H.whenLayerView(K)})).then(function(K){return K.filter(function(P){return P.error&&
P.error})}).then(function(K){return K&&K.length?q.showError(K.shift()):!0})},700)};E.prototype.getViewProperties=function(G){var O=this.urlParameters,H=this.container,K=this.popupPosition,P=O.center,L=O.extent,M=O.level;P=P?{center:A.getPoint(P)}:null;M=M?{zoom:A.getZoom(M)}:null;var J=A.getExtent(L);O.extent=J?O.extent:null;O=L&&J?{extent:J}:null;H={container:H};K={popup:{dockEnabled:!0,dockOptions:{buttonEnabled:!0,breakpoint:!0,position:K}}};G=h.__assign(h.__assign(h.__assign(h.__assign(h.__assign(h.__assign(h.__assign({},
P),M),O),K),H),{map:G}),{spatialReferenceLocked:!1});return h.__assign({},G)};E.prototype.getMapProperties=function(){var G,O,H;return h.__awaiter(this,void 0,void 0,function(){var K,P,L,M,J,R,X,U,V,Q,Y,fa,da;return h.__generator(this,function(ca){switch(ca.label){case 0:K=this,P=K.webmapItem,L=K.portal,M=K.urlParameters,J=L.isDeveloperSubscription(),R=M.basemapUrl,X=M.basemapReferenceUrl,ca.label=1;case 1:return ca.trys.push([1,5,,6]),R?[4,A.getBasemap(R,X)]:[3,3];case 2:return V=ca.sent(),[3,4];
case 3:V=null,ca.label=4;case 4:return U=V,[3,6];case 5:return Q=ca.sent(),Q.name="basemap:"+Q.name,q.showError(Q),[3,6];case 6:return Y=U?U:J&&L.defaultDevBasemap?(null===(G=L.defaultDevBasemap)||void 0===G?0:G.loadStatus)?L.defaultDevBasemap:C.default.fromJSON(L.defaultDevBasemap):(null===L||void 0===L?0:L.useVectorBasemaps)?L.defaultVectorBasemap:(null===L||void 0===L?0:L.defaultBasemap)?null===L||void 0===L?void 0:L.defaultBasemap:"topo",U&&(null===(O=null===Y||void 0===Y?void 0:Y.baseLayers)||
void 0===O?0:O.length)&&y.filterSublayers(null===(H=null===Y||void 0===Y?void 0:Y.baseLayers)||void 0===H?void 0:H.items[0],R,this.state),fa=P?{portalItem:P}:{basemap:Y||"topo"},da=h.__assign({},fa),[2,h.__assign({},da)]}})})};E.prototype.onCreateMapError=function(G){var O,H=G.name;!H||H&&"webmap:unsupported-version"!==H?q.showError(G,G.layer||this.webmapItem||(null===(O=this.webMap)||void 0===O?void 0:O.portalItem)):this.showUnsupportedVersionModal();this.layers=this.webmapItem=null;window.history.pushState({},
document.title,window.location.pathname);return this.loadMapView()};E.prototype.clearUrlParameters=function(){this.urlParameters.clear()};E.prototype.showUnsupportedVersionModal=function(){var G=this,O=this.portal,H=this.webmapItem;(new Promise(function(K,P){u(["../../widgets/panels/MapMaker/wrappers/unsupportedwebmap"],K,P)})).then(h.__importStar).then(function(K){var P=K.createWidget;return h.__awaiter(G,void 0,void 0,function(){var L;return h.__generator(this,function(M){switch(M.label){case 0:return[4,
P({portal:O,portalItem:H})];case 1:return L=M.sent(),L.on("close",function(){L.destroy()}),[2]}})})})};E.prototype.createMap=function(){return h.__awaiter(this,void 0,void 0,function(){var G,O,H;return h.__generator(this,function(K){switch(K.label){case 0:return[4,this.getMapProperties()];case 1:return G=K.sent(),O=this.webMap=new v.default(G),[4,O.load()];case 2:return K.sent(),H=O.tables||new B.default,O.tables=H,[2,O]}})})};E.prototype.hideSublayers=function(G){G=G.allLayers;var O=this.state.hideTypes;
O&&(null===G||void 0===G?0:G.length)&&G.forEach(function(H){H.type in O&&(H.listMode="hide-children")})};E.prototype.showWarning=function(G){G&&q.showError({name:G,type:"warning"})};E.prototype.loadLayers=function(G){var O=this;G=this.layers;G=void 0===G?[]:G;var H=this.urlParameters,K=H.urls&&H.urls.split(",http")||[];K=K.map(function(L){if(L.startsWith("://")||L.startsWith("s://"))L="http"+L;return L});H=H.url;var P=!0;H&&K.push(H);H=null;G&&G.length&&(H=(H||[]).concat(G.map(function(L){return O.getLayerFromId(L)})));
K&&K.length&&(P=K.every(function(L){return y.isSecureUrl(L.trim())}),H=(H||[]).concat(K.map(function(L){return y.getLayerFromUrl(L,O.state)})));return H&&H.length?p.eachAlways(H).then(function(L){return L.filter(function(M){return M&&!M.error&&M.value}).map(function(M){return M.value})},function(L){O.onCreateMapError(L)}).then(function(L){return O.addLayers(L,O.state)}).then(function(){return O.showWarning(P?null:"request:not-secure")}):Promise.resolve([])};E.prototype.addLayers=function(G,O){return y.addLayers(G,
O)};E.prototype.getLayerFromId=function(G){return h.__awaiter(this,void 0,void 0,function(){var O;return h.__generator(this,function(H){switch(H.label){case 0:return[4,y.getLayerFromId(G,this.state)];case 1:return O=H.sent(),[2,O]}})})};E.prototype.getInitialExtent=function(){var G=this,O,H,K=this.webmapItem,P=this.webMap,L=this.portal,M=this.mapView,J=this.layers,R=this.urlParameters,X=P.basemap,U=P.layers;P=P.initialViewProperties;P=null!=(null===(O=null===P||void 0===P?void 0:P.viewpoint)||void 0===
O?void 0:O.scale);O=L.defaultExtent;U=this.findFirstLayer(U);J=(null===J||void 0===J?0:J.length)?!0:!1;var V=O;return R&&(R.center||R.level||R.extent||R.find||R.marker)||!J&&P?Promise.resolve(M&&M.extent):J&&U?t.getExtent(U,M,(null===U||void 0===U?0:U.portalItem)?!1:!0).then(function(Q){return G.checkBasemapExtent(Q)}):K?(V=K.extent?t.project(K.extent,M):O,Promise.resolve(V)):U?t.getExtent(U,M).then(function(Q){return G.checkBasemapExtent(Q)}):(null===(H=L.defaultBasemap)||void 0===H?void 0:H.title)!==
(null===X||void 0===X?void 0:X.title)?(H=this.getLastBaselayer(X),t.getExtent(H,M,!0)):t.project(O,M)};E.prototype.findFirstLayer=function(G){return(new b.default({getCollections:function(){return[G]},getChildrenFunction:function(O){return"layers"in O?O.layers:null}})).toArray().filter(function(O){return!O.isTable}).reverse()[0]};E.prototype.zoomToScale=function(){var G,O=this.webMap,H=this.mapView,K=this.urlParameters,P=O.initialViewProperties;P=null!=(null===(G=null===P||void 0===P?void 0:P.viewpoint)||
void 0===G?void 0:G.scale);G=(G=O.layers)&&G.length?G.toArray()[0]:null;!(K&&(K.center||K.level||K.extent)||P)&&G&&0<G.minScale&&H.scale>G.minScale&&(H.scale=G.minScale,H.scale>G.minScale&&(H.zoom+=1))};E.prototype.checkBasemapExtent=function(G){return h.__awaiter(this,void 0,void 0,function(){var O,H,K,P,L,M;return h.__generator(this,function(J){switch(J.label){case 0:return O=this.portal,H=O.defaultExtent,K=this.webMap,P=K.basemap,L=this.getLastBaselayer(P||{}),G?L?(null===L||void 0===L?0:L.loaded)?
[3,2]:[4,L.load()]:[2,G]:[2,H];case 1:J.sent(),J.label=2;case 2:return M=L.fullExtent,M.contains(G)?[2,G]:[2,this.clipExtent(G,M)]}})})};E.prototype.getLastBaselayer=function(G){return(G=G.baseLayers)?G.getItemAt(0):null};E.prototype.clipExtent=function(G,O){var H=this.mapView.spatialReference.isWrappable;G=G.clone();H||(G=this.clipX(G,O));return G=this.clipY(G,O)};E.prototype.clipY=function(G,O){G.ymin<O.ymin&&G.set("ymin",-7631472.903989959);G.ymax>O.ymax&&G.set("ymax",8375052.3151479745);return G};
E.prototype.clipX=function(G,O){G.xmin<O.xmin&&G.set("xmin",O.xmin/2);G.xmax>O.xmax&&G.set("xmax",O.xmax/2);return G};E.prototype.addLayersChangeHandler=function(){var G=this;this.webMap.allLayers.on("change",function(O){var H=O.removed;(O=O.added)&&O.slice(0).shift();(null===H||void 0===H?0:H.length)&&G.hidePopupForRemovedLayers(H)})};E.prototype.hidePopupForRemovedLayers=function(G){var O=this.mapView.popup;if(O.visible){var H=((null===O||void 0===O?void 0:O.selectedFeature)||{}).sourceLayer,K=
null===H||void 0===H?void 0:H.id;if(!H||G.some(function(P){return K===P.id}))O.visible=!1}};E.prototype.addClickHandler=function(G){var O=this;this.mapViewClickHandle&&this.mapViewClickHandle.remove();this.mapViewClickHandle=G.on("click",function(H){2===H.button&&O.addContextMenu(H)})};E.prototype.addContextMenu=function(G){var O=this,H=(this.actionPad=new k.default({state:this.state,mapView:this.mapView,config:this.config,position:G})).on("hide",function(){H.remove();O.actionPad.destroy();O.actionPad=
null})};E.prototype.addWidgets=function(G){this.addZoomWidget(G);this.addHomeWidget(G);this.addFloorWidget(G);this.addCompassWidget(G);this.addFullScreenWidget(G)};E.prototype.addSearchWidget=function(G){var O=new c.default({view:G});O=new a.default({expandIconClass:"esri-icon-search",view:G,content:O});G.ui.add(O,"top-left")};E.prototype.addZoomWidget=function(G){var O=new d.default({view:G,layout:"vertical"});G.ui.add(O,"bottom-right")};E.prototype.addHomeWidget=function(G){return h.__awaiter(this,
void 0,void 0,function(){var O,H,K,P,L,M,J,R,X=this;return h.__generator(this,function(U){switch(U.label){case 0:O=this;H=O.initialExtent;K=O.webMap;P=K.initialViewProperties;this.mapSavedHandle&&(this.mapSavedHandle.remove(),this.mapSavedHandle=null);this.spatialReferenceChangedHandle&&(this.spatialReferenceChangedHandle.remove(),this.spatialReferenceChangedHandle=null);L=(null===P||void 0===P?void 0:P.viewpoint)||new g.default({targetGeometry:H});M=new l.default({view:G,viewpoint:L});if(H)return[3,
1];J=e.when(function(){return!G.updating},function(){return h.__awaiter(X,void 0,void 0,function(){return h.__generator(this,function(V){switch(V.label){case 0:return J.remove(),[4,this.getInitialExtent()];case 1:return V.sent(),M.view&&!K.initialViewProperties.viewpoint?M.viewpoint.set("targetGeometry",this.initialExtent):this.addHomeWidget(this.state.mapView),[2]}})})});return[3,3];case 1:return[4,this.getInitialExtent()];case 2:R=U.sent(),M.viewpoint.set("targetGeometry",R),U.label=3;case 3:return this.mapSavedHandle=
r.default.subscribe("map-saved",function(){return h.__awaiter(X,void 0,void 0,function(){return h.__generator(this,function(V){M.viewpoint.set("targetGeometry",this.mapView.extent);return[2]})})}),this.spatialReferenceChangedHandle=e.watch(function(){return G.spatialReference},function(){return h.__awaiter(X,void 0,void 0,function(){var V;return h.__generator(this,function(Q){switch(Q.label){case 0:return[4,this.getInitialExtent()];case 1:return V=Q.sent(),M.viewpoint.set("targetGeometry",V),[2]}})})}),
G.ui.add(M,"manual"),[2]}})})};E.prototype.addCompassWidget=function(G){return h.__awaiter(this,void 0,void 0,function(){var O;return h.__generator(this,function(H){O=new f.default({view:G});this.rotationHandle=e.watch(function(){return G.rotation},function(K){0!==K?G.ui.add(O,"manual"):G.ui.remove(O)});0!==(null===G||void 0===G?void 0:G.rotation)&&G.ui.add(O,"manual");return[2]})})};E.prototype.addFloorWidget=function(G){return h.__awaiter(this,void 0,void 0,function(){var O,H,K=this;return h.__generator(this,
function(P){O=this.webMap;O.floorInfo&&(H=this.floorWidget=new m.default({view:G}),G.ui.add(H,"bottom-right"));this.floorInfoHandle&&(this.floorInfoHandle.remove(),this.floorInfoHandle=null);this.floorInfoHandle=e.watch(function(){return O.floorInfo},function(){H&&(G.ui.remove(H),H.destroy());K.addFloorWidget(G)});return[2]})})};E.prototype.addFullScreenWidget=function(G){return h.__awaiter(this,void 0,void 0,function(){var O;return h.__generator(this,function(H){O=this.hideInterfaceWidget=new D.default;
G.ui.add(O,"manual");return[2]})})};E.prototype.addPopupActions=function(G){return h.__awaiter(this,void 0,void 0,function(){var O,H,K,P;return h.__generator(this,function(L){switch(L.label){case 0:return[4,w.fetchMessageBundles(["mapviewer/actions"])];case 1:O=L.sent()[0];H=G.selectedFeature;K=G.location;if(null===H||void 0===H?0:H.layer){if((P=H.layer.popupTemplate)||H.popupTemplate)P?(this.addEditAction(G,O),this.addDirectionsAction(G,O)):H.popupTemplate&&this.addDirectionsAction(G,O)}else K&&
this.addDirectionsAction(G,O);return[2]}})})};E.prototype.handlePopupAction=function(G){G=G.action;-1<(null===G||void 0===G?void 0:G.id.indexOf("edit-"))?r.default.publish("trigger-action",{action:{name:"editfeatures"},modifier:"edit"}):-1<(null===G||void 0===G?void 0:G.id.indexOf("directions-"))&&r.default.publish("trigger-action",{action:{name:"directions"},modifier:"add-stop"})};E.prototype.findRouteLayer=function(){return this.state.mapView.map.allLayers.toArray().reverse().find(function(G){return"route"===
G.type})};E.prototype.addEditAction=function(G,O){var H,K;G=G.selectedFeature;var P=(null===G||void 0===G?void 0:G.sourceLayer)||(null===G||void 0===G?void 0:G.layer),L=P.popupTemplate;L&&(L.actions=((null===L||void 0===L?void 0:L.actions)||[]).filter(function(M){var J;return-1===(null===(J=M.id)||void 0===J?void 0:J.indexOf("edit-"))}));(null===G||void 0===G?0:G.layer)&&(null===(H=null===G||void 0===G?void 0:G.layer)||void 0===H?0:H.map)&&"2d"===(null===(K=null===G||void 0===G?void 0:G.layer)||void 0===
K?void 0:K.type)||G.isAggregate||!this.isEditableLayer(P)||(L.actions=((null===L||void 0===L?void 0:L.actions)||[]).concat([{id:"edit-"+P.id,title:O.editFeatures,className:"esri-icon-pencil-square"}]))};E.prototype.addDirectionsAction=function(G,O){var H=G.selectedFeature,K=(null===H||void 0===H?void 0:H.sourceLayer)||(null===H||void 0===H?void 0:H.layer),P=(null===K||void 0===K?void 0:K.popupTemplate)||(null===H||void 0===H?void 0:H.popupTemplate)||G,L="route"===(null===K||void 0===K?void 0:K.type);
G=[null===K||void 0===K?void 0:K.popupTemplate,null===H||void 0===H?void 0:H.popupTemplate,G].filter(function(M){return M});(null===G||void 0===G?0:G.length)&&G.forEach(function(M){M.actions=(M.actions||[]).filter(function(J){var R;return-1===(null===(R=J.id)||void 0===R?void 0:R.indexOf("directions-"))})});!L&&this.canRoute()&&(P.actions=((null===P||void 0===P?void 0:P.actions)||[]).concat([{id:"directions-"+(null===K||void 0===K?void 0:K.id)||1,title:O.getDirections,className:"esri-icon-calcite-road-sign"}]))};
E.prototype.canRoute=function(){var G,O,H=this.portal,K=H.user;K=null===K||void 0===K?void 0:K.userRole;var P=(null===(O=null===(G=null===H||void 0===H?void 0:H.helperServices)||void 0===G?void 0:G.route)||void 0===O?void 0:O.url)||!1;G=H.urlKey&&H.customBaseUrl||H.isPortal?!0:!1;return P&&G&&(null===K||void 0===K?void 0:K.canUseNetworkAnalysis())};E.prototype.isEditableLayer=function(G){var O=this.state.map.webMap.editableLayers.find(function(K){return G.id===K.id}),H=(null===G||void 0===G?void 0:
G.get)&&G.get("capabilities.operations.supportsUpdate")||!1;return O&&H};return E}();n.default=F})},"esri/WebMap":function(){define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/arrayUtils ./core/Collection ./core/Error ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/SpatialReference ./geometry/support/spatialReferenceUtils ./geometry/support/webMercatorUtils ./layers/support/arcgisLayerUrl ./layers/support/layerUtils ./networks/UtilityNetwork ./portal/Portal ./portal/PortalItem ./portal/support/portalItemUtils ./rest/geometryService/project ./rest/support/ProjectParameters ./support/basemapUtils ./support/MapFloorInfo ./webdoc/GeotriggersInfo ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webdoc/support/writeUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/InitialViewProperties ./webmap/Version ./webmap/background/ColorBackground".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M,J,R,X,U,V,Q,Y,fa,da,ca,la,ha,S,ea){const ma=new S.Version(2,25),sa=g.ofType(la);g=g.ofType(K);const ja=c.getLogger("esri.WebMap"),wa=new Map;wa.set("image/jpeg","jpeg");wa.set("image/jpg","jpg");wa.set("image/png","png");wa.set("image/gif","gif");const Ja=M.TypeKeyword.JSAPI,va=M.TypeKeyword.DEVELOPER_BASEMAP,ra="NatGeo_World_Map Ocean_Basemap USA_Topo_Maps World_Imagery World_Street_Map World_Terrain_Base World_Topo_Map World_Hillshade Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Reference_Overlay Reference/World_Transportation".split(" ").map(Ba=>
Ba.toLowerCase());v=function(Ba){function Ha(qa){qa=Ba.call(this,qa)||this;qa.applicationProperties=null;qa.bookmarks=new sa;qa.floorInfo=null;qa.geotriggersInfo=null;qa.initialViewProperties=new ha;qa.portalItem=null;qa.presentation=null;qa.sourceVersion=null;qa.widgets=null;qa.utilityNetworks=null;qa.authoringApp=qa.authoringAppVersion=null;qa._isAuthoringAppSetByUser=qa._isAuthoringAppVersionSetByUser=!1;return qa}n._inheritsLoose(Ha,Ba);var ya=Ha.prototype;ya.destroy=function(){const qa=this.portalItem;
this.portalItem=null;null==qa?void 0:qa.destroy()};ya.initialize=function(){this.when().catch(qa=>{ja.error("#load()","Failed to load web map",qa)});if(this.resourceInfo){let qa;try{qa=this._validateJSON(this.resourceInfo)}catch(oa){this.addResolvingPromise(Promise.reject(oa));return}this.read(qa)}};ya.writeAuthoringApp=function(qa,oa){oa.authoringApp=qa&&this._isAuthoringAppSetByUser?qa:Ja};ya.writeAuthoringAppVersion=function(qa,oa){oa.authoringAppVersion=qa&&this._isAuthoringAppVersionSetByUser?
qa:r.version};ya.readInitialViewProperties=function(qa,oa){var Aa;qa=new ha;oa.background&&(qa.background=ea.fromJSON(oa.background));const Ka=null==(Aa=oa.initialState)?void 0:Aa.viewpoint;Ka&&(Ka.rotation&&S.Version.parse(oa.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===oa.authoringApp&&(Ka.rotation*=-1),qa.viewpoint=z.fromJSON(Ka));oa.mapRangeInfo&&(qa.rangeInfo=Q.fromJSON(oa.mapRangeInfo));oa.spatialReference&&(qa.spatialReference=F.fromJSON(oa.spatialReference));return qa};ya.writeInitialViewProperties=
function(qa,oa,Aa,Ka){qa&&((Aa=qa.background)&&Aa.color&&(oa.background=Aa.write({},Ka)),qa.viewpoint&&(oa.initialState={viewpoint:qa.viewpoint.write({},Ka)}),qa.rangeInfo&&(oa.mapRangeInfo=qa.rangeInfo.toJSON(Ka)),qa.spatialReference&&(oa.spatialReference=qa.spatialReference.write({},Ka)))};ya.writeLayers=function(qa,oa,Aa,Ka){oa[Aa]=this._writeLayers(qa,Ka,"operational-layers")};ya.readSourceVersion=function(qa,oa){const [Aa,Ka]=oa.version.split(".");return new S.Version(parseInt(Aa,10),parseInt(Ka,
10))};ya.writeSourceVersion=function(qa,oa,Aa){oa[Aa]=`${ma.major}.${ma.minor}`};ya.writeTables=function(qa,oa,Aa,Ka){qa=this._writeLayers(qa,Ka,"tables");qa.length&&(oa[Aa]=qa)};ya.load=function(qa){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};ya.loadAll=function(){return a.loadAll(this,qa=>{qa(this.ground,this.basemap,this.layers,this.tables)})};ya.read=function(qa,oa){oa={...oa,origin:"web-map"};const Aa=this._getAuthoringPropsState();D.readLoadable(this,qa,Ka=>
Ba.prototype.read.call(this,qa,Ka),oa);this._restoreAuthoringPropsFromState(Aa)};ya.write=function(qa,oa){if("loaded"!==this.loadStatus)throw qa=new e("webmap:not-loaded","Web map must be loaded before it can be serialized"),ja.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),qa;this._removeDanglingLayerRefs();oa={...oa,origin:"web-map",restrictedWebMapWriting:!0,webmap:this};return Ba.prototype.write.call(this,qa,oa)};ya.save=function(){var qa=
n._asyncToGenerator(function*(oa){oa=oa||{};this._validateItem();yield this._updateFromPromise;yield this.load();yield this._loadLayerContainers();yield this._beforeSave();yield this._validateMap();const Aa=this.portalItem,Ka={origin:"web-map",messages:[],writtenProperties:[],url:Aa.itemUrl&&q.urlToObject(Aa.itemUrl),portal:Aa.portal||P.getDefault()},Wa=this.write({},Ka);this._validateJSONForWriting(Ka,oa);yield this._updateItemProperties(Aa);yield this._updateItem(Aa,Wa,Ka);yield this._updateItemThumbnail();
return Aa});return function(oa){return qa.apply(this,arguments)}}();ya.saveAs=function(){var qa=n._asyncToGenerator(function*(oa,Aa){Aa=Aa||{};oa=this._getPortalItem(oa);yield this._updateFromPromise;yield this.load();yield this._loadLayerContainers();yield this._beforeSave();yield this._validateMap();const Ka={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:oa.portal},Wa=this.write({},Ka);this._validateJSONForWriting(Ka,Aa);yield this._updateItemPropertiesForSaveAs(oa);const Pa=
this._getThumbnailState();yield this._createItem(oa,Wa,Ka,Aa);this._restoreThumbnailFromState(Pa);yield this._updateItemThumbnail();return oa});return function(oa,Aa){return qa.apply(this,arguments)}}();ya.updateFrom=function(){var qa=n._asyncToGenerator(function*(oa,Aa){this._updateFromPromise=oa=this._updateFromInternal(oa,Aa);yield oa;oa===this._updateFromPromise&&(this._updateFromPromise=null)});return function(oa,Aa){return qa.apply(this,arguments)}}();ya.getLayerJSONFromResourceInfo=function(qa){var oa,
Aa,Ka,Wa;const Pa=this.resourceInfo;return this._collectAllLayersJSON(p.flatten([null==Pa?void 0:null==(oa=Pa.baseMap)?void 0:oa.baseMapLayers,null==Pa?void 0:Pa.operationalLayers,null==(Aa=this.basemap)?void 0:null==(Ka=Aa.resourceInfo)?void 0:null==(Wa=Ka.data)?void 0:Wa.baseMapLayers])).find(Ta=>Ta.id===qa.id)};ya._collectAllLayersJSON=function(qa){return qa.reduce((oa,Aa)=>{oa.push(Aa);"GroupLayer"===Aa.layerType&&(oa=oa.concat(this._collectAllLayersJSON(Aa.layers||[])));return oa},[])};ya._writeLayers=
function(qa,oa,Aa){oa={...oa,layerContainerType:Aa};return qa.map(Ka=>d.unwrap(da.getLayerJSON(Ka,"tables"===Aa?null:this.getLayerJSONFromResourceInfo(Ka),oa))).filter(Boolean).toArray()};ya._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)};ya._loadFromItem=function(qa){return qa.load().catch(oa=>{throw new e("webmap:load-portal-item","Failed to load portal item",
{error:oa});}).then(()=>{if("Web Map"!==qa.type)throw new e("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:qa.type});}).then(()=>qa.fetchData()).then(oa=>{this.resourceInfo=oa;return this._readAndLoadFromJSON(oa,{origin:"web-map",portal:qa.portal||P.getDefault()})}).then(()=>this._computeInitialViewpoint())};ya._readAndLoadFromJSON=function(qa,oa){qa=this._validateJSON(qa);this.read(qa,oa);return this._loadFromJSON(qa,oa)};ya._validateJSON=function(qa){const oa=
S.Version.parse(qa.version||"","webmap");ma.validate(oa);qa.version=`${oa.major}.${oa.minor}`;return qa};ya._loadFromJSON=function(qa,oa){const Aa={context:{...oa,layerContainerType:"operational-layers"}};this.portalItem&&(Aa.context.portal=this.portalItem.portal||P.getDefault());return(new Promise((Ka,Wa)=>u(["./layers/support/layersCreator"],Ka,Wa))).then(({populateOperationalLayers:Ka})=>{const Wa=[];var Pa=qa.operationalLayers;Pa&&Pa.length&&Wa.push(Ka(this.layers,Pa,Aa));Pa={...Aa,context:{...Aa.context,
layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};const Ta=qa.tables;Ta&&Ta.length&&Wa.push(Ka(this.tables,Ta,Pa));return m.eachAlways(Wa).then(()=>{})})};ya._computeInitialViewpoint=function(){var qa=n._asyncToGenerator(function*(){var oa,Aa;let Ka=this.initialViewProperties;!(null==(oa=Ka)?0:null==(Aa=oa.viewpoint)?0:Aa.targetGeometry)&&(oa=yield this._getExtentFromItem())&&(Ka=Ka?Ka.clone():new ha,Ka.viewpoint=new z,Ka.viewpoint.targetGeometry=oa,this.initialViewProperties=Ka)});
return function(){return qa.apply(this,arguments)}}();ya._getExtentFromItem=function(){var qa=n._asyncToGenerator(function*(){var oa,Aa;const Ka=null==(oa=this.initialViewProperties)?void 0:oa.spatialReference,Wa=null==(Aa=this.portalItem)?void 0:Aa.extent;return Ka&&Wa?Ka.isWGS84?Wa.clone():Ka.isWebMercator?G.geographicToWebMercator(Wa):(yield new Promise((Pa,Ta)=>u(["./portal/support/geometryServiceUtils"],Pa,Ta))).getGeometryServiceURL(this.portalItem).then(Pa=>{const Ta=new R;Ta.geometries=[Wa];
Ta.outSpatialReference=Ka;return J.project(Pa,Ta)}).then(Pa=>Pa[0]).catch(Pa=>{ja.error("Error projecting item's extent:",Pa);return null}):null});return function(){return qa.apply(this,arguments)}}();ya._removeDanglingLayerRefs=function(){var qa=this.applicationProperties,oa=qa&&qa.viewing&&qa.viewing.search;const Aa=Ka=>this.allLayers.some(Wa=>Wa.id===Ka);oa&&oa.layers&&(oa.layers=oa.layers.filter(Ka=>Aa(Ka.id)));oa&&oa.tables&&(oa.tables=oa.tables.filter(Ka=>this.tables.some(Wa=>Wa.id===Ka.id)));
(oa=qa&&qa.editing&&qa.editing.locationTracking)&&oa.info&&!Aa(oa.info.layerId)&&(qa.editing=null);(qa=this.presentation&&this.presentation.slides)&&qa.forEach(Ka=>{Ka.visibleLayers&&(Ka.visibleLayers=Ka.visibleLayers.filter(Wa=>Aa(Wa.id)))})};ya._validateMap=function(){var qa=n._asyncToGenerator(function*(){var oa;if(null==(oa=this.basemap)||!oa.baseLayers.length)throw new e("webmap:save","Map does not have a valid basemap with a base layer.");let Aa=null;yield k.whenOnce(()=>{const Ka=X.findSpatialReference(this.initialViewProperties,
this.basemap);Aa=Ka.spatialReference;return!Ka.updating});if(!E.equals(Aa,this.initialViewProperties.spatialReference))throw new e("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:Aa});});return function(){return qa.apply(this,arguments)}}();ya._validateItem=function(){if(!this.portalItem)throw ja.error("save: requires the portalItem property to be set"),new e("webmap:portal-item-not-set",
"Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)};ya._validateItemType=function(qa){if("Web Map"!==qa.type)throw new e("webmap:portal-item-wrong-type",'Portal item needs to have type "Web Map"');};ya._loadLayerContainers=function(){const qa=[];this.basemap&&qa.push(this.basemap.load());this.ground&&qa.push(this.ground.load());return m.eachAlways(qa).then(()=>{})};ya._beforeSave=function(){var qa=n._asyncToGenerator(function*(){const oa=[];for(const Aa of this.allLayers)if("beforeSave"in
Aa&&"function"===typeof Aa.beforeSave){const Ka=Aa.beforeSave();Ka&&oa.push(Ka)}yield m.eachAlways(oa)});return function(){return qa.apply(this,arguments)}}();ya._loadAllLayers=function(){const qa=this._getAllLayersAndTables().map(oa=>oa.load());return m.eachAlways(qa).then(()=>{})};ya._getAllLayersAndTables=function(){return this.allLayers.concat(this.allTables)};ya._validateJSONForWriting=function(qa,oa){qa=qa.messages.filter(Aa=>"error"===Aa.type).map(Aa=>new e(Aa.name,Aa.message,Aa.details));
oa.ignoreUnsupported&&(qa=qa.filter(Aa=>"layer:unsupported"!==Aa.name&&"symbol:unsupported"!==Aa.name&&"symbol-layer:unsupported"!==Aa.name&&"property:unsupported"!==Aa.name&&"url:unsupported"!==Aa.name));if(0<qa.length)throw new e("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:qa});};ya._updateItemProperties=function(){var qa=n._asyncToGenerator(function*(oa){oa.extent=yield this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry);
yield this._updateTypeKeywords(oa)});return function(oa){return qa.apply(this,arguments)}}();ya._updateItemPropertiesForSaveAs=function(){var qa=n._asyncToGenerator(function*(oa){M.removeTypeKeyword(oa,"CollectorDisabled");M.removeTypeKeyword(oa,"FieldMapsDisabled");M.removeTypeKeyword(oa,M.TypeKeyword.METADATA);M.removeTypeKeyword(oa,"OfflineDisabled");M.removeTypeKeyword(oa,"Offline Map Areas");M.removeTypeKeyword(oa,"Workforce Dispatcher");M.removeTypeKeyword(oa,"Workforce Project");M.removeTypeKeyword(oa,
"Workforce Worker");yield this._updateItemProperties(oa)});return function(oa){return qa.apply(this,arguments)}}();ya._getWGS84Extent=function(){var qa=n._asyncToGenerator(function*(oa){oa=oa.clone().normalize();let Aa;if(1<oa.length)for(const Ka of oa)Aa?Ka.width>Aa.width&&(Aa=Ka):Aa=Ka;else Aa=oa[0];return this._projectToWGS84(Aa)});return function(oa){return qa.apply(this,arguments)}}();ya._projectToWGS84=function(){var qa=n._asyncToGenerator(function*(oa){var Aa=oa.spatialReference;if(Aa.isWGS84)return oa.clone();
if(Aa.isWebMercator)return G.webMercatorToGeographic(oa);Aa=yield(yield new Promise((Wa,Pa)=>u(["./portal/support/geometryServiceUtils"],Wa,Pa))).getGeometryServiceURL(this.portalItem);const Ka=new R;Ka.geometries=[oa];Ka.outSpatialReference=F.WGS84;return(yield J.project(Aa,Ka))[0]});return function(oa){return qa.apply(this,arguments)}}();ya._updateTypeKeywords=function(){var qa=n._asyncToGenerator(function*(oa){M.addTypeKeyword(oa,Ja);yield this._loadAllLayers();this._evalCollectorKeyword(oa);this._evalDataEditingKeyword(oa);
this._evalOfflineKeyword(oa);this._evalDeveloperBasemapKeyword(oa);oa.typeKeywords&&(oa.typeKeywords=oa.typeKeywords.filter((Aa,Ka,Wa)=>Wa.indexOf(Aa)===Ka))});return function(oa){return qa.apply(this,arguments)}}();ya._evalCollectorKeyword=function(qa){M.hasTypeKeyword(qa,"CollectorDisabled")||M.hasTypeKeyword(qa,"Workforce Project")||M.hasTypeKeyword(qa,"Workforce Worker")||M.hasTypeKeyword(qa,"Workforce Dispatcher")||!this._hasEditableFeatureLayer()?M.removeTypeKeyword(qa,"Collector"):M.addTypeKeyword(qa,
"Collector")};ya._evalDataEditingKeyword=function(qa){this._hasEditableFeatureLayer()?M.addTypeKeyword(qa,"Data Editing"):M.removeTypeKeyword(qa,"Data Editing")};ya._evalOfflineKeyword=function(qa){!M.hasTypeKeyword(qa,"OfflineDisabled")&&this._isOfflineCapableMap()?M.addTypeKeyword(qa,"Offline"):M.removeTypeKeyword(qa,"Offline")};ya._evalDeveloperBasemapKeyword=function(qa){X.hasDeveloperBasemapLayer(this.basemap)?M.addTypeKeyword(qa,va):M.removeTypeKeyword(qa,va)};ya._hasEditableFeatureLayer=function(){return this._getAllLayersAndTables().some(qa=>
qa.loaded&&H.isFeatureServiceLayer(qa)&&qa.capabilities.operations.supportsEditing&&qa.editingEnabled)};ya._isOfflineCapableMap=function(){return this._getAllLayersAndTables().filter(qa=>"group"!==qa.type).every(qa=>qa.loaded&&this._isOfflineCapableLayer(qa))};ya._isFeatureCollectionLike=function(qa){return H.isFeatureCollectionLayer(qa)||"map-notes"===qa.type||"route"===qa.type};ya._isOfflineCapableLayer=function(qa){return H.isFeatureServiceLayer(qa)&&qa.capabilities.operations.supportsSync||this._isFeatureCollectionLike(qa)&&
!qa.portalItem||("tile"===qa.type||"vector-tile"===qa.type)&&(qa.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(qa)||X.isDeveloperBasemapLayer(qa))&&qa.spatialReference.equals(this.initialViewProperties.spatialReference)};ya._isExportableAGOLTileLayer=function(qa){return"tile"===qa.type?O.isServerOrServicesAGOLUrl(qa.url)&&ra.some(oa=>qa.url.toLowerCase().includes("/"+oa+"/")):!1};ya._updateItem=function(){var qa=n._asyncToGenerator(function*(oa,Aa,Ka){yield oa.update({data:Aa});
this._syncUpInstanceWithItem(oa,Aa,Ka)});return function(oa,Aa,Ka){return qa.apply(this,arguments)}}();ya._createItem=function(){var qa=n._asyncToGenerator(function*(oa,Aa,Ka,Wa){const Pa=this.portalItem,Ta=!!(Pa&&Pa.id&&Pa.portal.user),eb=oa.portal;yield eb._signIn();if(!(yield this._canCopyItem(Pa,Ta,eb)))throw new e("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");yield eb.user.addItem({item:oa,folder:Wa.folder,data:Aa});this.portalItem=oa;this._syncUpInstanceWithItem(oa,
Aa,Ka)});return function(oa,Aa,Ka,Wa){return qa.apply(this,arguments)}}();ya._canCopyItem=function(){var qa=n._asyncToGenerator(function*(oa,Aa,Ka){if(d.isSome(oa)&&oa.id&&oa.typeKeywords&&oa.typeKeywords.includes("useOnly")){if(oa.portal.portalHostname!==Ka.portalHostname)return!1;Aa||(yield oa.reload());return"admin"===oa.itemControl||"update"===oa.itemControl}return!0});return function(oa,Aa,Ka){return qa.apply(this,arguments)}}();ya._syncUpInstanceWithItem=function(qa,oa,Aa){f.MultiOriginJSONSupport.prototype.read.call(this,
{version:oa.version,authoringApp:oa.authoringApp,authoringAppVersion:oa.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:qa.itemUrl&&q.urlToObject(qa.itemUrl)});C.updateOrigins(Aa);this.resourceInfo=oa};ya._updateItemThumbnail=function(){var qa=n._asyncToGenerator(function*(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(yield this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())});return function(){return qa.apply(this,
arguments)}}();ya._getPortalItem=function(qa){qa=L.from(qa);qa.id&&(qa=qa.clone(),qa.id=null);qa.type||(qa.type="Web Map");qa.portal||(qa.portal=P.getDefault());this._validateItemType(qa);return qa};ya._updateFromInternal=function(){var qa=n._asyncToGenerator(function*(oa,Aa){Aa=Aa||{};yield k.whenOnce(()=>oa.ready);this._updateInitialViewProperties(oa,Aa);if(oa.map===this)for(const Ka of oa.allLayerViews)for(const Wa of["visible","featureEffect"])Wa in Ka&&Wa in Ka.layer&&Ka._isOverridden(Wa)&&(Ka.layer[Wa]=
Ka[Wa]);yield this._updateThumbnailUrl(oa,Aa)});return function(oa,Aa){return qa.apply(this,arguments)}}();ya._updateInitialViewProperties=function(qa,oa){if(!oa.backgroundExcluded){var Aa;this.initialViewProperties.background=null==(Aa=qa.background)?void 0:Aa.clone()}this.initialViewProperties.spatialReference=qa.spatialReference.clone();oa.viewpointExcluded||(this.initialViewProperties.viewpoint=new z({rotation:qa.rotation,scale:oa.scalePreserved?qa.scale:null,targetGeometry:this._getViewExtent(qa)}));
if(!oa.widgetsExcluded)for(const Ka of qa.persistableViewModels)Ka.updateWebDocument(this)};ya._getViewExtent=function(qa){const oa=qa.center.clone().normalize();qa=qa.extent.clone();const Aa=qa.width/2;qa.xmin=oa.x-Aa;qa.xmax=oa.x+Aa;return qa};ya._updateThumbnailUrl=function(){var qa=n._asyncToGenerator(function*(oa,Aa){Aa.thumbnailExcluded||(Aa=fa.getOptimalThumbnailSize(oa,Aa.thumbnailSize),oa=yield oa.takeScreenshot({format:"png",width:Aa.width,height:Aa.height}),this._setAutoGeneratedThumbnail(oa.dataUrl))});
return function(oa,Aa){return qa.apply(this,arguments)}}();ya._setAutoGeneratedThumbnail=function(qa){this.thumbnailUrl=qa;this._thumbnailFilename=null};ya._clearThumbnailOverride=function(){this._clearOverride("thumbnailUrl");this.clear("thumbnailUrl","user");this._thumbnailFilename=null};ya._generateCustomThumbnailFilename=function(qa){if(q.isDataProtocol(qa)){qa=(qa=(qa=q.dataComponents(qa))&&qa.mediaType)&&wa.get(qa.toLowerCase())||null;const oa=`thumbnail${Date.now()}`;return qa?`${oa}.${qa}`:
oa}return null};ya._getThumbnailState=function(){let qa=this.thumbnailUrl;qa&&(qa=this._isOverridden("thumbnailUrl")?qa:q.addQueryParameter(qa,"w","8192"));return{thumbnailUrl:qa,filename:this._thumbnailFilename}};ya._restoreThumbnailFromState=function(qa){this.thumbnailUrl=qa.thumbnailUrl;this._thumbnailFilename=qa.filename};ya._getAuthoringPropsState=function(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,
isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}};ya._restoreAuthoringPropsFromState=function(qa){qa.isAuthoringAppSetByUser?this.authoringApp=qa.authoringApp:this._isAuthoringAppSetByUser=!1;qa.isAuthoringAppVersionSetByUser?this.authoringAppVersion=qa.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1};Ha.fromJSON=function(qa){if(!qa)throw new e("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:qa})};n._createClass(Ha,
[{key:"authoringApp",set:function(qa){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",qa)}},{key:"authoringAppVersion",set:function(qa){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",qa)}},{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(qa){qa?(this._override("thumbnailUrl",qa),this._thumbnailFilename=this._generateCustomThumbnailFilename(qa)):this._clearThumbnailOverride()}}]);return Ha}(f.MultiOriginJSONMixin(b.LoadableMixin(l.EsriPromiseMixin(v))));
v.VERSION=ma;h.__decorate([t.property({type:ca,json:{write:!0}})],v.prototype,"applicationProperties",void 0);h.__decorate([t.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],v.prototype,"authoringApp",null);h.__decorate([B.writer("authoringApp")],v.prototype,"writeAuthoringApp",null);h.__decorate([t.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],v.prototype,"authoringAppVersion",null);h.__decorate([B.writer("authoringAppVersion")],v.prototype,"writeAuthoringAppVersion",
null);h.__decorate([t.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],v.prototype,"basemap",void 0);h.__decorate([t.property({type:sa,json:{write:{overridePolicy(Ba){return{enabled:!!(Ba&&0<Ba.length),ignoreOrigin:!0}}}}})],v.prototype,"bookmarks",void 0);h.__decorate([t.property({type:U,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],v.prototype,"floorInfo",void 0);h.__decorate([t.property({type:V,json:{write:!0}})],v.prototype,"geotriggersInfo",void 0);
h.__decorate([t.property({type:ha,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:ea},"initialState.viewpoint":{type:z},mapRangeInfo:{type:Q},spatialReference:{type:F}}}}})],v.prototype,"initialViewProperties",void 0);h.__decorate([x.reader("initialViewProperties")],v.prototype,"readInitialViewProperties",null);h.__decorate([B.writer("initialViewProperties")],v.prototype,"writeInitialViewProperties",
null);h.__decorate([t.property({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],v.prototype,"layers",void 0);h.__decorate([B.writer("layers")],v.prototype,"writeLayers",null);h.__decorate([t.property({type:L})],v.prototype,"portalItem",void 0);h.__decorate([t.property({json:{write:!0}})],v.prototype,"presentation",void 0);h.__decorate([t.property()],v.prototype,"resourceInfo",void 0);h.__decorate([t.property({readOnly:!0,type:S.Version,json:{read:{source:"version"},write:{allowNull:!0,
ignoreOrigin:!0,target:"version",isRequired:!0}}})],v.prototype,"sourceVersion",void 0);h.__decorate([x.reader("sourceVersion")],v.prototype,"readSourceVersion",null);h.__decorate([B.writer("sourceVersion")],v.prototype,"writeSourceVersion",null);h.__decorate([t.property({json:{read:!1,write:{ignoreOrigin:!0}}})],v.prototype,"tables",void 0);h.__decorate([B.writer("tables")],v.prototype,"writeTables",null);h.__decorate([t.property()],v.prototype,"thumbnailUrl",null);h.__decorate([t.property({type:Y,
json:{write:!0}})],v.prototype,"widgets",void 0);h.__decorate([t.property({type:g,json:{read:!0,write:!0}})],v.prototype,"utilityNetworks",void 0);return v=h.__decorate([y.subclass("esri.WebMap")],v)})},"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(u,n){u.updateOrigins=function(h){h&&h.writtenProperties&&h.writtenProperties.forEach(({target:r,propName:v,newOrigin:z})=>{n.isMultiOriginJSONMixin(r)&&z&&r.originOf(v)!==z&&r.updateOrigin(v,
z)})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(u){u.isMultiOriginJSONMixin=function(n){return n&&"getAtOrigin"in n&&"originOf"in n};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/networks/UtilityNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../layers/FeatureLayer ../layers/support/featureQueryAll ./Network ./RulesTable ./support/NamedTraceConfiguration ./support/TerminalConfiguration ./support/typeUtils ../rest/support/Query".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m){v=function(k){function q(w){w=k.call(this,w)||this;w.sharedNamedTraceConfigurations=[];w.type="utility";return w}u._inheritsLoose(q,k);var t=q.prototype;t.load=function(){var w=u._asyncToGenerator(function*(A){this.addResolvingPromise(k.prototype.load.call(this,A));this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(A));return this});return function(A){return w.apply(this,arguments)}}();t.getTerminalConfiguration=function(w){let A=null,
x=null;var y=w.layer;let B=null;if("feature"===(null==y?void 0:y.type)){if(B=y.layerId,null===B)return null}else return null;y=w.attributes;if(null==y)return null;for(const G of Object.keys(y))"ASSETGROUP"===G.toUpperCase()&&(A=w.getAttribute(G)),"ASSETTYPE"===G.toUpperCase()&&(x=w.getAttribute(G));if(!this.dataElement)return null;let C=null;w=this.dataElement.domainNetworks;for(const G of w){var D;if(w=null==(D=G.junctionSources)?void 0:D.find(O=>O.layerId===B)){var F;if(w=null==(F=w.assetGroups)?
void 0:F.find(O=>O.assetGroupCode===A)){var E;if(w=null==(E=w.assetTypes)?void 0:E.find(O=>O.assetTypeCode===x)){C=w.terminalConfigurationId;break}}}}return null!=C?(D=this.dataElement.terminalConfigurations,(D=null==D?void 0:D.find(G=>G.terminalConfigurationId===C))?f.fromJSON(D):null):null};t.getTierNames=function(w){var A;const x=null==(A=this.dataElement)?void 0:A.domainNetworks.find(y=>y.domainNetworkName===w);return(null==x?void 0:x.tiers.map(y=>y.name))||[]};t.getRulesTable=function(){var w=
u._asyncToGenerator(function*(){return this._createRulesTable()});return function(){return w.apply(this,arguments)}}();t.isUtilityLayer=function(w){return this._utilityLayerList.has(w.layerId)};t._loadNamedTraceConfigurationsFromNetwork=function(){var w=u._asyncToGenerator(function*(A){var x;if(0!==(null==(x=this.sharedNamedTraceConfigurations)?void 0:x.length)){x=this.sharedNamedTraceConfigurations.map(y=>y.globalId);A=yield this._fetchTraceConfigData(this.networkServiceUrl,x,A);for(const y of this.sharedNamedTraceConfigurations)(x=
null==A?void 0:A.find(B=>B.globalId===y.globalId))&&y.read(x,{origin:"service"})}});return function(A){return w.apply(this,arguments)}}();t._createRulesTable=function(){var w=u._asyncToGenerator(function*(){var A;const x=new e({url:this.rulesTableUrl});yield x.load();const y=null==(A=this.dataElement)?void 0:A.domainNetworks;if(!y)return null;const B=y.flatMap(C=>[...C.edgeSources,...C.junctionSources]);A=(yield this._queryRulesTable(x)).map(C=>this._hydrateRuleInfo(x,B,C));return new c({layer:x,
rules:A})});return function(){return w.apply(this,arguments)}}();t._queryRulesTable=function(){var w=u._asyncToGenerator(function*(A){const x=new m({where:"1\x3d1",outFields:["*"]});return(yield b.queryAllJSON(A,x)).features});return function(A){return w.apply(this,arguments)}}();t._hydrateRuleInfo=function(w,A,x){var y=w.fieldsIndex.get("RULETYPE"),B=w.fieldsIndex.get("CREATIONDATE"),C=w.fieldsIndex.get("FROMNETWORKSOURCEID"),D=w.fieldsIndex.get("FROMASSETGROUP"),F=w.fieldsIndex.get("FROMASSETTYPE"),
E=w.fieldsIndex.get("FROMTERMINALID"),G=w.fieldsIndex.get("TONETWORKSOURCEID"),O=w.fieldsIndex.get("TOASSETGROUP");const H=w.fieldsIndex.get("TOASSETTYPE"),K=w.fieldsIndex.get("TOTERMINALID"),P=w.fieldsIndex.get("VIANETWORKSOURCEID"),L=w.fieldsIndex.get("VIAASSETGROUP"),M=w.fieldsIndex.get("VIAASSETTYPE");w=w.fieldsIndex.get("VIATERMINALID");y=x.attributes[y.name];B=new Date(x.attributes[B.name]);x=[{networkSourceId:x.attributes[C.name],assetGroupId:x.attributes[D.name],assetTypeId:x.attributes[F.name],
terminalId:x.attributes[E.name]},{networkSourceId:x.attributes[G.name],assetGroupId:x.attributes[O.name],assetTypeId:x.attributes[H.name],terminalId:x.attributes[K.name]},{networkSourceId:x.attributes[P.name],assetGroupId:x.attributes[L.name],assetTypeId:x.attributes[M.name],terminalId:x.attributes[w.name]}];let J;(function(R){R[R.from=0]="from";R[R.to=1]="to";R[R.via=2]="via"})(J||(J={}));C={ruleType:y,creationDate:B};for(const R of[J.from,J.to,J.via]){if(y!==l.RuleType.RTEdgeJunctionEdgeConnectivity&&
R===J.via)continue;const X=x[R];D=A.find(U=>U.sourceId===X.networkSourceId);F=null==D?void 0:D.assetGroups.find(U=>U.assetGroupCode===X.assetGroupId);E=null==F?void 0:F.assetTypes.find(U=>U.assetTypeCode===X.assetTypeId);G=this._getTerminal(y,E,X);if(y===l.RuleType.RTContainment||y===l.RuleType.RTAttachment)G=null;O="";switch(R){case J.from:O="from";break;case J.to:O="to";break;case J.via:O="via"}C[`${O}NetworkSource`]=D;C[`${O}AssetGroup`]=F;C[`${O}AssetType`]=E;C[`${O}Terminal`]=G}return C};t._getTerminal=
function(w,A,x){var y,B;if(w===l.RuleType.RTAttachment||w===l.RuleType.RTContainment)return null;const C=null==A?void 0:A.terminalConfigurationId;w=null==(y=this.terminalConfigurations)?void 0:y.find(D=>D.id===C);return null==w?void 0:null==(B=w.terminals)?void 0:B.find(D=>D.id===x.terminalId)};t._fetchTraceConfigData=function(w,A,x){return h(`${w}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(A),f:"json"},...x}).then(y=>y.data.traceConfigurations)};u._createClass(q,
[{key:"serviceTerritoryFeatureLayerId",get:function(){var w;return null==(w=this.dataElement)?void 0:w.serviceTerritoryFeatureLayerId}},{key:"systemLayers",get:function(){var w,A;return{rulesTableId:null==(w=this.sourceJSON)?void 0:w.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null,subnetworksTableId:null==(A=this.sourceJSON)?void 0:A.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:
null}}},{key:"rulesTableId",get:function(){var w;return null==(w=this.sourceJSON)?void 0:w.systemLayers.rulesTableId}},{key:"rulesTableUrl",get:function(){return this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null}},{key:"subnetworksTableId",get:function(){var w;return null==(w=this.sourceJSON)?void 0:w.systemLayers.subnetworksTableId}},{key:"subnetworksTableUrl",get:function(){return this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}},{key:"terminalConfigurations",
get:function(){var w;return(null==(w=this.dataElement)?void 0:w.terminalConfigurations.map(A=>f.fromJSON(A)))||[]}},{key:"domainNetworkNames",get:function(){var w;return(null==(w=this.dataElement)?void 0:w.domainNetworks.map(A=>A.domainNetworkName))||[]}},{key:"_utilityLayerList",get:function(){const w=new Set;this.dataElement.domainNetworks.map(A=>{A.edgeSources.map(x=>{w.add(x.layerId)});A.junctionSources.map(x=>{w.add(x.layerId)})});return w}}]);return q}(a);n.__decorate([r.property({type:[d],
json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],v.prototype,"sharedNamedTraceConfigurations",void 0);n.__decorate([r.property({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],v.prototype,"type",void 0);n.__decorate([r.property({readOnly:!0})],v.prototype,"serviceTerritoryFeatureLayerId",null);n.__decorate([r.property({readOnly:!0})],v.prototype,"systemLayers",null);n.__decorate([r.property({readOnly:!0})],
v.prototype,"rulesTableId",null);n.__decorate([r.property({readOnly:!0})],v.prototype,"rulesTableUrl",null);n.__decorate([r.property({readOnly:!0})],v.prototype,"subnetworksTableId",null);n.__decorate([r.property({readOnly:!0})],v.prototype,"subnetworksTableUrl",null);n.__decorate([r.property({readOnly:!0})],v.prototype,"terminalConfigurations",null);n.__decorate([r.property({readOnly:!0})],v.prototype,"domainNetworkNames",null);return v=n.__decorate([g.subclass("esri.networks.UtilityNetwork")],v)})},
"esri/layers/support/featureQueryAll":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../rest/support/Query"],function(u,n,h,r){function v(){v=n._asyncToGenerator(function*(e,b,a){b=b.clone();e.capabilities.query.supportsMaxRecordCountFactor&&(b.maxRecordCountFactor=g(e));const c=z(e),d=e.capabilities.query.supportsPagination;b.start=0;b.num=c;let f=null;for(;;){const l=yield e.source.queryFeaturesJSON(b,a);h.isNone(f)?f=l:f.features=f.features.concat(l.features);
f.exceededTransferLimit=l.exceededTransferLimit;if(!d||!l.exceededTransferLimit)break;b.start+=c}return f});return v.apply(this,arguments)}function z(e){return g(e)*p(e)}function p(e){return e.capabilities.query.maxRecordCount||2E3}function g(e){return e.capabilities.query.supportsMaxRecordCountFactor?r.MAX_MAX_RECORD_COUNT_FACTOR:1}u.getMaxRecordCountFactor=g;u.getMaximumQuerySize=z;u.getMaximumRecordCount=p;u.queryAllJSON=function(e,b,a){return v.apply(this,arguments)};Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/networks/Network":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Loadable ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../layers/support/arcgisLayerUrl".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){const q=v.getLogger("esri.networks.Network");r=function(t){function w(x){x=t.call(this,x)||this;x.id=null;x.title=null;x.layerUrl=null;x.dataElement=null;x.fullExtent=null;x.spatialReference=null;x.type=null;x.sourceJSON=null;return x}u._inheritsLoose(w,t);var A=w.prototype;A.initialize=function(){this.when().catch(x=>{if(!g.isAbortError(x)){var y,B;q.error("#load()",`Failed to load layer (title: '${null!=(y=this.title)?y:"no title"}', id: '${null!=(B=this.id)?
B:"no id"}')`,{error:x})}})};A.load=function(){var x=u._asyncToGenerator(function*(y){this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),y));this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,y));return this});return function(y){return x.apply(this,arguments)}}();A.getLayerIdBySourceId=function(x){if(this.dataElement){const y=this.dataElement.domainNetworks;for(const B of y){for(const C of B.edgeSources?B.edgeSources:[])if(C.sourceId===x)return C.layerId;
for(const C of B.junctionSources?B.junctionSources:[])if(C.sourceId===x)return C.layerId}}return null};A._fetchLayerMetaData=function(){var x=u._asyncToGenerator(function*(y,B){y=yield h(y,{responseType:"json",query:{f:"json"},...B});this.sourceJSON=y.data;this.read(y.data,{origin:"service"})});return function(y,B){return x.apply(this,arguments)}}();A._fetchDataElement=function(){var x=u._asyncToGenerator(function*(y,B,C){this.dataElement||(y=yield h(`${y}/queryDataElements`,{responseType:"json",
query:{layers:JSON.stringify([B]),f:"json"},...C}).then(D=>{var F;return null==(F=D.data.layerDataElements)?void 0:F[0]}))&&this.read(y,{origin:"service"})});return function(y,B,C){return x.apply(this,arguments)}}();u._createClass(w,[{key:"datasetName",get:function(){var x;return null==(x=this.dataElement)?void 0:x.name}},{key:"owner",get:function(){var x;return null==(x=this.dataElement)?void 0:x.userIdentity}},{key:"schemaGeneration",get:function(){var x;return null==(x=this.dataElement)?void 0:
x.schemaGeneration}},{key:"parsedUrl",get:function(){const x=this.layerUrl;return x?e.urlToObject(x):null}},{key:"featureServiceUrl",get:function(){const x=this.parsedUrl&&k.parse(this.parsedUrl.path);return z.isSome(x)?x.url.path:null}},{key:"networkServiceUrl",get:function(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}},{key:"layerId",get:function(){const x=this.parsedUrl&&k.parse(this.parsedUrl.path);return z.isSome(x)?x.sublayer:
null}}]);return w}(p.MultiOriginJSONMixin(r));n.__decorate([b.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],r.prototype,"id",void 0);n.__decorate([b.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],r.prototype,"title",void 0);n.__decorate([b.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],r.prototype,
"layerUrl",void 0);n.__decorate([b.property({type:Object,json:{origins:{service:{read:!0}},read:!1}})],r.prototype,"dataElement",void 0);n.__decorate([b.property({type:l,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],r.prototype,"fullExtent",void 0);n.__decorate([b.property({type:m,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],r.prototype,"spatialReference",void 0);n.__decorate([b.property({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],
r.prototype,"type",void 0);n.__decorate([b.property({readOnly:!0})],r.prototype,"datasetName",null);n.__decorate([b.property({readOnly:!0})],r.prototype,"owner",null);n.__decorate([b.property({readOnly:!0})],r.prototype,"schemaGeneration",null);n.__decorate([b.property({readOnly:!0})],r.prototype,"parsedUrl",null);n.__decorate([b.property({readOnly:!0})],r.prototype,"featureServiceUrl",null);n.__decorate([b.property({readOnly:!0})],r.prototype,"networkServiceUrl",null);n.__decorate([b.property({readOnly:!0})],
r.prototype,"layerId",null);n.__decorate([b.property()],r.prototype,"sourceJSON",void 0);return r=n.__decorate([f.subclass("esri.networks.Network")],r)})},"esri/networks/RulesTable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/JSONSupport ../core/Loadable ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./support/typeUtils".split(" "),function(u,
n,h,r,v,z,p,g,e,b,a){r=function(c){function d(l){l=c.call(this,l)||this;l.request=h;return l}u._inheritsLoose(d,c);var f=d.prototype;f.initialize=function(){};f.load=function(){var l=u._asyncToGenerator(function*(m){m=this.layer.load(m).then(()=>this._initializeRulesTable());this.addResolvingPromise(m);return this});return function(m){return l.apply(this,arguments)}}();f.getFeatureSQL=function(l,m){var k=l.layerId.toString(),q=l.fieldsIndex.normalizeFieldName("assetGroup");l=l.fieldsIndex.normalizeFieldName("assetType");
q=m.attributes[q];m=m.attributes[l];if(k=this.rulesHash[k])if(k=k.assetGroupHash[q])return(k=k.assetTypeHash[m])?k:null;return null};f._initializeRulesTable=function(){var l=u._asyncToGenerator(function*(){const m={};let k;var q=k||(k={});q[q.from=0]="from";q[q.to=1]="to";q[q.via=2]="via";q=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",
assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const P of this.rules)if(P.ruleType===a.RuleType.RTJunctionJunctionConnectivity||P.ruleType===a.RuleType.RTJunctionEdgeConnectivity||P.ruleType===a.RuleType.RTEdgeJunctionEdgeConnectivity){var t=[[k.from,k.to],[k.to,k.from]];P.ruleType===a.RuleType.RTEdgeJunctionEdgeConnectivity&&(t=[[k.from,k.via],[k.via,k.from],[k.to,k.via],[k.via,k.to]]);for(const L of t){var w,A,x,y,B,C,D;t=L.shift();var F=L.shift(),E=!1;switch(P.ruleType){case a.RuleType.RTEdgeJunctionEdgeConnectivity:E=
t===k.from||t===k.to;break;case a.RuleType.RTJunctionEdgeConnectivity:E=t===k.to}var G=q[t];t=P[G.networkSourceId].layerId.toString();const M=null==(w=P[G.assetGroupId])?void 0:null==(A=w.assetGroupCode)?void 0:A.toString();G=P[G.assetTypeId];G=null==G?void 0:null==(x=G.assetTypeCode)?void 0:x.toString();var O=q[F];F=P[O.networkSourceId].layerId.toString();const J=null==(y=P[O.assetGroupId])?void 0:null==(B=y.assetGroupCode)?void 0:B.toString();O=P[O.assetTypeId];const R=null==O?void 0:null==(C=O.assetTypeCode)?
void 0:C.toString(),X=m[t]?m[t]:{assetGroupHash:{}};if(!(M&&G&&J&&R))continue;const U=X.assetGroupHash[M]?X.assetGroupHash[M]:{assetTypeHash:{}},V=U.assetTypeHash[G]?U.assetTypeHash[G]:{};V[F]=V[F]?V[F]:{};if(E&&(V[t]=V[t]?V[t]:{},E=`(assetgroup = ${M} AND assettype = ${G})`,V[t].anyVertex=V[t].anyVertex?`${V[t].anyVertex}`:`${E}`,"esriNECPEndVertex"===O.connectivityPolicy)){var H;V[t].endVertex=null!=(H=V[t])&&H.endVertex?`${V[t].endVertex}`:`${E}`}E=`(assetgroup = ${J} AND assettype = ${R})`;V[F].anyVertex=
null!=(D=V[F])&&D.anyVertex?`${V[F].anyVertex} OR ${E}`:`${E}`;if("esriNECPEndVertex"===O.connectivityPolicy){var K;V[F].endVertex=null!=(K=V[F])&&K.endVertex?`${V[F].endVertex} OR ${E}`:`${E}`}U.assetTypeHash[G]=V;X.assetGroupHash[M]=U;m[t]=X}}this.rulesHash=m});return function(){return l.apply(this,arguments)}}();return d}(r.JSONSupportMixin(v));n.__decorate([z.property({constructOnly:!0})],r.prototype,"layer",void 0);n.__decorate([z.property({constructOnly:!0})],r.prototype,"rules",void 0);n.__decorate([z.property()],
r.prototype,"rulesHash",void 0);n.__decorate([z.property({constructOnly:!0})],r.prototype,"request",void 0);return r=n.__decorate([b.subclass("esri.networks.RulesTable")],r)})},"esri/networks/support/typeUtils":function(){define(["exports","../../core/jsonMap"],function(u,n){u.RuleType=void 0;var h=u.RuleType||(u.RuleType={});h[h.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity";h[h.RTContainment=2]="RTContainment";h[h.RTAttachment=3]="RTAttachment";h[h.RTJunctionEdgeConnectivity=
4]="RTJunctionEdgeConnectivity";h[h.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity";h=new n.JSONMap({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});n=new n.JSONMap({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",
junctionEdgeToConnectivity:"junction-edge-to-connectivity"});u.associationTypeKebabDict=n;u.traceTypeKebabDict=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/networks/support/NamedTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./TraceConfiguration ./typeUtils ./UNTraceConfiguration".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){h=function(d){function f(l){l=d.call(this,l)||this;l.globalId=null;l.title=null;l.traceConfiguration=null;l.creationDate=null;l.creator=null;l.description=null;l.minStartingPoints=null;l.resultTypes=[];l.tags=[];l.traceType=null;return l}u._inheritsLoose(f,d);f.prototype.readTraceConfiguration=function(l,m){return void 0!==l.tierName?c.fromJSON(l):b.fromJSON(l)};return f}(h.MultiOriginJSONSupport);n.__decorate([r.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},
write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],h.prototype,"globalId",void 0);n.__decorate([r.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],h.prototype,"title",void 0);n.__decorate([r.property({type:b,json:{origins:{service:{read:!0}},read:!1}})],h.prototype,"traceConfiguration",void 0);n.__decorate([g.reader("service","traceConfiguration")],
h.prototype,"readTraceConfiguration",null);n.__decorate([r.property({type:Date,json:{origins:{service:{read:!0}},read:!1}})],h.prototype,"creationDate",void 0);n.__decorate([r.property({type:String,json:{origins:{service:{read:!0}},read:!1}})],h.prototype,"creator",void 0);n.__decorate([r.property({type:String,json:{origins:{service:{read:!0}},read:!1}})],h.prototype,"description",void 0);n.__decorate([r.property({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},
read:!1}})],h.prototype,"minStartingPoints",void 0);n.__decorate([r.property({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],h.prototype,"resultTypes",void 0);n.__decorate([r.property({type:[String],json:{origins:{service:{read:!0}},read:!1}})],h.prototype,"tags",void 0);n.__decorate([r.property({type:a.traceTypeKebabDict.apiValues,json:{type:a.traceTypeKebabDict.jsonValues,origins:{service:{read:a.traceTypeKebabDict.read}},read:!1}})],h.prototype,"traceType",void 0);return h=n.__decorate([e.subclass("esri.networks.support.NamedTraceConfiguration")],
h)})},"esri/networks/support/TraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g){h=function(e){function b(a){a=e.call(this,a)||this;a.conditionBarriers=[];a.outputConditions=[];a.functions=[];a.functionBarriers=[];a.traversabilityScope=
null;a.shortestPathNetworkAttributeName=null;a.includeBarriers=null;a.validateConsistency=null;a.ignoreBarriersAtStartingPoints=null;return a}u._inheritsLoose(b,e);return b}(h.JSONSupport);n.__decorate([r.property({type:[Object],json:{write:!0}})],h.prototype,"conditionBarriers",void 0);n.__decorate([r.property({type:[Object],json:{write:!0}})],h.prototype,"outputConditions",void 0);n.__decorate([r.property({type:[Object],json:{write:!0}})],h.prototype,"functions",void 0);n.__decorate([r.property({type:[Object],
json:{write:!0}})],h.prototype,"functionBarriers",void 0);n.__decorate([r.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],h.prototype,"traversabilityScope",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"shortestPathNetworkAttributeName",void 0);n.__decorate([r.property({type:Boolean,json:{write:!0}})],h.prototype,"includeBarriers",void 0);n.__decorate([r.property({type:Boolean,json:{write:!0}})],h.prototype,"validateConsistency",void 0);n.__decorate([r.property({type:Boolean,
json:{write:!0}})],h.prototype,"ignoreBarriersAtStartingPoints",void 0);return h=n.__decorate([g.subclass("esri.networks.support.TraceConfiguration")],h)})},"esri/networks/support/UNTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./TraceConfiguration".split(" "),function(u,n,h,r,
v,z,p,g){r=function(e){function b(a){a=e.call(this,a)||this;a.filterBarriers=[];a.domainNetworkName=null;a.filterBitsetNetworkAttributeName=null;a.filterFunctionBarriers=[];a.filterScope=null;a.includeContainers=null;a.includeContent=null;a.includeIsolated=null;a.includeStructures=null;a.includeUpToFirstSpatialContainer=null;a.nearestNeighbor=null;a.outputFilterCategories=[];a.outputFilters=[];a.propagators=[];a.subnetworkName=null;a.targetTierName=null;a.tierName=null;a.validateLocatability=null;
return a}u._inheritsLoose(b,e);return b}(g);n.__decorate([h.property({type:[Object],json:{write:!0}})],r.prototype,"filterBarriers",void 0);n.__decorate([h.property({type:String,json:{write:!0}})],r.prototype,"domainNetworkName",void 0);n.__decorate([h.property({type:String,json:{write:!0}})],r.prototype,"filterBitsetNetworkAttributeName",void 0);n.__decorate([h.property({type:[Object],json:{write:!0}})],r.prototype,"filterFunctionBarriers",void 0);n.__decorate([h.property({type:["junctions","edges",
"junctionsAndEdges"],json:{write:!0}})],r.prototype,"filterScope",void 0);n.__decorate([h.property({type:Boolean,json:{write:!0}})],r.prototype,"includeContainers",void 0);n.__decorate([h.property({type:Boolean,json:{write:!0}})],r.prototype,"includeContent",void 0);n.__decorate([h.property({type:Boolean,json:{write:!0}})],r.prototype,"includeIsolated",void 0);n.__decorate([h.property({type:Boolean,json:{write:!0}})],r.prototype,"includeStructures",void 0);n.__decorate([h.property({type:Boolean,json:{write:!0}})],
r.prototype,"includeUpToFirstSpatialContainer",void 0);n.__decorate([h.property({type:Object,json:{write:!0}})],r.prototype,"nearestNeighbor",void 0);n.__decorate([h.property({type:[Object],json:{write:!0}})],r.prototype,"outputFilterCategories",void 0);n.__decorate([h.property({type:[Object],json:{write:!0}})],r.prototype,"outputFilters",void 0);n.__decorate([h.property({type:[Object],json:{write:!0}})],r.prototype,"propagators",void 0);n.__decorate([h.property({type:String,json:{write:!0}})],r.prototype,
"subnetworkName",void 0);n.__decorate([h.property({type:String,json:{write:!0}})],r.prototype,"targetTierName",void 0);n.__decorate([h.property({type:String,json:{write:!0}})],r.prototype,"tierName",void 0);n.__decorate([h.property({type:Boolean,json:{write:!0}})],r.prototype,"validateLocatability",void 0);return r=n.__decorate([p.subclass("esri.networks.support.UNTraceConfiguration")],r)})},"esri/networks/support/TerminalConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Terminal".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=new h.JSONMap({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});r=function(a){function c(d){d=a.call(this,d)||this;d.defaultConfiguration=null;d.id=null;d.name=null;d.terminals=[];d.traversabilityModel=null;return d}u._inheritsLoose(c,a);return c}(r.JSONSupport);n.__decorate([v.property({type:String,json:{write:!0}})],r.prototype,"defaultConfiguration",void 0);n.__decorate([v.property({type:Number,json:{read:{source:"terminalConfigurationId"},
write:{target:"terminalConfigurationId"}}})],r.prototype,"id",void 0);n.__decorate([v.property({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],r.prototype,"name",void 0);n.__decorate([v.property({type:[b],json:{write:!0}})],r.prototype,"terminals",void 0);n.__decorate([v.property({type:h.apiValues,json:{type:h.jsonValues,read:h.read,write:h.write}})],r.prototype,"traversabilityModel",void 0);return r=n.__decorate([e.subclass("esri.networks.support.TerminalConfiguration")],
r)})},"esri/networks/support/Terminal":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g){h=function(e){function b(a){a=e.call(this,a)||this;a.id=null;a.name=null;return a}u._inheritsLoose(b,e);return b}(h.JSONSupport);n.__decorate([r.property({type:Number,
json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],h.prototype,"id",void 0);n.__decorate([r.property({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],h.prototype,"name",void 0);n.__decorate([r.property({type:Boolean,json:{write:!0}})],h.prototype,"isUpstreamTerminal",void 0);return h=n.__decorate([g.subclass("esri.networks.support.Terminal")],h)})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),
function(u,n,h,r,v,z,p,g){function e(){e=n._asyncToGenerator(function*(a,c,d){c=b(c);a=z.parseUrl(a);const f={...a.query,f:"json",...c.toJSON()},l=c.outSpatialReference,m=v.getJsonType(c.geometries[0]);c=z.asValidOptions(f,d);return h(a.path+"/project",c).then(({data:{geometries:k}})=>p.decodeGeometries(k,m,l))});return e.apply(this,arguments)}const b=r.ensureType(g);u.project=function(a,c,d){return e.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(u,n){u.decodeGeometries=function(h,r,v){const z=n.getGeometryType(r);return h.map(p=>{p=z.fromJSON(p);p.spatialReference=v;return p})};u.encodeGeometries=function(h){return{geometryType:n.getJsonType(h[0]),geometries:h.map(r=>r.toJSON())}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(u,n,h,r,v,z,p,g,e){h=function(b){function a(c){c=b.call(this,c)||this;c.geometries=null;c.outSpatialReference=null;c.transformation=null;c.transformForward=null;return c}u._inheritsLoose(a,b);a.prototype.toJSON=function(){const c=this.geometries.map(l=>l.toJSON()),d=this.geometries[0],f={};f.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());f.inSR=d.spatialReference.wkid||JSON.stringify(d.spatialReference.toJSON());f.geometries=JSON.stringify({geometryType:e.getJsonType(d),
geometries:c});this.transformation&&(f.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(f.transformForward=this.transformForward);return f};return a}(h.JSONSupport);n.__decorate([r.property()],h.prototype,"geometries",void 0);n.__decorate([r.property({json:{read:{source:"outSR"}}})],h.prototype,"outSpatialReference",void 0);n.__decorate([r.property()],h.prototype,"transformation",void 0);n.__decorate([r.property()],h.prototype,"transformForward",
void 0);return h=n.__decorate([g.subclass("esri.rest.support.ProjectParameters")],h)})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(u,n,h,r,v,z,p,
g,e,b,a){h=function(c){function d(f){f=c.call(this,f)||this;f.levelLayer=null;f.facilityLayer=null;f.siteLayer=null;return f}u._inheritsLoose(d,c);return d}(h.JSONSupport);n.__decorate([r.property({type:b,json:{write:!0}})],h.prototype,"levelLayer",void 0);n.__decorate([r.property({type:e,json:{write:!0}})],h.prototype,"facilityLayer",void 0);n.__decorate([r.property({type:a,json:{write:!0}})],h.prototype,"siteLayer",void 0);return h=n.__decorate([g.subclass("esri.support.MapFloorInfo")],h)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){h=function(e){function b(a){a=e.call(this,a)||this;a.facilityIdField=null;a.layerId=null;a.nameField=null;a.siteIdField=null;a.sublayerId=null;return a}u._inheritsLoose(b,e);return b}(h.JSONSupport);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"facilityIdField",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"layerId",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"nameField",void 0);n.__decorate([r.property({type:String,
json:{write:!0}})],h.prototype,"siteIdField",void 0);n.__decorate([r.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"sublayerId",void 0);return h=n.__decorate([g.subclass("esri.layers.support.FacilityLayerInfo")],h)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){h=function(e){function b(a){a=e.call(this,a)||this;a.facilityIdField=null;a.layerId=null;a.levelIdField=null;a.levelNumberField=null;a.longNameField=null;a.shortNameField=null;a.sublayerId=null;a.verticalOrderField=null;return a}u._inheritsLoose(b,e);return b}(h.JSONSupport);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"facilityIdField",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"layerId",void 0);n.__decorate([r.property({type:String,
json:{write:!0}})],h.prototype,"levelIdField",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"levelNumberField",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"longNameField",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"shortNameField",void 0);n.__decorate([r.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"sublayerId",
void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"verticalOrderField",void 0);return h=n.__decorate([g.subclass("esri.layers.support.LevelLayerInfo")],h)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){h=function(e){function b(a){a=e.call(this,a)||this;a.layerId=null;a.nameField=null;a.siteIdField=null;a.sublayerId=null;return a}u._inheritsLoose(b,e);return b}(h.JSONSupport);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"layerId",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"nameField",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"siteIdField",void 0);n.__decorate([r.property({type:Number,
json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"sublayerId",void 0);return h=n.__decorate([g.subclass("esri.layers.support.SiteLayerInfo")],h)})},"esri/webdoc/GeotriggersInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./geotriggersInfo/support/geotriggerTypes".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(d){d=a.call(this,d)||this;d.geotriggers=null;return d}u._inheritsLoose(c,a);return c}(h.ClonableMixin(r.JSONSupport));n.__decorate([v.property({types:[b.types],json:{write:{isRequired:!0}}})],h.prototype,"geotriggers",void 0);return h=n.__decorate([e.subclass("esri.webdoc.GeotriggersInfo")],h)})},"esri/webdoc/geotriggersInfo/support/geotriggerTypes":function(){define(["exports","../FenceGeotrigger","../Geotrigger"],function(u,n,h){u.types={base:h,
key:"type",typeMap:{fence:n}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/geotriggersInfo/FenceGeotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./DeviceLocationFeed ./FeatureFenceParameters ./Geotrigger ./GeotriggerNotificationOptions ./support/typeUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){r=function(f){function l(m){m=f.call(this,m)||this;m.enterExitRule="enter-contains-and-exit-does-not-intersect";m.feed=null;m.feedAccuracyMode="use-geometry";m.fenceNotificationRule=null;m.fenceParameters=null;m.name=null;m.notificationOptions=null;m.type="fence";return m}u._inheritsLoose(l,f);return l}(a);n.__decorate([p.enumeration(d.enterExitRuleKebabDict)],r.prototype,"enterExitRule",void 0);n.__decorate([h.property({type:e,json:{write:{isRequired:!0}}})],r.prototype,
"feed",void 0);n.__decorate([p.enumeration(d.feedAccuracyModeKebabDict)],r.prototype,"feedAccuracyMode",void 0);n.__decorate([h.property({type:d.fenceNotificationRuleKebabDict.apiValues,json:{type:d.fenceNotificationRuleKebabDict.jsonValues,read:d.fenceNotificationRuleKebabDict.read,write:{writer:d.fenceNotificationRuleKebabDict.write,isRequired:!0}}})],r.prototype,"fenceNotificationRule",void 0);n.__decorate([h.property({type:b,json:{write:{isRequired:!0}}})],r.prototype,"fenceParameters",void 0);
n.__decorate([h.property({type:String,json:{write:!0}})],r.prototype,"name",void 0);n.__decorate([h.property({type:c,json:{write:!0}})],r.prototype,"notificationOptions",void 0);n.__decorate([p.enumeration({fence:"fence"},{readOnly:!0})],r.prototype,"type",void 0);return r=n.__decorate([g.subclass("esri.webdoc.geotriggersInfo.FenceGeotrigger")],r)})},"esri/webdoc/geotriggersInfo/DeviceLocationFeed":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){r=new r.JSONMap({deviceLocation:"device-location"});h=function(c){function d(f){f=c.call(this,f)||this;f.filterExpression=null;f.type="device-location";return f}u._inheritsLoose(d,c);return d}(h.ClonableMixin(v.JSONSupport));n.__decorate([z.property({type:a,json:{write:!0}})],h.prototype,"filterExpression",void 0);n.__decorate([z.property({type:r.apiValues,readOnly:!0,json:{type:r.jsonValues,read:r.read,write:r.write}})],h.prototype,"type",void 0);return h=n.__decorate([b.subclass("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],
h)})},"esri/webdoc/geotriggersInfo/ExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g,e){h=function(b){function a(c){c=b.call(this,c)||this;c.expression=null;c.returnType="string";c.title=null;return c}u._inheritsLoose(a,
b);return a}(h.ClonableMixin(r.JSONSupport));n.__decorate([v.property({type:String,json:{write:{isRequired:!0}}})],h.prototype,"expression",void 0);n.__decorate([v.property({type:["number","string"],json:{write:!0}})],h.prototype,"returnType",void 0);n.__decorate([v.property({type:String,json:{write:!0}})],h.prototype,"title",void 0);return h=n.__decorate([e.subclass("esri.webdoc.geotriggersInfo.ExpressionInfo")],h)})},"esri/webdoc/geotriggersInfo/FeatureFenceParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./FeatureFilter ./FeatureLayerSource".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){h=function(d){function f(l){l=d.call(this,l)||this;l.fenceSource=null;l.filter=null;l.bufferDistance=null;l.type="features";return l}u._inheritsLoose(f,d);return f}(h.ClonableMixin(r.JSONSupport));n.__decorate([v.property({type:c,json:{write:{isRequired:!0}}})],h.prototype,"fenceSource",void 0);n.__decorate([v.property({type:a,json:{write:!0}})],h.prototype,"filter",void 0);n.__decorate([v.property({type:Number,json:{write:!0}})],h.prototype,"bufferDistance",void 0);
n.__decorate([e.enumeration({features:"features"},{readOnly:!0})],h.prototype,"type",void 0);return h=n.__decorate([b.subclass("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],h)})},"esri/webdoc/geotriggersInfo/FeatureFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){r=function(c){function d(f){f=c.call(this,f)||this;f.geometry=null;f.where=null;return f}u._inheritsLoose(d,c);return d}(r.ClonableMixin(v.JSONSupport));n.__decorate([z.property({types:h.geometryTypes,json:{read:a.fromJSON,write:!0}})],r.prototype,"geometry",void 0);n.__decorate([z.property({type:String,json:{write:!0}})],r.prototype,"where",void 0);return r=n.__decorate([b.subclass("esri.webdoc.geotriggersInfo.FeatureFilter")],r)})},"esri/webdoc/geotriggersInfo/FeatureLayerSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(d){d=a.call(this,d)||this;d.layerId=null;d.layerUrl=null;d.type="feature-layer";return d}u._inheritsLoose(c,a);return c}(h.ClonableMixin(r.JSONSupport));n.__decorate([v.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],h.prototype,"layerId",void 0);n.__decorate([v.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],h.prototype,"layerUrl",void 0);n.__decorate([e.enumeration({featureLayer:"feature-layer"},
{readOnly:!0})],h.prototype,"type",void 0);return h=n.__decorate([b.subclass("esri.webdoc.geotriggersInfo.FeatureLayerSource")],h)})},"esri/webdoc/geotriggersInfo/Geotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){h=function(c){function d(f){f=c.call(this,f)||this;f.type="fence";return f}u._inheritsLoose(d,c);return d}(h.ClonableMixin(r.JSONSupport));n.__decorate([b.enumeration({fence:"fence"},{readOnly:!0})],h.prototype,"type",void 0);return h=n.__decorate([a.subclass("esri.webdoc.geotriggersInfo.Geotrigger")],h)})},"esri/webdoc/geotriggersInfo/GeotriggerNotificationOptions":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(d){d=a.call(this,d)||this;d.expressionInfo=null;d.requestedActions=null;return d}u._inheritsLoose(c,a);return c}(h.ClonableMixin(r.JSONSupport));n.__decorate([v.property({type:b,json:{write:!0}})],h.prototype,"expressionInfo",void 0);n.__decorate([v.property({type:[String],json:{write:!0}})],h.prototype,"requestedActions",void 0);return h=n.__decorate([e.subclass("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],h)})},"esri/webdoc/geotriggersInfo/support/typeUtils":function(){define(["exports",
"../../../core/jsonMap"],function(u,n){const h=new n.JSONMap({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),r=new n.JSONMap({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"});n=new n.JSONMap({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});u.enterExitRuleKebabDict=
h;u.feedAccuracyModeKebabDict=r;u.fenceNotificationRuleKebabDict=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/RangeInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p){var g;h=g=function(e){function b(a){a=e.call(this,a)||
this;a.activeRange=null;a.currentRangeExtent=null;a.fullRangeExtent=null;return a}u._inheritsLoose(b,e);b.prototype.clone=function(){return new g(r.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))};return b}(h.JSONSupport);n.__decorate([v.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],h.prototype,"activeRange",void 0);n.__decorate([v.property({type:[Number],
json:{write:!0}})],h.prototype,"currentRangeExtent",void 0);n.__decorate([v.property({type:[Number],json:{write:!0}})],h.prototype,"fullRangeExtent",void 0);return h=g=n.__decorate([p.subclass("esri.webdoc.RangeInfo")],h)})},"esri/webdoc/Widgets":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),
function(u,n,h,r,v,z,p,g,e,b){var a;h=a=function(c){function d(f){f=c.call(this,f)||this;f.range=null;f.timeSlider=null;f.floorFilter=null;return f}u._inheritsLoose(d,c);d.prototype.clone=function(){return new a(r.clone({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))};return d}(h.JSONSupport);n.__decorate([v.property({type:e,json:{write:!0}})],h.prototype,"range",void 0);n.__decorate([v.property({type:b,json:{write:!0}})],h.prototype,"timeSlider",void 0);n.__decorate([v.property({type:g,
json:{write:!0}})],h.prototype,"floorFilter",void 0);return h=a=n.__decorate([p.subclass("esri.webdoc.Widgets")],h)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p){var g;h=g=function(e){function b(a){a=e.call(this,a)||this;a.enabled=
!1;a.longNames=!1;a.minimized=!1;a.pinnedLevels=!1;a.site=null;a.facility=null;a.level=null;return a}u._inheritsLoose(b,e);b.prototype.clone=function(){return new g(r.clone({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))};return b}(h.JSONSupport);n.__decorate([v.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],h.prototype,"enabled",void 0);n.__decorate([v.property({type:Boolean,
json:{read:{source:"longNames"},write:{target:"longNames"}}})],h.prototype,"longNames",void 0);n.__decorate([v.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],h.prototype,"minimized",void 0);n.__decorate([v.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],h.prototype,"pinnedLevels",void 0);n.__decorate([v.property({type:String,json:{read:{source:"site"},write:{target:"site"}}})],h.prototype,"site",void 0);n.__decorate([v.property({type:String,
json:{read:{source:"facility"},write:{target:"facility"}}})],h.prototype,"facility",void 0);n.__decorate([v.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],h.prototype,"level",void 0);return h=g=n.__decorate([p.subclass("esri.webdoc.widgets.FloorFilter")],h)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e){var b;h=new h.JSONMap({slider:"slider",picker:"picker"});r=b=function(a){function c(d){d=a.call(this,d)||this;d.interactionMode=null;d.numStops=null;d.stopInterval=null;return d}u._inheritsLoose(c,a);c.prototype.clone=function(){return new b({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})};return c}(r.JSONSupport);n.__decorate([v.property({type:h.apiValues,nonNullable:!0,json:{type:h.jsonValues,default:null,read:{reader:h.read},
write:{isRequired:!0,writer:h.write}}})],r.prototype,"interactionMode",void 0);n.__decorate([v.property({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const a=null!=this.stopInterval;return{enabled:!a,isRequired:!a}}}}})],r.prototype,"numStops",void 0);n.__decorate([v.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],r.prototype,"stopInterval",void 0);return r=b=n.__decorate([e.subclass("esri.webdoc.widgets.Range")],
r)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d){var f;
v=f=function(l){function m(q){q=l.call(this,q)||this;q.currentTimeExtent=null;q.fullTimeExtent=null;q.loop=!1;q.numStops=null;q.numThumbs=null;q.stopDelay=null;q.stopInterval=null;q.stops=null;return q}u._inheritsLoose(m,l);var k=m.prototype;k.readCurrentTimeExtent=function(q){if(q)return new h({start:null!=q[0]?new Date(q[0]):null,end:null!=q[1]?new Date(q[1]):null})};k.writeCurrentTimeExtent=function(q,t,w){q&&g.setDeepValue(w,[p.isSome(q.start)?q.start.getTime():null,p.isSome(q.end)?q.end.getTime():
null],t)};k.readFullTimeExtent=function(q,t){if(q=t.properties)return new h({start:null!=q.startTime?new Date(q.startTime):null,end:null!=q.endTime?new Date(q.endTime):null})};k.writeFullTimeExtent=function(q,t){if(q){t=t.properties=t.properties||{};var w=q.end;q=q.start;w&&(t.endTime=p.isSome(w)?w.getTime():null);q&&(t.startTime=p.isSome(q)?q.getTime():null)}};k.readStopInterval=function(q,t,w){return q?r.fromJSON({value:q.interval,unit:q.units},w):null};k.writeStopInterval=function(q,t,w,A){q&&
(q=q.toJSON(A),g.setDeepValue(w,{interval:q.value,units:q.unit},t))};k.readStops=function(q){return q&&q.length?q.map(t=>new Date(t)):null};k.writeStops=function(q,t,w){q&&q.length&&g.setDeepValue(w,q.map(A=>A.getTime()),t)};k.clone=function(){return new f(z.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))};return m}(v.JSONSupport);
n.__decorate([e.property({type:h,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],v.prototype,"currentTimeExtent",void 0);n.__decorate([a.reader("currentTimeExtent")],v.prototype,"readCurrentTimeExtent",null);n.__decorate([d.writer("currentTimeExtent")],v.prototype,"writeCurrentTimeExtent",null);n.__decorate([e.property({type:h,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],
v.prototype,"fullTimeExtent",void 0);n.__decorate([a.reader("fullTimeExtent")],v.prototype,"readFullTimeExtent",null);n.__decorate([d.writer("fullTimeExtent")],v.prototype,"writeFullTimeExtent",null);n.__decorate([e.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],v.prototype,"loop",void 0);n.__decorate([e.property({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var l;
const m=!!this.stopInterval,k=!(null==(l=this.stops)||!l.length);l=!(m||k);return{enabled:l,isRequired:l}}}}})],v.prototype,"numStops",void 0);n.__decorate([e.property({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],v.prototype,"numThumbs",void 0);n.__decorate([e.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],v.prototype,
"stopDelay",void 0);n.__decorate([e.property({type:r,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var l;const m=null!=this.numStops,k=!(null==(l=this.stops)||!l.length);return{enabled:!k,isRequired:!(m||k)}}}}})],v.prototype,"stopInterval",void 0);n.__decorate([a.reader("stopInterval")],v.prototype,"readStopInterval",null);n.__decorate([d.writer("stopInterval")],v.prototype,"writeStopInterval",null);n.__decorate([e.property({type:[Date],
json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],v.prototype,"stops",void 0);n.__decorate([a.reader("stops")],v.prototype,"readStops",null);n.__decorate([d.writer("stops")],v.prototype,"writeStops",null);return v=f=n.__decorate([c.subclass("esri.webdoc.widgets.TimeSlider")],v)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(u){const n={width:600,height:400};u.getOptimalThumbnailSize=
function(h,r){r=r||n;let {width:v,height:z}=r;r=v/z;1.5>r?z=v/1.5:1.5<r&&(v=1.5*z);v>h.width&&(z*=h.width/v,v=h.width);z>h.height&&(v*=h.height/z,z=h.height);return{width:Math.round(v),height:Math.round(z)}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webmap/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(u,n,h,r,v,z,p,g){var e;h=e=function(b){function a(c){c=b.call(this,c)||this;c.editing=null;c.offline=null;c.viewing=null;return c}u._inheritsLoose(a,b);a.prototype.clone=function(){return new e(r.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))};return a}(h.JSONSupport);n.__decorate([v.property({json:{write:!0}})],h.prototype,"editing",void 0);n.__decorate([v.property({json:{write:!0}})],h.prototype,"offline",void 0);n.__decorate([v.property({type:g,json:{write:!0}})],
h.prototype,"viewing",void 0);return h=e=n.__decorate([p.subclass("esri.webmap.ApplicationProperties")],h)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),function(u,n,h,r,v,z,p,g){var e;h=e=function(b){function a(c){c=b.call(this,
c)||this;c.search=null;return c}u._inheritsLoose(a,b);a.prototype.clone=function(){return new e(r.clone({search:this.search}))};return a}(h.JSONSupport);n.__decorate([v.property({type:g,json:{write:!0}})],h.prototype,"search",void 0);return h=e=n.__decorate([p.subclass("esri.webdoc.applicationProperties.Viewing")],h)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){var f;const l=h.ofType(c),m=h.ofType(d);h=f=function(k){function q(w){w=k.call(this,w)||this;w.addressSearchEnabled=!0;w.enabled=!0;w.hintText=null;w.layers=new l;w.tables=new m;return w}u._inheritsLoose(q,k);var t=q.prototype;t.readAddressSearchEnabled=function(w){return!w};t.writeAddressSearchEnabled=function(w,A,x){A[x]=!w};t.clone=function(){return new f(v.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,
tables:this.tables}))};return q}(r.JSONSupport);n.__decorate([z.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"addressSearchEnabled",void 0);n.__decorate([g.reader("addressSearchEnabled")],h.prototype,"readAddressSearchEnabled",null);n.__decorate([b.writer("addressSearchEnabled")],h.prototype,"writeAddressSearchEnabled",null);n.__decorate([z.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],h.prototype,"enabled",void 0);n.__decorate([z.property({type:String,json:{write:!0}})],h.prototype,"hintText",void 0);n.__decorate([z.property({type:l,json:{write:{overridePolicy:a.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],h.prototype,"layers",void 0);n.__decorate([z.property({type:m,json:{read:!0,write:{overridePolicy:a.writeNonEmptyCollectionPolicy}}})],
h.prototype,"tables",void 0);return h=f=n.__decorate([e.subclass("esri.webdoc.applicationProperties.Search")],h)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(u){u.writeNonEmptyCollectionPolicy=function(n){return{enabled:!(null==n||!n.length)}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(u,n,h,r,v,z,p,g){var e;h=e=function(b){function a(c){c=b.call(this,c)||this;c.field=null;c.id=null;c.subLayer=null;return c}u._inheritsLoose(a,b);a.prototype.clone=function(){return new e(r.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return a}(h.JSONSupport);n.__decorate([v.property({type:g,json:{write:{isRequired:!0}}})],h.prototype,"field",void 0);n.__decorate([v.property({type:String,json:{write:{isRequired:!0}}})],h.prototype,"id",void 0);n.__decorate([v.property({type:z.Integer,
json:{write:!0}})],h.prototype,"subLayer",void 0);return h=e=n.__decorate([p.subclass("esri.webdoc.applicationProperties.SearchLayer")],h)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(u,n,h,r,v,z,p,g,e,b){var a;h=a=function(c){function d(f){f=c.call(this,f)||this;f.exactMatch=!1;f.name=null;f.type=null;return f}u._inheritsLoose(d,c);d.prototype.clone=function(){return new a({exactMatch:this.exactMatch,type:this.type,name:this.name})};return d}(h.JSONSupport);n.__decorate([r.property({type:Boolean,json:{write:!0}})],h.prototype,"exactMatch",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"name",void 0);n.__decorate([g.enumeration(b.kebabDict)],
h.prototype,"type",void 0);return h=a=n.__decorate([e.subclass("esri.webdoc.applicationProperties.SearchLayerField")],h)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(u,n,h,r,v,z,p,g){var e;h=e=function(b){function a(c){c=
b.call(this,c)||this;c.field=null;c.id=null;return c}u._inheritsLoose(a,b);a.prototype.clone=function(){return new e(r.clone({field:this.field,id:this.id}))};return a}(h.JSONSupport);n.__decorate([v.property({type:g,json:{write:{isRequired:!0}}})],h.prototype,"field",void 0);n.__decorate([v.property({type:String,json:{write:{isRequired:!0}}})],h.prototype,"id",void 0);return h=e=n.__decorate([p.subclass("esri.webdoc.applicationProperties.SearchTable")],h)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(u,n,h,r,v,z,p,g,e,b){var a;h=a=function(c){function d(f){f=c.call(this,f)||this;f.exactMatch=!1;f.name=null;f.type=null;return f}u._inheritsLoose(d,c);d.prototype.clone=function(){return new a({exactMatch:this.exactMatch,type:this.type,name:this.name})};return d}(h.JSONSupport);n.__decorate([r.property({type:Boolean,json:{write:!0}})],h.prototype,"exactMatch",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"name",void 0);n.__decorate([g.enumeration(b.kebabDict)],
h.prototype,"type",void 0);return h=a=n.__decorate([e.subclass("esri.webdoc.applicationProperties.SearchTableField")],h)})},"esri/webmap/Bookmark":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../TimeExtent ../Viewpoint ../core/Error ../core/Identifiable ../core/JSONSupport ../core/lang ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../webdoc/support/SlideThumbnail".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){var q;const t=e.getLogger("esri.webmap.Bookmark");z=q=function(w){function A(y){y=w.call(this,y)||this;y.name=null;y.thumbnail=new k.SlideThumbnail;y.timeExtent=null;return y}u._inheritsLoose(A,w);var x=A.prototype;x.castThumbnail=function(y){return"string"===typeof y?new k.SlideThumbnail({url:y}):m.ensureType(k.SlideThumbnail,y)};x.readViewpoint=function(y,B){const {extent:C,viewpoint:D}=B;return r.fromJSON(D||{targetGeometry:C})};x.writeViewpoint=function(y,
B,C,D){if(y){var {targetGeometry:F}=y;b.isSome(F)&&"extent"!==F.type?null!=D&&D.messages?D.messages.push(new v("property:unsupported","Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.")):t.error("Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent."):(b.isSome(F)&&(B.extent=F.toJSON()),B[C]=y.toJSON())}};x.clone=function(){return new q(g.clone({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,
viewpoint:this.viewpoint}))};u._createClass(A,[{key:"viewpoint",set:function(y){const {targetGeometry:B,scale:C}=y;b.isSome(B)&&"point"===B.type&&b.isNone(C)&&t.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",y);this._set("viewpoint",y)}}]);return A}(z.IdentifiableMixin(p.JSONSupport));n.__decorate([a.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],z.prototype,"name",void 0);n.__decorate([a.property({type:k.SlideThumbnail,json:{write:{overridePolicy(w){return{enabled:!(!w||
!w.url)}}}}})],z.prototype,"thumbnail",void 0);n.__decorate([c.cast("thumbnail")],z.prototype,"castThumbnail",null);n.__decorate([a.property({type:h,json:{write:!0}})],z.prototype,"timeExtent",void 0);n.__decorate([a.property({type:r,nonNullable:!0,json:{write:!0}})],z.prototype,"viewpoint",null);n.__decorate([d.reader("viewpoint",["extent","viewpoint"])],z.prototype,"readViewpoint",null);n.__decorate([l.writer("viewpoint")],z.prototype,"writeViewpoint",null);return z=q=n.__decorate([f.subclass("esri.webmap.Bookmark")],
z)})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g,e){var b;u.SlideThumbnail=b=function(a){function c(){var f=a.apply(this,arguments)||this;f.url="";return f}n._inheritsLoose(c,a);var d=c.prototype;
d.destroy=function(){this.url=""};d.clone=function(){return new b({url:this.url})};return c}(r.JSONSupport);h.__decorate([v.property({type:String,json:{write:{isRequired:!0}}})],u.SlideThumbnail.prototype,"url",void 0);u.SlideThumbnail=b=h.__decorate([e.subclass("esri.webdoc.support.SlideThumbnail")],u.SlideThumbnail);Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webmap/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/Accessor ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){var c;r=c=function(d){function f(l){l=d.call(this,l)||this;l.background=null;l.rangeInfo=null;l.spatialReference=null;l.viewpoint=null;return l}u._inheritsLoose(f,d);f.prototype.clone=function(){return new c(v.clone({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))};return f}(r);n.__decorate([z.property({type:a})],r.prototype,"background",void 0);n.__decorate([z.property({type:b})],r.prototype,"rangeInfo",
void 0);n.__decorate([z.property({type:e})],r.prototype,"spatialReference",void 0);n.__decorate([z.property({type:h})],r.prototype,"viewpoint",void 0);return r=c=n.__decorate([g.subclass("esri.webmap.InitialViewProperties")],r)})},"esri/webmap/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(u,n,h){h=function(r){function v(z,p){return r.call(this,z,p,"webmap")||this}n._inheritsLoose(v,r);return v}(h.Version);u.Version=h;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/MapView":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/screenUtils ../core/Warning ../core/workers/workers ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/Point ../geometry/projection ../geometry/support/spatialReferenceUtils ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/Timeline ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M,J,R,X,U,V,Q,Y,fa,da,ca,la,ha,S,ea,ma,sa,ja){function wa(){return Ja.apply(this,arguments)}function Ja(){Ja=n._asyncToGenerator(function*(){const [,{GraphicsView2D:Pa,GraphicContainer:Ta,LabelManager:eb,MapViewNavigation:Na,MagnifierView2D:Sa,Stage:$a}]=yield Promise.all([new Promise((gb,Za)=>u(["./2d/webglDeps"],gb,Za)),new Promise((gb,Za)=>u(["./2d/mapViewDeps"],gb,Za))]);qa=Pa;oa=Ta;Aa=eb;Ka=Na;Wa=Sa;ya=$a});return Ja.apply(this,
arguments)}function va(Pa){const Ta=Pa.getObjectId();if(Ta){var eb,Na,Sa,$a;return`${null!=(eb=null!=(Na=null==(Sa=Pa.layer)?void 0:Sa.uid)?Na:null==($a=Pa.sourceLayer)?void 0:$a.uid)?eb:"MapView"}/${Ta}`}return`"MapView/${Pa.uid}`}function ra(Pa,Ta,eb,Na,Sa){return $a=>{if($a instanceof r){if($a.layer===Pa)null==Sa?void 0:Sa();else{var gb=Pa.allLayerViews.find(Za=>Za.layer===$a.layer);gb&&(null==Na?void 0:Na(gb))}eb(va($a))}else(gb=Pa.allLayerViews.find(Za=>Za.layer===$a))&&Ta(gb)}}function Ba(Pa,
Ta){if(Pa)if(b.isIterable(Pa))for(const eb of Pa)if(b.isIterable(eb))for(const Na of eb)Ta(Na);else Ta(eb);else Ta(Pa)}const Ha=a.getLogger("esri.views.MapView");let ya,qa,oa,Aa,Ka,Wa;a=function(Pa){function Ta(Na){var Sa=Pa.call(this,Na)||this;Sa._magnifierView=null;Sa._stage=null;Sa._resolveWhenReady=[];Sa.rootLayerViews=new p({getCollections:()=>{var $a,gb;return[null==($a=Sa.basemapView)?void 0:$a.baseLayerViews,Sa.layerViews,null==(gb=Sa.basemapView)?void 0:gb.referenceLayerViews]},getChildrenFunction:()=>
null});Sa.featuresTilingScheme=null;Sa.fullOpacity=1;Sa.graphicsView=null;Sa.labelManager=null;Sa.mapViewNavigation=null;Sa.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};Sa.rendering=!1;Sa.supersampleScreenshotsEnabled=!1;Sa.supportsGround=!1;Sa._stationaryTimer=null;Sa.frameTask=new P(n._assertThisInitialized(Sa));Sa._pePromise=null;Sa.floors=new z;Sa.highlightOptions=new ca;Sa.inputManager=new fa({view:n._assertThisInitialized(Sa)});
Sa.map=null;Sa.resizeAlign="center";Sa.spatialReferenceLocked=!1;Sa.timeline=new la.Timeline;Sa.type="2d";Sa.ui=new sa;Sa._pixelFormat={flipY:!0,premultipliedAlpha:!0};Sa.constraints=new M;Sa.padding={top:0,right:0,bottom:0,left:0};Sa.handles.add([f.watch(()=>Sa.viewpoint,()=>{Sa._lastStationaryEventTimestamp=performance.now();Sa._flipStationary(160)},f.sync),Sa.on("resize",$a=>Sa._resizeHandler($a)),f.watch(()=>{var $a;return null==($a=Sa.animationManager)?void 0:$a.animation},$a=>{Sa.animation=
$a})]);k.initialize();return Sa}n._inheritsLoose(Ta,Pa);var eb=Ta.prototype;eb.destroy=function(){this._set("preconditionsReady",!1);this._gotoTask=this.frameTask=null;this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};eb.goTo=function(Na,Sa){if(Na)return this.animation&&(this.animation=null),this._createAnimation(),f.whenOnce(()=>this.ready,Sa).then(()=>{const $a={animate:!0,...Sa},gb=Y.create(Na,this);this.animation.update(gb);this._gotoTask={};return $a.animate?
this._gotoAnimated(gb,$a):this._gotoImmediate(gb,$a)});Ha.error("#goTo()","target cannot be null or undefined")};eb.hitTest=function(){var Na=n._asyncToGenerator(function*(Sa,$a){const gb=ea.isSupportedScreenPointEvent(Sa)?ea.createScreenPointFromSupportedEvent(this,Sa):Sa;if(!this.ready||isNaN(gb.x)||isNaN(gb.y))return{screenPoint:gb,results:[]};let Za=new Set,ab=!1,ub=null,yb=null;null!=$a&&$a.include?Ba($a.include,ra(this,nb=>Za.add(nb),nb=>{ub||(ub=new Set);ub.add(nb)},nb=>Za.add(nb),()=>ab=!0)):
(ab=!0,Za=new Set(this.allLayerViews));null!=$a&&$a.exclude&&Ba($a.exclude,ra(this,nb=>Za.delete(nb),nb=>{yb||(yb=new Set);yb.add(nb)}));$a=this.allLayerViews.filter(nb=>!nb.suspended&&Za.has(nb)).reverse();const tb=this.toMap(gb);Sa=ab?this.graphicsView.hitTest(tb).map(nb=>({type:"graphic",graphic:nb,layer:null,mapPoint:tb})):[];$a=yield Promise.all($a.map(nb=>nb.hitTest(tb,gb)).toArray());Sa=[...Sa,...$a].filter(c.isSome).flat().filter(c.isSome);ub&&(Sa=Sa.filter(nb=>!("graphic"in nb)||!nb.graphic||
ub.has(va(nb.graphic))));yb&&(Sa=Sa.filter(nb=>!("graphic"in nb)||!nb.graphic||yb.has(va(nb.graphic))));return{screenPoint:gb,results:Sa}});return function(Sa,$a){return Na.apply(this,arguments)}}();eb.takeScreenshot=function(){var Na=n._asyncToGenerator(function*(Sa){Sa=this._createScreenshotPlan(Sa);const $a=yield this._stage.takeScreenshot(Sa);return S.encode($a,{format:Sa.format,quality:Sa.quality,rotation:0,disableDecorations:!1},this._pixelFormat)});return function(Sa){return Na.apply(this,
arguments)}}();eb._takeScreenshot=function(){var Na=n._asyncToGenerator(function*(Sa){Sa=this._createScreenshotPlan(Sa);Sa=yield this._stage.takeScreenshot(Sa);return S.encodeData(Sa,this._pixelFormat)});return function(Sa){return Na.apply(this,arguments)}}();eb._createScreenshotPlan=function(Na){Na=Na||{};const Sa=this.supersampleScreenshotsEnabled?Math.min(4,S.getMaximumResolutionScale(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let $a;Na.layers?($a=[],Na.layers.forEach(ab=>
{const ub=this.allLayerViews.find(yb=>yb.layer.id===ab.id);ub&&"container"in ub&&ub.container&&$a.push(ub.container)})):$a=this._stage.children;const {format:gb,quality:Za}=S.getFormatAndQuality(Na.format,Na.quality);return ha(Na,Sa,this.size,this.padding,gb,Za,$a,Na.rotation)};eb.toMap=function(Na){if(!this.ready)return null;Na=ea.isSupportedScreenPointEvent(Na)?ea.createScreenPointFromSupportedEvent(this,Na):Na;const [Sa,$a]=this.state.toMap([0,0],[Na.x,Na.y]);return new y({x:Sa,y:$a,spatialReference:this.spatialReference})};
eb.toScreen=function(Na){if(!this.ready)return null;Na=this._project(Na,this.spatialReference);Na=[Na.x,Na.y];this.state.toScreen(Na,Na);return l.createScreenPoint(Na[0],Na[1])};eb.on=function(Na,Sa,$a,gb){return($a=this.inputManager&&this.viewEvents.on(Na,Sa,$a,gb))?$a:Pa.prototype.on.call(this,Na,Sa)};eb.hasEventListener=function(Na){return Pa.prototype.hasEventListener.call(this,Na)||this.viewEvents.hasHandler(Na)};eb.whenLayerView=function(Na){return Pa.prototype.whenLayerView.call(this,Na)};
eb.graphicChanged=function(Na){this.graphicsView&&this.graphicsView.graphicUpdateHandler(Na)};eb.whenReady=function(){return new Promise(Na=>{this.ready?Na(this):this._resolveWhenReady.push(Na)})};eb.forceDOMReadyCycle=function(){this.forceReadyCycle()};eb.getDefaultSpatialReference=function(){var Na,Sa,$a;return this.map&&"initialViewProperties"in this.map&&(null==(Na=this.map)?void 0:null==(Sa=Na.initialViewProperties)?void 0:Sa.spatialReference)||(null==($a=this.defaultsFromMap)?void 0:$a.spatialReference)||
null};eb.hasLayerViewModule=function(Na){return L.layerView2DImporter.hasLayerViewModule(Na)};eb.importLayerView=function(Na){return L.layerView2DImporter.importLayerView(Na)};eb.pixelSizeAt=function(){return this.ready?this.state.resolution:(Ha.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};eb.popupHitTest=function(Na){return this.hitTest(Na).then(Sa=>({...Sa,mapPoint:this.toMap(Na)}))};eb.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};eb.validate=
function(){let Na=ma.check(this.type);e("safari")&&9>e("safari")&&(Na=new g("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:e("safari")}));return c.isSome(Na)?(Ha.warn("#validate()",Na.message),Promise.reject(Na)):wa()};eb._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new H;return this.animation};eb._cancellableGoTo=function(Na,Sa,$a){const gb=()=>Na===this._gotoTask,Za=
$a.then(()=>{gb()&&(this.animation=null)}).catch(ub=>{gb()&&(this.animation=null,Sa.done||(Sa.stop(),this.frameTask.animationInProgress=!1));throw ub;}),ab=new Promise(ub=>ub(Za));Sa.when().catch(()=>{gb()&&ab.cancel&&ab.cancel()});return ab};eb._gotoImmediate=function(Na,Sa){const $a=this._gotoTask,gb=this.animation;Na=Na.then(Za=>{d.throwIfAborted(Sa);if($a!==this._gotoTask)throw new g("view:goto-interrupted","Goto was interrupted");this.viewpoint=gb.target=Za;gb.finish()});return this._cancellableGoTo($a,
gb,Na)};eb._flipStationary=function(Na){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const Sa=performance.now()-this._lastStationaryEventTimestamp;160>Sa&&(this._stationaryTimer=this._flipStationary(Sa))},Na)};eb._getDefaultViewpoint=function(){var Na,Sa,$a,gb;const {constraints:Za,initialExtent:ab,map:ub,padding:yb,size:tb}=this;if(!Za)return null;const nb=ub&&"initialViewProperties"in ub&&ub.initialViewProperties;var Nb=
this._get("zoom"),Tb=this._get("scale"),$b=this._get("center"),Mb=this._get("extent"),Kb=this._get("rotation"),kb=this._get("viewpoint");Za.effectiveLODs?-1!==Nb&&(Tb=Za.zoomToScale(Nb)):Nb=-1;let rb=null,zb=null,xb=0;Nb=kb&&kb.rotation;const ua=kb&&kb.targetGeometry;c.isSome(ua)&&("extent"===ua.type?rb=ua:"point"===ua.type&&(zb=ua,xb=kb.scale));Mb=Mb||rb||(null==(Na=c.unwrap(null==nb?void 0:null==(Sa=nb.viewpoint)?void 0:Sa.targetGeometry))?void 0:Na.extent)||ab;Na=$b||zb||(null==Mb?void 0:Mb.center);
Tb=Tb||xb||(null==nb?void 0:null==($a=nb.viewpoint)?void 0:$a.scale)||Mb&&Y.extentToScale(Mb,[tb[0]-yb.left-yb.right,tb[1]-yb.top-yb.bottom]);$a=Kb||Nb||(null==nb?void 0:null==(gb=nb.viewpoint)?void 0:gb.rotation)||0;return Na&&Tb?new v({targetGeometry:Na,scale:Tb,rotation:$a}):null};eb._gotoAnimated=function(Na,Sa){const $a=this._gotoTask,gb=this.animation;Na=Na.then(Za=>{d.throwIfAborted(Sa);if($a!==this._gotoTask)throw new g("view:goto-interrupted","Goto was interrupted");gb.update(Za);this.animationManager.animate(gb,
this.viewpoint,Sa);return gb.when().then(()=>{},()=>{})});return this._cancellableGoTo($a,gb,Na)};eb._project=function(Na,Sa){var $a;const gb=Na&&Na.targetGeometry||Na;if(!Sa)return Na;if(!gb)return null;if(Sa.imageCoordinateSystem||null!=($a=gb.spatialReference)&&$a.imageCoordinateSystem||C.equals(Sa,gb.spatialReference))return Na;$a=B.project(gb,Sa);if(!$a)throw new g("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:gb,spatialReference:Sa});
return Na&&"esri.Viewpoint"===Na.declaredClass?(Na.targetGeometry=$a,Na):$a};eb._resizeHandler=function(Na){if(this.ready){var Sa=this.state,$a=this.state.paddedViewState.viewpoint,gb=this.state.paddedViewState.size.concat();Sa.size=[Na.width,Na.height];Y.resize($a,$a,gb,this.state.paddedViewState.size,this.resizeAlign);$a=this.constraints.constrain($a,null);this.state.viewpoint=$a}};eb._startup=function(){var Na;this.timeline.begin("MapView Startup");const Sa=this._getDefaultViewpoint(),$a=Sa.targetGeometry;
try{this._project(Sa,this.spatialReference)}catch(ab){var gb;Ha.warn(new m("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:$a.toJSON(),spatialReference:this.spatialReference,error:ab}));Sa.targetGeometry=(null==(gb=this.defaultsFromMap.extent)?void 0:gb.center)||new y({x:0,y:0,spatialReference:this.spatialReference})}null==(Na=this.constraints)?void 0:Na.fit(Sa);this._set("state",new J({padding:this._get("padding"),
size:this.size,viewpoint:Sa}));this.graphics.owner=this;const Za=new ya(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=Za;this._magnifierView=new Wa;this._magnifierView.magnifier=this.magnifier;Na=new Aa({view:this});this._set("labelManager",Na);Na=new K({view:this});
this._set("animationManager",Na);Na=new Ka({view:this,animationManager:Na});this._set("mapViewNavigation",Na);this._setupSpatialReferenceDependentProperties();this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),Za.on("post-render",()=>this._set("rendering",Za.renderRequested)),Za.on("will-render",()=>this._set("rendering",Za.renderRequested)),Za.on("webgl-error",ab=>this.fatalError=ab.error),f.watch(()=>this.stationary,ab=>Za.stationary=ab,f.syncAndInitial),f.watch(()=>
this.background,ab=>{Za.background=ab;this._magnifierView.background=ab},f.syncAndInitial),f.watch(()=>this.magnifier,ab=>this._magnifierView.magnifier=ab,f.syncAndInitial),f.watch(()=>this.renderingOptions,ab=>Za.renderingOptions=ab,f.syncAndInitial),f.watch(()=>this.highlightOptions,ab=>Za.highlightOptions=ab,f.syncAndInitial),f.watch(()=>this.state.id,()=>Za.state=this.state,f.syncAndInitial)],"map-view");this._updateStageChildren();Na=this._resolveWhenReady;this._resolveWhenReady=[];Na.forEach(ab=>
ab(this));this.timeline.end("MapView Startup");this.frameTask&&this.frameTask.start();this._set("ready",!0)};eb._teardown=function(){this._destroySpatialReferenceDependentProperties();this.handles.remove("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this._stage=null;this._set("graphicsView",
null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask&&this.frameTask.stop();this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);this._set("ready",!1);const {center:[Na,Sa],spatialReference:$a,rotation:gb,scale:Za}=this.state.paddedViewState,ab=new y({x:Na,y:Sa,spatialReference:$a});this._set("viewpoint",null);this._set("extent",null);this._set("center",ab);this._set("zoom",-1);
this._set("rotation",gb);this._set("scale",Za);this._set("spatialReference",$a);this._set("state",null);this.animation=null};eb._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(Na=>{this._stage.addChild(Na.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};eb._setupSpatialReferenceDependentProperties=function(){var Na=new X(D.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",
Na);Na=new qa({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new oa(Na)});this.frameTask.graphicsView=Na;this._set("graphicsView",Na)};eb._destroySpatialReferenceDependentProperties=function(){const Na=this.graphicsView;this._set("graphicsView",null);this.frameTask.graphicsView=null;Na.destroy();this._set("featuresTilingScheme",null)};eb._spatialReferenceChanged=function(Na){if(this.ready){this.frameTask.stop();for(var Sa of this.allLayerViews)Sa.processDetach();
this._destroySpatialReferenceDependentProperties();Sa=this.state.paddedViewState.clone();if(c.isNone(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=Sa.scale;else{var $a=Sa.viewpoint.clone();$a.scale=this._scaleBeforeChangingSpatialReference;Sa.viewpoint=$a}$a=Sa.clone();var [gb,Za]=Sa.center,ab=null;try{ab=this._project(new y({x:gb,y:Za,spatialReference:Sa.spatialReference}),Na)}catch(ub){B.isLoaded()||Ha.warn(new m("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",
{center:ab.toJSON(),spatialReference:Na,error:ub}))}ab||(ab=new y({x:0,y:0,spatialReference:Na}));ab=Y.centerAt(new v({targetGeometry:new y,scale:0,rotation:0}),Sa.viewpoint,ab);$a.viewpoint=ab;try{const ub=[Sa.size[0]/2,Sa.size[1]/2],yb=[ub[0]+20,ub[1]],tb=Sa.toMap([0,0],yb),{x:nb,y:Nb}=this._project(new y({x:tb[0],y:tb[1],spatialReference:Sa.spatialReference}),Na);tb[0]=nb;tb[1]=Nb;$a.toScreen(tb,tb);const Tb=Y.angleBetween(ub,tb,yb),$b=Math.hypot(tb[0]-ub[0],tb[1]-ub[1])/20;!Number.isFinite($b)||
4<Math.abs($b)?(ab.rotation=0,ab.targetGeometry=new y({x:0,y:0,spatialReference:Na})):(ab.scale*=$b,ab.scale>e("mapview-srswitch-adjust-rotation-scale-threshold")?ab.rotation=0:ab.rotation+=Number.isFinite(Tb)?Tb:0)}catch{}this._get("constraints").constrain(ab,null);this._get("state").viewpoint=ab;this._stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const ub of this.allLayerViews)ub.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}};
n._createClass(Ta,[{key:"graphicsTileStore",get:function(){return new da(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){var Na;const {scale:Sa,constraints:$a,center:gb,viewpoint:Za,extent:ab}=this;let ub=this.zoom;if(this.map&&"initialViewProperties"in this.map&&null!=(Na=this.map.initialViewProperties)&&Na.viewpoint||ab)return!1;null!=$a&&$a.effectiveLODs||(ub=-1);return gb&&(0!==Sa||-1!==ub)||Za&&c.isSome(Za.targetGeometry)&&("extent"===Za.targetGeometry.type||Za.scale)?
!1:!0}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",get:function(){if(B.isLoaded())return!0;this._pePromise||(this._pePromise=B.load().finally(()=>{this._pePromise=null}));return!1}},{key:"typeSpecificPreconditionsReady",
get:function(){var Na=this._getDefaultViewpoint();if(!Na)return!1;const Sa=this.spatialReference;Na=c.unwrap(Na.targetGeometry);return B.canProjectWithoutEngine(Na.spatialReference,Sa)?!0:this._projectionEngineLoaded}},{key:"animation",set:function(Na){var Sa=this._get("animation");Na!==Sa&&(Sa&&Sa.stop(),!Na||Na.isFulfilled()?this._set("animation",null):(this._set("animation",Na),this.frameTask.animationInProgress=!0,Sa=()=>{Na===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame());
this.frameTask.animationInProgress=!1},Na.when(Sa,Sa)))}},{key:"background",get:function(){return this.get("map.initialViewProperties.background")||null},set:function(Na){void 0===Na?this._clearOverride("background"):this._override("background",Na)}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:Na,spatialReference:Sa}=this.state.paddedViewState;return new y({x:Na[0],y:Na[1],spatialReference:Sa})},set:function(Na){if(null!=Na)if(this.ready){try{var Sa=this._project(Na,
this.spatialReference)}catch($a){Ha.error(new g("mapview:invalid-center","could not project the value in the view's spatial reference",{input:Na,error:$a}));return}Na=this.viewpoint;Y.centerAt(Na,Na,Sa);this.viewpoint=Na}else this._set("center",Na),this.notifyChange("initialExtentRequired")}},{key:"constraints",set:function(Na){const Sa=this._get("constraints");Sa&&(this.handles.remove("map-view-constraints"),Sa.destroy());this._set("constraints",Na);Na&&(Na.view=this,this.ready&&(this.state.viewpoint=
Na.fit(this.state.paddedViewState.viewpoint)),this.handles.add(f.watch(()=>Na.version,()=>{this.ready&&this.state&&(this.state.viewpoint=Na.fit(this.state.paddedViewState.viewpoint))},f.sync),"map-view-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(Na){if(null!=Na)if(Na.width&&Na.height)if(this.ready){try{var Sa=this._project(Na,this.spatialReference)}catch($a){Ha.error(new g("mapview:invalid-extent","could not project the value in the view's spatial reference",
{error:$a}));return}Na=this.viewpoint;Y.setExtent(Na,Na,Sa,this.size,{constraints:this.constraints});this.viewpoint=Na}else this._set("extent",Na),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired");else Ha.error(new g("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(Na){this.ready?(this.state.padding=Na,this._set("padding",
this.state.padding)):this._set("padding",Na)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(Na){if(!isNaN(Na))if(this.ready){var Sa=this.viewpoint;Y.rotateTo(Sa,Sa,Na);this.viewpoint=Sa}else this._set("rotation",Na)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(Na){if(Na&&!isNaN(Na))if(this.ready){var Sa=this.viewpoint;
Y.scaleTo(Sa,Sa,Na);this.viewpoint=Sa}else{this._set("scale",Na);this._set("zoom",-1);if(Na=this._get("extent"))this._set("extent",null),this._set("center",Na.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing&&!this._stationaryTimer}},{key:"updating",get:function(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||
!0===this.graphicsView.updating||this.allLayerViews.some(Na=>!Na.destroyed&&!("layerViews"in Na)&&!0===Na.updating))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const Na=this.state.paddedViewState;return Na&&Na.viewpoint.clone()},set:function(Na){if(null!=Na)if(this.ready){var Sa;try{var $a=this._project(Na,this.spatialReference);!Na.scale||isNaN(Na.scale)?Sa=new g("mapview:invalid-viewpoint",`invalid scale value of ${Na.scale}`):c.isNone(Na.targetGeometry)&&(Sa=
new g("mapview:invalid-viewpoint","geometry not defined"))}catch(gb){Sa=new g("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:gb})}Sa?Ha.error(Sa):(this._scaleBeforeChangingSpatialReference=null,Na=new v({targetGeometry:new y,scale:0,rotation:0}),Y.copy(Na,$a),this.constraints.constrain(Na,this.state.paddedViewState.viewpoint),this.state.viewpoint=Na,this.frameTask.requestFrame(),this._set("viewpoint",Na))}else this._set("viewpoint",Na),this._set("extent",
null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(Na){if(null!=Na)if(this.ready)if(this.constraints.effectiveLODs){var Sa=this.viewpoint;Y.scaleTo(Sa,Sa,this.constraints.zoomToScale(Na));this.viewpoint=Sa;this._set("zoom",this.constraints.scaleToZoom(this.scale))}else this._set("zoom",-1);else{this._set("zoom",Na);
this._set("scale",0);if(Na=this._get("extent"))this._set("extent",null),this._set("center",Na.center);this.notifyChange("initialExtentRequired")}}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}},{key:"test",get:function(){return{takeScreenshot:Na=>this._takeScreenshot(Na)}}}]);return Ta}(F.BreakpointsOwner(E.DOMContainer(G.PopupView(O))));a.type="2d";h.__decorate([q.property({readOnly:!0})],a.prototype,"animationManager",void 0);h.__decorate([q.property({constructOnly:!0})],
a.prototype,"deactivatedWebGLExtensions",void 0);h.__decorate([q.property({constructOnly:!0})],a.prototype,"debugWebGLExtensions",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"featuresTilingScheme",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"fullOpacity",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"graphicsTileStore",null);h.__decorate([q.property()],a.prototype,"graphicsView",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"state",void 0);
h.__decorate([q.property()],a.prototype,"initialExtentRequired",null);h.__decorate([q.property()],a.prototype,"labelManager",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"resourceManager",null);h.__decorate([q.property({readOnly:!0})],a.prototype,"textureManager",null);h.__decorate([q.property({readOnly:!0})],a.prototype,"mapViewNavigation",void 0);h.__decorate([q.property({constructOnly:!0})],a.prototype,"renderCanvas",void 0);h.__decorate([q.property()],a.prototype,"renderingOptions",
void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"rendering",void 0);h.__decorate([q.property({constructOnly:!0})],a.prototype,"supersampleScreenshotsEnabled",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"supportsGround",void 0);h.__decorate([q.property()],a.prototype,"_stationaryTimer",void 0);h.__decorate([q.property()],a.prototype,"_defaultsFromMapSettings",null);h.__decorate([q.property()],a.prototype,"_pePromise",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,
"typeSpecificPreconditionsReady",null);h.__decorate([q.property()],a.prototype,"animation",null);h.__decorate([q.property({type:ja})],a.prototype,"background",null);h.__decorate([q.property({value:null,type:y,dependsOn:["state.id","ready"]})],a.prototype,"center",null);h.__decorate([q.property({type:M})],a.prototype,"constraints",null);h.__decorate([q.property({value:null,type:x,dependsOn:["state.id","ready"]})],a.prototype,"extent",null);h.__decorate([q.property()],a.prototype,"floors",void 0);h.__decorate([q.property({type:ca})],
a.prototype,"highlightOptions",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"inputManager",void 0);h.__decorate([q.property()],a.prototype,"map",void 0);h.__decorate([q.property({value:{top:0,right:0,bottom:0,left:0},cast:Pa=>({top:0,right:0,bottom:0,left:0,...Pa})})],a.prototype,"padding",null);h.__decorate([q.property()],a.prototype,"resizeAlign",void 0);h.__decorate([q.property({readOnly:!0,dependsOn:["state.id"]})],a.prototype,"resolution",null);h.__decorate([q.property({value:0,
type:Number,dependsOn:["state.id","ready"]})],a.prototype,"rotation",null);h.__decorate([q.property({value:0,type:Number,dependsOn:["state.id","ready"]})],a.prototype,"scale",null);h.__decorate([q.property({constructOnly:!0})],a.prototype,"spatialReferenceLocked",void 0);h.__decorate([q.property()],a.prototype,"stationary",null);h.__decorate([q.property({type:la.Timeline,readOnly:!0})],a.prototype,"timeline",void 0);h.__decorate([q.property({readOnly:!0})],a.prototype,"type",void 0);h.__decorate([q.property({readOnly:!0})],
a.prototype,"updating",null);h.__decorate([q.property({value:null,type:v,dependsOn:["state.id","ready"]})],a.prototype,"viewpoint",null);h.__decorate([q.property({value:-1,dependsOn:["state.id","ready"]})],a.prototype,"zoom",null);h.__decorate([q.property({type:Boolean})],a.prototype,"navigating",null);h.__decorate([q.property({type:sa})],a.prototype,"ui",void 0);return a=h.__decorate([A.subclass("esri.views.MapView")],a)})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){function d(m,k){return k?f[m].valueToClassName[k].split(" "):[]}const f={widthBreakpoint:{getValue(m){const k=m.viewSize[0];m=m.breakpoints;const q=this.values;return k<=m.xsmall?q.xsmall:k<=m.small?q.small:k<=m.medium?q.medium:k<=m.large?q.large:q.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(m){const k=m.viewSize[1];m=m.breakpoints;const q=this.values;return k<=m.xsmall?q.xsmall:k<=m.small?q.small:k<=m.medium?q.medium:k<=m.large?q.large:q.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(m){m=m.viewSize;const k=this.values;return m[1]>=m[0]?k.portrait:k.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},l={xsmall:544,small:768,medium:992,large:1200};u.BreakpointsOwner=
m=>{m=function(k){function q(...w){w=k.call(this,...w)||this;w._breakpointsHandles=new v;w.orientation=null;w.widthBreakpoint=null;w.heightBreakpoint=null;w.breakpoints=l;return w}n._inheritsLoose(q,k);var t=q.prototype;t.initialize=function(){this._breakpointsHandles.add(p.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),p.initial))};t.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=z.destroyMaybe(this._breakpointsHandles))};t._updateClassNames=
function(){if(this.container){var w=r.acquire(),A=r.acquire(),x=!1,y;for(y in f){const B=this[y],C=f[y].getValue({viewSize:this.size,breakpoints:this.breakpoints});B!==C&&(x=!0,this[y]=C,d(y,B).forEach(D=>A.push(D)),d(y,C).forEach(D=>w.push(D)))}x&&(this._applyClassNameChanges(w,A),r.release(w),r.release(A))}};t._applyClassNameChanges=function(w,A){const x=this.container;x&&(A.forEach(y=>x.classList.remove(y)),w.forEach(y=>x.classList.add(y)))};t._removeActiveClassNames=function(){const w=this.container;
if(w)for(var A in f)d(A,this[A]).forEach(x=>w.classList.remove(x))};n._createClass(q,[{key:"breakpoints",set:function(w){var A=this._get("breakpoints");if(w!==A){A=(A=w)&&A.xsmall<A.small&&A.small<A.medium&&A.medium<A.large;if(!A){const x=JSON.stringify(l,null,2);console.warn("provided breakpoints are not valid, using defaults:"+x)}w=A?w:l;this._set("breakpoints",{...w})}}}]);return q}(m);h.__decorate([g.property()],m.prototype,"breakpoints",null);h.__decorate([g.property()],m.prototype,"orientation",
void 0);h.__decorate([g.property()],m.prototype,"widthBreakpoint",void 0);h.__decorate([g.property()],m.prototype,"heightBreakpoint",void 0);return m=h.__decorate([c.subclass("esri.views.BreakpointsOwner")],m)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){function f(m){m&&(r.empty(m),m.parentNode&&m.parentNode.removeChild(m))}const l=[0,0];u.DOMContainer=m=>{m=function(k){function q(...w){var A=k.call(this,...w)||this;A._freqInfo={freq:16,time:750};A._overlayRenderTaskHandle=null;A.height=0;A.position=null;A.resizing=!1;A.root=null;A.surface=null;A.suspended=!0;A.ui=null;A.userContent=null;A.width=0;A.widthBreakpoint=null;A.handles.add([v.watch(()=>A.cursor,x=>{const {surface:y}=n._assertThisInitialized(A);y&&y.setAttribute("data-cursor",
x)}),v.watch(()=>A.interacting,x=>{const {surface:y}=n._assertThisInitialized(A);y&&y.setAttribute("data-interacting",x.toString())})]);return A}n._inheritsLoose(q,k);var t=q.prototype;t.initialize=function(){this.handles.add(v.watch(()=>this.ui,(w,A)=>this._handleUIChange(w,A)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};t.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),
this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};t.blur=function(){this.surface&&this.surface.blur()};t.focus=function(){this.surface&&this.surface.focus()};t.pageToContainer=function(w,A,x){const y=this.position;w-=y[0];A-=y[1];x?(x[0]=w,x[1]=A):x=[w,A];return x};t.containerToPage=function(w,A,x){const y=this.position;w+=y[0];A+=y[1];x?(x[0]=w,x[1]=A):x=[w,A];return x};t._handleUIChange=function(w,A){A&&(this.handles.remove("ui"),A.destroy());w&&this._wireUI(w);this._set("ui",
w)};t._wireUI=function(w){this.handles.remove("ui");w&&(w.view=this,this.handles.add([v.watch(()=>this.root,A=>{if(A){{const x=document.createElement("div");A.appendChild(x);A=x}}else A=null;w.container=A},v.initial),v.watch(()=>this.popup,(A,x)=>{x&&w.remove(x,"popup");A&&(A.view=w.view,w.add(A,{key:"popup",position:"manual"}))},v.initial)],"ui"))};t._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};t._startMeasuring=function(){const w=this._freqInfo;
w.freq=16;w.time=750;this.handles.add([(()=>{const A=()=>{w.freq=16;w.time=750};window.addEventListener("resize",A);return{remove(){window.removeEventListener("resize",A)}}})(),z.addFrameTask({prepare:A=>{const x=this._measure(),y=this._freqInfo;y.time+=A.deltaTime;x&&(y.freq=16,this._get("resizing")||this._set("resizing",!0));y.time<y.freq||(y.time=0,this._position()||x?y.freq=16:y.freq=Math.min(750,2*y.freq),!x&&512<=y.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();
this._position()};t._measure=function(){var w=this.container;const A=w?w.clientWidth:0;w=w?w.clientHeight:0;if(0===A||0===w)return this.suspended||this._set("suspended",!0),!1;const x=this.width,y=this.height;if(A===x&&w===y)return this.suspended&&this._set("suspended",!1),!1;this._set("width",A);this._set("height",w);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:x,oldHeight:y,width:A,height:w});return!0};t._position=function(){var w=this.container;const A=this.position;{const x=
(w.ownerDocument||window.document).defaultView;w=w.getBoundingClientRect();l[0]=w.left+x.pageXOffset;l[1]=w.top+x.pageYOffset}return A&&l[0]===A[0]&&l[1]===A[1]?!1:(this._set("position",[l[0],l[1]]),!0)};t.forceDOMReadyCycle=function(){};n._createClass(q,[{key:"container",set:function(w){var A=this._get("container");if(A!==w)if(this.handles.remove("dom-size"),this._stopMeasuring(),A&&(A.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=
null),this.overlay.destroy(),this._set("overlay",null),f(this.root),this._set("root",null),r.reparent(this.userContent,A),f(this.userContent),this._set("userContent",null)),w){w.classList.add("esri-view");A=document.createElement("div");A.className="esri-view-user-storage";r.reparent(w,A);w.appendChild(A);this._set("userContent",A);A=document.createElement("div");A.className="esri-view-root";w.insertBefore(A,w.firstChild);this._set("root",A);const x=document.createElement("div");x.className="esri-view-surface";
x.setAttribute("role","application");x.tabIndex=0;A.appendChild(x);this._set("surface",x);const y=new c;A.appendChild(y.surface);this._set("overlay",y);v.watch(()=>y.needsRender,B=>{B&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=z.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(v.watch(()=>this.size,B=>{const [C,D]=B;C>=document.body.clientWidth||
D>=document.body.clientHeight?x.classList.add("esri-view-surface--inset-outline"):x.classList.remove("esri-view-surface--inset-outline")},v.initial),"dom-size");this._set("container",w);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const w=document.activeElement===this.surface;return document.hasFocus()&&w}},{key:"popup",get:function(){return this._get("popup")||
new d({view:this})},set:function(w){const A=this._get("popup");A&&A!==w&&A.destroy();this._set("popup",w)}},{key:"size",get:function(){return[this.width,this.height]}}]);return q}(m);h.__decorate([p.property({value:null,cast:k=>r.byId(k)})],m.prototype,"container",null);h.__decorate([p.property({readOnly:!0})],m.prototype,"focused",null);h.__decorate([p.property({readOnly:!0})],m.prototype,"height",void 0);h.__decorate([p.property({type:d})],m.prototype,"popup",null);h.__decorate([p.property({type:c})],
m.prototype,"overlay",void 0);h.__decorate([p.property({readOnly:!0})],m.prototype,"position",void 0);h.__decorate([p.property({readOnly:!0})],m.prototype,"resizing",void 0);h.__decorate([p.property({readOnly:!0})],m.prototype,"root",void 0);h.__decorate([p.property({value:null,readOnly:!0})],m.prototype,"size",null);h.__decorate([p.property({readOnly:!0})],m.prototype,"surface",void 0);h.__decorate([p.property({readOnly:!0})],m.prototype,"suspended",void 0);h.__decorate([p.property()],m.prototype,
"ui",void 0);h.__decorate([p.property({readOnly:!0})],m.prototype,"userContent",void 0);h.__decorate([p.property({readOnly:!0})],m.prototype,"width",void 0);h.__decorate([p.property()],m.prototype,"widthBreakpoint",void 0);return m=h.__decorate([a.subclass("esri.views.DOMContainer")],m)};u.isDOMContainer=function(m){return m&&"focus"in m};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){h=function(d){function f(){var m=d.apply(this,arguments)||this;m.items=new r;m._watchUpdatingTracking=new b.WatchUpdatingTracking;m._callbacks=new Map;m._projector=c.createProjector();m._hiddenProjector=c.createProjector();return m}u._inheritsLoose(f,d);var l=f.prototype;l.initialize=function(){const m=document.createElement("div");m.className="esri-overlay-surface";this._set("surface",m);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");m.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,k=>{for(const q of k.added){const t=()=>q.render();this._callbacks.set(q,t);this._projector.append(this.surface,t)}for(const q of k.removed)k=this._projector.detach(this._callbacks.get(q)),this.surface.removeChild(k.domNode),this._callbacks.delete(q)})};l.addItem=function(m){this.items.add(m)};l.removeItem=function(m){this.items.remove(m)};l.destroy=function(){this.items.removeAll();
this._callbacks.forEach(m=>this._projector.detach(m));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};l.render=function(){this._projector.renderNow()};l.computeBoundingRect=function(m){const k=this._hiddenSurface,q=this._hiddenProjector;let t=null;const w=()=>t=m.render();q.append(k,w);q.renderNow();const A={left:0,top:0,right:0,bottom:0};if(t&&t.domNode){const x=t.domNode.getBoundingClientRect();A.left=x.left;A.top=x.top;A.right=x.right;A.bottom=x.bottom}for(q.detach(w);k.firstChild;)k.removeChild(k.firstChild);
return A};l.overlaps=function(m,k){m=this.computeBoundingRect(m);k=this.computeBoundingRect(k);return Math.max(m.left,k.left)<=Math.min(m.right,k.right)&&Math.max(m.top,k.top)<=Math.min(m.bottom,k.bottom)};l.renderCanvas=function(m){if(this.items.some(q=>q.visible)){var k=m.getContext("2d");k.save();k.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(q=>{k.save();q.renderCanvas(k);k.restore()});k.restore()}};u._createClass(f,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(m=>m.visible)}}]);return f}(h);n.__decorate([v.property({readOnly:!0})],h.prototype,"surface",void 0);n.__decorate([v.property({readOnly:!0})],h.prototype,"items",void 0);n.__decorate([v.property({readOnly:!0})],h.prototype,"needsRender",null);n.__decorate([v.property({readOnly:!0})],h.prototype,"_watchUpdatingTracking",void 0);n.__decorate([v.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],h.prototype,"updating",void 0);
return h=n.__decorate([e.subclass("esri.views.overlay.ViewOverlay")],h)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E){function G(P,L){return void 0===L?`${"esri-popup"}__${P}`:`${"esri-popup"}__${P}-${L}`}const O={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},H=p.getLogger("esri.widgets.Popup"),K={closeButton:!0,featureNavigation:!0};h=function(P){function L(J,R){var X=P.call(this,J,R)||this;X._blurClose=!1;X._blurContainer=!1;X._containerNode=null;X._mainContainerNode=null;X._featureMenuNode=null;X._actionsMenuNode=null;X._focusClose=!1;
X._focusContainer=!1;X._focusDockButton=!1;X._focusFeatureMenuButton=!1;X._focusActionsMenuButton=!1;X._focusFirstFeature=!1;X._focusFirstAction=!1;X._handles=new z;X._pointerOffsetInPx=16;X._spinner=null;X._feature=null;X._featureMenuIntersectionObserverCallback=([U])=>{null!=U&&U.isIntersecting&&X.viewModel.featurePage++};X._featureMenuIntersectionObserver=new IntersectionObserver(X._featureMenuIntersectionObserverCallback,{root:window.document});X._displaySpinnerThrottled=b.throttle(()=>X._displaySpinner(),
0);X.actions=null;X.alignment="auto";X.autoCloseEnabled=null;X.autoOpenEnabled=null;X.defaultPopupTemplateEnabled=null;X.content=null;X.collapsed=!1;X.collapseEnabled=!0;X.dockEnabled=!1;X.featureCount=null;X.featureMenuOpen=!1;X.features=null;X.goToOverride=null;X.headingLevel=2;X.highlightEnabled=null;X.location=null;X.label=void 0;X.maxInlineActions=3;X.messages=null;X.messagesCommon=null;X.promises=null;X.selectedFeature=null;X.selectedFeatureIndex=null;X.spinnerEnabled=!0;X.title=null;X.updateLocationEnabled=
null;X.view=null;X.viewModel=new A;X.visible=null;X.visibleElements={...K};X._addSelectedFeatureIndexHandle();X.own([e.watch(()=>{var U;return null==(U=X.viewModel)?void 0:U.screenLocation},()=>X._positionContainer()),e.watch(()=>{var U;return[null==(U=X.viewModel)?void 0:U.active,X.dockEnabled]},()=>X._toggleScreenLocationEnabled()),e.watch(()=>{var U;return null==(U=X.viewModel)?void 0:U.screenLocation},(U,V)=>{!!U!==!!V&&X.reposition()}),e.watch(()=>{var U,V,Q,Y,fa,da;return[null==(U=X.viewModel)?
void 0:null==(V=U.view)?void 0:V.padding,null==(Q=X.viewModel)?void 0:null==(Y=Q.view)?void 0:Y.size,null==(fa=X.viewModel)?void 0:fa.active,null==(da=X.viewModel)?void 0:da.location,X.alignment]},()=>X.reposition()),e.watch(()=>X.spinnerEnabled,U=>X._spinnerEnabledChange(U)),e.watch(()=>{var U,V;return null==(U=X.viewModel)?void 0:null==(V=U.view)?void 0:V.size},(U,V)=>X._updateDockEnabledForViewSize(U,V)),e.watch(()=>{var U;return null==(U=X.viewModel)?void 0:U.view},(U,V)=>X._viewChange(U,V)),
e.watch(()=>{var U,V;return null==(U=X.viewModel)?void 0:null==(V=U.view)?void 0:V.ready},(U,V)=>X._viewReadyChange(U,V)),e.watch(()=>{var U,V;return[null==(U=X.viewModel)?void 0:U.waitingForResult,null==(V=X.viewModel)?void 0:V.location]},()=>{X._hideSpinner();X._displaySpinnerThrottled()}),e.watch(()=>{var U,V,Q,Y;return[null==(U=X.selectedFeatureWidget)?void 0:null==(V=U.viewModel)?void 0:V.title,null==(Q=X.selectedFeatureWidget)?void 0:null==(Y=Q.viewModel)?void 0:Y.state]},()=>X._setTitleFromFeatureWidget()),
e.watch(()=>{var U,V,Q,Y;return[null==(U=X.selectedFeatureWidget)?void 0:null==(V=U.viewModel)?void 0:V.content,null==(Q=X.selectedFeatureWidget)?void 0:null==(Y=Q.viewModel)?void 0:Y.state]},()=>X._setContentFromFeatureWidget()),e.when(()=>!X.collapsed,()=>{var U,V;"xsmall"===(null==(U=X.viewModel)?void 0:null==(V=U.view)?void 0:V.widthBreakpoint)&&X.viewModel.active&&X.collapseEnabled&&X.viewModel.centerAtLocation()}),e.on(()=>{var U;return null==(U=X.viewModel)?void 0:U.allActions},"change",()=>
X._watchActions()),e.watch(()=>{var U;return null==(U=X.viewModel)?void 0:U.allActions},()=>X._watchActions(),e.initial),e.watch(()=>{var U;return null==(U=X.viewModel)?void 0:U.featureViewModels},()=>X._featureMenuViewportScrollTop())]);return X}u._inheritsLoose(L,P);var M=L.prototype;M.destroy=function(){var J,R;this._destroySelectedFeatureWidget();this._destroySpinner();null==(J=this._handles)?void 0:J.destroy();this._unobserveFeatureMenuObserver();null==(R=this._featureMenuIntersectionObserver)?
void 0:R.disconnect();this._handles=null};M.castVisibleElements=function(J){return{...K,...J}};M.blur=function(){const {active:J}=this.viewModel;J||H.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};M.clear=function(){this.viewModel.clear()};M.close=function(){this.visible=!1};M.fetchFeatures=function(J,R){return this.viewModel.fetchFeatures(J,R)};M.focus=function(){const {active:J}=this.viewModel;
J||H.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};M.next=function(){return this.viewModel.next()};M.open=function(J){var R,X;this._handles.remove("selected-index");const U={collapsed:J?!!J.collapsed:!1,actionsMenuOpen:J?!!J.actionsMenuOpen:!1,featureMenuOpen:J?!!J.featureMenuOpen:!1};"xsmall"===(null==(R=this.viewModel)?void 0:null==(X=R.view)?void 0:X.widthBreakpoint)&&(U.collapsed=!0);
this.set(U);this.viewModel.open(J);this._shouldFocus(J);this._addSelectedFeatureIndexHandle()};M.previous=function(){return this.viewModel.previous()};M.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};M.triggerAction=function(J){this.viewModel.triggerAction(J)};M.render=function(){var J,R,X,U;const {actionsMenuOpen:V,dockEnabled:Q,featureMenuVisible:Y,dividedActions:fa,currentAlignment:da,currentDockPosition:ca}=this,{active:la}=this.viewModel;var {menuActions:ha}=
fa;ha=la&&1<ha.length&&V;const S=null==(J=this.selectedFeature)?void 0:null==(R=J.layer)?void 0:R.title;J=null==(X=this.selectedFeature)?void 0:null==(U=X.layer)?void 0:U.id;return D.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===da,["esri-popup--aligned-bottom-center"]:"bottom-center"===da,["esri-popup--aligned-top-left"]:"top-left"===da,["esri-popup--aligned-bottom-left"]:"bottom-left"===da,["esri-popup--aligned-top-right"]:"top-right"===da,["esri-popup--aligned-bottom-right"]:"bottom-right"===
da,["esri-popup--is-docked"]:la&&Q,["esri-popup--shadow"]:la&&!Q,["esri-popup--is-docked-top-left"]:"top-left"===ca,["esri-popup--is-docked-top-center"]:"top-center"===ca,["esri-popup--is-docked-top-right"]:"top-right"===ca,["esri-popup--is-docked-bottom-left"]:"bottom-left"===ca,["esri-popup--is-docked-bottom-center"]:"bottom-center"===ca,["esri-popup--is-docked-bottom-right"]:"bottom-right"===ca,["esri-popup--feature-menu-open"]:Y,["esri-popup--actions-menu-open"]:ha}),role:"presentation","data-layer-title":S,
"data-layer-id":J,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},la?[this.renderMainContainer(),this.renderPointer()]:null)};M.renderLoadingIcon=function(){return D.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};M.renderNavigationLoading=function(){const {messagesCommon:J}=this;return this.viewModel.pendingPromisesCount?D.tsx("div",{key:G("loading-container"),role:"presentation",class:"esri-popup__loading-container",
"aria-label":J.loading,title:J.loading},this.renderLoadingIcon()):null};M.renderPreviousIcon=function(){const J=F.isRTL(this.container);return D.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:J,["esri-popup__pagination-previous-icon--rtl"]:J,["esri-icon-left-triangle-arrow"]:!J,["esri-popup__pagination-previous-icon"]:!J})})};M.renderPreviousButton=function(){const {messages:J}=this;return D.tsx("div",{role:"button",tabIndex:0,bind:this,
onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":J.previous,title:J.previous},this.renderPreviousIcon())};M.renderNextIcon=function(){const J=F.isRTL(this.container);return D.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:J,["esri-popup__pagination-next-icon--rtl"]:J,["esri-icon-right-triangle-arrow"]:!J,["esri-popup__pagination-next-icon"]:!J})})};M.renderNextButton=
function(){const {messages:J}=this;return D.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":J.next,title:J.next},this.renderNextIcon())};M.renderFeatureMenuButton=function(){const {featureMenuOpen:J,featureMenuId:R,messagesCommon:X}=this,{featureCount:U,selectedFeatureIndex:V}=this.viewModel;return D.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,
onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":R,"aria-expanded":J.toString(),"aria-label":X.menu,title:X.menu},this._getPageText(U,V))};M.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:
null};M.renderDockIcon=function(){const {dockEnabled:J}=this,R=this._wouldDockTo();return D.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:J,["esri-popup__icon--dock-icon"]:!J,["esri-icon-dock-right"]:!J&&("top-right"===R||"bottom-right"===R),["esri-icon-dock-left"]:!J&&("top-left"===R||"bottom-left"===R),["esri-icon-maximize"]:!J&&"top-center"===R,["esri-icon-dock-bottom"]:!J&&"bottom-center"===R},"esri-popup__icon")})};M.renderDockButton=function(){var J,R,X;const {dockEnabled:U,
messages:V}=this,Q=null==(J=this.viewModel)?void 0:null==(R=J.view)?void 0:R.widthBreakpoint;J=U?V.undock:V.dock;return"xsmall"!==Q&&null!=(X=this.dockOptions)&&X.buttonEnabled?D.tsx("div",{role:"button","aria-label":J,title:J,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};M.renderTitle=
function(){const {title:J}=this.viewModel,{titleId:R,collapsible:X,contentCollapsed:U,messagesCommon:V}=this;var Q={["esri-popup__header-container--button"]:X};const Y=D.tsx(x.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:J});Q=X?D.tsx("button",{key:`${J}--collapsible`,id:R,title:U?V.expand:V.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",Q),"aria-expanded":U?"false":"true",onclick:this._toggleCollapsed,
type:"button"},Y):D.tsx("div",{key:J,id:R,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",Q)},Y);return J?Q:null};M.renderCloseIcon=function(){return D.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};M.renderCloseButton=function(){const {visibleElements:J,messagesCommon:R}=this;return J.closeButton?D.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button",
"aria-label":R.close,title:R.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};M.renderHeader=function(){return D.tsx("header",{class:"esri-popup__header"},this.renderTitle(),D.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};M.renderContentContainer=function(){const {contentId:J,hasContent:R,contentCollapsed:X}=this,{content:U}=this.viewModel;return R&&!X?D.tsx("article",{key:U,
enterAnimation:this._createFeatureUpdatedAnimation(),id:J,class:"esri-popup__content"},this.renderContent()):null};M.renderActionsMenuButton=function(){const {actionsMenuId:J,actionsMenuButtonId:R,actionsMenuOpen:X,dividedActions:U,messagesCommon:V}=this,Q=X?V.close:V.open,{menuActions:Y}=U;return Y.length?D.tsx("div",{key:G("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:R,"aria-haspopup":"true","aria-controls":X?J:null,tabIndex:0,
bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":Q,title:Q},D.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};M.renderMenuActions=function(){const {actionsMenuId:J,actionsMenuButtonId:R,actionsMenuOpen:X,dividedActions:U}=this,{menuActions:V}=U;return V.length&&X?D.tsx("ul",{id:J,role:"menu","aria-labelledby":R,key:G("actions"),class:"esri-popup__actions",
bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},V.toArray().map(Q=>this.renderAction({action:Q,type:"menu-item"}))):null};M.renderInlineActions=function(){const {inlineActions:J}=this.dividedActions;return!!J.length&&J.toArray().map(R=>this.renderAction({action:R,type:"inline"}))};M.renderInlineActionsContainer=function(){const {inlineActions:J,menuActions:R}=this.dividedActions,X=!!J.length,U=!!R.length;return X||U?
D.tsx("div",{key:"inline-actions-container","data-inline-actions":X.toString(),"data-menu-actions":U.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};M.renderNavigation=function(){return this.featureNavigationVisible?D.tsx("section",{key:G("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null};M.renderFooter=function(){const {featureNavigationVisible:J,dividedActions:R}=
this,{inlineActions:X,menuActions:U}=R,V=!!X.length,Q={["esri-popup__footer--has-pagination"]:J,["esri-popup__footer--has-actions"]:V,["esri-popup__footer--has-actions-menu"]:!!U.length};return J||V?D.tsx("div",{key:G("feature-buttons"),class:this.classes("esri-popup__footer",Q)},this.renderInlineActionsContainer(),this.renderNavigation()):null};M.renderFeatureMenuContainer=function(){var {messages:J}=this;const {featureViewModels:R,isLoadingFeature:X}=this.viewModel;J=E.substitute(J.selectedFeatures,
{total:R.length});return D.tsx("section",{key:G("menu"),class:"esri-popup__feature-menu"},D.tsx("strong",{class:"esri-popup__feature-menu-header"},J),D.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:F.storeNode},this.renderFeatureMenu(),D.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),X?D.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):
null))};M.renderPointer=function(){return this.dockEnabled?null:D.tsx("div",{key:G("pointer"),class:"esri-popup__pointer",role:"presentation"},D.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};M.renderMainContainer=function(){const {dockEnabled:J,currentAlignment:R,currentDockPosition:X,titleId:U,contentId:V,collapsible:Q,hasContent:Y,contentCollapsed:fa,visibleElements:da}=this,{title:ca}=this.viewModel,la="bottom-left"===R||"bottom-center"===R||"bottom-right"===
R||"top-left"===X||"top-center"===X||"top-right"===X,ha="top-left"===R||"top-center"===R||"top-right"===R||"bottom-left"===X||"bottom-center"===X||"bottom-right"===X;return D.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:J,["esri-popup--is-collapsible"]:Q,["esri-popup--is-collapsed"]:fa}),tabIndex:da.closeButton?null:-1,role:"dialog","aria-labelledby":ca?U:"","aria-describedby":Y&&!fa?V:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,
afterUpdate:this._mainContainerNodeUpdated},la?this.renderFooter():null,la?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),ha?this.renderFooter():null,ha?this.renderFeatureMenuContainer():null)};M.renderContent=function(){var J;const R=null==(J=this.viewModel)?void 0:J.content;return R?"string"===typeof R?D.tsx("div",{key:R,innerHTML:R}):this.renderNodeContent(R):null};M.renderActionText=function(J){return D.tsx("span",{key:"text",class:"esri-popup__action-text"},
J)};M.renderActionIcon=function(J){const R=this._getActionClass(J),X=this._getActionImage(J),U={["esri-icon-loading-indicator"]:J.active,["esri-rotating"]:J.active,["esri-popup__icon"]:!!R,["esri-popup__action-image"]:!J.active&&!!X};R&&(U[R]=!J.active);return D.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",U),styles:this._getIconStyles(X)})};M.renderAction=function(J){const {action:R,type:X}=J;J=this._getActionTitle(R);const U={["esri-popup__action"]:"toggle"!==
R.type,["esri-popup__action-toggle"]:"toggle"===R.type,["esri-popup__action-toggle--on"]:"toggle"===R.type&&R.value,["esri-popup__button--disabled"]:R.disabled},V=[this.renderActionIcon(R),this.renderActionText(J)];J="menu-item"===X?D.tsx("li",{key:R.uid,role:"menuitem",tabIndex:0,title:J,"aria-label":J,class:this.classes("esri-popup__button",U),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":R.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},V):D.tsx("div",{key:R.uid,
role:"button",tabIndex:0,title:J,"aria-label":J,class:this.classes("esri-popup__button",U),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":R.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},V);return R.visible?J:null};M.renderFeatureMenuItem=function(J,R){const {messages:X,messagesCommon:U}=this,{selectedFeatureIndex:V,selectedFeatureViewModel:Q}=this.viewModel;var Y=J===Q;const fa={["esri-popup__feature-menu-item--selected"]:Y};Y=Y?D.tsx("span",{key:G(`feature-menu-selected-feature-${V}`),
title:X.selectedFeature,"aria-label":X.selectedFeature,class:"esri-icon-check-mark"}):null;J=D.tsx("span",{innerHTML:J.title||U.untitled});return D.tsx("li",{role:"menuitem",tabIndex:-1,key:G(`feature-menu-feature-${V}`),class:this.classes(fa,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":R,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,
onmouseleave:this._removeActiveFeature},D.tsx("span",{class:"esri-popup__feature-menu-title"},J,Y))};M.renderFeatureMenu=function(){const {featureMenuId:J}=this,{featureViewModels:R}=this.viewModel;return 1<R.length?D.tsx("ol",{class:"esri-popup__feature-menu-list",id:J,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},R.filter(X=>!!X.graphic).map((X,U)=>this.renderFeatureMenuItem(X,U))):null};M._getActionTitle=
function(J){const {messages:R,selectedFeature:X,messagesCommon:U}=this,{id:V}=J,Q=null==X?void 0:X.attributes;return(J="zoom-to-feature"===V?E.substitute(J.title,{messages:R}):"remove-selected-feature"===V?E.substitute(J.title,{messages:U}):"zoom-to-clustered-features"===V?E.substitute(J.title,{messages:R}):"browse-clustered-features"===V?E.substitute(J.title,{messages:R}):J.title)&&Q?E.substitute(J,Q):J};M._getActionClass=function(J){var {selectedFeature:R}=this;R=null==R?void 0:R.attributes;const {className:X,
image:U}=J;return(J=U||X?X:"esri-icon-default-action")&&R?E.substitute(J,R):J};M._getActionImage=function(J){var {selectedFeature:R}=this;R=null==R?void 0:R.attributes;({image:J}=J);return J&&R?E.substitute(J,R):J};M._createFeatureUpdatedAnimation=function(){return F.cssTransition("enter","esri-popup--feature-updated")};M._getInlineActionCount=function(){const {maxInlineActions:J,featureNavigationVisible:R}=this;if("number"!==typeof J)return null;const X=Math.round(J);return Math.max(R?X-1:X,0)};
M._watchActions=function(){const {allActions:J}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");J&&J.forEach(R=>{this._handles.add(e.watch(()=>[R.uid,R.active,R.className,R.disabled,R.id,R.title,R.image,R.visible],()=>this.scheduleRender()),"actions")})};M._divideActions=function(){var {allActions:J}=this.viewModel;J=J.filter(V=>V.visible);const R=this._getInlineActionCount(),X=null===R,U=0===R;return{inlineActions:X?J.slice(0):U?new r:J.slice(0,R),menuActions:X?
new r:U?J.slice(0):J.slice(R)}};M._featureMenuOpenChanged=function(J){J?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};M._actionsMenuOpenChanged=function(J){J?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};M._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:J,messagesCommon:R}=this;if(J){var X,U;this.viewModel.title="error"===(null==(X=J.viewModel)?void 0:X.state)?R.errorMessage:(null==(U=J.viewModel)?void 0:U.title)||""}};M._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:J}=
this;J&&(this.viewModel.content=J)};M._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};M._featureMenuIntersectionObserverCreated=function(J){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(J);this._featureMenuIntersectionObserverNode=J};M._handleFeatureMenuKeyup=function(J){"Escape"===v.eventKey(J)&&(J.stopPropagation(),this._focusFeatureMenuButton=
!0,this.featureMenuOpen=!1,this.scheduleRender())};M._handleActionMenuKeyup=function(J){"Escape"===v.eventKey(J)&&(J.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};M._setActiveFeature=function(J){const {viewModel:R}=this;R.activeFeature=R.features[J.currentTarget["data-feature-index"]]||null};M._removeActiveFeature=function(){this.viewModel.activeFeature=null};M._handleFeatureMenuItemKeyup=function(J){const R=v.eventKey(J);var {_featureMenuNode:X}=
this;const U=J.currentTarget["data-feature-index"];if(X){X=X.querySelectorAll("li");var V=X.length;"ArrowUp"===R?(J.stopPropagation(),X[(U-1+V)%V].focus()):"ArrowDown"===R?(J.stopPropagation(),X[(U+1+V)%V].focus()):"Home"===R?(J.stopPropagation(),X[0].focus()):"End"===R&&(J.stopPropagation(),X[X.length-1].focus())}};M._handleActionMenuItemKeyup=function(J){const R=v.eventKey(J);var {_actionsMenuNode:X}=this;const U=J.currentTarget.dataset.actionUid;var {menuActions:V}=this.dividedActions;V=V.findIndex(Y=>
Y.uid===U);if(X){X=X.querySelectorAll("li");var Q=X.length;"ArrowUp"===R?(J.stopPropagation(),X[(V-1+Q)%Q].focus()):"ArrowDown"===R?(J.stopPropagation(),X[(V+1+Q)%Q].focus()):"Home"===R?(J.stopPropagation(),X[0].focus()):"End"===R&&(J.stopPropagation(),X[X.length-1].focus())}};M._handleMainKeyup=function(J){const R=v.eventKey(J);"ArrowLeft"===R&&(J.stopPropagation(),this.previous());"ArrowRight"===R&&(J.stopPropagation(),this.next())};M._spinnerEnabledChange=function(J){this._destroySpinner();J&&
(J=this.get("viewModel.view"),this._createSpinner(J))};M._hideSpinner=function(){const {_spinner:J}=this;J&&(J.location=null,J.hide())};M._displaySpinner=function(){const {_spinner:J}=this;if(J){var {location:R,waitingForResult:X}=this.viewModel;X?J.show({location:R}):J.hide()}};M._getIconStyles=function(J){return{"background-image":J?`url(${J})`:""}};M._shouldFocus=function(){var J=u._asyncToGenerator(function*(R){R.shouldFocus&&(yield e.whenOnce(()=>{var X;return!0===(null==(X=this.viewModel)?void 0:
X.active)}),this.focus())});return function(R){return J.apply(this,arguments)}}();M._addSelectedFeatureIndexHandle=function(){const J=e.watch(()=>{var R;return null==(R=this.viewModel)?void 0:R.selectedFeatureIndex},(R,X)=>this._selectedFeatureIndexUpdated(R,X));this._handles.add(J,"selected-index")};M._selectedFeatureIndexUpdated=function(J,R){const {featureCount:X}=this;X&&J!==R&&-1!==J&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};M._destroySelectedFeatureWidget=function(){const {_feature:J}=
this;J&&(J.viewModel=null,J&&!J.destroyed&&J.destroy());this._feature=null};M._isScreenLocationWithinView=function(J,R){return-1<J.x&&-1<J.y&&J.x<=R.width&&J.y<=R.height};M._isOutsideView=function(J){const {popupHeight:R,popupWidth:X,screenLocation:U,side:V,view:Q}=J;if(isNaN(X)||isNaN(R)||!Q||!U)return!1;J=Q.padding;return"right"===V&&U.x+X/2>Q.width-J.right||"left"===V&&U.x-X/2<J.left||"top"===V&&U.y-R<J.top||"bottom"===V&&U.y+R>Q.height-J.bottom?!0:!1};M._calculateAutoAlignment=function(J){if("auto"!==
J)return J;const {_pointerOffsetInPx:R,_containerNode:X,_mainContainerNode:U,viewModel:V}=this,{screenLocation:Q,view:Y}=V;if(g.isNone(Q)||!Y||!X)return"top-center";if(!this._isScreenLocationWithinView(Q,Y))return this._get("currentAlignment")||"top-center";var fa=(J=U?window.getComputedStyle(U,null):null)?parseInt(J.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,da=J?parseInt(J.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:ca,width:la}=X.getBoundingClientRect();
J=la+R;const ha=Math.max(ca,fa,da)+R;fa=this._isOutsideView({popupHeight:ha,popupWidth:J,screenLocation:Q,side:"right",view:Y});da=this._isOutsideView({popupHeight:ha,popupWidth:J,screenLocation:Q,side:"left",view:Y});const S=this._isOutsideView({popupHeight:ha,popupWidth:J,screenLocation:Q,side:"top",view:Y});J=this._isOutsideView({popupHeight:ha,popupWidth:J,screenLocation:Q,side:"bottom",view:Y});return da?S?"bottom-right":"top-right":fa?S?"bottom-left":"top-left":S?J?"top-center":"bottom-center":
"top-center"};M._callCurrentAlignment=function(J){return"function"===typeof J?J.call(this):J};M._getCurrentAlignment=function(){const {alignment:J,dockEnabled:R}=this;return R||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(J)))};M._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};M._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};M._calculatePositionResult=
function(J){const R=["left","right"];F.isRTL(this.container)&&R.reverse();return J.replace(/leading/gi,R[0]).replace(/trailing/gi,R[1])};M._callDockPosition=function(J){return"function"===typeof J?J.call(this):J};M._getDockPosition=function(){var J;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(J=this.dockOptions)?void 0:J.position)))};M._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};
M._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};M._calculateAutoDockPosition=function(J){var R;if("auto"!==J)return J;J=null==(R=this.viewModel)?void 0:R.view;R=F.isRTL(this.container)?"top-left":"top-right";if(!J)return R;var X=J.padding||{left:0,right:0,top:0,bottom:0};X=J.width-X.left-X.right;({breakpoints:J}=J);return J&&X<=J.xsmall?"bottom-center":R};M._positionContainer=function(J=this._containerNode){J&&(this._containerNode=J);if(J){var {screenLocation:R}=this.viewModel,
{width:X}=J.getBoundingClientRect();if(R=this._calculatePositionStyle(R,X))J.style.top=R.top,J.style.left=R.left,J.style.bottom=R.bottom,J.style.right=R.right}};M._calculateFullWidth=function(J){const {currentAlignment:R,_pointerOffsetInPx:X}=this;return"top-left"===R||"bottom-left"===R||"top-right"===R||"bottom-right"===R?J+X:J};M._calculateAlignmentPosition=function(J,R,X,U){const {currentAlignment:V,_pointerOffsetInPx:Q}=this;U/=2;const Y=X.height-R;X=X.width-J;const {padding:fa}=this.view;if("bottom-center"===
V)return{top:R+Q-fa.top,left:J-U-fa.left};if("top-left"===V)return{bottom:Y+Q-fa.bottom,right:X+Q-fa.right};if("bottom-left"===V)return{top:R+Q-fa.top,right:X+Q-fa.right};if("top-right"===V)return{bottom:Y+Q-fa.bottom,left:J+Q-fa.left};if("bottom-right"===V)return{top:R+Q-fa.top,left:J+Q-fa.left};if("top-center"===V)return{bottom:Y+Q-fa.bottom,left:J-U-fa.left}};M._calculatePositionStyle=function(J,R){const {dockEnabled:X,view:U}=this;if(U){if(X)return{left:"",top:"",right:"",bottom:""};if(!g.isNone(J)&&
R&&(R=this._calculateFullWidth(R),J=this._calculateAlignmentPosition(J.x,J.y,U,R)))return{top:void 0!==J.top?`${J.top}px`:"auto",left:void 0!==J.left?`${J.left}px`:"auto",bottom:void 0!==J.bottom?`${J.bottom}px`:"auto",right:void 0!==J.right?`${J.right}px`:"auto"}}};M._viewChange=function(J,R){J&&R&&(this.close(),this.clear())};M._viewReadyChange=function(J,R){J?(J=this.get("viewModel.view"),this._wireUpView(J)):R&&(this.close(),this.clear())};M._wireUpView=function(J){this._destroySpinner();if(J){var {spinnerEnabled:R}=
this;R&&this._createSpinner(J);this._setDockEnabledForViewSize(this.dockOptions)}};M._dockingThresholdCrossed=function(J,R,X){const [U,V]=J,[Q,Y]=R,{width:fa,height:da}=X;return U<=fa&&Q>fa||U>fa&&Q<=fa||V<=da&&Y>da||V>da&&Y<=da};M._updateDockEnabledForViewSize=function(J,R){if(J&&R){var X=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},U=X.left+X.right,V=X.top+X.bottom;X=[];var Q=[];X[0]=J[0]-U;X[1]=J[1]-V;Q[0]=R[0]-U;Q[1]=R[1]-V;({dockOptions:J}=this);this._dockingThresholdCrossed(X,
Q,J.breakpoint)&&this._setDockEnabledForViewSize(J);this._setCurrentDockPosition()}};M._focusDockButtonNode=function(J){this._focusDockButton&&(this._focusDockButton=!1,J.focus())};M._closeButtonNodeUpdated=function(J){this._focusClose?(this._focusClose=!1,J.focus()):this._blurClose&&(this._blurClose=!1,J.blur())};M._mainContainerNodeUpdated=function(J){this._mainContainerNode=J;this._focusContainer?(this._focusContainer=!1,J.focus()):this._blurContainer&&(this._blurContainer=!1,J.blur())};M._featureMenuNodeUpdated=
function(J){(this._featureMenuNode=J)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,J=J.querySelectorAll("li"),J.length&&J[0].focus())};M._actionsMenuNodeUpdated=function(J){(this._actionsMenuNode=J)&&this._focusFirstAction&&(this._focusFirstAction=!1,J=J.querySelectorAll("li"),J.length&&J[0].focus())};M._focusFeatureMenuButtonNode=function(J){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,J.focus())};M._focusActionsMenuButtonNode=function(J){this._focusActionsMenuButton&&
(this._focusActionsMenuButton=!1,J.focus())};M._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};M._toggleScreenLocationEnabled=function(){const {dockEnabled:J,viewModel:R}=this;R&&(R.screenLocationEnabled=R.active&&!J)};M._shouldDockAtCurrentViewSize=function(J){var R,X;J=J.breakpoint;const U=null==(R=this.viewModel)?void 0:null==(X=R.view)?void 0:X.ui;if(!U)return!1;const {width:V,height:Q}=U;if(isNaN(V)||isNaN(Q))return!1;R=J.hasOwnProperty("width")&&
V<=J.width;X=J.hasOwnProperty("height")&&Q<=J.height;return R||X};M._setDockEnabledForViewSize=function(J){J.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(J))};M._getPageText=function(J,R){return this.featureNavigationVisible?E.substitute(this.messages.pageText,{index:R+1,total:J}):null};M._destroySpinner=function(){const {_spinner:J,view:R}=this;J&&(R&&R.ui&&R.ui.remove(this._spinner,"popup-spinner"),J.destroy(),this._spinner=null)};M._createSpinner=function(J){J&&(this._spinner=
new q({view:J}),J.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};M._toggleCollapsed=function(){this.collapsed=!this.collapsed};M._close=function(){this.close();this.view&&this.view.focus()};M._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};M._toggleFeatureMenu=function(){const J=!this.featureMenuOpen;this._featureMenuOpenChanged(J);this.actionsMenuOpen=!1;this.featureMenuOpen=J};M._toggleActionsMenu=function(){const J=
!this.actionsMenuOpen;this._actionsMenuOpenChanged(J);this.featureMenuOpen=!1;this.actionsMenuOpen=J};M._triggerAction=function(J){const R=J.currentTarget.dataset.actionUid;var {allActions:X}=this.viewModel;J=X.findIndex(U=>U.uid===R);(X=X.getItemAt(J))&&"toggle"===X.type&&(X.value=!X.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(J)};M._selectFeature=function(J){J=J.currentTarget["data-feature-index"];isNaN(J)||(this.viewModel.selectedFeatureIndex=J);this.featureMenuOpen=!1;this._focusFeatureMenuButton=
!0;this.scheduleRender()};M._next=function(){this.next()};M._previous=function(){this.previous()};u._createClass(L,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var J,
R,X,U,V,Q,Y;return!!(this.selectedFeatureWidget?(null==(J=this.selectedFeatureWidget)?0:null==(R=J.viewModel)?0:R.waitingForContent)||"error"===(null==(X=this.selectedFeatureWidget)?void 0:null==(U=X.viewModel)?void 0:U.state)||(null==(V=this.selectedFeatureWidget)?0:null==(Q=V.viewModel)?0:Q.content):null==(Y=this.viewModel)?0:Y.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",
get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(J){this._set("actionsMenuOpen",
!!J)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||O},set:function(J){var R={...O};const X=this.get("viewModel.view.breakpoints");var U={};X&&(U.width=X.xsmall,U.height=X.xsmall);J={...R,...J};R={...R.breakpoint,...U};({breakpoint:U}=J);!0===U?J.breakpoint=R:"object"===typeof U&&(J.breakpoint={...R,...U});this._set("dockOptions",
J);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:J,visibleElements:R,headingLevel:X}=this,{selectedFeatureViewModel:U}=this.viewModel,V={...R,title:!1};if(!U)return null;J?(J.viewModel=U,J.visibleElements=V):this._feature=new k({headingLevel:X+1,viewModel:U,visibleElements:V});return this._feature}}]);return L}(w.FeatureContentMixin(t));n.__decorate([l.property({readOnly:!0})],h.prototype,"actionsMenuId",null);n.__decorate([l.property({readOnly:!0})],
h.prototype,"actionsMenuButtonId",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"featureMenuId",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"titleId",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"contentId",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"hasContent",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"featureNavigationVisible",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"collapsible",null);n.__decorate([l.property({readOnly:!0})],
h.prototype,"featureMenuVisible",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"contentCollapsed",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"dividedActions",null);n.__decorate([a.aliasOf("viewModel.actions")],h.prototype,"actions",void 0);n.__decorate([l.property()],h.prototype,"actionsMenuOpen",null);n.__decorate([l.property()],h.prototype,"alignment",void 0);n.__decorate([a.aliasOf("viewModel.autoCloseEnabled")],h.prototype,"autoCloseEnabled",void 0);n.__decorate([a.aliasOf("viewModel.autoOpenEnabled")],
h.prototype,"autoOpenEnabled",void 0);n.__decorate([a.aliasOf("viewModel.defaultPopupTemplateEnabled")],h.prototype,"defaultPopupTemplateEnabled",void 0);n.__decorate([a.aliasOf("viewModel.content")],h.prototype,"content",void 0);n.__decorate([l.property()],h.prototype,"collapsed",void 0);n.__decorate([l.property()],h.prototype,"collapseEnabled",void 0);n.__decorate([l.property({readOnly:!0})],h.prototype,"currentAlignment",null);n.__decorate([l.property({readOnly:!0})],h.prototype,"currentDockPosition",
null);n.__decorate([l.property()],h.prototype,"dockOptions",null);n.__decorate([l.property()],h.prototype,"dockEnabled",void 0);n.__decorate([a.aliasOf("viewModel.featureCount")],h.prototype,"featureCount",void 0);n.__decorate([l.property()],h.prototype,"featureMenuOpen",void 0);n.__decorate([a.aliasOf("viewModel.features")],h.prototype,"features",void 0);n.__decorate([a.aliasOf("viewModel.goToOverride")],h.prototype,"goToOverride",void 0);n.__decorate([l.property()],h.prototype,"headingLevel",void 0);
n.__decorate([a.aliasOf("viewModel.highlightEnabled")],h.prototype,"highlightEnabled",void 0);n.__decorate([a.aliasOf("viewModel.location")],h.prototype,"location",void 0);n.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],h.prototype,"label",void 0);n.__decorate([l.property()],h.prototype,"maxInlineActions",void 0);n.__decorate([l.property(),B.messageBundle("esri/widgets/Popup/t9n/Popup")],h.prototype,"messages",void 0);n.__decorate([l.property(),B.messageBundle("esri/t9n/common")],
h.prototype,"messagesCommon",void 0);n.__decorate([a.aliasOf("viewModel.promises")],h.prototype,"promises",void 0);n.__decorate([a.aliasOf("viewModel.selectedFeature")],h.prototype,"selectedFeature",void 0);n.__decorate([a.aliasOf("viewModel.selectedFeatureIndex")],h.prototype,"selectedFeatureIndex",void 0);n.__decorate([l.property({readOnly:!0})],h.prototype,"selectedFeatureWidget",null);n.__decorate([l.property()],h.prototype,"spinnerEnabled",void 0);n.__decorate([a.aliasOf("viewModel.title")],
h.prototype,"title",void 0);n.__decorate([a.aliasOf("viewModel.updateLocationEnabled")],h.prototype,"updateLocationEnabled",void 0);n.__decorate([a.aliasOf("viewModel.view")],h.prototype,"view",void 0);n.__decorate([l.property({type:A}),C.vmEvent(["triggerAction","trigger-action"])],h.prototype,"viewModel",void 0);n.__decorate([a.aliasOf("viewModel.visible")],h.prototype,"visible",void 0);n.__decorate([l.property()],h.prototype,"visibleElements",void 0);n.__decorate([f.cast("visibleElements")],h.prototype,
"castVisibleElements",null);n.__decorate([y.accessibleHandler()],h.prototype,"_close",null);n.__decorate([y.accessibleHandler()],h.prototype,"_toggleDockEnabled",null);n.__decorate([y.accessibleHandler()],h.prototype,"_toggleFeatureMenu",null);n.__decorate([y.accessibleHandler()],h.prototype,"_toggleActionsMenu",null);n.__decorate([y.accessibleHandler()],h.prototype,"_triggerAction",null);n.__decorate([y.accessibleHandler()],h.prototype,"_selectFeature",null);n.__decorate([y.accessibleHandler()],
h.prototype,"_next",null);n.__decorate([y.accessibleHandler()],h.prototype,"_previous",null);return h=n.__decorate([m.subclass("esri.widgets.Popup")],h)})},"esri/core/throttle":function(){define(["exports"],function(u){u.throttle=function(n,h,r,v){let z=null,p=1E3;"number"===typeof h?(p=h,v=r):(z=null!=h?h:null,p=r);let g=0,e;const b=()=>{g=0;n.apply(v,e)};h=(...a)=>{z&&z.apply(v,a);e=a;p?g||(g=setTimeout(b,p)):b()};h.remove=()=>{g&&(clearTimeout(g),g=0)};h.forceUpdate=()=>{g&&(clearTimeout(g),b())};
h.hasPendingUpdates=()=>!!g;return h};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B){const C={title:!0,content:!0,lastEditedInfo:!0};r=function(D){function F(G,O){G=D.call(this,G,O)||this;G._contentWidgets=[];G.graphic=null;G.defaultPopupTemplateEnabled=!1;G.headingLevel=2;G.label=void 0;G.messages=null;G.messagesCommon=null;G.messagesURIUtils=null;G.spatialReference=null;G.title=null;G.visibleElements={...C};G.map=null;G.view=null;G.viewModel=new q;return G}n._inheritsLoose(F,D);var E=F.prototype;E.initialize=function(){this.own(v.watch(()=>
{var G;return null==(G=this.viewModel)?void 0:G.contentViewModels},()=>this._setupContentWidgets(),v.initial))};E.loadDependencies=function(){return new Promise((G,O)=>u(["../chunks/calcite-notice"],G,O))};E.destroy=function(){this._destroyContentWidgets()};E.castVisibleElements=function(G){return{...C,...G}};E.render=function(){var {state:G}=this.viewModel;G=y.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===G?this.renderError():"loading"===G?this.renderLoading():
this.renderContentContainer());return y.tsx("div",{class:this.classes("esri-feature","esri-widget")},G)};E.setActiveMedia=function(G,O){this.viewModel.setActiveMedia(G,O)};E.nextMedia=function(G){this.viewModel.nextMedia(G)};E.previousMedia=function(G){this.viewModel.previousMedia(G)};E.renderError=function(){const {messagesCommon:G,messages:O,visibleElements:H}=this;return y.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},H.title?y.tsx("div",{key:"error-title",
slot:"title"},G.errorMessage):null,y.tsx("div",{key:"error-message",slot:"message"},O.loadingError))};E.renderLoading=function(){return y.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},y.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};E.renderContentContainer=function(){const {visibleElements:G}=this;return G.content?y.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):
null};E.renderTitle=function(){const {visibleElements:G,title:O}=this;return G.title?y.tsx(w.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:O}):null};E.renderContent=function(){var G=this.viewModel.content;return G?Array.isArray(G)?G.length?y.tsx("div",{key:"content-content-elements"},G.map(this.renderContentElement,this)):null:"string"===typeof G?(G=this._contentWidgets[0],!G||G.destroyed?null:y.tsx("div",{key:"content-content"},G.render())):this.renderNodeContent(G):null};
E.renderContentElement=function(G,O){const {visibleElements:H}=this;if("boolean"!==typeof H.content&&!H.content[G.type])return null;switch(G.type){case "attachments":return this.renderAttachments(O);case "custom":return this.renderCustom(G,O);case "fields":return this.renderFields(O);case "media":return this.renderMedia(O);case "text":return this.renderText(G,O);case "expression":return this.renderExpression(O);default:return null}};E.renderAttachments=function(G){const O=this._contentWidgets[G];
if(!O||O.destroyed)return null;const {state:H,attachmentInfos:K}=O.viewModel;return"loading"===H||0<K.length?y.tsx("div",{key:this._buildKey("attachments-element",G),class:this.classes("esri-feature__content-element")},O.render()):null};E.renderExpression=function(G){const O=this._contentWidgets[G];return!O||O.destroyed?null:y.tsx("div",{key:this._buildKey("expression-element",G),class:"esri-feature__content-element"},O.render())};E.renderCustom=function(G,O){({creator:G}=G);const H=this._contentWidgets[O];
return!H||H.destroyed?null:G?y.tsx("div",{key:this._buildKey("custom-element",O),class:"esri-feature__content-element"},H.render()):null};E.renderFields=function(G){const O=this._contentWidgets[G];return!O||O.destroyed?null:y.tsx("div",{key:this._buildKey("fields-element",G),class:"esri-feature__content-element"},O.render())};E.renderMedia=function(G){const O=this._contentWidgets[G];return!O||O.destroyed?null:y.tsx("div",{key:this._buildKey("media-element",G),class:"esri-feature__content-element"},
O.render())};E.renderLastEditInfo=function(){const {visibleElements:G,messages:O}=this;var {lastEditInfo:H}=this.viewModel;if(!H||!G.lastEditedInfo)return null;const {date:K,user:P}=H;H=B.substitute("edit"===H.type?P?O.lastEditedByUser:O.lastEdited:P?O.lastCreatedByUser:O.lastCreated,{date:K,user:P});return y.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},H)};E.renderText=function(G,O){const H=this._contentWidgets[O];return!H||
H.destroyed?null:G.text?y.tsx("div",{key:this._buildKey("text-element",O),class:this.classes("esri-feature__content-element","esri-feature__text")},H.render()):null};E._buildKey=function(G,...O){const H=this.get("viewModel.graphic.uid")||"0";O=O.join("-");return`${G}__${H}-${O}`};E._destroyContentWidget=function(G){G&&(G.viewModel=null,!G.destroyed&&G.destroy())};E._destroyContentWidgets=function(){this._contentWidgets.forEach(G=>this._destroyContentWidget(G));this._contentWidgets=[]};E._setupContentWidgets=
function(){this._destroyContentWidgets();const {headingLevel:G,visibleElements:O}=this;var H=this.get("viewModel.content");const {contentViewModels:K}=this.viewModel;Array.isArray(H)?H.forEach((P,L)=>{"attachments"===P.type&&(this._contentWidgets[L]=new d({displayType:P.displayType,headingLevel:O.title?G+1:G,viewModel:K[L]}));"fields"===P.type&&(this._contentWidgets[L]=new m({viewModel:K[L]}));"media"===P.type&&(this._contentWidgets[L]=new k({viewModel:K[L]}));"text"===P.type&&(this._contentWidgets[L]=
new f({viewModel:K[L]}));"custom"===P.type&&(this._contentWidgets[L]=new f({viewModel:K[L]}));"expression"===P.type&&(this._contentWidgets[L]=new l({viewModel:K[L]}))},this):(H=K[0])&&!H.destroyed&&(this._contentWidgets[0]=new f({viewModel:H}));this.scheduleRender()};return F}(t.FeatureContentMixin(c));h.__decorate([z.aliasOf("viewModel.graphic")],r.prototype,"graphic",void 0);h.__decorate([z.aliasOf("viewModel.defaultPopupTemplateEnabled")],r.prototype,"defaultPopupTemplateEnabled",void 0);h.__decorate([b.property()],
r.prototype,"headingLevel",void 0);h.__decorate([b.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],r.prototype,"label",void 0);h.__decorate([b.property(),x.messageBundle("esri/widgets/Feature/t9n/Feature")],r.prototype,"messages",void 0);h.__decorate([b.property(),x.messageBundle("esri/t9n/common")],r.prototype,"messagesCommon",void 0);h.__decorate([b.property(),x.messageBundle("esri/widgets/support/t9n/uriUtils")],r.prototype,"messagesURIUtils",void 0);h.__decorate([z.aliasOf("viewModel.spatialReference")],
r.prototype,"spatialReference",void 0);h.__decorate([z.aliasOf("viewModel.title")],r.prototype,"title",void 0);h.__decorate([b.property()],r.prototype,"visibleElements",void 0);h.__decorate([e.cast("visibleElements")],r.prototype,"castVisibleElements",null);h.__decorate([z.aliasOf("viewModel.map")],r.prototype,"map",void 0);h.__decorate([z.aliasOf("viewModel.view")],r.prototype,"view",void 0);h.__decorate([b.property({type:q})],r.prototype,"viewModel",void 0);return r=h.__decorate([a.subclass("esri.widgets.Feature")],
r)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){v=function(m){function k(t,w){t=m.call(this,t,w)||this;t._featureElementInfo=null;t.attachmentsWidget=new b;t.description=null;t.displayType=null;t.graphic=null;t.headingLevel=2;t.title=null;t.viewModel=new c;return t}u._inheritsLoose(k,m);var q=k.prototype;q.initialize=function(){this._featureElementInfo=new d;this.own([h.watch(()=>{var t,w;return[null==(t=this.viewModel)?void 0:t.description,null==(w=this.viewModel)?void 0:w.title,this.headingLevel]},()=>
this._setupFeatureElementInfo(),h.initial),h.watch(()=>{var t;return null==(t=this.viewModel)?void 0:t.graphic},t=>this.attachmentsWidget.graphic=t,h.initial)])};q.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};q.render=function(){var t;const {attachmentsWidget:w}=this;return l.tsx("div",{class:"esri-feature-attachments"},null==(t=this._featureElementInfo)?void 0:t.render(),null==w?void 0:w.render())};q._setupFeatureElementInfo=function(){const {description:t,
title:w,headingLevel:A}=this;this._featureElementInfo.set({description:t,title:w,headingLevel:A})};return k}(a);n.__decorate([g.property({readOnly:!0})],v.prototype,"attachmentsWidget",void 0);n.__decorate([r.aliasOf("viewModel.description")],v.prototype,"description",void 0);n.__decorate([r.aliasOf("attachmentsWidget.displayType")],v.prototype,"displayType",void 0);n.__decorate([r.aliasOf("viewModel.graphic")],v.prototype,"graphic",void 0);n.__decorate([g.property()],v.prototype,"headingLevel",void 0);
n.__decorate([r.aliasOf("viewModel.title")],v.prototype,"title",void 0);n.__decorate([g.property({type:c})],v.prototype,"viewModel",void 0);return v=n.__decorate([e.subclass("esri.widgets.Feature.FeatureAttachments")],v)})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(u,n,h,r,v,z,p,g){r=function(e){function b(a){a=e.call(this,a)||this;a.description=null;a.title=null;return a}u._inheritsLoose(b,e);return b}(g);n.__decorate([h.property()],r.prototype,"description",void 0);n.__decorate([h.property()],r.prototype,"title",void 0);return r=n.__decorate([p.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],r)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){v=function(m){function k(t,w){t=m.call(this,t,w)||this;t.viewModel=new d;return t}u._inheritsLoose(k,m);var q=k.prototype;q.initialize=function(){this.own(h.watch(()=>{var t;return null==(t=this.viewModel)?void 0:t.contentElementViewModel},()=>this._setupExpressionWidget(),h.initial))};q.destroy=function(){this._destroyContentWidget()};q.renderLoading=function(){return l.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},l.tsx("span",
{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};q.render=function(){var t;const {state:w}=this.viewModel;return l.tsx("div",{class:"esri-feature-expression"},"loading"===w?this.renderLoading():"disabled"===w?null:null==(t=this._contentWidget)?void 0:t.render())};q._destroyContentWidget=function(){const {_contentWidget:t}=this;t&&(t.viewModel=null,t.destroy());this._contentWidget=null};q._setupExpressionWidget=function(){const {contentElementViewModel:t,
contentElement:w}=this.viewModel,A=null==w?void 0:w.type;this._destroyContentWidget();this._contentWidget=t?"fields"===A?new a({viewModel:t}):"media"===A?new c({viewModel:t}):"text"===A?new b({viewModel:t}):null:null;this.scheduleRender()};return k}(e);n.__decorate([r.property({type:d})],v.prototype,"viewModel",void 0);return v=n.__decorate([g.subclass("esri.widgets.Feature.FeatureExpression")],v)})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C){v=function(D){function F(E){var G=D.call(this,E)||this;G._abortController=null;G.expressionInfo=null;G.graphic=null;G.contentElement=null;G.contentElementViewModel=null;G.interceptor=null;G.view=null;G._cancelQuery=()=>{const {_abortController:O}=u._assertThisInitialized(G);O&&O.abort();G._abortController=null};G._createVM=()=>{var O,H;const K=null==(O=G.contentElement)?void 0:O.type;null==(H=G.contentElementViewModel)?void 0:H.destroy();
O="fields"===K?new y:"media"===K?new B:"text"===K?new x:null;G._set("contentElementViewModel",O)};G._compile=u._asyncToGenerator(function*(){G._cancelQuery();const O=new AbortController;G._abortController=O;yield G._compileExpression();G._abortController===O&&(G._abortController=null)});G._compileThrottled=g.throttle(G._compile,1,u._assertThisInitialized(G));G._compileExpression=u._asyncToGenerator(function*(){const {expressionInfo:O,graphic:H,interceptor:K,spatialReference:P,map:L,view:M,_abortController:J}=
u._assertThisInitialized(G);if(O&&H&&P&&L){var R=yield C.loadArcadeUtils();if(J===G._abortController)if((R=yield C.createCompiledExpression({arcadeUtils:R,expressionInfo:O,graphic:H,interceptor:K,map:L,spatialReference:P,view:M}))&&"esri.arcade.Dictionary"===R.declaredClass){R=yield r.castAsJsonAsync(R,J.signal);var X=null==R?void 0:R.type;R="media"===X?t.fromJSON(R):"text"===X?w.fromJSON(R):"fields"===X?q.fromJSON(R):null;G._set("contentElement",R)}else G._set("contentElement",null)}else G._set("contentElement",
null)});G.handles.add([p.watch(()=>[G.expressionInfo,G.graphic,G.map,G.spatialReference,G.view],()=>G._compileThrottled(),p.initial),p.watch(()=>[G.contentElement],()=>G._createVM(),p.initial)]);return G}u._inheritsLoose(F,D);F.prototype.destroy=function(){var E;this._cancelQuery();null==(E=this.contentElementViewModel)?void 0:E.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};u._createClass(F,[{key:"spatialReference",get:function(){var E;return(null==(E=this.view)?
void 0:E.spatialReference)||null},set:function(E){void 0===E?this._clearOverride("spatialReference"):this._override("spatialReference",E)}},{key:"state",get:function(){const {_abortController:E,contentElement:G,contentElementViewModel:O}=this;return E?"loading":G||O?"ready":"disabled"}},{key:"map",get:function(){var E;return(null==(E=this.view)?void 0:E.map)||null},set:function(E){void 0===E?this._clearOverride("map"):this._override("map",E)}}]);return F}(z.HandleOwnerMixin(v));n.__decorate([e.property()],
v.prototype,"_abortController",void 0);n.__decorate([e.property({type:A})],v.prototype,"expressionInfo",void 0);n.__decorate([e.property({type:h})],v.prototype,"graphic",void 0);n.__decorate([e.property({readOnly:!0})],v.prototype,"contentElement",void 0);n.__decorate([e.property({readOnly:!0})],v.prototype,"contentElementViewModel",void 0);n.__decorate([e.property()],v.prototype,"interceptor",void 0);n.__decorate([e.property()],v.prototype,"spatialReference",null);n.__decorate([e.property({readOnly:!0})],
v.prototype,"state",null);n.__decorate([e.property()],v.prototype,"map",null);n.__decorate([e.property()],v.prototype,"view",void 0);return v=n.__decorate([d.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],v)})},"esri/chunks/languageUtils":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q){function t(ua,Oa,hb){return""===Oa||null===Oa||void 0===Oa||Oa===hb||Oa===hb?ua:ua=ua.split(Oa).join(hb)}function w(ua){return ua instanceof Nb||ua instanceof h||ua instanceof Tb}function A(ua){return y(ua)||C(ua)||K(ua)||B(ua)||null===ua||ua===Kb||"number"===typeof ua?!0:!1}function x(ua,Oa){return void 0===ua?Oa:ua}function y(ua){return"string"===typeof ua||ua instanceof String}function B(ua){return"boolean"===typeof ua}function C(ua){return"number"===
typeof ua}function D(ua){return"number"===typeof ua&&isFinite(ua)&&Math.floor(ua)===ua}function F(ua){return ua instanceof Array}function E(ua){return"esri.arcade.Feature"===(null==ua?void 0:ua.arcadeDeclaredClass)?!0:!1}function G(ua){return!0===(ua&&ua.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===ua.declaredRootClass)}function O(ua){return!0===(ua&&ua.declaredRootClass&&"esri.arcade.featureSetCollection"===ua.declaredRootClass)}function H(ua){return ua instanceof r}function K(ua){return ua instanceof
Date}function P(ua,Oa,hb){if(ua.length<Oa||ua.length>hb)throw Error("Function called with wrong number of Parameters");}function L(ua){return 0>ua?-Math.round(-ua):Math.round(ua)}function M(){let ua=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Oa){const hb=(ua+16*Math.random())%16|0;ua=Math.floor(ua/16);return("x"===Oa?hb:hb&3|8).toString(16)})}function J(ua,Oa){if(!1===isNaN(ua)){if(void 0===Oa||null===Oa||""===Oa)return ua.toString();Oa=t(Oa,"\u2030","");Oa=t(Oa,
"\u00a4","");return l.format(ua,{pattern:Oa})}return ua.toString()}function R(ua,Oa){ua=d.DateTime.fromJSDate(ua);return void 0===Oa||null===Oa||""===Oa?ua.toISO({suppressMilliseconds:!0}):ua.toFormat(X(Oa),{locale:k.getLocale(),numberingSystem:"latn"})}function X(ua){ua=ua.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let Oa="";const hb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;
for(const Cb of ua.match(hb))switch(Cb){case "D":Oa+="d";break;case "DD":Oa+="dd";break;case "DDD":Oa+="o";break;case "d":Oa+="c";break;case "ddd":Oa+="ccc";break;case "dddd":Oa+="cccc";break;case "M":Oa+="L";break;case "MM":Oa+="LL";break;case "MMM":Oa+="LLL";break;case "MMMM":Oa+="LLLL";break;case "YY":Oa+="yy";break;case "Y":case "YYYY":Oa+="yyyy";break;case "Q":Oa+="q";break;case "Z":Oa+="ZZ";break;case "ZZ":Oa+="ZZZ";break;case "S":Oa+="'S'";break;case "SS":Oa+="'SS'";break;case "SSS":Oa+="u";
break;case "A":case "a":Oa+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":Oa+=Cb;break;default:Oa=2<=Cb.length&&"["===Cb.slice(0,1)&&"]"===Cb.slice(-1)?Oa+`'${Cb.slice(1,-1)}'`:Oa+`'${Cb}'`}return Oa}function U(ua,Oa,hb){switch(hb){case "\x3e":return ua>Oa;case "\x3c":return ua<Oa;case "\x3e\x3d":return ua>=Oa;case "\x3c\x3d":return ua<=Oa}return!1}function V(ua,Oa,hb){if(null===ua){if(null===Oa||Oa===Kb)return U(null,null,hb);if(C(Oa))return U(0,
Oa,hb);if(y(Oa)||B(Oa))return U(0,la(Oa),hb);if(K(Oa))return U(0,Oa.getTime(),hb)}if(ua===Kb){if(null===Oa||Oa===Kb)return U(null,null,hb);if(C(Oa))return U(0,Oa,hb);if(y(Oa)||B(Oa))return U(0,la(Oa),hb);if(K(Oa))return U(0,Oa.getTime(),hb)}else if(C(ua)){if(C(Oa))return U(ua,Oa,hb);if(B(Oa))return U(ua,la(Oa),hb);if(null===Oa||Oa===Kb)return U(ua,0,hb);if(y(Oa))return U(ua,la(Oa),hb);if(K(Oa))return U(ua,Oa.getTime(),hb)}else if(y(ua)){if(y(Oa))return U(Y(ua),Y(Oa),hb);if(K(Oa))return U(la(ua),Oa.getTime(),
hb);if(C(Oa))return U(la(ua),Oa,hb);if(null===Oa||Oa===Kb)return U(la(ua),0,hb);if(B(Oa))return U(la(ua),la(Oa),hb)}else if(K(ua)){if(K(Oa))return U(ua,Oa,hb);if(null===Oa||Oa===Kb)return U(ua.getTime(),0,hb);if(C(Oa))return U(ua.getTime(),Oa,hb);if(B(Oa)||y(Oa))return U(ua.getTime(),la(Oa),hb)}else if(B(ua)){if(B(Oa))return U(ua,Oa,hb);if(C(Oa))return U(la(ua),la(Oa),hb);if(K(Oa))return U(la(ua),Oa.getTime(),hb);if(null===Oa||Oa===Kb)return U(la(ua),0,hb);if(y(Oa))return U(la(ua),la(Oa),hb)}return!Q(ua,
Oa)||"\x3c\x3d"!==hb&&"\x3e\x3d"!==hb?!1:!0}function Q(ua,Oa){if(ua===Oa||null===ua&&Oa===Kb||null===Oa&&ua===Kb)return!0;if(K(ua)&&K(Oa))return ua.getTime()===Oa.getTime();if(ua instanceof v||ua instanceof z)return ua.equalityTest(Oa);if(ua instanceof b&&Oa instanceof b){const hb=ua.cache._arcadeCacheId,Cb=Oa.cache._arcadeCacheId;if(void 0!==hb&&null!==hb)return hb===Cb}return void 0!==ua&&void 0!==Oa&&null!==ua&&null!==Oa&&"object"===typeof ua&&"object"===typeof Oa&&(ua._arcadeCacheId===Oa._arcadeCacheId&&
void 0!==ua._arcadeCacheId&&null!==ua._arcadeCacheId||ua._underlyingGraphic===Oa._underlyingGraphic&&void 0!==ua._underlyingGraphic&&null!==ua._underlyingGraphic)?!0:!1}function Y(ua,Oa){if(y(ua))return ua;if(null===ua)return"";if(C(ua))return J(ua,Oa);if(B(ua))return ua.toString();if(K(ua))return R(ua,Oa);if(ua instanceof g)return JSON.stringify(ua.toJSON());if(F(ua)){Oa=[];for(var hb=0;hb<ua.length;hb++)Oa[hb]=ca(ua[hb]);return"["+Oa.join(",")+"]"}if(ua instanceof r){Oa=[];for(hb=0;hb<ua.length();hb++)Oa[hb]=
ca(ua.get(hb));return"["+Oa.join(",")+"]"}return null!==ua&&"object"===typeof ua&&void 0!==ua.castToText?ua.castToText():w(ua)?"object, Function":""}function fa(ua){const Oa=[];if(!1===F(ua))return null;if(ua instanceof r){for(var hb=0;hb<ua.length();hb++)Oa[hb]=la(ua.get(hb));return Oa}for(hb=0;hb<ua.length;hb++)Oa[hb]=la(ua[hb]);return Oa}function da(ua,Oa){if(y(ua))return ua;if(null===ua)return"";if(C(ua))return J(ua,Oa);if(B(ua))return ua.toString();if(K(ua))return R(ua,Oa);if(ua instanceof g)return ua instanceof
p?'{"xmin":'+ua.xmin.toString()+',"ymin":'+ua.ymin.toString()+","+(ua.hasZ?'"zmin":'+ua.zmin.toString()+",":"")+(ua.hasM?'"mmin":'+ua.mmin.toString()+",":"")+'"xmax":'+ua.xmax.toString()+',"ymax":'+ua.ymax.toString()+","+(ua.hasZ?'"zmax":'+ua.zmax.toString()+",":"")+(ua.hasM?'"mmax":'+ua.mmax.toString()+",":"")+'"spatialReference":'+Ba(ua.spatialReference)+"}":Ba(ua.toJSON(),(Cb,Db)=>Cb.key===Db.key?0:"spatialReference"===Cb.key?1:"spatialReference"===Db.key||Cb.key<Db.key?-1:Cb.key>Db.key?1:0);if(F(ua)){Oa=
[];for(var hb=0;hb<ua.length;hb++)Oa[hb]=ca(ua[hb]);return"["+Oa.join(",")+"]"}if(ua instanceof r){Oa=[];for(hb=0;hb<ua.length();hb++)Oa[hb]=ca(ua.get(hb));return"["+Oa.join(",")+"]"}return null!==ua&&"object"===typeof ua&&void 0!==ua.castToText?ua.castToText():w(ua)?"object, Function":""}function ca(ua){return null===ua?"null":B(ua)||C(ua)||y(ua)?JSON.stringify(ua):ua instanceof g||ua instanceof r||ua instanceof Array?da(ua):ua instanceof Date?JSON.stringify(R(ua,"")):null!==ua&&"object"===typeof ua&&
void 0!==ua.castToText?ua.castToText():"null"}function la(ua,Oa){return C(ua)?ua:null===ua||""===ua?0:K(ua)?NaN:B(ua)?ua?1:0:F(ua)||""===ua||void 0===ua?NaN:void 0!==Oa&&y(ua)?(Oa=t(Oa,"\u2030",""),Oa=t(Oa,"\u00a4",""),l.parse(ua,{pattern:Oa})):ua===Kb?0:Number(ua)}function ha(ua){return K(ua)?ua:y(ua)&&(ua=ea(ua))?ua.toJSDate():null}function S(ua){return K(ua)?d.DateTime.fromJSDate(ua):y(ua)?ea(ua):null}function ea(ua){const Oa=/ (\d\d)/;let hb=d.DateTime.fromISO(ua);return hb.isValid||Oa.test(ua)&&
(ua=ua.replace(Oa,"T$1"),hb=d.DateTime.fromISO(ua),hb.isValid)?hb:null}function ma(ua){return B(ua)?ua:y(ua)?(ua=ua.toLowerCase(),"true"===ua?!0:!1):C(ua)?0===ua||isNaN(ua)?!1:!0:!1}function sa(ua,Oa){if(f.isNone(ua))return null;if(null===ua.spatialReference||void 0===ua.spatialReference)ua.spatialReference=Oa;return ua}function ja(ua){if(null===ua)return null;if(ua instanceof b)return"NaN"===ua.x||null===ua.x||isNaN(ua.x)?null:ua;if(ua instanceof a){if(0===ua.rings.length)return null;for(const Oa of ua.rings)if(0<
Oa.length)return ua;return null}if(ua instanceof c){if(0===ua.paths.length)return null;for(const Oa of ua.paths)if(0<Oa.length)return ua;return null}return ua instanceof e?0===ua.points.length?null:ua:ua instanceof p?"NaN"===ua.xmin||null===ua.xmin||isNaN(ua.xmin)?null:ua:null}function wa(ua,Oa){if(!ua||!ua.domain)return Oa;let hb=null;if("string"===ua.field.type||"esriFieldTypeString"===ua.field.type)Oa=Y(Oa);else{if(null===Oa||void 0===Oa)return null;if(""===Oa)return Oa;Oa=la(Oa)}for(let Cb=0;Cb<
ua.domain.codedValues.length;Cb++){const Db=ua.domain.codedValues[Cb];Db.code===Oa&&(hb=Db)}return null===hb?Oa:hb.name}function Ja(ua,Oa){if(!ua||!ua.domain)return Oa;let hb=null;Oa=Y(Oa);for(let Cb=0;Cb<ua.domain.codedValues.length;Cb++){const Db=ua.domain.codedValues[Cb];Db.name===Oa&&(hb=Db)}return null===hb?Oa:hb.code}function va(ua,Oa,hb=null,Cb=null){if(!Oa||!Oa.fields)return null;let Db=null;for(let zc=0;zc<Oa.fields.length;zc++){const Zb=Oa.fields[zc];Zb.name.toLowerCase()===ua.toString().toLowerCase()&&
(Db=Zb)}if(null===Db)throw Error("Field not found");let ac,kc;null===Cb&&hb&&Oa.typeIdField&&(Cb=hb.hasField(Oa.typeIdField)?hb.field(Oa.typeIdField):null);null!==Cb&&void 0!==Cb&&Oa.types.some(function(zc){return zc.id===Cb?((ac=zc.domains&&zc.domains[Db.name])&&"inherited"===ac.type&&(ac=ra(Db.name,Oa),kc=!0),!0):!1});kc||ac||(ac=ra(ua,Oa));return{field:Db,domain:ac}}function ra(ua,Oa){let hb;Oa.fields.some(function(Cb){Cb.name.toLowerCase()===ua.toLowerCase()&&(hb=Cb.domain);return!!hb});return hb}
function Ba(ua,Oa){Oa||(Oa={});"function"===typeof Oa&&(Oa={cmp:Oa});const hb="boolean"===typeof Oa.cycles?Oa.cycles:!1,Cb=Oa.cmp&&function(ac){return function(kc){return function(zc,Zb){return ac({key:zc,value:kc[zc]},{key:Zb,value:kc[Zb]})}}}(Oa.cmp),Db=[];return function zc(kc){kc&&kc.toJSON&&"function"===typeof kc.toJSON&&(kc=kc.toJSON());if(void 0!==kc){if("number"===typeof kc)return isFinite(kc)?""+kc:"null";if("object"!==typeof kc)return JSON.stringify(kc);var Zb;if(Array.isArray(kc)){var Qc=
"[";for(Zb=0;Zb<kc.length;Zb++)Zb&&(Qc+=","),Qc+=zc(kc[Zb])||"null";return Qc+"]"}if(null===kc)return"null";if(Db.includes(kc)){if(hb)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var fc=Db.push(kc)-1,Pc=Object.keys(kc).sort(Cb&&Cb(kc));Qc="";for(Zb=0;Zb<Pc.length;Zb++){const jd=Pc[Zb],bd=zc(kc[jd]);bd&&(Qc&&(Qc+=","),Qc+=JSON.stringify(jd)+":"+bd)}Db.splice(fc,1);return"{"+Qc+"}"}}(ua)}function Ha(ua){if(null===ua)return null;const Oa=[];for(const hb of ua)hb&&
hb.arcadeDeclaredClass&&"esri.arcade.Feature"===hb.arcadeDeclaredClass?Oa.push(hb.geometry()):Oa.push(hb);return Oa}function ya(ua,Oa){if(Oa instanceof b)ua.push(Oa.hasZ?Oa.hasM?[Oa.x,Oa.y,Oa.z,Oa.m]:[Oa.x,Oa.y,Oa.z]:[Oa.x,Oa.y]);else throw Error("Invalid Argument");}function qa(ua,Oa){if(F(ua)||H(ua)){let hb=!1,Cb=!1,Db=[];if(F(ua)){for(const ac of ua)ya(Db,ac);0<Db.length&&(Oa=ua[0].spatialReference,hb=ua[0].hasZ,Cb=ua[0].hasM)}else if(ua instanceof z)Db=ua._elements,0<Db.length&&(hb=ua._hasZ,Cb=
ua._hasM,Oa=ua.get(0).spatialReference);else if(H(ua)){for(const ac of ua.toArray())ya(Db,ac);0<Db.length&&(Oa=ua.get(0).spatialReference,hb=!0===ua.get(0).hasZ,Cb=!0===ua.get(0).hasM)}else throw Error("Invalid Argument");if(0===Db.length)return null;!1===m.isClockwise(Db,Cb,hb)&&(Db=Db.slice(0).reverse());return new a({rings:[Db],spatialReference:Oa,hasZ:hb,hasM:Cb})}return ua}function oa(ua,Oa){if(F(ua)||H(ua)){let hb=!1,Cb=!1,Db=[];if(F(ua)){for(const ac of ua)ya(Db,ac);0<Db.length&&(Oa=ua[0].spatialReference,
hb=!0===ua[0].hasZ,Cb=!0===ua[0].hasM)}else if(ua instanceof z)Db=ua._elements,0<Db.length&&(hb=ua._hasZ,Cb=ua._hasM,Oa=ua.get(0).spatialReference);else if(H(ua)){for(const ac of ua.toArray())ya(Db,ac);0<Db.length&&(Oa=ua.get(0).spatialReference,hb=!0===ua.get(0).hasZ,Cb=!0===ua.get(0).hasM)}return 0===Db.length?null:new c({paths:[Db],spatialReference:Oa,hasZ:hb,hasM:Cb})}return ua}function Aa(ua,Oa){if(F(ua)||H(ua)){let hb=!1,Cb=!1,Db=[];if(F(ua)){for(const ac of ua)ya(Db,ac);0<Db.length&&(Oa=ua[0].spatialReference,
hb=!0===ua[0].hasZ,Cb=!0===ua[0].hasM)}else if(ua instanceof z)Db=ua._elements,0<Db.length&&(hb=ua._hasZ,Cb=ua._hasM,Oa=ua.get(0).spatialReference);else if(H(ua)){for(const ac of ua.toArray())ya(Db,ac);0<Db.length&&(Oa=ua.get(0).spatialReference,hb=!0===ua.get(0).hasZ,Cb=!0===ua.get(0).hasM)}return 0===Db.length?null:new e({points:Db,spatialReference:Oa,hasZ:hb,hasM:Cb})}return ua}function Ka(ua,Oa=!1){const hb=[];if(null===ua)return hb;if(!0===F(ua)){for(var Cb=0;Cb<ua.length;Cb++){var Db=Y(ua[Cb]);
""===Db&&!0!==Oa||hb.push(Db)}return hb}if(ua instanceof r){for(Cb=0;Cb<ua.length();Cb++)Db=Y(ua.get(Cb)),""===Db&&!0!==Oa||hb.push(Db);return hb}return A(ua)?(ua=Y(ua),""===ua&&!0!==Oa||hb.push(ua),hb):[]}function Wa(ua){zb++;return 0===zb%100?(zb=0,new Promise(Oa=>{setTimeout(()=>{Oa(ua)},0)})):ua}function Pa(ua,Oa,hb){switch(hb){case "\x26":return ua&Oa;case "|":return ua|Oa;case "^":return ua^Oa;case "\x3c\x3c":return ua<<Oa;case "\x3e\x3e":return ua>>Oa;case "\x3e\x3e\x3e":return ua>>>Oa}}function Ta(ua,
Oa=null){if(null!=ua){if(B(ua)||C(ua)||y(ua))return ua;if(ua instanceof g)return!0===(null==Oa?void 0:Oa.keepGeometryType)?ua:ua.toJSON();if(ua instanceof r)return ua.toArray().map(hb=>Ta(hb,Oa));if(ua instanceof Array)return ua.map(hb=>Ta(hb,Oa));if(ua instanceof Date)return ua;if(null!==ua&&"object"===typeof ua&&void 0!==ua.castAsJson)return ua.castAsJson(Oa)}return null}function eb(ua,Oa,hb,Cb,Db){return Na.apply(this,arguments)}function Na(){Na=n._asyncToGenerator(function*(ua,Oa,hb,Cb,Db){ua=
yield Sa(ua,Oa,hb);Db[Cb]=ua});return Na.apply(this,arguments)}function Sa(ua){return $a.apply(this,arguments)}function $a(){$a=n._asyncToGenerator(function*(ua,Oa=null,hb=null){ua instanceof r&&(ua=ua.toArray());if(null!=ua){if(A(ua)||ua instanceof g||ua instanceof Date)return Ta(ua,hb);if(ua instanceof Array){const Cb=[],Db=[];for(const ac of ua)null===ac||A(ac)||ac instanceof g||ac instanceof Date?Db.push(Ta(ac,hb)):(Db.push(null),Cb.push(eb(ac,Oa,hb,Db.length-1,Db)));0<Cb.length&&(yield Promise.all(Cb));
return Db}if(null!==ua&&"object"===typeof ua&&void 0!==ua.castAsJsonAsync)return ua.castAsJsonAsync(Oa,hb)}return null});return $a.apply(this,arguments)}function gb(ua,Oa,hb){const Cb=ua.fullSchema();return null!==Cb&&Cb.fields?va(Oa,Cb,ua,hb):null}function Za(ua){ua=ua.fullSchema();return null!==ua&&ua.fields?ua.typeIdField?{subtypeField:ua.typeIdField,subtypes:ua.types?ua.types.map(Oa=>({name:Oa.name,code:Oa.id})):[]}:null:null}function ab(ua,Oa,hb,Cb){const Db=ua.fullSchema();if(null===Db||!Db.fields)return null;
Cb=va(Oa,Db,ua,Cb);if(void 0===hb)try{hb=ua.field(Oa)}catch(ac){return null}return wa(Cb,hb)}function ub(ua,Oa,hb,Cb){const Db=ua.fullSchema();if(null===Db||!Db.fields)return null;if(void 0===hb){try{hb=ua.field(Oa)}catch(ac){return null}return hb}ua=va(Oa,Db,ua,Cb);return Ja(ua,hb)}function yb(ua){ua=ua.fullSchema();if(null===ua||!ua.fields)return null;const Oa=[];for(const hb of ua.fields)Oa.push(q.esriFieldToJson(hb));return{objectIdField:ua.objectIdField,globalIdField:ua.globalIdField,geometryType:void 0===
q.layerGeometryEsriRestConstants[ua.geometryType]?"":q.layerGeometryEsriRestConstants[ua.geometryType],fields:Oa}}let tb=function(ua){this.value=ua},nb=function(ua){this.value=ua},Nb=function(ua){this.fn=ua},Tb=function(ua,Oa){this.paramCount=Oa;this.fn=ua};const $b=Nb,Mb=Tb,Kb={type:"VOID"},kb={type:"BREAK"},rb={type:"CONTINUE"};let zb=0;const xb=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:tb,ImplicitResultE:nb,NativeFunctionE:Nb,SizzleFunctionE:Tb,NativeFunction:$b,ImplicitResult:nb,
ReturnResult:tb,SizzleFunction:Mb,voidOperation:Kb,breakResult:kb,continueResult:rb,multiReplace:t,isFunctionParameter:w,isSimpleType:A,defaultUndefined:x,isString:y,isBoolean:B,isNumber:C,isInteger:D,isArray:F,isFeature:E,isFeatureSet:G,isFeatureSetCollection:O,isImmutableArray:H,isDate:K,pcCheck:P,absRound:L,generateUUID:M,formatNumber:J,formatDate:R,standardiseDateFormat:X,greaterThanLessThan:V,equalityTest:Q,toString:Y,toNumberArray:fa,toStringExplicit:da,toNumber:la,toDate:ha,toDateTime:S,toBoolean:ma,
fixSpatialReference:sa,fixNullGeometry:ja,getDomainValue:wa,getDomainCode:Ja,getDomain:va,stableStringify:Ba,autoCastFeatureToGeometry:Ha,autoCastArrayOfPointsToPolygon:qa,autoCastArrayOfPointsToPolyline:oa,autoCastArrayOfPointsToMultiPoint:Aa,toStringArray:Ka,tick:Wa,binaryOperator:Pa,castAsJson:Ta,castAsJsonAsync:Sa,featureFullDomain:gb,featureSubtypes:Za,featureDomainValueLookup:ab,featureDomainCodeLookup:ub,featureSchema:yb},Symbol.toStringTag,{value:"Module"}));u.ImplicitResult=nb;u.ImplicitResultE=
nb;u.NativeFunction=$b;u.NativeFunctionE=Nb;u.ReturnResult=tb;u.ReturnResultE=tb;u.SizzleFunction=Mb;u.SizzleFunctionE=Tb;u.absRound=L;u.autoCastArrayOfPointsToMultiPoint=Aa;u.autoCastArrayOfPointsToPolygon=qa;u.autoCastArrayOfPointsToPolyline=oa;u.autoCastFeatureToGeometry=Ha;u.binaryOperator=Pa;u.breakResult=kb;u.castAsJson=Ta;u.castAsJsonAsync=Sa;u.continueResult=rb;u.defaultUndefined=x;u.equalityTest=Q;u.featureDomainCodeLookup=ub;u.featureDomainValueLookup=ab;u.featureFullDomain=gb;u.featureSchema=
yb;u.featureSubtypes=Za;u.fixNullGeometry=ja;u.fixSpatialReference=sa;u.formatDate=R;u.formatNumber=J;u.generateUUID=M;u.getDomain=va;u.getDomainCode=Ja;u.getDomainValue=wa;u.greaterThanLessThan=V;u.isArray=F;u.isBoolean=B;u.isDate=K;u.isFeature=E;u.isFeatureSet=G;u.isFeatureSetCollection=O;u.isFunctionParameter=w;u.isImmutableArray=H;u.isInteger=D;u.isNumber=C;u.isSimpleType=A;u.isString=y;u.lc=xb;u.multiReplace=t;u.pcCheck=P;u.stableStringify=Ba;u.standardiseDateFormat=X;u.tick=Wa;u.toBoolean=ma;
u.toDate=ha;u.toDateTime=S;u.toNumber=la;u.toNumberArray=fa;u.toString=Y;u.toStringArray=Ka;u.toStringExplicit=da;u.voidOperation=Kb})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(u,n){this.context=this.definition=null;this.definition=u;this.context=n}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function u(h=[]){this._elements=h}var n=u.prototype;n.length=function(){return this._elements.length};n.get=function(h){return this._elements[h]};
n.toArray=function(){const h=[];for(let r=0;r<this.length();r++)h.push(this.get(r));return h};return u}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(u,n,h){return function(r){function v(p,g,e,b,a){p=r.call(this,p)||this;p._lazyPath=[];p._hasZ=!1;p._hasM=!1;p._hasZ=e;p._hasM=b;p._spRef=g;p._cacheId=a;return p}u._inheritsLoose(v,r);var z=v.prototype;z.get=function(p){if(void 0===this._lazyPath[p]){const g=
this._elements[p];if(void 0===g)return;this._lazyPath[p]=new h(g,this._spRef,this._hasZ,this._hasM,this._cacheId,p)}return this._lazyPath[p]};z.equalityTest=function(p){return p===this?!0:null===p||!1===p instanceof v?!1:p.getUniqueHash()===this.getUniqueHash()};z.getUniqueHash=function(){return this._cacheId.toString()};return v}(n)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(u,n,h){return function(r){function v(p,
g,e,b,a,c){p=r.call(this,p)||this;p._lazyPt=[];p._hasZ=!1;p._hasM=!1;p._spRef=g;p._hasZ=e;p._hasM=b;p._cacheId=a;p._partId=c;return p}u._inheritsLoose(v,r);var z=v.prototype;z.get=function(p){if(void 0===this._lazyPt[p]){const g=this._elements[p];if(void 0===g)return;const e=this._hasZ,b=this._hasM;let a=null;a=e&&!b?new h(g[0],g[1],g[2],void 0,this._spRef):b&&!e?new h(g[0],g[1],void 0,g[2],this._spRef):e&&b?new h(g[0],g[1],g[2],g[3],this._spRef):new h(g[0],g[1],this._spRef);a.cache._arcadeCacheId=
this._cacheId.toString()+"-"+this._partId.toString()+"-"+p.toString();this._lazyPt[p]=a}return this._lazyPt[p]};z.equalityTest=function(p){return p===this?!0:null===p||!1===p instanceof v?!1:p.getUniqueHash()===this.getUniqueHash()};z.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return v}(n)})},"esri/chunks/datetime":function(){define(["exports"],function(u){function n(Z){return"undefined"===typeof Z}function h(Z){return"number"===typeof Z}function r(Z){return"number"===
typeof Z&&0===Z%1}function v(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(Z){return!1}}function z(Z,na,Ea){if(0!==Z.length)return Z.reduce((Qa,Ua)=>{Ua=[na(Ua),Ua];return Qa?Ea(Qa[0],Ua[0])===Qa[0]?Qa:Ua:Ua},null)[1]}function p(Z,na){return na.reduce((Ea,Qa)=>{Ea[Qa]=Z[Qa];return Ea},{})}function g(Z,na){return Object.prototype.hasOwnProperty.call(Z,na)}function e(Z,na,Ea){return r(Z)&&Z>=na&&Z<=Ea}function b(Z,na=2){return 0>Z?"-"+(""+-Z).padStart(na,"0"):(""+Z).padStart(na,
"0")}function a(Z){if(!n(Z)&&null!==Z&&""!==Z)return parseInt(Z,10)}function c(Z){if(!n(Z)&&null!==Z&&""!==Z)return parseFloat(Z)}function d(Z){if(!n(Z)&&null!==Z&&""!==Z)return Z=1E3*parseFloat("0."+Z),Math.floor(Z)}function f(Z,na,Ea=!1){na=10**na;return(Ea?Math.trunc:Math.round)(Z*na)/na}function l(Z){return 0===Z%4&&(0!==Z%100||0===Z%400)}function m(Z,na){var Ea=na-1;Ea=Ea-12*Math.floor(Ea/12)+1;return 2===Ea?l(Z+(na-Ea)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][Ea-1]}function k(Z){let na=
Date.UTC(Z.year,Z.month-1,Z.day,Z.hour,Z.minute,Z.second,Z.millisecond);100>Z.year&&0<=Z.year&&(na=new Date(na),na.setUTCFullYear(na.getUTCFullYear()-1900));return+na}function q(Z){var na=Z-1;na=(na+Math.floor(na/4)-Math.floor(na/100)+Math.floor(na/400))%7;return 4===(Z+Math.floor(Z/4)-Math.floor(Z/100)+Math.floor(Z/400))%7||3===na?53:52}function t(Z){return 99<Z?Z:60<Z?1900+Z:2E3+Z}function w(Z,na,Ea,Qa=null){Z=new Date(Z);const Ua={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",
minute:"2-digit"};Qa&&(Ua.timeZone=Qa);return(na=(new Intl.DateTimeFormat(Ea,{timeZoneName:na,...Ua})).formatToParts(Z).find(cb=>"timezonename"===cb.type.toLowerCase()))?na.value:null}function A(Z,na){Z=parseInt(Z,10);Number.isNaN(Z)&&(Z=0);na=parseInt(na,10)||0;na=0>Z||Object.is(Z,-0)?-na:na;return 60*Z+na}function x(Z){const na=Number(Z);if("boolean"===typeof Z||""===Z||Number.isNaN(na))throw new lb(`Invalid unit value ${Z}`);return na}function y(Z,na){const Ea={};for(const Qa in Z)if(g(Z,Qa)){const Ua=
Z[Qa];void 0!==Ua&&null!==Ua&&(Ea[na(Qa)]=x(Ua))}return Ea}function B(Z,na){const Ea=Math.trunc(Math.abs(Z/60)),Qa=Math.trunc(Math.abs(Z%60));Z=0<=Z?"+":"-";switch(na){case "short":return`${Z}${b(Ea,2)}:${b(Qa,2)}`;case "narrow":return`${Z}${Ea}${0<Qa?`:${Qa}`:""}`;case "techie":return`${Z}${b(Ea,2)}${b(Qa,2)}`;default:throw new RangeError(`Value format ${na} is out of range for property format`);}}function C(Z){return p(Z,["hour","minute","second","millisecond"])}function D(Z){switch(Z){case "narrow":return[...oe];
case "short":return[...Fd];case "long":return[...Zd];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function F(Z){switch(Z){case "narrow":return[...Od];case "short":return[...pe];case "long":return[...Bd];case "numeric":return"1234567".split("");default:return null}}function E(Z){switch(Z){case "narrow":return[...ed];case "short":return[...Rd];case "long":return[...Qd];default:return null}}function G(Z,
na,Ea="always",Qa=!1){const Ua={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var cb=-1===["hours","minutes","seconds"].indexOf(Z);if("auto"===Ea&&cb)switch(Ea="days"===Z,na){case 1:return Ea?"tomorrow":`next ${Ua[Z][0]}`;case -1:return Ea?"yesterday":`last ${Ua[Z][0]}`;case 0:return Ea?"today":`this ${Ua[Z][0]}`}Ea=Object.is(na,-0)||0>na;na=Math.abs(na);
cb=1===na;const ob=Ua[Z];Z=Qa?cb?ob[1]:ob[2]||ob[1]:cb?Ua[Z][0]:Z;return Ea?`${na} ${Z} ago`:`in ${na} ${Z}`}function O(Z,na){let Ea="";for(const Qa of Z)Ea=Qa.literal?Ea+Qa.val:Ea+na(Qa.val);return Ea}function H(Z,na){if(n(Z)||null===Z)return na;if(Z instanceof Tc)return Z;if("string"===typeof Z){const Ea=Z.toLowerCase();return"local"===Ea||"system"===Ea?na:"utc"===Ea||"gmt"===Ea?Sc.utcInstance:Sc.parseSpecifier(Ea)||Dc.create(Z)}return h(Z)?Sc.instance(Z):"object"===typeof Z&&Z.offset&&"number"===
typeof Z.offset?Z:new ke(Z)}function K(Z,na={}){const Ea=JSON.stringify([Z,na]);let Qa=Kd[Ea];Qa||(Qa=new Intl.ListFormat(Z,na),Kd[Ea]=Qa);return Qa}function P(Z,na={}){const Ea=JSON.stringify([Z,na]);let Qa=ud[Ea];Qa||(Qa=new Intl.DateTimeFormat(Z,na),ud[Ea]=Qa);return Qa}function L(Z,na={}){const Ea=JSON.stringify([Z,na]);let Qa=gd[Ea];Qa||(Qa=new Intl.NumberFormat(Z,na),gd[Ea]=Qa);return Qa}function M(Z,na={}){const {base:Ea,...Qa}=na,Ua=JSON.stringify([Z,Qa]);let cb=Ld[Ua];cb||(cb=new Intl.RelativeTimeFormat(Z,
na),Ld[Ua]=cb);return cb}function J(Z){const na=[];for(let Ea=1;12>=Ea;Ea++){const Qa=gc.utc(2016,Ea,1);na.push(Z(Qa))}return na}function R(Z){const na=[];for(let Ea=1;7>=Ea;Ea++){const Qa=gc.utc(2016,11,13+Ea);na.push(Z(Qa))}return na}function X(Z,na,Ea,Qa,Ua){Z=Z.listingMode(Ea);return"error"===Z?null:"en"===Z?Qa(na):Ua(na)}function U(...Z){Z=Z.reduce((na,Ea)=>na+Ea.source,"");return RegExp(`^${Z}$`)}function V(...Z){return na=>Z.reduce(([Ea,Qa,Ua],cb)=>{const [ob,Ab,Sb]=cb(na,Ua);return[{...Ea,
...ob},Ab||Qa,Sb]},[{},null,1]).slice(0,2)}function Q(Z,...na){if(null==Z)return[null,null];for(const [Ea,Qa]of na)if(na=Ea.exec(Z))return Qa(na);return[null,null]}function Y(...Z){return(na,Ea)=>{const Qa={};let Ua;for(Ua=0;Ua<Z.length;Ua++)Qa[Z[Ua]]=a(na[Ea+Ua]);return[Qa,null,Ea+Ua]}}function fa(Z,na,Ea){Z=Z[na];return n(Z)?Ea:a(Z)}function da(Z,na){return[{hours:fa(Z,na,0),minutes:fa(Z,na+1,0),seconds:fa(Z,na+2,0),milliseconds:d(Z[na+3])},null,na+4]}function ca(Z,na){const Ea=!Z[na]&&!Z[na+1];
Z=A(Z[na+1],Z[na+2]);return[{},Ea?null:Sc.instance(Z),na+3]}function la(Z,na){return[{},Z[na]?Dc.create(Z[na]):null,na+1]}function ha(Z){const [na,Ea,Qa,Ua,cb,ob,Ab,Sb,Hc]=Z,Yb="-"===na[0];Z=Sb&&"-"===Sb[0];const bc=(xc,dd=!1)=>void 0!==xc&&(dd||xc&&Yb)?-xc:xc;return[{years:bc(c(Ea)),months:bc(c(Qa)),weeks:bc(c(Ua)),days:bc(c(cb)),hours:bc(c(ob)),minutes:bc(c(Ab)),seconds:bc(c(Sb),"-0"===Sb),milliseconds:bc(d(Hc),Z)}]}function S(Z,na,Ea,Qa,Ua,cb,ob){na={year:2===na.length?t(a(na)):a(na),month:Fd.indexOf(Ea)+
1,day:a(Qa),hour:a(Ua),minute:a(cb)};ob&&(na.second=a(ob));Z&&(na.weekday=3<Z.length?Bd.indexOf(Z)+1:pe.indexOf(Z)+1);return na}function ea(Z){const [,na,Ea,Qa,Ua,cb,ob,Ab,Sb,Hc,Yb,bc]=Z;Z=S(na,Ua,Qa,Ea,cb,ob,Ab);let xc;xc=Sb?re[Sb]:Hc?0:A(Yb,bc);return[Z,new Sc(xc)]}function ma(Z){const [,na,Ea,Qa,Ua,cb,ob,Ab]=Z;return[S(na,Ua,Qa,Ea,cb,ob,Ab),Sc.utcInstance]}function sa(Z){const [,na,Ea,Qa,Ua,cb,ob,Ab]=Z;return[S(na,Ab,Ea,Qa,Ua,cb,ob),Sc.utcInstance]}function ja(Z,na,Ea=!1){Z={values:Ea?na.values:
{...Z.values,...na.values||{}},loc:Z.loc.clone(na.loc),conversionAccuracy:na.conversionAccuracy||Z.conversionAccuracy};return new Qb(Z)}function wa(Z,na,Ea,Qa,Ua){Z=Z[Ua][Ea];var cb=na[Ea]/Z;cb=Math.sign(cb)!==Math.sign(Qa[Ua])&&0!==Qa[Ua]&&1>=Math.abs(cb)?0>cb?Math.floor(cb):Math.ceil(cb):Math.trunc(cb);Qa[Ua]+=cb;na[Ea]-=cb*Z}function Ja(Z,na){ne.reduce((Ea,Qa)=>{if(n(na[Qa]))return Ea;Ea&&wa(Z,na,Ea,na,Qa);return Qa},null)}function va(Z,na){Z=na.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-
Z.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Qb.fromMillis(Z).as("days"))}function ra(Z,na,Ea){var Qa=[["years",(Ab,Sb)=>Sb.year-Ab.year],["quarters",(Ab,Sb)=>Sb.quarter-Ab.quarter],["months",(Ab,Sb)=>Sb.month-Ab.month+12*(Sb.year-Ab.year)],["weeks",(Ab,Sb)=>{Ab=va(Ab,Sb);return(Ab-Ab%7)/7}],["days",va]];const Ua={};let cb,ob;for(const [Ab,Sb]of Qa)0<=Ea.indexOf(Ab)&&(cb=Ab,Qa=Sb(Z,na),ob=Z.plus({[Ab]:Qa}),ob>na?(Z=Z.plus({[Ab]:Qa-1}),--Qa):Z=ob,Ua[Ab]=Qa);return[Z,Ua,
ob,cb]}function Ba(Z,na,Ea,Qa){let [Ua,cb,ob,Ab]=ra(Z,na,Ea);Z=na-Ua;Ea=Ea.filter(Sb=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Sb));0===Ea.length&&(ob<na&&(ob=Ua.plus({[Ab]:1})),ob!==Ua&&(cb[Ab]=(cb[Ab]||0)+Z/(ob-Ua)));na=Qb.fromObject(cb,Qa);return 0<Ea.length?Qb.fromMillis(Z,Qa).shiftTo(...Ea).plus(na):na}function Ha({numberingSystem:Z},na=""){return new RegExp(`${ka[Z||"latn"]}${na}`)}function ya(Z,na=Ea=>Ea){return{regex:Z,deser:([Ea])=>{{let Qa=parseInt(Ea,10);if(isNaN(Qa)){Qa=
"";for(let Ua=0;Ua<Ea.length;Ua++){const cb=Ea.charCodeAt(Ua);if(-1!==Ea[Ua].search(ka.hanidec))Qa+=La.indexOf(Ea[Ua]);else for(const ob in za){const [Ab,Sb]=za[ob];cb>=Ab&&cb<=Sb&&(Qa+=cb-Ab)}}Ea=parseInt(Qa,10)}else Ea=Qa}return na(Ea)}}}function qa(Z){return Z.replace(/\./g,"\\.?").replace(Eb,mb)}function oa(Z,na){return null===Z?null:{regex:RegExp(Z.map(qa).join("|")),deser:([Ea])=>Z.findIndex(Qa=>Ea.replace(/\./g,"").replace(Eb," ").toLowerCase()===Qa.replace(/\./g,"").replace(Eb," ").toLowerCase())+
na}}function Aa(Z,na){return{regex:Z,deser:([,Ea,Qa])=>A(Ea,Qa),groups:na}}function Ka(Z){return{regex:Z,deser:([na])=>na}}function Wa(Z,na){const Ea=Ha(na),Qa=Ha(na,"{2}"),Ua=Ha(na,"{3}"),cb=Ha(na,"{4}"),ob=Ha(na,"{6}"),Ab=Ha(na,"{1,2}"),Sb=Ha(na,"{1,3}"),Hc=Ha(na,"{1,6}"),Yb=Ha(na,"{1,9}"),bc=Ha(na,"{2,4}"),xc=Ha(na,"{4,6}"),dd=nd=>({regex:RegExp(nd.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Ue])=>Ue,literal:!0}),ge=(nd=>{if(Z.literal)return dd(nd);switch(nd.val){case "G":return oa(na.eras("short",
!1),0);case "GG":return oa(na.eras("long",!1),0);case "y":return ya(Hc);case "yy":return ya(bc,t);case "yyyy":return ya(cb);case "yyyyy":return ya(xc);case "yyyyyy":return ya(ob);case "M":return ya(Ab);case "MM":return ya(Qa);case "MMM":return oa(na.months("short",!0,!1),1);case "MMMM":return oa(na.months("long",!0,!1),1);case "L":return ya(Ab);case "LL":return ya(Qa);case "LLL":return oa(na.months("short",!1,!1),1);case "LLLL":return oa(na.months("long",!1,!1),1);case "d":return ya(Ab);case "dd":return ya(Qa);
case "o":return ya(Sb);case "ooo":return ya(Ua);case "HH":return ya(Qa);case "H":return ya(Ab);case "hh":return ya(Qa);case "h":return ya(Ab);case "mm":return ya(Qa);case "m":return ya(Ab);case "q":return ya(Ab);case "qq":return ya(Qa);case "s":return ya(Ab);case "ss":return ya(Qa);case "S":return ya(Sb);case "SSS":return ya(Ua);case "u":return Ka(Yb);case "uu":return Ka(Ab);case "uuu":return ya(Ea);case "a":return oa(na.meridiems(),0);case "kkkk":return ya(cb);case "kk":return ya(bc,t);case "W":return ya(Ab);
case "WW":return ya(Qa);case "E":case "c":return ya(Ea);case "EEE":return oa(na.weekdays("short",!1,!1),1);case "EEEE":return oa(na.weekdays("long",!1,!1),1);case "ccc":return oa(na.weekdays("short",!0,!1),1);case "cccc":return oa(na.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Aa(new RegExp(`([+-]${Ab.source})(?::(${Qa.source}))?`),2);case "ZZZ":return Aa(new RegExp(`([+-]${Ab.source})(${Qa.source})?`),2);case "z":return Ka(/[a-z_+-/]{1,256}?/i);default:return dd(nd)}})(Z)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};
ge.token=Z;return ge}function Pa(Z){return[`^${Z.map(na=>na.regex).reduce((na,Ea)=>`${na}(${Ea.source})`,"")}$`,Z]}function Ta(Z,na,Ea){if(Z=Z.match(na)){na={};let Qa=1;for(const Ua in Ea)if(g(Ea,Ua)){const cb=Ea[Ua],ob=cb.groups?cb.groups+1:1;!cb.literal&&cb.token&&(na[cb.token.val[0]]=cb.deser(Z.slice(Qa,Qa+ob)));Qa+=ob}return[Z,na]}return[Z,{}]}function eb(Z){const na=Ua=>{switch(Ua){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";
case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let Ea=null,Qa;n(Z.z)||(Ea=Dc.create(Z.z));n(Z.Z)||(Ea||(Ea=new Sc(Z.Z)),Qa=Z.Z);n(Z.q)||(Z.M=3*(Z.q-1)+1);n(Z.h)||(12>Z.h&&1===Z.a?Z.h+=12:12===Z.h&&0===Z.a&&(Z.h=0));0===Z.G&&Z.y&&(Z.y=-Z.y);n(Z.u)||(Z.S=d(Z.u));return[Object.keys(Z).reduce((Ua,cb)=>{const ob=na(cb);ob&&(Ua[ob]=Z[cb]);
return Ua},{}),Ea,Qa]}function Na(){dc||(dc=gc.fromMillis(1555555555555));return dc}function Sa(Z,na){if(Z.literal)return Z;const Ea=Ic.macroTokenToFormatOpts(Z.val);if(!Ea)return Z;na=Ic.create(na,Ea).formatDateTimeParts(Na()).map(Qa=>{{const {type:cb,value:ob}=Qa;if("literal"===cb)Qa={literal:!0,val:ob};else{Qa=Ea[cb];var Ua=wb[cb];"object"===typeof Ua&&(Ua=Ua[Qa]);Qa=Ua?{literal:!1,val:Ua}:void 0}}return Qa});return na.includes(void 0)?Z:na}function $a(Z,na){return Array.prototype.concat(...Z.map(Ea=>
Sa(Ea,na)))}function gb(Z,na,Ea){Ea=$a(Ic.parseFormat(Ea),Z);var Qa=Ea.map(cb=>Wa(cb,Z));const Ua=Qa.find(cb=>cb.invalidReason);if(Ua)return{input:na,tokens:Ea,invalidReason:Ua.invalidReason};{const [cb,ob]=Pa(Qa);Qa=RegExp(cb,"i");const [Ab,Sb]=Ta(na,Qa,ob),[Hc,Yb,bc]=Sb?eb(Sb):[null,null,void 0];if(g(Sb,"a")&&g(Sb,"H"))throw new Va("Can't include meridiem when specifying 24-hour format");return{input:na,tokens:Ea,regex:Qa,rawMatches:Ab,matches:Sb,result:Hc,zone:Yb,specificOffset:bc}}}function Za(Z,
na){return new wc("unit out of range",`you specified ${na} (of type ${typeof na}) as a ${Z}, which is invalid`)}function ab(Z,na,Ea){na=new Date(Date.UTC(Z,na-1,Ea));100>Z&&0<=Z&&na.setUTCFullYear(na.getUTCFullYear()-1900);Z=na.getUTCDay();return 0===Z?7:Z}function ub(Z,na){Z=l(Z)?oc:uc;const Ea=Z.findIndex(Qa=>Qa<na);return{month:Ea+1,day:na-Z[Ea]}}function yb(Z){const {year:na,month:Ea,day:Qa}=Z;var Ua=Qa+(l(na)?oc:uc)[Ea-1];const cb=ab(na,Ea,Qa);Ua=Math.floor((Ua-cb+10)/7);let ob;1>Ua?(ob=na-1,
Ua=q(ob)):Ua>q(na)?(ob=na+1,Ua=1):ob=na;return{weekYear:ob,weekNumber:Ua,weekday:cb,...C(Z)}}function tb(Z){const {weekYear:na,weekNumber:Ea,weekday:Qa}=Z;var Ua=ab(na,1,4),cb=l(na)?366:365;Ua=7*Ea+Qa-Ua-3;1>Ua?(cb=na-1,Ua+=l(cb)?366:365):Ua>cb?(cb=na+1,Ua-=l(na)?366:365):cb=na;const {month:ob,day:Ab}=ub(cb,Ua);return{year:cb,month:ob,day:Ab,...C(Z)}}function nb(Z){const {year:na,month:Ea,day:Qa}=Z;var Ua=Qa+(l(na)?oc:uc)[Ea-1];return{year:na,ordinal:Ua,...C(Z)}}function Nb(Z){const {year:na,ordinal:Ea}=
Z,{month:Qa,day:Ua}=ub(na,Ea);return{year:na,month:Qa,day:Ua,...C(Z)}}function Tb(Z){const na=r(Z.year),Ea=e(Z.month,1,12),Qa=e(Z.day,1,m(Z.year,Z.month));return na?Ea?Qa?!1:Za("day",Z.day):Za("month",Z.month):Za("year",Z.year)}function $b(Z){const {hour:na,minute:Ea,second:Qa,millisecond:Ua}=Z;Z=e(na,0,23)||24===na&&0===Ea&&0===Qa&&0===Ua;const cb=e(Ea,0,59),ob=e(Qa,0,59),Ab=e(Ua,0,999);return Z?cb?ob?Ab?!1:Za("millisecond",Ua):Za("second",Qa):Za("minute",Ea):Za("hour",na)}function Mb(Z){return new wc("unsupported zone",
`the zone "${Z.name}" is not supported`)}function Kb(Z){null===Z.weekData&&(Z.weekData=yb(Z.c));return Z.weekData}function kb(Z,na){Z={ts:Z.ts,zone:Z.zone,c:Z.c,o:Z.o,loc:Z.loc,invalid:Z.invalid};return new gc({...Z,...na,old:Z})}function rb(Z,na,Ea){let Qa=Z-6E4*na;const Ua=Ea.offset(Qa);if(na===Ua)return[Qa,na];Qa-=6E4*(Ua-na);na=Ea.offset(Qa);return Ua===na?[Qa,Ua]:[Z-6E4*Math.min(Ua,na),Math.max(Ua,na)]}function zb(Z,na){Z=new Date(Z+6E4*na);return{year:Z.getUTCFullYear(),month:Z.getUTCMonth()+
1,day:Z.getUTCDate(),hour:Z.getUTCHours(),minute:Z.getUTCMinutes(),second:Z.getUTCSeconds(),millisecond:Z.getUTCMilliseconds()}}function xb(Z,na,Ea){return rb(k(Z),na,Ea)}function ua(Z,na){const Ea=Z.o;var Qa=Z.c.year+Math.trunc(na.years);const Ua=Z.c.month+Math.trunc(na.months)+3*Math.trunc(na.quarters);Qa={...Z.c,year:Qa,month:Ua,day:Math.min(Z.c.day,m(Qa,Ua))+Math.trunc(na.days)+7*Math.trunc(na.weeks)};na=Qb.fromObject({years:na.years-Math.trunc(na.years),quarters:na.quarters-Math.trunc(na.quarters),
months:na.months-Math.trunc(na.months),weeks:na.weeks-Math.trunc(na.weeks),days:na.days-Math.trunc(na.days),hours:na.hours,minutes:na.minutes,seconds:na.seconds,milliseconds:na.milliseconds}).as("milliseconds");Qa=k(Qa);let [cb,ob]=rb(Qa,Ea,Z.zone);0!==na&&(cb+=na,ob=Z.zone.offset(cb));return{ts:cb,o:ob}}function Oa(Z,na,Ea,Qa,Ua,cb){const {setZone:ob,zone:Ab}=Ea;return Z&&0!==Object.keys(Z).length?(Z=gc.fromObject(Z,{...Ea,zone:na||Ab,specificOffset:cb}),ob?Z:Z.setZone(Ab)):gc.invalid(new wc("unparsable",
`the input "${Ua}" can't be parsed as ${Qa}`))}function hb(Z,na,Ea=!0){return Z.isValid?Ic.create(Ac.create("en-US"),{allowZ:Ea,forceSimple:!0}).formatDateTimeFromString(Z,na):null}function Cb(Z,na){const Ea=9999<Z.c.year||0>Z.c.year;let Qa="";Ea&&0<=Z.c.year&&(Qa+="+");Qa+=b(Z.c.year,Ea?6:4);na?(Qa=Qa+"-"+b(Z.c.month),Qa=Qa+"-"+b(Z.c.day)):(Qa+=b(Z.c.month),Qa+=b(Z.c.day));return Qa}function Db(Z,na,Ea,Qa,Ua,cb){let ob=b(Z.c.hour);na?(ob=ob+":"+b(Z.c.minute),0===Z.c.second&&Ea||(ob+=":")):ob+=b(Z.c.minute);
0===Z.c.second&&Ea||(ob+=b(Z.c.second),0===Z.c.millisecond&&Qa||(ob=ob+"."+b(Z.c.millisecond,3)));Ua&&(Z.isOffsetFixed&&0===Z.offset&&!cb?ob+="Z":0>Z.o?(ob=ob+"-"+b(Math.trunc(-Z.o/60)),ob=ob+":"+b(Math.trunc(-Z.o%60))):(ob=ob+"+"+b(Math.trunc(Z.o/60)),ob=ob+":"+b(Math.trunc(Z.o%60))));cb&&(ob+="["+Z.zone.ianaName+"]");return ob}function ac(Z){const na={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",
quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[Z.toLowerCase()];if(!na)throw new ib(Z);return na}function kc(Z,na){const Ea=H(na.zone,Mc.defaultZone);na=Ac.fromObject(na);const Qa=Mc.now();var Ua;if(n(Z.year))Z=Qa;else{for(const cb of Ne)n(Z[cb])&&(Z[cb]=kd[cb]);if(Ua=Tb(Z)||
$b(Z))return gc.invalid(Ua);Ua=Ea.offset(Qa);[Z,Ua]=xb(Z,Ua,Ea)}return new gc({ts:Z,zone:Ea,loc:na,o:Ua})}function zc(Z,na,Ea){const Qa=n(Ea.round)?!0:Ea.round,Ua=(ob,Ab)=>{ob=f(ob,Qa||Ea.calendary?0:2,!0);return na.loc.clone(Ea).relFormatter(Ea).format(ob,Ab)},cb=ob=>Ea.calendary?na.hasSame(Z,ob)?0:na.startOf(ob).diff(Z.startOf(ob),ob).get(ob):na.diff(Z,ob).get(ob);if(Ea.unit)return Ua(cb(Ea.unit),Ea.unit);for(const ob of Ea.units){const Ab=cb(ob);if(1<=Math.abs(Ab))return Ua(Ab,ob)}return Ua(Z>
na?-0:0,Ea.units[Ea.units.length-1])}function Zb(Z){let na={};0<Z.length&&"object"===typeof Z[Z.length-1]?(na=Z[Z.length-1],Z=Array.from(Z).slice(0,Z.length-1)):Z=Array.from(Z);return[na,Z]}function Qc(Z){if(gc.isDateTime(Z))return Z;if(Z&&Z.valueOf&&h(Z.valueOf()))return gc.fromJSDate(Z);if(Z&&"object"===typeof Z)return gc.fromObject(Z);throw new lb(`Unknown datetime argument: ${Z}, of type ${typeof Z}`);}class fc extends Error{}class Pc extends fc{constructor(Z){super(`Invalid DateTime: ${Z.toMessage()}`)}}
class jd extends fc{constructor(Z){super(`Invalid Interval: ${Z.toMessage()}`)}}class bd extends fc{constructor(Z){super(`Invalid Duration: ${Z.toMessage()}`)}}class Va extends fc{}class ib extends fc{constructor(Z){super(`Invalid unit ${Z}`)}}class lb extends fc{}class pb extends fc{constructor(){super("Zone is an abstract class")}}const Jb={year:"numeric",month:"numeric",day:"numeric"},Ub={year:"numeric",month:"short",day:"numeric"},nc={year:"numeric",month:"short",day:"numeric",weekday:"short"},
rc={year:"numeric",month:"long",day:"numeric"},Rb={year:"numeric",month:"long",day:"numeric",weekday:"long"},pc={hour:"numeric",minute:"numeric"},sc={hour:"numeric",minute:"numeric",second:"numeric"},Gc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Rc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},tc={hour:"numeric",minute:"numeric",hourCycle:"h23"},$c={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},Id={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},rd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},Ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Wc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},Vd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
Wd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Nd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Ec={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Xd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Yd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"},cd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Zd="January February March April May June July August September October November December".split(" "),Fd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),oe="JFMAMJJASOND".split(""),Bd="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),pe="Mon Tue Wed Thu Fri Sat Sun".split(" "),Od="MTWTFSS".split(""),Gd=["AM","PM"],Qd=["Before Christ",
"Anno Domini"],Rd=["BC","AD"],ed=["B","A"],ld={D:Jb,DD:Ub,DDD:rc,DDDD:Rb,t:pc,tt:sc,ttt:Gc,tttt:Rc,T:tc,TT:$c,TTT:qd,TTTT:Id,f:rd,ff:Wc,fff:Nd,ffff:Xd,F:Ud,FF:Vd,FFF:Ec,FFFF:Yd};class Ic{static create(Z,na={}){return new Ic(Z,na)}static parseFormat(Z){let na=null,Ea="",Qa=!1;const Ua=[];for(let cb=0;cb<Z.length;cb++){const ob=Z.charAt(cb);"'"===ob?(0<Ea.length&&Ua.push({literal:Qa,val:Ea}),na=null,Ea="",Qa=!Qa):Qa?Ea+=ob:ob===na?Ea+=ob:(0<Ea.length&&Ua.push({literal:!1,val:Ea}),na=Ea=ob)}0<Ea.length&&
Ua.push({literal:Qa,val:Ea});return Ua}static macroTokenToFormatOpts(Z){return ld[Z]}constructor(Z,na){this.opts=na;this.loc=Z;this.systemLoc=null}formatWithSystemDefault(Z,na){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(Z,{...this.opts,...na}).format()}formatDateTime(Z,na={}){return this.loc.dtFormatter(Z,{...this.opts,...na}).format()}formatDateTimeParts(Z,na={}){return this.loc.dtFormatter(Z,{...this.opts,...na}).formatToParts()}resolvedOptions(Z,
na={}){return this.loc.dtFormatter(Z,{...this.opts,...na}).resolvedOptions()}num(Z,na=0){if(this.opts.forceSimple)return b(Z,na);const Ea={...this.opts};0<na&&(Ea.padTo=na);return this.loc.numberFormatter(Ea).format(Z)}formatDateTimeFromString(Z,na){const Ea="en"===this.loc.listingMode(),Qa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,Ua=(Yb,bc)=>this.loc.extract(Z,Yb,bc),cb=Yb=>Z.isOffsetFixed&&0===Z.offset&&Yb.allowZ?"Z":Z.isValid?Z.zone.formatOffset(Z.ts,Yb.format):"",ob=(Yb,bc)=>
Ea?D(Yb)[Z.month-1]:Ua(bc?{month:Yb}:{month:Yb,day:"numeric"},"month"),Ab=(Yb,bc)=>Ea?F(Yb)[Z.weekday-1]:Ua(bc?{weekday:Yb}:{weekday:Yb,month:"long",day:"numeric"},"weekday"),Sb=Yb=>{const bc=Ic.macroTokenToFormatOpts(Yb);return bc?this.formatWithSystemDefault(Z,bc):Yb},Hc=Yb=>Ea?E(Yb)[0>Z.year?0:1]:Ua({era:Yb},"era");return O(Ic.parseFormat(na),Yb=>{switch(Yb){case "S":return this.num(Z.millisecond);case "u":case "SSS":return this.num(Z.millisecond,3);case "s":return this.num(Z.second);case "ss":return this.num(Z.second,
2);case "uu":return this.num(Math.floor(Z.millisecond/10),2);case "uuu":return this.num(Math.floor(Z.millisecond/100));case "m":return this.num(Z.minute);case "mm":return this.num(Z.minute,2);case "h":return this.num(0===Z.hour%12?12:Z.hour%12);case "hh":return this.num(0===Z.hour%12?12:Z.hour%12,2);case "H":return this.num(Z.hour);case "HH":return this.num(Z.hour,2);case "Z":return cb({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return cb({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return cb({format:"techie",
allowZ:this.opts.allowZ});case "ZZZZ":return Z.zone.offsetName(Z.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return Z.zone.offsetName(Z.ts,{format:"long",locale:this.loc.locale});case "z":return Z.zoneName;case "a":return Ea?Gd[12>Z.hour?0:1]:Ua({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Qa?Ua({day:"numeric"},"day"):this.num(Z.day);case "dd":return Qa?Ua({day:"2-digit"},"day"):this.num(Z.day,2);case "c":return this.num(Z.weekday);case "ccc":return Ab("short",!0);case "cccc":return Ab("long",
!0);case "ccccc":return Ab("narrow",!0);case "E":return this.num(Z.weekday);case "EEE":return Ab("short",!1);case "EEEE":return Ab("long",!1);case "EEEEE":return Ab("narrow",!1);case "L":return Qa?Ua({month:"numeric",day:"numeric"},"month"):this.num(Z.month);case "LL":return Qa?Ua({month:"2-digit",day:"numeric"},"month"):this.num(Z.month,2);case "LLL":return ob("short",!0);case "LLLL":return ob("long",!0);case "LLLLL":return ob("narrow",!0);case "M":return Qa?Ua({month:"numeric"},"month"):this.num(Z.month);
case "MM":return Qa?Ua({month:"2-digit"},"month"):this.num(Z.month,2);case "MMM":return ob("short",!1);case "MMMM":return ob("long",!1);case "MMMMM":return ob("narrow",!1);case "y":return Qa?Ua({year:"numeric"},"year"):this.num(Z.year);case "yy":return Qa?Ua({year:"2-digit"},"year"):this.num(Z.year.toString().slice(-2),2);case "yyyy":return Qa?Ua({year:"numeric"},"year"):this.num(Z.year,4);case "yyyyyy":return Qa?Ua({year:"numeric"},"year"):this.num(Z.year,6);case "G":return Hc("short");case "GG":return Hc("long");
case "GGGGG":return Hc("narrow");case "kk":return this.num(Z.weekYear.toString().slice(-2),2);case "kkkk":return this.num(Z.weekYear,4);case "W":return this.num(Z.weekNumber);case "WW":return this.num(Z.weekNumber,2);case "o":return this.num(Z.ordinal);case "ooo":return this.num(Z.ordinal,3);case "q":return this.num(Z.quarter);case "qq":return this.num(Z.quarter,2);case "X":return this.num(Math.floor(Z.ts/1E3));case "x":return this.num(Z.ts);default:return Sb(Yb)}})}formatDurationFromString(Z,na){const Ea=
Ua=>{switch(Ua[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};na=Ic.parseFormat(na);const Qa=na.reduce((Ua,{literal:cb,val:ob})=>cb?Ua:Ua.concat(ob),[]);Z=Z.shiftTo(...Qa.map(Ea).filter(Ua=>Ua));return O(na,(Ua=>cb=>{const ob=Ea(cb);return ob?this.num(Ua.get(ob),cb.length):cb})(Z))}}class wc{constructor(Z,na){this.reason=Z;this.explanation=
na}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Tc{get type(){throw new pb;}get name(){throw new pb;}get ianaName(){return this.name}get isUniversal(){throw new pb;}offsetName(Z,na){throw new pb;}formatOffset(Z,na){throw new pb;}offset(Z){throw new pb;}equals(Z){throw new pb;}get isValid(){throw new pb;}}let fd=null;class md extends Tc{static get instance(){null===fd&&(fd=new md);return fd}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(Z,
{format:na,locale:Ea}){return w(Z,na,Ea)}formatOffset(Z,na){return B(this.offset(Z),na)}offset(Z){return-(new Date(Z)).getTimezoneOffset()}equals(Z){return"system"===Z.type}get isValid(){return!0}}let Vc={};const Ge={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let Hd={};class Dc extends Tc{static create(Z){Hd[Z]||(Hd[Z]=new Dc(Z));return Hd[Z]}static resetCache(){Hd={};Vc={}}static isValidSpecifier(Z){return this.isValidZone(Z)}static isValidZone(Z){if(!Z)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:Z})).format(),!0}catch(na){return!1}}constructor(Z){super();this.zoneName=Z;this.valid=Dc.isValidZone(Z)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(Z,{format:na,locale:Ea}){return w(Z,na,Ea,this.name)}formatOffset(Z,na){return B(this.offset(Z),na)}offset(Z){Z=new Date(Z);if(isNaN(Z))return NaN;var na=this.name;Vc[na]||(Vc[na]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:na,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",
minute:"2-digit",second:"2-digit",era:"short"}));na=Vc[na];if(na.formatToParts){na=na.formatToParts(Z);var Ea=[];for(let Yb=0;Yb<na.length;Yb++){const {type:bc,value:xc}=na[Yb],dd=Ge[bc];"era"===bc?Ea[dd]=xc:n(dd)||(Ea[dd]=parseInt(xc,10))}na=Ea}else{{na=na.format(Z).replace(/\u200E/g,"");na=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(na);const [,Yb,bc,xc,dd,ge,nd,Ue]=na;na=[xc,Yb,bc,dd,ge,nd,Ue]}}let [Qa,Ua,cb,ob,Ab,Sb,Hc]=na;"BC"===ob&&(Qa=-Math.abs(Qa)+1);na=k({year:Qa,month:Ua,day:cb,
hour:24===Ab?0:Ab,minute:Sb,second:Hc,millisecond:0});Z=+Z;Ea=Z%1E3;return(na-(Z-(0<=Ea?Ea:1E3+Ea)))/6E4}equals(Z){return"iana"===Z.type&&Z.name===this.name}get isValid(){return this.valid}}let $d=null;class Sc extends Tc{static get utcInstance(){null===$d&&($d=new Sc(0));return $d}static instance(Z){return 0===Z?Sc.utcInstance:new Sc(Z)}static parseSpecifier(Z){return Z&&(Z=Z.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Sc(A(Z[1],Z[2])):null}constructor(Z){super();this.fixed=Z}get type(){return"fixed"}get name(){return 0===
this.fixed?"UTC":`UTC${B(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${B(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(Z,na){return B(this.fixed,na)}get isUniversal(){return!0}offset(){return this.fixed}equals(Z){return"fixed"===Z.type&&Z.fixed===this.fixed}get isValid(){return!0}}class ke extends Tc{constructor(Z){super();this.zoneName=Z}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let Cd=()=>Date.now(),td="system",Lc=null,Ad=null,sd=null,Jd;class Mc{static get now(){return Cd}static set now(Z){Cd=Z}static set defaultZone(Z){td=Z}static get defaultZone(){return H(td,md.instance)}static get defaultLocale(){return Lc}static set defaultLocale(Z){Lc=Z}static get defaultNumberingSystem(){return Ad}static set defaultNumberingSystem(Z){Ad=Z}static get defaultOutputCalendar(){return sd}static set defaultOutputCalendar(Z){sd=Z}static get throwOnInvalid(){return Jd}static set throwOnInvalid(Z){Jd=
Z}static resetCaches(){Ac.resetCache();Dc.resetCache()}}let Kd={},ud={},gd={},Ld={},Ed=null;class Sd{constructor(Z,na,Ea){this.padTo=Ea.padTo||0;this.floor=Ea.floor||!1;const {padTo:Qa,floor:Ua,...cb}=Ea;if(!na||0<Object.keys(cb).length)na={useGrouping:!1,...Ea},0<Ea.padTo&&(na.minimumIntegerDigits=Ea.padTo),this.inf=L(Z,na)}format(Z){if(this.inf)return this.inf.format(this.floor?Math.floor(Z):Z);Z=this.floor?Math.floor(Z):f(Z,3);return b(Z,this.padTo)}}class He{constructor(Z,na,Ea){this.opts=Ea;
if(Z.zone.isUniversal){var Qa=Z.offset/60*-1;Qa=0<=Qa?`Etc/GMT+${Qa}`:`Etc/GMT${Qa}`;0!==Z.offset&&Dc.create(Qa).valid?this.dt=Z:(Qa="UTC",this.dt=Ea.timeZoneName?Z:0===Z.offset?Z:gc.fromMillis(Z.ts+6E4*Z.offset))}else"system"===Z.zone.type?this.dt=Z:(this.dt=Z,Qa=Z.zone.name);Z={...this.opts};Qa&&(Z.timeZone=Qa);this.dtf=P(na,Z)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}
class vd{constructor(Z,na,Ea){this.opts={style:"long",...Ea};!na&&v()&&(this.rtf=M(Z,Ea))}format(Z,na){return this.rtf?this.rtf.format(Z,na):G(na,Z,this.opts.numeric,"long"!==this.opts.style)}formatToParts(Z,na){return this.rtf?this.rtf.formatToParts(Z,na):[]}}class Ac{static fromOpts(Z){return Ac.create(Z.locale,Z.numberingSystem,Z.outputCalendar,Z.defaultToEN)}static create(Z,na,Ea,Qa=!1){Z=Z||Mc.defaultLocale;var Ua;(Ua=Z)||(Qa?Qa="en-US":(Ed||(Ed=(new Intl.DateTimeFormat).resolvedOptions().locale),
Qa=Ed),Ua=Qa);return new Ac(Ua,na||Mc.defaultNumberingSystem,Ea||Mc.defaultOutputCalendar,Z)}static resetCache(){Ed=null;ud={};gd={};Ld={}}static fromObject({locale:Z,numberingSystem:na,outputCalendar:Ea}={}){return Ac.create(Z,na,Ea)}constructor(Z,na,Ea,Qa){var Ua=Z.indexOf("-u-");if(-1===Ua)Z=[Z];else{let Sb;Ua=Z.substring(0,Ua);try{Sb=P(Z).resolvedOptions()}catch(bc){Sb=P(Ua).resolvedOptions()}const {numberingSystem:Hc,calendar:Yb}=Sb;Z=[Ua,Hc,Yb]}const [cb,ob,Ab]=Z;this.locale=cb;this.numberingSystem=
na||ob||null;this.outputCalendar=Ea||Ab||null;na=this.locale;Ea=this.numberingSystem;if((Z=this.outputCalendar)||Ea)na+="-u",Z&&(na+=`-ca-${Z}`),Ea&&(na+=`-nu-${Ea}`);this.intl=na;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Qa;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var Z=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||
!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=Z}return this.fastNumbersCached}listingMode(){const Z=this.isEnglish(),na=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return Z&&na?"en":"intl"}clone(Z){return Z&&0!==Object.getOwnPropertyNames(Z).length?Ac.create(Z.locale||this.specifiedLocale,Z.numberingSystem||this.numberingSystem,
Z.outputCalendar||this.outputCalendar,Z.defaultToEN||!1):this}redefaultToEN(Z={}){return this.clone({...Z,defaultToEN:!0})}redefaultToSystem(Z={}){return this.clone({...Z,defaultToEN:!1})}months(Z,na=!1,Ea=!0){return X(this,Z,Ea,D,()=>{const Qa=na?{month:Z,day:"numeric"}:{month:Z},Ua=na?"format":"standalone";this.monthsCache[Ua][Z]||(this.monthsCache[Ua][Z]=J(cb=>this.extract(cb,Qa,"month")));return this.monthsCache[Ua][Z]})}weekdays(Z,na=!1,Ea=!0){return X(this,Z,Ea,F,()=>{const Qa=na?{weekday:Z,
year:"numeric",month:"long",day:"numeric"}:{weekday:Z},Ua=na?"format":"standalone";this.weekdaysCache[Ua][Z]||(this.weekdaysCache[Ua][Z]=R(cb=>this.extract(cb,Qa,"weekday")));return this.weekdaysCache[Ua][Z]})}meridiems(Z=!0){return X(this,void 0,Z,()=>Gd,()=>{if(!this.meridiemCache){const na={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[gc.utc(2016,11,13,9),gc.utc(2016,11,13,19)].map(Ea=>this.extract(Ea,na,"dayperiod"))}return this.meridiemCache})}eras(Z,na=!0){return X(this,Z,na,E,()=>{const Ea=
{era:Z};this.eraCache[Z]||(this.eraCache[Z]=[gc.utc(-40,1,1),gc.utc(2017,1,1)].map(Qa=>this.extract(Qa,Ea,"era")));return this.eraCache[Z]})}extract(Z,na,Ea){return(Z=this.dtFormatter(Z,na).formatToParts().find(Qa=>Qa.type.toLowerCase()===Ea))?Z.value:null}numberFormatter(Z={}){return new Sd(this.intl,Z.forceSimple||this.fastNumbers,Z)}dtFormatter(Z,na={}){return new He(Z,this.intl,na)}relFormatter(Z={}){return new vd(this.intl,this.isEnglish(),Z)}listFormatter(Z={}){return K(this.intl,Z)}isEnglish(){return"en"===
this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(Z){return this.locale===Z.locale&&this.numberingSystem===Z.numberingSystem&&this.outputCalendar===Z.outputCalendar}}const le=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,me=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Td=RegExp(`${me.source}${`(?:${le.source}?(?:\\[(${cd.source})\\])?)?`}`),ae=RegExp(`(?:T${Td.source})?`),Ie=Y("weekYear","weekNumber","weekDay"),
Je=Y("year","ordinal"),be=RegExp(`${me.source} ?(?:${le.source}|(${cd.source}))?`),Ke=RegExp(`(?: ${be.source})?`),qe=RegExp(`^T?${me.source}$`),hd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,re={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Gb=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,
Bc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,id=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,se=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,te=U(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ae),ce=U(/(\d{4})-?W(\d\d)(?:-?(\d))?/,ae),
ad=U(/(\d{4})-?(\d{3})/,ae),de=U(Td),ue=V(function(Z,na){return[{year:fa(Z,na),month:fa(Z,na+1,1),day:fa(Z,na+2,1)},null,na+3]},da,ca,la),ve=V(Ie,da,ca,la),we=V(Je,da,ca,la),xe=V(da,ca,la),ee=V(da),wd=U(/(\d{4})-(\d\d)-(\d\d)/,Ke),fe=U(be),ye=V(da,ca,la),ze={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},
Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...ze},xd={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,
minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...ze},Uc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ne=Uc.slice(0).reverse();class Qb{constructor(Z){const na="longterm"===Z.conversionAccuracy||!1;this.values=Z.values;this.loc=Z.loc||Ac.create();this.conversionAccuracy=na?"longterm":"casual";this.invalid=Z.invalid||null;this.matrix=na?xd:Te;
this.isLuxonDuration=!0}static fromMillis(Z,na){return Qb.fromObject({milliseconds:Z},na)}static fromObject(Z,na={}){if(null==Z||"object"!==typeof Z)throw new lb(`Duration.fromObject: argument expected to be an object, got ${null===Z?"null":typeof Z}`);return new Qb({values:y(Z,Qb.normalizeUnit),loc:Ac.fromObject(na),conversionAccuracy:na.conversionAccuracy})}static fromDurationLike(Z){if(h(Z))return Qb.fromMillis(Z);if(Qb.isDuration(Z))return Z;if("object"===typeof Z)return Qb.fromObject(Z);throw new lb(`Unknown duration argument ${Z} of type ${typeof Z}`);
}static fromISO(Z,na){const [Ea]=Q(Z,[hd,ha]);return Ea?Qb.fromObject(Ea,na):Qb.invalid("unparsable",`the input "${Z}" can't be parsed as ISO 8601`)}static fromISOTime(Z,na){const [Ea]=Q(Z,[qe,ee]);return Ea?Qb.fromObject(Ea,na):Qb.invalid("unparsable",`the input "${Z}" can't be parsed as ISO 8601`)}static invalid(Z,na=null){if(!Z)throw new lb("need to specify a reason the Duration is invalid");Z=Z instanceof wc?Z:new wc(Z,na);if(Mc.throwOnInvalid)throw new bd(Z);return new Qb({invalid:Z})}static normalizeUnit(Z){const na=
{year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[Z?Z.toLowerCase():Z];if(!na)throw new ib(Z);return na}static isDuration(Z){return Z&&Z.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?
this.loc.numberingSystem:null}toFormat(Z,na={}){na={...na,floor:!1!==na.round&&!1!==na.floor};return this.isValid?Ic.create(this.loc,na).formatDurationFromString(this,Z):"Invalid Duration"}toHuman(Z={}){const na=Uc.map(Ea=>{const Qa=this.values[Ea];return n(Qa)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...Z,unit:Ea.slice(0,-1)}).format(Qa)}).filter(Ea=>Ea);return this.loc.listFormatter({type:"conjunction",style:Z.listStyle||"narrow",...Z}).format(na)}toObject(){return this.isValid?
{...this.values}:{}}toISO(){if(!this.isValid)return null;let Z="P";0!==this.years&&(Z+=this.years+"Y");if(0!==this.months||0!==this.quarters)Z+=this.months+3*this.quarters+"M";0!==this.weeks&&(Z+=this.weeks+"W");0!==this.days&&(Z+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)Z+="T";0!==this.hours&&(Z+=this.hours+"H");0!==this.minutes&&(Z+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)Z+=f(this.seconds+this.milliseconds/1E3,3)+"S";"P"===
Z&&(Z+="T0S");return Z}toISOTime(Z={}){if(!this.isValid)return null;var na=this.toMillis();if(0>na||864E5<=na)return null;Z={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...Z};na=this.shiftTo("hours","minutes","seconds","milliseconds");let Ea="basic"===Z.format?"hhmm":"hh:mm";Z.suppressSeconds&&0===na.seconds&&0===na.milliseconds||(Ea+="basic"===Z.format?"ss":":ss",Z.suppressMilliseconds&&0===na.milliseconds||(Ea+=".SSS"));na=na.toFormat(Ea);Z.includePrefix&&(na="T"+
na);return na}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(Z){if(!this.isValid)return this;Z=Qb.fromDurationLike(Z);const na={};for(const Ea of Uc)if(g(Z.values,Ea)||g(this.values,Ea))na[Ea]=Z.get(Ea)+this.get(Ea);return ja(this,{values:na},!0)}minus(Z){if(!this.isValid)return this;Z=Qb.fromDurationLike(Z);return this.plus(Z.negate())}mapUnits(Z){if(!this.isValid)return this;const na={};for(const Ea of Object.keys(this.values))na[Ea]=
x(Z(this.values[Ea],Ea));return ja(this,{values:na},!0)}get(Z){return this[Qb.normalizeUnit(Z)]}set(Z){if(!this.isValid)return this;Z={...this.values,...y(Z,Qb.normalizeUnit)};return ja(this,{values:Z})}reconfigure({locale:Z,numberingSystem:na,conversionAccuracy:Ea}={}){Z={loc:this.loc.clone({locale:Z,numberingSystem:na})};Ea&&(Z.conversionAccuracy=Ea);return ja(this,Z)}as(Z){return this.isValid?this.shiftTo(Z).get(Z):NaN}normalize(){if(!this.isValid)return this;const Z=this.toObject();Ja(this.matrix,
Z);return ja(this,{values:Z},!0)}shiftTo(...Z){if(!this.isValid||0===Z.length)return this;Z=Z.map(cb=>Qb.normalizeUnit(cb));const na={},Ea={},Qa=this.toObject();let Ua;for(const cb of Uc)if(0<=Z.indexOf(cb)){Ua=cb;let ob=0;for(const Sb in Ea)ob+=this.matrix[Sb][cb]*Ea[Sb],Ea[Sb]=0;h(Qa[cb])&&(ob+=Qa[cb]);const Ab=Math.trunc(ob);na[cb]=Ab;Ea[cb]=(1E3*ob-1E3*Ab)/1E3;for(const Sb in Qa)Uc.indexOf(Sb)>Uc.indexOf(cb)&&wa(this.matrix,Qa,Sb,na,cb)}else h(Qa[cb])&&(Ea[cb]=Qa[cb]);for(const cb in Ea)0!==Ea[cb]&&
(na[Ua]+=cb===Ua?Ea[cb]:Ea[cb]/this.matrix[Ua][cb]);return ja(this,{values:na},!0).normalize()}negate(){if(!this.isValid)return this;const Z={};for(const na of Object.keys(this.values))Z[na]=0===this.values[na]?0:-this.values[na];return ja(this,{values:Z},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?
this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(Z){if(!this.isValid||!Z.isValid||!this.loc.equals(Z.loc))return!1;
for(const Qa of Uc){var na=this.values[Qa];var Ea=Z.values[Qa];na=void 0===na||0===na?void 0===Ea||0===Ea:na===Ea;if(!na)return!1}return!0}}class Jc{constructor(Z){this.s=Z.start;this.e=Z.end;this.invalid=Z.invalid||null;this.isLuxonInterval=!0}static invalid(Z,na=null){if(!Z)throw new lb("need to specify a reason the Interval is invalid");Z=Z instanceof wc?Z:new wc(Z,na);if(Mc.throwOnInvalid)throw new jd(Z);return new Jc({invalid:Z})}static fromDateTimes(Z,na){Z=Qc(Z);na=Qc(na);var Ea=Z&&Z.isValid?
na&&na.isValid?na<Z?Jc.invalid("end before start",`The end of an interval must be after its start, but you had start=${Z.toISO()} and end=${na.toISO()}`):null:Jc.invalid("missing or invalid end"):Jc.invalid("missing or invalid start");return null==Ea?new Jc({start:Z,end:na}):Ea}static after(Z,na){na=Qb.fromDurationLike(na);Z=Qc(Z);return Jc.fromDateTimes(Z,Z.plus(na))}static before(Z,na){na=Qb.fromDurationLike(na);Z=Qc(Z);return Jc.fromDateTimes(Z.minus(na),Z)}static fromISO(Z,na){const [Ea,Qa]=(Z||
"").split("/",2);if(Ea&&Qa){let ob;try{var Ua=gc.fromISO(Ea,na);ob=Ua.isValid}catch(Sb){ob=!1}let Ab;try{var cb=gc.fromISO(Qa,na);Ab=cb.isValid}catch(Sb){Ab=!1}if(ob&&Ab)return Jc.fromDateTimes(Ua,cb);if(ob){if(cb=Qb.fromISO(Qa,na),cb.isValid)return Jc.after(Ua,cb)}else if(Ab&&(Ua=Qb.fromISO(Ea,na),Ua.isValid))return Jc.before(cb,Ua)}return Jc.invalid("unparsable",`the input "${Z}" can't be parsed as ISO 8601`)}static isInterval(Z){return Z&&Z.isLuxonInterval||!1}get start(){return this.isValid?this.s:
null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(Z="milliseconds"){return this.isValid?this.toDuration(...[Z]).get(Z):NaN}count(Z="milliseconds"){if(!this.isValid)return NaN;const na=this.start.startOf(Z),Ea=this.end.startOf(Z);return Math.floor(Ea.diff(na,Z).get(Z))+1}hasSame(Z){return this.isValid?this.isEmpty()||
this.e.minus(1).hasSame(this.s,Z):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(Z){return this.isValid?this.s>Z:!1}isBefore(Z){return this.isValid?this.e<=Z:!1}contains(Z){return this.isValid?this.s<=Z&&this.e>Z:!1}set({start:Z,end:na}={}){return this.isValid?Jc.fromDateTimes(Z||this.s,na||this.e):this}splitAt(...Z){if(!this.isValid)return[];Z=Z.map(Qc).filter(cb=>this.contains(cb)).sort();const na=[];let {s:Ea}=this,Qa=0;for(;Ea<this.e;){var Ua=Z[Qa]||this.e;Ua=+Ua>+this.e?this.e:
Ua;na.push(Jc.fromDateTimes(Ea,Ua));Ea=Ua;Qa+=1}return na}splitBy(Z){Z=Qb.fromDurationLike(Z);if(!this.isValid||!Z.isValid||0===Z.as("milliseconds"))return[];let {s:na}=this,Ea=1;const Qa=[];for(;na<this.e;){var Ua=this.start.plus(Z.mapUnits(cb=>cb*Ea));Ua=+Ua>+this.e?this.e:Ua;Qa.push(Jc.fromDateTimes(na,Ua));na=Ua;Ea+=1}return Qa}divideEqually(Z){return this.isValid?this.splitBy(this.length()/Z).slice(0,Z):[]}overlaps(Z){return this.e>Z.s&&this.s<Z.e}abutsStart(Z){return this.isValid?+this.e===
+Z.s:!1}abutsEnd(Z){return this.isValid?+Z.e===+this.s:!1}engulfs(Z){return this.isValid?this.s<=Z.s&&this.e>=Z.e:!1}equals(Z){return this.isValid&&Z.isValid?this.s.equals(Z.s)&&this.e.equals(Z.e):!1}intersection(Z){if(!this.isValid)return this;const na=this.s>Z.s?this.s:Z.s;Z=this.e<Z.e?this.e:Z.e;return na>=Z?null:Jc.fromDateTimes(na,Z)}union(Z){return this.isValid?Jc.fromDateTimes(this.s<Z.s?this.s:Z.s,this.e>Z.e?this.e:Z.e):this}static merge(Z){const [na,Ea]=Z.sort((Qa,Ua)=>Qa.s-Ua.s).reduce(([Qa,
Ua],cb)=>Ua?Ua.overlaps(cb)||Ua.abutsStart(cb)?[Qa,Ua.union(cb)]:[Qa.concat([Ua]),cb]:[Qa,cb],[[],null]);Ea&&na.push(Ea);return na}static xor(Z){let na=null,Ea=0;const Qa=[];Z=Z.map(Ua=>[{time:Ua.s,type:"s"},{time:Ua.e,type:"e"}]);Z=Array.prototype.concat(...Z).sort((Ua,cb)=>Ua.time-cb.time);for(const Ua of Z)Ea+="s"===Ua.type?1:-1,1===Ea?na=Ua.time:(na&&+na!==+Ua.time&&Qa.push(Jc.fromDateTimes(na,Ua.time)),na=null);return Jc.merge(Qa)}difference(...Z){return Jc.xor([this].concat(Z)).map(na=>this.intersection(na)).filter(na=>
na&&!na.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(Z){return this.isValid?`${this.s.toISO(Z)}/${this.e.toISO(Z)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(Z){return this.isValid?`${this.s.toISOTime(Z)}/${this.e.toISOTime(Z)}`:"Invalid Interval"}toFormat(Z,{separator:na=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(Z)}${na}${this.e.toFormat(Z)}`:
"Invalid Interval"}toDuration(Z,na){return this.isValid?this.e.diff(this.s,Z,na):Qb.invalid(this.invalidReason)}mapEndpoints(Z){return Jc.fromDateTimes(Z(this.s),Z(this.e))}}class aa{static hasDST(Z=Mc.defaultZone){const na=gc.now().setZone(Z).set({month:12});return!Z.isUniversal&&na.offset!==na.set({month:6}).offset}static isValidIANAZone(Z){return Dc.isValidZone(Z)}static normalizeZone(Z){return H(Z,Mc.defaultZone)}static months(Z="long",{locale:na=null,numberingSystem:Ea=null,locObj:Qa=null,outputCalendar:Ua=
"gregory"}={}){return(Qa||Ac.create(na,Ea,Ua)).months(Z)}static monthsFormat(Z="long",{locale:na=null,numberingSystem:Ea=null,locObj:Qa=null,outputCalendar:Ua="gregory"}={}){return(Qa||Ac.create(na,Ea,Ua)).months(Z,!0)}static weekdays(Z="long",{locale:na=null,numberingSystem:Ea=null,locObj:Qa=null}={}){return(Qa||Ac.create(na,Ea,null)).weekdays(Z)}static weekdaysFormat(Z="long",{locale:na=null,numberingSystem:Ea=null,locObj:Qa=null}={}){return(Qa||Ac.create(na,Ea,null)).weekdays(Z,!0)}static meridiems({locale:Z=
null}={}){return Ac.create(Z).meridiems()}static eras(Z="short",{locale:na=null}={}){return Ac.create(na,null,"gregory").eras(Z)}static features(){return{relative:v()}}}const ka={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",
mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},za={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],
thai:[3664,3673],tibt:[3872,3881]},La=ka.hanidec.replace(/[\[|\]]/g,"").split(""),mb=`[ ${String.fromCharCode(160)}]`,Eb=new RegExp(mb,"g"),wb={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let dc=null;const uc=[0,31,59,90,120,151,181,212,243,273,304,
334],oc=[0,31,60,91,121,152,182,213,244,274,305,335],kd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Md={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},tf={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ne="year month day hour minute second millisecond".split(" "),uf="weekYear weekNumber weekday hour minute second millisecond".split(" "),Pf="year ordinal hour minute second millisecond".split(" ");class gc{constructor(Z){const na=Z.zone||Mc.defaultZone;let Ea=Z.invalid||
(Number.isNaN(Z.ts)?new wc("invalid input"):null)||(na.isValid?null:Mb(na));this.ts=n(Z.ts)?Mc.now():Z.ts;let Qa=null;var Ua=null;Ea||(Z.old&&Z.old.ts===this.ts&&Z.old.zone.equals(na)?[Qa,Ua]=[Z.old.c,Z.old.o]:(Ua=na.offset(this.ts),Qa=zb(this.ts,Ua),Qa=(Ea=Number.isNaN(Qa.year)?new wc("invalid input"):null)?null:Qa,Ua=Ea?null:Ua));this._zone=na;this.loc=Z.loc||Ac.create();this.invalid=Ea;this.weekData=null;this.c=Qa;this.o=Ua;this.isLuxonDateTime=!0}static now(){return new gc({})}static local(){const [Z,
na]=Zb(arguments),[Ea,Qa,Ua,cb,ob,Ab,Sb]=na;return kc({year:Ea,month:Qa,day:Ua,hour:cb,minute:ob,second:Ab,millisecond:Sb},Z)}static utc(){const [Z,na]=Zb(arguments),[Ea,Qa,Ua,cb,ob,Ab,Sb]=na;Z.zone=Sc.utcInstance;return kc({year:Ea,month:Qa,day:Ua,hour:cb,minute:ob,second:Ab,millisecond:Sb},Z)}static fromJSDate(Z,na={}){Z="[object Date]"===Object.prototype.toString.call(Z)?Z.valueOf():NaN;if(Number.isNaN(Z))return gc.invalid("invalid input");const Ea=H(na.zone,Mc.defaultZone);return Ea.isValid?new gc({ts:Z,
zone:Ea,loc:Ac.fromObject(na)}):gc.invalid(Mb(Ea))}static fromMillis(Z,na={}){if(h(Z))return-864E13>Z||864E13<Z?gc.invalid("Timestamp out of range"):new gc({ts:Z,zone:H(na.zone,Mc.defaultZone),loc:Ac.fromObject(na)});throw new lb(`fromMillis requires a numerical input, but received a ${typeof Z} with value ${Z}`);}static fromSeconds(Z,na={}){if(h(Z))return new gc({ts:1E3*Z,zone:H(na.zone,Mc.defaultZone),loc:Ac.fromObject(na)});throw new lb("fromSeconds requires a numerical input");}static fromObject(Z,
na={}){Z=Z||{};var Ea=H(na.zone,Mc.defaultZone);if(!Ea.isValid)return gc.invalid(Mb(Ea));var Qa=Mc.now();const Ua=n(na.specificOffset)?Ea.offset(Qa):na.specificOffset,cb=y(Z,ac);var ob=!n(cb.ordinal),Ab=!n(cb.year),Sb=!n(cb.month)||!n(cb.day);Ab=Ab||Sb;var Hc=cb.weekYear||cb.weekNumber;na=Ac.fromObject(na);if((Ab||ob)&&Hc)throw new Va("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Sb&&ob)throw new Va("Can't mix ordinal dates with month/day");Sb=Hc||cb.weekday&&!Ab;let Yb=
zb(Qa,Ua);Sb?(Qa=uf,Hc=Md,Yb=yb(Yb)):ob?(Qa=Pf,Hc=tf,Yb=nb(Yb)):(Qa=Ne,Hc=kd);let bc=!1;for(var xc of Qa)n(cb[xc])?cb[xc]=bc?Hc[xc]:Yb[xc]:bc=!0;Sb?(xc=r(cb.weekYear),Qa=e(cb.weekNumber,1,q(cb.weekYear)),Hc=e(cb.weekday,1,7),xc=xc?Qa?Hc?!1:Za("weekday",cb.weekday):Za("week",cb.week):Za("weekYear",cb.weekYear)):ob?(xc=r(cb.year),Qa=e(cb.ordinal,1,l(cb.year)?366:365),xc=xc?Qa?!1:Za("ordinal",cb.ordinal):Za("year",cb.year)):xc=Tb(cb);if(xc=xc||$b(cb))return gc.invalid(xc);ob=Sb?tb(cb):ob?Nb(cb):cb;const [dd,
ge]=xb(ob,Ua,Ea);Ea=new gc({ts:dd,zone:Ea,o:ge,loc:na});return cb.weekday&&Ab&&Z.weekday!==Ea.weekday?gc.invalid("mismatched weekday",`you can't specify both a weekday of ${cb.weekday} and a date of ${Ea.toISO()}`):Ea}static fromISO(Z,na={}){const [Ea,Qa]=Q(Z,[te,ue],[ce,ve],[ad,we],[de,xe]);return Oa(Ea,Qa,na,"ISO 8601",Z)}static fromRFC2822(Z,na={}){const [Ea,Qa]=Q(Z.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Gb,ea]);return Oa(Ea,Qa,na,"RFC 2822",Z)}static fromHTTP(Z,na={}){const [Ea,
Qa]=Q(Z,[Bc,ma],[id,ma],[se,sa]);return Oa(Ea,Qa,na,"HTTP",na)}static fromFormat(Z,na,Ea={}){if(n(Z)||n(na))throw new lb("fromFormat requires an input string and a format");const {locale:Qa=null,numberingSystem:Ua=null}=Ea;var cb=Ac.fromOpts({locale:Qa,numberingSystem:Ua,defaultToEN:!0});{const {result:Yb,zone:bc,specificOffset:xc,invalidReason:dd}=gb(cb,Z,na);cb=[Yb,bc,xc,dd]}const [ob,Ab,Sb,Hc]=cb;return Hc?gc.invalid(Hc):Oa(ob,Ab,Ea,`format ${na}`,Z,Sb)}static fromString(Z,na,Ea={}){return gc.fromFormat(Z,
na,Ea)}static fromSQL(Z,na={}){const [Ea,Qa]=Q(Z,[wd,ue],[fe,ye]);return Oa(Ea,Qa,na,"SQL",Z)}static invalid(Z,na=null){if(!Z)throw new lb("need to specify a reason the DateTime is invalid");Z=Z instanceof wc?Z:new wc(Z,na);if(Mc.throwOnInvalid)throw new Pc(Z);return new gc({invalid:Z})}static isDateTime(Z){return Z&&Z.isLuxonDateTime||!1}get(Z){return this[Z]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?
this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:
NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Kb(this).weekYear:NaN}get weekNumber(){return this.isValid?Kb(this).weekNumber:NaN}get weekday(){return this.isValid?Kb(this).weekday:NaN}get ordinal(){return this.isValid?nb(this.c).ordinal:NaN}get monthShort(){return this.isValid?aa.months("short",{locObj:this.loc})[this.month-
1]:null}get monthLong(){return this.isValid?aa.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?aa.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?aa.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,
{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return l(this.year)}get daysInMonth(){return m(this.year,this.month)}get daysInYear(){return this.isValid?l(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?q(this.weekYear):NaN}resolvedLocaleOptions(Z={}){const {locale:na,numberingSystem:Ea,
calendar:Qa}=Ic.create(this.loc.clone(Z),Z).resolvedOptions(this);return{locale:na,numberingSystem:Ea,outputCalendar:Qa}}toUTC(Z=0,na={}){return this.setZone(Sc.instance(Z),na)}toLocal(){return this.setZone(Mc.defaultZone)}setZone(Z,{keepLocalTime:na=!1,keepCalendarTime:Ea=!1}={}){Z=H(Z,Mc.defaultZone);if(Z.equals(this.zone))return this;if(Z.isValid){let Qa=this.ts;if(na||Ea)na=Z.offset(this.ts),Ea=this.toObject(),[Qa]=xb(Ea,na,Z);return kb(this,{ts:Qa,zone:Z})}return gc.invalid(Mb(Z))}reconfigure({locale:Z,
numberingSystem:na,outputCalendar:Ea}={}){Z=this.loc.clone({locale:Z,numberingSystem:na,outputCalendar:Ea});return kb(this,{loc:Z})}setLocale(Z){return this.reconfigure({locale:Z})}set(Z){if(!this.isValid)return this;Z=y(Z,ac);var na=!n(Z.weekYear)||!n(Z.weekNumber)||!n(Z.weekday);const Ea=!n(Z.ordinal),Qa=!n(Z.year),Ua=!n(Z.month)||!n(Z.day),cb=Z.weekYear||Z.weekNumber;if((Qa||Ua||Ea)&&cb)throw new Va("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ua&&Ea)throw new Va("Can't mix ordinal dates with month/day");
na?na=tb({...yb(this.c),...Z}):n(Z.ordinal)?(na={...this.toObject(),...Z},n(Z.day)&&(na.day=Math.min(m(na.year,na.month),na.day))):na=Nb({...nb(this.c),...Z});const [ob,Ab]=xb(na,this.o,this.zone);return kb(this,{ts:ob,o:Ab})}plus(Z){if(!this.isValid)return this;Z=Qb.fromDurationLike(Z);return kb(this,ua(this,Z))}minus(Z){if(!this.isValid)return this;Z=Qb.fromDurationLike(Z).negate();return kb(this,ua(this,Z))}startOf(Z){if(!this.isValid)return this;const na={};Z=Qb.normalizeUnit(Z);switch(Z){case "years":na.month=
1;case "quarters":case "months":na.day=1;case "weeks":case "days":na.hour=0;case "hours":na.minute=0;case "minutes":na.second=0;case "seconds":na.millisecond=0}"weeks"===Z&&(na.weekday=1);"quarters"===Z&&(na.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(na)}endOf(Z){return this.isValid?this.plus({[Z]:1}).startOf(Z).minus(1):this}toFormat(Z,na={}){return this.isValid?Ic.create(this.loc.redefaultToEN(na)).formatDateTimeFromString(this,Z):"Invalid DateTime"}toLocaleString(Z=Jb,na={}){return this.isValid?
Ic.create(this.loc.clone(na),Z).formatDateTime(this):"Invalid DateTime"}toLocaleParts(Z={}){return this.isValid?Ic.create(this.loc.clone(Z),Z).formatDateTimeParts(this):[]}toISO({format:Z="extended",suppressSeconds:na=!1,suppressMilliseconds:Ea=!1,includeOffset:Qa=!0,extendedZone:Ua=!1}={}){if(!this.isValid)return null;Z="extended"===Z;let cb=Cb(this,Z);return cb=cb+"T"+Db(this,Z,na,Ea,Qa,Ua)}toISODate({format:Z="extended"}={}){return this.isValid?Cb(this,"extended"===Z):null}toISOWeekDate(){return hb(this,
"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:Z=!1,suppressSeconds:na=!1,includeOffset:Ea=!0,includePrefix:Qa=!1,extendedZone:Ua=!1,format:cb="extended"}={}){return this.isValid?(Qa?"T":"")+Db(this,"extended"===cb,na,Z,Ea,Ua):null}toRFC2822(){return hb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return hb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Cb(this,!0):null}toSQLTime({includeOffset:Z=!0,includeZone:na=!1,includeOffsetSpace:Ea=!0}={}){let Qa="HH:mm:ss.SSS";
if(na||Z)Ea&&(Qa+=" "),na?Qa+="z":Z&&(Qa+="ZZ");return hb(this,Qa,!0)}toSQL(Z={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(Z)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(Z={}){if(!this.isValid)return{};
const na={...this.c};Z.includeConfig&&(na.outputCalendar=this.outputCalendar,na.numberingSystem=this.loc.numberingSystem,na.locale=this.loc.locale);return na}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(Z,na="milliseconds",Ea={}){if(!this.isValid||!Z.isValid)return Qb.invalid("created by diffing an invalid DateTime");Ea={locale:this.locale,numberingSystem:this.numberingSystem,...Ea};const Qa=(Array.isArray(na)?na:[na]).map(Qb.normalizeUnit);na=Z.valueOf()>this.valueOf();Z=Ba(na?this:
Z,na?Z:this,Qa,Ea);return na?Z.negate():Z}diffNow(Z="milliseconds",na={}){return this.diff(gc.now(),Z,na)}until(Z){return this.isValid?Jc.fromDateTimes(this,Z):this}hasSame(Z,na){if(!this.isValid)return!1;const Ea=Z.valueOf();Z=this.setZone(Z.zone,{keepLocalTime:!0});return Z.startOf(na)<=Ea&&Ea<=Z.endOf(na)}equals(Z){return this.isValid&&Z.isValid&&this.valueOf()===Z.valueOf()&&this.zone.equals(Z.zone)&&this.loc.equals(Z.loc)}toRelative(Z={}){if(!this.isValid)return null;const na=Z.base||gc.fromObject({},
{zone:this.zone}),Ea=Z.padding?this<na?-Z.padding:Z.padding:0;let Qa="years months days hours minutes seconds".split(" "),Ua=Z.unit;Array.isArray(Z.unit)&&(Qa=Z.unit,Ua=void 0);return zc(na,this.plus(Ea),{...Z,numeric:"always",units:Qa,unit:Ua})}toRelativeCalendar(Z={}){return this.isValid?zc(Z.base||gc.fromObject({},{zone:this.zone}),this,{...Z,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...Z){if(!Z.every(gc.isDateTime))throw new lb("min requires all arguments be DateTimes");
return z(Z,na=>na.valueOf(),Math.min)}static max(...Z){if(!Z.every(gc.isDateTime))throw new lb("max requires all arguments be DateTimes");return z(Z,na=>na.valueOf(),Math.max)}static fromFormatExplain(Z,na,Ea={}){const {locale:Qa=null,numberingSystem:Ua=null}=Ea;Ea=Ac.fromOpts({locale:Qa,numberingSystem:Ua,defaultToEN:!0});return gb(Ea,Z,na)}static fromStringExplain(Z,na,Ea={}){return gc.fromFormatExplain(Z,na,Ea)}static get DATE_SHORT(){return Jb}static get DATE_MED(){return Ub}static get DATE_MED_WITH_WEEKDAY(){return nc}static get DATE_FULL(){return rc}static get DATE_HUGE(){return Rb}static get TIME_SIMPLE(){return pc}static get TIME_WITH_SECONDS(){return sc}static get TIME_WITH_SHORT_OFFSET(){return Gc}static get TIME_WITH_LONG_OFFSET(){return Rc}static get TIME_24_SIMPLE(){return tc}static get TIME_24_WITH_SECONDS(){return $c}static get TIME_24_WITH_SHORT_OFFSET(){return qd}static get TIME_24_WITH_LONG_OFFSET(){return Id}static get DATETIME_SHORT(){return rd}static get DATETIME_SHORT_WITH_SECONDS(){return Ud}static get DATETIME_MED(){return Wc}static get DATETIME_MED_WITH_SECONDS(){return Vd}static get DATETIME_MED_WITH_WEEKDAY(){return Wd}static get DATETIME_FULL(){return Nd}static get DATETIME_FULL_WITH_SECONDS(){return Ec}static get DATETIME_HUGE(){return Xd}static get DATETIME_HUGE_WITH_SECONDS(){return Yd}}
u.DateTime=gc;u.Info=aa;u.Interval=Jc})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(u,n,h){function r(c){c||(c=h.getLocale());let d=c in e;if(!d){const k=c.split("-");1<k.length&&k[0]in e&&(c=k[0],d=!0);d||(c="en")}const [f,l,m="#,##0.###"]=e[c];return{decimal:f,group:l,pattern:m}}function v(c,d,f){f=f||{};!0===f.places&&(f.places=0);Infinity===f.places&&(f.places=6);d=d.split(".");var l="string"===typeof f.places&&f.places.indexOf(","),m=f.places;l?m=f.places.substring(l+
1):0<=m||(m=(d[1]||[]).length);0>f.round||(c=Number(c.toFixed(Number(m))));c=String(Math.abs(c)).split(".");const k=c[1]||"";d[1]||f.places?(l&&(f.places=f.places.substring(0,l)),l=void 0!==f.places?f.places:d[1]&&d[1].lastIndexOf("0")+1,l>k.length&&(c[1]=k.padEnd(Number(l),"0")),m<k.length&&(c[1]=k.substr(0,Number(m)))):c[1]&&c.pop();m=d[0].replace(",","");l=m.indexOf("0");-1!==l&&(l=m.length-l,l>c[0].length&&(c[0]=c[0].padStart(l,"0")),m.includes("#")||(c[0]=c[0].substr(c[0].length-l)));m=d[0].lastIndexOf(",");
let q,t;-1!==m&&(q=d[0].length-m-1,d=d[0].substr(0,m),m=d.lastIndexOf(","),-1!==m&&(t=d.length-m-1));d=[];for(m=c[0];m;)l=m.length-q,d.push(0<l?m.substr(l):m),m=0<l?m.slice(0,l):"",t&&(q=t,t=void 0);c[0]=d.reverse().join(f.group||",");return c.join(f.decimal||".")}function z(c){c=c||{};var d=r(c.locale);const f=c.pattern||d.pattern,l=d.group,m=d.decimal;let k=1;if(f.includes("%"))k/=100;else if(f.includes("\u2030"))k/=1E3;else if(f.includes("\u00a4"))throw Error("currency notation not supported");
d=f.split(";");1===d.length&&d.push("-"+d[0]);return{regexp:a(d,q=>{q="(?:"+n.escapeRegExpString(q,".")+")";return q.replace(b,t=>{const w={signed:!1,separator:c.strict?l:[l,""],fractional:c.fractional,decimal:m,exponent:!1};t=t.split(".");let A=c.places;1===t.length&&1!==k&&(t[1]="###");1===t.length||0===A?w.fractional=!1:(void 0===A&&(A=c.pattern?t[1].lastIndexOf("0")+1:Infinity),A&&null==c.fractional&&(w.fractional=!0),!c.places&&A<t[1].length&&(A+=","+t[1].length),w.places=A);t=t[0].split(",");
1<t.length&&(w.groupSize=t.pop().length,1<t.length&&(w.groupSize2=t.pop().length));return"("+p(w)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:l,decimal:m,factor:k}}function p(c){c=c||{};"places"in c||(c.places=Infinity);"string"!==typeof c.decimal&&(c.decimal=".");"fractional"in c&&!/^0/.test(String(c.places))||(c.fractional=[!0,!1]);"exponent"in c||(c.exponent=[!0,!1]);"eSigned"in c||(c.eSigned=[!0,!1]);var d=g(c);const f=a(c.fractional,m=>{let k="";m&&0!==c.places&&(k="\\"+c.decimal,k=Infinity===
c.places?"(?:"+k+"\\d+)?":k+("\\d{"+c.places+"}"));return k},!0),l=a(c.exponent,m=>m?"([eE]"+g({signed:c.eSigned})+")":"");d+=f;f&&(d="(?:(?:"+d+")|(?:"+f+"))");return d+l}function g(c){c=c||{};"signed"in c||(c.signed=[!0,!1]);"separator"in c?"groupSize"in c||(c.groupSize=3):c.separator="";const d=a(c.signed,l=>l?"[-+]":"",!0),f=a(c.separator,l=>{if(!l)return"(?:\\d+)";l=n.escapeRegExpString(l);" "===l?l="\\s":"\u00a0"===l&&(l="\\s\\xa0");const m=c.groupSize,k=c.groupSize2;return k?(l="(?:0|[1-9]\\d{0,"+
(k-1)+"}(?:["+l+"]\\d{"+k+"})*["+l+"]\\d{"+m+"})",0<m-k?"(?:"+l+"|(?:0|[1-9]\\d{0,"+(m-1)+"}))":l):"(?:0|[1-9]\\d{0,"+(m-1)+"}(?:["+l+"]\\d{"+m+"})*)"},!0);return d+f}const e={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",",
"."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},b=/[#0,]*[#0](?:\.0*#*)?/,a=(c,d,f)=>{if(!(c instanceof Array))return d(c);const l=[];for(let m=0;m<c.length;m++)l.push(d(c[m]));
c=l.join("|");return"("+(f?"?:":"")+c+")"};u._parseInfo=z;u.format=function(c,d){d={...d};var f=r(d.locale);d.customs=f;var l=d.pattern||f.pattern;if(isNaN(c)||Infinity===Math.abs(c))return null;{d=d||{};f=d.customs.group;const k=d.customs.decimal;l=l.split(";");var m=l[0];l=l[0>c?1:0]||"-"+m;if(l.includes("%"))c*=100;else if(l.includes("\u2030"))c*=1E3;else{if(l.includes("\u00a4"))throw Error("currency notation not supported");if(l.includes("E"))throw Error("exponential notation not supported");
}const q=b;m=m.match(q);if(!m)throw Error("unable to find a number expression in pattern: "+l);!1===d.fractional&&(d.places=0);c=l.replace(q,v(c,m[0],{decimal:k,group:f,places:d.places,round:d.round}))}return c};u.getCustoms=r;u.parse=function(c,d){d=z(d);c=(new RegExp("^"+d.regexp+"$")).exec(c);if(!c)return NaN;let f=c[1];if(!c[1]){if(!c[2])return NaN;f=c[2];d.factor*=-1}f=f.replace(new RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,".");return Number(f)*d.factor};u.regexp=function(c){return z(c).regexp};
Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../../geometry/Extent","../../../layers/support/Field"],function(u,n,h){function r(v){return v instanceof Date}u.FeatureServiceDatabaseType=void 0;(function(v){v[v.Standardised=0]="Standardised";v[v.StandardisedNoInterval=1]="StandardisedNoInterval";v[v.SqlServer=2]="SqlServer";v[v.Oracle=3]="Oracle";v[v.Postgres=4]="Postgres";v[v.PGDB=
5]="PGDB";v[v.FILEGDB=6]="FILEGDB";v[v.NotEvaluated=7]="NotEvaluated"})(u.FeatureServiceDatabaseType||(u.FeatureServiceDatabaseType={}));u.IdState=void 0;(function(v){v[v.InFeatureSet=0]="InFeatureSet";v[v.NotInFeatureSet=1]="NotInFeatureSet";v[v.Unknown=2]="Unknown"})(u.IdState||(u.IdState={}));u.callback=function(v,z){return function(){try{v.apply(null,arguments)}catch(p){z.reject(p)}}};u.cloneAttributes=function(v){const z={};for(const p in v)z[p]=v[p];return z};u.cloneField=function(v){return h.fromJSON(v.toJSON())};
u.convertLinearUnitsToCode=function(v){if(void 0===v)return null;if("number"===typeof v||"number"===typeof v)return v;switch(v.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};u.convertSquareUnitsToCode=function(v){if(void 0===v)return null;if("number"===typeof v)return v;switch(v.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
u.defaultMaxRecords=1E3;u.equalityTest=function(v,z){return v===z?!0:r(v)&&r(z)?v.getTime()===z.getTime():!1};u.errback=function(v){return function(z){v.reject(z)}};u.esriFieldToJson=function(v){return v.toJSON?v.toJSON():v};u.extractServiceUrl=function(v){if(void 0===v)return"";v=v.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");v=v.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return v=v.split("?")[0]};u.isArray=function(v){return v instanceof Array};u.isBoolean=function(v){return"boolean"===
typeof v};u.isDate=r;u.isNumber=function(v){return"number"===typeof v};u.isString=function(v){return"string"===typeof v||v instanceof String};u.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID",
"global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",
esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};u.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};u.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",
polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};u.sameGeomType=function(v,z){return v===z||"point"===v&&"esriGeometryPoint"===z||"polyline"===v&&"esriGeometryPolyline"===z||"polygon"===v&&"esriGeometryPolygon"===
z||"extent"===v&&"esriGeometryEnvelope"===z||"multipoint"===v&&"esriGeometryMultipoint"===z||"point"===z&&"esriGeometryPoint"===v||"polyline"===z&&"esriGeometryPolyline"===v||"polygon"===z&&"esriGeometryPolygon"===v||"extent"===z&&"esriGeometryEnvelope"===v||"multipoint"===z&&"esriGeometryMultipoint"===v?!0:!1};u.shapeExtent=function(v){if(null===v)return null;switch(v.type){case "polygon":case "multipoint":case "polyline":return v.extent;case "point":return new n({xmin:v.x,ymin:v.y,xmax:v.x,ymax:v.y,
spatialReference:v.spatialReference});case "extent":return v}return null};u.stableStringify=function(v,z){z||(z={});"function"===typeof z&&(z={cmp:z});const p="boolean"===typeof z.cycles?z.cycles:!1,g=z.cmp&&function(b){return function(a){return function(c,d){return b({key:c,value:a[c]},{key:d,value:a[d]})}}}(z.cmp),e=[];return function c(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);
var d;if(Array.isArray(a)){var f="[";for(d=0;d<a.length;d++)d&&(f+=","),f+=c(a[d])||"null";return f+"]"}if(null===a)return"null";if(e.includes(a)){if(p)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var l=e.push(a)-1,m=Object.keys(a).sort(g&&g(a));f="";for(d=0;d<m.length;d++){const k=m[d],q=c(a[k]);q&&(f&&(f+=","),f+=JSON.stringify(k)+":"+q)}e.splice(l,1);return"{"+f+"}"}}(v)};u.toEsriGeometryType=function(v){switch(v){case "point":return"esriGeometryPoint";
case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(u,
n,h,r,v,z,p){function g(t){return`<ul class="esri-widget__list">${t.map(w=>`<li>${"string"===typeof w?p.applyTextFormattingHTML(p.htmlEntities(w)):w}</li>`).join("")}</ul>`}function e(t){return`<table class="esri-widget__table">${t.keys().map(w=>{var A=t.field(w);A="string"===typeof A?p.applyTextFormattingHTML(p.htmlEntities(A)):A;return`<tr><th>${w}</th><td>${A}</td></tr>`}).join("")}</table>`}function b({aggregatedFeatures:t,arcadeUtils:w,featureSetVars:A,context:x,viewInfo:y,map:B,graphic:C,interceptor:D}){A.forEach(F=>
{F=F.toLowerCase();var E={map:B,spatialReference:y.sr,interceptor:D};"$map"===F&&(x.vars[F]=w.convertMapToFeatureSetCollection(E));"$layer"===F&&(x.vars[F]=w.convertFeatureLayerToFeatureSet({layer:C.sourceLayer,spatialReference:y.sr,interceptor:D}));"$datastore"===F&&(x.vars[F]=w.convertServiceUrlToWorkspace({url:C.sourceLayer.url,spatialReference:y.sr,interceptor:D}));if("$aggregatedfeatures"===F){E=C.layer;const {fields:G,objectIdField:O,geometryType:H,spatialReference:K,displayField:P}=E;E=new z({fields:G,
objectIdField:O,geometryType:H,spatialReference:K,displayField:P,..."feature"===E.type?{templates:E.templates,typeIdField:E.typeIdField,types:E.types}:null,source:t});x.vars[F]=w.convertFeatureLayerToFeatureSet({layer:E,spatialReference:y.sr,interceptor:D})}})}function a(){return new Promise((t,w)=>u(["../../../support/arcadeUtils"],t,w))}function c(t){return d.apply(this,arguments)}function d(){d=h._asyncToGenerator(function*({graphic:t,view:w}){const {isAggregate:A,layer:x}=t;if(!A||!x||"2d"!==
(null==w?void 0:w.type))return[];w=yield w.whenLayerView(x);if(!w.createQuery||!w.queryFeatures)return[];const y=w.createQuery();y.aggregateIds=[t.getObjectId()];({features:t}=yield w.queryFeatures(y));return t});return d.apply(this,arguments)}function f(t){return l.apply(this,arguments)}function l(){l=h._asyncToGenerator(function*({expressionInfo:t,arcadeUtils:w,interceptor:A,spatialReference:x,map:y,graphic:B,view:C}){if(!t||!t.expression)return null;const D=w.createSyntaxTree(t.expression),F=k.filter(G=>
w.hasVariable(D,G));[C]=yield Promise.all([c({graphic:B,view:C}),w.loadScriptDependencies(D,!0,F)]);const E=w.getViewInfo({spatialReference:x});x=w.createExecContext(B,E);x.interceptor=A;x.useAsync=!0;b({aggregatedFeatures:C,arcadeUtils:w,featureSetVars:F,context:x,viewInfo:E,map:y,graphic:B,interceptor:A});A=w.createFunction(D,x);return w.executeAsyncFunction(A,x).catch(G=>q.error("arcade-execution-error",{error:G,graphic:B,expressionInfo:t}))});return l.apply(this,arguments)}function m(){m=h._asyncToGenerator(function*({expressionInfos:t,
spatialReference:w,graphic:A,interceptor:x,map:y,view:B}){if(!t||!t.length)return{};const C=yield a(),D={};for(const F of t)D[`expression/${F.name}`]=f({expressionInfo:F,arcadeUtils:C,interceptor:x,spatialReference:w,map:y,graphic:A,view:B});t=yield v.eachAlways(D);w={};for(const F in t)A=t[F].value,A="string"===typeof A?p.applyTextFormattingHTML(p.htmlEntities(A)):Array.isArray(A)?g(A):"esri.arcade.Dictionary"===(null==A?void 0:A.declaredClass)?e(A):A,w[F]=A;return w});return m.apply(this,arguments)}
const k=["$datastore","$map","$layer","$aggregatedfeatures"],q=r.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");n.createCompiledExpression=f;n.createCompiledExpressions=function(t){return m.apply(this,arguments)};n.loadArcadeUtils=a;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C){var D;const F=p.getLogger("esri.widgets.FeatureViewModel"),E={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};v=D=function(G){function O(K){var P=G.call(this,K)||this;P._handles=new z;P._error=null;P._featureAbortController=null;P.graphicChangedThrottled=a.throttle(P._graphicChanged,1,u._assertThisInitialized(P));P._expressionAttributes=null;P._graphicExpressionAttributes=
null;P.abilities={...E};P.content=null;P.contentViewModels=[];P.defaultPopupTemplateEnabled=!1;P.formattedAttributes=null;P.lastEditInfo=null;P.relatedInfos=new Map;P.title="";P.view=null;P._isAllowedContentType=L=>{const {abilities:M}=u._assertThisInitialized(P);return"attachments"===L.type&&M.attachmentsContent||"custom"===L.type&&M.customContent||"fields"===L.type&&M.fieldsContent||"media"===L.type&&M.mediaContent||"text"===L.type&&M.textContent||"expression"===L.type&&M.expressionContent};P._handles.add(b.watch(()=>
[P.graphic,P._effectivePopupTemplate,P.abilities],()=>P.graphicChangedThrottled(),b.initial));return P}u._inheritsLoose(O,G);var H=O.prototype;H.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};H.castAbilities=function(K){return{...E,...K}};H.setActiveMedia=function(K,P){K=this.contentViewModels[K];K instanceof x&&K.setActiveMedia(P)};H.nextMedia=function(K){K=
this.contentViewModels[K];K instanceof x&&K.next()};H.previousMedia=function(K){K=this.contentViewModels[K];K instanceof x&&K.previous()};H._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};H._graphicChanged=function(){var K=u._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:P}=this;if(P){var L=new AbortController;this._featureAbortController=L;try{yield this._queryFeature({signal:L.signal})}catch(M){e.isAbortError(M)||
(this._error=M,F.error("error","The popupTemplate could not be displayed for this feature.",{error:M,graphic:P,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===L&&(this._featureAbortController=null)}});return function(){return K.apply(this,arguments)}}();H._cancelFeatureQuery=function(){const {_featureAbortController:K}=this;K&&K.abort();this._featureAbortController=null};H._compileContentElement=function(K,P){if("attachments"===K.type)return this._compileAttachments(K,
P);if("custom"===K.type)return this._compileCustom(K,P);if("fields"===K.type)return this._compileFields(K,P);if("media"===K.type)return this._compileMedia(K,P);if("text"===K.type)return this._compileText(K,P);if("expression"===K.type)return this._compileExpression(K,P)};H._compileContent=function(K){this._destroyContentViewModels();if(this.graphic)return Array.isArray(K)?K.filter(this._isAllowedContentType).map((P,L)=>this._compileContentElement(P,L)):"string"===typeof K?this._compileText(new k({text:K}),
0).text:K};H._destroyContentViewModels=function(){var K;null==(K=this._handles)?void 0:K.remove("content-view-models");this.contentViewModels.forEach(P=>P&&!P.destroyed&&P.destroy());this._set("contentViewModels",[])};H._setExpressionContentVM=function(K,P){const {formattedAttributes:L}=this,{contentElement:M,contentElementViewModel:J}=K;K=null==M?void 0:M.type;J&&K&&("fields"===K&&(this._createFieldsFormattedAttributes({contentElement:M,contentElementIndex:P,formattedAttributes:L}),J.set(this._createFieldsVMParams(M,
P))),"media"===K&&(this._createMediaFormattedAttributes({contentElement:M,contentElementIndex:P,formattedAttributes:L}),J.set(this._createMediaVMParams(M,P))),"text"===K&&J.set(this._createTextVMParams(M)))};H._compileExpression=function(K,P){const {expressionInfo:L}=K,{graphic:M,map:J,spatialReference:R,view:X}=this,U=new w({expressionInfo:L,graphic:M,interceptor:D.interceptor,map:J,spatialReference:R,view:X});this.contentViewModels[P]=U;this._handles.add(b.watch(()=>U.contentElementViewModel,()=>
this._setExpressionContentVM(U,P),b.initial),"content-view-models");return K};H._compileAttachments=function(K,P){const {graphic:L}=this,{description:M,title:J}=K;this.contentViewModels[P]=new q({graphic:L,...this._compileTitleAndDesc({title:J,description:M})});return K};H._compileCustom=function(K,P){const {graphic:L}=this,{creator:M,destroyer:J}=K;this.contentViewModels[P]=new t({graphic:L,creator:M,destroyer:J});return K};H._compileTitleAndDesc=function({title:K,description:P}){const {_fieldInfoMap:L,
_sourceLayer:M,graphic:J,formattedAttributes:R,_expressionAttributes:X}=this,{attributes:U}=J,V=R.global;return{title:B.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:L,globalAttributes:V,expressionAttributes:X,layer:M,text:K}),description:B.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:L,globalAttributes:V,expressionAttributes:X,layer:M,text:P})}};H._createFieldsVMParams=function(K,P){const {_effectivePopupTemplate:L,formattedAttributes:M}=this,J={...M.global,...M.content[P]};
P=(null==K?void 0:K.fieldInfos)||(null==L?void 0:L.fieldInfos);P=null==P?void 0:P.filter(({fieldName:V})=>B.isExpressionField(V)||B.isRelatedField(V)||J.hasOwnProperty(V));const R=null==L?void 0:L.expressionInfos,{description:X,title:U}=K;return{attributes:J,expressionInfos:R,fieldInfos:P,...this._compileTitleAndDesc({title:U,description:X})}};H._compileFields=function(K,P){const L=K.clone();K=new A(this._createFieldsVMParams(K,P));this.contentViewModels[P]=K;L.fieldInfos=K.formattedFieldInfos.slice(0);
return L};H._createMediaVMParams=function(K,P){const {abilities:L,graphic:M,_fieldInfoMap:J,formattedAttributes:R,_effectivePopupTemplate:X,relatedInfos:U,_sourceLayer:V,_expressionAttributes:Q}=this,{attributes:Y}=M,{description:fa,mediaInfos:da,title:ca}=K;return{abilities:{chartAnimation:L.chartAnimation},activeMediaInfoIndex:K.activeMediaInfoIndex||0,attributes:Y,layer:V,fieldInfoMap:J,formattedAttributes:{...R.global,...R.content[P]},expressionAttributes:Q,mediaInfos:da,popupTemplate:X,relatedInfos:U,
...this._compileTitleAndDesc({title:ca,description:fa})}};H._compileMedia=function(K,P){const L=K.clone();K=new x(this._createMediaVMParams(K,P));L.mediaInfos=K.formattedMediaInfos.slice(0);this.contentViewModels[P]=K;return L};H._createTextVMParams=function(K){const {graphic:P,_fieldInfoMap:L,_sourceLayer:M,_expressionAttributes:J}=this;if(K&&K.text){const {attributes:R}=P;K.text=B.substituteFieldsInLinksAndAttributes({attributes:R,fieldInfoMap:L,globalAttributes:this.formattedAttributes.global,
expressionAttributes:J,layer:M,text:K.text})}return{graphic:P,creator:K.text}};H._compileText=function(K,P){K=K.clone();this.contentViewModels[P]=new t(this._createTextVMParams(K));return K};H._compileLastEditInfo=function(){const {_effectivePopupTemplate:K,_sourceLayer:P,graphic:L}=this;if(K){var {lastEditInfoEnabled:M}=K,J=null==P?void 0:P.editFieldsInfo;if(M&&J)return B.formatEditInfo(J,L.attributes)}};H._compileTitle=function(K){const {_fieldInfoMap:P,_sourceLayer:L,graphic:M,_expressionAttributes:J}=
this,{attributes:R}=M;return B.substituteFieldsInLinksAndAttributes({attributes:R,fieldInfoMap:P,globalAttributes:this.formattedAttributes.global,expressionAttributes:J,layer:L,text:K})};H._getTitle=function(){var K=u._asyncToGenerator(function*(){const {_effectivePopupTemplate:P,graphic:L}=this;return B.graphicCallback(null==P?void 0:P.title,{graphic:L})});return function(){return K.apply(this,arguments)}}();H._getContent=function(){var K=u._asyncToGenerator(function*(){const {_effectivePopupTemplate:P,
graphic:L}=this;return B.graphicCallback(null==P?void 0:P.content,{graphic:L})});return function(){return K.apply(this,arguments)}}();H._queryFeature=function(){var K=u._asyncToGenerator(function*(P){const {_featureAbortController:L,_sourceLayer:M,graphic:J,_effectivePopupTemplate:R,spatialReference:X,map:U,view:V}=this,{content:{value:Q},title:{value:Y}}=yield e.eachAlways({content:this._getContent(),title:this._getTitle()});L===this._featureAbortController&&J&&(yield B.queryUpdatedFeature({graphic:J,
popupTemplate:R,layer:M,spatialReference:X},P),{expressionAttributes:{value:P}}=yield e.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(P),expressionAttributes:y.createCompiledExpressions({expressionInfos:null==R?void 0:R.expressionInfos,spatialReference:X,graphic:J,map:U,interceptor:D.interceptor,view:V})}),L===this._featureAbortController&&J&&(this._expressionAttributes=P,this._graphicExpressionAttributes={...J.attributes,...P},this._set("formattedAttributes",this._createFormattedAttributes(Q)),
this._set("title",this._compileTitle(Y)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(Q)||null)))});return function(P){return K.apply(this,arguments)}}();H._createMediaFormattedAttributes=function({contentElement:K,contentElementIndex:P,formattedAttributes:L}){const {_effectivePopupTemplate:M,graphic:J,relatedInfos:R,_sourceLayer:X,_fieldInfoMap:U,_graphicExpressionAttributes:V}=this;L.content[P]=B.formatAttributes({fieldInfos:null==M?void 0:
M.fieldInfos,graphic:J,attributes:{...V,...K.attributes},layer:X,fieldInfoMap:U,relatedInfos:R})};H._createFieldsFormattedAttributes=function({contentElement:K,contentElementIndex:P,formattedAttributes:L}){if(K.fieldInfos){const {graphic:M,relatedInfos:J,_sourceLayer:R,_fieldInfoMap:X,_graphicExpressionAttributes:U}=this;L.content[P]=B.formatAttributes({fieldInfos:K.fieldInfos,graphic:M,attributes:{...U,...K.attributes},layer:R,fieldInfoMap:X,relatedInfos:J})}};H._createFormattedAttributes=function(K){const {_effectivePopupTemplate:P,
graphic:L,relatedInfos:M,_sourceLayer:J,_fieldInfoMap:R,_graphicExpressionAttributes:X}=this,U={global:B.formatAttributes({fieldInfos:null==P?void 0:P.fieldInfos,graphic:L,attributes:X,layer:J,fieldInfoMap:R,relatedInfos:M}),content:[]};Array.isArray(K)&&K.forEach((V,Q)=>{"fields"===V.type&&this._createFieldsFormattedAttributes({contentElement:V,contentElementIndex:Q,formattedAttributes:U});"media"===V.type&&this._createMediaFormattedAttributes({contentElement:V,contentElementIndex:Q,formattedAttributes:U})});
return U};H._checkForRelatedFeatures=function(K){const {graphic:P,_effectivePopupTemplate:L}=this;return this._queryRelatedInfos(P,B.getAllFieldInfos(L),K)};H._queryRelatedInfos=function(){var K=u._asyncToGenerator(function*(P,L,M){const {relatedInfos:J,_sourceLayer:R}=this;J.clear();const X=g.isSome(R.associatedLayer)?yield R.associatedLayer.load(M):R;if(X){var U=L.filter(Y=>Y&&B.isRelatedField(Y.fieldName));if(U&&U.length){L.forEach(Y=>this._configureRelatedInfo(Y,X));var V=yield C.queryLayerInfos({relatedInfos:J,
layer:X},M);Object.keys(V).forEach(Y=>{var fa;const da=J.get(Y.toString());Y=null==(fa=V[Y])?void 0:fa.value;da&&Y&&(da.layerInfo=Y.data)});var Q=yield C.queryRelatedFeatures({graphic:P,relatedInfos:J,layer:X},M);Object.keys(Q).forEach(Y=>{var fa;C.setRelatedFeatures(null==(fa=Q[Y])?void 0:fa.value,J.get(Y.toString()))})}}});return function(P,L,M){return K.apply(this,arguments)}}();H._configureRelatedInfo=function(K,P){const {relatedInfos:L}=this,M=C.getRelatedFieldInfo(K.fieldName);if(M){var {layerId:J,
fieldName:R}=M;J&&(P=L.get(J.toString())||C.createRelatedInfo(J,P))&&(C.updateRelatedInfo({relatedInfo:P,fieldName:R,fieldInfo:K}),this.relatedInfos.set(J,P))}};u._createClass(O,[{key:"_effectivePopupTemplate",get:function(){return g.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return B.createfieldInfoMap(B.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return B.getSourceLayer(this.graphic)}},
{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(K){this._set("graphic",K?K.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(K){void 0===K?this._clearOverride("spatialReference"):this._override("spatialReference",K)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(K){void 0===K?this._clearOverride("map"):
this._override("map",K)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return O}(v);v.interceptor=new r.FeatureSetQueryInterceptor(B.preLayerQueryCallback,B.preRequestCallback);n.__decorate([c.property()],v.prototype,"_error",void 0);n.__decorate([c.property()],v.prototype,"_featureAbortController",void 0);n.__decorate([c.property({readOnly:!0})],v.prototype,"_effectivePopupTemplate",null);n.__decorate([c.property({readOnly:!0})],v.prototype,"_fieldInfoMap",null);
n.__decorate([c.property({readOnly:!0})],v.prototype,"_sourceLayer",null);n.__decorate([c.property()],v.prototype,"abilities",void 0);n.__decorate([l.cast("abilities")],v.prototype,"castAbilities",null);n.__decorate([c.property({readOnly:!0})],v.prototype,"content",void 0);n.__decorate([c.property({readOnly:!0})],v.prototype,"contentViewModels",void 0);n.__decorate([c.property({type:Boolean})],v.prototype,"defaultPopupTemplateEnabled",void 0);n.__decorate([c.property({readOnly:!0})],v.prototype,"state",
null);n.__decorate([c.property({readOnly:!0})],v.prototype,"formattedAttributes",void 0);n.__decorate([c.property({type:h,value:null})],v.prototype,"graphic",null);n.__decorate([c.property({readOnly:!0})],v.prototype,"lastEditInfo",void 0);n.__decorate([c.property({readOnly:!0})],v.prototype,"relatedInfos",void 0);n.__decorate([c.property()],v.prototype,"spatialReference",null);n.__decorate([c.property({readOnly:!0})],v.prototype,"title",void 0);n.__decorate([c.property()],v.prototype,"map",null);
n.__decorate([c.property({readOnly:!0})],v.prototype,"waitingForContent",null);n.__decorate([c.property()],v.prototype,"view",void 0);return v=D=n.__decorate([m.subclass("esri.widgets.FeatureViewModel")],v)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(u){u.FeatureSetQueryInterceptor=function(n,h){this.preLayerQueryCallback=n;this.preRequestCallback=h;this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{});this.preRequestCallback||(this.preLayerQueryCallback=
r=>{})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(u,
n,h,r,v,z,p,g,e,b,a){u.FeatureContentMixin=c=>{c=function(d){function f(){var l=d.apply(this,arguments)||this;l.renderNodeContent=m=>b.isWidget(m)&&!m.destroyed?a.tsx("div",{key:m},m.render()):m instanceof HTMLElement?a.tsx("div",{key:m,bind:m,afterCreate:l._attachToNode}):b.hasDomNode(m)?a.tsx("div",{key:m,bind:m.domNode,afterCreate:l._attachToNode}):null;return l}n._inheritsLoose(f,d);f.prototype._attachToNode=function(l){l.appendChild(this)};return f}(c);return c=h.__decorate([e.subclass("esri.widgets.Feature.ContentMixin")],
c)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){p=function(m){function k(t,w){t=m.call(this,t,w)||this;t._animationDelay=500;t._animationPromise=null;t.location=null;t.view=null;t.viewModel=new d;t.visible=!1;return t}u._inheritsLoose(k,m);var q=k.prototype;q.initialize=function(){this.own([v.watch(()=>this.visible,t=>this._visibleChange(t))])};q.destroy=function(){this._animationPromise=null};q.show=function(t){const {location:w,promise:A}=t;w&&(this.viewModel.location=w);this.visible=!0;t=()=>this.hide();
A&&A.catch(()=>{}).then(t)};q.hide=function(){this.visible=!1};q.render=function(){var {visible:t}=this,{screenLocation:w}=this.viewModel;w=!!w;t={["esri-spinner--start"]:t&&w,["esri-spinner--finish"]:!t&&w};w=this._getPositionStyles();return l.tsx("div",{class:this.classes("esri-spinner",t),styles:w})};q._visibleChange=function(t){if(t)this.viewModel.screenLocationEnabled=!0;else{var w=r.after(this._animationDelay);this._animationPromise=w;w.catch(()=>{}).then(()=>{this._animationPromise===w&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};q._getPositionStyles=function(){const {screenLocation:t,view:w}=this.viewModel;if(h.isNone(w)||h.isNone(t))return{};const {padding:A}=w;return{left:`${t.x-A.left}px`,top:`${t.y-A.top}px`}};return k}(c);n.__decorate([z.aliasOf("viewModel.location")],p.prototype,"location",void 0);n.__decorate([z.aliasOf("viewModel.view")],p.prototype,"view",void 0);n.__decorate([b.property({type:d})],p.prototype,"viewModel",void 0);n.__decorate([z.aliasOf("viewModel.visible")],p.prototype,
"visible",void 0);return p=n.__decorate([a.subclass("esri.widgets.Spinner")],p)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(u,n,h,r,v,z,p,g){r=function(e){function b(a){a=e.call(this,a)||this;a.visible=
!1;return a}u._inheritsLoose(b,e);return b}(g);n.__decorate([h.property()],r.prototype,"visible",void 0);return r=n.__decorate([p.subclass("esri.widgets.CompassViewModel")],r)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){const c=Symbol("anchorHandles");h=function(f){function l(m){var k=f.call(this,m)||this;k[d]=new r;k.location=null;k.screenLocationEnabled=!1;k.view=null;k[c].add([z.when(()=>v.applySome(k.screenLocationEnabled?k.view:null,q=>[q.size,"3d"===q.type?q.camera:q.viewpoint]),()=>k.notifyChange("screenLocation")),z.watch(()=>k.screenLocation,(q,t)=>{v.isSome(q)&&v.isSome(t)&&k.emit("view-change")})]);return k}u._inheritsLoose(l,f);l.prototype.destroy=function(){this.view=
null;this[c]=v.destroyMaybe(this[c])};u._createClass(l,[{key:"screenLocation",get:function(){const {location:m,view:k,screenLocationEnabled:q}=this;return q&&v.isSome(m)&&v.isSome(k)&&k.ready?k.toScreen(m):null}}]);return l}(h.EventedAccessor);var d=c;n.__decorate([p.property()],h.prototype,"location",void 0);n.__decorate([p.property()],h.prototype,"screenLocation",null);n.__decorate([p.property()],h.prototype,"screenLocationEnabled",void 0);n.__decorate([p.property()],h.prototype,"view",void 0);
return h=n.__decorate([a.subclass("esri.widgets.support.AnchorElementViewModel")],h)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H){const K=z.ofType({key:"type",defaultKeyValue:"button",base:t,typeMap:{button:w,toggle:A}}),P=e.getLogger("esri.widgets.Popup.PopupViewModel");h=function(L){function M(R){R=L.call(this,R)||this;R._handles=new g;R._pendingPromises=new Set;R._fetchFeaturesController=null;R._selectedClusterFeature=null;R.featurePage=null;R.actions=new K;R.activeFeature=null;R.defaultPopupTemplateEnabled=!1;R.autoCloseEnabled=!1;R.autoOpenEnabled=
!0;R.browseClusterEnabled=!1;R.content=null;R.featuresPerPage=20;R.featureViewModelAbilities=null;R.featureViewModels=[];R.highlightEnabled=!0;R.includeDefaultActions=!0;R.selectedClusterBoundaryFeature=new r({symbol:new H({outline:{width:1.5,color:"cyan"},style:"none"})});R.title=null;R.updateLocationEnabled=!1;R.view=null;R.visible=!1;R.zoomFactor=4;R.zoomToLocation=null;return R}u._inheritsLoose(M,L);var J=M.prototype;J.initialize=function(){this._handles.add([a.watch(()=>[this.autoOpenEnabled,
this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),a.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),a.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),a.watch(()=>{var R,X;return null==(R=this.view)?void 0:null==(X=R.animation)?void 0:X.state},R=>this._animationStateChange(R)),a.watch(()=>this.location,R=>this._locationChange(R)),
a.watch(()=>this.selectedFeature,R=>this._selectedFeatureChange(R)),a.watch(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),a.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),a.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",R=>F.triggerAction({event:R,view:this.view})),a.when(()=>
!this.waitingForResult,()=>this._waitingForResultChange(),a.sync),a.watch(()=>{var R,X;return[this.features,null==(R=this.view)?void 0:R.map,null==(X=this.view)?void 0:X.spatialReference]},()=>this._updateFeatureVMs()),a.watch(()=>{var R;return null==(R=this.view)?void 0:R.scale},()=>this._viewScaleChange()),a.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),a.watch(()=>this.browseClusterEnabled,R=>R?this.enableClusterBrowsing():this.disableClusterBrowsing())])};J.destroy=function(){this._cancelFetchingFeatures();
this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};J.centerAtLocation=function(){var {view:R}=this;const X=F.getSelectedTarget(this);return X?this.callGoTo({target:{target:X,scale:R.scale}}):(R=new p("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:X,view:R}),P.error(R),Promise.reject(R))};J.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,
activeFeature:null})};J.fetchFeatures=function(R,X){const {view:U}=this;return U&&R?U.fetchPopupFeatures(R,{event:X&&X.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:X&&X.signal}):(R=new p("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:R,view:U}),P.error(R),Promise.reject(R))};J.open=function(R){R={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...R,visible:!0};var {fetchFeatures:X}=R;delete R.fetchFeatures;
X&&this._setFetchFeaturesPromises(R.location);X=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const U of X)delete R[U];this.set(R)};J.triggerAction=function(R){(R=this.allActions.getItemAt(R))&&!R.disabled&&this.emit("trigger-action",{action:R})};J.next=function(){this.selectedFeatureIndex+=1;return this};J.previous=function(){--this.selectedFeatureIndex;return this};J.disableClusterBrowsing=function(){F.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};J.enableClusterBrowsing=
function(){var R=u._asyncToGenerator(function*(){const {view:X,selectedFeature:U}=this;"2d"!==(null==X?void 0:X.type)?P.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",U):F.isClusterFeature(U)?(yield F.displayClusterExtent(this),yield F.browseAggregateFeatures(this)):P.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",U)});return function(){return R.apply(this,arguments)}}();J._animationStateChange=function(R){this.zoomToLocation||
(D.zoomToFeature.disabled="waiting-for-target"===R)};J._clearBrowsedClusterGraphics=function(){var R;const X=null==(R=this.view)?void 0:R.graphics;X&&(X.remove(this.selectedClusterBoundaryFeature),X.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};J._viewScaleChange=function(){F.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=[this.selectedFeature])};
J._locationChange=function(R){const {selectedFeature:X,updateLocationEnabled:U}=this;U&&R&&(!X||X.geometry)&&this.centerAtLocation()};J._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};J._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};J._setGraphicOnFeatureViewModels=function(){const {features:R,featureCount:X,featurePage:U,featuresPerPage:V,featureViewModels:Q}=this;if(null!==
U){var Y=((U-1)*V+X)%X;Q.slice(Y,Y+V).forEach((fa,da)=>{fa&&!fa.graphic&&(fa.graphic=R[Y+da])})}};J._selectedFeatureChange=function(){var R=u._asyncToGenerator(function*(X){if(X){var {location:U,updateLocationEnabled:V,view:Q}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(Q.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),F.isClusterFeature(X)||(X.symbol=yield x.getDisplayedSymbol(X),this._selectedClusterFeature=X,Q.graphics.add(this._selectedClusterFeature))):
!V&&U||!X.geometry?V&&!X.geometry&&this.centerAtLocation().then(()=>{this.location=Q.center.clone()}):this.location=b.unwrap(this._getPointFromGeometry(X.geometry))}});return function(X){return R.apply(this,arguments)}}();J._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};J._setFetchFeaturesPromises=function(R){return this._fetchFeaturesWithController(this._getScreenPoint(R||this.location)).then(X=>{const {clientOnlyGraphics:U,promisesPerLayerView:V}=X;X=Promise.resolve(U);
const Q=V.map(Y=>Y.promise);this.promises=[X,...Q]})};J._destroyFeatureVMs=function(){this.featureViewModels.forEach(R=>R&&!R.destroyed&&R.destroy());this._set("featureViewModels",[])};J._updateFeatureVMs=function(){const {selectedFeature:R,features:X,featureViewModels:U}=this;F.isClusterFeature(R)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(X&&X.length){var V=U.slice(0),Q=[];X.forEach((Y,fa)=>{if(Y){var da=null;V.some((ha,S)=>{ha&&ha.graphic===Y&&(da=ha,V.splice(S,1));return!!da});
if(da)Q[fa]=da;else{var ca,la;const ha=new C({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(ca=this.view)?void 0:ca.spatialReference,graphic:Y===R?Y:null,map:null==(la=this.view)?void 0:la.map,view:this.view});Q[fa]=ha}}});V.forEach(Y=>Y&&!Y.destroyed&&Y.destroy());this._set("featureViewModels",Q)}};J._getScreenPoint=function(R){const {view:X}=this;return X&&R&&"function"===typeof X.toScreen?X.toScreen(R):null};J._autoOpenEnabledChange=
function(){const {_handles:R,autoOpenEnabled:X}=this;R.remove("auto-fetch-features");if(X&&this.view){const U=this.view.on("click",V=>{"mouse"===V.pointerType&&0!==V.button||this._fetchFeaturesAndOpen(V)},y.ViewEventPriorities.WIDGET);R.add(U,"auto-fetch-features")}};J._cancelFetchingFeatures=function(){const R=this._fetchFeaturesController;R&&R.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};J._fetchFeaturesWithController=function(R,X){this._cancelFetchingFeatures();
const U=new AbortController,{signal:V}=U;this._fetchFeaturesController=U;this.notifyChange("waitingForResult");R=this.fetchFeatures(R,{signal:V,event:X});R.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return R};J._fetchFeaturesAndOpen=function(R){const {screenPoint:X,mapPoint:U}=R,{view:V}=this;this._fetchFeaturesWithController(X,R).then(Q=>{const {clientOnlyGraphics:Y,promisesPerLayerView:fa,location:da}=Q,ca=[Promise.resolve(Y),...fa.map(la=>
la.promise)];V.popup.open({location:da||U,promises:ca});return Q})};J._updatePendingPromises=function(R){R&&this._pendingPromises.has(R)&&(this._pendingPromises.delete(R),this.notifyChange("pendingPromisesCount"))};J._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};J._getPointFromGeometry=function(R){return b.isNone(R)?null:"point"===R.type?R:"extent"===R.type?R.center:"polygon"===R.type?R.centroid:"multipoint"===R.type||"polyline"===R.type?R.extent.center:null};J._getLayerView=function(){var R=
u._asyncToGenerator(function*(X,U){yield X.when();return X.whenLayerView(U)});return function(X,U){return R.apply(this,arguments)}}();J._getHighlightLayer=function(R){const {layer:X,sourceLayer:U}=R;return"map-notes"===(null==U?void 0:U.type)||"subtype-group"===(null==U?void 0:U.type)?U:X};J._getHighlightTarget=function(R,X){X="imagery"===X.type?void 0:"objectIdField"in X&&X.objectIdField;const U=R.attributes;return U&&X&&U[X]||R};J._highlightActiveFeature=function(){var R=u._asyncToGenerator(function*(){this._handles.remove("highlight-active-feature");
const {highlightEnabled:X,view:U,activeFeature:V,visible:Q}=this;if(V&&U&&X&&Q){var Y=this._getHighlightLayer(V);if(Y&&Y instanceof q){var fa=this._getLayerView(U,Y);this._highlightActiveFeaturePromise=fa;var da=yield fa;da&&B.highlightsSupported(da)&&this._highlightActiveFeaturePromise===fa&&this.activeFeature&&this.highlightEnabled&&(Y=da.highlight(this._getHighlightTarget(V,Y)),this._handles.add(Y,"highlight-active-feature"))}}});return function(){return R.apply(this,arguments)}}();J._highlightSelectedFeature=
function(){var R=u._asyncToGenerator(function*(){this._handles.remove("highlight-selected-feature");const {selectedFeature:X,highlightEnabled:U,view:V,visible:Q}=this;if(X&&V&&U&&Q){var Y=this._getHighlightLayer(X);if(Y&&Y instanceof q){var fa=this._getLayerView(V,Y);this._highlightSelectedFeaturePromise=fa;var da=yield fa;da&&B.highlightsSupported(da)&&this._highlightSelectedFeaturePromise===fa&&this.selectedFeature&&this.highlightEnabled&&this.visible&&(Y=da.highlight(this._getHighlightTarget(X,
Y)),this._handles.add(Y,"highlight-selected-feature"))}}});return function(){return R.apply(this,arguments)}}();J._updateFeatures=function(R){const {features:X}=this;R&&R.length&&(X.length?(R=R.filter(U=>!X.includes(U)),this.features=X.concat(R)):this.features=R)};u._createClass(M,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(R=>R.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const R=
this._get("allActions")||new K;R.removeAll();const {actions:X,defaultActions:U,defaultPopupTemplateEnabled:V,includeDefaultActions:Q,selectedFeature:Y}=this;var fa=Q?U.concat(X):X;const da=Y&&("function"===typeof Y.getEffectivePopupTemplate&&Y.getEffectivePopupTemplate(V)||Y.popupTemplate),ca=da&&da.actions;(fa=da&&da.overwriteActions?ca:ca?ca.concat(fa):fa)&&fa.filter(Boolean).forEach(la=>R.add(la));return R}},{key:"defaultActions",get:function(){const R=this._get("defaultActions")||new K;R.removeAll();
R.addMany(F.isClusterFeature(this.selectedFeature)?[D.zoomToClusteredFeatures.clone(),D.browseClusteredFeatures.clone()]:[D.zoomToFeature.clone()]);return R}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(R){R=R||[];this._set("features",R);const {pendingPromisesCount:X,promiseCount:U,selectedFeatureIndex:V}=this,Q=U&&R.length;Q&&X&&-1===V?this.selectedFeatureIndex=0:Q&&-1!==V||(this.selectedFeatureIndex=
R.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(R){const X=this.get("view.spatialReference.isWebMercator");R&&R.get("spatialReference.isWGS84")&&X&&(R=k.geographicToWebMercator(R));this._set("location",R)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},
{key:"promises",get:function(){return this._get("promises")||[]},set:function(R){this._pendingPromises.clear();this.features=[];Array.isArray(R)&&R.length?(this._set("promises",R),R=R.slice(0),R.forEach(X=>{this._pendingPromises.add(X);X.then(U=>{this._pendingPromises.has(X)&&this._updateFeatures(U);this._updatePendingPromises(X)},()=>this._updatePendingPromises(X))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:R,selectedFeatureIndex:X}=
this;return-1===X?null:R[X]||null}},{key:"selectedFeatureIndex",get:function(){const R=this._get("selectedFeatureIndex");return"number"===typeof R?R:-1},set:function(R){const {featureCount:X}=this;R=isNaN(R)||-1>R||!X?-1:(R+X)%X;this.activeFeature=null;this._set("selectedFeatureIndex",R)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return M}(G.GoToMixin(E));
n.__decorate([c.property()],h.prototype,"featurePage",void 0);n.__decorate([c.property()],h.prototype,"isLoadingFeature",null);n.__decorate([c.property({type:K})],h.prototype,"actions",void 0);n.__decorate([c.property({readOnly:!0})],h.prototype,"active",null);n.__decorate([c.property()],h.prototype,"activeFeature",void 0);n.__decorate([c.property({readOnly:!0})],h.prototype,"allActions",null);n.__decorate([c.property({type:Boolean})],h.prototype,"defaultPopupTemplateEnabled",void 0);n.__decorate([c.property()],
h.prototype,"autoCloseEnabled",void 0);n.__decorate([c.property()],h.prototype,"autoOpenEnabled",void 0);n.__decorate([c.property()],h.prototype,"browseClusterEnabled",void 0);n.__decorate([c.property()],h.prototype,"content",void 0);n.__decorate([c.property({type:K,readOnly:!0})],h.prototype,"defaultActions",null);n.__decorate([c.property({readOnly:!0})],h.prototype,"featureCount",null);n.__decorate([c.property()],h.prototype,"features",null);n.__decorate([c.property()],h.prototype,"featuresPerPage",
void 0);n.__decorate([c.property()],h.prototype,"featureViewModelAbilities",void 0);n.__decorate([c.property({readOnly:!0})],h.prototype,"featureViewModels",void 0);n.__decorate([c.property()],h.prototype,"highlightEnabled",void 0);n.__decorate([c.property()],h.prototype,"includeDefaultActions",void 0);n.__decorate([c.property({type:O})],h.prototype,"location",null);n.__decorate([c.property({readOnly:!0})],h.prototype,"pendingPromisesCount",null);n.__decorate([c.property({readOnly:!0})],h.prototype,
"selectedClusterBoundaryFeature",void 0);n.__decorate([c.property({readOnly:!0})],h.prototype,"waitingForResult",null);n.__decorate([c.property({readOnly:!0})],h.prototype,"promiseCount",null);n.__decorate([c.property()],h.prototype,"promises",null);n.__decorate([c.property({value:null,readOnly:!0})],h.prototype,"selectedFeature",null);n.__decorate([c.property({value:-1})],h.prototype,"selectedFeatureIndex",null);n.__decorate([c.property({readOnly:!0})],h.prototype,"selectedFeatureViewModel",null);
n.__decorate([c.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([c.property()],h.prototype,"title",void 0);n.__decorate([c.property()],h.prototype,"updateLocationEnabled",void 0);n.__decorate([c.property()],h.prototype,"view",void 0);n.__decorate([c.property()],h.prototype,"visible",void 0);n.__decorate([c.property()],h.prototype,"zoomFactor",void 0);n.__decorate([c.property()],h.prototype,"zoomToLocation",void 0);n.__decorate([c.property()],h.prototype,"centerAtLocation",null);return h=
n.__decorate([m.subclass("esri.widgets.Popup.PopupViewModel")],h)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),function(u,n,h,r,v,z,p,g,e,b){function a(t,w){if(w&&(t.style.filter=b.getCSSFilterFromEffectList(w),w=w.effects))for(const A of w)if("drop-shadow"===(null==A?void 0:A.type)){0>A.offsetX?t.style.marginLeft=
`${Math.abs(A.offsetX)}px`:t.style.marginRight=`${A.offsetX}px`;break}}function c(t,w){return d.apply(this,arguments)}function d(){d=h._asyncToGenerator(function*(t,w){switch(t.type){case "web-style":var {previewWebStyleSymbol:A}=yield new Promise((x,y)=>u(["./previewWebStyleSymbol"],x,y));return A(t,c,w);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:A}=yield new Promise((x,y)=>u(["./previewSymbol3D"],x,y)),A(t,w);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:A}=
yield new Promise((x,y)=>u(["./previewSymbol2D"],x,y)),A(t,w);case "cim":return{previewCIMSymbol:A}=yield new Promise((x,y)=>u(["./previewCIMSymbol"],x,y)),A(t,w)}});return d.apply(this,arguments)}function f(t){return t&&"opacity"in t?t.opacity*f(t.parent):1}function l(){l=h._asyncToGenerator(function*(t,w){var A,x;if(t){var y=t.sourceLayer;y=null!=(A=v.isSome(w)&&null!=(x=w.useSourceLayer)&&x?y:t.layer)?A:y;A=f(y);if(v.isSome(t.symbol)&&(!v.isSome(w)||!0!==w.ignoreGraphicSymbol))return t="web-style"===
t.symbol.type?yield t.symbol.fetchSymbol({...w,cache:v.isSome(w)?w.webStyleCache:null}):t.symbol.clone(),b.applyColorToSymbol(t,null,A),t;var B=v.isSome(w)&&w.renderer||y&&"renderer"in y&&y.renderer;if(x=B&&"getSymbolAsync"in B?yield B.getSymbolAsync(t,w):null){x="web-style"===x.type?yield x.fetchSymbol({...w,cache:v.isSome(w)?w.webStyleCache:null}):x.clone();if(!("visualVariables"in B&&B.visualVariables&&B.visualVariables.length))return b.applyColorToSymbol(x,null,A),x;"arcadeRequiredForVisualVariables"in
B&&B.arcadeRequiredForVisualVariables&&(v.isNone(w)||v.isNone(w.arcade))&&(w={...v.unwrap(w)},w.arcade=yield z.loadArcade());y=yield new Promise((O,H)=>u(["../../renderers/visualVariables/support/visualVariableUtils"],O,H));var C=[],D=[],F=[],E=[];for(var G of B.visualVariables)switch(G.type){case "color":C.push(G);break;case "opacity":D.push(G);break;case "rotation":E.push(G);break;case "size":G.target||F.push(G)}G=(G=!!C.length&&C[C.length-1])?y.getColor(G,t,w):null;D=(D=!!D.length&&D[D.length-
1])?y.getOpacity(D,t,w):null;null!=A&&(D=null!=D?D*A:A);b.applyColorToSymbol(x,G,D);F.length&&(A=y.getAllSizes(F,t,w),yield b.applySizesToSymbol(x,A));for(const O of E)b.applyRotationToSymbol(x,y.getRotationAngle(O,t,w),O.axis);return x}}});return l.apply(this,arguments)}function m(){m=h._asyncToGenerator(function*(t,w){var A;if(t){var x=f(t.layer||t.sourceLayer);if(v.isSome(t.symbol)&&(!v.isSome(w)||!0!==w.ignoreGraphicSymbol))return t="web-style"===t.symbol.type?yield t.symbol.fetchSymbol(w):t.symbol.clone(),
b.getColorFromSymbol(t,x);var y=v.isSome(w)&&w.renderer||t.get("layer.renderer")||t.get("sourceLayer.renderer"),B=yield y.getSymbolAsync(t,w);if(B){B="web-style"===B.type?yield B.fetchSymbol(w):B.clone();B=b.getColorFromSymbol(B,x);if(!("visualVariables"in y)||"visualVariables"in y&&!y.visualVariables||"visualVariables"in y&&(null==(A=y.visualVariables)||!A.length))return B;y.arcadeRequiredForVisualVariables&&(v.isNone(w)||v.isNone(w.arcade))&&(w={...v.unwrap(w)},w.arcade=yield z.loadArcade());A=
yield new Promise((F,E)=>u(["../../renderers/visualVariables/support/visualVariableUtils"],F,E));var C=[],D=[];for(const F of y.visualVariables)switch(F.type){case "color":C.push(F);break;case "opacity":D.push(F)}y=(y=0<C.length?C[C.length-1]:null)?A.getColor(y,t,w):B;t=(B=0<D.length?D[D.length-1]:null)?A.getOpacity(B,t,w):null;null!=x&&(t=null!=t?t*x:x);return y?b.applyOpacityToColor(y,t):null}}});return m.apply(this,arguments)}let k=null;const q=[255,255,255];n.getDisplayedColor=function(t,w){return m.apply(this,
arguments)};n.getDisplayedSymbol=function(t,w){return l.apply(this,arguments)};n.renderColorRampPreviewHTML=function(t,w={}){var A="horizontal"===w.align;const {width:x=A?75:24,height:y=A?24:75,gradient:B=!0}=w;var C=window.devicePixelRatio,D=x*C,F=y*C;C=document.createElement("canvas");C.width=D;C.height=F;C.style.width=`${x}px`;C.style.height=`${y}px`;const E=C.getContext("2d");var G=A?D:0,O=A?0:F;if(B){const H=E.createLinearGradient(0,0,G,O);A=t.length;const K=1===A?0:1/(A-1);t.forEach((P,L)=>
H.addColorStop(L*K,P.toString()));E.fillStyle=H;E.fillRect(0,0,D,F)}else{D=A?D/t.length:D;F=A?F:F/t.length;O=G=0;for(const H of t)E.fillStyle=H.toString(),E.fillRect(G,O,D,F),G=A?G+D:0,O=A?0:O+F}t=document.createElement("div");t.style.width=`${x}px`;t.style.height=`${y}px`;a(t,null==w?void 0:w.effectList);t.appendChild(C);return t};n.renderDotDensityPreviewHTML=function(t,w,A){const {backgroundColor:x,outline:y,dotSize:B}=t;A=A&&A.swatchSize||g.SymbolSizeDefaults.size;const C=Math.round(A*A/B**2*
.8),D=window.devicePixelRatio;t=document.createElement("canvas");const F=A*D;t.width=F;t.height=F;t.style.width=`${t.width/D}px`;t.style.height=`${t.height/D}px`;const E=t.getContext("2d");x&&(E.fillStyle=x.toCss(!0),E.fillRect(0,0,F,F),E.fill());E.fillStyle=w.toCss(!0);if(k&&k.length/2===C)for(w=0;w<2*C;w+=2)E.fillRect(k[w],k[w+1],B*D,B*D),E.fill();else for(k=[],w=0;w<2*C;w+=2){const G=Math.floor(Math.random()*(F-0+1)),O=Math.floor(Math.random()*(F-0+1));k.push(G,O);E.fillRect(G,O,B*D,B*D);E.fill()}y&&
(y.color&&(E.strokeStyle=y.color.toCss(!0)),E.lineWidth=y.width,E.strokeRect(0,0,F,F));A=new Image(A,A);A.src=t.toDataURL();return A};n.renderPieChartPreviewHTML=function(t,w={}){const A=w.radius||40;var x=2*Math.PI*A,y=t.length;const B=x/y,C=[],D=p.getStroke(w.outline);D&&(D.width*=2);(D||w.backgroundColor)&&C.push({shape:{type:"circle",cx:A,cy:A,r:A},fill:w.backgroundColor,stroke:D,offset:[0,0]});const F=w.values,E=F&&F.length===y&&100===F.reduce((O,H)=>O+H,0),G=[0];for(let O=0;O<y;O++){const H=
E?F[O]*x/100:null;E&&G.push(H+G[O]);C.push({shape:{type:"circle",cx:A,cy:A,r:A/2},fill:[0,0,0,0],stroke:{width:A,dashArray:`${H||B} ${x}`,dashoffset:`-${E?G[O]/2:B/2*O}`,color:t[O]},offset:[0,0]})}y=null;t=2*A+((null==D?void 0:D.width)||0);if(x=w.holePercentage)D&&C.push({shape:{type:"circle",cx:A,cy:A,r:A*x},fill:null,stroke:D,offset:[0,0]}),y=t/2,y=[[{shape:{type:"circle",cx:y,cy:y,r:y},fill:q,stroke:D?{...D,color:q}:null,offset:[0,0]},{shape:{type:"circle",cx:y,cy:y,r:A*x},fill:[0,0,0],stroke:null,
offset:[0,0]}]];return e.renderSymbol([C],[t,t],{effectView:w.effectList,ignoreStrokeWidth:!0,masking:y,rotation:-90})};n.renderPreviewHTML=c;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(u,n){function h(r,v){return Math.round(Math.min(Math.max(r+191.25*v,0),255))}u.SymbolSizeDefaults=void 0;(function(r){r[r.size=22]="size";r[r.lineWidth=50]="lineWidth";r[r.maxSize=
120]="maxSize";r[r.maxOutlineSize=80]="maxOutlineSize";r[r.tallSymbolWidth=20]="tallSymbolWidth"})(u.SymbolSizeDefaults||(u.SymbolSizeDefaults={}));u.adjustColorBrightness=function(r,v){if("type"in r&&("linear"===r.type||"pattern"===r.type))return r;r=new n(r);return new n([h(r.r,v),h(r.g,v),h(r.b,v),r.a])};u.adjustColorComponentBrightness=h;u.getConeShapes=function(r,v){let z=v?u.SymbolSizeDefaults.tallSymbolWidth:r;v=v?4:6;z=z<=u.SymbolSizeDefaults.size?z-.5*v:z-v;v=.15*z;const p=z;r-=v;return[{type:"ellipse",
cx:.5*z,cy:r,rx:.5*z,ry:v},{type:"path",path:[{command:"M",values:[.5*p,0]},{command:"L",values:[p,r]},{command:"L",values:[0,r]},{command:"Z",values:[]}]}]};u.getCubeShapes=function(r,v){let z=v?u.SymbolSizeDefaults.tallSymbolWidth:r;var p=v?4:6;p=z=z<=u.SymbolSizeDefaults.size?z-.5*p:z-p;v=v?.35*z:.5*z;return[{type:"path",path:[{command:"M",values:[.5*p,0]},{command:"L",values:[p,.5*v]},{command:"L",values:[.5*p,v]},{command:"L",values:[0,.5*v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[0,.5*v]},{command:"L",values:[.5*p,v]},{command:"L",values:[.5*p,r]},{command:"L",values:[0,r-.5*v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*p,v]},{command:"L",values:[.5*p,r]},{command:"L",values:[p,r-.5*v]},{command:"L",values:[p,.5*v]},{command:"Z",values:[]}]}]};u.getCylinderShapes=function(r,v){var z=v?u.SymbolSizeDefaults.tallSymbolWidth:r;v=v?4:6;z=z<=u.SymbolSizeDefaults.size?z-.5*v:z-v;v=.5*z;const p=.15*z;r-=p;return[{type:"ellipse",cx:.5*z,cy:r,rx:v,
ry:p},{type:"path",path:[{command:"M",values:[0,p]},{command:"L",values:[0,r]},{command:"L",values:[z,r]},{command:"L",values:[z,p]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*z,cy:p,rx:v,ry:p}]};u.getDiamondShapes=function(r){var v=r;v=v<u.SymbolSizeDefaults.size?v-2:v-4;const z=Math.floor(r/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*v,0]},{command:"L",values:[v,.5*r-z]},{command:"L",values:[.45*v-z,.5*r+z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*
v,0]},{command:"L",values:[.45*v-z,.5*r+z]},{command:"L",values:[0,.5*r-z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*r-z]},{command:"L",values:[.45*v-z,.5*r+z]},{command:"L",values:[.45*v,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*v,r]},{command:"L",values:[v,.5*r-z]},{command:"L",values:[.45*v-z,.5*r+z]},{command:"Z",values:[]}]}]};u.getExtrudeSymbolShapes=function(r){const v=u.SymbolSizeDefaults.size;r*=.5;return[{type:"path",path:[{command:"M",
values:[0,.35*v]},{command:"L",values:[.3*v,.7*v]},{command:"L",values:[.3*v,.7*v+r]},{command:"L",values:[0,.7*v+r-.35*v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*v,.7*v]},{command:"L",values:[.3*v,.7*v+r]},{command:"L",values:[v,r]},{command:"L",values:[v,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*v,0]},{command:"L",values:[v,0]},{command:"L",values:[.3*v,.7*v]},{command:"L",values:[0,.35*v]},{command:"Z",values:[]}]}]};u.getInvertedConeShapes=
function(r){let v=r;v=v<u.SymbolSizeDefaults.size?v-3:v-6;const z=.15*v,p=v;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[p,0]},{command:"L",values:[.5*p,r-z]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*v,cy:0,rx:.5*v,ry:z}]};u.getPathSymbolShapes=function(r,v,z){var p=u.SymbolSizeDefaults.size;let g=p,e=p;1>r?g*=.75:1<r&&(e*=1.25);r=p;v&&z&&(g=e=r=p=0);return[{type:"path",path:[{command:"M",values:[r,0]},{command:"L",values:[z?r:.875*r,0]},{command:"L",values:[z?
g-.5*r:0,e-.5*p]},{command:"L",values:[g-.5*r,e-.5*p]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r,0]},{command:"L",values:[r,v?0:.125*p]},{command:"L",values:[g-.5*r,v?e-.5*p:p]},{command:"L",values:[g-.5*r,e-.5*p]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[g-.5*r,e-.5*p]},{command:"L",values:[z?g-.5*r:0,e-.5*p]},{command:"L",values:[z?g-.5*r:0,v?e-.5*p:p]},{command:"L",values:[g-.5*r,v?e-.5*p:p]},{command:"Z",values:[]}]}]};u.getTetrahedronShapes=
function(r){var v=r;v=v<u.SymbolSizeDefaults.size?v-1:v-2;return[{type:"path",path:[{command:"M",values:[.45*r,0]},{command:"L",values:[r,v]},{command:"L",values:[.45*r,.6*v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*r,0]},{command:"L",values:[.45*r,.6*v]},{command:"L",values:[0,v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,v]},{command:"L",values:[.45*r,.6*v]},{command:"L",values:[r,v]},{command:"Z",values:[]}]}]};u.getWaterSymbolShapes=function(){return[{type:"path",
path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
u.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(u,n,h,r,v,z,p,g,e,b){function a(d,f,l){return d?h(d,{responseType:"image"}).then(m=>{m=m.data;const k=m.width,q=m.height,t=k/q;let w=f;l&&(w=Math.min(w,Math.max(k,q)));return{image:m,width:1>=t?Math.ceil(w*t):w,height:1>=t?w:Math.ceil(w/t)}}):Promise.reject(new v("renderUtils: imageDataSize","href not provided."))}const c=g.createProjector();u.renderSymbol=function(d,f,l){const m=Math.ceil(f[0]);f=Math.ceil(f[1]);if(!d.some(q=>!!q.length))return null;const k=l&&l.node||document.createElement("div");
null!=l.opacity&&(k.style.opacity=l.opacity.toString());null!=l.effectView&&(k.style.filter=b.getCSSFilterFromEffectList(l.effectView));c.append(k,e.renderSVG.bind(null,d,m,f,l));return k};u.tintImageWithColor=function(d,f,l,m,k){return a(d,f,k).then(q=>{const t=q.width?q.width:f,w=q.height?q.height:f;var A;if(A=q.image)A=l&&"ignore"!==m?"multiply"===m&&255===l.r&&255===l.g&&255===l.b&&1===l.a?!1:!0:!1;if(A){var x=q.image.width,y=q.image.height;z("edge")&&/\.svg$/i.test(d)&&(--x,--y);A=Math.ceil(t);
var B=Math.ceil(w);var C=document.createElement("canvas");C.width=A;C.height=B;C.style.width=A+"px";C.style.height=B+"px";C=C.getContext("2d");C.clearRect(0,0,A,B);A=C;A.drawImage(q.image,0,0,x,y,0,0,t,w);B=A.getImageData(0,0,t,w);C=[l.r/255,l.g/255,l.b/255,l.a];const F=r.toHSV(l);for(let E=0;E<B.data.length;E+=4){q=B.data;x=E;y=C;var D=F;switch(m){case "multiply":q[x+0]*=y[0];q[x+1]*=y[1];q[x+2]*=y[2];q[x+3]*=y[3];break;default:{const G=r.toHSV({r:q[x+0],g:q[x+1],b:q[x+2]});G.h=D.h;G.s=D.s;G.v=G.v/
100*D.v;D=r.toRGB(G);q[x+0]=D.r;q[x+1]=D.g;q[x+2]=D.b;q[x+3]*=y[3]}}}A.putImageData(B,0,0);d=A.canvas.toDataURL("image/png")}else(A=n.id&&n.id.findCredential(d))&&A.token&&(q=d.includes("?")?"\x26":"?",d=`${d}${q}token=${A.token}`);return{url:d,width:t,height:w}}).catch(()=>({url:d,width:f,height:f}))};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(u,n,h,r,v,z,p){function g(J,R){J*=L/180;return Math.abs(R*Math.sin(J))+Math.abs(R*Math.cos(J))}function e(J){return J.map(R=>`${R.command} ${R.values.join(" ")}`).join(" ").trim()}function b(J,R,X,U){if(J){if("circle"===J.type)return p.tsx("circle",{fill:R,"fill-rule":"evenodd",stroke:X.color,"stroke-width":X.width,"stroke-linecap":X.cap,"stroke-linejoin":X.join,"stroke-dasharray":X.dashArray,"stroke-dashoffset":X.dashOffset,"stroke-miterlimit":"4",cx:J.cx,cy:J.cy,r:J.r});if("ellipse"===
J.type)return p.tsx("ellipse",{fill:R,"fill-rule":"evenodd",stroke:X.color,"stroke-width":X.width,"stroke-linecap":X.cap,"stroke-linejoin":X.join,"stroke-dasharray":X.dashArray,"stroke-miterlimit":"4",cx:J.cx,cy:J.cy,rx:J.rx,ry:J.ry});if("rect"===J.type)return p.tsx("rect",{fill:R,"fill-rule":"evenodd",stroke:X.color,"stroke-width":X.width,"stroke-linecap":X.cap,"stroke-linejoin":X.join,"stroke-dasharray":X.dashArray,"stroke-miterlimit":"4",x:J.x,y:J.y,width:J.width,height:J.height});if("image"===
J.type)return p.tsx("image",{href:J.src,x:J.x,y:J.y,width:J.width,height:J.height,preserveAspectRatio:"none"});if("path"===J.type)return J="string"!==typeof J.path?e(J.path):J.path,p.tsx("path",{fill:R,"fill-rule":"evenodd",stroke:X.color,"stroke-width":X.width,"stroke-linecap":X.cap,"stroke-linejoin":X.join,"stroke-dasharray":X.dashArray,"stroke-miterlimit":"4",d:J});if("text"===J.type)return p.tsx("text",{"alignment-baseline":U.alignBaseline,fill:R,"fill-rule":"evenodd",stroke:X.color,"stroke-width":X.width,
"stroke-linecap":X.cap,"stroke-linejoin":X.join,"stroke-dasharray":X.dashArray,"stroke-miterlimit":"4","text-anchor":U.align,"text-decoration":U.decoration,kerning:U.kerning,rotate:U.rotate,"text-rendering":E,"font-style":U.font.style,"font-variant":U.font.variant,"font-weight":U.font.weight,"font-size":U.font.size,"font-family":U.font.family,x:J.x,y:J.y},J.text)}return null}function a(J){const R={fill:"none",pattern:null,linearGradient:null};if(J)if("type"in J&&"pattern"===J.type){var X=`patternId-${++D}`;
R.fill=`url(#${X})`;R.pattern={id:X,x:J.x,y:J.y,width:J.width,height:J.height,image:{x:0,y:0,width:J.width,height:J.height,href:J.src}}}else"type"in J&&"linear"===J.type?(X=`linearGradientId-${++F}`,R.fill=`url(#${X})`,R.linearGradient={id:X,x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,stops:J.colors.map(U=>({offset:U.offset,color:U.color&&(new n(U.color)).toString()}))}):J&&(J=new n(J),R.fill=J.toString());return R}function c(J){const R={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};
if(J&&(null!=J.width&&(R.width=J.width),J.cap&&(R.cap=J.cap),J.join&&(R.join=J.join.toString()),J.color&&(R.color=(new n(J.color)).toString()),J.dashArray&&(R.dashArray=J.dashArray),J.dashArray&&(R.dashOffset=J.dashoffset),J.style)){let U=null;J.style in P&&(U=P[J.style]);if(Array.isArray(U)){U=U.slice(0);for(var X=0;X<U.length;++X)U[X]*=J.width;if("butt"!==J.cap){for(X=0;X<U.length;X+=2)U[X]-=J.width,1>U[X]&&(U[X]=1);for(X=1;X<U.length;X+=2)U[X]+=J.width}U=U.join(",")}R.dashArray=U}return R}function d(J,
R){const X={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};J&&(X.align=J.align,X.alignBaseline=J.alignBaseline,X.decoration=J.decoration,X.kerning=J.kerning?"auto":"0",X.rotate=J.rotated?"90":"0",X.font.style=R.style||"normal",X.font.variant=R.variant||"normal",X.font.weight=R.weight||"normal",X.font.size=R.size&&R.size.toString()||"10pt",X.font.family=R.family||"serif");return X}function f(J){const {pattern:R,linearGradient:X}=
J;return R?p.tsx("pattern",{id:R.id,patternUnits:"userSpaceOnUse",x:R.x,y:R.y,width:R.width,height:R.height},p.tsx("image",{x:R.image.x,y:R.image.y,width:R.image.width,height:R.image.height,href:R.image.href})):X?(J=X.stops.map((U,V)=>p.tsx("stop",{key:`${V}-stop`,offset:U.offset,"stop-color":U.color})),p.tsx("linearGradient",{id:X.id,gradientUnits:"userSpaceOnUse",x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2},J)):null}function l(J,R){if(!J)return null;const X=[];for(const U of J){const {shape:V,fill:Q,stroke:Y,
font:fa}=U;J=a(Q);const da=c(Y),ca="text"===V.type?d(V,fa):null;X.push(b(V,J.fill,da,ca))}return p.tsx("mask",{id:R,maskUnits:"userSpaceOnUse"},p.tsx("g",null,X))}function m(J,R,X){return v.translate(J,v.identity(J),[R,X])}function k(J,R,X,U,V){v.scale(J,v.identity(J),[R,X]);J[4]=J[4]*R-U*R+U;J[5]=J[5]*X-V*X+V;return J}function q(J,R,X,U){var V=R%360*Math.PI/180;v.rotate(J,v.identity(J),V);R=Math.cos(V);V=Math.sin(V);const Q=J[4],Y=J[5];J[4]=Q*R-Y*V+U*V-X*R+X;J[5]=Y*R+Q*V-X*V-U*R+U;return J}function t(J,
R){H&&"left"in H?(H.left>J&&(H.left=J),H.right<J&&(H.right=J),H.top>R&&(H.top=R),H.bottom<R&&(H.bottom=R)):H={left:J,bottom:R,right:J,top:R}}function w(J){const R=J.args,X=R.length;switch(J.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(J=0;J<X;J+=2)t(R[J],R[J+1]);K.x=R[X-2];K.y=R[X-1];break;case "H":for(J=0;J<X;++J)t(R[J],K.y);K.x=R[X-1];break;case "V":for(J=0;J<X;++J)t(K.x,R[J]);K.y=R[X-1];break;case "m":J=0;"x"in K||(t(K.x=R[0],K.y=R[1]),J=2);for(;J<X;J+=2)t(K.x+=R[J],K.y+=R[J+
1]);break;case "l":case "t":for(J=0;J<X;J+=2)t(K.x+=R[J],K.y+=R[J+1]);break;case "h":for(J=0;J<X;++J)t(K.x+=R[J],K.y);break;case "v":for(J=0;J<X;++J)t(K.x,K.y+=R[J]);break;case "c":for(J=0;J<X;J+=6)t(K.x+R[J],K.y+R[J+1]),t(K.x+R[J+2],K.y+R[J+3]),t(K.x+=R[J+4],K.y+=R[J+5]);break;case "s":case "q":for(J=0;J<X;J+=4)t(K.x+R[J],K.y+R[J+1]),t(K.x+=R[J+2],K.y+=R[J+3]);break;case "A":for(J=0;J<X;J+=7)t(R[J+5],R[J+6]);K.x=R[X-2];K.y=R[X-1];break;case "a":for(J=0;J<X;J+=7)t(K.x+=R[J+5],K.y+=R[J+6])}}function A(J,
R,X){const U=G[J.toLowerCase()];"number"===typeof U&&(U?R.length>=U&&(J={action:J,args:R.slice(0,R.length-R.length%U)},X.push(J),w(J)):(J={action:J,args:[]},X.push(J),w(J)))}function x(J){const R={x:0,y:0,width:0,height:0};if("circle"===J.type)R.x=J.cx-J.r,R.y=J.cy-J.r,R.width=2*J.r,R.height=2*J.r;else if("ellipse"===J.type)R.x=J.cx-J.rx,R.y=J.cy-J.ry,R.width=2*J.rx,R.height=2*J.ry;else if("image"===J.type||"rect"===J.type)R.x=J.x,R.y=J.y,R.width=J.width,R.height=J.height;else if("path"===J.type){{const V=
("string"!==typeof J.path?e(J.path):J.path).match(O),Q=[];H={};K={};if(V){J="";var X=[],U=V.length;for(let Y=0;Y<U;++Y){const fa=V[Y],da=parseFloat(fa);isNaN(da)?(J&&A(J,X,Q),X=[],J=fa):X.push(da)}A(J,X,Q);J={x:0,y:0,width:0,height:0};H&&"left"in H&&(J.x=H.left,J.y=H.top,J.width=H.right-H.left,J.height=H.bottom-H.top)}else J=null}R.x=J.x;R.y=J.y;R.width=J.width;R.height=J.height}return R}function y(J){const R={x:0,y:0,width:0,height:0};let X=null,U=Number.NEGATIVE_INFINITY,V=Number.NEGATIVE_INFINITY;
for(const Q of J)X?(X.x=Math.min(X.x,Q.x),X.y=Math.min(X.y,Q.y),U=Math.max(U,Q.x+Q.width),V=Math.max(V,Q.y+Q.height)):(X=R,X.x=Q.x,X.y=Q.y,U=Q.x+Q.width,V=Q.y+Q.height);X&&(X.width=U-X.x,X.height=V-X.y);return X}function B(J,R,X,U,V,Q,Y,fa,da){var ca=(Y&&Q?g(Q,R):R)/2,la=(Y&&Q?g(Q,X):X)/2;da&&(ca=da[0],la=da[1],ca=(Y&&Q?g(Q,ca):ca)/2,la=(Y&&Q?g(Q,la):la)/2);const ha=J.width+U,S=J.height+U;Y=r.create();da=r.create();var ea=!1;if(V&&0!==ha&&0!==S){V=R!==X?R/X:ha/S;ea=R>X?R:X;let ma=1,sa=1;isNaN(ea)||
(1<V?(ma=ea/ha,sa=ea/V/S):(sa=ea/S,ma=ea*V/ha));v.multiply(da,da,k(Y,ma,sa,ca,la));ea=!0}V=J.x+(ha-U)/2;J=J.y+(S-U)/2;v.multiply(da,da,m(Y,ca-V,la-J));!ea&&(ha>R||S>X)&&(U=ha/R>S/X,R=(U?R:X)/(U?ha:S),v.multiply(da,da,k(Y,R,R,V,J)));Q&&v.multiply(da,da,q(Y,Q,V,J));fa&&v.multiply(da,da,m(Y,fa[0],fa[1]));return`matrix(${da[0]},${da[1]},${da[2]},${da[3]},${da[4]},${da[5]})`}function C(J,R,X){J=null==J?void 0:J.effects.find(fa=>"bloom"===fa.type);if(!J)return null;const {strength:U,radius:V}=J;J=0<U?V:
0;const Q=(U+J)*R,Y=4*U+1;return p.tsx("filter",{id:`bloom${X}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},p.tsx("feMorphology",{operator:"dilate",radius:(U+.5*J)*5**(R/100)*(.4+R/100),in:"SourceGraphic",result:"dilate"}),p.tsx("feGaussianBlur",{in:"dilate",stdDeviation:Q/25,result:"blur"}),p.tsx("feGaussianBlur",{in:"blur",stdDeviation:Q/50,result:"intensityBlur"}),p.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},p.tsx("feFuncR",{type:"linear",
slope:Y}),p.tsx("feFuncG",{type:"linear",slope:Y}),p.tsx("feFuncB",{type:"linear",slope:Y})),p.tsx("feMerge",null,p.tsx("feMergeNode",{in:"intensityBlur"}),p.tsx("feMergeNode",{in:"intensityBrightness"}),p.tsx("feGaussianBlur",{stdDeviation:U/10})))}let D=0,F=0;z=h("android");const E=h("chrome")||z&&4<=z?"auto":"optimizeLegibility",G={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},O=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let H={},K={};const P={solid:"none",shortdash:[4,1],shortdot:[1,1],
shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},L=Math.PI;let M=1;u.computeBBox=y;u.generateFillAttributes=a;u.generateStrokeAttributes=c;u.generateTextAttributes=d;u.getBoundingBox=x;u.getTransformMatrix=B;u.renderDef=f;u.renderSVG=function(J,R,X,U={}){const V=[],Q=[],Y=++M,fa=C(U.effectView,R,Y);var da=null;if(fa){var ca;da=null==(ca=U.effectView)?void 0:ca.effects.find(ea=>"bloom"===ea.type);
da=(da.strength?da.strength+da.radius/2:0)/3;da=[Math.max(R+R*da,10),Math.max(X+X*da,10)]}for(ca=0;ca<J.length;ca++){var la=J[ca];const ea=[];var ha=[],S=0;let ma=0,sa=0;for(const ja of la){const {shape:wa,fill:Ja,stroke:va,font:ra,offset:Ba}=ja;U.ignoreStrokeWidth||(S+=va&&va.width||0);la=a(Ja);const Ha=c(va),ya="text"===wa.type?d(wa,ra):null;V.push(f(la));ea.push(b(wa,la.fill,Ha,ya));ha.push(x(wa));Ba&&(ma+=Ba[0],sa+=Ba[1])}ha=B(y(ha),R,X,S,U.scale,U.rotation,U.useRotationSize,[ma,sa],da);S=null;
U.masking&&(S=`mask-${ca}`,V.push(l(U.masking[ca],S)),S=`url(#${S})`);Q.push(S?p.tsx("g",{mask:S},p.tsx("g",{transform:ha},ea)):p.tsx("g",{transform:ha},ea))}U.useRotationSize&&U.rotation&&(R=g(U.rotation,R),X=g(U.rotation,X));fa&&(R=da[0],X=da[1]);return p.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:R,height:X,style:"display: block;"},fa,p.tsx("defs",null,V),fa?p.tsx("g",{filter:`url(#bloom${Y})`},Q):Q)};u.renderShape=b;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/chunks/mat2df32":function(){define(["exports"],function(u){function n(){const e=new Float32Array(6);e[0]=1;e[3]=1;return e}function h(e){const b=new Float32Array(6);b[0]=e[0];b[1]=e[1];b[2]=e[2];b[3]=e[3];b[4]=e[4];b[5]=e[5];return b}function r(e,b,a,c,d,f){const l=new Float32Array(6);l[0]=e;l[1]=b;l[2]=a;l[3]=c;l[4]=d;l[5]=f;return l}function v(e,b){return new Float32Array(e,b,6)}function z(e,b,a,c){const d=b[c];b=b[c+1];e[c]=a[0]*d+a[2]*b+a[4];e[c+1]=a[1]*d+a[3]*b+a[5]}function p(e,b,a,c=
0,d=0,f=2){for(d=d||b.length/f;c<d;c++)z(e,b,a,c*f)}const g=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:h,fromValues:r,createView:v,transform:z,transformMany:p},Symbol.toStringTag,{value:"Module"}));u.clone=h;u.create=n;u.createView=v;u.fromValues=r;u.mat2df32=g;u.transform=z;u.transformMany=p})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(u,n){function h(B,C){B[0]=C[0];B[1]=C[1];B[2]=C[2];B[3]=C[3];B[4]=C[4];B[5]=C[5];return B}function r(B){B[0]=1;
B[1]=0;B[2]=0;B[3]=1;B[4]=0;B[5]=0;return B}function v(B,C,D,F,E,G,O){B[0]=C;B[1]=D;B[2]=F;B[3]=E;B[4]=G;B[5]=O;return B}function z(B,C){const D=C[0],F=C[1],E=C[2],G=C[3],O=C[4];C=C[5];let H=D*G-F*E;if(!H)return null;H=1/H;B[0]=G*H;B[1]=-F*H;B[2]=-E*H;B[3]=D*H;B[4]=(E*C-G*O)*H;B[5]=(F*O-D*C)*H;return B}function p(B){return B[0]*B[3]-B[1]*B[2]}function g(B,C,D){const F=C[0],E=C[1],G=C[2],O=C[3],H=C[4];C=C[5];const K=D[0],P=D[1],L=D[2],M=D[3],J=D[4];D=D[5];B[0]=F*K+G*P;B[1]=E*K+O*P;B[2]=F*L+G*M;B[3]=
E*L+O*M;B[4]=F*J+G*D+H;B[5]=E*J+O*D+C;return B}function e(B,C,D){const F=C[0],E=C[1],G=C[2],O=C[3],H=C[4];C=C[5];const K=Math.sin(D);D=Math.cos(D);B[0]=F*D+G*K;B[1]=E*D+O*K;B[2]=F*-K+G*D;B[3]=E*-K+O*D;B[4]=H;B[5]=C;return B}function b(B,C,D){const F=C[1],E=C[2],G=C[3],O=C[4],H=C[5],K=D[0];D=D[1];B[0]=C[0]*K;B[1]=F*K;B[2]=E*D;B[3]=G*D;B[4]=O;B[5]=H;return B}function a(B,C,D){const F=C[0],E=C[1],G=C[2],O=C[3],H=C[4];C=C[5];const K=D[0];D=D[1];B[0]=F;B[1]=E;B[2]=G;B[3]=O;B[4]=F*K+G*D+H;B[5]=E*K+O*D+
C;return B}function c(B,C){const D=Math.sin(C);C=Math.cos(C);B[0]=C;B[1]=D;B[2]=-D;B[3]=C;B[4]=0;B[5]=0;return B}function d(B,C){B[0]=C[0];B[1]=0;B[2]=0;B[3]=C[1];B[4]=0;B[5]=0;return B}function f(B,C){B[0]=1;B[1]=0;B[2]=0;B[3]=1;B[4]=C[0];B[5]=C[1];return B}function l(B){return"mat2d("+B[0]+", "+B[1]+", "+B[2]+", "+B[3]+", "+B[4]+", "+B[5]+")"}function m(B){return Math.sqrt(B[0]**2+B[1]**2+B[2]**2+B[3]**2+B[4]**2+B[5]**2+1)}function k(B,C,D){B[0]=C[0]+D[0];B[1]=C[1]+D[1];B[2]=C[2]+D[2];B[3]=C[3]+
D[3];B[4]=C[4]+D[4];B[5]=C[5]+D[5];return B}function q(B,C,D){B[0]=C[0]-D[0];B[1]=C[1]-D[1];B[2]=C[2]-D[2];B[3]=C[3]-D[3];B[4]=C[4]-D[4];B[5]=C[5]-D[5];return B}function t(B,C,D){B[0]=C[0]*D;B[1]=C[1]*D;B[2]=C[2]*D;B[3]=C[3]*D;B[4]=C[4]*D;B[5]=C[5]*D;return B}function w(B,C,D,F){B[0]=C[0]+D[0]*F;B[1]=C[1]+D[1]*F;B[2]=C[2]+D[2]*F;B[3]=C[3]+D[3]*F;B[4]=C[4]+D[4]*F;B[5]=C[5]+D[5]*F;return B}function A(B,C){return B[0]===C[0]&&B[1]===C[1]&&B[2]===C[2]&&B[3]===C[3]&&B[4]===C[4]&&B[5]===C[5]}function x(B,
C){const D=B[0],F=B[1],E=B[2],G=B[3],O=B[4];B=B[5];const H=C[0],K=C[1],P=C[2],L=C[3],M=C[4];C=C[5];return Math.abs(D-H)<=n.EPSILON*Math.max(1,Math.abs(D),Math.abs(H))&&Math.abs(F-K)<=n.EPSILON*Math.max(1,Math.abs(F),Math.abs(K))&&Math.abs(E-P)<=n.EPSILON*Math.max(1,Math.abs(E),Math.abs(P))&&Math.abs(G-L)<=n.EPSILON*Math.max(1,Math.abs(G),Math.abs(L))&&Math.abs(O-M)<=n.EPSILON*Math.max(1,Math.abs(O),Math.abs(M))&&Math.abs(B-C)<=n.EPSILON*Math.max(1,Math.abs(B),Math.abs(C))}const y=Object.freeze(Object.defineProperty({__proto__:null,
copy:h,identity:r,set:v,invert:z,determinant:p,multiply:g,rotate:e,scale:b,translate:a,fromRotation:c,fromScaling:d,fromTranslation:f,str:l,frob:m,add:k,subtract:q,multiplyScalar:t,multiplyScalarAndAdd:w,exactEquals:A,equals:x,mul:g,sub:q},Symbol.toStringTag,{value:"Module"}));u.add=k;u.copy=h;u.determinant=p;u.equals=x;u.exactEquals=A;u.frob=m;u.fromRotation=c;u.fromScaling=d;u.fromTranslation=f;u.identity=r;u.invert=z;u.mat2d=y;u.mul=g;u.multiply=g;u.multiplyScalar=t;u.multiplyScalarAndAdd=w;u.rotate=
e;u.scale=b;u.set=v;u.str=l;u.sub=q;u.subtract=q;u.translate=a})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(u,n){u.extractSafeScaleBounds=function(h){var r,v;const z=h.effectiveScaleRange;h=null!=(r=null==z?void 0:z.minScale)?r:0;r=null!=(v=null==z?void 0:z.maxScale)?v:0;return{minScale:h,maxScale:r}};u.highlightsSupported=function(h){return h&&"function"===typeof h.highlight};u.isScaleRangeActive=function(h,r){return 0<h||0<r};u.occludeesSupported=
function(h){return h&&"function"===typeof h.maskOccludee};u.scaleBoundsPredicate=function(h,r,v){return n.isNone(h)||h>v&&(0===r||h<r)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(u,n){const h=new n({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),r=new n({id:"remove-selected-feature",title:"{messages.remove}",
className:"esri-icon-trash"}),v=new n({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});n=new n({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});u.all=[h,r,n,v];u.browseClusteredFeatures=n;u.removeSelectedFeature=r;u.zoomToClusteredFeatures=v;u.zoomToFeature=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),
function(u,n,h,r,v,z){function p(k){const {selectedFeature:q,location:t,view:w}=k;return w?"3d"===w.type?q||t:k.get("selectedFeature.geometry")||t:null}function g(k){var q,t;return(null==k?void 0:k.isAggregate)&&"cluster"===(null==k?void 0:null==(q=k.sourceLayer)?void 0:null==(t=q.featureReduction)?void 0:t.type)}function e(k,q){if("3d"!==(null==q?void 0:q.type)||!k||"esri.Graphic"!==k.declaredClass)return!0;if((q=q.getViewForGraphic(k))&&"whenGraphicBounds"in q){let t=!1;q.whenGraphicBounds(k,{useViewElevation:!0}).then(w=>
{t=!w||!w.boundingBox||w.boundingBox[0]===w.boundingBox[3]&&w.boundingBox[1]===w.boundingBox[4]&&w.boundingBox[2]===w.boundingBox[5]}).catch(()=>{const w=new h("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:k});m.error(w)});return t}return!0}function b(k){return a.apply(this,arguments)}function a(){a=n._asyncToGenerator(function*(k){const {location:q,selectedFeature:t,view:w,zoomFactor:A}=k,x=p(k);if(!x)throw k=new h("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",
{target:x,view:w}),m.error(k),k;const y=w.scale/A,B=k.get("selectedFeature.geometry")||q,C=B&&"point"===B.type&&e(t,w);z.zoomToFeature.active=!0;z.zoomToFeature.disabled=!0;try{yield k.view.goTo({target:x,scale:C?y:void 0})}finally{z.zoomToFeature.active=!1,z.zoomToFeature.disabled=!1,k.zoomToLocation=null,C&&(k.location=B)}});return a.apply(this,arguments)}function c(k){return d.apply(this,arguments)}function d(){d=n._asyncToGenerator(function*(k){const {selectedFeature:q,view:t}=k;if("2d"!==(null==
t?void 0:t.type))throw k=new h("zoomToCluster:invalid-view","View must be 2d MapView.",{view:t}),m.error(k),k;if(!g(q))throw k=new h("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:q}),m.error(k),k;k=yield t.whenLayerView(q.sourceLayer);const w=k.createQuery();w.aggregateIds=[q.getObjectId()];z.zoomToClusteredFeatures.active=!0;z.zoomToClusteredFeatures.disabled=!0;({extent:k}=yield k.queryExtent(w));yield t.goTo({target:k});
z.zoomToClusteredFeatures.active=!1;z.zoomToClusteredFeatures.disabled=!1});return d.apply(this,arguments)}function f(){f=n._asyncToGenerator(function*(k){const {selectedFeature:q,view:t}=k;var w=yield t.whenLayerView(q.sourceLayer);const A=w.createQuery();A.aggregateIds=[q.getObjectId()];({extent:w}=yield w.queryExtent(A));k.selectedClusterBoundaryFeature.geometry=w;t.graphics.add(k.selectedClusterBoundaryFeature)});return f.apply(this,arguments)}function l(){l=n._asyncToGenerator(function*(k){const {selectedFeature:q,
view:t}=k;k=yield t.whenLayerView(q.sourceLayer);const w=k.createQuery();w.aggregateIds=[q.getObjectId()];z.browseClusteredFeatures.active=!0;z.browseClusteredFeatures.disabled=!0;({features:k}=yield k.queryFeatures(w));z.browseClusteredFeatures.active=!1;z.browseClusteredFeatures.disabled=!1;t.popup.open({features:[q].concat(k),featureMenuOpen:!0})});return l.apply(this,arguments)}const m=r.getLogger("esri.widgets.Popup.PopupViewModel");u.browseAggregateFeatures=function(k){return l.apply(this,arguments)};
u.displayClusterExtent=function(k){return f.apply(this,arguments)};u.getSelectedTarget=p;u.isClusterFeature=g;u.isZoomScreenSize=e;u.removeClusteredFeaturesForBrowsing=function(k){const q=k.features.filter(t=>g(t));q.length&&(k.features=q)};u.triggerAction=k=>{const {event:q,view:t}=k;({action:k}=q);var w=t&&t.popup;if(!k)return Promise.reject(new h("trigger-action:missing-arguments","Event has no action"));if(!w)return Promise.reject(new h("trigger-action:missing-arguments","view.popup is missing"));
const {disabled:A,id:x}=k;if(!x)return Promise.reject(new h("trigger-action:invalid-action","action.id is missing"));if(A)return Promise.reject(new h("trigger-action:invalid-action","Action is disabled"));if(x===z.zoomToFeature.id)return b(w.viewModel).catch(v.throwIfNotAbortError);if(x===z.zoomToClusteredFeatures.id)return c(w.viewModel);if(x===z.browseClusteredFeatures.id)return w.featureMenuOpen=!w.featureMenuOpen,w.viewModel.browseClusterEnabled=!w.viewModel.browseClusterEnabled,Promise.resolve();
w.viewModel.browseClusterEnabled=!1;if(x===z.removeSelectedFeature.id){w.close();({selectedFeature:k}=w);if(!k)return Promise.reject(new h(`trigger-action:${z.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:k}));({sourceLayer:w}=k);w?w.remove(k):t.graphics.remove(k)}return Promise.resolve()};u.zoomToClusterExtent=c;u.zoomToLocation=b;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/Logger ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/set ../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){u.PopupView=c=>{c=function(d){function f(){return d.apply(this,arguments)||this}n._inheritsLoose(f,d);var l=f.prototype;l.fetchPopupFeatures=function(){var m=n._asyncToGenerator(function*(k,q){yield this.when();const {location:t,queryArea:w,layerViewsAndGraphics:A,clientOnlyGraphics:x}=yield this._prepareFetchPopupFeatures(k,q);k=Promise.resolve(x);q=this._queryLayerPopupFeatures(w,A,q);const y=q.map(B=>B.promise);k=v.eachAlwaysValues([k,...y]).then(B=>Array.from(new Set(B.flat())));
return{location:t,clientOnlyGraphics:x,allGraphicsPromise:k,promisesPerLayerView:q}});return function(k,q){return m.apply(this,arguments)}}();l._queryLayerPopupFeatures=function(m,k,q){return k.map(({layerView:t,graphics:w})=>{w={clientGraphics:w,event:r.isSome(q)?q.event:null,signal:r.isSome(q)?q.signal:null,defaultPopupTemplateEnabled:r.isSome(q)?!!q.defaultPopupTemplateEnabled:!1};w=t.fetchPopupFeatures(m,w);return{layerView:t,promise:w}})};l._isValidPopupGraphic=function(m,k){return m&&!!m.getEffectivePopupTemplate(r.isSome(k)&&
k.defaultPopupTemplateEnabled)};l._prepareFetchPopupFeatures=function(){var m=n._asyncToGenerator(function*(k,q){const {clientGraphics:t,queryArea:w,location:A}=yield this._popupHitTestGraphics(k,q);k=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:x,clientOnlyGraphics:y}=this._graphicsPerFetchPopupLayerView(t,k);return{clientOnlyGraphics:y,layerViewsAndGraphics:x,queryArea:w,location:A}});return function(k,q){return m.apply(this,arguments)}}();l._popupHitTestGraphics=function(){var m=
n._asyncToGenerator(function*(k,q){const {results:t,mapPoint:w}=yield this.popupHitTest(k);k=t.filter(x=>"graphic"===x.type&&this._isValidPopupGraphic(x.graphic,q));const A=k.length?k[0].mapPoint:null;return{clientGraphics:k.map(x=>x.graphic),queryArea:w,location:w||A}});return function(k,q){return m.apply(this,arguments)}}();l._getFetchPopupLayerViews=function(){const m=[];this.allLayerViews.forEach(k=>{this._isValidPopupLayerView(k)&&m.push(k)});r.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&
m.push(this.graphicsView);return m.reverse()};l._isValidPopupLayerView=function(m){return r.isSome(m)&&(!("layer"in m)||!m.suspended)&&"fetchPopupFeatures"in m};l._graphicsPerFetchPopupLayerView=function(m,k){const q=[],t=new Map;k=k.map(w=>{const A=[];"layer"in w?t.set(w.layer,A):t.set(w.graphics,A);return{layerView:w,graphics:A}});for(const w of m)(m=t.get(w.layer)||t.get(w.sourceLayer)||null)?m.push(w):q.push(w);return{layerViewsAndGraphics:k,clientOnlyGraphics:q}};return f}(c);return c=h.__decorate([a.subclass("esri.views.PopupView")],
c)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){let m=function(){function k(q,t,w,A){const x=q.targetGeometry,y=t.targetGeometry;A?"string"===typeof A&&(A=d.parse(A)||d.easingFunctions.ease):A=d.easingFunctions.ease;this.easing=A;this.duration=w;this.sCenterX=x.x;this.sCenterY=x.y;this.sScale=q.scale;this.sRotation=q.rotation;this.tCenterX=y.x;this.tCenterY=y.y;this.tScale=t.scale;this.tRotation=t.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-
this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}k.prototype.applyRatio=function(q,t){var w=this.easing(t);let A,x;1<=t?(t=this.tCenterX,A=this.tCenterY,x=this.tRotation,w=this.tScale):(t=this.sCenterX+w*this.dCenterX,A=this.sCenterY+w*this.dCenterY,x=this.sRotation+w*this.dRotation,w=this.sScale+w*this.dScale);q.targetGeometry.x=t;q.targetGeometry.y=A;q.scale=w;q.rotation=x};return k}();h=function(k){function q(w){w=
k.call(this,w)||this;w.duration=200;w.transition=null;w.easing=d.easingFunctions.ease;w.view=null;w.viewpoint=null;w.viewpoint=new r({targetGeometry:new l,scale:0,rotation:0});w._updateTask=z.addFrameTask({postRender:w._postRender.bind(u._assertThisInitialized(w))});w._updateTask.pause();return w}u._inheritsLoose(q,k);var t=q.prototype;t.destroy=function(){this._updateTask.remove();this._updateTask=null};t.animate=function(w,A,x){this.stop();f.copy(this.viewpoint,A);this.transition=new m(this.viewpoint,
w.target,x&&x.duration||this.duration,x&&x.easing||this.easing);A=()=>{this.animation===w&&this._updateTask&&("finished"===w.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};w.when(A,A);this._startTime=performance.now();this._updateTask.resume();return this.animation=w};t.animateContinous=function(w,A){this.stop();this.updateFunction=A;this.viewpoint=w;const x=new c({target:w.clone()});
w=()=>{this.animation===x&&this._updateTask&&(this.updateFunction=this.animation=null)};x.when(w,w);this._startTime=performance.now();this._updateTask.resume();return this.animation=x};t.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};t._postRender=function(w){var A=this.animation;A&&A.state!==c.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,w.deltaTime):(w=(performance.now()-this._startTime)/this.transition.duration,A=1<=w,this.transition.applyRatio(this.viewpoint,
w),A&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return q}(v);n.__decorate([p.property()],h.prototype,"animation",void 0);n.__decorate([p.property()],h.prototype,"duration",void 0);n.__decorate([p.property()],h.prototype,"transition",void 0);n.__decorate([p.property()],h.prototype,"easing",void 0);n.__decorate([p.property()],h.prototype,"view",void 0);n.__decorate([p.property()],h.prototype,"viewpoint",void 0);return h=n.__decorate([a.subclass("esri.views.2d.AnimationManager")],
h)})},"esri/views/2d/viewpointUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,
k){function q(S,ea){return ea.type?b.set(S,ea.x,ea.y):b.copy(S,ea)}function t(S,ea){return Math.max(S.width/Math.max(1,ea[0]),S.height/Math.max(1,ea[1]))*G(S.spatialReference)}function w(S,ea,ma,sa){return A.apply(this,arguments)}function A(){A=n._asyncToGenerator(function*(S,ea,ma,sa){if(!S||Array.isArray(S)&&!S.length)return null;r.isCollection(S)&&(S=S.toArray());if(Array.isArray(S)&&S.length&&"object"===typeof S[0]){var ja=S.every(Ha=>"attributes"in Ha);var wa=S.some(Ha=>!Ha.geometry),Ja=S;if(ja&&
wa&&ea&&ea.allLayerViews){ja=new Map;for(var va of S)S=va.layer,wa=ja.get(S)||[],Ja=va.attributes[S.objectIdField],null!=Ja&&wa.push(Ja),ja.set(S,wa);const Ha=[];ja.forEach((ya,qa)=>{const oa=ea.allLayerViews.find(Aa=>Aa.layer.id===qa.id);if("queryFeatures"in oa){const Aa=qa.createQuery();Aa.objectIds=ya;Aa.returnGeometry=!0;Ha.push(oa.queryFeatures(Aa))}});va=yield Promise.all(Ha);S=[];for(var ra of va)if(ra&&ra.features&&ra.features.length)for(var Ba of ra.features)v.isSome(Ba.geometry)&&S.push(Ba.geometry);
Ja=S}for(const Ha of Ja)sa=yield w(Ha,ea,ma,sa);return sa}if(Array.isArray(S)&&2===S.length&&"number"===typeof S[0]&&"number"===typeof S[1])ja=new f(S);else if(S instanceof d)ja=S;else if("geometry"in S)if(S.geometry)ja=S.geometry;else if(S.layer){const Ha=S.layer;ra=ea.allLayerViews.find(ya=>ya.layer.id===Ha.id);"queryFeatures"in ra&&(Ba=Ha.createQuery(),Ba.objectIds=[S.attributes[Ha.objectIdField]],Ba.returnGeometry=!0,ra=yield ra.queryFeatures(Ba),ja=v.get(ra,"features",0,"geometry"))}if(v.isNone(ja))return null;
ra="point"===ja.type?new c({xmin:ja.x,ymin:ja.y,xmax:ja.x,ymax:ja.y,spatialReference:ja.spatialReference}):ja.extent;if(!ra)return null;l.isLoaded()||l.canProjectWithoutEngine(ra.spatialReference,ma)||(yield l.load());ma=l.project(ra,ma);return ma?sa=sa?sa.union(ma):ma:null});return A.apply(this,arguments)}function x(S){if(S&&(!Array.isArray(S)||"number"!==typeof S[0])&&("object"===typeof S||Array.isArray(S)&&"object"===typeof S[0])){if("layer"in S&&S.layer&&S.layer.minScale&&S.layer.maxScale){var ea=
S.layer;return{min:ea.minScale,max:ea.maxScale}}if(Array.isArray(S)&&S.length&&S.every(ma=>"layer"in ma)){let ma=ea=0;for(const sa of S)(S=sa.layer)&&S.minScale&&S.maxScale&&(ea=S.minScale<ea?S.minScale:ea,ma=S.maxScale>ma?S.maxScale:ma);return ea&&ma?{min:ea,max:ma}:null}}}function y(S,ea){return k.equals(S.wkid?S:S.spatialReference||m.WGS84,ea)?S:l.project(S,ea)}function B(){B=n._asyncToGenerator(function*(S,ea){if(!S||!ea)return new h({targetGeometry:new f,scale:0,rotation:0});let ma=ea.spatialReference;
const {constraints:sa,padding:ja,viewpoint:wa,size:Ja}=ea,va=[ja?Ja[0]-ja.left-ja.right:Ja[0],ja?Ja[1]-ja.top-ja.bottom:Ja[1]];let ra=null;S instanceof h?ra=S:S.viewpoint?ra=S.viewpoint:S.target&&"esri.Viewpoint"===S.target.declaredClass&&(ra=S.target);let Ba=null;if(ra&&ra.targetGeometry)Ba=ra.targetGeometry;else if(S instanceof c)Ba=S;else if(S||S&&("center"in S||"extent"in S||"target"in S))Ba=(yield w(S.center,ea,ma))||(yield w(S.extent,ea,ma))||(yield w(S.target,ea,ma))||(yield w(S,ea,ma));!Ba&&
wa&&wa.targetGeometry?Ba=wa.targetGeometry:!Ba&&ea.extent&&(Ba=ea.extent);if(!ma){var Ha=ea.spatialReference||ea.extent||Ba;ma=Ha.wkid?Ha:Ha.spatialReference||m.WGS84}l.isLoaded()||k.equals(Ba.spatialReference,ma)||l.canProjectWithoutEngine(Ba,ma)||(yield l.load());Ha=y(Ba.center?Ba.center:Ba,ma);var ya=null;ra&&v.isSome(ra.targetGeometry)&&"point"===ra.targetGeometry.type?ya=ra.scale:"scale"in S&&S.scale?ya=S.scale:"zoom"in S&&-1!==S.zoom&&sa&&sa.effectiveLODs?ya=sa.zoomToScale(S.zoom):Array.isArray(Ba)||
"point"===Ba.type||"extent"===Ba.type&&0===Ba.width&&0===Ba.height?(ya=y(ea.extent,ma),ya=v.isSome(ya)?t(ya,va):ea.extent?t(ea.extent,va):wa.scale):ya=t(y(Ba.extent,ma),va);if(ea=x(S))ea.min&&ea.min>ya?ya=ea.min:ea.max&&ea.max<ya&&(ya=ea.max);ea=0;ra?ea=ra.rotation:S.hasOwnProperty("rotation")?ea=S.rotation:wa&&(ea=wa.rotation);S=new h({targetGeometry:Ha,scale:ya,rotation:ea});sa&&(S=sa.fit(S),sa.constrainByGeometry(S),sa.rotationEnabled||(S.rotation=ea));return S});return B.apply(this,arguments)}
function C(S,ea){const ma=S.targetGeometry,sa=ea.targetGeometry;ma.x=sa.x;ma.y=sa.y;ma.spatialReference=sa.spatialReference;S.scale=ea.scale;S.rotation=ea.rotation;return S}function D(S,ea,ma){return ma?b.set(S,.5*(ea[0]-ma.right+ma.left),.5*(ea[1]-ma.bottom+ma.top)):b.scale(S,ea,.5)}function F(S,ea,ma,sa){J(S,ea,ma,sa);return g.invert(S,S)}function E(S){var ea=S.scale;S=S.targetGeometry;S=v.isSome(S)&&k.isValid(S.spatialReference)?1/(39.37*z.getMetersPerUnitForSR(S.spatialReference)*96):1;return ea*
S}function G(S){return k.isValid(S)?39.37*z.getMetersPerUnitForSR(S)*96:1}function O(S){return(S=k.getInfo(S))?S.valid[1]-S.valid[0]:0}const H=180/Math.PI,K=function(){const S=a.create();return function(ea,ma,sa){const ja=ma.targetGeometry;q(S,ja);ma=.5*E(ma);ea.xmin=S[0]-ma*sa[0];ea.ymin=S[1]-ma*sa[1];ea.xmax=S[0]+ma*sa[0];ea.ymax=S[1]+ma*sa[1];ea.spatialReference=ja.spatialReference;return ea}}(),P=function(){const S=a.create();return function(ea,ma,sa){return b.sub(ea,b.scale(ea,ma,.5),D(S,ma,
sa))}}(),L=function(){const S=e.create(),ea=a.create();return function(ma,sa,ja,wa){const Ja=E(sa);sa=p.toRadian(sa.rotation)||0;b.set(ea,Ja,Ja);g.fromScaling(S,ea);g.rotate(S,S,sa);g.translate(S,S,P(ea,ja,wa));g.translate(S,S,[0,wa.top-wa.bottom]);return b.set(ma,S[4],S[5])}}(),M=function(){const S=a.create(),ea=a.create(),ma=a.create();return function(sa,ja,wa,Ja,va,ra){b.negate(S,ja);b.scale(ea,wa,.5*ra);b.set(ma,1/Ja*ra,-1/Ja*ra);g.fromTranslation(sa,ea);va&&g.rotate(sa,sa,va);g.scale(sa,sa,ma);
g.translate(sa,sa,S);return sa}}(),J=function(){const S=a.create();return function(ea,ma,sa,ja){const wa=E(ma),Ja=p.toRadian(ma.rotation)||0;q(S,ma.targetGeometry);return M(ea,S,sa,wa,Ja,ja)}}(),R=function(){const S=a.create();return function(ea,ma,sa,ja){const wa=E(ma);q(S,ma.targetGeometry);return M(ea,S,sa,wa,0,ja)}}(),X=function(){const S=a.create(),ea=a.create(),ma=[0,0,0];return function(sa,ja,wa){b.subtract(S,sa,ja);b.normalize(S,S);b.subtract(ea,sa,wa);b.normalize(ea,ea);b.cross(ma,S,ea);
sa=Math.acos(b.dot(S,ea)/(b.length(S)*b.length(ea)))*H;0>ma[2]&&(sa=-sa);isNaN(sa)&&(sa=0);return sa}}(),U=function(){const S=a.create();return function(ea,ma,sa,ja){const wa=ea.targetGeometry;C(ea,ma);L(S,ma,sa,ja);wa.x+=S[0];wa.y+=S[1];return ea}}(),V=function(){return function(S,ea,ma){C(S,ea);ea=S.targetGeometry;ea.x=ma.x;ea.y=ma.y;ea.spatialReference=ma.spatialReference;return S}}(),Q=function(){const S=a.create();return function(ea,ma,sa,ja,wa){wa||(wa="center");b.sub(S,sa,ja);b.scale(S,S,.5);
sa=S[0];ja=S[1];switch(wa){case "center":b.set(S,0,0);break;case "left":b.set(S,-sa,0);break;case "top":b.set(S,0,ja);break;case "right":b.set(S,sa,0);break;case "bottom":b.set(S,0,-ja);break;case "top-left":b.set(S,-sa,ja);break;case "bottom-left":b.set(S,-sa,-ja);break;case "top-right":b.set(S,sa,ja);break;case "bottom-right":b.set(S,sa,-ja)}ha(ea,ma,S);return ea}}(),Y=function(){const S=a.create();return function(ea,ma,sa,ja,wa){C(ea,ma);isNaN(sa)||0===sa||(ca(S,ja,ma,wa),ea.scale=ma.scale*sa,
la(S,S,ea,wa),ha(ea,ea,b.set(S,S[0]-ja[0],ja[1]-S[1])));return ea}}(),fa=function(){const S=a.create();return function(ea,ma,sa,ja,wa,Ja){C(ea,ma);isNaN(sa)||0===sa||(ca(S,wa,ma,Ja),ea.scale=ma.scale*sa,ea.rotation+=ja,la(S,S,ea,Ja),ha(ea,ea,b.set(S,S[0]-wa[0],wa[1]-S[1])));return ea}}(),da=function(){const S=a.create(),ea=a.create();return function(ma,sa,ja,wa,Ja,va,ra){P(ea,va,ra);b.add(S,Ja,ea);return wa?fa(ma,sa,ja,wa,S,va):Y(ma,sa,ja,S,va)}}(),ca=function(){const S=e.create();return function(ea,
ma,sa,ja){return b.transformMat2d(ea,ma,F(S,sa,ja,1))}}(),la=function(){const S=e.create();return function(ea,ma,sa,ja){return b.transformMat2d(ea,ma,J(S,sa,ja,1))}}(),ha=function(){const S=a.create(),ea=e.create();return function(ma,sa,ja){C(ma,sa);const wa=E(sa),Ja=ma.targetGeometry;g.fromRotation(ea,p.toRadian(sa.rotation)||0);g.scale(ea,ea,a.fromValues(wa,wa));b.transformMat2d(S,ja,ea);Ja.x+=S[0];Ja.y+=S[1];return ma}}();u.addPadding=U;u.angleBetween=X;u.centerAt=V;u.copy=C;u.create=function(S,
ea){return B.apply(this,arguments)};u.extentToScale=t;u.getAnchor=D;u.getExtent=K;u.getMatrix=M;u.getPaddingMapTranslation=L;u.getPaddingScreenTranslation=P;u.getResolution=E;u.getResolutionToScaleFactor=G;u.getTransform=J;u.getTransformNoRotation=R;u.getWorldScreenWidth=function(S,ea){return Math.round(O(S)/ea)};u.getWorldWidth=O;u.padAndScaleAndRotateBy=da;u.resize=Q;u.rotateBy=function(S,ea,ma){C(S,ea);S.rotation+=ma;return S};u.rotateTo=function(S,ea,ma){C(S,ea);S.rotation=ma;return S};u.scaleAndRotateBy=
fa;u.scaleTo=function(S,ea,ma){C(S,ea);S.scale=ma;return S};u.setExtent=function(S,ea,ma,sa,ja){V(S,ea,ma.center);S.scale=t(ma,sa);ja&&ja.constraints&&ja.constraints.constrain(S);return S};u.toMap=ca;u.toScreen=la;u.translateBy=ha;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df64":function(){define(["exports"],function(u){function n(){return[1,0,0,1,0,0]}function h(p){return[p[0],p[1],p[2],p[3],p[4],p[5]]}function r(p,g,e,b,a,c){return[p,
g,e,b,a,c]}function v(p,g){return new Float64Array(p,g,6)}const z=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:h,fromValues:r,createView:v},Symbol.toStringTag,{value:"Module"}));u.clone=h;u.create=n;u.createView=v;u.fromValues=r;u.mat2df64=z})},"esri/chunks/vec2":function(){define(["exports","./common"],function(u,n){function h(X,U){X[0]=U[0];X[1]=U[1];return X}function r(X,U,V){X[0]=U;X[1]=V;return X}function v(X,U,V){X[0]=U[0]+V[0];X[1]=U[1]+V[1];return X}function z(X,U,V){X[0]=
U[0]-V[0];X[1]=U[1]-V[1];return X}function p(X,U,V){X[0]=U[0]*V[0];X[1]=U[1]*V[1];return X}function g(X,U,V){X[0]=U[0]/V[0];X[1]=U[1]/V[1];return X}function e(X,U){X[0]=Math.ceil(U[0]);X[1]=Math.ceil(U[1]);return X}function b(X,U){X[0]=Math.floor(U[0]);X[1]=Math.floor(U[1]);return X}function a(X,U,V){X[0]=Math.min(U[0],V[0]);X[1]=Math.min(U[1],V[1]);return X}function c(X,U,V){X[0]=Math.max(U[0],V[0]);X[1]=Math.max(U[1],V[1]);return X}function d(X,U){X[0]=Math.round(U[0]);X[1]=Math.round(U[1]);return X}
function f(X,U,V){X[0]=U[0]*V;X[1]=U[1]*V;return X}function l(X,U,V,Q){X[0]=U[0]+V[0]*Q;X[1]=U[1]+V[1]*Q;return X}function m(X,U){const V=U[0]-X[0];X=U[1]-X[1];return Math.sqrt(V*V+X*X)}function k(X,U){const V=U[0]-X[0];X=U[1]-X[1];return V*V+X*X}function q(X){const U=X[0];X=X[1];return Math.sqrt(U*U+X*X)}function t(X){const U=X[0];X=X[1];return U*U+X*X}function w(X,U){X[0]=-U[0];X[1]=-U[1];return X}function A(X,U){X[0]=1/U[0];X[1]=1/U[1];return X}function x(X,U){var V=U[0];const Q=U[1];V=V*V+Q*Q;
0<V&&(V=1/Math.sqrt(V),X[0]=U[0]*V,X[1]=U[1]*V);return X}function y(X,U){return X[0]*U[0]+X[1]*U[1]}function B(X,U,V){U=U[0]*V[1]-U[1]*V[0];X[0]=X[1]=0;X[2]=U;return X}function C(X,U,V,Q){const Y=U[0];U=U[1];X[0]=Y+Q*(V[0]-Y);X[1]=U+Q*(V[1]-U);return X}function D(X,U){U=U||1;const V=2*n.RANDOM()*Math.PI;X[0]=Math.cos(V)*U;X[1]=Math.sin(V)*U;return X}function F(X,U,V){const Q=U[0];U=U[1];X[0]=V[0]*Q+V[2]*U;X[1]=V[1]*Q+V[3]*U;return X}function E(X,U,V){const Q=U[0];U=U[1];X[0]=V[0]*Q+V[2]*U+V[4];X[1]=
V[1]*Q+V[3]*U+V[5];return X}function G(X,U,V){const Q=U[0];U=U[1];X[0]=V[0]*Q+V[3]*U+V[6];X[1]=V[1]*Q+V[4]*U+V[7];return X}function O(X,U,V){const Q=U[0];U=U[1];X[0]=V[0]*Q+V[4]*U+V[12];X[1]=V[1]*Q+V[5]*U+V[13];return X}function H(X,U,V,Q){const Y=U[0]-V[0];U=U[1]-V[1];const fa=Math.sin(Q);Q=Math.cos(Q);X[0]=Y*Q-U*fa+V[0];X[1]=Y*fa+U*Q+V[1];return X}function K(X,U){var V=X[0];X=X[1];const Q=U[0];U=U[1];let Y=V*V+X*X;0<Y&&(Y=1/Math.sqrt(Y));let fa=Q*Q+U*U;0<fa&&(fa=1/Math.sqrt(fa));V=(V*Q+X*U)*Y*fa;
return 1<V?0:-1>V?Math.PI:Math.acos(V)}function P(X){return"vec2("+X[0]+", "+X[1]+")"}function L(X,U){return X[0]===U[0]&&X[1]===U[1]}function M(X,U){const V=X[0];X=X[1];const Q=U[0];U=U[1];return Math.abs(V-Q)<=n.EPSILON*Math.max(1,Math.abs(V),Math.abs(Q))&&Math.abs(X-U)<=n.EPSILON*Math.max(1,Math.abs(X),Math.abs(U))}function J(X,U,V,Q,Y){let fa=U[0]-V[0];V=U[1]-V[1];Y=(Q[0]*fa+Q[1]*V)*(Y-1);fa=Q[0]*Y;V=Q[1]*Y;X[0]=U[0]+fa;X[1]=U[1]+V;return X}const R=Object.freeze(Object.defineProperty({__proto__:null,
copy:h,set:r,add:v,subtract:z,multiply:p,divide:g,ceil:e,floor:b,min:a,max:c,round:d,scale:f,scaleAndAdd:l,distance:m,squaredDistance:k,length:q,squaredLength:t,negate:w,inverse:A,normalize:x,dot:y,cross:B,lerp:C,random:D,transformMat2:F,transformMat2d:E,transformMat3:G,transformMat4:O,rotate:H,angle:K,str:P,exactEquals:L,equals:M,projectAndScale:J,len:q,sub:z,mul:p,div:g,dist:m,sqrDist:k,sqrLen:t},Symbol.toStringTag,{value:"Module"}));u.add=v;u.angle=K;u.ceil=e;u.copy=h;u.cross=B;u.dist=m;u.distance=
m;u.div=g;u.divide=g;u.dot=y;u.equals=M;u.exactEquals=L;u.floor=b;u.inverse=A;u.len=q;u.length=q;u.lerp=C;u.max=c;u.min=a;u.mul=p;u.multiply=p;u.negate=w;u.normalize=x;u.projectAndScale=J;u.random=D;u.rotate=H;u.round=d;u.scale=f;u.scaleAndAdd=l;u.set=r;u.sqrDist=k;u.sqrLen=t;u.squaredDistance=k;u.squaredLength=t;u.str=P;u.sub=z;u.subtract=z;u.transformMat2=F;u.transformMat2d=E;u.transformMat3=G;u.transformMat4=O;u.vec2=R})},"esri/chunks/vec2f64":function(){define(["exports"],function(u){function n(){return[0,
0]}function h(m){return[m[0],m[1]]}function r(m,k){return[m,k]}function v(m){const k=[0,0],q=Math.min(2,m.length);for(let t=0;t<q;++t)k[t]=m[t];return k}function z(m,k){return new Float64Array(m,k,2)}function p(){return[0,0]}function g(){return[1,1]}function e(){return[1,0]}function b(){return[0,1]}const a=[0,0],c=[1,1],d=[1,0],f=[0,1],l=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:h,fromValues:r,fromArray:v,createView:z,zeros:p,ones:g,unitX:e,unitY:b,ZEROS:a,ONES:c,UNIT_X:d,
UNIT_Y:f},Symbol.toStringTag,{value:"Module"}));u.ONES=c;u.UNIT_X=d;u.UNIT_Y=f;u.ZEROS=a;u.clone=h;u.create=n;u.createView=z;u.fromArray=v;u.fromValues=r;u.ones=g;u.unitX=e;u.unitY=b;u.vec2f64=l;u.zeros=p})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe","../../core/reactiveUtils","../../core/scheduling"],function(u,n,h){return function(){function r(z){this.view=z;this._frameTaskHandle=null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=
this.view.state;this._updateParameters.stationary=this.view.stationary;this._updateParameters.pixelRatio=window.devicePixelRatio;this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;const {basemapView:p,graphicsView:g,labelManager:e,layerViews:b,state:{id:a}}=this.view;p.baseLayerViews.forEach(this._updateLayerView,this);b.forEach(this._updateLayerView,this);p.referenceLayerViews.forEach(this._updateLayerView,this);u.isSome(e)&&(e.lastUpdateId!==
a&&(e.viewChange(),e.lastUpdateId=a),e.updateRequested&&e.processUpdate(this._updateParameters));u.isSome(g)&&(g.lastUpdateId!==a&&(g.viewChange(),g.lastUpdateId=a),g.updateRequested&&g.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}var v=r.prototype;v.destroy=function(){this.stop()};v.start=function(){if(!this._frameTaskHandle){var z=this.view;this.stationary=
z.stationary;this._updateParameters={state:z.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:z.renderingOptions};this._stationaryHandle=n.watch(()=>z.stationary,p=>{this.stationary=p;this.requestFrame()});this._frameTaskHandle=h.addFrameTask(this);this.requestUpdate()}};v.stop=function(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=
null,this.stationary=!0,this.animationInProgress=!1)};v.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};v.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};v._updateLayerView=function(z){const p=this.view.state,g=z.lastUpdateId;if(null==g||!this.stationary&&!z.moving)z.moving=!0,z.moveStart();g!==p.id&&z.viewChange();this.stationary&&z.moving&&(z.moving=!1,z.moveEnd());z.lastUpdateId=p.id;z.updateRequested&&z.processUpdate(this._updateParameters);
"layerViews"in z&&z.layerViews.forEach(this._updateLayerView,this)};return r}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe"],function(u,n,h,r){function v(){return Promise.all([new Promise((b,a)=>u(["./webglDeps"],b,a)),new Promise((b,a)=>u(["./mapViewDeps"],b,a))])}const z=b=>Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"})),p=()=>v().then(()=>new Promise((b,a)=>u(["./layers/TileLayerView2D"],
c=>b(z(c)),a))),g=()=>v().then(()=>new Promise((b,a)=>u(["./layers/FeatureLayerView2D"],c=>b(z(c)),a))),e={"base-dynamic":()=>v().then(()=>new Promise((b,a)=>u(["./layers/BaseDynamicLayerView2D"],c=>b(z(c)),a))),"base-tile":p,"bing-maps":p,csv:g,"geo-rss":()=>v().then(()=>new Promise((b,a)=>u(["./layers/GeoRSSLayerView2D"],c=>b(z(c)),a))),feature:g,geojson:g,graphics:()=>v().then(()=>new Promise((b,a)=>u(["./layers/GraphicsLayerView2D"],c=>b(z(c)),a))),group:()=>v().then(()=>new Promise((b,a)=>u(["./layers/GroupLayerView2D"],
c=>b(z(c)),a))),imagery:()=>v().then(()=>new Promise((b,a)=>u(["./layers/ImageryLayerView2D"],c=>b(z(c)),a))),"imagery-tile":()=>v().then(()=>new Promise((b,a)=>u(["./layers/ImageryTileLayerView2D"],c=>b(z(c)),a))),kml:()=>v().then(()=>new Promise((b,a)=>u(["./layers/KMLLayerView2D"],c=>b(z(c)),a))),"map-image":()=>v().then(()=>new Promise((b,a)=>u(["./layers/MapImageLayerView2D"],c=>b(z(c)),a))),"map-notes":()=>v().then(()=>new Promise((b,a)=>u(["./layers/MapNotesLayerView2D"],c=>b(z(c)),a))),media:()=>
v().then(()=>new Promise((b,a)=>u(["./layers/MediaLayerView2D"],c=>b(z(c)),a))),"ogc-feature":()=>v().then(()=>new Promise((b,a)=>u(["./layers/OGCFeatureLayerView2D"],c=>b(z(c)),a))),"open-street-map":p,route:()=>v().then(()=>new Promise((b,a)=>u(["./layers/RouteLayerView2D"],c=>b(z(c)),a))),stream:()=>v().then(()=>new Promise((b,a)=>u(["./layers/StreamLayerView2D"],c=>b(z(c)),a))),"subtype-group":()=>v().then(()=>new Promise((b,a)=>u(["./layers/SubtypeGroupLayerView2D"],c=>b(z(c)),a))),tile:p,"vector-tile":()=>
v().then(()=>new Promise((b,a)=>u(["./layers/VectorTileLayerView2D"],c=>b(z(c)),a))),wcs:()=>v().then(()=>new Promise((b,a)=>u(["./layers/ImageryTileLayerView2D"],c=>b(z(c)),a))),"web-tile":p,wfs:g,wms:()=>v().then(()=>new Promise((b,a)=>u(["./layers/WMSLayerView2D"],c=>b(z(c)),a))),wmts:()=>v().then(()=>new Promise((b,a)=>u(["./layers/WMTSLayerView2D"],c=>b(z(c)),a))),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,
scene:null,unknown:null,unsupported:null};n.layerView2DImporter={hasLayerViewModule:b=>r.isSome(e[b.type]),importLayerView:b=>{var a=e[b.type];if(r.isNone(a))throw b=b.declaredClass?b.declaredClass.slice(b.declaredClass.lastIndexOf(".")+1):"Unknown",a=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),b=new h(`${a}:view-not-supported`,`${b} is not supported in 2D`),b;return a(b)}};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){h={base:null,key:"type",typeMap:{extent:f,polygon:l}};r=function(m){function k(t){t=m.call(this,t)||this;t.lods=null;t.minScale=0;t.maxScale=0;t.minZoom=-1;t.maxZoom=-1;t.rotationEnabled=!0;t.snapToZoom=!0;return t}u._inheritsLoose(k,m);var q=k.prototype;q.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null);this._set("_geometry",null)};q.canZoomInTo=function(t){const w=this.effectiveMaxScale;return 0===w||t>=w};q.canZoomOutTo=
function(t){const w=this.effectiveMinScale;return 0===w||t<=w};q.constrain=function(t,w){this._zoom.constrain(t,w);this._rotation.constrain(t,w);this._geometry.constrain(t,w);return t};q.constrainByGeometry=function(t){return this._geometry.constrain(t)};q.fit=function(t){return this._zoom.fit(t)};q.zoomToScale=function(t){return this._zoom.zoomToScale(t)};q.scaleToZoom=function(t){return this._zoom.scaleToZoom(t)};q.snapScale=function(t){return this._zoom.snapToClosestScale(t)};q.snapToNextScale=
function(t){return this._zoom.snapToNextScale(t)};q.snapToPreviousScale=function(t){return this._zoom.snapToPreviousScale(t)};u._createClass(k,[{key:"geometry",set:function(t){t?this._set("geometry",t):this._set("geometry",null)}},{key:"version",get:function(){var t;this.commitProperty("_zoom");this.commitProperty("_rotation");this.commitProperty("_geometry");return(null!=(t=this._get("version"))?t:0)+1}},{key:"_defaultLODs",get:function(){var t,w,A;const x=null==(t=this.view)?void 0:null==(w=t.defaultsFromMap)?
void 0:w.tileInfo;t=null==(A=this.view)?void 0:A.spatialReference;return x&&t&&x.spatialReference.equals(t)?x.lods:null}},{key:"_geometry",get:function(){var t;return new a.GeometryConstraint({geometry:this.geometry,spatialReference:null==(t=this.view)?void 0:t.spatialReference})}},{key:"_rotation",get:function(){return new c({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){const t=this._get("_zoom"),w=this.lods||this._defaultLODs,A=this.minZoom,x=this.maxZoom,y=this.minScale,
B=this.maxScale,C=this.snapToZoom;return t&&t.lods===w&&t.minZoom===A&&t.maxZoom===x&&t.minScale===y&&t.maxScale===B&&t.snapToZoom===C?t:new d({lods:w,minZoom:A,maxZoom:x,minScale:y,maxScale:B,snapToZoom:C})}}]);return k}(r);n.__decorate([v.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],r.prototype,"effectiveLODs",void 0);n.__decorate([v.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],r.prototype,"effectiveMinScale",void 0);n.__decorate([v.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],
r.prototype,"effectiveMaxScale",void 0);n.__decorate([v.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],r.prototype,"effectiveMinZoom",void 0);n.__decorate([v.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],r.prototype,"effectiveMaxZoom",void 0);n.__decorate([v.property({types:h,value:null})],r.prototype,"geometry",null);n.__decorate([v.property({type:[b]})],r.prototype,"lods",void 0);n.__decorate([v.property()],r.prototype,"minScale",void 0);n.__decorate([v.property()],r.prototype,
"maxScale",void 0);n.__decorate([v.property()],r.prototype,"minZoom",void 0);n.__decorate([v.property()],r.prototype,"maxZoom",void 0);n.__decorate([v.property()],r.prototype,"rotationEnabled",void 0);n.__decorate([v.property()],r.prototype,"snapToZoom",void 0);n.__decorate([v.property()],r.prototype,"view",void 0);n.__decorate([v.property({readOnly:!0})],r.prototype,"version",null);n.__decorate([v.property()],r.prototype,"_defaultLODs",null);n.__decorate([v.property({type:a.GeometryConstraint})],
r.prototype,"_geometry",null);n.__decorate([v.property({type:c})],r.prototype,"_rotation",null);n.__decorate([v.property({readOnly:!0,type:d})],r.prototype,"_zoom",null);return r=n.__decorate([e.subclass("esri.views.2d.MapViewConstraints")],r)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f){var l;const m=v.getLogger("esri.views.MapView");u.GeometryConstraint=l=function(k){function q(w){w=k.call(this,w)||this;w.geometry=null;w.spatialReference=null;return w}n._inheritsLoose(q,k);var t=q.prototype;t.constrain=function(w,A){if(z.isNone(this.normalizedGeometry))return w;A=w.targetGeometry;if("extent"===this.normalizedGeometry.type?d.extentContainsPoint(this.normalizedGeometry,A):d.polygonContainsPoint(this.normalizedGeometry,A))return w;({coordinate:A}=
f.nearestCoordinate(this.normalizedGeometry,A));if(!A)return w;w.targetGeometry=A;return w};t.clone=function(){var w,A;return new l({geometry:null==(w=this.geometry)?void 0:w.clone(),spatialReference:null==(A=this.spatialReference)?void 0:A.clone()})};n._createClass(q,[{key:"normalizedGeometry",get:function(){if(z.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return c.project(this.geometry,this.spatialReference)}catch(w){return m.error("#constraints.geometry",
"could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:w}),null}return this.geometry}}]);return q}(r);h.__decorate([p.property({constructOnly:!0})],u.GeometryConstraint.prototype,"geometry",void 0);h.__decorate([p.property({readOnly:!0})],u.GeometryConstraint.prototype,"normalizedGeometry",null);h.__decorate([p.property({constructOnly:!0})],u.GeometryConstraint.prototype,"spatialReference",void 0);u.GeometryConstraint=
l=h.__decorate([a.subclass("esri.views.2d.constraints.GeometryConstraint")],u.GeometryConstraint);Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(u,n,h,r,v){u.nearestCoordinate=function(z,p){const {spatialReference:g}=p;p=[p.x,p.y];let e=Number.POSITIVE_INFINITY,b=0,a=0;const c=[0,0];z="extent"===z.type?[[[z.xmin,z.ymin],[z.xmin,
z.ymax],[z.xmax,z.ymax],[z.xmax,z.ymin],[z.xmin,z.ymin]]]:z.rings;for(const d of z)for(z=0;z<d.length-1;z++){r.projectPointOnLine(c,p,d,z);const f=h.distance(p,c);f<e&&(e=f,b=c[0],a=c[1])}return{coordinate:new v({x:b,y:a,spatialReference:g}),distance:e}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){var e;h=e=function(b){function a(){var d=b.apply(this,arguments)||this;d.enabled=!0;d.rotationEnabled=!0;return d}u._inheritsLoose(a,b);var c=a.prototype;c.constrain=function(d,f){if(!this.enabled||!f)return d;this.rotationEnabled||(d.rotation=f.rotation);return d};c.clone=function(){return new e({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return a}(h);n.__decorate([r.property()],h.prototype,"enabled",void 0);n.__decorate([r.property()],h.prototype,"rotationEnabled",
void 0);return h=e=n.__decorate([g.subclass("esri.views.2d.constraints.RotationConstraint")],h)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(u,n,h,r,v,z,p,g){var e;h=e=function(b){function a(d){d=
b.call(this,d)||this;d._lodByScale={};d._scales=[];d.effectiveLODs=null;d.effectiveMinZoom=-1;d.effectiveMaxZoom=-1;d.effectiveMinScale=0;d.effectiveMaxScale=0;d.lods=null;d.minZoom=-1;d.maxZoom=-1;d.minScale=0;d.maxScale=0;d.snapToZoom=!0;return d}u._inheritsLoose(a,b);var c=a.prototype;c.initialize=function(){let {lods:d,minScale:f,maxScale:l,minZoom:m,maxZoom:k}=this,q=-1,t=-1,w=!1,A=!1;0!==f&&0!==l&&f<l&&([f,l]=[l,f]);if(d&&d.length){d=d.map(y=>y.clone());d.sort((y,B)=>B.scale-y.scale);d.forEach((y,
B)=>y.level=B);for(const y of d){!w&&0<f&&f>=y.scale&&(q=y.level,w=!0);!A&&0<l&&l>=y.scale&&(t=x?x.level:-1,A=!0);var x=y}-1===m&&(m=0===f?0:q);-1===k&&(k=0===l?d.length-1:t);m=Math.max(m,0);m=Math.min(m,d.length-1);k=Math.max(k,0);k=Math.min(k,d.length-1);m>k&&([m,k]=[k,m]);f=d[m].scale;l=d[k].scale;d.splice(0,m);d.splice(k-m+1,d.length);d.forEach((y,B)=>{this._lodByScale[y.scale]=y;this._scales[B]=y.scale});this._set("effectiveLODs",d);this._set("effectiveMinZoom",m);this._set("effectiveMaxZoom",
k)}this._set("effectiveMinScale",f);this._set("effectiveMaxScale",l)};c.constrain=function(d,f){if(f&&d.scale===f.scale)return d;var l=this.effectiveMinScale;const m=this.effectiveMaxScale,k=d.targetGeometry,q=f&&f.targetGeometry,t=0!==l&&d.scale>l;if(0!==m&&d.scale<m||t)l=t?l:m,q&&(f=(l-f.scale)/(d.scale-f.scale),k.x=q.x+(k.x-q.x)*f,k.y=q.y+(k.y-q.y)*f),d.scale=l;this.snapToZoom&&this.effectiveLODs&&(d.scale=this._getClosestScale(d.scale));return d};c.fit=function(d){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(d,
null);const f=this.scaleToZoom(d.scale);d.scale=this.zoomToScale(.99<Math.abs(f-Math.floor(f))?Math.round(f):Math.floor(f));return d};c.zoomToScale=function(d){if(!this.effectiveLODs)return 0;d-=this.effectiveMinZoom;d=Math.max(0,d);const f=this._scales;if(0>=d)return f[0];if(d>=f.length)return f[f.length-1];const l=Math.round(d);return f[l]+(l-d)*(f[Math.round(d-.5)]-f[l])};c.scaleToZoom=function(d){if(!this.effectiveLODs)return-1;const f=this._scales;let l,m;if(d>=f[0])return this.effectiveMinZoom;
if(d<=f[f.length-1])return this.effectiveMaxZoom;for(let k=0;k<f.length-1;k++){l=f[k];m=f[k+1];if(m===d)return k+this.effectiveMinZoom+1;if(l>d&&m<d)return k+this.effectiveMinZoom+1-(d-m)/(l-m)}};c.snapToClosestScale=function(d){if(!this.effectiveLODs)return d;d=this.scaleToZoom(d);return this.zoomToScale(Math.round(d))};c.snapToNextScale=function(d,f=.5){if(!this.effectiveLODs)return d*f;d=Math.round(this.scaleToZoom(d));return this.zoomToScale(d+1)};c.snapToPreviousScale=function(d,f=2){if(!this.effectiveLODs)return d*
f;d=Math.round(this.scaleToZoom(d));return this.zoomToScale(d-1)};c.clone=function(){return new e({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};c._getClosestScale=function(d){if(this._lodByScale[d])return this._lodByScale[d].scale;d=this._scales.reduce((f,l)=>Math.abs(l-d)<=Math.abs(f-d)?l:f,this._scales[0]);return this._lodByScale[d].scale};return a}(h);n.__decorate([r.property({readOnly:!0})],h.prototype,"effectiveLODs",void 0);n.__decorate([r.property({readOnly:!0})],
h.prototype,"effectiveMinZoom",void 0);n.__decorate([r.property({readOnly:!0})],h.prototype,"effectiveMaxZoom",void 0);n.__decorate([r.property({readOnly:!0})],h.prototype,"effectiveMinScale",void 0);n.__decorate([r.property({readOnly:!0})],h.prototype,"effectiveMaxScale",void 0);n.__decorate([r.property()],h.prototype,"lods",void 0);n.__decorate([r.property()],h.prototype,"minZoom",void 0);n.__decorate([r.property()],h.prototype,"maxZoom",void 0);n.__decorate([r.property()],h.prototype,"minScale",
void 0);n.__decorate([r.property()],h.prototype,"maxScale",void 0);n.__decorate([r.property()],h.prototype,"snapToZoom",void 0);return h=e=n.__decorate([g.subclass("esri.views.2d.constraints.ZoomConstraint")],h)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){var f,l;let m=f=function(k){function q(){var t=k.apply(this,arguments)||this;t.left=0;t.top=0;t.right=0;t.bottom=0;return t}u._inheritsLoose(q,k);q.prototype.clone=function(){return new f({left:this.left,top:this.top,right:this.right,bottom:this.bottom})};return q}(h);n.__decorate([v.property()],m.prototype,"left",void 0);n.__decorate([v.property()],m.prototype,"top",void 0);n.__decorate([v.property()],m.prototype,"right",void 0);n.__decorate([v.property()],m.prototype,
"bottom",void 0);m=f=n.__decorate([e.subclass("esri.views.2d.PaddedViewState.Padding")],m);h=l=function(k){function q(...t){var w=k.call(this,...t)||this;w.paddedViewState=new d;w._updateContent=(()=>{const A=a.create();return()=>{var x=w._get("size");const y=w._get("padding");if(x&&y){var B=w.paddedViewState;b.set(A,y.left+y.right,y.top+y.bottom);b.subtract(A,x,A);b.copy(B.size,A);if(x=B.viewpoint)w.viewpoint=x}}})();w.own(r.watch(()=>[w.size,w.padding],()=>w._updateContent(),r.sync));w.padding=
new m;w.size=[0,0];return w}u._inheritsLoose(q,k);q.prototype.clone=function(){return new l({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})};u._createClass(q,[{key:"padding",set:function(t){this._set("padding",t||new m)}},{key:"viewpoint",set:function(t){if(t){const w=t.clone();this.paddedViewState.viewpoint=t;c.addPadding(w,t,this._get("size"),this._get("padding"));t=this._viewpoint2D;const A=w.targetGeometry;t.center[0]=
A.x;t.center[1]=A.y;t.rotation=w.rotation;t.scale=w.scale;t.spatialReference=A.spatialReference;this._update()}}}]);return q}(d);n.__decorate([v.property()],h.prototype,"paddedViewState",void 0);n.__decorate([v.property({type:m})],h.prototype,"padding",null);n.__decorate([v.property()],h.prototype,"viewpoint",null);return h=l=n.__decorate([e.subclass("esri.views.2d.PaddedViewState")],h)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y){var B;const C=[0,0];h=B=function(D){function F(G){G=D.call(this,G)||this;G._viewpoint2D={center:t.create(),rotation:0,scale:0,spatialReference:null};G.center=[0,0];G.extent=new x;G.id=0;G.inverseTransform=f.create();G.resolution=0;G.rotation=0;G.scale=0;G.transform=f.create();G.transformNoRotation=f.create();G.displayMat3=m.create();G.displayViewMat3=m.create();G.viewMat3=m.create();G.viewMat2d=d.create();G.worldScreenWidth=0;G.size=[0,0];return G}
u._inheritsLoose(F,D);var E=F.prototype;E.copy=function(G){const O=this.size,H=this.viewpoint;H&&O?(this.viewpoint=A.copy(H,G.viewpoint),this._set("size",k.copy(O,G.size))):(this.viewpoint=G.viewpoint.clone(),this._set("size",[G.size[0],G.size[1]]));this._set("pixelRatio",G.pixelRatio);return this};E.clone=function(){return new B({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};E.toMap=function(G,O,H){if(w.isVec2(O))return k.transformMat2d(G,O,this.inverseTransform);
C[0]=O;C[1]=H;return k.transformMat2d(G,C,this.inverseTransform)};E.toScreen=function(G,O,H){if(w.isVec2(O))return k.transformMat2d(G,O,this.transform);C[0]=O;C[1]=H;return k.transformMat2d(G,C,this.transform)};E.toScreenNoRotation=function(G,O,H){if(w.isVec2(O))return k.transformMat2d(G,O,this.transformNoRotation);C[0]=O;C[1]=H;return k.transformMat2d(G,C,this.transformNoRotation)};E.getScreenTransform=function(G,O){const {center:H}=this._viewpoint2D,K=this._get("pixelRatio")||1,P=this._get("size");
A.getMatrix(G,H,P,O,0,K);return G};E._update=function(){const {center:G,spatialReference:O,scale:H,rotation:K}=this._viewpoint2D,P=this._get("pixelRatio")||1,L=this._get("size"),M=new r({targetGeometry:new y(G[0],G[1],O),scale:H,rotation:K});this._set("viewpoint",M);if(L&&O&&H){this.resolution=A.getResolution(M);this.rotation=K;this.scale=H;this.spatialReference=O;k.copy(this.center,G);l.set(this.displayMat3,0!==L[0]?2/L[0]:0,0,0,0,0!==L[1]?-2/L[1]:0,0,-1,1,1);var J=l.identity(this.viewMat3),R=q.fromValues(L[0]/
2,L[1]/2),X=q.fromValues(-L[0]/2,-L[1]/2),U=a.toRadian(K);l.translate(J,J,R);l.rotate(J,J,U);l.translate(J,J,X);l.multiply(this.displayViewMat3,this.displayMat3,J);J=c.fromTranslation(this.viewMat2d,R);c.rotate(J,J,U);c.translate(J,J,X);A.getExtent(this.extent,M,L);A.getTransform(this.transform,M,L,P);c.invert(this.inverseTransform,this.transform);A.getTransformNoRotation(this.transformNoRotation,M,L,P);this.worldScreenWidth=A.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",
this.id+1);return this}};u._createClass(F,[{key:"pixelRatio",set:function(G){this._set("pixelRatio",G);this._update()}},{key:"size",set:function(G){this._set("size",G);this._update()}},{key:"viewpoint",set:function(G){if(G){const O=this._viewpoint2D,H=G.targetGeometry;O.center[0]=H.x;O.center[1]=H.y;O.rotation=G.rotation;O.scale=G.scale;O.spatialReference=H.spatialReference}this._update()}}]);return F}(v.JSONSupport);n.__decorate([z.property({readOnly:!0})],h.prototype,"id",void 0);n.__decorate([z.property({value:1,
json:{write:!0}})],h.prototype,"pixelRatio",null);n.__decorate([z.property({json:{write:!0}})],h.prototype,"size",null);n.__decorate([z.property()],h.prototype,"spatialReference",void 0);n.__decorate([z.property({type:r,json:{write:!0}})],h.prototype,"viewpoint",null);return h=B=n.__decorate([b.subclass("esri.views.2d.ViewState")],h)})},"esri/chunks/mat3":function(){define(["exports","./common"],function(u,n){function h(L,M){L[0]=M[0];L[1]=M[1];L[2]=M[2];L[3]=M[4];L[4]=M[5];L[5]=M[6];L[6]=M[8];L[7]=
M[9];L[8]=M[10];return L}function r(L,M){L[0]=M[0];L[1]=M[1];L[2]=M[2];L[3]=M[3];L[4]=M[4];L[5]=M[5];L[6]=M[6];L[7]=M[7];L[8]=M[8];return L}function v(L,M,J,R,X,U,V,Q,Y,fa){L[0]=M;L[1]=J;L[2]=R;L[3]=X;L[4]=U;L[5]=V;L[6]=Q;L[7]=Y;L[8]=fa;return L}function z(L){L[0]=1;L[1]=0;L[2]=0;L[3]=0;L[4]=1;L[5]=0;L[6]=0;L[7]=0;L[8]=1;return L}function p(L,M){if(L===M){const J=M[1],R=M[2],X=M[5];L[1]=M[3];L[2]=M[6];L[3]=J;L[5]=M[7];L[6]=R;L[7]=X}else L[0]=M[0],L[1]=M[3],L[2]=M[6],L[3]=M[1],L[4]=M[4],L[5]=M[7],
L[6]=M[2],L[7]=M[5],L[8]=M[8];return L}function g(L,M){const J=M[0],R=M[1],X=M[2],U=M[3],V=M[4],Q=M[5],Y=M[6],fa=M[7];M=M[8];const da=M*V-Q*fa,ca=-M*U+Q*Y,la=fa*U-V*Y;let ha=J*da+R*ca+X*la;if(!ha)return null;ha=1/ha;L[0]=da*ha;L[1]=(-M*R+X*fa)*ha;L[2]=(Q*R-X*V)*ha;L[3]=ca*ha;L[4]=(M*J-X*Y)*ha;L[5]=(-Q*J+X*U)*ha;L[6]=la*ha;L[7]=(-fa*J+R*Y)*ha;L[8]=(V*J-R*U)*ha;return L}function e(L,M){const J=M[0],R=M[1],X=M[2],U=M[3],V=M[4],Q=M[5],Y=M[6],fa=M[7];M=M[8];L[0]=V*M-Q*fa;L[1]=X*fa-R*M;L[2]=R*Q-X*V;L[3]=
Q*Y-U*M;L[4]=J*M-X*Y;L[5]=X*U-J*Q;L[6]=U*fa-V*Y;L[7]=R*Y-J*fa;L[8]=J*V-R*U;return L}function b(L){const M=L[3],J=L[4],R=L[5],X=L[6],U=L[7],V=L[8];return L[0]*(V*J-R*U)+L[1]*(-V*M+R*X)+L[2]*(U*M-J*X)}function a(L,M,J){const R=M[0],X=M[1],U=M[2],V=M[3],Q=M[4],Y=M[5],fa=M[6],da=M[7];M=M[8];const ca=J[0],la=J[1],ha=J[2],S=J[3],ea=J[4],ma=J[5],sa=J[6],ja=J[7];J=J[8];L[0]=ca*R+la*V+ha*fa;L[1]=ca*X+la*Q+ha*da;L[2]=ca*U+la*Y+ha*M;L[3]=S*R+ea*V+ma*fa;L[4]=S*X+ea*Q+ma*da;L[5]=S*U+ea*Y+ma*M;L[6]=sa*R+ja*V+J*
fa;L[7]=sa*X+ja*Q+J*da;L[8]=sa*U+ja*Y+J*M;return L}function c(L,M,J){const R=M[0],X=M[1],U=M[2],V=M[3],Q=M[4],Y=M[5],fa=M[6],da=M[7];M=M[8];const ca=J[0];J=J[1];L[0]=R;L[1]=X;L[2]=U;L[3]=V;L[4]=Q;L[5]=Y;L[6]=ca*R+J*V+fa;L[7]=ca*X+J*Q+da;L[8]=ca*U+J*Y+M;return L}function d(L,M,J){const R=M[0],X=M[1],U=M[2],V=M[3],Q=M[4],Y=M[5],fa=M[6],da=M[7];M=M[8];const ca=Math.sin(J);J=Math.cos(J);L[0]=J*R+ca*V;L[1]=J*X+ca*Q;L[2]=J*U+ca*Y;L[3]=J*V-ca*R;L[4]=J*Q-ca*X;L[5]=J*Y-ca*U;L[6]=fa;L[7]=da;L[8]=M;return L}
function f(L,M,J){const R=J[0],X=J[1];J=J[2];L[0]=R*M[0];L[1]=R*M[1];L[2]=R*M[2];L[3]=X*M[3];L[4]=X*M[4];L[5]=X*M[5];L[6]=J*M[6];L[7]=J*M[7];L[8]=J*M[8];return L}function l(L,M,J){const R=J[0];J=J[1];L[0]=R*M[0];L[1]=R*M[1];L[2]=R*M[2];L[3]=J*M[3];L[4]=J*M[4];L[5]=J*M[5];return L}function m(L,M){L[0]=1;L[1]=0;L[2]=0;L[3]=0;L[4]=1;L[5]=0;L[6]=M[0];L[7]=M[1];L[8]=1;return L}function k(L,M){const J=Math.sin(M);M=Math.cos(M);L[0]=M;L[1]=J;L[2]=0;L[3]=-J;L[4]=M;L[5]=0;L[6]=0;L[7]=0;L[8]=1;return L}function q(L,
M){L[0]=M[0];L[1]=0;L[2]=0;L[3]=0;L[4]=M[1];L[5]=0;L[6]=0;L[7]=0;L[8]=1;return L}function t(L,M){L[0]=M[0];L[1]=M[1];L[2]=0;L[3]=M[2];L[4]=M[3];L[5]=0;L[6]=M[4];L[7]=M[5];L[8]=1;return L}function w(L,M){var J=M[0],R=M[1],X=M[2];M=M[3];var U=J+J,V=R+R;const Q=X+X;J*=U;const Y=R*U;R*=V;const fa=X*U,da=X*V;X*=Q;U*=M;V*=M;M*=Q;L[0]=1-R-X;L[3]=Y-M;L[6]=fa+V;L[1]=Y+M;L[4]=1-J-X;L[7]=da-U;L[2]=fa-V;L[5]=da+U;L[8]=1-J-R;return L}function A(L,M){const J=M[0],R=M[1],X=M[2],U=M[4],V=M[5],Q=M[6],Y=M[8],fa=M[9];
M=M[10];const da=M*V-Q*fa,ca=-M*U+Q*Y,la=fa*U-V*Y;var ha=J*da+R*ca+X*la;if(!ha)return null;ha=1/ha;L[0]=da*ha;L[1]=(-M*R+X*fa)*ha;L[2]=(Q*R-X*V)*ha;L[3]=ca*ha;L[4]=(M*J-X*Y)*ha;L[5]=(-Q*J+X*U)*ha;L[6]=la*ha;L[7]=(-fa*J+R*Y)*ha;L[8]=(V*J-R*U)*ha;return L}function x(L,M){const J=M[0],R=M[1],X=M[2],U=M[3],V=M[4],Q=M[5],Y=M[6],fa=M[7];var da=M[8],ca=M[9],la=M[10],ha=M[11];const S=M[12],ea=M[13],ma=M[14];M=M[15];const sa=J*Q-R*V,ja=J*Y-X*V,wa=J*fa-U*V,Ja=R*Y-X*Q,va=R*fa-U*Q,ra=X*fa-U*Y,Ba=da*ea-ca*S,Ha=
da*ma-la*S;da=da*M-ha*S;const ya=ca*ma-la*ea;ca=ca*M-ha*ea;la=la*M-ha*ma;ha=sa*la-ja*ca+wa*ya+Ja*da-va*Ha+ra*Ba;if(!ha)return null;ha=1/ha;L[0]=(Q*la-Y*ca+fa*ya)*ha;L[1]=(Y*da-V*la-fa*Ha)*ha;L[2]=(V*ca-Q*da+fa*Ba)*ha;L[3]=(X*ca-R*la-U*ya)*ha;L[4]=(J*la-X*da+U*Ha)*ha;L[5]=(R*da-J*ca-U*Ba)*ha;L[6]=(ea*ra-ma*va+M*Ja)*ha;L[7]=(ma*wa-S*ra-M*ja)*ha;L[8]=(S*va-ea*wa+M*sa)*ha;return L}function y(L,M,J){L[0]=2/M;L[1]=0;L[2]=0;L[3]=0;L[4]=-2/J;L[5]=0;L[6]=-1;L[7]=1;L[8]=1;return L}function B(L){return"mat3("+
L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+", "+L[8]+")"}function C(L){return Math.sqrt(L[0]**2+L[1]**2+L[2]**2+L[3]**2+L[4]**2+L[5]**2+L[6]**2+L[7]**2+L[8]**2)}function D(L,M,J){L[0]=M[0]+J[0];L[1]=M[1]+J[1];L[2]=M[2]+J[2];L[3]=M[3]+J[3];L[4]=M[4]+J[4];L[5]=M[5]+J[5];L[6]=M[6]+J[6];L[7]=M[7]+J[7];L[8]=M[8]+J[8];return L}function F(L,M,J){L[0]=M[0]-J[0];L[1]=M[1]-J[1];L[2]=M[2]-J[2];L[3]=M[3]-J[3];L[4]=M[4]-J[4];L[5]=M[5]-J[5];L[6]=M[6]-J[6];L[7]=M[7]-J[7];L[8]=M[8]-
J[8];return L}function E(L,M,J){L[0]=M[0]*J;L[1]=M[1]*J;L[2]=M[2]*J;L[3]=M[3]*J;L[4]=M[4]*J;L[5]=M[5]*J;L[6]=M[6]*J;L[7]=M[7]*J;L[8]=M[8]*J;return L}function G(L,M,J,R){L[0]=M[0]+J[0]*R;L[1]=M[1]+J[1]*R;L[2]=M[2]+J[2]*R;L[3]=M[3]+J[3]*R;L[4]=M[4]+J[4]*R;L[5]=M[5]+J[5]*R;L[6]=M[6]+J[6]*R;L[7]=M[7]+J[7]*R;L[8]=M[8]+J[8]*R;return L}function O(L,M){return L[0]===M[0]&&L[1]===M[1]&&L[2]===M[2]&&L[3]===M[3]&&L[4]===M[4]&&L[5]===M[5]&&L[6]===M[6]&&L[7]===M[7]&&L[8]===M[8]}function H(L,M){const J=L[0],R=
L[1],X=L[2],U=L[3],V=L[4],Q=L[5],Y=L[6],fa=L[7];L=L[8];const da=M[0],ca=M[1],la=M[2],ha=M[3],S=M[4],ea=M[5],ma=M[6],sa=M[7];M=M[8];return Math.abs(J-da)<=n.EPSILON*Math.max(1,Math.abs(J),Math.abs(da))&&Math.abs(R-ca)<=n.EPSILON*Math.max(1,Math.abs(R),Math.abs(ca))&&Math.abs(X-la)<=n.EPSILON*Math.max(1,Math.abs(X),Math.abs(la))&&Math.abs(U-ha)<=n.EPSILON*Math.max(1,Math.abs(U),Math.abs(ha))&&Math.abs(V-S)<=n.EPSILON*Math.max(1,Math.abs(V),Math.abs(S))&&Math.abs(Q-ea)<=n.EPSILON*Math.max(1,Math.abs(Q),
Math.abs(ea))&&Math.abs(Y-ma)<=n.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ma))&&Math.abs(fa-sa)<=n.EPSILON*Math.max(1,Math.abs(fa),Math.abs(sa))&&Math.abs(L-M)<=n.EPSILON*Math.max(1,Math.abs(L),Math.abs(M))}function K(L){const M=n.EPSILON,J=L[0],R=L[1],X=L[2],U=L[3],V=L[4],Q=L[5],Y=L[6],fa=L[7];L=L[8];return Math.abs(1-(J*J+U*U+Y*Y))<=M&&Math.abs(1-(R*R+V*V+fa*fa))<=M&&Math.abs(1-(X*X+Q*Q+L*L))<=M}const P=Object.freeze(Object.defineProperty({__proto__:null,fromMat4:h,copy:r,set:v,identity:z,transpose:p,
invert:g,adjoint:e,determinant:b,multiply:a,translate:c,rotate:d,scale:f,scaleByVec2:l,fromTranslation:m,fromRotation:k,fromScaling:q,fromMat2d:t,fromQuat:w,normalFromMat4Legacy:A,normalFromMat4:x,projection:y,str:B,frob:C,add:D,subtract:F,multiplyScalar:E,multiplyScalarAndAdd:G,exactEquals:O,equals:H,isOrthoNormal:K,mul:a,sub:F},Symbol.toStringTag,{value:"Module"}));u.add=D;u.adjoint=e;u.copy=r;u.determinant=b;u.equals=H;u.exactEquals=O;u.frob=C;u.fromMat2d=t;u.fromMat4=h;u.fromQuat=w;u.fromRotation=
k;u.fromScaling=q;u.fromTranslation=m;u.identity=z;u.invert=g;u.isOrthoNormal=K;u.mat3=P;u.mul=a;u.multiply=a;u.multiplyScalar=E;u.multiplyScalarAndAdd=G;u.normalFromMat4=x;u.normalFromMat4Legacy=A;u.projection=y;u.rotate=d;u.scale=f;u.scaleByVec2=l;u.set=v;u.str=B;u.sub=F;u.subtract=F;u.translate=c;u.transpose=p})},"esri/chunks/mat3f32":function(){define(["exports"],function(u){function n(){const p=new Float32Array(9);p[0]=1;p[4]=1;p[8]=1;return p}function h(p){const g=new Float32Array(9);g[0]=p[0];
g[1]=p[1];g[2]=p[2];g[3]=p[3];g[4]=p[4];g[5]=p[5];g[6]=p[6];g[7]=p[7];g[8]=p[8];return g}function r(p,g,e,b,a,c,d,f,l){const m=new Float32Array(9);m[0]=p;m[1]=g;m[2]=e;m[3]=b;m[4]=a;m[5]=c;m[6]=d;m[7]=f;m[8]=l;return m}function v(p,g){return new Float32Array(p,g,9)}const z=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:h,fromValues:r,createView:v},Symbol.toStringTag,{value:"Module"}));u.clone=h;u.create=n;u.createView=v;u.fromValues=r;u.mat3f32=z})},"esri/chunks/vec2f32":function(){define(["exports"],
function(u){function n(){return new Float32Array(2)}function h(l){const m=new Float32Array(2);m[0]=l[0];m[1]=l[1];return m}function r(l,m){const k=new Float32Array(2);k[0]=l;k[1]=m;return k}function v(l,m){return new Float32Array(l,m,2)}function z(){return n()}function p(){return r(1,1)}function g(){return r(1,0)}function e(){return r(0,1)}const b=n(),a=p(),c=g(),d=e(),f=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:h,fromValues:r,createView:v,zeros:z,ones:p,unitX:g,unitY:e,ZEROS:b,
ONES:a,UNIT_X:c,UNIT_Y:d},Symbol.toStringTag,{value:"Module"}));u.ONES=a;u.UNIT_X=c;u.UNIT_Y=d;u.ZEROS=b;u.clone=h;u.create=n;u.createView=v;u.fromValues=r;u.ones=p;u.unitX=g;u.unitY=e;u.vec2f32=f;u.zeros=z})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(u){function n(r){return r instanceof Float32Array&&2<=r.length}function h(r){return Array.isArray(r)&&2<=r.length}u.isVec2=function(r){return n(r)||h(r)};u.isVec2f32=n;u.isVec2f64=h;Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),function(u,n,h,r,v,z,p,g,e,b){function a(m,k){m.length=0;k.forEach(q=>
m.push(q));return m}const c=new Set,d=[],f=new Map,l=[0,0];h=function(m){function k(t){t=m.call(this,t)||this;t._keyToItem=new Map;t.concurrency=6;t.strategy="scale-first";t.tileInfoView=null;return t}u._inheritsLoose(k,m);var q=k.prototype;q.initialize=function(){const {concurrency:t,process:w}=this;this._queue=new b.QueueProcessor({concurrency:t,process:(A,x)=>{A=this._keyToItem.get(A);return w(A,{signal:x})},peeker:A=>A.values().next().value})};q.destroy=function(){this.clear();this._queue.destroy();
this._queue=null};q.abort=function(t){this._queue.abort("string"===typeof t?t:t.id)};q.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};q.has=function(t){return"string"===typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)};q.isOngoing=function(t){t="string"===typeof t?t:t.id;return this.has(t)&&this._queue.isOngoing(t)};q.pause=function(){this._queue.pause()};q.push=function(t,w){const A=t.key.id+"-"+w;if(this.has(A))return this.get(A);w=this._queue.push(A);
const x=()=>{this._keyToItem.delete(A);this.notifyChange("updating")};this._keyToItem.set(A,t);w.then(x,x);this.notifyChange("updating");return w};q.reset=function(){this._queue.reset();this.notifyChange("updating")};q.resume=function(){this._queue.resume()};q._peekByScaleFirst=function(t){if(!this.state)return t.values().next().value;const w=this.tileInfoView;let A=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY;t.forEach(F=>{F=this._keyToItem.get(F);const E=this.tileInfoView.getTileScale(F.key);
f.has(E)||(f.set(E,[]),A=Math.max(E,A),x=Math.min(E,x));f.get(E).push(F.key);c.add(E)});let y=this.state.scale;f.has(y)||(a(d,c),d.sort((F,E)=>F-E),y=d.reduce((F,E)=>Math.abs(E-y)<Math.abs(F-y)?E:F,d[0]));y=Math.min(y,A);y=Math.max(y,x);t=f.get(y);const B=w.getClosestInfoForScale(y),C=B.getColumnForX(this.state.center[0]),D=B.getRowForY(this.state.center[1]);t.sort((F,E)=>{const G=B.denormalizeCol(F.col,F.world),O=B.denormalizeCol(E.col,E.world);return Math.sqrt((C-G)*(C-G)+(D-F.row)*(D-F.row))-Math.sqrt((C-
O)*(C-O)+(D-E.row)*(D-E.row))});c.clear();f.clear();return t[0].id};q._peekByCenterFirst=function(t){if(!this.state)return t.values().next().value;const w=this.tileInfoView,A=this.state.center;let x=Number.POSITIVE_INFINITY,y=null;t.forEach(B=>{B=this._keyToItem.get(B);w.getTileCoords(l,B.key);const C=e.distance(l,A);C<x&&(x=C,y=B.key)});return y.id};u._createClass(k,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return k}(h);n.__decorate([r.property({constructOnly:!0})],h.prototype,"concurrency",void 0);n.__decorate([r.property({constructOnly:!0})],h.prototype,"process",void 0);n.__decorate([r.property()],h.prototype,"state",void 0);n.__decorate([r.property({constructOnly:!0})],h.prototype,"strategy",void 0);n.__decorate([r.property({constructOnly:!0})],h.prototype,"tileInfoView",void 0);n.__decorate([r.property({readOnly:!0})],
h.prototype,"updating",null);return h=n.__decorate([g.subclass("esri.views.2d.tiling.PagedTileQueue")],h)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(u,n,h,r,v,z){let p=function(e,b){this.item=e;this.controller=b;this.promise=null},g=function(){function e(a){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;
this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new v(a.peeker);this.process=a.process;const c=a.scheduler;a.priority&&h.isSome(c)&&(this._task=c.registerTask(a.priority,this))}var b=e.prototype;b.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};b.abort=function(a){(a=this._controllers.get(a))&&a.abort()};b.clear=function(){this._queue.clear();
const a=[];this._controllers.forEach(c=>a.push(c));this._controllers.clear();a.forEach(c=>c.abort());this._processingItems.clear();this._cancelNext()};b.forEach=function(a){this._deferreds.forEach((c,d)=>a(d))};b.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};b.isOngoing=function(a){return this._processingItems.has(a)};b.has=function(a){return this._deferreds.has(a)};b.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};b.push=function(a,c){const d=this.get(a);
if(d)return d;const f=new AbortController;let l=null;c&&(l=r.onAbort(c,()=>f.abort()));const m=()=>{k.remove();h.isSome(l)&&l.remove();this._deferreds.delete(a);this._controllers.delete(a);this._queue.remove(a);this._processingItems.delete(a);this._scheduleNext()},k=r.onAbortOrThrow(f.signal,()=>{const t=this._processingItems.get(a);t&&t.controller.abort();m();q.reject(r.createAbortError())}),q=r.createDeferred();this._deferreds.set(a,q);this._controllers.set(a,f);q.promise.then(m,m);this._queue.push(a);
this._scheduleNext();return q.promise};b.last=function(){return this._queue.last()};b.peek=function(){return this._queue.peek()};b.popLast=function(){return this._queue.popLast()};b.reset=function(){const a=[];this._processingItems.forEach(c=>a.push(c));this._processingItems.clear();for(const c of a)this._queue.push(c.item),c.controller.abort();this._scheduleNext()};b.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};b.takeAll=function(){const a=[];for(;this._queue.length;)a.push(this._queue.pop());
this.clear();return a};b.runTask=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};b._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=z.schedule(()=>{this._schedule=null;this._next()}))};b._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};b._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};b._processResult=function(a,c){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(c))};b._processError=function(a,c){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(c))};b._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};b._process=function(a){if(!h.isNone(a)){var c=new AbortController,d=new p(a,c);this._processingItems.set(a,d);try{var f=
this.process(a,c.signal)}catch(l){this._processError(d,l)}r.isPromiseLike(f)?(d.promise=f,f.then(l=>this._processResult(d,l),l=>this._processError(d,l))):this._processResult(d,f)}};n._createClass(e,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:a=>this.runTask(a)}}}]);return e}();u.QueueProcessor=g;Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(u,n,h,r,v,z){const p=new v("0/0/0/0");let g=function(){function b(c,d,f,l,m,k,q,t){this.x=c;this.ymin=d;this.ymax=f;this.invM=l;this.leftAdjust=m;this.rightAdjust=k;this.leftBound=q;this.rightBound=t}b.create=function(c,d){c[1]>
d[1]&&([c,d]=[d,c]);const [f,l]=c,[m,k]=d;c=m-f;d=k-l;d=0!==d?c/d:0;const q=(Math.ceil(l)-l)*d,t=(Math.floor(l)-l)*d;return new b(f,Math.floor(l),Math.ceil(k),d,0>c?q:t,0>c?t:q,0>c?m:f,0>c?f:m)};var a=b.prototype;a.incrRow=function(){this.x+=this.invM};a.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return b}();const e=[[0,0],[0,0],[0,0],[0,0]];return function(){function b(c,d=null){this.tileInfo=
c;this.fullExtent=d;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const f=c.lods.slice();f.sort((m,k)=>k.scale-m.scale);const l=this._lodInfos=f.map(m=>h.create(c,m,d));f.forEach((m,k)=>{this._infoByLevel[m.level]=l[k];this._infoByScale[m.scale]=l[k];this.scales[k]=m.scale},this);this._wrap=c.isWrappable}var a=b.prototype;a.getLODInfoAt=function(c){return this._infoByLevel["number"===typeof c?c:c.level]};a.getTileBounds=function(c,d,f=!1){p.set(d);return(d=this._infoByLevel[p.level])?
d.getTileBounds(c,p,f):c};a.getTileCoords=function(c,d,f=!1){p.set(d);return(d=this._infoByLevel[p.level])?d.getTileCoords(c,p,f):c};a.getTileCoverage=function(c,d=192,f="closest"){f="closest"===f?this.getClosestInfoForScale(c.scale):this.getSmallestInfoForScale(c.scale);const l=r.pool.acquire(f),m=this._wrap;var k=Infinity;let q=-Infinity;const t=l.spans;e[0][0]=e[0][1]=e[1][1]=e[3][0]=-d;e[1][0]=e[2][0]=c.size[0]+d;e[2][1]=e[3][1]=c.size[1]+d;for(w of e)c.toMap(w,w),w[0]=f.getColumnForX(w[0]),w[1]=
f.getRowForY(w[1]);c=[];var w=3;for(d=0;4>d;d++)e[d][1]===e[w][1]?w=d:(w=g.create(e[d],e[w]),k=Math.min(w.ymin,k),q=Math.max(w.ymax,q),void 0===c[w.ymin]&&(c[w.ymin]=[]),c[w.ymin].push(w),w=d);if(null==k||null==q||100<q-k)return null;for(d=[];k<q;){null!=c[k]&&(d=d.concat(c[k]));w=Infinity;var A=-Infinity;for(var x=d.length-1;0<=x;x--){var y=d[x];w=Math.min(w,y.getLeftCol());A=Math.max(A,y.getRightCol())}w=Math.floor(w);A=Math.floor(A);if(k>=f.first[1]&&k<=f.last[1])if(m)if(f.size[0]<f.worldSize[0])for(x=
Math.floor(A/f.worldSize[0]),y=Math.floor(w/f.worldSize[0]);y<=x;y++)t.push(new z(k,Math.max(f.getFirstColumnForWorld(y),w),Math.min(f.getLastColumnForWorld(y),A)));else t.push(new z(k,w,A));else w>f.last[0]||A<f.first[0]||(w=Math.max(w,f.first[0]),A=Math.min(A,f.last[0]),t.push(new z(k,w,A)));k+=1;for(w=d.length-1;0<=w;w--)A=d[w],A.ymax>=k?A.incrRow():d.splice(w,1)}return l};a.getTileParentId=function(c){p.set(c);c=this._lodInfos.indexOf(this._infoByLevel[p.level])-1;if(0>c)return null;this._getTileIdAtLOD(p,
this._lodInfos[c],p);return p.id};a.getTileResolution=function(c){return(c=this._infoByLevel["object"===typeof c?c.level:c])?c.resolution:-1};a.getTileScale=function(c){return(c=this._infoByLevel[c.level])?c.scale:-1};a.intersects=function(c,d){p.set(d);d=this._infoByLevel[p.level];const f=c.lodInfo;if(f.resolution>d.resolution){this._getTileIdAtLOD(p,f,p);var l=f.denormalizeCol(p.col,p.world);for(var m of c.spans)if(m.row===p.row&&m.colFrom<=l&&m.colTo>=l)return!0}if(f.resolution<d.resolution){const [q,
t,w,A]=c.spans.reduce((x,y)=>{x[0]=Math.min(x[0],y.row);x[1]=Math.max(x[1],y.row);x[2]=Math.min(x[2],y.colFrom);x[3]=Math.max(x[3],y.colTo);return x},[Infinity,-Infinity,Infinity,-Infinity]);l=d.denormalizeCol(p.col,p.world);c=f.getColumnForX(d.getXForColumn(l));m=f.getRowForY(d.getYForRow(p.row));l=f.getColumnForX(d.getXForColumn(l+1))-1;d=f.getRowForY(d.getYForRow(p.row+1))-1;return!(c>A||l<w||m>t||d<q)}const k=f.denormalizeCol(p.col,p.world);return c.spans.some(q=>q.row===p.row&&q.colFrom<=k&&
q.colTo>=k)};a.normalizeBounds=function(c,d,f){c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];this._wrap&&(d=n.getInfo(this.tileInfo.spatialReference),f=-f*(d.valid[1]-d.valid[0]),c[0]+=f,c[2]+=f);return c};a.getSmallestInfoForScale=function(c){const d=this.scales;if(this._infoByScale[c])return this._infoByScale[c];if(c>d[0])return this._infoByScale[d[0]];for(let f=1;f<d.length-1;f++)if(c>d[f]+1E-6)return this._infoByScale[d[f-1]];return this._infoByScale[d[d.length-1]]};a.getClosestInfoForScale=function(c){const d=
this.scales;if(this._infoByScale[c])return this._infoByScale[c];c=d.reduce((f,l)=>Math.abs(l-c)<Math.abs(f-c)?l:f,d[0]);return this._infoByScale[c]};a.scaleToLevel=function(c){const d=this.scales;if(this._infoByScale[c])return this._infoByScale[c].level;for(let f=d.length-1;0<=f;f--)if(c<d[f])return f===d.length-1?this._infoByScale[d[d.length-1]].level:this._infoByScale[d[f]].level+(d[f]-c)/(d[f]-d[f+1]);return this._infoByScale[d[0]].level};a.scaleToZoom=function(c){return this.tileInfo.scaleToZoom(c)};
a._getTileIdAtLOD=function(c,d,f){const l=this._infoByLevel[f.level];c.set(f);if(d.resolution<l.resolution)return null;if(d.resolution===l.resolution)return c;c.level=d.level;c.col=Math.floor(f.col*l.resolution/d.resolution+.01);c.row=Math.floor(f.row*l.resolution/d.resolution+.01);return c};u._createClass(b,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return b}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe","../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(u,n,h){function r(z,p,g){z[0]=p;z[1]=g;return z}const v=new h("0/0/0/0");return function(){function z(g,e,b,a,c,d,f,l,m,k,q,t){this.level=g;this.resolution=e;this.scale=b;this.origin=a;this.first=c;this.last=d;this.size=f;this.norm=l;this.worldStart=m;this.worldEnd=k;this.worldSize=q;this.wrap=t}z.create=function(g,e,b=null){var a=n.getInfo(g.spatialReference);const c=e.origin||[g.origin.x,g.origin.y],d=[g.size[0]*e.resolution,g.size[1]*e.resolution],f=[-Infinity,-Infinity],
l=[Infinity,Infinity],m=[Infinity,Infinity];u.isSome(b)&&(r(f,Math.max(0,Math.floor((b.xmin-c[0])/d[0])),Math.max(0,Math.floor((c[1]-b.ymax)/d[1]))),r(l,Math.max(0,Math.floor((b.xmax-c[0])/d[0])),Math.max(0,Math.floor((c[1]-b.ymin)/d[1]))),r(m,l[0]-f[0]+1,l[1]-f[1]+1));const {cols:k,rows:q}=e;!b&&k&&q&&(r(f,k[0],q[0]),r(l,k[1],q[1]),r(m,k[1]-k[0]+1,q[1]-q[0]+1));let t;g.isWrappable?(g=[Math.ceil(Math.round((a.valid[1]-a.valid[0])/e.resolution)/g.size[0]),m[1]],a=[Math.floor((a.origin[0]-c[0])/d[0]),
f[1]],b=[g[0]+a[0]-1,l[1]],t=!0):(a=f,b=l,g=m,t=!1);return new z(e.level,e.resolution,e.scale,c,f,l,m,d,a,b,g,t)};var p=z.prototype;p.normalizeCol=function(g){if(!this.wrap)return g;const e=this.worldSize[0];return 0>g?e-1-Math.abs((g+1)%e):g%e};p.denormalizeCol=function(g,e){return this.wrap?this.worldSize[0]*e+g:g};p.getWorldForColumn=function(g){return this.wrap?Math.floor(g/this.worldSize[0]):0};p.getFirstColumnForWorld=function(g){return g*this.worldSize[0]+this.first[0]};p.getLastColumnForWorld=
function(g){return g*this.worldSize[0]+this.first[0]+this.size[0]-1};p.getColumnForX=function(g){return(g-this.origin[0])/this.norm[0]};p.getXForColumn=function(g){return this.origin[0]+g*this.norm[0]};p.getRowForY=function(g){return(this.origin[1]-g)/this.norm[1]};p.getYForRow=function(g){return this.origin[1]-g*this.norm[1]};p.getTileBounds=function(g,e,b=!1){v.set(e);var a=b?v.col:this.denormalizeCol(v.col,v.world),c=v.row;e=this.getXForColumn(a);b=this.getYForRow(c+1);a=this.getXForColumn(a+1);
c=this.getYForRow(c);g[0]=e;g[1]=b;g[2]=a;g[3]=c;return g};p.getTileCoords=function(g,e,b=!1){v.set(e);e=b?v.col:this.denormalizeCol(v.col,v.world);Array.isArray(g)?r(g,this.getXForColumn(e),this.getYForRow(v.row)):(g.x=this.getXForColumn(e),g.y=this.getYForRow(v.row));return g};return z}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(u){let n=function(){function h(){this.spans=[]}var r=h.prototype;r.acquire=function(v){this.lodInfo=v};r.release=function(){this.lodInfo=
null;this.spans.length=0};r.forEach=function(v,z){const {spans:p,lodInfo:g}=this,{level:e}=g;if(0!==p.length)for(const {row:b,colFrom:a,colTo:c}of p)for(let d=a;d<=c;d++)v.call(z,e,b,g.normalizeCol(d),g.getWorldForColumn(d))};return h}();n.pool=new u(n);return n})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(u,n,h){this.row=u;this.colFrom=n;this.colTo=h}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(u,n,h,r,v,z,p,g,e,b){function a(m,k){m.length=0;k.forEach(q=>m.push(q));return m}const c=new Set,d=[],f=new Map,l=[0,0];h=function(m){function k(t){t=m.call(this,t)||this;t._keyToItem=new Map;t.concurrency=6;t.strategy="scale-first";t.tileInfoView=null;return t}u._inheritsLoose(k,m);var q=k.prototype;q.initialize=function(){const {concurrency:t,process:w,strategy:A}=this;this._queue=new b.QueueProcessor({concurrency:t,process:(x,y)=>{x=this._keyToItem.get(x);return w(x,{signal:y})},peeker:"scale-first"===
A?x=>this._peekByScaleFirst(x):x=>this._peekByCenterFirst(x)})};q.destroy=function(){this.clear();this._queue.destroy();this._queue=null};q.abort=function(t){this._queue.abort("string"===typeof t?t:t.id)};q.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};q.has=function(t){return"string"===typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)};q.isOngoing=function(t){t="string"===typeof t?t:t.id;return this.has(t)&&this._queue.isOngoing(t)};q.pause=function(){this._queue.pause()};
q.push=function(t){const w=t.key.id;if(this._queue.has(w))return this._queue.get(w);const A=this._queue.push(w),x=()=>{this._keyToItem.delete(w);this.notifyChange("updating")};this._keyToItem.set(w,t);A.then(x,x);this.notifyChange("updating");return A};q.reset=function(){this._queue.reset()};q.resume=function(){this._queue.resume()};q._peekByScaleFirst=function(t){if(!this.state)return t.values().next().value;const w=this.tileInfoView;let A=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY;t.forEach(F=>
{F=this._keyToItem.get(F);const E=this.tileInfoView.getTileScale(F.key);f.has(E)||(f.set(E,[]),A=Math.max(E,A),x=Math.min(E,x));f.get(E).push(F.key);c.add(E)});let y=this.state.scale;f.has(y)||(a(d,c),d.sort((F,E)=>F-E),y=d.reduce((F,E)=>Math.abs(E-y)<Math.abs(F-y)?E:F,d[0]));y=Math.min(y,A);y=Math.max(y,x);t=f.get(y);const B=w.getClosestInfoForScale(y),C=B.getColumnForX(this.state.center[0]),D=B.getRowForY(this.state.center[1]);t.sort((F,E)=>{const G=B.denormalizeCol(F.col,F.world),O=B.denormalizeCol(E.col,
E.world);return Math.sqrt((C-G)*(C-G)+(D-F.row)*(D-F.row))-Math.sqrt((C-O)*(C-O)+(D-E.row)*(D-E.row))});c.clear();f.clear();return t[0].id};q._peekByCenterFirst=function(t){if(!this.state)return t.values().next().value;const w=this.tileInfoView,A=this.state.center;let x=Number.POSITIVE_INFINITY,y=null;t.forEach(B=>{B=this._keyToItem.get(B);w.getTileCoords(l,B.key);const C=e.distance(l,A);C<x&&(x=C,y=B.key)});return y.id};u._createClass(k,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return k}(h);n.__decorate([r.property({constructOnly:!0})],h.prototype,"concurrency",void 0);n.__decorate([r.property({constructOnly:!0})],h.prototype,"process",void 0);n.__decorate([r.property()],h.prototype,"state",void 0);n.__decorate([r.property({constructOnly:!0})],h.prototype,"strategy",void 0);n.__decorate([r.property({constructOnly:!0})],h.prototype,
"tileInfoView",void 0);n.__decorate([r.property({readOnly:!0})],h.prototype,"updating",null);return h=n.__decorate([g.subclass("esri.views.2d.tiling.TileQueue")],h)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(u,n,h,r){const v=new r(0,0,0,0),z=new Map,p=[],g=[];return function(){function e(a){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new n(a.cacheSize,this.tileInfoView,c=>{this.releaseTile(c)}))}var b=e.prototype;b.destroy=function(){this.tileIndex.clear()};
b.update=function(a){const {resampling:c,tileIndex:d}=this,f=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);g.length=0;p.length=0;z.clear();if(f){var {minScale:l,maxScale:m}=this.tileInfoView.tileInfo,{spans:k,lodInfo:q}=f,{level:t}=q,{scale:w,center:A,resolution:x}=a.state,y=!a.stationary&&w>this._previousScale;this._previousScale=w;this.tiles.length=0;if(!c&&(w>l||w<m))return this.tiles.length=0,z.clear(),d.forEach(E=>{this.releaseTile(E)}),d.clear(),g.length=0,p.length=
0,z.clear(),h.pool.release(f),!0;d.forEach(E=>E.visible=!0);var B=a=0;if(0<k.length)for(const {row:E,colFrom:G,colTo:O}of k)for(let H=G;H<=O;H++){a++;const K=v.set(t,E,q.normalizeCol(H),q.getWorldForColumn(H)).id;if(d.has(K)){var C=d.get(K);C.isReady?(z.set(K,C),B++):y||this._addParentTile(K,z)}else{if(this._tileCache&&this._tileCache.has(K)){if(C=this._tileCache.pop(K),this.tileIndex.set(K,C),C.isReady){z.set(K,C);B++;continue}}else C=this.acquireTile(v),this.tileIndex.set(K,C);y||this._addParentTile(K,
z)}}var D=B===a;d.forEach((E,G)=>{v.set(G);if(!z.has(G)){var O=this.tileInfoView.intersects(f,v),H="purge"===this.cachePolicy?v.level!==t:v.level>t;!O||!y&&D?!H&&O||p.push(G):E.isReady?H&&"purge"===this.cachePolicy&&this._hasReadyAncestor(v,t)?p.push(G):g.push(G):H&&p.push(G)}});for(var F of g)(a=d.get(F))&&a.isReady&&z.set(F,a);for(const E of p)F=d.get(E),this._tileCache?this._tileCache.add(F):this.releaseTile(F),d.delete(E);z.forEach(E=>this.tiles.push(E));d.forEach(E=>{z.has(E.key.id)||(E.visible=
!1)});this._tileCache&&this._tileCache.prune(t,A,x);h.pool.release(f);z.clear();return D}};b.clear=function(a=!0){const {tileIndex:c}=this;a&&c.forEach(d=>{this.releaseTile(d)});c.clear()};b.updateCacheSize=function(a){this._tileCache&&(this._tileCache.maxSize=a)};b._addParentTile=function(a,c){let d=null;for(;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((d=this.tileIndex.get(a))&&d.isReady){c.has(d.key.id)||c.set(d.key.id,d);break}}else if(this._tileCache&&this._tileCache.has(a)&&
(d=this._tileCache.pop(a),this.tileIndex.set(a,d),d&&d.isReady)){c.has(d.key.id)||c.set(d.key.id,d);break}}};b._hasReadyAncestor=function(a,c){const d=u.create();this.tileInfoView.getTileBounds(d,a,!0);for(const f of this.tileIndex.values())if(f.isReady&&f.key.level>=c&&f.key.level<a.level){const l=u.create();this.tileInfoView.getTileBounds(l,f.key,!0);if(u.contains(l,d))return!0}return!1};return e}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(u){return function(){function n(r,
v,z){this.maxSize=r;this.tileInfoView=v;this.removedFunc=z;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var h=n.prototype;h.has=function(r){return this._tilePerId.has(r)};h.get=function(r){return this._tilePerId.get(r)};h.pop=function(r){const v=this._tilePerId.get(r);if(!v)return null;const z=this._tileKeysPerLevel[v.key.level];this._tilePerId["delete"](r);for(let p=0;p<z.length;p++)if(z[p].id===r){z.splice(p,1);break}v.visible=!0;return v};h.add=function(r){r.visible=!1;const v=r.key,z=v.id;
this._tilePerId.has(z)||(this._tilePerId.set(z,r),r=v.level,this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(v))};h.prune=function(r,v,z){let p=this._tilePerId.size;if(!(p<=this.maxSize)){for(var g=this._tileKeysPerLevel.length-1;p>this.maxSize&&0<=g;)g!==r&&(p=this._pruneAroundCenterTile(p,v,z,g)),g--;p>this.maxSize&&(p=this._pruneAroundCenterTile(p,v,z,r))}};h._pruneAroundCenterTile=function(r,v,z,p){p=this._tileKeysPerLevel[p];if(!p||0===p.length)return r;
const {size:g,origin:e}=this.tileInfoView.tileInfo,b=z*g[0],a=z*g[1],c=[0,0],d=[0,0];for(p.sort((f,l)=>{c[0]=e.x+b*(f.col+.5);c[1]=e.y-a*(f.row+.5);d[0]=e.x+b*(l.col+.5);d[1]=e.y-a*(l.row+.5);return u.squaredDistance(c,v)-u.squaredDistance(d,v)});0<p.length&&(z=p.pop(),this._removeTile(z.id),r--,r!==this.maxSize););return r};h._removeTile=function(r){const v=this._tilePerId.get(r);this.removedFunc&&this.removedFunc(v);this._tilePerId["delete"](r)};return n}()})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E){var G={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},O={zoomIn:["\x3d","+"],zoomOut:["-","_"]},H={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};h=function(K){function P(){var M=K.apply(this,arguments)||this;M._handles=new r;return M}u._inheritsLoose(P,K);var L=P.prototype;L.initialize=function(){const M=()=>{var J;return null==
(J=this.view)?void 0:J.ready};this._handles.add([v.when(()=>!M(),()=>this._disconnect()),v.when(M,()=>this._connect())])};L.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};L._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};L._connect=function(){const M=new A.BrowserEventSource(this.view.surface,this.view.input);var J=[new D.ImmediateDoubleClick,
new F.PointerClickHoldAndDrag,new E.SingleAndDoubleClick,new C.Drag(this.view.navigation),new B.DoubleTapDrag];J=new x.InputManager({eventSource:M,recognizers:J});J.installHandlers("prevent-context-menu",[new y.PreventContextMenu],x.ViewEventPriorities.INTERNAL);J.installHandlers("navigation",[new w.PinchRotateAndZoom(this.view),new l.GamepadNavigation(this.view),new t.MouseWheelZoom(this.view),new a.DoubleClickZoom(this.view),new a.DoubleClickZoom(this.view,["Ctrl"]),new d.DragPan(this.view,"primary"),
new m.KeyPan(this.view,G),new q.KeyZoom(this.view,O),new k.KeyRotate(this.view,H),new f.DragRotate(this.view,"secondary"),new c.DoubleTapDragZoom(this.view,"touch")],x.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(J);this._source=M;this._inputManager=J;v.watch(()=>{var R,X;return null==(R=this.view)?void 0:null==(X=R.navigation)?void 0:X.browserTouchPanEnabled},R=>{this._source&&(this._source.browserTouchPanningEnabled=!R)},v.initial)};u._createClass(P,[{key:"latestPointerType",get:function(){var M;
return null==(M=this._inputManager)?void 0:M.latestPointerType}},{key:"latestPointerLocation",get:function(){var M;return null==(M=this._inputManager)?void 0:M.latestPointerLocation}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return P}(h);n.__decorate([z.property()],h.prototype,"view",void 0);n.__decorate([z.property()],h.prototype,"latestPointerType",null);n.__decorate([z.property()],h.prototype,"latestPointerLocation",null);return h=n.__decorate([b.subclass("esri.views.2d.input.MapViewInputManager")],
h)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(u,n,h,r){h=function(v){function z(p,g){var e=v.call(this,!0)||this;e.view=p;e.registerIncoming("double-click",g,b=>e._handleDoubleClick(b,g));return e}n._inheritsLoose(z,v);z.prototype._handleDoubleClick=function(p,g){r.eventMatchesPointerAction(p.data,"primary")&&(p.stopPropagation(),g?this.view.mapViewNavigation.zoomOut([p.data.x,
p.data.y]):this.view.mapViewNavigation.zoomIn([p.data.x,p.data.y]))};return z}(h.InputHandler);u.DoubleClickZoom=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/handlers/support":function(){define(["exports"],function(u){u.eventMatchesMousePointerAction=function(n,h){if("touch"===n.pointerType)return!1;switch(h){case "primary":return 0===n.button;case "secondary":return 2===n.button;case "tertiary":return 1===n.button}};u.eventMatchesPointerAction=
function(n,h){switch(h){case "primary":return"touch"===n.pointerType||0===n.button;case "secondary":return"touch"!==n.pointerType&&2===n.button;case "tertiary":return"touch"!==n.pointerType&&1===n.button}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(u,n,h,r){h=function(v){function z(p,
g,e){var b=v.call(this,!0)||this;b.view=p;b.pointerType=g;b.registerIncoming("double-tap-drag",e,a=>b._handleDoubleTapDrag(a));return b}n._inheritsLoose(z,v);z.prototype._handleDoubleTapDrag=function(p){var {data:g}=p,{pointerType:e}=g;if(e===this.pointerType){p.stopPropagation();var {action:b,delta:a}=g;({view:g}=this);({mapViewNavigation:p}=g);switch(b){case "begin":({scale:g}=g);this._currentScale=this._startScale=g;this._previousDelta=a;p.begin();break;case "update":if(this._previousDelta.y===
a.y)break;this._previousDelta=a;g=this._startScale*1.015**a.y;p.setViewpointImmediate(g/this._currentScale);this._currentScale=g;break;case "end":{({constraints:e}=g);const {effectiveLODs:c,snapToZoom:d}=e;d&&c?(g=e.snapScale(this._currentScale),g=(0<a.y?Math.max(g,e.snapToPreviousScale(this._startScale)):Math.min(g,e.snapToNextScale(this._startScale)))/this._currentScale,p.zoom(g)):p.end()}}}};return z}(r.InputHandler);u.DoubleTapDragZoom=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(u,n,h,r,v){r=function(z){function p(e,b,a){var c=z.call(this,!0)||this;c.view=e;c.pointerAction=b;c.registerIncoming("drag",a,d=>c._handleDrag(d));c.registerIncoming("pointer-down",()=>c.stopMomentumNavigation());return c}n._inheritsLoose(p,z);var g=p.prototype;g.onInstall=function(e){z.prototype.onInstall.call(this,
e);this.dragEventSeparator=new h.DragEventSeparator({start:(b,a)=>{this.view.mapViewNavigation.pan.begin(this.view,a.data);a.stopPropagation()},update:(b,a)=>{this.view.mapViewNavigation.pan.update(this.view,a.data);a.stopPropagation()},end:(b,a)=>{this.view.mapViewNavigation.pan.end(this.view,a.data);a.stopPropagation()},condition:(b,a)=>1===b&&v.eventMatchesPointerAction(a.data,this.pointerAction)})};g._handleDrag=function(e){const b=this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?
this.stopMomentumNavigation():this.dragEventSeparator.handle(e)};g.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return p}(r.InputHandler);u.DragPan=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(u){let n=function(){function h(v){this.callbacks=v;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=()=>!0)}var r=
h.prototype;r.handle=function(v){const z=v.data,p=z.pointers.size;switch(z.action){case "start":this.currentCount=p;this._emitStart(v);break;case "added":this._emitEnd(this.previousEvent);this.currentCount=p;this._emitStart(v);break;case "update":this._emitUpdate(v);break;case "removed":this.startEvent&&this._emitEnd(this.previousEvent);this.currentCount=p;this._emitStart(v);break;case "end":this._emitEnd(v),this.currentCount=0}this.previousEvent=v};r._emitStart=function(v){this.startEvent=v;this.callbacks.condition(this.currentCount,
v)&&this.callbacks.start(this.currentCount,v,this.startEvent)};r._emitUpdate=function(v){this.callbacks.condition(this.currentCount,v)&&this.callbacks.update(this.currentCount,v,this.startEvent)};r._emitEnd=function(v){this.callbacks.condition(this.currentCount,v)&&this.callbacks.end(this.currentCount,v,this.startEvent);this.startEvent=null};return h}();u.DragEventSeparator=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(u,n,h,r,v){r=function(z){function p(g,e,b){var a=z.call(this,!0)||this;a.view=g;a.pointerAction=e;const c=a.view.mapViewNavigation;a.dragEventSeparator=new h.DragEventSeparator({start:(d,f)=>{c.rotate.begin(a.view,f.data);f.stopPropagation()},update:(d,f)=>{c.rotate.update(a.view,f.data);f.stopPropagation()},end:(d,f)=>{c.rotate.end();f.stopPropagation()},
condition:(d,f)=>1===d&&v.eventMatchesPointerAction(f.data,a.pointerAction)});a.registerIncoming("drag",b,d=>a.dragEventSeparator.handle(d));return a}n._inheritsLoose(p,z);return p}(r.InputHandler);u.DragRotate=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(u,n,h,r,v,z,p,g){p=function(e){function b(c){var d=e.call(this,!0)||this;d.view=c;d.frameTask=null;d.watchHandles=new h;d.currentDevice=null;d.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};d.handle=d.registerIncoming("gamepad",f=>d._handleGamePadEvent(f));d.handle.pause();return d}n._inheritsLoose(b,e);var a=b.prototype;a.onInstall=function(c){e.prototype.onInstall.call(this,c);this.watchHandles.add([r.watch(()=>{var d;return null==(d=this.view.navigation.gamepad)?void 0:d.enabled},
d=>{d?(this.handle.resume(),this.frameTask||(this.frameTask=v.addFrameTask({update:f=>this._frameUpdate(f.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},r.initial)])};a.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);e.prototype.onUninstall.call(this)};a._handleGamePadEvent=function(c){const d=this.view.navigation.gamepad.device;d&&c.data.device!==d||this.currentDevice&&this.currentDevice!==
c.data.device||("end"===c.data.action?(this.currentDevice=null,g.resetTransformation(this.transformation)):(this.currentDevice=c.data.device,g.extractTransformation(c.data,this.view.navigation.gamepad,this.transformation)))};a._frameUpdate=function(c){const d=this.transformation;if(!g.isZeroTransformation(d)){var f=this.view.viewpoint.clone(),l=.7*this.view.navigation.gamepad.velocityFactor*c;z.translateBy(f,f,[d.translation[0]*l,-d.translation[1]*l]);l=this.view.size;z.scaleAndRotateBy(f,f,1+6E-4*
d.translation[2]*c,this.view.constraints.rotationEnabled?.06*-d.heading*c:0,[l[0]/2,l[1]],l);c=this.view.constraints.constrain(f,this.view.viewpoint);this.view.viewpoint=c}};return b}(p.InputHandler);u.GamepadNavigation=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(u,n){function h(r){let v=r*r;0>r&&(v*=-1);return v}u.extractTransformation=function(r,
v,z){const p=r.state;r=r.device;v="forward-down"===v.tiltDirection?1:-1;"standard"===r.deviceType?(z.translation[0]=h(p.axes[0]),z.translation[1]=h(p.axes[1]),z.translation[2]=h(p.buttons[7])-h(p.buttons[6]),z.heading=h(p.axes[2]),z.tilt=h(p.axes[3])):"spacemouse"===r.deviceType&&(z.translation[0]=1.2*h(p.axes[0]),z.translation[1]=1.2*h(p.axes[1]),z.translation[2]=2*-h(p.axes[2]),z.heading=1.2*h(p.axes[5]),z.tilt=1.2*h(p.axes[3]));z.tilt*=v;n.scale(z.translation,z.translation,1);return z};u.extractTransformationKeyboard=
function(r,v){v.translation[0]=r[1]-r[0];v.translation[1]=r[3]-r[2];v.translation[2]=r[4]-r[5];v.heading=r[7]-r[6];v.tilt=r[8]-r[9];v.zoom=r[10]-r[11];return v};u.isZeroTransformation=function(r){return 0===r.translation[0]&&0===r.translation[1]&&0===r.translation[2]&&0===r.heading&&0===r.tilt&&0===r.zoom};u.quadraticAccentuation=h;u.resetTransformation=function(r){r.translation[0]=0;r.translation[1]=0;r.translation[2]=0;r.heading=0;r.tilt=0;return r};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(u,n,h){h=function(r){function v(p,g,e){var b=r.call(this,!0)||this;b.view=p;b.keys=g;b._pressed=!1;b._keyMap={[g.left]:"left",[g.right]:"right",[g.up]:"up",[g.down]:"down"};b.registerIncoming("key-down",e,a=>b._handleKeyDown(a));b.registerIncoming("key-up",e,a=>b._handleKeyUp(a));b.registerIncoming("blur",
e,()=>b._handleBlur());return b}n._inheritsLoose(v,r);var z=v.prototype;z._handleKeyDown=function(p){p.data.repeat||this._handleKey(p,!0)};z._handleKeyUp=function(p){this._handleKey(p,!1)};z._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};z._handleKey=function(p,g){const e=this._keyMap[p.data.key];if(this._pressed=null!=e){if(g)switch(this.view.mapViewNavigation.begin(),e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();p.stopPropagation()}};return v}(h.InputHandler);u.KeyPan=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(u,n,h){h=function(r){function v(p,
g,e){var b=r.call(this,!0)||this;b.view=p;b.keys=g;b._pressed=!1;b._keyToDirection={[g.clockwiseOption1]:"clockwise",[g.clockwiseOption2]:"clockwise",[g.counterClockwiseOption1]:"counterClockwise",[g.counterClockwiseOption2]:"counterClockwise",[g.resetOption1]:"reset",[g.resetOption2]:"reset"};b.registerIncoming("key-down",e,a=>b._handleKeyDown(a));b.registerIncoming("key-up",e,a=>b._handleKeyUp(a));b.registerIncoming("blur",e,()=>b._handleBlur());return b}n._inheritsLoose(v,r);var z=v.prototype;
z._handleKeyDown=function(p){p.data.repeat||this._handleKey(p,!0)};z._handleKeyUp=function(p){this._handleKey(p,!1)};z._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};z._handleKey=function(p,g){var e=p.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[p.data.key],this._pressed=null!=e)){if(g)switch(this.view.mapViewNavigation.begin(),e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();p.stopPropagation()}};return v}(h.InputHandler);u.KeyRotate=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has",
"../../../input/InputHandler"],function(u,n,h,r){var v;(function(z){z[z.IN=0]="IN";z[z.OUT=1]="OUT"})(v||(v={}));h=function(z){function p(e,b,a){var c=z.call(this,!0)||this;c.view=e;c.keys=b;c._keysToZoomAction={};c.registerIncoming("key-down",a,d=>c._handleKeyDown(d));b.zoomIn.forEach(d=>c._keysToZoomAction[d]=v.IN);b.zoomOut.forEach(d=>c._keysToZoomAction[d]=v.OUT);return c}n._inheritsLoose(p,z);var g=p.prototype;g._handleKeyDown=function(e){this._handleKey(e)};g._handleKey=function(e){var b=e.modifiers;
if(!(0<b.size)||b.has("Shift"))if({key:b}=e.data,b in this._keysToZoomAction){b=this._keysToZoomAction[b];var {mapViewNavigation:a}=this.view,c=null;switch(b){case v.IN:c=a.zoomIn();break;case v.OUT:c=a.zoomOut();break;default:return}a.begin();c.then(()=>a.end());e.stopPropagation()}};return p}(r.InputHandler);u.KeyZoom=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../input/InputHandler"],function(u,n,h){h=function(r){function v(z,p){var g=r.call(this,!0)||this;g.view=z;g._canZoom=!0;g.registerIncoming("mouse-wheel",p,e=>g._handleMouseWheel(e));return g}n._inheritsLoose(v,r);v.prototype._handleMouseWheel=function(z){if(this.view.navigation.mouseWheelZoomEnabled&&(z.preventDefault(),z.stopPropagation(),this._canZoom)){var p=this.view.mapViewNavigation,{x:g,y:e,deltaY:b}=z.data;if(z=p.zoom(1/.6**(1/60*b),[g,e]))this._canZoom=!1,z.catch(()=>{}).then(()=>
{this._canZoom=!0;p.end()})}};return v}(h.InputHandler);u.MouseWheelZoom=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(u,n,h,r){r=function(v){function z(g){var e=v.call(this,!0)||this;e.view=g;e.registerIncoming("drag",a=>e._handleDrag(a));e.registerIncoming("pointer-down",
()=>e._stopMomentumNavigation());const b=e.view.mapViewNavigation;e.dragEventSeparator=new h.DragEventSeparator({start:(a,c)=>{b.pinch.begin(e.view,c.data);c.stopPropagation()},update:(a,c)=>{b.pinch.update(e.view,c.data);c.stopPropagation()},end:(a,c)=>{b.pinch.end(e.view);c.stopPropagation()},condition:a=>2<=a});return e}n._inheritsLoose(z,v);var p=z.prototype;p._handleDrag=function(g){this.dragEventSeparator.handle(g)};p._stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};
return z}(r.InputHandler);u.PinchRotateAndZoom=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(u,n,h,r,v,z){const p=h("trident"),g=h("edge"),e=h("chrome"),b=h("ff"),a=h("safari");h=function(){function d(l,m){this.input=m;this._active={};this._activePointerCaptures=
new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=l;l.getAttribute("tabindex")||l.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,
"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new v.GamepadSource(l,this.input);this._gamepadSource.onEvent=k=>this._callback("gamepad",k)}var f=d.prototype;f.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(l=>{this._releasePointerCaptureSafe(l)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=
null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};f.setPointerCapture=function(l,m){m?(this._element.setPointerCapture(l.pointerId),this._activePointerCaptures.add(l.pointerId)):(this._releasePointerCaptureSafe(l.pointerId),this._activePointerCaptures.delete(l.pointerId))};f._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?
"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};f._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};f._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};
f._releasePointerCaptureSafe=function(l){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(l)||this._element.releasePointerCapture(l)}catch(m){}};f._updateNormalizedPointerLikeEvent=function(l,m){l=z.createScreenPointFromNativeEvent(this._element,l);d.test.disableSubpixelCoordinates&&(l.x=Math.round(l.x),l.y=Math.round(l.y));m.x=l.x;m.y=l.y;return m};f._handleKey=function(l,m){const k=r.eventKey(m);k&&"key-up"===l&&this._keyDownState.delete(k);m={native:m,key:k,repeat:k&&this._keyDownState.has(k)};
k&&"key-down"===l&&this._keyDownState.add(m.key);this._callback(l,m)};f._handlePointer=function(l,m){m=this._updateNormalizedPointerLikeEvent(m,{native:m,x:0,y:0,pointerType:m.pointerType,button:m.button,buttons:m.buttons,eventId:this._eventId++});this._callback(l,m)};f._handlePointerPreventDefault=function(l,m){const k=this._updateNormalizedPointerLikeEvent(m,{native:m,x:0,y:0,pointerType:m.pointerType,button:m.button,buttons:m.buttons,eventId:this._eventId++});m.preventDefault();this._callback(l,
k)};f._handleMouseWheel=function(l,m){let k=m.deltaY;switch(m.deltaMode){case 0:if(p||g)k=k/document.documentElement.clientHeight*600;break;case 1:k*=30;break;case 2:k*=900}p||g?k*=.7:e||a?k*=.6:b&&(k*=1.375);const q=Math.abs(k);100<q&&(k=k/q*200/(1+Math.exp(-.02*(q-100))));m=this._updateNormalizedPointerLikeEvent(m,{native:m,x:0,y:0,deltaY:k});this._callback(l,m)};f._handlePointerCaptureLost=function(l,m){this._activePointerCaptures.delete(m.pointerId);this._handleDefault(l,m)};f._handleDefault=
function(l,m){const k={native:m};m.preventDefault();this._callback(l,k)};f._preventAltKeyDefault=function(l){"Alt"===l.key&&l.preventDefault()};f._preventMultiTouchPanning=function(l){1<l.touches.length&&l.preventDefault()};n._createClass(d,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(l){this._browserTouchPanningEnabled=l;this._updateTouchAction();this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(l){this._callback=l}},
{key:"activeEvents",set:function(l){for(const m in this._active)l&&l.has(m)||(this._element.removeEventListener(c[m],this._active[m]),delete this._active[m]);l&&l.forEach(m=>{if(!this._active[m]&&c[m]){const k=(this._eventHandlers[m]||this._handleDefault).bind(this,m);this._element.addEventListener(c[m],k);this._active[m]=k}});this._gamepadSource.hasEventListeners=l&&l.has("gamepad")}}]);return d}();h.test={disableSubpixelCoordinates:!1};const c={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown",
"pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};u.BrowserEventSource=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(u,n,h,r,v){let z=function(){function p(e,b){this.element=e;this.input=b;this._hasEventListeners=!1;this._onConnectGamepad=a=>{this._connectGamepad(a.gamepad)};this._onDisconnectGamepad=a=>{a=a.gamepad;const c=a.index,d=this.inputDevices[c];d&&(this._emitGamepadEvent(a,v.extractState(d),!1),this.inputDevices.splice(c,1),this.latestUpdate.splice(c,1),this.input.gamepad.devices.remove(d),this.ensurePollingState())};this.frameTask=
null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;e=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&e)this._forEachGamepad(a=>this._connectGamepad(a)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}var g=p.prototype;g.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),
window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))};g._connectGamepad=function(e){const b=new r(e);"unknown"!==b.deviceType&&(this.inputDevices[e.index]=b,this.input.gamepad.devices.add(b));this.ensurePollingState()};g.ensurePollingState=function(){this.eventsEnabled?this._startPolling():this._stopPolling()};g._startPolling=function(){null==this.frameTask&&(this.frameTask=h.addFrameTask({update:()=>this._readGamepadState()}))};g._stopPolling=function(){null!=this.frameTask&&
(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};g._readGamepadState=function(){const e=document.hasFocus(),b=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!b;this._forEachGamepad(c=>{var d=this.inputDevices[c.index];if(d){var f=this.latestUpdate[c.index];d=v.extractState(d);var l=a||v.stateIdle(d);f&&(f.timestamp===c.timestamp||!f.active&&l||v.stateEqual(f.state,d))||this._emitGamepadEvent(c,
d,!l)}})};g._forEachGamepad=function(e){const b=window.navigator.getGamepads();for(let a=0;a<b.length;a++){const c=b[a];this._validate(c)&&e(c)}};g._emitGamepadEvent=function(e,b,a){var c=this.latestUpdate[e.index];if((c=c&&c.active)||a)this.latestUpdate[e.index]={timestamp:e.timestamp,state:b,active:a},this.callback&&this.callback({device:this.inputDevices[e.index],state:b,action:!c&&a?"start":c&&a?"update":"end"})};g._validate=function(e){if(!e||!e.connected)return!1;for(let b=0;b<e.axes.length;b++)if(isNaN(e.axes[b]))return!1;
return!0};n._createClass(p,[{key:"hasEventListeners",set:function(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(e){this.callback=e}}]);return p}();u.GamepadSource=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],
function(u){u.extractState=function(n){const h=n.native;return h?{buttons:h.buttons.map(r=>r.pressed?r.value?r.value:1:0),axes:h.axes.map(r=>{{var v=n.axisThreshold;const z=Math.abs(r);r=z<v?0:Math.sign(r)*(z-v)/(1-v)}return r})}:{buttons:[],axes:[]}};u.stateEqual=function(n,h){if(n.axes.length!==h.axes.length||n.buttons.length!==h.buttons.length)return!1;for(var r=0;r<n.axes.length;r++)if(n.axes[r]!==h.axes[r])return!1;for(r=0;r<n.buttons.length;r++)if(n.buttons[r]!==h.buttons[r])return!1;return!0};
u.stateIdle=function(n){for(var h=0;h<n.axes.length;h++)if(0!==n.axes[h])return!1;for(h=0;h<n.buttons.length;h++)if(0!==n.buttons[h])return!1;return!0};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(u,n,h){h=function(r){function v(){var z=r.call(this,!0)||this;z.registerIncoming("context-menu",p=>{p.data.native.preventDefault()});
return z}n._inheritsLoose(v,r);return v}(h.InputHandler);u.PreventContextMenu=h;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(u,n,h,r,v,z,p,g,e){p=function(b){function a(d=g.DefaultParameters.maximumDoubleClickDelay,
f=g.DefaultParameters.maximumDoubleClickDistance,l=g.DefaultParameters.maximumDoubleTouchDelay,m=g.DefaultParameters.maximumDoubleTouchDistance,k=h.clock){var q=b.call(this,!1)||this;q.maximumDoubleClickDelay=d;q.maximumDoubleClickDistance=f;q.maximumDoubleTouchDelay=l;q.maximumDoubleTouchDistance=m;q._clock=k;q._doubleTapDragReady=!1;q._doubleTapDragActive=!1;q._dragStartCenter=v.createScreenPoint(0,0);q._pointerState=new Map;q._doubleTapDrag=q.registerOutgoing("double-tap-drag");q._dragEventSeparator=
new z.DragEventSeparator({start:(t,w)=>q._dragStart(t,w),update:(t,w)=>q._dragUpdate(w),end:(t,w)=>q._dragEnd(w)});q.registerIncoming("drag",t=>q._dragEventSeparator.handle(t));q.registerIncoming("pointer-down",t=>q._handlePointerDown(t));q.registerIncoming("pointer-up",()=>q._handlePointerUp());return q}n._inheritsLoose(a,b);var c=a.prototype;c.onUninstall=function(){this._pointerState.forEach(d=>{null!=d.doubleTapTimeout&&(d.doubleTapTimeout.remove(),d.doubleTapTimeout=null)})};c._clearPointerDown=
function(d){const f=this._pointerState.get(d);f&&(f.doubleTapTimeout.remove(),f.doubleTapTimeout=null,this._pointerState.delete(d),this.refreshHasPendingInputs())};c._createDoubleTapDragData=function(d,f,l){const {button:m,buttons:k,pointer:q,pointers:t,pointerType:w,timestamp:A}=l;return{action:d,delta:f,button:m,buttons:k,pointer:q,pointers:t,pointerType:w,timestamp:A}};c._dragStart=function(d,f){if(this._doubleTapDragReady&&1===d){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:l,
modifiers:m}=f;({center:d}=l);this._dragStartCenter=d;d=this._createDoubleTapDragData("begin",v.createScreenPoint(0,0),l);this._doubleTapDrag.emit(d,void 0,m);f.stopPropagation()}};c._dragUpdate=function(d){if(this._doubleTapDragActive){var {data:f,modifiers:l}=d,{center:m}=f;m=v.createScreenPoint(m.x-this._dragStartCenter.x,m.y-this._dragStartCenter.y);m=this._createDoubleTapDragData("update",m,f);this._doubleTapDrag.emit(m,void 0,l);d.stopPropagation()}};c._dragEnd=function(d){if(this._doubleTapDragActive){var {data:f,
modifiers:l}=d,{center:m}=f;m=v.createScreenPoint(m.x-this._dragStartCenter.x,m.y-this._dragStartCenter.y);m=this._createDoubleTapDragData("end",m,f);this._doubleTapDrag.emit(m,void 0,l);this._doubleTapDragActive=!1;d.stopPropagation()}};c._handlePointerDown=function(d){const {data:f}=d,l=this._pointerId(f),m=this._pointerState.get(l);var {pointerType:k}=f.native;m?(k="touch"===k?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(l),e.manhattanDistance(m.event.data,
f)>k?this._storePointerDown(d):this._doubleTapDragReady=!0):this._storePointerDown(d)};c._handlePointerUp=function(){this._doubleTapDragReady=!1};c._pointerId=function(d){({native:d}=d);const {pointerId:f,button:l,pointerType:m}=d;return"mouse"===m?`${f}:${l}`:`${m}`};c._storePointerDown=function(d){var {data:f}=d;const {pointerType:l}=f.native,m=this._pointerId(f);f=this._clock.setTimeout(()=>this._clearPointerDown(m),"touch"===l?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(m,
{event:d,doubleTapTimeout:f});this.refreshHasPendingInputs()};n._createClass(a,[{key:"hasPendingInputs",get:function(){return r.someMap(this._pointerState,d=>null!=d.doubleTapTimeout)}}]);return a}(p.InputHandler);u.DoubleTapDrag=p;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),
function(u,n,h,r,v,z,p){const g={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};z=function(e){function b(c=g.maximumDoubleClickDelay,d=g.maximumDoubleClickDistance,f=g.maximumDoubleTouchDelay,l=g.maximumDoubleTouchDistance,m=h.clock){var k=e.call(this,!1)||this;k.maximumDoubleClickDelay=c;k.maximumDoubleClickDistance=d;k.maximumDoubleTouchDelay=f;k.maximumDoubleTouchDistance=l;k._clock=m;k._pointerState=new Map;k._click=k.registerOutgoing("click");
k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",k._handleImmediateClick.bind(n._assertThisInitialized(k)));k.registerIncoming("pointer-drag",k._handlePointerDrag.bind(n._assertThisInitialized(k)));k.registerIncoming("drag",k._handleDrag.bind(n._assertThisInitialized(k)));return k}n._inheritsLoose(b,e);var a=b.prototype;a.onUninstall=function(){this._pointerState.forEach(c=>c.doubleClickTimeout=v.removeMaybe(c.doubleClickTimeout))};a._pointerId=function(c){c=
c.native;return"mouse"===c.pointerType?`${c.pointerId}:${c.button}`:`${c.pointerType}`};a._handleImmediateClick=function(c){const d=c.data,f=this._pointerId(d),l=this._pointerState.get(f);if(l){const m="touch"===d.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;p.manhattanDistance(l.event.data,d)>m?(this._clearDoubleClickTimeout(f,!0),this._startClick(c)):(this._clearDoubleClickTimeout(f,!1),this._doubleClick.emit(l.event.data,void 0,l.event.modifiers))}else this._startClick(c)};
a._startClick=function(c){const d=this._pointerId(c.data);this._pointerState.set(d,{event:c,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(d),"touch"===c.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};a._handlePointerDrag=function(c){c=this._pointerId(c.data.currentEvent);this._clearDoubleClickTimeout(c,!0)};a._handleDrag=function(c){c=this._pointerId(c.data.pointer);this._clearDoubleClickTimeout(c,
!0)};a._clearDoubleClickTimeout=function(c,d){const f=this._pointerState.get(c);f&&(f.doubleClickTimeout.remove(),f.doubleClickTimeout=null,d&&this._doubleClickTimeoutExceeded(c),this._pointerState.delete(c),this.refreshHasPendingInputs())};a._doubleClickTimeoutExceeded=function(c){const d=this._pointerState.get(c);this._click.emit(d.event.data,void 0,d.event.modifiers);d.doubleClickTimeout=null;this._pointerState.delete(c);this.refreshHasPendingInputs()};n._createClass(b,[{key:"hasPendingInputs",
get:function(){return r.someMap(this._pointerState,c=>null!=c.doubleClickTimeout)}}]);return b}(z.InputHandler);u.DefaultParameters=g;u.SingleAndDoubleClick=z;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(u,n){u.euclideanDistance=function(h,r){const v=r.x-h.x;h=r.y-h.y;return Math.sqrt(v*v+h*h)};u.fitCircleLSQ=function(h,r){r?(r.radius=0,r.center.x=
0,r.center.y=0):r={radius:0,center:n.createScreenPoint()};if(0===h.length)return r;if(1===h.length)return r.center.x=h[0].x,r.center.y=h[0].y,r;if(2===h.length){const [m,k]=h,[q,t]=[k.x-m.x,k.y-m.y];r.radius=Math.sqrt(q*q+t*t)/2;r.center.x=(m.x+k.x)/2;r.center.y=(m.y+k.y)/2;return r}let v=0,z=0;for(r=0;r<h.length;r++)v+=h[r].x,z+=h[r].y;v/=h.length;z/=h.length;var p=h.map(m=>m.x-v),g=h.map(m=>m.y-z);let e=r=0;var b=0,a=0,c=0,d=0,f=0;for(var l=0;l<p.length;l++){const m=p[l],k=g[l],q=m*m,t=k*k;r+=q;
e+=t;b+=m*k;a+=q*m;c+=t*k;d+=m*t;f+=k*q}p=r;g=b;l=e;a=.5*(a+d);c=.5*(c+f);f=p*l-b*g;d=(a*l-c*g)/f;c=(p*c-b*a)/f;f=n.createScreenPoint(d+v,c+z);return{radius:Math.sqrt(d*d+c*c+(r+e)/h.length),center:f}};u.manhattanDistance=function(h,r){return Math.abs(r.x-h.x)+Math.abs(r.y-h.y)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),
function(u,n,h,r,v,z){function p(a){const c=[];a.forEach(d=>{c.push(h.createScreenPoint(d.event.x,d.event.y))});return z.fitCircleLSQ(c)}function g(a){const c=p(a);let d=0;a.forEach(f=>{var l=b(f,c);for(l-=f.lastAngle;l>Math.PI;)l-=2*Math.PI;for(;l<-Math.PI;)l+=2*Math.PI;l=f.lastAngle+l;f.lastAngle=l;d+=l-f.initialAngle});d/=a.size||1;return{angle:d,radius:c.radius,center:c.center}}function e(a){const c=new Map;a.forEach((d,f)=>c.set(f,d.event));return c}function b(a,c){a=a.event;return Math.atan2(a.y-
c.center.y,a.x-c.center.x)}v=function(a){function c(f){var l=a.call(this,!1)||this;l.navigationTouch=f;l.startStateModifiers=new Set;l.activePointerMap=new Map;l.isDragging=!1;l.isCurrentDragSuppressed=!1;l.drag=l.registerOutgoing("drag");l.registerIncoming("pointer-drag",l._handlePointerDrag.bind(n._assertThisInitialized(l)));l.registerIncoming("pointer-up",l._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(l)));l.registerIncoming("pointer-capture-lost",l._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(l)));
l.registerIncoming("pointer-cancel",l._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(l)));return l}n._inheritsLoose(c,a);var d=c.prototype;d._createPayload=function(f,l,m,k){return{action:f,pointerType:this.pointerType,button:this.mouseButton,buttons:l.buttons,timestamp:k,pointers:e(this.activePointerMap),pointer:l,angle:m.angle,radius:m.radius,center:m.center}};d._addPointer=function(f){var l=f.native.pointerId;const m=g(this.activePointerMap).angle;f={event:f,initialAngle:0,lastAngle:0};
this.activePointerMap.set(l,f);l=b(f,p(this.activePointerMap));f.initialAngle=l;f.lastAngle=l;this._updatePointerAngles(m)};d._updatePointer=function(f){if(!f||null!=f.x||null!=f.y){var l=this.activePointerMap.get(f.native.pointerId);l?l.event=f:this._addPointer(f)}};d._removePointer=function(f){const l=g(this.activePointerMap).angle;this.activePointerMap.delete(f);this._updatePointerAngles(l)};d._updatePointerAngles=function(f){const l=g(this.activePointerMap);this.activePointerMap.forEach(m=>{m.initialAngle=
b(m,l)-f;m.lastAngle=b(m,l)-f})};d._emitEvent=function(f,l,m){const k=g(this.activePointerMap);this.drag.emit(this._createPayload(f,l,k,m),void 0,this.startStateModifiers)};d._handlePointerUpAndPointerLost=function(f){const l=f.data.native.pointerId,m=r.Milliseconds(f.timestamp);this.activePointerMap.get(l)&&(1===this.activePointerMap.size?(this._updatePointer(f.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",f.data,m),this.isCurrentDragSuppressed=this.isDragging=!1,this._removePointer(l)):
(this._removePointer(l),this._emitEvent("removed",f.data,r.Milliseconds(f.timestamp))))};d._handlePointerDrag=function(f){const l=f.data,m=l.currentEvent,k=r.Milliseconds(f.timestamp);switch(l.action){case "start":case "update":this.isDragging?this.activePointerMap.has(m.native.pointerId)?(this._updatePointer(m),!this.isCurrentDragSuppressed&&this._emitEvent("update",m,k)):(this._addPointer(m),this._emitEvent("added",m,k),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(m),this.pointerType=
f.data.startEvent.pointerType,this.mouseButton=f.data.startEvent.button,this.startStateModifiers=f.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",m,k))}};n._createClass(c,[{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]);return c}(v.InputHandler);u.Button=void 0;(function(a){a[a.Left=0]="Left";
a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(u.Button||(u.Button={}));u.Drag=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(u,n,h,r,v,z){r=function(p){function g(b=v.DefaultParameters.maximumDoubleClickDelay,
a=v.DefaultParameters.maximumDoubleClickDistance,c=v.DefaultParameters.maximumDoubleTouchDelay,d=v.DefaultParameters.maximumDoubleTouchDistance,f=h.clock){var l=p.call(this,!1)||this;l.maximumDoubleClickDelay=b;l.maximumDoubleClickDistance=a;l.maximumDoubleTouchDelay=c;l.maximumDoubleTouchDistance=d;l._clock=f;l._pointerState=new Map;l._immediateDoubleClick=l.registerOutgoing("immediate-double-click");l.registerIncoming("pointer-down",l._handlePointerDown.bind(n._assertThisInitialized(l)));l.registerIncoming("pointer-up",
m=>{l._handlePointerLoss(m,"pointer-up")});l.registerIncoming("pointer-capture-lost",m=>{l._handlePointerLoss(m,"pointer-capture-lost")});l.registerIncoming("pointer-cancel",m=>{l._handlePointerLoss(m,"pointer-cancel")});return l}n._inheritsLoose(g,p);var e=g.prototype;e.onUninstall=function(){this._pointerState.forEach(b=>{b.immediateDoubleClick&&b.immediateDoubleClick.timeoutHandle.remove()});p.prototype.onUninstall.call(this)};e._handlePointerDown=function(b){b=b.data;const a=this._pointerId(b);
this._pointerState.has(a)||(this._pointerState.set(a,{downButton:b.native.button,immediateDoubleClick:null}),this.startCapturingPointer(b.native))};e._handlePointerLoss=function(b,a){const c=b.data;var d=this._pointerId(c);if((d=this._pointerState.get(d))&&"pointer-up"===a&&d.downButton===c.native.button)if(a=d.immediateDoubleClick){a.timeoutHandle.remove();const f="touch"===b.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;z.manhattanDistance(a,b.data)>f?this._startImmediateDoubleClick(b,
d):(this._immediateDoubleClick.emit(b.data,void 0,a.modifiers),this._removeState(c))}else this._startImmediateDoubleClick(b,d)};e._startImmediateDoubleClick=function(b,a){a.immediateDoubleClick={x:b.data.x,y:b.data.y,modifiers:b.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(b.data),"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};e._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?`${b.pointerId}:${b.button}`:`${b.pointerType}`};
e._removeState=function(b){const a=this._pointerId(b);this._pointerState.delete(a);this.stopCapturingPointer(b.native);this.refreshHasPendingInputs()};return g}(r.InputHandler);u.ImmediateDoubleClick=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(u,n,h,r,v){const z=
{maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};r=function(p){function g(b=z.maximumClickDelay,a=z.movementUntilMouseDrag,c=z.movementUntilPenDrag,d=z.movementUntilTouchDrag,f=z.holdDelay,l=h.clock){var m=p.call(this,!1)||this;m.maximumClickDelay=b;m.movementUntilMouseDrag=a;m.movementUntilPenDrag=c;m.movementUntilTouchDrag=d;m.holdDelay=f;m._clock=l;m._pointerState=new Map;m._pointerDrag=m.registerOutgoing("pointer-drag");m._immediateClick=
m.registerOutgoing("immediate-click");m._pointerHold=m.registerOutgoing("hold");m.registerIncoming("pointer-down",m._handlePointerDown.bind(n._assertThisInitialized(m)));m.registerIncoming("pointer-up",k=>{m._handlePointerLoss(k,"pointer-up")});m.registerIncoming("pointer-capture-lost",k=>{m._handlePointerLoss(k,"pointer-capture-lost")});m.registerIncoming("pointer-cancel",k=>{m._handlePointerLoss(k,"pointer-cancel")});m._moveHandle=m.registerIncoming("pointer-move",m._handlePointerMove.bind(n._assertThisInitialized(m)));
m._moveHandle.pause();return m}n._inheritsLoose(g,p);var e=g.prototype;e.onUninstall=function(){this._pointerState.forEach(b=>{null!=b.holdTimeout&&(b.holdTimeout.remove(),b.holdTimeout=null)});p.prototype.onUninstall.call(this)};e._handlePointerDown=function(b){const a=b.data,c=a.native.pointerId;var d=null;0===this._pointerState.size&&(d=this._clock.setTimeout(()=>{const f=this._pointerState.get(c);f&&(f.isDragging||(this._pointerHold.emit(f.previousEvent,void 0,b.modifiers),f.holdEmitted=!0),f.holdTimeout=
null)},this.holdDelay));d={startEvent:a,previousEvent:a,startTimestamp:b.timestamp,isDragging:!1,downButton:a.native.button,holdTimeout:d,modifiers:new Set};this._pointerState.set(c,d);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(b)};e._createPointerDragData=function(b,a,c){return{action:b,startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:c}};e._handlePointerMove=function(b){const a=b.data,c=this._pointerState.get(a.native.pointerId);
if(c){if(c.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",c,a),void 0,c.modifiers);else{const d=v.euclideanDistance(a,c.startEvent),f=this._getDragThreshold(a.native.pointerType);d>f&&this._startDragging(b)}c.previousEvent=a}};e._getDragThreshold=function(b){switch(b){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};e._startDragging=function(b){const a=b.data,c=a.native.pointerId;this._pointerState.forEach(d=>
{null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null);d.isDragging||(d.modifiers=b.modifiers,d.isDragging=!0,c===d.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",d,a)):this._pointerDrag.emit(this._createPointerDragData("start",d,d.previousEvent),b.timestamp))})};e._handlePointerLoss=function(b,a){const c=b.data,d=c.native.pointerId,f=this._pointerState.get(d);f&&(null!=f.holdTimeout&&(f.holdTimeout.remove(),f.holdTimeout=null),f.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
f,"pointer-up"===a?c:f.previousEvent),void 0,f.modifiers):"pointer-up"===a&&f.downButton===c.native.button&&b.timestamp-f.startTimestamp<=this.maximumClickDelay&&!f.holdEmitted&&this._immediateClick.emit(c),this._pointerState.delete(d),this.stopCapturingPointer(c.native),0===this._pointerState.size&&this._moveHandle.pause())};return g}(r.InputHandler);u.DefaultParameters=z;u.PointerClickHoldAndDrag=r;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(u,n,h,r,v,z,p){const g={added:[],removed:[]},e=new Set,b=new p(0,0,0,0);return function(a){function c(f){var l=a.call(this)||this;l._tiles=new Map;l._index=r.rbush(9,h("esri-csp-restrictions")?m=>({minX:m.bounds[0],minY:m.bounds[1],maxX:m.bounds[2],maxY:m.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);l.tiles=[];l.tileScheme=f;return l}u._inheritsLoose(c,a);var d=c.prototype;d.destroy=function(){this.clear()};d.clear=function(){this.tiles.length=0;this._tiles.clear();
this._index.clear()};d.has=function(f){return this._tiles.has(f)};d.get=function(f){return this._tiles.get(f)};d.boundsIntersections=function(f){return this._index.search({minX:f[0],minY:f[1],maxX:f[2],maxY:f[3]})};d.updateTiles=function(f){const l={added:[],removed:[]};for(const m of f.added)if(!this.has(m)){const k=new v.Tile(this.tileScheme,m);this._tiles.set(m,k);this._index.insert(k);l.added.push(k)}for(const m of f.removed)this.has(m)&&(f=this.get(m),this._tiles.delete(m),this._index.remove(f),
l.removed.push(f));this.tiles.length=0;this._tiles.forEach(m=>this.tiles.push(m));(l.added.length||l.removed.length)&&this.emit("update",l)};d.setViewState=function(f){if(f=this.tileScheme.getTileCoverage(f,0)){var {spans:l,lodInfo:m}=f,{level:k}=m;if(0<l.length)for(const {row:t,colFrom:w,colTo:A}of l)for(var q=w;q<=A;q++){const x=b.set(k,t,m.normalizeCol(q),m.getWorldForColumn(q)).id;e.add(x);if(!this.has(x)){const y=new v.Tile(this.tileScheme,x);this._tiles.set(x,y);this._index.insert(y);this.tiles.push(y);
g.added.push(y)}}for(k=this.tiles.length-1;0<=k;k--)q=this.tiles[k],e.has(q.id)||(this._tiles.delete(q.id),this.tiles.splice(k,1),this._index.remove(q),g.removed.push(q));(g.added.length||g.removed.length)&&this.emit("update",g);z.pool.release(f);e.clear();g.added.length=0;g.removed.length=0}};return c}(n)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(u,n){function h(l,m){if(!(this instanceof h))return new h(l,m);this._maxEntries=Math.max(4,l||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));m&&("function"===typeof m?this.toBBox=m:this._initFormat(m));this.clear()}function r(l,m){v(l,0,l.children.length,m,l)}function v(l,m,k,q,t){t||(t=d(null));t.minX=Infinity;t.minY=Infinity;t.maxX=-Infinity;t.maxY=-Infinity;for(var w;m<k;m++)w=l.children[m],z(t,l.leaf?q(w):w);return t}function z(l,m){l.minX=Math.min(l.minX,m.minX);l.minY=Math.min(l.minY,m.minY);l.maxX=Math.max(l.maxX,m.maxX);l.maxY=Math.max(l.maxY,m.maxY);return l}function p(l,m){return l.minX-m.minX}
function g(l,m){return l.minY-m.minY}function e(l){return(l.maxX-l.minX)*(l.maxY-l.minY)}function b(l){return l.maxX-l.minX+(l.maxY-l.minY)}function a(l,m){return l.minX<=m.minX&&l.minY<=m.minY&&m.maxX<=l.maxX&&m.maxY<=l.maxY}function c(l,m){return m.minX<=l.maxX&&m.minY<=l.maxY&&m.maxX>=l.minX&&m.maxY>=l.minY}function d(l){return{children:l,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function f(l,m,k,q,t){for(var w=[m,k],A;w.length;)k=w.pop(),m=w.pop(),k-m<=q||(A=
m+Math.ceil((k-m)/q/2)*q,n.quickselect(l,A,m,k,t),w.push(m,A,A,k))}h.prototype={all:function(){return this._all(this.data,[])},search:function(l){var m=this.data,k=[],q=this.toBBox;if(!c(l,m))return k;for(var t=[],w,A,x,y;m;){w=0;for(A=m.children.length;w<A;w++)x=m.children[w],y=m.leaf?q(x):x,c(l,y)&&(m.leaf?k.push(x):a(l,y)?this._all(x,k):t.push(x));m=t.pop()}return k},collides:function(l){var m=this.data,k=this.toBBox;if(!c(l,m))return!1;for(var q=[],t,w,A,x;m;){t=0;for(w=m.children.length;t<w;t++)if(A=
m.children[t],x=m.leaf?k(A):A,c(l,x)){if(m.leaf||a(l,x))return!0;q.push(A)}m=q.pop()}return!1},load:function(l){if(!l||!l.length)return this;if(l.length<this._minEntries){for(var m=0,k=l.length;m<k;m++)this.insert(l[m]);return this}l=this._build(l.slice(),0,l.length-1,0);this.data.children.length?this.data.height===l.height?this._splitRoot(this.data,l):(this.data.height<l.height&&(m=this.data,this.data=l,l=m),this._insert(l,this.data.height-l.height-1,!0)):this.data=l;return this},insert:function(l){l&&
this._insert(l,this.data.height-1);return this},clear:function(){this.data=d([]);return this},remove:function(l,m){if(!l)return this;for(var k=this.data,q=this.toBBox(l),t=[],w=[],A,x,y,B;k||t.length;){k||(k=t.pop(),x=t[t.length-1],A=w.pop(),B=!0);if(k.leaf){a:{y=l;var C=k.children,D=m;if(D){for(var F=0;F<C.length;F++)if(D(y,C[F])){y=F;break a}y=-1}else y=C.indexOf(y)}if(-1!==y){k.children.splice(y,1);t.push(k);this._condense(t);break}}B||k.leaf||!a(k,q)?x?(A++,k=x.children[A],B=!1):k=null:(t.push(k),
w.push(A),A=0,x=k,k=k.children[0])}return this},toBBox:function(l){return l},compareMinX:p,compareMinY:g,toJSON:function(){return this.data},fromJSON:function(l){this.data=l;return this},_all:function(l,m){for(var k=[];l;)l.leaf?m.push.apply(m,l.children):k.push.apply(k,l.children),l=k.pop();return m},_build:function(l,m,k,q){var t=k-m+1,w=this._maxEntries;if(t<=w){var A=d(l.slice(m,k+1));r(A,this.toBBox);return A}q||(q=Math.ceil(Math.log(t)/Math.log(w)),w=Math.ceil(t/Math.pow(w,q-1)));A=d([]);A.leaf=
!1;A.height=q;t=Math.ceil(t/w);w=t*Math.ceil(Math.sqrt(w));var x;for(f(l,m,k,w,this.compareMinX);m<=k;m+=w){var y=Math.min(m+w-1,k);f(l,m,y,t,this.compareMinY);for(x=m;x<=y;x+=t){var B=Math.min(x+t-1,y);A.children.push(this._build(l,x,B,q-1))}}r(A,this.toBBox);return A},_chooseSubtree:function(l,m,k,q){for(var t,w,A,x,y,B,C,D;;){q.push(m);if(m.leaf||q.length-1===k)break;C=D=Infinity;t=0;for(w=m.children.length;t<w;t++)A=m.children[t],y=e(A),B=(Math.max(A.maxX,l.maxX)-Math.min(A.minX,l.minX))*(Math.max(A.maxY,
l.maxY)-Math.min(A.minY,l.minY))-y,B<D?(D=B,C=y<C?y:C,x=A):B===D&&y<C&&(C=y,x=A);m=x||m.children[0]}return m},_insert:function(l,m,k){var q=this.toBBox;k=k?l:q(l);q=[];var t=this._chooseSubtree(k,this.data,m,q);t.children.push(l);for(z(t,k);0<=m;)if(q[m].children.length>this._maxEntries)this._split(q,m),m--;else break;this._adjustParentBBoxes(k,q,m)},_split:function(l,m){var k=l[m],q=k.children.length,t=this._minEntries;this._chooseSplitAxis(k,t,q);q=this._chooseSplitIndex(k,t,q);q=d(k.children.splice(q,
k.children.length-q));q.height=k.height;q.leaf=k.leaf;r(k,this.toBBox);r(q,this.toBBox);m?l[m-1].children.push(q):this._splitRoot(k,q)},_splitRoot:function(l,m){this.data=d([l,m]);this.data.height=l.height+1;this.data.leaf=!1;r(this.data,this.toBBox)},_chooseSplitIndex:function(l,m,k){var q,t;var w=t=Infinity;for(q=m;q<=k-m;q++){var A=v(l,0,q,this.toBBox);var x=v(l,q,k,this.toBBox);var y=Math.max(0,Math.min(A.maxX,x.maxX)-Math.max(A.minX,x.minX))*Math.max(0,Math.min(A.maxY,x.maxY)-Math.max(A.minY,
x.minY));A=e(A)+e(x);if(y<w){w=y;var B=q;t=A<t?A:t}else y===w&&A<t&&(t=A,B=q)}return B},_chooseSplitAxis:function(l,m,k){var q=l.leaf?this.compareMinX:p,t=l.leaf?this.compareMinY:g,w=this._allDistMargin(l,m,k,q);m=this._allDistMargin(l,m,k,t);w<m&&l.children.sort(q)},_allDistMargin:function(l,m,k,q){l.children.sort(q);q=this.toBBox;var t=v(l,0,m,q),w=v(l,k-m,k,q),A=b(t)+b(w),x;for(x=m;x<k-m;x++){var y=l.children[x];z(t,l.leaf?q(y):y);A+=b(t)}for(x=k-m-1;x>=m;x--)y=l.children[x],z(w,l.leaf?q(y):y),
A+=b(w);return A},_adjustParentBBoxes:function(l,m,k){for(;0<=k;k--)z(m[k],l)},_condense:function(l){for(var m=l.length-1,k;0<=m;m--)0===l[m].children.length?0<m?(k=l[m-1].children,k.splice(k.indexOf(l[m]),1)):this.clear():r(l[m],this.toBBox)},_initFormat:function(l){var m=["return a"," - b",";"];this.compareMinX=new Function("a","b",m.join(l[0]));this.compareMinY=new Function("a","b",m.join(l[1]));this.toBBox=new Function("a","return {minX: a"+l[0]+", minY: a"+l[1]+", maxX: a"+l[2]+", maxY: a"+l[3]+
"};")}};u.rbush=h})},"esri/chunks/quickselect":function(){define(["exports"],function(u){var n={exports:{}};(function(h){(function(r){r=r();void 0!==r&&(h.exports=r)})(function(){function r(p,g,e,b,a){for(;b>e;){if(600<b-e){var c=b-e+1,d=g-e+1,f=Math.log(c),l=.5*Math.exp(2*f/3);f=.5*Math.sqrt(f*l*(c-l)/c)*(0>d-c/2?-1:1);r(p,g,Math.max(e,Math.floor(g-d*l/c+f)),Math.min(b,Math.floor(g+(c-d)*l/c+f)),a)}c=p[g];d=e;l=b;v(p,e,g);for(0<a(p[b],c)&&v(p,e,b);d<l;){v(p,d,l);d++;for(l--;0>a(p[d],c);)d++;for(;0<
a(p[l],c);)l--}0===a(p[e],c)?v(p,e,l):(l++,v(p,l,b));l<=g&&(e=l+1);g<=l&&(b=l-1)}}function v(p,g,e){var b=p[g];p[g]=p[e];p[e]=b}function z(p,g){return p<g?-1:p>g?1:0}return function(p,g,e,b,a){r(p,g,e||0,b||p.length-1,a||z)}})})(n);u.quickselect=n.exports})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(u,n,h,r,v,z,p){let g=function(){function e(a,c){this.key=new p(0,0,0,0);this.bounds=v.create();this.objectIds=new Set;this.key.set(c);c=a.getLODInfoAt(this.key);this.tileInfoView=a;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=c.resolution;this.scale=c.scale;this.level=c.level}var b=e.prototype;b.createChildTiles=function(){const a=this.key.getChildKeys(),c=h.acquire();for(let d=0;d<a.length;d++)c[d]=new e(this.tileInfoView,a[d]);return c};b.getQuantizationParameters=
function(){return z.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};n._createClass(e,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return r.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return e}();u.Tile=g;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e){let b=0;r=function(a){function c(){var d=a.apply(this,arguments)||this;d.color=new h([0,255,255]);d.haloOpacity=1;d.fillOpacity=.25;return d}u._inheritsLoose(c,a);u._createClass(c,[{key:"version",get:function(){return b++}}]);return c}(r);n.__decorate([v.property({readOnly:!0})],r.prototype,"version",null);n.__decorate([v.property({type:h})],r.prototype,"color",void 0);n.__decorate([v.property({type:h})],r.prototype,"haloColor",void 0);n.__decorate([v.property()],r.prototype,
"haloOpacity",void 0);n.__decorate([v.property()],r.prototype,"fillOpacity",void 0);return r=n.__decorate([e.subclass("esri.views.2d.support.HighlightOptions")],r)})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(u){let n=function(){function h(){this._names=new Map}var r=h.prototype;r.begin=function(v){this._names.has(v)||(this._names.set(v,!1),v.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${v}.Start`))};r.end=function(v){this._names.has(v)&&!this._names.get(v)&&
(this._names.set(v,!0),performance.mark(`Esri.${v}.End`))};r.record=function(v){this._names.has(v)||(this._names.set(v,!0),performance.mark(`Esri.${v}`))};return h}();u.Timeline=n;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(u,n,h,r,v,z,p,g){u.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});var e;null!=u.width&&null!=u.height?e=[u.width,u.height]:null==u.width&&
null!=u.height?e=[u.height,u.height]:null!=u.width&&null==u.height?e=[u.width,u.width]:null==u.width&&null==u.height&&(e=null);var b=h[0]-(r.left+r.right);h=h[1]-(r.top+r.bottom);u=u.area||{x:0,y:0,width:b,height:h};if(e){const a=e[0]/e[1];a>b/h?(b=u.width/a,u={x:u.x,y:Math.round(u.y+(u.height-b)/2),width:u.width,height:Math.round(b)}):(b=u.height*a,u={x:Math.round(u.x+(u.width-b)/2),y:u.y,width:Math.round(b),height:u.height})}else e=[u.width,u.height];e[0]>u.width?(n=Math.min(e[0]/u.width,n),e=e[0]/
u.width/n):(n=1,e=e[0]/u.width);return{resolutionScale:n,cropArea:{x:Math.round((u.x+r.left)*n),y:Math.round((u.y+r.top)*n),width:Math.round(u.width*n),height:Math.round(u.height*n)},outputScale:e,format:v,quality:z,children:p,rotation:g}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe"],function(u,n,h,r){function v(t,w){const {format:A,quality:x,rotation:y,disableDecorations:B}=t||{};var C=a(t,w.padding);var D=w.width-
C.left-C.right;w=w.height-C.top-C.bottom;C={x:0,y:0,width:D,height:w};if(t&&t.area){null!=t.area.x&&(C.x=Math.floor(t.area.x));null!=t.area.y&&(C.y=Math.floor(t.area.y));var F=null!=t.area.width?Math.floor(t.area.width):null,E=null!=t.area.height?Math.floor(t.area.height):null;C.width=D-C.x;C.height=w-C.y;null!=F&&null!=E?(C.width=Math.min(C.width,F),C.height=Math.min(C.height,E)):null==F&&null!=E?(F=Math.min(C.width,F),C.height*=F/C.width,C.width=F):null!=F&&null==E&&(F=Math.min(C.height,E),C.width*=
F/C.height,C.height=F)}C=b(C,t);F=Math.floor(Math.max(C.x,0));E=Math.floor(Math.max(C.y,0));D={x:F,y:E,width:Math.floor(Math.min(C.width,D-F)),height:Math.floor(Math.min(C.height,w-E))};w=D.width/D.height;C=C.width/C.height;C!==w&&(C>w?(w=Math.floor(D.width/C),D={x:D.x,y:Math.floor(D.y+(D.height-w)/2),width:D.width,height:w}):(w=Math.floor(D.height*C),D={x:Math.floor(D.x+(D.width-w)/2),y:D.y,width:w,height:D.height}));const {width:G,height:O}=e(t,D);w=c(A);C=k[w];C=h.clamp(null!=x?x:C,0,100);return{format:w,
quality:C,area:D,width:G,height:O,rotation:y,disableDecorations:!!B,ignoreBackground:!(!t||!t.ignoreBackground),ignorePadding:!(!t||!t.ignorePadding)}}function z(t,w){r.isNone(d)&&(d=document.createElement("canvas"));var A=d;if(w.premultipliedAlpha){{var x=t.data;const B=x.length;for(let C=0;C<B;C+=4){var y=x[C+3];255!==y&&0<y&&(y=255/y,x[C+0]*=y,x[C+1]*=y,x[C+2]*=y)}}}A.width=t.width;A.height=t.height;x=A.getContext("2d");x.putImageData(t,0,0);w.flipY&&(x.save(),x.globalCompositeOperation="copy",
x.scale(1,-1),x.translate(0,-x.canvas.height),x.drawImage(x.canvas,0,0),x.restore());return{ctx:x,canvas:A}}function p(t,w){return t.toDataURL(m[w.format],w.quality/100)}function g(t,w,A){A||(f||(f=document.createElement("canvas"),f.width=1,f.height=1),A=f);return A.getContext("2d").createImageData(t,w)}function e(t,w){if(!t)return w;const A=t.width;t=t.height;if(null!=A&&null!=t)return{width:Math.floor(A),height:Math.floor(t)};if(null==A&&null==t)return w;w=w.width/w.height;return null==t?{width:Math.floor(A),
height:Math.floor(A/w)}:{width:Math.floor(t*w),height:Math.floor(t)}}function b(t,w){if(!w||null==w.width||null==w.height)return t;w=w.width/w.height;const A=t.width/t.height;if(A===w)return t;if(A<w)return w=Math.floor(t.height*w),t.x-=(w-t.width)/2,t.width=w,t;w=Math.floor(t.width/w);t.y-=(w-t.height)/2;t.height=w;return t}function a(t,w){return!w||t&&t.ignorePadding?q:w}function c(t){switch(t){case "png":case "jpg":case "jpeg":return t;case null:case void 0:return"png";default:return"png"}}let d=
null,f=null,l=!0;const m={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},k={png:100,jpg:98,jpeg:98},q={top:0,right:0,bottom:0,left:0};u.completeUserSettings=v;u.createEmptyImageData=function(t,w,A){if(!t||!w)throw Error("Cannot construct image data without dimensions");if(l)try{return new ImageData(t,w)}catch(x){l=!1}return g(t,w,A)};u.encode=function(t,w,A){const {ctx:x,canvas:y}=z(t,A);t=x.getImageData(0,0,t.width,t.height);w=p(y,w);y.width=0;y.height=0;return{dataUrl:w,data:t}};u.encodeData=
function(t,w){const {ctx:A,canvas:x}=z(t,w);t=A.getImageData(0,0,t.width,t.height);x.width=0;x.height=0;return t};u.getFormatAndQuality=function(t,w){t=c(t);const A=k[t];w=h.clamp(null!=w?w:A,0,100);return{format:t,quality:w}};u.getMaximumResolutionScale=function(t,w){return w/Math.max(t[0],t[1])};u.resampleHermite=function(t,w,A,x=0,y=0,B=t.width-x,C=t.height-y,D=!1){const {data:F}=t,{width:E,height:G,data:O}=w;B/=E;C/=G;const H=Math.ceil(B/2),K=Math.ceil(C/2);t=t.width;for(let M=0;M<G;M++)for(let J=
0;J<E;J++){const R=4*(J+(D?G-M-1:M)*E);let X=0,U=0,V=0,Q=0,Y=0,fa=0;const da=(M+.5)*C;for(let ca=Math.floor(M*C);ca<(M+1)*C;ca++){var P=Math.abs(da-(ca+.5))/K;const la=(J+.5)*B;P*=P;for(let ha=Math.floor(J*B);ha<(J+1)*B;ha++){var L=Math.abs(la-(ha+.5))/H;L=Math.sqrt(P+L*L);if(1<=L)continue;L=2*L*L*L-3*L*L+1;const S=4*(x+ha+(y+ca)*t);fa+=L*F[S+3];U+=L;!A&&255>F[S+3]&&(L=L*F[S+3]/255);V+=L*F[S];Q+=L*F[S+1];Y+=L*F[S+2];X+=L}}O[R]=V/X;O[R+1]=Q/X;O[R+2]=Y/X;O[R+3]=fa/U}return w};u.screenshotSuperSampleSettings=
function(t,w,A){if(!w)return t;const {framebufferWidth:x,framebufferHeight:y,pixelRatio:B,region:C}=t;w=a(t,A);A=w.left+w.right;const D=w.top+w.bottom,F=x-A,E=y-D,G=Math.min(8,Math.min((2048-A)/F,(2048-D)/E));return 1.5>G?t:{...t,framebufferWidth:Math.round(F*G)+A,framebufferHeight:Math.round(E*G)+D,pixelRatio:B*G,resample:{region:{x:Math.round((C.x-w.left)*G)+w.left,y:Math.round((C.y-w.top)*G)+w.top,width:Math.round(C.width*G),height:Math.round(C.height*G)},width:x,height:y}}};u.toDataUrl=p;u.toRenderSettings=
function(t,w){const A=v(t,w),x=A.area,y=A.width/x.width,B=a(A,w.padding),C=B.left+B.right,D=B.top+B.bottom;return{framebufferWidth:Math.floor((w.width-C)*y+C),framebufferHeight:Math.floor((w.height-D)*y+D),region:{x:Math.floor(x.x*y)+B.left,y:Math.floor(x.y*y)+B.top,width:A.width,height:A.height},format:A.format,quality:A.quality,rotation:A.rotation,pixelRatio:y,layers:t&&t.layers?t.layers:[],disableDecorations:A.disableDecorations,ignoreBackground:A.ignoreBackground,ignorePadding:A.ignorePadding}};
u.wrapImageData=function(t,w,A,x){if(!w||!A)throw Error("Cannot construct image data without dimensions");if(l)try{return new ImageData(t,w,A)}catch(y){l=!1}w=g(w,A,x);w.data.set(t,0);return w};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities","../webgl/context-util"],function(u,n,h,r){u.check=function(v){const z=h.getWebGLCapabilities(v);if(!z.available)return new n("webgl:required",
"WebGL is required but not supported.");if("3d"===v&&z.majorPerformanceCaveat)return new n("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!z.supportsHighPrecisionFragment)return new n("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!z.supportsVertexShaderSamplers)return new n("webgl:vertex-shader-samplers-required",
"WebGL support for vertex shader samplers is required but not supported.");if(z.type===r.ContextType.WEBGL1){if(!z.supportsElementIndexUint)return new n("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!z.supportsStandardDerivatives)return new n("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!z.supportsInstancedArrays)return new n("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};
Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),function(u,n,h,r,v,z,p,g){r=function(e){function b(a){a=e.call(this,a)||this;a.components=
["attribution","zoom"];return a}u._inheritsLoose(b,e);return b}(g);n.__decorate([h.property()],r.prototype,"components",void 0);return r=n.__decorate([p.subclass("esri.views.ui.2d.DefaultUI2D")],r)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){r.getLogger("esri.views.ui.DefaultUI");h=function(m){function k(t){t=m.call(this,t)||this;t._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};t.components=[];return t}u._inheritsLoose(k,m);var q=k.prototype;q.initialize=function(){this._handles.add([v.watch(()=>this.components,this._componentsWatcher.bind(this),v.initial),v.watch(()=>this.view,this._updateViewAwareWidgets.bind(this),v.initial)])};
q._add=function(t,w,A,x){if("string"===typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return;t=this._createComponent(t)}m.prototype._add.call(this,t,w,A,x)};q._removeComponents=function(t){t.forEach(w=>{if(w=this._find(w))this.remove(w),w.destroy()})};q._updateViewAwareWidgets=function(t){this.components.forEach(w=>{(w=(w=this._find(w))&&w.widget)&&void 0!==w.view&&(w.view=t)})};q._componentsWatcher=function(t,w){this._removeComponents(w);this._addComponents(t);this._adjustPadding(t)};
q._adjustPadding=function(t){t.includes("attribution")||this._isOverridden("padding")||({top:t}=this.padding,this.padding=t)};q._addComponents=function(t){this.initialized&&t.forEach(w=>this.add(this._createComponent(w),this._defaultPositionLookup[w]))};q._createComponent=function(t){const w=this._createWidget(t);if(w)return new b({id:t,node:w})};q._createWidget=function(t){if("attribution"===t)return this._createAttribution();if("compass"===t)return this._createCompass();if("navigation-toggle"===
t)return this._createNavigationToggle();if("zoom"===t)return this._createZoom()};q._createAttribution=function(){return new c({view:this.view})};q._createCompass=function(){return new d({view:this.view})};q._createNavigationToggle=function(){return new f({view:this.view})};q._createZoom=function(){return new l({view:this.view})};return k}(a);n.__decorate([z.property()],h.prototype,"components",void 0);return h=n.__decorate([e.subclass("esri.views.ui.DefaultUI")],h)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e){h=function(b){function a(){var d=b.apply(this,arguments)||this;d.widget=null;return d}u._inheritsLoose(a,b);var c=a.prototype;c.destroy=function(){this.widget&&this.widget.destroy();this.node=null};c.castNode=function(d){if(!d)return this._set("widget",null),null;if("string"===typeof d||d&&"nodeType"in d)return this._set("widget",null),r.byId(d);d&&"function"===typeof d.render&&!d.domNode&&(d.domNode=document.createElement("div"));this._set("widget",d);return d.domNode};
u._createClass(a,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(d){const f=this._get("node");d!==f&&(d&&d.classList.add("esri-component"),f&&f.classList.remove("esri-component"),this._set("node",d))}}]);return a}(h);n.__decorate([v.property({dependsOn:[]})],h.prototype,"id",null);n.__decorate([v.property()],h.prototype,"node",null);n.__decorate([g.cast("node")],h.prototype,"castNode",null);n.__decorate([v.property({readOnly:!0})],h.prototype,
"widget",void 0);return h=n.__decorate([e.subclass("esri.views.ui.Component")],h)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f){function l(t){const w="object"===typeof t&&null!==t&&Object.getPrototypeOf(t);return null!==w&&w!==Object.prototype||!("component"in t||"index"in t||"position"in t)?null:t}function m(t,{top:w,bottom:A,left:x,right:y}){t.style.top=w;t.style.bottom=A;t.style.left=x;t.style.right=y}const k={left:0,top:0,bottom:0,right:0},q={bottom:30,top:15,right:15,left:15};r=function(t){function w(x){var y=t.call(this,x)||this;y._cornerNameToContainerLookup={};y._positionNameToContainerLookup=
{};y._components=[];y._componentToKey=new Map;y._handles=new v;y.view=null;y._applyViewPadding=()=>{const B=y.container;B&&m(B,y._toPxPosition(y._getViewPadding()))};y._applyUIPadding=()=>{const B=y._innerContainer;B&&m(B,y._toPxPosition(y.padding))};y._initContainers();return y}u._inheritsLoose(w,t);var A=w.prototype;A.initialize=function(){this._handles.add([z.watch(()=>{var x;return[null==(x=this.view)?void 0:x.padding,this.container]},this._applyViewPadding,z.initial),z.watch(()=>this.padding,
this._applyUIPadding,z.initial)])};A.destroy=function(){this.container=null;for(const x of this._components)x.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};A.castPadding=function(x){return"number"===typeof x?{bottom:x,top:x,right:x,left:x}:{...q,...x}};A.add=function(x,y){let B,C;if(Array.isArray(x))x.forEach(F=>this.add(F,y));else{var D=l(x);D&&({index:B,position:y,component:x,key:C}=D);y&&"object"===typeof y&&({index:B,key:C,position:y}=y);!x||y&&!this._isValidPosition(y)||
this._add(x,y,B,C)}};A.remove=function(x,y){if(x){if(Array.isArray(x))return x.map(D=>this.remove(D,y));var B=this._find(x);if(B){var C=this._componentToKey;if(!C.has(x)||C.get(x)===y)return C=this._components.indexOf(B),B.node.parentNode&&B.node.parentNode.removeChild(B.node),this._componentToKey.delete(x),this._components.splice(C,1)[0]}}};A.empty=function(x){if(Array.isArray(x))return x.map(y=>this.empty(y)).reduce((y,B)=>y.concat(B));x=x||"manual";return"manual"===x?Array.prototype.slice.call(this._manualContainer.children).filter(y=>
!y.classList.contains("esri-ui-corner")).map(y=>this.remove(y)):this._isValidPosition(x)?Array.prototype.slice.call(this._cornerNameToContainerLookup[x].children).map(this.remove,this):null};A.move=function(x,y){Array.isArray(x)&&x.forEach(D=>this.move(D,y));if(x){var B=l(x)||l(y);if(B){var C=B.index;y=B.position;x=B.component||x}(!y||this._isValidPosition(y))&&(x=this.remove(x))&&this.add(x,{position:y,index:C})}};A.find=function(x){return x?(x=this._findById(x))&&(x.widget||x.node):null};A.getPosition=
function(x){for(const y in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[y].contains(x))return y;return null};A._add=function(x,y,B,C){x instanceof d||(x=new d({node:x}));this._place({component:x,position:y,index:B});this._components.push(x);C&&this._componentToKey.set(x,C)};A._find=function(x){return x?x instanceof d?this._findByComponent(x):"string"===typeof x?this._findById(x):this._findByNode(x.domNode||x):null};A._getViewPadding=function(){return this.get("view.padding")||
k};A._attachContainers=function(x){x.appendChild(this._innerContainer);x.appendChild(this._manualContainer)};A._initContainers=function(){var x=document.createElement("div");x.classList.add("esri-ui-inner-container");x.classList.add("esri-ui-corner-container");const y=document.createElement("div");y.classList.add("esri-ui-inner-container");y.classList.add("esri-ui-manual-container");const B=document.createElement("div");B.classList.add("esri-ui-top-left");B.classList.add("esri-ui-corner");x.appendChild(B);
const C=document.createElement("div");C.classList.add("esri-ui-top-right");C.classList.add("esri-ui-corner");x.appendChild(C);const D=document.createElement("div");D.classList.add("esri-ui-bottom-left");D.classList.add("esri-ui-corner");x.appendChild(D);const F=document.createElement("div");F.classList.add("esri-ui-bottom-right");F.classList.add("esri-ui-corner");x.appendChild(F);this._innerContainer=x;this._manualContainer=y;x=f.isRTL();this._cornerNameToContainerLookup={"top-left":B,"top-right":C,
"bottom-left":D,"bottom-right":F,"top-leading":x?C:B,"top-trailing":x?B:C,"bottom-leading":x?F:D,"bottom-trailing":x?D:F};this._positionNameToContainerLookup={manual:y,...this._cornerNameToContainerLookup}};A._isValidPosition=function(x){return!!this._positionNameToContainerLookup[x]};A._place=function(x){const y=x.component,B=x.index;x=this._positionNameToContainerLookup[x.position||"manual"];var C=-1<B,D=y.widget;D&&!D._started&&"function"===typeof D.postMixInProperties&&"function"===typeof D.buildRendering&&
"function"===typeof D.postCreate&&"function"===typeof D.startup&&y.widget.startup();C?(C=Array.prototype.slice.call(x.children),0===B?x.firstChild?h.insertBefore(y.node,x.firstChild):x.appendChild(y.node):B>=C.length?x.appendChild(y.node):h.insertBefore(y.node,C[B])):x.appendChild(y.node)};A._toPxPosition=function(x){return{top:this._toPxUnit(x.top),left:this._toPxUnit(x.left),right:this._toPxUnit(x.right),bottom:this._toPxUnit(x.bottom)}};A._toPxUnit=function(x){return 0===x?"0":x+"px"};A._findByComponent=
function(x){let y=null,B;this._components.some(C=>{(B=C===x)&&(y=C);return B});return y};A._findById=function(x){let y=null,B;this._components.some(C=>{(B=C.id===x)&&(y=C);return B});return y};A._findByNode=function(x){let y=null,B;this._components.some(C=>{(B=C.node===x)&&(y=C);return B});return y};u._createClass(w,[{key:"container",set:function(x){const y=this._get("container");x!==y&&(x&&(x.classList.add("esri-ui"),c.setCalciteThemeClass(x),this._attachContainers(x)),y&&(y.classList.remove("esri-ui"),
m(y,{top:"",bottom:"",left:"",right:""}),h.empty(y)),this._set("container",x))}},{key:"height",get:function(){const x=this.get("view.height")||0;if(0===x)return x;const y=this._getViewPadding();return Math.max(x-(y.top+y.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(x){x?this._override("padding",x):this._clearOverride("padding")}},{key:"width",get:function(){const x=this.get("view.width")||0;if(0===x)return x;const y=this._getViewPadding();return Math.max(x-
(y.left+y.right),0)}}]);return w}(r.EventedAccessor);n.__decorate([p.property()],r.prototype,"container",null);n.__decorate([p.property()],r.prototype,"height",null);n.__decorate([p.property({value:q})],r.prototype,"padding",null);n.__decorate([b.cast("padding")],r.prototype,"castPadding",null);n.__decorate([p.property()],r.prototype,"view",void 0);n.__decorate([p.property()],r.prototype,"width",null);return r=n.__decorate([a.subclass("esri.views.ui.UI")],r)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){v=function(m){function k(t,w){var A=m.call(this,t,w)||this;A._isOpen=!1;A._attributionTextOverflowed=!1;A._prevSourceNodeHeight=0;A._resizeObserver=new ResizeObserver(x=>x.forEach(({target:y})=>A._checkSourceTextOverflow(y)));A.iconClass="esri-icon-description";A.itemDelimiter=" | ";A.label=void 0;A.messages=null;A.view=null;A.viewModel=new a;return A}u._inheritsLoose(k,m);var q=k.prototype;q.initialize=function(){this.own(h.on(()=>{var t;return null==(t=this.viewModel)?
void 0:t.items},"change",()=>this.scheduleRender()))};q.destroy=function(){var t;null==(t=this._resizeObserver)?void 0:t.disconnect()};q.render=function(){return f.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};q.renderPoweredBy=function(){return f.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",f.tsx("a",
{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};q.renderSourcesNode=function(){const t=this._isOpen,w=this._isInteractive,A=w?"0":"",{attributionText:x}=this;return f.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:t,["esri-interactive"]:w}),innerHTML:x,tabindex:A})};q._afterSourcesNodeCreate=function(t){this._prevSourceNodeHeight=t.clientWidth;
this._resizeObserver.observe(t)};q._checkSourceTextOverflow=function(t){let w=!1;const {clientHeight:A,clientWidth:x,scrollWidth:y}=t;t=y>x;const B=this._attributionTextOverflowed!==t;this._attributionTextOverflowed=t;B&&(w=!0);this._isOpen&&(t=A<this._prevSourceNodeHeight,this._prevSourceNodeHeight=A,t&&(this._isOpen=!1,w=!0));w&&this.scheduleRender()};q._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};u._createClass(k,[{key:"_isInteractive",get:function(){return this._isOpen||
this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((t,w)=>{t.includes(w.text)||t.push(w.text);return t},[]).join(this.itemDelimiter)}}]);return k}(b);n.__decorate([g.property()],v.prototype,"_isOpen",void 0);n.__decorate([g.property()],v.prototype,"_isInteractive",null);n.__decorate([g.property()],v.prototype,"_attributionTextOverflowed",void 0);n.__decorate([g.property()],v.prototype,"_prevSourceNodeHeight",void 0);n.__decorate([g.property({readOnly:!0,
dependsOn:["viewModel.items.length","itemDelimiter"]})],v.prototype,"attributionText",null);n.__decorate([g.property()],v.prototype,"iconClass",void 0);n.__decorate([g.property()],v.prototype,"itemDelimiter",void 0);n.__decorate([g.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],v.prototype,"label",void 0);n.__decorate([g.property(),d.messageBundle("esri/widgets/Attribution/t9n/Attribution")],v.prototype,"messages",void 0);n.__decorate([r.aliasOf("viewModel.view")],v.prototype,
"view",void 0);n.__decorate([g.property({type:a})],v.prototype,"viewModel",void 0);n.__decorate([c.accessibleHandler()],v.prototype,"_toggleState",null);return v=n.__decorate([e.subclass("esri.widgets.Attribution")],v)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){function m(w,A){return w&&"copyright"in w&&(!A||"function"===typeof w.originOf&&"user"===w.originOf("copyright"))}function k(w,A){return w.length!==A.length||w.some((x,y)=>x.text!==A[y].text)}function q(w,A,x){x&&A&&(w.find(y=>y.layerView===A&&y.text===x)||w.push({text:x,layerView:A}))}const t=[];h=function(w){function A(y){var B=w.call(this,y)||this;B._clear=()=>{B._fetchedAttributionData.clear();B._pendingAttributions.clear();B.handles.remove("suspension");
B.notifyChange("state")};B._pendingAttributions=new Set;B._fetchedAttributionData=new Map;B.items=new v;B.view=null;B._allLayerViewsChange=C=>{B.handles.remove("suspension");const D=B.get("view.allLayerViews");D&&B.handles.add(D.map(F=>p.watch(()=>{var E;return[F.suspended,null==(E=F.layer)?void 0:E.attributionVisible]},()=>B._updateAttributionItems())),"suspension");C&&C.removed&&C.removed.forEach(F=>{B._pendingAttributions.delete(F);B._fetchedAttributionData.delete(F)});B._updateAttributionItems()};
B.handles.add([p.on(()=>{var C;return null==(C=B.view)?void 0:C.allLayerViews},"change",C=>B._allLayerViewsChange(C),{onListenerAdd:()=>B._allLayerViewsChange(),onListenerRemove:B._clear}),p.when(()=>{var C;return!0===(null==(C=B.view)?void 0:C.stationary)},()=>B._updateAttributionItems())]);return B}u._inheritsLoose(A,w);var x=A.prototype;x.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};x._updateAttributionItems=function(){const y=
this.get("view.allLayerViews");t.length=0;y?(y.forEach(B=>{var C;if(!B.suspended&&null!=(C=B.layer)&&C.attributionVisible)if(C=B.layer,m(C,"user"))q(t,B,C.copyright);else if(C.hasAttributionData)if(this._fetchedAttributionData.has(B)){var D=this._fetchedAttributionData.get(B);D?q(t,B,this._getDynamicAttribution(D,this.view,C)):m(C)&&q(t,B,C.copyright)}else this._fetchAttributionData(B);else(D=C.get("portalItem.accessInformation"))?q(t,B,D):q(t,B,C.copyright)}),k(this.items,t)&&(this.items.removeAll(),
this.items.addMany(t)),t.length=0,this.notifyChange("state")):this._clear()};x._fetchAttributionData=function(){var y=u._asyncToGenerator(function*(B){if(!this._pendingAttributions.has(B)){this._pendingAttributions.add(B);var C=yield r.result(B.layer.fetchAttributionData());this._pendingAttributions.has(B)&&(C=C.ok?this._createContributionIndex(C.value,"bing-maps"===B.layer.type):null,this._pendingAttributions.delete(B),this._fetchedAttributionData.set(B,C));this._updateAttributionItems()}});return function(B){return y.apply(this,
arguments)}}();x._createContributionIndex=function(y,B){y=y.contributors;const C={};if(!y)return C;for(let G=0;G<y.length;G++){const O=y[G];var D=O.coverageAreas;if(!D)return;for(const H of D){var F=H.bbox,E=H.zoomMin-(B&&H.zoomMin?1:0);D=H.zoomMax-(B&&H.zoomMax?1:0);for(F={extent:f.geographicToWebMercator({xmin:F[1],ymin:F[0],xmax:F[3],ymax:F[2],spatialReference:l.WGS84}),attribution:O.attribution||"",score:null!=H.score?H.score:100,id:G};E<=D;E++)C[E]=C[E]||[],C[E].push(F)}}C.maxKey=Math.max.apply(null,
Object.keys(C));return C};x._getDynamicAttribution=function(y,B,C){const {extent:D,scale:F}=B;C=C.tileInfo.scaleToZoom(F);C=Math.min(y.maxKey,Math.round(C));if(!D||null==C||-1>=C)return"";y=y[C];const E=f.project(D.center.clone().normalize(),B.spatialReference),G={};return y?y.filter(O=>{const H=!G[O.id]&&E&&d.extentContainsPoint(O.extent,E);H&&(G[O.id]=!0);return H}).sort((O,H)=>H.score-O.score||O.objectId-H.objectId).map(O=>O.attribution).join(", "):""};u._createClass(A,[{key:"state",get:function(){return this.get("view.ready")?
0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return A}(z.HandleOwner);n.__decorate([g.property({readOnly:!0,type:v})],h.prototype,"items",void 0);n.__decorate([g.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([g.property()],h.prototype,"view",void 0);return h=n.__decorate([c.subclass("esri.widgets.Attribution.AttributionViewModel")],h)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f){r=function(l){function m(q,t){q=l.call(this,q,t)||this;q.iconClass="esri-icon-pan2";q.label=void 0;q.messages=null;q.view=null;q.viewModel=new b;return q}u._inheritsLoose(m,l);var k=m.prototype;k.toggle=function(){return this.viewModel.toggle()};k.render=function(){const q="disabled"===this.get("viewModel.state");var t="pan"===this.get("viewModel.navigationMode");const w={["esri-navigation-toggle__button--active"]:t};t={["esri-navigation-toggle__button--active"]:!t};
const A=q?-1:0,x=this.messages.toggle;return d.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:q,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:A,"aria-label":x,title:x},d.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",w)},d.tsx("span",{class:"esri-icon-pan"})),d.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",t)},d.tsx("span",{class:"esri-icon-rotate"})))};k._toggle=function(){this.toggle()};u._createClass(m,[{key:"layout",set:function(q){"horizontal"!==q&&(q="vertical");this._set("layout",q)}}]);return m}(e);n.__decorate([p.property()],r.prototype,"iconClass",void 0);n.__decorate([p.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],r.prototype,"label",void 0);n.__decorate([p.property({value:"vertical"})],r.prototype,"layout",null);n.__decorate([p.property(),
c.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],r.prototype,"messages",void 0);n.__decorate([h.aliasOf("viewModel.view")],r.prototype,"view",void 0);n.__decorate([p.property({type:b})],r.prototype,"viewModel",void 0);n.__decorate([a.accessibleHandler()],r.prototype,"_toggle",null);return r=n.__decorate([g.subclass("esri.widgets.NavigationToggle")],r)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(f){f=a.call(this,f)||this;f._handles=new r;f.navigationMode="pan";f.view=null;return f}u._inheritsLoose(c,a);var d=c.prototype;d.initialize=function(){this._handles.add(v.when(()=>{var f;return null==(f=this.view)?void 0:f.inputManager},()=>this._setNavigationMode()))};d.destroy=function(){this._handles.destroy();this.view=this._handles=null};d.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",
this._setNavigationMode())};d._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};u._createClass(c,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}}]);return c}(h);n.__decorate([z.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([z.property()],h.prototype,"navigationMode",void 0);n.__decorate([z.property()],h.prototype,"view",void 0);return h=n.__decorate([b.subclass("esri.widgets.NavigationToggleViewModel")],
h)})},"esri/widgets/Expand":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Expand/ExpandViewModel ./support/widget ./support/decorators/messageBundle ./support/decorators/accessibleHandler ./support/jsxFactory".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d,f){r=function(l){function m(q,
t){var w=l.call(this,q,t)||this;w.autoCollapse=null;w.closeOnEsc=!0;w.collapseTooltip="";w.content="";w.expanded=null;w.expandTooltip="";w.group=null;w.iconNumber=0;w.label=void 0;w.messages=null;w.messagesCommon=null;w.mode="auto";w.view=null;w.viewModel=new b;w._handleKeyDown=A=>{const {closeOnEsc:x,_toggleButtonEl:y,expanded:B}=u._assertThisInitialized(w);B&&x&&A.target!==y&&"Escape"===A.key&&("function"===typeof x?x(A):x)&&(w.expanded=!1,null==y?void 0:y.focus())};return w}u._inheritsLoose(m,
l);var k=m.prototype;k.expand=function(){this.viewModel.expanded=!0};k.collapse=function(){this.viewModel.expanded=!1};k.toggle=function(){this.viewModel.expanded=!this.viewModel.expanded};k.render=function(){const {mode:q}=this;return f.tsx("div",{class:this.classes("esri-expand esri-widget",{["esri-expand--auto"]:"auto"===q,["esri-expand--drawer"]:"drawer"===q,["esri-expand--floating"]:"floating"===q}),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())};k.renderContainer=function(){const {expanded:q}=
this;return f.tsx("div",{class:this.classes("esri-expand__container",{["esri-expand__container--expanded"]:q})},this.renderPanel(),this.renderContent())};k.renderMask=function(){const {expanded:q}=this;return f.tsx("div",{bind:this,onclick:this._toggle,class:this.classes("esri-expand__mask",{["esri-expand__mask--expanded"]:q})})};k.renderBadgeNumber=function(){const {expanded:q,iconNumber:t}=this;return t&&!q?f.tsx("span",{key:"expand__icon-number",class:"esri-expand__icon-number"},t):null};k.renderPanelNumber=
function(){const {iconNumber:q,expanded:t}=this;return q&&t?f.tsx("span",{key:"expand__expand-icon-number",class:this.classes("esri-expand__icon-number","esri-expand__icon-number--expanded")},q):null};k.renderIcon=function(){const {collapseIconClass:q,expandIconClass:t,expanded:w}=this,A={["esri-expand__icon--expanded"]:w,[q]:w,[t]:!w};q===t&&(A[q]=!0);return f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-collapse__icon",A)})};k.renderTitle=function(){return f.tsx("span",{class:"esri-icon-font-fallback-text"},
this.expandTitle)};k.renderExpandButton=function(){const {expanded:q,expandTitle:t,contentId:w}=this;return f.tsx("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":w,"aria-expanded":q?"true":"false",bind:this,class:"esri-widget--button",onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())};k.renderPanel=function(){return f.tsx("div",{class:"esri-expand__panel"},this.renderExpandButton(),this.renderPanelNumber())};
k.renderContent=function(){const {expanded:q,contentId:t,content:w}=this,A={id:t,role:"region",class:this.classes("esri-expand__content",{["esri-expand__content--expanded"]:q})};return"string"===typeof w?f.tsx("div",{key:"content__string",innerHTML:w,...A}):a.isWidget(w)?f.tsx("div",{key:"content__widget",...A},w.render()):w instanceof HTMLElement?f.tsx("div",{key:"content__html-element",bind:w,afterCreate:this._attachToNode,...A}):a.hasDomNode(w)?f.tsx("div",{key:"content__node",bind:w.domNode,afterCreate:this._attachToNode,
...A}):null};k._toggle=function(){this.toggle()};k._attachToNode=function(q){q.appendChild(this)};k._storeToggleButtonEl=function(q){this._toggleButtonEl=q};u._createClass(m,[{key:"contentId",get:function(){return`${this.id}_controls_content`}},{key:"expandTitle",get:function(){const {expanded:q,messagesCommon:t,collapseTooltip:w,expandTooltip:A}=this;return q?w||t.collapse:A||t.expand}},{key:"collapseIconClass",get:function(){return"esri-icon-collapse"},set:function(q){q?this._override("collapseIconClass",
q):this._clearOverride("collapseIconClass")}},{key:"expandIconClass",get:function(){return a.isWidget(this.content)?this.content.iconClass:"esri-icon-expand"},set:function(q){q?this._override("expandIconClass",q):this._clearOverride("expandIconClass")}}]);return m}(e);n.__decorate([p.property({readOnly:!0})],r.prototype,"contentId",null);n.__decorate([p.property({readOnly:!0})],r.prototype,"expandTitle",null);n.__decorate([h.aliasOf("viewModel.autoCollapse")],r.prototype,"autoCollapse",void 0);n.__decorate([p.property()],
r.prototype,"closeOnEsc",void 0);n.__decorate([p.property()],r.prototype,"collapseIconClass",null);n.__decorate([p.property()],r.prototype,"collapseTooltip",void 0);n.__decorate([p.property()],r.prototype,"content",void 0);n.__decorate([h.aliasOf("viewModel.expanded")],r.prototype,"expanded",void 0);n.__decorate([p.property()],r.prototype,"expandIconClass",null);n.__decorate([p.property()],r.prototype,"expandTooltip",void 0);n.__decorate([h.aliasOf("viewModel.group")],r.prototype,"group",void 0);
n.__decorate([p.property()],r.prototype,"iconNumber",void 0);n.__decorate([p.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],r.prototype,"label",void 0);n.__decorate([p.property(),c.messageBundle("esri/widgets/Expand/t9n/Expand")],r.prototype,"messages",void 0);n.__decorate([p.property(),c.messageBundle("esri/t9n/common")],r.prototype,"messagesCommon",void 0);n.__decorate([p.property()],r.prototype,"mode",void 0);n.__decorate([h.aliasOf("viewModel.view")],r.prototype,"view",void 0);
n.__decorate([p.property({type:b})],r.prototype,"viewModel",void 0);n.__decorate([d.accessibleHandler()],r.prototype,"_toggle",null);return r=n.__decorate([g.subclass("esri.widgets.Expand")],r)})},"esri/widgets/Expand/ExpandViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(f){f=a.call(this,f)||this;f._viewpointHandle=null;f._handles=new r;f.group=null;return f}u._inheritsLoose(c,a);var d=c.prototype;d.initialize=function(){this._handles.add(v.on(()=>{var f;return null==(f=this.view)?void 0:f.ui},"expand",f=>{({target:f}=f);f&&f!==this&&f.expanded&&f.group&&f.group===this.group&&this._collapse()}))};d.destroy=function(){this.view=this._viewpointHandle=null;this._handles.destroy();this._handles=null};d._viewpointHandleChange=
function(f){this._viewpointHandle&&(f?v.when(()=>this.view.stationary,()=>this._viewpointHandle.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())};d._watchViewpoint=function(){this._handles.remove("viewpoint");this._viewpointHandle=null;const {autoCollapse:f,view:l}=this;if(l&&f){const m=v.pausable(()=>"3d"===l.type?l.camera:l.viewpoint,()=>this._collapse());this._handles.add(m,"viewpoint");this._viewpointHandle=m}};d._collapse=function(){this.expanded=!1};u._createClass(c,[{key:"autoCollapse",
set:function(f){this._set("autoCollapse",f);this._watchViewpoint()}},{key:"expanded",set:function(f){f=!!f;this._set("expanded",f);const l=this.get("view.ui");l&&l.emit("expand",{target:this});this._viewpointHandleChange(f)}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(f){this._get("view")!==f&&(this._set("view",f),f&&v.when(()=>f.ready,()=>{this.view===f&&this._watchViewpoint()},{once:!0,initial:!0}))}}]);return c}(h);n.__decorate([z.property({value:!1})],
h.prototype,"autoCollapse",null);n.__decorate([z.property({value:!1})],h.prototype,"expanded",null);n.__decorate([z.property()],h.prototype,"group",void 0);n.__decorate([z.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([z.property({value:null})],h.prototype,"view",null);return h=n.__decorate([b.subclass("esri.widgets.Expand.ExpandViewModel")],h)})},"esri/widgets/Search":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/Handles ../core/reactiveUtils ../core/string ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A){const x=/<[a-z/][\s\S]*>/i;h=function(y){function B(D,F){var E=y.call(this,D,F)||this;E._activeMenuItemIndex=-1;E._handles=new v;E._inputNode=null;E._menuItemCount=0;E._sourceMenuButtonNode=null;E._sourceListNode=null;E._suggestionListNode=null;E._searchResultRenderer=new l;E._locateFailed=null;E._container=null;E.activeMenu="none";E.activeSource=null;E.activeSourceIndex=null;E.allPlaceholder=null;E.allSources=null;E.autoNavigate=null;E.autoSelect=
null;E.defaultSources=null;E.disabled=!1;E.goToOverride=null;E.iconClass="esri-icon-search";E.includeDefaultSources=null;E.label=void 0;E.locationEnabled=null;E.maxResults=null;E.maxSuggestions=null;E.messages=null;E.messagesCommon=null;E.minSuggestCharacters=null;E.popupEnabled=null;E.popupTemplate=null;E.portal=null;E.resultGraphic=null;E.resultGraphicEnabled=null;E.results=null;E.searchAllEnabled=null;E.searchTerm=null;E.selectedResult=null;E.sources=null;E.suggestions=null;E.suggestionsEnabled=
null;E.view=null;E.viewModel=new m;E._clearActiveMenu=()=>{E.activeMenu="none"};E._removeActiveMenu=G=>{var O;(G=G.relatedTarget)&&null!=(O=E._container)&&O.contains(G)||E._clearActiveMenu()};E.own([z.watch(()=>E.searchTerm,G=>{(G&&"warning"===E.activeMenu||!G&&!E.get("viewModel.selectedSuggestion.location"))&&E._clearActiveMenu()}),z.on(()=>{var G;return null==(G=E.viewModel)?void 0:G.allSources},"change",()=>E._watchSourceChanges()),z.watch(()=>E.activeMenu,()=>E._resetActiveMenuItemIndex(),z.initial),
z.watch(()=>{var G;return null==(G=E.viewModel)?void 0:G.defaultPopupTemplate},G=>{G&&(G.content=E._renderSearchResultsContent.bind(u._assertThisInitialized(E)))},z.initial)]);return E}u._inheritsLoose(B,y);var C=B.prototype;C.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};C.clear=function(){};C.focus=
function(){var D;null==(D=this._inputNode)?void 0:D.focus();this.emit("search-focus")};C.blur=function(){var D;null==(D=this._inputNode)?void 0:D.blur();this.emit("search-blur")};C.search=function(D){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();const F=new AbortController,{signal:E}=F;this._searchController=F;return this.viewModel.search(D,{signal:E}).catch(G=>{if(this._searchController===F)return this._clearActiveMenu(),this._searchController=null,G}).then(G=>{if(this._searchController===
F)return this.activeMenu=G.numResults?"none":"warning",this._searchController=null,G})};C.suggest=function(D){this._cancelSuggest();const F=new AbortController,{signal:E}=F;this._suggestController=F;return this.viewModel.suggest(D,null,{signal:E}).then(G=>{if(this._suggestController===F)return this._suggestController=null,G.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),G}).catch(()=>{if(this._suggestController===F)return this._suggestController=null})};C.render=function(){const {state:D}=
this.viewModel;return w.tsx("div",{class:this.classes("esri-search esri-widget",{["esri-disabled"]:"disabled"===D,["esri-widget--disabled"]:this.disabled})},"loading"===D?this.renderLoader():this.renderContainer())};C.renderSubmitButton=function(){const {messages:D,disabled:F}=this;return w.tsx("button",{"aria-label":D.searchButtonTitle,bind:this,disabled:F,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,
title:D.searchButtonTitle,type:"button"},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-search"}))};C.renderWarningMenu=function(){return w.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},w.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};C.renderSourceMenuButton=function(){const {messages:D,activeMenu:F,sourceMenuId:E,sourceMenuButtonId:G,disabled:O}=this,{activeSourceIndex:H,allSources:K}=this.viewModel;return 1<K.length?
w.tsx("button",{id:G,key:"esri-search__source-menu-button",bind:this,disabled:O,"aria-label":D.searchIn,title:D.searchIn,"aria-haspopup":"true","aria-expanded":("source"===F).toString(),"aria-controls":E,class:this.classes("esri-search__sources-button","esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:k.storeNode,"data-node-ref":"_sourceMenuButtonNode",type:"button"},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),
w.tsx("span",{"aria-hidden":"true",class:"esri-icon-up-arrow esri-search__sources-button--up"}),w.tsx("span",{class:"esri-search__source-name"},this._getSourceName(H))):null};C.renderSourcesList=function(){const {allSources:D,searchAllEnabled:F}=this.viewModel,{_activeMenuItemIndex:E,activeMenu:G,sourceMenuId:O,sourceMenuButtonId:H}=this,K="source"===G&&-1<E?this._buildId("source-item",E):null;return 1<D.length?w.tsx("ul",{"aria-activedescendant":K,"aria-labelledby":H,id:O,role:"menu",bind:this,afterCreate:k.storeNode,
onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},F?this.renderSource(m.ALL_INDEX):null,D.map((P,L)=>this.renderSource(L)).toArray()):null};C.renderSourcesMenu=function(){const {allSources:D}=this.viewModel;return 1<D.length?w.tsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};C.renderLoader=function(){const {messages:D,
messagesCommon:F,disabled:E}=this;return w.tsx("div",{class:"esri-widget__loader",key:"base-loader",tabIndex:E?-1:null},w.tsx("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),w.tsx("span",{class:"esri-icon-font-fallback-text"},D.searchButtonTitle),w.tsx("span",{class:"esri-widget__loader-text"},F.loading))};C.renderContainer=function(){const {allSources:D,state:F}=this.viewModel,{activeMenu:E}=this;return w.tsx("div",{tabIndex:-1,afterCreate:G=>{this._container=G;G.addEventListener("focusout",
this._removeActiveMenu)},afterRemoved:G=>{G.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({["esri-search--multiple-sources"]:1<D.length,["esri-search--loading"]:"loading"===F,["esri-search--searching"]:"searching"===F,["esri-search--warning"]:"warning"===E,["esri-search--sources"]:"source"===E,["esri-search--show-suggestions"]:"suggestion"===E},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),
this.renderSubmitButton(),this.renderWarningMenu())};C.renderClearButton=function(){return this.searchTerm?w.tsx("button",{bind:this,disabled:this.disabled,class:this.classes("esri-search__clear-button","esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};C.renderLocationGroup=function(){const {messages:D,locationEnabled:F,
displayedSearchTerm:E}=this,G="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return F&&!E?w.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},w.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),
role:"option",class:this.classes("esri-menu__list-item",G?"esri-menu__list-item--focus":null)},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",D.useCurrentLocation)):null};C.renderInput=function(){const {activeMenu:D,locationEnabled:F,displayedSearchTerm:E,messages:G,suggestionsMenuId:O,inputId:H,_activeMenuItemIndex:K,disabled:P}=this,{maxInputLength:L,placeholder:M,searchTerm:J,suggestionCount:R}=this.viewModel,X=!!(F&&!E||R),U="suggestion"===D&&-1<K?this._buildId("suggestion-item",
K):null;return w.tsx("input",{"aria-activedescendant":U,"aria-autocomplete":"list","aria-expanded":(X&&"suggestion"===D).toString(),"aria-controls":X?O:null,"aria-haspopup":"listbox","aria-label":G.searchButtonTitle,bind:this,disabled:P,placeholder:M,maxlength:L,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:J,id:H,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,
afterCreate:k.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:J?"":M})};C.renderForm=function(){return w.tsx("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())};C.renderSuggestList=function(D){const {sourceIndex:F}=D,E=D.results;return D.results.length?w.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${F}`,class:this.classes("esri-menu__list","esri-search__suggestions-list")},
E.map(G=>this.renderSuggestion(G,this._menuItemCount++))):null};C.renderSuggestionsGroup=function(){const {suggestions:D}=this.viewModel;return D?D.map(F=>[this.renderSuggestionHeader(F),this.renderSuggestList(F)]):null};C.renderSuggestionsMenu=function(){const {displayedSearchTerm:D,locationEnabled:F,suggestionsMenuId:E,inputId:G}=this,{suggestionCount:O}=this.viewModel;this._menuItemCount=0;return F&&!D||O?w.tsx("div",{id:E,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),
role:"listbox","aria-labelledby":G,bind:this,afterCreate:k.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};C.renderInputContainer=function(){return w.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};C.renderSuggestionHeader=function(D){const {allSources:F,activeSourceIndex:E}=this.viewModel,{sourceIndex:G}=D,O=1<F.length&&E===
m.ALL_INDEX;return D.results.length&&O?w.tsx("div",{key:`esri-search__suggestion-header-${G}`,class:"esri-menu__header"},this._getSourceName(G)):null};C.renderSuggestion=function(D,F){const {_activeMenuItemIndex:E,messages:G}=this;var {searchTerm:O}=this.viewModel;if(O){var {text:H}=D;H=H||G.untitledResult;const K=[];if(x.test(H))K.push(w.tsx("div",{innerHTML:H}));else{H=this._splitResult(H,O);const P=O.toLowerCase();H.forEach((L,M)=>{L&&L.length&&(L.toLowerCase()===P?K.push(w.tsx("strong",{key:M},
L)):K.push(L))})}O="suggestion"===this.activeMenu&&E===F;return w.tsx("li",{bind:this,id:this._buildId("suggestion-item",F),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===F).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${F}`,"data-suggestion":D,role:"option",class:this.classes("esri-menu__list-item",O?"esri-menu__list-item--focus":null)},K)}};C.renderSource=function(D){const {activeSourceIndex:F,searchAllEnabled:E}=this.viewModel,G={["esri-menu__list-item--active"]:D===
F,["esri-menu__list-item--focus"]:"source"===this.activeMenu&&D===(E?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return w.tsx("li",{bind:this,key:`esri-search__source-${D}`,id:this._buildId("source-item",E?D+1:D),"aria-checked":(D===F).toString(),onclick:this._handleSourceClick,"data-source-index":D,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",G)},this._getSourceName(D))};C.renderNoResultsWarning=function(D){const {messages:F}=this;D=D?A.substitute(F.noResultsFoundForValue,
{value:`"${D}"`}):F.noResultsFound;return w.tsx("div",{key:"esri-search__no_results"},w.tsx("div",{class:"esri-search__warning-header"},F.noResults),w.tsx("div",{class:"esri-search__warning-text"},D))};C.renderEmptySearchWarning=function(){const {messages:D}=this;return w.tsx("div",{key:"esri-search__empty-search"},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),w.tsx("span",{class:"esri-search__no-value-text"},D.emptyValue))};C.renderLocateWarning=function(){const {messages:D}=
this;return w.tsx("div",{key:"esri-search__locate-error"},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),w.tsx("span",{class:"esri-search__no-value-text"},D.locateError))};C.renderWarning=function(){var D;const {displayedSearchTerm:F,_locateFailed:E}=this,{viewModel:G}=this;return E?this.renderLocateWarning():null!=(D=G.selectedSuggestion)&&D.location||F?this.renderNoResultsWarning(F):this.renderEmptySearchWarning()};C._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=
-1};C._buildId=function(D,F){return`${this.id}-${D}${void 0===F?"":`-${F}`}`};C._watchSourceChanges=function(){const {_handles:D,viewModel:{allSources:F}}=this;D.remove("sources");F.forEach(E=>D.add(z.watch(()=>E.name,()=>this.scheduleRender()),"sources"))};C._handleSourcesMenuToggleFocus=function(){"source"!==this.activeMenu&&this._clearActiveMenu()};C._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();if("source"===this.activeMenu){var D;
null==(D=this._sourceListNode)?void 0:D.focus()}};C._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};C._handleSearchButtonClick=function(){this.search()};C._handleSuggestionClick=function(D){if(D=D.currentTarget["data-suggestion"])this._focus(),this.search(D)};C._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};C._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const D=new AbortController,{signal:F}=D;this._searchController=
D;this.viewModel.searchNearby({signal:F}).then(E=>{this.activeMenu=E.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0;this.activeMenu="warning"}).then(()=>{this._searchController=null})};C._handleSourceClick=function(D){this._setSourceFromMenuItem(D.currentTarget)};C._setSourceFromMenuItem=function(D){var F;D&&(this.viewModel.activeSourceIndex=D["data-source-index"],this._clearActiveMenu(),null==(F=this._sourceMenuButtonNode)?void 0:F.focus())};C._cancelSuggest=function(){this._suggestController&&
(this._suggestController.abort(),this._suggestController=null)};C._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null);this._locateFailed=!1};C._handleInputKeyup=function(D){var F,E=r.eventKey(D);if(!D.ctrlKey&&!D.metaKey&&"Copy"!==E&&"ArrowLeft"!==E&&"ArrowRight"!==E&&"Shift"!==E)if("Tab"===E||"Escape"===E||D.shiftKey&&"Tab"===E)this._cancelSuggest(),"Escape"===E&&this._clearActiveMenu();else{var G="Home"===E||"End"===E||"ArrowUp"===E||"ArrowDown"===
E;if("Enter"===E&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var O=null==(F=this._suggestionListNode)?void 0:F.getElementsByTagName("li");if(null!=O&&O.length){"suggestion"!==this.activeMenu&&this._openSuggestionMenu();if(G){D.preventDefault();this._cancelSuggest();this._handleItemNavigation(E,O,this._suggestionListNode);return}D=O[this._activeMenuItemIndex];if("Enter"===E&&D){(E=D["data-suggestion"])?(this._focus(),this.search(E)):D["data-current-location-item"]&&this._useCurrentLocation();
return}}this.viewModel.searchTerm&&this.suggest()}}};C._handleItemNavigation=function(D,F,E){const G=this._activeMenuItemIndex;"Home"===D&&(this._activeMenuItemIndex=0);"End"===D&&(this._activeMenuItemIndex=F.length-1);"ArrowUp"===D&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?F.length-1:this._activeMenuItemIndex-1);"ArrowDown"===D&&(this._activeMenuItemIndex=this._activeMenuItemIndex===F.length-1?0:this._activeMenuItemIndex+1);G!==this._activeMenuItemIndex&&k.keepMenuItemWithinView(F[this._activeMenuItemIndex],
E)};C._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};C._openSuggestionMenu=function(){this.activeMenu="suggestion"};C._handleInputPaste=function(D){D=D.target;this.viewModel.searchTerm!==D.value&&(this.viewModel.searchTerm=D.value);this.viewModel.searchTerm&&this.suggest()};C._handleSourceMenuKeydown=function(D){const F=r.eventKey(D);k.isActivationKey(F)?(D.preventDefault(),D=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],
this._setSourceFromMenuItem(D)):"ArrowUp"!==F&&"ArrowDown"!==F&&"End"!==F&&"Home"!==F||D.preventDefault()};C._handleSourceMenuKeyup=function(D){var F;const E=r.eventKey(D),G="ArrowUp"===E||"ArrowDown"===E||"End"===E||"Home"===E;G&&D.preventDefault();if("Escape"===E){var O;this._clearActiveMenu();null==(O=this._sourceMenuButtonNode)?void 0:O.focus()}else(D=null==(F=this._sourceListNode)?void 0:F.getElementsByTagName("li"))&&0!==D.length&&G&&("source"!==this.activeMenu&&(this.activeMenu="source"),this._handleItemNavigation(E,
D,this._sourceListNode.parentElement))};C._focus=function(D){this.focus();D&&(this.activeMenu=D)};C._formSubmit=function(D){D.preventDefault();-1===this._activeMenuItemIndex&&this.search()};C._getSourceName=function(D){const {messages:F}=this;var {allSources:E}=this.viewModel;E=E.getItemAt(D);return D===m.ALL_INDEX?F.all:E?E.name||F.untitledSource:F.untitledSource};C._splitResult=function(D,F){F=p.escapeRegExpString(F);return D.replace(new RegExp(`(^|)(${F})(|$)`,"ig"),"$1|$2|$3").split("|")};C._renderSearchResultsContent=
function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};u._createClass(B,[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}}]);
return B}(f);n.__decorate([c.property()],h.prototype,"_activeMenuItemIndex",void 0);n.__decorate([c.property()],h.prototype,"displayedSearchTerm",null);n.__decorate([c.property({readOnly:!0})],h.prototype,"inputId",null);n.__decorate([c.property({readOnly:!0})],h.prototype,"suggestionsMenuId",null);n.__decorate([c.property({readOnly:!0})],h.prototype,"sourceMenuId",null);n.__decorate([c.property({readOnly:!0})],h.prototype,"sourceMenuButtonId",null);n.__decorate([c.property()],h.prototype,"activeMenu",
void 0);n.__decorate([g.aliasOf("viewModel.activeSource")],h.prototype,"activeSource",void 0);n.__decorate([g.aliasOf("viewModel.activeSourceIndex")],h.prototype,"activeSourceIndex",void 0);n.__decorate([g.aliasOf("viewModel.allPlaceholder")],h.prototype,"allPlaceholder",void 0);n.__decorate([g.aliasOf("viewModel.allSources")],h.prototype,"allSources",void 0);n.__decorate([g.aliasOf("viewModel.autoNavigate")],h.prototype,"autoNavigate",void 0);n.__decorate([g.aliasOf("viewModel.autoSelect")],h.prototype,
"autoSelect",void 0);n.__decorate([g.aliasOf("viewModel.defaultSources")],h.prototype,"defaultSources",void 0);n.__decorate([c.property()],h.prototype,"disabled",void 0);n.__decorate([g.aliasOf("viewModel.goToOverride")],h.prototype,"goToOverride",void 0);n.__decorate([c.property()],h.prototype,"iconClass",void 0);n.__decorate([g.aliasOf("viewModel.includeDefaultSources")],h.prototype,"includeDefaultSources",void 0);n.__decorate([c.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],
h.prototype,"label",void 0);n.__decorate([g.aliasOf("viewModel.locationEnabled")],h.prototype,"locationEnabled",void 0);n.__decorate([g.aliasOf("viewModel.maxResults")],h.prototype,"maxResults",void 0);n.__decorate([g.aliasOf("viewModel.maxSuggestions")],h.prototype,"maxSuggestions",void 0);n.__decorate([c.property(),q.messageBundle("esri/widgets/Search/t9n/Search")],h.prototype,"messages",void 0);n.__decorate([c.property(),q.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);
n.__decorate([g.aliasOf("viewModel.minSuggestCharacters")],h.prototype,"minSuggestCharacters",void 0);n.__decorate([g.aliasOf("viewModel.popupEnabled")],h.prototype,"popupEnabled",void 0);n.__decorate([g.aliasOf("viewModel.popupTemplate")],h.prototype,"popupTemplate",void 0);n.__decorate([g.aliasOf("viewModel.portal")],h.prototype,"portal",void 0);n.__decorate([g.aliasOf("viewModel.resultGraphic")],h.prototype,"resultGraphic",void 0);n.__decorate([g.aliasOf("viewModel.resultGraphicEnabled")],h.prototype,
"resultGraphicEnabled",void 0);n.__decorate([g.aliasOf("viewModel.results")],h.prototype,"results",void 0);n.__decorate([g.aliasOf("viewModel.searchAllEnabled")],h.prototype,"searchAllEnabled",void 0);n.__decorate([g.aliasOf("viewModel.searchTerm")],h.prototype,"searchTerm",void 0);n.__decorate([g.aliasOf("viewModel.selectedResult")],h.prototype,"selectedResult",void 0);n.__decorate([g.aliasOf("viewModel.sources")],h.prototype,"sources",void 0);n.__decorate([g.aliasOf("viewModel.suggestions")],h.prototype,
"suggestions",void 0);n.__decorate([g.aliasOf("viewModel.suggestionsEnabled")],h.prototype,"suggestionsEnabled",void 0);n.__decorate([g.aliasOf("viewModel.view")],h.prototype,"view",void 0);n.__decorate([t.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),c.property({type:m})],h.prototype,"viewModel",void 0);n.__decorate([g.aliasOf("viewModel.clear")],h.prototype,"clear",null);return h=n.__decorate([d.subclass("esri.widgets.Search")],h)})},
"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../support/jsxFactory ../support/widgetUtils".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d){r=function(f){function l(k,
q){k=f.call(this,k,q)||this;k.messages=null;k.showMoreResultsOpen=!1;k.viewModel=null;return k}u._inheritsLoose(l,f);var m=l.prototype;m.render=function(){return c.tsx("div",{class:"esri-search-result-renderer esri-widget"},c.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{["esri-search-result-renderer__more-results--show-more-results"]:this.showMoreResultsOpen})},this.renderSearchResultName(),this.renderMoreResults()))};m.renderMoreResults=
function(){return c.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};m.renderSearchResultName=function(){var k;const q=null==(k=this.viewModel)?void 0:k.selectedResult;return c.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},q&&q.name||"")};m.renderMoreResultsLists=function(){var k,q=null==(k=this.viewModel)?void 0:k.results;({resultCount:k}=this.viewModel);if(2>k)return null;
q=q.map(t=>this.renderMoreResultsList(t));return c.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},q)};m.renderMoreResultsButton=function(){const {messages:k}=this,{resultCount:q}=this.viewModel;return 2>q?null:c.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},c.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},
this.showMoreResultsOpen?k.hideMoreResults:k.showMoreResults))};m.renderMoreResultsHeader=function(k,q){return c.tsx("div",{key:`esri-search-result-renderer__header-${q}`,class:"esri-search-result-renderer__more-results-list-header"},k)};m.renderMoreResultsList=function(k){var q,t;const {results:w}=k;var A=w.length;const x=!!A,y=null==(q=this.viewModel)?void 0:q.selectedResult;q=1===A&&w[0]===y;A=this._getSourceName(k.source,k.sourceIndex);A=1<(null==(t=this.viewModel)?void 0:t.results.length)&&!q?
this.renderMoreResultsHeader(A,k.sourceIndex):null;t=x&&w.map((B,C)=>this.renderMoreResultsListItem(B,C));t=x&&!q?c.tsx("ul",{key:`esri-search-result-renderer__list-${k.sourceIndex}`},t):null;return x?c.tsx("div",{key:`esri-search-result-renderer__results-${k.sourceIndex}`},A,t):null};m.renderMoreResultsListItem=function(k,q){const t=this.get("viewModel.selectedResult");return k!==t?c.tsx("li",{key:`esri-search-result-renderer__list-item-${q}`},c.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",
bind:this,"data-result":k,onclick:this._selectResultClick,onkeydown:this._selectResultClick},k.name)):null};m._showMoreResultsClick=function(k){k.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(k=this.get("viewModel.view.popup"))&&k.reposition()};m._selectResultClick=function(k){k.preventDefault();k=k.currentTarget["data-result"];this.viewModel&&this.viewModel.select(k)};m._getSourceName=function(k,q){return q===e.ALL_INDEX?this.messages.all:k.name};return l}(g);n.__decorate([h.property(),
a.messageBundle("esri/widgets/Search/t9n/Search")],r.prototype,"messages",void 0);n.__decorate([h.property()],r.prototype,"showMoreResultsOpen",void 0);n.__decorate([h.property()],r.prototype,"viewModel",void 0);n.__decorate([b.accessibleHandler()],r.prototype,"_showMoreResultsClick",null);n.__decorate([b.accessibleHandler()],r.prototype,"_selectResultClick",null);return r=n.__decorate([p.subclass("esri.widgets.Search.SearchResultRenderer")],r)})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../symbols ../../core/Accessor ../../core/Collection ../../core/deprecate ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo ../../symbols/TextSymbol ../../symbols/PictureMarkerSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H,K,P,L,M,J,R,X,U){function V(ca,la){return ca.hasOwnProperty(la)&&null!=ca[la]&&""!==ca[la]}const Q=f.getLogger("esri.widgets.Search.SearchViewModel"),Y=e.ofType({key:ca=>ca.layer?"layer":"locator",base:H,typeMap:{layer:G,locator:O}}),fa=B.WGS84,da=/<(?:.|\s)*?>/g;p=function(ca){function la(S){S=ca.call(this,S)||this;S._handles=new d;S._gotoController=null;S._searching=null;S._createdFeatureLayers=[];S.autoNavigate=!0;S.autoSelect=
!0;S.defaultPopupTemplate=null;S.defaultSources=new Y;S.defaultSymbols={point:new R({url:h.getAssetUrl("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new X({color:[130,130,130,1],width:2}),polygon:new U({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})};S.includeDefaultSources=!0;S.maxInputLength=128;S.maxResults=6;S.maxSuggestions=6;S.messages=null;S.minSuggestCharacters=3;S.popupEnabled=!0;S.popupTemplate=null;S.portal=F.getDefault();S.resultCount=
null;S.resultGraphicEnabled=!0;S.resultGraphic=null;S.results=null;S.selectedSuggestion=null;S.searchAllEnabled=!0;S.selectedResult=null;S.sources=new Y;S.suggestionDelay=350;S.suggestionCount=null;S.suggestions=null;S.suggestionsEnabled=!0;S.view=null;return S}u._inheritsLoose(la,ca);var ha=la.prototype;ha.initialize=function(){var S=this;const ea=function(){var ma=u._asyncToGenerator(function*(){const sa=yield D.fetchMessageBundle("esri/widgets/Search/t9n/Search");S.messages=sa;S.defaultPopupTemplate=
new z({title:sa.searchResult,content:"{Match_addr}"})});return function(){return ma.apply(this,arguments)}}();ea();this._handles.add([k.watch(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),k.initial),C.onLocaleChange(ea)])};ha.destroy=function(){this._destroyFeatureLayers();this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};ha.clear=function(){this.searchTerm=""};ha.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&
this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};ha.search=function(S,ea){this.emit("search-start");this.clearGraphics();const ma=this._createSuggestionForSearch(S);return this._searching=S=this.when().then(()=>this._getResultsFromSources(ma,ea).then(sa=>{var ja;if(null!=(ja=l.unwrap(null==ea?void 0:ea.signal))&&ja.aborted)return null;const wa={activeSourceIndex:this.activeSourceIndex,searchTerm:ma.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(wa,
sa,ma);sa=this._getFirstResult(wa.results);ja=(ma.location&&sa?sa.name:ma.text).replace(da,"");this._set("searchTerm",ja);(ma.key&&"number"===typeof ma.sourceIndex||ma.location)&&this._set("selectedSuggestion",ma);this._set("results",wa.results);this._set("resultCount",wa.results.reduce((Ja,va)=>Ja+va.results.length,0));this.emit("search-complete",wa);return this._selectFirstResult(sa).then(()=>wa)})).then(sa=>{this._clearSearching();return sa},sa=>{this._clearSearching();throw sa;})};ha.searchNearby=
function(S){if(!this.locationEnabled){var ea=new a("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Q.error(ea);return Promise.reject(ea)}this._searching=ea=L.getCurrentPosition().then(ma=>L.positionToPoint({position:ma,view:this.view},S)).then(ma=>this.search(ma,S));ea.catch(()=>{}).then(()=>this._clearSearching());return ea};ha.select=function(S){this.clearGraphics();if(!S){var ea=new a("select:missing-parameter","Cannot select without a searchResult.",
{searchResult:S});Q.error(ea);return Promise.reject(ea)}const {view:ma}=this,sa=V(S,"sourceIndex")?S.sourceIndex:this._getSourceIndexOfResult(S),ja=this.allSources.getItemAt(sa);if(!ja)return ea=new a("select:missing-source","Cannot select without a source.",{source:ja}),Q.error(ea),Promise.reject(ea);ea=ja instanceof G?this._getLayerSourcePopupTemplate(ja):ja.popupTemplate;const wa=ja.resultSymbol||this._getDefaultSymbol(S),Ja=V(ja,"resultGraphicEnabled")?ja.resultGraphicEnabled:this.resultGraphicEnabled,
va=V(ja,"autoNavigate")?ja.autoNavigate:this.autoNavigate,ra=V(ja,"popupEnabled")?ja.popupEnabled:this.popupEnabled,Ba=ra?ea||this.popupTemplate||this.defaultPopupTemplate:null,{feature:Ha}=S;if(!Ha)return ea=new a("select:missing-feature","Cannot select without a feature.",{feature:Ha}),Q.error(ea),Promise.reject(ea);const {attributes:ya,geometry:qa,layer:oa,sourceLayer:Aa}=Ha,Ka=K.getPointFromGeometry(qa);ea={layerViewQuery:this._getLayerView(Ha),elevationQuery:ma&&l.isSome(Ka)?K.getPointWithElevation(Ka,
ma).catch(()=>Ka):Promise.resolve(Ka)};return m.eachAlways(ea).then(Wa=>{const Pa=Wa.layerViewQuery.value,Ta=Wa.elevationQuery.value;wa instanceof J&&(wa.text=S.name);Wa=ma&&va?S.target||S.extent:null;return(l.isSome(Wa)?this._goToSearchResult(Wa):Promise.resolve()).then(()=>{var eb;const Na=Pa?Ha:new v({geometry:qa,symbol:wa,attributes:ya,layer:oa,sourceLayer:Aa,popupTemplate:Ba}),Sa=ra&&(null==(eb=this.view)?void 0:eb.popup);(eb=Sa&&Na.getEffectivePopupTemplate(Sa.defaultPopupTemplateEnabled))&&
ma.popup.open({features:[Na],location:Ta});Pa&&E.highlightsSupported(Pa)&&!eb&&this._highlightFeature({graphic:Na,layerView:Pa});!Pa&&Ja&&ma&&ma.graphics.push(Na);this._setResultFloor(S);this._set("selectedResult",S);this._set("resultGraphic",Na);this.emit("select-result",{result:S,source:ja,sourceIndex:sa});return S})})};ha.suggest=function(S,ea,ma){const sa=S||this.searchTerm;this.emit("suggest-start",{searchTerm:sa});return this._suggestTimer(ea,ma).then(()=>this._suggestImmediate(sa,ma).then(ja=>
{this._set("suggestions",ja.results);this._set("suggestionCount",ja.results.reduce((wa,Ja)=>wa+Ja.results.length,0));this.emit("suggest-complete",ja);return ja}))};ha.when=function(){var S=u._asyncToGenerator(function*(){yield k.whenOnce(()=>!this.updating)});return function(){return S.apply(this,arguments)}}();ha._update=function(){var S=u._asyncToGenerator(function*(){const {portal:ea,view:ma}=this;if(this.includeDefaultSources){const sa=this._updatingPromise=m.eachAlways([null==ea?void 0:ea.load(),
null==ma?void 0:ma.when()]);if(this.destroyed)return;yield sa;if(sa!==this._updatingPromise)return}yield k.whenOnce(()=>this.messages);this.destroyed||this._updateDefaultSources();this._updatingPromise=null});return function(){return S.apply(this,arguments)}}();ha._clearSearching=function(){this._searching=null};ha._convertHelperServices=function(){var S,ea;const ma=null==(S=this.portal)?void 0:null==(ea=S.helperServices)?void 0:ea.geocode;return ma?ma.map(sa=>{if(!1!==sa.placefinding){var ja=r.apiKey&&
P.isArcGISWorldGeocoder(sa.url)?{url:P.meteredArcGISLocatorUrl}:null;sa=O.fromJSON({...sa,...ja});ja=sa.url;(P.isArcGISWorldGeocoder(ja)||P.isProxiedArcGISWorldGeocoder(ja)||P.isMeteredArcGISWorldGeocoder(ja))&&sa.set({singleLineFieldName:"SingleLine",outFields:sa.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:sa.placeholder||this.messages.placeholder,defaultZoomScale:"number"===typeof sa.defaultZoomScale?sa.defaultZoomScale:2500});if(sa.singleLineFieldName)return sa}}).filter(Boolean):
[]};ha._destroyFeatureLayers=function(){this._createdFeatureLayers.forEach(S=>null==S?void 0:S.destroy());this._createdFeatureLayers=[]};ha._getLayerSources=function(S,ea){var ma;const sa=null==(ma=this.view)?void 0:ma.map;return S.map(ja=>{const wa=sa.findLayerById(ja.id);if(wa){ja=this._getLayerJSON(ja);var Ja=G.fromJSON(ja);Ja.placeholder=ea;this._getLayer(wa,ja).then(va=>{Ja.layer=va});return Ja}}).filter(Boolean).toArray()};ha._getTableSources=function(S,ea){var ma;const sa=null==(ma=this.view)?
void 0:ma.map;return S.map(ja=>{const wa=sa.findTableById(ja.id);if(wa){ja=this._getLayerJSON(ja);var Ja=G.fromJSON(ja);Ja.placeholder=ea;this._getLayer(wa,ja).then(va=>{Ja.layer=va});return Ja}}).filter(Boolean).toArray()};ha._convertApplicationProperties=function(){var S,ea,ma;const sa=null==(S=this.view)?void 0:S.map;S=null==sa?void 0:null==(ea=sa.applicationProperties)?void 0:null==(ma=ea.viewing)?void 0:ma.search;if(!S)return[];const {enabled:ja,hintText:wa,layers:Ja,tables:va}=S;if(!ja)return[];
ea=this._getLayerSources(Ja,wa);ma=this._getTableSources(va,wa);return[...ea,...ma]};ha._getSubLayer=function(){var S=u._asyncToGenerator(function*(ea,ma){yield ea.load();if(!ea.allSublayers)throw Error();ea=ea.allSublayers.find(sa=>sa.id===ma.subLayer);if(!ea)throw Error();ea=yield ea.createFeatureLayer();this._createdFeatureLayers.push(ea);return ea});return function(ea,ma){return S.apply(this,arguments)}}();ha._getBuildingSubLayer=function(){var S=u._asyncToGenerator(function*(ea,ma){yield ea.load();
ea=ea.allSublayers.find(sa=>sa.id===ma.subLayer);if("building-component"!==(null==ea?void 0:ea.type))throw Error();yield ea.load();if(null==ea.associatedLayer)throw Error();yield ea.associatedLayer.load();return ea});return function(ea,ma){return S.apply(this,arguments)}}();ha._getLayer=function(S,ea){return"feature"===S.type||"scene"===S.type||"csv"===S.type||"geojson"===S.type||"ogc-feature"===S.type?Promise.resolve(S):"map-image"===S.type?this._getSubLayer(S,ea).catch(()=>{const ma=new a("search:create-featurelayer",
"Could not create a FeatureLayer from the MapImageLayer",{layer:S});Q.error(ma);return null}):"building-scene"===S.type?this._getBuildingSubLayer(S,ea):Promise.resolve(null)};ha._getLayerJSON=function(S){return"function"===typeof S.toJSON?S.toJSON():S};ha._updateDefaultSources=function(){const {defaultSources:S,includeDefaultSources:ea}=this;this._destroyFeatureLayers();S.removeAll();ea&&S.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])};ha._abortGoTo=function(){this._gotoController&&
this._gotoController.abort();this._gotoController=null};ha._clear=function(){this._abortGoTo();this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};ha._closePopup=function(){var S;const ea=null==(S=this.view)?void 0:S.popup;({resultGraphic:S}=this);if(ea&&S){var {selectedFeature:ma}=ea;ma&&ma===S&&ea.close()}};ha._suggestTimer=function(S,
ea){return m.after(null!=S?S:this.suggestionDelay,null,ea&&ea.signal)};ha._createLocationForSearch=function(S){return S instanceof v?K.getPointFromGeometry(S.geometry):S instanceof y?S:Array.isArray(S)&&2===S.length?new y({longitude:S[0],latitude:S[1]}):null};ha._createSuggestionForSearch=function(S){if(S&&V(S,"key")&&V(S,"text")&&V(S,"sourceIndex"))return S;const ea=this._createLocationForSearch(S),ma="string"===typeof S?S:this.searchTerm,{selectedSuggestion:sa,selectedResult:ja}=this,wa=(S=!S&&
sa&&ja)&&sa.location;return S&&sa.key===ja.key&&sa.sourceIndex===ja.sourceIndex||wa?sa:{location:l.unwrap(ea),text:ea?"":ma,sourceIndex:null,key:null}};ha._getFirstResult=function(S){let ea=null;S&&S.some(ma=>{({results:ma}=ma);ma=ma[0];const sa=!!ma;sa&&(ea=ma);return sa});return ea};ha._selectFirstResult=function(S){return this.autoSelect&&S?this.select(S):Promise.resolve(null)};ha._suggestImmediate=function(S,ea){return this.when().then(()=>this._getSuggestionsFromSources(S,ea)).then(ma=>{var sa;
if(null!=(sa=l.unwrap(null==ea?void 0:ea.signal))&&sa.aborted)return null;sa={activeSourceIndex:this.activeSourceIndex,searchTerm:S,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(sa,ma);return sa})};ha._formatSourceResponse=function(S,ea,ma){const sa=ea&&ea.value||[];ea=ea&&ea.error;const ja=this.allSources.getItemAt(ma);ea?(S.errors.push({sourceIndex:ma,source:ja,error:ea}),Q.error(ea),S.numErrors++):(S.results.push({sourceIndex:ma,source:ja,results:sa}),S.numResults+=sa.length)};
ha._formatResponse=function(S,ea,ma){if(ea)if(-1===S.activeSourceIndex){const sa=ma&&V(ma,"sourceIndex")&&-1!==ma.sourceIndex?ma.sourceIndex:void 0;ea.forEach((ja,wa)=>{this._formatSourceResponse(S,ja,void 0!==sa?sa:wa)})}else this._formatSourceResponse(S,ea[0],S.activeSourceIndex)};ha._getResultsFromSources=function(S,ea){var {allSources:ma}=this;const sa=!S.location&&V(S,"sourceIndex")?S.sourceIndex:this.activeSourceIndex,ja=[];if(!ma.length)return ma=new a("search:no-sources-defined","At least one source is required.",
{allSources:ma}),Q.error(ma),Promise.reject(ma);-1===sa?ma.forEach((wa,Ja)=>{ja.push(this._getResultsFromSource(S,Ja,ea))}):ja.push(this._getResultsFromSource(S,sa,ea));return m.eachAlways(ja)};ha._getSuggestionsFromSources=function(S,ea){const {allSources:ma,activeSourceIndex:sa}=this,ja=[];if(!ma.length){const wa=new a("suggest:no-sources-defined","At least one source is required.",{allSources:ma});Q.error(wa);return Promise.reject(wa)}-1===sa?ma.forEach((wa,Ja)=>{ja.push(this._getSuggestionsFromSource(S,
Ja,ea))}):ja.push(this._getSuggestionsFromSource(S,sa,ea));return m.eachAlways(ja)};ha._getResultsFromSource=function(S,ea,ma){var sa;const ja=this.allSources.getItemAt(ea),{location:wa=null}=S,Ja=(null==(sa=this.view)?void 0:sa.spatialReference)||fa;sa=V(ja,"maxResults")?ja.maxResults:this.maxResults;const va=ja instanceof G&&V(ja,"exactMatch")?ja.exactMatch:!1,{view:ra}=this;return ja.getResults({view:ra,sourceIndex:ea,location:wa,suggestResult:S,spatialReference:Ja,exactMatch:va,maxResults:sa},
ma)};ha._getSuggestionsFromSource=function(S,ea,ma){const sa=this.allSources.getItemAt(ea);var ja=V(sa,"suggestionsEnabled")?sa.suggestionsEnabled:this.suggestionsEnabled,wa=S.length,Ja=V(sa,"minSuggestCharacters")?sa.minSuggestCharacters:this.minSuggestCharacters;if(ja&&S.trim()&&wa>=Ja){var va;ja=(null==(va=this.view)?void 0:va.spatialReference)||fa;va=V(sa,"maxSuggestions")?sa.maxSuggestions:this.maxSuggestions;({view:wa}=this);Ja=sa instanceof G&&V(sa,"exactMatch")?sa.exactMatch:!1;return sa.getSuggestions({view:wa,
sourceIndex:ea,suggestTerm:S,spatialReference:ja,maxSuggestions:va,exactMatch:Ja},ma)}return Promise.resolve(null)};ha._getLayerSourcePopupTemplate=function(S){const {layer:ea}=S;if(ea)return V(S,"popupTemplate")?S.popupTemplate:ea.popupTemplate};ha._getSourceIndexOfResult=function(S){let ea=null;this.results.some(ma=>ma.results.some(sa=>sa===S?(ea=ma.sourceIndex,!0):!1));return ea};ha._goToSearchResult=function(){var S=u._asyncToGenerator(function*(ea){const ma=!!ea;this._abortGoTo();const sa=new AbortController;
this._gotoController=sa;yield this.callGoTo({target:{target:ea},options:{animate:ma,signal:sa.signal}});this._gotoController=null});return function(ea){return S.apply(this,arguments)}}();ha._getDefaultSymbol=function(S){var ea;const {defaultSymbols:ma}=this;S=null==(ea=S.feature)?void 0:ea.geometry;if(l.isNone(S))return null;if((ea=this._get("defaultSymbol"))&&("point"===S.type||"multipoint"===S.type))return ea;switch(S.type){case "point":case "multipoint":return ma.point;case "polyline":return ma.polyline;
case "extent":case "polygon":return ma.polygon;default:return null}};ha._removeHighlight=function(){this._handles.remove("highlight")};ha._getLayerView=function(){var S=u._asyncToGenerator(function*(ea){const {view:ma}=this;if(!ea||!ma||"building-component"===ea.layer.type||"subtype-sublayer"===ea.layer.type)return null;({layer:ea}=ea);yield ma.when();return ma.whenLayerView(ea)});return function(ea){return S.apply(this,arguments)}}();ha._highlightFeature=function(S){const {graphic:ea,layerView:ma}=
S,{attributes:sa,layer:ja}=ea;({objectIdField:S}=ja);S=ma.highlight(sa&&sa[S]||ea);this._handles.add(S,"highlight")};ha._setResultFloor=function(S){var ea,ma,sa;const {view:ja}=this,wa=null==(ea=S.feature)?void 0:ea.attributes;(S=null==(ma=S.feature)?void 0:ma.sourceLayer)&&"floorInfo"in S&&null!=S&&null!=(sa=S.floorInfo)&&sa.floorField&&wa&&ja.emit("select-result-floor",wa[S.floorInfo.floorField])};u._createClass(la,[{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||
null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(S){void 0===S?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",S)}},{key:"allPlaceholder",get:function(){var S;return null==(S=this.messages)?void 0:S.allPlaceholder},set:function(S){S?this._override("allPlaceholder",S):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){const {sources:S,defaultSources:ea,includeDefaultSources:ma}=
this,sa="function"===typeof ma?ma.call(null,{sources:S,defaultSources:ea}):ma?ea.concat(S):S,ja=this._get("allSources")||new Y;ja.removeAll();ja.addMany(sa.filter(Boolean));return ja}},{key:"defaultSymbol",get:function(){b.deprecatedProperty(Q,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"});return this._get("defaultSymbol")},set:function(S){b.deprecatedProperty(Q,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"});this._set("defaultSymbol",S)}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||
L.supported()},set:function(S){if(void 0===S)this._clearOverride("locationEnabled");else{var ea=L.supported();if(S&&!ea){const ma=new a("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Q.error(ma)}this._override("locationEnabled",S&&ea)}}},{key:"placeholder",get:function(){const {allSources:S,activeSourceIndex:ea,allPlaceholder:ma}=this;if(-1===ea)return ma;const sa=S.getItemAt(ea);return sa?sa.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||
""},set:function(S){this._set("searchTerm",S||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==S&&this._set("selectedSuggestion",null);""===S&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);return la}(M.GoToMixin(c.EventedMixin(g)));p.ALL_INDEX=-1;n.__decorate([q.property()],p.prototype,"_searching",
void 0);n.__decorate([q.property()],p.prototype,"_updatingPromise",void 0);n.__decorate([q.property({readOnly:!0,value:null})],p.prototype,"activeSource",null);n.__decorate([q.property()],p.prototype,"activeSourceIndex",null);n.__decorate([q.property()],p.prototype,"allPlaceholder",null);n.__decorate([q.property({readOnly:!0})],p.prototype,"allSources",null);n.__decorate([q.property()],p.prototype,"autoNavigate",void 0);n.__decorate([q.property()],p.prototype,"autoSelect",void 0);n.__decorate([q.property()],
p.prototype,"defaultPopupTemplate",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"defaultSources",void 0);n.__decorate([q.property()],p.prototype,"defaultSymbol",null);n.__decorate([q.property()],p.prototype,"defaultSymbols",void 0);n.__decorate([q.property()],p.prototype,"includeDefaultSources",void 0);n.__decorate([q.property()],p.prototype,"locationEnabled",null);n.__decorate([q.property()],p.prototype,"maxInputLength",void 0);n.__decorate([q.property()],p.prototype,"maxResults",
void 0);n.__decorate([q.property()],p.prototype,"maxSuggestions",void 0);n.__decorate([q.property()],p.prototype,"messages",void 0);n.__decorate([q.property()],p.prototype,"minSuggestCharacters",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"placeholder",null);n.__decorate([q.property()],p.prototype,"popupEnabled",void 0);n.__decorate([q.property({type:z})],p.prototype,"popupTemplate",void 0);n.__decorate([q.property({type:F})],p.prototype,"portal",void 0);n.__decorate([q.property()],
p.prototype,"resultCount",void 0);n.__decorate([q.property()],p.prototype,"resultGraphicEnabled",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"resultGraphic",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"results",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"selectedSuggestion",void 0);n.__decorate([q.property()],p.prototype,"searchAllEnabled",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"selectedResult",void 0);n.__decorate([q.property()],
p.prototype,"searchTerm",null);n.__decorate([q.property({type:Y})],p.prototype,"sources",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"state",null);n.__decorate([q.property()],p.prototype,"suggestionDelay",void 0);n.__decorate([q.property()],p.prototype,"suggestionCount",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"suggestions",void 0);n.__decorate([q.property()],p.prototype,"suggestionsEnabled",void 0);n.__decorate([q.property({readOnly:!0})],p.prototype,"updating",
null);n.__decorate([q.property()],p.prototype,"view",void 0);n.__decorate([q.property()],p.prototype,"clear",null);return p=n.__decorate([x.subclass("esri.widgets.Search.SearchViewModel")],p)})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),
function(u,n,h,r,v,z,p,g){var e;v=e=function(b){function a(d){var f=b.call(this,d)||this;f.displayField=null;f.exactMatch=null;f.orderByFields=null;f.searchFields=null;f.searchTemplate=null;f.suggestionTemplate=null;f.getResults=(l,m)=>g.getResults({source:u._assertThisInitialized(f),...l},m);f.getSuggestions=(l,m)=>g.getSuggestions({source:u._assertThisInitialized(f),...l},m);return f}u._inheritsLoose(a,b);var c=a.prototype;c.clone=function(){return new e({autoNavigate:this.autoNavigate,filter:this.filter,
maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?h.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,
layer:this.layer,searchFields:this.searchFields?h.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};c._getFirstStringField=function(){var d,f;return null!=(d=null==(f=this.layer.fieldsIndex.fields.find(l=>"string"===l.type))?void 0:f.name)?d:""};c._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};c._getSearchFieldsString=function(){const {layer:d,searchFields:f}=this;return d.loaded?`: ${(f||
[this._getDisplayField()]).map(l=>{const m=d.getField(l);return m&&m.alias||l}).join(", ")}`:""};c._getLayerTitle=function(){var {layer:d}=this;if(d&&({title:d}=d,d))return`${d}${this._getSearchFieldsString()}`};u._createClass(a,[{key:"layer",set:function(d){this._set("layer",d);d&&d.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(d){void 0===d?this._clearOverride("name"):this._override("name",d)}}]);return a}(p);n.__decorate([r.property({json:{read:{source:"field.name"},
write:{target:"field.name"}}})],v.prototype,"displayField",void 0);n.__decorate([r.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],v.prototype,"exactMatch",void 0);n.__decorate([r.property({value:null})],v.prototype,"layer",null);n.__decorate([r.property()],v.prototype,"name",null);n.__decorate([r.property({type:[String],json:{write:!0}})],v.prototype,"orderByFields",void 0);n.__decorate([r.property()],v.prototype,"searchFields",void 0);n.__decorate([r.property()],
v.prototype,"searchTemplate",void 0);n.__decorate([r.property()],v.prototype,"suggestionTemplate",void 0);return v=e=n.__decorate([z.subclass("esri.widgets.Search.LayerSearchSource")],v)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g,e){h=function(b){function a(c){c=b.call(this,c)||this;c.autoNavigate=null;c.filter=null;c.getResults=null;c.getSuggestions=null;c.maxResults=null;c.maxSuggestions=null;c.minSuggestCharacters=null;c.outFields=null;c.placeholder="";c.popupEnabled=null;c.popupTemplate=null;c.prefix="";c.resultGraphicEnabled=null;c.resultSymbol=null;c.suggestionsEnabled=null;c.suffix="";c.withinViewEnabled=!1;c.zoomScale=null;return c}u._inheritsLoose(a,b);return a}(h.IdentifiableMixin(r.JSONSupport));
n.__decorate([v.property()],h.prototype,"autoNavigate",void 0);n.__decorate([v.property()],h.prototype,"filter",void 0);n.__decorate([v.property()],h.prototype,"getResults",void 0);n.__decorate([v.property()],h.prototype,"getSuggestions",void 0);n.__decorate([v.property()],h.prototype,"maxResults",void 0);n.__decorate([v.property()],h.prototype,"maxSuggestions",void 0);n.__decorate([v.property()],h.prototype,"minSuggestCharacters",void 0);n.__decorate([v.property()],h.prototype,"outFields",void 0);
n.__decorate([v.property()],h.prototype,"placeholder",void 0);n.__decorate([v.property()],h.prototype,"popupEnabled",void 0);n.__decorate([v.property()],h.prototype,"popupTemplate",void 0);n.__decorate([v.property()],h.prototype,"prefix",void 0);n.__decorate([v.property()],h.prototype,"resultGraphicEnabled",void 0);n.__decorate([v.property()],h.prototype,"resultSymbol",void 0);n.__decorate([v.property()],h.prototype,"suggestionsEnabled",void 0);n.__decorate([v.property()],h.prototype,"suffix",void 0);
n.__decorate([v.property()],h.prototype,"withinViewEnabled",void 0);n.__decorate([v.property()],h.prototype,"zoomScale",void 0);return h=n.__decorate([e.subclass("esri.widgets.Search.SearchSource")],h)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){function d(H,K){const {filter:P,withinViewEnabled:L}=H;H=K&&K.extent;return P&&P.geometry||(L&&H?H:void 0)}function f(H){return l.apply(this,arguments)}function l(){l=n._asyncToGenerator(function*(H){H&&(yield H.load())});return l.apply(this,arguments)}function m(H){var K,P,L;return null!=(K=null==H?void 0:null==(P=H.capabilities)?void 0:null==(L=P.query)?void 0:L.supportsPagination)?K:!1}function k(H){var K,P,L,M;return null!=(K=null==H?void 0:null==(P=H.fieldsIndex)?
void 0:null==(L=P.fields)?void 0:null==(M=L.find(J=>"string"===J.type))?void 0:M.name)?K:""}function q(H,K){return H&&K?K.every(P=>!!H.getField(P)):!1}function t(H,K,P){let L=null;({codedValues:H}=H);H&&H.some(M=>{var J=M.name;J=P?J:J.toLowerCase();return(P?K:K.toLowerCase())===J?(L=M.code.toString(),!0):!1});return L}function w(H,K){return(K=K&&K.where)?`(${H}) AND (${K})`:H}function A({currentTerm:H,field:K,filter:P,exactMatch:L,url:M,type:J}){var R=K.type;K=K.name;if("string"===R||"date"===R||
"global-id"===R){if(R=M=E.test(M))a:{for(R=0;R<H.length;R++)if(255<H.charCodeAt(R)){R=!0;break a}R=!1}R=R?"N":"";if(L&&"search"===J)return w(`${K} = ${R}'${H}'`,P);J=M?K:`UPPER(${K})`;H=M?H:H.toUpperCase();return w(`${J} LIKE ${R}${L?`'${H}%'`:`'%${H}%'`}`,P)}return"oid"===R||"small-integer"===R||"integer"===R||"single"===R||"double"===R?(L=Number(H),isNaN(L)?null:w(`${K} = ${L}`,P)):w(`${K} = ${H}`,P)}function x({searchTerm:H,layer:K,searchFields:P,filter:L,exactMatch:M,type:J}){const {definitionExpression:R,
url:X}=K;let U="";H&&P&&P.forEach(V=>{var Q=K.getField(V);V=((V="function"===typeof K.getFieldDomain&&K.getFieldDomain(V))&&"coded-value"===V.type?t(V,H,M):null)||H||null;null!==V&&(Q=A({currentTerm:V,field:Q,filter:L,exactMatch:M,url:X,type:J}))&&(U+=U?` OR (${Q})`:`(${Q})`)});return R?`(${R}) AND (${U})`:U}function y(H,K){let P=null;({codedValues:H}=H);H&&H.length&&H.some(L=>L.code===K?(P=L.name,!0):!1);return P}function B(H,K){return H[Object.keys(H).find(P=>P.toLowerCase()===K.toLowerCase())]}
function C(H,K,P){const L=H.sourceLayer,{attributes:M}=H;H="function"===typeof L.getFieldDomain&&L.getFieldDomain(P);return K?a.substitute(K,M):P&&M?(K=L.getField(P),P=B(M,P),null==P?"":H&&"coded-value"===H.type?y(H,P):"date"===(null==K?void 0:K.type)?c.formatDate(new Date(P)):"number"===typeof P?P.toString():"string"!==typeof P?"":P.trim()):""}function D(H,K,P,L){return H.features.map(M=>{var J=M.sourceLayer,{attributes:R}=M;({objectIdField:J}=J);R=R[J];return M={text:C(M,K.suggestionTemplate,L),
key:R,sourceIndex:P}})}function F(H,K,P,L,M,J,R){return H.features.map(X=>{{var U=X.clone();var V=X.sourceLayer;V=(V=V&&V.objectIdField)&&X.attributes[V];const Y=C(X,P.searchTemplate,M);var Q=b.createExtentFromGeometry(U.geometry,K,J);Q="number"===typeof R?b.scaleExtent(v.clone(Q),K,R):Q;X=X.clone();p.isSome(Q)&&(X.geometry=e.fromExtent(Q));U={extent:Q,target:X,feature:U,key:V,name:Y,sourceIndex:L}}return U})}const E=/https?:\/\/services.*\.arcgis\.com/i,G=/(?:\{([^}]+)\})/g,O=z.getLogger("esri.widgets.Search.support.layerSearchUtils");
u.getResults=function(H,K){const {exactMatch:P=!1,location:L,maxResults:M,spatialReference:J,source:R,sourceIndex:X,suggestResult:U,view:V}=H,{layer:Q,filter:Y,zoomScale:fa}=R,da=V&&V.scale,ca=d(R,V),la=K&&K.signal;return f(Q).then(()=>{const ha=Q.popupTemplate;return ha?ha.getRequiredFields(Q.fieldsIndex):null}).then(ha=>{var S,ea,ma;const {objectIdField:sa,returnZ:ja}=Q,wa=R.displayField||R.layer.displayField||k(R.layer);if(!Q.getField(wa))throw O.error("invalid-field: displayField is invalid."),
new r("getResults():invalid-field","displayField is invalid.");ha=ha&&ha.length?ha:[wa];var Ja=(ha=R.outFields||ha)&&ha.includes("*");ha.includes(sa)||Ja||ha.push(sa);null!=(S=Q.floorInfo)&&S.floorField&&ha.push(Q.floorInfo.floorField);if(!Ja&&!q(Q,ha))throw O.error("invalid-field: outField is invalid."),new r("getResults():invalid-field","outField is invalid.");S=Q.createQuery();({orderByFields:Ja}=R);Ja&&(S.orderByFields=Ja);J&&(S.outSpatialReference=J,Ja=1/g.getMetersPerUnitForSR(J))&&(S.maxAllowableOffset=
Ja);Ja="mesh"===Q.geometryType||"multipatch"===Q.geometryType;const va=(null==(ea=Q.capabilities)?void 0:null==(ma=ea.data)?void 0:ma.supportsZ)&&!Ja;S.returnZ=va&&!1!==ja;S.returnGeometry=!0;S.multipatchOption=Ja?"xyFootprint":null;ha&&(S.outFields=ha);if(L)S.geometry=L;else if(U.key)S.objectIds=[U.key];else{ea=R.searchFields||[wa];if(!q(Q,ea))throw O.error("invalid-field: search field is invalid."),new r("getResults():invalid-field","search field is invalid.");m(Q)&&(S.num=M);ca&&(S.geometry=ca);
if(!U.text.trim())return[];const {prefix:ra="",suffix:Ba=""}=R;ma=`${ra}${U.text}${Ba}`.replace(/'/g,"''");ea=x({searchTerm:ma,layer:Q,searchFields:ea,filter:Y,exactMatch:P,type:"search"});if(!ea)return[];S.where=ea}return Q.queryFeatures(S,{signal:la}).then(ra=>F(ra,V,R,X,wa,da,fa))})};u.getSuggestions=function(H,K){const {source:P,spatialReference:L,view:M,suggestTerm:J,maxSuggestions:R,sourceIndex:X,exactMatch:U}=H,{layer:V,filter:Q}=P,Y=K&&K.signal,fa=d(P,M);return f(V).then(()=>{if(!m(V))return[];
const da=P.displayField||P.layer.displayField||k(P.layer);var ca=P.searchFields||[da];const la=[];P.suggestionTemplate?P.suggestionTemplate.replace(G,(ja,wa)=>{la.push(wa);return ja}):la.push(da);var ha=la&&la.includes("*");la.includes(V.objectIdField)||ha||la.push(V.objectIdField);var S=!!V.getField(da);ha=ha||q(V,la);const ea=q(V,ca);if(!S)throw O.error("invalid-field: displayField is invalid."),new r("getSuggestions():invalid-field","displayField is invalid.");if(!ha)throw O.error("invalid-field: outField is invalid."),
new r("getSuggestions():invalid-field","outField is invalid.");if(!ea)throw O.error("invalid-field: search field is invalid."),new r("getSuggestions():invalid-field","search field is invalid.");S=V.createQuery();({orderByFields:ha}=P);ha&&(S.orderByFields=ha);S.outSpatialReference=L;S.returnGeometry=!1;S.num=R;S.outFields=la;fa&&(S.geometry=fa);if(!J.trim())return[];const {prefix:ma="",suffix:sa=""}=P;ha=`${ma}${J}${sa}`.replace(/'/g,"''");ca=x({searchTerm:ha,layer:V,searchFields:ca,filter:Q,exactMatch:U,
type:"suggest"});if(!ca)return[];S.where=ca;return V.queryFeatures(S,{signal:Y}).then(ja=>D(ja,P,X,da))})};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),function(u,n,h,r,v,z,p){function g(b,a,c){const d=b.hasZ?b.z:void 0;return a&&
a.map?(c?z.getExtentForScale(a,c):a.extent).clone().centerAt(b).set({zmax:d,zmin:d}):new p({xmin:b.x-.25,ymin:b.y-.25,xmax:b.x+.25,ymax:b.y+.25,spatialReference:b.spatialReference,zmin:d,zmax:d})}const e=r.getLogger("esri.widgets.Search.support.geometryUtils");u.createExtentFromGeometry=function(b,a,c){if(v.isNone(b))return null;if("extent"===b.type)return b;if("multipoint"===b.type||"polygon"===b.type||"polyline"===b.type)return b.extent;if("point"===b.type)return g(b,a,c)};u.getPointFromGeometry=
function(b){if(v.isNone(b))return null;switch(b.type){case "point":return b;case "extent":return b.center;case "polygon":return b.centroid;case "multipoint":return b.getPoint(0);case "polyline":return b.getPoint(0,0)}return null};u.getPointWithElevation=function(b,a){var c,d;if(!a)return e.error("missing-parameter: view is missing."),Promise.reject(new h("searchgeometryutils:missing-parameter","view is missing."));if(!b)return e.error("missing-parameter: point is missing."),Promise.reject(new h("searchgeometryutils:missing-parameter",
"point is missing."));if(b.hasZ||"2d"===a.type)return Promise.resolve(b);const f=null==a?void 0:null==(c=a.map)?void 0:c.ground;return f&&f.layers.length?f.queryElevation(b,{cache:null==(d=a.basemapTerrain)?void 0:d.elevationQueryCache}).then(l=>l.geometry):Promise.resolve(b)};u.scaleExtent=function(b,a,c){return v.isNone(b)||v.isNone(a)?null:g(b.center,a,c)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/locatorUtils".split(" "),
function(u,n,h,r,v,z,p,g){var e;v=e=function(b){function a(c){var d=b.call(this,c)||this;d.apiKey=null;d.categories=null;d.countryCode=null;d.defaultZoomScale=null;d.localSearchDisabled=!1;d.locationType=null;d.name="";d.placeholder="";d.searchTemplate="";d.singleLineFieldName=null;d.suggestionsEnabled=null;d.url=null;d.zoomScale=null;d.getResults=(f,l)=>g.getResults({source:u._assertThisInitialized(d),...f},l);d.getSuggestions=(f,l)=>g.getSuggestions({source:u._assertThisInitialized(d),...f},l);
return d}u._inheritsLoose(a,b);a.prototype.clone=function(){return new e({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?h.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,
suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?h.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};return a}(p);n.__decorate([r.property()],v.prototype,"apiKey",void 0);n.__decorate([r.property()],v.prototype,"categories",void 0);n.__decorate([r.property()],v.prototype,"countryCode",void 0);n.__decorate([r.property({json:{write:!0}})],
v.prototype,"defaultZoomScale",void 0);n.__decorate([r.property()],v.prototype,"localSearchDisabled",void 0);n.__decorate([r.property()],v.prototype,"locationType",void 0);n.__decorate([r.property({json:{write:!0}})],v.prototype,"name",void 0);n.__decorate([r.property({json:{write:!0}})],v.prototype,"placeholder",void 0);n.__decorate([r.property()],v.prototype,"searchTemplate",void 0);n.__decorate([r.property({json:{write:!0}})],v.prototype,"singleLineFieldName",void 0);n.__decorate([r.property({json:{read:{source:"suggest"},
write:{target:"suggest"}}})],v.prototype,"suggestionsEnabled",void 0);n.__decorate([r.property({json:{write:!0}})],v.prototype,"url",void 0);n.__decorate([r.property({json:{write:!0}})],v.prototype,"zoomScale",void 0);return v=e=n.__decorate([z.subclass("esri.widgets.Search.LocatorSearchSource")],v)})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/locator/addressToLocations ../../../rest/locator/locationToAddress ../../../rest/locator/suggestLocations ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){function c(q,t){if(t.localSearchDisabled)return null;t=null==q?void 0:q.scale;return"number"===typeof t&&3E5>=t?q.get("extent.center"):null}function d(q,t){const {source:w,spatialReference:A,location:x,sourceIndex:y,view:B}=q,{apiKey:C,url:D,zoomScale:F,defaultZoomScale:E}=w,G=B&&B.scale;q=t&&t.signal;t=new e;t.location=x;C&&(t.apiKey=C);A&&(t.outSpatialReference=A);return z.locationToAddress(D,t,{signal:q}).then(O=>k([O],{sourceIndex:y,scale:G,view:B,zoomScale:F,defaultZoomScale:E})).catch(()=>
[])}function f(q,t){const {filter:w,withinViewEnabled:A}=q;q=t&&t.extent;return(t=a.createExtentFromGeometry(w&&w.geometry,t,t&&t.scale))||(A&&q?q:void 0)}function l(q,t){const {source:w,suggestResult:A,spatialReference:x,view:y,maxResults:B,sourceIndex:C}=q,D=w&&w.zoomScale,F=w&&w.defaultZoomScale;if(!A.text.trim())return Promise.resolve(null);q=`${!A.key&&w.prefix?w.prefix:""}${A.text}${!A.key&&w.suffix?w.suffix:""}`;const E=new g,{apiKey:G,url:O}=w,H=y&&y.scale;var K=f(w,y);t=t&&t.signal;G&&(E.apiKey=
G);if(!O)return Promise.resolve(null);w.categories&&(E.categories=w.categories);w.locationType&&(E.locationType=w.locationType);x&&(E.outSpatialReference=x);const P=c(y,w);P&&(E.location=P);E.maxLocations=B;K&&(E.searchExtent=h.unwrap(K));w.countryCode&&(E.countryCode=w.countryCode);({key:K}=A);const L=`${K}`;K&&(E.magicKey=L);E.address={};E.address[w.singleLineFieldName||"Single Line Input"]=q;w.outFields&&(E.outFields=w.outFields);return v.addressToLocations(O,E,{signal:t}).then(M=>k(M,{key:L,scale:H,
sourceIndex:C,view:y,zoomScale:D,defaultZoomScale:F}))}function m(q,t){return q.map(w=>({text:w.text,key:w.magicKey,sourceIndex:t}))}function k(q,t){return q.filter(Boolean).map(w=>{{const {key:y,scale:B,sourceIndex:C,view:D,zoomScale:F,defaultZoomScale:E}=t,{attributes:G,extent:O,location:H,address:K}=w;w=new n({geometry:H,attributes:G});var A=O||H,x=a.createExtentFromGeometry(A,D,B);A="number"===typeof F?a.scaleExtent(x,D,F):"number"===typeof E&&"point"===A.type?a.scaleExtent(x,D,E):x;x=H?`${H.x},${H.y}`:
"";x=K||x;const P=w.clone();h.isSome(A)&&(P.geometry=r.fromExtent(A));w={extent:A,feature:w,target:P,key:y,name:x,sourceIndex:C}}return w})}u.getLocation=c;u.getResults=function(q,t){return q.location?d(q,t):l(q,t)};u.getSuggestions=function(q,t){const {source:w,spatialReference:A,view:x,suggestTerm:y,maxSuggestions:B,sourceIndex:C}=q;q=new b;const {apiKey:D,url:F}=w,E=f(w,x);t=t&&t.signal;if(!F)return Promise.resolve(null);D&&(q.apiKey=D);w.categories&&(q.categories=w.categories);A&&(q.outSpatialReference=
A);const G=c(x,w);G&&(q.location=G);if(!y.trim())return Promise.resolve(null);const {prefix:O="",suffix:H=""}=w;q.text=`${O}${y}${H}`;E&&(q.searchExtent=h.unwrap(E));q.maxSuggestions=B;w.countryCode&&(q.countryCode=w.countryCode);return p.suggestLocations(F,q,{signal:t}).then(K=>m(K,C))};u.isArcGISWorldGeocoder=function(q){return q?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(q):!1};u.isMeteredArcGISWorldGeocoder=function(q){return q?/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(q):
!1};u.isProxiedArcGISWorldGeocoder=function(q){return q?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(q):!1};u.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/addressToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),
function(u,n,h,r,v,z,p){function g(){g=n._asyncToGenerator(function*(b,a,c){a=p.from(a);b=r.parseUrl(b);const {address:d,...f}=a.toJSON();a=r.encode({...b.query,...d,...f,f:"json"});c=r.asValidOptions(a,c);return h(`${b.path}/findAddressCandidates`,c).then(e)});return g.apply(this,arguments)}function e({data:b}){if(!b)return[];const {candidates:a,spatialReference:c}=b;return a?a.map(d=>{if(d){var {extent:f,location:l}=d,m=f?v.isValidExtent(f):!0;if(v.isValidLocation(l)&&m)return f&&(f.spatialReference=
c),l.spatialReference=c,z.fromJSON(d)}}):[]}u.addressToLocations=function(b,a,c){return g.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/utils":function(){define(["exports"],function(u){u.isValidExtent=function(n){return n&&"number"===typeof n.xmin&&"number"===typeof n.ymin&&"number"===typeof n.xmax&&"number"===typeof n.ymax};u.isValidLocation=function(n){return n&&"number"===typeof n.x&&"number"===typeof n.y};
u.normalizeExtent=function(n){return n?n.shiftCentralMeridian():null};u.normalizePoint=function(n){return n?n.clone().normalize():null};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(d){d=a.call(this,d)||this;d.address=null;d.attributes=null;d.extent=null;d.location=null;d.score=null;return d}u._inheritsLoose(c,a);return c}(h.JSONSupport);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"address",void 0);n.__decorate([r.property({type:Object,json:{write:!0}})],h.prototype,"attributes",void 0);n.__decorate([r.property({type:e,json:{write:!0}})],h.prototype,"extent",void 0);n.__decorate([r.property({type:b,
json:{write:!0}})],h.prototype,"location",void 0);n.__decorate([r.property({type:Number,json:{write:!0}})],h.prototype,"score",void 0);return h=n.__decorate([g.subclass("esri.rest.support.AddressCandidate")],h)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d){h=function(f){function l(m){m=f.call(this,m)||this;m.address=null;m.apiKey=null;m.categories=null;m.countryCode=null;m.forStorage=null;m.location=null;m.locationType=null;m.magicKey=null;m.maxLocations=null;m.outFields=null;m.outSpatialReference=null;m.searchExtent=null;return m}u._inheritsLoose(l,f);return l}(r.JSONSupport);n.__decorate([v.property({type:Object,json:{write:!0}})],h.prototype,"address",void 0);n.__decorate([v.property(b.apiKey)],h.prototype,"apiKey",
void 0);n.__decorate([v.property({type:[String],json:{read:{source:"category",reader:f=>f?f.split(","):null},write:{target:"category",writer:(f,l)=>{l.category=f?f.join(","):null}}}})],h.prototype,"categories",void 0);n.__decorate([v.property({type:String,json:{write:!0}})],h.prototype,"countryCode",void 0);n.__decorate([v.property({type:Boolean,json:{write:!0}})],h.prototype,"forStorage",void 0);n.__decorate([v.property({type:a,json:{write:{writer:(f,l)=>{l.location=f?f.clone().normalize():null}}}})],
h.prototype,"location",void 0);n.__decorate([v.property({type:String,json:{write:!0}})],h.prototype,"locationType",void 0);n.__decorate([v.property({type:String,json:{write:!0}})],h.prototype,"magicKey",void 0);n.__decorate([v.property({type:Number,json:{write:!0}})],h.prototype,"maxLocations",void 0);n.__decorate([v.property({type:[String],json:{write:{writer:(f,l)=>{l.outFields=f?f.join(","):null}}}})],h.prototype,"outFields",void 0);n.__decorate([v.property({type:c,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0);n.__decorate([v.property({type:d,json:{write:{writer:(f,l)=>{f=f?f.shiftCentralMeridian():null;l.searchExtent=f}}}})],h.prototype,"searchExtent",void 0);h=n.__decorate([e.subclass("esri.rest.support.AddressToLocationsParameters")],h);h.from=g.ensureType(h);return h})},"esri/rest/support/commonProperties":function(){define(["exports"],function(u){u.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/locationToAddress":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/LocationToAddressParameters".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(e,b,a){b=z.from(b);e=r.parseUrl(e);b={...b.toJSON(),f:"json"};b=r.encode({...e.query,...b});a=r.asValidOptions(b,a);return h(`${e.path}/reverseGeocode`,a).then(g)});
return p.apply(this,arguments)}function g({data:e}){if(e){var {address:b,location:a}=e;return v.fromJSON({address:b&&b.Match_addr||"",attributes:b||{},location:a,score:100})}}u.locationToAddress=function(e,b,a){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c){h=function(d){function f(l){l=d.call(this,l)||this;l.apiKey=null;l.location=null;l.locationType=null;l.outSpatialReference=null;return l}u._inheritsLoose(f,d);return f}(r.JSONSupport);n.__decorate([v.property(b.apiKey)],h.prototype,"apiKey",void 0);n.__decorate([v.property({type:a,json:{write:{writer:(d,f)=>{d=d?d.clone().normalize():null;f.location="undefined"!==typeof d?d:null}}}})],h.prototype,"location",void 0);n.__decorate([v.property({type:String,json:{write:!0}})],
h.prototype,"locationType",void 0);n.__decorate([v.property({type:c,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0);h=n.__decorate([e.subclass("esri.rest.support.LocationToAddressParameters")],h);h.from=g.ensureType(h);return h})},"esri/rest/locator/suggestLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/SuggestionCandidate ../support/SuggestLocationsParameters".split(" "),function(u,n,h,
r,v,z){function p(){p=n._asyncToGenerator(function*(e,b,a){e=r.parseUrl(e);b=z.from(b);b={...b.toJSON(),f:"json"};b=r.encode({...e.query,...b});a=r.asValidOptions(b,a);return h(`${e.path}/suggest`,a).then(g)});return p.apply(this,arguments)}function g(e){({data:e}=e);if(!e)return[];({suggestions:e}=e);return e?e.map(b=>new v(b)):[]}u.suggestLocations=function(e,b,a){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,n,h,r,v,z,p,g){h=function(e){function b(a){a=e.call(this,a)||this;a.isCollection=null;a.magicKey=null;a.text=null;return a}u._inheritsLoose(b,e);return b}(h.JSONSupport);n.__decorate([r.property({type:Boolean,json:{write:!0}})],h.prototype,"isCollection",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"magicKey",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"text",void 0);return h=n.__decorate([g.subclass("esri.rest.support.SuggestionCandidate")],
h)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(u,n,h,r,v,z,p,g,e,b,a,c,d){h=function(f){function l(m){m=
f.call(this,m)||this;m.apiKey=null;m.categories=null;m.countryCode=null;m.location=null;m.maxSuggestions=null;m.outSpatialReference=null;m.searchExtent=null;m.text=null;return m}u._inheritsLoose(l,f);return l}(r.JSONSupport);n.__decorate([v.property(b.apiKey)],h.prototype,"apiKey",void 0);n.__decorate([v.property({type:[String],json:{read:{source:"category",reader:f=>f?f.split(","):null},write:{target:"category",writer:(f,l)=>{l.category=f?f.join(","):null}}}})],h.prototype,"categories",void 0);n.__decorate([v.property({type:String,
json:{write:!0}})],h.prototype,"countryCode",void 0);n.__decorate([v.property({type:a,json:{write:{writer:(f,l)=>{l.location=f?f.clone().normalize():null}}}})],h.prototype,"location",void 0);n.__decorate([v.property({type:Number,json:{write:!0}})],h.prototype,"maxSuggestions",void 0);n.__decorate([v.property({type:c,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0);n.__decorate([v.property({type:d,json:{write:{writer:(f,l)=>{f=f?f.shiftCentralMeridian():
null;l.searchExtent=JSON.stringify(f)}}}})],h.prototype,"searchExtent",void 0);n.__decorate([v.property({type:String,json:{write:!0}})],h.prototype,"text",void 0);h=n.__decorate([e.subclass("esri.rest.support.SuggestLocationsParameters")],h);h.from=g.ensureType(h);return h})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/arrayUtils ../../core/urlUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/operations/generalize ../../rest/support/GeneralizeParameters ../../rest/operations/lengths ../../rest/support/LengthsParameters ../../rest/operations/offset ../../rest/support/OffsetParameters ../../rest/geometryService/project ../../rest/operations/relation ../../rest/support/RelationParameters ../../rest/operations/trimExtend ../../rest/support/TrimExtendParameters ../../rest/support/ProjectParameters".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y,B,C,D,F,E,G,O,H){function K(J,R,X){if(!R)return Promise.resolve(J);const U=R.spatialReference;return U.isWGS84?Promise.resolve(J):U.isWebMercator?Promise.resolve(p.geographicToWebMercator(J)):P(X).then(V=>{if(!V)throw new h("geometry-service:missing-url","Geometry service URL is missing");const Q=new H({geometries:[J],outSpatialReference:U});return D.project(V,Q,X).then(Y=>Y[0])})}function P(J){if(n.geometryServiceUrl)return Promise.resolve(n.geometryServiceUrl);
const R=g.getDefault();return R.load(J).catch(()=>{}).then(()=>R.get("helperServices.geometry.url"))}const L=v.getLogger("esri.widgets.support.geolocationUtils"),M={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};u.getCurrentPosition=function(J){J||(J=M);return new Promise((R,X)=>{setTimeout(()=>X(new h("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(R,X,J)})};u.positionToPoint=function(J,R){const {position:X,view:U}=J;J=
X&&X.coords||{};J={accuracy:J.accuracy,altitude:J.altitude,altitudeAccuracy:J.altitudeAccuracy,heading:J.heading,latitude:J.latitude,longitude:J.longitude,speed:J.speed};J=X?{coords:J,timestamp:X.timestamp}:X;J=(J=J&&J.coords)?new z({longitude:J.longitude,latitude:J.latitude,z:J.altitude||null,spatialReference:{wkid:4326}}):null;return K(J,U,R)};u.supported=function(){var J;(J=r("esri-geolocation"))||L.warn("geolocation-unsupported","Geolocation unsupported.");J&&((J=window.isSecureContext)||L.warn("insecure-context",
"Geolocation requires a secure origin."));return J};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(u,n){n=new n.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});u.conversionTypeKebabDict=n;u.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,
UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,
UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,
UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",
UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/operations/generalize":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],
function(u,n,h){const r=new n.JSONMap({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});u.generalizeToRESTParameters=function(v){const {geometries:z,deviationUnit:p,maxDeviation:g}=v.toJSON();v={maxDeviation:g};z&&z.length&&(v.geometries=JSON.stringify({geometryType:h.getJsonType(z[0]),geometries:z}),v.sr=JSON.stringify(z[0].spatialReference));r.write(p,
v,"deviationUnit");return v};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(u,n,h,r,v,z,
p,g,e){h=function(b){function a(c){c=b.call(this,c)||this;c.deviationUnit=null;c.geometries=null;c.maxDeviation=null;return c}u._inheritsLoose(a,b);return a}(h.JSONSupport);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"deviationUnit",void 0);n.__decorate([r.property({json:{read:{reader:b=>b?b.map(a=>e.fromJSON(a)):null},write:{writer:(b,a)=>{a.geometries=b.map(c=>c.toJSON())}}}})],h.prototype,"geometries",void 0);n.__decorate([r.property({type:Number,json:{write:!0}})],h.prototype,
"maxDeviation",void 0);h=n.__decorate([g.subclass("esri.rest.support.GeneralizeParameters")],h);h.from=p.ensureType(h);return h})},"esri/rest/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(u,n){const h=new n.JSONMap({preserveShape:"preserve-shape"});u.lengthsToRESTParameters=function(r){const {polylines:v,lengthUnit:z,geodesic:p,calculationType:g}=r.toJSON(),e={};e.polylines=JSON.stringify(v);r=r.polylines[0].spatialReference;e.sr=r.wkid?r.wkid:JSON.stringify(r.toJSON());
z&&(e.lengthUnit=z);p&&(e.geodesic=p);g&&(e.calculationType=h.toJSON(g));return e};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){h=function(c){function d(f){f=c.call(this,f)||this;f.calculationType=null;f.geodesic=null;f.lengthUnit=null;f.polylines=null;return f}u._inheritsLoose(d,c);return d}(r.JSONSupport);n.__decorate([v.property({type:String,json:{write:!0}})],h.prototype,"calculationType",void 0);n.__decorate([v.property({type:Boolean,json:{write:!0}})],h.prototype,"geodesic",void 0);n.__decorate([v.property({json:{write:!0}})],h.prototype,"lengthUnit",void 0);n.__decorate([v.property({type:[a],
json:{read:{reader:c=>c?c.map(d=>b.fromJSON(d)):null},write:{writer:(c,d)=>{d.polylines=c.map(f=>f.toJSON())}}}})],h.prototype,"polylines",void 0);h=n.__decorate([e.subclass("esri.rest.support.LengthsParameters")],h);h.from=g.ensureType(h);return h})},"esri/rest/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(u,n,h){const r=new n.JSONMap({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),
v=new n.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});u.offsetToRESTParameters=function(z){const {geometries:p,bevelRatio:g,offsetDistance:e,offsetHow:b,offsetUnit:a}=z.toJSON();z={bevelRatio:g,offsetDistance:e};p&&p.length&&(z.geometries=JSON.stringify({geometryType:h.getJsonType(p[0]),geometries:p}),z.sr=JSON.stringify(p[0].spatialReference));b&&(z.offsetHow=r.toJSON(b));a&&(z.offsetUnit=v.toJSON(a));return z};Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(u,n,h,r,v,z,p,g,e){h=function(b){function a(c){c=b.call(this,c)||this;c.bevelRatio=
null;c.geometries=null;c.offsetDistance=null;c.offsetHow=null;c.offsetUnit=null;return c}u._inheritsLoose(a,b);return a}(h.JSONSupport);n.__decorate([r.property({type:Number,json:{write:!0}})],h.prototype,"bevelRatio",void 0);n.__decorate([r.property({json:{read:{reader:b=>b?b.map(a=>e.fromJSON(a)):null},write:{writer:(b,a)=>{a.geometries=b.map(c=>c.toJSON())}}}})],h.prototype,"geometries",void 0);n.__decorate([r.property({type:Number,json:{write:!0}})],h.prototype,"offsetDistance",void 0);n.__decorate([r.property({type:String,
json:{write:!0}})],h.prototype,"offsetHow",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"offsetUnit",void 0);h=n.__decorate([g.subclass("esri.rest.support.OffsetParameters")],h);h.from=p.ensureType(h);return h})},"esri/rest/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(u,n,h){const r=new n.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",
esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});u.relationToRESTParameters=function(v){const {geometries1:z,geometries2:p,relation:g,relationParameter:e}=
v.toJSON();v={};if(z&&z.length){v.geometries1=JSON.stringify({geometryType:h.getJsonType(z[0]),geometries:z});const b=z[0].spatialReference;v.sr=b.wkid?b.wkid:JSON.stringify(b)}p&&0<p.length&&(v.geometries2=JSON.stringify({geometryType:h.getJsonType(p[0]),geometries:p}));g&&(v.relation=r.toJSON(g));e&&(v.relationParam=e);return v};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(u,n,h,r,v,z,p,g,e){h=function(b){function a(c){c=b.call(this,c)||this;c.geometries1=null;c.geometries2=null;c.relation=null;c.relationParameter=null;return c}u._inheritsLoose(a,b);return a}(h.JSONSupport);n.__decorate([r.property({json:{read:{reader:b=>b?b.map(a=>e.fromJSON(a)):null},write:{writer:(b,a)=>{a.geometries1=b.map(c=>c.toJSON())}}}})],h.prototype,"geometries1",void 0);n.__decorate([r.property({json:{read:{reader:b=>b?b.map(a=>e.fromJSON(a)):null},write:{writer:(b,a)=>{a.geometries2=
b.map(c=>c.toJSON())}}}})],h.prototype,"geometries2",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"relation",void 0);n.__decorate([r.property({type:String,json:{write:!0}})],h.prototype,"relationParameter",void 0);h=n.__decorate([g.subclass("esri.rest.support.RelationParameters")],h);h.from=p.ensureType(h);return h})},"esri/rest/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(u,n){const h=new n.JSONMap({0:"default-curve-extension",
1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});u.trimExtendToRESTParameters=function(r){const {extendHow:v,polylines:z,trimExtendTo:p}=r.toJSON();r={};r.extendHow=h.toJSON(v);z&&z.length&&(r.polylines=JSON.stringify(z),r.sr=JSON.stringify(z[0].spatialReference));p&&(r.trimExtendTo=JSON.stringify(p));return r};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){h=function(c){function d(f){f=c.call(this,f)||this;f.extendHow="default-curve-extension";f.polylines=null;f.trimExtendTo=null;return f}u._inheritsLoose(d,c);return d}(r.JSONSupport);n.__decorate([v.property({type:String,json:{write:!0}})],h.prototype,"extendHow",void 0);n.__decorate([v.property({type:[a],json:{read:{reader:c=>c?c.map(d=>b.fromJSON(d)):null},write:{writer:(c,d)=>{d.polylines=c.map(f=>f.toJSON())}}}})],h.prototype,"polylines",void 0);n.__decorate([v.property({json:{read:{reader:c=>
c?b.fromJSON(c):null},write:{writer:(c,d)=>{d.trimExtendTo=c.toJSON()}}}})],h.prototype,"trimExtendTo",void 0);h=n.__decorate([e.subclass("esri.rest.support.TrimExtendParameters")],h);h.from=g.ensureType(h);return h})},"esri/widgets/Home":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Home/HomeViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l){r=function(m){function k(t,w){t=m.call(this,t,w)||this;t.goToOverride=null;t.iconClass="esri-icon-home";t.label=void 0;t.messages=null;t.messagesCommon=null;t.view=null;t.viewModel=new b;t.viewpoint=null;return t}u._inheritsLoose(k,m);var q=k.prototype;q.cancelGo=function(){return null};q.go=function(){return null};q.render=function(){var t;const w=null==(t=this.viewModel)?void 0:t.state;({homeTitle:t}=this);return f.tsx("div",{bind:this,class:this.classes("esri-home esri-widget--button esri-widget",
{["esri-disabled"]:"disabled"===w}),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":t,title:t},this.renderIcon(),this.renderText())};q.renderIcon=function(){var t;const w=null==(t=this.viewModel)?void 0:t.state;return f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-icon esri-icon-home",{["esri-icon-loading-indicator"]:"going-home"===w,["esri-rotating"]:"going-home"===w})})};q.renderText=function(){const {messages:t}=this;return f.tsx("span",{class:"esri-icon-font-fallback-text"},
t.button)};q._go=function(){const {viewModel:t}=this;"going-home"===t.state?t.cancelGo():t.go()};u._createClass(k,[{key:"homeTitle",get:function(){var t;const w=null==(t=this.viewModel)?void 0:t.state,{messagesCommon:A,messages:x}=this;return"going-home"===w?A.cancel:x.title}}]);return k}(e);n.__decorate([h.aliasOf("viewModel.goToOverride")],r.prototype,"goToOverride",void 0);n.__decorate([p.property({readOnly:!0})],r.prototype,"homeTitle",null);n.__decorate([p.property()],r.prototype,"iconClass",
void 0);n.__decorate([p.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],r.prototype,"label",void 0);n.__decorate([p.property(),c.messageBundle("esri/widgets/Home/t9n/Home")],r.prototype,"messages",void 0);n.__decorate([p.property(),c.messageBundle("esri/t9n/common")],r.prototype,"messagesCommon",void 0);n.__decorate([h.aliasOf("viewModel.view")],r.prototype,"view",void 0);n.__decorate([p.property({type:b}),d.vmEvent("go")],r.prototype,"viewModel",void 0);n.__decorate([h.aliasOf("viewModel.viewpoint")],
r.prototype,"viewpoint",void 0);n.__decorate([h.aliasOf("viewModel.cancelGo")],r.prototype,"cancelGo",null);n.__decorate([h.aliasOf("viewModel.go")],r.prototype,"go",null);n.__decorate([a.accessibleHandler()],r.prototype,"_go",null);return r=n.__decorate([g.subclass("esri.widgets.Home")],r)})},"esri/widgets/Home/HomeViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Viewpoint ../../core/Error ../../core/Evented ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){v=function(c){function d(l){l=c.call(this,l)||this;l._initialViewpoint=null;l._goingHomeController=null;l.go=l.go.bind(u._assertThisInitialized(l));return l}u._inheritsLoose(d,c);var f=d.prototype;f.destroy=function(){this._cancelGo();this.view=null};f.go=function(){var l=u._asyncToGenerator(function*(){if(!this.get("view.ready"))throw new r("home:disabled-state","Cannot go when disabled.");this._cancelGo();this.emit("go");const m=new AbortController;this._goingHomeController=
m;try{yield this.view.when(),yield this.callGoTo({target:this.viewpoint,options:{signal:m.signal}})}catch(k){}this._goingHomeController=null});return function(){return l.apply(this,arguments)}}();f.cancelGo=function(){this._cancelGo()};f._cancelGo=function(){const {_goingHomeController:l}=this;l&&l.abort();this._goingHomeController=null};u._createClass(d,[{key:"state",get:function(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}},{key:"view",set:function(l){this._initialViewpoint=
null;this._set("view",l);l&&l.when().then(()=>{this.view===l&&(this._initialViewpoint=l.viewpoint.clone(),this.notifyChange("viewpoint"))})}},{key:"viewpoint",get:function(){return this._get("viewpoint")||this._initialViewpoint},set:function(l){this._set("viewpoint",l)}}]);return d}(a.GoToMixin(v.EventedAccessor));n.__decorate([z.property()],v.prototype,"_goingHomeController",void 0);n.__decorate([z.property({readOnly:!0})],v.prototype,"state",null);n.__decorate([z.property()],v.prototype,"view",
null);n.__decorate([z.property({type:h})],v.prototype,"viewpoint",null);n.__decorate([z.property()],v.prototype,"go",null);n.__decorate([z.property()],v.prototype,"cancelGo",null);return v=n.__decorate([b.subclass("esri.widgets.Home.HomeViewModel")],v)})},"esri/widgets/FloorFilter":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./FloorFilter/FloorFilterViewModel ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q){const t=["ArrowUp","ArrowDown","End","Home"];h=function(w){function A(y,B){var C=w.call(this,y,B)||this;C._activeMenu=null;C._activeMenuIndex={levels:-1,menuItems:-1};C._baseNode=null;C._facilitiesListNode=null;C._levelsListNode=null;C._sitesListNode=null;C._searchInput=null;C.enabled=null;C.longNames=null;C.minimized=null;C.pinnedLevels=null;C.site=null;C.facility=null;C.level=null;C.view=null;C.viewModel=new d;C.messages=null;C.messagesCommon=null;C.goToOverride=
null;C.headingLevel=2;C._resizeObserver=new ResizeObserver(()=>C.scheduleRender());C.own(v.watch(()=>C._searchInput,()=>C._focusSearch()));return C}u._inheritsLoose(A,w);var x=A.prototype;x.destroy=function(){this._resizeObserver.disconnect()};x.updateWebDocument=function(){};x.render=function(){var y,{longNames:B}=this;B=B&&this.viewModel.isNormalMode?"expanded":"collapsed";var C=this.renderButtons();const D=this.renderFilterMenu(),F=k.tsx("div",{class:this.classes("esri-floor-filter__separator")});
var E=this._getComponentPosition();const G=this._getPosition(E),O="top-right"===E||"bottom-right"===E,H="top-left"===E||"bottom-left"===E,K=l.isRTL(this.container);E=K&&H||!K&&O?D:C;C=K&&H||!K&&O?C:D;return k.tsx("div",{afterCreate:this._afterBaseNodeCreate,key:"floor-filter-menu",class:this.classes("esri-floor-filter","esri-widget",`${"esri-floor-filter__layout--"}${B}`,`${"esri-floor-filter__position--"}${G}`)},E,(null==(y=this.viewModel)?void 0:y.filterMenuOpen)&&F,C)};x.renderButtons=function(){const y=
this._getComponentPosition(),B=[];"top"===this._getPosition(y)?(B.push(this.renderBrowseButton()),B.push(this.renderLevelButtons()),B.push(this.renderCloseLevelsButton()),B.push(this.renderZoomButton()),B.push(this.renderCollapseToggleButton())):(B.push(this.renderCollapseToggleButton()),B.push(this.renderZoomButton()),B.push(this.renderCloseLevelsButton()),B.push(this.renderLevelButtons()),B.push(this.renderBrowseButton()));return k.tsx("div",{key:"button-container",class:this.classes("esri-widget",
"esri-floor-filter__button-container")},B)};x.renderBrowseButton=function(){var y;const {longNames:B,messages:C}=this;return k.tsx("button",{key:"browse-button",title:C.buttons.browse,bind:this,class:this.classes("esri-widget","esri-widget--button","esri-interactive",("loading"===this.viewModel.state||"disabled"===this.viewModel.state)&&"esri-button--disabled","esri-floor-filter__browse-button",(null==(y=this.viewModel)?void 0:y.filterMenuOpen)&&"esri-widget--button-active"),"aria-expanded":this.viewModel.filterMenuOpen.toString(),
"aria-label":C.buttons.browse,onclick:this._toggleFilterMenu,type:"button"},k.tsx("div",{class:this.classes("esri-floor-filter__button-info")},k.tsx("span",{class:this.classes("esri-icon","esri-icon-urban-model")}),k.tsx("span",{class:this.classes("esri-floor-filter__button-label")},B&&this.viewModel.isNormalMode&&C.buttons.browse)))};x.renderLevelButtons=function(){var y,B,C,D,F;if(null==(y=this.viewModel)||null==(B=y.filterFeatures)||null==(C=B.levels)||!C.levelsInfo||!this.facility)return null;
const {facility:E,messagesCommon:G,messages:O}=this;y=null==(D=this.viewModel)?void 0:D.getFacility(E);D=(null==(F=this.viewModel)?void 0:F.getFacilityLevels(E)).map(H=>this.renderLevelButton(H));if(!D.length)return null;F=y&&q.substitute(O.selector.levelsLabel,{name:`"${y.name}"`});this._isWebScene(this.view.map)&&1<(null==D?void 0:D.length)&&(y=this.renderLevelButton({id:`all--${E}`,facilityId:E,shortName:G.all,longName:G.all,levelNumber:null,verticalOrder:null}),D.push(y));return k.tsx("ul",{key:"levels-button-container",
class:this.classes("esri-floor-filter__levels-container"),bind:this,"data-id":"levels",afterCreate:l.storeNode,"data-node-ref":"_levelsListNode","aria-label":F,onkeydown:this._handleListKeydown},D)};x.renderLevelButton=function(y){var {longNames:B}=this;const {shortName:C,longName:D,id:F}=y;y=this.level===F;B=B&&this.viewModel.isNormalMode?D:C;return this.viewModel.isNormalMode||y||this.viewModel.levelsExpanded?k.tsx("li",{key:`levels--${F}`},k.tsx("button",{"data-id":F,"data-list-id":"levels",bind:this,
class:this.classes("esri-widget--button",y?"esri-widget--button-active":null,"esri-interactive","esri-floor-filter__level-button"),onclick:this._levelSelected,onfocus:this._onItemFocus,type:"button"},B)):null};x.renderCloseLevelsButton=function(){if(!this.level||this.viewModel.isNormalMode||!this.viewModel.levelsExpanded)return null;const {messagesCommon:y}=this;return k.tsx("button",{key:"close-levels-button",title:y.close,bind:this,class:this.classes("esri-widget","esri-widget--button","esri-interactive",
"esri-floor-filter__close-levels-button"),"aria-label":y.close,onclick:this._closeLevels,type:"button"},k.tsx("div",{class:this.classes("esri-floor-filter__button-info")},k.tsx("span",{class:this.classes("esri-icon","esri-icon-close")})))};x.renderZoomButton=function(){var y,B,C,D,F;const {longNames:E,messages:G,facility:O,site:H}=this,K=null==(y=this.viewModel)?void 0:y.filterMenuType;y=null==(B=this.viewModel)?void 0:B.filterMenuOpen;B=null==(C=this.viewModel)?void 0:C.getSite(H);C=null==(D=this.viewModel)?
void 0:D.getFacility(O);return k.tsx("button",{key:"zoom-button",title:G.buttons.zoomTo,bind:this,class:this.classes("esri-widget","esri-widget--button",("site"===K&&y?!B:!C)&&"esri-button--disabled","esri-interactive",0<(null==(F=this.viewModel)?void 0:F.getFacilityLevels(O).length)?"esri-floor-filter__zoom-button--levels":"esri-floor-filter__zoom-button"),"aria-label":G.buttons.zoomTo,onclick:this._zoomToClicked,type:"button"},k.tsx("div",{class:this.classes("esri-floor-filter__button-info")},k.tsx("span",
{class:this.classes("esri-icon","esri-icon-zoom-to-object")}),k.tsx("span",{class:this.classes("esri-floor-filter__button-label")},E&&this.viewModel.isNormalMode&&G.buttons.zoomTo)))};x.renderCollapseToggleButton=function(){const {longNames:y,messagesCommon:B}=this,C=this.classes("esri-icon",y?"esri-icon-collapse":"esri-icon-expand"),D=y?B.collapse:B.expand;return k.tsx("button",{key:"minimize-toggle-button",title:D,bind:this,class:this.classes("esri-widget","esri-widget--button","esri-interactive",
"esri-floor-filter__minimize-toggle-button"),"aria-label":D,onclick:this._toggleCollapsed,type:"button"},k.tsx("div",{class:this.classes("esri-floor-filter__button-info")},k.tsx("span",{class:C}),k.tsx("span",{class:this.classes("esri-floor-filter__button-label")},y&&this.viewModel.isNormalMode&&B.collapse)))};x.renderFilterMenu=function(){var y,B,C;return null!=(y=this.viewModel)&&y.filterMenuOpen?"site"===(null==(B=this.viewModel)?void 0:B.filterMenuType)?this.renderSiteFilterMenu():"facility"===
(null==(C=this.viewModel)?void 0:C.filterMenuType)?this.renderFacilityFilterMenu():null:null};x.renderSiteFilterMenu=function(){var y,B;const {messages:C,messagesCommon:D}=this;var F=this.site?null==(y=this.viewModel)?void 0:null==(B=y.getSite(this.site))?void 0:B.name:C.selector.selectSite;y=k.tsx("div",{key:"filter-menu-site-header",class:this.classes("esri-floor-filter__filter-menu-header")},k.tsx("div",{class:this.classes("esri-floor-filter__filter-menu-header-text-group")},k.tsx(f.Heading,{level:this.headingLevel,
class:this.classes("esri-floor-filter__filter-menu-header-text")},F)),k.tsx("button",{bind:this,title:D.close,class:this.classes("esri-icon","esri-icon-close"),onclick:this._closeClicked,type:"button"}));B=this.renderSearchInput();F=this.renderSiteItems();return k.tsx("div",{key:"filter-menu-site",class:this.classes("esri-floor-filter__filter-menu")},y,B,F)};x.renderFacilityFilterMenu=function(){var y,B,C,D;const {messages:F,messagesCommon:E,site:G}=this;var O=null==(y=this.viewModel)?void 0:null==
(B=y.getSite(G))?void 0:B.name;y=this.facility&&(null==(C=this.viewModel)?void 0:null==(D=C.getFacility(this.facility))?void 0:D.name)||F.selector.selectFacility;C=this.viewModel.hasMultipleSites?k.tsx("button",{bind:this,title:E.back,class:this.classes("esri-floor-filter__filter-menu-header-back"),onclick:this._backClicked,type:"button"},k.tsx("span",{class:this.classes(l.isRTL(this.container)?"esri-icon-right":"esri-icon-left")})):null;O=this.viewModel.hasMultipleSites?k.tsx(f.Heading,{level:f.incrementHeadingLevel(this.headingLevel),
class:this.classes("esri-floor-filter__filter-menu-header-subtext")},O):null;O=k.tsx("div",{key:"filter-menu-site-header",class:this.classes("esri-floor-filter__filter-menu-header")},C,k.tsx("div",{class:this.classes("esri-floor-filter__filter-menu-header-text-group")},k.tsx(f.Heading,{level:this.headingLevel,class:this.classes("esri-floor-filter__filter-menu-header-text")},y),O),k.tsx("button",{bind:this,title:E.close,class:this.classes("esri-icon","esri-icon-close"),onclick:this._closeClicked,type:"button"}));
C=this.renderSearchInput();D=this.renderFacilityItems();return k.tsx("div",{key:"filter-menu-facility",class:this.classes("esri-floor-filter__filter-menu")},O,C,D)};x.renderSearchInput=function(){const {messagesCommon:y}=this;return k.tsx("div",{key:"filter-menu-search",class:this.classes("esri-floor-filter__filter-menu-search")},k.tsx("span",{class:this.classes("esri-icon","esri-icon-search")}),k.tsx("input",{bind:this,key:"filter-menu-search__input",afterCreate:l.storeNode,"data-node-ref":"_searchInput",
class:this.classes("esri-floor-filter__filter-menu-search-input"),placeholder:y.search,oninput:this._onSearchChange,onpaste:this._onSearchChange,value:this.viewModel.searchTerm}))};x.renderBlueCircle=function(){return k.tsx("span",{key:"floor-filter__selected-item-circle",class:this.classes("esri-floor-filter__selected-item-circle")})};x.renderSiteItems=function(){var y,B,C,D;if(null==(y=this.viewModel)||null==(B=y.filterFeatures)||null==(C=B.sites)||!C.sitesInfo)return null;({messages:y}=this);B=
this.viewModel.filterSites(this.viewModel.filterFeatures.sites.sitesInfo).map(F=>this.renderSiteItem(F));C=0===B.length&&(null==(D=this.viewModel)?void 0:D.searchTerm)&&k.tsx("div",{class:this.classes("esri-widget__content--empty")},y.noResults);return k.tsx("ul",{key:"filter-menu-items--sites",class:this.classes("esri-floor-filter__filter-menu-items"),bind:this,afterCreate:l.storeNode,"data-node-ref":"_sitesListNode","data-id":"sites",onkeydown:this._handleListKeydown,tabIndex:-1,"aria-label":y.selector.sitesLabel},
B,C)};x.renderSiteItem=function(y){const {name:B,id:C}=y;y=this.site===C;return k.tsx("li",{key:`filter-menu-site--${C}`},k.tsx("button",{"data-id":C,"data-list-id":"sites",bind:this,class:this.classes("esri-floor-filter__filter-menu-site"),onclick:this._siteSelected,onfocus:this._onItemFocus,type:"button"},y&&this.renderBlueCircle(),k.tsx("span",{class:this.classes(y?"esri-floor-filter__filter-menu-item-name--selected":"esri-floor-filter__filter-menu-item-name")},B),k.tsx("span",{class:this.classes(l.isRTL(this.container)?
"esri-icon-left":"esri-icon-right")})))};x.renderFacilityItems=function(){var y,B,C,D;if(null==(y=this.viewModel)||null==(B=y.filterFeatures)||null==(C=B.facilities)||!C.facilitiesInfo)return null;const {messages:F,site:E}=this;C=this.viewModel.getSite(E);y=this.viewModel.filterFacilities(this.viewModel.filterFeatures.facilities.facilitiesInfo).map(G=>this.renderFacilityItem(G));B=0===y.length&&(null==(D=this.viewModel)?void 0:D.searchTerm)&&k.tsx("div",{class:this.classes("esri-widget__content--empty")},
F.noResults);D=C?q.substitute(F.selector.siteFacilitiesLabel,{name:`"${C.name}"`}):F.selector.facilitiesLabel;return k.tsx("ul",{key:"filter-menu-items--facilities",class:this.classes("esri-floor-filter__filter-menu-items"),bind:this,afterCreate:l.storeNode,"data-node-ref":"_facilitiesListNode","data-id":"facilities",onkeydown:this._handleListKeydown,tabIndex:-1,"aria-label":D},y,B)};x.renderFacilityItem=function(y){const {name:B,id:C}=y;y=this.facility===C;return k.tsx("li",{key:`filter-menu-facility--${C}`},
k.tsx("button",{"data-id":C,"data-list-id":"facilities",bind:this,class:this.classes("esri-floor-filter__filter-menu-facility"),onclick:this._facilitySelected,onfocus:this._onItemFocus,type:"button"},y&&this.renderBlueCircle(),k.tsx("span",{class:this.classes(y?"esri-floor-filter__filter-menu-item-name--selected":"esri-floor-filter__filter-menu-item-name")},B)))};x._afterBaseNodeCreate=function(y){var B;if(this._baseNode){var C;null==(C=this._resizeObserver)?void 0:C.unobserve(this._baseNode)}this._baseNode=
y;null==(B=this._resizeObserver)?void 0:B.observe(this._baseNode)};x._toggleCollapsed=function(){this.longNames=!this.longNames};x._toggleFilterMenu=function(){var y,B;const C=null!=(y=null==(B=this.viewModel)?void 0:B.filterMenuOpen)?y:!1;this.viewModel.filterMenuOpen=!C};x._setFilterMenuType=function(y){this.viewModel.filterMenuType=y};x._zoomToClicked=function(){var y,B;if(this.site&&"site"===(null==(y=this.viewModel)?void 0:y.filterMenuType)&&null!=(B=this.viewModel)&&B.filterMenuOpen){var C,
D=null==(C=this.viewModel)?void 0:C.getSite(this.site);this.viewModel.goTo(D)}else if(this.facility)C=null==(D=this.viewModel)?void 0:D.getFacility(this.facility),this.viewModel.goTo(C);else if(this.site){var F;C=null==(F=this.viewModel)?void 0:F.getSite(this.site);this.viewModel.goTo(C)}};x._onSearchChange=function(y){var B;y=y.target;""===y.value?this.viewModel.searchTerm=null:y.value&&(null==(B=this.viewModel)?void 0:B.searchTerm)!==y.value&&(this.viewModel.searchTerm=y.value.toLowerCase().trim())};
x._closeClicked=function(){this.viewModel.searchTerm=null;this.viewModel.filterMenuOpen=!1};x._backClicked=function(){this._setFilterMenuType("site");this.viewModel.searchTerm=null};x._siteSelected=function(y){y=y.currentTarget.getAttribute("data-id");const B=this.viewModel.getSite(y);let C=!1;this.site!==y&&(this.level=this.facility=void 0,C=!0,this.viewModel.levelsExpanded=!1);this.site=y;this.viewModel.searchTerm=null;this._setFilterMenuType("facility");this.viewModel.goTo(B);C&&this.viewModel.setFloors(null)};
x._facilitySelected=function(y){y=y.currentTarget.getAttribute("data-id");const B=this.viewModel.getFacility(y);var C=!1;if(this.facility!==y){if("base-floors"===this.viewModel.filterMode){var D;this.level=(C=null==(D=this.viewModel)?void 0:D.getBaseLevel(B))?C.id:void 0}else this.level=void 0;C=!0;this.viewModel.levelsExpanded=!1}this.facility=y;this.viewModel.goTo(B);C&&(D=this.viewModel.getLevel(this.level),this.viewModel.setFloors(D));this.viewModel.isNormalMode||(y=this.viewModel.getFacilityLevels(y),
1<(null==y?void 0:y.length)&&(this.viewModel.levelsExpanded=!0));setTimeout(()=>{this._focusActiveLevel()},50)};x._levelSelected=function(y){this.level=y.currentTarget.getAttribute("data-id")};x._closeLevels=function(){this.viewModel.levelsExpanded=!1};x._isWebScene=function(y){return"esri.WebScene"===y.declaredClass};x._getComponentPosition=function(){var y,B;return null==(y=this.view)?void 0:null==(B=y.ui)?void 0:B.getPosition(this.container)};x._getPosition=function(y){switch(y){case "bottom-right":case "bottom-left":return"bottom";
default:return"top"}};x._handleListKeydown=function(y){var B=y.currentTarget.getAttribute("data-id");let C=null;"sites"===B||"facilities"===B?(this._activeMenu!==B&&(this._activeMenuIndex.menuItems=-1),this._activeMenu=B,C="menuItems"):"levels"===B&&(C="levels");var D="sites"===B?this._sitesListNode:"facilities"===B?this._facilitiesListNode:"levels"===B?this._levelsListNode:null;B=r.eventKey(y);const F="Tab"===B,E=t.includes(B);E&&y.preventDefault();(D=null==D?void 0:D.getElementsByTagName("li"))&&
0!==D.length&&(E||F)&&this._handleItemNavigation(B,y.shiftKey,D,F,C)};x._handleItemNavigation=function(y,B,C,D,F){if(F){this._activeMenuIndex[F]===C.length&&this._activeMenuIndex[F]--; -1===this._activeMenuIndex[F]&&this._activeMenuIndex[F]++;var E=this._activeMenuIndex[F];switch(y){case "Home":this._activeMenuIndex[F]=0;break;case "End":this._activeMenuIndex[F]=C.length-1;break;case "ArrowUp":this._activeMenuIndex[F]=0>=this._activeMenuIndex[F]?C.length-1:this._activeMenuIndex[F]-1;break;case "ArrowDown":this._activeMenuIndex[F]=
this._activeMenuIndex[F]===C.length-1?0:this._activeMenuIndex[F]+1}"Tab"===y&&B&&0<=this._activeMenuIndex[F]&&this._activeMenuIndex[F]--;"Tab"===y&&!B&&this._activeMenuIndex[F]<C.length&&this._activeMenuIndex[F]++;E!==this._activeMenuIndex[F]&&-1<this._activeMenuIndex[F]&&this._activeMenuIndex[F]<C.length&&!D&&(y=C[this._activeMenuIndex[F]].getElementsByTagName("button"),y=1===(null==y?void 0:y.length)&&y[0],null==y?void 0:y.focus())}};x._focusSearch=function(){var y;null==(y=this._searchInput)?void 0:
y.focus()};x._focusActiveLevel=function(){var y;const {level:B}=this;var C=this._levelsListNode;const D=null==C?void 0:C.getElementsByTagName("li");if(B&&C&&D){C=null==(y=this._facilitiesListNode)?void 0:y.getElementsByTagName("li");this._activeMenuIndex.menuItems=C?C.length-1:-1;y=[];for(C=0;C<D.length;C++){const F=D[C].getElementsByTagName("button");1===(null==F?void 0:F.length)&&y.push(F[0])}y.forEach((F,E)=>{F.getAttribute("data-id")===B&&(F.focus(),this._activeMenuIndex.levels=E)})}};x._onItemFocus=
function(y){var B=y.currentTarget;y=B.getAttribute("data-list-id");const C=B.getAttribute("data-id");if(B="sites"===y?this._sitesListNode:"facilities"===y?this._facilitiesListNode:"levels"===y?this._levelsListNode:null)if(B=null==B?void 0:B.getElementsByTagName("li")){var D=[];Array.from(B).forEach(E=>{E=E.getElementsByTagName("button");1===(null==E?void 0:E.length)&&D.push(E[0])});var F=null;switch(y){case "sites":case "facilities":F="menuItems";break;case "levels":F="levels"}F&&D.forEach((E,G)=>
{E.getAttribute("data-id")===C&&this._activeMenuIndex[F]!==G&&(this._activeMenuIndex[F]=G)})}};return A}(c);n.__decorate([b.property()],h.prototype,"_searchInput",void 0);n.__decorate([z.aliasOf("viewModel.enabled")],h.prototype,"enabled",void 0);n.__decorate([z.aliasOf("viewModel.longNames")],h.prototype,"longNames",void 0);n.__decorate([z.aliasOf("viewModel.minimized")],h.prototype,"minimized",void 0);n.__decorate([z.aliasOf("viewModel.pinnedLevels")],h.prototype,"pinnedLevels",void 0);n.__decorate([z.aliasOf("viewModel.site")],
h.prototype,"site",void 0);n.__decorate([z.aliasOf("viewModel.facility")],h.prototype,"facility",void 0);n.__decorate([z.aliasOf("viewModel.level")],h.prototype,"level",void 0);n.__decorate([z.aliasOf("viewModel.view")],h.prototype,"view",void 0);n.__decorate([b.property({type:d})],h.prototype,"viewModel",void 0);n.__decorate([b.property(),m.messageBundle("esri/widgets/FloorFilter/t9n/FloorFilter")],h.prototype,"messages",void 0);n.__decorate([b.property(),m.messageBundle("esri/t9n/common")],h.prototype,
"messagesCommon",void 0);n.__decorate([z.aliasOf("viewModel.goToOverride")],h.prototype,"goToOverride",void 0);n.__decorate([b.property()],h.prototype,"headingLevel",void 0);n.__decorate([z.aliasOf("viewModel.updateWebDocument")],h.prototype,"updateWebDocument",null);return h=n.__decorate([a.subclass("esri.widgets.FloorFilter")],h)})},"esri/widgets/FloorFilter/FloorFilterViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../webdoc/Widgets ../../webdoc/widgets/FloorFilter ../support/GoTo".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k){function q(t){return"esri.WebMap"===t.declaredClass}v=function(t){function w(x){x=t.call(this,x)||this;x.filterMenuOpen=!1;x.filterMenuType="site";x.filterMode="base-floors";x.levelsExpanded=!0;x.searchTerm=null;x.view=null;x._updateFloorFilterTask=null;return x}u._inheritsLoose(w,t);var A=w.prototype;A.initialize=function(){var x=this;this.handles.add([g.watch(()=>{var y;return null==(y=this.view)?void 0:y.map},y=>{z.isSome(this._updateFloorFilterTask)&&
(this._updateFloorFilterTask.abort(),this._updateFloorFilterTask=null);this._updateFloorFilterTask=p.createTask(function(){var B=u._asyncToGenerator(function*(C){yield x._updateFloorFilterFromMap(y);p.throwIfAborted(C);x._setInitialViewState(y)});return function(C){return B.apply(this,arguments)}}())},g.initial),g.watch(()=>this.view,(y,B)=>{this._unregisterWidget(B);this._registerWidget(y);this._watchSearchResults(y)},g.syncAndInitial),g.watch(()=>{var y;return null==(y=this.view)?void 0:y.widthBreakpoint},
y=>{this._viewWidthBreakpoint=y}),g.watch(()=>{var y;return null==(y=this.view)?void 0:y.heightBreakpoint},y=>{this._viewHeightBreakpoint=y})])};A.destroy=function(){this._unregisterWidget(this.view);this.view=null;z.isSome(this._updateFloorFilterTask)&&(this._updateFloorFilterTask.abort(),this._updateFloorFilterTask=null)};A.filterFacilities=function(x){let y=x;this.searchTerm&&(y=x.filter(B=>{({name:B}=B);return B.toLowerCase().includes(this.searchTerm.toLowerCase())}));this.site&&(y=y.filter(B=>
B.siteId===this.site));return y.sort((B,C)=>{B=B.name;C=C.name;return B>C?1:B===C?0:-1})};A.filterSites=function(x){let y=x;this.searchTerm&&(y=x.filter(B=>{({name:B}=B);return B.toLowerCase().includes(this.searchTerm.toLowerCase())}));return y.sort((B,C)=>{B=B.name;C=C.name;return B>C?1:B===C?0:-1})};A.getBaseLevel=function(x){var y,B;const C=null==(y=this.filterFeatures)?void 0:null==(B=y.levels)?void 0:B.levelsInfo;let D=null;if(x){const {id:F}=x;if(C&&0<C.length&&(C.forEach(E=>{0===E.verticalOrder&&
E.facilityId===F&&(D=E)}),!D)){let E=null;C.forEach(G=>{if(G.facilityId===F)if(E)if(0<=G.verticalOrder){if(0>E.verticalOrder||G.verticalOrder<E.verticalOrder)E=G}else 0>E.verticalOrder&&G.verticalOrder>E.verticalOrder&&(E=G);else E=G});E&&(D=E)}}return D};A.getFacility=function(x){var y,B,C,D;return null!=(y=null==(B=this.filterFeatures)?void 0:null==(C=B.facilities)?void 0:null==(D=C.facilitiesInfo)?void 0:D.find(F=>F.id===x))?y:null};A.getFacilityLevels=function(x){var y,B;return x&&null!=(y=this.filterFeatures)&&
null!=(B=y.levels)&&B.levelsInfo?this.filterFeatures.levels.levelsInfo.filter(C=>C.facilityId===x).sort((C,D)=>{C=C.verticalOrder;D=D.verticalOrder;return C>D?-1:C===D?0:1}):[]};A.getLevel=function(x){var y,B,C,D;return null!=(y=null==(B=this.filterFeatures)?void 0:null==(C=B.levels)?void 0:null==(D=C.levelsInfo)?void 0:D.find(F=>F.id===x))?y:null};A.getSite=function(x){var y,B,C,D;return null!=(y=null==(B=this.filterFeatures)?void 0:null==(C=B.sites)?void 0:null==(D=C.sitesInfo)?void 0:D.find(F=>
F.id===x))?y:null};A.goTo=function(x){var {view:y}=this;y&&x&&({geometry:x}=x,x&&x.extent&&(y={duration:e.Milliseconds(1E3),easing:"out-back"},this.callGoTo({target:x.extent,options:y})))};A.setFloors=function(x){var y,B,C;null==(y=this.view)?void 0:null==(B=y.map)?void 0:null==(C=B.allLayers)?void 0:C.forEach(D=>{"feature"===D.type&&this._computeViewAllModeFloors(D)});this.view.floors=new h(this._computeFloors(x))};A.updateWebDocument=function(x){if(q(x)){var y,B,C;const D=new m({enabled:this.enabled,
longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:null!=(y=this.site)?y:null,facility:null!=(B=this.facility)?B:null,level:null!=(C=this.level)?C:null});x.widgets?x.widgets.floorFilter=D:x.widgets=new l({floorFilter:D})}};A._computeFloors=function(x){if("single-floor"===this.filterMode)this._computeSingleFloor(x);else if("base-floors"===this.filterMode)return"3d"===this.view.type?this._computeBaseFloors3D(x):this._computeBaseFloors(x);return this._computeEmptyFloors()};
A._computeSingleFloor=function(x){if(!x)return this._computeEmptyFloors();const y=[];"all"===(null==x?void 0:x.id)?this.getFacilityLevels(x.facilityId).forEach(B=>{B.id&&y.push(B.id)}):x&&y.push(x.id);return y};A._computeBaseFloors=function(x){var y,B;const C=null==(y=this.filterFeatures)?void 0:null==(B=y.levels)?void 0:B.levelsInfo;if(!C||!C.length)return this._computeEmptyFloors();const D=[];"all"===(null==x?void 0:x.id)?this.getFacilityLevels(x.facilityId).forEach(E=>{E.id&&D.push(E.id)}):x&&
D.push(x.id);const F=null==x?void 0:x.facilityId;C.forEach(E=>{const {id:G,facilityId:O,verticalOrder:H}=E;F||0!==H||D.includes(G)?O===F||0!==H||D.includes(G)||D.push(G):D.push(G)});return D};A._computeBaseFloors3D=function(x){var y,B;const C=null==(y=this.filterFeatures)?void 0:null==(B=y.levels)?void 0:B.levelsInfo;if(!C||!C.length)return this._computeEmptyFloors();const D=[];y=null==x?void 0:x.id.split("--");1<(null==y?void 0:y.length)&&"all"===y[0]?this.getFacilityLevels(x.facilityId).forEach(E=>
{E.id&&D.push(E.id)}):x&&D.push(x.id);const F=null==x?void 0:x.facilityId;C.forEach(E=>{const {id:G,facilityId:O}=E;F||D.includes(G)?O===F||D.includes(G)||D.push(G):D.push(G)});return D};A._computeEmptyFloors=function(){return[]};A._setFilterLayers=function(){var x=u._asyncToGenerator(function*(){var {view:y}=this;if(!this._isOverridden("filterLayers"))if(q(y.map)||"esri.WebScene"===y.map.declaredClass){var B;y=y.map;const fa=null==y?void 0:y.allLayers;if(0<(null==fa?void 0:null==(B=fa.items)?void 0:
B.length)){var C,D,F,E,G,O,H,K,P,L,M,J;const da={siteLayer:null,facilityLayer:null,levelLayer:null},ca=null==(C=y.floorInfo)?void 0:null==(D=C.siteLayer)?void 0:D.layerId,la=null==(F=y.floorInfo)?void 0:null==(E=F.facilityLayer)?void 0:E.layerId,ha=null==(G=y.floorInfo)?void 0:null==(O=G.levelLayer)?void 0:O.layerId;B=(null==(H=y.floorInfo)?void 0:null==(K=H.siteLayer)?void 0:K.sublayerId)||(null==(P=y.floorInfo)?void 0:null==(L=P.facilityLayer)?void 0:L.sublayerId)||(null==(M=y.floorInfo)?void 0:
null==(J=M.levelLayer)?void 0:J.sublayerId);if(la&&ha){H=fa.items.filter(S=>"feature"===S.type||"scene"===S.type);K=fa.items.filter(S=>"map-image"===S.type);if(0<(null==K?void 0:K.length)&&B){var R,X,U,V,Q,Y;yield Promise.all(K.map(sa=>sa.load()));const S=null==(R=y.floorInfo)?void 0:null==(X=R.siteLayer)?void 0:X.sublayerId,ea=null==(U=y.floorInfo)?void 0:null==(V=U.facilityLayer)?void 0:V.sublayerId,ma=null==(Q=y.floorInfo)?void 0:null==(Y=Q.levelLayer)?void 0:Y.sublayerId;K.forEach(sa=>{const ja=
sa.id;sa=null==sa?void 0:sa.allSublayers;const wa=null==sa?void 0:sa.items;(ja===ca||ja===la||ja===ha)&&0<(null==wa?void 0:wa.length)&&sa.items.forEach(Ja=>{const va=Ja.id;ja===ca&&va===S?da.siteLayer=Ja:va===ea?da.facilityLayer=Ja:va===ma&&(da.levelLayer=Ja)})})}0<(null==H?void 0:H.length)&&H.forEach(S=>{const ea=S.id;ea===ca?da.siteLayer=S:ea===la?da.facilityLayer=S:ea===ha&&(da.levelLayer=S)});this.filterLayers=da}}}else throw new r("Map must be a webmap or webscene");});return function(){return x.apply(this,
arguments)}}();A._getFilterFeatures=function(){var x=u._asyncToGenerator(function*(){if(this._isOverridden("filterFeatures"))return this.filterFeatures;const y={sites:null,facilities:null,levels:null};var B=yield this._getSites();y.sites=B;B=yield this._getFacilities();y.facilities=B;B=yield this._getLevels();y.levels=B;return y});return function(){return x.apply(this,arguments)}}();A._getSites=function(){var x=u._asyncToGenerator(function*(){var y,B;const {filterLayers:C,view:D}=this;var F=D.map;
const {siteLayer:E}=C,G={sitesInfo:[]};if(!E||null==F||null==(y=F.floorInfo)||!y.siteLayer)return G;y=E.createQuery();y.returnGeometry=!0;y.outFields=["*"];y.returnZ=!0;"type"in E&&"scene"===E.type&&(y.multipatchOption="xyFootprint");const {siteIdField:O,nameField:H}=F.floorInfo.siteLayer;F=yield E.queryFeatures(y);if(0<(null==F?void 0:null==(B=F.features)?void 0:B.length)){var K,P;B=F.features;const L=(null==E?void 0:null==(K=E.fieldsIndex.get(O))?void 0:K.name)||O,M=(null==E?void 0:null==(P=E.fieldsIndex.get(H))?
void 0:P.name)||H;B.forEach(J=>{var R=J.attributes;J=J.geometry;const X=R[L];R=R[M];X&&R&&G.sitesInfo.push({id:X,name:R,geometry:J})})}return G});return function(){return x.apply(this,arguments)}}();A._getFacilities=function(){var x=u._asyncToGenerator(function*(){var y,B;const {filterLayers:C,view:D}=this;var F=D.map;const {facilityLayer:E}=C,G={facilitiesInfo:[]};if(!E||null==F||null==(y=F.floorInfo)||!y.facilityLayer)return G;y=E.createQuery();y.returnGeometry=!0;y.outFields=["*"];y.returnZ=!0;
"type"in E&&"scene"===E.type&&(y.multipatchOption="xyFootprint");const {facilityIdField:O,siteIdField:H,nameField:K}=F.floorInfo.facilityLayer;F=yield E.queryFeatures(y);if(0<(null==F?void 0:null==(B=F.features)?void 0:B.length)){var P,L,M;B=F.features;const J=(null==E?void 0:null==(P=E.fieldsIndex.get(O))?void 0:P.name)||O,R=(null==E?void 0:null==(L=E.fieldsIndex.get(H))?void 0:L.name)||H,X=(null==E?void 0:null==(M=E.fieldsIndex.get(K))?void 0:M.name)||K;B.forEach(U=>{var V=U.attributes;U=U.geometry;
const Q=V[J],Y=V[R];V=V[X];Q&&V&&G.facilitiesInfo.push({id:Q,siteId:Y,name:V,geometry:U})})}return G});return function(){return x.apply(this,arguments)}}();A._getLevels=function(){var x=u._asyncToGenerator(function*(){var y,B;const {filterLayers:C,view:D}=this;var F=D.map;const {levelLayer:E}=C,G={levelsInfo:[]};if(!E||null==F||null==(y=F.floorInfo)||!y.levelLayer)return G;y=E.createQuery();y.returnGeometry=!0;y.outFields=["*"];y.returnZ=!0;const {levelIdField:O,facilityIdField:H,longNameField:K,
shortNameField:P,levelNumberField:L,verticalOrderField:M}=F.floorInfo.levelLayer;F=yield E.queryFeatures(y);if(0<(null==F?void 0:null==(B=F.features)?void 0:B.length)){var J,R,X,U,V,Q;B=F.features;const Y=(null==E?void 0:null==(J=E.fieldsIndex.get(O))?void 0:J.name)||O,fa=(null==E?void 0:null==(R=E.fieldsIndex.get(H))?void 0:R.name)||H,da=(null==E?void 0:null==(X=E.fieldsIndex.get(K))?void 0:X.name)||K,ca=(null==E?void 0:null==(U=E.fieldsIndex.get(P))?void 0:U.name)||P,la=(null==E?void 0:null==(V=
E.fieldsIndex.get(L))?void 0:V.name)||L,ha=(null==E?void 0:null==(Q=E.fieldsIndex.get(M))?void 0:Q.name)||M;B.forEach(S=>{var ea=S.attributes;S=ea[Y];const ma=ea[fa],sa=ea[da],ja=ea[ca],wa=ea[la];ea=ea[ha];S&&ma&&sa&&ja&&"number"===typeof wa&&"number"===typeof ea&&G.levelsInfo.push({id:S,facilityId:ma,longName:sa,shortName:ja,levelNumber:wa,verticalOrder:ea})})}return G});return function(){return x.apply(this,arguments)}}();A._registerWidget=function(x){(null==x?0:x.persistableViewModels.includes(this))||
(null==x?void 0:x.persistableViewModels.add(this))};A._unregisterWidget=function(x){null==x?void 0:x.persistableViewModels.remove(this)};A._watchSearchResults=function(x){null==x?void 0:x.on("select-result-floor",y=>{const B=this.getLevel(y);B&&this.level!==y&&(this.level=y,this.setFloors(B))})};A._setInitialViewState=function(){var x=u._asyncToGenerator(function*(y){if(this.view)try{yield this.view.when();yield this._setFilterLayers();const C=yield this._getFilterFeatures();if(C)if(this.filterFeatures=
C,this.hasFacilities&&this.hasLevels)if(this.hasMultipleSites||(this.filterMenuType="facility"),this.facility&&this.level){this.filterMenuType="facility";const D=this.getFacility(this.facility),F=this.getLevel(this.level);this.site||(this.site=D.siteId||void 0);this.setFloors(F)}else if(this.facility&&!this.level){this.filterMenuType="facility";const D=this.getFacility(this.facility),F=this.getBaseLevel(D);this.site||(this.site=D.siteId||void 0);this.level=(null==F?void 0:F.id)||void 0;this.setFloors(F)}else if(!this.facility&&
this.level){this.filterMenuType="facility";const D=this.getLevel(this.level),F=this.getFacility(null==D?void 0:D.facilityId);this.facility=(null==F?void 0:F.id)||void 0;this.site||(this.site=(null==F?void 0:F.siteId)||void 0);this.setFloors(D)}else{if(!this.site||this.facility||this.level){var B;if(!y||!q(y)){this.setFloors(null);return}const D=null==y?void 0:null==(B=y.widgets)?void 0:B.floorFilter;if(!D){this.setFloors(null);return}D.site&&!this.site&&(this.site=D.site,this.filterMenuType="facility")}else this.filterMenuType=
"site";this.setFloors(null)}else console.error("Facilities and Levels are required for the Floor Filter widget")}catch(C){console.error("Couldn't retrieve sites, facilities, and levels",C)}});return function(y){return x.apply(this,arguments)}}();A._callOverride=function(x,y){this._override(x,y)};A._updateFloorFilterFromMap=function(){var x=u._asyncToGenerator(function*(y){var B;y&&q(y)&&(y=null==y?void 0:null==(B=y.widgets)?void 0:B.floorFilter)&&(this._isOverridden("enabled")||(this.enabled=y.enabled),
this._isOverridden("longNames")||(this.longNames=y.longNames),this._isOverridden("minimized")||(this.minimized=y.minimized),this._isOverridden("pinnedLevels")||(this.pinnedLevels=y.pinnedLevels),this._isOverridden("site")||(this.site=y.site),this._isOverridden("facility")||(this.facility=y.facility),this._isOverridden("level")||(this.level=y.level))});return function(y){return x.apply(this,arguments)}}();A._computeViewAllModeFloors=function(x){var y;const {filterFeatures:B}=this;if(null!=(y=x.floorInfo)&&
y.viewAllMode&&this.hasLevels&&this.hasFacilities&&"base-floors"===this.filterMode){const {level:C,facility:D}=this,F=[];B.levels.levelsInfo.forEach(E=>{const {id:G,facilityId:O}=E;D&&O===D?C&&G===C&&F.push(G):F.push(G)});x.floorInfo.viewAllLevelIds=new h(F)}};u._createClass(w,[{key:"enabled",set:function(x){this._callOverride("enabled",x)}},{key:"facility",set:function(x){if(x&&this._isOverridden("facility")){const y=this.getFacility(x);this.hasMultipleSites&&(this.site=(null==y?void 0:y.siteId)||
void 0)}this._callOverride("facility",x)}},{key:"filterFeatures",set:function(x){this._callOverride("filterFeatures",x)}},{key:"filterLayers",set:function(x){this._callOverride("filterLayers",x)}},{key:"hasFacilities",get:function(){var x,y,B,C;return(null==(x=this.filterLayers)?void 0:x.facilityLayer)&&0<(null==(y=this.filterFeatures)?void 0:null==(B=y.facilities)?void 0:null==(C=B.facilitiesInfo)?void 0:C.length)}},{key:"hasLevels",get:function(){var x,y,B,C;return(null==(x=this.filterLayers)?void 0:
x.levelLayer)&&0<(null==(y=this.filterFeatures)?void 0:null==(B=y.levels)?void 0:null==(C=B.levelsInfo)?void 0:C.length)}},{key:"hasMultipleSites",get:function(){var x,y,B,C;return(null==(x=this.filterLayers)?void 0:x.siteLayer)&&1<(null==(y=this.filterFeatures)?void 0:null==(B=y.sites)?void 0:null==(C=B.sitesInfo)?void 0:C.length)}},{key:"isNormalMode",get:function(){let x=!0;const y=this._viewWidthBreakpoint;if("xsmall"===this._viewHeightBreakpoint||"xsmall"===y)x=!1;return x}},{key:"level",set:function(x){if(x){var y=
null,B=null;y=null==x?void 0:x.split("--");if(1<(null==y?void 0:y.length)&&"all"===y[0])B=y[1],y={id:x,facilityId:B,shortName:null,longName:null,levelNumber:null,verticalOrder:null};else{var C;y=this.getLevel(x);B=null==(C=y)?void 0:C.facilityId}if(this.level!==x||this.isNormalMode||this.levelsExpanded){if(y&&this.hasFacilities&&this.hasLevels){this.facility=B;if(this.hasMultipleSites){var D;this.site=null==(D=this.getFacility(B))?void 0:D.siteId}this.setFloors(y)}else this._isOverridden("level")&&
(this.site=this.facility=void 0,this.hasMultipleSites&&(this.filterMenuType="site"),this.setFloors(null));this._callOverride("level",x)}else x=this.getFacilityLevels(B),1<(null==x?void 0:x.length)&&(this.levelsExpanded=!0)}else this._callOverride("level",x),this.site=this.facility=void 0,this.setFloors(null)}},{key:"longNames",set:function(x){this._callOverride("longNames",x)}},{key:"minimized",set:function(x){this._callOverride("minimized",x)}},{key:"pinnedLevels",set:function(x){this._callOverride("pinnedLevels",
x)}},{key:"site",set:function(x){this._callOverride("site",x)}},{key:"state",get:function(){return this.view&&this.filterFeatures&&this.hasFacilities&&this.hasLevels?"ready":this.view&&!this.filterFeatures?"loading":"disabled"}}]);return w}(k.GoToMixin(v.HandleOwner));n.__decorate([b.property({value:!1})],v.prototype,"enabled",null);n.__decorate([b.property({value:void 0})],v.prototype,"facility",null);n.__decorate([b.property({value:null})],v.prototype,"filterFeatures",null);n.__decorate([b.property({value:null})],
v.prototype,"filterLayers",null);n.__decorate([b.property()],v.prototype,"filterMenuOpen",void 0);n.__decorate([b.property()],v.prototype,"filterMenuType",void 0);n.__decorate([b.property()],v.prototype,"filterMode",void 0);n.__decorate([b.property()],v.prototype,"hasFacilities",null);n.__decorate([b.property()],v.prototype,"hasLevels",null);n.__decorate([b.property()],v.prototype,"hasMultipleSites",null);n.__decorate([b.property({readOnly:!0})],v.prototype,"isNormalMode",null);n.__decorate([b.property({value:void 0})],
v.prototype,"level",null);n.__decorate([b.property({value:!1})],v.prototype,"longNames",null);n.__decorate([b.property()],v.prototype,"levelsExpanded",void 0);n.__decorate([b.property({value:!1})],v.prototype,"minimized",null);n.__decorate([b.property({value:!1})],v.prototype,"pinnedLevels",null);n.__decorate([b.property()],v.prototype,"searchTerm",void 0);n.__decorate([b.property({value:void 0})],v.prototype,"site",null);n.__decorate([b.property({readOnly:!0})],v.prototype,"state",null);n.__decorate([b.property()],
v.prototype,"view",void 0);n.__decorate([b.property()],v.prototype,"_viewHeightBreakpoint",void 0);n.__decorate([b.property()],v.prototype,"_viewWidthBreakpoint",void 0);n.__decorate([b.property()],v.prototype,"updateWebDocument",null);return v=n.__decorate([f.subclass("esri/widgets/FloorFilter/FloorFilterViewModel")],v)})},"app/widgets/actionBars/MapContextMenu":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget ./ActionPad esri/rest/locator esri/Graphic esri/symbols/SimpleMarkerSymbol esri/core/watchUtils esri/core/domUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);p=h.__importStar(p);g=h.__importDefault(g);e=h.__importDefault(e);b=h.__importStar(b);a=h.__importStar(a);u=function(c){function d(f){f=c.call(this,f)||this;f.handles=[];f.xoffset="0";f.yoffset="13";f.placement="trailing-end";return f}h.__extends(d,c);d.prototype.postInitialize=function(){this.screenPoint={x:this.position.native.offsetX,y:this.position.native.offsetY};c.prototype.postInitialize.call(this)};
d.prototype.getActionNames=function(){return this.actions=this.actions=[["whatshere"],[]]};d.prototype.destroy=function(){c.prototype.destroy.call(this);this.referenceElement&&(a.remove(this.referenceElement),this.referenceElement=null)};d.prototype.handleActionClick=function(f){var l=this.config,m=this.state.portal,k=(f.selectorTarget||f.target).id;l=l&&l.worldLocator||m.getWorldLocator();k=this.findAction(k);c.prototype.handleActionClick.call(this,f);l&&k&&"whatshere"===k.name&&this.addCoordinatePopup()};
d.prototype.addCoordinatePopup=function(){var f=this,l=this.getLocatorTaskUrl();if(l){var m=this.position,k=this.mapView;k.popup.open({title:this.messages.whatsHere,location:m.mapPoint,content:""});this.graphic=this.addGraphic(m.mapPoint);var q={location:m.mapPoint};p.locationToAddress(l,q).then(function(t){return f.setContent(k,t,q)}).then(function(){return f.addEventHandlers()}).catch(function(){return f.setContent(k,{},q)})}};d.prototype.addEventHandlers=function(){var f=this,l=this.mapView;this.handles=
this.handles.concat([b.watch(l.popup,"visible",function(){return f.removeGraphic()}),b.watch(l.popup,"content",function(){return f.removeGraphic()})])};d.prototype.removeGraphic=function(){this.mapView.graphics.remove(this.graphic);this.graphic=null;this.handles.forEach(function(f){return f&&f.remove()})};d.prototype.addGraphic=function(f){var l=this.mapView,m=new e.default({outline:{width:1},size:14,color:[255,255,255,0]});f=new g.default({geometry:f,symbol:m});l.graphics.add(f);return f};d.prototype.setContent=
function(f,l,m){var k=l.attributes;l=l.location||m.location;m=f.spatialReference.isWebMercator?this.getLatLong(l,f):this.getXY(m.location,f);k=k?this.getLocationString(k):"";k=h.__assign({locationString:k},m);f.popup.content='\x3cdiv\x3e\x3cdiv class\x3d"esri-popup__address"\x3e'+k.locationString+'\x3c/div\x3e\x3cdiv class\x3d"esri-popup__location"\x3e'+k.latitude+", "+k.longitude+"\x3c/div\x3e";return!0};d.prototype.getLatLong=function(f,l){l=this.getAccuracy(l);return{longitude:Math.round(f.longitude*
l)/l,latitude:Math.round(f.latitude*l)/l}};d.prototype.getXY=function(f,l){l=this.getAccuracy(l);return{latitude:Math.round(f.x*l)/l,longitude:Math.round(f.y*l)/l}};d.prototype.getAccuracy=function(f){var l=1E6;1E6<f.scale?l=100:1E5<f.scale?l=1E3:1E4<f.scale?l=1E4:5E3<f.scale?l=1E5:100<f.scale&&(l=1E6);return l};d.prototype.getLocationString=function(f){var l=f.LongLabel,m=f.Match_Addr,k=f.Addr_type,q=f.Match_addr,t=f.Address;t=void 0===t?"":t;var w=f.City;w=void 0===w?"":w;f=f.State;f=void 0===f?
"":f;return l?l:m?"POI"!==k?m:(void 0===q?"":q)+", "+t+", "+w+", "+f:t+", "+w+", "+f};d.prototype.getLocatorTaskUrl=function(){var f=this.config,l=this.state.portal;if(f=f&&f.worldLocator||l.getWorldLocator())return f};d.prototype.onAppClick=function(f){f=f.target;var l=this.popover,m=f.closest("calcite-action-pad");f.closest(".esri-popup")||m||!l||(a.remove(l),this.removeGraphic(),this.destroy())};h.__decorate([r.property(),v.messageBundle("mapviewer/actions")],d.prototype,"messages",void 0);return d=
h.__decorate([r.subclass("")],d)}(z.default);n.default=u})},"esri/rest/locator":function(){define(["exports","./locator/addressToLocations","./locator/addressesToLocations","./locator/locationToAddress","./locator/suggestLocations"],function(u,n,h,r,v){u.addressToLocations=n.addressToLocations;u.addressesToLocations=h.addressesToLocations;u.locationToAddress=r.locationToAddress;u.suggestLocations=v.suggestLocations;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rest/locator/addressesToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/AddressesToLocationsParameters".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(e,b,a){b=z.from(b);e=r.parseUrl(e);b={...b.toJSON(),f:"json"};b=r.encode({...e.query,...b});a=r.asValidOptions(b,a);return h(`${e.path}/geocodeAddresses`,a).then(g)});return p.apply(this,arguments)}function g(e){({data:e}=
e);if(!e)return[];const {locations:b,spatialReference:a}=e;return b?b.map(c=>{const {location:d}=c;d&&(d.spatialReference=a);return v.fromJSON(c)}):[]}u.addressesToLocations=function(e,b,a){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AddressesToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(u,n,h,r,v,z,p,g,e,b){h=function(a){function c(d){d=a.call(this,d)||this;d.addresses=null;d.categories=null;d.countryCode=null;d.locationType=null;d.outSpatialReference=null;return d}u._inheritsLoose(c,a);return c}(r.JSONSupport);n.__decorate([v.property({type:[Object],json:{read:{reader:a=>a&&a.records?a.records.map(c=>c.attributes):null},write:{writer:(a,c)=>{const d=[];Array.isArray(a)&&a.forEach(f=>{d.push({attributes:f})});c.addresses={records:d}}}}})],h.prototype,"addresses",void 0);
n.__decorate([v.property({type:[String],json:{read:{source:"category",reader:a=>a?a.split(","):null},write:{target:"category",writer:(a,c)=>{c.category=a?a.join(","):null}}}})],h.prototype,"categories",void 0);n.__decorate([v.property({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],h.prototype,"countryCode",void 0);n.__decorate([v.property({type:String,json:{write:!0}})],h.prototype,"locationType",void 0);n.__decorate([v.property({type:b,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0);h=n.__decorate([e.subclass("esri.rest.support.AddressesToLocationsParameters")],h);h.from=g.ensureType(h);return h})},"app/utils/project":function(){define("require exports tslib esri/config esri/geometry/Extent esri/geometry/support/webMercatorUtils esri/rest/geometryService esri/rest/support/ProjectParameters".split(" "),function(u,n,h,r,v,z,p,g){var e=this;Object.defineProperty(n,"__esModule",{value:!0});n.getExtent=n.project=
void 0;r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importStar(z);p=h.__importStar(p);g=h.__importDefault(g);n.project=function(c,d){d=d.spatialReference;var f=r.default.geometryServiceUrl;if(z.canProject(c,d))return c=z.project(c,d),Promise.resolve(c);var l=new g.default;l.geometries=[c];l.outSpatialReference=d;return p.project(f,l).then(function(m){return m[0]})};n.getExtent=function(c,d,f){return h.__awaiter(e,void 0,void 0,function(){var l,m,k,q,t,w,A,x,y,B;return h.__generator(this,function(C){switch(C.label){case 0:return"route"!==
(null===c||void 0===c?void 0:c.type)?[3,1]:[2,null===(y=c.routeInfo.geometry)||void 0===y?void 0:y.extent];case 1:return l=c.portalItem,m=!l||!(null===l||void 0===l?0:l.extent)||b(l),[4,n.project(new v.default({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:{wkid:4326}}),d)];case 2:return k=C.sent(),m&&l&&l.extent?[4,n.project(l.extent,d)]:[3,4];case 3:return t=C.sent(),[3,5];case 4:t=null,C.label=5;case 5:return q=t,(w=(null===c||void 0===c?void 0:c.layers)&&((null===l||void 0===l?void 0:l.typeKeywords)||
[]).find(function(D){return"Location Tracking Service"===D})||!1)&&(c=(null===(B=null===c||void 0===c?void 0:c.layers)||void 0===B?void 0:B.getItemAt(0))||c),m?[3,6]:[2,Promise.resolve(k)];case 6:return f||!q?[3,7]:[2,Promise.resolve(q)];case 7:if(!c.createQuery||!c.queryExtent)return[3,8];A=c.createQuery();A.outSpatialReference=d.spatialReference;return[2,c.queryExtent(A).then(function(D){return D&&D.extent||c.fullExtent||k},function(){return c.fullExtent||k})];case 8:return c.fullExtent?[4,n.project(c.fullExtent,
d)]:[3,10];case 9:return x=C.sent(),[3,11];case 10:x=k,C.label=11;case 11:return[2,x]}})})};var b=function(c){if(c&&c.extent){var d=z.geographicToWebMercator(c.extent).extent;c=d.xmax;var f=d.ymax;d=z.xyToLngLat(d.xmin,d.ymin);c=z.xyToLngLat(c,f);return a(d[0],-180,180)||a(c[0],-180,180)||a(d[1],-90,90)||a(c[1],-90,90)?!0:!1}return!1},a=function(c,d,f){return c>=d&&c<=f}})},"esri/rest/geometryService":function(){define("exports ./geometryService/areasAndLengths ./geometryService/autoComplete ./geometryService/buffer ./geometryService/convexHull ./geometryService/cut ./geometryService/densify ./geometryService/difference ./geometryService/distance ./geometryService/fromGeoCoordinateString ./geometryService/generalize ./geometryService/intersect ./geometryService/labelPoints ./geometryService/lengths ./geometryService/offset ./geometryService/project ./geometryService/relation ./geometryService/reshape ./geometryService/simplify ./geometryService/toGeoCoordinateString ./geometryService/trimExtend ./geometryService/union ./geometryService/units".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y){u.areasAndLengths=n.areasAndLengths;u.autoComplete=h.autoComplete;u.buffer=r.buffer;u.convexHull=v.convexHull;u.cut=z.cut;u.densify=p.densify;u.difference=g.difference;u.distance=e.distance;u.fromGeoCoordinateString=b.fromGeoCoordinateString;u.generalize=a.generalize;u.intersect=c.intersect;u.labelPoints=d.labelPoints;u.lengths=f.lengths;u.offset=l.offset;u.project=m.project;u.relation=k.relation;u.reshape=q.reshape;u.simplify=t.simplify;u.toGeoCoordinateString=
w.toGeoCoordinateString;u.trimExtend=A.trimExtend;u.union=x.union;u.conversionTypeKebabDict=y.conversionTypeKebabDict;u.units=y.units;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/areasAndLengths":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../utils"],function(u,n,h,r){function v(){v=n._asyncToGenerator(function*(z,p,g){z=r.parseUrl(z);p={...z.query,f:"json",...p.toJSON()};g=r.asValidOptions(p,
g);return h(z.path+"/areasAndLengths",g).then(e=>e.data)});return v.apply(this,arguments)}u.areasAndLengths=function(z,p,g){return v.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/autoComplete":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../utils ./utils ../../geometry/Polygon".split(" "),function(u,n,h,r,v,z,p){function g(){g=n._asyncToGenerator(function*(e,
b,a,c){const d=b[0].spatialReference;e=v.parseUrl(e);b={...e.query,f:"json",sr:JSON.stringify(d.toJSON()),polygons:JSON.stringify(z.encodeGeometries(b).geometries),polylines:JSON.stringify(z.encodeGeometries(a).geometries)};c=v.asValidOptions(b,c);return r(e.path+"/autoComplete",c).then(({data:f})=>(f.geometries||[]).map(({rings:l})=>new p({spatialReference:d,rings:l})))});return g.apply(this,arguments)}u.autoComplete=function(e,b,a,c){return g.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/buffer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../utils ../../geometry/Polygon".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,e,b){g=v.parseUrl(g);const a={...g.query,f:"json",...e.toJSON()},c=e.outSpatialReference||e.geometries[0].spatialReference;e=v.asValidOptions(a,b);return r(g.path+"/buffer",e).then(d=>(d.data.geometries||[]).map(({rings:f})=>
new z({spatialReference:c,rings:f})))});return p.apply(this,arguments)}u.buffer=function(g,e,b){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/convexHull":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/support/jsonUtils ../utils ./utils".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,e,b){const a=e[0].spatialReference;
g=v.parseUrl(g);e={...g.query,f:"json",sr:JSON.stringify(a.toJSON()),geometries:JSON.stringify(z.encodeGeometries(e))};b=v.asValidOptions(e,b);return h(g.path+"/convexHull",b).then(({data:c})=>r.fromJSON(c.geometry).set({spatialReference:a}))});return p.apply(this,arguments)}u.convexHull=function(g,e,b){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),
function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,e,b,a){g=z.parseUrl(g);const c=e[0].spatialReference;e={...a,query:{...g.query,f:"json",sr:JSON.stringify(c),target:JSON.stringify({geometryType:v.getJsonType(e[0]),geometries:e}),cutter:JSON.stringify(b)}};e=yield r(g.path+"/cut",e);const {cutIndexes:d,geometries:f=[]}=e.data;return{cutIndexes:d,geometries:f.map(l=>{l=v.fromJSON(l);l.spatialReference=c;return l})}});return p.apply(this,arguments)}u.cut=function(g,e,b,a){return p.apply(this,
arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/densify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../geometry/support/jsonUtils","../utils"],function(u,n,h,r,v){function z(){z=n._asyncToGenerator(function*(p,g,e){const b=g.geometries[0].spatialReference;p=v.parseUrl(p);g={...p.query,f:"json",...g.toJSON()};e=v.asValidOptions(g,e);return h(p.path+"/densify",e).then(({data:a})=>
(a.geometries||[]).map(c=>r.fromJSON(c).set({spatialReference:b})))});return z.apply(this,arguments)}u.densify=function(p,g,e){return z.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/difference":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/support/jsonUtils ../utils ./utils".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,
e,b,a){const c=e[0].spatialReference;g=v.parseUrl(g);e={query:{...g.query,f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(z.encodeGeometries(e)),geometry:JSON.stringify({geometryType:r.getJsonType(b),geometry:b.toJSON()})}};a&&(e={...a,...e});return h(g.path+"/difference",e).then(({data:d})=>(d.geometries||[]).map(f=>r.fromJSON(f).set({spatialReference:c})))});return p.apply(this,arguments)}u.difference=function(g,e,b,a){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/distance":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../utils"],function(u,n,h,r){function v(){v=n._asyncToGenerator(function*(z,p,g){z=r.parseUrl(z);p={...z.query,f:"json",...p.toJSON()};g=r.asValidOptions(p,g);return h(z.path+"/distance",g).then(({data:e})=>e&&e.distance)});return v.apply(this,arguments)}u.distance=function(z,p,g){return v.apply(this,arguments)};Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/fromGeoCoordinateString":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../utils","./units"],function(u,n,h,r,v){function z(){z=n._asyncToGenerator(function*(p,g,e){const b={};b.sr=null!=g.sr&&"object"===typeof g.sr?g.sr.wkid||JSON.stringify(g.sr):g.sr;b.strings=JSON.stringify(g.strings);b.conversionType=v.conversionTypeKebabDict.toJSON(g.conversionType||"mgrs");b.conversionMode=
g.conversionMode;p=r.parseUrl(p);e=r.asValidOptions({...p.query,f:"json",...b},e);return h(p.path+"/fromGeoCoordinateString",e).then(({data:a})=>a.coordinates)});return z.apply(this,arguments)}u.fromGeoCoordinateString=function(p,g,e){return z.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/generalize":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/support/jsonUtils ../utils ../operations/generalize ../support/GeneralizeParameters".split(" "),
function(u,n,h,r,v,z,p){function g(){g=n._asyncToGenerator(function*(e,b,a){b=p.from(b);const c=b.toJSON();b=z.generalizeToRESTParameters(b);e=v.parseUrl(e);const d=c.geometries[0].spatialReference;a=v.asValidOptions({...e.query,f:"json",...b},a);return h(e.path+"/generalize",a).then(({data:f})=>(f.geometries||[]).map(l=>r.fromJSON(l).set({spatialReference:d})))});return g.apply(this,arguments)}u.generalize=function(e,b,a){return g.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/intersect":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/support/jsonUtils ../utils ./utils".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,e,b,a){const c=e[0].spatialReference;g=v.parseUrl(g);e={...g.query,f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(z.encodeGeometries(e)),geometry:JSON.stringify({geometryType:r.getJsonType(b),
geometry:b.toJSON()})};a=v.asValidOptions(e,a);return h(g.path+"/intersect",a).then(({data:d})=>(d.geometries||[]).map(f=>r.fromJSON(f).set({spatialReference:c})))});return p.apply(this,arguments)}u.intersect=function(g,e,b,a){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/labelPoints":function(){define(["exports","../../request","../../geometry/support/jsonUtils","../utils"],function(u,n,h,r){u.labelPoints=
function(v,z,p){var g=z.map(b=>b.toJSON());const e=z[0].spatialReference;v=r.parseUrl(v);g={...v.query,f:"json",sr:e.wkid?e.wkid:JSON.stringify(e.toJSON()),polygons:JSON.stringify(g)};p=r.asValidOptions(g,p);return n(v.path+"/labelPoints",p).then(({data:b})=>(b.labelPoints||[]).map(a=>h.fromJSON(a).set({spatialReference:e})))};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/lengths":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../operations/lengths ../support/LengthsParameters".split(" "),
function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,e,b){e=z.from(e);e=v.lengthsToRESTParameters(e);g=r.parseUrl(g);b=r.asValidOptions({...g.query,f:"json",...e},b);return h(g.path+"/lengths",b).then(({data:a})=>a)});return p.apply(this,arguments)}u.lengths=function(g,e,b){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/offset":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/support/jsonUtils ../utils ../operations/offset ../support/OffsetParameters".split(" "),
function(u,n,h,r,v,z,p){function g(){g=n._asyncToGenerator(function*(e,b,a){b=p.from(b);const c=z.offsetToRESTParameters(b);e=v.parseUrl(e);const d=b.geometries[0].spatialReference;b=v.asValidOptions({...e.query,f:"json",...c},a);return h(e.path+"/offset",b).then(({data:f})=>(f.geometries||[]).map(l=>r.fromJSON(l).set({spatialReference:d})))});return g.apply(this,arguments)}u.offset=function(e,b,a){return g.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rest/geometryService/relation":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../operations/relation ../support/RelationParameters".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,e,b){e=z.from(e);e=v.relationToRESTParameters(e);g=r.parseUrl(g);b=r.asValidOptions({...g.query,f:"json",...e},b);return h(g.path+"/relation",b).then(({data:a})=>a.relations)});return p.apply(this,arguments)}u.relation=function(g,e,b){return p.apply(this,
arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/reshape":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../geometry/support/jsonUtils","../utils"],function(u,n,h,r,v){function z(){z=n._asyncToGenerator(function*(p,g,e,b){const a=g.spatialReference;p=v.parseUrl(p);g={...p.query,f:"json",sr:JSON.stringify(a.toJSON()),target:JSON.stringify({geometryType:r.getJsonType(g),geometry:g.toJSON()}),
reshaper:JSON.stringify(e.toJSON())};b=v.asValidOptions(g,b);return h(p.path+"/reshape",b).then(({data:c})=>r.fromJSON(c.geometry).set({spatialReference:a}))});return z.apply(this,arguments)}u.reshape=function(p,g,e,b){return z.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,e,b){const a="string"===typeof g?r.urlToObject(g):g;g=e[0].spatialReference;const c=v.getJsonType(e[0]);e={...b,query:{...a.query,f:"json",sr:g.wkid?g.wkid:JSON.stringify(g),geometries:JSON.stringify(z.encodeGeometries(e))}};({data:e}=yield h(a.path+"/simplify",e));return z.decodeGeometries(e.geometries,c,g)});return p.apply(this,arguments)}u.simplify=function(g,e,b){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/toGeoCoordinateString":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../utils","./units"],function(u,n,h,r,v){function z(){z=n._asyncToGenerator(function*(p,g,e){const b={};b.sr=null!=g.sr&&"object"===typeof g.sr?g.sr.wkid||JSON.stringify(g.sr):g.sr;b.coordinates=JSON.stringify(g.coordinates);b.conversionType=v.conversionTypeKebabDict.toJSON(g.conversionType||"mgrs");b.conversionMode=g.conversionMode;
b.numOfDigits=g.numOfDigits;b.rounding=g.rounding;b.addSpaces=g.addSpaces;p=r.parseUrl(p);e=r.asValidOptions({...p.query,f:"json",...b},e);return h(p.path+"/toGeoCoordinateString",e).then(({data:a})=>a.strings)});return z.apply(this,arguments)}u.toGeoCoordinateString=function(p,g,e){return z.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/trimExtend":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../utils ../operations/trimExtend ../support/TrimExtendParameters ../../geometry/Polyline".split(" "),
function(u,n,h,r,v,z,p,g){function e(){e=n._asyncToGenerator(function*(b,a,c){a=p.from(a);const d=z.trimExtendToRESTParameters(a);b=v.parseUrl(b);const f=a.sr;a=v.asValidOptions({...b.query,f:"json",...d},c);return r(b.path+"/trimExtend",a).then(({data:l})=>(l.geometries||[]).map(({paths:m})=>new g({spatialReference:f,paths:m})))});return e.apply(this,arguments)}u.trimExtend=function(b,a,c){return e.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rest/geometryService/union":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/support/jsonUtils ../utils ./utils".split(" "),function(u,n,h,r,v,z){function p(){p=n._asyncToGenerator(function*(g,e,b){const a=e[0].spatialReference;g=v.parseUrl(g);e={...g.query,f:"json",sr:JSON.stringify(a.toJSON()),geometries:JSON.stringify(z.encodeGeometries(e))};b=v.asValidOptions(e,b);return h(g.path+"/union",b).then(({data:c})=>r.fromJSON(c.geometry).set({spatialReference:a}))});
return p.apply(this,arguments)}u.union=function(g,e,b){return p.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"app/utils/itemUtils":function(){define("require exports tslib esri/core/watchUtils ./urlUtils ./mapUtils/errorUtils".split(" "),function(u,n,h,r,v,z){Object.defineProperty(n,"__esModule",{value:!0});n.findQuery=n.goToMarker=n.setGraphic=n.setBasemap=void 0;r=h.__importStar(r);n.setBasemap=function(p,g){var e=g.basemapUrl;
g=g.basemapReferenceUrl;return e&&p?v.getBasemap(e,g).then(function(b){p.basemap=b;return p},function(b){b.name="basemap:"+b.name;z.showError(b)}):Promise.resolve(p)};n.setGraphic=function(p,g){return p&&g?v.getGraphic(p).then(function(e){g.graphics.add(e);return g.goTo(e)}):Promise.resolve()};n.goToMarker=function(p,g){var e=this;return new Promise(function(b){return h.__awaiter(e,void 0,void 0,function(){var a,c,d;return h.__generator(this,function(f){switch(f.label){case 0:if(p&&g)return[3,1];
b(!0);return[3,4];case 1:return[4,v.parseMarker(p)];case 2:return a=f.sent(),g.graphics.add(a),g.popup.open({features:[a]}),[4,g.goTo(a)];case 3:f.sent(),c=(new URL(document.location.href)).searchParams,d=null===c||void 0===c?void 0:c.get("level"),c&&!d&&(g.zoom+=3),b(!0),f.label=4;case 4:return[2]}})})})};n.findQuery=function(p,g){return p&&g?(new Promise(function(e,b){u(["esri/widgets/Search/SearchViewModel"],e,b)})).then(h.__importStar).then(function(e){var b=new e.default({view:g});return new Promise(function(a){r.whenFalseOnce(g,
"updating",function(){return h.__awaiter(this,void 0,void 0,function(){var c;return h.__generator(this,function(d){switch(d.label){case 0:return[4,b.search(p)];case 1:return c=d.sent(),r.whenFalseOnce(g,"popup.visible",function(){return b.destroy()}),a(c),[2]}})})})})}):Promise.resolve()}})},"app/utils/mapUtils/addToMap":function(){define("require exports tslib esri/layers/MapImageLayer esri/Basemap ./errorUtils esri/layers/Layer ../../utils/LayerUtil ../../utils/project ../../utils/layerUtils ../../utils/appUtils esri/layers/support/arcgisLayerUrl ../../utils/topic esri/core/Collection esri/portal/PortalItem esri/core/urlUtils esri/geometry/projection esri/support/basemapUtils esri/geometry/support/spatialReferenceUtils esri/geometry/SpatialReference esri/core/reactiveUtils".split(" "),
function(u,n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A){function x(va){return!!/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i.test(va)}function y(va){va=va.trim();var ra=x(va);va=a.parseUrl(va);return!ra||"https"===(null===va||void 0===va?void 0:va.protocol)}function B(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha,ya;return h.__generator(this,function(qa){switch(qa.label){case 0:return qa.trys.push([0,
8,,9]),[4,C(va,ra)];case 1:return(Ba=qa.sent())?null!==Ba&&void 0!==Ba&&Ba.loadAll?[4,Ba.loadAll()]:[3,3]:[3,6];case 2:return Ha=qa.sent(),[3,5];case 3:return[4,Ba.load()];case 4:Ha=qa.sent(),qa.label=5;case 5:return Ha,[2,Ba];case 6:return[2,Promise.reject(!1)];case 7:return[3,9];case 8:return ya=qa.sent(),z.showError(ya),[2,Promise.reject(ya)];case 9:return[2]}})})}function C(va,ra){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(Ba){switch(Ba.label){case 0:return(null===
va||void 0===va?void 0:va.type)in{OGCFeatureServer:1,WFS:1}?[4,sa(va,ra)]:[3,2];case 1:return[2,Ba.sent()];case 2:return D(va)?[4,Ja(va)]:[3,4];case 3:return[2,Ba.sent()];case 4:return[4,p.default.fromPortalItem({portalItem:va})];case 5:return[2,Ba.sent()]}})})}function D(va){return a.includes((null===va||void 0===va?void 0:va.typeKeywords)||[],"Location Tracking Service")}function F(va,ra,Ba){var Ha,ya;Ba=Ba.config.urlParameters;var qa=(null===va||void 0===va?void 0:va.allSubLayers)||(null===va||
void 0===va?void 0:va.layers)||(null===va||void 0===va?void 0:va.sublayers);if(!(Ba&&va&&qa&&qa.length)||va.isTable)return va;var oa=(ra=ra.split("?layers\x3d")[1])&&-1<ra.indexOf("show:")&&ra.split(":")[1].split(",")||[],Aa=!Ba||(null===(Ha=Ba.layerIds)||void 0===Ha?0:Ha.length)&&1===(null===(ya=null===Ba||void 0===Ba?void 0:Ba.layers)||void 0===ya?void 0:ya.length)?Ba.layerIds:null;if(!(oa&&oa.length||(null===Aa||void 0===Aa?0:Aa.length)))return va;oa&&qa.forEach(function(Ka){return Ka.visible=
-1<oa.indexOf(Ka.layerId+"")||-1<oa.indexOf(Ka.id+"")});if(null===Aa||void 0===Aa?0:Aa.length)va.layers=new f.default(qa.filter(function(Ka){return-1===Aa.indexOf(Ka.layerId)}));return va}function E(va,ra,Ba){return h.__awaiter(this,void 0,void 0,function(){var Ha,ya,qa;return h.__generator(this,function(oa){switch(oa.label){case 0:return[4,va.load()];case 1:return oa.sent(),Ha=va&&va.portalItem||{},ya=va&&"group"===va.type&&!Ha.isFeatureCollection&&!D(Ha),qa=ra.hideTypes,va.type in qa&&(va.listMode=
"hide-children"),ya?Ba?[3,3]:[4,M(va,ra)]:[3,6];case 2:return oa.sent(),[3,5];case 3:return[4,J(va,ra)];case 4:oa.sent(),oa.label=5;case 5:return[3,8];case 6:return[4,K(va,ra)];case 7:oa.sent(),oa.label=8;case 8:return[2,va]}})})}function G(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha,ya,qa;return h.__generator(this,function(oa){switch(oa.label){case 0:return Ba=ra.mapView,Ha=Ba.map,ya=Ha.tables||new f.default,[4,la(va,!1,ra)];case 1:return qa=oa.sent(),ya.add(qa),Ba.map.tables=
ya,d.default.publish("table-added"),[2,Promise.resolve(!0)]}})})}function O(va){var ra=[];null===va||void 0===va?void 0:va.forEach(function(Ba){var Ha,ya=Ba&&Ba.portalItem||{};ya="group"===(null===Ba||void 0===Ba?void 0:Ba.type)&&(null===(Ha=null===Ba||void 0===Ba?void 0:Ba.tables)||void 0===Ha?void 0:Ha.length)&&!ya.isFeatureCollection;ra=ra.concat(ya?((null===Ba||void 0===Ba?void 0:Ba.layers.items)||[]).concat((null===Ba||void 0===Ba?void 0:Ba.tables.items)||[]):[Ba])});return ra||[]}function H(va){var ra,
Ba=[];Ba=va&&va.portalItem||{};Ba="group"===(null===va||void 0===va?void 0:va.type)&&(null===(ra=null===va||void 0===va?void 0:va.tables)||void 0===ra?0:ra.length)&&!Ba.isFeatureCollection?null===va||void 0===va?void 0:va.tables.items.slice():[];va.tables=null;return Ba||[]}function K(va,ra){var Ba;return h.__awaiter(this,void 0,void 0,function(){var Ha,ya,qa,oa,Aa,Ka,Wa,Pa;return h.__generator(this,function(Ta){switch(Ta.label){case 0:Ha=ra.mapView,ya=Ha.map,qa=va.type,Ta.label=1;case 1:return Ta.trys.push([1,
10,,11]),[4,Q(va)];case 2:Ta.sent();b.checkPopup(va);if(!va.isTable)return[3,3];P(va,ya);return[3,9];case 3:if("imagery-tile"!==qa&&"imagery"!==qa&&"web-tile"!==qa&&!b.isSameSpatialReference(va,null===Ha||void 0===Ha?void 0:Ha.spatialReference))return[3,4];ya.layers.add(va);return[3,9];case 4:return!b.supportsExportMap(va)||b.isTilesOnly(va)?[3,6]:[4,L(va,ya)];case 5:return Ta.sent(),[3,9];case 6:oa=ya.basemap;Aa=null===oa||void 0===oa?void 0:oa.baseLayers;Ka=null===oa||void 0===oa?void 0:oa.referenceLayers;
Wa=null===(Ba=ya.allLayers)||void 0===Ba?void 0:Ba.filter(function(eb){return!(null===Aa||void 0===Aa?0:Aa.includes(eb))&&!Ka.includes(eb)});if(null===Wa||void 0===Wa||!Wa.length)return[3,7];z.showError({name:"basemap:spatial-reference-incompatible"},va);return[2,Promise.reject({error:{name:"basemap:spatial-reference-incompatible"},item:va})];case 7:return[4,R(va,ra)];case 8:Ta.sent(),Ta.label=9;case 9:return[2,va];case 10:return Pa=Ta.sent(),[2,Promise.reject(Pa)];case 11:return[2]}})})}function P(va,
ra){var Ba=ra.tables||new f.default;Ba.add(va);ra.tables=Ba}function L(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha;return h.__generator(this,function(ya){switch(ya.label){case 0:if("map-image"!==(null===va||void 0===va?void 0:va.type))return[3,1];Ha=va;return[3,3];case 1:return[4,S(va)];case 2:Ha=ya.sent(),ya.label=3;case 3:return Ba=Ha,ra.layers.add(Ba),[2,Ba]}})})}function M(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha,ya,qa,oa,Aa,Ka,Wa,Pa;return h.__generator(this,
function(Ta){switch(Ta.label){case 0:return Ba=ra.mapView,Ha=ra.config,ya=Ha.urlParameters,qa=Ba.map,oa=va.layers,[4,va.loadAll()];case 1:Ta.sent();Aa=H(va);Ka=Aa.filter(function(eb){return U(eb,ya)});qa.tables.addMany(Ka);Wa=oa.filter(function(eb){return!eb.isTable&&U(eb,ya)});if(!(1<Wa.length))return[3,2];Wa.forEach(function(eb){return b.checkPopup(eb)});va.layers=Wa;qa.layers.add(va);return[3,4];case 2:if(!Wa.length)return[3,4];Pa=Wa.shift();return[4,Pa.load()];case 3:Ta.sent(),b.checkPopup(Pa),
qa.layers.add(Pa),Ta.label=4;case 4:return[2]}})})}function J(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha,ya,qa,oa,Aa,Ka,Wa;return h.__generator(this,function(Pa){switch(Pa.label){case 0:return Ba=ra.mapView,Ha=ra.config,ya=Ha.urlParameters,qa=Ba.map,oa=va.layers,[4,va.loadAll()];case 1:return Pa.sent(),Aa=H(va),Ka=Aa.filter(function(Ta){return U(Ta,ya)}),qa.tables.addMany(Ka),[4,Promise.all(oa.toArray().map(function(Ta){return Ta.load()}))];case 2:return Wa=Pa.sent(),Wa.filter(function(Ta){return U(Ta,
ya)}).forEach(function(Ta){b.checkPopup(Ta);qa.layers.add(V(va,Ta))}),[2]}})})}function R(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha;return h.__generator(this,function(ya){switch(ya.label){case 0:return"not-loaded"!==va.loadStatus?[3,2]:[4,va.load()];case 1:ya.sent(),ya.label=2;case 2:return Ba=ra.mapView,[4,da(va,Ba)];case 3:return Ha=ya.sent(),[2,X(Ha,ra)]}})})}function X(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha,ya,qa,oa,Aa;return h.__generator(this,
function(Ka){switch(Ka.label){case 0:Ba=ra.mapView,Ha=ra.map,ya=Ha.webMap,qa=ya.basemap,Ka.label=1;case 1:return Ka.trys.push([1,4,,5]),oa=q.findSpatialReference(Ba,va).spatialReference,!oa||t.equals(Ba.spatialReference,oa)||k.isLoaded()||k.canProjectWithoutEngine(Ba.spatialReference,oa)?[3,3]:[4,k.load()];case 2:Ka.sent(),Ka.label=3;case 3:return ya.basemap=va,oa&&!t.equals(Ba.spatialReference,oa)&&(Ba.spatialReference=oa),d.default.publish("basemaplayer-added"),ra.mapView=Ba,[2,va];case 4:return Aa=
Ka.sent(),z.showError(Aa,qa),[3,5];case 5:return[2]}})})}function U(va,ra){var Ba,Ha,ya;if(!va||!ra||"group"===(null===va||void 0===va?void 0:va.type))return!0;var qa=!ra||(null===(Ba=ra.layerIds)||void 0===Ba?0:Ba.length)&&1===(null===(Ha=null===ra||void 0===ra?void 0:ra.layers)||void 0===Ha?void 0:Ha.length)?ra.layerIds:null;return-1<(ra.layers||[]).indexOf(null===(ya=va.portalItem)||void 0===ya?void 0:ya.id)&&(null===qa||void 0===qa?0:qa.length)&&-1===qa.indexOf(va.layerId)?!1:!0}function V(va,
ra){ra.title=va.title+" - "+ra.title;return ra}function Q(va){return h.__awaiter(this,void 0,void 0,function(){var ra;return h.__generator(this,function(Ba){switch(Ba.label){case 0:return(ra=b.isDynamicLayer(va))&&va.loadAll?[4,va.loadAll()]:[3,2];case 1:return Ba.sent(),[2,va];case 2:return[2,Promise.resolve(va)]}})})}function Y(va,ra){var Ba;ra=ra.map;var Ha=ra.basemap,ya=null===Ha||void 0===Ha?void 0:Ha.baseLayers,qa=null===Ha||void 0===Ha?void 0:Ha.referenceLayers;return(ra=null===(Ba=ra.allLayers)||
void 0===Ba?void 0:Ba.filter(function(oa){return!(null===ya||void 0===ya?0:ya.includes(oa))&&!qa.includes(oa)}))&&ra.length?ra.every(function(oa){return(null===oa||void 0===oa?0:oa.tileInfo)&&"imagery-tile"!==(null===oa||void 0===oa?void 0:oa.type)&&"imagery"!==(null===oa||void 0===oa?void 0:oa.type)?b.isSameSpatialReference(va,null===oa||void 0===oa?void 0:oa.spatialReference):!0}):!0}function fa(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha,ya,qa,oa,Aa,Ka,Wa;return h.__generator(this,
function(Pa){switch(Pa.label){case 0:return Ba=ra.map,Ha=ra.mapView,ya=Ba.webMap,qa=ya.basemap,oa=qa.baseLayers,Aa=(va||[]).every(function(Ta){return oa.includes(Ta)}),Ka=va.some(function(Ta){return Ta.isTable}),Wa=va.some(function(Ta){return!Ta.isTable}),Ha.updating?[4,A.whenOnce(function(){return!Ha.updating})]:[3,2];case 1:Pa.sent(),Pa.label=2;case 2:return Ka&&d.default.publish("table-added"),Wa&&!Aa&&d.default.publish("layer-added"),[2]}})})}function da(va,ra){return h.__awaiter(this,void 0,
void 0,function(){var Ba,Ha,ya,qa;return h.__generator(this,function(oa){switch(oa.label){case 0:var Aa=va.title;var Ka=va.type;var Wa=va.supportedSpatialReferences,Pa=va.spatialReferences,Ta=ra.spatialReference;"wmts"===Ka&&(null===Wa||void 0===Wa?0:Wa.length)?Ka=Wa[0]:"wms"===Ka&&(null===Pa||void 0===Pa?0:Pa.length)?(Ka=ca(Ta,Pa),va.spatialReference=Ka):Ka=va.spatialReference;Ba={baseLayers:[va],title:Aa,spatialReference:Ka};oa.label=1;case 1:return oa.trys.push([1,6,,7]),Ha=new v.default(Ba),null!==
Ha&&void 0!==Ha&&Ha.loadAll?[4,Ha.loadAll()]:[3,3];case 2:return ya=oa.sent(),[3,5];case 3:return[4,Ha.load()];case 4:ya=oa.sent(),oa.label=5;case 5:return ya,[2,Ha];case 6:return qa=oa.sent(),z.showError(qa,va),[3,7];case 7:return[2]}})})}function ca(va,ra){return ra.find(function(Ba){return t.equals(va,new w.default({wkid:Ba}))})||(null===ra||void 0===ra?0:ra.length)?ra[0]:va}function la(va,ra,Ba){return h.__awaiter(this,void 0,void 0,function(){var Ha,ya,qa;return h.__generator(this,function(oa){switch(oa.label){case 0:return oa.trys.push([0,
6,,7]),ra?[3,2]:[4,B(va,Ba)];case 1:return ya=oa.sent(),[3,4];case 2:return[4,ha(va)];case 3:ya=oa.sent(),oa.label=4;case 4:return Ha=ya,[4,Ha.load()];case 5:return oa.sent(),[2,Ha];case 6:return(qa=oa.sent())&&z.showError(qa,va),[3,7];case 7:return[2]}})})}function ha(va){return h.__awaiter(this,void 0,void 0,function(){var ra,Ba,Ha,ya;return h.__generator(this,function(qa){switch(qa.label){case 0:return ra={portal:{url:"https://www.arcgis.com"},id:va.id},Ba=new l.default(ra),[4,Ba.load()];case 1:return qa.sent(),
[4,B(Ba)];case 2:return Ha=qa.sent(),Ha.portalItem=null,"group"===Ha.type&&(ya=(Ha.allLayers||[]).concat(Ha.allTables||[]),(ya||[]).forEach(function(oa){return oa.portalItem=null})),[2,Ha]}})})}function S(va){return h.__awaiter(this,void 0,void 0,function(){var ra,Ba;return h.__generator(this,function(Ha){switch(Ha.label){case 0:return Ha.trys.push([0,2,,3]),ra=new r.default({url:va.url}),[4,ra.load()];case 1:return Ha.sent(),[2,ra];case 2:return Ba=Ha.sent(),z.showError(Ba,va),[3,3];case 3:return[2]}})})}
function ea(va){var ra,Ba;return h.__awaiter(this,void 0,void 0,function(){var Ha,ya,qa,oa,Aa;return h.__generator(this,function(Ka){switch(Ka.label){case 0:return Ka.trys.push([0,6,,7]),Ha=ma(va),[4,g.fromUrl(Ha.path)];case 1:ya=Ka.sent();if(null===(ra=Ha.query)||void 0===ra?0:ra.where)ya.definitionExpression=null===(Ba=Ha.query)||void 0===Ba?void 0:Ba.where;return null!==ya&&void 0!==ya&&ya.loadAll?[4,ya.loadAll()]:[3,3];case 2:return qa=Ka.sent(),[3,5];case 3:return[4,ya.load()];case 4:qa=Ka.sent(),
Ka.label=5;case 5:return qa,[2,ya];case 6:return oa=Ka.sent(),Aa=(null===oa||void 0===oa?void 0:oa.details)||{},Aa.url=va,oa.details=Aa,z.showError(oa),[2,Promise.reject(oa)];case 7:return[2]}})})}function ma(va){var ra=m.urlToObject(va),Ba=null===va||void 0===va?void 0:va.indexOf("/query?");ra&&-1<Ba&&(ra.path=va.substring(0,Ba));return ra||{path:va}}function sa(va,ra){switch(va.type){case "OGCFeatureServer":var Ba=ja(va);break;case "WFS":Ba=wa(va,ra);break;default:console.log("Unknown OGC Layer Type")}return Ba}
function ja(va){var ra=this;return new Promise(function(Ba,Ha){return h.__awaiter(ra,void 0,void 0,function(){var ya,qa,oa;return h.__generator(this,function(Aa){switch(Aa.label){case 0:return[4,(new Promise(function(Ka,Wa){u(["../../widgets/panels/MapMaker/itembrowsers/OGCLayerModal"],Ka,Wa)})).then(h.__importStar)];case 1:return ya=Aa.sent(),qa=(null===va||void 0===va?0:va.loaded)?va:new l.default(va),[4,qa.load()];case 2:return Aa.sent(),oa=new ya.default({item:qa}),oa.on("close",function(Ka){return Ba(Ka)}),
[2]}})})})}function wa(va,ra){var Ba=this;return new Promise(function(Ha,ya){return h.__awaiter(Ba,void 0,void 0,function(){var qa,oa,Aa;return h.__generator(this,function(Ka){switch(Ka.label){case 0:return[4,(new Promise(function(Wa,Pa){u(["../../widgets/panels/MapMaker/itembrowsers/OGCWFSLayerModal"],Wa,Pa)})).then(h.__importStar)];case 1:return qa=Ka.sent(),oa=(null===va||void 0===va?0:va.loaded)?va:new l.default(va),[4,oa.load()];case 2:return Ka.sent(),Aa=new qa.default({item:oa,state:ra}),Aa.on("close",
function(Wa){return Ha(Wa)}),[2]}})})})}function Ja(va){var ra=this;return new Promise(function(Ba){return h.__awaiter(ra,void 0,void 0,function(){var Ha,ya;return h.__generator(this,function(qa){switch(qa.label){case 0:return[4,(new Promise(function(oa,Aa){u(["../../utils/trackViewLayer"],oa,Aa)})).then(h.__importStar)];case 1:return Ha=qa.sent(),[4,Ha.toTrackViewLayer(va)];case 2:return ya=qa.sent(),Ba(ya),[2]}})})})}Object.defineProperty(n,"__esModule",{value:!0});n.getExtent=n.toTrackViewLayer=
n.toWFSLayer=n.toOGCAPILayer=n.toOGCLayer=n.layerUrlToObject=n.toLayerFromUrl=n.toMapImageLayer=n.toLayerFromAGOL=n.toLayer=n.toBasemap=n.isLayerCompatible=n.addAsBasemap=n.addLayerAsBasemap=n.addLayerToBasemap=n.addAsMapImageLayer=n.addLayersAsBasemap=n.addTables=n.addLayers=n.filterSublayers=n.getLayerFromId=n.getLayerFromUrl=n.isSecureUrl=n.validURL=n.canAddPortalItemAsBasemap=void 0;r=h.__importDefault(r);v=h.__importDefault(v);p=h.__importDefault(p);g=h.__importStar(g);b=h.__importStar(b);a=
h.__importStar(a);c=h.__importStar(c);d=h.__importDefault(d);f=h.__importDefault(f);l=h.__importDefault(l);m=h.__importStar(m);k=h.__importStar(k);q=h.__importStar(q);t=h.__importStar(t);w=h.__importDefault(w);A=h.__importStar(A);n.canAddPortalItemAsBasemap=function(va){va=va.type;return(null===va||void 0===va?void 0:va.toLowerCase())in{"image service":!0,"imagery-tile":!0,"map service":!0,"vector tile service":!0,wms:!0,wmts:!0}||!1};n.validURL=x;n.isSecureUrl=y;n.getLayerFromUrl=function(va,ra){return h.__awaiter(this,
void 0,void 0,function(){var Ba,Ha;return h.__generator(this,function(ya){switch(ya.label){case 0:return ya.trys.push([0,2,,3]),ya=va.split("?layers\x3d")[0],!y(va)&&c.isHostedAgolService(ya)&&(ya=ya.replace("http:","https:")),[4,ea(ya)];case 1:return Ba=ya.sent(),F(Ba,va,ra),[2,Ba];case 2:return Ha=ya.sent(),z.showError(Ha),[2,Promise.reject(Ha)];case 3:return[2]}})})};n.getLayerFromId=B;n.filterSublayers=F;n.addLayers=function(va,ra,Ba){return h.__awaiter(this,void 0,void 0,function(){var Ha,ya,
qa,oa,Aa,Ka,Wa;return h.__generator(this,function(Pa){switch(Pa.label){case 0:return Ha=null===ra||void 0===ra?void 0:ra.config,ya=null===Ha||void 0===Ha?void 0:Ha.urlParameters,qa=va.filter(function(Ta){return U(Ta,ya)}),oa=ra.mapView,Aa=oa.map,Ka=[],Wa=[Aa.layers.on("change",function(Ta){return Ka=Ka.concat(Ta.added||[])}),Aa.tables.on("change",function(Ta){return Ka=Ka.concat(Ta.added||[])})],[4,Promise.all(qa.map(function(Ta){return E(Ta,ra,Ba)}))];case 1:return Pa.sent(),Wa.forEach(function(Ta){return Ta.remove()}),
fa(Ka,ra),[2,Ka]}})})};n.addTables=function(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha;return h.__generator(this,function(ya){switch(ya.label){case 0:return Ba=O(va&&va.length?va:[]),Ha=Ba.map(function(qa){return G(qa,ra)}),[4,Promise.all(Ha)];case 1:return[2,ya.sent()]}})})};n.addLayersAsBasemap=function(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba;return h.__generator(this,function(Ha){switch(Ha.label){case 0:return Ba=va.map(function(ya){return R(ya,ra)}),
[4,Promise.all(Ba)];case 1:return[2,Ha.sent()]}})})};n.addAsMapImageLayer=L;n.addLayerToBasemap=function(va,ra){return h.__awaiter(this,void 0,void 0,function(){var Ba,Ha,ya,qa,oa,Aa,Ka;return h.__generator(this,function(Wa){switch(Wa.label){case 0:Ba=ra.mapView;Ha=Ba.map;ya=Ha.basemap;qa=ya.baseLayers;oa=va.type;if("map-image"!==oa&&"imagery-tile"!==oa&&"imagery"!==oa&&!b.isSameSpatialReference(va,Ba.spatialReference))return[3,1];qa.add(va);return[2,Promise.resolve(va)];case 1:return[4,Y(va,Ba)];
case 2:return Ka=(Aa=Wa.sent())?"basemap:spatial-reference-incompatible":"basemap:spatial-reference-incompatible-layers",z.showError({name:Ka},va),[2,Promise.reject({error:{name:Ka}})]}})})};n.addLayerAsBasemap=R;n.addAsBasemap=X;n.isLayerCompatible=Y;n.toBasemap=da;n.toLayer=la;n.toLayerFromAGOL=ha;n.toMapImageLayer=S;n.toLayerFromUrl=ea;n.layerUrlToObject=ma;n.toOGCLayer=sa;n.toOGCAPILayer=ja;n.toWFSLayer=wa;n.toTrackViewLayer=Ja;n.getExtent=function(va,ra){var Ba=ra.mapView;return e.getExtent(va,
Ba,(null===va||void 0===va?0:va.portalItem)?!1:!0).then(function(Ha){var ya=Ba.extent,qa=Ha&&Ha.intersection(ya),oa=Ha&&Ha.intersects(ya);if(oa){qa=qa.get("width")*qa.get("height");var Aa=ya.get("width")*ya.get("height");qa<Aa/200?oa=!1:Ha.get("width")*Ha.get("height")<Aa/1E3&&(oa=!1)}return oa?ya:Ha})}})},"app/utils/LayerUtil":function(){define("require exports tslib esri/layers/Layer esri/request esri/layers/support/arcgisLayerUrl".split(" "),function(u,n,h,r,v,z){function p(y){return h.__awaiter(this,
void 0,void 0,function(){var B;return h.__generator(this,function(C){switch(C.label){case 0:return C.trys.push([0,2,,4]),[4,r.default.fromArcGISServerUrl(y)];case 1:return B=C.sent(),[3,4];case 2:return C.sent(),[4,e(null===y||void 0===y?void 0:y.url)];case 3:return B=C.sent(),[3,4];case 4:return[2,B]}})})}function g(y,B,C){return h.__awaiter(this,void 0,void 0,function(){var D;return h.__generator(this,function(F){try{return D=b(y,B).then(a).then(function(E){var G=h.__assign(h.__assign(h.__assign({},
E.properties),{url:E.url||B}),C);return Promise.resolve(new E.constructor(G))}),[2,D]}catch(E){return[2,Promise.reject(E)]}})})}function e(y,B,C){return h.__awaiter(this,void 0,void 0,function(){var D,F,E;return h.__generator(this,function(G){switch(G.label){case 0:return(F="csv"===B)?[3,2]:[4,q(y)];case 1:F=G.sent(),G.label=2;case 2:if(!F)return[3,3];D="csv";return[3,10];case 3:(G="wfs"===B)||(G=y.toLowerCase().endsWith("/wfsserver")||-1<y.toLowerCase().lastIndexOf("/wfs"));if(!G)return[3,4];D="wfs";
return[3,10];case 4:(G="wms"===B)||(G=y.toLowerCase().endsWith("/wmsserver")||-1<y.toLowerCase().lastIndexOf("/wms")||y.toLowerCase().endsWith("/ows"));if(!G)return[3,5];D="wms";return[3,10];case 5:if(!("wmts"===B||-1<y.toLowerCase().lastIndexOf("/wmts")))return[3,6];D="wmts";return[3,10];case 6:(G="geojson"===B)||(G=t(y,"geojson")||t(y,"json"));if(!G)return[3,7];D="geojson";return[3,10];case 7:return(E="kml"===B)?[3,9]:[4,k(y)];case 8:E=G.sent(),G.label=9;case 9:if(E)D="kml";else{var O;(O="georss"===
B)||(O=t(y,"rss")||t(y,"xml")||-1<y.toLowerCase().lastIndexOf("/rss"));O&&(D="georss")}G.label=10;case 10:return[2,g(D,y,C)]}})})}function b(y,B){switch(y){case "csv":return Promise.resolve({className:"CSVLayer"});case "wms":return c(B);case "wfs":return f(B);case "wmts":return d(B);case "geojson":return Promise.resolve({className:"GeoJSONLayer"});case "kml":return Promise.resolve({className:"KMLLayer"});case "georss":return Promise.resolve({className:"GeoRSSLayer"});default:return Promise.reject({error:{name:"url:unknown-item-type"}})}}
function a(y){return Promise.all([(new Promise(function(B,C){u(["esri/layers/"+y.className],B,C)})).then(h.__importStar)]).then(function(B){var C;return{constructor:null===(C=B[0])||void 0===C?void 0:C.default,properties:y.properties||{},url:y.url}})}function c(y){return h.__awaiter(this,void 0,void 0,function(){var B;return h.__generator(this,function(C){B={className:"WMSLayer"};return[2,B]})})}function d(y){return h.__awaiter(this,void 0,void 0,function(){var B;return h.__generator(this,function(C){B=
{className:"WMTSLayer"};return[2,B]})})}function f(y){return h.__awaiter(this,void 0,void 0,function(){var B,C;return h.__generator(this,function(D){switch(D.label){case 0:return B={className:"WFSLayer"},[4,l(y)];case 1:return(C=D.sent())?[2,C]:[2,B]}})})}function l(y){return h.__awaiter(this,void 0,void 0,function(){var B,C,D,F,E,G;return h.__generator(this,function(O){switch(O.label){case 0:B=/\/arcgis\/services\//gi;C=y.replace(B,"/arcgis/rest/services/");D=z.isArcGISUrl(C);if(!D)return[3,5];F=
z.parse(C);E=F.serverType;G=F.url;O.label=1;case 1:return O.trys.push([1,3,,4]),[4,x(G.path)];case 2:return O.sent(),[2,Promise.resolve({className:m(E.toLowerCase()),url:G.path})];case 3:return O.sent(),[2,Promise.resolve(null)];case 4:return[3,6];case 5:return[2,Promise.resolve(null)];case 6:return[2]}})})}function m(y){switch(y){case "imageserver":return"ImageryLayer";case "mapserver":return"MapImageLayer"}}function k(y){return h.__awaiter(this,void 0,void 0,function(){var B;return h.__generator(this,
function(C){switch(C.label){case 0:return t(y,"kml")||t(y,"kmz")?[2,!0]:[3,1];case 1:if(!y.endsWith("/data")||!w(y))return[3,6];C.label=2;case 2:return C.trys.push([2,4,,5]),[4,A(y)];case 3:return B=C.sent(),[2,"KML"===B.type];case 4:return C.sent(),[2,!1];case 5:return[3,7];case 6:return[2,!1];case 7:return[2]}})})}function q(y){return h.__awaiter(this,void 0,void 0,function(){var B;return h.__generator(this,function(C){switch(C.label){case 0:return-1<(null===y||void 0===y?void 0:y.indexOf("?format\x3dcsv"))?
[2,!0]:[3,1];case 1:return t(y,"csv")?[2,!0]:[3,2];case 2:if(!y.endsWith("/data")||!w(y))return[3,7];C.label=3;case 3:return C.trys.push([3,5,,6]),[4,A(y)];case 4:return B=C.sent(),[2,"CSV"===(null===B||void 0===B?void 0:B.type)];case 5:return C.sent(),[2,!1];case 6:return[3,8];case 7:return[2,!1];case 8:return[2]}})})}function t(y,B){return y.split(".").pop().split(/#|\?/)[0].toLowerCase()===B}function w(y){return/^(.*?)\b\/sharing\/rest\/content\/items\/[a-f\d]{32}\b/gi.test(y)}function A(y){return h.__awaiter(this,
void 0,void 0,function(){var B,C,D,F;return h.__generator(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),B=/^(.*?)\b\/sharing\/rest\/content\/items\/[a-f\d]{32}\b/gi,C=y.match(B)[0],[4,x(C)];case 1:return D=E.sent(),[2,D];case 2:return F=E.sent(),[2,Promise.reject(F)];case 3:return[2]}})})}function x(y){return h.__awaiter(this,void 0,void 0,function(){var B;return h.__generator(this,function(C){switch(C.label){case 0:return[4,v.default(y,{responseType:"json",query:{f:"json"}})];
case 1:return B=C.sent(),[2,B.data]}})})}Object.defineProperty(n,"__esModule",{value:!0});n.isSupported=n.parseServiceUrl=n.fromType=n.fromUrl=void 0;r=h.__importDefault(r);v=h.__importDefault(v);z=h.__importStar(z);n.fromUrl=function(y,B,C){return h.__awaiter(this,void 0,void 0,function(){var D,F,E,G,O,H,K,P;return h.__generator(this,function(L){switch(L.label){case 0:F=z.isArcGISUrl(y),L.label=1;case 1:return L.trys.push([1,7,,8]),!B||F&&"wmts"!==B&&"wms"!==B?[4,p({url:y,properties:h.__assign({},
C)})]:[3,3];case 2:return E=L.sent(),[3,5];case 3:return[4,e(y,B,C)];case 4:E=L.sent(),L.label=5;case 5:return D=E,[4,D.load()];case 6:return L.sent(),G=this.isSupported(D),G.isSupported?[2,D]:[2,Promise.reject(G.error)];case 7:return O=L.sent(),H=y,K=F?z.parse(H):{},K.type=(null===D||void 0===D?void 0:D.title)||B||"",K.url=H,P=h.__assign(h.__assign({},O.details||{}),K),[2,Promise.reject(h.__assign(h.__assign({},O),{details:P}))];case 8:return[2]}})})};n.fromType=g;n.parseServiceUrl=function(y){var B=
y.match(/^(.*?)\b\/arcgis\/rest\/services\//gi);return B&&B.length?B[0]:y};n.isSupported=function(y){var B=y.url,C=y.type,D=B&&z.isArcGISUrl(B)?z.parse(B):{};D.type=y.title;D.url=B;return{isSupported:C in{"imagery-tile":1,imagery:1,tile:1,feature:1,"vector-tile":1,group:1,csv:1,kml:1,"geo-rss":1,geojson:1,"map-image":1,wms:1,wmts:1}?!0:!1,error:{name:"feature-layer-source:unsupported-type",details:h.__assign({},D)}}}})},"app/widgets/panels/MapMaker/FullScreen":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget ../../../utils/topic".split(" "),
function(u,n,h,r,v,z,p){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);p=h.__importDefault(p);u=function(g){function e(b){b=g.call(this,b)||this;b.isActive=!1;return b}h.__extends(e,g);e.prototype.postInitialize=function(){var b=this;this.own(p.default.subscribe("toggle-fullscreen",function(){return b.isActive=!b.isActive}))};e.prototype.setFocus=function(b){var a=this.container,c=b||a.querySelector("#show-interface");setTimeout(function(){return null===c||void 0===c?void 0:
c.setFocus()},50)};e.prototype.render=function(){return v.tsx("div",{class:"esri-widget--button esri-widget esri-interactive esri-hide-interface"},v.tsx("calcite-tooltip-manager",null,v.tsx("calcite-action",{id:"show-interface",onclick:this.onClick,bind:this,icon:this.isActive?"full-screen-exit":"monitor",class:"calcite-theme-light",afterCreate:this.setFocus,title:this.isActive?this.messagesActions.showInterface:this.messagesActions.hideInterface})),v.tsx("calcite-tooltip",{class:"calcite-theme-light",
placement:"leading-start","reference-element":"show-interface"},this.isActive?this.messagesActions.showInterface:this.messagesActions.hideInterface))};e.prototype.onClick=function(b){p.default.publish("toggle-fullscreen")};h.__decorate([r.property(),v.messageBundle("mapviewer/actions")],e.prototype,"messagesActions",void 0);h.__decorate([r.property()],e.prototype,"isActive",void 0);return e=h.__decorate([r.subclass("")],e)}(z.default);n.default=u})},"app/utils/deepMerge":function(){define(["require",
"exports","tslib","esri/core/lang"],function(u,n,h,r){function v(p,g,e){for(var b=0;b<p.length;b++){var a=p[b];if(null==e)return;if(!(a in e))if(g)e[a]={};else return;e=e[a]}return e}function z(p,g,e){return g?Object.keys(g).reduce(function(b,a){var c=b[a],d=g[a];if(c===d)return b;if(void 0===c)return b[a]=r.clone(d),b;if(Array.isArray(d)||Array.isArray(b))c=c?Array.isArray(c)?b[a]=c.concat():b[a]=[c]:b[a]=[],d&&(Array.isArray(d)||(d=[d]),e?d.forEach(function(f){-1===c.indexOf(f)&&c.push(f)}):b[a]=
d.concat());else if(d&&"object"===typeof d)b[a]=z(c,d,e);else if(!b.hasOwnProperty(a)||g.hasOwnProperty(a))b[a]=d;return b},p||{}):p}Object.defineProperty(n,"__esModule",{value:!0});n.setDeepValue=n.getDeepValue=n.deepMerge=void 0;r=h.__importStar(r);n.deepMerge=function(p,g,e){void 0===e&&(e=!1);return z(p,g,e)};n.getDeepValue=function(p,g){if(null!=g)return g[p]||v(p.split("."),!1,g)};n.setDeepValue=function(p,g,e){var b=p.split(".");p=b.pop();(e=v(b,!0,e))&&p&&(e[p]=g)}})},"resize-observer-polyfill/dist/ResizeObserver":function(){(function(u,
n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define(n):u.ResizeObserver=n()})(this,function(){function u(w,A){function x(){C&&(C=!1,w());D&&B()}function y(){z(x)}function B(){var E=Date.now();if(C){if(2>E-F)return;D=!0}else C=!0,D=!1,setTimeout(y,A);F=E}var C=!1,D=!1,F=0;return B}function n(w){for(var A=[],x=1;x<arguments.length;x++)A[x-1]=arguments[x];return A.reduce(function(y,B){return y+(parseFloat(w["border-"+B+"-width"])||
0)},0)}var h=function(){function w(A,x){var y=-1;A.some(function(B,C){return B[0]===x?(y=C,!0):!1});return y}return"undefined"!==typeof Map?Map:function(){function A(){this.__entries__=[]}Object.defineProperty(A.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0});A.prototype.get=function(x){x=w(this.__entries__,x);return(x=this.__entries__[x])&&x[1]};A.prototype.set=function(x,y){var B=w(this.__entries__,x);~B?this.__entries__[B][1]=y:this.__entries__.push([x,
y])};A.prototype.delete=function(x){var y=this.__entries__;x=w(y,x);~x&&y.splice(x,1)};A.prototype.has=function(x){return!!~w(this.__entries__,x)};A.prototype.clear=function(){this.__entries__.splice(0)};A.prototype.forEach=function(x,y){void 0===y&&(y=null);for(var B=0,C=this.__entries__;B<C.length;B++){var D=C[B];x.call(y,D[1],D[0])}};return A}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,v="undefined"!==typeof global&&global.Math===Math?global:"undefined"!==
typeof self&&self.Math===Math?self:"undefined"!==typeof window&&Math===Math?window:Function("return this")(),z=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(v):function(w){return setTimeout(function(){return w(Date.now())},1E3/60)}}(),p="top right bottom left width height size weight".split(" "),g="undefined"!==typeof MutationObserver,e=function(){function w(){this.mutationEventsAdded_=this.connected_=!1;this.mutationsObserver_=null;this.observers_=[];this.onTransitionEnd_=
this.onTransitionEnd_.bind(this);this.refresh=u(this.refresh.bind(this),20)}w.prototype.addObserver=function(A){~this.observers_.indexOf(A)||this.observers_.push(A);this.connected_||this.connect_()};w.prototype.removeObserver=function(A){var x=this.observers_;A=x.indexOf(A);~A&&x.splice(A,1);!x.length&&this.connected_&&this.disconnect_()};w.prototype.refresh=function(){this.updateObservers_()&&this.refresh()};w.prototype.updateObservers_=function(){var A=this.observers_.filter(function(x){return x.gatherActive(),
x.hasActive()});A.forEach(function(x){return x.broadcastActive()});return 0<A.length};w.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),g?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=
!0),this.connected_=!0)};w.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.connected_=this.mutationEventsAdded_=!1)};w.prototype.onTransitionEnd_=function(A){A=A.propertyName;var x=void 0===
A?"":A;p.some(function(y){return!!~x.indexOf(y)})&&this.refresh()};w.getInstance=function(){this.instance_||(this.instance_=new w);return this.instance_};w.instance_=null;return w}(),b=function(w,A){for(var x=0,y=Object.keys(A);x<y.length;x++){var B=y[x];Object.defineProperty(w,B,{value:A[B],enumerable:!1,writable:!1,configurable:!0})}return w},a=function(w){return w&&w.ownerDocument&&w.ownerDocument.defaultView||v},c={x:0,y:0,width:0,height:0},d=function(){return"undefined"!==typeof SVGGraphicsElement?
function(w){return w instanceof a(w).SVGGraphicsElement}:function(w){return w instanceof a(w).SVGElement&&"function"===typeof w.getBBox}}(),f=function(){function w(A){this.broadcastHeight=this.broadcastWidth=0;this.contentRect_={x:0,y:0,width:0,height:0};this.target=A}w.prototype.isActive=function(){var A=this.target;if(r)if(d(A)){var x=A.getBBox();x={x:0,y:0,width:x.width,height:x.height}}else{var y=A.clientWidth,B=A.clientHeight;if(y||B){var C=a(A).getComputedStyle(A);x={};for(var D=0,F=["top",
"right","bottom","left"];D<F.length;D++){var E=F[D];x[E]=parseFloat(C["padding-"+E])||0}var G=x.left+x.right;E=x.top+x.bottom;D=parseFloat(C.width)||0;F=parseFloat(C.height)||0;"border-box"===C.boxSizing&&(Math.round(D+G)!==y&&(D-=n(C,"left","right")+G),Math.round(F+E)!==B&&(F-=n(C,"top","bottom")+E));A!==a(A).document.documentElement&&(A=Math.round(D+G)-y,B=Math.round(F+E)-B,1!==Math.abs(A)&&(D-=A),1!==Math.abs(B)&&(F-=B));x={x:x.left,y:x.top,width:D,height:F}}else x=c}else x=c;this.contentRect_=
x;return x.width!==this.broadcastWidth||x.height!==this.broadcastHeight};w.prototype.broadcastRect=function(){var A=this.contentRect_;this.broadcastWidth=A.width;this.broadcastHeight=A.height;return A};return w}(),l=function(){return function(w,A){var x=A.x,y=A.y,B=A.width;A=A.height;var C=Object.create(("undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype);b(C,{x,y,width:B,height:A,top:y,right:x+B,bottom:A+y,left:x});b(this,{target:w,contentRect:C})}}(),m=function(){function w(A,
x,y){this.activeObservations_=[];this.observations_=new h;if("function"!==typeof A)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=A;this.controller_=x;this.callbackCtx_=y}w.prototype.observe=function(A){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(A instanceof a(A).Element))throw new TypeError('parameter 1 is not of type "Element".');var x=this.observations_;
x.has(A)||(x.set(A,new f(A)),this.controller_.addObserver(this),this.controller_.refresh())}};w.prototype.unobserve=function(A){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(A instanceof a(A).Element))throw new TypeError('parameter 1 is not of type "Element".');var x=this.observations_;x.has(A)&&(x.delete(A),x.size||this.controller_.removeObserver(this))}};w.prototype.disconnect=function(){this.clearActive();
this.observations_.clear();this.controller_.removeObserver(this)};w.prototype.gatherActive=function(){var A=this;this.clearActive();this.observations_.forEach(function(x){x.isActive()&&A.activeObservations_.push(x)})};w.prototype.broadcastActive=function(){if(this.hasActive()){var A=this.callbackCtx_,x=this.activeObservations_.map(function(y){return new l(y.target,y.broadcastRect())});this.callback_.call(A,x,A);this.clearActive()}};w.prototype.clearActive=function(){this.activeObservations_.splice(0)};
w.prototype.hasActive=function(){return 0<this.activeObservations_.length};return w}(),k="undefined"!==typeof WeakMap?new WeakMap:new h,q=function(){function w(A){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var x=e.getInstance();x=new m(A,x,this);k.set(this,x)}return w}();["observe","unobserve","disconnect"].forEach(function(w){q.prototype[w]=function(){var A;return(A=k.get(this))[w].apply(A,
arguments)}});var t="undefined"!==typeof v.ResizeObserver?v.ResizeObserver:q;return t})},"app/shortcuts/shortcuts":function(){define("require exports tslib ../utils/messageBundleLoader ../utils/topic ../utils/mapUtils/errorUtils hotkeys-js ../utils/project".split(" "),function(u,n,h,r,v,z,p,g){var e=this;Object.defineProperty(n,"__esModule",{value:!0});n.destroy=n.setupShortcuts=void 0;v=h.__importDefault(v);p=h.__importDefault(p);var b,a,c,d,f,l,m,k=!1,q,t="viewer",w=[],A=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?
"Option":"Alt";n.setupShortcuts=function(M,J){return h.__awaiter(e,void 0,void 0,function(){var R,X;return h.__generator(this,function(U){switch(U.label){case 0:return b=M,[4,r.fetchMessageBundles(["mapviewer/shortcuts","mapviewer/shortcutsMapView"])];case 1:return X=U.sent(),c=X[0],d=X[1],a=x(),t=J||"viewer",R=v.default.subscribe("mapView_changed",function(){R.remove();n.destroy();K();w.push(v.default.subscribe("layer-selected",function(Q){return l=null===Q||void 0===Q?void 0:Q.layer}));w.push(v.default.subscribe("layer-deselected",
function(){return l=null}));w.push(v.default.subscribe("shortcuts-show",function(){C()}));var V=[];a.forEach(function(Q){return V=V.concat(Q.command.split(","))});p.default(V.join(","),function(Q,Y){Q=q=B(Y.key);(null===f||void 0===f||!f.active)&&Q||(null===f||void 0===f?0:f.active)&&"help"===Q.name?(Q.execute(),q=null,Q=!1):Q=void 0;return Q})}),[2]}})})};n.destroy=function(){w.forEach(function(M){return M.remove()});p.default.unbind()};var x=function(){return[{command:"alt+/",alias:A+"+?",name:"help",
title:c.showList,execute:function(){C()}},{command:"alt+\x3d",alias:A+"+'+'",title:c.addLayer,appName:["viewer"],execute:function(){return L("addfromonline")}},{command:"alt+s",alias:A+"+s",title:c.save,appName:["viewer"],execute:function(){return L("savemap","confirm")}},{command:"alt+shift+s",alias:A+"+shift+s",title:c.saveMapAs,appName:["viewer"],execute:function(){return L("savemapas")}},{command:"alt+b",alias:A+"+b",title:c.basemapList,appName:["viewer"],execute:function(){var M=b.config.app.primaryPanel;
L("basemaps",M.isCollapsed()&&2!==M.numPanels?void 0:"gallery")}},{command:"alt+shift+b",alias:A+"+shift+b",title:c.basemaps,appName:["viewer"],execute:function(){var M=b.config.app.primaryPanel;L("basemaps",M.isCollapsed()&&1!==M.numPanels?void 0:"edit")}},{command:"alt+p",alias:A+"+p",title:c.layerProperties,appName:["viewer"],execute:function(){return L("layerproperties")}},{command:"alt+shift+p",alias:A+"+shift+p",title:c.blending,appName:["viewer"],execute:function(){return L("layerproperties",
"blending")}},{command:"alt+i",alias:A+"+i",title:c.layerStyles,execute:function(){return L("layerstyles")}},{command:"alt+x",alias:A+"+x",title:c.layerEffects,appName:["viewer"],execute:function(){return L("effects")}},{command:"alt+k",alias:A+"+k",title:c.bookmarks,appName:["viewer"],execute:function(){return L("bookmarks","create")}},{command:"alt+n",alias:A+"+n",title:c.openNewMap,appName:["viewer"],execute:function(){return L("opennewmap")}},{command:"alt+o",alias:A+"+o",title:c.openMap,appName:["viewer"],
execute:function(){return L("openmap")}},{command:"alt+h",alias:A+"+h",title:c.fullscreen,execute:function(){return v.default.publish("toggle-fullscreen")}},{command:"alt+a",alias:A+"+a",title:c.showHideLayers,execute:function(){return E()}},{command:"alt+g",alias:A+"+g",title:c.legend,execute:function(){return L("maplegend")}},{command:"alt+t",alias:A+"+t",title:c.filter,execute:function(){return L("layerfilter")}},{command:"alt+d",alias:A+"+d",title:c.configureFields,execute:function(){return L("configureattributes")}},
{command:"alt+u",alias:A+"+u",title:c.configurePopups,execute:function(){return L("configurepopup")}},{command:"alt+e",alias:A+"+e",title:c.zoomInitialExtent,execute:function(){return G()}},{command:"alt+l",alias:A+"+l",title:c.layerSwitcher,appName:["viewer"],execute:function(){return O()}},{command:"alt+m",execute:function(){return H()}}]},y=function(){return[{command:"alt+m",alias:A+"+m",title:c.focusMap,execute:function(){return H()}},{alias:d.arrowKeys,title:d.nudge},{alias:"N",title:d.N},{alias:"A",
title:d.A},{alias:"D",title:d.D},{alias:"+",title:d.plus},{alias:"-",title:d.minus}]},B=function(M){return a.find(function(J){var R;return-1<(null===(R=J.command)||void 0===R?void 0:R.indexOf(M))})},C=function(){var M=document.querySelector("calcite-modal");if(null===f||void 0===f?0:f.active)f.active=!f.active;else if(null===M||void 0===M||!M.active){var J=f=document.createElement("calcite-modal");J.fullscreen=!1;J.disableOutsideClose=!0;J.noPadding=!0;J.width="s";J.scale="m";J.intlClose=c.close;
M=document.createElement("h3");M.slot="header";M.innerHTML=c.header;J.appendChild(M);M=document.createElement("div");M.slot="content";M.classList.add("shortcuts-content");J.appendChild(M);var R=document.createElement("table");a.filter(function(U){return U.title}).filter(function(U){var V;return!U.appName||-1<(null===(V=U.appName)||void 0===V?void 0:V.indexOf(t))}).map(function(U){return F(U)}).forEach(function(U){return R.appendChild(U)});M.appendChild(R);var X=D();M.appendChild(X);document.body.appendChild(J);
setTimeout(function(){return J.active=!0},250)}},D=function(){var M=document.createElement("div");M.classList.add("map-view");var J=document.createElement("h3");J.innerHTML=d.title;M.appendChild(J);J=y();var R=document.createElement("table");J.map(function(X){return F(X)}).forEach(function(X){return R.appendChild(X)});M.appendChild(R);return M},F=function(M){var J=document.createElement("tr");J.setAttribute("dir","ltr");var R=document.createElement("td");R.innerHTML=M.title;J.appendChild(R);R=document.createElement("td");
R.innerHTML=M.alias||M.command;J.appendChild(R);return J},E=function(){m.layers.forEach(function(M){return M.visible=k});k=!k},G=function(){return h.__awaiter(e,void 0,void 0,function(){var M,J;return h.__generator(this,function(R){switch(R.label){case 0:return M=b.mapView,J=b.map,[4,M.goTo({target:J.initialExtent})];case 1:return R.sent(),[2]}})})},O=function(){return h.__awaiter(e,void 0,void 0,function(){var M,J,R,X,U,V,Q;return h.__generator(this,function(Y){M=b.config.app.contextualPanel;J=null===
M||void 0===M?void 0:M.container;R=M.activeActionName;X=P(R);U=J.querySelector(".layer-switcher");!l||(null===X||void 0===X?0:X.isMapWidget)||U.hidden?z.showError({type:"warning",name:"shortcut:invalid",undefined:void 0,currentCommand:q}):(M.collapsePanel(!1),V=J.querySelector("calcite-shell-panel calcite-panel"),Q=J.querySelector(".layer-switcher calcite-combobox"),Q.active=!Q.active,Q.active?setTimeout(function(){return Q.setFocus()},50):V&&V.setFocus("dismiss-button"));return[2]})})},H=function(){return h.__awaiter(e,
void 0,void 0,function(){var M;return h.__generator(this,function(J){M=b.mapView;M.focus();return[2]})})},K=function(){var M=b.map;return m||(m=null===M||void 0===M?void 0:M.webMap)},P=function(M){var J=b.config.app.contextualPanel.actionBar;return b.config.app.primaryPanel.actionBar.findAction(M)||J.findAction(M)},L=function(M,J){M=P(M);"savemap"===(null===M||void 0===M?void 0:M.name)&&M.hidden&&(M=P("savemapas"));((null===M||void 0===M?0:M.hidden)||(null===M||void 0===M?0:M.disabled)||(null===M||
void 0===M?0:M.isMapWidget))&&z.showError({type:"warning",name:"shortcut:invalid",action:M,currentCommand:q});v.default.publish("trigger-action",{action:M,modifier:J})}})},"hotkeys-js/dist/hotkeys":function(){(function(u,n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define(n):(u="undefined"!==typeof globalThis?globalThis:u||self,u.hotkeys=n())})(this,function(){function u(y,B,C,D){y.addEventListener?y.addEventListener(B,C,D):y.attachEvent&&
y.attachEvent("on".concat(B),function(){C(window.event)})}function n(y,B){B=B.slice(0,B.length-1);for(var C=0;C<B.length;C++)B[C]=y[B[C].toLowerCase()];return B}function h(y){"string"!==typeof y&&(y="");y=y.replace(/\s/g,"");y=y.split(",");for(var B=y.lastIndexOf("");0<=B;)y[B-1]+=",",y.splice(B,1),B=y.lastIndexOf("");return y}function r(y){k=y||"all"}function v(){return k||"all"}function z(y,B,C,D){if(B.element===D&&(B.scope===C||"all"===B.scope)){C=0<B.mods.length;for(var F in d)Object.prototype.hasOwnProperty.call(d,
F)&&(!d[F]&&-1<B.mods.indexOf(+F)||d[F]&&-1===B.mods.indexOf(+F))&&(C=!1);(0!==B.mods.length||d[16]||d[18]||d[17]||d[91])&&!C&&"*"!==B.shortcut||!1!==B.method(y,B)||(y.preventDefault?y.preventDefault():y.returnValue=!1,y.stopPropagation&&y.stopPropagation(),y.cancelBubble&&(y.cancelBubble=!0))}}function p(y,B){var C=f["*"],D=y.keyCode||y.which||y.charCode;if(g.filter.call(this,y)){if(93===D||224===D)D=91;-1===l.indexOf(D)&&229!==D&&l.push(D);["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(K){var P=
c[K];y[K]&&-1===l.indexOf(P)?l.push(P):!y[K]&&-1<l.indexOf(P)?l.splice(l.indexOf(P),1):"metaKey"===K&&y[K]&&3===l.length&&(y.ctrlKey||y.shiftKey||y.altKey||(l=l.slice(l.indexOf(P))))});if(D in d){d[D]=!0;for(var F in a)a[F]===D&&(g[F]=!0);if(!C)return}for(var E in d)Object.prototype.hasOwnProperty.call(d,E)&&(d[E]=y[c[E]]);y.getModifierState&&(!y.altKey||y.ctrlKey)&&y.getModifierState("AltGraph")&&(-1===l.indexOf(17)&&l.push(17),-1===l.indexOf(18)&&l.push(18),d[17]=!0,d[18]=!0);F=v();if(C)for(E=0;E<
C.length;E++)C[E].scope===F&&("keydown"===y.type&&C[E].keydown||"keyup"===y.type&&C[E].keyup)&&z(y,C[E],F,B);if(D in f)for(C=0;C<f[D].length;C++)if(("keydown"===y.type&&f[D][C].keydown||"keyup"===y.type&&f[D][C].keyup)&&f[D][C].key){E=f[D][C];for(var G=E.key.split(E.splitKey),O=[],H=0;H<G.length;H++)O.push(t(G[H]));O.sort().join("")===l.sort().join("")&&z(y,E,F,B)}}}function g(y,B,C){l=[];var D=h(y),F=[],E="all",G=document,O=0,H=!1,K=!0,P="+",L=!1;void 0===C&&"function"===typeof B&&(C=B);"[object Object]"===
Object.prototype.toString.call(B)&&(B.scope&&(E=B.scope),B.element&&(G=B.element),B.keyup&&(H=B.keyup),void 0!==B.keydown&&(K=B.keydown),void 0!==B.capture&&(L=B.capture),"string"===typeof B.splitKey&&(P=B.splitKey));for("string"===typeof B&&(E=B);O<D.length;O++)y=D[O].split(P),F=[],1<y.length&&(F=n(a,y)),y=y[y.length-1],y="*"===y?"*":t(y),y in f||(f[y]=[]),f[y].push({keyup:H,keydown:K,scope:E,mods:F,shortcut:D[O],method:C,key:D[O],splitKey:P,element:G});"undefined"===typeof G||-1<q.indexOf(G)||!window||
(q.push(G),u(G,"keydown",function(M){p(M,G)},L),m||(m=!0,u(window,"focus",function(){l=[]},L)),u(G,"keyup",function(M){p(M,G);var J=M.keyCode||M.which||M.charCode,R=l.indexOf(J);0<=R&&l.splice(R,1);M.key&&"meta"===M.key.toLowerCase()&&l.splice(0,l.length);if(93===J||224===J)J=91;if(J in d){d[J]=!1;for(var X in a)a[X]===J&&(g[X]=!1)}},L))}var e="undefined"!==typeof navigator?0<navigator.userAgent.toLowerCase().indexOf("firefox"):!1,b={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,
space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":e?173:189,"\x3d":e?61:187,";":e?59:186,"'":222,"[":219,"]":221,"\\":220},a={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,
control:17,"\u2318":91,cmd:91,command:91},c={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},d={16:!1,18:!1,17:!1,91:!1},f={};for(e=1;20>e;e++)b["f".concat(e)]=111+e;var l=[],m=!1,k="all",q=[],t=function(y){return b[y.toLowerCase()]||a[y.toLowerCase()]||y.toUpperCase().charCodeAt(0)},w=function(y){var B=y.scope,C=y.method,D=y.splitKey,F=void 0===D?"+":D;h(y.key).forEach(function(E){E=E.split(F);var G=E.length,O=E[G-1];O="*"===O?"*":t(O);if(f[O]){B||
(B=v());var H=1<G?n(a,E):[];f[O]=f[O].filter(function(K){var P;if(P=(C?K.method===C:!0)&&K.scope===B){P=K.mods;K=P.length>=H.length?P:H;P=P.length>=H.length?H:P;for(var L=!0,M=0;M<K.length;M++)-1===P.indexOf(K[M])&&(L=!1);P=L}return!P})}})};e={setScope:r,getScope:v,deleteScope:function(y,B){var C;y||(y=v());for(var D in f)if(Object.prototype.hasOwnProperty.call(f,D)){var F=f[D];for(C=0;C<F.length;)F[C].scope===y?F.splice(C,1):C++}v()===y&&r(B||"all")},getPressedKeyCodes:function(){return l.slice(0)},
isPressed:function(y){"string"===typeof y&&(y=t(y));return-1!==l.indexOf(y)},filter:function(y){y=y.target||y.srcElement;var B=y.tagName,C=!0;if(y.isContentEditable||("INPUT"===B||"TEXTAREA"===B||"SELECT"===B)&&!y.readOnly)C=!1;return C},trigger:function(y){var B=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(f).forEach(function(C){(C=f[C].find(function(D){return D.scope===B&&D.shortcut===y}))&&C.method&&C.method()})},unbind:function(y){if("undefined"===typeof y)Object.keys(f).forEach(function(F){return delete f[F]});
else if(Array.isArray(y))y.forEach(function(F){F.key&&w(F)});else if("object"===typeof y)y.key&&w(y);else if("string"===typeof y){for(var B=arguments.length,C=Array(1<B?B-1:0),D=1;D<B;D++)C[D-1]=arguments[D];B=C[0];C=C[1];"function"===typeof B&&(C=B,B="");w({key:y,scope:B,method:C,splitKey:"+"})}},keyMap:b,modifier:a,modifierMap:c};for(var A in e)Object.prototype.hasOwnProperty.call(e,A)&&(g[A]=e[A]);if("undefined"!==typeof window){var x=window.hotkeys;g.noConflict=function(y){y&&window.hotkeys===
g&&(window.hotkeys=x);return g};window.hotkeys=g}return g})}}});
define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget ./utils/topic ./App ./widgets/globalNav/GlobalNav arcgis-components/wrappers/InfoBanner esri/request ./widgets/panels/MapMaker/panels/ContextualPanel ./widgets/panels/MapMaker/panels/PrimaryPanel ./widgets/panels/MapMaker/panels/CenterRow ./widgets/CalciteAlert ./utils/appUtils ./utils/mapUtils/errorUtils ./widgets/panels/MapMaker/timesettings/timeExtentToMode ./utils/snappingOptions ./widgets/views/Map ./utils/deepMerge resize-observer-polyfill ./shortcuts/shortcuts esri/core/watchUtils".split(" "),function(u,
n,h,r,v,z,p,g,e,b,a,c,d,f,l,m,k,q,t,w,A,x,y){Object.defineProperty(n,"__esModule",{value:!0});z=h.__importDefault(z);p=h.__importDefault(p);g=h.__importDefault(g);e=h.__importStar(e);b=h.__importDefault(b);a=h.__importDefault(a);c=h.__importDefault(c);d=h.__importDefault(d);f=h.__importDefault(f);l=h.__importStar(l);t=h.__importDefault(t);A=h.__importDefault(A);y=h.__importStar(y);p=function(B){function C(D){D=B.call(this,D)||this;D.isDetached=!1;D.isFullScreen=!1;D.isFullScreenCollapsed=!1;D.promptSaveChanges=
!1;window.ResizeObserver||(window.ResizeObserver=A.default);return D}h.__extends(C,B);C.prototype.destroy=function(){B.prototype.destroy.call(this);this.widget&&this.widget.destroy&&this.widget.destroy();this.fullScreenWidget&&!this.fullScreenWidget.destroyed&&this.fullScreenWidget.destroy();this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null);this.postMessage&&this.postMessage.destroy()};C.prototype.postInitialize=function(){var D=this;this.state={loadMessage:"init",mode:"loading",
config:this.config,portal:null,hideTypes:{"map-notes":1}};this.readAppSettings();this.addEventListeners();this.getPortal(this.config).then(function(){return D.getExtraPortalInfo()}).then(function(){return D.setGeometryService()}).then(function(){return D.updateProductUrls()}).then(function(){return D.loadData()}).then(function(){D.state=h.__assign(h.__assign({},D.state),{mode:"ready"});z.default.publish("app/ready");D.setHelperServiceUrls();D.setupEmbedded();D.setupKeyboardShortcuts()}).catch(function(F){return D.onLoadMapError(F)})};
C.prototype.getExtraPortalInfo=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(D){switch(D.label){case 0:return[4,Promise.all([this.getSettings(),this.getHelpMap(),this.getSubscriptionInfo()])];case 1:return D.sent(),[2,Promise.resolve(!0)]}})})};C.prototype.getSettings=function(){return this.state.portal.fetchSettings()};C.prototype.getHelpMap=function(){return this.state.portal.fetchHelpMap()};C.prototype.getSubscriptionInfo=function(){return this.state.portal.fetchSubscriptionInfo()};
C.prototype.onLoadMapError=function(D){m.showError(D);window.history.pushState({},document.title,window.location.pathname);this.state=h.__assign(h.__assign({},this.state),{mode:"ready"})};C.prototype.showLoader=function(){};C.prototype.hideLoader=function(){};C.prototype.setupEmbedded=function(){return h.__awaiter(this,void 0,void 0,function(){var D,F,E,G,O,H,K;return h.__generator(this,function(P){switch(P.label){case 0:D=this;F=D.state;E=D.config;G=E.urlParameters;O=G.embedded;if(!O)return[3,2];
K=this;return[4,(new Promise(function(L,M){u(["./utils/messaging"],L,M)})).then(h.__importStar)];case 1:H=K.postMessage=P.sent(),H.setup(F),P.label=2;case 2:return[2]}})})};C.prototype.setupKeyboardShortcuts=function(){x.setupShortcuts(this.state)};C.prototype.watchTimeExtent=function(){var D=this;this.own(y.watch(this.state.map.mapView,"timeExtent",function(F){var E=D.state.timeSliderWidget;if(E){var G=k.getMode(F);E.set({timeExtent:F,mode:G})}}))};C.prototype.selectFirstLayer=function(){var D=this,
F=this.state.map.mapView.map,E=F.layers;F=F.tables;if((null===E||void 0===E?0:E.length)||(null===F||void 0===F?0:F.length)){E=this.getDefaultWidgetName();var G="layers"===E||"tables"===E,O="layers"===E?"webviewer-layer-list":"webviewer-table-list";E=this.container;var H=new MutationObserver(function(K){return h.__awaiter(D,void 0,void 0,function(){var P,L,M;return h.__generator(this,function(J){switch(J.label){case 0:P=null===K||void 0===K?void 0:K.find(function(R){var X;return"timeslider"===(null===
(X=null===R||void 0===R?void 0:R.target)||void 0===X?void 0:X.id)});L=G&&(null===K||void 0===K?void 0:K.find(function(R){var X,U;return(null===(X=null===R||void 0===R?void 0:R.target)||void 0===X?void 0:X.classList.contains(O))&&(null===(U=null===R||void 0===R?void 0:R.target)||void 0===U?void 0:U.childNodes.length)}));if(!(G&&L||!G&&P))return[3,2];H.disconnect();M=this.getFirstLayer();return[4,M.load()];case 1:J.sent(),z.default.publish("layer-selected",{layer:M,firstLayer:!0}),z.default.publish("layerswitcher-selected",
M),J.label=2;case 2:return[2]}})})});H.observe(E,{attributes:!0,attributeFilter:["classList","id"],childList:!0,subtree:!0})}};C.prototype.getFirstLayer=function(){var D=this.state.map.mapView.map,F=D.layers,E=D.tables;D=D.basemap.baseLayers;if(null===F||void 0===F?0:F.length)var G=F;else if(null===E||void 0===E?0:E.length)G=E;else if(null===D||void 0===D?0:D.length)G=D;return G.toArray().at(-1)};C.prototype.readAppSettings=function(){var D=this.config,F=D.appSettings,E=D.appSettingsKey;E=window.localStorage.getItem(void 0===
E?"mapViewer_appSettings":E);E=JSON.parse(E);D.appSettings=this.appSettings=w.deepMerge(F,E);return D.appSettings};C.prototype.writeAppSettings=function(){var D=this.config;window.localStorage.setItem(D.appSettingsKey,JSON.stringify(D.appSettings))};C.prototype.showAlert=function(D){var F=D.type||"success",E=D.message||"";D=D.title||"";this.hideAlert();this.alert=new f.default({type:F,message:E,title:D})};C.prototype.hideAlert=function(){this.alert&&!this.alert.destroyed&&this.alert.destroy()};C.prototype.updateProductUrls=
function(){var D=this.config,F=D.productUrls,E=this.state.portal;if(!D.isDebug&&!E.isPortal&&F){var G=E.getEnvironment();Object.keys(F).forEach(function(O){F[O]=F[O].replace("dev.",G+".")})}};C.prototype.adjustMapViewPaddingWithTimeout=function(){var D=this;setTimeout(function(){D.adjustMapViewPadding()},70)};C.prototype.adjustMapViewPadding=function(){var D=this.contextualPanel,F=this.primaryPanel,E=this.map.mapView;if(null===F||void 0===F?0:F.container){var G=D&&D.container||{offsetWidth:0};D=G.detached||
this.isDetached;var O=F&&F.container||{offsetWidth:0};F=O.detached||this.isDetached;var H=O.querySelector("calcite-action-bar").offsetWidth,K=G.querySelector("calcite-action-bar").offsetWidth;G=G.collapsed||D?K:G.offsetWidth;H=O.collapsed||F?H:O.offsetWidth;O=(K=l.isRTL())?G:H;G=K?H:G;H=h.__assign(h.__assign({},E.padding),{right:G,left:O});F&&(H.left=O);D&&(H.right=G);E&&null!==O&&null!==G&&(E.padding=H)}};C.prototype.repositionPopovers=function(){var D=this.primaryPanel;if(!this.contextualPanel.container.collapsed){var F=
document.querySelectorAll(".js-app-flyout");F.forEach(function(E){(null===E||void 0===E?0:E.reposition)&&E.reposition()})}D.container.collapsed||(F=document.querySelectorAll(".js-app-primary-flyout"),F.forEach(function(E){return E.reposition()}));F=document.querySelectorAll(".js-sketch-popover");F.forEach(function(E){return E.reposition()})};C.prototype.addEventListeners=function(){var D=this;window.onbeforeunload=function(F){return D.onUnload(F)};this.own([z.default.subscribe("layer-selected",this.onLayerSelected.bind(this)),
z.default.subscribe("layer-deselected",this.onLayerDeselected.bind(this)),z.default.subscribe("toggle-fullscreen",this.onToggleFullScreen.bind(this)),z.default.subscribe("alert/show",this.showAlert.bind(this)),z.default.subscribe("alert/hide",this.hideAlert.bind(this)),z.default.subscribe("map-updated",this.onMapUpdated.bind(this)),z.default.subscribe("map-saved",this.onMapSaved.bind(this)),z.default.subscribe("webmap/load",this.onMapLoaded.bind(this)),z.default.subscribe("app-properties-updated",
this.writeAppSettings.bind(this)),z.default.subscribe("mapView_changed",this.adjustMapViewPadding.bind(this))]);this.own(z.default.subscribe("calciteShellPanelToggle",function(){return setTimeout(function(){D.adjustMapViewPadding();D.repositionPopovers()},60)}));this.container.addEventListener("calciteActionBarToggle",function(F){return setTimeout(function(){D.repositionPopovers();D.adjustMapViewPadding()},60)});document.body.addEventListener("mousedown",function(F){return z.default.publish("app-click",
F)},!0);this.resizeObserver=new A.default(function(){return D.adjustMapViewPadding()})};C.prototype.addGlobalNav=function(D){D=this.state;var F=D.config;(new g.default({item:F.webmapItem,layers:F.layers,state:D})).createGlobalNav()};C.prototype.addInfoBanner=function(D){if(D=this.state.portal){var F=D.settings;new e.InfoBanner({request:b.default,apiVersion:4,portal:D,bannerConfig:null===F||void 0===F?void 0:F.informationalBanner,topContainer:document.querySelector(".js-top-banner"),bottomContainer:document.querySelector(".js-bottom-banner")})}};
C.prototype.addPrimaryPanel=function(D){var F=this,E=this.map,G=this.state,O=G.portal,H=this.getDefaultWidgetName();E&&E.mapView&&(this.primaryPanel=new c.default({portal:O,state:G,app:this,theme:"dark",slot:"primary-panel",position:"start",defaultWidgetName:H,container:D}),E.mapView.when(function(){return F.resizeObserver.observe(D)}))};C.prototype.addContextualPanel=function(D){var F=this,E=this.map,G=this.state,O=G.config.portal;E&&E.mapView&&(this.contextualPanel=new a.default({portal:O,state:G,
app:this,theme:"light",slot:"contextual-panel",position:"end",container:D}),E.mapView.when(function(){return F.resizeObserver.observe(D)}))};C.prototype.addCenterRow=function(D){var F=this,E=this.map,G=this.state,O=null===E||void 0===E?void 0:E.mapView;if(O){var H=G.config.portal;O.when(function(){E&&E.mapView&&(F.centerRow=new d.default({portal:H,state:G,app:F,theme:"light",slot:"center-row",position:"end",heightScale:"s",container:D}))})}else setTimeout(function(){return F.addCenterRow(D)},50)};
C.prototype.addView=function(D){this.map=new t.default({state:this.state});this.state.map=this.map};C.prototype.onLayerSelected=function(D){};C.prototype.onLayerDeselected=function(D){};C.prototype.getDefaultWidgetName=function(){var D=this.state.config,F=D.layers;D=D.webmapItem;var E=this.hasOnlyTables();F=(null===F||void 0===F?0:F.length)?F.every(function(G){var O;return(null===G||void 0===G?void 0:G.useViewTime)&&(null===(O=null===G||void 0===G?void 0:G.timeInfo)||void 0===O?void 0:O.fullTimeExtent)}):
!1;return D&&!D.isAdmin?F?"timeslider":"maplegend":F?"timeslider":E?"tables":"layers"};C.prototype.hasOnlyTables=function(){var D=this.state.map.mapView.map,F=D.layers;D=D.tables;return(null===F||void 0===F?0:F.length)?F.every(function(E){return E.isTable}):null===D||void 0===D?void 0:D.length};C.prototype.onToggleFullScreen=function(){var D=this.isFullScreen,F=D?"remove":"add",E=document.querySelectorAll(".contextual-panel, .primary-panel, calcite-action-pad, calcite-panel, calcite-popover, calcite-shell-center-row, calcite-shell-panel, .js-app-primary-flyout, .js-app-flyout, .js-sketch-popover");
E=this.visibleNodes||[].filter.call(E,function(G){return l.isNodeVisible(G)});E.forEach(function(G){return G.classList[F]("hide")});this.visibleNodes=D?null:E;this.isFullScreen=!this.isFullScreen;this.adjustMapViewPaddingWithTimeout()};C.prototype.onUnload=function(D){q.copyCurrentToWebMap(this.state.mapView);q.deleteSnappingOptions(this.state.mapView);this.promptSaveChanges?(D.preventDefault(),D.returnValue=""):delete D.returnValue};C.prototype.onMapUpdated=function(){this.promptSaveChanges=!0};
C.prototype.onMapSaved=function(){this.promptSaveChanges=!1;q.copyCurrentToWebMap(this.state.mapView)};C.prototype.onMapLoaded=function(D){this.state=h.__assign(h.__assign({},this.state),{mapView:D});this.watchTimeExtent();this.selectFirstLayer()};C.prototype.render=function(){var D=this.state,F=D.mapView,E=D.portal;E=null===E||void 0===E?void 0:E.settings;E=null===E||void 0===E?void 0:E.informationalBanner;var G=this.config.urlParameters.embedded;return"ready"===D.mode?v.tsx("div",null,v.tsx("calcite-shell",
{bind:this,afterCreate:this.addInfoBanner,"content-behind":"true"},F?v.tsx("calcite-shell-panel",{collapsed:!0,slot:"contextual-panel",class:"contextual-panel",position:"end",bind:this,afterCreate:this.addContextualPanel}):null,F?v.tsx("calcite-shell-panel",{slot:"primary-panel",class:"primary-panel",position:"start",bind:this,afterCreate:this.addPrimaryPanel}):null,v.tsx("calcite-shell-center-row",{slot:"center-row",class:"center-row",position:"end",detached:!0,bind:this,afterCreate:this.addCenterRow,
hidden:!0,"height-scale":"s"}),this.renderHeader(),v.tsx("div",{id:"viewDiv",bind:this,afterCreate:this.addView}),!G&&(null===E||void 0===E?0:E.enabled)?v.tsx("footer",{slot:"footer",class:"js-bottom-banner"}):null)):v.tsx("div",null)};C.prototype.renderHeader=function(){var D=this,F=this.state.portal;F=null===F||void 0===F?void 0:F.settings;F=null===F||void 0===F?void 0:F.informationalBanner;return this.config.urlParameters.embedded?null:v.tsx("header",{slot:"header"},(null===F||void 0===F?0:F.enabled)?
v.tsx("div",{class:"js-top-banner"}):null,v.tsx("div",{id:"global-nav",class:"js-global-nav global-nav",bind:this,afterCreate:function(E){return D.addGlobalNav(E)}}))};h.__decorate([r.property()],C.prototype,"map",void 0);h.__decorate([r.property()],C.prototype,"config",void 0);return C=h.__decorate([r.subclass("")],C)}(p.default);n.default=p});