//>>built
require({cache:{"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(F,l){var b=F.matrix={},q={};b._degToRad=function(n){return q[n]||(q[n]=Math.PI*n/180)};b._radToDeg=function(n){return n/Math.PI*180};b.Matrix2D=function(n){if(n)if("number"==typeof n)this.xx=this.yy=n;else if(n instanceof Array){if(0<n.length){for(var p=b.normalize(n[0]),m=1;m<n.length;++m){var a=p,e=b.normalize(n[m]);p=new b.Matrix2D;p.xx=a.xx*e.xx+a.xy*e.yx;p.xy=a.xx*e.xy+a.xy*e.yy;p.yx=a.yx*e.xx+a.yy*e.yx;
p.yy=a.yx*e.xy+a.yy*e.yy;p.dx=a.xx*e.dx+a.xy*e.dy+a.dx;p.dy=a.yx*e.dx+a.yy*e.dy+a.dy}l.mixin(this,p)}}else l.mixin(this,n)};l.extend(b.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});l.mixin(b,{identity:new b.Matrix2D,flipX:new b.Matrix2D({xx:-1}),flipY:new b.Matrix2D({yy:-1}),flipXY:new b.Matrix2D({xx:-1,yy:-1}),translate:function(n,p){return 1<arguments.length?new b.Matrix2D({dx:n,dy:p}):new b.Matrix2D({dx:n.x,dy:n.y})},scale:function(n,p){return 1<arguments.length?new b.Matrix2D({xx:n,yy:p}):"number"==
typeof n?new b.Matrix2D({xx:n,yy:n}):new b.Matrix2D({xx:n.x,yy:n.y})},rotate:function(n){var p=Math.cos(n);n=Math.sin(n);return new b.Matrix2D({xx:p,xy:-n,yx:n,yy:p})},rotateg:function(n){return b.rotate(b._degToRad(n))},skewX:function(n){return new b.Matrix2D({xy:Math.tan(n)})},skewXg:function(n){return b.skewX(b._degToRad(n))},skewY:function(n){return new b.Matrix2D({yx:Math.tan(n)})},skewYg:function(n){return b.skewY(b._degToRad(n))},reflect:function(n,p){1==arguments.length&&(p=n.y,n=n.x);var m=
n*n,a=p*p,e=m+a,k=2*n*p/e;return new b.Matrix2D({xx:2*m/e-1,xy:k,yx:k,yy:2*a/e-1})},project:function(n,p){1==arguments.length&&(p=n.y,n=n.x);var m=n*n,a=p*p,e=m+a,k=n*p/e;return new b.Matrix2D({xx:m/e,xy:k,yx:k,yy:a/e})},normalize:function(n){return n instanceof b.Matrix2D?n:new b.Matrix2D(n)},isIdentity:function(n){return 1==n.xx&&0==n.xy&&0==n.yx&&1==n.yy&&0==n.dx&&0==n.dy},clone:function(n){var p=new b.Matrix2D,m;for(m in n)"number"==typeof n[m]&&"number"==typeof p[m]&&p[m]!=n[m]&&(p[m]=n[m]);
return p},invert:function(n){n=b.normalize(n);var p=n.xx*n.yy-n.xy*n.yx;return n=new b.Matrix2D({xx:n.yy/p,xy:-n.xy/p,yx:-n.yx/p,yy:n.xx/p,dx:(n.xy*n.dy-n.yy*n.dx)/p,dy:(n.yx*n.dx-n.xx*n.dy)/p})},_multiplyPoint:function(n,p,m){return{x:n.xx*p+n.xy*m+n.dx,y:n.yx*p+n.yy*m+n.dy}},multiplyPoint:function(n,p,m){n=b.normalize(n);return"number"==typeof p&&"number"==typeof m?b._multiplyPoint(n,p,m):b._multiplyPoint(n,p.x,p.y)},multiplyRectangle:function(n,p){var m=b.normalize(n);p=p||{x:0,y:0,width:0,height:0};
if(b.isIdentity(m))return{x:p.x,y:p.y,width:p.width,height:p.height};var a=b.multiplyPoint(m,p.x,p.y),e=b.multiplyPoint(m,p.x,p.y+p.height),k=b.multiplyPoint(m,p.x+p.width,p.y);m=b.multiplyPoint(m,p.x+p.width,p.y+p.height);var h=Math.min(a.x,e.x,k.x,m.x),f=Math.min(a.y,e.y,k.y,m.y);return{x:h,y:f,width:Math.max(a.x,e.x,k.x,m.x)-h,height:Math.max(a.y,e.y,k.y,m.y)-f}},multiply:function(n){for(var p=b.normalize(n),m=1;m<arguments.length;++m){var a=p,e=b.normalize(arguments[m]);p=new b.Matrix2D;p.xx=
a.xx*e.xx+a.xy*e.yx;p.xy=a.xx*e.xy+a.xy*e.yy;p.yx=a.yx*e.xx+a.yy*e.yx;p.yy=a.yx*e.xy+a.yy*e.yy;p.dx=a.xx*e.dx+a.xy*e.dy+a.dx;p.dy=a.yx*e.dx+a.yy*e.dy+a.dy}return p},_sandwich:function(n,p,m){return b.multiply(b.translate(p,m),n,b.translate(-p,-m))},scaleAt:function(n,p,m,a){switch(arguments.length){case 4:return b._sandwich(b.scale(n,p),m,a);case 3:return"number"==typeof m?b._sandwich(b.scale(n),p,m):b._sandwich(b.scale(n,p),m.x,m.y)}return b._sandwich(b.scale(n),p.x,p.y)},rotateAt:function(n,p,m){return 2<
arguments.length?b._sandwich(b.rotate(n),p,m):b._sandwich(b.rotate(n),p.x,p.y)},rotategAt:function(n,p,m){return 2<arguments.length?b._sandwich(b.rotateg(n),p,m):b._sandwich(b.rotateg(n),p.x,p.y)},skewXAt:function(n,p,m){return 2<arguments.length?b._sandwich(b.skewX(n),p,m):b._sandwich(b.skewX(n),p.x,p.y)},skewXgAt:function(n,p,m){return 2<arguments.length?b._sandwich(b.skewXg(n),p,m):b._sandwich(b.skewXg(n),p.x,p.y)},skewYAt:function(n,p,m){return 2<arguments.length?b._sandwich(b.skewY(n),p,m):b._sandwich(b.skewY(n),
p.x,p.y)},skewYgAt:function(n,p,m){return 2<arguments.length?b._sandwich(b.skewYg(n),p,m):b._sandwich(b.skewYg(n),p.x,p.y)}});F.Matrix2D=b.Matrix2D;return b})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(F,l,b,q,n,p,m,a,e){var k=l.getObject("dojox.gfx",!0),h=k._base={};k._hasClass=function(r,w){var v=r.getAttribute("className");return v&&
0<=(" "+v+" ").indexOf(" "+w+" ")};k._addClass=function(r,w){var v=r.getAttribute("className")||"";(!v||0>(" "+v+" ").indexOf(" "+w+" "))&&r.setAttribute("className",v+(v?" ":"")+w)};k._removeClass=function(r,w){var v=r.getAttribute("className");v&&r.setAttribute("className",v.replace(new RegExp("(^|\\s+)"+w+"(\\s+|$)"),"$1$2"))};h._getFontMeasurements=function(){var r={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},w;if(q("ie")){var v=
n.doc.documentElement.style.fontSize||"";v||(n.doc.documentElement.style.fontSize="100%")}var z=a.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},n.body());for(w in r)z.style.fontSize=w,r[w]=16*Math.round(12*z.offsetHeight/16)/12/1E3;q("ie")&&(n.doc.documentElement.style.fontSize=v);n.body().removeChild(z);return r};var f=null;h._getCachedFontMeasurements=function(r){if(r||
!f)f=h._getFontMeasurements();return f};var c=null,d={};h._getTextBox=function(r,w,v){var z=arguments.length,C;c||(c=a.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},n.body()));var D=c;D.className="";var y=D.style;y.borderWidth="0";y.margin="0";y.padding="0";y.outline="0";if(1<z&&w)for(C in w)C in d||(y[C]=w[C]);2<z&&v&&(D.className=v);D.innerHTML=r;D.getBoundingClientRect?(y=D.getBoundingClientRect(),y={l:y.left,t:y.top,w:y.width||y.right-y.left,h:y.height||
y.bottom-y.top}):y=e.getMarginBox(D);D.innerHTML="";return y};h._computeTextLocation=function(r,w,v,z){var C={};switch(r.align){case "end":C.x=r.x-w;break;case "middle":C.x=r.x-w/2;break;default:C.x=r.x}C.y=r.y-v*(z?.75:1);return C};h._computeTextBoundingBox=function(r){if(!k._base._isRendered(r))return{x:0,y:0,width:0,height:0};var w=r.getShape();var v=r.getFont()||k.defaultFont;r=r.getTextWidth();v=k.normalizedLength(v.size);w=h._computeTextLocation(w,r,v,!0);return{x:w.x,y:w.y,width:r,height:v}};
h._isRendered=function(r){for(r=r.parent;r&&r.getParent;)r=r.parent;return null!==r};var g=0;h._getUniqueId=function(){do var r=F._scopeName+"xUnique"+ ++g;while(m.byId(r));return r};var t=q("pointer-events")?"touchAction":q("MSPointer")?"msTouchAction":null;h._fixMsTouchAction=t?function(r){r.rawNode.style[t]="none"}:function(){};l.mixin(k,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",
cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,
x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var r={};return function(w){var v=r[w];if(v)return new v;v=r[w]=function(){};v.prototype=k["default"+w];return new v}}(),normalizeColor:function(r){return r instanceof
b?r:new b(r)},normalizeParameters:function(r,w){var v;if(w){var z={};for(v in r)v in w&&!(v in z)&&(r[v]=w[v])}return r},makeParameters:function(r,w){var v=null;if(!w)return l.delegate(r);var z={};for(v in r)v in z||(z[v]=l.clone(v in w?w[v]:r[v]));return z},formatNumber:function(r,w){var v=r.toString();if(0<=v.indexOf("e"))v=r.toFixed(4);else{var z=v.indexOf(".");0<=z&&5<v.length-z&&(v=r.toFixed(4))}return 0>r?v:w?" "+v:v},makeFontString:function(r){return r.style+" "+r.variant+" "+r.weight+" "+
r.size+" "+r.family},splitFontString:function(r){var w=k.getDefault("Font");r=r.split(/\s+/);if(!(5>r.length)){w.style=r[0];w.variant=r[1];w.weight=r[2];var v=r[3].indexOf("/");w.size=0>v?r[3]:r[3].substring(0,v);var z=4;0>v&&("/"==r[4]?z=6:"/"==r[4].charAt(0)&&(z=5));z<r.length&&(w.family=r.slice(z).join(" "))}return w},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return k._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(r){return r*k.px_in_pt()},px2pt:function(r){return r/
k.px_in_pt()},normalizedLength:function(r){if(0===r.length)return 0;if(2<r.length){var w=k.px_in_pt(),v=parseFloat(r);switch(r.slice(-2)){case "px":return v;case "pt":return v*w;case "in":return 72*v*w;case "pc":return 12*v*w;case "mm":return v*k.mm_in_pt*w;case "cm":return v*k.cm_in_pt*w}}return parseFloat(r)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(r,w){return r&&w&&r===
w},switchTo:function(r){var w="string"==typeof r?k[r]:r;w&&(p.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(v){k[v]=w[v]}),"string"==typeof r?k.renderer=r:p.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(v){return k.renderer=k[v]&&k[v].Surface===k.Surface?v:null}))}});return k})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(F,l,b){l.switchTo(b);return l})},
"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(F,l,b,q,n){var p=null;b.add("vml",function(m,a,e){e.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';m="adj"in e.firstChild;e.innerHTML="";return m});return{load:function(m,a,e){function k(){a(["dojox/gfx/"+h],function(d){F.renderer=h;p=d;e(d)})}if(p&&"force"!=m)e(p);else{var h=n.forceGfxRenderer;m=!h&&(l.isString(n.gfxRenderer)?n.gfxRenderer:"svg,vml,canvas,silverlight").split(",");
for(var f,c;!h&&m.length;)switch(m.shift()){case "svg":"SVGAngle"in q.global&&(h="svg");break;case "vml":b("vml")&&(h="vml");break;case "silverlight":try{b("ie")?(f=new ActiveXObject("AgControl.AgControl"),f.IsVersionSupported("1.0"))&&(c=!0):navigator.plugins["Silverlight Plug-In"]&&(c=!0)}catch(d){c=!1}finally{f=null}c&&(h="silverlight");break;case "canvas":q.global.CanvasRenderingContext2D&&(h="canvas")}"canvas"===h&&!1!==n.canvasEvents&&(h="canvasWithEvents");"svg"==h&&"undefined"!=typeof window.svgweb?
window.svgweb.addOnLoad(k):k()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(F,l,b,q,n,p,m,a,e,k,h,f){function c(u,B){return b.doc.createElementNS?b.doc.createElementNS(u,B):b.doc.createElement(B)}function d(u,B,x,A){return u.setAttributeNS?u.setAttributeNS(B,x,A):u.setAttribute(x,A)}function g(u){return t.useSvgWeb?
b.doc.createTextNode(u,!0):b.doc.createTextNode(u)}var t=k.svg={};t.useSvgWeb="undefined"!=typeof window.svgweb;var r=navigator.userAgent,w=l("ios"),v=l("android"),z=l("chrome")||v&&4<=v?"auto":"optimizeLegibility";t.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};t.getRef=function(u){return u&&"none"!=u?u.match(/^url\(#.+\)$/)?q.byId(u.slice(5,-1)):u.match(/^#dojoUnique\d+$/)?q.byId(u.slice(1)):null:null};t.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,
1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var C=0;t.Shape=n("dojox.gfx.svg.Shape",h.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var u=this.rawNode.getAttribute("fill");(u=t.getRef(u))&&u.parentNode.removeChild(u)}this.clip&&(u=this.rawNode.getAttribute("clip-path"))&&(u=q.byId(u.match(/gfx_clip[\d]+/)[0]))&&u.parentNode.removeChild(u);h.Shape.prototype.destroy.apply(this,
arguments)},setFill:function(u){if(!u)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var B=function(A){this.setAttribute(A,x[A].toFixed(8))};if("object"==typeof u&&"type"in u){switch(u.type){case "linear":var x=k.makeParameters(k.defaultLinearGradient,u);u=this._setFillObject(x,"linearGradient");p.forEach(["x1","y1","x2","y2"],B,u);break;case "radial":x=k.makeParameters(k.defaultRadialGradient,u);u=this._setFillObject(x,"radialGradient");
p.forEach(["cx","cy","r"],B,u);break;case "pattern":x=k.makeParameters(k.defaultPattern,u),u=this._setFillObject(x,"pattern"),p.forEach(["x","y","width","height"],B,u)}this.fillStyle=x;return this}this.fillStyle=x=k.normalizeColor(u);this.rawNode.setAttribute("fill",x.toCss());this.rawNode.setAttribute("fill-opacity",x.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(u){var B=this.rawNode;if(!u)return this.strokeStyle=null,B.setAttribute("stroke","none"),B.setAttribute("stroke-opacity",
0),this;if("string"==typeof u||F.isArray(u)||u instanceof e)u={color:u};u=this.strokeStyle=k.makeParameters(k.defaultStroke,u);u.color=k.normalizeColor(u.color);if(u){var x=0>u.width?0:u.width;B.setAttribute("stroke",u.color.toCss());B.setAttribute("stroke-opacity",u.color.a);B.setAttribute("stroke-width",x);B.setAttribute("stroke-linecap",u.cap);"number"==typeof u.join?(B.setAttribute("stroke-linejoin","miter"),B.setAttribute("stroke-miterlimit",u.join)):B.setAttribute("stroke-linejoin",u.join);
var A=u.style.toLowerCase();A in t.dasharray&&(A=t.dasharray[A]);if(A instanceof Array){A=F._toArray(A);var E;for(E=0;E<A.length;++E)A[E]*=x;if("butt"!=u.cap){for(E=0;E<A.length;E+=2)A[E]-=x,1>A[E]&&(A[E]=1);for(E=1;E<A.length;E+=2)A[E]+=x}A=A.join(",")}B.setAttribute("stroke-dasharray",A);B.setAttribute("dojoGfxStrokeStyle",u.style)}return this},_getParentSurface:function(){for(var u=this.parent;u&&!(u instanceof k.Surface);u=u.parent);return u},_setFillObject:function(u,B){var x=t.xmlns.svg;this.fillStyle=
u;var A=this._getParentSurface().defNode,E=this.rawNode.getAttribute("fill");if(E=t.getRef(E))if(E.tagName.toLowerCase()!=B.toLowerCase()){var J=E.id;E.parentNode.removeChild(E);E=c(x,B);E.setAttribute("id",J);A.appendChild(E)}else for(;E.childNodes.length;)E.removeChild(E.lastChild);else E=c(x,B),E.setAttribute("id",k._base._getUniqueId()),A.appendChild(E);if("pattern"==B)E.setAttribute("patternUnits","userSpaceOnUse"),x=c(x,"image"),x.setAttribute("x",0),x.setAttribute("y",0),x.setAttribute("width",
(0>u.width?0:u.width).toFixed(8)),x.setAttribute("height",(0>u.height?0:u.height).toFixed(8)),d(x,t.xmlns.xlink,"xlink:href",u.src),E.appendChild(x);else for(E.setAttribute("gradientUnits","userSpaceOnUse"),A=0;A<u.colors.length;++A){J=u.colors[A];var O=c(x,"stop"),S=J.color=k.normalizeColor(J.color);O.setAttribute("offset",J.offset.toFixed(8));O.setAttribute("stop-color",S.toCss());O.setAttribute("stop-opacity",S.a);E.appendChild(O)}this.rawNode.setAttribute("fill","url(#"+E.getAttribute("id")+")");
this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return E},_applyTransform:function(){if(this.matrix){var u=this.matrix;this.rawNode.setAttribute("transform","matrix("+u.xx.toFixed(8)+","+u.yx.toFixed(8)+","+u.xy.toFixed(8)+","+u.yy.toFixed(8)+","+u.dx.toFixed(8)+","+u.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(u){u=this.rawNode=u;"image"!=this.shape.type&&u.setAttribute("fill","none");u.setAttribute("fill-opacity",
0);u.setAttribute("stroke","none");u.setAttribute("stroke-opacity",0);u.setAttribute("stroke-width",1);u.setAttribute("stroke-linecap","butt");u.setAttribute("stroke-linejoin","miter");u.setAttribute("stroke-miterlimit",4);u.__gfxObject__=this},setShape:function(u){this.shape=k.makeParameters(this.shape,u);for(var B in this.shape)if("type"!=B){u=this.shape[B];if("width"===B||"height"===B)u=0>u?0:u;this.rawNode.setAttribute(B,u)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(u){this.inherited(arguments);var B=u?"width"in u?"rect":"cx"in u?"ellipse":"points"in u?"polyline":"d"in u?"path":null:null;if(u&&!B)return this;"polyline"===B&&(u=F.clone(u),u.points=u.points.join(","));var x,A=a.get(this.rawNode,"clip-path");A&&(x=q.byId(A.match(/gfx_clip[\d]+/)[0]))&&x.removeChild(x.childNodes[0]);u?(x?(B=c(t.xmlns.svg,B),x.appendChild(B)):
(A="gfx_clip"+ ++C,this.rawNode.setAttribute("clip-path","url(#"+A+")"),x=c(t.xmlns.svg,"clipPath"),B=c(t.xmlns.svg,B),x.appendChild(B),this.rawNode.parentNode.insertBefore(x,this.rawNode),a.set(x,"id",A)),a.set(B,u)):(this.rawNode.removeAttribute("clip-path"),x&&x.parentNode.removeChild(x));return this},_removeClipNode:function(){var u,B=a.get(this.rawNode,"clip-path");B&&(u=q.byId(B.match(/gfx_clip[\d]+/)[0]))&&u.parentNode.removeChild(u);return u}});t.Group=n("dojox.gfx.svg.Group",t.Shape,{constructor:function(){h.Container._init.call(this)},
setRawNode:function(u){this.rawNode=u;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);t.Shape.prototype.destroy.apply(this,arguments)}});t.Group.nodeType="g";t.Rect=n("dojox.gfx.svg.Rect",[t.Shape,h.Rect],{setShape:function(u){this.shape=k.makeParameters(this.shape,u);this.bbox=null;for(var B in this.shape)if("type"!=B&&"r"!=B){u=this.shape[B];if("width"===B||"height"===B)u=0>u?0:u;this.rawNode.setAttribute(B,u)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});t.Rect.nodeType="rect";t.Ellipse=n("dojox.gfx.svg.Ellipse",[t.Shape,h.Ellipse],{});t.Ellipse.nodeType="ellipse";t.Circle=n("dojox.gfx.svg.Circle",[t.Shape,h.Circle],{});t.Circle.nodeType="circle";t.Line=n("dojox.gfx.svg.Line",[t.Shape,h.Line],{});t.Line.nodeType="line";t.Polyline=n("dojox.gfx.svg.Polyline",[t.Shape,h.Polyline],{setShape:function(u,B){u&&u instanceof Array?(this.shape=k.makeParameters(this.shape,{points:u}),B&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=k.makeParameters(this.shape,u);this.bbox=null;this._normalizePoints();for(var x=[],A=this.shape.points,E=0;E<A.length;++E)x.push(A[E].x.toFixed(8),A[E].y.toFixed(8));this.rawNode.setAttribute("points",x.join(" "));return this}});t.Polyline.nodeType="polyline";t.Image=n("dojox.gfx.svg.Image",[t.Shape,h.Image],{setShape:function(u){this.shape=k.makeParameters(this.shape,u);this.bbox=null;u=this.rawNode;for(var B in this.shape)if("type"!=B&&"src"!=
B){var x=this.shape[B];if("width"===B||"height"===B)x=0>x?0:x;u.setAttribute(B,x)}u.setAttribute("preserveAspectRatio","none");d(u,t.xmlns.xlink,"xlink:href",this.shape.src);u.__gfxObject__=this;return this}});t.Image.nodeType="image";t.Text=n("dojox.gfx.svg.Text",[t.Shape,h.Text],{setShape:function(u){this.shape=k.makeParameters(this.shape,u);this.bbox=null;u=this.rawNode;var B=this.shape;u.setAttribute("x",B.x);u.setAttribute("y",B.y);u.setAttribute("text-anchor",B.align);u.setAttribute("text-decoration",
B.decoration);u.setAttribute("rotate",B.rotated?90:0);u.setAttribute("kerning",B.kerning?"auto":0);u.setAttribute("text-rendering",z);u.firstChild?u.firstChild.nodeValue=B.text:u.appendChild(g(B.text));return this},getTextWidth:function(){var u=this.rawNode,B=u.parentNode;u=u.cloneNode(!0);u.style.visibility="hidden";var x=0,A=u.firstChild.nodeValue;B.appendChild(u);if(""!=A)for(;!x;)x=u.getBBox?parseInt(u.getBBox().width):68;B.removeChild(u);return x},getBoundingBox:function(){var u=null;if(this.getShape().text)try{u=
this.rawNode.getBBox()}catch(B){u={x:0,y:0,width:0,height:0}}return u}});t.Text.nodeType="text";t.Path=n("dojox.gfx.svg.Path",[t.Shape,f.Path],{_updateWithSegment:function(u){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(u){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});t.Path.nodeType="path";t.TextPath=n("dojox.gfx.svg.TextPath",
[t.Shape,f.TextPath],{_updateWithSegment:function(u){this.inherited(arguments);this._setTextPath()},setShape:function(u){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var u=this.rawNode;if(!u.firstChild){var B=c(t.xmlns.svg,"textPath"),x=g("");B.appendChild(x);u.appendChild(B)}B=(B=u.firstChild.getAttributeNS(t.xmlns.xlink,"href"))&&t.getRef(B);if(!B&&(x=this._getParentSurface())){x=x.defNode;B=c(t.xmlns.svg,"path");var A=k._base._getUniqueId();
B.setAttribute("id",A);x.appendChild(B);d(u.firstChild,t.xmlns.xlink,"xlink:href","#"+A)}B&&B.setAttribute("d",this.shape.path)}},_setText:function(){var u=this.rawNode;if(!u.firstChild){var B=c(t.xmlns.svg,"textPath"),x=g("");B.appendChild(x);u.appendChild(B)}u=u.firstChild;B=this.text;u.setAttribute("alignment-baseline","middle");switch(B.align){case "middle":u.setAttribute("text-anchor","middle");u.setAttribute("startOffset","50%");break;case "end":u.setAttribute("text-anchor","end");u.setAttribute("startOffset",
"100%");break;default:u.setAttribute("text-anchor","start"),u.setAttribute("startOffset","0%")}u.setAttribute("baseline-shift","0.5ex");u.setAttribute("text-decoration",B.decoration);u.setAttribute("rotate",B.rotated?90:0);u.setAttribute("kerning",B.kerning?"auto":0);u.firstChild.data=B.text}});t.TextPath.nodeType="text";var D=534<function(){var u=/WebKit\/(\d*)/.exec(r);return u?u[1]:0}();t.Surface=n("dojox.gfx.svg.Surface",h.Surface,{constructor:function(){h.Container._init.call(this)},destroy:function(){h.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(u,B){if(!this.rawNode)return this;var x=0>u?0:u,A=0>B?0:B;this.rawNode.setAttribute("width",x);this.rawNode.setAttribute("height",A);D&&(this.rawNode.style.width=x,this.rawNode.style.height=A);return this},getDimensions:function(){return this.rawNode?{width:k.normalizedLength(this.rawNode.getAttribute("width")),height:k.normalizedLength(this.rawNode.getAttribute("height"))}:null}});t.createSurface=function(u,B,x){var A=new t.Surface;
A.rawNode=c(t.xmlns.svg,"svg");A.rawNode.setAttribute("overflow","hidden");B&&A.rawNode.setAttribute("width",0>B?0:B);x&&A.rawNode.setAttribute("height",0>x?0:x);B=c(t.xmlns.svg,"defs");A.rawNode.appendChild(B);A.defNode=B;A._parent=q.byId(u);A._parent.appendChild(A.rawNode);k._base._fixMsTouchAction(A);return A};l={_setFont:function(){var u=this.fontStyle;this.rawNode.setAttribute("font-style",u.style);this.rawNode.setAttribute("font-variant",u.variant);this.rawNode.setAttribute("font-weight",u.weight);
this.rawNode.setAttribute("font-size",u.size);this.rawNode.setAttribute("font-family",u.family)}};var y=h.Container;n=t.Container={openBatch:function(){if(!this._batch){var u=t.useSvgWeb?b.doc.createDocumentFragment(!0):b.doc.createDocumentFragment();this.fragment=u}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(u){this!=u.getParent()&&(this.fragment?
this.fragment.appendChild(u.rawNode):this.rawNode.appendChild(u.rawNode),y.add.apply(this,arguments),u.setClip(u.clip));return this},remove:function(u,B){this==u.getParent()&&(this.rawNode==u.rawNode.parentNode&&this.rawNode.removeChild(u.rawNode),this.fragment&&this.fragment==u.rawNode.parentNode&&this.fragment.removeChild(u.rawNode),u._removeClipNode(),y.remove.apply(this,arguments));return this},clear:function(){for(var u=this.rawNode;u.lastChild;)u.removeChild(u.lastChild);var B=this.defNode;
if(B){for(;B.lastChild;)B.removeChild(B.lastChild);u.appendChild(B)}return y.clear.apply(this,arguments)},getBoundingBox:y.getBoundingBox,_moveChildToFront:y._moveChildToFront,_moveChildToBack:y._moveChildToBack};f=t.Creator={createObject:function(u,B){if(!this.rawNode)return null;var x=new u,A=c(t.xmlns.svg,u.nodeType);x.setRawNode(A);x.setShape(B);this.add(x);return x}};F.extend(t.Text,l);F.extend(t.TextPath,l);F.extend(t.Group,n);F.extend(t.Group,h.Creator);F.extend(t.Group,f);F.extend(t.Surface,
n);F.extend(t.Surface,h.Creator);F.extend(t.Surface,f);t.fixTarget=function(u,B){u.gfxTarget||(u.gfxTarget=w&&u.target.wholeText?u.target.parentElement.__gfxObject__:u.target.__gfxObject__);return!0};t.useSvgWeb&&(t.createSurface=function(u,B,x){var A=new t.Surface;B=0>B?0:B;x=0>x?0:x;if(!B||!x){var E=m.position(u);B=B||E.w;x=x||E.h}u=q.byId(u);E=u.id?u.id+"_svgweb":k._base._getUniqueId();var J=c(t.xmlns.svg,"svg");J.id=E;J.setAttribute("width",B);J.setAttribute("height",x);svgweb.appendChild(J,u);
J.addEventListener("SVGLoad",function(){A.rawNode=this;A.isLoaded=!0;var O=c(t.xmlns.svg,"defs");A.rawNode.appendChild(O);A.defNode=O;if(A.onLoad)A.onLoad(A)},!1);A.isLoaded=!1;return A},t.Surface.extend({destroy:function(){var u=this.rawNode;svgweb.removeChild(u,u.parentNode)}}),l={connect:function(u,B,x){"on"===u.substring(0,2)&&(u=u.substring(2));x=2==arguments.length?B:F.hitch(B,x);this.getEventSource().addEventListener(u,x,!1);return[this,u,x]},disconnect:function(u){this.getEventSource().removeEventListener(u[1],
u[2],!1);delete u[0]}},F.extend(t.Shape,l),F.extend(t.Surface,l));return t})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(F,l,b,q,n,p,m,a,e,k){function h(c,d){for(var g=c.length-1;d<g;)c[d]=c[++d];c.length=g}var f=F.shape={};f.Shape=b("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(n("gfxRegistry")){var c=f.register(this);this.getUID=function(){return c}}},destroy:function(){n("gfxRegistry")&&f.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var c=this.getBoundingBox();if(!c)return null;var d=this._getRealMatrix();return[k.multiplyPoint(d,c.x,c.y),k.multiplyPoint(d,c.x+c.width,c.y),k.multiplyPoint(d,c.x+c.width,c.y+c.height),k.multiplyPoint(d,c.x,c.y+c.height)]},getEventSource:function(){return this.rawNode},setClip:function(c){this.clip=c},getClip:function(){return this.clip},setShape:function(c){this.shape=F.makeParameters(this.shape,c);this.bbox=null;
return this},setFill:function(c){if(!c)return this.fillStyle=null,this;var d=null;if("object"==typeof c&&"type"in c)switch(c.type){case "linear":d=F.makeParameters(F.defaultLinearGradient,c);break;case "radial":d=F.makeParameters(F.defaultRadialGradient,c);break;case "pattern":d=F.makeParameters(F.defaultPattern,c)}else d=F.normalizeColor(c);this.fillStyle=d;return this},setStroke:function(c){if(!c)return this.strokeStyle=null,this;if("string"==typeof c||l.isArray(c)||c instanceof e)c={color:c};c=
this.strokeStyle=F.makeParameters(F.defaultStroke,c);c.color=F.normalizeColor(c.color);return this},setTransform:function(c){this.matrix=k.clone(c?k.normalize(c):k.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var c=this.getParent();c&&(c._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var c=this.getParent();c&&(c._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(c){return c?this.setTransform([this.matrix,c]):this},applyLeftTransform:function(c){return c?this.setTransform([c,this.matrix]):this},applyTransform:function(c){return c?this.setTransform([this.matrix,c]):this},removeShape:function(c){this.parent&&this.parent.remove(this,c);return this},_setParent:function(c,d){this.parent=c;return this._updateParentMatrix(d)},_updateParentMatrix:function(c){this.parentMatrix=c?k.clone(c):null;return this._applyTransform()},_getRealMatrix:function(){for(var c=
this.matrix,d=this.parent;d;)d.matrix&&(c=k.multiply(d.matrix,c)),d=d.parent;return c}});f._eventsProcessing={on:function(c,d){return p(this.getEventSource(),c,f.fixCallback(this,F.fixTarget,d))},connect:function(c,d,g){"on"==c.substring(0,2)&&(c=c.substring(2));return this.on(c,g?l.hitch(d,g):d)},disconnect:function(c){return c.remove()}};f.fixCallback=function(c,d,g,t){t||(t=g,g=null);if(l.isString(t)){g=g||q.global;if(!g[t])throw['dojox.gfx.shape.fixCallback: scope["',t,'"] is null (scope\x3d"',
g,'")'].join("");return function(r){return d(r,c)?g[t].apply(g,arguments||[]):void 0}}return g?function(r){return d(r,c)?t.apply(g,arguments||[]):void 0}:function(r){return d(r,c)?t.apply(g,arguments):void 0}};l.extend(f.Shape,f._eventsProcessing);f.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(c){var d=c.getParent();d&&d.remove(c,!0);this.children.push(c);return c._setParent(this,this._getRealMatrix())},
remove:function(c,d){for(var g=0;g<this.children.length;++g)if(this.children[g]==c){d||(c.parent=null,c.parentMatrix=null);h(this.children,g);break}return this},clear:function(c){for(var d,g=0;g<this.children.length;++g)d=this.children[g],d.parent=null,d.parentMatrix=null,c&&d.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var c=null;m.forEach(this.children,function(d){var g=d.getBoundingBox();g&&((d=d.getTransform())&&(g=k.multiplyRectangle(d,g)),c?(c.x=Math.min(c.x,
g.x),c.y=Math.min(c.y,g.y),c.endX=Math.max(c.endX,g.x+g.width),c.endY=Math.max(c.endY,g.y+g.height)):c={x:g.x,y:g.y,endX:g.x+g.width,endY:g.y+g.height})});c&&(c.width=c.endX-c.x,c.height=c.endY-c.y);return c}return null},_moveChildToFront:function(c){for(var d=0;d<this.children.length;++d)if(this.children[d]==c){h(this.children,d);this.children.push(c);break}return this},_moveChildToBack:function(c){for(var d=0;d<this.children.length;++d)if(this.children[d]==c){h(this.children,d);this.children.unshift(c);
break}return this}};f.Surface=b("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){m.forEach(this._nodes,a.destroy);this._nodes=[];m.forEach(this._events,function(c){c&&c.remove()});this._events=[];this.rawNode=null;if(n("ie"))for(;this._parent.lastChild;)a.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(c){},whenLoaded:function(c,d){var g=l.hitch(c,d);if(this.isLoaded)g(this);else p.once(this,"load",function(t){g(t)})}});l.extend(f.Surface,f._eventsProcessing);f.Rect=b("dojox.gfx.shape.Rect",f.Shape,{constructor:function(c){this.shape=F.getDefault("Rect");this.rawNode=c},getBoundingBox:function(){return this.shape}});f.Ellipse=b("dojox.gfx.shape.Ellipse",f.Shape,{constructor:function(c){this.shape=F.getDefault("Ellipse");this.rawNode=c},getBoundingBox:function(){if(!this.bbox){var c=
this.shape;this.bbox={x:c.cx-c.rx,y:c.cy-c.ry,width:2*c.rx,height:2*c.ry}}return this.bbox}});f.Circle=b("dojox.gfx.shape.Circle",f.Shape,{constructor:function(c){this.shape=F.getDefault("Circle");this.rawNode=c},getBoundingBox:function(){if(!this.bbox){var c=this.shape;this.bbox={x:c.cx-c.r,y:c.cy-c.r,width:2*c.r,height:2*c.r}}return this.bbox}});f.Line=b("dojox.gfx.shape.Line",f.Shape,{constructor:function(c){this.shape=F.getDefault("Line");this.rawNode=c},getBoundingBox:function(){if(!this.bbox){var c=
this.shape;this.bbox={x:Math.min(c.x1,c.x2),y:Math.min(c.y1,c.y2),width:Math.abs(c.x2-c.x1),height:Math.abs(c.y2-c.y1)}}return this.bbox}});f.Polyline=b("dojox.gfx.shape.Polyline",f.Shape,{constructor:function(c){this.shape=F.getDefault("Polyline");this.rawNode=c},setShape:function(c,d){c&&c instanceof Array?(this.inherited(arguments,[{points:c}]),d&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[c]);return this},_normalizePoints:function(){var c=
this.shape.points,d=c&&c.length;if(d&&"number"==typeof c[0]){for(var g=[],t=0;t<d;t+=2)g.push({x:c[t],y:c[t+1]});this.shape.points=g}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var c=this.shape.points,d=c.length,g=c[0],t=g.x,r=g.y,w=g.x,v=g.y,z=1;z<d;++z)g=c[z],t>g.x&&(t=g.x),w<g.x&&(w=g.x),r>g.y&&(r=g.y),v<g.y&&(v=g.y);this.bbox={x:t,y:r,width:w-t,height:v-r}}return this.bbox}});f.Image=b("dojox.gfx.shape.Image",f.Shape,{constructor:function(c){this.shape=F.getDefault("Image");
this.rawNode=c},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});f.Text=b(f.Shape,{constructor:function(c){this.fontStyle=null;this.shape=F.getDefault("Text");this.rawNode=c},getFont:function(){return this.fontStyle},setFont:function(c){this.fontStyle="string"==typeof c?F.splitFontString(c):F.makeParameters(F.defaultFont,c);this._setFont();return this},getBoundingBox:function(){var c=null;this.getShape().text&&(c=F._base._computeTextBoundingBox(this));
return c}});f.Creator={createShape:function(c){switch(c.type){case F.defaultPath.type:return this.createPath(c);case F.defaultRect.type:return this.createRect(c);case F.defaultCircle.type:return this.createCircle(c);case F.defaultEllipse.type:return this.createEllipse(c);case F.defaultLine.type:return this.createLine(c);case F.defaultPolyline.type:return this.createPolyline(c);case F.defaultImage.type:return this.createImage(c);case F.defaultText.type:return this.createText(c);case F.defaultTextPath.type:return this.createTextPath(c)}return null},
createGroup:function(){return this.createObject(F.Group)},createRect:function(c){return this.createObject(F.Rect,c)},createEllipse:function(c){return this.createObject(F.Ellipse,c)},createCircle:function(c){return this.createObject(F.Circle,c)},createLine:function(c){return this.createObject(F.Line,c)},createPolyline:function(c){return this.createObject(F.Polyline,c)},createImage:function(c){return this.createObject(F.Image,c)},createText:function(c){return this.createObject(F.Text,c)},createPath:function(c){return this.createObject(F.Path,
c)},createTextPath:function(c){return this.createObject(F.TextPath,{}).setText(c)},createObject:function(c,d){return null}};return f})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(F,l,b,q,n){n=b("dojox.gfx.path.Path",n.Shape,{constructor:function(p){this.shape=l.clone(F.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=p;this.segmented=!1},setAbsoluteMode:function(p){this._confirmSegmented();
this.absolute="string"==typeof p?"absolute"==p:p;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var p=this.bbox,m=this._getRealMatrix();this.bbox=null;for(var a=0,e=this.segments.length;a<e;++a)this._updateWithSegment(this.segments[a],
m);m=this.bbox;this.bbox=p;return this.tbbox=m?[{x:m.l,y:m.t},{x:m.r,y:m.t},{x:m.r,y:m.b},{x:m.l,y:m.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(p,m,a){a&&(m=q.multiplyPoint(a,p,m),p=m.x,m=m.y);this.bbox&&"l"in this.bbox?(this.bbox.l>p&&(this.bbox.l=p),this.bbox.r<p&&(this.bbox.r=p),this.bbox.t>m&&(this.bbox.t=m),this.bbox.b<m&&(this.bbox.b=m)):
this.bbox={l:p,b:m,r:p,t:m}},_updateWithSegment:function(p,m){var a=p.args,e=a.length,k;switch(p.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(k=0;k<e;k+=2)this._updateBBox(a[k],a[k+1],m);this.last.x=a[e-2];this.last.y=a[e-1];this.absolute=!0;break;case "H":for(k=0;k<e;++k)this._updateBBox(a[k],this.last.y,m);this.last.x=a[e-1];this.absolute=!0;break;case "V":for(k=0;k<e;++k)this._updateBBox(this.last.x,a[k],m);this.last.y=a[e-1];this.absolute=!0;break;case "m":k=0;"x"in this.last||
(this._updateBBox(this.last.x=a[0],this.last.y=a[1],m),k=2);for(;k<e;k+=2)this._updateBBox(this.last.x+=a[k],this.last.y+=a[k+1],m);this.absolute=!1;break;case "l":case "t":for(k=0;k<e;k+=2)this._updateBBox(this.last.x+=a[k],this.last.y+=a[k+1],m);this.absolute=!1;break;case "h":for(k=0;k<e;++k)this._updateBBox(this.last.x+=a[k],this.last.y,m);this.absolute=!1;break;case "v":for(k=0;k<e;++k)this._updateBBox(this.last.x,this.last.y+=a[k],m);this.absolute=!1;break;case "c":for(k=0;k<e;k+=6)this._updateBBox(this.last.x+
a[k],this.last.y+a[k+1],m),this._updateBBox(this.last.x+a[k+2],this.last.y+a[k+3],m),this._updateBBox(this.last.x+=a[k+4],this.last.y+=a[k+5],m);this.absolute=!1;break;case "s":case "q":for(k=0;k<e;k+=4)this._updateBBox(this.last.x+a[k],this.last.y+a[k+1],m),this._updateBBox(this.last.x+=a[k+2],this.last.y+=a[k+3],m);this.absolute=!1;break;case "A":for(k=0;k<e;k+=7)this._updateBBox(a[k+5],a[k+6],m);this.last.x=a[e-2];this.last.y=a[e-1];this.absolute=!0;break;case "a":for(k=0;k<e;k+=7)this._updateBBox(this.last.x+=
a[k+5],this.last.y+=a[k+6],m);this.absolute=!1}var h=[p.action];for(k=0;k<e;++k)h.push(F.formatNumber(a[k],!0));if("string"==typeof this.shape.path)this.shape.path+=h.join("");else for(k=0,e=h.length;k<e;++k)this.shape.path.push(h[k])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(p,m){this.tbbox=null;var a=this._validSegments[p.toLowerCase()];"number"==typeof a&&(a?m.length>=a&&(a={action:p,args:m.slice(0,m.length-m.length%a)},this.segments.push(a),this._updateWithSegment(a)):
(a={action:p,args:[]},this.segments.push(a),this._updateWithSegment(a)))},_collectArgs:function(p,m){for(var a=0;a<m.length;++a){var e=m[a];"boolean"==typeof e?p.push(e?1:0):"number"==typeof e?p.push(e):e instanceof Array?this._collectArgs(p,e):"x"in e&&"y"in e&&p.push(e.x,e.y)}},moveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"M":"m",p);return this},lineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);
this._pushSegment(this.absolute?"L":"l",p);return this},hLineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"H":"h",p);return this},vLineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"V":"v",p);return this},curveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"C":"c",p);return this},smoothCurveTo:function(){this._confirmSegmented();
var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"S":"s",p);return this},qCurveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"Q":"q",p);return this},qSmoothCurveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"T":"t",p);return this},arcTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"A":
"a",p);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var p=this.shape.path;this.shape.path=[];this._setPath(p);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(p){p=l.isArray(p)?p:p.match(F.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(p){for(var m="",a=[],e=p.length,k=0;k<e;++k){var h=p[k],f=parseFloat(h);isNaN(f)?(m&&this._pushSegment(m,
a),a=[],m=h):a.push(f)}this._pushSegment(m,a)}},setShape:function(p){this.inherited(arguments,["string"==typeof p?{path:p}:p]);this.segmented=!1;this.segments=[];F.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});b=b("dojox.gfx.path.TextPath",n,{constructor:function(p){"text"in this||(this.text=l.clone(F.defaultTextPath));"fontStyle"in this||(this.fontStyle=l.clone(F.defaultFont))},getText:function(){return this.text},setText:function(p){this.text=F.makeParameters(this.text,
"string"==typeof p?{text:p}:p);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(p){this.fontStyle="string"==typeof p?F.splitFontString(p):F.makeParameters(F.defaultFont,p);this._setFont();return this}});return F.path={Path:n,TextPath:b}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],function(F,l){var b={},q={x:"0%",y:"0%",width:"100%",height:"100%"},n={};b.createFilter=function(f,c){var d=F.mixin({},q,f);d.primitives||(d.primitives=
[]);c&&Array.prototype.push.apply(d.primitives,c);return d};var p=function(f,c,d){c instanceof Array&&(d=c,c=null);c=F.mixin({},c);c.children=d;c.tag=f;return c};l.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),function(f){b[f]=function(c,d){return p(f,
c,d)}});b.feMerge=function(f,c){if("string"===typeof f){for(var d=[],g=0;g<arguments.length;++g)d.push(b.feMergeNode({"in":arguments[g]}));return p("feMerge",{},d)}return p("feMerge",f,c)};var m=b.createFilter;n.convolutions=[m({_gfxName:"boxBlur3"},[b.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),m({_gfxName:"boxBlur5"},[b.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
m({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[b.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),b.feComponentTransfer({"in":"kernel"},[b.feFuncA({type:"table",tableValues:"1,1"})])]),m({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[b.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),b.feComponentTransfer({"in":"kernel"},[b.feFuncA({type:"table",
tableValues:"1,1"})])]),m({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[b.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),b.feComponentTransfer({"in":"kernel"},[b.feFuncA({type:"table",tableValues:"1,1"})])]),m({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[b.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),b.feComponentTransfer({"in":"kernel"},[b.feFuncA({type:"table",
tableValues:"1,1"})])])];l.forEach(n.convolutions,function(f){F.mixin(f,q)});n.shadows=[m({_gfxName:"fastSmallDropShadow"},[b.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),b.feOffset({dx:3,dy:3,result:"offsetBlur"}),b.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"fastDropShadow"},[b.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
b.feOffset({dx:5,dy:5,result:"offsetBlur"}),b.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"fastDropShadowLight"},[b.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),b.feOffset({dx:5,dy:5,result:"offsetBlur"}),b.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"dropShadow"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),b.feOffset({dx:5,dy:5,result:"offsetBlur"}),b.feMerge("offsetBlur",
"SourceGraphic")]),m({_gfxName:"dropShadowLight"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),b.feComponentTransfer({"in":"blur",result:"lessblur"},[b.feFuncA({type:"linear",slope:.5})]),b.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),b.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"smallDropShadow"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),b.feOffset({dx:2,dy:2,result:"offsetBlur"}),b.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"smallDropShadowLight"},
[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),b.feComponentTransfer({"in":"blur",result:"lessblur"},[b.feFuncA({type:"linear",slope:.5})]),b.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),b.feMerge("offsetBlur","SourceGraphic")])];var a={x:"-10%",y:"-10%",width:"125%",height:"125%"};l.forEach(n.shadows,function(f){F.mixin(f,a)});n.blurs=[m({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[b.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),m({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[b.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),m({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[b.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),m({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[b.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),m({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[b.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),b.feComponentTransfer([b.feFuncA({type:"linear",
slope:10})])])];n.colors=[m({_gfxName:"negate"},[b.feComponentTransfer([b.feFuncR({type:"table",tableValues:"1,0"}),b.feFuncG({type:"table",tableValues:"1,0"}),b.feFuncB({type:"table",tableValues:"1,0"})])]),m({_gfxName:"sepia"},[b.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),b.feComponentTransfer({"in":"grey"},[b.feFuncR({type:"linear",slope:.5,intercept:.5}),b.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"grayscale"},
[b.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),m({_gfxName:"showRed"},[b.feComponentTransfer([b.feFuncG({type:"table",tableValues:"0,0"}),b.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"showGreen"},[b.feComponentTransfer([b.feFuncR({type:"table",tableValues:"0,0"}),b.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"showBlue"},[b.feComponentTransfer([b.feFuncR({type:"table",tableValues:"0,0"}),b.feFuncG({type:"table",
tableValues:"0,0"})])]),m({_gfxName:"hueRotate60"},[b.feColorMatrix({type:"hueRotate",values:60})]),m({_gfxName:"hueRotate120"},[b.feColorMatrix({type:"hueRotate",values:120})]),m({_gfxName:"hueRotate180"},[b.feColorMatrix({type:"hueRotate",values:180})]),m({_gfxName:"hueRotate270"},[b.feColorMatrix({type:"hueRotate",values:270})])];l.forEach(n.colors,function(f){F.mixin(f,q)});n.miscs=[m({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[b.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),b.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),b.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[b.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),b.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),b.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),b.feMerge("offsetBlur","litPaint")]),m({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),b.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),b.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[b.fePointLight({x:-5E3,y:-1E4,z:2E4})]),b.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),b.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),b.feMerge("offsetBlur","litPaint")]),m({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),b.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),b.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[b.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),b.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
b.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),b.feMerge("offsetBlur","litPaint")]),m({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),b.feComponentTransfer({"in":"blur",result:"lessblur"},[b.feFuncA({type:"linear",slope:"0.5"})]),b.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),b.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[b.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),b.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),b.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),b.feMerge("offsetBlur","litPaint")]),m({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),b.feComponentTransfer({"in":"blur",
result:"lessblur"},[b.feFuncA({type:"linear",slope:"0.5"})]),b.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),b.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[b.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),b.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),b.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),b.feMerge("offsetBlur",
"litPaint")]),m({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),b.feComponentTransfer({"in":"blur",result:"lessblur"},[b.feFuncA({type:"linear",slope:"0.5"})]),b.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),b.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[b.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),b.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),b.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),b.feMerge("offsetBlur","litPaint")]),m({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[b.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),b.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),m({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[b.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),b.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),m({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[b.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),b.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),b.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),b.feComponentTransfer({"in":"bb",result:"BendedSource"},[b.feFuncA({type:"linear",slope:10,intercept:"-1"})]),b.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[b.feFuncR({type:"linear",slope:"0",intercept:"0"}),b.feFuncG({type:"linear",slope:"0",intercept:"0"}),b.feFuncB({type:"linear",slope:"0",intercept:"0"}),b.feFuncA({type:"linear",slope:"1",intercept:"0"})]),b.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),b.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[b.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),b.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),b.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),m({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[b.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),m({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[b.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),b.feComponentTransfer({"in":"texture",result:"holes"},[b.feFuncA({type:"discrete",tableValues:"0,1"})]),b.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),m({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[b.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),b.feComponentTransfer({"in":"texture",result:"holes"},[b.feFuncA({type:"discrete",tableValues:"1,0"})]),b.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];n.reliefs=[m({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[b.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),b.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[b.feFuncA({type:"table",tableValues:"1,0"})]),b.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[b.feDistantLight({azimuth:"135",elevation:"60"})]),b.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[b.feDistantLight({azimuth:"135",elevation:"30"})]),b.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),m({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[b.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
b.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[b.feDistantLight({azimuth:"135",elevation:"60"})]),b.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[b.feDistantLight({azimuth:"135",elevation:"30"})]),b.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),m({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[b.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),b.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[b.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),b.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),b.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),m({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),b.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[b.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),b.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),b.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),m({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[b.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
b.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[b.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),b.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),b.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];n.textures=[m({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[b.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
b.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[b.feDistantLight({azimuth:"135",elevation:"60"})]),b.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[b.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),b.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[b.feDistantLight({azimuth:"135",elevation:"60"})]),
b.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[b.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),b.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[b.feDistantLight({azimuth:"135",elevation:"60"})]),b.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[b.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),b.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),b.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),b.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[b.feDistantLight({azimuth:"135",elevation:"60"})]),b.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[b.feDistantLight({azimuth:"135",elevation:"60"})]),b.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),b.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),b.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var e in n)if(n.hasOwnProperty(e)){b[e]={};for(var k=
n[e],h=0;h<k.length;++h)(function(){var f=k[h];b[e][f._gfxName]=function(c){return F.delegate(f,c)}})()}return b})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(F,l,b,q,n){function p(a,e){var k=e.ownerDocument.createElementNS(n.xmlns.svg,a.tag);e.appendChild(k);for(var h in a)h in m||k.setAttribute(h,a[h]);a.children&&l.forEach(a.children,function(f){p(f,k)});return k}b=q.svgext={};var m={primitives:null,tag:null,children:null};
n.Shape.extend({addRenderingOption:function(a,e){this.rawNode.setAttribute(a,e);return this},setFilter:function(a){if(!a)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=a;a.id=a.id||q._base._getUniqueId();var e=F.byId(a.id);if(!e){e=this.rawNode.ownerDocument.createElementNS(n.xmlns.svg,"filter");e.setAttribute("filterUnits","userSpaceOnUse");for(var k in a)k in m||e.setAttribute(k,a[k]);l.forEach(a.primitives,function(h){p(h,e)});(k=this._getParentSurface())&&k.defNode.appendChild(e)}this.rawNode.setAttribute("filter",
"url(#"+a.id+")");return this},getFilter:function(){return this.filter}});return b})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(F,l,b,q,n,p,m,a,e,k){function h(d,g){var t=f(g);t&&F.utils.forEach(d,function(r){if(r instanceof F.Surface||r instanceof F.Group)r.textDir=t;r instanceof F.Text&&r.setShape({textDir:t});r instanceof F.TextPath&&r.setText({textDir:t})},
d);return d}function f(d){var g=["ltr","rtl","auto"];return d&&(d=d.toLowerCase(),0>p.indexOf(g,d))?null:d}l.getObject("dojox.gfx._gfxBidiSupport",!0);switch(F.renderer){case "vml":F.isVml=!0;break;case "svg":F.isSvg=!0;F.svg.useSvgWeb&&(F.isSvgWeb=!0);break;case "silverlight":F.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":F.isCanvas=!0}var c=new k;l.extend(F.shape.Surface,{textDir:"",setTextDir:function(d){h(this,d)},getTextDir:function(){return this.textDir}});l.extend(F.Group,{textDir:"",
setTextDir:function(d){h(this,d)},getTextDir:function(){return this.textDir}});l.extend(F.Text,{textDir:"",formatText:function(d,g){if(g&&d&&1<d.length){var t="ltr",r=g;if("auto"==r){if(F.isVml)return d;r=c.checkContextual(d)}if(F.isVml)return t=c.checkContextual(d),r!=t?"rtl"==r?c.hasBidiChar(d)?"\u200f\u200f"+d:c.bidiTransform(d,"IRNNN","ILNNN"):"\u200e"+d:d;if(F.isSvgWeb)return"rtl"==r?c.bidiTransform(d,"IRNNN","ILNNN"):d;if(F.isSilverlight)return"rtl"==r?c.bidiTransform(d,"IRNNN","VLYNN"):c.bidiTransform(d,
"ILNNN","VLYNN");if(F.isCanvas)return"rtl"==r?"\u202b"+d+"\u202c":"\u202a"+d+"\u202c";if(F.isSvg)return 4>b("ff")?"rtl"==r?c.bidiTransform(d,"IRYNN","VLNNN"):c.bidiTransform(d,"ILYNN","VLNNN"):"\u200e"+("rtl"==r?"\u202b":"\u202a")+d+"\u202c"}return d},bidiPreprocess:function(d){return d}});l.extend(F.TextPath,{textDir:"",formatText:function(d,g){if(g&&d&&1<d.length){var t="ltr",r=g;if("auto"==r){if(F.isVml)return d;r=c.checkContextual(d)}if(F.isVml)return t=c.checkContextual(d),r!=t?"rtl"==r?c.hasBidiChar(d)?
"\u200f\u200f"+d:c.bidiTransform(d,"IRNNN","ILNNN"):"\u200e"+d:d;if(F.isSvgWeb)return"rtl"==r?c.bidiTransform(d,"IRNNN","ILNNN"):d;F.isSvg&&(d=b("opera")||4<=b("ff")?"\u200e"+("rtl"==r?"\u202b":"\u202a")+d+"\u202c":"rtl"==r?c.bidiTransform(d,"IRYNN","VLNNN"):c.bidiTransform(d,"ILYNN","VLNNN"))}return d},bidiPreprocess:function(d){d&&"string"==typeof d&&(this.origText=d,d=this.formatText(d,this.textDir));return d}});m=function(d,g,t,r){var w=d.prototype[g];d.prototype[g]=function(){var v;t&&(v=t.apply(this,
arguments));v=w.call(this,v);r&&(v=r.call(this,v,arguments));return v}};a=function(d){d&&(d.textDir&&(d.textDir=f(d.textDir)),d.text&&d.text instanceof Array&&(d.text=d.text.join(",")));!d||void 0==d.text&&!d.textDir||this.textDir==d.textDir&&d.text==this.origText||(this.origText=void 0!=d.text?d.text:this.origText,d.textDir&&(this.textDir=d.textDir),d.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(d)};m(F.Text,"setShape",a,null);m(F.TextPath,"setText",a,null);a=function(d){(d=
l.clone(d))&&this.origText&&(d.text=this.origText);return d};m(F.Text,"getShape",null,a);m(F.TextPath,"getText",null,a);a=function(d,g){var t;g&&g[0]&&(t=f(g[0]));d.setTextDir(t?t:this.textDir);return d};m(F.Surface,"createGroup",null,a);m(F.Group,"createGroup",null,a);a=function(d){if(d){var g=d.textDir?f(d.textDir):this.textDir;g&&(d.textDir=g)}return d};m(F.Surface,"createText",a,null);m(F.Surface,"createTextPath",a,null);m(F.Group,"createText",a,null);m(F.Group,"createTextPath",a,null);F.createSurface=
function(d,g,t,r){g=F[F.renderer].createSurface(d,g,t);r=f(r);if(F.isSvgWeb)return g.textDir=r?r:n.style(q.byId(d),"direction"),g;if(F.isVml||F.isSvg||F.isCanvas)g.textDir=r?r:n.style(g.rawNode,"direction");F.isSilverlight&&(g.textDir=r?r:n.style(g._nodes[1],"direction"));return g};return F})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h){var f=b.utils={};l.mixin(f,{forEach:function(c,d,g){g=g||F.global;d.call(g,c);(c instanceof b.Surface||c instanceof b.Group)&&n.forEach(c.children,function(t){f.forEach(t,d,g)})},serialize:function(c){var d={},g;if((g=c instanceof b.Surface)||c instanceof b.Group){if(d.children=n.map(c.children,f.serialize),g)return d.children}else d.shape=c.getShape();c.getTransform&&(g=c.getTransform())&&(d.transform=g);c.getStroke&&(g=c.getStroke())&&(d.stroke=g);c.getFill&&(g=c.getFill())&&
(d.fill=g);c.getFont&&(g=c.getFont())&&(d.font=g);return d},toJson:function(c,d){return m.toJson(f.serialize(c),d)},deserialize:function(c,d){if(d instanceof Array)return n.map(d,l.hitch(null,f.deserialize,c));var g="shape"in d?c.createShape(d.shape):c.createGroup();"transform"in d&&g.setTransform(d.transform);"stroke"in d&&g.setStroke(d.stroke);"fill"in d&&g.setFill(d.fill);"font"in d&&g.setFont(d.font);"children"in d&&n.forEach(d.children,l.hitch(null,f.deserialize,g));return g},fromJson:function(c,
d){return f.deserialize(c,m.fromJson(d))},toSvg:function(c){var d=new a;if("svg"===b.renderer)try{var g=f._cleanSvg(f._innerXML(c.rawNode));d.callback(g)}catch(r){d.errback(r)}else{f._initSvgSerializerDeferred||f._initSvgSerializer();var t=f.toJson(c);g=function(){try{var r=c.getDimensions(),w=r.width,v=r.height,z=f._gfxSvgProxy.document.createElement("div");f._gfxSvgProxy.document.body.appendChild(z);p.withDoc(f._gfxSvgProxy.document,function(){q.style(z,"width",w);q.style(z,"height",v)},this);f._gfxSvgProxy[dojox._scopeName].gfx.createSurface(z,
w,v).whenLoaded(null,function(C){try{f._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(C,t);var D=f._cleanSvg(z.innerHTML);C.clear();C.destroy();f._gfxSvgProxy.document.body.removeChild(z);d.callback(D)}catch(y){d.errback(y)}})}catch(C){d.errback(C)}};0<f._initSvgSerializerDeferred.fired?g():f._initSvgSerializerDeferred.addCallback(g)}return d},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){f._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!f._initSvgSerializerDeferred){f._initSvgSerializerDeferred=
new a;var c=p.doc.createElement("iframe");q.style(c,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var d;e("ie")?c.onreadystatechange=function(){"complete"==c.contentWindow.document.readyState&&(c.onreadystatechange=function(){},d=setInterval(function(){c.contentWindow[F.scopeMap.dojo[1]._scopeName]&&c.contentWindow[F.scopeMap.dojox[1]._scopeName].gfx&&c.contentWindow[F.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(d),c.contentWindow.parent[F.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
c.contentWindow,c.contentWindow.parent[F.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:c.onload=function(){c.onload=function(){};d=setInterval(function(){c.contentWindow[F.scopeMap.dojo[1]._scopeName]&&c.contentWindow[F.scopeMap.dojox[1]._scopeName].gfx&&c.contentWindow[F.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(d),c.contentWindow.parent[F.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=c.contentWindow,c.contentWindow.parent[F.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var g=h.dojoxGfxSvgProxyFrameUrl||k.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");c.setAttribute("src",g.toString());p.body().appendChild(c)}},_innerXML:function(c){return c.innerXML?c.innerXML:c.xml?c.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(c):null},_cleanSvg:function(c){c&&(-1==c.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(c=c.substring(4,c.length),c='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+c),-1==c.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(c=c.substring(4,c.length),c='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+c),-1===c.indexOf("xlink:href")&&(c=c.replace(/href\s*=/g,"xlink:href\x3d")),c=c.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),c=c.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),c=c.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),c=c.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),c=c.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return c}});return f})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(F,l,b){function q(ua,Aa,ya,wa,xa){var Ba=ua;void 0===Aa&&(Aa=xa.defInFormat);void 0===ya&&(ya=xa.defOutFormat);void 0===wa&&(wa=xa.defSwap);if(Aa!==ya){var Da=Aa.substring(0,1);var Ka=Aa.substring(1,4);var Ia=ya.substring(0,1),Oa=ya.substring(1,4);"C"===Ka.charAt(0)&&(Ka=n(Ba),Ka="ltr"===Ka||"rtl"===Ka?Ka.toUpperCase():"L"===Aa.charAt(2)?"LTR":"RTL",Aa=Da+Ka);"C"===Oa.charAt(0)&&(Ka=n(Ba),"rtl"===Ka?Oa="RTL":"ltr"===Ka?(Ba=Ba.split(""),Ba.reverse(),Ka=
n(Ba.join("")),Oa=Ka.toUpperCase()):Oa="L"===ya.charAt(2)?"LTR":"RTL",ya=Ia+Oa)}if(Aa===ya)return ua;Ia=Aa.substring(0,1);Ba=Aa.substring(1,4);Da=ya.substring(0,1);Oa=ya.substring(1,4);xa.inFormat=Aa;xa.outFormat=ya;xa.swap=wa;if("L"===Ia&&"VLTR"===ya){if("LTR"===Ba)return xa.dir=u,p(ua,xa);if("RTL"===Ba)return xa.dir=B,p(ua,xa)}if("V"===Ia&&"V"===Da)return xa.dir="RTL"===Ba?B:u,a(ua,xa);if("L"===Ia&&"VRTL"===ya)return xa.dir="LTR"===Ba?u:B,ua=p(ua,xa),a(ua);if("VLTR"===Aa&&"LLTR"===ya)return xa.dir=
u,p(ua,xa);if("V"===Ia&&"L"===Da&&Ba!==Oa)return ua=a(ua),"RTL"===Ba?q(ua,"LLTR","VLTR",wa,xa):q(ua,"LRTL","VRTL",wa,xa);if("VRTL"===Aa&&"LRTL"===ya)return q(ua,"LRTL","VRTL",wa,xa);if("L"===Ia&&"L"===Da)return Aa=xa.swap,xa.swap=Aa.substr(0,1)+"N","RTL"===Ba?(xa.dir=B,ua=p(ua,xa),xa.swap="N"+Aa.substr(1,2),xa.dir=u,ua=p(ua,xa)):(xa.dir=u,ua=p(ua,xa),xa.swap="N"+Aa.substr(1,2),ua=q(ua,"VLTR","LRTL",xa.swap,xa)),ua}function n(ua){return(ua=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(ua))?
"z">=ua[0]?"ltr":"rtl":""}function p(ua,Aa){var ya=ua.split(""),wa=[];m(ya,wa,Aa);if(0!==Aa.hiLevel&&Aa.swap.substr(0,1)!==Aa.swap.substr(1,2))for(var xa=0;xa<ya.length;xa++)if(1===wa[xa]){var Ba=xa;b:{var Da=void 0;for(var Ka=ya[xa],Ia=0,Oa=E.length-1;Ia<=Oa;)if(Da=Math.floor((Ia+Oa)/2),Ka<E[Da][0])Oa=Da-1;else if(Ka>E[Da][0])Ia=Da+1;else{Da=E[Da][1];break b}Da=Ka}ya[Ba]=Da}h(2,ya,wa,Aa);h(1,ya,wa,Aa);z=wa;return ya.join("")}function m(ua,Aa,ya){var wa=ua.length,xa=ya.dir?oa:ja,Ba=null,Da=null,Ka=
null;Ba=0;Da=Da=null;var Ia=-1,Oa=Da=null,Ea=[],La=[];ya.hiLevel=ya.dir;ya.lastArabic=!1;ya.hasUbatAl=!1;ya.hasUbatB=!1;ya.hasUbatS=!1;for(Da=0;Da<wa;Da++){Oa=Da;Ka=ua[Da].charCodeAt(0);var Ma=Na[Ka>>8];Ea[Oa]=Ma<da?Ma:Ra[Ma-da][Ka&255]}for(Oa=0;Oa<wa;Oa++){La[Oa]=Da=f(ua,Ea,La,Oa,ya);Ba=xa[Ba][Da];Da=Ba&240;Ba&=15;Aa[Oa]=Ka=xa[Ba][D];if(0<Da){if(16===Da)for(Da=Ia;Da<Oa;Da++)Aa[Da]=1;Ia=-1}if(Da=xa[Ba][y])-1===Ia&&(Ia=Oa);else if(-1<Ia){for(Da=Ia;Da<Oa;Da++)Aa[Da]=Ka;Ia=-1}Ea[Oa]===va&&(Aa[Oa]=0);
ya.hiLevel|=Ka}if(ya.hasUbatS)for(ua=0;ua<wa;ua++)if(Ea[ua]===Fa)for(Aa[ua]=ya.dir,xa=ua-1;0<=xa;xa--)if(Ea[xa]===Ca)Aa[xa]=ya.dir;else break}function a(ua,Aa){var ya=ua.split("");if(Aa){var wa=[];m(ya,wa,Aa);z=wa}ya.reverse();w.reverse();return ya.join("")}function e(ua){for(var Aa=0;Aa<ka.length;Aa++)if(ua>=ka[Aa]&&ua<=aa[Aa])return!0;return!1}function k(ua,Aa,ya,wa){for(;Aa*ya<wa&&d(ua[Aa]);)Aa+=ya;return Aa*ya<wa&&e(ua[Aa])?!0:!1}function h(ua,Aa,ya,wa){if(!(wa.hiLevel<ua))if(1!==ua||wa.dir!==
B||wa.hasUbatB){wa=Aa.length;for(var xa=0,Ba,Da,Ka;xa<wa;){if(ya[xa]>=ua){for(Ba=xa+1;Ba<wa&&ya[Ba]>=ua;)Ba++;for(Da=Ba-1;xa<Da;xa++,Da--)Ka=Aa[xa],Aa[xa]=Aa[Da],Aa[Da]=Ka,Ka=w[xa],w[xa]=w[Da],w[Da]=Ka;xa=Ba}xa++}}else Aa.reverse(),w.reverse()}function f(ua,Aa,ya,wa,xa){return{UBAT_L:function(){xa.lastArabic=!1;return U},UBAT_R:function(){xa.lastArabic=!1;return ea},UBAT_ON:function(){return ra},UBAT_AN:function(){return pa},UBAT_EN:function(){return xa.lastArabic?pa:fa},UBAT_AL:function(){xa.lastArabic=
!0;xa.hasUbatAl=!0;return ea},UBAT_WS:function(){return ra},UBAT_CS:function(){var Ba,Da;if(1>wa||wa+1>=Aa.length||(Ba=ya[wa-1])!==fa&&Ba!==pa||(Da=Aa[wa+1])!==fa&&Da!==pa)return ra;xa.lastArabic&&(Da=pa);return Da===Ba?Da:ra},UBAT_ES:function(){return(0<wa?ya[wa-1]:va)===fa&&wa+1<Aa.length&&Aa[wa+1]===fa?fa:ra},UBAT_ET:function(){if(0<wa&&ya[wa-1]===fa)return fa;if(xa.lastArabic)return ra;for(var Ba=wa+1,Da=Aa.length;Ba<Da&&Aa[Ba]===T;)Ba++;return Ba<Da&&Aa[Ba]===fa?fa:ra},UBAT_NSM:function(){if("VLTR"===
xa.inFormat){for(var Ba=Aa.length,Da=wa+1;Da<Ba&&Aa[Da]===ia;)Da++;if(Da<Ba&&(Ba=ua[wa],Da=Aa[Da],(1425<=Ba&&2303>=Ba||64286===Ba)&&(Da===ea||Da===Ha)))return ea}return 1>wa||Aa[wa-1]===va?ra:ya[wa-1]},UBAT_B:function(){xa.lastArabic=!0;xa.hasUbatB=!0;return xa.dir},UBAT_S:function(){xa.hasUbatS=!0;return ra},UBAT_LRE:function(){xa.lastArabic=!1;return ra},UBAT_RLE:function(){xa.lastArabic=!1;return ra},UBAT_LRO:function(){xa.lastArabic=!1;return ra},UBAT_RLO:function(){xa.lastArabic=!1;return ra},
UBAT_PDF:function(){xa.lastArabic=!1;return ra},UBAT_BN:function(){return ra}}[qa[Aa[wa]]]()}function c(ua,Aa){for(var ya=0;ya<X.length;ya++)if(ua===X[ya])return Aa[ya];return ua}function d(ua){return"\u064b"<=ua&&"\u0655">=ua?!0:!1}function g(ua){if("L"===ua)return"LTR";if("R"===ua)return"RTL";if("C"===ua)return"CLR";if("D"===ua)return"CRL"}function t(ua,Aa){for(var ya=0;ya<J.length;ya++)if(ua===J[ya])return Aa[ya];return ua}function r(ua,Aa,ya,wa){for(var xa=0;xa<ua.length;xa++)if(ua[xa]>Aa||!ya&&
ua[xa]===Aa)ua[xa]+=wa}F.getObject("string",!0,dojox);F=l("dojox.string.BidiEngine",b,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(ua,Aa,ya){this.sourceToTarget=[];this.targetToSource=[];if(!ua)return"";var wa=this.sourceToTarget,xa=this.targetToSource,Ba=ua.length;w=[];z=[];for(var Da=0;Da<Ba;Da++)wa[Da]=Da,xa[Da]=Da,w[Da]=Da;if(!this.checkParameters(Aa,ya))return ua;Aa=this.inputFormat;ya=this.outputFormat;wa=ua;wa=C;Da=g(Aa.charAt(1));
xa=g(ya.charAt(1));var Ka="I"===Aa.charAt(0)?"L":Aa.charAt(0);Ba="I"===ya.charAt(0)?"L":ya.charAt(0);Da=Ka+Da;xa=Ba+xa;Ba=Aa.charAt(2)+ya.charAt(2);wa.defInFormat=Da;wa.defOutFormat=xa;wa.defSwap=Ba;ua=q(ua,Da,xa,Ba,wa);wa=!1;if("R"===ya.charAt(1))wa=!0;else if("C"===ya.charAt(1)||"D"===ya.charAt(1))wa=this.checkContextual(ua);xa=this.sourceToTarget=w;Ba=Array(xa.length);for(Da=0;Da<xa.length;Da++)Ba[xa[Da]]=Da;v=this.targetToSource=Ba;if(Aa.charAt(3)===ya.charAt(3))wa=ua;else if("S"===ya.charAt(3))if(Aa=
wa,ya=!0,0===ua.length)wa=void 0;else{void 0===Aa&&(Aa=!0);void 0===ya&&(ya=!0);ua=String(ua);ua=ua.split("");var Ia=0;xa=1;wa=ua.length;Aa||(Ia=ua.length-1,xa=-1,wa=1);Ba=wa;Da=ya;var Oa=0;wa=[];for(Ka=0;Ia*xa<Ba;Ia+=xa)if(e(ua[Ia])||d(ua[Ia])){var Ea;if(Ea="\u0644"===ua[Ia])b:{for(var La=ua,Ma=Ia+xa,Pa=xa,ab=Ba;Ma*Pa<ab&&d(La[Ma]);)Ma+=Pa;Ea=" ";if(Ma*Pa<ab)for(Ea=La[Ma],La=0;La<J.length;La++)if(J[La]===Ea){Ea=!0;break b}Ea=!1}if(Ea){ua[Ia]=0===Oa?t(ua[Ia+xa],O):t(ua[Ia+xa],S);Ia+=xa;Oa=ua;Ea=Ia;
La=xa;for(Ma=Ba;Ea*La<Ma&&d(Oa[Ea]);)Ea+=La;Ea*La<Ma&&(Oa[Ea]=" ");Da&&(wa[Ka]=Ia,Ka++);Oa=0}else{Ea=ua[Ia];if(1===Oa){La=Ia;if(k(ua,Ia+xa,xa,Ba))b:for(Ma=ua[Ia],Pa=0;Pa<X.length;Pa++){if(Ma===X[Pa]){Ma=P[Pa];break b}}else Ma=c(ua[Ia],K);ua[La]=Ma}else!0===k(ua,Ia+xa,xa,Ba)?ua[Ia]=c(ua[Ia],Q):ua[Ia]=c(ua[Ia],Y);d(Ea)||(Oa=1);b:{for(La=0;La<ba.length;La++)if(ba[La]===Ea){Ea=!0;break b}Ea=!1}!0===Ea&&(Oa=0)}}else Oa=0;xa="";for(Ba=0;Ba<ua.length;Ba++){if(Da=ya){b:{for(Da=0;Da<wa.length;Da++)if(wa[Da]===
Ba)break b;Da=-1}Da=-1<Da}Da?(r(v,Ba,!Aa,-1),w.splice(Ba,1)):xa+=ua[Ba]}wa=xa}else if(Aa=ua,ya=wa,ua=!0,0===Aa.length)wa=void 0;else for(void 0===ua&&(ua=!0),void 0===ya&&(ya=!0),Aa=String(Aa),wa="",xa=[],xa=Aa.split(""),Ba=0;Ba<Aa.length;Ba++)Da=!1,"\ufe70"<=xa[Ba]&&"\ufeff">xa[Ba]?(Ka=Aa.charCodeAt(Ba),"\ufef5"<=xa[Ba]&&"\ufefc">=xa[Ba]?(ya?(0<Ba&&ua&&" "===xa[Ba-1]?wa=wa.substring(0,wa.length-1)+"\u0644":(wa+="\u0644",Da=!0),wa+=J[(Ka-65269)/2]):(wa+=J[(Ka-65269)/2],wa+="\u0644",Ba+1<Aa.length&&
ua&&" "===xa[Ba+1]?Ba++:Da=!0),Da&&(r(v,Ba,!0,1),w.splice(Ba,0,w[Ba]))):wa+=ca[Ka-65136]):wa+=xa[Ba];this.sourceToTarget=w;this.targetToSource=v;this.levels=z;return wa},_inputFormatSetter:function(ua){if(!x.test(ua))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=ua},_outputFormatSetter:function(ua){if(!x.test(ua))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=ua},checkParameters:function(ua,Aa){ua?this.set("inputFormat",
ua):ua=this.inputFormat;Aa?this.set("outputFormat",Aa):Aa=this.outputFormat;return ua===Aa?!1:!0},checkContextual:function(ua){ua=n(ua);if("ltr"!==ua&&"rtl"!==ua){try{ua=document.dir.toLowerCase()}catch(Aa){}"ltr"!==ua&&"rtl"!==ua&&(ua="ltr")}return ua},hasBidiChar:function(ua){return A.test(ua)}});var w=[],v=[],z=[],C={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},D=5,y=6,u=0,
B=1,x=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,A=/[\u0591-\u06ff\ufb1d-\ufefc]/,E=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d",
"\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],J=["\u0622","\u0623","\u0625","\u0627"],O=["\ufef5","\ufef7","\ufef9","\ufefb"],S=["\ufef6","\ufef8","\ufefa","\ufefc"],X="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),Y="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
K="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),P="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
Q="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),ba="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),ca="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
ka=["\u0621","\u0641"],aa=["\u063a","\u064a"],ja=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],oa=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],U=0,ea=1,fa=2,pa=3,ra=4,va=5,Fa=6,Ha=7,Ca=8,T=11,ia=12,qa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),da=100;l=U;b=ea;var Z=fa,ma=pa,I=ra,M=va,W=Fa,H=Ha,na=Ca,
sa=T,la=ia,Na=[da+0,l,l,l,l,da+1,da+2,da+3,b,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,da+4,I,I,I,l,I,l,I,l,I,I,I,l,l,I,I,l,l,l,l,l,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,l,l,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,l,l,I,I,l,l,I,I,l,l,I,I,I,I,I,I,I,I,I,I,I,
I,I,I,I,I,I,I,I,I,I,I,I,l,l,l,da+5,H,H,da+6,da+7],Ra=[[18,18,18,18,18,18,18,18,18,W,M,W,na,M,18,18,18,18,18,18,18,18,18,18,18,18,18,18,M,M,M,W,na,I,I,sa,sa,sa,I,I,I,I,I,10,9,10,9,9,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,9,I,I,I,I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,I,I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,I,I,18,18,18,18,18,18,M,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,I,sa,sa,sa,sa,I,I,I,I,l,I,I,18,I,I,sa,sa,Z,Z,I,l,I,I,I,Z,l,I,I,
I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,I,I,I,I,I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,l,l,l,l,l,l,l,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,l,I,I,I,I,I,I,I,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,
la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,b,la,b,la,la,b,la,la,b,la,I,I,I,I,I,I,I,I,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,I,I,I,I,I,b,b,b,b,b,I,I,I,I,I,I,I,I,I,I,I],[ma,ma,ma,ma,I,I,I,I,H,sa,sa,H,9,H,I,I,la,la,la,la,la,la,la,la,la,la,la,H,I,I,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,ma,ma,ma,ma,ma,ma,ma,ma,ma,ma,sa,ma,ma,H,H,H,la,H,H,H,H,H,H,H,H,H,H,H,H,
H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,la,la,la,la,la,la,la,ma,I,la,la,la,la,la,la,H,H,la,la,I,la,la,la,la,H,H,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,H,H,H,H,H,H],[H,H,H,H,H,H,H,H,H,H,H,H,H,H,I,H,H,la,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,I,I,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,
H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,la,la,la,la,la,la,la,la,la,la,la,H,I,I,I,I,I,I,I,I,I,I,I,I,I,I,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,la,la,la,la,la,la,la,la,la,b,b,I,I,I,I,b,I,I,I,I,I],[na,na,na,na,na,na,na,na,na,na,na,18,18,18,l,b,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,na,M,13,14,15,16,17,9,sa,sa,sa,sa,sa,I,I,I,I,I,I,I,I,I,I,I,I,I,
I,I,9,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,na,18,18,18,18,18,I,I,I,I,I,18,18,18,18,18,18,Z,l,I,I,Z,Z,Z,Z,Z,Z,10,10,I,I,I,l,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,10,10,I,I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,I,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[l,l,l,l,l,l,l,I,I,I,I,I,I,I,I,I,I,I,I,l,l,l,
l,l,I,I,I,I,I,b,la,b,b,b,b,b,b,b,b,b,b,10,b,b,b,b,b,b,b,b,b,b,b,b,b,I,b,b,b,b,b,I,b,I,b,b,I,b,b,I,b,b,b,b,b,b,b,b,b,b,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H],[la,la,la,la,la,la,la,la,la,la,
la,la,la,la,la,la,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,la,la,la,la,la,la,la,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,9,I,9,I,I,9,I,I,I,I,I,I,I,I,I,sa,I,I,10,10,I,I,I,I,I,sa,sa,I,I,I,I,I,H,H,H,H,H,I,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,
H,I,I,18],[I,I,I,sa,sa,sa,I,I,I,I,I,10,9,10,9,9,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,9,I,I,I,I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,I,I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,I,I,I,I,I,I,I,I,I,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,I,I,I,l,l,l,l,l,l,I,I,l,l,l,l,l,l,I,I,l,l,l,l,l,l,I,I,l,l,l,I,I,I,sa,sa,I,I,I,sa,sa,I,I,I,I,I,I,I,I,I,I,
I,I,I,I,I,I,I,I,I,I,I,I,I,I,I]];return F})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(F,l,b){F.DeferredList=function(q,n,p,m,a){var e=[];l.call(this);var k=this;0!==q.length||n||this.resolve([0,[]]);var h=0;b.forEach(q,function(f,c){function d(g,t){e[c]=[g,t];h++;h===q.length&&k.resolve(e)}f.then(function(g){n?k.resolve([c,g]):d(!0,g)},function(g){p?k.reject(g):d(!1,g);if(m)return null;throw g;})})};F.DeferredList.prototype=new l;F.DeferredList.prototype.gatherResults=
function(q){q=new F.DeferredList(q,!1,!0,!1);q.addCallback(function(n){var p=[];b.forEach(n,function(m){p.push(m[1])});return p});return q};return F.DeferredList})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(F,l,b){F=function(){return this}();var q=F.location,n=q.pathname;b=q.protocol;q={version:"3.41",_appBaseUrl:b+"//"+q.host+n.substring(0,n.lastIndexOf(n.split("/")[n.split("/").length-1]))};l.noGlobals||(F.esri=q);(q.dijit=q.dijit||{})._arcgisUrl=
("http:"===b||"https:"===b?b:"http:")+"//www.arcgis.com/sharing/rest";return q})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(F,l,b,q){b=function(){return this}();var n={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},
sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:b.Worker&&!1,io:{errorHandler:function(p,m){l.publish("esri.Error",[p])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com",
"www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com",
"cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com",
"servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:b.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};q.config=n;F.noGlobals||(b.esriConfig=n);return n})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(F,l,b,q,n,p,m,a,e){function k(w,v,z,C){(v=v&&v[w])?v={formatType:v.formatType,options:v}:C&&-1!==F.indexOf(C.properties||"",w)?v={formatType:C.formatter||"DateString",options:null}:z&&-1!==F.indexOf(z.properties||
"",w)&&(v={formatType:z.formatter||"NumberFormat",options:null});return v}function h(w,v,z){return[q.isString(w)?w.split(""):w,v||b.global,q.isString(z)?new Function("item","index","array",z):z]}function f(w){return void 0!==w&&null!==w}function c(w){return f(w)?w:""}function d(w,v,z,C){var D=z.match(/([^\(]+)(\([^\)]+\))?/i);z=q.trim(D[1]);var y=D[2]?q.trim(D[2]):null;D=v[w];C=C||(y?l.fromJson(y.replace(/^\(/,"({").replace(/\)$/,"})")):{});y=C.utcOffset;if(-1===F.indexOf(t,z))z=q.getObject(z),q.isFunction(z)&&
(D=z(D,w,v,C));else if("number"===typeof D||"string"===typeof D&&D&&!isNaN(Number(D)))switch(D=Number(D),z){case "NumberFormat":return m.format(D,C);case "DateString":w=new Date(D);if(C.local||C.systemLocale)return C.systemLocale?w.toLocaleDateString()+(C.hideTime?"":" "+w.toLocaleTimeString()):w.toDateString()+(C.hideTime?"":" "+w.toTimeString());w=w.toUTCString();C.hideTime&&(w=w.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return w;case "DateFormat":return w=new Date(D),f(y)&&(w=n.add(w,"minute",
w.getTimezoneOffset()-y)),a.format(w,C)}return c(D)}function g(w,v){var z;if(v)for(z in w)w.hasOwnProperty(z)&&(void 0===w[z]?delete w[z]:w[z]instanceof Object&&g(w[z],!0));else for(z in w)w.hasOwnProperty(z)&&void 0===w[z]&&delete w[z];return w}var t=["NumberFormat","DateString","DateFormat"],r=/<\/?[^>]+>/g;p={valueOf:function(w,v){for(var z in w)if(w[z]==v)return z;return null},stripTags:function(w){if(w){var v=typeof w;if("string"===v)w=w.replace(r,"");else if("object"===v)for(var z in w)(v=w[z])&&
"string"===typeof v&&(v=v.replace(r,"")),w[z]=v}return w},substitute:function(w,v,z){if(f(z))if(q.isObject(z)){var C=z.first;var D=z.dateFormat;var y=z.numberFormat;var u=z.format}else C=z;if(v&&"${*}"!==v)return q.replace(v,q.hitch({obj:w},function(x,A){var E=A.split(":"),J;return 1<E.length?(A=E[0],E.shift(),(J=u&&u[E[0]])?E=J.formatType:(E=E.join(":"),J=null),d(A,this.obj,E,J)):(J=k(A,u,y,D))?d(A,this.obj,J.formatType,J.options):c(this.obj[A])}),/\$\{([^\}]+)\}/g);v=[];for(var B in w)if(z=(z=k(B,
u,y,D))?d(B,w,z.formatType,z.options):w[B],v.push(B+" \x3d "+c(z)+"\x3cbr/\x3e"),C)break;return v.join("")},filter:function(w,v,z){v=h(w,z,v);z={};var C;w=v[0];for(C in w)v[2].call(v[C],w[C],C,w)&&(z[C]=w[C]);return z},startsWith:function(w,v,z){z=z||0;return w.indexOf(v,z)===z},endsWith:function(w,v,z){if("number"!==typeof z||!isFinite(z)||Math.floor(z)!==z||z>w.length)z=w.length;z-=v.length;w=w.indexOf(v,z);return-1!==w&&w===z},isDefined:f,fixJson:g,isObject:function(w){return w&&"object"===typeof w},
isString:function(w){return"string"===typeof w},mixin:function(w,v){for(var z in v)v.hasOwnProperty(z)&&(w[z]=v[z]);return w},clone2DArray:function(w){if(w=w?w.slice(0):null){var v,z=w.length;for(v=0;v<z;v++)w[v]=w[v]?w[v].slice(0):null}return w},clone3DArray:function(w){if(w=w?w.slice(0):null){var v,z=w.length;for(v=0;v<z;v++){w[v]=w[v]?w[v].slice(0):null;var C=w[v];if(C){var D,y=C.length;for(D=0;D<y;D++)C[D]=C[D]?C[D].slice(0):null}}}return w}};q.mixin(e,p);e._isDefined=f;e._getParts=h;e._sanitize=
g;return p})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(F,l,b,q,n){var p={show:function(m){if(m=p.getNode(m))m.style.display="block"},getNode:function(m){return m&&m.domNode||m},hide:function(m){if(m=p.getNode(m))m.style.display="none"},toggle:function(m){if(m=p.getNode(m))m.style.display="none"===m.style.display?"block":"none"},documentBox:8>=n("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:
{w:window.innerWidth,h:window.innerHeight},setScrollable:function(m){if(m=this.getNode(m)){var a=0,e=0,k=0,h=0,f=0,c=0;return[l.connect(m,"ontouchstart",function(d){a=d.touches[0].screenX;e=d.touches[0].screenY;k=m.scrollWidth;h=m.scrollHeight;f=m.clientWidth;c=m.clientHeight}),l.connect(m,"ontouchmove",function(d){d.preventDefault();var g=m.firstChild;g instanceof Text&&(g=m.childNodes[1]);var t=g._currentX||0,r=g._currentY||0;t+=d.touches[0].screenX-a;0<t?t=0:0>t&&Math.abs(t)+f>k&&(t=-1*(k-f));
g._currentX=t;r+=d.touches[0].screenY-e;0<r?r=0:0>r&&Math.abs(r)+c>h&&(r=-1*(h-c));g._currentY=r;q.set(g,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+t+"px, "+r+"px)"});a=d.touches[0].screenX;e=d.touches[0].screenY})]}}};b.mixin(F,p);return p})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(F,l,b,q,n,p,m,a,e,k){var h={},f=
a.defaults.io,c=/^[a-z][a-z0-9\+\-\.]*:/i,d=/^\s*http:/i,g=/^\s*https:/i,t=/:\d+$/,r=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;h.isHTTP=function(v){var z=q.location.protocol;return null==v?"http:"===z||"https:"===z:v?"https:"===z:"http:"===z};h.getProtocolForWebResource=function(v){return h.isHTTP()?q.location.protocol:v?"https:":"http:"};h.urlToObject=function(v){var z={},C=new b(v),D=v.indexOf("?");null===C.query?z={path:v,query:null}:(z.path=v.substring(0,D),z.query=n.queryToObject(C.query));
C.fragment&&(z.hash=C.fragment,null===C.query&&(z.path=z.path.substring(0,z.path.length-(C.fragment.length+1))));return z};h.getProxyUrl=function(v,z){var C=F.isString(v)?0===F.trim(v).toLowerCase().indexOf("https:"):v,D=f.proxyUrl,y,u=k.io.proxyNotSet;F.isString(v)&&(y=h.getProxyRule(v))&&(D=y.proxyUrl);if(!D)throw Error(u);if(C&&!1!==z&&0!==q.location.href.toLowerCase().indexOf("https:")&&(C=D,0!==C.toLowerCase().indexOf("http")&&(C=h.getAbsoluteUrl(C)),C=C.replace(/^http:/i,"https:"),h.canUseXhr(C))){D=
C;var B=1}D=h.urlToObject(D);D._xo=B;return D};h.addProxy=function(v){var z=h.getProxyRule(v),C;z?C=h.urlToObject(z.proxyUrl):f.alwaysUseProxy&&(C=h.getProxyUrl());C&&(z=h.urlToObject(v),v=C.path+"?"+z.path,(C=n.objectToQuery(F.mixin(C.query||{},z.query)))&&(v+="?"+C));return v};h.addProxyRule=function(v){var z=v.urlPrefix=h.urlToObject(v.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),C=f.proxyRules,D,y=C.length,u=y;for(D=0;D<y;D++){var B=C[D].urlPrefix;if(0===
z.indexOf(B)){if(z.length===B)return-1;u=D;break}else 0===B.indexOf(z)&&(u=D+1)}C.splice(u,0,v);return u};h.getProxyRule=function(v){var z=f.proxyRules,C=z.length,D=h.urlToObject(v).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(v=0;v<C;v++)if(0===D.indexOf(z[v].urlPrefix)){var y=z[v];break}return y};h.hasSameOrigin=function(v,z,C){v=v.toLowerCase();z=z.toLowerCase();var D=q.location.href.toLowerCase();v=0===v.indexOf("http")?new b(v):D=new b(D);z=0===z.indexOf("http")?
new b(z):F.isString(D)?new b(D):D;return(C||v.scheme===z.scheme)&&v.host===z.host&&v.port===z.port};h.canUseXhr=function(v,z){var C=e("esri-phonegap")?!0:!1,D=h.hasSameOrigin,y=f.corsEnabledServers,u,B=-1;!C&&e("esri-cors")&&y&&y.length&&(C=l.some(y,function(x,A){var E=!x||"object"!==typeof x||x instanceof RegExp?x:x.host;if(E instanceof RegExp){if(E.test(v))return B=A,!0}else if(E&&(u=0!==E.trim().toLowerCase().indexOf("http"),D(v,u?"http://"+E:E)||u&&D(v,"https://"+E)))return B=A,!0;return!1}));
return z?B:C};h.getAbsoluteUrl=function(v){var z=h.getProtocolForWebResource();return F.isString(v)&&!c.test(v)?0===v.indexOf("//")?z+v:0===v.indexOf("/")?z+"//"+q.location.host+v:p._appBaseUrl+v:v};h.fixUrl=function(v){v=F.trim(v);v=h.getAbsoluteUrl(v);v=h.normalizeSlashes(v);v=v.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");v=h.downgradeToHTTP(v);return v=h.upgradeToHTTPS(v)};h.normalize=function(v){return h.fixUrl(v)};h.normalizeSlashes=function(v){if(/^https?:\/\//i.test(v)){var z=v.indexOf("?");
if(-1<z){var C=v.slice(0,z);var D=v.slice(z+1)}else C=v;v=C.replace(/\/{2,}/g,"/");v=v.replace("/","//");D&&(v+="?"+D)}return v};h.downgradeToHTTP=function(v){return h.isHTTP(!1)&&g.test(v)&&h.hasSameOrigin(q.location.href,v,!0)&&!h.canUseXhr(v)?v.replace(g,"http:"):v};h.upgradeToHTTPS=function(v){var z=f.httpsDomains,C=h.isHTTP(!1),D=h.isHTTP(!0);if(!d.test(v))return v;v=F.trim(v);var y=v.indexOf("/",7);y=-1===y?v:v.slice(0,y);y=y.toLowerCase().slice(7);if(t.test(y))if(m.endsWith(y,":80"))y=y.slice(0,
-3),v=v.replace(":80","");else return v;if(C&&y===q.location.host&&(!r.test(v)||!h.canUseXhr(v)))return v;C=!1;if(D&&y===q.location.host)C=!0;else if(z)for(var u=0;u<z.length;u++){var B=z[u];if(y===B||m.endsWith(y,"."+B)){C=!0;break}}C||!D||f.alwaysUseProxy||h.getProxyRule(v)||(C=!0);C&&(v=v.replace(d,"https:"));return v};a=k.widgets.popup;var w=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:a.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:a.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:a.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:a.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:a.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:a.NLS_openLinkInApp}];h.getURIInfo=function(v){var z;l.some(w,function(C){C.pattern.test(v)&&(z=C);return!!z});return z};h.isKnownURI=function(v){return!!h.getURIInfo(v)};h.base64UrlEncode=function(v){return btoa(String.fromCharCode.apply(null,v)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};F.mixin(p,h);p._getProxyUrl=h.getProxyUrl;p._getProxiedUrl=h.addProxy;p._hasSameOrigin=h.hasSameOrigin;p._canDoXOXHR=h.canUseXhr;p._getAbsoluteUrl=h.getAbsoluteUrl;
p.fixUrl=h.fixUrl;return h})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(F,l,b){var q=F("ff"),n=F("ie"),p=void 0===n&&7<=F("trident"),m=F("edge"),a=F("webkit"),e=F("opera"),k=F("chrome"),h=F("safari"),f=navigator.userAgent,c;(c=f.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&F.add("esri-iphone",parseFloat(c[2].replace("_",".")));(c=f.match(/Android\s+(\d+(\.\d+)*)/i))&&F.add("esri-android",parseFloat(c[1]));(c=f.match(/Fennec\/(\d+\.\d+)/i))&&F.add("esri-fennec",
parseFloat(c[1]));0<=f.indexOf("BlackBerry")&&0<=f.indexOf("WebKit")&&F.add("esri-blackberry",1);F.add("esri-touch",F("esri-iphone")||F("esri-android")||F("esri-blackberry")||6<=F("esri-fennec")||(q||a)&&(document.createTouch||"ontouchstart"in l||l.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(c=f.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&F.add("esri-mobile",!!c);F.add("esri-pointer",!q&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!l.PointerEvent));b._getDOMAccessor=
function(g){var t="";q?t="Moz":a?t="Webkit":n?t="ms":e&&(t="O");return t+g.charAt(0).toUpperCase()+g.substr(1)};F.add("esri-phonegap",!!l.cordova);F.add("esri-cors",F("esri-phonegap")||l.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);F.add("esri-file-upload",l.FormData&&l.FileList?!0:!1);F.add("esri-script-sandbox",function(){return"MessageChannel"in l&&"HTMLIFrameElement"in l&&"sandbox"in HTMLIFrameElement.prototype});F.add("esri-secure-context",function(){if("isSecureContext"in l)return l.isSecureContext;
if(l.location&&l.location.origin)return 0===l.location.origin.indexOf("https:")});F.add("esri-wasm","WebAssembly"in l);F.add("esri-workers",l.Worker?!0:!1);F.add("esri-featurelayer-webgl",!1);if(f=F("esri-featurelayer-webgl")){var d=F("esri-mobile");c=d?1:2;d=d?1:3;"object"===typeof f?(f.maxDrillLevel=null==f.maxDrillLevel?c:f.maxDrillLevel,f.maxRecordCountFactor=null==f.maxRecordCountFactor?d:f.maxRecordCountFactor,f.enablePBFQuery=null==f.enablePBFQuery?!0:f.enablePBFQuery):F.add("esri-featurelayer-webgl",
{maxDrillLevel:c,maxRecordCountFactor:d,enablePBFQuery:!0},null,!0)}F.add("esri-featurelayer-webgl-labeling",!1);F.add("esri-pbf",!n||10<=n);F.add("esri-featurelayer-pbf",!0);F.add("esri-transforms",p||m||9<=n||3.5<=q||4<=k||3.1<=h||10.5<=e||3.2<=F("esri-iphone")||2.1<=F("esri-android"));F.add("esri-transitions",p||m||10<=n||4<=q||4<=k||3.1<=h||10.5<=e||3.2<=F("esri-iphone")||2.1<=F("esri-android"));F.add("esri-transforms3d",p||m||10<=q||12<=k||4<=h||3.2<=F("esri-iphone")||3<=F("esri-android"));F.add("esri-url-encodes-apostrophe",
function(){if(!l.document)return!1;var g=l.document.createElement("a");g.href="?'";return-1<g.href.indexOf("?%27")});3>F("esri-android")&&(F.add("esri-transforms",!1,!1,!0),F.add("esri-transitions",!1,!1,!0),F.add("esri-transforms3d",!1,!1,!0));F.add("esri-will-change",F("esri-transforms")&&(52<=k||11.1<=h));b._css=function(g){var t=F("esri-transforms3d");void 0!==g&&null!==g?t=g:t&&(k||h&&!F("esri-iphone"))&&(t=!1);var r=t?"translate3d(":"translate(",w=t?k?",-1px)":",0px)":")",v=t?"scale3d(":"scale(",
z=t?",1)":")",C=t?"rotate3d(0,0,1,":"rotate(",D=t?"matrix3d(":"matrix(",y=t?",0,0,":",",u=t?",0,0,0,0,1,0,":",",B=t?",0,1)":")";return{names:{transition:a&&"-webkit-transition"||q&&"MozTransition"||e&&"OTransition"||n&&"msTransition"||"transition",transform:a&&"-webkit-transform"||q&&"MozTransform"||e&&"OTransform"||n&&"msTransform"||"transform",transformName:a&&"-webkit-transform"||q&&"-moz-transform"||e&&"-o-transform"||n&&"-ms-transform"||"transform",origin:a&&"-webkit-transform-origin"||q&&"MozTransformOrigin"||
e&&"OTransformOrigin"||n&&"msTransformOrigin"||"transformOrigin",endEvent:a&&"webkitTransitionEnd"||q&&"transitionend"||e&&"oTransitionEnd"||n&&"MSTransitionEnd"||"transitionend"},translate:function(x,A){return r+x+"px,"+A+"px"+w},scale:function(x){return v+x+","+x+z},rotate:function(x){return C+x+"deg)"},matrix:function(x){return D+x.xx+","+x.xy+y+x.yx+","+x.yy+u+x.dx.toFixed(10)+(q&&59>=q?"px,":",")+x.dy.toFixed(10)+(q&&59>=q?"px":"")+B},getScaleFromMatrix:function(x){if(!x)return 1;x=x.toLowerCase();
var A=-1<x.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(x.substring(A.length,x.indexOf(",")))}}};b.isiPhone=F("esri-iphone");b.isAndroid=F("esri-android");b.isFennec=F("esri-fennec");b.isBlackBerry=F("esri-blackberry");b.isTouchEnabled=F("esri-touch");b.isPointerEnabled=F("esri-pointer");b._hasCors=F("esri-cors");b._hasFileUpload=F("esri-file-upload");b._hasTransforms=F("esri-transforms");b._hasTransitions=F("esri-transitions");b._has3DTransforms=F("esri-transforms3d");return F})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),
function(F,l,b,q,n,p,m,a,e){function k(){}F=F(null,{declaredClass:"esri.Graphic",constructor:function(h,f,c,d){this._construct();h&&!h.declaredClass?(this.geometry=h.geometry?a.fromJson(h.geometry):null,this.symbol=h.symbol?e.fromJson(h.symbol):null,this.attributes=h.attributes||null,this.infoTemplate=h.infoTemplate?new m(h.infoTemplate):null):(this.geometry=h,this.symbol=f,this.attributes=c,this.infoTemplate=d)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,
_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(h){this._parentGraphic=h},setSize:function(h){this.size=h;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(h){this._aggregationSourceLayer=
h;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(h){this._aggregationInfo=h;return this},getChildGraphics:function(){var h=this.getAggregationSourceLayer();return h?h.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var h=[];this._shape&&h.push(this._shape);this._bgShape&&h.push(this._bgShape);return h},getNode:function(){var h=this._shape&&this._shape.getNode();
return h&&h.nodeType?h:null},getNodes:function(){var h=this.getShapes(),f,c,d=h.length,g=[];for(c=0;c<d;c++)(f=h[c]&&h[c].getNode())&&f.nodeType&&g.push(f);return g},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var h=new this.constructor(this.toJson());h.visible=this.visible;h._layer=this._layer;h._sourceLayer=this._sourceLayer;h._aggregationSourceLayer=this._aggregationSourceLayer;h._aggregationInfo=this._aggregationInfo;
h._resolution=this._resolution;return h},draw:function(){var h=this._graphicsLayer;h&&h._draw(this,!0);return this},setGeometry:function(h){this.geometry=h;this._geomVersion++;var f=this._graphicsLayer;f&&(f._updateExtent(this),this.draw(),h&&"polyline"===h.type&&f._updateSVGMarkers());return this},setResolution:function(h){this._resolution=h;return this},getResolution:function(){return this._resolution},setSymbol:function(h,f){var c=this._graphicsLayer,d=this._shape;this.symbol=h;c&&(f&&d&&c._removeShape(this),
this.draw());return this},setAttributes:function(h){this.attributes=h;this.clearCache();return this},setInfoTemplate:function(h){this.infoTemplate=h;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var h=this.getLayer();return this.infoTemplate||h&&h.infoTemplate},getTitle:function(){var h=this.getInfoTemplate(),f=h&&h.title;if(l.isFunction(f))f=f.call(h,this);else if(l.isString(f)){var c=(h=this.getLayer())&&h._getDateOpts;f=p.substitute(this.attributes,
f,{first:!0,dateFormat:c&&c.call(h)})}return f},getContent:function(){var h=this.getInfoTemplate(),f=h&&h.content;if(l.isFunction(f))f=f.call(h,this);else if(l.isString(f)){var c=(h=this.getLayer())&&h._getDateOpts;f=p.substitute(this.attributes,f,{dateFormat:c&&c.call(h)})}return f},attr:function(h,f){null==f||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[h]=f,this._setDataAttr(h,f));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=
!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var h;if(this.getShapes().length){var f=this.getNodes();var c=f.length;for(h=0;h<c;h++)n.show(f[h])}else this.draw();(f=this._graphicsLayer)&&f._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var h=this._graphicsLayer,f,c;if(h){if("canvas-2d"===h.surfaceType)h._removeShape(this);else{var d=this.getNodes();if(c=d.length)for(f=
0;f<c;f++)n.hide(d[f])}h._graphicVisibilityChanged(this)}return this},toJson:function(){var h={};this.geometry&&(h.geometry=this.geometry.toJson());this.attributes&&(h.attributes=l.mixin({},this.attributes));this.symbol&&(h.symbol=this.symbol.toJson());this.infoTemplate&&(h.infoTemplate=this.infoTemplate.toJson());return h},_setDataAttr:function(h,f){var c=this.getNodes(),d,g=c.length;for(d=0;d<g;d++)this._setDOMDataAttr(c[d],h,f)},_setDOMDataAttr:function(h,f,c){null==c?h.removeAttribute(f):h.setAttribute(f,
c)},_applyDataAttrs:function(){var h=this._dataAttrs;if(h){var f=this.getNodes(),c,d=f.length;for(c=0;c<d;c++)for(var g in h)this._setDOMDataAttr(f[c],g,h[g])}},_getViewInfo:function(h){return(h=(h=h||this.getLayer())&&h.getMap())&&h.getViewInfo()},evaluateExpression:function(h,f){return this._getDataValue(h._attributeDef,h._attributeCache,null,null,h,f)},_getDataValue:function(h,f,c,d,g,t){var r=f.id,w=this.attributes,v=h.field,z=f.isNumeric,C=null;if(r){var D=this._computedAttributes,y=this._computedVersion,
u=this._computedGeomVersion;d=this._getViewInfo(d);var B=!(!g||!g.async),x=t&&t.skipCache||B,A=!t||!1!==t.strictReturnType,E=f.dependsOnView||f.isJSFunc,J=f.dependsOnGeometry;D||(D=this._computedAttributes={});E&&!y&&(y=this._computedVersion={});J&&!u&&(u=this._computedGeomVersion={});var O=E&&y[r]!==d.version||J&&u[r]!==this._geomVersion;C=D[r];if(void 0===C||O||x)C=null,f.hasExpr?C=g?g.evaluate(t&&t.context):c.executeFunction(f.compiledFunc,c.createExecContext(this,d)):f.isJSFunc?C=v(this,h):w&&
(C=w[v],z&&this._isValidNumber(C)&&(f=h.normalizationType||"field",c=C,C=null,g=h.normalizationTotal,h=w[h.normalizationField],"log"===f&&0!==c?C=Math.log(c)*Math.LOG10E:"percent-of-total"===f&&this._isValidNumber(g)&&0!==g?C=c/g*100:"field"===f&&this._isValidNumber(h)&&0!==h&&(C=c/h))),A&&(B?z&&(this._construct(),C=C.then(this._sanitizeNumericValue)):C=this._sanitizeValue(C,z)),x||(D[r]=C,E&&(y[r]=d.version),J&&(u[r]=this._geomVersion))}else w&&(C=this._sanitizeValue(w[v],z));return C},_sanitizeValue:function(h,
f){f&&!this._isValidNumber(h)&&(h=null);return h},_sanitizeNumericValue:function(h){return this._sanitizeValue(h,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=l.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(h){return"number"===typeof h&&!isNaN(h)&&Infinity!==h&&-Infinity!==h},clearCache:function(h){if(null!=h){var f=this._computedAttributes,c=this._computedVersion,d=this._computedGeomVersion;f&&(f[h]=void 0);c&&(c[h]=void 0);d&&(d[h]=
void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});F.prototype.getShape=F.prototype.getDojoShape;k.prototype=F.prototype;F.simpleConstructor=k;return q.Graphic=F})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(F,l,b,q,n){F=F(null,{declaredClass:"esri.InfoTemplate",constructor:function(p,m){p&&l.isObject(p)&&!l.isFunction(p)?l.mixin(this,p):(this.title=p||"${*}",this.content=m||"${*}")},
setTitle:function(p){this.title=p;return this},setContent:function(p){this.content=p;return this},toJson:function(){return n.fixJson({title:this.title,content:this.content})}});return q.InfoTemplate=F})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(F,l,b,q,n,p,m,a,e){function k(d,g,t){var r=d.rings||d.paths,w,v;var z=0;for(w=r.length;z<w;z++){var C=r[z];var D=0;for(v=C.length;D<v;D++){var y=
C[D];if(0<D)u+=y[0],B+=y[1];else{var u=y[0];var B=y[1]}y[0]=g(u);y[1]=t(B)}}return d}var h={esriGeometryPoint:function(d,g,t){d.x=g(d.x);d.y=t(d.y);return d},esriGeometryPolyline:k,esriGeometryPolygon:k,esriGeometryEnvelope:function(d,g,t){d.xmin=g(d.xmin);d.ymin=t(d.ymin);d.xmax=g(d.xmax);d.ymax=t(d.ymax);return d},esriGeometryMultipoint:function(d,g,t){var r=d.points,w;var v=0;for(w=r.length;v<w;v++){var z=r[v];if(0<v)C+=z[0],D+=z[1];else{var C=z[0];var D=z[1]}z[0]=g(C);z[1]=t(D)}return d}},f={esriGeometryPoint:function(d,
g,t){d.x=g(d.x);d.y=t(d.y);return d}},c={createInstance:function(d,g){var t=new d;g&&q.mixin(t,g);return t},fromJson:function(d){if(void 0!==d.x&&void 0!==d.y)return new n(d);if(void 0!==d.paths)return new p(d);if(void 0!==d.rings)return new m(d);if(void 0!==d.points)return new a(d);if(void 0!==d.xmin&&void 0!==d.ymin&&void 0!==d.xmax&&void 0!==d.ymax)return new e(d)},getJsonType:function(d){return d instanceof n?"esriGeometryPoint":d instanceof p?"esriGeometryPolyline":d instanceof m?"esriGeometryPolygon":
d instanceof e?"esriGeometryEnvelope":d instanceof a?"esriGeometryMultipoint":null},getGeometryType:function(d){return"esriGeometryPoint"===d?n:"esriGeometryPolyline"===d?p:"esriGeometryPolygon"===d?m:"esriGeometryEnvelope"===d?e:"esriGeometryMultipoint"===d?a:null},supportsLazyUnquantization:function(d){return"esriGeometryPoint"===d||"esriGeometryPolyline"===d||"esriGeometryPolygon"===d||"esriGeometryMultipoint"===d},unquantizeFunction:function(d,g){if(d&&g){var t=g.translate[0],r=g.translate[1],
w=g.scale[0],v=g.scale[1],z=function(y){return y*w+t},C=function(y){return r-y*v},D=h[d];return function(y){return y?D(y,z,C):null}}},unquantize:function(d,g,t){if(g=c.unquantizeFunction(g,t)){var r=d.length;for(t=0;t<r;t++)g(d[t].geometry)}},quantizeFunction:function(d,g){if(d&&"esriGeometryPoint"===d&&g){var t=g.translate[0],r=g.translate[1],w=g.scale[0],v=g.scale[1],z=function(y){return Math.round((y-t)/w)},C=function(y){return Math.round((r-y)/v)},D=f[d];return function(y){return y?D(y,z,C):null}}},
quantize:function(d,g,t){if(g=c.quantizeFunction(g,t)){var r=d.length;for(t=0;t<r;t++)g(d[t].geometry)}}};F.mixin(F.getObject("geometry",!0,b),c);return c})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(F,l,b,q,n,p,m,a){function e(d,g){89.99999<g?g=89.99999:-89.99999>g&&(g=-89.99999);var t=.017453292519943*g;return[111319.49079327169*d,3189068.5*Math.log((1+Math.sin(t))/(1-Math.sin(t)))]}
function k(d,g,t){d=d/6378137*57.29577951308232;return t?[d,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]:[d-360*Math.floor((d+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]}function h(){}function f(){}function c(d){var g=d._json;d._unquantizeFn?(g=d._unquantizeFn({x:g.x,y:g.y}),d._xVal=g.x,d._yVal=g.y,d._unquantizeFn=null):(d._xVal=g.x,d._yVal=g.y);d._json=null}b={type:"point",x:0,y:0};F=F(m,{declaredClass:"esri.geometry.Point",
type:"point",x:0,y:0,constructor:function(d,g,t){l.isArray(d)?(this.x=d[0],this.y=d[1],this.spatialReference=g):n.isObject(d)?(n.mixin(this,d),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=a.createSpatialReference(this.spatialReference))):(this.x=d,this.y=g,this.spatialReference=t);this.verifySR()},offset:function(d,g){return new this.constructor(this.x+d,this.y+g,this.spatialReference)},setX:function(d){this.x=
d;this.clearCache();return this},setY:function(d){this.y=d;this.clearCache();return this},setLongitude:function(d){var g=this.spatialReference;g&&(g._isWebMercator()?this.setX(e(d,this.y)[0]):4326===g.wkid&&this.setX(d));return this},setLatitude:function(d){var g=this.spatialReference;g&&(g._isWebMercator()?this.setY(e(this.x,d)[1]):4326===g.wkid&&this.setY(d));return this},getLongitude:function(){var d=this.spatialReference;if(d)if(d._isWebMercator())var g=k(this.x,this.y)[0];else 4326===d.wkid&&
(g=this.x);return g},getLatitude:function(){var d=this.spatialReference;if(d)if(d._isWebMercator())var g=k(this.x,this.y)[1];else 4326===d.wkid&&(g=this.y);return g},update:function(d,g){this.x=d;this.y=g;this.clearCache();return this},normalize:function(){var d=this.x,g=this.spatialReference;if(g){var t=g._getInfo();t&&(d=this._normalizeX(d,t))}return new this.constructor(d,this.y,g)},_normalizeX:function(d,g){var t=g.valid[0],r=g.valid[1],w=2*r;d>r?(t=Math.ceil(Math.abs(d-r)/w),d-=t*w):d<t&&(t=
Math.ceil(Math.abs(d-t)/w),d+=t*w);return d},toJson:function(){var d={x:this.x,y:this.y},g=this.spatialReference;g&&(d.spatialReference=g.toJson());return d}});h.prototype=F.prototype;f.prototype=new h;Object.defineProperty(f.prototype,"x",{get:function(){this._json&&c(this);return this._xVal},set:function(d){this._xVal=d}});Object.defineProperty(f.prototype,"y",{get:function(){this._json&&c(this);return this._yVal},set:function(d){this._yVal=d}});f.prototype.setupLazyUnquantization=function(d,g){this._unquantizeFn=
d;this._json=g};F.simpleConstructor=h;F.accessorConstructor=f;F.lngLatToXY=e;F.xyToLngLat=k;F.defaultProps=b;F.metersPerDegree=6378137*Math.PI/180;l.setObject("geometry.Point",F,q);q.geometry.defaultPoint=b;return F})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(F,l,b,q,n){function p(){}b=[-2.0037508342788905E7,2.0037508342788905E7];var m=[-2.0037508342787E7,2.0037508342787E7];F=F(null,{declaredClass:"esri.SpatialReference",
constructor:function(a){a&&(n.isObject(a)?n.mixin(this,a):n.isString(a)?this.wkt=a:this.wkid=a)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:b,origin:m,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:b,origin:m,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:b,origin:m,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:b,origin:m,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==l.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==l.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(a){var e=!1;a&&(e=this.isWebMercator()&&4326===a.wkid||a.isWebMercator()&&4326===this.wkid);return e},isWebMercator:function(){return this._isWebMercator()},equals:function(a){var e=!1;a&&(this===a&&
(e=!0),this.wkid||a.wkid?e=this.wkid===a.wkid||this.isWebMercator()&&a.isWebMercator()||this.wkid===a.latestWkid||a.wkid===this.latestWkid:this.wkt&&a.wkt&&(e=this.wkt.toUpperCase()===a.wkt.toUpperCase()));return e},toJson:function(){var a=null;null!=this.wkid?a={wkid:this.wkid}:null!=this.wkt&&(a={wkt:this.wkt});a&&null!=this.latestWkid&&(a.latestWkid=this.latestWkid);return a}});p.prototype=F.prototype;F.simpleConstructor=p;return q.SpatialReference=F})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(F,l,b,q,n){F=F(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(p){this.spatialReference=p;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new n(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(p){return this.cache&&this.cache[p]},setCacheValue:function(p,m){this.cache||
(this.cache={});this.cache[p]=m}});l.setObject("geometry.Geometry",F,q);return F})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(F,l,b,q,n){function p(m){var a=!1;m&&(m.ics||m.icsid)&&(a=!0);return a}q={isICS:p,createSpatialReference:function(m){var a=null;m&&(a=p(m)?new l(m):new F(m));return a}};n.mixin(b,q);return q})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(F,l,b,q,n,p){F=F(p,{declaredClass:"esri.ImageSpatialReference",constructor:function(m){m&&l.isObject(m)&&l.mixin(this,m)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(m){var a=!1;if(m)if(this.icsid&&m.icsid){if(a=this.icsid===m.icsid,this.icsns||m.icsns)a=a&&this.icsns===m.icsns}else this.ics&&m.ics&&(a=this.ics===m.ics);return a},toJson:function(m){var a=null,e=n.isDefined;m=e(m)?m:!0;e(this.icsid)?(a={icsid:this.icsid},
e(this.icsns)&&(a.icsns=this.icsns)):e(this.ics)&&(a={ics:this.ics});e(this.url)&&e(a)&&m&&(a.url=this.url);return a}});return q.ImageSpatialReference=F})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(F,l,b,q,n,p,m,a,e,k,h){function f(){}function c(){}q={type:"polyline",paths:null};F=F(a,{declaredClass:"esri.geometry.Polyline",type:"polyline",
paths:null,constructor:function(d){this.paths=[];this._path=0;d&&(b.isArray(d)?this.paths=b.isArray(d[0][0])?d:[d]:d.paths?p.mixin(this,d):this.spatialReference=d,this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(d){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];b.isArray(d[0])?l.forEach(d,this._addPointArr,this):l.forEach(d,this._addPoint,this);return this},_addPointArr:function(d){this.paths[this._path].push(d)},
_addPoint:function(d){this.paths[this._path].push([d.x,d.y])},_insertPoints:function(d,g){this.clearCache();this._path=g;this.paths[this._path]||(this.paths[this._path]=[]);l.forEach(d,this._addPoint,this)},_validateInputs:function(d,g){return null!==d&&void 0!==d&&(0>d||d>=this.paths.length)||null!==g&&void 0!==d&&(0>g||g>=this.paths[d].length)?!1:!0},getPoint:function(d,g){if(this._validateInputs(d,g))return new e(this.paths[d][g],this.spatialReference)},setPoint:function(d,g,t){if(this._validateInputs(d,
g))return this.clearCache(),this.paths[d][g]=[t.x,t.y],this},insertPoint:function(d,g,t){if(this._validateInputs(d)&&null!=g&&0<=g&&g<=this.paths[d].length)return this.clearCache(),this.paths[d].splice(g,0,[t.x,t.y]),this},removePath:function(d){if(this._validateInputs(d,null)){this.clearCache();d=this.paths.splice(d,1)[0];var g,t=d.length,r=this.spatialReference;for(g=0;g<t;g++)d[g]=new e(d[g],r);return d}},removePoint:function(d,g){if(this._validateInputs(d,g))return this.clearCache(),new e(this.paths[d].splice(g,
1)[0],this.spatialReference)},getExtent:function(){var d=this.getCacheValue("_extent");var g=this.getCacheValue("_partwise");if(d)return d=new k(d),d._partwise=g,d;d=this.paths;var t=d.length;if(t&&d[0].length){var r,w,v,z,C=r=d[0][0][0],D=w=d[0][0][1],y=Math.min,u=Math.max,B=this.spatialReference;g=[];var x,A;for(v=0;v<t;v++){var E=d[v];var J=x=E[0]&&E[0][0];var O=A=E[0]&&E[0][1];var S=E.length;for(z=0;z<S;z++){var X=E[z];var Y=X[0];X=X[1];C=y(C,Y);D=y(D,X);r=u(r,Y);w=u(w,X);J=y(J,Y);O=y(O,X);x=
u(x,Y);A=u(A,X)}g.push(new k({xmin:J,ymin:O,xmax:x,ymax:A,spatialReference:B?B.toJson():null}))}d={xmin:C,ymin:D,xmax:r,ymax:w,spatialReference:B?B.toJson():null};g=1<g.length?g:null;this.setCacheValue("_extent",d);this.setCacheValue("_partwise",g);d=new k(d);d._partwise=g;return d}},toJson:function(){var d={paths:p.clone3DArray(this.paths)},g=this.spatialReference;g&&(d.spatialReference=g.toJson());return d}});f.prototype=F.prototype;c.prototype=new f;Object.defineProperty(c.prototype,"paths",{get:function(){this._unquantizeFn&&
(this._pathsVal=this._unquantizeFn({paths:p.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(d){this._pathsVal=d}});c.prototype.setupLazyUnquantization=function(d,g){this._unquantizeFn=d;this._pathsVal=g.paths};F.simpleConstructor=f;F.accessorConstructor=c;F.defaultProps=q;b.setObject("geometry.Polyline",F,n);n.geometry.defaultPolyline=q;return F})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f){function c(){}q={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var d=F(a,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(g,t,r,w,v){p.isObject(g)?(p.mixin(this,g),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):this.update(g,t,r,w,v);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new e((this.xmin+
this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new e(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new e(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new e(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new e(this.xmax,this.ymin,this.spatialReference)},centerAt:function(g){var t=this.getCenter(),r=g.x-t.x;g=g.y-t.y;return new d(this.xmin+r,this.ymin+g,this.xmax+r,this.ymax+
g,this.spatialReference)},update:function(g,t,r,w,v){this.xmin=g;this.ymin=t;this.xmax=r;this.ymax=w;this.spatialReference=v;this.clearCache();return this},offset:function(g,t){return new d(this.xmin+g,this.ymin+t,this.xmax+g,this.ymax+t,this.spatialReference)},expand:function(g){var t=(1-g)/2;g=this.getWidth()*t;t*=this.getHeight();return new d(this.xmin+g,this.ymin+t,this.xmax-g,this.ymax-t,this.spatialReference)},intersects:function(g){if(!g)return!1;var t=g.type,r=this.spatialReference,w=g.spatialReference;
r&&w&&!r.equals(w)&&r._canProject(w)&&(g=r.isWebMercator()?k.geographicToWebMercator(g):k.webMercatorToGeographic(g,!0));switch(t){case "point":return this.contains(g);case "multipoint":return this._intersectsMultipoint(g);case "extent":return this._intersectsExtent(g);case "polygon":return this._intersectsPolygon(g);case "polyline":return this._intersectsPolyline(g)}},normalize:function(){var g=this._normalize(!1,!0);b.isArray(g)||(g=[g]);return g},shiftCentralMeridian:function(){return this._normalize(!0)},
bisect:function(){var g=this.spatialReference,t=g&&g._getInfo(),r=[],w=0;if(t&&this._isOutOfBounds(t)){var v=this;w=v.xmin;var z=v.ymin,C=v.ymax,D=t.valid[0],y=t.valid[1];v.getWidth()>2*y&&(v=v.getCenter(),v=new d(v.x-y,z,v.x+y,C,new m(g.toJson())));w=v.xmin-w;var u=this._normalizeX(v.xmin,t);t=this._normalizeX(v.xmax,t);u.frameId===t.frameId?r.push(new d(u.x,z,t.x,C,new m(g.toJson()))):r.push(new d(u.x,z,y,C,new m(g.toJson())),new d(D,z,t.x,C,new m(g.toJson())))}else r.push(this.getExtent());return{extents:r,
marginLeft:w}},_intersectsMultipoint:function(g){var t=g.points.length,r;for(r=0;r<t;r++)if(this.contains(g.getPoint(r)))return!0;return!1},_intersectsExtent:function(g){var t,r,w=!1;if(this.xmin<=g.xmin){var v=g.xmin;this.xmax<v?w=!0:t=Math.min(this.xmax,g.xmax)-v}else v=this.xmin,g.xmax<v?w=!0:t=Math.min(this.xmax,g.xmax)-v;if(this.ymin<=g.ymin){var z=g.ymin;this.ymax<z?w=!0:r=Math.min(this.ymax,g.ymax)-z}else z=this.ymin,g.ymax<z?w=!0:r=Math.min(this.ymax,g.ymax)-z;return w?null:new d(v,z,v+t,
z+r,this.spatialReference)},_intersectsPolygon:function(g){var t=[this.xmin,this.ymax],r=[this.xmax,this.ymax],w=[this.xmin,this.ymin],v=[this.xmax,this.ymin],z=[t,r,w,v];t=[[w,t],[t,r],[r,v],[v,w]];w=g.rings;v=w.length;var C=new e(0,0,this.spatialReference);var D=z.length;for(r=0;r<D;r++)if(C.update(z[r][0],z[r][1]),g.contains(C))return!0;C.setSpatialReference(g.spatialReference);for(r=0;r<v;r++)if(z=w[r],D=z.length){var y=z[0];C.update(y[0],y[1]);if(this.contains(C))return!0;for(g=1;g<D;g++){var u=
z[g];C.update(u[0],u[1]);if(this.contains(C)||this._intersectsLine([y,u],t))return!0;y=u}}return!1},_intersectsPolyline:function(g){var t=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],r,w=g.paths,v=w.length,z,C=new e(0,0,g.spatialReference);for(g=0;g<v;g++){var D=w[g];if(z=D.length){var y=D[0];C.update(y[0],y[1]);if(this.contains(C))return!0;for(r=1;r<z;r++){var u=
D[r];C.update(u[0],u[1]);if(this.contains(C)||this._intersectsLine([y,u],t))return!0;y=u}}}return!1},_intersectsLine:function(g,t){var r=h._getLineIntersection2,w,v=t.length;for(w=0;w<v;w++)if(r(g,t[w]))return!0;return!1},contains:function(g){if(!g)return!1;var t=g.type;if("point"===t){var r=this.spatialReference,w=g.spatialReference;t=g.x;g=g.y;r&&w&&!r.equals(w)&&r._canProject(w)&&(g=r.isWebMercator()?e.lngLatToXY(t,g):e.xyToLngLat(t,g,!0),t=g[0],g=g[1]);return t>=this.xmin&&t<=this.xmax&&g>=this.ymin&&
g<=this.ymax}return"extent"===t?this._containsExtent(g):!1},_containsExtent:function(g){var t=g.xmin,r=g.ymin,w=g.xmax,v=g.ymax,z=g.spatialReference;g=new e(t,r,z);t=new e(t,v,z);v=new e(w,v,z);r=new e(w,r,z);return this.contains(g)&&this.contains(t)&&this.contains(v)&&this.contains(r)?!0:!1},union:function(g){return new d(Math.min(this.xmin,g.xmin),Math.min(this.ymin,g.ymin),Math.max(this.xmax,g.xmax),Math.max(this.ymax,g.ymax),this.spatialReference)},getExtent:function(){var g=this.spatialReference;
return new d(this.xmin,this.ymin,this.xmax,this.ymax,g&&new m(g.toJson()))},_shiftCM:function(g){var t=this.getCacheValue("_shifted");if(!t){t=new d(this.toJson());var r=t.spatialReference;if(g=g||r._getInfo()){var w=this._getCM(g);if(w){var v=r._isWebMercator()?k.webMercatorToGeographic(w):w;t.xmin-=w.x;t.xmax-=w.x;r._isWebMercator()||(v.x=this._normalizeX(v.x,g).x);t.setSpatialReference(new m(p.substitute({Central_Meridian:v.x},4326===r.wkid?g.altTemplate:g.wkTemplate)))}}this.setCacheValue("_shifted",
t)}return t},_getCM:function(g){var t;this._isOutOfBounds(g)&&(t=this.getCenter());return t},_isOutOfBounds:function(g){var t=g.valid[0];g=g.valid[1];var r=this.xmin,w=this.xmax;return!(r>=t&&r<=g&&w>=t&&w<=g)},_normalize:function(g,t,r){var w=new d(this.toJson()),v=w.spatialReference;if(v&&(r=r||v._getInfo())){var z=l.map(this._getParts(r),function(C){return C.extent});return 2<z.length?g?this._shiftCM(r):w.update(r.valid[0],w.ymin,r.valid[1],w.ymax,v):2===z.length?g?this._shiftCM(r):t?z:{rings:l.map(z,
function(C){return[[C.xmin,C.ymin],[C.xmin,C.ymax],[C.xmax,C.ymax],[C.xmax,C.ymin],[C.xmin,C.ymin]]}),spatialReference:v}:z[0]||w}return w},_getParts:function(g){var t=this.getCacheValue("_parts");if(!t){t=[];var r=this.xmin,w=this.xmax,v=this.ymin,z=this.ymax,C=this.spatialReference,D=this.getWidth(),y=r,u=w,B=0,x=0;g=g||C._getInfo();var A=g.valid[0];var E=g.valid[1];x=this._normalizeX(r,g);r=x.x;B=x.frameId;x=this._normalizeX(w,g);w=x.x;x=x.frameId;g=r===w&&0<D;if(D>2*E){D=new d(y<u?r:w,v,E,z,C);
r=new d(A,v,y<u?w:r,z,C);E=new d(0,v,E,z,C);v=new d(A,v,0,z,C);C=[];A=[];D.contains(E)&&C.push(B);D.contains(v)&&A.push(B);r.contains(E)&&C.push(x);r.contains(v)&&A.push(x);for(z=B+1;z<x;z++)C.push(z),A.push(z);t.push({extent:D,frameIds:[B]},{extent:r,frameIds:[x]},{extent:E,frameIds:C},{extent:v,frameIds:A})}else r>w||g?t.push({extent:new d(r,v,E,z,C),frameIds:[B]},{extent:new d(A,v,w,z,C),frameIds:[x]}):t.push({extent:new d(r,v,w,z,C),frameIds:[B]});this.setCacheValue("_parts",t)}return t},_normalizeX:function(g,
t){var r=0,w=t.valid[0],v=t.valid[1],z=2*v;g>v?(r=Math.ceil(Math.abs(g-v)/z),g-=r*z):g<w&&(r=Math.ceil(Math.abs(g-w)/z),g+=r*z,r=-r);return{x:g,frameId:r}},toJson:function(){var g={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},t=this.spatialReference;t&&(g.spatialReference=t.toJson());return g}});c.prototype=d.prototype;d.simpleConstructor=c;d.defaultProps=q;b.setObject("geometry.Extent",d,n);n.geometry.defaultExtent=q;return d})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),
function(F,l,b,q,n,p){function m(e,k,h,f){if("point"===e.type){var c=k(e.x,e.y,f);return new e.constructor(c[0],c[1],new n(h))}if("extent"===e.type){c=k(e.xmin,e.ymin,f);var d=k(e.xmax,e.ymax,f);return new e.constructor(c[0],c[1],d[0],d[1],new n(h))}if("polyline"===e.type||"polygon"===e.type){c="polyline"===e.type;var g=[],t;F.forEach(c?e.paths:e.rings,function(w){g.push(t=[]);F.forEach(w,function(v){t.push(k(v[0],v[1],f))})});return c?new e.constructor({paths:g,spatialReference:new n(h)}):new e.constructor({rings:g,
spatialReference:new n(h)})}if("multipoint"===e.type){var r=[];F.forEach(e.points,function(w){r.push(k(w[0],w[1],f))});return new e.constructor({points:r,spatialReference:new n(h)})}}function a(e,k){var h=e&&(null!=e.wkid?e:e.spatialReference),f=k&&(null!=k.wkid?k:k.spatialReference);return h&&f?f.equals(h)?!0:f._canProject(h):!1}b={canProject:a,project:function(e,k){var h=e&&e.spatialReference,f=k&&(null!=k.wkid?k:k.spatialReference);h&&f?h.equals(f)?e=new e.constructor(e.toJson()):a(h,f)?f.isWebMercator()?
e=m(e,p.lngLatToXY,{wkid:102100}):4326===f.wkid&&(e=m(e,p.xyToLngLat,{wkid:4326})):e=null:e=null;return e},lngLatToXY:p.lngLatToXY,xyToLngLat:p.xyToLngLat,metersPerDegree:p.metersPerDegree,geographicToWebMercator:function(e){return m(e,p.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(e,k){return m(e,p.xyToLngLat,{wkid:4326},k)}};l.mixin(l.getObject("geometry",!0,q),b);return b})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(F,
l,b,q){function n(a,e,k){return a instanceof q?new q(a.x+k*(e.x-a.x),a.y+k*(e.y-a.y)):[a[0]+k*(e[0]-a[0]),a[1]+k*(e[1]-a[1])]}function p(a,e){return 1E-8>Math.abs(a-e)}function m(a,e,k,h){var f=p(a[0],e[0])?1E10:(a[1]-e[1])/(a[0]-e[0]),c=p(k[0],h[0])?1E10:(k[1]-h[1])/(k[0]-h[0]),d=a[1]-f*a[0],g=k[1]-c*k[0];if(p(f,c)){if(p(d,g)){if(p(a[0],e[0]))if(Math.min(a[1],e[1])<Math.max(k[1],h[1])||Math.max(a[1],e[1])>Math.min(k[1],h[1])){a=(a[1]+e[1]+k[1]+h[1]-Math.min(a[1],e[1],k[1],h[1])-Math.max(a[1],e[1],
k[1],h[1]))/2;var t=(a-d)/f}else return null;else if(Math.min(a[0],e[0])<Math.max(k[0],h[0])||Math.max(a[0],e[0])>Math.min(k[0],h[0]))t=(a[0]+e[0]+k[0]+h[0]-Math.min(a[0],e[0],k[0],h[0])-Math.max(a[0],e[0],k[0],h[0]))/2,a=f*t+d;else return null;return[t,a]}return null}p(f,1E10)?(t=a[0],a=c*t+g):p(c,1E10)?(t=k[0],a=f*t+d):(t=-(d-g)/(f-c),a=a[1]===e[1]?a[1]:k[1]===h[1]?k[1]:f*t+d);return[t,a]}l={getLength:function(a,e){var k=e.x-a.x,h=e.y-a.y;return Math.sqrt(k*k+h*h)},_getLength:function(a,e){var k=
e[0]-a[0],h=e[1]-a[1];return Math.sqrt(k*k+h*h)},getPointOnLine:n,getMidpoint:function(a,e){return n(a,e,.5)},_equals:p,_getLineIntersection:m,getLineIntersection:function(a,e,k,h,f){(a=m([a.x,a.y],[e.x,e.y],[k.x,k.y],[h.x,h.y]))&&(a=new q(a[0],a[1],f));return a},_getLineIntersection2:function(a,e){var k=a[0],h=a[1],f=e[0],c=e[1],d=k[0];k=k[1];var g=h[0];h=h[1];var t=f[0],r=f[1];f=c[0]-t;t=d-t;var w=g-d;c=c[1]-r;r=k-r;var v=h-k,z=c*w-f*v;if(0===z)return!1;f=(f*r-c*t)/z;t=(w*r-v*t)/z;return 0<=f&&
1>=f&&0<=t&&1>=t?[d+f*(g-d),k+f*(h-k)]:!1},_pointLineDistance:function(a,e){var k=e[0],h=e[1],f=k[0],c=k[1];k=a[0];var d=a[1],g=h[0]-f,t=h[1]-c,r=k-f,w=d-c;h=Math.sqrt;var v=Math.pow,z=h(v(g,2)+v(t,2));r=(r*g+w*t)/(z*z);c+=r*t;return h(v(k-(f+r*g),2)+v(d-c,2))}};F.mixin(F.getObject("geometry",!0,b),l);return l})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f){function c(){}function d(){}q={type:"polygon",rings:null};var g=F(a,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(t){this.rings=[];this._ring=0;t&&(b.isArray(t)?this.rings=b.isArray(t[0][0])?t:[t]:t.rings?p.mixin(this,t):this.spatialReference=t,this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(t){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];b.isArray(t[0])?l.forEach(t,this._addPointArr,this):l.forEach(t,this._addPoint,this);return this},_addPointArr:function(t){this.rings[this._ring].push(t)},_addPoint:function(t){this.rings[this._ring].push([t.x,t.y])},_insertPoints:function(t,r){this.clearCache();this._ring=r;this.rings[this._ring]||(this.rings[this._ring]=[]);l.forEach(t,this._addPoint,this)},_validateInputs:function(t,r){return null!==t&&void 0!==t&&(0>t||t>=this.rings.length)||null!==r&&void 0!==t&&(0>r||r>=this.rings[t].length)?
!1:!0},getPoint:function(t,r){if(this._validateInputs(t,r))return new e(this.rings[t][r],this.spatialReference)},setPoint:function(t,r,w){if(this._validateInputs(t,r))return this.clearCache(),this.rings[t][r]=[w.x,w.y],this},insertPoint:function(t,r,w){if(this._validateInputs(t)&&null!=r&&0<=r&&r<=this.rings[t].length)return this.clearCache(),this.rings[t].splice(r,0,[w.x,w.y]),this},removeRing:function(t){if(this._validateInputs(t,null)){this.clearCache();t=this.rings.splice(t,1)[0];var r,w=t.length,
v=this.spatialReference;for(r=0;r<w;r++)t[r]=new e(t[r],v);return t}},removePoint:function(t,r){if(this._validateInputs(t,r))return this.clearCache(),new e(this.rings[t].splice(r,1)[0],this.spatialReference)},getExtent:function(){var t=this.getCacheValue("_extent");var r=this.getCacheValue("_partwise");if(t)return t=new k(t),t._partwise=r,t;t=this.rings;var w=t.length;if(w&&t[0].length){var v,z,C,D,y=v=t[0][0][0],u=z=t[0][0][1],B=Math.min,x=Math.max,A=this.spatialReference;r=[];var E,J;for(C=0;C<
w;C++){var O=t[C];var S=E=O[0]&&O[0][0];var X=J=O[0]&&O[0][1];var Y=O.length;for(D=0;D<Y;D++){var K=O[D];var P=K[0];K=K[1];y=B(y,P);u=B(u,K);v=x(v,P);z=x(z,K);S=B(S,P);X=B(X,K);E=x(E,P);J=x(J,K)}r.push(new k({xmin:S,ymin:X,xmax:E,ymax:J,spatialReference:A?A.toJson():null}))}t={xmin:y,ymin:u,xmax:v,ymax:z,spatialReference:A?A.toJson():null};r=1<r.length?r:null;this.setCacheValue("_extent",t);this.setCacheValue("_partwise",r);t=new k(t);t._partwise=r;return t}},contains:function(t){var r=this.rings,
w=!1,v,z,C,D=r.length;var y=this.spatialReference;var u=t.spatialReference;var B=t.x;t=t.y;y&&u&&!y.equals(u)&&y._canProject(u)&&(t=y.isWebMercator()?e.lngLatToXY(B,t):e.xyToLngLat(B,t,!0),B=t[0],t=t[1]);for(C=0;C<D;C++){y=r[C];var x=y.length;for(z=v=0;z<x;z++){v++;v===x&&(v=0);u=y[z];var A=y[v];(u[1]<t&&A[1]>=t||A[1]<t&&u[1]>=t)&&u[0]+(t-u[1])/(A[1]-u[1])*(A[0]-u[0])<B&&(w=!w)}}return w},getCentroid:function(){var t=this.getCacheValue("_centroid");if(void 0!==t)return t;t=this.rings;var r,w,v=[],
z,C,D=Infinity,y=-Infinity,u=Infinity,B=-Infinity;l.forEach(t,function(E){x=r=w=0;l.forEach(E,function(J,O){O<E.length-1&&(z=E[O+1],C=J[0]*z[1]-z[0]*J[1],x+=(J[0]+z[0])*C,r+=(J[1]+z[1])*C,w+=C,J[0]<D&&(D=J[0]),J[0]>y&&(y=J[0]),J[1]<u&&(u=J[1]),J[1]>B&&(B=J[1]))});0<w&&(w*=-1);w&&v.push([x,r,w/2])});v.sort(function(E,J){return E[2]-J[2]});var x=r=void 0;if(v[0]){var A=6*v[0][2];x=v[0][0]/A;r=v[0][1]/A;if(x<D||x>y||r<u||r>B)x=r=void 0}if(void 0===x||void 0===r)if(t=t[0]&&t[0].length?this._getLineCentroid(t[0]):
null)x=t.x,r=t.y;t=isNaN(x)||isNaN(r)?null:new e(x,r,this.spatialReference);this.setCacheValue("_centroid",t);return t},_getLineCentroid:function(t){var r=0,w=0,v=0,z={x:0,y:0},C={x:0,y:0},D,y=t.length,u;for(D=0;D<y-1;D++){var B=t[D];var x=t[D+1];if(B&&x){z.x=B[0];z.y=B[1];C.x=x[0];C.y=x[1];var A=h.getLength(z,C);0<A&&(r+=A,B=h.getMidpoint(B,x),w+=A*B[0],v+=A*B[1])}}0<r?u={x:w/r,y:v/r}:t[0]&&(u={x:t[0][0],y:t[0][1]});return u},isClockwise:function(t){var r=0,w,v=t.length,z=b.isArray(t[0])?function(C,
D){return C[0]*D[1]-D[0]*C[1]}:function(C,D){return C.x*D.y-D.x*C.y};for(w=0;w<v;w++)r+=z(t[w],t[(w+1)%v]);return 0>=r/2},isSelfIntersecting:function(t){t=t||this;var r,w,v,z,C,D=t.rings.length;for(v=0;v<D;v++){for(r=0;r<t.rings[v].length-1;r++){var y=[[t.rings[v][r][0],t.rings[v][r][1]],[t.rings[v][r+1][0],t.rings[v][r+1][1]]];for(w=v+1;w<D;w++)for(z=0;z<t.rings[w].length-1;z++){var u=[[t.rings[w][z][0],t.rings[w][z][1]],[t.rings[w][z+1][0],t.rings[w][z+1][1]]];if((C=h._getLineIntersection2(y,u))&&
!(C[0]===y[0][0]&&C[1]===y[0][1]||C[0]===u[0][0]&&C[1]===u[0][1]||C[0]===y[1][0]&&C[1]===y[1][1]||C[0]===u[1][0]&&C[1]===u[1][1]))return!0}}z=t.rings[v].length;if(!(4>=z))for(r=0;r<z-3;r++){var B=z-1;0===r&&(B=z-2);y=[[t.rings[v][r][0],t.rings[v][r][1]],[t.rings[v][r+1][0],t.rings[v][r+1][1]]];for(w=r+2;w<B;w++)if(u=[[t.rings[v][w][0],t.rings[v][w][1]],[t.rings[v][w+1][0],t.rings[v][w+1][1]]],(C=h._getLineIntersection2(y,u))&&!(C[0]===y[0][0]&&C[1]===y[0][1]||C[0]===u[0][0]&&C[1]===u[0][1]||C[0]===
y[1][0]&&C[1]===y[1][1]||C[0]===u[1][0]&&C[1]===u[1][1]))return!0}}return!1},toJson:function(){var t={rings:p.clone3DArray(this.rings)},r=this.spatialReference;r&&(t.spatialReference=r.toJson());return t}});c.prototype=g.prototype;d.prototype=new c;Object.defineProperty(d.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:p.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(t){this._ringsVal=t}});d.prototype.setupLazyUnquantization=
function(t,r){this._unquantizeFn=t;this._ringsVal=r.rings};g.simpleConstructor=c;g.accessorConstructor=d;g.defaultProps=q;g.createEllipse=function(t){var r=t.center.x,w=t.center.y,v=t.longAxis,z=t.shortAxis,C=t.numberOfPoints,D=t.map,y;t=[];var u=2*Math.PI/C;for(y=0;y<C;y++){var B=Math.cos(y*u);var x=Math.sin(y*u);B=D.toMap({x:v*B+r,y:z*x+w});t.push(B)}t.push(t[0]);r=new g(D.spatialReference);r.addRing(t);return r};g.createCircle=function(t){return g.createEllipse({center:t.center,longAxis:t.r,shortAxis:t.r,
numberOfPoints:t.numberOfPoints,map:t.map})};g.fromExtent=function(t){var r=t.normalize();t=t.spatialReference;return new g({rings:l.map(r,function(w){return[[w.xmin,w.ymin],[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]]}),spatialReference:t?t.toJson():null})};b.setObject("geometry.Polygon",g,n);n.geometry.defaultPolygon=q;n.geometry.createEllipse=g.createEllipse;n.geometry.createCircle=g.createCircle;n.geometry.isClockwise=g.prototype.isClockwise;n.geometry.polygonSelfIntersecting=
g.prototype.isSelfIntersecting;return g})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(F,l,b,q,n,p,m,a,e,k){function h(){}function f(){}b={type:"multipoint",points:null};F=F(m,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(c){this.points=[];c&&(c.points?n.mixin(this,c):this.spatialReference=c,this.spatialReference&&
(this.spatialReference=k.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(c){this.clearCache();l.isArray(c)?this.points.push(c):this.points.push([c.x,c.y]);return this},removePoint:function(c){if(this._validateInputs(c))return this.clearCache(),new a(this.points.splice(c,1)[0],this.spatialReference)},getExtent:function(){var c=this.getCacheValue("_extent");if(c)return new e(c);c=this.points;var d=c.length;if(d){var g=c[0],t,r,w=t=g[0],v=r=g[1],z=Math.min,C=Math.max,
D=this.spatialReference,y;for(y=0;y<d;y++){g=c[y];var u=g[0];g=g[1];w=z(w,u);v=z(v,g);t=C(t,u);r=C(r,g)}c={xmin:w,ymin:v,xmax:t,ymax:r,spatialReference:D?D.toJson():null};this.setCacheValue("_extent",c);return new e(c)}},_validateInputs:function(c){return null===c||0>c||c>=this.points.length?!1:!0},getPoint:function(c){if(this._validateInputs(c))return c=this.points[c],new a(c[0],c[1],this.spatialReference)},setPoint:function(c,d){if(this._validateInputs(c))return this.clearCache(),this.points[c]=
[d.x,d.y],this},toJson:function(){var c={points:n.clone2DArray(this.points)},d=this.spatialReference;d&&(c.spatialReference=d.toJson());return c}});h.prototype=F.prototype;f.prototype=new h;Object.defineProperty(f.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:n.clone2DArray(this._pointsVal)}).points,this._unquantizeFn=null);return this._pointsVal},set:function(c){this._pointsVal=c}});f.prototype.setupLazyUnquantization=function(c,d){this._unquantizeFn=
c;this._pointsVal=d.points};F.simpleConstructor=h;F.accessorConstructor=f;F.defaultProps=b;l.setObject("geometry.Multipoint",F,q);q.geometry.defaultMultipoint=b;return F})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(F,l,b,q,n,p,m,a,e,k,h){var f={createDefaultSymbol:function(c){switch(c){case "esriGeometryPoint":case "esriGeometryMultipoint":var d=
f.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":d=f.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":d=f.createDefaultFillSymbol()}return d},createDefaultMarkerSymbol:function(){return new n},createDefaultLineSymbol:function(){return new m},createDefaultFillSymbol:function(){return new e},getFirstSupportedSymbol:function(c){var d;l.some(c,function(g){g&&-1<f.supportedSymbolTypes.indexOf(g.type)&&(d=g);return!!d});
return d},isPointSymbol:function(c){return c?-1<f.supportedPointSymbolTypes.indexOf(c.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(c,d){var g=null;switch(c.type){case "esriSMS":g=new n(c);break;case "esriPMS":g=new p(c);break;case "esriTS":g=new h(c);break;case "esriSLS":g=void 0!==c.cap?new a(c):new m(c);break;case "esriCLS":g=new a(c);break;case "esriSFS":g=new e(c);break;
case "esriPFS":g=new k(c);break;default:g=(g=d&&d.geometryType)?f.createDefaultSymbol(g):null}return g},getShapeDescriptors:function(c){return c&&c.getShapeDescriptors?c.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};F.mixin(F.getObject("symbol",!0,q),f);return f})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(F,l,b,q,n,p,
m,a,e){var k={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},h={style:k.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};F=F(a,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(f,c,d,g){f?l.isString(f)?(this.style=f,c&&(this.size=c),d&&(this.outline=d),g&&(this.color=g)):(this.style=m.valueOf(this._styles,this.style),f.outline&&(this.outline=new e(f.outline))):(l.mixin(this,h),this.size=n.pt2px(this.size),this.outline=new e(this.outline),this.color=new b(this.color));this.style||(this.style=k.STYLE_CIRCLE)},setStyle:function(f){this.style=f;return this},setPath:function(f){this.path=f;this.setStyle(k.STYLE_PATH);return this},setOutline:function(f){this.outline=
f;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(f,c,d){this._targetWidth=f;this._targetHeight=c;this._spikeSize=d},getShapeDescriptors:function(){var f,c=this.style,d=(this.size||n.pt2px(h.size))/2,g=0-d,t=0+d,r=0-d,w=0+d;switch(c){case k.STYLE_CIRCLE:var v={type:"circle",cx:0,cy:0,r:d};var z=this.getFill();if(f=this.getStroke())f.style=f.style||"Solid";break;case k.STYLE_CROSS:v={type:"path",path:"M "+g+",0 L "+
t+",0 M 0,"+r+" L 0,"+w+" E"};z=null;f=this.getStroke();break;case k.STYLE_DIAMOND:v={type:"path",path:"M "+g+",0 L 0,"+r+" L "+t+",0 L 0,"+w+" L "+g+",0 Z"};z=this.getFill();f=this.getStroke();break;case k.STYLE_SQUARE:v={type:"path",path:"M "+g+","+w+" L "+g+","+r+" L "+t+","+r+" L "+t+","+w+" L "+g+","+w+" Z"};z=this.getFill();f=this.getStroke();break;case k.STYLE_TRIANGLE:v={type:"path",path:"M "+g+","+w+" L 0,"+r+" L "+t+","+w+" L "+g+","+w+" Z"};z=this.getFill();f=this.getStroke();break;case k.STYLE_X:v=
{type:"path",path:"M "+g+","+w+" L "+t+","+r+" M "+g+","+r+" L "+t+","+w+" E"};z=null;f=this.getStroke();break;case k.STYLE_PATH:v={type:"path",path:this.path||""},z=this.getFill(),f=this.getStroke()}return{defaultShape:v,fill:z,stroke:f}},toJson:function(){var f=this.style,c=this.outline,d=l.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[f]||"esriSMSCircle"});c&&(d.outline=c.toJson());"x"===f||"cross"===f?delete d.color:"target"===f&&(d.style="esriSMSSquare",delete d.color,
0<this._targetHeight&&0<this._targetWidth&&(d.size=n.px2pt(Math.max(this._targetHeight,this._targetWidth))));d.path=this.path;return m.fixJson(d)}});l.mixin(F,k);F.defaultProps=h;l.setObject("symbol.SimpleMarkerSymbol",F,p);p.symbol.defaultSimpleMarkerSymbol=h;return F})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(F,l,b,q,n,p){F=F(p,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,
size:12,constructor:function(m){m&&l.isObject(m)&&(this.size="auto"===this.size?this.size:q.pt2px(this.size),this.xoffset=q.pt2px(this.xoffset),this.yoffset=q.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(m){this.angle=m;return this},setSize:function(m){this.size=m;return this},setOffset:function(m,a){this.xoffset=m;this.yoffset=a;return this},toJson:function(){var m=q.px2pt(this.size);m=isNaN(m)?void 0:m;var a=q.px2pt(this.xoffset);a=isNaN(a)?void 0:a;var e=q.px2pt(this.yoffset);
e=isNaN(e)?void 0:e;return l.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:m,angle:this.angle&&-1*this.angle,xoffset:a,yoffset:e})}});l.setObject("symbol.MarkerSymbol",F,n);return F})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(F,l,b,q,n,p){F=F(null,{declaredClass:"esri.symbol.Symbol",color:new p([0,0,0,1]),type:null,constructor:function(m){m&&l.isObject(m)&&(l.mixin(this,m),this.color&&
n.isDefined(this.color[0])&&(this.color=p.toDojoColor(this.color)),(m=this.type)&&0===m.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[m]))},setColor:function(m){this.color=m;return this},toJson:function(){return{color:p.toJsonColor(this.color)}}});l.setObject("symbol.Symbol",F,q);return F})},"esri/Color":function(){define(["dojo/_base/declare",
"dojo/_base/Color","dojo/has","./kernel"],function(F,l,b,q){var n=F([l],{declaredClass:"esri.Color"});n.toJsonColor=function(p){return p&&[p.r,p.g,p.b,1<p.a?p.a:Math.round(255*p.a)]};n.toDojoColor=function(p){return p&&new n([p[0],p[1],p[2],p[3]/255])};b="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(F=0;F<b.length;F++)n[b[F]]=l[b[F]];return q.Color=n})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(F,l,b,q,n,p,m,a){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},k={color:[0,0,0,1],style:e.STYLE_SOLID,width:1};F=F(a,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(h,f,c){h?l.isString(h)?(this.style=h,f&&(this.color=f),c&&(this.width=c)):(this.style=m.valueOf(this._styles,h.style)||e.STYLE_SOLID,this.marker=
h.marker):(l.mixin(this,k),this.color=new b(this.color),this.width=n.pt2px(this.width))},setStyle:function(h){this.style=h;return this},setMarker:function(h){this.marker=h},getStroke:function(){return this.style===e.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return m.fixJson(l.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?l.clone(this.marker):void 0}))}});l.mixin(F,e);F.defaultProps=k;l.setObject("symbol.SimpleLineSymbol",F,p);p.symbol.defaultSimpleLineSymbol=k;return F})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(F,l,b,q,n,p){F=F(p,{declaredClass:"esri.symbol.LineSymbol",constructor:function(m){l.isObject(m)?this.width=q.pt2px(this.width):
this.width=12},setWidth:function(m){this.width=m;return this},toJson:function(){var m=q.px2pt(this.width);m=isNaN(m)?void 0:m;return l.mixin(this.inherited("toJson",arguments),{width:m})}});l.setObject("symbol.LineSymbol",F,n);return F})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(F,l,b,q,n,p,m,a){var e={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};F=
F(a,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(k,h,f){k?l.isString(k)?(this.url=k,h&&(this.width=h),f&&(this.height=f)):(this.width=q.pt2px(null==k.width?e.width:k.width),this.height=q.pt2px(null==k.height?e.height:k.height),h=k.imageData,9>b("ie")||!h||(f=this.url,this.url="data:"+(k.contentType||"image")+";base64,"+h,this.imageData=f)):(l.mixin(this,e),this.width=q.pt2px(this.width),this.height=q.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(k){this.width=k;return this},setHeight:function(k){this.height=k;return this},setUrl:function(k){k!==this.url&&(delete this.imageData,delete this.contentType);this.url=k;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var k=this.url,h=this.imageData;if(0===k.indexOf("data:")){var f=
k;k=h;h=f.indexOf(";base64,")+8;h=f.substr(h)}!l.isString(k)||0!==k.indexOf("/")&&0!==k.indexOf("//")&&0!==k.indexOf("./")&&0!==k.indexOf("../")||(k=m.getAbsoluteUrl(k));f=q.px2pt(this.width);f=isNaN(f)?void 0:f;var c=q.px2pt(this.height);c=isNaN(c)?void 0:c;k=p.fixJson(l.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:k,imageData:h,contentType:this.contentType,width:f,height:c}));delete k.color;delete k.size;k.imageData||delete k.imageData;return k}});F.defaultProps=e;l.setObject("symbol.PictureMarkerSymbol",
F,n);n.symbol.defaultPictureMarkerSymbol=e;return F})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(F,l,b,q,n,p,m,a){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},k={color:[0,0,0,1],style:e.STYLE_SOLID,width:1,cap:e.CAP_BUTT,join:e.JOIN_MITER,miterLimit:10};F=F(a,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(h,f,c,d,g,t){h?l.isString(h)?(this.style=h,f&&(this.color=f),void 0!==c&&(this.width=c),d&&(this.cap=d),g&&(this.join=g),void 0!==t&&(this.miterLimit=t)):(this.cap=m.valueOf(this._caps,h.cap),this.join=m.valueOf(this._joins,h.join),this.width=n.pt2px(h.width),this.miterLimit=n.pt2px(h.miterLimit)):(l.mixin(this,k),this.color=new b(this.color),this.width=n.pt2px(this.width),this.miterLimit=n.pt2px(this.miterLimit))},setCap:function(h){this.cap=h;return this},
setJoin:function(h){this.join=h;return this},setMiterLimit:function(h){this.miterLimit=h;return this},getStroke:function(){return l.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===e.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var h=n.px2pt(this.miterLimit);h=isNaN(h)?void 0:h;return m.fixJson(l.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:h}))}});l.mixin(F,e);F.defaultProps=k;l.setObject("symbol.CartographicLineSymbol",F,p);p.symbol.defaultCartographicLineSymbol=k;return F})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(F,l,b,q,n,p,m,a,e,k){var h={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},f={style:h.STYLE_SOLID,color:[0,0,0,.25]};F=F(a,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(c,d,g){c?l.isString(c)?(this.style=c,void 0!==d&&(this.outline=d),void 0!==g&&(this.color=g)):this.style=m.valueOf(this._styles,c.style):(l.mixin(this,f),this.outline=new e(this.outline),this.color=new b(this.color))},setStyle:function(c){this.style=c;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var c=this.style;return c===h.STYLE_NULL?null:c===h.STYLE_SOLID?this.color:l.mixin({},n.defaultPattern,{src:k.toUrl("../images/symbol/sfs/"+c+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return m.fixJson(l.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});l.mixin(F,h);F.defaultProps=
f;l.setObject("symbol.SimpleFillSymbol",F,p);p.symbol.defaultSimpleFillSymbol=f;return F})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(F,l,b,q,n,p){F=F(n,{declaredClass:"esri.symbol.FillSymbol",constructor:function(m){m&&l.isObject(m)&&m.outline&&(this.outline=new p(m.outline))},setOutline:function(m){this.outline=m;return this},toJson:function(){var m=this.inherited("toJson",arguments);this.outline&&
(m.outline=this.outline.toJson());return m}});l.setObject("symbol.FillSymbol",F,q);return F})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(F,l,b,q,n,p,m,a){var e={xoffset:0,yoffset:0,width:12,height:12};F=F(a,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(k,h,f,c){k?l.isString(k)?(this.url=
k,void 0!==h&&(this.outline=h),void 0!==f&&(this.width=f),void 0!==c&&(this.height=c)):(this.xoffset=q.pt2px(k.xoffset),this.yoffset=q.pt2px(k.yoffset),this.width=q.pt2px(k.width),this.height=q.pt2px(k.height),h=k.imageData,9>b("ie")||!h||(f=this.url,this.url="data:"+(k.contentType||"image")+";base64,"+h,this.imageData=f)):(l.mixin(this,e),this.width=q.pt2px(this.width),this.height=q.pt2px(this.height))},setWidth:function(k){this.width=k;return this},setHeight:function(k){this.height=k;return this},
setOffset:function(k,h){this.xoffset=k;this.yoffset=h;return this},setUrl:function(k){k!==this.url&&(delete this.imageData,delete this.contentType);this.url=k;return this},setXScale:function(k){this.xscale=k;return this},setYScale:function(k){this.yscale=k;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return l.mixin({},q.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var k=this.url,h=this.imageData;if(0===k.indexOf("data:")){var f=k;k=h;h=f.indexOf(";base64,")+8;h=f.substr(h)}!l.isString(k)||0!==k.indexOf("/")&&0!==k.indexOf("//")&&0!==k.indexOf("./")&&0!==k.indexOf("../")||(k=m.getAbsoluteUrl(k));f=q.px2pt(this.width);f=isNaN(f)?void 0:f;var c=q.px2pt(this.height);c=isNaN(c)?void 0:c;var d=q.px2pt(this.xoffset);d=isNaN(d)?void 0:d;var g=q.px2pt(this.yoffset);
g=isNaN(g)?void 0:g;k=p.fixJson(l.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:k,imageData:h,contentType:this.contentType,width:f,height:c,xoffset:d,yoffset:g,xscale:this.xscale,yscale:this.yscale}));k.imageData||delete k.imageData;return k}});F.defaultProps=e;l.setObject("symbol.PictureFillSymbol",F,n);n.symbol.defaultPictureFillSymbol=e;return F})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(F,l,b,q,n,p,m,a,e){var k={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:q.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},h={start:"left",middle:"center",end:"right"},f={left:"start",center:"middle",right:"end",justify:"start"},c={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},d=document.createElement("canvas");F=F(a,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(g,
t,r){l.mixin(this,k);this.font=new e(this.font);this.color=new m(this.color);g&&(l.isObject(g)?(l.mixin(this,g),this.color&&p.isDefined(this.color[0])&&(this.color=m.toDojoColor(this.color)),this.type="textsymbol",this.font=new e(this.font),this.xoffset=q.pt2px(this.xoffset),this.yoffset=q.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=q.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=m.toDojoColor(this.haloColor))):(this.text=g,t&&(this.font=t),r&&(this.color=
r)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(g){this.font=g;return this},setSize:function(g){this.font.size=g;return this},setAngle:function(g){this.angle=g;return this},setOffset:function(g,t){this.xoffset=g;this.yoffset=t;return this},setHaloColor:function(g){this.haloColor=g;return this},setHaloSize:function(g){this.haloSize=g;return this},setAlign:function(g){this.align=g;this.setHorizontalAlignment(g&&h[g.toLowerCase()]||"center");return this},setHorizontalAlignment:function(g){this.horizontalAlignment=
g;return this},getSVGAlign:function(){var g=this.horizontalAlignment;return g=g&&f[g.toLowerCase()]||"middle"},setVerticalAlignment:function(g){this.verticalAlignment=g;return this},getSVGBaseline:function(){var g=this.verticalAlignment;return g&&c[g.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(g){this.decoration=g;this.font||this.setFont(new e);this.font.setDecoration(g);return this},setRotated:function(g){this.rotated=
g;return this},setKerning:function(g){this.kerning=g;return this},setText:function(g){this.text=g;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var g=d&&d.getContext&&d.getContext("2d");if(g){var t=this.font;g.font=(t.style?t.style:q.defaultFont.style)+" "+(t.weight?t.weight:q.defaultFont.weight)+" "+(t.size?t.size:q.defaultFont.size)+"px "+(t.family?t.family:q.defaultFont.family);return g.measureText(this.text).width}g=this.getHeight();t=
0;var r;for(r=0;r<this.text.length;r++){var w=this.text.charAt(r);t=w==w.toUpperCase()?t+.7*g:t+.5*g}return t},getHeight:function(){return q.normalizedLength(this.font.size)},getShapeDescriptors:function(){var g=this.font;if(g){var t={};g.size&&(t.size=g.size);g.style&&(t.style=g.style);g.variant&&(t.variant=g.variant);g.decoration&&(t.decoration=g.decoration);g.weight&&(t.weight=g.weight);g.family&&(t.family=g.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||g&&g.decoration,rotated:this.rotated,kerning:this.kerning},font:t,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var g=q.px2pt(this.xoffset),t=q.px2pt(this.yoffset),r=q.px2pt(this.haloSize);g=isNaN(g)?void 0:g;t=isNaN(t)?void 0:t;r=isNaN(r)?void 0:r;return p.fixJson(l.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:r,haloColor:this.haloColor&&
m.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:g,yoffset:t,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});l.mixin(F,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});F.defaultProps=
k;l.setObject("symbol.TextSymbol",F,n);n.symbol.defaultTextSymbol=k;return F})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(F,l,b,q,n,p){F=F(null,{declaredClass:"esri.symbol.Font",constructor:function(m,a,e,k,h){m?l.isObject(m)?l.mixin(this,m):(this.size=m,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==a&&(this.style=a),void 0!==e&&(this.variant=e),void 0!==k&&(this.weight=k),void 0!==h&&
(this.family=h)):l.mixin(this,q.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>b("ie")&&this.size&&l.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=q.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(m){this.size=this._convert2PxSize(m);return this},_convert2PxSize:function(m){var a;parseFloat(m)==m?a=m:l.isString(m)&&(-1<m.indexOf("pt")?a=q.pt2px(parseFloat(m)):-1<m.indexOf("px")?a=parseFloat(m):-1<m.indexOf("em")?a=
q.pt2px(12*parseFloat(m)):-1<m.indexOf("%")&&(a=q.pt2px(.12*parseFloat(m))));return a},setStyle:function(m){this.style=m;return this},setVariant:function(m){this.variant=m;return this},setWeight:function(m){this.weight=m;return this},setFamily:function(m){this.family=m;return this},setDecoration:function(m){this.decoration=m;return this},toJson:function(){return p.fixJson({size:q.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});l.mixin(F,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});l.setObject("symbol.Font",F,n);return F})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v){function z(Q){Q=new p(Q);return(Q.host+(Q.port?":"+Q.port:"")).toLowerCase()}function C(Q){return this._xhr?this._xhr.getResponseHeader(Q):null}function D(Q,ba){var ca=f.objectToQuery(Q.content);ca&&(Q.url+=(-1===Q.url.indexOf("?")?"?":"\x26")+ca);if(2E3<Q.url.length){if("data:"!==Q.url.toLowerCase().slice(0,5))return ca=new q,ca.reject(n.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),ca;if(3E6<
Q.url.length)return ca=new q,ca.reject(n.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),ca}var ka=new Image;ba.allowImageDataAccess&&(ka.crossOrigin=Q.withCredentials?"use-credentials":"anonymous");var aa=!1,ja=new q(function(oa){aa=!0;ka.onload=ka.onerror=ka.onabort=null;ka.src=""});ca=function(oa){ka.onload=ka.onerror=ka.onabort=null;aa||ja.reject(Error("Unable to load the resource"))};ka.onload=function(){ka.onload=ka.onerror=ka.onabort=
null;aa||ja.resolve(this)};ka.onerror=ca;ka.onabort=ca;ka.alt="";ka.src=Q.url;return ja}function y(Q,ba,ca,ka){var aa=!1,ja=!1,oa=!1,U;if(t.isDefined(ba))if(n.isObject(ba)){aa=!!ba.useProxy;ja=!!ba.usePost;oa=!!ba.returnProgress;var ea=ba.crossOrigin}else aa=!!ba;Q=n.mixin({},Q);delete Q._credential;Q._ssl&&(Q.url=Q.url.replace(/^http:/i,"https:"));10>g("ie")&&!K.test(Q.url)&&(Q.url=encodeURI(Q.url));var fa=Q.content,pa=Q.url,ra=ca&&Q.form,va=S;ea=t.isDefined(ea)?ea:va.useCors;Q.load=function(Ea){if(Ea){if(Ea.error){var La=
n.mixin(Error(),Ea.error);La.log=!!b.isDebug}else"error"===Ea.status&&(La=n.mixin(Error(),Ea),La.log=!!b.isDebug);La&&(Q.failOk=!La.log,t.isDefined(La.httpCode)||(La.httpCode=La.code))}return La||Ea};Q.error=function(Ea,La){La&&La.xhr&&La.xhr.abort();Ea instanceof Error||(Ea=n.mixin(Error(),Ea));Ea.log=!!b.isDebug;Q.failOk=!Ea.log;va.errorHandler(Ea,La);return Ea};Q._token&&(Q.content=Q.content||{},Q.content.token=Q._token);var Fa=0;if(fa&&pa){var Ha=f.objectToQuery(fa);Fa=Ha.length+pa.length+1;g("esri-url-encodes-apostrophe")&&
(Fa=Ha.replace(/'/g,"%27").length+pa.length+1)}Q.timeout=t.isDefined(Q.timeout)?Q.timeout:va.timeout;Q.handleAs=Q.handleAs||"json";try{var Ca=ea&&r.canUseXhr(Q.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(Q.url),T=r.hasSameOrigin(Q.url,window.location.href)||Ca,ia=ja||ca||Fa>va.postLength?!0:!1,qa=T||-1===Q.handleAs.indexOf("json")||!Q.callbackParamName||ca?!1:!0,da=r.getProxyRule(Q.url)||va.alwaysUseProxy||aa||!("image"===Q.handleAs&&!ba.allowImageDataAccess||qa&&!ia||T)?!0:!1;ca&&
!g("esri-file-upload")&&!da&&Ca&&(da=!0);if(da){var Z=r.getProxyUrl(pa,ea);var ma=Z.path;Z._xo&&(Ca=!0);!ia&&ma.length+1+Fa>va.postLength&&(ia=!0);Q.url=ma+"?"+pa;if(ia)Q.content=n.mixin(Z.query||{},fa);else{var I=f.objectToQuery(n.mixin(Z.query||{},fa));I&&(Q.url+="?"+I);Q.content=null}}if(!qa||ia||da){var M=Q.headers;!Ca||M&&M.hasOwnProperty("X-Requested-With")||(M=Q.headers=M||{},M["X-Requested-With"]=null);if(ca){var W=Q.callbackParamName||"callback.html",H=Q.callbackElementName||"textarea",na,
sa,la=ra.elements?ra.elements.length:0;if(fa=Q.content)for(na in fa.token&&/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(pa)&&(pa+=(-1===pa.indexOf("?")?"?":"\x26")+"token\x3d"+fa.token,Q.url=da?ma+"?"+pa:pa,delete fa.token),fa){var Na=fa[na];if(t.isDefined(Na)){var Ra=null;for(sa=0;sa<la;sa++){var ua=ra.elements[sa];if(ua.name===na){Ra=ua;break}}Ra?Ra.value=Na:ka?ra.append(na,Na):ra.appendChild(h.create("input",{type:"hidden",name:na,value:Na}))}}if(g("esri-file-upload")){l.forEach(ra.elements,
function(Ea){Ea.name===W&&ra.removeChild(Ea)});var Aa=ka?ra:new FormData(ra);if(11<=g("safari")&&"entries"in Aa&&"delete"in Aa){ka=[];for(var ya=Aa.entries(),wa=ya.next();!wa.done;){var xa=wa.value;xa[1]instanceof File&&""===xa[1].name&&ka.push(xa[0]);wa=ya.next()}ka.forEach(function(Ea){Aa["delete"](Ea)})}Q.contentType=!1;Q.postData=Aa;delete Q.form}else{ra.enctype="multipart/form-data";9>g("ie")&&(ra.encoding="multipart/form-data");ra.method="post";l.some(ra.elements,function(Ea){return Ea.name===
W})||ra.appendChild(h.create("input",{type:"hidden",name:W,value:H}));if(-1!==pa.toLowerCase().indexOf("addattachment")||-1!==pa.toLowerCase().indexOf("updateattachment"))pa+=(-1===pa.indexOf("?")?"?":"\x26")+W+"\x3d"+H,Q.url=da?ma+"?"+pa:pa;delete Q.content}}if(Ca&&!Q.hasOwnProperty("withCredentials")&&"with-credentials"===S.useCors){ma=da?ma:pa;var Ba=r.canUseXhr(ma,!0),Da=-1<Ba?S.corsEnabledServers[Ba]:null;if(Da&&Da.hasOwnProperty("withCredentials"))Da.withCredentials&&(Q.withCredentials=!0);
else if(c.id){var Ka=c.id.findServerInfo(ma);Ka&&Ka.webTierAuth&&(Q.withCredentials=!0)}}Q=O?O(Q):Q;var Ia=function(){if("image"===Q.handleAs)return D(Q,ba);if(ia){if(ca&&!g("esri-file-upload")){U=new q(function(){Ea.cancel()});var Ea=k.post(Q.url,Q).then(function(Ma){U.resolve(Ma)}).otherwise(function(Ma){U.reject(Ma)});U.addCallback(function(Ma){return Q.load(Ma)});U.addErrback(function(Ma){return Q.error(Ma)});return U}!da&&g("safari")&&(Q.url+=(-1===Q.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+
Y++);if(oa){Q.uploadProgress=!0;Q.data=Q.postData;Q.query=Q.content;U=new q(function(){La.cancel()});var La=a.post(Q.url,Q).then(function(Ma){U.resolve(Ma)},function(Ma){U.reject(Ma)},function(Ma){U.progress({transferType:Ma.transferType,loaded:Ma.loaded,total:Ma.total})});U.addCallback(function(Ma){return Q.load(Ma)});U.addErrback(function(Ma){return Q.error(Ma)});return U}return m.post(Q)}return m.get(Q)};return Q.withCredentials&&v.isNoCorsRequestRequired(pa)?U=v.sendNoCorsRequest(pa,fa).addBoth(function(){var Ea=
Ia();U.ioArgs=Ea.ioArgs;return Ea}):Ia()}Q=O?O(Q):Q;Q.jsonp=Q.callbackParamName;Q.query=Q.content;U=new q(function(){Oa.cancel()});var Oa=e.get(Q.url,Q).then(function(Ea){U.resolve(Ea)}).otherwise(function(Ea){U.reject(Ea)});U.addCallback(function(Ea){return Q.load(Ea)});U.addErrback(function(Ea){return Q.error(Ea)});return U}catch(Ea){return U=new q,U.errback(Q.error(Ea)),U}}function u(Q){var ba=S.corsStatus,ca=r.canUseXhr(Q,!0);-1<ca&&S.corsEnabledServers.splice(ca,1);var ka=new q;ka.reject({log:!!b.isDebug});
ba[z(Q)]=ka.promise;return ca}function B(Q){var ba=S.corsStatus;try{var ca=z(Q);if(S.corsDetection&&S.useCors&&g("esri-cors")&&Q&&-1!==Q.toLowerCase().indexOf("/rest/services")&&!r.hasSameOrigin(Q,window.location.href)&&!r.canUseXhr(Q)){if(ba[ca]&&!ba[ca].isCanceled())return ba[ca];var ka=new q(w._dfdCanceller);ba[ca]=ka.promise;var aa=m.get({url:Q.substring(0,Q.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*S.corsDetectionTimeout});
ka._pendingDfd=aa;aa.then(function(ja){ja?(r.canUseXhr(Q)||S.corsEnabledServers.push(ca),ka.resolve()):ka.reject()},function(ja){ka.reject(ja)});return ka.promise}}catch(ja){}return P}function x(Q){O=Q}function A(Q,ba,ca,ka){function aa(Ca){Ca._pendingDfd=y(ca,ka,ra,pa);if(!Ca._pendingDfd){Ca.ioArgs=Ca._pendingDfd&&Ca._pendingDfd.ioArgs;var T=Error("Deferred object is missing");T.log=!!b.isDebug;Ca.errback(T);Ca._pendingDfd=null;return Ca}Ca._pendingDfd.addCallback(function(ia){if(!ia)return ia;var qa=
Ca._pendingDfd&&Ca._pendingDfd.ioArgs&&Ca._pendingDfd.ioArgs.xhr;if(!qa)return ia;if(qa=qa.getResponseHeader("Content-Type"))if(qa=qa.toLowerCase(),-1===qa.indexOf("text/plain")&&-1===qa.indexOf("application/json"))return ia;if(ia instanceof ArrayBuffer&&750>=ia.byteLength)qa=new Blob([ia]);else if(ia instanceof Blob&&750>=ia.size)qa=ia;else return ia;var da=new q,Z=new FileReader;Z.readAsText(qa);Z.onloadend=function(){if(!Z.error)try{var ma=JSON.parse(Z.result);if(ma.error)var I=ma.error}catch(M){}I?
(I=n.mixin(Error(),I),I.log=!!b.isDebug,null==I.httpCode&&(I.httpCode=I.code),da.reject(I)):da.resolve(ia)};return da.promise}).addCallback(function(ia){Ca.ioArgs=Ca._pendingDfd&&Ca._pendingDfd.ioArgs;ka.returnFullResponse&&(ia={data:ia,_xhr:Ca.ioArgs&&Ca.ioArgs.xhr,getHeader:C});Ca.callback(ia);Ca._pendingDfd=null}).addErrback(function(ia){if(ia){var qa=ia.code;var da=ia.subcode;var Z=(Z=ia.messageCode)&&Z.toUpperCase()}if(ia&&403==qa&&(4==da||ia.message&&-1<ia.message.toLowerCase().indexOf("ssl")&&
-1===ia.message.toLowerCase().indexOf("permission"))){if(!ca._ssl){ca._ssl=ca._sslFromServer=!0;A(Ca,!0,ca,ka);return}}else if(ia&&415==ia.status){if(u(ca.url),!ca._err415){ca._err415=1;A(Ca,!0,ca,ka);return}}else if(c.id&&-1!==l.indexOf(c.id._errorCodes,qa)&&!c.id._isPublic(ca.url)&&!oa&&(403!=qa||-1===l.indexOf(X,Z)&&(!t.isDefined(da)||2==da&&ca._token))){Ca._pendingDfd=c.id.getCredential(ca.url,{token:ca._token,error:ia});Ca._pendingDfd.addCallback(function(ma){ca._token=ma.token;ca._credential=
ma;ca._ssl=ca._sslFromServer||ma.ssl;A(Ca,!0,ca,ka)}).addErrback(function(ma){Ca.errback(ma);Ca._pendingDfd=null});return}Ca.ioArgs=Ca._pendingDfd&&Ca._pendingDfd.ioArgs;Ca.isFulfilled()||Ca.errback(ia);Ca._pendingDfd=null}).then(null,null,function(ia){Ca.progress(ia)})}var ja=ca.form,oa=ka.disableIdentityLookup,U=ka._preLookup,ea=!1;if(g("esri-workers")&&!1!==S.useWorkers)if(!0===ka.useWorkers||!0===S.useWorkers)ea=!0;else if(ka.workerOptions){var fa=ka.workerOptions;if(fa.callback||fa.worker&&fa.worker.worker instanceof
Worker)ea=!0}var pa=ja&&g("esri-file-upload")&&ja instanceof FormData,ra=ja&&(ja.elements?l.some(ja.elements,function(Ca){return"file"===Ca.type}):pa),va=-1!==ca.url.toLowerCase().indexOf("token\x3d")||ca.content&&ca.content.token||ra&&l.some(ja.elements,function(Ca){return"token"===Ca.name})?1:0;if(!ba){Q.addCallback(function(Ca){if(Ca&&(/\/sharing\/rest\/accounts\/self/i.test(ca.url)||/\/sharing\/rest\/portals\/self/i.test(ca.url))){if(!va&&!ca._token&&Ca.user&&Ca.user.username){S.webTierAuthServers.push(z(ca.url));
var T=S.corsEnabledServers,ia=r.canUseXhr(ca.url,!0),qa={host:z(ca.url),withCredentials:!0};if(-1===ia)T.push(qa);else{var da=T[ia];da instanceof RegExp?(qa.host=da,T.splice(ia,1,qa)):"object"===typeof da?da.withCredentials=!0:T.splice(ia,1,qa)}}Array.isArray(Ca.authorizedCrossOriginNoCorsDomains)&&v.registerNoCorsDomains(Ca.authorizedCrossOriginNoCorsDomains)}if(Ca=ca._credential)if(T=(T=c.id.findServerInfo(Ca.server))&&T.owningSystemUrl)T=T.replace(/\/?$/,"/sharing"),(Ca=c.id.findCredential(T,Ca.userId))&&
-1===c.id._getIdenticalSvcIdx(T,Ca)&&Ca.resources.splice(0,0,T)});Q.addBoth(function(Ca){delete ca._credential;!Ca||g("ie")&&Ca.nodeType||(Ca._ssl=ca._ssl)});var Fa=ca.load,Ha=ca.error;Fa&&Q.addCallback(function(Ca){var T=Q._pendingDfd;T=T&&T.ioArgs;return Fa.call(T&&T.args,Ca,T)});Ha&&Q.addErrback(function(Ca){var T=Q._pendingDfd;T=T&&T.ioArgs;return Ha.call(T&&T.args,Ca,T)})}!c.id||va||ca._token||c.id._isPublic(ca.url)||oa&&!U||!(ba=c.id.findCredential(ca.url))||(ca._token=ba.token,ca._ssl=ba.ssl);
ea?ka.workerOptions&&ka.workerOptions.worker?(J||(J=m),m=ka.workerOptions.worker,aa(Q)):F(["./workers/RequestClient"],function(Ca){J||(J=m);if(ka.workerOptions){var T=ka.workerOptions;m=Ca.getClient(T.callback,T.cbFunction)}else m=Ca.getClient();aa(Q)}):(J&&(m=J,J=null),aa(Q));return Q}function E(Q,ba){Q.url=r.fixUrl(Q.url);ba=ba||{};var ca=new q(w._dfdCanceller),ka=B(Q.url);ca._pendingDfd=ka;ka.always(function(aa){aa&&"cancel"===aa.dojoType?ca.reject(aa):A(ca,!1,Q,ba)});return ca}var J=null,O,S=
d.defaults.io,X=["COM_0056","COM_0057","SB_0008"],Y=0,K=/%[0-9A-F]{2}/i,P=function(){var Q=new q;Q.resolve();return Q.promise}();E._makeRequest=y;E._processRequest=A;E._disableCors=u;E._detectCors=B;E.setRequestPreCallback=x;c.request=E;c._makeRequest=y;c._processRequest=A;c._disableCors=u;c._detectCors=B;c.setRequestPreCallback=x;return E})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(F,l,b,
q,n,p){function m(){var r=document.createElement("iframe");r.name="esri_core_jsonp_iframe";r.style.display="none";r.setAttribute("sandbox","allow-scripts");if(!p("ff")&&"srcdoc"in r){var w=F.toUrl("dojo/dojo.js"),v=n.replace("../../../dojo/dojo.js",w);w=w.slice(0,-7);v=v.replace("../../../dojo/",w);r.srcdoc=v}else v=F.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===v.indexOf("https:")&&(v=v.replace("https:","http:")),r.src=v;document.body.appendChild(r);return r}function a(){var r=
new MessageChannel;r.port1.addEventListener("message",e);r.port1.start();return r}function e(r){var w=r.data;if("ready"===w){w=0;for(var v=g;w<v.length;w++)r=v[w],h(r,c);g=null}else if(r=t[w.id])delete t[w.id],w.isError?r.dfd.reject(Error(w.message)):r.dfd.resolve(w.response)}function k(r,w){r.addEventListener("load",function(){r.contentWindow.postMessage("init","*",[w.port2])})}function h(r,w){t[r.message.id]=r;w.port1.postMessage(r.message)}Object.defineProperty(l,"__esModule",{value:!0});var f,
c,d=0,g=[],t={};l.get=function(r,w){if(!p("esri-script-sandbox"))return q.get(r,w);var v=null;w&&(v={jsonp:w.jsonp,preventCache:w.preventCache,query:w.query,timeout:w.timeout});var z=new b(function(){if(g){var D=g.indexOf(C);-1<D&&g.splice(D,1)}else C.message.id in t&&delete t[C.message.id]}),C={dfd:z,message:{id:"id"+(++d+Math.random()),url:r,options:v}};f||(f=m(),c=a(),k(f,c));g?g.push(C):h(C,c);return z.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h){function f(u,B){u.canDelete&&r._remove(u.id,B.options.frameDoc,!0)}function c(u){y&&y.length&&(n.forEach(y,function(B){r._remove(B.id,B.frameDoc);B.frameDoc=null}),y=[]);return u.options.jsonp?!u.data:!0}function d(u){return!!this.scriptLoaded}function g(u){return(u=u.options.checkString)&&eval("typeof("+u+') !\x3d\x3d "undefined"')}function t(u,B){if(this.canDelete){var x=this.response.options;y.push({id:this.id,frameDoc:x.ioArgs?x.ioArgs.frameDoc:x.frameDoc});x.ioArgs&&
(x.ioArgs.frameDoc=null);x.frameDoc=null}B?this.reject(B):this.resolve(u)}function r(u,B,x){var A=b.parseArgs(u,b.deepCopy({},B));u=A.url;B=A.options;var E=b.deferred(A,f,c,B.jsonp?null:B.checkString?g:d,t);p.mixin(E,{id:w+v++,canDelete:!1});B.jsonp&&((new RegExp("[?\x26]"+B.jsonp+"\x3d")).test(u)||(u+=(~u.indexOf("?")?"\x26":"?")+B.jsonp+"\x3d"+(B.frameDoc?"parent.":"")+w+"_callbacks."+E.id),E.canDelete=!0,D[E.id]=function(S){A.data=S;E.handleResponse(A)});b.notify&&b.notify.emit("send",A,E.promise.cancel);
if(!B.canAttach||B.canAttach(E)){var J=r._attach(E.id,u,B.frameDoc,function(S){if(!(S instanceof Error)){var X=Error("Error loading "+(S.target?S.target.src:"script"));X.source=S;S=X}E.reject(S);r._remove(E.id,B.frameDoc,!0)});if(!B.jsonp&&!B.checkString)var O=m(J,z,function(S){if("load"===S.type||C.test(J.readyState))O.remove(),E.scriptLoaded=S})}l(E);return x?E:E.promise}k.add("script-readystatechange",function(u,B){return"undefined"!==typeof B.createElement("script").onreadystatechange&&("undefined"===
typeof u.opera||"[object Opera]"!==u.opera.toString())});var w=F.id.replace(/[\/\.\-]/g,"_"),v=0,z=k("script-readystatechange")?"readystatechange":"load",C=/complete|loaded/,D=q.global[w+"_callbacks"]={},y=[];r.get=r;r._attach=function(u,B,x,A){x=x||h.doc;var E=x.createElement("script");if(A)m.once(E,"error",A);E.type="text/javascript";try{E.src=B}catch(J){A&&A(E)}E.id=u;E.async=!0;E.charset="utf-8";return x.getElementsByTagName("head")[0].appendChild(E)};r._remove=function(u,B,x){e.destroy(a.byId(u,
B));D[u]&&(x?D[u]=function(){delete D[u]}:delete D[u])};r._callbacksProperty=w+"_callbacks";return r})},"esri/core/sniff":function(){define(["../sniff"],function(F){return F})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(F,l,b,q,n,p,m,a,e,k,h,f){function c(C){return!this.isFulfilled()}function d(C){return!!this._finished}
function g(C,D){if(!D)try{var y=C.options,u=r.doc(r._frame),B=y.handleAs;if("html"!==B){if("xml"===B)if("html"===u.documentElement.tagName.toLowerCase()){a("a",u.documentElement).orphan();var x=u.documentElement.innerText||u.documentElement.textContent;x=x.replace(/>\s+</g,"\x3e\x3c");C.text=p.trim(x)}else C.data=u;else C.text=u.getElementsByTagName("textarea")[0].value;n(C)}else C.data=u}catch(A){D=A}D?this.reject(D):this._finished?this.resolve(C):this.reject(Error("Invalid dojo/request/iframe request state"))}
function t(C){this._callNext()}function r(C,D,y){var u=q.parseArgs(C,q.deepCreate(z,D),!0);C=u.url;D=u.options;if("GET"!==D.method&&"POST"!==D.method)throw Error(D.method+" not supported by dojo/request/iframe");r._frame||(r._frame=r.create(r._iframeName,v+"();"));C=q.deferred(u,null,c,d,g,t);C._callNext=function(){this._calledNext||(this._calledNext=!0,r._currentDfd=null,r._fireNextRequest())};C._legacy=y;r._dfdQueue.push(C);r._fireNextRequest();b(C);return y?C:C.promise}var w=F.id.replace(/[\/\.\-]/g,
"_"),v=w+"_onload";f.global[v]||(f.global[v]=function(){var C=r._currentDfd;if(C){var D=k.byId(C.response.options.form)||C._tmpForm;if(D){for(var y=C._contentToClean,u=0;u<y.length;u++)for(var B=y[u],x=0;x<D.childNodes.length;x++){var A=D.childNodes[x];if(A.name===B){h.destroy(A);break}}C._originalAction&&D.setAttribute("action",C._originalAction);C._originalMethod&&(D.setAttribute("method",C._originalMethod),D.method=C._originalMethod);C._originalTarget&&(D.setAttribute("target",C._originalTarget),
D.target=C._originalTarget)}C._tmpForm&&(h.destroy(C._tmpForm),delete C._tmpForm);C._finished=!0}else r._fireNextRequest()});var z={method:"POST"};r.create=function(C,D,y){if(f.global[C])return f.global[C];if(f.global.frames[C])return f.global.frames[C];y||(e("config-useXDomain")&&e("config-dojoBlankHtmlUrl"),y=e("config-dojoBlankHtmlUrl")||l.toUrl("dojo/resources/blank.html"));D=h.place('\x3ciframe id\x3d"'+C+'" name\x3d"'+C+'" src\x3d"'+y+'" onload\x3d"'+D+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
f.body());return f.global[C]=D};r.doc=function(C){if(C.contentDocument)return C.contentDocument;var D=C.name;if(D){var y=f.doc.getElementsByTagName("iframe");if(C.document&&y[D].contentWindow&&y[D].contentWindow.document)return y[D].contentWindow.document;if(f.doc.frames[D]&&f.doc.frames[D].document)return f.doc.frames[D].document}return null};r.setSrc=function(C,D,y){C=f.global.frames[C.name];C.contentWindow&&(C=C.contentWindow);try{y?C.location.replace(D):C.location=D}catch(u){}};r._iframeName=
w+"_IoIframe";r._notifyStart=function(){};r._dfdQueue=[];r._currentDfd=null;r._fireNextRequest=function(){try{if(!r._currentDfd&&r._dfdQueue.length){do var C=r._currentDfd=r._dfdQueue.shift();while(C&&(C.canceled||C.isCanceled&&C.isCanceled())&&r._dfdQueue.length);if(!C||C.canceled||C.isCanceled&&C.isCanceled())r._currentDfd=null;else{var D=C.response,y=D.options,u=C._contentToClean=[],B=k.byId(y.form),x=q.notify,A=y.data||null;if(!C._legacy&&"POST"===y.method&&!B)B=C._tmpForm=h.create("form",{name:w+
"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},f.body());else if("GET"===y.method&&B&&-1<D.url.indexOf("?")){var E=D.url.slice(D.url.indexOf("?")+1);A=p.mixin(m.queryToObject(E),A)}if(B){if(!C._legacy){var J=B;do J=J.parentNode;while(J&&J!==f.doc.documentElement);J||(B.style.position="absolute",B.style.left="-1000px",B.style.top="-1000px",f.body().appendChild(B));B.name||(B.name=w+"_form")}if(A){J=function(Q,ba){h.create("input",{type:"hidden",name:Q,value:ba},B);u.push(Q)};for(var O in A){var S=
A[O];if(p.isArray(S)&&1<S.length)for(E=0;E<S.length;E++)J(O,S[E]);else{var X=a("input[name\x3d'"+O+"']",B);-1==X.indexOf()?J(O,S):X.val(S)}}}var Y=B.getAttributeNode("action"),K=B.getAttributeNode("method"),P=B.getAttributeNode("target");D.url&&(C._originalAction=Y?Y.value:null,Y?Y.value=D.url:B.setAttribute("action",D.url));C._legacy?K&&K.value||(K?K.value=y.method:B.setAttribute("method",y.method)):(C._originalMethod=K?K.value:null,K?K.value=y.method:B.setAttribute("method",y.method));C._originalTarget=
P?P.value:null;P?P.value=r._iframeName:B.setAttribute("target",r._iframeName);B.target=r._iframeName;x&&x.emit("send",D,C.promise.cancel);r._notifyStart(D);B.submit()}else y="",D.options.data&&(y=D.options.data,"string"!==typeof y&&(y=m.objectToQuery(y))),J=D.url+(-1<D.url.indexOf("?")?"\x26":"?")+y,x&&x.emit("send",D,C.promise.cancel),r._notifyStart(D),r.setSrc(r._frame,J,!0)}}}catch(Q){C.reject(Q)}};q.addCommonMethods(r,["GET","POST"]);return r})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),
function(F,l,b,q,n){function p(e){for(;e.childNodes[0]&&1==e.childNodes[0].nodeType;)e=e.childNodes[0];return e}function m(e,k){"string"==typeof e?(e=q.toDom(e,k&&k.ownerDocument),11==e.nodeType&&(e=e.childNodes[0])):1==e.nodeType&&e.parentNode&&(e=e.cloneNode(!1));return e}var a=F.NodeList;l.extend(a,{_placeMultiple:function(e,k){for(var h="string"==typeof e||e.nodeType?F(e):e,f=[],c=0;c<h.length;c++)for(var d=h[c],g=this.length,t=g-1,r;r=this[t];t--)0<c&&(r=this._cloneNode(r),f.unshift(r)),t==g-
1?q.place(r,d,k):d.parentNode.insertBefore(r,d),d=r;f.length&&(f.unshift(0),f.unshift(this.length-1),Array.prototype.splice.apply(this,f));return this},innerHTML:function(e){return arguments.length?this.addContent(e,"only"):this[0].innerHTML},text:function(e){if(arguments.length){for(var k=0,h;h=this[k];k++)1==h.nodeType&&n.set(h,"textContent",e);return this}var f="";for(k=0;h=this[k];k++)f+=n.get(h,"textContent");return f},val:function(e){if(arguments.length){for(var k=l.isArray(e),h=0,f;f=this[h];h++){var c=
f.nodeName.toUpperCase(),d=f.type,g=k?e[h]:e;if("SELECT"==c)for(c=f.options,d=0;d<c.length;d++){var t=c[d];t.selected=f.multiple?-1!=b.indexOf(e,t.value):t.value==g}else"checkbox"==d||"radio"==d?f.checked=f.value==g:f.value=g}return this}if((f=this[0])&&1==f.nodeType){e=f.value||"";if("SELECT"==f.nodeName.toUpperCase()&&f.multiple){e=[];c=f.options;for(d=0;d<c.length;d++)t=c[d],t.selected&&e.push(t.value);e.length||(e=null)}return e}},append:function(e){return this.addContent(e,"last")},appendTo:function(e){return this._placeMultiple(e,
"last")},prepend:function(e){return this.addContent(e,"first")},prependTo:function(e){return this._placeMultiple(e,"first")},after:function(e){return this.addContent(e,"after")},insertAfter:function(e){return this._placeMultiple(e,"after")},before:function(e){return this.addContent(e,"before")},insertBefore:function(e){return this._placeMultiple(e,"before")},remove:a.prototype.orphan,wrap:function(e){if(this[0]){e=m(e,this[0]);for(var k=0,h;h=this[k];k++){var f=this._cloneNode(e);h.parentNode&&h.parentNode.replaceChild(f,
h);p(f).appendChild(h)}}return this},wrapAll:function(e){if(this[0]){e=m(e,this[0]);this[0].parentNode.replaceChild(e,this[0]);e=p(e);for(var k=0,h;h=this[k];k++)e.appendChild(h)}return this},wrapInner:function(e){if(this[0]){e=m(e,this[0]);for(var k=0;k<this.length;k++){var h=this._cloneNode(e);this._wrap(l._toArray(this[k].childNodes),null,this._NodeListCtor).wrapAll(h)}}return this},replaceWith:function(e){e=this._normalize(e,this[0]);for(var k=0,h;h=this[k];k++)this._place(e,h,"before",0<k),h.parentNode.removeChild(h);
return this},replaceAll:function(e){e=F(e);for(var k=this._normalize(this,this[0]),h=0,f;f=e[h];h++)this._place(k,f,"before",0<h),f.parentNode.removeChild(f);return this},clone:function(){for(var e=[],k=0;k<this.length;k++)e.push(this._cloneNode(this[k]));return this._wrap(e,this,this._NodeListCtor)}});a.prototype.html||(a.prototype.html=a.prototype.innerHTML);return a})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(F,l,b){l={_dfdCanceller:function(q){q.canceled=
!0;var n=q._pendingDfd;if(!q.isFulfilled()&&n&&!n.isFulfilled()){n.cancel();var p=n.results&&n.results[1]}q._pendingDfd=null;return p},_fixDfd:function(q){var n=q.then;q.then=function(p,m,a){if(p){var e=p;p=function(k){return k&&k._argsArray?e.apply(null,k):e(k)}}return n.call(this,p,m,a)};return q},_resDfd:function(q,n,p){var m=n.length;1===m?p?q.errback(n[0]):q.callback(n[0]):1<m?(n._argsArray=!0,q.callback(n)):q.callback()}};F.mixin(b,l);return l})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred",
"dojo/_base/url","../config","../urlUtils"],function(F,l,b,q){function n(m){m=new l(m);return m.scheme+"://"+m.authority}var p=b.defaults.io;return{registerNoCorsDomains:function(m){p.crossOriginNoCorsDomains||(p.crossOriginNoCorsDomains={});for(var a=p.crossOriginNoCorsDomains,e=0;e<m.length;e++){var k=m[e];k=k.toLowerCase();/^https?:\/\//.test(k)?a[n(k)]=0:(a[n("http://"+k)]=0,a[n("https://"+k)]=0)}},isNoCorsRequestRequired:function(m){var a=p.crossOriginNoCorsDomains;return a?(m=n(m),m=m.toLowerCase(),
!q.hasSameOrigin(m,window.location.origin)&&a[m]<Date.now()-36E5):!1},sendNoCorsRequest:function(m,a){var e=new F,k=p.crossOriginNoCorsDomains;k&&(k[n(m).toLowerCase()]=Date.now());k=q.urlToObject(m);m=k.path;if(k.query&&"json"===k.query.f||a&&"json"===a.f)m+="?f\x3djson";fetch(m,{mode:"no-cors",credentials:"include"}).then(e.resolve,e.resolve);return e}}})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(F,l,b,q,n,p,m,a,e){F=F(a,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(k,h,f){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(k&&!k.declaredClass){var c=k;h=f&&f.geometryType;this.attributeField=c.field;this.setValueExpression(c.valueExpression);this.valueExpressionTitle=c.valueExpressionTitle;this.legendOptions=c.legendOptions;this.defaultSymbol=(k=c.defaultSymbol)&&(k.declaredClass?k:m.fromJson(k,f));this.backgroundFillSymbol=(k=c.backgroundFillSymbol)&&
(k.declaredClass?k:m.fromJson(k,h?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],c,this);var d=c.minValue;(k=c.classBreakInfos)&&k[0]&&p.isDefined(k[0].classMaxValue)&&l.forEach(k,function(g){var t=g.classMaxValue;g.minValue=d;d=g.maxValue=t},this);"esriGeometryPolygon"===h&&(this.hasVisualVariables("sizeInfo",!1)||m.isPointSymbol(m.getFirstSupportedSymbol(l.map(k,function(g){return g.symbol}))))&&
(f={geometryType:"esriGeometryPoint"});l.forEach(k,function(g){this._addBreakInfo(g,f)},this)}else this.defaultSymbol=k,this.attributeField=h},addBreak:function(k,h,f){k=b.isObject(k)?k:{minValue:k,maxValue:h,symbol:f};this._addBreakInfo(k)},removeBreak:function(k,h){var f=this.breaks,c,d=f.length,g=this._symbols;for(c=0;c<d;c++){var t=f[c];if(t[0]==k&&t[1]==h){f.splice(c,1);delete g[k+"-"+h];this.infos.splice(c,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(k){var h=
this.attributeField,f=k.attributes,c=this.breaks,d=c.length,g=this.isMaxInclusive;if(this.valueExpression)k=this._getDataValue(k,this._cbInfo,null,this._cache.cbInfo);else if(b.isFunction(h))k=h(k);else if(k=parseFloat(f[h]),h=this.normalizationType,h){var t=parseFloat(this.normalizationTotal);f=parseFloat(f[this.normalizationField]);if("log"===h)k=Math.log(k)*Math.LOG10E;else if("percent-of-total"===h&&!isNaN(t))k=k/t*100;else if("field"===h){if(isNaN(k)||isNaN(f))return-1;k/=f}}if(null!=k&&!isNaN(k)&&
"number"===typeof k)for(f=0;f<d;f++)if(h=c[f],h[0]<=k&&(g?k<=h[1]:k<h[1]))return f;return-1},getBreakInfo:function(k){k=this.getBreakIndex(k);return-1!==k?this.infos[k]:null},getSymbol:function(k){return(k=this.breaks[this.getBreakIndex(k)])?this._symbols[k[0]+"-"+k[1]]:this.defaultSymbol},setMaxInclusive:function(k){this.isMaxInclusive=k},setValueExpression:function(k){this.valueExpression=k;this._cbInfo={valueExpression:k};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(k){var h=
this.inherited(arguments);this.valueExpression&&(h=h.concat(e.extractFieldNames(this.valueExpression,k)));h.sort();return l.filter(h,function(f,c){return 0===c||h[c-1]!==f})},isContinuousRenderer:function(){var k=!1;if(this.infos&&1===this.infos.length){var h=this.attributeField,f=this.normalizationField,c=this.valueExpression;k=this.getVisualVariablesForType("colorInfo",!1)||[];var d=this.getVisualVariablesForType("sizeInfo",!1)||[],g=this.getVisualVariablesForType("opacityInfo",!1)||[];k=k.concat(d).concat(g);
k=l.some(k,function(t){return(t.field===h||t.valueExpression===c)&&t.normalizationField==f})}return k},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"],["manual-interval","esriClassifyManual"]],_copy:function(k,h,f){l.forEach(k,function(c){var d=c.split(":");if(1<d.length){c=d[0];var g=this["_"+c+"Enums"];if("rest"===d[1]){var t="1";var r="0"}else"sdk"===d[1]&&(t="0",r="1")}d=h[c];if(void 0!==d&&(f[c]=d,g&&t)){var w,v=g.length;for(w=0;w<v;w++)if(g[w][t]===d){f[c]=g[w][r];break}}},this)},_addBreakInfo:function(k,h){var f=k.minValue,c=k.maxValue;this.breaks.push([f,c]);this.infos.push(k);var d=k.symbol;
d&&!d.declaredClass&&(k.symbol=m.fromJson(d,h));this._symbols[f+"-"+c]=k.symbol},toJson:function(){var k=this.infos||[],h=p.fixJson,f=k[0]&&k[0].minValue,c=this.backgroundFillSymbol;k=b.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:b.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:c&&c.toJson(),minValue:-Infinity===
f?-Number.MAX_VALUE:f,classBreakInfos:l.map(k,function(d){d=b.mixin({},d);d.symbol=d.symbol&&d.symbol.toJson();d.classMaxValue=Infinity===d.maxValue?Number.MAX_VALUE:d.maxValue;delete d.minValue;delete d.maxValue;return h(d)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,k);k.hasOwnProperty("normalizationType")&&!k.normalizationType&&delete k.normalizationType;k.hasOwnProperty("classificationMethod")&&!k.classificationMethod&&
delete k.classificationMethod;return h(k)}});b.setObject("renderer.ClassBreaksRenderer",F,n);return F})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),function(F,l,b,q,n,p,m,a,e,k){var h=Math.PI;F=F(null,{declaredClass:"esri.renderer.Renderer",constructor:function(f){this._cache={};if(f&&!f.declaredClass){this.rotationInfo=
f.rotationInfo;if(!this.rotationInfo){var c=f.rotationType,d=f.rotationExpression;if(c||d)this.rotationInfo={type:c,expression:d}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(f.sizeInfo));this.setColorInfo(this._readColorInfo(f.colorInfo));this.setOpacityInfo(this._readOpacityInfo(f.transparencyInfo));this.setVisualVariables(this._readVariables(f.visualVariables));this.setAuthoringInfo(f.authoringInfo)}this.getSymbol=l.hitch(this,this.getSymbol)},getSymbol:function(f){},
_readSizeInfo:function(f){if(f){var c=f.minSize,d=f.maxSize;c&&(f.minSize="number"===typeof c?n.pt2px(c):this._readSizeInfo(c));d&&(f.maxSize="number"===typeof d?n.pt2px(d):this._readSizeInfo(d));f.stops&&b.forEach(f.stops,function(g){g.size&&"number"===typeof g.size&&(g.size=n.pt2px(g.size))})}return f},_readColorInfo:function(f){f&&(b.forEach(f.colors,function(c,d){l.isArray(c)&&(f.colors[d]=m.toDojoColor(c))}),b.forEach(f.stops,function(c,d){c.color&&l.isArray(c.color)&&(f.stops[d].color=m.toDojoColor(c.color))}));
return f},_readOpacityInfo:function(f){if(f){var c=l.mixin({},f);c.transparencyValues&&(c.opacityValues=b.map(c.transparencyValues,function(d){return 1-d/100}),delete c.transparencyValues);c.stops&&(c.stops=b.map(c.stops,function(d){d=l.mixin({},d);d.opacity=1-d.transparency/100;delete d.transparency;return d}))}return c},_readVariables:function(f){f&&(f=b.map(f,function(c){"sizeInfo"===c.type?c=this._readSizeInfo(c):"colorInfo"===c.type?c=this._readColorInfo(c):"transparencyInfo"===c.type&&(c=this._readOpacityInfo(c),
c.type="opacityInfo");return c},this));return f},setAuthoringInfo:function(f){this.authoringInfo=f},setRotationInfo:function(f){if(f=this.rotationInfo="string"===typeof f?{field:f}:f){if(f.expression&&!l.isFunction(f.expression)&&!f.field){var c=f.expression.match(this.rotationRE);c&&c[1]&&(f.field=c[1])}f.rotationType=f.type}this._cache.rotationInfo=this._processRotationInfo(f);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(f){f&&!f.rotationType&&(f.rotationType="geographic");
return this._createCache(f)},getRotationAngle:function(f,c){var d=this._getVarInfo(c&&c.rotationInfo,"rotationInfo"),g=d.variable;d=this._cache[d.cacheKey];var t="arithmetic"===this._getRotationType(g),r=d&&d.hasExpr,w=null;if(g.field||r)w=this._getDataValue(f,g,null,d),null!=w&&(w=(w+(t?-90:0))*(t?-1:1));return w},_getRotationType:function(f){return f&&("rotationInfo"===f.type?f.rotationType:f.type)},_getDataValue:function(f,c,d,g,t){g||(g=this._getVarInfo(c,d),c=g.variable,g=this._cache[g.cacheKey],
"sizeInfo"===d&&(g=g.root));return f._getDataValue(c,g,e,t)},setVisualVariables:function(f){var c=this._cache;b.forEach(this.visualVariables,function(d,g){c.hasOwnProperty(g)&&(c[g]=null)},this);this.visualVariables=f;b.some(f,function(d){return!!d.target})&&f.sort(function(d,g){return d.target===g.target?0:d.target?1:-1});b.forEach(f,function(d,g){"colorInfo"===d.type?c[g]=this._processColorInfo(d):"opacityInfo"===d.type?c[g]=this._processOpacityInfo(d):"sizeInfo"===d.type?c[g]=this._processSizeInfo(d):
"rotationInfo"===d.type&&(c[g]=this._processRotationInfo(d))},this);return this},getVisualVariableValues:function(f){var c=this.visualVariables,d;c&&(d=b.map(c,function(g){switch(g.type){case "sizeInfo":var t=this.getSize(f,{sizeInfo:g});break;case "colorInfo":t=this.getColor(f,{colorInfo:g});break;case "opacityInfo":t=this.getOpacity(f,{opacityInfo:g});break;case "rotationInfo":t=this.getRotationAngle(f,{rotationInfo:g})}return{variable:g,value:t}},this));return d},getFieldsUsedInExpressions:function(f){var c=
[];b.forEach(this._getCacheObjects(),function(d){d.syntaxTree&&(c=c.concat(e.extractFieldNames(d.syntaxTree,f)))});c.sort();return b.filter(c,function(d,g){return 0===g||c[g-1]!==d})},hasGeometryOperations:function(){return b.some(this._getCacheObjects(),function(f){return f.syntaxTree?e.hasGeometryOperations(f.syntaxTree):!1})},initializeArcadeEngine:function(){var f=[];b.forEach(this._getCacheObjects(),function(c){c.syntaxTree&&f.push(c.syntaxTree)});return k.initialize(f)},hasVisualVariables:function(f,
c){return f?!!this.getVisualVariablesForType(f,c):!!(this.getVisualVariablesForType("sizeInfo",c)||this.getVisualVariablesForType("colorInfo",c)||this.getVisualVariablesForType("opacityInfo",c)||this.getVisualVariablesForType("rotationInfo",c))},getVisualVariablesForType:function(f,c){var d=this.visualVariables;if(!c&&this[f]){"rotationInfo"===f&&(this[f].rotationType=this[f].type);var g=[this[f]]}else d&&(g=b.filter(d,function(t){return t.type===f&&("string"===typeof c?t.target===c:!1===c?!t.target:
!0)}))&&0===g.length&&(g=void 0);return g},setSizeInfo:function(f){this.sizeInfo=this.proportionalSymbolInfo=f;this._cache.sizeInfo=this._processSizeInfo(f);return this},_processSizeInfo:function(f){return f&&{root:this._createCache(f),minSize:this._createCache(f.minSize),maxSize:this._createCache(f.maxSize)}},_convertExpressionToArcade:function(f){f&&f.expression&&(f.valueExpression="$view.scale")},_getVarInfo:function(f,c){if(f&&f.type===c){var d=b.indexOf(this.visualVariables,f);f=this.visualVariables[d]}else d=
c,f=this[c];return{variable:f,cacheKey:d}},setProportionalSymbolInfo:function(f){this.setSizeInfo(f);return this},getSize:function(f,c){var d=this._getVarInfo(c&&c.sizeInfo,"sizeInfo"),g=d.variable;d=this._cache[d.cacheKey];var t=null;if(g){var r=g.minSize;t=g.maxSize;r="object"===typeof r&&r?this._getSize(f,r,d&&d.minSize,c):r;t="object"===typeof t&&t?this._getSize(f,t,d&&d.maxSize,c):t;t=this._getSize(f,g,d&&d.root,c,[r,t])}return t},_getSize:function(f,c,d,g,t){var r=c.stops,w=0,v=d&&d.hasExpr,
z=d&&d.ipData,C=d&&d.isScaleDriven,D="object"===typeof f&&!!f,y="number"===typeof f?f:null;if(c.field||C||v){var u=g&&g.scale;v=t?t[0]:c.minSize;t=t?t[1]:c.maxSize;var B=c.minDataValue,x=c.maxDataValue,A=c.valueUnit||"unknown",E=c.valueRepresentation,J=c.scaleBy,O=g&&g.shape;C?y=u:"number"!==typeof y&&D&&(y=this._getDataValue(f,c,null,d));if(!this._isValidNumber(y))return null;if(r)v=this._lookupData(y,z),y=v[0],t=v[1],y===t?w=r[y].size:(y=r[y].size,r=r[t].size,w=y+(r-y)*v[2]);else if(null!=v&&null!=
t&&null!=B&&null!=x)y<=B?w=v:y>=x?w=t:(r=(y-B)/(x-B),"area"===J&&O?(v=(y="circle"===O)?h*Math.pow(v/2,2):v*v,r=v+r*((y?h*Math.pow(t/2,2):t*t)-v),w=y?2*Math.sqrt(r/h):Math.sqrt(r)):w=v+r*(t-v));else if("unknown"===A)null!=v&&null!=B&&(v&&B?(r=y/B,w="circle"===O?2*Math.sqrt(r*Math.pow(v/2,2)):"square"===O||"diamond"===O||"image"===O?Math.sqrt(r*Math.pow(v,2)):r*v):w=y+(v||B),w=w<v?v:w,null!=t&&w>t&&(w=t));else{r=(g&&g.resolution?g.resolution:1)*this._meterIn[A];if("area"===E)w=Math.sqrt(y/h)/r,w*=2;
else if(w=y/r,"radius"===E||"distance"===E)w*=2;null!=v&&w<v&&(w=v);null!=t&&w>t&&(w=t)}}else w=r&&r[0]&&r[0].size,null==w&&(w=c.minSize);return w=isNaN(w)?0:w},getSizeRangeAtScale:function(f,c){var d=this._getVarInfo(f,"sizeInfo"),g=this._cache[d.cacheKey],t={scale:c};if((f=d.variable)&&c){d=f.minSize;var r=f.maxSize,w=f.stops;w&&w.length?(d=w[0].size,g=w[w.length-1].size):(d="object"===typeof d&&d?this._getSize({},d,g&&g.minSize,t):d,g="object"===typeof r&&r?this._getSize({},r,g&&g.maxSize,t):r);
if(null!=d||null!=g){if(d>g){var v=g;g=d;d=v}v={minSize:d,maxSize:g}}}return v},setColorInfo:function(f){this.colorInfo=f;this._cache.colorInfo=this._processColorInfo(f);return this},_createCache:function(f,c){var d=a.createAttributeCache(f,c);d&&(d.ipData=this._interpolateData(f));return d},_getCacheObjects:function(f){var c;f=f||this._cache;var d=[];for(c in f){var g=f[c];f.hasOwnProperty(c)&&g&&"object"===typeof g&&(g.hasOwnProperty("idSource")?d.push(g):d=d.concat(this._getCacheObjects(g)))}return d},
_processColorInfo:function(f){f&&(b.forEach(f.colors,function(c,d){l.isArray(c)&&(f.colors[d]=new m(c))}),b.forEach(f.stops,function(c,d){c.color&&l.isArray(c.color)&&(f.stops[d].color=new m(c.color))}));return this._createCache(f)},getColor:function(f,c){var d=this._getVarInfo(c&&c.colorInfo,"colorInfo");return this._getColorComponent(f,d.variable,this._cache[d.cacheKey])},setOpacityInfo:function(f){this.opacityInfo=f;this._cache.opacityInfo=this._processOpacityInfo(f);return this},_processOpacityInfo:function(f){return this._createCache(f)},
getOpacity:function(f,c){var d=this._getVarInfo(c&&c.opacityInfo,"opacityInfo");return this._getColorComponent(f,d.variable,this._cache[d.cacheKey],!0)},_getColorComponent:function(f,c,d,g,t){var r="number"===typeof f?f:null,w=d&&d.hasExpr,v=d&&d.ipData,z;c&&c.field||w?("number"!==typeof r&&"object"===typeof f&&f&&(r=this._getDataValue(f,c,null,d)),this._isValidNumber(r)||(r=null),null!=r&&(z=g?this._getOpacity(r,c,v):this._getColor(r,c,v))):c&&(f=c.stops,g?(z=f&&f[0]&&f[0].opacity,null==z&&(z=c.opacityValues&&
c.opacityValues[0])):z=f&&f[0]&&f[0].color||c.colors&&c.colors[0]);t&&(t.data=r,t.value=z);return t||z},_isValidNumber:function(f){return"number"===typeof f&&!isNaN(f)&&Infinity!==f&&-Infinity!==f},_interpolateData:function(f){if(f)if(f.colors||f.opacityValues){var c=(f.colors||f.opacityValues).length,d=f.minDataValue,g=(f.maxDataValue-d)/(c-1);var t=[];for(f=0;f<c;f++)t[f]=d+f*g}else f.stops&&(t=b.map(f.stops,function(r){return r.value}));return t},_getOpacity:function(f,c,d){f=this._lookupData(f,
d);c=c||this.opacityInfo;if(f){d=f[0];var g=f[1];d===g?g=this._getOpacValue(c,d):(d=this._getOpacValue(c,d),c=this._getOpacValue(c,g),g=d+(c-d)*f[2])}return g},_getOpacValue:function(f,c){return f.opacityValues?f.opacityValues[c]:f.stops[c].opacity},_getColor:function(f,c,d){f=this._lookupData(f,d);c=c||this.colorInfo;if(f){var g=f[0];d=f[1];g=g===d?this._getColorObj(c,g):m.blendColors(this._getColorObj(c,g),this._getColorObj(c,d),f[2])}return g},_getColorObj:function(f,c){return f.colors?f.colors[c]:
f.stops[c].color},_lookupData:function(f,c){if(c){var d=0,g=c.length-1;b.some(c,function(r,w){if(f<r)return g=w,!0;d=w;return!1});var t=[d,g,(f-c[d])/(c[g]-c[d])]}return t},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(f){if(f){f=l.mixin({},f);this._convertExpressionToArcade(f);var c=f.minSize,d=f.maxSize;c&&(f.minSize="number"===
typeof c?n.px2pt(c):this._writeSizeInfo(c));d&&(f.maxSize="number"===typeof d?n.px2pt(d):this._writeSizeInfo(d));if(c=f.legendOptions)if(f.legendOptions=l.mixin({},c),c=c.customValues)f.legendOptions.customValues=c.slice(0);f.stops&&(f.stops=b.map(f.stops,function(g){g=l.mixin({},g);g.size&&"number"===typeof g.size&&(g.size=n.px2pt(g.size));return g}))}return f},_writeColorInfo:function(f){f&&(f=l.mixin({},f),f.colors&&(f.colors=b.map(f.colors,function(c){return m.toJsonColor(c)})),f.stops&&(f.stops=
b.map(f.stops,function(c){c=l.mixin({},c);c.color&&(c.color=m.toJsonColor(c.color));return c})),f.legendOptions&&(f.legendOptions=l.mixin({},f.legendOptions)));return f},_writeOpacityInfo:function(f){if(f){var c=l.mixin({},f);c.opacityValues&&(c.transparencyValues=b.map(c.opacityValues,function(d){return 100*(1-d)}),delete c.opacityValues);c.stops&&(c.stops=b.map(c.stops,function(d){d=l.mixin({},d);d.transparency=100*(1-d.opacity);delete d.opacity;return d}));c.legendOptions&&(c.legendOptions=l.mixin({},
c.legendOptions))}return c},toJson:function(f){var c=this.visualVariables,d=l.clone(this.authoringInfo),g=f&&f.useLegacyRotationProperties,t=(f=(f=this.getVisualVariablesForType("rotationInfo",!1))&&f[0])&&f.field,r;f&&(f===this.rotationInfo||g)&&(r=f.expression||t&&(l.isFunction(t)?t:"["+t+"]"));c&&(c=b.map(c,function(w){"sizeInfo"===w.type?w=this._writeSizeInfo(w):"colorInfo"===w.type?w=this._writeColorInfo(w):"opacityInfo"===w.type?(w=this._writeOpacityInfo(w),w.type="transparencyInfo"):"rotationInfo"===
w.type&&(w=g?null:l.mixin({},w));return w},this),c=b.filter(c,function(w){return null!=w}));d&&b.forEach(d.visualVariables,function(w){"opacityInfo"===w.type&&(w.type="transparencyInfo")});return{rotationType:r&&(this._getRotationType(f)||"geographic"),rotationExpression:r,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:c,authoringInfo:d}}});l.setObject("renderer.Renderer",F,p);return F})},
"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(F,l,b,q,n,p){var m={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(a){return"string"===typeof a?q(a,b.outputTypes.Hex):null},getAttributeIdSource:function(a){if(!a)return null;var e=a.field,k=a.valueExpression,h=null;if(k)h=k;else if(F.isFunction(e))h=e.toString();else if(e){var f=
(k=a.normalizationField)?"field":a.normalizationType;a=parseFloat(a.normalizationTotal);f&&(f=f.toLowerCase(),h=e.toLowerCase()+",norm:"+f,k?h+=","+k.toLowerCase():"percent-of-total"===f&&(e=a,"number"===typeof e&&!isNaN(e)&&Infinity!==e&&-Infinity!==e&&0!==a||(a=null),h+=","+a))}return h},createAttributeCache:function(a,e){if(!a)return null;var k=a.valueExpression,h=p.createSyntaxTree(k),f=m.getAttributeIdSource(a);return{attributeInfo:a,isNumeric:!e,idSource:f,id:m.getAttributeId(f),hasExpr:!!k,
compiledFunc:p.createFunction(h),syntaxTree:h,isScaleDriven:!!a.expression||m.viewScaleRE.test(k),dependsOnView:h?p.dependsOnView(h):!1,dependsOnGeometry:h?p.hasGeometryOperations(h):!1,isJSFunc:F.isFunction(a.field)}}};F.setObject("layers.support.attributeUtils",m,n);return m})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(F){F=F.getObject("dojox.encoding.digests",!0);F.outputTypes={Base64:0,Hex:1,String:2,Raw:3};F.addWords=function(l,b){var q=(l&65535)+(b&65535);
return(l>>16)+(b>>16)+(q>>16)<<16|q&65535};F.stringToWord=function(l){for(var b=[],q=0,n=8*l.length;q<n;q+=8)b[q>>5]|=(l.charCodeAt(q/8)&255)<<q%32;return b};F.wordToString=function(l){for(var b=[],q=0,n=32*l.length;q<n;q+=8)b.push(String.fromCharCode(l[q>>5]>>>q%32&255));return b.join("")};F.wordToHex=function(l){for(var b=[],q=0,n=4*l.length;q<n;q++)b.push("0123456789abcdef".charAt(l[q>>2]>>q%4*8+4&15)+"0123456789abcdef".charAt(l[q>>2]>>q%4*8&15));return b.join("")};F.wordToBase64=function(l){for(var b=
[],q=0,n=4*l.length;q<n;q+=3)for(var p=(l[q>>2]>>q%4*8&255)<<16|(l[q+1>>2]>>(q+1)%4*8&255)<<8|l[q+2>>2]>>(q+2)%4*8&255,m=0;4>m;m++)8*q+6*m>32*l.length?b.push("\x3d"):b.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(p>>6*(3-m)&63));return b.join("")};F.stringToUtf8=function(l){for(var b="",q=-1,n,p;++q<l.length;)n=l.charCodeAt(q),p=q+1<l.length?l.charCodeAt(q+1):0,55296<=n&&56319>=n&&56320<=p&&57343>=p&&(n=65536+((n&1023)<<10)+(p&1023),q++),127>=n?b+=String.fromCharCode(n):
2047>=n?b+=String.fromCharCode(192|n>>>6&31,128|n&63):65535>=n?b+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|n&63):2097151>=n&&(b+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|n&63));return b};return F})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(F){function l(a,e){return a<<e|a>>>32-e}function b(a,e,k,h,f,c){return F.addWords(l(F.addWords(F.addWords(e,a),F.addWords(h,c)),f),k)}function q(a,e,k,h,f,c,d){return b(e&k|~e&h,a,e,f,c,d)}function n(a,
e,k,h,f,c,d){return b(e&h|k&~h,a,e,f,c,d)}function p(a,e,k,h,f,c,d){return b(k^(e|~h),a,e,f,c,d)}function m(a,e){a[e>>5]|=128<<e%32;a[(e+64>>>9<<4)+14]=e;for(var k=1732584193,h=-271733879,f=-1732584194,c=271733878,d=0;d<a.length;d+=16){var g=k,t=h,r=f,w=c;k=q(k,h,f,c,a[d+0],7,-680876936);c=q(c,k,h,f,a[d+1],12,-389564586);f=q(f,c,k,h,a[d+2],17,606105819);h=q(h,f,c,k,a[d+3],22,-1044525330);k=q(k,h,f,c,a[d+4],7,-176418897);c=q(c,k,h,f,a[d+5],12,1200080426);f=q(f,c,k,h,a[d+6],17,-1473231341);h=q(h,f,
c,k,a[d+7],22,-45705983);k=q(k,h,f,c,a[d+8],7,1770035416);c=q(c,k,h,f,a[d+9],12,-1958414417);f=q(f,c,k,h,a[d+10],17,-42063);h=q(h,f,c,k,a[d+11],22,-1990404162);k=q(k,h,f,c,a[d+12],7,1804603682);c=q(c,k,h,f,a[d+13],12,-40341101);f=q(f,c,k,h,a[d+14],17,-1502002290);h=q(h,f,c,k,a[d+15],22,1236535329);k=n(k,h,f,c,a[d+1],5,-165796510);c=n(c,k,h,f,a[d+6],9,-1069501632);f=n(f,c,k,h,a[d+11],14,643717713);h=n(h,f,c,k,a[d+0],20,-373897302);k=n(k,h,f,c,a[d+5],5,-701558691);c=n(c,k,h,f,a[d+10],9,38016083);f=
n(f,c,k,h,a[d+15],14,-660478335);h=n(h,f,c,k,a[d+4],20,-405537848);k=n(k,h,f,c,a[d+9],5,568446438);c=n(c,k,h,f,a[d+14],9,-1019803690);f=n(f,c,k,h,a[d+3],14,-187363961);h=n(h,f,c,k,a[d+8],20,1163531501);k=n(k,h,f,c,a[d+13],5,-1444681467);c=n(c,k,h,f,a[d+2],9,-51403784);f=n(f,c,k,h,a[d+7],14,1735328473);h=n(h,f,c,k,a[d+12],20,-1926607734);k=b(h^f^c,k,h,a[d+5],4,-378558);c=b(k^h^f,c,k,a[d+8],11,-2022574463);f=b(c^k^h,f,c,a[d+11],16,1839030562);h=b(f^c^k,h,f,a[d+14],23,-35309556);k=b(h^f^c,k,h,a[d+1],
4,-1530992060);c=b(k^h^f,c,k,a[d+4],11,1272893353);f=b(c^k^h,f,c,a[d+7],16,-155497632);h=b(f^c^k,h,f,a[d+10],23,-1094730640);k=b(h^f^c,k,h,a[d+13],4,681279174);c=b(k^h^f,c,k,a[d+0],11,-358537222);f=b(c^k^h,f,c,a[d+3],16,-722521979);h=b(f^c^k,h,f,a[d+6],23,76029189);k=b(h^f^c,k,h,a[d+9],4,-640364487);c=b(k^h^f,c,k,a[d+12],11,-421815835);f=b(c^k^h,f,c,a[d+15],16,530742520);h=b(f^c^k,h,f,a[d+2],23,-995338651);k=p(k,h,f,c,a[d+0],6,-198630844);c=p(c,k,h,f,a[d+7],10,1126891415);f=p(f,c,k,h,a[d+14],15,-1416354905);
h=p(h,f,c,k,a[d+5],21,-57434055);k=p(k,h,f,c,a[d+12],6,1700485571);c=p(c,k,h,f,a[d+3],10,-1894986606);f=p(f,c,k,h,a[d+10],15,-1051523);h=p(h,f,c,k,a[d+1],21,-2054922799);k=p(k,h,f,c,a[d+8],6,1873313359);c=p(c,k,h,f,a[d+15],10,-30611744);f=p(f,c,k,h,a[d+6],15,-1560198380);h=p(h,f,c,k,a[d+13],21,1309151649);k=p(k,h,f,c,a[d+4],6,-145523070);c=p(c,k,h,f,a[d+11],10,-1120210379);f=p(f,c,k,h,a[d+2],15,718787259);h=p(h,f,c,k,a[d+9],21,-343485551);k=F.addWords(k,g);h=F.addWords(h,t);f=F.addWords(f,r);c=F.addWords(c,
w)}return[k,h,f,c]}F.MD5=function(a,e){var k=e||F.outputTypes.Base64,h=m(F.stringToWord(a),8*a.length);switch(k){case F.outputTypes.Raw:return h;case F.outputTypes.Hex:return F.wordToHex(h);case F.outputTypes.String:return F.wordToString(h);default:return F.wordToBase64(h)}};F.MD5._hmac=function(a,e,k){k=k||F.outputTypes.Base64;var h=F.stringToWord(e);16<h.length&&(h=m(h,8*e.length));var f=[];e=[];for(var c=0;16>c;c++)f[c]=h[c]^909522486,e[c]=h[c]^1549556828;a=m(f.concat(F.stringToWord(a)),512+8*
a.length);a=m(e.concat(a),640);switch(k){case F.outputTypes.Raw:return a;case F.outputTypes.Hex:return F.wordToHex(a);case F.outputTypes.String:return F.wordToString(a);default:return F.wordToBase64(a)}};return F.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(F,l,b,q,n,p,m){function a(c){var d=new q;c.then(function(g){if(!d.isFulfilled())return d.resolve(g)},function(g){if(!d.isFulfilled())return d.reject(g)});
return d.promise}function e(c){return c.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var k={vars:{$feature:"any",$view:"any"}},h=/^\$(feature|aggregatedFeatures)\./i,f={_getSyntaxTree:function(c){return"string"===typeof c?f.createSyntaxTree(c):c},createSyntaxTree:function(c){try{var d=c?p.parseScript(c):null}catch(g){d=null}return d},createFunction:function(c,d){d=d||F.clone(k);var g=f._getSyntaxTree(c);try{var t=g?p.compileScript(g,d):null}catch(r){t=null}return t},createExecContext:function(c,d){return{vars:{$feature:c?
m.createFromGraphic(c):new m,$view:d&&d.view},spatialReference:d&&d.sr}},evalSyntaxTree:function(c,d){try{var g=p.executeScript(c,d)}catch(t){g=null}return g},executeFunction:function(c,d){try{var g=c?c(d):null}catch(t){g=null}return g},executeAsyncFunction:function(c,d){try{var g=c?a(c(d)):(new q).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(t){g=(new q).reject(t)}return g},extractFieldNames:function(c,d){var g=f._getSyntaxTree(c);g=p.extractExpectedFieldLiterals(g);
var t=[];l.forEach(g,function(w){h.test(w)&&(w=w.replace(h,""),t.push(w))});var r=l.filter(t,function(w){return-1!==w.indexOf("*")});t=l.filter(t,function(w){return-1===r.indexOf(w)});d&&l.forEach(r,function(w){var v=new RegExp("^"+w.split(/\*+/).map(e).join(".*")+"$","i");l.forEach(d,function(z){v.test(z)&&t.push(z)})});t.sort();return l.filter(t,function(w,v){return 0===v||t[v-1]!==w})},dependsOnView:function(c){return f.hasVariable(c,"$view")},hasGeometryFunctions:function(c){return(c=f._getSyntaxTree(c))?
p.scriptTouchesGeometry(c):!1},hasGeometryOperations:function(c){return(c=f._getSyntaxTree(c))?p.scriptUsesGeometryEngine(c):!1},enableGeometryOperations:function(){return a(p.enableGeometrySupport())},hasVariable:function(c,d){var g=f._getSyntaxTree(c);return g?p.referencesMember(g,d):!1},hasFunction:function(c,d){var g=f._getSyntaxTree(c);return g?p.referencesFunction(g,d):!1},createFeatureSetFromLayer:function(c,d){d=d||{};var g=p.featureSetUtils();return g?g.constructFeatureSet(c,d.spatialReference,
d.outFields,d.returnGeometry,d.cache):null},createFeatureSetFromLayerUrl:function(c,d){d=d||{};var g=p.featureSetUtils();return g?g.constructFeatureSetFromUrlRaw(c,d.spatialReference,d.outFields,d.returnGeometry,d.cache):null},createFeatureSetCollectionFromMap:function(c,d){var g=p.featureSetUtils();return g?g.createFeatureSetCollectionFromMap(c,c.spatialReference,d&&d.cache):null},createFeatureSetCollectionFromServiceUrl:function(c,d){d=d||{};var g=p.featureSetUtils();return g?g.createFeatureSetCollectionFromService(c,
d.spatialReference,d.cache):null},hasFeatureSetOperations:function(c){return(c=f._getSyntaxTree(c))?p.scriptUsesFeatureSet(c):!1},enableFeatureSetOperations:function(){return a(p.enableFeatureSetSupport().then(function(){var c=p.featureSetUtils();c&&c.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return a(p.enableAsyncSupport())}};F.setObject("support.expressionUtils",f,n);return f})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has".split(" "),
function(F,l,b,q,n,p,m,a,e){function k(Y,K){if(null===A)throw Error("Async Arcade must be enabled for this script");return e("esri-csp-restrictions")||!1===u?function(P){return A.executeScript(Y,P)}:n.compileScript(Y,K,!0)}function h(Y,K){void 0===K&&(K=[]);return m.parseScript(Y,K)}function f(Y,K){if(!0===K.useAsync||!0===Y.isAsync){if(null===A)throw Error("Async Arcade must be enabled for this script");return A.executeScript(Y,K)}return p.executeScript(Y,K)}function c(Y,K){return p.referencesMember(Y,
K)}function d(Y,K){void 0===K&&(K=[]);void 0===Y.usesGeometry&&a.findScriptDependencies(Y,K);return!0===Y.usesGeometry}function g(){return J?J:J=t()}function t(){return b(this,void 0,void 0,function(){return q(this,function(Y){return[2,new Promise(function(K,P){F(["../geometry/geometryEngine","./functions/geomsync"],function(Q,ba){x=!0;ba.setGeometryEngine(Q);K(!0)},function(Q){P(Q)})})]})})}function r(){return null!==O?O:O=w()}function w(){return b(this,void 0,void 0,function(){var Y,K,P;return q(this,
function(Q){switch(Q.label){case 0:return[4,n.enableAsyncSupport()];case 1:return Q.sent(),[4,new Promise(function(ba,ca){F(["./arcadeAsyncRuntime"],function(ka){ba(ka)},ca)})];case 2:A=Q.sent();Y=0;for(K=E;Y<K.length;Y++)P=K[Y],A.extend(P),n.extend(P,"async");E=null;return[2,!0]}})})}function v(){return A?!0:!1}function z(){return S?S:S=C()}function C(){return b(this,void 0,void 0,function(){var Y;return q(this,function(K){switch(K.label){case 0:return[4,r()];case 1:return K.sent(),[4,new Promise(function(P,
Q){F(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(ba,ca,ka,aa,ja){P({featuresetutils:ba,libraries:[ca,ka,aa,ja]})},Q)})];case 2:return Y=K.sent(),X=Y.featuresetutils,A.extend(Y.libraries),n.extend(Y.libraries,"async"),B=!0,[2,!0]}})})}function D(Y,K){void 0===K&&(K=[]);void 0===Y.usesFeatureSet&&a.findScriptDependencies(Y,K);return!0===Y.usesFeatureSet}Object.defineProperty(l,"__esModule",{value:!0});
l.featureSetUtils=l.scriptTouchesGeometry=l.loadScriptDependencies=l.scriptIsAsync=l.scriptUsesFeatureSet=l.enableFeatureSetSupportImpl=l.enableFeatureSetSupport=l.isGeometryEnabled=l.isAsyncEnabled=l.isFeatureSetSupportEnabled=l.enableAsyncSupportImpl=l.enableAsyncSupport=l.enableGeometrySupportImpl=l.enableGeometrySupport=l.scriptUsesGeometryEngine=l.extractExpectedFieldLiterals=l.extractFieldLiterals=l.referencesFunction=l.referencesMember=l.executeScript=l.parseAndExecuteScript=l.scriptCheck=
l.validateScript=l.parseScript=l.extend=l.compileScript=void 0;var y="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),u=function(){if(e("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(Y){return!1}}(),B=!1,x=!1,A=null,E=[];l.compileScript=function(Y,K){return!0===K.useAsync||!0===Y.isAsync?k(Y,K):e("esri-csp-restrictions")?function(P){return p.executeScript(Y,P)}:n.compileScript(Y,K)};
l.extend=function(Y){p.extend(Y);n.extend(Y,"sync");null===A?E.push(Y):(n.extend(Y,"async"),A.extend(Y))};l.parseScript=h;l.validateScript=function(Y,K,P){void 0===P&&(P="");return m.validateScript(Y,K,P)};l.scriptCheck=function(Y,K,P,Q){void 0===Q&&(Q="");return m.scriptCheck(Y,K,P,Q)};l.parseAndExecuteScript=function(Y,K,P){void 0===P&&(P=[]);Y=m.parseScript(Y,P);return f(Y,K)};l.executeScript=f;l.referencesMember=c;l.referencesFunction=function(Y,K){return p.referencesFunction(Y,K)};l.extractFieldLiterals=
function(Y,K){void 0===K&&(K=!1);return m.extractFieldLiterals(Y,K)};l.extractExpectedFieldLiterals=function(Y){return m.extractExpectedFieldLiterals(Y)};l.scriptUsesGeometryEngine=d;var J=null;l.enableGeometrySupport=g;l.enableGeometrySupportImpl=t;var O=null;l.enableAsyncSupport=r;l.enableAsyncSupportImpl=w;l.isFeatureSetSupportEnabled=function(){return B};l.isAsyncEnabled=v;l.isGeometryEnabled=function(){return x};var S=null;l.enableFeatureSetSupport=z;l.enableFeatureSetSupportImpl=C;l.scriptUsesFeatureSet=
D;l.scriptIsAsync=function(Y,K){void 0===K&&(K=[]);void 0===Y.isAsync&&a.findScriptDependencies(Y,K);return!0===Y.isAsync};l.loadScriptDependencies=function(Y,K,P,Q){void 0===P&&(P=[]);void 0===Q&&(Q=!1);return b(this,void 0,void 0,function(){var ba,ca;return q(this,function(ka){switch(ka.label){case 0:ba="string"===typeof Y?h(Y):Y;ca=[];if(ba&&(!1===x&&(d(ba)||Q)&&ca.push(g()),!1===v()&&(!0===ba.isAsync||K)&&ca.push(r()),!1===B)){if(!(ka=D(ba)))a:{ka=ba;if(P)for(var aa=0,ja=P;aa<ja.length;aa++)if(c(ka,
ja[aa])){ka=!0;break a}ka=!1}ka&&ca.push(z())}return ca.length?[4,Promise.all(ca)]:[3,2];case 1:return ka.sent(),[2,!0];case 2:return[2,!0]}})})};l.scriptTouchesGeometry=function(Y){if(d(Y))return!0;Y=a.findFunctionCalls(Y);for(var K=!1,P=0;P<Y.length;P++)if(y.includes(Y[P])){K=!0;break}return K};var X=null;l.featureSetUtils=function(){return X}})},"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(F,l,b,q){function n(p){return p instanceof b?
p:new b(function(m){m(p)})}return new (b||(b=Promise))(function(p,m){function a(h){try{k(q.next(h))}catch(f){m(f)}}function e(h){try{k(q["throw"](h))}catch(f){m(f)}}function k(h){h.done?p(h.value):n(h.value).then(a,e)}k((q=q.apply(F,l||[])).next())})}}()})},"esri/arcade/polyfill/tsSupport/generator":function(){define([],function(){return function(){return function(F,l){function b(k){return function(h){return q([k,h])}}function q(k){if(p)throw new TypeError("Generator is already executing.");for(;n;)try{if(p=
1,m&&(a=k[0]&2?m["return"]:k[0]?m["throw"]||((a=m["return"])&&a.call(m),0):m.next)&&!(a=a.call(m,k[1])).done)return a;if(m=0,a)k=[k[0]&2,a.value];switch(k[0]){case 0:case 1:a=k;break;case 4:return n.label++,{value:k[1],done:!1};case 5:n.label++;m=k[1];k=[0];continue;case 7:k=n.ops.pop();n.trys.pop();continue;default:if(!(a=n.trys,a=0<a.length&&a[a.length-1])&&(6===k[0]||2===k[0])){n=0;continue}if(3===k[0]&&(!a||k[1]>a[0]&&k[1]<a[3]))n.label=k[1];else if(6===k[0]&&n.label<a[1])n.label=a[1],a=k;else if(a&&
n.label<a[2])n.label=a[2],n.ops.push(k);else{a[2]&&n.ops.pop();n.trys.pop();continue}}k=l.call(F,n)}catch(h){k=[6,h],m=0}finally{p=a=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},p,m,a,e;return e={next:b(0),"throw":b(1),"return":b(2)},"function"===typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e}}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y,u,B,x,A,E,J){function O(M,W,H){try{return H(M,null,W.arguments)}catch(na){throw na;}}function S(M,W){try{switch(W.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return Q(M,W);case "VariableDeclaration":for(var H=[],na=0;na<W.declarations.length;na++)H.push(S(M,W.declarations[na]));return H.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return P(M,W);case "FunctionDeclaration":var sa=
W.id.name.toLowerCase(),la={isAsync:M.isAsync,spatialReference:M.spatialReference,console:M.console,lrucache:M.lrucache,interceptor:M.interceptor,services:M.services,symbols:M.symbols,mangleMap:M.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:M.depthCounter+1,globalScope:M.globalScope};if(64<la.depthCounter)throw Error("Exceeded maximum function depth");H="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(na=0;na<W.params.length;na++){var Na=W.params[na].name.toLowerCase(),Ra=fa(M);la.localScope._SymbolsMap[Na]=Ra;la.mangleMap[Na]=Ra;H+="lscope['"+Ra+"']\x3darguments["+na.toString()+"];\n"}!0===M.isAsync?(H=H+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(P(la,W.body)+"\n return lastStatement; "),H=H+"});  }, runtimeCtx),"+(W.params.length+")")):H+=P(la,W.body)+"\n return lastStatement; }, runtimeCtx),"+W.params.length+")";H+="\n lastStatement \x3d lc.voidOperation; \n";if(void 0!==
M.globalScope[sa])var ua="gscope['"+sa+"']\x3d"+H;else void 0!==M.globalScope._SymbolsMap[sa]?ua="gscope['"+M.globalScope._SymbolsMap[sa]+"']\x3d"+H:(Ra=fa(M),M.globalScope._SymbolsMap[sa]=Ra,M.mangleMap[sa]=Ra,ua="gscope['"+Ra+"']\x3d"+H);return ua;case "ReturnStatement":var Aa=null===W.argument?"return lc.voidOperation":"return "+S(M,W.argument);return Aa;case "IfStatement":if("AssignmentExpression"===W.test.type||"UpdateExpression"===W.test.type)throw Error(d.nodeErrorMessage(W.test,"RUNTIME",
"CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ya=S(M,W.test),wa=pa(M),xa="var "+wa+" \x3d "+ya+";\n if ("+wa+" \x3d\x3d\x3d true) {\n"+K(M,W.consequent)+"\n }\n";xa=null!==W.alternate?xa+("else if ("+wa+"\x3d\x3d\x3dfalse)   { \n"+K(M,W.alternate)+"}\n"):xa+("else if ("+wa+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return xa+="else { lang.error({type: '"+W.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Ba="AssignmentExpression"===
W.expression.type?"lastStatement \x3d lc.voidOperation; "+S(M,W.expression)+"; \n ":"lastStatement \x3d "+S(M,W.expression)+"; ";return Ba;case "AssignmentExpression":return Y(M,W);case "UpdateExpression":return X(M,W);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Da=[];sa=ua=0;for(na=W.quasis;sa<na.length;sa++){var Ka=na[sa];Da.push(Ka.value?JSON.stringify(Ka.value.cooked):JSON.stringify(""));!1===Ka.tail&&(Da.push(W.expressions[ua]?
"lang.castString(lang.aCheck("+S(M,W.expressions[ua])+", 'TemplateLiteral'))":""),ua++)}H="(["+Da.join(",")+"]).join('')"}catch(Va){throw Va;}return H;case "TemplateElement":return JSON.stringify(W.value?W.value.cooked:"");case "ForStatement":H="lastStatement \x3d lc.voidOperation; \n";null!==W.init&&(H+=S(M,W.init)+"; ");var Ia=pa(M),Oa=pa(M);H+="var "+Ia+" \x3d true; \n do { ";null!==W.update&&(H+=" if ("+Ia+"\x3d\x3d\x3dfalse) {\n "+S(M,W.update)+"  \n}\n "+Ia+"\x3dfalse; \n");null!==W.test&&(H+=
"var "+Oa+" \x3d "+S(M,W.test)+"; ",H+="if ("+Oa+"\x3d\x3d\x3dfalse) { break; } else if ("+Oa+"!\x3d\x3dtrue) { lang.error({type: '"+W.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");H+=S(M,W.body);null!==W.update&&(H+="\n "+S(M,W.update));return H+("\n"+Ia+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ea=pa(M),La=pa(M),Ma=pa(M),Pa="var "+Ea+" \x3d "+S(M,W.right)+";\n";"VariableDeclaration"===W.left.type&&(Pa+=S(M,W.left));var ab=
"VariableDeclaration"===W.left.type?W.left.declarations[0].id.name:W.left.name;ab=ab.toLowerCase();H="";null!==M.localScope&&(void 0!==M.localScope[ab]?H="lscope['"+ab+"']":void 0!==M.localScope._SymbolsMap[ab]&&(H="lscope['"+M.localScope._SymbolsMap[ab]+"']"));""===H&&(void 0!==M.globalScope[ab]?H="gscope['"+ab+"']":void 0!==M.globalScope._SymbolsMap[ab]&&(H="gscope['"+M.globalScope._SymbolsMap[ab]+"']"));Pa=Pa+("if ("+Ea+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ea+") || lc.isString("+Ea+")) {var ")+(La+"\x3d"+Ea+".length; \nfor(var ")+(Ma+"\x3d0; "+Ma+"\x3c"+La+"; "+Ma+"++) {\n");Pa+=H+"\x3d"+Ma+";\n";Pa+=S(M,W.body);Pa+="\n}\n";Pa+=" lastStatement \x3d lc.voidOperation; \n";Pa+=" \n}\n";Pa+="else if (lc.isImmutableArray("+Ea+")) {";Pa=Pa+("var "+La+"\x3d"+Ea+".length(); \nfor(var ")+(Ma+"\x3d0; "+Ma+"\x3c"+La+"; "+Ma+"++) {\n");Pa+=H+"\x3d"+Ma+";\n";Pa+=S(M,W.body);Pa+="\n}\n";Pa+=" lastStatement \x3d lc.voidOperation; \n";Pa+=" \n}\n";Pa+="else if (( "+
Ea+" instanceof lang.Dictionary) || ( "+Ea+" instanceof lang.Feature)) {";Pa=Pa+("var "+La+"\x3d"+Ea+".keys(); \nfor(var ")+(Ma+"\x3d0; "+Ma+"\x3c"+La+".length; "+Ma+"++) {\n");Pa+=H+"\x3d"+La+"["+Ma+"];\n";Pa+=S(M,W.body);Pa+="\n}\n";Pa+=" lastStatement \x3d lc.voidOperation; \n";Pa+=" \n}\n";M.isAsync&&(Pa+="else if (lc.isFeatureSet("+Ea+")) {",Pa=Pa+("var "+La+"\x3d"+Ea+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Ma+"\x3dlang. graphicToFeature( yield "+La+".next(),"+Ea+"); "+Ma+"!\x3dnull; "+
Ma+"\x3dlang. graphicToFeature( yield "+La+".next(),"+Ea+")) {\n")+(H+"\x3d"+Ma+";\n"),Pa+=S(M,W.body),Pa+="\n}\n",Pa+=" lastStatement \x3d lc.voidOperation; \n",Pa+=" \n}\n");return Pa+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return ca(M,W);case "MemberExpression":try{H=void 0;H=!0===W.computed?S(M,W.property):"'"+W.property.name+"'";var fb="lang.member("+S(M,W.object)+","+H+")"}catch(Va){throw Va;}return fb;case "Literal":return null===W.value||void 0===W.value?"null":
JSON.stringify(W.value);case "ThisExpression":throw Error(d.nodeErrorMessage(W,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==W.callee.type)throw Error(d.nodeErrorMessage(W,"RUNTIME","ONLYNODESSUPPORTED"));var gb=W.callee.name.toLowerCase();H="";null!==M.localScope&&(void 0!==M.localScope[gb]?H="lscope['"+gb+"']":void 0!==M.localScope._SymbolsMap[gb]&&(H="lscope['"+M.localScope._SymbolsMap[gb]+"']"));""===H&&(void 0!==M.globalScope[gb]?H="gscope['"+gb+"']":void 0!==M.globalScope._SymbolsMap[gb]&&
(H="gscope['"+M.globalScope._SymbolsMap[gb]+"']"));if(""!==H){na="[";for(Ka=0;Ka<W.arguments.length;Ka++)0<Ka&&(na+=", "),na+=S(M,W.arguments[Ka]);na+="]";Da=M.isAsync?"(yield lang.callfunc("+H+","+na+",runtimeCtx) )":"lang.callfunc("+H+","+na+",runtimeCtx)"}else throw Error(d.nodeErrorMessage(W,"RUNTIME","NOTFOUND"));}catch(Va){throw Va;}return Da;case "UnaryExpression":try{var Cb="lang.unary("+S(M,W.argument)+",'"+W.operator+"')"}catch(Va){throw Va;}return Cb;case "BinaryExpression":try{var Db=
"lang.binary("+S(M,W.left)+","+S(M,W.right)+",'"+W.operator+"')"}catch(Va){throw Va;}return Db;case "LogicalExpression":try{if("AssignmentExpression"===W.left.type||"UpdateExpression"===W.left.type)throw Error(d.nodeErrorMessage(W.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===W.right.type||"UpdateExpression"===W.right.type)throw Error(d.nodeErrorMessage(W.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===W.operator||"||"===W.operator)var jb=
"(lang.logicalCheck("+S(M,W.left)+") "+W.operator+" lang.logicalCheck("+S(M,W.right)+"))";else throw Error(d.nodeErrorMessage(W,"RUNTIME","ONLYORORAND"));}catch(Va){throw Va;}return jb;case "ConditionalExpression":throw Error(d.nodeErrorMessage(W,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{H=[];for(na=0;na<W.elements.length;na++)"Literal"===W.elements[na].type?H.push(S(M,W.elements[na])):H.push("lang.aCheck("+S(M,W.elements[na])+",'ArrayExpression')");var lb="["+H.join(",")+"]"}catch(Va){throw Va;
}return lb;case "ObjectExpression":H="lang.dictionary([";for(na=0;na<W.properties.length;na++){var ub=W.properties[na],vb="Identifier"===ub.key.type?"'"+ub.key.name+"'":S(M,ub.key),zb=S(M,ub.value);0<na&&(H+=",");H+="lang.strCheck("+vb+",'ObjectExpression'),lang.aCheck("+zb+", 'ObjectExpression')"}return H+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(d.nodeErrorMessage(W,"RUNTIME","NOTSUPPORTED"));default:throw Error(d.nodeErrorMessage(W,"RUNTIME","UNREOGNISED"));
}}catch(Va){throw Va;}}function X(M,W){var H=null,na="";if("MemberExpression"===W.argument.type)return H=S(M,W.argument.object),na=!0===W.argument.computed?S(M,W.argument.property):"'"+W.argument.property.name+"'","lang.memberupdate("+H+","+na+",'"+W.operator+"',"+W.prefix+")";H=W.argument.name.toLowerCase();if(null!==M.localScope){if(void 0!==M.localScope[H])return"lang.update(lscope, '"+H+"','"+W.operator+"',"+W.prefix+")";if(void 0!==M.localScope._SymbolsMap[H])return"lang.update(lscope, '"+M.localScope._SymbolsMap[H]+
"','"+W.operator+"',"+W.prefix+")"}if(void 0!==M.globalScope[H])return"lang.update(gscope, '"+H+"','"+W.operator+"',"+W.prefix+")";if(void 0!==M.globalScope._SymbolsMap[H])return"lang.update(gscope, '"+M.globalScope._SymbolsMap[H]+"','"+W.operator+"',"+W.prefix+")";throw Error("Variable not recognised");}function Y(M,W){var H=S(M,W.right),na=null,sa="";if("MemberExpression"===W.left.type)return na=S(M,W.left.object),sa=!0===W.left.computed?S(M,W.left.property):"'"+W.left.property.name+"'","lang.assignmember("+
na+","+sa+",'"+W.operator+"',"+H+")";na=W.left.name.toLowerCase();if(null!==M.localScope){if(void 0!==M.localScope[na])return"lscope['"+na+"']\x3dlang.assign("+H+",'"+W.operator+"', lscope['"+na+"'])";if(void 0!==M.localScope._SymbolsMap[na])return"lscope['"+M.localScope._SymbolsMap[na]+"']\x3dlang.assign("+H+",'"+W.operator+"', lscope['"+M.localScope._SymbolsMap[na]+"'])"}if(void 0!==M.globalScope[na])return"gscope['"+na+"']\x3dlang.assign("+H+",'"+W.operator+"', gscope['"+na+"'])";if(void 0!==M.globalScope._SymbolsMap[na])return"gscope['"+
M.globalScope._SymbolsMap[na]+"']\x3dlang.assign("+H+",'"+W.operator+"', gscope['"+M.globalScope._SymbolsMap[na]+"'])";throw Error("Variable not recognised");}function K(M,W){return"BlockStatement"===W.type?S(M,W):"ReturnStatement"===W.type||"BreakStatement"===W.type||"ContinueStatement"===W.type?S(M,W)+"; ":"UpdateExpression"===W.type?"lastStatement \x3d "+S(M,W)+"; ":"ExpressionStatement"===W.type?S(M,W):"ObjectExpression"===W.type?"lastStatement \x3d "+S(M,W)+"; ":S(M,W)+"; "}function P(M,W){for(var H=
"",na=0;na<W.body.length;na++)H="ReturnStatement"===W.body[na].type?H+(S(M,W.body[na])+"; \n"):"BreakStatement"===W.body[na].type?H+(S(M,W.body[na])+"; \n"):"ContinueStatement"===W.body[na].type?H+(S(M,W.body[na])+"; \n"):"UpdateExpression"===W.body[na].type?H+("lastStatement \x3d "+S(M,W.body[na])+"; \n"):"ObjectExpression"===W.body[na].type?H+("lastStatement \x3d "+S(M,W.body[na])+"; \n"):H+(S(M,W.body[na])+" \n");return H}function Q(M,W){var H=null===W.init?null:S(M,W.init);H===c.voidOperation&&
(H=null);var na=W.id.name.toLowerCase();if(null!==M.localScope){if(void 0!==M.localScope[na])return"lscope['"+na+"']\x3d"+H+"; ";if(void 0!==M.localScope._SymbolsMap[na])return"lscope['"+M.localScope._SymbolsMap[na]+"']\x3d"+H+"; ";var sa=fa(M);M.localScope._SymbolsMap[na]=sa;M.mangleMap[na]=sa;return"lscope['"+sa+"']\x3d"+H+"; "}if(void 0!==M.globalScope[na])return"gscope['"+na+"']\x3d"+H+"; ";if(void 0!==M.globalScope._SymbolsMap[na])return"gscope['"+M.globalScope._SymbolsMap[na]+"']\x3d"+H+"; ";
sa=fa(M);M.globalScope._SymbolsMap[na]=sa;M.mangleMap[na]=sa;return"gscope['"+sa+"']\x3d"+H+"; "}function ba(M,W,H){W=W.toLowerCase();switch(W){case "hasz":return M=M.hasZ,void 0===M?!1:M;case "hasm":return M=M.hasM,void 0===M?!1:M;case "spatialreference":return W=M.spatialReference._arcadeCacheId,void 0===W&&(H=!0,Object.freeze&&Object.isFrozen(M.spatialReference)&&(H=!1),H&&(Ca++,W=M.spatialReference._arcadeCacheId=Ca)),M=new e({wkt:M.spatialReference.wkt,wkid:M.spatialReference.wkid}),void 0!==
W&&(M._arcadeCacheId="SPREF"+W.toString()),M}switch(M.type){case "extent":switch(W){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return M=M[W],void 0!==M?M:null;case "type":return"Extent"}break;case "polygon":switch(W){case "rings":return W=M.getCacheValue("_arcadeCacheId"),void 0===W&&(Ca++,W=Ca,M.setCacheValue("_arcadeCacheId",W)),M=new h(M.rings,M.spatialReference,!0===M.hasZ,!0===M.hasM,W);case "type":return"Polygon"}break;case "point":switch(W){case "x":case "y":case "z":case "m":return void 0!==
M[W]?M[W]:null;case "type":return"Point"}break;case "polyline":switch(W){case "paths":return W=M.getCacheValue("_arcadeCacheId"),void 0===W&&(Ca++,W=Ca,M.setCacheValue("_arcadeCacheId",W)),M=new h(M.paths,M.spatialReference,!0===M.hasZ,!0===M.hasM,W);case "type":return"Polyline"}break;case "multipoint":switch(W){case "points":return W=M.getCacheValue("_arcadeCacheId"),void 0===W&&(Ca++,W=Ca,M.setCacheValue("_arcadeCacheId",W)),M=new f(M.points,M.spatialReference,!0===M.hasZ,!0===M.hasM,W,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(H,
"RUNTIME","PROPERTYNOTFOUND"));}function ca(M,W){try{var H=W.name.toLowerCase();if(null!==M.localScope){if(void 0!==M.localScope[H])return"lscope['"+H+"']";if(void 0!==M.localScope._SymbolsMap[H])return"lscope['"+M.localScope._SymbolsMap[H]+"']"}if(void 0!==M.globalScope[H])return"gscope['"+H+"']";if(void 0!==M.globalScope._SymbolsMap[H])return"gscope['"+M.globalScope._SymbolsMap[H]+"']";throw Error(d.nodeErrorMessage(W,"RUNTIME","VARIABLENOTFOUND"));}catch(na){throw na;}}function ka(M){return null===
M?"":c.isArray(M)||c.isImmutableArray(M)?"Array":c.isDate(M)?"Date":c.isString(M)?"String":c.isBoolean(M)?"Boolean":c.isNumber(M)?"Number":M instanceof a?"Attachment":M instanceof m?"Portal":M instanceof e?"Dictionary":c.isFeature(M)?"Feature":M instanceof x?"Point":M instanceof A?"Polygon":M instanceof E?"Polyline":M instanceof B?"Multipoint":M instanceof y?"Extent":c.isFunctionParameter(M)?"Function":c.isFeatureSet(M)?"FeatureSet":c.isFeatureSetCollection(M)?"FeatureSetCollection":M===c.voidOperation?
"":"number"===typeof M&&isNaN(M)?"Number":"Unrecognised Type"}function aa(M,W,H,na){try{if(c.equalityTest(W[H],na))return W[H+1];var sa=W.length-H;return 1===sa?W[H]:2===sa?null:3===sa?W[H+2]:aa(M,W,H+2,na)}catch(la){throw la;}}function ja(M,W,H,na){try{if(!0===na)return W[H+1];if(3===W.length-H)return W[H+2];var sa=W[H+2];if(!1===c.isBoolean(sa))throw Error("WHEN needs boolean test conditions");return ja(M,W,H+2,sa)}catch(la){throw la;}}function oa(M,W){var H=M.length,na=Math.floor(H/2);if(0===H)return[];
if(1===H)return[M[0]];var sa=oa(M.slice(0,na),W);H=oa(M.slice(na,H),W);for(na=[];0<sa.length||0<H.length;)if(0<sa.length&&0<H.length){var la=W(sa[0],H[0]);isNaN(la)&&(la=0);0>=la?(na.push(sa[0]),sa=sa.slice(1)):(na.push(H[0]),H=H.slice(1))}else 0<sa.length?(na.push(sa[0]),sa=sa.slice(1)):0<H.length&&(na.push(H[0]),H=H.slice(1));return na}function U(M,W){return b(this,void 0,void 0,function(){var H,na,sa,la;return q(this,function(Na){switch(Na.label){case 0:H=M.length;na=Math.floor(H/2);if(0===H)return[2,
[]];if(1===H)return[2,[M[0]]];sa=[U(M.slice(0,na),W),U(M.slice(na,H),W)];return[4,Promise.all(sa)];case 1:return la=Na.sent(),[2,ea(la[0],la[1],W,[])]}})})}function ea(M,W,H,na){return b(this,void 0,void 0,function(){var sa,la;return q(this,function(Na){switch(Na.label){case 0:return sa=na,0<M.length||0<W.length?0<M.length&&0<W.length?[4,H(M[0],W[0])]:[3,2]:[3,4];case 1:return la=Na.sent(),isNaN(la)&&(la=1),0>=la?(sa.push(M[0]),M=M.slice(1)):(sa.push(W[0]),W=W.slice(1)),[2,ea(M,W,H,na)];case 2:if(0<
M.length)return sa.push(M[0]),M=M.slice(1),[2,ea(M,W,H,na)];if(0<W.length)return sa.push(W[0]),W=W.slice(1),[2,ea(M,W,H,na)];Na.label=3;case 3:return[3,5];case 4:return[2,na];case 5:return[2]}})})}function fa(M){M.symbols.symbolCounter++;return"_T"+M.symbols.symbolCounter.toString()}function pa(M){M.symbols.symbolCounter++;return"_Tvar"+M.symbols.symbolCounter.toString()}function ra(M,W,H){var na={};M||(M={});H||(H={});na._SymbolsMap={};na.textformatting=1;na.infinity=1;na.pi=1;for(var sa in W)na[sa]=
1;for(sa in H)na[sa]=1;for(sa in M)na[sa]=1;return na}function va(M,W){for(var H={mode:W,compiled:!0,functions:{},signatures:[],standardFunction:O,standardFunctionAsync:O,evaluateIdentifier:Fa},na=0;na<M.length;na++)M[na].registerFunctions(H);if("sync"===W){for(var sa in H.functions)T[sa]=new c.NativeFunction(H.functions[sa]),da.prototype[sa]=T[sa];for(na=0;na<H.signatures.length;na++)d.addFunctionDeclaration(H.signatures[na],"sync")}else{for(sa in H.functions)ia[sa]=new c.NativeFunction(H.functions[sa]),
Z.prototype[sa]=ia[sa];for(na=0;na<H.signatures.length;na++)d.addFunctionDeclaration(H.signatures[na],"async")}}function Fa(M,W){var H=W.name;if("_SymbolsMap"===H)throw Error("Illegal");if(0<M.localStack.length){if("_t"!==H.substr(0,2).toLowerCase()&&void 0!==M.localStack[M.localStack.length-1][H])return M.localStack[M.localStack.length-1][H];var na=M.mangleMap[H];if(void 0!==na&&void 0!==M.localStack[M.localStack.length-1][na])return M.localStack[M.localStack.length-1][na]}if("_t"!==H.substr(0,2).toLowerCase()&&
void 0!==M.globalScope[H]||1===M.globalScope._SymbolsMap[H])return M.globalScope[H];H=M.mangleMap[H];if(void 0!==H)return M.globalScope[H]}function Ha(M){}Object.defineProperty(l,"__esModule",{value:!0});l.enableAsyncSupport=l.compileScript=l.referencesFunction=l.referencesMember=l.validateScript=l.extractExpectedFieldLiterals=l.extractFieldLiterals=l.executeScript=l.extend=l.functionHelper=void 0;var Ca=0,T={};t.registerFunctions(T,O);C.registerFunctions(T,O);v.registerFunctions(T,O);r.registerFunctions(T,
O);z.registerFunctions(T,O);T["typeof"]=function(M,W){return O(M,W,function(H,na,sa){c.pcCheck(sa,1,1);H=ka(sa[0]);if("Unrecognised Type"===H)throw Error("Unrecognised Type");return H})};T.iif=function(M,W){try{return O(M,W,function(H,na,sa){c.pcCheck(sa,3,3);if(!1===c.isBoolean(sa[0]))throw Error("IF Function must have a boolean test condition");return sa[0]?sa[1]:sa[2]})}catch(H){throw H;}};T.decode=function(M,W){try{return O(M,W,function(H,na,sa){if(2>sa.length)throw Error("Missing Parameters");
if(2===sa.length)return sa[1];if(0===(sa.length-1)%2)throw Error("Must have a default value result.");return aa(M,sa,1,sa[0])})}catch(H){throw H;}};T.when=function(M,W){try{return O(M,W,function(H,na,sa){if(3>sa.length)throw Error("Missing Parameters");if(0===sa.length%2)throw Error("Must have a default value result.");H=sa[0];if(!1===c.isBoolean(H))throw Error("WHEN needs boolean test conditions");return ja(M,sa,0,H)})}catch(H){throw H;}};T.top=function(M,W){return O(M,W,function(H,na,sa){c.pcCheck(sa,
2,2);if(c.isArray(sa[0]))return c.toNumber(sa[1])>=sa[0].length?sa[0].slice(0):sa[0].slice(0,c.toNumber(sa[1]));if(c.isImmutableArray(sa[0]))return c.toNumber(sa[1])>=sa[0].length()?sa[0].slice(0):sa[0].slice(0,c.toNumber(sa[1]));throw Error("Top cannot accept this parameter type");})};T.first=function(M,W){return O(M,W,function(H,na,sa){c.pcCheck(sa,1,1);return c.isArray(sa[0])?0===sa[0].length?null:sa[0][0]:c.isImmutableArray(sa[0])?0===sa[0].length()?null:sa[0].get(0):null})};T.sort=function(M,
W){return O(M,W,function(H,na,sa){c.pcCheck(sa,1,2);na=sa[0];c.isImmutableArray(na)&&(na=na.toArray());if(!1===c.isArray(na))throw Error("Illegal Argument");if(1<sa.length){if(!1===c.isFunctionParameter(sa[1]))throw Error("Illegal Argument");var la=function(ya,wa){return I.callfunc(sa[1],[ya,wa],H)};return M.isAsync?U(na,la):na=oa(na,function(ya,wa){return la(ya,wa)})}if(0===na.length)return[];for(var Na={},Ra=0;Ra<na.length;Ra++){var ua=ka(na[Ra]);""!==ua&&(Na[ua]=!0)}if(!0===Na.Array||!0===Na.Dictionary||
!0===Na.Feature||!0===Na.Point||!0===Na.Polygon||!0===Na.Polyline||!0===Na.Multipoint||!0===Na.Extent||!0===Na.Function)return na.slice(0);Ra=0;ua="";for(var Aa in Na)Ra++,ua=Aa;return na=1<Ra||"String"===ua?oa(na,function(ya,wa){if(null===ya||void 0===ya||ya===c.voidOperation)return null===wa||void 0===wa||wa===c.voidOperation?0:1;if(null===wa||void 0===wa||wa===c.voidOperation)return-1;var xa=c.toString(ya),Ba=c.toString(wa);return xa<Ba?-1:xa===Ba?0:1}):"Number"===ua?oa(na,function(ya,wa){return ya-
wa}):"Boolean"===ua?oa(na,function(ya,wa){return ya===wa?0:wa?-1:1}):"Date"===ua?oa(na,function(ya,wa){return wa-ya}):na.slice(0)})};var ia={},qa;for(qa in T)ia[qa]=new c.NativeFunction(T[qa]);w.registerFunctions(T,O);for(qa in T)T[qa]=new c.NativeFunction(T[qa]);var da=function(){};da.prototype=T;var Z=function(){};Z.prototype=ia;l.functionHelper={fixSpatialReference:c.fixSpatialReference,parseArguments:function(M,W){for(var H=[],na=0;na<W.arguments.length;na++)H.push(S(M,W.arguments[na]));return H},
standardFunction:O};l.extend=va;va([g],"sync");va([g],"async");l.executeScript=function(M,W){return M(W)};l.extractFieldLiterals=function(M,W){void 0===W&&(W=!1);return d.findFieldLiterals(M)};l.extractExpectedFieldLiterals=function(M){return d.findExpectedFieldLiterals(M)};l.validateScript=function(M,W){return d.validateScript(M,W,"sync")};l.referencesMember=function(M,W){return d.referencesMember(M,W)};l.referencesFunction=function(M,W){return d.referencesFunction(M,W)};var ma=0,I={error:function(M,
W,H){throw Error(d.nodeErrorMessage(M,W,H));},__awaiter:function(M,W,H,na){return new Promise(function(sa,la){function Na(Aa){try{ua(na.next(Aa))}catch(ya){la(ya)}}function Ra(Aa){try{ua(na["throw"](Aa))}catch(ya){la(ya)}}function ua(Aa){Aa.done?sa(Aa.value):Aa.value&&Aa.value.then?Aa.value.then(Na,Ra):(ma++,0===ma%100?setTimeout(function(){ma=0;Na(Aa.value)},0):Na(Aa.value))}ua((na=na.apply(M,W||[])).next())})},functionDepthchecker:function(M,W){return function(){W.depthCounter++;W.localStack.push([]);
if(64<W.depthCounter)throw Error("Exceeded maximum function depth");var H=M.apply(this,arguments);if(D.isPromiseLike(H))return H.then(function(na){W.depthCounter--;--W.localStack.length;return na});W.depthCounter--;--W.localStack.length;return H}},castString:function(M){return c.toString(M)},aCheck:function(M,W){if(c.isFunctionParameter(M))throw Error(d.nodeErrorMessage({type:W},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return M===c.voidOperation?null:M},Dictionary:e,Feature:k,dictionary:function(M){for(var W=
{},H=0;H<M.length;H+=2){if(c.isFunctionParameter(M[H+1]))throw Error("Illegal Argument");if(!1===c.isString(M[H]))throw Error("Illegal Argument");W[M[H].toString()]=M[H+1]===c.voidOperation?null:M[H+1]}M=new e(W);M.immutable=!1;return M},strCheck:function(M){if(!1===c.isString(M))throw Error("Illegal Argument");return M},unary:function(M,W){if(c.isBoolean(M)){if("!"===W)return!M;if("-"===W)return-1*c.toNumber(M);if("+"===W)return 1*c.toNumber(M);if("~"===W)return~c.toNumber(M);throw Error(d.nodeErrorMessage({type:"UnaryExpression",
operator:W,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===W)return-1*c.toNumber(M);if("+"===W)return 1*c.toNumber(M);if("~"===W)return~c.toNumber(M);throw Error(d.nodeErrorMessage({type:"UnaryExpression",operator:W,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(M){if(!1===c.isBoolean(M))throw Error(d.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return M},logical:function(M,
W,H){if(c.isBoolean(M)&&c.isBoolean(W))switch(H){case "||":return M||W;case "\x26\x26":return M&&W}throw Error(d.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(M,W,H){switch(H){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return c.binaryOperator(c.toNumber(M),c.toNumber(W),H);case "\x3d\x3d":return c.equalityTest(M,W);case "\x3d":return c.equalityTest(M,W);case "!\x3d":return!c.equalityTest(M,
W);case "\x3c":return c.greaterThanLessThan(M,W,H);case "\x3e":return c.greaterThanLessThan(M,W,H);case "\x3c\x3d":return c.greaterThanLessThan(M,W,H);case "\x3e\x3d":return c.greaterThanLessThan(M,W,H);case "+":return c.isString(M)||c.isString(W)?c.toString(M)+c.toString(W):c.toNumber(M)+c.toNumber(W);case "-":return c.toNumber(M)-c.toNumber(W);case "*":return c.toNumber(M)*c.toNumber(W);case "/":return c.toNumber(M)/c.toNumber(W);case "%":return c.toNumber(M)%c.toNumber(W);default:throw Error(d.nodeErrorMessage({type:"BinaryExpression",
operator:H,left:M,right:W},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(M,W,H){switch(W){case "\x3d":return M===c.voidOperation?null:M;case "/\x3d":return c.toNumber(H)/c.toNumber(M);case "*\x3d":return c.toNumber(H)*c.toNumber(M);case "-\x3d":return c.toNumber(H)-c.toNumber(M);case "+\x3d":return c.isString(H)||c.isString(M)?c.toString(H)+c.toString(M):c.toNumber(H)+c.toNumber(M);case "%\x3d":return c.toNumber(H)%c.toNumber(M);default:throw Error(d.nodeErrorMessage({type:"AssignmentExpression",
operator:W,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(M,W,H,na){var sa=c.toNumber(M[W]);M[W]="++"===H?sa+1:sa-1;return!1===na?sa:"++"===H?sa+1:sa-1},graphicToFeature:function(M,W){return null===M?null:k.createFromGraphicLikeObject(M.geometry,M.attributes,W)},memberupdate:function(M,W,H,na){if(c.isArray(M))if(c.isNumber(W)){0>W&&(W=M.length+W);if(0>W||W>=M.length)throw Error("Assignment outside of array bounds");var sa=c.toNumber(M[W]);M[W]="++"===H?sa+1:sa-1}else throw Error("Invalid Parameter");
else if(M instanceof e){if(!1===c.isString(W))throw Error("Dictionary accessor must be a string");if(!0===M.hasField(W))sa=c.toNumber(M.field(W)),M.setField(W,"++"===H?sa+1:sa-1);else throw Error("Invalid Parameter");}else if(c.isFeature(M)){if(!1===c.isString(W))throw Error("Feature accessor must be a string");if(!0===M.hasField(W))sa=c.toNumber(M.field(W)),M.setField(W,"++"===H?sa+1:sa-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(M))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}return!1===na?sa:"++"===H?sa+1:sa-1},assignmember:function(M,W,H,na){if(c.isArray(M))if(c.isNumber(W)){0>W&&(W=M.length+W);if(0>W||W>M.length)throw Error("Assignment outside of array bounds");if(W===M.length&&"\x3d"!==H)throw Error("Invalid Parameter");M[W]=this.assign(na,H,M[W])}else throw Error("Invalid Parameter");else if(M instanceof e){if(!1===c.isString(W))throw Error("Dictionary accessor must be a string");if(!0===M.hasField(W))M.setField(W,this.assign(na,H,M.field(W)));else{if("\x3d"!==H)throw Error("Invalid Parameter");
M.setField(W,this.assign(na,H,null))}}else if(c.isFeature(M)){if(!1===c.isString(W))throw Error("Feature accessor must be a string");if(!0===M.hasField(W))M.setField(W,this.assign(na,H,M.field(W)));else{if("\x3d"!==H)throw Error("Invalid Parameter");M.setField(W,this.assign(na,H,null))}}else{if(c.isImmutableArray(M))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(M,W){if(null===M)throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,
computed:null},"RUNTIME","NOTFOUND"));if(M instanceof e||c.isFeature(M)){if(c.isString(W))return M.field(W);throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(M instanceof u){if(c.isString(W))return ba(M,W,"MemberExpression");throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isArray(M)){if(c.isNumber(W)&&isFinite(W)&&Math.floor(W)===W){0>W&&(W=
M.length+W);if(W>=M.length||0>W)throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return M[W]}throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isString(M)){if(c.isNumber(W)&&isFinite(W)&&Math.floor(W)===W){0>W&&(W=M.length+W);if(W>=M.length||0>W)throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME",
"OUTOFBOUNDS"));return M[W]}throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isImmutableArray(M)&&c.isNumber(W)&&isFinite(W)&&Math.floor(W)===W){0>W&&(W=M.length()+W);if(W>=M.length()||0>W)throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return M.get(W)}throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},
"RUNTIME","INVALIDTYPE"));},callfunc:function(M,W,H){return M instanceof c.NativeFunction?M.fn(H,{arguments:W,preparsed:!0}):M instanceof c.SizzleFunction?M.fn.apply(this,W):M.apply(this,W)}};l.compileScript=function(M,W,H){void 0===W&&(W=null);void 0===H&&(H=!1);null===W&&(W={vars:{},customfunctions:{}});W={isAsync:H,globalScope:ra(W.vars,H?ia:T,W.customfunctions),localScope:null,mangleMap:{},console:Ha,lrucache:W.lrucache,interceptor:W.interceptor,services:W.services,symbols:{symbolCounter:0}};
M=S(W,M.body[0].body);""===M&&(M="lc.voidOperation; ");W={lc:c,lang:I,mangles:W.mangleMap,postProcess:function(na){na instanceof c.ReturnResult&&(na=na.value);na instanceof c.ImplicitResult&&(na=na.value);na===c.voidOperation&&(na=null);if(na===c.breakResult)throw Error("Cannot return BREAK");if(na===c.continueResult)throw Error("Cannot return CONTINUE");if(c.isFunctionParameter(na))throw Error("Cannot return FUNCTION");return na},prepare:function(na,sa){var la=na.spatialReference;if(null===la||void 0===
la)la=new J({wkid:102100});var Na=na.vars,Ra=na.customfunctions,ua=sa?new Z:new da;Na||(Na={});Ra||(Ra={});var Aa=new e({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Aa.immutable=!1;ua._SymbolsMap={textformatting:1,infinity:1,pi:1};ua.textformatting=Aa;ua.infinity=Number.POSITIVE_INFINITY;ua.pi=Math.PI;for(var ya in Ra)ua[ya]=Ra[ya],ua._SymbolsMap[ya]=1;for(ya in Na)ua._SymbolsMap[ya]=1,ua[ya]=Na[ya]&&"esri.Graphic"===Na[ya].declaredClass?k.createFromGraphic(Na[ya]):
Na[ya];return{localStack:[],isAsync:sa,mangleMap:this.mangles,spatialReference:la,globalScope:ua,abortSignal:void 0===na.abortSignal||null===na.abortSignal?{aborted:!1}:na.abortSignal,localScope:null,services:na.services,console:na.console?na.console:Ha,lrucache:na.lrucache,interceptor:na.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",H?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
M+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+M+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(W)};l.enableAsyncSupport=function(){return new Promise(function(M,W){F(["./functions/geomasync"],function(H){va([H],"async");M(!0)},
function(H){W(H)})})}})},"esri/arcade/polyfill/tsSupport/assign":function(){define([],function(){return function(){return function(){return(Object.assign||function(F){for(var l,b=1,q=arguments.length;b<q;b++){l=arguments[b];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(F[n]=l[n])}return F}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(F,l,b){if(b||2===arguments.length)for(var q=0,n=l.length,
p;q<n;q++)!p&&q in l||(p||(p=Array.prototype.slice.call(l,0,q)),p[q]=l[q]);return F.concat(p||Array.prototype.slice.call(l))}}()})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(F,l,b,q){return function(n){function p(m){var a=n.call(this)||this;a.immutable=!1;a.setField("url",m);a.immutable=!0;return a}b(p,n);return p}(q)})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var F=function(l,
b){F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,n){q.__proto__=n}||function(q,n){for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(q[p]=n[p])};return F(l,b)};return function(l,b){function q(){this.constructor=l}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");F(l,b);l.prototype=null===b?Object.create(b):(q.prototype=b.prototype,new q)}}()})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),
function(F,l,b,q,n,p,m){function a(k,h){void 0===h&&(h=!1);if(null===k||void 0===k)return null;if(p.isNumber(k))return p.toNumber(k);if(p.isBoolean(k))return p.toBoolean(k);if(p.isString(k))return p.toString(k);if(p.isDate(k))return p.toDate(k);if(p.isArray(k)){for(var f=[],c=0;c<k.length;c++)f.push(a(k[c],h));return f}c=new e;c.immutable=!1;for(var d=0,g=Object.keys(k);d<g.length;d++){var t=g[d];f=k[t];void 0!==f&&c.setField(t,a(f,h))}c.immutable=h;return c}var e=function(){function k(h){this.declaredClass=
"esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=h instanceof k?h.attributes:void 0===h?{}:null===h?{}:h}k.prototype.field=function(h){var f=h.toLowerCase(),c=this.attributes[h];if(void 0!==c)return c;for(var d in this.attributes)if(d.toLowerCase()===f)return this.attributes[d];throw Error("Field not Found : "+h);};k.prototype.setField=function(h,f){if(this.immutable)throw Error("Dictionary is Immutable");var c=h.toLowerCase();if(void 0===this.attributes[h])for(var d in this.attributes)if(d.toLowerCase()===
c){this.attributes[d]=f;return}this.attributes[h]=f};k.prototype.hasField=function(h){var f=h.toLowerCase();if(void 0!==this.attributes[h])return!0;for(var c in this.attributes)if(c.toLowerCase()===f)return!0;return!1};k.prototype.keys=function(){var h=[],f;for(f in this.attributes)h.push(f);return h=h.sort()};k.prototype.castToText=function(){var h="",f;for(f in this.attributes){""!==h&&(h+=",");var c=this.attributes[f];null==c?h+=JSON.stringify(f)+":null":p.isBoolean(c)||p.isNumber(c)||p.isString(c)?
h+=JSON.stringify(f)+":"+JSON.stringify(c):c instanceof m?h+=JSON.stringify(f)+":"+p.toStringExplicit(c):c instanceof n?h+=JSON.stringify(f)+":"+p.toStringExplicit(c):c instanceof Array?h+=JSON.stringify(f)+":"+p.toStringExplicit(c):c instanceof Date?h+=JSON.stringify(f)+":"+JSON.stringify(c):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(h+=JSON.stringify(f)+":"+c.castToText())}return"{"+h+"}"};k.convertObjectToArcadeDictionary=function(h,f){void 0===f&&(f=!0);var c=new k;c.immutable=!1;
for(var d in h){var g=h[d];void 0!==g&&c.setField(d.toString(),a(g))}c.immutable=f;return c};k.convertJsonToArcade=function(h,f){void 0===f&&(f=!1);return a(h,f)};k.prototype.castAsJson=function(h){void 0===h&&(h=null);var f={};for(d in this.attributes){var c=this.attributes[d];if(void 0!==c){if(null===h||void 0===h?0:h.keyTranslate)var d=h.keyTranslate(d);f[d]=p.castAsJson(c,h)}}return f};k.prototype.castDictionaryValueAsJsonAsync=function(h,f,c,d,g){void 0===d&&(d=null);return b(this,void 0,void 0,
function(){var t;return q(this,function(r){switch(r.label){case 0:return[4,p.castAsJsonAsync(c,d,g)];case 1:return t=r.sent(),h[f]=t,[2,t]}})})};k.prototype.castAsJsonAsync=function(h,f){void 0===h&&(h=null);void 0===f&&(f=null);return b(this,void 0,void 0,function(){var c,d,g,t;return q(this,function(r){switch(r.label){case 0:c={};d=[];for(g in this.attributes){t=this.attributes[g];if(null===f||void 0===f?0:f.keyTranslate)g=f.keyTranslate(g);void 0!==t&&(p.isSimpleType(t)||t instanceof m||t instanceof
Date?c[g]=p.castAsJson(t,f):d.push(this.castDictionaryValueAsJsonAsync(c,g,t,h,f)))}return 0<d.length?[4,Promise.all(d)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,c]}})})};return k}();return e})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(F,l){return function(){function b(q){void 0===q&&(q=[]);this._elements=q}b.prototype.length=function(){return this._elements.length};b.prototype.get=function(q){return this._elements[q]};b.prototype.toArray=function(){for(var q=
[],n=0;n<this.length();n++)q.push(this.get(n));return q};return b}()})},"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z){function C(T,ia,qa){return""===ia||null===ia||void 0===ia||ia===qa||ia===qa?T:T=T.split(ia).join(qa)}function D(T){return T instanceof Fa||T instanceof m||T instanceof Ha}function y(T){return u(T)||x(T)||J(T)||B(T)||null===T||T===l.voidOperation||"number"===typeof T?!0:!1}function u(T){return"string"===typeof T||T instanceof String}function B(T){return"boolean"===typeof T}function x(T){return"number"===typeof T}function A(T){return T instanceof Array}
function E(T){return T instanceof a}function J(T){return T instanceof Date}function O(T,ia){if(!1===isNaN(T)){if(void 0===ia||null===ia||""===ia)return T.toString();ia=C(ia,"\u2030","");ia=C(ia,"\u00a4","");return w.format(T,{pattern:ia})}return T.toString()}function S(T,ia){var qa=r.DateTime.fromJSDate(T);return void 0===ia||null===ia||""===ia?qa.toISO({suppressMilliseconds:!0}):qa.toFormat(X(ia),{locale:v.locale,numberingSystem:"latn"})}function X(T){T=T.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");
var ia="",qa=0;for(T=T.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);qa<T.length;qa++){var da=T[qa];switch(da){case "D":ia+="d";break;case "DD":ia+="dd";break;case "DDD":ia+="o";break;case "d":ia+="c";break;case "ddd":ia+="ccc";break;case "dddd":ia+="cccc";break;case "M":ia+="L";break;case "MM":ia+="LL";break;case "MMM":ia+="LLL";break;case "MMMM":ia+=
"LLLL";break;case "YY":ia+="yy";break;case "Y":case "YYYY":ia+="yyyy";break;case "Q":ia+="q";break;case "Z":ia+="ZZ";break;case "ZZ":ia+="ZZZ";break;case "S":ia+="'S'";break;case "SS":ia+="'SS'";break;case "SSS":ia+="u";break;case "A":case "a":ia+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ia+=da;break;default:ia=2<=da.length&&"["===da.slice(0,1)&&"]"===da.slice(-1)?ia+("'"+da.slice(1,-1)+"'"):ia+("'"+da+"'")}}return ia}function Y(T,ia,
qa){switch(qa){case "\x3e":return T>ia;case "\x3c":return T<ia;case "\x3e\x3d":return T>=ia;case "\x3c\x3d":return T<=ia}return!1}function K(T,ia){if(T===ia||null===T&&ia===l.voidOperation||null===ia&&T===l.voidOperation)return!0;if(J(T)&&J(ia))return T.getTime()===ia.getTime();if(T instanceof e||T instanceof k)return T.equalityTest(ia);if(T instanceof d&&ia instanceof d){var qa=T.getCacheValue("_arcadeCacheId"),da=ia.getCacheValue("_arcadeCacheId");if(void 0!==qa&&null!==qa)return qa===da}return void 0!==
T&&void 0!==ia&&null!==T&&null!==ia&&"object"===typeof T&&"object"===typeof ia&&(T._arcadeCacheId===ia._arcadeCacheId&&void 0!==T._arcadeCacheId&&null!==T._arcadeCacheId||T._underlyingGraphic===ia._underlyingGraphic&&void 0!==T._underlyingGraphic&&null!==T._underlyingGraphic)?!0:!1}function P(T,ia){if(u(T))return T;if(null===T)return"";if(x(T))return O(T,ia);if(B(T))return T.toString();if(J(T))return S(T,ia);if(T instanceof f)return JSON.stringify(T.toJson());if(A(T)){for(var qa=[],da=0;da<T.length;da++)qa[da]=
ba(T[da]);return"["+qa.join(",")+"]"}if(T instanceof a){qa=[];for(da=0;da<T.length();da++)qa[da]=ba(T.get(da));return"["+qa.join(",")+"]"}return null!==T&&"object"===typeof T&&void 0!==T.castToText?T.castToText():D(T)?"object, Function":""}function Q(T,ia){if(u(T))return T;if(null===T)return"";if(x(T))return O(T,ia);if(B(T))return T.toString();if(J(T))return S(T,ia);if(T instanceof f)return T instanceof h?'{"xmin":'+T.xmin.toString()+',"ymin":'+T.ymin.toString()+","+(T.hasZ?'"zmin":'+T.zmin.toString()+
",":"")+(T.hasM?'"mmin":'+T.mmin.toString()+",":"")+'"xmax":'+T.xmax.toString()+',"ymax":'+T.ymax.toString()+","+(T.hasZ?'"zmax":'+T.zmax.toString()+",":"")+(T.hasM?'"mmax":'+T.mmax.toString()+",":"")+'"spatialReference":'+ea(T.spatialReference)+"}":ea(T.toJson(),function(Z,ma){return Z.key===ma.key?0:"spatialReference"===Z.key?1:"spatialReference"===ma.key||Z.key<ma.key?-1:Z.key>ma.key?1:0});if(A(T)){for(var qa=[],da=0;da<T.length;da++)qa[da]=ba(T[da]);return"["+qa.join(",")+"]"}if(T instanceof a){qa=
[];for(da=0;da<T.length();da++)qa[da]=ba(T.get(da));return"["+qa.join(",")+"]"}return null!==T&&"object"===typeof T&&void 0!==T.castToText?T.castToText():D(T)?"object, Function":""}function ba(T){return null===T?"null":B(T)||x(T)||u(T)?JSON.stringify(T):T instanceof f||T instanceof a||T instanceof Array?Q(T):T instanceof Date?JSON.stringify(S(T,"")):null!==T&&"object"===typeof T&&void 0!==T.castToText?T.castToText():"null"}function ca(T,ia){return x(T)?T:null===T||""===T?0:J(T)?NaN:B(T)?T?1:0:A(T)||
""===T||void 0===T?NaN:void 0!==ia&&u(T)?(ia=C(ia,"\u2030",""),ia=C(ia,"\u00a4",""),w.parse(T,{pattern:ia})):T===l.voidOperation?0:Number(T)}function ka(T){var ia=/ (\d\d)/,qa=r.DateTime.fromISO(T);return qa.isValid||ia.test(T)&&(T=T.replace(ia,"T$1"),qa=r.DateTime.fromISO(T),qa.isValid)?qa:null}function aa(T,ia){if(!T||!T.domain)return ia;var qa=null;if("string"===T.field.type||"esriFieldTypeString"===T.field.type)ia=P(ia);else{if(null===ia||void 0===ia)return null;if(""===ia)return ia;ia=ca(ia)}for(var da=
0;da<T.domain.codedValues.length;da++){var Z=T.domain.codedValues[da];Z.code===ia&&(qa=Z)}return null===qa?ia:qa.name}function ja(T,ia){if(!T||!T.domain)return ia;var qa=null;ia=P(ia);for(var da=0;da<T.domain.codedValues.length;da++){var Z=T.domain.codedValues[da];Z.name===ia&&(qa=Z)}return null===qa?ia:qa.code}function oa(T,ia,qa,da){void 0===qa&&(qa=null);void 0===da&&(da=null);if(!ia||!ia.fields)return null;for(var Z=null,ma=0;ma<ia.fields.length;ma++){var I=ia.fields[ma];I.name.toLowerCase()===
T.toString().toLowerCase()&&(Z=I)}if(null===Z)throw Error("Field not found");var M,W;null===da&&qa&&ia.typeIdField&&(da=qa.hasField(ia.typeIdField)?qa.field(ia.typeIdField):null);null!==da&&void 0!==da&&ia.types.some(function(H){return H.id===da?((M=H.domains&&H.domains[Z.name])&&"inherited"===M.type&&(M=U(Z.name,ia),W=!0),!0):!1});W||M||(M=U(T,ia));return{field:Z,domain:M}}function U(T,ia){var qa;ia.fields.some(function(da){da.name.toLowerCase()===T.toLowerCase()&&(qa=da.domain);return!!qa});return qa}
function ea(T,ia){ia||(ia={});"function"===typeof ia&&(ia={cmp:ia});var qa="boolean"===typeof ia.cycles?ia.cycles:!1,da=ia.cmp&&function(ma){return function(I){return function(M,W){return ma({key:M,value:I[M]},{key:W,value:I[W]})}}}(ia.cmp),Z=[];return function M(I){I&&I.toJson&&"function"===typeof I.toJson&&(I=I.toJson());if(void 0!==I){if("number"===typeof I)return isFinite(I)?""+I:"null";if("object"!==typeof I)return JSON.stringify(I);var W;if(Array.isArray(I)){var H="[";for(W=0;W<I.length;W++)W&&
(H+=","),H+=M(I[W])||"null";return H+"]"}if(null===I)return"null";if(Z.includes(I)){if(qa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var na=Z.push(I)-1,sa=Object.keys(I).sort(da&&da(I));H="";for(W=0;W<sa.length;W++){var la=sa[W],Na=M(I[la]);Na&&(H&&(H+=","),H+=JSON.stringify(la)+":"+Na)}Z.splice(na,1);return"{"+H+"}"}}(T)}function fa(T,ia){if(ia instanceof d)T.push([ia.x,ia.y]);else throw Error("Invalid Argument");}function pa(T,ia){void 0===ia&&
(ia=null);if(null!=T){if(B(T)||x(T)||u(T))return T;if(T instanceof f)return!0===(null===ia||void 0===ia?void 0:ia.keepGeometryType)?T:T.toJson();if(T instanceof a)return T.toArray().map(function(qa){return pa(qa,ia)});if(T instanceof Array)return T.map(function(qa){return pa(qa,ia)});if(T instanceof Date)return T;if(null!==T&&"object"===typeof T&&void 0!==T.castAsJson)return T.castAsJson(ia)}return null}function ra(T,ia,qa,da,Z){return b(this,void 0,void 0,function(){var ma;return q(this,function(I){switch(I.label){case 0:return[4,
va(T,ia,qa)];case 1:return ma=I.sent(),Z[da]=ma,[2]}})})}function va(T,ia,qa){void 0===ia&&(ia=null);void 0===qa&&(qa=null);return b(this,void 0,void 0,function(){var da,Z,ma,I,M;return q(this,function(W){switch(W.label){case 0:return T instanceof a&&(T=T.toArray()),null!=T?[3,1]:[2,null];case 1:return y(T)||T instanceof f||T instanceof Date?[2,pa(T,qa)]:[3,2];case 2:if(!(T instanceof Array))return[3,5];da=[];Z=[];ma=0;for(I=T;ma<I.length;ma++)M=I[ma],null===M||y(M)||M instanceof f||M instanceof Date?
Z.push(pa(M,qa)):(Z.push(null),da.push(ra(M,ia,qa,Z.length-1,Z)));return 0<da.length?[4,Promise.all(da)]:[3,4];case 3:W.sent(),W.label=4;case 4:return[2,Z];case 5:if(null!==T&&"object"===typeof T&&void 0!==T.castAsJsonAsync)return[2,T.castAsJsonAsync(ia,qa)];W.label=6;case 6:return[2,null]}})})}Object.defineProperty(l,"__esModule",{value:!0});l.featureSchema=l.featureDomainCodeLookup=l.featureDomainValueLookup=l.featureSubtypes=l.featureFullDomain=l.castAsJsonAsync=l.castAsJson=l.binaryOperator=l.tick=
l.toStringArray=l.autoCastArrayOfPointsToMultiPoint=l.autoCastArrayOfPointsToPolyline=l.autoCastArrayOfPointsToPolygon=l.autoCastFeatureToGeometry=l.stableStringify=l.getDomain=l.getDomainCode=l.getDomainValue=l.fixNullGeometry=l.fixSpatialReference=l.toBoolean=l.toDateTime=l.toDate=l.toNumber=l.toStringExplicit=l.toNumberArray=l.toString=l.equalityTest=l.greaterThanLessThan=l.standardiseDateFormat=l.formatDate=l.formatNumber=l.generateUUID=l.absRound=l.pcCheck=l.isDate=l.isImmutableArray=l.isFeatureSetCollection=
l.isFeatureSet=l.isFeature=l.isArray=l.isInteger=l.isNumber=l.isBoolean=l.isString=l.defaultUndefined=l.isSimpleType=l.isFunctionParameter=l.multiReplace=l.continueResult=l.breakResult=l.voidOperation=l.SizzleFunction=l.ReturnResult=l.ImplicitResult=l.NativeFunction=l.SizzleFunctionE=l.NativeFunctionE=l.ImplicitResultE=l.ReturnResultE=void 0;F=function(){return function(T){this.value=T}}();l.ReturnResultE=F;n=function(){return function(T){this.value=T}}();l.ImplicitResultE=n;var Fa=function(){return function(T){this.fn=
T}}();l.NativeFunctionE=Fa;var Ha=function(){return function(T,ia){this.paramCount=ia;this.fn=T}}();l.SizzleFunctionE=Ha;l.NativeFunction=Fa;l.ImplicitResult=n;l.ReturnResult=F;l.SizzleFunction=Ha;l.voidOperation={type:"VOID"};l.breakResult={type:"BREAK"};l.continueResult={type:"CONTINUE"};l.multiReplace=C;l.isFunctionParameter=D;l.isSimpleType=y;l.defaultUndefined=function(T,ia){return void 0===T?ia:T};l.isString=u;l.isBoolean=B;l.isNumber=x;l.isInteger=function(T){return"number"===typeof T&&isFinite(T)&&
Math.floor(T)===T};l.isArray=A;l.isFeature=function(T){return"esri.arcade.Feature"===(null===T||void 0===T?void 0:T.arcadeDeclaredClass)?!0:!1};l.isFeatureSet=function(T){return!0===(T&&T.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===T.declaredRootClass)};l.isFeatureSetCollection=function(T){return!0===(T&&T.declaredRootClass&&"esri.arcade.featureSetCollection"===T.declaredRootClass)};l.isImmutableArray=E;l.isDate=J;l.pcCheck=function(T,ia,qa){if(T.length<ia||T.length>qa)throw Error("Function called with wrong number of Parameters");
};l.absRound=function(T){return 0>T?-Math.round(-T):Math.round(T)};l.generateUUID=function(){var T=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ia){var qa=(T+16*Math.random())%16|0;T=Math.floor(T/16);return("x"===ia?qa:qa&3|8).toString(16)})};l.formatNumber=O;l.formatDate=S;l.standardiseDateFormat=X;l.greaterThanLessThan=function(T,ia,qa){if(null===T){if(null===ia||ia===l.voidOperation)return Y(null,null,qa);if(x(ia))return Y(0,ia,qa);if(u(ia)||B(ia))return Y(0,
ca(ia),qa);if(J(ia))return Y(0,ia.getTime(),qa)}if(T===l.voidOperation){if(null===ia||ia===l.voidOperation)return Y(null,null,qa);if(x(ia))return Y(0,ia,qa);if(u(ia)||B(ia))return Y(0,ca(ia),qa);if(J(ia))return Y(0,ia.getTime(),qa)}else if(x(T)){if(x(ia))return Y(T,ia,qa);if(B(ia))return Y(T,ca(ia),qa);if(null===ia||ia===l.voidOperation)return Y(T,0,qa);if(u(ia))return Y(T,ca(ia),qa);if(J(ia))return Y(T,ia.getTime(),qa)}else if(u(T)){if(u(ia))return Y(P(T),P(ia),qa);if(J(ia))return Y(ca(T),ia.getTime(),
qa);if(x(ia))return Y(ca(T),ia,qa);if(null===ia||ia===l.voidOperation)return Y(ca(T),0,qa);if(B(ia))return Y(ca(T),ca(ia),qa)}else if(J(T)){if(J(ia))return Y(T,ia,qa);if(null===ia||ia===l.voidOperation)return Y(T.getTime(),0,qa);if(x(ia))return Y(T.getTime(),ia,qa);if(B(ia)||u(ia))return Y(T.getTime(),ca(ia),qa)}else if(B(T)){if(B(ia))return Y(T,ia,qa);if(x(ia))return Y(ca(T),ca(ia),qa);if(J(ia))return Y(ca(T),ia.getTime(),qa);if(null===ia||ia===l.voidOperation)return Y(ca(T),0,qa);if(u(ia))return Y(ca(T),
ca(ia),qa)}return!K(T,ia)||"\x3c\x3d"!==qa&&"\x3e\x3d"!==qa?!1:!0};l.equalityTest=K;l.toString=P;l.toNumberArray=function(T){var ia=[];if(!1===A(T))return null;if(T instanceof a){for(var qa=0;qa<T.length();qa++)ia[qa]=ca(T.get(qa));return ia}for(qa=0;qa<T.length;qa++)ia[qa]=ca(T[qa]);return ia};l.toStringExplicit=Q;l.toNumber=ca;l.toDate=function(T){return J(T)?T:u(T)&&(T=ka(T))?T.toJSDate():null};l.toDateTime=function(T){return J(T)?r.DateTime.fromJSDate(T):u(T)?ka(T):null};l.toBoolean=function(T){return B(T)?
T:u(T)?(T=T.toLowerCase(),"true"===T?!0:!1):x(T)?0===T||isNaN(T)?!1:!0:!1};l.fixSpatialReference=function(T,ia){if(null===T||void 0===T)return null;if(null===T.spatialReference||void 0===T.spatialReference)T.spatialReference=ia;return T};l.fixNullGeometry=function(T){if(null===T)return null;if(T instanceof d)return"NaN"===T.x||null===T.x||isNaN(T.x)?null:T;if(T instanceof g){if(0===T.rings.length)return null;for(var ia=0,qa=T.rings;ia<qa.length;ia++){var da=qa[ia];if(0<da.length)return T}return null}if(T instanceof
t){if(0===T.paths.length)return null;ia=0;for(qa=T.paths;ia<qa.length;ia++)if(da=qa[ia],0<da.length)return T;return null}return T instanceof c?0===T.points.length?null:T:T instanceof h?"NaN"===T.xmin||null===T.xmin||isNaN(T.xmin)?null:T:null};l.getDomainValue=aa;l.getDomainCode=ja;l.getDomain=oa;l.stableStringify=ea;l.autoCastFeatureToGeometry=function(T){if(null===T)return null;for(var ia=[],qa=0;qa<T.length;qa++){var da=T[qa];da&&da.arcadeDeclaredClass&&"esri.arcade.Feature"===da.arcadeDeclaredClass?
ia.push(da.geometry()):ia.push(da)}return ia};l.autoCastArrayOfPointsToPolygon=function(T,ia){if(A(T)||E(T)){var qa=!1,da=!1,Z=[],ma=ia;if(A(T)){for(var I=0;I<T.length;I++){var M=T[I];fa(Z,M)}0<Z.length&&(ma=T[0].spatialReference,qa=T[0].hasZ,da=T[0].hasM)}else if(T instanceof k)Z=T._elements,0<Z.length&&(qa=T._hasZ,da=T._hasM,ma=T.get(0).spatialReference);else if(E(T)){I=0;for(var W=T.toArray();I<W.length;I++)M=W[I],fa(Z,M);0<Z.length&&(ma=T.get(0).spatialReference,qa=!0===T.get(0).hasZ,da=!0===
T.get(0).hasM)}else throw Error("Invalid Argument");if(0===Z.length)return null;!1===(new g({rings:[],spatialReference:{wkid:4326}})).isClockwise(Z)&&(Z=Z.slice(0).reverse());return new g({rings:[Z],spatialReference:ma,hasZ:qa,hasM:da})}return T};l.autoCastArrayOfPointsToPolyline=function(T,ia){if(A(T)||E(T)){var qa=!1,da=!1,Z=[],ma=ia;if(A(T)){for(var I=0;I<T.length;I++){var M=T[I];fa(Z,M)}0<Z.length&&(ma=T[0].spatialReference,qa=!0===T[0].hasZ,da=!0===T[0].hasM)}else if(T instanceof k)Z=T._elements,
0<Z.length&&(qa=T._hasZ,da=T._hasM,ma=T.get(0).spatialReference);else if(E(T)){I=0;for(var W=T.toArray();I<W.length;I++)M=W[I],fa(Z,M);0<Z.length&&(ma=T.get(0).spatialReference,qa=!0===T.get(0).hasZ,da=!0===T.get(0).hasM)}return 0===Z.length?null:new t({paths:[Z],spatialReference:ma,hasZ:qa,hasM:da})}return T};l.autoCastArrayOfPointsToMultiPoint=function(T,ia){if(A(T)||E(T)){var qa=!1,da=!1,Z=[],ma=ia;if(A(T)){for(var I=0;I<T.length;I++){var M=T[I];fa(Z,M)}0<Z.length&&(ma=T[0].spatialReference,qa=
!0===T[0].hasZ,da=!0===T[0].hasM)}else if(T instanceof k)Z=T._elements,0<Z.length&&(qa=T._hasZ,da=T._hasM,ma=T.get(0).spatialReference);else if(E(T)){I=0;for(var W=T.toArray();I<W.length;I++)M=W[I],fa(Z,M);0<Z.length&&(ma=T.get(0).spatialReference,qa=!0===T.get(0).hasZ,da=!0===T.get(0).hasM)}return 0===Z.length?null:new c({points:Z,spatialReference:ma,hasZ:qa,hasM:da})}return T};l.toStringArray=function(T,ia){void 0===ia&&(ia=!1);var qa=[];if(null===T)return qa;if(!0===A(T)){for(var da=0;da<T.length;da++){var Z=
P(T[da]);""===Z&&!0!==ia||qa.push(Z)}return qa}if(T instanceof a){for(da=0;da<T.length();da++)Z=P(T.get(da)),""===Z&&!0!==ia||qa.push(Z);return qa}return y(T)?(Z=P(T),""===Z&&!0!==ia||qa.push(Z),qa):[]};var Ca=0;l.tick=function(T){Ca++;return 0===Ca%100?(Ca=0,new Promise(function(ia){setTimeout(function(){ia(T)},0)})):T};l.binaryOperator=function(T,ia,qa){switch(qa){case "\x26":return T&ia;case "|":return T|ia;case "^":return T^ia;case "\x3c\x3c":return T<<ia;case "\x3e\x3e":return T>>ia;case "\x3e\x3e\x3e":return T>>>
ia}};l.castAsJson=pa;l.castAsJsonAsync=va;l.featureFullDomain=function(T,ia,qa){var da=T.fullSchema();return null!==da&&da.fields?oa(ia,da,T,qa):null};l.featureSubtypes=function(T){T=T.fullSchema();return null!==T&&T.fields?T.typeIdField?{subtypeField:T.typeIdField,subtypes:T.types?T.types.map(function(ia){return{name:ia.name,code:ia.id}}):[]}:null:null};l.featureDomainValueLookup=function(T,ia,qa,da){var Z=T.fullSchema();if(null===Z||!Z.fields)return null;da=oa(ia,Z,T,da);if(void 0===qa)try{qa=T.field(ia)}catch(ma){return null}return aa(da,
qa)};l.featureDomainCodeLookup=function(T,ia,qa,da){var Z=T.fullSchema();if(null===Z||!Z.fields)return null;if(void 0===qa){try{qa=T.field(ia)}catch(ma){return null}return qa}T=oa(ia,Z,T,da);return ja(T,qa)};l.featureSchema=function(T){T=T.fullSchema();if(null===T||!T.fields)return null;for(var ia=[],qa=0,da=T.fields;qa<da.length;qa++)ia.push(z.esriFieldToJson(da[qa]));return{objectIdField:T.objectIdField,globalIdField:T.globalIdField,geometryType:void 0===z.layerGeometryEsriRestConstants[T.geometryType]?
"":z.layerGeometryEsriRestConstants[T.geometryType],fields:ia}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(F,l){return function(){return function(b,q){this.context=this.definition=null;this.definition=b;this.context=q}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","./ImmutablePointArray"],function(F,l,b,q,n){return function(p){function m(a,e,k,h,f){a=p.call(this,a)||this;a._lazyPath=
[];a._hasZ=!1;a._hasM=!1;a._hasZ=k;a._hasM=h;a._spRef=e;a._cacheId=f;return a}b(m,p);m.prototype.get=function(a){if(void 0===this._lazyPath[a]){var e=this._elements[a];if(void 0===e)return;this._lazyPath[a]=new n(e,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};m.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof m?!1:a.getUniqueHash()===this.getUniqueHash()};m.prototype.getUniqueHash=function(){return this._cacheId.toString()};return m}(q)})},
"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","../geometry/Point"],function(F,l,b,q,n){return function(p){function m(a,e,k,h,f,c){a=p.call(this,a)||this;a._lazyPt=[];a._hasZ=!1;a._hasM=!1;a._spRef=e;a._hasZ=k;a._hasM=h;a._cacheId=f;a._partId=c;return a}b(m,p);m.prototype.get=function(a){if(void 0===this._lazyPt[a]){var e=this._elements[a];if(void 0===e)return;var k=this._hasZ,h=this._hasM,f=null;f=k&&!h?new n(e[0],e[1],e[2],
void 0,this._spRef):h&&!k?new n(e[0],e[1],void 0,e[2],this._spRef):k&&h?new n(e[0],e[1],e[2],e[3],this._spRef):new n(e[0],e[1],this._spRef);f.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=f}return this._lazyPt[a]};m.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof m?!1:a.getUniqueHash()===this.getUniqueHash()};m.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};
return m}(q)})},"esri/libs/luxon/luxon":function(){define(["exports"],function(F){function l(L,R){for(var G=0;G<R.length;G++){var N=R[G];N.enumerable=N.enumerable||!1;N.configurable=!0;"value"in N&&(N.writable=!0);Object.defineProperty(L,N.key,N)}}function b(L,R,G){R&&l(L.prototype,R);G&&l(L,G);return L}function q(){q=Object.assign||function(L){for(var R=1;R<arguments.length;R++){var G=arguments[R],N;for(N in G)Object.prototype.hasOwnProperty.call(G,N)&&(L[N]=G[N])}return L};return q.apply(this,arguments)}
function n(L,R){L.prototype=Object.create(R.prototype);L.prototype.constructor=L;m(L,R)}function p(L){p=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)};return p(L)}function m(L,R){m=Object.setPrototypeOf||function(G,N){G.__proto__=N;return G};return m(L,R)}function a(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(L){return!1}}function e(L,R,G){e=a()?Reflect.construct:function(N,V,ha){var ta=[null];ta.push.apply(ta,V);N=new (Function.bind.apply(N,ta));ha&&m(N,ha.prototype);return N};return e.apply(null,arguments)}function k(L){var R="function"===typeof Map?new Map:void 0;k=function(G){function N(){return e(G,arguments,p(this).constructor)}if(null===G||-1===Function.toString.call(G).indexOf("[native code]"))return G;if("function"!==typeof G)throw new TypeError("Super expression must either be null or a function");
if("undefined"!==typeof R){if(R.has(G))return R.get(G);R.set(G,N)}N.prototype=Object.create(G.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}});return m(N,G)};return k(L)}function h(L,R){if(null==L)return{};var G={},N=Object.keys(L),V;for(V=0;V<N.length;V++){var ha=N[V];0<=R.indexOf(ha)||(G[ha]=L[ha])}return G}function f(L,R){if(L){if("string"===typeof L)return c(L,R);var G=Object.prototype.toString.call(L).slice(8,-1);"Object"===G&&L.constructor&&(G=L.constructor.name);
if("Map"===G||"Set"===G)return Array.from(L);if("Arguments"===G||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return c(L,R)}}function c(L,R){if(null==R||R>L.length)R=L.length;for(var G=0,N=Array(R);G<R;G++)N[G]=L[G];return N}function d(L,R){var G="undefined"!==typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(G)return(G=G.call(L)).next.bind(G);if(Array.isArray(L)||(G=f(L))||R&&L&&"number"===typeof L.length){G&&(L=G);var N=0;return function(){return N>=L.length?{done:!0}:{done:!1,value:L[N++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function g(L){return"undefined"===typeof L}function t(L){return"number"===typeof L}function r(L){return"number"===typeof L&&0===L%1}function w(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(L){return!1}}function v(L,R,G){if(0!==L.length)return L.reduce(function(N,V){var ha=[R(V),V];return N?G(N[0],ha[0])===N[0]?N:ha:ha},null)[1]}function z(L,R){return R.reduce(function(G,N){G[N]=L[N];return G},{})}function C(L,R){return Object.prototype.hasOwnProperty.call(L,R)}function D(L,
R,G){return r(L)&&L>=R&&L<=G}function y(L,R){void 0===R&&(R=2);return 0>L?"-"+(""+-L).padStart(R,"0"):(""+L).padStart(R,"0")}function u(L){if(!g(L)&&null!==L&&""!==L)return parseInt(L,10)}function B(L){if(!g(L)&&null!==L&&""!==L)return parseFloat(L)}function x(L){if(!g(L)&&null!==L&&""!==L)return L=1E3*parseFloat("0."+L),Math.floor(L)}function A(L,R,G){void 0===G&&(G=!1);R=Math.pow(10,R);return(G?Math.trunc:Math.round)(L*R)/R}function E(L){return 0===L%4&&(0!==L%100||0===L%400)}function J(L,R){var G=
R-1;G=G-12*Math.floor(G/12)+1;return 2===G?E(L+(R-G)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][G-1]}function O(L){var R=Date.UTC(L.year,L.month-1,L.day,L.hour,L.minute,L.second,L.millisecond);100>L.year&&0<=L.year&&(R=new Date(R),R.setUTCFullYear(R.getUTCFullYear()-1900));return+R}function S(L){var R=L-1;R=(R+Math.floor(R/4)-Math.floor(R/100)+Math.floor(R/400))%7;return 4===(L+Math.floor(L/4)-Math.floor(L/100)+Math.floor(L/400))%7||3===R?53:52}function X(L){return 99<L?L:60<L?1900+L:2E3+L}
function Y(L,R,G,N){void 0===N&&(N=null);L=new Date(L);var V={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};N&&(V.timeZone=N);R=q({timeZoneName:R},V);return(G=(new Intl.DateTimeFormat(G,R)).formatToParts(L).find(function(ha){return"timezonename"===ha.type.toLowerCase()}))?G.value:null}function K(L,R){var G=parseInt(L,10);Number.isNaN(G)&&(G=0);var N=parseInt(R,10)||0;N=0>G||Object.is(G,-0)?-N:N;return 60*G+N}function P(L){var R=Number(L);if("boolean"===
typeof L||""===L||Number.isNaN(R))throw new mb("Invalid unit value "+L);return R}function Q(L,R){var G={},N;for(N in L)if(C(L,N)){var V=L[N];void 0!==V&&null!==V&&(G[R(N)]=P(V))}return G}function ba(L,R){var G=Math.trunc(Math.abs(L/60)),N=Math.trunc(Math.abs(L%60)),V=0<=L?"+":"-";switch(R){case "short":return""+V+y(G,2)+":"+y(N,2);case "narrow":return""+V+G+(0<N?":"+N:"");case "techie":return""+V+y(G,2)+y(N,2);default:throw new RangeError("Value format "+R+" is out of range for property format");
}}function ca(L){return z(L,["hour","minute","second","millisecond"])}function ka(L){switch(L){case "narrow":return[].concat(Vc);case "short":return[].concat(fc);case "long":return[].concat(Wc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function aa(L){switch(L){case "narrow":return[].concat(Xc);case "short":return[].concat(gc);case "long":return[].concat(hc);case "numeric":return"1234567".split("");
default:return null}}function ja(L){switch(L){case "narrow":return[].concat(Yc);case "short":return[].concat(Zc);case "long":return[].concat($c);default:return null}}function oa(L,R,G,N){void 0===G&&(G="always");void 0===N&&(N=!1);var V={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},ha=-1===["hours","minutes","seconds"].indexOf(L);if("auto"===G&&ha)switch(G=
"days"===L,R){case 1:return G?"tomorrow":"next "+V[L][0];case -1:return G?"yesterday":"last "+V[L][0];case 0:return G?"today":"this "+V[L][0]}G=Object.is(R,-0)||0>R;R=Math.abs(R);ha=1===R;var ta=V[L];L=N?ha?ta[1]:ta[2]||ta[1]:ha?V[L][0]:L;return G?R+" "+L+" ago":"in "+R+" "+L}function U(L,R){for(var G="",N=d(L),V;!(V=N()).done;)V=V.value,G=V.literal?G+V.val:G+R(V.val);return G}function ea(L,R){if(g(L)||null===L)return R;if(L instanceof Hb)return L;if("string"===typeof L){var G=L.toLowerCase();return"local"===
G||"system"===G?R:"utc"===G||"gmt"===G?rb.utcInstance:rb.parseSpecifier(G)||Eb.create(L)}return t(L)?rb.instance(L):"object"===typeof L&&L.offset&&"number"===typeof L.offset?L:new ic(L)}function fa(L,R){void 0===R&&(R={});var G=JSON.stringify([L,R]),N=Sb[G];N||(N=new Intl.DateTimeFormat(L,R),Sb[G]=N);return N}function pa(L){for(var R=[],G=1;12>=G;G++){var N=Za.utc(2016,G,1);R.push(L(N))}return R}function ra(L){for(var R=[],G=1;7>=G;G++){var N=Za.utc(2016,11,13+G);R.push(L(N))}return R}function va(L,
R,G,N,V){L=L.listingMode(G);return"error"===L?null:"en"===L?N(R):V(R)}function Fa(){for(var L=arguments.length,R=Array(L),G=0;G<L;G++)R[G]=arguments[G];L=R.reduce(function(N,V){return N+V.source},"");return RegExp("^"+L+"$")}function Ha(){for(var L=arguments.length,R=Array(L),G=0;G<L;G++)R[G]=arguments[G];return function(N){return R.reduce(function(V,ha){var ta=V[0],za=V[1],Ga=ha(N,V[2]),Ja=Ga[1],Qa=Ga[2];return[q({},ta,Ga[0]),Ja||za,Qa]},[{},null,1]).slice(0,2)}}function Ca(L){if(null==L)return[null,
null];for(var R=arguments.length,G=Array(1<R?R-1:0),N=1;N<R;N++)G[N-1]=arguments[N];for(R=0;R<G.length;R++){var V=G[R];N=V[1];if(V=V[0].exec(L))return N(V)}return[null,null]}function T(){for(var L=arguments.length,R=Array(L),G=0;G<L;G++)R[G]=arguments[G];return function(N,V){var ha={},ta;for(ta=0;ta<R.length;ta++)ha[R[ta]]=u(N[V+ta]);return[ha,null,V+ta]}}function ia(L,R,G){L=L[R];return g(L)?G:u(L)}function qa(L,R){return[{hours:ia(L,R,0),minutes:ia(L,R+1,0),seconds:ia(L,R+2,0),milliseconds:x(L[R+
3])},null,R+4]}function da(L,R){var G=!L[R]&&!L[R+1],N=K(L[R+1],L[R+2]);return[{},G?null:rb.instance(N),R+3]}function Z(L,R){return[{},L[R]?Eb.create(L[R]):null,R+1]}function ma(L){var R=L[2],G=L[3],N=L[4],V=L[5],ha=L[6],ta=L[7],za=L[8],Ga="-"===L[0][0],Ja=ta&&"-"===ta[0],Qa=function(Ua,Sa){void 0===Sa&&(Sa=!1);return void 0!==Ua&&(Sa||Ua&&Ga)?-Ua:Ua};return[{years:Qa(B(L[1])),months:Qa(B(R)),weeks:Qa(B(G)),days:Qa(B(N)),hours:Qa(B(V)),minutes:Qa(B(ha)),seconds:Qa(B(ta),"-0"===ta),milliseconds:Qa(x(za),
Ja)}]}function I(L,R,G,N,V,ha,ta){R={year:2===R.length?X(u(R)):u(R),month:fc.indexOf(G)+1,day:u(N),hour:u(V),minute:u(ha)};ta&&(R.second=u(ta));L&&(R.weekday=3<L.length?hc.indexOf(L)+1:gc.indexOf(L)+1);return R}function M(L){var R=L[8],G=L[9],N=L[10],V=L[11];L=I(L[1],L[4],L[3],L[2],L[5],L[6],L[7]);R=R?ad[R]:G?0:K(N,V);return[L,new rb(R)]}function W(L){return[I(L[1],L[4],L[3],L[2],L[5],L[6],L[7]),rb.utcInstance]}function H(L){return[I(L[1],L[7],L[2],L[3],L[4],L[5],L[6]),rb.utcInstance]}function na(L,
R,G){void 0===G&&(G=!1);L={values:G?R.values:q({},L.values,R.values||{}),loc:L.loc.clone(R.loc),conversionAccuracy:R.conversionAccuracy||L.conversionAccuracy};return new cb(L)}function sa(L,R,G,N,V){L=L[V][G];var ha=R[G]/L;ha=Math.sign(ha)!==Math.sign(N[V])&&0!==N[V]&&1>=Math.abs(ha)?0>ha?Math.floor(ha):Math.ceil(ha):Math.trunc(ha);N[V]+=ha;R[G]-=ha*L}function la(L,R){bd.reduce(function(G,N){if(g(R[N]))return G;G&&sa(L,R,G,R,N);return N},null)}function Na(L,R){var G=function(N){return N.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};
G=G(R)-G(L);return Math.floor(cb.fromMillis(G).as("days"))}function Ra(L,R,G){for(var N={},V,ha,ta=0,za=[["years",function(Sa,Ta){return Ta.year-Sa.year}],["quarters",function(Sa,Ta){return Ta.quarter-Sa.quarter}],["months",function(Sa,Ta){return Ta.month-Sa.month+12*(Ta.year-Sa.year)}],["weeks",function(Sa,Ta){var nb=Na(Sa,Ta);return(nb-nb%7)/7}],["days",Na]];ta<za.length;ta++){var Ga=za[ta],Ja=Ga[0];Ga=Ga[1];if(0<=G.indexOf(Ja)){var Qa;V=Ja;Ga=Ga(L,R);ha=L.plus((Qa={},Qa[Ja]=Ga,Qa));if(ha>R){var Ua;
L=L.plus((Ua={},Ua[Ja]=Ga-1,Ua));--Ga}else L=ha;N[Ja]=Ga}}return[L,N,ha,V]}function ua(L,R,G,N){var V=Ra(L,R,G);L=V[0];var ha=V[1],ta=V[2],za=V[3];V=R-L;G=G.filter(function(Qa){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(Qa)});if(0===G.length){if(ta<R){var Ga;ta=L.plus((Ga={},Ga[za]=1,Ga))}ta!==L&&(ha[za]=(ha[za]||0)+V/(ta-L))}R=cb.fromObject(ha,N);if(0<G.length){var Ja;return(Ja=cb.fromMillis(V,N)).shiftTo.apply(Ja,G).plus(R)}return R}function Aa(L,R){var G=L.numberingSystem;void 0===
R&&(R="");return new RegExp(""+Tb[G||"latn"]+R)}function ya(L,R){void 0===R&&(R=function(G){return G});return{regex:L,deser:function(G){var N=R;G=G[0];var V=parseInt(G,10);if(isNaN(V)){V="";for(var ha=0;ha<G.length;ha++){var ta=G.charCodeAt(ha);if(-1!==G[ha].search(Tb.hanidec))V+=cd.indexOf(G[ha]);else for(Ja in jc){var za=jc[Ja],Ga=za[0];za=za[1];ta>=Ga&&ta<=za&&(V+=ta-Ga)}}var Ja=parseInt(V,10)}else Ja=V;return N(Ja)}}}function wa(L){return L.replace(/\./g,"\\.?").replace(Ub,kc)}function xa(L,R){return null===
L?null:{regex:RegExp(L.map(wa).join("|")),deser:function(G){var N=G[0];return L.findIndex(function(V){return N.replace(/\./g,"").replace(Ub," ").toLowerCase()===V.replace(/\./g,"").replace(Ub," ").toLowerCase()})+R}}}function Ba(L,R){return{regex:L,deser:function(G){return K(G[1],G[2])},groups:R}}function Da(L){return{regex:L,deser:function(R){return R[0]}}}function Ka(L,R){var G=Aa(R),N=Aa(R,"{2}"),V=Aa(R,"{3}"),ha=Aa(R,"{4}"),ta=Aa(R,"{6}"),za=Aa(R,"{1,2}"),Ga=Aa(R,"{1,3}"),Ja=Aa(R,"{1,6}"),Qa=
Aa(R,"{1,9}"),Ua=Aa(R,"{2,4}"),Sa=Aa(R,"{4,6}"),Ta=function(kb){return{regex:RegExp(kb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(dd){return dd[0]},literal:!0}},nb=function(kb){if(L.literal)return Ta(kb);switch(kb.val){case "G":return xa(R.eras("short",!1),0);case "GG":return xa(R.eras("long",!1),0);case "y":return ya(Ja);case "yy":return ya(Ua,X);case "yyyy":return ya(ha);case "yyyyy":return ya(Sa);case "yyyyyy":return ya(ta);case "M":return ya(za);case "MM":return ya(N);
case "MMM":return xa(R.months("short",!0,!1),1);case "MMMM":return xa(R.months("long",!0,!1),1);case "L":return ya(za);case "LL":return ya(N);case "LLL":return xa(R.months("short",!1,!1),1);case "LLLL":return xa(R.months("long",!1,!1),1);case "d":return ya(za);case "dd":return ya(N);case "o":return ya(Ga);case "ooo":return ya(V);case "HH":return ya(N);case "H":return ya(za);case "hh":return ya(N);case "h":return ya(za);case "mm":return ya(N);case "m":return ya(za);case "q":return ya(za);case "qq":return ya(N);
case "s":return ya(za);case "ss":return ya(N);case "S":return ya(Ga);case "SSS":return ya(V);case "u":return Da(Qa);case "uu":return Da(za);case "uuu":return ya(G);case "a":return xa(R.meridiems(),0);case "kkkk":return ya(ha);case "kk":return ya(Ua,X);case "W":return ya(za);case "WW":return ya(N);case "E":case "c":return ya(G);case "EEE":return xa(R.weekdays("short",!1,!1),1);case "EEEE":return xa(R.weekdays("long",!1,!1),1);case "ccc":return xa(R.weekdays("short",!0,!1),1);case "cccc":return xa(R.weekdays("long",
!0,!1),1);case "Z":case "ZZ":return Ba(new RegExp("([+-]"+za.source+")(?::("+N.source+"))?"),2);case "ZZZ":return Ba(new RegExp("([+-]"+za.source+")("+N.source+")?"),2);case "z":return Da(/[a-z_+-/]{1,256}?/i);default:return Ta(kb)}}(L)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};nb.token=L;return nb}function Ia(L){return["^"+L.map(function(R){return R.regex}).reduce(function(R,G){return R+"("+G.source+")"},"")+"$",L]}function Oa(L,R,G){if(L=L.match(R)){R={};var N=1,V;for(V in G)if(C(G,
V)){var ha=G[V],ta=ha.groups?ha.groups+1:1;!ha.literal&&ha.token&&(R[ha.token.val[0]]=ha.deser(L.slice(N,N+ta)));N+=ta}return[L,R]}return[L,{}]}function Ea(L){var R=function(V){switch(V){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";
default:return null}},G=null;g(L.z)||(G=Eb.create(L.z));if(!g(L.Z)){G||(G=new rb(L.Z));var N=L.Z}g(L.q)||(L.M=3*(L.q-1)+1);g(L.h)||(12>L.h&&1===L.a?L.h+=12:12===L.h&&0===L.a&&(L.h=0));0===L.G&&L.y&&(L.y=-L.y);g(L.u)||(L.S=x(L.u));return[Object.keys(L).reduce(function(V,ha){var ta=R(ha);ta&&(V[ta]=L[ha]);return V},{}),G,N]}function La(){Vb||(Vb=Za.fromMillis(1555555555555));return Vb}function Ma(L,R){if(L.literal)return L;var G=wb.macroTokenToFormatOpts(L.val);if(!G)return L;var N=wb.create(R,G).formatDateTimeParts(La()).map(function(V){var ha=
V.type;V=V.value;"literal"===ha?ha={literal:!0,val:V}:(V=G[ha],ha=ed[ha],"object"===typeof ha&&(ha=ha[V]),ha=ha?{literal:!1,val:ha}:void 0);return ha});return N.includes(void 0)?L:N}function Pa(L,R){var G;return(G=Array.prototype).concat.apply(G,L.map(function(N){return Ma(N,R)}))}function ab(L,R,G){G=Pa(wb.parseFormat(G),L);var N=G.map(function(Ja){return Ka(Ja,L)}),V=N.find(function(Ja){return Ja.invalidReason});if(V)return{input:R,tokens:G,invalidReason:V.invalidReason};V=Ia(N);N=RegExp(V[0],"i");
var ha=Oa(R,N,V[1]);V=ha[0];var ta=(ha=ha[1])?Ea(ha):[null,null,void 0],za=ta[0],Ga=ta[1];ta=ta[2];if(C(ha,"a")&&C(ha,"H"))throw new tb("Can't include meridiem when specifying 24-hour format");return{input:R,tokens:G,regex:N,rawMatches:V,matches:ha,result:za,zone:Ga,specificOffset:ta}}function fb(L,R){return new sb("unit out of range","you specified "+R+" (of type "+typeof R+") as a "+L+", which is invalid")}function gb(L,R,G){R=new Date(Date.UTC(L,R-1,G));100>L&&0<=L&&R.setUTCFullYear(R.getUTCFullYear()-
1900);L=R.getUTCDay();return 0===L?7:L}function Cb(L,R){var G=E(L)?Wb:Xb,N=G.findIndex(function(V){return V<R});return{month:N+1,day:R-G[N]}}function Db(L){var R=L.year,G=L.month,N=L.day;var V=N+(E(R)?Wb:Xb)[G-1];G=gb(R,G,N);V=Math.floor((V-G+10)/7);1>V?(--R,V=S(R)):V>S(R)&&(R+=1,V=1);return q({weekYear:R,weekNumber:V,weekday:G},ca(L))}function jb(L){var R=L.weekYear,G=L.weekNumber,N=L.weekday,V=gb(R,1,4),ha=E(R)?366:365;G=7*G+N-V-3;1>G?(ha=R-1,G+=E(ha)?366:365):G>ha?(ha=R+1,G-=E(R)?366:365):ha=R;
R=Cb(ha,G);return q({year:ha,month:R.month,day:R.day},ca(L))}function lb(L){var R=L.year;var G=L.month;G=L.day+(E(R)?Wb:Xb)[G-1];return q({year:R,ordinal:G},ca(L))}function ub(L){var R=L.year,G=Cb(R,L.ordinal);return q({year:R,month:G.month,day:G.day},ca(L))}function vb(L){var R=r(L.year),G=D(L.month,1,12),N=D(L.day,1,J(L.year,L.month));return R?G?N?!1:fb("day",L.day):fb("month",L.month):fb("year",L.year)}function zb(L){var R=L.hour,G=L.minute,N=L.second;L=L.millisecond;var V=D(R,0,23)||24===R&&0===
G&&0===N&&0===L,ha=D(G,0,59),ta=D(N,0,59),za=D(L,0,999);return V?ha?ta?za?!1:fb("millisecond",L):fb("second",N):fb("minute",G):fb("hour",R)}function Va(L){return new sb("unsupported zone",'the zone "'+L.name+'" is not supported')}function ob(L){null===L.weekData&&(L.weekData=Db(L.c));return L.weekData}function db(L,R){var G={ts:L.ts,zone:L.zone,c:L.c,o:L.o,loc:L.loc,invalid:L.invalid};return new Za(q({},G,R,{old:G}))}function Ab(L,R,G){var N=L-6E4*R,V=G.offset(N);if(R===V)return[N,R];N-=6E4*(V-R);
R=G.offset(N);return V===R?[N,V]:[L-6E4*Math.min(V,R),Math.max(V,R)]}function Fb(L,R){var G=new Date(L+6E4*R);return{year:G.getUTCFullYear(),month:G.getUTCMonth()+1,day:G.getUTCDate(),hour:G.getUTCHours(),minute:G.getUTCMinutes(),second:G.getUTCSeconds(),millisecond:G.getUTCMilliseconds()}}function eb(L,R,G){return Ab(O(L),R,G)}function pb(L,R){var G=L.o,N=L.c.year+Math.trunc(R.years),V=L.c.month+Math.trunc(R.months)+3*Math.trunc(R.quarters);V=q({},L.c,{year:N,month:V,day:Math.min(L.c.day,J(N,V))+
Math.trunc(R.days)+7*Math.trunc(R.weeks)});N=cb.fromObject({years:R.years-Math.trunc(R.years),quarters:R.quarters-Math.trunc(R.quarters),months:R.months-Math.trunc(R.months),weeks:R.weeks-Math.trunc(R.weeks),days:R.days-Math.trunc(R.days),hours:R.hours,minutes:R.minutes,seconds:R.seconds,milliseconds:R.milliseconds}).as("milliseconds");V=O(V);V=Ab(V,G,L.zone);G=V[0];V=V[1];0!==N&&(G+=N,V=L.zone.offset(G));return{ts:G,o:V}}function ib(L,R,G,N,V,ha){var ta=G.setZone,za=G.zone;return L&&0!==Object.keys(L).length?
(L=Za.fromObject(L,q({},G,{zone:R||za,specificOffset:ha})),ta?L:L.setZone(za)):Za.invalid(new sb("unparsable",'the input "'+V+"\" can't be parsed as "+N))}function Wa(L,R,G){void 0===G&&(G=!0);return L.isValid?wb.create(bb.create("en-US"),{allowZ:G,forceSimple:!0}).formatDateTimeFromString(L,R):null}function xb(L,R){var G=9999<L.c.year||0>L.c.year,N="";G&&0<=L.c.year&&(N+="+");N+=y(L.c.year,G?6:4);R?(N=N+"-"+y(L.c.month),N=N+"-"+y(L.c.day)):(N+=y(L.c.month),N+=y(L.c.day));return N}function Ya(L,R,
G,N,V,ha){var ta=y(L.c.hour);R?(ta=ta+":"+y(L.c.minute),0===L.c.second&&G||(ta+=":")):ta+=y(L.c.minute);0===L.c.second&&G||(ta+=y(L.c.second),0===L.c.millisecond&&N||(ta=ta+"."+y(L.c.millisecond,3)));V&&(L.isOffsetFixed&&0===L.offset&&!ha?ta+="Z":0>L.o?(ta=ta+"-"+y(Math.trunc(-L.o/60)),ta=ta+":"+y(Math.trunc(-L.o%60))):(ta=ta+"+"+y(Math.trunc(L.o/60)),ta=ta+":"+y(Math.trunc(L.o%60))));ha&&(ta+="["+L.zone.ianaName+"]");return ta}function Nb(L){var R={year:"year",years:"year",month:"month",months:"month",
day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[L.toLowerCase()];if(!R)throw new Jb(L);return R}function Xa(L,R){var G=ea(R.zone,$a.defaultZone),N=bb.fromObject(R),V=$a.now();if(!g(L.year)){var ha=
d(lc);for(var ta;!(ta=ha()).done;)ta=ta.value,g(L[ta])&&(L[ta]=mc[ta]);if(ha=vb(L)||zb(L))return Za.invalid(ha);V=G.offset(V);ha=eb(L,V,G);V=ha[0];ha=ha[1]}return new Za({ts:V,zone:G,loc:N,o:ha})}function Ib(L,R,G){var N=g(G.round)?!0:G.round,V=function(Ja,Qa){Ja=A(Ja,N||G.calendary?0:2,!0);return R.loc.clone(G).relFormatter(G).format(Ja,Qa)},ha=function(Ja){return G.calendary?R.hasSame(L,Ja)?0:R.startOf(Ja).diff(L.startOf(Ja),Ja).get(Ja):R.diff(L,Ja).get(Ja)};if(G.unit)return V(ha(G.unit),G.unit);
for(var ta=d(G.units),za;!(za=ta()).done;){za=za.value;var Ga=ha(za);if(1<=Math.abs(Ga))return V(Ga,za)}return V(L>R?-0:0,G.units[G.units.length-1])}function Kb(L){var R={};0<L.length&&"object"===typeof L[L.length-1]?(R=L[L.length-1],L=Array.from(L).slice(0,L.length-1)):L=Array.from(L);return[R,L]}function hb(L){if(Za.isDateTime(L))return L;if(L&&L.valueOf&&t(L.valueOf()))return Za.fromJSDate(L);if(L&&"object"===typeof L)return Za.fromObject(L);throw new mb("Unknown datetime argument: "+L+", of type "+
typeof L);}var qb=function(L){function R(){return L.apply(this,arguments)||this}n(R,L);return R}(k(Error)),Ob=function(L){function R(G){return L.call(this,"Invalid DateTime: "+G.toMessage())||this}n(R,L);return R}(qb),yb=function(L){function R(G){return L.call(this,"Invalid Interval: "+G.toMessage())||this}n(R,L);return R}(qb),Yb=function(L){function R(G){return L.call(this,"Invalid Duration: "+G.toMessage())||this}n(R,L);return R}(qb),tb=function(L){function R(){return L.apply(this,arguments)||this}
n(R,L);return R}(qb),Jb=function(L){function R(G){return L.call(this,"Invalid unit "+G)||this}n(R,L);return R}(qb),mb=function(L){function R(){return L.apply(this,arguments)||this}n(R,L);return R}(qb),Bb=function(L){function R(){return L.call(this,"Zone is an abstract class")||this}n(R,L);return R}(qb),Zb={year:"numeric",month:"numeric",day:"numeric"},nc={year:"numeric",month:"short",day:"numeric"},fd={year:"numeric",month:"short",day:"numeric",weekday:"short"},oc={year:"numeric",month:"long",day:"numeric"},
pc={year:"numeric",month:"long",day:"numeric",weekday:"long"},qc={hour:"numeric",minute:"numeric"},rc={hour:"numeric",minute:"numeric",second:"numeric"},sc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},tc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},uc={hour:"numeric",minute:"numeric",hourCycle:"h23"},vc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},wc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},
xc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},yc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},zc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Ac={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},Bc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},gd={year:"numeric",month:"short",day:"numeric",weekday:"short",
hour:"numeric",minute:"numeric"},Cc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Dc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Ec={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Fc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Gc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Wc="January February March April May June July August September October November December".split(" "),fc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Vc="JFMAMJJASOND".split(""),hc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),gc="Mon Tue Wed Thu Fri Sat Sun".split(" "),Xc="MTWTFSS".split(""),Hc=["AM","PM"],$c=["Before Christ","Anno Domini"],Zc=["BC","AD"],Yc=["B","A"],hd={D:Zb,DD:nc,DDD:oc,DDDD:pc,t:qc,tt:rc,ttt:sc,tttt:tc,T:uc,TT:vc,TTT:wc,TTTT:xc,f:yc,ff:Ac,
fff:Cc,ffff:Ec,F:zc,FF:Bc,FFF:Dc,FFFF:Fc},wb=function(){function L(G,N){this.opts=N;this.loc=G;this.systemLoc=null}L.create=function(G,N){void 0===N&&(N={});return new L(G,N)};L.parseFormat=function(G){for(var N=null,V="",ha=!1,ta=[],za=0;za<G.length;za++){var Ga=G.charAt(za);"'"===Ga?(0<V.length&&ta.push({literal:ha,val:V}),N=null,V="",ha=!ha):ha?V+=Ga:Ga===N?V+=Ga:(0<V.length&&ta.push({literal:!1,val:V}),N=V=Ga)}0<V.length&&ta.push({literal:ha,val:V});return ta};L.macroTokenToFormatOpts=function(G){return hd[G]};
var R=L.prototype;R.formatWithSystemDefault=function(G,N){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(G,q({},this.opts,N)).format()};R.formatDateTime=function(G,N){void 0===N&&(N={});return this.loc.dtFormatter(G,q({},this.opts,N)).format()};R.formatDateTimeParts=function(G,N){void 0===N&&(N={});return this.loc.dtFormatter(G,q({},this.opts,N)).formatToParts()};R.resolvedOptions=function(G,N){void 0===N&&(N={});return this.loc.dtFormatter(G,
q({},this.opts,N)).resolvedOptions()};R.num=function(G,N){void 0===N&&(N=0);if(this.opts.forceSimple)return y(G,N);var V=q({},this.opts);0<N&&(V.padTo=N);return this.loc.numberFormatter(V).format(G)};R.formatDateTimeFromString=function(G,N){var V=this,ha="en"===this.loc.listingMode(),ta=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,za=function(Sa,Ta){return V.loc.extract(G,Sa,Ta)},Ga=function(Sa){return G.isOffsetFixed&&0===G.offset&&Sa.allowZ?"Z":G.isValid?G.zone.formatOffset(G.ts,
Sa.format):""},Ja=function(Sa,Ta){return ha?ka(Sa)[G.month-1]:za(Ta?{month:Sa}:{month:Sa,day:"numeric"},"month")},Qa=function(Sa,Ta){return ha?aa(Sa)[G.weekday-1]:za(Ta?{weekday:Sa}:{weekday:Sa,month:"long",day:"numeric"},"weekday")},Ua=function(Sa){return ha?ja(Sa)[0>G.year?0:1]:za({era:Sa},"era")};return U(L.parseFormat(N),function(Sa){switch(Sa){case "S":return V.num(G.millisecond);case "u":case "SSS":return V.num(G.millisecond,3);case "s":return V.num(G.second);case "ss":return V.num(G.second,
2);case "uu":return V.num(Math.floor(G.millisecond/10),2);case "uuu":return V.num(Math.floor(G.millisecond/100));case "m":return V.num(G.minute);case "mm":return V.num(G.minute,2);case "h":return V.num(0===G.hour%12?12:G.hour%12);case "hh":return V.num(0===G.hour%12?12:G.hour%12,2);case "H":return V.num(G.hour);case "HH":return V.num(G.hour,2);case "Z":return Ga({format:"narrow",allowZ:V.opts.allowZ});case "ZZ":return Ga({format:"short",allowZ:V.opts.allowZ});case "ZZZ":return Ga({format:"techie",
allowZ:V.opts.allowZ});case "ZZZZ":return G.zone.offsetName(G.ts,{format:"short",locale:V.loc.locale});case "ZZZZZ":return G.zone.offsetName(G.ts,{format:"long",locale:V.loc.locale});case "z":return G.zoneName;case "a":return ha?Hc[12>G.hour?0:1]:za({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ta?za({day:"numeric"},"day"):V.num(G.day);case "dd":return ta?za({day:"2-digit"},"day"):V.num(G.day,2);case "c":return V.num(G.weekday);case "ccc":return Qa("short",!0);case "cccc":return Qa("long",
!0);case "ccccc":return Qa("narrow",!0);case "E":return V.num(G.weekday);case "EEE":return Qa("short",!1);case "EEEE":return Qa("long",!1);case "EEEEE":return Qa("narrow",!1);case "L":return ta?za({month:"numeric",day:"numeric"},"month"):V.num(G.month);case "LL":return ta?za({month:"2-digit",day:"numeric"},"month"):V.num(G.month,2);case "LLL":return Ja("short",!0);case "LLLL":return Ja("long",!0);case "LLLLL":return Ja("narrow",!0);case "M":return ta?za({month:"numeric"},"month"):V.num(G.month);case "MM":return ta?
za({month:"2-digit"},"month"):V.num(G.month,2);case "MMM":return Ja("short",!1);case "MMMM":return Ja("long",!1);case "MMMMM":return Ja("narrow",!1);case "y":return ta?za({year:"numeric"},"year"):V.num(G.year);case "yy":return ta?za({year:"2-digit"},"year"):V.num(G.year.toString().slice(-2),2);case "yyyy":return ta?za({year:"numeric"},"year"):V.num(G.year,4);case "yyyyyy":return ta?za({year:"numeric"},"year"):V.num(G.year,6);case "G":return Ua("short");case "GG":return Ua("long");case "GGGGG":return Ua("narrow");
case "kk":return V.num(G.weekYear.toString().slice(-2),2);case "kkkk":return V.num(G.weekYear,4);case "W":return V.num(G.weekNumber);case "WW":return V.num(G.weekNumber,2);case "o":return V.num(G.ordinal);case "ooo":return V.num(G.ordinal,3);case "q":return V.num(G.quarter);case "qq":return V.num(G.quarter,2);case "X":return V.num(Math.floor(G.ts/1E3));case "x":return V.num(G.ts);default:var Ta=L.macroTokenToFormatOpts(Sa);Sa=Ta?V.formatWithSystemDefault(G,Ta):Sa;return Sa}})};R.formatDurationFromString=
function(G,N){var V=this,ha=function(Ga){switch(Ga[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}},ta=L.parseFormat(N),za=ta.reduce(function(Ga,Ja){var Qa=Ja.val;return Ja.literal?Ga:Ga.concat(Qa)},[]);za=G.shiftTo.apply(G,za.map(ha).filter(function(Ga){return Ga}));return U(ta,function(Ga){return function(Ja){var Qa=ha(Ja);return Qa?
V.num(Ga.get(Qa),Ja.length):Ja}}(za))};return L}(),sb=function(){function L(R,G){this.reason=R;this.explanation=G}L.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return L}(),Hb=function(){function L(){}var R=L.prototype;R.offsetName=function(G,N){throw new Bb;};R.formatOffset=function(G,N){throw new Bb;};R.offset=function(G){throw new Bb;};R.equals=function(G){throw new Bb;};b(L,[{key:"type",get:function(){throw new Bb;}},{key:"name",get:function(){throw new Bb;
}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new Bb;}},{key:"isValid",get:function(){throw new Bb;}}]);return L}(),$b=null,Ic=function(L){function R(){return L.apply(this,arguments)||this}n(R,L);var G=R.prototype;G.offsetName=function(N,V){return Y(N,V.format,V.locale)};G.formatOffset=function(N,V){return ba(this.offset(N),V)};G.offset=function(N){return-(new Date(N)).getTimezoneOffset()};G.equals=function(N){return"system"===N.type};b(R,[{key:"type",
get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===$b&&($b=new R);return $b}}]);return R}(Hb),Pb={},id={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},Qb={},Eb=function(L){function R(N){var V=L.call(this)||this;V.zoneName=N;V.valid=R.isValidZone(N);return V}n(R,L);R.create=function(N){Qb[N]||(Qb[N]=
new R(N));return Qb[N]};R.resetCache=function(){Qb={};Pb={}};R.isValidSpecifier=function(N){return this.isValidZone(N)};R.isValidZone=function(N){if(!N)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:N})).format(),!0}catch(V){return!1}};var G=R.prototype;G.offsetName=function(N,V){return Y(N,V.format,V.locale,this.name)};G.formatOffset=function(N,V){return ba(this.offset(N),V)};G.offset=function(N){N=new Date(N);if(isNaN(N))return NaN;var V=this.name;Pb[V]||(Pb[V]=new Intl.DateTimeFormat("en-US",
{hour12:!1,timeZone:V,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));V=Pb[V];if(V.formatToParts){V=V.formatToParts(N);for(var ha=[],ta=0;ta<V.length;ta++){var za=V[ta],Ga=za.type;za=za.value;var Ja=id[Ga];"era"===Ga?ha[Ja]=za:g(Ja)||(ha[Ja]=parseInt(za,10))}V=ha}else V=V.format(N).replace(/\u200E/g,""),V=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(V),V=[V[3],V[1],V[2],V[4],V[5],V[6],V[7]];ha=V[0];ta=V[1];Ga=V[2];za=V[4];Ja=V[5];
var Qa=V[6];"BC"===V[3]&&(ha=-Math.abs(ha)+1);V=O({year:ha,month:ta,day:Ga,hour:24===za?0:za,minute:Ja,second:Qa,millisecond:0});N=+N;ha=N%1E3;return(V-(N-(0<=ha?ha:1E3+ha)))/6E4};G.equals=function(N){return"iana"===N.type&&N.name===this.name};b(R,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return R}(Hb),ac=null,rb=function(L){function R(N){var V=L.call(this)||
this;V.fixed=N;return V}n(R,L);R.instance=function(N){return 0===N?R.utcInstance:new R(N)};R.parseSpecifier=function(N){return N&&(N=N.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new R(K(N[1],N[2])):null};var G=R.prototype;G.offsetName=function(){return this.name};G.formatOffset=function(N,V){return ba(this.fixed,V)};G.offset=function(){return this.fixed};G.equals=function(N){return"fixed"===N.type&&N.fixed===this.fixed};b(R,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===
this.fixed?"UTC":"UTC"+ba(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+ba(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===ac&&(ac=new R(0));return ac}}]);return R}(Hb),ic=function(L){function R(N){var V=L.call(this)||this;V.zoneName=N;return V}n(R,L);var G=R.prototype;G.offsetName=function(){return null};G.formatOffset=function(){return""};G.offset=
function(){return NaN};G.equals=function(){return!1};b(R,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return R}(Hb),Jc=function(){return Date.now()},Kc="system",Lc=null,Mc=null,Nc=null,Oc,$a=function(){function L(){}L.resetCaches=function(){bb.resetCache();Eb.resetCache()};b(L,null,[{key:"now",get:function(){return Jc},set:function(R){Jc=R}},{key:"defaultZone",
get:function(){return ea(Kc,Ic.instance)},set:function(R){Kc=R}},{key:"defaultLocale",get:function(){return Lc},set:function(R){Lc=R}},{key:"defaultNumberingSystem",get:function(){return Mc},set:function(R){Mc=R}},{key:"defaultOutputCalendar",get:function(){return Nc},set:function(R){Nc=R}},{key:"throwOnInvalid",get:function(){return Oc},set:function(R){Oc=R}}]);return L}(),jd=["base"],kd=["padTo","floor"],Pc={},Sb={},bc={},cc={},Rb=null,ld=function(){function L(R,G,N){this.padTo=N.padTo||0;this.floor=
N.floor||!1;N.padTo;N.floor;var V=h(N,kd);if(!G||0<Object.keys(V).length)G=q({useGrouping:!1},N),0<N.padTo&&(G.minimumIntegerDigits=N.padTo),N=G,void 0===N&&(N={}),G=JSON.stringify([R,N]),V=bc[G],V||(V=new Intl.NumberFormat(R,N),bc[G]=V),this.inf=V}L.prototype.format=function(R){if(this.inf)return this.inf.format(this.floor?Math.floor(R):R);R=this.floor?Math.floor(R):A(R,3);return y(R,this.padTo)};return L}(),md=function(){function L(G,N,V){this.opts=V;if(G.zone.isUniversal){var ha=G.offset/60*-1;
ha=0<=ha?"Etc/GMT+"+ha:"Etc/GMT"+ha;0!==G.offset&&Eb.create(ha).valid?this.dt=G:(ha="UTC",this.dt=V.timeZoneName?G:0===G.offset?G:Za.fromMillis(G.ts+6E4*G.offset))}else"system"===G.zone.type?this.dt=G:(this.dt=G,ha=G.zone.name);G=q({},this.opts);ha&&(G.timeZone=ha);this.dtf=fa(N,G)}var R=L.prototype;R.format=function(){return this.dtf.format(this.dt.toJSDate())};R.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};R.resolvedOptions=function(){return this.dtf.resolvedOptions()};
return L}(),nd=function(){function L(G,N,V){this.opts=q({style:"long"},V);if(!N&&w()){N=V;void 0===N&&(N={});V=N;V.base;V=h(V,jd);V=JSON.stringify([G,V]);var ha=cc[V];ha||(ha=new Intl.RelativeTimeFormat(G,N),cc[V]=ha);this.rtf=ha}}var R=L.prototype;R.format=function(G,N){return this.rtf?this.rtf.format(G,N):oa(N,G,this.opts.numeric,"long"!==this.opts.style)};R.formatToParts=function(G,N){return this.rtf?this.rtf.formatToParts(G,N):[]};return L}(),bb=function(){function L(G,N,V,ha){var ta=G.indexOf("-u-");
if(-1===ta)G=[G];else{ta=G.substring(0,ta);try{var za=fa(G).resolvedOptions()}catch(Ga){za=fa(ta).resolvedOptions()}G=za;G=[ta,G.numberingSystem,G.calendar]}za=G[1];ta=G[2];this.locale=G[0];this.numberingSystem=N||za||null;this.outputCalendar=V||ta||null;N=this.locale;V=this.numberingSystem;if((G=this.outputCalendar)||V)N+="-u",G&&(N+="-ca-"+G),V&&(N+="-nu-"+V);this.intl=N;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache=
{};this.specifiedLocale=ha;this.fastNumbersCached=null}L.fromOpts=function(G){return L.create(G.locale,G.numberingSystem,G.outputCalendar,G.defaultToEN)};L.create=function(G,N,V,ha){void 0===ha&&(ha=!1);G=G||$a.defaultLocale;var ta;(ta=G)||(ha?ha="en-US":(Rb||(Rb=(new Intl.DateTimeFormat).resolvedOptions().locale),ha=Rb),ta=ha);return new L(ta,N||$a.defaultNumberingSystem,V||$a.defaultOutputCalendar,G)};L.resetCache=function(){Rb=null;Sb={};bc={};cc={}};L.fromObject=function(G){G=void 0===G?{}:G;
return L.create(G.locale,G.numberingSystem,G.outputCalendar)};var R=L.prototype;R.listingMode=function(){var G=this.isEnglish(),N=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return G&&N?"en":"intl"};R.clone=function(G){return G&&0!==Object.getOwnPropertyNames(G).length?L.create(G.locale||this.specifiedLocale,G.numberingSystem||this.numberingSystem,G.outputCalendar||this.outputCalendar,G.defaultToEN||!1):this};R.redefaultToEN=
function(G){void 0===G&&(G={});return this.clone(q({},G,{defaultToEN:!0}))};R.redefaultToSystem=function(G){void 0===G&&(G={});return this.clone(q({},G,{defaultToEN:!1}))};R.months=function(G,N,V){var ha=this;void 0===N&&(N=!1);void 0===V&&(V=!0);return va(this,G,V,ka,function(){var ta=N?{month:G,day:"numeric"}:{month:G},za=N?"format":"standalone";ha.monthsCache[za][G]||(ha.monthsCache[za][G]=pa(function(Ga){return ha.extract(Ga,ta,"month")}));return ha.monthsCache[za][G]})};R.weekdays=function(G,
N,V){var ha=this;void 0===N&&(N=!1);void 0===V&&(V=!0);return va(this,G,V,aa,function(){var ta=N?{weekday:G,year:"numeric",month:"long",day:"numeric"}:{weekday:G},za=N?"format":"standalone";ha.weekdaysCache[za][G]||(ha.weekdaysCache[za][G]=ra(function(Ga){return ha.extract(Ga,ta,"weekday")}));return ha.weekdaysCache[za][G]})};R.meridiems=function(G){var N=this;void 0===G&&(G=!0);return va(this,void 0,G,function(){return Hc},function(){if(!N.meridiemCache){var V={hour:"numeric",hourCycle:"h12"};N.meridiemCache=
[Za.utc(2016,11,13,9),Za.utc(2016,11,13,19)].map(function(ha){return N.extract(ha,V,"dayperiod")})}return N.meridiemCache})};R.eras=function(G,N){var V=this;void 0===N&&(N=!0);return va(this,G,N,ja,function(){var ha={era:G};V.eraCache[G]||(V.eraCache[G]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(function(ta){return V.extract(ta,ha,"era")}));return V.eraCache[G]})};R.extract=function(G,N,V){return(G=this.dtFormatter(G,N).formatToParts().find(function(ha){return ha.type.toLowerCase()===V}))?G.value:null};
R.numberFormatter=function(G){void 0===G&&(G={});return new ld(this.intl,G.forceSimple||this.fastNumbers,G)};R.dtFormatter=function(G,N){void 0===N&&(N={});return new md(G,this.intl,N)};R.relFormatter=function(G){void 0===G&&(G={});return new nd(this.intl,this.isEnglish(),G)};R.listFormatter=function(G){void 0===G&&(G={});var N=this.intl;void 0===G&&(G={});var V=JSON.stringify([N,G]),ha=Pc[V];ha||(ha=new Intl.ListFormat(N,G),Pc[V]=ha);return ha};R.isEnglish=function(){return"en"===this.locale||"en-us"===
this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};R.equals=function(G){return this.locale===G.locale&&this.numberingSystem===G.numberingSystem&&this.outputCalendar===G.outputCalendar};b(L,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var G=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=G}return this.fastNumbersCached}}]);return L}(),Qc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,dc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Rc=RegExp(""+dc.source+("(?:"+Qc.source+"?(?:\\[("+Gc.source+")\\])?)?")),ec=RegExp("(?:T"+Rc.source+")?"),od=T("weekYear","weekNumber","weekDay"),pd=T("year","ordinal"),Sc=RegExp(dc.source+" ?(?:"+Qc.source+"|("+Gc.source+"))?"),qd=RegExp("(?: "+Sc.source+")?"),rd=RegExp("^T?"+dc.source+"$"),sd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
ad={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},td=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,ud=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
wd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,xd=Fa(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ec),yd=Fa(/(\d{4})-?W(\d\d)(?:-?(\d))?/,ec),zd=Fa(/(\d{4})-?(\d{3})/,ec),Ad=Fa(Rc),Tc=Ha(function(L,R){return[{year:ia(L,R),month:ia(L,R+1,1),day:ia(L,R+2,1)},null,R+3]},qa,da,Z),Bd=Ha(od,qa,da,Z),Cd=Ha(pd,qa,da,Z),Dd=Ha(qa,da,Z),Ed=Ha(qa),Fd=Fa(/(\d{4})-(\d\d)-(\d\d)/,qd),Gd=Fa(Sc),Hd=Ha(qa,da,Z),Uc={weeks:{days:7,hours:168,
minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Id=q({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6}},Uc),Jd=q({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Uc),Gb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),bd=Gb.slice(0).reverse(),
cb=function(){function L(G){var N="longterm"===G.conversionAccuracy||!1;this.values=G.values;this.loc=G.loc||bb.create();this.conversionAccuracy=N?"longterm":"casual";this.invalid=G.invalid||null;this.matrix=N?Jd:Id;this.isLuxonDuration=!0}L.fromMillis=function(G,N){return L.fromObject({milliseconds:G},N)};L.fromObject=function(G,N){void 0===N&&(N={});if(null==G||"object"!==typeof G)throw new mb("Duration.fromObject: argument expected to be an object, got "+(null===G?"null":typeof G));return new L({values:Q(G,
L.normalizeUnit),loc:bb.fromObject(N),conversionAccuracy:N.conversionAccuracy})};L.fromDurationLike=function(G){if(t(G))return L.fromMillis(G);if(L.isDuration(G))return G;if("object"===typeof G)return L.fromObject(G);throw new mb("Unknown duration argument "+G+" of type "+typeof G);};L.fromISO=function(G,N){var V=Ca(G,[sd,ma])[0];return V?L.fromObject(V,N):L.invalid("unparsable",'the input "'+G+"\" can't be parsed as ISO 8601")};L.fromISOTime=function(G,N){var V=Ca(G,[rd,Ed])[0];return V?L.fromObject(V,
N):L.invalid("unparsable",'the input "'+G+"\" can't be parsed as ISO 8601")};L.invalid=function(G,N){void 0===N&&(N=null);if(!G)throw new mb("need to specify a reason the Duration is invalid");var V=G instanceof sb?G:new sb(G,N);if($a.throwOnInvalid)throw new Yb(V);return new L({invalid:V})};L.normalizeUnit=function(G){var N={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",
minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[G?G.toLowerCase():G];if(!N)throw new Jb(G);return N};L.isDuration=function(G){return G&&G.isLuxonDuration||!1};var R=L.prototype;R.toFormat=function(G,N){void 0===N&&(N={});var V=q({},N,{floor:!1!==N.round&&!1!==N.floor});return this.isValid?wb.create(this.loc,V).formatDurationFromString(this,G):"Invalid Duration"};R.toHuman=function(G){var N=this;void 0===G&&(G={});var V=
Gb.map(function(ha){var ta=N.values[ha];return g(ta)?null:N.loc.numberFormatter(q({style:"unit",unitDisplay:"long"},G,{unit:ha.slice(0,-1)})).format(ta)}).filter(function(ha){return ha});return this.loc.listFormatter(q({type:"conjunction",style:G.listStyle||"narrow"},G)).format(V)};R.toObject=function(){return this.isValid?q({},this.values):{}};R.toISO=function(){if(!this.isValid)return null;var G="P";0!==this.years&&(G+=this.years+"Y");if(0!==this.months||0!==this.quarters)G+=this.months+3*this.quarters+
"M";0!==this.weeks&&(G+=this.weeks+"W");0!==this.days&&(G+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)G+="T";0!==this.hours&&(G+=this.hours+"H");0!==this.minutes&&(G+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)G+=A(this.seconds+this.milliseconds/1E3,3)+"S";"P"===G&&(G+="T0S");return G};R.toISOTime=function(G){void 0===G&&(G={});if(!this.isValid)return null;var N=this.toMillis();if(0>N||864E5<=N)return null;G=q({suppressMilliseconds:!1,
suppressSeconds:!1,includePrefix:!1,format:"extended"},G);N=this.shiftTo("hours","minutes","seconds","milliseconds");var V="basic"===G.format?"hhmm":"hh:mm";G.suppressSeconds&&0===N.seconds&&0===N.milliseconds||(V+="basic"===G.format?"ss":":ss",G.suppressMilliseconds&&0===N.milliseconds||(V+=".SSS"));N=N.toFormat(V);G.includePrefix&&(N="T"+N);return N};R.toJSON=function(){return this.toISO()};R.toString=function(){return this.toISO()};R.toMillis=function(){return this.as("milliseconds")};R.valueOf=
function(){return this.toMillis()};R.plus=function(G){if(!this.isValid)return this;G=L.fromDurationLike(G);for(var N={},V=d(Gb),ha;!(ha=V()).done;)if(ha=ha.value,C(G.values,ha)||C(this.values,ha))N[ha]=G.get(ha)+this.get(ha);return na(this,{values:N},!0)};R.minus=function(G){if(!this.isValid)return this;G=L.fromDurationLike(G);return this.plus(G.negate())};R.mapUnits=function(G){if(!this.isValid)return this;for(var N={},V=0,ha=Object.keys(this.values);V<ha.length;V++){var ta=ha[V];N[ta]=P(G(this.values[ta],
ta))}return na(this,{values:N},!0)};R.get=function(G){return this[L.normalizeUnit(G)]};R.set=function(G){if(!this.isValid)return this;G=q({},this.values,Q(G,L.normalizeUnit));return na(this,{values:G})};R.reconfigure=function(G){var N=void 0===G?{}:G;G=N.conversionAccuracy;N={loc:this.loc.clone({locale:N.locale,numberingSystem:N.numberingSystem})};G&&(N.conversionAccuracy=G);return na(this,N)};R.as=function(G){return this.isValid?this.shiftTo(G).get(G):NaN};R.normalize=function(){if(!this.isValid)return this;
var G=this.toObject();la(this.matrix,G);return na(this,{values:G},!0)};R.shiftTo=function(){for(var G=arguments.length,N=Array(G),V=0;V<G;V++)N[V]=arguments[V];if(!this.isValid||0===N.length)return this;N=N.map(function(nb){return L.normalizeUnit(nb)});G={};V={};for(var ha=this.toObject(),ta,za=d(Gb),Ga;!(Ga=za()).done;)if(Ga=Ga.value,0<=N.indexOf(Ga)){ta=Ga;var Ja=0,Qa;for(Qa in V)Ja+=this.matrix[Qa][Ga]*V[Qa],V[Qa]=0;t(ha[Ga])&&(Ja+=ha[Ga]);var Ua=Math.trunc(Ja);G[Ga]=Ua;V[Ga]=(1E3*Ja-1E3*Ua)/1E3;
for(var Sa in ha)Gb.indexOf(Sa)>Gb.indexOf(Ga)&&sa(this.matrix,ha,Sa,G,Ga)}else t(ha[Ga])&&(V[Ga]=ha[Ga]);for(var Ta in V)0!==V[Ta]&&(G[ta]+=Ta===ta?V[Ta]:V[Ta]/this.matrix[ta][Ta]);return na(this,{values:G},!0).normalize()};R.negate=function(){if(!this.isValid)return this;for(var G={},N=0,V=Object.keys(this.values);N<V.length;N++){var ha=V[N];G[ha]=0===this.values[ha]?0:-this.values[ha]}return na(this,{values:G},!0)};R.equals=function(G){if(!this.isValid||!G.isValid||!this.loc.equals(G.loc))return!1;
for(var N=d(Gb),V;!(V=N()).done;){var ha=V.value;V=this.values[ha];ha=G.values[ha];V=void 0===V||0===V?void 0===ha||0===ha:V===ha;if(!V)return!1}return!0};b(L,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?
this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",
get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return L}(),Lb=function(){function L(G){this.s=G.start;this.e=G.end;this.invalid=G.invalid||null;this.isLuxonInterval=!0}L.invalid=function(G,N){void 0===N&&(N=null);if(!G)throw new mb("need to specify a reason the Interval is invalid");var V=G instanceof sb?G:new sb(G,N);if($a.throwOnInvalid)throw new yb(V);
return new L({invalid:V})};L.fromDateTimes=function(G,N){var V=hb(G),ha=hb(N);var ta=V&&V.isValid?ha&&ha.isValid?ha<V?Lb.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+V.toISO()+" and end\x3d"+ha.toISO()):null:Lb.invalid("missing or invalid end"):Lb.invalid("missing or invalid start");return null==ta?new L({start:V,end:ha}):ta};L.after=function(G,N){var V=cb.fromDurationLike(N),ha=hb(G);return L.fromDateTimes(ha,ha.plus(V))};L.before=function(G,
N){var V=cb.fromDurationLike(N),ha=hb(G);return L.fromDateTimes(ha.minus(V),ha)};L.fromISO=function(G,N){var V=(G||"").split("/",2),ha=V[0];V=V[1];if(ha&&V){try{var ta=Za.fromISO(ha,N);var za=ta.isValid}catch(Qa){za=!1}try{var Ga=Za.fromISO(V,N);var Ja=Ga.isValid}catch(Qa){Ja=!1}if(za&&Ja)return L.fromDateTimes(ta,Ga);if(za){if(Ga=cb.fromISO(V,N),Ga.isValid)return L.after(ta,Ga)}else if(Ja&&(ta=cb.fromISO(ha,N),ta.isValid))return L.before(Ga,ta)}return L.invalid("unparsable",'the input "'+G+"\" can't be parsed as ISO 8601")};
L.isInterval=function(G){return G&&G.isLuxonInterval||!1};var R=L.prototype;R.length=function(G){void 0===G&&(G="milliseconds");return this.isValid?this.toDuration.apply(this,[G]).get(G):NaN};R.count=function(G){void 0===G&&(G="milliseconds");if(!this.isValid)return NaN;var N=this.start.startOf(G),V=this.end.startOf(G);return Math.floor(V.diff(N,G).get(G))+1};R.hasSame=function(G){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,G):!1};R.isEmpty=function(){return this.s.valueOf()===
this.e.valueOf()};R.isAfter=function(G){return this.isValid?this.s>G:!1};R.isBefore=function(G){return this.isValid?this.e<=G:!1};R.contains=function(G){return this.isValid?this.s<=G&&this.e>G:!1};R.set=function(G){G=void 0===G?{}:G;return this.isValid?L.fromDateTimes(G.start||this.s,G.end||this.e):this};R.splitAt=function(){var G=this;if(!this.isValid)return[];for(var N=arguments.length,V=Array(N),ha=0;ha<N;ha++)V[ha]=arguments[ha];N=V.map(hb).filter(function(Ga){return G.contains(Ga)}).sort();V=
[];ha=this.s;for(var ta=0;ha<this.e;){var za=N[ta]||this.e;za=+za>+this.e?this.e:za;V.push(L.fromDateTimes(ha,za));ha=za;ta+=1}return V};R.splitBy=function(G){G=cb.fromDurationLike(G);if(!this.isValid||!G.isValid||0===G.as("milliseconds"))return[];for(var N=this.s,V=1,ha,ta=[];N<this.e;)ha=this.start.plus(G.mapUnits(function(za){return za*V})),ha=+ha>+this.e?this.e:ha,ta.push(L.fromDateTimes(N,ha)),N=ha,V+=1;return ta};R.divideEqually=function(G){return this.isValid?this.splitBy(this.length()/G).slice(0,
G):[]};R.overlaps=function(G){return this.e>G.s&&this.s<G.e};R.abutsStart=function(G){return this.isValid?+this.e===+G.s:!1};R.abutsEnd=function(G){return this.isValid?+G.e===+this.s:!1};R.engulfs=function(G){return this.isValid?this.s<=G.s&&this.e>=G.e:!1};R.equals=function(G){return this.isValid&&G.isValid?this.s.equals(G.s)&&this.e.equals(G.e):!1};R.intersection=function(G){if(!this.isValid)return this;var N=this.s>G.s?this.s:G.s;G=this.e<G.e?this.e:G.e;return N>=G?null:L.fromDateTimes(N,G)};R.union=
function(G){return this.isValid?L.fromDateTimes(this.s<G.s?this.s:G.s,this.e>G.e?this.e:G.e):this};L.merge=function(G){var N=G.sort(function(V,ha){return V.s-ha.s}).reduce(function(V,ha){var ta=V[0],za=V[1];return za?za.overlaps(ha)||za.abutsStart(ha)?[ta,za.union(ha)]:[ta.concat([za]),ha]:[ta,ha]},[[],null]);G=N[0];(N=N[1])&&G.push(N);return G};L.xor=function(G){var N,V=null,ha=0,ta=[];G=G.map(function(za){return[{time:za.s,type:"s"},{time:za.e,type:"e"}]});G=(N=Array.prototype).concat.apply(N,G).sort(function(za,
Ga){return za.time-Ga.time});for(N=d(G);!(G=N()).done;)G=G.value,ha+="s"===G.type?1:-1,1===ha?V=G.time:(V&&+V!==+G.time&&ta.push(L.fromDateTimes(V,G.time)),V=null);return L.merge(ta)};R.difference=function(){for(var G=this,N=arguments.length,V=Array(N),ha=0;ha<N;ha++)V[ha]=arguments[ha];return L.xor([this].concat(V)).map(function(ta){return G.intersection(ta)}).filter(function(ta){return ta&&!ta.isEmpty()})};R.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":
"Invalid Interval"};R.toISO=function(G){return this.isValid?this.s.toISO(G)+"/"+this.e.toISO(G):"Invalid Interval"};R.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};R.toISOTime=function(G){return this.isValid?this.s.toISOTime(G)+"/"+this.e.toISOTime(G):"Invalid Interval"};R.toFormat=function(G,N){var V=(void 0===N?{}:N).separator;V=void 0===V?" \u2013 ":V;return this.isValid?""+this.s.toFormat(G)+V+this.e.toFormat(G):"Invalid Interval"};R.toDuration=
function(G,N){return this.isValid?this.e.diff(this.s,G,N):cb.invalid(this.invalidReason)};R.mapEndpoints=function(G){return L.fromDateTimes(G(this.s),G(this.e))};b(L,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:
null}}]);return L}(),Mb=function(){function L(){}L.hasDST=function(R){void 0===R&&(R=$a.defaultZone);var G=Za.now().setZone(R).set({month:12});return!R.isUniversal&&G.offset!==G.set({month:6}).offset};L.isValidIANAZone=function(R){return Eb.isValidZone(R)};L.normalizeZone=function(R){return ea(R,$a.defaultZone)};L.months=function(R,G){void 0===R&&(R="long");var N=void 0===G?{}:G,V=N.locale,ha=N.numberingSystem,ta=N.locObj;N=N.outputCalendar;return((void 0===ta?null:ta)||bb.create(void 0===V?null:
V,void 0===ha?null:ha,void 0===N?"gregory":N)).months(R)};L.monthsFormat=function(R,G){void 0===R&&(R="long");var N=void 0===G?{}:G,V=N.locale,ha=N.numberingSystem,ta=N.locObj;N=N.outputCalendar;return((void 0===ta?null:ta)||bb.create(void 0===V?null:V,void 0===ha?null:ha,void 0===N?"gregory":N)).months(R,!0)};L.weekdays=function(R,G){void 0===R&&(R="long");var N=void 0===G?{}:G,V=N.locale,ha=N.numberingSystem;N=N.locObj;return((void 0===N?null:N)||bb.create(void 0===V?null:V,void 0===ha?null:ha,
null)).weekdays(R)};L.weekdaysFormat=function(R,G){void 0===R&&(R="long");var N=void 0===G?{}:G,V=N.locale,ha=N.numberingSystem;N=N.locObj;return((void 0===N?null:N)||bb.create(void 0===V?null:V,void 0===ha?null:ha,null)).weekdays(R,!0)};L.meridiems=function(R){R=(void 0===R?{}:R).locale;return bb.create(void 0===R?null:R).meridiems()};L.eras=function(R,G){void 0===R&&(R="short");var N=(void 0===G?{}:G).locale;return bb.create(void 0===N?null:N,null,"gregory").eras(R)};L.features=function(){return{relative:w()}};
return L}(),Tb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},jc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},cd=Tb.hanidec.replace(/[\[|\]]/g,"").split(""),kc="[ "+String.fromCharCode(160)+"]",Ub=new RegExp(kc,"g"),ed={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM","short":"MMM","long":"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Vb=null,Xb=[0,31,59,90,120,151,181,212,243,273,304,334],Wb=[0,31,60,91,121,152,182,213,244,274,305,335],mc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},
Ld={ordinal:1,hour:0,minute:0,second:0,millisecond:0},lc="year month day hour minute second millisecond".split(" "),Md="weekYear weekNumber weekday hour minute second millisecond".split(" "),Nd="year ordinal hour minute second millisecond".split(" "),Za=function(){function L(G){var N=G.zone||$a.defaultZone,V=G.invalid||(Number.isNaN(G.ts)?new sb("invalid input"):null)||(N.isValid?null:Va(N));this.ts=g(G.ts)?$a.now():G.ts;var ha=null,ta=null;V||(G.old&&G.old.ts===this.ts&&G.old.zone.equals(N)?(ta=
[G.old.c,G.old.o],ha=ta[0],ta=ta[1]):(ta=N.offset(this.ts),ha=Fb(this.ts,ta),ha=(V=Number.isNaN(ha.year)?new sb("invalid input"):null)?null:ha,ta=V?null:ta));this._zone=N;this.loc=G.loc||bb.create();this.invalid=V;this.weekData=null;this.c=ha;this.o=ta;this.isLuxonDateTime=!0}L.now=function(){return new L({})};L.local=function(){var G=Kb(arguments),N=G[1];return Xa({year:N[0],month:N[1],day:N[2],hour:N[3],minute:N[4],second:N[5],millisecond:N[6]},G[0])};L.utc=function(){var G=Kb(arguments),N=G[0],
V=G[1];G=V[0];var ha=V[1],ta=V[2],za=V[3],Ga=V[4],Ja=V[5];V=V[6];N.zone=rb.utcInstance;return Xa({year:G,month:ha,day:ta,hour:za,minute:Ga,second:Ja,millisecond:V},N)};L.fromJSDate=function(G,N){void 0===N&&(N={});var V="[object Date]"===Object.prototype.toString.call(G)?G.valueOf():NaN;if(Number.isNaN(V))return L.invalid("invalid input");var ha=ea(N.zone,$a.defaultZone);return ha.isValid?new L({ts:V,zone:ha,loc:bb.fromObject(N)}):L.invalid(Va(ha))};L.fromMillis=function(G,N){void 0===N&&(N={});if(t(G))return-864E13>
G||864E13<G?L.invalid("Timestamp out of range"):new L({ts:G,zone:ea(N.zone,$a.defaultZone),loc:bb.fromObject(N)});throw new mb("fromMillis requires a numerical input, but received a "+typeof G+" with value "+G);};L.fromSeconds=function(G,N){void 0===N&&(N={});if(t(G))return new L({ts:1E3*G,zone:ea(N.zone,$a.defaultZone),loc:bb.fromObject(N)});throw new mb("fromSeconds requires a numerical input");};L.fromObject=function(G,N){void 0===N&&(N={});G=G||{};var V=ea(N.zone,$a.defaultZone);if(!V.isValid)return L.invalid(Va(V));
var ha=$a.now(),ta=g(N.specificOffset)?V.offset(ha):N.specificOffset,za=Q(G,Nb),Ga=!g(za.ordinal),Ja=!g(za.year),Qa=!g(za.month)||!g(za.day);Ja=Ja||Qa;var Ua=za.weekYear||za.weekNumber,Sa=bb.fromObject(N);if((Ja||Ga)&&Ua)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Qa&&Ga)throw new tb("Can't mix ordinal dates with month/day");Qa=Ua||za.weekday&&!Ja;Ua=Fb(ha,ta);if(Qa){var Ta=Md;ha=Kd;Ua=Db(Ua)}else Ga?(Ta=Nd,ha=Ld,Ua=lb(Ua)):(Ta=lc,ha=mc);var nb=!1;Ta=d(Ta);
for(var kb;!(kb=Ta()).done;)kb=kb.value,g(za[kb])?za[kb]=nb?ha[kb]:Ua[kb]:nb=!0;Qa?(ha=r(za.weekYear),Ua=D(za.weekNumber,1,S(za.weekYear)),nb=D(za.weekday,1,7),ha=ha?Ua?nb?!1:fb("weekday",za.weekday):fb("week",za.week):fb("weekYear",za.weekYear)):Ga?(ha=r(za.year),Ua=D(za.ordinal,1,E(za.year)?366:365),ha=ha?Ua?!1:fb("ordinal",za.ordinal):fb("year",za.year)):ha=vb(za);if(ha=ha||zb(za))return L.invalid(ha);Ga=Qa?jb(za):Ga?ub(za):za;ta=eb(Ga,ta,V);V=new L({ts:ta[0],zone:V,o:ta[1],loc:Sa});return za.weekday&&
Ja&&G.weekday!==V.weekday?L.invalid("mismatched weekday","you can't specify both a weekday of "+za.weekday+" and a date of "+V.toISO()):V};L.fromISO=function(G,N){void 0===N&&(N={});var V=Ca(G,[xd,Tc],[yd,Bd],[zd,Cd],[Ad,Dd]);return ib(V[0],V[1],N,"ISO 8601",G)};L.fromRFC2822=function(G,N){void 0===N&&(N={});var V=Ca(G.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[td,M]);return ib(V[0],V[1],N,"RFC 2822",G)};L.fromHTTP=function(G,N){void 0===N&&(N={});var V=Ca(G,[ud,W],[vd,W],[wd,
H]);return ib(V[0],V[1],N,"HTTP",N)};L.fromFormat=function(G,N,V){void 0===V&&(V={});if(g(G)||g(N))throw new mb("fromFormat requires an input string and a format");var ha=V,ta=ha.locale;ha=ha.numberingSystem;ta=bb.fromOpts({locale:void 0===ta?null:ta,numberingSystem:void 0===ha?null:ha,defaultToEN:!0});ta=ab(ta,G,N);var za=[ta.result,ta.zone,ta.specificOffset,ta.invalidReason];ta=za[0];ha=za[1];var Ga=za[2];return(za=za[3])?L.invalid(za):ib(ta,ha,V,"format "+N,G,Ga)};L.fromString=function(G,N,V){void 0===
V&&(V={});return L.fromFormat(G,N,V)};L.fromSQL=function(G,N){void 0===N&&(N={});var V=Ca(G,[Fd,Tc],[Gd,Hd]);return ib(V[0],V[1],N,"SQL",G)};L.invalid=function(G,N){void 0===N&&(N=null);if(!G)throw new mb("need to specify a reason the DateTime is invalid");var V=G instanceof sb?G:new sb(G,N);if($a.throwOnInvalid)throw new Ob(V);return new L({invalid:V})};L.isDateTime=function(G){return G&&G.isLuxonDateTime||!1};var R=L.prototype;R.get=function(G){return this[G]};R.resolvedLocaleOptions=function(G){void 0===
G&&(G={});G=wb.create(this.loc.clone(G),G).resolvedOptions(this);return{locale:G.locale,numberingSystem:G.numberingSystem,outputCalendar:G.calendar}};R.toUTC=function(G,N){void 0===G&&(G=0);void 0===N&&(N={});return this.setZone(rb.instance(G),N)};R.toLocal=function(){return this.setZone($a.defaultZone)};R.setZone=function(G,N){var V=void 0===N?{}:N,ha=V.keepLocalTime;ha=void 0===ha?!1:ha;V=V.keepCalendarTime;V=void 0===V?!1:V;G=ea(G,$a.defaultZone);if(G.equals(this.zone))return this;if(G.isValid){var ta=
this.ts;if(ha||V)ha=G.offset(this.ts),V=this.toObject(),ta=eb(V,ha,G)[0];return db(this,{ts:ta,zone:G})}return L.invalid(Va(G))};R.reconfigure=function(G){G=void 0===G?{}:G;G=this.loc.clone({locale:G.locale,numberingSystem:G.numberingSystem,outputCalendar:G.outputCalendar});return db(this,{loc:G})};R.setLocale=function(G){return this.reconfigure({locale:G})};R.set=function(G){if(!this.isValid)return this;G=Q(G,Nb);var N=!g(G.weekYear)||!g(G.weekNumber)||!g(G.weekday),V=!g(G.ordinal),ha=!g(G.year),
ta=!g(G.month)||!g(G.day),za=G.weekYear||G.weekNumber;if((ha||ta||V)&&za)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ta&&V)throw new tb("Can't mix ordinal dates with month/day");N?N=jb(q({},Db(this.c),G)):g(G.ordinal)?(N=q({},this.toObject(),G),g(G.day)&&(N.day=Math.min(J(N.year,N.month),N.day))):N=ub(q({},lb(this.c),G));G=eb(N,this.o,this.zone);return db(this,{ts:G[0],o:G[1]})};R.plus=function(G){if(!this.isValid)return this;G=cb.fromDurationLike(G);return db(this,
pb(this,G))};R.minus=function(G){if(!this.isValid)return this;G=cb.fromDurationLike(G).negate();return db(this,pb(this,G))};R.startOf=function(G){if(!this.isValid)return this;var N={};G=cb.normalizeUnit(G);switch(G){case "years":N.month=1;case "quarters":case "months":N.day=1;case "weeks":case "days":N.hour=0;case "hours":N.minute=0;case "minutes":N.second=0;case "seconds":N.millisecond=0}"weeks"===G&&(N.weekday=1);"quarters"===G&&(N.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(N)};R.endOf=
function(G){var N;return this.isValid?this.plus((N={},N[G]=1,N)).startOf(G).minus(1):this};R.toFormat=function(G,N){void 0===N&&(N={});return this.isValid?wb.create(this.loc.redefaultToEN(N)).formatDateTimeFromString(this,G):"Invalid DateTime"};R.toLocaleString=function(G,N){void 0===G&&(G=Zb);void 0===N&&(N={});return this.isValid?wb.create(this.loc.clone(N),G).formatDateTime(this):"Invalid DateTime"};R.toLocaleParts=function(G){void 0===G&&(G={});return this.isValid?wb.create(this.loc.clone(G),
G).formatDateTimeParts(this):[]};R.toISO=function(G){var N=void 0===G?{}:G,V=N.format;G=N.suppressSeconds;G=void 0===G?!1:G;var ha=N.suppressMilliseconds;ha=void 0===ha?!1:ha;var ta=N.includeOffset;ta=void 0===ta?!0:ta;N=N.extendedZone;N=void 0===N?!1:N;if(!this.isValid)return null;V="extended"===(void 0===V?"extended":V);var za=xb(this,V);return za=za+"T"+Ya(this,V,G,ha,ta,N)};R.toISODate=function(G){G=(void 0===G?{}:G).format;return this.isValid?xb(this,"extended"===(void 0===G?"extended":G)):null};
R.toISOWeekDate=function(){return Wa(this,"kkkk-'W'WW-c")};R.toISOTime=function(G){var N=void 0===G?{}:G;G=N.suppressMilliseconds;var V=N.suppressSeconds,ha=N.includeOffset,ta=N.includePrefix,za=N.extendedZone;N=N.format;return this.isValid?((void 0===ta?0:ta)?"T":"")+Ya(this,"extended"===(void 0===N?"extended":N),void 0===V?!1:V,void 0===G?!1:G,void 0===ha?!0:ha,void 0===za?!1:za):null};R.toRFC2822=function(){return Wa(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};R.toHTTP=function(){return Wa(this.toUTC(),
"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};R.toSQLDate=function(){return this.isValid?xb(this,!0):null};R.toSQLTime=function(G){var N=void 0===G?{}:G;G=N.includeOffset;G=void 0===G?!0:G;var V=N.includeZone;V=void 0===V?!1:V;N=N.includeOffsetSpace;N=void 0===N?!0:N;var ha="HH:mm:ss.SSS";if(V||G)N&&(ha+=" "),V?ha+="z":G&&(ha+="ZZ");return Wa(this,ha,!0)};R.toSQL=function(G){void 0===G&&(G={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(G):null};R.toString=function(){return this.isValid?this.toISO():
"Invalid DateTime"};R.valueOf=function(){return this.toMillis()};R.toMillis=function(){return this.isValid?this.ts:NaN};R.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};R.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1E3):NaN};R.toJSON=function(){return this.toISO()};R.toBSON=function(){return this.toJSDate()};R.toObject=function(G){void 0===G&&(G={});if(!this.isValid)return{};var N=q({},this.c);G.includeConfig&&(N.outputCalendar=this.outputCalendar,N.numberingSystem=
this.loc.numberingSystem,N.locale=this.loc.locale);return N};R.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};R.diff=function(G,N,V){void 0===N&&(N="milliseconds");void 0===V&&(V={});if(!this.isValid||!G.isValid)return cb.invalid("created by diffing an invalid DateTime");V=q({locale:this.locale,numberingSystem:this.numberingSystem},V);var ha=(Array.isArray(N)?N:[N]).map(cb.normalizeUnit);N=G.valueOf()>this.valueOf();G=ua(N?this:G,N?G:this,ha,V);return N?G.negate():G};R.diffNow=function(G,
N){void 0===G&&(G="milliseconds");void 0===N&&(N={});return this.diff(L.now(),G,N)};R.until=function(G){return this.isValid?Lb.fromDateTimes(this,G):this};R.hasSame=function(G,N){if(!this.isValid)return!1;var V=G.valueOf(),ha=this.setZone(G.zone,{keepLocalTime:!0});return ha.startOf(N)<=V&&V<=ha.endOf(N)};R.equals=function(G){return this.isValid&&G.isValid&&this.valueOf()===G.valueOf()&&this.zone.equals(G.zone)&&this.loc.equals(G.loc)};R.toRelative=function(G){void 0===G&&(G={});if(!this.isValid)return null;
var N=G.base||L.fromObject({},{zone:this.zone}),V=G.padding?this<N?-G.padding:G.padding:0,ha="years months days hours minutes seconds".split(" "),ta=G.unit;Array.isArray(G.unit)&&(ha=G.unit,ta=void 0);return Ib(N,this.plus(V),q({},G,{numeric:"always",units:ha,unit:ta}))};R.toRelativeCalendar=function(G){void 0===G&&(G={});return this.isValid?Ib(G.base||L.fromObject({},{zone:this.zone}),this,q({},G,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};L.min=function(){for(var G=arguments.length,
N=Array(G),V=0;V<G;V++)N[V]=arguments[V];if(!N.every(L.isDateTime))throw new mb("min requires all arguments be DateTimes");return v(N,function(ha){return ha.valueOf()},Math.min)};L.max=function(){for(var G=arguments.length,N=Array(G),V=0;V<G;V++)N[V]=arguments[V];if(!N.every(L.isDateTime))throw new mb("max requires all arguments be DateTimes");return v(N,function(ha){return ha.valueOf()},Math.max)};L.fromFormatExplain=function(G,N,V){void 0===V&&(V={});var ha=V;V=ha.locale;ha=ha.numberingSystem;V=
bb.fromOpts({locale:void 0===V?null:V,numberingSystem:void 0===ha?null:ha,defaultToEN:!0});return ab(V,G,N)};L.fromStringExplain=function(G,N,V){void 0===V&&(V={});return L.fromFormatExplain(G,N,V)};b(L,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:
null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:
NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?ob(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?ob(this).weekNumber:NaN}},
{key:"weekday",get:function(){return this.isValid?ob(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?lb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?Mb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?Mb.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?Mb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",
get:function(){return this.isValid?Mb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},
{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return E(this.year)}},{key:"daysInMonth",get:function(){return J(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?E(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?S(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Zb}},{key:"DATE_MED",get:function(){return nc}},
{key:"DATE_MED_WITH_WEEKDAY",get:function(){return fd}},{key:"DATE_FULL",get:function(){return oc}},{key:"DATE_HUGE",get:function(){return pc}},{key:"TIME_SIMPLE",get:function(){return qc}},{key:"TIME_WITH_SECONDS",get:function(){return rc}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return sc}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return tc}},{key:"TIME_24_SIMPLE",get:function(){return uc}},{key:"TIME_24_WITH_SECONDS",get:function(){return vc}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return wc}},
{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return xc}},{key:"DATETIME_SHORT",get:function(){return yc}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return zc}},{key:"DATETIME_MED",get:function(){return Ac}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return Bc}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return gd}},{key:"DATETIME_FULL",get:function(){return Cc}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Dc}},{key:"DATETIME_HUGE",get:function(){return Ec}},{key:"DATETIME_HUGE_WITH_SECONDS",
get:function(){return Fc}}]);return L}();F.DateTime=Za;F.Duration=cb;F.FixedOffsetZone=rb;F.IANAZone=Eb;F.Info=Mb;F.Interval=Lb;F.InvalidZone=ic;F.Settings=$a;F.SystemZone=Ic;F.VERSION="2.4.0";F.Zone=Hb;Object.defineProperty(F,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../../geometry/Extent ../../../layers/Field".split(" "),function(F,l,b,q,n,p){function m(e){var k=null;
e.domain&&(k="range"===e.domain.type?{type:"range",range:[e.domain.minValue,e.domain.maxValue]}:{type:"codedValue",codedValues:e.domain.toJson().codedValues});return b(b({name:e.name,type:e.type,alias:e.alias},void 0!==e.length?{length:e.length}:{}),{editable:!0===e.editable,nullable:!0===e.nullable,domain:k})}function a(e){return e instanceof Date}Object.defineProperty(l,"__esModule",{value:!0});l.stableStringify=l.extractServiceUrl=l.toEsriGeometryType=l.layerFieldEsriConstants=l.layerGeometryEsriRestConstants=
l.layerGeometryEsriConstants=l.callback=l.errback=l.defaultMaxRecords=l.sameGeomType=l.convertLinearUnitsToCode=l.shapeExtent=l.convertSquareUnitsToCode=l.cloneAttributes=l.equalityTest=l.isDate=l.isArray=l.isNumber=l.isBoolean=l.isString=l.IdState=l.esriFieldToJson=l.cloneField=l.FeatureServiceDatabaseType=void 0;(function(e){e[e.Standardised=0]="Standardised";e[e.StandardisedNoInterval=1]="StandardisedNoInterval";e[e.SqlServer=2]="SqlServer";e[e.Oracle=3]="Oracle";e[e.Postgres=4]="Postgres";e[e.PGDB=
5]="PGDB";e[e.FILEGDB=6]="FILEGDB";e[e.NotEvaluated=7]="NotEvaluated"})(l.FeatureServiceDatabaseType||(l.FeatureServiceDatabaseType={}));l.cloneField=function(e){return new p(m(e))};l.esriFieldToJson=m;(function(e){e[e.InFeatureSet=0]="InFeatureSet";e[e.NotInFeatureSet=1]="NotInFeatureSet";e[e.Unknown=2]="Unknown"})(l.IdState||(l.IdState={}));l.isString=function(e){return"string"===typeof e||e instanceof String};l.isBoolean=function(e){return"boolean"===typeof e};l.isNumber=function(e){return"number"===
typeof e};l.isArray=function(e){return e instanceof Array};l.isDate=a;l.equalityTest=function(e,k){return e===k?!0:a(e)&&a(k)?e.getTime()===k.getTime():!1};l.cloneAttributes=function(e){var k={},h;for(h in e)k[h]=e[h];return k};l.convertSquareUnitsToCode=function(e){if(void 0===e)return null;if("number"===typeof e)return e;switch(e.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
l.shapeExtent=function(e){if(null===e)return null;switch(e.type){case "polygon":case "multipoint":case "polyline":return e.getExtent();case "point":return new n({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case "extent":return e}return null};l.convertLinearUnitsToCode=function(e){if(void 0===e)return null;if("number"===typeof e||"number"===typeof e)return e;switch(e.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};
l.sameGeomType=function(e,k){return e===k||"point"===e&&"esriGeometryPoint"===k||"polyline"===e&&"esriGeometryPolyline"===k||"polygon"===e&&"esriGeometryPolygon"===k||"extent"===e&&"esriGeometryEnvelope"===k||"multipoint"===e&&"esriGeometryMultipoint"===k||"point"===k&&"esriGeometryPoint"===e||"polyline"===k&&"esriGeometryPolyline"===e||"polygon"===k&&"esriGeometryPolygon"===e||"extent"===k&&"esriGeometryEnvelope"===e||"multipoint"===k&&"esriGeometryMultipoint"===e?!0:!1};l.defaultMaxRecords=1E3;
l.errback=function(e){return function(k){e.reject(k)}};l.callback=function(e,k){return function(){try{e.apply(null,arguments)}catch(h){k.reject(h)}}};l.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};l.layerGeometryEsriRestConstants={point:"esriGeometryPoint",
polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};l.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",
single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",
esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};l.toEsriGeometryType=function(e){switch(e){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";
case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};l.extractServiceUrl=function(e){if(void 0===e)return"";e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");e=e.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return e=e.split("?")[0]};l.stableStringify=function(e,k){k||(k={});"function"===typeof k&&(k={cmp:k});var h="boolean"===typeof k.cycles?k.cycles:!1,f=k.cmp&&function(d){return function(g){return function(t,r){return d({key:t,value:g[t]},{key:r,value:g[r]})}}}(k.cmp),
c=[];return function t(g){g&&g.toJson&&"function"===typeof g.toJson&&(g=g.toJson());if(void 0!==g){if("number"===typeof g)return isFinite(g)?""+g:"null";if("object"!==typeof g)return JSON.stringify(g);var r;if(Array.isArray(g)){var w="[";for(r=0;r<g.length;r++)r&&(w+=","),w+=t(g[r])||"null";return w+"]"}if(null===g)return"null";if(c.includes(g)){if(h)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var v=c.push(g)-1,z=Object.keys(g).sort(f&&f(g));w=
"";for(r=0;r<z.length;r++){var C=z[r],D=t(g[C]);D&&(w&&(w+=","),w+=JSON.stringify(C)+":"+D)}c.splice(v,1);return"{"+w+"}"}}(e)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(F,l,b,q,n,p,m){F=F(null,{declaredClass:"esri.layers.Field",constructor:function(a){if(a&&l.isObject(a)&&(this.name=a.name,this.type=a.type,this.alias=a.alias,this.length=a.length,this.editable=a.editable,this.nullable=
a.nullable,this.defaultValue=a.defaultValue,this.description=a.description?JSON.parse(a.description):null,this.isViewOverride=!!a.isViewOverride,(a=a.domain)&&l.isObject(a)))switch(a.type){case "range":this.domain=new p(a);break;case "codedValue":this.domain=new m(a)}},toJson:function(){return n.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});l.setObject("layers.Field",F,q);return F})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(F,l,b,q,n,p){F=F([p],{declaredClass:"esri.layers.RangeDomain",constructor:function(m){m&&l.isObject(m)&&(this.minValue=m.range[0],this.maxValue=m.range[1])},toJson:function(){var m=this.inherited(arguments);
m.range=[this.minValue,this.maxValue];return n.fixJson(m)}});l.setObject("layers.RangeDomain",F,q);return F})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,l,b,q,n){F=F(null,{declaredClass:"esri.layers.Domain",constructor:function(p){p&&l.isObject(p)&&(this.name=p.name,this.type=p.type)},toJson:function(){return n.fixJson({name:this.name,type:this.type})}});l.setObject("layers.Domain",F,q);return F})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(F,l,b,q,n,p,m){F=F([m],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(a){a&&l.isObject(a)&&(this.codedValues=a.codedValues)},getName:function(a){var e;b.some(this.codedValues,function(k){k.code==a&&(e=k.name);return!!e});return e},toJson:function(){var a=this.inherited(arguments);a.codedValues=l.clone(this.codedValues);return p.fixJson(a)}});l.setObject("layers.CodedValueDomain",F,n);return F})},"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends",
"./Dictionary"],function(F,l,b,q){return function(n){function p(m,a,e,k,h,f){var c=n.call(this)||this;c.attachmentUrl=h;c.immutable=!1;c.setField("id",m);c.setField("name",a);c.setField("contenttype",e);c.setField("size",k);c.setField("exifinfo",f);c.immutable=!0;return c}b(p,n);return p}(q)})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f){return function(){function c(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}c.createFromGraphic=function(d){var g=new c;g._geometry=d.geometry?d.geometry:null;g.attributes=void 0===d.attributes?{}:null===d.attributes?{}:d.attributes;d._sourceLayer?(g._layer=d._sourceLayer,g._datesfixed=!1):d._layer?(g._layer=d._layer,g._datesfixed=!1):d.layer&&
"fields"in d.layer?(g._layer=d.layer,g._datesfixed=!1):d.sourceLayer&&"fields"in d.sourceLayer&&(g._layer=d.sourceLayer,g._datesfixed=!1);return g};c.createFromArcadeFeature=function(d){var g=new c;g._datesfixed=d._datesfixed;g.attributes=d.attributes;g._geometry=d._geometry;d._layer&&(g._layer=d._layer);return g};c.createFromArcadeDictionary=function(d){var g=new c;g.attributes=d.field("attributes");null!==g.attributes?g.attributes instanceof m?(g.attributes=g.attributes.attributes,null===g.attributes&&
(g.attributes={})):g.attributes={}:g.attributes={};g._geometry=d.field("geometry");null!==g._geometry&&(g._geometry instanceof m?g._geometry=c.parseGeometryFromDictionary(g._geometry):g._geometry instanceof k||(g._geometry=null));return g};c.createFromGraphicLikeObject=function(d,g,t){void 0===t&&(t=null);var r=new c;null===g&&(g={});r.attributes=g;r._geometry=d?d:null;r._layer=t;r._layer&&(r._datesfixed=!1);return r};c.prototype.repurposeFromGraphicLikeObject=function(d,g,t){void 0===t&&(t=null);
null===g&&(g={});this.attributes=g;this._geometry=d?d:null;this._datesfixed=(this._layer=t)?!1:!0};c.prototype.castToText=function(){var d="";!1===this._datesfixed&&this._fixDates();for(var g in this.attributes){""!==d&&(d+=",");var t=this.attributes[g];null==t?d+=JSON.stringify(g)+":null":e.isBoolean(t)||e.isNumber(t)||e.isString(t)?d+=JSON.stringify(g)+":"+JSON.stringify(t):t instanceof k?d+=JSON.stringify(g)+":"+e.toStringExplicit(t):t instanceof a?d+=JSON.stringify(g)+":"+e.toStringExplicit(t):
t instanceof Array?d+=JSON.stringify(g)+":"+e.toStringExplicit(t):t instanceof Date?d+=JSON.stringify(g)+":"+JSON.stringify(t):null!==t&&"object"===typeof t&&void 0!==t.castToText&&(d+=JSON.stringify(g)+":"+t.castToText())}return'{"geometry":'+(null===this.geometry()?"null":e.toStringExplicit(this.geometry()))+',"attributes":{'+d+"}}"};c.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var d=[],g=0;g<this._layer.fields.length;g++){var t=
this._layer.fields[g];"date"!==t.type&&"esriFieldTypeDate"!==t.type||d.push(t.name)}this._datefields=d;0<d.length&&this._fixDateFields(d)}this._datesfixed=!0};c.prototype._fixDateFields=function(d){this.attributes=n({},this.attributes);for(var g=0;g<d.length;g++){var t=this.attributes[d[g]];if(null!==t)if(void 0===t)for(var r in this.attributes){if(r.toLowerCase()===d[g].toLowerCase()){t=this.attributes[r];null===t||t instanceof Date||(this.attributes[r]=new Date(t));break}}else t instanceof Date||
(this.attributes[d[g]]=new Date(t))}};c.prototype.geometry=function(){if(null===this._geometry)return this._geometry;this._geometry instanceof k||(this._geometry=f.fromJson(this._geometry));return this._geometry};c.prototype.field=function(d){!1===this._datesfixed&&this._fixDates();var g=this.attributes[d];if(void 0!==g)return g;g=d.toLowerCase();for(var t in this.attributes)if(t.toLowerCase()===g)return this.attributes[t];if(this._hasFieldDefinition(g))return null;throw Error("Field not Found : "+
d);};c.prototype._hasFieldDefinition=function(d){if(null===this._layer)return!1;for(var g=0;g<this._layer.fields.length;g++)if(this._layer.fields[g].name.toLowerCase()===d)return!0;return!1};c.prototype.setField=function(d,g){if(this.immutable)throw Error("Feature is Immutable");if(!1===e.isSimpleType(g))throw Error("Illegal Value Assignment to Feature");var t=d.toLowerCase();if(void 0===this.attributes[d])for(var r in this.attributes)if(r.toLowerCase()===t){this.attributes[r]=g;return}this.attributes[d]=
g};c.prototype.hasField=function(d){var g=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(var t in this.attributes)if(t.toLowerCase()===g)return!0;return this._hasFieldDefinition(g)?!0:!1};c.prototype.keys=function(){var d=[],g={},t;for(t in this.attributes)d.push(t),g[t.toLowerCase()]=1;if(null!==this._layer)for(t=0;t<this._layer.fields.length;t++){var r=this._layer.fields[t];1!==g[r.name.toLowerCase()]&&d.push(r.name)}return d=d.sort()};c.parseGeometryFromDictionary=function(d){d=c._convertDictionaryToJson(d,
!0);void 0!==d.hasm&&(d.hasM=d.hasm,delete d.hasm);void 0!==d.hasz&&(d.hasZ=d.hasz,delete d.hasz);void 0!==d.spatialreference&&(d.spatialReference=d.spatialreference,delete d.spatialreference);void 0!==d.rings&&(d.rings=this._fixPathArrays(d.rings,!0===d.hasZ,!0===d.hasZ));void 0!==d.paths&&(d.paths=this._fixPathArrays(d.paths,!0===d.hasZ,!0===d.hasM));void 0!==d.points&&(d.points=this._fixPointArrays(d.points,!0===d.hasZ,!0===d.hasM));return f.fromJson(d)};c._fixPathArrays=function(d,g,t){var r=
[];if(d instanceof Array)for(var w=0;w<d.length;w++)r.push(this._fixPointArrays(d[w],g,t));else if(d instanceof a)for(w=0;w<d.length();w++)r.push(this._fixPointArrays(d.get(w),g,t));return r};c._fixPointArrays=function(d,g,t){var r=[];if(d instanceof Array)for(var w=0;w<d.length;w++){var v=d[w];v instanceof h?g&&t?r.push([v.x,v.y,v.z,v.m]):g?r.push([v.x,v.y,v.z]):t?r.push([v.x,v.y,v.m]):r.push([v.x,v.y]):v instanceof a?r.push(v.toArray()):r.push(v)}else if(d instanceof a)for(w=0;w<d.length();w++)v=
d.get(w),v instanceof h?g&&t?r.push([v.x,v.y,v.z,v.m]):g?r.push([v.x,v.y,v.z]):t?r.push([v.x,v.y,v.m]):r.push([v.x,v.y]):v instanceof a?r.push(v.toArray()):r.push(v);return r};c._convertDictionaryToJson=function(d,g){void 0===g&&(g=!1);var t={},r;for(r in d.attributes){var w=d.attributes[r];w instanceof m&&(w=c._convertDictionaryToJson(w));g?t[r.toLowerCase()]=w:t[r]=w}return t};c.parseAttributesFromDictionary=function(d){var g={},t;for(t in d.attributes){var r=d.attributes[t];if(e.isSimpleType(r))g[t]=
r;else throw Error("Illegal Argument");}return g};c.fromJson=function(d){var g=null;null!==d.geometry&&void 0!==d.geometry&&(g=f.fromJson(d.geometry));var t={};if(null!==d.attributes&&void 0!==d.attributes)for(var r in d.attributes){var w=d.attributes[r];if(null===w)t[r]=w;else if(e.isString(w)||e.isNumber(w)||e.isBoolean(w)||e.isDate(w))t[r]=w;else throw Error("Illegal Argument");}return c.createFromGraphicLikeObject(g,t,null)};c.prototype.fullSchema=function(){return this._layer};c.prototype.gdbVersion=
function(){if(null===this._layer)return"";var d=this._layer.gdbVersion;return void 0===d?"":""===d&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":d};c.prototype.castAsJson=function(d){var g={attributes:{},geometry:!0===(null===d||void 0===d?void 0:d.keepGeometryType)?this.geometry():this.geometry().toJson()},t;for(t in this.attributes){var r=this.attributes[t];void 0!==r&&(g.attributes[t]=e.castAsJson(r,d))}return g};c.prototype.castAsJsonAsync=function(d,g){void 0===
d&&(d=null);return b(this,void 0,void 0,function(){return q(this,function(t){return[2,this.castAsJson(g)]})})};return c}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports","./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],function(F,l,b,q){function n(u){return"string"===typeof u||u instanceof String}function p(u,B){return"0"!==u.min&&B.length<Number(u.min)||"*"!==u.max&&B.length>Number(u.max)?-2:1}function m(u,B,x){if(null!==x.localScope&&void 0!==x.localScope[u.toLowerCase()]){var A=
x.localScope[u.toLowerCase()];if("FormulaFunction"===A.type||"any"===A.type)return void 0===A.signature&&(A.signature={min:"0",max:"*"}),p(A.signature,B)}return void 0!==x.globalScope[u.toLowerCase()]&&(A=x.globalScope[u.toLowerCase()],"FormulaFunction"===A.type||"any"===A.type)?(void 0===A.signature&&(A.signature={min:"0",max:"*"}),p(A.signature,B)):-1}function a(u,B){if(u)for(var x=0;x<u.length;x++)e(u[x],B)}function e(u,B){if(u&&!1!==B(u))switch(u.type){case "ArrayExpression":a(u.elements,B);break;
case "AssignmentExpression":case "BinaryExpression":e(u.left,B);e(u.right,B);break;case "BlockStatement":a(u.body,B);break;case "CallExpression":e(u.callee,B);a(u.arguments,B);break;case "ExpressionStatement":e(u.expression,B);break;case "ForInStatement":e(u.left,B);e(u.right,B);e(u.body,B);break;case "ForStatement":e(u.init,B);e(u.test,B);e(u.update,B);e(u.body,B);break;case "FunctionDeclaration":e(u.id,B);a(u.params,B);e(u.body,B);break;case "IfStatement":e(u.test,B);e(u.consequent,B);e(u.alternate,
B);break;case "LogicalExpression":e(u.left,B);e(u.right,B);break;case "MemberExpression":e(u.object,B);e(u.property,B);break;case "ObjectExpression":a(u.properties,B);break;case "Program":a(u.body,B);break;case "Property":e(u.key,B);e(u.value,B);break;case "ReturnStatement":e(u.argument,B);break;case "UnaryExpression":e(u.argument,B);break;case "UpdateExpression":e(u.argument,B);break;case "VariableDeclaration":a(u.declarations,B);break;case "VariableDeclarator":e(u.id,B);e(u.init,B);break;case "TemplateLiteral":a(u.expressions,
B),a(u.quasis,B)}}function k(u,B){void 0===B&&(B=!0);var x=t(u,"SYNTAX","UNREOGNISED");try{switch(u.type){case "VariableDeclarator":return"Identifier"!==u.id.type?t(u,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==u.init?k(u.init,!1):"";case "VariableDeclaration":for(var A=0;A<u.declarations.length;A++)if(x=k(u.declarations[A],B),""!==x)return x;return"";case "ForInStatement":x=k(u.left,B);if(""!==x)break;if("VariableDeclaration"===u.left.type){if(1<u.left.declarations.length)return t(u,"SYNTAX","ONLY1VAR");
if(null!==u.left.declarations[0].init)return t(u,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==u.left.type)return t(u,"SYNTAX","LEFTNOTVAR");x=k(u.right,B);if(""!==x)break;x=k(u.body,B);if(""!==x)break;return"";case "ForStatement":if(null!==u.test&&(x=k(u.test,B),""!==x))break;if(null!==u.init&&(x=k(u.init,B),""!==x))break;if(null!==u.update&&(x=k(u.update,B),""!==x))break;if(null!==u.body&&(x=k(u.body,B),""!==x))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";
case "BreakStatement":return"";case "IfStatement":x=k(u.test,B);if(""!==x)break;if(null!==u.consequent&&(x=k(u.consequent,!1),""!==x))break;if(null!==u.alternate&&(x=k(u.alternate,!1),""!==x))break;return"";case "BlockStatement":var E=[];for(A=0;A<u.body.length;A++)"EmptyStatement"!==u.body[A].type&&E.push(u.body[A]);u.body=E;for(A=0;A<u.body.length;A++)if(x=k(u.body[A],B),""!==x)return x;return"";case "FunctionDeclaration":return!1===B?t(u,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==u.id.type?
t(u,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):k(u.body,!1);case "ReturnStatement":return null!==u.argument?k(u.argument,B):"";case "UpdateExpression":return"Identifier"!==u.argument.type&&"MemberExpression"!==u.argument.type?t(u,"SYNTAX","ASSIGNMENTTOVARSONLY"):k(u.argument,B);case "AssignmentExpression":if("Identifier"!==u.left.type&&"MemberExpression"!==u.left.type)return t(u,"SYNTAX","ASSIGNMENTTOVARSONLY");x=k(u.left,B);if(""!==x)break;switch(u.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:return t(u,"SYNTAX","OPERATORNOTRECOGNISED")}return k(u.right,!1);case "ExpressionStatement":return k(u.expression,!1);case "Identifier":x="";break;case "MemberExpression":x=k(u.object,B);if(""!==x)break;return!0===u.computed?k(u.property,B):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==u.callee.type)return t(u,"SYNTAX","ONLYNODESSUPPORTED");x="";for(A=0;A<u.arguments.length;A++)if(x=k(u.arguments[A],B),""!==x)return x;return"";case "UnaryExpression":x=
k(u.argument,B);break;case "BinaryExpression":x=k(u.left,B);if(""!==x)break;x=k(u.right,B);if(""!==x)break;switch(u.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return t(u,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":x=k(u.left,B);if(""!==x)break;x=k(u.right);if(""!==x)break;switch(u.operator){case "\x26\x26":case "||":break;
default:return t(u,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":x="";for(A=0;A<u.elements.length&&(x=k(u.elements[A],B),""===x);A++);break;case "TemplateLiteral":x="";for(A=0;A<u.quasis.length;A++)if(x=k(u.quasis[A],B),""!==x)return x;for(A=0;A<u.expressions.length&&(x=k(u.expressions[A],B),""===x);A++);break;case "ObjectExpression":x="";for(A=0;A<u.properties.length;A++){x="";if(null!==u.properties[A].key&&("Literal"!==u.properties[A].key.type&&"Identifier"!==u.properties[A].key.type&&
(x=t(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===u.properties[A].key.type)){E=u.properties[A].key;var J="value"in E?E.value:null;"string"===typeof J||J instanceof String||(x=t(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===x&&(x=k(u.properties[A],B));if(""!==x)break}break;case "Property":if("Literal"!==u.key.type&&"Identifier"!==u.key.type)return t(u,"SYNTAX","ONLYLITERAL");if("Identifier"!==u.key.type&&(x=k(u.key,B),""!==x))break;x=k(u.value,B)}return x}catch(O){throw O;}}function h(u,
B){var x=t(u,"SYNTAX","UNREOGNISED"),A=null,E="";try{switch(u.type){case "VariableDeclarator":var J=null===u.init?"":h(u.init,B);if(""!==J)return J;"Identifier"===u.id.type&&(null===B.localScope?B.globalScope[u.id.name.toLowerCase()]={type:"any"}:B.localScope[u.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":A=c(u.id.name.toLowerCase(),u);E=d(u,B);if(""!==E)return E;if(null!==B.localScope)return t(u,"SYNTAX","GLOBALFUNCTIONSONLY");A.isnative=!1;B.globalScope[u.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[A]};return"";case "VariableDeclaration":x="";for(var O=0;O<u.declarations.length&&(x=h(u.declarations[O],B),""===x);O++);break;case "IfStatement":x=h(u.test,B);if(""!==x)break;if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)return t(u.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==u.consequent&&(x=h(u.consequent,B),""!==x))break;if(null!==u.alternate&&(x=h(u.alternate,B),""!==x))break;return"";case "EmptyStatement":return"";
case "BlockStatement":for(O=0;O<u.body.length;O++)if(x=h(u.body[O],B),""!==x)return x;return"";case "ReturnStatement":return null!==u.argument?h(u.argument,B):"";case "ForInStatement":if("VariableDeclaration"===u.left.type){if(1<u.left.declarations.length)return t(u,"SYNTAX","ONLY1VAR");if(null!==u.left.declarations[0].init)return t(u,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==u.left.type)return t(u,"SYNTAX","LEFTNOTVAR");x=h(u.left,B);if(""!==x)break;x=h(u.right,B);if(""!==x)break;x=h(u.body,
B);if(""!==x)break;return"";case "ForStatement":if(null!==u.init&&(x=h(u.init,B),""!==x))break;if(null!==u.test&&(x=h(u.test,B),""!==x))break;if(null!==u.body&&(x=h(u.body,B),""!==x))break;if(null!==u.update&&(x=h(u.update,B),""!==x))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==u.argument.type&&"MemberExpression"!==u.argument.type)return t(u,"SYNTAX","ASSIGNMENTTOVARSONLY");var S=!1;if("MemberExpression"===u.argument.type)return h(u.argument,
B);null!==B.localScope&&void 0!==B.localScope[u.argument.name.toLowerCase()]&&(S=!0);void 0!==B.globalScope[u.argument.name.toLowerCase()]&&(S=!0);return!1===S?"Identifier "+u.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==u.left.type&&"MemberExpression"!==u.left.type)return t(u,"SYNTAX","ASSIGNMENTTOVARSONLY");var X=h(u.right,B);if(""!==X)return X;S=!1;if("MemberExpression"===u.left.type)return X=h(u.left,B),""!==X?X:"";null!==B.localScope&&void 0!==B.localScope[u.left.name.toLowerCase()]&&
(S=!0);void 0!==B.globalScope[u.left.name.toLowerCase()]&&(S=!0);return!1===S?"Identifier "+u.left.name+" has not been declared.":"";case "ExpressionStatement":return h(u.expression,B);case "Identifier":var Y=u.name.toLowerCase();if(null!==B.localScope&&void 0!==B.localScope[Y])return"";x=void 0!==B.globalScope[Y]?"":t(u,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":x=h(u.object,B);if(""!==x)break;return!0===u.computed?h(u.property,B):"";case "Literal":return"";case "TemplateElement":return"";
case "CallExpression":if("Identifier"!==u.callee.type)return t(u,"SYNTAX","ONLYNODESSUPPORTED");x="";for(O=0;O<u.arguments.length;O++)if(x=h(u.arguments[O],B),""!==x)return x;var K=m(u.callee.name,u.arguments,B);-1===K&&(x=t(u,"SYNTAX","NOTFOUND"));-2===K&&(x=t(u,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":x=h(u.argument,B);break;case "BinaryExpression":x=h(u.left,B);if(""!==x)break;x=h(u.right,B);if(""!==x)break;return"";case "LogicalExpression":x=h(u.left,B);if(""!==x)break;if("AssignmentExpression"===
u.left.type||"UpdateExpression"===u.left.type)return t(u.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");x=h(u.right,B);if(""!==x)break;return"AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type?t(u.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":x="";for(O=0;O<u.elements.length&&(x=h(u.elements[O],B),""===x);O++);break;case "TemplateLiteral":x="";for(O=0;O<u.quasis.length;O++)if(x=h(u.quasis[O],B),""!==x)return x;for(O=0;O<u.expressions.length&&
(x=h(u.expressions[O],B),""===x);O++);break;case "ObjectExpression":x="";for(O=0;O<u.properties.length;O++){x="";if(null!==u.properties[O].key&&("Literal"!==u.properties[O].key.type&&"Identifier"!==u.properties[O].key.type&&(x=t(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===u.properties[O].key.type)){var P=u.properties[O].key,Q="value"in P?P.value:null;"string"===typeof Q||Q instanceof String||(x=t(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===x&&(x=h(u.properties[O],B));if(""!==x)break}break;
case "Property":if("Literal"!==u.key.type&&"Identifier"!==u.key.type)return t(u,"SYNTAX","ONLYLITERAL");if("Identifier"!==u.key.type&&(x=h(u.key,B),""!==x))break;x=h(u.value,B)}return x}catch(ba){throw ba;}}function f(u,B){var x=!1,A=B.toLowerCase();e(u,function(E){if(x)return!1;"Identifier"===E.type&&E.name&&E.name.toLowerCase()===A&&(x=!0);return!0});return x}function c(u,B){var x=[];if(void 0!==B.params&&null!==B.params)for(var A=0;A<B.params.length;A++)x.push("any");return{name:u,"return":"any",
params:x}}function d(u,B){for(var x={globalScope:B.globalScope,localScope:{}},A=0;A<u.params.length;A++)x.localScope[u.params[A].name.toLowerCase()]={type:"any"};return h(u.body,x)}function g(u,B,x,A){var E={};if(void 0===u||null===u)u={};if(void 0===x||null===x)x={};E.infinity={type:"any"};E.textformatting={type:"any"};E.pi={type:"any"};for(var J in B)"sync"===A&&void 0!==B[J].min?E[J]={type:"FormulaFunction",signature:{min:B[J].min,max:B[J].max}}:"sync"!==A&&void 0!==B[J].fmin&&(E[J]={type:"FormulaFunction",
signature:{min:B[J].fmin,max:B[J].fmax}});for(B=0;B<x.length;B++)J=x[B],E[J.name]={type:"FormulaFunction",signature:J};for(J in u)E[J]=u[J],E[J].type="any";return E}function t(u,B,x){var A="";switch(B){case "SYNTAX":A="Syntax Error: ";break;case "RUNTIME":A="Runtime Error: ";break;default:A="Syntax Error: "}try{switch(u.type){case "IfStatement":switch(x){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":A+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":A+=" Non Boolean used as Condition"}break;
case "UpdateExpression":case "AssignmentExpression":switch(x){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":A+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":A+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":A+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(x){case "GLOBALFUNCTIONSONLY":A+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":A+=" Function Definition must have an identifier"}break;
case "VariableDeclaration":A+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(x){case "FUNCTIONVARIABLEDECLARATOR":A+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":A+=" Variable Definition must have an identifier"}break;case "Identifier":A+=" Identifier Not Found. ";A+=u.name;break;case "ObjectExpression":switch(x){case "OBJECTPROPERTYMUSTBESTRING":A+=" Property name must be a string"}break;case "ForStatement":switch(x){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":A+=
" Non Boolean used as Condition"}break;case "ForInStatement":switch(x){case "ONLY1VAR":A+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":A+=" Can only declare value for use with IN";break;case "LEFTNOVAR":A+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":A+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":A+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(x){case "PROPERTYNOTFOUND":A+=
"Cannot find member property. ";A+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "OUTOFBOUNDS":A+="Out of Bounds. ";A+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "NOTFOUND":A+="Cannot call member method on null. ";A+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "INVALIDTYPE":A+="Cannot call member property on object of this type. ",A+=!1===u.computed?"Identifier"===u.property.type?u.property.name:
"":""}break;case "Property":switch(x){case "ONLYLITERAL":A+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(x){case "WRONGSIGNATURE":A+="Function signature does not match: ";A+="Identifier"===u.callee.type?u.callee.name:"";break;case "ONLYNODESUPPORTED":A+="Functions must be declared.";A+="Identifier"===u.callee.type?u.callee.name:"";break;case "NOTAFUNCTION":A+="Not a Function: ";A+="Identifier"===u.callee.type?u.callee.name:"";break;case "NOTFOUND":A+=
"Function Not Found: "+("Identifier"===u.callee.type?u.callee.name:"")}break;case "UnaryExpression":switch(x){case "NOTSUPPORTEDUNARYOPERATOR":A+="Operator "+u.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":A+="Unary operator "+u.operator+" cannot be used with this argument."}case "BinaryExpression":switch(x){case "OPERATORNOTRECOGNISED":A+="Binary Operator not recognised "+u.operator}break;case "LogicalExpression":switch(x){case "ONLYBOOLEAN":A+=
"Operator "+u.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":A+="Logical Expression "+u.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(x){case "FUNCTIONCONTEXTILLEGAL":A+=" Cannot Put Function inside Array."}break;default:A+="Expression contains unrecognised code structures."}}catch(E){throw E;}return A}function r(u,B,x){return{line:u.loc.start.line,character:u.loc.start.column,reason:t(u,B,x)}}function w(u,
B,x,A){B={globalScope:B.globalScope,localScope:{}};for(var E=0;E<u.params.length;E++)B.localScope[u.params[E].name.toLowerCase()]={type:"any"};v(u.body,B,x,A,!1)}function v(u,B,x,A,E){void 0===E&&(E=!0);if(null===u)throw Error("Unnexpexted Expression Syntax");var J=null;try{switch(u.type){case "VariableDeclarator":"Identifier"!==u.id.type?A.push(r(u,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(u.id.name.toLowerCase(),null===B.localScope?B.globalScope[u.id.name.toLowerCase()]={type:"any"}:B.localScope[u.id.name.toLowerCase()]=
{type:"any"});null!==u.init&&v(u.init,B,x,A,E);break;case "FunctionDeclaration":!1===E&&A.push(r(u,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==u.id.type&&A.push(r(u,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));J=c("",u);w(u,B,x,A);null!==B.localScope&&A.push(r(u,"SYNTAX","GLOBALFUNCTIONSONLY"));J.isnative=!1;"Identifier"===u.id.type&&(B.globalScope[u.id.name.toLowerCase()]={type:"FormulaFunction",signature:[J]});break;case "VariableDeclaration":for(var O=0;O<u.declarations.length;O++)v(u.declarations[O],
B,x,A,E);break;case "IfStatement":null!==u.test&&(v(u.test,B,x,A,E),"AssignmentExpression"!==u.test.type&&"UpdateExpression"!==u.test.type||A.push(r(u.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==u.consequent&&v(u.consequent,B,x,A,E);null!==u.alternate&&v(u.alternate,B,x,A,E);break;case "EmptyStatement":break;case "BlockStatement":if(null!==u.body)for(O=0;O<u.body.length;O++)v(u.body[O],B,x,A,E);break;case "ReturnStatement":null!==u.argument&&v(u.argument,B,x,A,E);break;case "ForInStatement":"VariableDeclaration"===
u.left.type?(1<u.left.declarations.length&&A.push(r(u,"SYNTAX","ONLY1VAR")),null!==u.left.declarations[0].init&&A.push(r(u,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==u.left.type&&A.push(r(u,"SYNTAX","LEFTNOTVAR"));v(u.left,B,x,A,E);v(u.right,B,x,A,E);v(u.body,B,x,A,E);break;case "ForStatement":null!==u.init&&v(u.init,B,x,A,E);null!==u.test&&v(u.test,B,x,A,E);null!==u.body&&v(u.body,B,x,A,E);null!==u.update&&v(u.update,B,x,A,E);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==
u.argument.type&&"MemberExpression"!==u.argument.type)A.push(r(u,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===u.argument.type){var S=!1;!1===x&&(null!==B.localScope&&void 0!==B.localScope[u.argument.name.toLowerCase()]&&(S=!0),void 0!==B.globalScope[u.argument.name.toLowerCase()]&&(S=!0),!1===S&&A.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,reason:"Identifier "+u.argument.name+" has not been declared."}))}"MemberExpression"===u.argument.type&&v(u.argument,
B,x,A,E)}break;case "AssignmentExpression":"Identifier"!==u.left.type&&"MemberExpression"!==u.left.type&&A.push(r(u,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(u.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:A.push(r(u,"SYNTAX","OPERATORNOTRECOGNISED"))}v(u.right,B,x,A,E);S=!1;"Identifier"===u.left.type&&(null!==B.localScope&&void 0!==B.localScope[u.left.name.toLowerCase()]&&(S=!0),void 0!==B.globalScope[u.left.name.toLowerCase()]&&(S=!0),!1===x&&
!1===S&&A.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,reason:"Identifier "+u.left.name+" has not been declared."}));"MemberExpression"===u.left.type&&v(u.left,B,x,A,E);break;case "ExpressionStatement":v(u.expression,B,x,A,E);break;case "Identifier":var X=u.name.toLowerCase();if(null!==B.localScope&&void 0!==B.localScope[X]||void 0!==B.globalScope[X])break;!1===x&&A.push(r(u,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":v(u.object,B,x,A,E);!0===u.computed&&
v(u.property,B,x,A,E);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==u.callee.type&&A.push(r(u,"SYNTAX","ONLYNODESSUPPORTED"));for(O=0;O<u.arguments.length;O++)v(u.arguments[O],B,x,A,E);if("Identifier"===u.callee.type){var Y=m(u.callee.name,u.arguments,B);!1===x&&-1===Y&&A.push(r(u,"SYNTAX","NOTFOUND"));-2===Y&&A.push(r(u,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":v(u.argument,B,x,A,E);break;case "BinaryExpression":v(u.left,B,x,A,E);v(u.right,
B,x,A,E);switch(u.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:A.push(r(u,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(u.operator){case "\x26\x26":case "||":break;default:A.push(r(u,"SYNTAX","OPERATORNOTRECOGNISED"))}v(u.left,B,x,A,E);"AssignmentExpression"!==u.left.type&&"UpdateExpression"!==
u.left.type||A.push(r(u,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));v(u.right,B,x,A,E);"AssignmentExpression"!==u.right.type&&"UpdateExpression"!==u.right.type||A.push(r(u,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(O=0;O<u.elements.length;O++)v(u.elements[O],B,x,A,E);break;case "TemplateLiteral":for(O=0;O<u.quasis.length;O++)v(u.quasis[O],B,x,A,E);for(O=0;O<u.expressions.length;O++)v(u.expressions[O],B,x,A,E);break;case "ObjectExpression":for(O=0;O<u.properties.length;O++)v(u.properties[O],
B,x,A,E);break;case "Property":"Literal"!==u.key.type&&"Identifier"!==u.key.type&&A.push(r(u,"SYNTAX","ONLYLITERAL"));"Literal"===u.key.type&&v(u.key,B,x,A,E);v(u.value,B,x,A,E);break;default:A.push(r(u,"SYNTAX","UNRECOGNISED"))}}catch(K){A.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,reason:"Unnexpected Syntax"})}}function z(u){var B=[];e(u,function(x){"CallExpression"===x.type&&"Identifier"===x.callee.type&&B.push(x.callee.name.toLowerCase());return!0});return B}
Object.defineProperty(l,"__esModule",{value:!0});l.scriptUsesFeatureSet=l.findScriptDependencies=l.findFunctionCalls=l.checkScript=l.extractAllIssues=l.extractAllIssuesInFunction=l.makeError=l.nodeErrorMessage=l.validateLanguage=l.validateScript=l.constructGlobalScope=l.validateFunction=l.extractFunctionDeclaration=l.findExpectedFieldLiterals=l.findFieldLiterals=l.referencesFunction=l.referencesMember=l.testValidityOfExpression=l.validateLanguageNode=l.walk=l.findFunction=l.checkFunctionSignature=
l.addFunctionDeclaration=l.functionDecls=void 0;l.functionDecls={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",
max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},
bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",
max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},
count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",
max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",
max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},
distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",
max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var C in l.functionDecls)l.functionDecls[C].fmin=l.functionDecls[C].min,l.functionDecls[C].fmax=l.functionDecls[C].max;var D="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),y="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
l.addFunctionDeclaration=function(u,B){var x=l.functionDecls[u.name.toLowerCase()];void 0===x?"sync"===B?l.functionDecls[u.name.toLowerCase()]={min:u.min,max:u.max}:l.functionDecls[u.name.toLowerCase()]={fmin:u.min,fmax:u.max}:"sync"===B?(x.min=u.min,x.max=u.max):(x.fmin=u.min,x.fmax=u.max)};l.checkFunctionSignature=p;l.findFunction=m;l.walk=e;l.validateLanguageNode=k;l.testValidityOfExpression=h;l.referencesMember=f;l.referencesFunction=function(u,B){var x=!1,A=B.toLowerCase();e(u,function(E){return x?
!1:"CallExpression"===E.type&&"Identifier"===E.callee.type&&E.callee.name&&E.callee.name.toLowerCase()===A?(x=!0,!1):!0});return x};l.findFieldLiterals=function(u){var B=[];e(u,function(x){if("MemberExpression"!==x.type||"Identifier"!==x.object.type)return!0;!1===x.computed&&x.object&&x.object.name&&x.property&&"Identifier"===x.property.type&&x.property.name?B.push(x.object.name.toLowerCase()+"."+x.property.name.toLowerCase()):x.object&&x.object.name&&x.property&&"Literal"===x.property.type&&"string"===
typeof x.property.value&&B.push(x.object.name.toLowerCase()+"."+x.property.value.toString().toLowerCase());return!1});return B};l.findExpectedFieldLiterals=function(u){var B=[];e(u,function(x){if("CallExpression"===x.type){if("Identifier"===x.callee.type&&"expects"===x.callee.name.toLowerCase()){for(var A="",E=0;E<(x.arguments||[]).length;E++)0===E?"Identifier"===x.arguments[E].type&&(A=x.arguments[E].name.toLowerCase()):A&&"Literal"===x.arguments[E].type&&n(x.arguments[E].value)&&B.push(A+"."+x.arguments[E].value.toLowerCase());
return!1}if("Identifier"===x.callee.type&&["domainname","domaincode","domain","haskey"].includes(x.callee.name.toLowerCase())&&2<=x.arguments.length)return A="","Identifier"===x.arguments[0].type&&(A=x.arguments[0].name.toLowerCase()),A&&"Literal"===x.arguments[1].type&&n(x.arguments[1].value)&&B.push(A+"."+x.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==x.type||"Identifier"!==x.object.type)return!0;!1===x.computed&&x.object&&x.object.name&&x.property&&"Identifier"===x.property.type&&
x.property.name?B.push(x.object.name.toLowerCase()+"."+x.property.name.toLowerCase()):x.object&&x.object.name&&x.property&&"Literal"===x.property.type&&"string"===typeof x.property.value&&B.push(x.object.name.toLowerCase()+"."+x.property.value.toString().toLowerCase());return!1});return B};l.extractFunctionDeclaration=c;l.validateFunction=d;l.constructGlobalScope=g;l.validateScript=function(u,B,x,A){void 0===x&&(x="async");void 0===A&&(A=l.functionDecls);B={globalScope:g(B.vars,A,B.customFunctions,
x),localScope:null};return h(u.body[0].body,B)};l.validateLanguage=function(u){return"BlockStatement"!==u.body[0].body.type?"Invalid formula content.":k(u.body[0].body)};l.nodeErrorMessage=t;l.makeError=r;l.extractAllIssuesInFunction=w;l.extractAllIssues=v;l.checkScript=function(u,B,x,A,E){void 0===A&&(A="async");void 0===E&&(E=l.functionDecls);var J=[];if("BlockStatement"!==u.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===B||void 0===B)B={vars:{},customFunctions:[]};
B={globalScope:g(B.vars,E,B.customFunctions,A),localScope:null};try{v(u.body[0].body,B,x,J)}catch(O){}return J};l.findFunctionCalls=z;l.findScriptDependencies=function(u,B){void 0===B&&(B=[]);var x=null;if(void 0===u.usesFeatureSet){null===x&&(x=z(u));u.usesFeatureSet=!1;for(var A=0;A<x.length;A++)D.includes(x[A])&&(u.usesFeatureSet=!0,u.isAsync=!0);if(!1===u.usesFeatureSet&&B&&0<B.length){A=0;for(var E=B;A<E.length;A++)if(f(u,E[A])){u.usesFeatureSet=!0;u.isAsync=!0;break}}}if(void 0===u.usesGeometry)for(u.usesGeometry=
!1,null===x&&(x=z(u)),A=0;A<x.length;A++)y.includes(x[A])&&(u.usesGeometry=!0)};l.scriptUsesFeatureSet=function(u){u=z(u);for(var B=0;B<u.length;B++)if(D.includes(u[B]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../FunctionWrapper ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),function(F,l,b,q,n,p,m,a,e,k){Object.defineProperty(l,
"__esModule",{value:!0});l.registerFunctions=void 0;l.registerFunctions=function(h){function f(d,g){if(g instanceof m)return h.arcadeCustomFunctionHandler(g);if(g instanceof e.NativeFunction)return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g.fn(d,{preparsed:!0,arguments:t})};if(g instanceof e.SizzleFunction)return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==g.paramCount)throw Error("Invalid parameters");return g.fn.apply(g,t)};
throw Error("Invalid Parameter");}function c(d){if(d instanceof a)return d.toArray();if(e.isArray(d))return d;throw Error("Invalid Parameter");}h.functions.array=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,1,2);t=e.toNumber(w[0]);if(isNaN(t)||!1===e.isInteger(t))throw Error("Invalid Parameter");w=e.defaultUndefined(w[1],null);t=Array(t);t.fill(w);return t})};h.functions.front=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,1,1);if(e.isImmutableArray(w[0])){if(0>=
w[0].length())throw Error("Array is empty");return w[0].get(0)}if(e.isArray(w[0])){if(0>=w[0].length)throw Error("Array is empty");return w[0][0]}throw Error("Invalid Parameter");})};h.functions.back=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,1,1);if(e.isImmutableArray(w[0])){if(0>=w[0].length())throw Error("Array is empty");return w[0].get(w[0].length()-1)}if(e.isArray(w[0])){if(0>=w[0].length)throw Error("Array is empty");return w[0][w[0].length-1]}throw Error("Invalid Parameter");
})};h.functions.push=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,1,2);if(e.isArray(w[0]))return w[0][w[0].length]=w[1],w[0].length;throw Error("Invalid Parameter");})};h.functions.pop=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,1,1);if(e.isArray(w[0])){if(0>=w[0].length)throw Error("Array is empty");t=w[0][w[0].length-1];--w[0].length;return t}throw Error("Invalid Parameter");})};h.functions.erase=function(d,g){return h.standardFunction(d,g,
function(t,r,w){e.pcCheck(w,2,2);if(e.isArray(w[0])){t=e.toNumber(w[1]);if(isNaN(t)||!1===e.isInteger(t))throw Error("Invalid Parameter");w=w[0];if(0>=w.length)throw Error("Array is empty");0>t&&(t=w.length+t);if(0>t)throw Error("Element not found");if(t>=w.length)throw Error("Index is greater than array");w.splice(t,1);return e.voidOperation}throw Error("Invalid Parameter");})};h.functions.insert=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,3,3);if(e.isArray(w[0])){t=e.toNumber(w[1]);
if(isNaN(t)||!1===e.isInteger(t))throw Error("Invalid Parameter");r=w[2];w=w[0];if(t>w.length)throw Error("Index is greater than array");if(0>t&&t<-1*w.length)throw Error("Index is greater than array");if(t===w.length)return w[t]=r,e.voidOperation;w.splice(t,0,r);return e.voidOperation}throw Error("Invalid Parameter");})};h.functions.resize=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,2,3);if(e.isArray(w[0])){r=e.toNumber(w[1]);if(isNaN(r)||!1===e.isInteger(r))throw Error("Invalid Parameter");
if(0>r)throw Error("Size cannot be negative");t=e.defaultUndefined(w[2],null);w=w[0];if(w.length>=r)return w.length=r,e.voidOperation;var v=w.length;w.length=r;for(r=v;r<w.length;r++)w[r]=t;return e.voidOperation}throw Error("Invalid Parameter");})};h.functions.includes=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,2,2);if(e.isArray(w[0])){var v=w[1];t=w[0];return-1<t.findIndex(function(C){return e.equalityTest(C,v)})?!0:!1}if(e.isImmutableArray(w[0])){var z=w[1];t=w[0].toArray();
return-1<t.findIndex(function(C){return e.equalityTest(C,z)})?!0:!1}throw Error("Invalid Parameter");})};h.functions.slice=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,1,3);if(e.isArray(w[0])){t=e.toNumber(e.defaultUndefined(w[1],0));r=e.toNumber(e.defaultUndefined(w[2],w[0].length));if(isNaN(t)||!1===e.isInteger(t))throw Error("Invalid Parameter");if(isNaN(r)||!1===e.isInteger(r))throw Error("Invalid Parameter");var v=w[0];return v.slice(t,r)}if(e.isImmutableArray(w[0])){v=
w[0];t=e.toNumber(e.defaultUndefined(w[1],0));r=e.toNumber(e.defaultUndefined(w[2],v.length()));if(isNaN(t)||!1===e.isInteger(t))throw Error("Invalid Parameter");if(isNaN(r)||!1===e.isInteger(r))throw Error("Invalid Parameter");return v.toArray().slice(t,r)}throw Error("Invalid Parameter");})};h.functions.splice=function(d,g){return h.standardFunction(d,g,function(t,r,w){t=[];for(r=0;r<w.length;r++)e.isArray(w[r])?t.push.apply(t,w[r]):e.isImmutableArray(w[r])?t.push.apply(t,w[r].toArray()):t.push(w[r]);
return t})};"sync"===h.mode&&(h.functions.any=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,2,2);t=f(d,w[1]);r=0;for(w=c(w[0]);r<w.length;r++){var v=t(w[r]);if(e.isBoolean(v)&&!0===v)return!0}return!1})},h.functions.all=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,2,2);t=f(d,w[1]);r=0;for(w=c(w[0]);r<w.length;r++)if(!0!==t(w[r]))return!1;return!0})},h.functions.none=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,2,2);t=
f(d,w[1]);r=0;for(w=c(w[0]);r<w.length;r++)if(!0===t(w[r]))return!1;return!0})},h.functions.reduce=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,2,3);var v=f(d,w[1]);t=c(w[0]);return 2===w.length?0===t.length?null:t.reduce(function(z,C){var D=v(z,C);return z=void 0!==D&&D!==e.voidOperation?D:null}):t.reduce(function(z,C){var D=v(z,C);return z=void 0!==D&&D!==e.voidOperation?D:null},w[2])})},h.functions.map=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,
2,2);t=f(d,w[1]);r=[];var v=0;for(w=c(w[0]);v<w.length;v++){var z=t(w[v]);void 0!==z&&z!==e.voidOperation?r.push(z):r.push(null)}return r})},h.functions.filter=function(d,g){return h.standardFunction(d,g,function(t,r,w){e.pcCheck(w,2,2);t=f(d,w[1]);r=[];var v=0;for(w=c(w[0]);v<w.length;v++){var z=w[v];!0===t(z)&&r.push(z)}return r})});"async"===h.mode&&(h.functions.any=function(d,g){return h.standardFunctionAsync(d,g,function(t,r,w){return b(this,void 0,void 0,function(){var v,z,C,D,y,u,B;return q(this,
function(x){switch(x.label){case 0:e.pcCheck(w,2,2),v=f(d,w[1]),z=c(w[0]),C=0,D=z,x.label=1;case 1:if(!(C<D.length))return[3,7];y=D[C];return[4,v(y)];case 2:return u=x.sent(),B=null,k.isPromiseLike(B)?[4,u]:[3,4];case 3:return B=x.sent(),[3,5];case 4:B=u,x.label=5;case 5:if(e.isBoolean(B)&&!0===B)return[2,!0];x.label=6;case 6:return C++,[3,1];case 7:return[2,!1]}})})})},h.functions.all=function(d,g){return h.standardFunctionAsync(d,g,function(t,r,w){return b(this,void 0,void 0,function(){var v,z,
C,D,y,u,B;return q(this,function(x){switch(x.label){case 0:e.pcCheck(w,2,2),v=f(d,w[1]),z=c(w[0]),C=0,D=z,x.label=1;case 1:if(!(C<D.length))return[3,7];y=D[C];return[4,v(y)];case 2:return u=x.sent(),B=null,k.isPromiseLike(B)?[4,u]:[3,4];case 3:return B=x.sent(),[3,5];case 4:B=u,x.label=5;case 5:if(!0!==B)return[2,!1];x.label=6;case 6:return C++,[3,1];case 7:return[2,!0]}})})})},h.functions.none=function(d,g){return h.standardFunctionAsync(d,g,function(t,r,w){return b(this,void 0,void 0,function(){var v,
z,C,D,y,u,B;return q(this,function(x){switch(x.label){case 0:e.pcCheck(w,2,2),v=f(d,w[1]),z=c(w[0]),C=0,D=z,x.label=1;case 1:if(!(C<D.length))return[3,7];y=D[C];return[4,v(y)];case 2:return u=x.sent(),B=null,k.isPromiseLike(B)?[4,u]:[3,4];case 3:return B=x.sent(),[3,5];case 4:B=u,x.label=5;case 5:if(!0===B)return[2,!1];x.label=6;case 6:return C++,[3,1];case 7:return[2,!0]}})})})},h.functions.filter=function(d,g){return h.standardFunctionAsync(d,g,function(t,r,w){return b(this,void 0,void 0,function(){var v,
z,C,D,y,u,B,x;return q(this,function(A){switch(A.label){case 0:e.pcCheck(w,2,2),v=f(d,w[1]),z=c(w[0]),C=[],D=0,y=z,A.label=1;case 1:if(!(D<y.length))return[3,7];u=y[D];return[4,v(u)];case 2:return B=A.sent(),x=null,k.isPromiseLike(x)?[4,B]:[3,4];case 3:return x=A.sent(),[3,5];case 4:x=B,A.label=5;case 5:!0===x&&C.push(u),A.label=6;case 6:return D++,[3,1];case 7:return[2,C]}})})})},h.functions.reduce=function(d,g){return h.standardFunctionAsync(d,g,function(t,r,w){var v=this;e.pcCheck(w,2,3);var z=
f(d,w[1]);t=c(w[0]);r=null;if(2<w.length)w=e.defaultUndefined(w[2],null),r=t.reduce(function(C,D){return b(v,void 0,void 0,function(){var y;return q(this,function(u){switch(u.label){case 0:return[4,C];case 1:y=u.sent();if(void 0===y||y===e.voidOperation)y=null;return[2,z(y,D)]}})})},Promise.resolve(w));else{if(0===t.length)return null;r=t.reduce(function(C,D,y){return b(v,void 0,void 0,function(){var u;return q(this,function(B){switch(B.label){case 0:return 1>=y?[2,z(C,D)]:[4,C];case 1:u=B.sent();
if(void 0===u||u===e.voidOperation)u=null;return[2,z(u,D)]}})})})}return r.then(function(C){return void 0!==C&&C!==e.voidOperation?C:null})})},h.functions.map=function(d,g){return h.standardFunctionAsync(d,g,function(t,r,w){return b(this,void 0,void 0,function(){var v,z,C,D,y,u,B,x;return q(this,function(A){switch(A.label){case 0:e.pcCheck(w,2,2),v=f(d,w[1]),z=c(w[0]),C=[],D=0,y=z,A.label=1;case 1:if(!(D<y.length))return[3,7];u=y[D];return[4,v(u)];case 2:return B=A.sent(),x=null,k.isPromiseLike(x)?
[4,B]:[3,4];case 3:return x=A.sent(),[3,5];case 4:x=B,A.label=5;case 5:void 0!==x&&x!==e.voidOperation?C.push(x):C.push(null),A.label=6;case 6:return D++,[3,1];case 7:return[2,C]}})})})})}})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(F,l,b,q){function n(e,k){var h=new b(k);e(function(f){return a(f).then(h.resolve)},h.reject);return h.promise}function p(e){if(e){if("function"!==typeof e.forEach){var k=Object.keys(e),h=k.map(function(c){return e[c]});
return p(h).then(function(c){var d={};k.forEach(function(g,t){return d[g]=c[t]});return d})}var f=null;return n(function(c,d){var g=[],t=e.length;0===t&&c(g);e.forEach(function(r){var w={promise:r};g.push(w);r.then(function(v){w.value=v})["catch"](function(v){w.error=v}).then(function(){--t;0===t&&(f?d(Error("AbortError")):c(g))})})},function(c){f=c||"Invocation cancellation";e.forEach(function(d){return d.cancel(c)})})}}function m(e){void 0===e&&(e=void 0);var k=new b;k.resolve(e);return k.promise}
function a(e){return e&&"function"===typeof e.then?e:m(e)}Object.defineProperty(l,"__esModule",{value:!0});l.createResolver=l.when=l.isPromiseLike=l.wrapCallback=l.timeout=l.after=l.resolve=l.reject=l.first=l.eachAlwaysValues=l.eachAlways=l.createDeferred=l.create=l.filter=l.all=void 0;l.all=function(e){return q(e)};l.filter=function(e,k){var h=e.slice();return q(e.map(function(f,c){return k(f,c)})).then(function(f){return h.filter(function(c,d){return f[d]})})};l.create=n;l.createDeferred=function(e){var k=
null;e=n(function(h,f){k={resolve:h,reject:f}},e);k.promise=e;k.cancel=function(){k.reject(Error("AbortError"))};return k};l.eachAlways=p;l.eachAlwaysValues=function(e){return p(e).then(function(k){return k.filter(function(h){return!!h.value}).map(function(h){return h.value})})};l.first=function(e){return e&&e.length?n(function(k,h){for(var f=0;f<e.length;f++)e[f].then(k,h)}):m()};l.reject=function(e){var k=new b;k.reject(e);return k.promise};l.resolve=m;l.after=function(e,k){void 0===k&&(k=void 0);
var h=0;return n(function(f){h=setTimeout(function(){f(k)},e)},function(){h&&(clearTimeout(h),h=0)})};l.timeout=function(e,k,h){var f=0,c=new b(e.cancel);e.then(function(d){c.isFulfilled()||(c.resolve(d),f&&(clearTimeout(f),f=0))});e["catch"](function(d){c.isFulfilled()||(c.reject(d),f&&(clearTimeout(f),f=0))});f=setTimeout(function(){c.reject(h||Error("promiseUtils:timeout"))},k);return c.promise};l.wrapCallback=function(e){var k=!1;return n(function(){e(function(h){k||m(h)})},function(){return k=
!0})};l.isPromiseLike=function(e){return e&&"function"===typeof e.then};l.when=a;l.createResolver=function(e){var k,h;e=n(function(c,d){k=c;h=d},e);var f=function(c){k(c)};f.resolve=function(c){return k(c)};f.reject=function(c){return h(c)};f.promise=e;return f}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(F,l,b,q){var n=F.some;return function(p){var m,a;l.isArray(p)?a=p:p&&"object"===typeof p&&(m=p);var e=[];if(m){a=[];for(var k in m)Object.hasOwnProperty.call(m,
k)&&(e.push(k),a.push(m[k]));var h={}}else a&&(h=[]);if(!a||!a.length)return(new b).resolve(h);var f=new b;f.promise.always(function(){h=e=null});var c=a.length;n(a,function(d,g){m||e.push(g);q(d,function(t){f.isFulfilled()||(h[e[g]]=t,0===--c&&f.resolve(h))},f.reject);return f.isFulfilled()});return f.promise}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(F,l,b,q,n){function p(h){h=new Date(h.getTime());
var f=h.getFullYear(),c=new Date(0);c.setFullYear(f+1,0,4);c.setHours(0,0,0,0);c=m(c);var d=new Date(0);d.setFullYear(f,0,4);d.setHours(0,0,0,0);d=m(d);return h.getTime()>=c.getTime()?f+1:h.getTime()>=d.getTime()?f:f-1}function m(h){h=new Date(h.getTime());var f=h.getDay();f=(1>f?7:0)+f-1;h.setDate(h.getDate()-f);h.setHours(0,0,0,0);return h}function a(h){return null===h?h:isNaN(h.getTime())?null:h}Object.defineProperty(l,"__esModule",{value:!0});l.registerFunctions=void 0;var e=[0,31,59,90,120,151,
181,212,243,273,304,334],k=[0,31,60,91,121,152,182,213,244,274,305,335];l.registerFunctions=function(h,f){h.today=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,0,0);g=new Date;g.setHours(0,0,0,0);return g})};h.now=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,0,0);return new Date})};h.timestamp=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,0,0);g=new Date;return g=new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),
g.getUTCMilliseconds())})};h.toutc=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?null:new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds())})};h.tolocal=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?null:q.DateTime.utc(g.getFullYear(),g.getMonth()+1,g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds()).toJSDate()})};
h.day=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getDate()})};h.month=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getMonth()})};h.year=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getFullYear()})};h.hour=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getHours()})};h.second=function(c,
d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getSeconds()})};h.millisecond=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getMilliseconds()})};h.minute=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getMinutes()})};h.week=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,2);g=b.toDate(r[0]);if(null===g)return NaN;r=b.toNumber(b.defaultUndefined(r[1],
0));if(0>r||6<r)throw Error("Invalid Parameter");t=g.getDate();var w=g.getMonth(),v=g.getFullYear();g=g.getDay();t=t+(0!==v%4||0===v%100&&0!==v%400?e:k)[w]-1;w=Math.floor(t/7);return g-r+(0>g-r?7:0)<t-7*w?w+1:w})};h.weekday=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getDay()})};h.isoweekday=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);if(null===g)return NaN;g=g.getDay();0===g&&(g=7);return g})};h.isomonth=function(c,
d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:g.getMonth()+1})};h.isoweek=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);t=b.toDate(r[0]);if(null===t)return NaN;g=m(t).getTime();t=p(t);r=new Date(0);r.setFullYear(t,0,4);r.setHours(0,0,0,0);t=m(r);g-=t.getTime();return Math.round(g/6048E5)+1})};h.isoyear=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,1,1);g=b.toDate(r[0]);return null===g?NaN:p(g)})};h.date=function(c,d){return f(c,d,function(g,
t,r){b.pcCheck(r,0,7);if(3===r.length)return a(new Date(b.toNumber(r[0]),b.toNumber(r[1]),b.toNumber(r[2]),0,0,0,0));if(4===r.length)return a(new Date(b.toNumber(r[0]),b.toNumber(r[1]),b.toNumber(r[2]),b.toNumber(r[3]),0,0,0));if(5===r.length)return a(new Date(b.toNumber(r[0]),b.toNumber(r[1]),b.toNumber(r[2]),b.toNumber(r[3]),b.toNumber(r[4]),0,0));if(6===r.length)return a(new Date(b.toNumber(r[0]),b.toNumber(r[1]),b.toNumber(r[2]),b.toNumber(r[3]),b.toNumber(r[4]),b.toNumber(r[5]),0));if(7===r.length)return a(new Date(b.toNumber(r[0]),
b.toNumber(r[1]),b.toNumber(r[2]),b.toNumber(r[3]),b.toNumber(r[4]),b.toNumber(r[5]),b.toNumber(r[6])));if(2===r.length){g=b.toString(r[1]);if(""===g)return null;g=b.standardiseDateFormat(g);t=void 0;t="X"===g?q.DateTime.fromSeconds(b.toNumber(r[0])):"x"===g?q.DateTime.fromMillis(b.toNumber(r[0])):q.DateTime.fromFormat(b.toString(r[0]),g,{locale:n.locale,numberingSystem:"latn"});return t.isValid?t.toJSDate():null}if(1===r.length){if(b.isString(r[0])){if(""===r[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(r[0]))return b.toDate(r[0]+"-01-01")}g=b.toNumber(r[0]);return!1===isNaN(g)?a(new Date(g)):b.toDate(r[0])}if(0===r.length)return new Date})};h.datediff=function(c,d){return f(c,d,function(g,t,r){b.pcCheck(r,2,3);g=b.toDateTime(r[0]);t=b.toDateTime(r[1]);if(null===g||null===t)return NaN;switch(b.toString(r[2]).toLowerCase()){case "days":case "day":case "d":return g.diff(t,"days").days;case "months":case "month":return g.diff(t,"months").months;
case "minutes":case "minute":case "m":return"M"===r[2]?g.diff(t,"months").months:g.diff(t,"minutes").minutes;case "seconds":case "second":case "s":return g.diff(t,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return g.diff(t).milliseconds;case "hours":case "hour":case "h":return g.diff(t,"hours").hours;case "years":case "year":case "y":return g.diff(t,"years").years;default:return g.diff(t).milliseconds}})};h.dateadd=function(c,d){return f(c,d,function(g,t,r){var w;b.pcCheck(r,
2,3);g=b.toDateTime(r[0]);if(null===g)return null;t=b.toNumber(r[1]);if(isNaN(t))return g.toJSDate();var v="milliseconds";switch(b.toString(r[2]).toLowerCase()){case "days":case "day":case "d":v="days";t=b.absRound(t);break;case "months":case "month":v="months";t=b.absRound(t);break;case "minutes":case "minute":case "m":v="M"===r[2]?"months":"minutes";break;case "seconds":case "second":case "s":v="seconds";break;case "milliseconds":case "millisecond":case "ms":v="milliseconds";break;case "hours":case "hour":case "h":v=
"hours";break;case "years":case "year":case "y":v="years"}return g.plus((w={},w[v]=t,w)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(F,
l,b,q,n,p,m,a,e,k,h,f,c,d,g,t){function r(w){return w&&"esri.arcade.Feature"===w.arcadeDeclaredClass}Object.defineProperty(l,"__esModule",{value:!0});l.registerFunctions=void 0;l.registerFunctions=function(w,v){w.ringisclockwise=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,1,1);D=[];if(null===u[0])return!1;if(a.isArray(u[0])){var B=0;for(u=u[0];B<u.length;B++)if(y=u[B],y instanceof f)D.push([y.x,y.y]);else throw Error("Invalid Argument");}else if(u[0]instanceof m)D=u[0]._elements;else if(a.isImmutableArray(u[0])){B=
0;for(var x=u[0].toArray();B<x.length;B++)if(y=x[B],y instanceof f)D.push([y.x,y.y]);else throw Error("Invalid Argument");0<D.length&&(u[0].get(0),u[0].get(0))}else throw Error("Invalid Argument");return 3>D.length?!1:(new c({rings:[],spatialReference:{wkid:4326}})).isClockwise(D)})};w.polygon=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,1,1);D=null;if(u[0]instanceof n){if(D=a.fixSpatialReference(p.parseGeometryFromDictionary(u[0]),z.spatialReference),!1===D instanceof c)throw Error("Illegal Parameter");
}else D=u[0]instanceof c?t.fromJson(u[0].toJson()):a.fixSpatialReference(new c(JSON.parse(u[0])),z.spatialReference);if(null!==D&&!1===D.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(D)})};w.polyline=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,1,1);D=null;if(u[0]instanceof n){if(D=a.fixSpatialReference(p.parseGeometryFromDictionary(u[0]),z.spatialReference),
!1===D instanceof d)throw Error("Illegal Parameter");}else D=u[0]instanceof d?t.fromJson(u[0].toJson()):a.fixSpatialReference(new d(JSON.parse(u[0])),z.spatialReference);if(null!==D&&!1===D.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(D)})};w.point=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,1,1);D=null;if(u[0]instanceof n){if(D=a.fixSpatialReference(p.parseGeometryFromDictionary(u[0]),
z.spatialReference),!1===D instanceof f)throw Error("Illegal Parameter");}else D=u[0]instanceof f?t.fromJson(u[0].toJson()):a.fixSpatialReference(new f(JSON.parse(u[0])),z.spatialReference);if(null!==D&&!1===D.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(D)})};w.multipoint=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,1,1);D=null;if(u[0]instanceof n){if(D=
a.fixSpatialReference(p.parseGeometryFromDictionary(u[0]),z.spatialReference),!1===D instanceof h)throw Error("Illegal Parameter");}else D=u[0]instanceof h?t.fromJson(u[0].toJson()):a.fixSpatialReference(new h(JSON.parse(u[0])),z.spatialReference);if(null!==D&&!1===D.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(D)})};w.extent=function(z,C){return v(z,C,function(D,
y,u){u=a.autoCastFeatureToGeometry(u);a.pcCheck(u,1,1);D=null;u[0]instanceof n?D=a.fixSpatialReference(p.parseGeometryFromDictionary(u[0]),z.spatialReference):u[0]instanceof f?(D={xmin:u[0].x,ymin:u[0].y,xmax:u[0].x,ymax:u[0].y,spatialReference:u[0].spatialReference.toJson()},u=u[0],u.hasZ?(D.zmin=u.z,D.zmax=u.z):u.hasM&&(D.mmin=u.m,D.mmax=u.m),D=t.fromJson(D)):D=u[0]instanceof c?t.fromJson(u[0].getExtent().toJson()):u[0]instanceof d?t.fromJson(u[0].getExtent().toJson()):u[0]instanceof h?t.fromJson(u[0].getExtent().toJson()):
u[0]instanceof e?t.fromJson(u[0].toJson()):a.fixSpatialReference(new e(JSON.parse(u[0])),z.spatialReference);if(null!==D&&!1===D.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(D)})};w.geometry=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,1,1);D=null;if(null===u[0])return null;D=r(u[0])?a.fixSpatialReference(u[0].geometry(),z.spatialReference):u[0]instanceof
n?a.fixSpatialReference(p.parseGeometryFromDictionary(u[0]),z.spatialReference):a.fixSpatialReference(t.fromJson(JSON.parse(u[0])),z.spatialReference);if(null!==D&&!1===D.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(D)})};w.setgeometry=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,2,2);if(r(u[0])){if(!0===u[0].immutable)throw Error("Feature is Immutable");
if(u[1]instanceof k||null===u[1])u[0]._geometry=u[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return a.voidOperation})};w.feature=function(z,C){return v(z,C,function(D,y,u){if(0===u.length)throw Error("Missing Parameters");D=null;if(1===u.length)if(a.isString(u[0]))D=p.fromJson(JSON.parse(u[0]));else if(r(u[0]))D=p.createFromArcadeFeature(u[0]);else if(u[0]instanceof k)D=p.createFromGraphicLikeObject(u[0],null,null);else if(u[0]instanceof n)D=u[0].hasField("geometry")?
u[0].field("geometry"):null,y=u[0].hasField("attributes")?u[0].field("attributes"):null,null!==D&&D instanceof n&&(D=p.parseGeometryFromDictionary(D)),null!==y&&(y=p.parseAttributesFromDictionary(y)),D=p.createFromGraphicLikeObject(D,y,null);else throw Error("Illegal Argument");else{if(2===u.length){y=D=null;if(null!==u[0])if(u[0]instanceof k)D=u[0];else if(D instanceof n)D=p.parseGeometryFromDictionary(u[0]);else throw Error("Illegal Argument");if(null!==u[1])if(u[1]instanceof n)y=p.parseAttributesFromDictionary(u[1]);
else throw Error("Illegal Argument");}else{D=null;y={};if(null!==u[0])if(u[0]instanceof k)D=u[0];else if(D instanceof n)D=p.parseGeometryFromDictionary(u[0]);else throw Error("Illegal Argument");for(var B=1;B<u.length;B+=2){var x=a.toString(u[B]),A=u[B+1];if(null===A||void 0===A||a.isString(A)||isNaN(A)||a.isDate(A)||a.isNumber(A)||a.isBoolean(A)){if(a.isFunctionParameter(A)||!1===a.isSimpleType(A))throw Error("Illegal Argument");y[x]=A===a.voidOperation?null:A}else throw Error("Illegal Argument");
}}D=p.createFromGraphicLikeObject(D,y,null)}D._geometry=a.fixSpatialReference(D.geometry(),z.spatialReference);D.immutable=!1;return D})};w.dictionary=function(z,C){return v(z,C,function(D,y,u){if(0===u.length)return u=new n,u.immutable=!1,u;if(1===u.length&&a.isString(u[0]))try{var B=JSON.parse(u[0]),x=n.convertObjectToArcadeDictionary(B,!1);x.immutable=!1;return x}catch(A){throw Error("Missing Parameters or Illegal Json");}if(0!==u.length%2)throw Error("Missing Parameters");D={};for(y=0;y<u.length;y+=
2)if(B=a.toString(u[y]),x=u[y+1],null===x||void 0===x||a.isString(x)||isNaN(x)||a.isDate(x)||a.isNumber(x)||a.isBoolean(x)||a.isArray(x)||a.isImmutableArray(x)){if(a.isFunctionParameter(x))throw Error("Illegal Argument");D[B]=x===a.voidOperation?null:x}else throw Error("Illegal Argument");u=new n(D);u.immutable=!1;return u})};w.haskey=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,2,2);D=a.toString(u[1]);if(r(u[0])||u[0]instanceof n)return u[0].hasField(D);throw Error("Illegal Argument");
})};w.indexof=function(z,C){return v(z,C,function(D,y,u){a.pcCheck(u,2,2);D=u[1];if(a.isArray(u[0])){for(y=0;y<u[0].length;y++)if(a.equalityTest(D,u[0][y]))return y;return-1}if(a.isImmutableArray(u[0])){var B=u[0].length();for(y=0;y<B;y++)if(a.equalityTest(D,u[0].get(y)))return y;return-1}throw Error("Illegal Argument");})};w.angle=function(z,C){return v(z,C,function(D,y,u){u=a.autoCastFeatureToGeometry(u);a.pcCheck(u,2,3);if(!(u[0]instanceof f))throw Error("Illegal Argument");if(!(u[1]instanceof
f))throw Error("Illegal Argument");if(2<u.length&&!(u[2]instanceof f))throw Error("Illegal Argument");return 2===u.length?g.angle2D(u[0],u[1]):g.angleBetween2D(u[0],u[1],u[2])})};w.bearing=function(z,C){return v(z,C,function(D,y,u){u=a.autoCastFeatureToGeometry(u);a.pcCheck(u,2,3);if(!(u[0]instanceof f))throw Error("Illegal Argument");if(!(u[1]instanceof f))throw Error("Illegal Argument");if(2<u.length&&!(u[2]instanceof f))throw Error("Illegal Argument");return 2===u.length?g.bearing2D(u[0],u[1]):
g.bearingBetween2D(u[0],u[1],u[2])})};w.isselfintersecting=function(z,C){return v(z,C,function(D,y,u){u=a.autoCastFeatureToGeometry(u);a.pcCheck(u,1,1);D=u[0];if(D instanceof c)return D.isSelfIntersecting(D);if(D instanceof d)return D=D.paths,g.pathsSelfIntersecting(D);if(D instanceof h)for(y=D.points,u=0;u<y.length;u++)for(var B=0;B<y.length;B++)if(B!==u){for(var x=!0,A=0;A<y[u].length;A++)if(y[u][A]!==y[B][A]){x=!1;break}if(!0===x)return!0}return a.isArray(D)||a.isImmutableArray(D)?(D=a.autoCastArrayOfPointsToPolyline(D,
z.spatialReference),null!==D&&(D=D.paths),g.pathsSelfIntersecting(D)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(F,l,b){function q(h,f,c){var d={x:0,y:0};f&&(d.z=0);c&&(d.m=0);for(var g=0,t=h[0],r=0;r<h.length;r++){var w=h[r];a:if(w.length!==t.length)var v=!1;else{for(v=0;v<w.length;v++)if(w[v]!==t[v]){v=!1;break a}v=!0}if(!1===v){v=n(t,w,f);var z=w,C=f,D=c,y={x:(t[0]+z[0])/2,y:(t[1]+z[1])/2};C&&(y.z=(t[2]+z[2])/2);C&&D?y.m=(t[3]+
z[3])/2:D&&(y.m=(t[2]+z[2])/2);t=y;t.x*=v;t.y*=v;d.x+=t.x;d.y+=t.y;f&&(t.z*=v,d.z+=t.z);c&&(t.m*=v,d.m+=t.m);g+=v;t=w}}0<g?(d.x/=g,d.y/=g,f&&(d.z/=g),c&&(d.m/=g)):(d.x=h[0][0],d.y=h[0][1],f&&(d.z=h[0][2]),c&&f?d.m=h[0][3]:c&&(d.m=h[0][2]));return d}function n(h,f,c){var d=f[0]-h[0];h=f[1]-h[1];return c?(f=f[2]-f[2],Math.sqrt(d*d+h*h+f*f)):Math.sqrt(d*d+h*h)}function p(h,f,c){for(void 0===c&&(c=0);h<c;)h+=f;for(c+=f;h>=c;)h-=f;return h}function m(h,f){return Math.atan2(f.y-h.y,f.x-h.x)}function a(h,
f,c){var d=h.x-f.x;h=h.y-f.y;var g=c.x-f.x;f=c.y-f.y;return Math.atan2(d*f-g*h,d*g+h*f)}function e(h,f,c,d,g){var t=h[0];h=h[1];var r=f[0];f=f[1];var w=c[0],v=c[1];c=d[0]-w;w=t-w;var z=r-t;d=d[1]-v;v=h-v;var C=f-h,D=d*z-c*C;if(0===D)return!1;c=(c*v-d*w)/D;w=(z*v-C*w)/D;return 0<=c&&1>=c&&0<=w&&1>=w?(g&&(g[0]=t+c*(r-t),g[1]=h+c*(f-h)),!0):!1}Object.defineProperty(l,"__esModule",{value:!0});l.pathsSelfIntersecting=l.bearingBetween2D=l.angleBetween2D=l.angleBetweenRad=l.bearing2D=l.angle2D=l.angleRad=
l.centroidMultiPoint=l.centroidPolyline=void 0;l.centroidPolyline=function(h){for(var f={x:0,y:0,spatialReference:h.spatialReference.toJson()},c={x:0,y:0,spatialReference:h.spatialReference.toJson()},d=0,g=0,t=0;t<h.paths.length;t++)if(0!==h.paths[t].length){var r=h.paths[t];var w=!0===h.hasZ;if(1>=r.length)r=0;else{for(var v=0,z=1;z<r.length;z++)v+=n(r[z-1],r[z],w);r=v}0===r?(w=q(h.paths[t],!0===h.hasZ,!0===h.hasM),f.x+=w.x,f.y+=w.y,!0===h.hasZ&&(f.z+=w.z),!0===h.hasM&&(f.m+=w.m),++d):(w=q(h.paths[t],
!0===h.hasZ,!0===h.hasM),c.x+=w.x*r,c.y+=w.y*r,!0===h.hasZ&&(c.z+=w.z*r),!0===h.hasM&&(c.m+=w.m*r),g+=r)}return 0<g?(c.x/=g,c.y/=g,!0===h.hasZ&&(c.z/=g),!0===h.hasM&&(c.m/=g),new b(c)):0<d?(f.x/=d,f.y/=d,!0===h.hasZ&&(c.z/=d),!0===h.hasM&&(f.m/=d),new b(f)):null};l.centroidMultiPoint=function(h){if(0===h.points.length)return null;for(var f=0,c=0,d=0,g=0,t=0;t<h.points.length;t++){var r=h.getPoint(t);!0===r.hasZ&&(d+=r.z);!0===r.hasM&&(g+=r.m);f+=r.x;c+=r.y;g+=r.m}f={x:f/h.points.length,y:c/h.points.length,
spatialReference:null};f.spatialReference=h.spatialReference.toJson();!0===h.hasZ&&(f.z=d/h.points.length);!0===h.hasM&&(f.m=g/h.points.length);return new b(f)};l.angleRad=m;l.angle2D=function(h,f){return p(m(h,f),2*Math.PI)*(180/Math.PI)};l.bearing2D=function(h,f){return p(Math.PI/2-m(h,f),2*Math.PI)*(180/Math.PI)};l.angleBetweenRad=a;l.angleBetween2D=function(h,f,c){return p(a(h,f,c),2*Math.PI)*(180/Math.PI)};l.bearingBetween2D=function(h,f,c){return p(-1*a(h,f,c),2*Math.PI)*(180/Math.PI)};var k=
[0,0];l.pathsSelfIntersecting=function(h){for(var f=0;f<h.length;f++){for(var c=h[f],d=0;d<c.length-1;d++)for(var g=c[d],t=c[d+1],r=f+1;r<h.length;r++)for(var w=0;w<h[r].length-1;w++){var v=h[r][w],z=h[r][w+1],C=e(g,t,v,z,k);if(C&&!(k[0]===g[0]&&k[1]===g[1]||k[0]===v[0]&&k[1]===v[1]||k[0]===t[0]&&k[1]===t[1]||k[0]===z[0]&&k[1]===z[1]))return!0}w=c.length;if(!(3>w))for(d=0;d<=w-2;d++)for(g=c[d],t=c[d+1],r=d+2;r<=w-2;r++)if(v=c[r],z=c[r+1],(C=e(g,t,v,z,k))&&!(k[0]===g[0]&&k[1]===g[1]||k[0]===v[0]&&
k[1]===v[1]||k[0]===t[0]&&k[1]===t[1]||k[0]===z[0]&&k[1]===z[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(F,l,b,q,n,p,m,a,e,k,h,f,c){function d(t){return 0===b.version.indexOf("4.")?h.fromExtent(t):new h({spatialReference:t.spatialReference,
rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}Object.defineProperty(l,"__esModule",{value:!0});l.registerFunctions=l.setGeometryEngine=void 0;var g=null;l.setGeometryEngine=function(t){g=t};l.registerFunctions=function(t,r){function w(v){n.pcCheck(v,2,2);if(!(v[0]instanceof a&&v[1]instanceof a||v[0]instanceof a&&null===v[1]||v[1]instanceof a&&null===v[0]||null===v[0]&&null===v[1]))throw Error("Illegal Argument");}t.disjoint=function(v,z){return r(v,z,
function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null===y[0]||null===y[1]?!0:g.disjoint(y[0],y[1])})};t.intersects=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null===y[0]||null===y[1]?!1:g.intersects(y[0],y[1])})};t.touches=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null===y[0]||null===y[1]?!1:g.touches(y[0],y[1])})};t.crosses=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);
w(y);return null===y[0]||null===y[1]?!1:g.crosses(y[0],y[1])})};t.within=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null===y[0]||null===y[1]?!1:g.within(y[0],y[1])})};t.contains=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null===y[0]||null===y[1]?!1:g.contains(y[0],y[1])})};t.overlaps=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null===y[0]||null===y[1]?!1:g.overlaps(y[0],
y[1])})};t.equals=function(v,z){return r(v,z,function(C,D,y){n.pcCheck(y,2,2);return y[0]===y[1]?!0:y[0]instanceof a&&y[1]instanceof a?g.equals(y[0],y[1]):n.isDate(y[0])&&n.isDate(y[1])?y[0].getTime()===y[1].getTime():!1})};t.relate=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,3,3);if(y[0]instanceof a&&y[1]instanceof a)return g.relate(y[0],y[1],n.toString(y[2]));if(y[0]instanceof a&&null===y[1]||y[1]instanceof a&&null===y[0]||null===y[0]&&null===y[1])return!1;
throw Error("Illegal Argument");})};t.intersection=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null===y[0]||null===y[1]?null:g.intersect(y[0],y[1])})};t.union=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);C=[];if(0===y.length)throw Error("Function called with wrong number of Parameters");if(1===y.length)if(n.isArray(y[0]))for(y=n.autoCastFeatureToGeometry(y[0]),D=0;D<y.length;D++){if(null!==y[D]){if(!(y[D]instanceof a))throw Error("Illegal Argument");
C.push(y[D])}}else if(n.isImmutableArray(y[0]))for(y=n.autoCastFeatureToGeometry(y[0].toArray()),D=0;D<y.length;D++){if(null!==y[D]){if(!(y[D]instanceof a))throw Error("Illegal Argument");C.push(y[D])}}else{if(y[0]instanceof a)return n.fixSpatialReference(q.cloneGeometry(y[0]),v.spatialReference);if(null===y[0])return null;throw Error("Illegal Argument");}else for(D=0;D<y.length;D++)if(null!==y[D]){if(!(y[D]instanceof a))throw Error("Illegal Argument");C.push(y[D])}return 0===C.length?null:g.union(C)})};
t.difference=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null!==y[0]&&null===y[1]?q.cloneGeometry(y[0]):null===y[0]?null:g.difference(y[0],y[1])})};t.symmetricdifference=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);w(y);return null===y[0]&&null===y[1]?null:null===y[0]?q.cloneGeometry(y[1]):null===y[1]?q.cloneGeometry(y[0]):g.symmetricDifference(y[0],y[1])})};t.clip=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);
n.pcCheck(y,2,2);if(!(y[1]instanceof m)&&null!==y[1])throw Error("Illegal Argument");if(null===y[0])return null;if(!(y[0]instanceof a))throw Error("Illegal Argument");return null===y[1]?null:g.clip(y[0],y[1])})};t.cut=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,2);if(!(y[1]instanceof f)&&null!==y[1])throw Error("Illegal Argument");if(null===y[0])return[];if(!(y[0]instanceof a))throw Error("Illegal Argument");return null===y[1]?[q.cloneGeometry(y[0])]:
g.cut(y[0],y[1])})};t.area=function(v,z){return r(v,z,function(C,D,y){n.pcCheck(y,1,2);y=n.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(n.isArray(y[0])||n.isImmutableArray(y[0]))return C=n.autoCastArrayOfPointsToPolygon(y[0],v.spatialReference),null===C?0:g.planarArea(C,q.convertSquareUnitsToCode(n.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw Error("Illegal Argument");return g.planarArea(y[0],q.convertSquareUnitsToCode(n.defaultUndefined(y[1],-1)))})};t.areageodetic=function(v,
z){return r(v,z,function(C,D,y){n.pcCheck(y,1,2);y=n.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(n.isArray(y[0])||n.isImmutableArray(y[0]))return C=n.autoCastArrayOfPointsToPolygon(y[0],v.spatialReference),null===C?0:g.geodesicArea(C,q.convertSquareUnitsToCode(n.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw Error("Illegal Argument");return g.geodesicArea(y[0],q.convertSquareUnitsToCode(n.defaultUndefined(y[1],-1)))})};t.length=function(v,z){return r(v,z,function(C,D,y){n.pcCheck(y,
1,2);y=n.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(n.isArray(y[0])||n.isImmutableArray(y[0]))return C=n.autoCastArrayOfPointsToPolyline(y[0],v.spatialReference),null===C?0:g.planarLength(C,q.convertLinearUnitsToCode(n.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw Error("Illegal Argument");return g.planarLength(y[0],q.convertLinearUnitsToCode(n.defaultUndefined(y[1],-1)))})};t.length3d=function(v,z){return r(v,z,function(C,D,y){n.pcCheck(y,1,2);y=n.autoCastFeatureToGeometry(y);
if(null===y[0])return 0;if(n.isArray(y[0])||n.isImmutableArray(y[0]))return C=n.autoCastArrayOfPointsToPolyline(y[0],v.spatialReference),null===C?0:g.planarLength(C,q.convertLinearUnitsToCode(n.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw Error("Illegal Argument");return g.planarLength(y[0],q.convertLinearUnitsToCode(n.defaultUndefined(y[1],-1)))})};t.lengthgeodetic=function(v,z){return r(v,z,function(C,D,y){n.pcCheck(y,1,2);y=n.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(n.isArray(y[0])||
n.isImmutableArray(y[0]))return C=n.autoCastArrayOfPointsToPolyline(y[0],v.spatialReference),null===C?0:g.geodesicLength(C,q.convertLinearUnitsToCode(n.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw Error("Illegal Argument");return g.geodesicLength(y[0],q.convertLinearUnitsToCode(n.defaultUndefined(y[1],-1)))})};t.distance=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,3);C=y[0];if(n.isArray(y[0])||n.isImmutableArray(y[0]))C=n.autoCastArrayOfPointsToMultiPoint(y[0],
v.spatialReference);D=y[1];if(n.isArray(y[1])||n.isImmutableArray(y[1]))D=n.autoCastArrayOfPointsToMultiPoint(y[1],v.spatialReference);if(!(C instanceof a))throw Error("Illegal Argument");if(!(D instanceof a))throw Error("Illegal Argument");return g.distance(C,D,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1)))})};t.distancegeodetic=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,3);C=y[0];D=y[1];if(!(C instanceof k))throw Error("Illegal Argument");
if(!(D instanceof k))throw Error("Illegal Argument");var u=new f({paths:[],spatialReference:C.spatialReference});u.addPath([C,D]);return g.geodesicLength(u,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1)))})};t.densify=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,3);if(null===y[0])return null;if(!(y[0]instanceof a))throw Error("Illegal Argument");C=n.toNumber(y[1]);if(isNaN(C))throw Error("Illegal Argument");if(0>=C)throw Error("Illegal Argument");
return y[0]instanceof h||y[0]instanceof f?g.densify(y[0],C,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1))):y[0]instanceof m?g.densify(d(y[0]),C,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1))):y[0]})};t.densifygeodetic=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,3);if(null===y[0])return null;if(!(y[0]instanceof a))throw Error("Illegal Argument");C=n.toNumber(y[1]);if(isNaN(C))throw Error("Illegal Argument");if(0>=C)throw Error("Illegal Argument");
return y[0]instanceof h||y[0]instanceof f?g.geodesicDensify(y[0],C,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1))):y[0]instanceof m?g.geodesicDensify(d(y[0]),C,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1))):y[0]})};t.generalize=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,4);if(null===y[0])return null;if(!(y[0]instanceof a))throw Error("Illegal Argument");C=n.toNumber(y[1]);if(isNaN(C))throw Error("Illegal Argument");return g.generalize(y[0],
C,n.toBoolean(n.defaultUndefined(y[2],!0)),q.convertLinearUnitsToCode(n.defaultUndefined(y[3],-1)))})};t.buffer=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,3);if(null===y[0])return null;if(!(y[0]instanceof a))throw Error("Illegal Argument");C=n.toNumber(y[1]);if(isNaN(C))throw Error("Illegal Argument");return 0===C?q.cloneGeometry(y[0]):g.buffer(y[0],C,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1)))})};t.buffergeodetic=function(v,z){return r(v,
z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,3);if(null===y[0])return null;if(!(y[0]instanceof a))throw Error("Illegal Argument");C=n.toNumber(y[1]);if(isNaN(C))throw Error("Illegal Argument");return 0===C?q.cloneGeometry(y[0]):g.geodesicBuffer(y[0],C,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1)))})};t.offset=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,6);if(null===y[0])return null;if(!(y[0]instanceof h||y[0]instanceof f))throw Error("Illegal Argument");
C=n.toNumber(y[1]);if(isNaN(C))throw Error("Illegal Argument");D=n.toNumber(n.defaultUndefined(y[4],10));if(isNaN(D))throw Error("Illegal Argument");var u=n.toNumber(n.defaultUndefined(y[5],0));if(isNaN(u))throw Error("Illegal Argument");return g.offset(y[0],C,q.convertLinearUnitsToCode(n.defaultUndefined(y[2],-1)),n.toString(n.defaultUndefined(y[3],"round")).toLowerCase(),D,u)})};t.rotate=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,2,3);C=y[0];if(null===
C)return null;if(!(C instanceof a))throw Error("Illegal Argument");C instanceof m&&(C=h.fromExtent(C));D=n.toNumber(y[1]);if(isNaN(D))throw Error("Illegal Argument");y=n.defaultUndefined(y[2],null);if(null===y)return g.rotate(C,D);if(y instanceof k)return g.rotate(C,D,y);throw Error("Illegal Argument");})};t.centroid=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,1,1);if(null===y[0])return null;C=y[0];if(n.isArray(y[0])||n.isImmutableArray(y[0]))C=n.autoCastArrayOfPointsToMultiPoint(y[0],
v.spatialReference);if(null===C)return null;if(!(C instanceof a))throw Error("Illegal Argument");return C instanceof k?n.fixSpatialReference(q.cloneGeometry(y[0]),v.spatialReference):C instanceof h?C.getCentroid():C instanceof f?p.centroidPolyline(C):C instanceof e?p.centroidMultiPoint(C):C instanceof m?C.getCenter():null})};t.multiparttosinglepart=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,1,1);D=[];if(null===y[0])return null;if(!(y[0]instanceof a))throw Error("Illegal Argument");
if(y[0]instanceof k||y[0]instanceof m)return[n.fixSpatialReference(q.cloneGeometry(y[0]),v.spatialReference)];C=g.simplify(y[0]);if(C instanceof h){D=[];var u=[];for(y=0;y<C.rings.length;y++)if(C.isClockwise(C.rings[y])){var B=c.fromJson({rings:[C.rings[y]],hasZ:!0===C.hasZ,hasM:!0===C.hasM,spatialReference:C.spatialReference.toJson()});D.push(B)}else u.push({ring:C.rings[y],pt:C.getPoint(y,0)});for(C=0;C<u.length;C++)for(y=0;y<D.length;y++)if(D[y].contains(u[C].pt)){D[y].addRing(u[C].ring);break}return D}if(C instanceof
f){D=[];for(y=0;y<C.paths.length;y++)u=c.fromJson({paths:[C.paths[y]],hasZ:!0===C.hasZ,hasM:!0===C.hasM,spatialReference:C.spatialReference.toJson()}),D.push(u);return D}if(y[0]instanceof e){C=n.fixSpatialReference(q.cloneGeometry(y[0]),v.spatialReference);for(y=0;y<C.points.length;y++)D.push(C.getPoint(y));return D}return null})};t.issimple=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,1,1);if(null===y[0])return!0;if(!(y[0]instanceof a))throw Error("Illegal Argument");
return g.isSimple(y[0])})};t.simplify=function(v,z){return r(v,z,function(C,D,y){y=n.autoCastFeatureToGeometry(y);n.pcCheck(y,1,1);if(null===y[0])return null;if(!(y[0]instanceof a))throw Error("Illegal Argument");return g.simplify(y[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(F,l,b,q){Object.defineProperty(l,"__esModule",{value:!0});l.cloneGeometry=l.sameGeomType=l.convertLinearUnitsToCode=l.shapeExtent=l.convertSquareUnitsToCode=
void 0;l.convertSquareUnitsToCode=function(n){if(void 0===n)return null;if("number"===typeof n)return n;n=n.toLowerCase();n=n.replace(/\s/g,"");n=n.replace(/-/g,"");switch(n){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};l.shapeExtent=function(n){if(null===n)return null;switch(n.type){case "polygon":case "multipoint":case "polyline":return n.extent;case "point":return new b({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,
spatialReference:n.spatialReference});case "extent":return n}return null};l.convertLinearUnitsToCode=function(n){if(void 0===n)return null;if("number"===typeof n)return n;n=n.toLowerCase();n=n.replace(/\s/g,"");n=n.replace(/-/g,"");switch(n){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};l.sameGeomType=function(n,p){return n===p||"point"===n&&"esriGeometryPoint"===p||"polyline"===n&&"esriGeometryPolyline"===p||"polygon"===n&&"esriGeometryPolygon"===p||"extent"===n&&"esriGeometryEnvelope"===
p||"multipoint"===n&&"esriGeometryMultipoint"===p||"point"===p&&"esriGeometryPoint"===n||"polyline"===p&&"esriGeometryPolyline"===n||"polygon"===p&&"esriGeometryPolygon"===n||"extent"===p&&"esriGeometryEnvelope"===n||"multipoint"===p&&"esriGeometryMultipoint"===n?!0:!1};l.cloneGeometry=function(n){if(null===n)return null;var p=q.fromJson(n.toJson());n.getCacheValue("_geVersion")&&p.setCacheValue("_geVersion",n.getCacheValue("_geVersion"));return p}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),
function(F,l,b,q,n,p){function m(a,e,k){if("undefined"===typeof k||0===+k)return Math[a](e);e=+e;k=+k;if(isNaN(e)||"number"!==typeof k||0!==k%1)return NaN;e=e.toString().split("e");e=Math[a](+(e[0]+"e"+(e[1]?+e[1]-k:-k)));e=e.toString().split("e");return+(e[0]+"e"+(e[1]?+e[1]+k:k))}Object.defineProperty(l,"__esModule",{value:!0});l.registerFunctions=void 0;l.registerFunctions=function(a,e){function k(h,f,c){h=n.toNumber(h);return isNaN(h)?h:isNaN(f)||isNaN(c)||f>c?NaN:h<f?f:h>c?c:h}a.number=function(h,
f){return e(h,f,function(c,d,g){n.pcCheck(g,1,2);c=g[0];return n.isNumber(c)?c:null===c?0:n.isDate(c)||n.isBoolean(c)?Number(c):n.isArray(c)?NaN:""===c||void 0===c?Number(c):n.isString(c)?void 0!==g[1]?(g=n.multiReplace(g[1],"\u2030",""),g=n.multiReplace(g,"\u00a4",""),p.parse(c,{pattern:g})):Number(c.trim()):Number(c)})};a.abs=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.abs(n.toNumber(g[0]))})};a.acos=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.acos(n.toNumber(g[0]))})};
a.asin=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.asin(n.toNumber(g[0]))})};a.atan=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.atan(n.toNumber(g[0]))})};a.atan2=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,2,2);return Math.atan2(n.toNumber(g[0]),n.toNumber(g[1]))})};a.ceil=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,2);return 2===g.length?(c=n.toNumber(g[1]),isNaN(c)&&(c=0),m("ceil",n.toNumber(g[0]),-1*c)):Math.ceil(n.toNumber(g[0]))})};
a.round=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,2);return 2===g.length?(c=n.toNumber(g[1]),isNaN(c)&&(c=0),m("round",n.toNumber(g[0]),-1*c)):Math.round(n.toNumber(g[0]))})};a.floor=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,2);return 2===g.length?(c=n.toNumber(g[1]),isNaN(c)&&(c=0),m("floor",n.toNumber(g[0]),-1*c)):Math.floor(n.toNumber(g[0]))})};a.cos=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.cos(n.toNumber(g[0]))})};a.isnan=function(h,
f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return"number"===typeof g[0]&&isNaN(g[0])})};a.exp=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.exp(n.toNumber(g[0]))})};a.log=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.log(n.toNumber(g[0]))})};a.pow=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,2,2);return Math.pow(n.toNumber(g[0]),n.toNumber(g[1]))})};a.random=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,0,0);return Math.random()})};
a.sin=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.sin(n.toNumber(g[0]))})};a.sqrt=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.sqrt(n.toNumber(g[0]))})};a.tan=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return Math.tan(n.toNumber(g[0]))})};a.defaultvalue=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,2,2);return null===g[0]||""===g[0]||void 0===g[0]?g[1]:g[0]})};a.isempty=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,
1,1);return null===g[0]||""===g[0]||void 0===g[0]?!0:!1})};a["boolean"]=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,1,1);return n.toBoolean(g[0])})};a.constrain=function(h,f){return e(h,f,function(c,d,g){n.pcCheck(g,3,3);c=n.toNumber(g[1]);d=n.toNumber(g[2]);if(n.isArray(g[0])){var t=[],r=0;for(g=g[0];r<g.length;r++)t.push(k(g[r],c,d));return t}if(n.isImmutableArray(g[0])){t=[];for(r=0;r<g[0].length();r++)t.push(k(g[0].get(r),c,d));return t}return k(g[0],c,d)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(F,l,b,q){function n(p,m,a,e){if(1===e.length){if(b.isArray(e[0]))return q.calculateStat(p,e[0],-1);if(b.isImmutableArray(e[0]))return q.calculateStat(p,e[0].toArray(),-1)}return q.calculateStat(p,e,-1)}Object.defineProperty(l,"__esModule",{value:!0});l.registerFunctions=void 0;l.registerFunctions=function(p,m){p.stdev=function(a,e){return m(a,e,function(k,h,f){return n("stdev",k,h,f)})};p.variance=function(a,e){return m(a,e,function(k,h,f){return n("variance",
k,h,f)})};p.average=function(a,e){return m(a,e,function(k,h,f){return n("mean",k,h,f)})};p.mean=function(a,e){return m(a,e,function(k,h,f){return n("mean",k,h,f)})};p.sum=function(a,e){return m(a,e,function(k,h,f){return n("sum",k,h,f)})};p.min=function(a,e){return m(a,e,function(k,h,f){return n("min",k,h,f)})};p.max=function(a,e){return m(a,e,function(k,h,f){return n("max",k,h,f)})};p.distinct=function(a,e){return m(a,e,function(k,h,f){return n("distinct",k,h,f)})};p.count=function(a,e){return m(a,
e,function(k,h,f){b.pcCheck(f,1,1);if(b.isArray(f[0])||b.isString(f[0]))return f[0].length;if(b.isImmutableArray(f[0]))return f[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(F,l,b){function q(p){for(var m=0,a=0;a<p.length;a++)m+=p[a];return m/p.length}function n(p){for(var m=q(p),a=0,e=0;e<p.length;e++)a+=Math.pow(m-p[e],2);return a/p.length}Object.defineProperty(l,"__esModule",
{value:!0});l.calculateStat=l.decodeStatType=void 0;l.decodeStatType=function(p){switch(p.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};l.calculateStat=function(p,m,a){void 0===a&&(a=1E3);switch(p.toLowerCase()){case "distinct":a:{p=a;a=[];for(var e={},k=[],h=0;h<m.length;h++){if(void 0!==
m[h]&&null!==m[h]&&m[h]!==b.voidOperation){var f=m[h];if(b.isNumber(f)||b.isString(f))void 0===e[f]&&(a.push(f),e[f]=1);else{for(var c=!1,d=0;d<k.length;d++)!0===b.equalityTest(k[d],f)&&(c=!0);!1===c&&(k.push(f),a.push(f))}}if(a.length>=p&&-1!==p){m=a;break a}}m=a}return m;case "avg":case "mean":return q(b.toNumberArray(m));case "min":return Math.min.apply(Math,b.toNumberArray(m));case "sum":m=b.toNumberArray(m);for(a=p=0;a<m.length;a++)p+=m[a];return p;case "max":return Math.max.apply(Math,b.toNumberArray(m));
case "stdev":case "stddev":return Math.sqrt(n(b.toNumberArray(m)));case "var":case "variance":return n(b.toNumberArray(m));case "count":return m.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r){function w(v,z,C){if(null===v)z.updateUint8Array([0,139]);else if(a.isArray(v)){z.updateUint8Array([61]);if(C.map.has(v))v=C.map.get(v),z.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);for(var D=0;D<v.length;D++){var y=v[D];w(y,z,C)}C.map["delete"](v);C.currentLength--}z.updateUint8Array([199])}else if(a.isImmutableArray(v)){z.updateUint8Array([61]);if(C.map.has(v))v=C.map.get(v),z.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);
D=0;for(var u=v.toArray();D<u.length;D++)y=u[D],w(y,z,C);C.map["delete"](v);C.currentLength--}z.updateUint8Array([199])}else if(a.isDate(v))z.updateIntArray([v.getTime()]),z.updateUint8Array([241]);else if(a.isString(v))z.updateIntArray([v.length]),z.updateWithString(v),z.updateUint8Array([41]);else if(a.isBoolean(v))z.updateUint8Array([!0===v?1:0,113]);else if(a.isNumber(v))z.updateFloatArray([v]),z.updateUint8Array([173]);else{if(v instanceof p)throw Error("Type not supported in Hash");if(v instanceof
n)throw Error("Type not supported in Hash");if(v instanceof m){z.updateUint8Array([223]);if(C.map.has(v))v=C.map.get(v),z.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);D=0;for(u=v.keys();D<u.length;D++)y=u[D],z.updateIntArray([y.length]),z.updateWithString(y),z.updateUint8Array([251]),y=v.field(y),w(y,z,C),z.updateUint8Array([239]);C.map["delete"](v);C.currentLength--}z.updateUint8Array([73])}else{if(a.isFeature(v))throw Error("Type not supported in Hash");if(v instanceof d)z.updateIntArray([3833836621]),
z.updateIntArray([0]),z.updateFloatArray([v.x]),z.updateIntArray([1]),z.updateFloatArray([v.y]),z.updateIntArray([3765347959]),w(v.spatialReference.wkid,z,C);else if(v instanceof g){z.updateIntArray([1266616829]);for(D=0;D<v.rings.length;D++){u=v.rings[D];var B=[],x=null,A=null;for(y=0;y<u.length;y++){var E=v.getPoint(D,y);if(0===y)x=E;else if(A.x===E.x&&A.y===E.y)continue;A=E;y===u.length-1&&x.x===E.x&&x.y===E.y||B.push(E)}z.updateIntArray([1397116793,B.length]);for(y=0;y<B.length;y++)E=B[y],z.updateIntArray([3962308117,
y]),w(E,z,C),z.updateIntArray([2716288009]);z.updateIntArray([2278822459])}z.updateIntArray([3878477243]);w(v.spatialReference.wkid,z,C)}else if(v instanceof t){z.updateIntArray([4106883559]);for(D=0;D<v.paths.length;D++){u=v.paths[D];z.updateIntArray([1397116793,u.length]);for(y=0;y<u.length;y++)z.updateIntArray([3962308117,y]),w(v.getPoint(D,y),z,C),z.updateIntArray([2716288009]);z.updateIntArray([2278822459])}z.updateIntArray([2568784753]);w(v.spatialReference.wkid,z,C)}else if(v instanceof c){z.updateIntArray([588535921,
v.points.length]);for(y=0;y<v.points.length;y++)D=v.getPoint(y),z.updateIntArray([y]),w(D,z,C);z.updateIntArray([1700171621]);w(v.spatialReference.wkid,z,C)}else if(v instanceof f)z.updateIntArray([3483648373]),z.updateIntArray([0]),z.updateFloatArray([v.xmax]),z.updateIntArray([1]),z.updateFloatArray([v.xmin]),z.updateIntArray([2]),z.updateFloatArray([v.ymax]),z.updateIntArray([3]),z.updateFloatArray([v.ymin]),z.updateIntArray([3622027469]),w(v.spatialReference.wkid,z,C);else if(v instanceof r)z.updateIntArray([14]),
void 0!==v.wkid&&null!==v.wkid&&z.updateIntArray([v.wkid]),v.wkt&&z.updateWithString(v.wkt);else{if(a.isFunctionParameter(v))throw Error("Type not supported in Hash");if(a.isFeatureSet(v))throw Error("Type not supported in Hash");a.isFeatureSetCollection(v);throw Error("Type not supported in Hash");}}}}Object.defineProperty(l,"__esModule",{value:!0});l.registerFunctions=void 0;l.registerFunctions=function(v,z){v.portal=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);return new n(a.toString(B[0]))})};
v.trim=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);return a.toString(B[0]).trim()})};v.tohex=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);y=a.toNumber(B[0]);return isNaN(y)?y:y.toString(16)})};v.upper=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);return a.toString(B[0]).toUpperCase()})};v.proper=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,2);y=1;2===B.length&&"firstword"===a.toString(B[1]).toLowerCase()&&(y=2);u=/\s/;B=a.toString(B[0]);for(var x=
"",A=!0,E=0;E<B.length;E++){var J=B[E];u.test(J)?1===y&&(A=!0):J.toUpperCase()!==J.toLowerCase()&&(A?(J=J.toUpperCase(),A=!1):J=J.toLowerCase());x+=J}return x})};v.lower=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);return a.toString(B[0]).toLowerCase()})};v.guid=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,0,1);if(0<B.length)switch(a.toString(B[0]).toLowerCase()){case "digits":return a.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return a.generateUUID();
case "digits-hyphen-parentheses":return"("+a.generateUUID()+")"}return"{"+a.generateUUID()+"}"})};v.console=function(C,D){return z(C,D,function(y,u,B){0!==B.length&&(1===B.length?C.console(a.toString(B[0])):C.console(a.toString(B)));return a.voidOperation})};v.mid=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,2,3);y=a.toNumber(B[1]);if(isNaN(y))return"";0>y&&(y=0);if(2===B.length)return a.toString(B[0]).substr(y);u=a.toNumber(B[2]);if(isNaN(u))return"";0>u&&(u=0);return a.toString(B[0]).substr(y,
u)})};v.find=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,2,3);y=0;if(2<B.length){y=a.toNumber(a.defaultUndefined(B[2],0));if(isNaN(y))return-1;0>y&&(y=0)}return a.toString(B[1]).indexOf(a.toString(B[0]),y)})};v.left=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,2,2);y=a.toNumber(B[1]);if(isNaN(y))return"";0>y&&(y=0);return a.toString(B[0]).substr(0,y)})};v.right=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,2,2);y=a.toNumber(B[1]);if(isNaN(y))return"";0>y&&(y=0);return a.toString(B[0]).substr(-1*
y,y)})};v.split=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,2,4);y=a.toNumber(a.defaultUndefined(B[2],-1));u=a.toBoolean(a.defaultUndefined(B[3],!1));-1===y||null===y||!0===u?B=a.toString(B[0]).split(a.toString(B[1])):(isNaN(y)&&(y=-1),-1>y&&(y=-1),B=a.toString(B[0]).split(a.toString(B[1]),y));if(!1===u)return B;u=[];for(var x=0;x<B.length&&!(-1!==y&&u.length>=y);x++)""!==B[x]&&void 0!==B[x]&&u.push(B[x]);return u})};v.text=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,2);return a.toStringExplicit(B[0],
B[1])})};v.concatenate=function(C,D){return z(C,D,function(y,u,B){y=[];if(1>B.length)return"";if(a.isArray(B[0])){u=a.defaultUndefined(B[2],"");for(var x=0;x<B[0].length;x++)y[x]=a.toStringExplicit(B[0][x],u);return 1<B.length?y.join(B[1]):y.join("")}if(a.isImmutableArray(B[0])){u=a.defaultUndefined(B[2],"");for(x=0;x<B[0].length();x++)y[x]=a.toStringExplicit(B[0].get(x),u);return 1<B.length?y.join(B[1]):y.join("")}for(x=0;x<B.length;x++)y[x]=a.toStringExplicit(B[x]);return y.join("")})};v.reverse=
function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);if(a.isArray(B[0]))return y=B[0].slice(0),y.reverse(),y;if(a.isImmutableArray(B[0]))return y=B[0].toArray().slice(0),y.reverse(),y;throw Error("Invalid Parameter");})};v.replace=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,3,4);y=a.toString(B[0]);u=a.toString(B[1]);var x=a.toString(B[2]);return(4===B.length?a.toBoolean(B[3]):1)?a.multiReplace(y,u,x):y.replace(u,x)})};v.schema=function(C,D){return z(C,D,function(y,u,B){if(a.isFeature(B[0]))return(y=
a.featureSchema(B[0]))?m.convertObjectToArcadeDictionary(y):null;throw Error("Invalid Parameter");})};v.subtypes=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);if(a.isFeature(B[0]))return(y=a.featureSubtypes(B[0]))?m.convertObjectToArcadeDictionary(y):null;throw Error("Invalid Parameter");})};v.subtypecode=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);if(a.isFeature(B[0])){u=a.featureSubtypes(B[0]);if(!u)return null;if(u.subtypeField&&B[0].hasField(u.subtypeField))for(B=
B[0].field(u.subtypeField),y=0,u=u.subtypes;y<u.length;y++){var x=u[y];if(x.code===B)return x.code}return null}throw Error("Invalid Parameter");})};v.subtypename=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);if(a.isFeature(B[0])){u=a.featureSubtypes(B[0]);if(!u)return"";if(u.subtypeField&&B[0].hasField(u.subtypeField))for(B=B[0].field(u.subtypeField),y=0,u=u.subtypes;y<u.length;y++){var x=u[y];if(x.code===B)return x.name}return""}throw Error("Invalid Parameter");})};v.gdbversion=function(C,
D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);if(a.isFeature(B[0]))return B[0].gdbVersion();throw Error("Invalid Parameter");})};v.domain=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,2,3);if(a.isFeature(B[0]))return(y=a.featureFullDomain(B[0],a.toString(B[1]),void 0===B[2]?void 0:a.toNumber(B[2])))&&y.domain?"coded-value"===y.domain.type||"codedValue"===y.domain.type?m.convertObjectToArcadeDictionary({type:"codedValue",name:y.domain.name,dataType:e.layerFieldEsriConstants[y.field.type],
codedValues:y.domain.codedValues.map(function(x){return{name:x.name,code:x.code}})}):m.convertObjectToArcadeDictionary({type:"range",name:y.domain.name,dataType:e.layerFieldEsriConstants[y.field.type],min:y.domain.min,max:y.domain.max}):null;throw Error("Invalid Parameter");})};v.domainname=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,2,4);if(a.isFeature(B[0]))return a.featureDomainValueLookup(B[0],a.toString(B[1]),B[2],void 0===B[3]?void 0:a.toNumber(B[3]));throw Error("Invalid Parameter");
})};v.domaincode=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,2,4);if(a.isFeature(B[0]))return a.featureDomainCodeLookup(B[0],a.toString(B[1]),B[2],void 0===B[3]?void 0:a.toNumber(B[3]));throw Error("Invalid Parameter");})};v.urlencode=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);if(null===B[0])return"";if(B[0]instanceof m){y="";u=0;for(var x=B[0].keys();u<x.length;u++){var A=x[u],E=B[0].field(A);""!==y&&(y+="\x26");y=null===E?y+(encodeURIComponent(A)+"\x3d"):y+(encodeURIComponent(A)+
"\x3d"+encodeURIComponent(E))}return y}return encodeURIComponent(a.toString(B[0]))})};v.hash=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);y=new h.XXH(0);w(B[0],y,{map:new Map,currentLength:0});return y.digest()})};v.convertdirection=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,3,3);return k.convertDirection(B[0],B[1],B[2])})};v.fromjson=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,1);if(!1===a.isString(B[0]))throw Error("Invalid Parameter");return m.convertJsonToArcade(JSON.parse(a.toString(B[0])))})};
v.expects=function(C,D){return z(C,D,function(y,u,B){if(1>B.length)throw Error("Function called with wrong number of Parameters");return a.voidOperation})};v.tocharcode=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,2);y=a.toNumber(a.defaultUndefined(B[1],0));u=a.toString(B[0]);if(0===u.length&&1===B.length)return null;if(u.length<=y||0>y)throw Error("Illegal argument");return u.charCodeAt(y)})};v.tocodepoint=function(C,D){return z(C,D,function(y,u,B){a.pcCheck(B,1,2);y=a.toNumber(a.defaultUndefined(B[1],
0));u=a.toString(B[0]);if(0===u.length&&1===B.length)return null;if(u.length<=y||0>y)throw Error("Illegal argument");return u.codePointAt(y)})};v.fromcharcode=function(C,D){return z(C,D,function(y,u,B){if(1>B.length)throw Error("Function called with wrong number of Parameters");y=B.map(function(x){return Math.trunc(a.toNumber(x))}).filter(function(x){return 0<=x&&65535>=x});return 0===y.length?null:String.fromCharCode.apply(null,y)})};v.fromcodepoint=function(C,D){return z(C,D,function(y,u,B){if(1>
B.length)throw Error("Function called with wrong number of Parameters");try{var x=B.map(function(A){return Math.trunc(a.toNumber(A))}).filter(function(A){return 1114111>=A&&A>>>0===A})}catch(A){return null}return 0===x.length?null:String.fromCodePoint.apply(null,x)})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(F,l,b,q){function n(aa){if(!1===q.isString(aa))throw Error("Invalid Parameter");return aa}function p(aa,
ja){var oa=Math.pow(10,ja);return Math.round(aa*oa)/oa}function m(aa){aa=+aa;return isFinite(aa)?aa-aa%1||(0>aa?-0:0===aa?aa:0):aa}function a(aa){var ja=parseFloat(aa.toString().replace(m(aa).toString(),"0"))*((0<aa)-(0>aa)||+aa);return 0>aa?{fraction:ja,integer:Math.ceil(aa)}:{fraction:ja,integer:Math.floor(aa)}}function e(aa,ja){switch(aa){case 0:return"SHORT"===ja?"N":"North";case 1:return"SHORT"===ja?"E":"East";case 2:return"SHORT"===ja?"S":"South";case 3:return"SHORT"===ja?"W":"West"}}function k(aa,
ja,oa){for(;aa.length<oa;)aa=ja+aa;return aa}function h(aa,ja){return aa-Math.floor(aa/ja)*ja}function f(aa){switch(aa){case 6:case 1:return 360;case 4:return E;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function c(aa){switch(aa.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");
}function d(aa){switch(aa.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function g(aa,ja,oa){var U=
null;switch(ja){case 1:U=l.preciseMultiply(aa,3600);break;case 2:U=aa;break;case 5:U=l.preciseMultiply(aa,3240);break;case 4:U=l.preciseMultiply(aa,J);break;default:throw Error("Unnexpected evaluation");}switch(oa){case 1:return l.preciseDivide(U,3600);case 2:return U;case 5:return l.preciseDivide(U,3240);case 4:return U/J;default:throw Error("Unnexpected evaluation");}}function t(aa){switch(aa){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}
function r(aa){switch(q.toNumber(aa)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function w(aa){switch(aa.toUpperCase().trim()){case "N":case "NORTH":return 0;case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function v(aa){aa=parseFloat(aa);if(q.isNumber(aa)){if(isNaN(aa))throw Error("Invalid conversion");return aa}throw Error("Invalid conversion");
}function z(aa,ja,oa){var U=3===oa,ea=null,fa=null,pa=0,ra=0;ra=0;if(U){if(2>aa.length)throw Error("Conversion Error");ra=1;(fa=r(q.toString(aa[aa.length-1])))?(ea=fa.first,fa=fa.second):(pa=1,ea=w(q.toString(aa[0])),fa=w(q.toString(aa[aa.length-1])));if(null===ea||null===fa)throw Error("Invalid Conversion");}switch(ja){case 1:case 4:case 5:if(0===aa.length)throw Error("Invalid Conversion");return U?ba.createFromAngleMeridianAndDirection(ca.createFromAngleAndUnits(v(aa[pa]),t(ja)),ea,fa):ba.createFromAngleAndDirection(ca.createFromAngleAndUnits(v(aa[pa]),
t(ja)),oa);case 3:ra=aa.length-ra-pa;if(3===ra)return aa=ca.createFromDegreesMinutesSeconds(v(aa[pa]),v(aa[pa+1]),v(aa[pa+2])),U?ba.createFromAngleMeridianAndDirection(aa,ea,fa):ba.createFromAngleAndDirection(aa,oa);if(1===ra)return aa=v(aa[pa]),aa=P.numberToDms(aa),aa=ca.createFromDegreesMinutesSeconds(aa.m_degrees,aa.m_minutes,aa.m_seconds),U?ba.createFromAngleMeridianAndDirection(aa,ea,fa):ba.createFromAngleAndDirection(aa,oa)}throw Error("Conversion Error");}function C(aa){for(var ja=[" ","-",
"/","'",'"',"\\","^","\u00b0",O,"\t","\r","\n","*"],oa="",U=0;U<aa.length;U++){var ea=aa.charAt(U);oa=ja.includes(ea)?oa+"RRSPLITRRSPLITRR":oa+ea}return oa.split("RRSPLITRRSPLITRR").filter(function(fa){return""!==fa})}function D(aa,ja,oa){for(var U={padding:0,rounding:0,newpos:ja},ea=!1;ja<aa.length;){var fa=aa[ja];if(fa===oa)ea?U.rounding++:U.padding++,ja++;else if("."===fa)ea=!0,ja++;else break}U.newpos=ja-1;return U}Object.defineProperty(l,"__esModule",{value:!0});l.convertDirection=l.preciseDivide=
l.preciseMultiply=l.preciseMinus=l.preciseAdd=void 0;var y=function(aa){return function(ja,oa,U){U=U||14;return+aa(ja,oa).toFixed(U)}},u=function(aa,ja){return aa+ja},B=function(aa,ja){return aa-ja},x=function(aa,ja){return aa*ja},A=function(aa,ja){return aa/ja};l.preciseAdd=function(aa,ja,oa){return y(u)(aa,ja,oa)};l.preciseMinus=function(aa,ja,oa){return y(B)(aa,ja,oa)};l.preciseMultiply=function(aa,ja,oa){return y(x)(aa,ja,oa)};l.preciseDivide=function(aa,ja,oa){return y(A)(aa,ja,oa)};var E=2*
Math.PI,J=648E3/Math.PI,O=String.fromCharCode(7501),S;(function(aa){aa[aa.north=0]="north";aa[aa.east=1]="east";aa[aa.south=2]="south";aa[aa.west=3]="west"})(S||(S={}));var X;(function(aa){aa[aa.decimal_degrees=1]="decimal_degrees";aa[aa.seconds=2]="seconds";aa[aa.degrees_minutes_seconds=3]="degrees_minutes_seconds";aa[aa.radians=4]="radians";aa[aa.gradians=5]="gradians";aa[aa.truncated_degrees=6]="truncated_degrees";aa[aa.fractional_degree_minutes=7]="fractional_degree_minutes";aa[aa.fractional_minute_seconds=
8]="fractional_minute_seconds"})(X||(X={}));var Y;(function(aa){aa[aa.north_azimuth=1]="north_azimuth";aa[aa.polar=2]="polar";aa[aa.quadrant=3]="quadrant";aa[aa.south_azimuth=4]="south_azimuth"})(Y||(Y={}));var K;(function(aa){aa[aa.meridian=0]="meridian";aa[aa.direction=1]="direction"})(K||(K={}));var P=function(){function aa(ja,oa,U){this.m_degrees=ja;this.m_minutes=oa;this.m_seconds=U}aa.prototype.getField=function(ja){switch(ja){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;
case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};aa.secondsToDMS=function(ja){var oa=a(ja).fraction;ja=a(ja).integer;var U=Math.floor(ja/3600);ja-=3600*U;var ea=Math.floor(ja/60);return new aa(U,ea,ja-60*ea+oa)};aa.numberToDms=function(ja){var oa=a(ja).fraction;ja=a(ja).integer;var U=l.preciseMultiply(a(100*oa).fraction,100);oa=a(100*oa).integer;return new aa(ja,oa,U)};aa.prototype.format=function(ja,oa){var U=p(this.m_seconds,oa),ea=this.m_minutes,fa=this.m_degrees;
if(2===ja||8===ja)60<=U&&(U-=60,++ea),60<=ea&&(ea=0,++fa),360<=fa&&(fa=0);else if(7===ja)U=0,ea=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,fa=this.m_degrees,60<=ea&&(ea=0,++fa),360<=fa&&(fa=0);else if(1===ja||6===ja)U=l.preciseDivide(this.m_seconds,3600),ea=l.preciseDivide(this.m_minutes,60),fa=Math.round(this.m_degrees+ea+U),U=ea=0;return new aa(fa,ea,U)};aa.dmsToSeconds=function(ja,oa,U){return 3600*ja+60*oa+U};return aa}(),Q=function(){function aa(ja,oa,U){this.meridian=ja;this.angle=oa;
this.direction=U}aa.prototype.fetchAzimuth=function(ja){return ja===K.meridian?this.meridian:this.direction};return aa}(),ba=function(){function aa(ja){this.m_angle=ja}aa.createFromAngleAndDirection=function(ja,oa){return new aa(new ca(aa._convertDirectionFormat(ja.extractAngularUnits(2),oa,1)))};aa.prototype.getAngle=function(ja){var oa=this.m_angle.extractAngularUnits(2);switch(ja){case 1:case 4:case 2:return ja=new ca(aa._convertDirectionFormat(oa,1,ja));case 3:return ja=aa.secondsNorthAzimuthToQuadrant(oa),
ja=new ca(ja.angle)}};aa.prototype.getMeridian=function(ja){var oa=this.m_angle.extractAngularUnits(2);switch(ja){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return aa.secondsNorthAzimuthToQuadrant(oa).meridian}};aa.prototype.getDirection=function(ja){var oa=this.m_angle.extractAngularUnits(2);switch(ja){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return aa.secondsNorthAzimuthToQuadrant(oa).direction}};aa.secondsNorthAzimuthToQuadrant=function(ja){var oa=324E3>=ja||972E3<=ja?
0:2;return new Q(oa,0===oa?Math.min(1296E3-ja,ja):Math.abs(ja-648E3),648E3<ja?3:1)};aa.createFromAngleMeridianAndDirection=function(ja,oa,U){return new aa(new ca(aa.secondsQuadrantToNorthAzimuth(ja.extractAngularUnits(2),oa,U)))};aa.secondsQuadrantToNorthAzimuth=function(ja,oa,U){return 0===oa?1===U?ja:1296E3-ja:1===U?648E3-ja:648E3+ja};aa._convertDirectionFormat=function(ja,oa,U){var ea=0;switch(oa){case 1:ea=ja;break;case 2:ea=324E3-ja;break;case 3:throw Error("Unnexpected evaluation");case 4:ea=
ja+648E3}ja=0;switch(U){case 1:ja=ea;break;case 2:ja=324E3-ea;break;case 3:throw Error("Unnexpected evaluation");case 4:ja=ea-648E3}ja%=1296E3;return 0>ja?1296E3+ja:ja};return aa}(),ca=function(){function aa(ja){this.m_seconds=ja}aa.createFromAngleAndUnits=function(ja,oa){return new aa(g(ja,oa,2))};aa.prototype.extractAngularUnits=function(ja){return g(this.m_seconds,2,t(ja))};aa.createFromDegreesMinutesSeconds=function(ja,oa,U){return new aa(l.preciseAdd(l.preciseAdd(l.preciseMultiply(ja,3600),l.preciseMultiply(oa,
60)),U))};return aa}(),ka=function(){function aa(ja,oa,U,ea){this.m_view=ja;this.m_angle=oa;this.m_merdian=U;this.m_direction=ea;this.m_formatted_dms=this.m_dms=null}aa.createFromStringAndBearing=function(ja,oa,U){return new aa(ja,oa.getAngle(U),oa.getMeridian(U),oa.getDirection(U))};aa.prototype.fetchAngle=function(){return this.m_angle};aa.prototype.fetchMeridian=function(){return this.m_merdian};aa.prototype.fetchDirection=function(){return this.m_direction};aa.prototype.fetchView=function(){return this.m_view};
aa.prototype.fetchDms=function(){null===this.m_dms&&this._calculateDms();return this.m_dms};aa.prototype.fetchFormattedDms=function(){null===this.m_formatted_dms&&this._calculateDms();return this.m_formatted_dms};aa.prototype._calculateDms=function(){var ja=null,oa=6,U=0;for(ja=0;ja<this.m_view.length;ja++){var ea=this.m_view[ja];switch(ea){case "m":ja=D(this.m_view,ja,ea);oa=6===oa?7:oa;ja=ja.newpos;continue;case "s":ja=D(this.m_view,ja,ea),oa=8,U=U<ja.rounding?ja.rounding:U,ja=ja.newpos}}this.m_dms=
P.secondsToDMS(this.m_angle.extractAngularUnits(2));this.m_formatted_dms=P.secondsToDMS(this.m_angle.extractAngularUnits(2)).format(oa,U)};return aa}();l.convertDirection=function(aa,ja,oa){if(!(ja instanceof b))throw Error("Invalid Parameter");if(!1===ja.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===ja.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var U=c(n(ja.field("directiontype")));ja=d(n(ja.field("angletype")));if(q.isNumber(aa)){aa=
q.toNumber(aa);if(3===U)throw Error("Conversion error");3===ja?(aa=P.numberToDms(aa),ja=ba.createFromAngleAndDirection(ca.createFromDegreesMinutesSeconds(aa.m_degrees,aa.m_minutes,aa.m_seconds),U)):ja=ba.createFromAngleAndDirection(ca.createFromAngleAndUnits(aa,t(ja)),U)}else if(q.isString(aa))ja=z(C(aa),ja,U);else if(q.isArray(aa))ja=z(aa,ja,U);else if(q.isImmutableArray(aa))ja=z(aa.toArray(),ja,U);else throw Error("Conversion Error");if(!(oa instanceof b))throw Error("Invalid Parameter");if(!1===
oa.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===oa.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");U=c(n(oa.field("directiontype")));aa=oa.hasField("angleType")?d(n(oa.field("angletype"))):null;var ea=n(oa.field("outputType")).toUpperCase().trim();if(!U||!ea)throw Error("Conversion error");if(!(aa||"TEXT"===ea&&oa.hasField("format")))throw Error("Invalid unit");switch(ea){case "VALUE":if(3===U||3===aa)return oa=ja,ja=oa.getAngle(U),
3===U&&3===aa?(aa=P.secondsToDMS(ja.extractAngularUnits(2)),U=[e(oa.getMeridian(U),"SHORT"),aa.m_degrees,aa.m_minutes,aa.m_seconds,e(oa.getDirection(U),"SHORT")]):3===aa?(aa=P.secondsToDMS(ja.extractAngularUnits(2)),U=[aa.m_degrees,aa.m_minutes,aa.m_seconds]):U=3===U?[e(oa.getMeridian(U),"SHORT"),ja.extractAngularUnits(aa),e(oa.getDirection(U),"SHORT")]:[ja.extractAngularUnits(aa)],U;oa=ja;if((ja=t(aa))&&3!==aa)U=oa.getAngle(U).extractAngularUnits(ja);else throw Error("Conversion Error");return U;
case "TEXT":ea="";oa.hasField("format")&&(ea=q.toString(oa.field("format")));if(null===ea||""===ea){oa="";switch(aa){case 1:oa=3===U?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:oa=3===U?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:oa="R.RR";break;case 5:oa="GGG.GG"+O;break;default:throw Error("Conversion error");}3===U&&(oa="p "+oa+" b");ea=oa}oa=ja;aa=ea;var fa="",pa=null,ra=null;ja=ka.createFromStringAndBearing(aa,oa,U);ea={D:1,d:6,m:7,s:8,R:4,G:5};for(ra=0;ra<aa.length;ra++){var va=aa[ra];
switch(va){case "[":pa=aa;va={escaped:"",newpos:ra};for(ra++;ra<pa.length;){var Fa=pa[ra];ra++;if("]"===Fa)break;va.escaped+=Fa}va.newpos=ra-1;pa=va;fa+=pa.escaped;ra=pa.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":pa=D(aa,ra,va);ra=oa.getAngle(U);a:{va=ea[va];Fa=pa.padding;var Ha=pa.rounding,Ca=ja,T=null;switch(va){case 1:case 4:case 5:T=h(p(ra.extractAngularUnits(va),Ha),f(va));ra=k(T.toFixed(Ha),"0",Fa+Ha+(0<Ha?1:0));break a;case 6:case 7:T=h(Ca.fetchFormattedDms().getField(va),
f(va));ra=k(T.toFixed(Ha),"0",Fa+Ha+(0<Ha?1:0));break a;case 8:T=h(p(Ca.fetchDms().getField(va),Ha),f(va));ra=k(T.toFixed(Ha),"0",Fa+Ha+(0<Ha?1:0));break a;default:throw Error("Unnexepected evaluation");}}fa+=ra;ra=pa.newpos;continue;case "P":case "p":fa+=e(ja.fetchMeridian(),"p"===va?"SHORT":"LONG");continue;case "B":case "b":fa+=e(ja.fetchDirection(),"b"===va?"SHORT":"LONG");continue;default:fa+=va}}return fa;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require",
"exports"],function(F,l){function b(n){for(var p=[],m=0,a=n.length;m<a;m++){var e=n.charCodeAt(m);128>e?p.push(e):2048>e?p.push(192|e>>6,128|e&63):55296>e||57344<=e?p.push(224|e>>12,128|e>>6&63,128|e&63):(m++,e=65536+((e&1023)<<10|n.charCodeAt(m)&1023),p.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|e&63))}return new Uint8Array(p)}Object.defineProperty(l,"__esModule",{value:!0});l.XXH=void 0;var q=function(){function n(p){this.seed=p;this.totallen=0;this.bufs=[];this.init()}n.prototype.init=function(){this.bufs=
[];this.totallen=0;return this};n.prototype.updateFloatArray=function(p){for(var m=[],a=0;a<p.length;a++){var e=p[a];isNaN(e)?m.push("NaN"):Infinity===e?m.push("Infinity"):-Infinity===e?m.push("-Infinity"):0===e?m.push("0"):m.push(e.toString(16))}this.update(b(m.join("")))};n.prototype.updateIntArray=function(p){p=Int32Array.from(p);this.update(new Uint8Array(p.buffer))};n.prototype.updateUint8Array=function(p){this.update(Uint8Array.from(p))};n.prototype.updateWithString=function(p){return this.update(b(p))};
n.prototype.update=function(p){this.bufs.push(p);this.totallen+=p.length;return this};n.prototype.digest=function(){for(var p=new Uint8Array(this.totallen),m=0,a=0,e=this.bufs;a<e.length;a++){var k=e[a];p.set(k,m);m+=k.length}this.init();return this._xxHash32(p,this.seed)};n.prototype._xxHash32=function(p,m){void 0===m&&(m=0);var a=m+374761393&4294967295,e=0;if(16<=p.length){a=[m+2654435761+2246822519&4294967295,m+2246822519&4294967295,m+0&4294967295,m-2654435761&4294967295];var k=p.length-16,h=0;
for(e=0;(e&4294967280)<=k;e+=4){var f=e,c=p[f+0]+(p[f+1]<<8);f=p[f+2]+(p[f+3]<<8);c=a[h]+(2246822519*c+(2246822519*f<<16))&4294967295;c=c<<13|c>>>19;a[h]=2654435761*(c&65535)+(2654435761*(c>>>16)<<16)&4294967295;h=h+1&3}a=(a[0]<<1|a[0]>>>31)+(a[1]<<7|a[1]>>>25)+(a[2]<<12|a[2]>>>20)+(a[3]<<18|a[3]>>>14)&4294967295}a=a+p.length&4294967295;for(h=p.length-4;e<=h;e+=4)f=e,c=p[f+0]+(p[f+1]<<8),f=p[f+2]+(p[f+3]<<8),a=a+(3266489917*c+(3266489917*f<<16))&4294967295,a=a<<17|a>>>15,a=668265263*(a&65535)+(668265263*
(a>>>16)<<16)&4294967295;for(;e<p.length;++e)h=p[e],a+=374761393*h,a=a<<11|a>>>21,a=2654435761*(a&65535)+(2654435761*(a>>>16)<<16)&4294967295;a^=a>>>15;a=(2246822519*(a&65535)&4294967295)+(2246822519*(a>>>16)<<16);a^=a>>>13;a=(3266489917*(a&65535)&4294967295)+(3266489917*(a>>>16)<<16);a^=a>>>16;return 0>a?a+4294967296:a};return n}();l.XXH=q})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y,u,B,x,A,E,J){function O(da,Z){for(var ma=[],I=0;I<Z.arguments.length;I++)ma.push(X(da,Z.arguments[I]));return ma}function S(da,Z,ma){try{return!0===Z.preparsed?ma(da,null,Z.arguments):ma(da,Z,O(da,Z))}catch(I){throw I;}}function X(da,Z){try{switch(Z.type){case "EmptyStatement":return d.voidOperation;case "VariableDeclarator":var ma=null===Z.init?null:X(da,Z.init);ma===d.voidOperation&&(ma=null);if("Identifier"!==Z.id.type)throw Error("Can only assign a regular variable");
var I=Z.id.name.toLowerCase();null!==da.localScope?da.localScope[I]={value:ma,valueset:!0,node:Z.init}:da.globalScope[I]={value:ma,valueset:!0,node:Z.init};return d.voidOperation;case "VariableDeclaration":for(var M=0;M<Z.declarations.length;M++)X(da,Z.declarations[M]);return d.voidOperation;case "BlockStatement":a:{var W=d.voidOperation;for(M=0;M<Z.body.length;M++)if(W=X(da,Z.body[M]),W instanceof d.ReturnResult||W===d.breakResult||W===d.continueResult){var H=W;break a}H=W}return H;case "FunctionDeclaration":var na=
Z.id.name.toLowerCase();da.globalScope[na]={valueset:!0,node:null,value:new h(Z,da)};return d.voidOperation;case "ReturnStatement":if(null===Z.argument)var sa=new d.ReturnResult(d.voidOperation);else{var la=X(da,Z.argument);sa=new d.ReturnResult(la)}return sa;case "IfStatement":if("AssignmentExpression"===Z.test.type||"UpdateExpression"===Z.test.type)throw Error(g.nodeErrorMessage(Z.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Na=X(da,Z.test);if(!0===Na)var Ra=X(da,Z.consequent);else if(!1===
Na)Ra=null!==Z.alternate?X(da,Z.alternate):d.voidOperation;else throw Error(g.nodeErrorMessage(Z,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return Ra;case "ExpressionStatement":if("AssignmentExpression"===Z.expression.type||"UpdateExpression"===Z.expression.type)var ua=X(da,Z.expression);else{var Aa=X(da,Z.expression);ua=Aa===d.voidOperation?d.voidOperation:new d.ImplicitResult(Aa)}return ua;case "AssignmentExpression":var ya=X(da,Z.right);M=null;var wa="";if("MemberExpression"===Z.left.type){M=
X(da,Z.left.object);!0===Z.left.computed?wa=X(da,Z.left.property):"Identifier"===Z.left.property.type&&(wa=Z.left.property.name);if(d.isArray(M))if(d.isNumber(wa)){0>wa&&(wa=M.length+wa);if(0>wa||wa>M.length)throw Error("Assignment outside of array bounds");if(wa===M.length&&"\x3d"!==Z.operator)throw Error("Invalid Parameter");M[wa]=K(ya,Z.operator,M[wa],Z)}else throw Error("Invalid Parameter");else if(M instanceof e){if(!1===d.isString(wa))throw Error("Dictionary accessor must be a string");if(!0===
M.hasField(wa))M.setField(wa,K(ya,Z.operator,M.field(wa),Z));else{if("\x3d"!==Z.operator)throw Error("Invalid Parameter");M.setField(wa,K(ya,Z.operator,null,Z))}}else if(d.isFeature(M)){if(!1===d.isString(wa))throw Error("Feature accessor must be a string");if(!0===M.hasField(wa))M.setField(wa,K(ya,Z.operator,M.field(wa),Z));else{if("\x3d"!==Z.operator)throw Error("Invalid Parameter");M.setField(wa,K(ya,Z.operator,null,Z))}}else{if(d.isImmutableArray(M))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}var xa=d.voidOperation}else if(M=Z.left.name.toLowerCase(),null!==da.localScope&&void 0!==da.localScope[M])da.localScope[M]={value:K(ya,Z.operator,da.localScope[M].value,Z),valueset:!0,node:Z.right},xa=d.voidOperation;else if(void 0!==da.globalScope[M])da.globalScope[M]={value:K(ya,Z.operator,da.globalScope[M].value,Z),valueset:!0,node:Z.right},xa=d.voidOperation;else throw Error("Variable not recognised");return xa;case "UpdateExpression":M=null;wa="";if("MemberExpression"===Z.argument.type){M=
X(da,Z.argument.object);!0===Z.argument.computed?wa=X(da,Z.argument.property):"Identifier"===Z.argument.property.type&&(wa=Z.argument.property.name);if(d.isArray(M))if(d.isNumber(wa)){0>wa&&(wa=M.length+wa);if(0>wa||wa>=M.length)throw Error("Assignment outside of array bounds");var Ba=d.toNumber(M[wa]);M[wa]="++"===Z.operator?Ba+1:Ba-1}else throw Error("Invalid Parameter");else if(M instanceof e){if(!1===d.isString(wa))throw Error("Dictionary accessor must be a string");if(!0===M.hasField(wa))Ba=
d.toNumber(M.field(wa)),M.setField(wa,"++"===Z.operator?Ba+1:Ba-1);else throw Error("Invalid Parameter");}else if(d.isFeature(M)){if(!1===d.isString(wa))throw Error("Feature accessor must be a string");if(!0===M.hasField(wa))Ba=d.toNumber(M.field(wa)),M.setField(wa,"++"===Z.operator?Ba+1:Ba-1);else throw Error("Invalid Parameter");}else{if(d.isImmutableArray(M))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var Da=!1===Z.prefix?Ba:"++"===Z.operator?Ba+1:Ba-1}else{M="Identifier"===
Z.argument.type?Z.argument.name.toLowerCase():"";if(!M)throw Error("Invalid identifier");if(null!==da.localScope&&void 0!==da.localScope[M])Ba=d.toNumber(da.localScope[M].value),da.localScope[M]={value:"++"===Z.operator?Ba+1:Ba-1,valueset:!0,node:Z},Da=!1===Z.prefix?Ba:"++"===Z.operator?Ba+1:Ba-1;else if(void 0!==da.globalScope[M])Ba=d.toNumber(da.globalScope[M].value),da.globalScope[M]={value:"++"===Z.operator?Ba+1:Ba-1,valueset:!0,node:Z},Da=!1===Z.prefix?Ba:"++"===Z.operator?Ba+1:Ba-1;else throw Error("Variable not recognised");
}return Da;case "BreakStatement":return d.breakResult;case "ContinueStatement":return d.continueResult;case "TemplateElement":return Z.value?Z.value.cooked:"";case "TemplateLiteral":var Ka="",Ia=0;xa=0;for(M=Z.quasis;xa<M.length;xa++)if(wa=M[xa],Ka+=wa.value?wa.value.cooked:"",!1===wa.tail){var Oa=Z.expressions[Ia]?d.toString(X(da,Z.expressions[Ia])):"";Ka+=Oa;Ia++}return Ka;case "ForStatement":null!==Z.init&&X(da,Z.init);Ia={testResult:!0,lastAction:d.voidOperation};do b:{M=da;wa=Z;Oa=Ia;if(null!==
wa.test){Oa.testResult=X(M,wa.test);if(!1===Oa.testResult)break b;if(!0!==Oa.testResult)throw Error(g.nodeErrorMessage(wa,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Oa.lastAction=X(M,wa.body);Oa.lastAction===d.breakResult?Oa.testResult=!1:Oa.lastAction instanceof d.ReturnResult?Oa.testResult=!1:null!==wa.update&&X(M,wa.update)}while(!0===Ia.testResult);Ka=Ia.lastAction instanceof d.ReturnResult?Ia.lastAction:d.voidOperation;return Ka;case "ForInStatement":return Y(da,Z);case "Identifier":return aa(da,
Z);case "MemberExpression":return Q(da,Z);case "Literal":return Z.value;case "CallExpression":return ja(da,Z);case "UnaryExpression":return ba(da,Z);case "BinaryExpression":return ca(da,Z);case "LogicalExpression":return ka(da,Z);case "ArrayExpression":try{for(M=[],wa=0;wa<Z.elements.length;wa++){var Ea=X(da,Z.elements[wa]);if(d.isFunctionParameter(Ea))throw Error(g.nodeErrorMessage(Z,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Ea===d.voidOperation?M.push(null):M.push(Ea)}}catch(Pa){throw Pa;}return M;case "ObjectExpression":M=
{};for(wa=0;wa<Z.properties.length;wa++){var La=X(da,Z.properties[wa]);if(d.isFunctionParameter(La.value))throw Error("Illegal Argument");if(!1===d.isString(La.key))throw Error("Illegal Argument");M[La.key.toString()]=La.value===d.voidOperation?null:La.value}var Ma=new e(M);Ma.immutable=!1;return Ma;case "Property":return{key:"Identifier"===Z.key.type?Z.key.name:X(da,Z.key),value:X(da,Z.value)};default:throw Error(g.nodeErrorMessage(Z,"RUNTIME","UNREOGNISED"));}}catch(Pa){throw Pa;}}function Y(da,
Z){var ma=X(da,Z.right);"VariableDeclaration"===Z.left.type&&X(da,Z.left);var I=null,M="";if("VariableDeclaration"===Z.left.type){var W=Z.left.declarations[0].id;"Identifier"===W.type&&(M=W.name)}else"Identifier"===Z.left.type&&(M=Z.left.name);if(!M)throw Error(g.nodeErrorMessage(Z,"RUNTIME","INVALIDVARIABLE"));M=M.toLowerCase();null!==da.localScope&&void 0!==da.localScope[M]&&(I=da.localScope[M]);null===I&&void 0!==da.globalScope[M]&&(I=da.globalScope[M]);if(null===I)throw Error(g.nodeErrorMessage(Z,
"RUNTIME","VARIABLENOTDECLARED"));if(d.isArray(ma)||d.isString(ma)){ma=ma.length;for(W=0;W<ma;W++){I.value=W;M=X(da,Z.body);if(M===d.breakResult)break;if(M instanceof d.ReturnResult)return M}return d.voidOperation}if(d.isImmutableArray(ma)){for(W=0;W<ma.length();W++){I.value=W;M=X(da,Z.body);if(M===d.breakResult)break;if(M instanceof d.ReturnResult)return M}return d.voidOperation}if(ma instanceof e||d.isFeature(ma))for(ma=ma.keys(),W=0;W<ma.length;W++){I.value=ma[W];M=X(da,Z.body);if(M===d.breakResult)break;
if(M instanceof d.ReturnResult)return M}else return d.voidOperation}function K(da,Z,ma,I){switch(Z){case "\x3d":return da===d.voidOperation?null:da;case "/\x3d":return d.toNumber(ma)/d.toNumber(da);case "*\x3d":return d.toNumber(ma)*d.toNumber(da);case "-\x3d":return d.toNumber(ma)-d.toNumber(da);case "+\x3d":return d.isString(ma)||d.isString(da)?d.toString(ma)+d.toString(da):d.toNumber(ma)+d.toNumber(da);case "%\x3d":return d.toNumber(ma)%d.toNumber(da);default:throw Error(g.nodeErrorMessage(I,"RUNTIME",
"OPERATORNOTRECOGNISED"));}}function P(da,Z,ma){Z=Z.toLowerCase();switch(Z){case "hasz":return da=da.hasZ,void 0===da?!1:da;case "hasm":return da=da.hasM,void 0===da?!1:da;case "spatialreference":return Z=da.spatialReference._arcadeCacheId,void 0===Z&&(ma=!0,Object.freeze&&Object.isFrozen(da.spatialReference)&&(ma=!1),ma&&(Ca++,Z=da.spatialReference._arcadeCacheId=Ca)),da=new e({wkt:da.spatialReference.wkt,wkid:da.spatialReference.wkid}),void 0!==Z&&(da._arcadeCacheId="SPREF"+Z.toString()),da}switch(da.type){case "extent":switch(Z){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return da=
da[Z],void 0!==da?da:null;case "type":return"Extent"}break;case "polygon":switch(Z){case "rings":return Z=da.getCacheValue("_arcadeCacheId"),void 0===Z&&(Ca++,Z=Ca,da.setCacheValue("_arcadeCacheId",Z)),da=new f(da.rings,da.spatialReference,!0===da.hasZ,!0===da.hasM,Z);case "type":return"Polygon"}break;case "point":switch(Z){case "x":case "y":case "z":case "m":return void 0!==da[Z]?da[Z]:null;case "type":return"Point"}break;case "polyline":switch(Z){case "paths":return Z=da.getCacheValue("_arcadeCacheId"),
void 0===Z&&(Ca++,Z=Ca,da.setCacheValue("_arcadeCacheId",Z)),da=new f(da.paths,da.spatialReference,!0===da.hasZ,!0===da.hasM,Z);case "type":return"Polyline"}break;case "multipoint":switch(Z){case "points":return Z=da.getCacheValue("_arcadeCacheId"),void 0===Z&&(Ca++,Z=Ca,da.setCacheValue("_arcadeCacheId",Z)),da=new c(da.points,da.spatialReference,!0===da.hasZ,!0===da.hasM,Z,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(ma,"RUNTIME","PROPERTYNOTFOUND"));}function Q(da,Z){try{var ma=
X(da,Z.object);if(null===ma)throw Error(g.nodeErrorMessage(Z,"RUNTIME","NOTFOUND"));if(!1===Z.computed){if("Identifier"===Z.property.type){if(ma instanceof e||d.isFeature(ma))return ma.field(Z.property.name);if(ma instanceof u)return P(ma,Z.property.name,Z)}throw Error(g.nodeErrorMessage(Z,"RUNTIME","INVALIDTYPE"));}var I=X(da,Z.property);if(ma instanceof e||d.isFeature(ma)){if(d.isString(I))return ma.field(I);throw Error(g.nodeErrorMessage(Z,"RUNTIME","INVALIDTYPE"));}if(ma instanceof u){if(d.isString(I))return P(ma,
I,Z);throw Error(g.nodeErrorMessage(Z,"RUNTIME","INVALIDTYPE"));}if(d.isArray(ma)){if(d.isNumber(I)&&isFinite(I)&&Math.floor(I)===I){0>I&&(I=ma.length+I);if(I>=ma.length||0>I)throw Error(g.nodeErrorMessage(Z,"RUNTIME","OUTOFBOUNDS"));return ma[I]}throw Error(g.nodeErrorMessage(Z,"RUNTIME","INVALIDTYPE"));}if(d.isString(ma)){if(d.isNumber(I)&&isFinite(I)&&Math.floor(I)===I){0>I&&(I=ma.length+I);if(I>=ma.length||0>I)throw Error(g.nodeErrorMessage(Z,"RUNTIME","OUTOFBOUNDS"));return ma[I]}throw Error(g.nodeErrorMessage(Z,
"RUNTIME","INVALIDTYPE"));}if(d.isImmutableArray(ma)&&d.isNumber(I)&&isFinite(I)&&Math.floor(I)===I){0>I&&(I=ma.length()+I);if(I>=ma.length()||0>I)throw Error(g.nodeErrorMessage(Z,"RUNTIME","OUTOFBOUNDS"));return ma.get(I)}throw Error(g.nodeErrorMessage(Z,"RUNTIME","INVALIDTYPE"));}catch(M){throw M;}}function ba(da,Z){try{var ma=X(da,Z.argument);if(d.isBoolean(ma)){if("!"===Z.operator)return!ma;if("-"===Z.operator)return-1*d.toNumber(ma);if("+"===Z.operator)return 1*d.toNumber(ma);if("~"===Z.operator)return~d.toNumber(ma);
throw Error(g.nodeErrorMessage(Z,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===Z.operator)return~d.toNumber(ma);if("-"===Z.operator)return-1*d.toNumber(ma);if("+"===Z.operator)return 1*d.toNumber(ma);throw Error(g.nodeErrorMessage(Z,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(I){throw I;}}function ca(da,Z){try{var ma=[X(da,Z.left),X(da,Z.right)],I=ma[0],M=ma[1];switch(Z.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return d.binaryOperator(d.toNumber(I),
d.toNumber(M),Z.operator);case "\x3d\x3d":return d.equalityTest(I,M);case "!\x3d":return!d.equalityTest(I,M);case "\x3c":return d.greaterThanLessThan(I,M,Z.operator);case "\x3e":return d.greaterThanLessThan(I,M,Z.operator);case "\x3c\x3d":return d.greaterThanLessThan(I,M,Z.operator);case "\x3e\x3d":return d.greaterThanLessThan(I,M,Z.operator);case "+":return d.isString(I)||d.isString(M)?d.toString(I)+d.toString(M):d.toNumber(I)+d.toNumber(M);case "-":return d.toNumber(I)-d.toNumber(M);case "*":return d.toNumber(I)*
d.toNumber(M);case "/":return d.toNumber(I)/d.toNumber(M);case "%":return d.toNumber(I)%d.toNumber(M);default:throw Error(g.nodeErrorMessage(Z,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(W){throw W;}}function ka(da,Z){try{if("AssignmentExpression"===Z.left.type||"UpdateExpression"===Z.left.type)throw Error(g.nodeErrorMessage(Z.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===Z.right.type||"UpdateExpression"===Z.right.type)throw Error(g.nodeErrorMessage(Z.right,"RUNTIME",
"CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ma=X(da,Z.left);if(d.isBoolean(ma))switch(Z.operator){case "||":if(!0===ma)return ma;var I=X(da,Z.right);if(d.isBoolean(I))return I;throw Error(g.nodeErrorMessage(Z,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===ma)return ma;I=X(da,Z.right);if(d.isBoolean(I))return I;throw Error(g.nodeErrorMessage(Z,"RUNTIME","ONLYORORAND"));default:throw Error(g.nodeErrorMessage(Z,"RUNTIME","ONLYORORAND"));}throw Error(g.nodeErrorMessage(Z,"RUNTIME","ONLYBOOLEAN"));}catch(M){throw M;
}}function aa(da,Z){try{var ma=Z.name.toLowerCase();if(null!==da.localScope&&void 0!==da.localScope[ma]){var I=da.localScope[ma];if(!0===I.valueset)return I.value;I.value=X(da,I.node);I.valueset=!0;return I.value}if(void 0!==da.globalScope[ma]){I=da.globalScope[ma];if(!0===I.valueset)return I.value;I.value=X(da,I.node);I.valueset=!0;return I.value}throw Error(g.nodeErrorMessage(Z,"RUNTIME","VARIABLENOTFOUND"));}catch(M){throw M;}}function ja(da,Z){try{if("Identifier"!==Z.callee.type)throw Error(g.nodeErrorMessage(Z,
"RUNTIME","ONLYNODESSUPPORTED"));if(null!==da.localScope&&void 0!==da.localScope[Z.callee.name.toLowerCase()]){var ma=da.localScope[Z.callee.name.toLowerCase()];if(ma.value instanceof d.NativeFunction)return ma.value.fn(da,Z);if(ma.value instanceof h)return ra(da,Z,ma.value.definition);throw Error(g.nodeErrorMessage(Z,"RUNTIME","NOTAFUNCTION"));}if(void 0!==da.globalScope[Z.callee.name.toLowerCase()]){ma=da.globalScope[Z.callee.name.toLowerCase()];if(ma.value instanceof d.NativeFunction)return ma.value.fn(da,
Z);if(ma.value instanceof h)return ra(da,Z,ma.value.definition);throw Error(g.nodeErrorMessage(Z,"RUNTIME","NOTAFUNCTION"));}throw Error(g.nodeErrorMessage(Z,"RUNTIME","NOTFOUND"));}catch(I){throw I;}}function oa(da){return null==da?"":d.isArray(da)||d.isImmutableArray(da)?"Array":d.isDate(da)?"Date":d.isString(da)?"String":d.isBoolean(da)?"Boolean":d.isNumber(da)?"Number":da instanceof a?"Attachment":da instanceof m?"Portal":da instanceof e?"Dictionary":d.isFeature(da)?"Feature":da instanceof x?
"Point":da instanceof A?"Polygon":da instanceof E?"Polyline":da instanceof B?"Multipoint":da instanceof y?"Extent":d.isFunctionParameter(da)?"Function":d.isFeatureSet(da)?"FeatureSet":d.isFeatureSetCollection(da)?"FeatureSetCollection":da===d.voidOperation?"":"number"===typeof da&&isNaN(da)?"Number":"Unrecognised Type"}function U(da,Z,ma,I){try{var M=X(da,Z.arguments[ma]);if(d.equalityTest(M,I))return X(da,Z.arguments[ma+1]);var W=Z.arguments.length-ma;return 1===W?X(da,Z.arguments[ma]):2===W?null:
3===W?X(da,Z.arguments[ma+2]):U(da,Z,ma+2,I)}catch(H){throw H;}}function ea(da,Z,ma,I){try{if(!0===I)return X(da,Z.arguments[ma+1]);if(3===Z.arguments.length-ma)return X(da,Z.arguments[ma+2]);var M=X(da,Z.arguments[ma+2]);if(!1===d.isBoolean(M))throw Error("WHEN needs boolean test conditions");return ea(da,Z,ma+2,M)}catch(W){throw W;}}function fa(da,Z){var ma=da.length,I=Math.floor(ma/2);if(0===ma)return[];if(1===ma)return[da[0]];var M=fa(da.slice(0,I),Z);ma=fa(da.slice(I,ma),Z);for(I=[];0<M.length||
0<ma.length;)if(0<M.length&&0<ma.length){var W=Z(M[0],ma[0]);isNaN(W)&&(W=0);0>=W?(I.push(M[0]),M=M.slice(1)):(I.push(ma[0]),ma=ma.slice(1))}else 0<M.length?(I.push(M[0]),M=M.slice(1)):0<ma.length&&(I.push(ma[0]),ma=ma.slice(1));return I}function pa(da,Z,ma){try{var I=da.body;if(ma.length!==da.params.length)throw Error("Invalid Parameter calls to function.");for(var M=0;M<ma.length;M++)Z.localScope[da.params[M].name.toLowerCase()]={value:ma[M],valueset:!0,node:null};var W=X(Z,I);if(W instanceof d.ReturnResult)return W.value;
if(W===d.breakResult)throw Error("Cannot Break from a Function");if(W===d.continueResult)throw Error("Cannot Continue from a Function");return W instanceof d.ImplicitResult?W.value:W}catch(H){throw H;}}function ra(da,Z,ma){return S(da,Z,function(I,M,W){I={spatialReference:da.spatialReference,globalScope:da.globalScope,depthCounter:da.depthCounter+1,console:da.console,lrucache:da.lrucache,interceptor:da.interceptor,localScope:{}};if(64<I.depthCounter)throw Error("Exceeded maximum function depth");
return pa(ma,I,W)})}function va(da){return function(){var Z={spatialReference:da.context.spatialReference,console:da.context.console,lrucache:da.context.lrucache,interceptor:da.context.interceptor,localScope:{},depthCounter:da.context.depthCounter+1,globalScope:da.context.globalScope};if(64<Z.depthCounter)throw Error("Exceeded maximum function depth");return pa(da.definition,Z,arguments)}}function Fa(da){}function Ha(da){for(var Z={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:S,
evaluateIdentifier:aa,arcadeCustomFunctionHandler:va},ma=0;ma<da.length;ma++)da[ma].registerFunctions(Z);for(var I in Z.functions)T[I]={value:new d.NativeFunction(Z.functions[I]),valueset:!0,node:null},qa.prototype[I]=T[I];for(ma=0;ma<Z.signatures.length;ma++)g.addFunctionDeclaration(Z.signatures[ma],"async")}Object.defineProperty(l,"__esModule",{value:!0});l.findFunctionCalls=l.referencesFunction=l.referencesMember=l.validateScript=l.extractExpectedFieldLiterals=l.extractFieldLiterals=l.executeScript=
l.extend=l.functionHelper=void 0;var Ca=0,T={};r.registerFunctions(T,S);D.registerFunctions(T,S);z.registerFunctions(T,S);w.registerFunctions(T,S);C.registerFunctions(T,S);v.registerFunctions(T,S);T["typeof"]=function(da,Z){return S(da,Z,function(ma,I,M){d.pcCheck(M,1,1);ma=oa(M[0]);if("Unrecognised Type"===ma)throw Error("Unrecognised Type");return ma})};T.iif=function(da,Z){try{d.pcCheck(null===Z.arguments?[]:Z.arguments,3,3);var ma=X(da,Z.arguments[0]);if(!1===d.isBoolean(ma))throw Error("IF Function must have a boolean test condition");
var I=X(da,Z.arguments[1]),M=X(da,Z.arguments[2]);return!0===ma?I:M}catch(W){throw W;}};T.decode=function(da,Z){try{if(2>Z.arguments.length)throw Error("Missing Parameters");if(2===Z.arguments.length)return X(da,Z.arguments[1]);if(0===(Z.arguments.length-1)%2)throw Error("Must have a default value result.");var ma=X(da,Z.arguments[0]);return U(da,Z,1,ma)}catch(I){throw I;}};T.when=function(da,Z){try{if(3>Z.arguments.length)throw Error("Missing Parameters");if(0===Z.arguments.length%2)throw Error("Must have a default value result.");
var ma=X(da,Z.arguments[0]);if(!1===d.isBoolean(ma))throw Error("WHEN needs boolean test conditions");return ea(da,Z,0,ma)}catch(I){throw I;}};T.top=function(da,Z){return S(da,Z,function(ma,I,M){d.pcCheck(M,2,2);if(d.isArray(M[0]))return d.toNumber(M[1])>=M[0].length?M[0].slice(0):M[0].slice(0,d.toNumber(M[1]));if(d.isImmutableArray(M[0]))return d.toNumber(M[1])>=M[0].length()?M[0].slice(0):M[0].slice(0,d.toNumber(M[1]));throw Error("Top cannot accept this parameter type");})};T.first=function(da,
Z){return S(da,Z,function(ma,I,M){d.pcCheck(M,1,1);return d.isArray(M[0])?0===M[0].length?null:M[0][0]:d.isImmutableArray(M[0])?0===M[0].length()?null:M[0].get(0):null})};T.sort=function(da,Z){return S(da,Z,function(ma,I,M){d.pcCheck(M,1,2);ma=M[0];d.isImmutableArray(ma)&&(ma=ma.toArray());if(!1===d.isArray(ma))throw Error("Illegal Argument");if(1<M.length){if(!1===d.isFunctionParameter(M[1]))throw Error("Illegal Argument");var W=va(M[1]);return ma=fa(ma,function(sa,la){return W(sa,la)})}if(0===ma.length)return[];
M={};for(I=0;I<ma.length;I++){var H=oa(ma[I]);""!==H&&(M[H]=!0)}if(!0===M.Array||!0===M.Dictionary||!0===M.Feature||!0===M.Point||!0===M.Polygon||!0===M.Polyline||!0===M.Multipoint||!0===M.Extent||!0===M.Function)return ma.slice(0);I=0;H="";for(var na in M)I++,H=na;return ma=1<I||"String"===H?fa(ma,function(sa,la){if(null===sa||void 0===sa||sa===d.voidOperation)return null===la||void 0===la||la===d.voidOperation?0:1;if(null===la||void 0===la||la===d.voidOperation)return-1;var Na=d.toString(sa),Ra=
d.toString(la);return Na<Ra?-1:Na===Ra?0:1}):"Number"===H?fa(ma,function(sa,la){return sa-la}):"Boolean"===H?fa(ma,function(sa,la){return sa===la?0:la?-1:1}):"Date"===H?fa(ma,function(sa,la){return la-sa}):ma.slice(0)})};for(var ia in T)T[ia]={value:new d.NativeFunction(T[ia]),valueset:!0,node:null};var qa=function(){};qa.prototype=T;qa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};qa.prototype.pi={value:Math.PI,valueset:!0,node:null};l.functionHelper={fixSpatialReference:d.fixSpatialReference,
parseArguments:O,standardFunction:S};l.extend=Ha;Ha([t]);l.executeScript=function(da,Z){var ma=Z.spatialReference;if(null===ma||void 0===ma)ma=new J({wkid:102100});var I=Z.vars,M=Z.customfunctions,W=new qa;I||(I={});M||(M={});var H=new e({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});H.immutable=!1;W.textformatting={value:H,valueset:!0,node:null};for(var na in M)W[na]={value:new d.NativeFunction(M[na]),"native":!0,valueset:!0,node:null};for(na in I)W[na]=
I[na]&&"esri.Graphic"===I[na].declaredClass?{value:k.createFromGraphic(I[na]),valueset:!0,node:null}:{value:I[na],valueset:!0,node:null};ma=X({spatialReference:ma,globalScope:W,localScope:null,console:Z.console?Z.console:Fa,lrucache:Z.lrucache,interceptor:Z.interceptor,depthCounter:1},da.body[0].body);ma instanceof d.ReturnResult&&(ma=ma.value);ma instanceof d.ImplicitResult&&(ma=ma.value);ma===d.voidOperation&&(ma=null);if(ma===d.breakResult)throw Error("Cannot return BREAK");if(ma===d.continueResult)throw Error("Cannot return CONTINUE");
if(ma instanceof h)throw Error("Cannot return FUNCTION");if(ma instanceof d.NativeFunction)throw Error("Cannot return FUNCTION");return ma};l.extractFieldLiterals=function(da,Z){void 0===Z&&(Z=!1);return g.findFieldLiterals(da)};l.extractExpectedFieldLiterals=function(da){return g.findExpectedFieldLiterals(da)};l.validateScript=function(da,Z){return g.validateScript(da,Z,"simple")};l.referencesMember=function(da,Z){return g.referencesMember(da,Z)};l.referencesFunction=function(da,Z){return g.referencesFunction(da,
Z)};l.findFunctionCalls=function(da){return g.findFunctionCalls(da)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/arcade-parser"],function(F,l,b,q){Object.defineProperty(l,"__esModule",{value:!0});l.referencesFunction=l.referencesMember=l.extractExpectedFieldLiterals=l.validateScript=l.extractFieldLiterals=l.scriptCheck=l.parseScript=void 0;l.parseScript=function(n,p){void 0===p&&(p=[]);var m=q.parse("function _() { "+n+"\n}");if(null===m.body||void 0===m.body)throw Error("No formula provided.");
if(0===m.body.length)throw Error("No formula provided.");if(0===m.body.length)throw Error("No formula provided.");if("BlockStatement"!==m.body[0].body.type)throw Error("Invalid formula content.");var a=b.validateLanguage(m);if(""!==a)throw Error(a);b.findScriptDependencies(m,p);return m};l.scriptCheck=function(n,p,m,a,e){var k=[];n="function _() { \n"+n+"\n}";try{var h=q.parse(n,{tolerant:!0,loc:!0,range:!0}),f=h.errors;if(0<f.length)for(var c=0;c<f.length;c++)k.push({line:f[c].lineNumber-2,character:f[c].column,
reason:f[c].description});var d=b.checkScript(h,p,m,a,e);for(p=0;p<d.length;p++)d[p].line-=2,d[p].range&&(d[p].range=[d[p][0]-15,d[p][1]-15]),d[p].loc&&(d[p].loc.start.line-=2,d[p].loc.end.line-=2),k.push(d[p])}catch(t){try{if("Unexpected token }"===t.description){var g=n.split("\n").length;t.lineNumber===g?(t.index=n.length-1,k.push({line:t.lineNumber-4,character:t.column,reason:"Unexpected end of script"})):(t.index=n.length-1,k.push({line:t.lineNumber-2,character:t.column,reason:"Unexpected end of script"}))}else k.push({line:t.lineNumber-
2,character:t.column,reason:t.description})}catch(r){}}return k};l.extractFieldLiterals=function(n,p){void 0===p&&(p=!1);return b.findFieldLiterals(n)};l.validateScript=function(n,p,m){return b.validateScript(n,p,m)};l.extractExpectedFieldLiterals=function(n){return b.findExpectedFieldLiterals(n)};l.referencesMember=function(n,p){return b.referencesMember(n,p)};l.referencesFunction=function(n,p){return b.referencesFunction(n,p)}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),
function(F,l,b,q,n,p,m,a,e){Object.defineProperty(l,"__esModule",{value:!0});l.version=l.Syntax=l.tokenize=l.parse=void 0;l.parse=function(k,h,f){var c=null,d=function(w,v){f&&f(w,v);c&&c.visit(w,v)},g="function"===typeof f?d:void 0,t=!1;if(h){t="boolean"===typeof h.comment&&h.comment;var r="boolean"===typeof h.attachComment&&h.attachComment;if(t||r)c=new q.CommentHandler,c.attach=r,h.comment=!0,g=d}k=new n.Parser(k,h,g);h=k.parseScript();t&&c&&(h.comments=c.comments);k.config.tokens&&(h.tokens=k.tokens);
k.config.tolerant&&(h.errors=k.errorHandler.errors);return h};l.tokenize=function(k,h,f){k=new p.Tokenizer(k,h);h=[];var c=void 0;try{for(;;){var d=k.getNextToken();if(!d)break;f&&(d=f(d));h.push(d)}}catch(g){k.errorHandler.tolerate(g)}k.errorHandler.tolerant&&(c=k.errors());return{tokens:h,errors:c}};Object.defineProperty(l,"Syntax",{enumerable:!0,get:function(){return m.Syntax}});b(a,l);b(e,l);l.version="4.0.0-dev"})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var F=
this&&this.__createBinding||(Object.create?function(l,b,q,n){void 0===n&&(n=q);Object.defineProperty(l,n,{enumerable:!0,get:function(){return b[q]}})}:function(l,b,q,n){void 0===n&&(n=q);l[n]=b[q]});return function(l,b){for(var q in l)"default"===q||Object.prototype.hasOwnProperty.call(b,q)||F(b,l,q)}}()})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(F,l,b){Object.defineProperty(l,"__esModule",{value:!0});l.CommentHandler=void 0;F=function(){function q(){this.attach=
!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}q.prototype.insertInnerComments=function(n,p){if(n.type===b.Syntax.BlockStatement&&0===n.body.length){for(var m=[],a=this.leading.length-1;0<=a;--a){var e=this.leading[a];p.end.offset>=e.start&&(m.unshift(e.comment),this.leading.splice(a,1),this.trailing.splice(a,1))}m.length&&(n.innerComments=m)}};q.prototype.findTrailingComments=function(n){var p=[];if(0<this.trailing.length){for(var m=this.trailing.length-1;0<=m;--m){var a=this.trailing[m];
a.start>=n.end.offset&&p.unshift(a.comment)}this.trailing.length=0;return p}(m=this.stack[this.stack.length-1])&&m.node.trailingComments&&(a=m.node.trailingComments[0])&&a.range[0]>=n.end.offset&&(p=m.node.trailingComments,delete m.node.trailingComments);return p};q.prototype.findLeadingComments=function(n){for(var p=[],m;0<this.stack.length;){var a=this.stack[this.stack.length-1];if(a&&a.start>=n.start.offset)m=a.node,this.stack.pop();else break}if(m){for(var e=(m.leadingComments?m.leadingComments.length:
0)-1;0<=e;--e)a=m.leadingComments[e],a.range[1]<=n.start.offset&&(p.unshift(a),m.leadingComments.splice(e,1));m.leadingComments&&0===m.leadingComments.length&&delete m.leadingComments;return p}for(e=this.leading.length-1;0<=e;--e)a=this.leading[e],a.start<=n.start.offset&&(p.unshift(a.comment),this.leading.splice(e,1));return p};q.prototype.visitNode=function(n,p){if(!(n.type===b.Syntax.Program&&0<n.body.length)){this.insertInnerComments(n,p);var m=this.findTrailingComments(p),a=this.findLeadingComments(p);
0<a.length&&(n.leadingComments=a);0<m.length&&(n.trailingComments=m);this.stack.push({node:n,start:p.start.offset})}};q.prototype.visitComment=function(n,p){this.comments.push(n);if(this.attach){var m={comment:{type:n.type,value:n.value,range:[p.start.offset,p.end.offset]},start:p.start.offset};n.loc&&(m.comment.loc=n.loc);this.leading.push(m);this.trailing.push(m)}};q.prototype.visit=function(n,p){"Line"===n.type||"Block"===n.type?this.visitComment(n,p):this.attach&&this.visitNode(n,p)};return q}();
l.CommentHandler=F})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(F,l){Object.defineProperty(l,"__esModule",{value:!0});l.Syntax=void 0;l.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",
ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",
VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(F,l,b,q,n,p,m,a,e,k,h,f){Object.defineProperty(l,"__esModule",{value:!0});l.Parser=void 0;F=function(){function c(d,g,t){void 0===g&&(g={});this.config={range:"boolean"===
typeof g.range&&g.range,loc:"boolean"===typeof g.loc&&g.loc,source:null,tokens:"boolean"===typeof g.tokens&&g.tokens,comment:"boolean"===typeof g.comment&&g.comment,tolerant:"boolean"===typeof g.tolerant&&g.tolerant,globalReturn:!!g.globalReturn};this.config.loc&&g.source&&null!==g.source&&(this.config.source=String(g.source));this.delegate=t;this.errorHandler=new m.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new k.Scanner(d,this.errorHandler);this.scanner.trackComment=
this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:f.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,
isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}c.prototype.tolerateError=function(d){for(var g=[],t=1;t<arguments.length;t++)g[t-1]=arguments[t];var r=g.slice();g=d.replace(/%(\d)/g,function(w,
v){p.assert(v<r.length,"Message reference must be in range");return r[v]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,g)};c.prototype.unexpectedTokenError=function(d,g){var t=g||a.Messages.UnexpectedToken;if(d){g||(t=d.type===f.TokenType.EOF?a.Messages.UnexpectedEOS:d.type===f.TokenType.Identifier?a.Messages.UnexpectedIdentifier:d.type===f.TokenType.NumericLiteral?a.Messages.UnexpectedNumber:d.type===f.TokenType.StringLiteral?a.Messages.UnexpectedString:
d.type===f.TokenType.Template?a.Messages.UnexpectedTemplate:a.Messages.UnexpectedToken);var r=d.value.toString()}else r="ILLEGAL";t=t.replace("%0",r);return d&&"number"===typeof d.lineNumber?this.errorHandler.createError(d.start,d.lineNumber,d.start-(this.lastMarker.index-this.lastMarker.column)+1,t):this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,t)};c.prototype.throwUnexpectedToken=function(d,g){throw this.unexpectedTokenError(d,g);};c.prototype.tolerateUnexpectedToken=
function(d,g){this.errorHandler.tolerate(this.unexpectedTokenError(d,g))};c.prototype.collectComments=function(){if(this.config.comment){var d=this.scanner.scanComments();if(d&&0<d.length&&this.delegate)for(var g=0;g<d.length;++g){var t=d[g],r=new e.Comment(t.multiLine?"Block":"Line",this.scanner.source.slice(t.slice[0],t.slice[1]));this.config.range&&(r.range=t.range);this.config.loc&&(r.loc=t.loc);this.delegate(r,{start:{line:t.loc.start.line,column:t.loc.start.column,offset:t.range[0]},end:{line:t.loc.end.line,
column:t.loc.end.column,offset:t.range[1]}})}}else this.scanner.scanComments()};c.prototype.peekAhead=function(d){var g=this,t=this.scanner.saveState();d.call(this,function(){g.scanner.scanComments();return g.scanner.lex()});this.scanner.restoreState(t)};c.prototype.getTokenRaw=function(d){return this.scanner.source.slice(d.start,d.end)};c.prototype.convertToken=function(d){var g={type:f.TokenName[d.type],value:this.getTokenRaw(d)};this.config.range&&(g.range=[d.start,d.end]);this.config.loc&&(g.loc=
{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});d.type===f.TokenType.RegularExpression&&(g.regex={pattern:d.pattern,flags:d.flags});return g};c.prototype.nextToken=function(){var d=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&
(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var g=this.scanner.lex();this.hasLineTerminator=d.lineNumber!==g.lineNumber;this.lookahead=g;this.config.tokens&&g.type!==f.TokenType.EOF&&this.tokens.push(this.convertToken(g));return d};c.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};c.prototype.startNode=function(d,
g){void 0===g&&(g=0);var t=d.start-d.lineStart,r=d.lineNumber;0>t&&(t+=g,r--);return{index:d.start,line:r,column:t}};c.prototype.finalize=function(d,g){this.config.range&&(g.range=[d.index,this.lastMarker.index]);this.config.loc&&(g.loc={start:{line:d.line,column:d.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(g.loc.source=this.config.source));this.delegate&&this.delegate(g,{start:{line:d.line,column:d.column,offset:d.index},end:{line:this.lastMarker.line,
column:this.lastMarker.column,offset:this.lastMarker.index}});return g};c.prototype.expect=function(d){var g=this.nextToken();g.type===f.TokenType.Punctuator&&g.value===d||this.throwUnexpectedToken(g)};c.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var d=this.lookahead;d.type===f.TokenType.Punctuator&&","===d.value?this.nextToken():d.type===f.TokenType.Punctuator&&";"===d.value?(this.nextToken(),this.tolerateUnexpectedToken(d)):this.tolerateUnexpectedToken(d,a.Messages.UnexpectedToken)}else this.expect(",")};
c.prototype.expectKeyword=function(d){var g=this.nextToken();g.type===f.TokenType.Keyword&&g.value.toString().toLowerCase()===d.toLowerCase()||this.throwUnexpectedToken(g)};c.prototype.match=function(d){return this.lookahead.type===f.TokenType.Punctuator&&this.lookahead.value===d};c.prototype.matchKeyword=function(d){return this.lookahead.type===f.TokenType.Keyword&&this.lookahead.value.toLowerCase()===d.toLowerCase()};c.prototype.matchContextualKeyword=function(d){return this.lookahead.type===f.TokenType.Identifier&&
this.lookahead.value===d};c.prototype.matchAssign=function(){return this.lookahead.type!==f.TokenType.Punctuator?!1:e.AssignmentOperators.includes(this.lookahead.value)};c.prototype.isolateCoverGrammar=function(d){var g=this.context.isBindingElement,t=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;d=d.call(this);null!==this.context.firstCoverInitializedNameError&&
this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=g;this.context.isAssignmentTarget=t;this.context.firstCoverInitializedNameError=r;return d};c.prototype.inheritCoverGrammar=function(d){var g=this.context.isBindingElement,t=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;d=d.call(this);this.context.isBindingElement=
this.context.isBindingElement&&g;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&t;this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError;return d};c.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===f.TokenType.EOF||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=
this.startMarker.column)};c.prototype.parsePrimaryExpression=function(){var d=this.createNode();switch(this.lookahead.type){case f.TokenType.Identifier:d=this.finalize(d,new e.Identifier(this.nextToken().value));break;case f.TokenType.NumericLiteral:case f.TokenType.StringLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var g=this.nextToken();var t=this.getTokenRaw(g);d=this.finalize(d,new e.Literal(g.value,t));break;case f.TokenType.BooleanLiteral:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;g=this.nextToken();t=this.getTokenRaw(g);d=this.finalize(d,new e.Literal("true"===g.value.toString().toLowerCase(),t));break;case f.TokenType.NullLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;g=this.nextToken();t=this.getTokenRaw(g);d=this.finalize(d,new e.Literal(null,t));break;case f.TokenType.Template:d=this.parseTemplateLiteral();break;case f.TokenType.Punctuator:switch(this.lookahead.value){case "(":this.context.isBindingElement=
!1;d=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":d=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":d=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:d=this.throwUnexpectedToken(this.nextToken())}break;case f.TokenType.Keyword:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;d=this.throwUnexpectedToken(this.nextToken());break;default:d=this.throwUnexpectedToken(this.nextToken())}return d};c.prototype.parseArrayInitializer=
function(){var d=this.createNode(),g=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),g.push(null)):(g.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(d,new e.ArrayExpression(g))};c.prototype.parseObjectPropertyKey=function(){var d=this.createNode(),g=this.nextToken();switch(g.type){case f.TokenType.StringLiteral:case f.TokenType.NumericLiteral:d=this.finalize(d,new e.Literal(g.value,
this.getTokenRaw(g)));break;case f.TokenType.Identifier:case f.TokenType.BooleanLiteral:case f.TokenType.NullLiteral:case f.TokenType.Keyword:d=this.finalize(d,new e.Identifier(g.value));break;default:d=this.throwUnexpectedToken(g)}return d};c.prototype.parseObjectProperty=function(){var d=this.createNode(),g=this.lookahead,t=!1,r=!1,w=null;if(g.type===f.TokenType.Identifier){var v=g.value;this.nextToken();t=this.match("[");w=this.finalize(d,new e.Identifier(v))}else this.match("*")?this.nextToken():
(t=this.match("["),w=this.parseObjectPropertyKey());w||this.throwUnexpectedToken(this.lookahead);v=null;this.match(":")?(this.nextToken(),v=this.inheritCoverGrammar(this.parseAssignmentExpression)):g.type===f.TokenType.Identifier?(v=this.finalize(d,new e.Identifier(g.value)),r=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(d,new e.Property("init",w,t,v,!1,r))};c.prototype.parseObjectInitializer=function(){var d=this.createNode();this.expect("{");for(var g=[];!this.match("}");)g.push(this.parseObjectProperty()),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(d,new e.ObjectExpression(g))};c.prototype.parseTemplateHead=function(){p.assert(this.lookahead.head,"Template literal must start with a template head");var d=this.createNode(),g=this.nextToken();return this.finalize(d,new e.TemplateElement({raw:g.value,cooked:g.cooked},g.tail))};c.prototype.parseTemplateElement=function(){this.lookahead.type!==f.TokenType.Template&&this.throwUnexpectedToken();var d=this.createNode(),
g=this.nextToken();return this.finalize(d,new e.TemplateElement({raw:g.value,cooked:g.cooked},g.tail))};c.prototype.parseTemplateLiteral=function(){var d=this.createNode(),g=[],t=[],r=this.parseTemplateHead();for(t.push(r);!r.tail;)g.push(this.parseExpression()),r=this.parseTemplateElement(),t.push(r);return this.finalize(d,new e.TemplateLiteral(t,g))};c.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var d=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.expect(")");this.context.isBindingElement=!1;return d};c.prototype.parseArguments=function(){this.expect("(");var d=[];if(!this.match(")"))for(;;){var g=this.isolateCoverGrammar(this.parseAssignmentExpression);d.push(g);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return d};c.prototype.isIdentifierName=function(d){return d.type===f.TokenType.Identifier||d.type===f.TokenType.Keyword||d.type===f.TokenType.BooleanLiteral||d.type===f.TokenType.NullLiteral};
c.prototype.parseIdentifierName=function(){var d=this.createNode(),g=this.nextToken();this.isIdentifierName(g)||this.throwUnexpectedToken(g);return this.finalize(d,new e.Identifier(g.value))};c.prototype.parseLeftHandSideExpressionAllowCall=function(){var d=this.lookahead,g=this.context.allowIn;this.context.allowIn=!0;for(var t=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!1;var r=this.parseArguments();
t=this.finalize(this.startNode(d),new e.CallExpression(t,r))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),r=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),t=this.finalize(this.startNode(d),new e.ComputedMemberExpression(t,r));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),r=this.parseIdentifierName(),t=this.finalize(this.startNode(d),new e.StaticMemberExpression(t,
r));else break;this.context.allowIn=g;return t};c.prototype.parseLeftHandSideExpression=function(){p.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var d=this.startNode(this.lookahead),g=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var t=this.isolateCoverGrammar(this.parseExpression);this.expect("]");g=this.finalize(d,new e.ComputedMemberExpression(g,
t))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),t=this.parseIdentifierName(),g=this.finalize(d,new e.StaticMemberExpression(g,t));else break;return g};c.prototype.parseUpdateExpression=function(){var d=this.lookahead;if(this.match("++")||this.match("--")){d=this.startNode(d);var g=this.nextToken();var t=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment);
t=this.finalize(d,new e.UpdateExpression(g.value,t,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else t=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||this.lookahead.type!==f.TokenType.Punctuator||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,g=this.nextToken().value,t=this.finalize(this.startNode(d),
new e.UpdateExpression(g,t,!1)));return t};c.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var d=this.startNode(this.lookahead),g=this.nextToken();var t=this.inheritCoverGrammar(this.parseUnaryExpression);t=this.finalize(d,new e.UnaryExpression(g.value,t));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else t=this.parseUpdateExpression();return t};c.prototype.binaryPrecedence=function(d){var g=d.value;return d.type===
f.TokenType.Punctuator?this.operatorPrecedence[g]||0:d.type===f.TokenType.Keyword?this.context.allowIn&&"in"===g?12:0:0};c.prototype.parseBinaryExpression=function(){var d=this.lookahead,g=this.inheritCoverGrammar(this.parseUnaryExpression),t=this.lookahead,r=this.binaryPrecedence(t);if(0<r){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;d=[d,this.lookahead];var w=this.inheritCoverGrammar(this.parseUnaryExpression);t=[g,t.value,w];for(var v=[r];;){r=this.binaryPrecedence(this.lookahead);
if(0>=r)break;for(;2<t.length&&r<=v[v.length-1];){w=t.pop();var z=t.pop();v.pop();g=t.pop();d.pop();var C=d[d.length-1],D=this.startNode(C,C.lineStart);t.push(this.finalize(D,new e.BinaryExpression(z,g,w)))}t.push(this.nextToken().value);v.push(r);d.push(this.lookahead);t.push(this.inheritCoverGrammar(this.parseUnaryExpression))}r=t.length-1;g=t[r];for(z=d.pop();1<r;){C=d.pop();if(!C)break;D=this.startNode(C,z&&z.lineStart);z=t[r-1];g=this.finalize(D,new e.BinaryExpression(z,t[r-2],g));r-=2;z=C}}return g};
c.prototype.parseAssignmentExpression=function(){var d=this.lookahead,g=d,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);g=this.nextToken();g=g.value;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(d),new e.AssignmentExpression(g,t,r));this.context.firstCoverInitializedNameError=
null}return t};c.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};c.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(this.lookahead.type===f.TokenType.Keyword)switch(this.lookahead.value){case "function":var d=this.parseFunctionDeclaration();break;default:d=this.parseStatement()}else d=this.parseStatement();return d};c.prototype.parseBlock=function(){var d=this.createNode();this.expect("{");
for(var g=[];!this.match("}");)g.push(this.parseStatementListItem());this.expect("}");return this.finalize(d,new e.BlockStatement(g))};c.prototype.parseObjectStatement=function(){var d=this.createNode(),g=this.parseObjectInitializer();return this.finalize(d,new e.ExpressionStatement(g))};c.prototype.parseBlockOrObjectStatement=function(){var d="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(g){var t=g();if(t.type===f.TokenType.Identifier||
t.type===f.TokenType.StringLiteral)t=g(),t.type===f.TokenType.Punctuator&&":"===t.value&&(d=!0)});return d?this.parseObjectStatement():this.parseBlock()};c.prototype.parseVariableIdentifier=function(){var d=this.createNode(),g=this.nextToken();g.type!==f.TokenType.Identifier&&this.throwUnexpectedToken(g,a.Messages.IdentiferExpected);return this.finalize(d,new e.Identifier(g.value))};c.prototype.parseVariableDeclaration=function(d){var g=this.createNode(),t=this.parseVariableIdentifier(),r=null;this.match("\x3d")?
(this.nextToken(),r=this.isolateCoverGrammar(this.parseAssignmentExpression)):t.type===h.Syntax.Identifier||d.inFor||this.expect("\x3d");return this.finalize(g,new e.VariableDeclarator(t,r))};c.prototype.parseVariableDeclarationList=function(d){for(var g=[this.parseVariableDeclaration(d)];this.match(",");)this.nextToken(),g.push(this.parseVariableDeclaration(d));return g};c.prototype.parseVariableStatement=function(){var d=this.createNode();this.expectKeyword("var");var g=this.parseVariableDeclarationList({inFor:!1});
this.consumeSemicolon();return this.finalize(d,new e.VariableDeclaration(g,"var"))};c.prototype.parseEmptyStatement=function(){var d=this.createNode();this.expect(";");return this.finalize(d,new e.EmptyStatement)};c.prototype.parseExpressionStatement=function(){var d=this.createNode(),g=this.parseExpression();this.consumeSemicolon();return this.finalize(d,new e.ExpressionStatement(g))};c.prototype.parseIfClause=function(){var d=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";
var g=this.parseStatement();this.context.curlyParsing=d;return g};c.prototype.parseIfStatement=function(){var d=this.createNode(),g=null;this.expectKeyword("if");this.expect("(");var t=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var r=this.finalize(this.createNode(),new e.EmptyStatement)}else this.expect(")"),r=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),g=this.parseIfClause());return this.finalize(d,new e.IfStatement(t,
r,g))};c.prototype.parseForStatement=function(){var d=null,g=null,t=null,r=null,w=null,v=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var z=this.createNode();this.nextToken();var C=this.context.allowIn;this.context.allowIn=!1;var D=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=C;1===D.length&&this.matchKeyword("in")?(D[0].init&&this.tolerateError(a.Messages.ForInOfLoopInitializer,"for-in"),r=
this.finalize(z,new e.VariableDeclaration(D,"var")),this.nextToken(),w=this.parseExpression()):(d=this.finalize(z,new e.VariableDeclaration(D,"var")),this.expect(";"))}else{z=this.context.isBindingElement;D=this.context.isAssignmentTarget;var y=this.context.firstCoverInitializedNameError;C=this.context.allowIn;this.context.allowIn=!1;d=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=C;this.matchKeyword("in")?(this.context.isAssignmentTarget&&d.type!==h.Syntax.AssignmentExpression||
this.tolerateError(a.Messages.InvalidLHSInForIn),this.nextToken(),r=d,w=this.parseExpression(),d=null):(this.context.isBindingElement=z,this.context.isAssignmentTarget=D,this.context.firstCoverInitializedNameError=y,this.expect(";"))}r||(this.match(";")||(g=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(t=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),C=this.finalize(this.createNode(),
new e.EmptyStatement)):(this.expect(")"),z=this.context.inIteration,D=this.context.curlyParsing,this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",C=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=D,this.context.inIteration=z);return r&&w?this.finalize(v,new e.ForInStatement(r,w,C)):this.finalize(v,new e.ForStatement(d,g,t,C))};c.prototype.parseContinueStatement=function(){var d=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(d,
new e.ContinueStatement)};c.prototype.parseBreakStatement=function(){var d=this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(d,new e.BreakStatement)};c.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(a.Messages.IllegalReturn);var d=this.createNode();this.expectKeyword("return");var g=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===f.TokenType.EOF)&&this.lookahead.type!==
f.TokenType.StringLiteral&&this.lookahead.type!==f.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize(d,new e.ReturnStatement(g))};c.prototype.parseStatement=function(){switch(this.lookahead.type){case f.TokenType.BooleanLiteral:case f.TokenType.NullLiteral:case f.TokenType.NumericLiteral:case f.TokenType.StringLiteral:case f.TokenType.Template:case f.TokenType.Identifier:var d=this.parseExpressionStatement();break;case f.TokenType.Punctuator:d=this.lookahead.value;
d="{"===d?this.parseBlockOrObjectStatement():"("===d?this.parseExpressionStatement():";"===d?this.parseEmptyStatement():this.parseExpressionStatement();break;case f.TokenType.Keyword:switch(this.lookahead.value.toLowerCase()){case "break":d=this.parseBreakStatement();break;case "continue":d=this.parseContinueStatement();break;case "for":d=this.parseForStatement();break;case "function":d=this.parseFunctionDeclaration();break;case "if":d=this.parseIfStatement();break;case "return":d=this.parseReturnStatement();
break;case "var":d=this.parseVariableStatement();break;default:d=this.parseExpressionStatement()}break;default:d=this.throwUnexpectedToken(this.lookahead)}return d};c.prototype.parseFunctionSourceElements=function(){var d=this.createNode();this.expect("{");var g=this.context.inIteration,t=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var r=[];this.lookahead.type!==f.TokenType.EOF&&!this.match("}");)r.push(this.parseStatementListItem());this.expect("}");
this.context.inIteration=g;this.context.inFunctionBody=t;return this.finalize(d,new e.BlockStatement(r))};c.prototype.parseFormalParameters=function(){var d=[];this.expect("(");if(!this.match(")"))for(;this.lookahead.type!==f.TokenType.EOF;){d.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return d};c.prototype.parseFunctionDeclaration=function(){var d=this.createNode();this.expectKeyword("function");var g=this.parseVariableIdentifier(),
t=this.parseFormalParameters(),r=this.parseFunctionSourceElements();return this.finalize(d,new e.FunctionDeclaration(g,t,r))};c.prototype.parseScript=function(){for(var d=this.createNode(),g=[];this.lookahead.type!==f.TokenType.EOF;)g.push(this.parseStatementListItem());return this.finalize(d,new e.Program(g))};return c}();l.Parser=F})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(F,l){Object.defineProperty(l,"__esModule",{value:!0});l.assert=void 0;l.assert=function(b,
q){if(!b)throw Error("ASSERT: "+q);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(F,l){Object.defineProperty(l,"__esModule",{value:!0});l.ErrorHandler=void 0;var b=function(){function q(){this.errors=[];this.tolerant=!1}q.prototype.recordError=function(n){this.errors.push(n)};q.prototype.tolerate=function(n){if(this.tolerant)this.recordError(n);else throw n;};q.prototype.constructError=function(n,p){var m=Error(n);try{throw m;}catch(a){Object.create&&Object.defineProperty&&
(m=Object.create(a),Object.defineProperty(m,"column",{value:p}))}return m};q.prototype.createError=function(n,p,m,a){m=this.constructError("Line "+p+": "+a,m);m.index=n;m.lineNumber=p;m.description=a;return m};q.prototype.throwError=function(n,p,m,a){throw this.createError(n,p,m,a);};q.prototype.tolerateError=function(n,p,m,a){n=this.createError(n,p,m,a);if(this.tolerant)this.recordError(n);else throw n;};return q}();l.ErrorHandler=b})},"esri/arcade/lib/messages":function(){define(["require","exports"],
function(F,l){Object.defineProperty(l,"__esModule",{value:!0});l.Messages=void 0;l.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",
InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",
UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},"esri/arcade/lib/nodes":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/extends ./syntax".split(" "),
function(F,l,b,q,n,p){Object.defineProperty(l,"__esModule",{value:!0});l.VariableDeclarator=l.VariableDeclaration=l.UpdateExpression=l.UpdateOperators=l.UnaryExpression=l.UnaryOperators=l.TemplateLiteral=l.TemplateElement=l.Program=l.ReturnStatement=l.Property=l.ObjectExpression=l.Literal=l.IfStatement=l.Identifier=l.FunctionDeclaration=l.ForStatement=l.ForInStatement=l.ExpressionStatement=l.EmptyStatement=l.ContinueStatement=l.StaticMemberExpression=l.ComputedMemberExpression=l.CallExpression=l.BreakStatement=
l.BlockStatement=l.BinaryExpression=l.BinaryOperators=l.LogicalOperators=l.AssignmentExpression=l.AssignmentOperators=l.ArrayExpression=l.Comment=void 0;F=function(){return function(){}}();b=function(m){function a(e,k){var h=m.call(this)||this;h.type=e;h.value=k;return h}n(a,m);return a}(F);l.Comment=b;b=function(m){function a(e){var k=m.call(this)||this;k.elements=e;k.type=p.Syntax.ArrayExpression;return k}n(a,m);return a}(F);l.ArrayExpression=b;l.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");
b=function(m){function a(e,k,h){var f=m.call(this)||this;f.operator=e;f.left=k;f.right=h;f.type=p.Syntax.AssignmentExpression;return f}n(a,m);return a}(F);l.AssignmentExpression=b;l.LogicalOperators=["||","\x26\x26"];l.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");b=function(m){function a(e,k,h){var f=m.call(this)||this;f.operator=e;f.left=k;f.right=h;f.type=l.LogicalOperators.includes(e)?p.Syntax.LogicalExpression:
p.Syntax.BinaryExpression;return f}n(a,m);return a}(F);l.BinaryExpression=b;b=function(m){function a(e){var k=m.call(this)||this;k.body=e;k.type=p.Syntax.BlockStatement;return k}n(a,m);return a}(F);l.BlockStatement=b;b=function(m){function a(){var e=null!==m&&m.apply(this,arguments)||this;e.type=p.Syntax.BreakStatement;return e}n(a,m);return a}(F);l.BreakStatement=b;b=function(m){function a(e,k){var h=m.call(this)||this;h.callee=e;h.args=k;h.type=p.Syntax.CallExpression;h.arguments=k;return h}n(a,
m);return a}(F);l.CallExpression=b;b=function(m){function a(e,k){var h=m.call(this)||this;h.object=e;h.property=k;h.type=p.Syntax.MemberExpression;h.computed=!0;return h}n(a,m);return a}(F);l.ComputedMemberExpression=b;b=function(m){function a(e,k){var h=m.call(this)||this;h.object=e;h.property=k;h.type=p.Syntax.MemberExpression;h.computed=!1;return h}n(a,m);return a}(F);l.StaticMemberExpression=b;b=function(m){function a(){var e=null!==m&&m.apply(this,arguments)||this;e.type=p.Syntax.ContinueStatement;
return e}n(a,m);return a}(F);l.ContinueStatement=b;b=function(m){function a(){var e=null!==m&&m.apply(this,arguments)||this;e.type=p.Syntax.EmptyStatement;return e}n(a,m);return a}(F);l.EmptyStatement=b;b=function(m){function a(e){var k=m.call(this)||this;k.expression=e;k.type=p.Syntax.ExpressionStatement;return k}n(a,m);return a}(F);l.ExpressionStatement=b;b=function(m){function a(e,k,h){var f=m.call(this)||this;f.left=e;f.right=k;f.body=h;f.type=p.Syntax.ForInStatement;f.each=!1;return f}n(a,m);
return a}(F);l.ForInStatement=b;b=function(m){function a(e,k,h,f){var c=m.call(this)||this;c.init=e;c.test=k;c.update=h;c.body=f;c.type=p.Syntax.ForStatement;return c}n(a,m);return a}(F);l.ForStatement=b;b=function(m){function a(e,k,h){var f=m.call(this)||this;f.id=e;f.params=k;f.body=h;f.type=p.Syntax.FunctionDeclaration;f.generator=!1;f.expression=!1;f.async=!1;return f}n(a,m);return a}(F);l.FunctionDeclaration=b;b=function(m){function a(e){var k=m.call(this)||this;k.name=e;k.type=p.Syntax.Identifier;
return k}n(a,m);return a}(F);l.Identifier=b;b=function(m){function a(e,k,h){var f=m.call(this)||this;f.test=e;f.consequent=k;f.alternate=h;f.type=p.Syntax.IfStatement;return f}n(a,m);return a}(F);l.IfStatement=b;b=function(m){function a(e,k){var h=m.call(this)||this;h.value=e;h.raw=k;h.type=p.Syntax.Literal;return h}n(a,m);return a}(F);l.Literal=b;b=function(m){function a(e){var k=m.call(this)||this;k.properties=e;k.type=p.Syntax.ObjectExpression;return k}n(a,m);return a}(F);l.ObjectExpression=b;
b=function(m){function a(e,k,h,f,c,d){var g=m.call(this)||this;g.kind=e;g.key=k;g.computed=h;g.value=f;g.method=c;g.shorthand=d;g.type=p.Syntax.Property;return g}n(a,m);return a}(F);l.Property=b;b=function(m){function a(e){var k=m.call(this)||this;k.argument=e;k.type=p.Syntax.ReturnStatement;return k}n(a,m);return a}(F);l.ReturnStatement=b;b=function(m){function a(e){var k=m.call(this)||this;k.body=e;k.type=p.Syntax.Program;return k}n(a,m);return a}(F);l.Program=b;b=function(m){function a(e,k){var h=
m.call(this)||this;h.value=e;h.tail=k;h.type=p.Syntax.TemplateElement;return h}n(a,m);return a}(F);l.TemplateElement=b;b=function(m){function a(e,k){var h=m.call(this)||this;h.quasis=e;h.expressions=k;h.type=p.Syntax.TemplateLiteral;return h}n(a,m);return a}(F);l.TemplateLiteral=b;l.UnaryOperators=["-","+","!","~"];b=function(m){function a(e,k){var h=m.call(this)||this;h.operator=e;h.argument=k;h.type=p.Syntax.UnaryExpression;h.prefix=!0;return h}n(a,m);return a}(F);l.UnaryExpression=b;l.UpdateOperators=
["++","--"];b=function(m){function a(e,k,h){var f=m.call(this)||this;f.operator=e;f.argument=k;f.prefix=h;f.type=p.Syntax.UpdateExpression;return f}n(a,m);return a}(F);l.UpdateExpression=b;b=function(m){function a(e,k){var h=m.call(this)||this;h.declarations=e;h.kind=k;h.type=p.Syntax.VariableDeclaration;return h}n(a,m);return a}(F);l.VariableDeclaration=b;F=function(m){function a(e,k){var h=m.call(this)||this;h.id=e;h.init=k;h.type=p.Syntax.VariableDeclarator;return h}n(a,m);return a}(F);l.VariableDeclarator=
F})},"esri/arcade/lib/scanner":function(){define("require exports ./assert ./character ./messages ./token".split(" "),function(F,l,b,q,n,p){Object.defineProperty(l,"__esModule",{value:!0});l.Scanner=void 0;F=function(){function m(a,e){this.source=a;this.errorHandler=e;this.isModule=this.trackComment=!1;this.length=a.length;this.index=0;this.lineNumber=0<a.length?1:0;this.lineStart=0;this.curlyStack=[]}m.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,
curlyStack:this.curlyStack.slice()}};m.prototype.restoreState=function(a){this.index=a.index;this.lineNumber=a.lineNumber;this.lineStart=a.lineStart;this.curlyStack=a.curlyStack};m.prototype.eof=function(){return this.index>=this.length};m.prototype.throwUnexpectedToken=function(a){void 0===a&&(a=n.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,a)};m.prototype._tolerateUnexpectedToken=function(a){void 0===a&&(a=n.Messages.UnexpectedTokenIllegal);
this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,a)};m.prototype._skipSingleLineComment=function(a){var e=[],k=0,h=null;this.trackComment&&(e=[],k=this.index-a,h={start:{line:this.lineNumber,column:this.index-this.lineStart-a},end:{line:0,column:0}});for(;!this.eof();){var f=this.source.charCodeAt(this.index);++this.index;if(q.Character.isLineTerminator(f))return h&&(h.end={line:this.lineNumber,column:this.index-this.lineStart-1},a={multiLine:!1,slice:[k+a,this.index-
1],range:[k,this.index-1],loc:h},e.push(a)),13===f&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,e}h&&(h.end={line:this.lineNumber,column:this.index-this.lineStart},a={multiLine:!1,slice:[k+a,this.index],range:[k,this.index],loc:h},e.push(a));return e};m.prototype._skipMultiLineComment=function(){var a=[],e=0,k=null;this.trackComment&&(e=this.index-2,k={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var h=
this.source.charCodeAt(this.index);if(q.Character.isLineTerminator(h))13===h&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===h&&47===this.source.charCodeAt(this.index+1))return this.index+=2,k&&(k.end={line:this.lineNumber,column:this.index-this.lineStart},e={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:k},a.push(e)),a;++this.index}}k&&(k.end={line:this.lineNumber,column:this.index-this.lineStart},e={multiLine:!0,
slice:[e+2,this.index],range:[e,this.index],loc:k},a.push(e));this._tolerateUnexpectedToken();return a};m.prototype.scanComments=function(){var a=null;this.trackComment&&(a=[]);for(var e=0===this.index;!this.eof();){var k=this.source.charCodeAt(this.index);if(q.Character.isWhiteSpace(k))++this.index;else if(q.Character.isLineTerminator(k))++this.index,13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,e=!0;else if(47===k)if(k=this.source.charCodeAt(this.index+
1),47===k)this.index+=2,k=this._skipSingleLineComment(2),a&&(a=a.concat(k)),e=!0;else if(42===k)this.index+=2,k=this._skipMultiLineComment(),a&&(a=a.concat(k));else break;else if(e&&45===k)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,k=this._skipSingleLineComment(3),a&&(a=a.concat(k));else break;else if(60!==k||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,k=this._skipSingleLineComment(4),a&&
(a=a.concat(k));else break}return a};m.prototype._isKeyword=function(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a||"continue"===a;default:return!1}};m.prototype._codePointAt=function(a){var e=this.source.charCodeAt(a);55296<=e&&56319>=e&&(a=this.source.charCodeAt(a+1),56320<=a&&57343>=a&&(e=1024*(e-55296)+a-56320+65536));return e};m.prototype._scanHexEscape=
function(a){a="u"===a?4:2;for(var e=0,k=0;k<a;++k)if(!this.eof()&&q.Character.isHexDigit(this.source.charCodeAt(this.index)))e=16*e+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(e)};m.prototype._scanUnicodeCodePointEscape=function(){var a=this.source[this.index],e=0;for("}"===a&&this.throwUnexpectedToken();!this.eof();){a=this.source[this.index++];if(!q.Character.isHexDigit(a.charCodeAt(0)))break;e=16*e+"0123456789abcdef".indexOf(a.toLowerCase())}(1114111<
e||"}"!==a)&&this.throwUnexpectedToken();return q.Character.fromCodePoint(e)};m.prototype._getIdentifier=function(){for(var a=this.index++;!this.eof();){var e=this.source.charCodeAt(this.index);if(92===e||55296<=e&&57343>e)return this.index=a,this._getComplexIdentifier();if(q.Character.isIdentifierPart(e))++this.index;else break}return this.source.slice(a,this.index)};m.prototype._getComplexIdentifier=function(){var a=this._codePointAt(this.index),e=q.Character.fromCodePoint(a);this.index+=e.length;
if(92===a){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var k=this._scanUnicodeCodePointEscape()}else k=this._scanHexEscape("u"),null!==k&&"\\"!==k&&q.Character.isIdentifierStart(k.charCodeAt(0))||this.throwUnexpectedToken();e=k}for(;!this.eof();){a=this._codePointAt(this.index);if(!q.Character.isIdentifierPart(a))break;k=q.Character.fromCodePoint(a);e+=k;this.index+=k.length;92===a&&(e=e.substr(0,e.length-1),117!==
this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,k=this._scanUnicodeCodePointEscape()):(k=this._scanHexEscape("u"),null!==k&&"\\"!==k&&q.Character.isIdentifierPart(k.charCodeAt(0))||this.throwUnexpectedToken()),e+=k)}return e};m.prototype._octalToDecimal=function(a){var e="0"!==a,k="01234567".indexOf(a);!this.eof()&&q.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(e=!0,k=8*k+"01234567".indexOf(this.source[this.index++]),
"0123".includes(a)&&!this.eof()&&q.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(k=8*k+"01234567".indexOf(this.source[this.index++])));return{code:k,octal:e}};m.prototype._scanIdentifier=function(){var a=this.index,e=92===this.source.charCodeAt(a)?this._getComplexIdentifier():this._getIdentifier();var k=1===e.length?p.TokenType.Identifier:this._isKeyword(e)?p.TokenType.Keyword:"null"===e.toLowerCase()?p.TokenType.NullLiteral:"true"===e.toLowerCase()||"false"===e.toLowerCase()?p.TokenType.BooleanLiteral:
p.TokenType.Identifier;if(k!==p.TokenType.Identifier&&a+e.length!==this.index){var h=this.index;this.index=a;this._tolerateUnexpectedToken(n.Messages.InvalidEscapedReservedWord);this.index=h}return{type:k,value:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype._scanPunctuator=function(){var a=this.index,e=this.source[this.index];switch(e){case "(":case "{":"{"===e&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;
this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:e=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===e?this.index+=4:(e=e.substr(0,3),"\x3d\x3d\x3d"===e||"!\x3d\x3d"===e||"\x3e\x3e\x3e"===e||"\x3c\x3c\x3d"===e||"\x3e\x3e\x3d"===e||"**\x3d"===e?this.index+=3:(e=e.substr(0,2),"\x26\x26"===e||"||"===e||"\x3d\x3d"===e||"!\x3d"===e||"+\x3d"===e||"-\x3d"===e||"*\x3d"===e||"/\x3d"===e||"++"===e||"--"===e||"\x3c\x3c"===e||"\x3e\x3e"===
e||"\x26\x3d"===e||"|\x3d"===e||"^\x3d"===e||"%\x3d"===e||"\x3c\x3d"===e||"\x3e\x3d"===e||"\x3d\x3e"===e||"**"===e?this.index+=2:(e=this.source[this.index],"\x3c\x3e\x3d!+-*%\x26|^/".includes(e)&&++this.index)))}this.index===a&&this.throwUnexpectedToken();return{type:p.TokenType.Punctuator,value:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype._scanHexLiteral=function(a){for(var e="";!this.eof()&&q.Character.isHexDigit(this.source.charCodeAt(this.index));)e+=
this.source[this.index++];0===e.length&&this.throwUnexpectedToken();q.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:p.TokenType.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype._scanBinaryLiteral=function(a){for(var e="";!this.eof();){var k=this.source[this.index];if("0"!==k&&"1"!==k)break;e+=this.source[this.index++]}0===e.length&&this.throwUnexpectedToken();
this.eof()||(k=this.source.charCodeAt(this.index),(q.Character.isIdentifierStart(k)||q.Character.isDecimalDigit(k))&&this.throwUnexpectedToken());return{type:p.TokenType.NumericLiteral,value:parseInt(e,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype._scanOctalLiteral=function(a,e){var k="",h=!1;q.Character.isOctalDigit(a.charCodeAt(0))?(h=!0,k="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&q.Character.isOctalDigit(this.source.charCodeAt(this.index));)k+=
this.source[this.index++];h||0!==k.length||this.throwUnexpectedToken();(q.Character.isIdentifierStart(this.source.charCodeAt(this.index))||q.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:p.TokenType.NumericLiteral,value:parseInt(k,8),octal:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};m.prototype._scanNumericLiteral=function(){var a=this.index,e=this.source[a];b.assert(q.Character.isDecimalDigit(e.charCodeAt(0))||
"."===e,"Numeric literal must start with a decimal digit or a decimal point");var k="";if("."!==e){k=this.source[this.index++];e=this.source[this.index];if("0"===k){if("x"===e||"X"===e)return++this.index,this._scanHexLiteral(a);if("b"===e||"B"===e)return++this.index,this._scanBinaryLiteral(a);if("o"===e||"O"===e)return this._scanOctalLiteral(e,a)}for(;q.Character.isDecimalDigit(this.source.charCodeAt(this.index));)k+=this.source[this.index++];e=this.source[this.index]}if("."===e){for(k+=this.source[this.index++];q.Character.isDecimalDigit(this.source.charCodeAt(this.index));)k+=
this.source[this.index++];e=this.source[this.index]}if("e"===e||"E"===e){k+=this.source[this.index++];e=this.source[this.index];if("+"===e||"-"===e)k+=this.source[this.index++];if(q.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;q.Character.isDecimalDigit(this.source.charCodeAt(this.index));)k+=this.source[this.index++];else this.throwUnexpectedToken()}q.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:p.TokenType.NumericLiteral,
value:parseFloat(k),lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype._scanStringLiteral=function(){var a=this.index,e=this.source[a];b.assert("'"===e||'"'===e,"String literal must starts with a quote");++this.index;for(var k=!1,h="";!this.eof();){var f=this.source[this.index++];if(f===e){e="";break}if("\\"===f)if((f=this.source[this.index++])&&q.Character.isLineTerminator(f.charCodeAt(0)))++this.lineNumber,"\r"===f&&"\n"===this.source[this.index]&&++this.index,
this.lineStart=this.index;else switch(f){case "u":"{"===this.source[this.index]?(++this.index,h+=this._scanUnicodeCodePointEscape()):(f=this._scanHexEscape(f),null===f&&this.throwUnexpectedToken(),h+=f);break;case "x":f=this._scanHexEscape(f);null===f&&this.throwUnexpectedToken(n.Messages.InvalidHexEscapeSequence);h+=f;break;case "n":h+="\n";break;case "r":h+="\r";break;case "t":h+="\t";break;case "b":h+="\b";break;case "f":h+="\f";break;case "v":h+="\x0B";break;case "8":case "9":h+=f;this._tolerateUnexpectedToken();
break;default:f&&q.Character.isOctalDigit(f.charCodeAt(0))?(f=this._octalToDecimal(f),k=f.octal||k,h+=String.fromCharCode(f.code)):h+=f}else if(q.Character.isLineTerminator(f.charCodeAt(0)))break;else h+=f}""!==e&&(this.index=a,this.throwUnexpectedToken());return{type:p.TokenType.StringLiteral,value:h,octal:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype._scanTemplate=function(){var a="",e=!1,k=this.index,h="`"===this.source[k],f=!1,c=2;for(++this.index;!this.eof();){var d=
this.source[this.index++];if("`"===d){c=1;e=f=!0;break}if("$"===d){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;e=!0;break}a+=d}else if("\\"===d)if(d=this.source[this.index++],q.Character.isLineTerminator(d.charCodeAt(0)))++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(d){case "n":a+="\n";break;case "r":a+="\r";break;case "t":a+="\t";break;case "u":if("{"===this.source[this.index])++this.index,a+=this._scanUnicodeCodePointEscape();
else{var g=this.index,t=this._scanHexEscape(d);null!==t?a+=t:(this.index=g,a+=d)}break;case "x":d=this._scanHexEscape(d);null===d&&this.throwUnexpectedToken(n.Messages.InvalidHexEscapeSequence);a+=d;break;case "b":a+="\b";break;case "f":a+="\f";break;case "v":a+="\v";break;default:"0"===d?(q.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(n.Messages.TemplateOctalLiteral),a+="\x00"):q.Character.isOctalDigit(d.charCodeAt(0))?this.throwUnexpectedToken(n.Messages.TemplateOctalLiteral):
a+=d}else q.Character.isLineTerminator(d.charCodeAt(0))?(++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,a+="\n"):a+=d}e||this.throwUnexpectedToken();h||this.curlyStack.pop();return{type:p.TokenType.Template,value:this.source.slice(k+1,this.index-c),cooked:a,head:h,tail:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};m.prototype._testRegExp=function(a,e){var k=this,h=a;e.includes("u")&&(h=h.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(f,c,d){f=parseInt(c||d,16);1114111<f&&k.throwUnexpectedToken(n.Messages.InvalidRegExp);return 65535>=f?String.fromCharCode(f):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(h)}catch(f){this.throwUnexpectedToken(n.Messages.InvalidRegExp)}try{return new RegExp(a,e)}catch(f){return null}};m.prototype._scanRegExpBody=function(){var a=this.source[this.index];b.assert("/"===a,"Regular expression literal must start with a slash");for(var e=this.source[this.index++],k=
!1,h=!1;!this.eof();)if(a=this.source[this.index++],e+=a,"\\"===a)a=this.source[this.index++],q.Character.isLineTerminator(a.charCodeAt(0))&&this.throwUnexpectedToken(n.Messages.UnterminatedRegExp),e+=a;else if(q.Character.isLineTerminator(a.charCodeAt(0)))this.throwUnexpectedToken(n.Messages.UnterminatedRegExp);else if(k)"]"===a&&(k=!1);else{if("/"===a){h=!0;break}"["===a&&(k=!0)}h||this.throwUnexpectedToken(n.Messages.UnterminatedRegExp);return e.substr(1,e.length-2)};m.prototype._scanRegExpFlags=
function(){for(var a="";!this.eof();){var e=this.source[this.index];if(!q.Character.isIdentifierPart(e.charCodeAt(0)))break;++this.index;if("\\"!==e||this.eof())a+=e;else{e=this.source[this.index];if("u"===e){++this.index;e=this.index;var k=this._scanHexEscape("u");if(null!==k)for(a+=k;e<this.index;++e);else this.index=e,a+="u"}this._tolerateUnexpectedToken()}}return a};m.prototype.scanRegExp=function(){var a=this.index,e=this._scanRegExpBody(),k=this._scanRegExpFlags(),h=this._testRegExp(e,k);return{type:p.TokenType.RegularExpression,
value:"",pattern:e,flags:k,regex:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.lex=function(){if(this.eof())return{type:p.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var a=this.source.charCodeAt(this.index);return q.Character.isIdentifierStart(a)?this._scanIdentifier():40===a||41===a||59===a?this._scanPunctuator():39===a||34===a?this._scanStringLiteral():46===a?q.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this._scanNumericLiteral():this._scanPunctuator():q.Character.isDecimalDigit(a)?this._scanNumericLiteral():96===a||125===a&&"${"===this.curlyStack[this.curlyStack.length-1]?this._scanTemplate():55296<=a&&57343>a&&q.Character.isIdentifierStart(this._codePointAt(this.index))?this._scanIdentifier():this._scanPunctuator()};return m}();l.Scanner=F})},"esri/arcade/lib/character":function(){define(["require","exports"],function(F,l){Object.defineProperty(l,"__esModule",{value:!0});l.Character=void 0;
var b=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
q=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
l.Character={fromCodePoint:function(n){return 65536>n?String.fromCharCode(n):String.fromCharCode(55296+(n-65536>>10))+String.fromCharCode(56320+(n-65536&1023))},isWhiteSpace:function(n){return 32===n||9===n||11===n||12===n||160===n||5760<=n&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(n)},isLineTerminator:function(n){return 10===n||13===n||8232===n||8233===n},isIdentifierStart:function(n){return 36===n||95===n||65<=n&&90>=n||97<=n&&122>=n||92===n||
128<=n&&b.test(l.Character.fromCodePoint(n))},isIdentifierPart:function(n){return 36===n||95===n||65<=n&&90>=n||97<=n&&122>=n||48<=n&&57>=n||92===n||128<=n&&q.test(l.Character.fromCodePoint(n))},isDecimalDigit:function(n){return 48<=n&&57>=n},isHexDigit:function(n){return 48<=n&&57>=n||65<=n&&70>=n||97<=n&&102>=n},isOctalDigit:function(n){return 48<=n&&55>=n}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(F,l){Object.defineProperty(l,"__esModule",{value:!0});l.TokenName=
l.TokenType=void 0;var b,q=b=l.TokenType||(l.TokenType={});q[q.BooleanLiteral=1]="BooleanLiteral";q[q.EOF=2]="EOF";q[q.Identifier=3]="Identifier";q[q.Keyword=4]="Keyword";q[q.NullLiteral=5]="NullLiteral";q[q.NumericLiteral=6]="NumericLiteral";q[q.Punctuator=7]="Punctuator";q[q.StringLiteral=8]="StringLiteral";q[q.RegularExpression=9]="RegularExpression";q[q.Template=10]="Template";l.TokenName={};l.TokenName[b.BooleanLiteral]="Boolean";l.TokenName[b.EOF]="\x3cend\x3e";l.TokenName[b.Identifier]="Identifier";
l.TokenName[b.Keyword]="Keyword";l.TokenName[b.NullLiteral]="Null";l.TokenName[b.NumericLiteral]="Numeric";l.TokenName[b.Punctuator]="Punctuator";l.TokenName[b.StringLiteral]="String";l.TokenName[b.RegularExpression]="RegularExpression";l.TokenName[b.Template]="Template"})},"esri/arcade/lib/tokenizer":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ./error-handler ./nodes ./scanner ./token".split(" "),function(F,l,b,q,n,p,m,a){Object.defineProperty(l,
"__esModule",{value:!0});l.Tokenizer=void 0;var e=function(){function k(){this.values=[];this.curly=this.paren=-1}k.prototype.beforeFunctionExpression=function(h){return q(q(q(q(["(","{","[","return",","],p.AssignmentOperators),p.BinaryOperators),p.LogicalOperators),p.UnaryOperators).includes(h)};k.prototype.isRegexStart=function(){var h=this.values[this.values.length-1],f=null!==h;switch(h){case "this":case "]":f=!1;break;case ")":h=this.values[this.paren-1];f="if"===h||"while"===h||"for"===h||"with"===
h;break;case "}":f=!0,"function"===this.values[this.curly-3]?f=(h=this.values[this.curly-4])?!this.beforeFunctionExpression(h):!1:"function"===this.values[this.curly-4]&&(f=(h=this.values[this.curly-5])?!this.beforeFunctionExpression(h):!0)}return f};k.prototype.push=function(h){h.type===a.TokenType.Punctuator||h.type===a.TokenType.Keyword?("{"===h.value?this.curly=this.values.length:"("===h.value&&(this.paren=this.values.length),this.values.push(h.value)):this.values.push(null)};return k}();F=function(){function k(h,
f){this.errorHandler=new n.ErrorHandler;this.errorHandler.tolerant=f?"boolean"===typeof f.tolerant&&f.tolerant:!1;this.scanner=new m.Scanner(h,this.errorHandler);this.scanner.trackComment=f?"boolean"===typeof f.comment&&f.comment:!1;this.trackRange=f?"boolean"===typeof f.range&&f.range:!1;this.trackLoc=f?"boolean"===typeof f.loc&&f.loc:!1;this.buffer=[];this.reader=new e}k.prototype.errors=function(){return this.errorHandler.errors};k.prototype.getNextToken=function(){if(0===this.buffer.length){var h=
this.scanner.scanComments();if(h)for(var f=0;f<h.length;++f){var c=h[f],d=this.scanner.source.slice(c.slice[0],c.slice[1]);d={type:c.multiLine?"BlockComment":"LineComment",value:d};this.trackRange&&(d.range=c.range);this.trackLoc&&(d.loc=c.loc);this.buffer.push(d)}if(!this.scanner.eof()){h=null;this.trackLoc&&(h={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});f=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){c=
this.scanner.saveState();try{f=this.scanner.scanRegExp()}catch(g){this.scanner.restoreState(c),f=this.scanner.lex()}}else f=this.scanner.lex();this.reader.push(f);c={type:a.TokenName[f.type],value:this.scanner.source.slice(f.start,f.end)};this.trackRange&&(c.range=[f.start,f.end]);this.trackLoc&&h&&(h.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},c.loc=h);f.type===a.TokenType.RegularExpression&&(c.regex={pattern:f.pattern,flags:f.flags});this.buffer.push(c)}}return this.buffer.shift()};
return k}();l.Tokenizer=F})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(F,l,b,q,n,p,m){F=new (F(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(a){var e=[];m.hasGeometryOperations(a)&&e.push(p.enableGeometryOperations());return n(e)}}));l.setObject("arcadeProfiles.visualizationProfile",F,q);return F})},"esri/promiseList":function(){define(["dojo/_base/array",
"dojo/Deferred","dojo/when"],function(F,l,b){var q=F.forEach;return function(n){function p(d,g){h[g]=d;f.progress([d,g]);0===--c&&f.resolve(h)}var m,a;n instanceof Array?a=n:n&&"object"===typeof n&&(m=n);var e=[];if(m){a=[];for(var k in m)Object.hasOwnProperty.call(m,k)&&(e.push(k),a.push(m[k]));var h={}}else a&&(h=[]);if(!a||!a.length)return(new l).resolve(h);var f=new l;f.promise.always(function(){h=e=null});var c=a.length;q(a,function(d,g){m||e.push(g);b(d,function(t){f.isFulfilled()||p(t,e[g])},
function(t){f.isFulfilled()||p(t,e[g])})});return f.promise}})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(F,l,b,q,n){var p=/(\/(MapServer|FeatureServer)).*/ig;b={hasGeometryOperations:function(m){return l.some(m,function(a){return a.hasGeometryOperations?a.hasGeometryOperations():n.hasGeometryOperations(a)})},hasFeatureSetOperations:function(m){return l.some(m,function(a){return a.hasFeatureSetOperations?
a.hasFeatureSetOperations():n.hasFeatureSetOperations(a)})},hasVariables:function(m,a){return l.some(m,function(e){return l.some(a,function(k){return e.hasVariable?e.hasVariable(k):n.hasVariable(e,k)})})},isAsync:function(m){return l.some(m,function(a){return a.async})},getServiceUrl:function(m){return p.test(m)?m.replace(p,"$1"):null}};F.setObject("arcadeProfiles.utils",b,q);return b})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(F,l,b,q,n,p,m,a){var e={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};F=F(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(k){k=k||{};this.stretchType=e.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=
this.min=this.max=null;b.mixin(this,k);this.colorRamp=a.fromJson(k.colorRamp)},toJson:function(){var k={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:b.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:b.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};
return p.fixJson(k)},toRenderingRule:function(k){k=k||{};var h=new m;h.functionName="Stretch";var f=this._convertStretchTypeEnumToIndex(this.stretchType),c={StretchType:f,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};p.isDefined(this.min)&&(c.Min=this.min);p.isDefined(this.min)&&(c.Max=this.max);3===f?(c.NumberOfStandardDeviations=this.numberOfStandardDeviations,h.outputPixelType="U8"):6===f?(c.MinPercent=parseFloat(this.minPercent),
c.MaxPercent=parseFloat(this.maxPercent),h.outputPixelType="U8"):5===f?h.outputPixelType="U8":9===f&&(c.SigmoidStrengthLevel=this.sigmoidStrengthLevel);h.functionArguments=c;h.variableName="Raster";return this.colorRamp?(f=new m,f.functionArguments=k.convertToColormap?{Colormap:a.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},f.variableName="Raster",f.functionName="Colormap",f.functionArguments.Raster=h,f):h},_convertStretchTypeEnumToIndex:function(k){var h=0;
k===e.TYPE_STANDARDDEVIATION?h=3:k===e.TYPE_HISTOGRAMEQUALIZATION?h=4:k===e.TYPE_MINMAX?h=5:k===e.TYPE_PERCENTCLIP?h=6:k===e.TYPE_SIGMOID&&(h=9);return h},_convertStretchTypeIndexToEnum:function(k){var h=e.TYPE_NONE;3===k?h=e.TYPE_STANDARDDEVIATION:4===k?h=e.TYPE_HISTOGRAMEQUALIZATION:5===k?h=e.TYPE_MINMAX:6===k?h=e.TYPE_PERCENTCLIP:9===k&&(h=e.TYPE_SIGMOID);return h}});b.mixin(F,e);b.setObject("renderer.StretchRenderer",F,n);return F})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,l,b,q,n){var p=F(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(m){if(l.isObject(m)){this._isRFTJson(m)&&(this._isTemplate=!0,this._templateJson=m);var a=0;this.functionName=m.rasterFunction||m.name;this.functionArguments=l.clone(m.rasterFunctionArguments||m.arguments);l.mixin(this,m);
if(m=this.functionArguments)if(m.Raster=this._toRasterFunction(m.Raster),m.Raster2=this._toRasterFunction(m.Raster2),m.DEM=this._toRasterFunction(m.DEM),m.FillRaster=this._toRasterFunction(m.FillRaster),m.Rasters&&m.Rasters.length)for(a=0;a<m.Rasters.length;a++)m.Rasters[a]=this._toRasterFunction(m.Rasters[a])}},_isRFTJson:function(m){return m.name&&m.arguments&&m["function"]&&m.hasOwnProperty("functionType")},_toRasterFunction:function(m){return m&&(m.rasterFunction||m.functionName)?new p(m):m},
_rfToJson:function(m){m&&"esri.layers.RasterFunction"===m.declaredClass&&(m=m.toJson());return m},toJson:function(){if(this._isTemplate)return this._templateJson;var m=l.clone(this.functionArguments||this.arguments);if(m&&(m.Raster=this._rfToJson(m.Raster),m.Raster2=this._rfToJson(m.Raster2),m.DEM=this._rfToJson(m.DEM),m.FillRaster=this._rfToJson(m.FillRaster),m.Rasters&&m.Rasters.length)){var a,e=[];for(a=0;a<m.Rasters.length;a++)e.push(this._rfToJson(m.Rasters[a]));m.Rasters=e}return n.filter({rasterFunction:this.functionName,
rasterFunctionArguments:m,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(k){if(null!==k&&void 0!==k)return!0})}});l.setObject("layers.RasterFunction",p,q);return p})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),function(F,l,b,q,n,p,m){function a(v){if(null==v||"algorithmic"!==v.type&&!v.fromColor)return v;
var z=v.declaredClass?new q:F.clone(v);z.fromColor=v.toColor;z.toColor=v.fromColor;z.algorithm=v.algorithm;return z}function e(v){if(null==v)return null;if("multipart"===v.type||v.colorRamps&&0<v.colorRamps.length){var z=v.declaredClass?new n:F.clone(v);z.colorRamps=l.map(v.colorRamps.slice().reverse(),function(C){return a(C)});return z}return a(v)}function k(v,z,C){if(!v)return{id:null,isInverted:!1};var D=v.name;D&&(v.fromColor||v.colorRamps)&&(v.name=void 0);var y=h(v,z,C);if(y)return D&&(v.name=
D),{id:y,isInverted:!1};y=h(v,z,C,!0);D&&(v.name=D);return y?{id:y,isInverted:!0}:D&&(y=h(v,z,C))?{id:y,isInverted:!1}:{id:null,isInverted:!1}}function h(v,z,C,D){if(v){D&&(v=e(v));z=z||t;C=C||r;var y=null;D=v.declaredClass;var u,B;if((u="string"===typeof v?v:v.name)&&l.some(C,function(x){if(x.name===u)return y=x.id,!0})&&y)return y;"esri.tasks.AlgorithmicColorRamp"===D?l.some(z,function(x){if(c(v.fromColor.toRgb(),x.fromColor)&&c(v.toColor.toRgb(),x.toColor))return y=x.id,!0},this):"esri.tasks.MultipartColorRamp"===
D&&l.some(z,function(x){if(v.colorRamps&&x.colorRamps&&v.colorRamps.length===x.colorRamps.length&&(B=v.colorRamps,!l.some(x.colorRamps,function(A,E){if(!c(B[E].fromColor.toRgb(),A.fromColor)||!c(B[E].toColor.toRgb(),A.toColor))return!0},this))){if(y)return!0;y=x.id}},this);return y}}function f(v){var z=new q,C=v.algorithm;z.fromColor=p.toDojoColor(v.fromColor);z.toColor=p.toDojoColor(v.toColor);C?"esriCIELabAlgorithm"===C?z.algorithm="cie-lab":"esriHSVAlgorithm"===C?z.algorithm="hsv":"esriLabLChAlgorithm"===
C&&(z.algorithm="lab-lch"):z.algorithm="hsv";return z}function c(v,z){if(!v||!z)return!1;v=v.slice(0,3);z=z.slice(0,3);return!l.some(v,function(C,D){if(C>z[D]+2||C<z[D]-2)return!0})}function d(v,z,C){v=m.toLAB(v);z=m.toLAB(z);return m.toRGB({l:v.l*(1-C)+C*z.l,a:v.a*(1-C)+C*z.a,b:v.b*(1-C)+C*z.b})}var g={},t=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,
254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",
fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,
56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,
110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,
113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,
124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,
127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,
139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,
142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,
154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,
158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,
170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,
173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,
187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,
190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},
{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,
96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,
204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,
9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,
11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,
12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,
12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,
11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,
9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,
102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,
11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,
249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,
253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,
255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,
10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,
13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,
16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,
17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,
18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,
17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],
toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,
15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,
167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,
203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,
237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,
235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,
153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,
14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",
fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,
245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",
type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,
255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,
255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},
{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,
27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],
toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,
39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],r=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",
id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},
{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",
name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",
type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",
name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",
name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",
name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],
w=new b({data:r});F.mixin(g,{predefinedColorRamps:t,predefinedColorRampNameMap:r,getColorRampName:function(v){v=k(v);return v.id?(v=w.query({id:v.id}),v[0]?v[0].name:null):null},fromJson:function(v){var z=null;if(!v)return z;"multipart"===v.type?(z=new n,z.colorRamps=l.map(v.colorRamps,function(C){return f(C)},this)):"algorithmic"===v.type&&(z=f(v));return z},colorsEqual:c,getColorRampId:k,invertColorRamp:e,convertColorRampToColormap:function(v,z){if(v&&z){var C=v.colorRamps?v.colorRamps.length:1,
D=[],y=[],u,B,x,A,E=0,J=0;for(E=0;E<C;E++)D[E]={},D[E].start=J,D[E].end=J+1/C,J=D[E].end;for(E=0;E<z;E++){var O=(E+.5)/z;l.forEach(D,function(S,X){O>=S.start&&O<S.end&&(A=(O-S.start)/(S.end-S.start),1<D.length?(u=m.getDojoColor(v.colorRamps[X].fromColor),B=m.getDojoColor(v.colorRamps[X].toColor)):(u=m.getDojoColor(v.fromColor),B=m.getDojoColor(v.toColor)),x=d(u,B,A),y.push([E,x.r,x.g,x.b]))},this)}return y}},interpolateLabColor:d});return g})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),
function(F,l,b,q,n,p){F=F(p,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var m="esriCIELabAlgorithm";break;case "hsv":m="esriHSVAlgorithm";break;case "lab-lch":m="esriLabLChAlgorithm"}m={type:"algorithmic",algorithm:m};m.fromColor=n.toJsonColor(this.fromColor);m.toColor=n.toJsonColor(this.toColor);return m}});l.setObject("tasks.AlgorithmicColorRamp",
F,q);return F})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(F,l,b,q){F=F(null,{declaredClass:"esri.tasks.ColorRamp",type:null});l.setObject("tasks.ColorRamp",F,q);return F})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(F,l,b,q,n,p){F=F(p,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",
constructor:function(){this.colorRamps=[]},addColorRamp:function(m){this.colorRamps.push(m)},toJson:function(){return{type:"multipart",colorRamps:b.map(this.colorRamps,function(m){return m.toJson()})}}});l.setObject("tasks.MultipartColorRamp",F,n);return F})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(F,l){var b={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],
[.0557,-.204,1.057]],matrixProduct:function(n,p){var m=[],a,e;if(n[0].length!==p.length)throw"dimensions do not match";var k=n.length,h=n[0].length,f=0;for(a=0;a<k;a++){for(e=f=0;e<h;e++)f+=n[a][e]*p[e];m.push(f)}return m},rgb2xyz:function(n){n=[n.r/255,n.g/255,n.b/255].map(function(p){return.04045>=p?p/12.92:Math.pow((p+.055)/1.055,2.4)});n=this.matrixProduct(this.COEF_RGB2XYZ,n);return{x:100*n[0],y:100*n[1],z:100*n[2]}},xyz2rgb:function(n){n=this.matrixProduct(this.COEF_XYZ2RGB,[n.x/100,n.y/100,
n.z/100]).map(function(p){return Math.min(1,Math.max(.0031308>=p?12.92*p:1.055*Math.pow(p,1/2.4)-.055,0))});return{r:Math.round(255*n[0]),g:Math.round(255*n[1]),b:Math.round(255*n[2])}},xyz2lab:function(n){n=[n.x/95.047,n.y/100,n.z/108.883].map(function(p){return p>Math.pow(6/29,3)?Math.pow(p,1/3):1/3*Math.pow(29/6,2)*p+4/29});return{l:116*n[1]-16,a:500*(n[0]-n[1]),b:200*(n[1]-n[2])}},lab2xyz:function(n){var p=n.l;n=[(p+16)/116+n.a/500,(p+16)/116,(p+16)/116-n.b/200].map(function(m){return m>6/29?
Math.pow(m,3):3*Math.pow(6/29,2)*(m-4/29)});return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}},lab2lch:function(n){var p=n.l,m=n.a,a=n.b;n=Math.sqrt(m*m+a*a);m=Math.atan2(a,m);m=0<m?m:m+2*Math.PI;return{l:p,c:n,h:m}},lch2lab:function(n){var p=n.c,m=n.h;return{l:n.l,a:p*Math.cos(m),b:p*Math.sin(m)}},rgb2lab:function(n){return this.xyz2lab(this.rgb2xyz(n))},lab2rgb:function(n){return this.xyz2rgb(this.lab2xyz(n))},rgb2lch:function(n){return this.lab2lch(this.xyz2lab(this.rgb2xyz(n)))},lch2rgb:function(n){return this.xyz2rgb(this.lab2xyz(this.lch2lab(n)))}},
q={rgb2hsv:function(n){var p=n.r,m=n.g;n=n.b;var a=Math.max(p,m,n),e=a-Math.min(p,m,n),k;0===e?k=0:a===p?k=(m-n)/e%6:a===m?k=(n-p)/e+2:a===n&&(k=(p-m)/e+4);0>k&&(k+=6);return{h:60*k,s:100*(0===e?0:e/a),v:100/255*a}},hsv2rgb:function(n){var p=(n.h+360)%360/60,m=n.v/100*255;n=n.s/100*m;var a=n*(1-Math.abs(p%2-1));switch(Math.floor(p)){case 0:p={r:n,g:a,b:0};break;case 1:p={r:a,g:n,b:0};break;case 2:p={r:0,g:n,b:a};break;case 3:p={r:0,g:a,b:n};break;case 4:p={r:a,g:0,b:n};break;case 5:case 6:p={r:n,
g:0,b:a};break;default:p={r:0,g:0,b:0}}p.r=Math.round(p.r+m-n);p.g=Math.round(p.g+m-n);p.b=Math.round(p.b+m-n);return p}};return{toRGB:function(n){var p;void 0!==n.r&&void 0!==n.g&&void 0!==n.b?p=n:void 0!==n.l&&void 0!==n.c&&void 0!==n.h?p=b.lch2rgb(n):void 0!==n.l&&void 0!==n.a&&void 0!==n.b?p=b.lab2rgb(n):void 0!==n.x&&void 0!==n.y&&void 0!==n.z?p=b.xyz2rgb(n):void 0!==n.h&&void 0!==n.s&&void 0!==n.v&&(p=q.hsv2rgb(n));return p},toHSV:function(n){if(void 0!==n.h&&void 0!==n.s&&void 0!==n.v)return n;
n=this.toRGB(n);return q.rgb2hsv(n)},toLAB:function(n){return void 0!==n.l&&void 0!==n.a&&void 0!==n.b?n:b.rgb2lab(this.toRGB(n))},toLCH:function(n){return void 0!==n.l&&void 0!==n.c&&void 0!==n.h?n:b.rgb2lch(this.toRGB(n))},toXYZ:function(n){return void 0!==n.x&&void 0!==n.y&&void 0!==n.z?n:b.rgb2xyz(this.toRGB(n))},getDojoColor:function(n){if(n){if(Array.isArray(n))return F.fromArray(n);if(void 0!==n.r&&void 0!==n.g&&void 0!==n.b)return n}},correctRGBLimits:function(n){var p=[n.r,n.g,n.b];l.forEach(p,
function(m,a){0>p[a]?p[a]=0:255<p[a]&&(p[a]=255);p[a]=Math.floor(p[a])});return{r:p[0],g:p[1],b:p[2],a:1}}}})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(F,l,b,q,n,p,m,a,e){F=F(a,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(k,h,f,c,d,g){this.values=[];this._symbols={};this.infos=[];k&&!k.declaredClass?
(h=k,f=g&&g.geometryType,this.defaultSymbol=(k=h.defaultSymbol)&&(k.declaredClass?k:m.fromJson(k,g)),this.attributeField=h.field1,this.attributeField2=h.field2,this.attributeField3=h.field3,this.fieldDelimiter=h.fieldDelimiter,this.defaultLabel=h.defaultLabel,this.setValueExpression(h.valueExpression),this.valueExpressionTitle=h.valueExpressionTitle,this.legendOptions=h.legendOptions,h.backgroundFillSymbol&&(this.backgroundFillSymbol=m.fromJson(h.backgroundFillSymbol,f?{geometryType:"esriGeometryPolygon"}:
null)),"esriGeometryPolygon"===f&&this.hasVisualVariables("sizeInfo",!1)&&(g={geometryType:"esriGeometryPoint"}),l.forEach(h.uniqueValueInfos,function(t){this._addValueInfo(t,g)},this)):(this.defaultSymbol=k,this.attributeField=h,this.attributeField2=f,this.attributeField3=c,this.fieldDelimiter=d);this._multiple=!!this.attributeField2},addValue:function(k,h){var f=b.isObject(k)?k:{value:k,symbol:h};this._addValueInfo(f)},removeValue:function(k){var h=l.indexOf(this.values,k);-1!==h&&(this.values.splice(h,
1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[k],this.infos.splice(h,1))},getUniqueValueInfo:function(k){var h=this.attributeField,f=k.attributes;if(this.valueExpression)h=this._getDataValue(k,this._uvInfo,null,this._cache.uvInfo),h=this._normalizeNullValue(h);else if(this._multiple){k=this.attributeField2;var c=this.attributeField3,d=[];h&&d.push(this._normalizeNullValue(f[h]));k&&d.push(this._normalizeNullValue(f[k]));c&&d.push(this._normalizeNullValue(f[c]));h=
d.join(this.fieldDelimiter||"")}else h=b.isFunction(h)?h(k):f[h],h=this._normalizeNullValue(h);return this._symbols[h]},setValueExpression:function(k){this.valueExpression=k;this._uvInfo={valueExpression:k};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(k){var h=this.inherited(arguments);this.valueExpression&&(h=h.concat(e.extractFieldNames(this.valueExpression,k)));h.sort();return l.filter(h,function(f,c){return 0===c||h[c-1]!==f})},getSymbol:function(k){return(k=
this.getUniqueValueInfo(k))&&k.symbol||this.defaultSymbol},_addValueInfo:function(k,h){var f=k.value;this.values.push(f);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(k);var c=k.symbol;c&&!c.declaredClass&&(k.symbol=m.fromJson(c,h));this._symbols[f]=k},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(k){return this._hasNullKeyword&&null==k?this._nullCode:k},_evalNullKeyword:function(k){var h=this.fieldDelimiter||"",f=new RegExp("(^|"+h+")("+this._nullCode+")("+h+"|$)");
return l.some(k,function(c){return f.test(c)})},toJson:function(){var k=p.fixJson;var h={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:b.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:l.map(this.infos||[],function(f){f=b.mixin({},
f);f.symbol=f.symbol&&f.symbol.toJson();f.value+="";return k(f)})};this.backgroundFillSymbol&&(h.backgroundFillSymbol=this.backgroundFillSymbol.toJson());h=b.mixin(this.inherited(arguments),h);return k(h)}});b.setObject("renderer.UniqueValueRenderer",F,n);return F})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(F,l,b,q,n,p,m,a,e){F=F(a,{declaredClass:"esri.renderer.ColormapRenderer",
constructor:function(k){this.colormapInfos=k&&k.colormapInfos},toJson:function(){var k=p.fixJson;var h={type:"rasterColormap",colormapInfos:l.map(this.colormapInfos||[],function(f,c){var d={};f.color&&null!==f.color&&3<=f.color.length&&(d.color=f.color,d.value=f.value||c,d.label=(f.label||c)+"");return k(d)})};h=b.mixin(this.inherited(arguments),h);return k(h)}});b.setObject("renderer.ColormapRenderer",F,n);return F})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel",
"../support/expressionUtils"],function(F,l,b,q){F.setObject("renderer.arcadeUtils",q,b);return q})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(F,l,b,q,n,p,m,a){F=F(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(e){e=e||{};this.hillshadeType=e.hillshadeType||"traditional";this.azimuth=null!=e.azimuth?e.azimuth:315;
this.altitude=null!=e.altitude?e.altitude:45;this.zFactor=e.zFactor||1;this.scalingType=e.scalingType||"none";this.pixelSizePower=null!=e.pixelSizePower?e.pixelSizePower:.664;this.pixelSizeFactor=null!=e.pixelSizeFactor?e.pixelSizeFactor:.024;this.removeEdgeEffect=e.removeEdgeEffect||!1;this.colorRamp=a.fromJson(e.colorRamp)},toJson:function(){var e={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return p.fixJson(e)},toRenderingRule:function(e){}});b.setObject("renderer.ShadedReliefRenderer",F,n);return F})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(F,l,b,q,n,p,m){F=F(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(a){null!==a&&(l.mixin(this,
a),a.exportOptions&&(this.exportOptions=new m(a.exportOptions)),this.timeExtent=null,a.timeExtent&&2===a.timeExtent.length&&(this.timeExtent=new n(a.timeExtent)),this.timeReference=new p(a.timeReference))}});l.mixin(F,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",
UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});l.setObject("layers.TimeInfo",F,q);return F})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(F,l,b,q){var n=F(null,{declaredClass:"esri.TimeExtent",constructor:function(p){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(p)if(l.isArray(p)){var m=p[0],a=p[1];this.startTime=null===m||"null"===m?null:new Date(m);this.endTime=
null===a||"null"===a?null:new Date(a)}else p instanceof Date&&this._create(p,null)},offset:function(p,m){var a=new n,e=this.startTime,k=this.endTime;e&&(a.startTime=this._getOffsettedDate(e,p,m));k&&(a.endTime=this._getOffsettedDate(k,p,m));return a},intersection:function(p){return this._intersection(this,p)},toJson:function(){var p=[],m=this.startTime;p.push(m?m.getTime():"null");m=this.endTime;p.push(m?m.getTime():"null");return p},_create:function(p,m){this.startTime=p?new Date(p.getTime()):null;
this.endTime=m?new Date(m.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",
setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(p,m){if(p&&m){var a=p.startTime,e=p.endTime,k=m.startTime,h=m.endTime;a=a?a.getTime():-Infinity;k=k?k.getTime():
-Infinity;e=e?e.getTime():Infinity;h=h?h.getTime():Infinity;var f,c;k>=a&&k<=e?f=k:a>=k&&a<=h&&(f=a);e>=k&&e<=h?c=e:h>=a&&h<=e&&(c=h);if(isNaN(f)||isNaN(c))return null;a=new n;a.startTime=-Infinity===f?null:new Date(f);a.endTime=Infinity===c?null:new Date(c);return a}return null},_getOffsettedDate:function(p,m,a){var e=this._refData;p=new Date(p.getTime());m&&a&&(e=e[a],p[e.setter](p[e.getter]()+m*e.multiplier));return p}});return q.TimeExtent=n})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(F,l,b,q){F=F(null,{declaredClass:"esri.layers.TimeReference",constructor:function(n){n&&l.mixin(this,n)}});l.setObject("layers.TimeReference",F,q);return F})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,l,b,q,n){F=F(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(p){p&&l.mixin(this,p)},toJson:function(){return n.fixJson({timeDataCumulative:this.timeDataCumulative,
timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});l.setObject("layers.LayerTimeOptions",F,q);return F})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point ./RasterFunction".split(" "),function(F,l,b,q,n,p,m){var a=F(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,
multidimensionalDefinition:[],itemRenderingRule:null,constructor:function(e){l.isObject(e)&&(l.mixin(this,e),e.mosaicMethod&&(this.method=e.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),e.mosaicOperation&&(this.operation=e.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),e.fids&&(this.objectIds=e.fids),e.viewpoint&&(this.viewpoint=
new p(e.viewpoint)),e.itemRenderingRule&&(this.itemRenderingRule=new m(e.itemRenderingRule)),this.multidimensionalDefinition=e.multidimensionalDefinition||[])},toJson:function(){var e=null,k=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(k){e=[];for(var h=0;h<k;h++)e.push("esri.layers.DimensionalDefinition"===this.multidimensionalDefinition[h].declaredClass?this.multidimensionalDefinition[h].toJson():this.multidimensionalDefinition[h])}e={mosaicMethod:this.method,where:this.where,
sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:l.clone(this.lockRasterIds),viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:l.clone(this.objectIds),mosaicOperation:this.operation,multidimensionalDefinition:e,itemRenderingRule:this.itemRenderingRule?this.itemRenderingRule.toJson():null};return n.filter(e,function(f){if(null!==f)return!0})},_getMethodEnum:function(e){if(e){var k=a.METHOD_NONE;switch(e.toLowerCase()){case "byattribute":k=a.METHOD_ATTRIBUTE;
break;case "center":k=a.METHOD_CENTER;break;case "lockraster":k=a.METHOD_LOCKRASTER;break;case "nadir":k=a.METHOD_NADIR;break;case "northwest":k=a.METHOD_NORTHWEST;break;case "seamline":k=a.METHOD_SEAMLINE;break;case "viewpoint":k=a.METHOD_VIEWPOINT}return k}},_getOperatorEnum:function(e){if(e)switch(e.toLowerCase()){case "first":return a.OPERATION_FIRST;case "last":return a.OPERATION_LAST;case "max":return a.OPERATION_MAX;case "min":return a.OPERATION_MIN;case "blend":return a.OPERATION_BLEND;case "mean":return a.OPERATION_MEAN;
case "sum":return a.OPERATION_SUM}}});l.mixin(a,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});
l.setObject("layers.MosaicRule",a,q);return a})},"esri/layers/DimensionalDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,l,b,q,n){F=F(null,{declaredClass:"esri.layers.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(p){l.isObject(p)&&l.mixin(this,p)},toJson:function(){var p={variableName:this.variableName,dimensionName:this.dimensionName,values:l.clone(this.values),isSlice:this.isSlice};
return n.filter(p,function(m){return null!==m})}});l.setObject("layers.DimensionalDefinition",F,q);return F})},"esri/layers/PixelBlock":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(F,l,b,q){F=F([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],maskIsAlpha:!1,validPixelCount:null,constructor:function(n){if(n){if(!n.width||Math.floor(n.width)!==n.width)throw"PixelBlock: incorrect width";
if(!n.height||Math.floor(n.height)!==n.height)throw"PixelBlock: incorrect height";if(!n.pixels)throw"PixelBlock: pixel data not present";this.width=n.width;this.height=n.height;this.pixels=n.pixels;this.pixelType=n.pixelType||null;this.statistics=n.statistics;this.mask=n.mask||null;this.maskIsAlpha=n.maskIsAlpha||!1;n=n.validPixelCount;null==n&&(n=this.mask?this._getValidPixelCount(this.mask):this.width*this.height);this.validPixelCount=n}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?
0:this.statistics.length},addData:function(n){if(!n.pixels||!n.statistics)throw"Pixel data or statistics are not present";if(n.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(n.statistics);this.pixels.push(n.pixels)},getAsRGBA:function(){var n=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(n);break;default:this._fillFrom8Bit(n)}return new Uint8ClampedArray(n)},
getAsRGBAFloat:function(){var n=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(n);return n},clone:function(n){n=n||this;var p=new this.constructor;p.width=n.width;p.height=n.height;p.pixelType=n.pixelType;p.maskIsAlpha=n.maskIsAlpha;n.mask&&(p.mask=new Uint8Array(n.mask));var m,a;if(n.pixels){p.pixels=[];var e=(a=n.pixels.length)&&n.pixels[0].slice;for(m=0;m<a;m++)p.pixels[m]=e?n.pixels[m].slice(0,n.pixels[m].length):new n.pixels[m].constructor(n.pixels[m])}if(n.statistics)for(p.statistics=
[],a=n.statistics.length,m=0;m<a;m++)p.statistics[m]=l.clone(n.statistics[m]);n=n.validPixelCount;null==n&&(n=p.mask?this._getValidPixelCount(p.mask):p.width*p.height);return p},clamp:function(n){if("F64"!==n&&"F32"!==n){switch(n){case "U8":var p=[0,255];break;case "U16":p=[0,65535];break;case "U32":p=[0,4294967295];break;case "S8":p=[-128,127];break;case "S16":p=[-32768,32767];break;case "S32":p=[-2147483648,2147483647];break;default:p=[-3.4*1E39,3.4*1E39]}var m=p[0];p=p[1];var a=this.pixels,e=this.width*
this.height,k=a.length,h,f,c=[];for(h=0;h<k;h++){var d=this._createEmptyBand(n,e);var g=a[h];for(f=0;f<e;f++){var t=g[f];d[f]=t>p?p:t<m?m:t}c.push(d)}this.pixels=c;this.pixelType=n}},calculateStatistics:function(){var n,p=[],m=this.mask;for(n=0;n<this.pixels.length;n++){var a=this.pixels[n];p.push(this._calculateBandStatistics(a,m))}this.statistics=p},_getValidPixelCount:function(n){var p,m=0;for(p=0;p<n.length;p++)n[p]&&m++;return m},_createEmptyBand:function(n,p){switch(n){case "U8":var m=new Uint8Array(p);
break;case "U16":m=new Uint16Array(p);break;case "U32":m=new Uint32Array(p);break;case "S8":m=new Int8Array(p);break;case "S16":m=new Int16Array(p);break;case "S32":m=new Int32Array(p);break;case "U32":m=new Uint32Array(p);break;case "F32":m=new Float32Array(p);break;case "F64":m=new Float64Array(p);break;default:m=new Float32Array(p)}return m},_fillFrom8Bit:function(n){var p=this.pixels,m=this.mask;if(!n||!p||!p.length)return 0;var a,e;var k=a=e=p[0];3<=p.length&&(a=p[1],e=p[2]);p=new Uint32Array(n);
var h=this.width*this.height;if(k.length!==h)return 0;if(m&&m.length===h)if(this.maskIsAlpha)for(n=0;n<h;n++)m[n]&&(p[n]=m[n]<<24|e[n]<<16|a[n]<<8|k[n]);else for(n=0;n<h;n++)m[n]&&(p[n]=-16777216|e[n]<<16|a[n]<<8|k[n]);else for(n=0;n<h;n++)p[n]=-16777216|e[n]<<16|a[n]<<8|k[n]},_fillFromNon8Bit:function(n){var p=this.pixels,m=this.mask,a=this.statistics;if(!n||!p||!p.length)return 0;var e=1,k=0;e=1;a&&0<a.length?(k=a.map(function(d){return d.minValue}).reduce(function(d,g){return Math.min(d,g)}),e=
a.map(function(d){return d.maxValue-d.minValue}).reduce(function(d,g){return Math.max(d,g)}),e=255/e):(e=255,"S8"===this.pixelType?(k=-128,e=127):"U16"===this.pixelType?e=65535:"S16"===this.pixelType?(k=-32768,e=32767):"U32"===this.pixelType?e=4294967295:"S32"===this.pixelType?(k=-2147483648,e=2147483647):"F32"===this.pixelType?(k=-3.4*1E39,e=3.4*1E39):"F64"===this.pixelType&&(k=-Number.MAX_VALUE,e=Number.MAX_VALUE),e=255/(e-k));n=new Uint32Array(n);a=this.width*this.height;var h=p[0];if(h.length!==
a)return 0;if(3<=p.length){var f=p[1];var c=p[2];if(m&&m.length===a)for(p=0;p<a;p++)m[p]&&(n[p]=-16777216|(c[p]-k)*e<<16|(f[p]-k)*e<<8|(h[p]-k)*e);else for(p=0;p<a;p++)n[p]=-16777216|(c[p]-k)*e<<16|(f[p]-k)*e<<8|(h[p]-k)*e}else if(m&&m.length===a)for(p=0;p<a;p++)f=(h[p]-k)*e,m[p]&&(n[p]=-16777216|f<<16|f<<8|f);else for(p=0;p<a;p++)f=(h[p]-k)*e,n[p]=-16777216|f<<16|f<<8|f},_fillFrom32Bit:function(n){var p=this.pixels,m=this.mask;if(!n||!p||!p.length)return 0;var a,e;var k=a=e=p[0];3<=p.length&&(a=
p[1],e=p[2]);var h=this.width*this.height;if(k.length!==h)return 0;var f=0;if(m&&m.length===h)for(p=0;p<h;p++)n[f++]=k[p],n[f++]=a[p],n[f++]=e[p],n[f++]=m[p]&1;else for(p=0;p<h;p++)n[f++]=k[p],n[f++]=a[p],n[f++]=e[p],n[f++]=1},_calculateBandStatistics:function(n,p){var m=Infinity,a=-Infinity,e=n.length,k,h=0;if(p)for(k=0;k<e;k++)p[k]&&(h=n[k],m=h<m?h:m,a=h>a?h:a);else for(k=0;k<e;k++)h=n[k],m=h<m?h:m,a=h>a?h:a;return{minValue:m,maxValue:a}}});l.setObject("layers.PixelBlock",F,q);return F})},"esri/layers/ImageServiceLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query dojo/DeferredList dojo/debounce ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ../renderers/colorRampUtils ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y,u,B,x,A,E,J,O,S,X,Y){F=F(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_rasterFunctionServiceInfoProps:"bandCount pixelType hasRasterAttributeTable hasColormap hasHistograms minValues maxValues meanValues stdvValues serviceDataType".split(" "),_pixelTypeRanges:{U1:[0,1],U2:[0,3],U4:[0,15],U8:[0,255],S8:[-128,127],U16:[0,65535],S16:[-32768,32767]},_eventMap:{"rendering-change":!0,
"mosaic-rule-change":!0,"spatial-reference-change":!0,"renderer-change":!0},_cachedVariableStats:{},_cachedVariableHistogram:{},constructor:function(K,P){this.useMapTime=P&&P.hasOwnProperty("useMapTime")?!!P.useMapTime:!0},_initialize:function(K,P){this._url=r.urlToObject(K);this.raster=new B(this._url.path);this._rasterFunctionTemplateInfos={};this._rasterFunctionTemplatePromise={};this._customRenderingRuleId={};this.infoTemplate=P&&P.infoTemplate;var Q=P&&P.imageServiceParameters;this.format=Q&&
Q.format;this.compressionTolerance=Q&&Q.compressionTolerance?Q.compressionTolerance:.01;this.interpolation=Q?Q.interpolation:null;this.compressionQuality=Q?Q.compressionQuality:null;this.bandIds=Q?Q.bandIds:null;this.mosaicRule=Q?Q.mosaicRule:null;this.renderingRule=Q?Q.renderingRule:null;this.renderer=Q?Q.renderer:null;this.useMapDimensionValue=P&&P.hasOwnProperty("useMapDimensionValue")?!!P.useMapDimensionValue:!0;this.hasImageFilter=P&&P.hasImageFilter;this.activeMapDimensions=P&&P.activeMapDimensions;
this._params=l.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},Q?Q.toJson():{});this.pixelFilter=P&&P.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=l.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=l.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=l.hitch(this,
this._initLayer);this._queryVisibleRastersHandler=l.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._renderingRuleAttributeTable={};this._renderingRuleColormap={};this._useRenderingRuleAttributeTable=!1;this._loadCallback=P&&P.loadCallback;Q&&Q.renderer&&(Q.renderer.outputUnit||Q.renderer.inputUnit)&&(this.vectorFieldPixelFilter=new A,this.vectorFieldPixelFilter.setUnits(Q.renderer.inputUnit,Q.renderer.outputUnit));
(Q=P&&P.resourceInfo)?this._initLayer(Q):g({url:this._url.path,content:l.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(K,P){if(null!==K&&void 0!==K){this._findCredential();(this.credential&&this.credential.ssl||K&&K._ssl)&&this._useSSL();var Q=this.minScale,ba=this.maxScale;l.mixin(this,K);this.minScale=Q;this.maxScale=ba;this.initialExtent=this.fullExtent=this.extent=
new w(K.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var ca=this.minValues,ka=this.maxValues,aa=this.meanValues,ja=this.stdvValues,oa=this.bands=[];Q=0;for(ba=this.bandCount;Q<ba;Q++)oa[Q]={min:ca[Q],max:ka[Q],mean:aa[Q],stddev:ja[Q]};this.timeInfo=(Q=this.timeInfo)&&Q.timeExtent?new J(Q):null;ba=this.fields=[];if(ca=K.fields)for(Q=0;Q<ca.length;Q++)ba.push(new O(ca[Q]));this._updateInfoTemplateFields(this.fields);
this.version=K.currentVersion;this.version||(this.version="fields"in K||"objectIdField"in K||"timeInfo"in K?10:9.3);d.isDefined(K.minScale)&&!this._hasMin&&"Raster"!==K.cacheType&&this.setMinScale(K.minScale);d.isDefined(K.maxScale)&&!this._hasMax&&"Raster"!==K.cacheType&&this.setMaxScale(K.maxScale);Q={};K.defaultMosaicMethod?(Q.method=K.defaultMosaicMethod,Q.operation=K.mosaicOperator,Q.sortField=K.sortField,Q.sortValue=K.sortValue):Q.method=D.METHOD_NONE;this.defaultMosaicRule=new D(Q);this.defaultMosaicRule.ascending=
!0;this._useRenderingRuleAttributeTable=10<this.version&&"esriImageServiceDataTypeThematic"===this.serviceDataType;this._setDefaultRenderingRule(!0);this._getRenderingRuleAttributeTableAndColormap();this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(l.hitch(this,function(U){U&&(U.features&&U.fields&&(this.rasterAttributeTable=
l.clone(U)),U.features&&0<U.features.length&&(this._rasterAttributeTableFeatures=l.clone(U.features)),U.fields&&0<U.fields.length&&(this._rasterAttributeTableFields=l.clone(U.fields)),this.renderingRule||!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh())}));this._initVectorPixelFilter();this.bandIds||2!==this.bandCount||this.renderingRule||"esri.layers.ArcGISImageServiceLayer"!==this.declaredClass||
this.setBandIds([0,0,0],!0);!(10.3<=this.version&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length)||this._url.query&&this._url.query.raster||this.getRasterFunctionInfos().then(l.hitch(this,function(U){if(U&&U.length){this.rasterFunctionInfos=U;var ea=[],fa;q.forEach(U,function(pa){if(pa){var ra=pa.functionType;fa=fa||1===ra||2===ra;ea.push(pa.name)}},this);this._hasItemLevelRFT=fa;this._rasterFunctionNames=ea;fa&&(this._initVectorPixelFilter(),this.refresh())}}));this.loaded=!0;this._setDefaultFilter();
this.onLoad(this);if(Q=this._loadCallback)delete this._loadCallback,Q(this)}},_updateInfoTemplateFields:function(K){if(K&&!(1>K.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var P,Q;var ba=this.infoTemplate.info.fieldInfos;for(P=0;P<K.length;P++){var ca=K[P];for(Q=0;Q<ba.length;Q++)if(ba[Q].fieldName.toLowerCase()===ca.name.toLowerCase()&&ba[Q].fieldName!==ca.name){ba[Q].fieldName=ca.name;break}}}},getKeyProperties:function(K){var P=
this._url.path+"/keyProperties",Q=new b(t._dfdCanceller),ba={f:"json"};K&&K.renderingRule&&(ba.renderingRule=n.toJson(K.renderingRule.toJson()));10<this.version?(Q._pendingDfd=g({url:P,content:ba,handleAs:"json",callbackParamName:"callback"}),Q._pendingDfd.then(function(ca){Q.callback(ca)},function(ca){Q.errback(ca)})):(K=Error("Layer does not have key properties"),K.log=!!p.isDebug,Q.errback(K));return Q},getRasterAttributeTable:function(K){var P=this._url.path+"/rasterAttributeTable",Q=new b(t._dfdCanceller),
ba={f:"json"},ca=this.hasRasterAttributeTable;K&&K.renderingRule&&(ba.renderingRule=n.toJson(K.renderingRule.toJson()),ca=!0);!this.loaded||10<this.version&&ca?(Q._pendingDfd=g({url:P,content:ba,handleAs:"json",callbackParamName:"callback"}),Q._pendingDfd.then(function(ka){Q.callback(ka)},function(ka){Q.errback(ka)})):(K=Error("Layer does not support raster attribute table"),K.log=!!p.isDebug,Q.errback(K));return Q},getRenderingRuleAttributeTable:function(K){var P=new b(t._dfdCanceller);if(!K||!K.renderingRule)return P.errback(Error("Rendering rule is not specified")),
P;K=K.renderingRule;var Q=this._getRenderingRuleId(K);this._renderingRuleAttributeTable&&Q&&this._renderingRuleAttributeTable.hasOwnProperty(Q)?P.resolve(this._renderingRuleAttributeTable[Q]):P=this.getRasterAttributeTable({renderingRule:K}).then(l.hitch(this,function(ba){if(ba&&ba.features&&ba.features.length&&ba.fields&&ba.fields.length){var ca={features:l.clone(ba.features),fields:l.clone(ba.fields)};Q&&(this._renderingRuleAttributeTable[Q]=ca)}return ca}));return P},_initVectorPixelFilter:function(){var K;
this._hasItemLevelRFT&&this.renderingRule&&(K=this._getItemLevelRenderingRule(this.renderingRule));if(K=K||this.renderingRule)return this.getRenderingRuleServiceInfo(K).then(l.hitch(this,function(P){!P||!this._isVectorData(P)&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass||d.isDefined(this.pixelFilter)||(this.vectorFieldPixelFilter=this.vectorFieldPixelFilter||new A,this.vectorFieldPixelFilter.isDataUV="esriImageServiceDataTypeVector-UV"===P.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,
this.getKeyProperties().then(l.hitch(this,this._setFlowRepresentation)),this._applyVectorResamplingType(P.serviceDataType))}))},_applyVectorResamplingType:function(K){if(K){var P=this.renderingRule;P&&"Resample"===P.functionName&&((P.functionArguments||{}).ResamplingType="esriImageServiceDataTypeVector-UV"===K?7:10,this.setRenderingRule(new y(P.toJson())))}},_getRasterAttributeTableFeatures:function(){var K=new b;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return K.resolve(this._rasterAttributeTableFeatures),
K;if(10<this.version&&this.hasRasterAttributeTable)return K=this.getRasterAttributeTable(),K.then(l.hitch(this,function(P){P&&P.features&&0<P.features.length&&(this._rasterAttributeTableFeatures=l.clone(P.features))})),K;K.resolve(this._rasterAttributeTableFeatures);return K},_getRenderingRuleAttributeTableFeatures:function(K){K=K&&K.renderingRule;return K?this.getRenderingRuleAttributeTable({renderingRule:K}).then(function(P){return P&&P.features}):(K=new b,K.errback(Error("Rendering rule is not specified")),
K)},_getRenderingRuleAttributeTableAndColormap:function(){this.renderingRule&&this.getRenderingRuleServiceInfo(this.renderingRule).then(l.hitch(this,function(K){K.hasRasterAttributeTable&&this.getRenderingRuleAttributeTable({renderingRule:this.renderingRule}).then(l.hitch(this,function(){!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh()}));K.hasColormap&&this.getRenderingRuleColormap({renderingRule:this.renderingRule}).then(l.hitch(this,
function(){this.renderer&&"esri.renderer.ColormapRenderer"===this.renderer.declaredClass&&this.refresh()}))}))},getCustomRasterFields:function(K){var P=K?K.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;K=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var Q={name:this._rasterFieldPrefix+"ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:K},ba={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,
length:50,type:K},ca={name:this._rasterFieldPrefix+"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},ka=this.fields?l.clone(this.fields):[];K=ka.length;ka[K]=ba;10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||!this.rasterFunctionInfos.length||this._isRenderingRuleAProcessingTemplate({functionName:"none"}))&&(K++,ka[K]=ca);if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||
this.fields&&0<this.fields.length)K++,ka[K]=Q;!d.isDefined(this.pixelFilter)||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(Q={name:this._rasterFieldPrefix+"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},ba={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},K++,ka[K]=Q,K++,ka[K]=ba);K=this._rasterAttributeTableFields;(Q=this.renderingRule&&
this._getRenderingRuleId(this.renderingRule))&&this._renderingRuleAttributeTable&&this._renderingRuleAttributeTable.hasOwnProperty(Q)&&(K=this._renderingRuleAttributeTable[Q].fields);K&&0<K.length&&(K=q.filter(K,function(ja){return"esriFieldTypeOID"!==ja.type&&"value"!==ja.name.toLowerCase()}),K=q.map(K,function(ja){var oa=l.clone(ja);oa.name=P+ja.name;return oa}),ka=ka.concat(K));var aa=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&q.forEach(this.rasterFunctionInfos,
function(ja){ja&&ja.name&&"none"!==ja.name.toLowerCase()&&(ja={name:aa+ja.name.replace(/ /gi,"_"),alias:ja.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},ka.push(ja))});return ka},_applyTimeToMultidimensionalCRF:function(K,P){var Q=this._isTimeSupportedOnCRF();if(Q&&(!K||!K.multidimensionalDefinition))return K;var ba=this.timeInfo&&this.timeInfo.startTimeField;if((P=P||this._params.time)&&ba&&this._isMultidimensionalCRF()){K=l.clone(K||this.defaultMosaicRule)||new D;K.multidimensionalDefinition=
K.multidimensionalDefinition||[];var ca=K.multidimensionalDefinition.filter(function(aa){return aa.dimensionName===ba}),ka=P.split(",").map(function(aa){return parseInt(aa,10)});2===ka.length&&ka[0]===ka[1]&&(ka.length=1);0<ca.length?Q?K.multidimensionalDefinition.forEach(function(aa){aa.dimensionName===ba&&(aa.dimensionName=null,aa.isSlice=null,aa.values=null)}):K.multidimensionalDefinition.forEach(function(aa){aa.dimensionName===ba&&(aa.isSlice=1===ka.length,aa.values=1===ka.length?ka:[ka])}):Q||
(K.multidimensionalDefinition.some(function(aa){return null!=aa.variableName&&null==aa.dimensionName})?K.multidimensionalDefinition.forEach(function(aa){null!=aa.variableName&&null==aa.dimensionName&&(aa.dimensionName=ba,aa.isSlice=1===ka.length,aa.values=1===ka.length?ka:[ka])}):K.multidimensionalDefinition.push(new u({variableName:"",dimensionName:ba,isSlice:1===ka.length,values:1===ka.length?ka:[ka]})));this._cleanupMultidimensionalDefinition(K)}return K},_prepareGetImageParameters:function(K,
P,Q,ba){ba=d.isDefined(ba)?ba:this._params;if(this.renderer||this._hasItemLevelRFT&&this.renderingRule){var ca=this.getExportImageRenderingRule();ba.renderingRule=ca?n.toJson(ca.toJson()):null}ca=this.getExportImageMosaicRule(ba);ba.mosaicRule=ca?n.toJson(ca.toJson()):null;ca=K.spatialReference.wkid||n.toJson(K.spatialReference.toJson(!1));delete ba._ts;l.mixin(ba,{bbox:K.xmin+","+K.ymin+","+K.xmax+","+K.ymax,imageSR:ca,bboxSR:ca,size:P+","+Q},this.disableClientCaching?{_ts:(new Date).getTime()}:
{});delete ba.compressionTolerance;ba.format&&"LERC"===ba.format.toUpperCase()&&(ba.compressionTolerance=this.compressionTolerance);ba.token=this._getToken()},getImageUrl:function(K,P,Q,ba,ca){ca=d.isDefined(ca)?ca:this._params;this._prepareGetImageParameters(K,P,Q,ca);K=l.clone(ca);this._cleanupRequestParams(K);P=this._url.path+"/exportImage?";Q=r.addProxy(P+e.objectToQuery(l.mixin(K,{f:"image"})));var ka=K.token;Q.length>c.defaults.io.postLength||this.useMapImage?this._jsonRequest=g({url:P,content:l.mixin(K,
{f:"json"}),callbackParamName:"callback",load:function(aa,ja){var oa=aa.href;ka&&(oa+=-1===oa.indexOf("?")?"?token\x3d"+ka:"\x26token\x3d"+ka);ba(r.addProxy(oa))},error:this._errorHandler}):ba(Q)},onRenderingChange:function(){},onMosaicRuleChange:function(){},onRendererChange:function(){},setInterpolation:function(K,P){this.interpolation=this._params.interpolation=K;P||this.refresh(!0)},setCompressionQuality:function(K,P){this.compressionQuality=this._params.compressionQuality=K;P||this.refresh(!0)},
setCompressionTolerance:function(K,P){this.compressionTolerance=K;P||this.refresh(!0)},setBandIds:function(K,P){var Q=!1;this.bandIds!==K&&(Q=!0);this.bandIds=K;this._params.bandIds=K?K.join(","):null;if(Q&&!P)this.onRenderingChange();P||this.refresh(!0)},setDefaultBandIds:function(K){this.bandIds=this._params.bandIds=null;K||this.refresh(!0)},setDisableClientCaching:function(K){this.disableClientCaching=K},setMosaicRule:function(K,P){var Q=!1;this.mosaicRule!==K&&(Q=!0);this.mosaicRule=K;this._params.mosaicRule=
n.toJson(K.toJson());if(Q&&!P)this.onMosaicRuleChange();P||this.refresh(!0)},getRasterFunctionInfos:function(){if(!(10.3>this.version)&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length)return g({url:this._url.path+"/rasterFunctionInfos",content:{f:"json"},handleAs:"json",load:function(K){return K&&K.rasterFunctionInfos}})},setRenderingRule:function(K,P){var Q=!1;this.renderingRule!==K&&(Q=!0);this.renderingRule=K;this._params.renderingRule=K?n.toJson(K.toJson()):null;this._useRenderingRuleAttributeTable?
this.getRenderingRuleAttributeTable({renderingRule:K}):"esri.layers.RasterXLayer"!==this.declaredClass&&this._getRenderingRuleAttributeTableAndColormap();if(Q)this.onRenderingChange();this._setDefaultFilter();P||this.refresh(!0)},setImageFormat:function(K,P){this.format=this._params.format=K;this._setDefaultFilter();P||this.refresh(!0)},setInfoTemplate:function(K){this.infoTemplate=K;this._updateInfoTemplateFields(this.fields)},setDefinitionExpression:function(K,P){var Q=this.mosaicRule?this.mosaicRule.toJson():
{};this.mosaicRule||(this.defaultMosaicRule?Q=this.defaultMosaicRule.toJson():Q.method=D.METHOD_NONE);Q.where=K;Q=new D(Q);this.setMosaicRule(Q,P);return this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null},setPixelFilter:function(K){this.pixelFilter=K;this._isDefaultPixelFilter=!1},getPixelData:function(K){return K?(this._useBrowserDecoding()&&(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),
this.originalPixelData):this.pixelData},getExportImageRenderingRule:function(){var K;this._hasItemLevelRFT&&this.renderingRule&&(K=this._getServiceLevelRenderingRule(this.renderingRule));K=K||this.renderingRule;this._isItemLevelRasterFunction(this.renderingRule)&&(K=void 0);return this._combineRenderingRule(this._convertRendererToRenderingRule(this.renderer),K)},getExportImageMosaicRule:function(){var K=this.mosaicRule,P;this._hasItemLevelRFT&&this.renderingRule&&(P=this._getItemLevelRenderingRule(this.renderingRule));
P&&(K=K||this.defaultMosaicRule||new D,K.itemRenderingRule=P);return K=this._applyTimeToMultidimensionalCRF(K)},redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},getHistograms:function(K){var P=K.variableName,Q=(K=(K=K.renderingRule||this.renderingRule||this.defaultRenderingRule)&&"none"!==K.functionName.toLowerCase()?K.toJson():null)?K.functionName:"",ba=new b(t._dfdCanceller);if((P||""===P)&&this._cachedVariableHistogram[P]&&this._cachedVariableHistogram[P][Q])return ba.resolve(this._cachedVariableHistogram[P][Q]),
ba;if(this.hasHistograms){var ca={f:"json"};P&&(ca.variable=P);K&&10.9<this.version&&(ca.renderingRule=JSON.stringify(K));ba._pendingDfd=g({url:this._url.path+"/histograms",content:ca,handleAs:"json",callbackParamName:"callback"});ba._pendingDfd.then(l.hitch(this,function(ka){if(P||""===P)this._cachedVariableHistogram[P]=this._cachedVariableHistogram[P]||{},this._cachedVariableHistogram[P][Q]=ka;ba.callback(ka)}),function(ka){ba.errback(ka)})}else K=Error("Layer does not have histograms."),K.log=
!!p.isDebug,ba.errback(K);return ba},computeHistograms:function(K){var P=new b(t._dfdCanceller);if(10.1<=this.currentVersion){K=K||{};var Q=K.geometry||this.fullExtent,ba=(K.geometry||this.fullExtent).toJson();Q="extent"===Q.type?"esriGeometryEnvelope":"esriGeometryPolygon";var ca=K.renderingRule||this.renderingRule||this.defaultRenderingRule;ca=ca?ca.toJson():null;var ka=K.mosaicRule||this.mosaicRule||this.defaultMosaicRule;ka=ka?ka.toJson():null;K=K.pixelSize||{x:this.pixelSizeX,y:this.pixelSizeY};
P._pendingDfd=g({url:this._url.path+"/computeHistograms",content:l.mixin({f:"json",geometry:JSON.stringify(ba),geometryType:Q,renderingRule:JSON.stringify(ca),mosaicRule:JSON.stringify(ka),pixelSize:JSON.stringify(K),callbackParamName:"callback"}),handleAs:"json"});P._pendingDfd.then(function(aa){P.callback(aa)},function(aa){P.errback(aa)})}else ba=Error("Layer doesn't support computeHistograms."),ba.log=!!p.isDebug,P.errback(ba);return P},getRenderingRuleServiceInfo:function(K,P){function Q(ka){return ka.name&&
ka.arguments&&ka["function"]&&ka.hasOwnProperty("functionType")}var ba=new t._fixDfd(new b(t._dfdCanceller));if(!K)return ba.errback(Error("Rendering rule is not specified")),ba;if(Q(K))"ClipFunction"===K["function"].type&&(K=this._handleClipFunctionInRenderingRule(K));else{var ca=this._getRenderingRuleId(K);if(ca){if(this._rasterFunctionTemplateInfos[ca])return ba.resolve(this._rasterFunctionTemplateInfos[ca]),ba;if(this._rasterFunctionTemplatePromise[ca])return ba=this._rasterFunctionTemplatePromise[ca]}}ba=
g({url:this._url.path,content:l.mixin(l.mixin({f:"json",renderingRule:JSON.stringify(K.toJson())},this._url.query)),callbackParamName:"callback",load:l.hitch(this,function(ka){var aa={};q.forEach(this._rasterFunctionServiceInfoProps,function(ja){aa[ja]=ka[ja]});Q(K)||(this._rasterFunctionTemplateInfos[ca]=aa);return aa}),error:P||this._errorHandler});ca&&!this._rasterFunctionTemplatePromise[ca]&&(this._rasterFunctionTemplatePromise[ca]=ba);return ba},queryVisibleRasters:function(K,P,Q,ba){var ca=
this._map,ka=t._fixDfd(new b(t._dfdCanceller));this._visibleRasters=[];var aa,ja,oa=!0,U=!0,ea=null,fa=this.infoTemplate?this.infoTemplate.info:null,pa=fa?l.clone(this.infoTemplate.info.fieldInfos):null;P=P||{};if(fa&&this.infoTemplate.info.mediaInfos&&this.infoTemplate.info.mediaInfos.length){var ra=[];q.forEach(this.infoTemplate.info.mediaInfos,function(qa){ra=ra.concat(qa&&qa.value&&qa.value.fields||[])});ra.length&&q.forEach(pa,function(qa){qa&&-1<ra.indexOf(qa.fieldName)&&(qa.visible=!0)})}var va=
function(qa){var da=fa&&fa.title&&-1<fa.title.toLowerCase().indexOf(qa.toLowerCase());qa=fa&&fa.description&&-1<fa.description.toLowerCase().indexOf(qa.toLowerCase());return da||qa};if(pa&&0<pa.length)for(oa=!1,aa=0;aa<pa.length;aa++)if((ja=pa[aa])&&ja.fieldName.toLowerCase()!==this._rasterFieldPrefix.toLowerCase()+"servicepixelvalue"&&(ja.visible||va(ja.fieldName))){oa=!0;break}this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("returnTopmostRaster")&&
(ea=this.infoTemplate.info.layerOptions.returnTopmostRaster?1:null);pa&&0<pa.length&&(U=!1,q.some(pa,function(qa){if(qa&&qa.fieldName.toLowerCase()===this._rasterFieldPrefix.toLowerCase()+"itempixelvalue"&&qa.visible)return U=!0},this),va(this._rasterFieldPrefix.toLowerCase()+"itempixelvalue")&&(U=!0));var Fa=(ja=this._removeVisualizationStretchFunction(this.renderingRule))&&ja.functionName,Ha=[];if(10.4<=this.version){var Ca=!1;if(this.rasterFunctionInfos&&pa){var T=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;
q.forEach(this.rasterFunctionInfos,function(qa){var da=T+qa.name.replace(/ /gi,"_");q.some(pa,function(Z){return Z.visible&&Z.fieldName===da})&&(Ca=Ca||Fa&&Fa===qa.name,Ha.push(new y({rasterFunction:qa.name})))})}ja&&!Ca&&Ha.push(ja)}aa=new Y;aa.geometry=K.geometry;aa.returnGeometry=this._map.spatialReference.equals(this.spatialReference);aa.returnCatalogItems=oa;aa.timeExtent=this.timeInfo?K.timeExtent:null;aa.returnPixelValues=U;aa.maxItemCount=ea||K.maxItemCount;this._params.time&&this.mosaicRule?
(K=l.clone(this.mosaicRule),K=this._filterOutTimeDimension(K),aa.mosaicRule=K):aa.mosaicRule=this.mosaicRule||null;this._isMultidimensionalCRF()&&aa.timeExtent&&(aa.mosaicRule=this._applyTimeToMultidimensionalCRF(aa.mosaicRule,aa.timeExtent.toJson().join(",")),this._isTimeSupportedOnCRF()||delete aa.timeExtent);aa.renderingRule=10.4>this.version&&ja||null;aa.renderingRules=Ha||null;10.8>this.version&&(aa.returnPixelValues=void 0,aa.maxItemCount=void 0);ca&&(ca=new v((ca.extent.xmax-ca.extent.xmin)/
ca.width,(ca.extent.ymax-ca.extent.ymin)/ca.height,ca.extent.spatialReference),aa.pixelSize=ca);P.requestParams=aa;var ia=this;ca=new X(this.url);(ka._pendingDfd=ca.execute(aa)).addCallbacks(function(qa){ia._queryVisibleRastersHandler(qa,P,Q,ba,ka)},function(qa){ia._resolve([qa],null,ba,ka,!0)});return ka},_queryVisibleRastersHandler:function(K,P,Q,ba,ca){function ka(){var W=this.getCustomRasterFields(P),H=this._getDomainFields(W),na=P?P.returnDomainValues:!1,sa=P&&P.rasterAttributeTableFieldPrefix,
la,Na,Ra,ua,Aa,ya,wa,xa,Ba,Da;W=(W=this._getRenderingRuleId(this.renderingRule))&&this._rasterFunctionTemplateInfos[W];this.renderingRule&&(this._useRenderingRuleAttributeTable||W)?(W=this._getRenderingRuleAttributeTableFeatures({renderingRule:this.renderingRule}),this.hasRasterAttributeTable||(Da=aa)):W=this._getRasterAttributeTableFeatures();W.then(l.hitch(this,function(Ka){for(la=0;la<ia.length;la++){I=ia[la];I.setInfoTemplate(this.infoTemplate);I._layer=this;if(aa){Ba=aa.replace(/ /gi,"").split(",");
Na=aa;Ra=Ba;qa&&qa.length>=la&&(Na=qa[la].replace(/ /gi,", "),Ra=qa[la].split(" "));I.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=Ra;I.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=Ba;ja&&(I.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=ja.replace(/ /gi,"").split(","));if(this.pixelFilter){var Ia=new x({height:1,width:1,pixelType:"F32",pixels:[],statistics:[]});q.forEach(Ra,function(Ea){Ia.addData({pixels:[Ea],statistics:{minValue:Ea,maxValue:Ea,noDataValue:null}})});
this.pixelFilter({pixelBlock:Ia,extent:new w(0,0,0,0,this._map.spatialReference)});if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)I.attributes[this._rasterFieldPrefix+"Magnitude"]=Ia.pixels[0][0],I.attributes[this._rasterFieldPrefix+"Direction"]=Ia.pixels[1][0]}q.forEach(pa,function(Ea){I.attributes[Ea.name]=Ea.value});var Oa=0<this.fields.length?Da||Na:Da||ja;if(Ka&&0<Ka.length&&(ua=q.filter(Ka,function(Ea){if(Ea&&Ea.attributes)return Ea.attributes.hasOwnProperty("Value")?
Ea.attributes.Value==Oa:Ea.attributes.VALUE==Oa}),0<ua.length&&(Aa=l.clone(ua[0]),sa&&Aa))){xa={};for(ya in Aa.attributes)Aa.attributes.hasOwnProperty(ya)&&(wa=sa+ya,xa[wa]=Aa.attributes[ya]);Aa.attributes=xa;I.attributes=l.mixin(I.attributes,Aa.attributes)}}na&&H&&0<H.length&&q.forEach(H,function(Ea){if(Ea){var La=I.attributes[Ea.name];d.isDefined(La)&&(La=this._getDomainValue(Ea.domain,La),d.isDefined(La)&&(I.attributes[Ea.name]=La))}},this);M.push(I);this._visibleRasters.push(I)}this._resolve([M,
null,!0],null,Q,ca)}))}var aa=K.value,ja=K.value,oa=0,U=0,ea=this,fa=this.objectIdField,pa=[];ba=P.requestParams.renderingRules;var ra=K.processedValues,va=this.renderingRule&&n.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());if(ba&&ra&&ba.length===ra.length){var Fa=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;q.forEach(ba,function(W,H){if(W.functionName){var na={name:Fa+W.functionName.replace(/ /gi,"_"),value:ra[H].replace(/ /gi,"").split(",")};pa.push(na);
va&&va===n.toJson(W.toJson())&&(aa=ra[H])}})}ba=this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:!0;if(K.catalogItems){var Ha=0,Ca=K.catalogItems.features.length;var T=0;var ia=Array(Ca);var qa=Array(Ca);var da=Array(Ca);if(K.properties&&K.properties.Values){Ca=K.properties.Values.length;for(oa=0;oa<Ca;oa++)-1<K.properties.Values[oa].toLowerCase().indexOf("nodata")&&
T++;var Z=Ca-T;for(oa=0;oa<Ca;oa++){T=!0;if(-1<K.properties.Values[oa].toLowerCase().indexOf("nodata")){var ma=Z++;ba||(T=!1,ia.length--,qa.length--,da.length--)}else ma=Ha++;T&&(ia[ma]=K.catalogItems.features[oa],qa[ma]=K.properties.Values[oa],da[ma]=ia[ma].attributes[fa])}}else{for(oa=0;oa<Ca;oa++)ia[oa]=K.catalogItems.features[oa],da[oa]=ia[oa].attributes[fa];qa=null}}this._visibleRasters=[];(K=-1<aa.toLowerCase().indexOf("nodata"))&&!ba&&(ia=[],qa=[],da=[]);if(aa&&!ia&&!K){fa="ObjectId";ia=[];
var I=new S(new w(this.fullExtent),null,{ObjectId:0});ia.push(I)}var M=[];ia?!this._map.spatialReference.equals(this.spatialReference)&&da&&0<da.length?g({url:this._url.path+"/query",content:{f:"json",objectIds:da.join(","),returnGeometry:!0,outSR:n.toJson(ea._map.spatialReference.toJson()),outFields:fa},handleAs:"json",callbackParamName:"callback",load:function(W){if(0===W.features.length)ea._resolve([M,null,null],null,Q,ca);else{for(oa=0;oa<W.features.length;oa++)for(U=0;U<ia.length;U++)ia[U].attributes[fa]==
W.features[oa].attributes[fa]&&(ia[U].geometry=new z(W.features[oa].geometry),ia[U].geometry.setSpatialReference(ea._map.spatialReference));ka.call(ea)}},error:function(W){ea._resolve([M,null,null],null,Q,ca)}}):ka.call(this):this._resolve([M,null,null],null,Q,ca)},getVisibleRasters:function(){var K=this._visibleRasters,P=[],Q;for(Q in K)K.hasOwnProperty(Q)&&P.push(K[Q]);return P},_getDomainFields:function(K){if(K){var P=[];q.forEach(K,function(Q){if(Q.domain){var ba={};ba.name=Q.name;ba.domain=Q.domain;
P.push(ba)}});return P}},_getDomainValue:function(K,P){if(K&&K.codedValues){var Q;q.some(K.codedValues,function(ba){return ba.code===P?(Q=ba.name,!0):!1});return Q}},_requestData:function(K,P,Q){this._rasterReadPromise&&this._rasterReadPromise.cancel();K=l.clone(K);var ba=K._normalize(!0);this._prepareGetImageParameters(ba,P,Q);P=l.clone(this._params);this._cleanupRequestParams(P);P.extent=K;P.format=P.format||(10.3<=this.version?"lerc":"jpgpng");"lerc"===P.format.toLowerCase()&&!P.lercVersion&&10.5<=
this.version&&(P.lercVersion=2);this._params.time&&this._isMultidimensionalCRF()&&!this._isTimeSupportedOnCRF()&&delete P.time;Q=null;this._useBrowserDecoding()&&(Q=new E({ctx:this._context}));P={imageServiceParameters:P,nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,decodeFunc:Q?l.hitch(Q,"decode"):null};this._rasterReadPromise=this.raster.read(P,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(K){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||
(this.originalPixelData=K,this.hasDataChanged=!0,this._setPixelData(K))},_setPixelData:function(K){K=this._clonePixelData(K);this.pixelFilter&&this.pixelFilter(K);this.pixelData=K;this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this._drawPixelData(),this._rasterReadPromise=null)},_clonePixelData:function(K){if(null===K||void 0===K)return K;var P={};K.extent&&(P.extent=l.clone(K.extent));K=K.pixelBlock;if(null===K||void 0===K)return P;P.pixelBlock=K.clone();return P},_setDefaultFilter:function(){},
_getPixelBlockFromCanvas:function(K,P,Q){K=K.getImageData(0,0,P,Q).data;var ba=P*Q,ca=0,ka=0,aa=new Uint8Array(ba),ja=new Uint8Array(ba),oa=new Uint8Array(ba),U=new Uint8Array(ba),ea=Infinity,fa=Infinity,pa=Infinity,ra=-Infinity,va=-Infinity,Fa=-Infinity;for(ca=0;ca<ba;ca++){var Ha=K[ka++];var Ca=K[ka++];var T=K[ka++];ea=ea<Ha?ea:Ha;ra=ra>Ha?ra:Ha;fa=fa<Ca?fa:Ca;va=va>Ca?va:Ca;pa=pa<T?pa:T;Fa=Fa>T?Fa:T;aa[ca]=Ha;ja[ca]=Ca;oa[ca]=T;U[ca]=K[ka++]&1}return new x({width:P,height:Q,pixels:[aa,ja,oa],pixelType:"U8",
mask:U,statistics:[{minValue:ea,maxValue:ra},{minValue:fa,maxValue:va},{minValue:pa,maxValue:Fa}]})},_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"===this.format.toLowerCase()||"jpg"===this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var K=this._url.path+"/multiDimensionalInfo",P=new b(t._dfdCanceller);if(this._multidimensionalInfo)return P.resolve(this._multidimensionalInfo),P;!this.loaded||
10.3<=this.version&&this.hasMultidimensions?(P._pendingDfd=g({url:K,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),P._pendingDfd.then(l.hitch(this,function(Q){this._multidimensionalInfo=Q.multidimensionalInfo;P.callback(Q.multidimensionalInfo)}),function(Q){P.errback(Q)})):(K=Error("Layer does not support multidimensional info"),K.log=!!p.isDebug,P.errback(K));return P},getStatistics:function(K){var P=new b(t._dfdCanceller);if(K&&this._cachedVariableStats[K])P.resolve(this._cachedVariableStats[K]);
else{var Q={f:"json"};K&&(Q.variable=K);P._pendingDfd=g({url:this._url.path+"/statistics",content:Q,handleAs:"json",callbackParamName:"callback"});P._pendingDfd.then(l.hitch(this,function(ba){ba=ba.statistics||ba.statitsics;var ca=[];ba&&ba[0]&&null!=ba[0].min?ba.forEach(function(ka){ca.push([ka.min,ka.max,ka.mean,ka.standardDeviation])}):ca=this.minValues&&this.minValues.length?this.minValues.map(function(ka,aa){return[ka,this.maxValues[aa],this.meanValues[aa],this.stdvValues[aa]]}.bind(this)):ba;
K&&(this._cachedVariableStats[K]=ca);P.callback(ca)}),function(ba){P.errback(ba)})}return P},getDefaultMultidimensionalDefinition:function(){var K=new b(t._dfdCanceller);if(this._defaultMultidimensionalDefinition)return K.resolve(l.clone(this._defaultMultidimensionalDefinition)),K;K._pendingDfd=this.getMultidimensionalInfo();K._pendingDfd.then(l.hitch(this,function(P){P=this._getDefaultMultidimensionalDefinition(P);K.callback(P)}),function(P){K.errback(P)});return K},_getDefaultMultidimensionalDefinition:function(K,
P,Q){var ba,ca=[],ka=this.defaultVariable||this.raster&&this.raster.defaultVariable;variableName=ka||"";dimensions=variableName.length?K.variables.filter(function(aa){return aa.name===variableName})[0].dimensions:K.variables[0].dimensions;Q&&(variableName=ka||K.variables[0].name);for(ba in dimensions)dimensions.hasOwnProperty(ba)&&(P||"StdTime"!==dimensions[ba].name)&&(K=dimensions[ba],ca.push(new u({variableName:variableName,dimensionName:K.name,isSlice:!K.hasRanges,values:[this._getDefaultDimensionValue(K)]})));
this._defaultMultidimensionalDefinition=ca;return l.clone(ca)},_getDefaultDimensionValue:function(K){if(K&&K.values&&K.values.length){var P=Infinity,Q;if(K.hasRanges)return K.values[0];if(K.name&&"stdz"===K.name.toLowerCase()){for(Q=0;Q<K.values.length;Q++){var ba=K.values[Q];var ca=Math.abs(ba-0);if(ca<P){P=ca;var ka=ba}if(0===ca)break}return ka}return K.extent[0]}},_setDefaultMultidimensionalDefinition:function(K){var P,Q={};this.getDefaultMultidimensionalDefinition().then(l.hitch(this,function(ba){P=
ba;0<P.length&&(this.mosaicRule?(Q=l.clone(this.mosaicRule),Q.multidimensionalDefinition=P):this.defaultMosaicRule?(Q=l.clone(this.defaultMosaicRule),Q.multidimensionalDefinition=P):Q=new D({multidimensionalDefinition:P}),this.setMosaicRule(Q,K))}))},_setDefaultRenderingRule:function(K){var P={},Q=this.renderingRule;if(!Q&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass&&!this.bandIds&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&"none"!==this.rasterFunctionInfos[0].name.toLowerCase())P.rasterFunction=
this.rasterFunctionInfos[0].name;else if("esri.layers.ArcGISImageServiceVectorLayer"===this.declaredClass&&10.3<this.version&&(!Q||"Resample"!==Q.functionName)){var ba="esriImageServiceDataTypeVector-UV"===this.serviceDataType?7:10;P.rasterFunction="Resample";P.rasterFunctionArguments={ResamplingType:ba,InputCellSize:{x:this.pixelSizeX,y:this.pixelSizeY}};Q&&(P.rasterFunctionArguments.Raster=Q.toJson())}P.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new y(P),this.setRenderingRule(this.defaultRenderingRule,
K))},_cleanupRequestParams:function(K){if(!K)return K;if(K.time&&K.mosaicRule){var P=new D(n.fromJson(K.mosaicRule));P=this._filterOutTimeDimension(P);K.mosaicRule=n.toJson(P.toJson())}P="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent renderer".split(" ");for(var Q in P)K.hasOwnProperty(P[Q])&&delete K[P[Q]];return K},_filterOutTimeDimension:function(K){if(this._isMultidimensionalCRF())return K;if(K&&K.multidimensionalDefinition&&0<K.multidimensionalDefinition.length){var P=
q.filter(K.multidimensionalDefinition,function(Q){return"StdTime"!==Q.dimensionName});K.multidimensionalDefinition=P}return K},_removeVisualizationStretchFunction:function(K){var P=K&&K.functionName;if(!P||"stretch"!==P.toLowerCase())return K;var Q=K.functionArguments.Raster;return Q&&Q.functionName&&q.some(this.rasterFunctionInfos,function(ba){return Q.functionName===ba.name})?Q:K},_isMultidimensionalCRF:function(){return 10.71<=this.version&&this.hasMultidimensions&&this.timeInfo&&!(this.objectIdField&&
this.fields&&1<this.fields.length)},_isTimeSupportedOnCRF:function(){return 10.8<=this.version},_cleanupMultidimensionalDefinition:function(K){K&&K.multidimensionalDefinition&&(K.multidimensionalDefinition=K.multidimensionalDefinition.filter(function(P){return!(!P.variableName&&!P.dimensionName)}),0===K.multidimensionalDefinition.length&&(K.multidimensionalDefinition=null))},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===
this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType||this.hasMultidimensions},_isVectorData:function(K){K=(K=K||this)&&K.serviceDataType;return"esriImageServiceDataTypeVector-UV"===K||"esriImageServiceDataTypeVector-MagDir"===K},_isRenderingRuleAProcessingTemplate:function(K){var P=K&&K.functionName;return!P||K.functionArguments?!1:q.some(P&&(this.rasterFunctionInfos||[]),function(Q){return Q&&Q.name&&Q.name.toLowerCase()===P.toLowerCase()})},_getRenderingRuleId:function(K){var P=
K&&K.functionName;if(P){if(this._isRenderingRuleAProcessingTemplate(K))return P;var Q=this._customRenderingRuleId[P];if(Q){if(Q!==K){for(var ba in this._customRenderingRuleId)if(this._customRenderingRuleId[ba]===K)return ba;for(Q=0;this._customRenderingRuleId[ca];)Q+=1;var ca;this._customRenderingRuleId[P+Q]=K}}else this._customRenderingRuleId[P]=K;return P}},_createPixelData:function(K){K=new x({width:2,height:2,pixels:K,pixelType:this.pixelType,statistics:K});var P=this.fullExtent.getCenter();P=
new w(P.x,P.y,P.x+this.pixelSizeX,P.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:K,extent:P}},_convertRendererToRenderingRule:function(K){var P=K&&K.declaredClass;if(!P||"esri.renderer.UniqueValueRenderer"!==P&&"esri.renderer.ClassBreaksRenderer"!==P&&"esri.renderer.StretchRenderer"!==P&&"esri.renderer.ShadedReliefRenderer"!==P&&"esri.renderer.ColormapRenderer"!==P)return null;var Q=null;"esri.renderer.StretchRenderer"===P?Q=K.toRenderingRule({convertToColormap:10.6>this.version}):"esri.renderer.ClassBreaksRenderer"===
P?Q=this._convertClassifyRenderer(K):"esri.renderer.UniqueValueRenderer"===P?Q=this._convertUniqueValueRenderer(K):"esri.renderer.ShadedReliefRenderer"===P?Q=this._convertShadedReliefRenderer(K):"esri.renderer.ColormapRenderer"===P&&(Q=this._convertColormapRenderer(K));return Q},_getValueField:function(K){if(K&&K.length){var P,Q;q.some(K,function(ba){if((Q=ba.name)&&"value"===Q.toLowerCase())return P=Q,!0});return P}},_convertColormapRenderer:function(K){var P=new y;P.functionName="Colormap";P.functionArguments=
{};K=K.colormapInfos.map(function(Q){return[Q.value].concat(Q.color)});P.functionArguments.Colormap=K;return P},_convertShadedReliefRenderer:function(K){var P=new y;P.functionName="Hillshade";var Q="traditional"===K.hillshadeType?0:1,ba="none"===K.scalingType?1:3,ca={HillshadeType:Q,SlopeType:ba,ZFactor:K.zFactor};0===Q&&(ca.Azimuth=K.azimuth,ca.Altitude=K.altitude);3===ba&&(ca.PSPower=K.pixelSizePower,ca.PSZFactor=K.pixelSizeFactor);P.functionArguments=ca;P.variableName="Raster";K.colorRamp&&(P.functionName=
"ShadedRelief",ca.Colormap=C.convertColorRampToColormap(K.colorRamp,256));return P},_convertClassifyRenderer:function(K){var P=[],Q=[],ba=[],ca=[],ka;var aa=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);var ja=this.hasRasterAttributeTable;if(aa){ja=this._rasterFunctionTemplateInfos[aa]?this._rasterFunctionTemplateInfos[aa].hasRasterAttributeTable:this.hasRasterAttributeTable;var oa=this._renderingRuleAttributeTable[aa];var U=this._rasterFunctionTemplateInfos[aa]}var ea=oa&&oa.features?
oa.features:this._rasterAttributeTableFeatures;var fa=this._getValueField(oa&&oa.fields?oa.fields:this._rasterAttributeTableFields);ja&&ea?(q.forEach(K.infos,function(pa,ra){var va,Fa=pa.symbol.color;Fa.a&&q.forEach(ea,function(Ha){va=Ha.attributes[K.attributeField];(va>=pa.minValue&&va<pa.maxValue||ra===K.infos.length-1&&va>=pa.minValue)&&ca.push([Ha.attributes[fa],Fa.r,Fa.g,Fa.b])},this)},this),aa=U&&U.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(ca,aa),aa=new y,aa.functionName=
"Colormap",aa.functionArguments={},aa.functionArguments.Colormap=ca,aa.variableName="Raster"):(q.forEach(K.infos,function(pa,ra){ka=pa.symbol&&pa.symbol.color;ka.a?(0===ra?P.push.call(P,pa.minValue,pa.maxValue+1E-4):P.push.call(P,pa.minValue+1E-4,pa.maxValue+1E-4),Q.push(ra),ca.push([ra,ka.r,ka.g,ka.b])):ba.push(pa.minValue,pa.maxValue)}),aa=U&&U.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(ca,aa),aa=new y,aa.functionName="Remap",aa.functionArguments={InputRanges:P,OutputValues:Q,
NoDataRanges:ba},aa.variableName="Raster",oa=new y,oa.functionName="Colormap",oa.functionArguments={Colormap:ca,Raster:aa},aa=oa);return aa},_convertUniqueValueRenderer:function(K){var P=[],Q=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);if(Q){var ba=this._renderingRuleAttributeTable[Q];var ca=this._rasterFunctionTemplateInfos[Q]}var ka=ba&&ba.features?ba.features:this._rasterAttributeTableFeatures;var aa=(Q=ba&&ba.fields?ba.fields:this._rasterAttributeTableFields)&&Q.length?this._getValueField(Q):
"Value";q.forEach(K.infos,function(ja){var oa=ja.symbol.color;oa.a&&(K.attributeField!==aa&&ka?q.forEach(ka,function(U){U.attributes[K.attributeField]==ja.value&&P.push([U.attributes[aa],oa.r,oa.g,oa.b])},this):P.push([ja.value,oa.r,oa.g,oa.b]))},this);this._adjustColormapToPixelTypeRange(P,ca&&ca.pixelType||this.pixelType);ca=new y;ca.functionName="Colormap";ca.functionArguments={};ca.functionArguments.Colormap=P;ca.variableName="Raster";return ca},_adjustColormapToPixelTypeRange:function(K,P){var Q=
this._pixelTypeRanges[P];Q&&K.push([Math.floor(Q[0]-1),0,0,0],[Math.ceil(Q[1]+1),0,0,0]);return K},_combineRenderingRule:function(K,P){if(!K||!P)return K||P;var Q=function(ca){var ka=ca.Raster;return ka=ka&&"esri.layers.RasterFunction"===ka.declaredClass?Q(ka.functionArguments):ca},ba=l.clone(K);"none"!==P.functionName.toLocaleLowerCase()&&(Q(ba.functionArguments).Raster=P);return ba},_isItemLevelRasterFunction:function(K){var P=K&&K.functionName;if(!P||!this._hasItemLevelRFT)return!1;var Q=!1;q.some(this.rasterFunctionInfos,
function(ba){if(ba&&ba.name===P){if(1===ba.functionType||2===ba.functionType)Q=!0;return!0}});return Q},_getServiceLevelRenderingRule:function(K){if(!this._hasItemLevelRFT||!K)return K;K=new y(K.toJson());var P=K.functionArguments;for(var Q;;)if((Q=P&&P.Raster)&&Q.functionArguments&&Q.functionArguments.Raster)P=Q,P=P.functionArguments;else{this._isItemLevelRasterFunction(Q)&&delete P.Raster;break}return K},_getItemLevelRenderingRule:function(K){if(!this._hasItemLevelRFT||!K)return null;if(this._isItemLevelRasterFunction(K))return K;
K=new y(K.toJson());for(K=K.functionArguments;;)if((K=K&&K.Raster)&&K.functionArguments&&K.functionArguments.Raster)K=K.functionArguments;else{if(this._isItemLevelRasterFunction(K))return K;break}},_resolve:function(K,P,Q,ba,ca){P&&this[P].apply(this,K);Q&&Q.apply(null,K);ba&&t._resDfd(ba,K,ca)},_toggleTime:function(){var K=this._map;this.timeInfo&&this.useMapTime&&K&&!this.suspended?(this._timeConnect||(this._timeConnect=m.connect(K,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(K.timeExtent)):
(m.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(K,P){this.useMapTime=K;this._toggleTime();!P&&this._map&&this.refresh(!0)},_setTime:function(K){this._params&&(this._params.time=K?K.toJson().join(","):null)},onResume:function(){if(this._isScientificData()||this.timeInfo)this._originalGetImageUrl=this._originalGetImageUrl||this.getImageUrl.bind(this),this.getImageUrl=h(this._originalGetImageUrl,200),this._debounceGetImageTimer&&clearTimeout(this._debounceGetImageTimer),
this._debounceGetImageTimer=setTimeout(function(){this.getImageUrl=this._originalGetImageUrl}.bind(this),5E3);this.inherited(arguments)},_onTimeExtentChangeHandler:function(K){this.suspended||(this._setTime(K),this.refresh(!0))},handleSpatialReferenceChange:function(){this.onSpatialReferenceChange()},getColormap:function(K){var P=this._url.path+"/colormap",Q=new b(t._dfdCanceller),ba={f:"json"};K&&K.renderingRule&&(ba.renderingRule=n.toJson(K.renderingRule.toJson()));this.hasColormap?(Q._pendingDfd=
g({url:P,content:ba,handleAs:"json",callbackParamName:"callback"}),Q._pendingDfd.then(function(ca){Q.callback(ca)},function(ca){Q.errback(ca)})):(K=Error("Layer does not support colormap"),K.log=!!p.isDebug,Q.errback(K));return Q},getRenderingRuleColormap:function(K){var P=new b(t._dfdCanceller);if(!K||!K.renderingRule)return P.errback(Error("Rendering rule is not specified")),P;K=K.renderingRule;var Q=this._getRenderingRuleId(K);this._renderingRuleColormap&&Q&&this._renderingRuleColormap.hasOwnProperty(Q)?
P.resolve(this._renderingRuleColormap[Q]):P=this.getColormap({renderingRule:K}).then(l.hitch(this,function(ba){ba=ba&&ba.colormap;Q&&(this._renderingRuleColormap[Q]=ba);return ba}));return P},_handleClipFunctionInRenderingRule:function(K){K=l.clone(K);var P=K.arguments,Q=P.ClippingGeometry&&P.ClippingGeometry.value,ba=P.Extent&&P.Extent.value;P.ClippingRaster&&P.ClippingRaster.value||Q||ba||(P=this._map.extent.toJson(),K.arguments.Extent.value=P,K.functionArguments.Extent.value=P,K._isTemplate&&(K._templateJson.arguments.Extent.value=
P));return K}});l.setObject("layers.ImageServiceLayerMixin",F,f);return F})},"dojo/debounce":function(){define([],function(){return function(F,l){var b;return function(){b&&clearTimeout(b);var q=this,n=arguments;b=setTimeout(function(){F.apply(q,n)},l)}}})},"esri/layers/Raster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec ./rasterFormats/Lerc2Codec".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r){var w,v,z,C,D,y;l=l(k,{declaredClass:"esri.layers.Raster",imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(E){this.imageServiceUrl=E;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(E,J,O){var S=this,X=new q(d._dfdCanceller);if(10>a("ie"))throw"This browser is not supported.";
if(!E.imageServiceParameters)throw"Insufficient parameters to read data";var Y=b.clone(E.imageServiceParameters),K=E.pixelType;n.some(this.validPixelTypes,function(aa){return aa===K})||(Y.pixelType="F32");n.some(this.validFormats,function(aa){return aa.toLowerCase()===Y.format.toLowerCase()})||(Y.format="lerc");var P=E.decodeFunc,Q;this._prepareGetImageParameters(Y);var ba=Y.width,ca=Y.height,ka=Y.extent;delete Y.width;delete Y.height;delete Y.extent;X._pendingDfd=h({url:this.imageServiceUrl+"/exportImage",
handleAs:"arraybuffer",content:b.mixin(Y,{f:"image"}),load:function(aa){S.decode(aa,{width:ba,height:ca,planes:null,pixelType:K,noDataValue:Y.noData,format:Y.format,decodeFunc:P}).then(function(ja){Q={pixelBlock:ja,extent:ka};S._resolve([Q,Y],"onRasterReadComplete",J,X)},function(ja){S._resolve([ja],null,O,X,!0)})},error:function(aa){S._resolve([aa],null,O,X,!0)}});return X.promise},decode:function(E,J){if(void 0===J||null===J)throw"missing decode options";var O;J.format&&(O=J.format.toUpperCase());
"BSQ"!==O&&"BIP"!==O&&(O=this._getFormat(E));var S=J.decodeFunc;if(void 0===S||null===S)S=this._getFormatDecoderDfd(O);return S(E,J)},onRasterReadComplete:function(){},_prepareGetImageParameters:function(E){if(E.size&&E.bbox){var J=E.size.split(",");E.width=parseFloat(J[0]);E.height=parseFloat(J[1]);E.extent||(J=E.bbox.split(","),E.extent=new f(parseFloat(J[0]),parseFloat(J[1]),parseFloat(J[2]),parseFloat(J[3]),new c(E.bboxSR)))}else{if(!E.width||Math.floor(E.width)!==E.width||!E.height||Math.floor(E.height)!==
E.height)throw"Incorrect Image Dimensions";if(!E.extent||"esri.geometry.Extent"!==E.extent.declaredClass)throw"Incorrect extent";J=E.extent;var O=J.spatialReference.wkid||m.toJson(J.spatialReference.toJson());delete E._ts;b.mixin(E,{bbox:J.xmin+","+J.ymin+","+J.xmax+","+J.ymax,imageSR:O,bboxSR:O,size:E.width+","+E.height},E.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(E,J,O){var S=E.ymax-E.ymin,X=E.xmax-E.xmin;O>=J?E.ymax=E.ymin+X*J/O:E.xmax=E.xmin+S*O/J;return E},
_resolve:function(E,J,O,S,X){J&&this[J].apply(this,E);O&&O.apply(null,E);S&&d._resDfd(S,E,X)},_getFormatDecoderDfd:function(E){var J=null;switch(E){case "LERC":J=this._decodeLerc;break;case "LERC2":J=this._decodeLerc2;break;case "JPEG":J=this._decodeJpeg;break;case "PNG":J=this._decodePng;break;case "BSQ":J=this._decodeBsq;break;case "BIP":J=this._decodeBip;break;case "TIFF":J=this._decodeTiff;break;default:J=function(O,S){throw"The raster format is not supported";}}J=b.hitch(this,J);return function(O,
S){var X=new q;try{if("LERC"===E||!0===D){var Y=J(O,S);X.resolve(Y)}else y.then(function(){Y=J(O,S);X.resolve(Y)})}catch(K){X.reject(K)}return X}},_getFormat:function(E){E=new Uint8Array(E,0,10);var J="";if(255===E[0]&&216===E[1])J="JPEG";else if(137===E[0]&&80===E[1]&&78===E[2]&&71===E[3])J="PNG";else if(67===E[0]&&110===E[1]&&116===E[2]&&90===E[3]&&73===E[4]&&109===E[5]&&97===E[6]&&103===E[7]&&101===E[8]&&32===E[9])J="LERC";else if(76===E[0]&&101===E[1]&&114===E[2]&&99===E[3]&&50===E[4]&&32===E[5])J=
"LERC2";else if(-1<String.fromCharCode.apply(null,E).toLowerCase().indexOf("error"))J="ERROR";else if(73===E[0]&&73===E[1]&&42===E[2]&&0===E[3]||77===E[0]&&77===E[1]&&0===E[2]&&42===E[3])J="TIFF";return J},_validateDecodeParams:function(E){if(!E.height||Math.floor(E.height)!==E.height)throw"Height not provided.";if(!E.width||Math.floor(E.width)!==E.width)throw"Width not provided.";},_decodeJpeg:function(E,J){if(!w)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(J);var O=(new w).decode(E);
if(!A(O,J))throw"The decoded image dimensions are incorrect.";var S=[],X;for(X=0;X<O.pixels.length;X++){var Y=O.pixels[X];S.push(this._calculateBandStatistics(Y))}return new g({width:O.width,height:O.height,pixels:O.pixels,pixelType:"U8",mask:O.mask,statistics:S})},_decodePng:function(E,J){if(!v)throw"The png decoder module is not loaded.";this._validateDecodeParams(J);var O=new Uint8Array(E),S=new v(O);O=new Uint8Array(J.width*J.height*4);S.copyToImageData(O,S.decodePixels());var X=S=0;X=new Uint8Array(J.width*
J.height);for(S=0;S<J.width*J.height;S++)X[S]=O[4*S+3];var Y=new g({width:J.width,height:J.height,pixels:[],pixelType:"U8",mask:X,statistics:[]});for(S=0;3>S;S++){var K=new Uint8Array(J.width*J.height);for(X=0;X<J.width*J.height;X++)K[X]=O[4*X+S];Y.addData({pixels:K,statistics:this._calculateBandStatistics(K)})}return Y},_decodeBsq:function(E,J){if(!z)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(J);B=J.noDataValue;J.pixelType=x(J.pixelType);var O=z.decodeBSQ(E,{bandCount:J.planes,
width:J.width,height:J.height,pixelType:u,noDataValue:B}),S=[],X,Y=null;for(X=0;X<O.pixels.length;X++)Y=O.pixels[X],S.push(this._calculateBandStatistics(Y));return new g({width:J.width,height:J.height,pixels:O.pixels,pixelType:J.pixelType,mask:O.maskData,statistics:S})},_decodeBip:function(E,J){this._validateDecodeParams(J);B=J.noDataValue;J.pixelType=x(J.pixelType);var O=z.decodeBIP(E,{bandCount:J.planes,width:J.width,height:J.height,pixelType:u,noDataValue:B}),S=[],X,Y=null;for(X=0;X<O.pixels.length;X++)Y=
O.pixels[X],S.push(this._calculateBandStatistics(Y));return new g({width:J.width,height:J.height,pixels:O.pixels,pixelType:J.pixelType,mask:O.maskData,statistics:S})},_decodeTiff:function(E,J){this._validateDecodeParams(J);B=J.noDataValue;J.pixelType=x(J.pixelType);var O=C.decode(E),S=[],X,Y=null;for(X=0;X<O.pixels.length;X++)Y=O.pixels[X],S.push(this._calculateBandStatistics(Y,O.maskData));return new g({width:O.width,height:O.height,pixels:O.pixels,pixelType:O.pixelType,mask:O.maskData,statistics:S})},
_decodeLerc:function(E,J){this._validateDecodeParams(J);B=J.noDataValue;J.pixelType=x(J.pixelType);for(var O=0,S,X=0,Y,K=E.byteLength-10;X<K;){var P=t.decode(E,{inputOffset:X,encodedMaskData:S,returnMask:0===O?!0:!1,returnEncodedMask:0===O?!0:!1,returnFileInfo:!0,pixelType:u,noDataValue:B});X=P.fileInfo.eofOffset;0===O&&(S=P.encodedMaskData,Y=new g({width:J.width,height:J.height,pixels:[],pixelType:J.pixelType,mask:P.maskData,statistics:[]}));O++;if(!A(P,J))throw"The decoded image dimensions are incorrect";
Y.addData({pixels:P.pixelData,statistics:{minValue:P.minValue,maxValue:P.maxValue,noDataValue:P.noDataValue}})}return Y},_decodeLerc2:function(E,J){this._validateDecodeParams(J);B=J.noDataValue;J.pixelType=x(J.pixelType);for(var O=0,S,X,Y=0,K,P=E.byteLength-10,Q=[];Y<P;){X=r.decode(E,{inputOffset:Y,maskData:S,returnFileInfo:!0});Y=X.fileInfo.eofOffset;0===O&&(S=X.maskData,K=new g({width:J.width,height:J.height,pixels:[],pixelType:X.fileInfo.pixelType,mask:X.maskData,statistics:[]}));X.fileInfo.mask&&
0<X.fileInfo.mask.numBytes&&Q.push(X.maskData);O++;if(!A(X,J))throw"The decoded image dimensions are incorrect";if(1<X.dimCount&&X.pixelData&&X.pixelData.length===X.width*X.height*X.dimCount){X.pixelData=X.pixelData.slice(-X.width*X.height);var ba=X.dimStats&&X.dimStats.minValues&&X.dimStats.minValues[X.dimCount-1],ca=X.dimStats&&X.dimStats.maxValues&&X.dimStats.maxValues[X.dimCount-1];null!=ba&&null!=ca&&(X.minValue=ba,X.maxValue=ca)}K.addData({pixels:X.pixelData,statistics:{minValue:X.minValue,
maxValue:X.maxValue,noDataValue:X.noDataValue}})}if(1<Q.length){P=K.width*K.height;K.bandMasks=Q;S=new Uint8Array(P);S.set(Q[0]);for(X=1;X<Q.length;X++)for(O=Q[X],Y=0;Y<P;Y++)S[Y]&=O[Y];K.maskData=S}return K},_calculateBandStatistics:function(E,J){var O=Infinity,S=-Infinity,X=E.length,Y,K=0;if(J)for(Y=0;Y<X;Y++)J[Y]&&(K=E[Y],O=K<O?K:O,S=K>S?K:S);else for(Y=0;Y<X;Y++)K=E[Y],O=K<O?K:O,S=K>S?K:S;return{minValue:O,maxValue:S}},_loadRasterFormatModules:function(){D||(y||(y=new q),10>a("ie")?y.isRejected()||
y.reject("unsupported browser version"):F(["./rasterFormats/JpgPlus","./rasterFormats/Png","./rasterFormats/Raw","./rasterFormats/TiffDecoder","./rasterFormats/Zlib"],function(E,J,O,S){w=E;v=J;z=O;C=S;D=!0;y.isResolved()||y.resolve(!0)}))}});var u=null,B=null,x=function(E){if("U1"===E||"U2"===E||"U4"===E||"U8"===E)return B=Math.pow(2,8)-1,u=Uint8Array,"U8";"U16"===E?(B=B||Math.pow(2,16)-1,u=Uint16Array):"U32"===E?(B=B||Math.pow(2,32)-1,u=Uint32Array):"S8"===E?(B=B||0-Math.pow(2,7),u=Int8Array):"S16"===
E?(B=B||0-Math.pow(2,15),u=Int16Array):"S32"===E?(B=B||0-Math.pow(2,31),u=Int32Array):u=Float32Array;return E},A=function(E,J){return E.height!==J.height||E.width!==J.width?!1:!0};b.setObject("layers.Raster",l,e);return l})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(F,l,b,q,n,p){F=F([q],{declaredClass:"esri.Evented",registerConnectEvents:function(){var m=this.constructor,a=this.constructor._meta.parents,e=[{}],
k={},h,f=function(d,g){l.isArray(d)||(d=[d]);for(var t=0;t<d.length;t++){var r=d[t];r._meta&&r._meta.parents&&f(r._meta.parents,g);r.prototype._eventMap&&g.push(l.mixin({},r.prototype._eventMap))}return g};if(!m._onMap){f(a,e);e.push(this._eventMap);a=l.mixin.apply(this,e);for(c in this)/^on\w/.test(c)&&l.isFunction(this[c])&&(e=this._hyphenLower(c).toLowerCase(),a[e]||(k[e]={method:c}));for(h in a){var c=this._onCamelCase(h);k[h]={method:c,argKeys:a[h]}}m._onMap=k;return m._onMap}},on:function(m,
a){if(-1<m.indexOf(",")){for(var e=m.split(/\s*,\s*/),k=e.length,h=[];k--;)h.push(this.on(e[k],a));h.remove=function(){for(var d=0;d<h.length;d++)h[d].remove()};return h}e=this.constructor._onMap||this.registerConnectEvents();k="string"==typeof m&&m.toLowerCase();var f=this._onCamelCase(k),c=e&&e[k];return(f=c&&c.method||this[f]&&l.isFunction(this[f])&&f)?c&&l.isArray(c.argKeys)?(e=this._onArr2Obj(a,e[k].argKeys),b.after(this,f,e,!0)):b.after(this,f,function(d){d=d||{};d.target||(d.target=this);a.call(this,
d)},!0):this.inherited(arguments)},emit:function(m,a){var e,k,h=m.toLowerCase();var f=this._onCamelCase(m);var c=this.constructor._onMap||this.registerConnectEvents();f=(k=c&&c[h]&&c[h].method||l.isFunction(this[f])&&f)&&this[k];k&&c&&c[h]&&this._onObj2Arr(function(){e=Array.prototype.slice.call(arguments)},c[h].argKeys)(a);a=a||{};a.target||(a.target=this);if(f){var d=e&&e.length?e:[a];d=f.apply(this,d)}this.inherited(arguments,[m,a]);return d},_onObj2Arr:function(m,a){if(a){var e=this;return function(k){var h,
f=[],c=a.length;for(h=0;h<c;h++)f[h]=k[a[h]];m.apply(e,f)}}return m},_onArr2Obj:function(m,a){if(a){var e=this;return function(){var k,h={},f=arguments.length;for(k=0;k<f;k++)h[a[k]]=arguments[k];h.target||(h.target=e);m.call(e,h)}}return m},_hyphenLower:function(m){return m.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(a,e){return(e?"-":"")+a.toLowerCase()})},_onCamelCase:function(m){return"on"+m.substr(0,1).toUpperCase()+m.substr(1).replace(/\-([a-z])/g,function(a,e){return e.toUpperCase()})}});
return p.Evented=F})},"esri/layers/rasterFormats/LercCodec":function(){define([],function(){var F={defaultNoDataValue:-3.4027999387901484E38,decode:function(b,q){q=q||{};var n=q.inputOffset||0,p=q.encodedMaskData||null===q.encodedMaskData,m={},a=new Uint8Array(b,n,10);m.fileIdentifierString=String.fromCharCode.apply(null,a);if("CntZImage"!=m.fileIdentifierString.trim())throw"Unexpected file identifier string: "+m.fileIdentifierString;n+=10;a=new DataView(b,n,24);m.fileVersion=a.getInt32(0,!0);m.imageType=
a.getInt32(4,!0);m.height=a.getUint32(8,!0);m.width=a.getUint32(12,!0);m.maxZError=a.getFloat64(16,!0);n+=24;if(!p)if(a=new DataView(b,n,16),m.mask={},m.mask.numBlocksY=a.getUint32(0,!0),m.mask.numBlocksX=a.getUint32(4,!0),m.mask.numBytes=a.getUint32(8,!0),m.mask.maxValue=a.getFloat32(12,!0),n+=16,0<m.mask.numBytes){p=new Uint8Array(Math.ceil(m.width*m.height/8));a=new DataView(b,n,m.mask.numBytes);var e=a.getInt16(0,!0),k=2,h=0;do{if(0<e)for(;e--;)p[h++]=a.getUint8(k++);else{var f=a.getUint8(k++);
for(e=-e;e--;)p[h++]=f}e=a.getInt16(k,!0);k+=2}while(k<m.mask.numBytes);if(-32768!==e||h<p.length)throw"Unexpected end of mask RLE encoding";m.mask.bitset=p;n+=m.mask.numBytes}else 0===(m.mask.numBytes|m.mask.numBlocksY|m.mask.maxValue)&&(p=new Uint8Array(Math.ceil(m.width*m.height/8)),m.mask.bitset=p);a=new DataView(b,n,16);m.pixels={};m.pixels.numBlocksY=a.getUint32(0,!0);m.pixels.numBlocksX=a.getUint32(4,!0);m.pixels.numBytes=a.getUint32(8,!0);m.pixels.maxValue=a.getFloat32(12,!0);n+=16;p=m.pixels.numBlocksX;
a=m.pixels.numBlocksY;p+=0<m.width%p?1:0;e=a+(0<m.height%a?1:0);m.pixels.blocks=Array(p*e);for(h=k=0;h<e;h++)for(f=0;f<p;f++){var c=0;a=new DataView(b,n,Math.min(10,b.byteLength-n));var d={};m.pixels.blocks[k++]=d;var g=a.getUint8(0);c++;d.encoding=g&63;if(3<d.encoding)throw"Invalid block encoding ("+d.encoding+")";if(2===d.encoding)n++;else{if(0!==g&&2!==g){g>>=6;d.offsetType=g;if(2===g)d.offset=a.getInt8(1),c++;else if(1===g)d.offset=a.getInt16(1,!0),c+=2;else if(0===g)d.offset=a.getFloat32(1,!0),
c+=4;else throw"Invalid block offset type";if(1===d.encoding)if(g=a.getUint8(c),c++,d.bitsPerPixel=g&63,g>>=6,d.numValidPixelsType=g,2===g)d.numValidPixels=a.getUint8(c),c++;else if(1===g)d.numValidPixels=a.getUint16(c,!0),c+=2;else if(0===g)d.numValidPixels=a.getUint32(c,!0),c+=4;else throw"Invalid valid pixel count type";}n+=c;if(3!=d.encoding)if(0===d.encoding){g=(m.pixels.numBytes-1)/4;if(g!==Math.floor(g))throw"uncompressed block has invalid length";a=new ArrayBuffer(4*g);c=new Uint8Array(a);
c.set(new Uint8Array(b,n,4*g));a=new Float32Array(a);d.rawData=a;n+=4*g}else 1===d.encoding&&(g=Math.ceil(d.numValidPixels*d.bitsPerPixel/8),a=new ArrayBuffer(4*Math.ceil(g/4)),c=new Uint8Array(a),c.set(new Uint8Array(b,n,g)),d.stuffedData=new Uint32Array(a),n+=g)}}m.eofOffset=n;n=null!=q.noDataValue?q.noDataValue:F.defaultNoDataValue;e=q.encodedMaskData;var t=q.returnMask;k=0;h=m.pixels.numBlocksX;f=m.pixels.numBlocksY;d=Math.floor(m.width/h);c=Math.floor(m.height/f);g=2*m.maxZError;a=Number.MAX_VALUE;
e=e||(m.mask?m.mask.bitset:null);var r;p=new (q.pixelType||Float32Array)(m.width*m.height);t&&e&&(r=new Uint8Array(m.width*m.height));t=new Float32Array(d*c);for(var w,v,z=0;z<=f;z++){var C=z!==f?c:m.height%f;if(0!==C)for(var D=0;D<=h;D++){var y=D!==h?d:m.width%h;if(0!==y){var u=z*m.width*c+D*d,B=m.width-y,x=m.pixels.blocks[k],A;if(2>x.encoding){if(0===x.encoding)var E=x.rawData;else{var J=A=E=void 0;w=x.stuffedData;v=x.bitsPerPixel;var O=x.numValidPixels,S=x.offset,X=g,Y=t,K=m.pixels.maxValue,P=
(1<<v)-1,Q=0,ba=0,ca=Math.ceil((K-S)/X);w[w.length-1]<<=8*(4*w.length-Math.ceil(v*O/8));for(J=0;J<O;J++)0===ba&&(E=w[Q++],ba=32),ba>=v?(A=E>>>ba-v&P,ba-=v):(ba=v-ba,A=(E&P)<<ba&P,E=w[Q++],ba=32-ba,A+=E>>>ba),Y[J]=A<ca?S+A*X:K;E=t}A=0}else var ka=2===x.encoding?0:x.offset;if(e)for(v=0;v<C;v++){if(u&7){var aa=e[u>>3];aa<<=u&7}for(w=0;w<y;w++)u&7||(aa=e[u>>3]),aa&128?(r&&(r[u]=1),J=2>x.encoding?E[A++]:ka,a=a>J?J:a,p[u++]=J):(r&&(r[u]=0),p[u++]=n),aa<<=1;u+=B}else if(2>x.encoding)for(v=0;v<C;v++){for(w=
0;w<y;w++)J=E[A++],a=a>J?J:a,p[u++]=J;u+=B}else for(a=a>ka?ka:a,v=0;v<C;v++){for(w=0;w<y;w++)p[u++]=ka;u+=B}if(1===x.encoding&&A!==x.numValidPixels)throw"Block and Mask do not match";k++}}}ka=r;r={width:m.width,height:m.height,pixelData:p,minValue:a,maxValue:m.pixels.maxValue,noDataValue:n};ka&&(r.maskData=ka);q.returnEncodedMask&&m.mask&&(r.encodedMaskData=m.mask.bitset?m.mask.bitset:null);if(q.returnFileInfo&&(r.fileInfo=l(m),q.computeUsedBitDepths)){ka=r.fileInfo;aa=m.pixels.numBlocksX*m.pixels.numBlocksY;
E={};for(A=0;A<aa;A++)n=m.pixels.blocks[A],0===n.encoding?E.float32=!0:1===n.encoding?E[n.bitsPerPixel]=!0:E[0]=!0;m=Object.keys(E);ka.bitDepths=m}return r}},l=function(b){return{fileIdentifierString:b.fileIdentifierString,fileVersion:b.fileVersion,imageType:b.imageType,height:b.height,width:b.width,maxZError:b.maxZError,eofOffset:b.eofOffset,mask:b.mask?{numBlocksX:b.mask.numBlocksX,numBlocksY:b.mask.numBlocksY,numBytes:b.mask.numBytes,maxValue:b.mask.maxValue}:null,pixels:{numBlocksX:b.pixels.numBlocksX,
numBlocksY:b.pixels.numBlocksY,numBytes:b.pixels.numBytes,maxValue:b.pixels.maxValue,noDataValue:this.noDataValue}}};return F})},"esri/layers/rasterFormats/Lerc2Codec":function(){define([],function(){var F={unstuff:function(q,n,p,m,a,e,k,h){var f=(1<<p)-1,c=0,d,g=0;q[q.length-1]<<=8*(4*q.length-Math.ceil(p*m/8));if(a)for(d=0;d<m;d++){if(0===g){var t=q[c++];g=32}if(g>=p){var r=t>>>g-p&f;g-=p}else g=p-g,r=(t&f)<<g&f,t=q[c++],g=32-g,r+=t>>>g;n[d]=a[r]}else for(a=Math.ceil((h-e)/k),d=0;d<m;d++)0===g&&
(t=q[c++],g=32),g>=p?(r=t>>>g-p&f,g-=p):(g=p-g,r=(t&f)<<g&f,t=q[c++],g=32-g,r+=t>>>g),n[d]=r<a?e+r*k:h},unstuffLUT:function(q,n,p,m,a,e){var k=(1<<n)-1,h=0,f=0,c=0,d=c=0,g=[];q[q.length-1]<<=8*(4*q.length-Math.ceil(n*p/8));var t=Math.ceil((e-m)/a);for(f=0;f<p;f++){if(0===c){var r=q[h++];c=32}c>=n?(d=r>>>c-n&k,c-=n):(c=n-c,d=(r&k)<<c&k,r=q[h++],c=32-c,d+=r>>>c);g[f]=d<t?m+d*a:e}g.unshift(m);return g},unstuff2:function(q,n,p,m,a,e,k,h){var f=(1<<p)-1,c=0,d,g=0,t=0;if(a)for(d=0;d<m;d++){if(0===g){var r=
q[c++];g=32;t=0}if(g>=p){var w=r>>>t&f;g-=p;t+=p}else{var v=p-g;w=r>>>t&f;r=q[c++];g=32-v;w|=(r&(1<<v)-1)<<p-v;t=v}n[d]=a[w]}else for(a=Math.ceil((h-e)/k),d=0;d<m;d++)0===g&&(r=q[c++],g=32,t=0),g>=p?(w=r>>>t&f,g-=p,t+=p):(v=p-g,w=r>>>t&f,r=q[c++],g=32-v,w|=(r&(1<<v)-1)<<p-v,t=v),n[d]=w<a?e+w*k:h;return n},unstuffLUT2:function(q,n,p,m,a,e){var k=(1<<n)-1,h=0,f=0,c=0,d=0,g=0,t=0,r=[],w=Math.ceil((e-m)/a);for(f=0;f<p;f++){if(0===d){var v=q[h++];d=32;t=0}d>=n?(g=v>>>t&k,d-=n,t+=n):(c=n-d,g=v>>>t&k,v=
q[h++],d=32-c,g|=(v&(1<<c)-1)<<n-c,t=c);r[f]=g<w?m+g*a:e}r.unshift(m);return r},originalUnstuff:function(q,n,p,m){var a=(1<<p)-1,e=0,k,h=0;q[q.length-1]<<=8*(4*q.length-Math.ceil(p*m/8));for(k=0;k<m;k++){if(0===h){var f=q[e++];h=32}if(h>=p){var c=f>>>h-p&a;h-=p}else h=p-h,c=(f&a)<<h&a,f=q[e++],h=32-h,c+=f>>>h;n[k]=c}return n},originalUnstuff2:function(q,n,p,m){var a=(1<<p)-1,e=0,k,h=0,f=0;for(k=0;k<m;k++){if(0===h){var c=q[e++];h=32;f=0}if(h>=p){var d=c>>>f&a;h-=p;f+=p}else{var g=p-h;d=c>>>f&a;c=
q[e++];h=32-g;d|=(c&(1<<g)-1)<<p-g;f=g}n[k]=d}return n}},l={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(q){for(var n=65535,p=65535,m=q.length,a=Math.floor(m/2),e=0;a;){var k=359<=a?359:a;a-=k;do n+=q[e++]<<8,p+=n+=q[e++];while(--k);n=(n&65535)+(n>>>16);p=(p&65535)+(p>>>16)}m&1&&(p+=n+=q[e]<<8);return((p&65535)+(p>>>16)<<16|(n&65535)+(n>>>16))>>>0},readHeaderInfo:function(q,n){var p=n.ptr,m=new Uint8Array(q,p,6),a={};a.fileIdentifierString=String.fromCharCode.apply(null,m);if(0!==a.fileIdentifierString.lastIndexOf("Lerc2",
0))throw"Unexpected file identifier string (expect Lerc2 ): "+a.fileIdentifierString;p+=6;m=new DataView(q,p,8);var e=m.getInt32(0,!0);a.fileVersion=e;p+=4;3<=e&&(a.checksum=m.getUint32(4,!0),p+=4);m=new DataView(q,p,12);a.height=m.getUint32(0,!0);a.width=m.getUint32(4,!0);p+=8;4<=e?(a.numDims=m.getUint32(8,!0),p+=4):a.numDims=1;m=new DataView(q,p,40);a.numValidPixel=m.getUint32(0,!0);a.microBlockSize=m.getInt32(4,!0);a.blobSize=m.getInt32(8,!0);a.imageType=m.getInt32(12,!0);a.maxZError=m.getFloat64(16,
!0);a.zMin=m.getFloat64(24,!0);a.zMax=m.getFloat64(32,!0);p+=40;n.headerInfo=a;n.ptr=p;if(3<=e&&(p=this.computeChecksumFletcher32(new Uint8Array(q,p-(4<=e?52:48),a.blobSize-14)),p!==a.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(q,n){var p=n.headerInfo,m=this.getDataTypeArray(p.imageType),a=p.numDims*this.getDataTypeSize(p.imageType),e=this.readSubArray(q,n.ptr,m,a);m=this.readSubArray(q,n.ptr+a,m,a);n.ptr+=2*a;var k=!0;for(a=0;a<p.numDims;a++)if(e[a]!==m[a]){k=!1;break}p.minValues=
e;p.maxValues=m;return k},readSubArray:function(q,n,p,m){if(p===Uint8Array)q=new Uint8Array(q,n,m);else{var a=new ArrayBuffer(m);(new Uint8Array(a)).set(new Uint8Array(q,n,m));q=new p(a)}return q},readMask:function(q,n){var p=n.ptr,m=n.headerInfo,a=m.width*m.height,e=m.numValidPixel,k=new DataView(q,p,4);m={};m.numBytes=k.getUint32(0,!0);p+=4;if((0===e||a===e)&&0!==m.numBytes)throw"invalid mask";if(0===e)e=new Uint8Array(Math.ceil(a/8)),m.bitset=e,k=new Uint8Array(a),n.pixels.resultMask=k,p+=m.numBytes;
else if(0<m.numBytes){e=new Uint8Array(Math.ceil(a/8));k=new DataView(q,p,m.numBytes);var h=k.getInt16(0,!0),f=2,c=0,d=0;do{if(0<h)for(;h--;)e[c++]=k.getUint8(f++);else for(d=k.getUint8(f++),h=-h;h--;)e[c++]=d;h=k.getInt16(f,!0);f+=2}while(f<m.numBytes);if(-32768!==h||c<e.length)throw"Unexpected end of mask RLE encoding";k=new Uint8Array(a);for(f=f=h=0;f<a;f++)f&7?(h=e[f>>3],h<<=f&7):h=e[f>>3],h&128&&(k[f]=1);n.pixels.resultMask=k;m.bitset=e;p+=m.numBytes}n.ptr=p;n.mask=m;return!0},readDataOneSweep:function(q,
n,p,m){var a=n.ptr,e=n.headerInfo,k=e.numDims,h=e.width*e.height;e=e.numValidPixel*l.getDataTypeSize(e.imageType)*k;var f=n.pixels.resultMask;if(p===Uint8Array)q=new Uint8Array(q,a,e);else{var c=new ArrayBuffer(e);(new Uint8Array(c)).set(new Uint8Array(q,a,e));q=new p(c)}if(q.length===h*k)n.pixels.resultPixels=m?l.swapDimensionOrder(q,h,k,p,!0):q;else{n.pixels.resultPixels=new p(h*k);var d=c=p=0,g=0;if(1<k)if(m)for(c=0;c<h;c++){if(f[c])for(g=c,d=0;d<k;d++,g+=h)n.pixels.resultPixels[g]=q[p++]}else for(c=
0;c<h;c++){if(f[c])for(g=c*k,d=0;d<k;d++)n.pixels.resultPixels[g+d]=q[p++]}else for(c=0;c<h;c++)f[c]&&(n.pixels.resultPixels[c]=q[p++])}n.ptr=a+e;return!0},readHuffmanTree:function(q,n){var p=this.HUFFMAN_LUT_BITS_MAX,m=new DataView(q,n.ptr,16);n.ptr+=16;if(2>m.getInt32(0,!0))throw"unsupported Huffman version";var a=m.getInt32(4,!0),e=m.getInt32(8,!0);m=m.getInt32(12,!0);if(e>=m)return!1;var k=new Uint32Array(m-e);l.decodeBits(q,n,k);var h=[],f;for(f=e;f<m;f++){var c=f-(f<a?0:a);h[c]={first:k[f-e],
second:null}}f=q.byteLength-n.ptr;k=new ArrayBuffer(4*Math.ceil(f/4));(new Uint8Array(k)).set(new Uint8Array(q,n.ptr,f));k=new Uint32Array(k);var d=0,g=0;var t=k[0];for(f=e;f<m;f++){c=f-(f<a?0:a);var r=h[c].first;0<r&&(h[c].second=t<<d>>>32-r,32-d>=r?(d+=r,32===d&&(d=0,g++,t=k[g])):(d+=r-32,g++,t=k[g],h[c].second|=t>>>32-d))}var w=t=0,v=new b;for(f=0;f<h.length;f++)void 0!==h[f]&&(t=Math.max(t,h[f].first));w=t>=p?p:t;p=[];var z;for(f=e;f<m;f++)if(c=f-(f<a?0:a),r=h[c].first,0<r)if(e=[r,c],r<=w){c=
h[c].second<<w-r;var C=1<<w-r;for(r=0;r<C;r++)p[c|r]=e}else for(c=h[c].second,C=v,--r;0<=r;r--)(z=c>>>r&1)?(C.right||(C.right=new b),C=C.right):(C.left||(C.left=new b),C=C.left),0!==r||C.val||(C.val=e[1]);return{decodeLut:p,numBitsLUTQick:w,numBitsLUT:t,tree:v,stuffedData:k,srcPtr:g,bitPos:d}},readHuffman:function(q,n,p,m){var a=n.headerInfo.numDims,e=n.headerInfo.height,k=n.headerInfo.width,h=k*e,f=this.readHuffmanTree(q,n);q=f.decodeLut;var c=f.tree,d=f.stuffedData,g=f.srcPtr,t=f.bitPos,r=f.numBitsLUTQick;
f=f.numBitsLUT;var w=0===n.headerInfo.imageType?128:0,v=n.pixels.resultMask,z,C,D,y,u,B,x=0;0<t&&(g++,t=0);var A=d[g],E=1===n.encodeMode,J=new p(h*a),O=J,S;if(2>a||E)for(S=0;S<a;S++)if(1<a&&(O=new p(J.buffer,h*S,h),x=0),n.headerInfo.numValidPixel===k*e)for(D=u=0;D<e;D++)for(y=0;y<k;y++,u++){var X=0;var Y=z=A<<t>>>32-r;32-t<r&&(Y=z|=d[g+1]>>>64-t-r);if(q[Y])X=q[Y][1],t+=q[Y][0];else for(Y=z=A<<t>>>32-f,32-t<f&&(Y=z|=d[g+1]>>>64-t-f),Y=c,B=0;B<f;B++)if(Y=(C=z>>>f-B-1&1)?Y.right:Y.left,!Y.left&&!Y.right){X=
Y.val;t=t+B+1;break}32<=t&&(t-=32,g++,A=d[g]);X-=w;E?(X=0<y?X+x:0<D?X+O[u-k]:X+x,X&=255,x=O[u]=X):O[u]=X}else for(D=u=0;D<e;D++)for(y=0;y<k;y++,u++){if(v[u]){X=0;Y=z=A<<t>>>32-r;32-t<r&&(Y=z|=d[g+1]>>>64-t-r);if(q[Y])X=q[Y][1],t+=q[Y][0];else for(Y=z=A<<t>>>32-f,32-t<f&&(Y=z|=d[g+1]>>>64-t-f),Y=c,B=0;B<f;B++)if(Y=(C=z>>>f-B-1&1)?Y.right:Y.left,!Y.left&&!Y.right){X=Y.val;t=t+B+1;break}32<=t&&(t-=32,g++,A=d[g]);X-=w;E?(X=0<y&&v[u-1]?X+x:0<D&&v[u-k]?X+O[u-k]:X+x,X&=255,x=O[u]=X):O[u]=X}}else for(D=u=
0;D<e;D++)for(y=0;y<k;y++)if(u=D*k+y,!v||v[u])for(S=0;S<a;S++,u+=h){X=0;Y=z=A<<t>>>32-r;32-t<r&&(Y=z|=d[g+1]>>>64-t-r);if(q[Y])X=q[Y][1],t+=q[Y][0];else for(Y=z=A<<t>>>32-f,32-t<f&&(Y=z|=d[g+1]>>>64-t-f),Y=c,B=0;B<f;B++)if(Y=(C=z>>>f-B-1&1)?Y.right:Y.left,!Y.left&&!Y.right){X=Y.val;t=t+B+1;break}32<=t&&(t-=32,g++,A=d[g]);X-=w;O[u]=X}n.ptr=n.ptr+4*(g+1)+(0<t?4:0);n.pixels.resultPixels=J;1<a&&!m&&(n.pixels.resultPixels=l.swapDimensionOrder(J,h,a,p))},decodeBits:function(q,n,p,m,a){var e=n.headerInfo,
k=e.fileVersion,h=0,f=new DataView(q,n.ptr,5<=q.byteLength-n.ptr?5:q.byteLength-n.ptr),c=f.getUint8(0);h++;var d=c>>6,g=0===d?4:3-d,t=0<(c&32)?!0:!1;d=c&31;c=0;if(1===g)c=f.getUint8(h),h++;else if(2===g)c=f.getUint16(h,!0),h+=2;else if(4===g)c=f.getUint32(h,!0),h+=4;else throw"Invalid valid pixel count type";g=2*e.maxZError;a=1<e.numDims?e.maxValues[a]:e.zMax;if(t){n.counter.lut++;t=f.getUint8(h);h++;e=Math.ceil((t-1)*d/8);var r=Math.ceil(e/4);r=new ArrayBuffer(4*r);var w=new Uint8Array(r);n.ptr+=
h;w.set(new Uint8Array(q,n.ptr,e));h=new Uint32Array(r);n.ptr+=e;for(f=0;t-1>>>f;)f++;e=Math.ceil(c*f/8);r=Math.ceil(e/4);r=new ArrayBuffer(4*r);w=new Uint8Array(r);w.set(new Uint8Array(q,n.ptr,e));q=new Uint32Array(r);n.ptr+=e;n=3<=k?F.unstuffLUT2(h,d,t-1,m,g,a):F.unstuffLUT(h,d,t-1,m,g,a);3<=k?F.unstuff2(q,p,f,c,n):F.unstuff(q,p,f,c,n)}else n.counter.bitstuffer++,f=d,n.ptr+=h,0<f&&(e=Math.ceil(c*f/8),r=Math.ceil(e/4),r=new ArrayBuffer(4*r),w=new Uint8Array(r),w.set(new Uint8Array(q,n.ptr,e)),q=
new Uint32Array(r),n.ptr+=e,3<=k?null==m?F.originalUnstuff2(q,p,f,c):F.unstuff2(q,p,f,c,!1,m,g,a):null==m?F.originalUnstuff(q,p,f,c):F.unstuff(q,p,f,c,!1,m,g,a))},readTiles:function(q,n,p,m){var a=n.headerInfo,e=a.width,k=a.height,h=e*k,f=a.microBlockSize,c=a.imageType,d=l.getDataTypeSize(c),g=Math.ceil(e/f),t=Math.ceil(k/f);n.pixels.numBlocksY=t;n.pixels.numBlocksX=g;var r=n.pixels.ptr=0,w=0,v=0,z=0,C=0,D=0,y=0,u=0,B=r=0,x=0,A=0,E=y=0;y=y=0;var J=new p(f*f);k=k%f||f;var O=e%f||f,S=a.numDims,X,Y=
n.pixels.resultMask,K=n.pixels.resultPixels,P=5<=a.fileVersion?14:15,Q=a.zMax;for(v=0;v<t;v++)for(C=v!==t-1?f:k,z=0;z<g;z++)for(D=z!==g-1?f:O,x=v*e*f+z*f,A=e-D,X=0;X<S;X++){1<S?(E=K,x=v*e*f+z*f,K=new p(n.pixels.resultPixels.buffer,h*X*d,h),Q=a.maxValues[X]):E=null;y=q.byteLength-n.ptr;w=new DataView(q,n.ptr,Math.min(10,y));var ba={};y=0;u=w.getUint8(0);y++;var ca=5<=a.fileVersion?u&4:0;r=u>>6&255;B=u>>2&P;if(B!==(z*f>>3&P))throw"integrity issue";if(ca&&0===X)throw"integrity issue";u&=3;if(3<u)throw n.ptr+=
y,"Invalid block encoding ("+u+")";if(2===u){if(ca)if(Y)for(r=0;r<C;r++)for(w=0;w<D;w++)Y[x]&&(K[x]=E[x]),x++;else for(r=0;r<C;r++)for(w=0;w<D;w++)K[x]=E[x],x++;n.counter.constant++;n.ptr+=y}else if(0===u){if(ca)throw"integrity issue";n.counter.uncompressed++;n.ptr+=y;y=C*D*d;E=q.byteLength-n.ptr;y=y<E?y:E;E=new ArrayBuffer(0===y%d?y:y+d-y%d);ca=new Uint8Array(E);ca.set(new Uint8Array(q,n.ptr,y));E=new p(E);y=0;if(Y)for(r=0;r<C;r++){for(w=0;w<D;w++)Y[x]&&(K[x]=E[y++]),x++;x+=A}else for(r=0;r<C;r++){for(w=
0;w<D;w++)K[x++]=E[y++];x+=A}n.ptr+=y*d}else if(r=l.getDataTypeUsed(ca&&6>c?4:c,r),ba=l.getOnePixel(ba,y,r,w),y+=l.getDataTypeSize(r),3===u)if(n.ptr+=y,n.counter.constantoffset++,Y)for(r=0;r<C;r++){for(w=0;w<D;w++)Y[x]&&(K[x]=ca?Math.min(Q,E[x]+ba):ba),x++;x+=A}else for(r=0;r<C;r++){for(w=0;w<D;w++)K[x]=ca?Math.min(Q,E[x]+ba):ba,x++;x+=A}else if(n.ptr+=y,l.decodeBits(q,n,J,ba,X),y=0,ca)if(Y)for(r=0;r<C;r++){for(w=0;w<D;w++)Y[x]&&(K[x]=J[y++]+E[x]),x++;x+=A}else for(r=0;r<C;r++){for(w=0;w<D;w++)K[x]=
J[y++]+E[x],x++;x+=A}else if(Y)for(r=0;r<C;r++){for(w=0;w<D;w++)Y[x]&&(K[x]=J[y++]),x++;x+=A}else for(r=0;r<C;r++){for(w=0;w<D;w++)K[x++]=J[y++];x+=A}}1<S&&!m&&(n.pixels.resultPixels=l.swapDimensionOrder(n.pixels.resultPixels,h,S,p))},formatFileInfo:function(q){return{fileIdentifierString:q.headerInfo.fileIdentifierString,fileVersion:q.headerInfo.fileVersion,imageType:q.headerInfo.imageType,height:q.headerInfo.height,width:q.headerInfo.width,numValidPixel:q.headerInfo.numValidPixel,microBlockSize:q.headerInfo.microBlockSize,
blobSize:q.headerInfo.blobSize,maxZError:q.headerInfo.maxZError,pixelType:l.getPixelType(q.headerInfo.imageType),eofOffset:q.eofOffset,mask:q.mask?{numBytes:q.mask.numBytes}:null,pixels:{numBlocksX:q.pixels.numBlocksX,numBlocksY:q.pixels.numBlocksY,maxValue:q.headerInfo.zMax,minValue:q.headerInfo.zMin,noDataValue:q.noDataValue}}},constructConstantSurface:function(q,n){var p=q.headerInfo.zMax,m=q.headerInfo.zMin,a=q.headerInfo.maxValues,e=q.headerInfo.numDims,k=q.headerInfo.height*q.headerInfo.width,
h=0,f=0,c=0,d=q.pixels.resultMask,g=q.pixels.resultPixels;if(d)if(1<e)if(n)for(h=0;h<e;h++)for(c=h*k,p=a[h],f=0;f<k;f++)d[f]&&(g[c+f]=p);else for(f=0;f<k;f++){if(d[f])for(c=f*e,h=0;h<e;h++)g[c+e]=a[h]}else for(f=0;f<k;f++)d[f]&&(g[f]=p);else if(1<e&&m!==p)if(n)for(h=0;h<e;h++)for(c=h*k,p=a[h],f=0;f<k;f++)g[c+f]=p;else for(f=0;f<k;f++)for(c=f*e,h=0;h<e;h++)g[c+h]=a[h];else for(f=0;f<k*e;f++)g[f]=p},getDataTypeArray:function(q){switch(q){case 0:q=Int8Array;break;case 1:q=Uint8Array;break;case 2:q=Int16Array;
break;case 3:q=Uint16Array;break;case 4:q=Int32Array;break;case 5:q=Uint32Array;break;case 6:q=Float32Array;break;case 7:q=Float64Array;break;default:q=Float32Array}return q},getPixelType:function(q){switch(q){case 0:q="S8";break;case 1:q="U8";break;case 2:q="S16";break;case 3:q="U16";break;case 4:q="S32";break;case 5:q="U32";break;case 6:q="F32";break;case 7:q="F64";break;default:q="F32"}return q},isValidPixelValue:function(q,n){if(null==n)return!1;switch(q){case 0:var p=-128<=n&&127>=n;break;case 1:p=
0<=n&&255>=n;break;case 2:p=-32768<=n&&32767>=n;break;case 3:p=0<=n&&65536>=n;break;case 4:p=-2147483648<=n&&2147483647>=n;break;case 5:p=0<=n&&4294967296>=n;break;case 6:p=-3.4027999387901484E38<=n&&3.4027999387901484E38>=n;break;case 7:p=4.9E-324<=n&&1.7976931348623157E308>=n;break;default:p=!1}return p},getDataTypeSize:function(q){var n=0;switch(q){case 0:case 1:n=1;break;case 2:case 3:n=2;break;case 4:case 5:case 6:n=4;break;case 7:n=8;break;default:n=q}return n},getDataTypeUsed:function(q,n){var p=
q;switch(q){case 2:case 4:p=q-n;break;case 3:case 5:p=q-2*n;break;case 6:p=0===n?q:1===n?2:1;break;case 7:p=0===n?q:q-2*n+1;break;default:p=q}return p},getOnePixel:function(q,n,p,m){q=0;switch(p){case 0:q=m.getInt8(n);break;case 1:q=m.getUint8(n);break;case 2:q=m.getInt16(n,!0);break;case 3:q=m.getUint16(n,!0);break;case 4:q=m.getInt32(n,!0);break;case 5:q=m.getUInt32(n,!0);break;case 6:q=m.getFloat32(n,!0);break;case 7:q=m.getFloat64(n,!0);break;default:throw"the decoder does not understand this pixel type";
}return q},swapDimensionOrder:function(q,n,p,m,a){var e=0,k=0,h=0,f=0,c=q;if(1<p)if(c=new m(n*p),a)for(e=0;e<n;e++)for(f=e,h=0;h<p;h++,f+=n)c[f]=q[k++];else for(e=0;e<n;e++)for(f=e,h=0;h<p;h++,f+=n)c[k++]=q[f];return c}},b=function(q,n,p){this.val=q;this.left=n;this.right=p};return{decode:function(q,n){n=n||{};var p=n.noDataValue,m=0,a={};a.ptr=n.inputOffset||0;a.pixels={};if(l.readHeaderInfo(q,a)){m=a.headerInfo;var e=m.fileVersion,k=l.getDataTypeArray(m.imageType);if(5<e)throw"unsupported lerc version 2."+
e;l.readMask(q,a);m.numValidPixel===m.width*m.height||a.pixels.resultMask||(a.pixels.resultMask=n.maskData);var h=m.width*m.height;a.pixels.resultPixels=new k(h*m.numDims);a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var f=!n.returnPixelInterleavedDims;if(0!==m.numValidPixel)if(m.zMax===m.zMin)l.constructConstantSurface(a,f);else if(4<=e&&l.checkMinMaxRanges(q,a))l.constructConstantSurface(a,f);else{var c=new DataView(q,a.ptr,2),d=c.getUint8(0);a.ptr++;if(d)l.readDataOneSweep(q,
a,k,f);else if(1<e&&1>=m.imageType&&1E-5>Math.abs(m.maxZError-.5)){c=c.getUint8(1);a.ptr++;a.encodeMode=c;if(2<c||4>e&&1<c)throw"Invalid Huffman flag "+c;c?l.readHuffman(q,a,k,f):l.readTiles(q,a,k,f)}else l.readTiles(q,a,k,f)}a.eofOffset=a.ptr;n.inputOffset?(e=a.headerInfo.blobSize+n.inputOffset-a.ptr,1<=Math.abs(e)&&(a.eofOffset=n.inputOffset+a.headerInfo.blobSize)):(e=a.headerInfo.blobSize-a.ptr,1<=Math.abs(e)&&(a.eofOffset=a.headerInfo.blobSize));e={width:m.width,height:m.height,pixelData:a.pixels.resultPixels,
minValue:m.zMin,maxValue:m.zMax,validPixelCount:m.numValidPixel,dimCount:m.numDims,dimStats:{minValues:m.minValues,maxValues:m.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&l.isValidPixelValue(m.imageType,p)){k=a.pixels.resultMask;for(m=0;m<h;m++)k[m]||(e.pixelData[m]=p);e.noDataValue=p}a.noDataValue=p;n.returnFileInfo&&(e.fileInfo=l.formatFileInfo(a));return e}},getBandCount:function(q){for(var n=0,p=0,m={ptr:0,pixels:{}};p<q.byteLength-58;)l.readHeaderInfo(q,m),p+=m.headerInfo.blobSize,
n++,m.ptr=p;return n}}})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),function(F,l,b,q,n,p){F=F(null,{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(m){l.mixin(this,m);this.isDataUV=m&&m.isDataUV?m.isDataUV:!1;this.computeMagnitudeAndDirection=
l.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},setUnits:function(m,a){this.inputUnit=m;this.outputUnit=a;this.unitConversionFactor=1;this._updateUnitConvFactor()},_updateUnitConvFactor:function(){var m=p.indexOf(this.speedUnits,this.inputUnit),a=p.indexOf(this.speedUnits,this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=m&&0<=a){var e=[1,.277778,.514444,.3048,.44704,0];this.unitConversionFactor=e[m]/e[a]}},computeMagnitudeAndDirection:function(m){if(!n.isDefined(m))throw"Could not compute magnitude and direction. No pixel data is available.";
var a=m.pixelBlock;if(!n.isDefined(a)||2!==a.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";var e=m.extent,k=(e.xmax-e.xmin)/a.width,h=(e.ymax-e.ymin)/a.height,f=e.xmin+k/2;e=e.ymax-h/2;a.statistics[0].minValue=0;a.statistics[0].maxValue=0;var c=180/Math.PI,d=[],g=0,t=0,r=0,w=!n.isDefined(a.mask),v,z,C,D;var y=C=Infinity;var u=D=-Infinity;for(g=0;g<a.height;g++)for(t=0;t<a.width;t++,r++)if(d.push([f+k*t,e-h*g]),w||a.mask[r]){var B=v=a.pixels[0][r];
var x=z=a.pixels[1][r];this.isDataUV&&(B=Math.sqrt(v*v+z*z),x=90-c*Math.atan2(z,v));a.pixels[0][r]=B*this.unitConversionFactor;a.pixels[1][r]=x;B>u&&(u=B);B<y&&(y=B);x>D&&(D=x);x<C&&(C=x)}a.statistics[0].maxValue=u;a.statistics[0].minValue=y;a.statistics[1].maxValue=D;a.statistics[1].minValue=C;m.locations=d;return m}});l.setObject("layers.pixelFilters.VectorFieldPixelFilter",F,q);return F})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define(["require","dojo/_base/declare","dojo/Deferred",
"dojo/sniff"],function(F,l,b,q){var n;return l(null,{constructor:function(p){this.ctx=p.ctx;this._loadRasterFormatModule()},decode:function(p,m){if(!m.width||!m.height)throw"Native decoding requires the image format, width and height";var a=new b,e,k=new Uint8Array(p),h=this._getFormat(p);if("error"===h)throw"invalid format";"jpeg"===h&&(e=this._getMask(k,m));var f="",c;for(c=0;c<k.length;c+=65535){var d=k.subarray(c,c+65535>k.length-1?k.length-1:c+65535);f+=String.fromCharCode.apply(null,d)}k="data:image/"+
h+";base64,"+window.btoa(f);var g=new Image,t;g.src=k;var r=this;g.onload=function(){r.ctx.clearRect(0,0,m.width,m.height);r.ctx.drawImage(g,0,0);var w=r.ctx.getImageData(0,0,g.width,g.height);t=w.data;if(e)for(c=0;c<e.length;c++)t[4*c+3]=e[c]?255:0;r.ctx.putImageData(w,0,0);a.resolve(null)};g.onerror=function(){a.reject("cannot load image")};return a},_getFormat:function(p){p=new Uint8Array(p,0,10);var m="error";255===p[0]&&216===p[1]?m="jpeg":137===p[0]&&80===p[1]&&78===p[2]&&71===p[3]&&(m="png");
return m},_getMask:function(p,m){try{if(!n)throw"The zlib decoder module is not loaded.";var a=0,e=0,k=Math.round(p.length/2);1===k%2&&(k+=1);var h=p.length-2;for(a=k;a<h&&(255!==p[a]||217!==p[a+1]);a++);k=a+=2;if(k<p.length-1){var f=(new n(p.subarray(k))).getBytes();var c=new Uint8Array(m.width*m.height);for(a=k=0;a<f.length;a++)for(e=7;0<=e;e--)c[k++]=f[a]>>e&1}}catch(d){}return c},_loadRasterFormatModule:function(){10>q("ie")||F(["./Zlib"],function(p){n=p})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),
function(F,l,b,q,n,p,m,a){F=F(m,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(e){this._url.path+="/identify";this._handler=l.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(e,k,h,f,c){try{var d=new a(e);this._successHandler([d],"onComplete",h,c)}catch(g){this._errorHandler(g,f,c)}},execute:function(e,k,h,f){var c=f.assembly;e=this._encode(l.mixin({},this._url.query,{f:"json"},e.toJson(c&&c[0])));var d=this._handler,
g=this._errorHandler;return n({url:this._url.path,content:e,callbackParamName:"callback",load:function(t,r){d(t,r,k,h,f.dfd)},error:function(t){g(t,h,f.dfd)}})},onComplete:function(){}});p._createWrappers(F);l.setObject("tasks.ImageServiceIdentifyTask",F,q);return F})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(F,
l,b,q,n,p,m,a,e,k,h,f){function c(u,B){return Math.ceil((u-B)/(2*B))}function d(u,B){var x=u.paths||u.rings,A,E,J=x.length;for(A=0;A<J;A++){var O=x[A].length;for(E=0;E<O;E++){var S=u.getPoint(A,E);u.setPoint(A,E,S.offset(B,0))}}return u}function g(u,B){if(!(u instanceof e||u instanceof k))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var x=u instanceof e,A=[],E;F.forEach(x?u.paths:u.rings,function(J){A.push(E=[]);E.push([J[0][0],J[0][1]]);var O,S;for(O=0;O<
J.length-1;O++){var X=J[O][0];var Y=J[O][1];var K=J[O+1][0];var P=J[O+1][1];var Q=Math.sqrt((K-X)*(K-X)+(P-Y)*(P-Y));var ba=(P-Y)/Q;var ca=(K-X)/Q;var ka=Q/B;if(1<ka){for(S=1;S<=ka-1;S++){var aa=S*B;var ja=ca*aa+X;aa=ba*aa+Y;E.push([ja,aa])}S=(Q+Math.floor(ka-1)*B)/2;ja=ca*S+X;aa=ba*S+Y;E.push([ja,aa])}E.push([K,P])}});return x?new e({paths:A,spatialReference:u.spatialReference}):new k({rings:A,spatialReference:u.spatialReference})}function t(u,B,x){B&&(u=g(u,1E6),u=h.webMercatorToGeographic(u,!0));
x&&(u=d(u,x));return u}function r(u,B,x){var A=u.x||u[0];if(A>B){var E=c(A,B);u.x?u=u.offset(-2*E*B,0):u[0]=A+-2*E*B}else A<x&&(E=c(A,x),u.x?u=u.offset(-2*E*x,0):u[0]=A+-2*E*x);return u}function w(u,B){var x=-1;F.forEach(B.cutIndexes,function(A,E){var J=B.geometries[E];F.forEach(J.rings||J.paths,function(O,S){F.some(O,function(X){if(!(180>X[0])){X=0;var Y,K=O.length;for(Y=0;Y<K;Y++){var P=O[Y][0];X=P>X?P:X}X=Number(X.toFixed(9));X=-360*c(X,180);K=O.length;for(Y=0;Y<K;Y++)P=J.getPoint(S,Y),J.setPoint(S,
Y,P.offset(X,0))}return!0})});A===x?J.rings?F.forEach(J.rings,function(O){u[A]=u[A].addRing(O)}):F.forEach(J.paths,function(O){u[A]=u[A].addPath(O)}):(x=A,u[A]=J)});return u}function v(u,B,x,A){var E=new b;E.addCallbacks(x,A);B=B||p.defaults.geometryService;var J=[],O=[],S,X,Y,K,P,Q,ba,ca,ka=0;F.forEach(u,function(U){if(U)if(S||(S=U.spatialReference,X=S._getInfo(),K=(Y=S._isWebMercator())?2.0037508342788905E7:180,P=Y?-2.0037508342788905E7:-180,Q=Y?102100:4326,ba=new e({paths:[[[K,P],[K,K]]],spatialReference:{wkid:Q}}),
ca=new e({paths:[[[P,P],[P,K]]],spatialReference:{wkid:Q}})),X){var ea=f.fromJson(U.toJson()),fa=U.getExtent();"point"===U.type?J.push(r(ea,K,P)):"multipoint"===U.type?(ea.points=F.map(ea.points,function(pa){return r(pa,K,P)}),J.push(ea)):"extent"===U.type?(ea=fa._normalize(null,null,X),J.push(ea.rings?new k(ea):ea)):fa?(U=2*c(fa.xmin,P)*K,ea=0===U?ea:d(ea,U),fa=fa.offset(U,0),fa.intersects(ba)&&fa.xmax!==K?(ka=fa.xmax>ka?fa.xmax:ka,ea=t(ea,Y),O.push(ea),J.push("cut")):fa.intersects(ca)&&fa.xmin!==
P?(ka=2*fa.xmax*K>ka?2*fa.xmax*K:ka,ea=t(ea,Y,360),O.push(ea),J.push("cut")):J.push(ea)):J.push(ea)}else J.push(U);else J.push(U)});x=new e;A=c(ka,K);for(var aa=-90,ja=A;0<A;){var oa=-180+360*A;x.addPath([[oa,aa],[oa,-1*aa]]);aa*=-1;A--}0<O.length&&0<ja?B?B.cut(O,x,function(U){O=w(O,U);var ea=[];F.forEach(J,function(fa,pa){if("cut"===fa){var ra=O.shift();u[pa].rings&&1<u[pa].rings.length&&ra.rings.length>=u[pa].rings.length?(J[pa]="simplify",ea.push(ra)):J[pa]=!0===Y?h.geographicToWebMercator(ra):
ra}});0<ea.length?B.simplify(ea,function(fa){F.forEach(J,function(pa,ra){"simplify"===pa&&(J[ra]=!0===Y?h.geographicToWebMercator(fa.shift()):fa.shift())});E.callback(J)},function(fa){E.errback(fa)}):E.callback(J)},function(U){E.errback(U)}):E.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(F.forEach(J,function(U,ea){if("cut"===U){var fa=O.shift();J[ea]=!0===Y?h.geographicToWebMercator(fa):fa}}),E.callback(J));return E}function z(u,B,x,A){var E=!1,
J;l.isObject(u)&&u&&(l.isArray(u)?u.length&&((J=u[0]&&u[0].declaredClass)&&-1!==J.indexOf("Graphic")?(u=F.map(u,function(O){return O.geometry}),E=u.length?!0:!1):J&&-1!==J.indexOf("esri.geometry.")&&(E=!0)):(J=u.declaredClass)&&-1!==J.indexOf("FeatureSet")?(u=F.map(u.features||[],function(O){return O.geometry}),E=u.length?!0:!1):J&&-1!==J.indexOf("esri.geometry.")&&(E=!0));E&&B.push({index:x,property:A,value:u})}function C(u,B){var x=[];F.forEach(B,function(A){var E=A.i,J=u[E];A=A.p;var O;if(l.isObject(J)&&
J)if(A)if("*"===A[0])for(O in J)J.hasOwnProperty(O)&&z(J[O],x,E,O);else F.forEach(A,function(S){z(l.getObject(S,!1,J),x,E,S)});else z(J,x,E)});return x}function D(u,B){var x=0,A={};F.forEach(B,function(E){var J=E.index,O=E.property,S=E.value,X=S.length||1,Y=u.slice(x,x+X);l.isArray(S)||(Y=Y[0]);x+=X;delete E.value;O?(A[J]=A[J]||{},A[J][O]=Y):A[J]=Y});return A}function y(u){for(var B=[],x=0,A=0,E=Math.min,J=Math.max,O=0;O<u.length;O++){for(var S=u[O],X=null,Y=0;Y<S.length;Y++)X=S[Y],B.push(X),0===
Y?A=x=X[0]:(x=E(x,X[0]),A=J(A,X[0]));X&&B.push([(x+A)/2,0])}return B}q={normalizeCentralMeridian:v,_foldCutResults:w,_prepareGeometryForCut:t,_offsetMagnitude:c,_pointNormalization:r,_updatePolyGeometry:d,_straightLineDensify:g,_createWrappers:function(u){var B=l.isObject(u)?u.prototype:l.getObject(u+".prototype");F.forEach(B.__msigns,function(x){var A=B[x.n];B[x.n]=function(){var E=this,J=[],O,S=new b(m._dfdCanceller);x.f&&m._fixDfd(S);for(O=0;O<x.c;O++)J[O]=arguments[O];var X={dfd:S};J.push(X);
var Y=[],K;if(E.normalization&&!E._isTable){var P=C(J,x.a);F.forEach(P,function(Q){Y=Y.concat(Q.value)});Y.length&&(K=v(Y))}K?(S._pendingDfd=K,K.addCallbacks(function(Q){S.canceled||(X.assembly=D(Q,P),S._pendingDfd=A.apply(E,J))},function(Q){var ba=E.declaredClass;ba&&-1!==ba.indexOf("FeatureLayer")?E._resolve([Q],null,J[x.e],S,!0):E._errorHandler(Q,J[x.e],S)})):S._pendingDfd=A.apply(E,J);return S}})},_disassemble:C,_addToBucket:z,_reassemble:D,getDenormalizedExtent:function(u){if(!u)return null;
var B=u.getExtent();if(!B)return null;var x=u.spatialReference&&u.spatialReference._getInfo();if(!x)return B;var A=x.valid[0];x=x.valid[1];var E=2*x,J=B.getWidth(),O=B.xmax,S=B.xmin;if("extent"===u.type||0===J||J<=x||J>E||O<A||S>x)return B;switch(u.type){case "polygon":if(1<u.rings.length)var X=y(u.rings);else return B;break;case "polyline":if(1<u.paths.length)X=y(u.paths);else return B;break;case "multipoint":X=u.points}u=Math.min;A=Math.max;E=new a(B.toJson());for(var Y=0;Y<X.length;Y++){var K=
X[Y][0];0>K?(K+=x,S=A(K,S)):(K-=x,O=u(K,O))}E.xmin=O;E.xmax=S;return E.getWidth()<J?(E.xmin-=x,E.xmax-=x,E):B}};l.mixin(l.getObject("geometry",!0,n),q);return q})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(F,l,b,q,n,p,m,a){F=F(a,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(e,k){e&&l.isString(e)&&(this._url=m.urlToObject(this.url=
e));k&&k.requestOptions&&(this.requestOptions=k.requestOptions);this.normalization=!0;this._errorHandler=l.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var e=this._url,k=/^http:/i;this.url&&(this.url=this.url.replace(k,"https:"));e&&e.path&&(e.path=e.path.replace(k,"https:"))},_encode:function(e,k,h){var f={},c;for(c in e)if("declaredClass"!==c){var d=e[c];var g=typeof d;if(null!==d&&void 0!==d&&"function"!==g)if(l.isArray(d)){f[c]=[];var t=d.length;for(g=0;g<t;g++)f[c][g]=
this._encode(d[g])}else"object"===g?d.toJson&&(g=d.toJson(h&&h[c]),"esri.tasks.FeatureSet"===d.declaredClass&&g.spatialReference&&(g.sr=g.spatialReference,delete g.spatialReference),f[c]=k?g:b.toJson(g)):f[c]=d}return f},_successHandler:function(e,k,h,f){k&&this[k].apply(this,e);h&&h.apply(null,e);f&&p._resDfd(f,e)},_errorHandler:function(e,k,h){this.onError(e);k&&k(e);h&&h.errback(e)},setNormalization:function(e){this.normalization=e},onError:function(){}});return n.Task=F})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),
function(F,l,b,q,n,p){F=F(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",constructor:function(m){m.catalogItems&&(this.catalogItems=new p(m.catalogItems));m.location&&(this.location=n.fromJson(m.location));this.catalogItemVisibilities=m.catalogItemVisibilities;this.name=m.name;this.objectId=m.objectId;this.value=m.value;this.processedValues=m.processedValues;this.properties=m.properties}});l.setObject("tasks.ImageServiceIdentifyResult",F,q);return F})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f){F=F(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(c,d){if(c){l.mixin(this,c);var g=this.features=this.features||[],t=c.spatialReference;t=this.spatialReference=h.createInstance(a.simpleConstructor,t);var r=h.getGeometryType(c.geometryType);this.geometryType=c.geometryType;c.fields&&(this.fields=c.fields);var w=h.supportsLazyUnquantization(this.geometryType),v=h.unquantizeFunction(this.geometryType,this.transform),z=!!(d&&w&&v),C=r&&(z?r.accessorConstructor:
r.simpleConstructor);b.forEach(g,function(D,y){var u=h.createInstance(m.simpleConstructor),B=D.geometry;if(r&&B){var x=u.geometry=h.createInstance(C,z?null:B);x.setSpatialReference(B.spatialReference?h.createInstance(a.simpleConstructor,B.spatialReference):t);z&&x.setupLazyUnquantization(v,B)}u.symbol=D.symbol?f.fromJson(D.symbol):null;u.attributes=D.attributes;g[y]=u});z||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(c){var d=
{};this.displayFieldName&&(d.displayFieldName=this.displayFieldName);this.fields&&(d.fields=this.fields);this.spatialReference?d.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(d.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(d.geometryType=h.getJsonType(this.features[0].geometry)),d.features=e._encodeGraphics(this.features,c));d.geometryType=d.geometryType||this.geometryType;d.exceededTransferLimit=
this.exceededTransferLimit;d.transform=this.transform;return p.fixJson(d)},_hydrate:function(){h.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(c){if(!this.geometryType)return this.transform=null,this;var d=c.translate[0],g=c.translate[1],t=c.scale[0],r=c.scale[1],w=this.features,v=function(y,u,B){var x,A=[];var E=0;for(x=y.length;E<x;E++){var J=y[E];if(0<E){var O=u(J[0]);J=B(J[1]);if(O!==S||J!==X){A.push([O-S,J-X]);var S=O;var X=J}}else S=u(J[0]),
X=B(J[1]),A.push([S,X])}return 0<A.length?A:null},z=function(y,u,B){if("esriGeometryPoint"===y)return function(x){x.x=u(x.x);x.y=B(x.y);return x};if("esriGeometryPolyline"===y||"esriGeometryPolygon"===y)return function(x){var A;var E=x.rings||x.paths;var J=[];var O=0;for(A=E.length;O<A;O++){var S=E[O];(S=v(S,u,B))&&J.push(S)}return 0<J.length?(x.rings?x.rings=J:x.paths=J,x):null};if("esriGeometryMultipoint"===y)return function(x){var A=v(x.points,u,B);return 0<A.length?(x.points=A,x):null};if("esriGeometryEnvelope"===
y)return function(x){return x}}(this.geometryType,function(y){return Math.round((y-d)/t)},function(y){return Math.round((g-y)/r)}),C;var D=0;for(C=w.length;D<C;D++)w[D].geometry&&(z(w[D].geometry)||w[D].setGeometry(null));this.transform=c;return this}});F.createGraphics=function(c){var d=c.geometryType,g=h.createInstance(a.simpleConstructor,c.spatialReference),t=h.getGeometryType(d).accessorConstructor,r=h.unquantizeFunction(d,c.transform);return b.map(c.features,function(w,v){var z=h.createInstance(m.simpleConstructor),
C=w.geometry;if(C){var D=z.geometry=h.createInstance(t);D.setSpatialReference(g);D.setupLazyUnquantization(r,C)}z.attributes=w.attributes;return z})};F.createPolygon=function(c,d,g){if(c){var t=h.createInstance(k.accessorConstructor);t.setSpatialReference(d);d=h.unquantizeFunction("esriGeometryPolygon",g);t.setupLazyUnquantization(d,c)}return t};l.setObject("tasks.FeatureSet",F,n);return F})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],
function(F,l,b,q,n){b={graphicsExtent:function(p){if(!p||!p.length)return null;var m=null,a,e=p.length;for(a=0;a<e;a++){var k=p[a].geometry;if(k){var h=k.getExtent();h||"point"!==k.type||null==k.x||null==k.y||(h=new n(k.x,k.y,k.x,k.y,k.spatialReference));h&&(m=m?m.union(h):h)}}return 0>m.getWidth()&&0>m.getHeight()?null:m},getGeometries:function(p){return l.map(p,function(m){return m.geometry})},_encodeGraphics:function(p,m){return l.map(p,function(a,e){var k=a.toJson(),h={};if(k.geometry){var f=
m&&m[e];h.geometry=f&&f.toJson()||k.geometry}k.attributes&&(h.attributes=k.attributes);return h})}};F.mixin(q,b);return b})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),function(F,l,b,q,n,p,m,a){F=F(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,
pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,maxItemCount:null,returnPixelValues:!0,toJson:function(e){var k=e&&e.geometry||this.geometry;e={geometry:k,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?b.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?b.toJson(this.renderingRule.toJson()):null};k&&(e.geometryType=a.getJsonType(k));k=this.timeExtent;e.time=k?k.toJson().join(","):null;m.isDefined(this.pixelSizeX)&&
m.isDefined(this.pixelSizeY)?e.pixelSize=b.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(e.pixelSize=this.pixelSize?b.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(e.renderingRules=b.toJson(q.map(this.renderingRules,function(h){return h.toJson()})));m.isDefined(this.returnPixelValues)&&(e.returnPixelValues=this.returnPixelValues);m.isDefined(this.maxItemCount)&&(e.maxItemCount=this.maxItemCount);return e}});l.setObject("tasks.ImageServiceIdentifyParameters",
F,p);return F})},"esri/layers/rasterLib/function/StretchFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./vertexShaders ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),function(F,l,b,q,n,p,m){return F([b,m],{declaredClass:"esri.layers.rasterLib.function.StretchFunction",functionName:"Stretch",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({stretchType:0,min:0,max:255,numberOfStandardDeviations:2,
statistics:null,histograms:null,dra:!1,minPercent:.25,maxPercent:.5,useGamma:!1,gamma:null,raster:null,computeGamma:!1},a);this.functionArguments.statistics=this._convertStats(this.functionArguments.statistics);-1===[0,3,5,6].indexOf(this.functionArguments.stretchType)&&(this.functionArguments.stretchType=5);this.min=null==this.min?0:this.min;this.max=null==this.max?255:this.max},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to stretch function is invalid.");
a.raster.statistics&&(this.srcStatistics=this._convertStats(a.raster.statistics));a.raster.histograms&&(this.srcHistograms=a.raster.histograms);this.rasterInfo=l.mixin({},a.raster,{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){a=a.raster;this._stretch(a);return a},hasTilingEffects:function(a){a=
a||this.functionArguments;return!!(a.dra||a.raster&&"object"===typeof a.raster&&a.raster.dra)},_convertStats:function(a){return a?a.map(function(e){return e&&null!=e.min?[e.min,e.max,e.mean,e.stddev]:e}):null},_updateStatistisHistograms:function(a){var e=this.functionArguments,k=e.histograms||this.srcHistograms;if(a&&a.pixelBlock&&a.pixelBlock.pixels){if(0===e.stretchType)this._statistics=e.statistics&&0<e.statistics.length?e.statistics:this.srcStatistics,this._histograms=k;else{var h=a.pixelBlock,
f=h.pixels.length,c=6===e.stretchType&&(e.dra||!k)||3===e.stretchType&&e.dra;c&&(h.statistics||h.calculateStatistics(),this._calculateStatisticsHistograms(a));if(e.dra)if(h.statistics||h.calculateStatistics(),c)this._statistics=h.statistics,this._histograms=h.histograms;else for(e=h.statistics,this._statistics=[],a=0;a<f;a++)this._statistics[a]=[e[a].minValue,e[a].maxValue,0,0];else this._statistics=e.statistics&&0<e.statistics.length?e.statistics:this.srcStatistics,this._histograms=k}this._statistics=
this._convertStats(this._statistics);this._gammaCorrection=this._getGammaCorrection()}else this._statistics=e.statistics&&0<e.statistics.length?e.statistics:this.srcStatistics,this._histograms=k,this._gammaCorrection=this._getGammaCorrection(),this._statistics=this._convertStats(this._statistics)},_getGammaCorrection:function(){var a=this.functionArguments.gamma;if(a){var e=[],k;for(k=0;k<a.length;k++)e[k]=1<a[k]?2<a[k]?6.5+Math.pow(a[k]-2,2.5):6.5+100*Math.pow(2-a[k],4):1;return e}},_stretch:function(a){if(null!==
a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels&&0!==this.functionArguments.stretchType){this._updateStatistisHistograms(a);var e=a.pixelBlock,k=e.pixels;e=e.width*e.height;var h=k.length,f,c;this._createLUT(a);if(null==this.LUT)return this._filterNoLUT(a);var d=this.LUT,g=this.LUTOffset;for(f=0;f<h;f++){var t=d[f];for(c=0;c<e;c++){var r=k[f][c];k[f][c]=t[r-g]}}a.pixelBlock.pixelType="U8"}},_calculateStatisticsHistograms:function(a){a=a.pixelBlock;var e=a.pixelType,k=a.pixels,h=a.mask,f=k.length,
c,d,g=function(B){this.min=-.5;this.max=255.5;this.size=256;l.mixin(this,B);this.counts=this.counts||new Uint32Array(this.size)},t=[],r,w;for(c=0;c<f;c++){var v=new g;var z=v.counts;var C=k[c];if("U8"===e)if(h)for(d=0;d<a.width*a.height;d++)h[d]&&z[C[d]]++;else for(d=0;d<a.width*a.height;d++)z[C[d]]++;else{var D=a.statistics[c].minValue;var y=a.statistics[c].maxValue;v.min=D;v.max=y;y=(y-D)/256;var u=new Uint32Array(257);if(h)for(d=0;d<a.width*a.height;d++)h[d]&&u[Math.floor((C[d]-D)/y)]++;else for(d=
0;d<a.width*a.height;d++)u[Math.floor((C[d]-D)/y)]++;for(d=0;255>d;d++)z[d]=u[d];z[255]=u[255]+u[256]}t.push(v);C=[];D=a.statistics[c].minValue;y=a.statistics[c].maxValue;for(d=w=r=u=0;d<v.size;d++)u+=z[d],r+=d*z[d];r/=u;for(d=0;d<v.size;d++)w+=z[d]*Math.pow(d-r,2);z=Math.sqrt(w/(u-1));d=(r+.5)*(v.max-v.min)/v.size+v.min;v=z*(v.max-v.min)/v.size;C.push(D);C.push(y);C.push(d);C.push(v);a.statistics[c]={min:D,minValue:D,max:y,maxValue:y,mean:d,stddev:v}}a.histograms=t},_getCutOffPoints:function(a){var e=
this.functionArguments,k=999;a&&a.pixelBlock?k=a.pixelBlock.pixels.length:a&&a.texture&&(k=3);a=Math.min(k,this._statistics.length);var h=[],f=[],c,d;switch(e.stretchType){case 5:for(c=0;c<a;c++)h[c]=this._statistics[c][0],f[c]=this._statistics[c][1];break;case 3:for(c=0;c<a;c++)h[c]=this._statistics[c][2]-e.numberOfStandardDeviations*this._statistics[c][3],f[c]=this._statistics[c][2]+e.numberOfStandardDeviations*this._statistics[c][3],h[c]<this._statistics[c][0]&&(h[c]=this._statistics[c][0]),f[c]>
this._statistics[c][1]&&(f[c]=this._statistics[c][1]);break;case 6:for(c=0;c<a;c++){k=this._histograms[c];var g=new Uint32Array(k.size);var t=k.counts;var r=0;var w=-.5===k.min&&1===(k.max-k.min)/t?.5:0;for(d=0;d<k.size;d++)r+=t[d],g[d]=r;t=e.minPercent*r/100;for(d=0;d<k.size;d++)if(g[d]>t){h[c]=k.min+(k.max-k.min)/k.size*(d+w);break}t=(1-e.maxPercent/100)*r;for(d=k.size-2;0<=d;d--)if(g[d]<t){f[c]=k.min+(k.max-k.min)/k.size*(d+2-w);break}}break;default:for(c=0;c<k;c++)h[c]=0,f[c]=255}return{minCutOff:h,
maxCutOff:f}},_createLUT:function(a){var e=this.functionArguments,k=a.pixelBlock,h=k.pixelType;if("U8"===h||"U16"===h||"S8"===h||"S16"===h){if(this._LUTSignature&&(h=this._computeLutSignature(),h.length===this._LUTSignature.length&&!h.some(function(x,A){return x!==this._LUTSignature[A]}.bind(this))))return;h=k.pixels.length;var f=[],c=[],d=e.max,g=e.min,t=e.gamma,r=d-g,w=this._getCutOffPoints(a);a=w.minCutOff;w=w.maxCutOff;var v=0,z=256;"S8"===k.pixelType?v=-127:"S16"===k.pixelType&&(v=-32767);if("U16"===
k.pixelType||"S16"===k.pixelType)z=65536;for(k=0;k<h;k++)f[k]=w[k]-a[k];var C=this._gammaCorrection;if(e.useGamma)for(k=0;k<h;k++){var D=[];for(e=0;e<z;e++){var y=e+v;var u=(y-a[k])/f[k];var B=1;1<t[k]&&(B-=Math.pow(1/r,u*C[k]));y<w[k]&&y>a[k]?D[e]=Math.floor(B*r*Math.pow(u,1/t[k]))+g:y>w[k]?D[e]=d:y<a[k]&&(D[e]=g)}c[k]=D}else for(k=0;k<h;k++){D=[];for(e=0;e<z;e++)y=e+v,D[e]=y<a[k]?g:y>w[k]?d:Math.floor((y-a[k])/f[k]*r)+g;c[k]=D}this.LUT=c;this.LUTOffset=v;this._LUTSignature=this._computeLutSignature()}},
_computeLutSignature:function(){var a=this.functionArguments,e=[],k,h;e.push(a.stretchType);e.push(a.min);e.push(a.max);e.push(a.numberOfStandardDeviations);if(this._statistics)for(k=0;k<this._statistics.length;k++)for(h=0;h<this._statistics[k].length;h++)e.push(this._statistics[k][h]);e.push(a.dra?1:0);e.push(a.minPercent);e.push(a.maxPercent);if(a.gamma)for(k=0;k<this._statistics.length;k++)e.push(a.gamma[k]);e.push(a.useGamma?1:0);return e},_filterNoLUT:function(a){if(null!==a&&null!==a.pixelBlock&&
null!==a.pixelBlock.pixels){var e=this.functionArguments,k=a.pixelBlock,h=k.pixels,f=k.mask;k=k.width*k.height;var c=h.length,d=[],g=[],t=e.max,r=e.min,w=e.gamma,v=t-r;var z=this._getCutOffPoints(a);var C=z.minCutOff,D=z.maxCutOff;for(z=0;z<c;z++)d[z]=D[z]-C[z];if(e.useGamma&&null!==w&&w.length>=c)for(z=0;z<c;z++)g[z]=1<w[z]?2<w[z]?6.5+Math.pow(w[z]-2,2.5):6.5+100*Math.pow(2-w[z],4):1;if(e.useGamma)if(void 0!==f&&null!==f)for(e=0;e<k;e++){if(f[e])for(z=0;z<c;z++){var y=h[z][e];var u=(y-C[z])/d[z];
var B=1;1<w[z]&&(B-=Math.pow(1/v,u*g[z]));y<D[z]&&y>C[z]?h[z][e]=Math.floor(B*v*Math.pow(u,1/w[z]))+r:y>D[z]?h[z][e]=t:y<C[z]&&(h[z][e]=r)}}else for(e=0;e<k;e++)for(z=0;z<c;z++)y=h[z][e],u=(y-C[z])/d[z],B=1,1<w[z]&&(B-=Math.pow(1/v,u*g[z])),y<D[z]&&y>C[z]?h[z][e]=Math.floor(B*v*Math.pow(u,1/w[z]))+r:y>D[z]?h[z][e]=t:y<C[z]&&(h[z][e]=r);else if(void 0!==f&&null!==f)for(e=0;e<k;e++){if(f[e])for(z=0;z<c;z++)y=h[z][e],y<D[z]&&y>C[z]?h[z][e]=Math.floor((y-C[z])/d[z]*v)+r:y>D[z]?h[z][e]=t:y<C[z]&&(h[z][e]=
r)}else for(e=0;e<k;e++)for(z=0;z<c;z++)y=h[z][e],y<D[z]&&y>C[z]?h[z][e]=Math.floor((y-C[z])/d[z]*v)+r:y>D[z]?h[z][e]=t:y<C[z]&&(h[z][e]=r);a.pixelBlock.pixelType="U8";return a}},_computeGammaValues:function(a){var e=this._statistics.length,k,h=[];for(k=0;k<e;k++){var f=this._statistics[k][2];"U8"!==a&&(f=255*(f-this._statistics[k][0])/(this._statistics[k][1]-this._statistics[k][0]));h.push(this._computeGammaValue(f))}return h},_computeGammaValue:function(a){if(0!==a&&!(255<a||0>a)){var e=0;0<a&&
150!=a&&255>a&&(e=150>=a?45*Math.cos(.01047*a):17*Math.sin(.021*a));e=Math.log((a+e)/255);if(0!==e&&(a=Math.log(a/255)/e,!isNaN(a)))return Math.min(9.9,Math.max(.01,a))}},readGL:function(a){return this._stretchGL(a.raster)},_stretchGL:function(a){this._performance.start();var e=this.renderTexture,k,h=a.pixelBlock&&a.pixelBlock.pixels&&a.pixelBlock.pixels.length||this.sourceRasterInfo.raster.bandCount,f=a.pixelBlock,c=this.gl,d=c.drawingBufferWidth,g=c.drawingBufferHeight;if(!f&&this.functionArguments.dra){var t=
new Float32Array(d*g*4),r=new Uint8Array(d*g);var w=new Float32Array(d*g);var v=new Float32Array(d*g);var z=new Float32Array(d*g);c.checkFramebufferStatus(c.FRAMEBUFFER)==c.FRAMEBUFFER_COMPLETE&&c.readPixels(0,0,d,g,c.RGBA,c.FLOAT,t);for(k=0;k<d*g;k++)w[k]=t[4*k],v[k]=t[4*k+1],z[k]=t[4*k+2],r[k]=t[4*k+3];a.pixelBlock=new q({width:d,height:g,pixels:[w,v,z],mask:r});a.pixelBlock.calculateStatistics()}!f&&this.functionArguments.dra&&this._useGPUStats?(w=new Float32Array(h),v=new Float32Array(h)):(this._updateStatistisHistograms(a),
t=this._getCutOffPoints(a),w=new Float32Array(h),v=new Float32Array(h),w.set(t.minCutOff.slice(0,h)),v.set(t.maxCutOff.slice(0,h)));this._initializeProgram({fragment:p.stretch,fragmentName:"Stretch"});t=this._setupTextureData(a);r=this.bindFrameBuffer();this.renderTexture=!1;this._performance.start();if(!f&&this.functionArguments.dra&&this._useGPUStats){this._setUniforms({u_sourceDim:[d,g],u_bandCount:h});if(1===h)var C=this._readMinMax(t,2);else{C=this._readMinMax(t,0);var D=this._readMinMax(t,1)}if(6===
this.functionArguments.stretchType||3===this.functionArguments.stretchType&&this.functionArguments.dra)k=this._readHistogram(C,D,a),w=k.minCutOff||w,v=k.minCutOff||v}z=this.functionArguments.max-this.functionArguments.min;a=new Float32Array(h);for(k=0;k<h;k++)a[k]=z/(v[k]-w[k]);this._useGPUStats&&this._initializeProgram({fragment:p.stretch,fragmentName:"Stretch"});c.blendFunc(c.SRC_ALPHA,c.ZERO);z=new Float32Array(3);var y=new Float32Array(3);for(k=0;3>k;k++)z[k]=this.functionArguments.min,y[k]=this.functionArguments.max;
k=this.functionArguments.useGamma;var u=this.functionArguments.gamma,B=this._gammaCorrection;Array.isArray(u)&&u.length>=h||(k=!1);this._setUniforms({u_sourceDim:[d,g],u_bandCount:h,u_minOutput:z,u_maxOutput:y,u_minCutOff:w,u_maxCutOff:v,u_factor:a,u_state:100,u_useGamma:k,u_gamma:u,u_scaled:!e,u_gammaCorrection:B,u_minMaxTexture:!f&&this.functionArguments.dra&&this._useGPUStats?!0:!1});this.renderTexture=e;c.viewport(0,0,d,g);this._bindTexture(t.texture,"u_image");!f&&this.functionArguments.dra&&
this._useGPUStats&&(e=c.getUniformLocation(this.rasterProgram,"u_image1"),c.uniform1i(e,1),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,C.texture),1<h&&(h=c.getUniformLocation(this.rasterProgram,"u_image2"),c.uniform1i(h,2),c.activeTexture(c.TEXTURE2),c.bindTexture(c.TEXTURE_2D,D.texture)));this._drawGL();return{extent:t.extent,texture:r.texture}},_readMinMax:function(a,e){var k=this.gl,h=a.width||k.drawingBufferWidth,f=a.height||k.drawingBufferHeight;this._setUniforms({u_state:e});this.renderTexture=
!1;var c=a.texture;for(k.activeTexture(k.TEXTURE0);1<h||1<f;){var d=this._createTexture();var g=Math.max(Math.ceil(h/2),1);var t=Math.max(Math.ceil(f/2),1);k.getExtension("OES_texture_float");k.texImage2D(k.TEXTURE_2D,0,k.RGBA,g,t,0,k.RGBA,k.FLOAT,null);var r=k.createFramebuffer();k.bindFramebuffer(k.FRAMEBUFFER,r);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,d,0);k.viewport(0,0,g,t);k.bindTexture(k.TEXTURE_2D,c);this._setUniforms({u_sourceDim:[h,f]});h=g;f=t;this._drawGL(!0);
c=d}r=new Float32Array(h*f*4);k.checkFramebufferStatus(k.FRAMEBUFFER)==k.FRAMEBUFFER_COMPLETE&&k.readPixels(0,0,h,f,k.RGBA,k.FLOAT,r);return{texture:d,minmax:r}},_readHistogram:function(a,e,k){if(a)try{var h=this.gl,f=h.drawingBufferWidth,c=h.drawingBufferHeight,d,g,t;if(a.texture instanceof WebGLTexture){var r=!0;var w=[1,0,0,1];if(e){var v=a.minmax;var z=e.minmax}else v=[a.minmax[0]],z=[a.minmax[1]]}else for(z=e,v=a,w=new Float32Array(z.length),d=0;d<z.length;d++)w[d]=256/(z[d]-v[d]);var C=new Float32Array(f*
c);for(t=0;t<C.length;t++)C[t]=t;if(!this.histogramProgram){var D=n.getShader(h,n.histogram),y=p.getShader(h,p.constant);this.histogramProgram=this._loadProgram(D,y)}h.blendFunc(h.ONE,h.ONE);h.enable(h.BLEND);h.useProgram(this.histogramProgram);var u=h.getAttribLocation(this.histogramProgram,"a_pixelIndex"),B=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,B);h.bufferData(h.ARRAY_BUFFER,C,h.STATIC_DRAW);h.enableVertexAttribArray(u);h.vertexAttribPointer(u,1,h.FLOAT,!1,0,0);var x=this._setupHistTexture(k),
A=this._createTexture();h.getExtension("OES_texture_float");h.texImage2D(h.TEXTURE_2D,0,h.RGBA,257,1,0,h.RGBA,h.FLOAT,null);var E=h.createFramebuffer();h.bindFramebuffer(h.FRAMEBUFFER,E);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,A,0);h.viewport(0,0,257,1);var J=h.getUniformLocation(this.histogramProgram,"u_image");h.uniform1i(J,0);h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,x);var O=h.getUniformLocation(this.histogramProgram,"u_sourceDim");h.uniform2f(O,f,c);
var S=h.getUniformLocation(this.histogramProgram,"u_bandCount");h.uniform1i(S,3);var X=h.getUniformLocation(this.histogramProgram,"u_halfPixel");h.uniform2f(X,.5/f,.5/c);var Y=h.getUniformLocation(this.histogramProgram,"u_minMaxTexture");if(r){h.uniform1i(Y,1);var K=h.getUniformLocation(this.histogramProgram,"u_image1");h.uniform1i(K,1);h.activeTexture(h.TEXTURE1);h.bindTexture(h.TEXTURE_2D,a.texture);if(e){var P=h.getUniformLocation(this.histogramProgram,"u_image2");h.uniform1i(P,2);h.activeTexture(h.TEXTURE2);
h.bindTexture(h.TEXTURE_2D,e.texture)}}else{var Q=h.getUniformLocation(this.histogramProgram,"u_mins");h.uniform4f(Q,v[0],v[0],v[0],v[0]);h.uniform1i(Y,0)}var ba=h.getUniformLocation(this.histogramProgram,"u_color"),ca=h.getUniformLocation(this.histogramProgram,"u_factors"),ka=h.getUniformLocation(this.histogramProgram,"u_size");h.uniform1f(ka,256);a=[];e=[];h.uniform4fv(ba,[1,0,0,1]);h.uniform4fv(ca,[w[0],0,0,1]);h.drawArrays(h.POINTS,0,C.length);var aa=this.sourceRasterInfo.raster.bandCount;1<aa&&
(h.uniform4fv(ba,[0,1,0,1]),h.uniform4fv(ca,[0,w[0],0,1]),h.drawArrays(h.POINTS,0,C.length),h.uniform4fv(ba,[0,0,1,1]),h.uniform4fv(ca,[0,0,w[0],1]),h.drawArrays(h.POINTS,0,C.length));if(h.checkFramebufferStatus(h.FRAMEBUFFER)==h.FRAMEBUFFER_COMPLETE){var ja=new Float32Array(1028);h.readPixels(0,0,257,1,h.RGBA,h.FLOAT,ja);h=0;var oa=-.5===v[0]&&1===(z[0]-v[0])/256?.5:0;for(d=0;d<aa;d++){var U=new Float32Array(257);var ea=new Float32Array(257);for(t=h=0;256>t;t++)h+=ja[4*t+d],U[t]=h,ea[t]=ja[4*t+d];
ea[256]=ja[1024+d];U[256]=h+ja[1024+d];var fa=this.functionArguments.minPercent*h/100;if(z){for(g=0;256>g;g++)if(U[g]>fa){a[d]=v[0]+(z[0]-v[0])/256*(g+oa);break}fa=(1-this.functionArguments.maxPercent/100)*h;for(g=254;0<=g;g--)if(U[g]<fa){e[d]=v[0]+(z[0]-v[0])/256*(g+2-oa);break}}}}return{histogram:ja,minCutOff:a,maxCutOff:e}}catch(pa){}},_setupHistTexture:function(a){if(a instanceof WebGLTexture)return a;var e=this.originalHistTexture=this._createTexture(),k=this.gl;a=a.pixelBlock;var h=a.width,
f=a.height;k.getExtension("OES_texture_float");this.rgbaFloatData=a.getAsRGBAFloat();k.texImage2D(k.TEXTURE_2D,0,k.RGBA,h,f,0,k.RGBA,k.FLOAT,this.rgbaFloatData);return e}})})},"esri/layers/rasterLib/function/RasterFunctionX":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/config ../raster/RasterInfo ../../../geometry/Extent ../../PixelBlock".split(" "),function(F,l,b,q,n,p){return F(null,{functionName:null,functionArguments:null,pixelType:"Unknown",rasterInfo:null,constructor:function(m){m&&
(this.pixelType=m.outputPixelType||m.OutputPixelType||this.pixelType,this.renderTexture=m.renderTexture,this._initFunction())},mixinIgnoreCase:function(m,a){var e=Object.keys(m),k=Object.keys(a),h,f,c=e.length;for(h=0;h<k.length;h++){var d=a[k[h]];if(null!=d)for(f=0;f<c;f++)if(e[f].toLowerCase()===k[h].toLowerCase()){m[e[f]]=d;break}}return m},bind:function(m){},setProcessingContext:function(m){if(!m)throw"cannot bind to layer without options";this.useWebGL=!!m.useWebGL;this._tileMode=!!m.tileMode;
this._glSetting=m.glSetting;this._rawRasterInfo=m.rawRasterInfo;this._xformSetting=m.xformSetting||this._xformSetting;if(!this.useWebGL||this._glSetting&&this._glSetting.gl){this.gl=this.useWebGL?this._glSetting.gl:null;this._glSetting&&(this._glSetting.pingpong=null,this._glSetting.branches=null);var a=this.functionArguments.raster,e=this.functionArguments.raster2,k=this.functionArguments.dem,h=this.functionArguments.fillRaster,f=this.functionArguments.rasters;a&&a.functionArguments&&a.setProcessingContext(m);
e&&e.functionArguments&&e.setProcessingContext(m);k&&k.functionArguments&&k.setProcessingContext(m);h&&h.functionArguments&&h.setProcessingContext(m);if(f)for(a=0;a<f.length;a++)f[a]&&f[a].functionArguments&&f[a].setProcessingContext(m);this.bind()}},updateBranchStructure:function(){var m=0,a=this.functionArguments;a.raster&&a.raster.read&&a.raster.functionArguments&&(m+=a.raster.updateBranchStructure());a.raster2&&a.raster2.read&&a.raster2.functionArguments&&(m+=a.raster2.updateBranchStructure(),
a.raster2.isBranch=!0,a.raster&&a.raster.read&&(a.raster.isBranch=!0));a.rasters&&(m=a.rasters.length,a.rasters.forEach(function(e){e.read&&e.functionArguments&&(e.isBranch=!0)}));a.dem&&a.dem.read&&a.dem.functionArguments&&(m+=a.dem.updateBranchStructure());return 1===m?0:m},read:function(m){m=this.processRasterArgument(m);return this.useWebGL?this.readGL(m):this.read2D(m)},hasTilingEffects:function(){return!1},read2D:function(){},readGL:function(){},getSourceRasterInfo:function(){var m,a={};if(this.functionArguments.raster2)a.functionArguments.raster=
this._bindRaster(this.functionArguments.raster),a.functionArguments.raster2=this._bindRaster(this.functionArguments.raster2);else if(this.functionArguments.rasters)for(a.rasters=[],m=0;m<this.functionArguments.rasters.length;m++)a.rasters[m]=this._bindRaster(this.functionArguments.rasters[m]);else a.raster=this._bindRaster(this.functionArguments.raster);return this.sourceRasterInfo=a},processRasterArgument:function(m){var a=this.bind();if(!0!==a)throw a;var e={};if(this.functionArguments.raster2)e.raster=
this._readRaster(this.functionArguments.raster,m),e.raster2=this._readRaster(this.functionArguments.raster2,m);else if(this.functionArguments.rasters)for(e.rasters=[],a=0;a<this.functionArguments.rasters.length;a++)e.rasters[a]=this._readRaster(this.functionArguments.rasters[a],m);else e.raster=this._readRaster(this.functionArguments.raster,m);return e},toJson:function(){var m=this.functionArguments,a=m.raster,e=m.raster2;m=m.rasters;a=a?a.toJson?a.toJson():a:null;e=e?e.toJson?e.toJson():e:null;var k;
m&&0<m.length&&(k=m.map(function(h){return h.toJson?h.toJson():h}));m=l.mixin({},this.functionArguments);m.raster=a;m.raster2=e;m.rasters=k;m=this._fixRasterFunctionJson(m);return{rasterFunction:this.functionName,rasterFunctionArguments:m,outputPixelType:this.pixelType}},_initFunction:function(m){},_getIntegerRange:function(m){switch(m){case "U8":var a=[0,255];break;case "U16":a=[0,65535];break;case "U32":a=[0,4294967295];break;case "S8":a=[-128,127];break;case "S16":a=[-32768,32767];break;case "S32":a=
[-2147483648,2147483647]}return a},_calculatePixelType:function(m,a){return m&&"unknown"!==m.toLowerCase()?m:a},_clonePixelData:function(m){if(null==m)return m;var a={};m.extent&&(a.extent=new n(m.extent.xmin,m.extent.ymin,m.extent.xmax,m.extent.ymax,m.extent.spatialReference));m=m.pixelBlock;if(null==m)return a;a.pixelBlock=m.clone?m.clone():p.prototype.clone(m);return a},_readRaster:function(m,a){if(null==m||"$$"===m)var e=this._clonePixelData(a.src[Object.keys(a.src)[0]]);else if(m&&m.rasterInfo&&
!m.functionArguments)e=this._clonePixelData(a.src[m._rasterId]);else if(isNaN(m))m.read&&(e=m.functionArguments?m.read(a):this._clonePixelData(a));else{e=a.src?a.src[Object.keys(a.src)[0]]:a;var k=e.pixelBlock;k=new Float32Array(k.width*k.height);k.fill(parseFloat(m));e=this._clonePixelData(e);e.pixelBlock.pixels=[k];e.isConstant=!0}return e},_bindRaster:function(m){if(m&&"$$"!==m)isNaN(m)?m.rasterInfo?a=m.rasterInfo:m.bind&&m.bind()&&(a=m.rasterInfo):a={};else var a=this._rawRasterInfo;a&&(a=a.clone?
a.clone():new q(a),a.bandCount=a.bandCount||3);return a},_getOutputBand:function(m,a){switch(m){case "U8":var e=new Uint8Array(a);break;case "U16":e=new Uint16Array(a);break;case "U32":e=new Uint32Array(a);break;case "S8":e=new Int8Array(a);break;case "S16":e=new Int16Array(a);break;case "S32":e=new Int32Array(a);break;case "U32":e=new Uint32Array(a);break;case "F32":e=new Float32Array(a);break;case "F64":e=new Float64Array(a);break;default:e=new Float32Array(a)}return e},_clampBand:function(m,a,
e){if(("F64"===a||"F32"===a)&&!e)return m;var k,h=this._getIntegerRange(a),f=m.length;if(h)for(e=h[1],h=h[0],a=this._getOutputBand(a,f),k=0;k<f;k++){var c=m[k];a[k]=c>e?e:c<h?h:c}else a=m;return a},_performance:{start:function(){return this._start=self.performance&&self.performance.now()||new Date}.bind(this),elapsed:function(){return(self.performance&&self.performance.now()||new Date)-this._start}.bind(this)},_addPerformanceMetric:function(m){b.isDebug&&(self.rasterFunctionPerformance||(self.rasterFunctionPerformance=
[]),self.rasterFunctionPerformance.push(m),50<self.rasterFunctionPerformance.length&&self.rasterFunctionPerformance.shift())},_fixRasterFunctionJson:function(m){for(var a in m)m.hasOwnProperty(a)&&(null==m[a]?delete m[a]:m[a]instanceof Object&&!m[a].sourceType&&this._fixRasterFunctionJson(m[a],!0));return m}})})},"esri/layers/rasterLib/raster/RasterInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","../../../geometry/Extent","../../../SpatialReference","../tile/RasterTileInfo"],function(F,
l,b,q,n){return F(null,{declaredClass:"esri.layers.rasterLib.raster.RasterInfo",bandCount:null,pixelType:null,extent:null,spatialReference:null,width:null,height:null,colormap:null,attributeTable:null,multiDimensionalInfo:null,statistics:null,histograms:null,catalogInfo:null,keyProperties:null,cellSize:null,format:null,compression:null,compressionQuality:null,packetSize:null,geodataXform:null,constructor:function(p){l.mixin(this,p);this.extent=this.extent?this.extent.toJson?this.extent:new b(this.extent):
null;this.spatialReference=this.spatialReference?this.spatialReference.toJson?this.spatialReference:new q(this.spatialReference):null;this.tileInfo=this.tileInfo?this.tileInfo.toJson?this.tileInfo:new n(this.tileInfo):null},toJson:function(){return{bandCount:this.bandCount,pixelType:this.pixelType,extent:this.extent&&this.extent.toJson?this.extent.toJson():this.extent,spatialReference:this.spatialReference&&this.spatialReference.toJson?this.spatialReference.toJson():this.spatialReference,width:this.width,
height:this.height,colormap:this.colormap?l.clone(this.colormap):null,attributeTable:this.attributeTable?l.clone(this.attributeTable):null,multiDimensionalInfo:this.multiDimensionalInfo?l.clone(this.multiDimensionalInfo):null,statistics:this.statistics?l.clone(this.statistics):null,histograms:this.histograms?l.clone(this.histograms):null,catalogInfo:this.catalogInfo?l.clone(this.catalogInfo):null,keyProperties:this.keyProperties?l.clone(this.keyProperties):null,cellSize:this.cellSize&&this.cellSize.toJson?
this.cellSize.toJson():this.cellSize,tileInfo:this.tileInfo&&this.tileInfo.toJson?this.tileInfo.toJson():this.tileInfo,format:this.format,compression:this.compression,compressionQuality:this.compressionQuality,packetSize:this.packetSize,geodataXform:this.geodataXform?l.clone(this.geodataXform):null}},clone:function(){return new this.constructor(this.toJson())}})})},"esri/layers/rasterLib/tile/RasterTileInfo":function(){define("dojo/_base/declare dojo/_base/lang ../../../geometry/Extent ../../../SpatialReference ../../../geometry/Point ../../../lang ../../TileInfo".split(" "),
function(F,l,b,q,n,p,m){return F([m],{declaredClass:"esri.layers.rasterLib.tile.RasterTileInfo",rows:512,cols:512,compressionQuality:95,lercError:.01,spatialReference:null,origin:null,virtual:!0,tileType:"Raster",constructor:function(a,e){if(a||e){var k=e&&e.refTileInfo;a?this.virtual=!1:(this.virtual=!0,l.mixin(this,{rows:e.rows||this.rows,cols:e.cols||this.cols,compressionQuality:e.compressionQuality||95,lercError:e.compressionTolerance||.01,spatialReference:e.spatialReference,origin:e.origin}),
this.width=this.cols,this.height=this.rows,this.origin||(k?this.origin=k.origin:e.spatialReference.isWebMercator()||e.extent&&360<=Math.max(Math.abs(e.extent.xmin),Math.abs(e.extent.xmax))?this.origin={x:-2.0037508342787E7,y:2.0037508342787E7}:-1<[4326,4269].indexOf(e.spatialReference.wkid)||360>Math.max(Math.abs(e.extent.xmin),Math.abs(e.extent.xmax))?this.origin={x:-180,y:90}:this.origin={x:e.extent.xmin,y:e.extent.ymax}))}},toJson:function(){var a=m.prototype.toJson.apply(this);a.tileType=this.tileType;
a.virtual=this.virtual;a.lercError=this.lercError;return a},clone:function(){return new this.prototype(this.toJson())}})})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(F,l,b,q,n,p,m,a,e){F=F(null,{declaredClass:"esri.layers.TileInfo",constructor:function(k){l.mixin(this,k);this.width=this.cols;this.height=this.rows;this._levelToLOD={};k=this.spatialReference;
var h=this.origin;k&&(k=this.spatialReference=new m(k.toJson?k.toJson():k));h&&(this.origin=new a(h.toJson?h.toJson():h),!h.spatialReference&&k&&this.origin.setSpatialReference(new m(k.toJson())));this.lods=b.map(this.lods,function(d){return new e(d)});b.forEach(this.lods,function(d){this._levelToLOD[d.level]=d},this);k=!1;h=this.spatialReference;var f=this.origin;if(h&&f){var c=h._getInfo();c&&(k=h._isWrappable()&&Math.abs(c.origin[0]-f.x)<=c.dx)}this.isWrappable=k;this._initializeUpsampleLevels()},
toJson:function(){return p.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&b.map(this.lods,function(k){return k.toJson()})})},lodAt:function(k){return this._levelToLOD&&this._levelToLOD[k]||null},updateTileInfo:function(k){var h=this.lodAt(k.level),f=h.resolution*this.width;h=h.resolution*this.height;k.id=
k.level+"/"+k.row+"/"+k.col;k.extent||(k.extent=[0,0,0,0]);k.extent[0]=this.origin.x+k.col*f;k.extent[1]=this.origin.y-(k.row+1)*h;k.extent[2]=k.extent[0]+f;k.extent[3]=k.extent[1]+h},upsampleTile:function(k){var h=this._upsampleLevels[k.level];if(!h||-1===h.parentLevel)return!1;k.level=h.parentLevel;k.row=Math.floor(k.row/h.factor+.001);k.col=Math.floor(k.col/h.factor+.001);this.updateTileInfo(k);return!0},_initializeUpsampleLevels:function(){var k=this.lods;this._upsampleLevels=[];for(var h=null,
f=0;f<k.length;f++){var c=k[f];this._upsampleLevels[c.level]={parentLevel:h?h.level:-1,factor:h?h.resolution/c.resolution:0};h=c}}});l.setObject("layers.TileInfo",F,n);return F})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,l,b,q,n){F=F(null,{declaredClass:"esri.layers.LOD",constructor:function(p){l.mixin(this,p)},toJson:function(){return n.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});
l.setObject("layers.LOD",F,q);return F})},"esri/layers/rasterLib/function/vertexShaders":function(){define(["dojo/_base/declare","dojo/_base/lang","./vertexShaderScripts"],function(F,l,b){F={shaderType:"vertex",getShader:function(q,n){var p=q.createShader(q.VERTEX_SHADER);q.shaderSource(p,n);q.compileShader(p);q.getShaderParameter(p,q.COMPILE_STATUS)||(p=null);return p}};l.mixin(F,b);return F})},"esri/layers/rasterLib/function/vertexShaderScripts":function(){define([],function(){return{basic:"varying vec2 v_texCoord;\nattribute vec2 a_texCoord;\nuniform vec2 u_xformOffset;\nuniform vec2 u_xformScale;\nuniform bool u_flipY;\nvoid main() {\nv_texCoord \x3d u_xformOffset + a_texCoord * u_xformScale;\nif (u_flipY) {\nv_texCoord.t \x3d 1.0 - v_texCoord.t;\n}\nvec2 position \x3d a_texCoord * 2.0 - 1.0;\ngl_Position \x3d vec4(position, 0.0, 1.0);\n}",
histogram:"attribute float a_pixelIndex;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nuniform vec2 u_sourceDim;\nuniform vec2 u_halfPixel;\nuniform vec4 u_bandSelection;\nuniform vec4 u_mins;\nuniform vec4 u_factors;\nuniform float u_size;\nuniform int u_bandCount;\nuniform bool u_minMaxTexture;\nvoid main() {\nfloat row \x3d a_pixelIndex/u_sourceDim.s;\nvec2 coord \x3d vec2(fract(row), floor(row)/u_sourceDim.t);\nvec4 pv \x3d texture2D(u_image, coord + u_halfPixel);\nvec4 minVal, maxVal, pvm;\nif (u_minMaxTexture){\nif (u_bandCount \x3d\x3d1){ //min \x3d red, max \x3d green\nvec4 minmax \x3d texture2D(u_image1, vec2(0.5,0.5));\nminVal \x3d vec4(minmax.r, minmax.r, minmax.r, 0.0);\nmaxVal \x3d vec4(minmax.g, minmax.g, minmax.g, 0.0);\n}\nelse if (u_bandCount \x3d\x3d3){ //min \x3d red, max \x3d green\nminVal \x3d texture2D(u_image1, vec2(0.5,0.5));\nmaxVal \x3d texture2D(u_image2, vec2(0.5,0.5));\n}\nvec4 factors \x3d u_size/(maxVal-minVal+vec4(0.0,0.0,0.0,1.0)) * u_factors;\npvm \x3d (pv - minVal) * factors;\n}\nelse {\npvm \x3d (pv - u_mins) * u_factors;\n}\nfloat histVal \x3d min(floor(pvm.r+pvm.g+pvm.b), u_size-1.0);\nhistVal \x3d pv.a \x3d\x3d 1.0? histVal: u_size;\ngl_Position \x3d vec4((histVal+0.1) / (u_size+1.0) * 2.0 - 1.0, 0.5, 0, 1);\ngl_PointSize \x3d 1.0;\n}",
mesh:"varying vec2 v_texCoord;\nattribute vec2 a_texCoord;\nuniform bool u_drawMeshLines;\nuniform bool u_flipY;\nuniform vec2 u_xformOffset;\nuniform vec2 u_xformScale;\nuniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nuniform vec2 u_srcImageSize;\nuniform bool u_projection;\nvec2 projectPixelLocation(vec2 coords) {\nvec2 index_image \x3d floor(coords * u_targetImageSize);\nvec2 oneTransformPixel \x3d vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform \x3d floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos \x3d fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location \x3d index_transform + oneTransformPixel * 0.5;\nif (pos.s \x3c\x3d pos.t) {\nvec4 ll_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;// + halfPixel;\n}\nvoid main() {\nif (u_projection) {\nv_texCoord \x3d projectPixelLocation(a_texCoord);\n} else {\nv_texCoord \x3d u_xformOffset + a_texCoord * u_xformScale;\n}\nif (u_flipY) {\nv_texCoord.t \x3d 1.0 - v_texCoord.t;\n}\nvec2 position \x3d a_texCoord * 2.0 - 1.0;\nif (u_drawMeshLines){\nvec2 adjustedPos \x3d (v_texCoord - u_xformOffset) / u_xformScale;\ngl_Position \x3d vec4( adjustedPos * 2.0 - 1.0, 0.0, 1.0);\n}\nelse {\ngl_Position \x3d vec4(position, 0.0, 1.0);\n}\n}"}})},
"esri/layers/rasterLib/function/pixelShaders":function(){define(["dojo/_base/declare","dojo/_base/lang","./pixelShaderScripts"],function(F,l,b){F={shaderType:"fragment",getShader:function(q,n){var p=q.createShader(q.FRAGMENT_SHADER);q.shaderSource(p,n);q.compileShader(p);q.getShaderParameter(p,q.COMPILE_STATUS)||(p=null);return p}};l.mixin(F,b);return F})},"esri/layers/rasterLib/function/pixelShaderScripts":function(){define([],function(){return{aspect:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_cellSize;\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nfloat pi \x3d 3.141592653589793238;\nfloat dz_dx \x3d 0.0;\nfloat dz_dy \x3d 0.0;\nvec4 va, vb, vc,vd,ve,vf,vg,vh,vi;\nvec2 axy \x3d vec2(-1.0,-1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s)\n{\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t)\n{\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e1.0-u_resolution.s)\n{\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0- u_resolution.t)\n{\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nif (v_texCoord.s \x3e\x3d u_resolution.s \x26\x26 (1.0-u_resolution.s)\x3e\x3dv_texCoord.s \x26\x26 v_texCoord.t \x3e\x3d u_resolution.t \x26\x26 (1.0-u_resolution.t)\x3e\x3dv_texCoord.t)\n{\nva \x3d texture2D(u_image, v_texCoord + u_resolution* axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution* bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution* cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution* dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution* vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution* fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution* gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution* hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution* ixy);\n}\ndz_dx \x3d (vc+2.0*vf+vi - va - 2.0*vd - vg).r/(8.0*u_cellSize[0]);\ndz_dy \x3d -(vg+2.0*vh+vi - va - 2.0*vb - vc).r/(8.0*u_cellSize[1]);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat aspect_rad \x3d 0.0;\nif (dz_dx \x3d\x3d 0.0)\n{\nif (dz_dy \x3e 0.0)\naspect_rad \x3d 0.5 * pi;\nelse if (dz_dy \x3c 0.0)\naspect_rad \x3d 1.5 * pi;\nelse\nalpha \x3d 0.0;//undefined make it nodata\n}\nelse\n{\naspect_rad \x3d 0.5*pi + atan(dz_dy, -dz_dx);\nif (aspect_rad \x3c 0.0)\naspect_rad \x3d 2.0*pi + aspect_rad;\n}\nfloat aspect \x3d aspect_rad * 180.0 / pi;\ngl_FragColor \x3d vec4(aspect, aspect, aspect, alpha);\n}",
bandArithmetic:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandId_nir;\nuniform int u_bandId_red;\nuniform bool u_scaled;\nuniform int u_bandCount;\nuniform int u_method;\nuniform float u_constants[6];\nvec4 calculateNDVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat ndvi_denom \x3d nir + red;\nfloat ndvi;\nif (ndvi_denom \x3d\x3d 0.0) {\nndvi \x3d 0.0;\n} else {\nndvi \x3d (nir - red) / ndvi_denom;\nif (u_scaled) {\nndvi \x3d float(floor(ndvi * 100.0 + 100.5));\n}\n}\nreturn vec4(ndvi, ndvi, ndvi, currentPixel.a);\n}\nvec4 calculateSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat savi_denom \x3d nir + red + u_constants[0];\nfloat savi;\nif (savi_denom \x3d\x3d 0.0) {\nsavi \x3d 0.0;\n} else {\nsavi \x3d (nir - red) / savi_denom * (1.0 + u_constants[0]);\n}\nreturn vec4(savi, savi, savi, currentPixel.a);\n}\nvec4 calculateMSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat msavi \x3d 0.5 * (2.0 * (nir + 1.0) - sqrt(pow((2.0 * nir + 1.0), 2.0) - 8.0 * (nir - red)));\nreturn vec4(msavi, msavi, msavi, currentPixel.a);\n}\nvec4 calculateTSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat s \x3d u_constants[0];\nfloat a \x3d u_constants[1];\nfloat x \x3d u_constants[2];\nfloat tsavi_denom \x3d a * nir + red - a * s + x * (1.0 + s * s);\nfloat tsavi;\nif (tsavi_denom \x3d\x3d 0.0) {\ntsavi \x3d 0.0;\n} else {\ntsavi \x3d s * (nir - s * red - a) / tsavi_denom;\n}\nreturn vec4(tsavi, tsavi, tsavi, currentPixel.a);\n}\nvec4 calculatePVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat a \x3d u_constants[0];\nfloat b \x3d u_constants[1];\nfloat pvi \x3d (nir - a * red - b) / sqrt(1.0 + a * 2.0);\nreturn vec4(pvi, pvi, pvi, currentPixel.a);\n}\nvec4 calculateGEMI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat gemi;\nif (red \x3d\x3d 1.0) {\ngemi \x3d 0.0;\n} else {\nfloat eta \x3d (2.0 * (nir * nir - red * red) + 1.5 * nir + 0.5 * red) / (nir + red + 0.5);\nfloat gemi \x3d eta * (1.0 - 0.25*eta) - (red - 0.125) / (1.0 - red);\n}\nreturn vec4(gemi, gemi, gemi, currentPixel.a);\n}\nvec4 calculateVARI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(currentPixel.r);\nfloat green \x3d float(currentPixel.g);\nfloat blue \x3d float(currentPixel.b);\nfloat vari \x3d (green - red) /(green + red - blue);\nreturn vec4(vari, vari, vari, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 pv;\nif (u_method \x3c 4) {\nif (u_method \x3d\x3d 1) {\npv \x3d calculateNDVI();\n} else if (u_method \x3d\x3d 2) {\npv \x3d calculateSAVI();\n} else if (u_method \x3d\x3d 3) {\npv \x3d calculateTSAVI();\n} else if (u_method \x3d\x3d 4) {\npv \x3d calculateMSAVI();\n}\n} else {\nif (u_method \x3d\x3d 5) {\npv \x3d calculateGEMI();\n} else if (u_method \x3d\x3d 6) {\npv \x3d calculatePVI();\n} else if (u_method \x3d\x3d 7) {\npv \x3d calculateGEMI();\n} else if (u_method \x3d\x3d 9) {\npv \x3d calculateVARI();\n}\n}\ngl_FragColor \x3d pv;\n}",
colormap:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nvec4 colorize() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat clrIndex \x3d currentPixel.r - u_indexedColormapOffset;\nvec4 result;\nif (currentPixel.a \x3d\x3d 0.0 || clrIndex \x3e u_indexedColormapMaxIndex) {\nresult \x3d vec4(0.0, 0.0, 0.0, 0.0);\n}\nelse {\nvec2 clrPosition \x3d vec2(clrIndex / u_indexedColormapMaxIndex, 0.0);\nvec4 color \x3d texture2D(u_image1, clrPosition);\nresult \x3d vec4(color.r, color.g, color.b, color.a);\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d colorize();\n}",
compositeBand:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform int u_rasterCount;\nvec4 composite() {\nvec4 p0, p1, p2;\np0 \x3d texture2D(u_image, v_texCoord);\nvec4 result;\nif (u_rasterCount \x3d\x3d 1){\nresult \x3d p0;\n}\nelse if (u_rasterCount \x3d\x3d 2){\np1 \x3d texture2D(u_image1, v_texCoord);\nresult \x3d vec4(p0.r,p1.r,0.0,min(p0.a,p1.a));\n}\nelse if (u_rasterCount \x3d\x3d 3){\np1 \x3d texture2D(u_image1, v_texCoord);\np2 \x3d texture2D(u_image2, v_texCoord);\nresult \x3d vec4(p0.r,p1.r,p2.r,min(min(p0.a,p1.a),p2.a));\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d composite();\n}",
constant:"precision mediump float;\nuniform vec4 u_color;\nvoid main() {\ngl_FragColor \x3d u_color;\n}",contrastBrightness:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform float u_contrastOffset;\nuniform float u_brightnessOffset;\nuniform float u_scaleFactor;\nvec4 adjustContrastBrightness() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat c \x3d u_contrastOffset;\nfloat b \x3d u_brightnessOffset;\nfloat maxI \x3d 255.0;\nfloat mid \x3d 128.0;\nvec4 v;\nif (c \x3e 0.0 \x26\x26 c \x3c 100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + 2.0 * maxI * b) / (2.0 * (100.0 - c)) + mid;\n} else if (c \x3c\x3d 0.0 \x26\x26 c \x3e -100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + 2.0 * maxI * b) * (100.0 + c) / 20000.0 + mid;\n} else if (c \x3d\x3d 100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + (maxI + 1.0) * (100.0 - c) + 2.0 * maxI * b);\nv \x3d (sign(v) + 1.0) / 2.0; //binary contrast with extra mid tone at 0.5\n} else if (c \x3d\x3d -100.0) {\nv \x3d vec4(mid, mid, mid, currentPixel.a); //no contrast\n}\nreturn vec4(v.r / u_scaleFactor, v.g / u_scaleFactor, v.b / u_scaleFactor, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d adjustContrastBrightness();\n}",
convolution:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform float u_kernel[25];\nuniform int u_kernelSize;\nvec4 convolve33(){\nvec4 vp11, vp12, vp13, vp21, vp22, vp23, vp31, vp32, vp33;\nvec2 xy11 \x3d vec2(-1.0, -1.0);\nvec2 xy12 \x3d vec2(0.0, -1.0);\nvec2 xy13 \x3d vec2(1.0, -1.0);\nvec2 xy21 \x3d vec2(-1.0, 0.0);\nvec2 xy23 \x3d vec2(1.0, 0.0);\nvec2 xy31 \x3d vec2(-1.0, 1.0);\nvec2 xy32 \x3d vec2(0.0, 1.0);\nvec2 xy33 \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\nxy11[0] \x3d 1.0;\nxy21[0] \x3d 1.0;\nxy31[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\nxy11[1] \x3d 1.0;\nxy12[1] \x3d 1.0;\nxy13[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\nxy13[0] \x3d -1.0;\nxy23[0] \x3d -1.0;\nxy33[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\nxy31[1] \x3d -1.0;\nxy32[1] \x3d -1.0;\nxy33[1] \x3d -1.0;\n}\nvec4 convolResult \x3d\ntexture2D(u_image, v_texCoord + u_resolution * xy11) * u_kernel[0] +\ntexture2D(u_image, v_texCoord + u_resolution * xy12) * u_kernel[1] +\ntexture2D(u_image, v_texCoord + u_resolution * xy13) * u_kernel[2] +\ntexture2D(u_image, v_texCoord + u_resolution * xy21) * u_kernel[3] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(0, 0)) * u_kernel[4] +\ntexture2D(u_image, v_texCoord + u_resolution * xy23) * u_kernel[5] +\ntexture2D(u_image, v_texCoord + u_resolution * xy31) * u_kernel[6] +\ntexture2D(u_image, v_texCoord + u_resolution * xy32) * u_kernel[7] +\ntexture2D(u_image, v_texCoord + u_resolution * xy33) * u_kernel[8];\nreturn vec4(convolResult.rgb, texture2D(u_image, v_texCoord).a);\n}\nvec4 convolve55(){\nvec4 vp11, vp12, vp13, vp21, vp22, vp23, vp31, vp32, vp33;\nfloat xdif[5];//https://www.opengl.org/wiki/Data_Type_(GLSL) array constructor ES3.0\nfloat ydif[5];\nfloat a \x3d -2.0;\nfor (int i\x3d0; i\x3c5; i++){\nxdif[i] \x3d a;\nydif[i] \x3d a;\na++;\n}\nif (v_texCoord.s \x3c u_resolution.s *2.0) { //2 pixel\nxdif[0] \x3d 2.0;\nif (v_texCoord.s \x3c u_resolution.s) { //1 pixel\nxdif[1] \x3d 1.0;\n}\n}\nelse if (v_texCoord.s \x3e 1.0 - u_resolution.s *2.0) {\nxdif[0] \x3d -2.0;\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\nxdif[1] \x3d -1.0;\n}\n}\nif (v_texCoord.t \x3c u_resolution.t *2.0) {\nydif[0] \x3d 2.0;\nif (v_texCoord.t \x3c u_resolution.t) {\nydif[1] \x3d 1.0;\n}\n}\nelse if (v_texCoord.t \x3e 1.0 - u_resolution.t*2.0) {\nydif[0] \x3d -2.0;\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\nydif[1] \x3d -1.0;\n}\n}\nvec4 convolResult \x3d\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[0])) * u_kernel[0] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[0])) * u_kernel[1] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[0])) * u_kernel[2] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[0])) * u_kernel[3] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[0])) * u_kernel[4] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[1])) * u_kernel[5] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[1])) * u_kernel[6] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[1])) * u_kernel[7] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[1])) * u_kernel[8] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[1])) * u_kernel[9] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[2])) * u_kernel[10] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[2])) * u_kernel[11] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[2])) * u_kernel[12] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[2])) * u_kernel[13] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[2])) * u_kernel[14] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[3])) * u_kernel[15] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[3])) * u_kernel[16] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[3])) * u_kernel[17] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[3])) * u_kernel[18] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[3])) * u_kernel[19] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[4])) * u_kernel[20] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[4])) * u_kernel[21] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[4])) * u_kernel[22] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[4])) * u_kernel[23] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[4])) * u_kernel[24];\nreturn vec4(convolResult.rgb, texture2D(u_image, v_texCoord).a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nif (u_kernelSize \x3d\x3d 9){\ngl_FragColor \x3d convolve33();\n}\nelse {\ngl_FragColor \x3d convolve55();\n}\n}",
extractBand:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandIDs[3];\nuniform bool u_alterBand;\nvec4 extractBand() {\nvec4 p \x3d texture2D(u_image, v_texCoord);\nif (!u_alterBand){\nreturn p;\n}\nfloat r, g, b;\nif (u_bandIDs[0] \x3d\x3d0){\nr \x3d p.r;\n}\nelse if (u_bandIDs[0] \x3d\x3d1){\nr \x3d p.g;\n}\nelse if (u_bandIDs[0] \x3d\x3d2){\nr \x3d p.b;\n}\nif (u_bandIDs[1] \x3d\x3d0){\ng \x3d p.r;\n}\nelse if (u_bandIDs[1] \x3d\x3d1){\ng \x3d p.g;\n}\nelse if (u_bandIDs[1] \x3d\x3d2){\ng \x3d p.b;\n}\nif (u_bandIDs[2] \x3d\x3d0){\nb \x3d p.r;\n}\nelse if (u_bandIDs[2] \x3d\x3d1){\nb \x3d p.g;\n}\nelse if (u_bandIDs[2] \x3d\x3d2){\nb \x3d p.b;\n}\nreturn vec4(r, g, b, p.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d extractBand();\n}",
hillshade:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform int u_slopeType;\nuniform int u_hillshadeType;\nuniform int u_lightSourceCount;\nuniform float u_sinZcosA;\nuniform float u_sinZsinA;\nuniform float u_cosZ;\nuniform float u_sinZcosAs[6];\nuniform float u_sinZsinAs[6];\nuniform float u_cosZs[6];\nuniform float u_weights[6];\nuniform float u_xFactor;\nuniform float u_yFactor;\nuniform bool u_scaled;\nuniform float u_minValue;\nuniform float u_maxValue;\nuniform bool u_applyColorramp;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nreturn vp;\n}\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p \x3d c.g \x3c c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q \x3d c.r \x3c p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d \x3d q.x - min(q.w, q.y);\nfloat e \x3d 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec4 overlay(float val, float minValue, float maxValue, float hillshade, float alpha) {\nfloat clrIndex \x3d clamp((val - minValue) / (maxValue - minValue), 0.0, 1.0);\nvec4 rgb \x3d texture2D(u_image1, vec2(clrIndex, 0.0));\nvec3 hsv \x3d rgb2hsv(rgb.xyz);\nhsv.z \x3d hillshade;\nreturn vec4(hsv2rgb(hsv) * alpha, alpha);\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 va, vb, vc, vd, ve, vf, vg, vh, vi;\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nva \x3d texture2D(u_image, v_texCoord + u_resolution * axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution * bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution * cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution * dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution * vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution * fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution * gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution * hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution * ixy);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat dzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r * u_xFactor;\nfloat dzy \x3d (vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r * u_yFactor; //flip\nfloat s2 \x3d sqrt(1.0 + dzx * dzx + dzy * dzy);\nfloat hillshade \x3d 0.0;\nif (u_hillshadeType \x3d\x3d 0){\nfloat cosDelta \x3d u_sinZsinA * dzy - u_sinZcosA * dzx;\nfloat z \x3d (u_cosZ + cosDelta) / s2;\nif (z \x3c 0.0)  z \x3d 0.0;\nhillshade \x3d z;\n}\nelse if (u_hillshadeType \x3d\x3d 1){\nfor (int k \x3d 0; k \x3c 6; k++) {\nfloat cosDelta \x3d u_sinZsinAs[k] * dzy - u_sinZcosAs[k] * dzx;\nfloat z \x3d (u_cosZs[k] + cosDelta) / s2;\nif (z \x3c 0.0) z \x3d 0.0;\nhillshade \x3d hillshade + z * u_weights[k];\nif (k \x3d\x3d u_lightSourceCount-1) break;\n}\n}\nif (u_applyColorramp) {\nvec4 result \x3d overlay(ve.r, u_minValue, u_maxValue, hillshade, alpha);\nif (u_scaled) {\nresult \x3d vec4(result.rgb * 255.0, result.a);\n}\ngl_FragColor \x3d result;\n} else {\nif (u_scaled) {\nhillshade \x3d hillshade * 255.0;\nif (hillshade\x3e 255.0) {\nhillshade \x3d 255.0;\n}\n}\ngl_FragColor \x3d vec4(hillshade, hillshade, hillshade, alpha);\n}\n}",
identity:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandCount;\nfloat shift_right(float v, float amt) {\nv \x3d floor(v) + 0.5;\nreturn floor(v / exp2(amt));\n}\nfloat shift_left(float v, float amt) {\nreturn floor(v * exp2(amt) + 0.5);\n}\nfloat mask_last(float v, float bits) {\nreturn mod(v, shift_left(1.0, bits));\n}\nfloat extract_bits(float num, float from, float to) {\nfrom \x3d floor(from + 0.5);\nto \x3d floor(to + 0.5);\nreturn mask_last(shift_right(num, from), to - from);\n}\nvec4 encode_float(float val) {\nif (val \x3d\x3d 0.0)\nreturn vec4(0, 0, 0, 0);\nfloat sign \x3d val \x3e 0.0 ? 0.0 : 1.0;\nval \x3d abs(val);\nfloat exponent \x3d floor(log2(val));\nfloat biased_exponent \x3d exponent + 127.0;\nfloat fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0;\nfloat t \x3d biased_exponent / 2.0;\nfloat last_bit_of_biased_exponent \x3d fract(t) * 2.0;\nfloat remaining_bits_of_biased_exponent \x3d floor(t);\nfloat byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0;\nfloat byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0;\nfloat byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\nfloat byte1 \x3d (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\nreturn vec4(byte4, byte3, byte2, byte1);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 currentPixel \x3d  texture2D(u_image, v_texCoord);\ngl_FragColor \x3d vec4( currentPixel.rgb, currentPixel.a); //encode_float(currentPixel.r);\n}",
local:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform int u_rasterCount;\nvec4 polyfill;\nvec4 localOp1() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 result;\nvec4 replaceme1;\nreturn result;\n}\nvec4 localOp2() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 b \x3d texture2D(u_image1, v_texCoord);\nvec4 result;\nvec4 replaceme2;\nreturn result;\n}\nvec4 localOp3() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 b \x3d texture2D(u_image1, v_texCoord);\nvec4 c \x3d texture2D(u_image2, v_texCoord);\nvec4 result;\nvec4 replaceme3;\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d localOp1();\n}",
local0:"precision mediump float;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput[3];\nuniform float u_maxOutput[3];\nuniform float u_factor[3];\nuniform int u_operation;\nuniform int u_constant[3];\nuniform vec4 gamma;\nfloat localOperate1(float a, float b, float c){\nfloat result;\nif (u_operation \x3d\x3d 1){\nresult \x3d a + b;\n}\nelse if (u_operation \x3d\x3d 2){\nresult \x3d a - b;\n}\nelse if (u_operation \x3d\x3d3){\nresult \x3d a * b;\n}\nelse if (u_operation \x3d\x3d4){\nresult \x3d sqrt(a);\n}\nelse if (u_operation \x3d\x3d5){\nresult \x3d pow(a, b);\n}\nelse if (u_operation \x3d\x3d6){\nresult \x3d acos(a);\n}\nelse if (u_operation \x3d\x3d7){\nresult \x3d asin(a);\n}\nelse if (u_operation \x3d\x3d8){\nresult \x3d atan(a);\n}\nelse if (u_operation \x3d\x3d9){\nresult \x3d 999.0; //atanh not available\n}\nelse if (u_operation \x3d\x3d10){\nresult \x3d abs(a);\n}\nelse if (u_operation \x3d\x3d13){\nresult \x3d 999.0; //bitwise not available\n}\nelse if (u_operation \x3d\x3d17){\nresult \x3d a !\x3d 0.0 \x26\x26 b !\x3d0.0;\n}\nelse if (u_operation \x3d\x3d18){\nresult \x3d a \x3d\x3d0.0? 1.0:0.0;\n}\nelse if (u_operation \x3d\x3d19){\nresult \x3d a !\x3d 0.0 || b !\x3d0.0;\n}\nelse if (u_operation \x3d\x3d20){\nresult \x3d a !\x3d 0.0 ^^ b !\x3d0.0; //exclusive or\n}\nelse if (u_operation \x3d\x3d21){\nresult \x3d cos(a);\n}\nelse if (u_operation \x3d\x3d23){\nresult \x3d a / b;\n}\nelse if (u_operation \x3d\x3d24){\nresult \x3d a \x3d\x3d b ? 1.0:0.0;\n}\nelse if (u_operation \x3d\x3d25){\nresult \x3d exp(a);\n}\nelse if (u_operation \x3d\x3d26){\nresult \x3d pow(10.0, a);\n}\nelse if (u_operation \x3d\x3d27){\nresult \x3d exp2(a);\n}\nelse if (u_operation \x3d\x3d28){\nresult \x3d a \x3e b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d29){\nresult \x3d  a \x3e\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d30){\nresult \x3d floor(a); //int\n}\nelse if (u_operation \x3d\x3d31){\nresult \x3d a \x3d\x3d0? 1.0:0.0; //null pass mask\n}\nelse if (u_operation \x3d\x3d32){\nresult \x3d a; //float\n}\nelse if (u_operation \x3d\x3d33){\nresult \x3d a \x3c b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d34){\nresult \x3d a \x3c\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d35){\nresult \x3d log(a);\n}\nelse if (u_operation \x3d\x3d36){\nresult \x3d log2(a) / log2(10.0);\n}\nelse if (u_operation \x3d\x3d37){\nresult \x3d log2(a);\n}\nelse if (u_operation \x3d\x3d44){\nresult \x3d mod(a, b);\n}\nelse if (u_operation \x3d\x3d45){\nresult \x3d -a;\n}\nelse if (u_operation \x3d\x3d46){\nresult \x3d a !\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d48){\nresult \x3d ceil(a);\n}\nelse if (u_operation \x3d\x3d49){\nresult \x3d floor(a);\n}\nelse if (u_operation \x3d\x3d51){\nresult \x3d sin(a);\n}\nelse if (u_operation \x3d\x3d53){\nresult \x3d a * a;\n}\nelse if (u_operation \x3d\x3d56){\nresult \x3d tan(a);\n}\nelse if (u_operation \x3d\x3d57){\nresult \x3d 999.0; //tanh not available\n}\nelse if (u_operation \x3d\x3d59){\nresult \x3d 999.0; //acosh not available\n}\nelse if (u_operation \x3d\x3d60){\nresult \x3d 999.0; //asinh not available\n}\nelse if (u_operation \x3d\x3d61){\nresult \x3d atan(a, b);\n}\nelse if (u_operation \x3d\x3d64){\nresult \x3d a / b;\n}\nelse if (u_operation \x3d\x3d65){\nresult \x3d floor(a/b);\n}\nelse if (u_operation \x3d\x3d76){\nresult \x3d a !\x3d0? b:c;\n}\n}\nvoid main() {\nvec4 currentPixel0 \x3d  texture2D(u_image0, v_texCoord);\nfloat graya, reda, greena, bluea;\nif (u_bandCount \x3d\x3d 1) {\ngraya \x3d stretchOneaue(float(currentPixel.r), u_minCutOff[0], u_maxCutOff[0], u_minOutput[0], u_maxOutput[0], u_factor[0]);\ngl_FragColor \x3d vec4(graya, graya, graya, currentPixel.a);\n}\nelse if (u_bandCount \x3d\x3d 3) {\nreda \x3d stretchOneaue(float(currentPixel.r), u_minCutOff[0], u_maxCutOff[0], u_minOutput[0], u_maxOutput[0], u_factor[0]);\ngreena \x3d stretchOneaue(float(currentPixel.g), u_minCutOff[1], u_maxCutOff[1], u_minOutput[1], u_maxOutput[1], u_factor[1]);\nbluea \x3d stretchOneaue(float(currentPixel.b), u_minCutOff[2], u_maxCutOff[2], u_minOutput[2], u_maxOutput[2], u_factor[2]);\ngl_FragColor \x3d vec4(reda, greena, bluea, currentPixel.a);\n}\n}",
mask:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform float u_includedRanges[6];\nuniform bool u_includedRanges_specified;\nuniform float u_noDataValues[6];\nuniform bool u_noDataValues_specified;\nuniform int u_noDataInterpretation;\nuniform int u_bandCount;\nvec4 mask() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nvec4 processedPixel \x3d currentPixel;\nif (u_includedRanges_specified) {\nif (u_bandCount \x3d\x3d 1) {\nif (currentPixel.r \x3e u_includedRanges[0] \x26\x26 currentPixel.r \x3c u_includedRanges[1])\nprocessedPixel \x3d vec4(currentPixel.rgb, currentPixel.a);\nelse\nprocessedPixel \x3d vec4(currentPixel.rgb, 0);\n} else if (u_bandCount \x3d\x3d 3) {\nif (currentPixel.r \x3e u_includedRanges[0] \x26\x26 currentPixel.r \x3c u_includedRanges[1] \x26\x26 currentPixel.g \x3e u_includedRanges[2] \x26\x26 currentPixel.g \x3c u_includedRanges[3] \x26\x26 currentPixel.b \x3e u_includedRanges[4] \x26\x26 currentPixel.b \x3c u_includedRanges[5])\nprocessedPixel \x3d vec4(currentPixel.rgb, currentPixel.a);\nelse\nprocessedPixel \x3d vec4(currentPixel.rgb, 0);\n}\n}\nif (u_noDataValues_specified) {\nif (u_bandCount \x3d\x3d 1) {\nif (processedPixel.r \x3d\x3d u_noDataValues[0])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse\nprocessedPixel \x3d vec4(processedPixel.rgb, processedPixel.a);\n} else if (u_bandCount \x3d\x3d 3) {\nif (u_noDataInterpretation \x3d\x3d1 \x26\x26 processedPixel.r \x3d\x3d u_noDataValues[0] \x26\x26 processedPixel.g \x3d\x3d u_noDataValues[1] \x26\x26 processedPixel.b \x3d\x3d u_noDataValues[2])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse if (processedPixel.r \x3d\x3d u_noDataValues[0] || processedPixel.g \x3d\x3d u_noDataValues[1] || processedPixel.b \x3d\x3d u_noDataValues[2])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse\nprocessedPixel \x3d vec4(processedPixel.rgb, processedPixel.a);\n}\n}\nreturn processedPixel;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d mask();\n}",
ndvi:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandId_red;\nuniform int u_bandId_nir;\nuniform bool u_scaled;\nuniform int u_bandCount;\nvec4 calculateNDVI(){\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat ndvi_denom \x3d nir + red;\nfloat ndvi;\nif (ndvi_denom \x3d\x3d 0.0) {\nndvi \x3d 0.0;\n}\nelse {\nndvi \x3d (nir - red) / ndvi_denom;\nif (u_scaled) {\nndvi \x3d float(floor(ndvi * 100.0 + 100.5));\n}\n}\nreturn vec4(ndvi, ndvi, ndvi, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d calculateNDVI();\n}",
remap:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nuniform float u_breaks[16];\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nreturn vp;\n}\nfloat getRemapIndex(float pixelValue) {\nif (pixelValue \x3c u_breaks[0] || pixelValue \x3e u_breaks[15]) {\nreturn -1.0;\n}\nfor (int i \x3d 0; i \x3c 16; i++) {\nif (pixelValue \x3c u_breaks[i]) {\nreturn float(i - 1);\n}\n}\nif (pixelValue \x3d\x3d u_breaks[15]) {\nreturn 15.0;\n}\nreturn 0.0;\n}\nvec4 colorize(float pv) {\nfloat clrIndex \x3d pv - u_indexedColormapOffset;\nvec4 result;\nif (clrIndex \x3e u_indexedColormapMaxIndex) {\nresult \x3d vec4(0.0, 0.0, 0.0, 0.0);\n}\nelse {\nvec2 clrPosition \x3d vec2(clrIndex / u_indexedColormapMaxIndex, 0.0);\nvec4 color \x3d texture2D(u_image1, clrPosition);\nresult \x3d vec4(color.r, color.g, color.b, color.a);\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nif (currentPixel.a \x3d\x3d 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nfloat remappedIndex \x3d getRemapIndex(currentPixel.r);\nif (remappedIndex \x3c 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\ngl_FragColor \x3d colorize(remappedIndex);\n}",
resample:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resamplingRatio;\nuniform int u_resamplingType;\nuniform vec2 u_anchor;\nuniform vec2 u_resolution;\nvec4 resample(){\nvec2 pos_nn, pos_ul, pos_ur, pos_ll, pos_lr, pos_offset;\nfloat weight,weight_total, weight_ul, weight_ur, weight_ll, weight_lr;\nvec4 vp;  //v_texCoord is canvas space 0-1\nvec2 originalResolution \x3d vec2(u_resolution.s*u_resamplingRatio.s, u_resolution.t*u_resamplingRatio.t);\nvec2 pos \x3d vec2(u_anchor.s+(v_texCoord.s-u_anchor.s),(u_anchor.t+(v_texCoord.t-u_anchor.t)));\nif (u_resamplingType \x3d\x3d 0)\n{//shift and scaling, y \x3d ax+b so x \x3d (y-b)/a\npos_nn \x3d vec2(floor(pos.s/originalResolution.s+0.5)*originalResolution.s,floor(pos.t/originalResolution.t+0.5)*originalResolution.t);\nif (pos_nn.s \x3c0.0 || pos_nn.s \x3e 1.0 || pos_nn.t \x3c0.0 || pos_nn.t \x3e 1.0){\nvp \x3d vec4(1.0, 0.0, 0.0, 1.0);//vec4(0.0, 1.0, 0.0, vp.a);\n}\nelse {\nvp \x3d texture2D(u_image, vec2(pos_nn.s, pos_nn.t));\n}\n}\nelse if (u_resamplingType \x3d\x3d 1)\n{//shift and scaling, 4 neighbors y \x3d ax+b so x \x3d (y-b)/a\npos_ul \x3d vec2(floor(pos.s/originalResolution.s)*originalResolution.s,floor(pos.t/originalResolution.t)*originalResolution.t);\npos_ur \x3d vec2(pos_ul.s+originalResolution.s, pos_ul.t);\npos_ll \x3d vec2(pos_ul.s, pos_ul.t+originalResolution.t);\npos_lr \x3d vec2(pos_ul.s+originalResolution.s, pos_ul.t+originalResolution.t);\npos_offset \x3d vec2(pos.s - floor(pos_ul.s),pos.t - floor(pos_ul.t));\nweight_lr \x3d sqrt(pow(pos_offset.s,2.0) + pow(pos_offset.t,2.0));\nweight_ul \x3d sqrt(pow( originalResolution.s- pos_offset.s,2.0)+ pow(originalResolution.t- pos_offset.t,2.0));\nweight_ur \x3d sqrt(pow( pos_offset.s,2.0)+ 1.0- pow(originalResolution.t - pos_offset.t,2.0));\nweight_ll \x3d sqrt(pow( originalResolution.s- pos_offset.s,2.0)+ pow(pos_offset.t,2.0));\nvp \x3d (texture2D(u_image, pos_ul) * weight_ul + texture2D(u_image, pos_ur) * weight_ur + texture2D(u_image, pos_ll) * weight_ll + texture2D(u_image, pos_lr) * weight_lr)/(weight_ul+weight_ur+weight_ll+weight_lr);\n}\nelse if (u_resamplingType \x3d\x3d 2)\n{//shift and scaling, 16 neighbors\nweight_total \x3d 0.0;\nvp \x3d vec4(0.0,0.0,0.0,0.0);\npos_ul \x3d vec2(floor(pos.s/originalResolution.s)*originalResolution.s-originalResolution.s,floor(pos.t/originalResolution.t)*originalResolution.t-originalResolution.t);\npos_offset \x3d vec2(pos.s - floor(pos_ul.s),pos.t - floor(pos_ul.t));\nfor (int i\x3d0; i\x3c4; i++){//row\nfor (int j\x3d0; j\x3c4; j++){//col\nweight \x3d sqrt(pow(pos_offset.s-float(j),2.0)+ pow(pos_offset.t-float(i),2.0));\nvp +\x3dtexture2D(u_image, vec2(pos_ul.s+float(i)*originalResolution.s,pos_ul.t+float(j)*originalResolution.t)) * weight;\nweight_total +\x3d weight;\n}\n}\nvp \x3d vp/weight_total;\n}\nreturn vp;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d resample();\n}",
slope:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_cellSize;\nuniform float u_zfactor;\nuniform float u_altitude;\nuniform float u_azimuth;\nfloat shift_right(float v, float amt) {\nv \x3d floor(v) + 0.5;\nreturn floor(v / exp2(amt));\n}\nfloat shift_left(float v, float amt) {\nreturn floor(v * exp2(amt) + 0.5);\n}\nfloat mask_last(float v, float bits) {\nreturn mod(v, shift_left(1.0, bits));\n}\nfloat extract_bits(float num, float from, float to) {\nfrom \x3d floor(from + 0.5);\nto \x3d floor(to + 0.5);\nreturn mask_last(shift_right(num, from), to - from);\n}\nvec4 encode_float(float val) {\nif (val \x3d\x3d 0.0)\nreturn vec4(0, 0, 0, 0);\nfloat sign \x3d val \x3e 0.0 ? 0.0 : 1.0;\nval \x3d abs(val);\nfloat exponent \x3d floor(log2(val));\nfloat biased_exponent \x3d exponent + 127.0;\nfloat fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0;\nfloat t \x3d biased_exponent / 2.0;\nfloat last_bit_of_biased_exponent \x3d fract(t) * 2.0;\nfloat remaining_bits_of_biased_exponent \x3d floor(t);\nfloat byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0;\nfloat byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0;\nfloat byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\nfloat byte1 \x3d (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\nreturn vec4(byte4, byte3, byte2, byte1);\n}\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nvec4 calculateSlope() {\nfloat pi \x3d 3.141592653589793238;\nfloat dzx \x3d 0.0;\nfloat dzy \x3d 0.0;\nvec4 va,  vb,  vc,  vd,  ve,  vf,  vg,  vh,  vi;\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nif (v_texCoord.s \x3e\x3d u_resolution.s \x26\x26 (1.0 - u_resolution.s) \x3e\x3d v_texCoord.s \x26\x26 v_texCoord.t \x3e\x3d u_resolution.t \x26\x26 (1.0 - u_resolution.t) \x3e\x3d v_texCoord.t) {\nva \x3d texture2D(u_image, v_texCoord + u_resolution * axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution * bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution * cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution * dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution * vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution * fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution * gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution * hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution * ixy);\n}\ndzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r / (8.0 * u_cellSize[0]);\ndzy \x3d -(vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r / (8.0 * u_cellSize[1]);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat slope \x3d atan(u_zfactor * sqrt(dzx * dzx + dzy * dzy)) * 57.2957795;\nreturn vec4(slope, slope, slope, alpha);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d calculateSlope();\n}",
stretch:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput[3];\nuniform float u_maxOutput[3];\nuniform float u_factor[3];\nuniform int u_bandCount;\nuniform vec2 u_sourceDim;\nuniform vec2 u_targetDim;\nuniform int u_state;\nuniform bool u_minMaxTexture;\nuniform bool u_useGamma;\nuniform float u_gamma[4];\nuniform float u_gammaCorrection[4];\nuniform bool u_scaled;\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nif (u_bandCount \x3d\x3d 1) {\nfloat alpha \x3d vp_ul.a * vp_ur.a * vp_ll.a * vp_lr.a;\nvec4 vp_nn \x3d texture2D(u_image, coords);\nreturn alpha \x3d\x3d 0.0 ? vp_nn : vec4(vp.rgb, alpha);\n}\nreturn vp;\n}\nvec4 findMin(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(min(p1.r, p2.r),min(p1.g, p2.g),min(p1.b, p2.b),p1.a);\n}\n}\nvec4 findMax(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(max(p1.r, p2.r),max(p1.g, p2.g),max(p1.b, p2.b),p1.a);\n}\n}\nvec4 findMinMax(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(min(p1.r, p2.r), max(p1.g, p2.g), 0.0, p1.a);\n}\n}\nvec4 minMax(int state) {\nvec2 pixelFract \x3d fract(v_texCoord * u_sourceDim);\nfloat xshift \x3d ((pixelFract.s \x3e\x3d 0.5 || pixelFract.s \x3d\x3d 0.0) ? -1.0 : 1.0) / u_sourceDim.s; //take left pixel if \x3e 0.5\nfloat yshift \x3d ((pixelFract.s \x3e\x3d 0.5 || pixelFract.s \x3d\x3d 0.0) ? -1.0 : 1.0) / u_sourceDim.t; //take bottom pixel if \x3e 0.5\nif (u_sourceDim.s \x3d\x3d 1.0) {\nxshift \x3d 0.0;\n}\nif (u_sourceDim.t \x3d\x3d 1.0) {\nyshift \x3d 0.0;\n}\nvec4 p1 \x3d texture2D(u_image, v_texCoord);\nvec4 p2 \x3d texture2D(u_image, v_texCoord + vec2(xshift, 0.0));\nvec4 p3 \x3d texture2D(u_image, v_texCoord + vec2(0.0, yshift));\nvec4 p4 \x3d texture2D(u_image, v_texCoord + vec2(xshift, yshift));\nvec4 pval;\nif (state \x3d\x3d 2) {\npval \x3d findMinMax(findMinMax(p1, p2), findMinMax(p3, p4));\n} else if (state \x3d\x3d 1) {\npval \x3d findMax(findMax(p1, p2), findMax(p3, p4));\n} else if (state \x3d\x3d 0) {\npval \x3d findMin(findMin(p1, p2), findMin(p3, p4));\n}\nreturn pval;\n}\nfloat stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, bool scaled) {\nfloat stretchedVal;\nif (val \x3e minCutOff \x26\x26 val \x3c maxCutOff) {\nstretchedVal \x3d minOutput + (val - minCutOff) * factor;\n} else if (val \x3e\x3d maxCutOff) {\nstretchedVal \x3d maxOutput;\n} else {\nstretchedVal \x3d minOutput;\n}\nif (scaled) {\nreturn stretchedVal;\n}\nelse {\nreturn stretchedVal / maxOutput; //0-1\n}\n}\nfloat stretchOneValueGamma(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, float gamma, float gammaCorrection, bool scaled) {\nfloat stretchedVal;\nfloat tempf \x3d 1.0;\nfloat outRange \x3d maxOutput - minOutput;\nfloat relativeVal \x3d (val - minCutOff) / (maxCutOff - minCutOff);\nif (val \x3e minCutOff \x26\x26 val \x3c maxCutOff) {\nif (gamma \x3e 1.0) {\ntempf -\x3d pow(1.0 / outRange, relativeVal * gammaCorrection);\n}\nstretchedVal \x3d floor(tempf * outRange * pow(relativeVal, 1.0 / gamma)) + minOutput;\n}\nelse if (val \x3e\x3d maxCutOff) {\nstretchedVal \x3d maxOutput;\n} else {\nstretchedVal \x3d minOutput;\n}\nif (scaled) {\nreturn stretchedVal;\n}\nelse {\nreturn stretchedVal / maxOutput; //0-1\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nif (u_state \x3d\x3d 100) {\nvec4 currentPixel \x3d getPixelValue(v_texCoord);\nfloat grayVal,\nredVal,\ngreenVal,\nblueVal;\nfloat min0,\nmax0,\nmin1,\nmax1,\nmin2,\nmax2,\nfactor0,\nfactor1,\nfactor2;\nvec4 minV, maxV;\nif (u_minMaxTexture) {\nif (u_bandCount \x3d\x3d 1) {\nminV \x3d texture2D(u_image1, v_texCoord);\nmin0 \x3d minV.r;\nmax0 \x3d minV.g;\nfactor0 \x3d (u_maxOutput[0] - u_minOutput[0]) / (max0 - min0);\n} else {\nminV \x3d texture2D(u_image1, v_texCoord);\nmaxV \x3d texture2D(u_image2, v_texCoord);\nmin0 \x3d minV.r;\nmax0 \x3d maxV.r;\nmin1 \x3d minV.g;\nmax1 \x3d maxV.g;\nmin2 \x3d minV.b;\nmax2 \x3d maxV.b;\nfactor0 \x3d (u_maxOutput[0] - u_minOutput[0]) / (max0 - min0);\nfactor1 \x3d (u_maxOutput[1] - u_minOutput[1]) / (max1 - min1);\nfactor2 \x3d (u_maxOutput[2] - u_minOutput[2]) / (max2 - min2);\n}\n} else {\nmin0 \x3d u_minCutOff[0];\nmax0 \x3d u_maxCutOff[0];\nmin1 \x3d u_minCutOff[1];\nmax1 \x3d u_maxCutOff[1];\nmin2 \x3d u_minCutOff[2];\nmax2 \x3d u_maxCutOff[2];\nfactor0 \x3d u_factor[0];\nfactor1 \x3d u_factor[1];\nfactor2 \x3d u_factor[2];\n}\nif (u_useGamma){\nif (u_bandCount \x3d\x3d 1) {\ngrayVal \x3d stretchOneValueGamma(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_gamma[0], u_gammaCorrection[0], u_scaled);\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, currentPixel.a);\n} else {\nredVal \x3d stretchOneValueGamma(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_gamma[0], u_gammaCorrection[0], u_scaled);\ngreenVal \x3d stretchOneValueGamma(float(currentPixel.g), min1, max1, u_minOutput[1], u_maxOutput[1], factor1, u_gamma[1], u_gammaCorrection[1], u_scaled);\nblueVal \x3d stretchOneValueGamma(float(currentPixel.b), min2, max2, u_minOutput[2], u_maxOutput[2], factor2, u_gamma[1], u_gammaCorrection[2], u_scaled);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, currentPixel.a);\n}\n}\nelse {\nif (u_bandCount \x3d\x3d 1) {\ngrayVal \x3d stretchOneValue(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_scaled);\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, currentPixel.a);\n} else {\nredVal \x3d stretchOneValue(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_scaled);\ngreenVal \x3d stretchOneValue(float(currentPixel.g), min1, max1, u_minOutput[1], u_maxOutput[1], factor1, u_scaled);\nblueVal \x3d stretchOneValue(float(currentPixel.b), min2, max2, u_minOutput[2], u_maxOutput[2], factor2, u_scaled);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, currentPixel.a);\n}\n}\n} else {\nvec4 currentPixel \x3d minMax(u_state);\ngl_FragColor \x3d currentPixel;\n}\n}"}})},
"esri/layers/rasterLib/function/RasterFunctionWebGLMixin":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ./pixelShaders ./vertexShaders ./webglHelper ./convolutionKernel".split(" "),function(F,l,b,q,n,p,m){return F(null,{gl:null,rgbaFloatData:null,originalTexture:null,lastTexture:null,renderTexture:!1,constructor:function(a){this._isProgramInitialized=!1;this.gl=a&&a.gl;a&&a.renderTexture&&(this.renderTexture=a.renderTexture);this._xformSetting=a&&a._xformSetting||{requireProjection:!1,
meshSize:[20,20]}},bindFrameBuffer:function(){var a=this.gl;this._setupPingPongTextures();this._setupBranchingTextures();var e=this._glSetting;this.isBranch?(e.branchIndex=(e.branchIndex+1)%e.branchCount,e=e.branches[e.branchIndex]):(e.pingpongIndex=(e.pingpongIndex+1)%e.pingpong.length,e=e.pingpong[e.pingpongIndex]);a.bindFramebuffer(a.FRAMEBUFFER,e.frameBuffer);a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);return e},_initializeProgram:function(a){if(this.gl)try{var e=this.gl;e.viewport(0,
0,e.drawingBufferWidth,e.drawingBufferHeight);var k=this._glSetting.programUniforms,h="local"===this.functionName?"local"+this.functionArguments.operation:this.functionName,f=k[h];if(f)this._uniforms=f.uniforms,this.rasterProgram=f.program;else{var c=(this._useMesh=this._tileMode&&this._xformSetting.requireProjection)?n.mesh:n.basic,d=n.getShader(e,a.vertex||c),g=q.getShader(e,a.fragment),t=this._loadProgram(d,g),r={rasterProgram:p.getUniforms(e,t)};k[h]={uniforms:r,program:t};this.rasterProgram=
t;this._uniforms=r}e.useProgram(this.rasterProgram);var w=e.getAttribLocation(this.rasterProgram,"a_texCoord"),v=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,v);var z=p.createMesh(this._xformSetting.meshSize);e.bufferData(e.ARRAY_BUFFER,z,e.STATIC_DRAW);e.enableVertexAttribArray(w);e.vertexAttribPointer(w,2,e.FLOAT,!1,0,0);e.disable(e.DEPTH_TEST);e.blendFunc(e.SRC_ALPHA,e.ZERO);e.disable(e.BLEND);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);this._shaderInfo=
{fragment:a.fragmentName}}catch(C){}},_setUniform:function(a,e,k){null!=e&&(k&&!this._uniforms[k]&&(this._uniforms[k]=p.getUniforms(this.gl,this[k])),k=k?this._uniforms[k]:this._uniforms.rasterProgram,(a=k[a]||k[a+"[0]"])&&p.setUniform(this.gl,a,e))},_setUniforms:function(a,e){var k=Object.keys(a),h,f=k.length;for(h=0;h<f;h++)this._setUniform(k[h],a[k[h]],e);this.rawInput?this._setUniform("u_flipY",!0,e):this._setUniform("u_flipY",!1,e);this._tileMode?(this.rawInput?(k=this._xformSetting.offset,h=
this._xformSetting.scale):(k=[0,0],h=[1,1]),this._setUniform("u_xformOffset",k,e),this._setUniform("u_xformScale",h,e),this._xformSetting.requireProjection&&(this.rawInput?(this._setupXformTexture(),this._setUniform("u_projection",!0,e),this._setUniform("u_transformGridSize",this._xformSetting.gridConfig.size,e),this._setUniform("u_transformSpacing",this._xformSetting.gridConfig.spacing,e),this._setUniform("u_targetImageSize",new Float32Array([this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]),
e)):this._setUniform("u_projection",!1,e))):(k=[0,0],h=[1,1],this._setUniform("u_xformOffset",k,e),this._setUniform("u_xformScale",h,e));this.rawInput&&this._rawResolution&&("RSP_BilinearInterpolation"===this.interpolation||"RSP_CubicConvolution"===this.interpolation)?(this._setUniform("u_resampling",1),this._setUniform("u_rawResolution",this._rawResolution)):this._setUniform("u_resampling",0)},_setupTextureData:function(a,e){if(a.texture)return a;a.raster&&a.raster.pixelBlock&&(a=a.raster);this.rawInput=
!0;var k=e&&e.notOriginal,h=e&&e.bandIDs;if(e&&e.reCreate)var f=!1;else(f=this._tileMode?!this._xformSetting.hasNewTexture:!this._glSetting.hasNewTexture)&&this._originalBandIDs&&(f=h?this._originalBandIDs.join("")===h.join(""):!1);0<this._glSetting.branchCount&&(f=!1);if(f&&this.originalTexture)return{extent:a.extent,texture:this.originalTexture};f=this._createTexture();k||(this.originalTexture=f,this._originalBandIDs=h);k=this.gl;var c=a.pixelBlock;this._rawResolution=c?[1/a.pixelBlock.width,1/
a.pixelBlock.height]:[1/this.gl.drawingBufferWidth,1/this.gl.drawingBufferHeight];var d=0;h&&0<h.length&&c&&(d=Math.max.apply(null,h),c.pixels.length>d&&h&&(c.pixels=h.map(function(t){return c.pixels[t]}),c.statistics&&(c.statistics=h.map(function(t){return c.statistics[t]}))));h=c.width;d=c.height;k.getExtension("OES_texture_float");var g=c.getAsRGBAFloat();k.texImage2D(k.TEXTURE_2D,0,k.RGBA,h,d,0,k.RGBA,k.FLOAT,g);return{extent:a.extent,texture:f}},_setupPingPongTextures:function(){var a=this._glSetting;
if(!a||!a.pingpong){a.pingpong=[];var e=p.createBufferTexture(this.gl,!1);a.pingpong.push(e);e=p.createBufferTexture(this.gl,!1);a.pingpong.push(e);a.pingpongIndex=1}},_setupBranchingTextures:function(){var a=this._glSetting;if(!a||!a.branches){a.branches=[];var e=0,k=a.branchCount;if(0<k){for(e=0;e<k;e++){var h=p.createBufferTexture(this.gl,!1);a.branches.push(h)}a.branchIndex=k-1}}},_setupXformTexture:function(a){for(var e=this._createTexture(),k=this.gl,h=4*this._xformSetting.gridConfig.size[0],
f=this._xformSetting.gridConfig.size[1],c=new Float32Array(h*f*4),d=0,g=0;g<this._xformSetting.gridConfig.coefficients.length;g++)c[d++]=this._xformSetting.gridConfig.coefficients[g],2===g%3&&(c[d++]=1);k.getExtension("OES_texture_float");k.texImage2D(k.TEXTURE_2D,0,k.RGBA,h,f,0,k.RGBA,k.FLOAT,c);this._bindTexture(e,"u_transformGrid",a)},_createTexture:function(a){return p.createTexture(this.gl,a)},_bindTexture:function(a,e,k){e=e||"u_image";k=this._uniforms[k||"rasterProgram"];var h=this._getTextureIndex(e);
if(-1!==h){var f=this.gl;f.uniform1i(k[e].location,h);f.activeTexture(f.TEXTURE0+h);f.bindTexture(f.TEXTURE_2D,a)}},_getTextureIndex:function(a,e){var k=this._uniforms[e||"rasterProgram"];if(!k||!k[a]||k[a].info.type!==this.gl.SAMPLER_2D)return-1;if("u_transformGrid"===a)return 0;k="u_image"===a?0:parseInt(a.replace("u_image",""));return this._xformSetting.requireProjection?k+1:k},_drawGL:function(a){var e=this.gl;this.renderTexture?(e.enable(e.BLEND),e.bindFramebuffer(e.FRAMEBUFFER,null)):e.disable(e.BLEND);
a||e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight);a=this._xformSetting.meshSize||[1,1];e.drawArrays(e.TRIANGLES,0,a[0]*a[1]*6);this._drawMesh()},_drawMesh:function(){if(this.renderTexture&&this._glSetting.drawMesh){this.meshProgram=this.meshProgram||this._setupMeshProgram();var a=this.gl;a.useProgram(this.meshProgram);a.bindFramebuffer(a.FRAMEBUFFER,null);var e=a.getAttribLocation(this.meshProgram,"a_texCoord"),k=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,k);k=this._xformSetting.meshSize||
[1,1];var h=p.createMesh(k,!0);a.bufferData(a.ARRAY_BUFFER,h,a.STATIC_DRAW);a.enableVertexAttribArray(e);a.vertexAttribPointer(e,2,a.FLOAT,!1,0,0);a.disable(a.DEPTH_TEST);a.blendFunc(a.ONE,a.ZERO);this._setUniforms({u_color:[0,0,1,1],u_drawMeshLines:!0},"meshProgram");a.drawArrays(a.LINES,0,k[0]*k[1]*10)}},_setupMeshProgram:function(){var a=n.getShader(this.gl,n.mesh),e=q.getShader(this.gl,q.constant);return this._loadProgram(a,e)},_loadProgram:function(a,e){return p.loadProgram(this.gl,a,e)},_getShaderScript:function(a,
e){var k=document.getElementById(e);if(!k)return null;var h="";for(k=k.firstChild;k;)3==k.nodeType&&(h+=k.textContent),k=k.nextSibling;return h}})})},"esri/layers/rasterLib/function/webglHelper":function(){define([],function(){var F={getUniforms:function(l,b){var q=l.getProgramParameter(b,l.ACTIVE_UNIFORMS),n,p,m={};for(n=0;n<q;n++)(p=l.getActiveUniform(b,n))&&(m[p.name]={location:l.getUniformLocation(b,p.name),info:p});return m},setUniform:function(l,b,q){var n=b.info;b=b.location;var p=n.type;if(null!=
q)switch(p){case l.FLOAT:1<n.size?0!==q.length&&l.uniform1fv(b,q):l.uniform1f(b,q);break;case l.FLOAT_VEC2:if(0===q.length)break;l.uniform2fv(b,q);break;case l.FLOAT_VEC3:if(0===q.length)break;l.uniform3fv(b,q);break;case l.FLOAT_VEC4:if(0===q.length)break;l.uniform4fv(b,q);break;case l.INT:case l.BOOL:1<n.size?0!==q.length&&l.uniform1iv(b,q):l.uniform1i(b,q);break;case l.INT_VEC2:case l.BOOL_VEC2:if(0===q.length)break;l.uniform2iv(b,q);break;case l.INT_VEC3:case l.BOOL_VEC3:if(0===q.length)break;
l.uniform3iv(b,q);break;case l.INT_VEC4:case l.BOOL_VEC4:0!==q.length&&l.uniform4iv(b,q)}},createTexture:function(l,b){var q=l.createTexture();l.bindTexture(l.TEXTURE_2D,q);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,b?l.LINEAR:l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,b?l.LINEAR:l.NEAREST);return q},createBufferTexture:function(l,b,q){b=F.createTexture(l,
b);l.getExtension("OES_texture_float");q=q||[l.drawingBufferWidth,l.drawingBufferHeight];l.texImage2D(l.TEXTURE_2D,0,l.RGBA,q[0],q[1],0,l.RGBA,l.FLOAT,null);q=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,q);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,b,0);return{texture:b,frameBuffer:q}},getShader:function(l,b,q){q=q?l.createShader(l.VERTEX_SHADER):l.createShader(l.FRAGMENT_SHADER);l.shaderSource(q,b);l.compileShader(q);l.getShaderParameter(q,l.COMPILE_STATUS)||
(q=null);return q},loadProgram:function(l,b,q){var n=l.createProgram();l.attachShader(n,b);l.attachShader(n,q);l.linkProgram(n);l.getProgramParameter(n,l.LINK_STATUS)||(l.deleteProgram(n),n=null);return n},createMesh:function(l,b){if(!l||1===l[0]&&1===l[1])return new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);var q=l&&b?new Float32Array(l[0]*l[1]*20):new Float32Array(l[0]*l[1]*12);var n=.9998/l[1],p=.9998/l[0],m,a,e=0;for(m=0;m<l[1];m++)for(a=0;a<l[0];a++){var k=1E-4+n*m;var h=1E-4+p*a;l&&!b?(q[e++]=
k,q[e++]=h,q[e++]=k+n,q[e++]=h,q[e++]=k,q[e++]=h+p,q[e++]=k,q[e++]=h+p,q[e++]=k+n,q[e++]=h,q[e++]=k+n,q[e++]=h+p):(q[e++]=k,q[e++]=h,q[e++]=k,q[e++]=h+p,q[e++]=k,q[e++]=h+p,q[e++]=k+n,q[e++]=h+p,q[e++]=k+n,q[e++]=h+p,q[e++]=k+n,q[e++]=h,q[e++]=k,q[e++]=h,q[e++]=k+n,q[e++]=h,q[e++]=k,q[e++]=h+p,q[e++]=k+n,q[e++]=h)}return q}};return F})},"esri/layers/rasterLib/function/convolutionKernel":function(){define([],function(){var F={Default:[0,0,0,0,1,0,0,0,0],LineDetectionHorizontal:[-1,-1,-1,2,2,2,-1,-1,
-1],LineDetectionVertical:[-1,2,-1,-1,2,-1,-1,2,-1],LineDetectionLeftDiagonal:[2,-1,-1,-1,2,-1,-1,-1,2],LineDetectionRightDiagonal:[-1,-1,2,-1,2,-1,2,-1,-1],GradientNorth:[-1,-2,-1,0,0,0,1,2,1],GradientWest:[-1,0,1,-2,0,2,-1,0,1],GradientEast:[1,0,-1,2,0,-2,1,0,-1],GradientSouth:[1,2,1,0,0,0,-1,-2,-1],GradientNorthEast:[0,-1,-2,1,0,-1,2,1,0],GradientNorthWest:[-2,-1,0,-1,0,1,0,1,2],SmoothArithmeticMean:[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,
.111111111111,.111111111111],Smoothing3x3:[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],Smoothing5x5:[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,1,1],Sharpening3x3:[-1,-1,-1,-1,9,-1,-1,-1,-1],Sharpening5x5:[-1,-3,-4,-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1],Laplacian3x3:[0,-1,0,-1,4,-1,0,-1,0],Laplacian5x5:[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0],SobelHorizontal:[-1,-2,-1,0,0,0,1,2,1],SobelVertical:[-1,0,1,-2,0,2,-1,0,1],Sharpen:[0,-.25,0,-.25,2,-.25,
0,-.25,0],Sharpen2:[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25],PointSpread:[-.627,.352,-.627,.352,2.923,.352,-.627,.352,-.627],getKernel:function(l){switch(l){case 0:return F.LineDetectionHorizontal;case 1:return F.LineDetectionVertical;case 2:return F.LineDetectionLeftDiagonal;case 3:return F.LineDetectionRightDiagonal;case 4:return F.GradientNorth;case 5:return F.GradientWest;case 6:return F.GradientEast;case 7:return F.GradientSouth;case 8:return F.GradientNorthEast;case 9:return F.GradientNorthWest;
case 10:return F.SmoothArithmeticMean;case 11:return F.Smoothing3x3;case 12:return F.Smoothing5x5;case 13:return F.Sharpening3x3;case 14:return F.Sharpening5x5;case 15:return F.Laplacian3x3;case 16:return F.Laplacian5x5;case 17:return F.SobelHorizontal;case 18:return F.SobelVertical;case 19:return F.Sharpen;case 20:return F.Sharpen2;case 21:return F.PointSpread;default:return F.Default}}};return F})},"esri/layers/rasterLib/raster/rasterFactory":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/sniff dojo/when ../../../kernel ../../../Evented ../../../request ../../../deferredUtils ../../../urlUtils ./ImageServiceRaster ./TileServiceRaster ./TileRaster ./FunctionRaster".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r){F={customDrivers:[],create:function(w){if(w){if(w.url){var v=c.urlToObject(w.url);var z=v.path;var C=v.query}v=w.serviceInfo;var D=w.rasterFxArgs||{},y=new q,u=b.hitch(this,function(E){this._trycustomDrivers(b.mixin({url:z},w),0,y)});if(z)if(-1===z.toLowerCase().indexOf("imageserver")&&-1===z.toLowerCase().indexOf("mapserver")){var B=new t(b.mixin({},w,{url:z}));w.rasterFx&&(B=new r({rasterFx:w.rasterFx,rasterFxArgs:b.mixin({},D,{raster:B})}));var x=B}else{x=
new q;v=v||this._getServiceInfo(z,C);var A=b.hitch(this,function(E){E.bandCount?B=new d(b.mixin({},{serviceInfo:E},C,w,{url:z})):E.tileInfo&&(B=new g(b.mixin({},{serviceInfo:E},C,this._options,{url:z})));w.rasterFx&&(B=new r({rasterFx:w.rasterFx,rasterFxArgs:b.mixin({},D,{raster:B})}));x.resolve(B)});a(v,A,u)}else x=B=new r({rasterFx:w.rasterFx,rasterFxArgs:b.mixin({},D,{raster:B})});a(x,b.hitch(this,function(E){E?E.open().then(b.hitch(this,function(J){y.resolve(E)}),u):u(Error("There is no raster to open"))}),
u);return y.promise}},register:function(w){this.customDrivers=this.customDrivers||[];0<this.customDrivers.filter(function(v){return v.sourceType===w.prototype.sourceType}).length||this.customDrivers.push(w)},_trycustomDrivers:function(w,v,z){z=z||new q;var C=this.customDrivers[v];if(C){var D=new C(w);D.open().then(b.hitch(this,function(y){z.resolve(D)}),b.hitch(this,function(y){this._trycustomDrivers(w,v+1,z)}))}else z.reject("cannot load layer "+(w&&w.url||""));return z.promise},_getServiceInfo:function(w,
v){v=v||{};var z=v.bandIds,C=v.renderingRule,D=new q(f._dfdCanceller),y={f:"json"};z&&(y.bandIds=z);C&&(y.renderingRule=C.toJson?JSON.stringify(C.toJson()):JSON.stringify(C));D._pendingDfd=h({url:w,content:y,handleAs:"json",callbackParamName:"callback"});D._pendingDfd.then(function(u){D.callback(u)},function(u){D.errback(u)});return D.promise}};b.setObject("layers.rasterLib.raster.rasterFactory",F,e);return F})},"esri/layers/rasterLib/raster/ImageServiceRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../WKIDUnitConversion ../../../deferredUtils ../../../urlUtils ../../MosaicRule ../../ImageServiceParameters ../../PixelBlock ./RasterInfo ./BasicRaster ../../rasterFormats/rasterCodec ../tile/RasterTileInfo".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y,u,B,x){F=l([u],{declaredClass:"esri.layers.rasterLib.raster.ImageServiceRaster",sourceType:"ImageService",constructor:function(A){A&&(this._imageServiceParams=A.imageServiceParameters,this._commonReqParams=A._commonReqParams,this._imageServiceParams||(this._imageServiceParams={interpolation:A.interpolation,pixelType:A.pixelType,format:A.format||"lerc",compressionQuality:A.compressionQuality,bandIds:A.bandIds,noDataInterpretation:A.noDataInterpretation,
adjustAspectRatio:A.adjustAspectRatio,mosaicRule:A.mosaicRule,renderingRule:A.interpolation}))},open:function(){var A=new q;if(this.serviceInfo&&this.rasterInfo)return this.loaded=!0,this._findCredential(),this.setFetchParameters(this._imageServiceParams),A.resolve(this),A.promise;var E=this.serviceInfo||this._generateServiceInfo(this._imageServiceParams&&this._imageServiceParams.renderingRule),J=b.hitch(this,function(S){this._fixServiceInfo(S);this.serviceInfo=S;this._findCredential();var X=this._parseRasterInfo(S),
Y={};S.defaultMosaicMethod?(Y.method=S.defaultMosaicMethod,Y.operation=S.mosaicOperator,Y.sortField=S.sortField,Y.sortValue=S.sortValue):Y.method=z.METHOD_NONE;this.serviceInfo.defaultMosaicRule=new z(Y);this.serviceInfo.defaultMosaicRule.ascending=!0;S=this._getColormap(this);Y=this._getHistograms(this);var K=this._getRasterAttributeTable(this),P=this._getKeyProperties(this),Q=this._getMultidimensionalInfo(),ba=this._getSlices();(new e([S,Y,K,P,Q,ba])).then(b.hitch(this,function(ca){ca[0][0]&&(X.colormap=
ca[0][1]);ca[1][0]&&(X.histograms=ca[1][1]);ca[2][0]&&(X.vat=ca[2][1]);ca[3][0]&&(X.keyProperties=ca[3][1]);ca[4][0]&&(X.multidimensionalInfo=ca[4][1]);X.keyProperties=X.keyProperties||{};this._slices=ca[5][0]?ca[5][1]:null;X.keyProperties&&X.keyProperties.DataType&&(this.dataType=X.keyProperties.DataType);X.keyProperties&&X.keyProperties.DefaultVariable&&(this.defaultVariable=X.keyProperties.DefaultVariable);this.loaded=!0;this.rasterInfo=X;this.setFetchParameters(this._imageServiceParams);A.resolve(this)}))}),
O=b.hitch(this,function(S){this.loaded=!0;A.reject(S)});k(E,J,O);return A.promise},setFetchParameters:function(A,E){if(E)this.imageServiceParams=A;else{var J=this.imageServiceParams;J&&A?Object.keys(A).forEach(function(O){J[O]=A[O]}):this.imageServiceParams=A}this._constructGetImageParams();this._getRasterIdentifier(!0)},read:function(A){if(A.pixelBlock||A.texture){var E=new q;E.resolve(A);return E.promise}if(!1===A.virtual&&this.tileInfo&&!this.tileInfo.virtual)return this.readTile(A);if(this._slices){var J=
this._getSliceId();if(null==J)return E=new q,E.resolve(A),E.promise}var O=A.extent,S=O.spatialReference.wkid||m.toJson(O.spatialReference.toJson(!1)),X=A.timeExtent?A.timeExtent.toJson().join(","):null;E=this.url+"/exportImage";var Y={};this._slices&&(Y.sliceid=J);this.disableClientCaching&&(Y._ts=(new Date).getTime());J=b.mixin({},this._commonReqParams,{bbox:O.xmin+","+O.ymin+","+O.xmax+","+O.ymax,imageSR:S,bboxSR:S,size:A.width+","+A.height,time:X},Y);return this._requestPixels({url:E,payload:J,
decodeParams:{width:A.width,height:A.height,planes:null,pixelType:null,format:null,decodeFunc:null,isPoint:!1},tileOptions:A})},readTile:function(A){var E=this.tileBoundary&&this.tileBoundary[A.level];if(E&&(E.minRow>A.row||E.maxRow<A.row||E.minCol>A.col||E.maxCol<A.col)){var J=new q;J.resolve(A);return J.promise}if(this._slices&&(J=this._getSliceId(),null==J))return J=new q,J.resolve(A),J.promise;E=this.url+"/tile/"+A.level+"/"+A.row+"/"+A.col;var O={width:this.tileInfo.cols,height:this.tileInfo.rows,
planes:null,pixelType:null,format:null,decodeFunc:null,useWasm:!0,isPoint:"elevation"===A.tileType.toLowerCase()?!0:!1};J=this._slices?"sliceid\x3d"+J+"\x26":"";J=this.disableClientCaching?"_ts\x3d "+(new Date).getTime():J.replace(/&$/,"");return this._requestPixels({url:E+(0<J.length?"?"+J:""),payload:{},decodeParams:O,tileOptions:A})},toJson:function(){return{url:this.url,tileInfo:this.tileInfo,rasterInfo:this.rasterInfo,serviceInfo:this.serviceInfo,sourceType:this.sourceType,_commonReqParams:this._commonReqParams,
_rasterId:this._rasterId}},_getSliceId:function(){var A=b.clone(this._imageServiceParams.multidimensionalDefinition),E=b.clone(this._imageServiceParams.time);if(null==this._slices||null==E&&(null==A||0===A.length))return 0;var J=A||this.defaultMultidimensionalDefinition,O=J[0].variableName;J=this._getAllDimensionDefinition(J,O).definition;A=null;if(null==J||0===J.length)return null;if(E&&this.serviceInfo.timeInfo){if(null==E[1]||E[1]===E[0])var S=E[0];else{var X=this.serviceInfo.timeInfo.startTimeField;
S=this.rasterInfo.multidimensionalInfo.variables.find(function(P){return P.name===O}).dimensions.find(function(P){return P.name===X}).values.filter(function(P){return Array.isArray(P)?Math.max(P[0],E[0])<Math.min(P[1],E[1]):P>=E[0]&&P<=E[1]}).sort(function(P,Q){P=Array.isArray(P)?P[1]:P;Q=Array.isArray(Q)?P[1]:Q;return Math.abs(E[1]-P)-Math.abs(E[1]-Q)})[0]||[E[1]]}J.some(function(P){if(P.dimensionName===X)return P.values[0]=S,!0;if(!P.dimensionName)return P.dimensionName=X,P.isSlice=!0,P.values=
[S],!0})||J.push({variableName:O,dimensionName:X,isSlice:!0,values:[S]})}for(var Y=0;Y<this._slices.length;Y++){var K=this._slices[Y].multidimensionalDefinition;if(K.length===J.length&&!K.some(function(P){var Q=J.filter(function(ca){return P.variableName===ca.variableName&&ca.dimensionName===P.dimensionName})[0];if(!Q)return!0;var ba=Array.isArray(P.values[0])?P.values[0][0]:P.values[0];Q=Array.isArray(Q.values[0])?Q.values[0][0]:Q.values[0];return ba!==Q})){A=Y;break}}return A},_getAllDimensionDefinition:function(A,
E){var J=A.map(function(S){return S.dimensionName}),O=!1;this.rasterInfo.multidimensionalInfo.variables.forEach(function(S){S.name!==E||S.dimensions.length===A.length&&J[0]||(S.dimensions.forEach(function(X){0>J.indexOf(X.name)&&(J[0]?A.push({variableName:E,dimensionName:X.name,values:[X.values[0]]}):(A[0].dimensionName=X.name,A[0].values=[X.values[0]],X[0]=X.name))}),O=!0)},this);return{defChanged:O,definition:A}},_generateServiceInfo:function(A){var E=this.url,J=new q(w._dfdCanceller);J._pendingDfd=
c({url:E,content:{f:"json",renderingRule:A?m.toJson(A.toJson()):null},handleAs:"json",callbackParamName:"callback"});J._pendingDfd.then(function(O){J.callback(O)},function(O){J.errback(O)});return J},_fixServiceInfo:function(A){var E=A.spatialReference.wkid;A.tileInfo&&0===A.extent.xmin&&360===A.extent.xmax&&E&&null==r[E]&&(A.tileInfo.applyGCS360Transform=!0)},_parseRasterInfo:function(A){var E=new y;E.bandCount=A.bandCount;E.extent=new d(A.fullExtent);E.spatialReference=A.spatialReference;E.pixelType=
A.pixelType;E.width=Math.floor((A.fullExtent.xmax-A.fullExtent.xmin)/A.pixelSizeX+.5);E.height=Math.floor((A.fullExtent.ymax-A.fullExtent.ymin)/A.pixelSizeY+.5);E.cellSize=new g({x:A.pixelSizeX,y:A.pixelSizeY,spatialReference:A.spatialReference});var J;if(A.minValues&&0<A.minValues.length&&A.maxValues&&A.stdvValues&&A.meanValues){var O=[];for(J=0;J<A.minValues.length;J++)O.push({min:A.minValues[J],max:A.maxValues[J],mean:A.meanValues[J],stddev:A.stdvValues[J]});A.bandCount!==O.length&&(O=null)}this.dataType=
A.serviceDataType?A.serviceDataType.replace("esriImageServiceDataType",""):"Generic";E.statistics=O;A.objectIdField&&A.fields&&(E.catalogInfo={objectIdField:A.objectIdField,fields:A.fields});E.timeInfo=A.timeInfo;if(A.tileInfo){this.tileInfo=new x(A.tileInfo);this.tileInfo.tileType=A.cacheType||"Map";E.tileInfo=this.tileInfo;var S=E.extent,X=this.tileInfo.origin,Y=this.tileInfo.cols,K=this.tileInfo.rows;this.tileBoundary=this.tileInfo.lods.map(function(P){return{minCol:Math.floor((S.xmin-X.x+.1*P.resolution)/
Y/P.resolution),maxCol:Math.floor((S.xmax-X.x-.1*P.resolution)/Y/P.resolution),minRow:Math.floor((X.y-S.ymax+.1*P.resolution)/K/P.resolution),maxRow:Math.floor((X.y-S.ymin-.1*P.resolution)/K/P.resolution)}})}return E},_getColormap:function(A){A=this.url+"/colormap";var E=new q(w._dfdCanceller),J={f:"json"},O=this.serviceInfo.hasColormap||this.rasterInfo&&this.rasterInfo.hasColormap;10<this.serviceInfo.currentVersion&&O?(E._pendingDfd=c({url:A,content:J,handleAs:"json",callbackParamName:"callback"}),
E._pendingDfd.then(function(S){E.callback(S.colormap)},function(S){E.errback(S)})):E.callback(null);return E},_getHistograms:function(A){var E=this.url+"/histograms",J=new q(w._dfdCanceller),O={f:"json"},S=this.serviceInfo.hasHistograms||this.rasterInfo&&this.rasterInfo.hasHistograms;A&&A.renderingRule&&(O.renderingRule=m.toJson(A.renderingRule.toJson()),S=!0);10<this.serviceInfo.currentVersion&&S?(J._pendingDfd=c({url:E,content:O,handleAs:"json",callbackParamName:"callback"}),J._pendingDfd.then(function(X){J.callback(X.histograms)},
function(X){J.errback(X)})):J.callback(null);return J},_getRasterAttributeTable:function(A){var E=this.url+"/rasterAttributeTable",J=new q(w._dfdCanceller),O={f:"json"},S=this.serviceInfo.hasRasterAttributeTable;A&&A.renderingRule&&(O.renderingRule=m.toJson(A.renderingRule.toJson()),S=!0);10<this.serviceInfo.currentVersion&&S?(J._pendingDfd=c({url:E,content:O,handleAs:"json",callbackParamName:"callback"}),J._pendingDfd.then(function(X){J.callback(X)},function(X){J.errback(X)})):J.callback(null);return J},
_getKeyProperties:function(A){var E=this.url+"/keyProperties",J=new q(w._dfdCanceller),O={f:"json"};A&&A.renderingRule&&(O.renderingRule=m.toJson(A.renderingRule.toJson()));10<this.serviceInfo.currentVersion?(J._pendingDfd=c({url:E,content:O,handleAs:"json",callbackParamName:"callback"}),J._pendingDfd.then(function(S){J.callback(S)},function(S){J.errback(S)})):J.callback(null);return J},_getMultidimensionalInfo:function(){var A=this.url+"/multidimensionalInfo",E=new q(w._dfdCanceller);10.3<=this.serviceInfo.currentVersion&&
this.serviceInfo.hasMultidimensions?(E._pendingDfd=c({url:A,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),E._pendingDfd.then(b.hitch(this,function(J){E.callback(J.multidimensionalInfo)}),function(J){E.errback(J)})):E.callback(null);return E},_getSlices:function(){var A=this.url+"/slices",E=new q(w._dfdCanceller);this.serviceInfo.hasMultidimensions?(E._pendingDfd=c({url:A,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),E._pendingDfd.then(b.hitch(this,function(J){E.callback(J.slices)}),
function(J){E.errback(J)})):E.callback(null);return E},_initializationFailed:function(){},_constructGetImageParams:function(){var A=this.imageServiceParams||{},E=b.mixin({},this._query,{f:"image",interpolation:A.interpolation,pixelType:A.pixelType,format:A.format||"lerc",compressionQuality:A.compressionQuality,bandIds:A.bandIds?A.bandIds.join(","):null,noData:null!=A.noData?A.noData.join(","):null,noDataInterpretation:A.noDataInterpretation,adjustAspectRatio:null==A.adjustAspectRatio?null:A.adjustAspectRatio,
mosaicRule:A.mosaicRule?m.toJson(A.mosaicRule.toJson()):null,renderingRule:A.renderingRule?m.toJson(A.renderingRule.toJson()):null,token:this.credential&&this.credential.token||null});"lerc"===E.format.toLowerCase()?(E.compressionTolerance=A.compressionTolerance,10.5<=this.serviceInfo.currentVersion&&(E.lercVersion=A.lercVersion||2)):"tiff"===E.format.toLowerCase()?E.compression=A.compression:-1<["jpg","jpeg","jpg","jpgpng"].indexOf(E.format.toLowerCase())&&(E.compression=A.compression);this._commonReqParams=
E},_getRasterIdentifier:function(A){if(this._rasterId)return this._rasterId;A=this.url.replace("http:","").replace("https:","");var E=[],J=this.imageServiceParams||{};E.push(A);E.push(J.interpolation);E.push(J.pixelType);E.push(J.compressionQuality);E.push(J.bandIds?J.bandIds.join(","):"");E.push(J.mosaicRule?m.toJson(J.mosaicRule.toJson()):"");E.push(J.renderingRule?m.toJson(J.renderingRule.toJson()):"");A=E.join("|");return this._rasterId=this._computeSignature(A)},_wrapExtent:function(A){var E=
A.spatialReference._getInfo();if(E){var J=E.valid[0];E=E.valid[1];if(A.xmin<J-this.resolution.x||A.xmax>E+this.resolution.y){var O=new d((A.xmin-J)%(E-J),A.ymin,(A.xmax-E)%(E-J),A.ymax,A.spatialReference);O.xmax<O.xmin&&(O=null)}}return O||A}});b.setObject("layers.rasterLib.raster.ImageServiceRaster",F,h);return F})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(F,l){var b,q={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,
20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,
2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,
3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,
3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,
3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,
5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,
6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,
6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,
6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,
6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,
7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,
7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,
8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,
8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,
9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,
24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,
31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,
102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,
103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,
103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,
103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(b=2E3;2045>=b;b++)q[b]=0;for(b=2056;2065>=b;b++)q[b]=0;for(b=2067;2135>=b;b++)q[b]=0;for(b=2137;2154>=
b;b++)q[b]=0;for(b=2161;2170>=b;b++)q[b]=0;for(b=2172;2193>=b;b++)q[b]=0;for(b=2195;2198>=b;b++)q[b]=0;for(b=2200;2203>=b;b++)q[b]=0;for(b=2205;2217>=b;b++)q[b]=0;for(b=2222;2224>=b;b++)q[b]=1;for(b=2225;2250>=b;b++)q[b]=2;for(b=2251;2253>=b;b++)q[b]=1;for(b=2257;2264>=b;b++)q[b]=2;for(b=2274;2279>=b;b++)q[b]=2;for(b=2280;2282>=b;b++)q[b]=1;for(b=2283;2289>=b;b++)q[b]=2;for(b=2290;2292>=b;b++)q[b]=0;for(b=2308;2313>=b;b++)q[b]=0;for(b=2315;2491>=b;b++)q[b]=0;for(b=2494;2866>=b;b++)q[b]=0;for(b=2867;2869>=
b;b++)q[b]=1;for(b=2870;2888>=b;b++)q[b]=2;for(b=2891;2895>=b;b++)q[b]=2;for(b=2896;2898>=b;b++)q[b]=1;for(b=2902;2908>=b;b++)q[b]=2;for(b=2915;2920>=b;b++)q[b]=2;for(b=2921;2923>=b;b++)q[b]=1;for(b=2924;2930>=b;b++)q[b]=2;for(b=2931;2962>=b;b++)q[b]=0;for(b=2964;2968>=b;b++)q[b]=2;for(b=2969;2973>=b;b++)q[b]=0;for(b=2975;2991>=b;b++)q[b]=0;for(b=2995;3051>=b;b++)q[b]=0;for(b=3054;3079>=b;b++)q[b]=0;for(b=3081;3088>=b;b++)q[b]=0;for(b=3092;3101>=b;b++)q[b]=0;for(b=3106;3138>=b;b++)q[b]=0;for(b=3146;3151>=
b;b++)q[b]=0;for(b=3153;3166>=b;b++)q[b]=0;for(b=3168;3172>=b;b++)q[b]=0;for(b=3174;3203>=b;b++)q[b]=0;for(b=3294;3358>=b;b++)q[b]=0;for(b=3367;3403>=b;b++)q[b]=0;for(b=3408;3416>=b;b++)q[b]=0;for(b=3417;3438>=b;b++)q[b]=2;for(b=3441;3446>=b;b++)q[b]=2;for(b=3447;3450>=b;b++)q[b]=0;for(b=3451;3459>=b;b++)q[b]=2;for(b=3460;3478>=b;b++)q[b]=0;for(b=3554;3559>=b;b++)q[b]=0;for(b=3560;3570>=b;b++)q[b]=2;for(b=3571;3581>=b;b++)q[b]=0;for(b=3594;3597>=b;b++)q[b]=0;for(b=3601;3604>=b;b++)q[b]=0;for(b=3637;3639>=
b;b++)q[b]=0;for(b=3665;3667>=b;b++)q[b]=0;for(b=3693;3695>=b;b++)q[b]=0;for(b=3701;3727>=b;b++)q[b]=0;for(b=3728;3739>=b;b++)q[b]=2;for(b=3740;3751>=b;b++)q[b]=0;for(b=3753;3760>=b;b++)q[b]=2;for(b=3761;3773>=b;b++)q[b]=0;for(b=3775;3777>=b;b++)q[b]=0;for(b=3779;3781>=b;b++)q[b]=0;for(b=3783;3785>=b;b++)q[b]=0;for(b=3788;3791>=b;b++)q[b]=0;for(b=3797;3802>=b;b++)q[b]=0;for(b=3814;3816>=b;b++)q[b]=0;for(b=3825;3829>=b;b++)q[b]=0;for(b=3832;3841>=b;b++)q[b]=0;for(b=3844;3852>=b;b++)q[b]=0;for(b=3873;3885>=
b;b++)q[b]=0;for(b=3890;3893>=b;b++)q[b]=0;for(b=3907;3912>=b;b++)q[b]=0;for(b=3942;3950>=b;b++)q[b]=0;for(b=3968;3970>=b;b++)q[b]=0;for(b=3973;3976>=b;b++)q[b]=0;for(b=3986;3989>=b;b++)q[b]=0;for(b=3994;3997>=b;b++)q[b]=0;for(b=4048;4051>=b;b++)q[b]=0;for(b=4056;4063>=b;b++)q[b]=0;for(b=4093;4096>=b;b++)q[b]=0;for(b=4390;4398>=b;b++)q[b]=0;for(b=4399;4413>=b;b++)q[b]=2;for(b=4418;4433>=b;b++)q[b]=2;for(b=4455;4457>=b;b++)q[b]=2;for(b=4484;4489>=b;b++)q[b]=0;for(b=4491;4554>=b;b++)q[b]=0;for(b=4568;4589>=
b;b++)q[b]=0;for(b=4652;4656>=b;b++)q[b]=0;for(b=4766;4800>=b;b++)q[b]=0;for(b=5014;5016>=b;b++)q[b]=0;for(b=5069;5072>=b;b++)q[b]=0;for(b=5105;5130>=b;b++)q[b]=0;for(b=5173;5188>=b;b++)q[b]=0;for(b=5253;5259>=b;b++)q[b]=0;for(b=5269;5275>=b;b++)q[b]=0;for(b=5292;5311>=b;b++)q[b]=0;for(b=5329;5331>=b;b++)q[b]=0;for(b=5343;5349>=b;b++)q[b]=0;for(b=5355;5357>=b;b++)q[b]=0;for(b=5387;5389>=b;b++)q[b]=0;for(b=5459;5463>=b;b++)q[b]=0;for(b=5479;5482>=b;b++)q[b]=0;for(b=5518;5520>=b;b++)q[b]=0;for(b=5530;5539>=
b;b++)q[b]=0;for(b=5550;5552>=b;b++)q[b]=0;for(b=5562;5583>=b;b++)q[b]=0;for(b=5623;5625>=b;b++)q[b]=2;for(b=5631;5639>=b;b++)q[b]=0;for(b=5649;5653>=b;b++)q[b]=0;for(b=5663;5680>=b;b++)q[b]=0;for(b=5682;5685>=b;b++)q[b]=0;for(b=5875;5877>=b;b++)q[b]=0;for(b=5896;5899>=b;b++)q[b]=0;for(b=5921;5940>=b;b++)q[b]=0;for(b=6050;6125>=b;b++)q[b]=0;for(b=6244;6275>=b;b++)q[b]=0;for(b=6328;6348>=b;b++)q[b]=0;for(b=6350;6356>=b;b++)q[b]=0;for(b=6366;6372>=b;b++)q[b]=0;for(b=6381;6387>=b;b++)q[b]=0;for(b=6393;6404>=
b;b++)q[b]=0;for(b=6480;6483>=b;b++)q[b]=0;for(b=6511;6514>=b;b++)q[b]=0;for(b=6579;6581>=b;b++)q[b]=0;for(b=6619;6624>=b;b++)q[b]=0;for(b=6625;6627>=b;b++)q[b]=2;for(b=6628;6632>=b;b++)q[b]=0;for(b=6634;6637>=b;b++)q[b]=0;for(b=6669;6692>=b;b++)q[b]=0;for(b=6707;6709>=b;b++)q[b]=0;for(b=6720;6723>=b;b++)q[b]=0;for(b=6732;6738>=b;b++)q[b]=0;for(b=6931;6933>=b;b++)q[b]=0;for(b=6956;6959>=b;b++)q[b]=0;for(b=7005;7007>=b;b++)q[b]=0;for(b=7057;7070>=b;b++)q[b]=2;for(b=7074;7082>=b;b++)q[b]=0;for(b=7109;7118>=
b;b++)q[b]=0;for(b=7119;7127>=b;b++)q[b]=1;for(b=7374;7376>=b;b++)q[b]=0;for(b=7528;7586>=b;b++)q[b]=0;for(b=7587;7645>=b;b++)q[b]=2;for(b=7692;7696>=b;b++)q[b]=0;for(b=7755;7787>=b;b++)q[b]=0;for(b=7791;7795>=b;b++)q[b]=0;for(b=7799;7801>=b;b++)q[b]=0;for(b=7803;7805>=b;b++)q[b]=0;for(b=7825;7831>=b;b++)q[b]=0;for(b=7845;7859>=b;b++)q[b]=0;for(b=8013;8032>=b;b++)q[b]=0;for(b=8065;8068>=b;b++)q[b]=1;for(b=8518;8529>=b;b++)q[b]=2;for(b=8533;8536>=b;b++)q[b]=2;for(b=8538;8540>=b;b++)q[b]=2;for(b=8677;8679>=
b;b++)q[b]=0;for(b=8836;8840>=b;b++)q[b]=0;for(b=8857;8859>=b;b++)q[b]=0;for(b=8908;8910>=b;b++)q[b]=0;for(b=9154;9159>=b;b++)q[b]=0;for(b=9205;9218>=b;b++)q[b]=0;for(b=9271;9273>=b;b++)q[b]=0;for(b=9295;9297>=b;b++)q[b]=0;for(b=9356;9360>=b;b++)q[b]=0;for(b=9404;9407>=b;b++)q[b]=0;for(b=9476;9482>=b;b++)q[b]=0;for(b=9487;9494>=b;b++)q[b]=0;for(b=9697;9699>=b;b++)q[b]=0;for(b=20002;20032>=b;b++)q[b]=0;for(b=20062;20092>=b;b++)q[b]=0;for(b=20135;20138>=b;b++)q[b]=0;for(b=20248;20258>=b;b++)q[b]=0;
for(b=20348;20358>=b;b++)q[b]=0;for(b=20436;20440>=b;b++)q[b]=0;for(b=20822;20824>=b;b++)q[b]=0;for(b=20904;20932>=b;b++)q[b]=0;for(b=20934;20936>=b;b++)q[b]=0;for(b=21004;21032>=b;b++)q[b]=0;for(b=21035;21037>=b;b++)q[b]=0;for(b=21095;21097>=b;b++)q[b]=0;for(b=21148;21150>=b;b++)q[b]=0;for(b=21207;21264>=b;b++)q[b]=0;for(b=21307;21364>=b;b++)q[b]=0;for(b=21413;21423>=b;b++)q[b]=0;for(b=21453;21463>=b;b++)q[b]=0;for(b=21473;21483>=b;b++)q[b]=0;for(b=21780;21782>=b;b++)q[b]=0;for(b=21891;21894>=b;b++)q[b]=
0;for(b=21896;21899>=b;b++)q[b]=0;for(b=22171;22177>=b;b++)q[b]=0;for(b=22181;22187>=b;b++)q[b]=0;for(b=22191;22197>=b;b++)q[b]=0;for(b=22234;22236>=b;b++)q[b]=0;for(b=22521;22525>=b;b++)q[b]=0;for(b=22991;22994>=b;b++)q[b]=0;for(b=23028;23038>=b;b++)q[b]=0;for(b=23830;23853>=b;b++)q[b]=0;for(b=23866;23872>=b;b++)q[b]=0;for(b=23877;23884>=b;b++)q[b]=0;for(b=23886;23894>=b;b++)q[b]=0;for(b=23946;23948>=b;b++)q[b]=0;for(b=24311;24313>=b;b++)q[b]=0;for(b=24342;24347>=b;b++)q[b]=0;for(b=24370;24374>=
b;b++)q[b]=10;for(b=24375;24381>=b;b++)q[b]=0;for(b=24718;24721>=b;b++)q[b]=0;for(b=24817;24821>=b;b++)q[b]=0;for(b=24877;24882>=b;b++)q[b]=0;for(b=24891;24893>=b;b++)q[b]=0;for(b=25391;25395>=b;b++)q[b]=0;for(b=25828;25838>=b;b++)q[b]=0;for(b=26191;26195>=b;b++)q[b]=0;for(b=26391;26393>=b;b++)q[b]=0;for(b=26701;26722>=b;b++)q[b]=0;for(b=26729;26799>=b;b++)q[b]=2;for(b=26801;26803>=b;b++)q[b]=2;for(b=26811;26813>=b;b++)q[b]=2;for(b=26847;26870>=b;b++)q[b]=2;for(b=26891;26899>=b;b++)q[b]=0;for(b=26901;26923>=
b;b++)q[b]=0;for(b=26929;26946>=b;b++)q[b]=0;for(b=26948;26998>=b;b++)q[b]=0;for(b=27037;27040>=b;b++)q[b]=0;for(b=27205;27232>=b;b++)q[b]=0;for(b=27258;27260>=b;b++)q[b]=0;for(b=27391;27398>=b;b++)q[b]=0;for(b=27561;27564>=b;b++)q[b]=0;for(b=27571;27574>=b;b++)q[b]=0;for(b=27581;27584>=b;b++)q[b]=0;for(b=27591;27594>=b;b++)q[b]=0;for(b=28191;28193>=b;b++)q[b]=0;for(b=28348;28358>=b;b++)q[b]=0;for(b=28402;28432>=b;b++)q[b]=0;for(b=28462;28492>=b;b++)q[b]=0;for(b=29118;29122>=b;b++)q[b]=0;for(b=29168;29172>=
b;b++)q[b]=0;for(b=29177;29185>=b;b++)q[b]=0;for(b=29187;29195>=b;b++)q[b]=0;for(b=29900;29903>=b;b++)q[b]=0;for(b=30161;30179>=b;b++)q[b]=0;for(b=30491;30494>=b;b++)q[b]=0;for(b=30729;30732>=b;b++)q[b]=0;for(b=31251;31259>=b;b++)q[b]=0;for(b=31265;31268>=b;b++)q[b]=0;for(b=31275;31279>=b;b++)q[b]=0;for(b=31281;31297>=b;b++)q[b]=0;for(b=31461;31469>=b;b++)q[b]=0;for(b=31491;31495>=b;b++)q[b]=0;for(b=31917;31922>=b;b++)q[b]=0;for(b=31965;32E3>=b;b++)q[b]=0;for(b=32001;32003>=b;b++)q[b]=2;for(b=32005;32031>=
b;b++)q[b]=2;for(b=32033;32060>=b;b++)q[b]=2;for(b=32064;32067>=b;b++)q[b]=2;for(b=32074;32077>=b;b++)q[b]=2;for(b=32081;32086>=b;b++)q[b]=0;for(b=32107;32130>=b;b++)q[b]=0;for(b=32133;32158>=b;b++)q[b]=0;for(b=32164;32167>=b;b++)q[b]=2;for(b=32180;32199>=b;b++)q[b]=0;for(b=32201;32260>=b;b++)q[b]=0;for(b=32301;32360>=b;b++)q[b]=0;for(b=32601;32662>=b;b++)q[b]=0;for(b=32664;32667>=b;b++)q[b]=2;for(b=32701;32761>=b;b++)q[b]=0;for(b=53001;53004>=b;b++)q[b]=0;for(b=53008;53019>=b;b++)q[b]=0;for(b=53021;53032>=
b;b++)q[b]=0;for(b=53034;53037>=b;b++)q[b]=0;for(b=53042;53046>=b;b++)q[b]=0;for(b=53074;53080>=b;b++)q[b]=0;for(b=54001;54004>=b;b++)q[b]=0;for(b=54008;54019>=b;b++)q[b]=0;for(b=54021;54032>=b;b++)q[b]=0;for(b=54034;54037>=b;b++)q[b]=0;for(b=54042;54046>=b;b++)q[b]=0;for(b=54048;54053>=b;b++)q[b]=0;for(b=54074;54080>=b;b++)q[b]=0;for(b=54098;54101>=b;b++)q[b]=0;for(b=102001;102040>=b;b++)q[b]=0;for(b=102042;102063>=b;b++)q[b]=0;for(b=102065;102067>=b;b++)q[b]=0;for(b=102070;102117>=b;b++)q[b]=0;
for(b=102122;102216>=b;b++)q[b]=0;for(b=102221;102377>=b;b++)q[b]=0;for(b=102382;102388>=b;b++)q[b]=0;for(b=102389;102398>=b;b++)q[b]=2;for(b=102399;102444>=b;b++)q[b]=0;for(b=102445;102447>=b;b++)q[b]=2;for(b=102448;102458>=b;b++)q[b]=0;for(b=102459;102468>=b;b++)q[b]=2;for(b=102469;102499>=b;b++)q[b]=0;for(b=102500;102519>=b;b++)q[b]=1;for(b=102520;102524>=b;b++)q[b]=0;for(b=102525;102529>=b;b++)q[b]=2;for(b=102530;102588>=b;b++)q[b]=0;for(b=102590;102598>=b;b++)q[b]=0;for(b=102601;102603>=b;b++)q[b]=
0;for(b=102605;102628>=b;b++)q[b]=0;for(b=102629;102646>=b;b++)q[b]=2;for(b=102648;102700>=b;b++)q[b]=2;for(b=102701;102703>=b;b++)q[b]=0;for(b=102707;102730>=b;b++)q[b]=2;for(b=102733;102758>=b;b++)q[b]=2;for(b=102767;102900>=b;b++)q[b]=0;for(b=102901;102933>=b;b++)q[b]=2;for(b=102934;102950>=b;b++)q[b]=13;for(b=102951;102955>=b;b++)q[b]=0;for(b=102961;102963>=b;b++)q[b]=0;for(b=102965;102969>=b;b++)q[b]=0;for(b=102971;102973>=b;b++)q[b]=0;for(b=102975;102989>=b;b++)q[b]=0;for(b=102990;102992>=b;b++)q[b]=
1;for(b=102997;103002>=b;b++)q[b]=0;for(b=103003;103008>=b;b++)q[b]=2;for(b=103009;103011>=b;b++)q[b]=0;for(b=103012;103014>=b;b++)q[b]=2;for(b=103019;103021>=b;b++)q[b]=0;for(b=103022;103024>=b;b++)q[b]=2;for(b=103029;103031>=b;b++)q[b]=0;for(b=103032;103034>=b;b++)q[b]=2;for(b=103065;103068>=b;b++)q[b]=0;for(b=103074;103076>=b;b++)q[b]=0;for(b=103077;103079>=b;b++)q[b]=1;for(b=103080;103082>=b;b++)q[b]=0;for(b=103083;103085>=b;b++)q[b]=2;for(b=103090;103093>=b;b++)q[b]=0;for(b=103097;103099>=b;b++)q[b]=
0;for(b=103100;103102>=b;b++)q[b]=2;for(b=103107;103109>=b;b++)q[b]=0;for(b=103110;103112>=b;b++)q[b]=2;for(b=103113;103116>=b;b++)q[b]=0;for(b=103117;103120>=b;b++)q[b]=2;for(b=103153;103157>=b;b++)q[b]=0;for(b=103158;103162>=b;b++)q[b]=2;for(b=103163;103165>=b;b++)q[b]=0;for(b=103166;103168>=b;b++)q[b]=1;for(b=103169;103171>=b;b++)q[b]=2;for(b=103186;103188>=b;b++)q[b]=0;for(b=103189;103191>=b;b++)q[b]=2;for(b=103192;103195>=b;b++)q[b]=0;for(b=103196;103199>=b;b++)q[b]=2;for(b=103200;103224>=b;b++)q[b]=
0;for(b=103225;103227>=b;b++)q[b]=1;for(b=103232;103237>=b;b++)q[b]=0;for(b=103238;103243>=b;b++)q[b]=2;for(b=103244;103246>=b;b++)q[b]=0;for(b=103247;103249>=b;b++)q[b]=2;for(b=103254;103256>=b;b++)q[b]=0;for(b=103257;103259>=b;b++)q[b]=2;for(b=103264;103266>=b;b++)q[b]=0;for(b=103267;103269>=b;b++)q[b]=2;for(b=103300;103375>=b;b++)q[b]=0;for(b=103381;103383>=b;b++)q[b]=0;for(b=103384;103386>=b;b++)q[b]=1;for(b=103387;103389>=b;b++)q[b]=0;for(b=103390;103392>=b;b++)q[b]=2;for(b=103397;103399>=b;b++)q[b]=
0;for(b=103400;103471>=b;b++)q[b]=2;for(b=103476;103478>=b;b++)q[b]=0;for(b=103479;103481>=b;b++)q[b]=2;for(b=103486;103488>=b;b++)q[b]=0;for(b=103489;103491>=b;b++)q[b]=2;for(b=103492;103495>=b;b++)q[b]=0;for(b=103496;103499>=b;b++)q[b]=2;for(b=103528;103543>=b;b++)q[b]=0;for(b=103544;103548>=b;b++)q[b]=2;for(b=103549;103551>=b;b++)q[b]=0;for(b=103552;103554>=b;b++)q[b]=1;for(b=103555;103557>=b;b++)q[b]=2;for(b=103558;103560>=b;b++)q[b]=0;for(b=103571;103573>=b;b++)q[b]=0;for(b=103574;103576>=b;b++)q[b]=
2;for(b=103577;103580>=b;b++)q[b]=0;for(b=103581;103583>=b;b++)q[b]=2;for(b=103595;103694>=b;b++)q[b]=0;for(b=103696;103699>=b;b++)q[b]=0;for(b=103700;103793>=b;b++)q[b]=2;for(b=103794;103887>=b;b++)q[b]=0;for(b=103900;103971>=b;b++)q[b]=2;return l.WKIDUnitConversion=q})},"esri/layers/ImageServiceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang".split(" "),function(F,l,b,q,n,p){F=F(null,{declaredClass:"esri.layers.ImageServiceParameters",
extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,renderer:null,noData:null,compressionTolerance:null,adjustAspectRatio:null,lercVersion:null,toJson:function(m){var a=this.bbox||this.extent;m=(a=a&&m&&a._normalize(!0))?a.spatialReference.wkid||b.toJson(a.spatialReference.toJson()):null;var e=this.imageSpatialReference;a={bbox:a?a.xmin+","+a.ymin+","+a.xmax+","+a.ymax:
null,bboxSR:m,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,imageSR:e?e.wkid||b.toJson(e.toJson()):m,format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?b.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?b.toJson(this.renderingRule.toJson()):null,renderer:this.renderer?b.toJson(this.renderer.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation,
compressionTolerance:this.compressionTolerance,adjustAspectRatio:this.adjustAspectRatio,lercVersion:this.lercVersion};m=this.timeExtent;a.time=m?m.toJson().join(","):null;return p.filter(a,function(k){if(null!==k&&void 0!==k)return!0})}});l.mixin(F,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});
l.setObject("layers.ImageServiceParameters",F,n);return F})},"esri/layers/rasterLib/raster/BasicRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../MosaicRule ../../ImageServiceParameters ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterHandler ./rasterProjectionHelper ./RasterInfo".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y,u,B){return l([f],{url:null,dataType:null,rasterInfo:null,tileInfo:null,serviceInfo:null,loaded:null,constructor:function(x){if(x){var A=x.url;A&&(A=w.urlToObject(A),this.url=A.path,this._query=A.query);this.dataType=x.dataType;this.serviceInfo=x.serviceInfo;this.rasterInfo=x.rasterInfo;this.tileInfo=x.tileInfo;this.serviceInfo=x.serviceInfo}},open:function(){},read:function(x){},identify:function(x){var A=new q,E=this.rasterInfo.extent;if(u.requirePE(E.spatialReference,
x.spatialReference))u.load().then(b.hitch(this,function(){J=u.project(x,E.spatialReference);A.resolve(J)}),function(){A.reject(Error("cannot project into this spatial reference"))});else{var J=u.project(x,E.spatialReference);A.resolve(J)}return A.then(b.hitch(this,function(O){var S=this.tileInfo,X=S.origin,Y=S.lods[S.lods.length-1],K=(O.x-X.x)/S.cols/Y.resolution;O=(X.y-O.y)/S.rows/Y.resolution;var P=Math.round((O-Math.floor(O))*S.rows)*S.cols+Math.round((K-Math.floor(K))*S.cols);X=new d(X.x+Y.resolution*
S.cols*K,X.y-Y.resolution*S.rows*(O+1),X.x+Y.resolution*S.cols*(K+1),X.y-Y.resolution*S.rows*O,E.spatialReference);var Q=this.getMemberRasters?this.getMemberRasters()[0]:this;return Q.read({level:Y.level,row:Math.floor(O),col:Math.floor(K),extent:X,width:S.cols,height:S.rows,virtual:Q.tileInfo.virtual,tileType:Q.tileInfo.tileType}).then(function(ba){return(ba=ba&&ba.pixelBlock)&&ba.pixels&&0<ba.pixels.length&&(!ba.mask||ba.mask[P])?{pixelValue:ba.pixels.map(function(ca){return ca[P]})}:{pixelValue:null}})}))},
getProjectedFullExtent:function(x,A){var E=new q;if(this.projectedFullExtent&&!A)return E.resolve(this.projectedFullExtent),E.promise;var J=this.rasterInfo.extent;if(u.requirePE(this.rasterInfo.extent.spatialReference,x))u.load().then(b.hitch(this,function(){O=u.project(J,x);this.projectedFullExtent=O=new d(O.toJson());E.resolve(O)}),function(){E.reject(Error("cannot project into this spatial reference"))});else{var O=u.project(J,x);this.projectedFullExtent=O=new d(O.toJson());E.resolve(O)}return E.promise},
setFetchParameters:function(x,A){},_setRasterHandler:function(x){this._rasterHandler=x;this.getMemberRasters&&this.getMemberRasters().forEach(b.hitch(this,function(A){A._rasterHandler=x}))},_findCredential:function(){this.url&&((this._credential=h.id&&h.id.findCredential(this.url))&&this._credential.ssl||this.serviceInfo&&this.serviceInfo._ssl)&&(this.url=this.url.replace(/^http:/i,"https:"))},_initWorker:function(){this._rasterHandler=new y;this._rasterHandler.start().then(function(){this._rasterHandlerInitialized=
!0}.bind(this))},_requestPixels:function(x){var A=x.url,E=x.payload,J=x.decodeParams,O=x.tileOptions,S=new q(r._dfdCanceller);this._rasterHandler||this._initWorker();var X=this._rasterHandler,Y={};A={url:A,handleAs:"arraybuffer",content:E};x.headers&&(A.headers=x.headers);S._pendingDfd=c(A).then(b.hitch(this,function(K){(X&&this._rasterHandlerInitialized?X.decode({encodedData:K,decodeParams:J}):D.decode(K,J)).then(function(P){Y.pixelBlock=new C(P);Y.extent=O.extent;Y.level=O.level;Y.row=O.row;Y.col=
O.col;Y.width=O.width;Y.height=O.height;r._resDfd(S,[Y])},function(P){r._resDfd(S,[P],!0)})}),function(K){r._resDfd(S,[K],!0)});return S},_computeSignature:function(x){if("string"===typeof x){for(var A=new Uint8Array(x.length),E=0;E<x.length;E++)A[E]=x.charCodeAt(E);x=A}E=A=65535;for(var J=x.length,O=Math.floor(J/2),S=0;O;){var X=359<=O?359:O;O-=X;do A+=x[S++]<<8,E+=A+=x[S++];while(--X);A=(A&65535)+(A>>>16);E=(E&65535)+(E>>>16)}J&1&&(E+=A+=x[S]<<8);return((E&65535)+(E>>>16)<<16|(A&65535)+(A>>>16))>>>
0}})})},"esri/layers/rasterFormats/rasterCodec":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred ../PixelBlock ./LercCodec ./Lerc2Codec ./Lerc ./JpgPlus ./Png ./Raw ./TiffDecoder".split(" "),function(F,l,b,q,n,p,m,a,e,k,h,f){return{validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),supportedFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_isPlatformLittleEndian:function(){var c=new ArrayBuffer(4),d=new Uint8Array(c);(new Uint32Array(c))[0]=
1;return 1===d[0]}(),decode:function(c,d){if(void 0===d||null===d)throw"missing decode options";var g;d.format&&(g=d.format.toUpperCase());"BSQ"!==g&&"BIP"!==g&&(g=this._getFormat(c));var t=d.decodeFunc;if(void 0===t||null===t)t=this._getFormatDecoderDfd(g,d.useWasm);return t(c,d)},_getFormatDecoderDfd:function(c,d){if(d&&("LERC"===c||"LERC2"===c))return this._decodeLercWasm.bind(this);var g=null;switch(c){case "LERC":g=this._decodeLerc;break;case "LERC2":g=this._decodeLerc2;break;case "JPEG":g=this._decodeJpeg;
break;case "PNG":g=this._decodePng;break;case "BSQ":g=this._decodeBsq;break;case "BIP":g=this._decodeBip;break;case "TIFF":g=this._decodeTiff;break;default:g=function(t,r){throw"The raster format is not supported";}}g=b.hitch(this,g);return function(t,r){var w=new q;r.isPoint&&r.width&&(r.width++,r.height++);var v=g(t,r);r.isPoint&&r.width&&(this._interpolatePointGrid(v),r.width--,r.height--);w.resolve(v);return w}.bind(this)},_getFormat:function(c){c=new Uint8Array(c,0,10);var d="";if(255===c[0]&&
216===c[1])d="JPEG";else if(137===c[0]&&80===c[1]&&78===c[2]&&71===c[3])d="PNG";else if(67===c[0]&&110===c[1]&&116===c[2]&&90===c[3]&&73===c[4]&&109===c[5]&&97===c[6]&&103===c[7]&&101===c[8]&&32===c[9])d="LERC";else if(76===c[0]&&101===c[1]&&114===c[2]&&99===c[3]&&50===c[4]&&32===c[5])d="LERC2";else if(-1<String.fromCharCode.apply(null,c).toLowerCase().indexOf("error"))d="ERROR";else if(73===c[0]&&73===c[1]&&42===c[2]&&0===c[3]||77===c[0]&&77===c[1]&&0===c[2]&&42===c[3])d="TIFF";return d},_validateDecodeParams:function(c){if(!c.height||
Math.floor(c.height)!==c.height)throw"Height not provided.";if(!c.width||Math.floor(c.width)!==c.width)throw"Width not provided.";},_decodeJpeg:function(c,d){if(!e)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(d);var g=(new e).decode(c);if(!this._verifyResult(g,d))throw"The decoded image dimensions are incorrect.";g=new n({width:g.width,height:g.height,pixels:g.pixels,pixelType:"U8",mask:g.mask,statistics:null});g.calculateStatistics();return g},_decodePng:function(c,d){if(!k)throw"The png decoder module is not loaded.";
this._validateDecodeParams(d);var g=new Uint8Array(c),t=new k(g);g=new Uint8Array(d.width*d.height*4);t.copyToImageData(g,t.decodePixels());var r=t=0;r=new Uint8Array(d.width*d.height);for(t=0;t<d.width*d.height;t++)r[t]=g[4*t+3];var w=new n({width:d.width,height:d.height,pixels:[],pixelType:"U8",mask:r,statistics:[]});for(t=0;3>t;t++){var v=new Uint8Array(d.width*d.height);for(r=0;r<d.width*d.height;r++)v[r]=g[4*r+t];w.addData({pixels:v})}w.calculateStatistics();return w},_decodeBsq:function(c,d){if(!h)throw"The bsq decoder module is not loaded.";
this._validateDecodeParams(d);var g=d.noDataValue;d.pixelType=this._getpixelTypeAndNoData(d.pixelType);g=h.decodeBSQ(c,{bandCount:d.planes,width:d.width,height:d.height,pixelType:d.pixelType,noDataValue:g});g=new n({width:d.width,height:d.height,pixels:g.pixels,pixelType:d.pixelType,mask:g.maskData,statistics:null});g.calculateStatistics();return g},_decodeBip:function(c,d){this._validateDecodeParams(d);var g=d.noDataValue;d.pixelType=this._getpixelTypeAndNoData(d.pixelType);g=h.decodeBIP(c,{bandCount:d.planes,
width:d.width,height:d.height,pixelType:d.pixelType,noDataValue:g});g=new n({width:d.width,height:d.height,pixels:g.pixels,pixelType:d.pixelType,mask:g.maskData,statistics:null});g.calculateStatistics();return g},_decodeTiff:function(c,d){this._validateDecodeParams(d);d.pixelType=this._getpixelTypeAndNoData(d.pixelType);var g=f.decode(c);g=new n({width:g.width,height:g.height,pixels:g.pixels,pixelType:g.pixelType,mask:g.maskData,statistics:null});g.calculateStatistics();return g},_decodeLerc:function(c,
d){if(!this._isPlatformLittleEndian)throw"lerc decoder is not supported on big endian platform";this._validateDecodeParams(d);var g=d.noDataValue;d.pixelType=this._getpixelTypeAndNoData(d.pixelType);for(var t=0,r,w=0,v,z=c.byteLength-10;w<z;){var C=p.decode(c,{inputOffset:w,encodedMaskData:r,returnMask:0===t?!0:!1,returnEncodedMask:0===t?!0:!1,returnFileInfo:!0,pixelType:d.pixelType,noDataValue:g});w=C.fileInfo.eofOffset;0===t&&(r=C.encodedMaskData,v=new n({width:d.width,height:d.height,pixels:[],
pixelType:d.pixelType,mask:C.maskData,statistics:[]}));t++;if(!this._verifyResult(C,d))throw"The decoded image dimensions are incorrect";v.addData({pixels:C.pixelData,statistics:{minValue:C.minValue,maxValue:C.maxValue,noDataValue:C.noDataValue}})}return v},_decodeLerc2:function(c,d){if(!this._isPlatformLittleEndian)throw"lerc2 decoder is not supported on big endian platform";this._validateDecodeParams(d);d.pixelType=this._getpixelTypeAndNoData(d.pixelType);for(var g=0,t,r,w,v=0,z,C=c.byteLength-
10,D=[],y,u=0;v<C;){r=m.decode(c,{inputOffset:v,maskData:t,returnFileInfo:!0});v=r.fileInfo.eofOffset;t=r.maskData;0===g&&(w=r.fileInfo.numValidPixel,z=new n({width:d.width,height:d.height,pixels:[],dimCount:r.dimCount||1,pixelType:r.fileInfo.pixelType,mask:t,statistics:[]}));r.fileInfo.mask&&0<r.fileInfo.mask.numBytes&&u++;t&&D.push(t);g++;if(!this._verifyResult(r,d))throw"The decoded image dimensions are incorrect";z.addData({pixels:r.pixelData,statistics:{minValue:r.minValue,maxValue:r.maxValue,
noDataValue:r.noDataValue,dimStats:r.dimStats}})}if(1<u){r=z.width*z.height;z.bandMasks=D;t=new Uint8Array(r);t.set(D[0]);for(w=1;w<D.length;w++)for(y=D[w],g=0;g<r;g++)t[g]&=y[g];for(g=w=0;g<r;g++)w+=y[g];z.mask=t}z.validPixelCount=w;return z},_decodeLercWasm:function(c,d){if(!this._isPlatformLittleEndian)throw"lerc decoder is not supported on big endian platform";this._validateDecodeParams(d);var g=new q;a.load().then(function(){var t=a.decode(c,{inputOffset:0,noDataValue:d.noDataValue,pixelType:d.pixelType&&
d.pixelType.toUpperCase()});t=new n({width:t.width,height:t.height,pixelType:t.pixelType.toUpperCase(),pixels:t.pixels,mask:t.mask,statistics:t.statistics,validPixelCount:t.validPixelCount});d.isPoint&&d.width&&(this._interpolatePointGrid(t),d.width--,d.height--);g.resolve(t)}.bind(this),function(){g.reject("Cannot load lerc wasm decoder")});return g},_interpolatePointGrid:function(c,d){var g=c.pixels;if(g&&0!==g.length){var t=g.length,r=c.width,w=c.mask,v=r-1,z=c.height-1,C=[],D,y,u;if(0===(null==
d?1:d)){for(D=0;D<t;D++){var B=g[D];var x=new B.constructor(v*z);for(y=0;y<z;y++){var A=y*r;for(u=0;u<v;u++)x[y*v+u]=B[A+u]}C.push(x)}if(w){var E=new Uint8Array(v*z);for(y=0;y<z;y++)for(A=y*r,u=0;u<v;u++)E[y*v+u]=w[A+u]}}else{for(D=0;D<t;D++){B=g[D];x=new B.constructor(v*z);for(y=0;y<z;y++)for(A=y*r,u=0;u<v;u++)x[y*v+u]=(B[A+u]+B[A+u+1]+B[A+r+u]+B[A+r+u+1])/4;C.push(x)}if(w)for(E=new Uint8Array(v*z),y=0;y<z;y++)for(A=y*r,u=0;u<v;u++)E[y*v+u]=Math.min.apply(null,[w[A+u],w[A+u+1],w[A+r+u],w[A+r+u+1]])}c.width=
v;c.height=z;c.mask=E;c.pixels=C;return c}},_getpixelTypeAndNoData:function(c){return"U1"===c||"U2"===c||"U4"===c||"U8"===c?"U8":c},_verifyResult:function(c,d){return c.height!==d.height||c.width!==d.width?!1:!0}}})},"esri/layers/rasterFormats/Lerc":function(){var F=this&&this.__createBinding||(Object.create?function(n,p,m,a){void 0===a&&(a=m);Object.defineProperty(n,a,{enumerable:!0,get:function(){return p[m]}})}:function(n,p,m,a){void 0===a&&(a=m);n[a]=p[m]}),l=this&&this.__setModuleDefault||(Object.create?
function(n,p){Object.defineProperty(n,"default",{enumerable:!0,value:p})}:function(n,p){n["default"]=p}),b=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var p={};if(null!=n)for(var m in n)"default"!==m&&Object.prototype.hasOwnProperty.call(n,m)&&F(p,n,m);l(p,n);return p},q=this&&this.__read||function(n,p){var m="function"===typeof Symbol&&n[Symbol.iterator];if(!m)return n;var a=m.call(n),e,k=[];try{for(;(void 0===p||0<p--)&&!(e=a.next()).done;)k.push(e.value)}catch(f){var h={error:f}}finally{try{e&&
!e.done&&(m=a["return"])&&m.call(a)}finally{if(h)throw h.error;}}return k};define(["require","exports"],function(n,p){function m(f){var c=f._malloc,d=f._free,g=f._lerc_getBlobInfo,t=f._lerc_getDataRanges,r=f._lerc_decode_4D,w,v=Object.values(f.asm).find(function(C){return C&&"buffer"in C&&C.buffer===f.HEAPU8.buffer}),z=function(C){C=C.map(function(B){return(B>>3<<3)+16});var D=C.reduce(function(B,x){return B+x}),y=c(D);w=new Uint8Array(v.buffer);D=C[0];C[0]=y;for(y=1;y<C.length;y++){var u=C[y];C[y]=
C[y-1]+D;D=u}return C};h.getBlobInfo=function(C){var D,y=new Uint8Array(48),u=new Uint8Array(24),B=q(z([C.length,y.length,u.length]),3),x=B[0],A=B[1];B=B[2];w.set(C,x);w.set(y,A);w.set(u,B);if(D=g(x,C.length,A,B,12,3))throw d(x),"lerc-getBlobInfo: error code is ".concat(D);w=new Uint8Array(v.buffer);y.set(w.slice(A,A+y.length));u.set(w.slice(B,B+u.length));y=new Uint32Array(y.buffer);B=new Float64Array(u.buffer);A=q(y,11);u=A[2];y=A[5];var E=A[10];A={version:A[0],dimCount:u,width:A[3],height:A[4],
validPixelCount:A[6],bandCount:y,blobSize:A[7],maskCount:A[8],dataType:A[1],minValue:B[0],maxValue:B[1],maxZerror:B[2],statistics:[],bandCountWithNoData:E};if(E)return A;if(1===u&&1===y)return d(x),A.statistics.push({minValue:B[0],maxValue:B[1]}),A;var J=u*y*8,O=new Uint8Array(J),S=new Uint8Array(J);B=x;E=0;var X=!1;if(w.byteLength<x+2*J){d(x);X=!0;D=q(z([C.length,J,J]),3);B=D[0];E=D[1];var Y=D[2];w.set(C,B)}else D=q(z([J,J]),2),E=D[0],Y=D[1];w.set(O,E);w.set(S,Y);if(D=t(x,C.length,u,y,E,Y))throw d(B),
X||d(E),"lerc-getDataRanges: error code is ".concat(D);w=new Uint8Array(v.buffer);O.set(w.slice(E,E+J));S.set(w.slice(Y,Y+J));C=new Float64Array(O.buffer);x=new Float64Array(S.buffer);D=A.statistics;for(S=0;S<y;S++)if(1<u){J=C.slice(S*u,(S+1)*u);O=x.slice(S*u,(S+1)*u);Y=Math.min.apply(null,J);var K=Math.max.apply(null,O);D.push({minValue:Y,maxValue:K,dimStats:{minValues:J,maxValues:O}})}else D.push({minValue:C[S],maxValue:x[S]});d(B);X||d(E);return A};h.decode=function(C,D){var y=D.maskCount,u=D.dimCount,
B=D.bandCount,x=D.width,A=D.height,E=D.dataType,J=D.bandCountWithNoData,O=a[E],S=x*A,X=new Uint8Array(S*B),Y=S*u*B*O.size;O=new Uint8Array(Y);S=new Uint8Array(B);var K=8*B,P=new Uint8Array(K),Q=q(z([C.length,X.length,O.length,S.length,P.length]),5),ba=Q[0],ca=Q[1],ka=Q[2],aa=Q[3];Q=Q[4];w.set(C,ba);w.set(X,ca);w.set(O,ka);w.set(S,aa);w.set(P,Q);if(y=r(ba,C.length,y,ca,u,x,A,B,E,ka,aa,Q))throw d(ba),"lerc-decode: error code is ".concat(y);w=new Uint8Array(v.buffer);O.set(w.slice(ka,ka+Y));X.set(w.slice(ca,
ca+X.length));y=null;if(J)for(S.set(w.slice(aa,aa+B)),P.set(w.slice(Q,Q+K)),y=[],B=0;B<S.length;B++)y.push(S[B]?P[B]:null);d(ba);return{data:O,maskData:X,noDataValues:y}}}Object.defineProperty(p,"__esModule",{value:!0});p.getBlobInfo=p.decode=p.isLoaded=p.load=void 0;var a=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},
{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}],e=null,k=!1;p.load=function(){return e?e:e=(new Promise(function(f,c){n(["./lerc-wasm"],f,c)})).then(b).then(function(f){f=f["default"];return f({locateFile:function(c){return n.toUrl("./"+
c)}})}).then(function(f){m(f);k=!0})};p.isLoaded=function(){return k};var h={getBlobInfo:null,decode:null};p.decode=function(f,c){var d;void 0===c&&(c={});var g=null!==(d=c.inputOffset)&&void 0!==d?d:0;g=f instanceof Uint8Array?f.subarray(g):new Uint8Array(f,g);d=h.getBlobInfo(g);var t=h.decode(g,d),r=t.maskData;g=d.width;var w=d.height,v=d.bandCount,z=d.dimCount,C=d.maskCount,D=d.statistics,y=a[d.dataType],u=new y.ctor(t.data.buffer);t=[];for(var B=[],x=g*w,A=x*z,E=0;E<v;E++){var J=u.subarray(E*
A,(E+1)*A);if(c.returnPixelInterleavedDims)t.push(J);else{var O=x,S=z;if(!(2>S)){for(var X=new y.ctor(O*S),Y=0,K=0;Y<O;Y++)for(var P=0,Q=Y;P<S;P++,Q+=O)X[Q]=J[K++];J=X}t.push(J)}B.push(r.subarray(E*A,(E+1)*A))}r=0===C?null:1===C?B[0]:new Uint8Array(x);if(1<C)for(r.set(B[0]),E=1;E<B.length;E++)for(u=B[E],A=0;A<x;A++)r[A]&=u[A];E=c.noDataValue;E=null!=E&&y.range[0]<=E&&y.range[1]>=E;if(0<C&&E)for(O=c.noDataValue,E=0;E<v;E++)for(J=t[E],u=B[E]||r,A=0;A<x;A++)0===u[A]&&(J[A]=O);return{width:g,height:w,
bandCount:v,pixelType:c.pixelType&&0===d.version?c.pixelType:y.pixelType,dimCount:z,statistics:D,pixels:t,mask:r,bandMasks:C===v&&1<v?B:null}};p.getBlobInfo=function(f,c){var d,g;void 0===c&&(c={});var t=f instanceof Uint8Array?f.subarray(null!==(d=c.inputOffset)&&void 0!==d?d:0):new Uint8Array(f,null!==(g=c.inputOffset)&&void 0!==g?g:0);return h.getBlobInfo(t)}})},"esri/layers/rasterFormats/JpgPlus":function(){define(["dojo/_base/declare","./Zlib","./Jpg"],function(F,l,b){return F(null,{constructor:function(){},
decode:function(q){var n=new Uint8Array(q);q=new b;q.parse(n);var p=q.numComponents,m=q.getData(q.width,q.height,!0),a=q.width*q.height,e=q.eof,k=0,h=0,f=0;if(e<n.length-1){h=(new l(n.subarray(e))).getBytes();var c=new Uint8Array(a);for(k=n=0;k<h.length;k++)for(f=7;0<=f;f--)c[n++]=h[k]>>f&1}n=[];if(1===p&&m.length===a)n=[m,m,m];else{for(k=0;3>k;k++)p=new Uint8Array(a),n.push(p);for(h=f=0;h<a;h++)for(k=0;3>k;k++)n[k][h]=m[f++]}return{width:q.width,height:q.height,pixels:n,mask:c}}})})},"esri/layers/rasterFormats/Zlib":function(){define([],
function(){var F=function(){function l(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}l.prototype={ensureBuffer:function(b){var q=this.buffer,n=q?q.byteLength:0;if(b<n)return q;for(var p=512;p<b;)p<<=1;b=new Uint8Array(p);for(p=0;p<n;++p)b[p]=q[p];return this.buffer=b},getByte:function(){for(var b=this.pos;this.bufferLength<=b;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(b){var q=this.pos;if(b){this.ensureBuffer(q+b);for(b=q+b;!this.eof&&
this.bufferLength<b;)this.readBlock();var n=this.bufferLength;b>n&&(b=n)}else{for(;!this.eof;)this.readBlock();b=this.bufferLength}this.pos=b;return this.buffer.subarray(q,b)},lookChar:function(){for(var b=this.pos;this.bufferLength<=b;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var b=this.pos;this.bufferLength<=b;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(b,
q,n){for(var p=b+q;this.bufferLength<=p&&!this.eof;)this.readBlock();return new Stream(this.buffer,b,q,n)},skip:function(b){b||(b=1);this.pos+=b},reset:function(){this.pos=0}};return l}();return function(){function l(e){throw Error(e);}function b(e){var k=0,h=e[k++],f=e[k++];-1!=h&&-1!=f||l("Invalid header in flate stream");8!=(h&15)&&l("Unknown compression method in flate stream");0!=((h<<8)+f)%31&&l("Bad FCHECK in flate stream");f&32&&l("FDICT bit set in flate stream");this.bytes=e;this.bytesPos=
k;this.codeBuf=this.codeSize=0;F.call(this)}if(!self||!self.Uint32Array)return null;var q=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),p=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,
724993,727041,794625,798721,868353,876545]),m=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,
590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,
590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,
590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,
590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,
590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,
590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,
590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];b.prototype=Object.create(F.prototype);b.prototype.getBits=function(e){for(var k=this.codeSize,h=this.codeBuf,f=this.bytes,c=this.bytesPos,
d;k<e;)"undefined"==typeof(d=f[c++])&&l("Bad encoding in flate stream"),h|=d<<k,k+=8;this.codeBuf=h>>e;this.codeSize=k-=e;this.bytesPos=c;return h&(1<<e)-1};b.prototype.getCode=function(e){var k=e[0],h=e[1];e=this.codeSize;for(var f=this.codeBuf,c=this.bytes,d=this.bytesPos;e<h;){var g;"undefined"==typeof(g=c[d++])&&l("Bad encoding in flate stream");f|=g<<e;e+=8}h=k[f&(1<<h)-1];k=h>>16;h&=65535;(0==e||e<k||0==k)&&l("Bad encoding in flate stream");this.codeBuf=f>>k;this.codeSize=e-k;this.bytesPos=
d;return h};b.prototype.generateHuffmanTable=function(e){for(var k=e.length,h=0,f=0;f<k;++f)e[f]>h&&(h=e[f]);for(var c=1<<h,d=new Uint32Array(c),g=1,t=0,r=2;g<=h;++g,t<<=1,r<<=1)for(var w=0;w<k;++w)if(e[w]==g){var v=0,z=t;for(f=0;f<g;++f)v=v<<1|z&1,z>>=1;for(f=v;f<c;f+=r)d[f]=g<<16|w;++t}return[d,h]};b.prototype.readBlock=function(){function e(v,z,C,D,y){for(v=v.getBits(C)+D;0<v--;)z[t++]=y}var k=this.getBits(3);k&1&&(this.eof=!0);k>>=1;if(0==k){var h=this.bytes,f=this.bytesPos,c;"undefined"==typeof(c=
h[f++])&&l("Bad block header in flate stream");var d=c;"undefined"==typeof(c=h[f++])&&l("Bad block header in flate stream");d|=c<<8;"undefined"==typeof(c=h[f++])&&l("Bad block header in flate stream");k=c;"undefined"==typeof(c=h[f++])&&l("Bad block header in flate stream");(k|c<<8)!=(~d&65535)&&l("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;c=this.bufferLength;k=this.ensureBuffer(c+d);this.bufferLength=d=c+d;for(var g=c;g<d;++g){if("undefined"==typeof(c=h[f++])){this.eof=
!0;break}k[g]=c}this.bytesPos=f}else{if(1==k)f=m,c=a;else if(2==k){k=this.getBits(5)+257;c=this.getBits(5)+1;h=this.getBits(4)+4;f=Array(q.length);for(var t=0;t<h;)f[q[t++]]=this.getBits(3);f=this.generateHuffmanTable(f);t=h=0;c=k+c;for(d=Array(c);t<c;)g=this.getCode(f),16==g?e(this,d,2,3,h):17==g?e(this,d,3,3,h=0):18==g?e(this,d,7,11,h=0):d[t++]=h=g;f=this.generateHuffmanTable(d.slice(0,k));c=this.generateHuffmanTable(d.slice(k,c))}else l("Unknown block type in flate stream");d=(k=this.buffer)?k.length:
0;for(g=this.bufferLength;;){var r=this.getCode(f);if(256>r)g+1>=d&&(k=this.ensureBuffer(g+1),d=k.length),k[g++]=r;else{if(256==r){this.bufferLength=g;break}r-=257;r=n[r];var w=r>>16;0<w&&(w=this.getBits(w));h=(r&65535)+w;r=this.getCode(c);r=p[r];w=r>>16;0<w&&(w=this.getBits(w));r=(r&65535)+w;g+h>=d&&(k=this.ensureBuffer(g+h),d=k.length);for(w=0;w<h;++w,++g)k[g]=k[g-r]}}}};return b}()})},"esri/layers/rasterFormats/Jpg":function(){define([],function(){var F=function(){function l(b){this.message="JPEG error: "+
b}l.prototype=Error();l.prototype.name="JpegError";return l.constructor=l}();return function(){function l(){this.decodeTransform=null;this.colorTransform=-1}function b(a,e){for(var k=0,h=[],f,c,d=16;0<d&&!a[d-1];)d--;h.push({children:[],index:0});var g=h[0],t;for(f=0;f<d;f++){for(c=0;c<a[f];c++){g=h.pop();for(g.children[g.index]=e[k];0<g.index;)g=h.pop();g.index++;for(h.push(g);h.length<=f;)h.push(t={children:[],index:0}),g.children[g.index]=t.children,g=t;k++}f+1<d&&(h.push(t={children:[],index:0}),
g.children[g.index]=t.children,g=t)}return h[0].children}function q(a,e,k,h,f,c,d,g,t){function r(){if(0<J)return J--,E>>J&1;E=a[e++];if(255===E){var U=a[e++];if(U)throw new F("unexpected marker "+(E<<8|U).toString(16));}J=7;return E>>>7}function w(U){for(;;){U=U[r()];if("number"===typeof U)return U;if("object"!==typeof U)throw new F("invalid huffman sequence");}}function v(U){for(var ea=0;0<U;)ea=ea<<1|r(),U--;return ea}function z(U){if(1===U)return 1===r()?1:-1;var ea=v(U);return ea>=1<<U-1?ea:
ea+(-1<<U)+1}function C(U,ea){var fa=w(U.huffmanTableDC);fa=0===fa?0:z(fa);U.blockData[ea]=U.pred+=fa;for(fa=1;64>fa;){var pa=w(U.huffmanTableAC),ra=pa&15;pa>>=4;if(0===ra){if(15>pa)break;fa+=16}else fa+=pa,U.blockData[ea+m[fa]]=z(ra),fa++}}function D(U,ea){var fa=w(U.huffmanTableDC);fa=0===fa?0:z(fa)<<t;U.blockData[ea]=U.pred+=fa}function y(U,ea){U.blockData[ea]|=r()<<t}function u(U,ea){if(0<O)O--;else for(var fa=c;fa<=d;){var pa=w(U.huffmanTableAC),ra=pa&15;pa>>=4;if(0===ra){if(15>pa){O=v(pa)+(1<<
pa)-1;break}fa+=16}else fa+=pa,U.blockData[ea+m[fa]]=z(ra)*(1<<t),fa++}}function B(U,ea){for(var fa=c,pa=0,ra;fa<=d;){ra=m[fa];switch(S){case 0:pa=w(U.huffmanTableAC);ra=pa&15;pa>>=4;if(0===ra)15>pa?(O=v(pa)+(1<<pa),S=4):(pa=16,S=1);else{if(1!==ra)throw new F("invalid ACn encoding");X=z(ra);S=pa?2:3}continue;case 1:case 2:U.blockData[ea+ra]?U.blockData[ea+ra]+=r()<<t:(pa--,0===pa&&(S=2===S?3:0));break;case 3:U.blockData[ea+ra]?U.blockData[ea+ra]+=r()<<t:(U.blockData[ea+ra]=X<<t,S=0);break;case 4:U.blockData[ea+
ra]&&(U.blockData[ea+ra]+=r()<<t)}fa++}4===S&&(O--,0===O&&(S=0))}var x=k.mcusPerLine,A=e,E=0,J=0,O=0,S=0,X,Y=h.length,K,P,Q,ba;g=k.progressive?0===c?0===g?D:y:0===g?u:B:C;var ca=0;k=1===Y?h[0].blocksPerLine*h[0].blocksPerColumn:x*k.mcusPerColumn;for(var ka,aa;ca<k;){var ja=f?Math.min(k-ca,f):k;for(K=0;K<Y;K++)h[K].pred=0;O=0;if(1===Y){var oa=h[0];for(ba=0;ba<ja;ba++)g(oa,64*((oa.blocksPerLine+1)*(ca/oa.blocksPerLine|0)+ca%oa.blocksPerLine)),ca++}else for(ba=0;ba<ja;ba++){for(K=0;K<Y;K++)for(oa=h[K],
ka=oa.h,aa=oa.v,P=0;P<aa;P++)for(Q=0;Q<ka;Q++)g(oa,64*((oa.blocksPerLine+1)*((ca/x|0)*oa.v+P)+(ca%x*oa.h+Q)));ca++}J=0;(oa=p(a,e))&&oa.invalid&&(e=oa.offset);oa=oa&&oa.marker;if(!oa||65280>=oa)throw new F("marker was not found");if(65488<=oa&&65495>=oa)e+=2;else break}(oa=p(a,e))&&oa.invalid&&(e=oa.offset);return e-A}function n(a,e){for(var k=e.blocksPerLine,h=e.blocksPerColumn,f=new Int16Array(64),c=0;c<h;c++)for(var d=0;d<k;d++){var g=void 0,t=void 0,r=void 0,w=void 0,v=void 0,z=void 0,C=void 0,
D=void 0,y=v=z=w=t=g=void 0,u=void 0,B=void 0,x=void 0,A=64*((e.blocksPerLine+1)*c+d),E=f,J=e.quantizationTable,O=e.blockData;if(!J)throw new F("missing required Quantization Table.");for(var S=0;64>S;S+=8)g=O[A+S],D=O[A+S+1],C=O[A+S+2],z=O[A+S+3],v=O[A+S+4],w=O[A+S+5],r=O[A+S+6],t=O[A+S+7],g*=J[S],0===(D|C|z|v|w|r|t)?(g=5793*g+512>>10,E[S]=g,E[S+1]=g,E[S+2]=g,E[S+3]=g,E[S+4]=g,E[S+5]=g,E[S+6]=g,E[S+7]=g):(D*=J[S+1],C*=J[S+2],z*=J[S+3],v*=J[S+4],w*=J[S+5],r*=J[S+6],t*=J[S+7],x=5793*g+128>>8,B=5793*
v+128>>8,u=C,y=r,v=2896*(D-t)+128>>8,t=2896*(D+t)+128>>8,z<<=4,w<<=4,x=x+B+1>>1,B=x-B,g=3784*u+1567*y+128>>8,u=1567*u-3784*y+128>>8,y=g,v=v+w+1>>1,w=v-w,t=t+z+1>>1,z=t-z,x=x+y+1>>1,y=x-y,B=B+u+1>>1,u=B-u,g=2276*v+3406*t+2048>>12,v=3406*v-2276*t+2048>>12,t=g,g=799*z+4017*w+2048>>12,z=4017*z-799*w+2048>>12,w=g,E[S]=x+t,E[S+7]=x-t,E[S+1]=B+w,E[S+6]=B-w,E[S+2]=u+z,E[S+5]=u-z,E[S+3]=y+v,E[S+4]=y-v);for(J=0;8>J;++J)g=E[J],D=E[J+8],C=E[J+16],z=E[J+24],v=E[J+32],w=E[J+40],r=E[J+48],t=E[J+56],0===(D|C|z|v|
w|r|t)?(g=5793*g+8192>>14,g=-2040>g?0:2024<=g?255:g+2056>>4,O[A+J]=g,O[A+J+8]=g,O[A+J+16]=g,O[A+J+24]=g,O[A+J+32]=g,O[A+J+40]=g,O[A+J+48]=g,O[A+J+56]=g):(x=5793*g+2048>>12,B=5793*v+2048>>12,u=C,y=r,v=2896*(D-t)+2048>>12,t=2896*(D+t)+2048>>12,x=(x+B+1>>1)+4112,B=x-B,g=3784*u+1567*y+2048>>12,u=1567*u-3784*y+2048>>12,y=g,v=v+w+1>>1,w=v-w,t=t+z+1>>1,z=t-z,x=x+y+1>>1,y=x-y,B=B+u+1>>1,u=B-u,g=2276*v+3406*t+2048>>12,v=3406*v-2276*t+2048>>12,t=g,g=799*z+4017*w+2048>>12,z=4017*z-799*w+2048>>12,w=g,g=x+t,t=
x-t,D=B+w,r=B-w,C=u+z,w=u-z,z=y+v,v=y-v,g=16>g?0:4080<=g?255:g>>4,D=16>D?0:4080<=D?255:D>>4,C=16>C?0:4080<=C?255:C>>4,z=16>z?0:4080<=z?255:z>>4,v=16>v?0:4080<=v?255:v>>4,w=16>w?0:4080<=w?255:w>>4,r=16>r?0:4080<=r?255:r>>4,t=16>t?0:4080<=t?255:t>>4,O[A+J]=g,O[A+J+8]=D,O[A+J+16]=C,O[A+J+24]=z,O[A+J+32]=v,O[A+J+40]=w,O[A+J+48]=r,O[A+J+56]=t)}return e.blockData}function p(a,e,k){var h=a.length-1;k=k<e?k:e;if(e>=h)return null;var f=a[e]<<8|a[e+1];if(65472<=f&&65534>=f)return{invalid:null,marker:f,offset:e};
for(e=a[k]<<8|a[k+1];!(65472<=e&&65534>=e);){if(++k>=h)return null;e=a[k]<<8|a[k+1]}return{invalid:f.toString(16),marker:e,offset:k}}if(!self||!self.Uint8ClampedArray)return null;var m=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);l.prototype={parse:function(a){function e(){var E=a[f]<<8|a[f+1];f+=2;return E}function k(){var E=e();E=f+E-2;var J=
p(a,E,f);J&&J.invalid&&(E=J.offset);E=a.subarray(f,E);f+=E.length;return E}function h(E){for(var J=Math.ceil(E.samplesPerLine/8/E.maxH),O=Math.ceil(E.scanLines/8/E.maxV),S=0;S<E.components.length;S++){A=E.components[S];var X=Math.ceil(Math.ceil(E.samplesPerLine/8)*A.h/E.maxH),Y=Math.ceil(Math.ceil(E.scanLines/8)*A.v/E.maxV);A.blockData=new Int16Array(64*O*A.v*(J*A.h+1));A.blocksPerLine=X;A.blocksPerColumn=Y}E.mcusPerLine=J;E.mcusPerColumn=O}var f=0,c=null,d=null,g=[],t=[],r=[],w=e();if(65496!==w)throw new F("SOI not found");
for(w=e();65497!==w;){switch(w){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var v=k();65504===w&&74===v[0]&&70===v[1]&&73===v[2]&&70===v[3]&&0===v[4]&&(c={version:{major:v[5],minor:v[6]},densityUnits:v[7],xDensity:v[8]<<8|v[9],yDensity:v[10]<<8|v[11],thumbWidth:v[12],thumbHeight:v[13],thumbData:v.subarray(14,14+3*v[12]*v[13])});65518===w&&65===v[0]&&100===
v[1]&&111===v[2]&&98===v[3]&&101===v[4]&&(d={version:v[5]<<8|v[6],flags0:v[7]<<8|v[8],flags1:v[9]<<8|v[10],transformCode:v[11]});break;case 65499:w=e()+f-2;for(var z;f<w;){var C=a[f++],D=new Uint16Array(64);if(0===C>>4)for(v=0;64>v;v++)z=m[v],D[z]=a[f++];else if(1===C>>4)for(v=0;64>v;v++)z=m[v],D[z]=e();else throw new F("DQT - invalid table spec");g[C&15]=D}break;case 65472:case 65473:case 65474:if(y)throw new F("Only single frame JPEGs supported");e();var y={};y.extended=65473===w;y.progressive=
65474===w;y.precision=a[f++];y.scanLines=e();y.samplesPerLine=e();y.components=[];y.componentIds={};v=a[f++];for(w=D=C=0;w<v;w++){z=a[f];var u=a[f+1]>>4;var B=a[f+1]&15;C<u&&(C=u);D<B&&(D=B);u=y.components.push({h:u,v:B,quantizationId:a[f+2],quantizationTable:null});y.componentIds[z]=u-1;f+=3}y.maxH=C;y.maxV=D;h(y);break;case 65476:z=e();for(w=2;w<z;){C=a[f++];D=new Uint8Array(16);for(v=u=0;16>v;v++,f++)u+=D[v]=a[f];B=new Uint8Array(u);for(v=0;v<u;v++,f++)B[v]=a[f];w+=17+u;(0===C>>4?r:t)[C&15]=b(D,
B)}break;case 65501:e();var x=e();break;case 65498:e();z=a[f++];v=[];for(w=0;w<z;w++){C=y.componentIds[a[f++]];var A=y.components[C];C=a[f++];A.huffmanTableDC=r[C>>4];A.huffmanTableAC=t[C&15];v.push(A)}w=a[f++];z=a[f++];C=a[f++];w=q(a,f,y,v,x,w,z,C>>4,C&15);f+=w;break;case 65535:255!==a[f]&&f--;break;default:if(255===a[f-3]&&192<=a[f-2]&&254>=a[f-2])f-=3;else throw new F("unknown marker "+w.toString(16));}w=e()}this.width=y.samplesPerLine;this.height=y.scanLines;this.jfif=c;this.eof=f;this.adobe=
d;this.components=[];for(w=0;w<y.components.length;w++){A=y.components[w];if(c=g[A.quantizationId])A.quantizationTable=c;this.components.push({output:n(y,A),scaleX:A.h/y.maxH,scaleY:A.v/y.maxV,blocksPerLine:A.blocksPerLine,blocksPerColumn:A.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(a,e){var k=this.width/a,h=this.height/e,f,c,d=0,g=this.components.length,t=a*e*g,r=new Uint8ClampedArray(t),w=new Uint32Array(a);for(c=0;c<g;c++){var v=this.components[c];
var z=v.scaleX*k;var C=v.scaleY*h;d=c;var D=v.output;var y=v.blocksPerLine+1<<3;for(f=0;f<a;f++)v=0|f*z,w[f]=(v&4294967288)<<3|v&7;for(z=0;z<e;z++)for(v=0|z*C,v=y*(v&4294967288)|(v&7)<<3,f=0;f<a;f++)r[d]=D[v+w[f]],d+=g}if(h=this.decodeTransform)for(c=0;c<t;)for(k=v=0;v<g;v++,c++,k+=2)r[c]=(r[c]*h[k]>>8)+h[k+1];return r},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(a){for(var e,
k,h,f=0,c=a.length;f<c;f+=3)e=a[f],k=a[f+1],h=a[f+2],a[f]=e-179.456+1.402*h,a[f+1]=e+135.459-.344*k-.714*h,a[f+2]=e-226.816+1.772*k;return a},_convertYcckToRgb:function(a){for(var e,k,h,f,c=0,d=0,g=a.length;d<g;d+=4)e=a[d],k=a[d+1],h=a[d+2],f=a[d+3],a[c++]=-122.67195406894+k*(-6.60635669420364E-5*k+4.37130475926232E-4*h-5.4080610064599E-5*e+4.8449797120281E-4*f-.154362151871126)+h*(-9.57964378445773E-4*h+8.17076911346625E-4*e-.00477271405408747*f+1.53380253221734)+e*(9.61250184130688E-4*e-.00266257332283933*
f+.48357088451265)+f*(-3.36197177618394E-4*f+.484791561490776),a[c++]=107.268039397724+k*(2.19927104525741E-5*k-6.40992018297945E-4*h+6.59397001245577E-4*e+4.26105652938837E-4*f-.176491792462875)+h*(-7.78269941513683E-4*h+.00130872261408275*e+7.70482631801132E-4*f-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*f+.25802910206845)+f*(-3.18913117588328E-4*f-.213742400323665),a[c++]=-20.810012546947+k*(-5.70115196973677E-4*k-2.63409051004589E-5*h+.0020741088115012*e-.00288260236853442*f+
.814272968359295)+h*(-1.53496057440975E-5*h-1.32689043961446E-4*e+5.60833691242812E-4*f-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*f+.116935020465145)+f*(-3.43531996510555E-4*f+.24165260232407);return a},_convertYcckToCmyk:function(a){for(var e,k,h,f=0,c=a.length;f<c;f+=4)e=a[f],k=a[f+1],h=a[f+2],a[f]=434.456-e-1.402*h,a[f+1]=119.541-e+.344*k+.714*h,a[f+2]=481.816-e-1.772*k;return a},_convertCmykToRgb:function(a){for(var e,k,h,f,c=0,d=1/255,g=0,t=a.length;g<t;g+=4)e=a[g]*d,k=a[g+
1]*d,h=a[g+2]*d,f=a[g+3]*d,a[c++]=255+e*(-4.387332384609988*e+54.48615194189176*k+18.82290502165302*h+212.25662451639585*f-285.2331026137004)+k*(1.7149763477362134*k-5.6096736904047315*h-17.873870861415444*f-5.497006427196366)+h*(-2.5217340131683033*h-21.248923337353073*f+17.5119270841813)-f*(21.86122147463605*f+189.48180835922747),a[c++]=255+e*(8.841041422036149*e+60.118027045597366*k+6.871425592049007*h+31.159100130055922*f-79.2970844816548)+k*(-15.310361306967817*k+17.575251261109482*h+131.35250912493976*
f-190.9453302588951)+h*(4.444339102852739*h+9.8632861493405*f-24.86741582555878)-f*(20.737325471181034*f+187.80453709719578),a[c++]=255+e*(.8842522430003296*e+8.078677503112928*k+30.89978309703729*h-.23883238689178934*f-14.183576799673286)+k*(10.49593273432072*k+63.02378494754052*h+50.606957656360734*f-112.23884253719248)+h*(.03296041114873217*h+115.60384449646641*f-193.58209356861505)-f*(22.33816807309886*f+180.12613974708367);return a},getData:function(a,e,k){if(4<this.numComponents)throw new F("Unsupported color mode");
a=this._getLinearizedBlockData(a,e);if(1===this.numComponents&&k){k=a.length;e=new Uint8ClampedArray(3*k);for(var h=0,f=0;f<k;f++){var c=a[f];e[h++]=c;e[h++]=c;e[h++]=c}return e}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return k?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(k)return this._convertCmykToRgb(a)}return a}};return l}()})},"esri/layers/rasterFormats/Png":function(){define(["./Zlib"],
function(F){return function(){function l(q){var n,p;this.data=q;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(p=null;;){var m=this.readUInt32();var a=q=void 0;q=[];for(a=0;4>a;++a)q.push(String.fromCharCode(this.data[this.pos++]));q=q.join("");switch(q){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=
this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(m);break;case "fcTL":p&&this.animation.frames.push(p);this.pos+=4;p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};q=this.readUInt16();m=this.readUInt16()||100;p.delay=1E3*q/m;p.disposeOp=this.data[this.pos++];p.blendOp=this.data[this.pos++];
p.data=[];break;case "IDAT":case "fdAT":"fdAT"===q&&(this.pos+=4,m-=4);q=(null!=p?p.data:void 0)||this.imgData;for(a=0;0<=m?a<m:a>m;0<=m?++a:--a)q.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(m);m=255-this.transparency.indexed.length;if(0<m)for(q=0;0<=m?q<m:q>m;0<=m?++q:--q)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(m)[0];break;case 2:this.transparency.rgb=this.read(m)}break;
case "tEXt":a=this.read(m);m=a.indexOf(0);q=String.fromCharCode.apply(String,a.slice(0,m));this.text[q]=String.fromCharCode.apply(String,a.slice(m+1));break;case "IEND":p&&this.animation.frames.push(p);a:{switch(this.colorType){case 0:case 3:case 4:p=1;break a;case 2:case 6:p=3;break a}p=void 0}this.colors=p;this.hasAlphaChannel=4===(n=this.colorType)||6===n;n=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*n;a:{switch(this.colors){case 1:n="DeviceGray";break a;case 3:n="DeviceRGB";
break a}n=void 0}this.colorSpace=n;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=m}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}l.load=function(q,n,p){"function"===typeof n&&(p=n);var m=new XMLHttpRequest;m.open("GET",q,!0);m.responseType="arraybuffer";m.onload=function(){var a=new Uint8Array(m.response||m.mozResponseArrayBuffer);a=new l(a);"function"===typeof(null!=n?n.getContext:void 0)&&a.render(n);return"function"===typeof p?p(a):
void 0};return m.send(null)};l.prototype.read=function(q){var n;var p=[];for(n=0;0<=q?n<q:n>q;0<=q?++n:--n)p.push(this.data[this.pos++]);return p};l.prototype.readUInt32=function(){var q=this.data[this.pos++]<<24;var n=this.data[this.pos++]<<16;var p=this.data[this.pos++]<<8;var m=this.data[this.pos++];return q|n|p|m};l.prototype.readUInt16=function(){var q=this.data[this.pos++]<<8;var n=this.data[this.pos++];return q|n};l.prototype.decodePixels=function(q){var n,p,m,a,e,k,h,f;null==q&&(q=this.imgData);
if(0===q.length)return new Uint8Array(0);q=new F(q);q=q.getBytes();var c=this.pixelBitlength/8;var d=c*this.width;var g=new Uint8Array(d*this.height);var t=q.length;for(p=a=e=0;a<t;){switch(q[a++]){case 0:for(m=n=0;n<d;m=n+=1)g[p++]=q[a++];break;case 1:for(m=k=0;k<d;m=k+=1){n=q[a++];var r=m<c?0:g[p-c];g[p++]=(n+r)%256}break;case 2:for(m=r=0;r<d;m=r+=1){n=q[a++];var w=(m-m%c)/c;k=e&&g[(e-1)*d+w*c+m%c];g[p++]=(k+n)%256}break;case 3:for(m=f=0;f<d;m=f+=1)n=q[a++],w=(m-m%c)/c,r=m<c?0:g[p-c],k=e&&g[(e-
1)*d+w*c+m%c],g[p++]=(n+Math.floor((r+k)/2))%256;break;case 4:for(m=f=0;f<d;m=f+=1){n=q[a++];w=(m-m%c)/c;r=m<c?0:g[p-c];0===e?k=h=0:(k=g[(e-1)*d+w*c+m%c],h=w&&g[(e-1)*d+(w-1)*c+m%c]);var v=r+k-h;m=Math.abs(v-r);w=Math.abs(v-k);v=Math.abs(v-h);r=m<=w&&m<=v?r:w<=v?k:h;g[p++]=(n+r)%256}break;default:throw Error("Invalid filter algorithm: "+q[a-1]);}e++}return g};l.prototype.decodePalette=function(){var q,n,p,m,a;var e=this.palette;var k=this.transparency.indexed||[];var h=new Uint8Array((k.length||0)+
e.length);var f=p=q=n=0;for(m=e.length;p<m;f=p+=3)h[n++]=e[f],h[n++]=e[f+1],h[n++]=e[f+2],h[n++]=null!=(a=k[q++])?a:255;return h};l.prototype.copyToImageData=function(q,n){var p,m;var a=this.colors;var e=null;var k=this.hasAlphaChannel;this.palette.length&&(e=null!=(p=this._decodedPalette)?p:this._decodedPalette=this.decodePalette(),a=4,k=!0);p=q.data||q;var h=p.length;var f=e||n;var c=m=0;if(1===a)for(;c<h;)a=e?4*n[c/4]:m,m=f[a++],p[c++]=m,p[c++]=m,p[c++]=m,p[c++]=k?f[a++]:this.transparency.grayscale&&
this.transparency.grayscale===m?0:255,m=a;else for(;c<h;)a=e?4*n[c/4]:m,p[c++]=f[a++],p[c++]=f[a++],p[c++]=f[a++],p[c++]=k?f[a++]:this.transparency.rgb&&this.transparency.rgb[1]===f[a-3]&&this.transparency.rgb[3]===f[a-2]&&this.transparency.rgb[5]===f[a-1]?0:255,m=a};l.prototype.decode=function(){var q=new Uint8Array(this.width*this.height*4);this.copyToImageData(q,this.decodePixels());return q};var b=function(q){(void 0).clearRect(0,0,q.width,q.height);(void 0).putImageData(q,0,0);q=new Image;q.src=
(void 0).toDataURL();return q};l.prototype.decodeFrames=function(q){var n,p;if(this.animation){var m=this.animation.frames;var a=[];var e=n=0;for(p=m.length;n<p;e=++n){e=m[e];var k=q.createImageData(e.width,e.height);var h=this.decodePixels(new Uint8Array(e.data));this.copyToImageData(k,h);e.imageData=k;a.push(e.image=b(k))}return a}};l.prototype.renderFrame=function(q,n){var p=this.animation.frames;var m=p[n];p=p[n-1];0===n&&q.clearRect(0,0,this.width,this.height);1===(null!=p?p.disposeOp:void 0)?
q.clearRect(p.xOffset,p.yOffset,p.width,p.height):2===(null!=p?p.disposeOp:void 0)&&q.putImageData(p.imageData,p.xOffset,p.yOffset);0===m.blendOp&&q.clearRect(m.xOffset,m.yOffset,m.width,m.height);return q.drawImage(m.image,m.xOffset,m.yOffset)};l.prototype.animate=function(q){var n,p=this;var m=0;var a=this.animation;var e=a.numFrames;var k=a.frames;var h=a.numPlays;return(n=function(){var f=m++%e;var c=k[f];p.renderFrame(q,f);if(1<e&&m/e<h)return p.animation._timeout=setTimeout(n,c.delay)})()};
l.prototype.stopAnimation=function(){var q;return clearTimeout(null!=(q=this.animation)?q._timeout:void 0)};l.prototype.render=function(q){q._png&&q._png.stopAnimation();q._png=this;q.width=this.width;q.height=this.height;q=q.getContext("2d");if(this.animation)return this.decodeFrames(q),this.animate(q);var n=q.createImageData(this.width,this.height);this.copyToImageData(n,this.decodePixels());return q.putImageData(n,0,0)};return l}()})},"esri/layers/rasterFormats/Raw":function(){define([],function(){return{decodeBIP:function(F,
l){var b=l.pixelType,q=l.bandCount,n=[],p=l.width*l.height,m=this.getBandCount(F,l);q=q||m;var a=F.byteLength-F.byteLength%(p*this._getPixelLength(b)),e=new b(F,0,p*m),k,h,f;for(k=0;k<q;k++){var c=new b(p);for(h=0;h<p;h++)c[h]=e[h*m+k];n.push(c)}a<F.byteLength-1&&(f=this._decodeMask(F.slice(a),l));return{pixels:n,maskData:f}},decodeBSQ:function(F,l){var b=l.pixelType,q=l.bandCount;if(void 0===q||null===q)q=this.getBandCount(F,l);var n=[],p=l.width*l.height,m=p*q,a=F.byteLength-F.byteLength%(p*this._getPixelLength(b));
b=new b(F,0,m);var e;for(m=0;m<q;m++)n.push(b.subarray(m*p,(m+1)*p));a<F.byteLength-1&&(e=this._decodeMask(F.slice(a),l));return{pixels:n,maskData:e}},getBandCount:function(F,l){return Math.floor(F.byteLength/(l.width*l.height*this._getPixelLength(l.pixelType)))},_getPixelLength:function(F){var l=1;switch(F){case Uint8Array:case Int8Array:case Uint8ClampedArray:l=1;break;case Uint16Array:case Int16Array:l=2;break;case Uint32Array:case Int32Array:case Float32Array:l=4;break;case Float64Array:l=8}return l},
_decodeMask:function(F,l){var b=l.width*l.height;if(8*F.byteLength<b)return null;var q=new Uint8Array(F,0,Math.ceil(b/8)),n=new Uint8Array(l.width*l.height),p=0,m=0,a=0,e=0;for(a=0;a<q.length-1;a++)for(m=q[a],e=7;0<=e;e--)n[p++]=m>>e&1;for(e=7;p<b-1;)m=q[q.length-1],n[p++]=m>>e&1,e--;return n}}})},"esri/layers/rasterFormats/TiffDecoder":function(){define(["./Jpg","./Zlib"],function(F,l){var b=function(){var m=new ArrayBuffer(4),a=new Uint8Array(m);m=new Uint32Array(m);a[0]=1;a[1]=2;a[2]=3;a[3]=4;
return 67305985===m[0]},q=function(){var m=[];m[254]="NEWSUBFILETYPE";m[255]="SUBFILETYPE";m[256]="IMAGEWIDTH";m[257]="IMAGELENGTH";m[258]="BITSPERSAMPLE";m[259]="COMPRESSION";m[262]="PHOTOMETRICINTERPRETATION";m[263]="THRESHHOLDING";m[264]="CELLWIDTH";m[265]="CELLLENGTH";m[266]="FILLORDER";m[269]="DOCUMENTNAME";m[270]="IMAGEDESCRIPTION";m[271]="MAKE";m[272]="MODEL";m[273]="STRIPOFFSETS";m[274]="ORIENTATION";m[277]="SAMPLESPERPIXEL";m[278]="ROWSPERSTRIP";m[279]="STRIPBYTECOUNTS";m[280]="MINSAMPLEVALUE";
m[281]="MAXSAMPLEVALUE";m[282]="XRESOLUTION";m[283]="YRESOLUTION";m[284]="PLANARCONFIGURATION";m[285]="PAGENAME";m[286]="XPOSITION";m[287]="YPOSITION";m[288]="FREEOFFSETS";m[289]="FREEBYTECOUNTS";m[290]="GRAYRESPONSEUNIT";m[291]="GRAYRESPONSECURVE";m[292]="T4OPTIONS";m[293]="T6OPTIONS";m[296]="RESOLUTIONUNIT";m[297]="PAGENUMBER";m[300]="COLORRESPONSEUNIT";m[301]="TRANSFERFUNCTION";m[305]="SOFTWARE";m[306]="DATETIME";m[315]="ARTIST";m[316]="HOSTCOMPUTER";m[317]="PREDICTOR";m[318]="WHITEPOINT";m[319]=
"PRIMARYCHROMATICITIES";m[320]="COLORMAP";m[321]="HALFTONEHINTS";m[322]="TILEWIDTH";m[323]="TILELENGTH";m[324]="TILEOFFSETS";m[325]="TILEBYTECOUNTS";m[326]="BADFAXLINES";m[327]="CLEANFAXDATA";m[328]="CONSECUTIVEBADFAXLINES";m[330]="SUBIFD";m[332]="INKSET";m[333]="INKNAMES";m[334]="NUMBEROFINKS";m[336]="DOTRANGE";m[337]="TARGETPRINTER";m[338]="EXTRASAMPLES";m[339]="SAMPLEFORMAT";m[340]="SMINSAMPLEVALUE";m[341]="SMAXSAMPLEVALUE";m[342]="TRANSFERRANGE";m[347]="JPEGTABLES";m[512]="JPEGPROC";m[513]="JPEGIFOFFSET";
m[514]="JPEGIFBYTECOUNT";m[515]="JPEGRESTARTINTERVAL";m[517]="JPEGLOSSLESSPREDICTORS";m[518]="JPEGPOINTTRANSFORM";m[519]="JPEGQTABLES";m[520]="JPEGDCTABLES";m[521]="JPEGACTABLES";m[529]="YCBCRCOEFFICIENTS";m[530]="YCBCRSUBSAMPLING";m[531]="YCBCRPOSITIONING";m[532]="REFERENCEBLACKWHITE";m[33550]="GEOPIXELSCALE";m[33922]="GEOTIEPOINTS";m[33432]="COPYRIGHT";m[42112]="GDAL_METADATA";m[42113]="GDAL_NODATA";m[50844]="RPCCOEFFICIENT";m[34735]="GEOKEYDIRECTORY";m[34736]="GEODOUBLEPARAMS";m[34737]="GEOASCIIPARAMS";
return m}(),n=[0,1,1,2,4,8,1,1,2,4,8,4,8],p=function(m,a){var e="UNKNOWN";3===m?e="F32":1===m?8>=a?e="U8":16>=a?e="U16":32>=a&&(e="U32"):2===m&&(8>=a?e="S8":16>=a?e="S16":32>=a&&(e="S32"));return e};return{decode:function(m){var a=new DataView(m,0,8),e=a.getUint16(0,!1);if(18761===e)var k=!0;else if(19789===e)k=!1;else throw"unexpected endianess byte";if(42!==a.getUint16(2,k))throw"unexpected tiff identifier";var h=a.getUint32(4,k);var f=k;var c,d;var g=h;for(var t=[];g;){var r=(new DataView(m,g,
2)).getUint16(0,f);var w=g+2;g=(new DataView(m,w+12*r,4)).getUint32(0,f);var v={};for(c=0;c<r;c++){var z=new DataView(m,w,12);var C=z.getUint16(0,f);var D=z.getUint16(2,f);var y=z.getUint32(4,f);var u=z.getUint32(8,f);w+=12;if(!(7===D||12<D)){var B=d={fieldTag:C,fieldType:D,fieldValueCount:y,fieldValueOffset:u},x=void 0,A=void 0,E=m,J=f,O=[],S=d.fieldType,X=d.fieldValueCount,Y=d.fieldValueOffset,K=Y,P=n[S],Q=8*P,ba=X*P,ca=X*n[S]*8;if(32>=ca)if(J||(Y>>>=32-ca),1===X)O=[Y];else for(x=0;x<X;x++)O.push(Y<<
Q*x>>>32-Q);else for(K=Y;K<Y+ba;K+=P){switch(S){case 1:A=(new DataView(E,K,1)).getUint8(0);break;case 2:A=(new DataView(E,K,1)).getUint8(0);break;case 3:A=(new DataView(E,K,2)).getUint16(0,J);break;case 4:A=(new DataView(E,K,4)).getUint32(0,J);break;case 5:A=(new DataView(E,K,4)).getUint32(0,J)/(new DataView(E,K+4,4)).getUint32(0,J);break;case 6:A=(new DataView(E,K,1)).getInt8(0);break;case 8:A=(new DataView(E,K,2)).getInt16(0,J);break;case 9:A=(new DataView(E,K,4)).getInt32(0,J);break;case 10:A=
(new DataView(E,K,4)).getInt32(0,J)/(new DataView(E,K+4,4)).getInt32(0,J);break;case 11:A=(new DataView(E,K,4)).getFloat32(0,J);break;case 12:A=(new DataView(E,K,8)).getFloat64(0,J);break;case 7:A=null;break;default:A=null}O.push(A)}if(2===S){var ka="",aa=O;O=[];for(x=0;x<aa.length;x++)0===aa[x]&&""!==ka?(O.push(ka),ka=""):ka+=String.fromCharCode(aa[x]);""===ka&&0!==O.length||O.push(ka)}B.fieldValues=O;var ja=v,oa=q[C];void 0===oa&&(oa="unknown"+C);ja[oa]={type:D,values:d.fieldValues}}}t.push(v)}if(0===
t.length)throw"no valid image file directory";var U,ea=t[0],fa=void 0===ea.GDAL_NODATA||null===ea.GDAL_NODATA?null:parseFloat(ea.GDAL_NODATA.values[0]);if(ea.TILEOFFSETS){var pa=b()===f,ra=ea.TILEOFFSETS?ea.TILEOFFSETS.values:void 0;if(void 0===ra)var va=void 0;else{var Fa=ea.TILEBYTECOUNTS.values,Ha=ea.TILEWIDTH.values[0],Ca=ea.TILELENGTH.values[0],T=ea.IMAGEWIDTH.values[0],ia=ea.IMAGELENGTH.values[0],qa=T*ia,da=ea.BITSPERSAMPLE.values[0],Z=ea.SAMPLESPERPIXEL.values[0],ma=ea.SAMPLEFORMAT?ea.SAMPLEFORMAT.values[0]:
1,I=p(ma,da);if(1!==(ea.PLANARCONFIGURATION?ea.PLANARCONFIGURATION.values[0]:1))throw"can only handle PLANARCONFIGURATION\x3d1";var M=ea.COMPRESSION?ea.COMPRESSION.values[0]:1;if(1!==M&&6!==M&&8!==M&&32946!==M)throw"this compression is not supported at this moment";if(3<ma)va=void 0;else{if(3===ma){var W=new Float32Array(qa*Z);var H=Float32Array}else 1===ma?8>=da?(W=new Uint8Array(qa*Z),H=Uint8Array):16>=da?(W=new Uint16Array(qa*Z),H=Uint16Array):32>=da&&(W=new Uint32Array(qa*Z),H=Uint32Array):2===
ma&&(8>=da?(W=new Int8Array(qa*Z),H=Int8Array):16>=da?(W=new Int16Array(qa*Z),H=Int16Array):32>=da&&(W=new Int32Array(qa*Z),H=Int32Array));var na,sa,la,Na,Ra,ua=Math.ceil(T/Ha);if(0===da%8)for(na=0;na<ra.length;na++){var Aa=Math.floor(na/ua)*Ca;var ya=na%ua*Ha;var wa=(Aa*T+ya)*Z;if("U8"===I||"S8"===I||pa)if(8===M||32946===M){var xa=new Uint8Array(m,ra[na],Fa[na]);var Ba=new l(xa);var Da=Ba.getBytes();var Ka=new ArrayBuffer(Da.length);xa=new Uint8Array(Ka);xa.set(Da)}else if(6===M){xa=new Uint8Array(m,
ra[na],Fa[na]);var Ia=new F;Ia.parse(xa);var Oa=Ia.getData(Ia.width,Ia.height);Ka=new ArrayBuffer(Oa.length);xa=new Uint8Array(Ka);xa.set(Oa)}else 1===M&&(Ka=m.slice(ra[na],ra[na]+Fa[na]));else{if(8===M||32946===M){xa=new Uint8Array(m,ra[na],Fa[na]);Ba=new l(xa);xa=Ba.getBytes();Ka=new ArrayBuffer(xa.length);var Ea=new Uint8Array(Ka)}else 1===M&&(Ka=new ArrayBuffer(Fa[na]),xa=new Uint8Array(m,ra[na],Fa[na]),Ea=new Uint8Array(Ka));switch(I){case "U16":case "S16":for(la=0;la<xa.length;la+=2)Ea[la]=
xa[la+1],Ea[la+1]=xa[la];break;case "U32":case "S32":case "F32":for(la=0;la<xa.length;la+=4)Ea[la]=xa[la+3],Ea[la+1]=xa[la+2],Ea[la+2]=xa[la+1],Ea[la+3]=xa[la]}}var La=new H(Ka);var Ma=0;var Pa=wa;var ab=Math.min(Ha,T-ya);var fb=Math.min(Ca,ia-Aa);for(Na=0;Na<fb;Na++)for(Pa=wa+Na*T*Z,Ma=Na*Ha*Z,Ra=0;Ra<ab*Z;Ra++,Pa++,Ma++)W[Pa]=La[Ma]}var gb={width:T,height:ia,pixelType:I};if(1===Z)gb.pixels=[W];else for(gb.pixels=[],na=0;na<Z;na++){var Cb=new H(qa);for(sa=0;sa<qa;sa++)Cb[sa]=W[sa*Z+na];gb.pixels.push(Cb)}va=
gb}}}else if(ea.STRIPOFFSETS){var Db=b()===f,jb=ea.STRIPOFFSETS?ea.STRIPOFFSETS.values:void 0;if(void 0===jb)va=void 0;else{var lb=ea.STRIPBYTECOUNTS.values,ub=ea.ROWSPERSTRIP.values,vb=ea.IMAGEWIDTH.values[0],zb=ea.IMAGELENGTH.values[0],Va=vb*zb,ob=ea.BITSPERSAMPLE.values[0],db=ea.SAMPLESPERPIXEL.values[0],Ab=ea.SAMPLEFORMAT?ea.SAMPLEFORMAT.values[0]:1,Fb=p(Ab,ob);if(1!==(ea.PLANARCONFIGURATION?ea.PLANARCONFIGURATION.values[0]:1))throw"can only handle PLANARCONFIGURATION\x3d1";var eb=ea.COMPRESSION?
ea.COMPRESSION.values[0]:1;if(1!==eb&&6!==eb&&8!==eb&&32946!==eb)throw"compressed tiff is not supported at this moment";if(3<Ab)va=void 0;else{if(3===Ab){var pb=new Float32Array(Va*db);var ib=Float32Array}else 1===Ab?8>=ob?(pb=new Uint8Array(Va*db),ib=Uint8Array):16>=ob?(pb=new Uint16Array(Va*db),ib=Uint16Array):32>=ob&&(pb=new Uint32Array(Va*db),ib=Uint32Array):2===Ab&&(8>=ob?(pb=new Int8Array(Va*db),ib=Int8Array):16>=ob?(pb=new Int16Array(Va*db),ib=Int16Array):32>=ob&&(pb=new Int32Array(vb*zb*db),
ib=Int32Array));var Wa,xb,Ya;if(0===ob%8)for(Wa=0;Wa<jb.length;Wa++){var Nb=Wa*ub*vb*db;if("U8"===Fb||"S8"===Fb||Db)if(8===eb||32946===eb){var Xa=new Uint8Array(m,jb[Wa],lb[Wa]);var Ib=new l(Xa);var Kb=Ib.getBytes();var hb=new ArrayBuffer(Kb.length);Xa=new Uint8Array(hb);Xa.set(Kb)}else if(6===eb){Xa=new Uint8Array(m,jb[Wa],lb[Wa]);var qb=new F;qb.parse(Xa);var Ob=qb.getData(qb.width,qb.height);hb=new ArrayBuffer(Ob.length);Xa=new Uint8Array(hb);Xa.set(Ob)}else 1===eb&&(hb=m.slice(jb[Wa],jb[Wa]+lb[Wa]));
else{if(6===eb||8===eb||32946===eb){Xa=new Uint8Array(m,jb[Wa],lb[Wa]);Ib=new l(Xa);Xa=Ib.getBytes();hb=new ArrayBuffer(Xa.length);var yb=new Uint8Array(hb)}else 1===eb&&(hb=new ArrayBuffer(lb[Wa]),Xa=new Uint8Array(m,jb[Wa],lb[Wa]),yb=new Uint8Array(hb));switch(Fb){case "U16":case "S16":for(Ya=0;Ya<Xa.length;Ya+=2)yb[Ya]=Xa[Ya+1],yb[Ya+1]=Xa[Ya];break;case "U32":case "S32":case "F32":for(Ya=0;Ya<Xa.length;Ya+=4)yb[Ya]=Xa[Ya+3],yb[Ya+1]=Xa[Ya+2],yb[Ya+2]=Xa[Ya+1],yb[Ya+3]=Xa[Ya]}}var Yb=new ib(hb);
pb.set(Yb,Nb)}var tb={width:vb,height:zb,pixelType:Fb};if(1===db)tb.pixels=[pb];else for(tb.pixels=[],Wa=0;Wa<db;Wa++){var Jb=new ib(Va);for(xb=0;xb<Va;xb++)Jb[xb]=pb[xb*db+Wa];tb.pixels.push(Jb)}va=tb}}}if(null!==fa){va.maskData=new Uint8Array(va.width*va.height);if(1E24<Math.abs(fa))for(U=0;U<va.width*va.height;U++)va.maskData[U]=1E-6>Math.abs((va.pixels[0][U]-fa)/fa)?0:1;else for(U=0;U<va.width*va.height;U++)va.maskData[U]=va.pixels[0][U]===fa?0:1;va.noDataValue=fa}return va}}})},"esri/layers/rasterLib/tile/RasterHandler":function(){define("require exports module dojo/Deferred dojo/promise/all ../../PixelBlock ../../vectorTiles/core/workers ../../vectorTiles/core/promiseUtils ../../vectorTiles/core/requireUtils ../../vectorTiles/request ../../rasterLib/function/rasterFunctionHelper ../../rasterLib/renderer/rasterRendererHelper".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f){function c(d){var g=new q;n(d).then(function(t){g.resolve()});return g.promise}return function(){function d(g){this.customModules=g&&g.customModules}d.prototype.destroy=function(){this.stop();this.customModules=this.rasterLayer=null};d.prototype.start=function(){this.stop();var g=new q,t=0,r=this.customModules?this.customModules.length+1:1,w=e.getAbsMid("esri/layers/rasterLib/tile/RasterWorker",F,b),v=m.open(w,{client:this}).then(function(z){this._connection=z;t++;
t===r&&(this._connected=!0,g.resolve())}.bind(this));this._openDL=[v];this.customModules&&this.customModules.forEach(function(z){v=m.open(z,{client:this}).then(function(C){t++;t===r&&(this._connected=!0,g.resolve())});this._openDL.push(v)}.bind(this));return this._connectionPromise=g.promise};d.prototype.stop=function(){this._openDL?this._openDL.forEach(function(g){g.isFulfilled()||g.cancel()}.bind(this)):this._connectionPromise&&!this._connectionPromise.isFulfilled()&&this._connectionPromise.cancel();
this._connection&&(this._connection.close(),this._connection=null)};d.prototype.decode=function(g){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var t={id:null};return this._connection.invoke("decode",g,[],t).then(function(r){r.targetWorker=t;return r})};d.prototype.process=function(g){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var t={id:null};g.layerId=this.rasterLayer.layerId;var r=new q;
this._connection.invoke("process",g,[],t).then(function(w){w.targetWorker=t;w.src?Object.keys(w.src).forEach(function(v){w.src[v].pixelBlock=new p(w.src[v].pixelBlock)}):w.src=null;w.pixelBlock&&(w.pixelBlock=new p(w.pixelBlock));r.resolve(w)});return r.promise};d.prototype.render=function(g){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var t={id:null};g.layerId=this.rasterLayer.layerId;return this._connection.invoke("render",g,[],t).then(function(r){r.targetWorker=
t;r.pixelBlock=r.pixelBlock?new p(r.pixelBlock):null;return r})};d.prototype.setLayer=function(g){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));this.rasterLayer=g;g=this._connection.broadcast("setLayer",g,[],{id:null});return c(g)};d.prototype.setRasterFunction=function(g){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));g=this._connection.broadcast("setRasterFunction",g,[],{id:null});return c(g)};
d.prototype.setRasterRenderer=function(g){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));g=this._connection.broadcast("setRasterRenderer",g,[],{id:null});return c(g)};return d}()})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(F,l,b){Object.defineProperty(l,"__esModule",{value:!0});for(var q in b)l.hasOwnProperty(q)||(l[q]=b[q])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),
function(F,l,b,q,n,p,m,a,e){function k(){if(t)return t;for(var r=h+f,w=[],v=function(C){var D=e.create(C).then(function(y){return g[C]=y});w.push(D)},z=0;z<r;z++)v(z);return t=q(w).then(function(){})}Object.defineProperty(l,"__esModule",{value:!0});l.Connection=m;l.RemoteClient=a;(m=navigator.hardwareConcurrency)||(m=b("safari")&&b("mac")||b("trident")?8:2);var h=b("esri-workers-debug")?1:Math.max(1,Math.ceil(m/2)),f=b("esri-workers-debug")?1:Math.max(1,Math.floor(m/2)),c=n.getLogger("esri.core.workers"),
d=0,g=[];l.initialize=function(){k()};l.open=function(r,w,v){void 0===w&&(w={});if(Array.isArray(r))return new l.Connection(r.map(function(D){return new l.RemoteClient(D,w.client)}));if("string"!==typeof r){c.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var z=r;r=w;w={client:z,strategy:v?"dedicated":"distributed"}}var C=w.strategy||"distributed";return"local"===C?p.create(function(D){F([r],function(y){D(l.RemoteClient.connect(y))})}).then(function(D){return new l.Connection([new l.RemoteClient(D,
w.client)])}):k().then(function(){if("dedicated"===C){var D=h+d++;d%=f;return g[D].open(r).then(function(y){return new l.Connection([new l.RemoteClient(y,w.client)])})}return p.all(g.map(function(y){return y.open(r)})).then(function(y){return new l.Connection(y.map(function(u){return new l.RemoteClient(u,w.client)}))})})};l.terminate=function(){for(var r=0;r<g.length;r++)g[r]&&g[r].terminate();g.length=0};var t})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],
function(F,l,b){var q={info:0,warn:1,error:2};F=function(){function n(p){void 0===p&&(p={});this.module=p.module||"";this.writer=p.writer||null;this.level=p.level||null;null!=p.enabled&&(this.enabled=!!p.enabled);n._loggers[this.module]=this;p=this.module.lastIndexOf(".");-1!==p&&(this.parent=n.getLogger(this.module.slice(0,p)))}n.prototype.log=function(p){for(var m=[],a=1;a<arguments.length;a++)m[a-1]=arguments[a];this._isEnabled()&&this._matchLevel(p)&&(a=this._inheritedWriter())&&a.apply(void 0,
[p,this.module].concat(m))};n.prototype.error=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];this.log.apply(this,["error"].concat(p))};n.prototype.warn=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];this.log.apply(this,["warn"].concat(p))};n.prototype.info=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];this.log.apply(this,["info"].concat(p))};n.prototype.getLogger=function(p){return n.getLogger(this.module+"."+p)};n.getLogger=function(p){var m=
n._loggers[p];m||(m=new n({module:p}));return m};n.prototype._parentWithMember=function(p,m){for(var a=this;a&&null==a[p];)a=a.parent;return a?a[p]:m};n.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};n.prototype._consoleWriter=function(p,m){for(var a=[],e=2;e<arguments.length;e++)a[e-2]=arguments[e];console[p].apply(console,["["+m+"]"].concat(a))};n.prototype._matchLevel=function(p){return q[this._parentWithMember("level","error")]<=q[p]};n.prototype._isEnabled=
function(){return this._parentWithMember("enabled",!0)};n._loggers={};return n}();F.getLogger("esri").level="warn";return F})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(F,l,b,q,n,p){function m(a){if(a){if("function"!==typeof a.forEach){var e=Object.keys(a),k=e.map(function(d){return a[d]});return m(k).then(function(d){var g={};e.forEach(function(t,r){return g[t]=d[r]});return g})}var h=new b,
f=[],c=a.length;0===c&&h.resolve(f);a.forEach(function(d){var g={promise:d};f.push(g);d.then(function(t){g.value=t})["catch"](function(t){g.error=t}).then(function(){--c;0===c&&h.resolve(f)})});return h.promise}}Object.defineProperty(l,"__esModule",{value:!0});l.all=function(a){return n(a)};l.filter=function(a,e){var k=a.slice();return n(a.map(function(h,f){return e(h,f)})).then(function(h){return k.filter(function(f,c){return h[c]})})};l.eachAlways=m;l.create=function(a,e){var k=new b(e);a(function(h){void 0===
h&&(h=null);return q(h).then(k.resolve)},k.reject);return k.promise};l.reject=function(a){var e=new b;e.reject(a);return e.promise};l.resolve=function(a){void 0===a&&(a=null);var e=new b;e.resolve(a);return e.promise};l.after=function(a,e){void 0===e&&(e=null);var k=0,h=new b(function(){k&&(clearTimeout(k),k=0)});k=setTimeout(function(){h.resolve(e)},a);return h.promise};l.timeout=function(a,e,k){var h=0,f=new b(a.cancel);a.then(function(c){f.isFulfilled()||(f.resolve(c),h&&(clearTimeout(h),h=0))});
a["catch"](function(c){f.isFulfilled()||(f.reject(c),h&&(clearTimeout(h),h=0))});h=setTimeout(function(){var c=k||new p("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");f.reject(c)},e);return f.promise};l.wrapCallback=function(a){var e=!1,k=new b(function(){return e=!0});a(function(h){e||k.resolve(h)});return k.promise};l.isThenable=function(a){return a&&"function"===typeof a.then};l.when=function(a){return q(a)}})},"esri/layers/vectorTiles/core/Error":function(){define(["require",
"exports","./tsSupport/extendsHelper","./lang","./Message"],function(F,l,b,q,n){F=function(p){function m(a,e,k){var h=p.call(this,a,e,k)||this;return h instanceof m?h:new m(a,e,k)}b(m,p);m.prototype.toJSON=function(){return{name:this.name,message:this.message,details:q.clone(this.details),dojoType:this.dojoType}};m.fromJSON=function(a){var e=new m(a.name,a.message,a.details);null!=a.dojoType&&(e.dojoType=a.dojoType);return e};return m}(n);F.prototype.type="error";return F})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],
function(){return function(){var F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,b){l.__proto__=b}||function(l,b){for(var q in b)b.hasOwnProperty(q)&&(l[q]=b[q])};return function(l,b){function q(){this.constructor=l}F(l,b);l.prototype=null===b?Object.create(b):(q.prototype=b.prototype,new q)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(F,l,b,q,
n,p){function m(d){return void 0!==d&&null!==d}function a(d){return m(d)?d:""}function e(d,g,t){var r=t.match(/([^\(]+)(\([^\)]+\))?/i),w=l.trim(r[1]);t=g[d];r=JSON.parse((r[2]?l.trim(r[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var v=r.utcOffset;if(-1===f.indexOf(w))w=l.getObject(w),l.isFunction(w)&&(t=w(t,d,g,r));else if("number"===typeof t||"string"===typeof t&&t&&!isNaN(Number(t)))switch(t=
Number(t),w){case "NumberFormat":d=l.mixin({},r);g=parseFloat(d.places);if(isNaN(g)||0>g)d.places=Infinity;return q.format(t,d);case "DateString":t=new Date(t);if(r.local||r.systemLocale)return r.systemLocale?t.toLocaleDateString()+(r.hideTime?"":" "+t.toLocaleTimeString()):t.toDateString()+(r.hideTime?"":" "+t.toTimeString());t=t.toUTCString();r.hideTime&&(t=t.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return t;case "DateFormat":return t=new Date(t),m(v)&&(t=b.add(t,"minute",t.getTimezoneOffset()-
v)),n.format(t,r)}return a(t)}function k(d,g){var t;if(g)for(t in d)d.hasOwnProperty(t)&&(void 0===d[t]?delete d[t]:d[t]instanceof Object&&k(d[t],!0));else for(t in d)d.hasOwnProperty(t)&&void 0===d[t]&&delete d[t];return d}function h(d){if(!d||"object"!=typeof d||l.isFunction(d))return d;if(d instanceof Int8Array||d instanceof Uint8Array||d instanceof Uint8ClampedArray||d instanceof Int16Array||d instanceof Int32Array||d instanceof Uint16Array||d instanceof Uint32Array||d instanceof Float32Array||
d instanceof Float64Array||d instanceof Date)return new d.constructor(d);if(d instanceof ArrayBuffer)return d.slice(0,d.byteLength);if("function"===typeof d.clone)d=d.clone();else if("function"===typeof d.map&&"function"===typeof d.forEach)d=d.map(h);else if("function"===typeof d.notifyChange&&"function"===typeof d.watch)d=d.clone();else{var g={},t,r={};for(t in d){var w=d[t];var v=!(t in r)||r[t]!==w;if(!(t in g)||g[t]!==w&&v)g[t]=h?h(w):w}d=g}return d}var f=["NumberFormat","DateString","DateFormat"],
c=/<\/?[^>]+>/g;return{equals:function(d,g){return d===g||"number"===typeof d&&isNaN(d)&&"number"===typeof g&&isNaN(g)||l.isFunction((d||{}).getTime)&&l.isFunction((g||{}).getTime)&&d.getTime()==g.getTime()||l.isFunction((d||{}).equals)&&d.equals(g)||l.isFunction((g||{}).equals)&&g.equals(d)||!1},mixin:l.mixin,valueOf:function(d,g){for(var t in d)if(d[t]==g)return t;return null},stripTags:function(d){if(d){var g=typeof d;if("string"===g)d=d.replace(c,"");else if("object"===g)for(var t in d)(g=d[t])&&
"string"===typeof g&&(g=g.replace(c,"")),d[t]=g}return d},substitute:function(d,g,t){if(m(t))if(l.isObject(t)){var r=t.first;var w=t.dateFormat;var v=t.numberFormat}else r=t;if(g&&"{*}"!==g)return l.replace(g,l.hitch({obj:d},function(C,D){var y=D.split(":");return 1<y.length?(D=y[0],y.shift(),e(D,this.obj,y.join(":"))):w&&-1!==(w.properties||[]).indexOf(D)?e(D,this.obj,w.formatter||"DateString"):v&&-1!==(v.properties||[]).indexOf(D)?e(D,this.obj,v.formatter||"NumberFormat"):a(this.obj[D])}));g=[];
var z;g.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+p.fieldsSummary+'"\x3e\x3ctbody\x3e');for(z in d)if(t=d[z],w&&-1!==(w.properties||[]).indexOf(z)?t=e(z,d,w.formatter||"DateString"):v&&-1!==(v.properties||[]).indexOf(z)&&(t=e(z,d,v.formatter||"NumberFormat")),g.push("\x3ctr\x3e\x3cth\x3e"+z+"\x3c/th\x3e\x3ctd\x3e"+a(t)+"\x3c/td\x3e\x3c/tr\x3e"),r)break;g.push("\x3c/tbody\x3e\x3c/table\x3e");return g.join("")},filter:function(d,g,t){g=[l.isString(d)?d.split(""):d,t||F.global,l.isString(g)?
new Function("item","index","array",g):g];t={};var r;d=g[0];for(r in d)g[2].call(g[r],d[r],r,d)&&(t[r]=d[r]);return t},startsWith:function(d,g,t){t=t||0;return d.indexOf(g,t)===t},endsWith:function(d,g,t){if("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>d.length)t=d.length;t-=g.length;d=d.indexOf(g,t);return-1!==d&&d===t},isDefined:m,fixJson:k,clone:h}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(F,l,b){return function(){function q(n,
p,m){this instanceof q&&(this.name=n,this.message=p&&b.substitute(p,m,function(a){return null==a?"":a})||"",this.details=m)}q.prototype.toString=function(){return"["+this.name+"]: "+this.message};return q}()})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports","../promiseUtils"],function(F,l,b){return function(){function q(n){this._clientIdx=0;this._clients=n}q.prototype.broadcast=function(n,p,m){for(var a=[],e=0,k=this._clients;e<k.length;e++)a.push(k[e].invoke(n,
p,m));return a};q.prototype.close=function(){for(var n=0,p=this._clients;n<p.length;n++)p[n].close();this._clients=[]};q.prototype.invoke=function(n,p,m,a){var e=a&&a.client;if(!this._clients||!this._clients.length)return b.reject(Error("Connection closed"));null!=e&&-1!==this._clients.indexOf(e)||this._clients.some(function(k){return k.isBusy()?!1:(e=k,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,e=this._clients[this._clientIdx]);n=e.invoke(n,p,m);a&&(a.client=e);return n};q.prototype.openPorts=
function(){return b.all(this._clients.map(function(n){return n.openPort()}))};return q}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(F,l,b,q,n,p){function m(d,g){d["delete"](g)}var a=p.MessageType.CLOSE,e=p.MessageType.CANCEL,k=p.MessageType.INVOKE,h=p.MessageType.RESPONSE,f=p.MessageType.OPEN_PORT,c=function(){function d(g){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=
[];this._invoke=g;this._timer=null;this._process=this._process.bind(this)}d.prototype.push=function(g){g.type===p.MessageType.CANCEL?this._cancelledJobIds.add(g.jobId):(this._invokeMessages.push(g),null===this._timer&&(this._timer=setTimeout(this._process,0)))};d.prototype.clear=function(){this._invokeMessages.length=0;this._cancelledJobIds.clear();this._timer=null};d.prototype._process=function(){this._timer=null;for(var g=0,t=this._invokeMessages;g<t.length;g++){var r=t[g];this._cancelledJobIds.has(r.jobId)||
this._invoke(r)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return d}();return function(){function d(g,t,r){this._outJobs=new Map;this._inJobs=new Map;this._queue=new c(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=t;this._port=g;this._port.addEventListener("message",this._onMessage);this._port.start();this._channel=r}d.connect=function(g){var t=new MessageChannel;g="function"===typeof g?new g:"default"in g&&"function"===typeof g["default"]?new g["default"]:
g;g.remoteClient=new d(t.port1,g,t);return t.port2};d.prototype.close=function(){this._post({type:a});this._close()};d.prototype.isBusy=function(){return 0<this._outJobs.size};d.prototype.invoke=function(g,t,r){var w=this;if(!this._port)return n.reject(new q("remote-client:port-closed","Can't invoke(), port is closed"));var v=p.newJobId(),z=new b(function(){m(w._outJobs,v);w._post({type:e,jobId:v})});this._outJobs.set(v,z);this._post({type:k,jobId:v,methodName:g},t,r);return z.promise};d.prototype.openPort=
function(){var g=this,t=p.newJobId(),r=new b(function(){m(g._outJobs,t);g._post({type:e,jobId:t})});this._outJobs.set(t,r);this._post({type:f,jobId:t});return r.promise};d.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();this._outJobs.forEach(function(g){g.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};d.prototype._onMessage=function(g){if(g=p.receiveMessage(g))switch(g.type){case h:this._onResponse(g);
break;case k:this._queue.push(g);break;case e:this._onCancel(g);break;case a:this._close();break;case f:this._onOpenPort(g)}};d.prototype._onCancel=function(g){var t=this._inJobs,r=g.jobId,w=t.get(r);this._queue.push(g);w&&(m(t,r),w.cancel())};d.prototype._onInvoke=function(g){var t=this,r=g.methodName,w=g.jobId;g=g.data;var v=this._inJobs,z=this._client,C=z[r];try{if(!C&&r&&-1!==r.indexOf("."))for(var D=r.split("."),y=0;y<D.length-1;y++)z=z[D[y]],C=z[D[y+1]];if("function"!==typeof C)throw new TypeError(r+
" is not a function");var u=C.call(z,g,this)}catch(B){this._post({type:h,jobId:w,error:p.toInvokeError(B)});return}n.isThenable(u)?(v.set(w,u),u.then(function(B){v.has(w)&&(m(v,w),t._post({type:h,jobId:w},B))})["catch"](function(B){v.has(w)&&(m(v,w),B&&"cancel"===B.dojoType||t._post({type:h,jobId:w,error:p.toInvokeError(B||{message:"Error encountered at method "+r})}))})):this._post({type:h,jobId:w},u)};d.prototype._onOpenPort=function(g){var t=new MessageChannel;new d(t.port1,this._client);this._post({type:h,
jobId:g.jobId},t.port2,[t.port2])};d.prototype._onResponse=function(g){var t=g.jobId,r=g.error;g=g.data;var w=this._outJobs;if(w.has(t)){var v=w.get(t);m(w,t);r?v.reject(q.fromJSON(JSON.parse(r))):v.resolve(g)}};d.prototype._post=function(g,t,r){return p.postMessage(this._port,g,t,r)};return d}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(F,l,b){function q(p){return p&&"object"===typeof p&&("result"in p||"transferList"in p)}Object.defineProperty(l,
"__esModule",{value:!0});(function(p){p[p.HANDSHAKE=0]="HANDSHAKE";p[p.CONFIGURE=1]="CONFIGURE";p[p.CONFIGURED=2]="CONFIGURED";p[p.OPEN=3]="OPEN";p[p.OPENED=4]="OPENED";p[p.RESPONSE=5]="RESPONSE";p[p.INVOKE=6]="INVOKE";p[p.CANCEL=7]="CANCEL";p[p.CLOSE=8]="CLOSE";p[p.OPEN_PORT=9]="OPEN_PORT"})(l.MessageType||(l.MessageType={}));var n=0;l.newJobId=function(){return n++};l.isTranferableResult=q;l.toInvokeError=function(p){return p?p.toJSON?JSON.stringify(p):JSON.stringify({name:p.name,message:p.message,
details:p.details,stack:p.stack}):null};l.postMessage=function(p,m,a,e){2===arguments.length||void 0===a&&void 0===e?p.postMessage(m):(b("esri-workers-supports-transfer-arraybuffer")||(e?(e=e.filter(function(k){return!(k instanceof ArrayBuffer)}),e.length||(e=null)):q(a)&&a.transferList&&(a.transferList=a.transferList.filter(function(k){return!(k instanceof ArrayBuffer)}),a.transferList.length||(a.transferList=null))),e?(m.data=a,p.postMessage(m,e)):q(a)?(m.data=a.result,a.transferList?p.postMessage(m,
a.transferList):p.postMessage(m)):(m.data=a,p.postMessage(m)))};l.receiveMessage=function(p){return p?(p=p.data)?"string"===typeof p?JSON.parse(p):p:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(F,l,b,q,n,p,m,a,e){var k=p.getLogger("esri.core.workers"),h=a.MessageType.CANCEL,f=a.MessageType.INVOKE,c=a.MessageType.OPEN,d=a.MessageType.OPENED,
g=a.MessageType.RESPONSE;return function(){function t(r,w){this._outJobs=new Map;this._inJobs=new Map;this.worker=r;this.id=w;r.addEventListener("message",this._onMessage.bind(this));r.addEventListener("error",function(v){v.preventDefault();k.error(v)})}t.create=function(r){return e.createWorker().then(function(w){return new t(w,r)})};t.prototype.terminate=function(){this.worker.terminate()};t.prototype.open=function(r){var w=this,v=a.newJobId(),z=new b(function(C){w._outJobs["delete"](v);w._post({type:h,
jobId:v})});this._outJobs.set(v,z);this._post({type:c,jobId:v,modulePath:r});return z.promise};t.prototype._onMessage=function(r){if(r=a.receiveMessage(r))switch(r.type){case d:case g:this._onResponse(r);break;case h:this._onCancel(r);break;case f:this._onInvoke(r)}};t.prototype._onCancel=function(r){(r=this._inJobs.get(r.jobId))&&r.cancel()};t.prototype._onInvoke=function(r){var w=this,v=r.methodName,z=r.jobId;r=r.data;var C=this._inJobs,D=q.workerMessages[v];try{if("function"!==typeof D)throw new TypeError(v+
" is not a function");var y=D.call(null,r)}catch(u){this._post({type:g,jobId:z,error:a.toInvokeError(u)});return}m.isThenable(y)?(C.set(z,y),y.then(function(u){C["delete"](z);w._post({type:g,jobId:z},u)})["catch"](function(u){C["delete"](z);u||(u={message:"Error encountered at method"+v});u.dojoType&&"cancel"===u.dojoType||w._post({type:g,jobId:z,error:a.toInvokeError(u)})})):this._post({type:g,jobId:z},y)};t.prototype._onResponse=function(r){var w=r.jobId,v=r.error;r=r.data;var z=this._outJobs.get(w);
z&&(this._outJobs["delete"](w),v?z.reject(n.fromJSON(JSON.parse(v))):z.resolve(r))};t.prototype._post=function(r,w,v){return a.postMessage(this.worker,r,w,v)};return t}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(F,l,b,q){return function(){function n(){}Object.defineProperty(n,"id",{get:function(){return b.id?q:null},enumerable:!0,configurable:!0});n.workerMessages={};return n}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require",
"exports","esri/IdentityManager"],function(F,l,b){Object.defineProperty(l,"__esModule",{value:!0});l.findCredential=function(q){return b.findCredential(q)}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(F,l,b,q){F=new F;l.id=q.safeMixin(F,b);return l.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t){l=l([g],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(r){n.mixin(this,r);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(r,w,v){this._nls||(this._nls=t.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var z=this._loginDialog,C=v&&v.error,D=v&&v.token,y=new q(function(){z.onCancel()});if(z.open)return r=Error("BUSY"),r.name="identity-manager:busy",r.code="IdentityManager.1",r.log=!!b.isDebug,y.errback(r),y;c.hide(z.errMsg_);C&&403==C.code&&D&&(m.set(z.errMsg_,"innerHTML",this._nls.forbidden),
c.show(z.errMsg_));z.dfd_=y;z.serverInfo_=w;z.resUrl_=r;z.admin_=v&&v.isAdmin;m.set(z.resLink_,{title:r,innerHTML:"("+(this.getResourceName(r)||this._nls.lblItem)+")"});m.set(z.serverLink_,{title:w.server,innerHTML:(-1!==w.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":w.server)+" "});z.txtPwd_.set("value","");z.show();return y},_createLoginDialog:function(){var r=this._nls,w=f.substitute(r,this._dialogContent);w=f.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},w);var v=new k({title:r.title,content:w,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(z){z.charOrCode===a.ENTER&&this.execute_()},execute_:function(){var z=this.txtUser_.get("value"),C=this.txtPwd_.get("value"),D=this.dfd_,y=this;if(this.form_.validate()&&z&&C){this.btnSubmit_.set("label",r.lblSigning);var u=h.id.findCredential(y.resUrl_,z),B=function(x){y.btnSubmit_.set("label",
r.lblOk);y.btnSubmit_.set("disabled",!1);c.hide(y.errMsg_);y.hide();k._DialogLevelManager.hide(y);var A=y.serverInfo_;y.dfd_=y.serverInfo_=y.generateDfd_=y.resUrl_=null;var E=u;if(x){var J=x.token;var O=f.isDefined(x.expires)?Number(x.expires):null;var S=!!x.ssl;E?(E.userId=z,E.token=J,E.expires=O,E.validity=x.validity,E.ssl=S,E.creationTime=(new Date).getTime()):E=new d({userId:z,server:A.server,token:J,expires:O,ssl:S,isAdmin:y.admin_,validity:x.validity})}D.callback(E)};u&&!u._enqueued?B():(y.btnSubmit_.set("disabled",
!0),y.generateDfd_=h.id.generateToken(this.serverInfo_,{username:z,password:C},{isAdmin:this.admin_}).addCallback(B).addErrback(function(x){y.btnSubmit_.set("disabled",!1);y.generateDfd_=null;y.btnSubmit_.set("label",r.lblOk);m.set(y.errMsg_,"innerHTML",x&&x.code?r.invalidUser:r.noAuthService);c.show(y.errMsg_)}))}},cancel_:function(){v.generateDfd_&&v.generateDfd_.cancel();var z=v.dfd_,C=v.resUrl_,D=v.serverInfo_;v.btnSubmit_.set("disabled",!1);v.dfd_=v.serverInfo_=v.generateDfd_=v.resUrl_=null;
c.hide(v.errMsg_);k._DialogLevelManager.hide(v);v.esriIdMgr_.onDialogCancel({resourceUrl:C,serverInfo:D});C=Error("ABORTED");C.name="identity-manager:user-aborted";C.code="IdentityManager.2";C.log=!!b.isDebug;z.errback(C)}});w=v.domNode;v.form_=e.byNode(F.query(".esriIdForm",w)[0]);v.txtUser_=e.byNode(F.query(".esriIdUser",w)[0]);v.txtPwd_=e.byNode(F.query(".esriIdPwd",w)[0]);v.btnSubmit_=e.byNode(F.query(".esriIdSubmit",w)[0]);v.btnCancel_=e.byNode(F.query(".esriIdCancel",w)[0]);v.resLink_=F.query(".resLink",
w)[0];v.serverLink_=F.query(".serverLink",w)[0];v.errMsg_=F.query(".esriErrorMsg",w)[0];v.connect(v.txtUser_,"onKeyPress",v.keypressed_);v.connect(v.txtPwd_,"onKeyPress",v.keypressed_);v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v}});return h.IdentityManagerDialog=h.IdentityManager=l})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y,u,B,x,A,E,J,O,S){function X(){}var Y=new n;Y.resolve(!0);D=q("dijit._DialogBase"+(t("dojo-bidi")?"_NoBidi":""),[u,x,A,B],{templateString:S,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:D.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(ba){this._set("draggable",ba)},maxRatio:.9,
closable:!0,_setClosableAttr:function(ba){this.closeButtonNode.style.display=ba?"":"none";this._set("closable",ba)},postMixInProperties:function(){var ba=h.getLocalization("dijit","common");c.mixin(this,ba);this.inherited(arguments)},postCreate:function(){e.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);b.after(this,"onExecute",c.hitch(this,"hide"),!0);b.after(this,"onCancel",c.hitch(this,"hide"),!0);d(this.closeButtonNode,
r.press,function(ba){ba.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&P.isTop(this)&&(this._getFocusItems(),C.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();C.focus(this._firstFocusItem)},_endDrag:function(){var ba=a.position(this.domNode),ca=w.getBox(this.ownerDocument);ba.y=Math.min(Math.max(ba.y,0),ca.h-ba.h);ba.x=Math.min(Math.max(ba.x,0),ca.w-ba.w);this._relativePosition=ba;this._position()},
_setup:function(){var ba=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==t("ie")?z:v)(ba,{handle:this.titleBar}),b.after(this._moveable,"onMoveStop",c.hitch(this,"_endDrag"),!0)):m.add(ba,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":l.map(this["class"].split(/\s/),function(ca){return ca+"_underlay"}).join(" "),_onKeyDown:c.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!m.contains(this.ownerDocumentBody,
"dojoMove")){var ba=this.domNode,ca=w.getBox(this.ownerDocument),ka=this._relativePosition,aa=a.position(ba);e.set(ba,{left:Math.floor(ca.l+(ka?Math.min(ka.x,ca.w-aa.w):(ca.w-aa.w)/2))+"px",top:Math.floor(ca.t+(ka?Math.min(ka.y,ca.h-aa.h):(ca.h-aa.h)/2))+"px"})}},_onKey:function(ba){if(ba.keyCode==f.TAB){this._getFocusItems();var ca=ba.target;this._firstFocusItem==this._lastFocusItem?(ba.stopPropagation(),ba.preventDefault()):ca==this._firstFocusItem&&ba.shiftKey?(C.focus(this._lastFocusItem),ba.stopPropagation(),
ba.preventDefault()):ca!=this._lastFocusItem||ba.shiftKey||(C.focus(this._firstFocusItem),ba.stopPropagation(),ba.preventDefault())}else this.closable&&ba.keyCode==f.ESCAPE&&(this.onCancel(),ba.stopPropagation(),ba.preventDefault())},show:function(){if(this.open)return Y.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),P.hide(this));var ba=w.get(this.ownerDocument);this._modalconnects.push(d(ba,
"scroll",c.hitch(this,"resize",null)));this._modalconnects.push(d(this.domNode,"keydown",c.hitch(this,"_onKey")));e.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new n(c.hitch(this,function(){ca.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,X);ba=this._fadeInDeferred.promise;var ca=k.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:c.hitch(this,function(){P.show(this,this.underlayAttrs)}),
onEnd:c.hitch(this,function(){this.autofocus&&P.isTop(this)&&(this._getFocusItems(),C.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return ba},hide:function(){if(!this._alreadyInitialized||!this.open)return Y.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new n(c.hitch(this,function(){ca.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,X);this._fadeOutDeferred.then(c.hitch(this,"onHide"));
var ba=this._fadeOutDeferred.promise;var ca=k.fadeOut({node:this.domNode,duration:this.duration,onEnd:c.hitch(this,function(){this.domNode.style.display="none";P.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var ka;ka=this._modalconnects.pop();)ka.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return ba},resize:function(ba){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!ba){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),l.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(ja){ja&&e.set(ja,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var ca=w.getBox(this.ownerDocument);ca.w*=this.maxRatio;ca.h*=this.maxRatio;var ka=a.position(this.domNode);
this._shrunk=!1;ka.w>=ca.w&&(ba={w:ca.w},a.setMarginBox(this.domNode,ba),ka=a.position(this.domNode),this._shrunk=!0);ka.h>=ca.h&&(ba||(ba={w:ka.w}),ba.h=ca.h,this._shrunk=!0);ba&&(ba.w||(ba.w=ka.w),ba.h||(ba.h=ka.h))}if(ba){a.setMarginBox(this.domNode,ba);ca=[];this.titleBar&&ca.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&ca.push({domNode:this.actionBarNode,region:"bottom"});ka={domNode:this.containerNode,region:"center"};ca.push(ka);var aa=O.marginBox2contentBox(this.domNode,
ba);O.layoutChildren(this.domNode,aa,ca);this._singleChild?(ca=O.marginBox2contentBox(this.containerNode,ka),this._singleChild.resize({w:ca.w,h:ca.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();t("touch")||ba||this._position()}},_layoutChildren:function(){l.forEach(this.getChildren(),function(ba){ba.resize&&ba.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();
this._moveable&&this._moveable.destroy();for(var ba;ba=this._modalconnects.pop();)ba.remove();P.hide(this);this.inherited(arguments)}});t("dojo-bidi")&&(D=q("dijit._DialogBase",D,{_setTitleAttr:function(ba){this._set("title",ba);this.titleNode.innerHTML=ba;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(ba){this._created&&this.textDir!=ba&&(this._set("textDir",ba),this.set("title",this.title))}}));var K=q("dijit.Dialog",[J,D],{});K._DialogBase=D;var P=K._DialogLevelManager={_beginZIndex:950,
show:function(ba,ca){Q[Q.length-1].focus=C.curNode;var ka=Q[Q.length-1].dialog?Q[Q.length-1].zIndex+2:K._DialogLevelManager._beginZIndex;e.set(ba.domNode,"zIndex",ka);E.show(ca,ka-1);Q.push({dialog:ba,underlayAttrs:ca,zIndex:ka})},hide:function(ba){if(Q[Q.length-1].dialog==ba){Q.pop();var ca=Q[Q.length-1];1==Q.length?E.hide():E.show(ca.underlayAttrs,ca.zIndex-1);if(ba.refocus&&(ba=ca.focus,!ca.dialog||ba&&p.isDescendant(ba,ca.dialog.domNode)||(ca.dialog._getFocusItems(),ba=ca.dialog._firstFocusItem),
ba))try{ba.focus()}catch(ka){}}else ca=l.indexOf(l.map(Q,function(ka){return ka.dialog}),ba),-1!=ca&&Q.splice(ca,1)},isTop:function(ba){return Q[Q.length-1].dialog==ba}},Q=K._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];C.watch("curNode",function(ba,ca,ka){ba=Q[Q.length-1].dialog;if(ka&&ba&&!ba._fadeOutDeferred&&ka.ownerDocument==ba.ownerDocument){do if(ka==ba.domNode||m.contains(ka,"dijitPopup"))return;while(ka=ka.parentNode);ba.focus()}});t("dijit-legacy-requires")&&g(0,function(){F(["dijit/TooltipDialog"])});
return K})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(F,l){var b=l.prototype.onMove;return F("dojo.dnd.TimedMoveable",l,{timeout:40,constructor:function(q,n){n||(n={});n.timeout&&"number"==typeof n.timeout&&0<=n.timeout&&(this.timeout=n.timeout)},onMoveStop:function(q){q._timer&&(clearTimeout(q._timer),b.call(this,q,q._leftTop));l.prototype.onMoveStop.apply(this,arguments)},onMove:function(q,n){q._leftTop=n;if(!q._timer){var p=this;q._timer=setTimeout(function(){q._timer=
null;b.call(p,q,q._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(F,l,b,q,n,p){return l("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(m){var a=[];F.forEach(m||this.getChildren(),function(e){"value"in e?a.push(e):a=a.concat(this._getDescendantFormWidgets(e.getChildren()))},this);return a},reset:function(){F.forEach(this._getDescendantFormWidgets(),
function(m){m.reset&&m.reset()})},validate:function(){var m=!1;return F.every(F.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var e=a.disabled||!a.validate||a.validate();e||m||(p.scrollIntoView(a.containerNode||a.domNode),a.focus(),m=!0);return e}),function(a){return a})},setValues:function(m){b.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",m)},_setValueAttr:function(m){var a={};F.forEach(this._getDescendantFormWidgets(),
function(f){f.name&&(a[f.name]||(a[f.name]=[])).push(f)});for(var e in a)if(a.hasOwnProperty(e)){var k=a[e],h=q.getObject(e,!1,m);void 0!==h&&(h=[].concat(h),"boolean"==typeof k[0].checked?F.forEach(k,function(f){f.set("value",-1!=F.indexOf(h,f._get("value")))}):k[0].multiple?k[0].set("value",h):F.forEach(k,function(f,c){f.set("value",h[c])}))}},getValues:function(){b.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var m=
{};F.forEach(this._getDescendantFormWidgets(),function(a){var e=a.name;if(e&&!a.disabled){var k=a.get("value");"boolean"==typeof a.checked?/Radio/.test(a.declaredClass)?!1!==k?q.setObject(e,k,m):(k=q.getObject(e,!1,m),void 0===k&&q.setObject(e,null,m)):(a=q.getObject(e,!1,m),a||(a=[],q.setObject(e,a,m)),!1!==k&&a.push(k)):(a=q.getObject(e,!1,m),"undefined"!=typeof a?q.isArray(a)?a.push(k):q.setObject(e,[a,k],m):q.setObject(e,k,m))}});return m},isValid:function(){return""==this.state},onValidStateChange:function(){},
_getState:function(){var m=F.map(this._descendants,function(a){return a.get("state")||""});return 0<=F.indexOf(m,"Error")?"Error":0<=F.indexOf(m,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(m){this._descendants=this._getDescendantFormWidgets();F.forEach(this._descendants,function(a){a._started||a.startup()});m||this._onChildChange()},_onChildChange:function(m){m&&"state"!=m&&"disabled"!=m||this._set("state",this._getState());m&&"value"!=m&&"disabled"!=m&&
"checked"!=m||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var m=this;this.own(n(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(a){a.target!=m.domNode&&
m._onChildChange(a.type.replace("attrmodified-",""))}));this.watch("state",function(a,e,k){this.onValidStateChange(""==k)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(F,l){return F("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var b=l._getTabNavigable(this.domNode);
this._firstFocusItem=b.lowest||b.first||this.closeButtonNode||this.domNode;this._lastFocusItem=b.last||b.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(F,l,b,q,n,p,m,a,e,k,h,f){var c=F("dijit.DialogUnderlay",[a,e],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(d){q.set(this.node,"id",d+"_underlay");this._set("dialogId",d)},_setClassAttr:function(d){this.node.className="dijitDialogUnderlay "+d;this._set("class",d)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(p(this.domNode,"keydown",l.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var d=this.node.style,g=this.domNode.style;g.display="none";var t=m.getBox(this.ownerDocument);g.top=
t.t+"px";g.left=t.l+"px";d.width=t.w+"px";d.height=t.h+"px";g.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new k(this.domNode);var d=m.get(this.ownerDocument);this._modalConnects=[h.on("resize",l.hitch(this,"layout")),p(d,"scroll",l.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});c.show=function(d,g){var t=c._singleton;!t||t._destroyed?t=f._underlay=c._singleton=new c(d):d&&t.set(d);n.set(t.domNode,"zIndex",g);t.open||t.show()};c.hide=function(){var d=c._singleton;d&&!d._destroyed&&d.hide()};return c})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t){return e("dijit.layout.ContentPane",[b,q,n],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:F._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(r,w,v){var z=new v(r,w);return!z.href&&z._contentSetter&&z._contentSetter.parseDeferred&&!z._contentSetter.parseDeferred.isFulfilled()?z._contentSetter.parseDeferred.then(function(){return z}):z},create:function(r,w){if(!(r&&r.template||!w||"href"in r||"content"in r)){w=h.byId(w);for(var v=w.ownerDocument.createDocumentFragment();w.firstChild;)v.appendChild(w.firstChild);
r=l.delegate(r,{content:v})}this.inherited(arguments,[r,w])},postMixInProperties:function(){this.inherited(arguments);var r=g.getLocalization("dijit","loading",this.lang);this.loadingMessage=p.substitute(this.loadingMessage,r);this.errorMessage=p.substitute(this.errorMessage,r)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&a.forEach(this._contentSetter.parseResults,
function(r){r._started||r._destroyed||!l.isFunction(r.startup)||(r.startup(),r._started=!0)},this)},_startChildren:function(){a.forEach(this.getChildren(),function(r){r._started||r._destroyed||!l.isFunction(r.startup)||(r.startup(),r._started=!0)});this._contentSetter&&a.forEach(this._contentSetter.parseResults,function(r){r._started||r._destroyed||!l.isFunction(r.startup)||(r.startup(),r._started=!0)},this)},setHref:function(r){F.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",r)},_setHrefAttr:function(r){this.cancel();this.onLoadDeferred=new k(l.hitch(this,"cancel"));this.onLoadDeferred.then(l.hitch(this,"onLoad"));this._set("href",r);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(r){F.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",r)},_setContentAttr:function(r){this._set("href",
"");this.cancel();this.onLoadDeferred=new k(l.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(l.hitch(this,"onLoad"));this._setContent(r||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(r){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new k(l.hitch(this,"cancel"));this.onLoadDeferred.then(l.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var r=this,w={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
l.isObject(this.ioArgs)&&l.mixin(w,this.ioArgs);var v=this._xhrDfd=(this.ioMethod||d.get)(w),z;v.then(function(C){z=C;try{return r._isDownloaded=!0,r._setContent(C,!1)}catch(D){r._onError("Content",D)}},function(C){v.canceled||r._onError("Download",C);delete r._xhrDfd;return C}).then(function(){r.onDownloadEnd();delete r._xhrDfd;return z});delete this._hrefChanged},_onLoadHandler:function(r){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(r)}catch(w){}},_onUnloadHandler:function(){this._set("isLoaded",
!1);try{this.onUnload()}catch(r){}},destroyDescendants:function(r){this.isLoaded&&this._onUnloadHandler();var w=this._contentSetter;a.forEach(this.getChildren(),function(v){v.destroyRecursive?v.destroyRecursive(r):v.destroy&&v.destroy(r);v._destroyed=!0});w&&(a.forEach(w.parseResults,function(v){v._destroyed||(v.destroyRecursive?v.destroyRecursive(r):v.destroy&&v.destroy(r),v._destroyed=!0)}),delete w.parseResults);r||c.empty(this.containerNode);delete this._singleChild},_setContent:function(r,w){r=
this.preprocessContent(r);this.destroyDescendants();var v=this._contentSetter;v&&v instanceof m._ContentSetter||(v=this._contentSetter=new m._ContentSetter({node:this.containerNode,_onError:l.hitch(this,this._onError),onContentError:l.hitch(this,function(D){D=this.onContentError(D);try{this.containerNode.innerHTML=D}catch(y){}})}));var z=l.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!r.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,
lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});z=v.set(l.isObject(r)&&r.domNode?r.domNode:r,z);var C=this;return t(z&&z.then?z:v.parseDeferred,function(){delete C._contentSetterParams;w||(C._started&&(C._startChildren(),C._scheduleLayout()),C._onLoadHandler(r))})},preprocessContent:function(r){return r},_onError:function(r,w,v){this.onLoadDeferred.reject(w);r=this["on"+r+"Error"].call(this,w);v||r&&this._setContent(r,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},
onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(F,l,b,q,n,p,m,a,e,k){return l("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var h=this.getParent();
this._childOfLayoutWidget=h&&h.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(e.on("resize",p.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var h=[],f=!1;m("\x3e *",this.containerNode).some(function(c){var d=a.byNode(c);d&&d.resize?h.push(d):!/script|link|style/i.test(c.nodeName)&&c.offsetHeight&&(f=!0)});this._singleChild=1!=h.length||f?null:h[0];b.toggle(this.containerNode,
this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(h,f){this._resizeCalled=!0;this._scheduleLayout(h,f)},_scheduleLayout:function(h,f){this._isShown()?this._layout(h,f):(this._needLayout=!0,this._changeSize=h,this._resultSize=f)},_layout:function(h,f){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();h&&q.setMarginBox(this.domNode,h);var c=this.containerNode;if(c===this.domNode){var d=f||{};p.mixin(d,h||{});"h"in d&&"w"in d||(d=p.mixin(q.getMarginBox(c),d));this._contentBox=
k.marginBox2contentBox(c,d)}else this._contentBox=q.getContentBox(c);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var h=this._contentBox||q.getContentBox(this.containerNode);this._singleChild.resize({w:h.w,h:h.h})}else{h=this.getChildren();for(var f,c=0;f=h[c++];)f.resize&&f.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;
var h=this.domNode,f=this.domNode.parentNode;return"none"!=h.style.display&&"hidden"!=h.style.visibility&&!b.contains(h,"dijitHidden")&&f&&f.style&&"none"!=f.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(F,l,b,q,n){function p(e){return e.substring(0,1).toUpperCase()+
e.substring(1)}function m(e,k){var h=e.resize?e.resize(k):b.setMarginBox(e.domNode,k);h?n.mixin(e,h):(n.mixin(e,b.getMarginBox(e.domNode)),n.mixin(e,k))}var a={marginBox2contentBox:function(e,k){var h=q.getComputedStyle(e),f=b.getMarginExtents(e,h),c=b.getPadBorderExtents(e,h);return{l:q.toPixelValue(e,h.paddingLeft),t:q.toPixelValue(e,h.paddingTop),w:k.w-(f.w+c.w),h:k.h-(f.h+c.h)}},layoutChildren:function(e,k,h,f,c){k=n.mixin({},k);l.add(e,"dijitLayoutContainer");h=F.filter(h,function(d){return"center"!=
d.region&&"client"!=d.layoutAlign}).concat(F.filter(h,function(d){return"center"==d.region||"client"==d.layoutAlign}));F.forEach(h,function(d){var g=d.domNode,t=d.region||d.layoutAlign;if(!t)throw Error("No region setting for "+d.id);var r=g.style;r.left=k.l+"px";r.top=k.t+"px";r.position="absolute";l.add(g,"dijitAlign"+p(t));g={};f&&f==d.id&&(g["top"==d.region||"bottom"==d.region?"h":"w"]=c);"leading"==t&&(t=d.isLeftToRight()?"left":"right");"trailing"==t&&(t=d.isLeftToRight()?"right":"left");"top"==
t||"bottom"==t?(g.w=k.w,m(d,g),k.h-=d.h,"top"==t?k.t+=d.h:r.top=k.t+k.h+"px"):"left"==t||"right"==t?(g.h=k.h,m(d,g),k.w-=d.w,"left"==t?k.l+=d.w:r.left=k.l+k.w+"px"):"client"!=t&&"center"!=t||m(d,k)})}};n.setObject("dijit.layout.utils",a);return a})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(F,l,b,q,n,p,m){var a=0,e={_secureForInnerHtml:function(k){return k.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")},_emptyNode:p.empty,_setNodeContent:function(k,h){p.empty(k);if(h)if("number"==typeof h&&(h=h.toString()),"string"==typeof h&&(h=p.toDom(h,k.ownerDocument)),!h.nodeType&&l.isArrayLike(h))for(var f=h.length,c=0;c<h.length;c=f==h.length?c+1:0)p.place(h[c],k,"last");else p.place(h,k,"last");return k},_ContentSetter:q("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:F._scopeName,startup:!0,constructor:function(k,h){l.mixin(this,
k||{});h=this.node=n.byId(this.node||h);this.id||(this.id=["Setter",h?h.id||h.tagName:"",a++].join("_"))},set:function(k,h){void 0!==k&&(this.content=k);"number"==typeof k&&(k=k.toString());h&&this._mixin(h);this.onBegin();this.setContent();var f=this.onEnd();return f&&f.then?f:this.node},setContent:function(){var k=this.node;if(!k)throw Error(this.declaredClass+": setContent given no node");try{k=e._setNodeContent(k,this.content)}catch(f){var h=this.onContentError(f);try{k.innerHTML=h}catch(c){}}this.node=
k},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(b.forEach(this.parseResults,function(k){k.destroy&&k.destroy()}),delete this.parseResults);p.empty(this.node)},onBegin:function(){var k=this.content;if(l.isString(k)&&(this.cleanContent&&(k=e._secureForInnerHtml(k)),this.extractContent)){var h=k.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);h&&(k=h[1])}this.empty();this.content=
k;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(k){return"Error occurred setting content: "+k},onExecError:function(k){return"Error occurred executing scripts: "+k},_mixin:function(k){var h={},f;for(f in k)f in h||(this[f]=k[f])},_parse:function(){var k=this.node;try{var h={};b.forEach(["dir","lang","textDir"],function(c){this[c]&&
(h[c]=this[c])},this);var f=this;this.parseDeferred=m.parse({rootNode:k,noStart:!this.startup,inherited:h,scope:this.parserScope}).then(function(c){return f.parseResults=c},function(c){f._onError("Content",c,"Error parsing in _ContentSetter#"+f.id)})}catch(c){this._onError("Content",c,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(k,h,f){k=this["on"+k+"Error"].call(this,h);f||k&&e._setNodeContent(this.node,k,!0)}}),set:function(k,h,f){void 0==h&&(h="");"number"==typeof h&&(h=h.toString());
return f?(new e._ContentSetter(l.mixin(f,{content:h,node:k}))).set():e._setNodeContent(k,h,!0)}};l.setObject("dojo.html",e);return e})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t){function r(D){return eval("("+D+")")}function w(D){var y=D._nameCaseMap,u=D.prototype;if(!y||y._extendCnt<
z){y=D._nameCaseMap={};for(var B in u)"_"!==B.charAt(0)&&(y[B.toLowerCase()]=B);y._extendCnt=z}return y}function v(D,y){y||(y=F);var u=y._dojoParserCtorMap||(y._dojoParserCtorMap={}),B=D.join();if(!u[B]){for(var x=[],A=0,E=D.length;A<E;A++){var J=D[A];x[x.length]=u[J]=u[J]||b.getObject(J)||~J.indexOf("/")&&y(J)}A=x.shift();u[B]=x.length?A.createSubclass?A.createSubclass(x):A.extend.apply(A,x):A}return u[B]}new Date("X");var z=0;e.after(b,"extend",function(){z++},!0);var C={_clearCache:function(){z++;
_ctorMap={}},_functionFromScript:function(D,y){var u="",B="",x=D.getAttribute(y+"args")||D.getAttribute("args"),A=D.getAttribute("with");x=(x||"").split(/\s*,\s*/);A&&A.length&&q.forEach(A.split(/\s*,\s*/),function(E){u+="with("+E+"){";B+="}"});return new Function(x,u+D.innerHTML+B)},instantiate:function(D,y,u){y=y||{};u=u||{};var B=(u.scope||l._scopeName)+"Type",x="data-"+(u.scope||l._scopeName)+"-",A=x+"type",E=x+"mixins",J=[];q.forEach(D,function(O){var S=B in y?y[B]:O.getAttribute(A)||O.getAttribute(B);
if(S){var X=O.getAttribute(E);S=X?[S].concat(X.split(/\s*,\s*/)):[S];J.push({node:O,types:S})}});return this._instantiate(J,y,u)},_instantiate:function(D,y,u,B){function x(A){y._started||u.noStart||q.forEach(A,function(E){"function"!==typeof E.startup||E._started||E.startup()});return A}D=q.map(D,function(A){var E=A.ctor||v(A.types,u.contextRequire);if(!E)throw Error("Unable to resolve constructor for: '"+A.types.join()+"'");return this.construct(E,A.node,y,u,A.scripts,A.inherited)},this);return B?
k(D).then(x):x(D)},construct:function(D,y,u,B,x,A){function E(ea){Q&&b.setObject(Q,ea);for(K=0;K<aa.length;K++)e[aa[K].advice||"after"](ea,aa[K].method,b.hitch(ea,aa[K].func),!0);for(K=0;K<ja.length;K++)ja[K].call(ea);for(K=0;K<oa.length;K++)ea.watch(oa[K].prop,oa[K].func);for(K=0;K<U.length;K++)g(ea,U[K].event,U[K].func);return ea}var J=D&&D.prototype;B=B||{};var O={};B.defaults&&b.mixin(O,B.defaults);A&&b.mixin(O,A);if(c("dom-attributes-explicit"))var S=y.attributes;else c("dom-attributes-specified-flag")?
S=q.filter(y.attributes,function(ea){return ea.specified}):(A=(/^input$|^img$/i.test(y.nodeName)?y:y.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),S=q.map(A.split(/\s+/),function(ea){var fa=ea.toLowerCase();return{name:ea,value:"LI"==y.nodeName&&"value"==ea||"enctype"==fa?y.getAttribute(fa):y.getAttributeNode(fa).value}}));var X=B.scope||l._scopeName;A="data-"+X+"-";var Y={};"dojo"!==X&&(Y[A+"props"]="data-dojo-props",
Y[A+"type"]="data-dojo-type",Y[A+"mixins"]="data-dojo-mixins",Y[X+"type"]="dojotype",Y[A+"id"]="data-dojo-id");var K=0,P;X=[];for(var Q,ba;P=S[K++];){var ca=P.name,ka=ca.toLowerCase();P=P.value;switch(Y[ka]||ka){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":ba=P;break;case "data-dojo-id":case "jsid":Q=P;break;case "data-dojo-attach-point":case "dojoattachpoint":O.dojoAttachPoint=P;break;case "data-dojo-attach-event":case "dojoattachevent":O.dojoAttachEvent=
P;break;case "class":O["class"]=y.className;break;case "style":O.style=y.style&&y.style.cssText;break;default:if(ca in J||(ca=w(D)[ka]||ca),ca in J)switch(typeof J[ca]){case "string":O[ca]=P;break;case "number":O[ca]=P.length?Number(P):NaN;break;case "boolean":O[ca]="false"!=P.toLowerCase();break;case "function":""===P||-1!=P.search(/[^\w\.]+/i)?O[ca]=new Function(P):O[ca]=b.getObject(P,!1)||new Function(P);X.push(ca);break;default:ka=J[ca],O[ca]=ka&&"length"in ka?P?P.split(/\s*,\s*/):[]:ka instanceof
Date?""==P?new Date(""):"now"==P?new Date:h.fromISOString(P):ka instanceof a?l.baseUrl+P:r(P)}else O[ca]=P}}for(S=0;S<X.length;S++)Y=X[S].toLowerCase(),y.removeAttribute(Y),y[Y]=null;if(ba)try{ba=r.call(B.propsThis,"{"+ba+"}"),b.mixin(O,ba)}catch(ea){throw Error(ea.toString()+" in data-dojo-props\x3d'"+ba+"'");}b.mixin(O,u);x||(x=D&&(D._noScript||J._noScript)?[]:d("\x3e script[type^\x3d'dojo/']",y));var aa=[],ja=[],oa=[],U=[];if(x)for(K=0;K<x.length;K++)Y=x[K],y.removeChild(Y),u=Y.getAttribute(A+
"event")||Y.getAttribute("event"),B=Y.getAttribute(A+"prop"),ba=Y.getAttribute(A+"method"),X=Y.getAttribute(A+"advice"),S=Y.getAttribute("type"),Y=this._functionFromScript(Y,A),u?"dojo/connect"==S?aa.push({method:u,func:Y}):"dojo/on"==S?U.push({event:u,func:Y}):O[u]=Y:"dojo/aspect"==S?aa.push({method:ba,advice:X,func:Y}):"dojo/watch"==S?oa.push({prop:B,func:Y}):ja.push(Y);D=(x=D.markupFactory||J.markupFactory)?x(O,y,D):new D(O,y);return D.then?D.then(E):E(D)},scan:function(D,y){function u(aa){if(!aa.inherited){aa.inherited=
{};var ja=aa.node,oa=u(aa.parent);ja={dir:ja.getAttribute("dir")||oa.dir,lang:ja.getAttribute("lang")||oa.lang,textDir:ja.getAttribute(S)||oa.textDir};for(var U in ja)ja[U]&&(aa.inherited[U]=ja[U])}return aa.inherited}var B=[],x=[],A={},E=(y.scope||l._scopeName)+"Type",J="data-"+(y.scope||l._scopeName)+"-",O=J+"type",S=J+"textdir";J+="mixins";var X=D.firstChild,Y=y.inherited;if(!Y){Y=function U(ja,oa){return ja.getAttribute&&ja.getAttribute(oa)||ja.parentNode&&U(ja.parentNode,oa)};Y={dir:Y(D,"dir"),
lang:Y(D,"lang"),textDir:Y(D,S)};for(var K in Y)Y[K]||delete Y[K]}Y={inherited:Y};for(var P,Q;;)if(X)if(1!=X.nodeType)X=X.nextSibling;else if(P&&"script"==X.nodeName.toLowerCase())(ba=X.getAttribute("type"))&&/^dojo\/\w/i.test(ba)&&P.push(X),X=X.nextSibling;else if(Q)X=X.nextSibling;else{var ba=X.getAttribute(O)||X.getAttribute(E);K=X.firstChild;if(ba||K&&(3!=K.nodeType||K.nextSibling)){Q=null;if(ba){var ca=X.getAttribute(J);P=ca?[ba].concat(ca.split(/\s*,\s*/)):[ba];try{Q=v(P,y.contextRequire)}catch(aa){}Q||
q.forEach(P,function(aa){~aa.indexOf("/")&&!A[aa]&&(A[aa]=!0,x[x.length]=aa)});ca=Q&&!Q.prototype._noScript?[]:null;Y={types:P,ctor:Q,parent:Y,node:X,scripts:ca};Y.inherited=u(Y);B.push(Y)}else Y={node:X,scripts:P,parent:Y};P=ca;Q=X.stopParser||Q&&Q.prototype.stopParser&&!y.template;X=K}else X=X.nextSibling}else{if(!Y||!Y.node)break;X=Y.node.nextSibling;Q=!1;Y=Y.parent;P=Y.scripts}var ka=new f;x.length?(y.contextRequire||F)(x,function(){ka.resolve(q.filter(B,function(aa){if(!aa.ctor)try{aa.ctor=v(aa.types,
y.contextRequire)}catch(U){}for(var ja=aa.parent;ja&&!ja.types;)ja=ja.parent;var oa=aa.ctor&&aa.ctor.prototype;aa.instantiateChildren=!(oa&&oa.stopParser&&!y.template);aa.instantiate=!ja||ja.instantiate&&ja.instantiateChildren;return aa.instantiate}))}):ka.resolve(B);return ka.promise},_require:function(D,y){var u=r("{"+D.innerHTML+"}"),B=[],x=[],A=new f,E=y&&y.contextRequire||F,J;for(J in u)B.push(J),x.push(u[J]);E(x,function(){for(var O=0;O<B.length;O++)b.setObject(B[O],arguments[O]);A.resolve(arguments)});
return A.promise},_scanAmd:function(D,y){var u=new f,B=u.promise;u.resolve(!0);var x=this;d("script[type\x3d'dojo/require']",D).forEach(function(A){B=B.then(function(){return x._require(A,y)});A.parentNode.removeChild(A)});return B},parse:function(D,y){!D||"string"==typeof D||"nodeType"in D||(y=D,D=y.rootNode);var u=D?p.byId(D):m.body();y=y||{};var B=y.template?{template:!0}:{},x=[],A=this,E=this._scanAmd(u,y).then(function(){return A.scan(u,y)}).then(function(J){return A._instantiate(J,B,y,!0)}).then(function(J){return x=
x.concat(J)}).otherwise(function(J){throw J;});b.mixin(x,E);return x}};l.parser=C;n.parseOnLoad&&t(100,C,"parse");return C})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(F,l,b,q){F=F(q.Credential,{});return b.Credential=F})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v){var z={},C=function(x){var A=(new p(x.owningSystemUrl)).host;x=(new p(x.server)).host;var E=/.+\.arcgis\.com$/i;return E.test(A)&&E.test(x)},D=function(x,A){return!!(C(x)&&A&&q.some(A,function(E){return E.test(x.server)}))},y=null,u=null;try{y=window.localStorage,u=window.sessionStorage}catch(x){}m=F(r,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=b.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=
[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();e(window,"pageshow",b.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:d.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(x){var A=this.serverInfos;A?(x=q.filter(x,function(E){return!this.findServerInfo(E.server)},this),this.serverInfos=A.concat(x)):
this.serverInfos=x;q.forEach(x,function(E){E.owningSystemUrl&&this._portals.push(E.owningSystemUrl);if(E.hasPortal){this._portals.push(E.server);var J=h.defaults.io.corsEnabledServers,O=this._getOrigin(E.tokenServiceUrl);d.canUseXhr(E.server)||J.push(E.server.replace(/^https?:\/\//i,""));d.canUseXhr(O)||J.push(O.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(x){var A=this.oAuthInfos;A?(q.forEach(x,function(E){(E=this.findOAuthInfo(E.portalUrl))&&A.splice(A.indexOf(E),1)},this),
this.oAuthInfos=A.concat(x)):this.oAuthInfos=x},registerToken:function(x){x=f.mixin({},x);var A=this._sanitizeUrl(x.server),E=this.findServerInfo(A),J=!0,O;E||(E=new c,E.server=this._getServerInstanceRoot(A),E.tokenServiceUrl=this._getTokenSvcUrl(A),E.hasPortal=!0,this.registerServers([E]));(O=this.findCredential(A,x.userId))?(delete x.server,b.mixin(O,x),J=!1):(O=new B({userId:x.userId,server:E.server,token:x.token,expires:x.expires,ssl:x.ssl,scope:this._isServerRsrc(A)?"server":"portal"}),O.resources=
[A],this.credentials.push(O));O.onTokenChange(!1);J||O.refreshServerTokens()},toJson:function(){return f.fixJson({serverInfos:q.map(this.serverInfos,function(x){return x.toJson()}),oAuthInfos:q.map(this.oAuthInfos,function(x){return x.toJson()}),credentials:q.map(this.credentials,function(x){return x.toJson()})})},initialize:function(x){if(x){b.isString(x)&&(x=JSON.parse(x));var A=x.serverInfos,E=x.oAuthInfos;x=x.credentials;if(A){var J=[];q.forEach(A,function(S){S.server&&S.tokenServiceUrl&&J.push(S.declaredClass?
S:new c(S))});J.length&&this.registerServers(J)}if(E){var O=[];q.forEach(E,function(S){S.appId&&O.push(S.declaredClass?S:new v(S))});O.length&&this.registerOAuthInfos(O)}x&&q.forEach(x,function(S){S.userId&&S.server&&S.token&&S.expires&&S.expires>(new Date).getTime()&&(S=S.declaredClass?S:new B(S),S.onTokenChange(),this.credentials.push(S))},this)}},findServerInfo:function(x){var A;x=this._sanitizeUrl(x);q.some(this.serverInfos,function(E){this._hasSameServerInstance(E.server,x)&&(A=E);return!!A},
this);return A},findOAuthInfo:function(x){var A;x=this._sanitizeUrl(x);q.some(this.oAuthInfos,function(E){this._hasSameServerInstance(E.portalUrl,x)&&(A=E);return!!A},this);return A},findCredential:function(x,A){var E;x=this._sanitizeUrl(x);var J=this._isServerRsrc(x)?"server":"portal";A?q.some(this.credentials,function(O){this._hasSameServerInstance(O.server,x)&&A===O.userId&&O.scope===J&&(E=O);return!!E},this):q.some(this.credentials,function(O){this._hasSameServerInstance(O.server,x)&&-1!==this._getIdenticalSvcIdx(x,
O)&&O.scope===J&&(E=O);return!!E},this);return E},getCredential:function(x,A){var E=!0;if(f.isDefined(A))if(b.isObject(A)){var J=!!A.token;var O=A.error;E=!1!==A.prompt}else J=A;x=this._sanitizeUrl(x);var S=new n(g._dfdCanceller),X=this._isAdminResource(x);if((J=J?this.findCredential(x):null)&&O&&498===O.code)J.destroy();else if(J)return E=Error("You are currently signed in as: '"+J.userId+"'. You do not have access to this resource: "+x),E.name="identity-manager:not-authorized",E.code="IdentityManagerBase.1",
E.httpCode=O&&O.httpCode,E.messageCode=O?O.messageCode:null,E.subcode=O?O.subcode:null,E.details=O?O.details:null,E.log=!!l.isDebug,S.errback(E),S;if(O=this._findCredential(x,A))return S.callback(O),S;var Y=this.findServerInfo(x);if(Y)!Y.hasServer&&this._isServerRsrc(x)&&(Y._restInfoDfd=this._getTokenSvcUrl(x,!0),Y.hasServer=!0);else{O=this._getTokenSvcUrl(x);if(!O)return E=Error("Unknown resource - could not find token service endpoint."),E.name="identity-manager:unknown-resource",E.code="IdentityManagerBase.2",
E.log=!!l.isDebug,S.errback(E),S;Y=new c;Y.server=this._getServerInstanceRoot(x);b.isString(O)?(Y.tokenServiceUrl=O,Y.hasPortal=!0):(Y._restInfoDfd=O,Y.hasServer=!0);this.registerServers([Y])}Y.hasPortal&&void 0===Y._selfReq&&(E||d.hasSameOrigin(Y.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(K){return K.tokenServiceUrl===Y.tokenServiceUrl}))&&(Y._selfReq={owningTenant:A&&A.owningTenant,selfDfd:this._getPortalSelf(Y.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),
x)});return this._enqueue(x,Y,A,S,X)},getResourceName:function(x){return this._isRESTService(x)?x.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(x)&&x.replace(this._gwUser,"$1")||this._gwItem.test(x)&&x.replace(this._gwItem,"$1")||this._gwGroup.test(x)&&x.replace(this._gwGroup,"$1")||""},generateToken:function(x,A,E){var J=this._rePortalTokenSvc.test(x.tokenServiceUrl),O=new p(window.location.href.toLowerCase()),S=!A;var X=x.shortLivedTokenValidity;if(A){var Y=
k.id.tokenValidity||X||k.id.defaultTokenValidity;Y>X&&(Y=X)}if(E){var K=E.isAdmin;var P=E.serverUrl;var Q=E.token;var ba=E.ssl;x.customParameters=E.customParameters}if(K)X=x.adminTokenServiceUrl;else{X=x.tokenServiceUrl;var ca=new p(X.toLowerCase());x.webTierAuth&&E&&E.serverUrl&&!ba&&"http"===O.scheme&&(d.hasSameOrigin(O.uri,X,!0)||"https"===ca.scheme&&O.host===ca.host&&"7080"===O.port&&"7443"===ca.port)&&(X=X.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));S&&J&&(X=X.replace(/\/rest/i,""))}K=
b.mixin({url:X,content:b.mixin({request:"getToken",username:A&&A.username,password:A&&A.password,serverUrl:P,token:Q,expiration:Y,referer:K||J?window.location.host:null,client:K?"referer":null,f:"json"},x.customParameters),handleAs:"json",callbackParamName:S?"callback":void 0},E&&E.ioArgs);E={usePost:!S,disableIdentityLookup:!0,useProxy:this._useProxy(x,E)};J||(K.withCredentials=!1);J=t(K,E);J.addCallback(function(ka){if(!ka||!ka.token)return ka=Error("Unable to generate token"),ka.name="identity-manager:authentication-failed",
ka.code="IdentityManagerBase.3",ka.log=!!l.isDebug,ka;var aa=x.server;z[aa]||(z[aa]={});A&&(z[aa][A.username]=A.password);ka.validity=Y;return ka});J.addErrback(function(ka){});return J},isBusy:function(){return!!this._busy},checkSignInStatus:function(x){var A=new n;this.checkAppAccess(x,"").then(function(E){A.resolve(E.credential)})["catch"](function(E){A.reject(E)});return A},checkAppAccess:function(x,A,E){var J=this,O=!1;return this.getCredential(x,{prompt:!1}).then(function(S){var X={f:"json"};
if("portal"===S.scope)if(A&&(J._doPortalSignIn(x)||E&&E.force)){var Y=S.server+"/sharing/rest/oauth2/validateAppAccess";X.client_id=A}else if(S.token)Y=S.server+"/sharing/rest";else return{credential:S};else if(S.token)Y=S.server+"/rest/services";else return{credential:S};S.token&&(X.token=S.token);return t({url:Y,content:X,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(K){if(!1===K.valid){var P=Error("You are currently signed in as: '"+S.userId+"'.  You do not have access to this app: '"+
A+"'.");P.name="identity-manager:not-authorized";P.code="IdentityManagerBase.1";P.log=!!l.isDebug;P.details=K;throw P;}O=!!K.viewOnlyUserTypeApp;return{credential:S}})["catch"](function(K){if("IdentityManagerBase.1"===K.code||400===K.code)throw 400===K.code&&(K.name="identity-manager:invalid-request"),K;if(498===K.code)throw S.destroy(),K=Error("User is not signed in."),K.name="identity-manager:not-authenticated",K.code="IdentityManagerBase.6",K.log=!!l.isDebug,K;return{credential:S}})}).then(function(S){return{credential:S.credential,
viewOnly:O}})},setProtocolErrorHandler:function(x){this._protocolFunc=x},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var x=this.credentials.slice();q.forEach(x,function(A){A.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(x){x||(x="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
e(window,"message",function(A){(A.origin===window.location.origin||f.endsWith(A.origin,".arcgis.com"))&&A.data&&"arcgis:auth:requestCredential"===A.data.type&&this.getCredential(x).then(function(E){A.source.postMessage({type:"arcgis:auth:credential",credential:{expires:E.expires,server:E.server,ssl:E.ssl,token:E.token,userId:E.userId}},A.origin)})["catch"](function(E){A.source.postMessage({type:"arcgis:auth:error",error:{name:E.name,message:E.message}},A.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var x=window.location.hash;if(x){"#"===x.charAt(0)&&(x=x.substring(1));x=a.queryToObject(x);var A=!1;if(x.access_token&&x.expires_in&&x.state&&x.hasOwnProperty("username"))try{x.state=JSON.parse(x.state),x.state.portalUrl&&(this._oAuthLocationParams=x,A=!0)}catch(J){}else if(x.error&&x.error_description&&"access_denied"===x.error&&(A=!0,x.state))try{x.state=JSON.parse(x.state)}catch(J){}A&&
(window.location.hash=x.state&&x.state.hash||"")}if(x=window.location.search){"?"===x.charAt(0)&&(x=x.substring(1));x=a.queryToObject(x);A=!1;if(x.code&&x.state)try{x.state=JSON.parse(x.state),x.state.portalUrl&&x.state.uid&&(this._oAuthLocationParams=x,A=!0)}catch(J){}else if(x.error&&x.error_description&&"access_denied"===x.error&&(A=!0,x.state))try{x.state=JSON.parse(x.state)}catch(J){}if(A){var E=f.mixin({},x);"code error error_description message_code persist state".split(" ").forEach(function(J){delete E[J]});
A=a.objectToQuery(E);window.history.replaceState(window.history.state,"",window.location.pathname+(A?"?"+A:"")+(x.state&&x.state.hash||""))}}},_getOAuthToken:function(x,A,E,J,O){x=x.replace(/^http:/i,"https:");return t({url:x+"/sharing/rest/oauth2/token",content:J&&O?{grant_type:"authorization_code",code:A,redirect_uri:J,client_id:E,code_verifier:O}:{grant_type:"refresh_token",refresh_token:A,client_id:E}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(x){x.persisted&&this.isBusy()&&
this._rejectOnPersistedPageShow&&(x=Error("ABORTED"),x.name="identity-manager:user-aborted",x.code="IdentityManager.2",x.log=!!l.isDebug,this._errbackFunc(x))},_findCredential:function(x,A){var E=-1,J,O,S=A&&A.token;var X=A&&A.resource;var Y=this._isServerRsrc(x)?"server":"portal",K=q.filter(this.credentials,function(ca){return this._hasSameServerInstance(ca.server,x)&&ca.scope===Y},this);x=X||x;if(K.length)if(1===K.length){X=K[0];var P=(J=(O=this.findServerInfo(X.server))&&O.owningSystemUrl)&&this.findCredential(J,
X.userId);E=this._getIdenticalSvcIdx(x,X);if(S)-1!==E&&(X.resources.splice(E,1),this._removeResource(x,P));else return-1===E&&X.resources.push(x),this._addResource(x,P),X}else{var Q,ba;q.some(K,function(ca){ba=this._getIdenticalSvcIdx(x,ca);return-1!==ba?(Q=ca,P=(J=(O=this.findServerInfo(Q.server))&&O.owningSystemUrl)&&this.findCredential(J,Q.userId),E=ba,!0):!1},this);if(S)Q&&(Q.resources.splice(E,1),this._removeResource(x,P));else if(Q)return this._addResource(x,P),Q}},_findOAuthInfo:function(x){var A=
this.findOAuthInfo(x);A||q.some(this.oAuthInfos,function(E){this._isIdProvider(E.portalUrl,x)&&(A=E);return!!A},this);return A},_addResource:function(x,A){A&&-1===this._getIdenticalSvcIdx(x,A)&&A.resources.push(x)},_removeResource:function(x,A){var E=-1;A&&(E=this._getIdenticalSvcIdx(x,A),-1<E&&A.resources.splice(E,1))},_useProxy:function(x,A){return A&&A.isAdmin&&!d.hasSameOrigin(x.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(x.tokenServiceUrl)&&10.1==x.currentVersion&&!d.hasSameOrigin(x.tokenServiceUrl,
window.location.href)},_getOrigin:function(x){x=new p(x);return x.scheme+"://"+x.host+(f.isDefined(x.port)?":"+x.port:"")},_getServerInstanceRoot:function(x){var A=x.toLowerCase(),E=A.indexOf(this._agsRest);-1===E&&this._isAdminResource(x)&&(E=this._agsAdmin.test(x)?x.replace(this._agsAdmin,"$1").length:x.search(this._adminSvcs));-1===E&&(E=A.indexOf("/sharing"));-1===E&&"/"===A.substr(-1)&&(E=A.length-1);return-1<E?x.substring(0,E):x},_hasSameServerInstance:function(x,A){"/"===x.substr(-1)&&(x=x.slice(0,
-1));x=x.toLowerCase();A=this._getServerInstanceRoot(A).toLowerCase();x=this._normalizeAGOLorgDomain(x);A=this._normalizeAGOLorgDomain(A);x=x.substr(x.indexOf(":"));A=A.substr(A.indexOf(":"));return x===A},_normalizeAGOLorgDomain:function(x){var A=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,E=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,J=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;A.test(x)?x=x.replace(A,"https://www.arcgis.com"):E.test(x)?x=x.replace(E,"https://devext.arcgis.com"):
J.test(x)&&(x=x.replace(J,"https://qaext.arcgis.com"));return x},_sanitizeUrl:function(x){var A=(h.defaults.io.proxyUrl||"").toLowerCase(),E=A?x.toLowerCase().indexOf(A+"?"):-1;-1!==E&&(x=x.substring(E+A.length+1));x=d.normalize(x);return d.urlToObject(x).path},_isRESTService:function(x){return-1<x.indexOf(this._agsRest)},_isAdminResource:function(x){return this._agsAdmin.test(x)||this._adminSvcs.test(x)},_isServerRsrc:function(x){return this._isRESTService(x)||this._isAdminResource(x)},_isIdenticalService:function(x,
A){if(this._isRESTService(x)&&this._isRESTService(A)){var E=this._getSuffix(x).toLowerCase(),J=this._getSuffix(A).toLowerCase();var O=E===J;O||(O=/(.*)\/(MapServer|FeatureServer).*/ig,O=E.replace(O,"$1")===J.replace(O,"$1"))}else this._isAdminResource(x)&&this._isAdminResource(A)?O=!0:this._isServerRsrc(x)||this._isServerRsrc(A)||!this._isPortalDomain(x)||(O=!0);return O},_isPortalDomain:function(x){var A=new p(x.toLowerCase()),E=this._portalConfig;x=q.some(this._gwDomains,function(J){return J.regex.test(A.uri)});
!x&&E&&(x=this._hasSameServerInstance(this._getServerInstanceRoot(E.restBaseUrl),A.uri));x||(!this._arcgisUrl&&(E=b.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new p(E)).authority),this._arcgisUrl&&(x=this._arcgisUrl.toLowerCase()===A.authority));x||(x=q.some(this._portals,function(J){return this._hasSameServerInstance(J,A.uri)},this));return x=x||this._agsPortal.test(A.path)},_isIdProvider:function(x,A){var E=-1,J=-1;q.forEach(this._gwDomains,function(Y,K){-1===E&&Y.regex.test(x)&&
(E=K);-1===J&&Y.regex.test(A)&&(J=K)});var O=!1;if(-1<E&&-1<J)if(0===E||4===E){if(0===J||4===J)O=!0}else if(1===E){if(1===J||2===J)O=!0}else 2===E?2===J&&(O=!0):3===E&&3===J&&(O=!0);if(!O){var S=this.findServerInfo(A),X=S&&S.owningSystemUrl;X&&C(S)&&this._isPortalDomain(X)&&this._isIdProvider(x,X)&&(O=!0)}return O},_isPublic:function(x){x=this._sanitizeUrl(x);return q.some(this._publicUrls,function(A){return A.test(x)})},_getIdenticalSvcIdx:function(x,A){var E=-1;q.some(A.resources,function(J,O){return this._isIdenticalService(x,
J)?(E=O,!0):!1},this);return E},_getSuffix:function(x){return x.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(x){if(this._isRESTService(x)||this._isAdminResource(x)){var A=this._getServerInstanceRoot(x);var E=A+"/admin/generateToken";x=A+"/rest/info";A=t({url:x,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});A.adminUrl_=E;return A}if(this._isPortalDomain(x)){var J="";q.some(this._gwDomains,function(O){O.regex.test(x)&&(J=O.tokenServiceUrl);
return!!J});J||q.some(this._portals,function(O){this._hasSameServerInstance(O,x)&&(J=O+this._gwTokenUrl);return!!J},this);J||(E=x.toLowerCase().indexOf("/sharing"),-1!==E&&(J=x.substring(0,E)+this._gwTokenUrl));J||(J=this._getOrigin(x)+this._gwTokenUrl);J&&(E=(new p(x)).port,/^http:\/\//i.test(x)&&"7080"===E&&(J=J.replace(/:7080/i,":7443")),J=J.replace(/http:/i,"https:"));return J}if(-1!==x.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(x,
A,E){return t({url:x+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:A,token:E}},{disableIdentityLookup:!0,usePost:!0}).then(function(J){return J.token})},_getPlatformSelf:function(x,A){x=x.replace(/^http:/i,"https:");return t({url:x+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":A,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(x,
A){var E="";q.some(this._gwDomains,function(O){O.regex.test(x)&&(E=O.customBaseUrl);return!!E});if(E){var J=new n;J.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:E,portalMode:"multitenant",supportsOAuth:!0});return J}"https:"===window.location.protocol?x=x.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(A)&&(x=x.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return t({url:x,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},{disableIdentityLookup:!0})},
_doPortalSignIn:function(x){var A=this._portalConfig,E=window.location.href,J=this.findServerInfo(x);return(A||this._isPortalDomain(E))&&(J?J.hasPortal||J.owningSystemUrl&&this._isPortalDomain(J.owningSystemUrl):this._isPortalDomain(x))&&(this._isIdProvider(E,x)||A&&(this._hasSameServerInstance(this._getServerInstanceRoot(A.restBaseUrl),x)||this._isIdProvider(A.restBaseUrl,x))||d.hasSameOrigin(E,x,!0))?!0:!1},_checkProtocol:function(x,A,E,J){var O=!0;J=J?A.adminTokenServiceUrl:A.tokenServiceUrl;0!==
b.trim(J).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||h.defaults.io.useCors&&(d.canUseXhr(J)||d.canUseXhr(d.getProxyUrl(!0).path))||(O=this._protocolFunc?!!this._protocolFunc({resourceUrl:x,serverInfo:A}):!1,O||(x=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),x.name="identity-manager:aborted",x.code="IdentityManagerBase.4",x.log=!!l.isDebug,E(x)));return O},_enqueue:function(x,A,E,J,O,S){J||(J=new n(g._dfdCanceller));
J.resUrl_=x;J.sinfo_=A;J.options_=E;J.admin_=O;J.refresh_=S;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(x),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(J)):this._xoReqs.push(J):this._doSignIn(J);return J},_doSignIn:function(x){this._busy=x;this._rejectOnPersistedPageShow=!1;var A=this,E=function(P){var Q=x.options_&&x.options_.resource,ba=x.resUrl_,ca=x.refresh_,ka=!1;-1===q.indexOf(A.credentials,P)&&(ca&&
-1!==q.indexOf(A.credentials,ca)?(ca.userId=P.userId,ca.token=P.token,ca.expires=P.expires,ca.validity=P.validity,ca.ssl=P.ssl,ca.creationTime=P.creationTime,ka=!0,P=ca):A.credentials.push(P));P.resources||(P.resources=[]);-1===P.resources.indexOf(Q||ba)&&P.resources.push(Q||ba);P.scope=A._isServerRsrc(ba)?"server":"portal";P.onTokenChange();Q=A._soReqs;var aa={};A._soReqs=[];q.forEach(Q,function(ja){if(!this._isIdenticalService(ba,ja.resUrl_)){var oa=this._getSuffix(ja.resUrl_);aa[oa]||(aa[oa]=!0,
P.resources.push(ja.resUrl_))}},A);x.callback(P);q.forEach(Q,function(ja){this._hasSameServerInstance(this._getServerInstanceRoot(ba),ja.resUrl_)?ja.callback(P):this._soReqs.push(ja)},A);A._busy=x.resUrl_=x.sinfo_=x.refresh_=null;if(!ka)A.onCredentialCreate({credential:P});A._soReqs.length?A._doSignIn(A._soReqs.shift()):A._xoReqs.length&&A._doSignIn(A._xoReqs.shift())},J=function(P){x.errback(P);A._busy=x.resUrl_=x.sinfo_=x.refresh_=null;A._soReqs.length?A._doSignIn(A._soReqs.shift()):A._xoReqs.length&&
A._doSignIn(A._xoReqs.shift())},O=function(P,Q,ba,ca){var ka=x.sinfo_,aa=!x.options_||!1!==x.options_.prompt,ja=ka.hasPortal&&A._findOAuthInfo(x.resUrl_);if(P)E(new B({userId:P,server:ka.server,token:ba||null,expires:f.isDefined(ca)?Number(ca):null,ssl:!!Q}));else if(window!==window.parent&&A._appUrlObj.query&&A._appUrlObj.query["arcgis-auth-origin"]&&A._appUrlObj.query["arcgis-auth-portal"]&&A._hasSameServerInstance(A._getServerInstanceRoot(A._appUrlObj.query["arcgis-auth-portal"]),x.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},
A._appUrlObj.query["arcgis-auth-origin"]);var oa=e(window,"message",function(va){if(va.source===window.parent&&va.data)if("arcgis:auth:credential"===va.data.type&&va.data.credential.expires<Date.now()&&(va.data.type="arcgis:auth:error",va.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===va.data.type)oa.remove(),E(new B(va.data.credential));else if("arcgis:auth:error"===va.data.type){oa.remove();va=va.data.error;switch(va.name){case "identity-manager:busy":case "identity-manager:not-authorized":var Fa=
"IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":Fa="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":Fa="IdentityManager.3";"tokenExpiredError"===va.name&&(va.name="identity-manager:credential-request-failed",va.message="Parent application's token has expired.");break;case "identity-manager:aborted":Fa=
"IdentityManager.4";break;case "identity-manager:not-authenticated":Fa="IdentityManager.6";break;case "identity-manager:invalid-request":Fa=400}var Ha=Error(va.message);Ha.name=va.name;Ha.code=Fa;Ha.log=!!l.isDebug;J(Ha)}})}else if(ja){var U=ja._oAuthCred;U||(P=new w(ja,y),Q=new w(ja,u),P.isValid()&&Q.isValid()?P.expires>Q.expires?(U=P,Q.destroy()):(U=Q,P.destroy()):U=P.isValid()?P:Q,ja._oAuthCred=U);if(U.isValid()){var ea=new B({userId:U.userId,server:ka.server,token:U.token,expires:U.expires,ssl:U.ssl,
_oAuthCred:U});var fa=ja.appId!==U.appId&&A._doPortalSignIn(x.resUrl_);fa||U.refreshToken?(U.refreshToken?x._pendingDfd=A._getOAuthToken(ka.server,U.refreshToken,U.appId).then(function(va){ea.expires=Date.now()+1E3*va.expires_in;ea.token=va.access_token;return ea}):(P=new n,P.resolve(ea),x._pendingDfd=P),x._pendingDfd.then(function(va){return fa?A._exchangeToken(va.server,ja.appId,va.token).then(function(Fa){va.token=Fa;return va})["catch"](function(){return va}):va}).then(function(va){E(va)})["catch"](function(){U.destroy();
O()})):E(ea)}else if(A._oAuthLocationParams&&A._hasSameServerInstance(ja.portalUrl,A._oAuthLocationParams.state.portalUrl)&&(A._oAuthLocationParams.access_token||A._oAuthLocationParams.code&&A._oAuthLocationParams.state.uid===U.stateUID&&U.codeVerifier))P=A._oAuthLocationParams,A._oAuthLocationParams=null,x._pendingDfd=A._processOAuthResponseParams(P,ja,ka).then(function(va){E(va)})["catch"](J);else{var pa=function(){aa?x._pendingDfd=A.oAuthSignIn(x.resUrl_,ka,ja,x.options_).addCallbacks(E,J):(ra=
Error("User is not signed in."),ra.name="identity-manager:not-authenticated",ra.code="IdentityManagerBase.6",ra.log=!!l.isDebug,J(ra))};A._doPortalSignIn(x.resUrl_)?x._pendingDfd=A._getPlatformSelf(ka.server,ja.appId).then(function(va){var Fa=va.portalUrl;!Fa||d.hasSameOrigin(Fa,window.location.origin,!0)?(ea=new B({userId:va.username,server:ka.server,expires:Date.now()+1E3*va.expires_in,token:va.token}),E(ea)):pa()})["catch"](pa):pa()}}else if(aa)A._checkProtocol(x.resUrl_,ka,J,x.admin_)&&(P=x.options_,
x.admin_&&(P=P||{},P.isAdmin=!0),x._pendingDfd=A.signIn(x.resUrl_,ka,P).addCallbacks(E,J));else{var ra=Error("User is not signed in.");ra.name="identity-manager:not-authenticated";ra.code="IdentityManagerBase.6";ra.log=!!l.isDebug;J(ra)}},S=function(){var P=x.sinfo_,Q=P.owningSystemUrl,ba=x.options_,ca;if(ba){var ka=ba.token;var aa=ba.error;var ja=ba.prompt}(ca=A._findCredential(Q,{token:ka,resource:x.resUrl_}))||q.some(A.credentials,function(oa){this._isIdProvider(Q,oa.server)&&(ca=oa);return!!ca},
A);ca?(ba=A.findCredential(x.resUrl_,ca.userId))?E(ba):D(P,A._legacyFed)?(ba=ca.toJson(),ba.server=P.server,ba.resources=null,E(new B(ba))):(x._pendingDfd=A.generateToken(A.findServerInfo(ca.server),null,{serverUrl:x.resUrl_,token:ca.token,ssl:ca.ssl})).addCallbacks(function(oa){E(new B({userId:ca.userId,server:P.server,token:oa.token,expires:f.isDefined(oa.expires)?Number(oa.expires):null,ssl:!!oa.ssl,isAdmin:x.admin_,validity:oa.validity}))},J):(A._busy=null,ka&&(x.options_.token=null),(x._pendingDfd=
A.getCredential(Q.replace(/\/?$/,"/sharing"),{resource:x.resUrl_,owningTenant:P.owningTenant,token:ka,error:aa,prompt:ja})).addCallbacks(function(oa){A._enqueue(x.resUrl_,x.sinfo_,x.options_,x,x.admin_)},function(oa){J(oa)}))};this._errbackFunc=J;var X=x.sinfo_.owningSystemUrl,Y=this._isServerRsrc(x.resUrl_),K=x.sinfo_._restInfoDfd;K?K.addCallbacks(function(P){var Q=x.sinfo_;Q._restInfoDfd&&(Q.adminTokenServiceUrl=Q._restInfoDfd.adminUrl_,Q._restInfoDfd=null,Q.tokenServiceUrl=b.getObject("authInfo.tokenServicesUrl",
!1,P)||b.getObject("authInfo.tokenServiceUrl",!1,P)||b.getObject("tokenServiceUrl",!1,P),Q.shortLivedTokenValidity=b.getObject("authInfo.shortLivedTokenValidity",!1,P),Q.currentVersion=P.currentVersion,Q.owningTenant=P.owningTenant,(P=Q.owningSystemUrl=P.owningSystemUrl)&&A._portals.push(P));Y&&Q.owningSystemUrl?S():O()},function(){x.sinfo_._restInfoDfd=null;var P=Error("Unknown resource - could not find token service endpoint.");P.name="identity-manager:server-identification-failed";P.code="IdentityManagerBase.2";
P.log=!!l.isDebug;J(P)}):Y&&X?S():x.sinfo_._selfReq?x.sinfo_._selfReq.selfDfd.then(function(P){var Q={};if(P){var ba=P.user&&P.user.username;Q.username=ba;Q.allSSL=P.allSSL;var ca=P.supportsOAuth;var ka=parseFloat(P.currentVersion);if("multitenant"===P.portalMode)var aa=P.customBaseUrl;x.sinfo_.currentVersion=ka}x.sinfo_.webTierAuth=!!ba;return ba&&A.normalizeWebTierAuth?A.generateToken(x.sinfo_,null,{ssl:Q.allSSL}).addBoth(function(ja){Q.portalToken=ja&&ja.token;Q.tokenExpiration=ja&&ja.expires;
return Q}):!ba&&ca&&4.4<=ka&&!A._findOAuthInfo(x.resUrl_)?A._generateOAuthInfo({portalUrl:x.sinfo_.server,customBaseUrl:aa,owningTenant:x.sinfo_._selfReq.owningTenant}).always(function(){return Q}):Q}).always(function(P){x.sinfo_._selfReq=null;P?O(P.username,P.allSSL,P.portalToken,P.tokenExpiration):O()}):O()},_generateOAuthInfo:function(x){var A=this,E=x.portalUrl,J=x.customBaseUrl,O=x.owningTenant;if(x=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var S=
window.location.href;var X=S.indexOf("?");-1<X&&(S=S.slice(0,X));X=S.search(/\/(apps|home)\//);S=-1<X?S.slice(0,X):null}x&&S?(this._hasTestedIfAppIsOnPortal=!0,x=t({url:S+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){A.defaultOAuthInfo=new v({appId:"arcgisonline",popupCallbackUrl:S+"/home/oauth-callback.html"})})):(x=new n,x.resolve(),x=x.promise);return x.then(function(){if(A.defaultOAuthInfo)return E=E.replace(/^http:/i,"https:"),t({url:E+"/sharing/rest/oauth2/validateRedirectUri",
content:{accountId:O,client_id:A.defaultOAuthInfo.appId,redirect_uri:d.getAbsoluteUrl(A.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(Y){if(Y.valid){var K=A.defaultOAuthInfo.clone();K.portalUrl=Y.urlKey&&J?"https://"+Y.urlKey.toLowerCase()+"."+J:E;K.popup=window!==window.top||!(d.hasSameOrigin(E,window.location.origin)||A._gwDomains.some(function(P){return P.regex.test(E)&&P.regex.test(window.location.origin)}));A.oAuthInfos.push(K)}})})}});
var B=F(r,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(x){b.mixin(this,x);this.resources=this.resources||[];f.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var x=this,A=this.resources&&this.resources[0],E=k.id.findServerInfo(this.server),J=E&&E.owningSystemUrl,O=!!J&&"server"===this.scope,S=O&&D(E,k.id._legacyFed),X=O&&k.id.findServerInfo(J),Y,K=(Y=E.webTierAuth)&&k.id.normalizeWebTierAuth,P=z[this.server];
P=P&&P[this.userId];var Q={username:this.userId,password:P};if(!Y||K)if(O&&!X&&q.some(k.id.serverInfos,function(ka){k.id._isIdProvider(J,ka.server)&&(X=ka);return!!X}),Y=X&&k.id.findCredential(X.server,this.userId),!O||Y)if(S)Y.refreshToken();else{if(O)var ba={serverUrl:A,token:Y&&Y.token,ssl:Y&&Y.ssl};else if(K)Q=null,ba={ssl:this.ssl};else if(P)this.isAdmin&&(ba={isAdmin:!0});else{if(A){A=k.id._sanitizeUrl(A);this._enqueued=1;var ca=k.id._enqueue(A,E,null,null,this.isAdmin,this);ca.addCallback(function(){x._enqueued=
0;x.refreshServerTokens()}).addErrback(function(){x._enqueued=0})}return ca}return k.id.generateToken(O?X:E,O?null:Q,ba).addCallback(function(ka){x.token=ka.token;x.expires=f.isDefined(ka.expires)?Number(ka.expires):null;x.creationTime=(new Date).getTime();x.validity=ka.validity;x.onTokenChange();x.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&q.forEach(k.id.credentials,function(x){var A=k.id.findServerInfo(x.server),E=A&&A.owningSystemUrl;
x!==this&&x.userId===this.userId&&E&&"server"===x.scope&&(k.id._hasSameServerInstance(this.server,E)||k.id._isIdProvider(E,this.server))&&(D(A,k.id._legacyFed)?(x.token=this.token,x.expires=this.expires,x.creationTime=this.creationTime,x.validity=this.validity,x.onTokenChange()):x.refreshToken())},this)},onTokenChange:function(x){clearTimeout(this._refreshTimer);var A=this.server&&k.id.findServerInfo(this.server),E=(A=A&&A.owningSystemUrl)&&k.id.findServerInfo(A);!1!==x&&(!A||"portal"===this.scope||
E&&E.webTierAuth&&!k.id.normalizeWebTierAuth)&&(f.isDefined(this.expires)||f.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var x=q.indexOf(k.id.credentials,this);-1<x&&k.id.credentials.splice(x,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var x=
f.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),A=this.resources;A&&0<A.length&&(x.resources=A.slice());return x},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var x=6E4*this.tokenRefreshBuffer,A=Math.pow(2,31)-1,E=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>E?E=0:E>A&&(E=A);this._refreshTimer=
setTimeout(b.hitch(this,this.refreshToken),E>x?E-x:E)}});m.Credential=B;return k.IdentityManagerBase=m})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(F,l,b,q,n){F=F(null,{declaredClass:"esri.ServerInfo",constructor:function(p){l.mixin(this,p)},toJson:function(){return n.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,
owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return q.ServerInfo=F})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(F,l,b){l=l(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(q,
n){this.oAuthInfo=q;this.storage=n;this._init()},isValid:function(){var q=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)q=!0;else{var n=Date.now();this.expires>n&&(this.expires-n)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(q=!0)}return q},save:function(){if(!this.storage)return!1;var q=this._load(),n=this.oAuthInfo;if(n&&n.authNamespace&&n.portalUrl){var p=q[n.authNamespace];p||(p=q[n.authNamespace]={});this.appId||(this.appId=n.appId);
p[n.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(q))}catch(m){return!1}return!0}return!1},destroy:function(){var q=this._load(),n=this.oAuthInfo;if(n&&n.appId&&n.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var p=n.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",
m=new FormData;m.append("f","json");m.append("auth_token",this.refreshToken||this.token);m.append("client_id",n.appId);m.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(p,m);else{var a=new XMLHttpRequest;a.open("POST",p);a.send(m)}}if(n&&n.authNamespace&&n.portalUrl&&this.storage&&(p=q[n.authNamespace])){delete p[n.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(q))}catch(e){}}n&&(this.oAuthInfo=
n._oAuthCred=null)},_init:function(){var q=this._load(),n=this.oAuthInfo;n&&n.authNamespace&&n.portalUrl&&(q=q[n.authNamespace])&&(q=q[n.portalUrl])&&(this.appId=q.appId,this.codeVerifier=q.codeVerifier,this.expires=q.expires,this.refreshToken=q.refreshToken,this.ssl=q.ssl,this.stateUID=q.stateUID,this.token=q.token,this.userId=q.userId)},_load:function(){var q={};if(this.storage){var n=this.storage.getItem("esriJSAPIOAuth");if(n)try{q=JSON.parse(n)}catch(p){}}return q}});return F.OAuthCredential=
l})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(F,l,b,q,n){var p=b(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(m){q.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},
m)},_oAuthCred:null,toJson:function(){return l.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new p(this.toJson())}});q.setObject("arcgis.OAuthInfo",p,F);
return p})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(F,l,b,q,n,p,m,a){return F("dijit.form.Form",[n,p,m,a],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(e){l.set(this.domNode,"encType",e);q("ie")&&(this.domNode.encoding=e);this._set("encType",e)},reset:function(e){var k={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:e?e.target:this.domNode,target:e?e.target:this.domNode};!1!==this.onReset(k)&&k.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(e){this.reset(e);e.stopPropagation();e.preventDefault();return!1},_onSubmit:function(e){var k=this.constructor.prototype;if(this.execute!=k.execute||this.onExecute!=k.onExecute)b.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(e)&&(e.stopPropagation(),e.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),function(F,l,b,q,n,p,m,a,e,k,h,f,c){var d=null,g=null;try{d=window.localStorage,g=window.sessionStorage}catch(r){}var t=window.crypto||window.msCrypto;
return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(r){this._oAuthRedirectFunc=r},oAuthSignIn:function(r,w,v,z){var C=this._oAuthDfd=new a;C.resUrl_=r;C.sinfo_=w;C.oinfo_=v;var D=v._oAuthCred;if(D.storage&&("authorization-code"===v.flowType||"auto"===v.flowType&&!v.popup&&8.4<=w.currentVersion)){var y=t.getRandomValues(new Uint8Array(32));var u=q.base64UrlEncode(y);D.codeVerifier=u;y=t.getRandomValues(new Uint8Array(32));D.stateUID=q.base64UrlEncode(y);D.save()||(D.codeVerifier=u=null)}else D.codeVerifier=null;var B=
this;this._getCodeChallenge(u).then(function(x){var A=!z||!1!==z.oAuthPopupConfirmation;if(!v.popup||!A)return B._doOAuthSignIn(r,w,v,x),C;C.codeChallenge_=x;B._nls||(B._nls=h.identity);B.oAuthDialog||(B.oAuthDialog=B._createOAuthDialog());x=B.oAuthDialog;A=z&&z.error;var E=z&&z.token;l.hide(x.errMsg_);A&&403==A.code&&E&&(k.set(x.errMsg_,"innerHTML",B._nls.forbidden),l.show(x.errMsg_));k.set(x.serverLink_,{title:w.server,innerHTML:-1!==w.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":
w.server});x.show()});return C},setOAuthResponseHash:function(r){r&&("#"===r.charAt(0)&&(r=r.substring(1)),this._processOAuthPopupParams(f.queryToObject(r)))},_createOAuthDialog:function(){var r=this._nls,w=b.substitute(r,this._oAuthDialogContent);w=b.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},w);var v=new n({title:r.title,content:w,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var z=v.esriIdMgr_._oAuthDfd;
v.hide_();v.esriIdMgr_._doOAuthSignIn(z.resUrl_,z.sinfo_,z.oinfo_,z.codeChallenge_)},cancel_:function(){var z=v.esriIdMgr_._oAuthDfd;v.esriIdMgr_._oAuthDfd=null;v.hide_();var C=Error("ABORTED");C.code="IdentityManager.2";C.log=!!m.isDebug;z.errback(C)},hide_:function(){l.hide(v.errMsg_);v.hide();n._DialogLevelManager.hide(v)}});r=v.domNode;v.btnSubmit_=p.byNode(e.query(".esriIdSubmit",r)[0]);v.btnCancel_=p.byNode(e.query(".esriIdCancel",r)[0]);v.serverLink_=e.query(".serverLink",r)[0];v.errMsg_=e.query(".esriErrorMsg",
r)[0];v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v},_doOAuthSignIn:function(r,w,v,z){var C=this,D=v._oAuthCred,y={portalUrl:v.portalUrl};!v.popup&&v.preserveUrlHash&&window.location.hash&&(y.hash=window.location.hash);D.stateUID&&(y.uid=D.stateUID);y={client_id:v.appId,response_type:D.codeVerifier?"code":"token",state:JSON.stringify(y),expiration:v.expiration,locale:v.locale,redirect_uri:this._getRedirectURI(v,
!!D.codeVerifier)};v.forceLogin&&(y.force_login=!0);v.forceUserId&&v.userId&&(y.prepopulatedusername=v.userId);!v.popup&&this._doPortalSignIn(r)&&(y.redirectToUserOrgUrl=!0);D.codeVerifier&&(y.code_challenge=z||D.codeVerifier,y.code_challenge_method=z?"S256":"plain");z=v.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";D=z+"?"+f.objectToQuery(y);if(v.popup){var u=window.open(D,"esriJSAPIOAuth",v.popupWindowFeatures);u?(u.focus(),this._oAuthDfd.oAuthWin_=u,this._oAuthIntervalId=setInterval(function(){if(u.closed){clearInterval(C._oAuthIntervalId);
C._oAuthOnPopupHandle.remove();var B=C._oAuthDfd;if(B){var x=Error("ABORTED");x.code="IdentityManager.2";x.log=!!m.isDebug;B.errback(x)}}},500),C._oAuthOnPopupHandle=c.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(B){"arcgis:auth:hash"===B.type?C.setOAuthResponseHash(B.detail):C._setOAuthResponseQueryString(B.detail)})):(r=Error("ABORTED"),r.name="identity-manager:user-aborted",r.code="IdentityManager.2",r.log=!!m.isDebug,this._oAuthDfd.errback(r))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:y,authorizeUrl:z,resourceUrl:r,serverInfo:w,oAuthInfo:v}):window.location.href=D},_getCodeChallenge:function(r){if(r&&window.isSecureContext)return r=(new TextEncoder).encode(r),t.subtle.digest("SHA-256",r).then(function(w){return q.base64UrlEncode(new Uint8Array(w))});r=new a;r.resolve(null);return r},_getRedirectURI:function(r,w){var v=window.location.href.replace(/#.*$/,"");if(r.popup)return q.getAbsoluteUrl(r.popupCallbackUrl);
if(w){var z=q.urlToObject(v);if(z.query)return"code error error_description message_code persist state".split(" ").forEach(function(C){delete z.query[C]}),(v=f.objectToQuery(z.query))?z.path+"?"+v:z.path}return v},_processOAuthPopupParams:function(r){var w=this._oAuthDfd;this._oAuthDfd=null;if(w)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),r.error){var v="access_denied"===r.error;r=Error(v?"ABORTED":"OAuth: "+r.error+" - "+r.error_description);
r.name=v?"identity-manager:user-aborted":"identity-manager:authentication-failed";r.code="IdentityManagerBase."+(v?2:3);r.log=!!m.isDebug;w.errback(r)}else this._processOAuthResponseParams(r,w.oinfo_,w.sinfo_).then(function(z){w.resolve(z)})["catch"](function(z){w.reject(z)})},_processOAuthResponseParams:function(r,w,v){var z=w._oAuthCred;if(r.code){var C=z.codeVerifier;z.codeVerifier=null;z.stateUID=null;z.save();return this._getOAuthToken(v.server,r.code,w.appId,this._getRedirectURI(w,!0),C).then(function(y){var u=
new F({userId:y.username,server:v.server,token:y.access_token,expires:Date.now()+1E3*y.expires_in,ssl:y.ssl,oAuthState:r.state,_oAuthCred:z});w.userId=u.userId;z.storage=y.persist?d:g;z.refreshToken=y.refresh_token;z.token=null;z.expires=y.refresh_token_expires_in?Date.now()+1E3*y.refresh_token_expires_in:null;z.userId=u.userId;z.ssl=u.ssl;z.save();return u})}C=new F({userId:r.username,server:v.server,token:r.access_token,expires:Date.now()+1E3*Number(r.expires_in),ssl:"true"===r.ssl,oAuthState:r.state,
_oAuthCred:z});w.userId=C.userId;z.storage=r.persist?d:g;z.refreshToken=null;z.token=C.token;z.expires=C.expires;z.userId=C.userId;z.ssl=C.ssl;z.save();var D=new a;D.resolve(C);return D},_setOAuthResponseQueryString:function(r){r&&("?"===r.charAt(0)&&(r=r.substring(1)),this._processOAuthPopupParams(f.queryToObject(r)))}}})},"esri/core/events":function(){define([],function(){return{on:function(F,l,b){if(!F||"function"!==typeof F.on&&"function"!==typeof F.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in F)return F.on(l,b);if(Array.isArray(l)){for(var q=l.slice(),n=0;n<q.length;n++)F.addEventListener(q[n],b);return{remove:function(){for(var p=0;p<q.length;p++)F.removeEventListener(q[p],b)}}}F.addEventListener(l,b);return{remove:function(){F.removeEventListener(l,b)}}}}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c){function d(D){return a.create(function(y){function u(x){if(x=f.receiveMessage(x))switch(x.type){case C:x=D;var A=n.workers.loaderUrl||h.DEFAULT_LOADER_URL;if(null!=n["default"]){var E=b({},n);delete E["default"];E=JSON.parse(JSON.stringify(E))}else E=JSON.parse(JSON.stringify(n));var J=n.workers.loaderConfig;J=h["default"]({baseUrl:J.baseUrl,locale:q.locale,has:b({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":e("esri-secure-context"),
"esri-workers-supports-transfer-arraybuffer":e("esri-workers-supports-transfer-arraybuffer"),"events-keypress-typed":0,"host-webworker":1},J.has),map:b({},J.map),paths:b({},J.paths),packages:J.packages||[]});x.postMessage({type:z,configure:{esriConfig:E,loaderUrl:A,loaderConfig:J}});break;case v:D.removeEventListener("message",u),D.removeEventListener("error",B),y(D)}}function B(x){x.preventDefault();D.removeEventListener("message",u);D.removeEventListener("error",B);r.warn("Failed to create Worker. Fallback to execute module in main thread",
x);D=new c;D.addEventListener("message",u);D.addEventListener("error",B)}D.addEventListener("message",u);D.addEventListener("error",B)})}Object.defineProperty(l,"__esModule",{value:!0});var g=k.normalize(F.toUrl("./worker.js")),t=!k.hasSameOrigin(g,location.href),r=m.getLogger("esri.core.workers"),w=null,v=f.MessageType.CONFIGURED,z=f.MessageType.CONFIGURE,C=f.MessageType.HANDSHAKE;l.createWorker=function(){if(!e("esri-workers"))return d(new c);if(!t){var D=void 0;try{D=new Worker(g)}catch(y){r.warn("Failed to create Worker. Fallback to execute module in main thread",
event),D=new c}return d(D)}w||(w=p(g,{responseType:"text"}));return w.then(function(y){return new Worker(URL.createObjectURL(new Blob([y.data],{type:"text/javascript"})))})["catch"](function(y){r.warn("Failed to create Worker. Fallback to execute module in main thread",y);return new c}).then(function(y){return d(y)})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(F){for(var l,b=1,q=arguments.length;b<q;b++){l=arguments[b];for(var n in l)Object.prototype.hasOwnProperty.call(l,
n)&&(F[n]=l[n])}return F}})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(F,l,b){Object.defineProperty(b,"workers",{get:function(){return b.defaults.workers},set:function(q){return b.defaults.workers=q}});return b})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(F,l,b,q,n){return function(p,m){var a=q.mixin({},{url:p,failOk:!0},m);"array-buffer"===m.responseType?
(a.handleAs="arraybuffer",delete a.responseType):m.responseType&&(a.handleAs=m.responseType,delete a.responseType);null!==m.query&&(a.content=a.query,delete a.query);if(m.hasOwnProperty("allowImageDataAccess")){var e={allowImageDataAccess:m.allowImageDataAccess};delete a.allowImageDataAccess}var k=new n(function(){h.isFulfilled()||h.cancel()});var h=b(a,e).then(function(f){k.resolve({data:f})})["catch"](function(f){f&&null!=f.httpCode&&(f.details=f.details||{},f.details.httpStatus=f.httpCode);k.reject(f)});
return k.promise}})},"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(F,l,b,q,n){function p(){var k={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},h=document.createElement("canvas");if(!h)return k;var f=n.createContext(h,{failIfMajorPerformanceCaveat:!0},"webgl");!f&&(f=n.createContext(h,
{},"webgl"))&&(k.majorPerformanceCaveat=!0);if(!f)return k;h=f.getParameter(f.VERSION);if(!h)return k;if(h=h.match(/^WebGL\s+([\d.]*)/))k.version=parseFloat(h[1]),k.available=.94<=k.version,h=f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT),k.supportsHighPrecisionFragment=h&&0<h.precision,k.supportsVertexShaderSamplers=0<f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k.supportsElementIndexUint=null!==f.getExtension("OES_element_index_uint"),k.supportsStandardDerivatives=null!==f.getExtension("OES_standard_derivatives");
return k}function m(){var k={available:!1,version:0},h=document.createElement("canvas");if(!h)return k;h=n.createContext(h,{},"webgl2");if(!h)return k;k.available=!0;h=h.getParameter(h.VERSION);if(!h)return k;if(h=h.match(/^WebGL\s+([\d.]*)/))k.version=parseFloat(h[1]);return k}(function(){var k=navigator.userAgent,h=k.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);k=k.match(/iPhone/i);h&&b.add("esri-mobile",h);k&&b.add("esri-iPhone",k);b.add("esri-phonegap",!!q.cordova);
b.add("esri-cors",b("esri-phonegap")||"XMLHttpRequest"in q&&"withCredentials"in new XMLHttpRequest);b.add("esri-geolocation",function(){return!!navigator.geolocation});b.add("esri-canvas-svg-support",function(){return!(b("trident")||b("ie"))});b.add("esri-secure-context",function(){if("isSecureContext"in q)return q.isSecureContext;if(q.location&&q.location.origin)return 0===q.location.origin.indexOf("https:")});b.add("esri-wasm","WebAssembly"in q);b("host-webworker")||(b.add("esri-workers","Worker"in
q),b.add("esri-script-sandbox",function(){return"MessageChannel"in q&&"HTMLIFrameElement"in q&&"sandbox"in HTMLIFrameElement.prototype}),b.add("esri-url-encodes-apostrophe",function(){var f=q.document.createElement("a");f.href="?'";return-1<f.href.indexOf("?%27")}),a||(a=p()),b.add("esri-webgl",a.available),b.add("esri-webgl-high-precision-fragment",a.supportsHighPrecisionFragment),b.add("esri-webgl-vertex-shader-samplers",a.supportsVertexShaderSamplers),b.add("esri-webgl-element-index-uint",a.supportsElementIndexUint),
b.add("esri-webgl-standard-derivatives",a.supportsStandardDerivatives),b.add("esri-webgl-major-performance-caveat",a.majorPerformanceCaveat),b.add("esri-featurelayer-webgl-labeling",!0),e||(e=m()),b.add("esri-webgl2",e.available))})();var a=null,e=null;return b})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(F,l){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},
"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(F,l){function b(m,a,e){void 0===a&&(a={});switch(e){case "webgl":var k=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":k=["webgl2"];break;default:k=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}e=null;for(var h=0;h<k.length;h++){var f=k[h];try{e=m.getContext(f,a)}catch(c){}if(e)break}return e}function q(m,a){var e=m.parentNode;e&&(e.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(l,"__esModule",{value:!0});l.createContextOrErrorHTML=function(m,a,e){void 0===a&&(a={});if(!window.WebGLRenderingContext)return q(m,n),null;a=b(m,a,e);return a?a:(q(m,p),null)};l.createContext=b;var n='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',p='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(F,l,b,q){function n(z){return b.normalize(z)}function p(z){return"data:"===z.slice(0,5)}function m(z){return a(z)||w.test(z)}function a(z){return z&&"/"===z[0]&&"/"===z[1]}function e(z){return b.urlToObject(z)}function k(z){if("string"===typeof z)return new q(f(z));z.scheme||(z.scheme=l.appUrl.scheme);return z}function h(z){if(p(z))return null;var C=z.indexOf("://");if(-1===C&&
a(z))C=2;else if(-1!==C)C+=3;else return null;C=z.indexOf("/",C);return-1===C?z:z.slice(0,C)}function f(z,C,D){void 0===C&&(C=l.appBaseUrl);if(a(z))return D&&D.preserveProtocolRelative?z:"http"===l.appUrl.scheme&&l.appUrl.authority===h(z).slice(2)?"http:"+z:"https:"+z;if(w.test(z))return z;"/"===z[0]&&(D=C.indexOf("//"),D=C.indexOf("/",D+2),C=-1===D?C:C.slice(0,D));return d(C,z)}function c(z,C,D){void 0===D&&(D=!1);z=k(z);C=k(C);return D||z.scheme===C.scheme?z.host.toLowerCase()===C.host.toLowerCase()&&
z.port===C.port:!1}function d(){for(var z=[],C=0;C<arguments.length;C++)z[C]=arguments[C];if(z&&z.length){C=[];if(m(z[0])){var D=z[0],y=D.indexOf("//");C.push(D.slice(0,y+1));r.test(z[0])&&(C[0]+="/");z[0]=D.slice(y+2)}else"/"===z[0][0]&&C.push("");z=z.reduce(function(u,B){return B?u.concat(B.split("/")):u},[]);for(D=0;D<z.length;D++)y=z[D],".."===y&&0<C.length?C.pop():!y||"."===y&&0!==C.length||C.push(y);return C.join("/")}}function g(z,C,D){if(!(C&&D&&z&&m(z)))return z;var y=z.indexOf("//"),u=z.indexOf("/",
y+2),B=z.indexOf(":",y+2);u=Math.min(0>u?z.length:u,0>B?z.length:B);if(z.slice(y+2,u).toLowerCase()!==C.toLowerCase())return z;C=z.slice(0,y+2);z=z.slice(u);return""+C+D+z}function t(z,C,D){void 0===C&&(C=l.appBaseUrl);if(!m(z))return z;var y=n(z),u=y.toLowerCase();C=n(C).toLowerCase().replace(/\/+$/,"");if((D=D?n(D).toLowerCase().replace(/\/+$/,""):null)&&0!==C.indexOf(D))return z;for(var B=function(E,J,O){O=E.indexOf(J,O);return-1===O?E.length:O},x=B(u,"/",u.indexOf("//")+2),A=-1;u.slice(0,x+1)===
C.slice(0,x)+"/";){A=x+1;if(x===u.length)break;x=B(u,"/",x+1)}if(-1===A||D&&A<D.length)return z;z=y.slice(A);y=C.slice(A-1).replace(/[^/]+/g,"").length;if(0<y)for(u=0;u<y;u++)z="../"+z;else z="./"+z;return z}Object.defineProperty(l,"__esModule",{value:!0});l.normalize=n;l.canUseXhr=function(z){return b.canUseXhr(z)};l.removeTrailingSlash=function(z){return z.replace(/\/+$/,"")};F=Function("return this")();l.appUrl=new q(F.location);l.appBaseUrl=function(){var z=l.appUrl.path;z=z.substring(0,z.lastIndexOf(z.split("/")[z.split("/").length-
1]));return l.appUrl.scheme+"://"+l.appUrl.host+(null!=l.appUrl.port?":"+l.appUrl.port:"")+z}();var r=/^\s*file:/i,w=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;l.isDataProtocol=p;l.isAbsolute=m;l.isProtocolRelative=a;l.urlToObject=e;l.getOrigin=h;l.makeAbsolute=f;l.hasSameOrigin=c;l.join=d;l.removeFile=function(z){var C=0;if(m(z)){var D=z.indexOf("//");-1!==D&&(C=D+2)}D=z.lastIndexOf("/");return D<C?z:z.slice(0,D+1)};l.addProxy=function(z){return b.addProxy(z)};l.makeData=function(z){return z.isBase64?"data:"+
z.mediaType+";base64,"+z.data:"data:"+z.mediaType+","+z.data};var v=/^data:(.*?)(;base64)?,(.*)$/;l.dataComponents=function(z){return(z=z.match(v))?{mediaType:z[1],isBase64:!!z[2],data:z[3]}:null};l.changeDomain=g;l.read=function(z,C){var D=C&&C.url&&C.url.path;z&&D&&(z=f(z,D,{preserveProtocolRelative:!0}));D=z;var y=C&&C.portal;if(y&&!y.isPortal&&y.urlKey&&y.customBaseUrl){var u=y.urlKey+"."+y.customBaseUrl;D=c(l.appUrl,l.appUrl.scheme+"://"+u)?g(D,y.portalHostname,u):g(D,u,y.portalHostname)}return D};
l.write=function(z,C){if(!z)return z;!m(z)&&C&&C.blockedRelativeUrls&&C.blockedRelativeUrls.push(z);var D=f(z);if(C){var y=C.verifyItemRelativeUrls&&C.verifyItemRelativeUrls.rootPath||C.url&&C.url.path;y&&(D=t(D,y,y),D!==z&&C.verifyItemRelativeUrls&&C.verifyItemRelativeUrls.writtenUrls.push(D))}D=(y=C&&C.portal)&&!y.isPortal&&y.urlKey&&y.customBaseUrl?g(D,y.urlKey+"."+y.customBaseUrl,y.portalHostname):D;return D};l.makeRelative=t;l.removeQueryParameters=function(z){z=e(z);Object.keys(z.query||{});
return z.path}})},"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(F,l,b,q,n){Object.defineProperty(l,"__esModule",{value:!0});l.DEFAULT_LOADER_URL=n.makeAbsolute(n.removeQueryParameters(F.toUrl("./worker-init.js")));l.DEFAULT_CONFIG={baseUrl:function(){var p=n.removeQueryParameters(F.toUrl("dojo/x.js"));return n.makeAbsolute(p.slice(0,p.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},
{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};
l["default"]=function(p){var m={async:p.async,isDebug:p.isDebug,locale:p.locale,baseUrl:p.baseUrl,has:b({},p.has),map:b({},p.map),packages:p.packages&&p.packages.concat()||[],paths:b({},p.paths)};p.hasOwnProperty("async")||(m.async=!0);p.hasOwnProperty("isDebug")||(m.isDebug=!1);p.baseUrl||(m.baseUrl=l.DEFAULT_CONFIG.baseUrl);l.DEFAULT_CONFIG.packages.forEach(function(h){a:{for(var f=m.packages,c=0;c<f.length;c++)if(f[c].name===h.name)break a;h=b({},h);c=n.removeQueryParameters(F.toUrl(h.name+"/x.js"));
c=c.slice(0,c.length-5);h.location=n.makeAbsolute(c);f.push(h)}});p=m.map=m.map||{};for(var a=0,e=Object.keys(l.DEFAULT_CONFIG.map);a<e.length;a++){var k=e[a];p[k]||(p[k]=l.DEFAULT_CONFIG.map[k])}return m}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(F,l,b,q,n){var p=function(){return function(){var e=this,k=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(h){e[h]=
function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return k[h].apply(k,f)}})}}(),m=q.MutationObserver||q.WebKitMutationObserver,a=function(){if(q.process&&q.process.nextTick)var e=function(f){q.process.nextTick(f)};else if(q.Promise)e=function(f){q.Promise.resolve().then(f)};else if(m){var k=[],h=document.createElement("div");(new m(function(){for(;0<k.length;)k.shift()()})).observe(h,{attributes:!0});e=function(f){k.push(f);h.setAttribute("queueStatus","1")}}return e}();return function(){function e(){this._dispatcher=
new p;this._isInitialized=!1;this._workerPostMessage({type:n.MessageType.HANDSHAKE})}e.prototype.terminate=function(){};Object.defineProperty(e.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(k){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=k)&&this.addEventListener("message",k)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(k){this._onerrorHandler&&
this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=k)&&this.addEventListener("error",k)},enumerable:!0,configurable:!0});e.prototype.postMessage=function(k,h){var f=this;a(function(){f._workerMessageHandler(new MessageEvent("message",{data:k}))})};e.prototype.dispatchEvent=function(k){return this._dispatcher.dispatchEvent(k)};e.prototype.addEventListener=function(k,h,f){this._dispatcher.addEventListener(k,h,f)};e.prototype.removeEventListener=function(k,h,f){this._dispatcher.removeEventListener(k,
h,f)};e.prototype._workerPostMessage=function(k,h){var f=this;a(function(){f.dispatchEvent(new MessageEvent("message",{data:k}))})};e.prototype._workerMessageHandler=function(k){var h=this;if(k=n.receiveMessage(k)){var f=k.jobId;switch(k.type){case n.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:n.MessageType.CONFIGURED});break;case n.MessageType.OPEN:k=k.modulePath,b("esri-webpack")?F(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline",
"esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",k],function(c,d,g,t,r,w,v,z){switch(z){case "esri/views/vectorTiles/WorkerTileHandler":break;case "esri/views/2d/layers/features/Pipeline":d=g;break;case "esri/views/3d/layers/PointCloudWorker":d=t;break;case "esri/views/3d/layers/SceneLayerWorker":d=r;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":d=
w;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":d=v;break;default:d=z}c=c.connect(d);h._workerPostMessage({type:n.MessageType.OPENED,jobId:f,data:c})}):F(["./RemoteClient",k],function(c,d){var g=c.connect(d);h._workerPostMessage({type:n.MessageType.OPENED,jobId:f,data:g})})}}};return e}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(F,l,b){function q(n,p){if(Array.isArray(p)){var m=new b;n(p,function(){for(var a=
[],e=0;e<arguments.length;e++)a[e]=arguments[e];m.resolve(a)});return m.promise}return q(n,[p]).then(function(a){return a[0]})}Object.defineProperty(l,"__esModule",{value:!0});l.when=q;l.getAbsMid=function(n,p,m){return p.toAbsMid?p.toAbsMid(n):m.id.replace(/\/[^\/]*$/gi,"/")+n}})},"esri/layers/rasterLib/function/rasterFunctionHelper":function(){define(["dojo/_base/declare","dojo/_base/lang","./rasterFunctionRegistry"],function(F,l,b){return{create:function(q,n){if(q){var p=q.renderTexture,m=Object.keys(q);
if(q.read&&!n)return q;q.read&&n&&(q=q.toJson());-1<m.indexOf("name")&&m.indexOf(!1)?(m=l.mixin({},q),m=this._parseV2(m,n)):(m="esri.layers.RasterFunction"===q.declaredClass?q.toJson():l.mixin({},q),m=this._parseV1(m,n));m.branchCount=m.updateBranchStructure();m.renderTexture||(m.renderTexture=!!p);return m}},_parseV1:function(q,n){var p=q.rasterFunction,m=q.rasterFunctionArguments,a=q.renderTexture||q.rasterFunctionArguments.renderTexture||!1,e,k,h,f,c,d,g;(f=m.raster||m.Raster)&&f.rasterFunction&&
(e=this._parseV1(f,n));(f=m.raster2||m.Raster2)&&f.rasterFunction&&(k=this._parseV1(f,n));(f=m.rasters||m.Rasters)&&0<f.length&&(h=f.map(l.hitch(this,function(t){return t&&t.rasterFunction?this._parseV1(t,n):t})));(f=m.dem||m.DEM)&&(f.functionName||f.rasterFunction)&&(c=this._parseV1(f,n));(f=m.fillRaster||m.FillRaster)&&(f.functionName||f.rasterFunction)&&(d=this._parseV1(f,n));f=b.functions[p];if(!f)return null;p=new f(m);p.variableName&&(f=m[p.variableName])&&(f.functionName||f.rasterFunction)&&
(g=this._parseV1(f,n));q.outputPixelType&&(p.pixelType=q.outputPixelType);"$$"===e?p.functionArguments.raster=n&&n.raster:null!=e?p.functionArguments.raster=e:p.functionArguments.raster||(p.functionArguments.raster=n&&n.raster);null!=k&&(p.functionArguments.raster2=k);null!=h&&(p.functionArguments.rasters=h.map(function(t){"$$"===t&&(t=n&&n.raster);return t}));null!=c&&(p.functionArguments.dem=c);null!=d&&(p.functionArguments.fillRaster=d);null!=g&&(p.functionArguments[p.variableName]=g);p.renderTexture=
a;return p},_parseV2:function(q,n){if(!q)return null;var p=l.clone(q);this._bindV2Args(p,n);var m={};this._convertTov1(p,m);return this._parseV1(m,n)},_bindV2Args:function(q,n){(q||n)&&Object.keys(q).forEach(function(p){q[p]["function"]&&q[p].arguments?this._bindV2Args(q[p].arguments,n):null!=n[q[p].name]&&(q[p].value=n[q[p].name])}.bind(this))},_convertV2Types:function(q){if(!q)return null;"ArgumentArray"===q.type?q.elements&&"RasterStatistics"===q.elements[0].type&&(q=q.elements):q instanceof Array&&
0===q.length&&(q=null);return q},_convertTov1:function(q,n){if((q||n)&&q["function"]){var p=q["function"],m=q.arguments;n.rasterFunction=p.type.replace("Function","");n.outputPixelType="UNKNOWN"===p.pixelType?"Unknown":p.pixelType;n.rasterFunctionArguments={};var a;Object.keys(m).forEach(function(e){m[e]["function"]&&m[e].arguments?(n.rasterFunctionArguments[e]={},this._convertTov1(m[e],n.rasterFunctionArguments[e])):(a=m[e].value,n.rasterFunctionArguments[e]="object"!==typeof a||a.functionArguments?
a:this._convertV2Types(a))}.bind(this))}}}})},"esri/layers/rasterLib/function/rasterFunctionRegistry":function(){define("dojo/_base/declare dojo/_base/lang ../../rasterLib/function/AspectFunction ../../rasterLib/function/BandArithmeticFunction ../../rasterLib/function/ColormapFunction ../../rasterLib/function/CompositeBandFunction ../../rasterLib/function/ContrastBrightnessFunction ../../rasterLib/function/ConvolutionFunction ../../rasterLib/function/ExtractBandFunction ../../rasterLib/function/HillshadeFunction ../../rasterLib/function/LocalFunction ../../rasterLib/function/MaskFunction ../../rasterLib/function/NDVIFunction ../../rasterLib/function/SlopeFunction ../../rasterLib/function/StretchFunction ../../rasterLib/function/RemapFunction ../../rasterLib/function/IdentityFunction ../../rasterLib/function/ResampleFunction".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w){return function(){function v(y){y.prototype.supportWebGL&&(C[y.prototype.functionName]=y);y.prototype.support2D&&(z[y.prototype.functionName]=y);D[y.prototype.functionName]=y}var z={},C={},D={};v(b);v(q);v(n);v(p);v(m);v(a);v(e);v(k);v(h);v(f);v(c);v(d);v(g);v(t);v(r);v(w);return{cpu:z,gpu:C,functions:D,register:v,getFunction:function(y){return D[y]},support:function(y,u){return!!("gpu"===u?C:"cpu"===u?z:D)[y]}}}()})},"esri/layers/rasterLib/function/AspectFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils".split(" "),
function(F,l,b,q,n,p,m,a){return F([b,m],{declaredClass:"esri.layers.rasterLib.function.AspectFunction",functionName:"Aspect",supportWebGL:!0,support2D:!0,constructor:function(e){this.functionArguments=this.mixinIgnoreCase({raster:null},e)},bind:function(){var e=this.getSourceRasterInfo();if(!e.raster)return Error("The raster input to aspect function is invalid.");this.rasterInfo=l.mixin(e.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:[{min:0,max:360}],histograms:null});
this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(e){this._performance.start();e=a.aspect(e.raster);this._addPerformanceMetric(this._performance.elapsed());return e},readGL:function(e){this._performance.start();this._initializeProgram({fragment:p.aspect,fragmentName:"Aspect"});var k=this._setupTextureData(e.raster),h=this.bindFrameBuffer(),f=this.gl,c=f.drawingBufferWidth;f=f.drawingBufferHeight;var d=k.extent;
this._setUniforms({u_resolution:e&&e.raster&&e.raster.pixelBlock?[1/e.raster.pixelBlock.width,1/e.raster.pixelBlock.height]:[1/c,1/f],u_cellSize:[(d.xmax-d.xmin)/c,(d.ymax-d.ymin)/f]});this._bindTexture(k.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:k.extent,texture:h.texture}}})})},"esri/layers/rasterLib/function/surfaceUtils":function(){define(["dojo/_base/lang"],function(F){return{hillshade:function(l,b){if(null!==l&&null!==l.pixelBlock&&
null!==l.pixelBlock.pixels){var q=this._clonePixelBlock(l.pixelBlock),n=b.altitude,p=b.azimuth,m=b.zFactor,a=b.psPower,e=b.psFactor,k=b.hillshadeType,h=b.slopeType,f=b.isGCS;1===k&&(m*=2);var c=q.width,d=q.height,g=q.pixels[0],t=q.mask,r=new Uint8Array(c*d);t&&r.set(t);var w=new Uint8Array(c*d),v=(l.extent.xmax-l.extent.xmin)/c,z=(l.extent.ymax-l.extent.ymin)/d,C=m/(8*v),D=m/(8*z);.001<m&&f&&(C/=111E3,D/=111E3);3===h&&(f?(C=111E3*v,D=111E3*z,C=(m+Math.pow(C,a)*e)/(8*C),D=(m+Math.pow(D,a)*e)/(8*D)):
(C=(m+Math.pow(v,a)*e)/(8*v),D=(m+Math.pow(z,a)*e)/(8*z)));f=(90-n)*Math.PI/180;n=Math.cos(f);var y=(360-p+90)*Math.PI/180;p=Math.sin(f)*Math.cos(y);f=Math.sin(f)*Math.sin(y);m=[];a=[];e=[];v=[315,270,225,360,180,0];var u=[60,60,60,60,60,90];z=[3,5,3,2,1,4];var B=z.reduce(function(K,P){return K+P});h=z.map(function(K){return K/B});if(1===k){var x=v.length;for(z=0;z<x;z++)n=u[z],p=v[z],f=(90-n)*Math.PI/180,n=Math.cos(f),y=(360-p+90)*Math.PI/180,p=Math.sin(f)*Math.cos(y),f=Math.sin(f)*Math.sin(y),m.push(n),
a.push(p),e.push(f)}var A=0;for(z=1;z<d-1;z++)for(u=z*c,v=1;v<c-1;v++)if(t&&!t[u+v])w[u+v]=0;else{y=0;if(t&&(y=t[u-c+v-1]+t[u-c+v]+t[u-c+v+1]+t[u+v-1]+t[u+v+1]+t[u+c+v-1]+t[u+c+v]+t[u+c+v+1],7>y)){w[u+v]=0;r[u+v]=0;continue}if(7===y){var E=t[u-c+v-1]?g[u-c+v-1]:g[u+v];var J=t[u-c+v]?g[u-c+v]:g[u+v];var O=t[u-c+v+1]?g[u-c+v+1]:g[u+v];y=t[u+v-1]?g[u+v-1]:g[u+v];var S=t[u+v+1]?g[u+v+1]:g[u+v];A=t[u+c+v-1]?g[u+c+v-1]:g[u+v];var X=t[u+c+v]?g[u+c+v]:g[u+v];var Y=t[u+c+v+1]?g[u+c+v+1]:g[u+v]}else E=g[u-
c+v-1],J=g[u-c+v],O=g[u-c+v+1],y=g[u+v-1],S=g[u+v+1],A=g[u+c+v-1],X=g[u+c+v],Y=g[u+c+v+1];y=(O+S+S+Y-(E+y+y+A))*C;J=(A+X+X+Y-(E+J+J+O))*D;O=Math.sqrt(1+y*y+J*J);A=0;if(0===k)X=f*J-p*y,X=255*(n+X)/O,0>X&&(X=0),A=X;else if(1===k)for(E=0;E<x;E++)X=e[E]*J-a[E]*y,X=255*(m[E]+X)/O,0>X&&(X=0),A+=X*h[E];w[u+v]=A}for(z=0;z<d;z++)w[z*c]=w[z*c+1],w[(z+1)*c-1]=w[(z+1)*c-2];for(z=1;z<c-1;z++)w[z]=w[z+c],w[z+(d-1)*c]=w[z+(d-2)*c];q.pixelType="U8";q.pixels=[w];q.statistics=[{minValue:0,maxValue:255}];t&&(q.mask=
r);return{extent:l.extent,pixelBlock:q}}},slope:function(l,b){if(null!==l&&null!==l.pixelBlock&&null!==l.pixelBlock.pixels){var q=this._clonePixelBlock(l.pixelBlock),n=b.zFactor,p=b.psPower,m=b.psFactor,a=b.slopeType,e=b.isGCS,k=q.width,h=q.height,f=q.pixels[0],c=q.mask,d=new Uint8Array(k*h);c&&d.set(c);var g=new Float32Array(k*h),t=(l.extent.xmax-l.extent.xmin)/k,r=(l.extent.ymax-l.extent.ymin)/h,w=n/(8*t),v=n/(8*r);1E-4>Math.abs(n-1)&&e&&(w/=111E3,v/=111E3);3===a&&(e?(w=111E3*t,v=111E3*r,w=(n+Math.pow(w,
p)*m)/(8*w),v=(n+Math.pow(v,p)*m)/(8*v)):(w=(n+Math.pow(t,p)*m)/(8*t),v=(n+Math.pow(r,p)*m)/(8*r)));for(n=1;n<h-1;n++)for(m=n*k,p=1;p<k-1;p++)if(c&&!c[m+p])g[m+p]=0;else{r=0;if(c&&(r=c[m-k+p-1]+c[m-k+p]+c[m-k+p+1]+c[m+p-1]+c[m+p+1]+c[m+k+p-1]+c[m+k+p]+c[m+k+p+1],7>r)){g[m+p]=0;d[m+p]=0;continue}if(7===r){r=c[m-k+p-1]?f[m-k+p-1]:f[m+p];e=c[m-k+p]?f[m-k+p]:f[m+p];t=c[m-k+p+1]?f[m-k+p+1]:f[m+p];var z=c[m+p-1]?f[m+p-1]:f[m+p];var C=c[m+p+1]?f[m+p+1]:f[m+p];var D=c[m+k+p-1]?f[m+k+p-1]:f[m+p];var y=c[m+
k+p]?f[m+k+p]:f[m+p];var u=c[m+k+p+1]?f[m+k+p+1]:f[m+p]}else r=f[m-k+p-1],e=f[m-k+p],t=f[m-k+p+1],z=f[m+p-1],C=f[m+p+1],D=f[m+k+p-1],y=f[m+k+p],u=f[m+k+p+1];z=(t+C+C+u-(r+z+z+D))*w;r=(D+y+y+u-(r+e+e+t))*v;r=Math.sqrt(z*z+r*r);g[m+p]=1===a||3===a?57.2957795*Math.atan(r):100*r}for(n=0;n<h;n++)g[n*k]=g[n*k+1],g[(n+1)*k-1]=g[(n+1)*k-2];for(n=1;n<k-1;n++)g[n]=g[n+k],g[n+(h-1)*k]=g[n+(h-2)*k];q.pixelType="F32";q.pixels=[g];q.statistics=[{minValue:0,maxValue:255}];c&&(q.mask=d);return{extent:l.extent,pixelBlock:q}}},
aspect:function(l){if(null!==l&&null!==l.pixelBlock&&null!==l.pixelBlock.pixels){var b=this._clonePixelBlock(l.pixelBlock),q=b.width,n=b.height,p=b.pixels[0],m=b.mask,a=new Uint8Array(q*n);m&&a.set(m);var e=new Float32Array(q*n),k=1/((l.extent.xmax-l.extent.xmin)/q),h=1/((l.extent.ymax-l.extent.ymin)/n),f,c;for(f=1;f<n-1;f++){var d=f*q;for(c=1;c<q-1;c++)if(m&&!m[d+c])e[d+c]=0;else{var g=0;if(m&&(g=m[d-q+c-1]+m[d-q+c]+m[d-q+c+1]+m[d+c-1]+m[d+c+1]+m[d+q+c-1]+m[d+q+c]+m[d+q+c+1],7>g)){e[d+c]=0;a[d+c]=
0;continue}if(7===g){g=m[d-q+c-1]?p[d-q+c-1]:p[d+c];var t=m[d-q+c]?p[d-q+c]:p[d+c];var r=m[d-q+c+1]?p[d-q+c+1]:p[d+c];var w=m[d+c-1]?p[d+c-1]:p[d+c];var v=m[d+c+1]?p[d+c+1]:p[d+c];var z=m[d+q+c-1]?p[d+q+c-1]:p[d+c];var C=m[d+q+c]?p[d+q+c]:p[d+c];var D=m[d+q+c+1]?p[d+q+c+1]:p[d+c]}else g=p[d-q+c-1],t=p[d-q+c],r=p[d-q+c+1],w=p[d+c-1],v=p[d+c+1],z=p[d+q+c-1],C=p[d+q+c],D=p[d+q+c+1];w=(r+v+v+D-(g+w+w+z))*k;g=(z+C+C+D-(g+t+t+r))*h;0===w&&0===g?g=-1:(g=90-57.29578*Math.atan2(g,-w),0>g&&(g+=360),360===g?
g=0:360<g&&(g%=360));e[d+c]=g}}for(f=0;f<n;f++)e[f*q]=e[f*q+1],e[(f+1)*q-1]=e[(f+1)*q-2];for(f=1;f<q-1;f++)e[f]=e[f+q],e[f+(n-1)*q]=e[f+(n-2)*q];b.pixelType="F32";b.pixels=[e];b.statistics={minValue:0,maxValue:360};m&&(b.mask=a);return{extent:l.extent,pixelBlock:b}}},_clonePixelBlock:function(l){return l.clone?l.clone():F.clone(l)}}})},"esri/layers/rasterLib/function/BandArithmeticFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterIndex".split(" "),
function(F,l,b,q,n,p,m){return F([b,p],{declaredClass:"esri.layers.rasterLib.function.BandArithmeticFunction",functionName:"BandArithmetic",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({method:1,bandIndexes:"",raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to band arithmetic function is invalid.");this.rasterInfo=l.mixin(a.raster,{bandCount:8===this.functionArguments.method?a.raster.bandCount:
1,pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){this._performance.start();a=a.raster;var e=m.calculate(a.pixelBlock,{bandIndexes:this.functionArguments.bandIndexes,method:this.functionArguments.method});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&(e.pixelType=this.pixelType);
return{extent:a.extent,pixelBlock:e}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:n.bandArithmetic,fragmentName:"bandArithmetic"});var e=this.functionArguments.bandIndexes.trim().split(" ").map(function(c){return parseInt(c,10)});this._infraredBandID=e[0]-1;this._visibleBandID=e[1]-1;this._alterBand=2<Math.max(this._infraredBandID,this._visibleBandID)?!0:!1;a=this._setupTextureData(a.raster,this._alterBand&&2==e.length?{bandIDs:[this._infraredBandID,this._visibleBandID,
this._infraredBandID]}:{bandIDs:[e[0]-1,e[1]-1,e[2]-1]});var k=this.bindFrameBuffer(),h=this.functionArguments.method,f=2<e.length?e.slice(2):null;this._alterBand?this._setUniforms({u_method:h,u_bandId_nir:0,u_bandId_red:1,u_constants:f}):this._setUniforms({u_method:h,u_bandId_nir:e[0]-1,u_bandId_red:e[1]-1,u_constants:f});this._bindTexture(a.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:k.texture}}})})},"esri/layers/rasterLib/function/rasterIndex":function(){define(["dojo/_base/lang"],
function(F){return{calculate:function(l,b){if(l&&l.pixels&&l.pixels.length){var q=b&&b.bandIndexes,n=b&&b.method,p=q.trim().split(" ").map(function(k){return parseInt(k,10)}).filter(function(k){return null!=k}),m=this._clonePixelBlock(l),a=m.pixels,e=m.mask;switch(n){case 1:a=this._calculateNDVI(e,a[p[0]-1],a[p[1]-1]);break;case 2:a=this._calculateSAVI(e,a[p[0]-1],a[p[1]-1],p[2]);break;case 3:a=this._calculateTSAVI(e,a[p[0]-1],a[p[1]-1],p[2],p[3],p[4]);break;case 4:a=this._calculateMSAVI(e,a[p[0]-
1],a[p[1]-1]);break;case 5:a=this._calculateGEMI(e,a[p[0]-1],a[p[1]-1]);break;case 6:a=this._calculatePVI(e,a[p[0]-1],a[p[1]-1],p[2],p[3]);break;case 7:a=this._calculateGVITM(e,a[p[0]-1],a[p[1]-1],a[p[2]-1],a[p[3]-1],a[p[4]-1],a[p[5]-1]);break;case 8:a=this._calculateSultan(e,a[p[0]-1],a[p[1]-1],a[p[2]-1],a[p[3]-1],a[p[4]-1],a[p[5]-1]);break;case 9:a=this._calculateVARI(e,a[p[0]-1],a[p[1]-1],a[p[2]-1]);break;case 0:a=this._calculateUserDefined(e,a,q)}m.pixels=a;m.pixelType="F32";m.calculateStatistics();
return m}},_clonePixelBlock:function(l){return l.clone?l.clone():F.clone(l)},_parseUserDefined:function(l,b){l=l.replace(" ","");0===l.indexOf("-")&&(l="0"+l);0===l.indexOf("+")&&(l=l.slice(1,l.length));var q=l.split(""),n=[],p=[],m="+-*/()".split(""),a,e="";for(a=0;a<q.length;a++){var k=q[a];m.some(function(h){return h===k})?(""!==e&&p.push(parseFloat(e)),n.push(k),e=""):"b"===k.toLowerCase()?(a++,e=k.concat(q[a]),p.push(b[parseInt(e[1],10)-1]),e=""):(e=e.concat(k),a===q.length-1&&p.push(parseFloat(e)))}return{ops:n,
nums:p}},_op:function(l,b,q,n){if(q.constructor===Number&&n.constructor===Number)return q+n;var p;if(q.constructor===Number){var m=n.length;var a=q;q=new Float32Array(m);for(p=0;p<m;p++)q[p]=a}else if(m=q.length,n.constructor===Number)for(a=n,n=new Float32Array(m),p=0;p<m;p++)n[p]=a;a=new Float32Array(m);if(null==l)if("+"===b)for(p=0;p<m;p++)a[p]=q[p]+n[p];else if("-"===b)for(p=0;p<m;p++)a[p]=q[p]-n[p];else if("*"===b)for(p=0;p<m;p++)a[p]=q[p]*n[p];else{if("/"===b)for(p=0;p<m;p++)a[p]=q[p]/n[p]}else if("+"===
b)for(p=0;p<m;p++)l[p]&&(a[p]=q[p]+n[p]);else if("-"===b)for(p=0;p<m;p++)l[p]&&(a[p]=q[p]-n[p]);else if("*"===b)for(p=0;p<m;p++)l[p]&&(a[p]=q[p]*n[p]);else if("/"===b)for(p=0;p<m;p++)l[p]&&(a[p]=q[p]/n[p]);return a},_shrinkOp:function(l,b){l.splice(b,1);var q=0,n=0,p=0;do{for(q=p=n=0;q<l.length;q++)if("("===l[q])n=q;else if(")"===l[q]){p=q;break}p===n+1&&l.splice(n,2)}while(p===n+1);return l},_getPriorityOpIndex:function(l,b){if(1===l.length)return{opIndex:0,numIndex:0};var q=0,n=0,p=0,m=-1,a=0;for(q=
0;q<l.length;q++)if("("===l[q])n=q;else if(")"===l[q]){p=q;break}var e=0===p?l:l.slice(n+1,p);for(q=0;q<e.length;q++)if("*"===e[q]||"/"===e[q]){m=q;break}if(!(-1<m))for(q=0;q<e.length;q++)if("+"===e[q]||"-"===e[q]){m=q;break}0<p&&(m+=n+1);for(q=0;q<m;q++)"("===l[q]&&a++;return{opIndex:m,numIndex:m-a}},_calculateUserDefined:function(l,b,q){b=this._parseUserDefined(q,b);q=b.ops;for(var n=b.nums,p,m,a;0<q.length&&(b=this._getPriorityOpIndex(q,n),p=q[b.opIndex],m=n[b.numIndex],a=n[b.numIndex+1],p=this._op(l,
p,m,a),1!==q.length);)q=this._shrinkOp(q,b.opIndex),n.splice(b.numIndex,2,p);return[p]},_calculateNDVI:function(l,b,q){var n=q.length,p=new Float32Array(n),m;if(null==l)for(m=0;m<n;m++){var a=q[m];var e=b[m];p[m]=(e-a)/(e+a)}else for(m=0;m<n;m++)l[m]&&(a=q[m],e=b[m],p[m]=(e-a)/(e+a));return[p]},_calculateSAVI:function(l,b,q,n){var p=q.length,m=new Float32Array(p),a;if(null==l)for(a=0;a<p;a++){var e=q[a];var k=b[a];m[a]=(k-e)/(k+e+n)*(1+n)}else for(a=0;a<p;a++)l[a]&&(e=q[a],k=b[a],m[a]=(k-e)/(k+e+
n)*(1+n));return[m]},_calculateTSAVI:function(l,b,q,n,p,m){var a=q.length,e=new Float32Array(a),k=-p*n+m*(1+n*n);if(null==l)for(m=0;m<a;m++){var h=q[m];var f=b[m];e[m]=n*(f-n*h-p)/(p*f+h+k)}else for(m=0;m<a;m++)l[m]&&(h=q[m],f=b[m],e[m]=n*(f-n*h-p)/(p*f+h+k));return[e]},_calculateMSAVI:function(l,b,q){var n=q.length,p=new Float32Array(n),m;if(null==l)for(m=0;m<n;m++){var a=q[m];var e=b[m];p[m]=.5*(2*(e+1)-Math.sqrt(Math.pow(2*e+1,2)-8*(e-a)))}else for(m=0;m<n;m++)l[m]&&(p[m]=.5*(2*(e+1)-Math.sqrt(Math.pow(2*
e+1,2)-8*(e-a))));return[p]},_calculateGEMI:function(l,b,q){var n=q.length,p=new Float32Array(n),m;if(null==l)for(m=0;m<n;m++){var a=q[m];var e=b[m];e=(2*(e*e-a*a)+1.5*e+.5*a)/(e+a+.5);p[m]=e*(1-.25*e)-(a-.125)/(1-a)}else for(m=0;m<n;m++)l[m]&&(a=q[m],e=b[m],e=(2*(e*e-a*a)+1.5*e+.5*a)/(e+a+.5),p[m]=e*(1-.25*e)-(a-.125)/(1-a));return[p]},_calculatePVI:function(l,b,q,n,p){var m=q.length,a=new Float32Array(m),e,k=Math.sqrt(1+n*n);if(null==l)for(e=0;e<m;e++){var h=q[e];var f=b[e];a[e]=(f-n*h-p)/k}else for(e=
0;e<m;e++)l[e]&&(h=q[e],f=b[e],a[e]=(f-n*h-p)/k);return[a]},_calculateGVITM:function(l,b,q,n,p,m,a){var e=b.length,k=new Float32Array(e),h;if(null==l)for(h=0;h<e;h++)k[h]=-.2848*b[h]-.2435*q[h]-.5436*n[h]+.7243*p[h]+.084*m[h]-1.18*a[h];else for(h=0;h<e;h++)l[h]&&(k[h]=-.2848*b[h]-.2435*q[h]-.5436*n[h]+.7243*p[h]+.084*m[h]-1.18*a[h]);return[k]},_calculateSultan:function(l,b,q,n,p,m,a){q=b.length;var e=new Float32Array(q),k=new Float32Array(q),h=new Float32Array(q),f;if(null==l)for(f=0;f<q;f++)e[f]=
m[f]/a[f]*100,k[f]=m[f]/b[f]*100,h[f]=n[f]/p[f]*(m[f]/p[f])*100;else for(f=0;f<q;f++)l[f]&&(e[f]=m[f]/a[f]*100,k[f]=m[f]/b[f]*100,h[f]=n[f]/p[f]*(m[f]/p[f])*100);return[e,k,h]},_calculateVARI:function(l,b,q,n){var p=b.length,m=new Float32Array(p),a;if(null==l)for(a=0;a<p;a++){var e=b[a];var k=q[a];var h=n[a];m[a]=(k-e)/(k+e-h)}else for(a=0;a<p;a++)if(l[a])for(a=0;a<p;a++)e=b[a],k=q[a],h=n[a],m[a]=(k-e)/(k+e-h);return[m]}}})},"esri/layers/rasterLib/function/ColormapFunction":function(){define("dojo/_base/declare dojo/_base/lang ../../../renderers/colorRampGenerator ./RasterFunctionX ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),
function(F,l,b,q,n,p,m){return F([q,p],{declaredClass:"esri.layers.rasterLib.function.ColormapFunction",functionName:"Colormap",pixelType:"U8",renderTexture:!1,supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({colormap:null,colorRampName:null,colorRamp:null,colorMapName:null,raster:null},a);this.invert=a&&a.invert;a=a.colormap||a.Colormap;if(a){if(a.features||a[0].attributes){a=a.features||a;var e=Object.keys(a[0].attributes);var k=e.filter(function(t){return"alpha"===
t.toLowerCase()})[0];var h=e.filter(function(t){return"value"===t.toLowerCase()})[0];var f=e.filter(function(t){return"red"===t.toLowerCase()})[0];var c=e.filter(function(t){return"green"===t.toLowerCase()})[0];var d=e.filter(function(t){return"blue"===t.toLowerCase()})[0];if(!(h&&f&&c&&d))throw"invalid colormap";a=a.map(function(t){return k?[t.attributes[h],t.attributes[f],t.attributes[c],t.attributes[d],t.attributes[k]]:[t.attributes[h],t.attributes[f],t.attributes[c],t.attributes[d]]});var g=1.1>
Math.max.apply(null,a.map(function(t){return t[1]}));e=k&&1.1>Math.max.apply(null,a.map(function(t){return t[4]}));if(g)for(g=0;g<a.length;g++)a[g][1]=Math.round(255*a[g][1]),a[g][2]=Math.round(255*a[g][2]),a[g][3]=Math.round(255*a[g][3]),e&&(a[g][4]=Math.round(255*a[g][4]))}this.functionArguments.colormap=this._sortClr(a)}this._initialize()},bind:function(a){this._initialize();a=this.getSourceRasterInfo(a);if(!a.raster||"F32"===a.raster.pixelType)return Error("The raster input to colormap function is invalid. It must be integer type.");
this.rasterInfo=l.mixin(a.raster,{bandCount:3,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Processed";return!0},read2D:function(a){return this._colorize(a.raster)},readGL:function(a){return this._colorizeGL(a.raster)},_colorize:function(a){this._performance.start();var e=m.colorize(a.pixelBlock,{indexedColormap:this._indexedColormap,indexedColormapOffset:this._indexedColormapOffset,
indexed2DColormap:this._indexed2DColormap,alphaSpecified:this._alphaSpecified});this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,pixelBlock:e}},_binarySearchClr:function(a,e){for(var k=0,h=a.length-1,f=0,c=0;k<h;)if(f=Math.floor((k+h)/2),c=a[f],c[0]<e)k=f;else if(c[0]>e)h=f;else return c.slice(1);return null},_sortClr:function(a,e){var k,h,f=[];for(k=0;k<a.length;k++)f.push(a[k]);for(k=0;k<f.length-1;k++){var c=f[k];for(h=k+1;h<f.length;h++)c[0]>f[h][0]&&(c=f[h],f[h]=
f[k],f[k]=c)}if(e)for(k=0;k<f.length/2;k++)c=f[k],f[f.length-1-k]=f[k],f[k]=c;return f},_invertColorRamp:function(a){if(!a)return a;var e={type:a.type};"random"===a.type?e=a:"multipart"===a.type?e.colorRamps=a.colorRamps.map(function(k){return{fromColor:k.toColor,toColor:k.fromColor}}).reverse():(e.fromColor=a.toColor,e.toColor=a.fromColor);return e},_initialize:function(){this._indexedColormapOffset=0;if(this.functionArguments.colormap){var a=m.buildIndexedColormap(this.functionArguments.colormap);
this._alphaSpecified=a&&a.alphaSpecified;this._indexedColormap=a&&a.indexedColormap;this._indexedColormapOffset=a&&a.offset;this._indexedColormap||(this._indexed2DColormap=this._getIndexed2DColormap())}else this.functionArguments.colorRamp?this._indexedColormap="multipart"===this.functionArguments.colorRamp.type?this.invert?b.createMultiPartColorRamp(this._invertColorRamp(this.functionArguments.colorRamp)):b.createMultiPartColorRamp(this.functionArguments.colorRamp):this.invert?b.createAlgorithmicColorRamp(this._invertColorRamp(this.functionArguments.colorRamp)):
b.createAlgorithmicColorRamp(this.functionArguments.colorRamp):this.functionArguments.colormapName&&"random"===this.functionArguments.colormapName.toLowerCase()&&(this._indexedColormap=b.createRandomColorRamp())},_getIndexed2DColormap:function(){var a=this.functionArguments.colormap;if(!a)return null;var e=0;0>a[0][0]&&(e=a[0][0]);var k=[],h=5===a[0].length,f;for(f=0;f<a.length;f++)k[a[f][0]-e]=h?a[f].slice(1):a[f].slice(1).concat([255]);return k},_colorizeGL:function(a){this._performance.start();
this._initializeProgram({fragment:n.colormap,fragmentName:"Colormap"});var e=this._indexedColormap,k=this._indexedColormapOffset;this._clrTexture||(this._clrTexture=this._setupColormapTexture(e));var h=this._clrTexture,f=this.bindFrameBuffer();a=this._setupTextureData(a);this._setUniforms({u_indexedColormapOffset:k,u_indexedColormapMaxIndex:e.length/4-1});this._bindTexture(h,"u_image1");this._bindTexture(a.texture,"u_image");this._drawGL();return{extent:a.extent,texture:f.texture}},_setupColormapTexture:function(a){var e=
this._createTexture(),k=this.gl,h=a.length/4,f=new Float32Array(a.length),c,d=this.renderTexture?255:1;for(c=0;c<a.length;c++)f[c]=a[c]/d;k.getExtension("OES_texture_float");k.texImage2D(k.TEXTURE_2D,0,k.RGBA,h,1,0,k.RGBA,k.FLOAT,f);return e}})})},"esri/renderers/colorRampGenerator":function(){define(["dojo/_base/declare","dojo/_base/lang","../renderers/colorUtils"],function(F,l,b){return{createAlgorithmicColorRamp:function(q,n){if(!q)return null;var p=q.fromColor,m=q.toColor;if(!p||!m)return null;
void 0===p.r&&3<=p.length&&(p={r:p[0],g:p[1],b:p[2]});void 0===m.r&&3<=m.length&&(m={r:m[0],g:m[1],b:m[2]});var a=q.size||256,e=q.algorithm||"cie-lab";if(1===a)var k=[p.r,p.g,p.b,255];else if(2===a)k=[p.r,p.g,p.b,255,m.r,m.g,p.b,255];else if(-1<e.toLowerCase().indexOf("hsv")){k=b.toHSV(p);m=b.toHSV(m);a=a||256;var h=0===k.s,f=0===m.s;p=k.h;e=m.h;h&&!f?p=k.h=e:f&&!h&&(e=m.h=p);h=Math.abs(e-p);180>h?e=(e-p)/(a-1):(h=360-h,e=p>e?h/(a-1):-h/(a-1));h=(m.s-k.s)/(a-1);f=(m.v-k.v)/(a-1);var c=k.s;k=k.v;var d,
g=new Uint8Array(4*a);for(d=0;d<a-1;d++){var t=b.toRGB({h:p,s:c,v:k});g[4*d]=t.r;g[4*d+1]=t.g;g[4*d+2]=t.b;g[4*d+3]=255;p+=e;c+=h;k+=f;360<p?p-=360:0>p&&(p+=360)}t=b.toRGB(m);g[4*(a-1)]=t.r;g[4*(a-1)+1]=t.g;g[4*(a-1)+2]=t.b;g[4*(a-1)+3]=255;k=g}else if(-1<e.toLowerCase().indexOf("lch")){c=b.toLCH(p);m=b.toLCH(m);a=a||256;k=(m.l-c.l)/(a-1);p=(m.c-c.c)/(a-1);e=(m.h-c.h)/(a-1);h=c.l;f=c.c;c=c.h;g=new Uint8Array(4*a);for(d=0;d<a-1;d++)t=b.toRGB({l:h,c:f,h:c}),g[4*d]=t.r,g[4*d+1]=t.g,g[4*d+2]=t.b,g[4*
d+3]=255,h+=k,f+=p,c+=e;t=b.toRGB(m);g[4*(a-1)]=t.r;g[4*(a-1)+1]=t.g;g[4*(a-1)+2]=t.b;g[4*(a-1)+3]=255;k=g}else if(-1<e.toLowerCase().indexOf("lab")){c=b.toLAB(p);m=b.toLAB(m);a=a||256;k=(m.l-c.l)/(a-1);p=(m.a-c.a)/(a-1);e=(m.b-c.b)/(a-1);h=c.l;f=c.a;c=c.b;g=new Uint8Array(4*a);for(d=0;d<a-1;d++)t=b.toRGB({l:h,a:f,b:c}),g[4*d]=t.r,g[4*d+1]=t.g,g[4*d+2]=t.b,g[4*d+3]=255,h+=k,f+=p,c+=e;t=b.toRGB(m);g[4*(a-1)]=t.r;g[4*(a-1)+1]=t.g;g[4*(a-1)+2]=t.b;g[4*(a-1)+3]=255;k=g}if(n&&!1===n.flattened)for(m=k,
k=[],a=0;a<k/4;a++)k[a]=m.slice(4*a,4*a+4);return k},createMultiPartColorRamp:function(q,n){if(!q)return null;n=n&&l.clone(n)||{flattened:!0};var p=q.colorRamps;if(!p||0===p.length)return null;var m=q.size||256,a=Math.max(Math.floor(m/p.length),1),e=Math.max(a,m-(p.length-1)*a),k=!1!==n.flattened;n.flattened=!0;m=(p.length-1)*a+e;var h=new Uint8Array(4*m);for(m=0;m<p.length;m++){var f={fromColor:p[m].fromColor,toColor:p[m].toColor,size:m===p.length-1?e:a};h instanceof Array?h.concat(this.createAlgorithmicColorRamp(f,
n)):h.set(this.createAlgorithmicColorRamp(f,n),a*m*4)}if(!k)for(p=h,h=[],m=0;m<h/4;m++)h[m]=p.slice(4*m,4*m+4);return h},createRandomColorRamp:function(q){q=q||{};var n=q.size||256,p=!1===q.flattened;var m=p?new Uint8Array(4*n):[];for(q=0;q<n;q++)p?(m[4*q]=Math.round(255*Math.random()),m[4*q+1]=Math.round(255*Math.random()),m[4*q+2]=Math.round(255*Math.random()),m[4*q+3]=255):m[q]=[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()),255];return m}}})},"esri/layers/rasterLib/function/rasterUtils":function(){define(["dojo/_base/lang"],
function(F){return{mask:function(l,b){if(l&&l.pixels&&l.pixels.length){var q=this._clonePixelBlock(l),n=b.includedRanges,p=b.noDataInterpretation,m=b.noDataValues;if(null===n&&null===m)return q;var a=q.pixels,e=q.mask,k=q.width*q.height,h=a.length,f;if(null!==m&&m.length!==h)throw"expect "+h+" elements in noDataValues";if(null!==n&&n.length!==2*h)throw"expect "+2*h+" elements in IncludeRanges";if(null==e){e=new Uint8Array(k);for(f=0;f<k;f++)e[f]=1;q.mask=e}if(0===p)for(p=0;p<h;p++){var c=a[p];var d=
null===n?null:n[2*p];var g=null===n?null:n[2*p+1];var t=null===m?null:parseFloat(m[p]);if(null===d||null===g)for(f=0;f<k;f++){if(e[f]){var r=c[f];r===t&&(e[f]=0)}}else if(null===t)for(f=0;f<k;f++)e[f]&&(r=c[f],r<d||r>g)&&(e[f]=0);else for(f=0;f<k;f++)e[f]&&(r=c[f],r<d||r>g||r===t)&&(e[f]=0)}else{var w=new Uint8Array(k);for(f=0;f<k;f++)w[f]=e[f];for(p=0;p<h;p++)if(c=a[p],d=null===n?null:n[2*p],g=null===n?null:n[2*p+1],t=null===m?null:parseFloat(m[p]),null===d||null===g)for(f=0;f<k;f++)w[f]&&(r=c[f],
r!==t&&(w=0));else if(null===t)for(f=0;f<k;f++)w[f]&&(r=c[f],r<=d&&r<=g&&(w=0));else for(f=0;f<k;f++)w[f]&&(r=c[f],r<=d&&r<=g&&r!==t&&(w=0));for(f=0;f<k;f++)e[f]&&w[f]&&(e[f]=0)}return q}},calculateStatisticsHistograms:function(l,b){var q=this._clonePixelBlock(l),n=q.pixelType,p=q.pixels,m=q.mask,a=p.length,e,k,h=[],f;for(e=0;e<a;e++){var c={min:-.5,max:255.5,size:256,counts:new Uint32Array(256)};var d=c.counts;var g=p[e];if("U8"===n)if(m)for(k=0;k<q.width*q.height;k++)m[k]&&d[g[k]]++;else for(k=
0;k<q.width*q.height;k++)d[g[k]]++;else{var t=q.statistics[e].minValue;var r=q.statistics[e].maxValue;c.min=t;c.max=r;r=(r-t)/256;var w=new Uint32Array(257);if(m)for(k=0;k<q.width*q.height;k++)m[k]&&w[Math.floor((g[k]-t)/r)]++;else for(k=0;k<q.width*q.height;k++)w[Math.floor((g[k]-t)/r)]++;for(k=0;255>k;k++)d[k]=w[k];d[255]=w[255]+w[256]}h.push(c);t=q.statistics[e].minValue;r=q.statistics[e].maxValue;for(k=w=f=g=0;k<c.size;k++)g+=d[k],f+=k*d[k];f/=g;for(k=0;k<c.size;k++)w+=d[k]*Math.pow(k-f,2);d=
Math.sqrt(w/(g-1));k=(f+.5)*(c.max-c.min)/c.size+c.min;c=d*(c.max-c.min)/c.size;q.statistics[e]={min:t,minValue:t,max:r,maxValue:r,mean:k,stddev:c}}q.histograms=h;return q},buildIndexedColormap:function(l,b){if(!l)return null;var q=0;0>l[0][0]&&(q=l[0][0]);var n=Math.max(256,l[l.length-1][0]-q);if(65536<n)return null;var p=new Uint8Array(4*n),m=[],a,e=0,k=5===l[0].length;if(b)for(m=l[e],a=m[0]-q;a<n;a++)p[4*a]=m[1],p[4*a+1]=m[2],p[4*a+2]=m[3],p[4*a+3]=k?m[4]:255,a===m[0]-q&&(m=e===l.length-1?m:l[++e]);
else for(a=0;a<l.length;a++)m=l[a],e=4*(m[0]-q),p[e]=m[1],p[e+1]=m[2],p[e+2]=m[3],p[e+3]=k?m[4]:255;return{indexedColormap:p,offset:q,alphaSpecified:k}},colorize:function(l,b){if(null!==l&&null!==l.pixels){var q=this._clonePixelBlock(l),n=q.pixels,p=q.width*q.height,m=q.mask,a=b.indexedColormap,e=b.indexedColormapOffset,k=a&&a.length-1,h=b.indexed2DColormap,f=b.alphaSpecified;if(3<=n.length)throw"colormap only works on single band image";var c=n[0],d=new Uint8Array(c.length),g=new Uint8Array(c.length),
t=new Uint8Array(c.length),r=0;if(a)if(m)for(n=0;n<p;n++)m[n]&&(r=4*(c[n]-e),r<e||r>k?m[n]=0:(d[n]=a[r],g[n]=a[r+1],t[n]=a[r+2],m[n]=a[r+3]));else{m=new Uint8Array(p);for(n=0;n<p;n++)r=4*(c[n]-e),r<e||r>k?m[n]=0:(d[n]=a[r],g[n]=a[r+1],t[n]=a[r+2],m[n]=a[r+3]);q.mask=m}else if(m)for(n=0;n<p;n++)m[n]&&(a=h[c[n]],d[n]=a[0],g[n]=a[1],t[n]=a[2],m[n]=a[3]);else{m=new Uint8Array(p);for(n=0;n<p;n++)a=h[c[n]],d[n]=a[0],g[n]=a[1],t[n]=a[2],m[n]=a[3];q.mask=m}q.pixels=[d,g,t];q.statistics=null;q.pixelType="U8";
q.maskIsAlpha=f;return q}},convolute:function(l,b){var q=this._clonePixelBlock(l),n=q.pixels,p=q.width,m=q.height,a=p*m,e=n.length,k,h,f,c,d,g=[],t=[],r=b.normalizedKernel,w=b.kernelRows,v=b.kernelCols;for(k=0;k<e;k++){var z=n[k];var C=new Float32Array(a);C.set(z);for(c=1;c<m-1;c++){var D=c*p;for(d=1;d<p-1;d++){for(h=t=0;h<w;h++)for(f=0;f<v;f++)t+=z[D+d+(h-1)*p+f-1]*r[h*v+f];C[D+d]=t}}g.push(C)}q.pixels=g;return q},contrastBrightnessStretch:function(l,b){if(null!==l&&null!==l.pixels){var q=this._clonePixelBlock(l),
n=q.pixels,p=q.mask,m=q.width*q.height,a=n.length;var e=b&&b.contrastOffset;var k=b&&b.brightnessOffset;if("U8"!==q.pixelType)throw"the contrast and brightness function only supports 8 bit unsigned integer data";var h=this._createContrastBrightnessLUT(e,k);if(null==p)for(k=0;k<m;k++)for(e=0;e<a;e++)n[e][k]=h[n[e][k]];else for(k=0;k<m;k++)if(p[k])for(e=0;e<a;e++)n[e][k]=h[n[e][k]];q.pixelType="U8";return q}},isNull:function(l,b){if(null!==l&&null!==l.pixels){var q=this._clonePixelBlock(l),n=q.mask,
p=q.pixels[0],m=p.length,a;if(n){for(a=0;a<m;a++)p[a]=n[a]?0:1;q.mask=null}else if(p.fill)p.fill(0);else for(a=0;a<m;a++)p[a]=0;return q}},setNull:function(l){if(null!==b&&null!==b.pixels){var b=this._clonePixelBlock(l);l=b.mask;var q=b.pixels[0],n=q.length,p;l=l||new Uint8Array(n);for(p=0;p<n;p++)l[p]=q[p]?0:1;b.mask=l;return b}},local:function(l,b){if(!b)return l[0];var q=b.rasterCountNeeded,n=b.functor,p=this._clonePixelBlock(l[0]);if(null!==p&&null!==p.pixels){var m=p.width*p.height,a,e=(a=l[1])&&
a.pixels[0],k=a&&a.mask,h=p.mask,f=p.pixels[0];if(2===q)if(!h&&k)h=k;else if(h&&k)for(a=0;a<m;a++)h[a]=h[a]&&k[a]?1:0;p.mask=h;if(1===q)if(null==h)for(a=0;a<m;a++)f[a]=n(f[a]);else for(a=0;a<m;a++)h[a]&&(f[a]=n(f[a]));else if(2===q)if(null==h)for(a=0;a<m;a++)f[a]=n(f[a],e[a]);else for(a=0;a<m;a++)h[a]&&(f[a]=n(f[a],e[a]));p.mask=h;p.calculateStatistics();return p}},remapColor:function(l,b){var q=this._clonePixelBlock(l),n=q.width*q.height,p=b.length,m=Math.floor(p/2),a=b[Math.floor(m)],e=b[0].value,
k=b[b.length-1].value,h=q.pixels[0],f,c,d=!1,g=new Uint8Array(n),t=new Uint8Array(n),r=new Uint8Array(n),w=q.mask,v=4===b[0].mappedColor.length;w&&0!==w.length||(w=new Uint8Array(n),w.fill(v?255:1),q.mask=w);for(c=0;c<n;c++)if(w[c]){var z=h[c];if(z<e||z>k)g[c]=t[c]=r[c]=w[c]=0;else{d=!1;var C=m;var D=a;var y=0;for(f=p-1;1<f-y;){if(z===D.value){d=!0;break}z>D.value?y=C:f=C;C=Math.floor((y+f)/2);D=b[Math.floor(C)]}d||(D=z===b[f].value?b[f]:b[y]);g[c]=D.mappedColor[0];t[c]=D.mappedColor[1];r[c]=D.mappedColor[2];
w[c]=D.mappedColor[3]}}q.pixels=[g,t,r];q.mask=w;q.pixelType="u8";q.maskIsAlpha=v;return q},_clonePixelBlock:function(l){if(l.clone)return l.clone();var b=F.clone(l),q;if(l.pixels&&l.pixels[0]&&0<l.pixels[0].length&&!(b.pixels&&b.pixels[0]&&0<b.pixels[0].length)){b.pixels=[];var n=l.pixels.length;for(q=0;q<n;q++)b.pixels[q]=new l.pixels[q].constructor(l.pixels[q])}if(l.statistics)for(b.statistics=[],n=l.statistics.length,q=0;q<n;q++)b.statistics[q]=F.clone(l.statistics[q]);l.mask&&(b.mask=new Uint8Array(l.mask));
return b},_createContrastBrightnessLUT:function(l,b){if(this._contrastCache&&this._contrastCache.contrastOffset===l&&this._contrastCache.brightnessOffset===b)return this._contrastCache.lut;var q=Math.min(Math.max(l,-100),100),n=Math.min(Math.max(b,-100),100),p,m=new Uint8Array(256);for(p=0;256>p;p++){if(0<q&&100>q)var a=(200*p-25500+510*n)/(2*(100-q))+128;else 0>=q&&-100<q?a=(200*p-25500+510*n)*(100+q)/2E4+128:100===q?(a=200*p-25500+256*(100-q)+510*n,a=0<a?255:0):-100===q&&(a=128);m[p]=255<a?255:
0>a?0:a}this._contrastCache={contrastOffset:l,brightnessOffset:b,lut:m};return m}}})},"esri/layers/rasterLib/function/CompositeBandFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),function(F,l,b,q,n,p){return F([b,p],{declaredClass:"esri.layers.rasterLib.function.CompositeBandFunction",functionName:"CompositeBand",supportWebGL:!0,support2D:!0,constructor:function(m){this.functionArguments=this.mixinIgnoreCase({rasters:null},
m)},bind:function(m){m=this.getSourceRasterInfo(m);if(!m.rasters)return Error("The rasters input to composite band function is invalid.");var a=[],e=[],k=m.rasters.length,h;if(m.rasters[0].statistics)for(h=0;h<k;h++)a.push(m.rasters[h].statistics[0]);if(m.rasters[0].histograms)for(h=0;h<k;h++)e.push(m.rasters[h].histograms[0]);this.rasterInfo=l.mixin(m.rasters[0],{bandCount:k,pixelType:this._calculatePixelType(this.pixelType,m.rasters[0].pixelType),statistics:a,histograms:e});return!0},read2D:function(m){m=
m.rasters;if(null!=m&&0!==m.length){var a=this._clonePixelData(m[0]),e=a.pixelBlock,k=[],h=[];for(f=0;f<m.length;f++)k.push(m[f].pixelBlock.pixels[0]),h.push(m[f].pixelBlock.statistics[0]);e.pixels=k;e.stackedStatistics=h;e.planes=m.length;var f;h=e.width*e.height;for(f=0;f<m.length;f++)if(e=m[f].pixelBlock.mask,c&&e)for(k=0;k<h;k++)c[k]&=e[k];else var c=c||e;a.maks=c;return a}},readGL:function(m){this._performance.start();this._initializeProgram({fragment:n.compositeBand,fragmentName:"CompositeBand"});
var a=m.rasters;if(null!=a&&0!==a.length){a=a.length;var e,k=this.bindFrameBuffer();for(e=0;e<a;e++){var h=this._setupTextureData(m.rasters[e],{notOriginal:0<e});var f=0<e?e.toString():"";this._bindTexture(h.texture,"u_image"+f)}this._setUniforms({u_rasterCount:a});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:h.extent,texture:k.texture}}}})})},"esri/layers/rasterLib/function/ContrastBrightnessFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),
function(F,l,b,q,n,p,m){return F([b,p],{declaredClass:"esri.layers.rasterLib.function.ContrastBrightnessFunction",renderTexture:!0,functionName:"ContrastBrightness",supportWebGL:!0,support2D:!0,pixelType:"U8",constructor:function(a){this.functionArguments=this.mixinIgnoreCase({contrastOffset:0,brightnessOffset:0,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to contrast and brightness function is invalid.");this.rasterInfo=l.mixin(a.raster,
{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Processed";return!0},read2D:function(a){a=a.raster;if(null!==a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels){var e=m.contrastBrightnessStretch(a.pixelBlock,{contrastOffset:this.functionArguments.contrastOffset,brightnessOffset:this.functionArguments.brightnessOffset});"Unknown"!==
this.pixelType&&(e.pixelType=this.pixelType,e.pixels=e.pixels.map(l.hitch(this,function(k){return this._clampBand(k,e.pixelType)})));return{extent:a.extent,pixelBlock:e}}},readGL:function(a){return this._cbGL(a.raster)},_cbGL:function(a){this._performance.start();this._initializeProgram({fragment:n.contrastBrightness,fragmentName:"ContrastBrightness"});a=this._setupTextureData(a);this._setUniforms({u_contrastOffset:Math.min(Math.max(this.functionArguments.contrastOffset,-100),100),u_brightnessOffset:Math.min(Math.max(this.functionArguments.brightnessOffset,
-100),100),u_scaleFactor:this.renderTexture?255:1});this._bindTexture(a.texture,"u_image");var e=this.bindFrameBuffer();this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:e.texture}}})})},"esri/layers/rasterLib/function/ConvolutionFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./convolutionKernel ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(F,l,b,q,n,p,m,a){return F([b,
m],{declaredClass:"esri.layers.rasterLib.function.ConvolutionFunction",functionName:"Convolution",supportWebGL:!0,support2D:!0,constructor:function(e){this.functionArguments=this.mixinIgnoreCase({columns:3,rows:3,type:0,kernel:null,raster:null},e)},bind:function(e){e=this.getSourceRasterInfo(e);if(!e.raster)return Error("The raster input to convolution function is invalid.");this.rasterInfo=l.mixin(e.raster,{bandCount:e.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,e.raster.pixelType),
statistics:e.raster.statistics,histograms:e.raster.histograms});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(e){this._performance.start();e=e.raster;var k=this._analyzeKernel(),h=a.convolute(e.pixelBlock,{normalizedKernel:k.normalizedKernel,kernelCols:this.functionArguments.columns,kernelRows:this.functionArguments.rows});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&
(h.pixelType=this.pixelType);h.pixels=h.pixels.map(l.hitch(this,function(f){return this._clampBand(f,h.pixelType)}));return{extent:e.extent,pixelBlock:h}},readGL:function(e){this._performance.start();this._initializeProgram({fragment:p.convolution,fragmentName:"Convolution"});var k=this._setupTextureData(e.raster),h=this.bindFrameBuffer(),f=this.gl,c=f.drawingBufferWidth;f=f.drawingBufferHeight;var d=this.functionArguments.kernel;this._setUniforms({u_resolution:e&&e.raster&&e.raster.pixelBlock?[1/
e.raster.pixelBlock.width,1/e.raster.pixelBlock.height]:[1/c,1/f],u_kernel:d,u_kernelSize:d.length});this._bindTexture(k.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:k.extent,texture:h.texture}},_analyzeKernel:function(){var e=this.functionArguments.kernel,k=e.reduce(function(c,d){return c+d});0!==k&&1!==k&&(e=e.map(function(c){return c/k}));var h,f=[];for(h=0;h<e.length;h++)f.some(function(c){return c===e[h]})||f.push(e[h]);return{normalizedKernel:e,
distinctValues:f}},_analyzeKernelPattern:function(){var e=this.functionArguments.rows,k=this.functionArguments.columns,h=this.functionArguments.kernel,f=[],c,d;for(c=0;c<e;c++)f.push({weights:h.slice(c*k,(c+1)*k)});var g;for(c=1;c<e;c++){var t=f[c].weights;for(h=0;h<c;h++)if(g=f[h].weights){var r=t[0]/g[0];for(d=1;d<k;d++)t[d]/g[d]!==r&&(r=null);null!==r&&(f[c]={row:h,factor:r})}}return f}})})},"esri/layers/rasterLib/function/ExtractBandFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),
function(F,l,b,q,n,p){return F([b,p],{declaredClass:"esri.layers.rasterLib.function.ExtractBandFunction",functionName:"ExtractBand",supportWebGL:!0,support2D:!0,constructor:function(m){this.functionArguments=this.mixinIgnoreCase({bandIDs:[],missingBandAction:0,raster:null},m)},bind:function(m){m=this.getSourceRasterInfo(m);if(!m.raster)return Error("The raster input to extract band function is invalid.");var a=[],e=m.raster.statistics,k=[],h=m.raster.histograms,f=this.functionArguments.bandIDs.length||
m.raster.bandCount;this.functionArguments.bandIDs.forEach(l.hitch(this,function(c){if(c>=f-1){if(1===this.functionArguments.missingBandAction)return Error("missing band "+c);c=f-1}if(0>c)return Error("missing band "+c);void 0!==e&&null!==e&&0<e.length&&a.push(e[c]);void 0!==h&&null!==h&&0<h.length&&k.push(h[c])}));this.rasterInfo=l.mixin(m.raster,{bandCount:f,pixelType:this._calculatePixelType(this.pixelType,m.raster.pixelType),statistics:a,histograms:k});return!0},read2D:function(m){m=this._clonePixelData(m.raster);
if(null!==m&&null!==m.pixelBlock&&null!==m.pixelBlock.pixels){this._performance.start();var a=m.pixelBlock,e=a.statistics,k=a.pixels,h=k.length;if(null==this.functionArguments.bandIDs)throw"missing bandIDs parameter";if(0===this.functionArguments.bandIDs.length)return m;var f=[],c=[];this.functionArguments.bandIDs.forEach(function(d){if(d>=h-1){if(1===this.functionArguments.missingBandAction)throw"missing band "+d;d=h-1}if(0>d)throw"missing band "+d;f.push(k[d]);void 0!==e&&null!==e&&0<e.length&&
c.push(e[d])});a.pixels=f;a.statistics=c;a.planes=this.functionArguments.bandIDs.length;return m}},readGL:function(m){this._performance.start();if(null==this.functionArguments.bandIDs)throw"missing bandIDs parameter";if(3<this.functionArguments.bandIDs.length)throw"this version does not support more than 3 bands yet";this._initializeProgram({fragment:n.extractBand,fragmentName:"ExtractBand"});var a=this.functionArguments.bandIDs;1===a.length&&(a=[a[0],a[0],a[0]]);this._bandIDs=a;this._alterBand=!(0===
this.functionArguments.bandIDs.length||0===a[0]&&1===a[1]&&2===a[2]);var e=!!(this._alterBand&&m.raster&&m.raster.texture);m=this._setupTextureData(m.raster,{bandIDs:a});var k=this.bindFrameBuffer();e?this._setUniforms({u_bandIDs:a,u_alterBand:this._alterBand}):this._setUniforms({u_bandIDs:a,u_alterBand:!1});this._bindTexture(m.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:m.extent,texture:k.texture}}})})},"esri/layers/rasterLib/function/HillshadeFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../renderers/colorRampGenerator ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils ./rasterUtils".split(" "),
function(F,l,b,q,n,p,m,a,e,k){return F([b,a],{declaredClass:"esri.layers.rasterLib.function.HillshadeFunction",functionName:"Hillshade",supportWebGL:!0,support2D:!0,renderTexture:!0,constructor:function(h){this.functionArguments=this.mixinIgnoreCase({hillshadeType:0,altitude:45,azimuth:315,zFactor:1,slopeType:1,psPower:.664,psFactor:.024,colorRamp:null,raster:null},h);this._azimuths=[315,270,225,360,180,0];this._altitudes=[60,60,60,60,60,90];this._weights=[3,5,3,2,1,4];var f=this._weights.reduce(function(c,
d){return c+d});this._weights=this._weights.map(function(c){return c/f})},bind:function(h){h=this.getSourceRasterInfo(h);if(!h.raster)return Error("The raster input to hillshade function is invalid.");h.raster.statistics&&(this.srcStatistics=h.raster.statistics);this.rasterInfo=l.mixin(h.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:[{min:0,max:255}],histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType=
"Generic";this._initializeColormap();return!0},read2D:function(h){this._performance.start();h=h.raster;h=e.hillshade(h,{altitude:this.functionArguments.altitude,azimuth:this.functionArguments.azimuth,zFactor:this.functionArguments.zFactor,psPower:this.functionArguments.psPower,psFactor:this.functionArguments.psFactor,hillshadeType:this.functionArguments.hillshadeType,slopeType:this.functionArguments.slopeType,isGCS:h.extent.spatialReference.wkid&&null==n[h.extent.spatialReference.wkid]});this._addPerformanceMetric(this._performance.elapsed());
return h},readGL:function(h){this._performance.start();this._initializeProgram({fragment:m.hillshade,fragmentName:"Hillshade"});this.functionArguments.colorRamp&&this._indexedColormap&&!this._clrTexture&&(this._clrTexture=this._setupColormapTexture(this._indexedColormap));var f=this._setupTextureData(h.raster),c=this.bindFrameBuffer(),d=this.gl,g=d.drawingBufferWidth;d=d.drawingBufferHeight;var t=f.extent,r=(t.xmax-t.xmin)/g,w=(t.ymax-t.ymin)/d,v=this.functionArguments.altitude,z=this.functionArguments.azimuth,
C=this.functionArguments.zFactor;1===this.functionArguments.hillshadeType&&(C*=2);var D=C/(8*r),y=C/(8*w);.001<C&&t.spatialReference.wkid&&null==n[t.spatialReference.wkid]&&(D/=111E3,y/=111E3);var u=this.functionArguments.psPower,B=this.functionArguments.psFactor;3===this.functionArguments.slopeType&&((D=t.spatialReference.wkid&&null==n[t.spatialReference.wkid])?(D=111E3*r,y=111E3*w,D=(C+Math.pow(D,u)*B)/(8*D),y=(C+Math.pow(y,u)*B)/(8*y)):(D=(C+Math.pow(r,u)*B)/(8*r),y=(C+Math.pow(w,u)*B)/(8*w)));
var x=(90-v)*Math.PI/180;v=Math.cos(x);var A=(360-z+90)*Math.PI/180;z=Math.sin(x)*Math.cos(A);x=Math.sin(x)*Math.sin(A);u=Array(6);B=Array(6);t=Array(6);var E=this._weights,J;if(1===this.functionArguments.hillshadeType){var O=this._azimuths.length;for(J=0;J<O;J++)v=this._altitudes[J],z=this._azimuths[J],x=(90-v)*Math.PI/180,v=Math.cos(x),A=(360-z+90)*Math.PI/180,z=Math.sin(x)*Math.cos(A),x=Math.sin(x)*Math.sin(A),u[J]=v,B[J]=z,t[J]=x}else u[0]=v,B[0]=z,t[0]=x;u=u.map(function(S){return parseFloat(S)});
B=B.map(function(S){return parseFloat(S)});t=t.map(function(S){return parseFloat(S)});this._setUniforms({u_cellSize:[r,w],u_zfactor:C,u_xFactor:D,u_yFactor:y,u_sinZcosA:z,u_sinZsinA:x,u_cosZ:v,u_sinZcosAs:B,u_sinZsinAs:t,u_cosZs:u,u_weights:E,u_hillshadeType:this.functionArguments.hillshadeType,u_resolution:h&&h.raster&&h.raster.pixelBlock?[1/h.raster.pixelBlock.width,1/h.raster.pixelBlock.height]:[1/g,1/d],u_scaled:!this.renderTexture,u_applyColorramp:this._clrTexture?!0:!1,u_minValue:this.srcStatistics[0].min,
u_maxValue:this.srcStatistics[0].max,u_indexedColormapOffset:this._indexedColormapOffset||0,u_indexedColormapMaxIndex:this._indexedColormap?this._indexedColormap.length/4-1:0});this._clrTexture&&this._bindTexture(this._clrTexture,"u_image1");this._bindTexture(f.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:f.extent,texture:c.texture}},_initializeColormap:function(){this._indexedColormapOffset=0;var h=this._indexedColormap,f=this.functionArguments.colorRamp;
this.functionArguments.colormap?(this._alphaSpecified=(f=k.buildIndexedColormap(this.functionArguments.colormap))&&f.alphaSpecified,this._indexedColormap=f&&f.indexedColormap,this._indexedColormapOffset=f&&f.offset):f?(this._indexedColormap="multipart"===f.type?this.invert?q.createMultiPartColorRamp(this._invertColorRamp(f)):q.createMultiPartColorRamp(f):this.invert?q.createAlgorithmicColorRamp(this._invertColorRamp(f)):q.createAlgorithmicColorRamp(f),f.fromColor&&f.toColor&&"000"===f.fromColor.slice(0,
3).join("")&&"255255255"===f.toColor.slice(0,3).join("")&&(this._clrTexture=this._indexedColormap=null)):this.functionArguments.colormapName?"random"===this.functionArguments.colormapName.toLowerCase()&&(this._indexedColormap=q.createRandomColorRamp()):this._clrTexture=this._indexedColormap=null;if(h&&this._indexedColormap){f=!0;for(var c=0;c<h.length;c++)if(h[c]!==this._indexedColormap[c]){f=!1;break}f||(this._clrTexture=null)}},_setupColormapTexture:function(h){var f=this._createTexture(),c=this.gl,
d=h.length/4,g=new Float32Array(h.length),t;for(t=0;t<h.length;t++)g[t]=h[t]/255;c.getExtension("OES_texture_float");c.texImage2D(c.TEXTURE_2D,0,c.RGBA,d,1,0,c.RGBA,c.FLOAT,g);return f}})})},"esri/layers/rasterLib/function/LocalFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(F,l,b,q,n,p,m){return F([b,p],{declaredClass:"esri.layers.rasterLib.function.LocalFunction",functionName:"Local",
supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({operation:null,rasters:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);var e=0;a.raster?e=a.raster.bandCount:a.rasters&&(e=Math.max.apply(null,a.rasters.map(function(k){return k.bandCount})));if(0===e)return Error("The raster input to local function is invalid. It only takes single band input.");a=a.raster||a.rasters.filter(function(k){return!!k.extent})[0];this.rasterInfo=l.mixin(a,{bandCount:1,
pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){var e=[];e=a.raster?a.raster2?[a.raster,a.raster2]:[a.raster]:a.rasters;a=e.map(function(d){return d.pixelBlock});var k=this.functionArguments.operation;if(null===k)return e[0];this._performance.start();var h=this._getOperations(),f=h.operators[k-1];h=h.functors[k-1];
if(!this.functionArguments.rasters){if(1!==f)throw"no sufficient rasters, require "+f;}else if(999!==f&&this.functionArguments.rasters.length!==f)throw"number of rasters does not meet (short or exceed) the operation requirment, require "+f;var c=31===k?m.isNull(a[0]):50===k?m.setNull(a[0]):m.local(a,{rasterCountNeeded:f,functor:h});"Unknown"!==this.pixelType&&(c.pixelType=this.pixelType,c.pixels=c.pixels.map(l.hitch(this,function(d){return this._clampBand(d,c.pixelType)})));c.statistics||c.calculateStatistics();
return{extent:e[0].extent,pixelBlock:c}},readGL:function(a){this._performance.start();var e=this.functionArguments.operation,k=this._getWebGLOperations(),h=k.operators[e-1],f=n.local;k="result\x3d"+k.functors[e-1]+";";31!==e&&50!==e&&(k+="result \x3d vec4(result.rgb, a.a);");f=f.replace("vec4 replaceme"+h+";",k);k=this.gl.getParameter(this.gl.VERSION);var c="";if(-1<k.toLowerCase().indexOf("webgl 1.0")||-1<k.toLowerCase().indexOf("webgl 0."))c=this._getPolyfill(e);f=f.replace("vec4 polyfill;",c);
1<h&&(f=f.replace("gl_FragColor \x3d localOp1();","gl_FragColor \x3d localOp1();".replace("1",h.toString())));this._initializeProgram({fragment:f,fragmentName:"Local"});e=a.rasters;if(null!=e&&0!==e.length){e=e.length;k=this.bindFrameBuffer();for(h=0;h<e;h++){f=0<h?h.toString():"";var d=this._setupTextureData(a.rasters[h],{reCreate:!0});this._bindTexture(d.texture,"u_image"+f)}this._setUniforms({});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:d.extent,texture:k.texture}}},
_getOperations:function(){return{operators:[2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3],functors:[function(a,e){return a+e},function(a,e){return a-e},function(a,e){return a*e},function(a){return Math.sqrt(a)},function(a,e){return Math.pow(a,e)},function(a){return Math.acos(a)},function(a){return Math.asin(a)},function(a){return Math.atan(a)},function(a){return Math.atanh(a)},
function(a){return Math.abs(a)},function(a,e){return a&e},function(a,e){return a<<e},function(a){return~a},function(a,e){return a|e},function(a,e){return a>>e},function(a,e){return a^e},function(a,e){return a&&e},function(a){return!a},function(a,e){return a||e},function(a,e){return a!=e},function(a){return Math.cos(a)},function(a,e){return Math.cosh(a)},function(a,e){return a/e},function(a,e){return a==e},function(a){return Math.exp(a)},function(a){return Math.pow(10,a)},function(a){return Math.pow(2,
a)},function(a,e){return a>e?1:0},function(a,e){return a>=e?1:0},function(a,e){return Math.floor(a)},function(a){return!a},function(a){return a},function(a,e){return a<e?1:0},function(a,e){return a<=e?1:0},function(a){return Math.log(a)},function(a,e){return Math.log10(a)},function(a,e){return Math.log2(a)},999,999,999,999,999,999,function(a,e){return a%e},function(a){return-a},function(a,e){return a!=e?1:0},999,function(a,e){return Math.floor(a)},function(a,e){return Math.ceil(a)},function(a,e){return e?
0:a},function(a,e){return Math.sin(a)},function(a,e){return Math.sinh(a)},function(a,e){return a*a},999,999,function(a){return Math.tan(a)},function(a){return Math.tanh(a)},999,function(a){return Math.acosh(a)},function(a){return Math.asinh(a)},function(a,e){return Math.atan2(a,e)},function(a,e){return a/e},function(a,e){return Math.floor(a/e)},999,999,999,999,999,999,999,999,999,999,function(a,e,k){return a?e:k}]}},_polyfill:{sinh:"vec4 sinh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn halfexp - 1.0/halfexp;\n}",
asinh:"vec4 asinh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn 1.0/(halfexp - 1.0/halfexp);\n}",cosh:"vec4 cosh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn halfexp + 1.0/halfexp;\n}",acosh:"vec4 acosh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn 1.0/(halfexp + 1.0/halfexp);\n}",tanh:"vec4 tanh(vec4 x) {\nvec4 expx \x3d exp(x);\nreturn (expx - 1.0/expx)/(expx + 1.0/expx);\n}",atanh:"vec4 atanh(vec4 x) {\nvec4 expx \x3d exp(x);\nreturn (expx + 1.0/expx)/(expx - 1.0/expx);\n}"},_getPolyfill:function(a){var e=
"";switch(a){case 9:e=this._polyfill.atanh;break;case 22:e=this._polyfill.cosh;break;case 52:e=this._polyfill.sinh;break;case 57:e=this._polyfill.tanh;break;case 59:e=this._polyfill.acosh;break;case 60:e=this._polyfill.asinh}return e},_getWebGLOperations:function(){return{operators:[2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3],functors:["(a + b)","(a - b)",
"(a * b)","sqrt(a)","pow(a, b)","acos(a)","asin(a)","atan(a)","atanh(a)","abs(a)","a","a","a","a","a","a","(a.r\x3d\x3d0.0 || b.r\x3d\x3d0.0) ? vec4(0.0,0.0,0.0,a.a) : vec4(1.0,1.0,1.0,a.a)","a.r\x3d\x3d0.0?vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","(a.r\x3d\x3d0.0 \x26\x26 b.r\x3d\x3d0.0) ? vec4(0.0,0.0,0.0,a.a) : vec4(1.0,1.0,1.0,a.a)","(a.r\x3d\x3d0.0 ^^ b.r\x3d\x3d0.0) ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","cos(a)","cosh(a)","a / b","a.r \x3d\x3d b.r? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)",
"exp(a)","pow(10.0, a)","pow(2.0, a)","a.r \x3e b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","a.r \x3e\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","floor(a)","a.a \x3d\x3d 0.0? vec4(1.0,1.0,1.0,1.0) : vec4(0.0,0.0,0.0,1.0)","a","a.r \x3c b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","a.r \x3c\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","log(a)","log2(a) / log2(10.0)","log2(a)",999,999,999,999,999,999,"mod(a, b)","-a","a.r !\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)",
999,"floor(a)","ceil(a)","a.r !\x3d 0.0 ? vec4(0.0,0.0,0.0,0.0) : a","sin(a)","sinh(a)","a * a",999,999,"tan(a)","tanh(a)",999,"acosh(a)","asinh(a)","atan(a, b)","a / b","floor(a / b)",999,999,999,999,999,999,999,999,999,999,"a.r!\x3d0 ? b : c"]}}})})},"esri/layers/rasterLib/function/MaskFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(F,l,b,q,n,p,m){return F([b,p],{declaredClass:"esri.layers.rasterLib.function.MaskFunction",
functionName:"Mask",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({includedRanges:null,noDataInterpretation:0,noDataValues:null,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to mask function is invalid.");this.rasterInfo=l.mixin(a.raster,{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,a.raster.pixelType),statistics:a.raster.statistics,histograms:a.raster.histograms});
return!0},read2D:function(a){this._performance.start();a=a.raster;var e=m.mask(a.pixelBlock,{includedRanges:this.functionArguments.includedRanges,noDataInterpretation:this.functionArguments.noDataInterpretation,noDataValues:this.functionArguments.noDataValues});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&(e.pixelType=this.pixelType);return{extent:a.extent,pixelBlock:e}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:n.mask,fragmentName:"Mask"});
a=this._setupTextureData(a.raster);var e=this.bindFrameBuffer(),k=this.functionArguments.includedRanges,h=this.functionArguments.noDataValues?this.functionArguments.noDataValues.map(function(f){return parseFloat(f,10)}):null;this._setUniforms({u_includedRanges:k,u_includedRanges_specified:k?!0:!1,u_noDataValues:h,u_noDataValues_specified:h?!0:!1,u_noDataInterpretation:this.functionArguments.noDataInterpretation,u_bandCount:Math.min(this.sourceRasterInfo.raster.bandCount,3)});this._bindTexture(a.texture,
"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:e.texture}}})})},"esri/layers/rasterLib/function/NDVIFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterIndex".split(" "),function(F,l,b,q,n,p,m){return F([b,p],{declaredClass:"esri.layers.rasterLib.function.NDVIFunction",functionName:"NDVI",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=
this.mixinIgnoreCase({visibleBandID:1,infraredBandID:2,scaled:!0,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!(a.raster&&1<a.raster.bandCount))return Error("The raster input to ndvi function is invalid. It requires more than 1 band.");this.rasterInfo=l.mixin(a.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,this.scaled?"U8":"F32"),statistics:this.scaled?[{min:0,max:200}]:[{min:-1,max:1}],histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||
{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){this._performance.start();a=a.raster;var e=m.calculate(a.pixelBlock,{bandIndexes:[this.functionArguments.infraredBandID+1,this.functionArguments.visibleBandID+1].join(" "),method:1}),k;if(this.functionArguments.scaled){var h=e.pixels[0];var f=e.mask;var c=h.length;var d=new Uint8Array(c);if(null==f)for(k=0;k<c;k++)d[k]=100*h[k]+100&255;else for(k=0;k<c;k++)f[k]&&(d[k]=100*h[k]+100&255);e.pixels[0]=d;e.pixelType="U8"}this._addPerformanceMetric(this._performance.elapsed());
"Unknown"!==this.pixelType&&(e.pixelType=this.pixelType);return{extent:a.extent,pixelBlock:e}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:n.ndvi,fragmentName:"NDVI"});var e=this.functionArguments.visibleBandID,k=this.functionArguments.infraredBandID,h=this.functionArguments.scaled||!1;this._alterBand=2<Math.max(k,e)?!0:!1;a=this._setupTextureData(a.raster,{bandIDs:this._alterBand?{bandIDs:[k,e,k]}:null});var f=this.bindFrameBuffer();this._alterBand?this._setUniforms({u_bandId_nir:0,
u_bandId_red:1,u_scaled:h}):this._setUniforms({u_bandId_nir:k,u_bandId_red:e,u_scaled:h});this._bindTexture(a.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:f.texture}}})})},"esri/layers/rasterLib/function/SlopeFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils".split(" "),function(F,l,b,q,n,p,
m,a){return F([b,m],{declaredClass:"esri.layers.rasterLib.function.SlopeFunction",functionName:"Slope",supportWebGL:!0,support2D:!0,constructor:function(e){this.functionArguments=this.mixinIgnoreCase({zFactor:1,slopeType:1,psPower:.664,psFactor:.024,raster:null},e)},bind:function(e){e=this.getSourceRasterInfo(e);if(!e.raster)return Error("The raster input to slope function is invalid.");this.rasterInfo=l.mixin(e.raster,{bandCount:1,pixelType:this._calculatePixelType(this.outputPixelType,"F32"),statistics:1===
this.slopeType||3===this.slopeType?[{min:0,max:90}]:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(e){this._performance.start();e=e.raster;e=a.slope(e,{zFactor:this.functionArguments.zFactor,psPower:this.functionArguments.psPower,psFactor:this.functionArguments.psFactor,slopeType:this.functionArguments.slopeType,isGCS:e.extent.spatialReference.wkid&&null==q[e.extent.spatialReference.wkid]});
this._addPerformanceMetric(this._performance.elapsed());return e},readGL:function(e){this._performance.start();this._initializeProgram({fragment:p.slope,fragmentName:"Slope"});var k=this._setupTextureData(e.raster),h=this.bindFrameBuffer(),f=this.gl,c=f.drawingBufferWidth;f=f.drawingBufferHeight;var d=k.extent;this._setUniforms({u_resolution:e&&e.raster&&e.raster.pixelBlock?[1/e.raster.pixelBlock.width,1/e.raster.pixelBlock.height]:[1/c,1/f],u_cellSize:[(d.xmax-d.xmin)/c,(d.ymax-d.ymin)/f],u_zfactor:this.functionArguments.zFactor});
this._bindTexture(k.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:k.extent,texture:h.texture}}})})},"esri/layers/rasterLib/function/RemapFunction":function(){define("dojo/_base/declare dojo/_base/lang ../../../renderers/colorRampGenerator ./RasterFunctionX ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(F,l,b,q,n,p,m){return F([q,p],{declaredClass:"esri.layers.rasterLib.function.RemapFunction",functionName:"Remap",
pixelType:"U8",renderTexture:!1,supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({inputRanges:null,outputValues:null,outputColors:null,colorBreaks:null,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input is not available.");var e=!(!this.functionArguments.outputColors&&!this.functionArguments.colorBreaks);this.rasterInfo=l.mixin(a.raster,{bandCount:e?3:1,pixelType:this._calculatePixelType(this.pixelType,
"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType=e?"Processed":"Thematic";return!0},read2D:function(a){return this._remap(a.raster)},readGL:function(a){return this._remapGL(a.raster)},_remap:function(a){this._performance.start();var e=m.remapColor(a.pixelBlock,this.functionArguments.colorBreaks);this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,pixelBlock:e}},_remapGL:function(a){this._performance.start();
this._initializeProgram({fragment:n.remap,fragmentName:"Remap"});var e=new Uint8Array(64),k=this.functionArguments.colorBreaks;k.forEach(function(d,g){e[4*g]=d.mappedColor[0];e[4*g+1]=d.mappedColor[1];e[4*g+2]=d.mappedColor[2];e[4*g+3]=1>=d.mappedColor[3]?255*d.mappedColor[3]:d.mappedColor[3]});var h=k[k.length-1],f=h.mappedColor;e[60]=f[0];e[61]=f[1];e[62]=f[2];e[63]=1>=f[3]?255*f[3]:f[3];var c=new Float32Array(16);k.forEach(function(d,g){c[g]=d.value});c[15]=h.value;this._clrTexture||(this._clrTexture=
this._setupColormapTexture(e));k=this._clrTexture;h=this.bindFrameBuffer();a=this._setupTextureData(a);this._setUniforms({u_indexedColormapOffset:0,u_indexedColormapMaxIndex:e.length/4-1,u_breaks:c});this._bindTexture(k,"u_image1");this._bindTexture(a.texture,"u_image");this._drawGL();return{extent:a.extent,texture:h.texture}},_setupColormapTexture:function(a){var e=this._createTexture(),k=a.length/4,h=new Float32Array(a.length),f=this.renderTexture?255:1,c,d=this.gl;for(c=0;c<a.length;c++)h[c]=a[c]/
f;d.getExtension("OES_texture_float");d.texImage2D(d.TEXTURE_2D,0,d.RGBA,k,1,0,d.RGBA,d.FLOAT,h);return e}})})},"esri/layers/rasterLib/function/IdentityFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","./pixelShaders","./RasterFunctionX","./RasterFunctionWebGLMixin"],function(F,l,b,q,n){return F([q,n],{declaredClass:"esri.layers.rasterLib.function.IdentityFunction",functionName:"Identity",supportWebGL:!0,support2D:!0,constructor:function(p){this.functionArguments={raster:null}},
bind:function(p){p=this.getSourceRasterInfo(p);if(!p.raster)return Error("The raster input to identity function is invalid.");this.rasterInfo=l.mixin(p.raster,{});return!0},read2D:function(p){return p.raster},readGL:function(p){this._initializeProgram({fragment:b.identity,fragmentName:"identity"});p=this._setupTextureData(p.raster);var m=this.bindFrameBuffer();this._bindTexture(p.texture,"u_image");this._drawGL();return{extent:p.extent,texture:m.texture}}})})},"esri/layers/rasterLib/function/ResampleFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./pixelShaders","./RasterFunctionX","./RasterFunctionWebGLMixin"],function(F,l,b,q,n){return F([q,n],{declaredClass:"esri.layers.rasterLib.function.ResampleFunction",renderTexture:!0,resamplingOrigin:null,resamplingRatio:null,zFactor:1,functionName:"Resample",supportWebGL:!0,support2D:!1,constructor:function(p){this.functionArguments=this.mixinIgnoreCase({resamplingType:0},p)},bind:function(p){p=this.getSourceRasterInfo(p);if(!p.raster)return Error("The raster input to convolution function is invalid.");
this.rasterInfo=l.mixin(p.raster,{bandCount:p.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,p.raster.pixelType),statistics:p.raster.statistics,histograms:p.raster.histograms});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};return!0},readGL:function(p){this._performance.start();this._initializeProgram({fragment:b.resample,fragmentName:"Resample"});var m=this._setupTextureData(p.raster),a=this.bindFrameBuffer(),e=this.gl,k=e.drawingBufferWidth;e=e.drawingBufferHeight;
var h=p.raster;void 0!==h.pixelBlock?(m=m||this._setupTextureData(h),p=h.pixelBlock.width,h=h.pixelBlock.height):(m=m||h,p=k,h=e);this._setUniforms({u_resamplingRatio:this.resamplingRatio||[p/k,h/e],u_anchor:this.resamplingOrigin||[0,1],u_resamplingType:this.functionArguments.resamplingType,u_resolution:[1/k,1/e]});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:m.extent,texture:a.texture}}})})},"esri/layers/rasterLib/renderer/rasterRendererHelper":function(){define("dojo/_base/declare dojo/_base/lang ../../PixelBlock ./RasterColormapRenderer ./RasterUniqueValueRenderer ./RasterRGBRenderer ./RasterStretchColorRampRenderer ./RasterClassBreaksRenderer ./RasterShadedReliefRenderer".split(" "),
function(F,l,b,q,n,p,m,a,e){var k=function(){function h(c){f[c.prototype.rendererName]=c}var f={};h(q);h(p);h(m);h(n);h(a);h(e);return f}();return{wellKnownRenderers:k,isSupported:function(h){if(!h)return!1;var f=!0;k[h.rendererName]||(f=!1);return f},create:function(h){if(!h)return null;if(h.rendererName){var f=h.rendererName;h=h.rendererArguments}else f="uniqueValue rasterStretch rasterShadedRelief rgb rasterColormap classBreaks".split(" ").indexOf(h.type),f="UniqueValue Stretch ShadedRelief RGB Colormap ClassBreaks".split(" ")[f],
"rasterStretch"===h.type&&h.bandIndex&&1<h.bandIndex.length&&(f="RGB");return(f=k[f])?new f(h):null},createDefaultRenderer:function(h){if(h&&h.raster){var f=h.raster.rasterInfo,c=h.raster.dataType;if(f){var d=h.raster.rasterFunction,g=["Stretch","Colormap","ContrastAndBrightness"];if(d&&"U8"===f.pixelType&&-1<g.indexOf(d.functionName))d.renderTexture=!0;else if("Processed"!==c||!(h.useWebGL&&d&&d.renderTexture||!h.useWebGL&&"U8"===f.pixelType)){d&&(f=d.rasterInfo);d=f.bandCount;var t=f.colormap,r=
f.vat;g=f.histograms;g&&0===g.length&&(g=null);var w=f.statistics&&f.statistics.map(function(C){return[C.min,C.max,C.mean,C.stddev]});if(1===d&&t&&0<t.length)var v=this._getDefaultColormapRenderer(r,t);else if(1===d&&r&&r.features&&0<r.features.length)v=new n({});else{t=0;r=!1;c||!h.raster||!h.raster.tileInfo||void 0!==h.raster.tileInfo.tileType&&"Map"!==h.raster.tileInfo.tileType?"U8"===f.pixelType&&"Processed"===c?(t=5,w=w||[[0,255,0,0],[0,255,0,0],[0,255,0,0]],r=!1):"U8"===f.pixelType||"Elevation"===
c?(t=5,r=w?!1:!0):"Scientific"===c||"StdTime"===c?(t=5,r=w?!1:!0,v=this._getDefaultScientificColorRamp()):g&&0<g.length?(t=6,r=!1):w?(t=5,r=!1):(t=6,r=!0):(w=[[0,255,0,0],[0,255,0,0],[0,255,0,0]],t=5,r=!1);w||(t=5,r=!0);var z;3<=d&&!(h.bandIds||h.raster&&h.raster.imageServiceParams&&h.raster.imageServiceParams.bandIds)&&(z=this.getDefaultBandCombination(f));z&&w&&(w=z.map(function(C){return w[C]}));h={stretchType:t,min:0,max:255,dra:r,minPercent:.25,maxPercent:.25,useGamma:!1,computeGamma:!1,statistics:w,
histograms:g,numberOfStandardDeviations:2.5,bandIndex:z};1===d||z&&1===z.length?(v&&(h.colorRamp=v,h.invert=!1),v=new m(h)):v=new p(h)}return v}}}},getDefaultBandCombination:function(h){var f=h.bandCount;if(1===f)return null;if(2===f)return[0];var c=(h=h.keyProperties)&&h.ChangeAnalysisParameters&&h.ChangeAnalysisParameters.AnalysisType;if(c&&("ccdc"===c.toLowerCase()||"landtrendr"===c.toLowerCase()))return[0];h=h&&h.BandProperties;var d;if(h&&h.length===f){var g=this.getWellKnownBandIndexes(h);h=
g.red;c=g.green;var t=g.blue;g=g.nir;null!=h&&null!=c&&null!=t?d=[h,c,t]:null!=g&&null!=h&&null!=c&&(d=[g,h,c])}!d&&3<=f&&(d=[0,1,2]);return d},getWellKnownBandIndexes:function(h){for(var f={},c=0;c<h.length;c++){var d=h[c],g=d.BandName&&d.BandName.toLowerCase();"red"===g?f.red=c:"green"===g?f.green=c:"blue"===g?f.blue=c:"nearinfrared"===g||"nearinfrared_1"===g||"nir"===g?f.nir=c:d.WavelengthMax&&d.WavelengthMin&&(g=d.WavelengthMin,d=d.WavelengthMax,null==f.blue&&410<=g&&480>=g&&480<=d&&540>=d?f.blue=
c:null==f.green&&490<=g&&560>=g&&560<=d&&610>=d?f.green=c:null==f.red&&595<=g&&670>=g&&660<=d&&730>=d?f.red=c:null==f.nir&&700<=g&&860>=g&&800<=d&&950>=d&&(f.nir=c))}return f},_getDefaultColormapRenderer:function(h,f){if(f||f.length){var c=[],d=this._ratContainsColormap(h);if(d)var g=this._getRATValueClassNameMap(h);f.forEach(function(t){var r=g?g[t[0]]:t[0];c.push({color:[t[1],t[2],t[3]],value:t[0],label:d?null!=r?r:"":t[0]})});return new q({colormapInfos:c})}},_ratContainsColormap:function(h){if(!h||
!h.fields)return!1;var f,c,d;return h.fields.some(function(g){g&&g.name&&(g=g.name.toLowerCase(),"red"===g&&(f=!0),"green"===g&&(c=!0),"blue"===g&&(d=!0));return f&&c&&d})},_getRATValueClassNameMap:function(h){if(!h||!h.fields)return null;var f={},c,d;h.fields.forEach(function(g){if("classname"===g.name.toLowerCase()||"class_name"===g.name.toLowerCase())c=g.name;"value"===g.name.toLowerCase()&&(d=g.name)});h.features.forEach(function(g){g=g.attributes;f[g[d]]=c?g[c]:g[d]});return f},_getDefaultScientificColorRamp:function(){return{type:"multipart",
colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}].map(function(h){return{fromColor:h.toColor,toColor:h.fromColor}}).reverse()}}}})},"esri/layers/rasterLib/renderer/RasterColormapRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction"],function(F,l,b,q){return F([b],{declaredClass:"esri.layers.rasterLib.renderer.RasterColormapRenderer",rendererName:"Colormap",
renderTexture:!0,constructor:function(n){n&&n.colormapInfos&&(n.colormap=n.colormapInfos.map(function(p){return[p.value].concat(p.color)}));this._function=new q(n);this._function.outputPixelType="U8";this._function.renderTexture=!0},draw2D:function(n){this._updateColormapParameters();n=this._clonePixelData(n);return n=this._function._colorize(n)},drawGL:function(n){this._updateColormapParameters();this._function._colorizeGL(n)},toJson:function(){var n=this._function.toJson().rasterFunctionArguments;
return{rendererName:this.rendererName,rendererArguments:n}},toCommonRendererJson:function(){return{type:"rasterColormap",colormapInfos:this.colormapInfos||this.colormap.map(function(n){return{value:n[0],color:n.slice(1),label:n[0]}})}},_updateColormapParameters:function(){var n=this._function.functionArguments;n.colormap=this.colormap;n.colormapName=this.colormapName;n.colorRamp=this.colorRamp;n.colorRampName=this.colorRampName}})})},"esri/layers/rasterLib/renderer/RasterRenderer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","../../../geometry/Extent","../../PixelBlock"],function(F,l,b,q){return F(null,{declaredClass:"esri.layers.rasterLib.renderer.RasterRenderer",raster:null,constructor:function(n){n=n||{};this.raster=n.raster||n.Raster||this.raster;this.draw=l.hitch(this,this.draw);this.bind=l.hitch(this,this.bind);n=l.clone(n);Object.keys(n).forEach(function(p){null==n[p]&&delete n[p]});l.mixin(this,n)},bind:function(n){if(!n)throw"failed to bind without options";var p=n;n.layer&&(n=n.layer,p={id:n.id,
rawRasterInfo:n.raster.rasterInfo,glSetting:n._glSetting,xformSetting:n.tileManager&&n.tileManager.xformSetting,useWebGL:n.useWebGL,resampling:n.tileMode&&n.tileManager&&n.tileManager.xformSetting.requireProjection&&!n._hasTilingEffects&&"Thematic"!==n.raster.dataType?1:0,tileMode:n.tileMode});this._rawRasterInfo=p.rawRasterInfo;this.useWebGL=p.useWebGL;this._function&&this._function.setProcessingContext(l.mixin({useProcessedData:!0},p));this._processingContext=p},hasTilingEffects:function(){},draw:function(n){return this.useWebGL?
this.drawGL(n):this.draw2D(n)},toJson:function(){},_clonePixelData:function(n){if(null==n)return n;var p={};n.extent&&(p.extent=new b(n.extent.xmin,n.extent.ymin,n.extent.xmax,n.extent.ymax,n.extent.spatialReference));n=n.processedPixelBlock||n.pixelBlock;if(null==n)return p;p.pixelBlock=n.clone?n.clone():q.prototype.clone(n);return p}})})},"esri/layers/rasterLib/renderer/RasterUniqueValueRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction",
"../../../renderers/colorRampGenerator"],function(F,l,b,q,n){return F([b],{declaredClass:"esri.layers.rasterLib.renderer.RasterUniqueValueRenderer",rendererName:"UniqueValue",field:"",alias:"",uniqueValueInfos:null,constructor:function(p){p&&p.colormap&&(this.colormap=p.colormap,this._function=new q(p),this._function.outputPixelType="U8",this._function.renderTexture=!0)},bind:function(p){this.inherited(arguments);if(!this._function){var m=(this.raster&&this.raster.rasterInfo||this._rawRasterInfo).vat;
if(!m)throw"uv renderer requires data source to have raster attribute table";var a=this.attributeField||this.field1||this.field,e=this.infos||this.uniqueValueInfos;this.defaultColor=this.defaultColor||this.defaultSymbol&&this.defaultSymbol.color;var k=m.fields.filter(function(v){return"value"===v.name.toLowerCase()})[0];if(k)var h=k.name;a||((a=m.fields.filter(function(v){return-1<["classname","category"].indexOf(v.name.toLowerCase())})[0])||(a=m.fields.filter(function(v){return"esriFieldTypeString"===
v.type})[0]),this.alias=(this.field=a=a&&a.name||h)&&a.alias||h);var f=[],c;if(!e){e=[];var d=m.fields.filter(function(v){return"alpha"===v.name.toLowerCase()})[0];var g=m.fields.filter(function(v){return"red"===v.name.toLowerCase()})[0];var t=m.fields.filter(function(v){return"green"===v.name.toLowerCase()})[0];var r=m.fields.filter(function(v){return"blue"===v.name.toLowerCase()})[0];for(k=0;k<m.features.length;k++){var w=m.features[k].attributes;(c=e.some(function(v){v.value===w[a]}))||(d&&g&&
t&&r?e.push({value:w[a],alias:w[a],color:[w[g.name],w[t.name],w[r.name],w[d.name]]}):g&&t&&r?e.push({value:w[a],alias:w[a],color:[w[g.name],w[t.name],w[r.name]]}):e.push({value:w[a],alias:w[a]}))}if(!(g&&t&&r))for(c=n.createRandomColorRamp({size:e.length}),k=0;k<e.length;k++)e[k].color=c[k];this.uniqueValueInfos=e}if(e)e.forEach(function(v){f=f.concat(m.features.filter(function(z){return v.value==z.attributes[a]}).map(function(z){return[z.attributes[h]].concat(v.color||v.symbol&&v.symbol.color)}))}),
this.defaultColor&&m.features.filter(function(v){f.some(function(z){return z[0]===v.attributes[h]})||f.push([v.attributes[h]].concat(this.defaultColor))});else throw"missing uniqueValueInfos property";this._function=new q({colormap:f});this.colormap=f;this._function.outputPixelType="U8";this._function.renderTexture=!0;this._function.setProcessingContext(this._processingContext)}},draw2D:function(p){p=this._clonePixelData(p);return p=this._function._colorize(p)},drawGL:function(p){this._function._colorizeGL(p)},
toJson:function(p){var m={field:this.field,uniqueValueInfos:this.uniqueValueInfos,defaultColor:this.defaultColor};p&&(m.colormap=this.colormap);return{rendererName:this.rendererName,rendererArguments:m}},toCommonRendererJson:function(){var p=this.attributeField||this.field1||this.field,m=(this.infos||this.uniqueValueInfos).map(function(a){return{value:a.value,label:a.alias+"",symbol:{color:3===a.color.length?a.color.concat([255]):a.color,type:"esriSFS",style:"esriSFSSolid"}}});return{type:"uniqueValue",
field1:p,uniqueValueInfos:m}}})})},"esri/layers/rasterLib/renderer/RasterRGBRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/StretchFunction ../function/ContrastBrightnessFunction ../function/rasterUtils".split(" "),function(F,l,b,q,n,p){return F([b],{declaredClass:"esri.layers.rasterLib.renderer.RasterRGBRenderer",rendererName:"RGB",bandIndex:null,stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,
maxPercent:.5,useGamma:!1,gamma:null,computeGamma:!1,sigmoidStrengthLevel:1,constructor:function(m){this.stretchType="number"===typeof this.stretchType?this.stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ").indexOf(this.stretchType);m=l.mixin({},m,{stretchType:this.stretchType});this._stretchFunction=new q(m);this._stretchFunction.outputPixelType="U8";this._stretchFunction.renderTexture=!1;this.bandIndex=m.bandIndex||m.BandIndex;this._function=new n(m);
this._function.functionArguments.raster=this._stretchFunction;this._function.renderTexture=!0},hasTilingEffects:function(){return this._stretchFunction.hasTilingEffects()},draw2D:function(m){this._updateStretchParameters();m=this._clonePixelData(m);if("U8"===m.pixelBlock.pixelType&&!this.contrastOffset&&!this.brightnessOffset)return m;this._stretchFunction._stretch(m);var a=m.pixelBlock,e=this.bandIndex,k=Math.max.apply(null,e);a&&a.pixels.length>k&&e&&(a.pixels=e.map(function(h){return a.pixels[h]}),
a.statistics&&(a.statistics=e.map(function(h){return a.statistics[h]})));if(this.contrastOffset||this.brightnessOffset)m.pixelBlock=p.contrastBrightnessStretch(m.pixelBlock,{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return m},drawGL:function(m){this._updateStretchParameters();m.pixelBlock&&(m=this._clonePixelData(m));var a=m.pixelBlock,e=this.bandIndex,k=Math.max.apply(null,e),h=this.statistics&&0<this.statistics.length?this.statistics:this._stretchFunction&&this._stretchFunction.srcStatistics,
f=this.histograms&&0<this.histograms.length?this.histograms:this._stretchFunction&&this._stretchFunction.srcHistograms,c,d;a&&a.pixels.length>k&&e&&(a.pixels=e.map(function(g){return a.pixels[g]}),a.statistics&&(a.statistics=e.map(function(g){return a.statistics[g]})),h&&0<h.length&&h.length!==e.length&&(c=e.map(function(g){return h[g]})),f&&0<f.length&&f.length!==e.length&&(d=e.map(function(g){return f[g]})));this._stretchFunction.functionArguments.statistics=c||h;this._stretchFunction.functionArguments.histograms=
d||f;this.contrastOffset||this.brightnessOffset?(this._stretchFunction.renderTexture=!1,this._function.renderTexture=!0,m=this._stretchFunction._stretchGL(m),this._function._cbGL(m)):(this._stretchFunction.renderTexture=!0,this._stretchFunction._stretchGL(m))},toJson:function(){var m=this._stretchFunction.toJson().rasterFunctionArguments;m.bandIndex=this.bandIndex;m.contrastOffset=this.contrastOffset;m.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,rendererArguments:m}},
toCommonRendererJson:function(){return{type:"rasterStretch",stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ")[this.stretchType]||"minMax",min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:l.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:l.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel}},
_updateStretchParameters:function(){var m=this._stretchFunction.functionArguments;m.stretchType=this.stretchType;m.min=this.min;m.max=this.max;m.numberOfStandardDeviations=this.numberOfStandardDeviations;m.statistics=this.statistics;m.histograms=this.histograms;m.dra=this.dra;m.minPercent=this.minPercent;m.maxPercent=this.maxPercent;m.useGamma=this.useGamma;m.gamma=this.gamma;m.computeGamma=this.computeGamma;this._stretchFunction.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterStretchColorRampRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/ResampleFunction ../function/StretchFunction ../function/ContrastBrightnessFunction ../function/ColormapFunction ../function/rasterUtils".split(" "),
function(F,l,b,q,n,p,m,a){return F([b],{declaredClass:"esri.layers.rasterLib.renderer.RasterStretchColorRampRenderer",rendererName:"Stretch",bandIndex:[0],colorRamp:null,invert:!1,stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,maxPercent:.5,useGamma:!1,gamma:null,computeGamma:!1,sigmoidStrengthLevel:1,constructor:function(e){this.stretchType="number"===typeof this.stretchType?this.stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ").indexOf(this.stretchType);
e=l.mixin({},e,{stretchType:this.stretchType});Object.keys(e).forEach(function(k){null==e[k]&&delete e[k]});this._function=new p(e);this._stretchFunction=new n(e);this._stretchFunction.outputPixelType="U8";this._stretchFunction.renderTexture=!1;this._clrFunction=new m(e);this._clrFunction.functionArguments.raster=this._stretchFunction;this._clrFunction.renderTexture=!1;this._function.functionArguments.raster=this._clrFunction},hasTilingEffects:function(){return this._stretchFunction.hasTilingEffects()},
draw2D:function(e){this._updateStretchParameters();e=this._clonePixelData(e);if("U8"===e.pixelBlock.pixelType&&!(this.contrastOffset||this.brightnessOffset||this.colorRamp))return e;this._stretchFunction._stretch(e);var k=e.pixelBlock,h=this.bandIndex?this.bandIndex[0]:0;k&&1<k.pixels.length&&k.pixels.length>h&&(k.pixels=[k.pixels[h]],k.statistics&&(k.statistics=[k.statistics[h]]));this.colorRamp&&(e=this._clrFunction._colorize(e));if(this.contrastOffset||this.brightnessOffset)e.pixelBlock=a.contrastBrightnessStretch(e.pixelBlock,
{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return e},drawGL:function(e){this._updateStretchParameters();e.pixelBlock&&(e=this._clonePixelData(e));var k=e.pixelBlock,h=this.bandIndex?this.bandIndex[0]||0:0,f=this.statistics&&0<this.statistics.length?this.statistics:this._stretchFunction&&this._stretchFunction.srcStatistics,c=this.histograms&&0<this.histograms.length?this.histograms:this._stretchFunction&&this._stretchFunction.srcHistograms,d,g;k&&1<k.pixels.length&&
k.pixels.length>h&&(k.pixels=[k.pixels[h]],k.statistics&&(k.statistics=[k.statistics[h]]),f&&f.length>h&&(d=[f[h]]),c&&c.length>h&&(g=[c[h]]));this._stretchFunction.functionArguments.statistics=d||f;this._stretchFunction.functionArguments.histograms=g||c;k=!!this.colorRamp;this.contrastOffset||this.brightnessOffset?(this._stretchFunction.renderTexture=!1,this._clrFunction.renderTexture=!1,this._function.renderTexture=!0,e=this._stretchFunction._stretchGL(e),k&&(e=this._clrFunction._colorizeGL(e)),
this._function._cbGL(e)):k?(this._stretchFunction.renderTexture=!1,this._clrFunction.renderTexture=!0,e=this._stretchFunction._stretchGL(e),this._clrFunction._colorizeGL(e)):(this._stretchFunction.renderTexture=!0,this._stretchFunction._stretchGL(e))},toJson:function(){var e=this._stretchFunction.toJson().rasterFunctionArguments;e.colorRamp=this.colorRamp||"";this.invert&&(e.invert=!0);e.contrastOffset=this.contrastOffset;e.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,
rendererArguments:e}},toCommonRendererJson:function(){return{type:"rasterStretch",stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ")[this.stretchType]||"minMax",colorRamp:this.colorRamp&&this.colorRamp.toJson?this.colorRamp.toJson():this.colorRamp,min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:l.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,
gamma:l.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel}},_updateStretchParameters:function(){var e=this._stretchFunction.functionArguments;e.stretchType=this.stretchType;e.min=this.min;e.max=this.max;e.numberOfStandardDeviations=this.numberOfStandardDeviations;e.statistics=this.statistics;e.histograms=this.histograms;e.dra=this.dra;e.minPercent=this.minPercent;e.maxPercent=this.maxPercent;e.useGamma=this.useGamma;e.gamma=this.gamma;e.computeGamma=this.computeGamma;
this._stretchFunction.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterClassBreaksRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction","../function/RemapFunction"],function(F,l,b,q,n){return F([b],{declaredClass:"esri.layers.rasterLib.renderer.RasterClassBreaksRenderer",rendererName:"ClassBreaks",renderTexture:!0,constructor:function(p){p=p||{};this._function=new n(p);this._function.outputPixelType="U8";var m=
p.classBreakInfos;p=p.minValue;null!=p&&m&&(this._function.functionArguments.colorBreaks=this._getSortedColorBreaks(p,m))},bind:function(p){this.inherited(arguments);this.isColormapFunction=!1;var m=this.raster&&this.raster.rasterInfo||this._rawRasterInfo,a=m&&m.vat;if(a&&"u8"===m.pixelType.toLowerCase()&&this.classBreakInfos){var e=this.field;if(m=a.fields.filter(function(g){return"value"===g.name.toLowerCase()})[0])var k=m.name;var h=a.features.sort(function(g,t){return parseFloat(g.attributes[e])-
parseFloat(t.attributes[e])})[0].attributes[e];this.isColormapFunction=!0;var f=[],c=this.field,d=this.classBreakInfos;d.forEach(function(g,t){a.features.forEach(function(r){var w=d[t-1]&&d[t-1].classMaxValue||h;r.attributes[c]<=g.classMaxValue&&(r.attributes[c]>w||r.attributes[c]===h)&&(w=g.symbol.color,f.some(function(v){return v[0]===r.attributes[k]})||f.push([r.attributes[k]].concat(w)))})});this._function=new q({colormap:f});this.colormap=f;this._function.outputPixelType="U8";this._function.renderTexture=
!0}this._function&&this._function.setProcessingContext(l.mixin({useProcessedData:!0},this._processingContext))},draw2D:function(p){if(this.isColormapFunction)return this._updateColormapParameters(),p=this._clonePixelData(p),p=this._function._colorize(p);this._updateRemapParameters();return this._function._remap(p)},drawGL:function(p){this.isColormapFunction?(this._updateColormapParameters(),this._function._colorizeGL(p)):(this._function.renderTexture=!0,this._updateRemapParameters(),this._function._remapGL(p))},
toJson:function(){var p=this._function.toJson().rasterFunctionArguments;return{rendererName:this.rendererName,rendererArguments:p}},toCommonRendererJson:function(){var p,m=this.classBreakInfos,a=this.colorBreaks;if(null==m&&a)for(m=[],p=0;p<a.length-1;p++)m.push({classMaxValue:a[p+1].value,symbol:{color:a[p].mappedColor,type:"esriSFS",style:"esriSFSSolid"},label:a[p].value+" - "+a[p+1].value});return{type:"classBreaks",field:"Value",minValue:null!=this.minValue?this.minValue:a[0].value,classBreakInfos:m}},
_updateRemapParameters:function(){var p=this.classBreakInfos,m=this.minValue;null!=m&&p&&(this._function.functionArguments.colorBreaks=this._getSortedColorBreaks(m,p))},_getSortedColorBreaks:function(p,m){var a=m.map(function(h){return{maxValue:h.classMaxValue,color:h.symbol.color}}).sort(function(h,f){return h.maxValue-f.maxValue}),e,k=[{value:p,mappedColor:a[0].color}];for(e=0;e<a.length;e++)k.push({value:a[e].maxValue,mappedColor:e===a.length-1?a[e].color:a[e+1].color});return k},_updateColormapParameters:function(){this._function.functionArguments.colormap=
this.colormap;this._function.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/HillshadeFunction ../function/ContrastBrightnessFunction ../function/ColormapFunction ../function/rasterUtils".split(" "),function(F,l,b,q,n,p,m){return F([b],{declaredClass:"esri.layers.rasterLib.renderer.RasterShadedReliefRenderer",rendererName:"ShadedRelief",hillshadeType:null,azimuth:315,
altitude:45,zFactor:1,slopeType:null,psPower:.664,psFactor:.024,raster:null,constructor:function(a){this.hillshadeType="number"===typeof this.hillshadeType?this.hillshadeType:["traditional","multi-directional"].indexOf(this.hillshadeType);a&&a.scalingType&&(this.slopeType="adjusted"===a.scalingType?3:1);a&&a.pixelSizePower&&(this.psPower=a.pixelSizePower);a&&a.pixelSizeFactor&&(this.psFactor=a.pixelSizeFactor);a=l.mixin({},a,{hillshadeType:this.hillshadeType,psPower:this.psPower,psFactor:this.psFactor,
slopeType:this.slopeType});Object.keys(a).forEach(function(e){null==a[e]&&delete a[e]});this._function=new n(a);this._hillshadeFunction=new q(a);this._hillshadeFunction.outputPixelType="U8";this._hillshadeFunction.renderTexture=!1;this._function.functionArguments.raster=this._hillshadeFunction},hasTilingEffects:function(){return this._hillshadeFunction.hasTilingEffects()},draw2D:function(a){this._updateHillshadeParameters();a=this._clonePixelData(a);a=this._hillshadeFunction.read2D({raster:a});if(this.contrastOffset||
this.brightnessOffset)a.pixelBlock=m.contrastBrightnessStretch(a.pixelBlock,{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return a},drawGL:function(a){this._updateHillshadeParameters();this.contrastOffset||this.brightnessOffset?(this._hillshadeFunction.renderTexture=!1,this._function.renderTexture=!0,a=this._hillshadeFunction.readGL({raster:a}),this._function._cbGL(a)):(this._hillshadeFunction.renderTexture=!0,this._hillshadeFunction.readGL({raster:a}))},toJson:function(){var a=
this._hillshadeFunction.toJson().rasterFunctionArguments;a.colorRamp=this.colorRamp||"";this.invert&&(a.invert=!0);a.contrastOffset=this.contrastOffset;a.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,rendererArguments:a}},toCommonRendererJson:function(){return{type:"rasterShadedRelief",hillshadeType:["traditional","multi-directional"][this.hillshadeType]||"traditional",azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:3===this.slopeType?"adjusted":
"none",pixelSizePower:this.psPower,pixelSizeFactor:this.psFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson?this.colorRamp.toJson():this.colorRamp}},_updateHillshadeParameters:function(){var a=this._hillshadeFunction.functionArguments;a.hillshadeType=this.hillshadeType;a.azimuth=this.azimuth;a.altitude=this.altitude;a.zFactor=this.zFactor;a.slopeType=this.slopeType;a.psPower=this.psPower;a.psFactor=this.psFactor}})})},"esri/layers/rasterLib/raster/rasterProjectionHelper":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/sniff ../../../kernel ../../../WKIDUnitConversion ../../../geometry/Extent ../../../geometry/projection ../../../geometry/webMercatorUtils ../../../SpatialReference ../../../geometry/Point".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h){F={requirePE:function(c,d){return!(c.equals(d)||c._canProject(d))},load:function(){var c=new b;if(!this._loadPromise)if(a.isSupported())this._loadPromise=a.load();else{var d=new b;d.reject("projection engine is not supported on this version of the browser, please try with a modern browser");this._loadPromise=d.promise}this._loadPromise.isFulfilled()?this._loadPromise.isResolved()?c.resolve():this._loadPromise.isRejected()&&c.resolve():(this._pendingdfds=this._pendingdfds||
[],this._pendingdfds.push(c),this._loadPromise.then(l.hitch(this,function(){this._pendingdfds.forEach(function(g){g.isFulfilled()||g.resolve()})}),l.hitch(this,function(){this._pendingdfds.forEach(function(g){g.isFulfilled()||g.reject()})})));return c.promise},computeError:function(c,d){return[Math.abs((c[0]+c[4]+c[4*d.rows]+c[4*d.rows+4])/4-c[2*d.rows+2]),Math.abs((c[1]+c[5]+c[4*d.rows+1]+c[4*d.rows+5])/4-c[2*d.rows+3])]},getDefaultDatumTransformationForDataset:function(c,d,g){if(!(d&&c.spatialReference&&
this.requirePE(c.spatialReference,d)&&a.isLoaded()))return null;c=new m(c.toJson());d=new k(d.toJson());return g?a.getTransformation(d,c.spatialReference,c):a.getTransformation(c.spatialReference,d,c)},project:function(c,d,g){if(!d||c.spatialReference.equals(d))return c;var t=a.isLoaded()?a:e;"esri.geometry.Extent"===c.declaredClass?c=new m(c.toJson()):"esri.geometry.Point"===c.declaredClass&&(c=new h(c.toJson()));d=new k(d.toJson());(c=t.project(c,d))&&"esri.geometry.Extent"===c.declaredClass?(c=
new m(c.toJson()),g&&(1E-5>Math.abs(c.xmin+180)&&1E-5>Math.abs(c.xmax-180)?(c.xmin=0,c.xmax=360):(0>c.xmin&&(c.xmin+=360,c.xmax+=360),0>c.xmax&&(c.xmax+=360)))):c&&"esri.geometry.Point"===c.declaredClass&&(c=new h(c.toJson()),g&&0>c.x&&(c.x+=360));return c},projectResolution:function(c,d,g){var t=g.xmin+(g.xmax-g.xmin)/2;g=g.ymin+(g.ymax-g.ymin)/2;c=new m(t,g,t+c.x,g+c.y,c.spatialReference);c=this.project(c,d);return new h(c.xmax-c.xmin,c.ymax-c.ymin,d)},getProjectionOffsetGrid:function(c,d,g,t,r,
w,v){null==v&&(v=[32,32]);var z=c.xmin,C=c.ymin,D=c.xmax,y=c.ymax,u=c.spatialReference,B=d.spatialReference,x=a.isLoaded()?a:e,A=r?-r:null,E=v[0]*g.x,J=v[1]*g.y;D={cols:Math.ceil((D-z)/E)+1,rows:Math.ceil((y-C)/J)+1};c=[];for(y=0;y<D.cols;y++){var O=S;var S=[];for(g=0;g<D.rows;g++){var X=new h({x:z+E*y,y:C+J*g,spatialReference:u});X=x.project(X,B,w);if(!X)return null;t&&0>X.x&&(X.x+=360);S.push(X);0<y&&null!=A&&X.x<O[g].x&&(X.x+=r-A,X.x<O[g].x&&(X.x+=r-A));c.push((X.x-d.xmin)/(d.xmax-d.xmin));c.push((X.y-
d.ymin)/(d.ymax-d.ymin))}}d=this.computeError(c,D);t=new Float32Array((D.cols-1)*(D.rows-1)*12);r=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);w=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(y=0;y<D.cols-1;y++)for(g=0;g<D.rows-1;g++){E=y*D.rows*2+2*g;z=c[E];C=c[E+1];S=c[E+2];u=c[E+3];E+=2*D.rows;B=c[E];x=c[E+1];A=c[E+2];J=c[E+3];O=0;X=12*(g*(D.cols-1)+y);for(E=0;3>E;E++)t[X++]=r[O++]*z+r[O++]*S+r[O++]*A;for(E=O=0;3>E;E++)t[X++]=r[O++]*C+r[O++]*u+r[O++]*J;for(E=O=0;3>E;E++)t[X++]=w[O++]*z+w[O++]*B+w[O++]*
A;for(E=O=0;3>E;E++)t[X++]=w[O++]*C+w[O++]*x+w[O++]*J}return{offsets:c,error:d,coefficients:t,spacing:v,size:[D.cols-1,D.rows-1]}},getHalfWorldWidth:function(c){var d=c&&c.wkid;if(null!=d)return c.isWebMercator()&&(d=3857),null==p[d]?180:f[d]}};l.setObject("layers.rasterLib.raster.rasterProjectionHelper",F,n);var f={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,
53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,
54101:2.0037508342789244E7};return F})},"esri/geometry/projection":function(){define("require exports dojo/Deferred ./pe ../SpatialReference ./GeographicTransformation".split(" "),function(F,l,b,q,n,p){function m(f,c,d,g,t){void 0===g&&(g=null);void 0===t&&(t=!1);if(null===g){var r=p.cacheKey(c,d);void 0!==h[r]?g=h[r]:(g=a(c,d,null),null===g&&(g=new p),h[r]=g)}return e._project(f,c,d instanceof n||!1===t?d:new n(d),g,t)}function a(f,c,d){void 0===d&&(d=null);f=e._getTransformation(f,c,d);return null!==
f?p.fromGE(f):null}Object.defineProperty(l,"__esModule",{value:!0});var e=null;l.isLoaded=function(){return!!e&&q.isLoaded()};l.isSupported=function(){return q.isSupported()};var k=null;l.load=function(){if(k)return k.promise;k=new b;var f=q.load();F(["./geometryEngine"],function(c){e=c;f.then(function(){e._enableProjection(q);k.resolve()},function(d){k.reject(d)})});return k.promise};l.project=function(f,c,d){void 0===d&&(d=null);return f instanceof Array?0===f.length?[]:m(f,f[0].spatialReference,
c,d):m([f],f.spatialReference,c,d)[0]};var h={};l.projectMany=m;l.getTransformation=a;l.getTransformations=function(f,c,d){void 0===d&&(d=null);f=e._getTransformationBySuitability(f,c,d);if(null!==f){c=[];for(d=0;d<f.length;d++)c.push(p.fromGE(f[d]));return c}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/sniff"],function(F,l,b,q,n){function p(r){function w(D,y,u){D[y]=u(D[y])}l._pe=r;f.init();c.init();d.init();g.init();
t.init();l.PeGCSExtent=function(D){function y(){return null!==D&&D.apply(this,arguments)||this}b(y,D);y.prototype.destroy=function(){l._pe.destroy(this)};return y}(l._pe.PeGCSExtent);for(var v=0,z=[l._pe.PeDatum,l._pe.PeGeogcs,l._pe.PeGeogtran,l._pe.PeObject,l._pe.PeParameter,l._pe.PePrimem,l._pe.PeProjcs,l._pe.PeSpheroid,l._pe.PeUnit];v<z.length;v++)r=z[v],w(r.prototype,"getName",function(D){return function(){return D.call(this,Array(f.PE_NAME_MAX))}});v=0;for(z=[l._pe.PeGeogtran,l._pe.PeProjcs];v<
z.length;v++)r=z[v],w(r.prototype,"getParameters",function(D){return function(){for(var y=Array(f.PE_PARM_MAX),u=D.call(this),B=0;B<y.length;B++){var x=l._pe.getValue(u,"*");y[B]=x?l._pe.wrapPointer(x,l._pe.PeParameter):null;u+=Int32Array.BYTES_PER_ELEMENT}return y}});w(l._pe.PeHorizon.prototype,"getCoord",function(D){return function(){var y=this.getSize();if(!y)return null;var u=[],B=D.call(this);k(u,y,B);return u}});w(l._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(D){var y=l._pe._pe_getPeGTlistExtendedGTsSize();
return function(){var u=null,B=D.call(this);if(!l._pe.compare(B,l._pe.NULL)){u=[B];var x=this.getSteps();if(1<x){B=l._pe.getPointer(B);for(var A=1;A<x;A++)u.push(l._pe.wrapPointer(B+y*A,l._pe.PeGTlistExtendedGTs))}}return u}});var C=l._pe._pe_getPeHorizonSize();r=function(D){return function(){var y=this._cache;y||(this._cache=y=new Map);if(y.has(D))return y.get(D);var u=null,B=D.call(this);if(!l._pe.compare(B,l._pe.NULL)){u=[B];var x=B.getNump();if(1<x){B=l._pe.getPointer(B);for(var A=1;A<x;A++)u.push(l._pe.wrapPointer(B+
C*A,l._pe.PeHorizon))}}y.set(D,u);return u}};w(l._pe.PeProjcs.prototype,"horizonGcsGenerate",r);w(l._pe.PeProjcs.prototype,"horizonPcsGenerate",r);l._pe.PeObject.prototype.toString=function(D){void 0===D&&(D=f.PE_STR_OPTS_NONE);l._pe.ensureCache.prepare();var y=l._pe.getPointer(this),u=l._pe.ensureInt8(Array(f.PE_BUFFER_MAX));return l._pe.UTF8ToString(l._pe._pe_object_to_string_ext(y,D,u))}}function m(r){if(r){var w=l._pe.getClass(r);w&&(w=l._pe.getCache(w))&&(r=l._pe.getPointer(r))&&delete w[r]}}
function a(r,w){for(var v=[],z=Array(w),C=0;C<r;C++)v.push(l._pe.ensureInt8(z));return v}function e(r){if(Array.isArray(r[0])){var w=[];r.forEach(function(v){w.push(v[0],v[1])})}else w=r;return w}function k(r,w,v,z){void 0===z&&(z=!1);if(z)for(z=0;z<2*w;z++)r[z]=l._pe.getValue(v+z*Float64Array.BYTES_PER_ELEMENT,"double");else{var C=0===r.length;for(z=0;z<w;z++)C&&(r[z]=Array(2)),r[z][0]=l._pe.getValue(v,"double"),r[z][1]=l._pe.getValue(v+Float64Array.BYTES_PER_ELEMENT,"double"),v+=2*Float64Array.BYTES_PER_ELEMENT}}
Object.defineProperty(l,"__esModule",{value:!0});var h;l._pe=null;l.isLoaded=function(){return!!l._pe};l.isSupported=function(){return!!n("esri-wasm")};l.load=function(){if(h)return h.promise;h=new q;F(["./support/pe-wasm"],function(r){r({locateFile:function(w){return F.toUrl("./support/"+w)},onAbort:function(w){h.reject(Error(w))}}).then(function(w){p(w);h.resolve()})});return h.promise};(function(r){function w(C,D,y){l._pe.ensureCache.prepare();var u=e(y),B=y===u;u=l._pe.ensureFloat64(u);(C=l._pe._pe_geog_to_proj(l._pe.getPointer(C),
D,u))&&k(y,D,u,B);return C}function v(C,D,y){return z(C,D,y,0)}function z(C,D,y,u){l._pe.ensureCache.prepare();var B=e(y),x=y===B;B=l._pe.ensureFloat64(B);(C=l._pe._pe_proj_to_geog_center(l._pe.getPointer(C),D,B,u))&&k(y,D,B,x);return C}r.geogToProj=w;r.projGeog=function(C,D,y,u){switch(u){case f.PE_TRANSFORM_P_TO_G:return v(C,D,y);case f.PE_TRANSFORM_G_TO_P:return w(C,D,y)}return 0};r.projToGeog=v;r.projToGeogCenter=z})(l.PeCSTransformations||(l.PeCSTransformations={}));var f;(function(r){r.init=
function(){r.PE_BUFFER_MAX=l._pe.PeDefs.prototype.PE_BUFFER_MAX;r.PE_NAME_MAX=l._pe.PeDefs.prototype.PE_NAME_MAX;r.PE_MGRS_MAX=l._pe.PeDefs.prototype.PE_MGRS_MAX;r.PE_USNG_MAX=l._pe.PeDefs.prototype.PE_USNG_MAX;r.PE_DD_MAX=l._pe.PeDefs.prototype.PE_DD_MAX;r.PE_DDM_MAX=l._pe.PeDefs.prototype.PE_DDM_MAX;r.PE_DMS_MAX=l._pe.PeDefs.prototype.PE_DMS_MAX;r.PE_UTM_MAX=l._pe.PeDefs.prototype.PE_UTM_MAX;r.PE_PARM_MAX=l._pe.PeDefs.prototype.PE_PARM_MAX;r.PE_TYPE_NONE=l._pe.PeDefs.prototype.PE_TYPE_NONE;r.PE_TYPE_GEOGCS=
l._pe.PeDefs.prototype.PE_TYPE_GEOGCS;r.PE_TYPE_PROJCS=l._pe.PeDefs.prototype.PE_TYPE_PROJCS;r.PE_TYPE_GEOGTRAN=l._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;r.PE_TYPE_COORDSYS=l._pe.PeDefs.prototype.PE_TYPE_COORDSYS;r.PE_TYPE_UNIT=l._pe.PeDefs.prototype.PE_TYPE_UNIT;r.PE_STR_OPTS_NONE=l._pe.PeDefs.prototype.PE_STR_OPTS_NONE;r.PE_STR_AUTH_NONE=l._pe.PeDefs.prototype.PE_STR_AUTH_NONE;r.PE_STR_AUTH_TOP=l._pe.PeDefs.prototype.PE_STR_AUTH_TOP;r.PE_STR_NAME_CANON=l._pe.PeDefs.prototype.PE_STR_NAME_CANON;r.PE_PARM_X0=
l._pe.PeDefs.prototype.PE_PARM_X0;r.PE_PARM_ND=l._pe.PeDefs.prototype.PE_PARM_ND;r.PE_TRANSFORM_1_TO_2=l._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;r.PE_TRANSFORM_2_TO_1=l._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;r.PE_TRANSFORM_P_TO_G=l._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;r.PE_TRANSFORM_G_TO_P=l._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;r.PE_HORIZON_RECT=l._pe.PeDefs.prototype.PE_HORIZON_RECT;r.PE_HORIZON_POLY=l._pe.PeDefs.prototype.PE_HORIZON_POLY;r.PE_HORIZON_LINE=l._pe.PeDefs.prototype.PE_HORIZON_LINE;
r.PE_HORIZON_DELTA=l._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f=l.PeDefs||(l.PeDefs={}));(function(r){function w(D,y){var u=null,B=z[D];B||(B={},z[D]=B);if(B.hasOwnProperty(String(y)))u=B[y];else{var x=l._pe.PeFactory.prototype.factoryByType(D,y);l._pe.compare(x,l._pe.NULL)||(u=x,B[y]=u)}return u=v(u)}function v(D){if(D){var y=D.getType();switch(y){case f.PE_TYPE_GEOGCS:D=l._pe.castObject(D,l._pe.PeGeogcs);break;case f.PE_TYPE_PROJCS:D=l._pe.castObject(D,l._pe.PeProjcs);break;case f.PE_TYPE_GEOGTRAN:D=
l._pe.castObject(D,l._pe.PeGeogtran);break;default:y&f.PE_TYPE_UNIT&&(D=l._pe.castObject(D,l._pe.PeUnit))}}return D}var z={},C={};r.initialize=function(){l._pe.PeFactory.prototype.initialize(null)};r.coordsys=function(D){return w(f.PE_TYPE_COORDSYS,D)};r.factoryByType=w;r.fromString=function(D,y){var u=null,B=C[D];B||(B={},C[D]=B);if(B.hasOwnProperty(y))u=B[y];else{var x=l._pe.PeFactory.prototype.fromString(D,y);l._pe.compare(x,l._pe.NULL)||(u=x,B[y]=u)}return u=v(u)};r.geogcs=function(D){return w(f.PE_TYPE_GEOGCS,
D)};r.geogtran=function(D){return w(f.PE_TYPE_GEOGTRAN,D)};r.getCode=function(D){return l._pe.PeFactory.prototype.getCode(D)};r.projcs=function(D){return w(f.PE_TYPE_PROJCS,D)};r.unit=function(D){return w(f.PE_TYPE_UNIT,D)}})(l.PeFactory||(l.PeFactory={}));l.PeGCSExtent=null;var c;(function(r){var w;r.init=function(){r.PE_GTLIST_OPTS_COMMON=l._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;w=l._pe._pe_getPeGTlistExtendedEntrySize()};r.getGTlist=function(v,z,C,D,y,u){var B=null,x=new l._pe.PeInteger(u);
try{var A=l._pe.PeGTlistExtended.prototype.getGTlist(v,z,C,D,y,x);if(u=x.val)if(B=[A],1<u){var E=l._pe.getPointer(A);for(v=1;v<u;v++)B.push(l._pe.wrapPointer(E+w*v,l._pe.PeGTlistExtendedEntry))}}finally{l._pe.destroy(x)}return B}})(c=l.PeGTlistExtended||(l.PeGTlistExtended={}));(function(r){r.destroy=function(w){if(w&&w.length){for(var v=0;v<w.length;v++){var z=w[v];m(z);z.getEntries().forEach(function(C){m(C);C=C.getGeogtran();m(C);C.getParameters().forEach(m);[C.getGeogcs1(),C.getGeogcs2()].forEach(function(D){m(D);
var y=D.getDatum();m(y);m(y.getSpheroid());m(D.getPrimem());m(D.getUnit())})})}l._pe.PeGTlistExtendedEntry.prototype.Delete(w[0])}}})(l.PeGTlistExtendedEntry||(l.PeGTlistExtendedEntry={}));(function(r){r.geogToGeog=function(w,v,z,C,D){l._pe.ensureCache.prepare();var y=e(z),u=z===y;y=l._pe.ensureFloat64(y);var B=0;C&&(B=l._pe.ensureFloat64(C));(w=l._pe._pe_geog_to_geog(l._pe.getPointer(w),v,y,B,D))&&k(z,v,y,u);return w}})(l.PeGTTransformations||(l.PeGTTransformations={}));(function(r){function w(z,
C,D,y,u,B){l._pe.ensureCache.prepare();switch(z){case "dd":var x=l._pe._pe_geog_to_dd;var A=f.PE_DD_MAX;break;case "ddm":x=l._pe._pe_geog_to_ddm;A=f.PE_DDM_MAX;break;case "dms":x=l._pe._pe_geog_to_dms,A=f.PE_DMS_MAX}z=0;C&&(z=l._pe.getPointer(C));C=e(y);C=l._pe.ensureFloat64(C);A=a(D,A);y=l._pe.ensureInt32(A);if(u=x(z,D,C,u,y))for(x=0;x<D;x++)B[x]=l._pe.UTF8ToString(A[x]);return u}function v(z,C,D,y,u){l._pe.ensureCache.prepare();switch(z){case "dd":var B=l._pe._pe_dd_to_geog;break;case "ddm":B=l._pe._pe_ddm_to_geog;
break;case "dms":B=l._pe._pe_dms_to_geog}z=0;C&&(z=l._pe.getPointer(C));C=y.map(function(x){return l._pe.ensureString(x)});y=l._pe.ensureInt32(C);C=l._pe.ensureFloat64(Array(2*D));(B=B(z,D,y,C))&&k(u,D,C);return B}r.geog_to_dms=function(z,C,D,y,u){return w("dms",z,C,D,y,u)};r.dms_to_geog=function(z,C,D,y){return v("dms",z,C,D,y)};r.geog_to_ddm=function(z,C,D,y,u){return w("ddm",z,C,D,y,u)};r.ddm_to_geog=function(z,C,D,y){return v("ddm",z,C,D,y)};r.geog_to_dd=function(z,C,D,y,u){return w("dd",z,C,
D,y,u)};r.dd_to_geog=function(z,C,D,y){return v("dd",z,C,D,y)}})(l.PeNotationDms||(l.PeNotationDms={}));var d;(function(r){r.init=function(){r.PE_MGRS_STYLE_NEW=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;r.PE_MGRS_STYLE_OLD=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;r.PE_MGRS_STYLE_AUTO=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;r.PE_MGRS_180_ZONE_1_PLUS=l._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;r.PE_MGRS_ADD_SPACES=l._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
r.geog_to_mgrs_extended=function(w,v,z,C,D,y,u){l._pe.ensureCache.prepare();var B=0;w&&(B=l._pe.getPointer(w));w=e(z);z=l._pe.ensureFloat64(w);w=a(v,f.PE_MGRS_MAX);var x=l._pe.ensureInt32(w);if(C=l._pe._pe_geog_to_mgrs_extended(B,v,z,C,D,y,x))for(D=0;D<v;D++)u[D]=l._pe.UTF8ToString(w[D]);return C};r.mgrs_to_geog_extended=function(w,v,z,C,D){l._pe.ensureCache.prepare();var y=0;w&&(y=l._pe.getPointer(w));w=z.map(function(u){return l._pe.ensureString(u)});z=l._pe.ensureInt32(w);w=l._pe.ensureFloat64(Array(2*
v));(C=l._pe._pe_mgrs_to_geog_extended(y,v,z,C,w))&&k(D,v,w);return C}})(d=l.PeNotationMgrs||(l.PeNotationMgrs={}));(function(r){r.geog_to_usng=function(w,v,z,C,D,y,u){l._pe.ensureCache.prepare();var B=0;w&&(B=l._pe.getPointer(w));w=e(z);z=l._pe.ensureFloat64(w);w=a(v,f.PE_MGRS_MAX);var x=l._pe.ensureInt32(w);if(C=l._pe._pe_geog_to_usng(B,v,z,C,D,y,x))for(D=0;D<v;D++)u[D]=l._pe.UTF8ToString(w[D]);return C};r.usng_to_geog=function(w,v,z,C){l._pe.ensureCache.prepare();var D=0;w&&(D=l._pe.getPointer(w));
w=z.map(function(y){return l._pe.ensureString(y)});z=l._pe.ensureInt32(w);w=l._pe.ensureFloat64(Array(2*v));(D=l._pe._pe_usng_to_geog(D,v,z,w))&&k(C,v,w);return D}})(l.PeNotationUsng||(l.PeNotationUsng={}));var g;(function(r){r.init=function(){r.PE_UTM_OPTS_NONE=l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;r.PE_UTM_OPTS_ADD_SPACES=l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;r.PE_UTM_OPTS_NS=l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};r.geog_to_utm=function(w,v,z,C,D){l._pe.ensureCache.prepare();
var y=0;w&&(y=l._pe.getPointer(w));w=e(z);z=l._pe.ensureFloat64(w);w=a(v,f.PE_UTM_MAX);var u=l._pe.ensureInt32(w);if(C=l._pe._pe_geog_to_utm(y,v,z,C,u))for(y=0;y<v;y++)D[y]=l._pe.UTF8ToString(w[y]);return C};r.utm_to_geog=function(w,v,z,C,D){l._pe.ensureCache.prepare();var y=0;w&&(y=l._pe.getPointer(w));w=z.map(function(u){return l._pe.ensureString(u)});z=l._pe.ensureInt32(w);w=l._pe.ensureFloat64(Array(2*v));(C=l._pe._pe_utm_to_geog(y,v,z,C,w))&&k(D,v,w);return C}})(g=l.PeNotationUtm||(l.PeNotationUtm=
{}));var t;(function(r){var w=new Map;r.init=function(){r.PE_PCSINFO_OPTION_NONE=l._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;r.PE_PCSINFO_OPTION_DOMAIN=l._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;r.PE_POLE_OUTSIDE_BOUNDARY=l._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;r.PE_POLE_POINT=l._pe.PePCSInfo.prototype.PE_POLE_POINT};r.generate=function(v,z){void 0===z&&(z=r.PE_PCSINFO_OPTION_DOMAIN);var C;if(w.has(v)){var D=w.get(v);D[z]&&(C=D[z])}C||(C=l._pe.PePCSInfo.prototype.generate(v,
z),D||(D=[],w.set(v,D)),D[z]=C);return C}})(t=l.PePCSInfo||(l.PePCSInfo={}));(function(r){r.version_string=function(){return l._pe.PeVersion.prototype.version_string()}})(l.PeVersion||(l.PeVersion={}));l._init=p})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,b){l.__proto__=b}||function(l,b){for(var q in b)b.hasOwnProperty(q)&&(l[q]=b[q])};return function(l,b){function q(){this.constructor=
l}F(l,b);l.prototype=null===b?Object.create(b):(q.prototype=b.prototype,new q)}}()})},"esri/geometry/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(F,l,b){return function(){function q(n){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(n&&n.steps){var p=0;for(n=n.steps;p<n.length;p++){var m=n[p];m instanceof b?this.steps.push(m):this.steps.push(new b({wkid:m.wkid,wkt:m.wkt,isInverse:m.isInverse}))}}}q.cacheKey=
function(n,p){return[void 0!==n.wkid&&null!==n.wkid?n.wkid.toString():"-1",void 0!==n.wkt&&null!==n.wkt?n.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};q.fromGE=function(n){var p=new q,m="",a=0;for(n=n.steps;a<n.length;a++){var e=b.fromGE(n[a]);p.steps.push(e);m+=e.uid.toString()+","}p._cached_projection={};p._gtlistentry=null;p._chain=m;return p};q.prototype.getInverse=function(){var n=new q;n.steps=[];for(var p=
this.steps.length-1;0<=p;p--)n.steps.push(this.steps[p].getInverse());return n};q.prototype.getGTListEntry=function(){for(var n="",p=0,m=this.steps;p<m.length;p++)n+=m[p].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);return this._gtlistentry};q.prototype.assignCachedGe=function(n,p,m){this._cached_projection[q.cacheKey(n,p)]=m};q.prototype.getCachedGeTransformation=function(n,p){for(var m="",a=0,e=this.steps;a<e.length;a++)m+=e[a].uid.toString()+
",";m!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=m);m=this._cached_projection[q.cacheKey(n,p)];return void 0===m?null:m};return q}()})},"esri/geometry/GeographicTransformationStep":function(){define(["require","exports"],function(F,l){var b=0;return function(){function q(n){void 0===n&&(n=null);this.uid=b++;n?(this._wkt=void 0!==n.wkt?n.wkt:null,this._wkid=void 0!==n.wkid?n.wkid:-1,this._isInverse=void 0!==n.isInverse?!0===n.isInverse:!1):(this._wkt=null,this._wkid=
-1,this._isInverse=!1)}q.fromGE=function(n){var p=new q;p._wkt=n.wkt;p._wkid=n.wkid;p._isInverse=n.isInverse;return p};Object.defineProperty(q.prototype,"wkt",{get:function(){return this._wkt},set:function(n){this._wkt=n;this.uid=b++},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"wkid",{get:function(){return this._wkid},set:function(n){this._wkid=n;this.uid=b++},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"isInverse",{get:function(){return this._isInverse},
set:function(n){this._isInverse=n;this.uid=b++},enumerable:!0,configurable:!0});q.prototype.getInverse=function(){var n=new q;n._wkt=this.wkt;n._wkid=this._wkid;n._isInverse=!this.isInverse;return n};return q}()})},"esri/layers/rasterLib/raster/TileServiceRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterTileInfo ./RasterInfo ./BasicRaster".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y){F=l([y],{declaredClass:"esri.layers.rasterLib.raster.TileServiceRaster",constructor:function(u){},open:function(){var u=new q,B=this.serviceInfo||this._getServiceInfo(null),x=b.hitch(this,function(E){this.serviceInfo=E;this.version=E.currentVersion;this.rasterInfo=this._parseRasterInfo(E);this.loaded=!0;this._getRasterIdentifier();u.resolve(this)}),A=b.hitch(this,function(E){this.loaded=!0;this._getRasterIdentifier();u.reject(E)});k(B,x,A);return u.promise},
read:function(u){var B=this.url+"/tile/"+u.level+"/"+u.row+"/"+u.col,x={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,pixelType:null,format:null,decodeFunc:null,isPoint:"elevation"===this.tileType.toLowerCase()?!0:!1};return this._requestPixels({url:B+(this.disableClientCaching?"?_ts\x3d "+(new Date).getTime():""),payload:{},decodeParams:x,tileOptions:u})},identify:function(u,B){null==B&&(B=this.tileInfo.lods[this.tileInfo.lods.length-1].level);var x=(u.x-this.tileInfo.origin.x)/
this.tileInfo.lods[B].resolution/this.tileInfo.cols,A=(this.tileInfo.origin.y-u.y)/this.tileInfo.lods[B].resolution/this.tileInfo.rows,E=Math.floor(x),J=Math.floor(A),O=Math.floor((x-E)*this.tileInfo.cols);O=Math.min(O,this.tileInfo.cols-1);var S=Math.floor((A-J)*this.tileInfo.rows);S=Math.min(S,this.tileInfo.rows-1);var X=new q;this.read({level:B,row:J,col:E}).then(function(Y){var K=S*Y.width+O;Y&&Y.pixels&&0<Y.pixels.length?(Y=Y.mask?Y.mask[K]?Y.pixels.map(function(P){return P[K]}):null:Y.pixels.map(function(P){return P[K]}),
X.resolve(Y)):X.reject("no valid data")},function(Y){X.reject(Y)});return X.promise},setFetchParameters:function(u,B){},_getRasterIdentifier:function(){this._rasterId||(this._rasterId=this.url.replace("http:","").replace("https:",""));return this._rasterId},_getServiceInfo:function(){var u=this.url,B=new q(r._dfdCanceller);B._pendingDfd=c({url:u,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});B._pendingDfd.then(function(x){B.callback(x)},function(x){B.errback(x)});return B},_parseRasterInfo:function(u){var B=
new D;B.extent=new d(u.fullExtent);B.spatialReference=new t(u.spatialReference);this.tileType=u.cacheType||"Map";switch(this.tileType){case "Map":B.bandCount=3;B.pixelType="U8";this.dataType="Processed";break;case "Elevation":B.bandCount=1;B.pixelType=u.pixelType||"F32";this.dataType="Elevation";break;case "Raster":B.bandCount=null,B.pixelType=null,this.dataType=u.serviceDataType&&u.serviceDataType.replace("esriImageServiceDataType","")||"Generic"}var x=u.tileInfo;B.width=Math.floor((u.fullExtent.xmax-
u.fullExtent.xmin)/x.lods[x.lods.length-1].resolution+.5);B.height=Math.floor((u.fullExtent.ymax-u.fullExtent.ymin)/x.lods[x.lods.length-1].resolution+.5);B.cellSize=new g({x:x.lods[x.lods.length-1].resolution,y:x.lods[x.lods.length-1].resolution,spatialReference:u.spatialReference});this.tileInfo=new C(x);this.tileInfo.tileType=this.tileType;return B}});b.setObject("layers.rasterLib.raster.TileServiceRaster",F,h);return F})},"esri/layers/rasterLib/raster/TileRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterTileInfo ./RasterInfo ./BasicRaster".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y){F=l([y],{declaredClass:"esri.layers.rasterLib.raster.TileRaster",sourceType:"TileCache",_RECORD_SIZE:8,constructor:function(u){this._cloudBlobStorage=u&&u._cloudBlobStorage},open:function(){var u=new q,B=this.datasetInfo||this._getDatasetInfo(null),x=b.hitch(this,function(E){this.datasetInfo=E;this.rasterInfo=E=this._parseRasterInfo(E);this.tileType="Cache/LERC"===E.format?"Elevation":"Cache/MIXED"===E.format||"Cache/JPEG"===E.format||"Cache/PNG"===
E.format?"Map":"Raster";this.tileInfo=E.tileInfo;this.dataType=["Generic","Elevation","Processed"][["Raster","Elevation","Map"].indexOf(this.tileType)];this._HEADER_SIZE=E.packetSize*E.packetSize*this._RECORD_SIZE+64;this.loaded=!0;this._cloudBlobStorage=this._cloudBlobStorage||-1<this.url.toLowerCase().indexOf("s3.amazonaws.com")||-1<this.url.toLowerCase().indexOf("windows.net")||-1<this.url.toLowerCase().indexOf("googleapis.com");this._getRasterIdentifier();u.resolve(this)}),A=b.hitch(this,function(E){this.loaded=
!0;this._getRasterIdentifier();u.reject(E)});k(B,x,A);return u.promise},read:function(u){var B=new q,x=u.level,A=u.row,E=u.col,J=this._buildCacheFilePath(this.url,x,A,E),O=this._getIndexRecordFromBundle(x,A,E);c({url:J,content:{},headers:{Range:"bytes\x3d0-"+(this._HEADER_SIZE-1).toString()},handleAs:"arraybuffer"}).then(b.hitch(this,function(S,X){if(!B.isCanceled()){var Y=new Uint8Array(S);Y=this._getTileEndAndContentType(Y,O);var K={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,
pixelType:null,format:null,decodeFunc:null,isPoint:"elevation"===this.tileType.toLowerCase()?!0:!1};this._requestPixels({url:J+(this.disableClientCaching?"?_ts\x3d "+(new Date).getTime():""),payload:{},headers:{Range:"bytes\x3d"+Y.position.toString()+"-"+(Y.position+Y.recordSize).toString()},decodeParams:K,tileOptions:u}).then(function(P){B.isCanceled()||B.resolve(P)},function(P){B.isCanceled()||B.reject(P)})}}));return B.promise},identify:function(){return null},setFetchParameters:function(u,B){},
toJson:function(){return{url:this.url,tileInfo:this.tileInfo.toJson(),rasterInfo:this.rasterInfo.toJson(),datasetInfo:this.datasetInfo,sourceType:this.sourceType,tileType:this.tileType,_rasterId:this._rasterId}},_getDatasetInfo:function(){return c({url:this.url+"/conf.json",handleAs:"json",content:{}})},_parseRasterInfo:function(u){var B=new D;switch(u.pixelType){case 1:var x="U1";break;case 1:x="U2";break;case 2:x="U4";break;case 3:x="U8";break;case 4:x="S8";break;case 5:x="U16";break;case 6:x="S16";
break;case 7:x="U32";break;case 8:x="S32";break;case 9:x="F32";break;default:x="F32"}var A,E=[],J=u.LODInfos;for(A=0;A<J.levels.length;A++)E.push({level:J.levels[A],resolution:J.resolutions[A],scale:96/.0254*J.resolutions[A]});A=new t(u.extent.spatialReference||u.geodataXform.spatialReference);E=new C({rows:u.blockHeight,cols:u.blockWidth,dpi:96,format:u.format,compressionQuality:0,origin:u.origin,spatialReference:A,lods:E});B.pixelType=x;B.bandCount=u.bandCount;B.spatialReference=A;B.extent=new d({xmin:u.extent.xmin,
ymin:u.extent.ymin,xmax:u.extent.xmax,ymax:u.extent.ymax,spatialReference:A});B.cellSize=new g({x:u.pixelSizeX,y:u.pixelSizeY,spatialReference:A});B.width=Math.floor((B.extent.xmax-B.extent.xmin)/B.cellSize.x+.5);B.height=Math.floor((B.extent.ymax-B.extent.ymin)/B.cellSize.y+.5);B.statistics=u.statistics.map(function(O){Object.keys(O).forEach(function(S){isNaN(O[S])&&(O[S]=null)});return O});B.histograms=u.histograms;B.geodataXform=u.geodataXform;B.packetSize=u.packetSize;B.format=u.format;B.compressionQuality=
u.compressionQuality;B.tileInfo=E;return B},_getRasterIdentifier:function(){this._rasterId||(this._rasterId=this.url.replace("http:","").replace("https:",""));return this._rasterId},_buildCacheFilePath:function(u,B,x,A){var E=this.rasterInfo.packetSize;A=Math.floor(A/E)*E;x="R"+this._toHexString4(Math.floor(x/E)*E)+"C"+this._toHexString4(A);E="L";E=10<=B?E+B.toString():E+("0"+B.toString());return this._cloudBlobStorage?u+"/_alllayers/"+E+"/"+x+".bundle":u+"/"+E+"_"+x+"/bundle"},_getIndexRecordFromBundle:function(u,
B,x){u=this.rasterInfo.packetSize;B=B%u*u+x%u;if(0>B)throw"Invalid level / row / col";return B*this._RECORD_SIZE+64},_getTileEndAndContentType:function(u,B){var x=u.subarray(B,B+8),A=0,E;for(E=0;5>E;E++)A|=(x[E]&255)<<8*E;var J=A&0xffffffffff;A=0;for(E=5;8>E;E++)A|=(x[E]&255)<<8*(E-5);return{position:J,recordSize:A&0xffffffffff}},_toHexString4:function(u){u=u.toString(16);if(4!=u.length)for(var B=4-u.length;0<B--;)u="0"+u;return u}});b.setObject("layers.rasterLib.raster.TileRaster",F,h);return F})},
"esri/layers/rasterLib/raster/FunctionRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff ../DeferredList2 dojo/when ../../../kernel ../../../Evented ../../../request ../../../deferredUtils ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../rasterFormats/rasterCodec ./RasterInfo ./BasicRaster ../../rasterLib/function/rasterFunctionHelper".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y){F=l([D],{declaredClass:"esri.layers.rasterLib.raster.FunctionRaster",rasterFunction:null,sourceType:"Function",constructor:function(u){u&&u.rasterFx&&this._init(u.rasterFx,u.rasterFxArgs)},open:function(){var u=this.getMemberRasters().map(function(x){return x.open()});this.identifiers=this.getMemberRasters().map(function(x){return x._rasterId});var B=new q;(new e(u,null,null,!0)).then(function(x){x.some(function(A){return!A[0]})?B.reject(x):
(this.rasterFunction.bind(),this.rasterInfo=this.rasterFunction.rasterInfo,this.dataType=this.rasterInfo.keyProperties&&this.rasterInfo.keyProperties.DataType||"Generic",this.tileInfo=x[0][1].tileInfo,B.resolve(this))}.bind(this));return B.promise},getProjectedFullExtent:function(u){var B=new q;this.getMemberRasters()[0].getProjectedFullExtent(u).then(b.hitch(this,function(x){this.projectedFullExtent=x;B.resolve(x)}));return B.promise},setProcessingContext:function(u){var B=u;u.layer&&(u=u.layer,
B={id:u.id,rawRasterInfo:u.raster.rasterInfo,glSetting:u._glSetting,xformSetting:u.tileManager&&u.tileManager.xformSetting,useWebGL:u.useWebGL,resampling:u.tileMode&&u.tileManager&&u.tileManager.xformSetting.requireProjection&&!u._hasTilingEffects&&"Thematic"!==u.raster.dataType?1:0,tileMode:u.tileMode});this.rasterFunction.setProcessingContext(B);this._layerOptions=B},alterDefinition:function(u){if(u=u||this.rasterFunction)1===this.memberRasters.length&&!u._bindComplete&&(this.rasterFunction=y.create(u,
{raster:this.memberRasters[0]}))&&(this.rasterFunction.bind(),this.rasterInfo=this.rasterFunction.rasterInfo,this.dataType=this.rasterInfo.keyProperties&&this.rasterInfo.keyProperties.DataType||"Generic",this.rasterFunction.setProcessingContext(this._layerOptions)),this._rasterHandler&&this._rasterHandler._connected&&this.rasterFunction&&this._rasterHandler.setRasterFunction({layerId:this._layerOptions.id,data:this.rasterFunction.toJson(!0)})},setFetchParameters:function(u,B){var x=this.getMemberRasters();
x&&1===x.length&&x[0].setFetchParameters(u,B)},getMemberRasters:function(){this.memberRasters||(this.memberRasters=[],this._getMemberRasters(this.rasterFunction.functionArguments,this.memberRasters));return this.memberRasters},read:function(u){var B=new q(d._dfdCanceller);if(u.src){var x=this.rasterFunction.read(u);B.resolve(x);return B.promise}var A=this.getMemberRasters().map(function(S){return S.read(u)});A=new e(A);var E,J,O=this.identifiers;B._pendingDfd=A;A.then(b.hitch(this,function(S){if(E=
S.some(function(X){return X[0]}))J={},S.forEach(function(X,Y){J[O[Y]]=X[0]?X[1]:null});x=J?this.rasterFunction.read({extent:u.extent,src:J}):null;x.srcData=J;B.resolve(x)}));return B},_init:function(u,B){if(this.rasterFunction=y.create(u,B))this.rasterFunction._bindComplete=!0;else throw"Cannot initialize a function raster without a raster function";},_getMemberRasters:function(u,B){var x=Object.keys(u),A,E,J;for(A=0;A<x.length;A++)if(J=u[x[A]]){var O=J instanceof Array?J:[J];for(E=0;E<O.length;E++)(J=
O[E])&&("function"===typeof J||"object"===typeof J)&&J.read&&(J.functionArguments?this._getMemberRasters(J.functionArguments,B):J.sourceType&&"Function"!==J.sourceType&&(J._identifier=J._getRasterIdentifier(),B.some(function(S){return S._identifier===J._identifier})||B.push(J)))}return B}});b.setObject("layers.rasterLib.raster.FunctionRaster",F,h);return F})},"esri/layers/rasterLib/DeferredList2":function(){define(["dojo/DeferredList"],function(F){return function(l,b,q,n,p){this.list=l;b=new F(l,
b,q,n,p);var m=b.resolve.bind(b),a=b.cancel.bind(b);b.cancel=function(){l&&l.forEach(function(e){e.cancel&&e.cancel()});a.apply(this,arguments)}.bind(b);b.resolve=function(){this.isFulfilled()||m.apply(this,arguments)}.bind(b);return b}})},"esri/layers/rasterLib/tile/RasterTileManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/when ../DeferredList2 ../../../geometry/Extent ../../../SpatialReference ../../../geometry/Point ../../PixelBlock ./RasterTileInfo ../raster/rasterProjectionHelper".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h){var f=function(c,d){var g;for(g=0;g<c.length;g++)if(d(c[g]))return g;return-1};return F(null,{declaredClass:"esri.layers.rasterLib.tile.RasterTileManager",count:null,fullBoundary:null,tileBoundary:null,tiles:null,resolution:null,virtual:!0,prefetchBufferSize:0,_progressiveGlobal:!1,_MAX_TILES:128,_defaultMatrixResolution:20,constructor:function(c){this.tiles=[];this.xformSetting={};this.mapSpatialReference=c&&c.mapSR;this.layer=c&&c.layer;this.identifiers=this.layer.raster.rasterFunction?
this.layer.raster.getMemberRasters().map(function(d){return d._rasterId}):[this.layer.raster._rasterId];(c=c&&c.tileInfo)&&this.setTileInfo(c)},setTileInfo:function(c){this.tileInfo=c;this.virtual=c.virtual;this.mapResolution=null;this.tiles.length=0;this.xformSetting.requireProjection=!this.virtual&&!this.mapSpatialReference.equals(this.tileInfo.spatialReference);this.xformSetting.requirePE=h.requirePE(this.mapSpatialReference,this.tileInfo.spatialReference);this.xformSetting.meshSize=this.xformSetting.requireProjection?
[this._defaultMatrixResolution,this._defaultMatrixResolution]:[1,1];this.halfWorldWidth=h.getHalfWorldWidth(c.spatialReference)},updateResolution:function(c,d){if(!(this.mapResolution&&c&&this._resolutionEqual(this.mapResolution.x,c.x)&&this._resolutionEqual(this.mapResolution.y,c.y))){this.resetTiles();var g=this.xformSetting.requireProjection;this.mapResolution=this.resolution=c;g&&(this.resolution=h.projectResolution(c,this.tileInfo.spatialReference,this.layer.projectedFullExtent||d));this._resolution=
this.resolution;g=this.resolution;if(!this.tileInfo.virtual){var t=.75*Math.min(g.x,g.y)+.25*Math.max(g.x,g.y);if(t>=this.tileInfo.lods[0].resolution){var r=this.tileInfo.lods[0];this.ooe=!0}else{if(t<=this.tileInfo.lods[this.tileInfo.lods.length-1].resolution)r=this.tileInfo.lods[this.tileInfo.lods.length-1];else for(g=0;g<this.tileInfo.lods.length-1;g++){r=this.tileInfo.lods[g];var w=this.tileInfo.lods[g+1];if(r.resolution>=t&&w.resolution<=t){r.resolution-t>t-w.resolution&&(r=w);break}}this.ooe=
!1}this.level=r&&r.level;g=this.resolution=new a({x:r.resolution,y:r.resolution,spatialReference:this.tileInfo.spatialReference})}t=this.layer.raster.rasterInfo.extent;r=this.tileInfo.origin;w=this.tileInfo.cols;var v=this.tileInfo.rows;this.fullBoundary={rowStart:Math.floor((r.y-t.ymax)/g.y/v),rowEnd:Math.floor((r.y-t.ymin-g.y)/g.y/v),colStart:Math.floor((t.xmin-r.x)/g.x/w),colEnd:Math.floor((t.xmax-r.x-g.x)/g.x/w)};if(t=this.halfWorldWidth){v=Math.ceil(t/g.x/(w/2));var z=this.tileInfo.applyGCS360Transform?
360:t,C=Math.round(w-(z-r.x)/g.x%w);C===w&&(C=0);this.fullBoundary.colRange=v;this.fullBoundary.paddingRight=C;this.fullBoundary.paddingLeft=Math.round((v*w*g.x+r.x-z-(this.tileInfo.applyGCS360Transform?0:r.x+t))/g.x)}this.hasNewData=!0}},getXformGrid:function(){var c=this.mapExtent,d=this.layer._hasTilingEffects?this.extent:this.fullExtent,g=this.layer.getCurrentResolution(),t=JSON.stringify(c.toJson())+JSON.stringify(d.toJson());this._datumTransformationInitialized||(this._datumTransformationInitialized=
!0,this._datumTransformation=h.getDefaultDatumTransformationForDataset(this.layer.raster.rasterInfo.extent,c.spatialReference,!0));this._cachedExtentString&&this._cachedExtentString===t||(this._cachedExtentString=t,this._xformGrid=c=h.getProjectionOffsetGrid(c,d,g,this.tileInfo.applyGCS360Transform,this.halfWorldWidth,this._datumTransformation));c=this._xformGrid;this.xformSetting.meshSize=c&&c.size;return c},getWrapTimes:function(c){var d=h.getHalfWorldWidth(c.spatialReference);if(!d)return 0;var g=
2*d;d=this.tileInfo.applyGCS360Transform?0:-d;return Math.floor((c.xmax-d)/g)-Math.floor((c.xmin-d)/g)},normalizeCoordinate:function(c,d){if(!d)return 0;var g=2*d;if(0<c){for(;c>d;)c-=g;return c}for(;c<-d;)c+=g;return c},resetTiles:function(){this.tiles.forEach(l.hitch(this,function(c){c.fetch&&!c.fetch.isCanceled()&&c.fetch.cancel();c.update&&!c.update.isCanceled()&&c.update.cancel()}));this.tiles.length=0},updateExtent:function(c,d){this.mapExtent=this.extent=c;var g=this.xformSetting.requireProjection;
if(g){this.extent=h.project(c,this.tileInfo.spatialReference,this.tileInfo.applyGCS360Transform);if(!this.extent)return;this.extent.spatialReference=new m(this.extent.spatialReference.toJson())}else if(c.spatialReference.isWebMercator()||4326===c.spatialReference.wkid){var t=4326===c.spatialReference.wkid?180:this.halfWorldWidth,r=c.xmin;if(r<-t||r>t){for(var w=c.xmax,v=2*t;r<-t;)r+=v,w+=v;for(;r>t;)r-=v,w-=v;this.mapExtent=this.extent=c=new p(r,c.ymin,w,c.ymax,c.spatialReference)}}this.updateResolution(d,
c);t=this.extent;r=this.tileInfo;w=r.cols;v=r.rows;d=this.resolution;var z=t,C=g?this.layer.raster.rasterInfo.extent:this.layer.raster.projectedFullExtent;this.ooe&&(z=this._getIntersect(t,C));var D=Math.floor((z.xmin-r.origin.x)/d.x/w)-this.prefetchBufferSize,y=Math.floor((z.xmax-r.origin.x)/d.x/w)+this.prefetchBufferSize,u=null,B=this.getWrapTimes(c),x=this.fullBoundary&&this.fullBoundary.colRange;B&&this.halfWorldWidth&&(y===D&&(u=D),y+=B*x);if(g=this.halfWorldWidth&&this.tiles.length&&(B!==this.wrapTimes||
u!==this._circlularColId))this._wrapSwitchCount=this._wrapSwitchCount?this._wrapSwitchCount+1:1;this.wrapTimes=B;this._circlularColId=u;var A=Math.floor((r.origin.y-z.ymax)/d.y/v)-this.prefetchBufferSize;u=Math.floor((r.origin.y-z.ymin)/d.y/v)+this.prefetchBufferSize;this.tileBoundary={rowStart:A,rowEnd:u,colStart:D,colEnd:y};var E,J;((z=(u-A+1)*(y-D+1)>this._MAX_TILES||!this.virtual&&this._resolution.x>8*this.tileInfo.lods[0].resolution)||2<B||g)&&this.resetTiles();if(!(z||2<B)){z=this.tiles;g=!1;
for(E=z.length-1;0<=E;E--){var O=z[E].row;var S=z[E].wrapCol;if(O<A||O>u||S<D||S>y)z[E].fetch&&!z[E].fetch.isCanceled()&&z[E].fetch.cancel(),z[E].update&&!z[E].update.isCanceled()&&z[E].update.cancel(),z.splice(E,1),g=!0}for(E=A;E<=u;E++)for(J=D;J<=y;J++){A=new p(r.origin.x+d.x*w*J,r.origin.y-d.y*v*(E+1),r.origin.x+d.x*w*(J+1),r.origin.y-d.y*v*E,t.spatialReference);var X=B&&x?0<=J?J%x:x- -J%x:J;O=f(z,function(Y){return Y.row===E&&Y.col===X&&Y.wrapCol===J});S=C.xmax>=A.xmax?w:Math.round((C.xmax-A.xmin)/
d.x);-1===O&&(z.push({row:E,col:X,wrapCol:J,cellsizeX:d.x,cellsizeY:d.y,width:w,height:v,actualWidth:S,extent:A,normalizedExtent:this._wrapExtent(A,X),pixelBlock:null,virtual:this.virtual,level:this.level,tileType:this.tileInfo.tileType||"Raster"}),g=!0)}g&&this._sortTiles();r=this.tileInfo.rows*(this.tileBoundary.rowEnd-this.tileBoundary.rowStart+1);this.width=this.tileInfo.cols*(this.tileBoundary.colEnd-this.tileBoundary.colStart+1);this.height=r;this.count=z.length;r=Math.min.apply(null,z.map(function(Y){return Y.extent.xmin}));
w=Math.max.apply(null,z.map(function(Y){return Y.extent.xmax}));v=Math.min.apply(null,z.map(function(Y){return Y.extent.ymin}));C=Math.max.apply(null,z.map(function(Y){return Y.extent.ymax}));r=this.fullExtent=new p(r,v,w,C,t.spatialReference);if(this.layer.roaming||this.layer.useWebGL)this.layer._hasTilingEffects?(this.xformSetting.offset=[0,0],this.xformSetting.scale=[1,1]):(g&&(this._tilesChanged=!0),this.xformSetting.offset=[(t.xmin-r.xmin)/(r.xmax-r.xmin),-(r.ymin-t.ymin)/(r.ymax-r.ymin)],this.xformSetting.scale=
[(t.xmax-t.xmin)/(r.xmax-r.xmin),(t.ymax-t.ymin)/(r.ymax-r.ymin)])}},fetchTiles:function(c){(this._tilesChanged||c)&&this._fetchTiles(c)},_fetchTiles:function(c){this._fetchCounter=0;var d=this.extent;this.fetchAllCompleted=c?new b:null;(this._tilesChanged||c&&this.layer._hasTilingEffects)&&this.tiles.forEach(l.hitch(this,function(t){t.updateCompleted=!1}));var g={};!this.layer.roaming&&this.layer._hasTilingEffects&&c?(this.identifiers.forEach(function(t,r){g[t]={extent:this.extent,pixelBlock:new e({width:this.layer._map.width,
height:this.layer._map.height,pixels:[],pixelType:"",mask:null,statistics:[]})}}.bind(this)),this.originalPixelData={extent:this.extent,src:g,isEmpty:!0}):this._tilesChanged&&(this.identifiers.forEach(function(t,r){g[t]={extent:this.fullExtent,pixelBlock:new e({width:128,height:128,pixels:[],pixelType:"",mask:null,statistics:[]})}}.bind(this)),this.originalPixelData={extent:this.fullExtent,src:g,isEmpty:!0});this.tiles.forEach(l.hitch(this,function(t){if(t.fetch)t.update||(t.update=this.updateTile(t));
else{if(this._isTileOutSide(t,d)){t.updateCompleted=!0;return}this._requestTile(t)}this.layer.roaming&&this.layer.useWebGL?this._fillPixelData(t):t.src&&c&&(this.layer._hasTilingEffects||this.layer.useWebGL)&&(this._fillPixelData(t),this.layer._hasTilingEffects&&(t.updateCompleted=!0),t.processedPixelBlock=null,t.renderedPixelBlock=null)}));0===this._fetchCounter&&(this._fetched=!0);this._tilesChanged=!1;c&&this._updateFetchStatus()},updateTile:function(c,d){var g=new b;if(!c.src&&!c.fetch)return g.resolve(c),
g.promise;q(c.src||c._fetched||c.fetch,l.hitch(this,function(){var t=this.layer.tileMode&&this.layer._rasterHandler&&!(this.layer._hasTilingEffects||this.layer.useWebGL),r=this.layer._drawTile,w=this._validateRawPixelBlocks(c);this.layer._hasTilingEffects&&!this.layer.useWebGL&&(r=r&&(this._progressiveGlobal||d));if((d||!d&&w)&&(t||r||this.layer.roaming)){if(this.xformSetting.requireProjection&&this.layer.useWebGL&&(this.xformSetting.gridConfig=this.getXformGrid(),null==this.xformSetting.gridConfig))return g.cancel(),
g.promise;this._processTile(c,d).then(l.hitch(this,function(v){g.isCanceled()||this._renderTile(v,d).then(l.hitch(this,function(z){this.hasNewData=!1;g.isCanceled()||g.resolve(z)}))}))}else d||w||(c.updateCompleted=!0),this.layer.useWebGL||this.layer._hasTilingEffects?g.resolve(this.originalPixelData):g.resolve()}));return g.promise},setLayer:function(c){this.layer=c},fillupTiles:function(){this.tiles.forEach(l.hitch(this,function(c){c.update&&c.updateCompleted&&!c.filled&&(c.updateCompleted=!1,this._fillPixelData(c),
c.updateCompleted=!0)}))},_validateRawPixelBlocks:function(c){return c&&c.src&&!this.identifiers.some(function(d){return!(c.src[d].pixelBlock&&0!==c.src[d].pixelBlock.validPixelCount&&c.src[d].pixelBlock.pixels&&0<c.src[d].pixelBlock.pixels.length)})},_wrapExtent:function(c,d){if(c){if(this.tileInfo.applyGCS360Transform){var g=this.normalizeCoordinate(c.xmin,180);0>g&&(g+=360);return new p({xmin:g,ymin:c.ymin,xmax:c.xmax-c.xmin+g,ymax:c.ymax,spatialReference:c.spatialReference})}if(this.halfWorldWidth){g=
null!=d?new p({xmin:this.tileInfo.origin.x+this.tileInfo.cols*d*this.resolution.x,ymin:c.ymin,xmax:this.tileInfo.origin.x+this.tileInfo.cols*(d+1)*this.resolution.x,ymax:c.ymax,spatialReference:c.spatialReference}):new p({xmin:c.xmin,ymin:c.ymin,xmax:c.xmax,ymax:c.ymax,spatialReference:c.spatialReference});var t=this.normalizeCoordinate(g.xmin,this.halfWorldWidth),r=t-g.xmin;.01<Math.abs(r)&&(g.xmin=t,g.xmax+=r)}return g||c}},_getIntersect:function(c,d){return new p(Math.max(c.xmin,d.xmin),Math.max(c.ymin,
d.ymin),Math.min(c.xmax,d.xmax),Math.min(c.ymax,d.ymax),c.spatialReference)},_isTileOutSide:function(c,d){var g=!1;if(c.virtual){var t=c.normalizedExtent;if(d=d||(this.xformSetting.requireProjection?this.layer.raster.rasterInfo.extent:this.layer.raster.projectedFullExtent)){g=t.xmin-this.prefetchBufferSize*this.tileInfo.cols*this.resolution.x;var r=t.ymin-this.prefetchBufferSize*this.tileInfo.rows*this.resolution.y;var w=t.xmax+this.prefetchBufferSize*this.tileInfo.cols*this.resolution.x;t=t.ymax+
this.prefetchBufferSize*this.tileInfo.rows*this.resolution.y;g=w<=d.xmin||g>=d.xmax||t<=d.ymin||r>=d.ymax}else g=!1}else g=0>c.level||c.row<this.fullBoundary.rowStart||c.row>this.fullBoundary.rowEnd||c.col<this.fullBoundary.colStart||c.col>this.fullBoundary.colEnd;return g},_resolutionEqual:function(c,d){return c===d||c&&d&&Math.abs(c-d)<Math.abs(d/1E4)?!0:!1},_requestTile:function(c){var d=this.identifiers,g;if(this._isTileOutSide(c)){var t=new b;c.updateCompleted=!0;t.resolve(null);t=t.promise}else t=
this.layer.raster.rasterFunction?new n(this.layer.raster.getMemberRasters().map(function(r){return r.read(c)})):new n([this.layer.raster.read(c)]);c.fetch=t;this._fetchCounter++;q(c.src||c._fetched||t,l.hitch(this,function(r){if(g=r&&r.some(function(v){return v[0]})){var w={};r.forEach(function(v,z){w[d[z]]=v[0]&&v[1]?{extent:v[1].extent,pixelBlock:v[1].pixelBlock,width:v[1].width,height:v[1].height}:null});c.src=w}else c.src=null;this._fetchCounter--;0===this._fetchCounter&&(this._fetched=!0);c._fetched=
!0;this._updateFetchStatus()}),l.hitch(this,function(){this._fetchCounter--;0===this._fetchCounter&&(this._fetched=!0);c._fetched=!0;this._updateFetchStatus()}));c.update=this.updateTile(c)},_updateFetchStatus:function(){this.layer._drawTile&&this.fetchAllCompleted&&!this.fetchAllCompleted.isResolved()&&!this.tiles.some(function(c){return!c._fetched})&&(this.tiles.forEach(l.hitch(this,function(c){this._fillPixelData(c)})),this.fetchAllCompleted.resolve())},_fillPixelData:function(c,d){if(c&&!c.updateCompleted)if(Math.abs(c.cellsizeX-
this.resolution.x)>c.cellsizeX/10)c.updateCompleted=!0;else if(!1===this._validateRawPixelBlocks(c))c.updateCompleted=!0;else{var g=c.extent;if(this.layer.roaming||this.layer.useWebGL&&!this.layer._hasTilingEffects){var t=this.fullExtent;var r=this.tileInfo.cols*(this.tileBoundary.colEnd-this.tileBoundary.colStart+1);var w=this.tileInfo.rows*(this.tileBoundary.rowEnd-this.tileBoundary.rowStart+1);d?this.originalPixelData.renderedPixelBlock||(this.originalPixelData.renderedPixelBlock=new e({width:r,
height:w,pixels:[],pixelType:"",mask:null,statistics:[]})):this.identifiers.forEach(l.hitch(this,function(z){this.originalPixelData.src[z].pixelBlock.width=r;this.originalPixelData.src[z].pixelBlock.height=w}))}else t=this.extent,r=this.layer._map.width,w=this.layer._map.height,d?this.originalPixelData.renderedPixelBlock||(this.originalPixelData.renderedPixelBlock=new e({width:r,height:w,pixels:[],pixelType:"",mask:null,statistics:[]})):this.identifiers.forEach(l.hitch(this,function(z){this.originalPixelData.src[z].pixelBlock.width=
r;this.originalPixelData.src[z].pixelBlock.height=w}));if(t.xmax<=g.xmin||t.xmin>=g.xmax||t.ymax<=g.ymin||t.ymin>=g.ymax)return null;var v=this.originalPixelData.isEmpty=!1;this.identifiers.forEach(l.hitch(this,function(z){c.src&&(this._fillPixelBlock(c.src[z],this.originalPixelData.src[z],{extent:t,width:r,height:w,normalizedExtent:c.normalizedExtent},!1),v=!0)}));c.filled=v;this.hasNewData=!0}},_fillPixelBlock:function(c,d,g,t){var r=c.extent,w=g.extent;t=g.width;var v=g.height;if(c.pixelBlock&&
c.pixelBlock.pixels&&c.pixelBlock.pixels[0]){var z=(r.xmax-r.xmin)/c.width,C=Math.max(r.xmin,w.xmin),D=Math.min(r.ymax,w.ymax),y=Math.round((C-r.xmin)/z),u=c.width-Math.round(Math.abs(r.xmax-Math.min(r.xmax,w.xmax))/z),B=Math.round(Math.abs(r.ymax-D)/z),x=c.height-Math.round((Math.max(r.ymin,w.ymin)-r.ymin)/z),A=this.halfWorldWidth;C=Math.round((C-w.xmin)/z);g=g.normalizedExtent;if(!(this.wrapTimes&&A&&r.xmin<-A)){if(this.wrapTimes&&A){if(this.tileInfo.applyGCS360Transform)360<r.xmin&&(C-=this.fullBoundary.paddingLeft);
else if(r.xmin>A){C-=this.fullBoundary.paddingLeft;var E=this.normalizeCoordinate(r.xmin,A);var J=this.normalizeCoordinate(r.xmax,A)}else E=r.xmin,J=r.xmax;this.tileInfo.applyGCS360Transform?g&&360>g.xmin&&360<g.xmax&&(u-=this.fullBoundary.paddingRight):g&&g.xmin<A&&g.xmax>A?u-=this.fullBoundary.paddingRight:E<A&&J>A&&(u-=this.fullBoundary.paddingRight)}E=Math.round(Math.abs(w.ymax-D)/z);J=c.pixelBlock.pixels.length;d=d.pixelBlock;g=c.width;r=d.mask||new Uint8Array(t*v);var O=c.pixelBlock,S=O.mask,
X=0;for(z=0;z<J;z++){D=O.pixels[z];A=d.pixels[z]||new D.constructor(t*v);for(c=B;c<x;c++)for(X=(E+c-B)*t+C,w=y;w<u;w++)A[X+w-y]=D[c*g+w];d.pixels[z]=A}if(S)for(c=B;c<x;c++)for(X=(E+c-B)*t+C,w=y;w<u;w++)r[X+w-y]=S[c*g+w];else for(c=B;c<x;c++)for(X=(E+c-B)*t+C,w=y;w<u;w++)r[X+w-y]=1;d.pixelType=d.pixelType||O.pixelType;d.mask=r;if(!(d.statistics&&0<d.statistics.length))for(d.statistics=[],c=0;c<O.statistics.length;c++)d.statistics[c]={minValue:O.statistics[c].minValue,maxValue:O.statistics[c].maxValue};
else if(O.statistics&&d.statistics)for(c=0;c<d.statistics.length;c++)d.statistics[c].minValue=Math.min(O.statistics[c].minValue,d.statistics[c].minValue),d.statistics[c].maxValue=Math.max(O.statistics[c].maxValue,d.statistics[c].maxValue)}}},_processTile:function(c,d){var g=new b,t=this.layer._hasTilingEffects,r=this.layer.useWebGL,w=t||r,v=this.layer.raster.rasterFunction&&c&&(t||r||!c.processedPixelBlock);if(d)var z=c;else this._fillPixelData(c),z=w?this.originalPixelData:c;this.xformSetting.hasNewTexture=
this.hasNewData;var C;v?(this.identifiers.forEach(function(D){if(0===z.src[D].pixelBlock.pixels.length||0===z.src[D].pixelBlock.pixels[0].length)C=!0}),C?g.resolve({extent:z.extent,processedPixelBlock:z.src[this.identifiers[0]],pixelBlock:z.src[this.identifiers[0]]}):r?(this.processedPixelData=this.layer.raster.rasterFunction.read(z),g.resolve(this.processedPixelData)):this.layer._rasterHandler?this.layer._rasterHandler.process({extent:z.extent,src:z.src}).then(function(D){t?(this.processedPixelData=
D,g.resolve(this.processedPixelData)):(c.processedPixelBlock=D.pixelBlock,g.resolve(c))}):(r=this.layer.raster.rasterFunction.read(c),c.processedPixelBlock=r.pixelBlock,g.resolve(c))):w?g.resolve(z.src[this.identifiers[0]]):(c.pixelBlock=z.src[this.identifiers[0]]&&z.src[this.identifiers[0]].pixelBlock,g.resolve(c));return g.promise},_renderTile:function(c){var d=new b,g=this.layer._hasTilingEffects,t=this.layer.useWebGL,r=Math.abs((c.extent.xmax-c.extent.xmin)/c.width-this.layer.getCurrentResolution().x)>
this.resolution.x/10;r=this.layer.useWebGL&&(r||this._isTileOutSide(c,this.layer._map.extent));this.xformSetting.hasNewTexture=this.hasNewData;this.layer._rasterRenderer&&c&&(c.texture||c.src||c.pixelBlock||c.processedPixelBlock)?(this.layer._rasterRenderer.interpolation=this.layer.interpolation,t&&!r?(this.layer.raster.rasterFunction&&this.layer.raster.rasterFunction.renderTexture||this.layer._rasterRenderer.draw(c),d.resolve(c)):this.layer._rasterHandler?this.layer._rasterHandler.render({extent:c.extent,
pixelBlock:c.processedPixelBlock||c.pixelBlock}).then(function(w){g?(w.renderedPixelBlock=w.pixelBlock,d.resolve(w)):(c.renderedPixelBlock=w.pixelBlock,d.resolve(c))}.bind(this)):(c.renderedPixelBlock=this.layer._rasterRenderer.draw(c).pixelBlock,d.resolve(c))):(c.renderedPixelBlock=c.processedPixelBlock||c.pixelBlock,d.resolve(c));return d.promise},_sortTiles:function(){this.tiles.sort(function(c,d){return c.row<d.row||c.row==d.row&&c.col<d.col?-1:1})}})})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(F,l,b,q,n,p,m,a,e,k,h,f,c,d,g){var t=F([a],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(r,w){this._attrs={};r&&q.isString(r)?this._url=c.urlToObject(this.url=c.normalize(r)):(this.url=this._url=null,(w=w||r)&&(w.layerDefinition||w.query)&&(w=null));this.spatialReference=new d(4326);this.initialExtent=new g(-180,-90,180,90,new d(4326));this._map=this._div=
null;this.normalization=!0;w&&(w.id&&(this.id=w.id),this.arcgisProps=w.arcgisProps,this.parentLayer=w.parentLayer,!1===w.visible&&(this.visible=!1),k.isDefined(w.opacity)&&(this.opacity=w.opacity),k.isDefined(w.minScale)&&this.setMinScale(w.minScale),k.isDefined(w.maxScale)&&this.setMaxScale(w.maxScale),this.attributionDataUrl=w.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,k.isDefined(w.showAttribution)&&(this.showAttribution=w.showAttribution),this.className=w.className,
this.refreshInterval=w.refreshInterval||0);this._errorHandler=q.hitch(this,this._errorHandler);this._scheduledRefresh=q.hitch(this,this._scheduledRefresh);this.refresh=q.hitch(this,this.refresh);if(this.managedSuspension){var v=this._setMap;this._setMap=function(z){var C=v.apply(this,arguments);this._fireAttach(z);this.evaluateSuspension();if(this.suspended&&!z.loaded)var D=b.connect(z,"onLoad",this,function(){b.disconnect(D);D=null;this.evaluateSuspension()});return C}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(r){this.loaded||(this.loadError=r);this.onError(r)},_setMap:function(r,w,v,z){this._map=r;this._lyrZEHandle=b.connect(r,"onZoomEnd",this,this._processMapScale);if(r.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var C=b.connect(r,"onLoad",this,function(){b.disconnect(C);
C=null;this._processMapScale()})},_unsetMap:function(r,w){b.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(r)},_fireAttach:function(r){this.attached=!0;this.onAttach({map:r})},_fireDetach:function(r){this.attached=!1;this.onDetach({map:r})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(r,w){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(r,w),this._map&&this._map._decr())},_getToken:function(){var r=this._url,w=this.credential;return r&&r.query&&r.query.token||w&&w.token||void 0},_findCredential:function(){this.credential=e.id&&this._url&&e.id.findCredential(this._url.path)},_useSSL:function(){var r=this._url,w=/^http:/i;this.url&&(this.url=this.url.replace(w,"https:"));r&&r.path&&(r.path=r.path.replace(w,"https:"))},
refresh:function(r){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(r){this.setScaleRange(r)},setMaxScale:function(r){this.setScaleRange(null,r)},setScaleRange:function(r,w){var v=k.isDefined(r),z=k.isDefined(w);this.loaded||(this._hasMin=this._hasMin||v,this._hasMax=this._hasMax||z);var C=this.minScale,D=this.maxScale;this.minScale=(v?r:this.minScale)||0;this.maxScale=(z?w:this.maxScale)||0;if(C!==this.minScale||D!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var r=void 0===this._resumedOnce,w=this.className,v=this._attrs,z=this.getNode(),C;if(r){this._resumedOnce=!0;if(w&&z){var D=z.getAttribute("class")||"";(new RegExp("(^|\\s)"+w+"(\\s|$)","i")).test(D)||z.setAttribute("class",D+((D?" ":"")+w))}if(v&&z)for(C in v)v.hasOwnProperty(C)&&z.setAttribute(C,v[C])}this._refreshRT();this.onResume({firstOccurrence:r});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var r=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();r!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(r){return r?t.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(r,w){if(!(r||this._map&&this._map.loaded))return!1;var v=this._map;r=r||v.getScale();var z=this.minScale,C=this.maxScale,D=!z,y=!C,u;w&&(u=v.width>v.height?v.width:v.height);D||(r<=z?D=!0:w&&(D=Math.abs(z-r)/z<1/
u));y||(r>=C?y=!0:w&&(y=Math.abs(C-r)/C<1/u));return D&&y},getAttributionData:function(){var r=this.attributionDataUrl,w=new n(f._dfdCanceller);this.hasAttributionData&&r?(w._pendingDfd=h({url:r,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),w._pendingDfd.then(function(v){w.callback(v)},function(v){w.errback(v)})):(r=Error("Layer does not have attribution data"),r.log=!!l.isDebug,w.errback(r));return w},getResourceInfo:function(){var r=this.resourceInfo;return q.isString(r)?p.fromJson(r):
q.clone(r)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(r,w){var v=this.getNode();if("data-reference"===r&&11>m("ie"))return this;v&&(null==w?v.removeAttribute(r):v.setAttribute(r,w));this._attrs&&(null==w?delete this._attrs[r]:this._attrs[r]=w);return this},setRefreshInterval:function(r){var w=this.refreshInterval;this.refreshInterval=r;this._toggleRT(!1);r&&this._toggleRT(!0);if(w!==r)this.onRefreshIntervalChange();return this},_toggleRT:function(r){r&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(r){var w=
this._refreshTS;w&&(r=this._reCheckTS.test(r)?r.replace(this._reReplaceTS,"$$$1"+w):r+((-1===r.indexOf("?")?"?":"\x26")+"_ts\x3d"+w));return r},setNormalization:function(r){this.normalization=r},setVisibility:function(r){this.visible!==r&&(this.visible=r,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",r?null:"")},onLoad:function(){},onAttach:function(r){},onDetach:function(r){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});q.setObject("layers.Layer",t,e);return t})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"*now":function(F){F(['dojo/i18n!*preload*esri/layers/nls/RasterXLayer*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/RasterXLayer","dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Deferred dojo/sniff dojo/dom-construct dojo/dom-style dojo/on dojox/gfx/matrix dojo/when dojo/DeferredList ../kernel ../config ../lang ../domUtils ../urlUtils ../graphic ../request ../renderers/ClassBreaksRenderer ../renderers/StretchRenderer ../renderers/UniqueValueRenderer ../renderers/ColormapRenderer ../renderers/ShadedReliefRenderer ../geometry/Extent ../SpatialReference ../geometry/Point ./Field ./TimeInfo ./MosaicRule ./DimensionalDefinition ./PixelBlock ./ImageServiceLayerMixin ./rasterLib/function/StretchFunction ./rasterLib/raster/rasterFactory ./rasterLib/raster/rasterProjectionHelper ./rasterLib/renderer/rasterRendererHelper ./rasterLib/tile/RasterTileInfo ./rasterLib/tile/RasterTileManager ./rasterLib/tile/RasterHandler ./layer".split(" "),function(F,
l,b,q,n,p,m,a,e,k,h,f,c,d,g,t,r,w,v,z,C,D,y,u,B,x,A,E,J,O,S,X,Y,K,P,Q,ba,ca,ka,aa,ja){var oa=d.defaults.map.zoomDuration;F=F([ja],{declaredClass:"esri.layers.RasterXLayer",managedSuspension:!0,opacity:1,tileMode:!0,useWebGL:!0,drawMode:!0,_eventMap:{"raster-change":!0,"renderer-change":!0},_lastPopup:[],_rasterFieldPrefix:"Raster.",_cachedVariableStats:{},_cachedVariableHistogram:{},constructor:function(U,ea){ea=ea||{};this.tileMode=null!=ea.tileMode?ea.tileMode:this.tileMode;this.useWebGL=null!=
ea.useWebGL?ea.useWebGL:this.useWebGL;this.roaming=null!=ea.roaming?ea.roaming:this.roaming;this.drawMode=null!=ea.drawMode?ea.drawMode:this.drawMode;this.bandIds=ea.bandIds&&0<ea.bandIds.length?ea.bandIds:null;this.renderer=ea.renderer;this._customModules=ea.customModules;this.useMapTime=ea.useMapTime;if(ea.multidimensionalDefinition&&0<ea.multidimensionalDefinition.length){var fa=new O;fa.multidimensionalDefinition=ea.multidimensionalDefinition.map(function(pa){return pa.toJson?pa:new S(pa)});fa.method=
O.METHOD_NONE;this.mosaicRule=fa}this.infoTemplate=ea.infoTemplate;this.drawMode||(this._contextType=ea._contextType||ea.drawType);this._supportLegacyPropMethods=!1!==ea.legacySupport;this._rasterHandler=new aa({customModules:this._customModules});this._workInitPromise=this._rasterHandler.start();this.pixelData=null;this._initialize(U,ea);e(this,"load",l.hitch(this,function(){h(this._rasterHandler._connected||this._rasterHandler._connectionPromise,l.hitch(this,function(){this._rasterHandler.setLayer({layerId:this.id,
raster:{rasterInfo:this.raster.rasterInfo,rasterFunction:this.raster.rasterFunction&&this.raster.rasterFunction.toJson()},bandCount:this.raster.rasterInfo.bandCount});this.raster.rasterFunction&&this._rasterHandler.setRasterFunction({layerId:this.id,data:this.raster.rasterFunction.toJson(!0)});this._rasterRenderer&&this._rasterHandler.setRasterRenderer({layerId:this.id,data:this._rasterRenderer.toJson(!0)})}))}));this._animatePan2d=l.hitch(this,this._animatePan2d)},setOpacity:function(U){this.opacity!==
U&&(this.opacity=U,this.onOpacityChange(U))},onOpacityChange:function(){},onRendererChange:function(){},refresh:function(){if(this.loaded&&this._map)if(!this._canDraw()||10>p("ie"))this.onError(Error("Unable to refresh. This layer is not supported in the current browser."));else this._map&&this._extentChangeHandler(this._map.extent)},clear:function(U,ea,fa,pa){this._canDraw()&&(this.useWebGL||(fa?this._context.clearRect(U,ea,fa,pa):this._context.clearRect(0,0,this._map.width,this._map.height)))},
getContext:function(){return this._context},onResume:function(){this.inherited(arguments);this._toggleTime();t.show(this._div);if("css-transforms"===this._map.navigationMode){var U=this._map.__visibleDelta;this._left=this._tdx=U.x;this._top=this._tdy=U.y;a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top))}this._displayTimer=this._displayTimer||setTimeout(l.hitch(this,function(){this._extentChangeHandler(this._map.extent,null,!0)}),0)},onSuspend:function(){this.inherited(arguments);
this._fireUpdateEnd();this._toggleTime();t.hide(this._div);clearTimeout(this._displayTimer);this._displayTimer=null},redraw:function(){this.useWebGL&&this._glSetting&&(this._glSetting.hasNewTexture=!1);var U=this.tileMode?this.tileManager.originalPixelData:this.originalPixelData;if(this.tileMode?U&&(U.src||U.texture):U)if(this.tileMode)if(this.useWebGL)this._updateAllTilesOnce(U);else{this.tileManager.tiles.forEach(function(fa){fa&&(fa.update=null,fa.completed=!1,fa.processedPixelBlock=null,fa.renderedPixelBlock=
null)});U.processedPixelBlock=null;var ea=this.raster.rasterFunction?this.raster.rasterFunction.read(U):{extent:U.extent,pixelBlock:U.src[this.tileManager.identifiers[0]]&&U.src[this.tileManager.identifiers[0]].pixelBlock};U.renderedPixelBlock=null;U=this._rasterRenderer?this._rasterRenderer.draw(ea):ea;this._drawOneFrame(U)}else this._supportLegacyPropMethods&&this.pixelFilter?this._setPixelData(this.originalPixelData):(U.processedPixelBlock=null,ea=this.raster.rasterFunction?this.raster.rasterFunction.read(U):
{extent:U.extent,pixelBlock:U.src?U.src[this.tileManager.identifiers[0]]&&U.src[this.tileManager.identifiers[0]].pixelBlock:U.pixelBlock},U.renderedPixelBlock=null,U=this._rasterRenderer?this._rasterRenderer.draw(ea):ea,this._drawOneFrame(U))},getCurrentResolution:function(){var U=this._map.extent;return new A((U.xmax-U.xmin)/this._map.width,(U.ymax-U.ymin)/this._map.height,U.spatialReference)},getCustomRasterFields:function(U){var ea=U?U.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix,fa=
{name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString"};U=this.fields?l.clone(this.fields):[];U.push(fa);(fa=this.rasterAttributeTable&&this.rasterAttributeTable.fields)&&0<fa.length&&(fa=q.filter(fa,function(pa){return"esriFieldTypeOID"!==pa.type&&"value"!==pa.name.toLowerCase()}),fa=q.map(fa,function(pa){var ra=l.clone(pa);ra.name=ea+pa.name;return ra}),U=U.concat(fa));return U},
setRenderer:function(U,ea){if(this.loaded&&U){if(U.declaredClass&&-1<U.declaredClass.indexOf("esri.layers.rasterLib")){this._rasterRenderer=U;this._rasterRenderer.bind({layer:this});var fa=this.bandIds=U.bandIndex;this.raster&&this.raster.setFetchParameters({bandIds:fa});this._params&&(this._params.bandIds=fa&&0<fa.length?fa.join(","):null);this.renderer=this._getCommonRenderer(U)}else fa=l.clone(U.toJson?U.toJson():U),"rasterStretch"===fa.type&&(fa.bandIndex=this.bandIds,fa.bandIndex&&1<fa.bandIndex.length||
!fa.bandIndex&&this.raster&&1<this.raster.rasterInfo.bandCount)&&(fa.type="rgb"),this._rasterRenderer=ba.create(fa),this.renderer=U.declaredClass?U:this._getCommonRenderer(this._rasterRenderer),this._rasterRenderer.bind({layer:this});if(this._map){if(this.loaded&&this._rasterHandler._connected){var pa=this._rasterHandler.setRasterRenderer({layerId:this.id,data:this._rasterRenderer.toJson(!0)});this._updateTilingEffects()}ea||(pa?pa.then(l.hitch(this,function(){this.redraw()})):this.redraw());this.onRendererChange()}}},
setBandIds:function(U,ea){this.bandIds=U;this.raster&&this.raster.setFetchParameters({bandIds:U});this._params&&(this._params.bandIds=U&&0<U.length?U.join(","):null);this.setRenderer(this.renderer,ea)},_setTime:function(U){U=U?U.toJson():null;this._params&&(this._params.time=U);this.raster.setFetchParameters({time:U});this.tileManager&&this.tileManager.tiles&&this.tileManager.resetTiles()},setInfoTemplate:function(U){this.infoTemplate=U;this._updateInfoTemplateFields(this.fields)},setMultiDimensionalDefinition:function(U,
ea){var fa=U&&U.multidimensionalDefinition;if(fa&&this.loaded){var pa=fa&&fa[0].variableName;""===pa&&(pa=this._multidimensionalInfo.variables[0].name,fa.forEach(function(va){va.variableName=pa}));if("ImageService"===this.raster.sourceType){var ra=this.raster._getAllDimensionDefinition(fa,pa);ra.defChanged&&(U.multidimensionalDefinition=ra.definition,this.setMosaicRule(U,!0))}this.raster.setFetchParameters({multidimensionalDefinition:fa});this.tileManager&&this.tileManager.tiles&&this.tileManager.resetTiles();
pa&&this._updateRasterInfo(pa);ea||this.refresh()}},_updateRasterInfo:function(U){var ea=this.raster.rasterInfo,fa=this.getHistograms({variableName:U});U=this.getStatistics(U);(new f([fa,U])).then(l.hitch(this,function(pa){pa[0][0]&&(ea.histograms=pa[0][1].histograms);pa[1][0]&&(ea.statistics=pa[1][1]);this.refresh()}))},_updateInfoTemplateFields:function(U){if(U&&!(1>U.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var ea,
fa;var pa=this.infoTemplate.info.fieldInfos;for(ea=0;ea<U.length;ea++){var ra=U[ea];for(fa=0;fa<pa.length;fa++)if(pa[fa].fieldName.toLowerCase()===ra.name.toLowerCase()&&pa[fa].fieldName!==ra.name){pa[fa].fieldName=ra.name;break}}}},getPixelData:function(U){return this.tileMode?U?this.tileManager&&this.tileManager.originalPixelData&&this.tileManager.originalPixelData.src&&this.tileManager.originalPixelData.src[this.tileManager.identifiers[0]]:null:this.inherited(arguments)},fetchPopupFromTiles:function(U){var ea=
new n;this.identify(U.geometry).then(function(fa){var pa=fa.pixelValue;this.hasStdTime()&&pa&&pa.length&&null!=pa[0]&&(pa=pa.map(function(Fa){return this.getStdTimeValue(Fa)}.bind(this)).join(", "));if(pa){fa={ObjectId:0,"Raster.ServicePixelValue":pa};var ra=this.rasterAttributeTable&&this.rasterAttributeTable.features;if(ra&&0<ra.length&&(ra=q.filter(ra,function(Fa){if(Fa&&Fa.attributes)return Fa.attributes.hasOwnProperty("Value")?Fa.attributes.Value==pa:Fa.attributes.VALUE==pa}),0<ra.length&&(ra=
l.clone(ra[0]))))for(var va in ra.attributes)ra.attributes.hasOwnProperty(va)&&(fa[this._rasterFieldPrefix+va]=ra.attributes[va]);va=new w(new B(this.projectedFullExtent||this.fullExtent),null,fa);va.setInfoTemplate(this.infoTemplate);va._layer=this;this._lastPopup=[va];ea.resolve([va])}else this._lastPopup=[],ea.resolve()}.bind(this),function(fa){this._lastPopup=[];ea.resolve(fa)});return ea},getPopupFromTiles:function(){return this._lastPopup},identify:function(U,ea){if(!this.raster){var fa=new n;
fa.reject("layer must be initialized to identify");return fa.promise}return this.raster.identify(U)},_getCommonRenderer:function(U){switch(U.rendererName){case "RGB":case "Stretch":return new C(U.toCommonRendererJson());case "UniqueValue":return new D(U.toCommonRendererJson());case "ClassBreaks":return new z(U.toCommonRendererJson());case "Colormap":return new y(U.toCommonRendererJson());case "ShadedRelief":return new u(U.toCommonRendererJson())}},_getProjectedFullExtent:function(U){return this.raster.getProjectedFullExtent(U).then(l.hitch(this,
function(ea){this.projectedFullExtent=ea}))},_initialize:function(U,ea){ea=ea||{};this._supportLegacyPropMethods&&this.constructor._onMap&&(this.constructor._onMap["rendering-change"]={method:"onRenderingChange"},this.constructor._onMap["mosaic-rule-change"]={method:"onMosaicRuleChange"},this.constructor._onMap["spatial-reference-change"]={method:"onSpatialReferenceChange"});this.raster={};var fa=ea.raster?ea.raster.url:U;fa&&-1<fa.toLowerCase().indexOf("/imageserver")&&this._supportLegacyPropMethods&&
this._addLegacySupport(fa,ea);var pa=l.hitch(this,function(){this.loaded=!0;this.mosaicRule&&this.mosaicRule.multidimensionalDefinition&&0<this.mosaicRule.multidimensionalDefinition.length&&this.setMultiDimensionalDefinition(this.mosaicRule,!0);this.raster._setRasterHandler(this._rasterHandler);this.onLoad(this);var ra=this._loadCallback;ra&&(delete this._loadCallback,ra(this))});(U?P.create(l.mixin({url:U},ea)):ea.raster&&ea.raster.open()).then(l.hitch(this,function(ra){if(ra){this.raster=ra;var va=
this._getSourceImageServiceRaster();this.url||(this.url=va&&va.url);this.url&&(this._url=r.urlToObject(U));var Fa=ea.minScale,Ha=ea.maxScale,Ca=ra.tileInfo&&"Raster"===ra.tileInfo.tileType;null==Ha&&(Ha=Ca&&ea.zoomFactor?ra.tileInfo.lods[ra.tileInfo.lods.length-1].scale/ea.zoomFactor:this.maxScale);null==Fa&&(Fa=Ca&&ea.zoomFactor?ra.tileInfo.lods[0].scale*ea.zoomFactor:this.minScale);va&&"ImageService"===va.sourceType&&this._supportLegacyPropMethods&&this._addGeneralProperties(U,ea);this.initialExtent=
this.fullExtent=this.extent=this.raster.rasterInfo.extent;this.spatialReference=this.extent.spatialReference;this.timeInfo=this.raster.rasterInfo.timeInfo?new J(this.raster.rasterInfo.timeInfo):null;this.rasterAttributeTable=this.raster.rasterInfo.vat;this._multidimensionalInfo=this.raster.rasterInfo.multidimensionalInfo;this.rasterAttributeTable&&(this._rasterAttributeTableFields=this.rasterAttributeTable.fields);this.mosaicRule&&this.raster.setFetchParameters({multidimensionalDefinition:this.mosaicRule.multidimensionalDefinition});
this._multidimensionalInfo&&(this._getDefaultMultidimensionalDefinition(this._multidimensionalInfo,!0,!0),this.mosaicRule||(this.mosaicRule=this.defaultMosaicRule,this.raster.setFetchParameters({multidimensionalDefinition:this._defaultMultidimensionalDefinition})),this.raster.defaultMultidimensionalDefinition=this._defaultMultidimensionalDefinition);null==Fa||this._hasMin||this.setMinScale(Fa);null==Ha||this._hasMax||this.setMaxScale(Ha);this._workInitPromise?this._workInitPromise.then(pa,pa):pa()}}),
this._errorHandler)},_getSourceImageServiceRaster:function(){var U=this.raster&&"Function"===this.raster.sourceType?1===this.raster.getMemberRasters().length?this.raster.getMemberRasters()[0]:null:this.raster;if(U&&"ImageService"===U.sourceType)return U},_addLegacySupport:function(U,ea){this._url=r.urlToObject(U);ea=ea||{};var fa=ea.imageServiceParameters;this.format=fa&&fa.format;this.compressionTolerance=fa&&fa.compressionTolerance?fa.compressionTolerance:.01;this.interpolation=fa?fa.interpolation:
null;this.compressionQuality=fa?fa.compressionQuality:null;this.bandIds=fa&&fa.bandIds||ea&&ea.bandIds||null;this.mosaicRule||(this.mosaicRule=fa?fa.mosaicRule:null);this.renderingRule||(this.renderingRule=fa?fa.renderingRule:null);this.useMapDimensionValue=ea.hasOwnProperty("useMapDimensionValue")?!!ea.useMapDimensionValue:!0;this.hasImageFilter=ea.hasImageFilter;this.activeMapDimensions=ea.activeMapDimensions;this._params=l.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,
compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},fa?fa.toJson():{});this.pixelFilter=ea.pixelFilter;this.originalPixelData=this.pixelData=null;this._queryVisibleRastersHandler=l.hitch(this,this._queryVisibleRastersHandler);this._useRenderingRuleAttributeTable=!1;this._rasterFunctionTemplateInfos={};this._customRenderingRuleId={};this._setDefaultFilter=function(){};var pa={setInterpolation:"interpolation",setCompressionQuality:"compressionQuality",setCompressionTolerance:"compressionTolerance",
setBandIds:"bandIds",setDefaultBandIds:"bandIds",setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setImageFormat:"format"},ra,va=new Y;Object.keys(pa).forEach(l.hitch(this,function(Fa){this[Fa]=l.hitch(this,function(Ha,Ca){ra={};ra[pa[Fa]]=Ha;this.raster&&(this.raster.setFetchParameters(ra),va[Fa].bind(this)(Ha,Ca))})}));this.setDisableClientCaching=function(Fa){va.setDisableClientCaching.bind(this)(Fa);var Ha=this._getSourceImageServiceRaster();Ha?Ha.disableClientCaching=Fa:null}.bind(this);
this.setDefinitionExpression=va.setDefinitionExpression.bind(this);this.setUseMapTime=va.setUseMapTime.bind(this);this._toggleTime=va._toggleTime.bind(this);this._onTimeExtentChangeHandler=va._onTimeExtentChangeHandler.bind(this);this.setPixelFilter=va.setPixelFilter.bind(this);this.getHistograms=va.getHistograms.bind(this);this.getRasterFunctionInfos=va.getRasterFunctionInfos.bind(this);this.getKeyProperties=va.getKeyProperties.bind(this);this.getRasterAttributeTable=va.getRasterAttributeTable.bind(this);
this.getRenderingRuleServiceInfo=va.getRenderingRuleServiceInfo.bind(this);this._getRenderingRuleId=va._getRenderingRuleId.bind(this);this._isRenderingRuleAProcessingTemplate=va._isRenderingRuleAProcessingTemplate.bind(this);this.handleSpatialReferenceChange=va.handleSpatialReferenceChange.bind(this);this.onRenderingChange=this.onRenderingChange||function(){};this.onSpatialReferenceChange=this.onSpatialReferenceChange||function(){};this.onMosaicRuleChange=this.onMosaicRuleChange||function(Fa){};this.setRasterRenderer=
this.setRenderer;this.getMultidimensionalInfo=va.getMultidimensionalInfo.bind(this);this.getColormap=va.getColormap.bind(this);this.getRenderingRuleColormap=va.getRenderingRuleColormap.bind(this);this.getDefaultMultidimensionalDefinition=va.getDefaultMultidimensionalDefinition.bind(this);this._getDefaultMultidimensionalDefinition=va._getDefaultMultidimensionalDefinition.bind(this);this._getDefaultDimensionValue=va._getDefaultDimensionValue.bind(this);this.getStatistics=va.getStatistics.bind(this)},
_addGeneralProperties:function(){var U=this._getSourceImageServiceRaster();if(U){var ea=["minScale","maxScale","tileInfo"];Object.keys(U.serviceInfo).forEach(function(ra){null==this[ra]&&-1===ea.indexOf(ra)&&(this[ra]=U.serviceInfo[ra])}.bind(this));this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);this.bands=U.rasterInfo.statistics;var fa,pa=[];this.fields=this.fields||[];for(fa=0;fa<this.fields.length;fa++)pa.push(new E(this.fields[fa]));this.fields=pa;this.version=
this.currentVersion;this.defaultMosaicRule=U.serviceInfo.defaultMosaicRule}},setDefaultRenderer:function(){if(this.loaded&&this._canvas&&!this.pixelFilter){var U=ba.createDefaultRenderer(this);if(null!=U){var ea=this.mosaicRule&&this.mosaicRule.multidimensionalDefinition&&0<this.mosaicRule.multidimensionalDefinition.length;if(this._multidimensionalInfo&&ea&&"Stretch"===U.rendererName){var fa=this.mosaicRule.multidimensionalDefinition[0].variableName;(ea=this._multidimensionalInfo.variables.filter(function(pa){return pa.name===
fa})[0])&&ea.histograms&&ea.histograms.length&&(U.histograms=ea.histograms,6===U.stretchType&&(U.dra=!1));ea&&ea.statistics&&ea.statistics.length&&(U.statistics=ea.statistics.map(function(pa){return[pa.min,pa.max,pa.mean,pa.stddev||pa.standardDeviation]}),6!==U.stretchType&&(U.dra=!1))}this.setRenderer(U,!0)}}},setDefaultInterpolation:function(){if(this.loaded&&this._canvas){var U=this.raster.serviceInfo&&this.raster.serviceInfo.defaultResamplingMethod;if(U)switch(U.toLowerCase()){case "bilinear":this.interpolation=
"RSP_BilinearInterpolation";break;case "cubic":this.interpolation="RSP_CubicConvolution";break;case "majority":this.interpolation="RSP_Majority";break;case "nearest":this.interpolation="RSP_NearestNeighbor"}else{U=this.raster.dataType&&this.raster.dataType.toLowerCase();var ea=!!this.raster.rasterInfo.colormap;this.raster.rasterInfo.vat||ea||"thematic"===U||"StdTime"===U?"RSP_NearestNeighbor":"RSP_BilinearInterpolation"}}},_toggleTime:function(){},_updateTilingEffects:function(){(this._hasTilingEffects=
this._rasterRenderer&&this._rasterRenderer.hasTilingEffects()||this.raster&&this.raster.rasterFunction&&this.raster.rasterFunction.hasTilingEffects())&&this._map&&this.tileMode&&this.useWebGL&&this.tileManager&&(this._hasTilingEffects=!1)},_setMap:function(U,ea){this.inherited(arguments);U.spatialReference&&(U.spatialReference.ics||U.spatialReference.icsId)&&(this.roaming=this.useWebGL=this.tileMode=!1);if(this.tileMode){this.virtualTileInfo=new ca(null,{refTileInfo:U.tileInfo,spatialReference:U.spatialReference,
extent:this.raster.rasterInfo.extent});var fa=this.raster.tileInfo&&(-1<["Elevation","Raster"].indexOf(this.raster.tileInfo.tileType)||3===this.raster.rasterInfo.bandCount&&"U8"===this.raster.rasterInfo.pixelType)?this.raster.tileInfo:this.virtualTileInfo;this._tileParams=this._tileParams||{};this._tileParams.size=fa.cols+","+fa.rows;this.tileManager=new ka({tileInfo:fa,layer:this,mapSR:U.spatialReference})}this._dragOrigin={x:0,y:0};fa=this._div=m.create("div",null,ea);var pa={width:U.width+"px",
height:U.height+"px",position:"absolute"};"css-transforms"===U.navigationMode?this.roaming&&this.tileMode&&this.useWebGL||(pa[c._css.names.transform]=c._css.translate(U.__visibleDelta.x,U.__visibleDelta.y),this._left=U.__visibleDelta.x,this._top=U.__visibleDelta.y):this._left=this._top=0;a.set(fa,pa);this._canvas=m.create("canvas",{width:U.width+"px",height:U.height+"px",style:"position: absolute;"},fa);g.isDefined(this.opacity)&&a.set(fa,"opacity",this.opacity);this._contextType?(this._context=this._canvas.getContext(this._contextType,
null),this.useWebGL=this._context instanceof WebGLRenderingContext):this.useWebGL?(this._context=this._canvas.getContext("webgl",null)||this._canvas.getContext("experimental-webgl",null),this.drawMode=!1):(this._context=this._canvas.getContext("2d"),this.drawMode=!0);this.useWebGL&&(U.acquireWebGLContext(this),this._glSetting={gl:this._context,branchCount:this.raster.rasterFunction?this.raster.rasterFunction.branchCount:0,pingpong:null,branches:null,drawMesh:this._drawMesh,programUniforms:{}});this.raster.rasterFunction&&
(this._updateTilingEffects(),this.raster.setProcessingContext({layer:this}));this.setRenderer(this.renderer,!0);this._rasterRenderer||this.setDefaultRenderer();this.interpolation||this.setDefaultInterpolation();this._mapWidth=U.width;this._mapHeight=U.height;this._connects=[];this._connects.push(b.connect(U,"onPan",this,this._panHandler));this._connects.push(b.connect(U,"onPanEnd",this,this._panEndHandler));"css-transforms"===U.navigationMode?this._connects.push(b.connect(U,"onScale",this,this._onScaleHandler)):
(this._connects.push(b.connect(U,"onZoom",this,this._onZoomHandler)),this._connects.push(b.connect(U,"onZoomEnd",this,this._onZoomEndHandler)));this._connects.push(b.connect(U,"onResize",this,this._onResizeHandler));this._connects.push(b.connect(U,"onExtentChange",this,this._extentChangeHandler));this._connects.push(b.connect(this,"onVisibilityChange",this,this._visibilityChangeHandler));this._connects.push(b.connect(this,"onOpacityChange",this,this._opacityChangeHandler));this._startRect={left:0,
top:0,width:U.width,height:U.height};this.evaluateSuspension();if(this.suspended&&!U.loaded)var ra=b.connect(U,"onLoad",this,function(){b.disconnect(ra);ra=null;this.evaluateSuspension()});return fa},_unsetMap:function(U,ea){this.useWebGL&&U.releaseWebGLContext(this);q.forEach(this._connects,b.disconnect,this);var fa=this._div;fa&&(ea.removeChild(fa),m.destroy(fa));this._map=this._canvas=this._context=this.data=this._connects=null;clearTimeout(this._displayTimer);this._displayTimer=null;this.inherited(arguments)},
_canDraw:function(){return!!(this._map&&this._canvas&&this._context)},_requestDataErrorHandler:function(U){"CancelError"!==U.name&&(this.clear(),this.onError(U))},_clonePixelData:function(U){if(null===U||U.texture)return U;var ea={};U.extent&&(ea.extent=l.clone(U.extent));var fa=U.pixelBlock;null!=fa&&(ea.pixelBlock=fa.clone());ea.texture=U.texture;return ea},_setPixelData:function(U){if(U){U=this._clonePixelData(U);this.pixelFilter&&(this.pixelFilter.filter?(this.pixelFilter.renderTexture=!0,this.pixelFilter.filter(U)):
this.pixelFilter(U));this.pixelData=U;if(this._rasterReadPromise&&this._rasterReadPromise.isCanceled())return;this._drawPixelData()}this._rasterReadPromise=null},_requestData:function(U,ea,fa){this._rasterReadPromise&&this._rasterReadPromise.cancel();U=l.clone(U)._normalize(!0);this._rasterReadPromise=this.raster.read({extent:U,width:this._map.width,height:this._map.height});this._rasterReadPromise.then(l.hitch(this,function(pa){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this.originalPixelData=
pa&&pa.srcData?{extent:pa.extent,src:pa.srcData}:pa,this.useWebGL&&this._glSetting&&(this._glSetting.hasNewTexture=!0),this._setPixelData(pa))}),l.hitch(this,this._requestDataErrorHandler));return this._rasterReadPromise},_drawPixelData:function(U){a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"});this._startRect={left:0,top:0,width:this._map.width,height:this._map.height};this.drawMode||"css-transforms"!==this._map.navigationMode||(this._tdx=this._left,
this._tdy=this._top,this._multiply=null,a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top)),a.set(this._canvas,c._css.names.transform,c._css.translate(-this._left,-this._top)),this._dragOrigin={x:0,y:0});this.useWebGL&&this._rasterRenderer&&this._rasterRenderer.draw(this.pixelData);if(this._canDraw()&&this.drawMode&&this.drawMode&&(U=U||this.pixelData)&&U.pixelBlock){var ea=this.pixelFilter?this.pixelData:this._rasterRenderer?this._rasterRenderer.draw(U):U;U=ea.pixelBlock;
var fa=this._context,pa=fa.createImageData(U.width,U.height);pa.data.set(U.getAsRGBA());ea=ea.extent;var ra=this._map.extent,va=this.getCurrentResolution(),Fa=0,Ha=0;Math.abs(ea.xmin-ra.xmin)>va.x&&(Fa=Math.round((ea.xmin-ra.xmin)/va.x));Math.abs(ra.ymax-ea.ymax)>va.y&&(Ha=Math.round((ra.ymax-ea.ymax)/va.y));"css-transforms"===this._map.navigationMode?(this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top)),a.set(this._canvas,
c._css.names.transform,c._css.translate(-this._left,-this._top))):(a.set(this._div,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}),a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}));this._dragOrigin={x:0,y:0};this.tileMode?this.clear(Fa,Ha,U.width,U.height):this.clear();fa.putImageData(pa,Fa,Ha,0,0,U.width,U.height);this._fireUpdateEnd()}},hasStdTime:function(){if(!this.hasMultidimensions||"StdTime"!==this.raster.dataType)return!1;
var U=this.mosaicRule&&this.mosaicRule.multidimensionalDefinition,ea=U&&U.length?U[0].variableName:this._defaultMultidimensionalDefinition[0].variableName;return this.raster.rasterInfo.multidimensionalInfo.variables.some(function(fa){if(fa.name===ea)return fa.dimensions.some(function(pa){return"StdTime"===pa.name})})},getStdTimeValue:function(U){return(new Date(864E5*(U-25569))).toString()},computeHistograms:function(U){U=new n;var ea=this.getPixelData(!0);if(ea&&ea.pixelBlock&&ea.pixelBlock.pixels&&
((new K({}))._calculateStatisticsHistograms(ea),ea.pixelBlock.histograms))return U.resolve({histograms:ea.pixelBlock.histograms}),U;U.reject();return U},_animatePan2d:function(){this._oldDelta&&this._delta.x===this._oldDelta.x&&this._delta.y===this._oldDelta.y||(this.tileManager.updateTile(this.tileManager.originalPixelData,!0),this._oldDelta={x:this._delta.x,y:this._delta.y});this._roamingAnimation&&this.tileMode&&this.useWebGL&&(this._roamingAnimation=requestAnimationFrame(this._animatePan2d))},
_cancelAnimation:function(){this._animation&&(cancelAnimationFrame(this._animation),this._animation=null)},_updateAllTilesOnce:function(U,ea){return this.tileManager.updateTile(U,!0).then(l.hitch(this,function(fa){(this._hasTilingEffects||this.useWebGL||ea)&&this._drawOneFrame(fa)}))},_drawOneFrame:function(U,ea){if(!(this.suspended||!this._map||this.tileMode&&!this._drawTile||(this.tileMode&&this.useWebGL&&this.tileManager.originalPixelData.isEmpty&&this._context.clear(this._context.COLOR_BUFFER_BIT),
this.tileMode&&this.useWebGL&&this.tileManager.xformSetting&&this.tileManager.xformSetting.requireProjection&&!this.tileManager.xformSetting.gridConfig))){if(!this._resetCss||this._levelChange)this._levelChange=!1,this._resetDrawing();if(U&&(U.renderedPixelBlock||U.pixelBlock)&&this._canDraw()&&this.drawMode){var fa=U.extent,pa=this._map.extent;if(!this._isExtentOutSide(fa,pa)){var ra=U.pixelBlock||U.renderedPixelBlock,va=this._context,Fa=va.createImageData(ra.width,ra.height);Fa.data.set((U.renderedPixelBlock||
U.pixelBlock).getAsRGBA());var Ha=this.getCurrentResolution(),Ca=0,T=0;Math.abs(fa.xmin-pa.xmin)>Ha.x&&(Ca=Math.round((fa.xmin-pa.xmin)/Ha.x));Math.abs(pa.ymax-fa.ymax)>Ha.y&&(T=Math.round((pa.ymax-fa.ymax)/Ha.y));va.putImageData(Fa,Ca,T,0,0,ra.width,ra.height)}}else this._fireUpdateEnd()}},_isExtentOutSide:function(U,ea){return U.xmax<=ea.xmin||U.xmin>=ea.xmax||U.ymax<=ea.ymin||U.ymin>=ea.ymax},_resetDrawing:function(){this._resetCss=!0;if(!this.useWebGL)if(this._multiply||this._startRect.width!==
this._map.width||this._startRect.height!==this._map.height)this.clear();else{var U=this._context.getImageData(0,0,this._map.width,this._map.height);this.clear();this._context.putImageData(U,this._startRect.left,this._startRect.top)}this._dragOrigin={x:0,y:0};this._startRect={left:0,top:0,width:this._map.width,height:this._map.height};a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"});"css-transforms"===this._map.navigationMode?(this.roaming&&this.tileMode&&
this.useWebGL&&(this._delta=null),this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top)),a.set(this._canvas,c._css.names.transform,c._css.translate(-this._left,-this._top))):(a.set(this._div,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}),a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}))},_drawAllFrames:function(){if(!this.suspended&&
this._map&&(!this.tileMode||this._drawTile))if(this._resetCss){var U=this._frames,ea=0,fa;for(fa=0;fa<U.length;fa++)if(U[fa].completed)ea++;else if(U[fa].tileData.renderedPixelBlock){U[fa].completed=!0;var pa=U[fa].tileData;break}else if(U[fa].tileData._fetched&&!U[fa].tileData.src){U[fa].completed=!0;break}else if(U[fa].tileData.update&&U[fa].tileData.update.isFulfilled()&&!U[fa].tileData.renderedPixelBlock){U[fa].completed=!0;break}else U[fa].tileData.fetch&&(!0===U[fa].tileData.fetch||U[fa].tileData.fetch.isCanceled()||
U[fa].tileData.fetch.isRejected())?(U[fa].completed=!0,ea++):this._isExtentOutSide(U[fa].tileData.extent,this._map.extent)&&(U[fa].completed=!0,ea++);if(pa){ea++;var ra=pa.extent,va=this._map.extent,Fa=this.getCurrentResolution(),Ha=fa=0;Math.abs(ra.xmin-va.xmin)>Fa.x&&(fa=Math.round((ra.xmin-va.xmin)/Fa.x));Math.abs(va.ymax-ra.ymax)>Fa.y&&(Ha=Math.round((va.ymax-ra.ymax)/Fa.y));pa.renderedPixelBlock?(ra=pa.renderedPixelBlock,va=this._context.createImageData(ra.width,ra.height),va.data.set(pa.renderedPixelBlock.getAsRGBA()),
this._context.putImageData(va,fa,Ha,0,0,ra.width,ra.height)):this.clear(fa,Ha,pa.width,pa.height)}ea===U.length?(this._animation=null,this._fireUpdateEnd()):this._animation=requestAnimationFrame(l.hitch(this,this._drawAllFrames))}else this._resetDrawing(),this._animation=requestAnimationFrame(l.hitch(this,this._drawAllFrames))},_fetchTiles:function(U,ea){if(!this.suspended&&this.loaded){this._cancelAnimation();var fa=this.tileManager,pa=!(fa.xformSetting.requireProjection&&fa.xformSetting.requirePE)||
Q.load();h(pa,l.hitch(this,function(){fa.updateExtent(U,this.getCurrentResolution());this._resetCss=!1;fa.fetchTiles(ea);ea&&(this._hasTilingEffects||this.useWebGL?this.useWebGL&&0<fa.tiles.length?(fa.fillupTiles(),fa._validateRawPixelBlocks(fa.originalPixelData)?this._updateAllTilesOnce(fa.originalPixelData):fa.originalPixelData&&fa.originalPixelData.src&&fa.tiles.some(function(ra){return ra.updateCompleted})&&this._context.clear(this._context.COLOR_BUFFER_BIT),fa.tiles.forEach(l.hitch(this,function(ra){ra.update&&
!ra.updateCompleted&&ra.update.then(function(va){ra.updateCompleted||(ra.updateCompleted=!0);(this._hasTilingEffects||this.useWebGL)&&this._drawOneFrame(va)}.bind(this))}))):this._hasTilingEffects&&h(fa.fetchAllCompleted.isResolved()||fa.fetchAllCompleted,l.hitch(this,function(){this._updateAllTilesOnce(fa.originalPixelData)})):(this._frames=fa.tiles.map(function(ra){return{completed:!1,tileData:ra}}),this._drawAllFrames()))}))}},_redrawTiles:function(){this._fetchTiles(this._map.extent,!0)},_panHandler:function(U,
ea){this._drawTile=!1;"css-transforms"===this._map.navigationMode?this.roaming&&this.tileMode&&this.useWebGL?(this._delta=ea,!this._roamingAnimation&&this.tileMode&&(this._roamingAnimation=requestAnimationFrame(this._animatePan2d))):(this._left=this._map.__visibleDelta.x+ea.x,this._top=this._map.__visibleDelta.y+ea.y,a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top))):a.set(this._div,{left:this._startRect.left+ea.x+"px",top:this._startRect.top+ea.y+"px"});this.tileMode&&
this._fetchTiles(U)},_panEndHandler:function(U,ea){ea&&(this._startRect.left+=ea.x,this._startRect.top+=ea.y);this.oldData=null;this._roamingAnimation&&(cancelAnimationFrame(this._roamingAnimation),this._oldDelta=this._roamingAnimation=null)},_onScaleHandler:function(U,ea){var fa={},pa=c._css.names;a.set(this._canvas,pa.transition,ea?"none":pa.transformName+" "+oa+"ms ease");this._matrix=U;U=this._multiply?k.multiply(U,this._multiply):U;if(this._tdx||this._tdy)U=k.multiply(U,{xx:1,xy:0,yx:0,yy:1,
dx:-this._tdx,dy:-this._tdy});fa[pa.transform]=c._css.matrix(U);a.set(this._canvas,fa)},_onZoomHandler:function(U,ea,fa){var pa=this._startRect;U=pa.width*ea;ea*=pa.height;var ra=pa.left-(U-pa.width)*(fa.x-pa.left)/pa.width;fa=pa.top-(ea-pa.height)*(fa.y-pa.top)/pa.height;a.set(this._canvas,{left:ra+"px",top:fa+"px",width:U+"px",height:ea+"px"});this._endRect={left:ra,top:fa,width:U,height:ea}},_onZoomEndHandler:function(){this._endRect&&(this._startRect=this._endRect)},_onResizeHandler:function(U,
ea,fa){a.set(this._div,{width:ea+"px",height:fa+"px"});a.set(this._canvas,{width:ea+"px",height:fa+"px"});this._startRect.width=this._canvas.width=ea;this._startRect.height=this._canvas.height=fa;this.useWebGL&&this._glSetting&&(this._glSetting.pingpong=null,this._glSetting.branches=null)},_extentChangeHandler:function(U,ea,fa,pa){if(this.loaded&&!this.suspended&&(!ea||0!==ea.x||0!==ea.y||fa)){this._drawTile=!0;"css-transforms"===this._map.navigationMode&&(ea&&(this._dragOrigin.x+=ea.x,this._dragOrigin.y+=
ea.y),this._left=this._map.__visibleDelta.x,this._top=this._map.__visibleDelta.y,this.roaming&&this.tileMode&&this.useWebGL||fa||a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top)),fa&&(a.set(this._canvas,c._css.names.transition,"none"),this._multiply=this._multiply?k.multiply(this._matrix,this._multiply):this._matrix,this._levelChange=!0));this._fireUpdateStart();var ra=this._map;ea=this.raster.rasterFunction?this.raster.getMemberRasters().map(function(Fa){return Fa._rasterId}):
[this.raster._rasterId];var va={};this.tileMode?((this.roaming||this.useWebGL)&&this.tileMode||(ea.forEach(function(Fa,Ha){va[Fa]={extent:ra.extent,pixelBlock:new X({width:ra.width,height:ra.height,pixels:[],pixelType:"",mask:null,statistics:[]})}}),this.tileManager.originalPixelData={extent:ra.extent,src:va}),this.projectedFullExtent?this._fetchTiles(U,!0):this._getProjectedFullExtent(ra.spatialReference).then(l.hitch(this,function(){this._fetchTiles(U,!0)}))):this._requestData(ra.extent,ra.width,
ra.height)}},_visibilityChangeHandler:function(U){U?t.show(this._div):t.hide(this._div)},_opacityChangeHandler:function(U){a.set(this._div,"opacity",U)}});l.setObject("layers.RasterXLayer",F,c);return F});