(function(){window.app=angular.module("opsporing",["ngRoute","ngResource","angularLocalStorage","angulartics","angulartics.google.analytics"])}).call(this),function(){angular.module("opsporing").factory("config",["storage",function(e){return{api:"https://api.crimediggers.nl",cdn:"https://cdn.crimediggers.nl",access_key:e.get("access_key"),session_key:""}}])}.call(this),function(){var e;e=function(){function e(e,t,n,o,i,r){this.$rootScope=e,this.$scope=t,this.console=n,this.storage=o,this.$location=i,this.experienceService=r,this.console.log("CaseController:constructor"),this.$scope.player={role:null},this.storage.get("access_key")&&this.$location.path("start"),this.$scope.cases=[],this.experienceService.fetch(function(e){return function(t){return e.experiences=t,e.$scope.cases=e.experience}}(this))}return e.prototype.set_kind=function(e){var t,n,o,i,r;for(this.console.log("CaseController:set_kind"),this.$scope.player.role=e,this.$scope.cases=[],i=this.experiences,r=[],n=0,o=i.length;o>n;n++)t=i[n],"both"===t.kind&&this.$scope.cases.push(t),r.push(t.kind===e?this.$scope.cases.push(t):void 0);return r},e.prototype.get_experience=function(){return console.log("get_experience"),this.$rootScop.experience},e}(),angular.module("opsporing").controller("CaseController",["$rootScope","$scope","console","storage","$location","experienceService",e])}.call(this),function(){var e;e=function(){function e(e,t,n,o){this.$rootScope=e,this.$scope=t,this.experienceService=n,this.console=o,this.console.log("EpilogueController:constructor"),this.$scope.epilogue=[],this.fetch_epiloque_information()}return e.prototype.fetch_epiloque_information=function(){return this.experienceService.epilogue(function(e){return function(t){return e.$scope.epilogue=t,e.console.log("EpilogueController:loadEpilogue:done")}}(this))},e}(),angular.module("opsporing").controller("EpilogueController",["$rootScope","$scope","experienceService","console",e])}.call(this),function(){var e;e=function(){function e(e,t,n,o,i,r,s,c,a,l){this.$sce=e,this.$rootScope=t,this.$scope=n,this.$route=o,this.storage=i,this.experienceService=r,this.playerService=s,this.config=c,this.console=a,this.$location=l,this.console.log("ExperienceController:constructor"),null!=window.is&&(window.is.mobile()||window.is.tablet())&&(window.location="/"),this.$scope.experience={},this.$scope.scene={},this.$scope.video_status={video_sync_done:!1,skip_video_preload:!1,preload:!1},this.$scope.cdn_server=this.config.cdn,Modernizr.video||(this.$scope.video_status.video_sync_done=!0,this.$scope.video_status.skip_video_preload=!0),this.experienceService.fetch(function(e){return function(t){return e.$scope.experience=t}}(this)),this.$scope.player=null,this.hide_menu_and_profile(),this.$rootScope.$on("$routeChangeStart",function(e){return function(t,n){var o;return"inventory"===(o=n.name)||"question"===o||"scene"===o||"start_experience"===o||"extra_question"===o||"finished_experience_epiloog"===o||"finished_experience_results"===o?e.check_if_allowed(n.name):void 0}}(this)),this.$rootScope.$on("$routeChangeSuccess",function(e){return function(){return e.$scope.name=e.$route.current.name,e.console.log(e.$scope.name),e.$scope.scene.id=e.$route.current.params.scene,"debrief"!==e.$route.current.name&&(e.$scope.scene.id?e.$scope.video_status.template="/partials/videos/scene_"+e.$scope.scene.id+".html":(e.$scope.video_status.video_sync_done=!0,e.$scope.video_status.skip_video_preload=!0,e.$scope.video_status.template="/partials/videos/intro.html")),"choice_kind_of_experience"===e.$route.current.name&&e.storage.get("access_key")&&e.$location.path("start"),"login_into_experience"===e.$route.current.name?e.login_player():void 0}}(this)),this.$rootScope.$on("reload_player",function(e){return function(){return e.load_player()}}(this))}return e.prototype.show_menu_and_profile=function(){return this.$rootScope.show_menu_and_profile=!0},e.prototype.hide_menu_and_profile=function(){return this.$rootScope.show_menu_and_profile=!1},e.prototype.check_if_allowed=function(e){return this.console.log("ExperienceController::function:"+e),this.$scope.name=e,"finished_experience_epiloog"===this.$scope.name||"finished_experience_results"===this.$scope.name?this.hide_menu_and_profile():this.show_menu_and_profile(),this.storage.get("access_key")?(this.config.access_key=this.storage.get("access_key"),this.$scope.player?this.$scope.player.experience_done&&"finished_experience_epiloog"!==this.$scope.name&&"finished_experience_results"!==this.$scope.name?this.$location.path("finished"):void 0:this.load_player()):(this.experienceService.fetch(function(e){return function(t){return e.$scope.experience=t}}(this)),this.hide_menu_and_profile(),this.$location.path("/experience/#/case"))},e.prototype.login_player=function(){return this.console.log("ExperienceController::login_into_experience"),this.config.access_key=this.$route.current.params.access_key,this.load_player()},e.prototype.load_player=function(){return this.experienceService.profile(function(e){return function(t){return e.$scope.experience=t}}(this)),this.playerService.profile(function(e){return function(t){return t.error?(e.hide_menu_and_profile(),e.$location.path("/experience/#/case")):(e.$scope.player=t,e.console.log("ExperienceController:loadExistingPlayer:done"),e.storage.set("access_key",e.config.access_key),"undefined"!=typeof console&&(console.log("Jouw access_key = "+e.config.access_key),console.log("Gebruik de volgende URL voor het binnenhalen van de punten uit de verborgen boodschappen: https://api.crimediggers.nl/v1/player/"+e.config.access_key+"/assignment/??/check?answer=??")),e.$rootScope.$broadcast("update_scene"),"finished_experience_epiloog"===e.$scope.name||"finished_experience_results"===e.$scope.name?e.hide_menu_and_profile():e.show_menu_and_profile(),e.$scope.player.experience_done&&"finished_experience_epiloog"!==e.$scope.name&&"finished_experience_results"!==e.$scope.name?e.$location.path("finished"):void 0)}}(this))},e}(),angular.module("opsporing").controller("experienceController",["$sce","$rootScope","$scope","$route","storage","experienceService","playerService","config","console","$location",e])}.call(this),function(){var e;e=function(){function e(e,t,n,o,i,r,s,c){var a;this.$scope=e,this.playerService=t,this.experienceService=n,this.config=o,this.console=i,this.$route=r,this.$location=s,this.storage=c,this.console.log("PlayerController:constructor"),a=this.experienceService.getCaseId(this.$route.current.params["case"]),this.$scope.kind_of_experience=this.experienceService.getKindOfExperience(this.$route.current.params["case"]),this.$scope["case"]=this.$route.current.params["case"],this.console.log("PlayerController:constructor:experience_id = "+a),this.$scope.player={gender:"man",name:null,role:this.$route.current.params.kind,experience:a},this.men=["Vic","Thomas","Jimmy","Zack","Fox","Jack","Sam","Spenser","Philip","Mike","Heij","George","Don","Clouseau"],this.women=["Abigail","Hilde","Lousia","Cherry","Katherine","Cat","Callie","Lily","Trixie","Eliza","Judy","Anita","Anne","Sanne"]}return e.prototype.start_experience=function(){return this.console.log("PlayerController::start_experience::new player"),this.playerService.create_profile(this.$scope.player,function(e){return function(t){return e.$scope.player=t,e.config.access_key=e.$scope.player.access_key,e.storage.set("access_key",e.config.access_key),e.console.log("PlayerController:requestNewPlayer:done "+e.config.access_key),e.$location.path("/start")}}(this))},e.prototype.check_name=function(){return this.$scope.player.name?(this.$scope.player.error=null,this.$scope.name_done=!0):this.$scope.player.error="Jouw naam invullen of een willekeurig gekozen naam is verplicht."},e.prototype.random_name=function(){return"man"===this.$scope.player.gender?this.random_man():this.random_woman()},e.prototype.random_man=function(){return this.men[Math.floor(Math.random()*this.men.length)]},e.prototype.random_woman=function(){return this.women[Math.floor(Math.random()*this.women.length)]},e}(),angular.module("opsporing").controller("PlayerController",["$scope","playerService","experienceService","config","console","$route","$location","storage",e])}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e,n,o,i,r,s,c){this.$rootScope=e,this.$scope=n,this.$route=o,this.assignmentService=r,this.console=c,this.show_respond=t(this.show_respond,this),this.console.log("QuestionController:constructor"),this.console.log(r),this.$scope.cdn_server=s.cdn,this.$scope.scene={},this.$rootScope.assignment={},this.$rootScope.active_assignment_url="",this.$scope.anwser="",this.$scope.show_modal=!1,this.$scope.modal={},this.$scope.scene.id=this.$route.current.params.scene,i.details(this.$route.current.params.scene,function(e){return function(t){return e.$scope.scene=t}}(this)),null!=this.$route.current.params.hint&&this.take_hint(this.$route.current.params.hint),this.get_assignment_details(),this.template="/partials/question/question.html"}return e.prototype.get_assignment_details=function(){return this.assignmentService.details(this.$route.current.params.assignment,function(e){return function(t){return"extra_question"===e.$route.current.name||"extra_question_hint"===e.$route.current.name?(e.$rootScope.assignment=t.extra_assignment,e.$rootScope.active_assignment_url="#/scene/"+e.$route.current.params.scene+"/assignment/"+e.$route.current.params.assignment+"/extra"):(e.$rootScope.assignment=t,e.$rootScope.active_assignment_url="#/scene/"+e.$route.current.params.scene+"/assignment/"+e.$route.current.params.assignment),e.template="/partials/question/question.html",e.$rootScope.assignment.answer&&(e.template="/partials/question/answer.html"),e.$scope.assignment.active_hint?(e.$scope.hint=e.$scope.assignment.active_hint,e.$scope.hint.url="extra_question"===e.$route.current.name?"/experience/#/scene/"+e.$route.current.params.scene+"/assignment/"+e.$route.current.params.assignment+"/extra/hint/"+e.$scope.hint.id:"/experience/#/scene/"+e.$route.current.params.scene+"/assignment/"+e.$route.current.params.assignment+"/hint/"+e.$scope.hint.id):e.$scope.hint={text:"Geen hints meer",url:e.$rootScope.active_assignment_url},e.$scope.extra=e.$scope.assignment.extra_assignment?e.$rootScope.assignment.extra_assignment:{text:"Geen extra opdracht"}}}(this))},e.prototype.take_hint=function(e){return this.console.log("take hint :: "+e),e?this.assignmentService.hint(e,function(e){return function(t){return t.error?e.console.log("QuestionController::take_hint::error::"+t.error):(e.$rootScope.active_assignment_url="extra_question"===e.$route.current.name||"extra_question_hint"===e.$route.current.name?"#/scene/"+e.$route.current.params.scene+"/assignment/"+e.$route.current.params.assignment+"/extra":"#/scene/"+e.$route.current.params.scene+"/assignment/"+e.$route.current.params.assignment,e.$rootScope.$broadcast("reload_player"),e.get_assignment_details(),e.$scope.show_modal=!0,e.$scope.modal.title="Hint",e.$scope.modal.description=t.hint,e.$scope.modal.secundary=null,e.$scope.modal.secundary_link=null,e.$scope.modal.primary="Verder rechercheren",e.$scope.modal.primary_link=e.$rootScope.active_assignment_url)}}(this)):this.console.log("disable")},e.prototype.check_answer=function(e){return this.console.log("QuestionController::check_answer "+this.$scope.assignment.id+" :: "+e),"extra_question"===this.$route.current.name?this.assignmentService.check_extra(this.$route.current.params.assignment,e,function(e){return function(t){return e.show_respond(t)}}(this)):this.assignmentService.check(this.$route.current.params.assignment,e,function(e){return function(t){return e.show_respond(t)}}(this))},e.prototype.show_respond=function(e){return this.$scope.show_modal=!0,this.$rootScope.$broadcast("reload_player"),e.correct?(this.$scope.answer="",this.$scope.modal.title="Het antwoord is goed",this.$scope.modal.description=e.feedback,e.next_scene?(this.$scope.modal.secundary=null,this.$scope.modal.primary="Debriefing",this.$scope.modal.primary_link="/experience/#/scene/"+e.next_scene_id+"/debrief"):(this.$scope.extra&&this.$scope.assignment.extra_assignment?(this.$scope.modal.secundary="Extra opdracht (+"+this.$scope.assignment.extra_assignment.points+")",this.$scope.modal.secundary_link="/experience/#/scene/"+this.$route.current.params.scene+"/assignment/"+this.$route.current.params.assignment+"/extra"):this.$scope.modal.secundary=null,this.$scope.modal.primary="Volgende vraag",this.$scope.modal.primary_link="/experience/#/scene/"+this.$route.current.params.scene+"/assignment/"+e.next_assignment)):(this.$scope.modal.title="Het antwoord is helaas onjuist",this.$scope.modal.description=e.feedback,this.$scope.assignment.active_hint?(this.$scope.modal.secundary="Hint (-"+this.$scope.hint.points+")",this.$scope.modal.secundary_link=this.$scope.hint.url):this.$scope.modal.secundary=null,this.$scope.modal.primary="Verder rechercheren",this.$scope.modal.primary_link=this.$rootScope.active_assignment_url)},e}(),angular.module("opsporing").controller("QuestionController",["$rootScope","$scope","$route","sceneService","assignmentService","config","console",e])}.call(this),function(){var e;e=function(){function e(e,t,n,o,i,r,s){this.$rootScope=e,this.$scope=t,this.$route=n,this.console=s,this.console.log("SceneController:constructor"),this.$scope.cdn_server=r.cdn,this.$scope.scene={},this.$rootScope.assignment={},o.details(this.$route.current.params.scene,function(e){return function(t){return e.$scope.scene=t,i.details(e.$scope.scene.active_assignment,function(t){return e.$rootScope.assignment=t,e.$rootScope.active_assignment_url="#/scene/"+e.$scope.scene.id+"/assignment/"+e.$rootScope.assignment.id}),"debrief"===e.$route.current.name?e.show_debrief():void 0}}(this))}return e.prototype.show_debrief=function(){return this.$scope.scene.debrief?(this.$scope.show_modal=!0,this.$scope.modal={},this.$scope.modal.title="Debriefing",this.$scope.modal.description=this.$scope.scene.debrief,this.$scope.modal.secundary=null,this.$scope.modal.primary="Naar volgende locatie",this.$scope.modal.primary_link="/experience/#/scene/"+this.$scope.scene.id):void 0},e}(),angular.module("opsporing").controller("SceneController",["$rootScope","$scope","$route","sceneService","assignmentService","config","console",e])}.call(this),function(){var e;e=function(){function e(e,t,n,o){this.$rootScope=e,this.$scope=t,this.sceneService=n,this.console=o,this.console.log("ScenesController:constructor"),this.$scope.scenes=[],this.$scope.locked_scenes=[],this.fetch_scene_information(),e.$on("update_scene",function(e){return function(){return e.fetch_scene_information()}}(this))}return e.prototype.get_status=function(e){var t,n,o,i;if(this.$scope.player&&e)for(i=this.$scope.player.scenes,n=0,o=i.length;o>n;n++)if(t=i[n],t.id===e.id)return!0;return!1},e.prototype.get_status_assignment=function(e){var t,n,o,i;if(this.$scope.player&&e)for(i=this.$scope.player.assignments,n=0,o=i.length;o>n;n++)if(t=i[n],t.id===e.id)return!0;return!1},e.prototype.get_status_extra_assignment=function(e){var t,n,o,i;if(this.$scope.player&&e)for(i=this.$scope.player.extra_assignments,n=0,o=i.length;o>n;n++)if(t=i[n],t.assignment_id===e.id)return!0;return!1},e.prototype.fetch_scene_information=function(){return this.sceneService.fetch(function(e){return function(t){return e.$scope.scenes=t.scenes,e.console.log("ScenesController:loadScenes:done")}}(this)),this.sceneService.fetch_locked(function(e){return function(t){return e.$scope.locked_scenes=t.scenes,e.console.log("ScenesController:loadLockedScenes:done")}}(this))},e}(),angular.module("opsporing").controller("ScenesController",["$rootScope","$scope","sceneService","console",e])}.call(this),function(){var e;e=function(){function e(e,t,n,o,i){this.$rootScope=e,this.$scope=t,this.consolex=n,this.storage=o,this.$location=i,this.consolex.log("StopController:constructor"),this.storage.remove("access_key"),this.$scope.$parent.player=null,this.$scope.$parent.show_modal_profile=!1,this.$location.path("start")}return e}(),angular.module("opsporing").controller("StopController",["$rootScope","$scope","console","storage","$location",e])}.call(this),function(){var e;e=function(){function e(e,t,n,o,i,r,s){this.$rootScope=e,this.$scope=t,this.$route=n,this.console=s,this.console.log("TracesController:constructor"),this.$scope.cdn_server=r.cdn,this.$scope.traces=[],this.$scope.scene={},this.$rootScope.assignment={},this.$scope.show_trace=!1,o.fetch(function(e){return function(t){return e.$scope.traces=t.traces,e.console.log("TracesController:loadTraces:done")}}(this)),i.details(this.$route.current.params.scene,function(e){return function(t){return e.$scope.scene=t,e.$rootScope.assignment=t.assignments[0],e.console.log("TracesController:loadScene:done")}}(this))}return e.prototype.investigate_trace=function(e){return this.console.log("TracesController:investigate_trace"),this.$scope.active_trace=e,this.$scope.active_detail=0,this.$scope.show_trace=!0},e}(),angular.module("opsporing").controller("TracesController",["$rootScope","$scope","$route","traceService","sceneService","config","console",e])}.call(this),function(){angular.module("opsporing").directive("audioTrigger",function(){return{restrict:"A",link:function(e,t){var n;return n=!0,$("audio").get(0).muted=!1,t.find("img.audio-off").css("display","none"),t.find("img.audio-on").css("display","block"),t.on("click",function(e){return e.preventDefault(),n=!n,n?($("audio").get(0).muted=!1,t.find("img.audio-off").css("display","none"),t.find("img.audio-on").css("display","block")):($("audio").get(0).muted=!0,t.find("img.audio-off").css("display","block"),t.find("img.audio-on").css("display","none"))})}}})}.call(this),function(){angular.module("opsporing").directive("closeAfterLink",function(){return{restrict:"A",link:function(e,t){return t.on("click",function(){return $(".menu-trigger").removeClass("active"),$("#levels").removeClass("active"),$(".user, .score, .time").toggleClass("active")})}}})}.call(this),function(){angular.module("opsporing").directive("game",function(){return{restrict:"C",link:function(){return window.onbeforeunload=function(){return"Je gaat helaas #crimediggers verlaten. Mocht je zijn vast gelopen, gebruik dan de hints. Deze helpen je bij het oplossen van de opdrachten. Zo niet, hopelijk tot ziens bij #crimediggers."}}}})}.call(this),function(){angular.module("opsporing").directive("level",function(){return{restrict:"C",link:function(e,t){return t.find(".img-container").on("click",function(e){return e.preventDefault(),$(".level").removeClass("current"),t.addClass("current")})}}})}.call(this),function(){angular.module("opsporing").directive("modal",function(){return{restrict:"A",link:function(e,t){var n;return e.$watch("show_modal",function(){return function(e,t,o){return o.show_modal?$("input#answer").blur():$("input#answer").focus(),n()}}(this)),e.$watch("show_modal_profile",function(){return function(){return n()}}(this)),e.$watch("show_modal_help",function(){return function(){return n()}}(this)),n=function(){var e,n,o,i;return e=t.find(".content"),i=$(window).height(),o=e.height(),n=i/2-o/2-30,e.css({"margin-top":""+n+"px"})},$(window).on("resize",function(){return n()}),n()}}})}.call(this),function(){angular.module("opsporing").directive("owlCarousel",function(){return{restrict:"C",link:function(e,t){var n;return t.owlCarousel({singleItem:!0,autoHeight:!0,navigation:!0,navigationText:["<i class='glyphicon glyphicon-chevron-left'></i>","<i class='glyphicon glyphicon-chevron-right'></i>"],afterMove:function(){return e.active_detail=t.data("owlCarousel").currentItem,e.$apply()}}),n=0,e.$watch("active_trace",function(){return function(e,o,i){var r,s,c,a,l,u,p,h;if(null!=i.active_trace){for($(window).scrollTop(0),c=a=0;n>a;c=a+=1)t.data("owlCarousel").removeItem();for(n=0,p=i.traces[i.active_trace].details,h=[],l=0,u=p.length;u>l;l++)s=p[l],n++,r="<div class='slide'><img src='"+i.cdn_server+s.evidence+"'></div>",h.push(t.data("owlCarousel").addItem(r));return h}}}(this))}}})}.call(this),function(){angular.module("opsporing").directive("playTimer",function(){return{restrict:"A",link:function(e,t){var n,o,i,r,s,c,a;return i=0,n=t.find(".hour"),o=t.find(".minute"),s=t.find(".second"),a=function(){return i+=1,c()},window.setInterval(a,1e3),e.$watch("player.playtime",function(){return function(e){return null!=e?i=Math.floor(e):void 0}}(this)),c=function(){var e;return e=r(i),n.text(e.h),o.text(e.m),s.text(e.s)},r=function(e){var t,n,o,i,r,s;return o=Math.floor(e/3600),t=e%3600,i=Math.floor(t/60),n=t%60,s=Math.ceil(n),r={h:("00"+o).slice(-2),m:("00"+i).slice(-2),s:("00"+s).slice(-2)}}}}})}.call(this),function(){angular.module("opsporing").directive("resizeParallax",function(){return{restrict:"A",link:function(e){var t;return e.$on("$viewContentLoaded",function(){return t(),window.setTimeout(t,50),window.setTimeout(t,100)}),$(".game").imagesLoaded(function(){return t()}),$(function(){return t()}),$(window).resize(function(){return t()}),$(window).scroll(function(){return t()}),t=function(){return function(){var e,t,n,o,i,r;return r=$(window).height(),e=$(".game").height()+120,null==e&&(e=0),i=$(window).scrollTop(),o=r+i-80,t=e,t>o&&$(".footer").css("top",""+o+"px"),r>e?(n=$(window).height()-80,$(".footer").css("top",""+n+"px")):void 0}}(this)}}})}.call(this),function(){angular.module("opsporing").directive("textSliderUpdate",function(){return{restrict:"A",link:function(e,t){return e.$watch("experience.paragraphs",function(){return function(e,n,o){var i;return o.$first&&(i=t.parent().data("owlCarousel"),i&&i.destroy()),o.$last?t.parent().owlCarousel({navigation:!0,navigationText:["<i class='glyphicon glyphicon-chevron-left'></i>","<i class='glyphicon glyphicon-chevron-right'></i>"],singleItem:!0,autoHeight:!1}):void 0}}(this))}}})}.call(this),function(){angular.module("opsporing").directive("totalTime",function(){return{restrict:"A",link:function(e,t){var n,o,i,r,s,c;return i=0,n=t.find(".hour"),o=t.find(".minute"),s=t.find(".second"),e.$watch("player.playtime",function(){return function(e){return null!=e?(i=Math.floor(e),c()):void 0}}(this)),c=function(){var e;return e=r(i),n.text(e.h),o.text(e.m),s.text(e.s)},r=function(e){var t,n,o,i,r,s;return o=Math.floor(e/3600),t=e%3600,i=Math.floor(t/60),n=t%60,s=Math.ceil(n),r={h:("00"+o).slice(-2),m:("00"+i).slice(-2),s:("00"+s).slice(-2)}}}}})}.call(this),function(){angular.module("opsporing").directive("video",function(){return{restrict:"E",link:function(e,t,n){var o,i;return i=function(){return function(){return e.video_status.preload_timeout=!0,e.$parent.$digest()}}(this),o=function(){var o,r;return"intro"===n.id&&(e.video_status.video_sync_done=!1,e.video_status.skip_video_preload=!1,e.video_status.preload_timeout=!1,e.video_status.start_transition=!1,window.setTimeout(i,6e3),o=t,r=o.get(0),e.video_status.preload=!0,null!=r.play&&(4===r.readyState&&r.play(),o.bind("canplaythrough",function(){return r.play()}),o.bind("playing",function(){return e.video_status.preload=!1,e.video_status.start_transition=!0,e.$parent.$digest()}),o.bind("progress",function(){var t;return this.duration&&e.video_status.preload&&(t=Math.floor(r.buffered.end(0)/r.duration*100),$("span.loader").css("width",""+t+"%"),r.buffered.end(0)/r.duration===1)?r.play():void 0}),o.bind("ended",function(){return e.video_status.video_sync_done=!0,e.$parent.$digest(),t.remove()}))),"loop"===n.id?e.$watch("video_status.video_sync_done",function(){return function(){return o=t,r=o.get(0),null!=r.play&&4===r.readyState?r.play():void 0}}(this)):void 0},Modernizr.video?o():(e.video_status.video_sync_done=!0,e.video_status.skip_video_preload=!0)}}})}.call(this),function(){angular.module("opsporing").directive("welcome",function(){return{restrict:"C",link:function(e,t){return $(t).delay(1e4).fadeOut(500)}}})}.call(this),function(){angular.module("opsporing").filter("range",function(){return function(e,t){var n;for(t=parseInt(t),n=0;t>n;)e.push(n),n++;return e}})}.call(this),function(){angular.module("opsporing").factory("console",function(){return"undefined"!=typeof console&&console.log("Je bent lekker bezig! Bij de politie zijn we altijd geinteresseerd in digitale talenten die verder kijken dan de oppervlakte en die ons willen helpen bij de digitale opsporing. Dus white hat hAx0R, maak er politiewerk van."),{log:function(e){return"undefined"!=typeof console?console.log("log :: "+e):void 0}}})}.call(this),function(){angular.module("opsporing").factory("access_denied",["$location","$q","storage",function(e,t,n){var o,i;return i=function(e){return e},o=function(o){return n.remove("access_key"),e.path("/experience"),t.reject(o)},function(e){return e.then(i,o)}}])}.call(this),function(){window.app.config(["$routeProvider",function(e){return e.when("/case/:case/register",{controller:"PlayerController",controllerAs:"player_main",name:"choice_kind_of_experience",templateUrl:"/partials/choice.html"}),e.when("/case",{controller:"CaseController",controllerAs:"case_main",name:"case",templateUrl:"/partials/case.html"}),e.when("/stop",{controller:"StopController",name:"stop",templateUrl:"/partials/case.html"}),e.when("/scene/:scene",{controller:"SceneController",name:"scene",templateUrl:"/partials/scene.html"}),e.when("/scene/:scene/inventory/:id?",{controller:"TracesController",name:"inventory",controllerAs:"traces_main",templateUrl:"/partials/inventory.html"}),e.when("/scene/:scene/assignment/:assignment",{controller:"QuestionController",name:"question",controllerAs:"question_main",templateUrl:"/partials/question.html"}),e.when("/scene/:scene/assignment/:assignment/extra",{controller:"QuestionController",name:"extra_question",controllerAs:"question_main",templateUrl:"/partials/question.html"}),e.when("/scene/:scene/assignment/:assignment/hint/:hint",{controller:"QuestionController",name:"question_hint",controllerAs:"question_main",templateUrl:"/partials/question.html"}),e.when("/scene/:scene/assignment/:assignment/extra/hint/:hint",{controller:"QuestionController",name:"extra_question_hint",controllerAs:"question_main",templateUrl:"/partials/question.html"}),e.when("/scene/:scene/debrief",{controller:"SceneController",name:"debrief",templateUrl:"/partials/scene.html"}),e.when("/start/:access_key",{name:"login_into_experience",templateUrl:"/partials/intro.html"}),e.when("/start",{name:"start_experience",templateUrl:"/partials/intro.html"}),e.when("/finished",{name:"finished_experience_epiloog",controller:"EpilogueController",templateUrl:"/partials/epilogue.html"}),e.when("/finished/results",{name:"finished_experience_results",templateUrl:"/partials/results.html"}),e.otherwise({redirectTo:"/case"})}]),window.app.config(["$analyticsProvider",function(e){return e.firstPageview(!0),e.withAutoBase(!0)}]),window.app.config(["$sceDelegateProvider",function(e){return e.resourceUrlWhitelist(["self","https://player.vimeo.com/**","http://player.vimeo.com/**"])}]),window.app.config(["$httpProvider",function(e){return e.responseInterceptors.push("access_denied")}])}.call(this),function(){var e;e=function(){function e(e,t,n){this.$resource=e,this.config=t,this.console=n,this.service=this.$resource(""+this.config.api+"/v1/player/:access_key/assignment/:id",{id:"@id",access_key:"@access_key",callback:"JSON_CALLBACK"},{query:{isArray:!1,method:"JSONP"},save:{method:"JSONP",url:""+this.config.api+"/v1/player/:access_key/assignment/:id/check"},save_extra:{method:"JSONP",url:""+this.config.api+"/v1/player/:access_key/assignment/:id/check/extra"},hint:{method:"JSONP",url:""+this.config.api+"/v1/player/:access_key/hint/:id"}}),this.console.log(this.service),this.console.log("AssignmentService.init")}return e.prototype.fetch=function(e){return this.config.access_key?this.service.query({access_key:this.config.access_key}).$promise.then(function(t){return e(t)}):void 0},e.prototype.details=function(e,t){return this.config.access_key?this.service.query({access_key:this.config.access_key,id:e}).$promise.then(function(e){return t(e)}):void 0},e.prototype.check=function(e,t,n){return this.config.access_key?this.service.save({access_key:this.config.access_key,id:e,answer:t},function(e){return n(e)}):void 0},e.prototype.check_extra=function(e,t,n){return this.config.access_key?this.service.save_extra({access_key:this.config.access_key,id:e,answer:t},function(e){return n(e)}):void 0},e.prototype.hint=function(e,t){return this.config.access_key?this.service.hint({access_key:this.config.access_key,id:e},function(e){return t(e)}):void 0},e}(),angular.module("opsporing").service("assignmentService",["$resource","config","console",e])}.call(this),function(){var e;e=function(){function e(e,t,n){this.$resource=e,this.config=t,this.console=n,this.service=this.$resource(""+this.config.api+"/v1/experience",{callback:"JSON_CALLBACK"},{query:{method:"JSONP",isArray:!0},epilogue:{method:"JSONP",url:""+this.config.api+"/v1/player/:access_key/epilogue"},profile:{method:"JSONP",url:""+this.config.api+"/v1/player/:access_key/experience"}}),this.console.log("ExperienceService.init"),this.experiences=[]}return e.prototype.getKindOfExperience=function(e){var t,n,o,i;for(i=this.experiences,n=0,o=i.length;o>n;n++)if(t=i[n],t.name===e)return t.kind;return"both"},e.prototype.getCaseId=function(e){var t,n,o,i;for(i=this.experiences,n=0,o=i.length;o>n;n++)if(t=i[n],t.name===e)return t.id;return-1},e.prototype.fetch=function(e){return this.service.query().$promise.then(function(t){return function(n){return t.experiences=n,e(n)}}(this))},e.prototype.profile=function(e){return this.config.access_key?this.service.profile({access_key:this.config.access_key}).$promise.then(function(t){return e(t)}):void 0},e.prototype.epilogue=function(e){return this.config.access_key?this.service.epilogue({access_key:this.config.access_key}).$promise.then(function(t){return e(t)}):void 0},e}(),angular.module("opsporing").service("experienceService",["$resource","config","console",e])}.call(this),function(){var e;e=function(){function e(e,t,n){this.$resource=e,this.config=t,this.console=n,this.service=this.$resource(""+this.config.api+"/v1/player/:access_key/info",{callback:"JSON_CALLBACK"},{get:{method:"JSONP"},create:{method:"JSONP",url:""+this.config.api+"/v1/player/new"}}),this.console.log("PlayerService.init")}return e.prototype.profile=function(e){return this.config.access_key?this.service.get({access_key:this.config.access_key}).$promise.then(function(t){return t.role_locale="financieel",t.role_opening="https://www.kombijdepolitie.nl/WerkenBijDeRecherche/financieel-rechercheren/Paginas/default.aspx","digital"===t.role&&(t.role_locale="digitaal",t.role_opening="https://www.kombijdepolitie.nl/WerkenBijDeRecherche/digitaal-rechercheren/Paginas/default.aspx"),e(t)}):void 0},e.prototype.create_profile=function(e,t){return this.service.create({name:e.name,gender:e.gender,role:e.role,experience:e.experience}).$promise.then(function(e){return t(e)})},e}(),angular.module("opsporing").service("playerService",["$resource","config","console",e])}.call(this),function(){var e;e=function(){function e(e,t,n){this.$resource=e,this.config=t,this.console=n,this.service=this.$resource(""+this.config.api+"/v1/player/:access_key/scenes/:scene",{callback:"JSON_CALLBACK"},{query:{isArray:!1,method:"JSONP"},locked:{method:"JSONP",url:""+this.config.api+"/v1/player/:access_key/scenes/locked"}}),this.console.log("SceneService.init")}return e.prototype.fetch=function(e){return this.config.access_key?this.service.query({access_key:this.config.access_key}).$promise.then(function(t){return e(t)}):void 0},e.prototype.fetch_locked=function(e){return this.config.access_key?this.service.locked({access_key:this.config.access_key}).$promise.then(function(t){return e(t)}):void 0},e.prototype.details=function(e,t){return this.console.log("access_key : "+this.config.access_key),this.config.access_key?this.service.query({access_key:this.config.access_key,scene:e}).$promise.then(function(e){return t(e)}):void 0},e}(),angular.module("opsporing").service("sceneService",["$resource","config","console",e])}.call(this),function(){var e;e=function(){function e(e,t,n){this.$resource=e,this.config=t,this.console=n,this.service=this.$resource(""+this.config.api+"/v1/player/:access_key/traces/:trace",{callback:"JSON_CALLBACK"},{query:{isArray:!1,method:"JSONP"}}),this.console.log("TraceService.init")}return e.prototype.fetch=function(e){return this.console.log("access_key : "+this.config.access_key),this.config.access_key?this.service.query({access_key:this.config.access_key}).$promise.then(function(t){return e(t)}):void 0},e.prototype.details=function(e,t){return this.console.log("access_key : "+this.config.access_key),this.config.access_key?this.service.query({access_key:this.config.access_key,scene:e}).$promise.then(function(e){return t(e)
}):void 0},e}(),angular.module("opsporing").service("traceService",["$resource","config","console",e])}.call(this),function(){}.call(this);