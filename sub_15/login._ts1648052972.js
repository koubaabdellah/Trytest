$(document).ready(function(){var $login_forms=$('.user_login_form');var $create_account_buttom=$('#checkout_profile_form').find('#submit_button');var pass=document.getElementById('password');var confirm_pass=document.getElementById('password_confirm');var submitted=false;var input_error_class='f-c-e-input-error';$login_forms.find('.f-c-e-input').on('input paste',function(ev){var form_complete=true;var $form=$(ev.target).closest('form');var $submit_btn=$form.find('#submit_button.submit-button-create');var $form_inputs=$form.find('.f-c-e-input');$form_inputs.each(function(){var input_val=$(this).val().trim();if(input_val==''){form_complete=false;}});if(form_complete){$submit_btn.prop('disabled',false).removeClass('deactivate');}else{$submit_btn.prop('disabled',true).addClass('deactivate');}})
$create_account_buttom.click(function(ev){ev.preventDefault();if($('#emailaddress').val().trim()!=$('#confirmemail').val().trim()){$('.email-error').removeClass('hidden').html(email_match_str).show();$('#emailaddress').addClass(input_error_class);return false;}
var referral=($('#referral').val()===undefined)?"":$('#referral').val();var phone_number=($('#phoneNumber').val()===undefined)?"":$('#phoneNumber').val();if((phone_number===""||phone_number.length<14)&&$('#phoneNumber').val()!==undefined){$('.phone-error').html(invalid_phone_str).show();return false;}
var email_subscribe=($('#email-subscribe').length>0)?$('#email-subscribe').prop('checked'):null;grecaptcha.enterprise.ready(async()=>{token='';try{token=await grecaptcha.enterprise.execute(serverVars.recaptcha_site_key,{action:'profile_ajax'});}catch(e){console.log(e);}
$.post('/checkout/profile_ajax',{username:$('#emailaddress').val(),bill_firstname:$('#profilefirstname').val(),bill_lastname:$('#profilelastname').val(),password:$('#password').val(),token:token,source:referral,phone_number:phone_number,create:1,email_subscribe:email_subscribe,},function(data){if(data.errors==1){if(data.msg.search('DNT_email_already_used')!=-1){$('.email-error').removeClass('hidden').html(existing_account_str.replace('%1$s','href="'+switch_login_link+'"')).show();}else if(data.msg.search('DNT_invalid_email')!=-1){$('.email-error').removeClass('hidden').html(invalid_email_str).show();}
$('#emailaddress').addClass(input_error_class);return false;}else{window.location.href=create_redirect;}},"json");});});$('#show-pw').change(function(){if($(this)[0].checked){if(pass){pass.type='text';}
if(confirm_pass){confirm_pass.type='text';}
$("label[for = show-pw]").text(hide_str);}else{if(pass){pass.type='password';}
if(confirm_pass){confirm_pass.type='password';}
$("label[for = show-pw]").text(show_str);}});$('#fblogin, .fblogin').click(function(){FB.login(function(response){},{scope:'email'});});$("#checkout_profile_form").submit(function(){if(submitted){return false;}
$('#submit_button').html(processing_str);$('#submit_button').prop('disabled',true);submitted=true;return true;});var domains=['gmail.com','googlemail.com','yahoo.com','yahoo.co.uk','ymail.com','hotmail.com','hotmail.co.uk','live.com','outlook.com','msn.com','aol.com','comcast.net','sbcglobal.net','att.net','verizon.net','cox.net','me.com','bellsouth.net'];var topLevelDomains=['com','net','co.uk'];$('#emailaddress').blur(function(){var text=$('#email_suggestion_text');var link=$('#email_suggestion_link');var field=$(this);$(this).val($(this).val().toLowerCase());$(this).mailcheck({domains:domains,topLevelDomains:topLevelDomains,suggested:function(e,s){link.html(s.full).click(function(){var new_email=$(this).html();field.val(new_email);text.hide();return false;});text.show();},empty:function(){text.hide();}});});$('#confirmemail').blur(function(){$(this).val($(this).val().toLowerCase());});$('#forgotPass').click(function(ev){ev.preventDefault();var redirect_url=$(this).attr('href');if($('#login-email').val()){redirect_url+='?p='+encodeURIComponent($('#login-email').val());}
window.location.href=redirect_url;});});function goForm(){$('#fb_val').val('1');$("form:first").trigger("submit");}