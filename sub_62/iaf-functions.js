var WebmanagerFormStateRegistry={},FormsUtil=function(){function m(d,a,b,c){a=document.getElementById("precondition_"+c.replace("wmform_","")+"_"+a);if("undefined"!==typeof a){c=a.value.split(",");if("add"==b)n(c,d)||c.push(d);else if(n(c,d))for(b=0;b<c.length;b++)if(c[b]==d){c.splice(b,1);break}a.value=c.join(",")}}function n(d,a){for(var b=0;b<d.length;b++)if(d[b]==a)return!0;return!1}function p(d,a){if("undefined"!==typeof d&&null!=d&&"undefined"!==typeof a&&null!==a){var b=a.indexOf(".");return-1==
b?d[a]:p(d[a.substring(0,b)],a.substring(b+1,a.length))}return null}function e(d,a,b){var c=[],g;for(g in d)if(null!=d&&null!=d[g]){var h=d[g];"function"==typeof h.checkConditions&&(h.checkConditions()?h.visible?(m(a+g,"show","add",b),m(a+g,"hide","remove",b),c.push({value:"show",identifier:a+g})):(m(a+g,"hide","add",b),m(a+g,"show","remove",b),c.push({value:"hide",identifier:a+g})):h.visible||(m(a+g,"hide","add",b),m(a+g,"show","remove",b),c.push({value:"hide",identifier:a+g})));if("object"==typeof h&&
h.visible)for(var h=e(h,a+g+".",b),f=0;f<h.length;f++)c.push(h[f])}return c}return{checkConditions:e,getObject:p,contains:n,join:function(d,a){var b="",c;for(c in d)""!=b&&(b+=a),b+=d[c];return b},isIE:function(){return-1!=navigator.appVersion.indexOf("MSIE")?!0:!1},normalize:function(d){return d.replace(/\./g,"_")}}}(),FormValidation=function(){function m(e,d,a,b){var c=e.parents("form.wmpform:first").attr("id"),g=WebmanagerFormStateRegistry[c].currentStep(),h=e.attr("name"),f=FormsUtil.getObject(g,
h),h=!1,k=p(e),l=!1;null===f||"undefined"===typeof f||f.value===k&&"undefined"!=typeof f.value&&""!==f.value&&"undefined"!==typeof k&&""!==k||(l=!0,f.value=k,f.validated=!1,d&&(h=n(e,f)));if(null!=f&&(a||l))for(e.attr("type"),void 0==b&&(b=[]),d=FormsUtil.checkConditions(g,"",c),a=0;a<d.length;a++)if(f=FormsUtil.getObject(g,d[a].identifier),"show"==d[a].value&&$("#"+FormsUtil.normalize(d[a].identifier)).is(":hidden")){$("#"+FormsUtil.normalize(d[a].identifier)).trigger("IAF_ShowFormFragment");var q=
!1;"undefined"==typeof f||f.condition||(q=f.condition=!0);$("#"+FormsUtil.normalize(d[a].identifier)).find(":input").addBack(":input").filter(":visible").each(function(){if(""!=$(this).attr("name")&&"undefined"!=typeof $(this).attr("name")){var a=FormsUtil.getObject(g,$(this).attr("name"));void 0!=a&&(a.condition=!0,a.visible=!0,-1==$.inArray($(this).attr("name"),b)&&(b.push($(this).attr("name")),m($(this),!1,!0,b),q=!0))}});if(q)for(f=FormsUtil.checkConditions(g,"",c),k=0;k<f.length;k++)for(l=a;l<
d.length;l++)d[l].identifier==f[k].identifier&&d[l].value!=f[k].value&&(d[l].value=f[k].value)}else if("hide"==d[a].value&&$("#"+FormsUtil.normalize(d[a].identifier)).is(":visible")&&(q=!1,"undefined"!=typeof f&&f.condition&&(f.condition=!1,q=!0),$("#"+FormsUtil.normalize(d[a].identifier)).trigger("IAF_HideFormFragment"),$("#"+FormsUtil.normalize(d[a].identifier)).find(":input").addBack(":input").filter(":hidden").each(function(){if(""!=$(this).attr("name")&&"undefined"!=typeof $(this).attr("name")){var a=
FormsUtil.getObject(g,$(this).attr("name"));void 0!=a&&(a.condition=!1,a.visible=!1,-1==$.inArray($(this).attr("name"),b)&&(b.push($(this).attr("name")),m($(this),!1,!0,b),q=!0))}}),q))for(f=FormsUtil.checkConditions(g,"",c),k=0;k<f.length;k++)for(l=a;l<d.length;l++)d[l].identifier==f[k].identifier&&d[l].value!=f[k].value&&(d[l].value=f[k].value);e.trigger("IAF_FragmentChanged",h);return h}function n(e,d){var a=e.attr("name"),b=e.parents("form.wmpform:first").attr("id"),c=!1;if(null!==d&&"undefined"!==
typeof d&&!d.validated&&e.is(":visible")){d=d.validate();var g=FormsUtil.join(d,","),c=""!=g,a="error_"+b+"_"+FormsUtil.normalize(a),b=$("#"+a);0<b.length&&(""!=g?b.trigger("IAF_ShowError",[a,d]):b.trigger("IAF_HideError",a));e.trigger("IAF_FragmentValidated",c)}return c}function p(e){var d=e.val();if("radio"==e.attr("type"))var a=e.attr("name"),a=a.replace(/\./g,"\\."),d=$("input[name\x3d"+a+"]:checked").val();if("checkbox"==e.attr("type")){e=$("input:checkbox[name\x3d'"+e.attr("name")+"']:checked")||
[];var d=[],b=0;e.each(function(){d.push($(this).val());b++})}return d}return{changeFragment:m,submitForm:function(e,d){e.unbind("submit");$(":input",e).each(function(){var a=$(this).attr("name"),b=FormsUtil.getObject(d,a);if(null===b||"undefined"===typeof b||b.visible)null==b||"checkbox"!=this.type&&"radio"!=this.type||void 0!=b.value&&0!=b.value.length||0!=$(":input[type\x3d'hidden'][name\x3d'"+a+"']",e).length||e.append('\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"" /\x3e');else switch(this.type){case "password":case "select-multiple":case "select-one":case "text":case "textarea":$(this).val("");
break;case "checkbox":case "radio":$(this).removeAttr("checked"),e.append('\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"" /\x3e')}});e.trigger("IAF_SubmitForm")},validateForm:function(e,d,a){var b=!1,c=$(':input:not(.finalvalidation)[name][type!\x3d"hidden"][type!\x3d"button"][type!\x3d"submit"]',e);"undefined"!=typeof a&&a&&(c=$(':input.finalvalidation[name][type!\x3d"hidden"][type!\x3d"button"][type!\x3d"submit"]',e));c.each(function(){var a=$(this).attr("name");$(this).attr("type");FormValidation.changeFragment($(this),
!0,!1);a=FormsUtil.getObject(d,a);n($(this),a)&&(b=!0)});return b},validateFormFragment:n,getFragmentValue:p}}(),SUBMIT_TIMEOUT=6E4;
$(document).ready(function(m){function n(b){var c=$(b).find(".csfw").val(),g=$(b).find(".csfw_versionId").val(),h=$(b).find(".csfw_stepId").val(),f=$(b).attr("id"),k="true"===$("input[name\x3d'clientsideRouting']",b).val();"undefined"!==typeof c?$.ajax({url:c,async:!0,success:function(c){k&&""!==h&&(c+=";\nWebmanagerFormStateRegistry['"+f+"'] \x3d "+f+";");eval(c);var l=WebmanagerFormStateRegistry[f];""!=h?$.getJSON(contextPath+"/wcbservlet/nl.gx.forms.wmpformelement.servlet?formVersionId\x3d"+g,
function(c){var f=!1;$.each(c.steps,function(b,a){f=!0;var c=a.identifier;$.each(a.fragments,function(b,a){"undefined"!==typeof a.name&&(b=FormsUtil.getObject(l[c],a.name),null!==b&&"undefined"!=typeof b&&(null!==a.value&&"undefined"!=typeof a.value&&(b.value=a.value),b.visible=a.visible))})});f?e(b):d(b);a(b)}):a(b)}}):a(b)}function p(b){$(".generalerrormessage",b).removeClass("displayNone");e(b)}function e(b){b.find(":input:submit").each(function(){$(this).removeAttr("disabled")})}function d(b){b.find(":input:submit").each(function(){$(this).attr("disabled",
"disabled")})}function a(b){b.find(":input").change(function(){FormValidation.changeFragment($(this),!0,!1)});b.submit(function(a){var c=$(this).attr("id"),c=WebmanagerFormStateRegistry[c].currentStep(),f=$("input[name\x3d'clientsideRouting']",this).val(),e=$("input[type\x3d'hidden'][name\x3d'wmback']",this).val();"true"!==f&&e||a.preventDefault();e?(d(b),"true"===f&&FormValidation.submitForm($(this),c)):(f=!0,a=$(this).data("actionButton"),"undefined"!==typeof a&&""!==a&&(f=!a.hasClass("novalidation")),
e=!1,f&&((e=FormValidation.validateForm($(this),c,!1))||(e=FormValidation.validateForm($(this),c,!0))),e||("undefined"!==typeof a&&""!==a&&(f=a.closest(".wm-field").attr("id"),"undefined"!==typeof f&&""!==f&&(a=a.attr("data-iaf_action"),"undefined"!==typeof a&&""!==a&&$(b).find(a).val(f)),$(b).removeData("actionButton")),d(b),FormValidation.submitForm($(this),c)))});b.find(".wm_input_back_button").click(function(){$("input[type\x3d'hidden'][name\x3d'wmback']",b).val("true")});$(":input:submit[data-iaf_action],:input:button[data-iaf_action]",
b).bind("click",function(a){a.preventDefault();$(b).data("actionButton",$(this));$(b).trigger("submit")});b.find(":input:radio").click(function(){FormsUtil.isIE&&$(this).change()});var a=[],g=[];b.find(":input").each(function(){var c=b.attr("id"),c=WebmanagerFormStateRegistry[c].currentStep(),d=$(this).attr("name"),e=$(this).attr("type");FormsUtil.contains(g,d)||("hidden"!==e&&g.push(d),c=FormsUtil.getObject(c,$(this).attr("name")),null!==c&&"undefined"!==typeof c&&(c.visible=$(this).is(":visible"),
a.push($(this))))});for(var e=0;e<a.length;e++)FormValidation.changeFragment(a[e],!1,!0);b.trigger("IAF_ClientsideFrameworkLoaded")}$(".wmpform").each(function(){n($(this))});$(document).on("IAF_ShowFormFragment","div",function(){$(this).removeClass("displayNone").show();return!1});$(document).on("IAF_HideFormFragment","div",function(){$(this).hide();return!1});$(document).on("IAF_SubmitForm","form",function(a){a=$("input[name\x3d'clientsideRouting']",this).val();var b=$(this);"true"===a?$(this).ajaxSubmit({dataType:"json",
timeout:SUBMIT_TIMEOUT,error:function(a,c,d){c=null;try{c=a.responseText}catch(k){}null!==c&&0===c.toLowerCase().indexOf("\x3cpre\x3e")?(a=c.substring(5,c.lastIndexOf("}")+1),b.trigger("IAF_AfterSubmit",$.parseJSON(a))):b.trigger("IAF_AfterSubmit")},success:function(a){b.trigger("IAF_AfterSubmit",a)},semantic:!1}):$(this).submit();return!1});$(document).on("IAF_AfterSubmit","form",function(b,c){"undefined"===typeof c||"undefined"!==typeof c.routingResult&&"undefined"!==typeof c.routingResult.httpError?
(p($(this)),a($(this))):"undefined"!==typeof c.routingResult?"0"===c.routingResult.type?document.location.href=c.routingResult.url:$(this).trigger("IAF_AjaxShowFormStep",c.routingResult.step):"undefined"!==typeof c.result?(b=$(":input[name\x3d'wmstepid']:first",$(this)).val(),$(this).trigger("IAF_AjaxShowFormStep",b)):(p($(this)),a($(this)))});$(document).on("IAF_AjaxShowFormStep","form",function(a,c){a=$(this).data("ajax-url");"undefined"!==typeof c&&""!==c&&(a=-1!==a.indexOf("?")?a+"\x26wmstepid\x3d"+
c:a+"/wmstepid\x3d"+c);$(this).closest("div.iaf-form-holder-outer").load(a+" .iaf-form-holder-inner",function(){var a=$(this).find(".wmpform");n($(a))})});$(document).on("IAF_ShowError","div",function(a,c,d){$("#"+c).html('\x3cul class\x3d"wm_formelement_errors"\x3e\x3cli\x3e'+FormsUtil.join(d,"\x3c/li\x3e\x3cli\x3e")+"\x3c/li\x3e\x3c/ul\x3e").addClass("error-message").show();$("#"+c).closest(".fieldgrp").addClass("error")});$(document).on("IAF_HideError","div",function(a,c){$("#"+c).empty().removeClass("error-message").hide();
$("#"+c).parents(".fieldgrp").removeClass("error")})});
jQuery(function(m){m.datepicker.regional.nl={closeText:"Sluiten",prevText:"Vorige",nextText:"Volgende",currentText:"Vandaag",monthNames:"januari februari maart april mei juni juli augustus september oktober november december".split(" "),monthNamesShort:"jan feb maa apr mei jun jul aug sep okt nov dec".split(" "),dayNames:"zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" "),dayNamesShort:"zon maa din woe don vri zat".split(" "),dayNamesMin:"zo ma di wo do vr za".split(" "),weekHeader:"Wk",
dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};m.datepicker.setDefaults(m.datepicker.regional.nl)});