webpackJsonp([8],{577:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(102),o=i(282),n=i(287),s=i(283),a=i(571),u=i(570),c=i(284),l=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var f=document.querySelector("[js-hook-account-errors]"),h="[js-hook-form-streetname]",m=function(e){function FormAccount(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FormAccount);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(FormAccount.__proto__||Object.getPrototypeOf(FormAccount)).call(this,e));t.streetNameBlock=t.element.querySelector(h);for(var i=t.element.querySelectorAll(".form-item-UitroosterenVoorNachtelijkeUren"),r=0;r<i.length;r++)i[r].onclick=function(e){try{e.target.closest(".form-item__address").querySelector('[aria-controls="modal-edit-address"]').click()}catch(e){}};return t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(FormAccount,o["default"]),l(FormAccount,[{key:"formId",get:function get(){return"account"}}]),l(FormAccount,[{key:"onFormChange",value:function onFormChange(e){var t=this;"change"===e.eventType&&(n.b.telMobile(this.state.fields["account-phone"].value)?("account-phone"===e.name&&(this.inputs["GebruikersProfiel[CommunicatieViaSMS]"].value="true"),this.inputs["GebruikersProfiel[CommunicatieViaMobiel]"].value="true",this.inputs["GebruikersProfiel[TelefoonnrMobiel]"].value=this.state.fields["account-phone"].value,this.inputs["GebruikersProfiel[CommunicatieViaVast]"].value="false",this.inputs["GebruikersProfiel[TelefoonnrVast]"].value="",this.preferSpeech(this.state.fields.preferSpeechMessages.input.checked),this.inputs.hasOwnProperty("noSMSCheckbox")&&(this.inputs.noSMSCheckbox.checked="true"===this.inputs["GebruikersProfiel[CommunicatieViaVast]"].value,document.querySelector(".js-form-item-noSMSCheckbox").classList.remove("u-hidden"))):n.b.telLandline(this.state.fields["account-phone"].value)&&(this.inputs["GebruikersProfiel[CommunicatieViaSMS]"].value="false",this.inputs["GebruikersProfiel[CommunicatieViaMobiel]"].value="false",this.inputs["GebruikersProfiel[TelefoonnrMobiel]"].value="",this.inputs["GebruikersProfiel[CommunicatieViaVast]"].value="true",this.inputs["GebruikersProfiel[TelefoonnrVast]"].value=this.state.fields["account-phone"].value,this.state.fields.preferSpeechMessages.input.removeAttribute("checked"),this.preferSpeech(!0),document.querySelector(".js-form-item-noSMSCheckbox").classList.add("u-hidden")),this.state.fields["GebruikersProfiel[Email]"].isValid&&(this.inputs.UserName.value=this.state.fields["GebruikersProfiel[Email]"].value),Object(u.a)(this.state,e).then(function(e){return!e||(t.loading=!0,Object(u.b)(t.element,t.state))}).then(function(e){if(e){if(t.state.isValid&&(t.loading=!1),t.loading=!1,e.Adres){var i=e.Adres,r=i.Gemeente,o=i.Huisnr,n=i.HuisnrToev,s=i.Plaatsnaam,a=i.Straatnaam;t.inputs["GebruikersProfiel[Adres][Straatnaam]"].value=a,t.inputs["GebruikersProfiel[Adres][Huisnr]"].value=o,t.inputs["GebruikersProfiel[Adres][HuisnrToev]"].value=n,t.inputs["GebruikersProfiel[Adres][Plaatsnaam]"].value=s,t.inputs["GebruikersProfiel[Adres][Gemeente]"].value=r,t.showStreetnameBlock(!0,a+", "+s)}}else t.loading=!1,t.disableSubmit=!0,t.showStreetnameBlock(!1)}).catch(function(){t.loading=!1,t.disableSubmit=!0}))}},{key:"onFormSubmit",value:function onFormSubmit(){var e=this;this.loading=!0,this.formSubmitTimeout&&clearTimeout(this.formSubmitTimeout),this.inputs.hasOwnProperty("noSMSCheckbox")&&n.b.telMobile(this.state.fields["account-phone"].value)&&(this.inputs["GebruikersProfiel[CommunicatieViaMobiel]"].value=this.inputs.noSMSCheckbox.checked?"true":"false",this.inputs["GebruikersProfiel[CommunicatieViaSMS]"].value="true"),this.formSubmitTimeout=setTimeout(function(){var t=new FormData(e.element);e.changeAccountCall(t,window.EnvironmentSettings.api.changeProfile).then(function(t){t?window.location.reload():e.loading=!1})},500)}},{key:"changeAccountCall",value:function changeAccountCall(e,t){var i=this;return this.loading=!0,Object(s.a)("account-errors"),e.set("method",t),e.set("GebruikersProfiel[InfoViaEmail]",this.inputs["GebruikersProfiel[InfoViaEmail]"].checked),e.delete("account-phone"),r.a.get(window.EnvironmentSettings.endpoint+Object(c.a)(e),{},!1,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return i.checkRegistrationValidity(e)}).catch(function(){return Object(s.b)(f,window.messages.validationRequestFailed,"account-errors"),!1})}},{key:"checkRegistrationValidity",value:function checkRegistrationValidity(e){var t=e.data;if(200===e.status&&t){if(t.success)return Object(s.a)("account-errors"),!0;if(!t.success&&t.error&&t.error.errors){var i=t.error.errors.VMVGebruikersProfiel||t.error.errors.VMeldingOfVGebruikersProfiel;if(i){var r=i.length?i.map(function(e){return e.Code}):[i.Code],o=[];Object.keys(a.a).forEach(function(e){a.a[e].filter(function(e){return r.includes(e)}).length&&o.push(window.messages["validation"+e])}),Object(s.b)(f,o,"account-errors")}return!1}return Object(s.b)(f,window.messages.validationRequestFailed,"account-errors"),!1}return!1}},{key:"preferSpeech",value:function preferSpeech(e){"false"===this.inputs["GebruikersProfiel[CommunicatieViaVast]"].value&&(this.inputs["GebruikersProfiel[CommunicatieViaMobiel]"].value=e)}},{key:"showStreetnameBlock",value:function showStreetnameBlock(e,t){this.streetNameBlock&&(e?(this.streetNameBlock.textContent=t,this.streetNameBlock.classList.remove("u-hidden")):this.streetNameBlock.classList.add("u-hidden"))}}]),FormAccount}();t.default=m}});