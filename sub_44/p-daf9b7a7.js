import{c as s}from"./p-199e5a41.js";import{l as r}from"./p-9c7f1625.js";import{a as e}from"./p-34b9b8bc.js";async function t(e){var t;const i=null!==(t=null==s?void 0:s.api)&&void 0!==t?t:4,[n]=await r([4===i?"esri/core/urlUtils":"esri/urlUtils"]);let c=n.urlToObject(e);c.query=c.query||{};for(let s in c.query||{})c.query.hasOwnProperty(s)&&(Array.isArray(c.query[s])||(c.query[s]=c.query[s].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return c}function i(s){return(null==s?void 0:s.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function n(s){return["wfs","json","rss","ags","kml","ogcFeature","wms","wmts"].includes(s)}function c(r){const{config:e,portal:t}=s;let i=!1;if(!r)return!1;if((e.httpsDomains||[]).forEach((s=>{(r.indexOf(`.${s}/`)>-1||r.indexOf(`/${s}/`)>-1)&&(i=!0)})),!i){let s=t.portalHostname;s.indexOf("/")>-1&&(s=s.substring(0,s.indexOf("/"))),r.indexOf(s)>-1&&(i=!0)}return i}function o(r){if(!r)return!1;const{config:e,portal:t}=s,i=new URL(e.restBaseUrl).hostname,n=!1===e.isMultiTenant,c=-1!==r.indexOf(".arcgis.com/"),o=-1!==r.indexOf("//services")||-1!==r.indexOf("//tiles")||-1!==r.indexOf("//features")||-1!==r.indexOf("//locationservices"),a=t.supportsHostedServices&&-1!==r.indexOf(i)&&!n;return c&&o||!c&&a}function a(){var s;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const r=e("esri_auth",!0);return"web"!==(null===(s=null==r?void 0:r.auth_tier)||void 0===s?void 0:s.toLowerCase())}return!0}function l(s){let r=s.toLowerCase();-1==r.indexOf("http://")&&-1==r.indexOf("https://")&&(r=(s="https://"+s).toLowerCase());let e=r.indexOf("//");e=r.indexOf("/",e+2),-1==e?r=(s+="/arcgis/rest/services").toLowerCase():e==r.length-1&&(r=(s+="arcgis/rest/services").toLowerCase());let t=r.indexOf("/arcgis",e);t==r.length-7?r=(s+="/rest/services").toLowerCase():t==r.length-8&&(r=(s+="rest/services").toLowerCase()),t=r.indexOf("/server",e),r.endsWith("/server")?r=(s+="/rest/services").toLowerCase():r.endsWith("/server/")&&(r=(s+="rest/services").toLowerCase());const i=r.indexOf("/rest/services",e),n=r.indexOf("/services",e),c=r.indexOf("/rest",e);return-1==i&&n>-1?r=(s=`${s.substring(0,n)}/rest/services${s.substring(n+9)}`).toLowerCase():-1==i&&c>-1&&(r=(s=`${s.substring(0,c)}/rest/services${s.substring(c+5)}`).toLowerCase()),r.indexOf("/rest/services"),s}export{i as a,n as b,a as c,l as f,o as i,c as s,t as u}