//>>built
/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
require({cache:{"tslib/tslib":function(){var D,I,B,d,q,y,n,t,h,k,f,v,H,J,Q,O,g,r,e,m,p,w,A,N;(function(G){function a(b,l){b!==c&&("function"===typeof Object.create?Object.defineProperty(b,"__esModule",{value:!0}):b.__esModule=!0);return function(x,C){return b[x]=l?l(x,C):C}}var c="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(b){G(a(c,a(b)))}):"object"===typeof module&&"object"===
typeof module.exports?G(a(c,a(module.exports))):G(a(c))})(function(G){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,l){b.__proto__=l}||function(b,l){for(var x in l)Object.prototype.hasOwnProperty.call(l,x)&&(b[x]=l[x])};D=function(b,l){function x(){this.constructor=b}if("function"!==typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(b,l);b.prototype=null===l?Object.create(l):(x.prototype=l.prototype,new x)};I=Object.assign||
function(b){for(var l,x=1,C=arguments.length;x<C;x++){l=arguments[x];for(var K in l)Object.prototype.hasOwnProperty.call(l,K)&&(b[K]=l[K])}return b};B=function(b,l){var x={},C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&0>l.indexOf(C)&&(x[C]=b[C]);if(null!=b&&"function"===typeof Object.getOwnPropertySymbols){var K=0;for(C=Object.getOwnPropertySymbols(b);K<C.length;K++)0>l.indexOf(C[K])&&Object.prototype.propertyIsEnumerable.call(b,C[K])&&(x[C[K]]=b[C[K]])}return x};d=function(b,l,x,C){var K=
arguments.length,M=3>K?l:null===C?C=Object.getOwnPropertyDescriptor(l,x):C,P;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)M=Reflect.decorate(b,l,x,C);else for(var F=b.length-1;0<=F;F--)if(P=b[F])M=(3>K?P(M):3<K?P(l,x,M):P(l,x))||M;return 3<K&&M&&Object.defineProperty(l,x,M),M};q=function(b,l){return function(x,C){l(x,C,b)}};y=function(b,l){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(b,l)};n=function(b,l,x,C){function K(M){return M instanceof
x?M:new x(function(P){P(M)})}return new (x||(x=Promise))(function(M,P){function F(E){try{z(C.next(E))}catch(L){P(L)}}function u(E){try{z(C["throw"](E))}catch(L){P(L)}}function z(E){E.done?M(E.value):K(E.value).then(F,u)}z((C=C.apply(b,l||[])).next())})};t=function(b,l){function x(z){return function(E){return C([z,E])}}function C(z){if(M)throw new TypeError("Generator is already executing.");for(;K;)try{if(M=1,P&&(F=z[0]&2?P["return"]:z[0]?P["throw"]||((F=P["return"])&&F.call(P),0):P.next)&&!(F=F.call(P,
z[1])).done)return F;if(P=0,F)z=[z[0]&2,F.value];switch(z[0]){case 0:case 1:F=z;break;case 4:return K.label++,{value:z[1],done:!1};case 5:K.label++;P=z[1];z=[0];continue;case 7:z=K.ops.pop();K.trys.pop();continue;default:if(!(F=K.trys,F=0<F.length&&F[F.length-1])&&(6===z[0]||2===z[0])){K=0;continue}if(3===z[0]&&(!F||z[1]>F[0]&&z[1]<F[3]))K.label=z[1];else if(6===z[0]&&K.label<F[1])K.label=F[1],F=z;else if(F&&K.label<F[2])K.label=F[2],K.ops.push(z);else{F[2]&&K.ops.pop();K.trys.pop();continue}}z=l.call(b,
K)}catch(E){z=[6,E],P=0}finally{M=F=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}var K={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},M,P,F,u;return u={next:x(0),"throw":x(1),"return":x(2)},"function"===typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};h=function(b,l){for(var x in b)"default"===x||Object.prototype.hasOwnProperty.call(l,x)||N(l,b,x)};N=Object.create?function(b,l,x,C){void 0===C&&(C=x);Object.defineProperty(b,C,{enumerable:!0,
get:function(){return l[x]}})}:function(b,l,x,C){void 0===C&&(C=x);b[C]=l[x]};k=function(b){var l="function"===typeof Symbol&&Symbol.iterator,x=l&&b[l],C=0;if(x)return x.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&C>=b.length&&(b=void 0);return{value:b&&b[C++],done:!b}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.");};f=function(b,l){var x="function"===typeof Symbol&&b[Symbol.iterator];if(!x)return b;var C=x.call(b),K,M=[];try{for(;(void 0===
l||0<l--)&&!(K=C.next()).done;)M.push(K.value)}catch(F){var P={error:F}}finally{try{K&&!K.done&&(x=C["return"])&&x.call(C)}finally{if(P)throw P.error;}}return M};v=function(){for(var b=[],l=0;l<arguments.length;l++)b=b.concat(f(arguments[l]));return b};H=function(){for(var b=0,l=0,x=arguments.length;l<x;l++)b+=arguments[l].length;b=Array(b);var C=0;for(l=0;l<x;l++)for(var K=arguments[l],M=0,P=K.length;M<P;M++,C++)b[C]=K[M];return b};J=function(b,l){for(var x=0,C=l.length,K=b.length;x<C;x++,K++)b[K]=
l[x];return b};Q=function(b){return this instanceof Q?(this.v=b,this):new Q(b)};O=function(b,l,x){function C(L){u[L]&&(z[L]=function(S){return new Promise(function(R,W){1<E.push([L,S,R,W])||K(L,S)})})}function K(L,S){try{var R=u[L](S);R.value instanceof Q?Promise.resolve(R.value.v).then(M,P):F(E[0][2],R)}catch(W){F(E[0][3],W)}}function M(L){K("next",L)}function P(L){K("throw",L)}function F(L,S){(L(S),E.shift(),E.length)&&K(E[0][0],E[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var u=x.apply(b,l||[]),z,E=[];return z={},C("next"),C("throw"),C("return"),z[Symbol.asyncIterator]=function(){return this},z};g=function(b){function l(K,M){x[K]=b[K]?function(P){return(C=!C)?{value:Q(b[K](P)),done:"return"===K}:M?M(P):P}:M}var x,C;return x={},l("next"),l("throw",function(K){throw K;}),l("return"),x[Symbol.iterator]=function(){return this},x};r=function(b){function l(M){K[M]=b[M]&&function(P){return new Promise(function(F,u){P=b[M](P);x(F,u,P.done,P.value)})}}function x(M,P,F,u){Promise.resolve(u).then(function(z){M({value:z,
done:F})},P)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=b[Symbol.asyncIterator],K;return C?C.call(b):(b="function"===typeof k?k(b):b[Symbol.iterator](),K={},l("next"),l("throw"),l("return"),K[Symbol.asyncIterator]=function(){return this},K)};e=function(b,l){Object.defineProperty?Object.defineProperty(b,"raw",{value:l}):b.raw=l;return b};var c=Object.create?function(b,l){Object.defineProperty(b,"default",{enumerable:!0,value:l})}:function(b,l){b["default"]=
l};m=function(b){if(b&&b.__esModule)return b;var l={};if(null!=b)for(var x in b)"default"!==x&&Object.prototype.hasOwnProperty.call(b,x)&&N(l,b,x);c(l,b);return l};p=function(b){return b&&b.__esModule?b:{"default":b}};w=function(b,l,x,C){if("a"===x&&!C)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof l?b!==l||!C:!l.has(b))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===x?C:"a"===x?C.call(b):C?C.value:
l.get(b)};A=function(b,l,x,C,K){if("m"===C)throw new TypeError("Private method is not writable");if("a"===C&&!K)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof l?b!==l||!K:!l.has(b))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===C?K.call(b,x):K?K.value=x:l.set(b,x),x};G("__extends",D);G("__assign",I);G("__rest",B);G("__decorate",d);G("__param",q);G("__metadata",y);G("__awaiter",n);G("__generator",
t);G("__exportStar",h);G("__createBinding",N);G("__values",k);G("__read",f);G("__spread",v);G("__spreadArrays",H);G("__spreadArray",J);G("__await",Q);G("__asyncGenerator",O);G("__asyncDelegator",g);G("__asyncValues",r);G("__makeTemplateObject",e);G("__importStar",m);G("__importDefault",p);G("__classPrivateFieldGet",w);G("__classPrivateFieldSet",A)})},"arcgisonline/esriGeowConfig":function(){define(["require","exports"],function(D,I){return window.esriGeowConfig||{}})},"arcgisonline/pages/utils/signin":function(){define("require exports tslib ../../esriGeowConfig ./storage esri/IdentityManager esri/arcgis/OAuthInfo dojo/_base/kernel dojo/Deferred".split(" "),
function(D,I,B,d,q,y,n,t,h){d=B.__importDefault(d);q=B.__importDefault(q);y=B.__importDefault(y);n=B.__importDefault(n);t=B.__importDefault(t);h=B.__importDefault(h);return function(){function k(){}k.getPortalUrl=function(){var f,v=d["default"].restBaseUrl.substring(0,d["default"].restBaseUrl.indexOf("/sharing/rest")).replace("http://","https://");if(null===(f=d["default"].self)||void 0===f?0:f.portalHostname)v="https://"+d["default"].self.portalHostname;return v};k.setupOAuthInfo=function(f){var v=
{appId:k.getClientId(),portalUrl:k.getPortalUrl(),locale:t["default"].locale,popup:!1};f&&(v.forceLogin=f);f=new n["default"](v);k.esriId.registerOAuthInfos([f]);k.esriId.useSignInPage=!1};k.checkSignInStatus=function(){var f=new h["default"];k.setupOAuthInfo(!1);var v=k.getPortalUrl()+"/sharing";k.esriId.checkSignInStatus(v).then(function(H){H&&(d["default"].userInfo=B.__assign(B.__assign({},d["default"].userInfo||{}),{username:H.userId,token:H.token,credential:H}));f.resolve(H)},function(){f.resolve(null)});
return f};k.getCredential=function(f,v){var H=new h["default"];k.setupOAuthInfo(f);var J=k.getPortalUrl()+"/sharing";k.esriId.getCredential(J,v).then(function(Q){H.resolve(Q)},function(){H.resolve(null)});return H};k.isValidReturnUrl=function(f,v){return f?this.isValidPortalReturnUrl(v):this.isValidOnlineReturnUrl(v)};k.isValidOnlineReturnUrl=function(f){var v=decodeURI(f),H=k.getHostName(window.location.href);f=this.getHostName(v);var J=0===v.indexOf("http://")||0===v.indexOf("https://"),Q=J&&f?
f.lastIndexOf(".arcgis.com"):-1,O=J&&f?f.lastIndexOf(".esri.com"):-1,g=J&&f?f.lastIndexOf(H):-1;v=-1<v.indexOf("/sharing/proxy");Q=-1<Q&&Q+11-1===f.length-1;O=-1<O&&O+9-1===f.length-1;H=-1<g&&g+H.length-1===f.length-1;return J&&f&&(Q||O||H)&&!v};k.isValidPortalReturnUrl=function(f){f=decodeURI(f);var v=k.getDomainName(window.location.hostname),H=k.getDomainName(this.getHostName(f));return(0===f.indexOf("http://")||0===f.indexOf("https://"))&&H&&H===v};k.getHostName=function(f){f=f.match(/:\/\/(.[^/:]+)/i);
return null!==f&&1<f.length&&"string"===typeof f[1]&&0<f[1].length?f[1]:null};k.getDomainName=function(f){return f.substring(f.lastIndexOf(".",f.lastIndexOf(".")-1)+1)};k.getClientId=function(){try{return q["default"].getLocalStorageItem("portalAppClientId")||q["default"].getSessionStorageItem("portalAppClientId")||"arcgisonline"}catch(f){return"arcgisonline"}};k.checkForOrgUserOnOnlineBaseHostAndRedirect=function(f){var v=d["default"].isDebug,H=f.isPortal,J=f.user,Q=f.urlKey,O=f.customBaseUrl;J=
null===J||void 0===J?void 0:J.orgId;f=window.location.host===f.portalHostname;var g=!!Q,r="arcgisonline"===k.getClientId();!v&&!H&&J&&f&&g&&r&&(window.location.href=window.location.href.replace(window.location.host,Q+"."+O))};k.esriId=y["default"];return k}()})},"arcgisonline/pages/utils/storage":function(){define(["require","exports","tslib","./strings"],function(D,I,B,d){d=B.__importDefault(d);return function(){function q(){}q.setCookie=function(y,n,t,h){this.writeCookie(y,h?JSON.stringify(n):n,
t)};q.getCookie=function(y,n){var t=this.readCookie(y);return t&&n?JSON.parse(t):t};q.setLocalStorageItem=function(y,n,t){try{window.localStorage.setItem(y,t?JSON.stringify(n):n)}catch(h){}};q.getLocalStorageItem=function(y,n){try{var t=window.localStorage.getItem(y);return t&&n?JSON.parse(t):t}catch(h){}};q.removeLocalStorageItem=function(y){try{window.localStorage.removeItem(y)}catch(n){}};q.setSessionStorageItem=function(y,n,t){try{window.sessionStorage.setItem(y,t?JSON.stringify(n):n)}catch(h){}};
q.getSessionStorageItem=function(y,n){try{var t=window.sessionStorage.getItem(y);return t&&n?JSON.parse(t):t}catch(h){}};q.removeSessionStorageItem=function(y){try{window.sessionStorage.removeItem(y)}catch(n){}};q.readCookie=function(y){var n=document.cookie;y=new RegExp("(?:^|; )"+d["default"].escapeRegExp(y)+"\x3d([^;]*)");return(n=n.match(y))?decodeURIComponent(n[1]):void 0};q.writeCookie=function(y,n,t){t=t||{};var h=null===t||void 0===t?void 0:t.expires;if("number"===typeof h){var k=new Date;
h*=864E5;k.setTime(Date.now()+h);h=t.expires=k}"string"!==typeof h&&(null===h||void 0===h?0:h.toUTCString)&&(t.expires=h.toUTCString());y=y+"\x3d"+encodeURIComponent(n);for(var f in t)y+="; "+f,n=t[f],!0!==n&&(y+="\x3d"+n);document.cookie=y};return q}()})},"arcgisonline/pages/utils/strings":function(){define(["require","exports"],function(D,I){return function(){function B(){}B.isString=function(d){return(null===d||void 0===d?void 0:d.constructor)===String};B.startsWith=function(d,q){return q&&0===
(null===d||void 0===d?void 0:d.indexOf(q))};B.endsWith=function(d,q){if(d&&q){var y=d.lastIndexOf(q);return-1<y&&d.length>=q.length&&y===d.length-q.length}return!1};B.includes=function(d,q){return q&&-1<(null===d||void 0===d?void 0:d.indexOf(q))};B.isSet=function(d){return!!(0<(null===d||void 0===d?void 0:d.length))};B.areEqual=function(d,q){var y=this.isSet(d),n=this.isSet(q);return!y&&!n||y&&n&&d.trim()===q.trim()};B.replaceAll=function(d,q,y){return d.replace(new RegExp(this.escapeRegExp(q),"g"),
y)};B.escapeRegExp=function(d){return d.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")};B.escapeQuestionMarks=function(d){return d.replace(/[?\\]/g,"\\$\x26")};B.stringToArray=function(d,q,y){d=d instanceof Array?d:d.split(q);return y?d.map(function(n){return n.trim()}):d};B.isValidHex=function(d){return/[0-9A-Fa-f]{6}/g.test(d)};B.stringToHex=function(d){for(var q=0,y=0;y<d.length;y++)q=d.charCodeAt(y)+((q<<5)-q);d="#";for(y=0;3>y;y++)d+=("00"+(q>>8*y&255).toString(16)).substr(-2);return d};B.hexToRgb=
function(d){d=d.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(q,y,n,t){return y+y+n+n+t+t});return(d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d))?{r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16)}:null};B.htmlDecode=function(d){var q=document.createElement("textarea");q.innerHTML=d;return q.value};B.encodeWhitespace=function(d){return d?d.replace(/\s/g,"%20"):""};B.encodeAngleBrackets=function(d){var q;return null!==(q=null===d||void 0===d?void 0:d.replace(/</g,"\x26lt;").replace(/>/g,
"\x26gt;"))&&void 0!==q?q:""};B.decodeAngleBrackets=function(d){var q;return null!==(q=null===d||void 0===d?void 0:d.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e"))&&void 0!==q?q:""};B.escapeHTML=function(d){var q={"\x26":"\x26#x38;","\x3c":"\x26#x3C;","\x3e":"\x26#x3E;",'"':"\x26#x22;","'":"\x26#x27;","/":"\x26#x2F;"};return String(d).replace(/[&<>"'/]/gm,function(y){return q[y]})};B.shouldStripHTML=function(d){var q;if(!d)return!1;d=null!==(q=null===d||void 0===d?void 0:d.split("\x3c"))&&void 0!==
q?q:[];return 1<d.length&&d.some(function(y){return-1<y.search(/^[A-Za-z\/]+.*[>]+.*$/m)})};B.stripHTML=function(d){if(!d)return"";var q=document.createElement("div");q.innerHTML=d;return q.textContent};B.addHyperlinks=function(d){return d.replace(/(https?:\/\/[^\s]+)/g,function(q){return'\x3ca href\x3d"'+q+'" target\x3d"_blank"\x3e'+q+"\x3c/a\x3e"})};B.escapeNewlines=function(d){return null===d||void 0===d?void 0:d.replace(/(?:\r)/g,"\x26#10;").replace(/(?:\n)/g,"\x26#13;")};B.restoreNewlines=function(d){return null===
d||void 0===d?void 0:d.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")};B.insertHTMLLineBreaks=function(d){return null===d||void 0===d?void 0:d.replace(/(?:"&#10;&#13;|&#10;|&#13;|\r\n|\r|\n")/g,"\x3cbr\x3e")};B.containsHTTPProtocol=function(d){var q;return-1<(null!==(q=null===d||void 0===d?void 0:d.toLowerCase())&&void 0!==q?q:"").indexOf("http://")};return B}()})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(D,
I,B,d){D=new D;I.id=d.safeMixin(D,B);return I.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(D,I,B,d,q,y,n,t,h,k,f,v,H,J,Q,O){I=I([Q],{declaredClass:"esri.IdentityManager",
_eventMap:{"dialog-cancel":["info"]},constructor:function(g){q.mixin(this,g);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(g,r,e){this._nls||(this._nls=O.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var m=this._loginDialog,p=e&&e.error,w=e&&e.token,A=new d(function(){m.onCancel()});if(m.open)return g=Error("BUSY"),g.name="identity-manager:busy",g.code="IdentityManager.1",g.log=!!B.isDebug,A.errback(g),A;H.hide(m.errMsg_);p&&403==p.code&&w&&(n.set(m.errMsg_,"innerHTML",this._nls.forbidden),
H.show(m.errMsg_));m.dfd_=A;m.serverInfo_=r;m.resUrl_=g;m.admin_=e&&e.isAdmin;n.set(m.resLink_,{title:g,innerHTML:"("+(this.getResourceName(g)||this._nls.lblItem)+")"});n.set(m.serverLink_,{title:r.server,innerHTML:(-1!==r.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":r.server)+" "});m.txtPwd_.set("value","");m.show();return A},_createLoginDialog:function(){var g=this._nls,r=v.substitute(g,this._dialogContent);r=v.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},r);var e=new k({title:g.title,content:r,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(m){m.charOrCode===t.ENTER&&this.execute_()},execute_:function(){var m=this.txtUser_.get("value"),p=this.txtPwd_.get("value"),w=this.dfd_,A=this;if(this.form_.validate()&&m&&p){this.btnSubmit_.set("label",g.lblSigning);var N=f.id.findCredential(A.resUrl_,m),G=function(a){A.btnSubmit_.set("label",
g.lblOk);A.btnSubmit_.set("disabled",!1);H.hide(A.errMsg_);A.hide();k._DialogLevelManager.hide(A);var c=A.serverInfo_;A.dfd_=A.serverInfo_=A.generateDfd_=A.resUrl_=null;var b=N;if(a){var l=a.token;var x=v.isDefined(a.expires)?Number(a.expires):null;var C=!!a.ssl;b?(b.userId=m,b.token=l,b.expires=x,b.validity=a.validity,b.ssl=C,b.creationTime=(new Date).getTime()):b=new J({userId:m,server:c.server,token:l,expires:x,ssl:C,isAdmin:A.admin_,validity:a.validity})}w.callback(b)};N&&!N._enqueued?G():(A.btnSubmit_.set("disabled",
!0),A.generateDfd_=f.id.generateToken(this.serverInfo_,{username:m,password:p},{isAdmin:this.admin_}).addCallback(G).addErrback(function(a){A.btnSubmit_.set("disabled",!1);A.generateDfd_=null;A.btnSubmit_.set("label",g.lblOk);n.set(A.errMsg_,"innerHTML",a&&a.code?g.invalidUser:g.noAuthService);H.show(A.errMsg_)}))}},cancel_:function(){e.generateDfd_&&e.generateDfd_.cancel();var m=e.dfd_,p=e.resUrl_,w=e.serverInfo_;e.btnSubmit_.set("disabled",!1);e.dfd_=e.serverInfo_=e.generateDfd_=e.resUrl_=null;
H.hide(e.errMsg_);k._DialogLevelManager.hide(e);e.esriIdMgr_.onDialogCancel({resourceUrl:p,serverInfo:w});p=Error("ABORTED");p.name="identity-manager:user-aborted";p.code="IdentityManager.2";p.log=!!B.isDebug;m.errback(p)}});r=e.domNode;e.form_=h.byNode(D.query(".esriIdForm",r)[0]);e.txtUser_=h.byNode(D.query(".esriIdUser",r)[0]);e.txtPwd_=h.byNode(D.query(".esriIdPwd",r)[0]);e.btnSubmit_=h.byNode(D.query(".esriIdSubmit",r)[0]);e.btnCancel_=h.byNode(D.query(".esriIdCancel",r)[0]);e.resLink_=D.query(".resLink",
r)[0];e.serverLink_=D.query(".serverLink",r)[0];e.errMsg_=D.query(".esriErrorMsg",r)[0];e.connect(e.txtUser_,"onKeyPress",e.keypressed_);e.connect(e.txtPwd_,"onKeyPress",e.keypressed_);e.connect(e.btnSubmit_,"onClick",e.execute_);e.connect(e.btnCancel_,"onClick",e.onCancel);e.connect(e,"onCancel",e.cancel_);return e}});return f.IdentityManagerDialog=f.IdentityManager=I})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(D,I,B,d,q,y,n,t,h,k,f,v,H,J,Q,O,g,r,e,m,p,w,A,N,G,a,c,b,l,x,C){function K(){}var M=new q;M.resolve(!0);w=d("dijit._DialogBase"+(O("dojo-bidi")?"_NoBidi":""),[N,a,c,G],{templateString:C,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:w.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(z){this._set("draggable",z)},maxRatio:.9,
closable:!0,_setClosableAttr:function(z){this.closeButtonNode.style.display=z?"":"none";this._set("closable",z)},postMixInProperties:function(){var z=f.getLocalization("dijit","common");H.mixin(this,z);this.inherited(arguments)},postCreate:function(){h.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);B.after(this,"onExecute",H.hitch(this,"hide"),!0);B.after(this,"onCancel",H.hitch(this,"hide"),!0);J(this.closeButtonNode,
g.press,function(z){z.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&F.isTop(this)&&(this._getFocusItems(),p.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();p.focus(this._firstFocusItem)},_endDrag:function(){var z=t.position(this.domNode),E=r.getBox(this.ownerDocument);z.y=Math.min(Math.max(z.y,0),E.h-z.h);z.x=Math.min(Math.max(z.x,0),E.w-z.w);this._relativePosition=z;this._position()},_setup:function(){var z=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==O("ie")?m:e)(z,{handle:this.titleBar}),B.after(this._moveable,"onMoveStop",H.hitch(this,"_endDrag"),!0)):n.add(z,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":I.map(this["class"].split(/\s/),function(E){return E+"_underlay"}).join(" "),_onKeyDown:H.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!n.contains(this.ownerDocumentBody,"dojoMove")){var z=
this.domNode,E=r.getBox(this.ownerDocument),L=this._relativePosition,S=t.position(z);h.set(z,{left:Math.floor(E.l+(L?Math.min(L.x,E.w-S.w):(E.w-S.w)/2))+"px",top:Math.floor(E.t+(L?Math.min(L.y,E.h-S.h):(E.h-S.h)/2))+"px"})}},_onKey:function(z){if(z.keyCode==v.TAB){this._getFocusItems();var E=z.target;this._firstFocusItem==this._lastFocusItem?(z.stopPropagation(),z.preventDefault()):E==this._firstFocusItem&&z.shiftKey?(p.focus(this._lastFocusItem),z.stopPropagation(),z.preventDefault()):E!=this._lastFocusItem||
z.shiftKey||(p.focus(this._firstFocusItem),z.stopPropagation(),z.preventDefault())}else this.closable&&z.keyCode==v.ESCAPE&&(this.onCancel(),z.stopPropagation(),z.preventDefault())},show:function(){if(this.open)return M.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),F.hide(this));var z=r.get(this.ownerDocument);this._modalconnects.push(J(z,"scroll",H.hitch(this,"resize",null)));this._modalconnects.push(J(this.domNode,
"keydown",H.hitch(this,"_onKey")));h.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new q(H.hitch(this,function(){E.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,K);z=this._fadeInDeferred.promise;var E=k.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:H.hitch(this,function(){F.show(this,this.underlayAttrs)}),onEnd:H.hitch(this,function(){this.autofocus&&F.isTop(this)&&(this._getFocusItems(),
p.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return z},hide:function(){if(!this._alreadyInitialized||!this.open)return M.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new q(H.hitch(this,function(){E.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,K);this._fadeOutDeferred.then(H.hitch(this,"onHide"));var z=this._fadeOutDeferred.promise;var E=k.fadeOut({node:this.domNode,duration:this.duration,
onEnd:H.hitch(this,function(){this.domNode.style.display="none";F.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var L;L=this._modalconnects.pop();)L.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return z},resize:function(z){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!z){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),I.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(R){R&&h.set(R,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var E=r.getBox(this.ownerDocument);E.w*=this.maxRatio;E.h*=this.maxRatio;var L=t.position(this.domNode);this._shrunk=!1;L.w>=E.w&&(z={w:E.w},t.setMarginBox(this.domNode,z),L=t.position(this.domNode),this._shrunk=
!0);L.h>=E.h&&(z||(z={w:L.w}),z.h=E.h,this._shrunk=!0);z&&(z.w||(z.w=L.w),z.h||(z.h=L.h))}if(z){t.setMarginBox(this.domNode,z);E=[];this.titleBar&&E.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&E.push({domNode:this.actionBarNode,region:"bottom"});L={domNode:this.containerNode,region:"center"};E.push(L);var S=x.marginBox2contentBox(this.domNode,z);x.layoutChildren(this.domNode,S,E);this._singleChild?(E=x.marginBox2contentBox(this.containerNode,L),this._singleChild.resize({w:E.w,h:E.h})):
(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();O("touch")||z||this._position()}},_layoutChildren:function(){I.forEach(this.getChildren(),function(z){z.resize&&z.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var z;z=this._modalconnects.pop();)z.remove();F.hide(this);this.inherited(arguments)}});O("dojo-bidi")&&(w=d("dijit._DialogBase",
w,{_setTitleAttr:function(z){this._set("title",z);this.titleNode.innerHTML=z;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(z){this._created&&this.textDir!=z&&(this._set("textDir",z),this.set("title",this.title))}}));var P=d("dijit.Dialog",[l,w],{});P._DialogBase=w;var F=P._DialogLevelManager={_beginZIndex:950,show:function(z,E){u[u.length-1].focus=p.curNode;var L=u[u.length-1].dialog?u[u.length-1].zIndex+2:P._DialogLevelManager._beginZIndex;h.set(z.domNode,"zIndex",L);b.show(E,L-1);
u.push({dialog:z,underlayAttrs:E,zIndex:L})},hide:function(z){if(u[u.length-1].dialog==z){u.pop();var E=u[u.length-1];1==u.length?b.hide():b.show(E.underlayAttrs,E.zIndex-1);if(z.refocus&&(z=E.focus,!E.dialog||z&&y.isDescendant(z,E.dialog.domNode)||(E.dialog._getFocusItems(),z=E.dialog._firstFocusItem),z))try{z.focus()}catch(L){}}else E=I.indexOf(I.map(u,function(L){return L.dialog}),z),-1!=E&&u.splice(E,1)},isTop:function(z){return u[u.length-1].dialog==z}},u=P._dialogStack=[{dialog:null,focus:null,
underlayAttrs:null}];p.watch("curNode",function(z,E,L){z=u[u.length-1].dialog;if(L&&z&&!z._fadeOutDeferred&&L.ownerDocument==z.ownerDocument){do if(L==z.domNode||n.contains(L,"dijitPopup"))return;while(L=L.parentNode);z.focus()}});O("dijit-legacy-requires")&&Q(0,function(){D(["dijit/TooltipDialog"])});return P})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(D,I){var B=I.prototype.onMove;return D("dojo.dnd.TimedMoveable",I,{timeout:40,constructor:function(d,
q){q||(q={});q.timeout&&"number"==typeof q.timeout&&0<=q.timeout&&(this.timeout=q.timeout)},onMoveStop:function(d){d._timer&&(clearTimeout(d._timer),B.call(this,d,d._leftTop));I.prototype.onMoveStop.apply(this,arguments)},onMove:function(d,q){d._leftTop=q;if(!d._timer){var y=this;d._timer=setTimeout(function(){d._timer=null;B.call(y,d,d._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(D,I,B,d,q,y){return I("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(n){var t=[];D.forEach(n||this.getChildren(),function(h){"value"in h?t.push(h):t=t.concat(this._getDescendantFormWidgets(h.getChildren()))},this);return t},reset:function(){D.forEach(this._getDescendantFormWidgets(),function(n){n.reset&&n.reset()})},validate:function(){var n=!1;return D.every(D.map(this._getDescendantFormWidgets(),function(t){t._hasBeenBlurred=!0;var h=t.disabled||!t.validate||
t.validate();h||n||(y.scrollIntoView(t.containerNode||t.domNode),t.focus(),n=!0);return h}),function(t){return t})},setValues:function(n){B.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",n)},_setValueAttr:function(n){var t={};D.forEach(this._getDescendantFormWidgets(),function(v){v.name&&(t[v.name]||(t[v.name]=[])).push(v)});for(var h in t)if(t.hasOwnProperty(h)){var k=t[h],f=d.getObject(h,!1,n);void 0!==f&&(f=[].concat(f),
"boolean"==typeof k[0].checked?D.forEach(k,function(v){v.set("value",-1!=D.indexOf(f,v._get("value")))}):k[0].multiple?k[0].set("value",f):D.forEach(k,function(v,H){v.set("value",f[H])}))}},getValues:function(){B.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var n={};D.forEach(this._getDescendantFormWidgets(),function(t){var h=t.name;if(h&&!t.disabled){var k=t.get("value");"boolean"==typeof t.checked?
/Radio/.test(t.declaredClass)?!1!==k?d.setObject(h,k,n):(k=d.getObject(h,!1,n),void 0===k&&d.setObject(h,null,n)):(t=d.getObject(h,!1,n),t||(t=[],d.setObject(h,t,n)),!1!==k&&t.push(k)):(t=d.getObject(h,!1,n),"undefined"!=typeof t?d.isArray(t)?t.push(k):d.setObject(h,[t,k],n):d.setObject(h,k,n))}});return n},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var n=D.map(this._descendants,function(t){return t.get("state")||""});return 0<=D.indexOf(n,"Error")?
"Error":0<=D.indexOf(n,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(n){this._descendants=this._getDescendantFormWidgets();D.forEach(this._descendants,function(t){t._started||t.startup()});n||this._onChildChange()},_onChildChange:function(n){n&&"state"!=n&&"disabled"!=n||this._set("state",this._getState());n&&"value"!=n&&"disabled"!=n&&"checked"!=n||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var n=this;this.own(q(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(t){t.target!=n.domNode&&n._onChildChange(t.type.replace("attrmodified-",""))}));this.watch("state",function(t,h,k){this.onValidStateChange(""==k)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(D,I){return D("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var B=I._getTabNavigable(this.domNode);this._firstFocusItem=B.lowest||B.first||this.closeButtonNode||this.domNode;this._lastFocusItem=B.last||B.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(D,I,B,d,q,y,n,t,h,k,f,v){var H=D("dijit.DialogUnderlay",[t,h],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(J){d.set(this.node,"id",J+"_underlay");this._set("dialogId",J)},_setClassAttr:function(J){this.node.className="dijitDialogUnderlay "+J;this._set("class",J)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(y(this.domNode,"keydown",I.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var J=this.node.style,Q=this.domNode.style;Q.display="none";var O=n.getBox(this.ownerDocument);Q.top=O.t+"px";Q.left=O.l+"px";J.width=O.w+"px";J.height=O.h+"px";Q.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new k(this.domNode);var J=n.get(this.ownerDocument);this._modalConnects=[f.on("resize",I.hitch(this,"layout")),y(J,"scroll",
I.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});H.show=function(J,Q){var O=H._singleton;!O||O._destroyed?O=v._underlay=H._singleton=new H(J):J&&O.set(J);q.set(O.domNode,"zIndex",Q);O.open||O.show()};H.hide=function(){var J=
H._singleton;J&&!J._destroyed&&J.hide()};return H})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(D,I,B,d,q,y,n,t,h,k,f,v,H,J,Q,O){return h("dijit.layout.ContentPane",[B,d,q],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:D._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(g,
r,e){var m=new e(g,r);return!m.href&&m._contentSetter&&m._contentSetter.parseDeferred&&!m._contentSetter.parseDeferred.isFulfilled()?m._contentSetter.parseDeferred.then(function(){return m}):m},create:function(g,r){if(!(g&&g.template||!r||"href"in g||"content"in g)){r=f.byId(r);for(var e=r.ownerDocument.createDocumentFragment();r.firstChild;)e.appendChild(r.firstChild);g=I.delegate(g,{content:e})}this.inherited(arguments,[g,r])},postMixInProperties:function(){this.inherited(arguments);var g=Q.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=y.substitute(this.loadingMessage,g);this.errorMessage=y.substitute(this.errorMessage,g)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&t.forEach(this._contentSetter.parseResults,function(g){g._started||g._destroyed||!I.isFunction(g.startup)||(g.startup(),g._started=!0)},this)},_startChildren:function(){t.forEach(this.getChildren(),
function(g){g._started||g._destroyed||!I.isFunction(g.startup)||(g.startup(),g._started=!0)});this._contentSetter&&t.forEach(this._contentSetter.parseResults,function(g){g._started||g._destroyed||!I.isFunction(g.startup)||(g.startup(),g._started=!0)},this)},setHref:function(g){D.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",g)},_setHrefAttr:function(g){this.cancel();this.onLoadDeferred=new k(I.hitch(this,"cancel"));this.onLoadDeferred.then(I.hitch(this,
"onLoad"));this._set("href",g);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(g){D.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",g)},_setContentAttr:function(g){this._set("href","");this.cancel();this.onLoadDeferred=new k(I.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(I.hitch(this,"onLoad"));this._setContent(g||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(g){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new k(I.hitch(this,"cancel"));this.onLoadDeferred.then(I.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var g=this,r={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};I.isObject(this.ioArgs)&&I.mixin(r,this.ioArgs);var e=this._xhrDfd=(this.ioMethod||J.get)(r),m;e.then(function(p){m=p;try{return g._isDownloaded=!0,g._setContent(p,!1)}catch(w){g._onError("Content",
w)}},function(p){e.canceled||g._onError("Download",p);delete g._xhrDfd;return p}).then(function(){g.onDownloadEnd();delete g._xhrDfd;return m});delete this._hrefChanged},_onLoadHandler:function(g){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(g)}catch(r){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(g){}},destroyDescendants:function(g){this.isLoaded&&this._onUnloadHandler();var r=this._contentSetter;t.forEach(this.getChildren(),function(e){e.destroyRecursive?
e.destroyRecursive(g):e.destroy&&e.destroy(g);e._destroyed=!0});r&&(t.forEach(r.parseResults,function(e){e._destroyed||(e.destroyRecursive?e.destroyRecursive(g):e.destroy&&e.destroy(g),e._destroyed=!0)}),delete r.parseResults);g||H.empty(this.containerNode);delete this._singleChild},_setContent:function(g,r){g=this.preprocessContent(g);this.destroyDescendants();var e=this._contentSetter;e&&e instanceof n._ContentSetter||(e=this._contentSetter=new n._ContentSetter({node:this.containerNode,_onError:I.hitch(this,
this._onError),onContentError:I.hitch(this,function(w){w=this.onContentError(w);try{this.containerNode.innerHTML=w}catch(A){}})}));var m=I.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!g.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});m=e.set(I.isObject(g)&&g.domNode?g.domNode:g,m);var p=this;return O(m&&m.then?m:e.parseDeferred,function(){delete p._contentSetterParams;
r||(p._started&&(p._startChildren(),p._scheduleLayout()),p._onLoadHandler(g))})},preprocessContent:function(g){return g},_onError:function(g,r,e){this.onLoadDeferred.reject(r);g=this["on"+g+"Error"].call(this,r);e||g&&this._setContent(g,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(D,I,B,d,q,y,n,t,h,k){return I("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var f=this.getParent();this._childOfLayoutWidget=f&&f.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(h.on("resize",y.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var f=[],v=!1;n("\x3e *",this.containerNode).some(function(H){var J=
t.byNode(H);J&&J.resize?f.push(J):!/script|link|style/i.test(H.nodeName)&&H.offsetHeight&&(v=!0)});this._singleChild=1!=f.length||v?null:f[0];B.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(f,v){this._resizeCalled=!0;this._scheduleLayout(f,v)},_scheduleLayout:function(f,v){this._isShown()?this._layout(f,v):(this._needLayout=!0,this._changeSize=f,this._resultSize=v)},_layout:function(f,v){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
f&&d.setMarginBox(this.domNode,f);var H=this.containerNode;if(H===this.domNode){var J=v||{};y.mixin(J,f||{});"h"in J&&"w"in J||(J=y.mixin(d.getMarginBox(H),J));this._contentBox=k.marginBox2contentBox(H,J)}else this._contentBox=d.getContentBox(H);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var f=this._contentBox||d.getContentBox(this.containerNode);this._singleChild.resize({w:f.w,h:f.h})}else{f=this.getChildren();for(var v,
H=0;v=f[H++];)v.resize&&v.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var f=this.domNode,v=this.domNode.parentNode;return"none"!=f.style.display&&"hidden"!=f.style.visibility&&!B.contains(f,"dijitHidden")&&v&&v.style&&"none"!=v.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(D,I,B,d,q){function y(h){return h.substring(0,1).toUpperCase()+h.substring(1)}function n(h,k){var f=h.resize?h.resize(k):B.setMarginBox(h.domNode,k);f?q.mixin(h,f):(q.mixin(h,B.getMarginBox(h.domNode)),q.mixin(h,k))}var t={marginBox2contentBox:function(h,k){var f=d.getComputedStyle(h),v=B.getMarginExtents(h,f),H=B.getPadBorderExtents(h,f);return{l:d.toPixelValue(h,f.paddingLeft),t:d.toPixelValue(h,f.paddingTop),w:k.w-
(v.w+H.w),h:k.h-(v.h+H.h)}},layoutChildren:function(h,k,f,v,H){k=q.mixin({},k);I.add(h,"dijitLayoutContainer");f=D.filter(f,function(J){return"center"!=J.region&&"client"!=J.layoutAlign}).concat(D.filter(f,function(J){return"center"==J.region||"client"==J.layoutAlign}));D.forEach(f,function(J){var Q=J.domNode,O=J.region||J.layoutAlign;if(!O)throw Error("No region setting for "+J.id);var g=Q.style;g.left=k.l+"px";g.top=k.t+"px";g.position="absolute";I.add(Q,"dijitAlign"+y(O));Q={};v&&v==J.id&&(Q["top"==
J.region||"bottom"==J.region?"h":"w"]=H);"leading"==O&&(O=J.isLeftToRight()?"left":"right");"trailing"==O&&(O=J.isLeftToRight()?"right":"left");"top"==O||"bottom"==O?(Q.w=k.w,n(J,Q),k.h-=J.h,"top"==O?k.t+=J.h:g.top=k.t+k.h+"px"):"left"==O||"right"==O?(Q.h=k.h,n(J,Q),k.w-=J.w,"left"==O?k.l+=J.w:g.left=k.l+k.w+"px"):"client"!=O&&"center"!=O||n(J,k)})}};q.setObject("dijit.layout.utils",t);return t})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(D,I,B,d,q,y,n){var t=0,h={_secureForInnerHtml:function(k){return k.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:y.empty,_setNodeContent:function(k,f){y.empty(k);if(f)if("number"==typeof f&&(f=f.toString()),"string"==typeof f&&(f=y.toDom(f,k.ownerDocument)),!f.nodeType&&I.isArrayLike(f))for(var v=f.length,H=0;H<f.length;H=v==f.length?H+1:0)y.place(f[H],k,"last");else y.place(f,k,"last");return k},_ContentSetter:d("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:D._scopeName,startup:!0,constructor:function(k,f){I.mixin(this,k||{});f=this.node=q.byId(this.node||f);this.id||(this.id=["Setter",f?f.id||f.tagName:"",t++].join("_"))},set:function(k,f){void 0!==k&&(this.content=k);"number"==typeof k&&(k=k.toString());f&&this._mixin(f);this.onBegin();this.setContent();var v=this.onEnd();return v&&v.then?v:this.node},setContent:function(){var k=this.node;if(!k)throw Error(this.declaredClass+
": setContent given no node");try{k=h._setNodeContent(k,this.content)}catch(v){var f=this.onContentError(v);try{k.innerHTML=f}catch(H){}}this.node=k},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(B.forEach(this.parseResults,function(k){k.destroy&&k.destroy()}),delete this.parseResults);y.empty(this.node)},onBegin:function(){var k=this.content;if(I.isString(k)&&(this.cleanContent&&
(k=h._secureForInnerHtml(k)),this.extractContent)){var f=k.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);f&&(k=f[1])}this.empty();this.content=k;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(k){return"Error occurred setting content: "+k},onExecError:function(k){return"Error occurred executing scripts: "+k},_mixin:function(k){var f=
{},v;for(v in k)v in f||(this[v]=k[v])},_parse:function(){var k=this.node;try{var f={};B.forEach(["dir","lang","textDir"],function(H){this[H]&&(f[H]=this[H])},this);var v=this;this.parseDeferred=n.parse({rootNode:k,noStart:!this.startup,inherited:f,scope:this.parserScope}).then(function(H){return v.parseResults=H},function(H){v._onError("Content",H,"Error parsing in _ContentSetter#"+v.id)})}catch(H){this._onError("Content",H,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(k,f,v){k=
this["on"+k+"Error"].call(this,f);v||k&&h._setNodeContent(this.node,k,!0)}}),set:function(k,f,v){void 0==f&&(f="");"number"==typeof f&&(f=f.toString());return v?(new h._ContentSetter(I.mixin(v,{content:f,node:k}))).set():h._setNodeContent(k,f,!0)}};I.setObject("dojo.html",h);return h})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(D,I,B,d,q,y,n,t,h,k,f,v,H,J,Q,O){function g(w){return eval("("+w+")")}function r(w){var A=w._nameCaseMap,N=w.prototype;if(!A||A._extendCnt<m){A=w._nameCaseMap={};for(var G in N)"_"!==G.charAt(0)&&(A[G.toLowerCase()]=G);A._extendCnt=m}return A}function e(w,A){A||(A=D);var N=A._dojoParserCtorMap||(A._dojoParserCtorMap={}),G=w.join();if(!N[G]){for(var a=[],c=0,b=w.length;c<b;c++){var l=w[c];a[a.length]=N[l]=N[l]||B.getObject(l)||~l.indexOf("/")&&A(l)}c=a.shift();N[G]=a.length?c.createSubclass?
c.createSubclass(a):c.extend.apply(c,a):c}return N[G]}new Date("X");var m=0;h.after(B,"extend",function(){m++},!0);var p={_clearCache:function(){m++;_ctorMap={}},_functionFromScript:function(w,A){var N="",G="",a=w.getAttribute(A+"args")||w.getAttribute("args"),c=w.getAttribute("with");a=(a||"").split(/\s*,\s*/);c&&c.length&&d.forEach(c.split(/\s*,\s*/),function(b){N+="with("+b+"){";G+="}"});return new Function(a,N+w.innerHTML+G)},instantiate:function(w,A,N){A=A||{};N=N||{};var G=(N.scope||I._scopeName)+
"Type",a="data-"+(N.scope||I._scopeName)+"-",c=a+"type",b=a+"mixins",l=[];d.forEach(w,function(x){var C=G in A?A[G]:x.getAttribute(c)||x.getAttribute(G);if(C){var K=x.getAttribute(b);C=K?[C].concat(K.split(/\s*,\s*/)):[C];l.push({node:x,types:C})}});return this._instantiate(l,A,N)},_instantiate:function(w,A,N,G){function a(c){A._started||N.noStart||d.forEach(c,function(b){"function"!==typeof b.startup||b._started||b.startup()});return c}w=d.map(w,function(c){var b=c.ctor||e(c.types,N.contextRequire);
if(!b)throw Error("Unable to resolve constructor for: '"+c.types.join()+"'");return this.construct(b,c.node,A,N,c.scripts,c.inherited)},this);return G?k(w).then(a):a(w)},construct:function(w,A,N,G,a,c){function b(aa){u&&B.setObject(u,aa);for(P=0;P<S.length;P++)h[S[P].advice||"after"](aa,S[P].method,B.hitch(aa,S[P].func),!0);for(P=0;P<R.length;P++)R[P].call(aa);for(P=0;P<W.length;P++)aa.watch(W[P].prop,W[P].func);for(P=0;P<U.length;P++)Q(aa,U[P].event,U[P].func);return aa}var l=w&&w.prototype;G=G||
{};var x={};G.defaults&&B.mixin(x,G.defaults);c&&B.mixin(x,c);if(H("dom-attributes-explicit"))var C=A.attributes;else H("dom-attributes-specified-flag")?C=d.filter(A.attributes,function(aa){return aa.specified}):(c=(/^input$|^img$/i.test(A.nodeName)?A:A.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),C=d.map(c.split(/\s+/),function(aa){var da=aa.toLowerCase();return{name:aa,value:"LI"==A.nodeName&&"value"==aa||"enctype"==
da?A.getAttribute(da):A.getAttributeNode(da).value}}));var K=G.scope||I._scopeName;c="data-"+K+"-";var M={};"dojo"!==K&&(M[c+"props"]="data-dojo-props",M[c+"type"]="data-dojo-type",M[c+"mixins"]="data-dojo-mixins",M[K+"type"]="dojotype",M[c+"id"]="data-dojo-id");var P=0,F;K=[];for(var u,z;F=C[P++];){var E=F.name,L=E.toLowerCase();F=F.value;switch(M[L]||L){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":z=F;break;case "data-dojo-id":case "jsid":u=F;break;
case "data-dojo-attach-point":case "dojoattachpoint":x.dojoAttachPoint=F;break;case "data-dojo-attach-event":case "dojoattachevent":x.dojoAttachEvent=F;break;case "class":x["class"]=A.className;break;case "style":x.style=A.style&&A.style.cssText;break;default:if(E in l||(E=r(w)[L]||E),E in l)switch(typeof l[E]){case "string":x[E]=F;break;case "number":x[E]=F.length?Number(F):NaN;break;case "boolean":x[E]="false"!=F.toLowerCase();break;case "function":""===F||-1!=F.search(/[^\w\.]+/i)?x[E]=new Function(F):
x[E]=B.getObject(F,!1)||new Function(F);K.push(E);break;default:L=l[E],x[E]=L&&"length"in L?F?F.split(/\s*,\s*/):[]:L instanceof Date?""==F?new Date(""):"now"==F?new Date:f.fromISOString(F):L instanceof t?I.baseUrl+F:g(F)}else x[E]=F}}for(C=0;C<K.length;C++)M=K[C].toLowerCase(),A.removeAttribute(M),A[M]=null;if(z)try{z=g.call(G.propsThis,"{"+z+"}"),B.mixin(x,z)}catch(aa){throw Error(aa.toString()+" in data-dojo-props\x3d'"+z+"'");}B.mixin(x,N);a||(a=w&&(w._noScript||l._noScript)?[]:J("\x3e script[type^\x3d'dojo/']",
A));var S=[],R=[],W=[],U=[];if(a)for(P=0;P<a.length;P++)M=a[P],A.removeChild(M),N=M.getAttribute(c+"event")||M.getAttribute("event"),G=M.getAttribute(c+"prop"),z=M.getAttribute(c+"method"),K=M.getAttribute(c+"advice"),C=M.getAttribute("type"),M=this._functionFromScript(M,c),N?"dojo/connect"==C?S.push({method:N,func:M}):"dojo/on"==C?U.push({event:N,func:M}):x[N]=M:"dojo/aspect"==C?S.push({method:z,advice:K,func:M}):"dojo/watch"==C?W.push({prop:G,func:M}):R.push(M);w=(a=w.markupFactory||l.markupFactory)?
a(x,A,w):new w(x,A);return w.then?w.then(b):b(w)},scan:function(w,A){function N(S){if(!S.inherited){S.inherited={};var R=S.node,W=N(S.parent);R={dir:R.getAttribute("dir")||W.dir,lang:R.getAttribute("lang")||W.lang,textDir:R.getAttribute(C)||W.textDir};for(var U in R)R[U]&&(S.inherited[U]=R[U])}return S.inherited}var G=[],a=[],c={},b=(A.scope||I._scopeName)+"Type",l="data-"+(A.scope||I._scopeName)+"-",x=l+"type",C=l+"textdir";l+="mixins";var K=w.firstChild,M=A.inherited;if(!M){M=function U(R,W){return R.getAttribute&&
R.getAttribute(W)||R.parentNode&&U(R.parentNode,W)};M={dir:M(w,"dir"),lang:M(w,"lang"),textDir:M(w,C)};for(var P in M)M[P]||delete M[P]}M={inherited:M};for(var F,u;;)if(K)if(1!=K.nodeType)K=K.nextSibling;else if(F&&"script"==K.nodeName.toLowerCase())(z=K.getAttribute("type"))&&/^dojo\/\w/i.test(z)&&F.push(K),K=K.nextSibling;else if(u)K=K.nextSibling;else{var z=K.getAttribute(x)||K.getAttribute(b);P=K.firstChild;if(z||P&&(3!=P.nodeType||P.nextSibling)){u=null;if(z){var E=K.getAttribute(l);F=E?[z].concat(E.split(/\s*,\s*/)):
[z];try{u=e(F,A.contextRequire)}catch(S){}u||d.forEach(F,function(S){~S.indexOf("/")&&!c[S]&&(c[S]=!0,a[a.length]=S)});E=u&&!u.prototype._noScript?[]:null;M={types:F,ctor:u,parent:M,node:K,scripts:E};M.inherited=N(M);G.push(M)}else M={node:K,scripts:F,parent:M};F=E;u=K.stopParser||u&&u.prototype.stopParser&&!A.template;K=P}else K=K.nextSibling}else{if(!M||!M.node)break;K=M.node.nextSibling;u=!1;M=M.parent;F=M.scripts}var L=new v;a.length?(A.contextRequire||D)(a,function(){L.resolve(d.filter(G,function(S){if(!S.ctor)try{S.ctor=
e(S.types,A.contextRequire)}catch(U){}for(var R=S.parent;R&&!R.types;)R=R.parent;var W=S.ctor&&S.ctor.prototype;S.instantiateChildren=!(W&&W.stopParser&&!A.template);S.instantiate=!R||R.instantiate&&R.instantiateChildren;return S.instantiate}))}):L.resolve(G);return L.promise},_require:function(w,A){var N=g("{"+w.innerHTML+"}"),G=[],a=[],c=new v,b=A&&A.contextRequire||D,l;for(l in N)G.push(l),a.push(N[l]);b(a,function(){for(var x=0;x<G.length;x++)B.setObject(G[x],arguments[x]);c.resolve(arguments)});
return c.promise},_scanAmd:function(w,A){var N=new v,G=N.promise;N.resolve(!0);var a=this;J("script[type\x3d'dojo/require']",w).forEach(function(c){G=G.then(function(){return a._require(c,A)});c.parentNode.removeChild(c)});return G},parse:function(w,A){!w||"string"==typeof w||"nodeType"in w||(A=w,w=A.rootNode);var N=w?y.byId(w):n.body();A=A||{};var G=A.template?{template:!0}:{},a=[],c=this,b=this._scanAmd(N,A).then(function(){return c.scan(N,A)}).then(function(l){return c._instantiate(l,G,A,!0)}).then(function(l){return a=
a.concat(l)}).otherwise(function(l){throw l;});B.mixin(a,b);return a}};I.parser=p;q.parseOnLoad&&O(100,p,"parse");return p})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(D,I,B,d){var q=D.some;return function(y){var n,t;I.isArray(y)?t=y:y&&"object"===typeof y&&(n=y);var h=[];if(n){t=[];for(var k in n)Object.hasOwnProperty.call(n,k)&&(h.push(k),t.push(n[k]));var f={}}else t&&(f=[]);if(!t||!t.length)return(new B).resolve(f);var v=new B;v.promise.always(function(){f=
h=null});var H=t.length;q(t,function(J,Q){n||h.push(Q);d(J,function(O){v.isFulfilled()||(f[h[Q]]=O,0===--H&&v.resolve(f))},v.reject);return v.isFulfilled()});return v.promise}})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(D,I,B){D=function(){return this}();var d=D.location,q=d.pathname;B=d.protocol;d={version:"3.41",_appBaseUrl:B+"//"+d.host+q.substring(0,q.lastIndexOf(q.split("/")[q.split("/").length-1]))};I.noGlobals||(D.esri=d);(d.dijit=d.dijit||
{})._arcgisUrl=("http:"===B||"https:"===B?B:"http:")+"//www.arcgis.com/sharing/rest";return d})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(D,I,B,d,q,y,n,t,h){function k(r,e,m,p){(e=e&&e[r])?e={formatType:e.formatType,options:e}:p&&-1!==D.indexOf(p.properties||"",r)?e={formatType:p.formatter||"DateString",options:null}:m&&-1!==D.indexOf(m.properties||"",r)&&(e={formatType:m.formatter||
"NumberFormat",options:null});return e}function f(r,e,m){return[d.isString(r)?r.split(""):r,e||B.global,d.isString(m)?new Function("item","index","array",m):m]}function v(r){return void 0!==r&&null!==r}function H(r){return v(r)?r:""}function J(r,e,m,p){var w=m.match(/([^\(]+)(\([^\)]+\))?/i);m=d.trim(w[1]);var A=w[2]?d.trim(w[2]):null;w=e[r];p=p||(A?I.fromJson(A.replace(/^\(/,"({").replace(/\)$/,"})")):{});A=p.utcOffset;if(-1===D.indexOf(O,m))m=d.getObject(m),d.isFunction(m)&&(w=m(w,r,e,p));else if("number"===
typeof w||"string"===typeof w&&w&&!isNaN(Number(w)))switch(w=Number(w),m){case "NumberFormat":return n.format(w,p);case "DateString":r=new Date(w);if(p.local||p.systemLocale)return p.systemLocale?r.toLocaleDateString()+(p.hideTime?"":" "+r.toLocaleTimeString()):r.toDateString()+(p.hideTime?"":" "+r.toTimeString());r=r.toUTCString();p.hideTime&&(r=r.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return r;case "DateFormat":return r=new Date(w),v(A)&&(r=q.add(r,"minute",r.getTimezoneOffset()-A)),t.format(r,
p)}return H(w)}function Q(r,e){var m;if(e)for(m in r)r.hasOwnProperty(m)&&(void 0===r[m]?delete r[m]:r[m]instanceof Object&&Q(r[m],!0));else for(m in r)r.hasOwnProperty(m)&&void 0===r[m]&&delete r[m];return r}var O=["NumberFormat","DateString","DateFormat"],g=/<\/?[^>]+>/g;y={valueOf:function(r,e){for(var m in r)if(r[m]==e)return m;return null},stripTags:function(r){if(r){var e=typeof r;if("string"===e)r=r.replace(g,"");else if("object"===e)for(var m in r)(e=r[m])&&"string"===typeof e&&(e=e.replace(g,
"")),r[m]=e}return r},substitute:function(r,e,m){if(v(m))if(d.isObject(m)){var p=m.first;var w=m.dateFormat;var A=m.numberFormat;var N=m.format}else p=m;if(e&&"${*}"!==e)return d.replace(e,d.hitch({obj:r},function(a,c){var b=c.split(":"),l;return 1<b.length?(c=b[0],b.shift(),(l=N&&N[b[0]])?b=l.formatType:(b=b.join(":"),l=null),J(c,this.obj,b,l)):(l=k(c,N,A,w))?J(c,this.obj,l.formatType,l.options):H(this.obj[c])}),/\$\{([^\}]+)\}/g);e=[];for(var G in r)if(m=(m=k(G,N,A,w))?J(G,r,m.formatType,m.options):
r[G],e.push(G+" \x3d "+H(m)+"\x3cbr/\x3e"),p)break;return e.join("")},filter:function(r,e,m){e=f(r,m,e);m={};var p;r=e[0];for(p in r)e[2].call(e[p],r[p],p,r)&&(m[p]=r[p]);return m},startsWith:function(r,e,m){m=m||0;return r.indexOf(e,m)===m},endsWith:function(r,e,m){if("number"!==typeof m||!isFinite(m)||Math.floor(m)!==m||m>r.length)m=r.length;m-=e.length;r=r.indexOf(e,m);return-1!==r&&r===m},isDefined:v,fixJson:Q,isObject:function(r){return r&&"object"===typeof r},isString:function(r){return"string"===
typeof r},mixin:function(r,e){for(var m in e)e.hasOwnProperty(m)&&(r[m]=e[m]);return r},clone2DArray:function(r){if(r=r?r.slice(0):null){var e,m=r.length;for(e=0;e<m;e++)r[e]=r[e]?r[e].slice(0):null}return r},clone3DArray:function(r){if(r=r?r.slice(0):null){var e,m=r.length;for(e=0;e<m;e++){r[e]=r[e]?r[e].slice(0):null;var p=r[e];if(p){var w,A=p.length;for(w=0;w<A;w++)p[w]=p[w]?p[w].slice(0):null}}}return r}};d.mixin(h,y);h._isDefined=v;h._getParts=f;h._sanitize=Q;return y})},"esri/domUtils":function(){define(["./kernel",
"dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(D,I,B,d,q){var y={show:function(n){if(n=y.getNode(n))n.style.display="block"},getNode:function(n){return n&&n.domNode||n},hide:function(n){if(n=y.getNode(n))n.style.display="none"},toggle:function(n){if(n=y.getNode(n))n.style.display="none"===n.style.display?"block":"none"},documentBox:8>=q("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(n){if(n=
this.getNode(n)){var t=0,h=0,k=0,f=0,v=0,H=0;return[I.connect(n,"ontouchstart",function(J){t=J.touches[0].screenX;h=J.touches[0].screenY;k=n.scrollWidth;f=n.scrollHeight;v=n.clientWidth;H=n.clientHeight}),I.connect(n,"ontouchmove",function(J){J.preventDefault();var Q=n.firstChild;Q instanceof Text&&(Q=n.childNodes[1]);var O=Q._currentX||0,g=Q._currentY||0;O+=J.touches[0].screenX-t;0<O?O=0:0>O&&Math.abs(O)+v>k&&(O=-1*(k-v));Q._currentX=O;g+=J.touches[0].screenY-h;0<g?g=0:0>g&&Math.abs(g)+H>f&&(g=-1*
(f-H));Q._currentY=g;d.set(Q,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+O+"px, "+g+"px)"});t=J.touches[0].screenX;h=J.touches[0].screenY})]}}};B.mixin(D,y);return y})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(D,I,B,d){D=D(d.Credential,{});return B.Credential=D})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(D,I,B,d,q,y,n,t,h,k,f,v,H,J,Q,O,g,r,e){var m={},p=function(a){var c=(new y(a.owningSystemUrl)).host;a=(new y(a.server)).host;var b=/.+\.arcgis\.com$/i;return b.test(c)&&b.test(a)},w=function(a,c){return!!(p(a)&&c&&d.some(c,function(b){return b.test(a.server)}))},A=null,N=null;try{A=window.localStorage,N=window.sessionStorage}catch(a){}n=D(g,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=B.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=
[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();h(window,"pageshow",B.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:J.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var c=this.serverInfos;c?(a=d.filter(a,function(b){return!this.findServerInfo(b.server)},this),this.serverInfos=c.concat(a)):
this.serverInfos=a;d.forEach(a,function(b){b.owningSystemUrl&&this._portals.push(b.owningSystemUrl);if(b.hasPortal){this._portals.push(b.server);var l=f.defaults.io.corsEnabledServers,x=this._getOrigin(b.tokenServiceUrl);J.canUseXhr(b.server)||l.push(b.server.replace(/^https?:\/\//i,""));J.canUseXhr(x)||l.push(x.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var c=this.oAuthInfos;c?(d.forEach(a,function(b){(b=this.findOAuthInfo(b.portalUrl))&&c.splice(c.indexOf(b),1)},this),
this.oAuthInfos=c.concat(a)):this.oAuthInfos=a},registerToken:function(a){a=v.mixin({},a);var c=this._sanitizeUrl(a.server),b=this.findServerInfo(c),l=!0,x;b||(b=new H,b.server=this._getServerInstanceRoot(c),b.tokenServiceUrl=this._getTokenSvcUrl(c),b.hasPortal=!0,this.registerServers([b]));(x=this.findCredential(c,a.userId))?(delete a.server,B.mixin(x,a),l=!1):(x=new G({userId:a.userId,server:b.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:this._isServerRsrc(c)?"server":"portal"}),x.resources=
[c],this.credentials.push(x));x.onTokenChange(!1);l||x.refreshServerTokens()},toJson:function(){return v.fixJson({serverInfos:d.map(this.serverInfos,function(a){return a.toJson()}),oAuthInfos:d.map(this.oAuthInfos,function(a){return a.toJson()}),credentials:d.map(this.credentials,function(a){return a.toJson()})})},initialize:function(a){if(a){B.isString(a)&&(a=JSON.parse(a));var c=a.serverInfos,b=a.oAuthInfos;a=a.credentials;if(c){var l=[];d.forEach(c,function(C){C.server&&C.tokenServiceUrl&&l.push(C.declaredClass?
C:new H(C))});l.length&&this.registerServers(l)}if(b){var x=[];d.forEach(b,function(C){C.appId&&x.push(C.declaredClass?C:new e(C))});x.length&&this.registerOAuthInfos(x)}a&&d.forEach(a,function(C){C.userId&&C.server&&C.token&&C.expires&&C.expires>(new Date).getTime()&&(C=C.declaredClass?C:new G(C),C.onTokenChange(),this.credentials.push(C))},this)}},findServerInfo:function(a){var c;a=this._sanitizeUrl(a);d.some(this.serverInfos,function(b){this._hasSameServerInstance(b.server,a)&&(c=b);return!!c},
this);return c},findOAuthInfo:function(a){var c;a=this._sanitizeUrl(a);d.some(this.oAuthInfos,function(b){this._hasSameServerInstance(b.portalUrl,a)&&(c=b);return!!c},this);return c},findCredential:function(a,c){var b;a=this._sanitizeUrl(a);var l=this._isServerRsrc(a)?"server":"portal";c?d.some(this.credentials,function(x){this._hasSameServerInstance(x.server,a)&&c===x.userId&&x.scope===l&&(b=x);return!!b},this):d.some(this.credentials,function(x){this._hasSameServerInstance(x.server,a)&&-1!==this._getIdenticalSvcIdx(a,
x)&&x.scope===l&&(b=x);return!!b},this);return b},getCredential:function(a,c){var b=!0;if(v.isDefined(c))if(B.isObject(c)){var l=!!c.token;var x=c.error;b=!1!==c.prompt}else l=c;a=this._sanitizeUrl(a);var C=new q(Q._dfdCanceller),K=this._isAdminResource(a);if((l=l?this.findCredential(a):null)&&x&&498===x.code)l.destroy();else if(l)return b=Error("You are currently signed in as: '"+l.userId+"'. You do not have access to this resource: "+a),b.name="identity-manager:not-authorized",b.code="IdentityManagerBase.1",
b.httpCode=x&&x.httpCode,b.messageCode=x?x.messageCode:null,b.subcode=x?x.subcode:null,b.details=x?x.details:null,b.log=!!I.isDebug,C.errback(b),C;if(x=this._findCredential(a,c))return C.callback(x),C;var M=this.findServerInfo(a);if(M)!M.hasServer&&this._isServerRsrc(a)&&(M._restInfoDfd=this._getTokenSvcUrl(a,!0),M.hasServer=!0);else{x=this._getTokenSvcUrl(a);if(!x)return b=Error("Unknown resource - could not find token service endpoint."),b.name="identity-manager:unknown-resource",b.code="IdentityManagerBase.2",
b.log=!!I.isDebug,C.errback(b),C;M=new H;M.server=this._getServerInstanceRoot(a);B.isString(x)?(M.tokenServiceUrl=x,M.hasPortal=!0):(M._restInfoDfd=x,M.hasServer=!0);this.registerServers([M])}M.hasPortal&&void 0===M._selfReq&&(b||J.hasSameOrigin(M.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(P){return P.tokenServiceUrl===M.tokenServiceUrl}))&&(M._selfReq={owningTenant:c&&c.owningTenant,selfDfd:this._getPortalSelf(M.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),
a)});return this._enqueue(a,M,c,C,K)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,c,b){var l=this._rePortalTokenSvc.test(a.tokenServiceUrl),x=new y(window.location.href.toLowerCase()),C=!c;var K=a.shortLivedTokenValidity;if(c){var M=
k.id.tokenValidity||K||k.id.defaultTokenValidity;M>K&&(M=K)}if(b){var P=b.isAdmin;var F=b.serverUrl;var u=b.token;var z=b.ssl;a.customParameters=b.customParameters}if(P)K=a.adminTokenServiceUrl;else{K=a.tokenServiceUrl;var E=new y(K.toLowerCase());a.webTierAuth&&b&&b.serverUrl&&!z&&"http"===x.scheme&&(J.hasSameOrigin(x.uri,K,!0)||"https"===E.scheme&&x.host===E.host&&"7080"===x.port&&"7443"===E.port)&&(K=K.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));C&&l&&(K=K.replace(/\/rest/i,""))}P=B.mixin({url:K,
content:B.mixin({request:"getToken",username:c&&c.username,password:c&&c.password,serverUrl:F,token:u,expiration:M,referer:P||l?window.location.host:null,client:P?"referer":null,f:"json"},a.customParameters),handleAs:"json",callbackParamName:C?"callback":void 0},b&&b.ioArgs);b={usePost:!C,disableIdentityLookup:!0,useProxy:this._useProxy(a,b)};l||(P.withCredentials=!1);l=O(P,b);l.addCallback(function(L){if(!L||!L.token)return L=Error("Unable to generate token"),L.name="identity-manager:authentication-failed",
L.code="IdentityManagerBase.3",L.log=!!I.isDebug,L;var S=a.server;m[S]||(m[S]={});c&&(m[S][c.username]=c.password);L.validity=M;return L});l.addErrback(function(L){});return l},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){var c=new q;this.checkAppAccess(a,"").then(function(b){c.resolve(b.credential)})["catch"](function(b){c.reject(b)});return c},checkAppAccess:function(a,c,b){var l=this,x=!1;return this.getCredential(a,{prompt:!1}).then(function(C){var K={f:"json"};if("portal"===
C.scope)if(c&&(l._doPortalSignIn(a)||b&&b.force)){var M=C.server+"/sharing/rest/oauth2/validateAppAccess";K.client_id=c}else if(C.token)M=C.server+"/sharing/rest";else return{credential:C};else if(C.token)M=C.server+"/rest/services";else return{credential:C};C.token&&(K.token=C.token);return O({url:M,content:K,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(P){if(!1===P.valid){var F=Error("You are currently signed in as: '"+C.userId+"'.  You do not have access to this app: '"+
c+"'.");F.name="identity-manager:not-authorized";F.code="IdentityManagerBase.1";F.log=!!I.isDebug;F.details=P;throw F;}x=!!P.viewOnlyUserTypeApp;return{credential:C}})["catch"](function(P){if("IdentityManagerBase.1"===P.code||400===P.code)throw 400===P.code&&(P.name="identity-manager:invalid-request"),P;if(498===P.code)throw C.destroy(),P=Error("User is not signed in."),P.name="identity-manager:not-authenticated",P.code="IdentityManagerBase.6",P.log=!!I.isDebug,P;return{credential:C}})}).then(function(C){return{credential:C.credential,
viewOnly:x}})},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();d.forEach(a,function(c){c.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(a){a||(a="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
h(window,"message",function(c){(c.origin===window.location.origin||v.endsWith(c.origin,".arcgis.com"))&&c.data&&"arcgis:auth:requestCredential"===c.data.type&&this.getCredential(a).then(function(b){c.source.postMessage({type:"arcgis:auth:credential",credential:{expires:b.expires,server:b.server,ssl:b.ssl,token:b.token,userId:b.userId}},c.origin)})["catch"](function(b){c.source.postMessage({type:"arcgis:auth:error",error:{name:b.name,message:b.message}},c.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));a=t.queryToObject(a);var c=!1;if(a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username"))try{a.state=JSON.parse(a.state),a.state.portalUrl&&(this._oAuthLocationParams=a,c=!0)}catch(l){}else if(a.error&&a.error_description&&"access_denied"===a.error&&(c=!0,a.state))try{a.state=JSON.parse(a.state)}catch(l){}c&&
(window.location.hash=a.state&&a.state.hash||"")}if(a=window.location.search){"?"===a.charAt(0)&&(a=a.substring(1));a=t.queryToObject(a);c=!1;if(a.code&&a.state)try{a.state=JSON.parse(a.state),a.state.portalUrl&&a.state.uid&&(this._oAuthLocationParams=a,c=!0)}catch(l){}else if(a.error&&a.error_description&&"access_denied"===a.error&&(c=!0,a.state))try{a.state=JSON.parse(a.state)}catch(l){}if(c){var b=v.mixin({},a);"code error error_description message_code persist state".split(" ").forEach(function(l){delete b[l]});
c=t.objectToQuery(b);window.history.replaceState(window.history.state,"",window.location.pathname+(c?"?"+c:"")+(a.state&&a.state.hash||""))}}},_getOAuthToken:function(a,c,b,l,x){a=a.replace(/^http:/i,"https:");return O({url:a+"/sharing/rest/oauth2/token",content:l&&x?{grant_type:"authorization_code",code:c,redirect_uri:l,client_id:b,code_verifier:x}:{grant_type:"refresh_token",refresh_token:c,client_id:b}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(a){a.persisted&&this.isBusy()&&
this._rejectOnPersistedPageShow&&(a=Error("ABORTED"),a.name="identity-manager:user-aborted",a.code="IdentityManager.2",a.log=!!I.isDebug,this._errbackFunc(a))},_findCredential:function(a,c){var b=-1,l,x,C=c&&c.token;var K=c&&c.resource;var M=this._isServerRsrc(a)?"server":"portal",P=d.filter(this.credentials,function(E){return this._hasSameServerInstance(E.server,a)&&E.scope===M},this);a=K||a;if(P.length)if(1===P.length){K=P[0];var F=(l=(x=this.findServerInfo(K.server))&&x.owningSystemUrl)&&this.findCredential(l,
K.userId);b=this._getIdenticalSvcIdx(a,K);if(C)-1!==b&&(K.resources.splice(b,1),this._removeResource(a,F));else return-1===b&&K.resources.push(a),this._addResource(a,F),K}else{var u,z;d.some(P,function(E){z=this._getIdenticalSvcIdx(a,E);return-1!==z?(u=E,F=(l=(x=this.findServerInfo(u.server))&&x.owningSystemUrl)&&this.findCredential(l,u.userId),b=z,!0):!1},this);if(C)u&&(u.resources.splice(b,1),this._removeResource(a,F));else if(u)return this._addResource(a,F),u}},_findOAuthInfo:function(a){var c=
this.findOAuthInfo(a);c||d.some(this.oAuthInfos,function(b){this._isIdProvider(b.portalUrl,a)&&(c=b);return!!c},this);return c},_addResource:function(a,c){c&&-1===this._getIdenticalSvcIdx(a,c)&&c.resources.push(a)},_removeResource:function(a,c){var b=-1;c&&(b=this._getIdenticalSvcIdx(a,c),-1<b&&c.resources.splice(b,1))},_useProxy:function(a,c){return c&&c.isAdmin&&!J.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!J.hasSameOrigin(a.tokenServiceUrl,
window.location.href)},_getOrigin:function(a){a=new y(a);return a.scheme+"://"+a.host+(v.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var c=a.toLowerCase(),b=c.indexOf(this._agsRest);-1===b&&this._isAdminResource(a)&&(b=this._agsAdmin.test(a)?a.replace(this._agsAdmin,"$1").length:a.search(this._adminSvcs));-1===b&&(b=c.indexOf("/sharing"));-1===b&&"/"===c.substr(-1)&&(b=c.length-1);return-1<b?a.substring(0,b):a},_hasSameServerInstance:function(a,c){"/"===a.substr(-1)&&(a=a.slice(0,
-1));a=a.toLowerCase();c=this._getServerInstanceRoot(c).toLowerCase();a=this._normalizeAGOLorgDomain(a);c=this._normalizeAGOLorgDomain(c);a=a.substr(a.indexOf(":"));c=c.substr(c.indexOf(":"));return a===c},_normalizeAGOLorgDomain:function(a){var c=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,b=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,l=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;c.test(a)?a=a.replace(c,"https://www.arcgis.com"):b.test(a)?a=a.replace(b,"https://devext.arcgis.com"):
l.test(a)&&(a=a.replace(l,"https://qaext.arcgis.com"));return a},_sanitizeUrl:function(a){var c=(f.defaults.io.proxyUrl||"").toLowerCase(),b=c?a.toLowerCase().indexOf(c+"?"):-1;-1!==b&&(a=a.substring(b+c.length+1));a=J.normalize(a);return J.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,
c){if(this._isRESTService(a)&&this._isRESTService(c)){var b=this._getSuffix(a).toLowerCase(),l=this._getSuffix(c).toLowerCase();var x=b===l;x||(x=/(.*)\/(MapServer|FeatureServer).*/ig,x=b.replace(x,"$1")===l.replace(x,"$1"))}else this._isAdminResource(a)&&this._isAdminResource(c)?x=!0:this._isServerRsrc(a)||this._isServerRsrc(c)||!this._isPortalDomain(a)||(x=!0);return x},_isPortalDomain:function(a){var c=new y(a.toLowerCase()),b=this._portalConfig;a=d.some(this._gwDomains,function(l){return l.regex.test(c.uri)});
!a&&b&&(a=this._hasSameServerInstance(this._getServerInstanceRoot(b.restBaseUrl),c.uri));a||(!this._arcgisUrl&&(b=B.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new y(b)).authority),this._arcgisUrl&&(a=this._arcgisUrl.toLowerCase()===c.authority));a||(a=d.some(this._portals,function(l){return this._hasSameServerInstance(l,c.uri)},this));return a=a||this._agsPortal.test(c.path)},_isIdProvider:function(a,c){var b=-1,l=-1;d.forEach(this._gwDomains,function(M,P){-1===b&&M.regex.test(a)&&
(b=P);-1===l&&M.regex.test(c)&&(l=P)});var x=!1;if(-1<b&&-1<l)if(0===b||4===b){if(0===l||4===l)x=!0}else if(1===b){if(1===l||2===l)x=!0}else 2===b?2===l&&(x=!0):3===b&&3===l&&(x=!0);if(!x){var C=this.findServerInfo(c),K=C&&C.owningSystemUrl;K&&p(C)&&this._isPortalDomain(K)&&this._isIdProvider(a,K)&&(x=!0)}return x},_isPublic:function(a){a=this._sanitizeUrl(a);return d.some(this._publicUrls,function(c){return c.test(a)})},_getIdenticalSvcIdx:function(a,c){var b=-1;d.some(c.resources,function(l,x){return this._isIdenticalService(a,
l)?(b=x,!0):!1},this);return b},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){if(this._isRESTService(a)||this._isAdminResource(a)){var c=this._getServerInstanceRoot(a);var b=c+"/admin/generateToken";a=c+"/rest/info";c=O({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});c.adminUrl_=b;return c}if(this._isPortalDomain(a)){var l="";d.some(this._gwDomains,function(x){x.regex.test(a)&&(l=x.tokenServiceUrl);
return!!l});l||d.some(this._portals,function(x){this._hasSameServerInstance(x,a)&&(l=x+this._gwTokenUrl);return!!l},this);l||(b=a.toLowerCase().indexOf("/sharing"),-1!==b&&(l=a.substring(0,b)+this._gwTokenUrl));l||(l=this._getOrigin(a)+this._gwTokenUrl);l&&(b=(new y(a)).port,/^http:\/\//i.test(a)&&"7080"===b&&(l=l.replace(/:7080/i,":7443")),l=l.replace(/http:/i,"https:"));return l}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(a,
c,b){return O({url:a+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:c,token:b}},{disableIdentityLookup:!0,usePost:!0}).then(function(l){return l.token})},_getPlatformSelf:function(a,c){a=a.replace(/^http:/i,"https:");return O({url:a+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":c,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(a,
c){var b="";d.some(this._gwDomains,function(x){x.regex.test(a)&&(b=x.customBaseUrl);return!!b});if(b){var l=new q;l.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:b,portalMode:"multitenant",supportsOAuth:!0});return l}"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(c)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return O({url:a,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},{disableIdentityLookup:!0})},
_doPortalSignIn:function(a){var c=this._portalConfig,b=window.location.href,l=this.findServerInfo(a);return(c||this._isPortalDomain(b))&&(l?l.hasPortal||l.owningSystemUrl&&this._isPortalDomain(l.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(b,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||J.hasSameOrigin(b,a,!0))?!0:!1},_checkProtocol:function(a,c,b,l){var x=!0;l=l?c.adminTokenServiceUrl:c.tokenServiceUrl;0!==
B.trim(l).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||f.defaults.io.useCors&&(J.canUseXhr(l)||J.canUseXhr(J.getProxyUrl(!0).path))||(x=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:c}):!1,x||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),a.name="identity-manager:aborted",a.code="IdentityManagerBase.4",a.log=!!I.isDebug,b(a)));return x},_enqueue:function(a,c,b,l,x,C){l||(l=new q(Q._dfdCanceller));
l.resUrl_=a;l.sinfo_=c;l.options_=b;l.admin_=x;l.refresh_=C;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(l)):this._xoReqs.push(l):this._doSignIn(l);return l},_doSignIn:function(a){this._busy=a;this._rejectOnPersistedPageShow=!1;var c=this,b=function(F){var u=a.options_&&a.options_.resource,z=a.resUrl_,E=a.refresh_,L=!1;-1===d.indexOf(c.credentials,F)&&(E&&-1!==
d.indexOf(c.credentials,E)?(E.userId=F.userId,E.token=F.token,E.expires=F.expires,E.validity=F.validity,E.ssl=F.ssl,E.creationTime=F.creationTime,L=!0,F=E):c.credentials.push(F));F.resources||(F.resources=[]);-1===F.resources.indexOf(u||z)&&F.resources.push(u||z);F.scope=c._isServerRsrc(z)?"server":"portal";F.onTokenChange();u=c._soReqs;var S={};c._soReqs=[];d.forEach(u,function(R){if(!this._isIdenticalService(z,R.resUrl_)){var W=this._getSuffix(R.resUrl_);S[W]||(S[W]=!0,F.resources.push(R.resUrl_))}},
c);a.callback(F);d.forEach(u,function(R){this._hasSameServerInstance(this._getServerInstanceRoot(z),R.resUrl_)?R.callback(F):this._soReqs.push(R)},c);c._busy=a.resUrl_=a.sinfo_=a.refresh_=null;if(!L)c.onCredentialCreate({credential:F});c._soReqs.length?c._doSignIn(c._soReqs.shift()):c._xoReqs.length&&c._doSignIn(c._xoReqs.shift())},l=function(F){a.errback(F);c._busy=a.resUrl_=a.sinfo_=a.refresh_=null;c._soReqs.length?c._doSignIn(c._soReqs.shift()):c._xoReqs.length&&c._doSignIn(c._xoReqs.shift())},
x=function(F,u,z,E){var L=a.sinfo_,S=!a.options_||!1!==a.options_.prompt,R=L.hasPortal&&c._findOAuthInfo(a.resUrl_);if(F)b(new G({userId:F,server:L.server,token:z||null,expires:v.isDefined(E)?Number(E):null,ssl:!!u}));else if(window!==window.parent&&c._appUrlObj.query&&c._appUrlObj.query["arcgis-auth-origin"]&&c._appUrlObj.query["arcgis-auth-portal"]&&c._hasSameServerInstance(c._getServerInstanceRoot(c._appUrlObj.query["arcgis-auth-portal"]),a.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},
c._appUrlObj.query["arcgis-auth-origin"]);var W=h(window,"message",function(V){if(V.source===window.parent&&V.data)if("arcgis:auth:credential"===V.data.type&&V.data.credential.expires<Date.now()&&(V.data.type="arcgis:auth:error",V.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===V.data.type)W.remove(),b(new G(V.data.credential));else if("arcgis:auth:error"===V.data.type){W.remove();V=V.data.error;switch(V.name){case "identity-manager:busy":case "identity-manager:not-authorized":var ha=
"IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":ha="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":ha="IdentityManager.3";"tokenExpiredError"===V.name&&(V.name="identity-manager:credential-request-failed",V.message="Parent application's token has expired.");break;case "identity-manager:aborted":ha=
"IdentityManager.4";break;case "identity-manager:not-authenticated":ha="IdentityManager.6";break;case "identity-manager:invalid-request":ha=400}var na=Error(V.message);na.name=V.name;na.code=ha;na.log=!!I.isDebug;l(na)}})}else if(R){var U=R._oAuthCred;U||(F=new r(R,A),u=new r(R,N),F.isValid()&&u.isValid()?F.expires>u.expires?(U=F,u.destroy()):(U=u,F.destroy()):U=F.isValid()?F:u,R._oAuthCred=U);if(U.isValid()){var aa=new G({userId:U.userId,server:L.server,token:U.token,expires:U.expires,ssl:U.ssl,
_oAuthCred:U});var da=R.appId!==U.appId&&c._doPortalSignIn(a.resUrl_);da||U.refreshToken?(U.refreshToken?a._pendingDfd=c._getOAuthToken(L.server,U.refreshToken,U.appId).then(function(V){aa.expires=Date.now()+1E3*V.expires_in;aa.token=V.access_token;return aa}):(F=new q,F.resolve(aa),a._pendingDfd=F),a._pendingDfd.then(function(V){return da?c._exchangeToken(V.server,R.appId,V.token).then(function(ha){V.token=ha;return V})["catch"](function(){return V}):V}).then(function(V){b(V)})["catch"](function(){U.destroy();
x()})):b(aa)}else if(c._oAuthLocationParams&&c._hasSameServerInstance(R.portalUrl,c._oAuthLocationParams.state.portalUrl)&&(c._oAuthLocationParams.access_token||c._oAuthLocationParams.code&&c._oAuthLocationParams.state.uid===U.stateUID&&U.codeVerifier))F=c._oAuthLocationParams,c._oAuthLocationParams=null,a._pendingDfd=c._processOAuthResponseParams(F,R,L).then(function(V){b(V)})["catch"](l);else{var ca=function(){S?a._pendingDfd=c.oAuthSignIn(a.resUrl_,L,R,a.options_).addCallbacks(b,l):(ba=Error("User is not signed in."),
ba.name="identity-manager:not-authenticated",ba.code="IdentityManagerBase.6",ba.log=!!I.isDebug,l(ba))};c._doPortalSignIn(a.resUrl_)?a._pendingDfd=c._getPlatformSelf(L.server,R.appId).then(function(V){var ha=V.portalUrl;!ha||J.hasSameOrigin(ha,window.location.origin,!0)?(aa=new G({userId:V.username,server:L.server,expires:Date.now()+1E3*V.expires_in,token:V.token}),b(aa)):ca()})["catch"](ca):ca()}}else if(S)c._checkProtocol(a.resUrl_,L,l,a.admin_)&&(F=a.options_,a.admin_&&(F=F||{},F.isAdmin=!0),a._pendingDfd=
c.signIn(a.resUrl_,L,F).addCallbacks(b,l));else{var ba=Error("User is not signed in.");ba.name="identity-manager:not-authenticated";ba.code="IdentityManagerBase.6";ba.log=!!I.isDebug;l(ba)}},C=function(){var F=a.sinfo_,u=F.owningSystemUrl,z=a.options_,E;if(z){var L=z.token;var S=z.error;var R=z.prompt}(E=c._findCredential(u,{token:L,resource:a.resUrl_}))||d.some(c.credentials,function(W){this._isIdProvider(u,W.server)&&(E=W);return!!E},c);E?(z=c.findCredential(a.resUrl_,E.userId))?b(z):w(F,c._legacyFed)?
(z=E.toJson(),z.server=F.server,z.resources=null,b(new G(z))):(a._pendingDfd=c.generateToken(c.findServerInfo(E.server),null,{serverUrl:a.resUrl_,token:E.token,ssl:E.ssl})).addCallbacks(function(W){b(new G({userId:E.userId,server:F.server,token:W.token,expires:v.isDefined(W.expires)?Number(W.expires):null,ssl:!!W.ssl,isAdmin:a.admin_,validity:W.validity}))},l):(c._busy=null,L&&(a.options_.token=null),(a._pendingDfd=c.getCredential(u.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:F.owningTenant,
token:L,error:S,prompt:R})).addCallbacks(function(W){c._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(W){l(W)}))};this._errbackFunc=l;var K=a.sinfo_.owningSystemUrl,M=this._isServerRsrc(a.resUrl_),P=a.sinfo_._restInfoDfd;P?P.addCallbacks(function(F){var u=a.sinfo_;u._restInfoDfd&&(u.adminTokenServiceUrl=u._restInfoDfd.adminUrl_,u._restInfoDfd=null,u.tokenServiceUrl=B.getObject("authInfo.tokenServicesUrl",!1,F)||B.getObject("authInfo.tokenServiceUrl",!1,F)||B.getObject("tokenServiceUrl",
!1,F),u.shortLivedTokenValidity=B.getObject("authInfo.shortLivedTokenValidity",!1,F),u.currentVersion=F.currentVersion,u.owningTenant=F.owningTenant,(F=u.owningSystemUrl=F.owningSystemUrl)&&c._portals.push(F));M&&u.owningSystemUrl?C():x()},function(){a.sinfo_._restInfoDfd=null;var F=Error("Unknown resource - could not find token service endpoint.");F.name="identity-manager:server-identification-failed";F.code="IdentityManagerBase.2";F.log=!!I.isDebug;l(F)}):M&&K?C():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(F){var u=
{};if(F){var z=F.user&&F.user.username;u.username=z;u.allSSL=F.allSSL;var E=F.supportsOAuth;var L=parseFloat(F.currentVersion);if("multitenant"===F.portalMode)var S=F.customBaseUrl;a.sinfo_.currentVersion=L}a.sinfo_.webTierAuth=!!z;return z&&c.normalizeWebTierAuth?c.generateToken(a.sinfo_,null,{ssl:u.allSSL}).addBoth(function(R){u.portalToken=R&&R.token;u.tokenExpiration=R&&R.expires;return u}):!z&&E&&4.4<=L&&!c._findOAuthInfo(a.resUrl_)?c._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:S,
owningTenant:a.sinfo_._selfReq.owningTenant}).always(function(){return u}):u}).always(function(F){a.sinfo_._selfReq=null;F?x(F.username,F.allSSL,F.portalToken,F.tokenExpiration):x()}):x()},_generateOAuthInfo:function(a){var c=this,b=a.portalUrl,l=a.customBaseUrl,x=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var C=window.location.href;var K=C.indexOf("?");-1<K&&(C=C.slice(0,K));K=C.search(/\/(apps|home)\//);C=-1<K?C.slice(0,K):null}a&&
C?(this._hasTestedIfAppIsOnPortal=!0,a=O({url:C+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){c.defaultOAuthInfo=new e({appId:"arcgisonline",popupCallbackUrl:C+"/home/oauth-callback.html"})})):(a=new q,a.resolve(),a=a.promise);return a.then(function(){if(c.defaultOAuthInfo)return b=b.replace(/^http:/i,"https:"),O({url:b+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:x,client_id:c.defaultOAuthInfo.appId,redirect_uri:J.getAbsoluteUrl(c.defaultOAuthInfo.popupCallbackUrl),
f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(M){if(M.valid){var P=c.defaultOAuthInfo.clone();P.portalUrl=M.urlKey&&l?"https://"+M.urlKey.toLowerCase()+"."+l:b;P.popup=window!==window.top||!(J.hasSameOrigin(b,window.location.origin)||c._gwDomains.some(function(F){return F.regex.test(b)&&F.regex.test(window.location.origin)}));c.oAuthInfos.push(P)}})})}});var G=D(g,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(a){B.mixin(this,a);this.resources=
this.resources||[];v.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var a=this,c=this.resources&&this.resources[0],b=k.id.findServerInfo(this.server),l=b&&b.owningSystemUrl,x=!!l&&"server"===this.scope,C=x&&w(b,k.id._legacyFed),K=x&&k.id.findServerInfo(l),M,P=(M=b.webTierAuth)&&k.id.normalizeWebTierAuth,F=m[this.server];F=F&&F[this.userId];var u={username:this.userId,password:F};if(!M||P)if(x&&!K&&d.some(k.id.serverInfos,function(L){k.id._isIdProvider(l,
L.server)&&(K=L);return!!K}),M=K&&k.id.findCredential(K.server,this.userId),!x||M)if(C)M.refreshToken();else{if(x)var z={serverUrl:c,token:M&&M.token,ssl:M&&M.ssl};else if(P)u=null,z={ssl:this.ssl};else if(F)this.isAdmin&&(z={isAdmin:!0});else{if(c){c=k.id._sanitizeUrl(c);this._enqueued=1;var E=k.id._enqueue(c,b,null,null,this.isAdmin,this);E.addCallback(function(){a._enqueued=0;a.refreshServerTokens()}).addErrback(function(){a._enqueued=0})}return E}return k.id.generateToken(x?K:b,x?null:u,z).addCallback(function(L){a.token=
L.token;a.expires=v.isDefined(L.expires)?Number(L.expires):null;a.creationTime=(new Date).getTime();a.validity=L.validity;a.onTokenChange();a.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&d.forEach(k.id.credentials,function(a){var c=k.id.findServerInfo(a.server),b=c&&c.owningSystemUrl;a!==this&&a.userId===this.userId&&b&&"server"===a.scope&&(k.id._hasSameServerInstance(this.server,b)||k.id._isIdProvider(b,this.server))&&(w(c,k.id._legacyFed)?
(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.onTokenChange()):a.refreshToken())},this)},onTokenChange:function(a){clearTimeout(this._refreshTimer);var c=this.server&&k.id.findServerInfo(this.server),b=(c=c&&c.owningSystemUrl)&&k.id.findServerInfo(c);!1!==a&&(!c||"portal"===this.scope||b&&b.webTierAuth&&!k.id.normalizeWebTierAuth)&&(v.isDefined(this.expires)||v.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=
this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=d.indexOf(k.id.credentials,this);-1<a&&k.id.credentials.splice(a,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var a=v.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,
scope:this.scope}),c=this.resources;c&&0<c.length&&(a.resources=c.slice());return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,c=Math.pow(2,31)-1,b=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>b?b=0:b>c&&(b=c);this._refreshTimer=setTimeout(B.hitch(this,this.refreshToken),b>a?b-a:b)}});n.Credential=G;return k.IdentityManagerBase=n})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has",
"./kernel"],function(D,I,B,d){B=function(){return this}();var q={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,
zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:B.Worker&&!1,io:{errorHandler:function(y,n){I.publish("esri.Error",[y])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com",
"tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com",
"qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com",
"basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:B.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},
packages:[]}}}};d.config=q;D.noGlobals||(B.esriConfig=q);return q})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,I,B,d,q){D=D(null,{declaredClass:"esri.ServerInfo",constructor:function(y){I.mixin(this,y)},toJson:function(){return q.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,
owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return d.ServerInfo=D})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(D,I,B,d,q,y,n,t,h,k){var f={},v=t.defaults.io,H=/^[a-z][a-z0-9\+\-\.]*:/i,J=/^\s*http:/i,Q=/^\s*https:/i,O=/:\d+$/,g=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;
f.isHTTP=function(e){var m=d.location.protocol;return null==e?"http:"===m||"https:"===m:e?"https:"===m:"http:"===m};f.getProtocolForWebResource=function(e){return f.isHTTP()?d.location.protocol:e?"https:":"http:"};f.urlToObject=function(e){var m={},p=new B(e),w=e.indexOf("?");null===p.query?m={path:e,query:null}:(m.path=e.substring(0,w),m.query=q.queryToObject(p.query));p.fragment&&(m.hash=p.fragment,null===p.query&&(m.path=m.path.substring(0,m.path.length-(p.fragment.length+1))));return m};f.getProxyUrl=
function(e,m){var p=D.isString(e)?0===D.trim(e).toLowerCase().indexOf("https:"):e,w=v.proxyUrl,A,N=k.io.proxyNotSet;D.isString(e)&&(A=f.getProxyRule(e))&&(w=A.proxyUrl);if(!w)throw Error(N);if(p&&!1!==m&&0!==d.location.href.toLowerCase().indexOf("https:")&&(p=w,0!==p.toLowerCase().indexOf("http")&&(p=f.getAbsoluteUrl(p)),p=p.replace(/^http:/i,"https:"),f.canUseXhr(p))){w=p;var G=1}w=f.urlToObject(w);w._xo=G;return w};f.addProxy=function(e){var m=f.getProxyRule(e),p;m?p=f.urlToObject(m.proxyUrl):v.alwaysUseProxy&&
(p=f.getProxyUrl());p&&(m=f.urlToObject(e),e=p.path+"?"+m.path,(p=q.objectToQuery(D.mixin(p.query||{},m.query)))&&(e+="?"+p));return e};f.addProxyRule=function(e){var m=e.urlPrefix=f.urlToObject(e.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),p=v.proxyRules,w,A=p.length,N=A;for(w=0;w<A;w++){var G=p[w].urlPrefix;if(0===m.indexOf(G)){if(m.length===G)return-1;N=w;break}else 0===G.indexOf(m)&&(N=w+1)}p.splice(N,0,e);return N};f.getProxyRule=function(e){var m=v.proxyRules,
p=m.length,w=f.urlToObject(e).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(e=0;e<p;e++)if(0===w.indexOf(m[e].urlPrefix)){var A=m[e];break}return A};f.hasSameOrigin=function(e,m,p){e=e.toLowerCase();m=m.toLowerCase();var w=d.location.href.toLowerCase();e=0===e.indexOf("http")?new B(e):w=new B(w);m=0===m.indexOf("http")?new B(m):D.isString(w)?new B(w):w;return(p||e.scheme===m.scheme)&&e.host===m.host&&e.port===m.port};f.canUseXhr=function(e,m){var p=h("esri-phonegap")?
!0:!1,w=f.hasSameOrigin,A=v.corsEnabledServers,N,G=-1;!p&&h("esri-cors")&&A&&A.length&&(p=I.some(A,function(a,c){var b=!a||"object"!==typeof a||a instanceof RegExp?a:a.host;if(b instanceof RegExp){if(b.test(e))return G=c,!0}else if(b&&(N=0!==b.trim().toLowerCase().indexOf("http"),w(e,N?"http://"+b:b)||N&&w(e,"https://"+b)))return G=c,!0;return!1}));return m?G:p};f.getAbsoluteUrl=function(e){var m=f.getProtocolForWebResource();return D.isString(e)&&!H.test(e)?0===e.indexOf("//")?m+e:0===e.indexOf("/")?
m+"//"+d.location.host+e:y._appBaseUrl+e:e};f.fixUrl=function(e){e=D.trim(e);e=f.getAbsoluteUrl(e);e=f.normalizeSlashes(e);e=e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");e=f.downgradeToHTTP(e);return e=f.upgradeToHTTPS(e)};f.normalize=function(e){return f.fixUrl(e)};f.normalizeSlashes=function(e){if(/^https?:\/\//i.test(e)){var m=e.indexOf("?");if(-1<m){var p=e.slice(0,m);var w=e.slice(m+1)}else p=e;e=p.replace(/\/{2,}/g,"/");e=e.replace("/","//");w&&(e+="?"+w)}return e};f.downgradeToHTTP=
function(e){return f.isHTTP(!1)&&Q.test(e)&&f.hasSameOrigin(d.location.href,e,!0)&&!f.canUseXhr(e)?e.replace(Q,"http:"):e};f.upgradeToHTTPS=function(e){var m=v.httpsDomains,p=f.isHTTP(!1),w=f.isHTTP(!0);if(!J.test(e))return e;e=D.trim(e);var A=e.indexOf("/",7);A=-1===A?e:e.slice(0,A);A=A.toLowerCase().slice(7);if(O.test(A))if(n.endsWith(A,":80"))A=A.slice(0,-3),e=e.replace(":80","");else return e;if(p&&A===d.location.host&&(!g.test(e)||!f.canUseXhr(e)))return e;p=!1;if(w&&A===d.location.host)p=!0;
else if(m)for(var N=0;N<m.length;N++){var G=m[N];if(A===G||n.endsWith(A,"."+G)){p=!0;break}}p||!w||v.alwaysUseProxy||f.getProxyRule(e)||(p=!0);p&&(e=e.replace(J,"https:"));return e};t=k.widgets.popup;var r=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:t.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:t.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,
appName:"Collector",label:t.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:t.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:t.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:t.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:t.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",
label:t.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:t.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:t.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:t.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:t.NLS_openLinkInApp}];f.getURIInfo=function(e){var m;I.some(r,function(p){p.pattern.test(e)&&(m=p);return!!m});return m};f.isKnownURI=
function(e){return!!f.getURIInfo(e)};f.base64UrlEncode=function(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};D.mixin(y,f);y._getProxyUrl=f.getProxyUrl;y._getProxiedUrl=f.addProxy;y._hasSameOrigin=f.hasSameOrigin;y._canDoXOXHR=f.canUseXhr;y._getAbsoluteUrl=f.getAbsoluteUrl;y.fixUrl=f.fixUrl;return f})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(D,I,B){var d=D("ff"),q=D("ie"),y=void 0===q&&7<=D("trident"),
n=D("edge"),t=D("webkit"),h=D("opera"),k=D("chrome"),f=D("safari"),v=navigator.userAgent,H;(H=v.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&D.add("esri-iphone",parseFloat(H[2].replace("_",".")));(H=v.match(/Android\s+(\d+(\.\d+)*)/i))&&D.add("esri-android",parseFloat(H[1]));(H=v.match(/Fennec\/(\d+\.\d+)/i))&&D.add("esri-fennec",parseFloat(H[1]));0<=v.indexOf("BlackBerry")&&0<=v.indexOf("WebKit")&&D.add("esri-blackberry",1);D.add("esri-touch",D("esri-iphone")||D("esri-android")||D("esri-blackberry")||
6<=D("esri-fennec")||(d||t)&&(document.createTouch||"ontouchstart"in I||I.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(H=v.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&D.add("esri-mobile",!!H);D.add("esri-pointer",!d&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!I.PointerEvent));B._getDOMAccessor=function(Q){var O="";d?O="Moz":t?O="Webkit":q?O="ms":h&&(O="O");return O+Q.charAt(0).toUpperCase()+Q.substr(1)};D.add("esri-phonegap",!!I.cordova);D.add("esri-cors",
D("esri-phonegap")||I.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);D.add("esri-file-upload",I.FormData&&I.FileList?!0:!1);D.add("esri-script-sandbox",function(){return"MessageChannel"in I&&"HTMLIFrameElement"in I&&"sandbox"in HTMLIFrameElement.prototype});D.add("esri-secure-context",function(){if("isSecureContext"in I)return I.isSecureContext;if(I.location&&I.location.origin)return 0===I.location.origin.indexOf("https:")});D.add("esri-wasm","WebAssembly"in I);D.add("esri-workers",I.Worker?
!0:!1);D.add("esri-featurelayer-webgl",!1);if(v=D("esri-featurelayer-webgl")){var J=D("esri-mobile");H=J?1:2;J=J?1:3;"object"===typeof v?(v.maxDrillLevel=null==v.maxDrillLevel?H:v.maxDrillLevel,v.maxRecordCountFactor=null==v.maxRecordCountFactor?J:v.maxRecordCountFactor,v.enablePBFQuery=null==v.enablePBFQuery?!0:v.enablePBFQuery):D.add("esri-featurelayer-webgl",{maxDrillLevel:H,maxRecordCountFactor:J,enablePBFQuery:!0},null,!0)}D.add("esri-featurelayer-webgl-labeling",!1);D.add("esri-pbf",!q||10<=
q);D.add("esri-featurelayer-pbf",!0);D.add("esri-transforms",y||n||9<=q||3.5<=d||4<=k||3.1<=f||10.5<=h||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transitions",y||n||10<=q||4<=d||4<=k||3.1<=f||10.5<=h||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transforms3d",y||n||10<=d||12<=k||4<=f||3.2<=D("esri-iphone")||3<=D("esri-android"));D.add("esri-url-encodes-apostrophe",function(){if(!I.document)return!1;var Q=I.document.createElement("a");Q.href="?'";return-1<Q.href.indexOf("?%27")});
3>D("esri-android")&&(D.add("esri-transforms",!1,!1,!0),D.add("esri-transitions",!1,!1,!0),D.add("esri-transforms3d",!1,!1,!0));D.add("esri-will-change",D("esri-transforms")&&(52<=k||11.1<=f));B._css=function(Q){var O=D("esri-transforms3d");void 0!==Q&&null!==Q?O=Q:O&&(k||f&&!D("esri-iphone"))&&(O=!1);var g=O?"translate3d(":"translate(",r=O?k?",-1px)":",0px)":")",e=O?"scale3d(":"scale(",m=O?",1)":")",p=O?"rotate3d(0,0,1,":"rotate(",w=O?"matrix3d(":"matrix(",A=O?",0,0,":",",N=O?",0,0,0,0,1,0,":",",
G=O?",0,1)":")";return{names:{transition:t&&"-webkit-transition"||d&&"MozTransition"||h&&"OTransition"||q&&"msTransition"||"transition",transform:t&&"-webkit-transform"||d&&"MozTransform"||h&&"OTransform"||q&&"msTransform"||"transform",transformName:t&&"-webkit-transform"||d&&"-moz-transform"||h&&"-o-transform"||q&&"-ms-transform"||"transform",origin:t&&"-webkit-transform-origin"||d&&"MozTransformOrigin"||h&&"OTransformOrigin"||q&&"msTransformOrigin"||"transformOrigin",endEvent:t&&"webkitTransitionEnd"||
d&&"transitionend"||h&&"oTransitionEnd"||q&&"MSTransitionEnd"||"transitionend"},translate:function(a,c){return g+a+"px,"+c+"px"+r},scale:function(a){return e+a+","+a+m},rotate:function(a){return p+a+"deg)"},matrix:function(a){return w+a.xx+","+a.xy+A+a.yx+","+a.yy+N+a.dx.toFixed(10)+(d&&59>=d?"px,":",")+a.dy.toFixed(10)+(d&&59>=d?"px":"")+G},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var c=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(c.length,a.indexOf(",")))}}};
B.isiPhone=D("esri-iphone");B.isAndroid=D("esri-android");B.isFennec=D("esri-fennec");B.isBlackBerry=D("esri-blackberry");B.isTouchEnabled=D("esri-touch");B.isPointerEnabled=D("esri-pointer");B._hasCors=D("esri-cors");B._hasFileUpload=D("esri-file-upload");B._hasTransforms=D("esri-transforms");B._hasTransitions=D("esri-transitions");B._has3DTransforms=D("esri-transforms3d");return D})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,I,B){I={_dfdCanceller:function(d){d.canceled=
!0;var q=d._pendingDfd;if(!d.isFulfilled()&&q&&!q.isFulfilled()){q.cancel();var y=q.results&&q.results[1]}d._pendingDfd=null;return y},_fixDfd:function(d){var q=d.then;d.then=function(y,n,t){if(y){var h=y;y=function(k){return k&&k._argsArray?h.apply(null,k):h(k)}}return q.call(this,y,n,t)};return d},_resDfd:function(d,q,y){var n=q.length;1===n?y?d.errback(q[0]):d.callback(q[0]):1<n?(q._argsArray=!0,d.callback(q)):d.callback()}};D.mixin(B,I);return I})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),
function(D,I,B,d,q,y,n,t,h,k,f,v,H,J,Q,O,g,r,e){function m(u){u=new y(u);return(u.host+(u.port?":"+u.port:"")).toLowerCase()}function p(u){return this._xhr?this._xhr.getResponseHeader(u):null}function w(u,z){var E=v.objectToQuery(u.content);E&&(u.url+=(-1===u.url.indexOf("?")?"?":"\x26")+E);if(2E3<u.url.length){if("data:"!==u.url.toLowerCase().slice(0,5))return E=new d,E.reject(q.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),E;if(3E6<u.url.length)return E=
new d,E.reject(q.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),E}var L=new Image;z.allowImageDataAccess&&(L.crossOrigin=u.withCredentials?"use-credentials":"anonymous");var S=!1,R=new d(function(W){S=!0;L.onload=L.onerror=L.onabort=null;L.src=""});E=function(W){L.onload=L.onerror=L.onabort=null;S||R.reject(Error("Unable to load the resource"))};L.onload=function(){L.onload=L.onerror=L.onabort=null;S||R.resolve(this)};L.onerror=E;L.onabort=
E;L.alt="";L.src=u.url;return R}function A(u,z,E,L){var S=!1,R=!1,W=!1,U;if(O.isDefined(z))if(q.isObject(z)){S=!!z.useProxy;R=!!z.usePost;W=!!z.returnProgress;var aa=z.crossOrigin}else S=!!z;u=q.mixin({},u);delete u._credential;u._ssl&&(u.url=u.url.replace(/^http:/i,"https:"));10>Q("ie")&&!P.test(u.url)&&(u.url=encodeURI(u.url));var da=u.content,ca=u.url,ba=E&&u.form,V=C;aa=O.isDefined(aa)?aa:V.useCors;u.load=function(Y){if(Y){if(Y.error){var ka=q.mixin(Error(),Y.error);ka.log=!!B.isDebug}else"error"===
Y.status&&(ka=q.mixin(Error(),Y),ka.log=!!B.isDebug);ka&&(u.failOk=!ka.log,O.isDefined(ka.httpCode)||(ka.httpCode=ka.code))}return ka||Y};u.error=function(Y,ka){ka&&ka.xhr&&ka.xhr.abort();Y instanceof Error||(Y=q.mixin(Error(),Y));Y.log=!!B.isDebug;u.failOk=!Y.log;V.errorHandler(Y,ka);return Y};u._token&&(u.content=u.content||{},u.content.token=u._token);var ha=0;if(da&&ca){var na=v.objectToQuery(da);ha=na.length+ca.length+1;Q("esri-url-encodes-apostrophe")&&(ha=na.replace(/'/g,"%27").length+ca.length+
1)}u.timeout=O.isDefined(u.timeout)?u.timeout:V.timeout;u.handleAs=u.handleAs||"json";try{var T=aa&&g.canUseXhr(u.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(u.url),Z=g.hasSameOrigin(u.url,window.location.href)||T,X=R||E||ha>V.postLength?!0:!1,ea=Z||-1===u.handleAs.indexOf("json")||!u.callbackParamName||E?!1:!0,fa=g.getProxyRule(u.url)||V.alwaysUseProxy||S||!("image"===u.handleAs&&!z.allowImageDataAccess||ea&&!X||Z)?!0:!1;E&&!Q("esri-file-upload")&&!fa&&T&&(fa=!0);if(fa){var la=g.getProxyUrl(ca,
aa);var ja=la.path;la._xo&&(T=!0);!X&&ja.length+1+ha>V.postLength&&(X=!0);u.url=ja+"?"+ca;if(X)u.content=q.mixin(la.query||{},da);else{var ma=v.objectToQuery(q.mixin(la.query||{},da));ma&&(u.url+="?"+ma);u.content=null}}if(!ea||X||fa){var oa=u.headers;!T||oa&&oa.hasOwnProperty("X-Requested-With")||(oa=u.headers=oa||{},oa["X-Requested-With"]=null);if(E){var ra=u.callbackParamName||"callback.html",ya=u.callbackElementName||"textarea",pa,sa,Ea=ba.elements?ba.elements.length:0;if(da=u.content)for(pa in da.token&&
/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(ca)&&(ca+=(-1===ca.indexOf("?")?"?":"\x26")+"token\x3d"+da.token,u.url=fa?ja+"?"+ca:ca,delete da.token),da){var ta=da[pa];if(O.isDefined(ta)){var ua=null;for(sa=0;sa<Ea;sa++){var za=ba.elements[sa];if(za.name===pa){ua=za;break}}ua?ua.value=ta:L?ba.append(pa,ta):ba.appendChild(f.create("input",{type:"hidden",name:pa,value:ta}))}}if(Q("esri-file-upload")){I.forEach(ba.elements,function(Y){Y.name===ra&&ba.removeChild(Y)});var qa=L?ba:new FormData(ba);
if(11<=Q("safari")&&"entries"in qa&&"delete"in qa){L=[];for(var Aa=qa.entries(),va=Aa.next();!va.done;){var wa=va.value;wa[1]instanceof File&&""===wa[1].name&&L.push(wa[0]);va=Aa.next()}L.forEach(function(Y){qa["delete"](Y)})}u.contentType=!1;u.postData=qa;delete u.form}else{ba.enctype="multipart/form-data";9>Q("ie")&&(ba.encoding="multipart/form-data");ba.method="post";I.some(ba.elements,function(Y){return Y.name===ra})||ba.appendChild(f.create("input",{type:"hidden",name:ra,value:ya}));if(-1!==
ca.toLowerCase().indexOf("addattachment")||-1!==ca.toLowerCase().indexOf("updateattachment"))ca+=(-1===ca.indexOf("?")?"?":"\x26")+ra+"\x3d"+ya,u.url=fa?ja+"?"+ca:ca;delete u.content}}if(T&&!u.hasOwnProperty("withCredentials")&&"with-credentials"===C.useCors){ja=fa?ja:ca;var Ba=g.canUseXhr(ja,!0),xa=-1<Ba?C.corsEnabledServers[Ba]:null;if(xa&&xa.hasOwnProperty("withCredentials"))xa.withCredentials&&(u.withCredentials=!0);else if(H.id){var Ca=H.id.findServerInfo(ja);Ca&&Ca.webTierAuth&&(u.withCredentials=
!0)}}u=x?x(u):u;var Da=function(){if("image"===u.handleAs)return w(u,z);if(X){if(E&&!Q("esri-file-upload")){U=new d(function(){Y.cancel()});var Y=k.post(u.url,u).then(function(ia){U.resolve(ia)}).otherwise(function(ia){U.reject(ia)});U.addCallback(function(ia){return u.load(ia)});U.addErrback(function(ia){return u.error(ia)});return U}!fa&&Q("safari")&&(u.url+=(-1===u.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+M++);if(W){u.uploadProgress=!0;u.data=u.postData;u.query=u.content;U=new d(function(){ka.cancel()});
var ka=t.post(u.url,u).then(function(ia){U.resolve(ia)},function(ia){U.reject(ia)},function(ia){U.progress({transferType:ia.transferType,loaded:ia.loaded,total:ia.total})});U.addCallback(function(ia){return u.load(ia)});U.addErrback(function(ia){return u.error(ia)});return U}return n.post(u)}return n.get(u)};return u.withCredentials&&e.isNoCorsRequestRequired(ca)?U=e.sendNoCorsRequest(ca,da).addBoth(function(){var Y=Da();U.ioArgs=Y.ioArgs;return Y}):Da()}u=x?x(u):u;u.jsonp=u.callbackParamName;u.query=
u.content;U=new d(function(){Fa.cancel()});var Fa=h.get(u.url,u).then(function(Y){U.resolve(Y)}).otherwise(function(Y){U.reject(Y)});U.addCallback(function(Y){return u.load(Y)});U.addErrback(function(Y){return u.error(Y)});return U}catch(Y){return U=new d,U.errback(u.error(Y)),U}}function N(u){var z=C.corsStatus,E=g.canUseXhr(u,!0);-1<E&&C.corsEnabledServers.splice(E,1);var L=new d;L.reject({log:!!B.isDebug});z[m(u)]=L.promise;return E}function G(u){var z=C.corsStatus;try{var E=m(u);if(C.corsDetection&&
C.useCors&&Q("esri-cors")&&u&&-1!==u.toLowerCase().indexOf("/rest/services")&&!g.hasSameOrigin(u,window.location.href)&&!g.canUseXhr(u)){if(z[E]&&!z[E].isCanceled())return z[E];var L=new d(r._dfdCanceller);z[E]=L.promise;var S=n.get({url:u.substring(0,u.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*C.corsDetectionTimeout});L._pendingDfd=S;S.then(function(R){R?(g.canUseXhr(u)||C.corsEnabledServers.push(E),L.resolve()):
L.reject()},function(R){L.reject(R)});return L.promise}}catch(R){}return F}function a(u){x=u}function c(u,z,E,L){function S(T){T._pendingDfd=A(E,L,ba,ca);if(!T._pendingDfd){T.ioArgs=T._pendingDfd&&T._pendingDfd.ioArgs;var Z=Error("Deferred object is missing");Z.log=!!B.isDebug;T.errback(Z);T._pendingDfd=null;return T}T._pendingDfd.addCallback(function(X){if(!X)return X;var ea=T._pendingDfd&&T._pendingDfd.ioArgs&&T._pendingDfd.ioArgs.xhr;if(!ea)return X;if(ea=ea.getResponseHeader("Content-Type"))if(ea=
ea.toLowerCase(),-1===ea.indexOf("text/plain")&&-1===ea.indexOf("application/json"))return X;if(X instanceof ArrayBuffer&&750>=X.byteLength)ea=new Blob([X]);else if(X instanceof Blob&&750>=X.size)ea=X;else return X;var fa=new d,la=new FileReader;la.readAsText(ea);la.onloadend=function(){if(!la.error)try{var ja=JSON.parse(la.result);if(ja.error)var ma=ja.error}catch(oa){}ma?(ma=q.mixin(Error(),ma),ma.log=!!B.isDebug,null==ma.httpCode&&(ma.httpCode=ma.code),fa.reject(ma)):fa.resolve(X)};return fa.promise}).addCallback(function(X){T.ioArgs=
T._pendingDfd&&T._pendingDfd.ioArgs;L.returnFullResponse&&(X={data:X,_xhr:T.ioArgs&&T.ioArgs.xhr,getHeader:p});T.callback(X);T._pendingDfd=null}).addErrback(function(X){if(X){var ea=X.code;var fa=X.subcode;var la=(la=X.messageCode)&&la.toUpperCase()}if(X&&403==ea&&(4==fa||X.message&&-1<X.message.toLowerCase().indexOf("ssl")&&-1===X.message.toLowerCase().indexOf("permission"))){if(!E._ssl){E._ssl=E._sslFromServer=!0;c(T,!0,E,L);return}}else if(X&&415==X.status){if(N(E.url),!E._err415){E._err415=1;
c(T,!0,E,L);return}}else if(H.id&&-1!==I.indexOf(H.id._errorCodes,ea)&&!H.id._isPublic(E.url)&&!W&&(403!=ea||-1===I.indexOf(K,la)&&(!O.isDefined(fa)||2==fa&&E._token))){T._pendingDfd=H.id.getCredential(E.url,{token:E._token,error:X});T._pendingDfd.addCallback(function(ja){E._token=ja.token;E._credential=ja;E._ssl=E._sslFromServer||ja.ssl;c(T,!0,E,L)}).addErrback(function(ja){T.errback(ja);T._pendingDfd=null});return}T.ioArgs=T._pendingDfd&&T._pendingDfd.ioArgs;T.isFulfilled()||T.errback(X);T._pendingDfd=
null}).then(null,null,function(X){T.progress(X)})}var R=E.form,W=L.disableIdentityLookup,U=L._preLookup,aa=!1;if(Q("esri-workers")&&!1!==C.useWorkers)if(!0===L.useWorkers||!0===C.useWorkers)aa=!0;else if(L.workerOptions){var da=L.workerOptions;if(da.callback||da.worker&&da.worker.worker instanceof Worker)aa=!0}var ca=R&&Q("esri-file-upload")&&R instanceof FormData,ba=R&&(R.elements?I.some(R.elements,function(T){return"file"===T.type}):ca),V=-1!==E.url.toLowerCase().indexOf("token\x3d")||E.content&&
E.content.token||ba&&I.some(R.elements,function(T){return"token"===T.name})?1:0;if(!z){u.addCallback(function(T){if(T&&(/\/sharing\/rest\/accounts\/self/i.test(E.url)||/\/sharing\/rest\/portals\/self/i.test(E.url))){if(!V&&!E._token&&T.user&&T.user.username){C.webTierAuthServers.push(m(E.url));var Z=C.corsEnabledServers,X=g.canUseXhr(E.url,!0),ea={host:m(E.url),withCredentials:!0};if(-1===X)Z.push(ea);else{var fa=Z[X];fa instanceof RegExp?(ea.host=fa,Z.splice(X,1,ea)):"object"===typeof fa?fa.withCredentials=
!0:Z.splice(X,1,ea)}}Array.isArray(T.authorizedCrossOriginNoCorsDomains)&&e.registerNoCorsDomains(T.authorizedCrossOriginNoCorsDomains)}if(T=E._credential)if(Z=(Z=H.id.findServerInfo(T.server))&&Z.owningSystemUrl)Z=Z.replace(/\/?$/,"/sharing"),(T=H.id.findCredential(Z,T.userId))&&-1===H.id._getIdenticalSvcIdx(Z,T)&&T.resources.splice(0,0,Z)});u.addBoth(function(T){delete E._credential;!T||Q("ie")&&T.nodeType||(T._ssl=E._ssl)});var ha=E.load,na=E.error;ha&&u.addCallback(function(T){var Z=u._pendingDfd;
Z=Z&&Z.ioArgs;return ha.call(Z&&Z.args,T,Z)});na&&u.addErrback(function(T){var Z=u._pendingDfd;Z=Z&&Z.ioArgs;return na.call(Z&&Z.args,T,Z)})}!H.id||V||E._token||H.id._isPublic(E.url)||W&&!U||!(z=H.id.findCredential(E.url))||(E._token=z.token,E._ssl=z.ssl);aa?L.workerOptions&&L.workerOptions.worker?(l||(l=n),n=L.workerOptions.worker,S(u)):D(["./workers/RequestClient"],function(T){l||(l=n);if(L.workerOptions){var Z=L.workerOptions;n=T.getClient(Z.callback,Z.cbFunction)}else n=T.getClient();S(u)}):(l&&
(n=l,l=null),S(u));return u}function b(u,z){u.url=g.fixUrl(u.url);z=z||{};var E=new d(r._dfdCanceller),L=G(u.url);E._pendingDfd=L;L.always(function(S){S&&"cancel"===S.dojoType?E.reject(S):c(E,!1,u,z)});return E}var l=null,x,C=J.defaults.io,K=["COM_0056","COM_0057","SB_0008"],M=0,P=/%[0-9A-F]{2}/i,F=function(){var u=new d;u.resolve();return u.promise}();b._makeRequest=A;b._processRequest=c;b._disableCors=N;b._detectCors=G;b.setRequestPreCallback=a;H.request=b;H._makeRequest=A;H._processRequest=c;H._disableCors=
N;H._detectCors=G;H.setRequestPreCallback=a;return b})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(D,I,B,d,q,y){function n(){var g=document.createElement("iframe");g.name="esri_core_jsonp_iframe";g.style.display="none";g.setAttribute("sandbox","allow-scripts");if(!y("ff")&&"srcdoc"in g){var r=D.toUrl("dojo/dojo.js"),e=q.replace("../../../dojo/dojo.js",r);r=r.slice(0,-7);e=e.replace("../../../dojo/",
r);g.srcdoc=e}else e=D.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===e.indexOf("https:")&&(e=e.replace("https:","http:")),g.src=e;document.body.appendChild(g);return g}function t(){var g=new MessageChannel;g.port1.addEventListener("message",h);g.port1.start();return g}function h(g){var r=g.data;if("ready"===r){r=0;for(var e=Q;r<e.length;r++)g=e[r],f(g,H);Q=null}else if(g=O[r.id])delete O[r.id],r.isError?g.dfd.reject(Error(r.message)):g.dfd.resolve(r.response)}function k(g,r){g.addEventListener("load",
function(){g.contentWindow.postMessage("init","*",[r.port2])})}function f(g,r){O[g.message.id]=g;r.port1.postMessage(g.message)}Object.defineProperty(I,"__esModule",{value:!0});var v,H,J=0,Q=[],O={};I.get=function(g,r){if(!y("esri-script-sandbox"))return d.get(g,r);var e=null;r&&(e={jsonp:r.jsonp,preventCache:r.preventCache,query:r.query,timeout:r.timeout});var m=new B(function(){if(Q){var w=Q.indexOf(p);-1<w&&Q.splice(w,1)}else p.message.id in O&&delete O[p.message.id]}),p={dfd:m,message:{id:"id"+
(++J+Math.random()),url:g,options:e}};v||(v=n(),H=t(),k(v,H));Q?Q.push(p):f(p,H);return m.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(D,I,B,d,q,y,n,t,h,k,f){function v(N,G){N.canDelete&&g._remove(N.id,G.options.frameDoc,!0)}function H(N){A&&A.length&&(q.forEach(A,function(G){g._remove(G.id,G.frameDoc);G.frameDoc=null}),A=[]);return N.options.jsonp?!N.data:
!0}function J(N){return!!this.scriptLoaded}function Q(N){return(N=N.options.checkString)&&eval("typeof("+N+') !\x3d\x3d "undefined"')}function O(N,G){if(this.canDelete){var a=this.response.options;A.push({id:this.id,frameDoc:a.ioArgs?a.ioArgs.frameDoc:a.frameDoc});a.ioArgs&&(a.ioArgs.frameDoc=null);a.frameDoc=null}G?this.reject(G):this.resolve(N)}function g(N,G,a){var c=B.parseArgs(N,B.deepCopy({},G));N=c.url;G=c.options;var b=B.deferred(c,v,H,G.jsonp?null:G.checkString?Q:J,O);y.mixin(b,{id:r+e++,
canDelete:!1});G.jsonp&&((new RegExp("[?\x26]"+G.jsonp+"\x3d")).test(N)||(N+=(~N.indexOf("?")?"\x26":"?")+G.jsonp+"\x3d"+(G.frameDoc?"parent.":"")+r+"_callbacks."+b.id),b.canDelete=!0,w[b.id]=function(C){c.data=C;b.handleResponse(c)});B.notify&&B.notify.emit("send",c,b.promise.cancel);if(!G.canAttach||G.canAttach(b)){var l=g._attach(b.id,N,G.frameDoc,function(C){if(!(C instanceof Error)){var K=Error("Error loading "+(C.target?C.target.src:"script"));K.source=C;C=K}b.reject(C);g._remove(b.id,G.frameDoc,
!0)});if(!G.jsonp&&!G.checkString)var x=n(l,m,function(C){if("load"===C.type||p.test(l.readyState))x.remove(),b.scriptLoaded=C})}I(b);return a?b:b.promise}k.add("script-readystatechange",function(N,G){return"undefined"!==typeof G.createElement("script").onreadystatechange&&("undefined"===typeof N.opera||"[object Opera]"!==N.opera.toString())});var r=D.id.replace(/[\/\.\-]/g,"_"),e=0,m=k("script-readystatechange")?"readystatechange":"load",p=/complete|loaded/,w=d.global[r+"_callbacks"]={},A=[];g.get=
g;g._attach=function(N,G,a,c){a=a||f.doc;var b=a.createElement("script");if(c)n.once(b,"error",c);b.type="text/javascript";try{b.src=G}catch(l){c&&c(b)}b.id=N;b.async=!0;b.charset="utf-8";return a.getElementsByTagName("head")[0].appendChild(b)};g._remove=function(N,G,a){h.destroy(t.byId(N,G));w[N]&&(a?w[N]=function(){delete w[N]}:delete w[N])};g._callbacksProperty=r+"_callbacks";return g})},"esri/core/sniff":function(){define(["../sniff"],function(D){return D})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(D,I,B,d,q,y,n,t,h,k,f,v){function H(p){return!this.isFulfilled()}function J(p){return!!this._finished}function Q(p,w){if(!w)try{var A=p.options,N=g.doc(g._frame),G=A.handleAs;if("html"!==G){if("xml"===G)if("html"===N.documentElement.tagName.toLowerCase()){t("a",N.documentElement).orphan();var a=N.documentElement.innerText||N.documentElement.textContent;a=a.replace(/>\s+</g,"\x3e\x3c");p.text=y.trim(a)}else p.data=N;else p.text=N.getElementsByTagName("textarea")[0].value;q(p)}else p.data=
N}catch(c){w=c}w?this.reject(w):this._finished?this.resolve(p):this.reject(Error("Invalid dojo/request/iframe request state"))}function O(p){this._callNext()}function g(p,w,A){var N=d.parseArgs(p,d.deepCreate(m,w),!0);p=N.url;w=N.options;if("GET"!==w.method&&"POST"!==w.method)throw Error(w.method+" not supported by dojo/request/iframe");g._frame||(g._frame=g.create(g._iframeName,e+"();"));p=d.deferred(N,null,H,J,Q,O);p._callNext=function(){this._calledNext||(this._calledNext=!0,g._currentDfd=null,
g._fireNextRequest())};p._legacy=A;g._dfdQueue.push(p);g._fireNextRequest();B(p);return A?p:p.promise}var r=D.id.replace(/[\/\.\-]/g,"_"),e=r+"_onload";v.global[e]||(v.global[e]=function(){var p=g._currentDfd;if(p){var w=k.byId(p.response.options.form)||p._tmpForm;if(w){for(var A=p._contentToClean,N=0;N<A.length;N++)for(var G=A[N],a=0;a<w.childNodes.length;a++){var c=w.childNodes[a];if(c.name===G){f.destroy(c);break}}p._originalAction&&w.setAttribute("action",p._originalAction);p._originalMethod&&
(w.setAttribute("method",p._originalMethod),w.method=p._originalMethod);p._originalTarget&&(w.setAttribute("target",p._originalTarget),w.target=p._originalTarget)}p._tmpForm&&(f.destroy(p._tmpForm),delete p._tmpForm);p._finished=!0}else g._fireNextRequest()});var m={method:"POST"};g.create=function(p,w,A){if(v.global[p])return v.global[p];if(v.global.frames[p])return v.global.frames[p];A||(h("config-useXDomain")&&h("config-dojoBlankHtmlUrl"),A=h("config-dojoBlankHtmlUrl")||I.toUrl("dojo/resources/blank.html"));
w=f.place('\x3ciframe id\x3d"'+p+'" name\x3d"'+p+'" src\x3d"'+A+'" onload\x3d"'+w+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',v.body());return v.global[p]=w};g.doc=function(p){if(p.contentDocument)return p.contentDocument;var w=p.name;if(w){var A=v.doc.getElementsByTagName("iframe");if(p.document&&A[w].contentWindow&&A[w].contentWindow.document)return A[w].contentWindow.document;if(v.doc.frames[w]&&v.doc.frames[w].document)return v.doc.frames[w].document}return null};
g.setSrc=function(p,w,A){p=v.global.frames[p.name];p.contentWindow&&(p=p.contentWindow);try{A?p.location.replace(w):p.location=w}catch(N){}};g._iframeName=r+"_IoIframe";g._notifyStart=function(){};g._dfdQueue=[];g._currentDfd=null;g._fireNextRequest=function(){try{if(!g._currentDfd&&g._dfdQueue.length){do var p=g._currentDfd=g._dfdQueue.shift();while(p&&(p.canceled||p.isCanceled&&p.isCanceled())&&g._dfdQueue.length);if(!p||p.canceled||p.isCanceled&&p.isCanceled())g._currentDfd=null;else{var w=p.response,
A=w.options,N=p._contentToClean=[],G=k.byId(A.form),a=d.notify,c=A.data||null;if(!p._legacy&&"POST"===A.method&&!G)G=p._tmpForm=f.create("form",{name:r+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},v.body());else if("GET"===A.method&&G&&-1<w.url.indexOf("?")){var b=w.url.slice(w.url.indexOf("?")+1);c=y.mixin(n.queryToObject(b),c)}if(G){if(!p._legacy){var l=G;do l=l.parentNode;while(l&&l!==v.doc.documentElement);l||(G.style.position="absolute",G.style.left="-1000px",G.style.top=
"-1000px",v.body().appendChild(G));G.name||(G.name=r+"_form")}if(c){l=function(u,z){f.create("input",{type:"hidden",name:u,value:z},G);N.push(u)};for(var x in c){var C=c[x];if(y.isArray(C)&&1<C.length)for(b=0;b<C.length;b++)l(x,C[b]);else{var K=t("input[name\x3d'"+x+"']",G);-1==K.indexOf()?l(x,C):K.val(C)}}}var M=G.getAttributeNode("action"),P=G.getAttributeNode("method"),F=G.getAttributeNode("target");w.url&&(p._originalAction=M?M.value:null,M?M.value=w.url:G.setAttribute("action",w.url));p._legacy?
P&&P.value||(P?P.value=A.method:G.setAttribute("method",A.method)):(p._originalMethod=P?P.value:null,P?P.value=A.method:G.setAttribute("method",A.method));p._originalTarget=F?F.value:null;F?F.value=g._iframeName:G.setAttribute("target",g._iframeName);G.target=g._iframeName;a&&a.emit("send",w,p.promise.cancel);g._notifyStart(w);G.submit()}else A="",w.options.data&&(A=w.options.data,"string"!==typeof A&&(A=n.objectToQuery(A))),l=w.url+(-1<w.url.indexOf("?")?"\x26":"?")+A,a&&a.emit("send",w,p.promise.cancel),
g._notifyStart(w),g.setSrc(g._frame,l,!0)}}}catch(u){p.reject(u)}};d.addCommonMethods(g,["GET","POST"]);return g})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(D,I,B,d,q){function y(h){for(;h.childNodes[0]&&1==h.childNodes[0].nodeType;)h=h.childNodes[0];return h}function n(h,k){"string"==typeof h?(h=d.toDom(h,k&&k.ownerDocument),11==h.nodeType&&(h=h.childNodes[0])):1==h.nodeType&&h.parentNode&&(h=h.cloneNode(!1));
return h}var t=D.NodeList;I.extend(t,{_placeMultiple:function(h,k){for(var f="string"==typeof h||h.nodeType?D(h):h,v=[],H=0;H<f.length;H++)for(var J=f[H],Q=this.length,O=Q-1,g;g=this[O];O--)0<H&&(g=this._cloneNode(g),v.unshift(g)),O==Q-1?d.place(g,J,k):J.parentNode.insertBefore(g,J),J=g;v.length&&(v.unshift(0),v.unshift(this.length-1),Array.prototype.splice.apply(this,v));return this},innerHTML:function(h){return arguments.length?this.addContent(h,"only"):this[0].innerHTML},text:function(h){if(arguments.length){for(var k=
0,f;f=this[k];k++)1==f.nodeType&&q.set(f,"textContent",h);return this}var v="";for(k=0;f=this[k];k++)v+=q.get(f,"textContent");return v},val:function(h){if(arguments.length){for(var k=I.isArray(h),f=0,v;v=this[f];f++){var H=v.nodeName.toUpperCase(),J=v.type,Q=k?h[f]:h;if("SELECT"==H)for(H=v.options,J=0;J<H.length;J++){var O=H[J];O.selected=v.multiple?-1!=B.indexOf(h,O.value):O.value==Q}else"checkbox"==J||"radio"==J?v.checked=v.value==Q:v.value=Q}return this}if((v=this[0])&&1==v.nodeType){h=v.value||
"";if("SELECT"==v.nodeName.toUpperCase()&&v.multiple){h=[];H=v.options;for(J=0;J<H.length;J++)O=H[J],O.selected&&h.push(O.value);h.length||(h=null)}return h}},append:function(h){return this.addContent(h,"last")},appendTo:function(h){return this._placeMultiple(h,"last")},prepend:function(h){return this.addContent(h,"first")},prependTo:function(h){return this._placeMultiple(h,"first")},after:function(h){return this.addContent(h,"after")},insertAfter:function(h){return this._placeMultiple(h,"after")},
before:function(h){return this.addContent(h,"before")},insertBefore:function(h){return this._placeMultiple(h,"before")},remove:t.prototype.orphan,wrap:function(h){if(this[0]){h=n(h,this[0]);for(var k=0,f;f=this[k];k++){var v=this._cloneNode(h);f.parentNode&&f.parentNode.replaceChild(v,f);y(v).appendChild(f)}}return this},wrapAll:function(h){if(this[0]){h=n(h,this[0]);this[0].parentNode.replaceChild(h,this[0]);h=y(h);for(var k=0,f;f=this[k];k++)h.appendChild(f)}return this},wrapInner:function(h){if(this[0]){h=
n(h,this[0]);for(var k=0;k<this.length;k++){var f=this._cloneNode(h);this._wrap(I._toArray(this[k].childNodes),null,this._NodeListCtor).wrapAll(f)}}return this},replaceWith:function(h){h=this._normalize(h,this[0]);for(var k=0,f;f=this[k];k++)this._place(h,f,"before",0<k),f.parentNode.removeChild(f);return this},replaceAll:function(h){h=D(h);for(var k=this._normalize(this,this[0]),f=0,v;v=h[f];f++)this._place(k,v,"before",0<f),v.parentNode.removeChild(v);return this},clone:function(){for(var h=[],
k=0;k<this.length;k++)h.push(this._cloneNode(this[k]));return this._wrap(h,this,this._NodeListCtor)}});t.prototype.html||(t.prototype.html=t.prototype.innerHTML);return t})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred","dojo/_base/url","../config","../urlUtils"],function(D,I,B,d){function q(n){n=new I(n);return n.scheme+"://"+n.authority}var y=B.defaults.io;return{registerNoCorsDomains:function(n){y.crossOriginNoCorsDomains||(y.crossOriginNoCorsDomains={});for(var t=y.crossOriginNoCorsDomains,
h=0;h<n.length;h++){var k=n[h];k=k.toLowerCase();/^https?:\/\//.test(k)?t[q(k)]=0:(t[q("http://"+k)]=0,t[q("https://"+k)]=0)}},isNoCorsRequestRequired:function(n){var t=y.crossOriginNoCorsDomains;return t?(n=q(n),n=n.toLowerCase(),!d.hasSameOrigin(n,window.location.origin)&&t[n]<Date.now()-36E5):!1},sendNoCorsRequest:function(n,t){var h=new D,k=y.crossOriginNoCorsDomains;k&&(k[q(n).toLowerCase()]=Date.now());k=d.urlToObject(n);n=k.path;if(k.query&&"json"===k.query.f||t&&"json"===t.f)n+="?f\x3djson";
fetch(n,{mode:"no-cors",credentials:"include"}).then(h.resolve,h.resolve);return h}}})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(D,I,B,d,q,y){D=D([d],{declaredClass:"esri.Evented",registerConnectEvents:function(){var n=this.constructor,t=this.constructor._meta.parents,h=[{}],k={},f,v=function(J,Q){I.isArray(J)||(J=[J]);for(var O=0;O<J.length;O++){var g=J[O];g._meta&&g._meta.parents&&v(g._meta.parents,Q);g.prototype._eventMap&&
Q.push(I.mixin({},g.prototype._eventMap))}return Q};if(!n._onMap){v(t,h);h.push(this._eventMap);t=I.mixin.apply(this,h);for(H in this)/^on\w/.test(H)&&I.isFunction(this[H])&&(h=this._hyphenLower(H).toLowerCase(),t[h]||(k[h]={method:H}));for(f in t){var H=this._onCamelCase(f);k[f]={method:H,argKeys:t[f]}}n._onMap=k;return n._onMap}},on:function(n,t){if(-1<n.indexOf(",")){for(var h=n.split(/\s*,\s*/),k=h.length,f=[];k--;)f.push(this.on(h[k],t));f.remove=function(){for(var J=0;J<f.length;J++)f[J].remove()};
return f}h=this.constructor._onMap||this.registerConnectEvents();k="string"==typeof n&&n.toLowerCase();var v=this._onCamelCase(k),H=h&&h[k];return(v=H&&H.method||this[v]&&I.isFunction(this[v])&&v)?H&&I.isArray(H.argKeys)?(h=this._onArr2Obj(t,h[k].argKeys),B.after(this,v,h,!0)):B.after(this,v,function(J){J=J||{};J.target||(J.target=this);t.call(this,J)},!0):this.inherited(arguments)},emit:function(n,t){var h,k,f=n.toLowerCase();var v=this._onCamelCase(n);var H=this.constructor._onMap||this.registerConnectEvents();
v=(k=H&&H[f]&&H[f].method||I.isFunction(this[v])&&v)&&this[k];k&&H&&H[f]&&this._onObj2Arr(function(){h=Array.prototype.slice.call(arguments)},H[f].argKeys)(t);t=t||{};t.target||(t.target=this);if(v){var J=h&&h.length?h:[t];J=v.apply(this,J)}this.inherited(arguments,[n,t]);return J},_onObj2Arr:function(n,t){if(t){var h=this;return function(k){var f,v=[],H=t.length;for(f=0;f<H;f++)v[f]=k[t[f]];n.apply(h,v)}}return n},_onArr2Obj:function(n,t){if(t){var h=this;return function(){var k,f={},v=arguments.length;
for(k=0;k<v;k++)f[t[k]]=arguments[k];f.target||(f.target=h);n.call(h,f)}}return n},_hyphenLower:function(n){return n.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(t,h){return(h?"-":"")+t.toLowerCase()})},_onCamelCase:function(n){return"on"+n.substr(0,1).toUpperCase()+n.substr(1).replace(/\-([a-z])/g,function(t,h){return h.toUpperCase()})}});return y.Evented=D})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(D,I,B){I=I(null,{declaredClass:"esri.OAuthCredential",
oAuthInfo:null,storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(d,q){this.oAuthInfo=d;this.storage=q;this._init()},isValid:function(){var d=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)d=!0;else{var q=Date.now();this.expires>q&&(this.expires-q)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(d=!0)}return d},save:function(){if(!this.storage)return!1;
var d=this._load(),q=this.oAuthInfo;if(q&&q.authNamespace&&q.portalUrl){var y=d[q.authNamespace];y||(y=d[q.authNamespace]={});this.appId||(this.appId=q.appId);y[q.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(d))}catch(n){return!1}return!0}return!1},destroy:function(){var d=this._load(),q=this.oAuthInfo;
if(q&&q.appId&&q.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var y=q.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",n=new FormData;n.append("f","json");n.append("auth_token",this.refreshToken||this.token);n.append("client_id",q.appId);n.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(y,n);else{var t=new XMLHttpRequest;t.open("POST",y);
t.send(n)}}if(q&&q.authNamespace&&q.portalUrl&&this.storage&&(y=d[q.authNamespace])){delete y[q.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(d))}catch(h){}}q&&(this.oAuthInfo=q._oAuthCred=null)},_init:function(){var d=this._load(),q=this.oAuthInfo;q&&q.authNamespace&&q.portalUrl&&(d=d[q.authNamespace])&&(d=d[q.portalUrl])&&(this.appId=d.appId,this.codeVerifier=d.codeVerifier,this.expires=d.expires,this.refreshToken=d.refreshToken,this.ssl=d.ssl,this.stateUID=d.stateUID,this.token=
d.token,this.userId=d.userId)},_load:function(){var d={};if(this.storage){var q=this.storage.getItem("esriJSAPIOAuth");if(q)try{d=JSON.parse(q)}catch(y){}}return d}});return D.OAuthCredential=I})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(D,I,B,d,q){var y=B(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(n){d.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",
authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},n)},_oAuthCred:null,toJson:function(){return I.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,
popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new y(this.toJson())}});d.setObject("arcgis.OAuthInfo",y,D);return y})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(D,I,B,d,q,y,n,t){return D("dijit.form.Form",[q,y,n,t],{name:"",action:"",method:"",encType:"","accept-charset":"",
accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(h){I.set(this.domNode,"encType",h);d("ie")&&(this.domNode.encoding=h);this._set("encType",h)},reset:function(h){var k={returnValue:!0,
preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:h?h.target:this.domNode,target:h?h.target:this.domNode};!1!==this.onReset(k)&&k.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(h){this.reset(h);h.stopPropagation();h.preventDefault();return!1},_onSubmit:function(h){var k=this.constructor.prototype;if(this.execute!=k.execute||this.onExecute!=k.onExecute)B.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.",
"","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(h)&&(h.stopPropagation(),h.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),
function(D,I,B,d,q,y,n,t,h,k,f,v,H){var J=null,Q=null;try{J=window.localStorage,Q=window.sessionStorage}catch(g){}var O=window.crypto||window.msCrypto;return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(g){this._oAuthRedirectFunc=g},oAuthSignIn:function(g,r,e,m){var p=this._oAuthDfd=new t;p.resUrl_=g;p.sinfo_=r;p.oinfo_=e;var w=e._oAuthCred;if(w.storage&&("authorization-code"===e.flowType||"auto"===e.flowType&&!e.popup&&8.4<=r.currentVersion)){var A=O.getRandomValues(new Uint8Array(32));var N=d.base64UrlEncode(A);w.codeVerifier=N;A=O.getRandomValues(new Uint8Array(32));w.stateUID=d.base64UrlEncode(A);w.save()||(w.codeVerifier=N=null)}else w.codeVerifier=null;var G=
this;this._getCodeChallenge(N).then(function(a){var c=!m||!1!==m.oAuthPopupConfirmation;if(!e.popup||!c)return G._doOAuthSignIn(g,r,e,a),p;p.codeChallenge_=a;G._nls||(G._nls=f.identity);G.oAuthDialog||(G.oAuthDialog=G._createOAuthDialog());a=G.oAuthDialog;c=m&&m.error;var b=m&&m.token;I.hide(a.errMsg_);c&&403==c.code&&b&&(k.set(a.errMsg_,"innerHTML",G._nls.forbidden),I.show(a.errMsg_));k.set(a.serverLink_,{title:r.server,innerHTML:-1!==r.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":
r.server});a.show()});return p},setOAuthResponseHash:function(g){g&&("#"===g.charAt(0)&&(g=g.substring(1)),this._processOAuthPopupParams(v.queryToObject(g)))},_createOAuthDialog:function(){var g=this._nls,r=B.substitute(g,this._oAuthDialogContent);r=B.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},r);var e=new q({title:g.title,content:r,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var m=e.esriIdMgr_._oAuthDfd;
e.hide_();e.esriIdMgr_._doOAuthSignIn(m.resUrl_,m.sinfo_,m.oinfo_,m.codeChallenge_)},cancel_:function(){var m=e.esriIdMgr_._oAuthDfd;e.esriIdMgr_._oAuthDfd=null;e.hide_();var p=Error("ABORTED");p.code="IdentityManager.2";p.log=!!n.isDebug;m.errback(p)},hide_:function(){I.hide(e.errMsg_);e.hide();q._DialogLevelManager.hide(e)}});g=e.domNode;e.btnSubmit_=y.byNode(h.query(".esriIdSubmit",g)[0]);e.btnCancel_=y.byNode(h.query(".esriIdCancel",g)[0]);e.serverLink_=h.query(".serverLink",g)[0];e.errMsg_=h.query(".esriErrorMsg",
g)[0];e.connect(e.btnSubmit_,"onClick",e.execute_);e.connect(e.btnCancel_,"onClick",e.onCancel);e.connect(e,"onCancel",e.cancel_);return e},_doOAuthSignIn:function(g,r,e,m){var p=this,w=e._oAuthCred,A={portalUrl:e.portalUrl};!e.popup&&e.preserveUrlHash&&window.location.hash&&(A.hash=window.location.hash);w.stateUID&&(A.uid=w.stateUID);A={client_id:e.appId,response_type:w.codeVerifier?"code":"token",state:JSON.stringify(A),expiration:e.expiration,locale:e.locale,redirect_uri:this._getRedirectURI(e,
!!w.codeVerifier)};e.forceLogin&&(A.force_login=!0);e.forceUserId&&e.userId&&(A.prepopulatedusername=e.userId);!e.popup&&this._doPortalSignIn(g)&&(A.redirectToUserOrgUrl=!0);w.codeVerifier&&(A.code_challenge=m||w.codeVerifier,A.code_challenge_method=m?"S256":"plain");m=e.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";w=m+"?"+v.objectToQuery(A);if(e.popup){var N=window.open(w,"esriJSAPIOAuth",e.popupWindowFeatures);N?(N.focus(),this._oAuthDfd.oAuthWin_=N,this._oAuthIntervalId=setInterval(function(){if(N.closed){clearInterval(p._oAuthIntervalId);
p._oAuthOnPopupHandle.remove();var G=p._oAuthDfd;if(G){var a=Error("ABORTED");a.code="IdentityManager.2";a.log=!!n.isDebug;G.errback(a)}}},500),p._oAuthOnPopupHandle=H.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(G){"arcgis:auth:hash"===G.type?p.setOAuthResponseHash(G.detail):p._setOAuthResponseQueryString(G.detail)})):(g=Error("ABORTED"),g.name="identity-manager:user-aborted",g.code="IdentityManager.2",g.log=!!n.isDebug,this._oAuthDfd.errback(g))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:A,authorizeUrl:m,resourceUrl:g,serverInfo:r,oAuthInfo:e}):window.location.href=w},_getCodeChallenge:function(g){if(g&&window.isSecureContext)return g=(new TextEncoder).encode(g),O.subtle.digest("SHA-256",g).then(function(r){return d.base64UrlEncode(new Uint8Array(r))});g=new t;g.resolve(null);return g},_getRedirectURI:function(g,r){var e=window.location.href.replace(/#.*$/,"");if(g.popup)return d.getAbsoluteUrl(g.popupCallbackUrl);
if(r){var m=d.urlToObject(e);if(m.query)return"code error error_description message_code persist state".split(" ").forEach(function(p){delete m.query[p]}),(e=v.objectToQuery(m.query))?m.path+"?"+e:m.path}return e},_processOAuthPopupParams:function(g){var r=this._oAuthDfd;this._oAuthDfd=null;if(r)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),g.error){var e="access_denied"===g.error;g=Error(e?"ABORTED":"OAuth: "+g.error+" - "+g.error_description);
g.name=e?"identity-manager:user-aborted":"identity-manager:authentication-failed";g.code="IdentityManagerBase."+(e?2:3);g.log=!!n.isDebug;r.errback(g)}else this._processOAuthResponseParams(g,r.oinfo_,r.sinfo_).then(function(m){r.resolve(m)})["catch"](function(m){r.reject(m)})},_processOAuthResponseParams:function(g,r,e){var m=r._oAuthCred;if(g.code){var p=m.codeVerifier;m.codeVerifier=null;m.stateUID=null;m.save();return this._getOAuthToken(e.server,g.code,r.appId,this._getRedirectURI(r,!0),p).then(function(A){var N=
new D({userId:A.username,server:e.server,token:A.access_token,expires:Date.now()+1E3*A.expires_in,ssl:A.ssl,oAuthState:g.state,_oAuthCred:m});r.userId=N.userId;m.storage=A.persist?J:Q;m.refreshToken=A.refresh_token;m.token=null;m.expires=A.refresh_token_expires_in?Date.now()+1E3*A.refresh_token_expires_in:null;m.userId=N.userId;m.ssl=N.ssl;m.save();return N})}p=new D({userId:g.username,server:e.server,token:g.access_token,expires:Date.now()+1E3*Number(g.expires_in),ssl:"true"===g.ssl,oAuthState:g.state,
_oAuthCred:m});r.userId=p.userId;m.storage=g.persist?J:Q;m.refreshToken=null;m.token=p.token;m.expires=p.expires;m.userId=p.userId;m.ssl=p.ssl;m.save();var w=new t;w.resolve(p);return w},_setOAuthResponseQueryString:function(g){g&&("?"===g.charAt(0)&&(g=g.substring(1)),this._processOAuthPopupParams(v.queryToObject(g)))}}})},"esri/core/events":function(){define([],function(){return{on:function(D,I,B){if(!D||"function"!==typeof D.on&&"function"!==typeof D.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in D)return D.on(I,B);if(Array.isArray(I)){for(var d=I.slice(),q=0;q<d.length;q++)D.addEventListener(d[q],B);return{remove:function(){for(var y=0;y<d.length;y++)D.removeEventListener(d[y],B)}}}D.addEventListener(I,B);return{remove:function(){D.removeEventListener(I,B)}}}}})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(D,I){D.cookie=function(B,d,q){var y=document.cookie;if(1==arguments.length)var n=(n=y.match(new RegExp("(?:^|; )"+I.escapeString(B)+"\x3d([^;]*)")))?
decodeURIComponent(n[1]):void 0;else{q=q||{};y=q.expires;if("number"==typeof y){var t=new Date;t.setTime(t.getTime()+864E5*y);y=q.expires=t}y&&y.toUTCString&&(q.expires=y.toUTCString());d=encodeURIComponent(d);y=B+"\x3d"+d;for(var h in q)y+="; "+h,t=q[h],!0!==t&&(y+="\x3d"+t);document.cookie=y}return n};D.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&
this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return D.cookie})},"arcgisonline/pages/utils/queryHandler":function(){define(["require","exports"],function(D,I){Object.defineProperty(I,"__esModule",{value:!0});I.queryToObject=I.objectToQuery=void 0;I.objectToQuery=function(B){var d=new URLSearchParams,q=function(t,h){void 0!==h&&null!==h&&(Array.isArray(h)?0<h.length&&h.forEach(function(k){return d.append(t,k)}):d.append(t,String(h)))},y=0;for(B=Object.entries(B);y<B.length;y++){var n=
B[y];q(n[0],n[1])}return d.toString()};I.queryToObject=function(B,d){var q=new URLSearchParams(B);q=Array.from(q.entries());if(d){for(var y={},n=0;n<q.length;n++){var t=q[n],h=t[0];t=t[1];var k=y[h];Array.isArray(k)?k.push(t):y[h]="string"===typeof y[h]?[y[h],t]:t}return y}y={};for(n=0;n<q.length;n++)t=q[n],h=t[0],t=t[1],y[h]=y[h]?y[h]+(","+t):t;return y}})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"*now":function(D){D(['dojo/i18n!*preload*arcgisonline/nls/signin*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/signin","require exports tslib ./esriGeowConfig ./pages/utils/signin ./pages/utils/storage dojo/Deferred dojo/cookie dojo/_base/kernel esri/IdentityManager esri/request ./pages/utils/queryHandler".split(" "),function(D,I,B,d,q,y,n,t,h,k,f,v){function H(){var O=d["default"].restBaseUrl+"portals/self",g=t["default"]("arcgis_auth");g=g?JSON.parse(g):null;return f["default"]({url:O,content:{f:"json",token:g&&g.token||null},handleAs:"json"}).then(function(r){return r})}function J(){return H().then(function(O){return O},
function(){t["default"]("arcgis_auth",null,{expires:-1,path:"/",domain:document.domain});t["default"]("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"});t["default"]("arcgis_auth",null,{expires:-1,path:"/",domain:".esri.com"});return{}})}function Q(O,g,r,e,m,p,w){var A=d["default"].emailVerificationEnabled||void 0,N=(null===w||void 0===w?0:w.state)?JSON.parse(w.state):{};r=B.__assign(B.__assign({},N),{portalUrl:q["default"].getPortalUrl(),returnUrl:r,useLandingPage:e||!r,clientId:O});O=
B.__assign(B.__assign({},w),{client_id:(null===w||void 0===w?void 0:w.appId)||O,response_type:(null===w||void 0===w?void 0:w.response_type)||"token",display:"default",state:JSON.stringify(r),expiration:d["default"].expiration||20160,locale:(null===w||void 0===w?void 0:w.locale)||h["default"].locale,redirect_uri:(d["default"].baseUrl+"accountswitcher-callback.html").replace("http:","https:"),force_login:m,hideCancel:!0,showSignupOption:!0,canHandleCrossOrgSignIn:!0,signuptype:"esri",redirectToUserOrgUrl:p,
allow_verification:A});location.href=g+"?"+v.objectToQuery(O)}Object.defineProperty(I,"__esModule",{value:!0});d=B.__importDefault(d);q=B.__importDefault(q);y=B.__importDefault(y);n=B.__importDefault(n);t=B.__importDefault(t);h=B.__importDefault(h);k=B.__importDefault(k);f=B.__importDefault(f);v=B.__importStar(v);(function(){var O=new n["default"];try{var g=y["default"].getLocalStorageItem("portalAppClientId")||y["default"].getSessionStorageItem("portalAppClientId")||d["default"].clientId||"arcgisonline"}catch(r){g=
d["default"].clientId||"arcgisonline"}f["default"]({url:d["default"].restBaseUrl+"portals/self/settings",content:{f:"json"}}).then(function(r){if(r.anonymousAccessNotice&&r.anonymousAccessNotice.enabled)if(t["default"]("ago_conditions_accepted"))O.resolve();else return window.location.href=d["default"].baseUrl+"pages/Account/accept_conditions.html#client_id\x3d"+g+"\x26redirect_uri\x3d"+window.location.href;else O.resolve()},function(){O.resolve()});O.then(function(){J().then(function(r){var e=v.queryToObject(window.location.search.slice(1))||
{},m=e.returnUrl;r=r.isPortal;var p=e.useLandingPage||!m?!0:!1,w=p||e.forceLogin||!m?!0:!1,A=r||d["default"].isDebug?void 0:!0;m&&(q["default"].isValidReturnUrl(r,m)||(m=null));k["default"].setOAuthRedirectionHandler(function(G){Q(g,G.authorizeUrl,m,p,w,A,G.authorizeParams)});var N=d["default"].restBaseUrl.replace(/^http:/i,"https:")+"oauth2/authorize";q["default"].getCredential(w,{oAuthPopupConfirmation:!1}).then(function(){Q(g,N,m,p,w,A)})})})})()});