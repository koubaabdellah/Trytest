//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/layers/support/WebGLRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-style dojox/gfx/matrix ../../kernel ../../lang ../../sniff ../../urlUtils ../../geometry/scaleUtils ../vectorTiles/core/promiseUtils ../vectorTiles/views/2d/engine/StageGL ../vectorTiles/views/2d/engine/webgl/WGLFeatureView ../vectorTiles/views/2d/layers/features/processors/SymbolProcessor ../vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer ../vectorTiles/views/2d/support/HighlightOptions ../vectorTiles/layers/support/TileInfo ../vectorTiles/views/2d/tiling/TileInfoView ../vectorTiles/geometry/SpatialReference ../vectorTiles/geometry/support/spatialReferenceUtils ../vectorTiles/renderers/SimpleRenderer ../vectorTiles/renderers/ClassBreaksRenderer ../vectorTiles/renderers/UniqueValueRenderer".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b,c,m,u){function w(O){Object.defineProperty(O,"width",{get:function(){return this.size[0]}});Object.defineProperty(O,"height",{get:function(){return this.size[1]}});Object.defineProperty(O,"center",{get:function(){var L=this.viewpoint.targetGeometry;return[L.x,L.y]}})}var A=r["default"],C=q.SymbolProcessor,E=v["default"],G=d("esri-will-change"),F=void 0===d("ie")&&7<=d("trident"),I=d("safari"),M=F||d("edge"),Y=function(){var O=window.performance||{},
L=O.now||O.webkitNow||O.msNow||O.oNow||O.mozNow;if(void 0!==L)return function(){return L.call(O)};var P=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-P}}();r=d("ff");q=d("ie");v=d("webkit");d=d("opera");var R=(new Date).getTime(),S=window.requestAnimationFrame;S||(S=window[(v&&"webkit"||r&&"moz"||d&&"o"||q&&"ms")+"RequestAnimationFrame"])||(S=function(O){var L=
Y(),P=Math.max(0,16-(L-R)),X=window.setTimeout(function(){O(Y())},P);R=L+P;return X});D=D(null,{surfaceType:"webgl",surface:null,map:null,layer:null,updateOnPan:!1,renderOnNav:!1,_canvas:null,_mapSR4:null,_dprWatchDelay:2E3,_dprTimer:null,_rendererEvalTimer:null,_redrawPromises:null,_defaultTileSize:512,_tileInfo:null,_tileInfoView:null,_wglContainer:null,_wglView:null,_tileRenderer:null,_tileRendererProps:null,_layerListenerHandles:null,_mapListenerHandles:null,_symbolProcessor:null,_returnCentroid:null,
_started:!1,_renderRequested:!1,_updateRequested:!1,_frameRequested:!1,_frameHandle:null,_viewState:null,_renderParameters:null,_updateParameters:null,_zooming:!1,_panning:!1,_scaleMatrix:null,_defaultTransition:"transform 500ms ease",_panDx:0,_panDy:0,_clipRect:null,constructor:function(O){this._frame=this._frame.bind(this);this._evalRendererChange=this._evalRendererChange.bind(this);this._redrawPromises=new Map;n.mixin(this,O);this._setup()},destroy:function(){this._teardown()},getNode:function(){return this._canvas},
getEventSource:function(){return this.getNode()},setClip:function(O){this._clipRect=null;var L=M&&F?"rect(auto,auto,auto,auto)":null;if(O){L=O.x;var P=O.y,X=O.width;O=O.height;this._clipRect={x:L,y:P,width:X,height:O};var Q=this.layer.getNavigationTransform();L+=Q.dx;P+=Q.dy;L=M?this._getClipRect(L,P,X,O):this._getClipPath(L,P,X,O)}f.set(this.getNode(),M?"clip":"clip-path",L);I&&f.set(this.getNode(),"-webkit-clip-path",L)},start:function(){this._started=!0;this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._watchDPR();this._updateMapView(this.map.extent)},stop:function(){this._started=!1;this._unwatchDPR();this._stopFrame()},redraw:function(){this._handleRendererChange()},hitTest:function(O,L){return this.layer.suspended?h.resolve(null):this._wglView.hitTest(O,L).then(function(P){return 0===P.length?null:this.layer._mode._featureMap[P[0]]}.bind(this))},syncHitTest:function(O,L){var P=this._wglContainer.prepareChildrenRenderParameters(this._renderParameters);P=this._wglView.prepareChildrenRenderParameters(P);
P=this._wglView._hitTest(P,O,L);this._scheduleRender();return this.layer._mode._featureMap[P[0]]},_setup:function(){this._initState();this._createWGLContainer();this._createTileRenderer();this._applyLayerSettings();this._createMapListeners();this._setViewState();this._initRendering()},_teardown:function(){this._destroyRendering();this._destroyMapListeners();this._destroyLayerListeners();this._destroyTileRenderer();this._destroyWGLContainer();this.stop();this.surface.getEventSource().removeChild(this.getNode())},
_createWGLContainer:function(){this._wglContainer=new t;this._canvas=this._wglContainer.createElement();G&&f.set(this._canvas,"will-change","transform");this._wglContainer.setElement(this._canvas);this.surface.getEventSource().appendChild(this._canvas);this._wglContainer.parent={requestChildRender:this._scheduleRender.bind(this)};this._wglContainer.attach(this._renderParameters)},_destroyWGLContainer:function(){this._wglContainer.detach(this._renderParameters);this._wglContainer=null},_createTileRenderer:function(){var O=
this.layer;this._tileRendererProps={layerView:{requestUpdate:function(){this._scheduleUpdate()}.bind(this)},highlightOptions:new x,layer:{objectIdField:O.objectIdField,geometryType:this._getNormalizedGeometryType(O),spatialReference:new z(O.spatialReference.toJson()),fields:O.fields,typeIdField:O.typeIdField,types:a.map(O.types,function(L){return L.toJson()}),outFields:O.getOutFields(),definitionExpression:null,renderer:this._getRenderer4(),gdbVersion:null,historicMoment:null},tileInfoView:this._tileInfoView};
this._tileRenderer=new E(this._tileRendererProps);this._installTileRenderer(this._tileRenderer)},_installTileRenderer:function(O){this._wglView=new A({highlightOptions:O.highlightOptions,tileInfoView:O.tileInfoView,layer:this.layer});O._featuresView=this._wglView;this._wglContainer.addChild(this._wglView);this._wglView._container=this._wglContainer},_getNormalizedGeometryType:function(O){return O.hasXYFootprint()?"esriGeometryPolygon":O.geometryType},_destroyTileRenderer:function(){this._wglContainer.removeChild(this._wglView);
this._wglView.dispose();this._tileRendererProps=this._tileRenderer=this._wglView=this._wglView._container=null},_applyLayerSettings:function(){this._wglContainer.opacity=this.layer.opacity;this._wglContainer.visible=!this.layer.suspended;this._createLayerListeners()},_createLayerListeners:function(){this._destroyLayerListeners();var O=this.layer;this._layerListenerHandles=[O.on("opacity-change",function(){this._wglContainer.opacity=this.layer.opacity}.bind(this)),O.on("suspend",function(){this._wglContainer.visible=
!1}.bind(this)),O.on("resume",function(){this._wglContainer.visible=!0}.bind(this)),O.on("renderer-change",function(){this._handleRendererChange()}.bind(this))]},_destroyLayerListeners:function(){a.forEach(this._layerListenerHandles,function(O){O.remove()});this._layerListenerHandles=null},_createMapListeners:function(){this._destroyMapListeners();var O=this.map;this._mapListenerHandles=[O.on("pan-start",function(L){this._panning=!0;this.updateOnPan||this.renderOnNav||this._stopFrame()}.bind(this)),
O.on("pan",function(L){this._applyPanEvent(L)}.bind(this)),O.on("pan-end",function(L){this._panning=!1;this._applyPanEvent(L)}.bind(this)),O.on("extent-change",function(L){f.set(this.getNode(),p._css.names.transition,"none");this._updateMapView(L.extent)}.bind(this)),O.on("zoom-start",function(L){this._zooming=!0;this._stopFrame()}.bind(this)),O.on("zoom-end",function(L){this._zooming=!1}.bind(this)),O.on("scale",function(L){if(!this.renderOnNav){f.set(this.getNode(),p._css.names.transition,L.immediate?
"none":this._defaultTransition);var P=this.map.__visibleDelta;P=g.translate(-P.x,-P.y);this._scaleMatrix=L=g.multiply(g.invert(P),L.matrix,P);this._applyTransform(L)}}.bind(this))]},_destroyMapListeners:function(){a.forEach(this._mapListenerHandles,function(O){O.remove()});this._mapListenerHandles=null},_getRenderer4:function(O){if(O=O||this.layer._getRenderer()){O=this._fixImageUrl(O.toJson());var L;"simple"===O.type?L=c.fromJSON(O):"classBreaks"===O.type?L=m.fromJSON(O):"uniqueValue"===O.type&&
(L=u.fromJSON(O));return L}},_fixImageUrl:function(O){var L=[];switch(O.type){case "simple":L.push(O.symbol);break;case "uniqueValue":L.push(O.defaultSymbol);L=L.concat(a.map(O.uniqueValueInfos,function(K){return K.symbol}));break;case "classBreaks":L.push(O.defaultSymbol),L=L.concat(a.map(O.classBreakInfos,function(K){return K.symbol}))}L=a.filter(L,function(K){return!!K});var P=this.layer,X=P._url.path+"/images/",Q=P._getToken();a.forEach(L,function(K){var U=K.url;U&&(-1===U.search(/https?:/)&&
-1===U.indexOf("data:")&&(K.url=X+U),Q&&-1!==K.url.search(/https?:/)&&e.hasSameOrigin(K.url,P._url.path)&&(K.url+="?token\x3d"+Q))});return O},_setRenderer:function(O){this._tileRendererProps.layer.renderer=O;O=this._tileRenderer.getProcessorConfiguration();var L=this._symbolProcessor;L.setConfiguration(O);this._returnCentroid=L._getReturnCentroid(L.getRendererInfo().renderer);return O},_handleRendererChange:function(){this._rendererEvalTimer||(this._rendererEvalTimer=setTimeout(this._evalRendererChange,
0))},_cancelRendererEval:function(){clearTimeout(this._rendererEvalTimer);this._rendererEvalTimer=null},_evalRendererChange:function(){this._cancelRendererEval();var O=this._returnCentroid,L=this._setRenderer(this._getRenderer4());this._cancelRedraw();this._tileRenderer.needsProcessorReconfiguration(L)?(this._tileRenderer.applyConfiguration(L,!0),O!==this._returnCentroid&&this._returnCentroid?this.layer._mode.refresh():this._redrawView()):(this._tileRenderer.applyConfiguration(L,!1),this._scheduleUpdate())},
_redrawView:function(){this._wglView.children.slice(0).forEach(function(O,L){var P=O.key.id,X=this.layer._mode._tileRequests.get(P);X&&(X=this._redrawTile(X.tsTile,O,X.featureSet),X.isFulfilled()||this._redrawPromises.set(P,X))}.bind(this))},_redrawTile:function(O,L,P){return this._symbolProcessor.getMeshData(O,P).then(function(X){var Q=L.key.id;this._redrawPromises["delete"](Q);this.layer._mode._tileRequests.get(Q)&&this._repaintTile(L,X.data)}.bind(this)).otherwise(function(X){this._redrawPromises["delete"](L.key.id)}.bind(this))},
_repaintTile:function(O,L){this._wglView.removeChild(O);O.attached=!1;this._tileRenderer.onTileData({tileKey:O.key.id,data:L});this._wglView.addChild(O)},_cancelRedraw:function(O){O?(O=this._redrawPromises.get(O))&&O.cancel():this._redrawPromises.forEach(function(L,P){L.cancel()})},_initState:function(){this._mapSR4=new z(this.map.spatialReference.toJson());var O={};w(O);this._viewState=n.mixin(O,{scale:0,size:[0,0],rotation:0,resolution:1,worldScreenWidth:0,spatialReference:this._mapSR4,viewpoint:{rotation:0,
scale:0,targetGeometry:{x:0,y:0},camera:null,clone:function(){var L=n.mixin({},this);L.targetGeometry&&(L.targetGeometry=n.mixin({},L.targetGeometry));return L}},toScreen:function(L,P){var X=this.center[1]+this.resolution*this.height*.5;L[0]=(P[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;L[1]=(X-P[1])/this.resolution;return L},toMap:function(L,P){var X=this.center[1]+this.resolution*this.height*.5;L[0]=this.center[0]-this.resolution*this.width*.5+P[0]*this.resolution;L[1]=X-
P[1]*this.resolution;return L},clone:function(){var L=n.mixin({},this);w(L);L.size&&(L.size=L.size.slice(0));L.viewpoint&&(L.viewpoint=L.viewpoint.clone());return L}});this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._tileInfo=y.create({spatialReference:this._mapSR4,size:this._defaultTileSize});this._tileInfoView=new B(this._tileInfo)},_initRendering:function(){var O=
this._tileRendererProps.layer;this._symbolProcessor=new C({configuration:null,service:{fields:O.fields,geometryType:O.geometryType,objectIdField:O.objectIdField,typeIdField:O.typeIdField,types:O.types},spatialReference:this._mapSR4,tileRenderer:this._tileRenderer});O=this._setRenderer(this._getRenderer4());this._tileRenderer.applyConfiguration(O,!0)},_destroyRendering:function(){this._symbolProcessor&&this._symbolProcessor.destroy();this._cancelRendererEval();this._cancelRedraw()},_updateMapView:function(O){this._setViewState(O);
this._scheduleUpdate();this._scheduleRender()},_setViewState:function(O){var L=this.map;if(L.loaded){O=O?O.getCenter():L.extent.getCenter();var P=this._viewState;P.viewpoint.targetGeometry=O.toJson();P.scale=P.viewpoint.scale=L.getScale();P.size=[L.width,L.height]}},_updateViewState:function(){var O=this._viewState;O.resolution=O.scale/(39.37*l.getUnitValueForSR(this.map.spatialReference)*96);var L=0;O.spatialReference.isWrappable&&(L=b.getInfo(O.spatialReference),L=L.valid[1]-L.valid[0]);O.worldScreenWidth=
Math.round(L/O.resolution)},_getClipPath:function(O,L,P,X){return"inset("+(L?L-this._panDy:L)+"px "+(this.map.width-(O+P)+this._panDx)+"px "+(this.map.height-(L+X)+this._panDy)+"px "+(O?O-this._panDx:O)+"px)"},_getClipRect:function(O,L,P,X){L-=this._panDy;O-=this._panDx;return"rect("+L+"px, "+(O+P)+"px, "+(L+X)+"px, "+O+"px)"},_stopFrame:function(){this._frameRequested=this._updateRequested=this._renderRequested=!1;cancelAnimationFrame(this._frameHandle);this._frameHandle=null},_canRender:function(){return this.renderOnNav||
!this._zooming&&!this._panning},_canUpdate:function(){return this.updateOnPan||!this._zooming&&!this._panning},_watchDPR:function(){this._unwatchDPR();this._dprTimer=setTimeout(function(){this._renderParameters.pixelRatio!==window.devicePixelRatio&&this._scheduleRender();this._watchDPR()}.bind(this),this._dprWatchDelay)},_unwatchDPR:function(){clearTimeout(this._dprTimer);this._dprTimer=null},_scheduleRender:function(){this._started&&this._canRender()&&(this._renderRequested=!0,this._scheduleFrame())},
_scheduleUpdate:function(){this._started&&this._canUpdate()&&(this._updateRequested=!0,this._scheduleFrame())},_scheduleFrame:function(){this._frameRequested||(this._frameRequested=!0,this._frameHandle=S(this._frame))},_frame:function(){this._frameRequested&&(this._frameRequested=!1,this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=window.devicePixelRatio),this._updateParameters.stationary=this._renderParameters.stationary=
!0,this._updateViewState(),this._renderRequested&&this._canRender()&&(this._renderRequested=!1,f.set(this._canvas,p._css.names.transition,"none"),this._applyTransform(),this._scaleMatrix=null,this._wglContainer.doRender(this._renderParameters)),this._updateRequested&&this._canUpdate()&&(this._updateRequested=!1,this.layer._mode.update(this._updateParameters)))},_applyPanEvent:function(O){if(!this.renderOnNav){this._panDx=O.delta.x;this._panDy=O.delta.y;var L=g.translate(O.delta.x,O.delta.y);L=this._scaleMatrix?
g.multiply(L,this._scaleMatrix):L;this._applyTransform(L)}(this.updateOnPan||this.renderOnNav)&&this._updateMapView(O.extent)},_applyTransform:function(O){O=O?p._css.matrix(O):"";f.set(this._canvas,p._css.names.transform,O);O||(this._panDx=this._panDy=0,this.setClip(this._clipRect))}});k.setObject("layers.support.WebGLRenderer",D,p);return D})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(D,k){var a=D.matrix={},f={};a._degToRad=function(g){return f[g]||(f[g]=Math.PI*
g/180)};a._radToDeg=function(g){return g/Math.PI*180};a.Matrix2D=function(g){if(g)if("number"==typeof g)this.xx=this.yy=g;else if(g instanceof Array){if(0<g.length){for(var p=a.normalize(g[0]),n=1;n<g.length;++n){var d=p,e=a.normalize(g[n]);p=new a.Matrix2D;p.xx=d.xx*e.xx+d.xy*e.yx;p.xy=d.xx*e.xy+d.xy*e.yy;p.yx=d.yx*e.xx+d.yy*e.yx;p.yy=d.yx*e.xy+d.yy*e.yy;p.dx=d.xx*e.dx+d.xy*e.dy+d.dx;p.dy=d.yx*e.dx+d.yy*e.dy+d.dy}k.mixin(this,p)}}else k.mixin(this,g)};k.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,
dy:0});k.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(g,p){return 1<arguments.length?new a.Matrix2D({dx:g,dy:p}):new a.Matrix2D({dx:g.x,dy:g.y})},scale:function(g,p){return 1<arguments.length?new a.Matrix2D({xx:g,yy:p}):"number"==typeof g?new a.Matrix2D({xx:g,yy:g}):new a.Matrix2D({xx:g.x,yy:g.y})},rotate:function(g){var p=Math.cos(g);g=Math.sin(g);return new a.Matrix2D({xx:p,xy:-g,yx:g,yy:p})},
rotateg:function(g){return a.rotate(a._degToRad(g))},skewX:function(g){return new a.Matrix2D({xy:Math.tan(g)})},skewXg:function(g){return a.skewX(a._degToRad(g))},skewY:function(g){return new a.Matrix2D({yx:Math.tan(g)})},skewYg:function(g){return a.skewY(a._degToRad(g))},reflect:function(g,p){1==arguments.length&&(p=g.y,g=g.x);var n=g*g,d=p*p,e=n+d,l=2*g*p/e;return new a.Matrix2D({xx:2*n/e-1,xy:l,yx:l,yy:2*d/e-1})},project:function(g,p){1==arguments.length&&(p=g.y,g=g.x);var n=g*g,d=p*p,e=n+d,l=
g*p/e;return new a.Matrix2D({xx:n/e,xy:l,yx:l,yy:d/e})},normalize:function(g){return g instanceof a.Matrix2D?g:new a.Matrix2D(g)},isIdentity:function(g){return 1==g.xx&&0==g.xy&&0==g.yx&&1==g.yy&&0==g.dx&&0==g.dy},clone:function(g){var p=new a.Matrix2D,n;for(n in g)"number"==typeof g[n]&&"number"==typeof p[n]&&p[n]!=g[n]&&(p[n]=g[n]);return p},invert:function(g){g=a.normalize(g);var p=g.xx*g.yy-g.xy*g.yx;return g=new a.Matrix2D({xx:g.yy/p,xy:-g.xy/p,yx:-g.yx/p,yy:g.xx/p,dx:(g.xy*g.dy-g.yy*g.dx)/p,
dy:(g.yx*g.dx-g.xx*g.dy)/p})},_multiplyPoint:function(g,p,n){return{x:g.xx*p+g.xy*n+g.dx,y:g.yx*p+g.yy*n+g.dy}},multiplyPoint:function(g,p,n){g=a.normalize(g);return"number"==typeof p&&"number"==typeof n?a._multiplyPoint(g,p,n):a._multiplyPoint(g,p.x,p.y)},multiplyRectangle:function(g,p){var n=a.normalize(g);p=p||{x:0,y:0,width:0,height:0};if(a.isIdentity(n))return{x:p.x,y:p.y,width:p.width,height:p.height};var d=a.multiplyPoint(n,p.x,p.y),e=a.multiplyPoint(n,p.x,p.y+p.height),l=a.multiplyPoint(n,
p.x+p.width,p.y);n=a.multiplyPoint(n,p.x+p.width,p.y+p.height);var h=Math.min(d.x,e.x,l.x,n.x),t=Math.min(d.y,e.y,l.y,n.y);return{x:h,y:t,width:Math.max(d.x,e.x,l.x,n.x)-h,height:Math.max(d.y,e.y,l.y,n.y)-t}},multiply:function(g){for(var p=a.normalize(g),n=1;n<arguments.length;++n){var d=p,e=a.normalize(arguments[n]);p=new a.Matrix2D;p.xx=d.xx*e.xx+d.xy*e.yx;p.xy=d.xx*e.xy+d.xy*e.yy;p.yx=d.yx*e.xx+d.yy*e.yx;p.yy=d.yx*e.xy+d.yy*e.yy;p.dx=d.xx*e.dx+d.xy*e.dy+d.dx;p.dy=d.yx*e.dx+d.yy*e.dy+d.dy}return p},
_sandwich:function(g,p,n){return a.multiply(a.translate(p,n),g,a.translate(-p,-n))},scaleAt:function(g,p,n,d){switch(arguments.length){case 4:return a._sandwich(a.scale(g,p),n,d);case 3:return"number"==typeof n?a._sandwich(a.scale(g),p,n):a._sandwich(a.scale(g,p),n.x,n.y)}return a._sandwich(a.scale(g),p.x,p.y)},rotateAt:function(g,p,n){return 2<arguments.length?a._sandwich(a.rotate(g),p,n):a._sandwich(a.rotate(g),p.x,p.y)},rotategAt:function(g,p,n){return 2<arguments.length?a._sandwich(a.rotateg(g),
p,n):a._sandwich(a.rotateg(g),p.x,p.y)},skewXAt:function(g,p,n){return 2<arguments.length?a._sandwich(a.skewX(g),p,n):a._sandwich(a.skewX(g),p.x,p.y)},skewXgAt:function(g,p,n){return 2<arguments.length?a._sandwich(a.skewXg(g),p,n):a._sandwich(a.skewXg(g),p.x,p.y)},skewYAt:function(g,p,n){return 2<arguments.length?a._sandwich(a.skewY(g),p,n):a._sandwich(a.skewY(g),p.x,p.y)},skewYgAt:function(g,p,n){return 2<arguments.length?a._sandwich(a.skewYg(g),p,n):a._sandwich(a.skewYg(g),p.x,p.y)}});D.Matrix2D=
a.Matrix2D;return a})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(D,k,a,f,g,p,n,d,e){var l=k.getObject("dojox.gfx",!0),h=l._base={};l._hasClass=function(y,B){var z=y.getAttribute("className");return z&&0<=(" "+z+" ").indexOf(" "+B+" ")};l._addClass=function(y,B){var z=y.getAttribute("className")||"";(!z||0>(" "+z+" ").indexOf(" "+B+" "))&&
y.setAttribute("className",z+(z?" ":"")+B)};l._removeClass=function(y,B){var z=y.getAttribute("className");z&&y.setAttribute("className",z.replace(new RegExp("(^|\\s+)"+B+"(\\s+|$)"),"$1$2"))};h._getFontMeasurements=function(){var y={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},B;if(f("ie")){var z=g.doc.documentElement.style.fontSize||"";z||(g.doc.documentElement.style.fontSize="100%")}var b=d.create("div",{style:{position:"absolute",
left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},g.body());for(B in y)b.style.fontSize=B,y[B]=16*Math.round(12*b.offsetHeight/16)/12/1E3;f("ie")&&(g.doc.documentElement.style.fontSize=z);g.body().removeChild(b);return y};var t=null;h._getCachedFontMeasurements=function(y){if(y||!t)t=h._getFontMeasurements();return t};var r=null,q={};h._getTextBox=function(y,B,z){var b=arguments.length,c;r||(r=d.create("div",
{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},g.body()));var m=r;m.className="";var u=m.style;u.borderWidth="0";u.margin="0";u.padding="0";u.outline="0";if(1<b&&B)for(c in B)c in q||(u[c]=B[c]);2<b&&z&&(m.className=z);m.innerHTML=y;m.getBoundingClientRect?(u=m.getBoundingClientRect(),u={l:u.left,t:u.top,w:u.width||u.right-u.left,h:u.height||u.bottom-u.top}):u=e.getMarginBox(m);m.innerHTML="";return u};h._computeTextLocation=function(y,B,z,b){var c={};switch(y.align){case "end":c.x=
y.x-B;break;case "middle":c.x=y.x-B/2;break;default:c.x=y.x}c.y=y.y-z*(b?.75:1);return c};h._computeTextBoundingBox=function(y){if(!l._base._isRendered(y))return{x:0,y:0,width:0,height:0};var B=y.getShape();var z=y.getFont()||l.defaultFont;y=y.getTextWidth();z=l.normalizedLength(z.size);B=h._computeTextLocation(B,y,z,!0);return{x:B.x,y:B.y,width:y,height:z}};h._isRendered=function(y){for(y=y.parent;y&&y.getParent;)y=y.parent;return null!==y};var v=0;h._getUniqueId=function(){do var y=D._scopeName+
"xUnique"+ ++v;while(n.byId(y));return y};var x=f("pointer-events")?"touchAction":f("MSPointer")?"msTouchAction":null;h._fixMsTouchAction=x?function(y){y.rawNode.style[x]="none"}:function(){};k.mixin(l,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",
x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,
color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var y={};return function(B){var z=y[B];if(z)return new z;z=y[B]=function(){};z.prototype=l["default"+B];return new z}}(),normalizeColor:function(y){return y instanceof a?y:new a(y)},normalizeParameters:function(y,B){var z;if(B){var b={};for(z in y)z in B&&!(z in b)&&(y[z]=
B[z])}return y},makeParameters:function(y,B){var z=null;if(!B)return k.delegate(y);var b={};for(z in y)z in b||(b[z]=k.clone(z in B?B[z]:y[z]));return b},formatNumber:function(y,B){var z=y.toString();if(0<=z.indexOf("e"))z=y.toFixed(4);else{var b=z.indexOf(".");0<=b&&5<z.length-b&&(z=y.toFixed(4))}return 0>y?z:B?" "+z:z},makeFontString:function(y){return y.style+" "+y.variant+" "+y.weight+" "+y.size+" "+y.family},splitFontString:function(y){var B=l.getDefault("Font");y=y.split(/\s+/);if(!(5>y.length)){B.style=
y[0];B.variant=y[1];B.weight=y[2];var z=y[3].indexOf("/");B.size=0>z?y[3]:y[3].substring(0,z);var b=4;0>z&&("/"==y[4]?b=6:"/"==y[4].charAt(0)&&(b=5));b<y.length&&(B.family=y.slice(b).join(" "))}return B},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return l._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(y){return y*l.px_in_pt()},px2pt:function(y){return y/l.px_in_pt()},normalizedLength:function(y){if(0===y.length)return 0;if(2<y.length){var B=l.px_in_pt(),z=parseFloat(y);
switch(y.slice(-2)){case "px":return z;case "pt":return z*B;case "in":return 72*z*B;case "pc":return 12*z*B;case "mm":return z*l.mm_in_pt*B;case "cm":return z*l.cm_in_pt*B}}return parseFloat(y)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(y,B){return y&&B&&y===B},switchTo:function(y){var B="string"==typeof y?l[y]:y;B&&(p.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),
function(z){l[z]=B[z]}),"string"==typeof y?l.renderer=y:p.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(z){return l.renderer=l[z]&&l[z].Surface===l.Surface?z:null}))}});return l})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(D,k,a){k.switchTo(a);return k})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(D,k,a,f,g){var p=null;a.add("vml",function(n,
d,e){e.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';n="adj"in e.firstChild;e.innerHTML="";return n});return{load:function(n,d,e){function l(){d(["dojox/gfx/"+h],function(q){D.renderer=h;p=q;e(q)})}if(p&&"force"!=n)e(p);else{var h=g.forceGfxRenderer;n=!h&&(k.isString(g.gfxRenderer)?g.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var t,r;!h&&n.length;)switch(n.shift()){case "svg":"SVGAngle"in f.global&&(h="svg");break;case "vml":a("vml")&&(h="vml");break;case "silverlight":try{a("ie")?(t=new ActiveXObject("AgControl.AgControl"),
t.IsVersionSupported("1.0"))&&(r=!0):navigator.plugins["Silverlight Plug-In"]&&(r=!0)}catch(q){r=!1}finally{t=null}r&&(h="silverlight");break;case "canvas":f.global.CanvasRenderingContext2D&&(h="canvas")}"canvas"===h&&!1!==g.canvasEvents&&(h="canvasWithEvents");"svg"==h&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(l):l()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t){function r(w,A){return a.doc.createElementNS?a.doc.createElementNS(w,A):a.doc.createElement(A)}function q(w,A,C,E){return w.setAttributeNS?w.setAttributeNS(A,C,E):w.setAttribute(C,E)}function v(w){return x.useSvgWeb?a.doc.createTextNode(w,!0):a.doc.createTextNode(w)}var x=l.svg={};x.useSvgWeb="undefined"!=typeof window.svgweb;var y=navigator.userAgent,B=k("ios"),z=k("android"),b=k("chrome")||z&&4<=z?"auto":"optimizeLegibility";x.xmlns={xlink:"http://www.w3.org/1999/xlink",
svg:"http://www.w3.org/2000/svg"};x.getRef=function(w){return w&&"none"!=w?w.match(/^url\(#.+\)$/)?f.byId(w.slice(5,-1)):w.match(/^#dojoUnique\d+$/)?f.byId(w.slice(1)):null:null};x.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var c=0;x.Shape=g("dojox.gfx.svg.Shape",h.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var w=
this.rawNode.getAttribute("fill");(w=x.getRef(w))&&w.parentNode.removeChild(w)}this.clip&&(w=this.rawNode.getAttribute("clip-path"))&&(w=f.byId(w.match(/gfx_clip[\d]+/)[0]))&&w.parentNode.removeChild(w);h.Shape.prototype.destroy.apply(this,arguments)},setFill:function(w){if(!w)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var A=function(E){this.setAttribute(E,C[E].toFixed(8))};if("object"==typeof w&&"type"in w){switch(w.type){case "linear":var C=
l.makeParameters(l.defaultLinearGradient,w);w=this._setFillObject(C,"linearGradient");p.forEach(["x1","y1","x2","y2"],A,w);break;case "radial":C=l.makeParameters(l.defaultRadialGradient,w);w=this._setFillObject(C,"radialGradient");p.forEach(["cx","cy","r"],A,w);break;case "pattern":C=l.makeParameters(l.defaultPattern,w),w=this._setFillObject(C,"pattern"),p.forEach(["x","y","width","height"],A,w)}this.fillStyle=C;return this}this.fillStyle=C=l.normalizeColor(w);this.rawNode.setAttribute("fill",C.toCss());
this.rawNode.setAttribute("fill-opacity",C.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(w){var A=this.rawNode;if(!w)return this.strokeStyle=null,A.setAttribute("stroke","none"),A.setAttribute("stroke-opacity",0),this;if("string"==typeof w||D.isArray(w)||w instanceof e)w={color:w};w=this.strokeStyle=l.makeParameters(l.defaultStroke,w);w.color=l.normalizeColor(w.color);if(w){var C=0>w.width?0:w.width;A.setAttribute("stroke",w.color.toCss());A.setAttribute("stroke-opacity",
w.color.a);A.setAttribute("stroke-width",C);A.setAttribute("stroke-linecap",w.cap);"number"==typeof w.join?(A.setAttribute("stroke-linejoin","miter"),A.setAttribute("stroke-miterlimit",w.join)):A.setAttribute("stroke-linejoin",w.join);var E=w.style.toLowerCase();E in x.dasharray&&(E=x.dasharray[E]);if(E instanceof Array){E=D._toArray(E);var G;for(G=0;G<E.length;++G)E[G]*=C;if("butt"!=w.cap){for(G=0;G<E.length;G+=2)E[G]-=C,1>E[G]&&(E[G]=1);for(G=1;G<E.length;G+=2)E[G]+=C}E=E.join(",")}A.setAttribute("stroke-dasharray",
E);A.setAttribute("dojoGfxStrokeStyle",w.style)}return this},_getParentSurface:function(){for(var w=this.parent;w&&!(w instanceof l.Surface);w=w.parent);return w},_setFillObject:function(w,A){var C=x.xmlns.svg;this.fillStyle=w;var E=this._getParentSurface().defNode,G=this.rawNode.getAttribute("fill");if(G=x.getRef(G))if(G.tagName.toLowerCase()!=A.toLowerCase()){var F=G.id;G.parentNode.removeChild(G);G=r(C,A);G.setAttribute("id",F);E.appendChild(G)}else for(;G.childNodes.length;)G.removeChild(G.lastChild);
else G=r(C,A),G.setAttribute("id",l._base._getUniqueId()),E.appendChild(G);if("pattern"==A)G.setAttribute("patternUnits","userSpaceOnUse"),C=r(C,"image"),C.setAttribute("x",0),C.setAttribute("y",0),C.setAttribute("width",(0>w.width?0:w.width).toFixed(8)),C.setAttribute("height",(0>w.height?0:w.height).toFixed(8)),q(C,x.xmlns.xlink,"xlink:href",w.src),G.appendChild(C);else for(G.setAttribute("gradientUnits","userSpaceOnUse"),E=0;E<w.colors.length;++E){F=w.colors[E];var I=r(C,"stop"),M=F.color=l.normalizeColor(F.color);
I.setAttribute("offset",F.offset.toFixed(8));I.setAttribute("stop-color",M.toCss());I.setAttribute("stop-opacity",M.a);G.appendChild(I)}this.rawNode.setAttribute("fill","url(#"+G.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return G},_applyTransform:function(){if(this.matrix){var w=this.matrix;this.rawNode.setAttribute("transform","matrix("+w.xx.toFixed(8)+","+w.yx.toFixed(8)+","+w.xy.toFixed(8)+","+w.yy.toFixed(8)+","+w.dx.toFixed(8)+
","+w.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(w){w=this.rawNode=w;"image"!=this.shape.type&&w.setAttribute("fill","none");w.setAttribute("fill-opacity",0);w.setAttribute("stroke","none");w.setAttribute("stroke-opacity",0);w.setAttribute("stroke-width",1);w.setAttribute("stroke-linecap","butt");w.setAttribute("stroke-linejoin","miter");w.setAttribute("stroke-miterlimit",4);w.__gfxObject__=this},setShape:function(w){this.shape=l.makeParameters(this.shape,
w);for(var A in this.shape)if("type"!=A){w=this.shape[A];if("width"===A||"height"===A)w=0>w?0:w;this.rawNode.setAttribute(A,w)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(w){this.inherited(arguments);var A=w?"width"in w?"rect":"cx"in w?"ellipse":"points"in w?"polyline":"d"in w?"path":null:null;
if(w&&!A)return this;"polyline"===A&&(w=D.clone(w),w.points=w.points.join(","));var C,E=d.get(this.rawNode,"clip-path");E&&(C=f.byId(E.match(/gfx_clip[\d]+/)[0]))&&C.removeChild(C.childNodes[0]);w?(C?(A=r(x.xmlns.svg,A),C.appendChild(A)):(E="gfx_clip"+ ++c,this.rawNode.setAttribute("clip-path","url(#"+E+")"),C=r(x.xmlns.svg,"clipPath"),A=r(x.xmlns.svg,A),C.appendChild(A),this.rawNode.parentNode.insertBefore(C,this.rawNode),d.set(C,"id",E)),d.set(A,w)):(this.rawNode.removeAttribute("clip-path"),C&&
C.parentNode.removeChild(C));return this},_removeClipNode:function(){var w,A=d.get(this.rawNode,"clip-path");A&&(w=f.byId(A.match(/gfx_clip[\d]+/)[0]))&&w.parentNode.removeChild(w);return w}});x.Group=g("dojox.gfx.svg.Group",x.Shape,{constructor:function(){h.Container._init.call(this)},setRawNode:function(w){this.rawNode=w;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);x.Shape.prototype.destroy.apply(this,arguments)}});x.Group.nodeType="g";x.Rect=g("dojox.gfx.svg.Rect",[x.Shape,
h.Rect],{setShape:function(w){this.shape=l.makeParameters(this.shape,w);this.bbox=null;for(var A in this.shape)if("type"!=A&&"r"!=A){w=this.shape[A];if("width"===A||"height"===A)w=0>w?0:w;this.rawNode.setAttribute(A,w)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});x.Rect.nodeType="rect";x.Ellipse=g("dojox.gfx.svg.Ellipse",[x.Shape,h.Ellipse],{});x.Ellipse.nodeType="ellipse";x.Circle=g("dojox.gfx.svg.Circle",[x.Shape,
h.Circle],{});x.Circle.nodeType="circle";x.Line=g("dojox.gfx.svg.Line",[x.Shape,h.Line],{});x.Line.nodeType="line";x.Polyline=g("dojox.gfx.svg.Polyline",[x.Shape,h.Polyline],{setShape:function(w,A){w&&w instanceof Array?(this.shape=l.makeParameters(this.shape,{points:w}),A&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=l.makeParameters(this.shape,w);this.bbox=null;this._normalizePoints();for(var C=[],E=this.shape.points,G=0;G<E.length;++G)C.push(E[G].x.toFixed(8),
E[G].y.toFixed(8));this.rawNode.setAttribute("points",C.join(" "));return this}});x.Polyline.nodeType="polyline";x.Image=g("dojox.gfx.svg.Image",[x.Shape,h.Image],{setShape:function(w){this.shape=l.makeParameters(this.shape,w);this.bbox=null;w=this.rawNode;for(var A in this.shape)if("type"!=A&&"src"!=A){var C=this.shape[A];if("width"===A||"height"===A)C=0>C?0:C;w.setAttribute(A,C)}w.setAttribute("preserveAspectRatio","none");q(w,x.xmlns.xlink,"xlink:href",this.shape.src);w.__gfxObject__=this;return this}});
x.Image.nodeType="image";x.Text=g("dojox.gfx.svg.Text",[x.Shape,h.Text],{setShape:function(w){this.shape=l.makeParameters(this.shape,w);this.bbox=null;w=this.rawNode;var A=this.shape;w.setAttribute("x",A.x);w.setAttribute("y",A.y);w.setAttribute("text-anchor",A.align);w.setAttribute("text-decoration",A.decoration);w.setAttribute("rotate",A.rotated?90:0);w.setAttribute("kerning",A.kerning?"auto":0);w.setAttribute("text-rendering",b);w.firstChild?w.firstChild.nodeValue=A.text:w.appendChild(v(A.text));
return this},getTextWidth:function(){var w=this.rawNode,A=w.parentNode;w=w.cloneNode(!0);w.style.visibility="hidden";var C=0,E=w.firstChild.nodeValue;A.appendChild(w);if(""!=E)for(;!C;)C=w.getBBox?parseInt(w.getBBox().width):68;A.removeChild(w);return C},getBoundingBox:function(){var w=null;if(this.getShape().text)try{w=this.rawNode.getBBox()}catch(A){w={x:0,y:0,width:0,height:0}}return w}});x.Text.nodeType="text";x.Path=g("dojox.gfx.svg.Path",[x.Shape,t.Path],{_updateWithSegment:function(w){this.inherited(arguments);
"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(w){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});x.Path.nodeType="path";x.TextPath=g("dojox.gfx.svg.TextPath",[x.Shape,t.TextPath],{_updateWithSegment:function(w){this.inherited(arguments);this._setTextPath()},setShape:function(w){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==
typeof this.shape.path){var w=this.rawNode;if(!w.firstChild){var A=r(x.xmlns.svg,"textPath"),C=v("");A.appendChild(C);w.appendChild(A)}A=(A=w.firstChild.getAttributeNS(x.xmlns.xlink,"href"))&&x.getRef(A);if(!A&&(C=this._getParentSurface())){C=C.defNode;A=r(x.xmlns.svg,"path");var E=l._base._getUniqueId();A.setAttribute("id",E);C.appendChild(A);q(w.firstChild,x.xmlns.xlink,"xlink:href","#"+E)}A&&A.setAttribute("d",this.shape.path)}},_setText:function(){var w=this.rawNode;if(!w.firstChild){var A=r(x.xmlns.svg,
"textPath"),C=v("");A.appendChild(C);w.appendChild(A)}w=w.firstChild;A=this.text;w.setAttribute("alignment-baseline","middle");switch(A.align){case "middle":w.setAttribute("text-anchor","middle");w.setAttribute("startOffset","50%");break;case "end":w.setAttribute("text-anchor","end");w.setAttribute("startOffset","100%");break;default:w.setAttribute("text-anchor","start"),w.setAttribute("startOffset","0%")}w.setAttribute("baseline-shift","0.5ex");w.setAttribute("text-decoration",A.decoration);w.setAttribute("rotate",
A.rotated?90:0);w.setAttribute("kerning",A.kerning?"auto":0);w.firstChild.data=A.text}});x.TextPath.nodeType="text";var m=534<function(){var w=/WebKit\/(\d*)/.exec(y);return w?w[1]:0}();x.Surface=g("dojox.gfx.svg.Surface",h.Surface,{constructor:function(){h.Container._init.call(this)},destroy:function(){h.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(w,A){if(!this.rawNode)return this;var C=0>w?0:w,E=0>A?0:A;this.rawNode.setAttribute("width",C);this.rawNode.setAttribute("height",
E);m&&(this.rawNode.style.width=C,this.rawNode.style.height=E);return this},getDimensions:function(){return this.rawNode?{width:l.normalizedLength(this.rawNode.getAttribute("width")),height:l.normalizedLength(this.rawNode.getAttribute("height"))}:null}});x.createSurface=function(w,A,C){var E=new x.Surface;E.rawNode=r(x.xmlns.svg,"svg");E.rawNode.setAttribute("overflow","hidden");A&&E.rawNode.setAttribute("width",0>A?0:A);C&&E.rawNode.setAttribute("height",0>C?0:C);A=r(x.xmlns.svg,"defs");E.rawNode.appendChild(A);
E.defNode=A;E._parent=f.byId(w);E._parent.appendChild(E.rawNode);l._base._fixMsTouchAction(E);return E};k={_setFont:function(){var w=this.fontStyle;this.rawNode.setAttribute("font-style",w.style);this.rawNode.setAttribute("font-variant",w.variant);this.rawNode.setAttribute("font-weight",w.weight);this.rawNode.setAttribute("font-size",w.size);this.rawNode.setAttribute("font-family",w.family)}};var u=h.Container;g=x.Container={openBatch:function(){if(!this._batch){var w=x.useSvgWeb?a.doc.createDocumentFragment(!0):
a.doc.createDocumentFragment();this.fragment=w}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(w){this!=w.getParent()&&(this.fragment?this.fragment.appendChild(w.rawNode):this.rawNode.appendChild(w.rawNode),u.add.apply(this,arguments),w.setClip(w.clip));return this},remove:function(w,A){this==w.getParent()&&(this.rawNode==w.rawNode.parentNode&&
this.rawNode.removeChild(w.rawNode),this.fragment&&this.fragment==w.rawNode.parentNode&&this.fragment.removeChild(w.rawNode),w._removeClipNode(),u.remove.apply(this,arguments));return this},clear:function(){for(var w=this.rawNode;w.lastChild;)w.removeChild(w.lastChild);var A=this.defNode;if(A){for(;A.lastChild;)A.removeChild(A.lastChild);w.appendChild(A)}return u.clear.apply(this,arguments)},getBoundingBox:u.getBoundingBox,_moveChildToFront:u._moveChildToFront,_moveChildToBack:u._moveChildToBack};
t=x.Creator={createObject:function(w,A){if(!this.rawNode)return null;var C=new w,E=r(x.xmlns.svg,w.nodeType);C.setRawNode(E);C.setShape(A);this.add(C);return C}};D.extend(x.Text,k);D.extend(x.TextPath,k);D.extend(x.Group,g);D.extend(x.Group,h.Creator);D.extend(x.Group,t);D.extend(x.Surface,g);D.extend(x.Surface,h.Creator);D.extend(x.Surface,t);x.fixTarget=function(w,A){w.gfxTarget||(w.gfxTarget=B&&w.target.wholeText?w.target.parentElement.__gfxObject__:w.target.__gfxObject__);return!0};x.useSvgWeb&&
(x.createSurface=function(w,A,C){var E=new x.Surface;A=0>A?0:A;C=0>C?0:C;if(!A||!C){var G=n.position(w);A=A||G.w;C=C||G.h}w=f.byId(w);G=w.id?w.id+"_svgweb":l._base._getUniqueId();var F=r(x.xmlns.svg,"svg");F.id=G;F.setAttribute("width",A);F.setAttribute("height",C);svgweb.appendChild(F,w);F.addEventListener("SVGLoad",function(){E.rawNode=this;E.isLoaded=!0;var I=r(x.xmlns.svg,"defs");E.rawNode.appendChild(I);E.defNode=I;if(E.onLoad)E.onLoad(E)},!1);E.isLoaded=!1;return E},x.Surface.extend({destroy:function(){var w=
this.rawNode;svgweb.removeChild(w,w.parentNode)}}),k={connect:function(w,A,C){"on"===w.substring(0,2)&&(w=w.substring(2));C=2==arguments.length?A:D.hitch(A,C);this.getEventSource().addEventListener(w,C,!1);return[this,w,C]},disconnect:function(w){this.getEventSource().removeEventListener(w[1],w[2],!1);delete w[0]}},D.extend(x.Shape,k),D.extend(x.Surface,k));return x})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),
function(D,k,a,f,g,p,n,d,e,l){function h(r,q){for(var v=r.length-1;q<v;)r[q]=r[++q];r.length=v}var t=D.shape={};t.Shape=a("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(g("gfxRegistry")){var r=t.register(this);this.getUID=function(){return r}}},destroy:function(){g("gfxRegistry")&&t.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=
null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var r=this.getBoundingBox();if(!r)return null;var q=this._getRealMatrix();return[l.multiplyPoint(q,r.x,r.y),l.multiplyPoint(q,r.x+r.width,r.y),l.multiplyPoint(q,r.x+
r.width,r.y+r.height),l.multiplyPoint(q,r.x,r.y+r.height)]},getEventSource:function(){return this.rawNode},setClip:function(r){this.clip=r},getClip:function(){return this.clip},setShape:function(r){this.shape=D.makeParameters(this.shape,r);this.bbox=null;return this},setFill:function(r){if(!r)return this.fillStyle=null,this;var q=null;if("object"==typeof r&&"type"in r)switch(r.type){case "linear":q=D.makeParameters(D.defaultLinearGradient,r);break;case "radial":q=D.makeParameters(D.defaultRadialGradient,
r);break;case "pattern":q=D.makeParameters(D.defaultPattern,r)}else q=D.normalizeColor(r);this.fillStyle=q;return this},setStroke:function(r){if(!r)return this.strokeStyle=null,this;if("string"==typeof r||k.isArray(r)||r instanceof e)r={color:r};r=this.strokeStyle=D.makeParameters(D.defaultStroke,r);r.color=D.normalizeColor(r.color);return this},setTransform:function(r){this.matrix=l.clone(r?l.normalize(r):l.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var r=
this.getParent();r&&(r._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var r=this.getParent();r&&(r._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(r){return r?this.setTransform([this.matrix,r]):this},applyLeftTransform:function(r){return r?this.setTransform([r,this.matrix]):this},applyTransform:function(r){return r?this.setTransform([this.matrix,r]):this},removeShape:function(r){this.parent&&
this.parent.remove(this,r);return this},_setParent:function(r,q){this.parent=r;return this._updateParentMatrix(q)},_updateParentMatrix:function(r){this.parentMatrix=r?l.clone(r):null;return this._applyTransform()},_getRealMatrix:function(){for(var r=this.matrix,q=this.parent;q;)q.matrix&&(r=l.multiply(q.matrix,r)),q=q.parent;return r}});t._eventsProcessing={on:function(r,q){return p(this.getEventSource(),r,t.fixCallback(this,D.fixTarget,q))},connect:function(r,q,v){"on"==r.substring(0,2)&&(r=r.substring(2));
return this.on(r,v?k.hitch(q,v):q)},disconnect:function(r){return r.remove()}};t.fixCallback=function(r,q,v,x){x||(x=v,v=null);if(k.isString(x)){v=v||f.global;if(!v[x])throw['dojox.gfx.shape.fixCallback: scope["',x,'"] is null (scope\x3d"',v,'")'].join("");return function(y){return q(y,r)?v[x].apply(v,arguments||[]):void 0}}return v?function(y){return q(y,r)?x.apply(v,arguments||[]):void 0}:function(y){return q(y,r)?x.apply(v,arguments):void 0}};k.extend(t.Shape,t._eventsProcessing);t.Container={_init:function(){this.children=
[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(r){var q=r.getParent();q&&q.remove(r,!0);this.children.push(r);return r._setParent(this,this._getRealMatrix())},remove:function(r,q){for(var v=0;v<this.children.length;++v)if(this.children[v]==r){q||(r.parent=null,r.parentMatrix=null);h(this.children,v);break}return this},clear:function(r){for(var q,v=0;v<this.children.length;++v)q=this.children[v],q.parent=null,q.parentMatrix=null,r&&q.destroy();this.children=
[];return this},getBoundingBox:function(){if(this.children){var r=null;n.forEach(this.children,function(q){var v=q.getBoundingBox();v&&((q=q.getTransform())&&(v=l.multiplyRectangle(q,v)),r?(r.x=Math.min(r.x,v.x),r.y=Math.min(r.y,v.y),r.endX=Math.max(r.endX,v.x+v.width),r.endY=Math.max(r.endY,v.y+v.height)):r={x:v.x,y:v.y,endX:v.x+v.width,endY:v.y+v.height})});r&&(r.width=r.endX-r.x,r.height=r.endY-r.y);return r}return null},_moveChildToFront:function(r){for(var q=0;q<this.children.length;++q)if(this.children[q]==
r){h(this.children,q);this.children.push(r);break}return this},_moveChildToBack:function(r){for(var q=0;q<this.children.length;++q)if(this.children[q]==r){h(this.children,q);this.children.unshift(r);break}return this}};t.Surface=a("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){n.forEach(this._nodes,d.destroy);this._nodes=[];n.forEach(this._events,function(r){r&&r.remove()});this._events=[];this.rawNode=null;
if(g("ie"))for(;this._parent.lastChild;)d.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(r){},whenLoaded:function(r,q){var v=k.hitch(r,q);if(this.isLoaded)v(this);else p.once(this,"load",function(x){v(x)})}});k.extend(t.Surface,t._eventsProcessing);t.Rect=a("dojox.gfx.shape.Rect",t.Shape,{constructor:function(r){this.shape=D.getDefault("Rect");this.rawNode=
r},getBoundingBox:function(){return this.shape}});t.Ellipse=a("dojox.gfx.shape.Ellipse",t.Shape,{constructor:function(r){this.shape=D.getDefault("Ellipse");this.rawNode=r},getBoundingBox:function(){if(!this.bbox){var r=this.shape;this.bbox={x:r.cx-r.rx,y:r.cy-r.ry,width:2*r.rx,height:2*r.ry}}return this.bbox}});t.Circle=a("dojox.gfx.shape.Circle",t.Shape,{constructor:function(r){this.shape=D.getDefault("Circle");this.rawNode=r},getBoundingBox:function(){if(!this.bbox){var r=this.shape;this.bbox={x:r.cx-
r.r,y:r.cy-r.r,width:2*r.r,height:2*r.r}}return this.bbox}});t.Line=a("dojox.gfx.shape.Line",t.Shape,{constructor:function(r){this.shape=D.getDefault("Line");this.rawNode=r},getBoundingBox:function(){if(!this.bbox){var r=this.shape;this.bbox={x:Math.min(r.x1,r.x2),y:Math.min(r.y1,r.y2),width:Math.abs(r.x2-r.x1),height:Math.abs(r.y2-r.y1)}}return this.bbox}});t.Polyline=a("dojox.gfx.shape.Polyline",t.Shape,{constructor:function(r){this.shape=D.getDefault("Polyline");this.rawNode=r},setShape:function(r,
q){r&&r instanceof Array?(this.inherited(arguments,[{points:r}]),q&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[r]);return this},_normalizePoints:function(){var r=this.shape.points,q=r&&r.length;if(q&&"number"==typeof r[0]){for(var v=[],x=0;x<q;x+=2)v.push({x:r[x],y:r[x+1]});this.shape.points=v}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var r=this.shape.points,q=r.length,v=r[0],x=v.x,y=v.y,B=v.x,z=v.y,b=1;b<q;++b)v=
r[b],x>v.x&&(x=v.x),B<v.x&&(B=v.x),y>v.y&&(y=v.y),z<v.y&&(z=v.y);this.bbox={x:x,y:y,width:B-x,height:z-y}}return this.bbox}});t.Image=a("dojox.gfx.shape.Image",t.Shape,{constructor:function(r){this.shape=D.getDefault("Image");this.rawNode=r},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});t.Text=a(t.Shape,{constructor:function(r){this.fontStyle=null;this.shape=D.getDefault("Text");this.rawNode=r},getFont:function(){return this.fontStyle},
setFont:function(r){this.fontStyle="string"==typeof r?D.splitFontString(r):D.makeParameters(D.defaultFont,r);this._setFont();return this},getBoundingBox:function(){var r=null;this.getShape().text&&(r=D._base._computeTextBoundingBox(this));return r}});t.Creator={createShape:function(r){switch(r.type){case D.defaultPath.type:return this.createPath(r);case D.defaultRect.type:return this.createRect(r);case D.defaultCircle.type:return this.createCircle(r);case D.defaultEllipse.type:return this.createEllipse(r);
case D.defaultLine.type:return this.createLine(r);case D.defaultPolyline.type:return this.createPolyline(r);case D.defaultImage.type:return this.createImage(r);case D.defaultText.type:return this.createText(r);case D.defaultTextPath.type:return this.createTextPath(r)}return null},createGroup:function(){return this.createObject(D.Group)},createRect:function(r){return this.createObject(D.Rect,r)},createEllipse:function(r){return this.createObject(D.Ellipse,r)},createCircle:function(r){return this.createObject(D.Circle,
r)},createLine:function(r){return this.createObject(D.Line,r)},createPolyline:function(r){return this.createObject(D.Polyline,r)},createImage:function(r){return this.createObject(D.Image,r)},createText:function(r){return this.createObject(D.Text,r)},createPath:function(r){return this.createObject(D.Path,r)},createTextPath:function(r){return this.createObject(D.TextPath,{}).setText(r)},createObject:function(r,q){return null}};return t})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang",
"dojo/_base/declare","./matrix","./shape"],function(D,k,a,f,g){g=a("dojox.gfx.path.Path",g.Shape,{constructor:function(p){this.shape=k.clone(D.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=p;this.segmented=!1},setAbsoluteMode:function(p){this._confirmSegmented();this.absolute="string"==typeof p?"absolute"==p:p;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&
"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var p=this.bbox,n=this._getRealMatrix();this.bbox=null;for(var d=0,e=this.segments.length;d<e;++d)this._updateWithSegment(this.segments[d],n);n=this.bbox;this.bbox=p;return this.tbbox=n?[{x:n.l,y:n.t},{x:n.r,y:n.t},{x:n.r,y:n.b},{x:n.l,y:n.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in
this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(p,n,d){d&&(n=f.multiplyPoint(d,p,n),p=n.x,n=n.y);this.bbox&&"l"in this.bbox?(this.bbox.l>p&&(this.bbox.l=p),this.bbox.r<p&&(this.bbox.r=p),this.bbox.t>n&&(this.bbox.t=n),this.bbox.b<n&&(this.bbox.b=n)):this.bbox={l:p,b:n,r:p,t:n}},_updateWithSegment:function(p,n){var d=p.args,e=d.length,l;switch(p.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(l=0;l<e;l+=2)this._updateBBox(d[l],
d[l+1],n);this.last.x=d[e-2];this.last.y=d[e-1];this.absolute=!0;break;case "H":for(l=0;l<e;++l)this._updateBBox(d[l],this.last.y,n);this.last.x=d[e-1];this.absolute=!0;break;case "V":for(l=0;l<e;++l)this._updateBBox(this.last.x,d[l],n);this.last.y=d[e-1];this.absolute=!0;break;case "m":l=0;"x"in this.last||(this._updateBBox(this.last.x=d[0],this.last.y=d[1],n),l=2);for(;l<e;l+=2)this._updateBBox(this.last.x+=d[l],this.last.y+=d[l+1],n);this.absolute=!1;break;case "l":case "t":for(l=0;l<e;l+=2)this._updateBBox(this.last.x+=
d[l],this.last.y+=d[l+1],n);this.absolute=!1;break;case "h":for(l=0;l<e;++l)this._updateBBox(this.last.x+=d[l],this.last.y,n);this.absolute=!1;break;case "v":for(l=0;l<e;++l)this._updateBBox(this.last.x,this.last.y+=d[l],n);this.absolute=!1;break;case "c":for(l=0;l<e;l+=6)this._updateBBox(this.last.x+d[l],this.last.y+d[l+1],n),this._updateBBox(this.last.x+d[l+2],this.last.y+d[l+3],n),this._updateBBox(this.last.x+=d[l+4],this.last.y+=d[l+5],n);this.absolute=!1;break;case "s":case "q":for(l=0;l<e;l+=
4)this._updateBBox(this.last.x+d[l],this.last.y+d[l+1],n),this._updateBBox(this.last.x+=d[l+2],this.last.y+=d[l+3],n);this.absolute=!1;break;case "A":for(l=0;l<e;l+=7)this._updateBBox(d[l+5],d[l+6],n);this.last.x=d[e-2];this.last.y=d[e-1];this.absolute=!0;break;case "a":for(l=0;l<e;l+=7)this._updateBBox(this.last.x+=d[l+5],this.last.y+=d[l+6],n);this.absolute=!1}var h=[p.action];for(l=0;l<e;++l)h.push(D.formatNumber(d[l],!0));if("string"==typeof this.shape.path)this.shape.path+=h.join("");else for(l=
0,e=h.length;l<e;++l)this.shape.path.push(h[l])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(p,n){this.tbbox=null;var d=this._validSegments[p.toLowerCase()];"number"==typeof d&&(d?n.length>=d&&(d={action:p,args:n.slice(0,n.length-n.length%d)},this.segments.push(d),this._updateWithSegment(d)):(d={action:p,args:[]},this.segments.push(d),this._updateWithSegment(d)))},_collectArgs:function(p,n){for(var d=0;d<n.length;++d){var e=n[d];"boolean"==typeof e?p.push(e?1:0):
"number"==typeof e?p.push(e):e instanceof Array?this._collectArgs(p,e):"x"in e&&"y"in e&&p.push(e.x,e.y)}},moveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"M":"m",p);return this},lineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"L":"l",p);return this},hLineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?
"H":"h",p);return this},vLineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"V":"v",p);return this},curveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"C":"c",p);return this},smoothCurveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"S":"s",p);return this},qCurveTo:function(){this._confirmSegmented();var p=
[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"Q":"q",p);return this},qSmoothCurveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"T":"t",p);return this},arcTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"A":"a",p);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var p=
this.shape.path;this.shape.path=[];this._setPath(p);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(p){p=k.isArray(p)?p:p.match(D.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(p){for(var n="",d=[],e=p.length,l=0;l<e;++l){var h=p[l],t=parseFloat(h);isNaN(t)?(n&&this._pushSegment(n,d),d=[],n=h):d.push(t)}this._pushSegment(n,d)}},setShape:function(p){this.inherited(arguments,["string"==typeof p?{path:p}:p]);this.segmented=!1;this.segments=
[];D.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});a=a("dojox.gfx.path.TextPath",g,{constructor:function(p){"text"in this||(this.text=k.clone(D.defaultTextPath));"fontStyle"in this||(this.fontStyle=k.clone(D.defaultFont))},getText:function(){return this.text},setText:function(p){this.text=D.makeParameters(this.text,"string"==typeof p?{text:p}:p);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(p){this.fontStyle="string"==typeof p?
D.splitFontString(p):D.makeParameters(D.defaultFont,p);this._setFont();return this}});return D.path={Path:g,TextPath:a}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],function(D,k){var a={},f={x:"0%",y:"0%",width:"100%",height:"100%"},g={};a.createFilter=function(t,r){var q=D.mixin({},f,t);q.primitives||(q.primitives=[]);r&&Array.prototype.push.apply(q.primitives,r);return q};var p=function(t,r,q){r instanceof Array&&(q=r,r=null);r=D.mixin({},r);r.children=q;r.tag=
t;return r};k.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),function(t){a[t]=function(r,q){return p(t,r,q)}});a.feMerge=function(t,r){if("string"===typeof t){for(var q=[],v=0;v<arguments.length;++v)q.push(a.feMergeNode({"in":arguments[v]}));return p("feMerge",
{},q)}return p("feMerge",t,r)};var n=a.createFilter;g.convolutions=[n({_gfxName:"boxBlur3"},[a.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),n({_gfxName:"boxBlur5"},[a.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),n({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),
a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),n({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),n({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),
a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),n({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])])];k.forEach(g.convolutions,function(t){D.mixin(t,f)});g.shadows=[n({_gfxName:"fastSmallDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",
values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:3,dy:3,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),n({_gfxName:"fastDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),n({_gfxName:"fastDropShadowLight"},[a.feColorMatrix({"in":"SourceAlpha",
type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),n({_gfxName:"dropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),n({_gfxName:"dropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),a.feComponentTransfer({"in":"blur",
result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),n({_gfxName:"smallDropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),a.feOffset({dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),n({_gfxName:"smallDropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",
slope:.5})]),a.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")])];var d={x:"-10%",y:"-10%",width:"125%",height:"125%"};k.forEach(g.shadows,function(t){D.mixin(t,d)});g.blurs=[n({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),n({_gfxName:"blur2",x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),n({_gfxName:"blur4",x:"-15%",
y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),n({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),n({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),a.feComponentTransfer([a.feFuncA({type:"linear",slope:10})])])];g.colors=[n({_gfxName:"negate"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"1,0"}),
a.feFuncG({type:"table",tableValues:"1,0"}),a.feFuncB({type:"table",tableValues:"1,0"})])]),n({_gfxName:"sepia"},[a.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),a.feComponentTransfer({"in":"grey"},[a.feFuncR({type:"linear",slope:.5,intercept:.5}),a.feFuncB({type:"table",tableValues:"0,0"})])]),n({_gfxName:"grayscale"},[a.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),
n({_gfxName:"showRed"},[a.feComponentTransfer([a.feFuncG({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),n({_gfxName:"showGreen"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),n({_gfxName:"showBlue"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncG({type:"table",tableValues:"0,0"})])]),n({_gfxName:"hueRotate60"},[a.feColorMatrix({type:"hueRotate",values:60})]),n({_gfxName:"hueRotate120"},
[a.feColorMatrix({type:"hueRotate",values:120})]),n({_gfxName:"hueRotate180"},[a.feColorMatrix({type:"hueRotate",values:180})]),n({_gfxName:"hueRotate270"},[a.feColorMatrix({type:"hueRotate",values:270})])];k.forEach(g.colors,function(t){D.mixin(t,f)});g.miscs=[n({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,
specularConstant:1,specularExponent:12,result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),n({_gfxName:"embossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),a.feOffset({"in":"blur",
dx:4,dy:4,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[a.fePointLight({x:-5E3,y:-1E4,z:2E4})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0,result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),n({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",
height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur",
"litPaint")]),n({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:8,specularConstant:1,specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",
in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),n({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),
a.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),a.feMerge("offsetBlur","litPaint")]),n({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"5",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",
k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),n({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),n({_gfxName:"veryFuzzy",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",
result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),n({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),a.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",yChannelSelector:"G"}),a.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),a.feComponentTransfer({"in":"bb",
result:"BendedSource"},[a.feFuncA({type:"linear",slope:10,intercept:"-1"})]),a.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[a.feFuncR({type:"linear",slope:"0",intercept:"0"}),a.feFuncG({type:"linear",slope:"0",intercept:"0"}),a.feFuncB({type:"linear",slope:"0",intercept:"0"}),a.feFuncA({type:"linear",slope:"1",intercept:"0"})]),a.feGaussianBlur({"in":"BendedAlpha",stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",
specularConstant:"1",specularExponent:"10",result:"specularOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),a.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),a.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),n({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),n({_gfxName:"holes",x:"0%",y:"0%",
width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"0,1"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),n({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},
[a.feFuncA({type:"discrete",tableValues:"1,0"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];g.reliefs=[n({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[a.feFuncA({type:"table",tableValues:"1,0"})]),a.feDiffuseLighting({"in":"invertedalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",
elevation:"60"})]),a.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),n({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},
[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),n({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",
result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),n({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},
[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),n({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",
y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];g.textures=[n({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",
in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),n({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),n({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",
height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),n({_gfxName:"gold",x:"-5%",y:"-5%",width:"115%",height:"110%"},[a.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),a.feComposite({"in":"SourceGraphic",
in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),a.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),a.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"bump",surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"specularOut",
in2:"SourceGraphic",operator:"in",result:"specularOut"}),a.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),a.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var e in g)if(g.hasOwnProperty(e)){a[e]={};for(var l=g[e],h=0;h<l.length;++h)(function(){var t=l[h];a[e][t._gfxName]=function(r){return D.delegate(t,r)}})()}return a})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array",
"dojo/_base/window","./_base","./svg"],function(D,k,a,f,g){function p(d,e){var l=e.ownerDocument.createElementNS(g.xmlns.svg,d.tag);e.appendChild(l);for(var h in d)h in n||l.setAttribute(h,d[h]);d.children&&k.forEach(d.children,function(t){p(t,l)});return l}a=f.svgext={};var n={primitives:null,tag:null,children:null};g.Shape.extend({addRenderingOption:function(d,e){this.rawNode.setAttribute(d,e);return this},setFilter:function(d){if(!d)return this.rawNode.removeAttribute("filter"),this.filter=null,
this;this.filter=d;d.id=d.id||f._base._getUniqueId();var e=D.byId(d.id);if(!e){e=this.rawNode.ownerDocument.createElementNS(g.xmlns.svg,"filter");e.setAttribute("filterUnits","userSpaceOnUse");for(var l in d)l in n||e.setAttribute(l,d[l]);k.forEach(d.primitives,function(h){p(h,e)});(l=this._getParentSurface())&&l.defNode.appendChild(e)}this.rawNode.setAttribute("filter","url(#"+d.id+")");return this},getFilter:function(){return this.filter}});return a})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),
function(D,k,a,f,g,p,n,d,e,l){function h(q,v){var x=t(v);x&&D.utils.forEach(q,function(y){if(y instanceof D.Surface||y instanceof D.Group)y.textDir=x;y instanceof D.Text&&y.setShape({textDir:x});y instanceof D.TextPath&&y.setText({textDir:x})},q);return q}function t(q){var v=["ltr","rtl","auto"];return q&&(q=q.toLowerCase(),0>p.indexOf(v,q))?null:q}k.getObject("dojox.gfx._gfxBidiSupport",!0);switch(D.renderer){case "vml":D.isVml=!0;break;case "svg":D.isSvg=!0;D.svg.useSvgWeb&&(D.isSvgWeb=!0);break;
case "silverlight":D.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":D.isCanvas=!0}var r=new l;k.extend(D.shape.Surface,{textDir:"",setTextDir:function(q){h(this,q)},getTextDir:function(){return this.textDir}});k.extend(D.Group,{textDir:"",setTextDir:function(q){h(this,q)},getTextDir:function(){return this.textDir}});k.extend(D.Text,{textDir:"",formatText:function(q,v){if(v&&q&&1<q.length){var x="ltr",y=v;if("auto"==y){if(D.isVml)return q;y=r.checkContextual(q)}if(D.isVml)return x=r.checkContextual(q),
y!=x?"rtl"==y?r.hasBidiChar(q)?"\u200f\u200f"+q:r.bidiTransform(q,"IRNNN","ILNNN"):"\u200e"+q:q;if(D.isSvgWeb)return"rtl"==y?r.bidiTransform(q,"IRNNN","ILNNN"):q;if(D.isSilverlight)return"rtl"==y?r.bidiTransform(q,"IRNNN","VLYNN"):r.bidiTransform(q,"ILNNN","VLYNN");if(D.isCanvas)return"rtl"==y?"\u202b"+q+"\u202c":"\u202a"+q+"\u202c";if(D.isSvg)return 4>a("ff")?"rtl"==y?r.bidiTransform(q,"IRYNN","VLNNN"):r.bidiTransform(q,"ILYNN","VLNNN"):"\u200e"+("rtl"==y?"\u202b":"\u202a")+q+"\u202c"}return q},
bidiPreprocess:function(q){return q}});k.extend(D.TextPath,{textDir:"",formatText:function(q,v){if(v&&q&&1<q.length){var x="ltr",y=v;if("auto"==y){if(D.isVml)return q;y=r.checkContextual(q)}if(D.isVml)return x=r.checkContextual(q),y!=x?"rtl"==y?r.hasBidiChar(q)?"\u200f\u200f"+q:r.bidiTransform(q,"IRNNN","ILNNN"):"\u200e"+q:q;if(D.isSvgWeb)return"rtl"==y?r.bidiTransform(q,"IRNNN","ILNNN"):q;D.isSvg&&(q=a("opera")||4<=a("ff")?"\u200e"+("rtl"==y?"\u202b":"\u202a")+q+"\u202c":"rtl"==y?r.bidiTransform(q,
"IRYNN","VLNNN"):r.bidiTransform(q,"ILYNN","VLNNN"))}return q},bidiPreprocess:function(q){q&&"string"==typeof q&&(this.origText=q,q=this.formatText(q,this.textDir));return q}});n=function(q,v,x,y){var B=q.prototype[v];q.prototype[v]=function(){var z;x&&(z=x.apply(this,arguments));z=B.call(this,z);y&&(z=y.call(this,z,arguments));return z}};d=function(q){q&&(q.textDir&&(q.textDir=t(q.textDir)),q.text&&q.text instanceof Array&&(q.text=q.text.join(",")));!q||void 0==q.text&&!q.textDir||this.textDir==
q.textDir&&q.text==this.origText||(this.origText=void 0!=q.text?q.text:this.origText,q.textDir&&(this.textDir=q.textDir),q.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(q)};n(D.Text,"setShape",d,null);n(D.TextPath,"setText",d,null);d=function(q){(q=k.clone(q))&&this.origText&&(q.text=this.origText);return q};n(D.Text,"getShape",null,d);n(D.TextPath,"getText",null,d);d=function(q,v){var x;v&&v[0]&&(x=t(v[0]));q.setTextDir(x?x:this.textDir);return q};n(D.Surface,"createGroup",
null,d);n(D.Group,"createGroup",null,d);d=function(q){if(q){var v=q.textDir?t(q.textDir):this.textDir;v&&(q.textDir=v)}return q};n(D.Surface,"createText",d,null);n(D.Surface,"createTextPath",d,null);n(D.Group,"createText",d,null);n(D.Group,"createTextPath",d,null);D.createSurface=function(q,v,x,y){v=D[D.renderer].createSurface(q,v,x);y=t(y);if(D.isSvgWeb)return v.textDir=y?y:g.style(f.byId(q),"direction"),v;if(D.isVml||D.isSvg||D.isCanvas)v.textDir=y?y:g.style(v.rawNode,"direction");D.isSilverlight&&
(v.textDir=y?y:g.style(v._nodes[1],"direction"));return v};return D})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),function(D,k,a,f,g,p,n,d,e,l,h){var t=a.utils={};k.mixin(t,{forEach:function(r,q,v){v=v||D.global;q.call(v,r);(r instanceof a.Surface||r instanceof a.Group)&&g.forEach(r.children,function(x){t.forEach(x,q,v)})},
serialize:function(r){var q={},v;if((v=r instanceof a.Surface)||r instanceof a.Group){if(q.children=g.map(r.children,t.serialize),v)return q.children}else q.shape=r.getShape();r.getTransform&&(v=r.getTransform())&&(q.transform=v);r.getStroke&&(v=r.getStroke())&&(q.stroke=v);r.getFill&&(v=r.getFill())&&(q.fill=v);r.getFont&&(v=r.getFont())&&(q.font=v);return q},toJson:function(r,q){return n.toJson(t.serialize(r),q)},deserialize:function(r,q){if(q instanceof Array)return g.map(q,k.hitch(null,t.deserialize,
r));var v="shape"in q?r.createShape(q.shape):r.createGroup();"transform"in q&&v.setTransform(q.transform);"stroke"in q&&v.setStroke(q.stroke);"fill"in q&&v.setFill(q.fill);"font"in q&&v.setFont(q.font);"children"in q&&g.forEach(q.children,k.hitch(null,t.deserialize,v));return v},fromJson:function(r,q){return t.deserialize(r,n.fromJson(q))},toSvg:function(r){var q=new d;if("svg"===a.renderer)try{var v=t._cleanSvg(t._innerXML(r.rawNode));q.callback(v)}catch(y){q.errback(y)}else{t._initSvgSerializerDeferred||
t._initSvgSerializer();var x=t.toJson(r);v=function(){try{var y=r.getDimensions(),B=y.width,z=y.height,b=t._gfxSvgProxy.document.createElement("div");t._gfxSvgProxy.document.body.appendChild(b);p.withDoc(t._gfxSvgProxy.document,function(){f.style(b,"width",B);f.style(b,"height",z)},this);t._gfxSvgProxy[dojox._scopeName].gfx.createSurface(b,B,z).whenLoaded(null,function(c){try{t._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(c,x);var m=t._cleanSvg(b.innerHTML);c.clear();c.destroy();t._gfxSvgProxy.document.body.removeChild(b);
q.callback(m)}catch(u){q.errback(u)}})}catch(c){q.errback(c)}};0<t._initSvgSerializerDeferred.fired?v():t._initSvgSerializerDeferred.addCallback(v)}return q},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){t._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!t._initSvgSerializerDeferred){t._initSvgSerializerDeferred=new d;var r=p.doc.createElement("iframe");f.style(r,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});
var q;e("ie")?r.onreadystatechange=function(){"complete"==r.contentWindow.document.readyState&&(r.onreadystatechange=function(){},q=setInterval(function(){r.contentWindow[D.scopeMap.dojo[1]._scopeName]&&r.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx&&r.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(q),r.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=r.contentWindow,r.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50))}:r.onload=function(){r.onload=function(){};q=setInterval(function(){r.contentWindow[D.scopeMap.dojo[1]._scopeName]&&r.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx&&r.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(q),r.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=r.contentWindow,r.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50)};var v=h.dojoxGfxSvgProxyFrameUrl||l.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");
r.setAttribute("src",v.toString());p.body().appendChild(r)}},_innerXML:function(r){return r.innerXML?r.innerXML:r.xml?r.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(r):null},_cleanSvg:function(r){r&&(-1==r.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(r=r.substring(4,r.length),r='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+r),-1==r.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&(r=r.substring(4,r.length),r='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+
r),-1===r.indexOf("xlink:href")&&(r=r.replace(/href\s*=/g,"xlink:href\x3d")),r=r.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),r=r.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),r=r.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),r=r.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),r=r.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return r}});return t})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(D,k,a){function f(va,Da,
ya,wa,Aa){var Ea=va;void 0===Da&&(Da=Aa.defInFormat);void 0===ya&&(ya=Aa.defOutFormat);void 0===wa&&(wa=Aa.defSwap);if(Da!==ya){var Fa=Da.substring(0,1);var La=Da.substring(1,4);var Ja=ya.substring(0,1),Na=ya.substring(1,4);"C"===La.charAt(0)&&(La=g(Ea),La="ltr"===La||"rtl"===La?La.toUpperCase():"L"===Da.charAt(2)?"LTR":"RTL",Da=Fa+La);"C"===Na.charAt(0)&&(La=g(Ea),"rtl"===La?Na="RTL":"ltr"===La?(Ea=Ea.split(""),Ea.reverse(),La=g(Ea.join("")),Na=La.toUpperCase()):Na="L"===ya.charAt(2)?"LTR":"RTL",
ya=Ja+Na)}if(Da===ya)return va;Ja=Da.substring(0,1);Ea=Da.substring(1,4);Fa=ya.substring(0,1);Na=ya.substring(1,4);Aa.inFormat=Da;Aa.outFormat=ya;Aa.swap=wa;if("L"===Ja&&"VLTR"===ya){if("LTR"===Ea)return Aa.dir=w,p(va,Aa);if("RTL"===Ea)return Aa.dir=A,p(va,Aa)}if("V"===Ja&&"V"===Fa)return Aa.dir="RTL"===Ea?A:w,d(va,Aa);if("L"===Ja&&"VRTL"===ya)return Aa.dir="LTR"===Ea?w:A,va=p(va,Aa),d(va);if("VLTR"===Da&&"LLTR"===ya)return Aa.dir=w,p(va,Aa);if("V"===Ja&&"L"===Fa&&Ea!==Na)return va=d(va),"RTL"===
Ea?f(va,"LLTR","VLTR",wa,Aa):f(va,"LRTL","VRTL",wa,Aa);if("VRTL"===Da&&"LRTL"===ya)return f(va,"LRTL","VRTL",wa,Aa);if("L"===Ja&&"L"===Fa)return Da=Aa.swap,Aa.swap=Da.substr(0,1)+"N","RTL"===Ea?(Aa.dir=A,va=p(va,Aa),Aa.swap="N"+Da.substr(1,2),Aa.dir=w,va=p(va,Aa)):(Aa.dir=w,va=p(va,Aa),Aa.swap="N"+Da.substr(1,2),va=f(va,"VLTR","LRTL",Aa.swap,Aa)),va}function g(va){return(va=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(va))?"z">=va[0]?"ltr":"rtl":""}function p(va,
Da){var ya=va.split(""),wa=[];n(ya,wa,Da);if(0!==Da.hiLevel&&Da.swap.substr(0,1)!==Da.swap.substr(1,2))for(var Aa=0;Aa<ya.length;Aa++)if(1===wa[Aa]){var Ea=Aa;b:{var Fa=void 0;for(var La=ya[Aa],Ja=0,Na=G.length-1;Ja<=Na;)if(Fa=Math.floor((Ja+Na)/2),La<G[Fa][0])Na=Fa-1;else if(La>G[Fa][0])Ja=Fa+1;else{Fa=G[Fa][1];break b}Fa=La}ya[Ea]=Fa}h(2,ya,wa,Da);h(1,ya,wa,Da);b=wa;return ya.join("")}function n(va,Da,ya){var wa=va.length,Aa=ya.dir?da:U,Ea=null,Fa=null,La=null;Ea=0;Fa=Fa=null;var Ja=-1,Na=Fa=null,
Ha=[],Ma=[];ya.hiLevel=ya.dir;ya.lastArabic=!1;ya.hasUbatAl=!1;ya.hasUbatB=!1;ya.hasUbatS=!1;for(Fa=0;Fa<wa;Fa++){Na=Fa;La=va[Fa].charCodeAt(0);var Ka=Oa[La>>8];Ha[Na]=Ka<ha?Ka:Sa[Ka-ha][La&255]}for(Na=0;Na<wa;Na++){Ma[Na]=Fa=t(va,Ha,Ma,Na,ya);Ea=Aa[Ea][Fa];Fa=Ea&240;Ea&=15;Da[Na]=La=Aa[Ea][m];if(0<Fa){if(16===Fa)for(Fa=Ja;Fa<Na;Fa++)Da[Fa]=1;Ja=-1}if(Fa=Aa[Ea][u])-1===Ja&&(Ja=Na);else if(-1<Ja){for(Fa=Ja;Fa<Na;Fa++)Da[Fa]=La;Ja=-1}Ha[Na]===ua&&(Da[Na]=0);ya.hiLevel|=La}if(ya.hasUbatS)for(va=0;va<
wa;va++)if(Ha[va]===Ca)for(Da[va]=ya.dir,Aa=va-1;0<=Aa;Aa--)if(Ha[Aa]===Ba)Da[Aa]=ya.dir;else break}function d(va,Da){var ya=va.split("");if(Da){var wa=[];n(ya,wa,Da);b=wa}ya.reverse();B.reverse();return ya.join("")}function e(va){for(var Da=0;Da<Q.length;Da++)if(va>=Q[Da]&&va<=K[Da])return!0;return!1}function l(va,Da,ya,wa){for(;Da*ya<wa&&q(va[Da]);)Da+=ya;return Da*ya<wa&&e(va[Da])?!0:!1}function h(va,Da,ya,wa){if(!(wa.hiLevel<va))if(1!==va||wa.dir!==A||wa.hasUbatB){wa=Da.length;for(var Aa=0,Ea,
Fa,La;Aa<wa;){if(ya[Aa]>=va){for(Ea=Aa+1;Ea<wa&&ya[Ea]>=va;)Ea++;for(Fa=Ea-1;Aa<Fa;Aa++,Fa--)La=Da[Aa],Da[Aa]=Da[Fa],Da[Fa]=La,La=B[Aa],B[Aa]=B[Fa],B[Fa]=La;Aa=Ea}Aa++}}else Da.reverse(),B.reverse()}function t(va,Da,ya,wa,Aa){return{UBAT_L:function(){Aa.lastArabic=!1;return fa},UBAT_R:function(){Aa.lastArabic=!1;return ia},UBAT_ON:function(){return ta},UBAT_AN:function(){return ma},UBAT_EN:function(){return Aa.lastArabic?ma:la},UBAT_AL:function(){Aa.lastArabic=!0;Aa.hasUbatAl=!0;return ia},UBAT_WS:function(){return ta},
UBAT_CS:function(){var Ea,Fa;if(1>wa||wa+1>=Da.length||(Ea=ya[wa-1])!==la&&Ea!==ma||(Fa=Da[wa+1])!==la&&Fa!==ma)return ta;Aa.lastArabic&&(Fa=ma);return Fa===Ea?Fa:ta},UBAT_ES:function(){return(0<wa?ya[wa-1]:ua)===la&&wa+1<Da.length&&Da[wa+1]===la?la:ta},UBAT_ET:function(){if(0<wa&&ya[wa-1]===la)return la;if(Aa.lastArabic)return ta;for(var Ea=wa+1,Fa=Da.length;Ea<Fa&&Da[Ea]===Z;)Ea++;return Ea<Fa&&Da[Ea]===la?la:ta},UBAT_NSM:function(){if("VLTR"===Aa.inFormat){for(var Ea=Da.length,Fa=wa+1;Fa<Ea&&Da[Fa]===
ka;)Fa++;if(Fa<Ea&&(Ea=va[wa],Fa=Da[Fa],(1425<=Ea&&2303>=Ea||64286===Ea)&&(Fa===ia||Fa===xa)))return ia}return 1>wa||Da[wa-1]===ua?ta:ya[wa-1]},UBAT_B:function(){Aa.lastArabic=!0;Aa.hasUbatB=!0;return Aa.dir},UBAT_S:function(){Aa.hasUbatS=!0;return ta},UBAT_LRE:function(){Aa.lastArabic=!1;return ta},UBAT_RLE:function(){Aa.lastArabic=!1;return ta},UBAT_LRO:function(){Aa.lastArabic=!1;return ta},UBAT_RLO:function(){Aa.lastArabic=!1;return ta},UBAT_PDF:function(){Aa.lastArabic=!1;return ta},UBAT_BN:function(){return ta}}[qa[Da[wa]]]()}
function r(va,Da){for(var ya=0;ya<Y.length;ya++)if(va===Y[ya])return Da[ya];return va}function q(va){return"\u064b"<=va&&"\u0655">=va?!0:!1}function v(va){if("L"===va)return"LTR";if("R"===va)return"RTL";if("C"===va)return"CLR";if("D"===va)return"CRL"}function x(va,Da){for(var ya=0;ya<F.length;ya++)if(va===F[ya])return Da[ya];return va}function y(va,Da,ya,wa){for(var Aa=0;Aa<va.length;Aa++)if(va[Aa]>Da||!ya&&va[Aa]===Da)va[Aa]+=wa}D.getObject("string",!0,dojox);D=k("dojox.string.BidiEngine",a,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(va,Da,ya){this.sourceToTarget=[];this.targetToSource=[];if(!va)return"";var wa=this.sourceToTarget,Aa=this.targetToSource,Ea=va.length;B=[];b=[];for(var Fa=0;Fa<Ea;Fa++)wa[Fa]=Fa,Aa[Fa]=Fa,B[Fa]=Fa;if(!this.checkParameters(Da,ya))return va;Da=this.inputFormat;ya=this.outputFormat;wa=va;wa=c;Fa=v(Da.charAt(1));Aa=v(ya.charAt(1));var La="I"===Da.charAt(0)?"L":Da.charAt(0);Ea="I"===ya.charAt(0)?"L":ya.charAt(0);
Fa=La+Fa;Aa=Ea+Aa;Ea=Da.charAt(2)+ya.charAt(2);wa.defInFormat=Fa;wa.defOutFormat=Aa;wa.defSwap=Ea;va=f(va,Fa,Aa,Ea,wa);wa=!1;if("R"===ya.charAt(1))wa=!0;else if("C"===ya.charAt(1)||"D"===ya.charAt(1))wa=this.checkContextual(va);Aa=this.sourceToTarget=B;Ea=Array(Aa.length);for(Fa=0;Fa<Aa.length;Fa++)Ea[Aa[Fa]]=Fa;z=this.targetToSource=Ea;if(Da.charAt(3)===ya.charAt(3))wa=va;else if("S"===ya.charAt(3))if(Da=wa,ya=!0,0===va.length)wa=void 0;else{void 0===Da&&(Da=!0);void 0===ya&&(ya=!0);va=String(va);
va=va.split("");var Ja=0;Aa=1;wa=va.length;Da||(Ja=va.length-1,Aa=-1,wa=1);Ea=wa;Fa=ya;var Na=0;wa=[];for(La=0;Ja*Aa<Ea;Ja+=Aa)if(e(va[Ja])||q(va[Ja])){var Ha;if(Ha="\u0644"===va[Ja])b:{for(var Ma=va,Ka=Ja+Aa,Qa=Aa,$a=Ea;Ka*Qa<$a&&q(Ma[Ka]);)Ka+=Qa;Ha=" ";if(Ka*Qa<$a)for(Ha=Ma[Ka],Ma=0;Ma<F.length;Ma++)if(F[Ma]===Ha){Ha=!0;break b}Ha=!1}if(Ha){va[Ja]=0===Na?x(va[Ja+Aa],I):x(va[Ja+Aa],M);Ja+=Aa;Na=va;Ha=Ja;Ma=Aa;for(Ka=Ea;Ha*Ma<Ka&&q(Na[Ha]);)Ha+=Ma;Ha*Ma<Ka&&(Na[Ha]=" ");Fa&&(wa[La]=Ja,La++);Na=0}else{Ha=
va[Ja];if(1===Na){Ma=Ja;if(l(va,Ja+Aa,Aa,Ea))b:for(Ka=va[Ja],Qa=0;Qa<Y.length;Qa++){if(Ka===Y[Qa]){Ka=O[Qa];break b}}else Ka=r(va[Ja],S);va[Ma]=Ka}else!0===l(va,Ja+Aa,Aa,Ea)?va[Ja]=r(va[Ja],L):va[Ja]=r(va[Ja],R);q(Ha)||(Na=1);b:{for(Ma=0;Ma<P.length;Ma++)if(P[Ma]===Ha){Ha=!0;break b}Ha=!1}!0===Ha&&(Na=0)}}else Na=0;Aa="";for(Ea=0;Ea<va.length;Ea++){if(Fa=ya){b:{for(Fa=0;Fa<wa.length;Fa++)if(wa[Fa]===Ea)break b;Fa=-1}Fa=-1<Fa}Fa?(y(z,Ea,!Da,-1),B.splice(Ea,1)):Aa+=va[Ea]}wa=Aa}else if(Da=va,ya=wa,
va=!0,0===Da.length)wa=void 0;else for(void 0===va&&(va=!0),void 0===ya&&(ya=!0),Da=String(Da),wa="",Aa=[],Aa=Da.split(""),Ea=0;Ea<Da.length;Ea++)Fa=!1,"\ufe70"<=Aa[Ea]&&"\ufeff">Aa[Ea]?(La=Da.charCodeAt(Ea),"\ufef5"<=Aa[Ea]&&"\ufefc">=Aa[Ea]?(ya?(0<Ea&&va&&" "===Aa[Ea-1]?wa=wa.substring(0,wa.length-1)+"\u0644":(wa+="\u0644",Fa=!0),wa+=F[(La-65269)/2]):(wa+=F[(La-65269)/2],wa+="\u0644",Ea+1<Da.length&&va&&" "===Aa[Ea+1]?Ea++:Fa=!0),Fa&&(y(z,Ea,!0,1),B.splice(Ea,0,B[Ea]))):wa+=X[La-65136]):wa+=Aa[Ea];
this.sourceToTarget=B;this.targetToSource=z;this.levels=b;return wa},_inputFormatSetter:function(va){if(!C.test(va))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=va},_outputFormatSetter:function(va){if(!C.test(va))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=va},checkParameters:function(va,Da){va?this.set("inputFormat",va):va=this.inputFormat;Da?this.set("outputFormat",Da):Da=this.outputFormat;return va===Da?
!1:!0},checkContextual:function(va){va=g(va);if("ltr"!==va&&"rtl"!==va){try{va=document.dir.toLowerCase()}catch(Da){}"ltr"!==va&&"rtl"!==va&&(va="ltr")}return va},hasBidiChar:function(va){return E.test(va)}});var B=[],z=[],b=[],c={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},m=5,u=6,w=0,A=1,C=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,G=[["(",")"],
[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],F=["\u0622","\u0623",
"\u0625","\u0627"],I=["\ufef5","\ufef7","\ufef9","\ufefb"],M=["\ufef6","\ufef8","\ufefa","\ufefc"],Y="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),R="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
S="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),O="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
L="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),P="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),X="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
Q=["\u0621","\u0641"],K=["\u063a","\u064a"],U=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],da=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],fa=0,ia=1,la=2,ma=3,ta=4,ua=5,Ca=6,xa=7,Ba=8,Z=11,ka=12,qa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ha=100;k=fa;a=ia;var ea=la,na=ma,N=ta,V=ua,ca=Ca,J=xa,pa=Ba,
sa=Z,oa=ka,Oa=[ha+0,k,k,k,k,ha+1,ha+2,ha+3,a,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,ha+4,N,N,N,k,N,k,N,k,N,N,N,k,k,N,N,k,k,k,k,k,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,k,k,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,k,k,N,N,k,k,N,N,k,k,N,N,N,N,N,N,N,N,N,N,N,
N,N,N,N,N,N,N,N,N,N,N,N,k,k,k,ha+5,J,J,ha+6,ha+7],Sa=[[18,18,18,18,18,18,18,18,18,ca,V,ca,pa,V,18,18,18,18,18,18,18,18,18,18,18,18,18,18,V,V,V,ca,pa,N,N,sa,sa,sa,N,N,N,N,N,10,9,10,9,9,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,9,N,N,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,N,N,18,18,18,18,18,18,V,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,N,sa,sa,sa,sa,N,N,N,N,k,N,N,18,N,N,sa,sa,ea,ea,N,
k,N,N,N,ea,k,N,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,k,k,k,k,k,k,k,k],[k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,N,N,N,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,k,k,k,k,k,k,k,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,k,N,N,N,N,N,N,N,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,
oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,a,oa,a,oa,oa,a,oa,oa,a,oa,N,N,N,N,N,N,N,N,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,N,N,N,N,N,a,a,a,a,a,N,N,N,N,N,N,N,N,N,N,N],[na,na,na,na,N,N,N,N,J,sa,sa,J,9,J,N,N,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,J,N,N,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,na,na,na,na,na,na,na,na,na,na,sa,na,na,J,J,J,oa,J,J,J,J,
J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,oa,oa,oa,oa,oa,oa,oa,na,N,oa,oa,oa,oa,oa,oa,J,J,oa,oa,N,oa,oa,oa,oa,J,J,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,J,J,J,J,J,J],[J,J,J,J,J,J,J,J,J,J,J,J,J,J,N,J,J,oa,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,N,N,J,J,J,J,J,
J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,J,N,N,N,N,N,N,N,N,N,N,N,N,N,N,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,oa,oa,oa,oa,oa,oa,oa,oa,oa,a,a,N,N,N,N,a,N,N,N,N,N],[pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,18,18,18,k,a,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,pa,V,13,14,15,16,17,9,sa,sa,sa,sa,sa,
N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,9,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,pa,18,18,18,18,18,N,N,N,N,N,18,18,18,18,18,18,ea,k,N,N,ea,ea,ea,ea,ea,ea,10,10,N,N,N,k,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,10,10,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,N,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,sa,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[k,
k,k,k,k,k,k,N,N,N,N,N,N,N,N,N,N,N,N,k,k,k,k,k,N,N,N,N,N,a,oa,a,a,a,a,a,a,a,a,a,a,10,a,a,a,a,a,a,a,a,a,a,a,a,a,N,a,a,a,a,a,N,a,N,a,a,N,a,a,N,a,a,a,a,a,a,a,a,a,a,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,
J,J,J,J,J],[oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,oa,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,oa,oa,oa,oa,oa,oa,oa,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,9,N,9,N,N,9,N,N,N,N,N,N,N,N,N,sa,N,N,10,10,N,N,N,N,N,sa,sa,N,N,N,N,N,J,J,J,J,J,N,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,
J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,N,N,18],[N,N,N,sa,sa,sa,N,N,N,N,N,10,9,10,9,9,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,9,N,N,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,N,N,N,N,N,N,N,N,N,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,N,N,N,k,k,k,k,k,k,N,N,k,k,k,k,k,k,N,N,k,k,k,k,k,k,N,
N,k,k,k,N,N,N,sa,sa,N,N,N,sa,sa,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N]];return D})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(D,k,a){D=function(){return this}();var f=D.location,g=f.pathname;a=f.protocol;f={version:"3.41",_appBaseUrl:a+"//"+f.host+g.substring(0,g.lastIndexOf(g.split("/")[g.split("/").length-1]))};k.noGlobals||(D.esri=f);(f.dijit=f.dijit||{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";
return f})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(D,k,a,f,g,p,n,d,e){function l(B,z,b,c){(z=z&&z[B])?z={formatType:z.formatType,options:z}:c&&-1!==D.indexOf(c.properties||"",B)?z={formatType:c.formatter||"DateString",options:null}:b&&-1!==D.indexOf(b.properties||"",B)&&(z={formatType:b.formatter||"NumberFormat",options:null});return z}function h(B,z,b){return[f.isString(B)?
B.split(""):B,z||a.global,f.isString(b)?new Function("item","index","array",b):b]}function t(B){return void 0!==B&&null!==B}function r(B){return t(B)?B:""}function q(B,z,b,c){var m=b.match(/([^\(]+)(\([^\)]+\))?/i);b=f.trim(m[1]);var u=m[2]?f.trim(m[2]):null;m=z[B];c=c||(u?k.fromJson(u.replace(/^\(/,"({").replace(/\)$/,"})")):{});u=c.utcOffset;if(-1===D.indexOf(x,b))b=f.getObject(b),f.isFunction(b)&&(m=b(m,B,z,c));else if("number"===typeof m||"string"===typeof m&&m&&!isNaN(Number(m)))switch(m=Number(m),
b){case "NumberFormat":return n.format(m,c);case "DateString":B=new Date(m);if(c.local||c.systemLocale)return c.systemLocale?B.toLocaleDateString()+(c.hideTime?"":" "+B.toLocaleTimeString()):B.toDateString()+(c.hideTime?"":" "+B.toTimeString());B=B.toUTCString();c.hideTime&&(B=B.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return B;case "DateFormat":return B=new Date(m),t(u)&&(B=g.add(B,"minute",B.getTimezoneOffset()-u)),d.format(B,c)}return r(m)}function v(B,z){var b;if(z)for(b in B)B.hasOwnProperty(b)&&
(void 0===B[b]?delete B[b]:B[b]instanceof Object&&v(B[b],!0));else for(b in B)B.hasOwnProperty(b)&&void 0===B[b]&&delete B[b];return B}var x=["NumberFormat","DateString","DateFormat"],y=/<\/?[^>]+>/g;p={valueOf:function(B,z){for(var b in B)if(B[b]==z)return b;return null},stripTags:function(B){if(B){var z=typeof B;if("string"===z)B=B.replace(y,"");else if("object"===z)for(var b in B)(z=B[b])&&"string"===typeof z&&(z=z.replace(y,"")),B[b]=z}return B},substitute:function(B,z,b){if(t(b))if(f.isObject(b)){var c=
b.first;var m=b.dateFormat;var u=b.numberFormat;var w=b.format}else c=b;if(z&&"${*}"!==z)return f.replace(z,f.hitch({obj:B},function(C,E){var G=E.split(":"),F;return 1<G.length?(E=G[0],G.shift(),(F=w&&w[G[0]])?G=F.formatType:(G=G.join(":"),F=null),q(E,this.obj,G,F)):(F=l(E,w,u,m))?q(E,this.obj,F.formatType,F.options):r(this.obj[E])}),/\$\{([^\}]+)\}/g);z=[];for(var A in B)if(b=(b=l(A,w,u,m))?q(A,B,b.formatType,b.options):B[A],z.push(A+" \x3d "+r(b)+"\x3cbr/\x3e"),c)break;return z.join("")},filter:function(B,
z,b){z=h(B,b,z);b={};var c;B=z[0];for(c in B)z[2].call(z[c],B[c],c,B)&&(b[c]=B[c]);return b},startsWith:function(B,z,b){b=b||0;return B.indexOf(z,b)===b},endsWith:function(B,z,b){if("number"!==typeof b||!isFinite(b)||Math.floor(b)!==b||b>B.length)b=B.length;b-=z.length;B=B.indexOf(z,b);return-1!==B&&B===b},isDefined:t,fixJson:v,isObject:function(B){return B&&"object"===typeof B},isString:function(B){return"string"===typeof B},mixin:function(B,z){for(var b in z)z.hasOwnProperty(b)&&(B[b]=z[b]);return B},
clone2DArray:function(B){if(B=B?B.slice(0):null){var z,b=B.length;for(z=0;z<b;z++)B[z]=B[z]?B[z].slice(0):null}return B},clone3DArray:function(B){if(B=B?B.slice(0):null){var z,b=B.length;for(z=0;z<b;z++){B[z]=B[z]?B[z].slice(0):null;var c=B[z];if(c){var m,u=c.length;for(m=0;m<u;m++)c[m]=c[m]?c[m].slice(0):null}}}return B}};f.mixin(e,p);e._isDefined=t;e._getParts=h;e._sanitize=v;return p})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(D,k,a){var f=D("ff"),g=
D("ie"),p=void 0===g&&7<=D("trident"),n=D("edge"),d=D("webkit"),e=D("opera"),l=D("chrome"),h=D("safari"),t=navigator.userAgent,r;(r=t.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&D.add("esri-iphone",parseFloat(r[2].replace("_",".")));(r=t.match(/Android\s+(\d+(\.\d+)*)/i))&&D.add("esri-android",parseFloat(r[1]));(r=t.match(/Fennec\/(\d+\.\d+)/i))&&D.add("esri-fennec",parseFloat(r[1]));0<=t.indexOf("BlackBerry")&&0<=t.indexOf("WebKit")&&D.add("esri-blackberry",1);D.add("esri-touch",D("esri-iphone")||
D("esri-android")||D("esri-blackberry")||6<=D("esri-fennec")||(f||d)&&(document.createTouch||"ontouchstart"in k||k.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(r=t.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&D.add("esri-mobile",!!r);D.add("esri-pointer",!f&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!k.PointerEvent));a._getDOMAccessor=function(v){var x="";f?x="Moz":d?x="Webkit":g?x="ms":e&&(x="O");return x+v.charAt(0).toUpperCase()+v.substr(1)};D.add("esri-phonegap",
!!k.cordova);D.add("esri-cors",D("esri-phonegap")||k.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);D.add("esri-file-upload",k.FormData&&k.FileList?!0:!1);D.add("esri-script-sandbox",function(){return"MessageChannel"in k&&"HTMLIFrameElement"in k&&"sandbox"in HTMLIFrameElement.prototype});D.add("esri-secure-context",function(){if("isSecureContext"in k)return k.isSecureContext;if(k.location&&k.location.origin)return 0===k.location.origin.indexOf("https:")});D.add("esri-wasm","WebAssembly"in
k);D.add("esri-workers",k.Worker?!0:!1);D.add("esri-featurelayer-webgl",!1);if(t=D("esri-featurelayer-webgl")){var q=D("esri-mobile");r=q?1:2;q=q?1:3;"object"===typeof t?(t.maxDrillLevel=null==t.maxDrillLevel?r:t.maxDrillLevel,t.maxRecordCountFactor=null==t.maxRecordCountFactor?q:t.maxRecordCountFactor,t.enablePBFQuery=null==t.enablePBFQuery?!0:t.enablePBFQuery):D.add("esri-featurelayer-webgl",{maxDrillLevel:r,maxRecordCountFactor:q,enablePBFQuery:!0},null,!0)}D.add("esri-featurelayer-webgl-labeling",
!1);D.add("esri-pbf",!g||10<=g);D.add("esri-featurelayer-pbf",!0);D.add("esri-transforms",p||n||9<=g||3.5<=f||4<=l||3.1<=h||10.5<=e||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transitions",p||n||10<=g||4<=f||4<=l||3.1<=h||10.5<=e||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transforms3d",p||n||10<=f||12<=l||4<=h||3.2<=D("esri-iphone")||3<=D("esri-android"));D.add("esri-url-encodes-apostrophe",function(){if(!k.document)return!1;var v=k.document.createElement("a");v.href=
"?'";return-1<v.href.indexOf("?%27")});3>D("esri-android")&&(D.add("esri-transforms",!1,!1,!0),D.add("esri-transitions",!1,!1,!0),D.add("esri-transforms3d",!1,!1,!0));D.add("esri-will-change",D("esri-transforms")&&(52<=l||11.1<=h));a._css=function(v){var x=D("esri-transforms3d");void 0!==v&&null!==v?x=v:x&&(l||h&&!D("esri-iphone"))&&(x=!1);var y=x?"translate3d(":"translate(",B=x?l?",-1px)":",0px)":")",z=x?"scale3d(":"scale(",b=x?",1)":")",c=x?"rotate3d(0,0,1,":"rotate(",m=x?"matrix3d(":"matrix(",
u=x?",0,0,":",",w=x?",0,0,0,0,1,0,":",",A=x?",0,1)":")";return{names:{transition:d&&"-webkit-transition"||f&&"MozTransition"||e&&"OTransition"||g&&"msTransition"||"transition",transform:d&&"-webkit-transform"||f&&"MozTransform"||e&&"OTransform"||g&&"msTransform"||"transform",transformName:d&&"-webkit-transform"||f&&"-moz-transform"||e&&"-o-transform"||g&&"-ms-transform"||"transform",origin:d&&"-webkit-transform-origin"||f&&"MozTransformOrigin"||e&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",
endEvent:d&&"webkitTransitionEnd"||f&&"transitionend"||e&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(C,E){return y+C+"px,"+E+"px"+B},scale:function(C){return z+C+","+C+b},rotate:function(C){return c+C+"deg)"},matrix:function(C){return m+C.xx+","+C.xy+u+C.yx+","+C.yy+w+C.dx.toFixed(10)+(f&&59>=f?"px,":",")+C.dy.toFixed(10)+(f&&59>=f?"px":"")+A},getScaleFromMatrix:function(C){if(!C)return 1;C=C.toLowerCase();var E=-1<C.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(C.substring(E.length,
C.indexOf(",")))}}};a.isiPhone=D("esri-iphone");a.isAndroid=D("esri-android");a.isFennec=D("esri-fennec");a.isBlackBerry=D("esri-blackberry");a.isTouchEnabled=D("esri-touch");a.isPointerEnabled=D("esri-pointer");a._hasCors=D("esri-cors");a._hasFileUpload=D("esri-file-upload");a._hasTransforms=D("esri-transforms");a._hasTransitions=D("esri-transitions");a._has3DTransforms=D("esri-transforms3d");return D})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(D,k,a,f,g,p,n,d,e,l){var h={},t=d.defaults.io,r=/^[a-z][a-z0-9\+\-\.]*:/i,q=/^\s*http:/i,v=/^\s*https:/i,x=/:\d+$/,y=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;h.isHTTP=function(z){var b=f.location.protocol;return null==z?"http:"===b||"https:"===b:z?"https:"===b:"http:"===b};h.getProtocolForWebResource=function(z){return h.isHTTP()?f.location.protocol:z?"https:":"http:"};h.urlToObject=function(z){var b={},c=new a(z),m=z.indexOf("?");null===c.query?b={path:z,query:null}:(b.path=z.substring(0,
m),b.query=g.queryToObject(c.query));c.fragment&&(b.hash=c.fragment,null===c.query&&(b.path=b.path.substring(0,b.path.length-(c.fragment.length+1))));return b};h.getProxyUrl=function(z,b){var c=D.isString(z)?0===D.trim(z).toLowerCase().indexOf("https:"):z,m=t.proxyUrl,u,w=l.io.proxyNotSet;D.isString(z)&&(u=h.getProxyRule(z))&&(m=u.proxyUrl);if(!m)throw Error(w);if(c&&!1!==b&&0!==f.location.href.toLowerCase().indexOf("https:")&&(c=m,0!==c.toLowerCase().indexOf("http")&&(c=h.getAbsoluteUrl(c)),c=c.replace(/^http:/i,
"https:"),h.canUseXhr(c))){m=c;var A=1}m=h.urlToObject(m);m._xo=A;return m};h.addProxy=function(z){var b=h.getProxyRule(z),c;b?c=h.urlToObject(b.proxyUrl):t.alwaysUseProxy&&(c=h.getProxyUrl());c&&(b=h.urlToObject(z),z=c.path+"?"+b.path,(c=g.objectToQuery(D.mixin(c.query||{},b.query)))&&(z+="?"+c));return z};h.addProxyRule=function(z){var b=z.urlPrefix=h.urlToObject(z.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),c=t.proxyRules,m,u=c.length,w=u;for(m=0;m<u;m++){var A=
c[m].urlPrefix;if(0===b.indexOf(A)){if(b.length===A)return-1;w=m;break}else 0===A.indexOf(b)&&(w=m+1)}c.splice(w,0,z);return w};h.getProxyRule=function(z){var b=t.proxyRules,c=b.length,m=h.urlToObject(z).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(z=0;z<c;z++)if(0===m.indexOf(b[z].urlPrefix)){var u=b[z];break}return u};h.hasSameOrigin=function(z,b,c){z=z.toLowerCase();b=b.toLowerCase();var m=f.location.href.toLowerCase();z=0===z.indexOf("http")?new a(z):m=new a(m);
b=0===b.indexOf("http")?new a(b):D.isString(m)?new a(m):m;return(c||z.scheme===b.scheme)&&z.host===b.host&&z.port===b.port};h.canUseXhr=function(z,b){var c=e("esri-phonegap")?!0:!1,m=h.hasSameOrigin,u=t.corsEnabledServers,w,A=-1;!c&&e("esri-cors")&&u&&u.length&&(c=k.some(u,function(C,E){var G=!C||"object"!==typeof C||C instanceof RegExp?C:C.host;if(G instanceof RegExp){if(G.test(z))return A=E,!0}else if(G&&(w=0!==G.trim().toLowerCase().indexOf("http"),m(z,w?"http://"+G:G)||w&&m(z,"https://"+G)))return A=
E,!0;return!1}));return b?A:c};h.getAbsoluteUrl=function(z){var b=h.getProtocolForWebResource();return D.isString(z)&&!r.test(z)?0===z.indexOf("//")?b+z:0===z.indexOf("/")?b+"//"+f.location.host+z:p._appBaseUrl+z:z};h.fixUrl=function(z){z=D.trim(z);z=h.getAbsoluteUrl(z);z=h.normalizeSlashes(z);z=z.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");z=h.downgradeToHTTP(z);return z=h.upgradeToHTTPS(z)};h.normalize=function(z){return h.fixUrl(z)};h.normalizeSlashes=function(z){if(/^https?:\/\//i.test(z)){var b=
z.indexOf("?");if(-1<b){var c=z.slice(0,b);var m=z.slice(b+1)}else c=z;z=c.replace(/\/{2,}/g,"/");z=z.replace("/","//");m&&(z+="?"+m)}return z};h.downgradeToHTTP=function(z){return h.isHTTP(!1)&&v.test(z)&&h.hasSameOrigin(f.location.href,z,!0)&&!h.canUseXhr(z)?z.replace(v,"http:"):z};h.upgradeToHTTPS=function(z){var b=t.httpsDomains,c=h.isHTTP(!1),m=h.isHTTP(!0);if(!q.test(z))return z;z=D.trim(z);var u=z.indexOf("/",7);u=-1===u?z:z.slice(0,u);u=u.toLowerCase().slice(7);if(x.test(u))if(n.endsWith(u,
":80"))u=u.slice(0,-3),z=z.replace(":80","");else return z;if(c&&u===f.location.host&&(!y.test(z)||!h.canUseXhr(z)))return z;c=!1;if(m&&u===f.location.host)c=!0;else if(b)for(var w=0;w<b.length;w++){var A=b[w];if(u===A||n.endsWith(u,"."+A)){c=!0;break}}c||!m||t.alwaysUseProxy||h.getProxyRule(z)||(c=!0);c&&(z=z.replace(q,"https:"));return z};d=l.widgets.popup;var B=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:d.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:d.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:d.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:d.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:d.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:d.NLS_openLinkInApp}];h.getURIInfo=function(z){var b;k.some(B,function(c){c.pattern.test(z)&&(b=c);return!!b});return b};h.isKnownURI=function(z){return!!h.getURIInfo(z)};h.base64UrlEncode=function(z){return btoa(String.fromCharCode.apply(null,z)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};D.mixin(p,h);p._getProxyUrl=h.getProxyUrl;p._getProxiedUrl=h.addProxy;p._hasSameOrigin=h.hasSameOrigin;p._canDoXOXHR=h.canUseXhr;p._getAbsoluteUrl=h.getAbsoluteUrl;
p.fixUrl=h.fixUrl;return h})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(D,k,a,f){a=function(){return this}();var g={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,
0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(p,n){k.publish("esri.Error",[p])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com",
"jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com",
"static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com",
"servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};f.config=g;D.noGlobals||(a.esriConfig=g);return g})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(D,k,a,f,g){function p(t,r,q){return t&&r?t.getWidth()/r*(q||d)*39.37*e.screenDPI:0}function n(t,r,q,v,x){return t.expand(v*r/(39.37*((x?q:l.values[l[q]])||d)*e.screenDPI)/t.getWidth())}var d=6370997*Math.PI/180,e=f.defaults,l=g,h={getUnitValueForSR:function(t){return this.getUnitValue(t)||
d},getUnitValue:function(t){if(t)if("object"===typeof t){var r=t.wkid;var q=t.wkt}else"number"===typeof t?r=t:"string"===typeof t&&(q=t);if(r)var v=l.values[l[r]];else q&&-1!==q.search(/^PROJCS/i)&&(t=/UNIT\[([^\]]+)\]\]$/i.exec(q))&&t[1]&&(v=parseFloat(t[1].split(",")[1]));return v},getScale:function(t,r,q){if(1<arguments.length&&null!=r&&!r.declaredClass){var v=t;var x=r;r=null;var y=h.getUnitValue(q)}else v=r||t.extent,x=t.width,y=h.getUnitValue(v&&v.spatialReference);return p(v,x,y)},getExtentForScale:function(t,
r,q){return n(q||t.extent,t.width,h.getUnitValue(t.spatialReference),r,!0)}};D.mixin(D.getObject("geometry",!0,a),h);a.geometry._getScale=p;a.geometry._getExtentForScale=n;return h})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(D,k){var a,f={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,
22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,
29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,
102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,
103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,
103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,
103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,
103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=a;a++)f[a]=0;for(a=2056;2065>=a;a++)f[a]=0;for(a=2067;2135>=a;a++)f[a]=0;for(a=2137;2154>=a;a++)f[a]=0;for(a=2161;2170>=a;a++)f[a]=0;for(a=2172;2193>=a;a++)f[a]=0;for(a=2195;2198>=a;a++)f[a]=0;for(a=2200;2203>=a;a++)f[a]=0;for(a=2205;2217>=a;a++)f[a]=0;for(a=2222;2224>=a;a++)f[a]=1;for(a=2225;2250>=a;a++)f[a]=2;for(a=2251;2253>=a;a++)f[a]=1;for(a=2257;2264>=a;a++)f[a]=2;for(a=2274;2279>=a;a++)f[a]=2;for(a=2280;2282>=a;a++)f[a]=1;for(a=
2283;2289>=a;a++)f[a]=2;for(a=2290;2292>=a;a++)f[a]=0;for(a=2308;2313>=a;a++)f[a]=0;for(a=2315;2491>=a;a++)f[a]=0;for(a=2494;2866>=a;a++)f[a]=0;for(a=2867;2869>=a;a++)f[a]=1;for(a=2870;2888>=a;a++)f[a]=2;for(a=2891;2895>=a;a++)f[a]=2;for(a=2896;2898>=a;a++)f[a]=1;for(a=2902;2908>=a;a++)f[a]=2;for(a=2915;2920>=a;a++)f[a]=2;for(a=2921;2923>=a;a++)f[a]=1;for(a=2924;2930>=a;a++)f[a]=2;for(a=2931;2962>=a;a++)f[a]=0;for(a=2964;2968>=a;a++)f[a]=2;for(a=2969;2973>=a;a++)f[a]=0;for(a=2975;2991>=a;a++)f[a]=
0;for(a=2995;3051>=a;a++)f[a]=0;for(a=3054;3079>=a;a++)f[a]=0;for(a=3081;3088>=a;a++)f[a]=0;for(a=3092;3101>=a;a++)f[a]=0;for(a=3106;3138>=a;a++)f[a]=0;for(a=3146;3151>=a;a++)f[a]=0;for(a=3153;3166>=a;a++)f[a]=0;for(a=3168;3172>=a;a++)f[a]=0;for(a=3174;3203>=a;a++)f[a]=0;for(a=3294;3358>=a;a++)f[a]=0;for(a=3367;3403>=a;a++)f[a]=0;for(a=3408;3416>=a;a++)f[a]=0;for(a=3417;3438>=a;a++)f[a]=2;for(a=3441;3446>=a;a++)f[a]=2;for(a=3447;3450>=a;a++)f[a]=0;for(a=3451;3459>=a;a++)f[a]=2;for(a=3460;3478>=a;a++)f[a]=
0;for(a=3554;3559>=a;a++)f[a]=0;for(a=3560;3570>=a;a++)f[a]=2;for(a=3571;3581>=a;a++)f[a]=0;for(a=3594;3597>=a;a++)f[a]=0;for(a=3601;3604>=a;a++)f[a]=0;for(a=3637;3639>=a;a++)f[a]=0;for(a=3665;3667>=a;a++)f[a]=0;for(a=3693;3695>=a;a++)f[a]=0;for(a=3701;3727>=a;a++)f[a]=0;for(a=3728;3739>=a;a++)f[a]=2;for(a=3740;3751>=a;a++)f[a]=0;for(a=3753;3760>=a;a++)f[a]=2;for(a=3761;3773>=a;a++)f[a]=0;for(a=3775;3777>=a;a++)f[a]=0;for(a=3779;3781>=a;a++)f[a]=0;for(a=3783;3785>=a;a++)f[a]=0;for(a=3788;3791>=a;a++)f[a]=
0;for(a=3797;3802>=a;a++)f[a]=0;for(a=3814;3816>=a;a++)f[a]=0;for(a=3825;3829>=a;a++)f[a]=0;for(a=3832;3841>=a;a++)f[a]=0;for(a=3844;3852>=a;a++)f[a]=0;for(a=3873;3885>=a;a++)f[a]=0;for(a=3890;3893>=a;a++)f[a]=0;for(a=3907;3912>=a;a++)f[a]=0;for(a=3942;3950>=a;a++)f[a]=0;for(a=3968;3970>=a;a++)f[a]=0;for(a=3973;3976>=a;a++)f[a]=0;for(a=3986;3989>=a;a++)f[a]=0;for(a=3994;3997>=a;a++)f[a]=0;for(a=4048;4051>=a;a++)f[a]=0;for(a=4056;4063>=a;a++)f[a]=0;for(a=4093;4096>=a;a++)f[a]=0;for(a=4390;4398>=a;a++)f[a]=
0;for(a=4399;4413>=a;a++)f[a]=2;for(a=4418;4433>=a;a++)f[a]=2;for(a=4455;4457>=a;a++)f[a]=2;for(a=4484;4489>=a;a++)f[a]=0;for(a=4491;4554>=a;a++)f[a]=0;for(a=4568;4589>=a;a++)f[a]=0;for(a=4652;4656>=a;a++)f[a]=0;for(a=4766;4800>=a;a++)f[a]=0;for(a=5014;5016>=a;a++)f[a]=0;for(a=5069;5072>=a;a++)f[a]=0;for(a=5105;5130>=a;a++)f[a]=0;for(a=5173;5188>=a;a++)f[a]=0;for(a=5253;5259>=a;a++)f[a]=0;for(a=5269;5275>=a;a++)f[a]=0;for(a=5292;5311>=a;a++)f[a]=0;for(a=5329;5331>=a;a++)f[a]=0;for(a=5343;5349>=a;a++)f[a]=
0;for(a=5355;5357>=a;a++)f[a]=0;for(a=5387;5389>=a;a++)f[a]=0;for(a=5459;5463>=a;a++)f[a]=0;for(a=5479;5482>=a;a++)f[a]=0;for(a=5518;5520>=a;a++)f[a]=0;for(a=5530;5539>=a;a++)f[a]=0;for(a=5550;5552>=a;a++)f[a]=0;for(a=5562;5583>=a;a++)f[a]=0;for(a=5623;5625>=a;a++)f[a]=2;for(a=5631;5639>=a;a++)f[a]=0;for(a=5649;5653>=a;a++)f[a]=0;for(a=5663;5680>=a;a++)f[a]=0;for(a=5682;5685>=a;a++)f[a]=0;for(a=5875;5877>=a;a++)f[a]=0;for(a=5896;5899>=a;a++)f[a]=0;for(a=5921;5940>=a;a++)f[a]=0;for(a=6050;6125>=a;a++)f[a]=
0;for(a=6244;6275>=a;a++)f[a]=0;for(a=6328;6348>=a;a++)f[a]=0;for(a=6350;6356>=a;a++)f[a]=0;for(a=6366;6372>=a;a++)f[a]=0;for(a=6381;6387>=a;a++)f[a]=0;for(a=6393;6404>=a;a++)f[a]=0;for(a=6480;6483>=a;a++)f[a]=0;for(a=6511;6514>=a;a++)f[a]=0;for(a=6579;6581>=a;a++)f[a]=0;for(a=6619;6624>=a;a++)f[a]=0;for(a=6625;6627>=a;a++)f[a]=2;for(a=6628;6632>=a;a++)f[a]=0;for(a=6634;6637>=a;a++)f[a]=0;for(a=6669;6692>=a;a++)f[a]=0;for(a=6707;6709>=a;a++)f[a]=0;for(a=6720;6723>=a;a++)f[a]=0;for(a=6732;6738>=a;a++)f[a]=
0;for(a=6931;6933>=a;a++)f[a]=0;for(a=6956;6959>=a;a++)f[a]=0;for(a=7005;7007>=a;a++)f[a]=0;for(a=7057;7070>=a;a++)f[a]=2;for(a=7074;7082>=a;a++)f[a]=0;for(a=7109;7118>=a;a++)f[a]=0;for(a=7119;7127>=a;a++)f[a]=1;for(a=7374;7376>=a;a++)f[a]=0;for(a=7528;7586>=a;a++)f[a]=0;for(a=7587;7645>=a;a++)f[a]=2;for(a=7692;7696>=a;a++)f[a]=0;for(a=7755;7787>=a;a++)f[a]=0;for(a=7791;7795>=a;a++)f[a]=0;for(a=7799;7801>=a;a++)f[a]=0;for(a=7803;7805>=a;a++)f[a]=0;for(a=7825;7831>=a;a++)f[a]=0;for(a=7845;7859>=a;a++)f[a]=
0;for(a=8013;8032>=a;a++)f[a]=0;for(a=8065;8068>=a;a++)f[a]=1;for(a=8518;8529>=a;a++)f[a]=2;for(a=8533;8536>=a;a++)f[a]=2;for(a=8538;8540>=a;a++)f[a]=2;for(a=8677;8679>=a;a++)f[a]=0;for(a=8836;8840>=a;a++)f[a]=0;for(a=8857;8859>=a;a++)f[a]=0;for(a=8908;8910>=a;a++)f[a]=0;for(a=9154;9159>=a;a++)f[a]=0;for(a=9205;9218>=a;a++)f[a]=0;for(a=9271;9273>=a;a++)f[a]=0;for(a=9295;9297>=a;a++)f[a]=0;for(a=9356;9360>=a;a++)f[a]=0;for(a=9404;9407>=a;a++)f[a]=0;for(a=9476;9482>=a;a++)f[a]=0;for(a=9487;9494>=a;a++)f[a]=
0;for(a=9697;9699>=a;a++)f[a]=0;for(a=20002;20032>=a;a++)f[a]=0;for(a=20062;20092>=a;a++)f[a]=0;for(a=20135;20138>=a;a++)f[a]=0;for(a=20248;20258>=a;a++)f[a]=0;for(a=20348;20358>=a;a++)f[a]=0;for(a=20436;20440>=a;a++)f[a]=0;for(a=20822;20824>=a;a++)f[a]=0;for(a=20904;20932>=a;a++)f[a]=0;for(a=20934;20936>=a;a++)f[a]=0;for(a=21004;21032>=a;a++)f[a]=0;for(a=21035;21037>=a;a++)f[a]=0;for(a=21095;21097>=a;a++)f[a]=0;for(a=21148;21150>=a;a++)f[a]=0;for(a=21207;21264>=a;a++)f[a]=0;for(a=21307;21364>=a;a++)f[a]=
0;for(a=21413;21423>=a;a++)f[a]=0;for(a=21453;21463>=a;a++)f[a]=0;for(a=21473;21483>=a;a++)f[a]=0;for(a=21780;21782>=a;a++)f[a]=0;for(a=21891;21894>=a;a++)f[a]=0;for(a=21896;21899>=a;a++)f[a]=0;for(a=22171;22177>=a;a++)f[a]=0;for(a=22181;22187>=a;a++)f[a]=0;for(a=22191;22197>=a;a++)f[a]=0;for(a=22234;22236>=a;a++)f[a]=0;for(a=22521;22525>=a;a++)f[a]=0;for(a=22991;22994>=a;a++)f[a]=0;for(a=23028;23038>=a;a++)f[a]=0;for(a=23830;23853>=a;a++)f[a]=0;for(a=23866;23872>=a;a++)f[a]=0;for(a=23877;23884>=
a;a++)f[a]=0;for(a=23886;23894>=a;a++)f[a]=0;for(a=23946;23948>=a;a++)f[a]=0;for(a=24311;24313>=a;a++)f[a]=0;for(a=24342;24347>=a;a++)f[a]=0;for(a=24370;24374>=a;a++)f[a]=10;for(a=24375;24381>=a;a++)f[a]=0;for(a=24718;24721>=a;a++)f[a]=0;for(a=24817;24821>=a;a++)f[a]=0;for(a=24877;24882>=a;a++)f[a]=0;for(a=24891;24893>=a;a++)f[a]=0;for(a=25391;25395>=a;a++)f[a]=0;for(a=25828;25838>=a;a++)f[a]=0;for(a=26191;26195>=a;a++)f[a]=0;for(a=26391;26393>=a;a++)f[a]=0;for(a=26701;26722>=a;a++)f[a]=0;for(a=26729;26799>=
a;a++)f[a]=2;for(a=26801;26803>=a;a++)f[a]=2;for(a=26811;26813>=a;a++)f[a]=2;for(a=26847;26870>=a;a++)f[a]=2;for(a=26891;26899>=a;a++)f[a]=0;for(a=26901;26923>=a;a++)f[a]=0;for(a=26929;26946>=a;a++)f[a]=0;for(a=26948;26998>=a;a++)f[a]=0;for(a=27037;27040>=a;a++)f[a]=0;for(a=27205;27232>=a;a++)f[a]=0;for(a=27258;27260>=a;a++)f[a]=0;for(a=27391;27398>=a;a++)f[a]=0;for(a=27561;27564>=a;a++)f[a]=0;for(a=27571;27574>=a;a++)f[a]=0;for(a=27581;27584>=a;a++)f[a]=0;for(a=27591;27594>=a;a++)f[a]=0;for(a=28191;28193>=
a;a++)f[a]=0;for(a=28348;28358>=a;a++)f[a]=0;for(a=28402;28432>=a;a++)f[a]=0;for(a=28462;28492>=a;a++)f[a]=0;for(a=29118;29122>=a;a++)f[a]=0;for(a=29168;29172>=a;a++)f[a]=0;for(a=29177;29185>=a;a++)f[a]=0;for(a=29187;29195>=a;a++)f[a]=0;for(a=29900;29903>=a;a++)f[a]=0;for(a=30161;30179>=a;a++)f[a]=0;for(a=30491;30494>=a;a++)f[a]=0;for(a=30729;30732>=a;a++)f[a]=0;for(a=31251;31259>=a;a++)f[a]=0;for(a=31265;31268>=a;a++)f[a]=0;for(a=31275;31279>=a;a++)f[a]=0;for(a=31281;31297>=a;a++)f[a]=0;for(a=31461;31469>=
a;a++)f[a]=0;for(a=31491;31495>=a;a++)f[a]=0;for(a=31917;31922>=a;a++)f[a]=0;for(a=31965;32E3>=a;a++)f[a]=0;for(a=32001;32003>=a;a++)f[a]=2;for(a=32005;32031>=a;a++)f[a]=2;for(a=32033;32060>=a;a++)f[a]=2;for(a=32064;32067>=a;a++)f[a]=2;for(a=32074;32077>=a;a++)f[a]=2;for(a=32081;32086>=a;a++)f[a]=0;for(a=32107;32130>=a;a++)f[a]=0;for(a=32133;32158>=a;a++)f[a]=0;for(a=32164;32167>=a;a++)f[a]=2;for(a=32180;32199>=a;a++)f[a]=0;for(a=32201;32260>=a;a++)f[a]=0;for(a=32301;32360>=a;a++)f[a]=0;for(a=32601;32662>=
a;a++)f[a]=0;for(a=32664;32667>=a;a++)f[a]=2;for(a=32701;32761>=a;a++)f[a]=0;for(a=53001;53004>=a;a++)f[a]=0;for(a=53008;53019>=a;a++)f[a]=0;for(a=53021;53032>=a;a++)f[a]=0;for(a=53034;53037>=a;a++)f[a]=0;for(a=53042;53046>=a;a++)f[a]=0;for(a=53074;53080>=a;a++)f[a]=0;for(a=54001;54004>=a;a++)f[a]=0;for(a=54008;54019>=a;a++)f[a]=0;for(a=54021;54032>=a;a++)f[a]=0;for(a=54034;54037>=a;a++)f[a]=0;for(a=54042;54046>=a;a++)f[a]=0;for(a=54048;54053>=a;a++)f[a]=0;for(a=54074;54080>=a;a++)f[a]=0;for(a=54098;54101>=
a;a++)f[a]=0;for(a=102001;102040>=a;a++)f[a]=0;for(a=102042;102063>=a;a++)f[a]=0;for(a=102065;102067>=a;a++)f[a]=0;for(a=102070;102117>=a;a++)f[a]=0;for(a=102122;102216>=a;a++)f[a]=0;for(a=102221;102377>=a;a++)f[a]=0;for(a=102382;102388>=a;a++)f[a]=0;for(a=102389;102398>=a;a++)f[a]=2;for(a=102399;102444>=a;a++)f[a]=0;for(a=102445;102447>=a;a++)f[a]=2;for(a=102448;102458>=a;a++)f[a]=0;for(a=102459;102468>=a;a++)f[a]=2;for(a=102469;102499>=a;a++)f[a]=0;for(a=102500;102519>=a;a++)f[a]=1;for(a=102520;102524>=
a;a++)f[a]=0;for(a=102525;102529>=a;a++)f[a]=2;for(a=102530;102588>=a;a++)f[a]=0;for(a=102590;102598>=a;a++)f[a]=0;for(a=102601;102603>=a;a++)f[a]=0;for(a=102605;102628>=a;a++)f[a]=0;for(a=102629;102646>=a;a++)f[a]=2;for(a=102648;102700>=a;a++)f[a]=2;for(a=102701;102703>=a;a++)f[a]=0;for(a=102707;102730>=a;a++)f[a]=2;for(a=102733;102758>=a;a++)f[a]=2;for(a=102767;102900>=a;a++)f[a]=0;for(a=102901;102933>=a;a++)f[a]=2;for(a=102934;102950>=a;a++)f[a]=13;for(a=102951;102955>=a;a++)f[a]=0;for(a=102961;102963>=
a;a++)f[a]=0;for(a=102965;102969>=a;a++)f[a]=0;for(a=102971;102973>=a;a++)f[a]=0;for(a=102975;102989>=a;a++)f[a]=0;for(a=102990;102992>=a;a++)f[a]=1;for(a=102997;103002>=a;a++)f[a]=0;for(a=103003;103008>=a;a++)f[a]=2;for(a=103009;103011>=a;a++)f[a]=0;for(a=103012;103014>=a;a++)f[a]=2;for(a=103019;103021>=a;a++)f[a]=0;for(a=103022;103024>=a;a++)f[a]=2;for(a=103029;103031>=a;a++)f[a]=0;for(a=103032;103034>=a;a++)f[a]=2;for(a=103065;103068>=a;a++)f[a]=0;for(a=103074;103076>=a;a++)f[a]=0;for(a=103077;103079>=
a;a++)f[a]=1;for(a=103080;103082>=a;a++)f[a]=0;for(a=103083;103085>=a;a++)f[a]=2;for(a=103090;103093>=a;a++)f[a]=0;for(a=103097;103099>=a;a++)f[a]=0;for(a=103100;103102>=a;a++)f[a]=2;for(a=103107;103109>=a;a++)f[a]=0;for(a=103110;103112>=a;a++)f[a]=2;for(a=103113;103116>=a;a++)f[a]=0;for(a=103117;103120>=a;a++)f[a]=2;for(a=103153;103157>=a;a++)f[a]=0;for(a=103158;103162>=a;a++)f[a]=2;for(a=103163;103165>=a;a++)f[a]=0;for(a=103166;103168>=a;a++)f[a]=1;for(a=103169;103171>=a;a++)f[a]=2;for(a=103186;103188>=
a;a++)f[a]=0;for(a=103189;103191>=a;a++)f[a]=2;for(a=103192;103195>=a;a++)f[a]=0;for(a=103196;103199>=a;a++)f[a]=2;for(a=103200;103224>=a;a++)f[a]=0;for(a=103225;103227>=a;a++)f[a]=1;for(a=103232;103237>=a;a++)f[a]=0;for(a=103238;103243>=a;a++)f[a]=2;for(a=103244;103246>=a;a++)f[a]=0;for(a=103247;103249>=a;a++)f[a]=2;for(a=103254;103256>=a;a++)f[a]=0;for(a=103257;103259>=a;a++)f[a]=2;for(a=103264;103266>=a;a++)f[a]=0;for(a=103267;103269>=a;a++)f[a]=2;for(a=103300;103375>=a;a++)f[a]=0;for(a=103381;103383>=
a;a++)f[a]=0;for(a=103384;103386>=a;a++)f[a]=1;for(a=103387;103389>=a;a++)f[a]=0;for(a=103390;103392>=a;a++)f[a]=2;for(a=103397;103399>=a;a++)f[a]=0;for(a=103400;103471>=a;a++)f[a]=2;for(a=103476;103478>=a;a++)f[a]=0;for(a=103479;103481>=a;a++)f[a]=2;for(a=103486;103488>=a;a++)f[a]=0;for(a=103489;103491>=a;a++)f[a]=2;for(a=103492;103495>=a;a++)f[a]=0;for(a=103496;103499>=a;a++)f[a]=2;for(a=103528;103543>=a;a++)f[a]=0;for(a=103544;103548>=a;a++)f[a]=2;for(a=103549;103551>=a;a++)f[a]=0;for(a=103552;103554>=
a;a++)f[a]=1;for(a=103555;103557>=a;a++)f[a]=2;for(a=103558;103560>=a;a++)f[a]=0;for(a=103571;103573>=a;a++)f[a]=0;for(a=103574;103576>=a;a++)f[a]=2;for(a=103577;103580>=a;a++)f[a]=0;for(a=103581;103583>=a;a++)f[a]=2;for(a=103595;103694>=a;a++)f[a]=0;for(a=103696;103699>=a;a++)f[a]=0;for(a=103700;103793>=a;a++)f[a]=2;for(a=103794;103887>=a;a++)f[a]=0;for(a=103900;103971>=a;a++)f[a]=2;return k.WKIDUnitConversion=f})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),
function(D,k,a,f,g,p){function n(d){if(d){if("function"!==typeof d.forEach){var e=Object.keys(d),l=e.map(function(q){return d[q]});return n(l).then(function(q){var v={};e.forEach(function(x,y){return v[x]=q[y]});return v})}var h=new a,t=[],r=d.length;0===r&&h.resolve(t);d.forEach(function(q){var v={promise:q};t.push(v);q.then(function(x){v.value=x})["catch"](function(x){v.error=x}).then(function(){--r;0===r&&h.resolve(t)})});return h.promise}}Object.defineProperty(k,"__esModule",{value:!0});k.all=
function(d){return g(d)};k.filter=function(d,e){var l=d.slice();return g(d.map(function(h,t){return e(h,t)})).then(function(h){return l.filter(function(t,r){return h[r]})})};k.eachAlways=n;k.create=function(d,e){var l=new a(e);d(function(h){void 0===h&&(h=null);return f(h).then(l.resolve)},l.reject);return l.promise};k.reject=function(d){var e=new a;e.reject(d);return e.promise};k.resolve=function(d){void 0===d&&(d=null);var e=new a;e.resolve(d);return e.promise};k.after=function(d,e){void 0===e&&
(e=null);var l=0,h=new a(function(){l&&(clearTimeout(l),l=0)});l=setTimeout(function(){h.resolve(e)},d);return h.promise};k.timeout=function(d,e,l){var h=0,t=new a(d.cancel);d.then(function(r){t.isFulfilled()||(t.resolve(r),h&&(clearTimeout(h),h=0))});d["catch"](function(r){t.isFulfilled()||(t.reject(r),h&&(clearTimeout(h),h=0))});h=setTimeout(function(){var r=l||new p("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");t.reject(r)},e);return t.promise};k.wrapCallback=function(d){var e=
!1,l=new a(function(){return e=!0});d(function(h){e||l.resolve(h)});return l.promise};k.isThenable=function(d){return d&&"function"===typeof d.then};k.when=function(d){return f(d)}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(D,k,a,f){var g=D.some;return function(p){var n,d;k.isArray(p)?d=p:p&&"object"===typeof p&&(n=p);var e=[];if(n){d=[];for(var l in n)Object.hasOwnProperty.call(n,l)&&(e.push(l),d.push(n[l]));var h={}}else d&&(h=[]);
if(!d||!d.length)return(new a).resolve(h);var t=new a;t.promise.always(function(){h=e=null});var r=d.length;g(d,function(q,v){n||e.push(v);f(q,function(x){t.isFulfilled()||(h[e[v]]=x,0===--r&&t.resolve(h))},t.reject);return t.isFulfilled()});return t.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(D,k,a,f,g){D=function(p){function n(d,e,l){var h=p.call(this,d,e,l)||this;return h instanceof n?h:new n(d,
e,l)}a(n,p);n.prototype.toJSON=function(){return{name:this.name,message:this.message,details:f.clone(this.details),dojoType:this.dojoType}};n.fromJSON=function(d){var e=new n(d.name,d.message,d.details);null!=d.dojoType&&(e.dojoType=d.dojoType);return e};return n}(g);D.prototype.type="error";return D})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,a){k.__proto__=a}||
function(k,a){for(var f in a)a.hasOwnProperty(f)&&(k[f]=a[f])};return function(k,a){function f(){this.constructor=k}D(k,a);k.prototype=null===a?Object.create(a):(f.prototype=a.prototype,new f)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(D,k,a,f,g,p){function n(q){return void 0!==q&&null!==q}function d(q){return n(q)?q:""}function e(q,v,x){var y=x.match(/([^\(]+)(\([^\)]+\))?/i),
B=k.trim(y[1]);x=v[q];y=JSON.parse((y[2]?k.trim(y[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var z=y.utcOffset;if(-1===t.indexOf(B))B=k.getObject(B),k.isFunction(B)&&(x=B(x,q,v,y));else if("number"===typeof x||"string"===typeof x&&x&&!isNaN(Number(x)))switch(x=Number(x),B){case "NumberFormat":q=k.mixin({},y);v=parseFloat(q.places);if(isNaN(v)||0>v)q.places=Infinity;return f.format(x,
q);case "DateString":x=new Date(x);if(y.local||y.systemLocale)return y.systemLocale?x.toLocaleDateString()+(y.hideTime?"":" "+x.toLocaleTimeString()):x.toDateString()+(y.hideTime?"":" "+x.toTimeString());x=x.toUTCString();y.hideTime&&(x=x.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return x;case "DateFormat":return x=new Date(x),n(z)&&(x=a.add(x,"minute",x.getTimezoneOffset()-z)),g.format(x,y)}return d(x)}function l(q,v){var x;if(v)for(x in q)q.hasOwnProperty(x)&&(void 0===q[x]?delete q[x]:q[x]instanceof
Object&&l(q[x],!0));else for(x in q)q.hasOwnProperty(x)&&void 0===q[x]&&delete q[x];return q}function h(q){if(!q||"object"!=typeof q||k.isFunction(q))return q;if(q instanceof Int8Array||q instanceof Uint8Array||q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Int32Array||q instanceof Uint16Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array||q instanceof Date)return new q.constructor(q);if(q instanceof ArrayBuffer)return q.slice(0,q.byteLength);
if("function"===typeof q.clone)q=q.clone();else if("function"===typeof q.map&&"function"===typeof q.forEach)q=q.map(h);else if("function"===typeof q.notifyChange&&"function"===typeof q.watch)q=q.clone();else{var v={},x,y={};for(x in q){var B=q[x];var z=!(x in y)||y[x]!==B;if(!(x in v)||v[x]!==B&&z)v[x]=h?h(B):B}q=v}return q}var t=["NumberFormat","DateString","DateFormat"],r=/<\/?[^>]+>/g;return{equals:function(q,v){return q===v||"number"===typeof q&&isNaN(q)&&"number"===typeof v&&isNaN(v)||k.isFunction((q||
{}).getTime)&&k.isFunction((v||{}).getTime)&&q.getTime()==v.getTime()||k.isFunction((q||{}).equals)&&q.equals(v)||k.isFunction((v||{}).equals)&&v.equals(q)||!1},mixin:k.mixin,valueOf:function(q,v){for(var x in q)if(q[x]==v)return x;return null},stripTags:function(q){if(q){var v=typeof q;if("string"===v)q=q.replace(r,"");else if("object"===v)for(var x in q)(v=q[x])&&"string"===typeof v&&(v=v.replace(r,"")),q[x]=v}return q},substitute:function(q,v,x){if(n(x))if(k.isObject(x)){var y=x.first;var B=x.dateFormat;
var z=x.numberFormat}else y=x;if(v&&"{*}"!==v)return k.replace(v,k.hitch({obj:q},function(c,m){var u=m.split(":");return 1<u.length?(m=u[0],u.shift(),e(m,this.obj,u.join(":"))):B&&-1!==(B.properties||[]).indexOf(m)?e(m,this.obj,B.formatter||"DateString"):z&&-1!==(z.properties||[]).indexOf(m)?e(m,this.obj,z.formatter||"NumberFormat"):d(this.obj[m])}));v=[];var b;v.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+p.fieldsSummary+'"\x3e\x3ctbody\x3e');for(b in q)if(x=q[b],B&&-1!==(B.properties||
[]).indexOf(b)?x=e(b,q,B.formatter||"DateString"):z&&-1!==(z.properties||[]).indexOf(b)&&(x=e(b,q,z.formatter||"NumberFormat")),v.push("\x3ctr\x3e\x3cth\x3e"+b+"\x3c/th\x3e\x3ctd\x3e"+d(x)+"\x3c/td\x3e\x3c/tr\x3e"),y)break;v.push("\x3c/tbody\x3e\x3c/table\x3e");return v.join("")},filter:function(q,v,x){v=[k.isString(q)?q.split(""):q,x||D.global,k.isString(v)?new Function("item","index","array",v):v];x={};var y;q=v[0];for(y in q)v[2].call(v[y],q[y],y,q)&&(x[y]=q[y]);return x},startsWith:function(q,
v,x){x=x||0;return q.indexOf(v,x)===x},endsWith:function(q,v,x){if("number"!==typeof x||!isFinite(x)||Math.floor(x)!==x||x>q.length)x=q.length;x-=v.length;q=q.indexOf(v,x);return-1!==q&&q===x},isDefined:n,fixJson:l,clone:h}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(D,k,a){return function(){function f(g,p,n){this instanceof f&&(this.name=g,this.message=p&&a.substitute(p,n,function(d){return null==d?"":d})||"",this.details=n)}f.prototype.toString=
function(){return"["+this.name+"]: "+this.message};return f}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b,c){function m(w){return{state:w.state,pixelRatio:w.pixelRatio,stationary:w.stationary}}var u={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(w){function A(){var C=null!==w&&w.apply(this,arguments)||this;C._clipData=new Float32Array(8);C._upperLeft=q.create();C._upperRight=q.create();C._lowerLeft=q.create();C._lowerRight=q.create();C._mat2=r.create();C._clipRendererInitialized=!1;C._contextVersion=null;C._labelFader=new n["default"](C);
return C}a(A,w);Object.defineProperty(A.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});A.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};A.prototype.createElement=function(){var C=document.createElement("canvas");C.setAttribute("class","esri-display-object");return C};A.prototype.setElement=function(C){this.element=C};A.prototype.useContextVersion=function(C){this._renderingContext||(this._contextVersion=C)};A.prototype.attach=
function(C){if(this.attached)return!0;this._resizeCanvas(C);var E=y.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new b(E);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=m(C);this._painter||(this._painter=new l["default"],this._painter.initialize(this._renderingContext));return w.prototype.attach.call(this,C)};A.prototype.detach=function(C){w.prototype.detach.call(this,
C);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};A.prototype.renderChildren=function(C){var E=this.children;C.drawPhase=e.WGLDrawPhase.FILL|e.WGLDrawPhase.LINE|e.WGLDrawPhase.MARKER|e.WGLDrawPhase.TEXT;for(var G=E.length,F=0;F<G;F++){var I=E[F];I.attached&&this.renderChild(I,C)}if(f("esri-featurelayer-webgl-labeling")){var M=C.context,Y=M.getBoundFramebufferObject();M.bindFramebuffer(this._labelsFBO2);F=C.stationary;M.setClearColor(0,
0,0,F?0:1);M.clear(M.gl.COLOR_BUFFER_BIT);if(F)for(C.drawPhase=e.WGLDrawPhase.LABEL_ALPHA,C.labelFBO=this._labelsFBO1,C.labelStep=this._labelFader.step(),F=0;F<G;F++)I=E[F],I.attached&&this.renderChild(I,C);else this._labelFader.reset();M.bindFramebuffer(Y);C.labelFBO=this._labelsFBO2;C.drawPhase=e.WGLDrawPhase.LABEL;for(F=0;F<G;F++)I=E[F],I.attached&&this.renderChild(I,C);C=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=C}};A.prototype.beforeRenderChildren=function(C,E){var G=
E.context,F=E.state,I=E.pixelRatio,M=this._painter;if(M){G.enforceState();M.update(F,I);var Y=F.width;M=F.height;var R=F.rotation;Y=Math.round(Y*I);M=Math.round(M*I);this._boundFBO=G.getBoundFramebufferObject();!f("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===Y&&this._labelsFBO1.height===M||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=B.createWithAttachments(G,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:Y,height:M},{colorTarget:0,depthStencilTarget:0}),G.bindFramebuffer(this._labelsFBO1),G.setDepthWriteEnabled(!0),G.setStencilWriteMask(255),G.setClearColor(0,0,0,0),G.setClearDepth(1),G.setClearStencil(0),G.clear(G.gl.COLOR_BUFFER_BIT|G.gl.DEPTH_BUFFER_BIT|G.gl.STENCIL_BUFFER_BIT),G.setDepthWriteEnabled(!1),G.bindFramebuffer(this._boundFBO),this._labelsFBO2=B.createWithAttachments(G,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:Y,height:M},{colorTarget:0,depthStencilTarget:0}));if(F.spatialReference&&(F.spatialReference._isWrappable?F.spatialReference._isWrappable():F.spatialReference.isWrappable)){var S=t.toRadian(R),O=Math.abs(Math.cos(S)),L=Math.abs(Math.sin(S)),P=Math.round(F.worldScreenWidth);if(Math.round(Y*O+M*L)<=P)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===Y&&this._clipFBO.height===M||(this._clipFBO=new B(G,{colorTarget:0,depthStencilTarget:3,width:Y,height:M}));var X=.5*Y,
Q=.5*M;F=1/Y;var K=1/M;I*=.5*P;var U=.5*(Y*L+M*O);Y=this._upperLeft;O=this._upperRight;L=this._lowerLeft;P=this._lowerRight;q.set(Y,-I,-U);q.set(O,I,-U);q.set(L,-I,U);q.set(P,I,U);r.identity(this._mat2);r.translate(this._mat2,this._mat2,[X,Q]);0!==R&&r.rotate(this._mat2,this._mat2,S);q.transformMat2d(Y,Y,this._mat2);q.transformMat2d(O,O,this._mat2);q.transformMat2d(L,L,this._mat2);q.transformMat2d(P,P,this._mat2);R=this._clipData;R.set([2*L[0]*F-1,2*(M-L[1])*K-1,2*P[0]*F-1,2*(M-P[1])*K-1,2*Y[0]*F-
1,2*(M-Y[1])*K-1,2*O[0]*F-1,2*(M-O[1])*K-1]);this._clipRendererInitialized||this._initializeClipRenderer(G);this._clipVBO.setData(R);this._boundFBO=G.getBoundFramebufferObject();G.bindFramebuffer(this._clipFBO);G.setDepthWriteEnabled(!0);G.setStencilWriteMask(255);G.setClearColor(0,0,0,0);G.setClearDepth(1);G.setClearStencil(0);G.clear(G.gl.COLOR_BUFFER_BIT|G.gl.DEPTH_BUFFER_BIT|G.gl.STENCIL_BUFFER_BIT);G.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};A.prototype.afterRenderChildren=
function(C,E){if(this._clipFrame&&this._clipRendererInitialized){var G=this._renderingContext;G.bindFramebuffer(this._boundFBO);this._boundFBO=null;G.bindVAO(this._clipVAO);G.bindProgram(this._clipStencilProgram);G.setDepthWriteEnabled(!1);G.setDepthTestEnabled(!1);G.setStencilTestEnabled(!0);G.setBlendingEnabled(!1);G.setColorMask(!1,!1,!1,!1);G.setStencilOp(7680,7680,7681);G.setStencilWriteMask(255);G.setStencilFunction(519,1,255);G.drawElements(4,6,5123,0);G.bindVAO();G.setColorMask(!0,!0,!0,!0);
G.setBlendingEnabled(!0);G.setStencilFunction(514,1,255);this._blitRenderer.render(G,this._clipFBO.colorTexture,9728,1);G.setStencilTestEnabled(!1)}};A.prototype.doRender=function(C){var E=this.element.style;this.visible?(E.display="block",E.opacity=""+this.opacity,this._resizeCanvas(C),w.prototype.doRender.call(this,C),this._cachedRenderParams=m(C)):E.display="none"};A.prototype.takeScreenshot=function(C){void 0===C&&(C={});var E=C.pixelRatio||1;this._cachedRenderParams.pixelRatio=E;var G=Math.round(E*
this._cachedRenderParams.state.width),F=Math.round(E*this._cachedRenderParams.state.height),I=0,M=0,Y=G,R=F,S=G,O=F;if(S=C.area)I=Math.round(E*S.x),M=Math.round(E*S.y),Y=Math.round(E*S.width),R=Math.round(E*S.height);void 0!==C.width&&void 0!==C.height?(S=C.width/C.height,R*S<Y?(S*=R,I+=Math.floor((Y-S)/2),Y=Math.floor(S)):(S=Y/S,M+=Math.floor((R-S)/2),R=Math.floor(S)),S=C.width,O=C.height):(S=Y,O=R);E=document.createElement("canvas");E.width=S;E.height=O;var L=E.getContext("2d"),P=new Uint8Array(Y*
R*4),X=this._renderingContext,Q=B.create(X,{colorTarget:1,depthStencilTarget:3,width:G,height:F});X.bindFramebuffer(Q);X.setViewport(0,0,G,F);var K=this._cachedRenderParams,U=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(U.COLOR_BUFFER_BIT|U.DEPTH_BUFFER_BIT|U.STENCIL_BUFFER_BIT);K.context=this._renderingContext;K.painter=this._painter;this.beforeRenderChildren(K,
K);if(void 0!==C.rotation&&null!==C.rotation){U=K.state;var da=U.clone();da.viewpoint.rotation=C.rotation;K.state=da;this.renderChildren(K);K.state=U}else this.renderChildren(K);this.afterRenderChildren(K,K);Q.readPixels(I,F-(M+R),Y,R,6408,5121,P);X.bindFramebuffer();X=L.getImageData(0,0,S,O);if(0!==I||0!==M||Y!==G||R!==F||S!==G||O!==F)v.resampleHermite(P,Y,R,X.data,S,O,!0);else{M=R-1;R=0;Q=4*Y;for(da=U=I=F=G=Y=K=void 0;R<M;){U=R*Q;da=M*Q;for(K=0;K<Q;K+=4)Y=P[U+K],G=P[U+K+1],F=P[U+K+2],I=P[U+K+3],
P[U+K]=P[da+K],P[U+K+1]=P[da+K+1],P[U+K+2]=P[da+K+2],P[U+K+3]=P[da+K+3],P[da+K]=Y,P[da+K+1]=G,P[da+K+2]=F,P[da+K+3]=I;R++;M--}Y=X.data;G=P.length;for(M=0;M<G;M++)Y[M]=P[M]}P=X.data;R=P.length;for(M=0;M<R;M+=4)I=P[M+3],0<I&&(F=I/255,Y=Math.floor(P[M+0]/F),G=Math.floor(P[M+1]/F),F=Math.floor(P[M+2]/F),P[M+0]=255>=Y?Y:255,P[M+1]=255>=G?G:255,P[M+2]=255>=F?F:255);L.putImageData(X,0,0);L=u[C.format?C.format.toLowerCase():"png"];P=1;void 0!==C.quality&&(P=C.quality/100);C=E.toDataURL(L,P);return g.resolve({dataURL:C,
x:0,y:0,width:S,height:O})};A.prototype.prepareChildrenRenderParameters=function(C){if(!this.attached||!this._renderingContext)return null;C=m(C);var E=this._renderingContext,G=E.gl;E.setDepthWriteEnabled(!0);E.setStencilWriteMask(255);E.setClearColor(0,0,0,0);E.setClearDepth(1);E.setClearStencil(0);E.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT|G.STENCIL_BUFFER_BIT);E.setViewport(0,0,this.element.width,this.element.height);E.setDepthWriteEnabled(!1);C.context=E;C.painter=this._painter;return C};A.prototype.attachChild=
function(C,E){return C.attach(E)};A.prototype.detachChild=function(C,E){return C.detach(E)};A.prototype.renderChild=function(C,E){return C.processRender(E)};A.prototype._resizeCanvas=function(C){var E=this.element,G=E.style,F=C.state,I=C.pixelRatio;C=Math.round(F.width*I);I=Math.round(F.height*I);if(E.width!==C||E.height!==I)E.width=C,E.height=I;G.width=F.width+"px";G.height=F.height+"px"};A.prototype._initializeClipRenderer=function(C){if(this._clipRendererInitialized)return!0;this._blitRenderer=
new d;var E={a_pos:0},G=new z(C,h.stencilVS,h.stencilFS,E);if(!G)return!1;var F=x.createVertex(C,35040,32),I=new Uint16Array([0,1,2,2,1,3]);I=x.createIndex(C,35044,I);C=new c(C,E,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:F},I);this._clipStencilProgram=G;this._clipVBO=F;this._clipVAO=C;return this._clipRendererInitialized=!0};return A}(p)})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./DisplayObject"],function(D,k,a,f){var g;(function(p){p[p.BEFORE=0]="BEFORE";p[p.ATTACHING=1]="ATTACHING";p[p.DETACHING=2]="DETACHING";p[p.RENDERING=3]="RENDERING";p[p.AFTER=4]="AFTER";p[p.DONE=5]="DONE"})(g||(g={}));return function(p){function n(){var d=null!==p&&p.apply(this,arguments)||this;d._childrenSet=new Set;d._childrenToAttach=[];d._childrenToDetach=[];d._renderPhase=g.DONE;d.children=[];return d}a(n,p);Object.defineProperty(n.prototype,"numChildren",{get:function(){return this.children.length},
enumerable:!0,configurable:!0});n.prototype.detach=function(d){var e=this.children.concat(this._childrenToDetach);d=this.prepareChildrenRenderParameters(d);for(var l=0;l<e.length;l++){var h=e[l];h.attached&&(this.detachChild(h,d),h.attached=!1,h.parent=null)}};n.prototype.doRender=function(d){var e=this.prepareChildrenRenderParameters(d);this._renderPhase=g.BEFORE;this.beforeRenderChildren(d,e);this._renderPhase=g.ATTACHING;this.attachChildren(e);this._renderPhase=g.DETACHING;for(var l=this._childrenToDetach;0<
l.length;){var h=l.shift();this.detachChild(h,e);h.attached=!1;h.parent=null}this._renderPhase=g.RENDERING;this.renderChildren(e);this._renderPhase=g.AFTER;this.afterRenderChildren(d,e);this._renderPhase=g.DONE};n.prototype.addChild=function(d){return this.addChildAt(d,this.children.length)};n.prototype.addChildAt=function(d,e){void 0===e&&(e=this.numChildren);if(!d||this.contains(d))return d;var l=d.parent;l&&l!==this&&l.removeChild(d);e>=this.numChildren?this.children.push(d):this.children.splice(e,
0,d);this._childrenSet.add(d);l=this._childrenToDetach.indexOf(d);-1<l&&this._childrenToDetach.splice(l,1);this._childrenToAttach.push(d);this._renderPhase>=g.RENDERING&&this.requestRender();return d};n.prototype.contains=function(d){return this._childrenSet.has(d)};n.prototype.getChildIndex=function(d){return this.children.indexOf(d)};n.prototype.getChildAt=function(d){return 0>d||d>this.children.length?null:this.children[d]};n.prototype.removeAllChildren=function(){for(var d=this.numChildren;d--;)this.removeChildAt(0)};
n.prototype.removeChild=function(d){return this.contains(d)?this.removeChildAt(this.getChildIndex(d)):d};n.prototype.removeChildAt=function(d){if(0>d||d>=this.children.length)return null;d=this.children.splice(d,1)[0];this._childrenSet["delete"](d);if(d.attached)this._childrenToDetach.push(d),this._renderPhase>=g.RENDERING&&this.requestRender();else{var e=this._childrenToAttach.indexOf(d);-1<e&&this._childrenToAttach.splice(e,1)}return d};n.prototype.requestChildRender=function(d){d&&d.parent===this&&
this._renderPhase>=g.RENDERING&&this.requestRender()};n.prototype.setChildIndex=function(d,e){var l=this.getChildIndex(d);-1<l&&(this.children.splice(l,1),this.children.splice(e,0,d),this._renderPhase>=g.RENDERING&&this.requestRender())};n.prototype.sortChildren=function(d){this._renderPhase>g.RENDERING&&this.requestRender();return this.children.sort(d)};n.prototype.attachChildren=function(d){var e=this._childrenToAttach;if(0!==e.length)for(var l=0,h=!1;!h;)h=e[l],this.attachChild(h,d)?(h.attached=
!0,h.parent=this,e.splice(l,1)):++l,h=e.length===l};n.prototype.renderChildren=function(d){for(var e=this.children,l=e.length,h=0;h<l;h++){var t=e[h];t.attached&&this.renderChild(t,d)}};n.prototype.beforeRenderChildren=function(d,e){};n.prototype.attachChild=function(d,e){return d.attach(e)};n.prototype.detachChild=function(d,e){d.detach(e)};n.prototype.renderChild=function(d,e){d.processRender(e)};n.prototype.afterRenderChildren=function(d,e){};return n}(f)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./Evented"],function(D,k,a,f){return function(g){function p(){var n=null!==g&&g.apply(this,arguments)||this;n._renderRequestedCalled=!1;n._attached=!1;n._opacity=1;n.renderRequested=!1;n._visible=!0;return n}a(p,g);Object.defineProperty(p.prototype,"attached",{get:function(){return this._attached},set:function(n){this._attached!==n&&((this._attached=n)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"opacity",{get:function(){return this._opacity},set:function(n){this._opacity!==n&&(this._opacity=n,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"visible",{get:function(){return this._visible},set:function(n){this._visible!==n&&(this._visible=n,this.requestRender())},enumerable:!0,configurable:!0});p.prototype.attach=function(n){return!0};p.prototype.detach=function(n){};p.prototype.processRender=
function(n){this._renderRequestedCalled=!1;this.doRender(n);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};p.prototype.requestRender=function(){var n=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);n!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};p.prototype.dispose=function(){};return p}(f.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(D,k,a,f,g){Object.defineProperty(k,"__esModule",{value:!0});D=function(){function p(){}p.prototype.on=function(n,d){return f.after(this,"on"+n,d,!0)};p.prototype.once=function(n,d){return g.once(this,n,d)};p.prototype.emit=function(n){g.emit(this,n,this)};p.prototype.hasEventListener=function(n){n="on"+n;return!(!this[n]||!this[n].after)};return p}();k.Evented=D;k.EventedMixin=function(p){return function(n){function d(){return null!==
n&&n.apply(this,arguments)||this}a(d,n);d.prototype.on=function(e,l){return f.after(this,"on"+e,l,!0)};d.prototype.once=function(e,l){return g.once(this,e,l)};d.prototype.emit=function(e,l){g.emit(this,e,l)};d.prototype.hasEventListener=function(e){e="on"+e;return!(!this[e]||!this[e].after)};return d}(p)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=function(){function f(g,p){void 0===
p&&(p=250);this.duration=p;this._startTime=this._lastTime=0;this._parent=g}f.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};f.prototype.step=function(){var g=performance.now();if(0===this._lastTime)return this._lastTime=g,this._parent.requestRender(),0;var p=g-this._lastTime;this._lastTime=g;g-this._startTime<2*this.duration&&this._parent.requestRender();return p/this.duration};return f}();k["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),
function(D,k,a,f,g,p){return function(){function n(){this._initialized=!1}n.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};n.prototype.render=function(d,e,l,h){d&&(this._initialized||this._initialize(d),d.setBlendFunctionSeparate(1,771,1,771),d.bindVAO(this._vertexArrayObject),d.bindProgram(this._program),e.setSamplingMode(l),d.bindTexture(e,0),this._program.setUniform1i("u_tex",
0),this._program.setUniform1f("u_opacity",h),d.drawArrays(5,0,4),d.bindVAO())};n.prototype._initialize=function(d){if(this._initialized)return!0;var e={a_pos:0,a_tex:1},l=new g(d,a.bitblitVS,a.bitblitFS,e);if(!l)return!1;var h=new Int8Array(16);h[0]=-1;h[1]=-1;h[2]=0;h[3]=0;h[4]=1;h[5]=-1;h[6]=1;h[7]=0;h[8]=-1;h[9]=1;h[10]=0;h[11]=1;h[12]=1;h[13]=1;h[14]=1;h[15]=1;d=new p(d,e,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,
stride:4,normalized:!1,divisor:0}]},{geometry:f.createVertex(d,35044,h)});this._program=l;this._vertexArrayObject=d;return this._initialized=!0};return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(D,k,a,f,g,p,n){D=new n;n.parse(a,D);n.parse(f,D);n.parse(g,
D);n.parse(p,D);return D})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(D,k,a){return function(){function f(g){if(g)for(var p in g)this[p]=g[p]}f.parse=function(g,p){for(var n=a.parse(g).getElementsByTagName("snippet"),d=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,e=/[\$\s]+/g,l=/\(([^\(\)]*)\)/,h=0;h<n.length;h++){for(var t=n[h].getAttribute("name"),r=n[h].textContent;;){var q=r.match(d);if(null==q)break;var v=q[0].replace(e,
""),x=v.match(l),y=void 0;x&&(y=x[1].split(",").map(function(B){return B.trim()}));v=v.replace(l,"");y=p._instantiate(v,y);r=r.replace(q[0],y)}p[t]=r}};f.prototype._instantiate=function(g,p){var n=this[g];for(p||(p=[]);;){var d=n.match(/\$(\d+)/);if(null==d)break;var e=parseInt(d[1],10);n=n.replace(d[0],p[e])}return n};return f}()})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(D,k,a){return function(){function f(g,p,n,d,e){this._glName=
this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=g;this._bufferType=p;this._usage=n;this._id=f._nextId++;this._glName=this._context.gl.createBuffer();a("esri-webgl-debug")&&g.instanceCounter.incrementCount(1);d&&this.setData(d,e)}f.createIndex=function(g,p,n,d){return new f(g,34963,p,n,d)};f.createVertex=function(g,p,n){return new f(g,34962,p,n)};Object.defineProperty(f.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(f.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"indexType",{get:function(){return this._indexType},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});f.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};f.prototype.setData=function(g,p){if(g){if("number"===typeof g){if(34963===
this._bufferType&&p)switch(this._indexType=p,this._size=g,p){case 5123:g*=2;break;case 5125:g*=4}}else{var n=g.byteLength;g instanceof Uint16Array&&(n/=2,this._indexType=5123);g instanceof Uint32Array&&(n/=4,this._indexType=5125);this._size=n;ArrayBuffer.isView(g)&&(g=g.buffer)}n=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,g,this._usage);this._context.bindVAO(n)}};f.prototype.setSubData=function(g,p,n,d){void 0===
p&&(p=0);void 0===n&&(n=0);if(g){var e=d,l=g.byteLength;g instanceof Uint16Array&&(l/=2,p*=2,n*=2,e*=2);g instanceof Uint32Array&&(l/=4,p*=4,n*=4,e*=4);void 0===d&&(d=l-1);d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);l=this._context.gl;g=ArrayBuffer.isView(g)?g.buffer:g;l.bufferSubData(this._bufferType,p,g.slice(n,e));this._context.bindVAO(d)}};f._nextId=0;return f}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports",
"dojo/has","./ShaderTranspiler"],function(D,k,a,f){return function(){function g(p,n,d,e,l){void 0===l&&(l={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=p;this._vertexShaderSource=
n;this._fragmentShaderSource=d;if(Array.isArray(l))for(n=0;n<l.length;n++)this._defines[l[n]]="1";else this._defines=l;this._id=g._nextId++;this._locations=e;a("esri-webgl-debug")&&p.instanceCounter.incrementCount(3)}Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},
enumerable:!0,configurable:!0});g.prototype.getDefine=function(p){return this._defines[p]};g.prototype.dispose=function(){if(this._context){var p=this._context.gl;this._vShader&&(p.deleteShader(this._vShader),this._vShader=null);this._fShader&&(p.deleteShader(this._fShader),this._fShader=null);this._glName&&(p.deleteProgram(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);this._context=null}};g.prototype.initialize=function(){if(!this._initialized){this._vShader=
this._loadShader(35633);this._fShader=this._loadShader(35632);var p=this._context.gl,n=p.createProgram();p.attachShader(n,this._vShader);p.attachShader(n,this._fShader);for(var d in this._locations)p.bindAttribLocation(n,this._locations[d],d);p.linkProgram(n);p.getProgramParameter(n,p.LINK_STATUS);this._glName=n;this._initialized=!0}};g.prototype.getUniformLocation=function(p){this.initialize();void 0===this._nameToUniformLocation[p]&&(this._nameToUniformLocation[p]=this._context.gl.getUniformLocation(this._glName,
p));return this._nameToUniformLocation[p]};g.prototype.hasUniform=function(p){return null!==this.getUniformLocation(p)};g.prototype.getAttribLocation=function(p){this.initialize();void 0===this._nameToAttribLocation[p]&&(this._nameToAttribLocation[p]=this._context.gl.getAttribLocation(this._glName,p));return this._nameToAttribLocation[p]};g.prototype.setUniform1i=function(p,n){var d=this._nameToUniform1[p];if(void 0===d||n!==d)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(p),
n),this._nameToUniform1[p]=n};g.prototype.setUniform1f=function(p,n){var d=this._nameToUniform1[p];if(void 0===d||n!==d)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(p),n),this._nameToUniform1[p]=n};g.prototype.setUniform1fv=function(p,n){var d=this._nameToUniform2[p];void 0!==d&&g._arraysEqual(n,d)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(p),n),void 0===d?this._nameToUniform2[p]=new Float32Array(n):d.set(n))};g.prototype.setUniform2f=
function(p,n,d){var e=this._nameToUniform2[p];if(void 0===e||n!==e[0]||d!==e[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(p),n,d),void 0===e?this._nameToUniform2[p]=new Float32Array([n,d]):(e[0]=n,e[1]=d)};g.prototype.setUniform2fv=function(p,n){var d=this._nameToUniform2[p];void 0!==d&&g._arraysEqual(n,d)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(p),n),void 0===d?this._nameToUniform2[p]=new Float32Array(n):d.set(n))};
g.prototype.setUniform3f=function(p,n,d,e){var l=this._nameToUniform3[p];if(void 0===l||n!==l[0]||d!==l[1]||e!==l[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(p),n,d,e),void 0===l?this._nameToUniform3[p]=new Float32Array([n,d,e]):(l[0]=n,l[1]=d,l[2]=e)};g.prototype.setUniform3fv=function(p,n){var d=this._nameToUniform3[p];void 0!==d&&g._arraysEqual(n,d)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(p),n),void 0===d?this._nameToUniform3[p]=
new Float32Array(n):d.set(n))};g.prototype.setUniform4f=function(p,n,d,e,l){var h=this._nameToUniform4[p];if(void 0===h||n!==h[0]||d!==h[1]||e!==h[2]||l!==h[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(p),n,d,e,l),void 0===h?this._nameToUniform4[p]=new Float32Array([n,d,e,l]):(h[0]=n,h[1]=d,h[2]=e,h[3]=l)};g.prototype.setUniform4fv=function(p,n){var d=this._nameToUniform4[p];void 0!==d&&g._arraysEqual(n,d)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(p),
n),void 0===d?this._nameToUniform4[p]=new Float32Array(n):d.set(n))};g.prototype.setUniformMatrix3fv=function(p,n,d){void 0===d&&(d=!1);var e=this._nameToUniformMatrix3[p];void 0!==e&&(9===e.length?g._matrix3Equal(e,n):g._arraysEqual(n,e))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(p),d,n),void 0===e?this._nameToUniformMatrix3[p]=new Float32Array(n):e.set(n))};g.prototype.setUniformMatrix4fv=function(p,n,d){void 0===d&&(d=!1);var e=this._nameToUniformMatrix4[p];
void 0!==e&&(16===e.length?g._matrix4Equal(e,n):g._arraysEqual(n,e))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(p),d,n),void 0===e?this._nameToUniformMatrix4[p]=new Float32Array(n):e.set(n))};g._padToThree=function(p){var n=p.toString();1E3>p&&(n=("  "+p).slice(-3));return n};g.prototype._addLineNumbers=function(p){var n=2;return p.replace(/\n/g,function(){return"\n"+g._padToThree(n++)+":"})};g.prototype._loadShader=function(p){var n=35633===p,d=n?
this._vertexShaderSource:this._fragmentShaderSource,e="",l;for(l in this._defines)e+="#define "+l+" "+this._defines[l]+"\n";d=e+d;"webgl2"===this._context.contextVersion&&(d=f.transpileShader(d,n?"vertex":"fragment"));n=this._context.gl;p=n.createShader(p);n.shaderSource(p,d);n.compileShader(p);n.getShaderParameter(p,n.COMPILE_STATUS);return p};g._matrix4Equal=function(p,n){return p[0]===n[0]&&p[1]===n[1]&&p[2]===n[2]&&p[3]===n[3]&&p[4]===n[4]&&p[5]===n[5]&&p[6]===n[6]&&p[7]===n[7]&&p[8]===n[8]&&
p[9]===n[9]&&p[10]===n[10]&&p[11]===n[11]&&p[12]===n[12]&&p[13]===n[13]&&p[14]===n[14]&&p[15]===n[15]};g._matrix3Equal=function(p,n){return p[0]===n[0]&&p[1]===n[1]&&p[2]===n[2]&&p[3]===n[3]&&p[4]===n[4]&&p[5]===n[5]&&p[6]===n[6]&&p[7]===n[7]&&p[8]===n[8]};g._arraysEqual=function(p,n){if(p.length!==n.length)return!1;for(var d=0;d<p.length;++d)if(p[d]!==n[d])return!1;return!0};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3",
"./lib/glsl-tokenizer/string"],function(D,k,a,f){function g(e){return e.map(function(l){return"eof"!==l.type?l.data:""}).join("")}function p(e,l,h,t){t=t||h;for(var r=0;r<e.length;r++){var q=e[r];if("ident"===q.type&&q.data===h)return t in l?l[t]++:l[t]=0,p(e,l,t+"_"+l[t],t)}return h}function n(e,l,h){void 0===h&&(h="afterVersion");var t={data:"\n",type:"whitespace"},r=function(y){return y<e.length?/[^\r\n]$/.test(e[y].data):!1},q=function(y){for(var B=-1,z=0,b=-1,c=0;c<y.length;c++){var m=y[c];"preprocessor"===
m.type&&(m.data.match(/#(if|ifdef|ifndef)\s+.+/)?++z:m.data.match(/#endif\s*.*/)&&--z);("afterVersion"===h||"afterPrecision"===h)&&"preprocessor"===m.type&&/^#version/.test(m.data)&&(b=Math.max(b,c));if("afterPrecision"===h&&"keyword"===m.type&&"precision"===m.data){a:{for(m=c;m<y.length;m++){var u=y[m];if("operator"===u.type&&";"===u.data)break a}m=null}if(null===m)throw Error("precision statement not followed by any semicolons!");b=Math.max(b,m)}B<b&&0===z&&(B=c)}return B+1}(e);r(q-1)&&e.splice(q++,
0,t);for(var v=0;v<l.length;v++){var x=l[v];e.splice(q++,0,x)}r(q-1)&&r(q)&&e.splice(q,0,t)}Object.defineProperty(k,"__esModule",{value:!0});var d=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];k.transpileShader=function(e,l){var h=f(e);a:{var t="100";var r="300 es";void 0===t&&(t="100");void 0===r&&(r="300 es");for(var q=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,v=0;v<h.length;v++){var x=h[v];if("preprocessor"===x.type){var y=q.exec(x.data);
if(y)if(q=y[1].replace(/\s\s+/g," "),q===r){t=q;break a}else if(q===t){x.data="#version "+r;break a}else throw Error("unknown glsl version: "+q);}}h.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"});t=null}if("300 es"===t)throw Error("shader is already glsl 300 es");q=x=null;v={};y={};for(t=0;t<h.length;++t)switch(r=h[t],r.type){case "keyword":"vertex"===l&&"attribute"===r.data?r.data="in":"varying"===r.data&&(r.data="vertex"===l?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(r.data.trim())&&
(r.data=r.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===l&&"gl_FragColor"===r.data){if(!x){x=p(h,v,"fragColor");var B=void 0;void 0===B&&(B="lowp");n(h,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:B},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:x},{type:"operator",data:";"}],"afterPrecision")}r.data=x}else"fragment"===l&&"gl_FragDepthEXT"===r.data&&(q||(q=p(h,v,"gl_FragDepth")),r.data=q);break;case "ident":if(0<=
a.indexOf(r.data)){if(B="vertex"===l)a:{for(B=t-1;0<=B;B--){var z=h[B];if("whitespace"!==z.type&&"block-comment"!==z.type)if("keyword"===z.type){if("attribute"===z.data||"in"===z.data){B=!0;break a}}else break}B=!1}if(B)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");r.data in y||(y[r.data]=p(h,v,r.data));r.data=y[r.data]}}for(t=h.length-1;0<=t;--t)r=h[t],"preprocessor"===r.type&&((x=r.data.match(/#extension\s+(.*):/))&&x[1]&&0<=d.indexOf(x[1].trim())&&
(x=h[t+1],h.splice(t,x&&"whitespace"===x.type?2:1)),(x=r.data.match(/#ifdef\s+(.*)/))&&x[1]&&0<=d.indexOf(x[1].trim())&&(r.data="#if 1"),(x=r.data.match(/#ifndef\s+(.*)/))&&x[1]&&0<=d.indexOf(x[1].trim())&&(r.data="#if 0"));return g(h)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(D,k){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(D){"use strict;";return function(k){var a=D(),f=[];f=f.concat(a(k));return f=f.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(D,k,a){"use strict;";var f="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function g(C){C.length&&
B.push({type:f[q],data:C,position:c,line:z,column:b})}function p(){y=y.length?[]:y;if("/"===x&&"*"===v)return c=r+t-1,q=0,x=v,t+1;if("/"===x&&"/"===v)return c=r+t-1,q=1,x=v,t+1;if("#"===v)return q=2,c=r+t,t;if(/\s/.test(v))return q=9,c=r+t,t;m=/\d/.test(v);u=/[^\w_]/.test(v);c=r+t;q=m?4:u?3:9999;return t}function n(){if(("\r"===v||"\n"===v)&&"\\"!==x)return g(y.join("")),q=999,t;y.push(v);x=v;return t+1}function d(){if("."===x&&/\d/.test(v))return q=5,t;if("/"===x&&"*"===v)return q=0,t;if("/"===x&&
"/"===v)return q=1,t;if("."===v&&y.length){for(;e(y););q=5;return t}if(";"===v||")"===v||"("===v){if(y.length)for(;e(y););g(v);q=999;return t+1}var C=2===y.length&&"\x3d"!==v;if(/[\w_\d\s]/.test(v)||C){for(;e(y););q=999;return t}y.push(v);x=v;return t+1}function e(C){var E=0;do{var G=k.indexOf(C.slice(0,C.length+E).join(""));var F=k[G];if(-1===G){if(0<E--+C.length)continue;F=C.slice(0,1).join("")}g(F);c+=F.length;y=y.slice(F.length);return y.length}while(1)}function l(){if("."===v||/[eE]/.test(v))return y.push(v),
q=5,x=v,t+1;if("x"===v&&1===y.length&&"0"===y[0])return q=11,y.push(v),x=v,t+1;if(/[^\d]/.test(v))return g(y.join("")),q=999,t;y.push(v);x=v;return t+1}function h(){"f"===v&&(y.push(v),x=v,t+=1);if(/[eE]/.test(v)||"-"===v&&/[eE]/.test(x))return y.push(v),x=v,t+1;if(/[^\d]/.test(v))return g(y.join("")),q=999,t;y.push(v);x=v;return t+1}var t=0,r=0,q=999,v,x,y=[],B=[],z=1,b=0,c=0,m=!1,u=!1,w="",A;return function(C){B=[];if(null!==C){C=C.replace?C.replace(/\r\n/g,"\n"):C;t=0;w+=C;for(A=w.length;v=w[t],
t<A;){C=t;switch(q){case 0:"/"===v&&"*"===x?(y.push(v),g(y.join("")),q=999):(y.push(v),x=v);t+=1;break;case 1:t=n();break;case 2:t=n();break;case 3:t=d();break;case 4:t=l();break;case 11:/[^a-fA-F0-9]/.test(v)?(g(y.join("")),q=999):(y.push(v),x=v,t+=1);break;case 5:t=h();break;case 9999:if(/[^\d\w_]/.test(v)){var E=y.join("");q=-1<D.indexOf(E)?8:-1<a.indexOf(E)?7:6;g(y.join(""));q=999}else y.push(v),x=v,t+=1;break;case 9:/[^\s]/g.test(v)?(g(y.join("")),q=999):(y.push(v),x=v,t+=1);break;case 999:t=
p()}if(C!==t)switch(w[C]){case "\n":b=0;++z;break;default:++b}}r+=t;w=w.slice(t);return B}y.length&&g(y.join(""));q=10;g("(eof)");return B}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(D,k,a,f){return function(){function g(p,n,d,e,l){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=p;this._layout=d;this._buffers=e;this._locations=n;l&&(this._indexBuffer=l);this._id=g._nextId++;a("esri-webgl-debug")&&p.instanceCounter.incrementCount(2)}Object.defineProperty(g.prototype,"id",
{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{get:function(){var p=this;return Object.keys(this._buffers).reduce(function(n,
d){return n+p._buffers[d].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});g.prototype.dispose=function(p){void 0===p&&(p=!0);if(this._context){var n=this._context.capabilities.vao;n&&this._glName&&(n.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(p){for(var d in this._buffers)this._buffers[d].dispose(),delete this._buffers[d];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};g.prototype.initialize=function(){if(!this._initialized){var p=this._context.capabilities.vao;if(p){var n=p.createVertexArray();p.bindVertexArray(n);this._bindLayout();p.bindVertexArray(null);
this._glName=n}this._initialized=!0}};g.prototype.bind=function(){this.initialize();var p=this._context.capabilities.vao;p?p.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};g.prototype._bindLayout=function(){var p=this._buffers,n=!!this._context.capabilities.vao,d=this._layout,e=this._indexBuffer,l=this._context.gl,h;for(h in p)f.bindVertexBufferLayout(this._context,this._locations,p[h],d[h]);e&&(n?l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,e.glName):this._context.bindBuffer(e))};
g.prototype.unbind=function(){this.initialize();var p=this._context.capabilities.vao;p?p.bindVertexArray(null):this._unbindLayout()};g.prototype._unbindLayout=function(){var p=this._buffers,n=this._layout,d;for(d in p)f.unbindVertexBufferLayout(this._context,this._locations,p[d],n[d]);(p=this._indexBuffer)&&this._context.unbindBuffer(p.bufferType)};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],
function(D,k,a,f){return function(){function g(){}g.vertexCount=function(p,n){return p.vertexBuffers[n].size/g.getStride(p.layout[n])};g.getStride=function(p){return p[0].stride};g.getBytesPerElement=function(p){switch(p){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};g.addDescriptor=function(p,n,d,e,l,h){var t=g.getBytesPerElement(e);if(0<p.length){var r=p[0].stride,q=
r+t*d;p.forEach(function(v){return v.stride=q});p.push({name:n,count:d,type:e,offset:r,stride:q,normalized:l,divisor:h})}else p.push({name:n,count:d,type:e,offset:0,stride:t*d,normalized:l,divisor:h})};g.assertCompatibleVertexAttributeLocations=function(p,n){return p.locations===n.locations};g.hasAttribute=function(p,n){for(var d=0;d<p.length;d++)if(p[d].name===n)return!0;return!1};g.findAttribute=function(p,n){for(var d=0;d<p.length;d++)if(p[d].name===n)return p[d];return null};g.copyFramebufferToTexture=
function(p,n,d,e,l){void 0===l&&(l=0);var h=p.getBoundFramebufferObject(),t=p.getBoundTexture(0);p.bindFramebuffer(n);p.bindTexture(d,0);p.gl.copyTexImage2D(p.gl.TEXTURE_2D,l,d.descriptor.pixelFormat,e[0],e[1],e[2],e[3],0);p.gl.flush();p.bindFramebuffer(h);p.bindTexture(t,0)};g.assert=function(p,n){if(!p)throw new f(n);};g.setBaseInstanceOffset=function(p,n){var d={},e;for(e in p)d[e]=p[e].map(function(l){return l.divisor?a({},l,{baseInstance:n}):l});return d};g.bindVertexBufferLayout=function(p,
n,d,e,l){var h=p.gl,t=p.capabilities.instancing;p.bindBuffer(d);e.forEach(function(r){var q=n[r.name],v=(l?l:0+r.baseInstance?r.baseInstance:0)*r.stride;if(4>=r.count)h.vertexAttribPointer(q,r.count,r.type,r.normalized,r.stride,r.offset+v),h.enableVertexAttribArray(q),r.divisor&&0<r.divisor&&t&&t.vertexAttribDivisor(q,r.divisor);else if(9===r.count)for(var x=0;3>x;x++)h.vertexAttribPointer(q+x,3,r.type,r.normalized,r.stride,r.offset+12*x+v),h.enableVertexAttribArray(q+x),r.divisor&&0<r.divisor&&t&&
t.vertexAttribDivisor(q+x,r.divisor);else if(16===r.count)for(x=0;4>x;x++)h.vertexAttribPointer(q+x,4,r.type,r.normalized,r.stride,r.offset+16*x+v),h.enableVertexAttribArray(q+x),r.divisor&&0<r.divisor&&t&&t.vertexAttribDivisor(q+x,r.divisor)})};g.unbindVertexBufferLayout=function(p,n,d,e){var l=p.gl;p.bindBuffer(d);e.forEach(function(h){var t=n[h.name];if(4>=h.count)l.disableVertexAttribArray(t);else if(9===h.count)for(h=0;3>h;h++)l.disableVertexAttribArray(t+h);else if(16===h.count)for(h=0;4>h;h++)l.disableVertexAttribArray(t+
h)});p.unbindBuffer(34962)};return g}()})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(D){for(var k,a=1,f=arguments.length;a<f;a++){k=arguments[a];for(var g in k)Object.prototype.hasOwnProperty.call(k,g)&&(D[g]=k[g])}return D}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(k.WGLGeometryType||(k.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(k.WGLGeometryTransactionStatus||(k.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(k.WGLDrawPhase||(k.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(k.VVType||(k.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(k.WGLVVFlag||(k.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(k.WGLVVTarget||(k.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(k.CapType||(k.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(k.JoinType||(k.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(k.EsriSymbolType||(k.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(k.EsriSymbolTypeKebab||(k.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B){Object.defineProperty(k,"__esModule",{value:!0});D=function(){function c(){this._initialized=!1}c.prototype.registerPass=function(m,u){this._initialize();for(var w=0;w<u.length;w++)this._passMap.set(u[w],m);return this};c.prototype.getPaintPassTs=function(m){this._initialize();return this._passMap.has(m)?[this._passMap.get(m)]:[]};c.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return c}();k.WGLPainterOptions=
D;var z=new Uint8Array(4*e.C_HITTEST_SEARCH_SIZE*e.C_HITTEST_SEARCH_SIZE),b=new Uint32Array(z.buffer);D=function(){function c(){this._hlPainter=new y;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new d}c.allGeometryPhases=function(){return[p.WGLDrawPhase.FILL,
p.WGLDrawPhase.LINE,p.WGLDrawPhase.MARKER,p.WGLDrawPhase.TEXT]};c.toWGLDrawPhases=function(m){for(var u=[],w,A=0;A<p.WGLDrawPhase.NUM_DRAW_PHASES;A++)w=1<<A,w&m&&u.push(w);return u};Object.defineProperty(c.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});c.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(m){return m.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(m){return m.forEach(function(u){return u.dispose()})}),this._brushes.clear())};c.prototype.initialize=function(m){this.materialManager.initialize(m)};c.prototype.update=function(m,u){this._state=m;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/m.width,this._extrudeScaleVector[1]=-2/m.height,g.identity(this._extrudeMatrix),g.rotate(this._extrudeMatrix,this._extrudeMatrix,-m.rotation*n.C_DEG_TO_RAD,this._extrudeRotateVector),g.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),g.transpose(this._extrudeMatrix,this._extrudeMatrix),g.identity(this._extrudeNoRotationMatrix),g.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),g.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};c.prototype.getBrushes=function(m){if(!this._brushes){var u=new t["default"],w=new v["default"],A=new q["default"],C=new x["default"],E=new r["default"],G=new l["default"],F=new h["default"];this._brushes=new Map;this._brushes.set(p.WGLDrawPhase.FILL,[u]);
this._brushes.set(p.WGLDrawPhase.MARKER,[w]);this._brushes.set(p.WGLDrawPhase.LINE,[A]);this._brushes.set(p.WGLDrawPhase.TEXT,[C]);this._brushes.set(p.WGLDrawPhase.LABEL,[E]);this._brushes.set(p.WGLDrawPhase.LABEL_ALPHA,[E]);this._brushes.set(p.WGLDrawPhase.HITTEST,[u,w,A,C]);this._brushes.set(p.WGLDrawPhase.HIGHLIGHT,[u,w,A,C]);this._brushes.set(p.WGLDrawPhase.CLIP,[F]);this._brushes.set(p.WGLDrawPhase.DEBUG,[G])}if(!this._brushes.has(m))throw Error("WGLPainter: Tried to get brush for unknown phase: "+
m);return this._brushes.get(m)};c.prototype.bindTextureManager=function(m){this.textureManager=m};c.prototype.draw=function(m,u,w,A){w[0]===p.WGLDrawPhase.LABEL_ALPHA&&w[0]===p.WGLDrawPhase.LABEL||this._drawClippingRects(m,u);var C=m.context;C.setBlendingEnabled(!0);C.setStencilWriteMask(0);C.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(m,u,w,A);this._debugTiles(m,u)};c.prototype.setHighlightOptions=function(m){this._hlPainter.setHighlightOptions(m)};c.prototype.highlight=function(m,u){var w=
m.context,A=w.getViewport();this._hlPainter.setup(w,A.width,A.height);this._hlPainter.startMaskDraw(w);this._drawClippingRects(m,u);w.setBlendingEnabled(!0);w.setStencilWriteMask(0);w.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(m,u,[p.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(w)};c.prototype.hitTest=function(m,u){var w=e.C_HITTEST_SEARCH_SIZE,A=[0,0],C=[0,0],E=m.state;E.toMap(A,[0,0]);E.toMap(C,[w,w]);if(0===u.filter(function(S){return!(A[0]>S.bounds[2]||C[0]<S.bounds[0]||A[1]<S.bounds[1]||
C[1]>S.bounds[3])}).length)return[];E=m.context;this._hittestFBO||(this._hittestFBO=B.create(E,{colorTarget:0,depthStencilTarget:3,width:w,height:w}));var G=E.getViewport(),F=E.getBoundFramebufferObject();E.bindFramebuffer(this._hittestFBO);E.setViewport(0,0,w,w);this._drawClippingRects(m,u);var I=E.gl;E.setClearColor(1,1,1,1);E.clear(I.COLOR_BUFFER_BIT);E.setBlendingEnabled(!1);E.setStencilWriteMask(0);this._drawPhases(m,u,[p.WGLDrawPhase.HITTEST]);E.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,
0,w,w,6408,5121,z);w*=w;I=new Set;for(var M=0;M<w;M++){var Y=b[M];4294967295!==Y&&I.add(Y)}E.bindFramebuffer(F);E.setViewport(G.x,G.y,G.width,G.height);var R=[];I.forEach(function(S){R.push(S)});return R};c.prototype._getPaintPass=function(m){this._passes||(this._passes=new Map);if(!this._passes.has(m))try{this._passes.set(m,new m)}catch(u){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+m+",\n"+u);}return this._passes.get(m)};c.prototype._getPaintPasses=function(m,u){var w=
this;return u.getPaintPassTs(m).map(function(A){return w._getPaintPass(A)})};c.prototype._drawPhases=function(m,u,w,A){m.context.setStencilTestEnabled(!0);for(var C=0;C<w.length;C++){var E=w[C],G=A?this._getPaintPasses(E,A):[];E=a({},m,{drawPhase:E});G.forEach(function(M){return M.preRender(m,m.rendererInfo)});for(var F=0,I=u;F<I.length;F++)I[F].doRender(E);G.reverse().forEach(function(M){return M.postRender(m,m.rendererInfo)})}m.context.setStencilTestEnabled(!1)};c.prototype._debugTiles=function(m,
u){f("esri-feature-tiles-debug")&&this._drawPhases(m,u,[p.WGLDrawPhase.DEBUG])};c.prototype._drawClippingRects=function(m,u){if(0!==u.length){var w=m.context;w.setDepthWriteEnabled(!1);w.setDepthTestEnabled(!1);w.setStencilTestEnabled(!0);w.setBlendingEnabled(!1);w.setColorMask(!1,!1,!1,!1);w.setStencilOp(7680,7680,7681);w.setClearStencil(0);w.clear(w.gl.STENCIL_BUFFER_BIT);w.setStencilWriteMask(255);w=0;for(var A=u.length;w<u.length;w++,A--){var C=u[w];C.attached&&(C.stencilRef=A)}this._drawPhases(m,
u,[p.WGLDrawPhase.CLIP]);m.context.setColorMask(!0,!0,!0,!0)}};return c}();k["default"]=D})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(D){var k={scalar:{},SIMD:{},create:function(){var a=new D.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var f=new D.ARRAY_TYPE(16);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];f[6]=a[6];f[7]=
a[7];f[8]=a[8];f[9]=a[9];f[10]=a[10];f[11]=a[11];f[12]=a[12];f[13]=a[13];f[14]=a[14];f[15]=a[15];return f},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];a[6]=f[6];a[7]=f[7];a[8]=f[8];a[9]=f[9];a[10]=f[10];a[11]=f[11];a[12]=f[12];a[13]=f[13];a[14]=f[14];a[15]=f[15];return a},fromValues:function(a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B){var z=new D.ARRAY_TYPE(16);z[0]=a;z[1]=f;z[2]=g;z[3]=p;z[4]=n;z[5]=d;z[6]=e;z[7]=l;z[8]=h;z[9]=t;z[10]=r;z[11]=q;z[12]=v;z[13]=x;z[14]=y;z[15]=
B;return z},set:function(a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z){a[0]=f;a[1]=g;a[2]=p;a[3]=n;a[4]=d;a[5]=e;a[6]=l;a[7]=h;a[8]=t;a[9]=r;a[10]=q;a[11]=v;a[12]=x;a[13]=y;a[14]=B;a[15]=z;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};k.scalar.transpose=function(a,f){if(a===f){var g=f[1],p=f[2],n=f[3],d=f[6],e=f[7],l=f[11];a[1]=f[4];a[2]=f[8];a[3]=f[12];a[4]=g;a[6]=f[9];a[7]=f[13];a[8]=p;a[9]=d;
a[11]=f[14];a[12]=n;a[13]=e;a[14]=l}else a[0]=f[0],a[1]=f[4],a[2]=f[8],a[3]=f[12],a[4]=f[1],a[5]=f[5],a[6]=f[9],a[7]=f[13],a[8]=f[2],a[9]=f[6],a[10]=f[10],a[11]=f[14],a[12]=f[3],a[13]=f[7],a[14]=f[11],a[15]=f[15];return a};k.SIMD.transpose=function(a,f){var g=SIMD.Float32x4.load(f,0);var p=SIMD.Float32x4.load(f,4);var n=SIMD.Float32x4.load(f,8);var d=SIMD.Float32x4.load(f,12);var e=SIMD.Float32x4.shuffle(g,p,0,1,4,5);var l=SIMD.Float32x4.shuffle(n,d,0,1,4,5);var h=SIMD.Float32x4.shuffle(e,l,0,2,4,
6);e=SIMD.Float32x4.shuffle(e,l,1,3,5,7);SIMD.Float32x4.store(a,0,h);SIMD.Float32x4.store(a,4,e);e=SIMD.Float32x4.shuffle(g,p,2,3,6,7);l=SIMD.Float32x4.shuffle(n,d,2,3,6,7);g=SIMD.Float32x4.shuffle(e,l,0,2,4,6);p=SIMD.Float32x4.shuffle(e,l,1,3,5,7);SIMD.Float32x4.store(a,8,g);SIMD.Float32x4.store(a,12,p);return a};k.transpose=D.USE_SIMD?k.SIMD.transpose:k.scalar.transpose;k.scalar.invert=function(a,f){var g=f[0],p=f[1],n=f[2],d=f[3],e=f[4],l=f[5],h=f[6],t=f[7],r=f[8],q=f[9],v=f[10],x=f[11],y=f[12],
B=f[13],z=f[14],b=f[15],c=g*l-p*e,m=g*h-n*e,u=g*t-d*e,w=p*h-n*l,A=p*t-d*l,C=n*t-d*h,E=r*B-q*y,G=r*z-v*y,F=r*b-x*y,I=q*z-v*B,M=q*b-x*B,Y=v*b-x*z,R=c*Y-m*M+u*I+w*F-A*G+C*E;if(!R)return null;R=1/R;a[0]=(l*Y-h*M+t*I)*R;a[1]=(n*M-p*Y-d*I)*R;a[2]=(B*C-z*A+b*w)*R;a[3]=(v*A-q*C-x*w)*R;a[4]=(h*F-e*Y-t*G)*R;a[5]=(g*Y-n*F+d*G)*R;a[6]=(z*u-y*C-b*m)*R;a[7]=(r*C-v*u+x*m)*R;a[8]=(e*M-l*F+t*E)*R;a[9]=(p*F-g*M-d*E)*R;a[10]=(y*A-B*u+b*c)*R;a[11]=(q*u-r*A-x*c)*R;a[12]=(l*G-e*I-h*E)*R;a[13]=(g*I-p*G+n*E)*R;a[14]=(B*
m-y*w-z*c)*R;a[15]=(r*w-q*m+v*c)*R;return a};k.SIMD.invert=function(a,f){var g=SIMD.Float32x4.load(f,0);var p=SIMD.Float32x4.load(f,4);var n=SIMD.Float32x4.load(f,8);var d=SIMD.Float32x4.load(f,12);var e=SIMD.Float32x4.shuffle(g,p,0,1,4,5);var l=SIMD.Float32x4.shuffle(n,d,0,1,4,5);var h=SIMD.Float32x4.shuffle(e,l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,e,1,3,5,7);e=SIMD.Float32x4.shuffle(g,p,2,3,6,7);var t=SIMD.Float32x4.shuffle(n,d,2,3,6,7);var r=SIMD.Float32x4.shuffle(e,t,0,2,4,6);t=SIMD.Float32x4.shuffle(t,
e,1,3,5,7);e=SIMD.Float32x4.mul(r,t);e=SIMD.Float32x4.swizzle(e,1,0,3,2);g=SIMD.Float32x4.mul(l,e);p=SIMD.Float32x4.mul(h,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,e),g);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,e),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);e=SIMD.Float32x4.mul(l,r);e=SIMD.Float32x4.swizzle(e,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(t,e),g);d=SIMD.Float32x4.mul(h,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(t,
e));d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,e),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);e=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),t);e=SIMD.Float32x4.swizzle(e,1,0,3,2);r=SIMD.Float32x4.swizzle(r,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,e),g);n=SIMD.Float32x4.mul(h,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(r,e));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,e),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);e=SIMD.Float32x4.mul(h,l);e=SIMD.Float32x4.swizzle(e,
1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(t,e),n);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,e),d);e=SIMD.Float32x4.swizzle(e,2,3,0,1);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(t,e),n);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(r,e));e=SIMD.Float32x4.mul(h,t);e=SIMD.Float32x4.swizzle(e,1,0,3,2);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(r,e));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,e),n);e=SIMD.Float32x4.swizzle(e,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,e),p);n=SIMD.Float32x4.sub(n,
SIMD.Float32x4.mul(l,e));e=SIMD.Float32x4.mul(h,r);e=SIMD.Float32x4.swizzle(e,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(t,e),p);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,e));e=SIMD.Float32x4.swizzle(e,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(t,e));d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,e),d);h=SIMD.Float32x4.mul(h,g);h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h);h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h);e=SIMD.Float32x4.reciprocalApproximation(h);
h=SIMD.Float32x4.sub(SIMD.Float32x4.add(e,e),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(e,e)));h=SIMD.Float32x4.swizzle(h,0,0,0,0);if(!h)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(h,g));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(h,p));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(h,n));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(h,d));return a};k.invert=D.USE_SIMD?k.SIMD.invert:k.scalar.invert;k.scalar.adjoint=function(a,f){var g=f[0],p=f[1],n=f[2],d=f[3],e=f[4],l=f[5],h=f[6],t=f[7],r=f[8],
q=f[9],v=f[10],x=f[11],y=f[12],B=f[13],z=f[14],b=f[15];a[0]=l*(v*b-x*z)-q*(h*b-t*z)+B*(h*x-t*v);a[1]=-(p*(v*b-x*z)-q*(n*b-d*z)+B*(n*x-d*v));a[2]=p*(h*b-t*z)-l*(n*b-d*z)+B*(n*t-d*h);a[3]=-(p*(h*x-t*v)-l*(n*x-d*v)+q*(n*t-d*h));a[4]=-(e*(v*b-x*z)-r*(h*b-t*z)+y*(h*x-t*v));a[5]=g*(v*b-x*z)-r*(n*b-d*z)+y*(n*x-d*v);a[6]=-(g*(h*b-t*z)-e*(n*b-d*z)+y*(n*t-d*h));a[7]=g*(h*x-t*v)-e*(n*x-d*v)+r*(n*t-d*h);a[8]=e*(q*b-x*B)-r*(l*b-t*B)+y*(l*x-t*q);a[9]=-(g*(q*b-x*B)-r*(p*b-d*B)+y*(p*x-d*q));a[10]=g*(l*b-t*B)-e*(p*
b-d*B)+y*(p*t-d*l);a[11]=-(g*(l*x-t*q)-e*(p*x-d*q)+r*(p*t-d*l));a[12]=-(e*(q*z-v*B)-r*(l*z-h*B)+y*(l*v-h*q));a[13]=g*(q*z-v*B)-r*(p*z-n*B)+y*(p*v-n*q);a[14]=-(g*(l*z-h*B)-e*(p*z-n*B)+y*(p*h-n*l));a[15]=g*(l*v-h*q)-e*(p*v-n*q)+r*(p*h-n*l);return a};k.SIMD.adjoint=function(a,f){var g=SIMD.Float32x4.load(f,0);var p=SIMD.Float32x4.load(f,4);var n=SIMD.Float32x4.load(f,8);var d=SIMD.Float32x4.load(f,12);var e=SIMD.Float32x4.shuffle(g,p,0,1,4,5);var l=SIMD.Float32x4.shuffle(n,d,0,1,4,5);var h=SIMD.Float32x4.shuffle(e,
l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,e,1,3,5,7);e=SIMD.Float32x4.shuffle(g,p,2,3,6,7);p=SIMD.Float32x4.shuffle(n,d,2,3,6,7);g=SIMD.Float32x4.shuffle(e,p,0,2,4,6);p=SIMD.Float32x4.shuffle(p,e,1,3,5,7);e=SIMD.Float32x4.mul(g,p);e=SIMD.Float32x4.swizzle(e,1,0,3,2);n=SIMD.Float32x4.mul(l,e);d=SIMD.Float32x4.mul(h,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,e),n);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,e),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);e=SIMD.Float32x4.mul(l,
g);e=SIMD.Float32x4.swizzle(e,1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,e),n);var t=SIMD.Float32x4.mul(h,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(p,e));t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,e),t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);e=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),p);e=SIMD.Float32x4.swizzle(e,1,0,3,2);g=SIMD.Float32x4.swizzle(g,2,3,0,1);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,e),n);var r=SIMD.Float32x4.mul(h,e);e=SIMD.Float32x4.swizzle(e,
2,3,0,1);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(g,e));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,e),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);e=SIMD.Float32x4.mul(h,l);e=SIMD.Float32x4.swizzle(e,1,0,3,2);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,e),r);t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),t);e=SIMD.Float32x4.swizzle(e,2,3,0,1);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,e),r);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(g,e));e=SIMD.Float32x4.mul(h,p);e=SIMD.Float32x4.swizzle(e,1,0,3,2);d=SIMD.Float32x4.sub(d,
SIMD.Float32x4.mul(g,e));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,e),r);e=SIMD.Float32x4.swizzle(e,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,e),d);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(l,e));e=SIMD.Float32x4.mul(h,g);e=SIMD.Float32x4.swizzle(e,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,e),d);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(l,e));e=SIMD.Float32x4.swizzle(e,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(p,e));t=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,e),t);SIMD.Float32x4.store(a,
0,n);SIMD.Float32x4.store(a,4,d);SIMD.Float32x4.store(a,8,r);SIMD.Float32x4.store(a,12,t);return a};k.adjoint=D.USE_SIMD?k.SIMD.adjoint:k.scalar.adjoint;k.determinant=function(a){var f=a[0],g=a[1],p=a[2],n=a[3],d=a[4],e=a[5],l=a[6],h=a[7],t=a[8],r=a[9],q=a[10],v=a[11],x=a[12],y=a[13],B=a[14];a=a[15];return(f*e-g*d)*(q*a-v*B)-(f*l-p*d)*(r*a-v*y)+(f*h-n*d)*(r*B-q*y)+(g*l-p*e)*(t*a-v*x)-(g*h-n*e)*(t*B-q*x)+(p*h-n*l)*(t*y-r*x)};k.SIMD.multiply=function(a,f,g){var p=SIMD.Float32x4.load(f,0),n=SIMD.Float32x4.load(f,
4),d=SIMD.Float32x4.load(f,8);f=SIMD.Float32x4.load(f,12);var e=SIMD.Float32x4.load(g,0);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),f))));SIMD.Float32x4.store(a,0,e);e=SIMD.Float32x4.load(g,4);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,0,0,0,
0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),f))));SIMD.Float32x4.store(a,4,e);e=SIMD.Float32x4.load(g,8);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,
3,3,3,3),f))));SIMD.Float32x4.store(a,8,e);g=SIMD.Float32x4.load(g,12);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,3,3,3,3),f))));SIMD.Float32x4.store(a,12,p);return a};k.scalar.multiply=function(a,f,g){var p=f[0],n=f[1],d=f[2],e=f[3],l=f[4],h=f[5],t=f[6],r=f[7],q=f[8],v=f[9],
x=f[10],y=f[11],B=f[12],z=f[13],b=f[14];f=f[15];var c=g[0],m=g[1],u=g[2],w=g[3];a[0]=c*p+m*l+u*q+w*B;a[1]=c*n+m*h+u*v+w*z;a[2]=c*d+m*t+u*x+w*b;a[3]=c*e+m*r+u*y+w*f;c=g[4];m=g[5];u=g[6];w=g[7];a[4]=c*p+m*l+u*q+w*B;a[5]=c*n+m*h+u*v+w*z;a[6]=c*d+m*t+u*x+w*b;a[7]=c*e+m*r+u*y+w*f;c=g[8];m=g[9];u=g[10];w=g[11];a[8]=c*p+m*l+u*q+w*B;a[9]=c*n+m*h+u*v+w*z;a[10]=c*d+m*t+u*x+w*b;a[11]=c*e+m*r+u*y+w*f;c=g[12];m=g[13];u=g[14];w=g[15];a[12]=c*p+m*l+u*q+w*B;a[13]=c*n+m*h+u*v+w*z;a[14]=c*d+m*t+u*x+w*b;a[15]=c*e+m*
r+u*y+w*f;return a};k.multiply=D.USE_SIMD?k.SIMD.multiply:k.scalar.multiply;k.mul=k.multiply;k.scalar.translate=function(a,f,g){var p=g[0],n=g[1];g=g[2];if(f===a)a[12]=f[0]*p+f[4]*n+f[8]*g+f[12],a[13]=f[1]*p+f[5]*n+f[9]*g+f[13],a[14]=f[2]*p+f[6]*n+f[10]*g+f[14],a[15]=f[3]*p+f[7]*n+f[11]*g+f[15];else{var d=f[0];var e=f[1];var l=f[2];var h=f[3];var t=f[4];var r=f[5];var q=f[6];var v=f[7];var x=f[8];var y=f[9];var B=f[10];var z=f[11];a[0]=d;a[1]=e;a[2]=l;a[3]=h;a[4]=t;a[5]=r;a[6]=q;a[7]=v;a[8]=x;a[9]=
y;a[10]=B;a[11]=z;a[12]=d*p+t*n+x*g+f[12];a[13]=e*p+r*n+y*g+f[13];a[14]=l*p+q*n+B*g+f[14];a[15]=h*p+v*n+z*g+f[15]}return a};k.SIMD.translate=function(a,f,g){var p=SIMD.Float32x4.load(f,0),n=SIMD.Float32x4.load(f,4),d=SIMD.Float32x4.load(f,8),e=SIMD.Float32x4.load(f,12);g=SIMD.Float32x4(g[0],g[1],g[2],0);f!==a&&(a[0]=f[0],a[1]=f[1],a[2]=f[2],a[3]=f[3],a[4]=f[4],a[5]=f[5],a[6]=f[6],a[7]=f[7],a[8]=f[8],a[9]=f[9],a[10]=f[10],a[11]=f[11]);p=SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(g,0,0,0,0));n=SIMD.Float32x4.mul(n,
SIMD.Float32x4.swizzle(g,1,1,1,1));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(g,2,2,2,2));f=SIMD.Float32x4.add(p,SIMD.Float32x4.add(n,SIMD.Float32x4.add(d,e)));SIMD.Float32x4.store(a,12,f);return a};k.translate=D.USE_SIMD?k.SIMD.translate:k.scalar.translate;k.scalar.scale=function(a,f,g){var p=g[0],n=g[1];g=g[2];a[0]=f[0]*p;a[1]=f[1]*p;a[2]=f[2]*p;a[3]=f[3]*p;a[4]=f[4]*n;a[5]=f[5]*n;a[6]=f[6]*n;a[7]=f[7]*n;a[8]=f[8]*g;a[9]=f[9]*g;a[10]=f[10]*g;a[11]=f[11]*g;a[12]=f[12];a[13]=f[13];a[14]=f[14];
a[15]=f[15];return a};k.SIMD.scale=function(a,f,g){g=SIMD.Float32x4(g[0],g[1],g[2],0);var p=SIMD.Float32x4.load(f,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(g,0,0,0,0)));p=SIMD.Float32x4.load(f,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(g,1,1,1,1)));p=SIMD.Float32x4.load(f,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(g,2,2,2,2)));a[12]=f[12];a[13]=f[13];a[14]=f[14];a[15]=f[15];return a};k.scale=D.USE_SIMD?k.SIMD.scale:
k.scalar.scale;k.rotate=function(a,f,g,p){var n=p[0],d=p[1];p=p[2];var e=Math.sqrt(n*n+d*d+p*p);if(Math.abs(e)<D.EPSILON)return null;e=1/e;n*=e;d*=e;p*=e;var l=Math.sin(g);var h=Math.cos(g);var t=1-h;g=f[0];e=f[1];var r=f[2];var q=f[3];var v=f[4];var x=f[5];var y=f[6];var B=f[7];var z=f[8];var b=f[9];var c=f[10];var m=f[11];var u=n*n*t+h;var w=d*n*t+p*l;var A=p*n*t-d*l;var C=n*d*t-p*l;var E=d*d*t+h;var G=p*d*t+n*l;var F=n*p*t+d*l;n=d*p*t-n*l;d=p*p*t+h;a[0]=g*u+v*w+z*A;a[1]=e*u+x*w+b*A;a[2]=r*u+y*
w+c*A;a[3]=q*u+B*w+m*A;a[4]=g*C+v*E+z*G;a[5]=e*C+x*E+b*G;a[6]=r*C+y*E+c*G;a[7]=q*C+B*E+m*G;a[8]=g*F+v*n+z*d;a[9]=e*F+x*n+b*d;a[10]=r*F+y*n+c*d;a[11]=q*F+B*n+m*d;f!==a&&(a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);return a};k.scalar.rotateX=function(a,f,g){var p=Math.sin(g);g=Math.cos(g);var n=f[4],d=f[5],e=f[6],l=f[7],h=f[8],t=f[9],r=f[10],q=f[11];f!==a&&(a[0]=f[0],a[1]=f[1],a[2]=f[2],a[3]=f[3],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[4]=n*g+h*p;a[5]=d*g+t*p;a[6]=e*g+r*p;a[7]=l*g+q*
p;a[8]=h*g-n*p;a[9]=t*g-d*p;a[10]=r*g-e*p;a[11]=q*g-l*p;return a};k.SIMD.rotateX=function(a,f,g){var p=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));f!==a&&(a[0]=f[0],a[1]=f[1],a[2]=f[2],a[3]=f[3],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);var n=SIMD.Float32x4.load(f,4);f=SIMD.Float32x4.load(f,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,g),SIMD.Float32x4.mul(f,p)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),SIMD.Float32x4.mul(n,
p)));return a};k.rotateX=D.USE_SIMD?k.SIMD.rotateX:k.scalar.rotateX;k.scalar.rotateY=function(a,f,g){var p=Math.sin(g);g=Math.cos(g);var n=f[0],d=f[1],e=f[2],l=f[3],h=f[8],t=f[9],r=f[10],q=f[11];f!==a&&(a[4]=f[4],a[5]=f[5],a[6]=f[6],a[7]=f[7],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[0]=n*g-h*p;a[1]=d*g-t*p;a[2]=e*g-r*p;a[3]=l*g-q*p;a[8]=n*p+h*g;a[9]=d*p+t*g;a[10]=e*p+r*g;a[11]=l*p+q*g;return a};k.SIMD.rotateY=function(a,f,g){var p=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));
f!==a&&(a[4]=f[4],a[5]=f[5],a[6]=f[6],a[7]=f[7],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);var n=SIMD.Float32x4.load(f,0);f=SIMD.Float32x4.load(f,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,g),SIMD.Float32x4.mul(f,p)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,p),SIMD.Float32x4.mul(f,g)));return a};k.rotateY=D.USE_SIMD?k.SIMD.rotateY:k.scalar.rotateY;k.scalar.rotateZ=function(a,f,g){var p=Math.sin(g);g=Math.cos(g);var n=f[0],d=f[1],e=f[2],l=f[3],
h=f[4],t=f[5],r=f[6],q=f[7];f!==a&&(a[8]=f[8],a[9]=f[9],a[10]=f[10],a[11]=f[11],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[0]=n*g+h*p;a[1]=d*g+t*p;a[2]=e*g+r*p;a[3]=l*g+q*p;a[4]=h*g-n*p;a[5]=t*g-d*p;a[6]=r*g-e*p;a[7]=q*g-l*p;return a};k.SIMD.rotateZ=function(a,f,g){var p=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));f!==a&&(a[8]=f[8],a[9]=f[9],a[10]=f[10],a[11]=f[11],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);var n=SIMD.Float32x4.load(f,0);f=SIMD.Float32x4.load(f,
4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,g),SIMD.Float32x4.mul(f,p)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),SIMD.Float32x4.mul(n,p)));return a};k.rotateZ=D.USE_SIMD?k.SIMD.rotateZ:k.scalar.rotateZ;k.fromTranslation=function(a,f){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=f[0];a[13]=f[1];a[14]=f[2];a[15]=1;return a};k.fromScaling=function(a,f){a[0]=f[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f[1];a[6]=
0;a[7]=0;a[8]=0;a[9]=0;a[10]=f[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.fromRotation=function(a,f,g){var p=g[0],n=g[1];g=g[2];var d=Math.sqrt(p*p+n*n+g*g);if(Math.abs(d)<D.EPSILON)return null;d=1/d;p*=d;n*=d;g*=d;d=Math.sin(f);f=Math.cos(f);var e=1-f;a[0]=p*p*e+f;a[1]=n*p*e+g*d;a[2]=g*p*e-n*d;a[3]=0;a[4]=p*n*e-g*d;a[5]=n*n*e+f;a[6]=g*n*e+p*d;a[7]=0;a[8]=p*g*e+n*d;a[9]=n*g*e-p*d;a[10]=g*g*e+f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.fromXRotation=function(a,f){var g=Math.sin(f),
p=Math.cos(f);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=p;a[6]=g;a[7]=0;a[8]=0;a[9]=-g;a[10]=p;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.fromYRotation=function(a,f){var g=Math.sin(f),p=Math.cos(f);a[0]=p;a[1]=0;a[2]=-g;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=g;a[9]=0;a[10]=p;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.fromZRotation=function(a,f){var g=Math.sin(f),p=Math.cos(f);a[0]=p;a[1]=g;a[2]=0;a[3]=0;a[4]=-g;a[5]=p;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=
0;a[15]=1;return a};k.fromRotationTranslation=function(a,f,g){var p=f[0],n=f[1],d=f[2],e=f[3],l=p+p,h=n+n,t=d+d;f=p*l;var r=p*h;p*=t;var q=n*h;n*=t;d*=t;l*=e;h*=e;e*=t;a[0]=1-(q+d);a[1]=r+e;a[2]=p-h;a[3]=0;a[4]=r-e;a[5]=1-(f+d);a[6]=n+l;a[7]=0;a[8]=p+h;a[9]=n-l;a[10]=1-(f+q);a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a};k.getTranslation=function(a,f){a[0]=f[12];a[1]=f[13];a[2]=f[14];return a};k.getRotation=function(a,f){var g=f[0]+f[5]+f[10],p=0;0<g?(p=2*Math.sqrt(g+1),a[3]=.25*p,a[0]=
(f[6]-f[9])/p,a[1]=(f[8]-f[2])/p,a[2]=(f[1]-f[4])/p):f[0]>f[5]&f[0]>f[10]?(p=2*Math.sqrt(1+f[0]-f[5]-f[10]),a[3]=(f[6]-f[9])/p,a[0]=.25*p,a[1]=(f[1]+f[4])/p,a[2]=(f[8]+f[2])/p):f[5]>f[10]?(p=2*Math.sqrt(1+f[5]-f[0]-f[10]),a[3]=(f[8]-f[2])/p,a[0]=(f[1]+f[4])/p,a[1]=.25*p,a[2]=(f[6]+f[9])/p):(p=2*Math.sqrt(1+f[10]-f[0]-f[5]),a[3]=(f[1]-f[4])/p,a[0]=(f[8]+f[2])/p,a[1]=(f[6]+f[9])/p,a[2]=.25*p);return a};k.fromRotationTranslationScale=function(a,f,g,p){var n=f[0],d=f[1],e=f[2],l=f[3],h=n+n,t=d+d,r=e+
e;f=n*h;var q=n*t;n*=r;var v=d*t;d*=r;e*=r;h*=l;t*=l;l*=r;r=p[0];var x=p[1];p=p[2];a[0]=(1-(v+e))*r;a[1]=(q+l)*r;a[2]=(n-t)*r;a[3]=0;a[4]=(q-l)*x;a[5]=(1-(f+e))*x;a[6]=(d+h)*x;a[7]=0;a[8]=(n+t)*p;a[9]=(d-h)*p;a[10]=(1-(f+v))*p;a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a};k.fromRotationTranslationScaleOrigin=function(a,f,g,p,n){var d=f[0],e=f[1],l=f[2],h=f[3],t=d+d,r=e+e,q=l+l;f=d*t;var v=d*r;d*=q;var x=e*r;e*=q;l*=q;t*=h;r*=h;h*=q;q=p[0];var y=p[1];p=p[2];var B=n[0],z=n[1];n=n[2];a[0]=
(1-(x+l))*q;a[1]=(v+h)*q;a[2]=(d-r)*q;a[3]=0;a[4]=(v-h)*y;a[5]=(1-(f+l))*y;a[6]=(e+t)*y;a[7]=0;a[8]=(d+r)*p;a[9]=(e-t)*p;a[10]=(1-(f+x))*p;a[11]=0;a[12]=g[0]+B-(a[0]*B+a[4]*z+a[8]*n);a[13]=g[1]+z-(a[1]*B+a[5]*z+a[9]*n);a[14]=g[2]+n-(a[2]*B+a[6]*z+a[10]*n);a[15]=1;return a};k.fromQuat=function(a,f){var g=f[0],p=f[1],n=f[2],d=f[3],e=g+g,l=p+p,h=n+n;g*=e;var t=p*e;p*=l;var r=n*e,q=n*l;n*=h;e*=d;l*=d;d*=h;a[0]=1-p-n;a[1]=t+d;a[2]=r-l;a[3]=0;a[4]=t-d;a[5]=1-g-n;a[6]=q+e;a[7]=0;a[8]=r+l;a[9]=q-e;a[10]=
1-g-p;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.frustum=function(a,f,g,p,n,d,e){var l=1/(g-f),h=1/(n-p),t=1/(d-e);a[0]=2*d*l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*d*h;a[6]=0;a[7]=0;a[8]=(g+f)*l;a[9]=(n+p)*h;a[10]=(e+d)*t;a[11]=-1;a[12]=0;a[13]=0;a[14]=e*d*2*t;a[15]=0;return a};k.perspective=function(a,f,g,p,n){f=1/Math.tan(f/2);var d=1/(p-n);a[0]=f/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(n+p)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*n*p*d;a[15]=0;return a};k.perspectiveFromFieldOfView=
function(a,f,g,p){var n=Math.tan(f.upDegrees*Math.PI/180),d=Math.tan(f.downDegrees*Math.PI/180),e=Math.tan(f.leftDegrees*Math.PI/180);f=Math.tan(f.rightDegrees*Math.PI/180);var l=2/(e+f),h=2/(n+d);a[0]=l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=0;a[7]=0;a[8]=-((e-f)*l*.5);a[9]=(n-d)*h*.5;a[10]=p/(g-p);a[11]=-1;a[12]=0;a[13]=0;a[14]=p*g/(g-p);a[15]=0;return a};k.ortho=function(a,f,g,p,n,d,e){var l=1/(f-g),h=1/(p-n),t=1/(d-e);a[0]=-2*l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*h;a[6]=0;a[7]=0;a[8]=0;a[9]=
0;a[10]=2*t;a[11]=0;a[12]=(f+g)*l;a[13]=(n+p)*h;a[14]=(e+d)*t;a[15]=1;return a};k.lookAt=function(a,f,g,p){var n=f[0],d=f[1];f=f[2];var e=p[0];var l=p[1];var h=p[2];var t=g[0];p=g[1];var r=g[2];if(Math.abs(n-t)<D.EPSILON&&Math.abs(d-p)<D.EPSILON&&Math.abs(f-r)<D.EPSILON)return k.identity(a);g=n-t;p=d-p;t=f-r;var q=1/Math.sqrt(g*g+p*p+t*t);g*=q;p*=q;t*=q;r=l*t-h*p;h=h*g-e*t;e=e*p-l*g;(q=Math.sqrt(r*r+h*h+e*e))?(q=1/q,r*=q,h*=q,e*=q):e=h=r=0;l=p*e-t*h;var v=t*r-g*e;var x=g*h-p*r;(q=Math.sqrt(l*l+v*
v+x*x))?(q=1/q,l*=q,v*=q,x*=q):x=v=l=0;a[0]=r;a[1]=l;a[2]=g;a[3]=0;a[4]=h;a[5]=v;a[6]=p;a[7]=0;a[8]=e;a[9]=x;a[10]=t;a[11]=0;a[12]=-(r*n+h*d+e*f);a[13]=-(l*n+v*d+x*f);a[14]=-(g*n+p*d+t*f);a[15]=1;return a};k.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};k.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],
2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};k.add=function(a,f,g){a[0]=f[0]+g[0];a[1]=f[1]+g[1];a[2]=f[2]+g[2];a[3]=f[3]+g[3];a[4]=f[4]+g[4];a[5]=f[5]+g[5];a[6]=f[6]+g[6];a[7]=f[7]+g[7];a[8]=f[8]+g[8];a[9]=f[9]+g[9];a[10]=f[10]+g[10];a[11]=f[11]+g[11];a[12]=f[12]+g[12];a[13]=f[13]+g[13];a[14]=f[14]+g[14];a[15]=f[15]+g[15];return a};
k.subtract=function(a,f,g){a[0]=f[0]-g[0];a[1]=f[1]-g[1];a[2]=f[2]-g[2];a[3]=f[3]-g[3];a[4]=f[4]-g[4];a[5]=f[5]-g[5];a[6]=f[6]-g[6];a[7]=f[7]-g[7];a[8]=f[8]-g[8];a[9]=f[9]-g[9];a[10]=f[10]-g[10];a[11]=f[11]-g[11];a[12]=f[12]-g[12];a[13]=f[13]-g[13];a[14]=f[14]-g[14];a[15]=f[15]-g[15];return a};k.sub=k.subtract;k.multiplyScalar=function(a,f,g){a[0]=f[0]*g;a[1]=f[1]*g;a[2]=f[2]*g;a[3]=f[3]*g;a[4]=f[4]*g;a[5]=f[5]*g;a[6]=f[6]*g;a[7]=f[7]*g;a[8]=f[8]*g;a[9]=f[9]*g;a[10]=f[10]*g;a[11]=f[11]*g;a[12]=f[12]*
g;a[13]=f[13]*g;a[14]=f[14]*g;a[15]=f[15]*g;return a};k.multiplyScalarAndAdd=function(a,f,g,p){a[0]=f[0]+g[0]*p;a[1]=f[1]+g[1]*p;a[2]=f[2]+g[2]*p;a[3]=f[3]+g[3]*p;a[4]=f[4]+g[4]*p;a[5]=f[5]+g[5]*p;a[6]=f[6]+g[6]*p;a[7]=f[7]+g[7]*p;a[8]=f[8]+g[8]*p;a[9]=f[9]+g[9]*p;a[10]=f[10]+g[10]*p;a[11]=f[11]+g[11]*p;a[12]=f[12]+g[12]*p;a[13]=f[13]+g[13]*p;a[14]=f[14]+g[14]*p;a[15]=f[15]+g[15]*p;return a};k.exactEquals=function(a,f){return a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]&&a[4]===f[4]&&a[5]===
f[5]&&a[6]===f[6]&&a[7]===f[7]&&a[8]===f[8]&&a[9]===f[9]&&a[10]===f[10]&&a[11]===f[11]&&a[12]===f[12]&&a[13]===f[13]&&a[14]===f[14]&&a[15]===f[15]};k.equals=function(a,f){var g=a[0],p=a[1],n=a[2],d=a[3],e=a[4],l=a[5],h=a[6],t=a[7],r=a[8],q=a[9],v=a[10],x=a[11],y=a[12],B=a[13],z=a[14],b=a[15],c=f[0],m=f[1],u=f[2],w=f[3],A=f[4],C=f[5],E=f[6],G=f[7],F=f[8],I=f[9],M=f[10],Y=f[11],R=f[12],S=f[13],O=f[14],L=f[15];return Math.abs(g-c)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(c))&&Math.abs(p-m)<=D.EPSILON*
Math.max(1,Math.abs(p),Math.abs(m))&&Math.abs(n-u)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(d-w)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(e-A)<=D.EPSILON*Math.max(1,Math.abs(e),Math.abs(A))&&Math.abs(l-C)<=D.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(h-E)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(t-G)<=D.EPSILON*Math.max(1,Math.abs(t),Math.abs(G))&&Math.abs(r-F)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(F))&&Math.abs(q-I)<=D.EPSILON*Math.max(1,
Math.abs(q),Math.abs(I))&&Math.abs(v-M)<=D.EPSILON*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(x-Y)<=D.EPSILON*Math.max(1,Math.abs(x),Math.abs(Y))&&Math.abs(y-R)<=D.EPSILON*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(B-S)<=D.EPSILON*Math.max(1,Math.abs(B),Math.abs(S))&&Math.abs(z-O)<=D.EPSILON*Math.max(1,Math.abs(z),Math.abs(O))&&Math.abs(b-L)<=D.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))};return k})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var D=
{EPSILON:1E-6};D.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;D.RANDOM=Math.random;D.ENABLE_SIMD=!1;D.SIMD_AVAILABLE=D.ARRAY_TYPE===Float32Array&&"SIMD"in this;D.USE_SIMD=D.ENABLE_SIMD&&D.SIMD_AVAILABLE;D.setMatrixArrayType=function(a){D.ARRAY_TYPE=a};var k=Math.PI/180;D.toRadian=function(a){return a*k};D.equals=function(a,f){return Math.abs(a-f)<=D.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))};return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require",
"exports"],function(D,k){function a(g,p){g%=p;return 0<=g?g:g+p}Object.defineProperty(k,"__esModule",{value:!0});k.C_INFINITY=Number.POSITIVE_INFINITY;k.C_PI=Math.PI;k.C_2PI=2*k.C_PI;k.C_PI_BY_2=k.C_PI/2;k.C_RAD_TO_256=128/k.C_PI;k.C_256_TO_RAD=k.C_PI/128;k.C_DEG_TO_256=256/360;k.C_DEG_TO_RAD=k.C_PI/180;k.C_SQRT2=1.414213562;k.C_SQRT2_INV=1/k.C_SQRT2;var f=1/Math.LN2;k.positiveMod=a;k.radToByte=function(g){return a(g*k.C_RAD_TO_256,256)};k.degToByte=function(g){return a(g*k.C_DEG_TO_256,256)};k.log2=
function(g){return Math.log(g)*f};k.sqr=function(g){return g*g};k.clamp=function(g,p,n){return Math.min(Math.max(g,p),n)};k.interpolate=function(g,p,n){return g*(1-n)+p*n};k.between=function(g,p,n){return g>=p&&g<=n||g>=n&&g<=p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(D,k,a,f,g,p,n,d,e,l){return function(){function h(){this._programRep=new Map;this.isInitialize=!1}h.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),
this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(t){return t.dispose()}),this._programRep.clear())};h.prototype.initialize=function(t){if(!this.isInitialize){var r=new l("label",["labelVS","labelFS"],[],n,t);r.addDefine("ID","ID",[!0,!0],"ID");r.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");r.addDefine("SDF","SDF",[!1,!1],"SDF");r.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");r.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");r.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");r.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");r.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");r.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");r.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");r.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");r.addDefine("PATTERN",
"PATTERN",[!1,!1],"PATTERN");r.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var q=new l("text",["textVS","textFS"],[],e,t);q.addDefine("ID","ID",[!0,!0],"ID");q.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");q.addDefine("SDF","SDF",[!1,!1],"SDF");q.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");q.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");q.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],
"VV_SIZE_FIELD_STOPS");q.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");q.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");q.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");q.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");q.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");q.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");q.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var v=new l("icon",["iconVS","iconFS"],
[],p,t);v.addDefine("ID","ID",[!0,!0],"ID");v.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");v.addDefine("SDF","SDF",[!0,!0],"SDF");v.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");v.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");v.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");v.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");v.addDefine("VV_COLOR",
"VV_COLOR",[!0,!1],"VV_COLOR");v.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");v.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");v.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");v.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");v.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var x=new l("fill",["fillVS","fillFS"],[],g,t);x.addDefine("ID","ID",[!0,!0],"ID");x.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");x.addDefine("SDF","SDF",
[!1,!1],"SDF");x.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");x.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");x.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");x.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");x.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");x.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");x.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");x.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");x.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");x.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");t=new l("line",["lineVS","lineFS"],[],d,t);t.addDefine("ID","ID",[!0,!0],"ID");t.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");t.addDefine("SDF","SDF",[!0,!0],"SDF");t.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");t.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");t.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");t.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");t.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");t.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");t.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");t.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");t.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");t.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=r;this._textShaderVariations=q;this._fillShaderVariations=x;this._iconShaderVariations=v;this._lineShaderVariations=t;this.isInitialize=!0}};h.prototype.getProgram=function(t,r,q){t|=r===a.WGLDrawPhase.HITTEST?8:0;t|=r===a.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[t])return this._programRep[t];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;
r=f.getMaterialVariations(t);switch(r.geometryType){case a.WGLGeometryType.MARKER:var v=this._iconShaderVariations.getProgram(r.variations,null,null,q);break;case a.WGLGeometryType.TEXT:v=this._textShaderVariations.getProgram(r.variations,null,null,q);break;case a.WGLGeometryType.LABEL:v=this._labelShaderVariations.getProgram(r.variations,null,null,q);break;case a.WGLGeometryType.FILL:v=this._fillShaderVariations.getProgram(r.variations,null,null,q);break;case a.WGLGeometryType.LINE:v=this._lineShaderVariations.getProgram(r.variations,
null,null,q)}v&&(this._programRep[t]=v);return v};return h}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(D,k,a,f,g){function p(d){var e=[];e[0]=d.sdf?!0:!1;e[1]=d.vvSizeMinMaxValue?!0:!1;e[2]=d.vvSizeScaleStops?!0:!1;e[3]=d.vvSizeFieldStops?!0:!1;e[4]=d.vvSizeUnitValue?!0:!1;e[5]=d.vvColor?!0:!1;e[6]=d.vvRotation?!0:!1;e[7]=d.vvOpacity?!0:!1;e[8]=d.visibility?!0:!1;e[9]=d.pattern?
!0:!1;e[10]=d.heatmap?!0:!1;return e.reduce(function(l,h,t){h&&(l|=1<<t+2);return l},0)}function n(d){if(d.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var e=p(d)<<3;return d.geometryType+e}Object.defineProperty(k,"__esModule",{value:!0});k.createTextMaterialInfo=function(d,e,l){var h=new f["default"],t=new g;t.geometryType=l;t.sdf=!0;t.pattern=!1;t.visibility=!1;t.heatmap=!1;h.texBindingInfo.push(new f.TexBindingInfo(2,d.page,"u_texture"));0===e?t.vvOpacity=t.vvSizeMinMaxValue=t.vvSizeScaleStops=
t.vvSizeFieldStops=t.vvSizeUnitValue=t.vvColor=t.vvRotation=!1:(t.vvOpacity=0!==(e&a.WGLVVFlag.OPACITY),t.vvSizeMinMaxValue=0!==(e&a.WGLVVFlag.SIZE_MINMAX_VALUE),t.vvSizeScaleStops=0!==(e&a.WGLVVFlag.SIZE_SCALE_STOPS),t.vvSizeFieldStops=0!==(e&a.WGLVVFlag.SIZE_FIELD_STOPS),t.vvSizeUnitValue=0!==(e&a.WGLVVFlag.SIZE_UNIT_VALUE),t.vvColor=0!==(e&a.WGLVVFlag.COLOR),t.vvRotation=0!==(e&a.WGLVVFlag.ROTATION));h.materialKey=n(t);h.materialKeyInfo=t;return h};k.createMaterialInfo=function(d,e,l){var h=new f["default"],
t=new g;t.geometryType=e;d?(d=d.spriteMosaicItem,t.sdf=d.sdf,t.pattern=!0,h.texBindingInfo.push(new f.TexBindingInfo(1,d.page,"u_texture"))):(t.sdf=!1,t.pattern=!1);0===l?t.vvOpacity=t.vvSizeMinMaxValue=t.vvSizeScaleStops=t.vvSizeFieldStops=t.vvSizeUnitValue=t.vvColor=t.vvRotation=!1:(t.vvOpacity=0!==(l&a.WGLVVFlag.OPACITY),t.vvSizeMinMaxValue=0!==(l&a.WGLVVFlag.SIZE_MINMAX_VALUE),t.vvSizeScaleStops=0!==(l&a.WGLVVFlag.SIZE_SCALE_STOPS),t.vvSizeFieldStops=0!==(l&a.WGLVVFlag.SIZE_FIELD_STOPS),t.vvSizeUnitValue=
0!==(l&a.WGLVVFlag.SIZE_UNIT_VALUE),t.vvColor=0!==(l&a.WGLVVFlag.COLOR),t.vvRotation=0!==(l&a.WGLVVFlag.ROTATION));t.visibility=!1;h.materialKey=n(t);h.materialKeyInfo=t;return h};k.getMaterialKey=n;k.getMaterialVariations=function(d){var e=d&7;d>>=3;return{geometryType:e,variations:[0!==(d&1),0!==(d&2),0!==(d&4),0!==(d&8),0!==(d&16),0!==(d&32),0!==(d&64),0!==(d&128),0!==(d&256),0!==(d&512),0!==(d&1024),0!==(d&2048),0!==(d&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(D,k,a,f,g,p,n){Object.defineProperty(k,"__esModule",{value:!0});var d=function(){function l(h,t,r){this.unit=h;this.pageId=t;this.semantic=r}l.prototype.clone=function(){return new l(this.unit,this.pageId,this.semantic)};l.prototype.serialize=function(h){h.writeInt32(this.unit);h.writeInt32(this.pageId);return h};l.deserialize=function(h){var t=h.readInt32();h=h.readInt32();return new l(t,h,"u_texture")};return l}();k.TexBindingInfo=d;var e=function(){function l(h,t){this.name=h;this.value=
t}l.prototype.clone=function(){return new l(this.name,this.value)};l.prototype.serialize=function(h){h.writeInt32(this.value);return h};l.deserialize=function(h){h=h.readInt32();return new l("u_my_param",h)};return l}();k.MaterialParam=e;D=function(){function l(){this.texBindingInfo=[];this.materialParams=[]}l.fromSprite=function(h,t,r){var q=new l,v=new p;v.geometryType=t;h?(v.sdf=h.sdf,v.pattern=!0,q.texBindingInfo.push(new d(1,h.page,"u_texture"))):(v.sdf=!1,v.pattern=!1);0===r?v.vvOpacity=v.vvSizeMinMaxValue=
v.vvSizeScaleStops=v.vvSizeFieldStops=v.vvSizeUnitValue=v.vvColor=v.vvRotation=!1:(v.vvOpacity=0!==(r&a.WGLVVFlag.OPACITY),v.vvSizeMinMaxValue=0!==(r&a.WGLVVFlag.SIZE_MINMAX_VALUE),v.vvSizeScaleStops=0!==(r&a.WGLVVFlag.SIZE_SCALE_STOPS),v.vvSizeFieldStops=0!==(r&a.WGLVVFlag.SIZE_FIELD_STOPS),v.vvSizeUnitValue=0!==(r&a.WGLVVFlag.SIZE_UNIT_VALUE),v.vvColor=0!==(r&a.WGLVVFlag.COLOR),v.vvRotation=0!==(r&a.WGLVVFlag.ROTATION));v.visibility=!1;q.materialKey=f.getMaterialKey(v);q.materialKeyInfo=v;return q};
l.fromGlyph=function(h,t,r){var q=new l,v=new p;v.geometryType=t;v.sdf=!0;v.pattern=!1;v.visibility=!1;v.heatmap=!1;q.texBindingInfo.push(new d(2,h.page,"u_texture"));0===r?v.vvOpacity=v.vvSizeMinMaxValue=v.vvSizeScaleStops=v.vvSizeFieldStops=v.vvSizeUnitValue=v.vvColor=v.vvRotation=!1:(v.vvOpacity=0!==(r&a.WGLVVFlag.OPACITY),v.vvSizeMinMaxValue=0!==(r&a.WGLVVFlag.SIZE_MINMAX_VALUE),v.vvSizeScaleStops=0!==(r&a.WGLVVFlag.SIZE_SCALE_STOPS),v.vvSizeFieldStops=0!==(r&a.WGLVVFlag.SIZE_FIELD_STOPS),v.vvSizeUnitValue=
0!==(r&a.WGLVVFlag.SIZE_UNIT_VALUE),v.vvColor=0!==(r&a.WGLVVFlag.COLOR),v.vvRotation=0!==(r&a.WGLVVFlag.ROTATION));q.materialKey=f.getMaterialKey(v);q.materialKeyInfo=v;return q};l.prototype.copy=function(h){this.materialParams=h.materialParams.map(function(t){return t.clone()});this.texBindingInfo=h.texBindingInfo.map(function(t){return t.clone()});h.materialKeyInfo&&(this.materialKeyInfo=new p,this.materialKeyInfo.copy(h.materialKeyInfo));this.materialKey=h.materialKey};l.prototype.serialize=function(h){h.writeInt32(this.materialKey);
n.serializeList(h,this.texBindingInfo);n.serializeList(h,this.materialParams);return h};l.deserialize=function(h){var t=new l;t.materialKey=h.readInt32();t.texBindingInfo=n.deserializeList(h,d);t.materialParams=n.deserializeList(h,e);t.materialKeyInfo=new p;g(t.materialKeyInfo,t.materialKey);return t};return l}();k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(D,k){return function(a,f){a.geometryType=
f&7;f>>=3;a.sdf=0!==(f&4);a.vvSizeMinMaxValue=0!==(f&8);a.vvSizeScaleStops=0!==(f&16);a.vvSizeFieldStops=0!==(f&32);a.vvSizeUnitValue=0!==(f&64);a.vvColor=0!==(f&128);a.vvRotation=0!==(f&256);a.vvOpacity=0!==(f&512);a.visibility=0!==(f&1024);a.pattern=0!==(f&2048);a.heatmap=0!==(f&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(D,k){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(f){this.geometryType=f.geometryType;this.sdf=f.sdf;this.vvSizeMinMaxValue=f.vvSizeMinMaxValue;this.vvSizeScaleStops=f.vvSizeScaleStops;this.vvSizeFieldStops=f.vvSizeFieldStops;this.vvSizeUnitValue=f.vvSizeUnitValue;this.vvColor=f.vvColor;this.vvRotation=f.vvRotation;this.vvOpacity=f.vvOpacity;this.visibility=f.visibility;this.pattern=f.pattern;
this.heatmap=f.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.serializeList=function(a,f){if(null===f)a.writeInt32(0);else{a.writeInt32(f.length);for(var g=0;g<f.length;g++)f[g].serialize(a);return a}};k.deserializeList=function(a,f,g){var p=a.readInt32();p=Array(p);for(var n=0;n<p.length;n++)p[n]=f.deserialize(a,g);return p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(D,k,a,f){D=new f;f.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require","exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(D,k,a,f){D=new f;f.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml",
"../../../../webgl/ShaderSnippets"],function(D,k,a,f){D=new f;f.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml","../../../../webgl/ShaderSnippets"],function(D,k,a,f){D=new f;f.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(D,
k,a,f){D=new f;f.parse(a,D);return D})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(D,k,a,f,g){function p(n){return n.reduce(function(d,e,l){e&&(d|=1<<l);return d},0)}return function(){function n(d,e,l,h,t,r){"string"===typeof d?this._initParams(d,e,l,h,t,r):this._initObject({programNamePrefix:d.programNamePrefix,shaderSnippetPrefixes:d.shaderSnippetPrefixes,baseDefines:d.baseDefines,snippets:d.snippets,
rctx:d.rctx,vertexAttribLocs:d.vertexAttribLocs})}n.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(d){return d.dispose()}),this._programCache.clear())};n.prototype._initObject=function(d){this._initParams(d.programNamePrefix,d.shaderSnippetPrefixes,d.baseDefines,d.snippets,d.rctx,d.vertexAttribLocs)};n.prototype._initParams=function(d,e,l,h,t,r){this._defaultSnippets=h;this._defaultRctx=t;this._defaultVertexAttribLocs=r;this._programCache=new Map;this._variationInfo=
new Map;this._shaderSourceVariator=new f(d,e,l)};n.prototype.addDefine=function(d,e,l,h){this._shaderSourceVariator.addDefine(d,e,l,h)};n.prototype.addBinaryShaderSnippetSuffix=function(d,e,l){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(d,e,l)};n.prototype.addNaryShaderSnippetSuffix=function(d,e){this._shaderSourceVariator.addNaryShaderSnippetSuffix(d,e)};n.prototype.getProgram=function(d,e,l,h){e=e||this._defaultSnippets;l=l||this._defaultRctx;h=h||this._defaultVertexAttribLocs;if(!e)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");
if(!l)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!h)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");var t=p(d);if(this._programCache.has(t))return this._programCache.get(t);d=this._shaderSourceVariator.getShaderVariation(d);var r=d.shaderSnippetNames[0];var q=e[r];g.assert(null!=q,"shader snippet '"+r+"' does not exist");r=d.shaderSnippetNames[1];e=e[r];g.assert(null!=e,"shader snippet '"+
r+"' does not exist");l=new a(l,q,e,h,d.defines);this._programCache.set(t,l);return l};n.prototype.getProgramByKey=function(d){if(this._programCache.has(d))return this._programCache.get(d);if(!this._variationInfo[d])return null;var e=this._variationInfo[d],l=this._defaultSnippets,h=this._defaultRctx,t=this._defaultVertexAttribLocs;var r=e.shaderSnippetNames[0];var q=l[r];g.assert(null!=q,"shader snippet '"+r+"' does not exist");r=e.shaderSnippetNames[1];l=l[r];g.assert(null!=l,"shader snippet '"+
r+"' does not exist");e=new a(h,q,l,t,e.defines);this._programCache.set(d,e);return e};n.prototype.getProgramInfo=function(d){var e=this._shaderSourceVariator.getShaderVariation(d);d=p(d);this._variationInfo[d]||(this._variationInfo[d]=e);return{name:e.programName,key:d}};return n}()})},"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(D,k,a,f){return function(){function g(p,n,d){if("string"===typeof p)var e=p;else e=
p.programNamePrefix,n=p.shaderSnippetPrefixes,d=p.baseDefines;f.assert(n,"you must specify shader snippet prefixes");f.assert(2===n.length,"you must specify shader snippet prefixes for vertex and fragment shaders");d&&0!==d.length||(d=[]);this.programNamePrefix=e;this.shaderSnippetPrefixes=n;this.baseDefines=d;this.variables=[];this.sealed=!1}g.prototype.addDefine=function(p,n,d,e){f.assert(!this.sealed,"you cannot add another variable after the first program has been generated");f.assert(p,"you must specify a program name suffix");
this.variables.push({programNameSuffixes:["",p],shaderNameSuffixes:e||p,defineStr:n,affectsShaderTypes:d||[!0,!0]})};g.prototype.addBinaryShaderSnippetSuffix=function(p,n,d){f.assert(!this.sealed,"you cannot add another variable after the first program has been generated");f.assert(p,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",p],shaderSnippetSuffixes:["",n],affectsShaderTypes:d||[!0,!0]})};g.prototype.addNaryShaderSnippetSuffix=function(p,n){f.assert(!this.sealed,
"you cannot add another variable after the first program has been generated");var d=p.map(function(e){f.assert(null!=e.value,"value must always be specified");return e.value});this.variables.push({values:d,programNameSuffixes:p.map(function(e,l){return null!=e.programNameSuffix?e.programNameSuffix:d[l]}),shaderSnippetSuffixes:p.map(function(e,l){return null!=e.shaderSnippetSuffix?e.shaderSnippetSuffix:d[l]}),affectsShaderTypes:n||[!0,!0]})};g.prototype.getShaderVariation=function(p){f.assert(p.length===
this.variables.length,"you must specify a value for each variable");for(var n=this.programNamePrefix,d=a.clone(this.shaderSnippetPrefixes),e=a.clone(this.shaderSnippetPrefixes),l=a.clone(this.baseDefines),h=0;h<this.variables.length;h++){var t=this.variables[h],r=p[h],q=void 0;t.values?(q=t.values.indexOf(r),f.assert(0<=q,"invalid value "+r+" for variable "+h)):q=r?1:0;n+=t.programNameSuffixes[q];for(r=0;2>r;r++)t.affectsShaderTypes[r]&&(t.shaderSnippetSuffixes&&(d[r]+=t.shaderSnippetSuffixes[q],
e[r]+=t.shaderSnippetSuffixes[q]),t.defineStr&&q&&(l.push(t.defineStr),e[r]+=t.shaderNameSuffixes))}return{programName:n,shaderSnippetNames:d,shaderNames:e,defines:l}};return g}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(D,k,a,f,g,p,n,d,e,l){function h(u){return u.map(function(w){return w.name})}
function t(u){for(var w={},A=0;A<u.length;A++){var C=u[A];w[C.name]=C.strideInBytes}return w}function r(u,w){switch(u){case e.WGLGeometryType.MARKER:return w?k.C_ICON_VERTEX_NAMES_VV:k.C_ICON_VERTEX_NAMES;case e.WGLGeometryType.FILL:return w?k.C_FILL_VERTEX_NAMES_VV:k.C_FILL_VERTEX_NAMES;case e.WGLGeometryType.LINE:return w?k.C_LINE_VERTEX_NAMES_VV:k.C_LINE_VERTEX_NAMES;case e.WGLGeometryType.TEXT:return w?k.C_TEXT_VERTEX_NAMES_VV:k.C_TEXT_VERTEX_NAMES;case e.WGLGeometryType.LABEL:return k.C_LABEL_VERTEX_NAMES}return null}
function q(u){switch(u){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return u}function v(u){if(u=q(u.type)){switch(u){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function x(u){if(u=q(u.type)){switch(u){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}
function y(u){if(u=q(u.type)){switch(u){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}function B(u){if(u=q(u.type)){switch(u){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function z(u){return u&&u.length||0}function b(u){return"string"===typeof u}Object.defineProperty(k,"__esModule",{value:!0});var c=g.getLogger("esri.views.2d.engine.webgl.Utils");k.C_HITTEST_SEARCH_SIZE=4;k.C_VBO_GEOMETRY="geometry";k.C_VBO_PERINSTANCE="per_instance";k.C_VBO_PERINSTANCE_VV=
"per_instance_vv";k.C_VBO_VISIBILITY="visibility";k.C_VBO_VISIBILITY_RANGE="visibilityRange";k.C_ICON_VERTEX_DEF=[{name:k.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];k.C_ICON_VERTEX_DEF_VV=[{name:k.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];k.C_ICON_HEATMAP=[{name:k.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];k.C_FILL_VERTEX_DEF=[{name:k.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];k.C_FILL_VERTEX_DEF_VV=[{name:k.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];k.C_LINE_VERTEX_DEF=[{name:k.C_VBO_GEOMETRY,
strideInBytes:32,divisor:0}];k.C_LINE_VERTEX_DEF_VV=[{name:k.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];k.C_TEXT_VERTEX_DEF=[{name:k.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:k.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];k.C_TEXT_VERTEX_DEF_VV=[{name:k.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:k.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];k.C_LABEL_VERTEX_DEF=[{name:k.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:k.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:k.C_VBO_VISIBILITY_RANGE,
strideInBytes:2,divisor:0}];k.C_ICON_VERTEX_NAMES=h(k.C_ICON_VERTEX_DEF);k.C_ICON_VERTEX_NAMES_VV=h(k.C_ICON_VERTEX_DEF_VV);k.C_FILL_VERTEX_NAMES=h(k.C_FILL_VERTEX_DEF);k.C_FILL_VERTEX_NAMES_VV=h(k.C_FILL_VERTEX_DEF_VV);k.C_LINE_VERTEX_NAMES=h(k.C_LINE_VERTEX_DEF);k.C_LINE_VERTEX_NAMES_VV=h(k.C_LINE_VERTEX_DEF_VV);k.C_TEXT_VERTEX_NAMES=h(k.C_TEXT_VERTEX_DEF);k.C_TEXT_VERTEX_NAMES_VV=h(k.C_TEXT_VERTEX_DEF_VV);k.C_LABEL_VERTEX_NAMES=h(k.C_LABEL_VERTEX_DEF);k.C_ICON_STRIDE_SPEC=t(k.C_ICON_VERTEX_DEF);
k.C_ICON_STRIDE_SPEC_VV=t(k.C_ICON_VERTEX_DEF_VV);k.C_ICON_STRIDE_SPEC_HEATMAP=t(k.C_ICON_HEATMAP);k.C_FILL_STRIDE_SPEC=t(k.C_FILL_VERTEX_DEF);k.C_FILL_STRIDE_SPEC_VV=t(k.C_FILL_VERTEX_DEF_VV);k.C_LINE_STRIDE_SPEC=t(k.C_LINE_VERTEX_DEF);k.C_LINE_STRIDE_SPEC_VV=t(k.C_LINE_VERTEX_DEF_VV);k.C_TEXT_STRIDE_SPEC=t(k.C_TEXT_VERTEX_DEF);k.C_TEXT_STRIDE_SPEC_VV=t(k.C_TEXT_VERTEX_DEF_VV);k.C_LABEL_STRIDE_SPEC=t(k.C_LABEL_VERTEX_DEF);k.getStrides=function(u,w,A){void 0===A&&(A=!1);switch(u){case e.WGLGeometryType.MARKER:return w?
k.C_ICON_STRIDE_SPEC_VV:A?k.C_ICON_STRIDE_SPEC_HEATMAP:k.C_ICON_STRIDE_SPEC;case e.WGLGeometryType.FILL:return w?k.C_FILL_STRIDE_SPEC_VV:k.C_FILL_STRIDE_SPEC;case e.WGLGeometryType.LINE:return w?k.C_LINE_STRIDE_SPEC_VV:k.C_LINE_STRIDE_SPEC;case e.WGLGeometryType.TEXT:return w?k.C_TEXT_STRIDE_SPEC_VV:k.C_TEXT_STRIDE_SPEC;case e.WGLGeometryType.LABEL:return k.C_LABEL_STRIDE_SPEC}return null};k.getNamedBuffers=r;k.getSymbolGeometryType=function(u){return v(u)?e.WGLGeometryType.MARKER:y(u)?e.WGLGeometryType.LINE:
x(u)?e.WGLGeometryType.FILL:B(u)?e.WGLGeometryType.TEXT:e.WGLGeometryType.UNKNOWN};k.normalizeSymbolType=q;k.isMarkerSymbol=v;k.isFillSymbol=x;k.isLineSymbol=y;k.isPictureSymbol=function(u){if(u=q(u.type))switch(u){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};k.isTextSymbol=B;k.getTextProperties=function(u){return l.TextProperties.pool.acquire(u.color?d.copyAndPremultiply(u.color):[255,255,255,255],u.haloColor?d.copyAndPremultiply(u.haloColor):[255,255,255,255],
p.pt2px(u.haloSize),p.pt2px(u.font.size),u.angle*Math.PI/180,u.xoffset/u.font.size,u.yoffset/u.font.size,"left"===u.horizontalAlignment?0:"right"===u.horizontalAlignment?1:.5,"top"===u.verticalAlignment?0:"bottom"===u.verticalAlignment?1:.5)};k.isSameUniformValue=function(u,w){return!1};k.isSameMaterialInfo=function(u,w){if(u.materialKey!==w.materialKey||z(u.texBindingInfo)!==z(w.texBindingInfo)||z(u.materialParams)!==z(w.materialParams))return!1;for(var A=u.texBindingInfo.length,C=0;C<A;++C){var E=
u.texBindingInfo[C],G=w.texBindingInfo[C];if(E.unit!==G.unit||E.pageId!==G.pageId||E.semantic!==G.semantic)return!1}A=u.materialParams.length;for(C=0;C<A;)return!1;return!0};k.serializeString=function(u,w,A){for(var C=0,E=u.length,G=0;G<E;++G)w&&(w[A+C]=u.charCodeAt(G)),++C;w&&(w[A+C]=0);++C;return C};k.deserializeString=function(u,w,A){var C=0;u.s="";for(var E=!0;E;){var G=w[A+C];++C;0!==G?u.s+=String.fromCharCode(G):E=!1}return C};k.isDefined=function(u){return null!==u&&void 0!==u};k.isNumber=
function(u){return"number"===typeof u};k.isString=b;k.isStringOrNull=function(u){return null==u||b(u)};k.lerp=function(u,w,A){return u+(w-u)*A};D=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(w,A){this._arr.push(A)};u.prototype.getKeys=function(w){this._arr.length=0;w&&w.forEach(this._push);return this._arr};return u}();k.KeysGetter=D;D=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(w,A){this._arr.push(w)};
u.prototype.getValues=function(w){this._arr.length=0;w&&w.forEach(this._push);return this._arr};return u}();k.ValuesGetter=D;k.getCapType=function(u){switch(u){case "butt":return e.CapType.BUTT;case "round":return e.CapType.ROUND;case "square":return e.CapType.SQUARE;default:return c.error("Cannot interpret unknown cap: "+u),e.CapType.UNKNOWN}};k.getJoinType=function(u){switch(u){case "miter":return e.JoinType.MITER;case "bevel":return e.JoinType.BEVEL;case "round":return e.JoinType.ROUND;default:return c.error("Cannot interpret unknown join: "+
u),e.JoinType.UNKNOWN}};k.getVVType=function(u){switch(u){case "opacity":return e.VVType.OPACITY;case "color":return e.VVType.COLOR;case "rotation":return e.VVType.ROTATION;case "size":return e.VVType.SIZE;default:return c.error("Cannot interpret unknown vv: "+u),null}};k.createArcadeFunction=function(u,w){var A=u.spatialReference,C=u.layer,E=n.createFunction(u.valueExpression),G=new f;return function(F,I){G.repurposeFromGraphicLikeObject(F.geometry,F.attributes,C);var M=I&&new a({viewingMode:I.viewingMode,
scale:I.scale});M=n.executeFunction(E,{vars:{$feature:G,$view:M||{}},spatialReference:A});return w?w(M):M}};k.copyMeshData=function(u,w,A,C,E,G,F){for(var I in G){var M=G[I].stride,Y=G[I].data,R=A[I].data,S=M*E.vertexCount/4,O=M*u/4,L=M*E.vertexFrom/4;for(M=0;M<S;++M)R[M+O]=Y[M+L]}A=E.indexCount;for(M=0;M<A;++M)C[M+w]=F[M+E.indexFrom]-E.vertexFrom+u};k.C_VBO_INFO=(m={},m[k.C_VBO_GEOMETRY]=35044,m[k.C_VBO_VISIBILITY]=35044,m[k.C_VBO_VISIBILITY_RANGE]=35048,m);k.createGeometryData=function(u,w,A){for(var C=
[],E=0;5>E;++E){for(var G={},F=0,I=r(E,u);F<I.length;F++){var M=I[F];G[M]={data:A(E,M)}}C.push({data:w(E),buffers:G})}return C};var m})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(D,k,a){return a})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),function(D,k,a,f,g,p,n){function d(l,h){void 0===
h&&(h=!1);if(null===l||void 0===l)return null;if(p.isNumber(l))return p.toNumber(l);if(p.isBoolean(l))return p.toBoolean(l);if(p.isString(l))return p.toString(l);if(p.isDate(l))return p.toDate(l);if(p.isArray(l)){for(var t=[],r=0;r<l.length;r++)t.push(d(l[r],h));return t}r=new e;r.immutable=!1;for(var q=0,v=Object.keys(l);q<v.length;q++){var x=v[q];t=l[x];void 0!==t&&r.setField(x,d(t,h))}r.immutable=h;return r}var e=function(){function l(h){this.declaredClass="esri.arcade.Dictionary";this.attributes=
null;this.plain=!1;this.immutable=!0;this.attributes=h instanceof l?h.attributes:void 0===h?{}:null===h?{}:h}l.prototype.field=function(h){var t=h.toLowerCase(),r=this.attributes[h];if(void 0!==r)return r;for(var q in this.attributes)if(q.toLowerCase()===t)return this.attributes[q];throw Error("Field not Found : "+h);};l.prototype.setField=function(h,t){if(this.immutable)throw Error("Dictionary is Immutable");var r=h.toLowerCase();if(void 0===this.attributes[h])for(var q in this.attributes)if(q.toLowerCase()===
r){this.attributes[q]=t;return}this.attributes[h]=t};l.prototype.hasField=function(h){var t=h.toLowerCase();if(void 0!==this.attributes[h])return!0;for(var r in this.attributes)if(r.toLowerCase()===t)return!0;return!1};l.prototype.keys=function(){var h=[],t;for(t in this.attributes)h.push(t);return h=h.sort()};l.prototype.castToText=function(){var h="",t;for(t in this.attributes){""!==h&&(h+=",");var r=this.attributes[t];null==r?h+=JSON.stringify(t)+":null":p.isBoolean(r)||p.isNumber(r)||p.isString(r)?
h+=JSON.stringify(t)+":"+JSON.stringify(r):r instanceof n?h+=JSON.stringify(t)+":"+p.toStringExplicit(r):r instanceof g?h+=JSON.stringify(t)+":"+p.toStringExplicit(r):r instanceof Array?h+=JSON.stringify(t)+":"+p.toStringExplicit(r):r instanceof Date?h+=JSON.stringify(t)+":"+JSON.stringify(r):null!==r&&"object"===typeof r&&void 0!==r.castToText&&(h+=JSON.stringify(t)+":"+r.castToText())}return"{"+h+"}"};l.convertObjectToArcadeDictionary=function(h,t){void 0===t&&(t=!0);var r=new l;r.immutable=!1;
for(var q in h){var v=h[q];void 0!==v&&r.setField(q.toString(),d(v))}r.immutable=t;return r};l.convertJsonToArcade=function(h,t){void 0===t&&(t=!1);return d(h,t)};l.prototype.castAsJson=function(h){void 0===h&&(h=null);var t={};for(q in this.attributes){var r=this.attributes[q];if(void 0!==r){if(null===h||void 0===h?0:h.keyTranslate)var q=h.keyTranslate(q);t[q]=p.castAsJson(r,h)}}return t};l.prototype.castDictionaryValueAsJsonAsync=function(h,t,r,q,v){void 0===q&&(q=null);return a(this,void 0,void 0,
function(){var x;return f(this,function(y){switch(y.label){case 0:return[4,p.castAsJsonAsync(r,q,v)];case 1:return x=y.sent(),h[t]=x,[2,x]}})})};l.prototype.castAsJsonAsync=function(h,t){void 0===h&&(h=null);void 0===t&&(t=null);return a(this,void 0,void 0,function(){var r,q,v,x;return f(this,function(y){switch(y.label){case 0:r={};q=[];for(v in this.attributes){x=this.attributes[v];if(null===t||void 0===t?0:t.keyTranslate)v=t.keyTranslate(v);void 0!==x&&(p.isSimpleType(x)||x instanceof n||x instanceof
Date?r[v]=p.castAsJson(x,t):q.push(this.castDictionaryValueAsJsonAsync(r,v,x,h,t)))}return 0<q.length?[4,Promise.all(q)]:[3,2];case 1:y.sent(),y.label=2;case 2:return[2,r]}})})};return l}();return e})},"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(D,k,a,f){function g(p){return p instanceof a?p:new a(function(n){n(p)})}return new (a||(a=Promise))(function(p,n){function d(h){try{l(f.next(h))}catch(t){n(t)}}function e(h){try{l(f["throw"](h))}catch(t){n(t)}}
function l(h){h.done?p(h.value):g(h.value).then(d,e)}l((f=f.apply(D,k||[])).next())})}}()})},"esri/arcade/polyfill/tsSupport/generator":function(){define([],function(){return function(){return function(D,k){function a(l){return function(h){return f([l,h])}}function f(l){if(p)throw new TypeError("Generator is already executing.");for(;g;)try{if(p=1,n&&(d=l[0]&2?n["return"]:l[0]?n["throw"]||((d=n["return"])&&d.call(n),0):n.next)&&!(d=d.call(n,l[1])).done)return d;if(n=0,d)l=[l[0]&2,d.value];switch(l[0]){case 0:case 1:d=
l;break;case 4:return g.label++,{value:l[1],done:!1};case 5:g.label++;n=l[1];l=[0];continue;case 7:l=g.ops.pop();g.trys.pop();continue;default:if(!(d=g.trys,d=0<d.length&&d[d.length-1])&&(6===l[0]||2===l[0])){g=0;continue}if(3===l[0]&&(!d||l[1]>d[0]&&l[1]<d[3]))g.label=l[1];else if(6===l[0]&&g.label<d[1])g.label=d[1],d=l;else if(d&&g.label<d[2])g.label=d[2],g.ops.push(l);else{d[2]&&g.ops.pop();g.trys.pop();continue}}l=k.call(D,g)}catch(h){l=[6,h],n=0}finally{p=d=0}if(l[0]&5)throw l[1];return{value:l[0]?
l[1]:void 0,done:!0}}var g={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},p,n,d,e;return e={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e}}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(D,k){return function(){function a(f){void 0===f&&(f=[]);this._elements=f}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(f){return this._elements[f]};
a.prototype.toArray=function(){for(var f=[],g=0;g<this.length();g++)f.push(this.get(g));return f};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b){function c(Z,ka,qa){return""===ka||null===ka||void 0===ka||ka===qa||ka===qa?Z:Z=Z.split(ka).join(qa)}function m(Z){return Z instanceof Ca||Z instanceof n||Z instanceof xa}function u(Z){return w(Z)||C(Z)||F(Z)||A(Z)||null===Z||Z===k.voidOperation||"number"===typeof Z?!0:!1}function w(Z){return"string"===typeof Z||Z instanceof String}function A(Z){return"boolean"===typeof Z}function C(Z){return"number"===typeof Z}function E(Z){return Z instanceof Array}
function G(Z){return Z instanceof d}function F(Z){return Z instanceof Date}function I(Z,ka){if(!1===isNaN(Z)){if(void 0===ka||null===ka||""===ka)return Z.toString();ka=c(ka,"\u2030","");ka=c(ka,"\u00a4","");return B.format(Z,{pattern:ka})}return Z.toString()}function M(Z,ka){var qa=y.DateTime.fromJSDate(Z);return void 0===ka||null===ka||""===ka?qa.toISO({suppressMilliseconds:!0}):qa.toFormat(Y(ka),{locale:z.locale,numberingSystem:"latn"})}function Y(Z){Z=Z.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");
var ka="",qa=0;for(Z=Z.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);qa<Z.length;qa++){var ha=Z[qa];switch(ha){case "D":ka+="d";break;case "DD":ka+="dd";break;case "DDD":ka+="o";break;case "d":ka+="c";break;case "ddd":ka+="ccc";break;case "dddd":ka+="cccc";break;case "M":ka+="L";break;case "MM":ka+="LL";break;case "MMM":ka+="LLL";break;case "MMMM":ka+=
"LLLL";break;case "YY":ka+="yy";break;case "Y":case "YYYY":ka+="yyyy";break;case "Q":ka+="q";break;case "Z":ka+="ZZ";break;case "ZZ":ka+="ZZZ";break;case "S":ka+="'S'";break;case "SS":ka+="'SS'";break;case "SSS":ka+="u";break;case "A":case "a":ka+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ka+=ha;break;default:ka=2<=ha.length&&"["===ha.slice(0,1)&&"]"===ha.slice(-1)?ka+("'"+ha.slice(1,-1)+"'"):ka+("'"+ha+"'")}}return ka}function R(Z,ka,
qa){switch(qa){case "\x3e":return Z>ka;case "\x3c":return Z<ka;case "\x3e\x3d":return Z>=ka;case "\x3c\x3d":return Z<=ka}return!1}function S(Z,ka){if(Z===ka||null===Z&&ka===k.voidOperation||null===ka&&Z===k.voidOperation)return!0;if(F(Z)&&F(ka))return Z.getTime()===ka.getTime();if(Z instanceof e||Z instanceof l)return Z.equalityTest(ka);if(Z instanceof q&&ka instanceof q){var qa=Z.getCacheValue("_arcadeCacheId"),ha=ka.getCacheValue("_arcadeCacheId");if(void 0!==qa&&null!==qa)return qa===ha}return void 0!==
Z&&void 0!==ka&&null!==Z&&null!==ka&&"object"===typeof Z&&"object"===typeof ka&&(Z._arcadeCacheId===ka._arcadeCacheId&&void 0!==Z._arcadeCacheId&&null!==Z._arcadeCacheId||Z._underlyingGraphic===ka._underlyingGraphic&&void 0!==Z._underlyingGraphic&&null!==Z._underlyingGraphic)?!0:!1}function O(Z,ka){if(w(Z))return Z;if(null===Z)return"";if(C(Z))return I(Z,ka);if(A(Z))return Z.toString();if(F(Z))return M(Z,ka);if(Z instanceof t)return JSON.stringify(Z.toJson());if(E(Z)){for(var qa=[],ha=0;ha<Z.length;ha++)qa[ha]=
P(Z[ha]);return"["+qa.join(",")+"]"}if(Z instanceof d){qa=[];for(ha=0;ha<Z.length();ha++)qa[ha]=P(Z.get(ha));return"["+qa.join(",")+"]"}return null!==Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():m(Z)?"object, Function":""}function L(Z,ka){if(w(Z))return Z;if(null===Z)return"";if(C(Z))return I(Z,ka);if(A(Z))return Z.toString();if(F(Z))return M(Z,ka);if(Z instanceof t)return Z instanceof h?'{"xmin":'+Z.xmin.toString()+',"ymin":'+Z.ymin.toString()+","+(Z.hasZ?'"zmin":'+Z.zmin.toString()+
",":"")+(Z.hasM?'"mmin":'+Z.mmin.toString()+",":"")+'"xmax":'+Z.xmax.toString()+',"ymax":'+Z.ymax.toString()+","+(Z.hasZ?'"zmax":'+Z.zmax.toString()+",":"")+(Z.hasM?'"mmax":'+Z.mmax.toString()+",":"")+'"spatialReference":'+ia(Z.spatialReference)+"}":ia(Z.toJson(),function(ea,na){return ea.key===na.key?0:"spatialReference"===ea.key?1:"spatialReference"===na.key||ea.key<na.key?-1:ea.key>na.key?1:0});if(E(Z)){for(var qa=[],ha=0;ha<Z.length;ha++)qa[ha]=P(Z[ha]);return"["+qa.join(",")+"]"}if(Z instanceof
d){qa=[];for(ha=0;ha<Z.length();ha++)qa[ha]=P(Z.get(ha));return"["+qa.join(",")+"]"}return null!==Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():m(Z)?"object, Function":""}function P(Z){return null===Z?"null":A(Z)||C(Z)||w(Z)?JSON.stringify(Z):Z instanceof t||Z instanceof d||Z instanceof Array?L(Z):Z instanceof Date?JSON.stringify(M(Z,"")):null!==Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():"null"}function X(Z,ka){return C(Z)?Z:null===Z||""===Z?0:F(Z)?NaN:A(Z)?Z?1:0:
E(Z)||""===Z||void 0===Z?NaN:void 0!==ka&&w(Z)?(ka=c(ka,"\u2030",""),ka=c(ka,"\u00a4",""),B.parse(Z,{pattern:ka})):Z===k.voidOperation?0:Number(Z)}function Q(Z){var ka=/ (\d\d)/,qa=y.DateTime.fromISO(Z);return qa.isValid||ka.test(Z)&&(Z=Z.replace(ka,"T$1"),qa=y.DateTime.fromISO(Z),qa.isValid)?qa:null}function K(Z,ka){if(!Z||!Z.domain)return ka;var qa=null;if("string"===Z.field.type||"esriFieldTypeString"===Z.field.type)ka=O(ka);else{if(null===ka||void 0===ka)return null;if(""===ka)return ka;ka=X(ka)}for(var ha=
0;ha<Z.domain.codedValues.length;ha++){var ea=Z.domain.codedValues[ha];ea.code===ka&&(qa=ea)}return null===qa?ka:qa.name}function U(Z,ka){if(!Z||!Z.domain)return ka;var qa=null;ka=O(ka);for(var ha=0;ha<Z.domain.codedValues.length;ha++){var ea=Z.domain.codedValues[ha];ea.name===ka&&(qa=ea)}return null===qa?ka:qa.code}function da(Z,ka,qa,ha){void 0===qa&&(qa=null);void 0===ha&&(ha=null);if(!ka||!ka.fields)return null;for(var ea=null,na=0;na<ka.fields.length;na++){var N=ka.fields[na];N.name.toLowerCase()===
Z.toString().toLowerCase()&&(ea=N)}if(null===ea)throw Error("Field not found");var V,ca;null===ha&&qa&&ka.typeIdField&&(ha=qa.hasField(ka.typeIdField)?qa.field(ka.typeIdField):null);null!==ha&&void 0!==ha&&ka.types.some(function(J){return J.id===ha?((V=J.domains&&J.domains[ea.name])&&"inherited"===V.type&&(V=fa(ea.name,ka),ca=!0),!0):!1});ca||V||(V=fa(Z,ka));return{field:ea,domain:V}}function fa(Z,ka){var qa;ka.fields.some(function(ha){ha.name.toLowerCase()===Z.toLowerCase()&&(qa=ha.domain);return!!qa});
return qa}function ia(Z,ka){ka||(ka={});"function"===typeof ka&&(ka={cmp:ka});var qa="boolean"===typeof ka.cycles?ka.cycles:!1,ha=ka.cmp&&function(na){return function(N){return function(V,ca){return na({key:V,value:N[V]},{key:ca,value:N[ca]})}}}(ka.cmp),ea=[];return function V(N){N&&N.toJson&&"function"===typeof N.toJson&&(N=N.toJson());if(void 0!==N){if("number"===typeof N)return isFinite(N)?""+N:"null";if("object"!==typeof N)return JSON.stringify(N);var ca;if(Array.isArray(N)){var J="[";for(ca=
0;ca<N.length;ca++)ca&&(J+=","),J+=V(N[ca])||"null";return J+"]"}if(null===N)return"null";if(ea.includes(N)){if(qa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var pa=ea.push(N)-1,sa=Object.keys(N).sort(ha&&ha(N));J="";for(ca=0;ca<sa.length;ca++){var oa=sa[ca],Oa=V(N[oa]);Oa&&(J&&(J+=","),J+=JSON.stringify(oa)+":"+Oa)}ea.splice(pa,1);return"{"+J+"}"}}(Z)}function la(Z,ka){if(ka instanceof q)Z.push([ka.x,ka.y]);else throw Error("Invalid Argument");
}function ma(Z,ka){void 0===ka&&(ka=null);if(null!=Z){if(A(Z)||C(Z)||w(Z))return Z;if(Z instanceof t)return!0===(null===ka||void 0===ka?void 0:ka.keepGeometryType)?Z:Z.toJson();if(Z instanceof d)return Z.toArray().map(function(qa){return ma(qa,ka)});if(Z instanceof Array)return Z.map(function(qa){return ma(qa,ka)});if(Z instanceof Date)return Z;if(null!==Z&&"object"===typeof Z&&void 0!==Z.castAsJson)return Z.castAsJson(ka)}return null}function ta(Z,ka,qa,ha,ea){return a(this,void 0,void 0,function(){var na;
return f(this,function(N){switch(N.label){case 0:return[4,ua(Z,ka,qa)];case 1:return na=N.sent(),ea[ha]=na,[2]}})})}function ua(Z,ka,qa){void 0===ka&&(ka=null);void 0===qa&&(qa=null);return a(this,void 0,void 0,function(){var ha,ea,na,N,V;return f(this,function(ca){switch(ca.label){case 0:return Z instanceof d&&(Z=Z.toArray()),null!=Z?[3,1]:[2,null];case 1:return u(Z)||Z instanceof t||Z instanceof Date?[2,ma(Z,qa)]:[3,2];case 2:if(!(Z instanceof Array))return[3,5];ha=[];ea=[];na=0;for(N=Z;na<N.length;na++)V=
N[na],null===V||u(V)||V instanceof t||V instanceof Date?ea.push(ma(V,qa)):(ea.push(null),ha.push(ta(V,ka,qa,ea.length-1,ea)));return 0<ha.length?[4,Promise.all(ha)]:[3,4];case 3:ca.sent(),ca.label=4;case 4:return[2,ea];case 5:if(null!==Z&&"object"===typeof Z&&void 0!==Z.castAsJsonAsync)return[2,Z.castAsJsonAsync(ka,qa)];ca.label=6;case 6:return[2,null]}})})}Object.defineProperty(k,"__esModule",{value:!0});k.featureSchema=k.featureDomainCodeLookup=k.featureDomainValueLookup=k.featureSubtypes=k.featureFullDomain=
k.castAsJsonAsync=k.castAsJson=k.binaryOperator=k.tick=k.toStringArray=k.autoCastArrayOfPointsToMultiPoint=k.autoCastArrayOfPointsToPolyline=k.autoCastArrayOfPointsToPolygon=k.autoCastFeatureToGeometry=k.stableStringify=k.getDomain=k.getDomainCode=k.getDomainValue=k.fixNullGeometry=k.fixSpatialReference=k.toBoolean=k.toDateTime=k.toDate=k.toNumber=k.toStringExplicit=k.toNumberArray=k.toString=k.equalityTest=k.greaterThanLessThan=k.standardiseDateFormat=k.formatDate=k.formatNumber=k.generateUUID=k.absRound=
k.pcCheck=k.isDate=k.isImmutableArray=k.isFeatureSetCollection=k.isFeatureSet=k.isFeature=k.isArray=k.isInteger=k.isNumber=k.isBoolean=k.isString=k.defaultUndefined=k.isSimpleType=k.isFunctionParameter=k.multiReplace=k.continueResult=k.breakResult=k.voidOperation=k.SizzleFunction=k.ReturnResult=k.ImplicitResult=k.NativeFunction=k.SizzleFunctionE=k.NativeFunctionE=k.ImplicitResultE=k.ReturnResultE=void 0;D=function(){return function(Z){this.value=Z}}();k.ReturnResultE=D;g=function(){return function(Z){this.value=
Z}}();k.ImplicitResultE=g;var Ca=function(){return function(Z){this.fn=Z}}();k.NativeFunctionE=Ca;var xa=function(){return function(Z,ka){this.paramCount=ka;this.fn=Z}}();k.SizzleFunctionE=xa;k.NativeFunction=Ca;k.ImplicitResult=g;k.ReturnResult=D;k.SizzleFunction=xa;k.voidOperation={type:"VOID"};k.breakResult={type:"BREAK"};k.continueResult={type:"CONTINUE"};k.multiReplace=c;k.isFunctionParameter=m;k.isSimpleType=u;k.defaultUndefined=function(Z,ka){return void 0===Z?ka:Z};k.isString=w;k.isBoolean=
A;k.isNumber=C;k.isInteger=function(Z){return"number"===typeof Z&&isFinite(Z)&&Math.floor(Z)===Z};k.isArray=E;k.isFeature=function(Z){return"esri.arcade.Feature"===(null===Z||void 0===Z?void 0:Z.arcadeDeclaredClass)?!0:!1};k.isFeatureSet=function(Z){return!0===(Z&&Z.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===Z.declaredRootClass)};k.isFeatureSetCollection=function(Z){return!0===(Z&&Z.declaredRootClass&&"esri.arcade.featureSetCollection"===Z.declaredRootClass)};k.isImmutableArray=
G;k.isDate=F;k.pcCheck=function(Z,ka,qa){if(Z.length<ka||Z.length>qa)throw Error("Function called with wrong number of Parameters");};k.absRound=function(Z){return 0>Z?-Math.round(-Z):Math.round(Z)};k.generateUUID=function(){var Z=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ka){var qa=(Z+16*Math.random())%16|0;Z=Math.floor(Z/16);return("x"===ka?qa:qa&3|8).toString(16)})};k.formatNumber=I;k.formatDate=M;k.standardiseDateFormat=Y;k.greaterThanLessThan=function(Z,
ka,qa){if(null===Z){if(null===ka||ka===k.voidOperation)return R(null,null,qa);if(C(ka))return R(0,ka,qa);if(w(ka)||A(ka))return R(0,X(ka),qa);if(F(ka))return R(0,ka.getTime(),qa)}if(Z===k.voidOperation){if(null===ka||ka===k.voidOperation)return R(null,null,qa);if(C(ka))return R(0,ka,qa);if(w(ka)||A(ka))return R(0,X(ka),qa);if(F(ka))return R(0,ka.getTime(),qa)}else if(C(Z)){if(C(ka))return R(Z,ka,qa);if(A(ka))return R(Z,X(ka),qa);if(null===ka||ka===k.voidOperation)return R(Z,0,qa);if(w(ka))return R(Z,
X(ka),qa);if(F(ka))return R(Z,ka.getTime(),qa)}else if(w(Z)){if(w(ka))return R(O(Z),O(ka),qa);if(F(ka))return R(X(Z),ka.getTime(),qa);if(C(ka))return R(X(Z),ka,qa);if(null===ka||ka===k.voidOperation)return R(X(Z),0,qa);if(A(ka))return R(X(Z),X(ka),qa)}else if(F(Z)){if(F(ka))return R(Z,ka,qa);if(null===ka||ka===k.voidOperation)return R(Z.getTime(),0,qa);if(C(ka))return R(Z.getTime(),ka,qa);if(A(ka)||w(ka))return R(Z.getTime(),X(ka),qa)}else if(A(Z)){if(A(ka))return R(Z,ka,qa);if(C(ka))return R(X(Z),
X(ka),qa);if(F(ka))return R(X(Z),ka.getTime(),qa);if(null===ka||ka===k.voidOperation)return R(X(Z),0,qa);if(w(ka))return R(X(Z),X(ka),qa)}return!S(Z,ka)||"\x3c\x3d"!==qa&&"\x3e\x3d"!==qa?!1:!0};k.equalityTest=S;k.toString=O;k.toNumberArray=function(Z){var ka=[];if(!1===E(Z))return null;if(Z instanceof d){for(var qa=0;qa<Z.length();qa++)ka[qa]=X(Z.get(qa));return ka}for(qa=0;qa<Z.length;qa++)ka[qa]=X(Z[qa]);return ka};k.toStringExplicit=L;k.toNumber=X;k.toDate=function(Z){return F(Z)?Z:w(Z)&&(Z=Q(Z))?
Z.toJSDate():null};k.toDateTime=function(Z){return F(Z)?y.DateTime.fromJSDate(Z):w(Z)?Q(Z):null};k.toBoolean=function(Z){return A(Z)?Z:w(Z)?(Z=Z.toLowerCase(),"true"===Z?!0:!1):C(Z)?0===Z||isNaN(Z)?!1:!0:!1};k.fixSpatialReference=function(Z,ka){if(null===Z||void 0===Z)return null;if(null===Z.spatialReference||void 0===Z.spatialReference)Z.spatialReference=ka;return Z};k.fixNullGeometry=function(Z){if(null===Z)return null;if(Z instanceof q)return"NaN"===Z.x||null===Z.x||isNaN(Z.x)?null:Z;if(Z instanceof
v){if(0===Z.rings.length)return null;for(var ka=0,qa=Z.rings;ka<qa.length;ka++){var ha=qa[ka];if(0<ha.length)return Z}return null}if(Z instanceof x){if(0===Z.paths.length)return null;ka=0;for(qa=Z.paths;ka<qa.length;ka++)if(ha=qa[ka],0<ha.length)return Z;return null}return Z instanceof r?0===Z.points.length?null:Z:Z instanceof h?"NaN"===Z.xmin||null===Z.xmin||isNaN(Z.xmin)?null:Z:null};k.getDomainValue=K;k.getDomainCode=U;k.getDomain=da;k.stableStringify=ia;k.autoCastFeatureToGeometry=function(Z){if(null===
Z)return null;for(var ka=[],qa=0;qa<Z.length;qa++){var ha=Z[qa];ha&&ha.arcadeDeclaredClass&&"esri.arcade.Feature"===ha.arcadeDeclaredClass?ka.push(ha.geometry()):ka.push(ha)}return ka};k.autoCastArrayOfPointsToPolygon=function(Z,ka){if(E(Z)||G(Z)){var qa=!1,ha=!1,ea=[],na=ka;if(E(Z)){for(var N=0;N<Z.length;N++){var V=Z[N];la(ea,V)}0<ea.length&&(na=Z[0].spatialReference,qa=Z[0].hasZ,ha=Z[0].hasM)}else if(Z instanceof l)ea=Z._elements,0<ea.length&&(qa=Z._hasZ,ha=Z._hasM,na=Z.get(0).spatialReference);
else if(G(Z)){N=0;for(var ca=Z.toArray();N<ca.length;N++)V=ca[N],la(ea,V);0<ea.length&&(na=Z.get(0).spatialReference,qa=!0===Z.get(0).hasZ,ha=!0===Z.get(0).hasM)}else throw Error("Invalid Argument");if(0===ea.length)return null;!1===(new v({rings:[],spatialReference:{wkid:4326}})).isClockwise(ea)&&(ea=ea.slice(0).reverse());return new v({rings:[ea],spatialReference:na,hasZ:qa,hasM:ha})}return Z};k.autoCastArrayOfPointsToPolyline=function(Z,ka){if(E(Z)||G(Z)){var qa=!1,ha=!1,ea=[],na=ka;if(E(Z)){for(var N=
0;N<Z.length;N++){var V=Z[N];la(ea,V)}0<ea.length&&(na=Z[0].spatialReference,qa=!0===Z[0].hasZ,ha=!0===Z[0].hasM)}else if(Z instanceof l)ea=Z._elements,0<ea.length&&(qa=Z._hasZ,ha=Z._hasM,na=Z.get(0).spatialReference);else if(G(Z)){N=0;for(var ca=Z.toArray();N<ca.length;N++)V=ca[N],la(ea,V);0<ea.length&&(na=Z.get(0).spatialReference,qa=!0===Z.get(0).hasZ,ha=!0===Z.get(0).hasM)}return 0===ea.length?null:new x({paths:[ea],spatialReference:na,hasZ:qa,hasM:ha})}return Z};k.autoCastArrayOfPointsToMultiPoint=
function(Z,ka){if(E(Z)||G(Z)){var qa=!1,ha=!1,ea=[],na=ka;if(E(Z)){for(var N=0;N<Z.length;N++){var V=Z[N];la(ea,V)}0<ea.length&&(na=Z[0].spatialReference,qa=!0===Z[0].hasZ,ha=!0===Z[0].hasM)}else if(Z instanceof l)ea=Z._elements,0<ea.length&&(qa=Z._hasZ,ha=Z._hasM,na=Z.get(0).spatialReference);else if(G(Z)){N=0;for(var ca=Z.toArray();N<ca.length;N++)V=ca[N],la(ea,V);0<ea.length&&(na=Z.get(0).spatialReference,qa=!0===Z.get(0).hasZ,ha=!0===Z.get(0).hasM)}return 0===ea.length?null:new r({points:ea,spatialReference:na,
hasZ:qa,hasM:ha})}return Z};k.toStringArray=function(Z,ka){void 0===ka&&(ka=!1);var qa=[];if(null===Z)return qa;if(!0===E(Z)){for(var ha=0;ha<Z.length;ha++){var ea=O(Z[ha]);""===ea&&!0!==ka||qa.push(ea)}return qa}if(Z instanceof d){for(ha=0;ha<Z.length();ha++)ea=O(Z.get(ha)),""===ea&&!0!==ka||qa.push(ea);return qa}return u(Z)?(ea=O(Z),""===ea&&!0!==ka||qa.push(ea),qa):[]};var Ba=0;k.tick=function(Z){Ba++;return 0===Ba%100?(Ba=0,new Promise(function(ka){setTimeout(function(){ka(Z)},0)})):Z};k.binaryOperator=
function(Z,ka,qa){switch(qa){case "\x26":return Z&ka;case "|":return Z|ka;case "^":return Z^ka;case "\x3c\x3c":return Z<<ka;case "\x3e\x3e":return Z>>ka;case "\x3e\x3e\x3e":return Z>>>ka}};k.castAsJson=ma;k.castAsJsonAsync=ua;k.featureFullDomain=function(Z,ka,qa){var ha=Z.fullSchema();return null!==ha&&ha.fields?da(ka,ha,Z,qa):null};k.featureSubtypes=function(Z){Z=Z.fullSchema();return null!==Z&&Z.fields?Z.typeIdField?{subtypeField:Z.typeIdField,subtypes:Z.types?Z.types.map(function(ka){return{name:ka.name,
code:ka.id}}):[]}:null:null};k.featureDomainValueLookup=function(Z,ka,qa,ha){var ea=Z.fullSchema();if(null===ea||!ea.fields)return null;ha=da(ka,ea,Z,ha);if(void 0===qa)try{qa=Z.field(ka)}catch(na){return null}return K(ha,qa)};k.featureDomainCodeLookup=function(Z,ka,qa,ha){var ea=Z.fullSchema();if(null===ea||!ea.fields)return null;if(void 0===qa){try{qa=Z.field(ka)}catch(na){return null}return qa}Z=da(ka,ea,Z,ha);return U(Z,qa)};k.featureSchema=function(Z){Z=Z.fullSchema();if(null===Z||!Z.fields)return null;
for(var ka=[],qa=0,ha=Z.fields;qa<ha.length;qa++)ka.push(b.esriFieldToJson(ha[qa]));return{objectIdField:Z.objectIdField,globalIdField:Z.globalIdField,geometryType:void 0===b.layerGeometryEsriRestConstants[Z.geometryType]?"":b.layerGeometryEsriRestConstants[Z.geometryType],fields:ka}}})},"esri/arcade/polyfill/tsSupport/assign":function(){define([],function(){return function(){return function(){return(Object.assign||function(D){for(var k,a=1,f=arguments.length;a<f;a++){k=arguments[a];for(var g in k)Object.prototype.hasOwnProperty.call(k,
g)&&(D[g]=k[g])}return D}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(D,k,a){if(a||2===arguments.length)for(var f=0,g=k.length,p;f<g;f++)!p&&f in k||(p||(p=Array.prototype.slice.call(k,0,f)),p[f]=k[f]);return D.concat(p||Array.prototype.slice.call(k))}}()})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(D,k){return function(){return function(a,f){this.context=this.definition=
null;this.definition=a;this.context=f}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","./ImmutablePointArray"],function(D,k,a,f,g){return function(p){function n(d,e,l,h,t){d=p.call(this,d)||this;d._lazyPath=[];d._hasZ=!1;d._hasM=!1;d._hasZ=l;d._hasM=h;d._spRef=e;d._cacheId=t;return d}a(n,p);n.prototype.get=function(d){if(void 0===this._lazyPath[d]){var e=this._elements[d];if(void 0===e)return;this._lazyPath[d]=new g(e,
this._spRef,this._hasZ,this._hasM,this._cacheId,d)}return this._lazyPath[d]};n.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof n?!1:d.getUniqueHash()===this.getUniqueHash()};n.prototype.getUniqueHash=function(){return this._cacheId.toString()};return n}(f)})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var D=function(k,a){D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,
g){for(var p in g)Object.prototype.hasOwnProperty.call(g,p)&&(f[p]=g[p])};return D(k,a)};return function(k,a){function f(){this.constructor=k}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");D(k,a);k.prototype=null===a?Object.create(a):(f.prototype=a.prototype,new f)}}()})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","../geometry/Point"],function(D,
k,a,f,g){return function(p){function n(d,e,l,h,t,r){d=p.call(this,d)||this;d._lazyPt=[];d._hasZ=!1;d._hasM=!1;d._spRef=e;d._hasZ=l;d._hasM=h;d._cacheId=t;d._partId=r;return d}a(n,p);n.prototype.get=function(d){if(void 0===this._lazyPt[d]){var e=this._elements[d];if(void 0===e)return;var l=this._hasZ,h=this._hasM,t=null;t=l&&!h?new g(e[0],e[1],e[2],void 0,this._spRef):h&&!l?new g(e[0],e[1],void 0,e[2],this._spRef):l&&h?new g(e[0],e[1],e[2],e[3],this._spRef):new g(e[0],e[1],this._spRef);t.setCacheValue("_arcadeCacheId",
this._cacheId.toString()+"-"+this._partId.toString()+"-"+d.toString());this._lazyPt[d]=t}return this._lazyPt[d]};n.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof n?!1:d.getUniqueHash()===this.getUniqueHash()};n.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return n}(f)})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),
function(D,k,a,f,g,p,n,d){function e(q,v){89.99999<v?v=89.99999:-89.99999>v&&(v=-89.99999);var x=.017453292519943*v;return[111319.49079327169*q,3189068.5*Math.log((1+Math.sin(x))/(1-Math.sin(x)))]}function l(q,v,x){q=q/6378137*57.29577951308232;return x?[q,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*v/6378137)))]:[q-360*Math.floor((q+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*v/6378137)))]}function h(){}function t(){}function r(q){var v=q._json;q._unquantizeFn?
(v=q._unquantizeFn({x:v.x,y:v.y}),q._xVal=v.x,q._yVal=v.y,q._unquantizeFn=null):(q._xVal=v.x,q._yVal=v.y);q._json=null}a={type:"point",x:0,y:0};D=D(n,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(q,v,x){k.isArray(q)?(this.x=q[0],this.y=q[1],this.spatialReference=v):g.isObject(q)?(g.mixin(this,q),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):
(this.x=q,this.y=v,this.spatialReference=x);this.verifySR()},offset:function(q,v){return new this.constructor(this.x+q,this.y+v,this.spatialReference)},setX:function(q){this.x=q;this.clearCache();return this},setY:function(q){this.y=q;this.clearCache();return this},setLongitude:function(q){var v=this.spatialReference;v&&(v._isWebMercator()?this.setX(e(q,this.y)[0]):4326===v.wkid&&this.setX(q));return this},setLatitude:function(q){var v=this.spatialReference;v&&(v._isWebMercator()?this.setY(e(this.x,
q)[1]):4326===v.wkid&&this.setY(q));return this},getLongitude:function(){var q=this.spatialReference;if(q)if(q._isWebMercator())var v=l(this.x,this.y)[0];else 4326===q.wkid&&(v=this.x);return v},getLatitude:function(){var q=this.spatialReference;if(q)if(q._isWebMercator())var v=l(this.x,this.y)[1];else 4326===q.wkid&&(v=this.y);return v},update:function(q,v){this.x=q;this.y=v;this.clearCache();return this},normalize:function(){var q=this.x,v=this.spatialReference;if(v){var x=v._getInfo();x&&(q=this._normalizeX(q,
x))}return new this.constructor(q,this.y,v)},_normalizeX:function(q,v){var x=v.valid[0],y=v.valid[1],B=2*y;q>y?(x=Math.ceil(Math.abs(q-y)/B),q-=x*B):q<x&&(x=Math.ceil(Math.abs(q-x)/B),q+=x*B);return q},toJson:function(){var q={x:this.x,y:this.y},v=this.spatialReference;v&&(q.spatialReference=v.toJson());return q}});h.prototype=D.prototype;t.prototype=new h;Object.defineProperty(t.prototype,"x",{get:function(){this._json&&r(this);return this._xVal},set:function(q){this._xVal=q}});Object.defineProperty(t.prototype,
"y",{get:function(){this._json&&r(this);return this._yVal},set:function(q){this._yVal=q}});t.prototype.setupLazyUnquantization=function(q,v){this._unquantizeFn=q;this._json=v};D.simpleConstructor=h;D.accessorConstructor=t;D.lngLatToXY=e;D.xyToLngLat=l;D.defaultProps=a;D.metersPerDegree=6378137*Math.PI/180;k.setObject("geometry.Point",D,f);f.geometry.defaultPoint=a;return D})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(D,
k,a,f,g){function p(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var n=[-2.0037508342787E7,2.0037508342787E7];D=D(null,{declaredClass:"esri.SpatialReference",constructor:function(d){d&&(g.isObject(d)?g.mixin(this,d):g.isString(d)?this.wkt=d:this.wkid=d)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:n,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:n,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:n,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:n,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==k.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==k.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(d){var e=!1;d&&(e=this.isWebMercator()&&4326===d.wkid||d.isWebMercator()&&4326===this.wkid);return e},isWebMercator:function(){return this._isWebMercator()},equals:function(d){var e=!1;d&&(this===d&&
(e=!0),this.wkid||d.wkid?e=this.wkid===d.wkid||this.isWebMercator()&&d.isWebMercator()||this.wkid===d.latestWkid||d.wkid===this.latestWkid:this.wkt&&d.wkt&&(e=this.wkt.toUpperCase()===d.wkt.toUpperCase()));return e},toJson:function(){var d=null;null!=this.wkid?d={wkid:this.wkid}:null!=this.wkt&&(d={wkt:this.wkt});d&&null!=this.latestWkid&&(d.latestWkid=this.latestWkid);return d}});p.prototype=D.prototype;D.simpleConstructor=p;return f.SpatialReference=D})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(D,k,a,f,g){D=D(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(p){this.spatialReference=p;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new g(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(p){return this.cache&&this.cache[p]},setCacheValue:function(p,n){this.cache||
(this.cache={});this.cache[p]=n}});k.setObject("geometry.Geometry",D,f);return D})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(D,k,a,f,g){function p(n){var d=!1;n&&(n.ics||n.icsid)&&(d=!0);return d}f={isICS:p,createSpatialReference:function(n){var d=null;n&&(d=p(n)?new k(n):new D(n));return d}};g.mixin(a,f);return f})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(D,k,a,f,g,p){D=D(p,{declaredClass:"esri.ImageSpatialReference",constructor:function(n){n&&k.isObject(n)&&k.mixin(this,n)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(n){var d=!1;if(n)if(this.icsid&&n.icsid){if(d=this.icsid===n.icsid,this.icsns||n.icsns)d=d&&this.icsns===n.icsns}else this.ics&&n.ics&&(d=this.ics===n.ics);return d},toJson:function(n){var d=null,e=g.isDefined;n=e(n)?n:!0;e(this.icsid)?(d={icsid:this.icsid},
e(this.icsns)&&(d.icsns=this.icsns)):e(this.ics)&&(d={ics:this.ics});e(this.url)&&e(d)&&n&&(d.url=this.url);return d}});return f.ImageSpatialReference=D})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(D,k,a,f,g,p,n,d,e,l,h,t){function r(){}f={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var q=D(d,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(v,x,y,B,z){p.isObject(v)?(p.mixin(this,v),this.spatialReference&&(this.spatialReference=t.createSpatialReference(this.spatialReference))):this.update(v,x,y,B,z);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new e((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new e(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new e(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new e(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new e(this.xmax,this.ymin,this.spatialReference)},centerAt:function(v){var x=this.getCenter(),y=v.x-x.x;v=v.y-x.y;return new q(this.xmin+y,this.ymin+v,this.xmax+y,this.ymax+v,this.spatialReference)},update:function(v,x,y,B,z){this.xmin=v;this.ymin=x;this.xmax=y;this.ymax=
B;this.spatialReference=z;this.clearCache();return this},offset:function(v,x){return new q(this.xmin+v,this.ymin+x,this.xmax+v,this.ymax+x,this.spatialReference)},expand:function(v){var x=(1-v)/2;v=this.getWidth()*x;x*=this.getHeight();return new q(this.xmin+v,this.ymin+x,this.xmax-v,this.ymax-x,this.spatialReference)},intersects:function(v){if(!v)return!1;var x=v.type,y=this.spatialReference,B=v.spatialReference;y&&B&&!y.equals(B)&&y._canProject(B)&&(v=y.isWebMercator()?l.geographicToWebMercator(v):
l.webMercatorToGeographic(v,!0));switch(x){case "point":return this.contains(v);case "multipoint":return this._intersectsMultipoint(v);case "extent":return this._intersectsExtent(v);case "polygon":return this._intersectsPolygon(v);case "polyline":return this._intersectsPolyline(v)}},normalize:function(){var v=this._normalize(!1,!0);a.isArray(v)||(v=[v]);return v},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var v=this.spatialReference,x=v&&v._getInfo(),y=[],B=0;if(x&&
this._isOutOfBounds(x)){var z=this;B=z.xmin;var b=z.ymin,c=z.ymax,m=x.valid[0],u=x.valid[1];z.getWidth()>2*u&&(z=z.getCenter(),z=new q(z.x-u,b,z.x+u,c,new n(v.toJson())));B=z.xmin-B;var w=this._normalizeX(z.xmin,x);x=this._normalizeX(z.xmax,x);w.frameId===x.frameId?y.push(new q(w.x,b,x.x,c,new n(v.toJson()))):y.push(new q(w.x,b,u,c,new n(v.toJson())),new q(m,b,x.x,c,new n(v.toJson())))}else y.push(this.getExtent());return{extents:y,marginLeft:B}},_intersectsMultipoint:function(v){var x=v.points.length,
y;for(y=0;y<x;y++)if(this.contains(v.getPoint(y)))return!0;return!1},_intersectsExtent:function(v){var x,y,B=!1;if(this.xmin<=v.xmin){var z=v.xmin;this.xmax<z?B=!0:x=Math.min(this.xmax,v.xmax)-z}else z=this.xmin,v.xmax<z?B=!0:x=Math.min(this.xmax,v.xmax)-z;if(this.ymin<=v.ymin){var b=v.ymin;this.ymax<b?B=!0:y=Math.min(this.ymax,v.ymax)-b}else b=this.ymin,v.ymax<b?B=!0:y=Math.min(this.ymax,v.ymax)-b;return B?null:new q(z,b,z+x,b+y,this.spatialReference)},_intersectsPolygon:function(v){var x=[this.xmin,
this.ymax],y=[this.xmax,this.ymax],B=[this.xmin,this.ymin],z=[this.xmax,this.ymin],b=[x,y,B,z];x=[[B,x],[x,y],[y,z],[z,B]];B=v.rings;z=B.length;var c=new e(0,0,this.spatialReference);var m=b.length;for(y=0;y<m;y++)if(c.update(b[y][0],b[y][1]),v.contains(c))return!0;c.setSpatialReference(v.spatialReference);for(y=0;y<z;y++)if(b=B[y],m=b.length){var u=b[0];c.update(u[0],u[1]);if(this.contains(c))return!0;for(v=1;v<m;v++){var w=b[v];c.update(w[0],w[1]);if(this.contains(c)||this._intersectsLine([u,w],
x))return!0;u=w}}return!1},_intersectsPolyline:function(v){var x=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],y,B=v.paths,z=B.length,b,c=new e(0,0,v.spatialReference);for(v=0;v<z;v++){var m=B[v];if(b=m.length){var u=m[0];c.update(u[0],u[1]);if(this.contains(c))return!0;for(y=1;y<b;y++){var w=m[y];c.update(w[0],w[1]);if(this.contains(c)||this._intersectsLine([u,
w],x))return!0;u=w}}}return!1},_intersectsLine:function(v,x){var y=h._getLineIntersection2,B,z=x.length;for(B=0;B<z;B++)if(y(v,x[B]))return!0;return!1},contains:function(v){if(!v)return!1;var x=v.type;if("point"===x){var y=this.spatialReference,B=v.spatialReference;x=v.x;v=v.y;y&&B&&!y.equals(B)&&y._canProject(B)&&(v=y.isWebMercator()?e.lngLatToXY(x,v):e.xyToLngLat(x,v,!0),x=v[0],v=v[1]);return x>=this.xmin&&x<=this.xmax&&v>=this.ymin&&v<=this.ymax}return"extent"===x?this._containsExtent(v):!1},_containsExtent:function(v){var x=
v.xmin,y=v.ymin,B=v.xmax,z=v.ymax,b=v.spatialReference;v=new e(x,y,b);x=new e(x,z,b);z=new e(B,z,b);y=new e(B,y,b);return this.contains(v)&&this.contains(x)&&this.contains(z)&&this.contains(y)?!0:!1},union:function(v){return new q(Math.min(this.xmin,v.xmin),Math.min(this.ymin,v.ymin),Math.max(this.xmax,v.xmax),Math.max(this.ymax,v.ymax),this.spatialReference)},getExtent:function(){var v=this.spatialReference;return new q(this.xmin,this.ymin,this.xmax,this.ymax,v&&new n(v.toJson()))},_shiftCM:function(v){var x=
this.getCacheValue("_shifted");if(!x){x=new q(this.toJson());var y=x.spatialReference;if(v=v||y._getInfo()){var B=this._getCM(v);if(B){var z=y._isWebMercator()?l.webMercatorToGeographic(B):B;x.xmin-=B.x;x.xmax-=B.x;y._isWebMercator()||(z.x=this._normalizeX(z.x,v).x);x.setSpatialReference(new n(p.substitute({Central_Meridian:z.x},4326===y.wkid?v.altTemplate:v.wkTemplate)))}}this.setCacheValue("_shifted",x)}return x},_getCM:function(v){var x;this._isOutOfBounds(v)&&(x=this.getCenter());return x},_isOutOfBounds:function(v){var x=
v.valid[0];v=v.valid[1];var y=this.xmin,B=this.xmax;return!(y>=x&&y<=v&&B>=x&&B<=v)},_normalize:function(v,x,y){var B=new q(this.toJson()),z=B.spatialReference;if(z&&(y=y||z._getInfo())){var b=k.map(this._getParts(y),function(c){return c.extent});return 2<b.length?v?this._shiftCM(y):B.update(y.valid[0],B.ymin,y.valid[1],B.ymax,z):2===b.length?v?this._shiftCM(y):x?b:{rings:k.map(b,function(c){return[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]}),spatialReference:z}:
b[0]||B}return B},_getParts:function(v){var x=this.getCacheValue("_parts");if(!x){x=[];var y=this.xmin,B=this.xmax,z=this.ymin,b=this.ymax,c=this.spatialReference,m=this.getWidth(),u=y,w=B,A=0,C=0;v=v||c._getInfo();var E=v.valid[0];var G=v.valid[1];C=this._normalizeX(y,v);y=C.x;A=C.frameId;C=this._normalizeX(B,v);B=C.x;C=C.frameId;v=y===B&&0<m;if(m>2*G){m=new q(u<w?y:B,z,G,b,c);y=new q(E,z,u<w?B:y,b,c);G=new q(0,z,G,b,c);z=new q(E,z,0,b,c);c=[];E=[];m.contains(G)&&c.push(A);m.contains(z)&&E.push(A);
y.contains(G)&&c.push(C);y.contains(z)&&E.push(C);for(b=A+1;b<C;b++)c.push(b),E.push(b);x.push({extent:m,frameIds:[A]},{extent:y,frameIds:[C]},{extent:G,frameIds:c},{extent:z,frameIds:E})}else y>B||v?x.push({extent:new q(y,z,G,b,c),frameIds:[A]},{extent:new q(E,z,B,b,c),frameIds:[C]}):x.push({extent:new q(y,z,B,b,c),frameIds:[A]});this.setCacheValue("_parts",x)}return x},_normalizeX:function(v,x){var y=0,B=x.valid[0],z=x.valid[1],b=2*z;v>z?(y=Math.ceil(Math.abs(v-z)/b),v-=y*b):v<B&&(y=Math.ceil(Math.abs(v-
B)/b),v+=y*b,y=-y);return{x:v,frameId:y}},toJson:function(){var v={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},x=this.spatialReference;x&&(v.spatialReference=x.toJson());return v}});r.prototype=q.prototype;q.simpleConstructor=r;q.defaultProps=f;a.setObject("geometry.Extent",q,g);g.geometry.defaultExtent=f;return q})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(D,k,a,f,g,p){function n(e,
l,h,t){if("point"===e.type){var r=l(e.x,e.y,t);return new e.constructor(r[0],r[1],new g(h))}if("extent"===e.type){r=l(e.xmin,e.ymin,t);var q=l(e.xmax,e.ymax,t);return new e.constructor(r[0],r[1],q[0],q[1],new g(h))}if("polyline"===e.type||"polygon"===e.type){r="polyline"===e.type;var v=[],x;D.forEach(r?e.paths:e.rings,function(B){v.push(x=[]);D.forEach(B,function(z){x.push(l(z[0],z[1],t))})});return r?new e.constructor({paths:v,spatialReference:new g(h)}):new e.constructor({rings:v,spatialReference:new g(h)})}if("multipoint"===
e.type){var y=[];D.forEach(e.points,function(B){y.push(l(B[0],B[1],t))});return new e.constructor({points:y,spatialReference:new g(h)})}}function d(e,l){var h=e&&(null!=e.wkid?e:e.spatialReference),t=l&&(null!=l.wkid?l:l.spatialReference);return h&&t?t.equals(h)?!0:t._canProject(h):!1}a={canProject:d,project:function(e,l){var h=e&&e.spatialReference,t=l&&(null!=l.wkid?l:l.spatialReference);h&&t?h.equals(t)?e=new e.constructor(e.toJson()):d(h,t)?t.isWebMercator()?e=n(e,p.lngLatToXY,{wkid:102100}):
4326===t.wkid&&(e=n(e,p.xyToLngLat,{wkid:4326})):e=null:e=null;return e},lngLatToXY:p.lngLatToXY,xyToLngLat:p.xyToLngLat,metersPerDegree:p.metersPerDegree,geographicToWebMercator:function(e){return n(e,p.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(e,l){return n(e,p.xyToLngLat,{wkid:4326},l)}};k.mixin(k.getObject("geometry",!0,f),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,k,a,f){function g(d,e,l){return d instanceof
f?new f(d.x+l*(e.x-d.x),d.y+l*(e.y-d.y)):[d[0]+l*(e[0]-d[0]),d[1]+l*(e[1]-d[1])]}function p(d,e){return 1E-8>Math.abs(d-e)}function n(d,e,l,h){var t=p(d[0],e[0])?1E10:(d[1]-e[1])/(d[0]-e[0]),r=p(l[0],h[0])?1E10:(l[1]-h[1])/(l[0]-h[0]),q=d[1]-t*d[0],v=l[1]-r*l[0];if(p(t,r)){if(p(q,v)){if(p(d[0],e[0]))if(Math.min(d[1],e[1])<Math.max(l[1],h[1])||Math.max(d[1],e[1])>Math.min(l[1],h[1])){d=(d[1]+e[1]+l[1]+h[1]-Math.min(d[1],e[1],l[1],h[1])-Math.max(d[1],e[1],l[1],h[1]))/2;var x=(d-q)/t}else return null;
else if(Math.min(d[0],e[0])<Math.max(l[0],h[0])||Math.max(d[0],e[0])>Math.min(l[0],h[0]))x=(d[0]+e[0]+l[0]+h[0]-Math.min(d[0],e[0],l[0],h[0])-Math.max(d[0],e[0],l[0],h[0]))/2,d=t*x+q;else return null;return[x,d]}return null}p(t,1E10)?(x=d[0],d=r*x+v):p(r,1E10)?(x=l[0],d=t*x+q):(x=-(q-v)/(t-r),d=d[1]===e[1]?d[1]:l[1]===h[1]?l[1]:t*x+q);return[x,d]}k={getLength:function(d,e){var l=e.x-d.x,h=e.y-d.y;return Math.sqrt(l*l+h*h)},_getLength:function(d,e){var l=e[0]-d[0],h=e[1]-d[1];return Math.sqrt(l*l+
h*h)},getPointOnLine:g,getMidpoint:function(d,e){return g(d,e,.5)},_equals:p,_getLineIntersection:n,getLineIntersection:function(d,e,l,h,t){(d=n([d.x,d.y],[e.x,e.y],[l.x,l.y],[h.x,h.y]))&&(d=new f(d[0],d[1],t));return d},_getLineIntersection2:function(d,e){var l=d[0],h=d[1],t=e[0],r=e[1],q=l[0];l=l[1];var v=h[0];h=h[1];var x=t[0],y=t[1];t=r[0]-x;x=q-x;var B=v-q;r=r[1]-y;y=l-y;var z=h-l,b=r*B-t*z;if(0===b)return!1;t=(t*y-r*x)/b;x=(B*y-z*x)/b;return 0<=t&&1>=t&&0<=x&&1>=x?[q+t*(v-q),l+t*(h-l)]:!1},
_pointLineDistance:function(d,e){var l=e[0],h=e[1],t=l[0],r=l[1];l=d[0];var q=d[1],v=h[0]-t,x=h[1]-r,y=l-t,B=q-r;h=Math.sqrt;var z=Math.pow,b=h(z(v,2)+z(x,2));y=(y*v+B*x)/(b*b);r+=y*x;return h(z(l-(t+y*v),2)+z(q-r,2))}};D.mixin(D.getObject("geometry",!0,a),k);return k})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,k,a,f,g,p,n,d,e,l){function h(){}function t(){}
a={type:"multipoint",points:null};D=D(n,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(r){this.points=[];r&&(r.points?g.mixin(this,r):this.spatialReference=r,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(r){this.clearCache();k.isArray(r)?this.points.push(r):this.points.push([r.x,r.y]);return this},removePoint:function(r){if(this._validateInputs(r))return this.clearCache(),
new d(this.points.splice(r,1)[0],this.spatialReference)},getExtent:function(){var r=this.getCacheValue("_extent");if(r)return new e(r);r=this.points;var q=r.length;if(q){var v=r[0],x,y,B=x=v[0],z=y=v[1],b=Math.min,c=Math.max,m=this.spatialReference,u;for(u=0;u<q;u++){v=r[u];var w=v[0];v=v[1];B=b(B,w);z=b(z,v);x=c(x,w);y=c(y,v)}r={xmin:B,ymin:z,xmax:x,ymax:y,spatialReference:m?m.toJson():null};this.setCacheValue("_extent",r);return new e(r)}},_validateInputs:function(r){return null===r||0>r||r>=this.points.length?
!1:!0},getPoint:function(r){if(this._validateInputs(r))return r=this.points[r],new d(r[0],r[1],this.spatialReference)},setPoint:function(r,q){if(this._validateInputs(r))return this.clearCache(),this.points[r]=[q.x,q.y],this},toJson:function(){var r={points:g.clone2DArray(this.points)},q=this.spatialReference;q&&(r.spatialReference=q.toJson());return r}});h.prototype=D.prototype;t.prototype=new h;Object.defineProperty(t.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:g.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(r){this._pointsVal=r}});t.prototype.setupLazyUnquantization=function(r,q){this._unquantizeFn=r;this._pointsVal=q.points};D.simpleConstructor=h;D.accessorConstructor=t;D.defaultProps=a;k.setObject("geometry.Multipoint",D,f);f.geometry.defaultMultipoint=a;return D})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t){function r(){}function q(){}f={type:"polygon",rings:null};var v=D(d,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(x){this.rings=[];this._ring=0;x&&(a.isArray(x)?this.rings=a.isArray(x[0][0])?x:[x]:x.rings?p.mixin(this,x):this.spatialReference=x,this.spatialReference&&(this.spatialReference=t.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(x){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];a.isArray(x[0])?k.forEach(x,this._addPointArr,this):k.forEach(x,this._addPoint,this);return this},_addPointArr:function(x){this.rings[this._ring].push(x)},_addPoint:function(x){this.rings[this._ring].push([x.x,x.y])},_insertPoints:function(x,y){this.clearCache();this._ring=y;this.rings[this._ring]||(this.rings[this._ring]=[]);k.forEach(x,this._addPoint,this)},_validateInputs:function(x,y){return null!==x&&void 0!==x&&(0>x||x>=this.rings.length)||null!==y&&void 0!==x&&(0>y||y>=this.rings[x].length)?
!1:!0},getPoint:function(x,y){if(this._validateInputs(x,y))return new e(this.rings[x][y],this.spatialReference)},setPoint:function(x,y,B){if(this._validateInputs(x,y))return this.clearCache(),this.rings[x][y]=[B.x,B.y],this},insertPoint:function(x,y,B){if(this._validateInputs(x)&&null!=y&&0<=y&&y<=this.rings[x].length)return this.clearCache(),this.rings[x].splice(y,0,[B.x,B.y]),this},removeRing:function(x){if(this._validateInputs(x,null)){this.clearCache();x=this.rings.splice(x,1)[0];var y,B=x.length,
z=this.spatialReference;for(y=0;y<B;y++)x[y]=new e(x[y],z);return x}},removePoint:function(x,y){if(this._validateInputs(x,y))return this.clearCache(),new e(this.rings[x].splice(y,1)[0],this.spatialReference)},getExtent:function(){var x=this.getCacheValue("_extent");var y=this.getCacheValue("_partwise");if(x)return x=new l(x),x._partwise=y,x;x=this.rings;var B=x.length;if(B&&x[0].length){var z,b,c,m,u=z=x[0][0][0],w=b=x[0][0][1],A=Math.min,C=Math.max,E=this.spatialReference;y=[];var G,F;for(c=0;c<
B;c++){var I=x[c];var M=G=I[0]&&I[0][0];var Y=F=I[0]&&I[0][1];var R=I.length;for(m=0;m<R;m++){var S=I[m];var O=S[0];S=S[1];u=A(u,O);w=A(w,S);z=C(z,O);b=C(b,S);M=A(M,O);Y=A(Y,S);G=C(G,O);F=C(F,S)}y.push(new l({xmin:M,ymin:Y,xmax:G,ymax:F,spatialReference:E?E.toJson():null}))}x={xmin:u,ymin:w,xmax:z,ymax:b,spatialReference:E?E.toJson():null};y=1<y.length?y:null;this.setCacheValue("_extent",x);this.setCacheValue("_partwise",y);x=new l(x);x._partwise=y;return x}},contains:function(x){var y=this.rings,
B=!1,z,b,c,m=y.length;var u=this.spatialReference;var w=x.spatialReference;var A=x.x;x=x.y;u&&w&&!u.equals(w)&&u._canProject(w)&&(x=u.isWebMercator()?e.lngLatToXY(A,x):e.xyToLngLat(A,x,!0),A=x[0],x=x[1]);for(c=0;c<m;c++){u=y[c];var C=u.length;for(b=z=0;b<C;b++){z++;z===C&&(z=0);w=u[b];var E=u[z];(w[1]<x&&E[1]>=x||E[1]<x&&w[1]>=x)&&w[0]+(x-w[1])/(E[1]-w[1])*(E[0]-w[0])<A&&(B=!B)}}return B},getCentroid:function(){var x=this.getCacheValue("_centroid");if(void 0!==x)return x;x=this.rings;var y,B,z=[],
b,c,m=Infinity,u=-Infinity,w=Infinity,A=-Infinity;k.forEach(x,function(G){C=y=B=0;k.forEach(G,function(F,I){I<G.length-1&&(b=G[I+1],c=F[0]*b[1]-b[0]*F[1],C+=(F[0]+b[0])*c,y+=(F[1]+b[1])*c,B+=c,F[0]<m&&(m=F[0]),F[0]>u&&(u=F[0]),F[1]<w&&(w=F[1]),F[1]>A&&(A=F[1]))});0<B&&(B*=-1);B&&z.push([C,y,B/2])});z.sort(function(G,F){return G[2]-F[2]});var C=y=void 0;if(z[0]){var E=6*z[0][2];C=z[0][0]/E;y=z[0][1]/E;if(C<m||C>u||y<w||y>A)C=y=void 0}if(void 0===C||void 0===y)if(x=x[0]&&x[0].length?this._getLineCentroid(x[0]):
null)C=x.x,y=x.y;x=isNaN(C)||isNaN(y)?null:new e(C,y,this.spatialReference);this.setCacheValue("_centroid",x);return x},_getLineCentroid:function(x){var y=0,B=0,z=0,b={x:0,y:0},c={x:0,y:0},m,u=x.length,w;for(m=0;m<u-1;m++){var A=x[m];var C=x[m+1];if(A&&C){b.x=A[0];b.y=A[1];c.x=C[0];c.y=C[1];var E=h.getLength(b,c);0<E&&(y+=E,A=h.getMidpoint(A,C),B+=E*A[0],z+=E*A[1])}}0<y?w={x:B/y,y:z/y}:x[0]&&(w={x:x[0][0],y:x[0][1]});return w},isClockwise:function(x){var y=0,B,z=x.length,b=a.isArray(x[0])?function(c,
m){return c[0]*m[1]-m[0]*c[1]}:function(c,m){return c.x*m.y-m.x*c.y};for(B=0;B<z;B++)y+=b(x[B],x[(B+1)%z]);return 0>=y/2},isSelfIntersecting:function(x){x=x||this;var y,B,z,b,c,m=x.rings.length;for(z=0;z<m;z++){for(y=0;y<x.rings[z].length-1;y++){var u=[[x.rings[z][y][0],x.rings[z][y][1]],[x.rings[z][y+1][0],x.rings[z][y+1][1]]];for(B=z+1;B<m;B++)for(b=0;b<x.rings[B].length-1;b++){var w=[[x.rings[B][b][0],x.rings[B][b][1]],[x.rings[B][b+1][0],x.rings[B][b+1][1]]];if((c=h._getLineIntersection2(u,w))&&
!(c[0]===u[0][0]&&c[1]===u[0][1]||c[0]===w[0][0]&&c[1]===w[0][1]||c[0]===u[1][0]&&c[1]===u[1][1]||c[0]===w[1][0]&&c[1]===w[1][1]))return!0}}b=x.rings[z].length;if(!(4>=b))for(y=0;y<b-3;y++){var A=b-1;0===y&&(A=b-2);u=[[x.rings[z][y][0],x.rings[z][y][1]],[x.rings[z][y+1][0],x.rings[z][y+1][1]]];for(B=y+2;B<A;B++)if(w=[[x.rings[z][B][0],x.rings[z][B][1]],[x.rings[z][B+1][0],x.rings[z][B+1][1]]],(c=h._getLineIntersection2(u,w))&&!(c[0]===u[0][0]&&c[1]===u[0][1]||c[0]===w[0][0]&&c[1]===w[0][1]||c[0]===
u[1][0]&&c[1]===u[1][1]||c[0]===w[1][0]&&c[1]===w[1][1]))return!0}}return!1},toJson:function(){var x={rings:p.clone3DArray(this.rings)},y=this.spatialReference;y&&(x.spatialReference=y.toJson());return x}});r.prototype=v.prototype;q.prototype=new r;Object.defineProperty(q.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:p.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(x){this._ringsVal=x}});q.prototype.setupLazyUnquantization=
function(x,y){this._unquantizeFn=x;this._ringsVal=y.rings};v.simpleConstructor=r;v.accessorConstructor=q;v.defaultProps=f;v.createEllipse=function(x){var y=x.center.x,B=x.center.y,z=x.longAxis,b=x.shortAxis,c=x.numberOfPoints,m=x.map,u;x=[];var w=2*Math.PI/c;for(u=0;u<c;u++){var A=Math.cos(u*w);var C=Math.sin(u*w);A=m.toMap({x:z*A+y,y:b*C+B});x.push(A)}x.push(x[0]);y=new v(m.spatialReference);y.addRing(x);return y};v.createCircle=function(x){return v.createEllipse({center:x.center,longAxis:x.r,shortAxis:x.r,
numberOfPoints:x.numberOfPoints,map:x.map})};v.fromExtent=function(x){var y=x.normalize();x=x.spatialReference;return new v({rings:k.map(y,function(B){return[[B.xmin,B.ymin],[B.xmin,B.ymax],[B.xmax,B.ymax],[B.xmax,B.ymin],[B.xmin,B.ymin]]}),spatialReference:x?x.toJson():null})};a.setObject("geometry.Polygon",v,g);g.geometry.defaultPolygon=f;g.geometry.createEllipse=v.createEllipse;g.geometry.createCircle=v.createCircle;g.geometry.isClockwise=v.prototype.isClockwise;g.geometry.polygonSelfIntersecting=
v.prototype.isSelfIntersecting;return v})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,k,a,f,g,p,n,d,e,l,h){function t(){}function r(){}f={type:"polyline",paths:null};D=D(d,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(q){this.paths=[];this._path=0;q&&(a.isArray(q)?this.paths=a.isArray(q[0][0])?q:
[q]:q.paths?p.mixin(this,q):this.spatialReference=q,this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(q){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];a.isArray(q[0])?k.forEach(q,this._addPointArr,this):k.forEach(q,this._addPoint,this);return this},_addPointArr:function(q){this.paths[this._path].push(q)},_addPoint:function(q){this.paths[this._path].push([q.x,q.y])},_insertPoints:function(q,v){this.clearCache();
this._path=v;this.paths[this._path]||(this.paths[this._path]=[]);k.forEach(q,this._addPoint,this)},_validateInputs:function(q,v){return null!==q&&void 0!==q&&(0>q||q>=this.paths.length)||null!==v&&void 0!==q&&(0>v||v>=this.paths[q].length)?!1:!0},getPoint:function(q,v){if(this._validateInputs(q,v))return new e(this.paths[q][v],this.spatialReference)},setPoint:function(q,v,x){if(this._validateInputs(q,v))return this.clearCache(),this.paths[q][v]=[x.x,x.y],this},insertPoint:function(q,v,x){if(this._validateInputs(q)&&
null!=v&&0<=v&&v<=this.paths[q].length)return this.clearCache(),this.paths[q].splice(v,0,[x.x,x.y]),this},removePath:function(q){if(this._validateInputs(q,null)){this.clearCache();q=this.paths.splice(q,1)[0];var v,x=q.length,y=this.spatialReference;for(v=0;v<x;v++)q[v]=new e(q[v],y);return q}},removePoint:function(q,v){if(this._validateInputs(q,v))return this.clearCache(),new e(this.paths[q].splice(v,1)[0],this.spatialReference)},getExtent:function(){var q=this.getCacheValue("_extent");var v=this.getCacheValue("_partwise");
if(q)return q=new l(q),q._partwise=v,q;q=this.paths;var x=q.length;if(x&&q[0].length){var y,B,z,b,c=y=q[0][0][0],m=B=q[0][0][1],u=Math.min,w=Math.max,A=this.spatialReference;v=[];var C,E;for(z=0;z<x;z++){var G=q[z];var F=C=G[0]&&G[0][0];var I=E=G[0]&&G[0][1];var M=G.length;for(b=0;b<M;b++){var Y=G[b];var R=Y[0];Y=Y[1];c=u(c,R);m=u(m,Y);y=w(y,R);B=w(B,Y);F=u(F,R);I=u(I,Y);C=w(C,R);E=w(E,Y)}v.push(new l({xmin:F,ymin:I,xmax:C,ymax:E,spatialReference:A?A.toJson():null}))}q={xmin:c,ymin:m,xmax:y,ymax:B,
spatialReference:A?A.toJson():null};v=1<v.length?v:null;this.setCacheValue("_extent",q);this.setCacheValue("_partwise",v);q=new l(q);q._partwise=v;return q}},toJson:function(){var q={paths:p.clone3DArray(this.paths)},v=this.spatialReference;v&&(q.spatialReference=v.toJson());return q}});t.prototype=D.prototype;r.prototype=new t;Object.defineProperty(r.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:p.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=
null);return this._pathsVal},set:function(q){this._pathsVal=q}});r.prototype.setupLazyUnquantization=function(q,v){this._unquantizeFn=q;this._pathsVal=v.paths};D.simpleConstructor=t;D.accessorConstructor=r;D.defaultProps=f;a.setObject("geometry.Polyline",D,g);g.geometry.defaultPolyline=f;return D})},"esri/libs/luxon/luxon":function(){define(["exports"],function(D){function k(T,aa){for(var H=0;H<aa.length;H++){var W=aa[H];W.enumerable=W.enumerable||!1;W.configurable=!0;"value"in W&&(W.writable=!0);
Object.defineProperty(T,W.key,W)}}function a(T,aa,H){aa&&k(T.prototype,aa);H&&k(T,H);return T}function f(){f=Object.assign||function(T){for(var aa=1;aa<arguments.length;aa++){var H=arguments[aa],W;for(W in H)Object.prototype.hasOwnProperty.call(H,W)&&(T[W]=H[W])}return T};return f.apply(this,arguments)}function g(T,aa){T.prototype=Object.create(aa.prototype);T.prototype.constructor=T;n(T,aa)}function p(T){p=Object.setPrototypeOf?Object.getPrototypeOf:function(aa){return aa.__proto__||Object.getPrototypeOf(aa)};
return p(T)}function n(T,aa){n=Object.setPrototypeOf||function(H,W){H.__proto__=W;return H};return n(T,aa)}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(T){return!1}}function e(T,aa,H){e=d()?Reflect.construct:function(W,ba,ja){var ra=[null];ra.push.apply(ra,ba);W=new (Function.bind.apply(W,ra));ja&&n(W,ja.prototype);
return W};return e.apply(null,arguments)}function l(T){var aa="function"===typeof Map?new Map:void 0;l=function(H){function W(){return e(H,arguments,p(this).constructor)}if(null===H||-1===Function.toString.call(H).indexOf("[native code]"))return H;if("function"!==typeof H)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof aa){if(aa.has(H))return aa.get(H);aa.set(H,W)}W.prototype=Object.create(H.prototype,{constructor:{value:W,enumerable:!1,writable:!0,
configurable:!0}});return n(W,H)};return l(T)}function h(T,aa){if(null==T)return{};var H={},W=Object.keys(T),ba;for(ba=0;ba<W.length;ba++){var ja=W[ba];0<=aa.indexOf(ja)||(H[ja]=T[ja])}return H}function t(T,aa){if(T){if("string"===typeof T)return r(T,aa);var H=Object.prototype.toString.call(T).slice(8,-1);"Object"===H&&T.constructor&&(H=T.constructor.name);if("Map"===H||"Set"===H)return Array.from(T);if("Arguments"===H||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return r(T,aa)}}function r(T,
aa){if(null==aa||aa>T.length)aa=T.length;for(var H=0,W=Array(aa);H<aa;H++)W[H]=T[H];return W}function q(T,aa){var H="undefined"!==typeof Symbol&&T[Symbol.iterator]||T["@@iterator"];if(H)return(H=H.call(T)).next.bind(H);if(Array.isArray(T)||(H=t(T))||aa&&T&&"number"===typeof T.length){H&&(T=H);var W=0;return function(){return W>=T.length?{done:!0}:{done:!1,value:T[W++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function v(T){return"undefined"===typeof T}function x(T){return"number"===typeof T}function y(T){return"number"===typeof T&&0===T%1}function B(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(T){return!1}}function z(T,aa,H){if(0!==T.length)return T.reduce(function(W,ba){var ja=[aa(ba),ba];return W?H(W[0],ja[0])===W[0]?W:ja:ja},null)[1]}function b(T,aa){return aa.reduce(function(H,W){H[W]=T[W];return H},{})}function c(T,aa){return Object.prototype.hasOwnProperty.call(T,aa)}function m(T,
aa,H){return y(T)&&T>=aa&&T<=H}function u(T,aa){void 0===aa&&(aa=2);return 0>T?"-"+(""+-T).padStart(aa,"0"):(""+T).padStart(aa,"0")}function w(T){if(!v(T)&&null!==T&&""!==T)return parseInt(T,10)}function A(T){if(!v(T)&&null!==T&&""!==T)return parseFloat(T)}function C(T){if(!v(T)&&null!==T&&""!==T)return T=1E3*parseFloat("0."+T),Math.floor(T)}function E(T,aa,H){void 0===H&&(H=!1);aa=Math.pow(10,aa);return(H?Math.trunc:Math.round)(T*aa)/aa}function G(T){return 0===T%4&&(0!==T%100||0===T%400)}function F(T,
aa){var H=aa-1;H=H-12*Math.floor(H/12)+1;return 2===H?G(T+(aa-H)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][H-1]}function I(T){var aa=Date.UTC(T.year,T.month-1,T.day,T.hour,T.minute,T.second,T.millisecond);100>T.year&&0<=T.year&&(aa=new Date(aa),aa.setUTCFullYear(aa.getUTCFullYear()-1900));return+aa}function M(T){var aa=T-1;aa=(aa+Math.floor(aa/4)-Math.floor(aa/100)+Math.floor(aa/400))%7;return 4===(T+Math.floor(T/4)-Math.floor(T/100)+Math.floor(T/400))%7||3===aa?53:52}function Y(T){return 99<
T?T:60<T?1900+T:2E3+T}function R(T,aa,H,W){void 0===W&&(W=null);T=new Date(T);var ba={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};W&&(ba.timeZone=W);aa=f({timeZoneName:aa},ba);return(H=(new Intl.DateTimeFormat(H,aa)).formatToParts(T).find(function(ja){return"timezonename"===ja.type.toLowerCase()}))?H.value:null}function S(T,aa){var H=parseInt(T,10);Number.isNaN(H)&&(H=0);var W=parseInt(aa,10)||0;W=0>H||Object.is(H,-0)?-W:W;return 60*H+W}function O(T){var aa=
Number(T);if("boolean"===typeof T||""===T||Number.isNaN(aa))throw new cb("Invalid unit value "+T);return aa}function L(T,aa){var H={},W;for(W in T)if(c(T,W)){var ba=T[W];void 0!==ba&&null!==ba&&(H[aa(W)]=O(ba))}return H}function P(T,aa){var H=Math.trunc(Math.abs(T/60)),W=Math.trunc(Math.abs(T%60)),ba=0<=T?"+":"-";switch(aa){case "short":return""+ba+u(H,2)+":"+u(W,2);case "narrow":return""+ba+H+(0<W?":"+W:"");case "techie":return""+ba+u(H,2)+u(W,2);default:throw new RangeError("Value format "+aa+" is out of range for property format");
}}function X(T){return b(T,["hour","minute","second","millisecond"])}function Q(T){switch(T){case "narrow":return[].concat(Sc);case "short":return[].concat(Ub);case "long":return[].concat(Tc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function K(T){switch(T){case "narrow":return[].concat(Uc);case "short":return[].concat(Vb);case "long":return[].concat(Wb);case "numeric":return"1234567".split("");
default:return null}}function U(T){switch(T){case "narrow":return[].concat(Vc);case "short":return[].concat(Wc);case "long":return[].concat(Xc);default:return null}}function da(T,aa,H,W){void 0===H&&(H="always");void 0===W&&(W=!1);var ba={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},ja=-1===["hours","minutes","seconds"].indexOf(T);if("auto"===H&&ja)switch(H=
"days"===T,aa){case 1:return H?"tomorrow":"next "+ba[T][0];case -1:return H?"yesterday":"last "+ba[T][0];case 0:return H?"today":"this "+ba[T][0]}H=Object.is(aa,-0)||0>aa;aa=Math.abs(aa);ja=1===aa;var ra=ba[T];T=W?ja?ra[1]:ra[2]||ra[1]:ja?ba[T][0]:T;return H?aa+" "+T+" ago":"in "+aa+" "+T}function fa(T,aa){for(var H="",W=q(T),ba;!(ba=W()).done;)ba=ba.value,H=ba.literal?H+ba.val:H+aa(ba.val);return H}function ia(T,aa){if(v(T)||null===T)return aa;if(T instanceof nb)return T;if("string"===typeof T){var H=
T.toLowerCase();return"local"===H||"system"===H?aa:"utc"===H||"gmt"===H?eb.utcInstance:eb.parseSpecifier(H)||jb.create(T)}return x(T)?eb.instance(T):"object"===typeof T&&T.offset&&"number"===typeof T.offset?T:new Xb(T)}function la(T,aa){void 0===aa&&(aa={});var H=JSON.stringify([T,aa]),W=Fb[H];W||(W=new Intl.DateTimeFormat(T,aa),Fb[H]=W);return W}function ma(T){for(var aa=[],H=1;12>=H;H++){var W=Va.utc(2016,H,1);aa.push(T(W))}return aa}function ta(T){for(var aa=[],H=1;7>=H;H++){var W=Va.utc(2016,
11,13+H);aa.push(T(W))}return aa}function ua(T,aa,H,W,ba){T=T.listingMode(H);return"error"===T?null:"en"===T?W(aa):ba(aa)}function Ca(){for(var T=arguments.length,aa=Array(T),H=0;H<T;H++)aa[H]=arguments[H];T=aa.reduce(function(W,ba){return W+ba.source},"");return RegExp("^"+T+"$")}function xa(){for(var T=arguments.length,aa=Array(T),H=0;H<T;H++)aa[H]=arguments[H];return function(W){return aa.reduce(function(ba,ja){var ra=ba[0],za=ba[1],Ga=ja(W,ba[2]),Ia=Ga[1],Pa=Ga[2];return[f({},ra,Ga[0]),Ia||za,
Pa]},[{},null,1]).slice(0,2)}}function Ba(T){if(null==T)return[null,null];for(var aa=arguments.length,H=Array(1<aa?aa-1:0),W=1;W<aa;W++)H[W-1]=arguments[W];for(aa=0;aa<H.length;aa++){var ba=H[aa];W=ba[1];if(ba=ba[0].exec(T))return W(ba)}return[null,null]}function Z(){for(var T=arguments.length,aa=Array(T),H=0;H<T;H++)aa[H]=arguments[H];return function(W,ba){var ja={},ra;for(ra=0;ra<aa.length;ra++)ja[aa[ra]]=w(W[ba+ra]);return[ja,null,ba+ra]}}function ka(T,aa,H){T=T[aa];return v(T)?H:w(T)}function qa(T,
aa){return[{hours:ka(T,aa,0),minutes:ka(T,aa+1,0),seconds:ka(T,aa+2,0),milliseconds:C(T[aa+3])},null,aa+4]}function ha(T,aa){var H=!T[aa]&&!T[aa+1],W=S(T[aa+1],T[aa+2]);return[{},H?null:eb.instance(W),aa+3]}function ea(T,aa){return[{},T[aa]?jb.create(T[aa]):null,aa+1]}function na(T){var aa=T[2],H=T[3],W=T[4],ba=T[5],ja=T[6],ra=T[7],za=T[8],Ga="-"===T[0][0],Ia=ra&&"-"===ra[0],Pa=function(Ua,Ra){void 0===Ra&&(Ra=!1);return void 0!==Ua&&(Ra||Ua&&Ga)?-Ua:Ua};return[{years:Pa(A(T[1])),months:Pa(A(aa)),
weeks:Pa(A(H)),days:Pa(A(W)),hours:Pa(A(ba)),minutes:Pa(A(ja)),seconds:Pa(A(ra),"-0"===ra),milliseconds:Pa(C(za),Ia)}]}function N(T,aa,H,W,ba,ja,ra){aa={year:2===aa.length?Y(w(aa)):w(aa),month:Ub.indexOf(H)+1,day:w(W),hour:w(ba),minute:w(ja)};ra&&(aa.second=w(ra));T&&(aa.weekday=3<T.length?Wb.indexOf(T)+1:Vb.indexOf(T)+1);return aa}function V(T){var aa=T[8],H=T[9],W=T[10],ba=T[11];T=N(T[1],T[4],T[3],T[2],T[5],T[6],T[7]);aa=aa?Yc[aa]:H?0:S(W,ba);return[T,new eb(aa)]}function ca(T){return[N(T[1],T[4],
T[3],T[2],T[5],T[6],T[7]),eb.utcInstance]}function J(T){return[N(T[1],T[7],T[2],T[3],T[4],T[5],T[6]),eb.utcInstance]}function pa(T,aa,H){void 0===H&&(H=!1);T={values:H?aa.values:f({},T.values,aa.values||{}),loc:T.loc.clone(aa.loc),conversionAccuracy:aa.conversionAccuracy||T.conversionAccuracy};return new Za(T)}function sa(T,aa,H,W,ba){T=T[ba][H];var ja=aa[H]/T;ja=Math.sign(ja)!==Math.sign(W[ba])&&0!==W[ba]&&1>=Math.abs(ja)?0>ja?Math.floor(ja):Math.ceil(ja):Math.trunc(ja);W[ba]+=ja;aa[H]-=ja*T}function oa(T,
aa){Zc.reduce(function(H,W){if(v(aa[W]))return H;H&&sa(T,aa,H,aa,W);return W},null)}function Oa(T,aa){var H=function(W){return W.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};H=H(aa)-H(T);return Math.floor(Za.fromMillis(H).as("days"))}function Sa(T,aa,H){for(var W={},ba,ja,ra=0,za=[["years",function(Ra,Ta){return Ta.year-Ra.year}],["quarters",function(Ra,Ta){return Ta.quarter-Ra.quarter}],["months",function(Ra,Ta){return Ta.month-Ra.month+12*(Ta.year-Ra.year)}],["weeks",function(Ra,Ta){var db=
Oa(Ra,Ta);return(db-db%7)/7}],["days",Oa]];ra<za.length;ra++){var Ga=za[ra],Ia=Ga[0];Ga=Ga[1];if(0<=H.indexOf(Ia)){var Pa;ba=Ia;Ga=Ga(T,aa);ja=T.plus((Pa={},Pa[Ia]=Ga,Pa));if(ja>aa){var Ua;T=T.plus((Ua={},Ua[Ia]=Ga-1,Ua));--Ga}else T=ja;W[Ia]=Ga}}return[T,W,ja,ba]}function va(T,aa,H,W){var ba=Sa(T,aa,H);T=ba[0];var ja=ba[1],ra=ba[2],za=ba[3];ba=aa-T;H=H.filter(function(Pa){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(Pa)});if(0===H.length){if(ra<aa){var Ga;ra=T.plus((Ga={},Ga[za]=
1,Ga))}ra!==T&&(ja[za]=(ja[za]||0)+ba/(ra-T))}aa=Za.fromObject(ja,W);if(0<H.length){var Ia;return(Ia=Za.fromMillis(ba,W)).shiftTo.apply(Ia,H).plus(aa)}return aa}function Da(T,aa){var H=T.numberingSystem;void 0===aa&&(aa="");return new RegExp(""+Gb[H||"latn"]+aa)}function ya(T,aa){void 0===aa&&(aa=function(H){return H});return{regex:T,deser:function(H){var W=aa;H=H[0];var ba=parseInt(H,10);if(isNaN(ba)){ba="";for(var ja=0;ja<H.length;ja++){var ra=H.charCodeAt(ja);if(-1!==H[ja].search(Gb.hanidec))ba+=
$c.indexOf(H[ja]);else for(Ia in Yb){var za=Yb[Ia],Ga=za[0];za=za[1];ra>=Ga&&ra<=za&&(ba+=ra-Ga)}}var Ia=parseInt(ba,10)}else Ia=ba;return W(Ia)}}}function wa(T){return T.replace(/\./g,"\\.?").replace(Hb,Zb)}function Aa(T,aa){return null===T?null:{regex:RegExp(T.map(wa).join("|")),deser:function(H){var W=H[0];return T.findIndex(function(ba){return W.replace(/\./g,"").replace(Hb," ").toLowerCase()===ba.replace(/\./g,"").replace(Hb," ").toLowerCase()})+aa}}}function Ea(T,aa){return{regex:T,deser:function(H){return S(H[1],
H[2])},groups:aa}}function Fa(T){return{regex:T,deser:function(aa){return aa[0]}}}function La(T,aa){var H=Da(aa),W=Da(aa,"{2}"),ba=Da(aa,"{3}"),ja=Da(aa,"{4}"),ra=Da(aa,"{6}"),za=Da(aa,"{1,2}"),Ga=Da(aa,"{1,3}"),Ia=Da(aa,"{1,6}"),Pa=Da(aa,"{1,9}"),Ua=Da(aa,"{2,4}"),Ra=Da(aa,"{4,6}"),Ta=function(bb){return{regex:RegExp(bb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(ad){return ad[0]},literal:!0}},db=function(bb){if(T.literal)return Ta(bb);switch(bb.val){case "G":return Aa(aa.eras("short",
!1),0);case "GG":return Aa(aa.eras("long",!1),0);case "y":return ya(Ia);case "yy":return ya(Ua,Y);case "yyyy":return ya(ja);case "yyyyy":return ya(Ra);case "yyyyyy":return ya(ra);case "M":return ya(za);case "MM":return ya(W);case "MMM":return Aa(aa.months("short",!0,!1),1);case "MMMM":return Aa(aa.months("long",!0,!1),1);case "L":return ya(za);case "LL":return ya(W);case "LLL":return Aa(aa.months("short",!1,!1),1);case "LLLL":return Aa(aa.months("long",!1,!1),1);case "d":return ya(za);case "dd":return ya(W);
case "o":return ya(Ga);case "ooo":return ya(ba);case "HH":return ya(W);case "H":return ya(za);case "hh":return ya(W);case "h":return ya(za);case "mm":return ya(W);case "m":return ya(za);case "q":return ya(za);case "qq":return ya(W);case "s":return ya(za);case "ss":return ya(W);case "S":return ya(Ga);case "SSS":return ya(ba);case "u":return Fa(Pa);case "uu":return Fa(za);case "uuu":return ya(H);case "a":return Aa(aa.meridiems(),0);case "kkkk":return ya(ja);case "kk":return ya(Ua,Y);case "W":return ya(za);
case "WW":return ya(W);case "E":case "c":return ya(H);case "EEE":return Aa(aa.weekdays("short",!1,!1),1);case "EEEE":return Aa(aa.weekdays("long",!1,!1),1);case "ccc":return Aa(aa.weekdays("short",!0,!1),1);case "cccc":return Aa(aa.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Ea(new RegExp("([+-]"+za.source+")(?::("+W.source+"))?"),2);case "ZZZ":return Ea(new RegExp("([+-]"+za.source+")("+W.source+")?"),2);case "z":return Fa(/[a-z_+-/]{1,256}?/i);default:return Ta(bb)}}(T)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};
db.token=T;return db}function Ja(T){return["^"+T.map(function(aa){return aa.regex}).reduce(function(aa,H){return aa+"("+H.source+")"},"")+"$",T]}function Na(T,aa,H){if(T=T.match(aa)){aa={};var W=1,ba;for(ba in H)if(c(H,ba)){var ja=H[ba],ra=ja.groups?ja.groups+1:1;!ja.literal&&ja.token&&(aa[ja.token.val[0]]=ja.deser(T.slice(W,W+ra)));W+=ra}return[T,aa]}return[T,{}]}function Ha(T){var aa=function(ba){switch(ba){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";
case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}},H=null;v(T.z)||(H=jb.create(T.z));if(!v(T.Z)){H||(H=new eb(T.Z));var W=T.Z}v(T.q)||(T.M=3*(T.q-1)+1);v(T.h)||(12>T.h&&1===T.a?T.h+=12:12===T.h&&0===T.a&&(T.h=0));0===T.G&&T.y&&(T.y=-T.y);v(T.u)||(T.S=C(T.u));return[Object.keys(T).reduce(function(ba,ja){var ra=aa(ja);
ra&&(ba[ra]=T[ja]);return ba},{}),H,W]}function Ma(){Ib||(Ib=Va.fromMillis(1555555555555));return Ib}function Ka(T,aa){if(T.literal)return T;var H=hb.macroTokenToFormatOpts(T.val);if(!H)return T;var W=hb.create(aa,H).formatDateTimeParts(Ma()).map(function(ba){var ja=ba.type;ba=ba.value;"literal"===ja?ja={literal:!0,val:ba}:(ba=H[ja],ja=bd[ja],"object"===typeof ja&&(ja=ja[ba]),ja=ja?{literal:!1,val:ja}:void 0);return ja});return W.includes(void 0)?T:W}function Qa(T,aa){var H;return(H=Array.prototype).concat.apply(H,
T.map(function(W){return Ka(W,aa)}))}function $a(T,aa,H){H=Qa(hb.parseFormat(H),T);var W=H.map(function(Ia){return La(Ia,T)}),ba=W.find(function(Ia){return Ia.invalidReason});if(ba)return{input:aa,tokens:H,invalidReason:ba.invalidReason};ba=Ja(W);W=RegExp(ba[0],"i");var ja=Na(aa,W,ba[1]);ba=ja[0];var ra=(ja=ja[1])?Ha(ja):[null,null,void 0],za=ra[0],Ga=ra[1];ra=ra[2];if(c(ja,"a")&&c(ja,"H"))throw new ob("Can't include meridiem when specifying 24-hour format");return{input:aa,tokens:H,regex:W,rawMatches:ba,
matches:ja,result:za,zone:Ga,specificOffset:ra}}function ab(T,aa){return new fb("unit out of range","you specified "+aa+" (of type "+typeof aa+") as a "+T+", which is invalid")}function gb(T,aa,H){aa=new Date(Date.UTC(T,aa-1,H));100>T&&0<=T&&aa.setUTCFullYear(aa.getUTCFullYear()-1900);T=aa.getUTCDay();return 0===T?7:T}function wb(T,aa){var H=G(T)?Jb:Kb,W=H.findIndex(function(ba){return ba<aa});return{month:W+1,day:aa-H[W]}}function pb(T){var aa=T.year,H=T.month,W=T.day;var ba=W+(G(aa)?Jb:Kb)[H-1];
H=gb(aa,H,W);ba=Math.floor((ba-H+10)/7);1>ba?(--aa,ba=M(aa)):ba>M(aa)&&(aa+=1,ba=1);return f({weekYear:aa,weekNumber:ba,weekday:H},X(T))}function xb(T){var aa=T.weekYear,H=T.weekNumber,W=T.weekday,ba=gb(aa,1,4),ja=G(aa)?366:365;H=7*H+W-ba-3;1>H?(ja=aa-1,H+=G(ja)?366:365):H>ja?(ja=aa+1,H-=G(aa)?366:365):ja=aa;aa=wb(ja,H);return f({year:ja,month:aa.month,day:aa.day},X(T))}function qb(T){var aa=T.year;var H=T.month;H=T.day+(G(aa)?Jb:Kb)[H-1];return f({year:aa,ordinal:H},X(T))}function kb(T){var aa=T.year,
H=wb(aa,T.ordinal);return f({year:aa,month:H.month,day:H.day},X(T))}function yb(T){var aa=y(T.year),H=m(T.month,1,12),W=m(T.day,1,F(T.year,T.month));return aa?H?W?!1:ab("day",T.day):ab("month",T.month):ab("year",T.year)}function zb(T){var aa=T.hour,H=T.minute,W=T.second;T=T.millisecond;var ba=m(aa,0,23)||24===aa&&0===H&&0===W&&0===T,ja=m(H,0,59),ra=m(W,0,59),za=m(T,0,999);return ba?ja?ra?za?!1:ab("millisecond",T):ab("second",W):ab("minute",H):ab("hour",aa)}function Wa(T){return new fb("unsupported zone",
'the zone "'+T.name+'" is not supported')}function Lb(T){null===T.weekData&&(T.weekData=pb(T.c));return T.weekData}function rb(T,aa){var H={ts:T.ts,zone:T.zone,c:T.c,o:T.o,loc:T.loc,invalid:T.invalid};return new Va(f({},H,aa,{old:H}))}function $b(T,aa,H){var W=T-6E4*aa,ba=H.offset(W);if(aa===ba)return[W,aa];W-=6E4*(ba-aa);aa=H.offset(W);return ba===aa?[W,ba]:[T-6E4*Math.min(ba,aa),Math.max(ba,aa)]}function ac(T,aa){var H=new Date(T+6E4*aa);return{year:H.getUTCFullYear(),month:H.getUTCMonth()+1,day:H.getUTCDate(),
hour:H.getUTCHours(),minute:H.getUTCMinutes(),second:H.getUTCSeconds(),millisecond:H.getUTCMilliseconds()}}function Ab(T,aa,H){return $b(I(T),aa,H)}function bc(T,aa){var H=T.o,W=T.c.year+Math.trunc(aa.years),ba=T.c.month+Math.trunc(aa.months)+3*Math.trunc(aa.quarters);ba=f({},T.c,{year:W,month:ba,day:Math.min(T.c.day,F(W,ba))+Math.trunc(aa.days)+7*Math.trunc(aa.weeks)});W=Za.fromObject({years:aa.years-Math.trunc(aa.years),quarters:aa.quarters-Math.trunc(aa.quarters),months:aa.months-Math.trunc(aa.months),
weeks:aa.weeks-Math.trunc(aa.weeks),days:aa.days-Math.trunc(aa.days),hours:aa.hours,minutes:aa.minutes,seconds:aa.seconds,milliseconds:aa.milliseconds}).as("milliseconds");ba=I(ba);ba=$b(ba,H,T.zone);H=ba[0];ba=ba[1];0!==W&&(H+=W,ba=T.zone.offset(H));return{ts:H,o:ba}}function sb(T,aa,H,W,ba,ja){var ra=H.setZone,za=H.zone;return T&&0!==Object.keys(T).length?(T=Va.fromObject(T,f({},H,{zone:aa||za,specificOffset:ja})),ra?T:T.setZone(za)):Va.invalid(new fb("unparsable",'the input "'+ba+"\" can't be parsed as "+
W))}function Bb(T,aa,H){void 0===H&&(H=!0);return T.isValid?hb.create(Ya.create("en-US"),{allowZ:H,forceSimple:!0}).formatDateTimeFromString(T,aa):null}function Mb(T,aa){var H=9999<T.c.year||0>T.c.year,W="";H&&0<=T.c.year&&(W+="+");W+=u(T.c.year,H?6:4);aa?(W=W+"-"+u(T.c.month),W=W+"-"+u(T.c.day)):(W+=u(T.c.month),W+=u(T.c.day));return W}function cc(T,aa,H,W,ba,ja){var ra=u(T.c.hour);aa?(ra=ra+":"+u(T.c.minute),0===T.c.second&&H||(ra+=":")):ra+=u(T.c.minute);0===T.c.second&&H||(ra+=u(T.c.second),0===
T.c.millisecond&&W||(ra=ra+"."+u(T.c.millisecond,3)));ba&&(T.isOffsetFixed&&0===T.offset&&!ja?ra+="Z":0>T.o?(ra=ra+"-"+u(Math.trunc(-T.o/60)),ra=ra+":"+u(Math.trunc(-T.o%60))):(ra=ra+"+"+u(Math.trunc(T.o/60)),ra=ra+":"+u(Math.trunc(T.o%60))));ja&&(ra+="["+T.zone.ianaName+"]");return ra}function dc(T){var aa={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",
millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[T.toLowerCase()];if(!aa)throw new ec(T);return aa}function fc(T,aa){var H=ia(aa.zone,Xa.defaultZone),W=Ya.fromObject(aa),ba=Xa.now();if(!v(T.year)){var ja=q(gc);for(var ra;!(ra=ja()).done;)ra=ra.value,v(T[ra])&&(T[ra]=hc[ra]);if(ja=yb(T)||zb(T))return Va.invalid(ja);ba=H.offset(ba);
ja=Ab(T,ba,H);ba=ja[0];ja=ja[1]}return new Va({ts:ba,zone:H,loc:W,o:ja})}function ic(T,aa,H){var W=v(H.round)?!0:H.round,ba=function(Ia,Pa){Ia=E(Ia,W||H.calendary?0:2,!0);return aa.loc.clone(H).relFormatter(H).format(Ia,Pa)},ja=function(Ia){return H.calendary?aa.hasSame(T,Ia)?0:aa.startOf(Ia).diff(T.startOf(Ia),Ia).get(Ia):aa.diff(T,Ia).get(Ia)};if(H.unit)return ba(ja(H.unit),H.unit);for(var ra=q(H.units),za;!(za=ra()).done;){za=za.value;var Ga=ja(za);if(1<=Math.abs(Ga))return ba(Ga,za)}return ba(T>
aa?-0:0,H.units[H.units.length-1])}function jc(T){var aa={};0<T.length&&"object"===typeof T[T.length-1]?(aa=T[T.length-1],T=Array.from(T).slice(0,T.length-1)):T=Array.from(T);return[aa,T]}function tb(T){if(Va.isDateTime(T))return T;if(T&&T.valueOf&&x(T.valueOf()))return Va.fromJSDate(T);if(T&&"object"===typeof T)return Va.fromObject(T);throw new cb("Unknown datetime argument: "+T+", of type "+typeof T);}var lb=function(T){function aa(){return T.apply(this,arguments)||this}g(aa,T);return aa}(l(Error)),
cd=function(T){function aa(H){return T.call(this,"Invalid DateTime: "+H.toMessage())||this}g(aa,T);return aa}(lb),dd=function(T){function aa(H){return T.call(this,"Invalid Interval: "+H.toMessage())||this}g(aa,T);return aa}(lb),ed=function(T){function aa(H){return T.call(this,"Invalid Duration: "+H.toMessage())||this}g(aa,T);return aa}(lb),ob=function(T){function aa(){return T.apply(this,arguments)||this}g(aa,T);return aa}(lb),ec=function(T){function aa(H){return T.call(this,"Invalid unit "+H)||this}
g(aa,T);return aa}(lb),cb=function(T){function aa(){return T.apply(this,arguments)||this}g(aa,T);return aa}(lb),ib=function(T){function aa(){return T.call(this,"Zone is an abstract class")||this}g(aa,T);return aa}(lb),Nb={year:"numeric",month:"numeric",day:"numeric"},kc={year:"numeric",month:"short",day:"numeric"},fd={year:"numeric",month:"short",day:"numeric",weekday:"short"},lc={year:"numeric",month:"long",day:"numeric"},mc={year:"numeric",month:"long",day:"numeric",weekday:"long"},nc={hour:"numeric",
minute:"numeric"},oc={hour:"numeric",minute:"numeric",second:"numeric"},pc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},qc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},rc={hour:"numeric",minute:"numeric",hourCycle:"h23"},sc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},tc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},uc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",
timeZoneName:"long"},vc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},wc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},yc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},gd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},zc={year:"numeric",month:"long",
day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Ac={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Cc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Dc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Tc="January February March April May June July August September October November December".split(" "),Ub="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Sc="JFMAMJJASOND".split(""),Wb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Vb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Uc="MTWTFSS".split(""),Ec=["AM","PM"],Xc=["Before Christ","Anno Domini"],Wc=["BC","AD"],Vc=["B","A"],hd={D:Nb,DD:kc,DDD:lc,DDDD:mc,t:nc,tt:oc,ttt:pc,tttt:qc,T:rc,TT:sc,TTT:tc,TTTT:uc,f:vc,ff:xc,
fff:zc,ffff:Bc,F:wc,FF:yc,FFF:Ac,FFFF:Cc},hb=function(){function T(H,W){this.opts=W;this.loc=H;this.systemLoc=null}T.create=function(H,W){void 0===W&&(W={});return new T(H,W)};T.parseFormat=function(H){for(var W=null,ba="",ja=!1,ra=[],za=0;za<H.length;za++){var Ga=H.charAt(za);"'"===Ga?(0<ba.length&&ra.push({literal:ja,val:ba}),W=null,ba="",ja=!ja):ja?ba+=Ga:Ga===W?ba+=Ga:(0<ba.length&&ra.push({literal:!1,val:ba}),W=ba=Ga)}0<ba.length&&ra.push({literal:ja,val:ba});return ra};T.macroTokenToFormatOpts=
function(H){return hd[H]};var aa=T.prototype;aa.formatWithSystemDefault=function(H,W){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(H,f({},this.opts,W)).format()};aa.formatDateTime=function(H,W){void 0===W&&(W={});return this.loc.dtFormatter(H,f({},this.opts,W)).format()};aa.formatDateTimeParts=function(H,W){void 0===W&&(W={});return this.loc.dtFormatter(H,f({},this.opts,W)).formatToParts()};aa.resolvedOptions=function(H,W){void 0===W&&(W={});
return this.loc.dtFormatter(H,f({},this.opts,W)).resolvedOptions()};aa.num=function(H,W){void 0===W&&(W=0);if(this.opts.forceSimple)return u(H,W);var ba=f({},this.opts);0<W&&(ba.padTo=W);return this.loc.numberFormatter(ba).format(H)};aa.formatDateTimeFromString=function(H,W){var ba=this,ja="en"===this.loc.listingMode(),ra=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,za=function(Ra,Ta){return ba.loc.extract(H,Ra,Ta)},Ga=function(Ra){return H.isOffsetFixed&&0===H.offset&&Ra.allowZ?"Z":
H.isValid?H.zone.formatOffset(H.ts,Ra.format):""},Ia=function(Ra,Ta){return ja?Q(Ra)[H.month-1]:za(Ta?{month:Ra}:{month:Ra,day:"numeric"},"month")},Pa=function(Ra,Ta){return ja?K(Ra)[H.weekday-1]:za(Ta?{weekday:Ra}:{weekday:Ra,month:"long",day:"numeric"},"weekday")},Ua=function(Ra){return ja?U(Ra)[0>H.year?0:1]:za({era:Ra},"era")};return fa(T.parseFormat(W),function(Ra){switch(Ra){case "S":return ba.num(H.millisecond);case "u":case "SSS":return ba.num(H.millisecond,3);case "s":return ba.num(H.second);
case "ss":return ba.num(H.second,2);case "uu":return ba.num(Math.floor(H.millisecond/10),2);case "uuu":return ba.num(Math.floor(H.millisecond/100));case "m":return ba.num(H.minute);case "mm":return ba.num(H.minute,2);case "h":return ba.num(0===H.hour%12?12:H.hour%12);case "hh":return ba.num(0===H.hour%12?12:H.hour%12,2);case "H":return ba.num(H.hour);case "HH":return ba.num(H.hour,2);case "Z":return Ga({format:"narrow",allowZ:ba.opts.allowZ});case "ZZ":return Ga({format:"short",allowZ:ba.opts.allowZ});
case "ZZZ":return Ga({format:"techie",allowZ:ba.opts.allowZ});case "ZZZZ":return H.zone.offsetName(H.ts,{format:"short",locale:ba.loc.locale});case "ZZZZZ":return H.zone.offsetName(H.ts,{format:"long",locale:ba.loc.locale});case "z":return H.zoneName;case "a":return ja?Ec[12>H.hour?0:1]:za({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ra?za({day:"numeric"},"day"):ba.num(H.day);case "dd":return ra?za({day:"2-digit"},"day"):ba.num(H.day,2);case "c":return ba.num(H.weekday);case "ccc":return Pa("short",
!0);case "cccc":return Pa("long",!0);case "ccccc":return Pa("narrow",!0);case "E":return ba.num(H.weekday);case "EEE":return Pa("short",!1);case "EEEE":return Pa("long",!1);case "EEEEE":return Pa("narrow",!1);case "L":return ra?za({month:"numeric",day:"numeric"},"month"):ba.num(H.month);case "LL":return ra?za({month:"2-digit",day:"numeric"},"month"):ba.num(H.month,2);case "LLL":return Ia("short",!0);case "LLLL":return Ia("long",!0);case "LLLLL":return Ia("narrow",!0);case "M":return ra?za({month:"numeric"},
"month"):ba.num(H.month);case "MM":return ra?za({month:"2-digit"},"month"):ba.num(H.month,2);case "MMM":return Ia("short",!1);case "MMMM":return Ia("long",!1);case "MMMMM":return Ia("narrow",!1);case "y":return ra?za({year:"numeric"},"year"):ba.num(H.year);case "yy":return ra?za({year:"2-digit"},"year"):ba.num(H.year.toString().slice(-2),2);case "yyyy":return ra?za({year:"numeric"},"year"):ba.num(H.year,4);case "yyyyyy":return ra?za({year:"numeric"},"year"):ba.num(H.year,6);case "G":return Ua("short");
case "GG":return Ua("long");case "GGGGG":return Ua("narrow");case "kk":return ba.num(H.weekYear.toString().slice(-2),2);case "kkkk":return ba.num(H.weekYear,4);case "W":return ba.num(H.weekNumber);case "WW":return ba.num(H.weekNumber,2);case "o":return ba.num(H.ordinal);case "ooo":return ba.num(H.ordinal,3);case "q":return ba.num(H.quarter);case "qq":return ba.num(H.quarter,2);case "X":return ba.num(Math.floor(H.ts/1E3));case "x":return ba.num(H.ts);default:var Ta=T.macroTokenToFormatOpts(Ra);Ra=
Ta?ba.formatWithSystemDefault(H,Ta):Ra;return Ra}})};aa.formatDurationFromString=function(H,W){var ba=this,ja=function(Ga){switch(Ga[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}},ra=T.parseFormat(W),za=ra.reduce(function(Ga,Ia){var Pa=Ia.val;return Ia.literal?Ga:Ga.concat(Pa)},[]);za=H.shiftTo.apply(H,za.map(ja).filter(function(Ga){return Ga}));
return fa(ra,function(Ga){return function(Ia){var Pa=ja(Ia);return Pa?ba.num(Ga.get(Pa),Ia.length):Ia}}(za))};return T}(),fb=function(){function T(aa,H){this.reason=aa;this.explanation=H}T.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return T}(),nb=function(){function T(){}var aa=T.prototype;aa.offsetName=function(H,W){throw new ib;};aa.formatOffset=function(H,W){throw new ib;};aa.offset=function(H){throw new ib;};aa.equals=function(H){throw new ib;
};a(T,[{key:"type",get:function(){throw new ib;}},{key:"name",get:function(){throw new ib;}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new ib;}},{key:"isValid",get:function(){throw new ib;}}]);return T}(),Ob=null,Fc=function(T){function aa(){return T.apply(this,arguments)||this}g(aa,T);var H=aa.prototype;H.offsetName=function(W,ba){return R(W,ba.format,ba.locale)};H.formatOffset=function(W,ba){return P(this.offset(W),ba)};H.offset=function(W){return-(new Date(W)).getTimezoneOffset()};
H.equals=function(W){return"system"===W.type};a(aa,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===Ob&&(Ob=new aa);return Ob}}]);return aa}(nb),Cb={},id={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},Db={},jb=function(T){function aa(W){var ba=T.call(this)||this;ba.zoneName=W;ba.valid=
aa.isValidZone(W);return ba}g(aa,T);aa.create=function(W){Db[W]||(Db[W]=new aa(W));return Db[W]};aa.resetCache=function(){Db={};Cb={}};aa.isValidSpecifier=function(W){return this.isValidZone(W)};aa.isValidZone=function(W){if(!W)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:W})).format(),!0}catch(ba){return!1}};var H=aa.prototype;H.offsetName=function(W,ba){return R(W,ba.format,ba.locale,this.name)};H.formatOffset=function(W,ba){return P(this.offset(W),ba)};H.offset=function(W){W=new Date(W);
if(isNaN(W))return NaN;var ba=this.name;Cb[ba]||(Cb[ba]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:ba,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));ba=Cb[ba];if(ba.formatToParts){ba=ba.formatToParts(W);for(var ja=[],ra=0;ra<ba.length;ra++){var za=ba[ra],Ga=za.type;za=za.value;var Ia=id[Ga];"era"===Ga?ja[Ia]=za:v(Ia)||(ja[Ia]=parseInt(za,10))}ba=ja}else ba=ba.format(W).replace(/\u200E/g,""),ba=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(ba),
ba=[ba[3],ba[1],ba[2],ba[4],ba[5],ba[6],ba[7]];ja=ba[0];ra=ba[1];Ga=ba[2];za=ba[4];Ia=ba[5];var Pa=ba[6];"BC"===ba[3]&&(ja=-Math.abs(ja)+1);ba=I({year:ja,month:ra,day:Ga,hour:24===za?0:za,minute:Ia,second:Pa,millisecond:0});W=+W;ja=W%1E3;return(ba-(W-(0<=ja?ja:1E3+ja)))/6E4};H.equals=function(W){return"iana"===W.type&&W.name===this.name};a(aa,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);
return aa}(nb),Pb=null,eb=function(T){function aa(W){var ba=T.call(this)||this;ba.fixed=W;return ba}g(aa,T);aa.instance=function(W){return 0===W?aa.utcInstance:new aa(W)};aa.parseSpecifier=function(W){return W&&(W=W.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new aa(S(W[1],W[2])):null};var H=aa.prototype;H.offsetName=function(){return this.name};H.formatOffset=function(W,ba){return P(this.fixed,ba)};H.offset=function(){return this.fixed};H.equals=function(W){return"fixed"===W.type&&W.fixed===
this.fixed};a(aa,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+P(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+P(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===Pb&&(Pb=new aa(0));return Pb}}]);return aa}(nb),Xb=function(T){function aa(W){var ba=T.call(this)||this;ba.zoneName=W;return ba}
g(aa,T);var H=aa.prototype;H.offsetName=function(){return null};H.formatOffset=function(){return""};H.offset=function(){return NaN};H.equals=function(){return!1};a(aa,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return aa}(nb),Gc=function(){return Date.now()},Hc="system",Ic=null,Jc=null,Kc=null,Lc,Xa=function(){function T(){}T.resetCaches=function(){Ya.resetCache();
jb.resetCache()};a(T,null,[{key:"now",get:function(){return Gc},set:function(aa){Gc=aa}},{key:"defaultZone",get:function(){return ia(Hc,Fc.instance)},set:function(aa){Hc=aa}},{key:"defaultLocale",get:function(){return Ic},set:function(aa){Ic=aa}},{key:"defaultNumberingSystem",get:function(){return Jc},set:function(aa){Jc=aa}},{key:"defaultOutputCalendar",get:function(){return Kc},set:function(aa){Kc=aa}},{key:"throwOnInvalid",get:function(){return Lc},set:function(aa){Lc=aa}}]);return T}(),jd=["base"],
kd=["padTo","floor"],Mc={},Fb={},Qb={},Rb={},Eb=null,ld=function(){function T(aa,H,W){this.padTo=W.padTo||0;this.floor=W.floor||!1;W.padTo;W.floor;var ba=h(W,kd);if(!H||0<Object.keys(ba).length)H=f({useGrouping:!1},W),0<W.padTo&&(H.minimumIntegerDigits=W.padTo),W=H,void 0===W&&(W={}),H=JSON.stringify([aa,W]),ba=Qb[H],ba||(ba=new Intl.NumberFormat(aa,W),Qb[H]=ba),this.inf=ba}T.prototype.format=function(aa){if(this.inf)return this.inf.format(this.floor?Math.floor(aa):aa);aa=this.floor?Math.floor(aa):
E(aa,3);return u(aa,this.padTo)};return T}(),md=function(){function T(H,W,ba){this.opts=ba;if(H.zone.isUniversal){var ja=H.offset/60*-1;ja=0<=ja?"Etc/GMT+"+ja:"Etc/GMT"+ja;0!==H.offset&&jb.create(ja).valid?this.dt=H:(ja="UTC",this.dt=ba.timeZoneName?H:0===H.offset?H:Va.fromMillis(H.ts+6E4*H.offset))}else"system"===H.zone.type?this.dt=H:(this.dt=H,ja=H.zone.name);H=f({},this.opts);ja&&(H.timeZone=ja);this.dtf=la(W,H)}var aa=T.prototype;aa.format=function(){return this.dtf.format(this.dt.toJSDate())};
aa.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};aa.resolvedOptions=function(){return this.dtf.resolvedOptions()};return T}(),nd=function(){function T(H,W,ba){this.opts=f({style:"long"},ba);if(!W&&B()){W=ba;void 0===W&&(W={});ba=W;ba.base;ba=h(ba,jd);ba=JSON.stringify([H,ba]);var ja=Rb[ba];ja||(ja=new Intl.RelativeTimeFormat(H,W),Rb[ba]=ja);this.rtf=ja}}var aa=T.prototype;aa.format=function(H,W){return this.rtf?this.rtf.format(H,W):da(W,H,this.opts.numeric,"long"!==this.opts.style)};
aa.formatToParts=function(H,W){return this.rtf?this.rtf.formatToParts(H,W):[]};return T}(),Ya=function(){function T(H,W,ba,ja){var ra=H.indexOf("-u-");if(-1===ra)H=[H];else{ra=H.substring(0,ra);try{var za=la(H).resolvedOptions()}catch(Ga){za=la(ra).resolvedOptions()}H=za;H=[ra,H.numberingSystem,H.calendar]}za=H[1];ra=H[2];this.locale=H[0];this.numberingSystem=W||za||null;this.outputCalendar=ba||ra||null;W=this.locale;ba=this.numberingSystem;if((H=this.outputCalendar)||ba)W+="-u",H&&(W+="-ca-"+H),
ba&&(W+="-nu-"+ba);this.intl=W;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=ja;this.fastNumbersCached=null}T.fromOpts=function(H){return T.create(H.locale,H.numberingSystem,H.outputCalendar,H.defaultToEN)};T.create=function(H,W,ba,ja){void 0===ja&&(ja=!1);H=H||Xa.defaultLocale;var ra;(ra=H)||(ja?ja="en-US":(Eb||(Eb=(new Intl.DateTimeFormat).resolvedOptions().locale),ja=Eb),ra=ja);return new T(ra,
W||Xa.defaultNumberingSystem,ba||Xa.defaultOutputCalendar,H)};T.resetCache=function(){Eb=null;Fb={};Qb={};Rb={}};T.fromObject=function(H){H=void 0===H?{}:H;return T.create(H.locale,H.numberingSystem,H.outputCalendar)};var aa=T.prototype;aa.listingMode=function(){var H=this.isEnglish(),W=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return H&&W?"en":"intl"};aa.clone=function(H){return H&&0!==Object.getOwnPropertyNames(H).length?
T.create(H.locale||this.specifiedLocale,H.numberingSystem||this.numberingSystem,H.outputCalendar||this.outputCalendar,H.defaultToEN||!1):this};aa.redefaultToEN=function(H){void 0===H&&(H={});return this.clone(f({},H,{defaultToEN:!0}))};aa.redefaultToSystem=function(H){void 0===H&&(H={});return this.clone(f({},H,{defaultToEN:!1}))};aa.months=function(H,W,ba){var ja=this;void 0===W&&(W=!1);void 0===ba&&(ba=!0);return ua(this,H,ba,Q,function(){var ra=W?{month:H,day:"numeric"}:{month:H},za=W?"format":
"standalone";ja.monthsCache[za][H]||(ja.monthsCache[za][H]=ma(function(Ga){return ja.extract(Ga,ra,"month")}));return ja.monthsCache[za][H]})};aa.weekdays=function(H,W,ba){var ja=this;void 0===W&&(W=!1);void 0===ba&&(ba=!0);return ua(this,H,ba,K,function(){var ra=W?{weekday:H,year:"numeric",month:"long",day:"numeric"}:{weekday:H},za=W?"format":"standalone";ja.weekdaysCache[za][H]||(ja.weekdaysCache[za][H]=ta(function(Ga){return ja.extract(Ga,ra,"weekday")}));return ja.weekdaysCache[za][H]})};aa.meridiems=
function(H){var W=this;void 0===H&&(H=!0);return ua(this,void 0,H,function(){return Ec},function(){if(!W.meridiemCache){var ba={hour:"numeric",hourCycle:"h12"};W.meridiemCache=[Va.utc(2016,11,13,9),Va.utc(2016,11,13,19)].map(function(ja){return W.extract(ja,ba,"dayperiod")})}return W.meridiemCache})};aa.eras=function(H,W){var ba=this;void 0===W&&(W=!0);return ua(this,H,W,U,function(){var ja={era:H};ba.eraCache[H]||(ba.eraCache[H]=[Va.utc(-40,1,1),Va.utc(2017,1,1)].map(function(ra){return ba.extract(ra,
ja,"era")}));return ba.eraCache[H]})};aa.extract=function(H,W,ba){return(H=this.dtFormatter(H,W).formatToParts().find(function(ja){return ja.type.toLowerCase()===ba}))?H.value:null};aa.numberFormatter=function(H){void 0===H&&(H={});return new ld(this.intl,H.forceSimple||this.fastNumbers,H)};aa.dtFormatter=function(H,W){void 0===W&&(W={});return new md(H,this.intl,W)};aa.relFormatter=function(H){void 0===H&&(H={});return new nd(this.intl,this.isEnglish(),H)};aa.listFormatter=function(H){void 0===H&&
(H={});var W=this.intl;void 0===H&&(H={});var ba=JSON.stringify([W,H]),ja=Mc[ba];ja||(ja=new Intl.ListFormat(W,H),Mc[ba]=ja);return ja};aa.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};aa.equals=function(H){return this.locale===H.locale&&this.numberingSystem===H.numberingSystem&&this.outputCalendar===H.outputCalendar};a(T,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var H=
this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=H}return this.fastNumbersCached}}]);return T}(),Nc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Sb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Oc=RegExp(""+Sb.source+("(?:"+Nc.source+"?(?:\\[("+Dc.source+")\\])?)?")),Tb=RegExp("(?:T"+Oc.source+")?"),od=Z("weekYear","weekNumber",
"weekDay"),pd=Z("year","ordinal"),Pc=RegExp(Sb.source+" ?(?:"+Nc.source+"|("+Dc.source+"))?"),qd=RegExp("(?: "+Pc.source+")?"),rd=RegExp("^T?"+Sb.source+"$"),sd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,Yc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},td=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,
ud=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,wd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,xd=Ca(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Tb),yd=Ca(/(\d{4})-?W(\d\d)(?:-?(\d))?/,
Tb),zd=Ca(/(\d{4})-?(\d{3})/,Tb),Ad=Ca(Oc),Qc=xa(function(T,aa){return[{year:ka(T,aa),month:ka(T,aa+1,1),day:ka(T,aa+2,1)},null,aa+3]},qa,ha,ea),Bd=xa(od,qa,ha,ea),Cd=xa(pd,qa,ha,ea),Dd=xa(qa,ha,ea),Ed=xa(qa),Fd=Ca(/(\d{4})-(\d\d)-(\d\d)/,qd),Gd=Ca(Pc),Hd=xa(qa,ha,ea),Rc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},
Id=f({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},Rc),Jd=f({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,
minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Rc),mb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Zc=mb.slice(0).reverse(),Za=function(){function T(H){var W="longterm"===H.conversionAccuracy||!1;this.values=H.values;this.loc=H.loc||Ya.create();this.conversionAccuracy=W?"longterm":"casual";this.invalid=H.invalid||null;this.matrix=W?Jd:Id;this.isLuxonDuration=
!0}T.fromMillis=function(H,W){return T.fromObject({milliseconds:H},W)};T.fromObject=function(H,W){void 0===W&&(W={});if(null==H||"object"!==typeof H)throw new cb("Duration.fromObject: argument expected to be an object, got "+(null===H?"null":typeof H));return new T({values:L(H,T.normalizeUnit),loc:Ya.fromObject(W),conversionAccuracy:W.conversionAccuracy})};T.fromDurationLike=function(H){if(x(H))return T.fromMillis(H);if(T.isDuration(H))return H;if("object"===typeof H)return T.fromObject(H);throw new cb("Unknown duration argument "+
H+" of type "+typeof H);};T.fromISO=function(H,W){var ba=Ba(H,[sd,na])[0];return ba?T.fromObject(ba,W):T.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};T.fromISOTime=function(H,W){var ba=Ba(H,[rd,Ed])[0];return ba?T.fromObject(ba,W):T.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};T.invalid=function(H,W){void 0===W&&(W=null);if(!H)throw new cb("need to specify a reason the Duration is invalid");var ba=H instanceof fb?H:new fb(H,W);if(Xa.throwOnInvalid)throw new ed(ba);
return new T({invalid:ba})};T.normalizeUnit=function(H){var W={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[H?H.toLowerCase():H];if(!W)throw new ec(H);return W};T.isDuration=function(H){return H&&H.isLuxonDuration||!1};var aa=T.prototype;aa.toFormat=
function(H,W){void 0===W&&(W={});var ba=f({},W,{floor:!1!==W.round&&!1!==W.floor});return this.isValid?hb.create(this.loc,ba).formatDurationFromString(this,H):"Invalid Duration"};aa.toHuman=function(H){var W=this;void 0===H&&(H={});var ba=mb.map(function(ja){var ra=W.values[ja];return v(ra)?null:W.loc.numberFormatter(f({style:"unit",unitDisplay:"long"},H,{unit:ja.slice(0,-1)})).format(ra)}).filter(function(ja){return ja});return this.loc.listFormatter(f({type:"conjunction",style:H.listStyle||"narrow"},
H)).format(ba)};aa.toObject=function(){return this.isValid?f({},this.values):{}};aa.toISO=function(){if(!this.isValid)return null;var H="P";0!==this.years&&(H+=this.years+"Y");if(0!==this.months||0!==this.quarters)H+=this.months+3*this.quarters+"M";0!==this.weeks&&(H+=this.weeks+"W");0!==this.days&&(H+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)H+="T";0!==this.hours&&(H+=this.hours+"H");0!==this.minutes&&(H+=this.minutes+"M");if(0!==this.seconds||0!==
this.milliseconds)H+=E(this.seconds+this.milliseconds/1E3,3)+"S";"P"===H&&(H+="T0S");return H};aa.toISOTime=function(H){void 0===H&&(H={});if(!this.isValid)return null;var W=this.toMillis();if(0>W||864E5<=W)return null;H=f({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},H);W=this.shiftTo("hours","minutes","seconds","milliseconds");var ba="basic"===H.format?"hhmm":"hh:mm";H.suppressSeconds&&0===W.seconds&&0===W.milliseconds||(ba+="basic"===H.format?"ss":":ss",H.suppressMilliseconds&&
0===W.milliseconds||(ba+=".SSS"));W=W.toFormat(ba);H.includePrefix&&(W="T"+W);return W};aa.toJSON=function(){return this.toISO()};aa.toString=function(){return this.toISO()};aa.toMillis=function(){return this.as("milliseconds")};aa.valueOf=function(){return this.toMillis()};aa.plus=function(H){if(!this.isValid)return this;H=T.fromDurationLike(H);for(var W={},ba=q(mb),ja;!(ja=ba()).done;)if(ja=ja.value,c(H.values,ja)||c(this.values,ja))W[ja]=H.get(ja)+this.get(ja);return pa(this,{values:W},!0)};aa.minus=
function(H){if(!this.isValid)return this;H=T.fromDurationLike(H);return this.plus(H.negate())};aa.mapUnits=function(H){if(!this.isValid)return this;for(var W={},ba=0,ja=Object.keys(this.values);ba<ja.length;ba++){var ra=ja[ba];W[ra]=O(H(this.values[ra],ra))}return pa(this,{values:W},!0)};aa.get=function(H){return this[T.normalizeUnit(H)]};aa.set=function(H){if(!this.isValid)return this;H=f({},this.values,L(H,T.normalizeUnit));return pa(this,{values:H})};aa.reconfigure=function(H){var W=void 0===H?
{}:H;H=W.conversionAccuracy;W={loc:this.loc.clone({locale:W.locale,numberingSystem:W.numberingSystem})};H&&(W.conversionAccuracy=H);return pa(this,W)};aa.as=function(H){return this.isValid?this.shiftTo(H).get(H):NaN};aa.normalize=function(){if(!this.isValid)return this;var H=this.toObject();oa(this.matrix,H);return pa(this,{values:H},!0)};aa.shiftTo=function(){for(var H=arguments.length,W=Array(H),ba=0;ba<H;ba++)W[ba]=arguments[ba];if(!this.isValid||0===W.length)return this;W=W.map(function(db){return T.normalizeUnit(db)});
H={};ba={};for(var ja=this.toObject(),ra,za=q(mb),Ga;!(Ga=za()).done;)if(Ga=Ga.value,0<=W.indexOf(Ga)){ra=Ga;var Ia=0,Pa;for(Pa in ba)Ia+=this.matrix[Pa][Ga]*ba[Pa],ba[Pa]=0;x(ja[Ga])&&(Ia+=ja[Ga]);var Ua=Math.trunc(Ia);H[Ga]=Ua;ba[Ga]=(1E3*Ia-1E3*Ua)/1E3;for(var Ra in ja)mb.indexOf(Ra)>mb.indexOf(Ga)&&sa(this.matrix,ja,Ra,H,Ga)}else x(ja[Ga])&&(ba[Ga]=ja[Ga]);for(var Ta in ba)0!==ba[Ta]&&(H[ra]+=Ta===ra?ba[Ta]:ba[Ta]/this.matrix[ra][Ta]);return pa(this,{values:H},!0).normalize()};aa.negate=function(){if(!this.isValid)return this;
for(var H={},W=0,ba=Object.keys(this.values);W<ba.length;W++){var ja=ba[W];H[ja]=0===this.values[ja]?0:-this.values[ja]}return pa(this,{values:H},!0)};aa.equals=function(H){if(!this.isValid||!H.isValid||!this.loc.equals(H.loc))return!1;for(var W=q(mb),ba;!(ba=W()).done;){var ja=ba.value;ba=this.values[ja];ja=H.values[ja];ba=void 0===ba||0===ba?void 0===ja||0===ja:ba===ja;if(!ba)return!1}return!0};a(T,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?
this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",
get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return T}(),ub=function(){function T(H){this.s=
H.start;this.e=H.end;this.invalid=H.invalid||null;this.isLuxonInterval=!0}T.invalid=function(H,W){void 0===W&&(W=null);if(!H)throw new cb("need to specify a reason the Interval is invalid");var ba=H instanceof fb?H:new fb(H,W);if(Xa.throwOnInvalid)throw new dd(ba);return new T({invalid:ba})};T.fromDateTimes=function(H,W){var ba=tb(H),ja=tb(W);var ra=ba&&ba.isValid?ja&&ja.isValid?ja<ba?ub.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+ba.toISO()+
" and end\x3d"+ja.toISO()):null:ub.invalid("missing or invalid end"):ub.invalid("missing or invalid start");return null==ra?new T({start:ba,end:ja}):ra};T.after=function(H,W){var ba=Za.fromDurationLike(W),ja=tb(H);return T.fromDateTimes(ja,ja.plus(ba))};T.before=function(H,W){var ba=Za.fromDurationLike(W),ja=tb(H);return T.fromDateTimes(ja.minus(ba),ja)};T.fromISO=function(H,W){var ba=(H||"").split("/",2),ja=ba[0];ba=ba[1];if(ja&&ba){try{var ra=Va.fromISO(ja,W);var za=ra.isValid}catch(Pa){za=!1}try{var Ga=
Va.fromISO(ba,W);var Ia=Ga.isValid}catch(Pa){Ia=!1}if(za&&Ia)return T.fromDateTimes(ra,Ga);if(za){if(Ga=Za.fromISO(ba,W),Ga.isValid)return T.after(ra,Ga)}else if(Ia&&(ra=Za.fromISO(ja,W),ra.isValid))return T.before(Ga,ra)}return T.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};T.isInterval=function(H){return H&&H.isLuxonInterval||!1};var aa=T.prototype;aa.length=function(H){void 0===H&&(H="milliseconds");return this.isValid?this.toDuration.apply(this,[H]).get(H):NaN};aa.count=
function(H){void 0===H&&(H="milliseconds");if(!this.isValid)return NaN;var W=this.start.startOf(H),ba=this.end.startOf(H);return Math.floor(ba.diff(W,H).get(H))+1};aa.hasSame=function(H){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,H):!1};aa.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};aa.isAfter=function(H){return this.isValid?this.s>H:!1};aa.isBefore=function(H){return this.isValid?this.e<=H:!1};aa.contains=function(H){return this.isValid?this.s<=H&&this.e>
H:!1};aa.set=function(H){H=void 0===H?{}:H;return this.isValid?T.fromDateTimes(H.start||this.s,H.end||this.e):this};aa.splitAt=function(){var H=this;if(!this.isValid)return[];for(var W=arguments.length,ba=Array(W),ja=0;ja<W;ja++)ba[ja]=arguments[ja];W=ba.map(tb).filter(function(Ga){return H.contains(Ga)}).sort();ba=[];ja=this.s;for(var ra=0;ja<this.e;){var za=W[ra]||this.e;za=+za>+this.e?this.e:za;ba.push(T.fromDateTimes(ja,za));ja=za;ra+=1}return ba};aa.splitBy=function(H){H=Za.fromDurationLike(H);
if(!this.isValid||!H.isValid||0===H.as("milliseconds"))return[];for(var W=this.s,ba=1,ja,ra=[];W<this.e;)ja=this.start.plus(H.mapUnits(function(za){return za*ba})),ja=+ja>+this.e?this.e:ja,ra.push(T.fromDateTimes(W,ja)),W=ja,ba+=1;return ra};aa.divideEqually=function(H){return this.isValid?this.splitBy(this.length()/H).slice(0,H):[]};aa.overlaps=function(H){return this.e>H.s&&this.s<H.e};aa.abutsStart=function(H){return this.isValid?+this.e===+H.s:!1};aa.abutsEnd=function(H){return this.isValid?+H.e===
+this.s:!1};aa.engulfs=function(H){return this.isValid?this.s<=H.s&&this.e>=H.e:!1};aa.equals=function(H){return this.isValid&&H.isValid?this.s.equals(H.s)&&this.e.equals(H.e):!1};aa.intersection=function(H){if(!this.isValid)return this;var W=this.s>H.s?this.s:H.s;H=this.e<H.e?this.e:H.e;return W>=H?null:T.fromDateTimes(W,H)};aa.union=function(H){return this.isValid?T.fromDateTimes(this.s<H.s?this.s:H.s,this.e>H.e?this.e:H.e):this};T.merge=function(H){var W=H.sort(function(ba,ja){return ba.s-ja.s}).reduce(function(ba,
ja){var ra=ba[0],za=ba[1];return za?za.overlaps(ja)||za.abutsStart(ja)?[ra,za.union(ja)]:[ra.concat([za]),ja]:[ra,ja]},[[],null]);H=W[0];(W=W[1])&&H.push(W);return H};T.xor=function(H){var W,ba=null,ja=0,ra=[];H=H.map(function(za){return[{time:za.s,type:"s"},{time:za.e,type:"e"}]});H=(W=Array.prototype).concat.apply(W,H).sort(function(za,Ga){return za.time-Ga.time});for(W=q(H);!(H=W()).done;)H=H.value,ja+="s"===H.type?1:-1,1===ja?ba=H.time:(ba&&+ba!==+H.time&&ra.push(T.fromDateTimes(ba,H.time)),ba=
null);return T.merge(ra)};aa.difference=function(){for(var H=this,W=arguments.length,ba=Array(W),ja=0;ja<W;ja++)ba[ja]=arguments[ja];return T.xor([this].concat(ba)).map(function(ra){return H.intersection(ra)}).filter(function(ra){return ra&&!ra.isEmpty()})};aa.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};aa.toISO=function(H){return this.isValid?this.s.toISO(H)+"/"+this.e.toISO(H):"Invalid Interval"};aa.toISODate=function(){return this.isValid?
this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};aa.toISOTime=function(H){return this.isValid?this.s.toISOTime(H)+"/"+this.e.toISOTime(H):"Invalid Interval"};aa.toFormat=function(H,W){var ba=(void 0===W?{}:W).separator;ba=void 0===ba?" \u2013 ":ba;return this.isValid?""+this.s.toFormat(H)+ba+this.e.toFormat(H):"Invalid Interval"};aa.toDuration=function(H,W){return this.isValid?this.e.diff(this.s,H,W):Za.invalid(this.invalidReason)};aa.mapEndpoints=function(H){return T.fromDateTimes(H(this.s),
H(this.e))};a(T,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return T}(),vb=function(){function T(){}T.hasDST=function(aa){void 0===aa&&(aa=Xa.defaultZone);var H=Va.now().setZone(aa).set({month:12});
return!aa.isUniversal&&H.offset!==H.set({month:6}).offset};T.isValidIANAZone=function(aa){return jb.isValidZone(aa)};T.normalizeZone=function(aa){return ia(aa,Xa.defaultZone)};T.months=function(aa,H){void 0===aa&&(aa="long");var W=void 0===H?{}:H,ba=W.locale,ja=W.numberingSystem,ra=W.locObj;W=W.outputCalendar;return((void 0===ra?null:ra)||Ya.create(void 0===ba?null:ba,void 0===ja?null:ja,void 0===W?"gregory":W)).months(aa)};T.monthsFormat=function(aa,H){void 0===aa&&(aa="long");var W=void 0===H?{}:
H,ba=W.locale,ja=W.numberingSystem,ra=W.locObj;W=W.outputCalendar;return((void 0===ra?null:ra)||Ya.create(void 0===ba?null:ba,void 0===ja?null:ja,void 0===W?"gregory":W)).months(aa,!0)};T.weekdays=function(aa,H){void 0===aa&&(aa="long");var W=void 0===H?{}:H,ba=W.locale,ja=W.numberingSystem;W=W.locObj;return((void 0===W?null:W)||Ya.create(void 0===ba?null:ba,void 0===ja?null:ja,null)).weekdays(aa)};T.weekdaysFormat=function(aa,H){void 0===aa&&(aa="long");var W=void 0===H?{}:H,ba=W.locale,ja=W.numberingSystem;
W=W.locObj;return((void 0===W?null:W)||Ya.create(void 0===ba?null:ba,void 0===ja?null:ja,null)).weekdays(aa,!0)};T.meridiems=function(aa){aa=(void 0===aa?{}:aa).locale;return Ya.create(void 0===aa?null:aa).meridiems()};T.eras=function(aa,H){void 0===aa&&(aa="short");var W=(void 0===H?{}:H).locale;return Ya.create(void 0===W?null:W,null,"gregory").eras(aa)};T.features=function(){return{relative:B()}};return T}(),Gb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",
deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Yb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],
beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},$c=Gb.hanidec.replace(/[\[|\]]/g,"").split(""),Zb="[ "+String.fromCharCode(160)+"]",Hb=new RegExp(Zb,"g"),bd={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM","short":"MMM","long":"MMMM"},day:{numeric:"d",
"2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Ib=null,Kb=[0,31,59,90,120,151,181,212,243,273,304,334],Jb=[0,31,60,91,121,152,182,213,244,274,305,335],hc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ld={ordinal:1,hour:0,minute:0,second:0,millisecond:0},gc="year month day hour minute second millisecond".split(" "),
Md="weekYear weekNumber weekday hour minute second millisecond".split(" "),Nd="year ordinal hour minute second millisecond".split(" "),Va=function(){function T(H){var W=H.zone||Xa.defaultZone,ba=H.invalid||(Number.isNaN(H.ts)?new fb("invalid input"):null)||(W.isValid?null:Wa(W));this.ts=v(H.ts)?Xa.now():H.ts;var ja=null,ra=null;ba||(H.old&&H.old.ts===this.ts&&H.old.zone.equals(W)?(ra=[H.old.c,H.old.o],ja=ra[0],ra=ra[1]):(ra=W.offset(this.ts),ja=ac(this.ts,ra),ja=(ba=Number.isNaN(ja.year)?new fb("invalid input"):
null)?null:ja,ra=ba?null:ra));this._zone=W;this.loc=H.loc||Ya.create();this.invalid=ba;this.weekData=null;this.c=ja;this.o=ra;this.isLuxonDateTime=!0}T.now=function(){return new T({})};T.local=function(){var H=jc(arguments),W=H[1];return fc({year:W[0],month:W[1],day:W[2],hour:W[3],minute:W[4],second:W[5],millisecond:W[6]},H[0])};T.utc=function(){var H=jc(arguments),W=H[0],ba=H[1];H=ba[0];var ja=ba[1],ra=ba[2],za=ba[3],Ga=ba[4],Ia=ba[5];ba=ba[6];W.zone=eb.utcInstance;return fc({year:H,month:ja,day:ra,
hour:za,minute:Ga,second:Ia,millisecond:ba},W)};T.fromJSDate=function(H,W){void 0===W&&(W={});var ba="[object Date]"===Object.prototype.toString.call(H)?H.valueOf():NaN;if(Number.isNaN(ba))return T.invalid("invalid input");var ja=ia(W.zone,Xa.defaultZone);return ja.isValid?new T({ts:ba,zone:ja,loc:Ya.fromObject(W)}):T.invalid(Wa(ja))};T.fromMillis=function(H,W){void 0===W&&(W={});if(x(H))return-864E13>H||864E13<H?T.invalid("Timestamp out of range"):new T({ts:H,zone:ia(W.zone,Xa.defaultZone),loc:Ya.fromObject(W)});
throw new cb("fromMillis requires a numerical input, but received a "+typeof H+" with value "+H);};T.fromSeconds=function(H,W){void 0===W&&(W={});if(x(H))return new T({ts:1E3*H,zone:ia(W.zone,Xa.defaultZone),loc:Ya.fromObject(W)});throw new cb("fromSeconds requires a numerical input");};T.fromObject=function(H,W){void 0===W&&(W={});H=H||{};var ba=ia(W.zone,Xa.defaultZone);if(!ba.isValid)return T.invalid(Wa(ba));var ja=Xa.now(),ra=v(W.specificOffset)?ba.offset(ja):W.specificOffset,za=L(H,dc),Ga=!v(za.ordinal),
Ia=!v(za.year),Pa=!v(za.month)||!v(za.day);Ia=Ia||Pa;var Ua=za.weekYear||za.weekNumber,Ra=Ya.fromObject(W);if((Ia||Ga)&&Ua)throw new ob("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Pa&&Ga)throw new ob("Can't mix ordinal dates with month/day");Pa=Ua||za.weekday&&!Ia;Ua=ac(ja,ra);if(Pa){var Ta=Md;ja=Kd;Ua=pb(Ua)}else Ga?(Ta=Nd,ja=Ld,Ua=qb(Ua)):(Ta=gc,ja=hc);var db=!1;Ta=q(Ta);for(var bb;!(bb=Ta()).done;)bb=bb.value,v(za[bb])?za[bb]=db?ja[bb]:Ua[bb]:db=!0;Pa?(ja=y(za.weekYear),
Ua=m(za.weekNumber,1,M(za.weekYear)),db=m(za.weekday,1,7),ja=ja?Ua?db?!1:ab("weekday",za.weekday):ab("week",za.week):ab("weekYear",za.weekYear)):Ga?(ja=y(za.year),Ua=m(za.ordinal,1,G(za.year)?366:365),ja=ja?Ua?!1:ab("ordinal",za.ordinal):ab("year",za.year)):ja=yb(za);if(ja=ja||zb(za))return T.invalid(ja);Ga=Pa?xb(za):Ga?kb(za):za;ra=Ab(Ga,ra,ba);ba=new T({ts:ra[0],zone:ba,o:ra[1],loc:Ra});return za.weekday&&Ia&&H.weekday!==ba.weekday?T.invalid("mismatched weekday","you can't specify both a weekday of "+
za.weekday+" and a date of "+ba.toISO()):ba};T.fromISO=function(H,W){void 0===W&&(W={});var ba=Ba(H,[xd,Qc],[yd,Bd],[zd,Cd],[Ad,Dd]);return sb(ba[0],ba[1],W,"ISO 8601",H)};T.fromRFC2822=function(H,W){void 0===W&&(W={});var ba=Ba(H.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[td,V]);return sb(ba[0],ba[1],W,"RFC 2822",H)};T.fromHTTP=function(H,W){void 0===W&&(W={});var ba=Ba(H,[ud,ca],[vd,ca],[wd,J]);return sb(ba[0],ba[1],W,"HTTP",W)};T.fromFormat=function(H,W,ba){void 0===ba&&(ba=
{});if(v(H)||v(W))throw new cb("fromFormat requires an input string and a format");var ja=ba,ra=ja.locale;ja=ja.numberingSystem;ra=Ya.fromOpts({locale:void 0===ra?null:ra,numberingSystem:void 0===ja?null:ja,defaultToEN:!0});ra=$a(ra,H,W);var za=[ra.result,ra.zone,ra.specificOffset,ra.invalidReason];ra=za[0];ja=za[1];var Ga=za[2];return(za=za[3])?T.invalid(za):sb(ra,ja,ba,"format "+W,H,Ga)};T.fromString=function(H,W,ba){void 0===ba&&(ba={});return T.fromFormat(H,W,ba)};T.fromSQL=function(H,W){void 0===
W&&(W={});var ba=Ba(H,[Fd,Qc],[Gd,Hd]);return sb(ba[0],ba[1],W,"SQL",H)};T.invalid=function(H,W){void 0===W&&(W=null);if(!H)throw new cb("need to specify a reason the DateTime is invalid");var ba=H instanceof fb?H:new fb(H,W);if(Xa.throwOnInvalid)throw new cd(ba);return new T({invalid:ba})};T.isDateTime=function(H){return H&&H.isLuxonDateTime||!1};var aa=T.prototype;aa.get=function(H){return this[H]};aa.resolvedLocaleOptions=function(H){void 0===H&&(H={});H=hb.create(this.loc.clone(H),H).resolvedOptions(this);
return{locale:H.locale,numberingSystem:H.numberingSystem,outputCalendar:H.calendar}};aa.toUTC=function(H,W){void 0===H&&(H=0);void 0===W&&(W={});return this.setZone(eb.instance(H),W)};aa.toLocal=function(){return this.setZone(Xa.defaultZone)};aa.setZone=function(H,W){var ba=void 0===W?{}:W,ja=ba.keepLocalTime;ja=void 0===ja?!1:ja;ba=ba.keepCalendarTime;ba=void 0===ba?!1:ba;H=ia(H,Xa.defaultZone);if(H.equals(this.zone))return this;if(H.isValid){var ra=this.ts;if(ja||ba)ja=H.offset(this.ts),ba=this.toObject(),
ra=Ab(ba,ja,H)[0];return rb(this,{ts:ra,zone:H})}return T.invalid(Wa(H))};aa.reconfigure=function(H){H=void 0===H?{}:H;H=this.loc.clone({locale:H.locale,numberingSystem:H.numberingSystem,outputCalendar:H.outputCalendar});return rb(this,{loc:H})};aa.setLocale=function(H){return this.reconfigure({locale:H})};aa.set=function(H){if(!this.isValid)return this;H=L(H,dc);var W=!v(H.weekYear)||!v(H.weekNumber)||!v(H.weekday),ba=!v(H.ordinal),ja=!v(H.year),ra=!v(H.month)||!v(H.day),za=H.weekYear||H.weekNumber;
if((ja||ra||ba)&&za)throw new ob("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ra&&ba)throw new ob("Can't mix ordinal dates with month/day");W?W=xb(f({},pb(this.c),H)):v(H.ordinal)?(W=f({},this.toObject(),H),v(H.day)&&(W.day=Math.min(F(W.year,W.month),W.day))):W=kb(f({},qb(this.c),H));H=Ab(W,this.o,this.zone);return rb(this,{ts:H[0],o:H[1]})};aa.plus=function(H){if(!this.isValid)return this;H=Za.fromDurationLike(H);return rb(this,bc(this,H))};aa.minus=function(H){if(!this.isValid)return this;
H=Za.fromDurationLike(H).negate();return rb(this,bc(this,H))};aa.startOf=function(H){if(!this.isValid)return this;var W={};H=Za.normalizeUnit(H);switch(H){case "years":W.month=1;case "quarters":case "months":W.day=1;case "weeks":case "days":W.hour=0;case "hours":W.minute=0;case "minutes":W.second=0;case "seconds":W.millisecond=0}"weeks"===H&&(W.weekday=1);"quarters"===H&&(W.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(W)};aa.endOf=function(H){var W;return this.isValid?this.plus((W={},W[H]=
1,W)).startOf(H).minus(1):this};aa.toFormat=function(H,W){void 0===W&&(W={});return this.isValid?hb.create(this.loc.redefaultToEN(W)).formatDateTimeFromString(this,H):"Invalid DateTime"};aa.toLocaleString=function(H,W){void 0===H&&(H=Nb);void 0===W&&(W={});return this.isValid?hb.create(this.loc.clone(W),H).formatDateTime(this):"Invalid DateTime"};aa.toLocaleParts=function(H){void 0===H&&(H={});return this.isValid?hb.create(this.loc.clone(H),H).formatDateTimeParts(this):[]};aa.toISO=function(H){var W=
void 0===H?{}:H,ba=W.format;H=W.suppressSeconds;H=void 0===H?!1:H;var ja=W.suppressMilliseconds;ja=void 0===ja?!1:ja;var ra=W.includeOffset;ra=void 0===ra?!0:ra;W=W.extendedZone;W=void 0===W?!1:W;if(!this.isValid)return null;ba="extended"===(void 0===ba?"extended":ba);var za=Mb(this,ba);return za=za+"T"+cc(this,ba,H,ja,ra,W)};aa.toISODate=function(H){H=(void 0===H?{}:H).format;return this.isValid?Mb(this,"extended"===(void 0===H?"extended":H)):null};aa.toISOWeekDate=function(){return Bb(this,"kkkk-'W'WW-c")};
aa.toISOTime=function(H){var W=void 0===H?{}:H;H=W.suppressMilliseconds;var ba=W.suppressSeconds,ja=W.includeOffset,ra=W.includePrefix,za=W.extendedZone;W=W.format;return this.isValid?((void 0===ra?0:ra)?"T":"")+cc(this,"extended"===(void 0===W?"extended":W),void 0===ba?!1:ba,void 0===H?!1:H,void 0===ja?!0:ja,void 0===za?!1:za):null};aa.toRFC2822=function(){return Bb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};aa.toHTTP=function(){return Bb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};aa.toSQLDate=
function(){return this.isValid?Mb(this,!0):null};aa.toSQLTime=function(H){var W=void 0===H?{}:H;H=W.includeOffset;H=void 0===H?!0:H;var ba=W.includeZone;ba=void 0===ba?!1:ba;W=W.includeOffsetSpace;W=void 0===W?!0:W;var ja="HH:mm:ss.SSS";if(ba||H)W&&(ja+=" "),ba?ja+="z":H&&(ja+="ZZ");return Bb(this,ja,!0)};aa.toSQL=function(H){void 0===H&&(H={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(H):null};aa.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};aa.valueOf=function(){return this.toMillis()};
aa.toMillis=function(){return this.isValid?this.ts:NaN};aa.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};aa.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1E3):NaN};aa.toJSON=function(){return this.toISO()};aa.toBSON=function(){return this.toJSDate()};aa.toObject=function(H){void 0===H&&(H={});if(!this.isValid)return{};var W=f({},this.c);H.includeConfig&&(W.outputCalendar=this.outputCalendar,W.numberingSystem=this.loc.numberingSystem,W.locale=this.loc.locale);return W};
aa.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};aa.diff=function(H,W,ba){void 0===W&&(W="milliseconds");void 0===ba&&(ba={});if(!this.isValid||!H.isValid)return Za.invalid("created by diffing an invalid DateTime");ba=f({locale:this.locale,numberingSystem:this.numberingSystem},ba);var ja=(Array.isArray(W)?W:[W]).map(Za.normalizeUnit);W=H.valueOf()>this.valueOf();H=va(W?this:H,W?H:this,ja,ba);return W?H.negate():H};aa.diffNow=function(H,W){void 0===H&&(H="milliseconds");void 0===W&&
(W={});return this.diff(T.now(),H,W)};aa.until=function(H){return this.isValid?ub.fromDateTimes(this,H):this};aa.hasSame=function(H,W){if(!this.isValid)return!1;var ba=H.valueOf(),ja=this.setZone(H.zone,{keepLocalTime:!0});return ja.startOf(W)<=ba&&ba<=ja.endOf(W)};aa.equals=function(H){return this.isValid&&H.isValid&&this.valueOf()===H.valueOf()&&this.zone.equals(H.zone)&&this.loc.equals(H.loc)};aa.toRelative=function(H){void 0===H&&(H={});if(!this.isValid)return null;var W=H.base||T.fromObject({},
{zone:this.zone}),ba=H.padding?this<W?-H.padding:H.padding:0,ja="years months days hours minutes seconds".split(" "),ra=H.unit;Array.isArray(H.unit)&&(ja=H.unit,ra=void 0);return ic(W,this.plus(ba),f({},H,{numeric:"always",units:ja,unit:ra}))};aa.toRelativeCalendar=function(H){void 0===H&&(H={});return this.isValid?ic(H.base||T.fromObject({},{zone:this.zone}),this,f({},H,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};T.min=function(){for(var H=arguments.length,W=Array(H),ba=
0;ba<H;ba++)W[ba]=arguments[ba];if(!W.every(T.isDateTime))throw new cb("min requires all arguments be DateTimes");return z(W,function(ja){return ja.valueOf()},Math.min)};T.max=function(){for(var H=arguments.length,W=Array(H),ba=0;ba<H;ba++)W[ba]=arguments[ba];if(!W.every(T.isDateTime))throw new cb("max requires all arguments be DateTimes");return z(W,function(ja){return ja.valueOf()},Math.max)};T.fromFormatExplain=function(H,W,ba){void 0===ba&&(ba={});var ja=ba;ba=ja.locale;ja=ja.numberingSystem;
ba=Ya.fromOpts({locale:void 0===ba?null:ba,numberingSystem:void 0===ja?null:ja,defaultToEN:!0});return $a(ba,H,W)};T.fromStringExplain=function(H,W,ba){void 0===ba&&(ba={});return T.fromFormatExplain(H,W,ba)};a(T,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:
null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:
NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Lb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Lb(this).weekNumber:NaN}},
{key:"weekday",get:function(){return this.isValid?Lb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?qb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?vb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?vb.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?vb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",
get:function(){return this.isValid?vb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},
{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return G(this.year)}},{key:"daysInMonth",get:function(){return F(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?G(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?M(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Nb}},{key:"DATE_MED",get:function(){return kc}},
{key:"DATE_MED_WITH_WEEKDAY",get:function(){return fd}},{key:"DATE_FULL",get:function(){return lc}},{key:"DATE_HUGE",get:function(){return mc}},{key:"TIME_SIMPLE",get:function(){return nc}},{key:"TIME_WITH_SECONDS",get:function(){return oc}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return pc}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return qc}},{key:"TIME_24_SIMPLE",get:function(){return rc}},{key:"TIME_24_WITH_SECONDS",get:function(){return sc}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return tc}},
{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return uc}},{key:"DATETIME_SHORT",get:function(){return vc}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return wc}},{key:"DATETIME_MED",get:function(){return xc}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return yc}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return gd}},{key:"DATETIME_FULL",get:function(){return zc}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Ac}},{key:"DATETIME_HUGE",get:function(){return Bc}},{key:"DATETIME_HUGE_WITH_SECONDS",
get:function(){return Cc}}]);return T}();D.DateTime=Va;D.Duration=Za;D.FixedOffsetZone=eb;D.IANAZone=jb;D.Info=vb;D.Interval=ub;D.InvalidZone=Xb;D.Settings=Xa;D.SystemZone=Fc;D.VERSION="2.4.0";D.Zone=nb;Object.defineProperty(D,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../../geometry/Extent ../../../layers/Field".split(" "),function(D,k,a,f,g,p){function n(e){var l=null;
e.domain&&(l="range"===e.domain.type?{type:"range",range:[e.domain.minValue,e.domain.maxValue]}:{type:"codedValue",codedValues:e.domain.toJson().codedValues});return a(a({name:e.name,type:e.type,alias:e.alias},void 0!==e.length?{length:e.length}:{}),{editable:!0===e.editable,nullable:!0===e.nullable,domain:l})}function d(e){return e instanceof Date}Object.defineProperty(k,"__esModule",{value:!0});k.stableStringify=k.extractServiceUrl=k.toEsriGeometryType=k.layerFieldEsriConstants=k.layerGeometryEsriRestConstants=
k.layerGeometryEsriConstants=k.callback=k.errback=k.defaultMaxRecords=k.sameGeomType=k.convertLinearUnitsToCode=k.shapeExtent=k.convertSquareUnitsToCode=k.cloneAttributes=k.equalityTest=k.isDate=k.isArray=k.isNumber=k.isBoolean=k.isString=k.IdState=k.esriFieldToJson=k.cloneField=k.FeatureServiceDatabaseType=void 0;(function(e){e[e.Standardised=0]="Standardised";e[e.StandardisedNoInterval=1]="StandardisedNoInterval";e[e.SqlServer=2]="SqlServer";e[e.Oracle=3]="Oracle";e[e.Postgres=4]="Postgres";e[e.PGDB=
5]="PGDB";e[e.FILEGDB=6]="FILEGDB";e[e.NotEvaluated=7]="NotEvaluated"})(k.FeatureServiceDatabaseType||(k.FeatureServiceDatabaseType={}));k.cloneField=function(e){return new p(n(e))};k.esriFieldToJson=n;(function(e){e[e.InFeatureSet=0]="InFeatureSet";e[e.NotInFeatureSet=1]="NotInFeatureSet";e[e.Unknown=2]="Unknown"})(k.IdState||(k.IdState={}));k.isString=function(e){return"string"===typeof e||e instanceof String};k.isBoolean=function(e){return"boolean"===typeof e};k.isNumber=function(e){return"number"===
typeof e};k.isArray=function(e){return e instanceof Array};k.isDate=d;k.equalityTest=function(e,l){return e===l?!0:d(e)&&d(l)?e.getTime()===l.getTime():!1};k.cloneAttributes=function(e){var l={},h;for(h in e)l[h]=e[h];return l};k.convertSquareUnitsToCode=function(e){if(void 0===e)return null;if("number"===typeof e)return e;switch(e.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
k.shapeExtent=function(e){if(null===e)return null;switch(e.type){case "polygon":case "multipoint":case "polyline":return e.getExtent();case "point":return new g({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case "extent":return e}return null};k.convertLinearUnitsToCode=function(e){if(void 0===e)return null;if("number"===typeof e||"number"===typeof e)return e;switch(e.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};
k.sameGeomType=function(e,l){return e===l||"point"===e&&"esriGeometryPoint"===l||"polyline"===e&&"esriGeometryPolyline"===l||"polygon"===e&&"esriGeometryPolygon"===l||"extent"===e&&"esriGeometryEnvelope"===l||"multipoint"===e&&"esriGeometryMultipoint"===l||"point"===l&&"esriGeometryPoint"===e||"polyline"===l&&"esriGeometryPolyline"===e||"polygon"===l&&"esriGeometryPolygon"===e||"extent"===l&&"esriGeometryEnvelope"===e||"multipoint"===l&&"esriGeometryMultipoint"===e?!0:!1};k.defaultMaxRecords=1E3;
k.errback=function(e){return function(l){e.reject(l)}};k.callback=function(e,l){return function(){try{e.apply(null,arguments)}catch(h){l.reject(h)}}};k.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};k.layerGeometryEsriRestConstants={point:"esriGeometryPoint",
polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};k.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",
single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",
esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};k.toEsriGeometryType=function(e){switch(e){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";
case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};k.extractServiceUrl=function(e){if(void 0===e)return"";e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");e=e.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return e=e.split("?")[0]};k.stableStringify=function(e,l){l||(l={});"function"===typeof l&&(l={cmp:l});var h="boolean"===typeof l.cycles?l.cycles:!1,t=l.cmp&&function(q){return function(v){return function(x,y){return q({key:x,value:v[x]},{key:y,value:v[y]})}}}(l.cmp),
r=[];return function x(v){v&&v.toJson&&"function"===typeof v.toJson&&(v=v.toJson());if(void 0!==v){if("number"===typeof v)return isFinite(v)?""+v:"null";if("object"!==typeof v)return JSON.stringify(v);var y;if(Array.isArray(v)){var B="[";for(y=0;y<v.length;y++)y&&(B+=","),B+=x(v[y])||"null";return B+"]"}if(null===v)return"null";if(r.includes(v)){if(h)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var z=r.push(v)-1,b=Object.keys(v).sort(t&&t(v));B=
"";for(y=0;y<b.length;y++){var c=b[y],m=x(v[c]);m&&(B&&(B+=","),B+=JSON.stringify(c)+":"+m)}r.splice(z,1);return"{"+B+"}"}}(e)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(D,k,a,f,g,p,n){D=D(null,{declaredClass:"esri.layers.Field",constructor:function(d){if(d&&k.isObject(d)&&(this.name=d.name,this.type=d.type,this.alias=d.alias,this.length=d.length,this.editable=d.editable,this.nullable=
d.nullable,this.defaultValue=d.defaultValue,this.description=d.description?JSON.parse(d.description):null,this.isViewOverride=!!d.isViewOverride,(d=d.domain)&&k.isObject(d)))switch(d.type){case "range":this.domain=new p(d);break;case "codedValue":this.domain=new n(d)}},toJson:function(){return g.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});k.setObject("layers.Field",D,f);return D})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(D,k,a,f,g,p){D=D([p],{declaredClass:"esri.layers.RangeDomain",constructor:function(n){n&&k.isObject(n)&&(this.minValue=n.range[0],this.maxValue=n.range[1])},toJson:function(){var n=this.inherited(arguments);
n.range=[this.minValue,this.maxValue];return g.fixJson(n)}});k.setObject("layers.RangeDomain",D,f);return D})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,k,a,f,g){D=D(null,{declaredClass:"esri.layers.Domain",constructor:function(p){p&&k.isObject(p)&&(this.name=p.name,this.type=p.type)},toJson:function(){return g.fixJson({name:this.name,type:this.type})}});k.setObject("layers.Domain",D,f);return D})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(D,k,a,f,g,p,n){D=D([n],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(d){d&&k.isObject(d)&&(this.codedValues=d.codedValues)},getName:function(d){var e;a.some(this.codedValues,function(l){l.code==d&&(e=l.name);return!!e});return e},toJson:function(){var d=this.inherited(arguments);d.codedValues=k.clone(this.codedValues);return p.fixJson(d)}});k.setObject("layers.CodedValueDomain",D,g);return D})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports",
"esri/arcade/Feature"],function(D,k,a){a.prototype.repurposeFromGraphicLikeObject=function(f,g,p){void 0===p&&(p=null);null===g&&(g={});this.attributes=g;this.geometry=f;this._datesfixed=(this._layer=p)?!1:!0};return a})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t){return function(){function r(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}r.createFromGraphic=function(q){var v=new r;v._geometry=q.geometry?q.geometry:null;v.attributes=void 0===q.attributes?{}:null===q.attributes?{}:q.attributes;q._sourceLayer?(v._layer=q._sourceLayer,v._datesfixed=!1):q._layer?(v._layer=q._layer,v._datesfixed=!1):q.layer&&
"fields"in q.layer?(v._layer=q.layer,v._datesfixed=!1):q.sourceLayer&&"fields"in q.sourceLayer&&(v._layer=q.sourceLayer,v._datesfixed=!1);return v};r.createFromArcadeFeature=function(q){var v=new r;v._datesfixed=q._datesfixed;v.attributes=q.attributes;v._geometry=q._geometry;q._layer&&(v._layer=q._layer);return v};r.createFromArcadeDictionary=function(q){var v=new r;v.attributes=q.field("attributes");null!==v.attributes?v.attributes instanceof n?(v.attributes=v.attributes.attributes,null===v.attributes&&
(v.attributes={})):v.attributes={}:v.attributes={};v._geometry=q.field("geometry");null!==v._geometry&&(v._geometry instanceof n?v._geometry=r.parseGeometryFromDictionary(v._geometry):v._geometry instanceof l||(v._geometry=null));return v};r.createFromGraphicLikeObject=function(q,v,x){void 0===x&&(x=null);var y=new r;null===v&&(v={});y.attributes=v;y._geometry=q?q:null;y._layer=x;y._layer&&(y._datesfixed=!1);return y};r.prototype.repurposeFromGraphicLikeObject=function(q,v,x){void 0===x&&(x=null);
null===v&&(v={});this.attributes=v;this._geometry=q?q:null;this._datesfixed=(this._layer=x)?!1:!0};r.prototype.castToText=function(){var q="";!1===this._datesfixed&&this._fixDates();for(var v in this.attributes){""!==q&&(q+=",");var x=this.attributes[v];null==x?q+=JSON.stringify(v)+":null":e.isBoolean(x)||e.isNumber(x)||e.isString(x)?q+=JSON.stringify(v)+":"+JSON.stringify(x):x instanceof l?q+=JSON.stringify(v)+":"+e.toStringExplicit(x):x instanceof d?q+=JSON.stringify(v)+":"+e.toStringExplicit(x):
x instanceof Array?q+=JSON.stringify(v)+":"+e.toStringExplicit(x):x instanceof Date?q+=JSON.stringify(v)+":"+JSON.stringify(x):null!==x&&"object"===typeof x&&void 0!==x.castToText&&(q+=JSON.stringify(v)+":"+x.castToText())}return'{"geometry":'+(null===this.geometry()?"null":e.toStringExplicit(this.geometry()))+',"attributes":{'+q+"}}"};r.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var q=[],v=0;v<this._layer.fields.length;v++){var x=
this._layer.fields[v];"date"!==x.type&&"esriFieldTypeDate"!==x.type||q.push(x.name)}this._datefields=q;0<q.length&&this._fixDateFields(q)}this._datesfixed=!0};r.prototype._fixDateFields=function(q){this.attributes=g({},this.attributes);for(var v=0;v<q.length;v++){var x=this.attributes[q[v]];if(null!==x)if(void 0===x)for(var y in this.attributes){if(y.toLowerCase()===q[v].toLowerCase()){x=this.attributes[y];null===x||x instanceof Date||(this.attributes[y]=new Date(x));break}}else x instanceof Date||
(this.attributes[q[v]]=new Date(x))}};r.prototype.geometry=function(){if(null===this._geometry)return this._geometry;this._geometry instanceof l||(this._geometry=t.fromJson(this._geometry));return this._geometry};r.prototype.field=function(q){!1===this._datesfixed&&this._fixDates();var v=this.attributes[q];if(void 0!==v)return v;v=q.toLowerCase();for(var x in this.attributes)if(x.toLowerCase()===v)return this.attributes[x];if(this._hasFieldDefinition(v))return null;throw Error("Field not Found : "+
q);};r.prototype._hasFieldDefinition=function(q){if(null===this._layer)return!1;for(var v=0;v<this._layer.fields.length;v++)if(this._layer.fields[v].name.toLowerCase()===q)return!0;return!1};r.prototype.setField=function(q,v){if(this.immutable)throw Error("Feature is Immutable");if(!1===e.isSimpleType(v))throw Error("Illegal Value Assignment to Feature");var x=q.toLowerCase();if(void 0===this.attributes[q])for(var y in this.attributes)if(y.toLowerCase()===x){this.attributes[y]=v;return}this.attributes[q]=
v};r.prototype.hasField=function(q){var v=q.toLowerCase();if(void 0!==this.attributes[q])return!0;for(var x in this.attributes)if(x.toLowerCase()===v)return!0;return this._hasFieldDefinition(v)?!0:!1};r.prototype.keys=function(){var q=[],v={},x;for(x in this.attributes)q.push(x),v[x.toLowerCase()]=1;if(null!==this._layer)for(x=0;x<this._layer.fields.length;x++){var y=this._layer.fields[x];1!==v[y.name.toLowerCase()]&&q.push(y.name)}return q=q.sort()};r.parseGeometryFromDictionary=function(q){q=r._convertDictionaryToJson(q,
!0);void 0!==q.hasm&&(q.hasM=q.hasm,delete q.hasm);void 0!==q.hasz&&(q.hasZ=q.hasz,delete q.hasz);void 0!==q.spatialreference&&(q.spatialReference=q.spatialreference,delete q.spatialreference);void 0!==q.rings&&(q.rings=this._fixPathArrays(q.rings,!0===q.hasZ,!0===q.hasZ));void 0!==q.paths&&(q.paths=this._fixPathArrays(q.paths,!0===q.hasZ,!0===q.hasM));void 0!==q.points&&(q.points=this._fixPointArrays(q.points,!0===q.hasZ,!0===q.hasM));return t.fromJson(q)};r._fixPathArrays=function(q,v,x){var y=
[];if(q instanceof Array)for(var B=0;B<q.length;B++)y.push(this._fixPointArrays(q[B],v,x));else if(q instanceof d)for(B=0;B<q.length();B++)y.push(this._fixPointArrays(q.get(B),v,x));return y};r._fixPointArrays=function(q,v,x){var y=[];if(q instanceof Array)for(var B=0;B<q.length;B++){var z=q[B];z instanceof h?v&&x?y.push([z.x,z.y,z.z,z.m]):v?y.push([z.x,z.y,z.z]):x?y.push([z.x,z.y,z.m]):y.push([z.x,z.y]):z instanceof d?y.push(z.toArray()):y.push(z)}else if(q instanceof d)for(B=0;B<q.length();B++)z=
q.get(B),z instanceof h?v&&x?y.push([z.x,z.y,z.z,z.m]):v?y.push([z.x,z.y,z.z]):x?y.push([z.x,z.y,z.m]):y.push([z.x,z.y]):z instanceof d?y.push(z.toArray()):y.push(z);return y};r._convertDictionaryToJson=function(q,v){void 0===v&&(v=!1);var x={},y;for(y in q.attributes){var B=q.attributes[y];B instanceof n&&(B=r._convertDictionaryToJson(B));v?x[y.toLowerCase()]=B:x[y]=B}return x};r.parseAttributesFromDictionary=function(q){var v={},x;for(x in q.attributes){var y=q.attributes[x];if(e.isSimpleType(y))v[x]=
y;else throw Error("Illegal Argument");}return v};r.fromJson=function(q){var v=null;null!==q.geometry&&void 0!==q.geometry&&(v=t.fromJson(q.geometry));var x={};if(null!==q.attributes&&void 0!==q.attributes)for(var y in q.attributes){var B=q.attributes[y];if(null===B)x[y]=B;else if(e.isString(B)||e.isNumber(B)||e.isBoolean(B)||e.isDate(B))x[y]=B;else throw Error("Illegal Argument");}return r.createFromGraphicLikeObject(v,x,null)};r.prototype.fullSchema=function(){return this._layer};r.prototype.gdbVersion=
function(){if(null===this._layer)return"";var q=this._layer.gdbVersion;return void 0===q?"":""===q&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":q};r.prototype.castAsJson=function(q){var v={attributes:{},geometry:!0===(null===q||void 0===q?void 0:q.keepGeometryType)?this.geometry():this.geometry().toJson()},x;for(x in this.attributes){var y=this.attributes[x];void 0!==y&&(v.attributes[x]=e.castAsJson(y,q))}return v};r.prototype.castAsJsonAsync=function(q,v){void 0===
q&&(q=null);return a(this,void 0,void 0,function(){return f(this,function(x){return[2,this.castAsJson(v)]})})};return r}()})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(D,k,a,f,g,p,n,d,e){function l(q,v,x){var y=q.rings||q.paths,B,z;var b=0;for(B=y.length;b<B;b++){var c=y[b];var m=0;for(z=c.length;m<z;m++){var u=c[m];if(0<m)w+=u[0],A+=u[1];else{var w=u[0];var A=u[1]}u[0]=v(w);u[1]=
x(A)}}return q}var h={esriGeometryPoint:function(q,v,x){q.x=v(q.x);q.y=x(q.y);return q},esriGeometryPolyline:l,esriGeometryPolygon:l,esriGeometryEnvelope:function(q,v,x){q.xmin=v(q.xmin);q.ymin=x(q.ymin);q.xmax=v(q.xmax);q.ymax=x(q.ymax);return q},esriGeometryMultipoint:function(q,v,x){var y=q.points,B;var z=0;for(B=y.length;z<B;z++){var b=y[z];if(0<z)c+=b[0],m+=b[1];else{var c=b[0];var m=b[1]}b[0]=v(c);b[1]=x(m)}return q}},t={esriGeometryPoint:function(q,v,x){q.x=v(q.x);q.y=x(q.y);return q}},r={createInstance:function(q,
v){var x=new q;v&&f.mixin(x,v);return x},fromJson:function(q){if(void 0!==q.x&&void 0!==q.y)return new g(q);if(void 0!==q.paths)return new p(q);if(void 0!==q.rings)return new n(q);if(void 0!==q.points)return new d(q);if(void 0!==q.xmin&&void 0!==q.ymin&&void 0!==q.xmax&&void 0!==q.ymax)return new e(q)},getJsonType:function(q){return q instanceof g?"esriGeometryPoint":q instanceof p?"esriGeometryPolyline":q instanceof n?"esriGeometryPolygon":q instanceof e?"esriGeometryEnvelope":q instanceof d?"esriGeometryMultipoint":
null},getGeometryType:function(q){return"esriGeometryPoint"===q?g:"esriGeometryPolyline"===q?p:"esriGeometryPolygon"===q?n:"esriGeometryEnvelope"===q?e:"esriGeometryMultipoint"===q?d:null},supportsLazyUnquantization:function(q){return"esriGeometryPoint"===q||"esriGeometryPolyline"===q||"esriGeometryPolygon"===q||"esriGeometryMultipoint"===q},unquantizeFunction:function(q,v){if(q&&v){var x=v.translate[0],y=v.translate[1],B=v.scale[0],z=v.scale[1],b=function(u){return u*B+x},c=function(u){return y-
u*z},m=h[q];return function(u){return u?m(u,b,c):null}}},unquantize:function(q,v,x){if(v=r.unquantizeFunction(v,x)){var y=q.length;for(x=0;x<y;x++)v(q[x].geometry)}},quantizeFunction:function(q,v){if(q&&"esriGeometryPoint"===q&&v){var x=v.translate[0],y=v.translate[1],B=v.scale[0],z=v.scale[1],b=function(u){return Math.round((u-x)/B)},c=function(u){return Math.round((y-u)/z)},m=t[q];return function(u){return u?m(u,b,c):null}}},quantize:function(q,v,x){if(v=r.quantizeFunction(v,x)){var y=q.length;
for(x=0;x<y;x++)v(q[x].geometry)}}};D.mixin(D.getObject("geometry",!0,a),r);return r})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(D,k,a){var f={info:0,warn:1,error:2};D=function(){function g(p){void 0===p&&(p={});this.module=p.module||"";this.writer=p.writer||null;this.level=p.level||null;null!=p.enabled&&(this.enabled=!!p.enabled);g._loggers[this.module]=this;p=this.module.lastIndexOf(".");-1!==p&&(this.parent=g.getLogger(this.module.slice(0,
p)))}g.prototype.log=function(p){for(var n=[],d=1;d<arguments.length;d++)n[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(p)&&(d=this._inheritedWriter())&&d.apply(void 0,[p,this.module].concat(n))};g.prototype.error=function(){for(var p=[],n=0;n<arguments.length;n++)p[n]=arguments[n];this.log.apply(this,["error"].concat(p))};g.prototype.warn=function(){for(var p=[],n=0;n<arguments.length;n++)p[n]=arguments[n];this.log.apply(this,["warn"].concat(p))};g.prototype.info=function(){for(var p=[],
n=0;n<arguments.length;n++)p[n]=arguments[n];this.log.apply(this,["info"].concat(p))};g.prototype.getLogger=function(p){return g.getLogger(this.module+"."+p)};g.getLogger=function(p){var n=g._loggers[p];n||(n=new g({module:p}));return n};g.prototype._parentWithMember=function(p,n){for(var d=this;d&&null==d[p];)d=d.parent;return d?d[p]:n};g.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};g.prototype._consoleWriter=function(p,n){for(var d=[],e=2;e<
arguments.length;e++)d[e-2]=arguments[e];console[p].apply(console,["["+n+"]"].concat(d))};g.prototype._matchLevel=function(p){return f[this._parentWithMember("level","error")]<=f[p]};g.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};g._loggers={};return g}();D.getLogger("esri").level="warn";return D})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],function(D,k){function a(g){return g?72*g/k.DPI:0}Object.defineProperty(k,"__esModule",
{value:!0});var f=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;k.DPI=96;k.pt2px=function(g){return g?g/72*k.DPI:0};k.px2pt=a;k.toPt=function(g){if("string"===typeof g){if(f.test(g)){var p=g.match(f),n=Number(p[1]);p=p[3]&&p[3].toLowerCase();g="-"===g.charAt(0);n="px"===p?a(n):n;return g?-n:n}return null}return g}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils","esri/arcade/Dictionary"],function(D,k,a,f){Object.defineProperty(k,"__esModule",
{value:!0});k.createSyntaxTree=function(g){return a.createSyntaxTree(g)};k.createFunction=function(g,p){return a.createFunction(g,p)};k.createExecContext=function(g,p){return a.createExecContext(g,p)};k.executeFunction=function(g,p){return a.executeFunction(g,p)};k.extractFieldNames=function(g){return a.extractFieldNames(g)};k.getViewInfo=function(g){if(g&&g.viewingMode&&null!=g.scale&&g.spatialReference)return{view:new f({viewingMode:g.viewingMode,scale:g.scale}),sr:g.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang",
"dojo/has","../kernel","../support/expressionUtils"],function(D,k,a,f){D.setObject("renderer.arcadeUtils",f,a);return f})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(D,k,a,f,g,p,n){function d(r){var q=new f;r.then(function(v){if(!q.isFulfilled())return q.resolve(v)},function(v){if(!q.isFulfilled())return q.reject(v)});return q.promise}function e(r){return r.replace(/[|\\{}()[\]^$+*?.]/g,
"\\$\x26")}var l={vars:{$feature:"any",$view:"any"}},h=/^\$(feature|aggregatedFeatures)\./i,t={_getSyntaxTree:function(r){return"string"===typeof r?t.createSyntaxTree(r):r},createSyntaxTree:function(r){try{var q=r?p.parseScript(r):null}catch(v){q=null}return q},createFunction:function(r,q){q=q||D.clone(l);var v=t._getSyntaxTree(r);try{var x=v?p.compileScript(v,q):null}catch(y){x=null}return x},createExecContext:function(r,q){return{vars:{$feature:r?n.createFromGraphic(r):new n,$view:q&&q.view},spatialReference:q&&
q.sr}},evalSyntaxTree:function(r,q){try{var v=p.executeScript(r,q)}catch(x){v=null}return v},executeFunction:function(r,q){try{var v=r?r(q):null}catch(x){v=null}return v},executeAsyncFunction:function(r,q){try{var v=r?d(r(q)):(new f).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(x){v=(new f).reject(x)}return v},extractFieldNames:function(r,q){var v=t._getSyntaxTree(r);v=p.extractExpectedFieldLiterals(v);var x=[];k.forEach(v,function(B){h.test(B)&&
(B=B.replace(h,""),x.push(B))});var y=k.filter(x,function(B){return-1!==B.indexOf("*")});x=k.filter(x,function(B){return-1===y.indexOf(B)});q&&k.forEach(y,function(B){var z=new RegExp("^"+B.split(/\*+/).map(e).join(".*")+"$","i");k.forEach(q,function(b){z.test(b)&&x.push(b)})});x.sort();return k.filter(x,function(B,z){return 0===z||x[z-1]!==B})},dependsOnView:function(r){return t.hasVariable(r,"$view")},hasGeometryFunctions:function(r){return(r=t._getSyntaxTree(r))?p.scriptTouchesGeometry(r):!1},
hasGeometryOperations:function(r){return(r=t._getSyntaxTree(r))?p.scriptUsesGeometryEngine(r):!1},enableGeometryOperations:function(){return d(p.enableGeometrySupport())},hasVariable:function(r,q){var v=t._getSyntaxTree(r);return v?p.referencesMember(v,q):!1},hasFunction:function(r,q){var v=t._getSyntaxTree(r);return v?p.referencesFunction(v,q):!1},createFeatureSetFromLayer:function(r,q){q=q||{};var v=p.featureSetUtils();return v?v.constructFeatureSet(r,q.spatialReference,q.outFields,q.returnGeometry,
q.cache):null},createFeatureSetFromLayerUrl:function(r,q){q=q||{};var v=p.featureSetUtils();return v?v.constructFeatureSetFromUrlRaw(r,q.spatialReference,q.outFields,q.returnGeometry,q.cache):null},createFeatureSetCollectionFromMap:function(r,q){var v=p.featureSetUtils();return v?v.createFeatureSetCollectionFromMap(r,r.spatialReference,q&&q.cache):null},createFeatureSetCollectionFromServiceUrl:function(r,q){q=q||{};var v=p.featureSetUtils();return v?v.createFeatureSetCollectionFromService(r,q.spatialReference,
q.cache):null},hasFeatureSetOperations:function(r){return(r=t._getSyntaxTree(r))?p.scriptUsesFeatureSet(r):!1},enableFeatureSetOperations:function(){return d(p.enableFeatureSetSupport().then(function(){var r=p.featureSetUtils();r&&r.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return d(p.enableAsyncSupport())}};D.setObject("support.expressionUtils",t,g);return t})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has".split(" "),
function(D,k,a,f,g,p,n,d,e){function l(R,S){if(null===E)throw Error("Async Arcade must be enabled for this script");return e("esri-csp-restrictions")||!1===w?function(O){return E.executeScript(R,O)}:g.compileScript(R,S,!0)}function h(R,S){void 0===S&&(S=[]);return n.parseScript(R,S)}function t(R,S){if(!0===S.useAsync||!0===R.isAsync){if(null===E)throw Error("Async Arcade must be enabled for this script");return E.executeScript(R,S)}return p.executeScript(R,S)}function r(R,S){return p.referencesMember(R,
S)}function q(R,S){void 0===S&&(S=[]);void 0===R.usesGeometry&&d.findScriptDependencies(R,S);return!0===R.usesGeometry}function v(){return F?F:F=x()}function x(){return a(this,void 0,void 0,function(){return f(this,function(R){return[2,new Promise(function(S,O){D(["../geometry/geometryEngine","./functions/geomsync"],function(L,P){C=!0;P.setGeometryEngine(L);S(!0)},function(L){O(L)})})]})})}function y(){return null!==I?I:I=B()}function B(){return a(this,void 0,void 0,function(){var R,S,O;return f(this,
function(L){switch(L.label){case 0:return[4,g.enableAsyncSupport()];case 1:return L.sent(),[4,new Promise(function(P,X){D(["./arcadeAsyncRuntime"],function(Q){P(Q)},X)})];case 2:E=L.sent();R=0;for(S=G;R<S.length;R++)O=S[R],E.extend(O),g.extend(O,"async");G=null;return[2,!0]}})})}function z(){return E?!0:!1}function b(){return M?M:M=c()}function c(){return a(this,void 0,void 0,function(){var R;return f(this,function(S){switch(S.label){case 0:return[4,y()];case 1:return S.sent(),[4,new Promise(function(O,
L){D(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(P,X,Q,K,U){O({featuresetutils:P,libraries:[X,Q,K,U]})},L)})];case 2:return R=S.sent(),Y=R.featuresetutils,E.extend(R.libraries),g.extend(R.libraries,"async"),A=!0,[2,!0]}})})}function m(R,S){void 0===S&&(S=[]);void 0===R.usesFeatureSet&&d.findScriptDependencies(R,S);return!0===R.usesFeatureSet}Object.defineProperty(k,"__esModule",{value:!0});k.featureSetUtils=
k.scriptTouchesGeometry=k.loadScriptDependencies=k.scriptIsAsync=k.scriptUsesFeatureSet=k.enableFeatureSetSupportImpl=k.enableFeatureSetSupport=k.isGeometryEnabled=k.isAsyncEnabled=k.isFeatureSetSupportEnabled=k.enableAsyncSupportImpl=k.enableAsyncSupport=k.enableGeometrySupportImpl=k.enableGeometrySupport=k.scriptUsesGeometryEngine=k.extractExpectedFieldLiterals=k.extractFieldLiterals=k.referencesFunction=k.referencesMember=k.executeScript=k.parseAndExecuteScript=k.scriptCheck=k.validateScript=k.parseScript=
k.extend=k.compileScript=void 0;var u="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),w=function(){if(e("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(R){return!1}}(),A=!1,C=!1,E=null,G=[];k.compileScript=function(R,S){return!0===S.useAsync||!0===R.isAsync?l(R,S):e("esri-csp-restrictions")?function(O){return p.executeScript(R,O)}:g.compileScript(R,S)};k.extend=function(R){p.extend(R);
g.extend(R,"sync");null===E?G.push(R):(g.extend(R,"async"),E.extend(R))};k.parseScript=h;k.validateScript=function(R,S,O){void 0===O&&(O="");return n.validateScript(R,S,O)};k.scriptCheck=function(R,S,O,L){void 0===L&&(L="");return n.scriptCheck(R,S,O,L)};k.parseAndExecuteScript=function(R,S,O){void 0===O&&(O=[]);R=n.parseScript(R,O);return t(R,S)};k.executeScript=t;k.referencesMember=r;k.referencesFunction=function(R,S){return p.referencesFunction(R,S)};k.extractFieldLiterals=function(R,S){void 0===
S&&(S=!1);return n.extractFieldLiterals(R,S)};k.extractExpectedFieldLiterals=function(R){return n.extractExpectedFieldLiterals(R)};k.scriptUsesGeometryEngine=q;var F=null;k.enableGeometrySupport=v;k.enableGeometrySupportImpl=x;var I=null;k.enableAsyncSupport=y;k.enableAsyncSupportImpl=B;k.isFeatureSetSupportEnabled=function(){return A};k.isAsyncEnabled=z;k.isGeometryEnabled=function(){return C};var M=null;k.enableFeatureSetSupport=b;k.enableFeatureSetSupportImpl=c;k.scriptUsesFeatureSet=m;k.scriptIsAsync=
function(R,S){void 0===S&&(S=[]);void 0===R.isAsync&&d.findScriptDependencies(R,S);return!0===R.isAsync};k.loadScriptDependencies=function(R,S,O,L){void 0===O&&(O=[]);void 0===L&&(L=!1);return a(this,void 0,void 0,function(){var P,X;return f(this,function(Q){switch(Q.label){case 0:P="string"===typeof R?h(R):R;X=[];if(P&&(!1===C&&(q(P)||L)&&X.push(v()),!1===z()&&(!0===P.isAsync||S)&&X.push(y()),!1===A)){if(!(Q=m(P)))a:{Q=P;if(O)for(var K=0,U=O;K<U.length;K++)if(r(Q,U[K])){Q=!0;break a}Q=!1}Q&&X.push(b())}return X.length?
[4,Promise.all(X)]:[3,2];case 1:return Q.sent(),[2,!0];case 2:return[2,!0]}})})};k.scriptTouchesGeometry=function(R){if(q(R))return!0;R=d.findFunctionCalls(R);for(var S=!1,O=0;O<R.length;O++)if(u.includes(R[O])){S=!0;break}return S};var Y=null;k.featureSetUtils=function(){return Y}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b,c,m,u,w,A,C,E,G,F){function I(V,ca,J){try{return J(V,null,ca.arguments)}catch(pa){throw pa;}}function M(V,ca){try{switch(ca.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return L(V,ca);case "VariableDeclaration":for(var J=[],pa=0;pa<ca.declarations.length;pa++)J.push(M(V,ca.declarations[pa]));return J.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return O(V,ca);case "FunctionDeclaration":var sa=
ca.id.name.toLowerCase(),oa={isAsync:V.isAsync,spatialReference:V.spatialReference,console:V.console,lrucache:V.lrucache,interceptor:V.interceptor,services:V.services,symbols:V.symbols,mangleMap:V.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:V.depthCounter+1,globalScope:V.globalScope};if(64<oa.depthCounter)throw Error("Exceeded maximum function depth");J="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(pa=0;pa<ca.params.length;pa++){var Oa=ca.params[pa].name.toLowerCase(),Sa=la(V);oa.localScope._SymbolsMap[Oa]=Sa;oa.mangleMap[Oa]=Sa;J+="lscope['"+Sa+"']\x3darguments["+pa.toString()+"];\n"}!0===V.isAsync?(J=J+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(O(oa,ca.body)+"\n return lastStatement; "),J=J+"});  }, runtimeCtx),"+(ca.params.length+")")):J+=O(oa,ca.body)+"\n return lastStatement; }, runtimeCtx),"+ca.params.length+")";J+="\n lastStatement \x3d lc.voidOperation; \n";
if(void 0!==V.globalScope[sa])var va="gscope['"+sa+"']\x3d"+J;else void 0!==V.globalScope._SymbolsMap[sa]?va="gscope['"+V.globalScope._SymbolsMap[sa]+"']\x3d"+J:(Sa=la(V),V.globalScope._SymbolsMap[sa]=Sa,V.mangleMap[sa]=Sa,va="gscope['"+Sa+"']\x3d"+J);return va;case "ReturnStatement":var Da=null===ca.argument?"return lc.voidOperation":"return "+M(V,ca.argument);return Da;case "IfStatement":if("AssignmentExpression"===ca.test.type||"UpdateExpression"===ca.test.type)throw Error(q.nodeErrorMessage(ca.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ya=M(V,ca.test),wa=ma(V),Aa="var "+wa+" \x3d "+ya+";\n if ("+wa+" \x3d\x3d\x3d true) {\n"+S(V,ca.consequent)+"\n }\n";Aa=null!==ca.alternate?Aa+("else if ("+wa+"\x3d\x3d\x3dfalse)   { \n"+S(V,ca.alternate)+"}\n"):Aa+("else if ("+wa+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return Aa+="else { lang.error({type: '"+ca.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Ea="AssignmentExpression"===
ca.expression.type?"lastStatement \x3d lc.voidOperation; "+M(V,ca.expression)+"; \n ":"lastStatement \x3d "+M(V,ca.expression)+"; ";return Ea;case "AssignmentExpression":return R(V,ca);case "UpdateExpression":return Y(V,ca);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Fa=[];sa=va=0;for(pa=ca.quasis;sa<pa.length;sa++){var La=pa[sa];Fa.push(La.value?JSON.stringify(La.value.cooked):JSON.stringify(""));!1===La.tail&&(Fa.push(ca.expressions[va]?
"lang.castString(lang.aCheck("+M(V,ca.expressions[va])+", 'TemplateLiteral'))":""),va++)}J="(["+Fa.join(",")+"]).join('')"}catch(Wa){throw Wa;}return J;case "TemplateElement":return JSON.stringify(ca.value?ca.value.cooked:"");case "ForStatement":J="lastStatement \x3d lc.voidOperation; \n";null!==ca.init&&(J+=M(V,ca.init)+"; ");var Ja=ma(V),Na=ma(V);J+="var "+Ja+" \x3d true; \n do { ";null!==ca.update&&(J+=" if ("+Ja+"\x3d\x3d\x3dfalse) {\n "+M(V,ca.update)+"  \n}\n "+Ja+"\x3dfalse; \n");null!==ca.test&&
(J+="var "+Na+" \x3d "+M(V,ca.test)+"; ",J+="if ("+Na+"\x3d\x3d\x3dfalse) { break; } else if ("+Na+"!\x3d\x3dtrue) { lang.error({type: '"+ca.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");J+=M(V,ca.body);null!==ca.update&&(J+="\n "+M(V,ca.update));return J+("\n"+Ja+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ha=ma(V),Ma=ma(V),Ka=ma(V),Qa="var "+Ha+" \x3d "+M(V,ca.right)+";\n";"VariableDeclaration"===ca.left.type&&(Qa+=M(V,ca.left));
var $a="VariableDeclaration"===ca.left.type?ca.left.declarations[0].id.name:ca.left.name;$a=$a.toLowerCase();J="";null!==V.localScope&&(void 0!==V.localScope[$a]?J="lscope['"+$a+"']":void 0!==V.localScope._SymbolsMap[$a]&&(J="lscope['"+V.localScope._SymbolsMap[$a]+"']"));""===J&&(void 0!==V.globalScope[$a]?J="gscope['"+$a+"']":void 0!==V.globalScope._SymbolsMap[$a]&&(J="gscope['"+V.globalScope._SymbolsMap[$a]+"']"));Qa=Qa+("if ("+Ha+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ha+") || lc.isString("+Ha+")) {var ")+(Ma+"\x3d"+Ha+".length; \nfor(var ")+(Ka+"\x3d0; "+Ka+"\x3c"+Ma+"; "+Ka+"++) {\n");Qa+=J+"\x3d"+Ka+";\n";Qa+=M(V,ca.body);Qa+="\n}\n";Qa+=" lastStatement \x3d lc.voidOperation; \n";Qa+=" \n}\n";Qa+="else if (lc.isImmutableArray("+Ha+")) {";Qa=Qa+("var "+Ma+"\x3d"+Ha+".length(); \nfor(var ")+(Ka+"\x3d0; "+Ka+"\x3c"+Ma+"; "+Ka+"++) {\n");Qa+=J+"\x3d"+Ka+";\n";Qa+=M(V,ca.body);Qa+="\n}\n";Qa+=" lastStatement \x3d lc.voidOperation; \n";Qa+=" \n}\n";Qa+="else if (( "+
Ha+" instanceof lang.Dictionary) || ( "+Ha+" instanceof lang.Feature)) {";Qa=Qa+("var "+Ma+"\x3d"+Ha+".keys(); \nfor(var ")+(Ka+"\x3d0; "+Ka+"\x3c"+Ma+".length; "+Ka+"++) {\n");Qa+=J+"\x3d"+Ma+"["+Ka+"];\n";Qa+=M(V,ca.body);Qa+="\n}\n";Qa+=" lastStatement \x3d lc.voidOperation; \n";Qa+=" \n}\n";V.isAsync&&(Qa+="else if (lc.isFeatureSet("+Ha+")) {",Qa=Qa+("var "+Ma+"\x3d"+Ha+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Ka+"\x3dlang. graphicToFeature( yield "+Ma+".next(),"+Ha+"); "+Ka+"!\x3dnull; "+
Ka+"\x3dlang. graphicToFeature( yield "+Ma+".next(),"+Ha+")) {\n")+(J+"\x3d"+Ka+";\n"),Qa+=M(V,ca.body),Qa+="\n}\n",Qa+=" lastStatement \x3d lc.voidOperation; \n",Qa+=" \n}\n");return Qa+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return X(V,ca);case "MemberExpression":try{J=void 0;J=!0===ca.computed?M(V,ca.property):"'"+ca.property.name+"'";var ab="lang.member("+M(V,ca.object)+","+J+")"}catch(Wa){throw Wa;}return ab;case "Literal":return null===ca.value||void 0===ca.value?
"null":JSON.stringify(ca.value);case "ThisExpression":throw Error(q.nodeErrorMessage(ca,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==ca.callee.type)throw Error(q.nodeErrorMessage(ca,"RUNTIME","ONLYNODESSUPPORTED"));var gb=ca.callee.name.toLowerCase();J="";null!==V.localScope&&(void 0!==V.localScope[gb]?J="lscope['"+gb+"']":void 0!==V.localScope._SymbolsMap[gb]&&(J="lscope['"+V.localScope._SymbolsMap[gb]+"']"));""===J&&(void 0!==V.globalScope[gb]?J="gscope['"+gb+"']":void 0!==
V.globalScope._SymbolsMap[gb]&&(J="gscope['"+V.globalScope._SymbolsMap[gb]+"']"));if(""!==J){pa="[";for(La=0;La<ca.arguments.length;La++)0<La&&(pa+=", "),pa+=M(V,ca.arguments[La]);pa+="]";Fa=V.isAsync?"(yield lang.callfunc("+J+","+pa+",runtimeCtx) )":"lang.callfunc("+J+","+pa+",runtimeCtx)"}else throw Error(q.nodeErrorMessage(ca,"RUNTIME","NOTFOUND"));}catch(Wa){throw Wa;}return Fa;case "UnaryExpression":try{var wb="lang.unary("+M(V,ca.argument)+",'"+ca.operator+"')"}catch(Wa){throw Wa;}return wb;
case "BinaryExpression":try{var pb="lang.binary("+M(V,ca.left)+","+M(V,ca.right)+",'"+ca.operator+"')"}catch(Wa){throw Wa;}return pb;case "LogicalExpression":try{if("AssignmentExpression"===ca.left.type||"UpdateExpression"===ca.left.type)throw Error(q.nodeErrorMessage(ca.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ca.right.type||"UpdateExpression"===ca.right.type)throw Error(q.nodeErrorMessage(ca.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===
ca.operator||"||"===ca.operator)var xb="(lang.logicalCheck("+M(V,ca.left)+") "+ca.operator+" lang.logicalCheck("+M(V,ca.right)+"))";else throw Error(q.nodeErrorMessage(ca,"RUNTIME","ONLYORORAND"));}catch(Wa){throw Wa;}return xb;case "ConditionalExpression":throw Error(q.nodeErrorMessage(ca,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{J=[];for(pa=0;pa<ca.elements.length;pa++)"Literal"===ca.elements[pa].type?J.push(M(V,ca.elements[pa])):J.push("lang.aCheck("+M(V,ca.elements[pa])+",'ArrayExpression')");
var qb="["+J.join(",")+"]"}catch(Wa){throw Wa;}return qb;case "ObjectExpression":J="lang.dictionary([";for(pa=0;pa<ca.properties.length;pa++){var kb=ca.properties[pa],yb="Identifier"===kb.key.type?"'"+kb.key.name+"'":M(V,kb.key),zb=M(V,kb.value);0<pa&&(J+=",");J+="lang.strCheck("+yb+",'ObjectExpression'),lang.aCheck("+zb+", 'ObjectExpression')"}return J+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(q.nodeErrorMessage(ca,"RUNTIME","NOTSUPPORTED"));default:throw Error(q.nodeErrorMessage(ca,
"RUNTIME","UNREOGNISED"));}}catch(Wa){throw Wa;}}function Y(V,ca){var J=null,pa="";if("MemberExpression"===ca.argument.type)return J=M(V,ca.argument.object),pa=!0===ca.argument.computed?M(V,ca.argument.property):"'"+ca.argument.property.name+"'","lang.memberupdate("+J+","+pa+",'"+ca.operator+"',"+ca.prefix+")";J=ca.argument.name.toLowerCase();if(null!==V.localScope){if(void 0!==V.localScope[J])return"lang.update(lscope, '"+J+"','"+ca.operator+"',"+ca.prefix+")";if(void 0!==V.localScope._SymbolsMap[J])return"lang.update(lscope, '"+
V.localScope._SymbolsMap[J]+"','"+ca.operator+"',"+ca.prefix+")"}if(void 0!==V.globalScope[J])return"lang.update(gscope, '"+J+"','"+ca.operator+"',"+ca.prefix+")";if(void 0!==V.globalScope._SymbolsMap[J])return"lang.update(gscope, '"+V.globalScope._SymbolsMap[J]+"','"+ca.operator+"',"+ca.prefix+")";throw Error("Variable not recognised");}function R(V,ca){var J=M(V,ca.right),pa=null,sa="";if("MemberExpression"===ca.left.type)return pa=M(V,ca.left.object),sa=!0===ca.left.computed?M(V,ca.left.property):
"'"+ca.left.property.name+"'","lang.assignmember("+pa+","+sa+",'"+ca.operator+"',"+J+")";pa=ca.left.name.toLowerCase();if(null!==V.localScope){if(void 0!==V.localScope[pa])return"lscope['"+pa+"']\x3dlang.assign("+J+",'"+ca.operator+"', lscope['"+pa+"'])";if(void 0!==V.localScope._SymbolsMap[pa])return"lscope['"+V.localScope._SymbolsMap[pa]+"']\x3dlang.assign("+J+",'"+ca.operator+"', lscope['"+V.localScope._SymbolsMap[pa]+"'])"}if(void 0!==V.globalScope[pa])return"gscope['"+pa+"']\x3dlang.assign("+
J+",'"+ca.operator+"', gscope['"+pa+"'])";if(void 0!==V.globalScope._SymbolsMap[pa])return"gscope['"+V.globalScope._SymbolsMap[pa]+"']\x3dlang.assign("+J+",'"+ca.operator+"', gscope['"+V.globalScope._SymbolsMap[pa]+"'])";throw Error("Variable not recognised");}function S(V,ca){return"BlockStatement"===ca.type?M(V,ca):"ReturnStatement"===ca.type||"BreakStatement"===ca.type||"ContinueStatement"===ca.type?M(V,ca)+"; ":"UpdateExpression"===ca.type?"lastStatement \x3d "+M(V,ca)+"; ":"ExpressionStatement"===
ca.type?M(V,ca):"ObjectExpression"===ca.type?"lastStatement \x3d "+M(V,ca)+"; ":M(V,ca)+"; "}function O(V,ca){for(var J="",pa=0;pa<ca.body.length;pa++)J="ReturnStatement"===ca.body[pa].type?J+(M(V,ca.body[pa])+"; \n"):"BreakStatement"===ca.body[pa].type?J+(M(V,ca.body[pa])+"; \n"):"ContinueStatement"===ca.body[pa].type?J+(M(V,ca.body[pa])+"; \n"):"UpdateExpression"===ca.body[pa].type?J+("lastStatement \x3d "+M(V,ca.body[pa])+"; \n"):"ObjectExpression"===ca.body[pa].type?J+("lastStatement \x3d "+M(V,
ca.body[pa])+"; \n"):J+(M(V,ca.body[pa])+" \n");return J}function L(V,ca){var J=null===ca.init?null:M(V,ca.init);J===r.voidOperation&&(J=null);var pa=ca.id.name.toLowerCase();if(null!==V.localScope){if(void 0!==V.localScope[pa])return"lscope['"+pa+"']\x3d"+J+"; ";if(void 0!==V.localScope._SymbolsMap[pa])return"lscope['"+V.localScope._SymbolsMap[pa]+"']\x3d"+J+"; ";var sa=la(V);V.localScope._SymbolsMap[pa]=sa;V.mangleMap[pa]=sa;return"lscope['"+sa+"']\x3d"+J+"; "}if(void 0!==V.globalScope[pa])return"gscope['"+
pa+"']\x3d"+J+"; ";if(void 0!==V.globalScope._SymbolsMap[pa])return"gscope['"+V.globalScope._SymbolsMap[pa]+"']\x3d"+J+"; ";sa=la(V);V.globalScope._SymbolsMap[pa]=sa;V.mangleMap[pa]=sa;return"gscope['"+sa+"']\x3d"+J+"; "}function P(V,ca,J){ca=ca.toLowerCase();switch(ca){case "hasz":return V=V.hasZ,void 0===V?!1:V;case "hasm":return V=V.hasM,void 0===V?!1:V;case "spatialreference":return ca=V.spatialReference._arcadeCacheId,void 0===ca&&(J=!0,Object.freeze&&Object.isFrozen(V.spatialReference)&&(J=
!1),J&&(Ba++,ca=V.spatialReference._arcadeCacheId=Ba)),V=new e({wkt:V.spatialReference.wkt,wkid:V.spatialReference.wkid}),void 0!==ca&&(V._arcadeCacheId="SPREF"+ca.toString()),V}switch(V.type){case "extent":switch(ca){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return V=V[ca],void 0!==V?V:null;case "type":return"Extent"}break;case "polygon":switch(ca){case "rings":return ca=V.getCacheValue("_arcadeCacheId"),void 0===ca&&(Ba++,ca=Ba,V.setCacheValue("_arcadeCacheId",
ca)),V=new h(V.rings,V.spatialReference,!0===V.hasZ,!0===V.hasM,ca);case "type":return"Polygon"}break;case "point":switch(ca){case "x":case "y":case "z":case "m":return void 0!==V[ca]?V[ca]:null;case "type":return"Point"}break;case "polyline":switch(ca){case "paths":return ca=V.getCacheValue("_arcadeCacheId"),void 0===ca&&(Ba++,ca=Ba,V.setCacheValue("_arcadeCacheId",ca)),V=new h(V.paths,V.spatialReference,!0===V.hasZ,!0===V.hasM,ca);case "type":return"Polyline"}break;case "multipoint":switch(ca){case "points":return ca=
V.getCacheValue("_arcadeCacheId"),void 0===ca&&(Ba++,ca=Ba,V.setCacheValue("_arcadeCacheId",ca)),V=new t(V.points,V.spatialReference,!0===V.hasZ,!0===V.hasM,ca,1);case "type":return"Multipoint"}}throw Error(q.nodeErrorMessage(J,"RUNTIME","PROPERTYNOTFOUND"));}function X(V,ca){try{var J=ca.name.toLowerCase();if(null!==V.localScope){if(void 0!==V.localScope[J])return"lscope['"+J+"']";if(void 0!==V.localScope._SymbolsMap[J])return"lscope['"+V.localScope._SymbolsMap[J]+"']"}if(void 0!==V.globalScope[J])return"gscope['"+
J+"']";if(void 0!==V.globalScope._SymbolsMap[J])return"gscope['"+V.globalScope._SymbolsMap[J]+"']";throw Error(q.nodeErrorMessage(ca,"RUNTIME","VARIABLENOTFOUND"));}catch(pa){throw pa;}}function Q(V){return null===V?"":r.isArray(V)||r.isImmutableArray(V)?"Array":r.isDate(V)?"Date":r.isString(V)?"String":r.isBoolean(V)?"Boolean":r.isNumber(V)?"Number":V instanceof d?"Attachment":V instanceof n?"Portal":V instanceof e?"Dictionary":r.isFeature(V)?"Feature":V instanceof C?"Point":V instanceof E?"Polygon":
V instanceof G?"Polyline":V instanceof A?"Multipoint":V instanceof u?"Extent":r.isFunctionParameter(V)?"Function":r.isFeatureSet(V)?"FeatureSet":r.isFeatureSetCollection(V)?"FeatureSetCollection":V===r.voidOperation?"":"number"===typeof V&&isNaN(V)?"Number":"Unrecognised Type"}function K(V,ca,J,pa){try{if(r.equalityTest(ca[J],pa))return ca[J+1];var sa=ca.length-J;return 1===sa?ca[J]:2===sa?null:3===sa?ca[J+2]:K(V,ca,J+2,pa)}catch(oa){throw oa;}}function U(V,ca,J,pa){try{if(!0===pa)return ca[J+1];
if(3===ca.length-J)return ca[J+2];var sa=ca[J+2];if(!1===r.isBoolean(sa))throw Error("WHEN needs boolean test conditions");return U(V,ca,J+2,sa)}catch(oa){throw oa;}}function da(V,ca){var J=V.length,pa=Math.floor(J/2);if(0===J)return[];if(1===J)return[V[0]];var sa=da(V.slice(0,pa),ca);J=da(V.slice(pa,J),ca);for(pa=[];0<sa.length||0<J.length;)if(0<sa.length&&0<J.length){var oa=ca(sa[0],J[0]);isNaN(oa)&&(oa=0);0>=oa?(pa.push(sa[0]),sa=sa.slice(1)):(pa.push(J[0]),J=J.slice(1))}else 0<sa.length?(pa.push(sa[0]),
sa=sa.slice(1)):0<J.length&&(pa.push(J[0]),J=J.slice(1));return pa}function fa(V,ca){return a(this,void 0,void 0,function(){var J,pa,sa,oa;return f(this,function(Oa){switch(Oa.label){case 0:J=V.length;pa=Math.floor(J/2);if(0===J)return[2,[]];if(1===J)return[2,[V[0]]];sa=[fa(V.slice(0,pa),ca),fa(V.slice(pa,J),ca)];return[4,Promise.all(sa)];case 1:return oa=Oa.sent(),[2,ia(oa[0],oa[1],ca,[])]}})})}function ia(V,ca,J,pa){return a(this,void 0,void 0,function(){var sa,oa;return f(this,function(Oa){switch(Oa.label){case 0:return sa=
pa,0<V.length||0<ca.length?0<V.length&&0<ca.length?[4,J(V[0],ca[0])]:[3,2]:[3,4];case 1:return oa=Oa.sent(),isNaN(oa)&&(oa=1),0>=oa?(sa.push(V[0]),V=V.slice(1)):(sa.push(ca[0]),ca=ca.slice(1)),[2,ia(V,ca,J,pa)];case 2:if(0<V.length)return sa.push(V[0]),V=V.slice(1),[2,ia(V,ca,J,pa)];if(0<ca.length)return sa.push(ca[0]),ca=ca.slice(1),[2,ia(V,ca,J,pa)];Oa.label=3;case 3:return[3,5];case 4:return[2,pa];case 5:return[2]}})})}function la(V){V.symbols.symbolCounter++;return"_T"+V.symbols.symbolCounter.toString()}
function ma(V){V.symbols.symbolCounter++;return"_Tvar"+V.symbols.symbolCounter.toString()}function ta(V,ca,J){var pa={};V||(V={});J||(J={});pa._SymbolsMap={};pa.textformatting=1;pa.infinity=1;pa.pi=1;for(var sa in ca)pa[sa]=1;for(sa in J)pa[sa]=1;for(sa in V)pa[sa]=1;return pa}function ua(V,ca){for(var J={mode:ca,compiled:!0,functions:{},signatures:[],standardFunction:I,standardFunctionAsync:I,evaluateIdentifier:Ca},pa=0;pa<V.length;pa++)V[pa].registerFunctions(J);if("sync"===ca){for(var sa in J.functions)Z[sa]=
new r.NativeFunction(J.functions[sa]),ha.prototype[sa]=Z[sa];for(pa=0;pa<J.signatures.length;pa++)q.addFunctionDeclaration(J.signatures[pa],"sync")}else{for(sa in J.functions)ka[sa]=new r.NativeFunction(J.functions[sa]),ea.prototype[sa]=ka[sa];for(pa=0;pa<J.signatures.length;pa++)q.addFunctionDeclaration(J.signatures[pa],"async")}}function Ca(V,ca){var J=ca.name;if("_SymbolsMap"===J)throw Error("Illegal");if(0<V.localStack.length){if("_t"!==J.substr(0,2).toLowerCase()&&void 0!==V.localStack[V.localStack.length-
1][J])return V.localStack[V.localStack.length-1][J];var pa=V.mangleMap[J];if(void 0!==pa&&void 0!==V.localStack[V.localStack.length-1][pa])return V.localStack[V.localStack.length-1][pa]}if("_t"!==J.substr(0,2).toLowerCase()&&void 0!==V.globalScope[J]||1===V.globalScope._SymbolsMap[J])return V.globalScope[J];J=V.mangleMap[J];if(void 0!==J)return V.globalScope[J]}function xa(V){}Object.defineProperty(k,"__esModule",{value:!0});k.enableAsyncSupport=k.compileScript=k.referencesFunction=k.referencesMember=
k.validateScript=k.extractExpectedFieldLiterals=k.extractFieldLiterals=k.executeScript=k.extend=k.functionHelper=void 0;var Ba=0,Z={};x.registerFunctions(Z,I);c.registerFunctions(Z,I);z.registerFunctions(Z,I);y.registerFunctions(Z,I);b.registerFunctions(Z,I);Z["typeof"]=function(V,ca){return I(V,ca,function(J,pa,sa){r.pcCheck(sa,1,1);J=Q(sa[0]);if("Unrecognised Type"===J)throw Error("Unrecognised Type");return J})};Z.iif=function(V,ca){try{return I(V,ca,function(J,pa,sa){r.pcCheck(sa,3,3);if(!1===
r.isBoolean(sa[0]))throw Error("IF Function must have a boolean test condition");return sa[0]?sa[1]:sa[2]})}catch(J){throw J;}};Z.decode=function(V,ca){try{return I(V,ca,function(J,pa,sa){if(2>sa.length)throw Error("Missing Parameters");if(2===sa.length)return sa[1];if(0===(sa.length-1)%2)throw Error("Must have a default value result.");return K(V,sa,1,sa[0])})}catch(J){throw J;}};Z.when=function(V,ca){try{return I(V,ca,function(J,pa,sa){if(3>sa.length)throw Error("Missing Parameters");if(0===sa.length%
2)throw Error("Must have a default value result.");J=sa[0];if(!1===r.isBoolean(J))throw Error("WHEN needs boolean test conditions");return U(V,sa,0,J)})}catch(J){throw J;}};Z.top=function(V,ca){return I(V,ca,function(J,pa,sa){r.pcCheck(sa,2,2);if(r.isArray(sa[0]))return r.toNumber(sa[1])>=sa[0].length?sa[0].slice(0):sa[0].slice(0,r.toNumber(sa[1]));if(r.isImmutableArray(sa[0]))return r.toNumber(sa[1])>=sa[0].length()?sa[0].slice(0):sa[0].slice(0,r.toNumber(sa[1]));throw Error("Top cannot accept this parameter type");
})};Z.first=function(V,ca){return I(V,ca,function(J,pa,sa){r.pcCheck(sa,1,1);return r.isArray(sa[0])?0===sa[0].length?null:sa[0][0]:r.isImmutableArray(sa[0])?0===sa[0].length()?null:sa[0].get(0):null})};Z.sort=function(V,ca){return I(V,ca,function(J,pa,sa){r.pcCheck(sa,1,2);pa=sa[0];r.isImmutableArray(pa)&&(pa=pa.toArray());if(!1===r.isArray(pa))throw Error("Illegal Argument");if(1<sa.length){if(!1===r.isFunctionParameter(sa[1]))throw Error("Illegal Argument");var oa=function(ya,wa){return N.callfunc(sa[1],
[ya,wa],J)};return V.isAsync?fa(pa,oa):pa=da(pa,function(ya,wa){return oa(ya,wa)})}if(0===pa.length)return[];for(var Oa={},Sa=0;Sa<pa.length;Sa++){var va=Q(pa[Sa]);""!==va&&(Oa[va]=!0)}if(!0===Oa.Array||!0===Oa.Dictionary||!0===Oa.Feature||!0===Oa.Point||!0===Oa.Polygon||!0===Oa.Polyline||!0===Oa.Multipoint||!0===Oa.Extent||!0===Oa.Function)return pa.slice(0);Sa=0;va="";for(var Da in Oa)Sa++,va=Da;return pa=1<Sa||"String"===va?da(pa,function(ya,wa){if(null===ya||void 0===ya||ya===r.voidOperation)return null===
wa||void 0===wa||wa===r.voidOperation?0:1;if(null===wa||void 0===wa||wa===r.voidOperation)return-1;var Aa=r.toString(ya),Ea=r.toString(wa);return Aa<Ea?-1:Aa===Ea?0:1}):"Number"===va?da(pa,function(ya,wa){return ya-wa}):"Boolean"===va?da(pa,function(ya,wa){return ya===wa?0:wa?-1:1}):"Date"===va?da(pa,function(ya,wa){return wa-ya}):pa.slice(0)})};var ka={},qa;for(qa in Z)ka[qa]=new r.NativeFunction(Z[qa]);B.registerFunctions(Z,I);for(qa in Z)Z[qa]=new r.NativeFunction(Z[qa]);var ha=function(){};ha.prototype=
Z;var ea=function(){};ea.prototype=ka;k.functionHelper={fixSpatialReference:r.fixSpatialReference,parseArguments:function(V,ca){for(var J=[],pa=0;pa<ca.arguments.length;pa++)J.push(M(V,ca.arguments[pa]));return J},standardFunction:I};k.extend=ua;ua([v],"sync");ua([v],"async");k.executeScript=function(V,ca){return V(ca)};k.extractFieldLiterals=function(V,ca){void 0===ca&&(ca=!1);return q.findFieldLiterals(V)};k.extractExpectedFieldLiterals=function(V){return q.findExpectedFieldLiterals(V)};k.validateScript=
function(V,ca){return q.validateScript(V,ca,"sync")};k.referencesMember=function(V,ca){return q.referencesMember(V,ca)};k.referencesFunction=function(V,ca){return q.referencesFunction(V,ca)};var na=0,N={error:function(V,ca,J){throw Error(q.nodeErrorMessage(V,ca,J));},__awaiter:function(V,ca,J,pa){return new Promise(function(sa,oa){function Oa(Da){try{va(pa.next(Da))}catch(ya){oa(ya)}}function Sa(Da){try{va(pa["throw"](Da))}catch(ya){oa(ya)}}function va(Da){Da.done?sa(Da.value):Da.value&&Da.value.then?
Da.value.then(Oa,Sa):(na++,0===na%100?setTimeout(function(){na=0;Oa(Da.value)},0):Oa(Da.value))}va((pa=pa.apply(V,ca||[])).next())})},functionDepthchecker:function(V,ca){return function(){ca.depthCounter++;ca.localStack.push([]);if(64<ca.depthCounter)throw Error("Exceeded maximum function depth");var J=V.apply(this,arguments);if(m.isPromiseLike(J))return J.then(function(pa){ca.depthCounter--;--ca.localStack.length;return pa});ca.depthCounter--;--ca.localStack.length;return J}},castString:function(V){return r.toString(V)},
aCheck:function(V,ca){if(r.isFunctionParameter(V))throw Error(q.nodeErrorMessage({type:ca},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return V===r.voidOperation?null:V},Dictionary:e,Feature:l,dictionary:function(V){for(var ca={},J=0;J<V.length;J+=2){if(r.isFunctionParameter(V[J+1]))throw Error("Illegal Argument");if(!1===r.isString(V[J]))throw Error("Illegal Argument");ca[V[J].toString()]=V[J+1]===r.voidOperation?null:V[J+1]}V=new e(ca);V.immutable=!1;return V},strCheck:function(V){if(!1===r.isString(V))throw Error("Illegal Argument");
return V},unary:function(V,ca){if(r.isBoolean(V)){if("!"===ca)return!V;if("-"===ca)return-1*r.toNumber(V);if("+"===ca)return 1*r.toNumber(V);if("~"===ca)return~r.toNumber(V);throw Error(q.nodeErrorMessage({type:"UnaryExpression",operator:ca,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===ca)return-1*r.toNumber(V);if("+"===ca)return 1*r.toNumber(V);if("~"===ca)return~r.toNumber(V);throw Error(q.nodeErrorMessage({type:"UnaryExpression",operator:ca,prefix:null,argument:null},
"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(V){if(!1===r.isBoolean(V))throw Error(q.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return V},logical:function(V,ca,J){if(r.isBoolean(V)&&r.isBoolean(ca))switch(J){case "||":return V||ca;case "\x26\x26":return V&&ca}throw Error(q.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(V,ca,J){switch(J){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return r.binaryOperator(r.toNumber(V),
r.toNumber(ca),J);case "\x3d\x3d":return r.equalityTest(V,ca);case "\x3d":return r.equalityTest(V,ca);case "!\x3d":return!r.equalityTest(V,ca);case "\x3c":return r.greaterThanLessThan(V,ca,J);case "\x3e":return r.greaterThanLessThan(V,ca,J);case "\x3c\x3d":return r.greaterThanLessThan(V,ca,J);case "\x3e\x3d":return r.greaterThanLessThan(V,ca,J);case "+":return r.isString(V)||r.isString(ca)?r.toString(V)+r.toString(ca):r.toNumber(V)+r.toNumber(ca);case "-":return r.toNumber(V)-r.toNumber(ca);case "*":return r.toNumber(V)*
r.toNumber(ca);case "/":return r.toNumber(V)/r.toNumber(ca);case "%":return r.toNumber(V)%r.toNumber(ca);default:throw Error(q.nodeErrorMessage({type:"BinaryExpression",operator:J,left:V,right:ca},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(V,ca,J){switch(ca){case "\x3d":return V===r.voidOperation?null:V;case "/\x3d":return r.toNumber(J)/r.toNumber(V);case "*\x3d":return r.toNumber(J)*r.toNumber(V);case "-\x3d":return r.toNumber(J)-r.toNumber(V);case "+\x3d":return r.isString(J)||r.isString(V)?
r.toString(J)+r.toString(V):r.toNumber(J)+r.toNumber(V);case "%\x3d":return r.toNumber(J)%r.toNumber(V);default:throw Error(q.nodeErrorMessage({type:"AssignmentExpression",operator:ca,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(V,ca,J,pa){var sa=r.toNumber(V[ca]);V[ca]="++"===J?sa+1:sa-1;return!1===pa?sa:"++"===J?sa+1:sa-1},graphicToFeature:function(V,ca){return null===V?null:l.createFromGraphicLikeObject(V.geometry,V.attributes,ca)},memberupdate:function(V,ca,J,pa){if(r.isArray(V))if(r.isNumber(ca)){0>
ca&&(ca=V.length+ca);if(0>ca||ca>=V.length)throw Error("Assignment outside of array bounds");var sa=r.toNumber(V[ca]);V[ca]="++"===J?sa+1:sa-1}else throw Error("Invalid Parameter");else if(V instanceof e){if(!1===r.isString(ca))throw Error("Dictionary accessor must be a string");if(!0===V.hasField(ca))sa=r.toNumber(V.field(ca)),V.setField(ca,"++"===J?sa+1:sa-1);else throw Error("Invalid Parameter");}else if(r.isFeature(V)){if(!1===r.isString(ca))throw Error("Feature accessor must be a string");if(!0===
V.hasField(ca))sa=r.toNumber(V.field(ca)),V.setField(ca,"++"===J?sa+1:sa-1);else throw Error("Invalid Parameter");}else{if(r.isImmutableArray(V))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===pa?sa:"++"===J?sa+1:sa-1},assignmember:function(V,ca,J,pa){if(r.isArray(V))if(r.isNumber(ca)){0>ca&&(ca=V.length+ca);if(0>ca||ca>V.length)throw Error("Assignment outside of array bounds");if(ca===V.length&&"\x3d"!==J)throw Error("Invalid Parameter");V[ca]=this.assign(pa,J,V[ca])}else throw Error("Invalid Parameter");
else if(V instanceof e){if(!1===r.isString(ca))throw Error("Dictionary accessor must be a string");if(!0===V.hasField(ca))V.setField(ca,this.assign(pa,J,V.field(ca)));else{if("\x3d"!==J)throw Error("Invalid Parameter");V.setField(ca,this.assign(pa,J,null))}}else if(r.isFeature(V)){if(!1===r.isString(ca))throw Error("Feature accessor must be a string");if(!0===V.hasField(ca))V.setField(ca,this.assign(pa,J,V.field(ca)));else{if("\x3d"!==J)throw Error("Invalid Parameter");V.setField(ca,this.assign(pa,
J,null))}}else{if(r.isImmutableArray(V))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(V,ca){if(null===V)throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(V instanceof e||r.isFeature(V)){if(r.isString(ca))return V.field(ca);throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(V instanceof w){if(r.isString(ca))return P(V,
ca,"MemberExpression");throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(r.isArray(V)){if(r.isNumber(ca)&&isFinite(ca)&&Math.floor(ca)===ca){0>ca&&(ca=V.length+ca);if(ca>=V.length||0>ca)throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return V[ca]}throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME",
"INVALIDTYPE"));}if(r.isString(V)){if(r.isNumber(ca)&&isFinite(ca)&&Math.floor(ca)===ca){0>ca&&(ca=V.length+ca);if(ca>=V.length||0>ca)throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return V[ca]}throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(r.isImmutableArray(V)&&r.isNumber(ca)&&isFinite(ca)&&Math.floor(ca)===ca){0>ca&&(ca=V.length()+ca);if(ca>=
V.length()||0>ca)throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return V.get(ca)}throw Error(q.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(V,ca,J){return V instanceof r.NativeFunction?V.fn(J,{arguments:ca,preparsed:!0}):V instanceof r.SizzleFunction?V.fn.apply(this,ca):V.apply(this,ca)}};k.compileScript=function(V,ca,J){void 0===ca&&(ca=null);
void 0===J&&(J=!1);null===ca&&(ca={vars:{},customfunctions:{}});ca={isAsync:J,globalScope:ta(ca.vars,J?ka:Z,ca.customfunctions),localScope:null,mangleMap:{},console:xa,lrucache:ca.lrucache,interceptor:ca.interceptor,services:ca.services,symbols:{symbolCounter:0}};V=M(ca,V.body[0].body);""===V&&(V="lc.voidOperation; ");ca={lc:r,lang:N,mangles:ca.mangleMap,postProcess:function(pa){pa instanceof r.ReturnResult&&(pa=pa.value);pa instanceof r.ImplicitResult&&(pa=pa.value);pa===r.voidOperation&&(pa=null);
if(pa===r.breakResult)throw Error("Cannot return BREAK");if(pa===r.continueResult)throw Error("Cannot return CONTINUE");if(r.isFunctionParameter(pa))throw Error("Cannot return FUNCTION");return pa},prepare:function(pa,sa){var oa=pa.spatialReference;if(null===oa||void 0===oa)oa=new F({wkid:102100});var Oa=pa.vars,Sa=pa.customfunctions,va=sa?new ea:new ha;Oa||(Oa={});Sa||(Sa={});var Da=new e({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Da.immutable=!1;
va._SymbolsMap={textformatting:1,infinity:1,pi:1};va.textformatting=Da;va.infinity=Number.POSITIVE_INFINITY;va.pi=Math.PI;for(var ya in Sa)va[ya]=Sa[ya],va._SymbolsMap[ya]=1;for(ya in Oa)va._SymbolsMap[ya]=1,va[ya]=Oa[ya]&&"esri.Graphic"===Oa[ya].declaredClass?l.createFromGraphic(Oa[ya]):Oa[ya];return{localStack:[],isAsync:sa,mangleMap:this.mangles,spatialReference:oa,globalScope:va,abortSignal:void 0===pa.abortSignal||null===pa.abortSignal?{aborted:!1}:pa.abortSignal,localScope:null,services:pa.services,
console:pa.console?pa.console:xa,lrucache:pa.lrucache,interceptor:pa.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",J?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
V+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+V+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(ca)};k.enableAsyncSupport=function(){return new Promise(function(V,ca){D(["./functions/geomasync"],function(J){ua([J],"async");V(!0)},
function(J){ca(J)})})}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(D,k,a,f){return function(g){function p(n){var d=g.call(this)||this;d.immutable=!1;d.setField("url",n);d.immutable=!0;return d}a(p,g);return p}(f)})},"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(D,k,a,f){return function(g){function p(n,d,e,l,h,t){var r=g.call(this)||this;r.attachmentUrl=
h;r.immutable=!1;r.setField("id",n);r.setField("name",d);r.setField("contenttype",e);r.setField("size",l);r.setField("exifinfo",t);r.immutable=!0;return r}a(p,g);return p}(f)})},"esri/arcade/treeAnalysis":function(){define(["require","exports","./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],function(D,k,a,f){function g(w){return"string"===typeof w||w instanceof String}function p(w,A){return"0"!==w.min&&A.length<Number(w.min)||"*"!==w.max&&A.length>Number(w.max)?-2:1}function n(w,
A,C){if(null!==C.localScope&&void 0!==C.localScope[w.toLowerCase()]){var E=C.localScope[w.toLowerCase()];if("FormulaFunction"===E.type||"any"===E.type)return void 0===E.signature&&(E.signature={min:"0",max:"*"}),p(E.signature,A)}return void 0!==C.globalScope[w.toLowerCase()]&&(E=C.globalScope[w.toLowerCase()],"FormulaFunction"===E.type||"any"===E.type)?(void 0===E.signature&&(E.signature={min:"0",max:"*"}),p(E.signature,A)):-1}function d(w,A){if(w)for(var C=0;C<w.length;C++)e(w[C],A)}function e(w,
A){if(w&&!1!==A(w))switch(w.type){case "ArrayExpression":d(w.elements,A);break;case "AssignmentExpression":case "BinaryExpression":e(w.left,A);e(w.right,A);break;case "BlockStatement":d(w.body,A);break;case "CallExpression":e(w.callee,A);d(w.arguments,A);break;case "ExpressionStatement":e(w.expression,A);break;case "ForInStatement":e(w.left,A);e(w.right,A);e(w.body,A);break;case "ForStatement":e(w.init,A);e(w.test,A);e(w.update,A);e(w.body,A);break;case "FunctionDeclaration":e(w.id,A);d(w.params,
A);e(w.body,A);break;case "IfStatement":e(w.test,A);e(w.consequent,A);e(w.alternate,A);break;case "LogicalExpression":e(w.left,A);e(w.right,A);break;case "MemberExpression":e(w.object,A);e(w.property,A);break;case "ObjectExpression":d(w.properties,A);break;case "Program":d(w.body,A);break;case "Property":e(w.key,A);e(w.value,A);break;case "ReturnStatement":e(w.argument,A);break;case "UnaryExpression":e(w.argument,A);break;case "UpdateExpression":e(w.argument,A);break;case "VariableDeclaration":d(w.declarations,
A);break;case "VariableDeclarator":e(w.id,A);e(w.init,A);break;case "TemplateLiteral":d(w.expressions,A),d(w.quasis,A)}}function l(w,A){void 0===A&&(A=!0);var C=x(w,"SYNTAX","UNREOGNISED");try{switch(w.type){case "VariableDeclarator":return"Identifier"!==w.id.type?x(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==w.init?l(w.init,!1):"";case "VariableDeclaration":for(var E=0;E<w.declarations.length;E++)if(C=l(w.declarations[E],A),""!==C)return C;return"";case "ForInStatement":C=l(w.left,A);if(""!==
C)break;if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return x(w,"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return x(w,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return x(w,"SYNTAX","LEFTNOTVAR");C=l(w.right,A);if(""!==C)break;C=l(w.body,A);if(""!==C)break;return"";case "ForStatement":if(null!==w.test&&(C=l(w.test,A),""!==C))break;if(null!==w.init&&(C=l(w.init,A),""!==C))break;if(null!==w.update&&(C=l(w.update,A),""!==C))break;if(null!==
w.body&&(C=l(w.body,A),""!==C))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":C=l(w.test,A);if(""!==C)break;if(null!==w.consequent&&(C=l(w.consequent,!1),""!==C))break;if(null!==w.alternate&&(C=l(w.alternate,!1),""!==C))break;return"";case "BlockStatement":var G=[];for(E=0;E<w.body.length;E++)"EmptyStatement"!==w.body[E].type&&G.push(w.body[E]);w.body=G;for(E=0;E<w.body.length;E++)if(C=l(w.body[E],A),""!==C)return C;
return"";case "FunctionDeclaration":return!1===A?x(w,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==w.id.type?x(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):l(w.body,!1);case "ReturnStatement":return null!==w.argument?l(w.argument,A):"";case "UpdateExpression":return"Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type?x(w,"SYNTAX","ASSIGNMENTTOVARSONLY"):l(w.argument,A);case "AssignmentExpression":if("Identifier"!==w.left.type&&"MemberExpression"!==w.left.type)return x(w,"SYNTAX","ASSIGNMENTTOVARSONLY");
C=l(w.left,A);if(""!==C)break;switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return x(w,"SYNTAX","OPERATORNOTRECOGNISED")}return l(w.right,!1);case "ExpressionStatement":return l(w.expression,!1);case "Identifier":C="";break;case "MemberExpression":C=l(w.object,A);if(""!==C)break;return!0===w.computed?l(w.property,A):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==w.callee.type)return x(w,
"SYNTAX","ONLYNODESSUPPORTED");C="";for(E=0;E<w.arguments.length;E++)if(C=l(w.arguments[E],A),""!==C)return C;return"";case "UnaryExpression":C=l(w.argument,A);break;case "BinaryExpression":C=l(w.left,A);if(""!==C)break;C=l(w.right,A);if(""!==C)break;switch(w.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return x(w,
"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":C=l(w.left,A);if(""!==C)break;C=l(w.right);if(""!==C)break;switch(w.operator){case "\x26\x26":case "||":break;default:return x(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":C="";for(E=0;E<w.elements.length&&(C=l(w.elements[E],A),""===C);E++);break;case "TemplateLiteral":C="";for(E=0;E<w.quasis.length;E++)if(C=l(w.quasis[E],A),""!==C)return C;for(E=0;E<w.expressions.length&&(C=l(w.expressions[E],A),""===C);E++);
break;case "ObjectExpression":C="";for(E=0;E<w.properties.length;E++){C="";if(null!==w.properties[E].key&&("Literal"!==w.properties[E].key.type&&"Identifier"!==w.properties[E].key.type&&(C=x(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[E].key.type)){G=w.properties[E].key;var F="value"in G?G.value:null;"string"===typeof F||F instanceof String||(C=x(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===C&&(C=l(w.properties[E],A));if(""!==C)break}break;case "Property":if("Literal"!==w.key.type&&
"Identifier"!==w.key.type)return x(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&(C=l(w.key,A),""!==C))break;C=l(w.value,A)}return C}catch(I){throw I;}}function h(w,A){var C=x(w,"SYNTAX","UNREOGNISED"),E=null,G="";try{switch(w.type){case "VariableDeclarator":var F=null===w.init?"":h(w.init,A);if(""!==F)return F;"Identifier"===w.id.type&&(null===A.localScope?A.globalScope[w.id.name.toLowerCase()]={type:"any"}:A.localScope[w.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":E=
r(w.id.name.toLowerCase(),w);G=q(w,A);if(""!==G)return G;if(null!==A.localScope)return x(w,"SYNTAX","GLOBALFUNCTIONSONLY");E.isnative=!1;A.globalScope[w.id.name.toLowerCase()]={type:"FormulaFunction",signature:[E]};return"";case "VariableDeclaration":C="";for(var I=0;I<w.declarations.length&&(C=h(w.declarations[I],A),""===C);I++);break;case "IfStatement":C=h(w.test,A);if(""!==C)break;if("AssignmentExpression"===w.test.type||"UpdateExpression"===w.test.type)return x(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
if(null!==w.consequent&&(C=h(w.consequent,A),""!==C))break;if(null!==w.alternate&&(C=h(w.alternate,A),""!==C))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(I=0;I<w.body.length;I++)if(C=h(w.body[I],A),""!==C)return C;return"";case "ReturnStatement":return null!==w.argument?h(w.argument,A):"";case "ForInStatement":if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return x(w,"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return x(w,"SYNTAX",
"CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return x(w,"SYNTAX","LEFTNOTVAR");C=h(w.left,A);if(""!==C)break;C=h(w.right,A);if(""!==C)break;C=h(w.body,A);if(""!==C)break;return"";case "ForStatement":if(null!==w.init&&(C=h(w.init,A),""!==C))break;if(null!==w.test&&(C=h(w.test,A),""!==C))break;if(null!==w.body&&(C=h(w.body,A),""!==C))break;if(null!==w.update&&(C=h(w.update,A),""!==C))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==
w.argument.type&&"MemberExpression"!==w.argument.type)return x(w,"SYNTAX","ASSIGNMENTTOVARSONLY");var M=!1;if("MemberExpression"===w.argument.type)return h(w.argument,A);null!==A.localScope&&void 0!==A.localScope[w.argument.name.toLowerCase()]&&(M=!0);void 0!==A.globalScope[w.argument.name.toLowerCase()]&&(M=!0);return!1===M?"Identifier "+w.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==w.left.type&&"MemberExpression"!==w.left.type)return x(w,"SYNTAX","ASSIGNMENTTOVARSONLY");
var Y=h(w.right,A);if(""!==Y)return Y;M=!1;if("MemberExpression"===w.left.type)return Y=h(w.left,A),""!==Y?Y:"";null!==A.localScope&&void 0!==A.localScope[w.left.name.toLowerCase()]&&(M=!0);void 0!==A.globalScope[w.left.name.toLowerCase()]&&(M=!0);return!1===M?"Identifier "+w.left.name+" has not been declared.":"";case "ExpressionStatement":return h(w.expression,A);case "Identifier":var R=w.name.toLowerCase();if(null!==A.localScope&&void 0!==A.localScope[R])return"";C=void 0!==A.globalScope[R]?"":
x(w,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":C=h(w.object,A);if(""!==C)break;return!0===w.computed?h(w.property,A):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==w.callee.type)return x(w,"SYNTAX","ONLYNODESSUPPORTED");C="";for(I=0;I<w.arguments.length;I++)if(C=h(w.arguments[I],A),""!==C)return C;var S=n(w.callee.name,w.arguments,A);-1===S&&(C=x(w,"SYNTAX","NOTFOUND"));-2===S&&(C=x(w,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":C=
h(w.argument,A);break;case "BinaryExpression":C=h(w.left,A);if(""!==C)break;C=h(w.right,A);if(""!==C)break;return"";case "LogicalExpression":C=h(w.left,A);if(""!==C)break;if("AssignmentExpression"===w.left.type||"UpdateExpression"===w.left.type)return x(w.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");C=h(w.right,A);if(""!==C)break;return"AssignmentExpression"===w.right.type||"UpdateExpression"===w.right.type?x(w.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":C=
"";for(I=0;I<w.elements.length&&(C=h(w.elements[I],A),""===C);I++);break;case "TemplateLiteral":C="";for(I=0;I<w.quasis.length;I++)if(C=h(w.quasis[I],A),""!==C)return C;for(I=0;I<w.expressions.length&&(C=h(w.expressions[I],A),""===C);I++);break;case "ObjectExpression":C="";for(I=0;I<w.properties.length;I++){C="";if(null!==w.properties[I].key&&("Literal"!==w.properties[I].key.type&&"Identifier"!==w.properties[I].key.type&&(C=x(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[I].key.type)){var O=
w.properties[I].key,L="value"in O?O.value:null;"string"===typeof L||L instanceof String||(C=x(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===C&&(C=h(w.properties[I],A));if(""!==C)break}break;case "Property":if("Literal"!==w.key.type&&"Identifier"!==w.key.type)return x(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&(C=h(w.key,A),""!==C))break;C=h(w.value,A)}return C}catch(P){throw P;}}function t(w,A){var C=!1,E=A.toLowerCase();e(w,function(G){if(C)return!1;"Identifier"===G.type&&G.name&&G.name.toLowerCase()===
E&&(C=!0);return!0});return C}function r(w,A){var C=[];if(void 0!==A.params&&null!==A.params)for(var E=0;E<A.params.length;E++)C.push("any");return{name:w,"return":"any",params:C}}function q(w,A){for(var C={globalScope:A.globalScope,localScope:{}},E=0;E<w.params.length;E++)C.localScope[w.params[E].name.toLowerCase()]={type:"any"};return h(w.body,C)}function v(w,A,C,E){var G={};if(void 0===w||null===w)w={};if(void 0===C||null===C)C={};G.infinity={type:"any"};G.textformatting={type:"any"};G.pi={type:"any"};
for(var F in A)"sync"===E&&void 0!==A[F].min?G[F]={type:"FormulaFunction",signature:{min:A[F].min,max:A[F].max}}:"sync"!==E&&void 0!==A[F].fmin&&(G[F]={type:"FormulaFunction",signature:{min:A[F].fmin,max:A[F].fmax}});for(A=0;A<C.length;A++)F=C[A],G[F.name]={type:"FormulaFunction",signature:F};for(F in w)G[F]=w[F],G[F].type="any";return G}function x(w,A,C){var E="";switch(A){case "SYNTAX":E="Syntax Error: ";break;case "RUNTIME":E="Runtime Error: ";break;default:E="Syntax Error: "}try{switch(w.type){case "IfStatement":switch(C){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":E+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":E+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(C){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":E+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":E+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":E+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(C){case "GLOBALFUNCTIONSONLY":E+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":E+=" Function Definition must have an identifier"}break;case "VariableDeclaration":E+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(C){case "FUNCTIONVARIABLEDECLARATOR":E+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":E+=" Variable Definition must have an identifier"}break;case "Identifier":E+=" Identifier Not Found. ";E+=w.name;break;case "ObjectExpression":switch(C){case "OBJECTPROPERTYMUSTBESTRING":E+=
" Property name must be a string"}break;case "ForStatement":switch(C){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":E+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(C){case "ONLY1VAR":E+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":E+=" Can only declare value for use with IN";break;case "LEFTNOVAR":E+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":E+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":E+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(C){case "PROPERTYNOTFOUND":E+="Cannot find member property. ";E+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "OUTOFBOUNDS":E+="Out of Bounds. ";E+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "NOTFOUND":E+="Cannot call member method on null. ";E+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "INVALIDTYPE":E+="Cannot call member property on object of this type. ",
E+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":""}break;case "Property":switch(C){case "ONLYLITERAL":E+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(C){case "WRONGSIGNATURE":E+="Function signature does not match: ";E+="Identifier"===w.callee.type?w.callee.name:"";break;case "ONLYNODESUPPORTED":E+="Functions must be declared.";E+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTAFUNCTION":E+="Not a Function: ";
E+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTFOUND":E+="Function Not Found: "+("Identifier"===w.callee.type?w.callee.name:"")}break;case "UnaryExpression":switch(C){case "NOTSUPPORTEDUNARYOPERATOR":E+="Operator "+w.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":E+="Unary operator "+w.operator+" cannot be used with this argument."}case "BinaryExpression":switch(C){case "OPERATORNOTRECOGNISED":E+="Binary Operator not recognised "+
w.operator}break;case "LogicalExpression":switch(C){case "ONLYBOOLEAN":E+="Operator "+w.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":E+="Logical Expression "+w.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(C){case "FUNCTIONCONTEXTILLEGAL":E+=" Cannot Put Function inside Array."}break;default:E+="Expression contains unrecognised code structures."}}catch(G){throw G;}return E}function y(w,A,C){return{line:w.loc.start.line,
character:w.loc.start.column,reason:x(w,A,C)}}function B(w,A,C,E){A={globalScope:A.globalScope,localScope:{}};for(var G=0;G<w.params.length;G++)A.localScope[w.params[G].name.toLowerCase()]={type:"any"};z(w.body,A,C,E,!1)}function z(w,A,C,E,G){void 0===G&&(G=!0);if(null===w)throw Error("Unnexpexted Expression Syntax");var F=null;try{switch(w.type){case "VariableDeclarator":"Identifier"!==w.id.type?E.push(y(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(w.id.name.toLowerCase(),null===A.localScope?A.globalScope[w.id.name.toLowerCase()]=
{type:"any"}:A.localScope[w.id.name.toLowerCase()]={type:"any"});null!==w.init&&z(w.init,A,C,E,G);break;case "FunctionDeclaration":!1===G&&E.push(y(w,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==w.id.type&&E.push(y(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));F=r("",w);B(w,A,C,E);null!==A.localScope&&E.push(y(w,"SYNTAX","GLOBALFUNCTIONSONLY"));F.isnative=!1;"Identifier"===w.id.type&&(A.globalScope[w.id.name.toLowerCase()]={type:"FormulaFunction",signature:[F]});break;case "VariableDeclaration":for(var I=
0;I<w.declarations.length;I++)z(w.declarations[I],A,C,E,G);break;case "IfStatement":null!==w.test&&(z(w.test,A,C,E,G),"AssignmentExpression"!==w.test.type&&"UpdateExpression"!==w.test.type||E.push(y(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==w.consequent&&z(w.consequent,A,C,E,G);null!==w.alternate&&z(w.alternate,A,C,E,G);break;case "EmptyStatement":break;case "BlockStatement":if(null!==w.body)for(I=0;I<w.body.length;I++)z(w.body[I],A,C,E,G);break;case "ReturnStatement":null!==
w.argument&&z(w.argument,A,C,E,G);break;case "ForInStatement":"VariableDeclaration"===w.left.type?(1<w.left.declarations.length&&E.push(y(w,"SYNTAX","ONLY1VAR")),null!==w.left.declarations[0].init&&E.push(y(w,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==w.left.type&&E.push(y(w,"SYNTAX","LEFTNOTVAR"));z(w.left,A,C,E,G);z(w.right,A,C,E,G);z(w.body,A,C,E,G);break;case "ForStatement":null!==w.init&&z(w.init,A,C,E,G);null!==w.test&&z(w.test,A,C,E,G);null!==w.body&&z(w.body,A,C,E,G);null!==w.update&&z(w.update,
A,C,E,G);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type)E.push(y(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===w.argument.type){var M=!1;!1===C&&(null!==A.localScope&&void 0!==A.localScope[w.argument.name.toLowerCase()]&&(M=!0),void 0!==A.globalScope[w.argument.name.toLowerCase()]&&(M=!0),!1===M&&E.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,
reason:"Identifier "+w.argument.name+" has not been declared."}))}"MemberExpression"===w.argument.type&&z(w.argument,A,C,E,G)}break;case "AssignmentExpression":"Identifier"!==w.left.type&&"MemberExpression"!==w.left.type&&E.push(y(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:E.push(y(w,"SYNTAX","OPERATORNOTRECOGNISED"))}z(w.right,A,C,E,G);M=!1;"Identifier"===w.left.type&&(null!==A.localScope&&void 0!==
A.localScope[w.left.name.toLowerCase()]&&(M=!0),void 0!==A.globalScope[w.left.name.toLowerCase()]&&(M=!0),!1===C&&!1===M&&E.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Identifier "+w.left.name+" has not been declared."}));"MemberExpression"===w.left.type&&z(w.left,A,C,E,G);break;case "ExpressionStatement":z(w.expression,A,C,E,G);break;case "Identifier":var Y=w.name.toLowerCase();if(null!==A.localScope&&void 0!==A.localScope[Y]||void 0!==A.globalScope[Y])break;
!1===C&&E.push(y(w,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":z(w.object,A,C,E,G);!0===w.computed&&z(w.property,A,C,E,G);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==w.callee.type&&E.push(y(w,"SYNTAX","ONLYNODESSUPPORTED"));for(I=0;I<w.arguments.length;I++)z(w.arguments[I],A,C,E,G);if("Identifier"===w.callee.type){var R=n(w.callee.name,w.arguments,A);!1===C&&-1===R&&E.push(y(w,"SYNTAX","NOTFOUND"));-2===R&&E.push(y(w,"SYNTAX","WRONGSIGNATURE"))}break;
case "UnaryExpression":z(w.argument,A,C,E,G);break;case "BinaryExpression":z(w.left,A,C,E,G);z(w.right,A,C,E,G);switch(w.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:E.push(y(w,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(w.operator){case "\x26\x26":case "||":break;default:E.push(y(w,
"SYNTAX","OPERATORNOTRECOGNISED"))}z(w.left,A,C,E,G);"AssignmentExpression"!==w.left.type&&"UpdateExpression"!==w.left.type||E.push(y(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));z(w.right,A,C,E,G);"AssignmentExpression"!==w.right.type&&"UpdateExpression"!==w.right.type||E.push(y(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(I=0;I<w.elements.length;I++)z(w.elements[I],A,C,E,G);break;case "TemplateLiteral":for(I=0;I<w.quasis.length;I++)z(w.quasis[I],A,C,E,
G);for(I=0;I<w.expressions.length;I++)z(w.expressions[I],A,C,E,G);break;case "ObjectExpression":for(I=0;I<w.properties.length;I++)z(w.properties[I],A,C,E,G);break;case "Property":"Literal"!==w.key.type&&"Identifier"!==w.key.type&&E.push(y(w,"SYNTAX","ONLYLITERAL"));"Literal"===w.key.type&&z(w.key,A,C,E,G);z(w.value,A,C,E,G);break;default:E.push(y(w,"SYNTAX","UNRECOGNISED"))}}catch(S){E.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Unnexpected Syntax"})}}function b(w){var A=
[];e(w,function(C){"CallExpression"===C.type&&"Identifier"===C.callee.type&&A.push(C.callee.name.toLowerCase());return!0});return A}Object.defineProperty(k,"__esModule",{value:!0});k.scriptUsesFeatureSet=k.findScriptDependencies=k.findFunctionCalls=k.checkScript=k.extractAllIssues=k.extractAllIssuesInFunction=k.makeError=k.nodeErrorMessage=k.validateLanguage=k.validateScript=k.constructGlobalScope=k.validateFunction=k.extractFunctionDeclaration=k.findExpectedFieldLiterals=k.findFieldLiterals=k.referencesFunction=
k.referencesMember=k.testValidityOfExpression=k.validateLanguageNode=k.walk=k.findFunction=k.checkFunctionSignature=k.addFunctionDeclaration=k.functionDecls=void 0;k.functionDecls={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",
max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},
split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",
max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},
multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",
max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},
haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},
length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},
portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var c in k.functionDecls)k.functionDecls[c].fmin=k.functionDecls[c].min,k.functionDecls[c].fmax=k.functionDecls[c].max;var m="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),
u="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");k.addFunctionDeclaration=function(w,A){var C=k.functionDecls[w.name.toLowerCase()];void 0===C?"sync"===A?k.functionDecls[w.name.toLowerCase()]={min:w.min,max:w.max}:k.functionDecls[w.name.toLowerCase()]=
{fmin:w.min,fmax:w.max}:"sync"===A?(C.min=w.min,C.max=w.max):(C.fmin=w.min,C.fmax=w.max)};k.checkFunctionSignature=p;k.findFunction=n;k.walk=e;k.validateLanguageNode=l;k.testValidityOfExpression=h;k.referencesMember=t;k.referencesFunction=function(w,A){var C=!1,E=A.toLowerCase();e(w,function(G){return C?!1:"CallExpression"===G.type&&"Identifier"===G.callee.type&&G.callee.name&&G.callee.name.toLowerCase()===E?(C=!0,!1):!0});return C};k.findFieldLiterals=function(w){var A=[];e(w,function(C){if("MemberExpression"!==
C.type||"Identifier"!==C.object.type)return!0;!1===C.computed&&C.object&&C.object.name&&C.property&&"Identifier"===C.property.type&&C.property.name?A.push(C.object.name.toLowerCase()+"."+C.property.name.toLowerCase()):C.object&&C.object.name&&C.property&&"Literal"===C.property.type&&"string"===typeof C.property.value&&A.push(C.object.name.toLowerCase()+"."+C.property.value.toString().toLowerCase());return!1});return A};k.findExpectedFieldLiterals=function(w){var A=[];e(w,function(C){if("CallExpression"===
C.type){if("Identifier"===C.callee.type&&"expects"===C.callee.name.toLowerCase()){for(var E="",G=0;G<(C.arguments||[]).length;G++)0===G?"Identifier"===C.arguments[G].type&&(E=C.arguments[G].name.toLowerCase()):E&&"Literal"===C.arguments[G].type&&g(C.arguments[G].value)&&A.push(E+"."+C.arguments[G].value.toLowerCase());return!1}if("Identifier"===C.callee.type&&["domainname","domaincode","domain","haskey"].includes(C.callee.name.toLowerCase())&&2<=C.arguments.length)return E="","Identifier"===C.arguments[0].type&&
(E=C.arguments[0].name.toLowerCase()),E&&"Literal"===C.arguments[1].type&&g(C.arguments[1].value)&&A.push(E+"."+C.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==C.type||"Identifier"!==C.object.type)return!0;!1===C.computed&&C.object&&C.object.name&&C.property&&"Identifier"===C.property.type&&C.property.name?A.push(C.object.name.toLowerCase()+"."+C.property.name.toLowerCase()):C.object&&C.object.name&&C.property&&"Literal"===C.property.type&&"string"===typeof C.property.value&&A.push(C.object.name.toLowerCase()+
"."+C.property.value.toString().toLowerCase());return!1});return A};k.extractFunctionDeclaration=r;k.validateFunction=q;k.constructGlobalScope=v;k.validateScript=function(w,A,C,E){void 0===C&&(C="async");void 0===E&&(E=k.functionDecls);A={globalScope:v(A.vars,E,A.customFunctions,C),localScope:null};return h(w.body[0].body,A)};k.validateLanguage=function(w){return"BlockStatement"!==w.body[0].body.type?"Invalid formula content.":l(w.body[0].body)};k.nodeErrorMessage=x;k.makeError=y;k.extractAllIssuesInFunction=
B;k.extractAllIssues=z;k.checkScript=function(w,A,C,E,G){void 0===E&&(E="async");void 0===G&&(G=k.functionDecls);var F=[];if("BlockStatement"!==w.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===A||void 0===A)A={vars:{},customFunctions:[]};A={globalScope:v(A.vars,G,A.customFunctions,E),localScope:null};try{z(w.body[0].body,A,C,F)}catch(I){}return F};k.findFunctionCalls=b;k.findScriptDependencies=function(w,A){void 0===A&&(A=[]);var C=null;if(void 0===w.usesFeatureSet){null===
C&&(C=b(w));w.usesFeatureSet=!1;for(var E=0;E<C.length;E++)m.includes(C[E])&&(w.usesFeatureSet=!0,w.isAsync=!0);if(!1===w.usesFeatureSet&&A&&0<A.length){E=0;for(var G=A;E<G.length;E++)if(t(w,G[E])){w.usesFeatureSet=!0;w.isAsync=!0;break}}}if(void 0===w.usesGeometry)for(w.usesGeometry=!1,null===C&&(C=b(w)),E=0;E<C.length;E++)u.includes(C[E])&&(w.usesGeometry=!0)};k.scriptUsesFeatureSet=function(w){w=b(w);for(var A=0;A<w.length;A++)if(m.includes(w[A]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../FunctionWrapper ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l){Object.defineProperty(k,"__esModule",{value:!0});k.registerFunctions=void 0;k.registerFunctions=function(h){function t(q,v){if(v instanceof n)return h.arcadeCustomFunctionHandler(v);if(v instanceof e.NativeFunction)return function(){for(var x=[],y=0;y<arguments.length;y++)x[y]=arguments[y];return v.fn(q,{preparsed:!0,arguments:x})};if(v instanceof e.SizzleFunction)return function(){for(var x=[],y=0;y<arguments.length;y++)x[y]=arguments[y];if(x.length!==v.paramCount)throw Error("Invalid parameters");
return v.fn.apply(v,x)};throw Error("Invalid Parameter");}function r(q){if(q instanceof d)return q.toArray();if(e.isArray(q))return q;throw Error("Invalid Parameter");}h.functions.array=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,1,2);x=e.toNumber(B[0]);if(isNaN(x)||!1===e.isInteger(x))throw Error("Invalid Parameter");B=e.defaultUndefined(B[1],null);x=Array(x);x.fill(B);return x})};h.functions.front=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,
1,1);if(e.isImmutableArray(B[0])){if(0>=B[0].length())throw Error("Array is empty");return B[0].get(0)}if(e.isArray(B[0])){if(0>=B[0].length)throw Error("Array is empty");return B[0][0]}throw Error("Invalid Parameter");})};h.functions.back=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,1,1);if(e.isImmutableArray(B[0])){if(0>=B[0].length())throw Error("Array is empty");return B[0].get(B[0].length()-1)}if(e.isArray(B[0])){if(0>=B[0].length)throw Error("Array is empty");return B[0][B[0].length-
1]}throw Error("Invalid Parameter");})};h.functions.push=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,1,2);if(e.isArray(B[0]))return B[0][B[0].length]=B[1],B[0].length;throw Error("Invalid Parameter");})};h.functions.pop=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,1,1);if(e.isArray(B[0])){if(0>=B[0].length)throw Error("Array is empty");x=B[0][B[0].length-1];--B[0].length;return x}throw Error("Invalid Parameter");})};h.functions.erase=function(q,
v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,2);if(e.isArray(B[0])){x=e.toNumber(B[1]);if(isNaN(x)||!1===e.isInteger(x))throw Error("Invalid Parameter");B=B[0];if(0>=B.length)throw Error("Array is empty");0>x&&(x=B.length+x);if(0>x)throw Error("Element not found");if(x>=B.length)throw Error("Index is greater than array");B.splice(x,1);return e.voidOperation}throw Error("Invalid Parameter");})};h.functions.insert=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,
3,3);if(e.isArray(B[0])){x=e.toNumber(B[1]);if(isNaN(x)||!1===e.isInteger(x))throw Error("Invalid Parameter");y=B[2];B=B[0];if(x>B.length)throw Error("Index is greater than array");if(0>x&&x<-1*B.length)throw Error("Index is greater than array");if(x===B.length)return B[x]=y,e.voidOperation;B.splice(x,0,y);return e.voidOperation}throw Error("Invalid Parameter");})};h.functions.resize=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,3);if(e.isArray(B[0])){y=e.toNumber(B[1]);
if(isNaN(y)||!1===e.isInteger(y))throw Error("Invalid Parameter");if(0>y)throw Error("Size cannot be negative");x=e.defaultUndefined(B[2],null);B=B[0];if(B.length>=y)return B.length=y,e.voidOperation;var z=B.length;B.length=y;for(y=z;y<B.length;y++)B[y]=x;return e.voidOperation}throw Error("Invalid Parameter");})};h.functions.includes=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,2);if(e.isArray(B[0])){var z=B[1];x=B[0];return-1<x.findIndex(function(c){return e.equalityTest(c,
z)})?!0:!1}if(e.isImmutableArray(B[0])){var b=B[1];x=B[0].toArray();return-1<x.findIndex(function(c){return e.equalityTest(c,b)})?!0:!1}throw Error("Invalid Parameter");})};h.functions.slice=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,1,3);if(e.isArray(B[0])){x=e.toNumber(e.defaultUndefined(B[1],0));y=e.toNumber(e.defaultUndefined(B[2],B[0].length));if(isNaN(x)||!1===e.isInteger(x))throw Error("Invalid Parameter");if(isNaN(y)||!1===e.isInteger(y))throw Error("Invalid Parameter");
var z=B[0];return z.slice(x,y)}if(e.isImmutableArray(B[0])){z=B[0];x=e.toNumber(e.defaultUndefined(B[1],0));y=e.toNumber(e.defaultUndefined(B[2],z.length()));if(isNaN(x)||!1===e.isInteger(x))throw Error("Invalid Parameter");if(isNaN(y)||!1===e.isInteger(y))throw Error("Invalid Parameter");return z.toArray().slice(x,y)}throw Error("Invalid Parameter");})};h.functions.splice=function(q,v){return h.standardFunction(q,v,function(x,y,B){x=[];for(y=0;y<B.length;y++)e.isArray(B[y])?x.push.apply(x,B[y]):
e.isImmutableArray(B[y])?x.push.apply(x,B[y].toArray()):x.push(B[y]);return x})};"sync"===h.mode&&(h.functions.any=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,2);x=t(q,B[1]);y=0;for(B=r(B[0]);y<B.length;y++){var z=x(B[y]);if(e.isBoolean(z)&&!0===z)return!0}return!1})},h.functions.all=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,2);x=t(q,B[1]);y=0;for(B=r(B[0]);y<B.length;y++)if(!0!==x(B[y]))return!1;return!0})},h.functions.none=function(q,
v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,2);x=t(q,B[1]);y=0;for(B=r(B[0]);y<B.length;y++)if(!0===x(B[y]))return!1;return!0})},h.functions.reduce=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,3);var z=t(q,B[1]);x=r(B[0]);return 2===B.length?0===x.length?null:x.reduce(function(b,c){var m=z(b,c);return b=void 0!==m&&m!==e.voidOperation?m:null}):x.reduce(function(b,c){var m=z(b,c);return b=void 0!==m&&m!==e.voidOperation?m:null},B[2])})},h.functions.map=
function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,2);x=t(q,B[1]);y=[];var z=0;for(B=r(B[0]);z<B.length;z++){var b=x(B[z]);void 0!==b&&b!==e.voidOperation?y.push(b):y.push(null)}return y})},h.functions.filter=function(q,v){return h.standardFunction(q,v,function(x,y,B){e.pcCheck(B,2,2);x=t(q,B[1]);y=[];var z=0;for(B=r(B[0]);z<B.length;z++){var b=B[z];!0===x(b)&&y.push(b)}return y})});"async"===h.mode&&(h.functions.any=function(q,v){return h.standardFunctionAsync(q,v,function(x,
y,B){return a(this,void 0,void 0,function(){var z,b,c,m,u,w,A;return f(this,function(C){switch(C.label){case 0:e.pcCheck(B,2,2),z=t(q,B[1]),b=r(B[0]),c=0,m=b,C.label=1;case 1:if(!(c<m.length))return[3,7];u=m[c];return[4,z(u)];case 2:return w=C.sent(),A=null,l.isPromiseLike(A)?[4,w]:[3,4];case 3:return A=C.sent(),[3,5];case 4:A=w,C.label=5;case 5:if(e.isBoolean(A)&&!0===A)return[2,!0];C.label=6;case 6:return c++,[3,1];case 7:return[2,!1]}})})})},h.functions.all=function(q,v){return h.standardFunctionAsync(q,
v,function(x,y,B){return a(this,void 0,void 0,function(){var z,b,c,m,u,w,A;return f(this,function(C){switch(C.label){case 0:e.pcCheck(B,2,2),z=t(q,B[1]),b=r(B[0]),c=0,m=b,C.label=1;case 1:if(!(c<m.length))return[3,7];u=m[c];return[4,z(u)];case 2:return w=C.sent(),A=null,l.isPromiseLike(A)?[4,w]:[3,4];case 3:return A=C.sent(),[3,5];case 4:A=w,C.label=5;case 5:if(!0!==A)return[2,!1];C.label=6;case 6:return c++,[3,1];case 7:return[2,!0]}})})})},h.functions.none=function(q,v){return h.standardFunctionAsync(q,
v,function(x,y,B){return a(this,void 0,void 0,function(){var z,b,c,m,u,w,A;return f(this,function(C){switch(C.label){case 0:e.pcCheck(B,2,2),z=t(q,B[1]),b=r(B[0]),c=0,m=b,C.label=1;case 1:if(!(c<m.length))return[3,7];u=m[c];return[4,z(u)];case 2:return w=C.sent(),A=null,l.isPromiseLike(A)?[4,w]:[3,4];case 3:return A=C.sent(),[3,5];case 4:A=w,C.label=5;case 5:if(!0===A)return[2,!1];C.label=6;case 6:return c++,[3,1];case 7:return[2,!0]}})})})},h.functions.filter=function(q,v){return h.standardFunctionAsync(q,
v,function(x,y,B){return a(this,void 0,void 0,function(){var z,b,c,m,u,w,A,C;return f(this,function(E){switch(E.label){case 0:e.pcCheck(B,2,2),z=t(q,B[1]),b=r(B[0]),c=[],m=0,u=b,E.label=1;case 1:if(!(m<u.length))return[3,7];w=u[m];return[4,z(w)];case 2:return A=E.sent(),C=null,l.isPromiseLike(C)?[4,A]:[3,4];case 3:return C=E.sent(),[3,5];case 4:C=A,E.label=5;case 5:!0===C&&c.push(w),E.label=6;case 6:return m++,[3,1];case 7:return[2,c]}})})})},h.functions.reduce=function(q,v){return h.standardFunctionAsync(q,
v,function(x,y,B){var z=this;e.pcCheck(B,2,3);var b=t(q,B[1]);x=r(B[0]);y=null;if(2<B.length)B=e.defaultUndefined(B[2],null),y=x.reduce(function(c,m){return a(z,void 0,void 0,function(){var u;return f(this,function(w){switch(w.label){case 0:return[4,c];case 1:u=w.sent();if(void 0===u||u===e.voidOperation)u=null;return[2,b(u,m)]}})})},Promise.resolve(B));else{if(0===x.length)return null;y=x.reduce(function(c,m,u){return a(z,void 0,void 0,function(){var w;return f(this,function(A){switch(A.label){case 0:return 1>=
u?[2,b(c,m)]:[4,c];case 1:w=A.sent();if(void 0===w||w===e.voidOperation)w=null;return[2,b(w,m)]}})})})}return y.then(function(c){return void 0!==c&&c!==e.voidOperation?c:null})})},h.functions.map=function(q,v){return h.standardFunctionAsync(q,v,function(x,y,B){return a(this,void 0,void 0,function(){var z,b,c,m,u,w,A,C;return f(this,function(E){switch(E.label){case 0:e.pcCheck(B,2,2),z=t(q,B[1]),b=r(B[0]),c=[],m=0,u=b,E.label=1;case 1:if(!(m<u.length))return[3,7];w=u[m];return[4,z(w)];case 2:return A=
E.sent(),C=null,l.isPromiseLike(C)?[4,A]:[3,4];case 3:return C=E.sent(),[3,5];case 4:C=A,E.label=5;case 5:void 0!==C&&C!==e.voidOperation?c.push(C):c.push(null),E.label=6;case 6:return m++,[3,1];case 7:return[2,c]}})})})})}})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(D,k,a,f){function g(e,l){var h=new a(l);e(function(t){return d(t).then(h.resolve)},h.reject);return h.promise}function p(e){if(e){if("function"!==typeof e.forEach){var l=
Object.keys(e),h=l.map(function(r){return e[r]});return p(h).then(function(r){var q={};l.forEach(function(v,x){return q[v]=r[x]});return q})}var t=null;return g(function(r,q){var v=[],x=e.length;0===x&&r(v);e.forEach(function(y){var B={promise:y};v.push(B);y.then(function(z){B.value=z})["catch"](function(z){B.error=z}).then(function(){--x;0===x&&(t?q(Error("AbortError")):r(v))})})},function(r){t=r||"Invocation cancellation";e.forEach(function(q){return q.cancel(r)})})}}function n(e){void 0===e&&(e=
void 0);var l=new a;l.resolve(e);return l.promise}function d(e){return e&&"function"===typeof e.then?e:n(e)}Object.defineProperty(k,"__esModule",{value:!0});k.createResolver=k.when=k.isPromiseLike=k.wrapCallback=k.timeout=k.after=k.resolve=k.reject=k.first=k.eachAlwaysValues=k.eachAlways=k.createDeferred=k.create=k.filter=k.all=void 0;k.all=function(e){return f(e)};k.filter=function(e,l){var h=e.slice();return f(e.map(function(t,r){return l(t,r)})).then(function(t){return h.filter(function(r,q){return t[q]})})};
k.create=g;k.createDeferred=function(e){var l=null;e=g(function(h,t){l={resolve:h,reject:t}},e);l.promise=e;l.cancel=function(){l.reject(Error("AbortError"))};return l};k.eachAlways=p;k.eachAlwaysValues=function(e){return p(e).then(function(l){return l.filter(function(h){return!!h.value}).map(function(h){return h.value})})};k.first=function(e){return e&&e.length?g(function(l,h){for(var t=0;t<e.length;t++)e[t].then(l,h)}):n()};k.reject=function(e){var l=new a;l.reject(e);return l.promise};k.resolve=
n;k.after=function(e,l){void 0===l&&(l=void 0);var h=0;return g(function(t){h=setTimeout(function(){t(l)},e)},function(){h&&(clearTimeout(h),h=0)})};k.timeout=function(e,l,h){var t=0,r=new a(e.cancel);e.then(function(q){r.isFulfilled()||(r.resolve(q),t&&(clearTimeout(t),t=0))});e["catch"](function(q){r.isFulfilled()||(r.reject(q),t&&(clearTimeout(t),t=0))});t=setTimeout(function(){r.reject(h||Error("promiseUtils:timeout"))},l);return r.promise};k.wrapCallback=function(e){var l=!1;return g(function(){e(function(h){l||
n(h)})},function(){return l=!0})};k.isPromiseLike=function(e){return e&&"function"===typeof e.then};k.when=d;k.createResolver=function(e){var l,h;e=g(function(r,q){l=r;h=q},e);var t=function(r){l(r)};t.resolve=function(r){return l(r)};t.reject=function(r){return h(r)};t.promise=e;return t}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(D,k,a,f,g){function p(h){h=new Date(h.getTime());var t=h.getFullYear(),
r=new Date(0);r.setFullYear(t+1,0,4);r.setHours(0,0,0,0);r=n(r);var q=new Date(0);q.setFullYear(t,0,4);q.setHours(0,0,0,0);q=n(q);return h.getTime()>=r.getTime()?t+1:h.getTime()>=q.getTime()?t:t-1}function n(h){h=new Date(h.getTime());var t=h.getDay();t=(1>t?7:0)+t-1;h.setDate(h.getDate()-t);h.setHours(0,0,0,0);return h}function d(h){return null===h?h:isNaN(h.getTime())?null:h}Object.defineProperty(k,"__esModule",{value:!0});k.registerFunctions=void 0;var e=[0,31,59,90,120,151,181,212,243,273,304,
334],l=[0,31,60,91,121,152,182,213,244,274,305,335];k.registerFunctions=function(h,t){h.today=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,0,0);v=new Date;v.setHours(0,0,0,0);return v})};h.now=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,0,0);return new Date})};h.timestamp=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,0,0);v=new Date;return v=new Date(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds())})};
h.toutc=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?null:new Date(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds())})};h.tolocal=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?null:f.DateTime.utc(v.getFullYear(),v.getMonth()+1,v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()).toJSDate()})};h.day=function(r,
q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getDate()})};h.month=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getMonth()})};h.year=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getFullYear()})};h.hour=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getHours()})};h.second=function(r,q){return t(r,q,
function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getSeconds()})};h.millisecond=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getMilliseconds()})};h.minute=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getMinutes()})};h.week=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,2);v=a.toDate(y[0]);if(null===v)return NaN;y=a.toNumber(a.defaultUndefined(y[1],0));if(0>y||
6<y)throw Error("Invalid Parameter");x=v.getDate();var B=v.getMonth(),z=v.getFullYear();v=v.getDay();x=x+(0!==z%4||0===z%100&&0!==z%400?e:l)[B]-1;B=Math.floor(x/7);return v-y+(0>v-y?7:0)<x-7*B?B+1:B})};h.weekday=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getDay()})};h.isoweekday=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);if(null===v)return NaN;v=v.getDay();0===v&&(v=7);return v})};h.isomonth=function(r,q){return t(r,
q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:v.getMonth()+1})};h.isoweek=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);x=a.toDate(y[0]);if(null===x)return NaN;v=n(x).getTime();x=p(x);y=new Date(0);y.setFullYear(x,0,4);y.setHours(0,0,0,0);x=n(y);v-=x.getTime();return Math.round(v/6048E5)+1})};h.isoyear=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,1,1);v=a.toDate(y[0]);return null===v?NaN:p(v)})};h.date=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,
0,7);if(3===y.length)return d(new Date(a.toNumber(y[0]),a.toNumber(y[1]),a.toNumber(y[2]),0,0,0,0));if(4===y.length)return d(new Date(a.toNumber(y[0]),a.toNumber(y[1]),a.toNumber(y[2]),a.toNumber(y[3]),0,0,0));if(5===y.length)return d(new Date(a.toNumber(y[0]),a.toNumber(y[1]),a.toNumber(y[2]),a.toNumber(y[3]),a.toNumber(y[4]),0,0));if(6===y.length)return d(new Date(a.toNumber(y[0]),a.toNumber(y[1]),a.toNumber(y[2]),a.toNumber(y[3]),a.toNumber(y[4]),a.toNumber(y[5]),0));if(7===y.length)return d(new Date(a.toNumber(y[0]),
a.toNumber(y[1]),a.toNumber(y[2]),a.toNumber(y[3]),a.toNumber(y[4]),a.toNumber(y[5]),a.toNumber(y[6])));if(2===y.length){v=a.toString(y[1]);if(""===v)return null;v=a.standardiseDateFormat(v);x=void 0;x="X"===v?f.DateTime.fromSeconds(a.toNumber(y[0])):"x"===v?f.DateTime.fromMillis(a.toNumber(y[0])):f.DateTime.fromFormat(a.toString(y[0]),v,{locale:g.locale,numberingSystem:"latn"});return x.isValid?x.toJSDate():null}if(1===y.length){if(a.isString(y[0])){if(""===y[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(y[0]))return a.toDate(y[0]+"-01-01")}v=a.toNumber(y[0]);return!1===isNaN(v)?d(new Date(v)):a.toDate(y[0])}if(0===y.length)return new Date})};h.datediff=function(r,q){return t(r,q,function(v,x,y){a.pcCheck(y,2,3);v=a.toDateTime(y[0]);x=a.toDateTime(y[1]);if(null===v||null===x)return NaN;switch(a.toString(y[2]).toLowerCase()){case "days":case "day":case "d":return v.diff(x,"days").days;case "months":case "month":return v.diff(x,"months").months;
case "minutes":case "minute":case "m":return"M"===y[2]?v.diff(x,"months").months:v.diff(x,"minutes").minutes;case "seconds":case "second":case "s":return v.diff(x,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return v.diff(x).milliseconds;case "hours":case "hour":case "h":return v.diff(x,"hours").hours;case "years":case "year":case "y":return v.diff(x,"years").years;default:return v.diff(x).milliseconds}})};h.dateadd=function(r,q){return t(r,q,function(v,x,y){var B;a.pcCheck(y,
2,3);v=a.toDateTime(y[0]);if(null===v)return null;x=a.toNumber(y[1]);if(isNaN(x))return v.toJSDate();var z="milliseconds";switch(a.toString(y[2]).toLowerCase()){case "days":case "day":case "d":z="days";x=a.absRound(x);break;case "months":case "month":z="months";x=a.absRound(x);break;case "minutes":case "minute":case "m":z="M"===y[2]?"months":"minutes";break;case "seconds":case "second":case "s":z="seconds";break;case "milliseconds":case "millisecond":case "ms":z="milliseconds";break;case "hours":case "hour":case "h":z=
"hours";break;case "years":case "year":case "y":z="years"}return v.plus((B={},B[z]=x,B)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(D,
k,a,f,g,p,n,d,e,l,h,t,r,q,v,x){function y(B){return B&&"esri.arcade.Feature"===B.arcadeDeclaredClass}Object.defineProperty(k,"__esModule",{value:!0});k.registerFunctions=void 0;k.registerFunctions=function(B,z){B.ringisclockwise=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,1,1);m=[];if(null===w[0])return!1;if(d.isArray(w[0])){var A=0;for(w=w[0];A<w.length;A++)if(u=w[A],u instanceof t)m.push([u.x,u.y]);else throw Error("Invalid Argument");}else if(w[0]instanceof n)m=w[0]._elements;else if(d.isImmutableArray(w[0])){A=
0;for(var C=w[0].toArray();A<C.length;A++)if(u=C[A],u instanceof t)m.push([u.x,u.y]);else throw Error("Invalid Argument");0<m.length&&(w[0].get(0),w[0].get(0))}else throw Error("Invalid Argument");return 3>m.length?!1:(new r({rings:[],spatialReference:{wkid:4326}})).isClockwise(m)})};B.polygon=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,1,1);m=null;if(w[0]instanceof g){if(m=d.fixSpatialReference(p.parseGeometryFromDictionary(w[0]),b.spatialReference),!1===m instanceof r)throw Error("Illegal Parameter");
}else m=w[0]instanceof r?x.fromJson(w[0].toJson()):d.fixSpatialReference(new r(JSON.parse(w[0])),b.spatialReference);if(null!==m&&!1===m.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(m)})};B.polyline=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,1,1);m=null;if(w[0]instanceof g){if(m=d.fixSpatialReference(p.parseGeometryFromDictionary(w[0]),b.spatialReference),
!1===m instanceof q)throw Error("Illegal Parameter");}else m=w[0]instanceof q?x.fromJson(w[0].toJson()):d.fixSpatialReference(new q(JSON.parse(w[0])),b.spatialReference);if(null!==m&&!1===m.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(m)})};B.point=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,1,1);m=null;if(w[0]instanceof g){if(m=d.fixSpatialReference(p.parseGeometryFromDictionary(w[0]),
b.spatialReference),!1===m instanceof t)throw Error("Illegal Parameter");}else m=w[0]instanceof t?x.fromJson(w[0].toJson()):d.fixSpatialReference(new t(JSON.parse(w[0])),b.spatialReference);if(null!==m&&!1===m.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(m)})};B.multipoint=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,1,1);m=null;if(w[0]instanceof g){if(m=
d.fixSpatialReference(p.parseGeometryFromDictionary(w[0]),b.spatialReference),!1===m instanceof h)throw Error("Illegal Parameter");}else m=w[0]instanceof h?x.fromJson(w[0].toJson()):d.fixSpatialReference(new h(JSON.parse(w[0])),b.spatialReference);if(null!==m&&!1===m.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(m)})};B.extent=function(b,c){return z(b,c,function(m,
u,w){w=d.autoCastFeatureToGeometry(w);d.pcCheck(w,1,1);m=null;w[0]instanceof g?m=d.fixSpatialReference(p.parseGeometryFromDictionary(w[0]),b.spatialReference):w[0]instanceof t?(m={xmin:w[0].x,ymin:w[0].y,xmax:w[0].x,ymax:w[0].y,spatialReference:w[0].spatialReference.toJson()},w=w[0],w.hasZ?(m.zmin=w.z,m.zmax=w.z):w.hasM&&(m.mmin=w.m,m.mmax=w.m),m=x.fromJson(m)):m=w[0]instanceof r?x.fromJson(w[0].getExtent().toJson()):w[0]instanceof q?x.fromJson(w[0].getExtent().toJson()):w[0]instanceof h?x.fromJson(w[0].getExtent().toJson()):
w[0]instanceof e?x.fromJson(w[0].toJson()):d.fixSpatialReference(new e(JSON.parse(w[0])),b.spatialReference);if(null!==m&&!1===m.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(m)})};B.geometry=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,1,1);m=null;if(null===w[0])return null;m=y(w[0])?d.fixSpatialReference(w[0].geometry(),b.spatialReference):w[0]instanceof
g?d.fixSpatialReference(p.parseGeometryFromDictionary(w[0]),b.spatialReference):d.fixSpatialReference(x.fromJson(JSON.parse(w[0])),b.spatialReference);if(null!==m&&!1===m.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(m)})};B.setgeometry=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,2,2);if(y(w[0])){if(!0===w[0].immutable)throw Error("Feature is Immutable");
if(w[1]instanceof l||null===w[1])w[0]._geometry=w[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return d.voidOperation})};B.feature=function(b,c){return z(b,c,function(m,u,w){if(0===w.length)throw Error("Missing Parameters");m=null;if(1===w.length)if(d.isString(w[0]))m=p.fromJson(JSON.parse(w[0]));else if(y(w[0]))m=p.createFromArcadeFeature(w[0]);else if(w[0]instanceof l)m=p.createFromGraphicLikeObject(w[0],null,null);else if(w[0]instanceof g)m=w[0].hasField("geometry")?
w[0].field("geometry"):null,u=w[0].hasField("attributes")?w[0].field("attributes"):null,null!==m&&m instanceof g&&(m=p.parseGeometryFromDictionary(m)),null!==u&&(u=p.parseAttributesFromDictionary(u)),m=p.createFromGraphicLikeObject(m,u,null);else throw Error("Illegal Argument");else{if(2===w.length){u=m=null;if(null!==w[0])if(w[0]instanceof l)m=w[0];else if(m instanceof g)m=p.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");if(null!==w[1])if(w[1]instanceof g)u=p.parseAttributesFromDictionary(w[1]);
else throw Error("Illegal Argument");}else{m=null;u={};if(null!==w[0])if(w[0]instanceof l)m=w[0];else if(m instanceof g)m=p.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");for(var A=1;A<w.length;A+=2){var C=d.toString(w[A]),E=w[A+1];if(null===E||void 0===E||d.isString(E)||isNaN(E)||d.isDate(E)||d.isNumber(E)||d.isBoolean(E)){if(d.isFunctionParameter(E)||!1===d.isSimpleType(E))throw Error("Illegal Argument");u[C]=E===d.voidOperation?null:E}else throw Error("Illegal Argument");
}}m=p.createFromGraphicLikeObject(m,u,null)}m._geometry=d.fixSpatialReference(m.geometry(),b.spatialReference);m.immutable=!1;return m})};B.dictionary=function(b,c){return z(b,c,function(m,u,w){if(0===w.length)return w=new g,w.immutable=!1,w;if(1===w.length&&d.isString(w[0]))try{var A=JSON.parse(w[0]),C=g.convertObjectToArcadeDictionary(A,!1);C.immutable=!1;return C}catch(E){throw Error("Missing Parameters or Illegal Json");}if(0!==w.length%2)throw Error("Missing Parameters");m={};for(u=0;u<w.length;u+=
2)if(A=d.toString(w[u]),C=w[u+1],null===C||void 0===C||d.isString(C)||isNaN(C)||d.isDate(C)||d.isNumber(C)||d.isBoolean(C)||d.isArray(C)||d.isImmutableArray(C)){if(d.isFunctionParameter(C))throw Error("Illegal Argument");m[A]=C===d.voidOperation?null:C}else throw Error("Illegal Argument");w=new g(m);w.immutable=!1;return w})};B.haskey=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,2,2);m=d.toString(w[1]);if(y(w[0])||w[0]instanceof g)return w[0].hasField(m);throw Error("Illegal Argument");
})};B.indexof=function(b,c){return z(b,c,function(m,u,w){d.pcCheck(w,2,2);m=w[1];if(d.isArray(w[0])){for(u=0;u<w[0].length;u++)if(d.equalityTest(m,w[0][u]))return u;return-1}if(d.isImmutableArray(w[0])){var A=w[0].length();for(u=0;u<A;u++)if(d.equalityTest(m,w[0].get(u)))return u;return-1}throw Error("Illegal Argument");})};B.angle=function(b,c){return z(b,c,function(m,u,w){w=d.autoCastFeatureToGeometry(w);d.pcCheck(w,2,3);if(!(w[0]instanceof t))throw Error("Illegal Argument");if(!(w[1]instanceof
t))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof t))throw Error("Illegal Argument");return 2===w.length?v.angle2D(w[0],w[1]):v.angleBetween2D(w[0],w[1],w[2])})};B.bearing=function(b,c){return z(b,c,function(m,u,w){w=d.autoCastFeatureToGeometry(w);d.pcCheck(w,2,3);if(!(w[0]instanceof t))throw Error("Illegal Argument");if(!(w[1]instanceof t))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof t))throw Error("Illegal Argument");return 2===w.length?v.bearing2D(w[0],w[1]):
v.bearingBetween2D(w[0],w[1],w[2])})};B.isselfintersecting=function(b,c){return z(b,c,function(m,u,w){w=d.autoCastFeatureToGeometry(w);d.pcCheck(w,1,1);m=w[0];if(m instanceof r)return m.isSelfIntersecting(m);if(m instanceof q)return m=m.paths,v.pathsSelfIntersecting(m);if(m instanceof h)for(u=m.points,w=0;w<u.length;w++)for(var A=0;A<u.length;A++)if(A!==w){for(var C=!0,E=0;E<u[w].length;E++)if(u[w][E]!==u[A][E]){C=!1;break}if(!0===C)return!0}return d.isArray(m)||d.isImmutableArray(m)?(m=d.autoCastArrayOfPointsToPolyline(m,
b.spatialReference),null!==m&&(m=m.paths),v.pathsSelfIntersecting(m)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(D,k,a){function f(h,t,r){var q={x:0,y:0};t&&(q.z=0);r&&(q.m=0);for(var v=0,x=h[0],y=0;y<h.length;y++){var B=h[y];a:if(B.length!==x.length)var z=!1;else{for(z=0;z<B.length;z++)if(B[z]!==x[z]){z=!1;break a}z=!0}if(!1===z){z=g(x,B,t);var b=B,c=t,m=r,u={x:(x[0]+b[0])/2,y:(x[1]+b[1])/2};c&&(u.z=(x[2]+b[2])/2);c&&m?u.m=(x[3]+
b[3])/2:m&&(u.m=(x[2]+b[2])/2);x=u;x.x*=z;x.y*=z;q.x+=x.x;q.y+=x.y;t&&(x.z*=z,q.z+=x.z);r&&(x.m*=z,q.m+=x.m);v+=z;x=B}}0<v?(q.x/=v,q.y/=v,t&&(q.z/=v),r&&(q.m/=v)):(q.x=h[0][0],q.y=h[0][1],t&&(q.z=h[0][2]),r&&t?q.m=h[0][3]:r&&(q.m=h[0][2]));return q}function g(h,t,r){var q=t[0]-h[0];h=t[1]-h[1];return r?(t=t[2]-t[2],Math.sqrt(q*q+h*h+t*t)):Math.sqrt(q*q+h*h)}function p(h,t,r){for(void 0===r&&(r=0);h<r;)h+=t;for(r+=t;h>=r;)h-=t;return h}function n(h,t){return Math.atan2(t.y-h.y,t.x-h.x)}function d(h,
t,r){var q=h.x-t.x;h=h.y-t.y;var v=r.x-t.x;t=r.y-t.y;return Math.atan2(q*t-v*h,q*v+h*t)}function e(h,t,r,q,v){var x=h[0];h=h[1];var y=t[0];t=t[1];var B=r[0],z=r[1];r=q[0]-B;B=x-B;var b=y-x;q=q[1]-z;z=h-z;var c=t-h,m=q*b-r*c;if(0===m)return!1;r=(r*z-q*B)/m;B=(b*z-c*B)/m;return 0<=r&&1>=r&&0<=B&&1>=B?(v&&(v[0]=x+r*(y-x),v[1]=h+r*(t-h)),!0):!1}Object.defineProperty(k,"__esModule",{value:!0});k.pathsSelfIntersecting=k.bearingBetween2D=k.angleBetween2D=k.angleBetweenRad=k.bearing2D=k.angle2D=k.angleRad=
k.centroidMultiPoint=k.centroidPolyline=void 0;k.centroidPolyline=function(h){for(var t={x:0,y:0,spatialReference:h.spatialReference.toJson()},r={x:0,y:0,spatialReference:h.spatialReference.toJson()},q=0,v=0,x=0;x<h.paths.length;x++)if(0!==h.paths[x].length){var y=h.paths[x];var B=!0===h.hasZ;if(1>=y.length)y=0;else{for(var z=0,b=1;b<y.length;b++)z+=g(y[b-1],y[b],B);y=z}0===y?(B=f(h.paths[x],!0===h.hasZ,!0===h.hasM),t.x+=B.x,t.y+=B.y,!0===h.hasZ&&(t.z+=B.z),!0===h.hasM&&(t.m+=B.m),++q):(B=f(h.paths[x],
!0===h.hasZ,!0===h.hasM),r.x+=B.x*y,r.y+=B.y*y,!0===h.hasZ&&(r.z+=B.z*y),!0===h.hasM&&(r.m+=B.m*y),v+=y)}return 0<v?(r.x/=v,r.y/=v,!0===h.hasZ&&(r.z/=v),!0===h.hasM&&(r.m/=v),new a(r)):0<q?(t.x/=q,t.y/=q,!0===h.hasZ&&(r.z/=q),!0===h.hasM&&(t.m/=q),new a(t)):null};k.centroidMultiPoint=function(h){if(0===h.points.length)return null;for(var t=0,r=0,q=0,v=0,x=0;x<h.points.length;x++){var y=h.getPoint(x);!0===y.hasZ&&(q+=y.z);!0===y.hasM&&(v+=y.m);t+=y.x;r+=y.y;v+=y.m}t={x:t/h.points.length,y:r/h.points.length,
spatialReference:null};t.spatialReference=h.spatialReference.toJson();!0===h.hasZ&&(t.z=q/h.points.length);!0===h.hasM&&(t.m=v/h.points.length);return new a(t)};k.angleRad=n;k.angle2D=function(h,t){return p(n(h,t),2*Math.PI)*(180/Math.PI)};k.bearing2D=function(h,t){return p(Math.PI/2-n(h,t),2*Math.PI)*(180/Math.PI)};k.angleBetweenRad=d;k.angleBetween2D=function(h,t,r){return p(d(h,t,r),2*Math.PI)*(180/Math.PI)};k.bearingBetween2D=function(h,t,r){return p(-1*d(h,t,r),2*Math.PI)*(180/Math.PI)};var l=
[0,0];k.pathsSelfIntersecting=function(h){for(var t=0;t<h.length;t++){for(var r=h[t],q=0;q<r.length-1;q++)for(var v=r[q],x=r[q+1],y=t+1;y<h.length;y++)for(var B=0;B<h[y].length-1;B++){var z=h[y][B],b=h[y][B+1],c=e(v,x,z,b,l);if(c&&!(l[0]===v[0]&&l[1]===v[1]||l[0]===z[0]&&l[1]===z[1]||l[0]===x[0]&&l[1]===x[1]||l[0]===b[0]&&l[1]===b[1]))return!0}B=r.length;if(!(3>B))for(q=0;q<=B-2;q++)for(v=r[q],x=r[q+1],y=q+2;y<=B-2;y++)if(z=r[y],b=r[y+1],(c=e(v,x,z,b,l))&&!(l[0]===v[0]&&l[1]===v[1]||l[0]===z[0]&&
l[1]===z[1]||l[0]===x[0]&&l[1]===x[1]||l[0]===b[0]&&l[1]===b[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(D,k,a,f,g,p,n,d,e,l,h,t,r){function q(x){return 0===a.version.indexOf("4.")?h.fromExtent(x):new h({spatialReference:x.spatialReference,
rings:[[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]]})}Object.defineProperty(k,"__esModule",{value:!0});k.registerFunctions=k.setGeometryEngine=void 0;var v=null;k.setGeometryEngine=function(x){v=x};k.registerFunctions=function(x,y){function B(z){g.pcCheck(z,2,2);if(!(z[0]instanceof d&&z[1]instanceof d||z[0]instanceof d&&null===z[1]||z[1]instanceof d&&null===z[0]||null===z[0]&&null===z[1]))throw Error("Illegal Argument");}x.disjoint=function(z,b){return y(z,b,
function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!0:v.disjoint(u[0],u[1])})};x.intersects=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:v.intersects(u[0],u[1])})};x.touches=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:v.touches(u[0],u[1])})};x.crosses=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);
B(u);return null===u[0]||null===u[1]?!1:v.crosses(u[0],u[1])})};x.within=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:v.within(u[0],u[1])})};x.contains=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:v.contains(u[0],u[1])})};x.overlaps=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:v.overlaps(u[0],
u[1])})};x.equals=function(z,b){return y(z,b,function(c,m,u){g.pcCheck(u,2,2);return u[0]===u[1]?!0:u[0]instanceof d&&u[1]instanceof d?v.equals(u[0],u[1]):g.isDate(u[0])&&g.isDate(u[1])?u[0].getTime()===u[1].getTime():!1})};x.relate=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,3,3);if(u[0]instanceof d&&u[1]instanceof d)return v.relate(u[0],u[1],g.toString(u[2]));if(u[0]instanceof d&&null===u[1]||u[1]instanceof d&&null===u[0]||null===u[0]&&null===u[1])return!1;
throw Error("Illegal Argument");})};x.intersection=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?null:v.intersect(u[0],u[1])})};x.union=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);c=[];if(0===u.length)throw Error("Function called with wrong number of Parameters");if(1===u.length)if(g.isArray(u[0]))for(u=g.autoCastFeatureToGeometry(u[0]),m=0;m<u.length;m++){if(null!==u[m]){if(!(u[m]instanceof d))throw Error("Illegal Argument");
c.push(u[m])}}else if(g.isImmutableArray(u[0]))for(u=g.autoCastFeatureToGeometry(u[0].toArray()),m=0;m<u.length;m++){if(null!==u[m]){if(!(u[m]instanceof d))throw Error("Illegal Argument");c.push(u[m])}}else{if(u[0]instanceof d)return g.fixSpatialReference(f.cloneGeometry(u[0]),z.spatialReference);if(null===u[0])return null;throw Error("Illegal Argument");}else for(m=0;m<u.length;m++)if(null!==u[m]){if(!(u[m]instanceof d))throw Error("Illegal Argument");c.push(u[m])}return 0===c.length?null:v.union(c)})};
x.difference=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null!==u[0]&&null===u[1]?f.cloneGeometry(u[0]):null===u[0]?null:v.difference(u[0],u[1])})};x.symmetricdifference=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]&&null===u[1]?null:null===u[0]?f.cloneGeometry(u[1]):null===u[1]?f.cloneGeometry(u[0]):v.symmetricDifference(u[0],u[1])})};x.clip=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);
g.pcCheck(u,2,2);if(!(u[1]instanceof n)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");return null===u[1]?null:v.clip(u[0],u[1])})};x.cut=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,2);if(!(u[1]instanceof t)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return[];if(!(u[0]instanceof d))throw Error("Illegal Argument");return null===u[1]?[f.cloneGeometry(u[0])]:
v.cut(u[0],u[1])})};x.area=function(z,b){return y(z,b,function(c,m,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return c=g.autoCastArrayOfPointsToPolygon(u[0],z.spatialReference),null===c?0:v.planarArea(c,f.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return v.planarArea(u[0],f.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)))})};x.areageodetic=function(z,
b){return y(z,b,function(c,m,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return c=g.autoCastArrayOfPointsToPolygon(u[0],z.spatialReference),null===c?0:v.geodesicArea(c,f.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return v.geodesicArea(u[0],f.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)))})};x.length=function(z,b){return y(z,b,function(c,m,u){g.pcCheck(u,
1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return c=g.autoCastArrayOfPointsToPolyline(u[0],z.spatialReference),null===c?0:v.planarLength(c,f.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return v.planarLength(u[0],f.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)))})};x.length3d=function(z,b){return y(z,b,function(c,m,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);
if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return c=g.autoCastArrayOfPointsToPolyline(u[0],z.spatialReference),null===c?0:v.planarLength(c,f.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return v.planarLength(u[0],f.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)))})};x.lengthgeodetic=function(z,b){return y(z,b,function(c,m,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||
g.isImmutableArray(u[0]))return c=g.autoCastArrayOfPointsToPolyline(u[0],z.spatialReference),null===c?0:v.geodesicLength(c,f.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return v.geodesicLength(u[0],f.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)))})};x.distance=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);c=u[0];if(g.isArray(u[0])||g.isImmutableArray(u[0]))c=g.autoCastArrayOfPointsToMultiPoint(u[0],
z.spatialReference);m=u[1];if(g.isArray(u[1])||g.isImmutableArray(u[1]))m=g.autoCastArrayOfPointsToMultiPoint(u[1],z.spatialReference);if(!(c instanceof d))throw Error("Illegal Argument");if(!(m instanceof d))throw Error("Illegal Argument");return v.distance(c,m,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};x.distancegeodetic=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);c=u[0];m=u[1];if(!(c instanceof l))throw Error("Illegal Argument");
if(!(m instanceof l))throw Error("Illegal Argument");var w=new t({paths:[],spatialReference:c.spatialReference});w.addPath([c,m]);return v.geodesicLength(w,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};x.densify=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");c=g.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");if(0>=c)throw Error("Illegal Argument");
return u[0]instanceof h||u[0]instanceof t?v.densify(u[0],c,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]instanceof n?v.densify(q(u[0]),c,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]})};x.densifygeodetic=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");c=g.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");if(0>=c)throw Error("Illegal Argument");
return u[0]instanceof h||u[0]instanceof t?v.geodesicDensify(u[0],c,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]instanceof n?v.geodesicDensify(q(u[0]),c,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]})};x.generalize=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,4);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");c=g.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");return v.generalize(u[0],
c,g.toBoolean(g.defaultUndefined(u[2],!0)),f.convertLinearUnitsToCode(g.defaultUndefined(u[3],-1)))})};x.buffer=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");c=g.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");return 0===c?f.cloneGeometry(u[0]):v.buffer(u[0],c,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};x.buffergeodetic=function(z,b){return y(z,
b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");c=g.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");return 0===c?f.cloneGeometry(u[0]):v.geodesicBuffer(u[0],c,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};x.offset=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,6);if(null===u[0])return null;if(!(u[0]instanceof h||u[0]instanceof t))throw Error("Illegal Argument");
c=g.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");m=g.toNumber(g.defaultUndefined(u[4],10));if(isNaN(m))throw Error("Illegal Argument");var w=g.toNumber(g.defaultUndefined(u[5],0));if(isNaN(w))throw Error("Illegal Argument");return v.offset(u[0],c,f.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)),g.toString(g.defaultUndefined(u[3],"round")).toLowerCase(),m,w)})};x.rotate=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);c=u[0];if(null===
c)return null;if(!(c instanceof d))throw Error("Illegal Argument");c instanceof n&&(c=h.fromExtent(c));m=g.toNumber(u[1]);if(isNaN(m))throw Error("Illegal Argument");u=g.defaultUndefined(u[2],null);if(null===u)return v.rotate(c,m);if(u instanceof l)return v.rotate(c,m,u);throw Error("Illegal Argument");})};x.centroid=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return null;c=u[0];if(g.isArray(u[0])||g.isImmutableArray(u[0]))c=g.autoCastArrayOfPointsToMultiPoint(u[0],
z.spatialReference);if(null===c)return null;if(!(c instanceof d))throw Error("Illegal Argument");return c instanceof l?g.fixSpatialReference(f.cloneGeometry(u[0]),z.spatialReference):c instanceof h?c.getCentroid():c instanceof t?p.centroidPolyline(c):c instanceof e?p.centroidMultiPoint(c):c instanceof n?c.getCenter():null})};x.multiparttosinglepart=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);m=[];if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");
if(u[0]instanceof l||u[0]instanceof n)return[g.fixSpatialReference(f.cloneGeometry(u[0]),z.spatialReference)];c=v.simplify(u[0]);if(c instanceof h){m=[];var w=[];for(u=0;u<c.rings.length;u++)if(c.isClockwise(c.rings[u])){var A=r.fromJson({rings:[c.rings[u]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJson()});m.push(A)}else w.push({ring:c.rings[u],pt:c.getPoint(u,0)});for(c=0;c<w.length;c++)for(u=0;u<m.length;u++)if(m[u].contains(w[c].pt)){m[u].addRing(w[c].ring);break}return m}if(c instanceof
t){m=[];for(u=0;u<c.paths.length;u++)w=r.fromJson({paths:[c.paths[u]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJson()}),m.push(w);return m}if(u[0]instanceof e){c=g.fixSpatialReference(f.cloneGeometry(u[0]),z.spatialReference);for(u=0;u<c.points.length;u++)m.push(c.getPoint(u));return m}return null})};x.issimple=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return!0;if(!(u[0]instanceof d))throw Error("Illegal Argument");
return v.isSimple(u[0])})};x.simplify=function(z,b){return y(z,b,function(c,m,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");return v.simplify(u[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(D,k,a,f){Object.defineProperty(k,"__esModule",{value:!0});k.cloneGeometry=k.sameGeomType=k.convertLinearUnitsToCode=k.shapeExtent=k.convertSquareUnitsToCode=
void 0;k.convertSquareUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;g=g.toLowerCase();g=g.replace(/\s/g,"");g=g.replace(/-/g,"");switch(g){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};k.shapeExtent=function(g){if(null===g)return null;switch(g.type){case "polygon":case "multipoint":case "polyline":return g.extent;case "point":return new a({xmin:g.x,ymin:g.y,xmax:g.x,ymax:g.y,
spatialReference:g.spatialReference});case "extent":return g}return null};k.convertLinearUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;g=g.toLowerCase();g=g.replace(/\s/g,"");g=g.replace(/-/g,"");switch(g){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};k.sameGeomType=function(g,p){return g===p||"point"===g&&"esriGeometryPoint"===p||"polyline"===g&&"esriGeometryPolyline"===p||"polygon"===g&&"esriGeometryPolygon"===p||"extent"===g&&"esriGeometryEnvelope"===
p||"multipoint"===g&&"esriGeometryMultipoint"===p||"point"===p&&"esriGeometryPoint"===g||"polyline"===p&&"esriGeometryPolyline"===g||"polygon"===p&&"esriGeometryPolygon"===g||"extent"===p&&"esriGeometryEnvelope"===g||"multipoint"===p&&"esriGeometryMultipoint"===g?!0:!1};k.cloneGeometry=function(g){if(null===g)return null;var p=f.fromJson(g.toJson());g.getCacheValue("_geVersion")&&p.setCacheValue("_geVersion",g.getCacheValue("_geVersion"));return p}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),
function(D,k,a,f,g,p){function n(d,e,l){if("undefined"===typeof l||0===+l)return Math[d](e);e=+e;l=+l;if(isNaN(e)||"number"!==typeof l||0!==l%1)return NaN;e=e.toString().split("e");e=Math[d](+(e[0]+"e"+(e[1]?+e[1]-l:-l)));e=e.toString().split("e");return+(e[0]+"e"+(e[1]?+e[1]+l:l))}Object.defineProperty(k,"__esModule",{value:!0});k.registerFunctions=void 0;k.registerFunctions=function(d,e){function l(h,t,r){h=g.toNumber(h);return isNaN(h)?h:isNaN(t)||isNaN(r)||t>r?NaN:h<t?t:h>r?r:h}d.number=function(h,
t){return e(h,t,function(r,q,v){g.pcCheck(v,1,2);r=v[0];return g.isNumber(r)?r:null===r?0:g.isDate(r)||g.isBoolean(r)?Number(r):g.isArray(r)?NaN:""===r||void 0===r?Number(r):g.isString(r)?void 0!==v[1]?(v=g.multiReplace(v[1],"\u2030",""),v=g.multiReplace(v,"\u00a4",""),p.parse(r,{pattern:v})):Number(r.trim()):Number(r)})};d.abs=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.abs(g.toNumber(v[0]))})};d.acos=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.acos(g.toNumber(v[0]))})};
d.asin=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.asin(g.toNumber(v[0]))})};d.atan=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.atan(g.toNumber(v[0]))})};d.atan2=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,2,2);return Math.atan2(g.toNumber(v[0]),g.toNumber(v[1]))})};d.ceil=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,2);return 2===v.length?(r=g.toNumber(v[1]),isNaN(r)&&(r=0),n("ceil",g.toNumber(v[0]),-1*r)):Math.ceil(g.toNumber(v[0]))})};
d.round=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,2);return 2===v.length?(r=g.toNumber(v[1]),isNaN(r)&&(r=0),n("round",g.toNumber(v[0]),-1*r)):Math.round(g.toNumber(v[0]))})};d.floor=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,2);return 2===v.length?(r=g.toNumber(v[1]),isNaN(r)&&(r=0),n("floor",g.toNumber(v[0]),-1*r)):Math.floor(g.toNumber(v[0]))})};d.cos=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.cos(g.toNumber(v[0]))})};d.isnan=function(h,
t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return"number"===typeof v[0]&&isNaN(v[0])})};d.exp=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.exp(g.toNumber(v[0]))})};d.log=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.log(g.toNumber(v[0]))})};d.pow=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,2,2);return Math.pow(g.toNumber(v[0]),g.toNumber(v[1]))})};d.random=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,0,0);return Math.random()})};
d.sin=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.sin(g.toNumber(v[0]))})};d.sqrt=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.sqrt(g.toNumber(v[0]))})};d.tan=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return Math.tan(g.toNumber(v[0]))})};d.defaultvalue=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,2,2);return null===v[0]||""===v[0]||void 0===v[0]?v[1]:v[0]})};d.isempty=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,
1,1);return null===v[0]||""===v[0]||void 0===v[0]?!0:!1})};d["boolean"]=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,1,1);return g.toBoolean(v[0])})};d.constrain=function(h,t){return e(h,t,function(r,q,v){g.pcCheck(v,3,3);r=g.toNumber(v[1]);q=g.toNumber(v[2]);if(g.isArray(v[0])){var x=[],y=0;for(v=v[0];y<v.length;y++)x.push(l(v[y],r,q));return x}if(g.isImmutableArray(v[0])){x=[];for(y=0;y<v[0].length();y++)x.push(l(v[0].get(y),r,q));return x}return l(v[0],r,q)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(D,k,a,f){function g(p,n,d,e){if(1===e.length){if(a.isArray(e[0]))return f.calculateStat(p,e[0],-1);if(a.isImmutableArray(e[0]))return f.calculateStat(p,e[0].toArray(),-1)}return f.calculateStat(p,e,-1)}Object.defineProperty(k,"__esModule",{value:!0});k.registerFunctions=void 0;k.registerFunctions=function(p,n){p.stdev=function(d,e){return n(d,e,function(l,h,t){return g("stdev",l,h,t)})};p.variance=function(d,e){return n(d,e,function(l,h,t){return g("variance",
l,h,t)})};p.average=function(d,e){return n(d,e,function(l,h,t){return g("mean",l,h,t)})};p.mean=function(d,e){return n(d,e,function(l,h,t){return g("mean",l,h,t)})};p.sum=function(d,e){return n(d,e,function(l,h,t){return g("sum",l,h,t)})};p.min=function(d,e){return n(d,e,function(l,h,t){return g("min",l,h,t)})};p.max=function(d,e){return n(d,e,function(l,h,t){return g("max",l,h,t)})};p.distinct=function(d,e){return n(d,e,function(l,h,t){return g("distinct",l,h,t)})};p.count=function(d,e){return n(d,
e,function(l,h,t){a.pcCheck(t,1,1);if(a.isArray(t[0])||a.isString(t[0]))return t[0].length;if(a.isImmutableArray(t[0]))return t[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(D,k,a){function f(p){for(var n=0,d=0;d<p.length;d++)n+=p[d];return n/p.length}function g(p){for(var n=f(p),d=0,e=0;e<p.length;e++)d+=Math.pow(n-p[e],2);return d/p.length}Object.defineProperty(k,"__esModule",
{value:!0});k.calculateStat=k.decodeStatType=void 0;k.decodeStatType=function(p){switch(p.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};k.calculateStat=function(p,n,d){void 0===d&&(d=1E3);switch(p.toLowerCase()){case "distinct":a:{p=d;d=[];for(var e={},l=[],h=0;h<n.length;h++){if(void 0!==
n[h]&&null!==n[h]&&n[h]!==a.voidOperation){var t=n[h];if(a.isNumber(t)||a.isString(t))void 0===e[t]&&(d.push(t),e[t]=1);else{for(var r=!1,q=0;q<l.length;q++)!0===a.equalityTest(l[q],t)&&(r=!0);!1===r&&(l.push(t),d.push(t))}}if(d.length>=p&&-1!==p){n=d;break a}}n=d}return n;case "avg":case "mean":return f(a.toNumberArray(n));case "min":return Math.min.apply(Math,a.toNumberArray(n));case "sum":n=a.toNumberArray(n);for(d=p=0;d<n.length;d++)p+=n[d];return p;case "max":return Math.max.apply(Math,a.toNumberArray(n));
case "stdev":case "stddev":return Math.sqrt(g(a.toNumberArray(n)));case "var":case "variance":return g(a.toNumberArray(n));case "count":return n.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y){function B(z,b,c){if(null===z)b.updateUint8Array([0,139]);else if(d.isArray(z)){b.updateUint8Array([61]);if(c.map.has(z))z=c.map.get(z),b.updateIntArray([z^61237541]);else{c.map.set(z,c.currentLength++);for(var m=0;m<z.length;m++){var u=z[m];B(u,b,c)}c.map["delete"](z);c.currentLength--}b.updateUint8Array([199])}else if(d.isImmutableArray(z)){b.updateUint8Array([61]);if(c.map.has(z))z=c.map.get(z),b.updateIntArray([z^61237541]);else{c.map.set(z,c.currentLength++);
m=0;for(var w=z.toArray();m<w.length;m++)u=w[m],B(u,b,c);c.map["delete"](z);c.currentLength--}b.updateUint8Array([199])}else if(d.isDate(z))b.updateIntArray([z.getTime()]),b.updateUint8Array([241]);else if(d.isString(z))b.updateIntArray([z.length]),b.updateWithString(z),b.updateUint8Array([41]);else if(d.isBoolean(z))b.updateUint8Array([!0===z?1:0,113]);else if(d.isNumber(z))b.updateFloatArray([z]),b.updateUint8Array([173]);else{if(z instanceof p)throw Error("Type not supported in Hash");if(z instanceof
g)throw Error("Type not supported in Hash");if(z instanceof n){b.updateUint8Array([223]);if(c.map.has(z))z=c.map.get(z),b.updateIntArray([z^61237541]);else{c.map.set(z,c.currentLength++);m=0;for(w=z.keys();m<w.length;m++)u=w[m],b.updateIntArray([u.length]),b.updateWithString(u),b.updateUint8Array([251]),u=z.field(u),B(u,b,c),b.updateUint8Array([239]);c.map["delete"](z);c.currentLength--}b.updateUint8Array([73])}else{if(d.isFeature(z))throw Error("Type not supported in Hash");if(z instanceof q)b.updateIntArray([3833836621]),
b.updateIntArray([0]),b.updateFloatArray([z.x]),b.updateIntArray([1]),b.updateFloatArray([z.y]),b.updateIntArray([3765347959]),B(z.spatialReference.wkid,b,c);else if(z instanceof v){b.updateIntArray([1266616829]);for(m=0;m<z.rings.length;m++){w=z.rings[m];var A=[],C=null,E=null;for(u=0;u<w.length;u++){var G=z.getPoint(m,u);if(0===u)C=G;else if(E.x===G.x&&E.y===G.y)continue;E=G;u===w.length-1&&C.x===G.x&&C.y===G.y||A.push(G)}b.updateIntArray([1397116793,A.length]);for(u=0;u<A.length;u++)G=A[u],b.updateIntArray([3962308117,
u]),B(G,b,c),b.updateIntArray([2716288009]);b.updateIntArray([2278822459])}b.updateIntArray([3878477243]);B(z.spatialReference.wkid,b,c)}else if(z instanceof x){b.updateIntArray([4106883559]);for(m=0;m<z.paths.length;m++){w=z.paths[m];b.updateIntArray([1397116793,w.length]);for(u=0;u<w.length;u++)b.updateIntArray([3962308117,u]),B(z.getPoint(m,u),b,c),b.updateIntArray([2716288009]);b.updateIntArray([2278822459])}b.updateIntArray([2568784753]);B(z.spatialReference.wkid,b,c)}else if(z instanceof r){b.updateIntArray([588535921,
z.points.length]);for(u=0;u<z.points.length;u++)m=z.getPoint(u),b.updateIntArray([u]),B(m,b,c);b.updateIntArray([1700171621]);B(z.spatialReference.wkid,b,c)}else if(z instanceof t)b.updateIntArray([3483648373]),b.updateIntArray([0]),b.updateFloatArray([z.xmax]),b.updateIntArray([1]),b.updateFloatArray([z.xmin]),b.updateIntArray([2]),b.updateFloatArray([z.ymax]),b.updateIntArray([3]),b.updateFloatArray([z.ymin]),b.updateIntArray([3622027469]),B(z.spatialReference.wkid,b,c);else if(z instanceof y)b.updateIntArray([14]),
void 0!==z.wkid&&null!==z.wkid&&b.updateIntArray([z.wkid]),z.wkt&&b.updateWithString(z.wkt);else{if(d.isFunctionParameter(z))throw Error("Type not supported in Hash");if(d.isFeatureSet(z))throw Error("Type not supported in Hash");d.isFeatureSetCollection(z);throw Error("Type not supported in Hash");}}}}Object.defineProperty(k,"__esModule",{value:!0});k.registerFunctions=void 0;k.registerFunctions=function(z,b){z.portal=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);return new g(d.toString(A[0]))})};
z.trim=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);return d.toString(A[0]).trim()})};z.tohex=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);u=d.toNumber(A[0]);return isNaN(u)?u:u.toString(16)})};z.upper=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);return d.toString(A[0]).toUpperCase()})};z.proper=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,2);u=1;2===A.length&&"firstword"===d.toString(A[1]).toLowerCase()&&(u=2);w=/\s/;A=d.toString(A[0]);for(var C=
"",E=!0,G=0;G<A.length;G++){var F=A[G];w.test(F)?1===u&&(E=!0):F.toUpperCase()!==F.toLowerCase()&&(E?(F=F.toUpperCase(),E=!1):F=F.toLowerCase());C+=F}return C})};z.lower=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);return d.toString(A[0]).toLowerCase()})};z.guid=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,0,1);if(0<A.length)switch(d.toString(A[0]).toLowerCase()){case "digits":return d.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return d.generateUUID();
case "digits-hyphen-parentheses":return"("+d.generateUUID()+")"}return"{"+d.generateUUID()+"}"})};z.console=function(c,m){return b(c,m,function(u,w,A){0!==A.length&&(1===A.length?c.console(d.toString(A[0])):c.console(d.toString(A)));return d.voidOperation})};z.mid=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,2,3);u=d.toNumber(A[1]);if(isNaN(u))return"";0>u&&(u=0);if(2===A.length)return d.toString(A[0]).substr(u);w=d.toNumber(A[2]);if(isNaN(w))return"";0>w&&(w=0);return d.toString(A[0]).substr(u,
w)})};z.find=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,2,3);u=0;if(2<A.length){u=d.toNumber(d.defaultUndefined(A[2],0));if(isNaN(u))return-1;0>u&&(u=0)}return d.toString(A[1]).indexOf(d.toString(A[0]),u)})};z.left=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,2,2);u=d.toNumber(A[1]);if(isNaN(u))return"";0>u&&(u=0);return d.toString(A[0]).substr(0,u)})};z.right=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,2,2);u=d.toNumber(A[1]);if(isNaN(u))return"";0>u&&(u=0);return d.toString(A[0]).substr(-1*
u,u)})};z.split=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,2,4);u=d.toNumber(d.defaultUndefined(A[2],-1));w=d.toBoolean(d.defaultUndefined(A[3],!1));-1===u||null===u||!0===w?A=d.toString(A[0]).split(d.toString(A[1])):(isNaN(u)&&(u=-1),-1>u&&(u=-1),A=d.toString(A[0]).split(d.toString(A[1]),u));if(!1===w)return A;w=[];for(var C=0;C<A.length&&!(-1!==u&&w.length>=u);C++)""!==A[C]&&void 0!==A[C]&&w.push(A[C]);return w})};z.text=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,2);return d.toStringExplicit(A[0],
A[1])})};z.concatenate=function(c,m){return b(c,m,function(u,w,A){u=[];if(1>A.length)return"";if(d.isArray(A[0])){w=d.defaultUndefined(A[2],"");for(var C=0;C<A[0].length;C++)u[C]=d.toStringExplicit(A[0][C],w);return 1<A.length?u.join(A[1]):u.join("")}if(d.isImmutableArray(A[0])){w=d.defaultUndefined(A[2],"");for(C=0;C<A[0].length();C++)u[C]=d.toStringExplicit(A[0].get(C),w);return 1<A.length?u.join(A[1]):u.join("")}for(C=0;C<A.length;C++)u[C]=d.toStringExplicit(A[C]);return u.join("")})};z.reverse=
function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);if(d.isArray(A[0]))return u=A[0].slice(0),u.reverse(),u;if(d.isImmutableArray(A[0]))return u=A[0].toArray().slice(0),u.reverse(),u;throw Error("Invalid Parameter");})};z.replace=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,3,4);u=d.toString(A[0]);w=d.toString(A[1]);var C=d.toString(A[2]);return(4===A.length?d.toBoolean(A[3]):1)?d.multiReplace(u,w,C):u.replace(w,C)})};z.schema=function(c,m){return b(c,m,function(u,w,A){if(d.isFeature(A[0]))return(u=
d.featureSchema(A[0]))?n.convertObjectToArcadeDictionary(u):null;throw Error("Invalid Parameter");})};z.subtypes=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);if(d.isFeature(A[0]))return(u=d.featureSubtypes(A[0]))?n.convertObjectToArcadeDictionary(u):null;throw Error("Invalid Parameter");})};z.subtypecode=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);if(d.isFeature(A[0])){w=d.featureSubtypes(A[0]);if(!w)return null;if(w.subtypeField&&A[0].hasField(w.subtypeField))for(A=
A[0].field(w.subtypeField),u=0,w=w.subtypes;u<w.length;u++){var C=w[u];if(C.code===A)return C.code}return null}throw Error("Invalid Parameter");})};z.subtypename=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);if(d.isFeature(A[0])){w=d.featureSubtypes(A[0]);if(!w)return"";if(w.subtypeField&&A[0].hasField(w.subtypeField))for(A=A[0].field(w.subtypeField),u=0,w=w.subtypes;u<w.length;u++){var C=w[u];if(C.code===A)return C.name}return""}throw Error("Invalid Parameter");})};z.gdbversion=function(c,
m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);if(d.isFeature(A[0]))return A[0].gdbVersion();throw Error("Invalid Parameter");})};z.domain=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,2,3);if(d.isFeature(A[0]))return(u=d.featureFullDomain(A[0],d.toString(A[1]),void 0===A[2]?void 0:d.toNumber(A[2])))&&u.domain?"coded-value"===u.domain.type||"codedValue"===u.domain.type?n.convertObjectToArcadeDictionary({type:"codedValue",name:u.domain.name,dataType:e.layerFieldEsriConstants[u.field.type],
codedValues:u.domain.codedValues.map(function(C){return{name:C.name,code:C.code}})}):n.convertObjectToArcadeDictionary({type:"range",name:u.domain.name,dataType:e.layerFieldEsriConstants[u.field.type],min:u.domain.min,max:u.domain.max}):null;throw Error("Invalid Parameter");})};z.domainname=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,2,4);if(d.isFeature(A[0]))return d.featureDomainValueLookup(A[0],d.toString(A[1]),A[2],void 0===A[3]?void 0:d.toNumber(A[3]));throw Error("Invalid Parameter");
})};z.domaincode=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,2,4);if(d.isFeature(A[0]))return d.featureDomainCodeLookup(A[0],d.toString(A[1]),A[2],void 0===A[3]?void 0:d.toNumber(A[3]));throw Error("Invalid Parameter");})};z.urlencode=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);if(null===A[0])return"";if(A[0]instanceof n){u="";w=0;for(var C=A[0].keys();w<C.length;w++){var E=C[w],G=A[0].field(E);""!==u&&(u+="\x26");u=null===G?u+(encodeURIComponent(E)+"\x3d"):u+(encodeURIComponent(E)+
"\x3d"+encodeURIComponent(G))}return u}return encodeURIComponent(d.toString(A[0]))})};z.hash=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);u=new h.XXH(0);B(A[0],u,{map:new Map,currentLength:0});return u.digest()})};z.convertdirection=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,3,3);return l.convertDirection(A[0],A[1],A[2])})};z.fromjson=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,1);if(!1===d.isString(A[0]))throw Error("Invalid Parameter");return n.convertJsonToArcade(JSON.parse(d.toString(A[0])))})};
z.expects=function(c,m){return b(c,m,function(u,w,A){if(1>A.length)throw Error("Function called with wrong number of Parameters");return d.voidOperation})};z.tocharcode=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,2);u=d.toNumber(d.defaultUndefined(A[1],0));w=d.toString(A[0]);if(0===w.length&&1===A.length)return null;if(w.length<=u||0>u)throw Error("Illegal argument");return w.charCodeAt(u)})};z.tocodepoint=function(c,m){return b(c,m,function(u,w,A){d.pcCheck(A,1,2);u=d.toNumber(d.defaultUndefined(A[1],
0));w=d.toString(A[0]);if(0===w.length&&1===A.length)return null;if(w.length<=u||0>u)throw Error("Illegal argument");return w.codePointAt(u)})};z.fromcharcode=function(c,m){return b(c,m,function(u,w,A){if(1>A.length)throw Error("Function called with wrong number of Parameters");u=A.map(function(C){return Math.trunc(d.toNumber(C))}).filter(function(C){return 0<=C&&65535>=C});return 0===u.length?null:String.fromCharCode.apply(null,u)})};z.fromcodepoint=function(c,m){return b(c,m,function(u,w,A){if(1>
A.length)throw Error("Function called with wrong number of Parameters");try{var C=A.map(function(E){return Math.trunc(d.toNumber(E))}).filter(function(E){return 1114111>=E&&E>>>0===E})}catch(E){return null}return 0===C.length?null:String.fromCodePoint.apply(null,C)})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(D,k,a,f){function g(K){if(!1===f.isString(K))throw Error("Invalid Parameter");return K}function p(K,U){var da=
Math.pow(10,U);return Math.round(K*da)/da}function n(K){K=+K;return isFinite(K)?K-K%1||(0>K?-0:0===K?K:0):K}function d(K){var U=parseFloat(K.toString().replace(n(K).toString(),"0"))*((0<K)-(0>K)||+K);return 0>K?{fraction:U,integer:Math.ceil(K)}:{fraction:U,integer:Math.floor(K)}}function e(K,U){switch(K){case 0:return"SHORT"===U?"N":"North";case 1:return"SHORT"===U?"E":"East";case 2:return"SHORT"===U?"S":"South";case 3:return"SHORT"===U?"W":"West"}}function l(K,U,da){for(;K.length<da;)K=U+K;return K}
function h(K,U){return K-Math.floor(K/U)*U}function t(K){switch(K){case 6:case 1:return 360;case 4:return G;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function r(K){switch(K.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");}function q(K){switch(K.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function v(K,U,da){var fa=null;switch(U){case 1:fa=k.preciseMultiply(K,3600);break;case 2:fa=K;break;case 5:fa=k.preciseMultiply(K,3240);break;case 4:fa=k.preciseMultiply(K,F);break;default:throw Error("Unnexpected evaluation");
}switch(da){case 1:return k.preciseDivide(fa,3600);case 2:return fa;case 5:return k.preciseDivide(fa,3240);case 4:return fa/F;default:throw Error("Unnexpected evaluation");}}function x(K){switch(K){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function y(K){switch(f.toNumber(K)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function B(K){switch(K.toUpperCase().trim()){case "N":case "NORTH":return 0;
case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function z(K){K=parseFloat(K);if(f.isNumber(K)){if(isNaN(K))throw Error("Invalid conversion");return K}throw Error("Invalid conversion");}function b(K,U,da){var fa=3===da,ia=null,la=null,ma=0,ta=0;ta=0;if(fa){if(2>K.length)throw Error("Conversion Error");ta=1;(la=y(f.toString(K[K.length-1])))?(ia=la.first,la=la.second):(ma=1,ia=B(f.toString(K[0])),la=B(f.toString(K[K.length-1])));if(null===ia||null===
la)throw Error("Invalid Conversion");}switch(U){case 1:case 4:case 5:if(0===K.length)throw Error("Invalid Conversion");return fa?P.createFromAngleMeridianAndDirection(X.createFromAngleAndUnits(z(K[ma]),x(U)),ia,la):P.createFromAngleAndDirection(X.createFromAngleAndUnits(z(K[ma]),x(U)),da);case 3:ta=K.length-ta-ma;if(3===ta)return K=X.createFromDegreesMinutesSeconds(z(K[ma]),z(K[ma+1]),z(K[ma+2])),fa?P.createFromAngleMeridianAndDirection(K,ia,la):P.createFromAngleAndDirection(K,da);if(1===ta)return K=
z(K[ma]),K=O.numberToDms(K),K=X.createFromDegreesMinutesSeconds(K.m_degrees,K.m_minutes,K.m_seconds),fa?P.createFromAngleMeridianAndDirection(K,ia,la):P.createFromAngleAndDirection(K,da)}throw Error("Conversion Error");}function c(K){for(var U=[" ","-","/","'",'"',"\\","^","\u00b0",I,"\t","\r","\n","*"],da="",fa=0;fa<K.length;fa++){var ia=K.charAt(fa);da=U.includes(ia)?da+"RRSPLITRRSPLITRR":da+ia}return da.split("RRSPLITRRSPLITRR").filter(function(la){return""!==la})}function m(K,U,da){for(var fa=
{padding:0,rounding:0,newpos:U},ia=!1;U<K.length;){var la=K[U];if(la===da)ia?fa.rounding++:fa.padding++,U++;else if("."===la)ia=!0,U++;else break}fa.newpos=U-1;return fa}Object.defineProperty(k,"__esModule",{value:!0});k.convertDirection=k.preciseDivide=k.preciseMultiply=k.preciseMinus=k.preciseAdd=void 0;var u=function(K){return function(U,da,fa){fa=fa||14;return+K(U,da).toFixed(fa)}},w=function(K,U){return K+U},A=function(K,U){return K-U},C=function(K,U){return K*U},E=function(K,U){return K/U};
k.preciseAdd=function(K,U,da){return u(w)(K,U,da)};k.preciseMinus=function(K,U,da){return u(A)(K,U,da)};k.preciseMultiply=function(K,U,da){return u(C)(K,U,da)};k.preciseDivide=function(K,U,da){return u(E)(K,U,da)};var G=2*Math.PI,F=648E3/Math.PI,I=String.fromCharCode(7501),M;(function(K){K[K.north=0]="north";K[K.east=1]="east";K[K.south=2]="south";K[K.west=3]="west"})(M||(M={}));var Y;(function(K){K[K.decimal_degrees=1]="decimal_degrees";K[K.seconds=2]="seconds";K[K.degrees_minutes_seconds=3]="degrees_minutes_seconds";
K[K.radians=4]="radians";K[K.gradians=5]="gradians";K[K.truncated_degrees=6]="truncated_degrees";K[K.fractional_degree_minutes=7]="fractional_degree_minutes";K[K.fractional_minute_seconds=8]="fractional_minute_seconds"})(Y||(Y={}));var R;(function(K){K[K.north_azimuth=1]="north_azimuth";K[K.polar=2]="polar";K[K.quadrant=3]="quadrant";K[K.south_azimuth=4]="south_azimuth"})(R||(R={}));var S;(function(K){K[K.meridian=0]="meridian";K[K.direction=1]="direction"})(S||(S={}));var O=function(){function K(U,
da,fa){this.m_degrees=U;this.m_minutes=da;this.m_seconds=fa}K.prototype.getField=function(U){switch(U){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};K.secondsToDMS=function(U){var da=d(U).fraction;U=d(U).integer;var fa=Math.floor(U/3600);U-=3600*fa;var ia=Math.floor(U/60);return new K(fa,ia,U-60*ia+da)};K.numberToDms=function(U){var da=d(U).fraction;U=d(U).integer;var fa=k.preciseMultiply(d(100*
da).fraction,100);da=d(100*da).integer;return new K(U,da,fa)};K.prototype.format=function(U,da){var fa=p(this.m_seconds,da),ia=this.m_minutes,la=this.m_degrees;if(2===U||8===U)60<=fa&&(fa-=60,++ia),60<=ia&&(ia=0,++la),360<=la&&(la=0);else if(7===U)fa=0,ia=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,la=this.m_degrees,60<=ia&&(ia=0,++la),360<=la&&(la=0);else if(1===U||6===U)fa=k.preciseDivide(this.m_seconds,3600),ia=k.preciseDivide(this.m_minutes,60),la=Math.round(this.m_degrees+ia+fa),fa=ia=
0;return new K(la,ia,fa)};K.dmsToSeconds=function(U,da,fa){return 3600*U+60*da+fa};return K}(),L=function(){function K(U,da,fa){this.meridian=U;this.angle=da;this.direction=fa}K.prototype.fetchAzimuth=function(U){return U===S.meridian?this.meridian:this.direction};return K}(),P=function(){function K(U){this.m_angle=U}K.createFromAngleAndDirection=function(U,da){return new K(new X(K._convertDirectionFormat(U.extractAngularUnits(2),da,1)))};K.prototype.getAngle=function(U){var da=this.m_angle.extractAngularUnits(2);
switch(U){case 1:case 4:case 2:return U=new X(K._convertDirectionFormat(da,1,U));case 3:return U=K.secondsNorthAzimuthToQuadrant(da),U=new X(U.angle)}};K.prototype.getMeridian=function(U){var da=this.m_angle.extractAngularUnits(2);switch(U){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return K.secondsNorthAzimuthToQuadrant(da).meridian}};K.prototype.getDirection=function(U){var da=this.m_angle.extractAngularUnits(2);switch(U){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return K.secondsNorthAzimuthToQuadrant(da).direction}};
K.secondsNorthAzimuthToQuadrant=function(U){var da=324E3>=U||972E3<=U?0:2;return new L(da,0===da?Math.min(1296E3-U,U):Math.abs(U-648E3),648E3<U?3:1)};K.createFromAngleMeridianAndDirection=function(U,da,fa){return new K(new X(K.secondsQuadrantToNorthAzimuth(U.extractAngularUnits(2),da,fa)))};K.secondsQuadrantToNorthAzimuth=function(U,da,fa){return 0===da?1===fa?U:1296E3-U:1===fa?648E3-U:648E3+U};K._convertDirectionFormat=function(U,da,fa){var ia=0;switch(da){case 1:ia=U;break;case 2:ia=324E3-U;break;
case 3:throw Error("Unnexpected evaluation");case 4:ia=U+648E3}U=0;switch(fa){case 1:U=ia;break;case 2:U=324E3-ia;break;case 3:throw Error("Unnexpected evaluation");case 4:U=ia-648E3}U%=1296E3;return 0>U?1296E3+U:U};return K}(),X=function(){function K(U){this.m_seconds=U}K.createFromAngleAndUnits=function(U,da){return new K(v(U,da,2))};K.prototype.extractAngularUnits=function(U){return v(this.m_seconds,2,x(U))};K.createFromDegreesMinutesSeconds=function(U,da,fa){return new K(k.preciseAdd(k.preciseAdd(k.preciseMultiply(U,
3600),k.preciseMultiply(da,60)),fa))};return K}(),Q=function(){function K(U,da,fa,ia){this.m_view=U;this.m_angle=da;this.m_merdian=fa;this.m_direction=ia;this.m_formatted_dms=this.m_dms=null}K.createFromStringAndBearing=function(U,da,fa){return new K(U,da.getAngle(fa),da.getMeridian(fa),da.getDirection(fa))};K.prototype.fetchAngle=function(){return this.m_angle};K.prototype.fetchMeridian=function(){return this.m_merdian};K.prototype.fetchDirection=function(){return this.m_direction};K.prototype.fetchView=
function(){return this.m_view};K.prototype.fetchDms=function(){null===this.m_dms&&this._calculateDms();return this.m_dms};K.prototype.fetchFormattedDms=function(){null===this.m_formatted_dms&&this._calculateDms();return this.m_formatted_dms};K.prototype._calculateDms=function(){var U=null,da=6,fa=0;for(U=0;U<this.m_view.length;U++){var ia=this.m_view[U];switch(ia){case "m":U=m(this.m_view,U,ia);da=6===da?7:da;U=U.newpos;continue;case "s":U=m(this.m_view,U,ia),da=8,fa=fa<U.rounding?U.rounding:fa,U=
U.newpos}}this.m_dms=O.secondsToDMS(this.m_angle.extractAngularUnits(2));this.m_formatted_dms=O.secondsToDMS(this.m_angle.extractAngularUnits(2)).format(da,fa)};return K}();k.convertDirection=function(K,U,da){if(!(U instanceof a))throw Error("Invalid Parameter");if(!1===U.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===U.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var fa=r(g(U.field("directiontype")));U=q(g(U.field("angletype")));
if(f.isNumber(K)){K=f.toNumber(K);if(3===fa)throw Error("Conversion error");3===U?(K=O.numberToDms(K),U=P.createFromAngleAndDirection(X.createFromDegreesMinutesSeconds(K.m_degrees,K.m_minutes,K.m_seconds),fa)):U=P.createFromAngleAndDirection(X.createFromAngleAndUnits(K,x(U)),fa)}else if(f.isString(K))U=b(c(K),U,fa);else if(f.isArray(K))U=b(K,U,fa);else if(f.isImmutableArray(K))U=b(K.toArray(),U,fa);else throw Error("Conversion Error");if(!(da instanceof a))throw Error("Invalid Parameter");if(!1===
da.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===da.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");fa=r(g(da.field("directiontype")));K=da.hasField("angleType")?q(g(da.field("angletype"))):null;var ia=g(da.field("outputType")).toUpperCase().trim();if(!fa||!ia)throw Error("Conversion error");if(!(K||"TEXT"===ia&&da.hasField("format")))throw Error("Invalid unit");switch(ia){case "VALUE":if(3===fa||3===K)return da=U,U=da.getAngle(fa),
3===fa&&3===K?(K=O.secondsToDMS(U.extractAngularUnits(2)),fa=[e(da.getMeridian(fa),"SHORT"),K.m_degrees,K.m_minutes,K.m_seconds,e(da.getDirection(fa),"SHORT")]):3===K?(K=O.secondsToDMS(U.extractAngularUnits(2)),fa=[K.m_degrees,K.m_minutes,K.m_seconds]):fa=3===fa?[e(da.getMeridian(fa),"SHORT"),U.extractAngularUnits(K),e(da.getDirection(fa),"SHORT")]:[U.extractAngularUnits(K)],fa;da=U;if((U=x(K))&&3!==K)fa=da.getAngle(fa).extractAngularUnits(U);else throw Error("Conversion Error");return fa;case "TEXT":ia=
"";da.hasField("format")&&(ia=f.toString(da.field("format")));if(null===ia||""===ia){da="";switch(K){case 1:da=3===fa?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:da=3===fa?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:da="R.RR";break;case 5:da="GGG.GG"+I;break;default:throw Error("Conversion error");}3===fa&&(da="p "+da+" b");ia=da}da=U;K=ia;var la="",ma=null,ta=null;U=Q.createFromStringAndBearing(K,da,fa);ia={D:1,d:6,m:7,s:8,R:4,G:5};for(ta=0;ta<K.length;ta++){var ua=K[ta];switch(ua){case "[":ma=
K;ua={escaped:"",newpos:ta};for(ta++;ta<ma.length;){var Ca=ma[ta];ta++;if("]"===Ca)break;ua.escaped+=Ca}ua.newpos=ta-1;ma=ua;la+=ma.escaped;ta=ma.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":ma=m(K,ta,ua);ta=da.getAngle(fa);a:{ua=ia[ua];Ca=ma.padding;var xa=ma.rounding,Ba=U,Z=null;switch(ua){case 1:case 4:case 5:Z=h(p(ta.extractAngularUnits(ua),xa),t(ua));ta=l(Z.toFixed(xa),"0",Ca+xa+(0<xa?1:0));break a;case 6:case 7:Z=h(Ba.fetchFormattedDms().getField(ua),t(ua));ta=l(Z.toFixed(xa),
"0",Ca+xa+(0<xa?1:0));break a;case 8:Z=h(p(Ba.fetchDms().getField(ua),xa),t(ua));ta=l(Z.toFixed(xa),"0",Ca+xa+(0<xa?1:0));break a;default:throw Error("Unnexepected evaluation");}}la+=ta;ta=ma.newpos;continue;case "P":case "p":la+=e(U.fetchMeridian(),"p"===ua?"SHORT":"LONG");continue;case "B":case "b":la+=e(U.fetchDirection(),"b"===ua?"SHORT":"LONG");continue;default:la+=ua}}return la;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],
function(D,k){function a(g){for(var p=[],n=0,d=g.length;n<d;n++){var e=g.charCodeAt(n);128>e?p.push(e):2048>e?p.push(192|e>>6,128|e&63):55296>e||57344<=e?p.push(224|e>>12,128|e>>6&63,128|e&63):(n++,e=65536+((e&1023)<<10|g.charCodeAt(n)&1023),p.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|e&63))}return new Uint8Array(p)}Object.defineProperty(k,"__esModule",{value:!0});k.XXH=void 0;var f=function(){function g(p){this.seed=p;this.totallen=0;this.bufs=[];this.init()}g.prototype.init=function(){this.bufs=
[];this.totallen=0;return this};g.prototype.updateFloatArray=function(p){for(var n=[],d=0;d<p.length;d++){var e=p[d];isNaN(e)?n.push("NaN"):Infinity===e?n.push("Infinity"):-Infinity===e?n.push("-Infinity"):0===e?n.push("0"):n.push(e.toString(16))}this.update(a(n.join("")))};g.prototype.updateIntArray=function(p){p=Int32Array.from(p);this.update(new Uint8Array(p.buffer))};g.prototype.updateUint8Array=function(p){this.update(Uint8Array.from(p))};g.prototype.updateWithString=function(p){return this.update(a(p))};
g.prototype.update=function(p){this.bufs.push(p);this.totallen+=p.length;return this};g.prototype.digest=function(){for(var p=new Uint8Array(this.totallen),n=0,d=0,e=this.bufs;d<e.length;d++){var l=e[d];p.set(l,n);n+=l.length}this.init();return this._xxHash32(p,this.seed)};g.prototype._xxHash32=function(p,n){void 0===n&&(n=0);var d=n+374761393&4294967295,e=0;if(16<=p.length){d=[n+2654435761+2246822519&4294967295,n+2246822519&4294967295,n+0&4294967295,n-2654435761&4294967295];var l=p.length-16,h=0;
for(e=0;(e&4294967280)<=l;e+=4){var t=e,r=p[t+0]+(p[t+1]<<8);t=p[t+2]+(p[t+3]<<8);r=d[h]+(2246822519*r+(2246822519*t<<16))&4294967295;r=r<<13|r>>>19;d[h]=2654435761*(r&65535)+(2654435761*(r>>>16)<<16)&4294967295;h=h+1&3}d=(d[0]<<1|d[0]>>>31)+(d[1]<<7|d[1]>>>25)+(d[2]<<12|d[2]>>>20)+(d[3]<<18|d[3]>>>14)&4294967295}d=d+p.length&4294967295;for(h=p.length-4;e<=h;e+=4)t=e,r=p[t+0]+(p[t+1]<<8),t=p[t+2]+(p[t+3]<<8),d=d+(3266489917*r+(3266489917*t<<16))&4294967295,d=d<<17|d>>>15,d=668265263*(d&65535)+(668265263*
(d>>>16)<<16)&4294967295;for(;e<p.length;++e)h=p[e],d+=374761393*h,d=d<<11|d>>>21,d=2654435761*(d&65535)+(2654435761*(d>>>16)<<16)&4294967295;d^=d>>>15;d=(2246822519*(d&65535)&4294967295)+(2246822519*(d>>>16)<<16);d^=d>>>13;d=(3266489917*(d&65535)&4294967295)+(3266489917*(d>>>16)<<16);d^=d>>>16;return 0>d?d+4294967296:d};return g}();k.XXH=f})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b,c,m,u,w,A,C,E,G,F){function I(ha,ea){for(var na=[],N=0;N<ea.arguments.length;N++)na.push(Y(ha,ea.arguments[N]));return na}function M(ha,ea,na){try{return!0===ea.preparsed?na(ha,null,ea.arguments):na(ha,ea,I(ha,ea))}catch(N){throw N;}}function Y(ha,ea){try{switch(ea.type){case "EmptyStatement":return q.voidOperation;case "VariableDeclarator":var na=null===ea.init?null:Y(ha,ea.init);na===q.voidOperation&&(na=null);if("Identifier"!==ea.id.type)throw Error("Can only assign a regular variable");
var N=ea.id.name.toLowerCase();null!==ha.localScope?ha.localScope[N]={value:na,valueset:!0,node:ea.init}:ha.globalScope[N]={value:na,valueset:!0,node:ea.init};return q.voidOperation;case "VariableDeclaration":for(var V=0;V<ea.declarations.length;V++)Y(ha,ea.declarations[V]);return q.voidOperation;case "BlockStatement":a:{var ca=q.voidOperation;for(V=0;V<ea.body.length;V++)if(ca=Y(ha,ea.body[V]),ca instanceof q.ReturnResult||ca===q.breakResult||ca===q.continueResult){var J=ca;break a}J=ca}return J;
case "FunctionDeclaration":var pa=ea.id.name.toLowerCase();ha.globalScope[pa]={valueset:!0,node:null,value:new h(ea,ha)};return q.voidOperation;case "ReturnStatement":if(null===ea.argument)var sa=new q.ReturnResult(q.voidOperation);else{var oa=Y(ha,ea.argument);sa=new q.ReturnResult(oa)}return sa;case "IfStatement":if("AssignmentExpression"===ea.test.type||"UpdateExpression"===ea.test.type)throw Error(v.nodeErrorMessage(ea.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Oa=Y(ha,ea.test);
if(!0===Oa)var Sa=Y(ha,ea.consequent);else if(!1===Oa)Sa=null!==ea.alternate?Y(ha,ea.alternate):q.voidOperation;else throw Error(v.nodeErrorMessage(ea,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return Sa;case "ExpressionStatement":if("AssignmentExpression"===ea.expression.type||"UpdateExpression"===ea.expression.type)var va=Y(ha,ea.expression);else{var Da=Y(ha,ea.expression);va=Da===q.voidOperation?q.voidOperation:new q.ImplicitResult(Da)}return va;case "AssignmentExpression":var ya=Y(ha,ea.right);
V=null;var wa="";if("MemberExpression"===ea.left.type){V=Y(ha,ea.left.object);!0===ea.left.computed?wa=Y(ha,ea.left.property):"Identifier"===ea.left.property.type&&(wa=ea.left.property.name);if(q.isArray(V))if(q.isNumber(wa)){0>wa&&(wa=V.length+wa);if(0>wa||wa>V.length)throw Error("Assignment outside of array bounds");if(wa===V.length&&"\x3d"!==ea.operator)throw Error("Invalid Parameter");V[wa]=S(ya,ea.operator,V[wa],ea)}else throw Error("Invalid Parameter");else if(V instanceof e){if(!1===q.isString(wa))throw Error("Dictionary accessor must be a string");
if(!0===V.hasField(wa))V.setField(wa,S(ya,ea.operator,V.field(wa),ea));else{if("\x3d"!==ea.operator)throw Error("Invalid Parameter");V.setField(wa,S(ya,ea.operator,null,ea))}}else if(q.isFeature(V)){if(!1===q.isString(wa))throw Error("Feature accessor must be a string");if(!0===V.hasField(wa))V.setField(wa,S(ya,ea.operator,V.field(wa),ea));else{if("\x3d"!==ea.operator)throw Error("Invalid Parameter");V.setField(wa,S(ya,ea.operator,null,ea))}}else{if(q.isImmutableArray(V))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var Aa=q.voidOperation}else if(V=ea.left.name.toLowerCase(),null!==ha.localScope&&void 0!==ha.localScope[V])ha.localScope[V]={value:S(ya,ea.operator,ha.localScope[V].value,ea),valueset:!0,node:ea.right},Aa=q.voidOperation;else if(void 0!==ha.globalScope[V])ha.globalScope[V]={value:S(ya,ea.operator,ha.globalScope[V].value,ea),valueset:!0,node:ea.right},Aa=q.voidOperation;else throw Error("Variable not recognised");return Aa;case "UpdateExpression":V=null;wa="";if("MemberExpression"===
ea.argument.type){V=Y(ha,ea.argument.object);!0===ea.argument.computed?wa=Y(ha,ea.argument.property):"Identifier"===ea.argument.property.type&&(wa=ea.argument.property.name);if(q.isArray(V))if(q.isNumber(wa)){0>wa&&(wa=V.length+wa);if(0>wa||wa>=V.length)throw Error("Assignment outside of array bounds");var Ea=q.toNumber(V[wa]);V[wa]="++"===ea.operator?Ea+1:Ea-1}else throw Error("Invalid Parameter");else if(V instanceof e){if(!1===q.isString(wa))throw Error("Dictionary accessor must be a string");
if(!0===V.hasField(wa))Ea=q.toNumber(V.field(wa)),V.setField(wa,"++"===ea.operator?Ea+1:Ea-1);else throw Error("Invalid Parameter");}else if(q.isFeature(V)){if(!1===q.isString(wa))throw Error("Feature accessor must be a string");if(!0===V.hasField(wa))Ea=q.toNumber(V.field(wa)),V.setField(wa,"++"===ea.operator?Ea+1:Ea-1);else throw Error("Invalid Parameter");}else{if(q.isImmutableArray(V))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var Fa=!1===ea.prefix?Ea:"++"===ea.operator?
Ea+1:Ea-1}else{V="Identifier"===ea.argument.type?ea.argument.name.toLowerCase():"";if(!V)throw Error("Invalid identifier");if(null!==ha.localScope&&void 0!==ha.localScope[V])Ea=q.toNumber(ha.localScope[V].value),ha.localScope[V]={value:"++"===ea.operator?Ea+1:Ea-1,valueset:!0,node:ea},Fa=!1===ea.prefix?Ea:"++"===ea.operator?Ea+1:Ea-1;else if(void 0!==ha.globalScope[V])Ea=q.toNumber(ha.globalScope[V].value),ha.globalScope[V]={value:"++"===ea.operator?Ea+1:Ea-1,valueset:!0,node:ea},Fa=!1===ea.prefix?
Ea:"++"===ea.operator?Ea+1:Ea-1;else throw Error("Variable not recognised");}return Fa;case "BreakStatement":return q.breakResult;case "ContinueStatement":return q.continueResult;case "TemplateElement":return ea.value?ea.value.cooked:"";case "TemplateLiteral":var La="",Ja=0;Aa=0;for(V=ea.quasis;Aa<V.length;Aa++)if(wa=V[Aa],La+=wa.value?wa.value.cooked:"",!1===wa.tail){var Na=ea.expressions[Ja]?q.toString(Y(ha,ea.expressions[Ja])):"";La+=Na;Ja++}return La;case "ForStatement":null!==ea.init&&Y(ha,ea.init);
Ja={testResult:!0,lastAction:q.voidOperation};do b:{V=ha;wa=ea;Na=Ja;if(null!==wa.test){Na.testResult=Y(V,wa.test);if(!1===Na.testResult)break b;if(!0!==Na.testResult)throw Error(v.nodeErrorMessage(wa,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Na.lastAction=Y(V,wa.body);Na.lastAction===q.breakResult?Na.testResult=!1:Na.lastAction instanceof q.ReturnResult?Na.testResult=!1:null!==wa.update&&Y(V,wa.update)}while(!0===Ja.testResult);La=Ja.lastAction instanceof q.ReturnResult?Ja.lastAction:q.voidOperation;
return La;case "ForInStatement":return R(ha,ea);case "Identifier":return K(ha,ea);case "MemberExpression":return L(ha,ea);case "Literal":return ea.value;case "CallExpression":return U(ha,ea);case "UnaryExpression":return P(ha,ea);case "BinaryExpression":return X(ha,ea);case "LogicalExpression":return Q(ha,ea);case "ArrayExpression":try{for(V=[],wa=0;wa<ea.elements.length;wa++){var Ha=Y(ha,ea.elements[wa]);if(q.isFunctionParameter(Ha))throw Error(v.nodeErrorMessage(ea,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));
Ha===q.voidOperation?V.push(null):V.push(Ha)}}catch(Qa){throw Qa;}return V;case "ObjectExpression":V={};for(wa=0;wa<ea.properties.length;wa++){var Ma=Y(ha,ea.properties[wa]);if(q.isFunctionParameter(Ma.value))throw Error("Illegal Argument");if(!1===q.isString(Ma.key))throw Error("Illegal Argument");V[Ma.key.toString()]=Ma.value===q.voidOperation?null:Ma.value}var Ka=new e(V);Ka.immutable=!1;return Ka;case "Property":return{key:"Identifier"===ea.key.type?ea.key.name:Y(ha,ea.key),value:Y(ha,ea.value)};
default:throw Error(v.nodeErrorMessage(ea,"RUNTIME","UNREOGNISED"));}}catch(Qa){throw Qa;}}function R(ha,ea){var na=Y(ha,ea.right);"VariableDeclaration"===ea.left.type&&Y(ha,ea.left);var N=null,V="";if("VariableDeclaration"===ea.left.type){var ca=ea.left.declarations[0].id;"Identifier"===ca.type&&(V=ca.name)}else"Identifier"===ea.left.type&&(V=ea.left.name);if(!V)throw Error(v.nodeErrorMessage(ea,"RUNTIME","INVALIDVARIABLE"));V=V.toLowerCase();null!==ha.localScope&&void 0!==ha.localScope[V]&&(N=ha.localScope[V]);
null===N&&void 0!==ha.globalScope[V]&&(N=ha.globalScope[V]);if(null===N)throw Error(v.nodeErrorMessage(ea,"RUNTIME","VARIABLENOTDECLARED"));if(q.isArray(na)||q.isString(na)){na=na.length;for(ca=0;ca<na;ca++){N.value=ca;V=Y(ha,ea.body);if(V===q.breakResult)break;if(V instanceof q.ReturnResult)return V}return q.voidOperation}if(q.isImmutableArray(na)){for(ca=0;ca<na.length();ca++){N.value=ca;V=Y(ha,ea.body);if(V===q.breakResult)break;if(V instanceof q.ReturnResult)return V}return q.voidOperation}if(na instanceof
e||q.isFeature(na))for(na=na.keys(),ca=0;ca<na.length;ca++){N.value=na[ca];V=Y(ha,ea.body);if(V===q.breakResult)break;if(V instanceof q.ReturnResult)return V}else return q.voidOperation}function S(ha,ea,na,N){switch(ea){case "\x3d":return ha===q.voidOperation?null:ha;case "/\x3d":return q.toNumber(na)/q.toNumber(ha);case "*\x3d":return q.toNumber(na)*q.toNumber(ha);case "-\x3d":return q.toNumber(na)-q.toNumber(ha);case "+\x3d":return q.isString(na)||q.isString(ha)?q.toString(na)+q.toString(ha):q.toNumber(na)+
q.toNumber(ha);case "%\x3d":return q.toNumber(na)%q.toNumber(ha);default:throw Error(v.nodeErrorMessage(N,"RUNTIME","OPERATORNOTRECOGNISED"));}}function O(ha,ea,na){ea=ea.toLowerCase();switch(ea){case "hasz":return ha=ha.hasZ,void 0===ha?!1:ha;case "hasm":return ha=ha.hasM,void 0===ha?!1:ha;case "spatialreference":return ea=ha.spatialReference._arcadeCacheId,void 0===ea&&(na=!0,Object.freeze&&Object.isFrozen(ha.spatialReference)&&(na=!1),na&&(Ba++,ea=ha.spatialReference._arcadeCacheId=Ba)),ha=new e({wkt:ha.spatialReference.wkt,
wkid:ha.spatialReference.wkid}),void 0!==ea&&(ha._arcadeCacheId="SPREF"+ea.toString()),ha}switch(ha.type){case "extent":switch(ea){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ha=ha[ea],void 0!==ha?ha:null;case "type":return"Extent"}break;case "polygon":switch(ea){case "rings":return ea=ha.getCacheValue("_arcadeCacheId"),void 0===ea&&(Ba++,ea=Ba,ha.setCacheValue("_arcadeCacheId",ea)),ha=new t(ha.rings,ha.spatialReference,!0===ha.hasZ,!0===
ha.hasM,ea);case "type":return"Polygon"}break;case "point":switch(ea){case "x":case "y":case "z":case "m":return void 0!==ha[ea]?ha[ea]:null;case "type":return"Point"}break;case "polyline":switch(ea){case "paths":return ea=ha.getCacheValue("_arcadeCacheId"),void 0===ea&&(Ba++,ea=Ba,ha.setCacheValue("_arcadeCacheId",ea)),ha=new t(ha.paths,ha.spatialReference,!0===ha.hasZ,!0===ha.hasM,ea);case "type":return"Polyline"}break;case "multipoint":switch(ea){case "points":return ea=ha.getCacheValue("_arcadeCacheId"),
void 0===ea&&(Ba++,ea=Ba,ha.setCacheValue("_arcadeCacheId",ea)),ha=new r(ha.points,ha.spatialReference,!0===ha.hasZ,!0===ha.hasM,ea,1);case "type":return"Multipoint"}}throw Error(v.nodeErrorMessage(na,"RUNTIME","PROPERTYNOTFOUND"));}function L(ha,ea){try{var na=Y(ha,ea.object);if(null===na)throw Error(v.nodeErrorMessage(ea,"RUNTIME","NOTFOUND"));if(!1===ea.computed){if("Identifier"===ea.property.type){if(na instanceof e||q.isFeature(na))return na.field(ea.property.name);if(na instanceof w)return O(na,
ea.property.name,ea)}throw Error(v.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}var N=Y(ha,ea.property);if(na instanceof e||q.isFeature(na)){if(q.isString(N))return na.field(N);throw Error(v.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(na instanceof w){if(q.isString(N))return O(na,N,ea);throw Error(v.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(q.isArray(na)){if(q.isNumber(N)&&isFinite(N)&&Math.floor(N)===N){0>N&&(N=na.length+N);if(N>=na.length||0>N)throw Error(v.nodeErrorMessage(ea,"RUNTIME",
"OUTOFBOUNDS"));return na[N]}throw Error(v.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(q.isString(na)){if(q.isNumber(N)&&isFinite(N)&&Math.floor(N)===N){0>N&&(N=na.length+N);if(N>=na.length||0>N)throw Error(v.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));return na[N]}throw Error(v.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(q.isImmutableArray(na)&&q.isNumber(N)&&isFinite(N)&&Math.floor(N)===N){0>N&&(N=na.length()+N);if(N>=na.length()||0>N)throw Error(v.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));
return na.get(N)}throw Error(v.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}catch(V){throw V;}}function P(ha,ea){try{var na=Y(ha,ea.argument);if(q.isBoolean(na)){if("!"===ea.operator)return!na;if("-"===ea.operator)return-1*q.toNumber(na);if("+"===ea.operator)return 1*q.toNumber(na);if("~"===ea.operator)return~q.toNumber(na);throw Error(v.nodeErrorMessage(ea,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===ea.operator)return~q.toNumber(na);if("-"===ea.operator)return-1*q.toNumber(na);if("+"===ea.operator)return 1*
q.toNumber(na);throw Error(v.nodeErrorMessage(ea,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(N){throw N;}}function X(ha,ea){try{var na=[Y(ha,ea.left),Y(ha,ea.right)],N=na[0],V=na[1];switch(ea.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return q.binaryOperator(q.toNumber(N),q.toNumber(V),ea.operator);case "\x3d\x3d":return q.equalityTest(N,V);case "!\x3d":return!q.equalityTest(N,V);case "\x3c":return q.greaterThanLessThan(N,V,ea.operator);case "\x3e":return q.greaterThanLessThan(N,
V,ea.operator);case "\x3c\x3d":return q.greaterThanLessThan(N,V,ea.operator);case "\x3e\x3d":return q.greaterThanLessThan(N,V,ea.operator);case "+":return q.isString(N)||q.isString(V)?q.toString(N)+q.toString(V):q.toNumber(N)+q.toNumber(V);case "-":return q.toNumber(N)-q.toNumber(V);case "*":return q.toNumber(N)*q.toNumber(V);case "/":return q.toNumber(N)/q.toNumber(V);case "%":return q.toNumber(N)%q.toNumber(V);default:throw Error(v.nodeErrorMessage(ea,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(ca){throw ca;
}}function Q(ha,ea){try{if("AssignmentExpression"===ea.left.type||"UpdateExpression"===ea.left.type)throw Error(v.nodeErrorMessage(ea.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ea.right.type||"UpdateExpression"===ea.right.type)throw Error(v.nodeErrorMessage(ea.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var na=Y(ha,ea.left);if(q.isBoolean(na))switch(ea.operator){case "||":if(!0===na)return na;var N=Y(ha,ea.right);if(q.isBoolean(N))return N;throw Error(v.nodeErrorMessage(ea,
"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===na)return na;N=Y(ha,ea.right);if(q.isBoolean(N))return N;throw Error(v.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));default:throw Error(v.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));}throw Error(v.nodeErrorMessage(ea,"RUNTIME","ONLYBOOLEAN"));}catch(V){throw V;}}function K(ha,ea){try{var na=ea.name.toLowerCase();if(null!==ha.localScope&&void 0!==ha.localScope[na]){var N=ha.localScope[na];if(!0===N.valueset)return N.value;N.value=Y(ha,N.node);N.valueset=
!0;return N.value}if(void 0!==ha.globalScope[na]){N=ha.globalScope[na];if(!0===N.valueset)return N.value;N.value=Y(ha,N.node);N.valueset=!0;return N.value}throw Error(v.nodeErrorMessage(ea,"RUNTIME","VARIABLENOTFOUND"));}catch(V){throw V;}}function U(ha,ea){try{if("Identifier"!==ea.callee.type)throw Error(v.nodeErrorMessage(ea,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==ha.localScope&&void 0!==ha.localScope[ea.callee.name.toLowerCase()]){var na=ha.localScope[ea.callee.name.toLowerCase()];if(na.value instanceof
q.NativeFunction)return na.value.fn(ha,ea);if(na.value instanceof h)return ta(ha,ea,na.value.definition);throw Error(v.nodeErrorMessage(ea,"RUNTIME","NOTAFUNCTION"));}if(void 0!==ha.globalScope[ea.callee.name.toLowerCase()]){na=ha.globalScope[ea.callee.name.toLowerCase()];if(na.value instanceof q.NativeFunction)return na.value.fn(ha,ea);if(na.value instanceof h)return ta(ha,ea,na.value.definition);throw Error(v.nodeErrorMessage(ea,"RUNTIME","NOTAFUNCTION"));}throw Error(v.nodeErrorMessage(ea,"RUNTIME",
"NOTFOUND"));}catch(N){throw N;}}function da(ha){return null==ha?"":q.isArray(ha)||q.isImmutableArray(ha)?"Array":q.isDate(ha)?"Date":q.isString(ha)?"String":q.isBoolean(ha)?"Boolean":q.isNumber(ha)?"Number":ha instanceof d?"Attachment":ha instanceof n?"Portal":ha instanceof e?"Dictionary":q.isFeature(ha)?"Feature":ha instanceof C?"Point":ha instanceof E?"Polygon":ha instanceof G?"Polyline":ha instanceof A?"Multipoint":ha instanceof u?"Extent":q.isFunctionParameter(ha)?"Function":q.isFeatureSet(ha)?
"FeatureSet":q.isFeatureSetCollection(ha)?"FeatureSetCollection":ha===q.voidOperation?"":"number"===typeof ha&&isNaN(ha)?"Number":"Unrecognised Type"}function fa(ha,ea,na,N){try{var V=Y(ha,ea.arguments[na]);if(q.equalityTest(V,N))return Y(ha,ea.arguments[na+1]);var ca=ea.arguments.length-na;return 1===ca?Y(ha,ea.arguments[na]):2===ca?null:3===ca?Y(ha,ea.arguments[na+2]):fa(ha,ea,na+2,N)}catch(J){throw J;}}function ia(ha,ea,na,N){try{if(!0===N)return Y(ha,ea.arguments[na+1]);if(3===ea.arguments.length-
na)return Y(ha,ea.arguments[na+2]);var V=Y(ha,ea.arguments[na+2]);if(!1===q.isBoolean(V))throw Error("WHEN needs boolean test conditions");return ia(ha,ea,na+2,V)}catch(ca){throw ca;}}function la(ha,ea){var na=ha.length,N=Math.floor(na/2);if(0===na)return[];if(1===na)return[ha[0]];var V=la(ha.slice(0,N),ea);na=la(ha.slice(N,na),ea);for(N=[];0<V.length||0<na.length;)if(0<V.length&&0<na.length){var ca=ea(V[0],na[0]);isNaN(ca)&&(ca=0);0>=ca?(N.push(V[0]),V=V.slice(1)):(N.push(na[0]),na=na.slice(1))}else 0<
V.length?(N.push(V[0]),V=V.slice(1)):0<na.length&&(N.push(na[0]),na=na.slice(1));return N}function ma(ha,ea,na){try{var N=ha.body;if(na.length!==ha.params.length)throw Error("Invalid Parameter calls to function.");for(var V=0;V<na.length;V++)ea.localScope[ha.params[V].name.toLowerCase()]={value:na[V],valueset:!0,node:null};var ca=Y(ea,N);if(ca instanceof q.ReturnResult)return ca.value;if(ca===q.breakResult)throw Error("Cannot Break from a Function");if(ca===q.continueResult)throw Error("Cannot Continue from a Function");
return ca instanceof q.ImplicitResult?ca.value:ca}catch(J){throw J;}}function ta(ha,ea,na){return M(ha,ea,function(N,V,ca){N={spatialReference:ha.spatialReference,globalScope:ha.globalScope,depthCounter:ha.depthCounter+1,console:ha.console,lrucache:ha.lrucache,interceptor:ha.interceptor,localScope:{}};if(64<N.depthCounter)throw Error("Exceeded maximum function depth");return ma(na,N,ca)})}function ua(ha){return function(){var ea={spatialReference:ha.context.spatialReference,console:ha.context.console,
lrucache:ha.context.lrucache,interceptor:ha.context.interceptor,localScope:{},depthCounter:ha.context.depthCounter+1,globalScope:ha.context.globalScope};if(64<ea.depthCounter)throw Error("Exceeded maximum function depth");return ma(ha.definition,ea,arguments)}}function Ca(ha){}function xa(ha){for(var ea={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:M,evaluateIdentifier:K,arcadeCustomFunctionHandler:ua},na=0;na<ha.length;na++)ha[na].registerFunctions(ea);for(var N in ea.functions)Z[N]=
{value:new q.NativeFunction(ea.functions[N]),valueset:!0,node:null},qa.prototype[N]=Z[N];for(na=0;na<ea.signatures.length;na++)v.addFunctionDeclaration(ea.signatures[na],"async")}Object.defineProperty(k,"__esModule",{value:!0});k.findFunctionCalls=k.referencesFunction=k.referencesMember=k.validateScript=k.extractExpectedFieldLiterals=k.extractFieldLiterals=k.executeScript=k.extend=k.functionHelper=void 0;var Ba=0,Z={};y.registerFunctions(Z,M);m.registerFunctions(Z,M);b.registerFunctions(Z,M);B.registerFunctions(Z,
M);c.registerFunctions(Z,M);z.registerFunctions(Z,M);Z["typeof"]=function(ha,ea){return M(ha,ea,function(na,N,V){q.pcCheck(V,1,1);na=da(V[0]);if("Unrecognised Type"===na)throw Error("Unrecognised Type");return na})};Z.iif=function(ha,ea){try{q.pcCheck(null===ea.arguments?[]:ea.arguments,3,3);var na=Y(ha,ea.arguments[0]);if(!1===q.isBoolean(na))throw Error("IF Function must have a boolean test condition");var N=Y(ha,ea.arguments[1]),V=Y(ha,ea.arguments[2]);return!0===na?N:V}catch(ca){throw ca;}};Z.decode=
function(ha,ea){try{if(2>ea.arguments.length)throw Error("Missing Parameters");if(2===ea.arguments.length)return Y(ha,ea.arguments[1]);if(0===(ea.arguments.length-1)%2)throw Error("Must have a default value result.");var na=Y(ha,ea.arguments[0]);return fa(ha,ea,1,na)}catch(N){throw N;}};Z.when=function(ha,ea){try{if(3>ea.arguments.length)throw Error("Missing Parameters");if(0===ea.arguments.length%2)throw Error("Must have a default value result.");var na=Y(ha,ea.arguments[0]);if(!1===q.isBoolean(na))throw Error("WHEN needs boolean test conditions");
return ia(ha,ea,0,na)}catch(N){throw N;}};Z.top=function(ha,ea){return M(ha,ea,function(na,N,V){q.pcCheck(V,2,2);if(q.isArray(V[0]))return q.toNumber(V[1])>=V[0].length?V[0].slice(0):V[0].slice(0,q.toNumber(V[1]));if(q.isImmutableArray(V[0]))return q.toNumber(V[1])>=V[0].length()?V[0].slice(0):V[0].slice(0,q.toNumber(V[1]));throw Error("Top cannot accept this parameter type");})};Z.first=function(ha,ea){return M(ha,ea,function(na,N,V){q.pcCheck(V,1,1);return q.isArray(V[0])?0===V[0].length?null:V[0][0]:
q.isImmutableArray(V[0])?0===V[0].length()?null:V[0].get(0):null})};Z.sort=function(ha,ea){return M(ha,ea,function(na,N,V){q.pcCheck(V,1,2);na=V[0];q.isImmutableArray(na)&&(na=na.toArray());if(!1===q.isArray(na))throw Error("Illegal Argument");if(1<V.length){if(!1===q.isFunctionParameter(V[1]))throw Error("Illegal Argument");var ca=ua(V[1]);return na=la(na,function(sa,oa){return ca(sa,oa)})}if(0===na.length)return[];V={};for(N=0;N<na.length;N++){var J=da(na[N]);""!==J&&(V[J]=!0)}if(!0===V.Array||
!0===V.Dictionary||!0===V.Feature||!0===V.Point||!0===V.Polygon||!0===V.Polyline||!0===V.Multipoint||!0===V.Extent||!0===V.Function)return na.slice(0);N=0;J="";for(var pa in V)N++,J=pa;return na=1<N||"String"===J?la(na,function(sa,oa){if(null===sa||void 0===sa||sa===q.voidOperation)return null===oa||void 0===oa||oa===q.voidOperation?0:1;if(null===oa||void 0===oa||oa===q.voidOperation)return-1;var Oa=q.toString(sa),Sa=q.toString(oa);return Oa<Sa?-1:Oa===Sa?0:1}):"Number"===J?la(na,function(sa,oa){return sa-
oa}):"Boolean"===J?la(na,function(sa,oa){return sa===oa?0:oa?-1:1}):"Date"===J?la(na,function(sa,oa){return oa-sa}):na.slice(0)})};for(var ka in Z)Z[ka]={value:new q.NativeFunction(Z[ka]),valueset:!0,node:null};var qa=function(){};qa.prototype=Z;qa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};qa.prototype.pi={value:Math.PI,valueset:!0,node:null};k.functionHelper={fixSpatialReference:q.fixSpatialReference,parseArguments:I,standardFunction:M};k.extend=xa;xa([x]);k.executeScript=
function(ha,ea){var na=ea.spatialReference;if(null===na||void 0===na)na=new F({wkid:102100});var N=ea.vars,V=ea.customfunctions,ca=new qa;N||(N={});V||(V={});var J=new e({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});J.immutable=!1;ca.textformatting={value:J,valueset:!0,node:null};for(var pa in V)ca[pa]={value:new q.NativeFunction(V[pa]),"native":!0,valueset:!0,node:null};for(pa in N)ca[pa]=N[pa]&&"esri.Graphic"===N[pa].declaredClass?{value:l.createFromGraphic(N[pa]),
valueset:!0,node:null}:{value:N[pa],valueset:!0,node:null};na=Y({spatialReference:na,globalScope:ca,localScope:null,console:ea.console?ea.console:Ca,lrucache:ea.lrucache,interceptor:ea.interceptor,depthCounter:1},ha.body[0].body);na instanceof q.ReturnResult&&(na=na.value);na instanceof q.ImplicitResult&&(na=na.value);na===q.voidOperation&&(na=null);if(na===q.breakResult)throw Error("Cannot return BREAK");if(na===q.continueResult)throw Error("Cannot return CONTINUE");if(na instanceof h)throw Error("Cannot return FUNCTION");
if(na instanceof q.NativeFunction)throw Error("Cannot return FUNCTION");return na};k.extractFieldLiterals=function(ha,ea){void 0===ea&&(ea=!1);return v.findFieldLiterals(ha)};k.extractExpectedFieldLiterals=function(ha){return v.findExpectedFieldLiterals(ha)};k.validateScript=function(ha,ea){return v.validateScript(ha,ea,"simple")};k.referencesMember=function(ha,ea){return v.referencesMember(ha,ea)};k.referencesFunction=function(ha,ea){return v.referencesFunction(ha,ea)};k.findFunctionCalls=function(ha){return v.findFunctionCalls(ha)}})},
"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/arcade-parser"],function(D,k,a,f){Object.defineProperty(k,"__esModule",{value:!0});k.referencesFunction=k.referencesMember=k.extractExpectedFieldLiterals=k.validateScript=k.extractFieldLiterals=k.scriptCheck=k.parseScript=void 0;k.parseScript=function(g,p){void 0===p&&(p=[]);var n=f.parse("function _() { "+g+"\n}");if(null===n.body||void 0===n.body)throw Error("No formula provided.");if(0===n.body.length)throw Error("No formula provided.");
if(0===n.body.length)throw Error("No formula provided.");if("BlockStatement"!==n.body[0].body.type)throw Error("Invalid formula content.");var d=a.validateLanguage(n);if(""!==d)throw Error(d);a.findScriptDependencies(n,p);return n};k.scriptCheck=function(g,p,n,d,e){var l=[];g="function _() { \n"+g+"\n}";try{var h=f.parse(g,{tolerant:!0,loc:!0,range:!0}),t=h.errors;if(0<t.length)for(var r=0;r<t.length;r++)l.push({line:t[r].lineNumber-2,character:t[r].column,reason:t[r].description});var q=a.checkScript(h,
p,n,d,e);for(p=0;p<q.length;p++)q[p].line-=2,q[p].range&&(q[p].range=[q[p][0]-15,q[p][1]-15]),q[p].loc&&(q[p].loc.start.line-=2,q[p].loc.end.line-=2),l.push(q[p])}catch(x){try{if("Unexpected token }"===x.description){var v=g.split("\n").length;x.lineNumber===v?(x.index=g.length-1,l.push({line:x.lineNumber-4,character:x.column,reason:"Unexpected end of script"})):(x.index=g.length-1,l.push({line:x.lineNumber-2,character:x.column,reason:"Unexpected end of script"}))}else l.push({line:x.lineNumber-2,
character:x.column,reason:x.description})}catch(y){}}return l};k.extractFieldLiterals=function(g,p){void 0===p&&(p=!1);return a.findFieldLiterals(g)};k.validateScript=function(g,p,n){return a.validateScript(g,p,n)};k.extractExpectedFieldLiterals=function(g){return a.findExpectedFieldLiterals(g)};k.referencesMember=function(g,p){return a.referencesMember(g,p)};k.referencesFunction=function(g,p){return a.referencesFunction(g,p)}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),
function(D,k,a,f,g,p,n,d,e){Object.defineProperty(k,"__esModule",{value:!0});k.version=k.Syntax=k.tokenize=k.parse=void 0;k.parse=function(l,h,t){var r=null,q=function(B,z){t&&t(B,z);r&&r.visit(B,z)},v="function"===typeof t?q:void 0,x=!1;if(h){x="boolean"===typeof h.comment&&h.comment;var y="boolean"===typeof h.attachComment&&h.attachComment;if(x||y)r=new f.CommentHandler,r.attach=y,h.comment=!0,v=q}l=new g.Parser(l,h,v);h=l.parseScript();x&&r&&(h.comments=r.comments);l.config.tokens&&(h.tokens=l.tokens);
l.config.tolerant&&(h.errors=l.errorHandler.errors);return h};k.tokenize=function(l,h,t){l=new p.Tokenizer(l,h);h=[];var r=void 0;try{for(;;){var q=l.getNextToken();if(!q)break;t&&(q=t(q));h.push(q)}}catch(v){l.errorHandler.tolerate(v)}l.errorHandler.tolerant&&(r=l.errors());return{tokens:h,errors:r}};Object.defineProperty(k,"Syntax",{enumerable:!0,get:function(){return n.Syntax}});a(d,k);a(e,k);k.version="4.0.0-dev"})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var D=
this&&this.__createBinding||(Object.create?function(k,a,f,g){void 0===g&&(g=f);Object.defineProperty(k,g,{enumerable:!0,get:function(){return a[f]}})}:function(k,a,f,g){void 0===g&&(g=f);k[g]=a[f]});return function(k,a){for(var f in k)"default"===f||Object.prototype.hasOwnProperty.call(a,f)||D(a,k,f)}}()})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.CommentHandler=void 0;D=function(){function f(){this.attach=
!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}f.prototype.insertInnerComments=function(g,p){if(g.type===a.Syntax.BlockStatement&&0===g.body.length){for(var n=[],d=this.leading.length-1;0<=d;--d){var e=this.leading[d];p.end.offset>=e.start&&(n.unshift(e.comment),this.leading.splice(d,1),this.trailing.splice(d,1))}n.length&&(g.innerComments=n)}};f.prototype.findTrailingComments=function(g){var p=[];if(0<this.trailing.length){for(var n=this.trailing.length-1;0<=n;--n){var d=this.trailing[n];
d.start>=g.end.offset&&p.unshift(d.comment)}this.trailing.length=0;return p}(n=this.stack[this.stack.length-1])&&n.node.trailingComments&&(d=n.node.trailingComments[0])&&d.range[0]>=g.end.offset&&(p=n.node.trailingComments,delete n.node.trailingComments);return p};f.prototype.findLeadingComments=function(g){for(var p=[],n;0<this.stack.length;){var d=this.stack[this.stack.length-1];if(d&&d.start>=g.start.offset)n=d.node,this.stack.pop();else break}if(n){for(var e=(n.leadingComments?n.leadingComments.length:
0)-1;0<=e;--e)d=n.leadingComments[e],d.range[1]<=g.start.offset&&(p.unshift(d),n.leadingComments.splice(e,1));n.leadingComments&&0===n.leadingComments.length&&delete n.leadingComments;return p}for(e=this.leading.length-1;0<=e;--e)d=this.leading[e],d.start<=g.start.offset&&(p.unshift(d.comment),this.leading.splice(e,1));return p};f.prototype.visitNode=function(g,p){if(!(g.type===a.Syntax.Program&&0<g.body.length)){this.insertInnerComments(g,p);var n=this.findTrailingComments(p),d=this.findLeadingComments(p);
0<d.length&&(g.leadingComments=d);0<n.length&&(g.trailingComments=n);this.stack.push({node:g,start:p.start.offset})}};f.prototype.visitComment=function(g,p){this.comments.push(g);if(this.attach){var n={comment:{type:g.type,value:g.value,range:[p.start.offset,p.end.offset]},start:p.start.offset};g.loc&&(n.comment.loc=g.loc);this.leading.push(n);this.trailing.push(n)}};f.prototype.visit=function(g,p){"Line"===g.type||"Block"===g.type?this.visitComment(g,p):this.attach&&this.visitNode(g,p)};return f}();
k.CommentHandler=D})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.Syntax=void 0;k.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",
ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",
VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(D,k,a,f,g,p,n,d,e,l,h,t){Object.defineProperty(k,"__esModule",{value:!0});k.Parser=void 0;D=function(){function r(q,v,x){void 0===v&&(v={});this.config={range:"boolean"===
typeof v.range&&v.range,loc:"boolean"===typeof v.loc&&v.loc,source:null,tokens:"boolean"===typeof v.tokens&&v.tokens,comment:"boolean"===typeof v.comment&&v.comment,tolerant:"boolean"===typeof v.tolerant&&v.tolerant,globalReturn:!!v.globalReturn};this.config.loc&&v.source&&null!==v.source&&(this.config.source=String(v.source));this.delegate=x;this.errorHandler=new n.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new l.Scanner(q,this.errorHandler);this.scanner.trackComment=
this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:t.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,
isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}r.prototype.tolerateError=function(q){for(var v=[],x=1;x<arguments.length;x++)v[x-1]=arguments[x];var y=v.slice();v=q.replace(/%(\d)/g,function(B,
z){p.assert(z<y.length,"Message reference must be in range");return y[z]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,v)};r.prototype.unexpectedTokenError=function(q,v){var x=v||d.Messages.UnexpectedToken;if(q){v||(x=q.type===t.TokenType.EOF?d.Messages.UnexpectedEOS:q.type===t.TokenType.Identifier?d.Messages.UnexpectedIdentifier:q.type===t.TokenType.NumericLiteral?d.Messages.UnexpectedNumber:q.type===t.TokenType.StringLiteral?d.Messages.UnexpectedString:
q.type===t.TokenType.Template?d.Messages.UnexpectedTemplate:d.Messages.UnexpectedToken);var y=q.value.toString()}else y="ILLEGAL";x=x.replace("%0",y);return q&&"number"===typeof q.lineNumber?this.errorHandler.createError(q.start,q.lineNumber,q.start-(this.lastMarker.index-this.lastMarker.column)+1,x):this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,x)};r.prototype.throwUnexpectedToken=function(q,v){throw this.unexpectedTokenError(q,v);};r.prototype.tolerateUnexpectedToken=
function(q,v){this.errorHandler.tolerate(this.unexpectedTokenError(q,v))};r.prototype.collectComments=function(){if(this.config.comment){var q=this.scanner.scanComments();if(q&&0<q.length&&this.delegate)for(var v=0;v<q.length;++v){var x=q[v],y=new e.Comment(x.multiLine?"Block":"Line",this.scanner.source.slice(x.slice[0],x.slice[1]));this.config.range&&(y.range=x.range);this.config.loc&&(y.loc=x.loc);this.delegate(y,{start:{line:x.loc.start.line,column:x.loc.start.column,offset:x.range[0]},end:{line:x.loc.end.line,
column:x.loc.end.column,offset:x.range[1]}})}}else this.scanner.scanComments()};r.prototype.peekAhead=function(q){var v=this,x=this.scanner.saveState();q.call(this,function(){v.scanner.scanComments();return v.scanner.lex()});this.scanner.restoreState(x)};r.prototype.getTokenRaw=function(q){return this.scanner.source.slice(q.start,q.end)};r.prototype.convertToken=function(q){var v={type:t.TokenName[q.type],value:this.getTokenRaw(q)};this.config.range&&(v.range=[q.start,q.end]);this.config.loc&&(v.loc=
{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});q.type===t.TokenType.RegularExpression&&(v.regex={pattern:q.pattern,flags:q.flags});return v};r.prototype.nextToken=function(){var q=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&
(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var v=this.scanner.lex();this.hasLineTerminator=q.lineNumber!==v.lineNumber;this.lookahead=v;this.config.tokens&&v.type!==t.TokenType.EOF&&this.tokens.push(this.convertToken(v));return q};r.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};r.prototype.startNode=function(q,
v){void 0===v&&(v=0);var x=q.start-q.lineStart,y=q.lineNumber;0>x&&(x+=v,y--);return{index:q.start,line:y,column:x}};r.prototype.finalize=function(q,v){this.config.range&&(v.range=[q.index,this.lastMarker.index]);this.config.loc&&(v.loc={start:{line:q.line,column:q.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(v.loc.source=this.config.source));this.delegate&&this.delegate(v,{start:{line:q.line,column:q.column,offset:q.index},end:{line:this.lastMarker.line,
column:this.lastMarker.column,offset:this.lastMarker.index}});return v};r.prototype.expect=function(q){var v=this.nextToken();v.type===t.TokenType.Punctuator&&v.value===q||this.throwUnexpectedToken(v)};r.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var q=this.lookahead;q.type===t.TokenType.Punctuator&&","===q.value?this.nextToken():q.type===t.TokenType.Punctuator&&";"===q.value?(this.nextToken(),this.tolerateUnexpectedToken(q)):this.tolerateUnexpectedToken(q,d.Messages.UnexpectedToken)}else this.expect(",")};
r.prototype.expectKeyword=function(q){var v=this.nextToken();v.type===t.TokenType.Keyword&&v.value.toString().toLowerCase()===q.toLowerCase()||this.throwUnexpectedToken(v)};r.prototype.match=function(q){return this.lookahead.type===t.TokenType.Punctuator&&this.lookahead.value===q};r.prototype.matchKeyword=function(q){return this.lookahead.type===t.TokenType.Keyword&&this.lookahead.value.toLowerCase()===q.toLowerCase()};r.prototype.matchContextualKeyword=function(q){return this.lookahead.type===t.TokenType.Identifier&&
this.lookahead.value===q};r.prototype.matchAssign=function(){return this.lookahead.type!==t.TokenType.Punctuator?!1:e.AssignmentOperators.includes(this.lookahead.value)};r.prototype.isolateCoverGrammar=function(q){var v=this.context.isBindingElement,x=this.context.isAssignmentTarget,y=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;q=q.call(this);null!==this.context.firstCoverInitializedNameError&&
this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=v;this.context.isAssignmentTarget=x;this.context.firstCoverInitializedNameError=y;return q};r.prototype.inheritCoverGrammar=function(q){var v=this.context.isBindingElement,x=this.context.isAssignmentTarget,y=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;q=q.call(this);this.context.isBindingElement=
this.context.isBindingElement&&v;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&x;this.context.firstCoverInitializedNameError=y||this.context.firstCoverInitializedNameError;return q};r.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===t.TokenType.EOF||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=
this.startMarker.column)};r.prototype.parsePrimaryExpression=function(){var q=this.createNode();switch(this.lookahead.type){case t.TokenType.Identifier:q=this.finalize(q,new e.Identifier(this.nextToken().value));break;case t.TokenType.NumericLiteral:case t.TokenType.StringLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var v=this.nextToken();var x=this.getTokenRaw(v);q=this.finalize(q,new e.Literal(v.value,x));break;case t.TokenType.BooleanLiteral:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;v=this.nextToken();x=this.getTokenRaw(v);q=this.finalize(q,new e.Literal("true"===v.value.toString().toLowerCase(),x));break;case t.TokenType.NullLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;v=this.nextToken();x=this.getTokenRaw(v);q=this.finalize(q,new e.Literal(null,x));break;case t.TokenType.Template:q=this.parseTemplateLiteral();break;case t.TokenType.Punctuator:switch(this.lookahead.value){case "(":this.context.isBindingElement=
!1;q=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":q=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":q=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:q=this.throwUnexpectedToken(this.nextToken())}break;case t.TokenType.Keyword:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;q=this.throwUnexpectedToken(this.nextToken());break;default:q=this.throwUnexpectedToken(this.nextToken())}return q};r.prototype.parseArrayInitializer=
function(){var q=this.createNode(),v=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),v.push(null)):(v.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(q,new e.ArrayExpression(v))};r.prototype.parseObjectPropertyKey=function(){var q=this.createNode(),v=this.nextToken();switch(v.type){case t.TokenType.StringLiteral:case t.TokenType.NumericLiteral:q=this.finalize(q,new e.Literal(v.value,
this.getTokenRaw(v)));break;case t.TokenType.Identifier:case t.TokenType.BooleanLiteral:case t.TokenType.NullLiteral:case t.TokenType.Keyword:q=this.finalize(q,new e.Identifier(v.value));break;default:q=this.throwUnexpectedToken(v)}return q};r.prototype.parseObjectProperty=function(){var q=this.createNode(),v=this.lookahead,x=!1,y=!1,B=null;if(v.type===t.TokenType.Identifier){var z=v.value;this.nextToken();x=this.match("[");B=this.finalize(q,new e.Identifier(z))}else this.match("*")?this.nextToken():
(x=this.match("["),B=this.parseObjectPropertyKey());B||this.throwUnexpectedToken(this.lookahead);z=null;this.match(":")?(this.nextToken(),z=this.inheritCoverGrammar(this.parseAssignmentExpression)):v.type===t.TokenType.Identifier?(z=this.finalize(q,new e.Identifier(v.value)),y=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(q,new e.Property("init",B,x,z,!1,y))};r.prototype.parseObjectInitializer=function(){var q=this.createNode();this.expect("{");for(var v=[];!this.match("}");)v.push(this.parseObjectProperty()),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(q,new e.ObjectExpression(v))};r.prototype.parseTemplateHead=function(){p.assert(this.lookahead.head,"Template literal must start with a template head");var q=this.createNode(),v=this.nextToken();return this.finalize(q,new e.TemplateElement({raw:v.value,cooked:v.cooked},v.tail))};r.prototype.parseTemplateElement=function(){this.lookahead.type!==t.TokenType.Template&&this.throwUnexpectedToken();var q=this.createNode(),
v=this.nextToken();return this.finalize(q,new e.TemplateElement({raw:v.value,cooked:v.cooked},v.tail))};r.prototype.parseTemplateLiteral=function(){var q=this.createNode(),v=[],x=[],y=this.parseTemplateHead();for(x.push(y);!y.tail;)v.push(this.parseExpression()),y=this.parseTemplateElement(),x.push(y);return this.finalize(q,new e.TemplateLiteral(x,v))};r.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var q=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.expect(")");this.context.isBindingElement=!1;return q};r.prototype.parseArguments=function(){this.expect("(");var q=[];if(!this.match(")"))for(;;){var v=this.isolateCoverGrammar(this.parseAssignmentExpression);q.push(v);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return q};r.prototype.isIdentifierName=function(q){return q.type===t.TokenType.Identifier||q.type===t.TokenType.Keyword||q.type===t.TokenType.BooleanLiteral||q.type===t.TokenType.NullLiteral};
r.prototype.parseIdentifierName=function(){var q=this.createNode(),v=this.nextToken();this.isIdentifierName(v)||this.throwUnexpectedToken(v);return this.finalize(q,new e.Identifier(v.value))};r.prototype.parseLeftHandSideExpressionAllowCall=function(){var q=this.lookahead,v=this.context.allowIn;this.context.allowIn=!0;for(var x=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!1;var y=this.parseArguments();
x=this.finalize(this.startNode(q),new e.CallExpression(x,y))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),y=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),x=this.finalize(this.startNode(q),new e.ComputedMemberExpression(x,y));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),y=this.parseIdentifierName(),x=this.finalize(this.startNode(q),new e.StaticMemberExpression(x,
y));else break;this.context.allowIn=v;return x};r.prototype.parseLeftHandSideExpression=function(){p.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var q=this.startNode(this.lookahead),v=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var x=this.isolateCoverGrammar(this.parseExpression);this.expect("]");v=this.finalize(q,new e.ComputedMemberExpression(v,
x))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),x=this.parseIdentifierName(),v=this.finalize(q,new e.StaticMemberExpression(v,x));else break;return v};r.prototype.parseUpdateExpression=function(){var q=this.lookahead;if(this.match("++")||this.match("--")){q=this.startNode(q);var v=this.nextToken();var x=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment);
x=this.finalize(q,new e.UpdateExpression(v.value,x,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else x=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||this.lookahead.type!==t.TokenType.Punctuator||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,v=this.nextToken().value,x=this.finalize(this.startNode(q),
new e.UpdateExpression(v,x,!1)));return x};r.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var q=this.startNode(this.lookahead),v=this.nextToken();var x=this.inheritCoverGrammar(this.parseUnaryExpression);x=this.finalize(q,new e.UnaryExpression(v.value,x));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else x=this.parseUpdateExpression();return x};r.prototype.binaryPrecedence=function(q){var v=q.value;return q.type===
t.TokenType.Punctuator?this.operatorPrecedence[v]||0:q.type===t.TokenType.Keyword?this.context.allowIn&&"in"===v?12:0:0};r.prototype.parseBinaryExpression=function(){var q=this.lookahead,v=this.inheritCoverGrammar(this.parseUnaryExpression),x=this.lookahead,y=this.binaryPrecedence(x);if(0<y){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;q=[q,this.lookahead];var B=this.inheritCoverGrammar(this.parseUnaryExpression);x=[v,x.value,B];for(var z=[y];;){y=this.binaryPrecedence(this.lookahead);
if(0>=y)break;for(;2<x.length&&y<=z[z.length-1];){B=x.pop();var b=x.pop();z.pop();v=x.pop();q.pop();var c=q[q.length-1],m=this.startNode(c,c.lineStart);x.push(this.finalize(m,new e.BinaryExpression(b,v,B)))}x.push(this.nextToken().value);z.push(y);q.push(this.lookahead);x.push(this.inheritCoverGrammar(this.parseUnaryExpression))}y=x.length-1;v=x[y];for(b=q.pop();1<y;){c=q.pop();if(!c)break;m=this.startNode(c,b&&b.lineStart);b=x[y-1];v=this.finalize(m,new e.BinaryExpression(b,x[y-2],v));y-=2;b=c}}return v};
r.prototype.parseAssignmentExpression=function(){var q=this.lookahead,v=q,x=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);v=this.nextToken();v=v.value;var y=this.isolateCoverGrammar(this.parseAssignmentExpression);x=this.finalize(this.startNode(q),new e.AssignmentExpression(v,x,y));this.context.firstCoverInitializedNameError=
null}return x};r.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};r.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(this.lookahead.type===t.TokenType.Keyword)switch(this.lookahead.value){case "function":var q=this.parseFunctionDeclaration();break;default:q=this.parseStatement()}else q=this.parseStatement();return q};r.prototype.parseBlock=function(){var q=this.createNode();this.expect("{");
for(var v=[];!this.match("}");)v.push(this.parseStatementListItem());this.expect("}");return this.finalize(q,new e.BlockStatement(v))};r.prototype.parseObjectStatement=function(){var q=this.createNode(),v=this.parseObjectInitializer();return this.finalize(q,new e.ExpressionStatement(v))};r.prototype.parseBlockOrObjectStatement=function(){var q="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(v){var x=v();if(x.type===t.TokenType.Identifier||
x.type===t.TokenType.StringLiteral)x=v(),x.type===t.TokenType.Punctuator&&":"===x.value&&(q=!0)});return q?this.parseObjectStatement():this.parseBlock()};r.prototype.parseVariableIdentifier=function(){var q=this.createNode(),v=this.nextToken();v.type!==t.TokenType.Identifier&&this.throwUnexpectedToken(v,d.Messages.IdentiferExpected);return this.finalize(q,new e.Identifier(v.value))};r.prototype.parseVariableDeclaration=function(q){var v=this.createNode(),x=this.parseVariableIdentifier(),y=null;this.match("\x3d")?
(this.nextToken(),y=this.isolateCoverGrammar(this.parseAssignmentExpression)):x.type===h.Syntax.Identifier||q.inFor||this.expect("\x3d");return this.finalize(v,new e.VariableDeclarator(x,y))};r.prototype.parseVariableDeclarationList=function(q){for(var v=[this.parseVariableDeclaration(q)];this.match(",");)this.nextToken(),v.push(this.parseVariableDeclaration(q));return v};r.prototype.parseVariableStatement=function(){var q=this.createNode();this.expectKeyword("var");var v=this.parseVariableDeclarationList({inFor:!1});
this.consumeSemicolon();return this.finalize(q,new e.VariableDeclaration(v,"var"))};r.prototype.parseEmptyStatement=function(){var q=this.createNode();this.expect(";");return this.finalize(q,new e.EmptyStatement)};r.prototype.parseExpressionStatement=function(){var q=this.createNode(),v=this.parseExpression();this.consumeSemicolon();return this.finalize(q,new e.ExpressionStatement(v))};r.prototype.parseIfClause=function(){var q=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";
var v=this.parseStatement();this.context.curlyParsing=q;return v};r.prototype.parseIfStatement=function(){var q=this.createNode(),v=null;this.expectKeyword("if");this.expect("(");var x=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var y=this.finalize(this.createNode(),new e.EmptyStatement)}else this.expect(")"),y=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),v=this.parseIfClause());return this.finalize(q,new e.IfStatement(x,
y,v))};r.prototype.parseForStatement=function(){var q=null,v=null,x=null,y=null,B=null,z=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var b=this.createNode();this.nextToken();var c=this.context.allowIn;this.context.allowIn=!1;var m=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=c;1===m.length&&this.matchKeyword("in")?(m[0].init&&this.tolerateError(d.Messages.ForInOfLoopInitializer,"for-in"),y=
this.finalize(b,new e.VariableDeclaration(m,"var")),this.nextToken(),B=this.parseExpression()):(q=this.finalize(b,new e.VariableDeclaration(m,"var")),this.expect(";"))}else{b=this.context.isBindingElement;m=this.context.isAssignmentTarget;var u=this.context.firstCoverInitializedNameError;c=this.context.allowIn;this.context.allowIn=!1;q=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=c;this.matchKeyword("in")?(this.context.isAssignmentTarget&&q.type!==h.Syntax.AssignmentExpression||
this.tolerateError(d.Messages.InvalidLHSInForIn),this.nextToken(),y=q,B=this.parseExpression(),q=null):(this.context.isBindingElement=b,this.context.isAssignmentTarget=m,this.context.firstCoverInitializedNameError=u,this.expect(";"))}y||(this.match(";")||(v=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(x=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),c=this.finalize(this.createNode(),
new e.EmptyStatement)):(this.expect(")"),b=this.context.inIteration,m=this.context.curlyParsing,this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",c=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=m,this.context.inIteration=b);return y&&B?this.finalize(z,new e.ForInStatement(y,B,c)):this.finalize(z,new e.ForStatement(q,v,x,c))};r.prototype.parseContinueStatement=function(){var q=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(q,
new e.ContinueStatement)};r.prototype.parseBreakStatement=function(){var q=this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(q,new e.BreakStatement)};r.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(d.Messages.IllegalReturn);var q=this.createNode();this.expectKeyword("return");var v=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===t.TokenType.EOF)&&this.lookahead.type!==
t.TokenType.StringLiteral&&this.lookahead.type!==t.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize(q,new e.ReturnStatement(v))};r.prototype.parseStatement=function(){switch(this.lookahead.type){case t.TokenType.BooleanLiteral:case t.TokenType.NullLiteral:case t.TokenType.NumericLiteral:case t.TokenType.StringLiteral:case t.TokenType.Template:case t.TokenType.Identifier:var q=this.parseExpressionStatement();break;case t.TokenType.Punctuator:q=this.lookahead.value;
q="{"===q?this.parseBlockOrObjectStatement():"("===q?this.parseExpressionStatement():";"===q?this.parseEmptyStatement():this.parseExpressionStatement();break;case t.TokenType.Keyword:switch(this.lookahead.value.toLowerCase()){case "break":q=this.parseBreakStatement();break;case "continue":q=this.parseContinueStatement();break;case "for":q=this.parseForStatement();break;case "function":q=this.parseFunctionDeclaration();break;case "if":q=this.parseIfStatement();break;case "return":q=this.parseReturnStatement();
break;case "var":q=this.parseVariableStatement();break;default:q=this.parseExpressionStatement()}break;default:q=this.throwUnexpectedToken(this.lookahead)}return q};r.prototype.parseFunctionSourceElements=function(){var q=this.createNode();this.expect("{");var v=this.context.inIteration,x=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var y=[];this.lookahead.type!==t.TokenType.EOF&&!this.match("}");)y.push(this.parseStatementListItem());this.expect("}");
this.context.inIteration=v;this.context.inFunctionBody=x;return this.finalize(q,new e.BlockStatement(y))};r.prototype.parseFormalParameters=function(){var q=[];this.expect("(");if(!this.match(")"))for(;this.lookahead.type!==t.TokenType.EOF;){q.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return q};r.prototype.parseFunctionDeclaration=function(){var q=this.createNode();this.expectKeyword("function");var v=this.parseVariableIdentifier(),
x=this.parseFormalParameters(),y=this.parseFunctionSourceElements();return this.finalize(q,new e.FunctionDeclaration(v,x,y))};r.prototype.parseScript=function(){for(var q=this.createNode(),v=[];this.lookahead.type!==t.TokenType.EOF;)v.push(this.parseStatementListItem());return this.finalize(q,new e.Program(v))};return r}();k.Parser=D})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.assert=void 0;k.assert=function(a,
f){if(!a)throw Error("ASSERT: "+f);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.ErrorHandler=void 0;var a=function(){function f(){this.errors=[];this.tolerant=!1}f.prototype.recordError=function(g){this.errors.push(g)};f.prototype.tolerate=function(g){if(this.tolerant)this.recordError(g);else throw g;};f.prototype.constructError=function(g,p){var n=Error(g);try{throw n;}catch(d){Object.create&&Object.defineProperty&&
(n=Object.create(d),Object.defineProperty(n,"column",{value:p}))}return n};f.prototype.createError=function(g,p,n,d){n=this.constructError("Line "+p+": "+d,n);n.index=g;n.lineNumber=p;n.description=d;return n};f.prototype.throwError=function(g,p,n,d){throw this.createError(g,p,n,d);};f.prototype.tolerateError=function(g,p,n,d){g=this.createError(g,p,n,d);if(this.tolerant)this.recordError(g);else throw g;};return f}();k.ErrorHandler=a})},"esri/arcade/lib/messages":function(){define(["require","exports"],
function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.Messages=void 0;k.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",
InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",
UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},"esri/arcade/lib/nodes":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/extends ./syntax".split(" "),
function(D,k,a,f,g,p){Object.defineProperty(k,"__esModule",{value:!0});k.VariableDeclarator=k.VariableDeclaration=k.UpdateExpression=k.UpdateOperators=k.UnaryExpression=k.UnaryOperators=k.TemplateLiteral=k.TemplateElement=k.Program=k.ReturnStatement=k.Property=k.ObjectExpression=k.Literal=k.IfStatement=k.Identifier=k.FunctionDeclaration=k.ForStatement=k.ForInStatement=k.ExpressionStatement=k.EmptyStatement=k.ContinueStatement=k.StaticMemberExpression=k.ComputedMemberExpression=k.CallExpression=k.BreakStatement=
k.BlockStatement=k.BinaryExpression=k.BinaryOperators=k.LogicalOperators=k.AssignmentExpression=k.AssignmentOperators=k.ArrayExpression=k.Comment=void 0;D=function(){return function(){}}();a=function(n){function d(e,l){var h=n.call(this)||this;h.type=e;h.value=l;return h}g(d,n);return d}(D);k.Comment=a;a=function(n){function d(e){var l=n.call(this)||this;l.elements=e;l.type=p.Syntax.ArrayExpression;return l}g(d,n);return d}(D);k.ArrayExpression=a;k.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");
a=function(n){function d(e,l,h){var t=n.call(this)||this;t.operator=e;t.left=l;t.right=h;t.type=p.Syntax.AssignmentExpression;return t}g(d,n);return d}(D);k.AssignmentExpression=a;k.LogicalOperators=["||","\x26\x26"];k.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");a=function(n){function d(e,l,h){var t=n.call(this)||this;t.operator=e;t.left=l;t.right=h;t.type=k.LogicalOperators.includes(e)?p.Syntax.LogicalExpression:
p.Syntax.BinaryExpression;return t}g(d,n);return d}(D);k.BinaryExpression=a;a=function(n){function d(e){var l=n.call(this)||this;l.body=e;l.type=p.Syntax.BlockStatement;return l}g(d,n);return d}(D);k.BlockStatement=a;a=function(n){function d(){var e=null!==n&&n.apply(this,arguments)||this;e.type=p.Syntax.BreakStatement;return e}g(d,n);return d}(D);k.BreakStatement=a;a=function(n){function d(e,l){var h=n.call(this)||this;h.callee=e;h.args=l;h.type=p.Syntax.CallExpression;h.arguments=l;return h}g(d,
n);return d}(D);k.CallExpression=a;a=function(n){function d(e,l){var h=n.call(this)||this;h.object=e;h.property=l;h.type=p.Syntax.MemberExpression;h.computed=!0;return h}g(d,n);return d}(D);k.ComputedMemberExpression=a;a=function(n){function d(e,l){var h=n.call(this)||this;h.object=e;h.property=l;h.type=p.Syntax.MemberExpression;h.computed=!1;return h}g(d,n);return d}(D);k.StaticMemberExpression=a;a=function(n){function d(){var e=null!==n&&n.apply(this,arguments)||this;e.type=p.Syntax.ContinueStatement;
return e}g(d,n);return d}(D);k.ContinueStatement=a;a=function(n){function d(){var e=null!==n&&n.apply(this,arguments)||this;e.type=p.Syntax.EmptyStatement;return e}g(d,n);return d}(D);k.EmptyStatement=a;a=function(n){function d(e){var l=n.call(this)||this;l.expression=e;l.type=p.Syntax.ExpressionStatement;return l}g(d,n);return d}(D);k.ExpressionStatement=a;a=function(n){function d(e,l,h){var t=n.call(this)||this;t.left=e;t.right=l;t.body=h;t.type=p.Syntax.ForInStatement;t.each=!1;return t}g(d,n);
return d}(D);k.ForInStatement=a;a=function(n){function d(e,l,h,t){var r=n.call(this)||this;r.init=e;r.test=l;r.update=h;r.body=t;r.type=p.Syntax.ForStatement;return r}g(d,n);return d}(D);k.ForStatement=a;a=function(n){function d(e,l,h){var t=n.call(this)||this;t.id=e;t.params=l;t.body=h;t.type=p.Syntax.FunctionDeclaration;t.generator=!1;t.expression=!1;t.async=!1;return t}g(d,n);return d}(D);k.FunctionDeclaration=a;a=function(n){function d(e){var l=n.call(this)||this;l.name=e;l.type=p.Syntax.Identifier;
return l}g(d,n);return d}(D);k.Identifier=a;a=function(n){function d(e,l,h){var t=n.call(this)||this;t.test=e;t.consequent=l;t.alternate=h;t.type=p.Syntax.IfStatement;return t}g(d,n);return d}(D);k.IfStatement=a;a=function(n){function d(e,l){var h=n.call(this)||this;h.value=e;h.raw=l;h.type=p.Syntax.Literal;return h}g(d,n);return d}(D);k.Literal=a;a=function(n){function d(e){var l=n.call(this)||this;l.properties=e;l.type=p.Syntax.ObjectExpression;return l}g(d,n);return d}(D);k.ObjectExpression=a;
a=function(n){function d(e,l,h,t,r,q){var v=n.call(this)||this;v.kind=e;v.key=l;v.computed=h;v.value=t;v.method=r;v.shorthand=q;v.type=p.Syntax.Property;return v}g(d,n);return d}(D);k.Property=a;a=function(n){function d(e){var l=n.call(this)||this;l.argument=e;l.type=p.Syntax.ReturnStatement;return l}g(d,n);return d}(D);k.ReturnStatement=a;a=function(n){function d(e){var l=n.call(this)||this;l.body=e;l.type=p.Syntax.Program;return l}g(d,n);return d}(D);k.Program=a;a=function(n){function d(e,l){var h=
n.call(this)||this;h.value=e;h.tail=l;h.type=p.Syntax.TemplateElement;return h}g(d,n);return d}(D);k.TemplateElement=a;a=function(n){function d(e,l){var h=n.call(this)||this;h.quasis=e;h.expressions=l;h.type=p.Syntax.TemplateLiteral;return h}g(d,n);return d}(D);k.TemplateLiteral=a;k.UnaryOperators=["-","+","!","~"];a=function(n){function d(e,l){var h=n.call(this)||this;h.operator=e;h.argument=l;h.type=p.Syntax.UnaryExpression;h.prefix=!0;return h}g(d,n);return d}(D);k.UnaryExpression=a;k.UpdateOperators=
["++","--"];a=function(n){function d(e,l,h){var t=n.call(this)||this;t.operator=e;t.argument=l;t.prefix=h;t.type=p.Syntax.UpdateExpression;return t}g(d,n);return d}(D);k.UpdateExpression=a;a=function(n){function d(e,l){var h=n.call(this)||this;h.declarations=e;h.kind=l;h.type=p.Syntax.VariableDeclaration;return h}g(d,n);return d}(D);k.VariableDeclaration=a;D=function(n){function d(e,l){var h=n.call(this)||this;h.id=e;h.init=l;h.type=p.Syntax.VariableDeclarator;return h}g(d,n);return d}(D);k.VariableDeclarator=
D})},"esri/arcade/lib/scanner":function(){define("require exports ./assert ./character ./messages ./token".split(" "),function(D,k,a,f,g,p){Object.defineProperty(k,"__esModule",{value:!0});k.Scanner=void 0;D=function(){function n(d,e){this.source=d;this.errorHandler=e;this.isModule=this.trackComment=!1;this.length=d.length;this.index=0;this.lineNumber=0<d.length?1:0;this.lineStart=0;this.curlyStack=[]}n.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,
curlyStack:this.curlyStack.slice()}};n.prototype.restoreState=function(d){this.index=d.index;this.lineNumber=d.lineNumber;this.lineStart=d.lineStart;this.curlyStack=d.curlyStack};n.prototype.eof=function(){return this.index>=this.length};n.prototype.throwUnexpectedToken=function(d){void 0===d&&(d=g.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,d)};n.prototype._tolerateUnexpectedToken=function(d){void 0===d&&(d=g.Messages.UnexpectedTokenIllegal);
this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,d)};n.prototype._skipSingleLineComment=function(d){var e=[],l=0,h=null;this.trackComment&&(e=[],l=this.index-d,h={start:{line:this.lineNumber,column:this.index-this.lineStart-d},end:{line:0,column:0}});for(;!this.eof();){var t=this.source.charCodeAt(this.index);++this.index;if(f.Character.isLineTerminator(t))return h&&(h.end={line:this.lineNumber,column:this.index-this.lineStart-1},d={multiLine:!1,slice:[l+d,this.index-
1],range:[l,this.index-1],loc:h},e.push(d)),13===t&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,e}h&&(h.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!1,slice:[l+d,this.index],range:[l,this.index],loc:h},e.push(d));return e};n.prototype._skipMultiLineComment=function(){var d=[],e=0,l=null;this.trackComment&&(e=this.index-2,l={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var h=
this.source.charCodeAt(this.index);if(f.Character.isLineTerminator(h))13===h&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===h&&47===this.source.charCodeAt(this.index+1))return this.index+=2,l&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},e={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:l},d.push(e)),d;++this.index}}l&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},e={multiLine:!0,
slice:[e+2,this.index],range:[e,this.index],loc:l},d.push(e));this._tolerateUnexpectedToken();return d};n.prototype.scanComments=function(){var d=null;this.trackComment&&(d=[]);for(var e=0===this.index;!this.eof();){var l=this.source.charCodeAt(this.index);if(f.Character.isWhiteSpace(l))++this.index;else if(f.Character.isLineTerminator(l))++this.index,13===l&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,e=!0;else if(47===l)if(l=this.source.charCodeAt(this.index+
1),47===l)this.index+=2,l=this._skipSingleLineComment(2),d&&(d=d.concat(l)),e=!0;else if(42===l)this.index+=2,l=this._skipMultiLineComment(),d&&(d=d.concat(l));else break;else if(e&&45===l)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,l=this._skipSingleLineComment(3),d&&(d=d.concat(l));else break;else if(60!==l||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,l=this._skipSingleLineComment(4),d&&
(d=d.concat(l));else break}return d};n.prototype._isKeyword=function(d){d=d.toLowerCase();switch(d.length){case 2:return"if"===d||"in"===d;case 3:return"var"===d||"for"===d;case 4:return"else"===d;case 5:return"break"===d;case 6:return"return"===d;case 8:return"function"===d||"continue"===d;default:return!1}};n.prototype._codePointAt=function(d){var e=this.source.charCodeAt(d);55296<=e&&56319>=e&&(d=this.source.charCodeAt(d+1),56320<=d&&57343>=d&&(e=1024*(e-55296)+d-56320+65536));return e};n.prototype._scanHexEscape=
function(d){d="u"===d?4:2;for(var e=0,l=0;l<d;++l)if(!this.eof()&&f.Character.isHexDigit(this.source.charCodeAt(this.index)))e=16*e+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(e)};n.prototype._scanUnicodeCodePointEscape=function(){var d=this.source[this.index],e=0;for("}"===d&&this.throwUnexpectedToken();!this.eof();){d=this.source[this.index++];if(!f.Character.isHexDigit(d.charCodeAt(0)))break;e=16*e+"0123456789abcdef".indexOf(d.toLowerCase())}(1114111<
e||"}"!==d)&&this.throwUnexpectedToken();return f.Character.fromCodePoint(e)};n.prototype._getIdentifier=function(){for(var d=this.index++;!this.eof();){var e=this.source.charCodeAt(this.index);if(92===e||55296<=e&&57343>e)return this.index=d,this._getComplexIdentifier();if(f.Character.isIdentifierPart(e))++this.index;else break}return this.source.slice(d,this.index)};n.prototype._getComplexIdentifier=function(){var d=this._codePointAt(this.index),e=f.Character.fromCodePoint(d);this.index+=e.length;
if(92===d){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var l=this._scanUnicodeCodePointEscape()}else l=this._scanHexEscape("u"),null!==l&&"\\"!==l&&f.Character.isIdentifierStart(l.charCodeAt(0))||this.throwUnexpectedToken();e=l}for(;!this.eof();){d=this._codePointAt(this.index);if(!f.Character.isIdentifierPart(d))break;l=f.Character.fromCodePoint(d);e+=l;this.index+=l.length;92===d&&(e=e.substr(0,e.length-1),117!==
this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,l=this._scanUnicodeCodePointEscape()):(l=this._scanHexEscape("u"),null!==l&&"\\"!==l&&f.Character.isIdentifierPart(l.charCodeAt(0))||this.throwUnexpectedToken()),e+=l)}return e};n.prototype._octalToDecimal=function(d){var e="0"!==d,l="01234567".indexOf(d);!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(e=!0,l=8*l+"01234567".indexOf(this.source[this.index++]),
"0123".includes(d)&&!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(l=8*l+"01234567".indexOf(this.source[this.index++])));return{code:l,octal:e}};n.prototype._scanIdentifier=function(){var d=this.index,e=92===this.source.charCodeAt(d)?this._getComplexIdentifier():this._getIdentifier();var l=1===e.length?p.TokenType.Identifier:this._isKeyword(e)?p.TokenType.Keyword:"null"===e.toLowerCase()?p.TokenType.NullLiteral:"true"===e.toLowerCase()||"false"===e.toLowerCase()?p.TokenType.BooleanLiteral:
p.TokenType.Identifier;if(l!==p.TokenType.Identifier&&d+e.length!==this.index){var h=this.index;this.index=d;this._tolerateUnexpectedToken(g.Messages.InvalidEscapedReservedWord);this.index=h}return{type:l,value:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};n.prototype._scanPunctuator=function(){var d=this.index,e=this.source[this.index];switch(e){case "(":case "{":"{"===e&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;
this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:e=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===e?this.index+=4:(e=e.substr(0,3),"\x3d\x3d\x3d"===e||"!\x3d\x3d"===e||"\x3e\x3e\x3e"===e||"\x3c\x3c\x3d"===e||"\x3e\x3e\x3d"===e||"**\x3d"===e?this.index+=3:(e=e.substr(0,2),"\x26\x26"===e||"||"===e||"\x3d\x3d"===e||"!\x3d"===e||"+\x3d"===e||"-\x3d"===e||"*\x3d"===e||"/\x3d"===e||"++"===e||"--"===e||"\x3c\x3c"===e||"\x3e\x3e"===
e||"\x26\x3d"===e||"|\x3d"===e||"^\x3d"===e||"%\x3d"===e||"\x3c\x3d"===e||"\x3e\x3d"===e||"\x3d\x3e"===e||"**"===e?this.index+=2:(e=this.source[this.index],"\x3c\x3e\x3d!+-*%\x26|^/".includes(e)&&++this.index)))}this.index===d&&this.throwUnexpectedToken();return{type:p.TokenType.Punctuator,value:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};n.prototype._scanHexLiteral=function(d){for(var e="";!this.eof()&&f.Character.isHexDigit(this.source.charCodeAt(this.index));)e+=
this.source[this.index++];0===e.length&&this.throwUnexpectedToken();f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:p.TokenType.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};n.prototype._scanBinaryLiteral=function(d){for(var e="";!this.eof();){var l=this.source[this.index];if("0"!==l&&"1"!==l)break;e+=this.source[this.index++]}0===e.length&&this.throwUnexpectedToken();
this.eof()||(l=this.source.charCodeAt(this.index),(f.Character.isIdentifierStart(l)||f.Character.isDecimalDigit(l))&&this.throwUnexpectedToken());return{type:p.TokenType.NumericLiteral,value:parseInt(e,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};n.prototype._scanOctalLiteral=function(d,e){var l="",h=!1;f.Character.isOctalDigit(d.charCodeAt(0))?(h=!0,l="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index));)l+=
this.source[this.index++];h||0!==l.length||this.throwUnexpectedToken();(f.Character.isIdentifierStart(this.source.charCodeAt(this.index))||f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:p.TokenType.NumericLiteral,value:parseInt(l,8),octal:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};n.prototype._scanNumericLiteral=function(){var d=this.index,e=this.source[d];a.assert(f.Character.isDecimalDigit(e.charCodeAt(0))||
"."===e,"Numeric literal must start with a decimal digit or a decimal point");var l="";if("."!==e){l=this.source[this.index++];e=this.source[this.index];if("0"===l){if("x"===e||"X"===e)return++this.index,this._scanHexLiteral(d);if("b"===e||"B"===e)return++this.index,this._scanBinaryLiteral(d);if("o"===e||"O"===e)return this._scanOctalLiteral(e,d)}for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];e=this.source[this.index]}if("."===e){for(l+=this.source[this.index++];f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=
this.source[this.index++];e=this.source[this.index]}if("e"===e||"E"===e){l+=this.source[this.index++];e=this.source[this.index];if("+"===e||"-"===e)l+=this.source[this.index++];if(f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];else this.throwUnexpectedToken()}f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:p.TokenType.NumericLiteral,
value:parseFloat(l),lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};n.prototype._scanStringLiteral=function(){var d=this.index,e=this.source[d];a.assert("'"===e||'"'===e,"String literal must starts with a quote");++this.index;for(var l=!1,h="";!this.eof();){var t=this.source[this.index++];if(t===e){e="";break}if("\\"===t)if((t=this.source[this.index++])&&f.Character.isLineTerminator(t.charCodeAt(0)))++this.lineNumber,"\r"===t&&"\n"===this.source[this.index]&&++this.index,
this.lineStart=this.index;else switch(t){case "u":"{"===this.source[this.index]?(++this.index,h+=this._scanUnicodeCodePointEscape()):(t=this._scanHexEscape(t),null===t&&this.throwUnexpectedToken(),h+=t);break;case "x":t=this._scanHexEscape(t);null===t&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);h+=t;break;case "n":h+="\n";break;case "r":h+="\r";break;case "t":h+="\t";break;case "b":h+="\b";break;case "f":h+="\f";break;case "v":h+="\x0B";break;case "8":case "9":h+=t;this._tolerateUnexpectedToken();
break;default:t&&f.Character.isOctalDigit(t.charCodeAt(0))?(t=this._octalToDecimal(t),l=t.octal||l,h+=String.fromCharCode(t.code)):h+=t}else if(f.Character.isLineTerminator(t.charCodeAt(0)))break;else h+=t}""!==e&&(this.index=d,this.throwUnexpectedToken());return{type:p.TokenType.StringLiteral,value:h,octal:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};n.prototype._scanTemplate=function(){var d="",e=!1,l=this.index,h="`"===this.source[l],t=!1,r=2;for(++this.index;!this.eof();){var q=
this.source[this.index++];if("`"===q){r=1;e=t=!0;break}if("$"===q){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;e=!0;break}d+=q}else if("\\"===q)if(q=this.source[this.index++],f.Character.isLineTerminator(q.charCodeAt(0)))++this.lineNumber,"\r"===q&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(q){case "n":d+="\n";break;case "r":d+="\r";break;case "t":d+="\t";break;case "u":if("{"===this.source[this.index])++this.index,d+=this._scanUnicodeCodePointEscape();
else{var v=this.index,x=this._scanHexEscape(q);null!==x?d+=x:(this.index=v,d+=q)}break;case "x":q=this._scanHexEscape(q);null===q&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);d+=q;break;case "b":d+="\b";break;case "f":d+="\f";break;case "v":d+="\v";break;default:"0"===q?(f.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral),d+="\x00"):f.Character.isOctalDigit(q.charCodeAt(0))?this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral):
d+=q}else f.Character.isLineTerminator(q.charCodeAt(0))?(++this.lineNumber,"\r"===q&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,d+="\n"):d+=q}e||this.throwUnexpectedToken();h||this.curlyStack.pop();return{type:p.TokenType.Template,value:this.source.slice(l+1,this.index-r),cooked:d,head:h,tail:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};n.prototype._testRegExp=function(d,e){var l=this,h=d;e.includes("u")&&(h=h.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(t,r,q){t=parseInt(r||q,16);1114111<t&&l.throwUnexpectedToken(g.Messages.InvalidRegExp);return 65535>=t?String.fromCharCode(t):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(h)}catch(t){this.throwUnexpectedToken(g.Messages.InvalidRegExp)}try{return new RegExp(d,e)}catch(t){return null}};n.prototype._scanRegExpBody=function(){var d=this.source[this.index];a.assert("/"===d,"Regular expression literal must start with a slash");for(var e=this.source[this.index++],l=
!1,h=!1;!this.eof();)if(d=this.source[this.index++],e+=d,"\\"===d)d=this.source[this.index++],f.Character.isLineTerminator(d.charCodeAt(0))&&this.throwUnexpectedToken(g.Messages.UnterminatedRegExp),e+=d;else if(f.Character.isLineTerminator(d.charCodeAt(0)))this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);else if(l)"]"===d&&(l=!1);else{if("/"===d){h=!0;break}"["===d&&(l=!0)}h||this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);return e.substr(1,e.length-2)};n.prototype._scanRegExpFlags=
function(){for(var d="";!this.eof();){var e=this.source[this.index];if(!f.Character.isIdentifierPart(e.charCodeAt(0)))break;++this.index;if("\\"!==e||this.eof())d+=e;else{e=this.source[this.index];if("u"===e){++this.index;e=this.index;var l=this._scanHexEscape("u");if(null!==l)for(d+=l;e<this.index;++e);else this.index=e,d+="u"}this._tolerateUnexpectedToken()}}return d};n.prototype.scanRegExp=function(){var d=this.index,e=this._scanRegExpBody(),l=this._scanRegExpFlags(),h=this._testRegExp(e,l);return{type:p.TokenType.RegularExpression,
value:"",pattern:e,flags:l,regex:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};n.prototype.lex=function(){if(this.eof())return{type:p.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var d=this.source.charCodeAt(this.index);return f.Character.isIdentifierStart(d)?this._scanIdentifier():40===d||41===d||59===d?this._scanPunctuator():39===d||34===d?this._scanStringLiteral():46===d?f.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this._scanNumericLiteral():this._scanPunctuator():f.Character.isDecimalDigit(d)?this._scanNumericLiteral():96===d||125===d&&"${"===this.curlyStack[this.curlyStack.length-1]?this._scanTemplate():55296<=d&&57343>d&&f.Character.isIdentifierStart(this._codePointAt(this.index))?this._scanIdentifier():this._scanPunctuator()};return n}();k.Scanner=D})},"esri/arcade/lib/character":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.Character=void 0;
var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
f=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
k.Character={fromCodePoint:function(g){return 65536>g?String.fromCharCode(g):String.fromCharCode(55296+(g-65536>>10))+String.fromCharCode(56320+(g-65536&1023))},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===g||160===g||5760<=g&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||92===g||
128<=g&&a.test(k.Character.fromCodePoint(g))},isIdentifierPart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||48<=g&&57>=g||92===g||128<=g&&f.test(k.Character.fromCodePoint(g))},isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g},isOctalDigit:function(g){return 48<=g&&55>=g}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.TokenName=
k.TokenType=void 0;var a,f=a=k.TokenType||(k.TokenType={});f[f.BooleanLiteral=1]="BooleanLiteral";f[f.EOF=2]="EOF";f[f.Identifier=3]="Identifier";f[f.Keyword=4]="Keyword";f[f.NullLiteral=5]="NullLiteral";f[f.NumericLiteral=6]="NumericLiteral";f[f.Punctuator=7]="Punctuator";f[f.StringLiteral=8]="StringLiteral";f[f.RegularExpression=9]="RegularExpression";f[f.Template=10]="Template";k.TokenName={};k.TokenName[a.BooleanLiteral]="Boolean";k.TokenName[a.EOF]="\x3cend\x3e";k.TokenName[a.Identifier]="Identifier";
k.TokenName[a.Keyword]="Keyword";k.TokenName[a.NullLiteral]="Null";k.TokenName[a.NumericLiteral]="Numeric";k.TokenName[a.Punctuator]="Punctuator";k.TokenName[a.StringLiteral]="String";k.TokenName[a.RegularExpression]="RegularExpression";k.TokenName[a.Template]="Template"})},"esri/arcade/lib/tokenizer":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ./error-handler ./nodes ./scanner ./token".split(" "),function(D,k,a,f,g,p,n,d){Object.defineProperty(k,
"__esModule",{value:!0});k.Tokenizer=void 0;var e=function(){function l(){this.values=[];this.curly=this.paren=-1}l.prototype.beforeFunctionExpression=function(h){return f(f(f(f(["(","{","[","return",","],p.AssignmentOperators),p.BinaryOperators),p.LogicalOperators),p.UnaryOperators).includes(h)};l.prototype.isRegexStart=function(){var h=this.values[this.values.length-1],t=null!==h;switch(h){case "this":case "]":t=!1;break;case ")":h=this.values[this.paren-1];t="if"===h||"while"===h||"for"===h||"with"===
h;break;case "}":t=!0,"function"===this.values[this.curly-3]?t=(h=this.values[this.curly-4])?!this.beforeFunctionExpression(h):!1:"function"===this.values[this.curly-4]&&(t=(h=this.values[this.curly-5])?!this.beforeFunctionExpression(h):!0)}return t};l.prototype.push=function(h){h.type===d.TokenType.Punctuator||h.type===d.TokenType.Keyword?("{"===h.value?this.curly=this.values.length:"("===h.value&&(this.paren=this.values.length),this.values.push(h.value)):this.values.push(null)};return l}();D=function(){function l(h,
t){this.errorHandler=new g.ErrorHandler;this.errorHandler.tolerant=t?"boolean"===typeof t.tolerant&&t.tolerant:!1;this.scanner=new n.Scanner(h,this.errorHandler);this.scanner.trackComment=t?"boolean"===typeof t.comment&&t.comment:!1;this.trackRange=t?"boolean"===typeof t.range&&t.range:!1;this.trackLoc=t?"boolean"===typeof t.loc&&t.loc:!1;this.buffer=[];this.reader=new e}l.prototype.errors=function(){return this.errorHandler.errors};l.prototype.getNextToken=function(){if(0===this.buffer.length){var h=
this.scanner.scanComments();if(h)for(var t=0;t<h.length;++t){var r=h[t],q=this.scanner.source.slice(r.slice[0],r.slice[1]);q={type:r.multiLine?"BlockComment":"LineComment",value:q};this.trackRange&&(q.range=r.range);this.trackLoc&&(q.loc=r.loc);this.buffer.push(q)}if(!this.scanner.eof()){h=null;this.trackLoc&&(h={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});t=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){r=
this.scanner.saveState();try{t=this.scanner.scanRegExp()}catch(v){this.scanner.restoreState(r),t=this.scanner.lex()}}else t=this.scanner.lex();this.reader.push(t);r={type:d.TokenName[t.type],value:this.scanner.source.slice(t.start,t.end)};this.trackRange&&(r.range=[t.start,t.end]);this.trackLoc&&h&&(h.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},r.loc=h);t.type===d.TokenType.RegularExpression&&(r.regex={pattern:t.pattern,flags:t.flags});this.buffer.push(r)}}return this.buffer.shift()};
return l}();k.Tokenizer=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(D,k,a){function f(n,d){Array.isArray(d)?(n[0]=d[0],n[1]=d[1],n[2]=d[2],n[3]=d[3]):(n[0]=d.r,n[1]=d.g,n[2]=d.b,n[3]=d.a);return n}function g(n,d,e){void 0===d&&(d=0);void 0===e&&(e=!1);var l=n[d+3];n[d+0]*=l;n[d+1]*=l;n[d+2]*=l;e||(n[d+3]*=255);return n}Object.defineProperty(k,"__esModule",{value:!0});k.white=[255,255,255,1];var p=[0,0,0,0];k.premultiplyAlpha=
g;k.copyAndPremultiply=function(n){return g(f([],n))};k.premultiplyAlphaUint32=function(n){g(f(p,n));return a.i8888to32(p[0],p[1],p[2],p[3])};k.premultiplyAlphaRGBA=function(n){if(!n)return 0;var d=n.a;return a.i8888to32(n.r*d,n.g*d,n.b*d,255*d)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=new Float32Array(1),f=new Uint32Array(a.buffer);k.nextHighestPowerOfTwo=function(g){g--;
g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;g|=g>>16;g++;return g};k.toUint32=function(g){a[0]=g;return f[0]};k.i1616to32=function(g,p){return 65535&g|p<<16};k.i8888to32=function(g,p,n,d){return g&255|(p&255)<<8|(n&255)<<16|d<<24};k.i8816to32=function(g,p,n){return g&255|(p&255)<<8|n<<16};k.numTo32=function(g){return g|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(D,k,a){Object.defineProperty(k,"__esModule",
{value:!0});D=function(){function f(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}f.prototype.acquire=function(g,p,n,d,e,l,h,t,r){this.color=g;this.haloColor=p;this.haloSize=n;this.size=d;this.angle=e;this.offsetX=l;this.offsetY=h;this.hAnchor=t;this.vAnchor=r};f.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=
this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};f.pool=new a(f);return f}();k.TextProperties=D})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(D,k){var a=function(){return function(){}}();return function(){function f(g,p,n,d,e){void 0===d&&(d=1);void 0===e&&(e=0);this.classConstructor=g;this.acquireFunctionOrWithConstructor=p;this.releaseFunction=n;this.growthSize=d;!0===p?this.acquireFunction=this._constructorAcquireFunction:
"function"===typeof p&&(this.acquireFunction=p);this._pool=Array(e);this._set=new Set;this._initialSize=e;for(g=0;g<e;g++)this._pool[g]=new this.classConstructor;this.growthSize=Math.max(d,1)}f.prototype.acquire=function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];p=this.classConstructor||a;if(0===this._pool.length)for(var n=this.growthSize,d=0;d<n;d++)this._pool[d]=new p;p=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[p].concat(g)):p&&p.acquire&&"function"===
typeof p.acquire&&p.acquire.apply(p,g);this._set["delete"](p);return p};f.prototype.release=function(g){g&&!this._set.has(g)&&(this.releaseFunction?this.releaseFunction(g):g&&g.release&&"function"===typeof g.release&&g.release(),this._pool.push(g),this._set.add(g))};f.prototype.prune=function(g){void 0===g&&(g=this._initialSize);if(!(this._pool.length<=g))for(var p;g>this._pool.length;)p=this._pool.shift(),this._set["delete"](p),p.dispose&&"function"===typeof p.dispose&&p.dispose()};f.prototype._constructorAcquireFunction=
function(g){for(var p=[],n=1;n<arguments.length;n++)p[n-1]=arguments[n];(d=this.classConstructor).call.apply(d,[g].concat(p));var d};return f}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h){Object.defineProperty(k,"__esModule",{value:!0});D=function(t){function r(){var q=t.call(this)||this;q._initialized=!1;q._maxWidth=0;q._color=new Float32Array([1,0,0,1]);return q}a(r,t);r.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=
null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};r.prototype.draw=function(q,v){var x=q.context;if(v.status!==n.TileStatus.INITIALIZED){this._initialized||this._initialize(x);x.bindVAO(this._outlineVertexArrayObject);x.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",v.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord);
this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);x.setLineWidth(2);x.drawArrays(3,0,4);x.bindVAO();var y=this._getTexture(x,v);y&&(x.bindVAO(this._tileInfoVertexArrayObject),x.bindProgram(this._tileInfoProgram),x.bindTexture(y,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",v.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord),
this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",y.descriptor.width,y.descriptor.height),x.drawArrays(5,0,4),x.bindVAO())}};r.prototype._initialize=function(q){if(this._initialized)return!0;var v={a_pos:0},x=new e(q,p.backgroundVS,p.backgroundFS,v),y=new e(q,p.tileInfoVS,p.tileInfoFS,v),B={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,
normalized:!1,divisor:0}]},z=new Int8Array([0,0,1,0,1,1,0,1]);z=d.createVertex(q,35044,z);z=new h(q,v,B,{geometry:z});var b=new Int8Array([0,0,1,0,0,1,1,1]);b=d.createVertex(q,35044,b);q=new h(q,v,B,{geometry:b});this._outlineProgram=x;this._tileInfoProgram=y;this._outlineVertexArrayObject=z;this._tileInfoVertexArrayObject=q;return this._initialized=!0};r.prototype._getTexture=function(q,v){if(v.texture)return v.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",
"canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var x=v.key.id,y=this._canvas.getContext("2d");y.font="24px sans-serif";y.textAlign="left";y.textBaseline="middle";var B=y.measureText(x);B=Math.pow(2,Math.ceil(f.log2(B.width+2)));B>this._maxWidth&&(this._maxWidth=B);y.clearRect(0,0,this._maxWidth,32);y.fillStyle="blue";y.fillText(x,0,16);v.texture=new l(q,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},
this._canvas);return v.texture};return r}(g["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=function(){return function(){}}();k["default"]=a})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=k.TileStatus||(k.TileStatus={});a[a.INITIALIZED=
0]="INITIALIZED";a[a.NO_DATA=1]="NO_DATA";a[a.READY=2]="READY";a[a.MODIFIED=3]="MODIFIED";a[a.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(D,k,a){return function(){function f(g,p,n){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=g;this._desc={pixelFormat:p.pixelFormat,internalFormat:p.internalFormat,dataType:p.dataType,
target:p.target?p.target:3553,samplingMode:p.samplingMode?p.samplingMode:9729,wrapMode:p.wrapMode?p.wrapMode:10497,maxAnisotropy:p.maxAnisotropy,flipped:void 0!==p.flipped?p.flipped:!1,hasMipmap:void 0!==p.hasMipmap?p.hasMipmap:!1,level:void 0!==p.level?p.level:0,unpackAlignment:p.unpackAlignment?p.unpackAlignment:4,width:p.width,height:p.height,preMultiplyAlpha:void 0!==p.preMultiplyAlpha?p.preMultiplyAlpha:!1};this._id=++f._nextId;a("esri-webgl-debug")&&g.instanceCounter.incrementCount(0);this.setData(n)}
Object.defineProperty(f.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});f.prototype.dispose=function(){var g=this;if(this._context){if(this._glName){var p=this._context.gl;this._boundToUnits.forEach(function(n){g._context.bindTexture(null,n)});
p.deleteTexture(this._glName);this._glName=null}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);this._context=null}};f.prototype.resize=function(g,p){var n=this._desc;if(n.width!==g||n.height!==p)n.width=g,n.height=p,this.setData(null)};f.prototype.setData=function(g){var p=this._context.gl;this._glName||(this._glName=p.createTexture());void 0===g&&(g=null);null===g&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var n=this._context.getBoundTexture(0);
this._context.bindTexture(this,0);var d=this._desc;f._validateTexture(d);p.pixelStorei(p.UNPACK_ALIGNMENT,d.unpackAlignment);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,d.flipped?1:0);p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.preMultiplyAlpha);if(g instanceof ImageData||g instanceof HTMLImageElement||g instanceof HTMLCanvasElement||g instanceof HTMLVideoElement)p.texImage2D(p.TEXTURE_2D,d.level,d.internalFormat?d.internalFormat:d.pixelFormat,d.pixelFormat,d.dataType,g),void 0===this._desc.width&&(this._desc.width=
g.width),void 0===this._desc.height&&(this._desc.height=g.height);else{var e=d.internalFormat?d.internalFormat:d.pixelFormat,l=d.pixelFormat;p.DEPTH24_STENCIL8&&e===p.DEPTH_STENCIL&&(e=p.DEPTH24_STENCIL8);p.texImage2D(p.TEXTURE_2D,d.level,e,d.width,d.height,0,l,d.dataType,g)}d.hasMipmap&&this.generateMipmap();f._applySamplingMode(p,this._desc);f._applyWrapMode(p,this._desc);f._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(n,0)};f.prototype.updateData=function(g,
p,n,d,e,l){var h=this._context.gl,t=this._desc,r=this._context.getBoundTexture(0);this._context.bindTexture(this,0);l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?h.texSubImage2D(h.TEXTURE_2D,g,p,n,t.pixelFormat,t.dataType,l):h.texSubImage2D(h.TEXTURE_2D,g,p,n,d,e,t.pixelFormat,t.dataType,l);this._context.bindTexture(r,0)};f.prototype.generateMipmap=function(){var g=this._desc;g.hasMipmap||(g.hasMipmap=!0,f._validateTexture(g));
9729===g.samplingMode?(this._samplingModeDirty=!0,g.samplingMode=9985):9728===g.samplingMode&&(this._samplingModeDirty=!0,g.samplingMode=9984);g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var p=this._context.gl;p.generateMipmap(p.TEXTURE_2D);this._context.bindTexture(g,0)};f.prototype.setSamplingMode=function(g){g!==this._desc.samplingMode&&(this._desc.samplingMode=g,f._validateTexture(this._desc),this._samplingModeDirty=!0)};f.prototype.setWrapMode=function(g){g!==this._desc.wrapMode&&
(this._desc.wrapMode=g,f._validateTexture(this._desc),this._wrapModeDirty=!0)};f.prototype.applyChanges=function(){var g=this._context.gl,p=this._desc;this._samplingModeDirty&&(f._applySamplingMode(g,p),this._samplingModeDirty=!1);this._wrapModeDirty&&(f._applyWrapMode(g,p),this._wrapModeDirty=!1)};f.prototype.setBoundToUnit=function(g,p){p?this._boundToUnits.add(g):this._boundToUnits["delete"](g)};f._isPowerOfTwo=function(g){return 0===(g&g-1)};f._validateTexture=function(g){f._isPowerOfTwo(g.width)&&
f._isPowerOfTwo(g.height)};f._applySamplingMode=function(g,p){var n=p.samplingMode;if(9985===n||9987===n)n=9729;else if(9984===n||9986===n)n=9728;g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,n);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,p.samplingMode)};f._applyWrapMode=function(g,p){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,p.wrapMode);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,p.wrapMode)};f._applyAnisotropicFilteringParameters=function(g,p){if(null!=p.maxAnisotropy){var n=g.capabilities.textureFilterAnisotropic;
if(n){var d=g.gl;d.texParameterf(d.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY,p.maxAnisotropy)}}};f._nextId=0;return f}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),function(D,k,a,f,g,p,n,d,e){Object.defineProperty(k,
"__esModule",{value:!0});D=function(l){function h(){var t=l.call(this)||this;t._color=f.create();t._initialized=!1;t._color.set([1,0,0,1]);return t}a(h,l);h.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};h.prototype.draw=function(t,r){var q=t.context;this._initialized||this._initialize(q);q.setStencilFunctionSeparate(1032,519,r.stencilRef,
255);q.bindVAO(this._solidVertexArrayObject);q.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",r.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",r.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);q.drawArrays(5,0,4);q.bindVAO()};h.prototype._initialize=function(t){if(this._initialized)return!0;
var r={a_pos:0},q=new d(t,p.backgroundVS,p.backgroundFS,r);if(!q)return!1;var v=new Int8Array([0,0,1,0,0,1,1,1]);v=n.createVertex(t,35044,v);t=new e(t,r,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:v});this._solidProgram=q;this._solidVertexArrayObject=t;return this._initialized=!0};return h}(g["default"]);k["default"]=D})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(D){var k={create:function(){var a=
new D.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var f=new D.ARRAY_TYPE(4);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];return f},fromValues:function(a,f,g,p){var n=new D.ARRAY_TYPE(4);n[0]=a;n[1]=f;n[2]=g;n[3]=p;return n},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];return a},set:function(a,f,g,p,n){a[0]=f;a[1]=g;a[2]=p;a[3]=n;return a},add:function(a,f,g){a[0]=f[0]+g[0];a[1]=f[1]+g[1];a[2]=f[2]+g[2];a[3]=f[3]+g[3];return a},subtract:function(a,f,g){a[0]=f[0]-
g[0];a[1]=f[1]-g[1];a[2]=f[2]-g[2];a[3]=f[3]-g[3];return a}};k.sub=k.subtract;k.multiply=function(a,f,g){a[0]=f[0]*g[0];a[1]=f[1]*g[1];a[2]=f[2]*g[2];a[3]=f[3]*g[3];return a};k.mul=k.multiply;k.divide=function(a,f,g){a[0]=f[0]/g[0];a[1]=f[1]/g[1];a[2]=f[2]/g[2];a[3]=f[3]/g[3];return a};k.div=k.divide;k.ceil=function(a,f){a[0]=Math.ceil(f[0]);a[1]=Math.ceil(f[1]);a[2]=Math.ceil(f[2]);a[3]=Math.ceil(f[3]);return a};k.floor=function(a,f){a[0]=Math.floor(f[0]);a[1]=Math.floor(f[1]);a[2]=Math.floor(f[2]);
a[3]=Math.floor(f[3]);return a};k.min=function(a,f,g){a[0]=Math.min(f[0],g[0]);a[1]=Math.min(f[1],g[1]);a[2]=Math.min(f[2],g[2]);a[3]=Math.min(f[3],g[3]);return a};k.max=function(a,f,g){a[0]=Math.max(f[0],g[0]);a[1]=Math.max(f[1],g[1]);a[2]=Math.max(f[2],g[2]);a[3]=Math.max(f[3],g[3]);return a};k.round=function(a,f){a[0]=Math.round(f[0]);a[1]=Math.round(f[1]);a[2]=Math.round(f[2]);a[3]=Math.round(f[3]);return a};k.scale=function(a,f,g){a[0]=f[0]*g;a[1]=f[1]*g;a[2]=f[2]*g;a[3]=f[3]*g;return a};k.scaleAndAdd=
function(a,f,g,p){a[0]=f[0]+g[0]*p;a[1]=f[1]+g[1]*p;a[2]=f[2]+g[2]*p;a[3]=f[3]+g[3]*p;return a};k.distance=function(a,f){var g=f[0]-a[0],p=f[1]-a[1],n=f[2]-a[2],d=f[3]-a[3];return Math.sqrt(g*g+p*p+n*n+d*d)};k.dist=k.distance;k.squaredDistance=function(a,f){var g=f[0]-a[0],p=f[1]-a[1],n=f[2]-a[2],d=f[3]-a[3];return g*g+p*p+n*n+d*d};k.sqrDist=k.squaredDistance;k.length=function(a){var f=a[0],g=a[1],p=a[2];a=a[3];return Math.sqrt(f*f+g*g+p*p+a*a)};k.len=k.length;k.squaredLength=function(a){var f=a[0],
g=a[1],p=a[2];a=a[3];return f*f+g*g+p*p+a*a};k.sqrLen=k.squaredLength;k.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];a[2]=-f[2];a[3]=-f[3];return a};k.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];a[2]=1/f[2];a[3]=1/f[3];return a};k.normalize=function(a,f){var g=f[0],p=f[1],n=f[2],d=f[3],e=g*g+p*p+n*n+d*d;0<e&&(e=1/Math.sqrt(e),a[0]=g*e,a[1]=p*e,a[2]=n*e,a[3]=d*e);return a};k.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]+a[3]*f[3]};k.lerp=function(a,f,g,p){var n=f[0],d=f[1],e=f[2];f=f[3];a[0]=
n+p*(g[0]-n);a[1]=d+p*(g[1]-d);a[2]=e+p*(g[2]-e);a[3]=f+p*(g[3]-f);return a};k.random=function(a,f){f=f||1;a[0]=D.RANDOM();a[1]=D.RANDOM();a[2]=D.RANDOM();a[3]=D.RANDOM();k.normalize(a,a);k.scale(a,a,f);return a};k.transformMat4=function(a,f,g){var p=f[0],n=f[1],d=f[2];f=f[3];a[0]=g[0]*p+g[4]*n+g[8]*d+g[12]*f;a[1]=g[1]*p+g[5]*n+g[9]*d+g[13]*f;a[2]=g[2]*p+g[6]*n+g[10]*d+g[14]*f;a[3]=g[3]*p+g[7]*n+g[11]*d+g[15]*f;return a};k.transformQuat=function(a,f,g){var p=f[0],n=f[1],d=f[2],e=g[0],l=g[1],h=g[2];
g=g[3];var t=g*p+l*d-h*n,r=g*n+h*p-e*d,q=g*d+e*n-l*p;p=-e*p-l*n-h*d;a[0]=t*g+p*-e+r*-h-q*-l;a[1]=r*g+p*-l+q*-e-t*-h;a[2]=q*g+p*-h+t*-l-r*-e;a[3]=f[3];return a};k.forEach=function(){var a=k.create();return function(f,g,p,n,d,e){g||(g=4);p||(p=0);for(n=n?Math.min(n*g+p,f.length):f.length;p<n;p+=g)a[0]=f[p],a[1]=f[p+1],a[2]=f[p+2],a[3]=f[p+3],d(a,a,e),f[p]=a[0],f[p+1]=a[1],f[p+2]=a[2],f[p+3]=a[3];return f}}();k.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};k.exactEquals=function(a,
f){return a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]};k.equals=function(a,f){var g=a[0],p=a[1],n=a[2],d=a[3],e=f[0],l=f[1],h=f[2],t=f[3];return Math.abs(g-e)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(e))&&Math.abs(p-l)<=D.EPSILON*Math.max(1,Math.abs(p),Math.abs(l))&&Math.abs(n-h)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(d-t)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))};return k})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(D,k,a,f,g,p,n){Object.defineProperty(k,"__esModule",{value:!0});D=function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l._isInitialized=!1;l._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};l._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};l._spritesTextureSize=new Float32Array(2);return l}a(e,d);e.prototype.dispose=function(){};e.prototype.getGeometryType=function(){return f.WGLGeometryType.FILL};e.prototype.drawGeometry=
function(l,h,t,r){r=l.context;var q=l.painter,v=l.rendererInfo,x=l.requiredLevel,y=l.stationary,B=t.indexCount,z=t.indexFrom;this._initialize();var b=t.materialInfo.materialKeyInfo,c=b.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(c=l.painter.materialManager.getProgram(t.materialInfo.materialKey,l.drawPhase,c)){r.bindProgram(c);var m=this._getVAO(r,h,b.hasVV());r.bindVAO(m);if(0<t.materialInfo.texBindingInfo.length){t=t.materialInfo.texBindingInfo[0];m=t.pageId;var u=l.painter.textureManager.sprites;
this._spritesTextureSize[0]=u.getWidth(m);this._spritesTextureSize[1]=u.getHeight(m);c.setUniform1f("u_zoomFactor",1/Math.pow(2,x-h.key.level)/l.pixelRatio);q.textureManager.bindSpritePage(r,m,t.unit,y?9728:9729);c.setUniform1i(t.semantic,t.unit);c.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}c.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform);c.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord);c.setUniform1f("u_opacity",1);b.vvColor&&(c.setUniform1fv("u_vvColorValues",
v.vvColorValues),c.setUniform4fv("u_vvColors",v.vvColors));b.vvOpacity&&(c.setUniform1fv("u_vvOpacityValues",v.vvOpacityValues),c.setUniform1fv("u_vvOpacities",v.vvOpacities));r.drawElements(4,B,5125,4*z);r.bindVAO(null)}};e.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};e.prototype._getVAO=function(l,h,t){if(h.fillGeometry.vao)return h.fillGeometry.vao;var r=h.fillGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],q=h.fillGeometry.indexBuffer;if(!r||!q)return null;h.fillGeometry.vao=t?new n(l,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:r},q):new n(l,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:r},q);return h.fillGeometry.vao};return e}(p["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(D,k,a,f,g){Object.defineProperty(k,"__esModule",{value:!0});D=function(p){function n(){return null!==p&&p.apply(this,arguments)||this}
a(n,p);n.prototype.draw=function(d,e){var l=this;if(e.canDisplay){var h=this.getGeometryType(),t=e.getDisplayList(d.drawPhase),r=e.getGeometry(h);r&&g.forEachIter(t.ofType(h),function(q){return l.drawGeometry(d,e,q,r)})}};return n}(f["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.forEachIter=function(a,f){for(;;){var g=a.next();if(g.done)break;f(g.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,k,a,f,g,p,n){Object.defineProperty(k,"__esModule",{value:!0});D=function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};l._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};l._glyphsTextureSize=new Float32Array(2);return l}a(e,d);e.prototype.dispose=function(){};e.prototype.drawGeometry=function(l,h,t,r){if(l.requiredLevel===h.key.level){r=l.context;var q=l.painter,v=l.drawPhase,x=t.materialInfo,y=t.indexCount;t=t.indexFrom;var B=this._attributeLocations,z=l.drawPhase===f.WGLDrawPhase.LABEL_ALPHA,b=x.materialKey;
z&&(b|=8);if(v=q.materialManager.getProgram(b,v,B))r.setStencilTestEnabled(!1),r.bindProgram(v),B=this._getVAO(r,h),r.bindVAO(B),z?(r.setBlendingEnabled(!1),v.setUniform1f("u_fadeStep",l.labelStep)):(x=x.texBindingInfo[0],q.textureManager.bindGlyphsPage(r,x.pageId,x.unit),v.setUniform1i(x.semantic,x.unit)),x=q.textureManager.glyphs,this._glyphsTextureSize[0]=x.width/4,this._glyphsTextureSize[1]=x.height/4,q=q.extrudeNoRotationMatrix,r.bindTexture(l.labelFBO.colorTexture,3),v.setUniform1i("u_referenceTex",
3),v.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform),v.setUniformMatrix4fv("u_extrudeMatrix",q),v.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord),v.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),v.setUniform1f("u_pixelRatio",l.pixelRatio),v.setUniform1f("u_opacity",1),v.setUniform1f("u_zoomLevel",10*l.displayLevel),v.setUniform1f("u_mapRotation",l.state.rotation),v.setUniform1f("u_mapAligned",0),v.setUniform2fv("u_screenSize",l.state.size),r.drawElements(4,
y,5125,4*t),r.bindVAO(null),r.setStencilTestEnabled(!0),r.setBlendingEnabled(!0)}};e.prototype.getGeometryType=function(){return f.WGLGeometryType.LABEL};e.prototype._getVAO=function(l,h){var t=h.labelGeometry;if(t&&t.vao)return t.vao;var r=t.vertexBufferMap[g.C_VBO_GEOMETRY],q=t.vertexBufferMap[g.C_VBO_VISIBILITY_RANGE],v=t.indexBuffer;if(!r||!v||!q)return null;t.vao=new n(l,this._attributeLocations,this._vertexAttributeLayout,{geometry:r,visibility:t.vertexBufferMap[g.C_VBO_VISIBILITY],visibilityRange:q},
v);return t.vao};return e}(p["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,k,a,f,g,p,n){Object.defineProperty(k,"__esModule",{value:!0});D=function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};l._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};l._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};l._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};l._spritesTextureSize=new Float32Array(2);return l}a(e,d);e.prototype.dispose=function(){};e.prototype.getGeometryType=function(){return f.WGLGeometryType.LINE};e.prototype.drawGeometry=function(l,h,t,r){r=l.context;var q=l.painter,v=l.rendererInfo,x=l.requiredLevel,y=l.drawPhase,B=t.indexFrom,z=t.indexCount,b=t.materialInfo;t=b.materialKeyInfo;var c=t.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(y=q.materialManager.getProgram(b.materialKey,
y,c)){r.bindProgram(y);c=this._getVAO(r,h,t.hasVV());r.bindVAO(c);c=1/l.pixelRatio;if(0<b.texBindingInfo.length){b=b.texBindingInfo[0];var m=b.pageId,u=q.textureManager.sprites;this._spritesTextureSize[0]=u.getWidth(m);this._spritesTextureSize[1]=u.getHeight(m);q.textureManager.bindSpritePage(r,m,b.unit);y.setUniform1i(b.semantic,b.unit);y.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}l=Math.pow(2,x-h.key.level)/l.pixelRatio;y.setUniform1f("u_zoomFactor",l);y.setUniformMatrix4fv("u_transformMatrix",
h.tileTransform.transform);y.setUniformMatrix4fv("u_extrudeMatrix",q.extrudeMatrix);y.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord);y.setUniform1f("u_opacity",1);y.setUniform1f("u_blur",0+c);y.setUniform1f("u_antialiasing",c);y.setUniform1f("u_zoomFactor",l);t.vvSizeMinMaxValue&&y.setUniform4fv("u_vvSizeMinMaxValue",v.vvSizeMinMaxValue);t.vvSizeScaleStops&&y.setUniform1f("u_vvSizeScaleStopsValue",v.vvSizeScaleStopsValue);t.vvSizeFieldStops&&(y.setUniform1fv("u_vvSizeFieldStopsValues",
v.vvSizeFieldStopsValues),y.setUniform1fv("u_vvSizeFieldStopsSizes",v.vvSizeFieldStopsSizes));t.vvSizeUnitValue&&y.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",v.vvSizeUnitValueToPixelsRatio);t.vvColor&&(y.setUniform1fv("u_vvColorValues",v.vvColorValues),y.setUniform4fv("u_vvColors",v.vvColors));t.vvOpacity&&(y.setUniform1fv("u_vvOpacityValues",v.vvOpacityValues),y.setUniform1fv("u_vvOpacities",v.vvOpacities));r.setFaceCullingEnabled(!0);r.setFrontFace(2305);r.setCullFace(1029);r.drawElements(4,
z,5125,4*B);r.setFaceCullingEnabled(!1);r.bindVAO(null)}};e.prototype._getVAO=function(l,h,t){if(h.lineGeometry.vao)return h.lineGeometry.vao;var r=h.lineGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],q=h.lineGeometry.indexBuffer;if(!r||!q)return null;h.lineGeometry.vao=t?new n(l,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:r},q):new n(l,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:r},q);return h.lineGeometry.vao};return e}(p["default"]);k["default"]=
D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(D,k,a,f,g,p,n,d){Object.defineProperty(k,"__esModule",{value:!0});D=function(e){function l(){var h=null!==e&&e.apply(this,arguments)||this;h._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};h._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};h._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};h._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};h._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};h._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};h._spritesTextureSize=new Float32Array(2);return h}a(l,e);l.prototype.dispose=function(){};l.prototype.getGeometryType=function(){return f.WGLGeometryType.MARKER};l.prototype.drawGeometry=
function(h,t,r,q){q=h.context;var v=h.painter,x=h.rendererInfo,y=h.drawPhase;h=r.indexCount;var B=r.indexFrom,z=r.materialInfo;r=z.materialKeyInfo;var b=r.heatmap,c=r.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(y=v.materialManager.getProgram(z.materialKey,y,c))q.bindProgram(y),c=this._getVAO(q,t,r.hasVV(),b),q.bindVAO(c),b?(z=this._getIntensityTexture(q,x.heatmapParameters),q.bindTexture(z,1),y.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(x.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(x.heatmapParameters.radius)):(b=z.texBindingInfo[0],z=b.pageId,v.textureManager.bindSpritePage(q,z,b.unit),y.setUniform1i(b.semantic,b.unit),b=v.textureManager.sprites,this._spritesTextureSize[0]=b.getWidth(z)/4,this._spritesTextureSize[1]=b.getHeight(z)/4),v=x.vvMaterialParameters.vvRotationEnabled&&"geographic"===x.vvMaterialParameters.vvRotationType?v.extrudeMatrix:v.extrudeNoRotationMatrix,y.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform),
y.setUniformMatrix4fv("u_extrudeMatrix",v),y.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord),y.setUniform2fv("u_mosaicSize",this._spritesTextureSize),y.setUniform1f("u_opacity",1),r.vvSizeMinMaxValue&&y.setUniform4fv("u_vvSizeMinMaxValue",x.vvSizeMinMaxValue),r.vvSizeScaleStops&&y.setUniform1f("u_vvSizeScaleStopsValue",x.vvSizeScaleStopsValue),r.vvSizeFieldStops&&(y.setUniform1fv("u_vvSizeFieldStopsValues",x.vvSizeFieldStopsValues),y.setUniform1fv("u_vvSizeFieldStopsSizes",x.vvSizeFieldStopsSizes)),
r.vvSizeUnitValue&&y.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",x.vvSizeUnitValueToPixelsRatio),r.vvColor&&(y.setUniform1fv("u_vvColorValues",x.vvColorValues),y.setUniform4fv("u_vvColors",x.vvColors)),r.vvOpacity&&(y.setUniform1fv("u_vvOpacityValues",x.vvOpacityValues),y.setUniform1fv("u_vvOpacities",x.vvOpacities)),r.vvRotation&&y.setUniform1f("u_vvRotationType","geographic"===x.vvMaterialParameters.vvRotationType?0:1),q.drawElements(4,h,5125,4*B),q.bindVAO(null)};l.prototype._getVAO=function(h,
t,r,q){if(t.iconGeometry.vao)return t.iconGeometry.vao;var v=t.iconGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],x=t.iconGeometry.indexBuffer;if(!v||!x)return null;t.iconGeometry.vao=r?new d(h,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:v},x):q?new d(h,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:v},x):new d(h,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:v},x);return t.iconGeometry.vao};l.prototype._getIntensityTexture=
function(h,t){if(t.intensityKernel&&!t.refreshIntensityKernel)return t.intensityKernel;t.intensityKernel&&(t.intensityKernel.dispose(),t.intensityKernel=null);for(var r=t.radius,q=t.kernelSize,v=t.blurRadius,x=r*r,y=[],B=-1;++B<q;)y[B]=Math.exp(-Math.pow(B-v,2)/(2*x))/(r/2*Math.sqrt(2*Math.PI));r=[];for(var z,b=0;b<q;b++)for(x=y[b],B=0;B<q;B++)z=b*q+B,v=y[B],r[4*z]=x*v,r[4*z+1]=0,r[4*z+2]=0,r[4*z+3]=1;q=new n(h,{target:3553,pixelFormat:6408,internalFormat:h.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:h.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:q,height:q},new Float32Array(r));t.intensityKernel=q;t.refreshIntensityKernel=!1;return q};return l}(p["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,k,a,f,g,p,n){Object.defineProperty(k,"__esModule",
{value:!0});D=function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};l._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};l._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};l._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};l._glyphsTextureSize=new Float32Array(2);return l}a(e,d);e.prototype.dispose=function(){};e.prototype.getGeometryType=
function(){return f.WGLGeometryType.TEXT};e.prototype.drawGeometry=function(l,h,t,r){r=l.context;var q=l.painter,v=l.rendererInfo,x=t.materialInfo,y=t.indexCount;t=t.indexFrom;var B=x.materialKeyInfo,z=B.vvSizeMinMaxValue||B.vvSizeScaleStops||B.vvSizeFieldStops||B.vvSizeUnitValue||B.vvColor||B.vvRotation||B.vvOpacity;if(l=q.materialManager.getProgram(x.materialKey,l.drawPhase,z?this._attributeLocationsVV:this._attributeLocations))r.bindProgram(l),z=this._getVAO(r,h,z,this.getGeometryType()),r.bindVAO(z),
x=x.texBindingInfo[0],q.textureManager.bindGlyphsPage(r,x.pageId,x.unit),l.setUniform1i(x.semantic,x.unit),x=q.textureManager.glyphs,this._glyphsTextureSize[0]=x.width/4,this._glyphsTextureSize[1]=x.height/4,q=v.vvMaterialParameters.vvRotationEnabled&&"geographic"===v.vvMaterialParameters.vvRotationType?q.extrudeMatrix:q.extrudeNoRotationMatrix,l.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform),l.setUniformMatrix4fv("u_extrudeMatrix",q),l.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord),
l.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),l.setUniform1f("u_pixelRatio",1),l.setUniform1f("u_opacity",1),B.vvSizeMinMaxValue&&l.setUniform4fv("u_vvSizeMinMaxValue",v.vvSizeMinMaxValue),B.vvSizeScaleStops&&l.setUniform1f("u_vvSizeScaleStopsValue",v.vvSizeScaleStopsValue),B.vvSizeFieldStops&&(l.setUniform1fv("u_vvSizeFieldStopsValues",v.vvSizeFieldStopsValues),l.setUniform1fv("u_vvSizeFieldStopsSizes",v.vvSizeFieldStopsSizes)),B.vvSizeUnitValue&&l.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
v.vvSizeUnitValueToPixelsRatio),B.vvColor&&(l.setUniform1fv("u_vvColorValues",v.vvColorValues),l.setUniform4fv("u_vvColors",v.vvColors)),B.vvOpacity&&(l.setUniform1fv("u_vvOpacityValues",v.vvOpacityValues),l.setUniform1fv("u_vvOpacities",v.vvOpacities)),B.vvRotation&&l.setUniform1f("u_vvRotationType","geographic"===v.vvMaterialParameters.vvRotationType?0:1),r.drawElements(4,y,5125,4*t),r.bindVAO(null)};e.prototype._getVAO=function(l,h,t,r){if((h=h.getGeometry(r))&&h.vao)return h.vao;r=h.vertexBufferMap[g.C_VBO_GEOMETRY];
var q=h.vertexBufferMap[g.C_VBO_VISIBILITY],v=h.indexBuffer;if(!r||!v)return null;h.vao=t?new n(l,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:r,visibility:q},v):new n(l,this._attributeLocations,this._vertexAttributeLayout,{geometry:r,visibility:q},v);return h.vao};return e}(p["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(D,k,a,f,g){return function(){function p(){this._hlRenderer=new f;this._hlSurfaces=new g;this._height=this._width=void 0}p.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};p.prototype.setup=function(n,d,e){var l=d%4,h=e%4;d+=2>l?-l:4-l;e+=2>h?-h:4-h;this._width=d;this._height=e;this._boundFBO=n.getBoundFramebufferObject();d=Math.round(.75*d);e=Math.round(.75*e);this._hlRenderer.setup(n,d,e);this._hlSurfaces.setup(n,
d,e)};p.prototype.setHighlightOptions=function(n){this._hlRenderer.setHighlightOptions({fillColor:n.fillColor,outlineColor:n.outlineColor,outlineWidth:.75*n.outlineWidth,outerHaloWidth:.75*n.outerHaloWidth,innerHaloWidth:.75*n.innerHaloWidth,outlinePosition:.75*n.outlinePosition})};p.prototype.startMaskDraw=function(n){n.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);n.setClearColor(0,0,0,0);n.setClearStencil(0);n.clear(n.gl.COLOR_BUFFER_BIT|n.gl.STENCIL_BUFFER_BIT);n.setViewport(0,0,.75*this._width,
.75*this._height)};p.prototype.draw=function(n){n.setStencilTestEnabled(!1);n.setBlendingEnabled(!1);n.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);n.setClearColor(0,0,0,0);n.clear(n.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(n,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?(n.bindFramebuffer(null),n.clear(n.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(n,this._hlSurfaces.sharedBlur2Tex)):(n.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),n.setClearColor(0,0,0,0),n.clear(n.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(n,this._hlSurfaces.sharedBlur2Tex),n.bindFramebuffer(this._boundFBO),n.setBlendingEnabled(!0),n.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(n,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return p}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(D,k,a,f,g,p,n){var d=[void 0,void 0,void 0,1],e=[3,4],l=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function t(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}t.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};t.prototype.preBlur=function(r,q){r.bindTexture(q,e[0]);r.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",l);r.bindVAO(this._resources.quadVAO);r.drawArrays(5,0,4);r.bindVAO()};t.prototype.finalBlur=function(r,q){r.bindTexture(q,e[0]);r.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",h);r.bindVAO(this._resources.quadVAO);r.drawArrays(5,0,4);r.bindVAO()};t.prototype.renderHighlight=function(r,q){r.bindTexture(q,e[0]);r.bindTexture(this._resources.shadeTex,e[1]);r.bindProgram(this._resources.highlightProgram);r.bindVAO(this._resources.quadVAO);r.drawArrays(5,0,4);r.bindVAO()};t.prototype._initialize=function(r,q,v){this._width=q;this._height=
v;q=new f(r,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);v=new n(r,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:q});var x=(new g("hl",["texturedVS","highlightFS"],[],a,r,{a_position:0,a_texcoord:1})).getProgram([]),y=(new g("hl",["texturedVS","blurFS"],[],a,r,{a_position:0,a_texcoord:1})).getProgram([]);
x.setUniform1i("u_texture",e[0]);x.setUniform1i("u_shade",e[1]);x.setUniform4fv("u_sigmas",d);y.setUniform1i("u_texture",e[0]);y.setUniform4fv("u_sigmas",d);r=new p(r,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:q,quadVAO:v,highlightProgram:x,blurProgram:y,shadeTex:r}};t.prototype.setHighlightOptions=function(r){function q(u,w,A){c[0]=(1-A)*u[0]+A*w[0];c[1]=(1-A)*u[1]+A*w[1];c[2]=(1-A)*u[2]+A*w[2];c[3]=(1-A)*u[3]+A*
w[3]}this._highlightOptions=r;if(this._resources){for(var v=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,x=r.outlinePosition-r.outlineWidth/2,y=r.outlinePosition+r.outlineWidth/2,B=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,z=new Uint8Array(1024),b,c=[void 0,void 0,void 0,void 0],m=0;256>m;++m)b=v+m/255*(B-v),b<v?(z[4*m]=0,z[4*m+1]=0,z[4*m+2]=0,z[4*m+3]=0):b<x?q([0,0,0,0],r.outlineColor,(b-v)/(x-v)):b<y?(c[0]=r.outlineColor[0],c[1]=r.outlineColor[1],c[2]=r.outlineColor[2],c[3]=r.outlineColor[3]):
b<B?q(r.outlineColor,r.fillColor,(b-y)/(B-y)):(z[4*m]=r.fillColor[0],z[4*m+1]=r.fillColor[1],z[4*m+2]=r.fillColor[2],z[4*m+3]=r.fillColor[3]),z[4*m]=255*c[0]*c[3],z[4*m+1]=255*c[1]*c[3],z[4*m+2]=255*c[2]*c[3],z[4*m+3]=255*c[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[v,B]);this._resources.shadeTex.updateData(0,0,0,256,1,z)}};t.prototype.setup=function(r,q,v){this._resources?(this._width=q,this._height=v):(this._initialize(r,q,v),this.setHighlightOptions(this._highlightOptions))};
return t}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(D,k,a,f){D=new f;f.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(D,k,a,f){function g(p,n,d){n=new f(p,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:n,height:d,samplingMode:9729});p=a.createWithAttachments(p,n,{colorTarget:0,depthStencilTarget:2});return[n,p]}return function(){function p(){this._height=this._width=void 0;this._resources=null}p.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};p.prototype._initialize=function(n,
d,e){this._width=d;this._height=e;var l=g(n,d,e),h=l[0];l=l[1];n=g(n,d,e);this._resources={sharedBlur1Tex:h,sharedBlur1Fbo:l,sharedBlur2Tex:n[0],sharedBlur2Fbo:n[1]}};p.prototype.setup=function(n,d,e){!this._resources||this._width===d&&this._height===e||this.dispose();this._resources||this._initialize(n,d,e)};Object.defineProperty(p.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return p}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(D,k,a,f,g){return function(){function p(n,
d,e,l){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=n;this._desc={colorTarget:d.colorTarget,depthStencilTarget:d.depthStencilTarget,width:d.width,height:d.height,multisampled:d.multisampled};this._id=p._nextId++;a("esri-webgl-debug")&&n.instanceCounter.incrementCount(4);e&&(n=void 0,e instanceof g?(this._colorAttachment=e,n=e.descriptor):(n=e,this._colorAttachment=new g(this._context,n)),p._validateTextureDimensions(n,
this._desc));if(l instanceof f){if(2===d.depthStencilTarget)this._stencilAttachment=l;else if(1===d.depthStencilTarget||3===d.depthStencilTarget)this._depthAttachment=l;p._validateBufferDimensions(l.descriptor,this._desc)}else l&&(d=void 0,l instanceof g?(this._depthStencilTexture=l,d=this._depthStencilTexture.descriptor):(d=l,this._depthStencilTexture=new g(this._context,d)),p._validateTextureDimensions(d,this._desc))}p.create=function(n,d){return new p(n,d)};p.createWithAttachments=function(n,d,
e,l){return new p(n,e,d,l)};Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof g?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(p.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});p.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};p.prototype.attachColorTexture=function(n){if(n){p._validateTextureDimensions(n.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,n.glName,0)}this._colorAttachment=n}};p.prototype.detachColorTexture=
function(){var n=void 0;if(this._colorAttachment instanceof g){n=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}this._colorAttachment=null}return n};p.prototype.attachDepthStencilTexture=function(n){if(n){p._validateTextureDimensions(n.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,n.glName,0)}this._depthStencilTexture=n}};p.prototype.detachDepthStencilTexture=function(){var n=this._depthStencilTexture;if(n&&this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return n};
p.prototype.attachDepthStencilBuffer=function(n){if(n){var d=n.descriptor;p._validateBufferDimensions(d,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===d.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),d=this._context.gl,d.framebufferRenderbuffer(d.FRAMEBUFFER,1===this._desc.depthStencilTarget?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,n.glName));this._depthAttachment=n}};p.prototype.detachDepthStencilBuffer=function(){var n=
this._context.gl,d=this._depthAttachment;d&&this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,1===this._desc.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,null));this._depthAttachment=null;return d};p.prototype.copyToTexture=function(n,d,e,l,h,t,r){var q=this._context;q.bindTexture(r);q.bindFramebuffer(this);q.gl.copyTexSubImage2D(3553,0,h,t,n,d,e,l)};p.prototype.readPixels=function(n,d,e,l,h,t,r){this._context.bindFramebuffer(this);
this._context.gl.readPixels(n,d,e,l,h,t,r)};p.prototype.resize=function(n,d){var e=this._desc;if(e.width!==n||e.height!==d)if(this._initialized)e.width=n,e.height=d,this._colorAttachment instanceof g?(l=this._colorAttachment,e=l.descriptor,e.width=n,e.height=d,this._colorAttachment.dispose(),this._colorAttachment=new g(this._context,e),p._validateTextureDimensions(l.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(e=this._depthStencilTexture.descriptor,
e.width=n,e.height=d,this._depthStencilTexture.dispose(),this._depthStencilTexture=new g(this._context,e)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{e.width=n;e.height=d;if(this._colorAttachment instanceof g){var l=this._colorAttachment;l.resize(n,d)}this._depthStencilTexture&&this._depthStencilTexture.resize(n,d)}};p.prototype.initialize=function(){if(this._initialized)return!1;
var n=this._context.gl;this._glName&&n.deleteFramebuffer(this._glName);var d=n.createFramebuffer(),e=this._desc;n.bindFramebuffer(n.FRAMEBUFFER,d);if(!this._colorAttachment)if(0===e.colorTarget)this._colorAttachment=new g(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});else{var l=new f(this._context,{internalFormat:32854,width:e.width,height:e.height});n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,
l.glName);this._colorAttachment=l}this._colorAttachment instanceof g&&n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this._colorAttachment.glName,0);switch(e.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new f(this._context,{internalFormat:1===e.depthStencilTarget?33189:34041,width:e.width,height:e.height}));n.framebufferRenderbuffer(n.FRAMEBUFFER,1===e.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new f(this._context,{internalFormat:36168,width:e.width,height:e.height}));n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new g(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,
n.TEXTURE_2D,this._depthStencilTexture.glName,0)}n.checkFramebufferStatus(n.FRAMEBUFFER);this._glName=d;return this._initialized=!0};p.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof g){var n=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}n.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(n=this._colorAttachment,d=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(n));this._colorAttachment=null};p.prototype._disposeDepthStencilAttachments=function(){var n=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,1===this._desc.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,
n.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};p._validateBufferDimensions=function(n,d){void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height||(d.width=n.width,d.height=n.height)};p._validateTextureDimensions=function(n,d){void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height||(d.width=n.width,d.height=n.height)};p._nextId=0;return p}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(D,k,a){return function(){function f(g,p){this._context=
g;this._desc=p;this._glName=null;this._id=-1;var n=this._context.gl;a("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++f._nextId;this._glName=n.createRenderbuffer();this._context.bindRenderbuffer(this);n.renderbufferStorage(n.RENDERBUFFER,p.internalFormat,p.width,p.height)}Object.defineProperty(f.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});f.prototype.resize=function(g,p){var n=this._context.gl,d=this._desc;if(d.width!==g||d.height!==p)d.width=g,d.height=p,this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,d.internalFormat,d.width,d.height)};f.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};f._nextId=0;return f}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!D)var D=1E-6;if(!k)var k="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var f={GLMAT_EPSILON:D,GLMAT_ARRAY_TYPE:k,GLMAT_RANDOM:a,setMatrixArrayType:function(n){f.GLMAT_ARRAY_TYPE=n}},g=Math.PI/180,p=180/Math.PI;f.toRadian=function(n){return n*g};f.toDegree=function(n){return n*p};f.setMatrixArrayType(Array);return f})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],
function(D){var k=D.GLMAT_ARRAY_TYPE;D={create:function(){var a=new k(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var f=new k(6);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];return f},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,f){var g=f[0],p=f[1],n=f[2],d=f[3],e=f[4],l=f[5],h=g*d-p*n;if(!h)return null;h=1/h;a[0]=d*h;a[1]=
-p*h;a[2]=-n*h;a[3]=g*h;a[4]=(n*l-d*e)*h;a[5]=(p*e-g*l)*h;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,f,g){var p=f[0],n=f[1],d=f[2],e=f[3],l=f[4];f=f[5];var h=g[0],t=g[1],r=g[2],q=g[3],v=g[4];g=g[5];a[0]=p*h+d*t;a[1]=n*h+e*t;a[2]=p*r+d*q;a[3]=n*r+e*q;a[4]=p*v+d*g+l;a[5]=n*v+e*g+f;return a}};D.mul=D.multiply;D.rotate=function(a,f,g){var p=f[0],n=f[1],d=f[2],e=f[3],l=f[4];f=f[5];var h=Math.sin(g);g=Math.cos(g);a[0]=p*g+d*h;a[1]=n*g+e*h;a[2]=p*-h+d*g;a[3]=n*-h+e*
g;a[4]=l;a[5]=f;return a};D.scale=function(a,f,g){var p=f[1],n=f[2],d=f[3],e=f[4],l=f[5],h=g[0];g=g[1];a[0]=f[0]*h;a[1]=p*h;a[2]=n*g;a[3]=d*g;a[4]=e;a[5]=l;return a};D.translate=function(a,f,g){var p=f[0],n=f[1],d=f[2],e=f[3],l=f[4];f=f[5];var h=g[0];g=g[1];a[0]=p;a[1]=n;a[2]=d;a[3]=e;a[4]=p*h+d*g+l;a[5]=n*h+e*g+f;return a};D.fromRotation=function(a,f){var g=Math.sin(f),p=Math.cos(f);a[0]=p;a[1]=g;a[2]=-g;a[3]=p;a[4]=0;a[5]=0;return a};D.fromScaling=function(a,f){a[0]=f[0];a[1]=0;a[2]=0;a[3]=f[1];
a[4]=0;a[5]=0;return a};D.fromTranslation=function(a,f){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=f[0];a[5]=f[1];return a};D.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};D.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return D})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(D){var k=D.GLMAT_ARRAY_TYPE,a=D.GLMAT_RANDOM,
f={create:function(){var g=new k(2);g[0]=0;g[1]=0;return g},clone:function(g){var p=new k(2);p[0]=g[0];p[1]=g[1];return p},fromValues:function(g,p){var n=new k(2);n[0]=g;n[1]=p;return n},copy:function(g,p){g[0]=p[0];g[1]=p[1];return g},set:function(g,p,n){g[0]=p;g[1]=n;return g},add:function(g,p,n){g[0]=p[0]+n[0];g[1]=p[1]+n[1];return g},subtract:function(g,p,n){g[0]=p[0]-n[0];g[1]=p[1]-n[1];return g}};f.sub=f.subtract;f.multiply=function(g,p,n){g[0]=p[0]*n[0];g[1]=p[1]*n[1];return g};f.mul=f.multiply;
f.divide=function(g,p,n){g[0]=p[0]/n[0];g[1]=p[1]/n[1];return g};f.div=f.divide;f.min=function(g,p,n){g[0]=Math.min(p[0],n[0]);g[1]=Math.min(p[1],n[1]);return g};f.max=function(g,p,n){g[0]=Math.max(p[0],n[0]);g[1]=Math.max(p[1],n[1]);return g};f.scale=function(g,p,n){g[0]=p[0]*n;g[1]=p[1]*n;return g};f.scaleAndAdd=function(g,p,n,d){g[0]=p[0]+n[0]*d;g[1]=p[1]+n[1]*d;return g};f.distance=function(g,p){var n=p[0]-g[0],d=p[1]-g[1];return Math.sqrt(n*n+d*d)};f.dist=f.distance;f.squaredDistance=function(g,
p){var n=p[0]-g[0],d=p[1]-g[1];return n*n+d*d};f.sqrDist=f.squaredDistance;f.length=function(g){var p=g[0];g=g[1];return Math.sqrt(p*p+g*g)};f.len=f.length;f.squaredLength=function(g){var p=g[0];g=g[1];return p*p+g*g};f.sqrLen=f.squaredLength;f.negate=function(g,p){g[0]=-p[0];g[1]=-p[1];return g};f.inverse=function(g,p){g[0]=1/p[0];g[1]=1/p[1];return g};f.normalize=function(g,p){var n=p[0],d=p[1];n=n*n+d*d;0<n&&(n=1/Math.sqrt(n),g[0]=p[0]*n,g[1]=p[1]*n);return g};f.dot=function(g,p){return g[0]*p[0]+
g[1]*p[1]};f.cross=function(g,p,n){p=p[0]*n[1]-p[1]*n[0];g[0]=g[1]=0;g[2]=p;return g};f.lerp=function(g,p,n,d){var e=p[0];p=p[1];g[0]=e+d*(n[0]-e);g[1]=p+d*(n[1]-p);return g};f.random=function(g,p){p=p||1;var n=2*a()*Math.PI;g[0]=Math.cos(n)*p;g[1]=Math.sin(n)*p;return g};f.transformMat2=function(g,p,n){var d=p[0];p=p[1];g[0]=n[0]*d+n[2]*p;g[1]=n[1]*d+n[3]*p;return g};f.transformMat2d=function(g,p,n){var d=p[0];p=p[1];g[0]=n[0]*d+n[2]*p+n[4];g[1]=n[1]*d+n[3]*p+n[5];return g};f.transformMat3=function(g,
p,n){var d=p[0];p=p[1];g[0]=n[0]*d+n[3]*p+n[6];g[1]=n[1]*d+n[4]*p+n[7];return g};f.transformMat4=function(g,p,n){var d=p[0];p=p[1];g[0]=n[0]*d+n[4]*p+n[12];g[1]=n[1]*d+n[5]*p+n[13];return g};f.forEach=function(){var g=f.create();return function(p,n,d,e,l,h){n||(n=2);d||(d=0);for(e=e?Math.min(e*n+d,p.length):p.length;d<e;d+=n)g[0]=p[d],g[1]=p[d+1],l(g,g,h),p[d]=g[0],p[d+1]=g[1];return p}}();f.str=function(g){return"vec2("+g[0]+", "+g[1]+")"};return f})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","../../core/tsSupport/assignHelper"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.adjustScreenshotSettings=function(f,g){f=a({format:"png",quality:100},f);if(f.includePadding){var p=g.width;var n=g.height}else p=g.width-g.padding.left-g.padding.right,n=g.height-g.padding.top-g.padding.bottom;var d=p/n;void 0!==f.width&&void 0===f.height?f.height=f.width/d:void 0!==f.height&&void 0===f.width&&(f.width=d*f.height);void 0!==f.height&&(f.height=Math.floor(f.height));void 0!==
f.width&&(f.width=Math.floor(f.width));f.area||f.includePadding||(f.area={x:g.padding.left,y:g.padding.top,width:p,height:n});return f};k.resampleHermite=function(f,g,p,n,d,e,l){void 0===l&&(l=!0);var h=g/d;p/=e;for(var t=Math.ceil(h/2),r=Math.ceil(p/2),q=0;q<e;q++)for(var v=0;v<d;v++){for(var x=4*(v+(l?e-q-1:q)*d),y=0,B=0,z=0,b=0,c=0,m=0,u=0,w=(q+.5)*p,A=Math.floor(q*p);A<(q+1)*p;A++){var C=Math.abs(w-(A+.5))/r,E=(v+.5)*h;C*=C;for(var G=Math.floor(v*h);G<(v+1)*h;G++){var F=Math.abs(E-(G+.5))/t;y=
Math.sqrt(C+F*F);-1<=y&&1>=y&&(y=2*y*y*y-3*y*y+1,0<y&&(F=4*(G+A*g),u+=y*f[F+3],z+=y,255>f[F+3]&&(y=y*f[F+3]/250),b+=y*f[F],c+=y*f[F+1],m+=y*f[F+2],B+=y))}}n[x]=b/B;n[x+1]=c/B;n[x+2]=m/B;n[x+3]=u/z}}})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(D,k){function a(n,d,e){void 0===d&&(d={});switch(e){case "webgl":var l=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":l=["webgl2"];break;default:l=["webgl","experimental-webgl",
"webkit-3d","moz-webgl"]}e=null;for(var h=0;h<l.length;h++){var t=l[h];try{e=n.getContext(t,d)}catch(r){}if(e)break}return e}function f(n,d){var e=n.parentNode;e&&(e.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+d+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(k,"__esModule",{value:!0});k.createContextOrErrorHTML=
function(n,d,e){void 0===d&&(d={});if(!window.WebGLRenderingContext)return f(n,g),null;d=a(n,d,e);return d?d:(f(n,p),null)};k.createContext=a;var g='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',p='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),
function(D,k,a,f,g,p,n){return function(){function d(e,l){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=
1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=
null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=p["default"](e)?"webgl2":"webgl";this.gl=e;e instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=n.loadCapabilities(e,l);var h=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:h[0],y:h[1],width:h[2],height:h[3]};h=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:h?this.gl.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};a("esri-webgl-debug")&&(this.instanceCounter=new g);this.enforceState()}Object.defineProperty(d.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parameters",{get:function(){return this._parameters},
enumerable:!0,configurable:!0});d.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};a("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};d.prototype.setBlendingEnabled=function(e){this._blendEnabled!==e&&(!0===e?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=e)};d.prototype.setBlendColor=function(e,l,h,t){if(e!==this._blendColorState.r||l!==this._blendColorState.g||h!==
this._blendColorState.b||t!==this._blendColorState.a)this.gl.blendColor(e,l,h,t),this._blendColorState.r=e,this._blendColorState.g=l,this._blendColorState.b=h,this._blendColorState.a=t};d.prototype.setBlendFunction=function(e,l){if(e!==this._blendFunctionState.srcRGB||l!==this._blendFunctionState.dstRGB)this.gl.blendFunc(e,l),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=l,this._blendFunctionState.dstAlpha=l};d.prototype.setBlendFunctionSeparate=
function(e,l,h,t){if(this._blendFunctionState.srcRGB!==e||this._blendFunctionState.srcAlpha!==h||this._blendFunctionState.dstRGB!==l||this._blendFunctionState.dstAlpha!==t)this.gl.blendFuncSeparate(e,l,h,t),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=h,this._blendFunctionState.dstRGB=l,this._blendFunctionState.dstAlpha=t};d.prototype.setBlendEquation=function(e){this._blendEquationState.mode!==e&&(this.gl.blendEquation(e),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=
e)};d.prototype.setBlendEquationSeparate=function(e,l){if(this._blendEquationState.mode!==e||this._blendEquationState.modeAlpha!==l)this.gl.blendEquationSeparate(e,l),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=l};d.prototype.setColorMask=function(e,l,h,t){if(this._colorMaskState.r!==e||this._colorMaskState.g!==l||this._colorMaskState.b!==h||this._colorMaskState.a!==t)this.gl.colorMask(e,l,h,t),this._colorMaskState.r=e,this._colorMaskState.g=l,this._colorMaskState.b=h,this._colorMaskState.a=
t};d.prototype.setClearColor=function(e,l,h,t){if(this._clearColor.r!==e||this._clearColor.g!==l||this._clearColor.b!==h||this._clearColor.a!==t)this.gl.clearColor(e,l,h,t),this._clearColor.r=e,this._clearColor.g=l,this._clearColor.b=h,this._clearColor.a=t};d.prototype.setFaceCullingEnabled=function(e){this._polygonCullingEnabled!==e&&(!0===e?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=e)};d.prototype.setPolygonOffsetFillEnabled=function(e){this._polygonOffsetFillEnabled!==
e&&(!0===e?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=e)};d.prototype.setPolygonOffset=function(e,l){if(this._polygonOffset[0]!==e||this._polygonOffset[1]!==l)this._polygonOffset[0]=e,this._polygonOffset[1]=l,this.gl.polygonOffset(e,l)};d.prototype.setCullFace=function(e){this._cullFace!==e&&(this.gl.cullFace(e),this._cullFace=e)};d.prototype.setFrontFace=function(e){this._frontFace!==e&&(this.gl.frontFace(e),this._frontFace=
e)};d.prototype.setScissorTestEnabled=function(e){this._scissorTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=e)};d.prototype.setScissorRect=function(e,l,h,t){if(this._scissorRect.x!==e||this._scissorRect.y!==l||this._scissorRect.width!==h||this._scissorRect.height!==t)this.gl.scissor(e,l,h,t),this._scissorRect.x=e,this._scissorRect.y=l,this._scissorRect.width=h,this._scissorRect.height=t};d.prototype.setDepthTestEnabled=
function(e){this._depthTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=e)};d.prototype.setClearDepth=function(e){this._clearDepth!==e&&(this.gl.clearDepth(e),this._clearDepth=e)};d.prototype.setDepthFunction=function(e){this._depthFunction!==e&&(this.gl.depthFunc(e),this._depthFunction=e)};d.prototype.setDepthWriteEnabled=function(e){this._depthWriteEnabled!==e&&(this.gl.depthMask(e),this._depthWriteEnabled=e)};d.prototype.setDepthRange=
function(e,l){if(this._depthRange.zNear!==e||this._depthRange.zFar!==l)this.gl.depthRange(e,l),this._depthRange.zNear=e,this._depthRange.zFar=l};d.prototype.setStencilTestEnabled=function(e){this._stencilTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=e)};d.prototype.setClearStencil=function(e){e!==this._clearStencil&&(this.gl.clearStencil(e),this._clearStencil=e)};d.prototype.setStencilFunction=function(e,l,h){if(this._stencilFunction.func!==
e||this._stencilFunction.ref!==l||this._stencilFunction.mask!==h)this.gl.stencilFunc(e,l,h),this._stencilFunction.face=1032,this._stencilFunction.func=e,this._stencilFunction.ref=l,this._stencilFunction.mask=h};d.prototype.setStencilFunctionSeparate=function(e,l,h,t){if(this._stencilFunction.face!==e||this._stencilFunction.func!==l||this._stencilFunction.ref!==h||this._stencilFunction.mask!==t)this.gl.stencilFuncSeparate(e,l,h,t),this._stencilFunction.face=e,this._stencilFunction.func=l,this._stencilFunction.ref=
h,this._stencilFunction.mask=t};d.prototype.setStencilWriteMask=function(e){this._stencilWriteMask!==e&&(this.gl.stencilMask(e),this._stencilWriteMask=e)};d.prototype.setStencilOp=function(e,l,h){if(this._stencilOperation.fail!==e||this._stencilOperation.zFail!==l||this._stencilOperation.zPass!==h)this.gl.stencilOp(e,l,h),this._stencilOperation.face=1032,this._stencilOperation.fail=e,this._stencilOperation.zFail=l,this._stencilOperation.zPass=h};d.prototype.setStencilOpSeparate=function(e,l,h,t){if(this._stencilOperation.face!==
e||this._stencilOperation.fail!==l||this._stencilOperation.zFail!==h||this._stencilOperation.zPass!==t)this.gl.stencilOpSeparate(e,l,h,t),this._stencilOperation.face=e,this._stencilOperation.face=e,this._stencilOperation.fail=l,this._stencilOperation.zFail=h,this._stencilOperation.zPass=t};d.prototype.setLineWidth=function(e){var l=this._lineWidth;this._lineWidth!==e&&(this.gl.lineWidth(e),this._lineWidth=e);return l};d.prototype.setActiveTexture=function(e){var l=this._activeTextureUnit;0<=e&&e!==
this._activeTextureUnit&&(this.gl.activeTexture(f.BASE_TEXTURE_UNIT+e),this._activeTextureUnit=e);return l};d.prototype.clear=function(e){e&&this.gl.clear(e)};d.prototype.drawArrays=function(e,l,h){this.gl.drawArrays(e,l,h)};d.prototype.drawElements=function(e,l,h,t){5123===h?this.gl.drawElements(e,l,h,t):5125===h&&this.gl.drawElements(e,l,h,t)};Object.defineProperty(d.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});d.prototype.setViewport=function(e,
l,h,t){var r=this._viewport;if(r.x!==e||r.y!==l||r.width!==h||r.height!==t)r.x=e,r.y=l,r.width=h,r.height=t,this.gl.viewport(e,l,h,t)};d.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};d.prototype.bindProgram=function(e){e?this._activeShaderProgram!==e&&(e.initialize(),this.gl.useProgram(e.glName),this._activeShaderProgram=e):(this.gl.useProgram(null),this._activeShaderProgram=null)};d.prototype.bindTexture=function(e,
l){void 0===l&&(l=0);-1===d._MAX_TEXTURE_IMAGE_UNITS&&(d._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));var h=this._textureUnitMap[l];this.setActiveTexture(l);null==e||null==e.glName?(null!=h&&(this.gl.bindTexture(h.descriptor.target,null),h.setBoundToUnit(l,!1)),this._textureUnitMap[l]=null):h&&h.id===e.id?e.applyChanges():(this.gl.bindTexture(e.descriptor.target,e.glName),e.setBoundToUnit(l,!0),e.applyChanges(),this._textureUnitMap[l]=e)};d.prototype.bindFramebuffer=
function(e){e?this._activeFramebuffer!==e&&(e.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e.glName),this._activeFramebuffer=e):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};d.prototype.bindBuffer=function(e){e&&(34962===e.bufferType?this._activeVertexBuffer=d._bindBuffer(this.gl,e,e.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,e,e.bufferType,this._activeIndexBuffer))};d.prototype.bindRenderbuffer=function(e){var l=
this.gl;e||(l.bindRenderbuffer(l.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==e&&(l.bindRenderbuffer(l.RENDERBUFFER,e.glName),this._activeRenderbuffer=e)};d.prototype.unbindBuffer=function(e){34962===e?this._activeVertexBuffer=d._bindBuffer(this.gl,null,e,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,null,e,this._activeIndexBuffer)};d.prototype.bindVAO=function(e){e?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===e.id||(e.bind(),
this._activeVertexArrayObject=e):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};d.prototype.getBoundTexture=function(e){return this._textureUnitMap[e]};d.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};d.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};d.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);
for(var e=0;e<this.parameters.maxTextureImageUnits;e++)this.bindTexture(null,e);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,
1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};d.prototype.enforceState=function(){var e=this.gl,l=this._capabilities.vao;l&&l.bindVertexArray(null);for(var h=0;h<this.parameters.maxVertexAttributes;h++)e.disableVertexAttribArray(h);
this._activeVertexBuffer?e.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):e.bindBuffer(34962,null);this._activeIndexBuffer?e.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):e.bindBuffer(34963,null);if(l&&this._activeVertexArrayObject){if(l=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(l)}e.bindFramebuffer(e.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:
null);e.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);e.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);e.bindRenderbuffer(e.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?e.enable(this.gl.BLEND):e.disable(this.gl.BLEND);e.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);e.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);e.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);e.clearDepth(this._clearDepth);e.clearStencil(this._clearStencil);e.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);e.cullFace(this._cullFace);e.depthFunc(this._depthFunction);e.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST);e.depthMask(this._depthWriteEnabled);e.frontFace(this._frontFace);e.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE);e.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?e.enable(e.POLYGON_OFFSET_FILL):e.disable(e.POLYGON_OFFSET_FILL);e.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?
e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST);e.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);e.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST);e.stencilMask(this._stencilWriteMask);for(l=0;l<this.parameters.maxTextureImageUnits;l++)e.activeTexture(f.BASE_TEXTURE_UNIT+l),e.bindTexture(3553,
null),(h=this._textureUnitMap[l])&&e.bindTexture(h.descriptor.target,h.glName);e.activeTexture(f.BASE_TEXTURE_UNIT+this._activeTextureUnit);e.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};d._bindBuffer=function(e,l,h,t){if(!l)return e.bindBuffer(h,null),null;if(t===l)return t;e.bindBuffer(h,l.glName);return l};d._MAX_TEXTURE_IMAGE_UNITS=-1;return d}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,
"__esModule",{value:!0});k.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require","exports"],function(D,k){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(f){switch(f){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;
break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};a.prototype.decrementCount=function(f){switch(f){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},
"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k["default"]=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(D,k,a,f,g,p){function n(d,e,l,h,t){if(h&&
g["default"](d))return!0;if(e[l])return!1;for(e=0;e<t.length;e++)if(d.getExtension(t[e]))return!0;return!1}Object.defineProperty(k,"__esModule",{value:!0});k.loadCapabilities=function(d,e){var l=e&&e.disabledExtensions||{},h=f.load(d,l),t=p.load(d,l);var r=l.compressedTextureS3TC?null:(r=d.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:r.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:r.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:r.COMPRESSED_RGBA_S3TC_DXT3_EXT,
COMPRESSED_RGBA_S3TC_DXT5:r.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var q=l.textureFilterAnisotropic?null:(q=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:q.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:q.TEXTURE_MAX_ANISOTROPY_EXT}:null;var v=a.load(d,l);if(g["default"](d))var x=l.colorBufferFloat||!d.getExtension("EXT_color_buffer_float")?null:{R16F:d.R16F,
RG16F:d.RG16F,RGBA16F:d.RGBA16F,R32F:d.R32F,RG32F:d.RG32F,RGBA32F:d.RGBA32F,R11F_G11F_B10F:d.R11F_G11F_B10F};else if(d instanceof WebGLRenderingContext){x=!l.colorBufferFloat&&d.getExtension("EXT_color_buffer_half_float");var y=!l.colorBufferFloat&&d.getExtension("WEBGL_color_buffer_float");x=x||y?{RGBA16F:x?x.RGBA16F_EXT:void 0,RGBA32F:y?y.RGBA32F_EXT:void 0}:null}else x=void 0;y=g["default"](d)?{MIN:d.MIN,MAX:d.MAX}:l.blendMinMax?null:(y=d.getExtension("EXT_blend_minmax"))?{MIN:y.MIN_EXT,MAX:y.MAX_EXT}:
null;return{instancing:h,vao:t,compressedTextureS3TC:r,textureFilterAnisotropic:q,disjointTimerQuery:v,colorBufferFloat:x,blendMinMax:y,depthTexture:n(d,l,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:n(d,l,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:n(d,l,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:n(d,l,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:n(d,l,
"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.load=function(f,g){if(g.disjointTimerQuery)return null;var p=f.getExtension("EXT_disjoint_timer_query")||f.getExtension("EXT_disjoint_timer_query_webgl2");return p?a["default"](f)?{createQuery:function(){return f.createQuery()},resultAvailable:function(n){return f.getQueryParameter(n,
f.QUERY_RESULT_AVAILABLE)},getResult:function(n){return f.getQueryParameter(n,f.QUERY_RESULT)},disjoint:function(){return f.getParameter(p.GPU_DISJOINT_EXT)},beginTimeElapsed:function(n){return f.beginQuery(p.TIME_ELAPSED_EXT,n)},endTimeElapsed:function(){return f.endQuery(p.TIME_ELAPSED_EXT)},createTimestamp:function(n){return p.queryCounterEXT(n,p.TIMESTAMP_EXT)},timestampBits:function(){return f.getQuery(p.TIMESTAMP_EXT,p.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return p.createQueryEXT()},
resultAvailable:function(n){return p.getQueryObjectEXT(n,p.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(n){return p.getQueryObjectEXT(n,p.QUERY_RESULT_EXT)},disjoint:function(){return f.getParameter(p.GPU_DISJOINT_EXT)},beginTimeElapsed:function(n){return p.beginQueryEXT(p.TIME_ELAPSED_EXT,n)},endTimeElapsed:function(){return p.endQueryEXT(p.TIME_ELAPSED_EXT)},createTimestamp:function(n){return p.queryCounterEXT(n,p.TIMESTAMP_EXT)},timestampBits:function(){return p.getQueryEXT(p.TIMESTAMP_EXT,
p.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.load=function(f,g){if(a["default"](f))return{drawArraysInstanced:f.drawArraysInstanced.bind(f),drawElementsInstanced:f.drawElementsInstanced.bind(f),vertexAttribDivisor:f.vertexAttribDivisor.bind(f)};if(g.angleInstancedArrays)return null;var p=f.getExtension("ANGLE_instanced_arrays");
return p?{drawArraysInstanced:p.drawArraysInstancedANGLE.bind(p),drawElementsInstanced:p.drawElementsInstancedANGLE.bind(p),vertexAttribDivisor:p.vertexAttribDivisorANGLE.bind(p)}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.load=function(f,g){if(a["default"](f))return{createVertexArray:f.createVertexArray.bind(f),deleteVertexArray:f.deleteVertexArray.bind(f),
bindVertexArray:f.bindVertexArray.bind(f)};if(g.vao)return null;var p=f.getExtension("OES_vertex_array_object")||f.getExtension("MOZ_OES_vertex_array_object")||f.getExtension("WEBKIT_OES_vertex_array_object");return p?{createVertexArray:p.createVertexArrayOES.bind(p),deleteVertexArray:p.deleteVertexArrayOES.bind(p),bindVertexArray:p.bindVertexArrayOES.bind(p)}:null}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLFeatureView":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec3 ../../../../geometry/Point ../Container ../StageGL ../../engine/webgl/TileData ./enums ./GeometryUtils ./TextureManager ./Utils ./WGLPainter ./WGLRendererInfo".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B){Object.defineProperty(k,"__esModule",{value:!0});D=function(z){function b(c){var m=z.call(this)||this;m._rendererInfo=new B;m._stage=new h;m._container=null;m._tileCoordinateScale=d.create();m._orientationVec=d.fromValues(0,0,1);m._displayScale=d.create();m._defaultTransform=n.create();m._pointToCallbacks=new Map;m._highlightIDs=new Set;m._tileId=void 0;m._patches={};m._displayWidth=0;m._displayHeight=0;m._highlightOptionsUpToDate=!1;m.layer=null;m.textureManager=
new v;m.highlightOptions=c.highlightOptions;m.tileInfoView=c.tileInfoView;m._stage.useContextVersion("webgl");m.layer=c.layer;m._layerView=c.layerView;return m}f(b,z);b.prototype.dispose=function(){this.textureManager&&(this.textureManager.dispose(),this.textureManager=null);this.removeAllChildren();for(var c=0,m=this.children;c<m.length;c++)m[c].dispose()};b.prototype.disposeWebGLResources=function(){for(var c=0,m=this.children;c<m.length;c++)m[c].clear()};b.prototype.displayWidth=function(){return this._displayWidth};
Object.defineProperty(b.prototype,"displayHeight",{get:function(){return this._displayHeight},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"highlightOptions",{get:function(){return this._highlightOptions},set:function(c){this._highlightOptions=c;this._highlightOptionsUpToDate=!1},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visualVariablesInfo",{get:function(){return this._visualVariablesInfo},set:function(c){this._visualVariablesInfo=c;this.requestRender()},
enumerable:!0,configurable:!0});b.prototype.install=function(c){c.addChild(this._stage);this._stage.addChild(this);this._container=c};b.prototype.uninstall=function(c){c.removeChild(this._stage);this._stage.removeChild(this);this.dispose();this._container=null};b.prototype.hitTest=function(c,m){var u=this,w=[c,m];return g.create(function(A,C){u._pointToCallbacks.set(w,{resolve:A,reject:C});u.requestRender()},function(){u._pointToCallbacks.has(w)&&u._pointToCallbacks["delete"](w)})};b.prototype.highlight=
function(c){var m=this;m.addHighlight(c);return{remove:function(){m.removeHighlight(c)}}};b.prototype.setHighlight=function(c){this._highlightIDs.clear();this.addHighlight(c)};b.prototype.setVisibility=function(c,m){for(var u=function(C){if(C.data){var E=C.data.tileDisplayData.displayObjectRegistry,G=c.filter(function(F){return E.has(F.id)});C.setVisibility(G,m)}},w=0,A=this.children;w<A.length;w++)u(A[w])};b.prototype.setVisibilityRange=function(c,m,u,w){for(var A=0,C=this.children;A<C.length;A++){var E=
C[A];E.data&&E.data.tileDisplayData.displayObjectRegistry.has(c)&&E.setVisibilityRange(c,m,u,w)}};b.prototype.addHighlight=function(c){for(var m=0;m<c.length;m++)this._highlightIDs.add(c[m]);this._buildHLList()};b.prototype.removeHighlight=function(c){for(var m=0;m<c.length;m++)this._highlightIDs["delete"](c[m]);this._buildHLList()};b.prototype.getMaterialItems=function(c){if(c&&0!==c.length){for(var m=[],u=0;u<c.length;u++){var w=c[u];m.push(this.textureManager.rasterizeItem(w.symbol,w.glyphIds))}return p.all(m).then(function(A){return A.map(function(C,
E){return{id:E,mosaicItem:C}})})}};b.prototype.onTileData=function(c,m){var u=null;m&&(u=t.decode(m));c.setData(u,null!=this.visualVariablesInfo.vvFields,this.layer.labelsVisible);c.buildHLList(this._highlightIDs);this._layerView&&this._layerView.view.labelManager.requestUpdate();this.addChild(c);this._stage.fadeInLabels();this.requestRender()};b.prototype.onTileDataUpdate=function(c,m){this._patches[c.key.id]=this._patches[c.key.id]||[];this._patches[c.key.id].push({tile:c,patch:m});this._stage.fadeInLabels();
this.requestRender()};b.prototype.onTileError=function(c){c.clear();c.buildHLList(this._highlightIDs);this.addChild(c);this.requestRender()};b.prototype.addChild=function(c){var m=z.prototype.addChild.call(this,c);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.addTile(this.layer.uid,c);this._buildHLList();return m};b.prototype.removeChild=function(c){var m=z.prototype.removeChild.call(this,c);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.removeTile(this.layer.uid,
c.key.id);this._buildHLList();return m};b.prototype.prepareChildrenRenderParameters=function(c){this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,c.state);var m=this.tileInfoView.getClosestInfoForScale(c.state.scale).level,u=this.tileInfoView.tileInfo.scaleToZoom(c.state.scale);return a({},c,{rendererInfo:this._rendererInfo,requiredLevel:m,displayLevel:u})};b.prototype.renderChildren=function(c){for(var m=this,u=0;this._nextTile()&&4>u;){for(var w=0,A=this._patches[this._tileId];w<
A.length;w++){var C=A[w];this._patchTileVisuals(C.tile,C.patch)}delete this._patches[this._tileId];++u}u=c.painter;u.bindTextureManager(this.textureManager);this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,c.state);this.sortChildren(function(E,G){return 0!==E.key.level-G.key.level?E.key.level-G.key.level:0!==E.key.row-G.key.row?E.key.row-G.key.row:E.key.col-G.key.col});w=y["default"].toWGLDrawPhases(c.drawPhase);if(0<w.length&&w[0]===r.WGLDrawPhase.LABEL||w[0]===r.WGLDrawPhase.LABEL_ALPHA){A=
this.layer;if(!(A.labelsVisible&&A.labelingInfo&&0<A.labelingInfo.length))return;this._updateTilesTransform(c.state,c.requiredLevel);u.update(c.state,c.pixelRatio)}u.draw(c,this.children,w,this._painterOptions);0<this._highlightIDs.size&&u.highlight(c,this.children);0!==this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(E,G){E.resolve(m._hitTest(c,G[0],G[1]))}),this._pointToCallbacks.clear())};b.prototype.attachChild=function(c,m){return c.attach(m)};b.prototype.detachChild=function(c,
m){c.detach(m)};b.prototype.renderChild=function(c,m){c.doRender(m)};b.prototype.beforeRenderChildren=function(c,m){this._updateTilesTransform(c.state,this.tileInfoView.getClosestInfoForScale(c.state.scale).level);this._updateHighlightOptions();this._stage.opacity=this._container.opacity};b.prototype._hitTest=function(c,m,u){var w=c.painter,A=c.requiredLevel,C=[0,0];c.state.toMap(C,[m,u]);m=c.state.clone();u=m.viewpoint.clone();u.targetGeometry=new e(C[0],C[1],c.state.spatialReference);m.viewpoint=
u;m.size=[x.C_HITTEST_SEARCH_SIZE,x.C_HITTEST_SEARCH_SIZE];this._updateTilesTransform(m,A);w.update(m,c.pixelRatio);return w.hitTest({context:c.context,drawPhase:r.WGLDrawPhase.HITTEST,painter:w,pixelRatio:c.pixelRatio,displayLevel:c.displayLevel,rendererInfo:this._rendererInfo,requiredLevel:A,state:m,stationary:c.stationary},this.children)};b.prototype._updateTilesTransform=function(c,m){var u=1/c.width,w=1/c.height,A=[0,0];this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[m].resolution,
c.resolution,c.rotation,this.tileInfoView.tileInfo.size[0],c.width,c.height,this._defaultTransform);for(var C=0,E=this.children;C<E.length;C++){var G=E[C];c.toScreen(A,G.coords);A[1]=c.height-A[1];G.tileTransform.displayCoord[0]=2*A[0]*u-1;G.tileTransform.displayCoord[1]=2*A[1]*w-1;G.key.level===m?G.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[G.key.level].resolution,c.resolution,c.rotation,this.tileInfoView.tileInfo.size[0],
c.width,c.height,G.tileTransform.transform)}};b.prototype._calculateRelativeViewProjMat=function(c,m,u,w,A,C,E){c/=m;this._tileCoordinateScale.set([c,c,1]);if(A!==this._displayWidth||C!==this._displayHeight)this._displayScale.set([2/A,-2/C,1]),this._displayWidth=A,this._displayHeight=C;n.identity(E);n.scale(E,E,this._tileCoordinateScale);n.rotate(E,E,-u*q.C_DEG_TO_RAD,this._orientationVec);n.scale(E,E,this._displayScale);n.transpose(E,E)};b.prototype._updateHighlightOptions=function(){if(!this._highlightOptionsUpToDate&&
this.parent){var c=this.parent.glPainter,m=this._highlightOptions;if(c){var u=m.color.toRgba();u[0]/=255;u[1]/=255;u[2]/=255;var w=u.slice();u[3]*=m.fillOpacity;w[3]*=m.haloOpacity;c.setHighlightOptions({fillColor:u,outlineColor:w,outlineWidth:2,outerHaloWidth:.3,innerHaloWidth:.3,outlinePosition:0})}}};b.prototype._buildHLList=function(){for(var c=0,m=this.children;c<m.length;c++)m[c].buildHLList(this._highlightIDs);this.requestRender()};b.prototype._nextTile=function(){var c=Object.keys(this._patches);
if(0===c.length)return this._tileId=void 0,!1;if(!this._tileId)return this._tileId=c[0],!0;var m=c.indexOf(this._tileId);m=(m+1)%c.length;this._tileId=c[m];return!0};b.prototype._patchTileVisuals=function(c,m){var u=m.addOrUpdate?t.decode(m.addOrUpdate):null;c.patchData({remove:m.remove||[],addOrUpdate:u},this.layer.labelsVisible);c.buildHLList(this._highlightIDs);this.contains(c)||this.addChild(c)};return b}(l);k["default"]=D})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],
function(D){var k={create:function(){var a=new D.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var f=new D.ARRAY_TYPE(3);f[0]=a[0];f[1]=a[1];f[2]=a[2];return f},fromValues:function(a,f,g){var p=new D.ARRAY_TYPE(3);p[0]=a;p[1]=f;p[2]=g;return p},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];return a},set:function(a,f,g,p){a[0]=f;a[1]=g;a[2]=p;return a},add:function(a,f,g){a[0]=f[0]+g[0];a[1]=f[1]+g[1];a[2]=f[2]+g[2];return a},subtract:function(a,f,g){a[0]=f[0]-g[0];a[1]=f[1]-g[1];
a[2]=f[2]-g[2];return a}};k.sub=k.subtract;k.multiply=function(a,f,g){a[0]=f[0]*g[0];a[1]=f[1]*g[1];a[2]=f[2]*g[2];return a};k.mul=k.multiply;k.divide=function(a,f,g){a[0]=f[0]/g[0];a[1]=f[1]/g[1];a[2]=f[2]/g[2];return a};k.div=k.divide;k.ceil=function(a,f){a[0]=Math.ceil(f[0]);a[1]=Math.ceil(f[1]);a[2]=Math.ceil(f[2]);return a};k.floor=function(a,f){a[0]=Math.floor(f[0]);a[1]=Math.floor(f[1]);a[2]=Math.floor(f[2]);return a};k.min=function(a,f,g){a[0]=Math.min(f[0],g[0]);a[1]=Math.min(f[1],g[1]);
a[2]=Math.min(f[2],g[2]);return a};k.max=function(a,f,g){a[0]=Math.max(f[0],g[0]);a[1]=Math.max(f[1],g[1]);a[2]=Math.max(f[2],g[2]);return a};k.round=function(a,f){a[0]=Math.round(f[0]);a[1]=Math.round(f[1]);a[2]=Math.round(f[2]);return a};k.scale=function(a,f,g){a[0]=f[0]*g;a[1]=f[1]*g;a[2]=f[2]*g;return a};k.scaleAndAdd=function(a,f,g,p){a[0]=f[0]+g[0]*p;a[1]=f[1]+g[1]*p;a[2]=f[2]+g[2]*p;return a};k.distance=function(a,f){var g=f[0]-a[0],p=f[1]-a[1],n=f[2]-a[2];return Math.sqrt(g*g+p*p+n*n)};k.dist=
k.distance;k.squaredDistance=function(a,f){var g=f[0]-a[0],p=f[1]-a[1],n=f[2]-a[2];return g*g+p*p+n*n};k.sqrDist=k.squaredDistance;k.length=function(a){var f=a[0],g=a[1];a=a[2];return Math.sqrt(f*f+g*g+a*a)};k.len=k.length;k.squaredLength=function(a){var f=a[0],g=a[1];a=a[2];return f*f+g*g+a*a};k.sqrLen=k.squaredLength;k.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];a[2]=-f[2];return a};k.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];a[2]=1/f[2];return a};k.normalize=function(a,f){var g=f[0],p=f[1],
n=f[2];g=g*g+p*p+n*n;0<g&&(g=1/Math.sqrt(g),a[0]=f[0]*g,a[1]=f[1]*g,a[2]=f[2]*g);return a};k.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]};k.cross=function(a,f,g){var p=f[0],n=f[1];f=f[2];var d=g[0],e=g[1];g=g[2];a[0]=n*g-f*e;a[1]=f*d-p*g;a[2]=p*e-n*d;return a};k.lerp=function(a,f,g,p){var n=f[0],d=f[1];f=f[2];a[0]=n+p*(g[0]-n);a[1]=d+p*(g[1]-d);a[2]=f+p*(g[2]-f);return a};k.hermite=function(a,f,g,p,n,d){var e=d*d,l=e*(2*d-3)+1,h=e*(d-2)+d,t=e*(d-1);d=e*(3-2*d);a[0]=f[0]*l+g[0]*h+p[0]*t+
n[0]*d;a[1]=f[1]*l+g[1]*h+p[1]*t+n[1]*d;a[2]=f[2]*l+g[2]*h+p[2]*t+n[2]*d;return a};k.bezier=function(a,f,g,p,n,d){var e=1-d,l=e*e,h=d*d,t=l*e;l*=3*d;e*=3*h;d*=h;a[0]=f[0]*t+g[0]*l+p[0]*e+n[0]*d;a[1]=f[1]*t+g[1]*l+p[1]*e+n[1]*d;a[2]=f[2]*t+g[2]*l+p[2]*e+n[2]*d;return a};k.random=function(a,f){f=f||1;var g=2*D.RANDOM()*Math.PI,p=2*D.RANDOM()-1,n=Math.sqrt(1-p*p)*f;a[0]=Math.cos(g)*n;a[1]=Math.sin(g)*n;a[2]=p*f;return a};k.transformMat4=function(a,f,g){var p=f[0],n=f[1];f=f[2];var d=g[3]*p+g[7]*n+g[11]*
f+g[15];d=d||1;a[0]=(g[0]*p+g[4]*n+g[8]*f+g[12])/d;a[1]=(g[1]*p+g[5]*n+g[9]*f+g[13])/d;a[2]=(g[2]*p+g[6]*n+g[10]*f+g[14])/d;return a};k.transformMat3=function(a,f,g){var p=f[0],n=f[1];f=f[2];a[0]=p*g[0]+n*g[3]+f*g[6];a[1]=p*g[1]+n*g[4]+f*g[7];a[2]=p*g[2]+n*g[5]+f*g[8];return a};k.transformQuat=function(a,f,g){var p=f[0],n=f[1],d=f[2];f=g[0];var e=g[1],l=g[2];g=g[3];var h=g*p+e*d-l*n,t=g*n+l*p-f*d,r=g*d+f*n-e*p;p=-f*p-e*n-l*d;a[0]=h*g+p*-f+t*-l-r*-e;a[1]=t*g+p*-e+r*-f-h*-l;a[2]=r*g+p*-l+h*-e-t*-f;
return a};k.rotateX=function(a,f,g,p){var n=[],d=[];n[0]=f[0]-g[0];n[1]=f[1]-g[1];n[2]=f[2]-g[2];d[0]=n[0];d[1]=n[1]*Math.cos(p)-n[2]*Math.sin(p);d[2]=n[1]*Math.sin(p)+n[2]*Math.cos(p);a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a};k.rotateY=function(a,f,g,p){var n=[],d=[];n[0]=f[0]-g[0];n[1]=f[1]-g[1];n[2]=f[2]-g[2];d[0]=n[2]*Math.sin(p)+n[0]*Math.cos(p);d[1]=n[1];d[2]=n[2]*Math.cos(p)-n[0]*Math.sin(p);a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a};k.rotateZ=function(a,f,g,p){var n=
[],d=[];n[0]=f[0]-g[0];n[1]=f[1]-g[1];n[2]=f[2]-g[2];d[0]=n[0]*Math.cos(p)-n[1]*Math.sin(p);d[1]=n[0]*Math.sin(p)+n[1]*Math.cos(p);d[2]=n[2];a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a};k.forEach=function(){var a=k.create();return function(f,g,p,n,d,e){g||(g=3);p||(p=0);for(n=n?Math.min(n*g+p,f.length):f.length;p<n;p+=g)a[0]=f[p],a[1]=f[p+1],a[2]=f[p+2],d(a,a,e),f[p]=a[0],f[p+1]=a[1],f[p+2]=a[2];return f}}();k.angle=function(a,f){var g=k.fromValues(a[0],a[1],a[2]),p=k.fromValues(f[0],f[1],
f[2]);k.normalize(g,g);k.normalize(p,p);g=k.dot(g,p);return 1<g?0:Math.acos(g)};k.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};k.exactEquals=function(a,f){return a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]};k.equals=function(a,f){var g=a[0],p=a[1],n=a[2],d=f[0],e=f[1],l=f[2];return Math.abs(g-d)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(d))&&Math.abs(p-e)<=D.EPSILON*Math.max(1,Math.abs(p),Math.abs(e))&&Math.abs(n-l)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))};return k})},"esri/layers/vectorTiles/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l){function h(q){return q&&("esri.geometry.SpatialReference"===q.declaredClass||null!=q.wkid)}var t=[0,0],r=g.getLogger("esri.geometry.Point");D=function(q){function v(y,B,z,b,c){y=q.call(this)||this;y.x=0;y.y=0;y.z=void 0;y.m=void 0;y.type="point";return y}a(v,q);var x=v;v.copy=function(y,B){B.x=y.x;B.y=y.y;B.z=y.z;B.m=y.m;B.spatialReference=Object.isFrozen(y.spatialReference)?y.spatialReference:y.spatialReference.clone()};v.distance=function(y,B){var z=y.x-B.x,b=y.y-B.y,
c=y.hasZ&&B.hasZ?y.z-B.z:0;return Math.sqrt(z*z+b*b+c*c)};v.prototype.normalizeCtorArgs=function(y,B,z,b,c){if(Array.isArray(y)){var m=y;c=B;y=m[0];B=m[1];z=m[2];b=m[3]}else if(y&&"object"===typeof y){if(m=y,y=null!=m.x?m.x:m.longitude,B=null!=m.y?m.y:m.latitude,z=null!=m.z?m.z:m.altitude,b=m.m,(c=m.spatialReference)&&"esri.geometry.SpatialReference"!==c.declaredClass&&(c=new d(c)),null!=m.longitude||null!=m.latitude)null==m.longitude?r.warn(".longitude\x3d","Latitude was defined without longitude"):
null==m.latitude?r.warn(".latitude\x3d","Longitude was defined without latitude"):!m.declaredClass&&c&&c.isWebMercator&&(B=l.lngLatToXY(m.longitude,m.latitude,t),y=B[0],B=B[1])}else h(z)?(c=z,z=null):h(b)&&(c=b,b=null);y={x:y,y:B};null!=c&&(y.spatialReference=c);null!=z&&(y.z=z);null!=b&&(y.m=b);return y};Object.defineProperty(v.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(y){var B=this._get("hasM");y!==B&&(this._set("m",y?0:void 0),this._set("hasM",y))},enumerable:!0,configurable:!0});
Object.defineProperty(v.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(y){var B=this._get("hasZ");y!==B&&(this._set("z",y?0:void 0),this._set("hasZ",y))},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"latitude",{get:function(){var y=this._get("spatialReference");if(y){if(y.isWebMercator)return l.xyToLngLat(this.x,this.y,t)[1];if(y.isWGS84)return this._get("y")}return null},set:function(y){var B=this._get("spatialReference");B&&(B.isWebMercator?this._set("y",
l.lngLatToXY(this.x,y,t)[1]):B.isWGS84&&this._set("y",y),this._set("latitude",y))},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"longitude",{get:function(){var y=this._get("spatialReference");if(y){if(y.isWebMercator)return l.xyToLngLat(this._get("x"),this._get("y"),t)[0];if(y.isWGS84)return this._get("x")}return null},set:function(y){var B=this._get("spatialReference");B&&(B.isWebMercator?this._set("x",l.lngLatToXY(y,this._get("y"),t)[0]):B.isWGS84&&this._set("x",y),this._set("longitude",
y))},enumerable:!0,configurable:!0});v.prototype.clone=function(){var y=new x;y.x=this.x;y.y=this.y;y.z=this.z;y.m=this.m;y.spatialReference=this.spatialReference;return y};v.prototype.copy=function(y){x.copy(y,this);return this};v.prototype.equals=function(y){if(!y)return!1;var B=this.x,z=this.y,b=this.z,c=this.m,m=this.spatialReference,u=y.z,w=y.m,A=y.x,C=y.y;y=y.spatialReference;if(!m.equals(y))if(m.isWebMercator&&y.isWGS84)C=l.lngLatToXY(A,C),A=C[0],C=C[1],y=m;else if(m.isWGS84&&y.isWebMercator)C=
l.xyToLngLat(A,C),A=C[0],C=C[1],y=m;else return!1;return B===A&&z===C&&b===u&&c===w&&m.wkid===y.wkid};v.prototype.offset=function(y,B,z){this.x+=y;this.y+=B;null!=z&&this.hasZ&&(this.z+=z);return this};v.prototype.normalize=function(){if(!this.spatialReference)return this;var y=e.getInfo(this.spatialReference);if(!y)return this;var B=this.x,z=y.valid;y=z[0];var b=z[1];z=2*b;B>b?(y=Math.ceil(Math.abs(B-b)/z),B-=y*z):B<y&&(y=Math.ceil(Math.abs(B-y)/z),B+=y*z);this._set("x",B);return this};v.prototype.distance=
function(y){return x.distance(this,y)};v.prototype.toArray=function(){var y=this.hasZ,B=this.hasM;return y&&B?[this.x,this.y,this.z,this.m]:y?[this.x,this.y,this.z]:B?[this.x,this.y,this.m]:[this.x,this.y]};v.prototype.toJSON=function(y){return this.write(null,y)};f([p.property({dependsOn:["x","y","z","m","spatialReference"]})],v.prototype,"cache",void 0);f([p.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],v.prototype,"hasM",null);f([p.property({type:Boolean,
dependsOn:["z"],json:{write:{enabled:!1,overridePolicy:null}}})],v.prototype,"hasZ",null);f([p.property({type:Number,dependsOn:["y"]})],v.prototype,"latitude",null);f([p.property({type:Number,dependsOn:["x"]})],v.prototype,"longitude",null);f([p.property({type:Number,json:{write:{isRequired:!0}}})],v.prototype,"x",void 0);f([p.property({type:Number,json:{write:!0}})],v.prototype,"y",void 0);f([p.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],v.prototype,
"z",void 0);f([p.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],v.prototype,"m",void 0);return v=x=f([p.subclass("esri.geometry.Point")],v)}(p.declared(n));D.prototype.toJSON.isDefaultToJSON=!0;return D})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(D,k){return function(a,f){a.__bases__=f.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(D,
k,a,f){var g=arguments.length,p=3>g?k:null===f?f=Object.getOwnPropertyDescriptor(k,a):f,n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)p=Reflect.decorate(D,k,a,f);else for(var d=D.length-1;0<=d;d--)if(n=D[d])p=(3>g?n(p):3<g?n(k,a,p):n(k,a))||p;return 3<g&&p&&Object.defineProperty(k,a,p),p}})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h){function t(r){for(var q in r)k.hasOwnProperty(q)||(k[q]=r[q])}Object.defineProperty(k,"__esModule",{value:!0});t(a);t(f);t(g);t(p);t(n);t(d);t(e);t(l);t(h)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.aliasOf=function(f){return function(g,p){a.getPropertyMetadata(g,p).aliasOf=f}}})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(D,k){function a(d){return null!=d.__accessorMetadata__}function f(d){return a(d)&&null!=g(d).properties}function g(d){d.__accessorMetadata__||Object.defineProperty(d,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return d.__accessorMetadata__}function p(d){d=g(d);var e=d.properties;e||(e=d.properties={});return e}function n(d,e){var l=g(d),h=l.parameters;h||(h=l.parameters={});l=h[e];l||(l=[],h[e]=l);return l}Object.defineProperty(k,"__esModule",{value:!0});
k.hasMetadata=a;k.hasPropertiesMetadata=f;k.hasPropertyMetadata=function(d,e){return f(d)&&null!=p(d)[e]};k.hasParametersMetadata=function(d,e){return a(d)&&null!=g(d).parameters&&null!=g(d).parameters[e]};k.getMetadata=g;k.getPropertiesMetadata=p;k.getPropertyMetadata=function(d,e){var l=p(d),h=l[e];h||(h=l[e]={});return h};k.setPropertyMetadata=function(d,e,l){p(d)[e]=l};k.getParametersMetadata=n;k.getParameterMetadata=function(d,e,l){var h=n(d,e)[l];h||(n(d,e)[l]=h={index:l});return h}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.autoDestroy=function(){return function(f,g,p){a.getMetadata(f).autoDestroy=!0;return f[g]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(D,k,a,f){function g(l){var h="_meta"in l?a.ensureType(l):l;return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.push(h);return"number"===typeof t[2]?
n.apply(this,t):p.apply(this,t)}}function p(l,h,t,r){f.getPropertyMetadata(l,h).cast=r}function n(l,h,t,r){f.getParameterMetadata(l,h,t).cast=r}function d(l){return function(h,t,r){f.getPropertyMetadata(h,l).cast=h[t]}}Object.defineProperty(k,"__esModule",{value:!0});var e=Object.prototype.toString;k.autocastMethod=function(l,h,t){if(f.hasParametersMetadata(l,h)){var r=f.getParametersMetadata(l,h).filter(function(v){return null!=v.cast});if(r.length){var q=t.value;t.value=function(){for(var v=[],
x=0;x<arguments.length;x++)v[x]=arguments[x];for(x=0;x<r.length;x++){var y=r[x];v[y.index]=y.cast(v[y.index])}return q.apply(this,v)};return t}}};k.cast=function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];if(3!==l.length||"string"!==typeof l[1]){if(1===l.length&&"[object Function]"===e.call(l[0]))return g(l[0]);if(1===l.length&&"string"===typeof l[0])return d(l[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(D,
k,a){function f(c,m){return m.isInstanceOf?m.isInstanceOf(c):m instanceof c}function g(c){return null==c?c:new Date(c)}function p(c){return null==c?c:!!c}function n(c){return null==c?c:c.toString()}function d(c){return null==c?c:parseFloat(c)}function e(c){return null==c?c:Math.round(parseFloat(c))}function l(c){return c&&c.constructor&&void 0!==c.constructor._meta}function h(c,m){return null!=m&&c&&!f(c,m)}function t(c,m){h(c,m)&&(l(m)?z.error("Accessor#set","Assigning an instance of '"+(m.declaredClass||
"unknown")+"' which is not a subclass of '"+(c&&c.prototype&&c.prototype.declaredClass||"unknown")+"'"):m=new c(m));return m}function r(c){switch(c){case Number:return d;case b:return e;case Boolean:return p;case String:return n;case Date:return g;default:return t.bind(null,c)}}function q(c,m){var u=r(c);return 1===arguments.length?u:u(m)}function v(c,m){return 1===arguments.length?v.bind(null,c):m?Array.isArray(m)?m.map(c):[c(m)]:m}function x(c,m,u){return 0!==m&&Array.isArray(u)?u.map(function(w){return x(c,
m-1,w)}):c(u)}function y(c,m,u){if(2===arguments.length)return y.bind(null,c,m);if(!u)return u;u=x(c,m,u);for(var w=m,A=u;0<w&&Array.isArray(A);)w--,A=A[0];if(void 0!==A)for(A=0;A<w;A++)u=[u];return u}function B(c,m){if(2===arguments.length)return B(c).call(null,m);var u={},w=[],A=[],C;for(C in c.typeMap){var E=c.typeMap[C];u[C]=q(E);w.push(E&&E.prototype&&E.prototype.declaredClass||"unknown");A.push(C)}var G="string"===typeof c.key?function(F){return F[c.key]}:c.key;return function(F){if(c.base&&
!h(c.base,F))return F;var I=G(F)||c.defaultKeyValue,M=u[I];if(!M)return z.error("Accessor#set","Invalid property value, value needs to be one of '"+(w.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(A.join("', '")+"')")),null;if(!h(c.typeMap[I],F))return F;if("string"!==typeof c.key||l(F))return M(F);I={};for(var Y in F)Y!==c.key&&(I[Y]=F[Y]);return M(I)}}Object.defineProperty(k,"__esModule",{value:!0});var z=a.getLogger("esri.core.Accessor");k.isInstanceOf=f;k.ensureDate=
g;k.ensureBoolean=p;k.ensureString=n;k.ensureNumber=d;k.ensureInteger=e;k.isClassedType=l;k.requiresType=h;k.ensureClass=t;k.ensureType=q;k.ensureArrayTyped=v;k.ensureArray=function(c,m){return 1===arguments.length?v(q.bind(null,c)):v(q.bind(null,c),m)};k.ensureNArrayTyped=y;k.ensureNArray=function(c,m,u){return 2===arguments.length?y(q.bind(null,c),m):y(q.bind(null,c),m,u)};k.ensureOneOfType=B;var b=function(){return function(){}}();k.Integer=b;k["default"]=q})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.declared=function(a){for(var f=[],g=1;g<arguments.length;g++)f[g-1]=arguments[g];g=function(){return this||{}};g.__bases__=[a].concat(f);return g}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(D,k,a,f,g,p){Object.defineProperty(k,"__esModule",{value:!0});g.getLogger("esri.core.accessorSupport.decorators.property");
k.property=function(n){void 0===n&&(n={});return function(d,e){var l=d.constructor.prototype;if(l!==Function.prototype){var h=Object.getOwnPropertyDescriptor(d,e);h&&(h.get||h.set)?(n=f.clone(n),h.set&&(n.set=h.set),h.get&&(n.get=h.get)):h&&h.hasOwnProperty("value")&&(n=f.clone(n),n.value=h.value);l=p.getPropertyMetadata(l,e);for(var t in n)h=n[t],Array.isArray(h)?l[t]=(l[t]||[]).concat(h):l[t]=h}}};k.propertyJSONMeta=function(n,d,e){n=p.getPropertyMetadata(n.constructor.prototype,e);n.json||(n.json=
{});n=n.json;void 0!==d&&(n.origins||(n.origins={}),n.origins[d]||(n.origins[d]={}),n=n.origins[d]);return n}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(D,k,a,f){Object.defineProperty(k,"__esModule",{value:!0});k.reader=function(g,p,n){if(void 0===p||Array.isArray(p)){var d=g;n=p;var e=[void 0]}else d=p,e=Array.isArray(g)?g:[g];return function(l,h,t){var r=l.constructor.prototype;e.forEach(function(q){q=
f.propertyJSONMeta(l,q,d);q.read&&"object"!==typeof q.read&&(q.read={});a.setDeepValue("read.reader",r[h],q);n&&(q.read.source=(q.read.source||[]).concat(n))})}}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(D,k){function a(f,g,p){for(var n=0;n<f.length;n++){var d=f[n];if(!(d in p))if(g)p[d]={};else return;p=p[d]}return p}Object.defineProperty(k,"__esModule",{value:!0});k.getDeepValue=function(f,g){return a(f.split("."),!1,g)};k.setDeepValue=function(f,
g,p){var n=f.split(".");f=n.pop();(p=a(n,!0,p))&&f&&(p[f]=g)}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.shared=function(a){return function(f,g){f[g]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(D,k,a,f){function g(h,t){h.read&&("function"===typeof h.read?t.push(h.read):
"object"===typeof h.read&&h.read.reader&&t.push(h.read.reader))}function p(h,t){h.write&&("function"===typeof h.write?t.push(h.write):"object"===typeof h.write&&h.write.writer&&t.push(h.write.writer))}function n(h){var t=[];h=f.getPropertiesMetadata(h.prototype);if(!h)return t;for(var r in h){var q=h[r];q.cast&&t.push(q.cast);q.copy&&t.push(q.copy);if(q=q.json)if(g(q,t),p(q,t),q=q.origins)for(var v in q){var x=q[v];g(x,t);p(x,t)}}return t}function d(h){var t={values:{},descriptors:{}},r=["__bases__"],
q=f.getPropertiesMetadata(h.prototype),v=n(h);Object.getOwnPropertyNames(h.prototype).filter(function(x){return-1!==r.indexOf(x)||q&&q.hasOwnProperty(x)||!l(Object.getOwnPropertyDescriptor(h.prototype,x))&&-1!==v.indexOf(h.prototype[x])?!1:!0}).forEach(function(x){var y=Object.getOwnPropertyDescriptor(h.prototype,x);l(y)?t.descriptors[x]=y:t.values[x]=h.prototype[x]});return t}function e(h){var t=Object.getOwnPropertyNames(h),r=Object.getPrototypeOf(h.prototype).constructor,q=Object.getOwnPropertyNames(Function);
q.push("__bases__");var v=Object.getOwnPropertyNames(r),x={values:{},descriptors:{}};t.filter(function(y){return-1!==q.indexOf(y)?!1:-1===v.indexOf(y)||r[y]!==h[y]?!0:!1}).forEach(function(y){var B=Object.getOwnPropertyDescriptor(h,y);l(B)?x.descriptors[y]=B:x.values[y]=h[y]});return x}function l(h){return h&&!(!h.get&&!h.set)}Object.defineProperty(k,"__esModule",{value:!0});k.subclass=function(h){return function(t){var r=d(t),q=e(t);null!=h&&(r.values.declaredClass=h);t=a(t.__bases__,r.values);Object.defineProperties(t.prototype,
r.descriptors);for(var v in q.values)t[v]=q.values[v];Object.defineProperties(t,q.descriptors);return t}}})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(D,k,a){function f(d,e){d&&!Array.isArray(d)&&"function"!==typeof d&&(e=d,d=null);d=d||[];e=e||{};return g([this].concat(d),e)}function g(d,e){d&&!Array.isArray(d)&&"function"!==typeof d&&(e=d,d=null);"function"===typeof d?d=[d]:d||(d=[]);e=e||{};var l;var h=0;for(l=p.length;h<l;h++)p[h](d,
e);var t=a(d,e);t.createSubclass=f;h=0;for(l=n.length;h<l;h++)n[h](t);return t}var p=[],n=[];(function(d){d.hasMixin=function(e,l){var h=Array.isArray(e)?e.reduce(function(r,q){return q._meta?r.concat(q._meta.bases):r},[]):e._meta?e._meta.bases:e;if(!h)return!1;if("string"===typeof l)for(var t=h.length-1;0<=t;t--)if(h[t].prototype.declaredClass===l)return!0;return-1!==h.indexOf(l)};d.safeMixin=function(e,l){return a.safeMixin(e,l)};d.before=function(e){p.push(e)};d.after=function(e){n.push(e)}})(g||
(g={}));return g})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(D,k,a,f){Object.defineProperty(k,"__esModule",{value:!0});k.writer=function(g,p,n){if(void 0===p){var d=g;var e=[void 0]}else"string"!==typeof p?(d=g,e=[void 0],n=p):(d=p,e=Array.isArray(g)?g:[g]);return function(l,h,t){var r=l.constructor.prototype;e.forEach(function(q){q=f.propertyJSONMeta(l,q,d);q.write&&"object"!==typeof q.write&&(q.write=
{});n&&a.setDeepValue("write.target",n,q);a.setDeepValue("write.writer",r[h],q)})}}})},"esri/layers/vectorTiles/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(D,k,a,f,g,p,n){return function(d){function e(){var l=d.call(this)||this;l.type=null;l.extent=null;l.hasM=!1;l.hasZ=!1;l.spatialReference=n.WGS84;return l}a(e,d);Object.defineProperty(e.prototype,
"cache",{get:function(){return{}},enumerable:!0,configurable:!0});e.prototype.clone=function(){return null};e.prototype.clearCache=function(){this.notifyChange("cache")};e.prototype.getCacheValue=function(l){return this.cache[l]};e.prototype.setCacheValue=function(l,h){this.cache[l]=h};f([p.property()],e.prototype,"type",void 0);f([p.property({readOnly:!0,dependsOn:["spatialReference"]})],e.prototype,"cache",null);f([p.property({readOnly:!0,dependsOn:["spatialReference"]})],e.prototype,"extent",void 0);
f([p.property({type:Boolean,json:{write:{overridePolicy:function(l){return{enabled:l}}}}})],e.prototype,"hasM",void 0);f([p.property({type:Boolean,json:{write:{overridePolicy:function(l){return{enabled:l}}}}})],e.prototype,"hasZ",void 0);f([p.property({type:n,json:{write:!0}})],e.prototype,"spatialReference",void 0);return e=f([p.subclass("esri.geometry.Geometry")],e)}(p.declared(g))})},"esri/layers/vectorTiles/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
function(D,k,a,f,g,p,n,d,e){function l(t,r){if(!t)return null;if(t.declaredClass)throw Error("JSON object is already hydrated");var q=new this;q.read(t,r);return q}var h=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}a(r,t);r.prototype.read=function(q,v){d["default"](this,q,v);return this};r.prototype.write=function(q,v){return e["default"](this,q||{},v)};r.prototype.toJSON=function(q){return this.write(null,q)};r.fromJSON=function(q,v){return l.call(this,q,v)};return r=f([n.subclass("esri.core.JSONSupport")],
r)}(n.declared(g));h.prototype.toJSON.isDefaultToJSON=!0;p.after(function(t){p.hasMixin(t,h)&&(t.fromJSON=l.bind(t))});return h})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(D,k,a,f,g,p){k=k["default"];D.before(function(d,e){D.hasMixin(d,n)&&f.processPrototype(e)});D.after(function(d){D.hasMixin(d,n)&&(f.processClass(d),Object.defineProperties(d.prototype,
{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var n=D(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===n)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new k(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var d=[],e=0;e<arguments.length;e++)d.push(arguments[e]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,d)}},__accessor__:null,postscript:function(d){var e=this.__accessor__;d=e.ctorArgs||d;if(null!=this.getDefaults){var l=this.getDefaults(d||{});this.set(l)}e.initialize();d&&(this.set(d),e.ctorArgs=null);e.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(d){}else p.removeTarget(this),this.__accessor__.destroy()},get:function(d){return a.get(this,d)},hasOwnProperty:function(d){return this.__accessor__?this.__accessor__.has(d):Object.prototype.hasOwnProperty.call(this,d)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(d,e){g.set(this,d,e);return this},watch:function(d,e,l){return p.watch(this,d,e,l)},_clearOverride:function(d){return this.__accessor__.clearOverride(d)},_override:function(d,e){return this.__accessor__.override(d,
e)},_isOverridden:function(d){return this.__accessor__.isOverridden(d)},notifyChange:function(d){this.__accessor__.propertyInvalidated(d)},_get:function(d){return this.__accessor__.internalGet(d)},_set:function(d,e){return this.__accessor__.internalSet(d,e)}});return n})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(D,k,a,f,g,p,n){Object.defineProperty(k,"__esModule",{value:!0});
f.getLogger("esri.core.accessorSupport.Properties");D=function(){function d(e){this.host=e;this._origin=p.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new n["default"];e=this.host.constructor.__accessorMetadata__;this.metadatas=e.properties;this.autoDestroy=e.autoDestroy}d.prototype.initialize=function(){this.lifecycle=1;g.instanceCreated(this.host,this.metadatas)};d.prototype.constructed=function(){this.lifecycle=
2};d.prototype.destroy=function(){this.destroyed=!0;var e=this.cursors;if(this.cursors)for(var l=0,h=Object.getOwnPropertyNames(e);l<h.length;l++){var t=h[l],r=e[t];if(r){for(;0<r.length;)r.pop().propertyDestroyed(this,t);e[t]=null}}if(this.autoDestroy)for(t in this.metadatas)(e=this.internalGet(t))&&e&&"function"===typeof e.destroy&&(e.destroy(),this.metadatas[t].nonNullable||this.internalSet(t,null))};Object.defineProperty(d.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,
configurable:!0});d.prototype.clearOverride=function(e){this.isOverridden(e)&&(this.overridden[e]=!1,this.propertyInvalidated(e))};d.prototype.get=function(e){var l=this.metadatas[e];if(this.store.has(e)&&!this.dirties[e])return this.store.get(e);var h=l.get;return h?(l=h.call(this.host),this.store.set(e,l,p.OriginId.COMPUTED),this.propertyCommitted(e),l):l.value};d.prototype.originOf=function(e){var l=this.store.originOf(e);return void 0===l&&(e=this.metadatas[e])&&e.hasOwnProperty("value")?"defaults":
p.idToName(l)};d.prototype.has=function(e){return this.metadatas[e]?this.store.has(e):!1};d.prototype.internalGet=function(e){if(this.metadatas[e]){var l=this.store;return l.has(e)?l.get(e):this.metadatas[e].value}};d.prototype.internalSet=function(e,l){this.metadatas[e]&&(this.propertyInvalidated(e),this.initialized?this.store.set(e,l,this._origin):this.store.set(e,l,p.OriginId.DEFAULTS),this.propertyCommitted(e))};d.prototype.isOverridden=function(e){return null!=this.overridden&&!0===this.overridden[e]};
d.prototype.keys=function(){return this.store.keys()};d.prototype.override=function(e,l){if(this.metadatas[e]){this.overridden||(this.overridden={});var h=this.metadatas[e];h.nonNullable&&null==l||((h=h.cast)&&(l=h.call(this.host,l)),this.overridden[e]=!0,this.internalSet(e,l))}};d.prototype.set=function(e,l){if(this.metadatas[e]){var h=this.metadatas[e];if(!h.nonNullable||null!=l){var t=h.set;(h=h.cast)&&(l=h.call(this.host,l));t?t.call(this.host,l):this.internalSet(e,l)}}};d.prototype.setDefaultOrigin=
function(e){this._origin=p.nameToId(e)};d.prototype.propertyInvalidated=function(e){var l=this.dirties,h=this.isOverridden(e),t=this.cursors&&this.cursors[e],r=this.metadatas[e].computes;if(t)for(var q=0;q<t.length;q++)t[q].propertyInvalidated(this,e);h||(l[e]=!0);if(r)for(e=0;e<r.length;e++)this.propertyInvalidated(r[e])};d.prototype.propertyCommitted=function(e){var l=this.cursors&&this.cursors[e];this.dirties[e]=!1;if(l)for(var h=0;h<l.length;h++)l[h].propertyCommitted(this,e)};d.prototype.addCursor=
function(e,l){this.cursors||(this.cursors={});var h=this.cursors[e];h||(this.cursors[e]=h=[]);h.push(l)};d.prototype.removeCursor=function(e,l){var h=this.cursors[e];this.cursors[e]&&(h.splice(h.indexOf(l),1),0===h.length&&(this.cursors[e]=null))};return d}();k["default"]=D})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(D,k,a,f,g){Object.defineProperty(k,
"__esModule",{value:!0});var p=[a["default"],f["default"],g["default"]];k.processPrototypeMetadatas=function(n,d){for(var e=Object.getOwnPropertyNames(n),l=0;l<p.length;l++){var h=p[l];if(h.processPrototypePropertyMetadata)for(var t=0,r=e;t<r.length;t++){var q=r[t];h.processPrototypePropertyMetadata(q,n[q],n,d)}}};k.processClassMetadatas=function(n,d){for(var e=Object.getOwnPropertyNames(n),l=0;l<p.length;l++){var h=p[l];if(h.processClassPropertyMetadata)for(var t=0,r=e;t<r.length;t++){var q=r[t];
h.processClassPropertyMetadata(q,n[q],n,d)}}};k.instanceCreated=function(n,d){for(var e=Object.getOwnPropertyNames(d),l=0;l<p.length;l++){var h=p[l];h.instanceCreated&&h.instanceCreated(n,d,e)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(D,k,a,f,g,p,n){function d(e,l,h){var t=p.getProperties(e);return n.wire(e,h.aliasOf,function(){t.propertyInvalidated(l)})}Object.defineProperty(k,
"__esModule",{value:!0});k.AliasedPropertyExtension={processClassPropertyMetadata:function(e,l,h,t){var r=l.aliasOf;if(r&&(e=r.split(".")[0],null!=h[e]&&!l.set&&!l.get)){var q;l.get=function(){var v=f["default"](this,r);if("function"===typeof v){q||(q=r.split(".").slice(0,-1).join("."));var x=f["default"](this,q);x&&(v=v.bind(x))}return v};l.readOnly||(l.set=function(v){return g["default"](this,r,v)})}},instanceCreated:function(e,l,h){for(var t=0;t<h.length;t++){var r=h[t],q=l[r];q.aliasOf&&d(e,r,
q)}}};k["default"]=k.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(D,k,a){function f(d,e,l){if(null!=l.getItemAt||Array.isArray(l)){var h=parseInt(d,10);if(!isNaN(h))return Array.isArray(l)?l[h]:l.getItemAt(h)}h=a.getProperties(l);return e?a.isPropertyDeclared(h,d)?h.get(d):l[d]:a.isPropertyDeclared(h,d)?h.internalGet(d):l[d]}function g(d,e,l,h){if(null==d)return d;if((d=f(e[h],l,d))||!(h<e.length-1))return h===
e.length-1?d:g(d,e,l,h+1)}function p(d,e,l,h){void 0===l&&(l=!1);void 0===h&&(h=0);return"string"===typeof e&&-1===e.indexOf(".")?f(e,l,d):g(d,a.pathToArray(e),l,h)}function n(d,e){return p(d,e,!0)}Object.defineProperty(k,"__esModule",{value:!0});k.valueOf=p;k.get=n;k.exists=function(d,e){return void 0!==p(e,d,!0)};k["default"]=n})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(D,k,a){function f(d,e){return e?Object.keys(e).reduce(function(l,
h){if("value"===h)return l[h]=e[h],l;if(void 0===l[h])return l[h]=a.clone(e[h]),l;var t=l[h],r=e[h];if(t===r)return l;if(Array.isArray(r)||Array.isArray(l))t=t?Array.isArray(t)?l[h]=t.concat():l[h]=[t]:l[h]=[],r&&(Array.isArray(r)||(r=[r]),r.forEach(function(q){-1===t.indexOf(q)&&t.push(q)}));else if(r&&"object"===typeof r)l[h]=f(t,r);else if(!l.hasOwnProperty(h)||e.hasOwnProperty(h))l[h]=r;return l},d||{}):d}function g(d){return Array.isArray(d)?d:d.split(".")}function p(d){if(Array.isArray(d)||
-1<d.indexOf(",")){d=Array.isArray(d)?d:d.split(",");for(var e=0;e<d.length;e++)d[e]=d[e].trim();return 1===d.length?d[0]:d}return d.trim()}function n(d){var e=!1;return function(){e||(e=!0,d())}}Object.defineProperty(k,"__esModule",{value:!0});k.getProperties=function(d){return d?d.__accessor__?d.__accessor__:d.propertyInvalidated?d:null:null};k.isPropertyDeclared=function(d,e){return d&&d.metadatas&&null!=d.metadatas[e]};k.merge=f;k.pathToStringOrArray=function(d){return d?"string"===typeof d&&
-1===d.indexOf(".")?d:g(d):d};k.pathToArray=g;k.splitPath=p;k.parse=function(d,e,l,h){e=p(e);if(Array.isArray(e)){var t=e.map(function(r){return h(d,r.trim(),l)});return{remove:n(function(){return t.forEach(function(r){return r.remove()})})}}return h(d,e.trim(),l)};k.once=n})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(D,k,a,f,g){function p(n,d,e){if(n&&d)if("object"===typeof d){e=0;for(var l=Object.getOwnPropertyNames(d);e<
l.length;e++){var h=l[e];p(n,h,d[h])}}else"_"!==d[0]&&(-1!==d.indexOf(".")?(d=d.split("."),h=d.splice(d.length-1,1)[0],p(g["default"](n,d),h,e)):n[d]=e)}Object.defineProperty(k,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.set");k.set=p;k["default"]=p})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(D,k,a){function f(l,h,t){h=a.splitPath(h);if(Array.isArray(h)){for(var r=[],q=0;q<h.length;q++)r.push((new g(h[q],t)).install(l));
return new d(r)}l=(new g(h,t)).install(l);return new e(l)}Object.defineProperty(k,"__esModule",{value:!0});var g=function(){function l(h,t){this.path=h;this.callback=t;this.chain=null;this.path=h;-1<h.indexOf(".")&&(this.chain=a.pathToArray(h));this.callback=t;return this}l.prototype.install=function(h){h=this.chain?new n(this,h):new p(this,h);return h};l.prototype.notify=function(h){this.callback(h,this.path)};return l}(),p=function(){function l(h,t){this.binding=h;this.target=t;a.getProperties(t).addCursor(this.binding.path,
this)}l.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};l.prototype.propertyDestroyed=function(h,t){a.getProperties(this.target).removeCursor(t,this)};l.prototype.propertyInvalidated=function(h,t){this.binding&&this.binding.notify(this.target)};l.prototype.propertyCommitted=function(h,t){this.binding&&this.binding.notify(this.target)};return l}(),n=function(){function l(h,t){this.binding=h;this.target=t;this.stack=
[];this.properties=a.getProperties(t);this.stack.push({properties:this.properties,propertyName:h.chain[0]});this.properties.addCursor(h.chain[0],this);this.moveForward();return this}l.prototype.destroy=function(){for(;;){var h=this.stack.pop();if(null==h)break;h.properties.removeCursor(h.propertyName,this)}this.target=this.binding=null};l.prototype.propertyDestroyed=function(h,t){this.moveBackward(h,t)};l.prototype.propertyInvalidated=function(h,t){this.binding&&this.binding.notify(this.target)};
l.prototype.propertyCommitted=function(h,t){this.binding&&(this.moveBackward(h,t),this.moveForward(),this.binding.notify(this.target))};l.prototype.moveBackward=function(h,t){for(var r=this.stack,q=r[r.length-1];q.properties!==h&&q.propertyName!==t;)q.properties.removeCursor(q.propertyName,this),r.pop(),q=r[r.length-1]};l.prototype.moveForward=function(){var h=this.stack,t=h[h.length-1];t=t.properties.internalGet(t.propertyName);(t=a.getProperties(t))&&h.length<this.binding.chain.length&&(h=this.binding.chain[h.length],
this.stack.push({properties:t,propertyName:h}),t.addCursor(h,this),this.moveForward())};return l}(),d=function(){function l(h){this.cursors=h}l.prototype.remove=function(){for(var h=this.cursors;0<h.length;)h.pop().destroy();this.cursors=null};return l}(),e=function(){function l(h){this.cursor=h}l.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return l}();k.create=function(l,h){var t=a.splitPath(l);if(Array.isArray(t)){for(var r=[],q=0;q<t.length;q++)r.push(new g(t[q],h));return function(x){for(var y=
[],B=0;B<r.length;B++)y[B]=r[B].install(x);return new d(y)}}var v=new g(t,h);return function(x){return new e(v.install(x))}};k.wire=f;k["default"]=f})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(D,k,a,f,g,p){Object.defineProperty(k,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.extensions.computedProperty");k.ComputedPropertyExtension={processClassPropertyMetadata:function(n,
d,e,l){d.dependsOn&&(e=void 0,e=d.dependsOn.slice())&&(d.wire=p.create(e,function(h){return g.getProperties(h).propertyInvalidated(n)}))},instanceCreated:function(n,d,e){for(var l=0;l<e.length;l++){var h=d[e[l]];h.wire&&h.wire(n)}}};k["default"]=k.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(D,k,a,f,g,p){function n(d,e,l){var h=d&&d.json;d&&d.json&&d.json.origins&&l&&(d=d.json.origins[l.origin])&&e in d&&(h=d);return h}Object.defineProperty(k,"__esModule",{value:!0});k.originSpecificReadPropertyDefinition=function(d,e){return n(d,"read",e)};k.originSpecificWritePropertyDefinition=function(d,e){return n(d,"write",e)};k.SerializablePropertyExtension={processPrototypePropertyMetadata:function(d,e,l,h){if(g.process(e)){a.process(e);l=e.type;for(h=0;Array.isArray(l);)l=l[0],h++;if(e.json.origins)for(var t in e.json.origins){var r=
e.json.origins[t];f.create(l,h,d,r);p.create(l,h,d,r)}f.create(l,h,d,e.json);p.create(l,h,d,e.json)}}};k["default"]=k.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.process=function(a){if(a.json&&a.json.origins){var f=a.json.origins,g={"web-document":["web-scene","web-map"]};a=function(n){if(f[n]){var d=f[n];g[n].forEach(function(e){f[e]=
d});delete f[n]}};for(var p in g)a(p)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(D,k,a,f){function g(t,r,q,v){if(1<r)return d(t,r);if(1===r)return e(t);if(l(t)){var x=e(t.prototype.itemType.Type);return function(y,B,z){return(y=x(y,B,z))?new t(y):y}}return p(t)}function p(t){return t.prototype.read?function(r,q,v){return null==r?r:(new t).read(r,v)}:t.fromJSON}function n(t,r,
q,v){return 0!==v&&Array.isArray(r)?r.map(function(x){return n(t,x,q,v-1)}):t(r,null,q)}function d(t,r){var q=p(t),v=n.bind(null,q);return function(x,y,B){if(null==x)return x;x=v(x,B,r);y=r;for(B=x;0<y&&Array.isArray(B);)y--,B=B[0];if(void 0!==B)for(B=0;B<y;B++)x=[x];return x}}function e(t){var r=p(t);return function(q,v,x){return null==q?q:Array.isArray(q)?q.map(function(y){return r(y,null,x)}):[r(q,null,x)]}}function l(t){return f.isCollection(t)?(t=t.prototype.itemType)&&t.Type&&"function"===typeof t.Type?
h(t.Type):!1:!1}function h(t){return!!t&&(!!t.prototype.read||!!t.fromJSON||l(t))}Object.defineProperty(k,"__esModule",{value:!0});k.create=function(t,r,q,v){(!v.read||!v.read.reader&&!1!==v.read.enabled)&&h(t)&&a.setDeepValue("read.reader",g(t,r,q,v),v)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&
0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(D,k){function a(g){"boolean"===typeof g.read?g.read={enabled:g.read}:"function"===typeof g.read?g.read={enabled:!0,reader:g.read}:g.read&&"object"===typeof g.read&&void 0===g.read.enabled&&(g.read.enabled=!0)}function f(g){"boolean"===typeof g.write?g.write={enabled:g.write}:"function"===typeof g.write?
g.write={enabled:!0,writer:g.write}:g.write&&"object"===typeof g.write&&void 0===g.write.enabled&&(g.write.enabled=!0)}Object.defineProperty(k,"__esModule",{value:!0});k.process=function(g){g.json||(g.json={});a(g.json);f(g.json);if(g.json.origins)for(var p in g.json.origins)a(g.json.origins[p]),f(g.json.origins[p]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(D,k,a,f){function g(l,
h,t,r){a.setDeepValue(t,p(l,r),h)}function p(l,h){var t;return t=l&&"function"===typeof l.write?l.write({},h):l&&"function"===typeof l.toJSON?l.toJSON():"number"===typeof l?-Infinity===l?-Number.MAX_VALUE:Infinity===l?Number.MAX_VALUE:isNaN(l)?null:l:l}function n(l,h,t,r){null===l?l=null:l&&"function"===typeof l.map?(l=l.map(function(q){return p(q,r)}),"function"===typeof l.toArray&&(l=l.toArray())):l=[p(l,r)];a.setDeepValue(t,l,h)}function d(l,h,t){return 0!==t&&Array.isArray(l)?l.map(function(r){return d(r,
h,t-1)}):p(l,h)}function e(l){return function(h,t,r,q){if(null===h)h=null;else{h=d(h,q,l);q=l;for(var v=h;0<q&&Array.isArray(v);)q--,v=v[0];if(void 0!==v)for(v=0;v<q;v++)h=[h]}a.setDeepValue(r,h,t)}}Object.defineProperty(k,"__esModule",{value:!0});k.create=function(l,h,t,r){r.write&&!r.write.writer&&!1!==r.write.enabled&&(1===h||f.isCollection(l)?r.write.writer=n:r.write.writer=1<h?e(h):g)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(D,
k){function a(p){switch(p){case "defaults":return g.DEFAULTS;case "service":return g.SERVICE;case "portal-item":return g.PORTAL_ITEM;case "web-scene":return g.WEB_SCENE;case "web-map":return g.WEB_MAP;case "user":return g.USER}}function f(p){switch(p){case g.DEFAULTS:return"defaults";case g.SERVICE:return"service";case g.PORTAL_ITEM:return"portal-item";case g.WEB_SCENE:return"web-scene";case g.WEB_MAP:return"web-map";case g.USER:return"user"}}Object.defineProperty(k,"__esModule",{value:!0});var g;
(function(p){p[p.DEFAULTS=0]="DEFAULTS";p[p.COMPUTED=1]="COMPUTED";p[p.SERVICE=2]="SERVICE";p[p.PORTAL_ITEM=3]="PORTAL_ITEM";p[p.WEB_SCENE=4]="WEB_SCENE";p[p.WEB_MAP=5]="WEB_MAP";p[p.USER=6]="USER";p[p.NUM=7]="NUM"})(g=k.OriginId||(k.OriginId={}));k.nameToId=a;k.idToName=f;k.readableNameToId=function(p){return a(p)};k.idToReadableName=function(p){return f(p)};k.writableNameToId=function(p){return a(p)};k.idToWritableName=function(p){return f(p)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});D=function(){function f(){this._values={}}f.prototype.get=function(g){return this._values[g]};f.prototype.originOf=function(g){return a.OriginId.USER};f.prototype.keys=function(){return Object.keys(this._values)};f.prototype.set=function(g,p){this._values[g]=p};f.prototype.clear=function(g){delete this._values[g]};f.prototype.has=function(g){return g in this._values};return f}();k["default"]=D})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(D,k,a,f,g,p,n,d){Object.defineProperty(k,"__esModule",{value:!0});var e=Object.prototype.hasOwnProperty,l=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,h={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},t=/^_(set|get)([a-zA-Z0-9]+)Attr$/;k.processPrototype=function(r){for(var q=r.declaredClass,v=r.properties||{},x=0,y=Object.getOwnPropertyNames(v);x<y.length;x++){var B=y[x],z=v[B],b=typeof z;null==z?p.setPropertyMetadata(r,B,{value:z}):
Array.isArray(z)?p.setPropertyMetadata(r,B,{type:[z[0]],value:null}):"object"===b?n.getProperties(z)||z instanceof Date?p.setPropertyMetadata(r,B,{type:z.constructor,value:z}):p.setPropertyMetadata(r,B,z):"boolean"===b?p.setPropertyMetadata(r,B,{type:Boolean,value:z}):"string"===b?p.setPropertyMetadata(r,B,{type:String,value:z}):"number"===b?p.setPropertyMetadata(r,B,{type:Number,value:z}):"function"===b&&p.setPropertyMetadata(r,B,{type:z,value:null})}x=0;for(y=Object.getOwnPropertyNames(r);x<y.length;x++){b=
y[x];z=r[b];v=B=void 0;var c=l.exec(b);if(c)B=c[1],v=h[c[2]];else if(c=t.exec(b))B=c[2][0].toLowerCase()+c[2].substr(1),v=c[1].toLowerCase();B&&v&&(B=p.getPropertyMetadata(r,B),a.setDeepValue(v,z,B))}x=0;for(y=Object.getOwnPropertyNames(p.getPropertiesMetadata(r));x<y.length;x++)if(B=y[x],z=p.getPropertyMetadata(r,B),v=z.type,b=z.types,void 0===z.value&&e.call(r,B)&&(z.value=r[B]),!z.cast&&v){B=z;z=0;for(b=v;Array.isArray(b);)b=b[0],z++;v=1===z?f.ensureArray(b):1<z?f.ensureNArray(b,z):f.ensureType(v);
B.cast=v}else!z.cast&&b&&(Array.isArray(b)?z.cast=f.ensureArrayTyped(f.ensureOneOfType(b[0])):z.cast=f.ensureOneOfType(b));g.processPrototypeMetadatas(p.getPropertiesMetadata(r),q);return p.getPropertiesMetadata(r)};k.processClass=function(r){for(var q=r.prototype,v=q.declaredClass,x=r._meta.bases,y={},B=x.length-1;0<=B;B--)n.merge(y,p.getMetadata(x[B].prototype));var z=y.properties;g.processClassMetadatas(z,v);Object.defineProperty(r,"__accessorMetadata__",{value:{properties:z,autoDestroy:!!y.autoDestroy}});
var b={};v=function(c){var m=z[c];b[c]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(c):m.value},set:function(u){var w=this.__accessor__;if(!w)Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:u});else if(!Object.isFrozen(this)){if(w.initialized&&m.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+c+"' of "+this.declaredClass);if(2===w.lifecycle&&m.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
c+"' of "+this.declaredClass);w.set(c,u)}}}};x=0;for(B=Object.getOwnPropertyNames(z);x<B.length;x++)v(B[x]);Object.defineProperties(r.prototype,b);if(y.parameters)for(r=0,v=Object.getOwnPropertyNames(y.parameters);r<v.length;r++)x=v[r],B=Object.getOwnPropertyDescriptor(q,x)||{value:q[x]},(B=d.autocastMethod(q,x,B))&&Object.defineProperty(q,x,B);return y}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(D,k,a,f,g,p,n,d,e){function l(m){B.has(m)?z.splice(z.indexOf(m),1):B.add(m);z.push(m);b||(b=p.schedule(t))}function h(m){if(!m.removed){var u=m.callback,w=m.path,A=m.oldValue,C=m.target,E=n.valueOf(C,m.propertyPath,!0);f.equals(A,E)||(m.oldValue=E,u.call(C,E,A,w,C))}}function t(){if(b){b=null;var m=z;z=y.acquire();B.clear();for(var u=y.acquire(),w=0;w<m.length;w++){var A=m[w];h(A);A.removed&&u.push(A)}for(w=0;w<z.length;w++)A=z[w],A.removed&&(u.push(A),B["delete"](A),z.splice(w,1),--w);for(w=
0;w<u.length;w++)x.pool.release(u[w]);y.release(m);y.release(u);c.forEach(function(C){return C()})}}function r(m,u,w){var A=d.parse(m,u,w,function(C,E,G){var F=n.valueOf(C,E,!0),I,M=e.wire(C,E,function(Y,R){Y.__accessor__.destroyed?A.remove():(I||(I=x.pool.acquire(Y,R,F,G),F=null),l(I))});return{remove:d.once(function(){M.remove();I&&(I.removed=!0,l(I),I=null);A=M=F=null})}});return A}function q(m,u,w){var A=d.parse(m,u,w,function(C,E,G){var F=n.valueOf(C,E,!0),I=!1;return e.wire(C,E,function(M,Y){if(M.__accessor__.destroyed)A.remove();
else if(!I){I=!0;var R=n.valueOf(M,Y,!0);f.equals(F,R)||G.call(M,R,F,Y,M);F=n.valueOf(M,Y,!0);I=!1}})});return A}function v(m,u,w,A){void 0===A&&(A=!1);return!m.__accessor__||m.__accessor__.destroyed?{remove:function(){}}:A?q(m,u,w):r(m,u,w)}Object.defineProperty(k,"__esModule",{value:!0});var x=function(){function m(u,w,A,C){this.target=u;this.path=w;this.oldValue=A;this.callback=C;this.removed=!1;this.propertyPath=d.pathToStringOrArray(w)}m.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};m.pool=new g(m,!0);return m}(),y=new a,B=new Set,z=y.acquire(),b;k.dispatchTarget=function(m){for(var u=y.copy(z),w=0;w<u.length;w++){var A=u[w];A.target===m&&(h(A),B["delete"](A),z.splice(z.indexOf(A),1))}};k.removeTarget=function(m){for(var u=0;u<z.length;u++){var w=z[u];w.target===m&&(w.removed=!0)}};k.dispatch=t;var c=new Set;k.afterDispatch=function(m){c.add(m);return{remove:function(){c["delete"](m)}}};k.watch=v;k.isValueInUse=function(m){return z.some(function(u){return u.oldValue===
m})};k["default"]=v})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(D,k,a){function f(n){n.length=0}var g=Array.prototype.splice;D=function(){function n(d,e){void 0===d&&(d=50);void 0===e&&(e=50);this._pool=new a(Array,!1,f,e,d)}n.prototype.acquire=function(){return this._pool.acquire()};n.prototype.copy=function(d){var e=this.acquire();d.unshift(0,0);g.apply(e,d);d.splice(0,2);return e};n.prototype.release=function(d){this._pool.release(d)};
n.acquire=function(){return p.acquire()};n.copy=function(d){return p.copy(d)};n.release=function(d){return p.release(d)};return n}();var p=new D(100);return D})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(D,k,a,f,g){function p(u){void 0===u&&(u=k.now());k.debug.rafId=null;0<b.length&&(k.debug.rafId=n());if(0<r){var w=u-r;x=Math.min(w,x);if(w<q)return}k.debug.executeFrameTasks(u)}function n(){return k.debug.requestNextFrame?
k.debug.requestNextFrame(l):l()}function d(){for(var u=0;u<b.length;){var w=b[u];u++;if(w.removed){b.splice(u-1,1);for(var A=0;A<B.length;A++){var C=B[A];if(w.phases[C]){C=c[C];var E=C.indexOf(w);-1!==E&&C.splice(E,1)}}}}}function e(){for(;z.length;){var u=z.shift();u.isActive&&(u.isActive=!1,u.callback())}k.debug.willDispatch=!1}function l(){return g(p)}Object.defineProperty(k,"__esModule",{value:!0});k.now=f;var h=function(){return function(u){this.phases=u;this.paused=!1;this.pausedAt=0;this.epoch=
-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),t=function(){function u(w){this.callback=w;this.isActive=!0}u.prototype.remove=function(){this.isActive=!1};return u}(),r=-1,q=0,v=0,x=Number.POSITIVE_INFINITY,y={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},B=["prepare","preRender","render","postRender","update"],z=[],b=[],c={prepare:[],preRender:[],render:[],postRender:[],update:[]},m=function(){function u(w){this._task=w}u.prototype.remove=function(){this._task.removed=!0};
u.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=k.now())};u.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=k.now()-this._task.pausedAt))};return u}();k.FrameTaskHandle=m;k.debug={frameTasks:b,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(u){void 0===u&&(u=!1);for(var w=0;w<b.length;w++)b[w].removed=!0;u&&d()},dispatch:e,executeFrameTasks:function(u){void 0===u&&(u=
k.now());0>r&&(r=u);var w=u-r;r=u;for(var A=0;A<b.length;A++){var C=b[A];-1!==C.epoch&&(C.dt=w)}for(A=0;A<B.length;A++){w=B[A];for(var E=c[w],G=0;G<E.length;G++)C=E[G],C.paused||C.removed||(0===A&&C.ticks++,-1===C.epoch&&(C.epoch=u),y.time=u,y.deltaTime=C.dt,y.elapsedFrameTime=k.now()-u,y.frameDuration=0<v?v:x,y.spendInTask=u-C.epoch,C.phases[w].call(C,y))}d()}};k.schedule=function(u){u=new t(u);z.push(u);k.debug.willDispatch||(k.debug.willDispatch=!0,a(e));return u};k.addFrameTask=function(u){var w=
new h(u);b.push(w);for(var A=0,C=B;A<C.length;A++){var E=C[A];u[E]&&c[E].push(w)}k.debug.rafId||(r=-1,k.debug.rafId=n());return new m(w)};k.setFrameRate=function(u){if(0>=u)v=q=0;else{var w=1.05*x;u=Math.ceil(1E3/u/w);q=(u-1)*w;v=u*x}};k.requestNextFrame=n})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(D,k,a){function f(){if(a.postMessage&&!a.importScripts){var p=a.onmessage,n=!0;a.onmessage=function(){n=!1};a.postMessage("","*");a.onmessage=
p;return n}return!1}var g=a.MutationObserver||a.WebKitMutationObserver;return function(){if(a.process&&a.process.nextTick)var p=function(l){a.process.nextTick(l)};else if(a.Promise)p=function(l){a.Promise.resolve().then(l)};else if(g){var n=[],d=document.createElement("div");(new g(function(){for(;0<n.length;)n.shift()()})).observe(d,{attributes:!0});p=function(l){n.push(l);d.setAttribute("queueStatus","1")}}else if(f()){var e=[];a.addEventListener("message",function(l){if(l.source===a&&"esri-nexttick-message"===
l.data)for(l.stopPropagation();e.length;)e.shift()()},!0);p=function(l){e.push(l);a.postMessage("esri-nexttick-message","*")}}else p=a.setImmediate?function(l){return a.setImmediate(l)}:function(l){return a.setTimeout(l,0)};return p}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(D,k){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require",
"exports","./global"],function(D,k,a){return function(){var f=a.performance||{};if(f.now)return function(){return f.now()};if(f.webkitNow)return function(){return f.webkitNow()};if(f.mozNow)return function(){return f.mozNow()};if(f.msNow)return function(){return f.msNow()};if(f.oNow)return function(){return f.oNow()};var g=f.timing&&f.timing.navigationStart?f.timing.navigationStart:Date.now();return function(){return Date.now()-g}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require",
"exports","./global","./now"],function(D,k,a,f){var g=f();D=a.requestAnimationFrame;if(!D){k=["ms","moz","webkit","o"];for(var p=0;p<k.length&&!D;++p)D=a[k[p]+"RequestAnimationFrame"];D||(D=function(n){var d=f(),e=Math.max(0,16-(d-g)),l=a.setTimeout(function(){n(f())},e);g=d+e;return l})}return D})},"esri/layers/vectorTiles/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(D,k,a,f,g,p){function n(e,
l,h){void 0===h&&(h=d);for(var t=g.getProperties(e),r=t.metadatas,q={},v=0,x=Object.getOwnPropertyNames(l);v<x.length;v++){var y=q,B=r,z=x[v],b=l,c=h,m=p.originSpecificReadPropertyDefinition(B[z],c);m&&(!m.read||!1!==m.read.enabled&&!m.read.source)&&(y[z]=!0);for(var u=0,w=Object.getOwnPropertyNames(B);u<w.length;u++){var A=w[u];m=p.originSpecificReadPropertyDefinition(B[A],c);a:{var C=z;var E=b;if(m&&m.read&&!1!==m.read.enabled&&m.read.source)if(m=m.read.source,"string"===typeof m){if(m===C||-1<
m.indexOf(".")&&0===m.indexOf(C)&&f.exists(m,E)){C=!0;break a}}else for(var G=0;G<m.length;G++){var F=m[G];if(F===C||-1<F.indexOf(".")&&0===F.indexOf(C)&&f.exists(F,E)){C=!0;break a}}C=!1}C&&(y[A]=!0)}}t.setDefaultOrigin(h.origin);x=0;for(y=Object.getOwnPropertyNames(q);x<y.length;x++)v=y[x],z=(B=p.originSpecificReadPropertyDefinition(r[v],h).read)&&B.source,b=void 0,b=z&&"string"===typeof z?f.valueOf(l,z):l[v],B&&B.reader&&(b=B.reader.call(e,b,l,h)),void 0!==b&&t.set(v,b);l=0;for(r=Object.getOwnPropertyNames(r);l<
r.length;l++)v=r[l],q[v]||(x=e,y=t,B=h,z=(z=p.originSpecificReadPropertyDefinition(y.metadatas[v],B))&&z.read&&z.read["default"],void 0!==z&&(x="function"===typeof z?z.call(x,v,B):z,void 0!==x&&y.set(v,x)));t.setDefaultOrigin("user")}Object.defineProperty(k,"__esModule",{value:!0});var d={origin:"service"};k.read=n;k.readLoadable=function(e,l,h,t){void 0===t&&(t=d);l=a({},t,{messages:[]});h(l);l.messages.forEach(function(r){"warning"!==r.type||e.loaded?t&&t.messages.push(r):e.loadWarnings.push(r)})};
k["default"]=n})},"esri/layers/vectorTiles/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(D,k,a,f,g,p,n){function d(h,t,r,q,v,x){if(!q||!q.write)return!1;var y=h.get(r);if(void 0===y)return!1;if(!v&&q.write.overridePolicy){var B=q.write.overridePolicy.call(h,y,r,x);void 0!==B&&(v=B)}v||(v=q.write);if(!v||!1===v.enabled)return!1;if(null===y){if(v.allowNull)return!0;v.isRequired&&((h=new a("web-document-write:property-required",
"Missing value for required property '"+r+"' on '"+h.declaredClass+"'",{propertyName:r,target:h}),x)&&x.messages?x.messages.push(h):h&&!x&&l.error(h.name,h.message));return!1}return!v.ignoreOrigin&&x&&x.origin&&t.store.originOf(r)<g.nameToId(x.origin)?!1:!0}function e(h,t,r){if(h&&"function"===typeof h.toJSON&&(!h.toJSON.isDefaultToJSON||!h.write))return p.merge(t,h.toJSON());var q=p.getProperties(h),v=q.metadatas,x;for(x in v){var y=n.originSpecificWritePropertyDefinition(v[x],r);if(d(h,q,x,y,null,
r)){var B=h.get(x),z={};y.write.writer.call(h,B,z,"string"===typeof y.write.target?y.write.target:x,r);y=z;0<Object.keys(y).length&&(t=p.merge(t,y),r&&r.writtenProperties&&r.writtenProperties.push({target:h,propName:x,oldOrigin:g.idToReadableName(q.store.originOf(x)),newOrigin:r.origin}))}}return t}Object.defineProperty(k,"__esModule",{value:!0});var l=f.getLogger("esri.core.accessorSupport.write");k.willPropertyWrite=function(h,t,r,q){var v=p.getProperties(h),x=n.originSpecificWritePropertyDefinition(v.metadatas[t],
q);return x?d(h,v,t,x,r,q):!1};k.write=e;k.disableWriteDefaultPolicy=function(h){return function(t){return{enabled:t!==h}}};k["default"]=e})},"esri/layers/vectorTiles/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(D,k,a,f,g,p,n,d){D=function(e){function l(t){t=e.call(this)||this;t.latestWkid=
null;t.wkid=null;t.wkt=null;return t}a(l,e);var h=l;l.fromJSON=function(t){if(!t)return null;if(t.wkid){if(102100===t.wkid)return h.WebMercator;if(4326===t.wkid)return h.WGS84}var r=new h;r.read(t);return r};l.prototype.normalizeCtorArgs=function(t){return t&&"object"===typeof t?t:(r={},r["string"===typeof t?"wkt":"wkid"]=t,r);var r};Object.defineProperty(l.prototype,"isWGS84",{get:function(){return d.isWGS84(this)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"isWebMercator",
{get:function(){return d.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"isGeographic",{get:function(){return d.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"isWrappable",{get:function(){return d.isWrappable(this)},enumerable:!0,configurable:!0});l.prototype.writeWkt=function(t,r){this.wkid||(r.wkt=t)};l.prototype.clone=function(){if(this===h.WGS84)return h.WGS84;if(this===h.WebMercator)return h.WebMercator;var t=new h;
null!=this.wkid?(t.wkid=this.wkid,null!=this.latestWkid&&(t.latestWkid=this.latestWkid),null!=this.vcsWkid&&(t.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(t.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(t.wkt=this.wkt);return t};l.prototype.equals=function(t){return d.equals(this,t)};l.prototype.toJSON=function(t){return this.write(null,t)};l.GCS_NAD_1927=null;l.WGS84=null;l.WebMercator=null;f([n.property({dependsOn:["wkid"],readOnly:!0})],l.prototype,"isWGS84",null);f([n.property({dependsOn:["wkid"],
readOnly:!0})],l.prototype,"isWebMercator",null);f([n.property({dependsOn:["wkid","wkt"],readOnly:!0})],l.prototype,"isGeographic",null);f([n.property({dependsOn:["wkid"],readOnly:!0})],l.prototype,"isWrappable",null);f([n.property({type:Number,json:{write:!0}})],l.prototype,"latestWkid",void 0);f([n.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],l.prototype,"wkid",void 0);f([n.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===
this.wkid?!0:!1}}}}}}})],l.prototype,"wkt",void 0);f([n.writer("wkt"),n.writer("web-scene","wkt")],l.prototype,"writeWkt",null);f([n.property({type:Number,json:{write:!0}})],l.prototype,"vcsWkid",void 0);f([n.property({type:Number,json:{write:!0}})],l.prototype,"latestVcsWkid",void 0);return l=h=f([n.subclass("esri.geometry.SpatialReference")],l)}(n.declared(g));D.prototype.toJSON.isDefaultToJSON=!0;D.GCS_NAD_1927=new D({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});
D.WGS84=new D(4326);D.WGS84.wkt=p.substitute({Central_Meridian:"0.0"},d.getInfo(D.WGS84).wkTemplate);D.WebMercator=new D({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(D.GCS_NAD_1927),Object.freeze(D.WGS84),Object.freeze(D.WebMercator));return D})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(D,k,a){function f(e){return e.wkid&&!0===g[e.wkid]}Object.defineProperty(k,"__esModule",{value:!0});var g=
{102113:!0,102100:!0,3857:!0,3785:!0},p={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};D=[-2.0037508342788905E7,2.0037508342788905E7];var n=[-2.0037508342787E7,2.0037508342787E7],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:D,origin:n,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:D,origin:n,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:D,origin:n,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:D,origin:n,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};k.equals=function(e,l){if(l){if(e===l)return!0;if(null!=e.wkid||null!=l.wkid)return e.wkid===l.wkid||f(e)&&f(l)||null!=l.latestWkid&&e.wkid===l.latestWkid||null!=e.latestWkid&&l.wkid===e.latestWkid;if(e.wkt&&l.wkt)return e.wkt.toUpperCase()===l.wkt.toUpperCase()}return!1};k.getInfo=function(e){return e.wkid?d[e.wkid]:null};k.isGeographic=function(e){return e.wkid?null==a[e.wkid]:e.wkt?!!/^\s*GEOGCS/i.test(e.wkt):!1};k.isWGS84=function(e){return 4326===
e.wkid};k.isWebMercator=f;k.isWrappable=function(e){return e.wkid&&!0===p[e.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(D){return D})},"esri/layers/vectorTiles/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(D,k,a,f){function g(l,h,t,r,q){if("point"===l.type&&"point"===q.type)h=h(l.x,l.y,e,0,r),q.x=h[0],q.y=h[1];else if("extent"===l.type&&
"extent"===q.type){var v=h(l.xmin,l.ymin,e,0,r);q.xmin=v[0];q.ymin=v[1];h=h(l.xmax,l.ymax,e,0,r);q.xmax=h[0];q.ymax=h[1]}else if("polyline"===l.type&&"polyline"===q.type||"polygon"===l.type&&"polygon"===q.type){v="polyline"===l.type?l.paths:l.rings;var x=[],y=void 0;for(l=0;l<v.length;l++){var B=v[l];y=[];x.push(y);for(var z=0;z<B.length;z++)y.push(h(B[z][0],B[z][1],[0,0],0,r)),2<B[z].length&&y[z].push(B[z][2]),3<B[z].length&&y[z].push(B[z][3])}"polyline"===q.type?q.paths=x:q.rings=x}else if("multipoint"===
l.type&&"multipoint"===q.type){v=l.points;x=[];for(l=0;l<v.length;l++)x[l]=h(v[l][0],v[l][1],[0,0],0,r),2<v[l].length&&x[l].push(v[l][2]),3<v[l].length&&x[l].push(v[l][3]);q.points=x}else if("mesh"===l.type&&"mesh"===q.type&&(v=l.vertexAttributes&&l.vertexAttributes.position,x=q.vertexAttributes&&q.vertexAttributes.position,v))for(y=[0,0],l=0;l<v.length;l+=3)h(v[l],v[l+1],y,0,r),x[l]=y[0],x[l+1]=y[1];q.spatialReference=t;return q}function p(l,h){var t=l&&(null!=l.wkid||null!=l.wkt?l:l.spatialReference),
r=h&&(null!=h.wkid||null!=h.wkt?h:h.spatialReference);return t&&r?f.equals(r,t)?!0:f.isWebMercator(r)&&f.isWGS84(t)||f.isWebMercator(t)&&f.isWGS84(r):!1}function n(l,h,t,r){void 0===t&&(t=[0,0]);void 0===r&&(r=0);89.99999<h?h=89.99999:-89.99999>h&&(h=-89.99999);h*=.017453292519943;t[r]=111319.49079327169*l;t[r+1]=3189068.5*Math.log((1+Math.sin(h))/(1-Math.sin(h)));return t}function d(l,h,t,r,q){void 0===t&&(t=[0,0]);void 0===r&&(r=0);void 0===q&&(q=!1);l=l/6378137*57.29577951308232;t[r]=q?l:l-360*
Math.floor((l+180)/360);t[r+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*h/6378137)));return t}Object.defineProperty(k,"__esModule",{value:!0});var e=[0,0];k.canProject=p;k.project=function(l,h){var t=l&&l.spatialReference,r=h&&(null!=h.wkid||null!=h.wkt?h:h.spatialReference);return p(t,r)?f.equals(t,r)?l.clone():f.isWebMercator(r)?g(l,n,a.WebMercator,!1,l.clone()):f.isWGS84(r)?g(l,d,a.WGS84,!1,l.clone()):null:null};k.lngLatToXY=n;k.xyToLngLat=d;k.geographicToWebMercator=function(l,
h,t){void 0===h&&(h=!1);void 0===t&&(t=l.clone());return g(l,n,a.WebMercator,h,t)};k.webMercatorToGeographic=function(l,h,t){void 0===h&&(h=!1);void 0===t&&(t=l.clone());return g(l,d,a.WGS84,h,t)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileData":function(){define("require exports ./MemoryRequirements ./TileBufferData ./TileDisplayData ./Utils ./WGLDisplayList ./WGLDisplayObject ./WGLDisplayRecord ./mesh/VertexBuffer ./mesh/factories/WGLMeshFactory ./util/Reader ./util/serializationUtils ./util/Writer".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q){var v=new a["default"],x=new a["default"];return function(){function y(){this.tileBufferData=this.tileDisplayData=null}y.prototype.reshuffle=function(){v.reset();var B=this._collectDisplayRecords(),z;for(z in B)for(var b=B[z],c=0,m=b;c<m.length;c++){var u=m[c];v.needMore(u.geometryType,u.meshData?u.meshData.vertexCount:u.vertexCount,u.meshData?u.meshData.indexData.length:u.indexCount)}c=B.length;m=new f;for(z=0;z<c;++z){m.geometries[z].indexBuffer=new Uint32Array(Math.round(1.15*
v.indicesFor(z)));u=[];for(var w in this.tileBufferData.geometries[z].vertexBuffer)u.push(this.tileBufferData.geometries[z].vertexBuffer[w].stride);u=y._computeVertexAlignment(u);b=Math.round(1.15*v.verticesFor(z));u=y._align(b,u);for(var A in this.tileBufferData.geometries[z].vertexBuffer)b=this.tileBufferData.geometries[z].vertexBuffer[A].stride,m.geometries[z].vertexBuffer[A]={stride:b,data:new Uint32Array(Math.round(u*b/4))}}x.reset();this.tileDisplayData.displayList=new n;for(z=0;z<c;++z){b=
B[z];w=0;for(A=b;w<A.length;w++){u=A[w];if(u.meshData)u.writeMeshDataToBuffers(x.verticesFor(z),m.geometries[z].vertexBuffer,x.indicesFor(z),m.geometries[z].indexBuffer),u.meshData=null;else{var C=this.tileBufferData.geometries[z].vertexBuffer,E=this.tileBufferData.geometries[z].indexBuffer,G=m.geometries[z].vertexBuffer,F=m.geometries[z].indexBuffer,I=x.verticesFor(z),M=x.indicesFor(z);p.copyMeshData(I,M,G,F,u,C,E);u.vertexFrom=I;u.indexFrom=M}x.needMore(z,u.vertexCount,u.indexCount)}this.tileDisplayData.displayList.addToList(b)}this.tileBufferData=
m};y.prototype.getStrides=function(){for(var B=[],z=0;z<this.tileBufferData.geometries.length;++z){var b=this.tileBufferData.geometries[z];B[z]={};for(var c in b.vertexBuffer)B[z][c]=b.vertexBuffer[c].stride}return B};y.prototype._guessSize=function(){for(var B=this.tileDisplayData.displayObjects,z=Math.min(B.length,4),b=0,c=0;c<z;c++)b=Math.max(b,B[c].displayRecords.length);return 2*(12*B.length+B.length*b*40)};y.prototype.serialize=function(){var B=this.tileBufferData.serialize(),z=this.tileBufferData.getBuffers(),
b=this.tileDisplayData.serialize(new q["default"](Int32Array,this._guessSize())).buffer();z.push(b);return{result:{displayData:b,bufferData:B},transferList:z}};y.decode=function(B){var z=h.MaterialStore.deserialize(new t["default"](B.materialStore)),b=r.deserializeList(new t["default"](B.displayObjects),d,{store:z});z={};for(var c in B.vertexBuffersMap)z[c]=l.VertexBuffers.decode(B.vertexBuffersMap[c]);B=new y;c=new g;var m=new f;c.displayObjects=b;for(var u in z)b=z[u],m.geometries[u].indexBuffer=
b.indexBuffer,m.geometries[u].vertexBuffer=b.namedBuffers;B.tileDisplayData=c;B.tileBufferData=m;return B};y.bind=function(B,z){var b=new y;b.tileDisplayData=B;b.tileBufferData=z;return b};y.create=function(B,z){var b=new y;b.tileDisplayData=new g;b.tileDisplayData.displayObjects=B;for(var c=[0,0,0,0,0],m=[0,0,0,0,0],u=[[],[],[],[],[]],w=0;w<B.length;w++)for(var A=0,C=B[w].displayRecords;A<C.length;A++){var E=C[A];u[E.geometryType].push(E);c[E.geometryType]+=E.meshData.vertexCount;m[E.geometryType]+=
E.meshData.indexData.length}w=new f;A=[z.fill||{},z.line||{},z.icon||{},z.text||{},z.label||{}];for(C=0;5>C;C++){E=new Uint32Array(m[C]);var G=void 0;var F=A[C],I=c[C],M={};for(G in F){var Y={data:new Uint32Array(I*F[G]/4),stride:F[G]};M[G]=Y}G=M;e.writeAllMeshDataToBuffers(u[C],G,E);w.geometries[C]={indexBuffer:E,vertexBuffer:G}}b.tileBufferData=w;return b};y._align=function(B,z){var b=B%z;return 0===b?B:B+(z-b)};y._computeVertexAlignment=function(B){for(var z=!1,b=!1,c=0;c<B.length;c++){var m=B[c];
2===m%4?z=!0:0!==m%4&&(b=!0)}return b?4:z?2:1};y.prototype._collectDisplayRecords=function(){for(var B=[[],[],[],[],[]],z=0,b=this.tileDisplayData.displayObjects;z<b.length;z++)for(var c=0,m=b[z].displayRecords;c<m.length;c++){var u=m[c];B[u.geometryType].push(u)}return B};return y}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MemoryRequirements":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=function(){function f(){this._byGeometryType=
null}Object.defineProperty(f.prototype,"satisfied",{get:function(){return!this._byGeometryType},enumerable:!0,configurable:!0});f.prototype.reset=function(){this._byGeometryType=null};f.prototype.verticesFor=function(g){return this._byGeometryType?this._byGeometryType[g].vertices:0};f.prototype.indicesFor=function(g){return this._byGeometryType?this._byGeometryType[g].indices:0};f.prototype.needMore=function(g,p,n){if(p||n)this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,
indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]),g=this._byGeometryType[g],g.vertices+=p,g.indices+=n};return f}();k["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileBufferData":function(){define(["require","exports"],function(D,k){return function(){function a(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}
a.deserialize=function(f){for(var g=new a,p=0;5>p;++p){g.geometries[p].indexBuffer=new Uint32Array(f.geometries[p].indexBuffer);g.geometries[p].vertexBuffer={};for(var n in f.geometries[p].vertexBuffer)g.geometries[p].vertexBuffer[n]={data:new Uint32Array(f.geometries[p].vertexBuffer[n].data),stride:f.geometries[p].vertexBuffer[n].stride}}return g};a.prototype.serialize=function(){for(var f={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,
vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]},g=0;5>g;++g)for(var p in this.geometries[g].vertexBuffer)f.geometries[g].vertexBuffer[p]={data:this.geometries[g].vertexBuffer[p].data.buffer,stride:this.geometries[g].vertexBuffer[p].stride};return f};a.prototype.getBuffers=function(){for(var f=[],g=0;5>g;++g){f.push(this.geometries[g].indexBuffer.buffer);
for(var p in this.geometries[g].vertexBuffer)f.push(this.geometries[g].vertexBuffer[p].data.buffer)}return f};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileDisplayData":function(){define("require exports ./WGLDisplayList ./WGLDisplayObject ./mesh/factories/WGLMeshFactory ./util/serializationUtils".split(" "),function(D,k,a,f,g,p){return function(){function n(){}Object.defineProperty(n.prototype,"displayObjectRegistry",{get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=
new Map;for(var d=0,e=this.displayObjects;d<e.length;d++){var l=e[d];this._displayObjectRegistry.set(l.id,l)}}return this._displayObjectRegistry},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"displayList",{get:function(){if(!this._displayList){this._displayList=new a;for(var d=0,e=this.displayObjects;d<e.length;d++)for(var l=0,h=e[d].displayRecords;l<h.length;l++)this._displayList.addToList(h[l])}return this._displayList},set:function(d){this._displayList=d},enumerable:!0,configurable:!0});
n.prototype.serialize=function(d){this.materialStore.serialize(d);p.serializeList(d,this.displayObjects);return d};n.prototype._deserializeObjects=function(d){var e=d.readInt32();e=Array(e);for(var l=new a,h=new Map,t={store:this.materialStore},r=0;r<e.length;++r){var q=f.deserialize(d,t);e[r]=q;h.set(q.id,q);var v=0;for(q=q.displayRecords;v<q.length;v++)l.addToList(q[v])}this.displayObjects=e;this._displayList=l;this._displayObjectRegistry=h};n.deserialize=function(d){var e=new n;e.materialStore=
g.MaterialStore.deserialize(d);e._deserializeObjects(d);return e};return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayList":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/Logger ./enums ./MaterialInfo ./Utils ./util/serializationUtils".split(" "),function(D,k,a,f,g,p,n,d){var e=f.getLogger("esri.views.2d.engine.webgl.WGLDisplayList");D=function(){function q(){this.symbolLevels=[]}Object.defineProperty(q.prototype,"empty",{get:function(){return!this.symbolLevels||
0===this.symbolLevels.length},enumerable:!0,configurable:!0});q.prototype.addToList=function(v){var x=this;Array.isArray(v)?v.forEach(function(y){x._addToList(y)}):this._addToList(v)};q.prototype.removeFromList=function(v){var x=this;Array.isArray(v)||(v=[v]);v.forEach(function(y){x._removeFromList(y)})};q.prototype.ofType=function(v){var x,y,B,z,b,c,m,u,w,A,C;return a(this,function(E){switch(E.label){case 0:x=0,y=this.symbolLevels,E.label=1;case 1:if(!(x<y.length))return[3,8];B=y[x];z=0;b=B.zLevels;
E.label=2;case 2:if(!(z<b.length))return[3,7];c=b[z];m=c.geometryDPInfo;u=this._getDPInfoType(v);if(!m[u])return[3,6];w=0;A=m[u];E.label=3;case 3:if(!(w<A.length))return[3,6];C=A[w];return[4,C];case 4:E.sent(),E.label=5;case 5:return w++,[3,3];case 6:return z++,[3,2];case 7:return x++,[3,1];case 8:return[2]}})};q.prototype._addToList=function(v){var x=this._getDisplayList(v.symbolLevel,v.zOrder,v.geometryType),y=0<x.length?x[x.length-1]:null;null!==y&&n.isSameMaterialInfo(y.materialInfo,v.materialInfo)&&
y.indexFrom+y.indexCount===v.indexFrom?y.indexCount+=v.indexCount:(y=new l,y.indexFrom=v.indexFrom,y.indexCount=v.indexCount,y.materialInfo=v.materialInfo,y.geometryType=v.geometryType,x.push(y))};q.prototype._removeFromList=function(v){for(var x=this._getDisplayList(v.symbolLevel,v.zOrder,v.geometryType),y=x.length,B=void 0,z=0;z<y;++z){var b=x[z];v.indexFrom+v.indexCount>b.indexFrom&&v.indexFrom<b.indexFrom+b.indexCount&&(B=z)}if(void 0!==B)if(b=x[B],v.indexFrom===b.indexFrom)b.indexCount-=v.indexCount,
b.indexFrom+=v.indexCount;else if(v.indexFrom+v.indexCount===b.indexFrom+b.indexCount)b.indexCount-=v.indexCount;else{y=b.indexFrom;z=v.indexFrom-b.indexFrom;var c=v.indexCount;v=b.indexFrom+b.indexCount-(v.indexFrom+v.indexCount);b.indexCount=z;var m=new l;m.geometryType=b.geometryType;m.materialInfo=new p["default"];m.materialInfo.copy(b.materialInfo);m.indexFrom=y+z+c;m.indexCount=v;x.splice(B+1,0,m)}};q.prototype._getDisplayList=function(v,x,y){for(var B,z=this.symbolLevels.length,b=0;b<z;b++)if(this.symbolLevels[b].symbolLevel===
v){B=this.symbolLevels[b];break}B||(B=new r,B.symbolLevel=v,this.symbolLevels.push(B));v=B.zLevels.length;for(z=0;z<v;z++)if(B.zLevels[z].zLevel===x){var c=B.zLevels[z];break}c||(c=new t,c.geometryDPInfo=new h,c.zLevel=x,B.zLevels.push(c));switch(y){case g.WGLGeometryType.FILL:c.geometryDPInfo.fill||(c.geometryDPInfo.fill=[]);var m=c.geometryDPInfo.fill;break;case g.WGLGeometryType.LINE:c.geometryDPInfo.line||(c.geometryDPInfo.line=[]);m=c.geometryDPInfo.line;break;case g.WGLGeometryType.MARKER:c.geometryDPInfo.marker||
(c.geometryDPInfo.marker=[]);m=c.geometryDPInfo.marker;break;case g.WGLGeometryType.TEXT:c.geometryDPInfo.text||(c.geometryDPInfo.text=[]);m=c.geometryDPInfo.text;break;case g.WGLGeometryType.LABEL:c.geometryDPInfo.label||(c.geometryDPInfo.label=[]),m=c.geometryDPInfo.label}return m};q.prototype.serialize=function(v){d.serializeList(v,this.symbolLevels);return v};q.deserialize=function(v){var x=new q;x.symbolLevels=d.deserializeList(v,r);return x};q.prototype._getDPInfoType=function(v){switch(v){case g.WGLGeometryType.FILL:return"fill";
case g.WGLGeometryType.LINE:return"line";case g.WGLGeometryType.MARKER:return"marker";case g.WGLGeometryType.TEXT:return"text";case g.WGLGeometryType.LABEL:return"label";default:e.error("DisplayList: Tried to convert unknown geometryType: "+v)}};return q}();var l=function(){function q(){this.materialInfo=null;this.indexCount=this.indexFrom=0}q.prototype.serialize=function(v){this.materialInfo.serialize(v);v.writeInt32(this.indexFrom);v.writeInt32(this.indexCount);return v};q.deserialize=function(v,
x){var y=new q;y.geometryType=x.geometryType;y.materialInfo=p["default"].deserialize(v);y.indexFrom=v.readInt32();y.indexCount=v.readInt32();return y};return q}(),h=function(){function q(){this.label=this.text=this.marker=this.line=this.fill=null}q.prototype.serialize=function(v){d.serializeList(v,this.fill);d.serializeList(v,this.line);d.serializeList(v,this.marker);d.serializeList(v,this.text);d.serializeList(v,this.label);return v};q.deserialize=function(v){var x=new q,y={geometryType:g.WGLGeometryType.FILL},
B=d.deserializeList(v,l,y);B.length&&(x.fill=B);y.geometryType=g.WGLGeometryType.LINE;B=d.deserializeList(v,l,y);B.length&&(x.line=B);y.geometryType=g.WGLGeometryType.MARKER;B=d.deserializeList(v,l,y);B.length&&(x.marker=B);y.geometryType=g.WGLGeometryType.TEXT;B=d.deserializeList(v,l,y);B.length&&(x.text=B);y.geometryType=g.WGLGeometryType.LABEL;v=d.deserializeList(v,l,y);v.length&&(x.label=v);return x};return q}(),t=function(){function q(){this.geometryDPInfo=new h}q.prototype.serialize=function(v){v.writeInt32(this.zLevel);
this.geometryDPInfo.serialize(v);return v};q.deserialize=function(v){var x=new q;x.zLevel=v.readInt32();x.geometryDPInfo=h.deserialize(v);return x};return q}(),r=function(){function q(){this.zLevels=[]}q.prototype.serialize=function(v){v.writeInt32(this.symbolLevel);d.serializeList(v,this.zLevels);return v};q.deserialize=function(v){var x=new q;x.symbolLevel=v.readInt32();x.zLevels=d.deserializeList(v,t);return x};return q}();return D})},"esri/layers/vectorTiles/core/tsSupport/generatorHelper":function(){define([],
function(){return function(D,k){function a(l){return function(h){return f([l,h])}}function f(l){if(p)throw new TypeError("Generator is already executing.");for(;g;)try{if(p=1,n&&(d=l[0]&2?n["return"]:l[0]?n["throw"]||((d=n["return"])&&d.call(n),0):n.next)&&!(d=d.call(n,l[1])).done)return d;if(n=0,d)l=[l[0]&2,d.value];switch(l[0]){case 0:case 1:d=l;break;case 4:return g.label++,{value:l[1],done:!1};case 5:g.label++;n=l[1];l=[0];continue;case 7:l=g.ops.pop();g.trys.pop();continue;default:if(!(d=g.trys,
d=0<d.length&&d[d.length-1])&&(6===l[0]||2===l[0])){g=0;continue}if(3===l[0]&&(!d||l[1]>d[0]&&l[1]<d[3]))g.label=l[1];else if(6===l[0]&&g.label<d[1])g.label=d[1],d=l;else if(d&&g.label<d[2])g.label=d[2],g.ops.push(l);else{d[2]&&g.ops.pop();g.trys.pop();continue}}l=k.call(D,g)}catch(h){l=[6,h],n=0}finally{p=d=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}var g={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},p,n,d,e;return e={next:a(0),"throw":a(1),"return":a(2)},
"function"===typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayObject":function(){define("require exports ../../../../core/libs/gl-matrix/vec2 ./WGLDisplayRecord ./collisions/Metric ./util/serializationUtils".split(" "),function(D,k,a,f,g,p){return function(){function n(d){this.yOverflow=this.xOverflow=this.yBucket=this.xBucket=-1;this.id=d;this.displayRecords=[];this.metrics=[];this.anchor=null}n.prototype.addMetric=function(d,
e,l,h){this.metrics.push(new g["default"](d,{from:e,count:l},h))};n.prototype.serialize=function(d){d.writeInt32(this.id);p.serializeList(d,this.metrics);p.serializeList(d,this.displayRecords);this.anchor?(d.writeF32(this.anchor[0]),d.writeF32(this.anchor[1]),d.writeInt32(this.xBucket),d.writeInt32(this.yBucket),d.writeInt32(this.xOverflow),d.writeInt32(this.yOverflow)):(d.writeF32(0),d.writeF32(0));return d};n.deserialize=function(d,e){var l=e.store,h=d.readInt32(),t=new n(h);l={id:h,store:l};h=
p.deserializeList(d,g["default"]);h.length&&(t.metrics=h);t.displayRecords=p.deserializeList(d,f,l);l=d.readF32();h=d.readF32();if(l||h)t.anchor=a.fromValues(l,h),t.xBucket=d.readInt32(),t.yBucket=d.readInt32(),t.xOverflow=d.readInt32(),t.yOverflow=d.readInt32();return t};return n}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(D){var k={create:function(){var a=new D.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var f=new D.ARRAY_TYPE(2);
f[0]=a[0];f[1]=a[1];return f},fromValues:function(a,f){var g=new D.ARRAY_TYPE(2);g[0]=a;g[1]=f;return g},copy:function(a,f){a[0]=f[0];a[1]=f[1];return a},set:function(a,f,g){a[0]=f;a[1]=g;return a},add:function(a,f,g){a[0]=f[0]+g[0];a[1]=f[1]+g[1];return a},subtract:function(a,f,g){a[0]=f[0]-g[0];a[1]=f[1]-g[1];return a}};k.sub=k.subtract;k.multiply=function(a,f,g){a[0]=f[0]*g[0];a[1]=f[1]*g[1];return a};k.mul=k.multiply;k.divide=function(a,f,g){a[0]=f[0]/g[0];a[1]=f[1]/g[1];return a};k.div=k.divide;
k.ceil=function(a,f){a[0]=Math.ceil(f[0]);a[1]=Math.ceil(f[1]);return a};k.floor=function(a,f){a[0]=Math.floor(f[0]);a[1]=Math.floor(f[1]);return a};k.min=function(a,f,g){a[0]=Math.min(f[0],g[0]);a[1]=Math.min(f[1],g[1]);return a};k.max=function(a,f,g){a[0]=Math.max(f[0],g[0]);a[1]=Math.max(f[1],g[1]);return a};k.round=function(a,f){a[0]=Math.round(f[0]);a[1]=Math.round(f[1]);return a};k.scale=function(a,f,g){a[0]=f[0]*g;a[1]=f[1]*g;return a};k.scaleAndAdd=function(a,f,g,p){a[0]=f[0]+g[0]*p;a[1]=
f[1]+g[1]*p;return a};k.distance=function(a,f){var g=f[0]-a[0],p=f[1]-a[1];return Math.sqrt(g*g+p*p)};k.dist=k.distance;k.squaredDistance=function(a,f){var g=f[0]-a[0],p=f[1]-a[1];return g*g+p*p};k.sqrDist=k.squaredDistance;k.length=function(a){var f=a[0];a=a[1];return Math.sqrt(f*f+a*a)};k.len=k.length;k.squaredLength=function(a){var f=a[0];a=a[1];return f*f+a*a};k.sqrLen=k.squaredLength;k.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];return a};k.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];return a};
k.normalize=function(a,f){var g=f[0],p=f[1];g=g*g+p*p;0<g&&(g=1/Math.sqrt(g),a[0]=f[0]*g,a[1]=f[1]*g);return a};k.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]};k.cross=function(a,f,g){f=f[0]*g[1]-f[1]*g[0];a[0]=a[1]=0;a[2]=f;return a};k.lerp=function(a,f,g,p){var n=f[0];f=f[1];a[0]=n+p*(g[0]-n);a[1]=f+p*(g[1]-f);return a};k.random=function(a,f){f=f||1;var g=2*D.RANDOM()*Math.PI;a[0]=Math.cos(g)*f;a[1]=Math.sin(g)*f;return a};k.transformMat2=function(a,f,g){var p=f[0];f=f[1];a[0]=g[0]*p+g[2]*f;a[1]=
g[1]*p+g[3]*f;return a};k.transformMat2d=function(a,f,g){var p=f[0];f=f[1];a[0]=g[0]*p+g[2]*f+g[4];a[1]=g[1]*p+g[3]*f+g[5];return a};k.transformMat3=function(a,f,g){var p=f[0];f=f[1];a[0]=g[0]*p+g[3]*f+g[6];a[1]=g[1]*p+g[4]*f+g[7];return a};k.transformMat4=function(a,f,g){var p=f[0];f=f[1];a[0]=g[0]*p+g[4]*f+g[12];a[1]=g[1]*p+g[5]*f+g[13];return a};k.forEach=function(){var a=k.create();return function(f,g,p,n,d,e){g||(g=2);p||(p=0);for(n=n?Math.min(n*g+p,f.length):f.length;p<n;p+=g)a[0]=f[p],a[1]=
f[p+1],d(a,a,e),f[p]=a[0],f[p+1]=a[1];return f}}();k.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};k.exactEquals=function(a,f){return a[0]===f[0]&&a[1]===f[1]};k.equals=function(a,f){var g=a[0],p=a[1],n=f[0],d=f[1];return Math.abs(g-n)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(n))&&Math.abs(p-d)<=D.EPSILON*Math.max(1,Math.abs(p),Math.abs(d))};return k})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require","exports","../../../../core/Logger","./MeshData"],
function(D,k,a,f){var g=a.getLogger("esri/views/2d/engine/webgl/WGLDisplayRecord");return function(){function p(n,d,e){this.id=n;this.geometryType=d;this._materialInfo=e;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(p.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"materialInfo",{get:function(){return"number"===
typeof this._materialInfo?(g.warn("Tried to read materialInfo, but found an index! Was materialInfo deserialized correctly?"),null):this._materialInfo},set:function(n){this._materialInfo=n},enumerable:!0,configurable:!0});p.prototype.copy=function(){var n=new p(this.id,this.geometryType,this._materialInfo);n.vertexFrom=this.vertexFrom;n.vertexCount=this.vertexCount;n.indexFrom=this.indexFrom;n.indexCount=this.indexCount;n.zOrder=this.zOrder;n.symbolLevel=this.symbolLevel;n.meshData=this.meshData;
return n};p.prototype.setMeshDataFromBuffers=function(n,d,e){var l=new f,h;for(h in d){for(var t=d[h].stride,r=d[h].data,q=[],v=0;v<t*n.vertexCount/4;++v)q[v]=r[v+t*n.vertexFrom/4];l.vertexData.set(h,q)}for(v=l.indexData.length=0;v<n.indexCount;++v)l.indexData[v]=e[v+n.indexFrom]-n.vertexFrom;l.vertexCount=n.vertexCount;this.meshData=l};p.prototype.readMeshDataFromBuffers=function(n,d){this.meshData?this.meshData.clear():this.meshData=new f;for(var e in n){for(var l=n[e].stride,h=n[e].data,t=[],r=
0;r<l*this.vertexCount/4;++r)t[r]=h[r+l*this.vertexFrom/4];this.meshData.vertexData.set(e,t)}for(r=this.meshData.indexData.length=0;r<this.indexCount;++r)this.meshData.indexData[r]=d[r+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};p.prototype.writeMeshDataToBuffers=function(n,d,e,l){for(var h in d)for(var t=d[h].stride,r=this.meshData.vertexData.get(h),q=d[h].data,v=0;v<t*this.meshData.vertexCount/4;++v)q[v+t*n/4]=r[v];for(v=0;v<this.meshData.indexData.length;++v)l[v+
e]=this.meshData.indexData[v]+n;this.vertexFrom=n;this.vertexCount=this.meshData.vertexCount;this.indexFrom=e;this.indexCount=this.meshData.indexData.length};p.writeAllMeshDataToBuffers=function(n,d,e){for(var l=0,h=0,t=0;t<n.length;t++){var r=n[t];r.writeMeshDataToBuffers(l,d,h,e);l+=r.vertexCount;h+=r.indexCount}};p.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};p.prototype.serialize=function(n){n.writeInt32(this.geometryType);
n.writeInt32(this._materialInfo);n.writeInt32(this.symbolLevel);n.writeInt32(this.zOrder);n.writeInt32(this.vertexFrom);n.writeInt32(this.vertexCount);n.writeInt32(this.indexFrom);n.writeInt32(this.indexCount);return n};p.deserialize=function(n,d){var e=n.readInt32(),l=d.store&&d.store.get(n.readInt32())||n.readInt32();e=new p(d.id,e,l);e.symbolLevel=n.readInt32();e.zOrder=n.readInt32();e.vertexFrom=n.readInt32();e.vertexCount=n.readInt32();e.indexFrom=n.readInt32();e.indexCount=n.readInt32();return e};
return p}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(D,k){return function(){function a(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(f,g,p){for(var n in f)this.vertexData.set(n,f[n]);for(n in this.vertexData)null===f[n]&&this.vertexData["delete"](n);this.vertexCount=g;this.indexData=p};return a}()})},
"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/Metric":function(){define(["require","exports","./BoundingBox"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});D=function(){function f(g,p,n,d,e){void 0===d&&(d=255);void 0===e&&(e=0);this.bounds=g;this.range=p;this.index=n;this.minZoom=d;this.maxZoom=e}f.prototype.serialize=function(g){this.bounds.serialize(g);g.writeInt32(this.range.from);g.writeInt32(this.range.count);g.writeInt32(this.index);return g};f.deserialize=function(g){var p=
a["default"].deserialize(g),n=g.readInt32(),d=g.readInt32();n={from:n,count:d};g=g.readInt32();return new f(p,n,g)};return f}();k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require","exports","../../../../../core/libs/gl-matrix/vec2"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});D=function(){function f(g,p,n,d){this.width=n;this.height=d;this.center=a.fromValues(g,p)}Object.defineProperty(f.prototype,"x",{get:function(){return this.center[0]},
set:function(g){this.center[0]=g},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"y",{get:function(){return this.center[1]},set:function(g){this.center[1]=g},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0});f.prototype.serialize=function(g){g.writeF32(this.center[0]);
g.writeF32(this.center[1]);g.writeInt32(this.width);g.writeInt32(this.height);return g};f.deserialize=function(g){var p=g.readF32(),n=g.readF32(),d=g.readInt32();g=g.readInt32();return new f(p,n,d,g)};return f}();k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../MaterialInfo ../../Utils ../../visualVariablesUtils ../../WGLDisplayObject ../VertexVector ../templates/meshTemplateUtils ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../../util/Matcher ../../util/serializationUtils ../../util/vvFlagUtils ../../util/Writer".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b,c){Object.defineProperty(k,"__esModule",{value:!0});var m=g.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),u={esriGeometryPoint:"above-center above-left above-right center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:null,esriGeometryMultipoint:null,esriGeometryEnvelope:null},w=function(){function G(){this._materials=[];this._materialsIndex=new Map}
G.prototype.insert=function(F){var I=this._materials.length;this._materials.push(F);return I};G.prototype._hashGlyph=function(F,I,M){return"G-"+I+"-"+M+"-"+F.page};G.prototype._hashSprite=function(F,I,M){return"S-"+I+"-"+M+"-"+(F?F.page:-1)+"-"+(F?F.sdf:!1)};G.prototype.createSpriteMaterial=function(F,I,M){var Y=this._hashSprite(F,I,M);if(this._materialsIndex.has(Y))return this._materialsIndex.get(Y);var R=this._materials.length;F=e["default"].fromSprite(F,I,M);this._materials.push(F);this._materialsIndex.set(Y,
R);return R};G.prototype.createGlyphMaterial=function(F,I,M){var Y=this._hashGlyph(F,I,M);if(this._materialsIndex.has(Y))return this._materialsIndex.get(Y);var R=this._materials.length;F=e["default"].fromGlyph(F,I,M);this._materials.push(F);this._materialsIndex.set(Y,R);return R};G.prototype.get=function(F){return this._materials[F]};G.prototype.serialize=function(F){z.serializeList(F,this._materials);return F};G.deserialize=function(F){var I=new G;I._materials=z.deserializeList(F,e["default"]);return I};
return G}();k.MaterialStore=w;var A=function(){function G(F){this._bucketSize=F;this._rowsLength=n.TILE_SIZE/F;this._colsLength=n.TILE_SIZE/F;this._grid=this._initGrid()}G.prototype.checkOverlap=function(F,I){var M=Math.floor(F/this._bucketSize),Y=Math.floor(I/this._bucketSize);if(0>M||M>=this._rowsLength||0>Y||Y>=this._colsLength||this._grid[Y][M])return!0;this._grid[Y][M]=!0;return!1};G.prototype.reset=function(){this._grid=this._initGrid()};G.prototype._initGrid=function(){for(var F=[],I=0;I<this._rowsLength;I++)F.push(Array(this._colsLength));
return F};return G}(),C=function(){function G(F,I,M){this.displayObjects=F;this.vertexVectorsMap=I;this._materials=M;this.grid=new A(n.COLLISION_EARLY_REJECT_BUCKET_SIZE)}G.prototype.get=function(F){return this.vertexVectorsMap[F]};G.prototype.pushDisplayObject=function(F){this.displayObjects.push(F)};G.prototype.encode=function(F,I){var M=z.serializeList(new c["default"](Uint32Array,this._guessSize()),this.displayObjects).buffer(),Y=this._materials.serialize(new c["default"](Uint32Array)).buffer(),
R={};I.push(M);I.push(Y);for(var S=0;S<this.vertexVectorsMap.length;S++){var O=this.vertexVectorsMap[S];R[S]={};O.transfer(R[S],I)}F.displayObjects=M;F.materialStore=Y;F.vertexBuffersMap=R;this.destroy()};G.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};G.prototype._guessSize=function(){for(var F=this.displayObjects,I=Math.min(F.length,4),M=0,Y=0;Y<I;Y++)M=Math.max(M,F[Y].displayRecords.length);return 2*(12*F.length+F.length*M*40)};return G}(),E=function(){function G(){this._vvMap=
new Map}G.prototype.set=function(F,I){this._vvMap.set(F,I)};G.prototype.getValue=function(F,I,M){return this._vvMap.has(F)?this._vvMap.get(F)(I,M):0};return G}();D=function(){function G(F,I,M,Y,R,S,O,L,P,X){var Q=this;this._labelsDebugTemplate=null;this._matcher=F;this._materials=M;this._geometryType=Y;this._idField=R;this._pixelRatio=P;this._vvMap=null;this._vvFlags=O;this._vvBuf=new ArrayBuffer(16);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._createVVFunctionMap(S,
I,L);X&&(this._validateLabelingInfo(X)?this._labelTemplates=X.map(function(K){return v["default"].fromText(Q._materials,0,K.symbol,P,K.labelPlacement)}):m.error(new f("mapview-labeling:unsupported-geometry","LabelingInfo failed validation - unable to create labels for layer.")))}G.from=function(F,I,M,Y,R,S,O,L){switch(F.type){case "simple":return G._fromSimpleRenderer(F,I,M,Y,R,S,O,L);case "unique-value":case "uniqueValue":return G._fromUniqueValueRenderer(F,I,M,Y,R,S,O,L);case "class-breaks":case "classBreaks":return G._fromClassBreaksRenderer(F,
I,M,Y,R,S,O,L);default:return m.error(new f("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}};Object.defineProperty(G.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});G.prototype.createMeshData=function(F){var I=Array(5),M=this._matcher.getDefault(),Y=!!b.getMarkerVVFlags(this._vvFlags),R=!!b.getFillVVFlags(this._vvFlags),S=!!b.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),O=!!b.getTextVVFlags(this._vvFlags);
!this._labelTemplates&&M&&1===M.length&&M[0]instanceof y["default"]?(I[d.WGLGeometryType.MARKER]=new r.VertexVectors(d.WGLGeometryType.MARKER,Y,F),I[d.WGLGeometryType.FILL]=new r.VertexVectors(d.WGLGeometryType.FILL,R,0),I[d.WGLGeometryType.LINE]=new r.VertexVectors(d.WGLGeometryType.LINE,S,0),I[d.WGLGeometryType.TEXT]=new r.VertexVectors(d.WGLGeometryType.TEXT,O,0),I[d.WGLGeometryType.LABEL]=new r.VertexVectors(d.WGLGeometryType.LABEL,!1,0)):(I[d.WGLGeometryType.MARKER]=new r.VertexVectors(d.WGLGeometryType.MARKER,
Y,F),I[d.WGLGeometryType.FILL]=new r.VertexVectors(d.WGLGeometryType.FILL,R,F),I[d.WGLGeometryType.LINE]=new r.VertexVectors(d.WGLGeometryType.LINE,S,F),I[d.WGLGeometryType.TEXT]=new r.VertexVectors(d.WGLGeometryType.TEXT,O,F),I[d.WGLGeometryType.LABEL]=new r.VertexVectors(d.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?F:0));return new C([],I,this._materials)};G.prototype.write=function(F,I,M,Y,R){var S=1===this._matcher.size()&&this._matcher.getDefault()||this._matcher.match(I,
M),O=I.attributes[this._idField],L=new t(O),P=!!Y&&!!this._labelTemplates;this._computeVV(I,M);if(S&&(I.geometry||I.centroid)){M=L.displayRecords;for(var X=0;X<S.length;X++){var Q=S[X],K=F.get(Q.geometryType);Q.writeMesh(M,K,this._geometryType,O,I,this._pixelRatio,this._vvBufU32)}P&&(S=this._getLabelReference(S),this._writeLabelMesh(L,F,O,I,R,Y.get(O),S));F.pushDisplayObject(L)}};G.prototype._hasBadLabelClass=function(F,I){var M=F.labelPlacement,Y=u[I];if(!Y)return m.error(new f("mapview-labeling:unsupported-geometry-type",
"Unable to create labels for WebGL Feature Layer, "+I+" is not supported")),!0;Y.some(function(R){return R===M})||(Y=Y[0],m.warn("Found invalid label placement type "+M+" for "+I+". Defaulting to "+Y),F.labelPlacement=Y);return!1};G.prototype._validateLabelingInfo=function(F){var I=this;return!F.some(function(M){return I._hasBadLabelClass(M,I._geometryType)})};G.prototype._getLabelReference=function(F){for(var I=0;I<F.length;I++){var M=F[I];if(M instanceof y["default"])return M}return null};G.prototype._writeLabelMesh=
function(F,I,M,Y,R,S,O){for(var L=F.displayRecords,P=0,X=0,Q=-1,K=-1,U=0;U<S.labelingInfo.length;U++){var da=S.labelingInfo[U],fa=S.text[U],ia=this._labelTemplates[da],la=I.get(ia.geometryType),ma=R.get(ia.symbolId).glyphMosaicItems,ta=L.length;ia.bindReferenceTemplate(O);if(!ia.computeGlyphs(ma,fa)){ma=ia.computeAnchor(this._geometryType,Y);fa=ia.bounds;if(-1===Q&&(Q=Math.floor(ma[0]/n.COLLISION_BUCKET_SIZE),K=Math.floor(ma[1]/n.COLLISION_BUCKET_SIZE),I.grid.checkOverlap(ma[0],ma[1])))return;ia.writeMesh(L,
la,this._geometryType,M,Y,this._pixelRatio,this._vvBufU32);F.anchor=ma;F.addMetric(fa,ta,L.length-ta,da);da=fa.center;P=Math.max(fa.halfWidth+Math.abs(da[0]),P);X=Math.max(fa.halfHeight+Math.abs(da[1]),X)}}-1!==Q&&(M=2.5*Math.max(P,X),I=Math.ceil(Math.abs((M-F.anchor[0]%n.COLLISION_BUCKET_SIZE)/n.COLLISION_BUCKET_SIZE)),M=Math.ceil(Math.abs((M-F.anchor[1]%n.COLLISION_BUCKET_SIZE)/n.COLLISION_BUCKET_SIZE)),F.xBucket=Q,F.yBucket=K,F.xOverflow=I,F.yOverflow=M)};G.prototype._debugLabels=function(F,I,
M,Y,R){Y={geometry:{paths:[[[Y[0]+R.center[0]-R.width/2,Y[1]+R.center[1]+R.height/2],[0,-R.height],[R.width,0],[0,R.height],[-R.width,0]]]},attributes:{}};R=this._getLabelDebugTemplate();I=I.get(R.geometryType);R.writeMesh(F,I,"esriGeometryPolyline",M,Y,this._pixelRatio,this._vvBufU32)};G.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||(this._labelsDebugTemplate=this._createLabelsDebugTemplate());return this._labelsDebugTemplate};G.prototype._createLabelsDebugTemplate=function(){var F=
new p({style:"solid",width:1,color:[255,0,0,1]});return x["default"].fromSimpleLine(this._materials,0,F,null,this._pixelRatio)};G.prototype._isErrorVV=function(F){return null===F||isNaN(F)||Infinity===F};G.prototype._computeVV=function(F,I){if(!this._vvMap)return 0;var M=this._vvMap.getValue(d.VVType.SIZE,F,I),Y=this._vvMap.getValue(d.VVType.COLOR,F,I),R=this._vvMap.getValue(d.VVType.OPACITY,F,I),S=this._vvMap.getValue(d.VVType.ROTATION,F,I);this._vvBufF32[d.VVType.SIZE]=this._isErrorVV(M)?NaN:M;
this._vvBufF32[d.VVType.COLOR]=this._isErrorVV(Y)?NaN:Y;this._vvBufF32[d.VVType.OPACITY]=this._isErrorVV(R)?NaN:R;this._vvBufF32[d.VVType.ROTATION]=this._isErrorVV(S)?NaN:S;return 0};G.prototype._createVVFunctionMap=function(F,I,M){if(F&&F.length)for(var Y=0;Y<F.length;Y++){var R=F[Y],S=l.getVVType(R.type);if(R=this._createGetValueFunction(R,I,M))this._vvMap||(this._vvMap=new E),this._vvMap.set(S,R)}};G.prototype._createGetValueFunction=function(F,I,M){if(l.getVVType(F.type)===d.VVType.SIZE){var Y=
h.getTypeOfSizeVisualVariable(F);return Y===d.WGLVVFlag.SIZE_SCALE_STOPS?null:this._createNormalizedFunction(F,I,M,Y===d.WGLVVFlag.SIZE_UNIT_VALUE&&function(R){return h.getVisualVariableSizeValueRepresentationRatio(R,F.valueRepresentation)})}return this._createNormalizedFunction(F,I,M)};G.prototype._createNormalizedFunction=function(F,I,M,Y){var R=F.field;if(R){if("string"===typeof R){var S=F.normalizationField;return S?function(O){if(O.attributes[R]&&O.attributes[S])return O=O.attributes[R]/O.attributes[S],
Y?Y(O):O}:Y?function(O){return Y(O.attributes[R])}:function(O){return O.attributes[R]}}if("function"===typeof R)return m.error(new f("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),function(O){};m.error(new f("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof R));return function(O){}}if(F.valueExpression&&"$view.scale"!==F.valueExpression)return l.createArcadeFunction({valueExpression:F.valueExpression,
spatialReference:M,layer:I},Y);m.error("Unable to create a normalized function for visual variable: "+F);return function(O){}};G._fromSimpleRenderer=function(F,I,M,Y,R,S,O,L){var P=F.getSymbols();F=F.visualVariables;var X=b.getVVFlags(F),Q=new B["default"],K=new w;P.length&&Q.setDefault(q.createMeshTemplates([],K,P[0],M,X,O));return new G(Q,I,K,Y,R,F,X,S,O,L)};G._fromUniqueValueRenderer=function(F,I,M,Y,R,S,O,L){var P=F.uniqueValueInfos,X=F.visualVariables,Q=b.getVVFlags(X),K=[F.field];F.field2&&
K.push(F.field2);F.field3&&K.push(F.field3);var U=F.valueExpression;K=new B.MapMatcher(K,F.fieldDelimiter,U?{valueExpression:U,spatialReference:S,layer:I}:null);U=new w;var da=F.backgroundFillSymbol;da=da&&q.createMeshTemplates([],U,da,M,Q,O);for(var fa=0;fa<P.length;fa++){var ia=P[fa],la=q.createMeshTemplates([],U,ia.symbol,M,Q,O);K.add(ia.value,da?da.concat(la):la)}if(F=F.defaultSymbol)M=q.createMeshTemplates([],U,F,M,Q,O),K.setDefault(da?da.concat(M):M);return new G(K,I,U,Y,R,X,Q,S,O,L)};G._fromClassBreaksRenderer=
function(F,I,M,Y,R,S,O,L){var P=F.isMaxInclusive,X=F.visualVariables,Q=F.valueExpression,K=F.normalizationField,U=F.normalizationTotal,da=F.normalizationType,fa=b.getVVFlags(X);P=new B.IntervalMatcher(F.field,P,Q?{valueExpression:Q,spatialReference:S,layer:I}:null,{normalizationField:K,normalizationTotal:U,normalizationType:da});Q=new w;K=(K=F.backgroundFillSymbol)&&q.createMeshTemplates([],Q,K,M,fa,O,!0);U=0;for(da=F.classBreakInfos;U<da.length;U++){var ia=da[U],la=q.createMeshTemplates([],Q,ia.symbol,
M,fa,O);P.add({min:ia.minValue,max:ia.maxValue},K?K.concat(la):la)}if(F=F.defaultSymbol)M=q.createMeshTemplates([],Q,F,M,fa,O),P.setDefault(K?K.concat(M):M);return new G(P,I,Q,Y,R,X,fa,S,O,L)};return G}();k["default"]=D})},"esri/layers/vectorTiles/symbols/SimpleLineSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./LineSymbol"],function(D,k,a,f){var g={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",
STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},p={color:[0,0,0,1],style:g.STYLE_SOLID,width:.75,cap:g.CAP_BUTT,join:g.JOIN_MITER,miterLimit:7.5},n=D(f,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",
style:{value:g.STYLE_SOLID,json:{read:function(d,e){return k.valueOf(this._jsonStyles,d)||void 0},write:function(d,e){e.style=this._jsonStyles[d]}}},cap:{value:g.CAP_BUTT,json:{read:!1,write:!1}},join:{value:g.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:a.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash",
"short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return k.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(d,e,l,h,t,r){if(d&&"string"!==typeof d)return d;var q={};null!=d&&(q.style=d);null!=e&&(q.color=e);null!=l&&(q.width=a.toPt(l));null!=h&&(q.cap=h);null!=t&&(q.join=t);null!=r&&(q.miterLimit=a.toPt(r));return q},clone:function(){return new n({color:k.clone(this.color),
style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});k.mixin(n,g);n.defaultProps=p;return n})},"esri/layers/vectorTiles/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(D,k,a){return D(a,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:k.toPt,json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary",
"../core/JSONSupport","../Color"],function(D,k,a,f){var g=k({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),p=0;return a.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+p++},properties:{type:{type:String,value:null,json:{read:g.fromJSON,
write:{ignoreOrigin:!0,writer:function(n,d){d.type=g.toJSON(this.type)}}}},color:{type:f,value:new f([0,0,0,1]),json:{read:function(n){return n&&D.isDefined(n[0])?[n[0],n[1],n[2],n[3]/255]:n},write:{allowNull:!0}}}}})})},"esri/layers/vectorTiles/core/kebabDictionary":function(){define(["require","exports"],function(D,k){return function(a,f){void 0===f&&(f={});var g=f.ignoreUnknown||!1,p={},n;for(n in a)p[a[n]]=n;var d=function(l){return p.hasOwnProperty(l)?p[l]:g?void 0:l},e=function(l){return a.hasOwnProperty(l)?
a[l]:g?void 0:l};return{toJSON:d,fromJSON:e,read:function(l){return e(l)},write:function(l,h,t){l=d(l);void 0!==l&&(h[t]=l)}}}})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(D,k,a){function f(n){return Math.max(0,Math.min(k.ensureInteger(n),255))}var g=D([a],{declaredClass:"esri.Color",toJSON:function(){return[f(this.r),f(this.g),f(this.b),1<this.a?this.a:f(255*this.a)]},clone:function(){return new g(this.toRgba())}});
g.toJSON=function(n){return n&&[f(n.r),f(n.g),f(n.b),1<n.a?n.a:f(255*n.a)]};g.fromJSON=function(n){return n&&new g([n[0],n[1],n[2],n[3]/255])};g.toUnitRGB=function(n){return[n.r/255,n.g/255,n.b/255]};g.toUnitRGBA=function(n){return[n.r/255,n.g/255,n.b/255,null!=n.a?n.a:1]};var p="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(D=0;D<p.length;D++)g[p[D]]=a[p[D]];g.named.rebeccapurple=[102,51,153];return g})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color",
"./_base/array"],function(D,k,a,f){var g={};k.setObject("dojo.colors",g);var p=function(d,e,l){0>l&&++l;1<l&&--l;var h=6*l;return 1>h?d+(e-d)*h:1>2*l?e:2>3*l?d+(e-d)*(2/3-l)*6:d};D.colorFromRgb=a.fromRgb=function(d,e){var l=d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(l){var h=l[2].split(/\s*,\s*/),t=h.length;l=l[1];if("rgb"==l&&3==t||"rgba"==l&&4==t)return l=h[0],"%"==l.charAt(l.length-1)?(l=f.map(h,function(v){return 2.56*parseFloat(v)}),4==t&&(l[3]=h[3]),a.fromArray(l,e)):a.fromArray(h,
e);if("hsl"==l&&3==t||"hsla"==l&&4==t){l=(parseFloat(h[0])%360+360)%360/360;var r=parseFloat(h[1])/100,q=parseFloat(h[2])/100;r=.5>=q?q*(r+1):q+r-q*r;q=2*q-r;l=[256*p(q,r,l+1/3),256*p(q,r,l),256*p(q,r,l-1/3),1];4==t&&(l[3]=h[3]);return a.fromArray(l,e)}}return null};var n=function(d,e,l){d=Number(d);return isNaN(d)?l:d<e?e:d>l?l:d};a.prototype.sanitize=function(){this.r=Math.round(n(this.r,0,255));this.g=Math.round(n(this.g,0,255));this.b=Math.round(n(this.b,0,255));this.a=n(this.a,0,1);return this};
g.makeGrey=a.makeGrey=function(d,e){return a.fromArray([d,d,d,e])};k.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,
105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],
lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,
85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,
112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,
191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.EXTRUDE_SCALE=64;k.PICTURE_FILL_COLOR=4294967295;k.TILE_SIZE=512;k.ANGLE_FACTOR_256=256/360;k.COLLISION_BUCKET_SIZE=128;k.COLLISION_MAX_ZOOM_DELTA=4;k.COLLISION_EARLY_REJECT_BUCKET_SIZE=
32})},"esri/layers/vectorTiles/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),function(D,k,a,f,g,p,n){function d(r){return p.isNumber(r.minDataValue)&&p.isNumber(r.maxDataValue)&&null!=r.minSize&&null!=r.maxSize?g.WGLVVFlag.SIZE_MINMAX_VALUE:(r.expression&&"view.scale"===r.expression||r.valueExpression&&"$view.scale"===r.valueExpression)&&Array.isArray(r.stops)?
g.WGLVVFlag.SIZE_SCALE_STOPS:(null!=r.field||r.expression&&"view.scale"!==r.expression||r.valueExpression&&"$view.scale"!==r.valueExpression)&&Array.isArray(r.stops)?g.WGLVVFlag.SIZE_FIELD_STOPS:(null!=r.field||r.expression&&"view.scale"!==r.expression||r.valueExpression&&"$view.scale"!==r.valueExpression)&&null!=r.valueUnit?g.WGLVVFlag.SIZE_UNIT_VALUE:g.WGLVVFlag.NONE}function e(r){return{value:r.value,size:a.toPt(r.size)}}function l(r){return r.map(function(q){return e(q)})}function h(r){return"string"===
typeof r||"number"===typeof r?a.toPt(r):{type:"size",expression:r.expression,stops:l(r.stops)}}function t(r){var q={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(p.isString(r.field))if(r.stops){if(8<r.stops.length)return null;r=r.stops;for(var v=0;8>v;++v){var x=r[Math.min(v,r.length-1)];q.values[v]=x.value;q.opacities[v]=x.opacity}}else if(r.opacityValues){if(!p.isDefined(r.minDataValue)||!p.isDefined(r.maxDataValue)||2!==r.opacityValues.length)return null;q.values[0]=r.minDataValue;q.opacities[0]=
r.opacityValues[0];q.values[1]=r.maxDataValue;q.opacities[1]=r.opacityValues[1];for(v=2;8>v;++v)q.values[v]=r.maxDataValue,q.opacities[v]=r.opacityValues[1]}else return null;else if(r.stops&&0<=r.stops.length||r.opacityValues&&0<=r.opacityValues.length)for(r=r.stops&&0<=r.stops.length?r.stops[0].opacity:r.opacityValues[0],v=0;8>v;v++)q.values[v]=Infinity,q.opacities[v]=r;else return null;return q}Object.defineProperty(k,"__esModule",{value:!0});k.getTypeOfSizeVisualVariable=d;k.getVisualVariableSizeValueRepresentationRatio=
function(r,q){if(!r||!q)return r;switch(q){case "radius":case "distance":return 2*r;case "area":return Math.sqrt(r)}return r};k.stopToSizeStop=e;k.normalizeSizeStops=l;k.normalizeSizeElement=h;k.getVisualVariablesFields=function(r){var q=r&&0<r.length?{}:null;q&&r.forEach(function(v){var x=v.type;v.field&&(q[x]=v.field)});return q};k.convertVisualVariables=function(r){var q=r&&0<r.length?{}:null,v=q?{}:null;if(!q)return{vvFields:q,vvRanges:v};for(var x=0;x<r.length;x++){var y=r[x],B=y.type;y.field&&
(q[B]=y.field);if("size"===B){v.size||(v.size={});var z=y;switch(d(z)){case g.WGLVVFlag.SIZE_MINMAX_VALUE:v.size.minMaxValue={minDataValue:z.minDataValue,maxDataValue:z.maxDataValue,minSize:h(z.minSize),maxSize:h(z.maxSize)};break;case g.WGLVVFlag.SIZE_SCALE_STOPS:v.size.scaleStops={stops:l(z.stops)};break;case g.WGLVVFlag.SIZE_FIELD_STOPS:y=[];B=[];z=l(z.stops);for(var b=z.length,c=0;6>c;c++){var m=z[Math.min(c,b-1)];y.push(m.value);B.push(a.pt2px(m.size))}v.size.fieldStops={values:y,sizes:B};break;
case g.WGLVVFlag.SIZE_UNIT_VALUE:v.size.unitValue={unit:z.valueUnit,valueRepresentation:z.valueRepresentation}}}else if("color"===B)for(y=n.convertVisualVariables([y],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),v.color=y.color,c=0;32>c;c+=4)f.premultiplyAlpha(v.color.colors,c,!0);else"opacity"===B?v.opacity=t(y):"rotation"===B&&(v.rotation={type:y.rotationType})}return{vvFields:q,vvRanges:v}}})},"esri/layers/vectorTiles/views/3d/layers/support/FastSymbolUpdates":function(){define(["require",
"exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/glMatrix"],function(D,k,a,f,g){function p(c){return null!==c&&void 0!==c}function n(c){return"number"===typeof c}function d(c,m){c&&c.push(m)}function e(c,m,u,w,A){var C=c.minSize,E=c.maxSize;if(c.expression)return d(A,"Could not convert size info: expression not supported"),!1;if(c.useSymbolValue)return c=w.symbolSize[u],m.minSize[u]=c,m.maxSize[u]=c,m.offset[u]=m.minSize[u],m.factor[u]=0,m.type[u]=1,!0;if(p(c.field)){if(p(c.stops)){if(2===
c.stops.length&&n(c.stops[0].size)&&n(c.stops[1].size))return l(c.stops[0].size,c.stops[1].size,c.stops[0].value,c.stops[1].value,m,u),m.type[u]=1,!0;d(A,"Could not convert size info: stops only supported with 2 elements");return!1}if(n(C)&&n(E)&&p(c.minDataValue)&&p(c.maxDataValue))return l(C,E,c.minDataValue,c.maxDataValue,m,u),m.type[u]=1,!0;if(null!=a.meterIn[c.valueUnit])return m.minSize[u]=-Infinity,m.maxSize[u]=Infinity,m.offset[u]=0,m.factor[u]=1/a.meterIn[c.valueUnit],m.type[u]=1,!0;"unknown"===
c.valueUnit?d(A,"Could not convert size info: proportional size not supported"):d(A,"Could not convert size info: scale-dependent size not supported");return!1}if(!p(c.field)){if(c.stops&&c.stops[0]&&n(c.stops[0].size))return m.minSize[u]=c.stops[0].size,m.maxSize[u]=c.stops[0].size,m.offset[u]=m.minSize[u],m.factor[u]=0,m.type[u]=1,!0;if(n(C))return m.minSize[u]=C,m.maxSize[u]=C,m.offset[u]=C,m.factor[u]=0,m.type[u]=1,!0}d(A,"Could not convert size info: unsupported variant of sizeInfo");return!1}
function l(c,m,u,w,A,C){w=0<Math.abs(w-u)?(m-c)/(w-u):0;A.minSize[C]=0<w?c:m;A.maxSize[C]=0<w?m:c;A.offset[C]=c-u*w;A.factor[C]=w}function h(c,m,u,w){if(c.normalizationField||c.valueRepresentation)return d(w,"Could not convert size info: unsupported property"),null;var A=c.field;if(null!=A&&"string"!==typeof A)return d(w,"Could not convert size info: field is not a string"),null;if(!m.size)m.size={field:c.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(c.field)if(!m.size.field)m.size.field=
c.field;else if(c.field!==m.size.field)return d(w,"Could not convert size info: multiple fields in use"),null;switch(c.axis){case "width":return(A=e(c,m.size,0,u,w))?m:null;case "height":return(A=e(c,m.size,2,u,w))?m:null;case "depth":return(A=e(c,m.size,1,u,w))?m:null;case "width-and-depth":return(A=e(c,m.size,0,u,w))&&e(c,m.size,1,u,w),A?m:null;case null:case void 0:case "all":return(A=(A=(A=e(c,m.size,0,u,w))&&e(c,m.size,1,u,w))&&e(c,m.size,2,u,w))?m:null;default:return d(w,'Could not convert size info: unknown axis "'+
c.axis+'""'),null}}function t(c,m,u){for(var w=0;3>w;++w){var A=m.unitInMeters;1===c.type[w]&&(A*=m.modelSize[w],c.type[w]=2);c.minSize[w]/=A;c.maxSize[w]/=A;c.offset[w]/=A;c.factor[w]/=A}if(0!==c.type[0])m=0;else if(0!==c.type[1])m=1;else if(0!==c.type[2])m=2;else return d(u,"No size axis contains a valid size or scale"),!1;for(w=0;3>w;++w)0===c.type[w]&&(c.minSize[w]=c.minSize[m],c.maxSize[w]=c.maxSize[m],c.offset[w]=c.offset[m],c.factor[w]=c.factor[m],c.type[w]=c.type[m]);return!0}function r(c,
m,u){c[4*m]=u.r/255;c[4*m+1]=u.g/255;c[4*m+2]=u.b/255;c[4*m+3]=u.a}function q(c,m,u){if(c.normalizationField)return d(u,"Could not convert color info: unsupported property"),null;if("string"===typeof c.field)if(c.stops){if(8<c.stops.length)return d(u,"Could not convert color info: too many color stops"),null;m.color={field:c.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};c=c.stops;for(u=0;8>u;++u){var w=c[Math.min(u,c.length-1)];m.color.values[u]=
w.value;r(m.color.colors,u,w.color)}}else if(c.colors){if(!p(c.minDataValue)||!p(c.maxDataValue))return d(u,"Could not convert color info: missing data values"),null;if(2!==c.colors.length)return d(u,"Could not convert color info: invalid colors array"),null;m.color={field:c.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};m.color.values[0]=c.minDataValue;r(m.color.colors,0,c.colors[0]);m.color.values[1]=c.maxDataValue;r(m.color.colors,1,c.colors[1]);
for(u=2;8>u;++u)m.color.values[u]=c.maxDataValue,r(m.color.colors,u,c.colors[1])}else return d(u,"Could not convert color info: missing stops or colors"),null;else if(c.stops&&0<=c.stops.length||c.colors&&0<=c.colors.length)for(c=c.stops&&0<=c.stops.length?c.stops[0].color:c.colors[0],m.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},u=0;8>u;u++)m.color.values[u]=Infinity,r(m.color.colors,u,c);else return d(u,"Could not convert color info: no field and no colors/stops"),
null;return m}function v(c,m,u,w){c=2===u&&"arithmetic"===c.rotationType;m.offset[u]=c?90:0;m.factor[u]=c?-1:1;m.type[u]=1}function x(c,m,u){if("string"!==typeof c.field)return d(u,"Could not convert rotation info: field is not a string"),null;if(!m.rotation)m.rotation={field:c.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(c.field)if(!m.rotation.field)m.rotation.field=c.field;else if(c.field!==m.rotation.field)return d(u,"Could not convert rotation info: multiple fields in use"),null;
switch(c.axis){case "tilt":return v(c,m.rotation,0,u),m;case "roll":return v(c,m.rotation,1,u),m;case null:case void 0:case "heading":return v(c,m.rotation,2,u),m;default:return d(u,'Could not convert rotation info: unknown axis "'+c.axis+'""'),null}}function y(c,m,u){if(!c)return null;var w=!m.supportedTypes||!!m.supportedTypes.size,A=!m.supportedTypes||!!m.supportedTypes.color,C=!m.supportedTypes||!!m.supportedTypes.rotation;return(c=c.reduce(function(E,G){if(!E)return E;if(G.valueExpression)return d(u,
"Could not convert visual variables: arcade expressions not supported"),null;switch(G.type){case "size":return w?h(G,E,m,u):E;case "color":return A?q(G,E,u):E;case "rotation":return C?x(G,E,u):E;default:return d(u,"Could not convert visual variables: unsupported type "+G.type),null}},{size:null,color:null,rotation:null}))&&c.size&&!t(c.size,m,u)?null:c}function B(c,m,u){if(!!c!==!!m||c&&c.field!==m.field)return!1;if(c&&"rotation"===u)for(u=0;3>u;u++)if(c.type[u]!==m.type[u]||c.offset[u]!==m.offset[u]||
c.factor[u]!==m.factor[u])return!1;return!0}function z(c,m){var u={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},w=c&&null!=c.size;c&&c.size?(u.vvSizeEnabled=!0,u.vvSizeMinSize=c.size.minSize,u.vvSizeMaxSize=c.size.maxSize,u.vvSizeOffset=c.size.offset,u.vvSizeFactor=c.size.factor):c&&w&&(u.vvSizeValue=m.transformation.scale);c&&w&&(u.vvSymbolAnchor=
m.transformation.anchor,u.vvSymbolRotation=m.transformation.rotation);c&&c.color&&(u.vvColorEnabled=!0,u.vvColorValues=c.color.values,u.vvColorColors=c.color.colors);return u}Object.defineProperty(k,"__esModule",{value:!0});k.convertVisualVariables=y;k.initFastSymbolUpdatesState=function(c,m,u){return m&&c&&!c.disableFastUpdates?(c=y(c.visualVariables,u))?{enabled:!0,visualVariables:c,materialParameters:z(c,u),customTransformation:c&&null!=c.size}:{enabled:!1}:{enabled:!1}};k.updateFastSymbolUpdatesState=
function(c,m,u){if(!m||!c.enabled)return!1;var w=c.visualVariables;m=y(m.visualVariables,u);if(!(m&&B(w.size,m.size,"size")&&B(w.color,m.color,"color")&&B(w.rotation,m.rotation,"rotation")))return!1;c.visualVariables=m;c.materialParameters=z(m,u);c.customTransformation=m&&null!=m.size;return!0};k.getMaterialParams=z;var b;(function(c){var m=g.mat4d,u=g.vec3,w=m.create(),A=u.create();c.evaluateModelTransform=function(C,E,G){if(!C.vvSizeEnabled)return G;m.set(G,w);f.computeObjectRotation(C.vvSymbolRotation[2],
C.vvSymbolRotation[0],C.vvSymbolRotation[1],w);if(C.vvSizeEnabled){for(G=0;3>G;++G){var F=C.vvSizeOffset[G]+E[0]*C.vvSizeFactor[G],I=G;var M=C.vvSizeMinSize[G],Y=C.vvSizeMaxSize[G];F=F<M?M:F>Y?Y:F;A[I]=F}m.scale(w,A,w)}else m.scale(w,C.vvSizeValue,w);m.translate(w,C.vvSymbolAnchor,w);return w}})(b||(b={}));k.evaluateModelTransform=b.evaluateModelTransform})},"esri/layers/vectorTiles/renderers/support/utils":function(){define(["dojo/date/locale","../../Color","../../core/lang","../../core/numberUtils",
"dojo/i18n!dojo/cldr/nls/gregorian"],function(D,k,a,f,g){function p(q){return q&&q.map(function(v){return new k(v)})}function n(q,v,x){var y="";0===v?y=e.lt+" ":v===x&&(y=e.gt+" ");return y+q}var d={},e={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},l={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},h={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},
minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},t={formatLength:"short",fullYear:!0},r={formatLength:"short"};a.mixin(d,{meterIn:{inches:1/.0254,feet:1/.3048,"us-feet":3.28084,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,
millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(q,v){var x=[];null==q||q instanceof Date||(q=new Date(q));v=v||{};v=a.mixin({},v);var y=v.selector?v.selector.toLowerCase():null;var B=!y||-1<y.indexOf("time");y=!y||-1<y.indexOf("date");B&&(v.timeOptions=v.timeOptions||r,v.timeOptions&&(v.timeOptions=a.mixin({},v.timeOptions),v.timeOptions.selector=
v.timeOptions.selector||"time",x.push(v.timeOptions)));y&&(v.dateOptions=v.dateOptions||t,v.dateOptions&&(v.dateOptions=a.mixin({},v.dateOptions),v.dateOptions.selector=v.dateOptions.selector||"date",x.push(v.dateOptions)));x&&x.length?(x=x.map(function(z){return D.format(q,z)}),B=1==x.length?x[0]:g["dateTimeFormat-medium"].replace(/'/g,"").replace(/\{(\d+)\}/g,function(z,b){return x[b]})):B=D.format(q);return B},createColorStops:function(q){var v=q.values,x=q.colors,y=q.labelIndexes,B=q.isDate,z=
q.dateFormatOptions;q=[];return q=v.map(function(b,c){var m=null;if(!y||-1<y.indexOf(c)){var u;(u=B?d.formatDate(b,z):f.format(b))&&(m=n(u,c,v.length-1))}return{value:b,color:x[c],label:m}})},updateColorStops:function(q){var v=q.stops,x=q.changes,y=q.isDate,B=q.dateFormatOptions,z=[],b=v.map(function(m){return m.value});x.forEach(function(m){z.push(m.index);b[m.index]=m.value});var c=f.round(b,{indexes:z});v.forEach(function(m,u){m.value=b[u];if(null!=m.label){var w,A=null;(w=y?d.formatDate(c[u],
B):f.format(c[u]))&&(A=n(w,u,v.length-1));m.label=A}})},createClassBreakLabel:function(q){var v=q.minValue,x=q.maxValue,y=q.isFirstBreak?"":e.gt+" ";q="percent-of-total"===q.normalizationType?e.pct:"";v=null==v?"":f.format(v);x=null==x?"":f.format(x);return y+v+q+" "+e.ld+" "+x+q},setLabelsForClassBreaks:function(q){var v=q.classBreakInfos,x=q.classificationMethod,y=q.normalizationType,B=[];v&&v.length&&"standard-deviation"!==x&&(q.round?(B.push(v[0].minValue),v.forEach(function(z){B.push(z.maxValue)}),
B=f.round(B),v.forEach(function(z,b){z.label=d.createClassBreakLabel({minValue:0===b?B[0]:B[b],maxValue:B[b+1],isFirstBreak:0===b,normalizationType:y})})):v.forEach(function(z,b){z.label=d.createClassBreakLabel({minValue:z.minValue,maxValue:z.maxValue,isFirstBreak:0===b,normalizationType:y})}))},updateClassBreak:function(q){var v=q.classBreaks,x=q.normalizationType,y=q.change,B=y.index;y=y.value;var z=-1,b=-1,c=v.length;"standard-deviation"!==q.classificationMethod&&(0===B?z=B:B===c?b=B-1:(b=B-1,
z=B),-1<z&&z<c&&(q=v[z],q.minValue=y,q.label=d.createClassBreakLabel({minValue:q.minValue,maxValue:q.maxValue,isFirstBreak:0===z,normalizationType:x})),-1<b&&b<c&&(q=v[b],q.maxValue=y,q.label=d.createClassBreakLabel({minValue:q.minValue,maxValue:q.maxValue,isFirstBreak:0===b,normalizationType:x})))},calculateDateFormatInterval:function(q){var v,x,y=q.length,B=Infinity;q=q.map(function(C){return new Date(C)});for(v=0;v<y-1;v++){var z=q[v];var b=[];var c=Infinity;var m="";for(x=v+1;x<y;x++){var u=q[x];
u=z.getFullYear()!==u.getFullYear()&&"year"||z.getMonth()!==u.getMonth()&&"month"||z.getDate()!==u.getDate()&&"day"||z.getHours()!==u.getHours()&&"hour"||z.getMinutes()!==u.getMinutes()&&"minute"||z.getSeconds()!==u.getSeconds()&&"second"||"millisecond";var w=l[u];w<c&&(c=w,m=u);b.push(u)}if(c<B){B=c;var A=m}}return A},createUniqueValueLabel:function(q){var v=q.value,x=q.fieldInfo,y=q.domain;q=q.dateFormatInterval;var B=String(v);(y=y&&y.codedValues?y.getName(v):null)?B=y:"number"===typeof v&&(B=
x&&"date"===x.type?d.formatDate(v,q&&h[q]):f.format(v));return B},cloneColorVariable:function(q){if(q){var v=a.mixin({},q);v.colors=p(v.colors);v.stops=v.stops&&v.stops.map(function(x){x=a.mixin({},x);x.color&&(x.color=new k(x.color));return x});v.legendOptions&&(v.legendOptions=a.mixin({},v.legendOptions))}return v},cloneOpacityVariable:function(q){if(q){var v=a.mixin({},q);if(q=v.opacityValues)v.opacityValues=q.slice(0);if(q=v.stops)v.stops=q.map(function(x){return a.mixin({},x)});if(q=v.legendOptions)v.legendOptions=
a.mixin({},q)}return v},cloneSizeVariable:function(q){if(q){var v=a.mixin({},q);v.stops&&(v.stops=v.stops.map(function(x){return a.mixin({},x)}));(q=v.minSize)&&"object"===typeof q&&(v.minSize=d.cloneSizeVariable(q));(q=v.maxSize)&&"object"===typeof q&&(v.maxSize=d.cloneSizeVariable(q));if(q=v.legendOptions)if(v.legendOptions=a.mixin({},q),q=q.customValues)v.legendOptions.customValues=q.slice(0)}return v}});return d})},"esri/layers/vectorTiles/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],
function(D,k){function a(d,e){return d-e}var f=/^-?(\d+)(\.(\d+))?$/i,g=new RegExp("\\"+k.decimal+"0+$","g"),p=RegExp("(\\d)0*$","g"),n={numDigits:function(d){var e=String(d),l=e.match(f);d={integer:0,fractional:0};l&&l[1]?(d.integer=l[1].split("").length,d.fractional=l[3]?l[3].split("").length:0):-1<e.toLowerCase().indexOf("e")&&(l=e.split("e"),e=l[0],l=l[1],e&&l&&(e=Number(e),l=Number(l),(d=0<l)||(l=Math.abs(l)),e=n.numDigits(e),d?(e.integer+=l,e.fractional=l>e.fractional?0:e.fractional-l):(e.fractional+=
l,e.integer=l>e.integer?1:e.integer-l),d=e));return d},percentChange:function(d,e,l,h){var t={previous:null,next:null};if(null!=l){var r=d-l;t.previous=Math.floor(Math.abs(100*(e-l-r)/r))}null!=h&&(r=h-d,t.next=Math.floor(Math.abs(100*(h-e-r)/r)));return t},round:function(d,e){var l=d.slice(0),h,t,r=e&&null!=e.tolerance?e.tolerance:2,q=e&&e.indexes,v=e&&null!=e.strictBounds?e.strictBounds:!1;if(q)q.sort(a);else for(q=[],h=0;h<l.length;h++)q.push(h);for(h=0;h<q.length;h++){var x=q[h];var y=l[x];var B=
0===x?null:l[x-1];var z=x===l.length-1?null:l[x+1];var b=n.numDigits(y);if(b=b.fractional){var c=0;for(t=!1;c<=b&&!t;){var m=void 0;var u=void 0;m=y;t=c;u=Number(m.toFixed(t));u<m?m=u+1/Math.pow(10,t):(m=u,u-=1/Math.pow(10,t));u=Number(u.toFixed(t));m=Number(m.toFixed(t));u=[u,m];u=v&&0===h?u[1]:u[0];m=t=t=void 0;var w=r,A=n.percentChange(y,u,B,z);m=null==A.previous||A.previous<=w;t=null==A.next||A.next<=w;t=m&&t||A.previous+A.next<=2*w;c++}t&&(l[x]=u)}}return l},format:function(d,e){e=e||{places:20,
round:-1};var l=D.format(d,e);l&&(l=l.replace(p,"$1").replace(g,""));return l}};return n})},"esri/layers/vectorTiles/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../geometry ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ../../lib/glMatrix ../../support/mathUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h){function t(x){var y=x.paths[0];if(!y||0===y.length)return null;y=n.getPointOnPath(y,n.getPathLength(y)/2);return e.makeDehydratedPoint(y[0],y[1],y[2],x.spatialReference)}function r(x){if(Array.isArray(x)){for(var y=0;y<x.length;y++)if(!r(x[y]))return!1;return!0}return null==x||0<=x}Object.defineProperty(k,"__esModule",{value:!0});var q=[1,1,1];k.computeCentroid=function(x){if("point"===x.type)return x;if(e.isHydratedGeometry(x))switch(x.type){case "extent":return x.center;
case "polygon":return x.centroid;case "polyline":return t(x);case "mesh":return x.extent.center}else switch(x.type){case "extent":var y=h.isFinite(x.zmin);return e.makeDehydratedPoint(.5*(x.xmax+x.xmin),.5*(x.ymax+x.ymin),y?.5*(x.zmax+x.zmin):void 0,x.spatialReference);case "polygon":return y=p.ringsCentroid(x.rings,e.hasZ(x)),e.makeDehydratedPoint(y[0],y[1],y[2],x.spatialReference);case "polyline":return t(x)}};k.convertPointSR=function(x,y){var B=x.spatialReference;B.isWebMercator&&y.isWGS84?(d.xyToLngLat(x.x,
x.y,v),x.x=v[0],x.y=v[1],x.spatialReference=a.SpatialReference.WGS84):y.isWebMercator&&B.isWGS84&&(d.lngLatToXY(x.x,x.y,v),x.x=v[0],x.y=v[1],x.spatialReference=a.SpatialReference.WebMercator)};k.enlargeExtent=function(x,y,B){if(x){y||(y=g.create());var z=.5*x.width*(B-1);B=.5*x.height*(B-1);x.width<1E-7*x.height?z+=B/20:x.height<1E-7*x.width&&(B+=z/20);l.vec4d.set4(x.xmin-z,x.ymin-B,x.xmax+z,x.ymax+B,y);return y}return null};k.updateVertexAttributeAuxpos1w=function(x,y){for(var B=0;B<x.geometries.length;++B){var z=
x.geometries[B].data.vertexAttributes.auxpos1;z&&z.data[3]!==y&&(z.data[3]=y,x.geometryVertexAttrsUpdated(B))}};k.mixinColorAndOpacity=function(x,y){var B=[1,1,1,1];null!=x&&(B[0]=x[0],B[1]=x[1],B[2]=x[2]);null!==y&&void 0!==y?B[3]=y:null!=x&&3<x.length&&(B[3]=x[3]);return B};k.overrideColor=function(x,y,B,z,b,c){void 0===c&&(c=[0,0,0,0]);for(var m=0;3>m;++m)c[m]=x&&null!=x[m]?x[m]:B&&null!=B[m]?B[m]:b[m];c[3]=null!=y?y:null!=z?z:b[3];return c};k.computeObjectScale=function(x,y,B,z){void 0===x&&(x=
q);void 0===z&&(z=1);var b=Array(3);if(null==y||null==B)b[0]=1,b[1]=1,b[2]=1;else{for(var c=void 0,m=0,u=2;0<=u;u--){var w=x[u],A=void 0,C=null!=w,E=0===u&&!c&&!C,G=B[u];"symbolValue"===w||E?A=0!==G?y[u]/G:1:C&&"proportional"!==w&&isFinite(w)&&(A=0!==G?w/G:1);null!=A&&(c=b[u]=A,m=Math.max(m,Math.abs(A)))}for(u=2;0<=u;u--)null==b[u]?b[u]=c:0===b[u]&&(b[u]=.001*m)}for(u=2;0<=u;u--)b[u]/=z;return b};k.computeSizeWithResourceSize=function(x,y){var B=y.width,z=y.depth,b=y.height,c=y.isPrimitive?10:1;if(null==
B&&null==b&&null==z)return[c*x[0],c*x[1],c*x[2]];B=[B,z,b];for(z=0;3>z;z++)if(b=B[z],null!=b){var m=b/x[z];break}for(z=0;3>z;z++)null==B[z]&&(B[z]=x[z]*m);return B};k.validateSymbolLayerSize=function(x){null!=x.isPrimitive&&(x=[x.width,x.depth,x.height]);return r(x)?null:"Symbol sizes may not be negative values"};k.computeObjectRotation=function(x,y,B,z){void 0===z&&(z=l.mat4d.identity());x=x||0;y=y||0;B=B||0;0!==x&&l.mat4d.rotateZ(z,-x/180*Math.PI,z);0!==y&&l.mat4d.rotateX(z,y/180*Math.PI,z);0!==
B&&l.mat4d.rotateY(z,B/180*Math.PI,z);return z};k.demResolutionForBoundingBox=function(x,y){return null!=y.minDemResolution?y.minDemResolution:f.isPoint(x)?y.minDemResolutionForPoints:.01*f.maximumDimension(x)};var v=[0,0]})},"esri/layers/vectorTiles/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t){Object.defineProperty(k,"__esModule",{value:!0});k.Extent=a;k.BaseGeometry=f;k.Mesh=g;k.Multipoint=p;k.Point=n;k.Polygon=d;k.Polyline=e;k.ScreenPoint=l;k.SpatialReference=h;k.isGeometry=function(r){return r instanceof k.BaseGeometry};k.fromJSON=t.fromJSON})},"esri/layers/vectorTiles/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r){function q(v,x,y){return null==x?y:null==y?x:v(x,y)}D=function(v){function x(){for(var B=0;B<arguments.length;B++);B=v.call(this)||this;B.type="extent";B.xmin=0;B.ymin=0;B.mmin=void 0;B.zmin=void 0;B.xmax=0;B.ymax=0;B.mmax=void 0;B.zmax=void 0;return B}a(x,v);var y=x;x.prototype.normalizeCtorArgs=function(B,z,b,c,m){return!B||"esri.geometry.SpatialReference"!==B.declaredClass&&null==B.wkid?"object"===typeof B?(B.spatialReference=null!=B.spatialReference?B.spatialReference:
e.WGS84,B):{xmin:B,ymin:z,xmax:b,ymax:c,spatialReference:null!=m?m:e.WGS84}:{spatialReference:B,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(x.prototype,"center",{get:function(){var B=new d({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(B.z=.5*(this.zmin+this.zmax));this.hasM&&(B.m=.5*(this.mmin+this.mmax));return B},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(x.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});x.prototype.centerAt=function(B){var z=this.center;return null!=B.z&&this.hasZ?this.offset(B.x-z.x,B.y-z.y,B.z-z.z):this.offset(B.x-z.x,B.y-z.y)};x.prototype.clone=function(){var B=new y;B.xmin=this.xmin;B.ymin=this.ymin;B.xmax=this.xmax;B.ymax=this.ymax;B.spatialReference=this.spatialReference;null!=this.zmin&&(B.zmin=this.zmin,B.zmax=this.zmax);null!=this.mmin&&(B.mmin=this.mmin,B.mmax=this.mmax);return B};x.prototype.contains=function(B){if(!B)return!1;var z=this.spatialReference,
b=B.spatialReference;z&&b&&!z.equals(b)&&r.canProject(z,b)&&(B=z.isWebMercator?r.geographicToWebMercator(B):r.webMercatorToGeographic(B,!0));return"point"===B.type?l.extentContainsPoint(this,B):"extent"===B.type?l.extentContainsExtent(this,B):!1};x.prototype.equals=function(B){if(!B)return!1;var z=this.spatialReference,b=B.spatialReference;z&&b&&!z.equals(b)&&r.canProject(z,b)&&(B=z.isWebMercator?r.geographicToWebMercator(B):r.webMercatorToGeographic(B,!0));return this.xmin===B.xmin&&this.ymin===
B.ymin&&this.zmin===B.zmin&&this.mmin===B.mmin&&this.xmax===B.xmax&&this.ymax===B.ymax&&this.zmax===B.zmax&&this.mmax===B.mmax};x.prototype.expand=function(B){B=.5*(1-B);var z=this.width*B,b=this.height*B;this.xmin+=z;this.ymin+=b;this.xmax-=z;this.ymax-=b;this.hasZ&&(z=(this.zmax-this.zmin)*B,this.zmin+=z,this.zmax-=z);this.hasM&&(B*=this.mmax-this.mmin,this.mmin+=B,this.mmax-=B);return this};x.prototype.intersects=function(B){if(!B)return!1;var z=this.spatialReference,b=B.spatialReference;z&&b&&
!z.equals(b)&&r.canProject(z,b)&&(B=z.isWebMercator?r.geographicToWebMercator(B):r.webMercatorToGeographic(B,!0));z=h.getExtentIntersector(B.type);return"mesh"!==B.type?z(this,B):z(this,B.extent)};x.prototype.normalize=function(){var B=this._normalize(!1,!0);return Array.isArray(B)?B:[B]};x.prototype.offset=function(B,z,b){this.xmin+=B;this.ymin+=z;this.xmax+=B;this.ymax+=z;null!=b&&(this.zmin+=b,this.zmax+=b);return this};x.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};x.prototype.union=
function(B){this.xmin=Math.min(this.xmin,B.xmin);this.ymin=Math.min(this.ymin,B.ymin);this.xmax=Math.max(this.xmax,B.xmax);this.ymax=Math.max(this.ymax,B.ymax);if(this.hasZ||B.hasZ)this.zmin=q(Math.min,this.zmin,B.zmin),this.zmax=q(Math.max,this.zmax,B.zmax);if(this.hasM||B.hasM)this.mmin=q(Math.min,this.mmin,B.mmin),this.mmax=q(Math.max,this.mmax,B.mmax);return this};x.prototype.intersection=function(B){if(!this.intersects(B))return null;this.xmin=Math.max(this.xmin,B.xmin);this.ymin=Math.max(this.ymin,
B.ymin);this.xmax=Math.min(this.xmax,B.xmax);this.ymax=Math.min(this.ymax,B.ymax);if(this.hasZ||B.hasZ)this.zmin=q(Math.max,this.zmin,B.zmin),this.zmax=q(Math.min,this.zmax,B.zmax);if(this.hasM||B.hasM)this.mmin=q(Math.max,this.mmin,B.mmin),this.mmax=q(Math.min,this.mmax,B.mmax);return this};x.prototype.toJSON=function(B){return this.write(null,B)};x.prototype._shiftCM=function(B){void 0===B&&(B=t.getInfo(this.spatialReference));if(!B||!this.spatialReference)return this;var z=this.spatialReference,
b=this._getCM(B);if(b){var c=z.isWebMercator?r.webMercatorToGeographic(b):b;this.xmin-=b.x;this.xmax-=b.x;z.isWebMercator||(c.x=this._normalizeX(c.x,B).x);this.spatialReference=new e(g.substitute({Central_Meridian:c.x},z.isWGS84?B.altTemplate:B.wkTemplate))}return this};x.prototype._getCM=function(B){var z=null,b=B.valid;B=b[0];b=b[1];var c=this.xmin,m=this.xmax;c>=B&&c<=b&&m>=B&&m<=b||(z=this.center);return z};x.prototype._normalize=function(B,z,b){var c=this.spatialReference;if(!c)return this;b=
b||t.getInfo(c);if(!b)return this;var m=this._getParts(b).map(function(A){return A.extent});if(2>m.length)return m[0]||this;if(2<m.length)return B?this._shiftCM(b):this.set({xmin:b.valid[0],xmax:b.valid[1]});if(B)return this._shiftCM(b);if(z)return m;var u=!0,w=!0;m.forEach(function(A){A.hasZ||(u=!1);A.hasM||(w=!1)});return{rings:m.map(function(A){var C=[[A.xmin,A.ymin],[A.xmin,A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]];if(u)for(var E=(A.zmax-A.zmin)/2,G=0;G<C.length;G++)C[G].push(E);
if(w)for(A=(A.mmax-A.mmin)/2,G=0;G<C.length;G++)C[G].push(A);return C}),hasZ:u,hasM:w,spatialReference:c}};x.prototype._getParts=function(B){var z=this.cache._parts;if(!z){z=[];var b=this.ymin,c=this.ymax,m=this.spatialReference,u=this.width,w=this.xmin,A=this.xmax,C=void 0;B=B||t.getInfo(m);var E=B.valid,G=E[0],F=E[1];C=this._normalizeX(this.xmin,B);var I=C.x;E=C.frameId;C=this._normalizeX(this.xmax,B);var M=C.x;B=C.frameId;C=I===M&&0<u;if(u>2*F){u=new y(w<A?I:M,b,F,c,m);w=new y(G,b,w<A?M:I,c,m);
A=new y(0,b,F,c,m);b=new y(G,b,0,c,m);c=[];m=[];u.contains(A)&&c.push(E);u.contains(b)&&m.push(E);w.contains(A)&&c.push(B);w.contains(b)&&m.push(B);for(G=E+1;G<B;G++)c.push(G),m.push(G);z.push({extent:u,frameIds:[E]},{extent:w,frameIds:[B]},{extent:A,frameIds:c},{extent:b,frameIds:m})}else I>M||C?z.push({extent:new y(I,b,F,c,m),frameIds:[E]},{extent:new y(G,b,M,c,m),frameIds:[B]}):z.push({extent:new y(I,b,M,c,m),frameIds:[E]});this.cache._parts=z}B=this.hasZ;b=this.hasM;if(B||b)for(E={},B&&(E.zmin=
this.zmin,E.zmax=this.zmax),b&&(E.mmin=this.mmin,E.mmax=this.mmax),B=0;B<z.length;B++)z[B].extent.set(E);return z};x.prototype._normalizeX=function(B,z){var b=z.valid,c=b[0],m=b[1];b=2*m;var u=0;B>m?(c=Math.ceil(Math.abs(B-m)/b),B-=c*b,u=c):B<c&&(c=Math.ceil(Math.abs(B-c)/b),B+=c*b,u=-c);return{x:B,frameId:u}};f([p.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],x.prototype,"cache",void 0);f([p.property({readOnly:!0,dependsOn:["cache"]})],x.prototype,"center",
null);f([p.property({readOnly:!0,dependsOn:["cache"]})],x.prototype,"extent",null);f([p.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasM",null);f([p.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasZ",null);f([p.property({readOnly:!0,dependsOn:["ymin","ymax"]})],x.prototype,"height",null);f([p.property({readOnly:!0,dependsOn:["xmin","xmax"]})],x.prototype,"width",null);
f([p.property({type:Number,json:{write:!0}})],x.prototype,"xmin",void 0);f([p.property({type:Number,json:{write:!0}})],x.prototype,"ymin",void 0);f([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],x.prototype,"mmin",void 0);f([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],x.prototype,"zmin",void 0);f([p.property({type:Number,json:{write:!0}})],
x.prototype,"xmax",void 0);f([p.property({type:Number,json:{write:!0}})],x.prototype,"ymax",void 0);f([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],x.prototype,"mmax",void 0);f([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],x.prototype,"zmax",void 0);return x=y=f([p.subclass("esri.geometry.Extent")],x)}(p.declared(n));D.prototype.toJSON.isDefaultToJSON=
!0;return D})},"esri/layers/vectorTiles/geometry/support/contains":function(){define(["require","exports"],function(D,k){function a(p,n,d,e){return n>=p.xmin&&n<=p.xmax&&d>=p.ymin&&d<=p.ymax?null!=e&&p.hasZ?e>=p.zmin&&e<=p.zmax:!0:!1}function f(p,n){var d;if(d=p.rings)if(Array.isArray(d[0][0])){for(var e=!1,l=0,h=d.length;l<h;l++)e=g(e,d[l],n);d=e}else d=g(!1,d,n);else d=!1;return d}function g(p,n,d){var e=d[0];d=d[1];for(var l=0,h=0,t=n.length;h<t;h++){l++;l===t&&(l=0);var r=n[h],q=r[0];r=r[1];var v=
n[l],x=v[0];v=v[1];(r<d&&v>=d||v<d&&r>=d)&&q+(d-r)/(v-r)*(x-q)<e&&(p=!p)}return p}Object.defineProperty(k,"__esModule",{value:!0});k.extentContainsPoint=function(p,n){return a(p,n.x,n.y,n.z)};k.extentContainsExtent=function(p,n){var d=n.xmin,e=n.ymin,l=n.zmin,h=n.xmax,t=n.ymax,r=n.zmax;return p.hasZ&&n.hasZ?a(p,d,e,l)&&a(p,d,t,l)&&a(p,h,t,l)&&a(p,h,e,l)&&a(p,d,e,r)&&a(p,d,t,r)&&a(p,h,t,r)&&a(p,h,e,r):a(p,d,e)&&a(p,d,t)&&a(p,h,t)&&a(p,h,e)};k.extentContainsCoords2D=function(p,n){return a(p,n[0],n[1])};
k.extentContainsCoords3D=function(p,n){return a(p,n[0],n[1],n[2])};k.polygonContainsPoint=function(p,n){return f(p,[n.x,n.y])};k.polygonContainsCoords=f})},"esri/layers/vectorTiles/geometry/support/intersects":function(){define(["require","exports","./contains"],function(D,k,a){function f(B,z){return a.extentContainsPoint(B,z)}function g(B,z){var b=B.hasZ&&z.hasZ;if(B.xmin<=z.xmin){var c=z.xmin;if(B.xmax<c)return!1}else if(c=B.xmin,z.xmax<c)return!1;if(B.ymin<=z.ymin){if(c=z.ymin,B.ymax<c)return!1}else if(c=
B.ymin,z.ymax<c)return!1;if(b&&z.hasZ)if(B.zmin<=z.zmin){if(b=z.zmin,B.zmax<b)return!1}else if(b=B.zmin,z.zmax<b)return!1;return!0}function p(B,z){for(var b=z.hasZ?a.extentContainsCoords3D:a.extentContainsCoords2D,c=0,m=z.points;c<m.length;c++)if(b(B,m[c]))return!0;return!1}function n(B,z){h[0]=B.xmin;h[1]=B.ymax;t[0]=B.xmax;t[1]=B.ymax;r[0]=B.xmin;r[1]=B.ymin;q[0]=B.xmax;q[1]=B.ymin;for(var b=0,c=v;b<c.length;b++)if(a.polygonContainsCoords(z,c[b]))return!0;b=0;for(c=z.rings;b<c.length;b++){var m=
c[b];if(m.length){var u=m[0];if(a.extentContainsCoords2D(B,u))return!0;for(var w=1;w<m.length;w++){var A=m[w];if(a.extentContainsCoords2D(B,A)||e(u,A,x))return!0;u=A}}}return!1}function d(B,z){h[0]=B.xmin;h[1]=B.ymax;t[0]=B.xmax;t[1]=B.ymax;r[0]=B.xmin;r[1]=B.ymin;q[0]=B.xmax;q[1]=B.ymin;for(var b=z.paths,c=0;c<b.length;c++){var m=b[c];if(b.length){var u=m[0];if(a.extentContainsCoords2D(B,u))return!0;for(var w=1;w<m.length;w++){var A=m[w];if(a.extentContainsCoords2D(B,A)||e(u,A,x))return!0;u=A}}}return!1}
function e(B,z,b){for(var c=0;c<b.length;c++)if(l(B,z,b[c][0],b[c][1]))return!0;return!1}function l(B,z,b,c,m){var u=B[0];B=B[1];var w=z[0];z=z[1];var A=b[0],C=b[1];b=c[0]-A;A=u-A;var E=w-u;c=c[1]-C;C=B-C;var G=z-B,F=c*E-b*G;if(0===F)return!1;b=(b*C-c*A)/F;A=(E*C-G*A)/F;return 0<=b&&1>=b&&0<=A&&1>=A?(m&&(m[0]=u+b*(w-u),m[1]=B+b*(z-B)),!0):!1}Object.defineProperty(k,"__esModule",{value:!0});k.extentIntersectsPoint=f;k.extentIntersectsExtent=g;k.extentIntersectsMultipoint=p;var h=[0,0],t=[0,0],r=[0,
0],q=[0,0],v=[h,t,r,q],x=[[r,h],[h,t],[t,q],[q,r]];k.extentIntersectsPolygon=n;k.extentIntersectsPolyline=d;var y=[0,0];k.isSelfIntersecting=function(B){for(var z=0;z<B.length;z++){for(var b=B[z],c=0;c<b.length-1;c++)for(var m=b[c],u=b[c+1],w=z+1;w<B.length;w++)for(var A=0;A<B[w].length-1;A++){var C=B[w][A],E=B[w][A+1],G=l(m,u,C,E,y);if(G&&!(y[0]===m[0]&&y[1]===m[1]||y[0]===C[0]&&y[1]===C[1]||y[0]===u[0]&&y[1]===u[1]||y[0]===E[0]&&y[1]===E[1]))return!0}A=b.length;if(!(4>=A))for(c=0;c<A-3;c++){var F=
A-1;0===c&&(F=A-2);m=b[c];u=b[c+1];for(w=c+2;w<F;w++)if(C=b[w],E=b[w+1],(G=l(m,u,C,E,y))&&!(y[0]===m[0]&&y[1]===m[1]||y[0]===C[0]&&y[1]===C[1]||y[0]===u[0]&&y[1]===u[1]||y[0]===E[0]&&y[1]===E[1]))return!0}}return!1};k.segmentIntersects=l;k.getExtentIntersector=function(B){switch(B){case "esriGeometryEnvelope":case "extent":return g;case "esriGeometryMultipoint":case "multipoint":return p;case "esriGeometryPoint":case "point":return f;case "esriGeometryPolygon":case "polygon":return n;case "esriGeometryPolyline":case "polyline":return d;
case "mesh":return g}}})},"esri/layers/vectorTiles/geometry/Mesh":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Geometry"],function(D,k,a,f){return function(g){function p(n){return g.call(this)||this}a(p,g);p.prototype.clone=function(){return new p};return p}(f)})},"esri/layers/vectorTiles/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l){function h(t){return function(r,q){return null==r?q:null==q?r:t(r,q)}}D=function(t){function r(){for(var v=0;v<arguments.length;v++);v=t.call(this)||this;v.points=[];v.type="multipoint";return v}a(r,t);var q=r;r.prototype.normalizeCtorArgs=function(v,x){if(!v&&!x)return null;var y={};Array.isArray(v)?(y.points=v,y.spatialReference=x):!v||"esri.geometry.SpatialReference"!==v.declaredClass&&null==v.wkid?(v.points&&(y.points=v.points),v.spatialReference&&(y.spatialReference=
v.spatialReference),v.hasZ&&(y.hasZ=v.hasZ),v.hasM&&(y.hasM=v.hasM)):y.spatialReference=v;var B=y.points&&y.points[0];B&&(void 0===y.hasZ&&void 0===y.hasM?(y.hasZ=2<B.length,y.hasM=!1):void 0===y.hasZ?y.hasZ=3<B.length:void 0===y.hasM&&(y.hasM=3<B.length));return y};Object.defineProperty(r.prototype,"extent",{get:function(){var v=this.points;if(!v.length)return null;var x=new n,y=this.hasZ,B=this.hasM,z=y?3:2,b=v[0],c=h(Math.min),m=h(Math.max),u=b[0],w=b[1],A=b[0];b=b[1];for(var C,E,G,F,I=0,M=v.length;I<
M;I++){var Y=v[I],R=Y[0],S=Y[1];u=c(u,R);w=c(w,S);A=m(A,R);b=m(b,S);y&&2<Y.length&&(R=Y[2],C=c(C,R),G=m(G,R));B&&Y.length>z&&(Y=Y[z],E=c(E,Y),F=m(F,Y))}x.xmin=u;x.ymin=w;x.xmax=A;x.ymax=b;x.spatialReference=this.spatialReference;y?(x.zmin=C,x.zmax=G):(x.zmin=null,x.zmax=null);B?(x.mmin=E,x.mmax=F):(x.mmin=null,x.mmax=null);return x},enumerable:!0,configurable:!0});r.prototype.writePoints=function(v,x,y,B){x.points=g.clone(this.points)};r.prototype.addPoint=function(v){this.clearCache();l.updateSupportFromPoint(this,
v);Array.isArray(v)?this.points.push(v):this.points.push(v.toArray());return this};r.prototype.clone=function(){var v={points:g.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(v.hasZ=!0);this.hasM&&(v.hasM=!0);return new q(v)};r.prototype.getPoint=function(v){if(!this._validateInputs(v))return null;v=this.points[v];var x={x:v[0],y:v[1],spatialReference:this.spatialReference},y=2;this.hasZ&&(x.z=v[2],y=3);this.hasM&&(x.m=v[y]);return new e(x)};r.prototype.removePoint=function(v){if(!this._validateInputs(v))return null;
this.clearCache();return new e(this.points.splice(v,1)[0],this.spatialReference)};r.prototype.setPoint=function(v,x){if(!this._validateInputs(v))return this;this.clearCache();l.updateSupportFromPoint(x);this.points[v]=x.toArray();return this};r.prototype.toJSON=function(v){return this.write(null,v)};r.prototype._validateInputs=function(v){return null!=v&&0<=v&&v<this.points.length};f([p.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],r.prototype,"cache",void 0);f([p.property({dependsOn:["cache"]})],
r.prototype,"extent",null);f([p.property({type:[[Number]],json:{write:{isRequired:!0}}})],r.prototype,"points",void 0);f([p.writer("points")],r.prototype,"writePoints",null);return r=q=f([p.subclass("esri.geometry.Multipoint")],r)}(p.declared(d));D.prototype.toJSON.isDefaultToJSON=!0;return D})},"esri/layers/vectorTiles/geometry/support/zmUtils":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});k.updateSupportFromPoint=function(a,f,g){void 0===
g&&(g=!1);var p=a.hasM,n=a.hasZ;Array.isArray(f)?4!==f.length||p||n?3===f.length&&g&&!p?(n=!0,p=!1):3===f.length&&p&&n&&(n=p=!1):n=p=!0:(n=!n&&f.hasZ&&(!p||f.hasM),p=!p&&f.hasM&&(!n||f.hasZ));a.hasZ=n;a.hasM=p}})},"esri/layers/vectorTiles/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x){function y(b){return function(c,m){return null==c?m:null==m?c:b(c,m)}}var B=y(Math.min),z=y(Math.max);D=function(b){function c(){for(var u=0;u<arguments.length;u++);u=b.call(this)||this;u.rings=[];u.type="polygon";return u}a(c,b);var m=c;c.createEllipse=function(u){var w=u.center.x,A=u.center.y,C=u.center.z,E=u.center.m,G=u.center.hasZ,F=u.center.hasM,I=u.longAxis,M=u.shortAxis,Y=u.numberOfPoints;u=u.view;for(var R=[],S=2*Math.PI/Y,O=G?3:2,L=0;L<Y;L++){var P=
u.toMap(I*Math.cos(L*S)+w,M*Math.sin(L*S)+A);P=[P.x,P.y];G&&(P[2]=C);F&&(P[O]=E);R.push(P)}R.push(R[0]);return new m({rings:[R],spatialReference:u.spatialReference})};c.createCircle=function(u){return m.createEllipse({center:u.center,longAxis:u.r,shortAxis:u.r,numberOfPoints:u.numberOfPoints,view:u.view})};c.fromExtent=function(u){var w=u.clone().normalize();u=u.spatialReference;var A=!1,C=!1;w.map(function(E){E.hasZ&&(A=!0);E.hasM&&(C=!0)});w={rings:w.map(function(E){var G=[[E.xmin,E.ymin],[E.xmin,
E.ymax],[E.xmax,E.ymax],[E.xmax,E.ymin],[E.xmin,E.ymin]];if(A&&E.hasZ)for(var F=E.zmin+.5*(E.zmax-E.zmin),I=0;I<G.length;I++)G[I].push(F);if(C&&E.hasM)for(E=E.mmin+.5*(E.mmax-E.mmin),I=0;I<G.length;I++)G[I].push(E);return G}),spatialReference:u};A&&(w.hasZ=!0);C&&(w.hasM=!0);return new m(w)};c.prototype.normalizeCtorArgs=function(u,w){var A=null,C=null;if(u&&!Array.isArray(u)){A=u.rings?u.rings:null;w||(u.spatialReference?w=u.spatialReference:u.rings||(w=u));var E=u.hasZ;var G=u.hasM}else A=u;A=A||
[];w=w||l.WGS84;A.length&&A[0]&&null!=A[0][0]&&"number"===typeof A[0][0]&&(A=[A]);if(C=A[0]&&A[0][0])void 0===E&&void 0===G?(E=2<C.length,G=!1):void 0===E?E=!G&&3<C.length:void 0===G&&(G=!E&&3<C.length);return{rings:A,spatialReference:w,hasZ:E,hasM:G}};Object.defineProperty(c.prototype,"centroid",{get:function(){var u=h.polygonCentroid(this);if(!u||isNaN(u[0])||isNaN(u[1])||this.hasZ&&isNaN(u[2]))return null;var w=new e;w.x=u[0];w.y=u[1];w.spatialReference=this.spatialReference;this.hasZ&&(w.z=u[2]);
return w},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){var u=this.hasZ,w=this.hasM,A=this.spatialReference,C=this.rings,E=u?3:2;if(!C.length||!C[0].length)return null;var G=C[0][0],F=G[0];G=G[1];var I=C[0][0],M=I[0];I=I[1];for(var Y=void 0,R=void 0,S=void 0,O=void 0,L=[],P=0;P<C.length;P++){var X=C[P],Q=X[0],K=Q[0];Q=Q[1];var U=X[0],da=U[0];U=U[1];for(var fa=void 0,ia=void 0,la=void 0,ma=void 0,ta=0;ta<X.length;ta++){var ua=X[ta],Ca=ua[0],xa=ua[1];F=B(F,
Ca);G=B(G,xa);M=z(M,Ca);I=z(I,xa);K=B(K,Ca);Q=B(Q,xa);da=z(da,Ca);U=z(U,xa);u&&2<ua.length&&(Ca=ua[2],Y=B(Y,Ca),R=z(R,Ca),fa=B(fa,Ca),ia=z(ia,Ca));w&&ua.length>E&&(ma=ua[E],S=B(Y,ma),O=z(R,ma),la=B(fa,ma),ma=z(ia,ma))}L.push(new n({xmin:K,ymin:Q,zmin:fa,mmin:la,xmax:da,ymax:U,zmax:ia,mmax:ma,spatialReference:A}))}C=new n;C.xmin=F;C.ymin=G;C.xmax=M;C.ymax=I;C.spatialReference=A;u&&(C.zmin=Y,C.zmax=R);w&&(C.mmin=S,C.mmax=O);C.cache._partwise=1<L.length?L:null;return C},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"isSelfIntersecting",{get:function(){return q.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});c.prototype.writePaths=function(u,w,A,C){w.rings=g.clone(this.rings)};c.prototype.addRing=function(u){if(u){this.clearCache();var w=this.rings,A=w.length;if(Array.isArray(u[0]))w[A]=u.concat();else{for(var C=[],E=0,G=u.length;E<G;E++)C[E]=u[E].toArray();w[A]=C}return this}};c.prototype.clone=function(){var u=new m;u.spatialReference=this.spatialReference;
u.rings=g.clone(this.rings);u.hasZ=this.hasZ;u.hasM=this.hasM;return u};c.prototype.contains=function(u){if(!u)return!1;v.canProject(u,this.spatialReference)&&(u=v.project(u,this.spatialReference));return t.polygonContainsPoint(this,u)};c.prototype.isClockwise=function(u){var w=this;u=Array.isArray(u[0])?u:u.map(function(A){return w.hasZ?w.hasM?[A.x,A.y,A.z,A.m]:[A.x,A.y,A.z]:[A.x,A.y]});return r.isClockwise(u,this.hasM,this.hasZ)};c.prototype.getPoint=function(u,w){if(!this._validateInputs(u,w))return null;
var A=this.rings[u][w],C=this.hasZ,E=this.hasM;return C&&!E?new e(A[0],A[1],A[2],void 0,this.spatialReference):E&&!C?new e(A[0],A[1],void 0,A[2],this.spatialReference):C&&E?new e(A[0],A[1],A[2],A[3],this.spatialReference):new e(A[0],A[1],this.spatialReference)};c.prototype.insertPoint=function(u,w,A){if(!this._validateInputs(u,w,!0))return this;this.clearCache();x.updateSupportFromPoint(this,A);Array.isArray(A)||(A=A.toArray());this.rings[u].splice(w,0,A);return this};c.prototype.removePoint=function(u,
w){if(!this._validateInputs(u,w))return null;this.clearCache();return new e(this.rings[u].splice(w,1)[0],this.spatialReference)};c.prototype.removeRing=function(u){if(!this._validateInputs(u,null))return null;this.clearCache();u=this.rings.splice(u,1)[0];var w=this.spatialReference;return u.map(function(A){return new e(A,w)})};c.prototype.setPoint=function(u,w,A){if(!this._validateInputs(u,w))return this;this.clearCache();x.updateSupportFromPoint(this,A);Array.isArray(A)||(A=A.toArray());this.rings[u][w]=
A;return this};c.prototype._validateInputs=function(u,w,A){void 0===A&&(A=!1);return null==u||0>u||u>=this.rings.length||null!=w&&(u=this.rings[u],A&&(0>w||w>u.length)||!A&&(0>w||w>=u.length))?!1:!0};c.prototype.toJSON=function(u){return this.write(null,u)};f([p.property({dependsOn:["hasM","hasZ","rings"]})],c.prototype,"cache",void 0);f([p.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"centroid",null);f([p.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"extent",null);f([p.property({dependsOn:["cache"],
readOnly:!0})],c.prototype,"isSelfIntersecting",null);f([p.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],c.prototype,"rings",void 0);f([p.writer("rings")],c.prototype,"writePaths",null);return c=m=f([p.subclass("esri.geometry.Polygon")],c)}(p.declared(d));D.prototype.toJSON.isDefaultToJSON=!0;return D})},"esri/layers/vectorTiles/geometry/support/centroid":function(){define(["require","exports","../support/coordsUtils"],function(D,k,a){function f(n,d){if(!n||!n.length)return null;for(var e=
[],l=[],h=d?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],t=0,r=n.length;t<r;t++){var q=g(n[t],d,h);q&&l.push(q)}l.sort(function(v,x){var y=v[2]-x[2];0===y&&d&&(y=v[4]-x[4]);return y});l.length&&(t=6*l[0][2],e[0]=l[0][0]/t,e[1]=l[0][1]/t,d&&(t=6*l[0][4],e[2]=0!==t?l[0][3]/t:0),e[0]<h[0]||e[0]>h[1]||e[1]<h[2]||e[1]>h[3]||d&&(e[2]<h[4]||e[2]>h[5]))&&(e.length=0);if(!e.length)if(l=n[0]&&n[0].length?p(n[0],d):null)e[0]=l[0],e[1]=l[1],d&&2<l.length&&
(e[2]=l[2]);else return null;return e}function g(n,d,e){for(var l=0,h=0,t=0,r=0,q=0,v=0,x=n.length-1;v<x;v++){var y=n[v],B=y[0],z=y[1],b=y[2],c=n[v+1],m=c[0],u=c[1],w=c[2],A=B*u-m*z;r+=A;l+=(B+m)*A;h+=(z+u)*A;d&&2<y.length&&2<c.length&&(A=B*w-m*b,t+=(b+w)*A,q+=A);B<e[0]&&(e[0]=B);B>e[1]&&(e[1]=B);z<e[2]&&(e[2]=z);z>e[3]&&(e[3]=z);d&&(b<e[4]&&(e[4]=b),b>e[5]&&(e[5]=b))}0<r&&(r*=-1);0<q&&(q*=-1);if(!r)return null;n=[l,h,.5*r];d&&(n[3]=t,n[4]=.5*q);return n}function p(n,d){for(var e=d?[0,0,0]:[0,0],
l=d?[0,0,0]:[0,0],h=0,t=0,r=0,q=0,v=0,x=n.length;v<x-1;v++){var y=n[v],B=n[v+1];if(y&&B){e[0]=y[0];e[1]=y[1];l[0]=B[0];l[1]=B[1];d&&2<y.length&&2<B.length&&(e[2]=y[2],l[2]=B[2]);var z=a.getLength(e,l);z&&(h+=z,y=a.getMidpoint(y,B),t+=z*y[0],r+=z*y[1],d&&2<y.length&&(q+=z*y[2]))}}return 0<h?d?[t/h,r/h,q/h]:[t/h,r/h]:n.length?n[0]:null}Object.defineProperty(k,"__esModule",{value:!0});k.extentCentroid=function(n){return n?n.hasZ?[n.xmax-n.xmin/2,n.ymax-n.ymin/2,n.zmax-n.zmin/2]:[n.xmax-n.xmin/2,n.ymax-
n.ymin/2]:null};k.polygonCentroid=function(n){return n?f(n.rings,n.hasZ):null};k.ringsCentroid=f;k.lineCentroid=p})},"esri/layers/vectorTiles/geometry/support/coordsUtils":function(){define(["require","exports"],function(D,k){function a(g,p){var n=p[0]-g[0],d=p[1]-g[1];if(2<g.length&&2<p.length){var e=g[2]-p[2];return Math.sqrt(n*n+d*d+e*e)}return Math.sqrt(n*n+d*d)}function f(g,p,n){var d=g[0]+n*(p[0]-g[0]),e=g[1]+n*(p[1]-g[1]);return 2<g.length&&2<p.length?[d,e,g[2]+n*(p[2]-g[2])]:[d,e]}Object.defineProperty(k,
"__esModule",{value:!0});k.geometryToCoordinates=function(g){if(!g)return null;if(Array.isArray(g))return g;var p=g.hasZ,n=g.hasM;if("point"===g.type)return n&&p?[g.x,g.y,g.z,g.m]:p?[g.x,g.y,g.z]:n?[g.x,g.y,g.m]:[g.x,g.y];if("polygon"===g.type)return g.rings.slice(0);if("polyline"===g.type)return g.paths.slice(0);if("multipoint"===g.type)return g.points.slice(0);if("extent"===g.type){g=g.clone().normalize();if(!g)return null;var d=!1,e=!1;g.forEach(function(l){l.hasZ&&(d=!0);l.hasM&&(e=!0)});return g.map(function(l){var h=
[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(d&&l.hasZ)for(var t=.5*(l.zmax-l.zmin),r=0;r<h.length;r++)h[r].push(t);if(e&&l.hasM)for(l=.5*(l.mmax-l.mmin),r=0;r<h.length;r++)h[r].push(l);return h})}return null};k.getLength=a;k.getMidpoint=function(g,p){return f(g,p,.5)};k.getPathLength=function(g){for(var p=g.length,n=0,d=0;d<p-1;++d)n+=a(g[d],g[d+1]);return n};k.getPointOnPath=function(g,p){if(0>=p)return g[0];for(var n=g.length,d=0,e=0;e<n-1;++e){var l=a(g[e],
g[e+1]);if(p-d<l)return f(g[e],g[e+1],(p-d)/l);d+=l}return g[n-1]};k.isClockwise=function(g,p,n){for(var d=g.length,e=0,l=0,h=0,t=0;t<d;t++){var r=g[t],q=g[(t+1)%d],v=2;e+=r[0]*q[1]-q[0]*r[1];2<r.length&&2<q.length&&n&&(l+=r[0]*q[2]-q[0]*r[2],v=3);r.length>v&&q.length>v&&p&&(h+=r[0]*q[v]-q[0]*r[v])}return 0>=e&&0>=l&&0>=h}})},"esri/layers/vectorTiles/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h){function t(v){return function(x,y){return null==x?y:null==y?x:v(x,y)}}var r=t(Math.min),q=t(Math.max);D=function(v){function x(){for(var B=0;B<arguments.length;B++);B=v.call(this)||this;B.paths=[];B.type="polyline";return B}a(x,v);var y=x;x.prototype.normalizeCtorArgs=function(B,z){var b=null,c=null;if(B&&!Array.isArray(B)){b=B.paths?B.paths:null;z||(B.spatialReference?z=B.spatialReference:B.paths||(z=B));var m=B.hasZ;var u=B.hasM}else b=B;b=b||[];z=z||l.WGS84;b.length&&
b[0]&&null!=b[0][0]&&"number"===typeof b[0][0]&&(b=[b]);if(c=b[0]&&b[0][0])void 0===m&&void 0===u?(m=2<c.length,u=!1):void 0===m?m=!u&&3<c.length:void 0===u&&(u=!m&&3<c.length);return{paths:b,spatialReference:z,hasZ:m,hasM:u}};Object.defineProperty(x.prototype,"extent",{get:function(){var B=this.hasZ,z=this.hasM,b=this.spatialReference,c=this.paths,m=B?3:2;if(!c.length||!c[0].length)return null;var u=c[0][0],w=u[0];u=u[1];var A=c[0][0],C=A[0];A=A[1];for(var E=void 0,G=void 0,F=void 0,I=void 0,M=[],
Y=0;Y<c.length;Y++){var R=c[Y],S=R[0],O=S[0];S=S[1];var L=R[0],P=L[0];L=L[1];for(var X=void 0,Q=void 0,K=void 0,U=void 0,da=0;da<R.length;da++){var fa=R[da],ia=fa[0],la=fa[1];w=r(w,ia);u=r(u,la);C=q(C,ia);A=q(A,la);O=r(O,ia);S=r(S,la);P=q(P,ia);L=q(L,la);B&&2<fa.length&&(ia=fa[2],E=r(E,ia),G=q(G,ia),X=r(X,ia),Q=q(Q,ia));z&&fa.length>m&&(U=fa[m],F=r(E,U),I=q(G,U),K=r(X,U),U=q(Q,U))}M.push(new n({xmin:O,ymin:S,zmin:X,mmin:K,xmax:P,ymax:L,zmax:Q,mmax:U,spatialReference:b}))}c=new n;c.xmin=w;c.ymin=u;
c.xmax=C;c.ymax=A;c.spatialReference=b;B&&(c.zmin=E,c.zmax=G);z&&(c.mmin=F,c.mmax=I);c.cache._partwise=1<M.length?M:null;return c},enumerable:!0,configurable:!0});x.prototype.writePaths=function(B,z,b,c){z.paths=g.clone(this.paths)};x.prototype.addPath=function(B){if(B){this.clearCache();var z=this.paths,b=z.length;if(Array.isArray(B[0]))z[b]=B.concat();else{for(var c=[],m=0,u=B.length;m<u;m++)c[m]=B[m].toArray();z[b]=c}return this}};x.prototype.clone=function(){var B=new y;B.spatialReference=this.spatialReference;
B.paths=g.clone(this.paths);B.hasZ=this.hasZ;B.hasM=this.hasM;return B};x.prototype.getPoint=function(B,z){if(!this._validateInputs(B,z))return null;var b=this.paths[B][z],c=this.hasZ,m=this.hasM;return c&&!m?new e(b[0],b[1],b[2],void 0,this.spatialReference):m&&!c?new e(b[0],b[1],void 0,b[2],this.spatialReference):c&&m?new e(b[0],b[1],b[2],b[3],this.spatialReference):new e(b[0],b[1],this.spatialReference)};x.prototype.insertPoint=function(B,z,b){if(!this._validateInputs(B,z,!0))return this;this.clearCache();
h.updateSupportFromPoint(this,b);Array.isArray(b)||(b=b.toArray());this.paths[B].splice(z,0,b);return this};x.prototype.removePath=function(B){if(!this._validateInputs(B,null))return null;this.clearCache();B=this.paths.splice(B,1)[0];var z=this.spatialReference;return B.map(function(b){return new e(b,z)})};x.prototype.removePoint=function(B,z){if(!this._validateInputs(B,z))return null;this.clearCache();return new e(this.paths[B].splice(z,1)[0],this.spatialReference)};x.prototype.setPoint=function(B,
z,b){if(!this._validateInputs(B,z))return this;this.clearCache();h.updateSupportFromPoint(this,b);Array.isArray(b)||(b=b.toArray());this.paths[B][z]=b;return this};x.prototype._validateInputs=function(B,z,b){void 0===b&&(b=!1);return null==B||0>B||B>=this.paths.length||null!=z&&(B=this.paths[B],b&&(0>z||z>B.length)||!b&&(0>z||z>=B.length))?!1:!0};x.prototype.toJSON=function(B){return this.write(null,B)};f([p.property({dependsOn:["hasM","hasZ","paths"]})],x.prototype,"cache",void 0);f([p.property({dependsOn:["cache"],
readOnly:!0})],x.prototype,"extent",null);f([p.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],x.prototype,"paths",void 0);f([p.writer("paths")],x.prototype,"writePaths",null);return x=y=f([p.subclass("esri.geometry.Polyline")],x)}(p.declared(d));D.prototype.toJSON.isDefaultToJSON=!0;return D})},"esri/layers/vectorTiles/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),
function(D,k,a,f,g,p){return function(n){function d(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];l=n.apply(this,l)||this;l.x=0;l.y=0;l.z=void 0;return l}a(d,n);var e=d;d.prototype.normalizeCtorArgs=function(l,h){return"number"===typeof l?{x:l,y:h}:Array.isArray(l)?{x:l[0],y:l[1]}:l};d.prototype.clone=function(){return new e({x:this.x,y:this.y,z:this.z})};d.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};f([p.property({type:Number})],d.prototype,
"x",void 0);f([p.property({type:Number})],d.prototype,"y",void 0);f([p.property({type:Number})],d.prototype,"z",void 0);return d=e=f([p.subclass("esri.geometry.ScreenPoint")],d)}(p.declared(g))})},"esri/layers/vectorTiles/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(D,k,a,f,g,p,n){function d(q){return void 0!==q.points}function e(q){return void 0!==q.x&&void 0!==q.y}function l(q){return void 0!==q.paths}
function h(q){return void 0!==q.rings}function t(q){if(q){if(e(q))return g.fromJSON(q);if(l(q))return n.fromJSON(q);if(h(q))return p.fromJSON(q);if(d(q))return f.fromJSON(q);if(void 0!==q.xmin&&void 0!==q.ymin&&void 0!==q.xmax&&void 0!==q.ymax)return a.fromJSON(q)}return null}Object.defineProperty(k,"__esModule",{value:!0});k.fromJson=function(q){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(v){}return t(q)};k.isMultipoint=d;k.isPoint=e;k.isPolyline=l;k.isPolygon=h;k.fromJSON=
t;k.getJsonType=function(q){return q instanceof g?"esriGeometryPoint":q instanceof n?"esriGeometryPolyline":q instanceof p?"esriGeometryPolygon":q instanceof a?"esriGeometryEnvelope":q instanceof f?"esriGeometryMultipoint":null};var r={esriGeometryPoint:g,esriGeometryPolyline:n,esriGeometryPolygon:p,esriGeometryEnvelope:a,esriGeometryMultipoint:f};k.getGeometryType=function(q){return q&&r[q]||null}})},"esri/layers/vectorTiles/geometry/support/aaBoundingBox":function(){define(["require","exports",
"../Extent","./aaBoundingRect"],function(D,k,a,f){function g(h){void 0===h&&(h=k.ZERO);return[h[0],h[1],h[2],h[3],h[4],h[5]]}function p(h){return h[0]>=h[3]?0:h[3]-h[0]}function n(h){return h[1]>=h[4]?0:h[4]-h[1]}function d(h){return h[2]>=h[5]?0:h[5]-h[2]}function e(h,t){h[0]=t[0];h[1]=t[1];h[2]=t[2];h[3]=t[3];h[4]=t[4];h[5]=t[5];return h}function l(h){return 6===h.length}Object.defineProperty(k,"__esModule",{value:!0});k.create=g;k.fromValues=function(h,t,r,q,v,x){return[h,t,r,q,v,x]};k.fromExtent=
function(h,t){void 0===t&&(t=g());t[0]=h.xmin;t[1]=h.ymin;t[2]=h.zmin;t[3]=h.xmax;t[4]=h.ymax;t[5]=h.zmax;return t};k.toExtent=function(h,t){return isFinite(h[2])||isFinite(h[5])?new a({xmin:h[0],xmax:h[3],ymin:h[1],ymax:h[4],zmin:h[2],zmax:h[5],spatialReference:t}):new a({xmin:h[0],xmax:h[3],ymin:h[1],ymax:h[4],spatialReference:t})};k.fromMinMax=function(h,t,r){void 0===r&&(r=g());r[0]=h[0];r[1]=h[1];r[2]=h[2];r[3]=t[0];r[4]=t[1];r[5]=t[2];return r};k.expandPointInPlace=function(h,t){t[0]<h[0]&&
(h[0]=t[0]);t[0]>h[3]&&(h[3]=t[0]);t[1]<h[1]&&(h[1]=t[1]);t[1]>h[4]&&(h[4]=t[1]);t[2]<h[2]&&(h[2]=t[2]);t[2]>h[5]&&(h[5]=t[2])};k.expand=function(h,t,r){void 0===r&&(r=h);l(t)?(r[0]=Math.min(h[0],t[0]),r[1]=Math.min(h[1],t[1]),r[2]=Math.min(h[2],t[2]),r[3]=Math.max(h[3],t[3]),r[4]=Math.max(h[4],t[4]),r[5]=Math.max(h[5],t[5])):f.is(t)?(r[0]=Math.min(h[0],t[0]),r[1]=Math.min(h[1],t[1]),r[3]=Math.max(h[3],t[2]),r[4]=Math.max(h[4],t[3])):2===t.length?(r[0]=Math.min(h[0],t[0]),r[1]=Math.min(h[1],t[1]),
r[3]=Math.max(h[3],t[0]),r[4]=Math.max(h[4],t[1])):3===t.length&&(r[0]=Math.min(h[0],t[0]),r[1]=Math.min(h[1],t[1]),r[2]=Math.min(h[2],t[2]),r[3]=Math.max(h[3],t[0]),r[4]=Math.max(h[4],t[1]),r[5]=Math.max(h[5],t[2]));return r};k.expandWithBuffer=function(h,t,r,q,v){void 0===v&&(v=h);var x=h[0],y=h[1],B=h[2],z=h[3],b=h[4];h=h[5];for(var c=0;c<q;c++)x=Math.min(x,t[r+3*c]),y=Math.min(y,t[r+3*c+1]),B=Math.min(B,t[r+3*c+2]),z=Math.max(z,t[r+3*c]),b=Math.max(b,t[r+3*c+1]),h=Math.max(h,t[r+3*c+2]);v[0]=
x;v[1]=y;v[2]=B;v[3]=z;v[4]=b;v[5]=h;return v};k.expandWithNestedArray=function(h,t,r,q){void 0===q&&(q=h);var v=t.length,x=h[0],y=h[1],B=h[2],z=h[3],b=h[4];h=h[5];if(r)for(r=0;r<v;r++){var c=t[r];x=Math.min(x,c[0]);y=Math.min(y,c[1]);B=Math.min(B,c[2]);z=Math.max(z,c[0]);b=Math.max(b,c[1]);h=Math.max(h,c[2])}else for(r=0;r<v;r++)c=t[r],x=Math.min(x,c[0]),y=Math.min(y,c[1]),z=Math.max(z,c[0]),b=Math.max(b,c[1]);q[0]=x;q[1]=y;q[2]=B;q[3]=z;q[4]=b;q[5]=h;return q};k.allFinite=function(h){for(var t=
0;6>t;t++)if(!isFinite(h[t]))return!1;return!0};k.width=p;k.depth=n;k.height=d;k.diameter=function(h){var t=p(h),r=d(h);h=n(h);return Math.sqrt(t*t+r*r+h*h)};k.center=function(h,t){void 0===t&&(t=[0,0,0]);t[0]=h[0]+p(h)/2;t[1]=h[1]+n(h)/2;t[2]=h[2]+d(h)/2;return t};k.size=function(h,t){void 0===t&&(t=[0,0,0]);t[0]=p(h);t[1]=n(h);t[2]=d(h);return t};k.maximumDimension=function(h){return Math.max(p(h),d(h),n(h))};k.containsPoint=function(h,t){return t[0]>=h[0]&&t[1]>=h[1]&&t[2]>=h[2]&&t[0]<=h[3]&&t[1]<=
h[4]&&t[2]<=h[5]};k.containsPointWithMargin=function(h,t,r){return t[0]>=h[0]-r&&t[1]>=h[1]-r&&t[2]>=h[2]-r&&t[0]<=h[3]+r&&t[1]<=h[4]+r&&t[2]<=h[5]+r};k.contains=function(h,t){return t[0]>=h[0]&&t[1]>=h[1]&&t[2]>=h[2]&&t[3]<=h[3]&&t[4]<=h[4]&&t[5]<=h[5]};k.intersects=function(h,t){return Math.max(t[0],h[0])<=Math.min(t[3],h[3])&&Math.max(t[1],h[1])<=Math.min(t[4],h[4])&&Math.max(t[2],h[2])<=Math.min(t[5],h[5])};k.offset=function(h,t,r,q,v){void 0===v&&(v=h);v[0]=h[0]+t;v[1]=h[1]+r;v[2]=h[2]+q;v[3]=
h[3]+t;v[4]=h[4]+r;v[5]=h[5]+q;return v};k.setMin=function(h,t,r){void 0===r&&(r=h);r[0]=t[0];r[1]=t[1];r[2]=t[2];r!==h&&(r[3]=h[3],r[4]=h[4],r[5]=h[5]);return r};k.setMax=function(h,t,r){void 0===r&&(r=h);r[3]=t[0];r[4]=t[1];r[5]=t[2];r!==h&&(r[0]=h[0],r[1]=h[1],r[2]=h[2]);return h};k.set=e;k.empty=function(h){return h?e(h,k.NEGATIVE_INFINITY):g(k.NEGATIVE_INFINITY)};k.toRect=function(h,t){t||(t=f.create());t[0]=h[0];t[1]=h[1];t[2]=h[3];t[3]=h[4];return t};k.fromRect=function(h,t){h[0]=t[0];h[1]=
t[1];h[3]=t[2];h[4]=t[3];return h};k.is=l;k.isPoint=function(h){return 0===p(h)&&0===n(h)&&0===d(h)};k.equals=function(h,t,r){if(null==h||null==t)return h===t;if(!l(h)||!l(t))return!1;if(r)for(var q=0;q<h.length;q++){if(!r(h[q],t[q]))return!1}else for(q=0;q<h.length;q++)if(h[q]!==t[q])return!1;return!0};k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];k.ZERO=[0,0,0,0,0,0]})},"esri/layers/vectorTiles/geometry/support/aaBoundingRect":function(){define(["require",
"exports","../../geometry"],function(D,k,a){function f(l){void 0===l&&(l=k.ZERO);return[l[0],l[1],l[2],l[3]]}function g(l){return l[0]>=l[2]?0:l[2]-l[0]}function p(l){return l[1]>=l[3]?0:l[3]-l[1]}function n(l,h){l[0]=h[0];l[1]=h[1];l[2]=h[2];l[3]=h[3];return l}function d(l){return 4===l.length}function e(l,h,t){return l<h?h:l>t?t:l}Object.defineProperty(k,"__esModule",{value:!0});k.create=f;k.clone=function(l){return[l[0],l[1],l[2],l[3]]};k.fromValues=function(l,h,t,r,q){void 0===q&&(q=f());q[0]=
l;q[1]=h;q[2]=t;q[3]=r;return q};k.fromExtent=function(l,h){void 0===h&&(h=f());h[0]=l.xmin;h[1]=l.ymin;h[2]=l.xmax;h[3]=l.ymax;return h};k.toExtent=function(l,h){return new a.Extent({xmin:l[0],ymin:l[1],xmax:l[2],ymax:l[3],spatialReference:h})};k.expandPointInPlace=function(l,h){h[0]<l[0]&&(l[0]=h[0]);h[0]>l[2]&&(l[2]=h[0]);h[1]<l[1]&&(l[1]=h[1]);h[1]>l[3]&&(l[3]=h[1])};k.expand=function(l,h,t){void 0===t&&(t=l);if("length"in h)if(d(h))t[0]=Math.min(l[0],h[0]),t[1]=Math.min(l[1],h[1]),t[2]=Math.max(l[2],
h[2]),t[3]=Math.max(l[3],h[3]);else{if(2===h.length||3===h.length)t[0]=Math.min(l[0],h[0]),t[1]=Math.min(l[1],h[1]),t[2]=Math.max(l[2],h[0]),t[3]=Math.max(l[3],h[1])}else switch(h.type){case "extent":t[0]=Math.min(l[0],h.xmin);t[1]=Math.min(l[1],h.ymin);t[2]=Math.max(l[2],h.xmax);t[3]=Math.max(l[3],h.ymax);break;case "point":t[0]=Math.min(l[0],h.x),t[1]=Math.min(l[1],h.y),t[2]=Math.max(l[2],h.x),t[3]=Math.max(l[3],h.y)}return t};k.expandWithNestedArray=function(l,h,t){void 0===t&&(t=l);var r=h.length,
q=l[0],v=l[1],x=l[2];l=l[3];for(var y=0;y<r;y++){var B=h[y];q=Math.min(q,B[0]);v=Math.min(v,B[1]);x=Math.max(x,B[0]);l=Math.max(l,B[1])}t[0]=q;t[1]=v;t[2]=x;t[3]=l;return t};k.allFinite=function(l){for(var h=0;4>h;h++)if(!isFinite(l[h]))return!1;return!0};k.width=g;k.height=p;k.diameter=function(l){var h=g(l);l=p(l);return Math.sqrt(h*h+l*l)};k.area=function(l){return g(l)*p(l)};k.center=function(l,h){void 0===h&&(h=[0,0]);h[0]=l[0]+g(l)/2;h[1]=l[1]+p(l)/2;return h};k.containsPoint=function(l,h){return h[0]>=
l[0]&&h[1]>=l[1]&&h[0]<=l[2]&&h[1]<=l[3]};k.containsPointWithMargin=function(l,h,t){return h[0]>=l[0]-t&&h[1]>=l[1]-t&&h[0]<=l[2]+t&&h[1]<=l[3]+t};k.intersects=function(l,h){return Math.max(h[0],l[0])<=Math.min(h[2],l[2])&&Math.max(h[1],l[1])<=Math.min(h[3],l[3])};k.contains=function(l,h){return h[0]>=l[0]&&h[2]<=l[2]&&h[1]>=l[1]&&h[3]<=l[3]};k.intersection=function(l,h,t){void 0===t&&(t=l);var r=h[0],q=h[1],v=h[2];h=h[3];t[0]=e(l[0],r,v);t[1]=e(l[1],q,h);t[2]=e(l[2],r,v);t[3]=e(l[3],q,h);return t};
k.offset=function(l,h,t,r){void 0===r&&(r=l);r[0]=l[0]+h;r[1]=l[1]+t;r[2]=l[2]+h;r[3]=l[3]+t;return r};k.pad=function(l,h,t){void 0===t&&(t=l);t[0]=l[0]-h;t[1]=l[1]-h;t[2]=l[2]+h;t[3]=l[3]+h;return t};k.setMin=function(l,h,t){void 0===t&&(t=l);t[0]=h[0];t[1]=h[1];t!==l&&(t[2]=l[2],t[3]=l[3]);return t};k.setMax=function(l,h,t){void 0===t&&(t=l);t[2]=h[0];t[3]=h[1];t!==l&&(t[0]=l[0],t[1]=l[1]);return l};k.set=n;k.empty=function(l){return l?n(l,k.NEGATIVE_INFINITY):f(k.NEGATIVE_INFINITY)};k.is=d;k.isPoint=
function(l){return(0===g(l)||!isFinite(l[0]))&&(0===p(l)||!isFinite(l[1]))};k.equals=function(l,h,t){if(null==l||null==h)return l===h;if(!d(l)||!d(h))return!1;if(t)for(var r=0;r<l.length;r++){if(!t(l[r],h[r]))return!1}else for(r=0;r<l.length;r++)if(l[r]!==h[r])return!1;return!0};k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];k.ZERO=[0,0,0,0]})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ./dehydratedFeatureComparison".split(" "),
function(D,k,a,f,g,p,n){function d(y){switch(y){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function e(y,B,z,b){return{uid:a.generateUID(),objectId:b&&y.attributes?y.attributes[b]:null,attributes:y.attributes,geometry:l(y.geometry,B,z),visible:!0}}function l(y,B,z){if(!y)return null;switch(B){case "point":return{x:y.x,y:y.y,
z:y.z,type:B,spatialReference:z};case "polyline":var b=y;return{paths:b.paths,hasZ:b.hasZ,hasM:b.hasM,type:B,spatialReference:z};case "polygon":return{rings:y.rings,hasZ:b.hasZ,hasM:b.hasM,type:B,spatialReference:z};case "multipoint":return{points:y.points,hasZ:b.hasZ,hasM:b.hasM,type:B,spatialReference:z};case "extent":return{xmin:y.xmin,ymin:y.ymin,zmin:y.zmin,mmin:y.mmin,xmax:y.xmax,ymax:y.ymax,zmax:y.zmax,mmax:y.mmax,hasZ:y.hasZ,hasM:y.hasM,type:B,spatialReference:z}}}function h(y){return"point"===
y.type?null!=y.z:"extent"===y.type?null!=y.zmin:y.hasZ}function t(y){return"declaredClass"in y}function r(y,B){g.empty(B);"mesh"===y.type&&(y=y.extent);switch(y.type){case "point":B[0]=B[3]=y.x;B[1]=B[4]=y.y;h(y)&&(B[2]=B[5]=y.z);break;case "polyline":for(var z=0;z<y.paths.length;z++)g.expandWithNestedArray(B,y.paths[z],h(y));break;case "polygon":for(z=0;z<y.rings.length;z++)g.expandWithNestedArray(B,y.rings[z],h(y));break;case "multipoint":g.expandWithNestedArray(B,y.points,h(y));break;case "extent":B[0]=
y.xmin,B[1]=y.ymin,B[3]=y.xmax,B[4]=y.ymax,null!=y.zmin&&(B[2]=y.zmin),null!=y.zmax&&(B[5]=y.zmax)}}function q(y,B){p.empty(B);"mesh"===y.type&&(y=y.extent);switch(y.type){case "point":B[0]=B[2]=y.x;B[1]=B[3]=y.y;break;case "polyline":for(var z=0;z<y.paths.length;z++)p.expandWithNestedArray(B,y.paths[z]);break;case "polygon":for(z=0;z<y.rings.length;z++)p.expandWithNestedArray(B,y.rings[z]);break;case "multipoint":p.expandWithNestedArray(B,y.points);break;case "extent":B[0]=y.xmin,B[1]=y.ymin,B[2]=
y.xmax,B[3]=y.ymax}}Object.defineProperty(k,"__esModule",{value:!0});k.equals=n.equals;k.isPoint=function(y){return"point"===y.type};k.mapJSONGeometryType=d;k.fromFeatureSetJSON=function(y){var B=d(y.geometryType),z=f.fromJSON(y.spatialReference);return y.features.map(function(b){return e(b,B,z,y.objectIdFieldName)})};k.fromJSON=e;k.fromJSONGeometry=l;k.makeDehydratedPoint=function(y,B,z,b){return{x:y,y:B,z:z,spatialReference:b,type:"point"}};k.hasZ=h;k.isHydratedGeometry=function(y){return"declaredClass"in
y};k.isHydratedGraphic=t;k.hydrateGraphic=function(y,B){if(!y||t(y))return y;var z=new a({layer:B,sourceLayer:B});z.read(y);return z};k.computeAABB=r;k.expandAABB=function(y,B){r(y,v);g.expand(B,v)};k.computeAABR=q;k.expandAABR=function(y,B){q(y,x);p.expand(B,x)};var v=g.create(),x=p.create()})},"esri/layers/vectorTiles/Graphic":function(){define(["require","exports","esri/graphic","./core/tsSupport/declareExtendsHelper","./core/JSONSupport"],function(D,k,a,f,g){D=function(n){function d(e){return n.call(this)||
this}f(d,n);d.fromJSON=function(e){return new a(e)};return d}(g);var p=0;(function(n){n.generateUID=function(){return p++}})(D||(D={}));return D})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(D,k,a,f,g,p,n,d,e){function l(){}D=D(null,{declaredClass:"esri.Graphic",constructor:function(h,t,r,q){this._construct();h&&!h.declaredClass?(this.geometry=h.geometry?d.fromJson(h.geometry):
null,this.symbol=h.symbol?e.fromJson(h.symbol):null,this.attributes=h.attributes||null,this.infoTemplate=h.infoTemplate?new n(h.infoTemplate):null):(this.geometry=h,this.symbol=t,this.attributes=r,this.infoTemplate=q)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,
_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(h){this._parentGraphic=h},setSize:function(h){this.size=h;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(h){this._aggregationSourceLayer=h;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(h){this._aggregationInfo=h;return this},
getChildGraphics:function(){var h=this.getAggregationSourceLayer();return h?h.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var h=[];this._shape&&h.push(this._shape);this._bgShape&&h.push(this._bgShape);return h},getNode:function(){var h=this._shape&&this._shape.getNode();return h&&h.nodeType?h:null},getNodes:function(){var h=this.getShapes(),t,r,q=h.length,v=[];for(r=0;r<q;r++)(t=h[r]&&h[r].getNode())&&t.nodeType&&v.push(t);return v},getLayer:function(){return this._layer},
getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var h=new this.constructor(this.toJson());h.visible=this.visible;h._layer=this._layer;h._sourceLayer=this._sourceLayer;h._aggregationSourceLayer=this._aggregationSourceLayer;h._aggregationInfo=this._aggregationInfo;h._resolution=this._resolution;return h},draw:function(){var h=this._graphicsLayer;h&&h._draw(this,!0);return this},setGeometry:function(h){this.geometry=h;this._geomVersion++;var t=this._graphicsLayer;t&&
(t._updateExtent(this),this.draw(),h&&"polyline"===h.type&&t._updateSVGMarkers());return this},setResolution:function(h){this._resolution=h;return this},getResolution:function(){return this._resolution},setSymbol:function(h,t){var r=this._graphicsLayer,q=this._shape;this.symbol=h;r&&(t&&q&&r._removeShape(this),this.draw());return this},setAttributes:function(h){this.attributes=h;this.clearCache();return this},setInfoTemplate:function(h){this.infoTemplate=h;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},
_getEffInfoTemplate:function(){var h=this.getLayer();return this.infoTemplate||h&&h.infoTemplate},getTitle:function(){var h=this.getInfoTemplate(),t=h&&h.title;if(k.isFunction(t))t=t.call(h,this);else if(k.isString(t)){var r=(h=this.getLayer())&&h._getDateOpts;t=p.substitute(this.attributes,t,{first:!0,dateFormat:r&&r.call(h)})}return t},getContent:function(){var h=this.getInfoTemplate(),t=h&&h.content;if(k.isFunction(t))t=t.call(h,this);else if(k.isString(t)){var r=(h=this.getLayer())&&h._getDateOpts;
t=p.substitute(this.attributes,t,{dateFormat:r&&r.call(h)})}return t},attr:function(h,t){null==t||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[h]=t,this._setDataAttr(h,t));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var h;if(this.getShapes().length){var t=this.getNodes();var r=t.length;for(h=0;h<
r;h++)g.show(t[h])}else this.draw();(t=this._graphicsLayer)&&t._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var h=this._graphicsLayer,t,r;if(h){if("canvas-2d"===h.surfaceType)h._removeShape(this);else{var q=this.getNodes();if(r=q.length)for(t=0;t<r;t++)g.hide(q[t])}h._graphicVisibilityChanged(this)}return this},toJson:function(){var h={};this.geometry&&(h.geometry=this.geometry.toJson());this.attributes&&(h.attributes=k.mixin({},this.attributes));
this.symbol&&(h.symbol=this.symbol.toJson());this.infoTemplate&&(h.infoTemplate=this.infoTemplate.toJson());return h},_setDataAttr:function(h,t){var r=this.getNodes(),q,v=r.length;for(q=0;q<v;q++)this._setDOMDataAttr(r[q],h,t)},_setDOMDataAttr:function(h,t,r){null==r?h.removeAttribute(t):h.setAttribute(t,r)},_applyDataAttrs:function(){var h=this._dataAttrs;if(h){var t=this.getNodes(),r,q=t.length;for(r=0;r<q;r++)for(var v in h)this._setDOMDataAttr(t[r],v,h[v])}},_getViewInfo:function(h){return(h=
(h=h||this.getLayer())&&h.getMap())&&h.getViewInfo()},evaluateExpression:function(h,t){return this._getDataValue(h._attributeDef,h._attributeCache,null,null,h,t)},_getDataValue:function(h,t,r,q,v,x){var y=t.id,B=this.attributes,z=h.field,b=t.isNumeric,c=null;if(y){var m=this._computedAttributes,u=this._computedVersion,w=this._computedGeomVersion;q=this._getViewInfo(q);var A=!(!v||!v.async),C=x&&x.skipCache||A,E=!x||!1!==x.strictReturnType,G=t.dependsOnView||t.isJSFunc,F=t.dependsOnGeometry;m||(m=
this._computedAttributes={});G&&!u&&(u=this._computedVersion={});F&&!w&&(w=this._computedGeomVersion={});var I=G&&u[y]!==q.version||F&&w[y]!==this._geomVersion;c=m[y];if(void 0===c||I||C)c=null,t.hasExpr?c=v?v.evaluate(x&&x.context):r.executeFunction(t.compiledFunc,r.createExecContext(this,q)):t.isJSFunc?c=z(this,h):B&&(c=B[z],b&&this._isValidNumber(c)&&(t=h.normalizationType||"field",r=c,c=null,v=h.normalizationTotal,h=B[h.normalizationField],"log"===t&&0!==r?c=Math.log(r)*Math.LOG10E:"percent-of-total"===
t&&this._isValidNumber(v)&&0!==v?c=r/v*100:"field"===t&&this._isValidNumber(h)&&0!==h&&(c=r/h))),E&&(A?b&&(this._construct(),c=c.then(this._sanitizeNumericValue)):c=this._sanitizeValue(c,b)),C||(m[y]=c,G&&(u[y]=q.version),F&&(w[y]=this._geomVersion))}else B&&(c=this._sanitizeValue(B[z],b));return c},_sanitizeValue:function(h,t){t&&!this._isValidNumber(h)&&(h=null);return h},_sanitizeNumericValue:function(h){return this._sanitizeValue(h,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=
k.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(h){return"number"===typeof h&&!isNaN(h)&&Infinity!==h&&-Infinity!==h},clearCache:function(h){if(null!=h){var t=this._computedAttributes,r=this._computedVersion,q=this._computedGeomVersion;t&&(t[h]=void 0);r&&(r[h]=void 0);q&&(q[h]=void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});D.prototype.getShape=D.prototype.getDojoShape;l.prototype=D.prototype;D.simpleConstructor=
l;return f.Graphic=D})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(D,k,a,f,g){var p={show:function(n){if(n=p.getNode(n))n.style.display="block"},getNode:function(n){return n&&n.domNode||n},hide:function(n){if(n=p.getNode(n))n.style.display="none"},toggle:function(n){if(n=p.getNode(n))n.style.display="none"===n.style.display?"block":"none"},documentBox:8>=g("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:
{w:window.innerWidth,h:window.innerHeight},setScrollable:function(n){if(n=this.getNode(n)){var d=0,e=0,l=0,h=0,t=0,r=0;return[k.connect(n,"ontouchstart",function(q){d=q.touches[0].screenX;e=q.touches[0].screenY;l=n.scrollWidth;h=n.scrollHeight;t=n.clientWidth;r=n.clientHeight}),k.connect(n,"ontouchmove",function(q){q.preventDefault();var v=n.firstChild;v instanceof Text&&(v=n.childNodes[1]);var x=v._currentX||0,y=v._currentY||0;x+=q.touches[0].screenX-d;0<x?x=0:0>x&&Math.abs(x)+t>l&&(x=-1*(l-t));
v._currentX=x;y+=q.touches[0].screenY-e;0<y?y=0:0>y&&Math.abs(y)+r>h&&(y=-1*(h-r));v._currentY=y;f.set(v,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+x+"px, "+y+"px)"});d=q.touches[0].screenX;e=q.touches[0].screenY})]}}};a.mixin(D,p);return p})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,k,a,f,g){D=D(null,{declaredClass:"esri.InfoTemplate",constructor:function(p,n){p&&k.isObject(p)&&
!k.isFunction(p)?k.mixin(this,p):(this.title=p||"${*}",this.content=n||"${*}")},setTitle:function(p){this.title=p;return this},setContent:function(p){this.content=p;return this},toJson:function(){return g.fixJson({title:this.title,content:this.content})}});return f.InfoTemplate=D})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h){var t={createDefaultSymbol:function(r){switch(r){case "esriGeometryPoint":case "esriGeometryMultipoint":var q=t.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":q=t.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":q=t.createDefaultFillSymbol()}return q},createDefaultMarkerSymbol:function(){return new g},createDefaultLineSymbol:function(){return new n},createDefaultFillSymbol:function(){return new e},
getFirstSupportedSymbol:function(r){var q;k.some(r,function(v){v&&-1<t.supportedSymbolTypes.indexOf(v.type)&&(q=v);return!!q});return q},isPointSymbol:function(r){return r?-1<t.supportedPointSymbolTypes.indexOf(r.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(r,q){var v=null;switch(r.type){case "esriSMS":v=new g(r);break;case "esriPMS":v=new p(r);break;case "esriTS":v=new h(r);
break;case "esriSLS":v=void 0!==r.cap?new d(r):new n(r);break;case "esriCLS":v=new d(r);break;case "esriSFS":v=new e(r);break;case "esriPFS":v=new l(r);break;default:v=(v=q&&q.geometryType)?t.createDefaultSymbol(v):null}return v},getShapeDescriptors:function(r){return r&&r.getShapeDescriptors?r.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};D.mixin(D.getObject("symbol",!0,f),t);return t})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(D,k,a,f,g,p,n,d,e){var l={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},h={style:l.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};D=D(d,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",
path:"esriSMSPath"},constructor:function(t,r,q,v){t?k.isString(t)?(this.style=t,r&&(this.size=r),q&&(this.outline=q),v&&(this.color=v)):(this.style=n.valueOf(this._styles,this.style),t.outline&&(this.outline=new e(t.outline))):(k.mixin(this,h),this.size=g.pt2px(this.size),this.outline=new e(this.outline),this.color=new a(this.color));this.style||(this.style=l.STYLE_CIRCLE)},setStyle:function(t){this.style=t;return this},setPath:function(t){this.path=t;this.setStyle(l.STYLE_PATH);return this},setOutline:function(t){this.outline=
t;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(t,r,q){this._targetWidth=t;this._targetHeight=r;this._spikeSize=q},getShapeDescriptors:function(){var t,r=this.style,q=(this.size||g.pt2px(h.size))/2,v=0-q,x=0+q,y=0-q,B=0+q;switch(r){case l.STYLE_CIRCLE:var z={type:"circle",cx:0,cy:0,r:q};var b=this.getFill();if(t=this.getStroke())t.style=t.style||"Solid";break;case l.STYLE_CROSS:z={type:"path",path:"M "+v+",0 L "+
x+",0 M 0,"+y+" L 0,"+B+" E"};b=null;t=this.getStroke();break;case l.STYLE_DIAMOND:z={type:"path",path:"M "+v+",0 L 0,"+y+" L "+x+",0 L 0,"+B+" L "+v+",0 Z"};b=this.getFill();t=this.getStroke();break;case l.STYLE_SQUARE:z={type:"path",path:"M "+v+","+B+" L "+v+","+y+" L "+x+","+y+" L "+x+","+B+" L "+v+","+B+" Z"};b=this.getFill();t=this.getStroke();break;case l.STYLE_TRIANGLE:z={type:"path",path:"M "+v+","+B+" L 0,"+y+" L "+x+","+B+" L "+v+","+B+" Z"};b=this.getFill();t=this.getStroke();break;case l.STYLE_X:z=
{type:"path",path:"M "+v+","+B+" L "+x+","+y+" M "+v+","+y+" L "+x+","+B+" E"};b=null;t=this.getStroke();break;case l.STYLE_PATH:z={type:"path",path:this.path||""},b=this.getFill(),t=this.getStroke()}return{defaultShape:z,fill:b,stroke:t}},toJson:function(){var t=this.style,r=this.outline,q=k.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[t]||"esriSMSCircle"});r&&(q.outline=r.toJson());"x"===t||"cross"===t?delete q.color:"target"===t&&(q.style="esriSMSSquare",delete q.color,
0<this._targetHeight&&0<this._targetWidth&&(q.size=g.px2pt(Math.max(this._targetHeight,this._targetWidth))));q.path=this.path;return n.fixJson(q)}});k.mixin(D,l);D.defaultProps=h;k.setObject("symbol.SimpleMarkerSymbol",D,p);p.symbol.defaultSimpleMarkerSymbol=h;return D})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(D,k,a,f,g,p){D=D(p,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,
size:12,constructor:function(n){n&&k.isObject(n)&&(this.size="auto"===this.size?this.size:f.pt2px(this.size),this.xoffset=f.pt2px(this.xoffset),this.yoffset=f.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(n){this.angle=n;return this},setSize:function(n){this.size=n;return this},setOffset:function(n,d){this.xoffset=n;this.yoffset=d;return this},toJson:function(){var n=f.px2pt(this.size);n=isNaN(n)?void 0:n;var d=f.px2pt(this.xoffset);d=isNaN(d)?void 0:d;var e=f.px2pt(this.yoffset);
e=isNaN(e)?void 0:e;return k.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:n,angle:this.angle&&-1*this.angle,xoffset:d,yoffset:e})}});k.setObject("symbol.MarkerSymbol",D,g);return D})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(D,k,a,f,g,p){D=D(null,{declaredClass:"esri.symbol.Symbol",color:new p([0,0,0,1]),type:null,constructor:function(n){n&&k.isObject(n)&&(k.mixin(this,n),this.color&&
g.isDefined(this.color[0])&&(this.color=p.toDojoColor(this.color)),(n=this.type)&&0===n.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[n]))},setColor:function(n){this.color=n;return this},toJson:function(){return{color:p.toJsonColor(this.color)}}});k.setObject("symbol.Symbol",D,f);return D})},"esri/Color":function(){define(["dojo/_base/declare",
"dojo/_base/Color","dojo/has","./kernel"],function(D,k,a,f){var g=D([k],{declaredClass:"esri.Color"});g.toJsonColor=function(p){return p&&[p.r,p.g,p.b,1<p.a?p.a:Math.round(255*p.a)]};g.toDojoColor=function(p){return p&&new g([p[0],p[1],p[2],p[3]/255])};a="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(D=0;D<a.length;D++)g[a[D]]=k[a[D]];return f.Color=g})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(D,k,a,f,g,p,n,d){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},l={color:[0,0,0,1],style:e.STYLE_SOLID,width:1};D=D(d,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(h,t,r){h?k.isString(h)?(this.style=h,t&&(this.color=t),r&&(this.width=r)):(this.style=n.valueOf(this._styles,h.style)||e.STYLE_SOLID,this.marker=
h.marker):(k.mixin(this,l),this.color=new a(this.color),this.width=g.pt2px(this.width))},setStyle:function(h){this.style=h;return this},setMarker:function(h){this.marker=h},getStroke:function(){return this.style===e.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return n.fixJson(k.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?k.clone(this.marker):void 0}))}});k.mixin(D,e);D.defaultProps=l;k.setObject("symbol.SimpleLineSymbol",D,p);p.symbol.defaultSimpleLineSymbol=l;return D})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(D,k,a,f,g,p){D=D(p,{declaredClass:"esri.symbol.LineSymbol",constructor:function(n){k.isObject(n)?this.width=f.pt2px(this.width):
this.width=12},setWidth:function(n){this.width=n;return this},toJson:function(){var n=f.px2pt(this.width);n=isNaN(n)?void 0:n;return k.mixin(this.inherited("toJson",arguments),{width:n})}});k.setObject("symbol.LineSymbol",D,g);return D})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(D,k,a,f,g,p,n,d){var e={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};D=
D(d,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(l,h,t){l?k.isString(l)?(this.url=l,h&&(this.width=h),t&&(this.height=t)):(this.width=f.pt2px(null==l.width?e.width:l.width),this.height=f.pt2px(null==l.height?e.height:l.height),h=l.imageData,9>a("ie")||!h||(t=this.url,this.url="data:"+(l.contentType||"image")+";base64,"+h,this.imageData=t)):(k.mixin(this,e),this.width=f.pt2px(this.width),this.height=f.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(l){this.width=l;return this},setHeight:function(l){this.height=l;return this},setUrl:function(l){l!==this.url&&(delete this.imageData,delete this.contentType);this.url=l;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var l=this.url,h=this.imageData;if(0===l.indexOf("data:")){var t=
l;l=h;h=t.indexOf(";base64,")+8;h=t.substr(h)}!k.isString(l)||0!==l.indexOf("/")&&0!==l.indexOf("//")&&0!==l.indexOf("./")&&0!==l.indexOf("../")||(l=n.getAbsoluteUrl(l));t=f.px2pt(this.width);t=isNaN(t)?void 0:t;var r=f.px2pt(this.height);r=isNaN(r)?void 0:r;l=p.fixJson(k.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:l,imageData:h,contentType:this.contentType,width:t,height:r}));delete l.color;delete l.size;l.imageData||delete l.imageData;return l}});D.defaultProps=e;k.setObject("symbol.PictureMarkerSymbol",
D,g);g.symbol.defaultPictureMarkerSymbol=e;return D})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(D,k,a,f,g,p,n,d){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},l={color:[0,0,0,1],style:e.STYLE_SOLID,width:1,cap:e.CAP_BUTT,join:e.JOIN_MITER,miterLimit:10};D=D(d,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(h,t,r,q,v,x){h?k.isString(h)?(this.style=h,t&&(this.color=t),void 0!==r&&(this.width=r),q&&(this.cap=q),v&&(this.join=v),void 0!==x&&(this.miterLimit=x)):(this.cap=n.valueOf(this._caps,h.cap),this.join=n.valueOf(this._joins,h.join),this.width=g.pt2px(h.width),this.miterLimit=g.pt2px(h.miterLimit)):(k.mixin(this,l),this.color=new a(this.color),this.width=g.pt2px(this.width),this.miterLimit=g.pt2px(this.miterLimit))},setCap:function(h){this.cap=h;return this},
setJoin:function(h){this.join=h;return this},setMiterLimit:function(h){this.miterLimit=h;return this},getStroke:function(){return k.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===e.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var h=g.px2pt(this.miterLimit);h=isNaN(h)?void 0:h;return n.fixJson(k.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:h}))}});k.mixin(D,e);D.defaultProps=l;k.setObject("symbol.CartographicLineSymbol",D,p);p.symbol.defaultCartographicLineSymbol=l;return D})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(D,k,a,f,g,p,n,d,e,l){var h={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},t={style:h.STYLE_SOLID,color:[0,0,0,.25]};D=D(d,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(r,q,v){r?k.isString(r)?(this.style=r,void 0!==q&&(this.outline=q),void 0!==v&&(this.color=v)):this.style=n.valueOf(this._styles,r.style):(k.mixin(this,t),this.outline=new e(this.outline),this.color=new a(this.color))},setStyle:function(r){this.style=r;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var r=this.style;return r===h.STYLE_NULL?null:r===h.STYLE_SOLID?this.color:k.mixin({},g.defaultPattern,{src:l.toUrl("../images/symbol/sfs/"+r+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return n.fixJson(k.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});k.mixin(D,h);D.defaultProps=
t;k.setObject("symbol.SimpleFillSymbol",D,p);p.symbol.defaultSimpleFillSymbol=t;return D})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(D,k,a,f,g,p){D=D(g,{declaredClass:"esri.symbol.FillSymbol",constructor:function(n){n&&k.isObject(n)&&n.outline&&(this.outline=new p(n.outline))},setOutline:function(n){this.outline=n;return this},toJson:function(){var n=this.inherited("toJson",arguments);this.outline&&
(n.outline=this.outline.toJson());return n}});k.setObject("symbol.FillSymbol",D,f);return D})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(D,k,a,f,g,p,n,d){var e={xoffset:0,yoffset:0,width:12,height:12};D=D(d,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(l,h,t,r){l?k.isString(l)?(this.url=
l,void 0!==h&&(this.outline=h),void 0!==t&&(this.width=t),void 0!==r&&(this.height=r)):(this.xoffset=f.pt2px(l.xoffset),this.yoffset=f.pt2px(l.yoffset),this.width=f.pt2px(l.width),this.height=f.pt2px(l.height),h=l.imageData,9>a("ie")||!h||(t=this.url,this.url="data:"+(l.contentType||"image")+";base64,"+h,this.imageData=t)):(k.mixin(this,e),this.width=f.pt2px(this.width),this.height=f.pt2px(this.height))},setWidth:function(l){this.width=l;return this},setHeight:function(l){this.height=l;return this},
setOffset:function(l,h){this.xoffset=l;this.yoffset=h;return this},setUrl:function(l){l!==this.url&&(delete this.imageData,delete this.contentType);this.url=l;return this},setXScale:function(l){this.xscale=l;return this},setYScale:function(l){this.yscale=l;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return k.mixin({},f.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var l=this.url,h=this.imageData;if(0===l.indexOf("data:")){var t=l;l=h;h=t.indexOf(";base64,")+8;h=t.substr(h)}!k.isString(l)||0!==l.indexOf("/")&&0!==l.indexOf("//")&&0!==l.indexOf("./")&&0!==l.indexOf("../")||(l=n.getAbsoluteUrl(l));t=f.px2pt(this.width);t=isNaN(t)?void 0:t;var r=f.px2pt(this.height);r=isNaN(r)?void 0:r;var q=f.px2pt(this.xoffset);q=isNaN(q)?void 0:q;var v=f.px2pt(this.yoffset);
v=isNaN(v)?void 0:v;l=p.fixJson(k.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:l,imageData:h,contentType:this.contentType,width:t,height:r,xoffset:q,yoffset:v,xscale:this.xscale,yscale:this.yscale}));l.imageData||delete l.imageData;return l}});D.defaultProps=e;k.setObject("symbol.PictureFillSymbol",D,g);g.symbol.defaultPictureFillSymbol=e;return D})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(D,k,a,f,g,p,n,d,e){var l={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:f.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},h={start:"left",middle:"center",end:"right"},t={left:"start",center:"middle",right:"end",justify:"start"},r={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},q=document.createElement("canvas");D=D(d,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(v,
x,y){k.mixin(this,l);this.font=new e(this.font);this.color=new n(this.color);v&&(k.isObject(v)?(k.mixin(this,v),this.color&&p.isDefined(this.color[0])&&(this.color=n.toDojoColor(this.color)),this.type="textsymbol",this.font=new e(this.font),this.xoffset=f.pt2px(this.xoffset),this.yoffset=f.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=f.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=n.toDojoColor(this.haloColor))):(this.text=v,x&&(this.font=x),y&&(this.color=
y)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(v){this.font=v;return this},setSize:function(v){this.font.size=v;return this},setAngle:function(v){this.angle=v;return this},setOffset:function(v,x){this.xoffset=v;this.yoffset=x;return this},setHaloColor:function(v){this.haloColor=v;return this},setHaloSize:function(v){this.haloSize=v;return this},setAlign:function(v){this.align=v;this.setHorizontalAlignment(v&&h[v.toLowerCase()]||"center");return this},setHorizontalAlignment:function(v){this.horizontalAlignment=
v;return this},getSVGAlign:function(){var v=this.horizontalAlignment;return v=v&&t[v.toLowerCase()]||"middle"},setVerticalAlignment:function(v){this.verticalAlignment=v;return this},getSVGBaseline:function(){var v=this.verticalAlignment;return v&&r[v.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(v){this.decoration=v;this.font||this.setFont(new e);this.font.setDecoration(v);return this},setRotated:function(v){this.rotated=
v;return this},setKerning:function(v){this.kerning=v;return this},setText:function(v){this.text=v;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var v=q&&q.getContext&&q.getContext("2d");if(v){var x=this.font;v.font=(x.style?x.style:f.defaultFont.style)+" "+(x.weight?x.weight:f.defaultFont.weight)+" "+(x.size?x.size:f.defaultFont.size)+"px "+(x.family?x.family:f.defaultFont.family);return v.measureText(this.text).width}v=this.getHeight();x=
0;var y;for(y=0;y<this.text.length;y++){var B=this.text.charAt(y);x=B==B.toUpperCase()?x+.7*v:x+.5*v}return x},getHeight:function(){return f.normalizedLength(this.font.size)},getShapeDescriptors:function(){var v=this.font;if(v){var x={};v.size&&(x.size=v.size);v.style&&(x.style=v.style);v.variant&&(x.variant=v.variant);v.decoration&&(x.decoration=v.decoration);v.weight&&(x.weight=v.weight);v.family&&(x.family=v.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||v&&v.decoration,rotated:this.rotated,kerning:this.kerning},font:x,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var v=f.px2pt(this.xoffset),x=f.px2pt(this.yoffset),y=f.px2pt(this.haloSize);v=isNaN(v)?void 0:v;x=isNaN(x)?void 0:x;y=isNaN(y)?void 0:y;return p.fixJson(k.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:y,haloColor:this.haloColor&&
n.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:v,yoffset:x,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});k.mixin(D,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});D.defaultProps=
l;k.setObject("symbol.TextSymbol",D,g);g.symbol.defaultTextSymbol=l;return D})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(D,k,a,f,g,p){D=D(null,{declaredClass:"esri.symbol.Font",constructor:function(n,d,e,l,h){n?k.isObject(n)?k.mixin(this,n):(this.size=n,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==d&&(this.style=d),void 0!==e&&(this.variant=e),void 0!==l&&(this.weight=l),void 0!==h&&
(this.family=h)):k.mixin(this,f.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&this.size&&k.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=f.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(n){this.size=this._convert2PxSize(n);return this},_convert2PxSize:function(n){var d;parseFloat(n)==n?d=n:k.isString(n)&&(-1<n.indexOf("pt")?d=f.pt2px(parseFloat(n)):-1<n.indexOf("px")?d=parseFloat(n):-1<n.indexOf("em")?d=
f.pt2px(12*parseFloat(n)):-1<n.indexOf("%")&&(d=f.pt2px(.12*parseFloat(n))));return d},setStyle:function(n){this.style=n;return this},setVariant:function(n){this.variant=n;return this},setWeight:function(n){this.weight=n;return this},setFamily:function(n){this.family=n;return this},setDecoration:function(n){this.decoration=n;return this},toJson:function(){return p.fixJson({size:f.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});k.mixin(D,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});k.setObject("symbol.Font",D,g);return D})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports"],function(D,k){function a(d,e){if(d===e)return!0;if(null==d||null==e||d.length!==e.length)return!1;for(var l=0;l<d.length;l++){var h=d[l],t=e[l];if(h.length!==
t.length)return!1;for(var r=0;r<h.length;r++)if(h[r]!==t[r])return!1}return!0}function f(d,e){if(d===e)return!0;if(null==d||null==e||d.length!==e.length)return!1;for(var l=0;l<d.length;l++)if(!a(d[l],e[l]))return!1;return!0}function g(d,e){return d===e||d&&e&&d.equals(e)}function p(d,e){if(d===e)return!0;if(!d||!e||d.type!==e.type)return!1;switch(d.type){case "point":return g(d.spatialReference,e.spatialReference)?d.x===e.x&&d.y===e.y&&d.z===e.z&&d.m===e.m:!1;case "extent":return d.hasZ===e.hasZ&&
d.hasM===e.hasM&&g(d.spatialReference,e.spatialReference)?d.xmin===e.xmin&&d.ymin===e.ymin&&d.zmin===e.zmin&&d.xmax===e.xmax&&d.ymax===e.ymax&&d.zmax===e.zmax:!1;case "polyline":return d.hasZ===e.hasZ&&d.hasM===e.hasM&&g(d.spatialReference,e.spatialReference)?f(d.paths,e.paths):!1;case "polygon":return d.hasZ===e.hasZ&&d.hasM===e.hasM&&g(d.spatialReference,e.spatialReference)?f(d.rings,e.rings):!1;case "multipoint":return d.hasZ===e.hasZ&&d.hasM===e.hasM&&g(d.spatialReference,e.spatialReference)?
a(d.points,e.points):!1;case "mesh":return!1}}function n(d,e){if(d===e)return!0;if(!d||!e)return!1;for(var l in d)if(!(l in e)||d[l]!==e[l])return!1;for(l in e)if(!(l in d))return!1;return!0}Object.defineProperty(k,"__esModule",{value:!0});k.equals=function(d,e){return d===e?!0:null!=d&&null!=e&&d.objectId===e.objectId&&p(d.geometry,e.geometry)&&n(d.attributes,e.attributes)?!0:!1}})},"esri/layers/vectorTiles/views/3d/lib/glMatrix":function(){define([],function(){var D={};(function(k,a){a(k,!0);a(k,
!1)})(D,function(k,a){var f={};(function(){if("undefined"!=typeof Float32Array){var b=new Float32Array(1),c=new Int32Array(b.buffer);f.invsqrt=function(m){b[0]=m;c[0]=1597463007-(c[0]>>1);var u=b[0];return u*(1.5-.5*m*u*u)}}else f.invsqrt=function(m){return 1/Math.sqrt(m)}})();var g=Array;"undefined"!=typeof Float32Array&&(g=a?Float32Array:Array);var p={create:function(b){var c=new g(3);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2]):c[0]=c[1]=c[2]=0;return c},createFrom:function(b,c,m){var u=new g(3);u[0]=b;u[1]=
c;u[2]=m;return u},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];return c},set3:function(b,c,m,u){u[0]=b;u[1]=c;u[2]=m;return u},add:function(b,c,m){if(!m||b===m)return b[0]+=c[0],b[1]+=c[1],b[2]+=c[2],b;m[0]=b[0]+c[0];m[1]=b[1]+c[1];m[2]=b[2]+c[2];return m},subtract:function(b,c,m){if(!m||b===m)return b[0]-=c[0],b[1]-=c[1],b[2]-=c[2],b;m[0]=b[0]-c[0];m[1]=b[1]-c[1];m[2]=b[2]-c[2];return m},multiply:function(b,c,m){if(!m||b===m)return b[0]*=c[0],b[1]*=c[1],b[2]*=c[2],b;m[0]=b[0]*c[0];m[1]=b[1]*
c[1];m[2]=b[2]*c[2];return m},max:function(b,c,m){m[0]=Math.max(b[0],c[0]);m[1]=Math.max(b[1],c[1]);m[2]=Math.max(b[2],c[2]);return m},min:function(b,c,m){m[0]=Math.min(b[0],c[0]);m[1]=Math.min(b[1],c[1]);m[2]=Math.min(b[2],c[2]);return m},negate:function(b,c){c||(c=b);c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];return c},scale:function(b,c,m){if(!m||b===m)return b[0]*=c,b[1]*=c,b[2]*=c,b;m[0]=b[0]*c;m[1]=b[1]*c;m[2]=b[2]*c;return m},normalize:function(b,c){c||(c=b);var m=b[0],u=b[1],w=b[2],A=Math.sqrt(m*m+
u*u+w*w);if(!A)return c[0]=0,c[1]=0,c[2]=0,c;if(1===A)return c[0]=m,c[1]=u,c[2]=w,c;A=1/A;c[0]=m*A;c[1]=u*A;c[2]=w*A;return c},cross:function(b,c,m){m||(m=b);var u=b[0],w=b[1];b=b[2];var A=c[0],C=c[1];c=c[2];m[0]=w*c-b*C;m[1]=b*A-u*c;m[2]=u*C-w*A;return m},length:function(b){var c=b[0],m=b[1];b=b[2];return Math.sqrt(c*c+m*m+b*b)},length2:function(b){var c=b[0],m=b[1];b=b[2];return c*c+m*m+b*b},dot:function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]},direction:function(b,c,m){m||(m=b);var u=b[0]-c[0],
w=b[1]-c[1];b=b[2]-c[2];c=Math.sqrt(u*u+w*w+b*b);if(!c)return m[0]=0,m[1]=0,m[2]=0,m;c=1/c;m[0]=u*c;m[1]=w*c;m[2]=b*c;return m},lerp:function(b,c,m,u){u||(u=b);u[0]=b[0]+m*(c[0]-b[0]);u[1]=b[1]+m*(c[1]-b[1]);u[2]=b[2]+m*(c[2]-b[2]);return u},dist:function(b,c){var m=c[0]-b[0],u=c[1]-b[1],w=c[2]-b[2];return Math.sqrt(m*m+u*u+w*w)},dist2:function(b,c){var m=c[0]-b[0],u=c[1]-b[1],w=c[2]-b[2];return m*m+u*u+w*w}},n=null,d=new g(4);p.unproject=function(b,c,m,u,w){w||(w=b);n||(n=v.create());var A=n;d[0]=
2*(b[0]-u[0])/u[2]-1;d[1]=2*(b[1]-u[1])/u[3]-1;d[2]=2*b[2]-1;d[3]=1;v.multiply(m,c,A);if(!v.inverse(A))return null;v.multiplyVec4(A,d);if(0===d[3])return null;w[0]=d[0]/d[3];w[1]=d[1]/d[3];w[2]=d[2]/d[3];return w};var e=p.createFrom(1,0,0),l=p.createFrom(0,1,0),h=p.createFrom(0,0,1);p.rotationTo=function(b,c,m){m||(m=x.create());var u=p.dot(b,c),w=p.create();if(1<=u)x.set(y,m);else if(-.999999>u)p.cross(e,b,w),1E-6>w.length&&p.cross(l,b,w),1E-6>w.length&&p.cross(h,b,w),p.normalize(w),x.fromAxisAngle(w,
Math.PI,m);else{u=Math.sqrt(2*(1+u));var A=1/u;p.cross(b,c,w);m[0]=w[0]*A;m[1]=w[1]*A;m[2]=w[2]*A;m[3]=.5*u;x.normalize(m)}1<m[3]?m[3]=1:-1>m[3]&&(m[3]=-1);return m};var t=p.create(),r=p.create();p.project=function(b,c,m,u){u||(u=b);p.direction(c,m,t);p.subtract(b,c,r);b=p.dot(t,r);p.scale(t,b,u);p.add(u,c,u)};p.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+"]"};var q={create:function(b){var c=new g(9);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8]):
c[0]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=0;return c},createFrom:function(b,c,m,u,w,A,C,E,G){var F=new g(9);F[0]=b;F[1]=c;F[2]=m;F[3]=u;F[4]=w;F[5]=A;F[6]=C;F[7]=E;F[8]=G;return F},determinant:function(b){var c=b[3],m=b[4],u=b[5],w=b[6],A=b[7],C=b[8];return b[0]*(C*m-u*A)+b[1]*(-C*c+u*w)+b[2]*(A*c-m*w)},inverse:function(b,c){var m=b[0],u=b[1],w=b[2],A=b[3],C=b[4],E=b[5],G=b[6],F=b[7],I=b[8],M=I*C-E*F,Y=-I*A+E*G,R=F*A-C*G,S=m*M+u*Y+w*R;if(!S)return null;S=1/S;c||(c=q.create());c[0]=M*S;c[1]=(-I*
u+w*F)*S;c[2]=(E*u-w*C)*S;c[3]=Y*S;c[4]=(I*m-w*G)*S;c[5]=(-E*m+w*A)*S;c[6]=R*S;c[7]=(-F*m+u*G)*S;c[8]=(C*m-u*A)*S;return c},multiply:function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2],C=b[3],E=b[4],G=b[5],F=b[6],I=b[7];b=b[8];var M=c[0],Y=c[1],R=c[2],S=c[3],O=c[4],L=c[5],P=c[6],X=c[7];c=c[8];m[0]=M*u+Y*C+R*F;m[1]=M*w+Y*E+R*I;m[2]=M*A+Y*G+R*b;m[3]=S*u+O*C+L*F;m[4]=S*w+O*E+L*I;m[5]=S*A+O*G+L*b;m[6]=P*u+X*C+c*F;m[7]=P*w+X*E+c*I;m[8]=P*A+X*G+c*b;return m},add:function(b,c,m){m||(m=b);m[0]=b[0]+c[0];m[1]=
b[1]+c[1];m[2]=b[2]+c[2];m[3]=b[3]+c[3];m[4]=b[4]+c[4];m[5]=b[5]+c[5];m[6]=b[6]+c[6];m[7]=b[7]+c[7];m[8]=b[8]+c[8];return m},subtract:function(b,c,m){m||(m=b);m[0]=b[0]-c[0];m[1]=b[1]-c[1];m[2]=b[2]-c[2];m[3]=b[3]-c[3];m[4]=b[4]-c[4];m[5]=b[5]-c[5];m[6]=b[6]-c[6];m[7]=b[7]-c[7];m[8]=b[8]-c[8];return m},multiplyVec2:function(b,c,m){m||(m=c);var u=c[0];c=c[1];m[0]=u*b[0]+c*b[3]+b[6];m[1]=u*b[1]+c*b[4]+b[7];return m},multiplyVec3:function(b,c,m){m||(m=c);var u=c[0],w=c[1];c=c[2];m[0]=u*b[0]+w*b[3]+c*
b[6];m[1]=u*b[1]+w*b[4]+c*b[7];m[2]=u*b[2]+w*b[5]+c*b[8];return m},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];return c},identity:function(b){b||(b=q.create());b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},transpose:function(b,c){if(!c||b===c){var m=b[1],u=b[2],w=b[5];b[1]=b[3];b[2]=b[6];b[3]=m;b[5]=b[7];b[6]=u;b[7]=w;return b}c[0]=b[0];c[1]=b[3];c[2]=b[6];c[3]=b[1];c[4]=b[4];c[5]=b[7];c[6]=b[2];c[7]=b[5];c[8]=
b[8];return c},toMat4:function(b,c){c||(c=v.create());c[15]=1;c[14]=0;c[13]=0;c[12]=0;c[11]=0;c[10]=b[8];c[9]=b[7];c[8]=b[6];c[7]=0;c[6]=b[5];c[5]=b[4];c[4]=b[3];c[3]=0;c[2]=b[2];c[1]=b[1];c[0]=b[0];return c},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+"]"}},v={create:function(b){var c=new g(16);4===arguments.length?(c[0]=arguments[0],c[1]=arguments[1],c[2]=arguments[2],c[3]=arguments[3],c[4]=arguments[4],c[5]=arguments[5],c[6]=arguments[6],
c[7]=arguments[7],c[8]=arguments[8],c[9]=arguments[9],c[10]=arguments[10],c[11]=arguments[11],c[12]=arguments[12],c[13]=arguments[13],c[14]=arguments[14],c[15]=arguments[15]):b&&(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8],c[9]=b[9],c[10]=b[10],c[11]=b[11],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15]);return c},createFrom:function(b,c,m,u,w,A,C,E,G,F,I,M,Y,R,S,O){var L=new g(16);L[0]=b;L[1]=c;L[2]=m;L[3]=u;L[4]=w;L[5]=A;L[6]=C;L[7]=E;L[8]=G;L[9]=F;
L[10]=I;L[11]=M;L[12]=Y;L[13]=R;L[14]=S;L[15]=O;return L},createFromMatrixRowMajor:function(b){var c=new g(16);c[0]=b[0];c[4]=b[1];c[8]=b[2];c[12]=b[3];c[1]=b[4];c[5]=b[5];c[9]=b[6];c[13]=b[7];c[2]=b[8];c[6]=b[9];c[10]=b[10];c[14]=b[11];c[3]=b[12];c[7]=b[13];c[11]=b[14];c[15]=b[15];return c},createFromMatrix:function(b){var c=new g(16);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=
b[15];return c},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15];return c},setRowMajor:function(b,c){c[0]=b[0];c[4]=b[1];c[8]=b[2];c[12]=b[3];c[1]=b[4];c[5]=b[5];c[9]=b[6];c[13]=b[7];c[2]=b[8];c[6]=b[9];c[10]=b[10];c[14]=b[11];c[3]=b[12];c[7]=b[13];c[11]=b[14];c[15]=b[15];return c},identity:function(b){b||(b=v.create());b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=
1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},transpose:function(b,c){if(!c||b===c){var m=b[1],u=b[2],w=b[3],A=b[6],C=b[7],E=b[11];b[1]=b[4];b[2]=b[8];b[3]=b[12];b[4]=m;b[6]=b[9];b[7]=b[13];b[8]=u;b[9]=A;b[11]=b[14];b[12]=w;b[13]=C;b[14]=E;return b}c[0]=b[0];c[1]=b[4];c[2]=b[8];c[3]=b[12];c[4]=b[1];c[5]=b[5];c[6]=b[9];c[7]=b[13];c[8]=b[2];c[9]=b[6];c[10]=b[10];c[11]=b[14];c[12]=b[3];c[13]=b[7];c[14]=b[11];c[15]=b[15];return c},determinant:function(b){var c=
b[0],m=b[1],u=b[2],w=b[3],A=b[4],C=b[5],E=b[6],G=b[7],F=b[8],I=b[9],M=b[10],Y=b[11],R=b[12],S=b[13],O=b[14];b=b[15];return R*I*E*w-F*S*E*w-R*C*M*w+A*S*M*w+F*C*O*w-A*I*O*w-R*I*u*G+F*S*u*G+R*m*M*G-c*S*M*G-F*m*O*G+c*I*O*G+R*C*u*Y-A*S*u*Y-R*m*E*Y+c*S*E*Y+A*m*O*Y-c*C*O*Y-F*C*u*b+A*I*u*b+F*m*E*b-c*I*E*b-A*m*M*b+c*C*M*b},inverse:function(b,c){c||(c=b);var m=b[0],u=b[1],w=b[2],A=b[3],C=b[4],E=b[5],G=b[6],F=b[7],I=b[8],M=b[9],Y=b[10],R=b[11],S=b[12],O=b[13],L=b[14],P=b[15],X=m*E-u*C,Q=m*G-w*C,K=m*F-A*C,U=
u*G-w*E,da=u*F-A*E,fa=w*F-A*G,ia=I*O-M*S,la=I*L-Y*S,ma=I*P-R*S,ta=M*L-Y*O,ua=M*P-R*O,Ca=Y*P-R*L,xa=X*Ca-Q*ua+K*ta+U*ma-da*la+fa*ia;if(!xa)return null;xa=1/xa;c[0]=(E*Ca-G*ua+F*ta)*xa;c[1]=(-u*Ca+w*ua-A*ta)*xa;c[2]=(O*fa-L*da+P*U)*xa;c[3]=(-M*fa+Y*da-R*U)*xa;c[4]=(-C*Ca+G*ma-F*la)*xa;c[5]=(m*Ca-w*ma+A*la)*xa;c[6]=(-S*fa+L*K-P*Q)*xa;c[7]=(I*fa-Y*K+R*Q)*xa;c[8]=(C*ua-E*ma+F*ia)*xa;c[9]=(-m*ua+u*ma-A*ia)*xa;c[10]=(S*da-O*K+P*X)*xa;c[11]=(-I*da+M*K-R*X)*xa;c[12]=(-C*ta+E*la-G*ia)*xa;c[13]=(m*ta-u*la+w*
ia)*xa;c[14]=(-S*U+O*Q-L*X)*xa;c[15]=(I*U-M*Q+Y*X)*xa;return c},toRotationMat:function(b,c){c||(c=v.create());c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c},toMat3:function(b,c){c||(c=q.create());c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[4];c[4]=b[5];c[5]=b[6];c[6]=b[8];c[7]=b[9];c[8]=b[10];return c},toInverseMat3:function(b,c){var m=b[0],u=b[1],w=b[2],A=b[4],C=b[5],E=b[6],G=b[8],F=b[9],
I=b[10],M=I*C-E*F,Y=-I*A+E*G,R=F*A-C*G,S=m*M+u*Y+w*R;if(!S)return null;S=1/S;c||(c=q.create());c[0]=M*S;c[1]=(-I*u+w*F)*S;c[2]=(E*u-w*C)*S;c[3]=Y*S;c[4]=(I*m-w*G)*S;c[5]=(-E*m+w*A)*S;c[6]=R*S;c[7]=(-F*m+u*G)*S;c[8]=(C*m-u*A)*S;return c},multiply:function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2],C=b[3],E=b[4],G=b[5],F=b[6],I=b[7],M=b[8],Y=b[9],R=b[10],S=b[11],O=b[12],L=b[13],P=b[14];b=b[15];var X=c[0],Q=c[1],K=c[2],U=c[3],da=c[4],fa=c[5],ia=c[6],la=c[7],ma=c[8],ta=c[9],ua=c[10],Ca=c[11],xa=c[12],Ba=
c[13],Z=c[14];c=c[15];m[0]=X*u+Q*E+K*M+U*O;m[1]=X*w+Q*G+K*Y+U*L;m[2]=X*A+Q*F+K*R+U*P;m[3]=X*C+Q*I+K*S+U*b;m[4]=da*u+fa*E+ia*M+la*O;m[5]=da*w+fa*G+ia*Y+la*L;m[6]=da*A+fa*F+ia*R+la*P;m[7]=da*C+fa*I+ia*S+la*b;m[8]=ma*u+ta*E+ua*M+Ca*O;m[9]=ma*w+ta*G+ua*Y+Ca*L;m[10]=ma*A+ta*F+ua*R+Ca*P;m[11]=ma*C+ta*I+ua*S+Ca*b;m[12]=xa*u+Ba*E+Z*M+c*O;m[13]=xa*w+Ba*G+Z*Y+c*L;m[14]=xa*A+Ba*F+Z*R+c*P;m[15]=xa*C+Ba*I+Z*S+c*b;return m},multiplyVec3:function(b,c,m){m||(m=c);var u=c[0],w=c[1];c=c[2];m[0]=b[0]*u+b[4]*w+b[8]*
c+b[12];m[1]=b[1]*u+b[5]*w+b[9]*c+b[13];m[2]=b[2]*u+b[6]*w+b[10]*c+b[14];return m},multiplyVec4:function(b,c,m){m||(m=c);var u=c[0],w=c[1],A=c[2];c=c[3];m[0]=b[0]*u+b[4]*w+b[8]*A+b[12]*c;m[1]=b[1]*u+b[5]*w+b[9]*A+b[13]*c;m[2]=b[2]*u+b[6]*w+b[10]*A+b[14]*c;m[3]=b[3]*u+b[7]*w+b[11]*A+b[15]*c;return m},translate:function(b,c,m){var u=c[0],w=c[1];c=c[2];if(!m||b===m)return b[12]=b[0]*u+b[4]*w+b[8]*c+b[12],b[13]=b[1]*u+b[5]*w+b[9]*c+b[13],b[14]=b[2]*u+b[6]*w+b[10]*c+b[14],b[15]=b[3]*u+b[7]*w+b[11]*c+b[15],
b;var A=b[0];var C=b[1];var E=b[2];var G=b[3];var F=b[4];var I=b[5];var M=b[6];var Y=b[7];var R=b[8];var S=b[9];var O=b[10];var L=b[11];m[0]=A;m[1]=C;m[2]=E;m[3]=G;m[4]=F;m[5]=I;m[6]=M;m[7]=Y;m[8]=R;m[9]=S;m[10]=O;m[11]=L;m[12]=A*u+F*w+R*c+b[12];m[13]=C*u+I*w+S*c+b[13];m[14]=E*u+M*w+O*c+b[14];m[15]=G*u+Y*w+L*c+b[15];return m},scale:function(b,c,m){var u=c[0],w=c[1];c=c[2];if(!m||b===m)return b[0]*=u,b[1]*=u,b[2]*=u,b[3]*=u,b[4]*=w,b[5]*=w,b[6]*=w,b[7]*=w,b[8]*=c,b[9]*=c,b[10]*=c,b[11]*=c,b;m[0]=b[0]*
u;m[1]=b[1]*u;m[2]=b[2]*u;m[3]=b[3]*u;m[4]=b[4]*w;m[5]=b[5]*w;m[6]=b[6]*w;m[7]=b[7]*w;m[8]=b[8]*c;m[9]=b[9]*c;m[10]=b[10]*c;m[11]=b[11]*c;m[12]=b[12];m[13]=b[13];m[14]=b[14];m[15]=b[15];return m},maxScale:function(b){return Math.max(Math.max(Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9])),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]))},rotate:function(b,c,m,u){var w=m[0],A=m[1];m=m[2];var C=Math.sqrt(w*w+A*A+m*m);if(!C)return null;1!==C&&(C=1/C,w*=C,A*=C,m*=C);var E=
Math.sin(c);var G=Math.cos(c);var F=1-G;c=b[0];C=b[1];var I=b[2];var M=b[3];var Y=b[4];var R=b[5];var S=b[6];var O=b[7];var L=b[8];var P=b[9];var X=b[10];var Q=b[11];var K=w*w*F+G;var U=A*w*F+m*E;var da=m*w*F-A*E;var fa=w*A*F-m*E;var ia=A*A*F+G;var la=m*A*F+w*E;var ma=w*m*F+A*E;w=A*m*F-w*E;A=m*m*F+G;u?b!==u&&(u[12]=b[12],u[13]=b[13],u[14]=b[14],u[15]=b[15]):u=b;u[0]=c*K+Y*U+L*da;u[1]=C*K+R*U+P*da;u[2]=I*K+S*U+X*da;u[3]=M*K+O*U+Q*da;u[4]=c*fa+Y*ia+L*la;u[5]=C*fa+R*ia+P*la;u[6]=I*fa+S*ia+X*la;u[7]=
M*fa+O*ia+Q*la;u[8]=c*ma+Y*w+L*A;u[9]=C*ma+R*w+P*A;u[10]=I*ma+S*w+X*A;u[11]=M*ma+O*w+Q*A;return u},rotateX:function(b,c,m){var u=Math.sin(c);c=Math.cos(c);var w=b[4],A=b[5],C=b[6],E=b[7],G=b[8],F=b[9],I=b[10],M=b[11];m?b!==m&&(m[0]=b[0],m[1]=b[1],m[2]=b[2],m[3]=b[3],m[12]=b[12],m[13]=b[13],m[14]=b[14],m[15]=b[15]):m=b;m[4]=w*c+G*u;m[5]=A*c+F*u;m[6]=C*c+I*u;m[7]=E*c+M*u;m[8]=w*-u+G*c;m[9]=A*-u+F*c;m[10]=C*-u+I*c;m[11]=E*-u+M*c;return m},rotateY:function(b,c,m){var u=Math.sin(c);c=Math.cos(c);var w=
b[0],A=b[1],C=b[2],E=b[3],G=b[8],F=b[9],I=b[10],M=b[11];m?b!==m&&(m[4]=b[4],m[5]=b[5],m[6]=b[6],m[7]=b[7],m[12]=b[12],m[13]=b[13],m[14]=b[14],m[15]=b[15]):m=b;m[0]=w*c+G*-u;m[1]=A*c+F*-u;m[2]=C*c+I*-u;m[3]=E*c+M*-u;m[8]=w*u+G*c;m[9]=A*u+F*c;m[10]=C*u+I*c;m[11]=E*u+M*c;return m},rotateZ:function(b,c,m){var u=Math.sin(c);c=Math.cos(c);var w=b[0],A=b[1],C=b[2],E=b[3],G=b[4],F=b[5],I=b[6],M=b[7];m?b!==m&&(m[8]=b[8],m[9]=b[9],m[10]=b[10],m[11]=b[11],m[12]=b[12],m[13]=b[13],m[14]=b[14],m[15]=b[15]):m=b;
m[0]=w*c+G*u;m[1]=A*c+F*u;m[2]=C*c+I*u;m[3]=E*c+M*u;m[4]=w*-u+G*c;m[5]=A*-u+F*c;m[6]=C*-u+I*c;m[7]=E*-u+M*c;return m},frustum:function(b,c,m,u,w,A,C){C||(C=v.create());var E=c-b,G=u-m,F=A-w;C[0]=2*w/E;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2*w/G;C[6]=0;C[7]=0;C[8]=(c+b)/E;C[9]=(u+m)/G;C[10]=-(A+w)/F;C[11]=-1;C[12]=0;C[13]=0;C[14]=-(A*w*2)/F;C[15]=0;return C},perspective:function(b,c,m,u,w){b=m*Math.tan(b*Math.PI/360);c*=b;return v.frustum(-c,c,-b,b,m,u,w)},ortho:function(b,c,m,u,w,A,C){C||(C=v.create());
var E=c-b,G=u-m,F=A-w;C[0]=2/E;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2/G;C[6]=0;C[7]=0;C[8]=0;C[9]=0;C[10]=-2/F;C[11]=0;C[12]=-(b+c)/E;C[13]=-(u+m)/G;C[14]=-(A+w)/F;C[15]=1;return C},lookAt:function(b,c,m,u){u||(u=v.create());var w=b[0],A=b[1];b=b[2];var C=m[0];var E=m[1];var G=m[2];var F=c[0];m=c[1];var I=c[2];if(w===F&&A===m&&b===I)return v.identity(u);c=w-F;m=A-m;F=b-I;var M=1/Math.sqrt(c*c+m*m+F*F);c*=M;m*=M;F*=M;I=E*F-G*m;G=G*c-C*F;C=C*m-E*c;(M=Math.sqrt(I*I+G*G+C*C))?(M=1/M,I*=M,G*=M,C*=M):C=G=I=
0;E=m*C-F*G;var Y=F*I-c*C;var R=c*G-m*I;(M=Math.sqrt(E*E+Y*Y+R*R))?(M=1/M,E*=M,Y*=M,R*=M):R=Y=E=0;u[0]=I;u[1]=E;u[2]=c;u[3]=0;u[4]=G;u[5]=Y;u[6]=m;u[7]=0;u[8]=C;u[9]=R;u[10]=F;u[11]=0;u[12]=-(I*w+G*A+C*b);u[13]=-(E*w+Y*A+R*b);u[14]=-(c*w+m*A+F*b);u[15]=1;return u},fromRotationTranslation:function(b,c,m){m||(m=v.create());var u=b[0],w=b[1],A=b[2],C=b[3],E=u+u,G=w+w,F=A+A;b=u*E;var I=u*G;u*=F;var M=w*G;w*=F;A*=F;E*=C;G*=C;C*=F;m[0]=1-(M+A);m[1]=I+C;m[2]=u-G;m[3]=0;m[4]=I-C;m[5]=1-(b+A);m[6]=w+E;m[7]=
0;m[8]=u+G;m[9]=w-E;m[10]=1-(b+M);m[11]=0;m[12]=c[0];m[13]=c[1];m[14]=c[2];m[15]=1;return m},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+"]"}},x={create:function(b){var c=new g(4);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(b,c,m,u){var w=new g(4);w[0]=b;w[1]=c;w[2]=m;w[3]=u;return w},set:function(b,c){c[0]=
b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c},identity:function(b){b||(b=x.create());b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b}},y=x.identity();x.calculateW=function(b,c){var m=b[0],u=b[1],w=b[2];if(!c||b===c)return b[3]=-Math.sqrt(Math.abs(1-m*m-u*u-w*w)),b;c[0]=m;c[1]=u;c[2]=w;c[3]=-Math.sqrt(Math.abs(1-m*m-u*u-w*w));return c};x.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]};x.inverse=function(b,c){var m=b[0],u=b[1],w=b[2],A=b[3];m=(m=m*m+u*u+w*w+A*A)?1/m:0;if(!c||b===c)return b[0]*=
-m,b[1]*=-m,b[2]*=-m,b[3]*=m,b;c[0]=-b[0]*m;c[1]=-b[1]*m;c[2]=-b[2]*m;c[3]=b[3]*m;return c};x.conjugate=function(b,c){if(!c||b===c)return b[0]*=-1,b[1]*=-1,b[2]*=-1,b;c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];c[3]=b[3];return c};x.length=function(b){var c=b[0],m=b[1],u=b[2];b=b[3];return Math.sqrt(c*c+m*m+u*u+b*b)};x.normalize=function(b,c){c||(c=b);var m=b[0],u=b[1],w=b[2],A=b[3],C=Math.sqrt(m*m+u*u+w*w+A*A);if(0===C)return c[0]=0,c[1]=0,c[2]=0,c[3]=0,c;C=1/C;c[0]=m*C;c[1]=u*C;c[2]=w*C;c[3]=A*C;return c};
x.add=function(b,c,m){if(!m||b===m)return b[0]+=c[0],b[1]+=c[1],b[2]+=c[2],b[3]+=c[3],b;m[0]=b[0]+c[0];m[1]=b[1]+c[1];m[2]=b[2]+c[2];m[3]=b[3]+c[3];return m};x.multiply=function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2];b=b[3];var C=c[0],E=c[1],G=c[2];c=c[3];m[0]=u*c+b*C+w*G-A*E;m[1]=w*c+b*E+A*C-u*G;m[2]=A*c+b*G+u*E-w*C;m[3]=b*c-u*C-w*E-A*G;return m};x.multiplyVec3=function(b,c,m){m||(m=c);var u=c[0],w=c[1],A=c[2];c=b[0];var C=b[1],E=b[2];b=b[3];var G=b*u+C*A-E*w,F=b*w+E*u-c*A,I=b*A+c*w-C*u;u=-c*u-
C*w-E*A;m[0]=G*b+u*-c+F*-E-I*-C;m[1]=F*b+u*-C+I*-c-G*-E;m[2]=I*b+u*-E+G*-C-F*-c;return m};x.scale=function(b,c,m){if(!m||b===m)return b[0]*=c,b[1]*=c,b[2]*=c,b[3]*=c,b;m[0]=b[0]*c;m[1]=b[1]*c;m[2]=b[2]*c;m[3]=b[3]*c;return m};x.toMat3=function(b,c){c||(c=q.create());var m=b[0],u=b[1],w=b[2],A=b[3],C=m+m,E=u+u,G=w+w,F=m*C,I=m*E;m*=G;var M=u*E;u*=G;w*=G;C*=A;E*=A;A*=G;c[0]=1-(M+w);c[1]=I+A;c[2]=m-E;c[3]=I-A;c[4]=1-(F+w);c[5]=u+C;c[6]=m+E;c[7]=u-C;c[8]=1-(F+M);return c};x.toMat4=function(b,c){c||(c=
v.create());var m=b[0],u=b[1],w=b[2],A=b[3],C=m+m,E=u+u,G=w+w,F=m*C,I=m*E;m*=G;var M=u*E;u*=G;w*=G;C*=A;E*=A;A*=G;c[0]=1-(M+w);c[1]=I+A;c[2]=m-E;c[3]=0;c[4]=I-A;c[5]=1-(F+w);c[6]=u+C;c[7]=0;c[8]=m+E;c[9]=u-C;c[10]=1-(F+M);c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};x.slerp=function(b,c,m,u){u||(u=b);var w=b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3];if(1<=Math.abs(w))return u!==b&&(u[0]=b[0],u[1]=b[1],u[2]=b[2],u[3]=b[3]),u;var A=Math.acos(w);var C=Math.sqrt(1-w*w);if(.001>Math.abs(C))return u[0]=
.5*b[0]+.5*c[0],u[1]=.5*b[1]+.5*c[1],u[2]=.5*b[2]+.5*c[2],u[3]=.5*b[3]+.5*c[3],u;w=Math.sin((1-m)*A)/C;m=Math.sin(m*A)/C;u[0]=b[0]*w+c[0]*m;u[1]=b[1]*w+c[1]*m;u[2]=b[2]*w+c[2]*m;u[3]=b[3]*w+c[3]*m;return u};x.fromRotationMatrix=function(b,c){c||(c=x.create());var m=b[0]+b[4]+b[8];if(0<m){var u=Math.sqrt(m+1);c[3]=.5*u;u=.5/u;c[0]=(b[7]-b[5])*u;c[1]=(b[2]-b[6])*u;c[2]=(b[3]-b[1])*u}else{u=x.fromRotationMatrix.s_iNext=x.fromRotationMatrix.s_iNext||[1,2,0];m=0;b[4]>b[0]&&(m=1);b[8]>b[3*m+m]&&(m=2);var w=
u[m],A=u[w];u=Math.sqrt(b[3*m+m]-b[3*w+w]-b[3*A+A]+1);c[m]=.5*u;u=.5/u;c[3]=(b[3*A+w]-b[3*w+A])*u;c[w]=(b[3*w+m]+b[3*m+w])*u;c[A]=(b[3*A+m]+b[3*m+A])*u}return c};q.toQuat4=x.fromRotationMatrix;(function(){var b=q.create();x.fromAxes=function(c,m,u,w){b[0]=m[0];b[3]=m[1];b[6]=m[2];b[1]=u[0];b[4]=u[1];b[7]=u[2];b[2]=c[0];b[5]=c[1];b[8]=c[2];return x.fromRotationMatrix(b,w)}})();x.identity=function(b){b||(b=x.create());b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b};x.fromAngleAxis=function(b,c,m){m||(m=x.create());
b*=.5;var u=Math.sin(b);m[3]=Math.cos(b);m[0]=u*c[0];m[1]=u*c[1];m[2]=u*c[2];return m};x.toAngleAxis=function(b,c){c||(c=b);var m=b[0]*b[0]+b[1]*b[1]+b[2]*b[2];0<m?(c[3]=2*Math.acos(b[3]),m=f.invsqrt(m),c[0]=b[0]*m,c[1]=b[1]*m,c[2]=b[2]*m):(c[3]=0,c[0]=1,c[1]=0,c[2]=0);return c};x.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"};var B={create:function(b){var c=new g(4);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(b,c,m,u){var w=new g(4);
w[0]=b;w[1]=c;w[2]=m;w[3]=u;return w},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c},identity:function(b){b||(b=B.create());b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},transpose:function(b,c){if(!c||b===c){var m=b[1];b[1]=b[2];b[2]=m;return b}c[0]=b[0];c[1]=b[2];c[2]=b[1];c[3]=b[3];return c},determinant:function(b){return b[0]*b[3]-b[2]*b[1]},inverse:function(b,c){c||(c=b);var m=b[0],u=b[1],w=b[2],A=b[3],C=m*A-w*u;if(!C)return null;C=1/C;c[0]=A*C;c[1]=-u*C;c[2]=-w*C;c[3]=m*C;return c},
multiply:function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2];b=b[3];m[0]=u*c[0]+w*c[2];m[1]=u*c[1]+w*c[3];m[2]=A*c[0]+b*c[2];m[3]=A*c[1]+b*c[3];return m},rotate:function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2];b=b[3];var C=Math.sin(c);c=Math.cos(c);m[0]=u*c+w*C;m[1]=u*-C+w*c;m[2]=A*c+b*C;m[3]=A*-C+b*c;return m},multiplyVec2:function(b,c,m){m||(m=c);var u=c[0];c=c[1];m[0]=u*b[0]+c*b[1];m[1]=u*b[2]+c*b[3];return m},scale:function(b,c,m){m||(m=b);var u=b[1],w=b[2],A=b[3],C=c[0];c=c[1];m[0]=b[0]*C;m[1]=
u*c;m[2]=w*C;m[3]=A*c;return m},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"}},z=a?"":"d";k["glMath"+z]=f;k["vec2"+z]={create:function(b){var c=new g(2);b?(c[0]=b[0],c[1]=b[1]):(c[0]=0,c[1]=0);return c},createFrom:function(b,c){var m=new g(2);m[0]=b;m[1]=c;return m},add:function(b,c,m){m||(m=c);m[0]=b[0]+c[0];m[1]=b[1]+c[1];return m},subtract:function(b,c,m){m||(m=c);m[0]=b[0]-c[0];m[1]=b[1]-c[1];return m},multiply:function(b,c,m){m||(m=c);m[0]=b[0]*c[0];m[1]=b[1]*c[1];return m},
divide:function(b,c,m){m||(m=c);m[0]=b[0]/c[0];m[1]=b[1]/c[1];return m},scale:function(b,c,m){m||(m=b);m[0]=b[0]*c;m[1]=b[1]*c;return m},dist:function(b,c){var m=c[0]-b[0],u=c[1]-b[1];return Math.sqrt(m*m+u*u)},dist2:function(b,c){var m=c[0]-b[0],u=c[1]-b[1];return m*m+u*u},set:function(b,c){c[0]=b[0];c[1]=b[1];return c},set2:function(b,c,m){m[0]=b;m[1]=c;return m},negate:function(b,c){c||(c=b);c[0]=-b[0];c[1]=-b[1];return c},normalize:function(b,c){c||(c=b);var m=b[0]*b[0]+b[1]*b[1];0<m?(m=Math.sqrt(m),
c[0]=b[0]/m,c[1]=b[1]/m):c[0]=c[1]=0;return c},cross:function(b,c,m){b=b[0]*c[1]-b[1]*c[0];if(!m)return b;m[0]=m[1]=0;m[2]=b;return m},length:function(b){var c=b[0];b=b[1];return Math.sqrt(c*c+b*b)},dot:function(b,c){return b[0]*c[0]+b[1]*c[1]},direction:function(b,c,m){m||(m=b);var u=b[0]-c[0];b=b[1]-c[1];c=u*u+b*b;if(!c)return m[0]=0,m[1]=0,m[2]=0,m;c=1/Math.sqrt(c);m[0]=u*c;m[1]=b*c;return m},lerp:function(b,c,m,u){u||(u=b);u[0]=b[0]+m*(c[0]-b[0]);u[1]=b[1]+m*(c[1]-b[1]);return u},str:function(b){return"["+
b[0]+", "+b[1]+"]"}};k["vec3"+z]=p;k["vec4"+z]={create:function(b){var c=new g(4);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3]):(c[0]=0,c[1]=0,c[2]=0,c[3]=0);return c},createFrom:function(b,c,m,u){var w=new g(4);w[0]=b;w[1]=c;w[2]=m;w[3]=u;return w},add:function(b,c,m){m||(m=c);m[0]=b[0]+c[0];m[1]=b[1]+c[1];m[2]=b[2]+c[2];m[3]=b[3]+c[3];return m},subtract:function(b,c,m){m||(m=c);m[0]=b[0]-c[0];m[1]=b[1]-c[1];m[2]=b[2]-c[2];m[3]=b[3]-c[3];return m},multiply:function(b,c,m){m||(m=c);m[0]=b[0]*c[0];m[1]=
b[1]*c[1];m[2]=b[2]*c[2];m[3]=b[3]*c[3];return m},divide:function(b,c,m){m||(m=c);m[0]=b[0]/c[0];m[1]=b[1]/c[1];m[2]=b[2]/c[2];m[3]=b[3]/c[3];return m},scale:function(b,c,m){m||(m=b);m[0]=b[0]*c;m[1]=b[1]*c;m[2]=b[2]*c;m[3]=b[3]*c;return m},dot:function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c},set4:function(b,c,m,u,w){w[0]=b;w[1]=c;w[2]=m;w[3]=u;return w},negate:function(b,c){c||(c=b);c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];
c[3]=-b[3];return c},lerp:function(b,c,m,u){u||(u=b);u[0]=b[0]+m*(c[0]-b[0]);u[1]=b[1]+m*(c[1]-b[1]);u[2]=b[2]+m*(c[2]-b[2]);u[3]=b[3]+m*(c[3]-b[3]);return u},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"}};k["mat2"+z]=B;k["mat3"+z]=q;k["mat4"+z]=v;k["quat4"+z]=x});return D})},"esri/layers/vectorTiles/views/3d/support/mathUtils":function(){define(["require","exports","../lib/glMatrix"],function(D,k,a){function f(h){return Math.asin(1<h?1:-1>h?-1:h)}function g(h){return Math.acos(1<
h?1:-1>h?-1:h)}function p(h,t,r){return h<t?t:h>r?r:h}function n(h){for(var t in h){var r=h[t];r instanceof Function&&(h[t]=r.bind(h))}return h}Object.defineProperty(k,"__esModule",{value:!0});k.deg2rad=function(h){return h*Math.PI/180};k.rad2deg=function(h){return 180*h/Math.PI};k.asin=f;k.acos=g;k.sign=Math.sign||function(h){return+(0<h)-+(0>h)||+h};k.log2=Math.log2||function(h){return Math.log(h)/Math.LN2};k.fovx2fovy=function(h,t,r){return 2*Math.atan(r*Math.tan(.5*h)/t)};k.fovy2fovx=function(h,
t,r){return 2*Math.atan(t*Math.tan(.5*h)/r)};k.makeOrthonormal=function(h,t,r){r=r||h;var q=a.vec3d.dot(h,t);a.vec3d.set3(h[0]-q*t[0],h[1]-q*t[1],h[2]-q*t[2],r);a.vec3d.normalize(r)};k.tangentFrame=function(h,t,r){Math.abs(h[0])>Math.abs(h[1])?a.vec3d.set3(0,1,0,t):a.vec3d.set3(1,0,0,t);a.vec3d.cross(h,t,r);a.vec3d.normalize(t);a.vec3d.cross(r,h,t);a.vec3d.normalize(r)};k.cartesianToSpherical=function(h,t){var r=a.vec3d.length(h),q=f(h[2]/r);a.vec3d.set3(r,q,Math.atan2(h[1]/r,h[0]/r),t)};k.sphericalToCartesian=
function(h,t){var r=h[0],q=h[1],v=h[2],x=Math.cos(q);a.vec3d.set3(r*x*Math.cos(v),r*x*Math.sin(v),r*Math.sin(q),t)};k.lerp=function(h,t,r){return h+(t-h)*r};k.bilerp=function(h,t,r,q,v,x){h+=(t-h)*v;return h+(r+(q-r)*v-h)*x};k.slerp=function(h,t,r,q){void 0===q&&(q=h);var v=a.vec3d.length(h),x=a.vec3d.length(t),y=a.vec3d.dot(h,t)/(v*x);if(.9999999999999999>y){y=Math.acos(y);var B=((1-r)*v+r*x)/Math.sin(y);x=B/x*Math.sin(r*y);a.vec3d.scale(h,B/v*Math.sin((1-r)*y),e);a.vec3d.scale(t,x,l);return a.vec3d.add(e,
l,q)}return a.vec3d.lerp(h,t,r,q)};k.angle=function(h,t,r){h=a.vec3d.normalize(h,e);t=a.vec3d.normalize(t,l);var q=g(a.vec3d.dot(h,t));return r&&(h=a.vec3d.cross(h,t,d),0>a.vec3d.dot(h,r))?-q:q};k.clamp=p;k.isFinite=Number.isFinite||function(h){return"number"===typeof h&&window.isFinite(h)};k.isNaN=Number.isNaN||function(h){return h!==h};k.makePiecewiseLinearFunction=function(h){var t=h.length;return function(r){var q=0;if(r<=h[0][0])return h[0][1];if(r>=h[t-1][0])return h[t-1][1];for(;r>h[q][0];)q++;
var v=h[q][0];r=(v-r)/(v-h[q-1][0]);return r*h[q-1][1]+(1-r)*h[q][1]}};k.vectorEquals=function(h,t){if(null==h||null==t)return h!==t;if(h.length!==t.length)return!1;for(var r=0;r<h.length;r++)if(h[r]!==t[r])return!1;return!0};k.floatEqualRelative=function(h,t,r){void 0===r&&(r=1E-6);if(k.isNaN(h)||k.isNaN(t))return!1;if(h===t)return!0;var q=Math.abs(h-t),v=Math.abs(h),x=Math.abs(t);if(0===h||0===t||1E-12>v&&1E-12>x){if(q>.01*r)return!1}else if(q/(v+x)>r)return!1;return!0};k.floatEqualAbsolute=function(h,
t,r){void 0===r&&(r=1E-6);return k.isNaN(h)||k.isNaN(t)?!1:(h>t?h-t:t-h)<=r};D=function(){function h(t,r){this.min=t;this.max=r;this.range=r-t}h.prototype.ndiff=function(t,r){void 0===r&&(r=0);return Math.ceil((t-r)/this.range)*this.range+r};h.prototype._normalize=function(t,r,q,v){void 0===v&&(v=0);q-=v;q<t?q+=this.ndiff(t-q):q>r&&(q-=this.ndiff(q-r));return q+v};h.prototype.normalize=function(t,r){return this._normalize(this.min,this.max,t,r)};h.prototype.clamp=function(t,r){void 0===r&&(r=0);return p(t-
r,this.min,this.max)+r};h.prototype.monotonic=function(t,r,q){return t<r?r:r+this.ndiff(t-r,q)};h.prototype.minimalMonotonic=function(t,r,q){return this._normalize(t,t+this.range,r,q)};h.prototype.center=function(t,r,q){r=this.monotonic(t,r,q);return this.normalize((t+r)/2,q)};h.prototype.diff=function(t,r,q){return this.monotonic(t,r,q)-t};h.prototype.contains=function(t,r,q){r=this.minimalMonotonic(t,r);q=this.minimalMonotonic(t,q);return q>t&&q<r};return h}();k.Cyclical=D;k.cyclical2PI=n(new D(0,
2*Math.PI));k.cyclicalPI=n(new D(-Math.PI,Math.PI));k.cyclicalDeg=n(new D(0,360));var d=a.vec3d.create(),e=a.vec3d.create(),l=a.vec3d.create()})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require","exports","../Utils","../util/Writer"],function(D,k,a,f){Object.defineProperty(k,"__esModule",{value:!0});var g=function(){function p(n,d){this.data=n;this.stride=d;this.vertexCount=0}p.prototype.transfer=function(n,d){var e=this.data.buffer();n.vertexCount=this.vertexCount;
n.data=e;n.stride=this.stride;d.push(e)};return p}();k["default"]=g;D=function(){function p(n,d,e){this.geometryType=n;this.indexVector=new f["default"](Uint32Array,e);this.namedVectors={};n=a.getStrides(n,d);for(var l in n){d=n[l];var h=new f["default"](Uint32Array,d/4*e);this.namedVectors[l]=new g(h,d)}}p.prototype.get=function(n){return this.namedVectors[n].data};p.prototype.transfer=function(n,d){var e=this.indexVector.buffer(),l={};d.push(e);for(var h in this.namedVectors){var t=this.namedVectors[h];
l[h]={};t.transfer(l[h],d)}n.geometryType=this.geometryType;n.indexBuffer=e;n.namedBuffers=l;this.destroy()};p.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return p}();k.VertexVectors=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=function(){function f(g,p){this._pos=0;var n=p?this._roundToNearest4(p):40;this._array=new ArrayBuffer(n);this._buffer=
new g(this._array);this._ctor=g}Object.defineProperty(f.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});f.prototype._roundToNearest4=function(g){g=Math.round(g);return g+(4-g%4)};f.prototype._ensureSize=function(g){if(this._pos+g>=this._buffer.length){g=this._roundToNearest4(1.5*(this._array.byteLength+4*g));g=new ArrayBuffer(g);var p=new this._ctor(g);p.set(this._buffer,0);this._array=g;this._buffer=p}};f.prototype.writeInt32=function(g){this._ensureSize(1);var p=
this._pos;this._buffer[this._pos++]=g;return p};f.prototype.writeF32=function(g){this._ensureSize(1);var p=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=g;this._pos++;return p};f.prototype.writeUint32=function(g){this._ensureSize(1);var p=this._pos;this._buffer[this._pos++]=g;return p};f.prototype.push=function(g){this._ensureSize(1);var p=this._pos;this._buffer[this._pos++]=g;return p};f.prototype.writeRegion=function(g){this._ensureSize(g.length);var p=this._pos;this._buffer.set(g,
this._pos);this._pos+=g.length;return p};f.prototype.buffer=function(){var g=this._array.slice(0,4*this._pos);this.destroy();return g};f.prototype.destroy=function(){this._buffer=this._array=null};return f}();k["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/meshTemplateUtils":function(){define("require exports ../../../../../../core/Logger ../../enums ../templates/WGLFillTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../templates/WGLTextTemplate ../../util/vvFlagUtils".split(" "),
function(D,k,a,f,g,p,n,d,e){Object.defineProperty(k,"__esModule",{value:!0});var l=a.getLogger("esri.views.2d.engine.webgl.mesh.templates.meshTemplateUtils");k.createMeshTemplates=function(h,t,r,q,v,x,y){void 0===y&&(y=!1);if(-1!==r.type.indexOf("3d"))return l.error("3D symbols are not supported with MapView"),h;var B=q.get(r.id);B||l.error("Couldn't find texture resources for symbol: "+r.id+"!");switch(r.type){case f.EsriSymbolTypeKebab.SIMPLE_MARKER:return h.push(n["default"].fromSimpleMarker(t,
e.getMarkerVVFlags(v),r,B.spriteMosaicItem,x)),h;case f.EsriSymbolTypeKebab.PICTURE_MARKER:return h.push(n["default"].fromPictureMarker(t,e.getMarkerVVFlags(v),r,B.spriteMosaicItem,x)),h;case f.EsriSymbolTypeKebab.SIMPLE_FILL:return h.push(g["default"].fromSimpleFill(t,e.getFillVVFlags(v),r,B.spriteMosaicItem,x,y)),r.outline&&(q=q.get(r.outline.id),h.push(p["default"].fromSimpleLine(t,e.getLineVVFlags(v,!0),r.outline,q&&q.spriteMosaicItem,x))),h;case f.EsriSymbolTypeKebab.PICTURE_FILL:return h.push(g["default"].fromPictureFill(t,
e.getFillVVFlags(v),r,B.spriteMosaicItem,x,y)),r.outline&&(q=q.get(r.outline.id),h.push(p["default"].fromSimpleLine(t,e.getLineVVFlags(v,!0),r.outline,q&&q.spriteMosaicItem,x))),h;case f.EsriSymbolTypeKebab.SIMPLE_LINE:return h.push(p["default"].fromSimpleLine(t,e.getLineVVFlags(v,!1),r,B.spriteMosaicItem,x)),h;case f.EsriSymbolTypeKebab.TEXT:return h.push(d["default"].fromText(t,e.getTextVVFlags(v),r,x,B.glyphMosaicItems)),h;default:return l.error("Unable to create mesh template for unknown symbol type: "+
r.type),h}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper dojo/has ../../../../../../core/Logger ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../Tesselator ./WGLMeshTemplate".split(" "),function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v){Object.defineProperty(k,"__esModule",{value:!0});var x=
g.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),y=[],B=[];D=function(z){function b(c,m,u,w,A,C,E,G){var F=z.call(this)||this;F.fillColor=w;F.tl=A;F.br=C;F.aux=E;F.isBFS=G;F.geometryType=e.WGLGeometryType.FILL;F.useLibtess=!1;w=f("esri-featurelayer-webgl");F.useLibtess="libtess"===((w||{}).tesselator||"libtess");F.useLibtess&&(F._tesselator=new q["default"]);F.vvFlags=m;F._materialStore=c;F.materialId=F._materialStore.createSpriteMaterial(u,F.geometryType,m);F._tileClipper=
new t.TileClipper(0,0,0,1,8);F._tileClipper.setExtent(512);return F}a(b,z);b.fromSimpleFill=function(c,m,u,w,A,C){void 0===C&&(C=!1);u=(A=u.color)&&"none"!==u.style&&n.premultiplyAlphaRGBA(A)||0;if(!w)return new b(c,m,null,u,0,0,0,C);var E=w.rect;A=E.x+1;var G=E.y+1,F=E.x+1+w.width,I=E.y+1+w.height;E=h.i1616to32(A,G);var M=h.i1616to32(F,I);A=h.i8888to32(h.nextHighestPowerOfTwo(F-A),h.nextHighestPowerOfTwo(I-G),0,0);return new b(c,m,w,u,E,M,A,C)};b.fromPictureFill=function(c,m,u,w,A,C){void 0===C&&
(C=!1);A=d.PICTURE_FILL_COLOR;var E=w.rect,G=E.x+1+w.width,F=E.y+1+w.height;E=h.i1616to32(E.x+1,E.y+1);G=h.i1616to32(G,F);u=h.i8888to32(h.nextHighestPowerOfTwo(u.width),h.nextHighestPowerOfTwo(u.height),0,0);return new b(c,m,w,A,E,G,u,C)};b.prototype.writeMesh=function(c,m,u,w,A,C,E){y.length=0;if(this.vvFlags&l.WGLVVFlag.COLOR||0!==this.fillColor)if("esriGeometryPolygon"!==u)x.error("Unable to handle geometryType: "+u);else{var G=A.geometry;G=(A=this._isClippingRequired(G))?this._clip(G,!this.useLibtess):
G.rings;return this.useLibtess?this._writeMeshLibtess(c,m,u,w,G,A,C,E):this._writeMeshEarcut(c,m,u,w,G,A,C,E)}};b.prototype._isClippingRequired=function(c){var m=0;for(c=c.rings;m<c.length;m++){var u=c[m],w=u.length;if(!(3>w)){var A=u[0][0],C=u[0][1];if(-8>A||520<A||-8>C||520<C)return!0;for(var E=1;E<w;++E)if(A+=u[E][0],C+=u[E][1],-8>A||520<A||-8>C||520<C)return!0}}return!1};b.prototype._clip=function(c,m){this._tileClipper.reset(3);for(var u=0,w=c.rings;u<w.length;u++){var A=w[u],C=A.length;if(!(3>
C)){var E=A[0][0];var G=A[0][1];this._tileClipper.moveTo(E,G);for(var F=1;F<C;++F)E+=A[F][0],G+=A[F][1],this._tileClipper.lineTo(E,G);this._tileClipper.close()}}return this._tileClipper.result(m)};b.prototype._writeMeshLibtess=function(c,m,u,w,A,C,E,G){if(A&&A.length){u=this._materialStore.get(this.materialId);E=[];var F=m.indexVector;m=m.get("geometry");var I=new r(w,this.geometryType,this.materialId),M=this._getOffset(m,u);I.vertexFrom=M;I.indexFrom=F.length;c.push(I);this._tesselator.beginPolygon(y,
E);for(c=0;c<A.length;c++){var Y=A[c];if(!(3>Y.length)){this._tesselator.beginContour();var R=void 0,S=void 0;C?(R=Y[0].x,S=Y[0].y):(R=Y[0][0],S=Y[0][1]);var O=[R,S,0];this._tesselator.addVertex(O,O);for(O=1;O<Y.length-1;O++){var L=void 0,P=void 0;C?(R=Y[O].x,S=Y[O].y):(L=Y[O][0],P=Y[O][1],R+=L,S+=P);L=[R,S,0];this._tesselator.addVertex(L,L)}this._tesselator.endContour()}}this._tesselator.endPolygon();this._writeVerticesLibTess(I,m,w,y,u,G);this._writeIndicesLibTess(I,F,M,E)}};b.prototype._writeMeshEarcut=
function(c,m,u,w,A,C,E,G){if(A&&A.length){u=this._materialStore.get(this.materialId);E=m.indexVector;m=m.get("geometry");var F=new r(w,this.geometryType,this.materialId),I=this._getOffset(m,u);F.vertexFrom=I;F.indexFrom=E.length;c.push(F);for(var M=c=0,Y=0;Y<A.length;Y++){var R=A[Y],S=M,O=void 0,L=void 0;C?(O=R[0].x,L=R[0].y):(O=R[0][0],L=R[0][1]);y[M++]=O;y[M++]=L;for(var P=0,X=1;X<R.length;++X){var Q=void 0,K=void 0;C?(Q=O,K=L,O=R[X].x,L=R[X].y,Q=O-Q,K=L-K):(Q=R[X][0],K=R[X][1],O+=Q,L+=K);P-=Q*
(L+L+K);y[M++]=O;y[M++]=L}0<P?(0<S-c&&(this._write(F,E,m,I,w,y,B,c,S,u,G),c=S),B.length=0):0>P?0<S-c?B.push(.5*(S-c)):M=S:M=S}0<M-c&&this._write(F,E,m,I,w,y,B,c,M,u,G);y.length=B.length=0}};b.prototype._write=function(c,m,u,w,A,C,E,G,F,I,M){w=p(C.slice(G,F),E,2);w.length&&(G=this._getOffset(u,I),this._writeVertices(c,u,A,C,E,I,M),this._writeIndices(c,m,G,w))};b.prototype._getOffset=function(c,m){var u=m.materialKeyInfo.hasVV()?8:6;return c.length/u};b.prototype._writeVertices=function(c,m,u,w,A,C,
E){for(A=0;A<w.length;A+=2){var G=h.i1616to32(w[A],w[A+1]);m.push(G);m.push(u);m.push(this.fillColor);m.push(this.tl);m.push(this.br);m.push(this.aux);this._writeVV(m,E,C);c.vertexCount++}};b.prototype._writeIndices=function(c,m,u,w){for(var A=0;A<w.length;A+=3)m.push(u+w[A]),m.push(u+w[A+1]),m.push(u+w[A+2]),c.indexCount+=3};b.prototype._writeVerticesLibTess=function(c,m,u,w,A,C){for(var E=0;E<w.length;E+=2){var G=h.i1616to32(w[E],w[E+1]);m.push(G);m.push(u);m.push(this.fillColor);m.push(this.tl);
m.push(this.br);m.push(this.aux);this._writeVV(m,C,A);c.vertexCount++}};b.prototype._writeIndicesLibTess=function(c,m,u,w){for(var A=0;A<w.length;A++)m.push(u+w[A]),c.indexCount++};b.prototype._writeVV=function(c,m,u){u.materialKeyInfo.hasVV()&&(this.isBFS?(c.push(4294967295),c.push(4294967295)):(c.push(m[e.VVType.COLOR]),c.push(m[e.VVType.OPACITY])))};return b}(v["default"]);k["default"]=D})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function D(m,u,w){w=w||
2;b=m.length/w+(u?2*u.length:0);c=!1;var A=u&&u.length,C=A?u[0]*w:m.length,E=k(m,0,C,w,!0),G=[];if(!E)return G;var F;if(A)a:{var I=w;A=[];var M;var Y=0;for(M=u.length;Y<M;Y++){var R=u[Y]*I;var S=Y<M-1?u[Y+1]*I:m.length;R=k(m,R,S,I,!1);R===R.next&&(R.steiner=!0);A.push(e(R))}A.sort(p);for(Y=0;Y<A.length;Y++){if(!E){E=null;break a}u=A[Y];I=E;if(I=n(u,I))u=v(I,u),a(u,u.next);E=a(E,E.next)}}if(c)return G;if(m.length>80*w){var O=F=m[0];var L=A=m[1];for(I=w;I<C;I+=w)Y=m[I],u=m[I+1],Y<O&&(O=Y),u<L&&(L=u),
Y>F&&(F=Y),u>A&&(A=u);F=Math.max(F-O,A-L)}f(E,G,w,O,L,F);return G}function k(m,u,w,A,C){if(C===0<z(m,u,w,A))for(C=u;C<w;C+=A)var E=x(C,m[C],m[C+1],E);else for(C=w-A;C>=u;C-=A)E=x(C,m[C],m[C+1],E);E&&t(E,E.next)&&(y(E),E=E.next);return E}function a(m,u){if(!m)return m;u||(u=m);var w=m,A=0,C=b*b/2;do{var E=!1;if(w.steiner||!t(w,w.next)&&0!==h(w.prev,w,w.next))w=w.next;else{y(w);w=u=w.prev;if(w===w.next)return null;E=!0}if(A++>C)return c=!0,null}while(E||w!==u);return u}function f(m,u,w,A,C,E,G){if(m){if(!G&&
E){var F=m,I=F;do null===I.z&&(I.z=d(I.x,I.y,A,C,E)),I.prevZ=I.prev,I=I.nextZ=I.next;while(I!==F);I.prevZ.nextZ=null;I.prevZ=null;F=I;var M,Y,R,S,O=1;do{I=F;var L=F=null;for(Y=0;I;){Y++;var P=I;for(M=R=0;M<O&&(R++,P=P.nextZ,P);M++);for(S=O;0<R||0<S&&P;)0===R?(M=P,P=P.nextZ,S--):0!==S&&P?I.z<=P.z?(M=I,I=I.nextZ,R--):(M=P,P=P.nextZ,S--):(M=I,I=I.nextZ,R--),L?L.nextZ=M:F=M,M.prevZ=L,L=M;I=P}L.nextZ=null;O*=2}while(1<Y)}for(F=m;m.prev!==m.next;){I=m.prev;P=m.next;if(E)a:{L=m;S=A;var X=C,Q=E;Y=L.prev;
R=L;O=L.next;if(0<=h(Y,R,O))L=!1;else{var K=Y.x>R.x?Y.x>O.x?Y.x:O.x:R.x>O.x?R.x:O.x,U=Y.y>R.y?Y.y>O.y?Y.y:O.y:R.y>O.y?R.y:O.y;M=d(Y.x<R.x?Y.x<O.x?Y.x:O.x:R.x<O.x?R.x:O.x,Y.y<R.y?Y.y<O.y?Y.y:O.y:R.y<O.y?R.y:O.y,S,X,Q);S=d(K,U,S,X,Q);for(X=L.nextZ;X&&X.z<=S;){if(X!==L.prev&&X!==L.next&&l(Y.x,Y.y,R.x,R.y,O.x,O.y,X.x,X.y)&&0<=h(X.prev,X,X.next)){L=!1;break a}X=X.nextZ}for(X=L.prevZ;X&&X.z>=M;){if(X!==L.prev&&X!==L.next&&l(Y.x,Y.y,R.x,R.y,O.x,O.y,X.x,X.y)&&0<=h(X.prev,X,X.next)){L=!1;break a}X=X.prevZ}L=
!0}}else L=g(m);if(L)u.push(I.i/w),u.push(m.i/w),u.push(P.i/w),y(m),F=m=P.next;else{if(c)break;m=P;if(m===F){if(!G)f(a(m),u,w,A,C,E,1);else if(1===G){G=u;F=w;I=m;do P=I.prev,L=I.next.next,!t(P,L)&&r(P,I,I.next,L)&&q(P,L)&&q(L,P)&&(G.push(P.i/F),G.push(I.i/F),G.push(L.i/F),y(I),y(I.next),I=m=L),I=I.next;while(I!==m);m=I;f(m,u,w,A,C,E,2)}else if(2===G)a:{G=m;do{for(F=G.next.next;F!==G.prev;){if(I=G.i!==F.i){L=L=L=void 0;I=G;P=F;if(L=I.next.i!==P.i&&I.prev.i!==P.i){b:{L=I;do{if(L.i!==I.i&&L.next.i!==
I.i&&L.i!==P.i&&L.next.i!==P.i&&r(L,L.next,I,P)){L=!0;break b}L=L.next}while(L!==I);L=!1}L=!L}if(L=L&&q(I,P)&&q(P,I)){L=I;Y=!1;R=(I.x+P.x)/2;P=(I.y+P.y)/2;do L.y>P!==L.next.y>P&&R<(L.next.x-L.x)*(P-L.y)/(L.next.y-L.y)+L.x&&(Y=!Y),L=L.next;while(L!==I);L=Y}I=L}if(I){m=v(G,F);G=a(G,G.next);m=a(m,m.next);f(G,u,w,A,C,E);f(m,u,w,A,C,E);break a}F=F.next}G=G.next}while(G!==m)}break}}}}}function g(m){var u=m.prev,w=m.next;if(0<=h(u,m,w))return!1;for(var A=m.next.next,C=0;A!==m.prev;){if(l(u.x,u.y,m.x,m.y,
w.x,w.y,A.x,A.y)&&0<=h(A.prev,A,A.next))return!1;A=A.next;if(C++>b)return c=!0,!1}return!0}function p(m,u){return m.x-u.x}function n(m,u){var w=u,A=m.x,C=m.y,E=-Infinity;do{if(!w)return null;if(C<=w.y&&C>=w.next.y){var G=w.x+(C-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(G<=A&&G>E){E=G;if(G===A){if(C===w.y)return w;if(C===w.next.y)return w.next}var F=w.x<w.next.x?w:w.next}}w=w.next}while(w!==u);if(!F)return null;if(A===E)return F.prev;G=F;var I=F.x,M=F.y,Y=Infinity;for(w=F.next;w!==G;){if(A>=w.x&&w.x>=
I&&l(C<M?A:E,C,I,M,C<M?E:A,C,w.x,w.y)){var R=Math.abs(C-w.y)/(A-w.x);(R<Y||R===Y&&w.x>F.x)&&q(w,m)&&(F=w,Y=R)}w=w.next}return F}function d(m,u,w,A,C){m=32767*(m-w)/C;u=32767*(u-A)/C;m=(m|m<<8)&16711935;m=(m|m<<4)&252645135;m=(m|m<<2)&858993459;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;return(m|m<<1)&1431655765|((u|u<<1)&1431655765)<<1}function e(m){var u=m,w=m;do u.x<w.x&&(w=u),u=u.next;while(u!==m);return w}function l(m,u,w,A,C,E,G,F){return 0<=(C-G)*(u-F)-(m-G)*(E-F)&&0<=(m-
G)*(A-F)-(w-G)*(u-F)&&0<=(w-G)*(E-F)-(C-G)*(A-F)}function h(m,u,w){return(u.y-m.y)*(w.x-u.x)-(u.x-m.x)*(w.y-u.y)}function t(m,u){return m.x===u.x&&m.y===u.y}function r(m,u,w,A){return t(m,u)&&t(w,A)||t(m,A)&&t(w,u)?!0:0<h(m,u,w)!==0<h(m,u,A)&&0<h(w,A,m)!==0<h(w,A,u)}function q(m,u){return 0>h(m.prev,m,m.next)?0<=h(m,u,m.next)&&0<=h(m,m.prev,u):0>h(m,u,m.prev)||0>h(m,m.next,u)}function v(m,u){var w=new B(m.i,m.x,m.y),A=new B(u.i,u.x,u.y),C=m.next,E=u.prev;m.next=u;u.prev=m;w.next=C;C.prev=w;A.next=
w;w.prev=A;E.next=A;A.prev=E;return A}function x(m,u,w,A){m=new B(m,u,w);A?(m.next=A.next,m.prev=A,A.next.prev=m,A.next=m):(m.prev=m,m.next=m);return m}function y(m){m.next.prev=m.prev;m.prev.next=m.next;m.prevZ&&(m.prevZ.nextZ=m.nextZ);m.nextZ&&(m.nextZ.prevZ=m.prevZ)}function B(m,u,w){this.i=m;this.x=u;this.y=w;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function z(m,u,w,A){for(var C=0,E=w-A;u<w;u+=A)C+=(m[E]-m[u])*(m[u+1]+m[E+1]),E=u;return C}var b,c;D.deviation=function(m,
u,w,A){var C=u&&u.length,E=Math.abs(z(m,0,C?u[0]*w:m.length,w));if(C){C=0;for(var G=u.length;C<G;C++)E-=Math.abs(z(m,u[C]*w,C<G-1?u[C+1]*w:m.length,w))}for(C=u=0;C<A.length;C+=3){G=A[C]*w;var F=A[C+1]*w,I=A[C+2]*w;u+=Math.abs((m[G]-m[I])*(m[F+1]-m[G+1])-(m[G]-m[F])*(m[I+1]-m[G+1]))}return 0===E&&0===u?0:Math.abs((u-E)/E)};D.flatten=function(m){for(var u=m[0][0].length,w={vertices:[],holes:[],dimensions:u},A=0,C=0;C<m.length;C++){for(var E=0;E<m[C].length;E++)for(var G=0;G<u;G++)w.vertices.push(m[C][E][G]);
0<C&&(A+=m[C-1].length,w.holes.push(A))}return w};return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(D,k,a,f){Object.defineProperty(k,"__esModule",{value:!0});var g=function(){return function(n,d,e){this.ratio=n;this.x=d;this.y=e}}();D=function(){function n(d,e,l,h,t){void 0===h&&(h=8);void 0===t&&(t=8);this.lines=[];this.starts=[];this.pixelRatio=h;this.pixelMargin=t;this.tileSize=512*h;this.dz=d;
this.yPos=e;this.xPos=l}n.prototype.setExtent=function(d){this.finalRatio=this.tileSize/d*(1<<this.dz);var e=this.pixelRatio*this.pixelMargin;e/=this.finalRatio;d>>=this.dz;e>d&&(e=d);this.margin=e;this.xmin=d*this.xPos-e;this.ymin=d*this.yPos-e;this.xmax=this.xmin+d+2*e;this.ymax=this.ymin+d+2*e};n.prototype.reset=function(d){this.type=d;this.lines=[];this.starts=[];this.line=null;this.start=0};n.prototype.moveTo=function(d,e){this._pushLine();this._prevIsIn=this._isIn(d,e);this._moveTo(d,e,this._prevIsIn);
this._prevPt=new a.Point(d,e);this._firstPt=new a.Point(d,e);this._dist=0};n.prototype.lineTo=function(d,e){var l=this._isIn(d,e),h=new a.Point(d,e),t=a.Point.distance(this._prevPt,h),r;if(l)if(this._prevIsIn)this._lineTo(d,e,!0);else{var q=this._prevPt;var v=h;var x=this._intersect(v,q);this.start=this._dist+t*(1-this._r);this._lineTo(x.x,x.y,!0);this._lineTo(v.x,v.y,!0)}else if(this._prevIsIn)v=this._prevPt,q=h,x=this._intersect(v,q),this._lineTo(x.x,x.y,!0),this._lineTo(q.x,q.y,!1);else{var y=
this._prevPt;if(!(y.x<=this.xmin&&h.x<=this.xmin||y.x>=this.xmax&&h.x>=this.xmax||y.y<=this.ymin&&h.y<=this.ymin||y.y>=this.ymax&&h.y>=this.ymax)){q=[];if(y.x<this.xmin&&h.x>this.xmin||y.x>this.xmin&&h.x<this.xmin){v=(this.xmin-y.x)/(h.x-y.x);var B=y.y+v*(h.y-y.y);B<=this.ymin?r=!1:B>=this.ymax?r=!0:q.push(new g(v,this.xmin,B))}if(y.x<this.xmax&&h.x>this.xmax||y.x>this.xmax&&h.x<this.xmax)v=(this.xmax-y.x)/(h.x-y.x),B=y.y+v*(h.y-y.y),B<=this.ymin?r=!1:B>=this.ymax?r=!0:q.push(new g(v,this.xmax,B));
if(y.y<this.ymin&&h.y>this.ymin||y.y>this.ymin&&h.y<this.ymin)v=(this.ymin-y.y)/(h.y-y.y),B=y.x+v*(h.x-y.x),B<=this.xmin?x=!1:B>=this.xmax?x=!0:q.push(new g(v,B,this.ymin));if(y.y<this.ymax&&h.y>this.ymax||y.y>this.ymax&&h.y<this.ymax)v=(this.ymax-y.y)/(h.y-y.y),B=y.x+v*(h.x-y.x),B<=this.xmin?x=!1:B>=this.xmax?x=!0:q.push(new g(v,B,this.ymax));if(0===q.length)x?r?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):r?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,
this.ymin,!0);else if(1<q.length&&q[0].ratio>q[1].ratio)this.start=this._dist+t*q[1].ratio,this._lineTo(q[1].x,q[1].y,!0),this._lineTo(q[0].x,q[0].y,!0);else for(this.start=this._dist+t*q[0].ratio,v=0;v<q.length;v++)this._lineTo(q[v].x,q[v].y,!0)}this._lineTo(h.x,h.y,!1)}this._dist+=t;this._prevIsIn=l;this._prevPt=h};n.prototype.close=function(){if(2<this.line.length){var d=this._firstPt,e=this._prevPt;d.x===e.x&&d.y===e.y||this.lineTo(d.x,d.y);d=this.line;for(e=d.length;4<=e;)if(d[0].x===d[1].x&&
d[0].x===d[e-2].x||d[0].y===d[1].y&&d[0].y===d[e-2].y)d.pop(),d[0].x=d[e-2].x,d[0].y=d[e-2].y,--e;else break}};n.prototype.result=function(d){void 0===d&&(d=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&d&&p.simplify(this.tileSize,this.margin*this.finalRatio,this.lines);return this.lines};n.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var d=this.lines,e=d.length;if(0===e)return null;for(var l=[],h=0;h<e;h++)l.push({line:d[h],
start:this.starts[h]||0});return l};n.prototype._isIn=function(d,e){return d>=this.xmin&&d<=this.xmax&&e>=this.ymin&&e<=this.ymax};n.prototype._intersect=function(d,e){if(e.x>=this.xmin&&e.x<=this.xmax){var l=e.y<=this.ymin?this.ymin:this.ymax;var h=(l-d.y)/(e.y-d.y);var t=d.x+h*(e.x-d.x)}else if(e.y>=this.ymin&&e.y<=this.ymax)t=e.x<=this.xmin?this.xmin:this.xmax,h=(t-d.x)/(e.x-d.x),l=d.y+h*(e.y-d.y);else{l=e.y<=this.ymin?this.ymin:this.ymax;t=e.x<=this.xmin?this.xmin:this.xmax;var r=(t-d.x)/(e.x-
d.x),q=(l-d.y)/(e.y-d.y);r<q?(h=r,l=d.y+r*(e.y-d.y)):(h=q,t=d.x+q*(e.x-d.x))}this._r=h;return new a.Point(t,l)};n.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};n.prototype._moveTo=function(d,e,l){3!==
this.type?l&&(d=Math.round((d-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line.push(new a.Point(d,e))):(l||(d<this.xmin&&(d=this.xmin),d>this.xmax&&(d=this.xmax),e<this.ymin&&(e=this.ymin),e>this.ymax&&(e=this.ymax)),d=Math.round((d-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line.push(new a.Point(d,e)),this._is_v=this._is_h=!1)};n.prototype._lineTo=function(d,e,l){if(3!==this.type)if(l){d=
Math.round((d-(this.xmin+this.margin))*this.finalRatio);e=Math.round((e-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(l=this.line[this.line.length-1],l.equals(d,e)))return;this.line.push(new a.Point(d,e))}else this.line&&0<this.line.length&&this._pushLine();else if(l||(d<this.xmin&&(d=this.xmin),d>this.xmax&&(d=this.xmax),e<this.ymin&&(e=this.ymin),e>this.ymax&&(e=this.ymax)),d=Math.round((d-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),
this.line&&0<this.line.length){l=this.line[this.line.length-1];var h=l.x===d,t=l.y===e;h&&t||(this._is_h&&h?(l.x=d,l.y=e,l=this.line[this.line.length-2],l.x===d&&l.y===e?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(l=this.line[this.line.length-2],this._is_h=l.x===d,this._is_v=l.y===e)):(this._is_h=l.x===d,this._is_v=l.y===e)):this._is_v&&t?(l.x=d,l.y=e,l=this.line[this.line.length-2],l.x===d&&l.y===e?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(l=this.line[this.line.length-
2],this._is_h=l.x===d,this._is_v=l.y===e)):(this._is_h=l.x===d,this._is_v=l.y===e)):(this.line.push(new a.Point(d,e)),this._is_h=h,this._is_v=t))}else this.line.push(new a.Point(d,e))};return n}();k.TileClipper=D;D=function(){function n(){}n.prototype.setExtent=function(d){this._ratio=4096===d?1:4096/d};n.prototype.reset=function(d){this.type=d;this.lines=[];this.line=null};n.prototype.moveTo=function(d,e){this.line&&this.lines.push(this.line);this.line=[];var l=this._ratio;this.line.push(new a.Point(d*
l,e*l))};n.prototype.lineTo=function(d,e){var l=this._ratio;this.line.push(new a.Point(d*l,e*l))};n.prototype.close=function(){var d=this.line;d&&!d[0].isEqual(d[d.length-1])&&d.push(d[0])};n.prototype.result=function(){this.line&&this.lines.push(this.line);return 0===this.lines.length?null:this.lines};return n}();k.SimpleBuilder=D;var p=function(){function n(){}n.simplify=function(d,e,l){if(l){var h=-e,t=d+e,r=-e,q=d+e;d=[];e=[];for(var v=l.length,x=0;x<v;++x){var y=l[x];if(y&&!(2>y.length))for(var B=
y[0],z=void 0,b=y.length,c=1;c<b;++c)z=y[c],B.x===z.x&&(B.x<=h&&(B.y>z.y?(d.push(x),d.push(c),d.push(0),d.push(-1)):(e.push(x),e.push(c),e.push(0),e.push(-1))),B.x>=t&&(B.y<z.y?(d.push(x),d.push(c),d.push(1),d.push(-1)):(e.push(x),e.push(c),e.push(1),e.push(-1)))),B.y===z.y&&(B.y<=r&&(B.x<z.x?(d.push(x),d.push(c),d.push(2),d.push(-1)):(e.push(x),e.push(c),e.push(2),e.push(-1))),B.y>=q&&(B.x>z.x?(d.push(x),d.push(c),d.push(3),d.push(-1)):(e.push(x),e.push(c),e.push(3),e.push(-1)))),B=z}0!==d.length&&
0!==e.length&&(n.fillParent(l,e,d),n.fillParent(l,d,e),h=[],n.calcDeltas(h,e,d),n.calcDeltas(h,d,e),n.addDeltas(h,l))}};n.fillParent=function(d,e,l){for(var h=l.length,t=e.length,r=0;r<t;r+=4){var q=e[r],v=e[r+1],x=e[r+2],y=d[q][v-1];q=d[q][v];v=8092;for(var B=-1,z=0;z<h;z+=4)if(l[z+2]===x){var b=l[z],c=l[z+1],m=d[b][c-1];b=d[b][c];switch(x){case 0:case 1:f.between(y.y,m.y,b.y)&&f.between(q.y,m.y,b.y)&&(m=Math.abs(b.y-m.y),m<v&&(v=m,B=z));break;case 2:case 3:f.between(y.x,m.x,b.x)&&f.between(q.x,
m.x,b.x)&&(m=Math.abs(b.x-m.x),m<v&&(v=m,B=z))}}e[r+3]=B}};n.calcDeltas=function(d,e,l){for(var h=e.length,t=0;t<h;t+=4){var r=n.calcDelta(t,e,l,[]);d.push(e[t]);d.push(e[t+1]);d.push(e[t+2]);d.push(r)}};n.calcDelta=function(d,e,l,h){d=e[d+3];if(-1===d)return 0;var t=h.length;if(1<t&&h[t-2]===d)return 0;h.push(d);return n.calcDelta(d,l,e,h)+1};n.addDeltas=function(d,e){for(var l=d.length,h=0,t=0;t<l;t+=4){var r=d[t+3];r>h&&(h=r)}for(t=0;t<l;t+=4){var q=e[d[t]],v=d[t+1];r=h-d[t+3];switch(d[t+2]){case 0:q[v-
1].x-=r;q[v].x-=r;1===v&&(q[q.length-1].x-=r);v===q.length-1&&(q[0].x-=r);break;case 1:q[v-1].x+=r;q[v].x+=r;1===v&&(q[q.length-1].x+=r);v===q.length-1&&(q[0].x+=r);break;case 2:q[v-1].y-=r;q[v].y-=r;1===v&&(q[q.length-1].y-=r);v===q.length-1&&(q[0].y-=r);break;case 3:q[v-1].y+=r,q[v].y+=r,1===v&&(q[q.length-1].y+=r),v===q.length-1&&(q[0].y+=r)}}};return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",
{value:!0});var a=function(){function f(g,p){this.x=g;this.y=p}f.prototype.clone=function(){return new f(this.x,this.y)};f.prototype.equals=function(g,p){return g===this.x&&p===this.y};f.prototype.isEqual=function(g){return g.x===this.x&&g.y===this.y};f.prototype.setCoords=function(g,p){this.x=g;this.y=p};f.prototype.normalize=function(){var g=this.x,p=this.y;g=Math.sqrt(g*g+p*p);this.x/=g;this.y/=g};f.prototype.rightPerpendicular=function(){var g=this.x;this.x=this.y;this.y=-g};f.prototype.move=
function(g,p){this.x+=g;this.y+=p};f.prototype.assign=function(g){this.x=g.x;this.y=g.y};f.prototype.assignAdd=function(g,p){this.x=g.x+p.x;this.y=g.y+p.y};f.prototype.assignSub=function(g,p){this.x=g.x-p.x;this.y=g.y-p.y};f.prototype.rotate=function(g,p){var n=this.x,d=this.y;this.x=n*g-d*p;this.y=n*p+d*g};f.prototype.scale=function(g){this.x*=g;this.y*=g};f.prototype.length=function(){var g=this.x,p=this.y;return Math.sqrt(g*g+p*p)};f.distance=function(g,p){var n=p.x-g.x,d=p.y-g.y;return Math.sqrt(n*
n+d*d)};f.add=function(g,p){return new f(g.x+p.x,g.y+p.y)};f.sub=function(g,p){return new f(g.x-p.x,g.y-p.y)};return f}();k.Point=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(D,k,a,f){Object.defineProperty(k,"__esModule",{value:!0});var g=a.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");D=function(){function p(){this._indexCounter=this._currentVertexIndex=
0;this._triangleIndices=[-1,-1,-1];this.glu=new f.GluTesselator;this.glu.gluTessCallback(f.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_EDGE_FLAG,
this._edgeCallback.bind(this));this.glu.gluTessProperty(f.gluEnum.GLU_TESS_WINDING_RULE,f.windingRule.GLU_TESS_WINDING_ODD)}p.prototype.beginPolygon=function(n,d){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(n);this._indices=d};p.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};p.prototype.beginContour=function(){this.glu.gluTessBeginContour()};p.prototype.endContour=function(){this.glu.gluTessEndContour()};
p.prototype.addVertex=function(n,d){this.glu.gluTessVertex(n,d)};p.prototype._vertexCallback=function(n,d){d[d.length]=n[0];d[d.length]=n[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(var e=0;3>e;e++)-1===this._triangleIndices[e]&&(this._triangleIndices[e]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[e];this._currentVertexIndex=0}else this._currentVertexIndex++};p.prototype._begincallback=function(n){this._triangleIndices[0]=
-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};p.prototype._endcallback=function(){this._currentVertexIndex=0};p.prototype._errorcallback=function(n){g.error("Encountered error during tesselation: "+n)};p.prototype._combinecallback=function(n,d,e){return[n[0],n[1],n[2]]};p.prototype._edgeCallback=function(n){};return p}();k["default"]=D})},"esri/layers/vectorTiles/core/libs/libtess/libtess":function(){define([],function(){var D={DEBUG:!1,assert:function(k,a){if(D.DEBUG&&
!k)throw Error("Assertion failed"+(a?": "+a:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,
GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,
GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};D.geom.vertEq=function(k,a){return k.s===a.s&&k.t===a.t};D.geom.vertLeq=function(k,a){return k.s<a.s||k.s===a.s&&k.t<=a.t};D.geom.edgeEval=function(k,a,f){D.assert(D.geom.vertLeq(k,a)&&D.geom.vertLeq(a,f));var g=a.s-k.s,p=f.s-a.s;return 0<g+p?g<p?a.t-k.t+g/(g+p)*(k.t-f.t):a.t-f.t+p/(g+p)*(f.t-k.t):0};D.geom.edgeSign=function(k,a,f){D.assert(D.geom.vertLeq(k,a)&&D.geom.vertLeq(a,f));var g=a.s-k.s,p=f.s-a.s;return 0<g+p?(a.t-f.t)*g+(a.t-k.t)*
p:0};D.geom.transLeq=function(k,a){return k.t<a.t||k.t===a.t&&k.s<=a.s};D.geom.transEval=function(k,a,f){D.assert(D.geom.transLeq(k,a)&&D.geom.transLeq(a,f));var g=a.t-k.t,p=f.t-a.t;return 0<g+p?g<p?a.s-k.s+g/(g+p)*(k.s-f.s):a.s-f.s+p/(g+p)*(f.s-k.s):0};D.geom.transSign=function(k,a,f){D.assert(D.geom.transLeq(k,a)&&D.geom.transLeq(a,f));var g=a.t-k.t,p=f.t-a.t;return 0<g+p?(a.s-f.s)*g+(a.s-k.s)*p:0};D.geom.edgeGoesLeft=function(k){return D.geom.vertLeq(k.dst(),k.org)};D.geom.edgeGoesRight=function(k){return D.geom.vertLeq(k.org,
k.dst())};D.geom.vertL1dist=function(k,a){return Math.abs(k.s-a.s)+Math.abs(k.t-a.t)};D.geom.vertCCW=function(k,a,f){return 0<=k.s*(a.t-f.t)+a.s*(f.t-k.t)+f.s*(k.t-a.t)};D.geom.interpolate_=function(k,a,f,g){k=0>k?0:k;f=0>f?0:f;return k<=f?0===f?(a+g)/2:a+k/(k+f)*(g-a):g+f/(k+f)*(a-g)};D.geom.edgeIntersect=function(k,a,f,g,p){if(!D.geom.vertLeq(k,a)){var n=k;k=a;a=n}D.geom.vertLeq(f,g)||(n=f,f=g,g=n);D.geom.vertLeq(k,f)||(n=k,k=f,f=n,n=a,a=g,g=n);if(D.geom.vertLeq(f,a))if(D.geom.vertLeq(a,g)){n=D.geom.edgeEval(k,
f,a);var d=D.geom.edgeEval(f,a,g);0>n+d&&(n=-n,d=-d);p.s=D.geom.interpolate_(n,f.s,d,a.s)}else n=D.geom.edgeSign(k,f,a),d=-D.geom.edgeSign(k,g,a),0>n+d&&(n=-n,d=-d),p.s=D.geom.interpolate_(n,f.s,d,g.s);else p.s=(f.s+a.s)/2;D.geom.transLeq(k,a)||(n=k,k=a,a=n);D.geom.transLeq(f,g)||(n=f,f=g,g=n);D.geom.transLeq(k,f)||(n=k,k=f,f=n,n=a,a=g,g=n);D.geom.transLeq(f,a)?D.geom.transLeq(a,g)?(n=D.geom.transEval(k,f,a),d=D.geom.transEval(f,a,g),0>n+d&&(n=-n,d=-d),p.t=D.geom.interpolate_(n,f.t,d,a.t)):(n=D.geom.transSign(k,
f,a),d=-D.geom.transSign(k,g,a),0>n+d&&(n=-n,d=-d),p.t=D.geom.interpolate_(n,f.t,d,g.t)):p.t=(f.t+a.t)/2};D.mesh={};D.mesh.makeEdge=function(k){var a=D.mesh.makeEdgePair_(k.eHead);D.mesh.makeVertex_(a,k.vHead);D.mesh.makeVertex_(a.sym,k.vHead);D.mesh.makeFace_(a,k.fHead);return a};D.mesh.meshSplice=function(k,a){var f=!1,g=!1;k!==a&&(a.org!==k.org&&(g=!0,D.mesh.killVertex_(a.org,k.org)),a.lFace!==k.lFace&&(f=!0,D.mesh.killFace_(a.lFace,k.lFace)),D.mesh.splice_(a,k),g||(D.mesh.makeVertex_(a,k.org),
k.org.anEdge=k),f||(D.mesh.makeFace_(a,k.lFace),k.lFace.anEdge=k))};D.mesh.deleteEdge=function(k){var a=k.sym,f=!1;k.lFace!==k.rFace()&&(f=!0,D.mesh.killFace_(k.lFace,k.rFace()));k.oNext===k?D.mesh.killVertex_(k.org,null):(k.rFace().anEdge=k.oPrev(),k.org.anEdge=k.oNext,D.mesh.splice_(k,k.oPrev()),f||D.mesh.makeFace_(k,k.lFace));a.oNext===a?(D.mesh.killVertex_(a.org,null),D.mesh.killFace_(a.lFace,null)):(k.lFace.anEdge=a.oPrev(),a.org.anEdge=a.oNext,D.mesh.splice_(a,a.oPrev()));D.mesh.killEdge_(k)};
D.mesh.addEdgeVertex=function(k){var a=D.mesh.makeEdgePair_(k),f=a.sym;D.mesh.splice_(a,k.lNext);a.org=k.dst();D.mesh.makeVertex_(f,a.org);a.lFace=f.lFace=k.lFace;return a};D.mesh.splitEdge=function(k){var a=D.mesh.addEdgeVertex(k).sym;D.mesh.splice_(k.sym,k.sym.oPrev());D.mesh.splice_(k.sym,a);k.sym.org=a.org;a.dst().anEdge=a.sym;a.sym.lFace=k.rFace();a.winding=k.winding;a.sym.winding=k.sym.winding;return a};D.mesh.connect=function(k,a){var f=!1,g=D.mesh.makeEdgePair_(k),p=g.sym;a.lFace!==k.lFace&&
(f=!0,D.mesh.killFace_(a.lFace,k.lFace));D.mesh.splice_(g,k.lNext);D.mesh.splice_(p,a);g.org=k.dst();p.org=a.org;g.lFace=p.lFace=k.lFace;k.lFace.anEdge=p;f||D.mesh.makeFace_(g,k.lFace);return g};D.mesh.zapFace=function(k){var a=k.anEdge,f=a.lNext;do{var g=f;f=g.lNext;g.lFace=null;if(null===g.rFace()){g.oNext===g?D.mesh.killVertex_(g.org,null):(g.org.anEdge=g.oNext,D.mesh.splice_(g,g.oPrev()));var p=g.sym;p.oNext===p?D.mesh.killVertex_(p.org,null):(p.org.anEdge=p.oNext,D.mesh.splice_(p,p.oPrev()));
D.mesh.killEdge_(g)}}while(g!==a);a=k.prev;k=k.next;k.prev=a;a.next=k};D.mesh.meshUnion=function(k,a){var f=k.fHead,g=k.vHead,p=k.eHead,n=a.fHead,d=a.vHead,e=a.eHead;n.next!==n&&(f.prev.next=n.next,n.next.prev=f.prev,n.prev.next=f,f.prev=n.prev);d.next!==d&&(g.prev.next=d.next,d.next.prev=g.prev,d.prev.next=g,g.prev=d.prev);e.next!==e&&(p.sym.next.sym.next=e.next,e.next.sym.next=p.sym.next,e.sym.next.sym.next=p,p.sym.next=e.sym.next);return k};D.mesh.deleteMesh=function(k){};D.mesh.makeEdgePair_=
function(k){var a=new D.GluHalfEdge,f=new D.GluHalfEdge,g=k.sym.next;f.next=g;g.sym.next=a;a.next=k;k.sym.next=f;a.sym=f;a.oNext=a;a.lNext=f;f.sym=a;f.oNext=f;return f.lNext=a};D.mesh.splice_=function(k,a){var f=k.oNext,g=a.oNext;f.sym.lNext=a;g.sym.lNext=k;k.oNext=g;a.oNext=f};D.mesh.makeVertex_=function(k,a){var f=a.prev,g=new D.GluVertex(a,f);f.next=g;a.prev=g;f=g.anEdge=k;do f.org=g,f=f.oNext;while(f!==k)};D.mesh.makeFace_=function(k,a){var f=a.prev,g=new D.GluFace(a,f);f.next=g;a.prev=g;g.anEdge=
k;g.inside=a.inside;f=k;do f.lFace=g,f=f.lNext;while(f!==k)};D.mesh.killEdge_=function(k){var a=k.next;k=k.sym.next;a.sym.next=k;k.sym.next=a};D.mesh.killVertex_=function(k,a){var f=k.anEdge,g=f;do g.org=a,g=g.oNext;while(g!==f);f=k.prev;g=k.next;g.prev=f;f.next=g};D.mesh.killFace_=function(k,a){var f=k.anEdge,g=f;do g.lFace=a,g=g.lNext;while(g!==f);f=k.prev;g=k.next;g.prev=f;f.next=g};D.normal={};D.normal.S_UNIT_X_=1;D.normal.S_UNIT_Y_=0;D.normal.projectPolygon=function(k,a,f,g){var p=!1,n=[a,f,
g];0===a&&0===f&&0===g&&(D.normal.computeNormal_(k,n),p=!0);f=D.normal.longAxis_(n);a=k.mesh.vHead;if(D.TRUE_PROJECT){D.normal.normalize_(n);g=[0,0,0];var d=[0,0,0];g[f]=0;g[(f+1)%3]=D.normal.S_UNIT_X_;g[(f+2)%3]=D.normal.S_UNIT_Y_;f=D.normal.dot_(g,n);g[0]-=f*n[0];g[1]-=f*n[1];g[2]-=f*n[2];D.normal.normalize_(g);d[0]=n[1]*g[2]-n[2]*g[1];d[1]=n[2]*g[0]-n[0]*g[2];d[2]=n[0]*g[1]-n[1]*g[0];D.normal.normalize_(d);for(n=a.next;n!==a;n=n.next)n.s=D.normal.dot_(n.coords,g),n.t=D.normal.dot_(n.coords,d)}else for(g=
(f+1)%3,d=(f+2)%3,f=0<n[f]?1:-1,n=a.next;n!==a;n=n.next)n.s=n.coords[g],n.t=f*n.coords[d];p&&D.normal.checkOrientation_(k)};D.normal.dot_=function(k,a){return k[0]*a[0]+k[1]*a[1]+k[2]*a[2]};D.normal.normalize_=function(k){var a=k[0]*k[0]+k[1]*k[1]+k[2]*k[2];D.assert(0<a);a=Math.sqrt(a);k[0]/=a;k[1]/=a;k[2]/=a};D.normal.longAxis_=function(k){var a=0;Math.abs(k[1])>Math.abs(k[0])&&(a=1);Math.abs(k[2])>Math.abs(k[a])&&(a=2);return a};D.normal.computeNormal_=function(k,a){var f=[-2*D.GLU_TESS_MAX_COORD,
-2*D.GLU_TESS_MAX_COORD,-2*D.GLU_TESS_MAX_COORD],g=[2*D.GLU_TESS_MAX_COORD,2*D.GLU_TESS_MAX_COORD,2*D.GLU_TESS_MAX_COORD],p=[],n=[],d,e=k.mesh.vHead;for(d=e.next;d!==e;d=d.next)for(var l=0;3>l;++l){var h=d.coords[l];h<g[l]&&(g[l]=h,n[l]=d);h>f[l]&&(f[l]=h,p[l]=d)}d=0;f[1]-g[1]>f[0]-g[0]&&(d=1);f[2]-g[2]>f[d]-g[d]&&(d=2);if(g[d]>=f[d])a[0]=0,a[1]=0,a[2]=1;else{f=0;g=n[d];p=p[d];n=[0,0,0];g=[g.coords[0]-p.coords[0],g.coords[1]-p.coords[1],g.coords[2]-p.coords[2]];l=[0,0,0];for(d=e.next;d!==e;d=d.next)l[0]=
d.coords[0]-p.coords[0],l[1]=d.coords[1]-p.coords[1],l[2]=d.coords[2]-p.coords[2],n[0]=g[1]*l[2]-g[2]*l[1],n[1]=g[2]*l[0]-g[0]*l[2],n[2]=g[0]*l[1]-g[1]*l[0],h=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],h>f&&(f=h,a[0]=n[0],a[1]=n[1],a[2]=n[2]);0>=f&&(a[0]=a[1]=a[2]=0,a[D.normal.longAxis_(g)]=1)}};D.normal.checkOrientation_=function(k){for(var a=0,f=k.mesh.fHead,g=f.next;g!==f;g=g.next){var p=g.anEdge;if(!(0>=p.winding)){do a+=(p.org.s-p.dst().s)*(p.org.t+p.dst().t),p=p.lNext;while(p!==g.anEdge)}}if(0>a)for(k=k.mesh.vHead,
a=k.next;a!==k;a=a.next)a.t=-a.t};D.render={};D.render.renderMesh=function(k,a,f){for(var g=!1,p=-1,n=a.fHead.prev;n!==a.fHead;n=n.prev)if(n.inside){g||(k.callBeginCallback(D.primitiveType.GL_TRIANGLES),g=!0);var d=n.anEdge;D.assert(d.lNext.lNext.lNext===d,"renderMesh called with non-triangulated mesh");do{if(f){var e=d.rFace().inside?0:1;p!==e&&(p=e,k.callEdgeFlagCallback(!!p))}k.callVertexCallback(d.org.data);d=d.lNext}while(d!==n.anEdge)}g&&k.callEndCallback()};D.render.renderBoundary=function(k,
a){for(var f=a.fHead.next;f!==a.fHead;f=f.next)if(f.inside){k.callBeginCallback(D.primitiveType.GL_LINE_LOOP);var g=f.anEdge;do k.callVertexCallback(g.org.data),g=g.lNext;while(g!==f.anEdge);k.callEndCallback()}};D.sweep={};D.sweep.SENTINEL_COORD_=4*D.GLU_TESS_MAX_COORD;D.sweep.TOLERANCE_NONZERO_=!1;D.sweep.computeInterior=function(k){k.fatalError=!1;D.sweep.removeDegenerateEdges_(k);D.sweep.initPriorityQ_(k);D.sweep.initEdgeDict_(k);for(var a;null!==(a=k.pq.extractMin());){for(;;){var f=k.pq.minimum();
if(null===f||!D.geom.vertEq(f,a))break;f=k.pq.extractMin();D.sweep.spliceMergeVertices_(k,a.anEdge,f.anEdge)}D.sweep.sweepEvent_(k,a)}a=k.dict.getMin().getKey();k.event=a.eUp.org;D.sweep.doneEdgeDict_(k);D.sweep.donePriorityQ_(k);D.sweep.removeDegenerateFaces_(k.mesh);k.mesh.checkMesh()};D.sweep.addWinding_=function(k,a){k.winding+=a.winding;k.sym.winding+=a.sym.winding};D.sweep.edgeLeq_=function(k,a,f){k=k.event;a=a.eUp;f=f.eUp;if(a.dst()===k)return f.dst()===k?D.geom.vertLeq(a.org,f.org)?0>=D.geom.edgeSign(f.dst(),
a.org,f.org):0<=D.geom.edgeSign(a.dst(),f.org,a.org):0>=D.geom.edgeSign(f.dst(),k,f.org);if(f.dst()===k)return 0<=D.geom.edgeSign(a.dst(),k,a.org);a=D.geom.edgeEval(a.dst(),k,a.org);k=D.geom.edgeEval(f.dst(),k,f.org);return a>=k};D.sweep.deleteRegion_=function(k,a){a.fixUpperEdge&&D.assert(0===a.eUp.winding);a.eUp.activeRegion=null;k.dict.deleteNode(a.nodeUp);a.nodeUp=null};D.sweep.fixUpperEdge_=function(k,a){D.assert(k.fixUpperEdge);D.mesh.deleteEdge(k.eUp);k.fixUpperEdge=!1;k.eUp=a;a.activeRegion=
k};D.sweep.topLeftRegion_=function(k){var a=k.eUp.org;do k=k.regionAbove();while(k.eUp.org===a);k.fixUpperEdge&&(a=D.mesh.connect(k.regionBelow().eUp.sym,k.eUp.lNext),D.sweep.fixUpperEdge_(k,a),k=k.regionAbove());return k};D.sweep.topRightRegion_=function(k){var a=k.eUp.dst();do k=k.regionAbove();while(k.eUp.dst()===a);return k};D.sweep.addRegionBelow_=function(k,a,f){var g=new D.ActiveRegion;g.eUp=f;g.nodeUp=k.dict.insertBefore(a.nodeUp,g);return f.activeRegion=g};D.sweep.isWindingInside_=function(k,
a){switch(k.windingRule){case D.windingRule.GLU_TESS_WINDING_ODD:return 0!==(a&1);case D.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==a;case D.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<a;case D.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>a;case D.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=a||-2>=a}D.assert(!1);return!1};D.sweep.computeWinding_=function(k,a){a.windingNumber=a.regionAbove().windingNumber+a.eUp.winding;a.inside=D.sweep.isWindingInside_(k,a.windingNumber)};D.sweep.finishRegion_=
function(k,a){var f=a.eUp,g=f.lFace;g.inside=a.inside;g.anEdge=f;D.sweep.deleteRegion_(k,a)};D.sweep.finishLeftRegions_=function(k,a,f){var g=a;for(a=a.eUp;g!==f;){g.fixUpperEdge=!1;var p=g.regionBelow(),n=p.eUp;if(n.org!==a.org){if(!p.fixUpperEdge){D.sweep.finishRegion_(k,g);break}n=D.mesh.connect(a.lPrev(),n.sym);D.sweep.fixUpperEdge_(p,n)}a.oNext!==n&&(D.mesh.meshSplice(n.oPrev(),n),D.mesh.meshSplice(a,n));D.sweep.finishRegion_(k,g);a=p.eUp;g=p}return a};D.sweep.addRightEdges_=function(k,a,f,g,
p,n){var d=!0;do D.assert(D.geom.vertLeq(f.org,f.dst())),D.sweep.addRegionBelow_(k,a,f.sym),f=f.oNext;while(f!==g);for(null===p&&(p=a.regionBelow().eUp.rPrev());;){g=a.regionBelow();f=g.eUp.sym;if(f.org!==p.org)break;f.oNext!==p&&(D.mesh.meshSplice(f.oPrev(),f),D.mesh.meshSplice(p.oPrev(),f));g.windingNumber=a.windingNumber-f.winding;g.inside=D.sweep.isWindingInside_(k,g.windingNumber);a.dirty=!0;!d&&D.sweep.checkForRightSplice_(k,a)&&(D.sweep.addWinding_(f,p),D.sweep.deleteRegion_(k,a),D.mesh.deleteEdge(p));
d=!1;a=g;p=f}a.dirty=!0;D.assert(a.windingNumber-f.winding===g.windingNumber);n&&D.sweep.walkDirtyRegions_(k,a)};D.sweep.callCombine_=function(k,a,f,g,p){var n=[a.coords[0],a.coords[1],a.coords[2]];a.data=null;a.data=k.callCombineCallback(n,f,g);null===a.data&&(p?k.fatalError||(k.callErrorCallback(D.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),k.fatalError=!0):a.data=f[0])};D.sweep.spliceMergeVertices_=function(k,a,f){var g=[null,null,null,null];g[0]=a.org.data;g[1]=f.org.data;D.sweep.callCombine_(k,
a.org,g,[.5,.5,0,0],!1);D.mesh.meshSplice(a,f)};D.sweep.vertexWeights_=function(k,a,f,g,p){var n=D.geom.vertL1dist(a,k),d=D.geom.vertL1dist(f,k),e=p+1;g[p]=.5*d/(n+d);g[e]=.5*n/(n+d);k.coords[0]+=g[p]*a.coords[0]+g[e]*f.coords[0];k.coords[1]+=g[p]*a.coords[1]+g[e]*f.coords[1];k.coords[2]+=g[p]*a.coords[2]+g[e]*f.coords[2]};D.sweep.getIntersectData_=function(k,a,f,g,p,n){var d=[0,0,0,0],e=[f.data,g.data,p.data,n.data];a.coords[0]=a.coords[1]=a.coords[2]=0;D.sweep.vertexWeights_(a,f,g,d,0);D.sweep.vertexWeights_(a,
p,n,d,2);D.sweep.callCombine_(k,a,e,d,!0)};D.sweep.checkForRightSplice_=function(k,a){var f=a.regionBelow(),g=a.eUp,p=f.eUp;if(D.geom.vertLeq(g.org,p.org)){if(0<D.geom.edgeSign(p.dst(),g.org,p.org))return!1;D.geom.vertEq(g.org,p.org)?g.org!==p.org&&(k.pq.remove(g.org.pqHandle),D.sweep.spliceMergeVertices_(k,p.oPrev(),g)):(D.mesh.splitEdge(p.sym),D.mesh.meshSplice(g,p.oPrev()),a.dirty=f.dirty=!0)}else{if(0>D.geom.edgeSign(g.dst(),p.org,g.org))return!1;a.regionAbove().dirty=a.dirty=!0;D.mesh.splitEdge(g.sym);
D.mesh.meshSplice(p.oPrev(),g)}return!0};D.sweep.checkForLeftSplice_=function(k,a){var f=a.regionBelow(),g=a.eUp,p=f.eUp;D.assert(!D.geom.vertEq(g.dst(),p.dst()));if(D.geom.vertLeq(g.dst(),p.dst())){if(0>D.geom.edgeSign(g.dst(),p.dst(),g.org))return!1;a.regionAbove().dirty=a.dirty=!0;f=D.mesh.splitEdge(g);D.mesh.meshSplice(p.sym,f);f.lFace.inside=a.inside}else{if(0<D.geom.edgeSign(p.dst(),g.dst(),p.org))return!1;a.dirty=f.dirty=!0;f=D.mesh.splitEdge(p);D.mesh.meshSplice(g.lNext,p.sym);f.rFace().inside=
a.inside}return!0};D.sweep.checkForIntersect_=function(k,a){var f=a.regionBelow(),g=a.eUp,p=f.eUp,n=g.org,d=p.org,e=g.dst(),l=p.dst(),h=new D.GluVertex;D.assert(!D.geom.vertEq(l,e));D.assert(0>=D.geom.edgeSign(e,k.event,n));D.assert(0<=D.geom.edgeSign(l,k.event,d));D.assert(n!==k.event&&d!==k.event);D.assert(!a.fixUpperEdge&&!f.fixUpperEdge);if(n===d||Math.min(n.t,e.t)>Math.max(d.t,l.t))return!1;if(D.geom.vertLeq(n,d)){if(0<D.geom.edgeSign(l,n,d))return!1}else if(0>D.geom.edgeSign(e,d,n))return!1;
D.geom.edgeIntersect(e,n,l,d,h);D.assert(Math.min(n.t,e.t)<=h.t);D.assert(h.t<=Math.max(d.t,l.t));D.assert(Math.min(l.s,e.s)<=h.s);D.assert(h.s<=Math.max(d.s,n.s));D.geom.vertLeq(h,k.event)&&(h.s=k.event.s,h.t=k.event.t);var t=D.geom.vertLeq(n,d)?n:d;D.geom.vertLeq(t,h)&&(h.s=t.s,h.t=t.t);if(D.geom.vertEq(h,n)||D.geom.vertEq(h,d))return D.sweep.checkForRightSplice_(k,a),!1;if(!D.geom.vertEq(e,k.event)&&0<=D.geom.edgeSign(e,k.event,h)||!D.geom.vertEq(l,k.event)&&0>=D.geom.edgeSign(l,k.event,h)){if(l===
k.event)return D.mesh.splitEdge(g.sym),D.mesh.meshSplice(p.sym,g),a=D.sweep.topLeftRegion_(a),g=a.regionBelow().eUp,D.sweep.finishLeftRegions_(k,a.regionBelow(),f),D.sweep.addRightEdges_(k,a,g.oPrev(),g,g,!0),!0;if(e===k.event)return D.mesh.splitEdge(p.sym),D.mesh.meshSplice(g.lNext,p.oPrev()),f=a,a=D.sweep.topRightRegion_(a),n=a.regionBelow().eUp.rPrev(),f.eUp=p.oPrev(),p=D.sweep.finishLeftRegions_(k,f,null),D.sweep.addRightEdges_(k,a,p.oNext,g.rPrev(),n,!0),!0;0<=D.geom.edgeSign(e,k.event,h)&&(a.regionAbove().dirty=
a.dirty=!0,D.mesh.splitEdge(g.sym),g.org.s=k.event.s,g.org.t=k.event.t);0>=D.geom.edgeSign(l,k.event,h)&&(a.dirty=f.dirty=!0,D.mesh.splitEdge(p.sym),p.org.s=k.event.s,p.org.t=k.event.t);return!1}D.mesh.splitEdge(g.sym);D.mesh.splitEdge(p.sym);D.mesh.meshSplice(p.oPrev(),g);g.org.s=h.s;g.org.t=h.t;g.org.pqHandle=k.pq.insert(g.org);D.sweep.getIntersectData_(k,g.org,n,e,d,l);a.regionAbove().dirty=a.dirty=f.dirty=!0;return!1};D.sweep.walkDirtyRegions_=function(k,a){for(var f=a.regionBelow();;){for(;f.dirty;)a=
f,f=f.regionBelow();if(!a.dirty&&(f=a,a=a.regionAbove(),null===a||!a.dirty))break;a.dirty=!1;var g=a.eUp,p=f.eUp;g.dst()!==p.dst()&&D.sweep.checkForLeftSplice_(k,a)&&(f.fixUpperEdge?(D.sweep.deleteRegion_(k,f),D.mesh.deleteEdge(p),f=a.regionBelow(),p=f.eUp):a.fixUpperEdge&&(D.sweep.deleteRegion_(k,a),D.mesh.deleteEdge(g),a=f.regionAbove(),g=a.eUp));if(g.org!==p.org)if(g.dst()===p.dst()||a.fixUpperEdge||f.fixUpperEdge||g.dst()!==k.event&&p.dst()!==k.event)D.sweep.checkForRightSplice_(k,a);else if(D.sweep.checkForIntersect_(k,
a))break;g.org===p.org&&g.dst()===p.dst()&&(D.sweep.addWinding_(p,g),D.sweep.deleteRegion_(k,a),D.mesh.deleteEdge(g),a=f.regionAbove())}};D.sweep.connectRightVertex_=function(k,a,f){var g=f.oNext,p=a.regionBelow(),n=a.eUp,d=p.eUp,e=!1;n.dst()!==d.dst()&&D.sweep.checkForIntersect_(k,a);D.geom.vertEq(n.org,k.event)&&(D.mesh.meshSplice(g.oPrev(),n),a=D.sweep.topLeftRegion_(a),g=a.regionBelow().eUp,D.sweep.finishLeftRegions_(k,a.regionBelow(),p),e=!0);D.geom.vertEq(d.org,k.event)&&(D.mesh.meshSplice(f,
d.oPrev()),f=D.sweep.finishLeftRegions_(k,p,null),e=!0);e?D.sweep.addRightEdges_(k,a,f.oNext,g,g,!0):(g=D.geom.vertLeq(d.org,n.org)?d.oPrev():n,g=D.mesh.connect(f.lPrev(),g),D.sweep.addRightEdges_(k,a,g,g.oNext,g.oNext,!1),g.sym.activeRegion.fixUpperEdge=!0,D.sweep.walkDirtyRegions_(k,a))};D.sweep.connectLeftDegenerate_=function(k,a,f){var g=a.eUp;if(D.geom.vertEq(g.org,f))D.assert(D.sweep.TOLERANCE_NONZERO_),D.sweep.TOLERANCE_NONZERO_&&D.sweep.spliceMergeVertices_(k,g,f.anEdge);else if(D.geom.vertEq(g.dst(),
f)){if(D.assert(D.sweep.TOLERANCE_NONZERO_),D.sweep.TOLERANCE_NONZERO_){a=D.sweep.topRightRegion_(a);g=a.regionBelow();var p=g.eUp.sym,n=p.oNext,d=n;g.fixUpperEdge&&(D.assert(n!==p),D.sweep.deleteRegion_(k,g),D.mesh.deleteEdge(p),p=n.oPrev());D.mesh.meshSplice(f.anEdge,p);D.geom.edgeGoesLeft(n)||(n=null);D.sweep.addRightEdges_(k,a,p.oNext,d,n,!0)}}else D.mesh.splitEdge(g.sym),a.fixUpperEdge&&(D.mesh.deleteEdge(g.oNext),a.fixUpperEdge=!1),D.mesh.meshSplice(f.anEdge,g),D.sweep.sweepEvent_(k,f)};D.sweep.connectLeftVertex_=
function(k,a){var f=new D.ActiveRegion;f.eUp=a.anEdge.sym;f=k.dict.search(f).getKey();var g=f.regionBelow(),p=f.eUp,n=g.eUp;0===D.geom.edgeSign(p.dst(),a,p.org)?D.sweep.connectLeftDegenerate_(k,f,a):(g=D.geom.vertLeq(n.dst(),p.dst())?f:g,f.inside||g.fixUpperEdge?(p=g===f?D.mesh.connect(a.anEdge.sym,p.lNext):D.mesh.connect(n.dNext(),a.anEdge).sym,g.fixUpperEdge?D.sweep.fixUpperEdge_(g,p):D.sweep.computeWinding_(k,D.sweep.addRegionBelow_(k,f,p)),D.sweep.sweepEvent_(k,a)):D.sweep.addRightEdges_(k,f,
a.anEdge,a.anEdge,null,!0))};D.sweep.sweepEvent_=function(k,a){k.event=a;for(var f=a.anEdge;null===f.activeRegion;)if(f=f.oNext,f===a.anEdge){D.sweep.connectLeftVertex_(k,a);return}f=D.sweep.topLeftRegion_(f.activeRegion);var g=f.regionBelow(),p=g.eUp;g=D.sweep.finishLeftRegions_(k,g,null);g.oNext===p?D.sweep.connectRightVertex_(k,f,g):D.sweep.addRightEdges_(k,f,g.oNext,p,p,!0)};D.sweep.addSentinel_=function(k,a){var f=new D.ActiveRegion,g=D.mesh.makeEdge(k.mesh);g.org.s=D.sweep.SENTINEL_COORD_;g.org.t=
a;g.dst().s=-D.sweep.SENTINEL_COORD_;g.dst().t=a;k.event=g.dst();f.eUp=g;f.windingNumber=0;f.inside=!1;f.fixUpperEdge=!1;f.sentinel=!0;f.dirty=!1;f.nodeUp=k.dict.insert(f)};D.sweep.initEdgeDict_=function(k){k.dict=new D.Dict(k,D.sweep.edgeLeq_);D.sweep.addSentinel_(k,-D.sweep.SENTINEL_COORD_);D.sweep.addSentinel_(k,D.sweep.SENTINEL_COORD_)};D.sweep.doneEdgeDict_=function(k){for(var a=0,f;null!==(f=k.dict.getMin().getKey());)f.sentinel||(D.assert(f.fixUpperEdge),D.assert(1===++a)),D.assert(0===f.windingNumber),
D.sweep.deleteRegion_(k,f);k.dict=null};D.sweep.removeDegenerateEdges_=function(k){for(var a=k.mesh.eHead,f,g=a.next;g!==a;g=f){f=g.next;var p=g.lNext;D.geom.vertEq(g.org,g.dst())&&g.lNext.lNext!==g&&(D.sweep.spliceMergeVertices_(k,p,g),D.mesh.deleteEdge(g),g=p,p=g.lNext);if(p.lNext===g){if(p!==g){if(p===f||p===f.sym)f=f.next;D.mesh.deleteEdge(p)}if(g===f||g===f.sym)f=f.next;D.mesh.deleteEdge(g)}}};D.sweep.initPriorityQ_=function(k){var a=new D.PriorityQ;k.pq=a;k=k.mesh.vHead;var f;for(f=k.next;f!==
k;f=f.next)f.pqHandle=a.insert(f);a.init()};D.sweep.donePriorityQ_=function(k){k.pq.deleteQ();k.pq=null};D.sweep.removeDegenerateFaces_=function(k){for(var a,f=k.fHead.next;f!==k.fHead;f=a)a=f.next,f=f.anEdge,D.assert(f.lNext!==f),f.lNext.lNext===f&&(D.sweep.addWinding_(f.oNext,f),D.mesh.deleteEdge(f))};D.tessmono={};D.tessmono.tessellateMonoRegion_=function(k){k=k.anEdge;for(D.assert(k.lNext!==k&&k.lNext.lNext!==k);D.geom.vertLeq(k.dst(),k.org);k=k.lPrev());for(;D.geom.vertLeq(k.org,k.dst());k=k.lNext);
for(var a=k.lPrev(),f;k.lNext!==a;)if(D.geom.vertLeq(k.dst(),a.org)){for(;a.lNext!==k&&(D.geom.edgeGoesLeft(a.lNext)||0>=D.geom.edgeSign(a.org,a.dst(),a.lNext.dst()));)f=D.mesh.connect(a.lNext,a),a=f.sym;a=a.lPrev()}else{for(;a.lNext!==k&&(D.geom.edgeGoesRight(k.lPrev())||0<=D.geom.edgeSign(k.dst(),k.org,k.lPrev().org));)f=D.mesh.connect(k,k.lPrev()),k=f.sym;k=k.lNext}for(D.assert(a.lNext!==k);a.lNext.lNext!==k;)f=D.mesh.connect(a.lNext,a),a=f.sym};D.tessmono.tessellateInterior=function(k){for(var a,
f=k.fHead.next;f!==k.fHead;f=a)a=f.next,f.inside&&D.tessmono.tessellateMonoRegion_(f)};D.tessmono.discardExterior=function(k){for(var a,f=k.fHead.next;f!==k.fHead;f=a)a=f.next,f.inside||D.mesh.zapFace(f)};D.tessmono.setWindingNumber=function(k,a,f){for(var g,p=k.eHead.next;p!==k.eHead;p=g)g=p.next,p.rFace().inside!==p.lFace.inside?p.winding=p.lFace.inside?a:-a:f?D.mesh.deleteEdge(p):p.winding=0};D.Dict=function(k,a){this.head_=new D.DictNode;this.frame_=k;this.leq_=a};D.Dict.prototype.deleteDict_=
function(){};D.Dict.prototype.insertBefore=function(k,a){do k=k.prev;while(null!==k.key&&!this.leq_(this.frame_,k.key,a));var f=new D.DictNode(a,k.next,k);k.next.prev=f;return k.next=f};D.Dict.prototype.insert=function(k){return this.insertBefore(this.head_,k)};D.Dict.prototype.deleteNode=function(k){k.next.prev=k.prev;k.prev.next=k.next};D.Dict.prototype.search=function(k){var a=this.head_;do a=a.next;while(null!==a.key&&!this.leq_(this.frame_,k,a.key));return a};D.Dict.prototype.getMin=function(){return this.head_.next};
D.Dict.prototype.getMax=function(){return this.head_.prev};D.DictNode=function(k,a,f){this.key=k||null;this.next=a||this;this.prev=f||this};D.DictNode.prototype.getKey=function(){return this.key};D.DictNode.prototype.getSuccessor=function(){return this.next};D.DictNode.prototype.getPredecessor=function(){return this.prev};D.GluTesselator=function(){this.state_=D.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=D.windingRule.GLU_TESS_WINDING_ODD;
this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};D.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};D.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(D.GluTesselator.tessState_.T_DORMANT)};D.GluTesselator.prototype.gluTessProperty=function(k,a){switch(k){case D.gluEnum.GLU_TESS_TOLERANCE:return;
case D.gluEnum.GLU_TESS_WINDING_RULE:switch(a){case D.windingRule.GLU_TESS_WINDING_ODD:case D.windingRule.GLU_TESS_WINDING_NONZERO:case D.windingRule.GLU_TESS_WINDING_POSITIVE:case D.windingRule.GLU_TESS_WINDING_NEGATIVE:case D.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=a;return}break;case D.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!a;return;default:this.callErrorCallback(D.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(D.gluEnum.GLU_INVALID_VALUE)};D.GluTesselator.prototype.gluGetTessProperty=
function(k){switch(k){case D.gluEnum.GLU_TESS_TOLERANCE:return 0;case D.gluEnum.GLU_TESS_WINDING_RULE:return k=this.windingRule,D.assert(k===D.windingRule.GLU_TESS_WINDING_ODD||k===D.windingRule.GLU_TESS_WINDING_NONZERO||k===D.windingRule.GLU_TESS_WINDING_POSITIVE||k===D.windingRule.GLU_TESS_WINDING_NEGATIVE||k===D.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),k;case D.gluEnum.GLU_TESS_BOUNDARY_ONLY:return D.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(D.gluEnum.GLU_INVALID_ENUM)}return!1};
D.GluTesselator.prototype.gluTessNormal=function(k,a,f){this.normal_[0]=k;this.normal_[1]=a;this.normal_[2]=f};D.GluTesselator.prototype.gluTessCallback=function(k,a){var f=a?a:null;switch(k){case D.gluEnum.GLU_TESS_BEGIN:case D.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=f;break;case D.gluEnum.GLU_TESS_EDGE_FLAG:case D.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=f;break;case D.gluEnum.GLU_TESS_VERTEX:case D.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=f;break;case D.gluEnum.GLU_TESS_END:case D.gluEnum.GLU_TESS_END_DATA:this.endCallback_=
f;break;case D.gluEnum.GLU_TESS_ERROR:case D.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=f;break;case D.gluEnum.GLU_TESS_COMBINE:case D.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=f;break;case D.gluEnum.GLU_TESS_MESH:this.meshCallback_=f;break;default:this.callErrorCallback(D.gluEnum.GLU_INVALID_ENUM)}};D.GluTesselator.prototype.gluTessVertex=function(k,a){var f=!1,g=[0,0,0];this.requireState_(D.GluTesselator.tessState_.T_IN_CONTOUR);for(var p=0;3>p;++p){var n=k[p];n<-D.GLU_TESS_MAX_COORD&&
(n=-D.GLU_TESS_MAX_COORD,f=!0);n>D.GLU_TESS_MAX_COORD&&(n=D.GLU_TESS_MAX_COORD,f=!0);g[p]=n}f&&this.callErrorCallback(D.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(g,a)};D.GluTesselator.prototype.gluTessBeginPolygon=function(k){this.requireState_(D.GluTesselator.tessState_.T_DORMANT);this.state_=D.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new D.GluMesh;this.polygonData_=k};D.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(D.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=D.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};D.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(D.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=D.GluTesselator.tessState_.T_IN_POLYGON};D.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(D.GluTesselator.tessState_.T_IN_POLYGON);this.state_=D.GluTesselator.tessState_.T_DORMANT;D.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);D.sweep.computeInterior(this);
if(!this.fatalError){var k=this.mesh;this.boundaryOnly_?D.tessmono.setWindingNumber(k,1,!0):D.tessmono.tessellateInterior(k);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?D.render.renderBoundary(this,this.mesh):D.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);if(this.meshCallback_){D.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}D.mesh.deleteMesh(this.mesh);
this.mesh=this.polygonData_=null};D.GluTesselator.prototype.requireState_=function(k){this.state_!==k&&this.gotoState_(k)};D.GluTesselator.prototype.gotoState_=function(k){for(;this.state_!==k;)if(this.state_<k)switch(this.state_){case D.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(D.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);this.gluTessBeginPolygon(null);break;case D.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(D.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case D.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(D.errorType.GLU_TESS_MISSING_END_CONTOUR);
this.gluTessEndContour();break;case D.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(D.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};D.GluTesselator.prototype.addVertex_=function(k,a){var f=this.lastEdge_;null===f?(f=D.mesh.makeEdge(this.mesh),D.mesh.meshSplice(f,f.sym)):(D.mesh.splitEdge(f),f=f.lNext);f.org.data=a;f.org.coords[0]=k[0];f.org.coords[1]=k[1];f.org.coords[2]=k[2];f.winding=1;f.sym.winding=-1;this.lastEdge_=f};D.GluTesselator.prototype.callBeginCallback=
function(k){this.beginCallback_&&this.beginCallback_(k,this.polygonData_)};D.GluTesselator.prototype.callVertexCallback=function(k){this.vertexCallback_&&this.vertexCallback_(k,this.polygonData_)};D.GluTesselator.prototype.callEdgeFlagCallback=function(k){this.edgeFlagCallback_&&this.edgeFlagCallback_(k,this.polygonData_)};D.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};D.GluTesselator.prototype.callCombineCallback=function(k,a,f){return this.combineCallback_?
this.combineCallback_(k,a,f,this.polygonData_)||null:null};D.GluTesselator.prototype.callErrorCallback=function(k){this.errorCallback_&&this.errorCallback_(k,this.polygonData_)};D.GluFace=function(k,a){this.next=k||this;this.prev=a||this;this.anEdge=null;this.inside=!1};D.GluHalfEdge=function(k){this.next=k||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};D.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};D.GluHalfEdge.prototype.dst=function(){return this.sym.org};
D.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};D.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};D.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};D.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};D.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};D.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};D.GluMesh=function(){this.vHead=new D.GluVertex;this.fHead=new D.GluFace;this.eHead=new D.GluHalfEdge;this.eHeadSym=
new D.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};D.GluMesh.prototype.checkMesh=function(){if(D.DEBUG){var k=this.fHead,a=this.vHead,f=this.eHead,g,p;for(g=g=k;(p=g.next)!==k;g=p){D.assert(p.prev===g);g=p.anEdge;do D.assert(g.sym!==g),D.assert(g.sym.sym===g),D.assert(g.lNext.oNext.sym===g),D.assert(g.oNext.sym.lNext===g),D.assert(g.lFace===p),g=g.lNext;while(g!==p.anEdge)}D.assert(p.prev===g&&null===p.anEdge);for(g=g=a;(k=g.next)!==a;g=k){D.assert(k.prev===g);g=k.anEdge;
do D.assert(g.sym!==g),D.assert(g.sym.sym===g),D.assert(g.lNext.oNext.sym===g),D.assert(g.oNext.sym.lNext===g),D.assert(g.org===k),g=g.oNext;while(g!==k.anEdge)}D.assert(k.prev===g&&null===k.anEdge&&null===k.data);for(a=a=f;(g=a.next)!==f;a=g)D.assert(g.sym.next===a.sym),D.assert(g.sym!==g),D.assert(g.sym.sym===g),D.assert(null!==g.org),D.assert(null!==g.dst()),D.assert(g.lNext.oNext.sym===g),D.assert(g.oNext.sym.lNext===g);D.assert(g.sym.next===a.sym&&g.sym===this.eHeadSym&&g.sym.sym===g&&null===
g.org&&null===g.dst()&&null===g.lFace&&null===g.rFace())}};D.GluVertex=function(k,a){this.next=k||this;this.prev=a||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=this.s=0};D.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new D.PriorityQHeap};D.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};D.PriorityQ.prototype.init=function(){this.order_=[];for(var k=0;k<this.size_;k++)this.order_[k]=k;
k=function(f){return function(g,p){return D.geom.vertLeq(f[g],f[p])?1:-1}}(this.verts_);this.order_.sort(k);this.initialized_=!0;this.heap_.init();if(D.DEBUG){var a=0+this.size_-1;for(k=0;k<a;++k)D.assert(D.geom.vertLeq(this.verts_[this.order_[k+1]],this.verts_[this.order_[k]]))}};D.PriorityQ.prototype.insert=function(k){if(this.initialized_)return this.heap_.insert(k);var a=this.size_++;this.verts_[a]=k;return-(a+1)};D.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();
var k=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var a=this.heap_.minimum();if(D.geom.vertLeq(a,k))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&null===this.verts_[this.order_[this.size_-1]]);return k};D.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var k=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var a=this.heap_.minimum();if(D.geom.vertLeq(a,k))return a}return k};D.PriorityQ.prototype.remove=function(k){if(0<=
k)this.heap_.remove(k);else for(k=-(k+1),D.assert(k<this.verts_.length&&null!==this.verts_[k]),this.verts_[k]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_};D.PriorityQHeap=function(){this.heap_=D.PriorityQHeap.reallocNumeric_([0],D.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=D.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};D.PriorityQHeap.INIT_SIZE_=32;D.PriorityQHeap.reallocNumeric_=
function(k,a){for(var f=Array(a),g=0;g<k.length;g++)f[g]=k[g];for(;g<a;g++)f[g]=0;return f};D.PriorityQHeap.prototype.init=function(){for(var k=this.size_;1<=k;--k)this.floatDown_(k);this.initialized_=!0};D.PriorityQHeap.prototype.insert=function(k){var a=++this.size_;2*a>this.max_&&(this.max_*=2,this.handles_=D.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));if(0===this.freeList_)var f=a;else f=this.freeList_,this.freeList_=this.handles_[this.freeList_];this.verts_[f]=k;this.handles_[f]=
a;this.heap_[a]=f;this.initialized_&&this.floatUp_(a);return f};D.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};D.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};D.PriorityQHeap.prototype.extractMin=function(){var k=this.heap_,a=this.verts_,f=this.handles_,g=k[1],p=a[g];0<this.size_&&(k[1]=k[this.size_],f[k[1]]=1,a[g]=null,f[g]=this.freeList_,this.freeList_=g,0<--this.size_&&this.floatDown_(1));return p};D.PriorityQHeap.prototype.remove=function(k){var a=
this.heap_,f=this.verts_,g=this.handles_;D.assert(1<=k&&k<=this.max_&&null!==f[k]);var p=g[k];a[p]=a[this.size_];g[a[p]]=p;p<=--this.size_&&(1>=p?this.floatDown_(p):D.geom.vertLeq(f[a[p>>1]],f[a[p]])?this.floatDown_(p):this.floatUp_(p));f[k]=null;g[k]=this.freeList_;this.freeList_=k};D.PriorityQHeap.prototype.floatDown_=function(k){for(var a=this.heap_,f=this.verts_,g=this.handles_,p=a[k];;){var n=k<<1;n<this.size_&&D.geom.vertLeq(f[a[n+1]],f[a[n]])&&(n+=1);D.assert(n<=this.max_);var d=a[n];if(n>
this.size_||D.geom.vertLeq(f[p],f[d])){a[k]=p;g[p]=k;break}a[k]=d;g[d]=k;k=n}};D.PriorityQHeap.prototype.floatUp_=function(k){for(var a=this.heap_,f=this.verts_,g=this.handles_,p=a[k];;){var n=k>>1,d=a[n];if(0===n||D.geom.vertLeq(f[d],f[p])){a[k]=p;g[p]=k;break}a[k]=d;g[d]=k;k=n}};D.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};D.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};
D.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});D=function(){return function(){}}();k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../color ../../definitions ../../enums ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q){Object.defineProperty(k,"__esModule",{value:!0});var v=f.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),x=e.allocTriangles(20),y=e.allocTriangles(20),B=[e.allocExtrudeVectors(),e.allocExtrudeVectors()],z=e.allocExtrudeVectors(),b=p.TILE_SIZE+8,c=new e.Tessellator({distanceAlongCorrection:!0}),m=new h.TileClipper(0,0,0,1,8);m.setExtent(512);D=function(u){function w(A,C,E,G,F,I,M,Y,R,S,O){var L=u.call(this)||this;L.capType=I;L.joinType=M;L.fillColor=Y;
L.tl=R;L.br=S;L.hasPattern=O;L.geometryType=n.WGLGeometryType.LINE;L.halfWidth=0<G?.5*(G+1/F):0;L._materialStore=A;L.vvFlags=C;L.materialId=L._materialStore.createSpriteMaterial(E,L.geometryType,C);return L}a(w,u);w.fromSimpleLine=function(A,C,E,G,F){var I=E.color,M=t.getCapType("round"),Y=t.getJoinType("round");I=I&&"none"!==E.style&&g.premultiplyAlphaRGBA(I)||0;"none"===E.style&&(I=0);if(!G)return new w(A,C,G,E.width,F,M,Y,I,0,0,!1);var R=G.rect,S=R.x+1+G.width,O=R.y+1+G.height;R=l.i1616to32(R.x+
1,R.y+1);S=l.i1616to32(S,O);return new w(A,C,G,E.width,F,M,Y,I,R,S,!0)};w.fromPictureLineSymbol=function(A,C,E,G){v.error("PictureLineSymbol support does not exist!");return null};w.prototype.writeMesh=function(A,C,E,G,F,I,M){if(this.vvFlags&d.WGLVVFlag.COLOR||0!==this.fillColor){I=this._materialStore.get(this.materialId);var Y=C.indexVector;C=C.get("geometry");var R=this.halfWidth,S=new r(G,this.geometryType,this.materialId),O=this._getOffset(C,I);S.vertexFrom=O;S.indexFrom=Y.length;A.push(S);switch(E){case "esriGeometryPolyline":A=
this._clipLines(F.geometry.paths);this._write(S,Y,C,O,G,R,A,I,M);break;case "esriGeometryPolygon":A=this._clipLines(F.geometry.rings);this._write(S,Y,C,O,G,R,A,I,M);break;default:v.error("Unable to handle geometryType: "+E)}}};w.prototype._clipLines=function(A){for(var C=[],E=!1,G=0;G<A.length;){var F=[],I=A[G];m.reset(2);var M=I[0],Y=M[0];M=M[1];if(E)m.moveTo(Y,M);else{if(-8>Y||Y>b||-8>M||M>b){E=!0;continue}F.push({x:Y,y:M})}for(var R=!1,S=I.length,O=1;O<S;++O)if(Y+=I[O][0],M+=I[O][1],E)m.lineTo(Y,
M);else{if(-8>Y||Y>b||-8>M||M>b){R=!0;break}F.push({x:Y,y:M})}if(R)E=!0;else{if(E){if(F=m.resultWithStarts())for(E=0;E<F.length;E++)C.push(F[E])}else C.push({line:F,start:0});G++;E=!1}}return C};w.prototype._getOffset=function(A,C){var E=C.materialKeyInfo.hasVV()?11:8;return A.length/E};w.prototype._write=function(A,C,E,G,F,I,M,Y,R){for(var S=0,O=0;O<M.length;O++){var L=M[O],P=L.line;if(!(2>P.length)){var X=P[0],Q=P[P.length-1],K=Q.x-X.x;X=Q.y-X.y;K=1E-6>K*K+X*X;var U=L.start%65535;L=B[1];for(X=0;X<
P.length;X++){var da=P[X];Q=L===B[X%2]?B[(X+1)%2]:B[X%2];var fa=0===X,ia=X===P.length-1;ia&&K&&!this.hasPattern?e.copyExtrudeVectors(Q,z):(this._computeExtrudeVectors(Q,X,P,K),S+=this._writeVertices(E,F,I,da.x,da.y,Q,U,S,Y,R),!Q.capCenter||K&&ia||this._writePieIndices(A,C,G,Q),K&&fa&&!this.hasPattern&&e.copyExtrudeVectors(z,Q));fa||this._writeBridgeIndices(A,C,G,L,Q);if(!ia){ia=P[X+1];fa=[ia.x-da.x,ia.y-da.y];var la=e.length(fa);fa=[fa[0]/la,fa[1]/la];la=U+la;if(65535<la){var ma=(65535-U)/(la-U);
U=da.x+(ia.x-da.x)*ma;da=da.y+(ia.y-da.y)*ma;ia=L;c.buttCap(ia,fa,fa);S+=this._writeVertices(E,F,I,U,da,ia,65535,S,Y,R);c.bridge(x,Q,ia);this._writeBridgeIndices(A,C,G,Q,ia);c.buttCap(ia,fa,fa);U=la-65535}else U=la,L=Q}}}}A.vertexCount=S};w.prototype._writeVertices=function(A,C,E,G,F,I,M,Y,R,S){var O=0,L=l.i1616to32(G,F),P=I.vectors;I=P.items;for(P=P.count;O<P;++O){var X=I[O].vector,Q=X[0];X=X[1];var K=I[O].texCoords,U=K[0],da=K[1],fa=I[O].direction;K=fa[0];var ia=fa[1];fa=l.i1616to32(M,31*E);Q=l.i8888to32(Math.round(31*
Q),Math.round(31*X),Math.round(31*U),Math.round(31*da));X=l.i8888to32(Math.round(31*K),Math.round(31*ia),0,0);A.push(L);A.push(C);A.push(this.fillColor);A.push(Q);A.push(fa);A.push(this.tl);A.push(this.br);A.push(X);this._writeVV(A,S,R);I[O].base={index:Y+O,point:[G,F]}}return O};w.prototype._writeVV=function(A,C,E){E.materialKeyInfo.hasVV()&&(A.push(C[n.VVType.SIZE]),A.push(C[n.VVType.COLOR]),A.push(C[n.VVType.OPACITY]))};w.prototype._writeBridgeIndices=function(A,C,E,G,F){c.bridge(x,G,F);for(G=
0;G<x.count;++G)F=x.items[G],C.push(E+F.v1.base.index),C.push(E+F.v2.base.index),C.push(E+F.v3.base.index),A.indexCount+=3};w.prototype._writePieIndices=function(A,C,E,G){c.pie(y,G);for(G=0;G<y.count;++G){var F=y.items[G];C.push(E+F.v1.base.index);C.push(E+F.v2.base.index);C.push(E+F.v3.base.index);A.indexCount+=3}};w.prototype._computeExtrudeVectors=function(A,C,E,G){var F=E[C],I=[void 0,void 0],M=[void 0,void 0];if(0<C&&C<E.length-1){var Y=E[(C+E.length-1)%E.length],R=E[(C+1)%E.length];e.normalize(I,
[F.x-Y.x,F.y-Y.y]);e.normalize(M,[R.x-F.x,R.y-F.y])}else if(0===C)R=E[(C+1)%E.length],e.normalize(M,[R.x-F.x,R.y-F.y]),G?(Y=E[E.length-2],e.normalize(I,[F.x-Y.x,F.y-Y.y])):I=M;else if(C===E.length-1)Y=E[(C+E.length-1)%E.length],e.normalize(I,[F.x-Y.x,F.y-Y.y]),G?(Y=E[1],e.normalize(M,[Y.x-F.x,Y.y-F.y])):M=I;else return;G||0!==C?G||C!==E.length-1?this._computeJoinExtrudeVectors(A,I,M):this._computeCapExtrudeVectors(A,I,M,e.CapPosition.END):this._computeCapExtrudeVectors(A,I,M,e.CapPosition.START)};
w.prototype._computeCapExtrudeVectors=function(A,C,E,G){switch(this.capType){case n.CapType.BUTT:c.buttCap(A,C,E);break;case n.CapType.ROUND:var F=e.getNumberOfSlices(Math.PI);c.roundCap(A,C,E,G,F,G===e.CapPosition.START?-1:1);break;case n.CapType.SQUARE:c.squareCap(A,C,E,G);break;default:v.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),c.buttCap(A,C,E)}};w.prototype._computeJoinExtrudeVectors=function(A,C,E){var G=e.getRads(C,E);if(G>Math.PI-.05)c.rectJoin(A,C,E);else if(this.joinType===
n.JoinType.MITER||.1>G).05>G?c.fastMiterJoin(A,C,E):G<e.MITER_SAFE_RADS?c.miterJoin(A,C,E):c.bevelJoin(A,C,E,e.SYSTEM_MAG_LIMIT);else if(this.joinType===n.JoinType.BEVEL)c.bevelJoin(A,C,E,1);else if(this.joinType===n.JoinType.ROUND){var F=e.getNumberOfSlices(G);2.3>G?2>F||.5>G?c.bevelJoin(A,C,E,1):c.roundJoin(A,C,E,F):c.unitRoundJoin(A,C,E,F)}};return w}(q["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(D,k){function a(R){var S=
{items:[],count:0},O;for(O=0;O<R;++O)S.items.push(void 0);return S}function f(R,S){b.vector[0]=R.vector[0];b.vector[1]=R.vector[1];b.texCoords[0]=R.texCoords[0];b.texCoords[1]=R.texCoords[1];b.direction[0]=R.direction[0];b.direction[1]=R.direction[1];b.base=R.base;R.vector[0]=S.vector[0];R.vector[1]=S.vector[1];R.texCoords[0]=S.texCoords[0];R.texCoords[1]=S.texCoords[1];R.direction[0]=S.direction[0];R.direction[1]=S.direction[1];R.base=S.base;S.vector[0]=b.vector[0];S.vector[1]=b.vector[1];S.texCoords[0]=
b.texCoords[0];S.texCoords[1]=b.texCoords[1];S.direction[0]=b.direction[0];S.direction[1]=b.direction[1];S.base=b.base}function g(R,S){return R[0]*S[0]+R[1]*S[1]}function p(R){return Math.sqrt(g(R,R))}function n(R,S){var O=p(S);R[0]=S[0]/O;R[1]=S[1]/O;return R}function d(R,S){R[0]=-S[1];R[1]=S[0];return R}function e(R,S){return R[0]*S[1]-R[1]*S[0]}function l(R,S){R[0]=-S[0];R[1]=-S[1];return R}function h(R,S,O){R[0]=S[0]*O;R[1]=S[1]*O;return R}function t(R,S,O){R[0]=S[0]+O[0];R[1]=S[1]+O[1];return R}
function r(R,S){var O=g(R,S);return.999<O?0:-.999>O?Math.PI:Math.acos(O)}function q(R,S,O,L,P){if(0===L)R.count=0;else{var X=p(S),Q=h(c[0],S,1/X);O=h(c[1],O,1/X);Q=r(Q,O);Q=(P?-1:1)*Q/L;P=Math.cos(Q);Q=Math.sin(Q);O=S[0];var K=S[1];for(S=0;S<L-1;++S)X=O,O=P*X-Q*K,K=Q*X+P*K,R.items[S][0]=O,R.items[S][1]=K;R.count=L-1}}function v(R){var S=R.count,O=Math.floor(S/2),L;for(L=0;L<O;++L){var P=R.items[L];R.items[L]=R.items[S-L-1];R.items[S-L-1]=P}}Object.defineProperty(k,"__esModule",{value:!0});var x;(function(R){R[R.ENTRY=
1]="ENTRY";R[R.EXIT=2]="EXIT";R[R.CAP=3]="CAP"})(x=k.VectorRole||(k.VectorRole={}));var y;(function(R){R[R.START=1]="START";R[R.END=2]="END"})(y=k.CapPosition||(k.CapPosition={}));k.SYSTEM_MAG_LIMIT=3.8;k.MITER_SAFE_RADS=2*Math.acos(1/k.SYSTEM_MAG_LIMIT);var B=k.SYSTEM_MAG_LIMIT*k.SYSTEM_MAG_LIMIT,z=16/(2*Math.PI);k.allocTriangles=function(R){var S={items:[],count:0},O;for(O=0;O<R;++O)S.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,
void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return S};k.allocExtrudeVectors=function(){var R={items:[],count:0},S;for(S=0;30>S;++S)R.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});S={};S[x.ENTRY]=a(20);S[x.EXIT]=a(20);S[x.CAP]=a(20);return{vectors:R,lists:S}};k.copyExtrudeVectors=function(R,S){var O;for(O=0;O<S.vectors.count;++O)R.vectors.items[O].vector[0]=
S.vectors.items[O].vector[0],R.vectors.items[O].vector[1]=S.vectors.items[O].vector[1],R.vectors.items[O].texCoords[0]=S.vectors.items[O].texCoords[0],R.vectors.items[O].texCoords[1]=S.vectors.items[O].texCoords[1],R.vectors.items[O].direction[0]=S.vectors.items[O].direction[0],R.vectors.items[O].direction[1]=S.vectors.items[O].direction[1],R.vectors.items[O].base=S.vectors.items[O].base;R.vectors.count=S.vectors.count;var L=S.lists[x.ENTRY],P=R.lists[x.ENTRY],X=S.lists[x.EXIT],Q=R.lists[x.EXIT],
K=S.lists[x.CAP],U=R.lists[x.CAP];for(O=0;O<L.count;++O)P.items[O]=L.items[O];P.count=L.count;for(O=0;O<X.count;++O)Q.items[O]=X.items[O];Q.count=X.count;for(O=0;O<K.count;++O)U.items[O]=K.items[O];U.count=K.count;R.capCenter=S.capCenter};var b={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};k.swapExtrudeVectors=f;var c=[],m;for(m=0;32>m;++m)c.push([void 0,void 0]);var u=function(R){var S={items:[],count:0},O;for(O=0;O<R;++O)S.items.push([void 0,void 0]);return S}(16);
k.length=p;k.normalize=n;k.getNumberOfSlices=function(R){return Math.max(Math.round(R*z),1)};k.getRads=r;k.reverse=v;var w=[void 0,void 0],A=[void 0,void 0],C=[0,0],E=[0,0],G=[0,0],F=[0,0],I=Math.cos(Math.PI/4),M=Math.sin(Math.PI/4),Y=Math.sqrt(2);m=function(){function R(S){this._distanceAlongCorrection=S.distanceAlongCorrection}R.prototype.bridge=function(S,O,L){var P=O.vectors;O=O.lists[x.EXIT];var X=L.vectors,Q=L.lists[x.ENTRY];if(O.count===Q.count+1){L=O.items;var K=P.items;var U=Q.items;X=X.items}else if(Q.count===
O.count+1)L=Q.items,K=X.items,U=O.items,X=P.items;else if(O.count===Q.count)L=Q.items,K=X.items,U=O.items,X=P.items;else{S.count=0;return}P=O.count+Q.count-2;S.count=P;w[0]=L;w[1]=U;A[0]=K;A[1]=X;for(O=0;O<P;++O)L=S.items[O],K=(O+0)%2,K=A[K][w[K][Math.floor((O+0)/2)]],L.v1.vector[0]=K.vector[0],L.v1.vector[1]=K.vector[1],L.v1.texCoords[0]=K.texCoords[0],L.v1.texCoords[1]=K.texCoords[1],L.v1.direction[0]=K.direction[0],L.v1.direction[1]=K.direction[1],L.v1.base=K.base,K=(O+1)%2,K=A[K][w[K][Math.floor((O+
1)/2)]],L.v2.vector[0]=K.vector[0],L.v2.vector[1]=K.vector[1],L.v2.texCoords[0]=K.texCoords[0],L.v2.texCoords[1]=K.texCoords[1],L.v2.direction[0]=K.direction[0],L.v2.direction[1]=K.direction[1],L.v2.base=K.base,K=(O+2)%2,K=A[K][w[K][Math.floor((O+2)/2)]],L.v3.vector[0]=K.vector[0],L.v3.vector[1]=K.vector[1],L.v3.texCoords[0]=K.texCoords[0],L.v3.texCoords[1]=K.texCoords[1],L.v3.direction[0]=K.direction[0],L.v3.direction[1]=K.direction[1],L.v3.base=K.base,K=L.v1.base&&L.v1.base.point||C,U=L.v2.base&&
L.v2.base.point||C,X=L.v3.base&&L.v3.base.point||C,E[0]=K[0]+L.v1.vector[0],E[1]=K[1]+L.v1.vector[1],G[0]=U[0]+L.v2.vector[0],G[1]=U[1]+L.v2.vector[1],F[0]=X[0]+L.v3.vector[0],F[1]=X[1]+L.v3.vector[1],0>(G[0]-E[0])*(F[1]-E[1])-(F[0]-E[0])*(G[1]-E[1])||f(L.v2,L.v3)};R.prototype.pie=function(S,O){if(0===O.lists[x.CAP].count)S.count=0;else if(1===O.lists[x.CAP].count)S.count=0;else{S.count=O.lists[x.CAP].count-1;var L;for(L=0;L<S.count;++L){var P=S.items[L],X=O.vectors.items[O.lists[x.CAP].items[L]];
P.v1.vector[0]=X.vector[0];P.v1.vector[1]=X.vector[1];P.v1.texCoords[0]=X.texCoords[0];P.v1.texCoords[1]=X.texCoords[1];P.v1.direction[0]=X.direction[0];P.v1.direction[1]=X.direction[1];P.v1.base=X.base;X=O.vectors.items[O.lists[x.CAP].items[L+1]];P.v2.vector[0]=X.vector[0];P.v2.vector[1]=X.vector[1];P.v2.texCoords[0]=X.texCoords[0];P.v2.texCoords[1]=X.texCoords[1];P.v2.direction[0]=X.direction[0];P.v2.direction[1]=X.direction[1];P.v2.base=X.base;X=O.vectors.items[O.capCenter];P.v3.vector[0]=X.vector[0];
P.v3.vector[1]=X.vector[1];P.v3.texCoords[0]=X.texCoords[0];P.v3.texCoords[1]=X.texCoords[1];P.v3.direction[0]=X.direction[0];P.v3.direction[1]=X.direction[1];P.v3.base=X.base;X=P.v1.base&&P.v1.base.point||C;var Q=P.v2.base&&P.v2.base.point||C,K=P.v3.base&&P.v3.base.point||C;E[0]=X[0]+P.v1.vector[0];E[1]=X[1]+P.v1.vector[1];G[0]=Q[0]+P.v2.vector[0];G[1]=Q[1]+P.v2.vector[1];F[0]=K[0]+P.v3.vector[0];F[1]=K[1]+P.v3.vector[1];0>(G[0]-E[0])*(F[1]-E[1])-(F[0]-E[0])*(G[1]-E[1])||f(P.v2,P.v3)}}};R.prototype.buttCap=
function(S,O,L){this.fastMiterJoin(S,O,L)};R.prototype.roundCap=function(S,O,L,P,X,Q){void 0===Q&&(Q=0);this.fastMiterJoin(S,O,L);L=P===y.START?0:1;P=P===y.START?1:0;S.capCenter=S.vectors.count;O=S.vectors.items[S.capCenter];O.vector[0]=0;O.vector[1]=0;O.texCoords[0]=0;O.texCoords[1]=0;O.direction[0]=0;O.direction[1]=0;++S.vectors.count;q(u,S.vectors.items[L].vector,S.vectors.items[P].vector,X,!1);X=S.vectors.count;O=S.lists[x.CAP];O.items[0]=L;L=S.vectors.items[L].texCoords[1];var K=S.vectors.items[P].texCoords[1],
U;for(U=0;U<u.count;++U){var da=Q*(1-Math.abs(u.count/2-U)/(u.count/2)),fa=L+U/(u.count-1)*(K-L),ia=u.items[U],la=S.vectors.items[X+U];la.vector[0]=ia[0];la.vector[1]=ia[1];la.texCoords[0]=da;la.texCoords[1]=fa;la.direction[0]=0;la.direction[1]=0;O.items[U+1]=X+U}O.items[u.count+1]=P;O.count=u.count+2;S.vectors.count=X+u.count};R.prototype.squareCap=function(S,O,L,P){this.fastMiterJoin(S,O,L);O=P===y.START?0:1;L=P===y.START?1:0;var X=c[0],Q=c[1],K=c[2],U=c[3];P=c[4];var da=S.vectors.items[O].vector;
X[0]=I*da[0]-M*da[1];X[1]=M*da[0]+I*da[1];h(U,X,Y);Q[0]=I*X[0]-M*X[1];Q[1]=M*X[0]+I*X[1];K[0]=I*Q[0]-M*Q[1];K[1]=M*Q[0]+I*Q[1];h(P,K,Y);O=S.vectors.items[O];O.vector[0]=U[0];O.vector[1]=U[1];S=S.vectors.items[L];S.vector[0]=P[0];S.vector[1]=P[1]};R.prototype.fastMiterJoin=function(S,O,L){L=d(c[0],L);O=l(c[1],L);var P=S.vectors.items[0];P.vector[0]=L[0];P.vector[1]=L[1];P.texCoords[0]=0;P.texCoords[1]=-1;P.direction[0]=0;P.direction[1]=0;L=S.vectors.items[1];L.vector[0]=O[0];L.vector[1]=O[1];L.texCoords[0]=
0;L.texCoords[1]=1;L.direction[0]=0;L.direction[1]=0;S.vectors.count=2;O=S.lists[x.ENTRY];O.items[0]=0;O.items[1]=1;O.count=2;O=S.lists[x.EXIT];O.items[0]=0;O.items[1]=1;O.count=2;S.lists[x.CAP].count=0;S.capCenter=void 0};R.prototype.miterJoin=function(S,O,L){var P=d(c[0],O),X=d(c[1],L),Q=c[2];Q[0]=P[0]+X[0];Q[1]=P[1]+X[1];X=n(c[3],Q);P=g(X,P);X=h(c[4],X,1/P);P=l(c[5],X);this._distanceAlongCorrection?(Q=S.vectors.items[0],Q.vector[0]=X[0],Q.vector[1]=X[1],Q.texCoords[0]=0,Q.texCoords[1]=-1,Q.direction[0]=
O[0],Q.direction[1]=O[1],Q=S.vectors.items[1],Q.vector[0]=P[0],Q.vector[1]=P[1],Q.texCoords[0]=0,Q.texCoords[1]=1,Q.direction[0]=O[0],Q.direction[1]=O[1],O=S.vectors.items[2],O.vector[0]=X[0],O.vector[1]=X[1],O.texCoords[0]=0,O.texCoords[1]=-1,O.direction[0]=L[0],O.direction[1]=L[1],O=S.vectors.items[3],O.vector[0]=P[0],O.vector[1]=P[1],O.texCoords[0]=0,O.texCoords[1]=1,O.direction[0]=L[0],O.direction[1]=L[1],S.vectors.count=4,L=S.lists[x.ENTRY],L.items[0]=0,L.items[1]=1,L.count=2,L=S.lists[x.EXIT],
L.items[0]=2,L.items[1]=3):(Q=S.vectors.items[0],Q.vector[0]=X[0],Q.vector[1]=X[1],Q.texCoords[0]=0,Q.texCoords[1]=-1,Q.direction[0]=0,Q.direction[1]=0,Q=S.vectors.items[1],Q.vector[0]=P[0],Q.vector[1]=P[1],Q.texCoords[0]=0,Q.texCoords[1]=1,Q.direction[0]=0,Q.direction[1]=0,S.vectors.count=2,L=S.lists[x.ENTRY],L.items[0]=0,L.items[1]=1,L.count=2,L=S.lists[x.EXIT],L.items[0]=0,L.items[1]=1);L.count=2;S.lists[x.CAP].count=0;S.capCenter=void 0};R.prototype.bevelJoin=function(S,O,L,P){var X=P*P;P=e(O,
L);var Q=0<P?[-1,1]:[1,-1],K=Q[0];Q=Q[1];var U=0<P?l(c[0],d(c[1],O)):d(c[2],O),da=0<P?l(c[3],d(c[4],L)):d(c[5],L),fa=c[6];fa[0]=U[0]+da[0];fa[1]=U[1]+da[1];var ia=n(c[7],fa),la=l(c[8],ia),ma=g(ia,U);fa=e(ia,U);var ta=Math.abs(fa/ma);fa=1+ta*ta;var ua=fa<B?[ta,this._distanceAlongCorrection]:[Math.sqrt(B-1),!0],Ca=ua[0];ua=ua[1];var xa=fa<X?[ta,this._distanceAlongCorrection]:[Math.sqrt(X-1),!0];ta=xa[0];(xa=xa[1])&&ua?(ua=S.vectors.items[0],t(ua.vector,l(c[9],U),h(c[10],l(c[11],O),Ca)),ua.texCoords[0]=
0,ua.texCoords[1]=K,ua.direction[0]=this._distanceAlongCorrection?O[0]:0,ua.direction[1]=this._distanceAlongCorrection?O[1]:0,la=S.vectors.items[1],t(la.vector,l(c[12],da),h(c[13],L,Ca)),la.texCoords[0]=0,la.texCoords[1]=K,la.direction[0]=this._distanceAlongCorrection?L[0]:0,la.direction[1]=this._distanceAlongCorrection?L[1]:0,K=S.vectors.items[2],K.vector[0]=0,K.vector[1]=0,K.texCoords[0]=0,K.texCoords[1]=0,K.direction[0]=0,K.direction[1]=0,K=S.vectors.items[3],t(K.vector,U,h(c[14],O,ta)),K.texCoords[0]=
0,K.texCoords[1]=Q,K.direction[0]=this._distanceAlongCorrection?O[0]:0,K.direction[1]=this._distanceAlongCorrection?O[1]:0,O=S.vectors.items[4],t(O.vector,da,h(c[15],l(c[16],L),ta)),O.texCoords[0]=0,O.texCoords[1]=Q,O.direction[0]=this._distanceAlongCorrection?L[0]:0,O.direction[1]=this._distanceAlongCorrection?L[1]:0,S.vectors.count=5,L=S.lists[x.ENTRY],L.items[0]=0,L.items[1]=2,L.items[2]=3,L.count=3,L=S.lists[x.EXIT],L.items[0]=1,L.items[1]=2,L.items[2]=4,L.count=3,fa<X?(X=S.lists[x.CAP],X.count=
0,S.capCenter=void 0):(X=S.lists[x.CAP],X.items[0]=3,X.items[1]=4,X.count=2,S.capCenter=2)):!xa&&ua?(ua=S.vectors.items[0],t(ua.vector,l(c[9],U),h(c[10],l(c[11],O),Ca)),ua.texCoords[0]=0,ua.texCoords[1]=K,ua.direction[0]=this._distanceAlongCorrection?O[0]:0,ua.direction[1]=this._distanceAlongCorrection?O[1]:0,la=S.vectors.items[1],t(la.vector,l(c[12],da),h(c[13],L,Ca)),la.texCoords[0]=0,la.texCoords[1]=K,la.direction[0]=this._distanceAlongCorrection?L[0]:0,la.direction[1]=this._distanceAlongCorrection?
L[1]:0,K=S.vectors.items[2],K.vector[0]=0,K.vector[1]=0,K.texCoords[0]=0,K.texCoords[1]=0,K.direction[0]=0,K.direction[1]=0,K=S.vectors.items[3],h(K.vector,ia,1/ma),K.texCoords[0]=0,K.texCoords[1]=Q,K.direction[0]=0,K.direction[1]=0,S.vectors.count=4,L=S.lists[x.ENTRY],L.items[0]=0,L.items[1]=2,L.items[2]=3,L.count=3,L=S.lists[x.EXIT],L.items[0]=1,L.items[1]=2,L.items[2]=3,L.count=3,S.lists[x.CAP].count=0,S.capCenter=void 0):xa&&!ua?(ua=S.vectors.items[0],h(ua.vector,la,1/ma),ua.texCoords[0]=0,ua.texCoords[1]=
K,ua.direction[0]=0,ua.direction[1]=0,la=S.vectors.items[1],la.vector[0]=0,la.vector[1]=0,la.texCoords[0]=0,la.texCoords[1]=0,la.direction[0]=0,la.direction[1]=0,K=S.vectors.items[2],t(K.vector,U,h(c[9],O,ta)),K.texCoords[0]=0,K.texCoords[1]=Q,K.direction[0]=this._distanceAlongCorrection?O[0]:0,K.direction[1]=this._distanceAlongCorrection?O[1]:0,K=S.vectors.items[3],t(K.vector,da,h(c[10],l(c[11],L),ta)),K.texCoords[0]=0,K.texCoords[1]=Q,K.direction[0]=this._distanceAlongCorrection?L[0]:0,K.direction[1]=
this._distanceAlongCorrection?L[1]:0,S.vectors.count=4,L=S.lists[x.ENTRY],L.items[0]=0,L.items[1]=1,L.items[2]=2,L.count=3,L=S.lists[x.EXIT],L.items[0]=0,L.items[1]=1,L.items[2]=3,L.count=3,fa<X?(X=S.lists[x.CAP],X.count=0,S.capCenter=void 0):(X=S.lists[x.CAP],X.items[0]=2,X.items[1]=3,X.count=2,S.capCenter=1)):xa||ua||(ua=S.vectors.items[0],h(ua.vector,la,1/ma),ua.texCoords[0]=0,ua.texCoords[1]=K,ua.direction[0]=0,ua.direction[1]=0,la=S.vectors.items[1],h(la.vector,ia,1/ma),la.texCoords[0]=0,la.texCoords[1]=
Q,la.direction[0]=0,la.direction[1]=0,S.vectors.count=2,L=S.lists[x.ENTRY],L.items[0]=0,L.items[1]=1,L.count=2,L=S.lists[x.EXIT],L.items[0]=0,L.items[1]=1,L.count=2,S.lists[x.CAP].count=0,S.capCenter=void 0);0>P&&(v(S.lists[x.ENTRY]),v(S.lists[x.EXIT]))};R.prototype.roundJoin=function(S,O,L,P){var X=e(O,L),Q=0<X?[-1,1]:[1,-1],K=Q[0];Q=Q[1];var U=0<X?l(c[0],d(c[1],O)):d(c[2],O),da=0<X?l(c[3],d(c[4],L)):d(c[5],L),fa=c[6];fa[0]=U[0]+da[0];fa[1]=U[1]+da[1];var ia=n(c[7],fa);fa=l(c[8],ia);var la=g(ia,
U);ia=e(ia,U);ia=Math.abs(ia/la);var ma=1+ia*ia<B?[ia,this._distanceAlongCorrection]:[Math.sqrt(B-1),!0];ia=ma[0];ma[1]?(ma=S.vectors.items[0],ma.vector[0]=U[0],ma.vector[1]=U[1],ma.texCoords[0]=0,ma.texCoords[1]=Q,ma.direction[0]=0,ma.direction[1]=0,ma=S.vectors.items[1],ma.vector[0]=da[0],ma.vector[1]=da[1],ma.texCoords[0]=0,ma.texCoords[1]=Q,ma.direction[0]=0,ma.direction[1]=0,ma=S.vectors.items[2],t(ma.vector,l(c[9],U),h(c[10],l(c[11],O),ia)),ma.texCoords[0]=0,ma.texCoords[1]=K,ma.direction[0]=
this._distanceAlongCorrection?O[0]:0,ma.direction[1]=this._distanceAlongCorrection?O[1]:0,O=S.vectors.items[3],t(O.vector,l(c[12],da),h(c[13],L,ia)),O.texCoords[0]=0,O.texCoords[1]=K,O.direction[0]=this._distanceAlongCorrection?L[0]:0,O.direction[1]=this._distanceAlongCorrection?L[1]:0,L=S.vectors.items[4],L.vector[0]=0,L.vector[1]=0,L.texCoords[0]=0,L.texCoords[1]=0,L.direction[0]=0,L.direction[1]=0,S.vectors.count=5,L=S.lists[x.ENTRY],L.items[0]=2,L.items[1]=4,L.items[2]=0,L.count=3,L=S.lists[x.EXIT],
L.items[0]=3,L.items[1]=4,L.items[2]=1,L.count=3,S.capCenter=4):(ma=S.vectors.items[0],ma.vector[0]=U[0],ma.vector[1]=U[1],ma.texCoords[0]=0,ma.texCoords[1]=Q,ma.direction[0]=0,ma.direction[1]=0,ma=S.vectors.items[1],ma.vector[0]=da[0],ma.vector[1]=da[1],ma.texCoords[0]=0,ma.texCoords[1]=Q,ma.direction[0]=0,ma.direction[1]=0,ma=S.vectors.items[2],h(ma.vector,fa,1/la),ma.texCoords[0]=0,ma.texCoords[1]=K,ma.direction[0]=0,ma.direction[1]=0,O=S.vectors.items[3],O.vector[0]=0,O.vector[1]=0,O.texCoords[0]=
0,O.texCoords[1]=0,O.direction[0]=0,O.direction[1]=0,S.vectors.count=4,L=S.lists[x.ENTRY],L.items[0]=2,L.items[1]=3,L.items[2]=0,L.count=3,L=S.lists[x.EXIT],L.items[0]=2,L.items[1]=3,L.items[2]=1,L.count=3,S.capCenter=3);q(u,U,da,P,0>X);P=S.vectors.count;U=S.lists[x.CAP];for(da=U.items[0]=0;da<u.count;++da)L=u.items[da],K=S.vectors.items[P+da],K.vector[0]=L[0],K.vector[1]=L[1],K.texCoords[0]=0,K.texCoords[1]=Q,K.direction[0]=0,K.direction[1]=0,U.items[da+1]=P+da;U.items[u.count+1]=1;U.count=u.count+
2;S.vectors.count=P+u.count;0>X&&(v(S.lists[x.ENTRY]),v(S.lists[x.EXIT]))};R.prototype.unitRoundJoin=function(S,O,L,P){var X=e(O,L),Q=0<X?[-1,1]:[1,-1],K=Q[0];Q=Q[1];O=0<X?l(c[0],d(c[1],O)):d(c[2],O);L=0<X?l(c[3],d(c[4],L)):d(c[5],L);var U=S.vectors.items[0];U.vector[0]=O[0];U.vector[1]=O[1];U.texCoords[0]=0;U.texCoords[1]=Q;U.direction[0]=0;U.direction[1]=0;U=S.vectors.items[1];U.vector[0]=L[0];U.vector[1]=L[1];U.texCoords[0]=0;U.texCoords[1]=Q;U.direction[0]=0;U.direction[1]=0;U=S.vectors.items[2];
l(U.vector,O);U.texCoords[0]=0;U.texCoords[1]=K;U.direction[0]=0;U.direction[1]=0;U=S.vectors.items[3];l(U.vector,L);U.texCoords[0]=0;U.texCoords[1]=K;U.direction[0]=0;U.direction[1]=0;K=S.vectors.items[4];K.vector[0]=0;K.vector[1]=0;K.texCoords[0]=0;K.texCoords[1]=0;K.direction[0]=0;K.direction[1]=0;S.vectors.count=5;K=S.lists[x.ENTRY];K.items[0]=2;K.items[1]=0;K.count=2;K=S.lists[x.EXIT];K.items[0]=3;K.items[1]=1;K.count=2;S.capCenter=4;q(u,O,L,P,0>X);P=S.vectors.count;O=S.lists[x.CAP];for(K=O.items[0]=
0;K<u.count;++K)L=u.items[K],U=S.vectors.items[P+K],U.vector[0]=L[0],U.vector[1]=L[1],U.texCoords[0]=0,U.texCoords[1]=Q,U.direction[0]=0,U.direction[1]=0,O.items[K+1]=P+K;O.items[u.count+1]=1;O.count=u.count+2;S.vectors.count=P+u.count;0>X&&(v(S.lists[x.ENTRY]),v(S.lists[x.EXIT]))};R.prototype.rectJoin=function(S,O,L){O=d(c[0],O);L=d(c[1],L);var P=S.vectors.items[0];P.vector[0]=O[0];P.vector[1]=O[1];P.texCoords[0]=0;P.texCoords[1]=-1;P.direction[0]=0;P.direction[1]=0;P=S.vectors.items[1];P.vector[0]=
L[0];P.vector[1]=L[1];P.texCoords[0]=0;P.texCoords[1]=-1;P.direction[0]=0;P.direction[1]=0;P=S.vectors.items[2];l(P.vector,O);P.texCoords[0]=0;P.texCoords[1]=1;P.direction[0]=0;P.direction[1]=0;O=S.vectors.items[3];l(O.vector,L);O.texCoords[0]=0;O.texCoords[1]=1;O.direction[0]=0;O.direction[1]=0;S.vectors.count=4;O=S.lists[x.ENTRY];O.items[0]=0;O.items[1]=2;O.count=2;O=S.lists[x.EXIT];O.items[0]=1;O.items[1]=3;O.count=2;S.capCenter=void 0};return R}();k.Tessellator=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../color ../../definitions ../../enums ../../number ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r){Object.defineProperty(k,"__esModule",{value:!0});var q=f.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");D=function(v){function x(y,B,z,b,c,m,u,w,A,C,E){if(255<u||255<w)q.error("mapview-oversized-resource","Marker size was clamped to the maximum allowed value of 200x200 pixels"),u>w?(w*=255/u,u=255):(u*=255/w,w=255);var G=v.call(this)||this;G.geometryType=l.WGLGeometryType.MARKER;var F=n.create(),I=p.create(),M=E.sdf?.5:1;p.translate(I,I,new Float32Array([M*
z,M*-b]));c&&p.rotate(I,I,3.14159265359/180*c);G._materialStore=y;G.vvFlags=B;G._materialId=y.createSpriteMaterial(E,G.geometryType,B);G._fillColor=m;G._outlineColor=A;G._sizeOutlineWidth=h.i8888to32(u,w,C,0);y=Math.round(E.rect.x/4);B=Math.round(E.rect.y/4);c=y+Math.round(E.rect.width/4);E=B+Math.round(E.rect.height/4);F.set([-.5*u,-.5*w]);n.transformMat2d(F,F,I);G._offsetUpperLeft=h.i1616to32(F[0],F[1]);G._texUpperLeft=h.i8888to32(y,B,0,0);F.set([.5*u,-.5*w]);n.transformMat2d(F,F,I);G._offsetUpperRight=
h.i1616to32(F[0],F[1]);G._texUpperRight=h.i8888to32(c,B,0,0);F.set([-.5*u,.5*w]);n.transformMat2d(F,F,I);G._offsetBottomLeft=h.i1616to32(F[0],F[1]);G._texBottomLeft=h.i8888to32(y,E,0,0);F.set([.5*u,.5*w]);n.transformMat2d(F,F,I);G._offsetBottomRight=h.i1616to32(F[0],F[1]);G._texBottomRight=h.i8888to32(c,E,0,0);G.height=w;G.width=u;G.xOffset=z;G.yOffset=b;return G}a(x,v);x.fromPictureMarker=function(y,B,z,b,c){c=Math.round(g.pt2px(z.width));var m=Math.round(g.pt2px(z.height)),u=e.PICTURE_FILL_COLOR,
w=Math.round(g.pt2px(z.xoffset||0)),A=Math.round(g.pt2px(z.yoffset||0));return new x(y,B,w,A,z.angle,u,c,m,0,0,b)};x.fromSimpleMarker=function(y,B,z,b,c){c=d.premultiplyAlphaRGBA(z.color);var m=Math.round(g.pt2px(z.size)),u=Math.round(g.pt2px(z.xoffset||0)),w=Math.round(g.pt2px(z.yoffset||0)),A=z.outline,C=(A&&A.color&&d.premultiplyAlphaRGBA(A.color))|0;A=(A&&A.width&&Math.round(g.pt2px(A.width)))|0;return new x(y,B,u,w,z.angle,c,m,m,C,A,b)};x.prototype.writeMesh=function(y,B,z,b,c,m,u){m=this._materialStore.get(this._materialId);
var w=B.indexVector;B=B.get("geometry");var A=new t(b,this.geometryType,this._materialId),C=this._getOffset(B,m);y.push(A);A.vertexFrom=C;A.indexFrom=w.length;switch(z){case "esriGeometryPoint":z=c.geometry;y=z.x;z=z.y;this._writeVertices(A,B,b,this._getPos(y,z),m,u);this._writeIndices(A,w,C);break;case "esriGeometryPolyline":this._writeMany(A,w,B,C,b,c.geometry.paths[0],m,u);break;case "esriGeometryPolygon":(z=c.centroid)?(y=z.x,z=z.y,this._writeVertices(A,B,b,this._getPos(y,z),m,u),this._writeIndices(A,
w,C)):q.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(A,w,B,C,b,c.geometry.points,m,u);break;default:q.error("Unable to handle geometryType: "+z)}};x.prototype._getPos=function(y,B){return h.i1616to32(y,B)};x.prototype._writeMany=function(y,B,z,b,c,m,u,w){for(var A=0,C=0,E=0,G=0;G<m.length;G++){var F=m[G],I=F[0];F=F[1];this._writeVertices(y,z,c,this._getPos(I+A,F+C),u,w);this._writeIndices(y,B,b+E);A+=I;C+=F;E+=4}};
x.prototype._getOffset=function(y,B){var z=B.materialKeyInfo.hasVV()?11:7;return y.length/z};x.prototype._writeVertices=function(y,B,z,b,c,m){B.push(b);B.push(this._offsetUpperLeft);B.push(this._texUpperLeft);B.push(z);B.push(this._fillColor);B.push(this._outlineColor);B.push(this._sizeOutlineWidth);this._writeVV(B,m,c);B.push(b);B.push(this._offsetUpperRight);B.push(this._texUpperRight);B.push(z);B.push(this._fillColor);B.push(this._outlineColor);B.push(this._sizeOutlineWidth);this._writeVV(B,m,
c);B.push(b);B.push(this._offsetBottomLeft);B.push(this._texBottomLeft);B.push(z);B.push(this._fillColor);B.push(this._outlineColor);B.push(this._sizeOutlineWidth);this._writeVV(B,m,c);B.push(b);B.push(this._offsetBottomRight);B.push(this._texBottomRight);B.push(z);B.push(this._fillColor);B.push(this._outlineColor);B.push(this._sizeOutlineWidth);this._writeVV(B,m,c);y.vertexCount+=4};x.prototype._writeVV=function(y,B,z){z.materialKeyInfo.hasVV()&&(y.push(B[l.VVType.SIZE]),y.push(B[l.VVType.COLOR]),
y.push(B[l.VVType.OPACITY]),y.push(B[l.VVType.ROTATION]))};x.prototype._writeIndices=function(y,B,z){B.push(z+0);B.push(z+1);B.push(z+2);B.push(z+1);B.push(z+3);B.push(z+2);y.indexCount+=6};return x}(r["default"]);k["default"]=D})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat2d":function(){define(["./common"],function(D){var k={create:function(){var a=new D.ARRAY_TYPE(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var f=new D.ARRAY_TYPE(6);f[0]=a[0];f[1]=a[1];f[2]=a[2];
f[3]=a[3];f[4]=a[4];f[5]=a[5];return f},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},fromValues:function(a,f,g,p,n,d){var e=new D.ARRAY_TYPE(6);e[0]=a;e[1]=f;e[2]=g;e[3]=p;e[4]=n;e[5]=d;return e},set:function(a,f,g,p,n,d,e){a[0]=f;a[1]=g;a[2]=p;a[3]=n;a[4]=d;a[5]=e;return a},invert:function(a,f){var g=f[0],p=f[1],n=f[2],d=f[3],e=f[4],l=f[5],h=g*d-p*n;if(!h)return null;h=1/h;a[0]=d*
h;a[1]=-p*h;a[2]=-n*h;a[3]=g*h;a[4]=(n*l-d*e)*h;a[5]=(p*e-g*l)*h;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,f,g){var p=f[0],n=f[1],d=f[2],e=f[3],l=f[4];f=f[5];var h=g[0],t=g[1],r=g[2],q=g[3],v=g[4];g=g[5];a[0]=p*h+d*t;a[1]=n*h+e*t;a[2]=p*r+d*q;a[3]=n*r+e*q;a[4]=p*v+d*g+l;a[5]=n*v+e*g+f;return a}};k.mul=k.multiply;k.rotate=function(a,f,g){var p=f[0],n=f[1],d=f[2],e=f[3],l=f[4];f=f[5];var h=Math.sin(g);g=Math.cos(g);a[0]=p*g+d*h;a[1]=n*g+e*h;a[2]=p*-h+d*g;a[3]=
n*-h+e*g;a[4]=l;a[5]=f;return a};k.scale=function(a,f,g){var p=f[1],n=f[2],d=f[3],e=f[4],l=f[5],h=g[0];g=g[1];a[0]=f[0]*h;a[1]=p*h;a[2]=n*g;a[3]=d*g;a[4]=e;a[5]=l;return a};k.translate=function(a,f,g){var p=f[0],n=f[1],d=f[2],e=f[3],l=f[4];f=f[5];var h=g[0];g=g[1];a[0]=p;a[1]=n;a[2]=d;a[3]=e;a[4]=p*h+d*g+l;a[5]=n*h+e*g+f;return a};k.fromRotation=function(a,f){var g=Math.sin(f),p=Math.cos(f);a[0]=p;a[1]=g;a[2]=-g;a[3]=p;a[4]=0;a[5]=0;return a};k.fromScaling=function(a,f){a[0]=f[0];a[1]=0;a[2]=0;a[3]=
f[1];a[4]=0;a[5]=0;return a};k.fromTranslation=function(a,f){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=f[0];a[5]=f[1];return a};k.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};k.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};k.add=function(a,f,g){a[0]=f[0]+g[0];a[1]=f[1]+g[1];a[2]=f[2]+g[2];a[3]=f[3]+g[3];a[4]=f[4]+g[4];a[5]=f[5]+g[5];return a};k.subtract=function(a,f,g){a[0]=
f[0]-g[0];a[1]=f[1]-g[1];a[2]=f[2]-g[2];a[3]=f[3]-g[3];a[4]=f[4]-g[4];a[5]=f[5]-g[5];return a};k.sub=k.subtract;k.multiplyScalar=function(a,f,g){a[0]=f[0]*g;a[1]=f[1]*g;a[2]=f[2]*g;a[3]=f[3]*g;a[4]=f[4]*g;a[5]=f[5]*g;return a};k.multiplyScalarAndAdd=function(a,f,g,p){a[0]=f[0]+g[0]*p;a[1]=f[1]+g[1]*p;a[2]=f[2]+g[2]*p;a[3]=f[3]+g[3]*p;a[4]=f[4]+g[4]*p;a[5]=f[5]+g[5]*p;return a};k.exactEquals=function(a,f){return a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]&&a[4]===f[4]&&a[5]===f[5]};k.equals=
function(a,f){var g=a[0],p=a[1],n=a[2],d=a[3],e=a[4],l=a[5],h=f[0],t=f[1],r=f[2],q=f[3],v=f[4],x=f[5];return Math.abs(g-h)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(h))&&Math.abs(p-t)<=D.EPSILON*Math.max(1,Math.abs(p),Math.abs(t))&&Math.abs(n-r)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(d-q)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(e-v)<=D.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(l-x)<=D.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))};return k})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../Geometry ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ../../util/BidiText".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v){Object.defineProperty(k,"__esModule",{value:!0});var x=f.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),y=24*1.2,B=function(){function z(b,c,m,u,w,A,C,E,G){this.materialId=b;this.vertexOffsetUpperLeft=c;this.vertexOffsetUpperRight=m;this.vertexOffsetLowerLeft=u;this.vertexOffsetLowerRight=w;this.texFontSizeUpperLeft=A;this.texFontSizeUpperRight=C;this.texFontSizeLowerLeft=E;this.texFontSizeLowerRight=G}z.from=function(b,c,m,u,w){var A=b.glyphMosaicItem,
C=A.rect,E=A.metrics,G=Math.round(C.x/4),F=Math.round(C.y/4);A=G+Math.round(C.width/4);var I=F+Math.round(C.height/4);if(b.codePoint){var M=b.x+0+E.left;b=b.y+-17-E.top;b=new e.Point(M-4,b-4);C=new e.Point(b.x+C.width,b.y+C.height)}else M=b.x,b=b.y,b=new e.Point(M,b),C=new e.Point(b.x+E.width,b.y+E.height);E=new e.Point(b.x,C.y);M=new e.Point(C.x,b.y);if(m){var Y=Math.cos(m);m=Math.sin(m);b.rotate(Y,m);C.rotate(Y,m);E.rotate(Y,m);M.rotate(Y,m)}m=l.i1616to32(8*b.x,8*b.y);b=l.i1616to32(8*M.x,8*M.y);
E=l.i1616to32(8*E.x,8*E.y);C=l.i1616to32(8*C.x,8*C.y);M=l.i8888to32(G,F,u,w);F=l.i8888to32(A,F,u,w);G=l.i8888to32(G,I,u,w);u=l.i8888to32(A,I,u,w);return new z(c,m,b,E,C,M,F,G,u)};return z}();k.ComputedGlyph=B;D=function(z){function b(c,m,u){var w=z.call(this)||this;w.geometryType=d.WGLGeometryType.TEXT;var A=u.haloColor;w.color=(u.color&&p.premultiplyAlphaRGBA(u.color))|0;w.textSize=g.pt2px(u.font.size);var C=u.yoffset/u.font.size;w.shapingXOffset=u.xoffset/u.font.size*24;w.shapingYOffset=24*C;w.haloColor=
(A&&p.premultiplyAlphaRGBA(A))|0;w.haloSize=10*g.pt2px(g.toPt(u.haloSize||0));w.textPropColor=w.color||n.PICTURE_FILL_COLOR;w.textPropSize=g.pt2px(u.font.size);w.textPropAngle=u.angle*Math.PI/180;w.xOffset=g.pt2px(u.xoffset);w.yOffset=g.pt2px(u.yoffset);w.textPropHAnchor="left"===u.horizontalAlignment?0:"right"===u.horizontalAlignment?1:.5;w.textPropVAnchor="top"===u.verticalAlignment?0:"bottom"===u.verticalAlignment?1:.5;w.textPropHaloColor=w.haloColor||4294967295;w.textPropHaloSize=g.pt2px(g.toPt(u.haloSize||
0));w._materialStore=c;w.vvFlags=m;return w}a(b,z);b.fromText=function(c,m,u,w,A){c=new b(c,m,u);c.computeGlyphs(A,u.text,!1);return c};b.prototype.writeMesh=function(c,m,u,w,A,C,E){C=m.indexVector;var G=m.get("geometry");m=m.get("visibility");var F=this._getOffset(G);switch(u){case "esriGeometryPoint":A=A.geometry;u=A.x;A=A.y;this._writeVertices(c,C,G,m,F,w,u,A,E);break;case "esriGeometryPolygon":if(A.centroid){A=A.centroid;u=A.x;A=A.y;this._writeVertices(c,C,G,m,F,w,u,A,E);break}default:x.error("Unable to handle geometryType: "+
u)}};b.prototype.computeGlyphs=function(c,m,u){if(!m||!m.length)return this._computedGlyphs=[],null;c=this._computeShaping(c,240,y,0,this.shapingXOffset,this.shapingYOffset,this.textPropHAnchor,this.textPropVAnchor,.5);m=v.bidiText(m);m=c.getShaping(m[0],m[1]);c=Array(m.length);for(var w=0;w<m.length;w++){var A=this.textPropAngle,C=this.textSize,E=this.haloSize,G=this._materialStore.createGlyphMaterial(m[w].glyphMosaicItem,d.WGLGeometryType.TEXT,this.vvFlags);c[w]=B.from(m[w],G,A,C,E)}this._computedGlyphs=
c;if(!u)return null;u=h.getBox(m);u.width*=this.textSize/24;u.height*=this.textSize/24;return new r["default"](u.x,u.y,u.width,u.height)};b.prototype._computeShaping=function(c,m,u,w,A,C,E,G,F){return this._shaping=new h([c],240,y,0,[A,C],E,G,.5)};b.prototype._getOffset=function(c){return c.length/(this.vvFlags?9:5)};b.prototype._writeVertices=function(c,m,u,w,A,C,E,G,F){var I=this._computedGlyphs,M=l.i1616to32(2*E,2*G);E=l.i1616to32(2*E+1,2*G);G=0;if(this.haloSize)for(var Y=0;Y<I.length;Y++,G+=4){var R=
I[Y].materialId,S=this._materialStore.get(R);R=new t(C,this.geometryType,R);R.vertexFrom=A;R.indexFrom=m.length;this._writeVertex(R,u,w,C,E,this.haloColor,I[Y],S,F);this._writeIndices(R,m,A+G);c.push(R)}for(Y=0;Y<I.length;Y++,G+=4)R=I[Y].materialId,S=this._materialStore.get(R),R=new t(C,this.geometryType,R),R.vertexFrom=A,R.indexFrom=m.length,this._writeVertex(R,u,w,C,M,this.color,I[Y],S,F),this._writeIndices(R,m,A+G),c.push(R)};b.prototype._writeVertex=function(c,m,u,w,A,C,E,G,F){m.push(A);m.push(w);
m.push(C);m.push(E.vertexOffsetUpperLeft);m.push(E.texFontSizeUpperLeft);this._writeVV(m,F,G);m.push(A);m.push(w);m.push(C);m.push(E.vertexOffsetUpperRight);m.push(E.texFontSizeUpperRight);this._writeVV(m,F,G);m.push(A);m.push(w);m.push(C);m.push(E.vertexOffsetLowerLeft);m.push(E.texFontSizeLowerLeft);this._writeVV(m,F,G);m.push(A);m.push(w);m.push(C);m.push(E.vertexOffsetLowerRight);m.push(E.texFontSizeLowerRight);this._writeVV(m,F,G);u.push(4294967295);c.vertexCount+=4};b.prototype._writeVV=function(c,
m,u){u.materialKeyInfo.hasVV()&&(c.push(m[d.VVType.SIZE]),c.push(m[d.VVType.COLOR]),c.push(m[d.VVType.OPACITY]),c.push(m[d.VVType.ROTATION]))};b.prototype._writeIndices=function(c,m,u){m.push(u+0);m.push(u+1);m.push(u+2);m.push(u+1);m.push(u+3);m.push(u+2);c.indexCount+=6};return b}(q["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","./Rect"],function(D,k,a){return function(){function f(g,p,n,d,e,l,h,t){this._glyphItems=
g;this._maxWidth=p;this._lineHeight=n;this._letterSpacing=d;this._offset=e;this._hAnchor=l;this._vAnchor=h;this._justify=t}f.prototype.getShaping=function(g,p){for(var n=this._letterSpacing,d=this._lineHeight,e=this._justify,l=this._maxWidth,h=[],t=0,r=0,q=0,v=0,x=-1,y=0,B=-1,z=g.length,b=0;b<z;b++){var c=g.charCodeAt(b);if(10===c){if(b!==z-1){if(x>=v){t=h[x];var m=t.x+t.glyphMosaicItem.metrics.advance;y=Math.max(m,y);e&&this._applyJustification(h,v,x);v=h.length}r=p?r-d:r+d;t=0;++q}}else{m=void 0;
for(var u=0,w=this._glyphItems;u<w.length&&!(m=w[u][c]);u++);if(m){h.push({codePoint:c,x:t,y:r,glyphMosaicItem:m});t+=m.metrics.advance+n;if(0<l&&t>l&&0<=B){u=B+1;m=h[u].x;y=Math.max(m,y);for(w=u;w<h.length;w++)h[w].y=p?h[w].y-d:h[w].y+d,h[w].x-=m;e&&this._applyJustification(h,v,B);r=p?r-d:r+d;t-=m;++q;v=u;B=-1}++x;32===c&&(B=h.length-1)}}}x>=v&&(t=h[x],y=Math.max(y,t.x+t.glyphMosaicItem.metrics.advance),e&&this._applyJustification(h,v,x));if(0<h.length)for(n=(e-this._hAnchor)*y,e=(-this._vAnchor*
(q+1)+.5)*d,p&&q&&(e+=q*d),n+=this._offset[0],e+=this._offset[1],d=0;d<h.length;d++)q=h[d],q.x+=n,q.y+=e;return h};f.getBox=function(g){var p=g.length;if(0!==p){for(var n=g[0].x+g[0].glyphMosaicItem.metrics.left,d=n,e=g[0].y,l=e,h=e,t=1;t<p;t++){var r=g[t],q=r.x+r.glyphMosaicItem.metrics.left;q<n&&(n=q);q>d&&(d=q);r=r.y;r<e&&(e=r);r>l&&(l=r);r!==h&&(d=Math.max(d,g[t-1].x+g[t-1].glyphMosaicItem.metrics.left+g[t-1].glyphMosaicItem.metrics.width),h=r)}d=Math.max(d,g[p-1].x+g[p-1].glyphMosaicItem.metrics.left+
g[p-1].glyphMosaicItem.metrics.width);l+=12;return{x:n,y:l,width:d-n,height:l-(e-12)}}};f.addDecoration=function(g,p){var n=g.length;if(0!==n){for(var d=g[0].x+g[0].glyphMosaicItem.metrics.left,e=g[0].y,l=1;l<n;l++){var h=g[l];if(h.y!==e){var t=g[l-1].x+g[l-1].glyphMosaicItem.metrics.left+g[l-1].glyphMosaicItem.metrics.width;g.push({codePoint:0,x:d,y:e+p-3,glyphMosaicItem:{rect:new a(4,0,4,8),metrics:{width:t-d,height:8,left:0,top:0,advance:0},page:0}});e=h.y;d=h.x+h.glyphMosaicItem.metrics.left}}n=
g[n-1].x+g[n-1].glyphMosaicItem.metrics.left+g[n-1].glyphMosaicItem.metrics.width;g.push({codePoint:0,x:d,y:e+p-3,glyphMosaicItem:{rect:new a(4,0,4,8),metrics:{width:n-d,height:8,left:0,top:0,advance:0},page:0}})}};f.prototype._applyJustification=function(g,p,n){var d=g[n];for(d=(d.x+d.glyphMosaicItem.metrics.advance)*this._justify;p<=n;p++)g[p].x-=d};return f}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(D,k){return function(){function a(f,
g,p,n){void 0===f&&(f=0);void 0===g&&(g=0);void 0===p&&(p=0);void 0===n&&(n=0);this.x=f;this.y=g;this.width=p;this.height=n}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});var f=new a;k.bidiText=function(g){if(!f.hasBidiChar(g))return[g,
!1];var p="rtl"===f.checkContextual(g)?"IDNNN":"ICNNN";return[f.bidiTransform(g,p,"VLYSN"),!0]}})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require","exports","../enums","../visualVariablesUtils"],function(D,k,a,f){function g(n,d){void 0===d&&(d=!1);var e=a.WGLVVFlag.SIZE_FIELD_STOPS|a.WGLVVFlag.SIZE_MINMAX_VALUE|a.WGLVVFlag.SIZE_SCALE_STOPS|a.WGLVVFlag.SIZE_UNIT_VALUE,l=(n&(a.WGLVVTarget.FIELD_TARGETS_OUTLINE|a.WGLVVTarget.MINMAX_TARGETS_OUTLINE|a.WGLVVTarget.SCALE_TARGETS_OUTLINE|
a.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return d?e&l:e&~l}function p(n){var d=g(n,!1);return n&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY|a.WGLVVFlag.ROTATION|d)}Object.defineProperty(k,"__esModule",{value:!0});k.getVVFlags=function(n){if(!n)return a.WGLVVFlag.NONE;for(var d=0,e=0;e<n.length;e++){var l=n[e];if("size"===l.type){var h=f.getTypeOfSizeVisualVariable(l);d|=h;"outline"===l.target&&(d|=h<<4)}else"color"===l.type?d|=a.WGLVVFlag.COLOR:"opacity"===l.type?d|=a.WGLVVFlag.OPACITY:"rotation"===l.type&&
(d|=a.WGLVVFlag.ROTATION)}return d};k.getSizeFlagsMask=g;k.getMarkerVVFlags=p;k.getFillVVFlags=function(n){return n&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY)};k.getLineVVFlags=function(n,d){if(d){var e=g(n,!0);return n&e}e=g(n,!1);return n&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY|e)};k.getTextVVFlags=function(n){return p(n)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../../../../../geometry/support/centroid ../../color ../../enums ../../fontUtils ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ./WGLTextTemplate".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y){Object.defineProperty(k,"__esModule",{value:!0});var B=f.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),z=24*1.2,b=t.i8888to32(255,255,255,255),c={xOffset:0,yOffset:0,width:0,height:0};D=function(m){function u(w,A,C){var E=m.call(this)||this;E.geometryType=l.WGLGeometryType.LABEL;E.vvFlags=0;E._textBoxVerticalOffset=0;E._textBoxHorizontalOffset=0;E._refTemplate=c;E._xOffset=A.xoffset;E._yOffset=-A.yoffset;E._decorationOffset=h.getFontDecorationOffset(A.font);
var G=A.haloColor;E._color=(A.color&&e.premultiplyAlphaRGBA(A.color))|0;var F=A.yoffset/A.font.size;E._shapingXOffset=A.xoffset/A.font.size*24;E._shapingYOffset=24*F;E._haloColor=(G&&e.premultiplyAlphaRGBA(G))|0;E._haloSize=10*g.pt2px(g.toPt(A.haloSize||0));E._textPropSize=g.pt2px(A.font.size);E._textPropAngle=A.angle*Math.PI/180;E._textPropHJustification="left"===A.horizontalAlignment?0:"right"===A.horizontalAlignment?1:.5;G=0;F=.5;switch(C){case "above-center":case "above-left":case "above-right":G=
-.5;F=0;break;case "below-center":case "below-left":case "below-right":G=.5,F=1}var I=0,M=.5;switch(C){case "above-left":case "center-left":case "below-left":I=-.5;M=1;break;case "above-right":case "center-right":case "below-right":I=.5,M=0}E._textPropHAnchorPlacement=M;E._textPropVAnchorPlacement=F;E._placementDirection=[I,G];E._materialStore=w;E.symbolId=A.id;E.anchor=n.create();return E}a(u,m);u.fromText=function(w,A,C,E,G,F){return new u(w,C,G)};Object.defineProperty(u.prototype,"bounds",{get:function(){return this._bounds},
enumerable:!0,configurable:!0});u.prototype.computeGlyphs=function(w,A){var C=A.text;if(!C||!C.length)return this._computedGlyphs=[],1;C=this._computeShaping(w,240,z,0,this._shapingXOffset,this._shapingYOffset,this._textPropHAnchorPlacement,this._textPropVAnchorPlacement,this._textPropHJustification).getShaping(C,A.rtl);isNaN(this._decorationOffset)||r.addDecoration(C,this._decorationOffset);for(var E=Array(C.length),G=0;G<C.length;G++){var F=this._textPropAngle,I=this._textPropSize,M=this._haloSize,
Y=this._materialStore.createGlyphMaterial(C[G].glyphMosaicItem,l.WGLGeometryType.LABEL,this.vvFlags);E[G]=y.ComputedGlyph.from(C[G],Y,F,I,M)}this._computedGlyphs=E;if(!C||0===C.length)return 2;C=r.getBox(C);E=this._textPropSize/24;C.width*=E;C.height*=E;C.x*=E;C.y*=E;0>this._placementDirection[0]?this._textBoxHorizontalOffset=-C.x-C.width:0<this._placementDirection[0]&&(this._textBoxHorizontalOffset=-C.x);0>this._placementDirection[1]?this._textBoxVerticalOffset=-C.y:0<this._placementDirection[1]&&
(this._textBoxVerticalOffset=-C.y+C.height);G=C.width/2;F=C.height/2;this._textPropAngle&&(E=n.fromValues(-G,-F),G=n.fromValues(G,F),F=p.create(),p.rotate(F,F,this._textPropAngle),n.transformMat2d(E,E,F),n.transformMat2d(G,G,F),F=Math.abs(G[1]-E[1]),C.width=Math.abs(G[0]-E[0]),C.height=F);this._bounds=new v["default"](C.x,C.y,C.width+10,C.height+10);C=this._placementDirection[1]*(this._refTemplate.height+this._bounds.height);this._bounds.center[0]=this._placementDirection[0]*(this._refTemplate.width+
this._bounds.width)+this._xOffset;this._bounds.center[1]=C+this._yOffset;return 0};u.prototype.bindReferenceTemplate=function(w){this._refTemplate=w?w:c};u.prototype.computeAnchor=function(w,A){var C=this._refTemplate.xOffset,E=this._refTemplate.yOffset;switch(w){case "esriGeometryPoint":var G=A.geometry,F=G.x;G=G.y;this._setAnchor(F,G);break;case "esriGeometryMultipoint":F=A.geometry;G=this._computeAnchorMultipoint(F.points);F=G.x;G=G.y;this._setAnchor(F,G);break;case "esriGeometryPolygon":if(A.centroid){F=
A.centroid;this._setAnchor(F.x,F.y);break}F=A.geometry;G=this._computeAnchorRings(F.rings);if(!G)break;F=G.x;G=G.y;this._setAnchor(F,G);break;case "esriGeometryPolyline":F=A.geometry;G=this._computeAnchorRings(F.paths);if(!G)break;F=G.x;G=G.y;this._setAnchor(F,G);break;default:B.error("Unable to handle geometryType: "+w)}return n.fromValues(this.anchor[0]+C,this.anchor[1]+E)};u.prototype.writeMesh=function(w,A,C,E,G,F,I){C=A.indexVector;G=A.get("geometry");F=A.get("visibility");A=A.get("visibilityRange");
I=this._getOffset(G);var M=t.i8888to32(this._refTemplate.xOffset,-this._refTemplate.yOffset,this._placementDirection[0]*(this._refTemplate.width+10)+this._textBoxHorizontalOffset,this._placementDirection[1]*(this._refTemplate.height+10)+this._textBoxVerticalOffset);this._writeVertices(w,C,G,F,A,E,I,M,this.anchor[0],this.anchor[1])};u.prototype._setAnchor=function(w,A){this.anchor[0]=w;this.anchor[1]=A};u.prototype._computeAnchorMultipoint=function(w){return w.length&&w[0].length?{x:w[0][0],y:w[0][1]}:
null};u.prototype._computeAnchorRings=function(w){if(!w.length||!w[0].length||!w[0][0].length)return null;w=d.ringsCentroid(w,!1);return{x:w[0],y:w[1]}};u.prototype._computeShaping=function(w,A,C,E,G,F,I,M,Y){return this._shaping=new r([w],240,z,0,[G,F],I,M,Y)};u.prototype._getOffset=function(w){return w.length/5};u.prototype._writeVertices=function(w,A,C,E,G,F,I,M,Y,R){var S=this._computedGlyphs,O=t.i1616to32(2*Y,2*R);Y=t.i1616to32(2*Y+1,2*R);R=0;var L=t.i8888to32(0,(F&16711680)>>16,(F&65280)>>8,
F&255);if(this._haloSize)for(var P=0;P<S.length;P++,R+=4){var X=S[P].materialId,Q=this._materialStore.get(X);X=new q(F,this.geometryType,X);X.vertexFrom=I+R;X.indexFrom=A.length;this._writeGlyph(X,C,E,G,L,Y,this._haloColor,M,S[P],Q);this._writeIndices(X,A,I+R);w.push(X)}for(P=0;P<S.length;P++,R+=4)X=S[P].materialId,Q=this._materialStore.get(X),X=new q(F,this.geometryType,X),X.vertexFrom=I+R,X.indexFrom=A.length,this._writeGlyph(X,C,E,G,L,O,this._color,M,S[P],Q),this._writeIndices(X,A,I+R),w.push(X)};
u.prototype._writeGlyph=function(w,A,C,E,G,F,I,M,Y,R){A.push(F);A.push(I);A.push(Y.vertexOffsetUpperLeft);A.push(Y.texFontSizeUpperLeft);A.push(M);A.push(F);A.push(I);A.push(Y.vertexOffsetUpperRight);A.push(Y.texFontSizeUpperRight);A.push(M);A.push(F);A.push(I);A.push(Y.vertexOffsetLowerLeft);A.push(Y.texFontSizeLowerLeft);A.push(M);A.push(F);A.push(I);A.push(Y.vertexOffsetLowerRight);A.push(Y.texFontSizeLowerRight);A.push(M);C.push(4294967295);E.push(b);E.push(b);w.vertexCount+=4};u.prototype._writeIndices=
function(w,A,C){A.push(C+0);A.push(C+1);A.push(C+2);A.push(C+1);A.push(C+3);A.push(C+2);w.indexCount+=6};return u}(x["default"]);k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(D,k){function a(f){f=f.toLowerCase().split(" ").join("-");switch(f){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";
default:return f}}Object.defineProperty(k,"__esModule",{value:!0});k.getFullyQualifiedFontName=function(f){a:{if(f.weight)switch(f.weight.toLowerCase()){case "bold":case "bolder":var g="-bold";break a}g=""}a:{if(f.style)switch(f.style.toLowerCase()){case "italic":case "oblic":var p="-italic";break a}p=""}g+=p;return a(f.family)+(0<g.length?g:"-regular")};k.getFontDecorationOffset=function(f){switch(f.decoration.toLowerCase()){case "underline":return 8;case "line-through":return-3}return NaN}})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Matcher":function(){define(["require",
"exports","../../../../../core/tsSupport/extendsHelper","../../../../../core/Logger","../Utils"],function(D,k,a,f,g){Object.defineProperty(k,"__esModule",{value:!0});var p=f.getLogger("esri/views/2d/engine/webgl/util/Matcher");D=function(){function n(){this._defaultResult=null}n.prototype.size=function(){return 1};n.prototype.getDefault=function(){return this._defaultResult};n.prototype.setDefault=function(d){this._defaultResult=d};n.prototype.match=function(d,e){return this.getDefault()};return n}();
k["default"]=D;f=function(n){function d(e,l,h,t){var r=n.call(this)||this;r._intervals=[];r._isMaxInclusive=l;h?r._getValue=g.createArcadeFunction(h):e&&e.length?"function"===typeof e?(r._field=null,r._getValue=e):(r._field=e,r._normalizationInfo=t,r._getValue=r._getValueFromField.bind(r)):r._field=null;return r}a(d,n);d.prototype.add=function(e,l){this._intervals.push({interval:e,result:l});this._intervals.sort(function(h,t){return h.interval.min-t.interval.min})};d.prototype.size=function(){return n.prototype.size.call(this)+
this._intervals.length};d.prototype.match=function(e,l){if(!this._getValue)return this.getDefault();var h=this._getValue(e,l);if(!h&&(null===h||void 0===h||isNaN(h)))return this.getDefault();for(var t=0;t<this._intervals.length;t++){var r=this._intervals[t],q=r.interval;r=r.result;var v=this._isMaxInclusive?h<=q.max:h<q.max;if(h>=q.min&&v)return r}return this.getDefault()};d.prototype._needsNormalization=function(){var e=this._normalizationInfo;return e&&(e.normalizationField||e.normalizationTotal||
e.normalizationType)};d.prototype._getValueFromField=function(e){var l=e.attributes[this._field];if(!this._needsNormalization())return l;var h=this._normalizationInfo,t=h.normalizationField,r=h.normalizationTotal;h=h.normalizationType;e=!!t&&e.attributes[t];if(h)switch(h){case "field":return(e||void 0)&&l/e;case "log":return Math.log(l)*Math.LOG10E;case "percent-of-total":return l/r*100;default:p.error("Found unknown normalization type: "+h)}else p.error("Normalization is required, but no type was set!")};
return d}(D);k.IntervalMatcher=f;D=function(n){function d(e,l,h){var t=n.call(this)||this;t._resultsMap=new Map;h?t._getValue=g.createArcadeFunction(h):e&&e.length?"function"===typeof e[0]?(t._fields=null,t._getValue=e[0]):(t._fields=e,t._seperator=l||"",t._getValue=t._getValueFromFields.bind(t)):t._fields=null;return t}a(d,n);d.prototype.add=function(e,l){this._resultsMap.set(e.toString(),l)};d.prototype.size=function(){return n.prototype.size.call(this)+this._resultsMap.size};d.prototype.match=
function(e,l){if(!this._getValue)return this.getDefault();var h=this._getValue(e,l);if(!h&&(null===h||void 0===h))return this.getDefault();h=h.toString();return this._resultsMap.has(h)?this._resultsMap.get(h):this.getDefault()};d.prototype._getValueFromFields=function(e){for(var l=[],h=0,t=this._fields;h<t.length;h++)l.push(e.attributes[t[h]]);return l.join(this._seperator)};return d}(D);k.MapMatcher=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["require",
"exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=function(){function g(p,n,d){this.data=p;this.stride=n;this.vertexCount=d}g.decode=function(p){var n=new Uint32Array(p.data);return new g(n,p.stride,p.vertexCount)};return g}();k["default"]=a;var f=function(){function g(p,n,d){this.geometryType=p;this.indexBuffer=new Uint32Array(n);this.namedBuffers=d}g.decode=function(p){var n=p.geometryType,d=p.indexBuffer,e={},l;for(l in p.namedBuffers)e[l]=a.decode(p.namedBuffers[l]);
return new g(n,d,e)};return g}();k.VertexBuffers=f})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Reader":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=function(){function f(g){this._pos=0;this._buffer=g;this._i32View=new Int32Array(this._buffer);this._f32View=new Float32Array(this._buffer)}f.prototype.readInt32=function(){return this._i32View[this._pos++]};f.prototype.readF32=function(){return this._f32View[this._pos++]};return f}();
k["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextureManager":function(){define("require exports ../../../../config ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ./CIMSymbolHelper ./fontUtils ./GlyphMosaic ./GlyphSource ./SDFHelper ./SpriteMosaic ./Utils ../../../3d/support/imageUtils ../../../support/screenshotUtils ./SDFConverter".split(" "),function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x){function y(z){if(z.type){switch(r.normalizeSymbolType(z.type)){case "simple-marker":return z.path?
"simple-marker"+z.style+z.path:"simple-marker"+z.style;case "simple-line":return"simple-line"+z.style}if(r.isPictureSymbol(z))return z.url?z.url:z.imageData+(""+z.width+z.height)}return JSON.stringify(z)}var B=g.getLogger("esri.views.2d.engine.webgl.TextureManager");return function(){function z(){this._invalidFontsMap=new Map;this._spriteMosaic=new t(1024,1024,500);this._glyphSource=new l(a.fontsUrl+"/{fontstack}/{range}.pbf");this._glyphMosaic=new e(1024,1024,this._glyphSource);this._sdfConverter=
new x["default"](126)}Object.defineProperty(z.prototype,"sprites",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"glyphs",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});z.prototype.dispose=function(){this._spriteMosaic.dispose();this._glyphMosaic.dispose();this._rasterizationCanvas=null};z.prototype.rasterizeItem=function(b,c){void 0===c&&(c=null);return b?b.type&&-1!==b.type.toLowerCase().indexOf("3d")?(B.error(new f("mapview-invalid-type",
"Mapviewer does not support 3d symbol type: "+b.type,b)),p.resolve({glyphMosaicItems:[],spriteMosaicItem:null})):!b.type||"text"!==b.type&&"esriTS"!==b.type?this._rasterizeSpriteSymbol(b).then(function(m){return{spriteMosaicItem:m}}):this._rasterizeTextSymbol(b,c).then(function(m){return{glyphMosaicItems:m}}):(B.error(new f("mapview-null-resource","Unable to rasterize null resource")),p.resolve(null))};z.prototype.bindSpritePage=function(b,c,m,u){u||(u=9729);this._spriteMosaic.bind(b,u,c,m)};z.prototype.bindGlyphsPage=
function(b,c,m){this._glyphMosaic.bind(b,9729,c,m)};z.prototype._rasterizeTextSymbol=function(b,c){var m=this,u=d.getFullyQualifiedFontName(b.font),w=this._invalidFontsMap.has(u);return this._glyphMosaic.getGlyphItems(w?"arial-unicode-ms-regular":u,c)["catch"](function(A){B.error(new f("mapview-invalid-resource","Couldn't find font "+u+". Falling back to Arial Unicode MS Regular"));m._invalidFontsMap.set(u,!0);return m._glyphMosaic.getGlyphItems("arial-unicode-ms-regular",c)})};z.prototype._rasterizeSpriteSymbol=
function(b){var c=this;if(b&&(r.isFillSymbol(b)||r.isLineSymbol(b))&&"style"in b&&("solid"===b.style||"esriSFSSolid"===b.style||"esriSLSSolid"===b.style||"none"===b.style||"esriSFSNull"===b.style||"esriSLSNull"===b.style))return p.resolve(null);var m=y(b);if(this._spriteMosaic.has(m))return p.resolve(this._spriteMosaic.getSpriteItem(m));if("simple-marker"!==b.type&&"esriSMS"!==b.type||!b.path){if(b.url||b.imageData)return q.requestImage(b.imageData?"data:"+b.contentType+";base64,"+b.imageData:b.url).then(function(C){C=
c._rasterizeResource(C);return c._addItemToMosaic(m,C.size,C.anchor,C.image,!r.isMarkerSymbol(b),C.sdf)});var u=this._rasterizeResource(b);return p.resolve(this._addItemToMosaic(m,u.size,u.anchor,u.image,!r.isMarkerSymbol(b),u.sdf))}var w=[126,126],A=this;return this._sdfConverter.draw(b.path).then(function(C){return A._addItemToMosaic(m,w,[0,0],new Uint32Array(C.buffer),!1,!0)})};z.prototype._rasterizeResource=function(b){if(b instanceof HTMLImageElement){this._rasterizationCanvas||(this._rasterizationCanvas=
document.createElement("canvas"));this._rasterizationCanvas.width=b.width;this._rasterizationCanvas.height=b.height;var c=this._rasterizationCanvas.getContext("2d");c.drawImage(b,0,0,b.width,b.height);c=c.getImageData(0,0,b.width,b.height);c=new Uint8Array(c.data);for(var m=void 0,u=0;u<c.length;u+=4)m=c[u+3]/255,c[u]*=m,c[u+1]*=m,c[u+2]*=m;m=b.width;u=b.height;var w=c;if(500<=m||500<=u)w=b.width/b.height,1<w?(m=500,u=Math.round(500/w)):(u=500,m=Math.round(500*w)),w=new Uint8Array(4*m*u),v.resampleHermite(c,
b.width,b.height,new Uint8ClampedArray(w.buffer),m,u,!1);return{size:[m,u],anchor:[0,0],image:new Uint32Array(w.buffer),sdf:!1}}return this._rasterizeJSON(b)};z.prototype._addItemToMosaic=function(b,c,m,u,w,A){return this._spriteMosaic.addSpriteItem(b,c,m,u,w,A)};z.prototype._rasterizeJSON=function(b){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===b.type||"esriSFS"===b.type){var c=n.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,
b.style);b=c[0];var m=c[1];c=c[2];return{size:[m,c],anchor:[0,0],image:new Uint32Array(b.buffer),sdf:!1}}if("simple-line"===b.type||"esriSLS"===b.type)return c=n.SymbolHelper.rasterizeSimpleLine(this._rasterizationCanvas,b.style),b=c[0],m=c[1],c=c[2],{size:[m,c],anchor:[0,0],image:new Uint32Array(b.buffer),sdf:!0};"simple-marker"===b.type||"esriSMS"===b.type?(b=n.CIMSymbolHelper.fromSimpleMarker(b),m=!0):m=h.SDFHelper.checkSDF(b);if(m)return m=(new h.SDFHelper).buildSDF(b),b=m[0],{size:[m[1],m[2]],
anchor:[0,0],image:new Uint32Array(b.buffer),sdf:!0};var u=n.CIMSymbolHelper.rasterize(this._rasterizationCanvas,b);b=u[0];m=u[1];c=u[2];return{size:[m,c],anchor:[u[3],u[4]],image:new Uint32Array(b.buffer),sdf:!1}};return z}()})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(D,k,a){Object.defineProperty(a,"workers",{get:function(){return a.defaults.workers},set:function(f){return a.defaults.workers=f}});return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolHelper":function(){define("require exports ../../../../core/Logger ./CIMSymbolDrawHelper ./SDFHelper ../../../vectorTiles/GeometryUtils".split(" "),
function(D,k,a,f,g,p){Object.defineProperty(k,"__esModule",{value:!0});var n=a.getLogger("esri/views/2d/engine/webgl/CIMSymbolHelper");D=function(){function d(){}d.getEnvelope=function(e){if("CIMPointSymbol"!==e.type)return null;var l=new f.EnvDrawHelper;l.drawSymbol(e,{type:"point",x:0,y:0});return l.envelope()};d.rasterize=function(e,l){var h=this.getEnvelope(l);if(!h||0>=h.width||0>=h.height)return[null,0,0,0,0];var t=96/72,r=(h.x+.5*h.width)*t,q=-(h.y+.5*h.height)*t;e.width=h.width*t+2;e.height=
h.height*t+2;h=e.getContext("2d");t=f.Transformation.createScale(t,-t);t.translate(.5*e.width-r,.5*e.height-q);(new f.CanvasDrawHelper(h,t)).drawSymbol(l,{type:"point",x:0,y:0});t=h.getImageData(0,0,e.width,e.height);t=new Uint8Array(t.data);for(var v=0;v<t.length;v+=4)h=t[v+3]/255,t[v]*=h,t[v+1]*=h,t[v+2]*=h;return[t,e.width,e.height,r/e.width,q/e.height]};d.fromSimpleMarker=function(e){var l=e.style;if("circle"===l||"esriSMSCircle"===l){var h=Math.acos(.995);var t=Math.ceil(p.C_PI/h/4);0===t&&(t=
1);h=p.C_PI_BY_2/t;t*=4;l=[];l.push([50,0]);for(var r=1;r<t;r++)l.push([50*Math.cos(r*h),-50*Math.sin(r*h)]);l.push([50,0]);h={rings:[l]};t={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===l||"esriSMSCross"===l)h=0,h={rings:[[[h,50],[h,h],[50,h],[50,-h],[h,-h],[h,-50],[-h,-50],[-h,-h],[-50,-h],[-50,h],[-h,h],[-h,50],[h,50]]]},t={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===l||"esriSMSDiamond"===l)h={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},t={xmin:-50,ymin:-50,xmax:50,ymax:50};
else if("square"===l||"esriSMSSquare"===l)h={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},t={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===l||"esriSMSX"===l)h=0,h={rings:[[[0,h],[50-h,50],[50,50-h],[h,0],[50,h-50],[50-h,-50],[0,-h],[h-50,-50],[-50,h-50],[-h,0],[-50,50-h],[h-50,50],[0,h]]]},t={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===l||"esriSMSTriangle"===l)t=2/3*100,l=t-100,h={rings:[[[-57.735026918962575,l],[0,t],[57.735026918962575,l],[-57.735026918962575,l]]]},t=
{xmin:-57.735026918962575,ymin:l,xmax:57.735026918962575,ymax:t};if(h&&t){var q=[{type:"CIMSolidFill",enable:!0,color:e.color}];e.outline&&q.push({type:"CIMSolidStroke",enable:!0,width:e.outline.width,color:e.outline.color});q={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:e.angle,size:e.size,offsetX:e.xoffset,offsetY:e.yoffset,frame:t,markerGraphics:[{type:"CIMMarkerGraphic",geometry:h,symbol:{type:"CIMPolygonSymbol",symbolLayers:q}}]}]}}return q};return d}();k.CIMSymbolHelper=
D;D=function(){function d(){}d.rasterizeSimpleFill=function(e,l){e.width=8;e.height=8;var h=e.getContext("2d");h.strokeStyle="#FFFFFF";h.beginPath();if("vertical"===l||"cross"===l||"esriSFSCross"===l||"esriSFSVertical"===l)h.moveTo(0,0),h.lineTo(0,8);if("horizontal"===l||"cross"===l||"esriSFSCross"===l||"esriSFSHorizontal"===l)h.moveTo(0,0),h.lineTo(8,0);if("forward-diagonal"===l||"diagonal-cross"===l||"esriSFSDiagonalCross"===l||"esriSFSForwardDiagonal"===l)h.moveTo(0,0),h.lineTo(8,8);if("backward-diagonal"===
l||"diagonal-cross"===l||"esriSFSBackwardDiagonal"===l||"esriSFSDiagonalCross"===l)h.moveTo(8,0),h.lineTo(0,8);h.stroke();h=h.getImageData(0,0,e.width,e.height);h=new Uint8Array(h.data);for(var t,r=0;r<h.length;r+=4)t=h[r+3]/255,h[r]*=t,h[r+1]*=t,h[r+2]*=t;return[h,e.width,e.height]};d.rasterizeSimpleLine=function(e,l){switch(l){case "dash":case "esriSLSDash":var h=[3,2];break;case "dash-dot":case "esriSLSDashDot":h=[2,2,0,2];break;case "dot":case "esriSLSDot":h=[0,3];break;case "long-dash":case "esriSLSLongDash":h=
[6,3];break;case "long-dash-dot":case "esriSLSLongDashDot":h=[6,3,0,3];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":h=[2,2,0,2,0,2];break;case "short-dash":case "esriSLSShortDash":h=[2,2];break;case "short-dash-dot":case "esriSLSShortDashDot":h=[2,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":h=[2,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":h=[0,2];break;case "solid":case "esriSLSSolid":case "none":n.error("Unexpected: style does not require rasterization");
h=[0,0];break;default:n.error("Tried to rasterize SLS, but found an unexpected style: "+l+"!"),h=[0,0]}for(var t=0,r=0,q=h;r<q.length;r++){var v=q[r];t+=v}t*=16;q=31*t;r=new Float32Array(q);for(v=0;v<q;++v)r[v]=257;for(var x=q=.5,y=!0,B=0;B<h.length;B++){v=h[B];q=x;x+=16*v;for(var z=q;z<x;){for(var b=.5;31>b;){v=(31-b+1.5)*t+z-.5;var c=(b-15.5)*(b-15.5);r[v]=y?c:Math.min((z-q)*(z-q)+c,(z-x)*(z-x)+c);b++}z++}y=!y}h=r.length;q=new Uint8Array(4*h);for(v=0;v<h;++v)g.packFloat(Math.sqrt(r[v])/15,q,4*v);
return[q,t,31]};return d}();k.SymbolHelper=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolDrawHelper":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ./GeometryUtils ./Rect".split(" "),function(D,k,a,f,g,p){Object.defineProperty(k,"__esModule",{value:!0});var n=function(){function d(e){this._t=e}d.createIdentity=function(){return new d([1,0,0,0,1,0])};d.prototype.clone=function(){return new d(this._t.slice())};d.prototype.transform=
function(e){var l=this._t;return[l[0]*e[0]+l[1]*e[1]+l[2],l[3]*e[0]+l[4]*e[1]+l[5]]};d.createScale=function(e,l){return new d([e,0,0,0,l,0])};d.prototype.scale=function(e,l){var h=this._t;h[0]*=e;h[1]*=e;h[2]*=e;h[3]*=l;h[4]*=l;h[5]*=l;return this};d.prototype.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};d.createTranslate=function(e,l){return new d([0,0,e,0,0,l])};d.prototype.translate=function(e,l){var h=this._t;h[2]+=e;h[5]+=l;return this};d.createRotate=
function(e){var l=Math.cos(e);e=Math.sin(e);return new d([l,-e,0,e,l,0])};d.prototype.rotate=function(e){return this.multiply(d.createRotate(e))};d.prototype.multiply=function(e){var l=this._t;e=e._t;var h=l[1]*e[0]+l[4]*e[1],t=l[2]*e[0]+l[5]*e[1]+e[2],r=l[0]*e[3]+l[3]*e[4],q=l[1]*e[3]+l[4]*e[4],v=l[2]*e[3]+l[5]*e[4]+e[5];l[0]=l[0]*e[0]+l[3]*e[1];l[1]=h;l[2]=t;l[3]=r;l[4]=q;l[5]=v;return this};return d}();k.Transformation=n;D=function(){function d(e){this._transfos=[];this._sizeTransfos=[];this._transfos.push(e||
n.createIdentity());this._sizeTransfos.push(e?e.scaleRatio():1)}d.prototype.transformPt=function(e){return this._transfos[this._transfos.length-1].transform(e)};d.prototype.transformSize=function(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]};d.prototype.back=function(){return this._transfos[this._transfos.length-1]};d.prototype.push=function(e){var l=e.scaleRatio();e.multiply(this.back());this._transfos.push(e);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*
l)};d.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};d.prototype.drawSolidFill=function(e,l){};d.prototype.drawSolidStroke=function(e,l,h){};d.prototype.drawSymbol=function(e,l){if(e)switch(e.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(e,l)}};d.prototype.drawMultiLayerSymbol=function(e,l){if(e){var h=e.symbolLayers;if(h)for(var t=h.length;t--;){var r=h[t];if(r&&r.enable)switch(r.type){case "CIMSolidFill":this.drawSolidFill(l,
r.color);break;case "CIMSolidStroke":this.drawSolidStroke(l,r.color,r.width);break;case "CIMVectorMarker":this.drawVectorMarker(r,l)}}}};d.prototype.drawVectorMarker=function(e,l){if(e){var h=e.markerGraphics;if(h){var t=e.size,r=e.frame,q=r?r.ymax-r.ymin:0;q=t&&q?t/q:1;var v=n.createIdentity();r&&v.translate(.5*-(r.xmax+r.xmin),.5*-(r.ymax+r.ymin));var x=e.anchorPt;if(x){var y=x.x;x=x.y;"relative"===e.anchorPtUnits&&r&&(y*=(r.xmax-r.xmin)*q,x*=t);v.translate(-y,-x)}1!==q&&v.scale(q,q);e.rotation&&
v.rotate(e.rotation*g.C_DEG_TO_RAD);v.translate(e.offsetX||0,e.offsetY||0);v.translate(l.x,l.y);this.push(v);for(t=0;t<h.length;t++)(r=h[t])&&this.drawSymbol(r.symbol,r.geometry);this.pop()}}};return d}();k.CIMSymbolDrawHelper=D;f=function(d){function e(){var l=d.call(this)||this;l._xmin=l._ymin=Infinity;l._xmax=l._ymax=-Infinity;return l}a(e,d);e.prototype.envelope=function(){return new p(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};e.prototype._merge=function(l,h){l[0]-h<
this._xmin&&(this._xmin=l[0]-h);l[0]+h>this._xmax&&(this._xmax=l[0]+h);l[1]-h<this._ymin&&(this._ymin=l[1]-h);l[1]+h>this._ymax&&(this._ymax=l[1]+h)};e.prototype.drawSolidFill=function(l,h){for(var t=0,r=l.rings;t<r.length;t++){var q=r[t],v=q?q.length:0;if(2<v){this._merge(this.transformPt(q[0]),0);for(var x=1;x<v;++x)this._merge(this.transformPt(q[x]),0)}}};e.prototype.drawSolidStroke=function(l,h,t){h=.5*this.transformSize(t);t=0;for(l=l.rings||l.paths;t<l.length;t++){var r=l[t],q=r?r.length:0;
if(1<q){this._merge(this.transformPt(r[0]),h);for(var v=1;v<q;++v)this._merge(this.transformPt(r[v]),h)}}};return e}(D);k.EnvDrawHelper=f;D=function(d){function e(l,h){var t=d.call(this,h)||this;t._ctx=l;return t}a(e,d);e.prototype.drawSolidFill=function(l,h){var t=this._ctx;t.fillStyle="rgba("+Math.round(h[0])+","+Math.round(h[1])+","+Math.round(h[2])+","+h[3]/255+")";t.beginPath();for(var r=0,q=l.rings;r<q.length;r++){var v=q[r],x=v?v.length:0;if(2<x){var y=this.transformPt(v[0]);t.moveTo(y[0],
y[1]);for(var B=1;B<x;++B)y=this.transformPt(v[B]),t.lineTo(y[0],y[1]);t.closePath()}}t.fill("evenodd")};e.prototype.drawSolidStroke=function(l,h,t){var r=this._ctx;r.strokeStyle="rgba("+Math.round(h[0])+","+Math.round(h[1])+","+Math.round(h[2])+","+h[3]/255+")";r.lineWidth=this.transformSize(t)+.5;r.beginPath();h=!!l.rings;t=0;for(l=l.rings||l.paths;t<l.length;t++){var q=l[t],v=q?q.length:0;if(1<v){var x=this.transformPt(q[0]);r.moveTo(x[0],x[1]);for(var y=1;y<v;++y)x=this.transformPt(q[y]),r.lineTo(x[0],
x[1]);h&&r.closePath()}}r.stroke()};return e}(D);k.CanvasDrawHelper=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFHelper":function(){define(["require","exports","./Geometry","./Rect","../../../3d/webgl-engine/lib/Util"],function(D,k,a,f,g){function p(n,d,e){g.packFloatRGBA(n,d,e)}Object.defineProperty(k,"__esModule",{value:!0});k.packFloat=p;D=function(){function n(){}n.checkSDF=function(d){return!0};n.prototype._extractGeometry=function(d){if(!d)return null;d=d.symbolLayers;if(!d||1!==d.length)return null;
d=d[0];if(!d)return null;d=d.markerGraphics;if(!d||1!==d.length)return null;d=d[0];if(!d)return null;var e=d.geometry;if(!e||!e.rings)return null;d=[];var l=0;for(e=e.rings;l<e.length;l++){for(var h=[],t=0,r=e[l];t<r.length;t++){var q=r[t];h.push(new a.Point(q[0],q[1]))}d.push(h)}return d};n.prototype._getEnvelope=function(d){for(var e=Infinity,l=-Infinity,h=Infinity,t=-Infinity,r=0;r<d.length;r++)for(var q=0,v=d[r];q<v.length;q++){var x=v[q];x.x<e&&(e=x.x);x.x>l&&(l=x.x);x.y<h&&(h=x.y);x.y>t&&(t=
x.y)}return new f(e,h,l-e,t-h)};n.prototype.buildSDF=function(d){d=this._extractGeometry(d);if(!d)return null;var e=this._getEnvelope(d);if(0>=e.width||0>=e.height)return null;for(var l=64/Math.max(e.width,e.height),h=Math.round(e.width*l),t=Math.round(e.height*l),r=h+62,q=t+62,v=0;v<d.length;v++)for(var x=0,y=d[v];x<y.length;x++){var B=y[x];B.x-=e.x;B.y-=e.y;B.x*=l;B.y*=l;B.x+=30.5;B.y+=30.5}e=this._dist_map(d,r,q,31);this._sign_dist_map(d,r,q,31,e);return[this._encodeDistMap(e,31),r,q,h,t,l]};n.prototype._dist_map=
function(d,e,l,h){for(var t=e*l,r=new Float32Array(t),q=h*h+1,v=0;v<t;++v)r[v]=q;for(q=0;q<d.length;q++){var x=d[q],y=x.length;for(v=1;v<y;++v){var B=x[v-1],z=x[v],b=void 0,c=void 0;B.x<z.x?(b=B.x,c=z.x):(b=z.x,c=B.x);var m=void 0,u=void 0;B.y<z.y?(m=B.y,u=z.y):(m=z.y,u=B.y);var w=Math.floor(b)-h;c=Math.floor(c)+h;m=Math.floor(m)-h;u=Math.floor(u)+h;0>w&&(w=0);c>e&&(c=e);0>m&&(m=0);u>l&&(u=l);b=z.x-B.x;for(var A=z.y-B.y,C=b*b+A*A;w<c;w++)for(var E=m;E<u;E++){var G=(w-B.x)*b+(E-B.y)*A,F=void 0,I=void 0;
0>G?(F=B.x,I=B.y):G>C?(F=z.x,I=z.y):(G/=C,F=B.x+G*b,I=B.y+G*A);G=(w-F)*(w-F)+(E-I)*(E-I);F=(l-E-1)*e+w;G<r[F]&&(r[F]=G)}}}for(v=0;v<t;++v)r[v]=Math.sqrt(r[v]);return r};n.prototype._sign_dist_map=function(d,e,l,h,t){for(var r=0;r<d.length;r++)for(var q=d[r],v=q.length,x=1;x<v;++x){var y=q[x-1],B=q[x],z=void 0,b=void 0;y.x<B.x?(z=y.x,b=B.x):(z=B.x,b=y.x);var c=void 0,m=void 0;y.y<B.y?(c=y.y,m=B.y):(c=B.y,m=y.y);z=Math.floor(z);b=Math.floor(b)+1;c=Math.floor(c);m=Math.floor(m)+1;z<h&&(z=h);b>e-h&&(b=
e-h);c<h&&(c=h);for(m>l-h&&(m=l-h);c<m;++c)if(y.y>c!==B.y>c){for(var u=(l-c-1)*e,w=z;w<b;++w)w<(B.x-y.x)*(c-y.y)/(B.y-y.y)+y.x&&(t[u+w]=-t[u+w]);for(w=h;w<z;++w)t[u+w]=-t[u+w]}}};n.prototype._encodeDistMap=function(d,e){for(var l=2*e,h=d.length,t=new Uint8Array(4*h),r=0;r<h;++r)p(.5-d[r]/l,t,4*r);return t};return n}();k.SDFHelper=D})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/Util":function(){define(["require","exports","../../support/geometryUtils","./gl-matrix"],function(D,k,a,f){function g(Q,
K){if(!Q)throw new S(K);}function p(Q,K,U){return Q<K?K:Q>U?U:Q}function n(Q){return Q/180*Math.PI}function d(Q){return 180*Q/Math.PI}function e(Q,K,U){f.mat4d.multiply(K,Q,x);f.mat4d.inverse(x);for(Q=0;8>Q;++Q)f.mat4d.multiplyVec4(x,y[Q],B),f.vec3d.set3(B[0]/B[3],B[1]/B[3],B[2]/B[3],U[Q])}function l(Q,K){a.plane.fromPoints(Q[4],Q[0],Q[3],K[0]);a.plane.fromPoints(Q[1],Q[5],Q[6],K[1]);a.plane.fromPoints(Q[4],Q[5],Q[1],K[2]);a.plane.fromPoints(Q[3],Q[2],Q[6],K[3]);a.plane.fromPoints(Q[0],Q[1],Q[2],
K[4]);a.plane.fromPoints(Q[5],Q[4],Q[7],K[5])}function h(Q,K,U,da){var fa=6378137/Math.sqrt(1-k.ECCENTRICITY_SQUARED*Math.pow(Math.sin(Q),2)),ia=Math.cos(Q);da[0]=(fa+U)*Math.cos(K)*ia;da[1]=(fa*(1-k.ECCENTRICITY_SQUARED)+U)*Math.sin(Q);da[2]=-(fa+U)*Math.sin(K)*ia}function t(Q){for(var K in Q)return K}function r(Q,K){Q[12]=K[0];Q[13]=K[1];Q[14]=K[2]}function q(Q,K){void 0===K&&(K=0);for(var U=0,da=0;4>da;da++)U+=Q[K+da]*P[da];return U}function v(Q){return Q-Math.floor(Q)}Object.defineProperty(k,
"__esModule",{value:!0});var x=f.mat4d.create(),y=[f.vec4d.createFrom(-1,-1,-1,1),f.vec4d.createFrom(1,-1,-1,1),f.vec4d.createFrom(1,1,-1,1),f.vec4d.createFrom(-1,1,-1,1),f.vec4d.createFrom(-1,-1,1,1),f.vec4d.createFrom(1,-1,1,1),f.vec4d.createFrom(1,1,1,1),f.vec4d.createFrom(-1,1,1,1)],B=f.vec4d.create(),z=[f.vec3d.create(),f.vec3d.create(),f.vec3d.create(),f.vec3d.create(),f.vec3d.create(),f.vec3d.create(),f.vec3d.create(),f.vec3d.create()],b=f.vec3d.create(),c=f.vec3d.create(),m=f.vec3d.create(),
u=f.vec3d.create(),w=f.vec3d.create(),A=f.vec3d.create(),C=f.vec3d.create(),E=f.vec3d.create(),G=f.vec3d.create(),F=f.vec3d.create(),I=f.vec3d.create(),M=f.vec3d.create(),Y=f.vec3d.create(),R=f.vec3d.createFrom(0,0,0),S=function(){function Q(K){this.message=K}Q.prototype.toString=function(){return"AssertException: "+this.message};return Q}();k.AssertException=S;k.EARTH_RADIUS=6378137;k.METER2FEET=3.28084;k.ECCENTRICITY_SQUARED=.0066943799901414;k.VertexAttrConstants={POSITION:"position",NORMAL:"normal",
NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"};k.assert=g;k.verify=function(Q,K){};k.isPowerOfTwo=function(Q){return 0===(Q&Q-1)};k.lerp=function(Q,K,U){return Q+(K-Q)*U};k.clamp=p;k.encodeInt16=function(Q){return p(Math.round(32767*Q),-32767,32767)};k.encodeNormal=function(Q,K){var U=Math.abs(Q[0]),da=Math.abs(Q[1]),fa=1/(U+da+Math.abs(Q[2]));U*=fa;da*=fa;fa=Math.min(Q[2]*
fa,0);K[0]=O(Q[0])*(U-fa);K[1]=O(Q[1])*(da-fa)};var O="function"===typeof Math.sign?Math.sign:function(Q){return+(0<Q)-+(0>Q)||0};k.fallbackIfUndefined=function(Q,K){return void 0===Q?K:Q};k.hex2rgb=function(Q){Q=Math.floor(Q);return[(Q>>16&255)/255,(Q>>8&255)/255,(Q&255)/255]};k.rgb2hex=function(Q){var K=p(Math.round(255*Q[0]),0,255),U=p(Math.round(255*Q[1]),0,255);Q=p(Math.round(255*Q[2]),0,255);return"0x"+((K<<16)+(U<<8)+Q).toString(16)};k.dec2hex=function(Q){Q=Q.toString(16);return"00000000".substr(0,
8-Q.length)+Q};k.deg2rad=n;k.rad2deg=d;k.azimuthElevationAngle2Direction=function(Q,K){var U=1.5*Math.PI-Q,da=.5*Math.PI-K;return[Math.cos(U)*Math.sin(da),Math.cos(da),Math.sin(U)*Math.sin(da)]};k.raySphere=function(Q,K,U,da,fa){U=U||R;var ia=f.vec3d.subtract(Q,U,b);U=f.vec3d.dot(K,K);var la=2*f.vec3d.dot(K,ia);da=f.vec3d.dot(ia,ia)-da*da;da=la*la-4*U*da;if(0>da)return!1;ia=Math.sqrt(da);da=(-la-ia)/(2*U);U=(-la+ia)/(2*U);if(0>da||U<da&&0<U)da=U;return 0<da?(fa&&f.vec3d.add(Q,f.vec3d.scale(K,da,Y),
fa),!0):!1};k.rayTriangle3D=function(Q,K,U,da,fa,ia,la,ma,ta){void 0===ta&&(ta=f.vec3d.create());var ua=da[la]-U[ia],Ca=da[la+1]-U[ia+1],xa=da[la+2]-U[ia+2];da=fa[ma]-U[ia];la=fa[ma+1]-U[ia+1];fa=fa[ma+2]-U[ia+2];var Ba=K[1]*fa-la*K[2],Z=K[2]*da-fa*K[0],ka=K[0]*la-da*K[1];ma=ua*Ba+Ca*Z+xa*ka;if(-1E-5<ma&&1E-5>ma)return!1;ma=1/ma;var qa=Q[0]-U[ia],ha=Q[1]-U[ia+1];Q=Q[2]-U[ia+2];ta[1]=ma*(qa*Ba+ha*Z+Q*ka);if(0>ta[1]||1<ta[1])return!1;U=ha*xa-Ca*Q;Q=Q*ua-xa*qa;ua=qa*Ca-ua*ha;ta[2]=ma*(K[0]*U+K[1]*Q+
K[2]*ua);if(0>ta[2]||1<ta[1]+ta[2])return!1;ta[0]=ma*(da*U+la*Q+fa*ua);return!0};k.rayBoxTest=function(Q,K,U,da){var fa=(U[0]-Q[0])/K[0],ia=(da[0]-Q[0])/K[0];if(fa>ia){var la=fa;fa=ia;ia=la}var ma=(U[1]-Q[1])/K[1],ta=(da[1]-Q[1])/K[1];ma>ta&&(la=ma,ma=ta,ta=la);if(fa>ta||ma>ia)return!1;ma>fa&&(fa=ma);ta<ia&&(ia=ta);U=(U[2]-Q[2])/K[2];Q=(da[2]-Q[2])/K[2];U>Q&&(la=U,U=Q,Q=la);if(fa>Q||U>ia)return!1;Q<ia&&(ia=Q);return 0>ia?!1:!0};k.rayRay2D=function(Q,K,U,da,fa,ia){void 0===ia&&(ia=f.vec2d.create());
var la=(da[fa]-U[fa])*(K[0]-Q[0])-(da[0]-U[0])*(K[fa]-Q[fa]);if(0===la)return!1;U=((da[0]-U[0])*(Q[fa]-U[fa])-(da[fa]-U[fa])*(Q[0]-U[0]))/la;ia[0]=Q[0]+U*(K[0]-Q[0]);ia[1]=Q[fa]+U*(K[fa]-Q[fa]);return!0};k.matrixToFrustumPoints=e;k.matrixToFrustumPlanes=function(Q,K,U,da){void 0===da&&(da=U,U=z);e(Q,K,U);l(U,da)};k.frustumPointsToPlanes=l;k.project=function(Q,K,U,da,fa){fa||(fa=Q);B[0]=Q[0];B[1]=Q[1];B[2]=Q[2];B[3]=1;f.mat4d.multiplyVec4(K,B);2<fa.length&&(fa[2]=-B[2]);f.mat4d.multiplyVec4(U,B);g(0!==
B[3]);fa[0]=B[0]/B[3];fa[1]=B[1]/B[3];fa[2]=B[2]/B[3];fa[0]=(.5*fa[0]+.5)*da[2]+da[0];fa[1]=(.5*fa[1]+.5)*da[3]+da[1]};k.geodeticToGeocentricLatidude=function(Q){return Math.atan((1-k.ECCENTRICITY_SQUARED)*Math.tan(Q))};k.latLon2positionWGS84Ellipsoid=h;k.pos2latLon=function(Q,K){var U=f.vec3d.length(Q);K[0]=Math.asin(p(Q[1]/U,-1,1));K[1]=(0>Q[2]?1:-1)*Math.acos(p(Q[0]/(Math.cos(K[0])*U),-1,1));K[0]=d(K[0]);K[1]=d(K[1]);K[2]=U};k.pos2latLonWGS84Ellipsoid=function(Q,K){var U=Q[0],da=-Q[2],fa=Q[1],
ia=Math.sqrt(Math.pow(6378137,2)*(1-k.ECCENTRICITY_SQUARED)),la=Math.sqrt(Math.pow(U,2)+Math.pow(da,2)),ma=Math.atan2(6378137*fa,ia*la);U=Math.atan2(da,U);fa=Math.atan2(fa+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(ia,2))/Math.pow(ia,2)),2)*ia*Math.pow(Math.sin(ma),3),la-6378137*k.ECCENTRICITY_SQUARED*Math.pow(Math.cos(ma),3));la=la/Math.cos(fa)-6378137/Math.sqrt(1-k.ECCENTRICITY_SQUARED*Math.pow(Math.sin(fa),2))+k.EARTH_RADIUS;K[0]=fa;K[1]=U;K[2]=la};k.computeGlobeTransformation=function(Q,
K,U){var da=n(Q[0]);Q=n(Q[1]);h(da,Q,K,c);f.mat4d.translate(U,c);f.mat4d.rotateY(U,.5*Math.PI+Q);f.mat4d.rotateX(U,.5*Math.PI-da);return U};k.readUInt16=function(Q,K){return Q[K]+(Q[K+1]<<8)};k.readUInt32=function(Q,K){return Q[K]+(Q[K+1]<<8)+(Q[K+2]<<16)+(Q[K+3]<<24)};k.setIfDefined=function(Q,K,U){void 0!==K[Q]&&(U[Q]=K[Q])};k.array2object=function(Q,K){var U={};if(void 0!==K)for(var da=0;da<Q.length;da++){var fa=Q[da];U[K(fa)]=fa}else for(da=0;da<Q.length;da++)fa=Q[da],U[fa]=fa;return U};k.object2array=
function(Q){var K=[],U;for(U in Q)K.push(Q[U]);return K};k.mergeObjects=function(Q,K,U){void 0===U&&(U={});if(U!==Q)for(var da in Q)U[da]=Q[da];if(U!==K)for(var fa in K)U[fa]=K[fa];return U};k.subtractObjects=function(Q,K){var U={},da;for(da in Q)void 0===K[da]&&(U[da]=Q[da]);return U};k.intersectObjects=function(Q,K){var U={},da;for(da in Q)void 0!==K[da]&&(U[da]=Q[da]);return U};k.getFirstObjectKey=t;k.getFirstObjectValue=function(Q){return Q[t(Q)]};k.objectEmpty=function(Q){for(var K in Q)return!1;
return!0};k.byteBuffer2base64image=function(Q,K,U,da,fa){var ia=4*K;g(Q.length===ia*U,"buffer length must match image resolution");var la=document.createElement("canvas");la.width=K;la.height=U;var ma=la.getContext("2d");K=ma.getImageData(0,0,K,U);for(var ta=K.data,ua=0;ua<U;++ua)for(var Ca=ua*ia,xa=(U-1-ua)*ia,Ba=0;Ba<ia;++Ba)ta[Ca++]=Q[xa++];ma.putImageData(K,0,0);return la.toDataURL(da,fa)};k.cround=function(Q){return Math.round(100*Q)/100};k.logWithBase=function(Q,K){return Math.log(Q)/Math.log(K)};
k.setMatrixTranslation=r;k.setMatrixTranslation3=function(Q,K,U,da){Q[12]=K;Q[13]=U;Q[14]=da};k.getMatrixTranslation=function(Q,K){void 0===K&&(K=f.vec3d.create());K[0]=Q[12];K[1]=Q[13];K[2]=Q[14];return K};k.createTranslationMatrix=function(Q,K){Q=f.mat4d.identity(Q);r(Q,K);return Q};k.isTranslationMatrix=function(Q){return 1===Q[0]&&0===Q[1]&&0===Q[2]&&0===Q[3]&&0===Q[4]&&1===Q[5]&&0===Q[6]&&0===Q[7]&&0===Q[8]&&0===Q[9]&&1===Q[10]&&0===Q[11]&&1===Q[15]};k.fovx2fovy=function(Q,K,U){return 2*Math.atan(U*
Math.tan(.5*Q)/K)};k.fovy2fovx=function(Q,K,U){return 2*Math.atan(K*Math.tan(.5*Q)/U)};k.fovx2fovd=function(Q,K,U){return 2*Math.atan(Math.sqrt(K*K+U*U)*Math.tan(.5*Q)/K)};k.fovy2fovd=function(Q,K,U){return 2*Math.atan(Math.sqrt(K*K+U*U)*Math.tan(.5*Q)/U)};k.fovd2fovx=function(Q,K,U){return 2*Math.atan(K*Math.tan(.5*Q)/Math.sqrt(K*K+U*U))};k.fovd2fovy=function(Q,K,U){return 2*Math.atan(U*Math.tan(.5*Q)/Math.sqrt(K*K+U*U))};k.nextHighestPowerOfTwo=function(Q){--Q;for(var K=1;32>K;K<<=1)Q|=Q>>K;return Q+
1};k.nextHighestPowerOfTen=function(Q){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(Q)))};k.lineLineDistanceSquared3D=function(Q,K,U,da,fa){m[0]=Q[0]-U[0];m[1]=Q[1]-U[1];m[2]=Q[2]-U[2];u[0]=da[0]-U[0];u[1]=da[1]-U[1];u[2]=da[2]-U[2];if(1E-4>Math.abs(u[0])&&1E-4>Math.abs(u[1])&&1E-4>Math.abs(u[2]))return fa.success=!1,fa;w[0]=K[0]-Q[0];w[1]=K[1]-Q[1];w[2]=K[2]-Q[2];if(1E-4>Math.abs(w[0])&&1E-4>Math.abs(w[1])&&1E-4>Math.abs(w[2]))return fa.success=!1,fa;K=m[0]*u[0]+m[1]*u[1]+m[2]*u[2];da=u[0]*
w[0]+u[1]*w[1]+u[2]*w[2];var ia=m[0]*w[0]+m[1]*w[1]+m[2]*w[2],la=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],ma=(w[0]*w[0]+w[1]*w[1]+w[2]*w[2])*la-da*da;if(1E-4>Math.abs(ma))return fa.success=!1,fa;ia=p((K*da-ia*la)/ma,0,1);K=p((K+da*ia)/la,0,1);A[0]=Q[0]+ia*w[0];A[1]=Q[1]+ia*w[1];A[2]=Q[2]+ia*w[2];C[0]=U[0]+K*u[0];C[1]=U[1]+K*u[1];C[2]=U[2]+K*u[2];Q=f.vec3d.dist2(A,C);fa.success=!0;fa.dist2=Q;fa.pa=A;fa.pb=C;return fa};k.pointLineSegmentDistanceSquared2D=function(Q,K,U){I[0]=K[0]-Q[0];I[1]=K[1]-Q[1];I[2]=0;M[0]=
U[0]-Q[0];M[1]=U[1]-Q[1];M[2]=0;Y[0]=U[0];Y[1]=U[1];Y[2]=0;K=f.vec2d.dot(M,I);U=f.vec2d.dot(I,I);K=p(K/U,0,1);F[0]=I[0]*K;F[1]=I[1]*K;E[0]=Q[0]+F[0];E[1]=Q[1]+F[1];f.vec2d.subtract(Y,E,G);Q=f.vec2d.dot(G,G);K=f.vec2d.dot(M,M);U=f.vec2d.dot(I,I);var da=f.vec2d.dot(F,F);if(da>K||da>U)Q=Number.MAX_VALUE;return Q};k.packFloatRGBA=function(Q,K,U){void 0===U&&(U=0);Q=p(Q,0,X);for(var da=0;4>da;da++)K[U+da]=Math.floor(256*v(Q*L[da]))};k.unpackFloatRGBA=q;var L=[1,256,65536,16777216],P=[1/256,1/65536,1/16777216,
1/4294967296],X=q(new Uint8ClampedArray([255,255,255,255]));k.inverseProjectionInfo=function(Q,K,U,da,fa){0===Q[11]?(da[0]=2/(K*Q[0]),da[1]=2/(U*Q[5]),da[2]=(1+Q[12])/Q[0],da[3]=(1+Q[13])/Q[5],f.vec2d.set2(0,1,fa)):(da[0]=-2/(K*Q[0]),da[1]=-2/(U*Q[5]),da[2]=(1-Q[8])/Q[0],da[3]=(1-Q[9])/Q[5],f.vec2d.set2(1,0,fa))}})},"esri/layers/vectorTiles/views/3d/support/geometryUtils":function(){define(["require","exports","./geometryUtils/lineSegment","./geometryUtils/plane","./geometryUtils/triangle"],function(D,
k,a,f,g){Object.defineProperty(k,"__esModule",{value:!0});k.plane=f;k.triangle=g;k.lineSegment=a})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/lineSegment":function(){define(["require","exports","../../lib/glMatrix","../mathUtils"],function(D,k,a,f){function g(n,d){void 0===n&&(n=a.vec3d.create());void 0===d&&(d=a.vec3d.create());return{origin:n,vector:d}}Object.defineProperty(k,"__esModule",{value:!0});k.create=g;k.fromOriginAndVector=function(n,d,e){void 0===e&&(e=g());a.vec3d.set(n,
e.origin);a.vec3d.set(d,e.vector);return e};k.distance2=function(n,d){var e=a.vec3d.subtract(d,n.origin),l=a.vec3d.dot(n.vector,e),h=a.vec3d.dot(n.vector,n.vector);l=f.clamp(l/h,0,1);e=a.vec3d.subtract(a.vec3d.scale(n.vector,l,p),e,p);return a.vec3d.dot(e,e)};var p=a.vec3d.create()})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../lib/glMatrix"],function(D,k,a){function f(l){void 0===l&&(l=k.UP);return[l[0],l[1],l[2],l[3]]}function g(l,
h,t){void 0===t&&(t=f());a.vec3d.set(h,t);t[3]=-a.vec3d.dot(h,l);return t}function p(l,h,t,r){void 0===r&&(r=f());a.vec3d.cross(h,l,e);return g(t,a.vec3d.normalize(e),r)}Object.defineProperty(k,"__esModule",{value:!0});k.create=f;k.fromValues=function(l,h,t,r,q){void 0===q&&(q=f());q[0]=l;q[1]=h;q[2]=t;q[3]=r;return q};k.fromNormalAndOffset=function(l,h,t){void 0===t&&(t=f());a.vec3d.set(l,t);t[3]=h;return t};k.fromPositionAndNormal=g;k.projectVector=function(l,h,t){void 0===t&&(t=h);return a.vec3d.cross(l,
a.vec3d.cross(h,l,d),t)};k.distance=function(l,h){return a.vec3d.dot(l,h)+l[3]};k.fromPoints=function(l,h,t,r){void 0===r&&(r=f());return p(a.vec3d.subtract(l,h,n),a.vec3d.subtract(t,h,d),l,r)};k.set=function(l,h){l[0]=h[0];l[1]=h[1];l[2]=h[2];l[3]=h[3];return l};k.negate=function(l,h){void 0===h&&(h=l);h[0]=-l[0];h[1]=-l[1];h[2]=-l[2];h[3]=-l[3];return h};k.fromVectorsAndPoint=p;k.intersectRay=function(l,h,t,r){var q=a.vec3d.dot(l,t);if(0===q)return!1;l=-(a.vec3d.dot(l,h)+l[3])/q;a.vec3d.add(h,a.vec3d.scale(t,
l,r),r);return!0};k.UP=[0,0,1,0];var n=a.vec3d.create(),d=a.vec3d.create(),e=a.vec3d.create()})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/triangle":function(){define(["require","exports","../../lib/glMatrix","./lineSegment"],function(D,k,a,f){function g(q,v,x){var y=a.vec2d.dist(q,v);v=a.vec2d.dist(v,x);q=a.vec2d.dist(x,q);x=(y+v+q)/2;return Math.sqrt(x*(x-y)*(x-v)*(x-q))}Object.defineProperty(k,"__esModule",{value:!0});k.create=function(q,v,x){void 0===q&&(q=a.vec3d.create());void 0===
v&&(v=a.vec3d.create());void 0===x&&(x=a.vec3d.create());return{p0:q,p1:v,p2:x}};k.distance2=function(q,v){var x=q.p0,y=q.p1,B=q.p2,z=a.vec3d.subtract(y,x,p),b=a.vec3d.subtract(B,y,n),c=a.vec3d.subtract(x,B,d),m=a.vec3d.subtract(v,x,e),u=a.vec3d.subtract(v,y,l),w=a.vec3d.subtract(v,B,h),A=a.vec3d.cross(z,c),C=a.vec3d.dot(a.vec3d.cross(z,A,t),m);u=a.vec3d.dot(a.vec3d.cross(b,A,t),u);w=a.vec3d.dot(a.vec3d.cross(c,A,t),w);if(0<C&&0<u&&0<w)return B=a.vec3d.dot(A,m),B*B/a.vec3d.dot(A,A);A=f.distance2(f.fromOriginAndVector(x,
z,r),v);y=f.distance2(f.fromOriginAndVector(y,b,r),v);B=f.distance2(f.fromOriginAndVector(B,c,r),v);return Math.min(A,y,B)};k.areaPoints2d=g;k.area2d=function(q){return g(q.p0,q.p1,q.p2)};var p=a.vec3d.create(),n=a.vec3d.create(),d=a.vec3d.create(),e=a.vec3d.create(),l=a.vec3d.create(),h=a.vec3d.create(),t=a.vec3d.create(),r=f.create()})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var D={};(function(k,a){a(k,!0);a(k,!1)})(D,function(k,a){var f={};
(function(){if("undefined"!=typeof Float32Array){var b=new Float32Array(1),c=new Int32Array(b.buffer);f.invsqrt=function(m){b[0]=m;c[0]=1597463007-(c[0]>>1);var u=b[0];return u*(1.5-.5*m*u*u)}}else f.invsqrt=function(m){return 1/Math.sqrt(m)}})();var g=Array;"undefined"!=typeof Float32Array&&(g=a?Float32Array:Array);var p={create:function(b){var c=new g(3);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2]):c[0]=c[1]=c[2]=0;return c},createFrom:function(b,c,m){var u=new g(3);u[0]=b;u[1]=c;u[2]=m;return u},set:function(b,
c){c[0]=b[0];c[1]=b[1];c[2]=b[2];return c},set3:function(b,c,m,u){u[0]=b;u[1]=c;u[2]=m;return u},add:function(b,c,m){if(!m||b===m)return b[0]+=c[0],b[1]+=c[1],b[2]+=c[2],b;m[0]=b[0]+c[0];m[1]=b[1]+c[1];m[2]=b[2]+c[2];return m},subtract:function(b,c,m){if(!m||b===m)return b[0]-=c[0],b[1]-=c[1],b[2]-=c[2],b;m[0]=b[0]-c[0];m[1]=b[1]-c[1];m[2]=b[2]-c[2];return m},multiply:function(b,c,m){if(!m||b===m)return b[0]*=c[0],b[1]*=c[1],b[2]*=c[2],b;m[0]=b[0]*c[0];m[1]=b[1]*c[1];m[2]=b[2]*c[2];return m},max:function(b,
c,m){m[0]=Math.max(b[0],c[0]);m[1]=Math.max(b[1],c[1]);m[2]=Math.max(b[2],c[2]);return m},min:function(b,c,m){m[0]=Math.min(b[0],c[0]);m[1]=Math.min(b[1],c[1]);m[2]=Math.min(b[2],c[2]);return m},negate:function(b,c){c||(c=b);c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];return c},scale:function(b,c,m){if(!m||b===m)return b[0]*=c,b[1]*=c,b[2]*=c,b;m[0]=b[0]*c;m[1]=b[1]*c;m[2]=b[2]*c;return m},normalize:function(b,c){c||(c=b);var m=b[0],u=b[1],w=b[2],A=Math.sqrt(m*m+u*u+w*w);if(!A)return c[0]=0,c[1]=0,c[2]=0,c;
if(1===A)return c[0]=m,c[1]=u,c[2]=w,c;A=1/A;c[0]=m*A;c[1]=u*A;c[2]=w*A;return c},cross:function(b,c,m){m||(m=b);var u=b[0],w=b[1];b=b[2];var A=c[0],C=c[1];c=c[2];m[0]=w*c-b*C;m[1]=b*A-u*c;m[2]=u*C-w*A;return m},length:function(b){var c=b[0],m=b[1];b=b[2];return Math.sqrt(c*c+m*m+b*b)},length2:function(b){var c=b[0],m=b[1];b=b[2];return c*c+m*m+b*b},dot:function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]},direction:function(b,c,m){m||(m=b);var u=b[0]-c[0],w=b[1]-c[1];b=b[2]-c[2];c=Math.sqrt(u*u+w*
w+b*b);if(!c)return m[0]=0,m[1]=0,m[2]=0,m;c=1/c;m[0]=u*c;m[1]=w*c;m[2]=b*c;return m},lerp:function(b,c,m,u){u||(u=b);u[0]=b[0]+m*(c[0]-b[0]);u[1]=b[1]+m*(c[1]-b[1]);u[2]=b[2]+m*(c[2]-b[2]);return u},dist:function(b,c){var m=c[0]-b[0],u=c[1]-b[1],w=c[2]-b[2];return Math.sqrt(m*m+u*u+w*w)},dist2:function(b,c){var m=c[0]-b[0],u=c[1]-b[1],w=c[2]-b[2];return m*m+u*u+w*w}},n=null,d=new g(4);p.unproject=function(b,c,m,u,w){w||(w=b);n||(n=v.create());var A=n;d[0]=2*(b[0]-u[0])/u[2]-1;d[1]=2*(b[1]-u[1])/
u[3]-1;d[2]=2*b[2]-1;d[3]=1;v.multiply(m,c,A);if(!v.inverse(A))return null;v.multiplyVec4(A,d);if(0===d[3])return null;w[0]=d[0]/d[3];w[1]=d[1]/d[3];w[2]=d[2]/d[3];return w};var e=p.createFrom(1,0,0),l=p.createFrom(0,1,0),h=p.createFrom(0,0,1);p.rotationTo=function(b,c,m){m||(m=x.create());var u=p.dot(b,c),w=p.create();if(1<=u)x.set(y,m);else if(-.999999>u)p.cross(e,b,w),1E-6>w.length&&p.cross(l,b,w),1E-6>w.length&&p.cross(h,b,w),p.normalize(w),x.fromAxisAngle(w,Math.PI,m);else{u=Math.sqrt(2*(1+u));
var A=1/u;p.cross(b,c,w);m[0]=w[0]*A;m[1]=w[1]*A;m[2]=w[2]*A;m[3]=.5*u;x.normalize(m)}1<m[3]?m[3]=1:-1>m[3]&&(m[3]=-1);return m};var t=p.create(),r=p.create();p.project=function(b,c,m,u){u||(u=b);p.direction(c,m,t);p.subtract(b,c,r);b=p.dot(t,r);p.scale(t,b,u);p.add(u,c,u)};p.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+"]"};var q={create:function(b){var c=new g(9);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8]):c[0]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=
c[7]=c[8]=0;return c},createFrom:function(b,c,m,u,w,A,C,E,G){var F=new g(9);F[0]=b;F[1]=c;F[2]=m;F[3]=u;F[4]=w;F[5]=A;F[6]=C;F[7]=E;F[8]=G;return F},determinant:function(b){var c=b[3],m=b[4],u=b[5],w=b[6],A=b[7],C=b[8];return b[0]*(C*m-u*A)+b[1]*(-C*c+u*w)+b[2]*(A*c-m*w)},inverse:function(b,c){var m=b[0],u=b[1],w=b[2],A=b[3],C=b[4],E=b[5],G=b[6],F=b[7],I=b[8],M=I*C-E*F,Y=-I*A+E*G,R=F*A-C*G,S=m*M+u*Y+w*R;if(!S)return null;S=1/S;c||(c=q.create());c[0]=M*S;c[1]=(-I*u+w*F)*S;c[2]=(E*u-w*C)*S;c[3]=Y*S;
c[4]=(I*m-w*G)*S;c[5]=(-E*m+w*A)*S;c[6]=R*S;c[7]=(-F*m+u*G)*S;c[8]=(C*m-u*A)*S;return c},multiply:function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2],C=b[3],E=b[4],G=b[5],F=b[6],I=b[7];b=b[8];var M=c[0],Y=c[1],R=c[2],S=c[3],O=c[4],L=c[5],P=c[6],X=c[7];c=c[8];m[0]=M*u+Y*C+R*F;m[1]=M*w+Y*E+R*I;m[2]=M*A+Y*G+R*b;m[3]=S*u+O*C+L*F;m[4]=S*w+O*E+L*I;m[5]=S*A+O*G+L*b;m[6]=P*u+X*C+c*F;m[7]=P*w+X*E+c*I;m[8]=P*A+X*G+c*b;return m},multiplyVec2:function(b,c,m){m||(m=c);var u=c[0];c=c[1];m[0]=u*b[0]+c*b[3]+b[6];m[1]=
u*b[1]+c*b[4]+b[7];return m},multiplyVec3:function(b,c,m){m||(m=c);var u=c[0],w=c[1];c=c[2];m[0]=u*b[0]+w*b[3]+c*b[6];m[1]=u*b[1]+w*b[4]+c*b[7];m[2]=u*b[2]+w*b[5]+c*b[8];return m},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];return c},identity:function(b){b||(b=q.create());b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},transpose:function(b,c){if(!c||b===c){var m=b[1],u=b[2],w=b[5];b[1]=b[3];b[2]=b[6];b[3]=m;b[5]=
b[7];b[6]=u;b[7]=w;return b}c[0]=b[0];c[1]=b[3];c[2]=b[6];c[3]=b[1];c[4]=b[4];c[5]=b[7];c[6]=b[2];c[7]=b[5];c[8]=b[8];return c},toMat4:function(b,c){c||(c=v.create());c[15]=1;c[14]=0;c[13]=0;c[12]=0;c[11]=0;c[10]=b[8];c[9]=b[7];c[8]=b[6];c[7]=0;c[6]=b[5];c[5]=b[4];c[4]=b[3];c[3]=0;c[2]=b[2];c[1]=b[1];c[0]=b[0];return c},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+"]"}},v={create:function(b){var c=new g(16);4===arguments.length?(c[0]=
arguments[0],c[1]=arguments[1],c[2]=arguments[2],c[3]=arguments[3],c[4]=arguments[4],c[5]=arguments[5],c[6]=arguments[6],c[7]=arguments[7],c[8]=arguments[8],c[9]=arguments[9],c[10]=arguments[10],c[11]=arguments[11],c[12]=arguments[12],c[13]=arguments[13],c[14]=arguments[14],c[15]=arguments[15]):b&&(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8],c[9]=b[9],c[10]=b[10],c[11]=b[11],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15]);return c},createFrom:function(b,
c,m,u,w,A,C,E,G,F,I,M,Y,R,S,O){var L=new g(16);L[0]=b;L[1]=c;L[2]=m;L[3]=u;L[4]=w;L[5]=A;L[6]=C;L[7]=E;L[8]=G;L[9]=F;L[10]=I;L[11]=M;L[12]=Y;L[13]=R;L[14]=S;L[15]=O;return L},createFromMatrixRowMajor:function(b){var c=new g(16);c[0]=b[0];c[4]=b[1];c[8]=b[2];c[12]=b[3];c[1]=b[4];c[5]=b[5];c[9]=b[6];c[13]=b[7];c[2]=b[8];c[6]=b[9];c[10]=b[10];c[14]=b[11];c[3]=b[12];c[7]=b[13];c[11]=b[14];c[15]=b[15];return c},createFromMatrix:function(b){var c=new g(16);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];
c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15];return c},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15];return c},setRowMajor:function(b,c){c[0]=b[0];c[4]=b[1];c[8]=b[2];c[12]=b[3];c[1]=b[4];c[5]=b[5];c[9]=b[6];c[13]=b[7];c[2]=b[8];c[6]=b[9];c[10]=b[10];c[14]=b[11];c[3]=b[12];c[7]=b[13];
c[11]=b[14];c[15]=b[15];return c},identity:function(b){b||(b=v.create());b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},transpose:function(b,c){if(!c||b===c){var m=b[1],u=b[2],w=b[3],A=b[6],C=b[7],E=b[11];b[1]=b[4];b[2]=b[8];b[3]=b[12];b[4]=m;b[6]=b[9];b[7]=b[13];b[8]=u;b[9]=A;b[11]=b[14];b[12]=w;b[13]=C;b[14]=E;return b}c[0]=b[0];c[1]=b[4];c[2]=b[8];c[3]=b[12];c[4]=b[1];c[5]=b[5];c[6]=b[9];c[7]=b[13];c[8]=b[2];c[9]=
b[6];c[10]=b[10];c[11]=b[14];c[12]=b[3];c[13]=b[7];c[14]=b[11];c[15]=b[15];return c},determinant:function(b){var c=b[0],m=b[1],u=b[2],w=b[3],A=b[4],C=b[5],E=b[6],G=b[7],F=b[8],I=b[9],M=b[10],Y=b[11],R=b[12],S=b[13],O=b[14];b=b[15];return R*I*E*w-F*S*E*w-R*C*M*w+A*S*M*w+F*C*O*w-A*I*O*w-R*I*u*G+F*S*u*G+R*m*M*G-c*S*M*G-F*m*O*G+c*I*O*G+R*C*u*Y-A*S*u*Y-R*m*E*Y+c*S*E*Y+A*m*O*Y-c*C*O*Y-F*C*u*b+A*I*u*b+F*m*E*b-c*I*E*b-A*m*M*b+c*C*M*b},inverse:function(b,c){c||(c=b);var m=b[0],u=b[1],w=b[2],A=b[3],C=b[4],
E=b[5],G=b[6],F=b[7],I=b[8],M=b[9],Y=b[10],R=b[11],S=b[12],O=b[13],L=b[14],P=b[15],X=m*E-u*C,Q=m*G-w*C,K=m*F-A*C,U=u*G-w*E,da=u*F-A*E,fa=w*F-A*G,ia=I*O-M*S,la=I*L-Y*S,ma=I*P-R*S,ta=M*L-Y*O,ua=M*P-R*O,Ca=Y*P-R*L,xa=X*Ca-Q*ua+K*ta+U*ma-da*la+fa*ia;if(!xa)return null;xa=1/xa;c[0]=(E*Ca-G*ua+F*ta)*xa;c[1]=(-u*Ca+w*ua-A*ta)*xa;c[2]=(O*fa-L*da+P*U)*xa;c[3]=(-M*fa+Y*da-R*U)*xa;c[4]=(-C*Ca+G*ma-F*la)*xa;c[5]=(m*Ca-w*ma+A*la)*xa;c[6]=(-S*fa+L*K-P*Q)*xa;c[7]=(I*fa-Y*K+R*Q)*xa;c[8]=(C*ua-E*ma+F*ia)*xa;c[9]=
(-m*ua+u*ma-A*ia)*xa;c[10]=(S*da-O*K+P*X)*xa;c[11]=(-I*da+M*K-R*X)*xa;c[12]=(-C*ta+E*la-G*ia)*xa;c[13]=(m*ta-u*la+w*ia)*xa;c[14]=(-S*U+O*Q-L*X)*xa;c[15]=(I*U-M*Q+Y*X)*xa;return c},toRotationMat:function(b,c){c||(c=v.create());c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c},toMat3:function(b,c){c||(c=q.create());c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[4];c[4]=b[5];c[5]=b[6];c[6]=b[8];
c[7]=b[9];c[8]=b[10];return c},toInverseMat3:function(b,c){var m=b[0],u=b[1],w=b[2],A=b[4],C=b[5],E=b[6],G=b[8],F=b[9],I=b[10],M=I*C-E*F,Y=-I*A+E*G,R=F*A-C*G,S=m*M+u*Y+w*R;if(!S)return null;S=1/S;c||(c=q.create());c[0]=M*S;c[1]=(-I*u+w*F)*S;c[2]=(E*u-w*C)*S;c[3]=Y*S;c[4]=(I*m-w*G)*S;c[5]=(-E*m+w*A)*S;c[6]=R*S;c[7]=(-F*m+u*G)*S;c[8]=(C*m-u*A)*S;return c},multiply:function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2],C=b[3],E=b[4],G=b[5],F=b[6],I=b[7],M=b[8],Y=b[9],R=b[10],S=b[11],O=b[12],L=b[13],P=b[14];
b=b[15];var X=c[0],Q=c[1],K=c[2],U=c[3],da=c[4],fa=c[5],ia=c[6],la=c[7],ma=c[8],ta=c[9],ua=c[10],Ca=c[11],xa=c[12],Ba=c[13],Z=c[14];c=c[15];m[0]=X*u+Q*E+K*M+U*O;m[1]=X*w+Q*G+K*Y+U*L;m[2]=X*A+Q*F+K*R+U*P;m[3]=X*C+Q*I+K*S+U*b;m[4]=da*u+fa*E+ia*M+la*O;m[5]=da*w+fa*G+ia*Y+la*L;m[6]=da*A+fa*F+ia*R+la*P;m[7]=da*C+fa*I+ia*S+la*b;m[8]=ma*u+ta*E+ua*M+Ca*O;m[9]=ma*w+ta*G+ua*Y+Ca*L;m[10]=ma*A+ta*F+ua*R+Ca*P;m[11]=ma*C+ta*I+ua*S+Ca*b;m[12]=xa*u+Ba*E+Z*M+c*O;m[13]=xa*w+Ba*G+Z*Y+c*L;m[14]=xa*A+Ba*F+Z*R+c*P;m[15]=
xa*C+Ba*I+Z*S+c*b;return m},multiplyVec3:function(b,c,m){m||(m=c);var u=c[0],w=c[1];c=c[2];m[0]=b[0]*u+b[4]*w+b[8]*c+b[12];m[1]=b[1]*u+b[5]*w+b[9]*c+b[13];m[2]=b[2]*u+b[6]*w+b[10]*c+b[14];return m},multiplyVec4:function(b,c,m){m||(m=c);var u=c[0],w=c[1],A=c[2];c=c[3];m[0]=b[0]*u+b[4]*w+b[8]*A+b[12]*c;m[1]=b[1]*u+b[5]*w+b[9]*A+b[13]*c;m[2]=b[2]*u+b[6]*w+b[10]*A+b[14]*c;m[3]=b[3]*u+b[7]*w+b[11]*A+b[15]*c;return m},translate:function(b,c,m){var u=c[0],w=c[1];c=c[2];if(!m||b===m)return b[12]=b[0]*u+b[4]*
w+b[8]*c+b[12],b[13]=b[1]*u+b[5]*w+b[9]*c+b[13],b[14]=b[2]*u+b[6]*w+b[10]*c+b[14],b[15]=b[3]*u+b[7]*w+b[11]*c+b[15],b;var A=b[0];var C=b[1];var E=b[2];var G=b[3];var F=b[4];var I=b[5];var M=b[6];var Y=b[7];var R=b[8];var S=b[9];var O=b[10];var L=b[11];m[0]=A;m[1]=C;m[2]=E;m[3]=G;m[4]=F;m[5]=I;m[6]=M;m[7]=Y;m[8]=R;m[9]=S;m[10]=O;m[11]=L;m[12]=A*u+F*w+R*c+b[12];m[13]=C*u+I*w+S*c+b[13];m[14]=E*u+M*w+O*c+b[14];m[15]=G*u+Y*w+L*c+b[15];return m},scale:function(b,c,m){var u=c[0],w=c[1];c=c[2];if(!m||b===
m)return b[0]*=u,b[1]*=u,b[2]*=u,b[3]*=u,b[4]*=w,b[5]*=w,b[6]*=w,b[7]*=w,b[8]*=c,b[9]*=c,b[10]*=c,b[11]*=c,b;m[0]=b[0]*u;m[1]=b[1]*u;m[2]=b[2]*u;m[3]=b[3]*u;m[4]=b[4]*w;m[5]=b[5]*w;m[6]=b[6]*w;m[7]=b[7]*w;m[8]=b[8]*c;m[9]=b[9]*c;m[10]=b[10]*c;m[11]=b[11]*c;m[12]=b[12];m[13]=b[13];m[14]=b[14];m[15]=b[15];return m},maxScale:function(b){return Math.max(Math.max(Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9])),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]))},rotate:function(b,
c,m,u){var w=m[0],A=m[1];m=m[2];var C=Math.sqrt(w*w+A*A+m*m);if(!C)return null;1!==C&&(C=1/C,w*=C,A*=C,m*=C);var E=Math.sin(c);var G=Math.cos(c);var F=1-G;c=b[0];C=b[1];var I=b[2];var M=b[3];var Y=b[4];var R=b[5];var S=b[6];var O=b[7];var L=b[8];var P=b[9];var X=b[10];var Q=b[11];var K=w*w*F+G;var U=A*w*F+m*E;var da=m*w*F-A*E;var fa=w*A*F-m*E;var ia=A*A*F+G;var la=m*A*F+w*E;var ma=w*m*F+A*E;w=A*m*F-w*E;A=m*m*F+G;u?b!==u&&(u[12]=b[12],u[13]=b[13],u[14]=b[14],u[15]=b[15]):u=b;u[0]=c*K+Y*U+L*da;u[1]=
C*K+R*U+P*da;u[2]=I*K+S*U+X*da;u[3]=M*K+O*U+Q*da;u[4]=c*fa+Y*ia+L*la;u[5]=C*fa+R*ia+P*la;u[6]=I*fa+S*ia+X*la;u[7]=M*fa+O*ia+Q*la;u[8]=c*ma+Y*w+L*A;u[9]=C*ma+R*w+P*A;u[10]=I*ma+S*w+X*A;u[11]=M*ma+O*w+Q*A;return u},rotateX:function(b,c,m){var u=Math.sin(c);c=Math.cos(c);var w=b[4],A=b[5],C=b[6],E=b[7],G=b[8],F=b[9],I=b[10],M=b[11];m?b!==m&&(m[0]=b[0],m[1]=b[1],m[2]=b[2],m[3]=b[3],m[12]=b[12],m[13]=b[13],m[14]=b[14],m[15]=b[15]):m=b;m[4]=w*c+G*u;m[5]=A*c+F*u;m[6]=C*c+I*u;m[7]=E*c+M*u;m[8]=w*-u+G*c;m[9]=
A*-u+F*c;m[10]=C*-u+I*c;m[11]=E*-u+M*c;return m},rotateY:function(b,c,m){var u=Math.sin(c);c=Math.cos(c);var w=b[0],A=b[1],C=b[2],E=b[3],G=b[8],F=b[9],I=b[10],M=b[11];m?b!==m&&(m[4]=b[4],m[5]=b[5],m[6]=b[6],m[7]=b[7],m[12]=b[12],m[13]=b[13],m[14]=b[14],m[15]=b[15]):m=b;m[0]=w*c+G*-u;m[1]=A*c+F*-u;m[2]=C*c+I*-u;m[3]=E*c+M*-u;m[8]=w*u+G*c;m[9]=A*u+F*c;m[10]=C*u+I*c;m[11]=E*u+M*c;return m},rotateZ:function(b,c,m){var u=Math.sin(c);c=Math.cos(c);var w=b[0],A=b[1],C=b[2],E=b[3],G=b[4],F=b[5],I=b[6],M=
b[7];m?b!==m&&(m[8]=b[8],m[9]=b[9],m[10]=b[10],m[11]=b[11],m[12]=b[12],m[13]=b[13],m[14]=b[14],m[15]=b[15]):m=b;m[0]=w*c+G*u;m[1]=A*c+F*u;m[2]=C*c+I*u;m[3]=E*c+M*u;m[4]=w*-u+G*c;m[5]=A*-u+F*c;m[6]=C*-u+I*c;m[7]=E*-u+M*c;return m},frustum:function(b,c,m,u,w,A,C){C||(C=v.create());var E=c-b,G=u-m,F=A-w;C[0]=2*w/E;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2*w/G;C[6]=0;C[7]=0;C[8]=(c+b)/E;C[9]=(u+m)/G;C[10]=-(A+w)/F;C[11]=-1;C[12]=0;C[13]=0;C[14]=-(A*w*2)/F;C[15]=0;return C},perspective:function(b,c,m,u,w){b=
m*Math.tan(b*Math.PI/360);c*=b;return v.frustum(-c,c,-b,b,m,u,w)},ortho:function(b,c,m,u,w,A,C){C||(C=v.create());var E=c-b,G=u-m,F=A-w;C[0]=2/E;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2/G;C[6]=0;C[7]=0;C[8]=0;C[9]=0;C[10]=-2/F;C[11]=0;C[12]=-(b+c)/E;C[13]=-(u+m)/G;C[14]=-(A+w)/F;C[15]=1;return C},lookAt:function(b,c,m,u){u||(u=v.create());var w=b[0],A=b[1];b=b[2];var C=m[0];var E=m[1];var G=m[2];var F=c[0];m=c[1];var I=c[2];if(w===F&&A===m&&b===I)return v.identity(u);c=w-F;m=A-m;F=b-I;var M=1/Math.sqrt(c*
c+m*m+F*F);c*=M;m*=M;F*=M;I=E*F-G*m;G=G*c-C*F;C=C*m-E*c;(M=Math.sqrt(I*I+G*G+C*C))?(M=1/M,I*=M,G*=M,C*=M):C=G=I=0;E=m*C-F*G;var Y=F*I-c*C;var R=c*G-m*I;(M=Math.sqrt(E*E+Y*Y+R*R))?(M=1/M,E*=M,Y*=M,R*=M):R=Y=E=0;u[0]=I;u[1]=E;u[2]=c;u[3]=0;u[4]=G;u[5]=Y;u[6]=m;u[7]=0;u[8]=C;u[9]=R;u[10]=F;u[11]=0;u[12]=-(I*w+G*A+C*b);u[13]=-(E*w+Y*A+R*b);u[14]=-(c*w+m*A+F*b);u[15]=1;return u},fromRotationTranslation:function(b,c,m){m||(m=v.create());var u=b[0],w=b[1],A=b[2],C=b[3],E=u+u,G=w+w,F=A+A;b=u*E;var I=u*G;
u*=F;var M=w*G;w*=F;A*=F;E*=C;G*=C;C*=F;m[0]=1-(M+A);m[1]=I+C;m[2]=u-G;m[3]=0;m[4]=I-C;m[5]=1-(b+A);m[6]=w+E;m[7]=0;m[8]=u+G;m[9]=w-E;m[10]=1-(b+M);m[11]=0;m[12]=c[0];m[13]=c[1];m[14]=c[2];m[15]=1;return m},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+"]"}},x={create:function(b){var c=new g(4);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3]):c[0]=c[1]=c[2]=c[3]=
0;return c},createFrom:function(b,c,m,u){var w=new g(4);w[0]=b;w[1]=c;w[2]=m;w[3]=u;return w},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c},identity:function(b){b||(b=x.create());b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b}},y=x.identity();x.calculateW=function(b,c){var m=b[0],u=b[1],w=b[2];if(!c||b===c)return b[3]=-Math.sqrt(Math.abs(1-m*m-u*u-w*w)),b;c[0]=m;c[1]=u;c[2]=w;c[3]=-Math.sqrt(Math.abs(1-m*m-u*u-w*w));return c};x.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*
c[3]};x.inverse=function(b,c){var m=b[0],u=b[1],w=b[2],A=b[3];m=(m=m*m+u*u+w*w+A*A)?1/m:0;if(!c||b===c)return b[0]*=-m,b[1]*=-m,b[2]*=-m,b[3]*=m,b;c[0]=-b[0]*m;c[1]=-b[1]*m;c[2]=-b[2]*m;c[3]=b[3]*m;return c};x.conjugate=function(b,c){if(!c||b===c)return b[0]*=-1,b[1]*=-1,b[2]*=-1,b;c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];c[3]=b[3];return c};x.length=function(b){var c=b[0],m=b[1],u=b[2];b=b[3];return Math.sqrt(c*c+m*m+u*u+b*b)};x.normalize=function(b,c){c||(c=b);var m=b[0],u=b[1],w=b[2],A=b[3],C=Math.sqrt(m*
m+u*u+w*w+A*A);if(0===C)return c[0]=0,c[1]=0,c[2]=0,c[3]=0,c;C=1/C;c[0]=m*C;c[1]=u*C;c[2]=w*C;c[3]=A*C;return c};x.add=function(b,c,m){if(!m||b===m)return b[0]+=c[0],b[1]+=c[1],b[2]+=c[2],b[3]+=c[3],b;m[0]=b[0]+c[0];m[1]=b[1]+c[1];m[2]=b[2]+c[2];m[3]=b[3]+c[3];return m};x.multiply=function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2];b=b[3];var C=c[0],E=c[1],G=c[2];c=c[3];m[0]=u*c+b*C+w*G-A*E;m[1]=w*c+b*E+A*C-u*G;m[2]=A*c+b*G+u*E-w*C;m[3]=b*c-u*C-w*E-A*G;return m};x.multiplyVec3=function(b,c,m){m||(m=
c);var u=c[0],w=c[1],A=c[2];c=b[0];var C=b[1],E=b[2];b=b[3];var G=b*u+C*A-E*w,F=b*w+E*u-c*A,I=b*A+c*w-C*u;u=-c*u-C*w-E*A;m[0]=G*b+u*-c+F*-E-I*-C;m[1]=F*b+u*-C+I*-c-G*-E;m[2]=I*b+u*-E+G*-C-F*-c;return m};x.scale=function(b,c,m){if(!m||b===m)return b[0]*=c,b[1]*=c,b[2]*=c,b[3]*=c,b;m[0]=b[0]*c;m[1]=b[1]*c;m[2]=b[2]*c;m[3]=b[3]*c;return m};x.toMat3=function(b,c){c||(c=q.create());var m=b[0],u=b[1],w=b[2],A=b[3],C=m+m,E=u+u,G=w+w,F=m*C,I=m*E;m*=G;var M=u*E;u*=G;w*=G;C*=A;E*=A;A*=G;c[0]=1-(M+w);c[1]=I+
A;c[2]=m-E;c[3]=I-A;c[4]=1-(F+w);c[5]=u+C;c[6]=m+E;c[7]=u-C;c[8]=1-(F+M);return c};x.toMat4=function(b,c){c||(c=v.create());var m=b[0],u=b[1],w=b[2],A=b[3],C=m+m,E=u+u,G=w+w,F=m*C,I=m*E;m*=G;var M=u*E;u*=G;w*=G;C*=A;E*=A;A*=G;c[0]=1-(M+w);c[1]=I+A;c[2]=m-E;c[3]=0;c[4]=I-A;c[5]=1-(F+w);c[6]=u+C;c[7]=0;c[8]=m+E;c[9]=u-C;c[10]=1-(F+M);c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};x.slerp=function(b,c,m,u){u||(u=b);var w=b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3];if(1<=Math.abs(w))return u!==b&&(u[0]=
b[0],u[1]=b[1],u[2]=b[2],u[3]=b[3]),u;var A=Math.acos(w);var C=Math.sqrt(1-w*w);if(.001>Math.abs(C))return u[0]=.5*b[0]+.5*c[0],u[1]=.5*b[1]+.5*c[1],u[2]=.5*b[2]+.5*c[2],u[3]=.5*b[3]+.5*c[3],u;w=Math.sin((1-m)*A)/C;m=Math.sin(m*A)/C;u[0]=b[0]*w+c[0]*m;u[1]=b[1]*w+c[1]*m;u[2]=b[2]*w+c[2]*m;u[3]=b[3]*w+c[3]*m;return u};x.fromRotationMatrix=function(b,c){c||(c=x.create());var m=b[0]+b[4]+b[8];if(0<m){var u=Math.sqrt(m+1);c[3]=.5*u;u=.5/u;c[0]=(b[7]-b[5])*u;c[1]=(b[2]-b[6])*u;c[2]=(b[3]-b[1])*u}else{u=
x.fromRotationMatrix.s_iNext=x.fromRotationMatrix.s_iNext||[1,2,0];m=0;b[4]>b[0]&&(m=1);b[8]>b[3*m+m]&&(m=2);var w=u[m],A=u[w];u=Math.sqrt(b[3*m+m]-b[3*w+w]-b[3*A+A]+1);c[m]=.5*u;u=.5/u;c[3]=(b[3*A+w]-b[3*w+A])*u;c[w]=(b[3*w+m]+b[3*m+w])*u;c[A]=(b[3*A+m]+b[3*m+A])*u}return c};q.toQuat4=x.fromRotationMatrix;(function(){var b=q.create();x.fromAxes=function(c,m,u,w){b[0]=m[0];b[3]=m[1];b[6]=m[2];b[1]=u[0];b[4]=u[1];b[7]=u[2];b[2]=c[0];b[5]=c[1];b[8]=c[2];return x.fromRotationMatrix(b,w)}})();x.identity=
function(b){b||(b=x.create());b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b};x.fromAngleAxis=function(b,c,m){m||(m=x.create());b*=.5;var u=Math.sin(b);m[3]=Math.cos(b);m[0]=u*c[0];m[1]=u*c[1];m[2]=u*c[2];return m};x.toAngleAxis=function(b,c){c||(c=b);var m=b[0]*b[0]+b[1]*b[1]+b[2]*b[2];0<m?(c[3]=2*Math.acos(b[3]),m=f.invsqrt(m),c[0]=b[0]*m,c[1]=b[1]*m,c[2]=b[2]*m):(c[3]=0,c[0]=1,c[1]=0,c[2]=0);return c};x.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"};var B={create:function(b){var c=new g(4);
b?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(b,c,m,u){var w=new g(4);w[0]=b;w[1]=c;w[2]=m;w[3]=u;return w},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c},identity:function(b){b||(b=B.create());b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},transpose:function(b,c){if(!c||b===c){var m=b[1];b[1]=b[2];b[2]=m;return b}c[0]=b[0];c[1]=b[2];c[2]=b[1];c[3]=b[3];return c},determinant:function(b){return b[0]*b[3]-b[2]*b[1]},inverse:function(b,c){c||
(c=b);var m=b[0],u=b[1],w=b[2],A=b[3],C=m*A-w*u;if(!C)return null;C=1/C;c[0]=A*C;c[1]=-u*C;c[2]=-w*C;c[3]=m*C;return c},multiply:function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2];b=b[3];m[0]=u*c[0]+w*c[2];m[1]=u*c[1]+w*c[3];m[2]=A*c[0]+b*c[2];m[3]=A*c[1]+b*c[3];return m},rotate:function(b,c,m){m||(m=b);var u=b[0],w=b[1],A=b[2];b=b[3];var C=Math.sin(c);c=Math.cos(c);m[0]=u*c+w*C;m[1]=u*-C+w*c;m[2]=A*c+b*C;m[3]=A*-C+b*c;return m},multiplyVec2:function(b,c,m){m||(m=c);var u=c[0];c=c[1];m[0]=u*b[0]+c*
b[1];m[1]=u*b[2]+c*b[3];return m},scale:function(b,c,m){m||(m=b);var u=b[1],w=b[2],A=b[3],C=c[0];c=c[1];m[0]=b[0]*C;m[1]=u*c;m[2]=w*C;m[3]=A*c;return m},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"}},z=a?"":"d";k["glMath"+z]=f;k["vec2"+z]={create:function(b){var c=new g(2);b?(c[0]=b[0],c[1]=b[1]):(c[0]=0,c[1]=0);return c},createFrom:function(b,c){var m=new g(2);m[0]=b;m[1]=c;return m},add:function(b,c,m){m||(m=c);m[0]=b[0]+c[0];m[1]=b[1]+c[1];return m},subtract:function(b,c,m){m||
(m=c);m[0]=b[0]-c[0];m[1]=b[1]-c[1];return m},multiply:function(b,c,m){m||(m=c);m[0]=b[0]*c[0];m[1]=b[1]*c[1];return m},divide:function(b,c,m){m||(m=c);m[0]=b[0]/c[0];m[1]=b[1]/c[1];return m},scale:function(b,c,m){m||(m=b);m[0]=b[0]*c;m[1]=b[1]*c;return m},dist:function(b,c){var m=c[0]-b[0],u=c[1]-b[1];return Math.sqrt(m*m+u*u)},dist2:function(b,c){var m=c[0]-b[0],u=c[1]-b[1];return m*m+u*u},set:function(b,c){c[0]=b[0];c[1]=b[1];return c},set2:function(b,c,m){m[0]=b;m[1]=c;return m},negate:function(b,
c){c||(c=b);c[0]=-b[0];c[1]=-b[1];return c},normalize:function(b,c){c||(c=b);var m=b[0]*b[0]+b[1]*b[1];0<m?(m=Math.sqrt(m),c[0]=b[0]/m,c[1]=b[1]/m):c[0]=c[1]=0;return c},cross:function(b,c,m){b=b[0]*c[1]-b[1]*c[0];if(!m)return b;m[0]=m[1]=0;m[2]=b;return m},length:function(b){var c=b[0];b=b[1];return Math.sqrt(c*c+b*b)},dot:function(b,c){return b[0]*c[0]+b[1]*c[1]},direction:function(b,c,m){m||(m=b);var u=b[0]-c[0];b=b[1]-c[1];c=u*u+b*b;if(!c)return m[0]=0,m[1]=0,m[2]=0,m;c=1/Math.sqrt(c);m[0]=u*
c;m[1]=b*c;return m},lerp:function(b,c,m,u){u||(u=b);u[0]=b[0]+m*(c[0]-b[0]);u[1]=b[1]+m*(c[1]-b[1]);return u},str:function(b){return"["+b[0]+", "+b[1]+"]"}};k["vec3"+z]=p;k["vec4"+z]={create:function(b){var c=new g(4);b?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3]):(c[0]=0,c[1]=0,c[2]=0,c[3]=0);return c},createFrom:function(b,c,m,u){var w=new g(4);w[0]=b;w[1]=c;w[2]=m;w[3]=u;return w},add:function(b,c,m){m||(m=c);m[0]=b[0]+c[0];m[1]=b[1]+c[1];m[2]=b[2]+c[2];m[3]=b[3]+c[3];return m},subtract:function(b,
c,m){m||(m=c);m[0]=b[0]-c[0];m[1]=b[1]-c[1];m[2]=b[2]-c[2];m[3]=b[3]-c[3];return m},multiply:function(b,c,m){m||(m=c);m[0]=b[0]*c[0];m[1]=b[1]*c[1];m[2]=b[2]*c[2];m[3]=b[3]*c[3];return m},divide:function(b,c,m){m||(m=c);m[0]=b[0]/c[0];m[1]=b[1]/c[1];m[2]=b[2]/c[2];m[3]=b[3]/c[3];return m},scale:function(b,c,m){m||(m=b);m[0]=b[0]*c;m[1]=b[1]*c;m[2]=b[2]*c;m[3]=b[3]*c;return m},dot:function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]},set:function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];
return c},set4:function(b,c,m,u,w){w[0]=b;w[1]=c;w[2]=m;w[3]=u;return w},negate:function(b,c){c||(c=b);c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];c[3]=-b[3];return c},lerp:function(b,c,m,u){u||(u=b);u[0]=b[0]+m*(c[0]-b[0]);u[1]=b[1]+m*(c[1]-b[1]);u[2]=b[2]+m*(c[2]-b[2]);u[3]=b[3]+m*(c[3]-b[3]);return u},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"}};k["mat2"+z]=B;k["mat3"+z]=q;k["mat4"+z]=v;k["quat4"+z]=x});return D})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(D,k){function a(g,p){g%=p;return 0<=g?g:g+p}Object.defineProperty(k,"__esModule",{value:!0});k.C_INFINITY=Number.POSITIVE_INFINITY;k.C_PI=Math.PI;k.C_2PI=2*k.C_PI;k.C_PI_BY_2=k.C_PI/2;k.C_RAD_TO_256=128/k.C_PI;k.C_256_TO_RAD=k.C_PI/128;k.C_DEG_TO_256=256/360;k.C_DEG_TO_RAD=k.C_PI/180;k.C_SQRT2=1.414213562;k.C_SQRT2_INV=1/k.C_SQRT2;var f=1/Math.LN2;k.positiveMod=a;k.radToByte=function(g){return a(g*k.C_RAD_TO_256,256)};k.degToByte=function(g){return a(g*k.C_DEG_TO_256,256)};k.log2=
function(g){return Math.log(g)*f};k.sqr=function(g){return g*g};k.clamp=function(g,p,n){return Math.min(Math.max(g,p),n)};k.interpolate=function(g,p,n){return g*(1-n)+p*n};k.between=function(g,p,n){return g>=p&&g<=n||g>=n&&g<=p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphMosaic":function(){define("require exports dojo/has dojo/promise/all ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(D,k,a,f,g,p,n){var d;a("stable-symbol-rendering")&&(d=new Set);return function(){function e(l,
h,t){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=l;this.height=h;this._glyphSource=t;this._binPack=new p(l-4,h-4);this._glyphData.push(new Uint8Array(l*h));this._dirties.push(!0);this._textures.push(void 0);this._addDecorationGlyph()}e.prototype.getGlyphItems=function(l,h){for(var t=this,r=[],q=this._glyphSource,v=new Set,x=1/256,y=0;y<h.length;y++)v.add(Math.floor(h[y]*x));var B=[];v.forEach(function(z){if(256>=
z){var b=l+z;t._rangePromises.has(b)?B.push(t._rangePromises.get(b)):(z=q.getRange(l,z).then(function(){t._rangePromises["delete"](b)})["catch"](function(){t._rangePromises["delete"](b);throw Error("Unable to query resource");}),t._rangePromises.set(b,z),B.push(z))}});return f(B).then(function(z){z=t._glyphIndex[l];z||(z={},t._glyphIndex[l]=z);if(a("stable-symbol-rendering")){d.clear();for(var b=0;b<h.length;b++){var c=h[b];d.add(c)}var m=[];v.forEach(function(C){m.push(C)});m.sort();c=[];for(b=0;b<
m.length;b++)for(var u=m[b],w=0;256>w;++w)c.push(256*u+w)}else c=h;b=0;for(u=c;b<u.length;b++)if(c=u[b],w=z[c]){if(!a("stable-symbol-rendering")||d.has(c))r[c]={rect:w.rect,metrics:w.metrics,page:w.page}}else if((w=q.getGlyph(l,c))&&w.metrics){var A=t._recordGlyph(w,c);z[c]={rect:A,metrics:w.metrics,tileIDs:null,page:t._currentPage};if(!a("stable-symbol-rendering")||d.has(c))r[c]={rect:A,metrics:w.metrics,page:t._currentPage};t._dirties[t._currentPage]=!0}return r})};e.prototype._recordGlyph=function(l,
h){var t=l.metrics;if(0===t.width)t=new g(0,0,0,0);else{var r=t.width+6,q=t.height+6,v=r%4?4-r%4:4,x=q%4?4-q%4:4;1===v&&(v=5);1===x&&(x=5);t=this._binPack.allocate(r+v,q+x);t.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new p(this.width-4,this.height-4),t=this._binPack.allocate(r+v,q+x));v=this._glyphData[this._currentPage];
x=l.bitmap;var y=void 0,B=void 0;if(x)for(var z=0;z<q;z++){y=r*z;B=this.width*(t.y+z+1)+t.x;for(var b=0;b<r;b++)v[B+b+1]=x[y+b]}}return t};e.prototype._addDecorationGlyph=function(){for(var l=[117,149,181,207,207,181,149,117],h=[],t=0;t<l.length;t++)for(var r=l[t],q=0;11>q;q++)h.push(r);l={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(h)};this._recordGlyph(l,0)};e.prototype.bind=function(l,h,t,r){this._textures[t]||(this._textures[t]=new n(l,{pixelFormat:6406,dataType:5121,
width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var q=this._textures[t];q.setSamplingMode(h);this._dirties[t]&&q.setData(this._glyphData[t]);l.bindTexture(q,r);this._dirties[t]=!1};e.prototype.dispose=function(){this._binPack=null;for(var l=0,h=this._textures;l<h.length;l++){var t=h[l];t&&t.dispose()}this._textures.length=0;this._glyphData.length=0};return e}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/RectangleBinPack":function(){define(["require","exports",
"./Rect"],function(D,k,a){return function(){function f(g,p){this._height=this._width=0;this._free=[];this._width=g;this._height=p;this._free.push(new a(0,0,g,p))}Object.defineProperty(f.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});f.prototype.allocate=function(g,p){if(g>this._width||p>this._height)return new a;for(var n=null,d=-1,e=0;e<this._free.length;++e){var l=
this._free[e];g<=l.width&&p<=l.height&&(null===n||l.y<=n.y&&l.x<=n.x)&&(n=l,d=e)}if(null===n)return new a;this._free.splice(d,1);n.width<n.height?(n.width>g&&this._free.push(new a(n.x+g,n.y,n.width-g,p)),n.height>p&&this._free.push(new a(n.x,n.y+p,n.width,n.height-p))):(n.width>g&&this._free.push(new a(n.x+g,n.y,n.width-g,n.height)),n.height>p&&this._free.push(new a(n.x,n.y+p,g,n.height-p)));return new a(n.x,n.y,g,p)};f.prototype.release=function(g){for(var p=0;p<this._free.length;++p){var n=this._free[p];
if(n.y===g.y&&n.height===g.height&&n.x+n.width===g.x)n.width+=g.width;else if(n.x===g.x&&n.width===g.width&&n.y+n.height===g.y)n.height+=g.height;else if(g.y===n.y&&g.height===n.height&&g.x+g.width===n.x)n.x=g.x,n.width+=g.width;else if(g.x===n.x&&g.width===n.width&&g.y+g.height===n.y)n.y=g.y,n.height+=g.height;else continue;this._free.splice(p,1);this.release(g)}this._free.push(g)};return f}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphSource":function(){define(["require","exports","../../../../request",
"../../../../core/pbf","../../../../core/promiseUtils"],function(D,k,a,f,g){var p=function(){function d(e){this._metrics=[];for(this._bitmaps=[];e.next();)switch(e.tag()){case 1:for(var l=e.getMessage();l.next();)switch(l.tag()){case 3:for(var h=l.getMessage(),t=void 0,r=void 0,q=void 0,v=void 0,x=void 0,y=void 0,B=void 0;h.next();)switch(h.tag()){case 1:t=h.getUInt32();break;case 2:r=h.getBytes();break;case 3:q=h.getUInt32();break;case 4:v=h.getUInt32();break;case 5:x=h.getSInt32();break;case 6:y=
h.getSInt32();break;case 7:B=h.getUInt32();break;default:h.skip()}t&&(this._metrics[t]={width:q,height:v,left:x,top:y,advance:B},this._bitmaps[t]=r);break;default:l.skip()}break;default:e.skip()}}d.prototype.getMetrics=function(e){return this._metrics[e]};d.prototype.getBitmap=function(e){return this._bitmaps[e]};return d}(),n=function(){function d(){this._ranges=[]}d.prototype.getRange=function(e){return this._ranges[e]};d.prototype.addRange=function(e,l){this._ranges[e]=l};return d}();return function(){function d(e){this._glyphInfo=
{};this._baseURL=e}d.prototype.getRange=function(e,l){var h=this._getFontStack(e);if(h.getRange(l))return g.resolve();var t=256*l,r=t+255;t=this._baseURL.replace("{fontstack}",e).replace("{range}",t+"-"+r);return a(t,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(q){h.addRange(l,new p(new f(new Uint8Array(q.data),new DataView(q.data))))})};d.prototype.getGlyph=function(e,l){var h=this._getFontStack(e);if(h){var t=Math.floor(l/256);if(!(256<t)&&(h=h.getRange(t)))return{metrics:h.getMetrics(l),
bitmap:h.getBitmap(l)}}};d.prototype._getFontStack=function(e){var l=this._glyphInfo[e];l||(l=this._glyphInfo[e]=new n);return l};return d}()})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(D,k,a,f,g){return function(p,n){var d=f.mixin({},{url:p,failOk:!0},n);"array-buffer"===n.responseType?(d.handleAs="arraybuffer",delete d.responseType):n.responseType&&(d.handleAs=n.responseType,delete d.responseType);null!==
n.query&&(d.content=d.query,delete d.query);if(n.hasOwnProperty("allowImageDataAccess")){var e={allowImageDataAccess:n.allowImageDataAccess};delete d.allowImageDataAccess}var l=new g(function(){h.isFulfilled()||h.cancel()});var h=a(d,e).then(function(t){l.resolve({data:t})})["catch"](function(t){t&&null!=t.httpCode&&(t.details=t.details||{},t.details.httpStatus=t.httpCode);l.reject(t)});return l.promise}})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z){function b(L){L=new p(L);return(L.host+(L.port?":"+L.port:"")).toLowerCase()}function c(L){return this._xhr?this._xhr.getResponseHeader(L):null}function m(L,P){var X=t.objectToQuery(L.content);X&&(L.url+=(-1===L.url.indexOf("?")?"?":"\x26")+X);if(2E3<L.url.length){if("data:"!==L.url.toLowerCase().slice(0,5))return X=new f,X.reject(g.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),X;if(3E6<L.url.length)return X=
new f,X.reject(g.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),X}var Q=new Image;P.allowImageDataAccess&&(Q.crossOrigin=L.withCredentials?"use-credentials":"anonymous");var K=!1,U=new f(function(da){K=!0;Q.onload=Q.onerror=Q.onabort=null;Q.src=""});X=function(da){Q.onload=Q.onerror=Q.onabort=null;K||U.reject(Error("Unable to load the resource"))};Q.onload=function(){Q.onload=Q.onerror=Q.onabort=null;K||U.resolve(this)};Q.onerror=X;Q.onabort=
X;Q.alt="";Q.src=L.url;return U}function u(L,P,X,Q){var K=!1,U=!1,da=!1,fa;if(x.isDefined(P))if(g.isObject(P)){K=!!P.useProxy;U=!!P.usePost;da=!!P.returnProgress;var ia=P.crossOrigin}else K=!!P;L=g.mixin({},L);delete L._credential;L._ssl&&(L.url=L.url.replace(/^http:/i,"https:"));10>v("ie")&&!S.test(L.url)&&(L.url=encodeURI(L.url));var la=L.content,ma=L.url,ta=X&&L.form,ua=M;ia=x.isDefined(ia)?ia:ua.useCors;L.load=function(Ha){if(Ha){if(Ha.error){var Ma=g.mixin(Error(),Ha.error);Ma.log=!!a.isDebug}else"error"===
Ha.status&&(Ma=g.mixin(Error(),Ha),Ma.log=!!a.isDebug);Ma&&(L.failOk=!Ma.log,x.isDefined(Ma.httpCode)||(Ma.httpCode=Ma.code))}return Ma||Ha};L.error=function(Ha,Ma){Ma&&Ma.xhr&&Ma.xhr.abort();Ha instanceof Error||(Ha=g.mixin(Error(),Ha));Ha.log=!!a.isDebug;L.failOk=!Ha.log;ua.errorHandler(Ha,Ma);return Ha};L._token&&(L.content=L.content||{},L.content.token=L._token);var Ca=0;if(la&&ma){var xa=t.objectToQuery(la);Ca=xa.length+ma.length+1;v("esri-url-encodes-apostrophe")&&(Ca=xa.replace(/'/g,"%27").length+
ma.length+1)}L.timeout=x.isDefined(L.timeout)?L.timeout:ua.timeout;L.handleAs=L.handleAs||"json";try{var Ba=ia&&y.canUseXhr(L.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(L.url),Z=y.hasSameOrigin(L.url,window.location.href)||Ba,ka=U||X||Ca>ua.postLength?!0:!1,qa=Z||-1===L.handleAs.indexOf("json")||!L.callbackParamName||X?!1:!0,ha=y.getProxyRule(L.url)||ua.alwaysUseProxy||K||!("image"===L.handleAs&&!P.allowImageDataAccess||qa&&!ka||Z)?!0:!1;X&&!v("esri-file-upload")&&!ha&&Ba&&(ha=!0);
if(ha){var ea=y.getProxyUrl(ma,ia);var na=ea.path;ea._xo&&(Ba=!0);!ka&&na.length+1+Ca>ua.postLength&&(ka=!0);L.url=na+"?"+ma;if(ka)L.content=g.mixin(ea.query||{},la);else{var N=t.objectToQuery(g.mixin(ea.query||{},la));N&&(L.url+="?"+N);L.content=null}}if(!qa||ka||ha){var V=L.headers;!Ba||V&&V.hasOwnProperty("X-Requested-With")||(V=L.headers=V||{},V["X-Requested-With"]=null);if(X){var ca=L.callbackParamName||"callback.html",J=L.callbackElementName||"textarea",pa,sa,oa=ta.elements?ta.elements.length:
0;if(la=L.content)for(pa in la.token&&/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(ma)&&(ma+=(-1===ma.indexOf("?")?"?":"\x26")+"token\x3d"+la.token,L.url=ha?na+"?"+ma:ma,delete la.token),la){var Oa=la[pa];if(x.isDefined(Oa)){var Sa=null;for(sa=0;sa<oa;sa++){var va=ta.elements[sa];if(va.name===pa){Sa=va;break}}Sa?Sa.value=Oa:Q?ta.append(pa,Oa):ta.appendChild(h.create("input",{type:"hidden",name:pa,value:Oa}))}}if(v("esri-file-upload")){k.forEach(ta.elements,function(Ha){Ha.name===ca&&ta.removeChild(Ha)});
var Da=Q?ta:new FormData(ta);if(11<=v("safari")&&"entries"in Da&&"delete"in Da){Q=[];for(var ya=Da.entries(),wa=ya.next();!wa.done;){var Aa=wa.value;Aa[1]instanceof File&&""===Aa[1].name&&Q.push(Aa[0]);wa=ya.next()}Q.forEach(function(Ha){Da["delete"](Ha)})}L.contentType=!1;L.postData=Da;delete L.form}else{ta.enctype="multipart/form-data";9>v("ie")&&(ta.encoding="multipart/form-data");ta.method="post";k.some(ta.elements,function(Ha){return Ha.name===ca})||ta.appendChild(h.create("input",{type:"hidden",
name:ca,value:J}));if(-1!==ma.toLowerCase().indexOf("addattachment")||-1!==ma.toLowerCase().indexOf("updateattachment"))ma+=(-1===ma.indexOf("?")?"?":"\x26")+ca+"\x3d"+J,L.url=ha?na+"?"+ma:ma;delete L.content}}if(Ba&&!L.hasOwnProperty("withCredentials")&&"with-credentials"===M.useCors){na=ha?na:ma;var Ea=y.canUseXhr(na,!0),Fa=-1<Ea?M.corsEnabledServers[Ea]:null;if(Fa&&Fa.hasOwnProperty("withCredentials"))Fa.withCredentials&&(L.withCredentials=!0);else if(r.id){var La=r.id.findServerInfo(na);La&&La.webTierAuth&&
(L.withCredentials=!0)}}L=I?I(L):L;var Ja=function(){if("image"===L.handleAs)return m(L,P);if(ka){if(X&&!v("esri-file-upload")){fa=new f(function(){Ha.cancel()});var Ha=l.post(L.url,L).then(function(Ka){fa.resolve(Ka)}).otherwise(function(Ka){fa.reject(Ka)});fa.addCallback(function(Ka){return L.load(Ka)});fa.addErrback(function(Ka){return L.error(Ka)});return fa}!ha&&v("safari")&&(L.url+=(-1===L.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+R++);if(da){L.uploadProgress=!0;L.data=L.postData;
L.query=L.content;fa=new f(function(){Ma.cancel()});var Ma=d.post(L.url,L).then(function(Ka){fa.resolve(Ka)},function(Ka){fa.reject(Ka)},function(Ka){fa.progress({transferType:Ka.transferType,loaded:Ka.loaded,total:Ka.total})});fa.addCallback(function(Ka){return L.load(Ka)});fa.addErrback(function(Ka){return L.error(Ka)});return fa}return n.post(L)}return n.get(L)};return L.withCredentials&&z.isNoCorsRequestRequired(ma)?fa=z.sendNoCorsRequest(ma,la).addBoth(function(){var Ha=Ja();fa.ioArgs=Ha.ioArgs;
return Ha}):Ja()}L=I?I(L):L;L.jsonp=L.callbackParamName;L.query=L.content;fa=new f(function(){Na.cancel()});var Na=e.get(L.url,L).then(function(Ha){fa.resolve(Ha)}).otherwise(function(Ha){fa.reject(Ha)});fa.addCallback(function(Ha){return L.load(Ha)});fa.addErrback(function(Ha){return L.error(Ha)});return fa}catch(Ha){return fa=new f,fa.errback(L.error(Ha)),fa}}function w(L){var P=M.corsStatus,X=y.canUseXhr(L,!0);-1<X&&M.corsEnabledServers.splice(X,1);var Q=new f;Q.reject({log:!!a.isDebug});P[b(L)]=
Q.promise;return X}function A(L){var P=M.corsStatus;try{var X=b(L);if(M.corsDetection&&M.useCors&&v("esri-cors")&&L&&-1!==L.toLowerCase().indexOf("/rest/services")&&!y.hasSameOrigin(L,window.location.href)&&!y.canUseXhr(L)){if(P[X]&&!P[X].isCanceled())return P[X];var Q=new f(B._dfdCanceller);P[X]=Q.promise;var K=n.get({url:L.substring(0,L.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*M.corsDetectionTimeout});Q._pendingDfd=
K;K.then(function(U){U?(y.canUseXhr(L)||M.corsEnabledServers.push(X),Q.resolve()):Q.reject()},function(U){Q.reject(U)});return Q.promise}}catch(U){}return O}function C(L){I=L}function E(L,P,X,Q){function K(Ba){Ba._pendingDfd=u(X,Q,ta,ma);if(!Ba._pendingDfd){Ba.ioArgs=Ba._pendingDfd&&Ba._pendingDfd.ioArgs;var Z=Error("Deferred object is missing");Z.log=!!a.isDebug;Ba.errback(Z);Ba._pendingDfd=null;return Ba}Ba._pendingDfd.addCallback(function(ka){if(!ka)return ka;var qa=Ba._pendingDfd&&Ba._pendingDfd.ioArgs&&
Ba._pendingDfd.ioArgs.xhr;if(!qa)return ka;if(qa=qa.getResponseHeader("Content-Type"))if(qa=qa.toLowerCase(),-1===qa.indexOf("text/plain")&&-1===qa.indexOf("application/json"))return ka;if(ka instanceof ArrayBuffer&&750>=ka.byteLength)qa=new Blob([ka]);else if(ka instanceof Blob&&750>=ka.size)qa=ka;else return ka;var ha=new f,ea=new FileReader;ea.readAsText(qa);ea.onloadend=function(){if(!ea.error)try{var na=JSON.parse(ea.result);if(na.error)var N=na.error}catch(V){}N?(N=g.mixin(Error(),N),N.log=
!!a.isDebug,null==N.httpCode&&(N.httpCode=N.code),ha.reject(N)):ha.resolve(ka)};return ha.promise}).addCallback(function(ka){Ba.ioArgs=Ba._pendingDfd&&Ba._pendingDfd.ioArgs;Q.returnFullResponse&&(ka={data:ka,_xhr:Ba.ioArgs&&Ba.ioArgs.xhr,getHeader:c});Ba.callback(ka);Ba._pendingDfd=null}).addErrback(function(ka){if(ka){var qa=ka.code;var ha=ka.subcode;var ea=(ea=ka.messageCode)&&ea.toUpperCase()}if(ka&&403==qa&&(4==ha||ka.message&&-1<ka.message.toLowerCase().indexOf("ssl")&&-1===ka.message.toLowerCase().indexOf("permission"))){if(!X._ssl){X._ssl=
X._sslFromServer=!0;E(Ba,!0,X,Q);return}}else if(ka&&415==ka.status){if(w(X.url),!X._err415){X._err415=1;E(Ba,!0,X,Q);return}}else if(r.id&&-1!==k.indexOf(r.id._errorCodes,qa)&&!r.id._isPublic(X.url)&&!da&&(403!=qa||-1===k.indexOf(Y,ea)&&(!x.isDefined(ha)||2==ha&&X._token))){Ba._pendingDfd=r.id.getCredential(X.url,{token:X._token,error:ka});Ba._pendingDfd.addCallback(function(na){X._token=na.token;X._credential=na;X._ssl=X._sslFromServer||na.ssl;E(Ba,!0,X,Q)}).addErrback(function(na){Ba.errback(na);
Ba._pendingDfd=null});return}Ba.ioArgs=Ba._pendingDfd&&Ba._pendingDfd.ioArgs;Ba.isFulfilled()||Ba.errback(ka);Ba._pendingDfd=null}).then(null,null,function(ka){Ba.progress(ka)})}var U=X.form,da=Q.disableIdentityLookup,fa=Q._preLookup,ia=!1;if(v("esri-workers")&&!1!==M.useWorkers)if(!0===Q.useWorkers||!0===M.useWorkers)ia=!0;else if(Q.workerOptions){var la=Q.workerOptions;if(la.callback||la.worker&&la.worker.worker instanceof Worker)ia=!0}var ma=U&&v("esri-file-upload")&&U instanceof FormData,ta=U&&
(U.elements?k.some(U.elements,function(Ba){return"file"===Ba.type}):ma),ua=-1!==X.url.toLowerCase().indexOf("token\x3d")||X.content&&X.content.token||ta&&k.some(U.elements,function(Ba){return"token"===Ba.name})?1:0;if(!P){L.addCallback(function(Ba){if(Ba&&(/\/sharing\/rest\/accounts\/self/i.test(X.url)||/\/sharing\/rest\/portals\/self/i.test(X.url))){if(!ua&&!X._token&&Ba.user&&Ba.user.username){M.webTierAuthServers.push(b(X.url));var Z=M.corsEnabledServers,ka=y.canUseXhr(X.url,!0),qa={host:b(X.url),
withCredentials:!0};if(-1===ka)Z.push(qa);else{var ha=Z[ka];ha instanceof RegExp?(qa.host=ha,Z.splice(ka,1,qa)):"object"===typeof ha?ha.withCredentials=!0:Z.splice(ka,1,qa)}}Array.isArray(Ba.authorizedCrossOriginNoCorsDomains)&&z.registerNoCorsDomains(Ba.authorizedCrossOriginNoCorsDomains)}if(Ba=X._credential)if(Z=(Z=r.id.findServerInfo(Ba.server))&&Z.owningSystemUrl)Z=Z.replace(/\/?$/,"/sharing"),(Ba=r.id.findCredential(Z,Ba.userId))&&-1===r.id._getIdenticalSvcIdx(Z,Ba)&&Ba.resources.splice(0,0,
Z)});L.addBoth(function(Ba){delete X._credential;!Ba||v("ie")&&Ba.nodeType||(Ba._ssl=X._ssl)});var Ca=X.load,xa=X.error;Ca&&L.addCallback(function(Ba){var Z=L._pendingDfd;Z=Z&&Z.ioArgs;return Ca.call(Z&&Z.args,Ba,Z)});xa&&L.addErrback(function(Ba){var Z=L._pendingDfd;Z=Z&&Z.ioArgs;return xa.call(Z&&Z.args,Ba,Z)})}!r.id||ua||X._token||r.id._isPublic(X.url)||da&&!fa||!(P=r.id.findCredential(X.url))||(X._token=P.token,X._ssl=P.ssl);ia?Q.workerOptions&&Q.workerOptions.worker?(F||(F=n),n=Q.workerOptions.worker,
K(L)):D(["./workers/RequestClient"],function(Ba){F||(F=n);if(Q.workerOptions){var Z=Q.workerOptions;n=Ba.getClient(Z.callback,Z.cbFunction)}else n=Ba.getClient();K(L)}):(F&&(n=F,F=null),K(L));return L}function G(L,P){L.url=y.fixUrl(L.url);P=P||{};var X=new f(B._dfdCanceller),Q=A(L.url);X._pendingDfd=Q;Q.always(function(K){K&&"cancel"===K.dojoType?X.reject(K):E(X,!1,L,P)});return X}var F=null,I,M=q.defaults.io,Y=["COM_0056","COM_0057","SB_0008"],R=0,S=/%[0-9A-F]{2}/i,O=function(){var L=new f;L.resolve();
return L.promise}();G._makeRequest=u;G._processRequest=E;G._disableCors=w;G._detectCors=A;G.setRequestPreCallback=C;r.request=G;r._makeRequest=u;r._processRequest=E;r._disableCors=w;r._detectCors=A;r.setRequestPreCallback=C;return G})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(D,k,a,f,g,p){function n(){var y=document.createElement("iframe");y.name="esri_core_jsonp_iframe";y.style.display="none";
y.setAttribute("sandbox","allow-scripts");if(!p("ff")&&"srcdoc"in y){var B=D.toUrl("dojo/dojo.js"),z=g.replace("../../../dojo/dojo.js",B);B=B.slice(0,-7);z=z.replace("../../../dojo/",B);y.srcdoc=z}else z=D.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===z.indexOf("https:")&&(z=z.replace("https:","http:")),y.src=z;document.body.appendChild(y);return y}function d(){var y=new MessageChannel;y.port1.addEventListener("message",e);y.port1.start();return y}function e(y){var B=y.data;if("ready"===
B){B=0;for(var z=v;B<z.length;B++)y=z[B],h(y,r);v=null}else if(y=x[B.id])delete x[B.id],B.isError?y.dfd.reject(Error(B.message)):y.dfd.resolve(B.response)}function l(y,B){y.addEventListener("load",function(){y.contentWindow.postMessage("init","*",[B.port2])})}function h(y,B){x[y.message.id]=y;B.port1.postMessage(y.message)}Object.defineProperty(k,"__esModule",{value:!0});var t,r,q=0,v=[],x={};k.get=function(y,B){if(!p("esri-script-sandbox"))return f.get(y,B);var z=null;B&&(z={jsonp:B.jsonp,preventCache:B.preventCache,
query:B.query,timeout:B.timeout});var b=new a(function(){if(v){var m=v.indexOf(c);-1<m&&v.splice(m,1)}else c.message.id in x&&delete x[c.message.id]}),c={dfd:b,message:{id:"id"+(++q+Math.random()),url:y,options:z}};t||(t=n(),r=d(),l(t,r));v?v.push(c):h(c,r);return b.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(D,k,a,f,g,p,n,d,e,l,h){function t(w,A){w.canDelete&&
y._remove(w.id,A.options.frameDoc,!0)}function r(w){u&&u.length&&(g.forEach(u,function(A){y._remove(A.id,A.frameDoc);A.frameDoc=null}),u=[]);return w.options.jsonp?!w.data:!0}function q(w){return!!this.scriptLoaded}function v(w){return(w=w.options.checkString)&&eval("typeof("+w+') !\x3d\x3d "undefined"')}function x(w,A){if(this.canDelete){var C=this.response.options;u.push({id:this.id,frameDoc:C.ioArgs?C.ioArgs.frameDoc:C.frameDoc});C.ioArgs&&(C.ioArgs.frameDoc=null);C.frameDoc=null}A?this.reject(A):
this.resolve(w)}function y(w,A,C){var E=a.parseArgs(w,a.deepCopy({},A));w=E.url;A=E.options;var G=a.deferred(E,t,r,A.jsonp?null:A.checkString?v:q,x);p.mixin(G,{id:B+z++,canDelete:!1});A.jsonp&&((new RegExp("[?\x26]"+A.jsonp+"\x3d")).test(w)||(w+=(~w.indexOf("?")?"\x26":"?")+A.jsonp+"\x3d"+(A.frameDoc?"parent.":"")+B+"_callbacks."+G.id),G.canDelete=!0,m[G.id]=function(M){E.data=M;G.handleResponse(E)});a.notify&&a.notify.emit("send",E,G.promise.cancel);if(!A.canAttach||A.canAttach(G)){var F=y._attach(G.id,
w,A.frameDoc,function(M){if(!(M instanceof Error)){var Y=Error("Error loading "+(M.target?M.target.src:"script"));Y.source=M;M=Y}G.reject(M);y._remove(G.id,A.frameDoc,!0)});if(!A.jsonp&&!A.checkString)var I=n(F,b,function(M){if("load"===M.type||c.test(F.readyState))I.remove(),G.scriptLoaded=M})}k(G);return C?G:G.promise}l.add("script-readystatechange",function(w,A){return"undefined"!==typeof A.createElement("script").onreadystatechange&&("undefined"===typeof w.opera||"[object Opera]"!==w.opera.toString())});
var B=D.id.replace(/[\/\.\-]/g,"_"),z=0,b=l("script-readystatechange")?"readystatechange":"load",c=/complete|loaded/,m=f.global[B+"_callbacks"]={},u=[];y.get=y;y._attach=function(w,A,C,E){C=C||h.doc;var G=C.createElement("script");if(E)n.once(G,"error",E);G.type="text/javascript";try{G.src=A}catch(F){E&&E(G)}G.id=w;G.async=!0;G.charset="utf-8";return C.getElementsByTagName("head")[0].appendChild(G)};y._remove=function(w,A,C){e.destroy(d.byId(w,A));m[w]&&(C?m[w]=function(){delete m[w]}:delete m[w])};
y._callbacksProperty=B+"_callbacks";return y})},"esri/core/sniff":function(){define(["../sniff"],function(D){return D})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(D,k,a,f,g,p,n,d,e,l,h,t){function r(c){return!this.isFulfilled()}function q(c){return!!this._finished}function v(c,m){if(!m)try{var u=c.options,w=y.doc(y._frame),
A=u.handleAs;if("html"!==A){if("xml"===A)if("html"===w.documentElement.tagName.toLowerCase()){d("a",w.documentElement).orphan();var C=w.documentElement.innerText||w.documentElement.textContent;C=C.replace(/>\s+</g,"\x3e\x3c");c.text=p.trim(C)}else c.data=w;else c.text=w.getElementsByTagName("textarea")[0].value;g(c)}else c.data=w}catch(E){m=E}m?this.reject(m):this._finished?this.resolve(c):this.reject(Error("Invalid dojo/request/iframe request state"))}function x(c){this._callNext()}function y(c,
m,u){var w=f.parseArgs(c,f.deepCreate(b,m),!0);c=w.url;m=w.options;if("GET"!==m.method&&"POST"!==m.method)throw Error(m.method+" not supported by dojo/request/iframe");y._frame||(y._frame=y.create(y._iframeName,z+"();"));c=f.deferred(w,null,r,q,v,x);c._callNext=function(){this._calledNext||(this._calledNext=!0,y._currentDfd=null,y._fireNextRequest())};c._legacy=u;y._dfdQueue.push(c);y._fireNextRequest();a(c);return u?c:c.promise}var B=D.id.replace(/[\/\.\-]/g,"_"),z=B+"_onload";t.global[z]||(t.global[z]=
function(){var c=y._currentDfd;if(c){var m=l.byId(c.response.options.form)||c._tmpForm;if(m){for(var u=c._contentToClean,w=0;w<u.length;w++)for(var A=u[w],C=0;C<m.childNodes.length;C++){var E=m.childNodes[C];if(E.name===A){h.destroy(E);break}}c._originalAction&&m.setAttribute("action",c._originalAction);c._originalMethod&&(m.setAttribute("method",c._originalMethod),m.method=c._originalMethod);c._originalTarget&&(m.setAttribute("target",c._originalTarget),m.target=c._originalTarget)}c._tmpForm&&(h.destroy(c._tmpForm),
delete c._tmpForm);c._finished=!0}else y._fireNextRequest()});var b={method:"POST"};y.create=function(c,m,u){if(t.global[c])return t.global[c];if(t.global.frames[c])return t.global.frames[c];u||(e("config-useXDomain")&&e("config-dojoBlankHtmlUrl"),u=e("config-dojoBlankHtmlUrl")||k.toUrl("dojo/resources/blank.html"));m=h.place('\x3ciframe id\x3d"'+c+'" name\x3d"'+c+'" src\x3d"'+u+'" onload\x3d"'+m+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
t.body());return t.global[c]=m};y.doc=function(c){if(c.contentDocument)return c.contentDocument;var m=c.name;if(m){var u=t.doc.getElementsByTagName("iframe");if(c.document&&u[m].contentWindow&&u[m].contentWindow.document)return u[m].contentWindow.document;if(t.doc.frames[m]&&t.doc.frames[m].document)return t.doc.frames[m].document}return null};y.setSrc=function(c,m,u){c=t.global.frames[c.name];c.contentWindow&&(c=c.contentWindow);try{u?c.location.replace(m):c.location=m}catch(w){}};y._iframeName=
B+"_IoIframe";y._notifyStart=function(){};y._dfdQueue=[];y._currentDfd=null;y._fireNextRequest=function(){try{if(!y._currentDfd&&y._dfdQueue.length){do var c=y._currentDfd=y._dfdQueue.shift();while(c&&(c.canceled||c.isCanceled&&c.isCanceled())&&y._dfdQueue.length);if(!c||c.canceled||c.isCanceled&&c.isCanceled())y._currentDfd=null;else{var m=c.response,u=m.options,w=c._contentToClean=[],A=l.byId(u.form),C=f.notify,E=u.data||null;if(!c._legacy&&"POST"===u.method&&!A)A=c._tmpForm=h.create("form",{name:B+
"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},t.body());else if("GET"===u.method&&A&&-1<m.url.indexOf("?")){var G=m.url.slice(m.url.indexOf("?")+1);E=p.mixin(n.queryToObject(G),E)}if(A){if(!c._legacy){var F=A;do F=F.parentNode;while(F&&F!==t.doc.documentElement);F||(A.style.position="absolute",A.style.left="-1000px",A.style.top="-1000px",t.body().appendChild(A));A.name||(A.name=B+"_form")}if(E){F=function(L,P){h.create("input",{type:"hidden",name:L,value:P},A);w.push(L)};for(var I in E){var M=
E[I];if(p.isArray(M)&&1<M.length)for(G=0;G<M.length;G++)F(I,M[G]);else{var Y=d("input[name\x3d'"+I+"']",A);-1==Y.indexOf()?F(I,M):Y.val(M)}}}var R=A.getAttributeNode("action"),S=A.getAttributeNode("method"),O=A.getAttributeNode("target");m.url&&(c._originalAction=R?R.value:null,R?R.value=m.url:A.setAttribute("action",m.url));c._legacy?S&&S.value||(S?S.value=u.method:A.setAttribute("method",u.method)):(c._originalMethod=S?S.value:null,S?S.value=u.method:A.setAttribute("method",u.method));c._originalTarget=
O?O.value:null;O?O.value=y._iframeName:A.setAttribute("target",y._iframeName);A.target=y._iframeName;C&&C.emit("send",m,c.promise.cancel);y._notifyStart(m);A.submit()}else u="",m.options.data&&(u=m.options.data,"string"!==typeof u&&(u=n.objectToQuery(u))),F=m.url+(-1<m.url.indexOf("?")?"\x26":"?")+u,C&&C.emit("send",m,c.promise.cancel),y._notifyStart(m),y.setSrc(y._frame,F,!0)}}}catch(L){c.reject(L)}};f.addCommonMethods(y,["GET","POST"]);return y})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),
function(D,k,a,f,g){function p(e){for(;e.childNodes[0]&&1==e.childNodes[0].nodeType;)e=e.childNodes[0];return e}function n(e,l){"string"==typeof e?(e=f.toDom(e,l&&l.ownerDocument),11==e.nodeType&&(e=e.childNodes[0])):1==e.nodeType&&e.parentNode&&(e=e.cloneNode(!1));return e}var d=D.NodeList;k.extend(d,{_placeMultiple:function(e,l){for(var h="string"==typeof e||e.nodeType?D(e):e,t=[],r=0;r<h.length;r++)for(var q=h[r],v=this.length,x=v-1,y;y=this[x];x--)0<r&&(y=this._cloneNode(y),t.unshift(y)),x==v-
1?f.place(y,q,l):q.parentNode.insertBefore(y,q),q=y;t.length&&(t.unshift(0),t.unshift(this.length-1),Array.prototype.splice.apply(this,t));return this},innerHTML:function(e){return arguments.length?this.addContent(e,"only"):this[0].innerHTML},text:function(e){if(arguments.length){for(var l=0,h;h=this[l];l++)1==h.nodeType&&g.set(h,"textContent",e);return this}var t="";for(l=0;h=this[l];l++)t+=g.get(h,"textContent");return t},val:function(e){if(arguments.length){for(var l=k.isArray(e),h=0,t;t=this[h];h++){var r=
t.nodeName.toUpperCase(),q=t.type,v=l?e[h]:e;if("SELECT"==r)for(r=t.options,q=0;q<r.length;q++){var x=r[q];x.selected=t.multiple?-1!=a.indexOf(e,x.value):x.value==v}else"checkbox"==q||"radio"==q?t.checked=t.value==v:t.value=v}return this}if((t=this[0])&&1==t.nodeType){e=t.value||"";if("SELECT"==t.nodeName.toUpperCase()&&t.multiple){e=[];r=t.options;for(q=0;q<r.length;q++)x=r[q],x.selected&&e.push(x.value);e.length||(e=null)}return e}},append:function(e){return this.addContent(e,"last")},appendTo:function(e){return this._placeMultiple(e,
"last")},prepend:function(e){return this.addContent(e,"first")},prependTo:function(e){return this._placeMultiple(e,"first")},after:function(e){return this.addContent(e,"after")},insertAfter:function(e){return this._placeMultiple(e,"after")},before:function(e){return this.addContent(e,"before")},insertBefore:function(e){return this._placeMultiple(e,"before")},remove:d.prototype.orphan,wrap:function(e){if(this[0]){e=n(e,this[0]);for(var l=0,h;h=this[l];l++){var t=this._cloneNode(e);h.parentNode&&h.parentNode.replaceChild(t,
h);p(t).appendChild(h)}}return this},wrapAll:function(e){if(this[0]){e=n(e,this[0]);this[0].parentNode.replaceChild(e,this[0]);e=p(e);for(var l=0,h;h=this[l];l++)e.appendChild(h)}return this},wrapInner:function(e){if(this[0]){e=n(e,this[0]);for(var l=0;l<this.length;l++){var h=this._cloneNode(e);this._wrap(k._toArray(this[l].childNodes),null,this._NodeListCtor).wrapAll(h)}}return this},replaceWith:function(e){e=this._normalize(e,this[0]);for(var l=0,h;h=this[l];l++)this._place(e,h,"before",0<l),h.parentNode.removeChild(h);
return this},replaceAll:function(e){e=D(e);for(var l=this._normalize(this,this[0]),h=0,t;t=e[h];h++)this._place(l,t,"before",0<h),t.parentNode.removeChild(t);return this},clone:function(){for(var e=[],l=0;l<this.length;l++)e.push(this._cloneNode(this[l]));return this._wrap(e,this,this._NodeListCtor)}});d.prototype.html||(d.prototype.html=d.prototype.innerHTML);return d})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,k,a){k={_dfdCanceller:function(f){f.canceled=
!0;var g=f._pendingDfd;if(!f.isFulfilled()&&g&&!g.isFulfilled()){g.cancel();var p=g.results&&g.results[1]}f._pendingDfd=null;return p},_fixDfd:function(f){var g=f.then;f.then=function(p,n,d){if(p){var e=p;p=function(l){return l&&l._argsArray?e.apply(null,l):e(l)}}return g.call(this,p,n,d)};return f},_resDfd:function(f,g,p){var n=g.length;1===n?p?f.errback(g[0]):f.callback(g[0]):1<n?(g._argsArray=!0,f.callback(g)):f.callback()}};D.mixin(a,k);return k})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred",
"dojo/_base/url","../config","../urlUtils"],function(D,k,a,f){function g(n){n=new k(n);return n.scheme+"://"+n.authority}var p=a.defaults.io;return{registerNoCorsDomains:function(n){p.crossOriginNoCorsDomains||(p.crossOriginNoCorsDomains={});for(var d=p.crossOriginNoCorsDomains,e=0;e<n.length;e++){var l=n[e];l=l.toLowerCase();/^https?:\/\//.test(l)?d[g(l)]=0:(d[g("http://"+l)]=0,d[g("https://"+l)]=0)}},isNoCorsRequestRequired:function(n){var d=p.crossOriginNoCorsDomains;return d?(n=g(n),n=n.toLowerCase(),
!f.hasSameOrigin(n,window.location.origin)&&d[n]<Date.now()-36E5):!1},sendNoCorsRequest:function(n,d){var e=new D,l=p.crossOriginNoCorsDomains;l&&(l[g(n).toLowerCase()]=Date.now());l=f.urlToObject(n);n=l.path;if(l.query&&"json"===l.query.f||d&&"json"===d.f)n+="?f\x3djson";fetch(n,{mode:"no-cors",credentials:"include"}).then(e.resolve,e.resolve);return e}}})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(D,k){return function(){function a(f,g,p,n){this._tag=0;this._dataType=
99;this._data=f;this._dataView=g;this._pos=p||0;this._end=n||f.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(f){for(;;){if(this._pos===this._end)return!1;var g=this._decodeVarint();this._tag=g>>3;this._dataType=g&7;if(!f||f===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=
function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var f=4294967295;f=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return f;f=(f|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return f;f=(f|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return f;f=(f|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return f;f=(f|(this._data[this._pos]&15)<<
28)>>>0;if(128>this._data[this._pos++])return f};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var f=this.getUInt32();return f>>>1^-(f&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var f=0!==this._data[this._pos];this._skip(1);return f};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var f=this._dataView,g=this._pos;f=f.getUint32(g,!0)+4294967296*f.getUint32(g+
4,!0);this._skip(8);return f};a.prototype.getSFixed64=function(){var f=this._dataView,g=this._pos;f=f.getUint32(g,!0)+4294967296*f.getInt32(g+4,!0);this._skip(8);return f};a.prototype.getDouble=function(){var f=this._dataView.getFloat64(this._pos,!0);this._skip(8);return f};a.prototype.getFixed32=function(){var f=this._dataView.getUint32(this._pos,!0);this._skip(4);return f};a.prototype.getSFixed32=function(){var f=this._dataView.getInt32(this._pos,!0);this._skip(4);return f};a.prototype.getFloat=
function(){var f=this._dataView.getFloat32(this._pos,!0);this._skip(4);return f};a.prototype.getString=function(){var f=this._getLength(),g=this._pos;g=this._toString(this._data,g,g+f);this._skip(f);return g};a.prototype.getBytes=function(){var f=this._getLength(),g=this._pos;g=this._toBytes(this._data,g,g+f);this._skip(f);return g};a.prototype.getMessage=function(){var f=this._getLength(),g=this._pos;g=new a(this._data,this._dataView,g,g+f);this._skip(f);return g};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();
break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(f){if(this._pos+f>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=f};a.prototype._decodeVarint=function(){var f=this._data,g=this._pos,p=0;if(10<=this._end-g){var n=f[g++];p|=n&127;if(0!==(n&128)&&(n=f[g++],p|=(n&127)<<7,0!==(n&128)&&(n=f[g++],p|=(n&127)<<14,0!==(n&128)&&(n=f[g++],p|=(n&127)<<21,0!==
(n&128)&&(n=f[g++],p+=268435456*(n&127),0!==(n&128)&&(n=f[g++],p+=34359738368*(n&127),0!==(n&128)&&(n=f[g++],p+=4398046511104*(n&127),0!==(n&128)&&(n=f[g++],p+=562949953421312*(n&127),0!==(n&128)&&(n=f[g++],p+=72057594037927936*(n&127),0!==(n&128)&&(n=f[g++],p+=0x7fffffffffffffff*(n&127),0!==(n&128)))))))))))throw Error("Varint too long!");}else{for(var d=1;g!==this._end;){n=f[g];if(0===(n&128))break;++g;p+=(n&127)*d;d*=128}if(g===this._end)throw Error("Varint overrun!");++g;p+=n*d}this._pos=g;return p};
a.prototype._decodeSVarint=function(){var f=this._decodeVarint();return f%2?-(f+1)/2:f/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(f,g,p){var n="",d="";for(p=Math.min(this._end,p);g<p;++g){var e=f[g];e&128?d+="%"+e.toString(16):(n+=decodeURIComponent(d)+String.fromCharCode(e),d="")}d.length&&(n+=decodeURIComponent(d));return n};a.prototype._toBytes=function(f,g,p){p=Math.min(this._end,
p);return new Uint8Array(f.buffer,g,p-g)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(D,k,a,f,g,p){return function(){function n(d,e,l){void 0===l&&(l=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=
1;this._pageWidth=d;this._pageHeight=e;0<l&&(this._maxItemSize=l);this.pixelRatio=window.devicePixelRatio|1;this._binPack=new g(this._pageWidth,this._pageHeight);this._mosaicsData[0]=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}n.prototype.getWidth=function(d){return d>=this._size.length?-1:this._size[d][0]};n.prototype.getHeight=function(d){return d>=this._size.length?
-1:this._size[d][1]};n.prototype.getPage=function(d){return d<this._textures.length?this._textures[d]:null};n.prototype.has=function(d){return this._mosaicRects.has(d)};Object.defineProperty(n.prototype,"itemCount",{get:function(){return this._mosaicRects.size},enumerable:!0,configurable:!0});n.prototype.getSpriteItem=function(d){return this._mosaicRects.get(d)};n.prototype.addSpriteItem=function(d,e,l,h,t,r){if(this._mosaicRects.has(d))return this._mosaicRects.get(d);var q=this._allocateImage(e[0],
e[1]),v=q[0],x=q[1];q=q[2];if(0>=v.width||0>=v.height)return null;l={rect:v,width:e[0],height:e[1],anchorX:l[0],anchorY:l[1],sdf:r,pixelRatio:1,page:x};this._mosaicRects.set(d,l);this._copy({rect:v,spriteSize:e,spriteData:h,page:x,pageSize:q,repeat:t,sdf:r});return l};n.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};n.prototype.processNextItem=function(){var d=this._spriteCopyQueue.pop();d&&this._copy(d)};n.prototype.getSpriteItems=function(d){for(var e={},l=0;l<d.length;l++){var h=
d[l];e[h]=this.getSpriteItem(h)}return e};n.prototype.getMosaicItemPosition=function(d,e){var l=this.getSpriteItem(d),h=l&&l.rect;if(!h)return null;h.width=l.width;h.height=l.height;return{size:[l.width,l.height],tl:[(h.x+1)/this._size[l.page][0],(h.y+1)/this._size[l.page][1]],br:[(h.x+1+l.width)/this._size[l.page][0],(h.y+1+l.height)/this._size[l.page][1]],page:l.page}};n.prototype.bind=function(d,e,l,h){void 0===l&&(l=0);void 0===h&&(h=0);this._textures[l]||(this._textures[l]=new p(d,{pixelFormat:6408,
dataType:5121,width:this._size[l][0],height:this._size[l][1]},new Uint8Array(this._mosaicsData[l].buffer)));var t=this._textures[l];t.setSamplingMode(e);this._dirties[l]&&(t.setData(new Uint8Array(this._mosaicsData[l].buffer)),t.generateMipmap());d.bindTexture(t,h);this._dirties[l]=!1};n._copyBits=function(d,e,l,h,t,r,q,v,x,y,B){var z=h*e+l;q=v*r+q;if(B)for(q-=r,B=-1;B<=y;B++,z=((B+y)%y+h)*e+l,q+=r)for(v=-1;v<=x;v++)t[q+v]=d[z+(v+x)%x];else for(B=0;B<y;B++){for(v=0;v<x;v++)t[q+v]=d[z+v];z+=e;q+=r}};
n.prototype._copy=function(d){d.page>=this._mosaicsData.length||(n._copyBits(d.spriteData,d.spriteSize[0],0,0,this._mosaicsData[d.page],d.pageSize[0],d.rect.x+1,d.rect.y+1,d.spriteSize[0],d.spriteSize[1],d.repeat),this._dirties[d.page]=!0)};n.prototype._allocateImage=function(d,e){d+=2;e+=2;var l=Math.max(d,e);if(this._maxItemSize&&this._maxItemSize<l){l=Math.pow(2,Math.ceil(a.log2(d)));var h=Math.pow(2,Math.ceil(a.log2(e))),t=new f(0,0,d,e);this._mosaicsData.push(new Uint32Array(l*h));this._dirties.push(!0);
this._size.push([l,h]);this._textures.push(void 0);return[t,this._mosaicsData.length-1,[l,h]]}l=this._binPack.allocate(d+(d%4?4-d%4:0),e+(e%4?4-e%4:0));return 0>=l.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new g(this._pageWidth,
this._pageHeight),this._allocateImage(d,e)):[l,this._currentPage,[this._pageWidth,this._pageHeight]]};n.prototype.dispose=function(){this._binPack=null;for(var d=0,e=this._textures;d<e.length;d++){var l=e[d];l&&l.dispose()}this._textures.length=0;this._mosaicsData.length=0;this._mosaicRects.clear()};return n}()})},"esri/layers/vectorTiles/views/3d/support/imageUtils":function(){define(["require","exports","../../../request"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.dataURItoBlob=
function(f){var g=atob(f.split(",")[1]);f=f.split(",")[0].split(":")[1].split(";")[0];for(var p=new ArrayBuffer(g.length),n=new Uint8Array(p),d=0;d<g.length;d++)n[d]=g.charCodeAt(d);return new Blob([p],{type:f})};k.requestImage=function(f){return a(f,{responseType:"image",allowImageDataAccess:!0}).then(function(g){return g.data})}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFConverter":function(){define(["require","exports","../../../../core/promiseUtils","../../../../core/promiseUtils","./packingUtils"],
function(D,k,a,f,g){Object.defineProperty(k,"__esModule",{value:!0});D=function(){function p(n){this.size=n;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=n;this.context=this.canvas.getContext("2d");this._gridOuter=new Float64Array(n*n);this._gridInner=new Float64Array(n*n);this._f=new Float64Array(n);this._d=new Float64Array(n);this._z=new Float64Array(n+1);this._v=new Int16Array(n);n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("style",
"position: absolute;");n.setAttribute("width","0");n.setAttribute("height","0");document.body.appendChild(n);this._svg=n}p.prototype.draw=function(n,d,e){var l=this;void 0===e&&(e=31);var h=this._createSVGString(n);return a.create(function(t,r){var q=new Image;q.src="data:image/svg+xml; charset\x3dutf8, "+encodeURIComponent(h);q.onload=function(){l.context.clearRect(0,0,l.size,l.size);l.context.drawImage(q,0,0,l.size,l.size);for(var x=l.context.getImageData(0,0,l.size,l.size),y=new Uint8Array(l.size*
l.size*4),B=0;B<l.size*l.size;B++){var z=x.data[4*B+3]/255;l._gridOuter[B]=1===z?0:0===z?1E20:Math.pow(Math.max(0,.5-z),2);l._gridInner[B]=1===z?1E20:0===z?0:Math.pow(Math.max(0,z-.5),2)}l._edt(l._gridOuter,l.size,l.size);l._edt(l._gridInner,l.size,l.size);for(B=0;B<l.size*l.size;B++)g.packFloatRGBA(.5-(l._gridOuter[B]-l._gridInner[B])/(2*e),y,4*B);t(y)};var v=d&&d.signal;if(v)f.onAbort(v,function(){return r(f.createAbortError())})})};p.prototype._createSVGString=function(n){var d=document.createElementNS("http://www.w3.org/2000/svg",
"path");d.setAttribute("d",n);this._svg.appendChild(d);n=d.getBBox();var e=n.width/n.height,l=this.size/2,h;if(1<e){var t=h=l/n.width;var r=this.size/4;e=l-1/e*l/2}else h=t=l/n.height,r=l-l*e/2,e=this.size/4;d.setAttribute("style","transform: matrix("+h+", 0, 0, "+t+", "+(-n.x*h+r)+", "+(-n.y*t+e)+")");n='\x3csvg style\x3d"fill:red;" height\x3d"'+this.size+'" width\x3d"'+this.size+'" xmlns\x3d"http://www.w3.org/2000/svg"\x3e'+this._svg.innerHTML+"\x3c/svg\x3e";this._svg.removeChild(d);return n};p.prototype._edt=
function(n,d,e){for(var l=this._f,h=this._d,t=this._v,r=this._z,q=0;q<d;q++){for(var v=0;v<e;v++)l[v]=n[v*d+q];this._edt1d(l,h,t,r,e);for(v=0;v<e;v++)n[v*d+q]=h[v]}for(v=0;v<e;v++){for(q=0;q<d;q++)l[q]=n[v*d+q];this._edt1d(l,h,t,r,d);for(q=0;q<d;q++)n[v*d+q]=Math.sqrt(h[q])}};p.prototype._edt1d=function(n,d,e,l,h){e[0]=0;l[0]=-1E20;l[1]=1E20;for(var t=1,r=0;t<h;t++){for(var q=(n[t]+t*t-(n[e[r]]+e[r]*e[r]))/(2*t-2*e[r]);q<=l[r];)r--,q=(n[t]+t*t-(n[e[r]]+e[r]*e[r]))/(2*t-2*e[r]);r++;e[r]=t;l[r]=q;l[r+
1]=1E20}for(r=t=0;t<h;t++){for(;l[r+1]<t;)r++;d[t]=(t-e[r])*(t-e[r])+n[e[r]]}};return p}();k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/packingUtils":function(){define(["require","exports"],function(D,k){function a(n){return n-Math.floor(n)}Object.defineProperty(k,"__esModule",{value:!0});var f=[1,256,65536,16777216],g=[1/256,1/65536,1/16777216,1/4294967296],p=function(n,d){void 0===d&&(d=0);for(var e=0,l=0;4>l;l++)e+=n[d+l]*g[l];return e}(new Uint8ClampedArray([255,255,255,255]));
k.packFloatRGBA=function(n,d,e){void 0===e&&(e=0);n=0>n?0:n>p?p:n;for(var l=0;4>l;l++)d[e+l]=Math.floor(256*a(n*f[l]))}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLRendererInfo":function(){define("require exports ../../../../core/screenUtils ../../../../geometry/support/scaleUtils ../../../../renderers/support/utils ./color ./Utils".split(" "),function(D,k,a,f,g,p,n){function d(e,l){var h=l.length;if(e<l[0].value||1===h)return l[0].size;for(var t=1;t<h;t++)if(e<l[t].value)return l[t-1].size+
(e-l[t-1].value)/(l[t].value-l[t-1].value)*(l[t].size-l[t-1].size);return l[h-1].size}return function(){function e(){this.symbolLevels=[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this.vvSizeFieldStopsValues=new Float32Array(6);this.vvSizeFieldStopsSizes=new Float32Array(6);this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,
vvRotationType:"geographic",vvOpacityEnabled:!1};this.symbolLevels.push(0)}Object.defineProperty(e.prototype,"vvMaterialParameters",{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"heatmapParameters",{get:function(){return this._heatmapParameters},enumerable:!0,configurable:!0});e.prototype.updateHeatmapParameters=function(l){var h=l.blurRadius,t=Math.round(4.5*l.blurRadius),r=2*t+1;this._heatmapParameters||(this._heatmapParameters=
{radius:h,blurRadius:t,kernelSize:r,refreshIntensityKernel:!0,intensityKernel:null,color:null,maxPixelIntensity:l.maxPixelIntensity,minPixelIntensity:l.minPixelIntensity});for(var q=this._heatmapParameters,v=l.colorStops,x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B,z=0;16>z;z++){var b=v[Math.min(z,v.length-1)];x[z]=b.ratio;B=4*z;y[B+0]=b.color[0]/255;y[B+1]=b.color[1]/255;y[B+
2]=b.color[2]/255;y[B+3]=1<b.color[3]?b.color[3]/255:b.color[3];p.premultiplyAlpha(y,B,!0)}q.color={values:x,colors:y,refreshColorRamp:!0};1E-6<Math.abs(q.radius-l.radius)&&(q.radius=h,q.blurRadius=t,q.kernelSize=r,q.refreshIntensityKernel=!0);q.maxPixelIntensity=l.maxPixelIntensity;q.minPixelIntensity=l.minPixelIntensity};e.prototype.updateVisualVariables=function(l,h){var t=this._vvMaterialParameters;t.vvOpacityEnabled=!1;t.vvSizeEnabled=!1;t.vvColorEnabled=!1;t.vvRotationEnabled=!1;if(l){var r=
l.size;if(r){t.vvSizeEnabled=!0;if(r.minMaxValue){var q=r.minMaxValue,v=void 0,x=void 0;n.isDefined(q.minSize)&&n.isDefined(q.maxSize)&&(n.isNumber(q.minSize)&&n.isNumber(q.maxSize)?(v=a.pt2px(q.minSize),x=a.pt2px(q.maxSize)):(x=h.scale,v=a.pt2px(d(x,q.minSize.stops)),x=a.pt2px(d(x,q.maxSize.stops))));this.vvSizeMinMaxValue.set([q.minDataValue,q.maxDataValue,v,x])}r.scaleStops&&(this.vvSizeScaleStopsValue=a.pt2px(d(h.scale,r.scaleStops.stops)));r.unitValue&&(this.vvSizeUnitValueToPixelsRatio=f.getMetersPerUnitForSR(h.spatialReference)/
g.meterIn[r.unitValue.unit]/h.resolution);r.fieldStops&&(this.vvSizeFieldStopsValues.set(r.fieldStops.values),this.vvSizeFieldStopsSizes.set(r.fieldStops.sizes))}if(r=l.color)t.vvColorEnabled=!0,this.vvColorValues.set(r.values),this.vvColors.set(r.colors);if(r=l.opacity)t.vvOpacityEnabled=!0,this.vvOpacityValues.set(r.values),this.vvOpacities.set(r.opacities);if(r=l.rotation)t.vvRotationEnabled=!0,t.vvRotationType=r.type}};return e}()})},"esri/layers/vectorTiles/geometry/support/scaleUtils":function(){define(["require",
"exports","../../config","../../core/kebabDictionary","./WKIDUnitConversion"],function(D,k,a,f,g){function p(q){return r.fromJSON(q.toLowerCase())||null}function n(q){return d(q)||k.decDegToMeters}function d(q){if(q)if("object"===typeof q){var v=q.wkid;var x=q.wkt}else"number"===typeof q?v=q:"string"===typeof q&&(x=q);if(v)var y=t.values[t[v]];else x&&-1!==x.search(/^PROJCS/i)&&(q=h.exec(x))&&q[1]&&(y=parseFloat(q[1].split(",")[1]));return y}function e(q){if(q)if("object"===typeof q){var v=q.wkid;
var x=q.wkt}else"number"===typeof q?v=q:"string"===typeof q&&(x=q);if(v)var y=t.units[t[v]];else x&&-1!==x.search(/^PROJCS/i)&&(q=h.exec(x))&&q[1]&&(y=(q=/[\\"\\']{1}([^\\"\\']+)/.exec(q[1]))&&q[1]);return y?p(y):null}function l(q,v){var x=n(v);return q/(x*k.inchesPerMeter*a.screenDPI)}Object.defineProperty(k,"__esModule",{value:!0});k.inchesPerMeter=39.37;k.decDegToMeters=20015077/180;var h=/UNIT\[([^\]]+)\]\]$/i,t=g,r=f({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",
link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"},{ignoreUnknown:!0});k.unitFromRESTJSON=p;k.unitToRESTJSON=function(q){return r.toJSON(q)||null};k.getMetersPerVerticalUnitForSR=function(q){q=
n(q);return 1E5<q?1:q};k.getVerticalUnitStringForSR=function(q){return 1E5<n(q)?"meters":e(q)};k.getMetersPerUnitForSR=n;k.getMetersPerUnit=d;k.getUnitString=e;k.getScale=function(q,v){var x=v||q.extent,y=q.width,B=d(x&&x.spatialReference);return x&&y?x.width/y*(B||k.decDegToMeters)*k.inchesPerMeter*a.screenDPI:0};k.getResolutionForScale=l;k.getExtentForScale=function(q,v){var x=q.extent,y=q.width,B=l(v,x.spatialReference);return x.clone().expand(B*y/x.width)}})},"esri/layers/vectorTiles/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../renderers ../../../../../core/executeAsync ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/SetPool ../../../../../renderers/support/jsonUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/mesh/factories/WGLMeshFactory".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h){function t(q,v){l.isMarkerSymbol(q)||l.isLineSymbol(q)?v.add(q):l.isFillSymbol(q)&&(v.add(q),q.outline&&"none"!==q.outline.style&&v.add(q.outline))}function r(q,v){v.has(q)||v.set(q,new Set);for(var x=q.text,y=v.get(q),B=x.length,z=0;z<B;z++){var b=x.charCodeAt(z);y.add(b)}}Object.defineProperty(k,"__esModule",{value:!0});D=function(){function q(v){this.type="symbol";this._symbolToMosaicItemMap=new Map;this._symbolToMosaicItemMap.clear();this.configuration=v.configuration;
this.service=v.service;this.spatialReference=v.spatialReference;this.tileRenderer=v.tileRenderer}q.prototype.destroy=function(){this._symbolToMosaicItemMap.clear()};q.prototype.getMeshData=function(v,x){return x&&x.features&&0!==x.features.length?this._processFeatures(v,x.features).then(function(y){return{tileKey:v.id,data:y}}):p.resolve({tileKey:v.id,data:null})};q.prototype.setConfiguration=function(v){this.configuration=v;this.factory=this.renderer=this.rendererInfo=null};q.prototype.getFactory=
function(){this.factory||(this.factory=this._createFactory());return this.factory};q.prototype.getRenderer=function(){this.renderer||(this.renderer=this._createRenderer());return this.renderer};q.prototype.getRendererInfo=function(){this.rendererInfo||(this.rendererInfo=this._createRendererInfo());return this.rendererInfo};q.prototype._createFactory=function(){if(!this.configuration)return null;var v={fields:this.service.fields,typeIdField:this.service.typeIdField,types:this.service.types};return h["default"].from(this.getRenderer(),
v,this._symbolToMosaicItemMap,this.service.geometryType,this.service.objectIdField,this.spatialReference,this.configuration.devicePixelRatio)};q.prototype._createRenderer=function(){return this.configuration?d.fromJSON(this.configuration.renderer):null};q.prototype._createRendererInfo=function(){return this.configuration?e.createRendererInfo(d.fromJSON(this.configuration.renderer),this.spatialReference,{fields:this.service.fields}):null};q.prototype._processFeatures=function(v,x){var y=this;return x&&
x.length?this._getMosaicItems(x).then(function(){return y._writeFeatures(v,x)}):p.resolve(null)};q.prototype._writeFeatures=function(v,x){var y=this,B=0,z=this.getFactory(),b=z.createMeshData(x.length),c={viewingMode:"",scale:v.scale};return f(function(){var m=x[B++],u=B===x.length;z.write(b,m,c);return u}).then(function(){return y._encodeDisplayData(b)})};q.prototype._encodeDisplayData=function(v){var x={};v.encode(x,[]);return x};q.prototype._getReturnCentroid=function(v){function x(y){if(!y)return!1;
y=y.type;return"simple-marker"===y||"picture-marker"===y||"text"===y}if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(v.type){case "simple":return x(v.symbol);case "unique-value":return x(v.defaultSymbol)||v.uniqueValueInfos.some(function(y){return x(y.symbol)});case "class-breaks":return x(v.defaultSymbol)||v.classBreakInfos.some(function(y){return x(y.symbol)});default:return!0}};q.prototype._getMosaicItems=function(v){v=n.acquire();for(var x=g.acquire(),y=this.getRenderer(),
B=0,z=y.getSymbols();B<z.length;B++){var b=z[B];l.isTextSymbol(b)?r(b,x):t(b,v)}(y instanceof a.UniqueValueRenderer||y instanceof a.ClassBreaksRenderer)&&(y=y.backgroundFillSymbol)&&t(y,v);var c=this._symbolToMosaicItemMap,m=g.acquire(),u=[],w=0;v.forEach(function(A){c.has(A.id)||(m.set(w,A),u.push({symbol:A.toJSON(),id:w}),w++)});x.forEach(function(A,C){if(c.has(C.id)){var E=c.get(C.id).glyphMosaicItems,G=[];A.forEach(function(I){if(E&&E.length<I||!E[I])G[I]=I});0<G.length&&(m.set(w,C),u.push({symbol:C.toJSON(),
id:w,glyphIds:G}),w++)}else{m.set(w,C);var F=[];A.forEach(function(I){return F.push(I)});u.push({symbol:C.toJSON(),id:w,glyphIds:F});w++}});if(0<u.length)return this.tileRenderer.getMaterialItems(u).then(function(A){for(var C=0;C<A.length;C++){var E=A[C],G=m.get(E.id);if(G)if(l.isTextSymbol(G))if(c.has(G.id)){if(G=c.get(G.id).glyphMosaicItems,E=E.mosaicItem.glyphMosaicItems)for(var F=0;F<E.length;F++)null!=E[F]&&(G[F]=E[F])}else c.set(G.id,E.mosaicItem);else c.set(G.id,E.mosaicItem)}g.release(m)});
n.release(v);g.release(x);return p.resolve()};return q}();k.SymbolProcessor=D})},"esri/layers/vectorTiles/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(D,k,a,f,g,p,n,d){Object.defineProperty(k,"__esModule",{value:!0});k.ClassBreaksRenderer=a;k.HeatmapRenderer=f;k.BaseRenderer=g;k.SimpleRenderer=p;k.UniqueValueRenderer=
n;k.isRenderer=function(e){return e instanceof k.BaseRenderer};k.fromJSON=d.fromJSON})},"esri/layers/vectorTiles/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),function(D,k,a,f,g,p,n,
d,e,l,h,t,r,q){var v=g.getLogger("esri.renderers.ClassBreaksRenderer");r=r.LegendOptions;q=q.ClassBreakInfo;var x=a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),y=p.ensureType(q),B=D(t,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:d,key:"type",typeMap:{"simple-fill":h.types.typeMap["simple-fill"],"picture-fill":h.types.typeMap["picture-fill"],"polygon-3d":h.types.typeMap["polygon-3d"]}},
value:null,json:{origins:{"web-scene":{read:l.read,write:{target:{backgroundFillSymbol:{type:e}},writer:l.writeTarget}}},read:l.read,write:l.writeTarget}},classBreakInfos:{type:[q],json:{read:function(z,b,c){if(Array.isArray(z)){var m=b.minValue;return z.map(function(u){var w=new q;w.read(u,c);null==w.minValue&&(w.minValue=m);null==w.maxValue&&(w.maxValue=w.minValue);m=w.maxValue;return w})}},write:function(z,b,c,m){z=z.map(function(u){return u.write({},m)});this._areClassBreaksConsecutive()&&z.forEach(function(u){delete u.classMinValue});
b[c]=z}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:h.rendererTypes,value:null,json:{origins:{"web-scene":{read:l.read,write:{target:{defaultSymbol:{types:h.rendererTypes3D}},
writer:l.writeTarget}}},read:l.read,write:l.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return n.createFunction(this.valueExpression)}},legendOptions:{type:r,value:null,json:{write:!0}},field:{value:null,cast:function(z){return null==z?z:"function"===typeof z?z:p.ensureString(z)},json:{type:String,write:function(z,b,c,m){"string"===typeof z?b[c]=z:m&&
m.messages?m.messages.push(new f("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):v.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:String,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var z=this._get("normalizationType"),b=!!this.normalizationField,
c=null!=this.normalizationTotal;if(b||c)z=b&&"field"||c&&"percent-of-total";else if("field"===z||"percent-of-total"===z)z=null;return z},json:{read:x.fromJSON,write:function(z,b){var c=x.toJSON(z);c&&(b.normalizationType=c)}}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{value:"class-breaks",json:{write:function(z,b){b.type="classBreaks"}}}},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(z,b,c){z="number"===typeof z?new q({minValue:z,
maxValue:b,symbol:c}):y(k.clone(z));this.classBreakInfos.push(z);1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(z,b){var c,m=this.classBreakInfos.length;for(c=0;c<m;c++){var u=[this.classBreakInfos[c].minValue,this.classBreakInfos[c].maxValue];if(u[0]==z&&u[1]==b){this.classBreakInfos.splice(c,1);break}}},getBreakIndex:function(z,b){var c=this.field,m=z.attributes,u=this.classBreakInfos.length,w=this.isMaxInclusive;if(this.valueExpression)c=n.executeFunction(this.compiledFunc,
n.createExecContext(z,n.getViewInfo(b)));else if("function"===typeof c)c=c(z);else{c=parseFloat(m[c]);var A=this.normalizationType;if(A){var C=parseFloat(this.normalizationTotal);m=parseFloat(m[this.normalizationField]);if("log"===A)c=Math.log(c)*Math.LOG10E;else if("percent-of-total"===A&&!isNaN(C))c=c/C*100;else if("field"===A&&!isNaN(m)){if(isNaN(c)||isNaN(m))return-1;c/=m}}}if(null!=c&&!isNaN(c)&&"number"===typeof c)for(m=0;m<u;m++)if(A=[this.classBreakInfos[m].minValue,this.classBreakInfos[m].maxValue],
A[0]<=c&&(w?c<=A[1]:c<A[1]))return m;return-1},getClassBreakInfo:function(z,b){var c=this.getBreakIndex(z,b);return-1!==c?this.classBreakInfos[c]:null},getSymbol:function(z,b){var c=this.getBreakIndex(z,b);return-1<c?this.classBreakInfos[c].symbol:this.defaultSymbol},getSymbols:function(){var z=[];this.classBreakInfos.forEach(function(b){b.symbol&&z.push(b.symbol)});this.defaultSymbol&&z.push(this.defaultSymbol);return z},clone:function(){return new B({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&
this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:k.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:k.clone(this.visualVariables),legendOptions:k.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(z){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&(z[b]=!0)});this.valueExpression&&n.extractFieldNames(this.valueExpression).forEach(function(b){z[b]=!0})},_areClassBreaksConsecutive:function(){for(var z=this.classBreakInfos,b=1;b<z.length;b++)if(z[b-1].maxValue!==z[b].minValue)return!1;return!0}});return B})},"esri/layers/vectorTiles/symbols/PolygonSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/Symbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z){function b(u,w,A){w=u?m[u.type]||null:null;if(w)return w=new w,w.read(u,A),w;A&&A.messages&&u&&A.messages.push(new f("symbol:unsupported","Symbols of type '"+(u.type||"unknown")+"' are not supported",{definition:u,context:A}));return null}function c(u,w,A){if(!u)return null;if(!A||"web-scene"!==A.origin||u.isInstanceOf(v)||u.isInstanceOf(y))return u.write(w,A);var C=z.to3D(u);if(C.symbol)return C.symbol.write(w,A);A.messages&&A.messages.push(new a("symbol:unsupported",
"Symbols of type '"+u.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:u,context:A,error:C.error}));return null}Object.defineProperty(k,"__esModule",{value:!0});var m={esriSMS:q,esriPMS:e,esriTS:x,esriSLS:r,esriSFS:t,esriPFS:d,PointSymbol3D:l,LineSymbol3D:p,PolygonSymbol3D:h,MeshSymbol3D:n,LabelSymbol3D:g,styleSymbolReference:y};k.read=b;k.writeTarget=function(u,w,A,C){(u=c(u,{},C))&&(w[A]=u)};k.write=c;k.fromJSON=function(u,
w){return b(u,null,w)};k.readCallout3D=function(u,w){if(!u||!u.type)return null;var A=null;switch(u.type){case "line":A=new B}A&&A.read(u,w);return A}})},"esri/layers/vectorTiles/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(D,k,a,f,g){D=function(p){function n(d,e,l){var h=p.call(this,d,e,l)||this;return h instanceof n?h:new n(d,e,l)}a(n,p);return n}(g);D.prototype.type="warning";return D})},"esri/layers/vectorTiles/symbols/LabelSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/LineSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/MeshSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/PictureFillSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./FillSymbol","./support/urlUtils"],function(D,k,a,f,g){var p={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},n=D(f,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",
url:g.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:a.toPt,json:{write:!0}},height:{value:12,cast:a.toPt,json:{write:!0}},xoffset:{value:0,cast:a.toPt,json:{write:!0}},yoffset:{value:0,cast:a.toPt,json:{write:!0}},source:g.sourcePropertyDefinition},getDefaults:function(){return k.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(d,e,l,h){if(d&&"string"!==typeof d&&null==d.imageData)return d;var t={};d&&(t.url=d);e&&(t.outline=
e);null!=l&&(t.width=a.toPt(l));null!=h&&(t.height=a.toPt(h));return t},clone:function(){var d=new n({color:k.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});d._set("source",k.clone(this.source));return d}});n.defaultProps=p;return n})},"esri/layers/vectorTiles/symbols/FillSymbol":function(){define(["./Symbol","./SimpleLineSymbol"],function(D,k){return D.createSubclass({declaredClass:"esri.symbols.FillSymbol",
properties:{outline:{type:k,json:{read:{"default":null},write:!0}},type:null}})})},"esri/layers/vectorTiles/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(D,k,a){function f(d,e,l){return e.imageData?a.makeData({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):g(e.url,l)}function g(d,e){return!e||"service"!==e.origin&&"portal-item"!==e.origin||!e.layer||"feature"!==e.layer.type&&"stream"!==e.layer.type||a.isAbsolute(d)||!e.layer.parsedUrl?
a.read(d,e):a.join(e.layer.parsedUrl.path,"images",d)}function p(d,e,l,h){a.isDataProtocol(d)?(d=a.dataComponents(d),e.contentType=d.mediaType,e.imageData=d.data,l&&l.imageData===e.imageData&&l.url&&(e.url=n(l.url,h))):e.url=n(d,h)}function n(d,e){return a.write(d,e)}Object.defineProperty(k,"__esModule",{value:!0});k.readImageDataOrUrl=f;k.read=g;k.writeImageDataAndUrl=p;k.write=n;k.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:f},write:{writer:function(d,e,l,h){p(d,e,this.source,
h)}}}};k.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(d,e,l){d={};e.imageData&&(d.imageData=e.imageData);e.contentType&&(d.contentType=e.contentType);e.url&&(d.url=g(e.url,l));return d}}}}})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(D,k,a,f){function g(b){return a.normalize(b)}function p(b){return"data:"===b.slice(0,5)}function n(b){return d(b)||B.test(b)}function d(b){return b&&
"/"===b[0]&&"/"===b[1]}function e(b){return a.urlToObject(b)}function l(b){if("string"===typeof b)return new f(t(b));b.scheme||(b.scheme=k.appUrl.scheme);return b}function h(b){if(p(b))return null;var c=b.indexOf("://");if(-1===c&&d(b))c=2;else if(-1!==c)c+=3;else return null;c=b.indexOf("/",c);return-1===c?b:b.slice(0,c)}function t(b,c,m){void 0===c&&(c=k.appBaseUrl);if(d(b))return m&&m.preserveProtocolRelative?b:"http"===k.appUrl.scheme&&k.appUrl.authority===h(b).slice(2)?"http:"+b:"https:"+b;if(B.test(b))return b;
"/"===b[0]&&(m=c.indexOf("//"),m=c.indexOf("/",m+2),c=-1===m?c:c.slice(0,m));return q(c,b)}function r(b,c,m){void 0===m&&(m=!1);b=l(b);c=l(c);return m||b.scheme===c.scheme?b.host.toLowerCase()===c.host.toLowerCase()&&b.port===c.port:!1}function q(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if(b&&b.length){c=[];if(n(b[0])){var m=b[0],u=m.indexOf("//");c.push(m.slice(0,u+1));y.test(b[0])&&(c[0]+="/");b[0]=m.slice(u+2)}else"/"===b[0][0]&&c.push("");b=b.reduce(function(w,A){return A?w.concat(A.split("/")):
w},[]);for(m=0;m<b.length;m++)u=b[m],".."===u&&0<c.length?c.pop():!u||"."===u&&0!==c.length||c.push(u);return c.join("/")}}function v(b,c,m){if(!(c&&m&&b&&n(b)))return b;var u=b.indexOf("//"),w=b.indexOf("/",u+2),A=b.indexOf(":",u+2);w=Math.min(0>w?b.length:w,0>A?b.length:A);if(b.slice(u+2,w).toLowerCase()!==c.toLowerCase())return b;c=b.slice(0,u+2);b=b.slice(w);return""+c+m+b}function x(b,c,m){void 0===c&&(c=k.appBaseUrl);if(!n(b))return b;var u=g(b),w=u.toLowerCase();c=g(c).toLowerCase().replace(/\/+$/,
"");if((m=m?g(m).toLowerCase().replace(/\/+$/,""):null)&&0!==c.indexOf(m))return b;for(var A=function(G,F,I){I=G.indexOf(F,I);return-1===I?G.length:I},C=A(w,"/",w.indexOf("//")+2),E=-1;w.slice(0,C+1)===c.slice(0,C)+"/";){E=C+1;if(C===w.length)break;C=A(w,"/",C+1)}if(-1===E||m&&E<m.length)return b;b=u.slice(E);u=c.slice(E-1).replace(/[^/]+/g,"").length;if(0<u)for(w=0;w<u;w++)b="../"+b;else b="./"+b;return b}Object.defineProperty(k,"__esModule",{value:!0});k.normalize=g;k.canUseXhr=function(b){return a.canUseXhr(b)};
k.removeTrailingSlash=function(b){return b.replace(/\/+$/,"")};D=Function("return this")();k.appUrl=new f(D.location);k.appBaseUrl=function(){var b=k.appUrl.path;b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return k.appUrl.scheme+"://"+k.appUrl.host+(null!=k.appUrl.port?":"+k.appUrl.port:"")+b}();var y=/^\s*file:/i,B=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;k.isDataProtocol=p;k.isAbsolute=n;k.isProtocolRelative=d;k.urlToObject=e;k.getOrigin=h;k.makeAbsolute=t;k.hasSameOrigin=r;k.join=
q;k.removeFile=function(b){var c=0;if(n(b)){var m=b.indexOf("//");-1!==m&&(c=m+2)}m=b.lastIndexOf("/");return m<c?b:b.slice(0,m+1)};k.addProxy=function(b){return a.addProxy(b)};k.makeData=function(b){return b.isBase64?"data:"+b.mediaType+";base64,"+b.data:"data:"+b.mediaType+","+b.data};var z=/^data:(.*?)(;base64)?,(.*)$/;k.dataComponents=function(b){return(b=b.match(z))?{mediaType:b[1],isBase64:!!b[2],data:b[3]}:null};k.changeDomain=v;k.read=function(b,c){var m=c&&c.url&&c.url.path;b&&m&&(b=t(b,
m,{preserveProtocolRelative:!0}));m=b;var u=c&&c.portal;if(u&&!u.isPortal&&u.urlKey&&u.customBaseUrl){var w=u.urlKey+"."+u.customBaseUrl;m=r(k.appUrl,k.appUrl.scheme+"://"+w)?v(m,u.portalHostname,w):v(m,w,u.portalHostname)}return m};k.write=function(b,c){if(!b)return b;!n(b)&&c&&c.blockedRelativeUrls&&c.blockedRelativeUrls.push(b);var m=t(b);if(c){var u=c.verifyItemRelativeUrls&&c.verifyItemRelativeUrls.rootPath||c.url&&c.url.path;u&&(m=x(m,u,u),m!==b&&c.verifyItemRelativeUrls&&c.verifyItemRelativeUrls.writtenUrls.push(m))}m=
(u=c&&c.portal)&&!u.isPortal&&u.urlKey&&u.customBaseUrl?v(m,u.urlKey+"."+u.customBaseUrl,u.portalHostname):m;return m};k.makeRelative=x;k.removeQueryParameters=function(b){b=e(b);Object.keys(b.query||{});return b.path}})},"esri/layers/vectorTiles/symbols/PictureMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./support/urlUtils"],function(D,k,a,f,g){var p={width:12,height:12,angle:0,xoffset:0,yoffset:0},n=D(f,{declaredClass:"esri.symbols.PictureMarkerSymbol",
properties:{color:{json:{write:!1}},type:"picture-marker",url:g.urlPropertyDefinition,source:g.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(d,e){return e.size||d}},write:!0},cast:a.toPt},width:{json:{read:{source:["width","size"],reader:function(d,e){return e.size||d}},write:!0},cast:a.toPt},size:{json:{write:!1}}},getDefaults:function(){return k.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(d,e,l){if(d&&"string"!==typeof d&&null==d.imageData)return d;
var h={};d&&(h.url=d);null!=e&&(h.width=a.toPt(e));null!=l&&(h.height=a.toPt(l));return h},clone:function(){var d=new n({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});d._set("source",k.clone(this.source));return d}});n.defaultProps=p;return n})},"esri/layers/vectorTiles/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(D,k,a){return D(a,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,
json:{read:function(f){return f&&-1*f},write:function(f,g){g.angle=f&&-1*f}}},type:{},xoffset:{value:0,cast:k.toPt,json:{write:!0}},yoffset:{value:0,cast:k.toPt,json:{write:!0}},size:{value:9,cast:function(f){return"auto"===f?f:k.toPt(f)},json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/PointSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}
a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/SimpleFillSymbol":function(){define(["../core/declare","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(D,k,a,f){var g={style:"solid",outline:new f,color:[0,0,0,.25]},p=D(a,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(n){return k.valueOf(this._styles,n)||void 0},write:function(n,d){d.style=this._styles[n]}}}},_styles:{solid:"esriSFSSolid",
none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return k.mixin(this.inherited(arguments),g)},normalizeCtorArgs:function(n,d,e){if(n&&"string"!==typeof n)return n;var l={};n&&(l.style=n);d&&(l.outline=d);e&&(l.color=e);return l},clone:function(){return new p({color:k.clone(this.color),outline:this.outline&&
this.outline.clone(),style:this.style})}});k.mixin(p,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});p.defaultProps=g;return p})},"esri/layers/vectorTiles/symbols/SimpleMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./SimpleLineSymbol"],function(D,k,
a,f,g){var p={style:"circle",color:[255,255,255,.25],outline:new g,size:12,angle:0,xoffset:0,yoffset:0},n=D(f,{declaredClass:"esri.symbols.SimpleMarkerSymbol",properties:{color:{json:{write:function(d,e){d&&"x"!==this.style&&"cross"!==this.style&&(e.color=d.toJSON());null===d&&(e.color=null)}}},type:"simple-marker",size:{value:12},style:{type:String,value:"circle",json:{read:function(d){return k.valueOf(this._styles,d)},write:function(d,e){e.style=this._styles[d]}}},path:{type:String,value:null,set:function(d){this.style=
"path";this._set("path",d)},json:{write:!0}},outline:{type:g,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return k.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(d,e,l,h){if(d&&"string"!==typeof d)return d;var t={};d&&(t.style=d);null!=e&&(t.size=a.toPt(e));l&&(t.outline=l);h&&(t.color=h);return t},clone:function(){return new n({angle:this.angle,color:k.clone(this.color),
outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function h(e,l){return this.getInherited(h,arguments).call(this,k.mixin({outline:null},e),l)}});k.mixin(n,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});n.defaultProps=p;return n})},"esri/layers/vectorTiles/symbols/TextSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),
function(D,k,a,f,g,p){var n={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},d=D(g,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:f,json:{write:!0}},borderLineColor:{type:f,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:p,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:f,json:{write:!0}},haloSize:{type:Number,
cast:a.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:a.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:a.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(e){return e&&-1*e},write:function(e,l){l.angle=e&&-1*e}}},width:{json:{write:!0}}},getDefaults:function(){return k.mixin(this.inherited(arguments),n)},
normalizeCtorArgs:function(e,l,h){if(e&&"string"!==typeof e)return e;var t={};e&&(t.text=e);l&&(t.font=l);h&&(t.color=h);return t},clone:function(){return new d({angle:this.angle,backgroundColor:k.clone(this.backgroundColor),borderLineColor:k.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:k.clone(this.color),font:this.font&&this.font.clone(),haloColor:k.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,
rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});k.mixin(d,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});d.defaultProps=n;return d})},"esri/layers/vectorTiles/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/write".split(" "),
function(D,k,a,f,g,p,n,d){return function(e){function l(t){t=e.call(this)||this;t.decoration="none";t.family="sans-serif";t.size=9;t.style="normal";t.weight="normal";return t}a(l,e);var h=l;l.prototype.castSize=function(t){return p.toPt(t)};l.prototype.clone=function(){return new h({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};f([n.property({type:String,json:{write:{overridePolicy:d.disableWriteDefaultPolicy("none")}}})],l.prototype,"decoration",
void 0);f([n.property({type:String,json:{write:!0}})],l.prototype,"family",void 0);f([n.property({type:Number,json:{write:{overridePolicy:function(t,r,q){return{enabled:!q||!q.textSymbol3D}}}}})],l.prototype,"size",void 0);f([n.cast("size")],l.prototype,"castSize",null);f([n.property({type:String,json:{write:{overridePolicy:d.disableWriteDefaultPolicy("normal")}}})],l.prototype,"style",void 0);f([n.property({type:String,json:{write:{overridePolicy:d.disableWriteDefaultPolicy("normal")}}})],l.prototype,
"weight",void 0);return l=h=f([n.subclass("esri.symbols.Font")],l)}(n.declared(g))})},"esri/layers/vectorTiles/symbols/WebStyleSymbol":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/callouts/LineCallout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","./Callout3D"],
function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/callouts/Callout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/JSONSupport"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../FillSymbol3DLayer ../Font ../IconSymbol3DLayer ../LabelSymbol3D ../LineSymbol3D ../LineSymbol3DLayer ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ../TextSymbol3DLayer ../WebStyleSymbol".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b,c){function m(w){var A=w.color?w.color.clone():new a([255,255,255]),C;if(w instanceof r){w.color&&0===w.color.r&&0===w.color.g&&0===w.color.b&&(A=new a([255,255,255]));var E={href:w.url};var G=w.width<=w.height?w.height:w.width}else E=w.style,E=E in u?u[E]:"circle",E={primitive:E},G=w.size,w.outline&&w.outline.color&&0<w.outline.width&&(C={size:w.outline.width,color:w.outline.color.clone()});return new q(new e({size:G,resource:E,material:{color:A},
outline:C}))}Object.defineProperty(k,"__esModule",{value:!0});var u={};u[B.STYLE_CIRCLE]="circle";u[B.STYLE_CROSS]="cross";u[B.STYLE_DIAMOND]="kite";u[B.STYLE_SQUARE]="square";u[B.STYLE_X]="x";k.to3D=function(w,A,C,E){void 0===A&&(A=!1);void 0===C&&(C=!1);void 0===E&&(E=!0);if(!w)return{symbol:null};if(f.isSymbol3D(w)||w instanceof c)E=w.clone();else if(w instanceof y)E=new h(new t({size:w.width||1,material:{color:w.color?w.color.clone():[255,255,255]}}));else if(w instanceof B)E=m(w);else if(w instanceof
r)E=m(w);else if(w instanceof x)E=new n({material:{color:w.color?w.color.clone():[255,255,255]}}),w.outline&&w.outline.color&&(E.outline={size:w.outline.width||0,color:w.outline.color}),E=new v(E);else if(w instanceof z){var G=w.haloColor;var F=w.haloSize;G=G&&0<F?{color:p.clone(G),size:F}:null;F=w.font?w.font.clone():new d;E=new (E?l:q)(new b({size:F.size,font:F,halo:G,material:{color:w.color.clone()},text:w.text}))}else return{error:new g("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+
(w.type||w.declaredClass)+"' is unsupported in 3D",{symbol:w})};A&&(E.id=w.id);if(C&&f.isSymbol3D(E))for(w=0;w<E.symbolLayers.length;++w)E.symbolLayers.getItemAt(w)._ignoreDrivers=!0;return{symbol:E}}})},"esri/layers/vectorTiles/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/support/jsonUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b,c,m,u,w,A,C,E,G){Object.defineProperty(k,"__esModule",{value:!0});k.ExtrudeSymbol3DLayer=a;k.BaseFillSymbol=f;k.FillSymbol3DLayer=g;k.Font=p;k.IconSymbol3DLayer=n;k.LabelSymbol3D=d;k.LineSymbol3D=e;k.LineSymbol3DLayer=l;k.BaseMarkerSymbol=h;k.MeshSymbol3D=t;k.ObjectSymbol3DLayer=r;k.PathSymbol3DLayer=q;k.PictureFillSymbol=v;k.PictureMarkerSymbol=x;k.PointSymbol3D=y;k.PolygonSymbol3D=B;k.SimpleFillSymbol=z;k.SimpleLineSymbol=b;k.SimpleMarkerSymbol=c;
k.BaseSymbol=m;k.BaseSymbol3D=u;k.BaseSymbol3DLayer=w;k.TextSymbol=A;k.TextSymbol3DLayer=C;k.WebStyleSymbol=E;k.fromJSON=G.fromJSON;k.isSymbol=function(F){return F instanceof k.BaseSymbol};k.isSymbol2D=function(F){if(!F)return!1;switch(F.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};k.isSymbol3D=function(F){if(!F)return!1;switch(F.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;
default:return!1}}})},"esri/layers/vectorTiles/symbols/ExtrudeSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/Symbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","../core/JSONSupport"],function(D,k,a,f){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/FillSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/IconSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(D,k,a,f){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/LineSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(D,k,a,f){(function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p})(f);return f})},"esri/layers/vectorTiles/symbols/ObjectSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(D,k,a,f){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/PathSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(D,k,a,f){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/TextSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(D,k,a,f){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}a(p,g);return p}(f)})},"esri/layers/vectorTiles/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x){Object.defineProperty(k,"__esModule",
{value:!0});k.types={base:q,key:"type",typeMap:{"simple-fill":h,"picture-fill":n,"picture-marker":d,"simple-line":t,"simple-marker":r,text:v,"label-3d":f,"line-3d":g,"mesh-3d":p,"point-3d":e,"polygon-3d":l,"web-style":x}};k.rendererTypes={base:q,key:"type",typeMap:{"simple-fill":h,"picture-fill":n,"picture-marker":d,"simple-line":t,"simple-marker":r,text:v,"line-3d":g,"mesh-3d":p,"point-3d":e,"polygon-3d":l,"web-style":x}};k.labelTypes={base:q,key:"type",typeMap:{text:v,"label-3d":f}};k.types3D={base:q,
key:"type",typeMap:{"label-3d":f,"line-3d":g,"mesh-3d":p,"point-3d":e,"polygon-3d":l,"web-style":x}};k.rendererTypes3D={base:q,key:"type",typeMap:{"line-3d":g,"mesh-3d":p,"point-3d":e,"polygon-3d":l,"web-style":x}};k.labelTypes3D={base:q,key:"type",typeMap:{"label-3d":f}};k.ensureType=a.ensureOneOfType(k.types)})},"esri/layers/vectorTiles/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t){var r=f({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),q=f({widthAndDepth:"width-and-depth"}),v=f({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});f({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"});
f({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});f({percentTotal:"percent-of-total"});var x=Math.PI,y=e.opacityToTransparency,B=e.transparencyToOpacity;return D([k,a],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:t,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var z=Object.create(null);
this.collectRequiredFields(z);return Object.keys(z).sort()}},type:{type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(z,b){return this._readVariables(z,b)}},write:function(z,b,c,m){var u=[];z.forEach(function(w,A){"size"===w.type?u.push(this._writeSizeInfo(w,m,A)):"color"===w.type?u.push(this._writeColorInfo(w,m,A)):"opacity"===w.type?u.push(this._writeOpacityInfo(w,m,A)):"rotation"===
w.type&&u.push(this._writeRotationInfo(w,m,A))},this);b.visualVariables=u}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(z){var b=this._cache;this.visualVariables&&this.visualVariables.forEach(function(c,m){b.hasOwnProperty(m)&&(b[m]=null)},this);z&&z.some(function(c){return!!c.target})&&z.sort(function(c,m){return c.target===m.target?0:c.target?1:-1});z&&z.forEach(function(c,m){"color"===
c.type?b[m]=this._processColorInfo(c):"opacity"===c.type?b[m]=this._processOpacityInfo(c):"size"===c.type?b[m]=this._processSizeInfo(c):"rotation"===c.type&&(b[m]=this._processRotationInfo(c))},this);this._set("visualVariables",z)},getSymbol:function(z,b){},getVisualVariableValues:function(z,b){var c=this.visualVariables,m;c&&(m=c.map(function(u){var w=u.type,A=w+"Info";b=p.mixin({},b);b[A]=u;switch(w){case "size":var C=this.getSize(z,b);break;case "color":C=this.getColor(z,b);break;case "opacity":C=
this.getOpacity(z,b);break;case "rotation":C=this.getRotationAngle(z,b)}return{variable:u,value:C}},this).filter(function(u){return null!=u.value},this));return m},hasVisualVariables:function(z,b){return z?!!this.getVisualVariablesForType(z,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(z,b){var c=this.visualVariables,m;c&&(m=c.filter(function(u){return u.type===
z&&("string"===typeof b?u.target===b:!1===b?!u.target:!0)}))&&0===m.length&&(m=void 0);return m},getSize:function(z,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),m=c.variable;c=this._cache[c.cacheKey];var u=null;if(m){var w=m.minSize;u=m.maxSize;w="object"===typeof w&&w?this._getSize(z,w,c&&c.minSize,b):w;u="object"===typeof u&&u?this._getSize(z,u,c&&c.maxSize,b):u;u=this._getSize(z,m,c&&c.root,b,[w,u])}return u},getSizeRangeAtScale:function(z,b){var c=this._getVarInfo(z,"size"),m=this._cache[c.cacheKey],
u={scale:b};if((z=c.variable)&&b){c=z.minSize;var w=z.maxSize;c="object"===typeof c&&c?this._getSize({},c,m&&m.minSize,u):c;m="object"===typeof w&&w?this._getSize({},w,m&&m.maxSize,u):w;if(null!=c||null!=m){if(c>m){var A=m;m=c;c=A}A={minSize:c,maxSize:m}}}return A},getColor:function(z,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(z,c.variable,this._cache[c.cacheKey],b)},getOpacity:function(z,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(z,
c.variable,this._cache[c.cacheKey],b,!0)},getRotationAngle:function(z,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation"),m=c.variable,u=this._cache[c.cacheKey],w=m.axis||"heading";c="heading"===w&&"arithmetic"===m.rotationType?90:0;w="heading"===w&&"arithmetic"===m.rotationType?-1:1;m=m.field;u=u&&u.compiledFunc;var A=z.attributes,C=0;if(m||u)u?C=d.executeFunction(u,d.createExecContext(z,d.getViewInfo(b))):"function"===typeof m?C=m.apply(this,arguments):A&&(C=A[m]||0),C="number"!==typeof C||
isNaN(C)?null:c+w*C;return C},collectRequiredFields:function(z){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(c){c&&(c.field&&(z[c.field]=!0),c.normalizationField&&(z[c.normalizationField]=!0),c.valueExpression&&d.extractFieldNames(c.valueExpression).forEach(function(m){z[m]=!0}))})},_getVarInfo:function(z,b){if(z&&z.type===b&&this.visualVariables){var c=this.visualVariables.indexOf(z);z=this.visualVariables[c]}else this.visualVariables&&(z=(c=this.getVisualVariablesForType(b))&&
c[0],c=this.visualVariables.indexOf(z));return{variable:z,cacheKey:c}},_readSizeInfo:function(z){z.axis&&(z.axis=q.fromJSON(z.axis));z.valueUnit&&(z.valueUnit=v.fromJSON(z.valueUnit));return z},_readColorInfo:function(z){z&&(z.colors&&z.colors.forEach(function(b,c){Array.isArray(b)?z.colors[c]=l.fromJSON(b):z.colors[c]=new l(b)}),z.stops&&z.stops.forEach(function(b,c){b.color&&Array.isArray(b.color)?z.stops[c].color=l.fromJSON(b.color):b.color&&(z.stops[c].color=new l(b.color))}));return z},_readOpacityInfo:function(z){if(z){var b=
p.mixin({},z);b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(B),delete b.transparencyValues);b.stops&&(b.stops=b.stops.map(function(c){c=p.mixin({},c);c.opacity=B(c.transparency);delete c.transparency;return c}))}return b},_readVariables:function(z,b){z&&(z=z.map(function(u){u=p.clone(u);u.type=r.fromJSON(u.type);"size"===u.type?u=this._readSizeInfo(u):"color"===u.type?u=this._readColorInfo(u):"opacity"===u.type&&(u=this._readOpacityInfo(u));return u},this));var c=b.rotationType,
m=b.rotationExpression;m&&(c={type:"rotation",rotationType:c},(m=m.match(this._rotationRE))&&m[1]&&(c.field=m[1],z||(z=[]),z.push(c)));return z},_createCache:function(z){var b=z&&z.valueExpression,c=d.createSyntaxTree(b);c=d.createFunction(c);var m=!(!z||!z.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(z),hasExpr:!!b,compiledFunc:c,isScaleDriven:m}},_processColorInfo:function(z){z&&(z.colors&&z.colors.forEach(function(b,c){b instanceof l||(z.colors[c]=new l(b))}),z.stops&&
z.stops.forEach(function(b,c){!b.color||b.color instanceof l||(z.stops[c].color=new l(b.color))}),this._sortStops(z.stops));return this._createCache(z)},_processOpacityInfo:function(z){this._sortStops(z&&z.stops);return this._createCache(z)},_processSizeInfo:function(z){z.stops&&Array.isArray(z.stops)?z.stops=this._processSizeInfoStops(z.stops):(z.minSize=z.minSize&&this._processSizeInfoSize(z.minSize),z.maxSize=z.maxSize&&this._processSizeInfoSize(z.maxSize));return{root:this._createCache(z),minSize:this._createCache(z.minSize),
maxSize:this._createCache(z.maxSize)}},_processSizeInfoSize:function(z){"object"===typeof z?z.stops=this._processSizeInfoStops(z.stops):z=g.toPt(z);return z},_processSizeInfoStops:function(z){z&&Array.isArray(z)&&(z.forEach(function(b){b.size=g.toPt(b.size)}),this._sortStops(z));return z},_sortStops:function(z){z&&Array.isArray(z)&&z.sort(function(b,c){return b.value-c.value})},_processRotationInfo:function(z){return this._createCache(z)},_getSize:function(z,b,c,m,u){var w=z.attributes,A=b.field,
C=b.stops,E=0,G=c&&c.hasExpr,F=c&&c.compiledFunc,I=c&&c.ipData,M=c&&c.isScaleDriven,Y="number"===typeof z,R=Y?z:null;if(A||M||G){var S=m&&m.scale,O=u?u[0]:b.minSize,L=u?u[1]:b.maxSize,P=b.minDataValue,X=b.maxDataValue,Q=b.valueUnit||"unknown",K=b.valueRepresentation;E=b.scaleBy;var U=b.normalizationField,da=w?parseFloat(w[U]):void 0,fa=m&&m.shape;M?R=null==S?this._getAverageValue(b):S:"number"!==typeof R&&(G?R=d.executeFunction(F,d.createExecContext(z,d.getViewInfo(m))):"function"===typeof A?R=A.apply(this,
arguments):w&&(R=w[A]));if(null==R||U&&!Y&&(isNaN(da)||0===da))return null;isNaN(da)||Y||(R/=da);if(C)L=this._lookupData(R,I),R=L[0],O=L[1],R===O?E=C[R].size:(R=C[R].size,C=C[O].size,E=R+(C-R)*L[2]);else if(null!=O&&null!=L&&null!=P&&null!=X)R<=P?E=O:R>=X?E=L:(C=(R-P)/(X-P),"area"===E&&fa?(O=(R="circle"===fa)?x*Math.pow(O/2,2):O*O,C=O+C*((R?x*Math.pow(L/2,2):L*L)-O),E=R?2*Math.sqrt(C/x):Math.sqrt(C)):E=O+C*(L-O));else if("unknown"===Q)null!=O&&null!=P?(O&&P?(C=R/P,E="circle"===fa?2*Math.sqrt(C*Math.pow(O/
2,2)):"square"===fa||"diamond"===fa||"image"===fa?Math.sqrt(C*Math.pow(O,2)):C*O):E=R+(O||P),E=E<O?O:E,null!=L&&E>L&&(E=L)):E=R;else{C=(m&&m.resolution?m.resolution:1)*h.meterIn[Q];if("area"===K)E=Math.sqrt(R/x)/C,E*=2;else if(E=R/C,"radius"===K||"distance"===K)E*=2;null!=O&&E<O&&(E=O);null!=L&&E>L&&(E=L)}}else b&&(E=C&&C[0]&&C[0].size,null==E&&(E=b.minSize));return E=isNaN(E)?0:E},_getAverageValue:function(z){var b=z.stops;if(b){var c=b[0].value;z=b[b.length-1].value}else c=z.minDataValue||0,z=z.maxDataValue||
0;return(c+z)/2},_getColorComponent:function(z,b,c,m,u,w){var A=z.attributes,C=b&&b.field,E="number"===typeof z,G=E?z:null,F=c&&c.hasExpr,I=c&&c.compiledFunc,M=c&&c.ipData;if(C||F){var Y=b.normalizationField,R=A?parseFloat(A[Y]):void 0;"number"!==typeof G&&(F?G=d.executeFunction(I,d.createExecContext(z,d.getViewInfo(m))):"function"===typeof C?G=C.apply(this,arguments):A&&(G=A[C]));if(null!=G&&(!Y||E||!isNaN(R)&&0!==R)){isNaN(R)||E||(G/=R);var S=u?this._getOpacity(G,b,M):this._getColor(G,b,M)}}else b&&
(A=b.stops,u?(S=A&&A[0]&&A[0].opacity,null==S&&(S=b.opacityValues&&b.opacityValues[0])):S=A&&A[0]&&A[0].color||b.colors&&b.colors[0]);w&&(w.data=G,w.value=S);return w||S},_interpolateData:function(z){if(z)if(z.colors||z.opacityValues){var b=(z.colors||z.opacityValues).length,c=z.minDataValue,m=(z.maxDataValue-c)/(b-1);var u=[];for(z=0;z<b;z++)u[z]=c+z*m}else z.stops&&(u=z.stops.map(function(w){return w.value||0}));return u},_getOpacity:function(z,b,c){z=this._lookupData(z,c);b=b||this.opacityInfo;
if(z){c=z[0];var m=z[1];c===m?m=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,m),m=c+(b-c)*z[2])}return m},_getOpacValue:function(z,b){return z.opacityValues?z.opacityValues[b]:z.stops[b].opacity},_getColor:function(z,b,c){z=this._lookupData(z,c);b=b||this.colorInfo;if(z){var m=z[0];c=z[1];m=m===c?this._getColorObj(b,m):l.blendColors(this._getColorObj(b,m),this._getColorObj(b,c),z[2]);m=new l(m)}return m},_getColorObj:function(z,b){return z.colors?z.colors[b]:z.stops[b].color},
_lookupData:function(z,b){if(b){var c=0,m=b.length-1;b.some(function(w,A){if(z<w)return m=A,!0;c=A;return!1});var u=[c,m,(z-b[c])/(b[m]-b[c])]}return u},_processForContext:function(z,b,c){if(b&&"web-scene"===b.origin){var m=null!=z.expression,u=null!=z.valueExpressionTitle&&"rotation"===z.type;b.messages&&(m&&b.messages.push(new n("property:unsupported",z.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+
".expression",context:b})),u&&b.messages.push(new n("property:unsupported",z.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpressionTitle",context:b})));m&&delete z.expression;u&&delete z.valueExpressionTitle}else"size"===z.type&&this._convertExpressionToArcade(z)},_writeRotationInfo:function(z,b,c){z&&(z=p.mixin({},z),this._processForContext(z,b,"visualVariables["+c+"]"),z.type=r.toJSON(z.type),
z=p.fixJson(z,!0));return z},_convertExpressionToArcade:function(z){z&&z.expression&&(z.valueExpression="$view.scale")},_writeSizeInfo:function(z,b,c){if(z){z=p.mixin({},z);this._processForContext(z,b,"string"===typeof c?c:"visualVariables["+c+"]");var m=z.minSize,u=z.maxSize;m&&(z.minSize="number"===typeof m?m:this._writeSizeInfo(m,b,"visualVariables["+c+"].minSize"));u&&(z.maxSize="number"===typeof u?u:this._writeSizeInfo(u,b,"visualVariables["+c+"].maxSize"));b=z.legendOptions;c=z.axis;z.type=
r.toJSON(z.type);c&&(z.axis=q.toJSON(c));b&&(z.legendOptions=p.mixin({},b),b=b.customValues)&&(z.legendOptions.customValues=b.slice(0));z.stops&&(z.stops=z.stops.map(function(w){w=p.mixin({},w);null===w.label&&delete w.label;return w}));z=p.fixJson(z,!0)}return z},_writeColorInfo:function(z,b,c){z&&(z=p.mixin({},z),this._processForContext(z,b,"visualVariables["+c+"]"),z.type=r.toJSON(z.type),z.colors&&(z.colors=z.colors.map(function(m){return l.toJSON(m)})),z.stops&&(z.stops=z.stops.map(function(m){m=
p.mixin({},m);m.color&&(m.color=l.toJSON(m.color));null==m.value&&(m.value=0);null===m.label&&delete m.label;return m})),z.legendOptions&&(z.legendOptions=p.mixin({},z.legendOptions)),z=p.fixJson(z,!0));return z},_writeOpacityInfo:function(z,b,c){if(z){var m=p.mixin({},z);this._processForContext(m,b,"visualVariables["+c+"]");m.type=r.toJSON(m.type);m.opacityValues&&(m.transparencyValues=m.opacityValues.map(y),delete m.opacityValues);m.stops&&(m.stops=m.stops.map(function(u){u=p.mixin({},u);u.transparency=
y(u.opacity);delete u.opacity;null===u.label&&delete u.label;return u}));m.legendOptions&&(m.legendOptions=p.mixin({},m.legendOptions));m=p.fixJson(m,!0)}return m}})})},"esri/layers/vectorTiles/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(D,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.opacityToTransparency=function(f){f=a.ensureInteger(100*(1-f));return Math.max(0,Math.min(f,100))};k.transparencyToOpacity=function(f){return Math.max(0,
Math.min(1-f/100,1))}})},"esri/layers/vectorTiles/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),function(D,k,a,f,g,p,n,d,e){var l=p({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",
esriClassifyStandardDeviation:"standard-deviation"}),h=p({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size"});return function(t){function r(v){v=t.call(this)||this;v.lengthUnit=null;v.visualVariables=null;return v}a(r,t);var q=r;Object.defineProperty(r.prototype,"classificationMethod",{get:function(){if("class-breaks-size"===this.type||"class-breaks-color"===this.type){var v=this._get("classificationMethod");return v?v:"manual"}return null},
set:function(v){this._set("classificationMethod",v)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"fields",{get:function(){return"predominance"===this.type?this._get("fields"):null},set:function(v){this._set("fields",v)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"field1",{get:function(){return"relationship"===this.type?this._get("field1"):null},set:function(v){this._set("field1",v)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"field2",
{get:function(){return"relationship"===this.type?this._get("field2"):null},set:function(v){this._set("field2",v)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"focus",{get:function(){return"relationship"===this.type?this._get("focus"):null},set:function(v){this._set("focus",v)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"numClasses",{get:function(){return"relationship"===this.type?this._get("numClasses"):null},set:function(v){this._set("numClasses",v)},
enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"standardDeviationInterval",{get:function(){return"standard-deviation"===this.classificationMethod?this._get("standardDeviationInterval"):null},set:function(v){this._set("standardDeviationInterval",v)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"type",{get:function(){return this._get("type")},set:function(v){var x=v;"classed-size"===v?x="class-breaks-size":"classed-color"===v&&(x="class-breaks-color");this._set("type",
x)},enumerable:!0,configurable:!0});r.prototype.clone=function(){return new q({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:n.clone(this.field1),field2:n.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(v){return v.clone()})})};f([d.property({type:String,value:null,
dependsOn:["type"],json:{read:l.read,write:l.write}})],r.prototype,"classificationMethod",null);f([d.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],r.prototype,"fields",null);f([d.property({value:null,dependsOn:["type"],json:{write:!0}})],r.prototype,"field1",null);f([d.property({value:null,dependsOn:["type"],json:{write:!0}})],r.prototype,"field2",null);f([d.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],r.prototype,"focus",null);f([d.property({type:Number,
value:null,dependsOn:["type"],json:{write:!0}})],r.prototype,"numClasses",null);f([d.property({type:String,json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],r.prototype,"lengthUnit",void 0);f([d.property({type:Number,value:null,dependsOn:["classificationMethod"],json:{write:!0}})],r.prototype,"standardDeviationInterval",null);f([d.property({type:String,value:null,json:{read:h.read,write:h.write}})],r.prototype,"type",null);f([d.property({type:[e],json:{write:!0}})],r.prototype,"visualVariables",
void 0);return r=q=f([d.subclass("esri.renderers.support.AuthoringInfo")],r)}(d.declared(g))})},"esri/layers/vectorTiles/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),function(D,k,a,f,g,p,n,d){var e=p({percentTotal:"percent-of-total"}),l=p({sizeInfo:"size",
colorInfo:"color",transparencyInfo:"opacity"}),h={key:function(t){return"number"===typeof t?"number":"string"},typeMap:{number:Number,string:String},base:null};return function(t){function r(v){v=t.call(this)||this;v.endTime=null;v.field=null;v.maxSliderValue=null;v.minSliderValue=null;v.startTime=null;v.type=null;v.units=null;return v}a(r,t);var q=r;r.prototype.castEndTime=function(v){return"string"===typeof v||"number"===typeof v?v:null};r.prototype.castStartTime=function(v){return"string"===typeof v||
"number"===typeof v?v:null};Object.defineProperty(r.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(v){this._set("style",v)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(v){this._set("theme",v)},enumerable:!0,configurable:!0});r.prototype.clone=function(){return new q({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,
minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};f([n.property({types:h,json:{write:!0}})],r.prototype,"endTime",void 0);f([d.cast("endTime")],r.prototype,"castEndTime",null);f([n.property({type:String,json:{write:!0}})],r.prototype,"field",void 0);f([n.property({type:Number,json:{write:!0}})],r.prototype,"maxSliderValue",void 0);f([n.property({type:Number,json:{write:!0}})],r.prototype,"minSliderValue",void 0);f([n.property({types:h,
json:{write:!0}})],r.prototype,"startTime",void 0);f([d.cast("startTime")],r.prototype,"castStartTime",null);f([n.property({type:String,value:null,dependsOn:["type"],json:{read:e.read,write:e.write}})],r.prototype,"style",null);f([n.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],r.prototype,"theme",null);f([n.property({type:String,json:{read:l.read,write:l.write}})],r.prototype,"type",void 0);f([n.property({type:String,json:{write:!0}})],r.prototype,"units",void 0);return r=
q=f([n.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],r)}(n.declared(g))})},"esri/layers/vectorTiles/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(D,k,a,f,g,p){Object.defineProperty(k,"__esModule",{value:!0});D=function(n){function d(){var l=null!==n&&n.apply(this,arguments)||this;l.title=null;return l}
a(d,n);var e=d;d.prototype.clone=function(){return new e({title:this.title})};f([p.property({type:String,json:{write:!0}})],d.prototype,"title",void 0);return d=e=f([p.subclass("esri.renderers.support.LegendOptions")],d)}(p.declared(g));k.LegendOptions=D;k["default"]=D})},"esri/layers/vectorTiles/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(D,k,a,f,g,p,n,d){Object.defineProperty(k,"__esModule",{value:!0});D=function(e){function l(){var t=null!==e&&e.apply(this,arguments)||this;t.description=null;t.label=null;t.minValue=null;t.maxValue=0;t.symbol=null;return t}a(l,e);var h=l;l.prototype.clone=function(){return new h({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};f([p.property({type:String,json:{write:!0}})],l.prototype,"description",
void 0);f([p.property({type:String,json:{write:!0}})],l.prototype,"label",void 0);f([p.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],l.prototype,"minValue",void 0);f([p.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],l.prototype,"maxValue",void 0);f([p.property({types:d.rendererTypes,json:{origins:{"web-scene":{read:n.read,write:{target:{symbol:{types:d.rendererTypes3D}},writer:n.writeTarget}}},read:n.read,
write:n.writeTarget}})],l.prototype,"symbol",void 0);return l=h=f([p.subclass("esri.renderers.support.ClassBreakInfo")],l)}(p.declared(g));k.ClassBreakInfo=D;k["default"]=D})},"esri/layers/vectorTiles/renderers/HeatmapRenderer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Renderer"],function(D,k,a,f){return function(g){function p(){var n=null!==g&&g.apply(this,arguments)||this;n.type="heatmap";return n}a(p,g);return p}(f)})},"esri/layers/vectorTiles/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(D,k,a,f,g,p,n,d,e){return function(l){function h(){var r=null!==l&&l.apply(this,arguments)||this;r.description=null;r.label=null;r.symbol=null;r.type="simple";return r}a(h,l);var t=h;h.prototype.writeSymbolWebScene=function(r,q,v,x){d.writeTarget(r,q,v,x)};h.prototype.writeSymbol=function(r,q,v,x){d.writeTarget(r,q,v,x)};h.prototype.readSymbol=function(r,q,v){return d.read(r,q,v)};h.prototype.getSymbol=function(r,q){return this.symbol};h.prototype.getSymbols=function(){return this.symbol?
[this.symbol]:[]};h.prototype.clone=function(){return new t({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:g.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};f([p.property({type:String,json:{write:!0}})],h.prototype,"description",void 0);f([p.property({type:String,json:{write:!0}})],h.prototype,"label",void 0);f([p.property({types:e.rendererTypes})],h.prototype,"symbol",void 0);f([p.writer("web-scene",
"symbol",{symbol:{types:e.rendererTypes3D}})],h.prototype,"writeSymbolWebScene",null);f([p.writer("symbol")],h.prototype,"writeSymbol",null);f([p.reader("symbol")],h.prototype,"readSymbol",null);return h=t=f([p.subclass("esri.renderers.SimpleRenderer")],h)}(p.declared(n))})},"esri/layers/vectorTiles/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B,z,b,c,m){var u=l.getLogger("esri.renderers.UniqueValueRenderer"),w=r.ensureType(B["default"]);return function(A){function C(G){G=A.call(this)||this;G._valueInfoMap={};G._isDefaultSymbolDerived=!1;G.type="unique-value";G.backgroundFillSymbol=null;G.field=null;G.field2=null;G.field3=null;G.valueExpression=null;G.valueExpressionTitle=null;G.legendOptions=null;G.defaultLabel=null;G.fieldDelimiter=null;G.portal=null;G.styleOrigin=null;G.diff={uniqueValueInfos:function(F,
I){if(F||I){if(!F||!I)return{type:"complete",oldValue:F,newValue:I};for(var M=!1,Y={type:"collection",added:[],removed:[],changed:[],unchanged:[]},R=function(O){var L=n.find(F,function(P){return P.value===I[O].value});L?x.diff(L,I[O])?Y.changed.push({type:"complete",oldValue:L,newValue:I[O]}):Y.unchanged.push({oldValue:L,newValue:I[O]}):Y.added.push(I[O]);M=!0},S=0;S<I.length;S++)R(S);R=function(O){n.find(I,function(L){return L.value===F[O].value})||(Y.removed.push(F[O]),M=!0)};for(S=0;S<F.length;S++)R(S);
return M?Y:void 0}}};G._set("uniqueValueInfos",[]);return G}a(C,A);var E=C;C.prototype.writeType=function(G,F,I,M){F.type="uniqueValue"};C.prototype.writeBackgroundFillSymbolWebScene=function(G,F,I,M){b.writeTarget(G,F,I,M)};C.prototype.castField=function(G){return null==G?G:"function"===typeof G?G:r.ensureString(G)};C.prototype.writeField=function(G,F,I,M){"string"===typeof G?F[I]=G:M&&M.messages?M.messages.push(new d("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):
u.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(C.prototype,"compiledFunc",{get:function(){return z.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"defaultSymbol",{set:function(G){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",G)},enumerable:!0,configurable:!0});C.prototype.readDefaultSymbol=function(G,F,I){return b.read(G,F,I)};C.prototype.writeDefaultSymbolWebScene=function(G,F,
I,M){this._isDefaultSymbolDerived||b.writeTarget(G,F,I,M)};C.prototype.writeDefaultSymbol=function(G,F,I,M){this._isDefaultSymbolDerived||b.writeTarget(G,F,I,M)};C.prototype.readPortal=function(G,F,I){return I.portal||q.getDefault()};C.prototype.readStyleOrigin=function(G,F,I){if(F.styleName)return Object.freeze({styleName:F.styleName});if(F.styleUrl)return G=h.read(F.styleUrl,I),Object.freeze({styleUrl:G})};C.prototype.writeStyleOrigin=function(G,F,I,M){G.styleName?F.styleName=G.styleName:G.styleUrl&&
(F.styleUrl=h.write(G.styleUrl,M),h.isAbsolute(F.styleUrl)&&(F.styleUrl=h.normalize(F.styleUrl)))};Object.defineProperty(C.prototype,"uniqueValueInfos",{set:function(G){this.styleOrigin?u.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",G),this._updateValueInfoMap())},enumerable:!0,configurable:!0});C.prototype.addUniqueValueInfo=function(G,F){if(this.styleOrigin)u.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");
else{var I="object"===typeof G?w(G):new B["default"]({value:G,symbol:F});this.uniqueValueInfos.push(I);this._valueInfoMap[I.value]=I}};C.prototype.removeUniqueValueInfo=function(G){if(this.styleOrigin)u.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var F=0;F<this.uniqueValueInfos.length;F++)if(this.uniqueValueInfos[F].value===G+""){delete this._valueInfoMap[G];this.uniqueValueInfos.splice(F,1);break}};C.prototype.getUniqueValueInfo=
function(G,F){var I=this.field,M=G.attributes;if(this.valueExpression)var Y=z.executeFunction(this.compiledFunc,z.createExecContext(G,z.getViewInfo(F)));else if("function"!==typeof I&&this.field2){Y=this.field2;var R=this.field3,S=[];I&&S.push(M[I]);Y&&S.push(M[Y]);R&&S.push(M[R]);Y=S.join(this.fieldDelimiter||"")}else"function"===typeof I?Y=I(G):I&&(Y=M[I]);return this._valueInfoMap[Y+""]};C.prototype.getSymbol=function(G,F){var I=this.getUniqueValueInfo(G,F);return I&&I.symbol||this.defaultSymbol};
C.prototype.getSymbols=function(){for(var G=[],F=0,I=this.uniqueValueInfos;F<I.length;F++){var M=I[F];M.symbol&&G.push(M.symbol)}this.defaultSymbol&&G.push(this.defaultSymbol);return G};C.prototype.clone=function(){var G=new E({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:e.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:e.clone(this.visualVariables),
legendOptions:e.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:e.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(G._isDefaultSymbolDerived=!0);G._set("portal",this.portal);var F=e.clone(this.uniqueValueInfos);this.styleOrigin&&(G._set("styleOrigin",Object.freeze(e.clone(this.styleOrigin))),Object.freeze(F));G._set("uniqueValueInfos",F);G._updateValueInfoMap();return G};C.prototype.collectRequiredFields=function(G){this.inherited(arguments);
[this.field,this.field2,this.field3].forEach(function(F){F&&"string"===typeof F&&(G[F]=!0)});this.valueExpression&&z.extractFieldNames(this.valueExpression).forEach(function(F){G[F]=!0})};C.prototype.populateFromStyle=function(){var G=this;return c.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(F){var I=[];G._valueInfoMap={};F&&F.data&&Array.isArray(F.data.items)&&F.data.items.forEach(function(M){var Y=new p.WebStyleSymbol({styleUrl:F.styleUrl,styleName:F.styleName,portal:G.portal,
name:M.name});G.defaultSymbol||M.name!==F.data.defaultItem||(G.defaultSymbol=Y,G._isDefaultSymbolDerived=!0);Y=new B["default"]({value:M.name,symbol:Y});I.push(Y);G._valueInfoMap[M.name]=Y});G._set("uniqueValueInfos",Object.freeze(I));!G.defaultSymbol&&G.uniqueValueInfos.length&&(G.defaultSymbol=G.uniqueValueInfos[0].symbol,G._isDefaultSymbolDerived=!0);return G})};C.prototype._updateValueInfoMap=function(){var G=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(F){return G._valueInfoMap[F.value+
""]=F})};C.fromPortalStyle=function(G,F){var I=new E(F&&F.properties);I._set("styleOrigin",Object.freeze({styleName:G}));I._set("portal",F&&F.portal||q.getDefault());I=I.populateFromStyle();I["catch"](function(M){u.error("#fromPortalStyle('"+G+"'[, ...])","Failed to create unique value renderer from style name",M)});return I};C.fromStyleUrl=function(G,F){var I=new E(F&&F.properties);I._set("styleOrigin",Object.freeze({styleUrl:G}));I=I.populateFromStyle();I["catch"](function(M){u.error("#fromStyleUrl('"+
G+"'[, ...])","Failed to create unique value renderer from style URL",M)});return I};f([t.property()],C.prototype,"type",void 0);f([t.writer("type")],C.prototype,"writeType",null);f([t.property({types:{base:p.BaseSymbol,key:"type",typeMap:{"simple-fill":m.rendererTypes.typeMap["simple-fill"],"picture-fill":m.rendererTypes.typeMap["picture-fill"],"polygon-3d":m.rendererTypes.typeMap["polygon-3d"]}},json:{read:b.read,write:b.writeTarget}})],C.prototype,"backgroundFillSymbol",void 0);f([t.writer("web-scene",
"backgroundFillSymbol",{backgroundFillSymbol:{type:p.PolygonSymbol3D}})],C.prototype,"writeBackgroundFillSymbolWebScene",null);f([t.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],C.prototype,"field",void 0);f([t.cast("field")],C.prototype,"castField",null);f([t.writer("field")],C.prototype,"writeField",null);f([t.property({type:String,json:{write:!0}})],C.prototype,"field2",void 0);f([t.property({type:String,json:{write:!0}})],C.prototype,"field3",void 0);f([t.property({type:String,
json:{write:!0}})],C.prototype,"valueExpression",void 0);f([t.property({type:String,json:{write:!0}})],C.prototype,"valueExpressionTitle",void 0);f([t.property({dependsOn:["valueExpression"]})],C.prototype,"compiledFunc",null);f([t.property({type:y["default"],json:{write:!0}})],C.prototype,"legendOptions",void 0);f([t.property({type:String,json:{write:!0}})],C.prototype,"defaultLabel",void 0);f([t.property({types:m.rendererTypes})],C.prototype,"defaultSymbol",null);f([t.reader("defaultSymbol")],C.prototype,
"readDefaultSymbol",null);f([t.writer("web-scene","defaultSymbol",{defaultSymbol:{types:m.rendererTypes3D}})],C.prototype,"writeDefaultSymbolWebScene",null);f([t.writer("defaultSymbol")],C.prototype,"writeDefaultSymbol",null);f([t.property({type:String,json:{write:!0}})],C.prototype,"fieldDelimiter",void 0);f([t.property({type:q,readOnly:!0})],C.prototype,"portal",void 0);f([t.reader("portal",["styleName"])],C.prototype,"readPortal",null);f([t.property({readOnly:!0})],C.prototype,"styleOrigin",void 0);
f([t.reader("styleOrigin",["styleName","styleUrl"])],C.prototype,"readStyleOrigin",null);f([t.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],C.prototype,"writeStyleOrigin",null);f([t.property({type:[B["default"]],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],C.prototype,"uniqueValueInfos",null);f([t.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],C.prototype,"requiredFields",void 0);f([g(1,t.cast(m.ensureType))],
C.prototype,"addUniqueValueInfo",null);return C=E=f([t.subclass("esri.renderers.UniqueValueRenderer")],C)}(t.declared(v))})},"esri/layers/vectorTiles/core/tsSupport/paramHelper":function(){define([],function(){return function(D,k){return function(a,f){k(a,f,D)}}})},"esri/layers/vectorTiles/core/arrayUtils":function(){define(["require","exports"],function(D,k){function a(t,r,q){for(var v=t.length,x=0;x<v;x++)if(r.call(q,t[x],x,t))return x;return-1}function f(t,r,q,v){void 0===q&&(q=t.length);v=v||
l;for(var x=Math.max(0,v.last-10),y=-1,B=x;B<q;++B)if(t[B]===r){y=B;break}if(-1===y){for(B=0;B<x;++B)if(t[B]===r){y=B;break}if(-1===y)return}t[y]=t[q-1];t.pop();v.last=y;return r}function g(t,r,q,v){void 0===q&&(q=t.length);var x=[];r.forEach(function(y){void 0!==f(t,y,q,v)&&(x.push(y),--q)});return x}function p(t,r){return-1===t.indexOf(r)}function n(t,r,q){return!t.some(r.bind(null,q))}function d(t){return t}Object.defineProperty(k,"__esModule",{value:!0});k.findIndex=a;k.find=function(t,r,q){for(var v=
t.length,x=0;x<v;x++){var y=t[x];if(r.call(q,y,x,t))return y}};k.unique=function(t){return t.filter(function(r,q,v){return v.indexOf(r)===q})};k.equals=function(t,r,q){if(!t&&!r)return!0;if(!t||!r||t.length!==r.length)return!1;if(q)for(var v=0;v<t.length;v++){if(!q(t[v],r[v]))return!1}else for(v=0;v<t.length;v++)if(t[v]!==r[v])return!1;return!0};k.difference=function(t,r,q){if(q){var v=r.filter(n.bind(null,t,q));t=t.filter(n.bind(null,r,q))}else v=r.filter(p.bind(null,t)),t=t.filter(p.bind(null,r));
return{added:v,removed:t}};k.intersect=function(t,r,q){return t&&r?q?t.filter(function(v){return-1<a(r,function(x){return q(v,x)})}):t.filter(function(v){return-1<r.indexOf(v)}):[]};k.constant=function(t,r){for(var q=Array(t),v=0;v<t;v++)q[v]=r;return q};k.range=function(t,r){void 0===r&&(r=t,t=0);for(var q=Array(r-t),v=t;v<r;v++)q[v-t]=v;return q};k.binaryIndexOf=function(t,r,q){for(var v=t.length,x=0,y=v-1;x<y;){var B=x+Math.floor((y-x)/2);r>t[B]?x=B+1:y=B}y=t[x];return q?r>=t[v-1]?-1:y===r?x:x-
1:y===r?x:-1};var e=function(){return function(){this.last=0}}();k.RemoveHint=e;var l=new e,h=function(){return function(t){var r=this;this._array=t;this._hint=new e;this.remove=function(q){return f(r._array,q,r._array.length,r._hint)};this.removeMany=function(q){return g(r._array,q,r._array.length,r._hint)}}}();k.UnorderedRemover=h;k.removeUnordered=f;k.removeUnorderedMany=g;k.keysOfMap=function(t){var r=[];t.forEach(function(q,v){return r.push(v)});return r};k.keysOfSet=function(t,r){void 0===r&&
(r=d);var q=[];t.forEach(function(v){return q.push(r(v))});return q}})},"esri/layers/vectorTiles/portal/Portal":function(){define(["require","exports"],function(D,k){return function(){function a(){}a.getDefault=function(){return null};return a}()})},"esri/layers/vectorTiles/renderers/support/diffUtils":function(){define(["require","exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(D,k,a,f,g){function p(t){return t instanceof f?Object.keys(t.items):
t instanceof a?g.getProperties(t).keys():t?Object.keys(t):[]}function n(t,r){return t instanceof f?t.items[r]:t[r]}function d(t,r){return Array.isArray(t)&&Array.isArray(r)?t.length!==r.length:!1}function e(t){return t?t.declaredClass:null}function l(t,r){var q=t.diff;if(q&&"function"===typeof q)return q(t,r);var v=p(t),x=p(r);if(0!==v.length||0!==x.length){if(!v.length||!x.length||d(t,r))return{type:"complete",oldValue:t,newValue:r};var y=x.filter(function(A){return-1===v.indexOf(A)}),B=v.filter(function(A){return-1===
x.indexOf(A)});y=v.filter(function(A){return-1<x.indexOf(A)&&n(t,A)!==n(r,A)}).concat(y,B).sort();if((B=e(t))&&-1<h.indexOf(B)&&y.length)return{type:"complete",oldValue:t,newValue:r};B=t instanceof a&&r instanceof a;for(var z in y){var b=y[z],c=n(t,b),m=n(r,b),u=void 0;if((B||"function"!==typeof c&&"function"!==typeof m)&&c!==m&&(null!=c||null!=m)&&(u=q&&q[b]&&"function"===typeof q[b]?q[b](c,m):"object"===typeof c&&"object"===typeof m&&e(c)===e(m)?l(c,m):{type:"complete",oldValue:c,newValue:m})){var w=
w||{type:"partial",diff:{}};w.diff[b]=u}}return w}}Object.defineProperty(k,"__esModule",{value:!0});var h=["esri.Color","esri.portal.Portal"];k.diff=function(t,r){if("function"!==typeof t&&"function"!==typeof r&&(t||r))return!t||!r||"object"===typeof t&&"object"===typeof r&&e(t)!==e(r)?{type:"complete",oldValue:t,newValue:r}:l(t,r)}})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r){function q(C){return C?C.isInstanceOf&&C.isInstanceOf(A):!1}function v(C){return C?q(C)?C.toArray():C.length?Array.prototype.slice.apply(C):[]:[]}function x(C){if(C&&C.length)return C[0]}function y(C,E,G,F){E&&E.forEach(function(I,M,Y){C.push(I);y(C,G.call(F,I,M,Y),G,F)})}D=function(){function C(){this.target=null;this.defaultPrevented=this.cancellable=!1}C.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};C.prototype.reset=function(E){this.defaultPrevented=
!1;this.item=E};return C}();var B=function(){},z=new l(D,!0,function(C){C.item=null;C.target=null}),b=new Set,c=new Set,m=new Set,u=new Map,w=0,A=function(C){function E(F){F=C.call(this,F)||this;F._boundDispatch=F._dispatchColChange.bind(F);F._chgListeners=[];F._notifications=null;F._timer=null;F.length=0;F._items=[];Object.defineProperty(F,"uid",{value:w++});return F}a(E,C);var G=E;E.ofType=function(F){if(!F)return G;if(u.has(F))return u.get(F);if("function"===typeof F)var I=F.prototype.declaredClass;
else if(F.base)I=F.base.prototype.declaredClass;else for(var M in F.typeMap){var Y=F.typeMap[M].prototype.declaredClass;I=I?I+(" | "+Y):Y}I=G.createSubclass({declaredClass:"esri.core.Collection\x3c"+I+"\x3e"});M={Type:F,ensureType:"function"===typeof F?r.ensureType(F):r.ensureOneOfType(F)};Object.defineProperty(I.prototype,"itemType",{value:M});u.set(F,I);return I};E.prototype.normalizeCtorArgs=function(F){return F?Array.isArray(F)||q(F)?{items:F}:F:{}};Object.defineProperty(E.prototype,"items",{get:function(){return this._items},
set:function(F){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(v(F))),this._emitAfterChanges())},enumerable:!0,configurable:!0});E.prototype.on=function(F,I){var M;Array.isArray(F)?M=F:-1<F.indexOf(",")&&(M=F.split(/\s*,\s*/));if(M){for(var Y=[],R=0;R<M.length;R++)Y.push(this.on(M[R],I));Y.remove=function(){for(var L=0;L<Y.length;L++)Y[L].remove()};return Y}if("change"===F){var S=this._chgListeners,O={removed:!1,callback:I};S.push(O);this._notifications&&this._notifications.push({listeners:S.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=B;O.removed=!0;S.splice(S.indexOf(O),1)}}}return g.after(this,"on"+F,I,!0)};E.prototype.hasEventListener=function(F){return"change"===F?0<this._chgListeners.length:this.inherited(arguments)};E.prototype.add=function(F,I){if(this._emitBeforeChanges())return this;var M=this.getNextIndex(I);this._splice(M,0,F);this._emitAfterChanges();return this};E.prototype.addMany=function(F,I){void 0===I&&(I=this._items.length);if(!F||!F.length||
this._emitBeforeChanges())return this;var M=this.getNextIndex(I);this._splice.apply(this,[M,0].concat(v(F)));this._emitAfterChanges();return this};E.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var F=this._splice(0,this.length)||[];this._emitAfterChanges();return F};E.prototype.clone=function(){return this._createNewInstance({items:this._items.map(e.clone)})};E.prototype.concat=function(){for(var F=[],I=0;I<arguments.length;I++)F[I]=arguments[I];F=F.map(v);return this._createNewInstance({items:(M=
this._items).concat.apply(M,F)});var M};E.prototype.drain=function(F,I){if(this.length&&!this._emitBeforeChanges()){for(var M=this._splice(0,this.length),Y=M.length,R=0;R<Y;R++)F.call(I,M[R],R,M);this._emitAfterChanges()}};E.prototype.every=function(F,I){return this._items.every(F,I)};E.prototype.filter=function(F,I){var M=2===arguments.length?this._items.filter(F,I):this._items.filter(F);return this._createNewInstance({items:M})};E.prototype.find=function(F,I){if("function"!==typeof F)throw new TypeError(F+
" is not a function");for(var M=this._items,Y=M.length,R=0;R<Y;R++){var S=M[R];if(F.call(I,S,R,M))return S}};E.prototype.findIndex=function(F,I){if("function"!==typeof F)throw new TypeError(F+" is not a function");for(var M=this._items,Y=M.length,R=0;R<Y;R++)if(F.call(I,M[R],R,M))return R;return-1};E.prototype.flatten=function(F,I){var M=[];y(M,this,F,I);return new G(M)};E.prototype.forEach=function(F,I){for(var M=this._items,Y=M.length,R=0;R<Y;R++)F.call(I,M[R],R,M)};E.prototype.getItemAt=function(F){return this._items[F]};
E.prototype.getNextIndex=function(F){var I=this.length;F=null==F?I:F;0>F?F=0:F>I&&(F=I);return F};E.prototype.includes=function(F,I){void 0===I&&(I=0);return arguments.length?-1!==this._items.indexOf(F,I):!1};E.prototype.indexOf=function(F,I){void 0===I&&(I=0);return this._items.indexOf(F,I)};E.prototype.join=function(F){void 0===F&&(F=",");return this._items.join(F)};E.prototype.lastIndexOf=function(F,I){void 0===I&&(I=this.length-1);return this._items.lastIndexOf(F,I)};E.prototype.map=function(F,
I){var M=this._items.map(F,I);return new G({items:M})};E.prototype.reorder=function(F,I){void 0===I&&(I=this.length-1);var M=this.indexOf(F);if(-1!==M){0>I?I=0:I>=this.length&&(I=this.length-1);if(M!==I){if(this._emitBeforeChanges())return F;this._splice(M,1);this._splice(I,0,F);this._emitAfterChanges()}return F}};E.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var F=x(this._splice(this.length-1,1));this._emitAfterChanges();return F}};E.prototype.push=function(){for(var F=[],
I=0;I<arguments.length;I++)F[I]=arguments[I];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(F));this._emitAfterChanges();return this.length};E.prototype.reduce=function(F,I){var M=this._items;return 2===arguments.length?M.reduce(F,I):M.reduce(F)};E.prototype.reduceRight=function(F,I){var M=this._items;return 2===arguments.length?M.reduceRight(F,I):M.reduceRight(F)};E.prototype.remove=function(F){return this.removeAt(this.indexOf(F))};E.prototype.removeAt=
function(F){if(!(0>F||F>=this.length||this._emitBeforeChanges()))return F=x(this._splice(F,1)),this._emitAfterChanges(),F};E.prototype.removeMany=function(F){if(!F||!F.length||this._emitBeforeChanges())return[];F=q(F)?F.toArray():F;for(var I=this._items,M=[],Y=F.length,R=0;R<Y;R++){var S=I.indexOf(F[R]);if(-1<S){for(var O=R+1,L=S+1,P=Math.min(F.length-O,I.length-L),X=0;X<P&&F[O+X]===I[L+X];)X++;O=1+X;(S=this._splice(S,O))&&0<S.length&&M.push.apply(M,S);R+=O-1}}this._emitAfterChanges();return M};E.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var F=this._splice(0,this.length);F&&(F.reverse(),this._splice.apply(this,[0,0].concat(F)));this._emitAfterChanges();return this};E.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var F=x(this._splice(0,1));this._emitAfterChanges();return F}};E.prototype.slice=function(F,I){void 0===F&&(F=0);void 0===I&&(I=this.length);return this._createNewInstance({items:this._items.slice(F,I)})};E.prototype.some=function(F,I){return this._items.some(F,
I)};E.prototype.sort=function(F){if(!this.length||this._emitBeforeChanges())return this;var I=this._splice(0,this.length);arguments.length?I.sort(F):I.sort();this._splice.apply(this,[0,0].concat(I));return this};E.prototype.splice=function(F,I){for(var M=[],Y=2;Y<arguments.length;Y++)M[Y-2]=arguments[Y];if(this._emitBeforeChanges())return[];M=this._splice.apply(this,[F,I].concat(M))||[];this._emitAfterChanges();return M};E.prototype.toArray=function(){return this._items.slice()};E.prototype.toJSON=
function(){return this.toArray()};E.prototype.toLocaleString=function(){return this._items.toLocaleString()};E.prototype.toString=function(){return this._items.toString()};E.prototype.unshift=function(){for(var F=[],I=0;I<arguments.length;I++)F[I]=arguments[I];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(F));this._emitAfterChanges();return this.length};E.prototype._createNewInstance=function(F){return new this.constructor(F)};E.prototype._splice=function(F,
I){for(var M=[],Y=2;Y<arguments.length;Y++)M[Y-2]=arguments[Y];Y=this._items;var R=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=h.schedule(this._boundDispatch));if(I){var S=Y.splice(F,I);if(this.hasEventListener("before-remove")){var O=z.acquire();O.target=this;O.cancellable=!0;for(var L=0,P=S.length;L<P;L++){var X=
S[L];O.reset(X);this.emit("before-remove",O);O.defaultPrevented&&(S.splice(L,1),Y.splice(F,0,X),F+=1,--L,--P)}z.release(O)}this.length=this._items.length;if(this.hasEventListener("after-remove")){X=z.acquire();X.target=this;X.cancellable=!1;P=S.length;for(L=0;L<P;L++)X.reset(S[L]),this.emit("after-remove",X);z.release(X)}}if(M&&M.length){if(R){L=[];for(P=0;P<M.length;P++)X=M[P],O=R.ensureType(X),null==O&&null!=X||L.push(O);M=L}R=this.hasEventListener("before-add");L=this.hasEventListener("after-add");
P=F===this.length;if(R||L){X=z.acquire();X.target=this;X.cancellable=!0;O=z.acquire();O.target=this;O.cancellable=!1;for(var Q=0,K=M;Q<K.length;Q++){var U=K[Q];R?(X.reset(U),this.emit("before-add",X),X.defaultPrevented||(P?Y.push(U):Y.splice(F++,0,U),this._set("length",Y.length),L&&(O.reset(U),this.emit("after-add",O)))):(P?Y.push(U):Y.splice(F++,0,U),this._set("length",Y.length),O.reset(U),this.emit("after-add",O))}z.release(X)}else P?Y.push.apply(Y,M):Y.splice.apply(Y,[F,0].concat(M)),this._set("length",
Y.length)}(M&&M.length||S&&S.length)&&this._notifyChangeEvent(M,S);return S};E.prototype._emitBeforeChanges=function(){var F=!1;if(this.hasEventListener("before-changes")){var I=z.acquire();I.target=this;I.cancellable=!0;this.emit("before-changes",I);F=I.defaultPrevented;z.release(I)}return F};E.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var F=z.acquire();F.target=this;F.cancellable=!1;this.emit("after-changes",F);z.release(F)}};E.prototype._notifyChangeEvent=
function(F,I){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:F,removed:I})};E.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var F=this._notifications;this._notifications=null;for(var I=function(R){var S=R.changes;b.clear();c.clear();m.clear();for(var O=0;O<S.length;O++){var L=S[O],P=L.added;L=L.removed;if(P)if(0===m.size&&0===c.size)for(var X=0,Q=P;X<Q.length;X++)P=Q[X],b.add(P);
else for(X=0,Q=P;X<Q.length;X++)P=Q[X],c.has(P)?(m.add(P),c["delete"](P)):m.has(P)||b.add(P);if(L)if(0===m.size&&0===b.size)for(X=0;X<L.length;X++)P=L[X],c.add(P);else for(X=0;X<L.length;X++)P=L[X],b.has(P)?b["delete"](P):(m["delete"](P),c.add(P))}var K=n.acquire();b.forEach(function(la){K.push(la)});var U=n.acquire();c.forEach(function(la){U.push(la)});var da=M._items,fa=R.items,ia=n.acquire();m.forEach(function(la){fa.indexOf(la)!==da.indexOf(la)&&ia.push(la)});if(R.listeners&&(K.length||U.length||
ia.length))for(S={target:M,added:K,removed:U,moved:ia},O=R.listeners.length,P=0;P<O;P++)L=R.listeners[P],L.removed||L.callback.call(M,S);n.release(K);n.release(U);n.release(ia)},M=this,Y=0;Y<F.length;Y++)I(F[Y]);b.clear();c.clear();m.clear()}};E.isCollection=q;f([t.property()],E.prototype,"length",void 0);f([t.property()],E.prototype,"items",null);return E=G=f([t.subclass("esri.core.Collection")],E)}(t.declared(p,d));return A})},"esri/layers/vectorTiles/core/Evented":function(){define(["require",
"exports","dojo/aspect","dojo/on"],function(D,k,a,f){function g(p,n,d,e){var l;Array.isArray(n)?l=n:-1<n.indexOf(",")&&(l=n.split(/\s*,\s*/));if(l){var h=[];for(n=0;n<l.length;n++)h.push(g(p,l[n],d,e));h.remove=function(){for(var t=0;t<h.length;t++)h[t].remove()};return h}return e(p,n)}return function(){function p(){}p.prototype.emit=function(n,d){if(this.hasEventListener(n))return d=d||{},d.target||(d.target=this),f.emit(this,n,d)};p.prototype.on=function(n,d){return g(this,n,d,function(e,l){return a.after(e,
"on"+l,d,!0)})};p.prototype.hasEventListener=function(n){n="on"+n;return!(!this[n]||!this[n].after)};return p}()})},"esri/layers/vectorTiles/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(D,k,a,f,g,p,n,d){Object.defineProperty(k,"__esModule",{value:!0});
D=function(e){function l(){var t=null!==e&&e.apply(this,arguments)||this;t.description=null;t.label=null;t.symbol=null;t.value=null;return t}a(l,e);var h=l;l.prototype.clone=function(){return new h({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};f([p.property({type:String,json:{write:!0}})],l.prototype,"description",void 0);f([p.property({type:String,json:{write:!0}})],l.prototype,"label",void 0);f([p.property({types:d.rendererTypes,json:{origins:{"web-scene":{read:n.read,
write:{target:{symbol:{types:d.rendererTypes3D}},writer:n.writeTarget}}},read:n.read,write:n.writeTarget}})],l.prototype,"symbol",void 0);f([p.property({type:String,json:{write:!0}})],l.prototype,"value",void 0);return l=h=f([p.subclass("esri.renderers.support.UniqueValueInfo")],l)}(p.declared(g));k.UniqueValueInfo=D;k["default"]=D})},"esri/layers/vectorTiles/symbols/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Error"],function(D,k,a,f){Object.defineProperty(k,
"__esModule",{value:!0});k.fetchStyle=function(g,p){return a.reject(new f("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}})},"esri/layers/vectorTiles/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(D,k,a,f,g,p,n,d,e){function l(r,q,v){if(!r)return null;if(r&&(r.styleName||
r.styleUrl)&&"uniqueValue"!==r.type)return v&&v.messages&&v.messages.push(new g("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+r.type+"'",{definition:r,context:v})),null;q=r?t[r.type]||null:null;if(q)return q=new q,q.read(r,v),q;v&&v.messages&&r&&v.messages.push(new g("renderer:unsupported","Renderers of type '"+(r.type||"unknown")+"' are not supported",{definition:r,context:v}));return null}function h(r,q,v){return r?v&&"web-scene"===v.origin&&"heatmap"===
r.type?(v.messages&&v.messages.push(new a("renderer:unsupported","Renderer of type '"+r.declaredClass+"' are not supported in scenes.",{renderer:r,context:v})),null):r.write(q,v):null}Object.defineProperty(k,"__esModule",{value:!0});var t={simple:d,uniqueValue:e,classBreaks:p,heatmap:n};k.read=l;k.writeTarget=function(r,q,v,x){(r=h(r,{},x))&&f.setDeepValue(v,r,q)};k.write=h;k.fromJSON=function(r,q){return l(r,null,q)}})},"esri/layers/vectorTiles/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),
function(D,k,a,f,g,p){function n(){var h=0===d.length;if(!h){for(var t=g();!h&&6>g()-t;){var r=d[l];if(r){if(!0===r()){var q=e.get(r);d[l]=null;e["delete"](r);q()}l=(l+1)%d.length}else d.splice(l,1),l=(h=0===d.length)?0:l%d.length}h||f(n)}}var d=[],e=new Map,l=0;return function(h){return h?p.create(function(t){d.push(h);e.set(h,t);1===d.length&&f(n)},function(){d[d.indexOf(h)]=null;e["delete"](h)}):p.reject(new TypeError("callback is not a function"))}})},"esri/layers/vectorTiles/core/MapPool":function(){define(["require",
"exports","./ObjectPool"],function(D,k,a){D=function(){function g(p,n){void 0===p&&(p=50);void 0===n&&(n=50);this._pool=new a(Map,!1,function(d){return d.clear()},n,p)}g.prototype.acquire=function(){return this._pool.acquire()};g.prototype.release=function(p){this._pool.release(p)};g.acquire=function(){return f.acquire()};g.release=function(p){return f.release(p)};return g}();var f=new D(100);return D})},"esri/layers/vectorTiles/core/SetPool":function(){define(["require","exports","./ObjectPool"],
function(D,k,a){D=function(){function g(p,n){void 0===p&&(p=50);void 0===n&&(n=50);this._pool=new a(Set,!1,function(d){return d.clear()},n,p)}g.prototype.acquire=function(){return this._pool.acquire()};g.prototype.release=function(p){this._pool.release(p)};g.acquire=function(){return f.acquire()};g.release=function(p){return f.release(p)};return g}();var f=new D(100);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),
function(D,k,a,f,g,p,n,d){function e(h,t,r){if(!h)return null;var q=0,v={};h=h.clone();var x=h.visualVariables,y=null;if("simple"!==h.type){var B=h.valueExpression;if(!h.field&&B){var z="$$fake"+q++,b=p.createFunction(B);v[z]=function(c,m){l.repurposeFromGraphicLikeObject(c.geometry,c.attributes,r);return p.executeFunction(b,{vars:{$feature:l,$view:p.getViewInfo(m)},spatialReference:t})};h.field=z;h.valueExpression=null;y=function(c,m){m.attributes[z]=v[z](m);return c.valueExpression?c.getSymbol(f.fromJSON(m)):
c.getSymbol(m)}}}x&&(h.visualVariables=x.map(function(c){if(c.normalizationField){var m=c.field,u=c.normalizationField,w="$$fake"+q++;v[w]=function(E,G){return E.attributes[m]/E.attributes[u]};c=a({},c);c.field=w;delete c.normalizationField;return c}if(c.valueExpression&&"$view.scale"!==c.valueExpression){var A=c.valueExpression;w="$$fake"+q++;var C=p.createFunction(A);v[w]=function(E,G){l.repurposeFromGraphicLikeObject(E.geometry,E.attributes,r);return p.executeFunction(C,{vars:{$feature:l,$view:p.getViewInfo(G)},
spatialReference:t})};c=a({},c);c.field=w;delete c.valueExpression;return c}return c}));return{renderer:h,normalizingFunctions:v,getSymbolFunction:y}}Object.defineProperty(k,"__esModule",{value:!0});var l=new g;k.createRendererInfo=function(h,t,r){var q=(t=e(h,t,r)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},t.normalizingFunctions),v=t&&t.getSymbolFunction;h=t&&t.renderer||h;t=d.convertVisualVariables(h.visualVariables);return{renderer:h,vvFields:t.vvFields,vvRanges:t.vvRanges,
getValue:function(x,y){var B=q[y];return B?B(x):x.attributes[y]},getSymbol:function(x){return v?v(this.renderer,x):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,x):null}}};k.getNormalizedRenderer=function(h,t,r){return(t=e(h,t,r)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},t.renderer)||h};k.getSymbol=function(h,t){return h.getSymbol(t)};k.isRendererWebGLCompatible=function(h){if(!h||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(h.type))return!1;
if(h.visualVariables){var t=0;for(h=h.visualVariables;t<h.length;t++){var r=h[t];switch(r.type){case "color":case "opacity":if(r.stops&&8<r.stops.length)return!1;break;case "size":if(d.getTypeOfSizeVisualVariable(r)===n.WGLVVFlag.SIZE_FIELD_STOPS&&r.stops&&6<r.stops.length)return!1}}}return!0}})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../renderers ../../../../../core/Accessor ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/aaBoundingRect ../../../../../renderers/support/diffUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/visualVariablesUtils ../../../engine/webgl/WGLFeatureView ../../../engine/webgl/WGLTile ./BaseTileRenderer".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q){function v(x){for(var y in x.diff){var B=x.diff[y];if("collection"===B.type){if(0!==B.changed.length||0!==B.added.length||0!==B.removed.length)return!0}else if("visualVariables"!==y&&"authoringInfo"!==y)return!0}return!1}Object.defineProperty(k,"__esModule",{value:!0});D=function(x){function y(B){return x.call(this)||this}a(y,x);y.prototype.initialize=function(){};y.prototype.createTile=function(B){var z=d.create();this.tileInfoView.getTileBounds(z,B);return new r(B,
z)};y.prototype.disposeTile=function(B){this._featuresView.removeChild(B)};y.prototype.highlight=function(B){return this._featuresView.highlight(B)};y.prototype.hitTest=function(B,z){return this._featuresView.hitTest(B,z)};y.prototype.supportsRenderer=function(B){return null!=B&&l.isRendererWebGLCompatible(B)&&-1!==["simple","class-breaks","unique-value"].indexOf(B.type)};y.prototype.getProcessorConfiguration=function(){var B=this.layer;return{type:"symbol",renderer:B.renderer.toJSON(),devicePixelRatio:window.devicePixelRatio||
1,definitionExpression:B.definitionExpression,outFields:B.outFields.slice().sort(),gdbVersion:B.gdbVersion,historicMoment:B.historicMoment&&B.historicMoment.getTime(),labelingInfo:B.labelingInfo&&B.labelingInfo.map(function(z){return z.toJSON()})}};y.prototype.needsProcessorReconfiguration=function(B){var z=this.configuration;if(!z||z.definitionExpression!==B.definitionExpression||z.outFields.join()!==B.outFields.join())return!0;z=this.configuration&&g.fromJSON(this.configuration.renderer)||null;
B=B&&g.fromJSON(B.renderer)||null;z=e.diff(z,B);if(!z)return!1;switch(z.type){case "complete":return!0;case "partial":if(v(z))return!0;if(z.diff.visualVariables){z=this._featuresView.visualVariablesInfo;var b=this.tileInfoView.tileInfo.spatialReference,c={fields:this.layer.fields.map(function(m){return m.toJSON()})};B=l.getNormalizedRenderer(B,b,c);B=h.convertVisualVariables(B.visualVariables).vvFields;return e.diff(z.vvFields,B)?!0:!1}}};y.prototype.applyConfiguration=function(B,z){var b=g.fromJSON(B.renderer),
c={fields:this.layer.fields.map(function(m){return m.toJSON()})};b=l.getNormalizedRenderer(b,this.tileInfoView.tileInfo.spatialReference,c);this.configuration=B;this._featuresView.visualVariablesInfo=h.convertVisualVariables(b.visualVariables);z&&this._featuresView.disposeWebGLResources()};y.prototype.install=function(B){var z=new t["default"]({highlightOptions:this.highlightOptions,tileInfoView:this.tileInfoView,layer:this.layer,layerView:this.layerView});this._featuresView=z;z.install(B)};y.prototype.uninstall=
function(B){this._featuresView.uninstall(B)};y.prototype.onTileData=function(B){var z=this.tiles.get(B.tileKey);z&&(this._featuresView.onTileData(z,B.data),this.requestUpdate())};y.prototype.onTileDataUpdate=function(B){var z=this.tiles.get(B.tileId);z&&(this._featuresView.onTileDataUpdate(z,B.data),this.requestUpdate())};y.prototype.onTileError=function(B){if(B=this.tiles.get(B.tileKey))this._featuresView.onTileError(B),this.requestUpdate()};y.prototype.getMaterialItems=function(B){return this._featuresView.getMaterialItems(B)};
return y=f([n.subclass()],y)}(n.declared(p,q["default"]));k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLTile":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix/mat2d ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec2 ../DisplayObject ./definitions ./DirtyMap ./DisplayRecordStore ./enums ./number ./Utils ./WGLBuffers ./WGLDisplayList ./WGLDisplayObject ../../tiling/enums ../../tiling/TileKey".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y,B){function z(b,c){return b.sortKey-c.sortKey}return function(b){function c(m,u){var w=b.call(this)||this;w.status=y.TileStatus.INITIALIZED;w._data=null;w.hlDisplayList=null;w._wglBuffers=null;w._dirtyMap=new e["default"];w.coords=[0,0];w.bounds=[0,0,0,0];w.tileTransform={transform:Float32Array[16],screenTransform:Float32Array[16],displayCoord:Float32Array[2],screenCoord:Float32Array[2]};w._hasVisualVariables=!1;w._labelIndex=null;w.tileTransform.screenTransform=
f.create();w.tileTransform.transform=g.create();w.tileTransform.displayCoord=p.create();w.tileTransform.screenCoord=p.create();w.key=B.pool.acquire(m);w.coords[0]=u[0];w.coords[1]=u[3];w.bounds=u;return w}a(c,b);Object.defineProperty(c.prototype,"iconGeometry",{get:function(){return this.getGeometry(h.WGLGeometryType.MARKER)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textGeometry",{get:function(){return this.getGeometry(h.WGLGeometryType.TEXT)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"fillGeometry",{get:function(){return this.getGeometry(h.WGLGeometryType.FILL)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lineGeometry",{get:function(){return this.getGeometry(h.WGLGeometryType.LINE)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"labelGeometry",{get:function(){return this.getGeometry(h.WGLGeometryType.LABEL)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"displayObjects",{get:function(){return this._data.tileDisplayData.displayObjects},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"canDisplay",{get:function(){return!!this.attached&&!!this._data},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isDirty",{get:function(){return this.status===y.TileStatus.MODIFIED},set:function(m){m&&this.status===y.TileStatus.READY?this.setStatus(y.TileStatus.MODIFIED):m||this.status!==y.TileStatus.MODIFIED||this.setStatus(y.TileStatus.READY);this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"hasData",{get:function(){return this.status===y.TileStatus.MODIFIED||this.status===y.TileStatus.READY},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"labelIndex",{get:function(){return this._labelIndex},enumerable:!0,configurable:!0});c.prototype.getGeometry=function(m){return this._wglBuffers&&this._wglBuffers.has(m)?this._wglBuffers.get(m):null};c.prototype.getDisplayList=function(m){switch(m){case h.WGLDrawPhase.HIGHLIGHT:return this.hlDisplayList;default:return this._data&&
this._data.tileDisplayData.displayList}};Object.defineProperty(c.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});c.prototype.setData=function(m,u,w){this._hasVisualVariables=u;m&&m.tileDisplayData?(this._dispRecStore=l["default"].fromTileData(m,this._dirtyMap),this._data=m,m.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(w?y.TileStatus.MODIFIED:y.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(y.TileStatus.READY),this._dirtyMap.markAllDirty()):
(this.clear(),this.setStatus(y.TileStatus.NO_DATA))};c.prototype.patchData=function(m,u){this._data||(this.setData(m.addOrUpdate,this._hasVisualVariables,u),m.addOrUpdate=null);this._patchData(m)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=l["default"].fromTileData(this._data,this._dirtyMap));m.addOrUpdate.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(u?y.TileStatus.MODIFIED:y.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(y.TileStatus.READY)};
c.prototype.commitChanges=function(m){this._data&&this.status===y.TileStatus.READY&&(this._wglBuffers||(this._wglBuffers=new q["default"](m.context,this._hasVisualVariables)),this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._dirtyMap.markAllClean())};c.prototype.setVisibility=function(m,u){for(var w=this._data.tileBufferData.geometries.map(function(R){return{vertexFrom:void 0,vertexTo:void 0,geometry:R}}),A=0;A<m.length;A++)for(var C=m[A],E=0,G=this._data.tileDisplayData.displayObjectRegistry.get(C.id).displayRecords;E<
G.length;E++){var F=G[E];if(null==u||u===F.geometryType){var I=w[F.geometryType],M=I.geometry.vertexBuffer[r.C_VBO_VISIBILITY];if(M){I.vertexFrom=null==I.vertexFrom?F.vertexFrom:Math.min(I.vertexFrom,F.vertexFrom);I.vertexTo=null==I.vertexTo?F.vertexFrom+F.vertexCount:Math.max(I.vertexTo,F.vertexFrom+F.vertexCount);I=F.vertexFrom*M.stride/4;F=F.vertexCount*M.stride/4;for(var Y=0;Y<F;++Y)M.data[I+Y]=C.visibility?4294967295:0}}}C=!1;for(A=0;A<w.length;++A)I=w[A],null!=I.vertexFrom&&null!=I.vertexTo&&
(C=I.vertexTo?I.vertexTo-I.vertexFrom:0,this.setStatus(y.TileStatus.MODIFIED),this._dirtyMap.markDirtyVertices(A,r.C_VBO_VISIBILITY,I.vertexFrom,C),C=!0);C&&this.requestRender()};c.prototype.setVisibilityRange=function(m,u,w,A){w=t.i8888to32(w,A,w,A);var C=A=void 0,E=this._data.tileBufferData.geometries[h.WGLGeometryType.LABEL].vertexBuffer[r.C_VBO_VISIBILITY_RANGE];m=this._data.tileDisplayData.displayObjectRegistry.get(m);u=m.metrics[u];var G=u.range.from;for(u=G+u.range.count;G<u;++G){var F=m.displayRecords[G];
if(F.geometryType===h.WGLGeometryType.LABEL){A=null==A?F.vertexFrom:Math.min(A,F.vertexFrom);C=null==C?F.vertexFrom+F.vertexCount:Math.max(C,F.vertexFrom+F.vertexCount);var I=F.vertexFrom*E.stride/4;F=F.vertexCount*E.stride/4;for(var M=0;M<F;++M)E.data[I+M]=w}}this._dirtyMap.markDirtyVertices(h.WGLGeometryType.LABEL,r.C_VBO_VISIBILITY_RANGE,A,C?C-A:0)};c.prototype.setStatus=function(m){this.status=m;if(m===y.TileStatus.READY||m===y.TileStatus.NO_DATA)this.attached=!0};c.prototype.clear=function(){this._data=
null;this.setStatus(y.TileStatus.INVALID);this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null);this.hlDisplayList&&(this.hlDisplayList=null)};c.prototype.dispose=function(){this.clear()};c.prototype.attach=function(m){return this.canDisplay};c.prototype.detach=function(m){b.prototype.detach.call(this,m)};c.prototype.doRender=function(m){var u=this;this.attached&&(this.commitChanges(m),m.context.setStencilFunction(514,this.stencilRef,255),m.painter.getBrushes(m.drawPhase).forEach(function(w){return w.draw(m,
u)}))};c.prototype.buildHLList=function(m){var u=this;this.hlDisplayList=new v;m.forEach(function(w){u._addToHLDisplayList(u.hlDisplayList,w)})};c.prototype._addToHLDisplayList=function(m,u){if(this._data){var w=this._data.tileDisplayData.displayObjectRegistry.get(u);if(w){var A=[],C=0;for(w=w.displayRecords;C<w.length;C++){var E=w[C].copy();E.meshData=null;E.symbolLevel=0;E.zOrder=0;A.push(E)}A.sort(z);m.addToList(A)}}};c.prototype._rebuildLabelIndex=function(){this._labelIndex=this._initLabelIndex();
for(var m=0,u=this.displayObjects;m<u.length;m++)this._insertIntoLabelIndex(u[m])};c.prototype._insertIntoLabelIndex=function(m){var u=m.anchor;-1!==m.xBucket&&u&&this.labelIndex[m.yBucket][m.xBucket].push(m)};c.prototype._initLabelIndex=function(){for(var m=[],u=0;u<d.TILE_SIZE/d.COLLISION_BUCKET_SIZE;u++){m.push([]);for(var w=0;w<d.TILE_SIZE/d.COLLISION_BUCKET_SIZE;w++)m[u].push([])}return m};c.prototype._patchData=function(m){for(var u=!0,w=0,A=m.remove||[];w<A.length;w++){var C=A[w],E=this._data.tileDisplayData.displayObjectRegistry.get(C);
if(E){this._data.tileDisplayData.displayList.removeFromList(E.displayRecords);for(var G=0,F=E.displayRecords;G<F.length;G++)this._dispRecStore["delete"](F[G]);this._data.tileDisplayData.displayObjectRegistry["delete"](C);E=this._data.tileDisplayData.displayObjects.indexOf(E);this._data.tileDisplayData.displayObjects.splice(E,1)}}w=0;for(A=m.addOrUpdate&&m.addOrUpdate.tileDisplayData&&m.addOrUpdate.tileDisplayData.displayObjects||[];w<A.length;w++){C=A[w];if(E=this._data.tileDisplayData.displayObjectRegistry.get(C.id)){var I=
E.displayRecords.length;for(G=0;G<I;++G){F=E.displayRecords[G];var M=C.displayRecords[G];if(G>=C.displayRecords.length||F.geometryType!==M.geometryType||F.symbolLevel!==M.symbolLevel||F.zOrder!==M.zOrder||F.materialInfo.materialKey!==M.materialInfo.materialKey)this._dispRecStore["delete"](E.displayRecords[G]),G<C.displayRecords.length&&(E.displayRecords[G]=void 0)}E.displayRecords.length=C.displayRecords.length}else E=new x(C.id),this._data.tileDisplayData.displayObjectRegistry.set(C.id,E),this._data.tileDisplayData.displayObjects.push(E);
I=C.displayRecords.length;for(G=0;G<I;++G){M=C.displayRecords[G];(F=E.displayRecords[G])?(F.meshData=M.meshData,F.materialInfo=M.materialInfo):(F=M.copy(),F.vertexFrom=void 0,F.indexFrom=void 0,E.displayRecords[G]=F);var Y=m.addOrUpdate.tileBufferData.geometries[M.geometryType];u=this._dispRecStore.setMeshData(F,M,Y.vertexBuffer,Y.indexBuffer)&&u}}return u};return c}(n)})},"esri/layers/vectorTiles/views/2d/engine/webgl/DirtyMap":function(){define(["require","exports","./Utils"],function(D,k,a){function f(g,
p,n){g.allDirty||(null!=g.from&&null!=g.count?(g.from=Math.min(g.from,p),g.count=Math.max(g.from+g.count,p+n)-g.from):(g.from=p,g.count=n))}Object.defineProperty(k,"__esModule",{value:!0});D=function(){function g(){this._dirties=a.createGeometryData(void 0,function(p){return{indices:{from:null,count:null,allDirty:!1}}},function(p,n){return{vertices:{from:null,count:null,allDirty:!1}}})}g.prototype.markAllClean=function(){for(var p=0,n=this._dirties;p<n.length;p++){var d=n[p];d.data.indices.from=null;
d.data.indices.count=null;d.data.indices.allDirty=!1;for(var e in d.buffers)d.buffers[e].data.vertices.from=null,d.buffers[e].data.vertices.count=null,d.buffers[e].data.vertices.allDirty=!1}};g.prototype.markAllDirty=function(){for(var p=0,n=this._dirties;p<n.length;p++){var d=n[p];d.data.indices.allDirty=!0;for(var e in d.buffers)d.buffers[e].data.vertices.allDirty=!0}};g.prototype.forEach=function(p){for(var n=new Map,d=0;d<this._dirties.length;++d){var e=this._dirties[d],l=new Map,h;for(h in e.buffers){var t=
e.buffers[h].data.vertices;(t.allDirty||null!=t.from&&null!=t.count)&&l.set(h,t)}e=e.data.indices;t=void 0;t=e.allDirty||null!=e.from&&null!=e.count?{indices:e,vertices:l}:{indices:void 0,vertices:l};(t.indices||0<t.vertices.size)&&n.set(d,t)}n.forEach(function(r,q){p({indices:r.indices||null,vertices:0<r.vertices.size?r.vertices:null},q)})};g.prototype.markDirtyIndices=function(p,n,d){f(this._dirties[p].data.indices,n,d)};g.prototype.markDirtyVertices=function(p,n,d,e){f(this._dirties[p].buffers[n].data.vertices,
d,e)};return g}();k["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/DisplayRecordStore":function(){define(["require","exports","dojo/has","./FreeList","./Utils"],function(D,k,a,f,g){function p(d){d=d.getStrides();var e={},l;for(l in d)e[n[l]]=d[l];return e}Object.defineProperty(k,"__esModule",{value:!0});var n=["FILL","LINE","MARKER","TEXT","LABEL"];D=function(){function d(e,l,h,t){this._strides=e;this._displayList=l;this._vertexAlignments={};this._freeListsAndStorage={};this._dirtyMap=
null;this._dirtyMap=h;for(var r in e){h=l=!1;this._freeListsAndStorage[r]={vtxFreeList:t?new f.FreeList(t):null,idxFreeList:t?new f.FreeList(t):null,vertexBuffers:{},indexBuffer:t?new Uint32Array(t):null};for(var q in e[r])this._freeListsAndStorage[r].vertexBuffers[q]={data:t?new Uint32Array(Math.floor(t*e[r][q]/4)):null,stride:e[r][q]},2===e[r][q]%4?l=!0:0!==e[r][q]%4&&(h=!0);this._vertexAlignments[r]=h?4:l?2:1}}d.fromTileData=function(e,l){var h=p(e),t=[0,0,0,0,0],r=[0,0,0,0,0],q=[];e.tileDisplayData.displayObjectRegistry.forEach(function(m){q.push(m)});
for(var v=0;v<q.length;v++)for(var x=0,y=q[v].displayRecords;x<y.length;x++){var B=y[x];t[B.geometryType]=Math.max(t[B.geometryType],B.vertexFrom+B.vertexCount);r[B.geometryType]=Math.max(r[B.geometryType],B.indexFrom+B.indexCount)}h=new d(h,e.tileDisplayData.displayList,l,null);for(v=0;v<e.tileBufferData.geometries.length;++v){x=t[v];var z=r[v];B=e.tileBufferData.geometries[v];y=h._storageFor(n[v]);var b=e.tileBufferData.geometries[v].indexBuffer;y.indexBuffer=b;y.idxFreeList=new f.FreeList(b.length);
y.idxFreeList.allocate(z);z=void 0;for(var c in B.vertexBuffer)B=e.tileBufferData.geometries[v].vertexBuffer[c],y.vertexBuffers[c].data=B.data,y.vertexBuffers[c].stride=B.stride,z=4*B.data.length/B.stride;y.vtxFreeList=new f.FreeList(z);y.vtxFreeList.allocate(x)}return h};d.prototype["delete"]=function(e){var l=n[e.geometryType];this._freeVertices(l,e.vertexFrom,e.vertexCount);this._freeIndices(l,e.indexFrom,e.indexCount);this._displayList.removeFromList(e);e.vertexFrom=void 0;e.indexFrom=void 0};
d.prototype.setMeshData=function(e,l,h,t){var r=n[e.geometryType];e.meshData=null;var q=void 0,v=void 0;void 0===e.vertexFrom?(v=this._align(r,l.vertexCount),q=this._allocateVertices(r,v)):l.vertexCount>e.vertexCount?(this._freeVertices(r,e.vertexFrom,e.vertexCount),v=this._align(r,l.vertexCount),q=this._allocateVertices(r,v)):l.vertexCount===e.vertexCount?(q=e.vertexFrom,v=e.vertexCount):(this._freeVertices(r,e.vertexFrom+l.vertexCount,e.vertexCount-l.vertexCount),q=e.vertexFrom,v=l.vertexCount);
var x=!0,y=void 0,B=void 0;void 0===e.indexFrom?(B=l.indexCount,y=this._allocateIndices(r,B)):l.indexCount>e.indexCount?(this._displayList.removeFromList(e),this._freeIndices(r,e.indexFrom,e.indexCount),B=l.indexCount,y=this._allocateIndices(r,B)):l.indexCount===e.indexCount?(x=!1,y=e.indexFrom,B=e.indexCount):(this._displayList.removeFromList(e),this._freeIndices(r,e.indexFrom+l.indexCount,e.indexCount-l.indexCount),y=e.indexFrom,B=l.indexCount);if(-1!==q&&-1!==y){r=this._storageFor(r);g.copyMeshData(q,
y,r.vertexBuffers,r.indexBuffer,l,h,t);e.vertexFrom=q;e.indexFrom=y;e.vertexCount=l.vertexCount;e.indexCount=l.indexCount;if(this._dirtyMap){this._dirtyMap.markDirtyIndices(e.geometryType,e.indexFrom,e.indexCount);for(var z in h)this._dirtyMap.markDirtyVertices(e.geometryType,z,e.vertexFrom,e.vertexCount)}x&&this._displayList.addToList(e);return!0}-1!==q&&this._freeVertices(r,q,v);-1!==y&&this._freeIndices(r,y,B);e.setMeshDataFromBuffers(l,h,t);e.vertexFrom=void 0;e.vertexCount=0;e.indexFrom=void 0;
e.indexCount=0;return!1};d.prototype._allocateVertices=function(e,l){var h=this._storageFor(e),t=h.vtxFreeList.allocate(l);return-1===t||.5<h.vtxFreeList.fragmentation?-1:t};d.prototype._freeVertices=function(e,l,h){var t=this._storageFor(e);t.vtxFreeList.free(l,h);if(a("esri-feature-tiles-debug"))for(var r in t.vertexBuffers){var q=t.vertexBuffers[r].data,v=this._stridesFor(e,r),x=l*v/4;v=h*v/4;for(var y=x;y<x+v;++y)q[y]=0}};d.prototype._freeIndices=function(e,l,h){e=this._storageFor(e);e.idxFreeList.free(l,
h);if(a("esri-feature-tiles-debug")){e=e.indexBuffer;for(var t=l;t<l+h;++t)e[t]=0}};d.prototype._align=function(e,l){var h=l%this._vertexAlignments[e];return 0===h?l:l+(this._vertexAlignments[e]-h)};d.prototype._allocateIndices=function(e,l){var h=this._storageFor(e),t=h.idxFreeList.allocate(l);return-1===t||.5<h.idxFreeList.fragmentation?-1:t};d.prototype._storageFor=function(e){return this._freeListsAndStorage[e]};d.prototype._stridesFor=function(e,l){return this._strides[e][l]};return d}();k["default"]=
D})},"esri/layers/vectorTiles/views/2d/engine/webgl/FreeList":function(){define(["require","exports"],function(D,k){Object.defineProperty(k,"__esModule",{value:!0});var a=function(){function g(p){this._largestRange=null;this._parent=p;this._updateLargestRange()}Object.defineProperty(g.prototype,"largestRange",{get:function(){return this._largestRange},enumerable:!0,configurable:!0});g.prototype.rangeCreated=function(p){if(!this._largestRange||p.count>this._largestRange.count)this._largestRange=p};
g.prototype.rangeResized=function(p,n,d){if(p===this._largestRange)p.count<d&&this._updateLargestRange();else if(!this._largestRange||p.count>this._largestRange.count)this._largestRange=p};g.prototype.findBestRange=function(p){for(var n=this._parent._freeHead,d=null;null!==n;)n.count>=p&&(!d||n.count-p<d.count-p)&&(d=n),n=n.next;return d};g.prototype.findAdjacentRanges=function(p,n){for(var d=!0,e=!1,l=null,h=this._parent._freeHead;d&&!e;){var t=null!==h?h.from:this._parent._size;p>=(null!==l?l.from+
l.count:0)&&p+n<=t?(d=!1,e=!0):null!==h?(l=h,h=h.next):d=!1}return[l,h]};g.prototype._updateLargestRange=function(){for(var p=null,n=this._parent._freeHead;null!==n;){if(!p||n.count>p.count)p=n;n=n.next}this._largestRange=p};return g}(),f=function(){function g(p,n){this._allocated=0;this._size=p;this._freeHead=0<p?{from:0,count:p,prev:null,next:null}:null;this._bookKeeper=n||new a(this);this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}g.prototype.allocate=function(p){var n=this._bookKeeper.findBestRange(p);
if(null===n)return-1;var d=n.from,e=n.count;n.from+=p;n.count-=p;this._bookKeeper.rangeResized(n,d,e);this._allocated+=p;0===n.count&&(p=null!==n.prev?this._freeHead:n.next,g._removeRange(n),this._freeHead=p);return d};g.prototype.free=function(p,n){var d=this._bookKeeper.findAdjacentRanges(p,n),e=d[0];d=d[1];var l={from:p,count:n,prev:e,next:d};null!==e&&(e.next=l);null!==d&&(d.prev=l);this._bookKeeper.rangeCreated(l);this._allocated-=n;if(null!==d&&l.from+l.count===d.from){var h=l.from,t=l.count;
g._fuse(l,d);g._removeRange(d);this._bookKeeper.rangeResized(l,h,t);this._bookKeeper.rangeResized(d,void 0,0)}null!==e&&e.from+e.count===l.from&&(h=e.from,t=e.count,g._fuse(e,l),g._removeRange(l),this._bookKeeper.rangeResized(e,h,t),this._bookKeeper.rangeResized(l,void 0,0));this._freeHead=null!==l.prev?this._freeHead:l};Object.defineProperty(g.prototype,"fragmentation",{get:function(){var p=this._size-this._allocated;return 0===p?0:1-this._bookKeeper.largestRange.count/p},enumerable:!0,configurable:!0});
g._removeRange=function(p){null!==p.prev?null!==p.next?(p.prev.next=p.next,p.next.prev=p.prev):p.prev.next=null:null!==p.next&&(p.next.prev=null)};g._fuse=function(p,n){p.count+=n.count;p.next=n.next;n.from+=n.count;n.count=0;null!==n.next&&(n.next.prev=p)};return g}();k.FreeList=f})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLBuffers":function(){define(["require","exports","./Utils","../../../webgl/BufferObject"],function(D,k,a,f){Object.defineProperty(k,"__esModule",{value:!0});D=function(){function g(p,
n){this.geometryMap=a.createGeometryData(n,function(d){return{indexBuffer:f.createIndex(p,35044),vao:null}},function(d,e){return{vertexBuffer:f.createVertex(p,a.C_VBO_INFO[e])}})}g.prototype.dispose=function(){for(var p in this.geometryMap){var n=this.geometryMap[p];n.data.vao&&n.data.vao.dispose(!1);n.data.indexBuffer&&n.data.indexBuffer.dispose();for(var d in n.buffers)n.buffers[d]&&n.buffers[d].data.vertexBuffer.dispose()}};g.prototype.get=function(p){var n=this.geometryMap[p];p={};for(var d in n.buffers)p[d]=
n.buffers[d].data.vertexBuffer;return{indexBuffer:n.data.indexBuffer,get vao(){return n.data.vao},set vao(e){n.data.vao=e},vertexBufferMap:p}};g.prototype.has=function(p){return null!=this.geometryMap[p]};g.prototype.upload=function(p,n){var d=this;n.forEach(function(e,l){e.indices&&(e.indices.allDirty?d._uploadIndices(p,l):null!=e.indices.from&&null!=e.indices.count&&d._uploadIndices(p,l,e.indices.from,e.indices.count));e.vertices&&e.vertices.forEach(function(h,t){h.allDirty?d._uploadVertices(p,
l,t):null!=h.from&&null!=h.count&&d._uploadVertices(p,l,t,h.from,h.count)})})};g.prototype._uploadVertices=function(p,n,d,e,l){var h=this.geometryMap[n];h&&(n=p.geometries[n].vertexBuffer[d])&&(p=n.stride,n=n.data.buffer,h.buffers[d]&&0<n.byteLength&&(null!=e&&null!=l?h.buffers[d].data.vertexBuffer.setSubData(n,e*p,e*p,(e+l)*p):h.buffers[d].data.vertexBuffer.setData(n)))};g.prototype._uploadIndices=function(p,n,d,e){var l=this.geometryMap[n];l&&(p=p.geometries[n].indexBuffer.buffer,l.data.indexBuffer&&
0<p.byteLength&&(null!=d&&null!=e?l.data.indexBuffer.setSubData(p,4*d,4*d,4*(d+e)):l.data.indexBuffer.setData(p)))};return g}();k["default"]=D})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(D,k,a){return function(){function f(g,p,n,d){this.set(g,p,n,d)}f.from=function(g,p,n,d){return f.pool.acquire(g,p,n,d)};f.getId=function(g,p,n,d){return"object"===typeof g?g.level+"/"+g.row+"/"+g.col+"/"+g.world:g+"/"+p+"/"+n+"/"+
d};Object.defineProperty(f.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});f.prototype.equals=function(g){return this.level===g.level&&this.row===g.row&&this.col===g.col&&this.world===g.world};f.prototype.release=function(){this.world=this.col=this.row=this.level=0};f.prototype.set=function(g,p,n,d){null==g?this.world=this.col=this.row=this.level=0:"object"===
typeof g?(this.level=g.level||0,this.row=g.row||0,this.col=g.col||0,this.world=g.world||0):"string"===typeof g?(g=g.split("/"),p=g[1],n=g[2],d=g[3],this.level=parseFloat(g[0]),this.row=parseFloat(p),this.col=parseFloat(n),this.world=parseFloat(d)):(this.level=+g,this.row=+p,this.col=+n,this.world=+d||0);return this};f.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};f.prototype.getChildKeys=function(){var g=this.level+1,p=this.row<<1,n=this.col<<1,d=this.world;
return[f.pool.acquire(g,p,n,d),f.pool.acquire(g,p,n+1,d),f.pool.acquire(g,p+1,n,d),f.pool.acquire(g,p+1,n+1,d)]};f.prototype._compare=function(g){return this.row<g.row?-1:this.row>g.row?1:this.col<g.col?-1:this.col>g.col?1:0};f.sort=function(g){return g.map(function(p){return f.from(p)}).sort(function(p,n){return p._compare(n)}).map(function(p){return p.id})};f.pool=new a(f,!0,null,25,50);return f}()})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/BaseTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators ../../../tiling/enums".split(" "),
function(D,k,a,f,g,p,n,d){Object.defineProperty(k,"__esModule",{value:!0});D=function(e){function l(h){h=e.call(this)||this;h.tiles=new Map;h.layer=null;return h}a(l,e);l.prototype.destroy=function(){this.tiles.clear();this.layer=this.layerView=this.tileInfoView=this.highlightOptions=this.configuration=this.tiles=null};Object.defineProperty(l.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0});l.prototype.acquireTile=function(h){var t=this,r=this.createTile(h);
r.once("attach",function(){return t.notifyChange("updating")});this.tiles.set(h.id,r);return r};l.prototype.forEachTile=function(h){this.tiles.forEach(h)};l.prototype.releaseTile=function(h){this.tiles["delete"](h.key.id);this.disposeTile(h)};l.prototype.isUpdating=function(){var h=!0;this.tiles.forEach(function(t){h=h&&t.status!==d.TileStatus.INITIALIZED});return!h};l.prototype.requestUpdate=function(){this.layerView.requestUpdate()};f([n.property()],l.prototype,"configuration",void 0);f([n.property()],
l.prototype,"highlightOptions",void 0);f([n.property()],l.prototype,"layer",void 0);f([n.property()],l.prototype,"layerView",void 0);f([n.property()],l.prototype,"tileInfoView",void 0);f([n.property()],l.prototype,"updating",null);return l=f([n.subclass()],l)}(n.declared(g,p));k["default"]=D})},"esri/layers/vectorTiles/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),
function(D,k,a,f,g,p,n){return function(d){function e(){var l=d.call(this)||this;l.handles=new p;return l}a(e,d);e.prototype.destroy=function(){this.handles.destroy()};f([n.property({readOnly:!0})],e.prototype,"handles",void 0);return e=f([n.subclass("esri.core.HandleOwner")],e)}(n.declared(g))})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
function(D,k,a,f,g,p,n){return function(d){function e(l){l=d.call(this)||this;l._groups=new Map;return l}a(e,d);e.prototype.destroy=function(){this.removeAll()};Object.defineProperty(e.prototype,"size",{get:function(){var l=0;this._groups.forEach(function(h){l+=h.length});return l},enumerable:!0,configurable:!0});e.prototype.add=function(l,h){if(!this._isHandle(l)&&!Array.isArray(l)&&!p.isCollection(l))return this;var t=this._getOrCreateGroup(h);Array.isArray(l)||p.isCollection(l)?l.forEach(function(r){return t.push(r)}):
t.push(l);this.notifyChange("size");return this};e.prototype.has=function(l){return this._groups.has(this._ensureGroupKey(l))};e.prototype.remove=function(l){if(Array.isArray(l)||p.isCollection(l))return l.forEach(this.remove,this),this;if(!this.has(l))return this;for(var h=this._getGroup(l),t=0;t<h.length;t++)h[t].remove();this._deleteGroup(l);this.notifyChange("size");return this};e.prototype.removeAll=function(){this._groups.forEach(function(l){for(var h=0;h<l.length;h++)l[h].remove()});this._groups.clear();
this.notifyChange("size");return this};e.prototype._isHandle=function(l){return l&&!!l.remove};e.prototype._getOrCreateGroup=function(l){if(this.has(l))return this._getGroup(l);var h=[];this._groups.set(this._ensureGroupKey(l),h);return h};e.prototype._getGroup=function(l){return this._groups.get(this._ensureGroupKey(l))};e.prototype._deleteGroup=function(l){return this._groups["delete"](this._ensureGroupKey(l))};e.prototype._ensureGroupKey=function(l){return l||"_default_"};f([n.property({readOnly:!0})],
e.prototype,"size",null);return e=f([n.subclass("esri.core.Handles")],e)}(n.declared(g))})},"esri/layers/vectorTiles/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(D,k,a,f,g,p,n){return function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l.color=new g([0,255,255]);l.haloOpacity=
1;l.fillOpacity=.5;return l}a(e,d);f([n.property({type:g})],e.prototype,"color",void 0);f([n.property()],e.prototype,"haloOpacity",void 0);f([n.property()],e.prototype,"fillOpacity",void 0);return e=f([n.subclass("esri.views.2d.support.HighlightOptions")],e)}(n.declared(p))})},"esri/layers/vectorTiles/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v){var x=d({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(y){function B(b){b=y.call(this)||this;b.dpi=96;b.format=null;b.origin=null;b.minScale=0;b.maxScale=0;b.size=null;b.spatialReference=null;return b}f(B,y);var z=B;B.create=function(b){void 0===b&&(b={size:256,spatialReference:p.SpatialReference.WebMercator});
var c=b.resolutionFactor||1,m=b.scales,u=b.size||256;b=b.spatialReference||p.SpatialReference.WebMercator;var w=r.getInfo(b);w=w?new p.Point(w.origin[0],w.origin[1],b):new p.Point(0,0,b);var A=1/(39.37*t.getMetersPerUnitForSR(b)*96),C=[];if(m)for(var E=0;E<m.length;E++){var G=m[E],F=G*A;C.push({level:E,scale:G,resolution:F})}else for(G=r.isGeographic(b)?512/u*1.47748799285417E8:256/u*5.91657527591555E8,m=Math.ceil(24/c),C.push({level:0,scale:G,resolution:G*A}),E=1;E<m;E++)G/=Math.pow(2,c),F=G*A,C.push({level:E,
scale:G,resolution:F});return new z({dpi:96,lods:C,origin:w,size:u,spatialReference:b})};Object.defineProperty(B.prototype,"isWrappable",{get:function(){var b=this.spatialReference,c=this.origin;if(b&&c){var m=r.getInfo(b);return b.isWrappable&&Math.abs(m.origin[0]-c.x)<=m.dx}return!1},enumerable:!0,configurable:!0});B.prototype.readOrigin=function(b,c){return p.Point.fromJSON(a({spatialReference:c.spatialReference},b))};Object.defineProperty(B.prototype,"lods",{set:function(b){var c=this,m=0,u=0,
w=[];this._levelToLOD={};b&&(m=-Infinity,u=Infinity,b.forEach(function(A){w.push(A.scale);m=A.scale>m?A.scale:m;u=A.scale<u?A.scale:u;c._levelToLOD[A.level]=A}));this._set("scales",w);this._set("minScale",m);this._set("maxScale",u);this._set("lods",b);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});B.prototype.readSize=function(b,c){return[c.cols,c.rows]};B.prototype.writeSize=function(b,c){c.cols=b[0];c.rows=b[0]};B.prototype.zoomToScale=function(b){var c=this.scales;if(0>=b)return c[0];
if(b>=c.length)return c[c.length-1];var m=Math.round(b);return c[m]+(m-b)*(c[Math.round(b-.5)]-c[m])};B.prototype.scaleToZoom=function(b){for(var c=this.scales,m=c.length-1,u=0;u<m;u++){var w=c[u],A=c[u+1];if(w<=b)break;if(A===b)return u+1;if(w>b&&A<b)return u+1-(b-A)/(w-A)}return u};B.prototype.snapScale=function(b,c){void 0===c&&(c=.95);var m=this.scaleToZoom(b);return m%Math.floor(m)>=c?this.zoomToScale(Math.ceil(m)):this.zoomToScale(Math.floor(m))};B.prototype.tileAt=function(b,c,m,u){var w=this.lodAt(b);
if(!w)return null;if("number"===typeof c){var A=c;c=m}else{if(r.equals(c.spatialReference,this.spatialReference))A=c.x,c=c.y;else{u=q.project(c,this.spatialReference);if(!u)return null;A=u.x;c=u.y}u=m}m=w.resolution*this.size[0];w=w.resolution*this.size[1];u||(u={id:null,level:0,row:0,col:0,extent:h.create()});u.level=b;u.row=Math.floor((this.origin.y-c)/w+.001);u.col=Math.floor((A-this.origin.x)/m+.001);this.updateTileInfo(u);return u};B.prototype.updateTileInfo=function(b){var c=this.lodAt(b.level),
m=c.resolution*this.size[0];c=c.resolution*this.size[1];b.id=b.level+"/"+b.row+"/"+b.col;b.extent||(b.extent=h.create());b.extent[0]=this.origin.x+b.col*m;b.extent[1]=this.origin.y-(b.row+1)*c;b.extent[2]=b.extent[0]+m;b.extent[3]=b.extent[1]+c};B.prototype.upsampleTile=function(b){var c=this._upsampleLevels[b.level];if(!c||-1===c.parentLevel)return!1;b.level=c.parentLevel;b.row=Math.floor(b.row/c.factor+.001);b.col=Math.floor(b.col/c.factor+.001);this.updateTileInfo(b);return!0};B.prototype.getTileBounds=
function(b,c){var m=this.lodAt(c.level).resolution,u=m*this.size[0];m*=this.size[1];b[0]=this.origin.x+c.col*u;b[1]=this.origin.y-(c.row+1)*m;b[2]=b[0]+u;b[3]=b[1]+m;return b};B.prototype.lodAt=function(b){return this._levelToLOD&&this._levelToLOD[b]||null};B.prototype.clone=function(){return z.fromJSON(this.write({}))};B.prototype._initializeUpsampleLevels=function(){var b=this.lods;this._upsampleLevels=[];for(var c=null,m=0;m<b.length;m++){var u=b[m];this._upsampleLevels[u.level]={parentLevel:c?
c.level:-1,factor:c?c.resolution/u.resolution:0};c=u}};g([e.property({type:Number,json:{write:!0}})],B.prototype,"compressionQuality",void 0);g([e.property({type:Number,json:{write:!0}})],B.prototype,"dpi",void 0);g([e.property({type:String,json:{read:x.read,write:x.write}})],B.prototype,"format",void 0);g([e.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],B.prototype,"isWrappable",null);g([e.property({type:p.Point,json:{write:!0}})],B.prototype,"origin",void 0);g([e.reader("origin")],
B.prototype,"readOrigin",null);g([e.property({type:[v],value:null,json:{write:!0}})],B.prototype,"lods",null);g([e.property({readOnly:!0})],B.prototype,"minScale",void 0);g([e.property({readOnly:!0})],B.prototype,"maxScale",void 0);g([e.property({readOnly:!0})],B.prototype,"scales",void 0);g([e.property({cast:function(b){return Array.isArray(b)?b:"number"===typeof b?[b,b]:[256,256]}})],B.prototype,"size",void 0);g([e.reader("size",["rows","cols"])],B.prototype,"readSize",null);g([e.writer("size",
{cols:{type:l.Integer},rows:{type:l.Integer}})],B.prototype,"writeSize",null);g([e.property({type:p.SpatialReference,json:{write:!0}})],B.prototype,"spatialReference",void 0);return B=z=g([e.subclass("esri.layers.support.TileInfo")],B)}(e.declared(n))})},"esri/layers/vectorTiles/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(D,k,a,f,g,p,n){return function(d){function e(h){h=d.call(this,h)||this;h.level=0;h.levelValue=null;h.resolution=0;h.scale=0;return h}a(e,d);var l=e;e.prototype.clone=function(){return new l({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};f([p.property({type:n.Integer,json:{write:!0}})],e.prototype,"level",void 0);f([p.property({type:String,json:{write:!0}})],e.prototype,"levelValue",void 0);f([p.property({type:Number,json:{write:!0}})],e.prototype,
"resolution",void 0);f([p.property({type:Number,json:{write:!0}})],e.prototype,"scale",void 0);return e=l=f([p.subclass("esri.layers.support.LOD")],e)}(p.declared(g))})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(D,k,a,f,g,p,n){var d=new p("0/0/0/0"),e=function(){function h(t,r,q,v,x,y,B,z){this.x=t;this.ymin=r;this.ymax=q;this.invM=v;this.leftAdjust=
x;this.rightAdjust=y;this.leftBound=B;this.rightBound=z}h.create=function(t,r){if(t[1]>r[1]){var q=[r,t];t=q[0];r=q[1]}q=t[0];var v=t[1],x=r[0],y=r[1],B=x-q,z=y-v;z=0!==z?B/z:0;var b=(Math.ceil(v)-v)*z,c=(Math.floor(v)-v)*z;return new h(q,Math.floor(v),Math.ceil(y),z,0>B?b:c,0>B?c:b,0>B?x:q,0>B?q:x)};h.prototype.incrRow=function(){this.x+=this.invM};h.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};h.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,
this.rightBound)};return h}(),l=[[0,0],[0,0],[0,0],[0,0]];return function(){function h(t,r){var q=this;this.tileInfo=t;this.fullExtent=r;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var v=t.lods.slice();v.sort(function(y,B){return B.scale-y.scale});var x=this._lodInfos=v.map(function(y){return f.create(t,y,r)});v.forEach(function(y,B){q._infoByLevel[y.level]=x[B];q._infoByScale[y.scale]=x[B];q.scales[B]=y.scale},this);this._wrap=t.isWrappable}h.prototype.getLODInfoAt=
function(t){return this._infoByLevel[t.level]};h.prototype.getTileBounds=function(t,r,q){void 0===q&&(q=!1);d.set(r);return(r=this._infoByLevel[d.level])?r.getTileBounds(t,d,q):t};h.prototype.getTileCoords=function(t,r,q){void 0===q&&(q=!1);d.set(r);return(r=this._infoByLevel[d.level])?r.getTileCoords(t,d,q):t};h.prototype.getTileCoverage=function(t,r,q){void 0===r&&(r=192);void 0===q&&(q="closest");q="closest"===q?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale);var v=g.pool.acquire(q),
x=this._wrap;var y=Infinity;var B=-Infinity,z=v.spans;l[0][0]=l[0][1]=l[1][1]=l[3][0]=-r;l[1][0]=l[2][0]=t.size[0]+r;l[2][1]=l[3][1]=t.size[1]+r;for(r=0;r<l.length;r++){var b=l[r];t.toMap(b,b);b[0]=q.getColumnForX(b[0]);b[1]=q.getRowForY(b[1])}t=[];b=3;for(r=0;4>r;r++){if(l[r][1]!==l[b][1]){var c=e.create(l[r],l[b]);y=Math.min(c.ymin,y);B=Math.max(c.ymax,B);void 0===t[c.ymin]&&(t[c.ymin]=[]);t[c.ymin].push(c)}b=r}if(null==y||null==B||100<B-y)return null;for(b=[];y<B;){null!=t[y]&&(b=b.concat(t[y]));
var m=Infinity;var u=-Infinity;for(r=b.length-1;0<=r;r--)c=b[r],m=Math.min(m,c.getLeftCol()),u=Math.max(u,c.getRightCol());m=Math.floor(m);u=Math.floor(u);if(y>=q.first[1]&&y<=q.last[1])if(x)if(q.size[0]<q.worldSize[0])for(c=Math.floor(u/q.worldSize[0]),r=Math.floor(m/q.worldSize[0]);r<=c;r++)z.push(new n(y,Math.max(q.getFirstColumnForWorld(r),m),Math.min(q.getLastColumnForWorld(r),u)));else z.push(new n(y,m,u));else m>q.last[0]||u<q.first[0]||(m=Math.max(m,q.first[0]),u=Math.min(u,q.last[0]),z.push(new n(y,
m,u)));y+=1;for(r=b.length-1;0<=r;r--)c=b[r],c.ymax>=y?c.incrRow():b.splice(r,1)}return v};h.prototype.getTileIdAtParent=function(t,r){var q=p.pool.acquire(r),v=this._infoByLevel[q.level];if(t.resolution<v.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+t.resolution+" is not a parent resolution of "+v.resolution);return t.resolution===v.resolution?q.id:p.getId(t.level,Math.floor(q.row*v.resolution/t.resolution+.01),Math.floor(q.col*v.resolution/t.resolution+.01),
q.world)};h.prototype.getTileParentId=function(t){t=p.pool.acquire(t);var r=this._lodInfos.indexOf(this._infoByLevel[t.level])-1;if(0>r)return p.pool.release(t),null;r=this.getTileIdAtParent(this._lodInfos[r],t);p.pool.release(t);return r};h.prototype.getTileResolution=function(t){return(t=this._infoByLevel[t.level])?t.resolution:-1};h.prototype.getTileScale=function(t){return(t=this._infoByLevel[t.level])?t.scale:-1};h.prototype.intersects=function(t,r){var q=p.pool.acquire(r),v=this._infoByLevel[q.level],
x=t.lodInfo;if(x.resolution>v.resolution){var y=p.pool.acquire(this.getTileIdAtParent(x,q)),B=x.denormalizeCol(y.col,y.world),z=t.spans.some(function(E){return E.row===y.row&&E.colFrom<=B&&E.colTo>=B});p.pool.release(q);p.pool.release(y);return z}if(x.resolution<v.resolution){var b=t.spans.reduce(function(E,G){E[0]=Math.min(E[0],G.row);E[1]=Math.max(E[1],G.row);E[2]=Math.min(E[2],G.colFrom);E[3]=Math.max(E[3],G.colTo);return E},[Infinity,-Infinity,Infinity,-Infinity]);z=b[0];var c=b[1],m=b[2];b=b[3];
var u=v.denormalizeCol(q.col,q.world),w=x.getColumnForX(v.getXForColumn(u)),A=x.getRowForY(v.getYForRow(q.row));u=x.getColumnForX(v.getXForColumn(u+1))-1;v=x.getRowForY(v.getYForRow(q.row+1))-1;p.pool.release(q);return!(w>b||u<m||A>c||v<z)}var C=x.denormalizeCol(q.col,q.world);z=t.spans.some(function(E){return E.row===q.row&&E.colFrom<=C&&E.colTo>=C});p.pool.release(q);return z};h.prototype.normalizeBounds=function(t,r,q){t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];this._wrap&&(r=a.getInfo(this.tileInfo.spatialReference),
q=-q*(r.valid[1]-r.valid[0]),t[0]+=q,t[2]+=q);return t};h.prototype.getSmallestInfoForScale=function(t){var r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(var q=1;q<r.length-1;q++)if(t>r[q]+1E-6)return this._infoByScale[r[q-1]];return this._infoByScale[r[r.length-1]]};h.prototype.getClosestInfoForScale=function(t){var r=this.scales;this._infoByScale[t]||(t=r.reduce(function(q,v,x,y){return Math.abs(v-t)<Math.abs(q-t)?v:q},r[0]));return this._infoByScale[t]};
return h}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(D,k,a,f){function g(n,d,e){n[0]=d;n[1]=e;return n}var p=new f("0/0/0/0");return function(){function n(d,e,l,h,t,r,q,v,x,y,B,z){this.level=d;this.resolution=e;this.scale=l;this.origin=h;this.first=t;this.last=r;this.size=q;this.norm=v;this.worldStart=x;this.worldEnd=y;this.worldSize=B;this.wrap=z}n.create=function(d,e,l){var h=
a.getInfo(d.spatialReference),t=[d.origin.x,d.origin.y],r=[d.size[0]*e.resolution,d.size[1]*e.resolution],q=[-Infinity,-Infinity],v=[Infinity,Infinity],x=[Infinity,Infinity];l&&(g(q,Math.max(0,Math.floor((l.xmin-t[0])/r[0])),Math.max(0,Math.floor((t[1]-l.ymax)/r[1]))),g(v,Math.max(0,Math.floor((l.xmax-t[0])/r[0])),Math.max(0,Math.floor((t[1]-l.ymin)/r[1]))),g(x,v[0]-q[0]+1,v[1]-q[1]+1));if(d.isWrappable){d=[Math.ceil(Math.round(2*h.origin[1]/e.resolution)/d.size[0]),x[1]];h=[Math.floor((h.origin[0]-
t[0])/r[0]),q[1]];l=[d[0]+h[0]-1,v[1]];var y=!0}else h=q,l=v,d=x,y=!1;return new n(e.level,e.resolution,e.scale,t,q,v,x,r,h,l,d,y)};n.prototype.normalizeCol=function(d){if(!this.wrap)return d;var e=this.worldSize[0];return 0>d?e-1-Math.abs((d+1)%e):d%e};n.prototype.denormalizeCol=function(d,e){return this.wrap?this.worldSize[0]*e+d:d};n.prototype.getWorldForColumn=function(d){return this.wrap?Math.floor(d/this.worldSize[0]):0};n.prototype.getFirstColumnForWorld=function(d){return d*this.worldSize[0]+
this.first[0]};n.prototype.getLastColumnForWorld=function(d){return d*this.worldSize[0]+this.first[0]+this.size[0]-1};n.prototype.getColumnForX=function(d){return(d-this.origin[0])/this.norm[0]};n.prototype.getXForColumn=function(d){return this.origin[0]+d*this.norm[0]};n.prototype.getRowForY=function(d){return(this.origin[1]-d)/this.norm[1]};n.prototype.getYForRow=function(d){return this.origin[1]-d*this.norm[1]};n.prototype.getTileBounds=function(d,e,l){void 0===l&&(l=!1);p.set(e);var h=l?p.col:
this.denormalizeCol(p.col,p.world),t=p.row;e=this.getXForColumn(h);l=this.getYForRow(t+1);h=this.getXForColumn(h+1);t=this.getYForRow(t);d[0]=e;d[1]=l;d[2]=h;d[3]=t;return d};n.prototype.getTileCoords=function(d,e,l){void 0===l&&(l=!1);p.set(e);e=l?p.col:this.denormalizeCol(p.col,p.world);Array.isArray(d)?g(d,this.getXForColumn(e),this.getYForRow(p.row)):(d.x=this.getXForColumn(e),d.y=this.getYForRow(p.row));return d};return n}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require",
"exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(D,k,a,f,g){return function(){function p(n){this.lodInfo=n;this.spans=a.acquire()}p.prototype.release=function(){for(var n=0,d=this.spans;n<d.length;n++)g.pool.release(d[n]);a.release(this.spans)};p.prototype.forEach=function(n,d){var e=this.spans,l=this.lodInfo,h=l.level;if(0!==e.length)for(var t=0;t<e.length;t++){var r=e[t],q=r.row,v=r.colTo;for(r=r.colFrom;r<=v;r++)n.call(d,h,q,l.normalizeCol(r),l.getWorldForColumn(r))}};
p.pool=new f(p,!0);return p}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(D,k,a){return function(){function f(g,p,n){this.row=g;this.colFrom=p;this.colTo=n}f.pool=new a(f,!0);return f}()})},"esri/layers/OnDemandDrillMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ../sniff ../kernel ../promiseList ./RenderMode ../geometry/Extent ../geometry/jsonUtils ../tasks/query ../tasks/FeatureSet ../tasks/support/pbfDeps ./vectorTiles/core/promiseUtils ./vectorTiles/core/SetPool ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v,x,y){var B=t.pbfQueryUtils,z=t.optimizedFeatures;f=f("esri-featurelayer-webgl");D=D([n],{declaredClass:"esri.layers._OnDemandDrillMode",featureLayer:null,graphics:null,maxDrillLevel:f&&f.maxDrillLevel,maxRecordCountFactor:f&&f.maxRecordCountFactor,enablePBFQuery:f&&f.enablePBFQuery,_graphicsVal:null,_reEvalGraphics:!1,_featureMap:null,_quantizationFactor:1,_wglRenderer:null,_tileInfo:null,_tileInfoView:null,_tileFetchQueue:null,_tileStrategy:null,_tileRequests:null,
constructor:function(b){this._graphicsVal=[];this._featureMap={};this.featureLayer=b},initialize:function(b){this.inherited(arguments);this._tileRequests=new Map},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var b=this.featureLayer;this._wglRenderer=b._div;this._tileInfo=this._wglRenderer._tileInfo;this._tileInfoView=this._wglRenderer._tileInfoView;this._tileRenderer=this._wglRenderer._tileRenderer;this._tileFetchQueue=new v({tileInfoView:this._tileInfoView,
process:this._getFeatureSet.bind(this)});this._tileStrategy=new x({cachePolicy:"purge",buffer:0,acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._isSuspendedAtStartup=b.suspended;this.start()}},propertyChangeHandler:function(b){this._init&&2>b&&this.start()},destroy:function(){this._tileFetchQueue&&this._tileFetchQueue.clear();this._tileStrategy&&this._tileStrategy.destroy();this._tileRequests&&this._tileRequests.clear();this.inherited(arguments)},
update:function(b){this._tileFetchQueue.pause();this._tileFetchQueue.state=b.state;b=this._tileStrategy.update(b);this._tileFetchQueue.resume();b?this.featureLayer._fireUpdateEnd():this.featureLayer._fireUpdateStart()},suspend:function(){this._init&&this.stop()},resume:function(){this._init&&this.start()},refresh:function(){this.start()},hasAllFeatures:function(){var b=!1;this._getVisibleTileRequests().forEach(function(c){c.hasPartialFeatures&&(b=!0)});return!b},hasUpdateError:function(){var b=!1;
this._getVisibleTileRequests().forEach(function(c){c.hasUpdateError&&(b=!0)});return b},start:function(){var b=this.featureLayer;!b.suspended&&b.isQueryable()&&(this._clearIIf(),this._tileFetchQueue.pause(),this._tileFetchQueue.clear(),this._tileStrategy.clear(),this._wglRenderer.start())},stop:function(){this._wglRenderer.stop()},_getVisibleTileRequests:function(){var b=this._tileStrategy.tileIndex;if(!b)return[];var c=[];this._tileRequests.forEach(function(m,u){var w=b.get(u);w&&w.visible&&c.push(m)});
return c},_acquireTile:function(b){this.featureLayer._fireUpdateStart();var c=this._acquireRendererTile(b),m=c.key,u=m.id;b=this._tileInfo.lodAt(b.level);var w={id:u,key:m,bounds:this._tileInfo.getTileBounds([0,0,0,0],m),resolution:b.resolution,scale:b.scale};m=this._tileFetchQueue.push(m).then(function(A){return this._wglRenderer._symbolProcessor.getMeshData(w,A.featureSet).then(function(C){return{meshData:C.data,featureSet:A.featureSet,errors:A.errors,hasPartialFeatures:A.hasPartialFeatures}})}.bind(this)).then(function(A){this._tileRenderer.onTileData({tileKey:u,
data:A.meshData});this._addTile(u,A)}.bind(this)).otherwise(function(A){this._tileRenderer.onTileData({tileKey:u,data:null});this._tileError(u);return r.reject(A)}.bind(this));this._tileRequests.set(u,{tsTile:w,request:m,isFulfilled:!1,hasUpdateError:null,hasPartialFeatures:null,featureSet:null,graphics:[]});return c},_acquireRendererTile:function(b){b=this._tileRenderer.acquireTile(b);b.once("attach",function(){this._wglRenderer._scheduleUpdate()}.bind(this));return b},_releaseTile:function(b){this.featureLayer._fireUpdateStart();
this._tileRequests.get(b.key.id)&&(this._removeTile(b),this._wglRenderer._scheduleUpdate())},_addTile:function(b,c){this._reEvalGraphics=!0;var m=this._createGraphics(c.featureSet);this._registerGraphics(m);var u=this._tileRequests.get(b);u&&(u.isFulfilled=!0,u.hasUpdateError=!!c.errors.length,u.hasPartialFeatures=c.hasPartialFeatures||u.hasUpdateError,u.featureSet=c.featureSet,u.graphics=m)},_tileError:function(b){if(b=this._tileRequests.get(b))b.isFulfilled=!0,b.hasUpdateError=!0,b.hasPartialFeatures=
!0,b.graphics=[];this._wglRenderer._scheduleUpdate()},_removeTile:function(b){var c=b.key.id,m=this._tileRequests.get(c);m.request.isFulfilled()||m.request.cancel();this._tileRequests["delete"](c);this._wglRenderer._cancelRedraw(c);this._reEvalGraphics=!0;this._tileRenderer.releaseTile(b);this._unregisterGraphics(m.graphics)},_getFeatureSet:function(b){var c={hashes:new Set,drill:[],featureSet:{features:[],geometryType:this.featureLayer.geometryType,spatialReference:this.map.spatialReference.toJson(),
transform:null},hasPartialFeatures:!1,errors:[]},m=this.featureLayer._task,u=this._getResolutionParams(b),w=this._tileInfoView.getTileBounds([0,0,0,0],b);w=this._expandTileBounds(w,u);var A=q.acquire();return this._drillQuery(c,A,m,w,u,null,b).then(function(C){q.release(A);this._calculateCentroid(C);return C}.bind(this)).otherwise(function(C){q.release(A);throw C;})},_getResolutionParams:function(b){this._tileInfo.updateTileInfo(b);var c=this._tileInfo.lodAt(b.level);return{mode:"view",originPosition:"upperLeft",
tolerance:this._quantizationFactor*c.resolution,extent:new d(b.extent[0],b.extent[1],b.extent[2],b.extent[3],this.map.spatialReference)}},_expandTileBounds:function(b,c){var m=this.featureLayer.geometryType;m=("esriGeometryPoint"===m||"esriGeometryMultipoint"===m||this._wglRenderer._returnCentroid?20:0)*c.tolerance;b[0]-=m;b[1]-=m;b[2]+=m;b[3]+=m;return b},_calculateCentroid:function(b){if("esriGeometryPolygon"===b.featureSet.geometryType&&this._wglRenderer._returnCentroid){var c=0;var m=b.featureSet.spatialReference,
u=b.featureSet.transform,w={geometry:{x:null,y:null}},A=[w];b.featureSet.features.forEach(function(C){if(!C.centroid){var E=C.geometry;E&&(E=h.createPolygon(E,m,u),E=E.getCentroid())&&(w.geometry.x=E.x,w.geometry.y=E.y,e.quantize(A,"esriGeometryPoint",u),C.centroid={x:w.geometry.x,y:w.geometry.y},c++)}})}return c},_drillQuery:function(b,c,m,u,w,A,C,E){E=null!=E?E:0;b.drill.push(u);return this._query(m,u,w,A,C,E).then(function(G){this.featureLayer.supportsFormatPBF&&this.enablePBFQuery&&(G=z.convertToFeatureSet(B.parsePBFFeatureQuery(G)));
this._appendFeatures(b.featureSet.features,c,G.features);G.transform&&(b.featureSet.transform=G.transform);if(G.exceededTransferLimit){if(E<this.maxDrillLevel){E++;G=(u[2]-u[0])/2;var F=(u[3]-u[1])/2,I=[u[0]+G,u[1]+F,u[2],u[3]],M=[u[0],u[1],u[2]-G,u[3]-F],Y=[u[0]+G,u[1],u[2],u[3]-F];return p([this._drillQuery(b,c,m,[u[0],u[1]+F,u[2]-G,u[3]],w,A,C,E),this._drillQuery(b,c,m,I,w,A,C,E),this._drillQuery(b,c,m,M,w,A,C,E),this._drillQuery(b,c,m,Y,w,A,C,E)]).then(function(){return b})}b.hasPartialFeatures=
!0}return b}.bind(this)).otherwise(function(G){if(0<E)b.errors.push(G);else throw G;}.bind(this))},_appendFeatures:function(b,c,m){var u=b.length,w=m?m.length:0;b.length=u+w;var A=0,C,E=this.featureLayer.objectIdField;for(C=0;C<w;C++){var G=m[C];var F=G.attributes[E];c.has(F)||(b[u+A]=G,c.add(F),A++)}b.length-=w-A},_query:function(b,c,m,u,w,A){u=this.featureLayer;w=new l;var C=u.getOutFields();.75<=C.length/u.fields.length&&(C=["*"]);w.geometry=new d(c[0],c[1],c[2],c[3],this.map.spatialReference);
w.outFields=C;w.where=u._getAttributeFilter();w.returnGeometry=!0;w.returnCentroid=this._wglRenderer._returnCentroid;w.timeExtent=u._getOffsettedTE(u._mapTimeExtent);u._ts&&(w._ts=Date.now());w.orderByFields=u.supportsAdvancedQueries?u.getOrderByFields():null;w.multipatchOption=u.multipatchOption;w.maxAllowableOffset="esriGeometryPolyline"===u.geometryType?m.tolerance:null;w.quantizationParameters=m;(c=u.advancedQueryCapabilities)&&c.supportsQueryWithResultType&&(w.resultType="tile");w.returnExceededLimitFeatures=
A===this.maxDrillLevel;c&&c.supportsMaxRecordCountFactor&&(w.maxRecordCountFactor=this.maxRecordCountFactor);return this._wrapInNewDeferred(b.rawExecute(w,u.supportsFormatPBF&&this.enablePBFQuery?{format:"pbf"}:null))},_wrapInNewDeferred:function(b){var c=new a(function(){b.isFulfilled()||b.cancel()});b.then(function(m){c.resolve(m)}).otherwise(function(m){c.reject(m)});return c.promise},_collectGraphics:function(){var b=this._featureMap,c=[],m;for(m in b)c.push(b[m]);return c},_createGraphics:function(b){return h.createGraphics(b)},
_registerGraphics:function(b){var c=this.featureLayer.objectIdField;b.forEach(function(m){var u=m.attributes&&m.attributes[c];this._registerFeature(u,m);this._incRefCount(u)}.bind(this))},_unregisterGraphics:function(b){var c=this.featureLayer.objectIdField;b.forEach(function(m){m=m.attributes&&m.attributes[c];this._decRefCount(m);this._unregisterFeature(m)}.bind(this))}});Object.defineProperty(D.prototype,"graphics",{get:function(){this._reEvalGraphics&&(this._reEvalGraphics=!1,this._graphicsVal=
this._collectGraphics());return this._graphicsVal}});k.setObject("layers._OnDemandDrillMode",D,g);return D})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(D,k,a){var f=D.forEach;return function(g){function p(q,v){h[v]=q;t.progress([q,v]);0===--r&&t.resolve(h)}var n,d;g instanceof Array?d=g:g&&"object"===typeof g&&(n=g);var e=[];if(n){d=[];for(var l in n)Object.hasOwnProperty.call(n,l)&&(e.push(l),d.push(n[l]));var h={}}else d&&(h=[]);if(!d||!d.length)return(new k).resolve(h);
var t=new k;t.promise.always(function(){h=e=null});var r=d.length;f(d,function(q,v){n||e.push(v);a(q,function(x){t.isFulfilled()||p(x,e[v])},function(x){t.isFulfilled()||p(x,e[v])})});return t.promise}})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(D,k,a,f,g){var p=!!f("esri-pbf");f=!!f("esri-featurelayer-pbf");D=D(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:p&&f,initialize:function(n){this.map=
n;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(n){},destroy:function(){this._init=this._started=!1},drawFeature:function(n){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(n){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(n){(n=this._featureMap[n])&&n._count++},_decRefCount:function(n){(n=this._featureMap[n])&&n._count--},
_getFeature:function(n){return this._featureMap[n]},_addFeatureIIf:function(n,d){var e=this._featureMap,l=e[n],h=this.featureLayer;l||(e[n]=d,h._add(d),d._count=0);return l||d},_removeFeatureIIf:function(n){var d=this._featureMap[n],e=this.featureLayer;if(d){if(d._count)return;delete this._featureMap[n];e._remove(d)}return d},_registerFeature:function(n,d){var e=this._featureMap,l=e[n];l?(l.attributes=d.attributes,l.geometry=d.geometry):(e[n]=d,d._count=0,d._layer=d._graphicsLayer=d._sourceLayer=
this.featureLayer);return l||d},_unregisterFeature:function(n){var d=this._featureMap,e=d[n];e&&!e._count&&(delete d[n],e._graphicsLayer=null)},_clearIIf:function(){var n=this.featureLayer;var d=n.graphics,e=n._selectedFeatures,l=n.getSelectedFeatures().length,h=n.objectIdField;if(l)for(n=d.length-1;0<=n;n--){l=d[n];var t=l.attributes[h];t in e?l._count=1:(l._count=0,this._removeFeatureIIf(t))}else n.clear(),this._featureMap={}},_cancelPendingRequest:function(n){if(n)try{n.cancel()}catch(d){}},_toggleVisibility:function(n){var d=
this.featureLayer,e=d.graphics,l=n?"show":"hide",h,t=e.length;n=n&&d._ager;for(h=0;h<t;h++){var r=e[h];r[l]();n&&d._repaint(r)}},_applyTimeFilter:function(n){var d=this.featureLayer;if(d.timeInfo&&!d.suspended){n||d._fireUpdateStart();var e=d._trackManager;e&&e.clearTracks();var l=d.getTimeDefinition(),h=d._getOffsettedTE(d._mapTimeExtent);h?(h=d._getTimeOverlap(l,h))?(l=d._filterByTime(d.graphics,h.startTime,h.endTime),e&&e.addFeatures(l.match),a.forEach(l.match,function(t){var r=t._shape;t.visible||
(t.show(),(r=t._shape)&&r._moveToFront());d._ager&&r&&d._repaint(t)}),a.forEach(l.noMatch,function(t){t.visible&&t.hide()})):this._toggleVisibility(!1):(e&&e.addFeatures(d.graphics),this._toggleVisibility(!0));e&&(e.moveLatestToFront(),e.drawTracks());n||d._fireUpdateEnd()}}});k.setObject("layers._RenderMode",D,g);return D})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(D,k,a,f,g,p,n,d){var e=D(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=e.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(l){var h={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},t=l&&l.geometry||this.geometry,r=this.objectIds,q=this.outFields,v=this.outSpatialReference,x=this.groupByFieldsForStatistics,y=this.orderByFields,B=this.outStatistics;l=this.distance;t&&(h.geometry=t,h.geometryType=n.getJsonType(t),h.inSR=t.spatialReference.wkid||f.toJson(t.spatialReference.toJson()));r&&(h.objectIds=r.join(","));q&&(h.outFields=q.join(","));null!=this.returnCentroid&&(h.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(h.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(h.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(h.maxRecordCountFactor=this.maxRecordCountFactor);x&&(h.groupByFieldsForStatistics=x.join(","));y&&(h.orderByFields=y.join(","));if(B){var z=[];a.forEach(B,function(b){z.push(b.toJson())});h.outStatistics=f.toJson(z)}v?h.outSR=v.wkid||f.toJson(v.toJson()):t&&(h.outSR=t.spatialReference.wkid||f.toJson(t.spatialReference.toJson()));t=
this.timeExtent;h.time=t?t.toJson().join(","):null;(t=this.relationParam)&&this.spatialRelationship===e.SPATIAL_REL_RELATION&&(h.relationParam=t);l&&(h.distance=this.distance,this.hasOwnProperty("units")?h.units=this._units[this.units]||this._units.meters:h.units=this._units.meters);this.hasOwnProperty("start")&&(h.resultOffset=this.start,h.resultRecordCount=10,""===h.where&&(h.where="1\x3d1"));this.hasOwnProperty("num")&&(h.resultRecordCount=this.num);h.resultType=this.resultType;null!=this.cacheHint&&
(h.cacheHint=this.cacheHint);h.pixelSize=this.pixelSize?f.toJson(this.pixelSize.toJson()):null;h.multipatchOption=this.multipatchOption;this.quantizationParameters&&(h.quantizationParameters=f.toJson(this.quantizationParameters));h._ts=this._ts;return h}});k.mixin(e,d);k.setObject("tasks.Query",e,p);return e})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(D,k,a){k={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",
SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};D.setObject("tasks._SpatialRelationship",k,a);return k})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t,r,q,v){var x=e("esri-pbf"),y=k(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(z){this._handleSuccess=a.hitch(this,this._handleSuccess);this._handleError=a.hitch(this,this._handleError);a.mixin(this,z);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var z=new g(this._canceler);this._fetchDfd=z;this._result=null;this._sendRequest();
return z.promise},_canceler:function(z){var b=z._pendingRequest;if(!z.isFulfilled()&&b&&!b.isFulfilled()){b.cancel();var c=b.results&&b.results[1]}z._pendingRequest=null;return c},_sendRequest:function(z){var b=this.query;this.pagination&&(this._startPage=b.resultOffset=null==z?0:z,b.resultRecordCount=this.pageSize);z=this.requestOptions;this._fetchDfd._pendingRequest=l({url:this.url,content:b,handleAs:"pbf"===b.f?"arraybuffer":"json",callbackParamName:"callback",timeout:z&&z.timeout},z);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},
_handleSuccess:function(z){this.pagination?(z.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=this._result.features.concat(z.features):this._result=z,this._fetchDfd.progress(z),z.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(z),this._fetchDfd.resolve(z))},_handleError:function(z){this._fetchDfd.reject(z)}}),B=k(q,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],
"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(z,b){this._handler=a.hitch(this,this._handler);this._relationshipQueryHandler=a.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=a.hitch(this,this._executeForIdsHandler);this._countHandler=a.hitch(this,this._countHandler);this._extentHandler=a.hitch(this,this._extentHandler);this.source=b&&b.source;this.gdbVersion=b&&b.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",
c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(z,b,c,m,u){var w=
u.assembly;z=this._encode(a.mixin({},this._url.query,{f:m&&m.format||"json"},z.toJson(w&&w[0])));var A=this._handler,C=this._errorHandler;this.source&&(m={source:this.source.toJson()},z.layer=p.toJson(m));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);var E="pbf"===z.f;if(E){var G;x||(G="QueryTask.execute: 'pbf' format is not supported in your browser.");if(G)return z=new g,z.addErrback(function(F){C(F,c,u.dfd)}),z.reject(Error(G)),z}G=this.requestOptions;G=l({url:this._url.path+"/query",content:z,
callbackParamName:"callback",handleAs:E?"arraybuffer":"json",timeout:G&&G.timeout},G);z=[G];E&&z.push(B.loadPBFReader());(new n(z)).then(function(F){u.dfd.isFulfilled()||(F=F[0],F[0]?A(F[1],E,b,c,u.dfd):C(F[1],c,u.dfd))});return G},rawExecute:function(z,b,c){b=b||{};z=this._encode(a.mixin({},this._url.query,{f:b.format||"json"},z.toJson(c.assembly&&c.assembly[0])));this.source&&(z.layer=p.toJson({source:this.source.toJson()}));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);return(new y({url:this._url.path+
"/query",query:z,requestOptions:this.requestOptions,pagination:b.pagination,pageSize:b.pageSize})).execute().then(null,null,function(m){c.dfd.progress(m)}).then(a.hitch(this,function(m){this._successHandler([m],"onRawExecuteComplete",null,c.dfd)})).otherwise(a.hitch(this,function(m){this._errorHandler(m,null,c.dfd)}))},executeRelationshipQuery:function(z,b,c){z=this._encode(a.mixin({},this._url.query,{f:"json"},z.toJson()));var m=this._relationshipQueryHandler,u=this._errorHandler;this.gdbVersion&&
(z.gdbVersion=this.gdbVersion);var w=new g(h._dfdCanceller),A=this.requestOptions,C=this._url.path;this.source&&void 0!==this.source.mapLayerId&&null!==this.source.mapLayerId&&C.endsWith("/dynamicLayer")&&(C=C.slice(0,-13),C=C+"/"+this.source.mapLayerId);w._pendingDfd=l({url:C+"/queryRelatedRecords",content:z,callbackParamName:"callback",timeout:A&&A.timeout,load:function(E,G){m(E,G,b,c,w)},error:function(E){u(E,c,w)}},A);return w},executeForIds:function(z,b,c,m){var u=m.assembly;z=this._encode(a.mixin({},
this._url.query,{f:"json",returnIdsOnly:!0},z.toJson(u&&u[0])));var w=this._executeForIdsHandler,A=this._errorHandler;this.source&&(u={source:this.source.toJson()},z.layer=p.toJson(u));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);u=this.requestOptions;return l({url:this._url.path+"/query",content:z,callbackParamName:"callback",timeout:u&&u.timeout,load:function(C,E){w(C,E,b,c,m.dfd)},error:function(C){A(C,c,m.dfd)}},u)},executeForCount:function(z,b,c,m){var u=m.assembly;z=this._encode(a.mixin({},
this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},z.toJson(u&&u[0])));var w=this._countHandler,A=this._errorHandler;this.source&&(u={source:this.source.toJson()},z.layer=p.toJson(u));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);u=this.requestOptions;return l({url:this._url.path+"/query",content:z,callbackParamName:"callback",timeout:u&&u.timeout,load:function(C,E){w(C,E,b,c,m.dfd)},error:function(C){A(C,c,m.dfd)}},u)},executeForExtent:function(z,b,c,m){var u=m.assembly;z=this._encode(a.mixin({},
this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},z.toJson(u&&u[0])));var w=this._extentHandler,A=this._errorHandler;this.source&&(u={source:this.source.toJson()},z.layer=p.toJson(u));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);u=this.requestOptions;return l({url:this._url.path+"/query",content:z,callbackParamName:"callback",timeout:u&&u.timeout,load:function(C,E){w(C,E,b,c,m.dfd)},error:function(C){A(C,c,m.dfd)}},u)},_handler:function(z,b,c,m,u){try{z&&b&&(z=B.pbfDeps.optimizedFeatures.convertToFeatureSet(B.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(z)));
var w=new v(z);this._successHandler([w],"onComplete",c,u)}catch(A){this._errorHandler(A,m,u)}},_relationshipQueryHandler:function(z,b,c,m,u){try{var w=z.geometryType,A=z.spatialReference,C={};f.forEach(z.relatedRecordGroups,function(E){var G={};G.geometryType=w;G.spatialReference=A;G.features=E.relatedRecords;G=new v(G);if(null!=E.objectId)C[E.objectId]=G;else for(var F in E)E.hasOwnProperty(F)&&"relatedRecords"!==F&&(C[E[F]]=G)});this._successHandler([C],"onExecuteRelationshipQueryComplete",c,u)}catch(E){this._errorHandler(E,
m,u)}},_executeForIdsHandler:function(z,b,c,m,u){try{this._successHandler([z.objectIds],"onExecuteForIdsComplete",c,u)}catch(w){this._errorHandler(w,m,u)}},_countHandler:function(z,b,c,m,u){try{var w=z.features,A=z.objectIds;if(A)var C=A.length;else{if(w)throw Error("Unable to perform query. Please check your parameters.");C=z.count}this._successHandler([C],"onExecuteForCountComplete",c,u)}catch(E){this._errorHandler(E,m,u)}},_extentHandler:function(z,b,c,m,u){try{z.extent&&(z.extent=new t(z.extent)),
this._successHandler([z],"onExecuteForExtentComplete",c,u)}catch(w){this._errorHandler(w,m,u)}}});B.loadPBFReader=function(){var z=new g;B.pbfDeps?z.resolve():D(["./support/pbfDeps"],function(b){B.pbfDeps=b;z.isFulfilled()||z.resolve()});return z.promise};r._createWrappers(B);a.setObject("tasks.QueryTask",B,d);return B})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(D,k,a){D.DeferredList=function(f,g,p,n,d){var e=[];k.call(this);var l=this;0!==
f.length||g||this.resolve([0,[]]);var h=0;a.forEach(f,function(t,r){function q(v,x){e[r]=[v,x];h++;h===f.length&&l.resolve(e)}t.then(function(v){g?l.resolve([r,v]):q(!0,v)},function(v){p?l.reject(v):q(!1,v);if(n)return null;throw v;})})};D.DeferredList.prototype=new k;D.DeferredList.prototype.gatherResults=function(f){f=new D.DeferredList(f,!1,!0,!1);f.addCallback(function(g){var p=[];a.forEach(g,function(n){p.push(n[1])});return p});return f};return D.DeferredList})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(D,k,a,f,g,p,n,d,e,l,h,t){function r(w,A){return Math.ceil((w-A)/(2*A))}function q(w,A){var C=w.paths||w.rings,E,G,F=C.length;for(E=0;E<F;E++){var I=C[E].length;for(G=0;G<I;G++){var M=w.getPoint(E,G);w.setPoint(E,G,M.offset(A,0))}}return w}function v(w,A){if(!(w instanceof e||w instanceof l))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var C=w instanceof e,E=[],G;D.forEach(C?w.paths:w.rings,function(F){E.push(G=[]);G.push([F[0][0],F[0][1]]);var I,
M;for(I=0;I<F.length-1;I++){var Y=F[I][0];var R=F[I][1];var S=F[I+1][0];var O=F[I+1][1];var L=Math.sqrt((S-Y)*(S-Y)+(O-R)*(O-R));var P=(O-R)/L;var X=(S-Y)/L;var Q=L/A;if(1<Q){for(M=1;M<=Q-1;M++){var K=M*A;var U=X*K+Y;K=P*K+R;G.push([U,K])}M=(L+Math.floor(Q-1)*A)/2;U=X*M+Y;K=P*M+R;G.push([U,K])}G.push([S,O])}});return C?new e({paths:E,spatialReference:w.spatialReference}):new l({rings:E,spatialReference:w.spatialReference})}function x(w,A,C){A&&(w=v(w,1E6),w=h.webMercatorToGeographic(w,!0));C&&(w=
q(w,C));return w}function y(w,A,C){var E=w.x||w[0];if(E>A){var G=r(E,A);w.x?w=w.offset(-2*G*A,0):w[0]=E+-2*G*A}else E<C&&(G=r(E,C),w.x?w=w.offset(-2*G*C,0):w[0]=E+-2*G*C);return w}function B(w,A){var C=-1;D.forEach(A.cutIndexes,function(E,G){var F=A.geometries[G];D.forEach(F.rings||F.paths,function(I,M){D.some(I,function(Y){if(!(180>Y[0])){Y=0;var R,S=I.length;for(R=0;R<S;R++){var O=I[R][0];Y=O>Y?O:Y}Y=Number(Y.toFixed(9));Y=-360*r(Y,180);S=I.length;for(R=0;R<S;R++)O=F.getPoint(M,R),F.setPoint(M,
R,O.offset(Y,0))}return!0})});E===C?F.rings?D.forEach(F.rings,function(I){w[E]=w[E].addRing(I)}):D.forEach(F.paths,function(I){w[E]=w[E].addPath(I)}):(C=E,w[E]=F)});return w}function z(w,A,C,E){var G=new a;G.addCallbacks(C,E);A=A||p.defaults.geometryService;var F=[],I=[],M,Y,R,S,O,L,P,X,Q=0;D.forEach(w,function(fa){if(fa)if(M||(M=fa.spatialReference,Y=M._getInfo(),S=(R=M._isWebMercator())?2.0037508342788905E7:180,O=R?-2.0037508342788905E7:-180,L=R?102100:4326,P=new e({paths:[[[S,O],[S,S]]],spatialReference:{wkid:L}}),
X=new e({paths:[[[O,O],[O,S]]],spatialReference:{wkid:L}})),Y){var ia=t.fromJson(fa.toJson()),la=fa.getExtent();"point"===fa.type?F.push(y(ia,S,O)):"multipoint"===fa.type?(ia.points=D.map(ia.points,function(ma){return y(ma,S,O)}),F.push(ia)):"extent"===fa.type?(ia=la._normalize(null,null,Y),F.push(ia.rings?new l(ia):ia)):la?(fa=2*r(la.xmin,O)*S,ia=0===fa?ia:q(ia,fa),la=la.offset(fa,0),la.intersects(P)&&la.xmax!==S?(Q=la.xmax>Q?la.xmax:Q,ia=x(ia,R),I.push(ia),F.push("cut")):la.intersects(X)&&la.xmin!==
O?(Q=2*la.xmax*S>Q?2*la.xmax*S:Q,ia=x(ia,R,360),I.push(ia),F.push("cut")):F.push(ia)):F.push(ia)}else F.push(fa);else F.push(fa)});C=new e;E=r(Q,S);for(var K=-90,U=E;0<E;){var da=-180+360*E;C.addPath([[da,K],[da,-1*K]]);K*=-1;E--}0<I.length&&0<U?A?A.cut(I,C,function(fa){I=B(I,fa);var ia=[];D.forEach(F,function(la,ma){if("cut"===la){var ta=I.shift();w[ma].rings&&1<w[ma].rings.length&&ta.rings.length>=w[ma].rings.length?(F[ma]="simplify",ia.push(ta)):F[ma]=!0===R?h.geographicToWebMercator(ta):ta}});
0<ia.length?A.simplify(ia,function(la){D.forEach(F,function(ma,ta){"simplify"===ma&&(F[ta]=!0===R?h.geographicToWebMercator(la.shift()):la.shift())});G.callback(F)},function(la){G.errback(la)}):G.callback(F)},function(fa){G.errback(fa)}):G.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(D.forEach(F,function(fa,ia){if("cut"===fa){var la=I.shift();F[ia]=!0===R?h.geographicToWebMercator(la):la}}),G.callback(F));return G}function b(w,A,C,E){var G=!1,F;
k.isObject(w)&&w&&(k.isArray(w)?w.length&&((F=w[0]&&w[0].declaredClass)&&-1!==F.indexOf("Graphic")?(w=D.map(w,function(I){return I.geometry}),G=w.length?!0:!1):F&&-1!==F.indexOf("esri.geometry.")&&(G=!0)):(F=w.declaredClass)&&-1!==F.indexOf("FeatureSet")?(w=D.map(w.features||[],function(I){return I.geometry}),G=w.length?!0:!1):F&&-1!==F.indexOf("esri.geometry.")&&(G=!0));G&&A.push({index:C,property:E,value:w})}function c(w,A){var C=[];D.forEach(A,function(E){var G=E.i,F=w[G];E=E.p;var I;if(k.isObject(F)&&
F)if(E)if("*"===E[0])for(I in F)F.hasOwnProperty(I)&&b(F[I],C,G,I);else D.forEach(E,function(M){b(k.getObject(M,!1,F),C,G,M)});else b(F,C,G)});return C}function m(w,A){var C=0,E={};D.forEach(A,function(G){var F=G.index,I=G.property,M=G.value,Y=M.length||1,R=w.slice(C,C+Y);k.isArray(M)||(R=R[0]);C+=Y;delete G.value;I?(E[F]=E[F]||{},E[F][I]=R):E[F]=R});return E}function u(w){for(var A=[],C=0,E=0,G=Math.min,F=Math.max,I=0;I<w.length;I++){for(var M=w[I],Y=null,R=0;R<M.length;R++)Y=M[R],A.push(Y),0===
R?E=C=Y[0]:(C=G(C,Y[0]),E=F(E,Y[0]));Y&&A.push([(C+E)/2,0])}return A}f={normalizeCentralMeridian:z,_foldCutResults:B,_prepareGeometryForCut:x,_offsetMagnitude:r,_pointNormalization:y,_updatePolyGeometry:q,_straightLineDensify:v,_createWrappers:function(w){var A=k.isObject(w)?w.prototype:k.getObject(w+".prototype");D.forEach(A.__msigns,function(C){var E=A[C.n];A[C.n]=function(){var G=this,F=[],I,M=new a(n._dfdCanceller);C.f&&n._fixDfd(M);for(I=0;I<C.c;I++)F[I]=arguments[I];var Y={dfd:M};F.push(Y);
var R=[],S;if(G.normalization&&!G._isTable){var O=c(F,C.a);D.forEach(O,function(L){R=R.concat(L.value)});R.length&&(S=z(R))}S?(M._pendingDfd=S,S.addCallbacks(function(L){M.canceled||(Y.assembly=m(L,O),M._pendingDfd=E.apply(G,F))},function(L){var P=G.declaredClass;P&&-1!==P.indexOf("FeatureLayer")?G._resolve([L],null,F[C.e],M,!0):G._errorHandler(L,F[C.e],M)})):M._pendingDfd=E.apply(G,F);return M}})},_disassemble:c,_addToBucket:b,_reassemble:m,getDenormalizedExtent:function(w){if(!w)return null;var A=
w.getExtent();if(!A)return null;var C=w.spatialReference&&w.spatialReference._getInfo();if(!C)return A;var E=C.valid[0];C=C.valid[1];var G=2*C,F=A.getWidth(),I=A.xmax,M=A.xmin;if("extent"===w.type||0===F||F<=C||F>G||I<E||M>C)return A;switch(w.type){case "polygon":if(1<w.rings.length)var Y=u(w.rings);else return A;break;case "polyline":if(1<w.paths.length)Y=u(w.paths);else return A;break;case "multipoint":Y=w.points}w=Math.min;E=Math.max;G=new d(A.toJson());for(var R=0;R<Y.length;R++){var S=Y[R][0];
0>S?(S+=C,M=E(S,M)):(S-=C,I=w(S,I))}G.xmin=I;G.xmax=M;return G.getWidth()<F?(G.xmin-=C,G.xmax-=C,G):A}};k.mixin(k.getObject("geometry",!0,g),f);return f})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(D,k,a,f,g,p,n,d){D=D(d,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(e,l){e&&k.isString(e)&&(this._url=n.urlToObject(this.url=
e));l&&l.requestOptions&&(this.requestOptions=l.requestOptions);this.normalization=!0;this._errorHandler=k.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var e=this._url,l=/^http:/i;this.url&&(this.url=this.url.replace(l,"https:"));e&&e.path&&(e.path=e.path.replace(l,"https:"))},_encode:function(e,l,h){var t={},r;for(r in e)if("declaredClass"!==r){var q=e[r];var v=typeof q;if(null!==q&&void 0!==q&&"function"!==v)if(k.isArray(q)){t[r]=[];var x=q.length;for(v=0;v<x;v++)t[r][v]=
this._encode(q[v])}else"object"===v?q.toJson&&(v=q.toJson(h&&h[r]),"esri.tasks.FeatureSet"===q.declaredClass&&v.spatialReference&&(v.sr=v.spatialReference,delete v.spatialReference),t[r]=l?v:a.toJson(v)):t[r]=q}return t},_successHandler:function(e,l,h,t){l&&this[l].apply(this,e);h&&h.apply(null,e);t&&p._resDfd(t,e)},_errorHandler:function(e,l,h){this.onError(e);l&&l(e);h&&h.errback(e)},setNormalization:function(e){this.normalization=e},onError:function(){}});return g.Task=D})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),
function(D,k,a,f,g,p){D=D([f],{declaredClass:"esri.Evented",registerConnectEvents:function(){var n=this.constructor,d=this.constructor._meta.parents,e=[{}],l={},h,t=function(q,v){k.isArray(q)||(q=[q]);for(var x=0;x<q.length;x++){var y=q[x];y._meta&&y._meta.parents&&t(y._meta.parents,v);y.prototype._eventMap&&v.push(k.mixin({},y.prototype._eventMap))}return v};if(!n._onMap){t(d,e);e.push(this._eventMap);d=k.mixin.apply(this,e);for(r in this)/^on\w/.test(r)&&k.isFunction(this[r])&&(e=this._hyphenLower(r).toLowerCase(),
d[e]||(l[e]={method:r}));for(h in d){var r=this._onCamelCase(h);l[h]={method:r,argKeys:d[h]}}n._onMap=l;return n._onMap}},on:function(n,d){if(-1<n.indexOf(",")){for(var e=n.split(/\s*,\s*/),l=e.length,h=[];l--;)h.push(this.on(e[l],d));h.remove=function(){for(var q=0;q<h.length;q++)h[q].remove()};return h}e=this.constructor._onMap||this.registerConnectEvents();l="string"==typeof n&&n.toLowerCase();var t=this._onCamelCase(l),r=e&&e[l];return(t=r&&r.method||this[t]&&k.isFunction(this[t])&&t)?r&&k.isArray(r.argKeys)?
(e=this._onArr2Obj(d,e[l].argKeys),a.after(this,t,e,!0)):a.after(this,t,function(q){q=q||{};q.target||(q.target=this);d.call(this,q)},!0):this.inherited(arguments)},emit:function(n,d){var e,l,h=n.toLowerCase();var t=this._onCamelCase(n);var r=this.constructor._onMap||this.registerConnectEvents();t=(l=r&&r[h]&&r[h].method||k.isFunction(this[t])&&t)&&this[l];l&&r&&r[h]&&this._onObj2Arr(function(){e=Array.prototype.slice.call(arguments)},r[h].argKeys)(d);d=d||{};d.target||(d.target=this);if(t){var q=
e&&e.length?e:[d];q=t.apply(this,q)}this.inherited(arguments,[n,d]);return q},_onObj2Arr:function(n,d){if(d){var e=this;return function(l){var h,t=[],r=d.length;for(h=0;h<r;h++)t[h]=l[d[h]];n.apply(e,t)}}return n},_onArr2Obj:function(n,d){if(d){var e=this;return function(){var l,h={},t=arguments.length;for(l=0;l<t;l++)h[d[l]]=arguments[l];h.target||(h.target=e);n.call(e,h)}}return n},_hyphenLower:function(n){return n.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(d,e){return(e?"-":"")+d.toLowerCase()})},
_onCamelCase:function(n){return"on"+n.substr(0,1).toUpperCase()+n.substr(1).replace(/\-([a-z])/g,function(d,e){return e.toUpperCase()})}});return p.Evented=D})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(D,k,a,f,g,p,n,d,e,l,h,t){D=D(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(r,
q){if(r){k.mixin(this,r);var v=this.features=this.features||[],x=r.spatialReference;x=this.spatialReference=h.createInstance(d.simpleConstructor,x);var y=h.getGeometryType(r.geometryType);this.geometryType=r.geometryType;r.fields&&(this.fields=r.fields);var B=h.supportsLazyUnquantization(this.geometryType),z=h.unquantizeFunction(this.geometryType,this.transform),b=!!(q&&B&&z),c=y&&(b?y.accessorConstructor:y.simpleConstructor);a.forEach(v,function(m,u){var w=h.createInstance(n.simpleConstructor),A=
m.geometry;if(y&&A){var C=w.geometry=h.createInstance(c,b?null:A);C.setSpatialReference(A.spatialReference?h.createInstance(d.simpleConstructor,A.spatialReference):x);b&&C.setupLazyUnquantization(z,A)}w.symbol=m.symbol?t.fromJson(m.symbol):null;w.attributes=m.attributes;v[u]=w});b||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(r){var q={};this.displayFieldName&&(q.displayFieldName=this.displayFieldName);this.fields&&
(q.fields=this.fields);this.spatialReference?q.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(q.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(q.geometryType=h.getJsonType(this.features[0].geometry)),q.features=e._encodeGraphics(this.features,r));q.geometryType=q.geometryType||this.geometryType;q.exceededTransferLimit=this.exceededTransferLimit;q.transform=this.transform;return p.fixJson(q)},
_hydrate:function(){h.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(r){if(!this.geometryType)return this.transform=null,this;var q=r.translate[0],v=r.translate[1],x=r.scale[0],y=r.scale[1],B=this.features,z=function(u,w,A){var C,E=[];var G=0;for(C=u.length;G<C;G++){var F=u[G];if(0<G){var I=w(F[0]);F=A(F[1]);if(I!==M||F!==Y){E.push([I-M,F-Y]);var M=I;var Y=F}}else M=w(F[0]),Y=A(F[1]),E.push([M,Y])}return 0<E.length?E:null},b=function(u,w,A){if("esriGeometryPoint"===
u)return function(C){C.x=w(C.x);C.y=A(C.y);return C};if("esriGeometryPolyline"===u||"esriGeometryPolygon"===u)return function(C){var E;var G=C.rings||C.paths;var F=[];var I=0;for(E=G.length;I<E;I++){var M=G[I];(M=z(M,w,A))&&F.push(M)}return 0<F.length?(C.rings?C.rings=F:C.paths=F,C):null};if("esriGeometryMultipoint"===u)return function(C){var E=z(C.points,w,A);return 0<E.length?(C.points=E,C):null};if("esriGeometryEnvelope"===u)return function(C){return C}}(this.geometryType,function(u){return Math.round((u-
q)/x)},function(u){return Math.round((v-u)/y)}),c;var m=0;for(c=B.length;m<c;m++)B[m].geometry&&(b(B[m].geometry)||B[m].setGeometry(null));this.transform=r;return this}});D.createGraphics=function(r){var q=r.geometryType,v=h.createInstance(d.simpleConstructor,r.spatialReference),x=h.getGeometryType(q).accessorConstructor,y=h.unquantizeFunction(q,r.transform);return a.map(r.features,function(B,z){var b=h.createInstance(n.simpleConstructor),c=B.geometry;if(c){var m=b.geometry=h.createInstance(x);m.setSpatialReference(v);
m.setupLazyUnquantization(y,c)}b.attributes=B.attributes;return b})};D.createPolygon=function(r,q,v){if(r){var x=h.createInstance(l.accessorConstructor);x.setSpatialReference(q);q=h.unquantizeFunction("esriGeometryPolygon",v);x.setupLazyUnquantization(q,r)}return x};k.setObject("tasks.FeatureSet",D,g);return D})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(D,k,a,f,g){a={graphicsExtent:function(p){if(!p||!p.length)return null;
var n=null,d,e=p.length;for(d=0;d<e;d++){var l=p[d].geometry;if(l){var h=l.getExtent();h||"point"!==l.type||null==l.x||null==l.y||(h=new g(l.x,l.y,l.x,l.y,l.spatialReference));h&&(n=n?n.union(h):h)}}return 0>n.getWidth()&&0>n.getHeight()?null:n},getGeometries:function(p){return k.map(p,function(n){return n.geometry})},_encodeGraphics:function(p,n){return k.map(p,function(d,e){var l=d.toJson(),h={};if(l.geometry){var t=n&&n[e];h.geometry=t&&t.toJson()||l.geometry}l.attributes&&(h.attributes=l.attributes);
return h})}};D.mixin(f,a);return a})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(D,k,a,f,g){D=D(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var p={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,
maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},n=this.objectIds,d=this.outFields,e=this.outSpatialReference,l=this.orderByFields;n&&(p.objectIds=n.join(","));d&&(p.outFields=d.join(","));e&&(p.outSR=e.wkid||a.toJson(e.toJson()));l&&(p.orderByFields=l.join(","));p._ts=this._ts;return p}});k.setObject("tasks.RelationshipQuery",D,g);return D})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,
k,a,f){D=D(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});k.setObject("tasks.StatisticDefinition",D,f);return D})},"esri/tasks/support/pbfDeps":function(){define(["../../layers/vectorTiles/tasks/operations/pbfQueryUtils","../../layers/vectorTiles/layers/graphics/optimizedFeatures"],
function(D,k){return{pbfQueryUtils:D,optimizedFeatures:k}})},"esri/layers/vectorTiles/tasks/operations/pbfQueryUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ../../layers/graphics/optimizedFeatures".split(" "),function(D,k,a,f,g,p){function n(c){if(c>=z.length){var m=new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload. Unknown GeometryType");x.error(m)}return z[c]}function d(c){var m,u=m||(m={});u[u.STRING=1]="STRING";u[u.FLOAT=2]="FLOAT";
u[u.DOUBLE=3]="DOUBLE";u[u.SINT32=4]="SINT32";u[u.UINT32=5]="UINT32";u[u.INT64=6]="INT64";u[u.UINT64=7]="UINT64";u[u.SINT64=8]="SINT64";for(u[u.BOOL=9]="BOOL";c.next();)switch(c.tag()){case m.STRING:return c.getString();case m.FLOAT:return c.getFloat();case m.DOUBLE:return c.getDouble();case m.SINT32:return c.getSInt32();case m.UINT32:return c.getUInt32();case m.INT64:return c.getInt64();case m.UINT64:return c.getUInt64();case m.SINT64:return c.getSInt64();case m.BOOL:return c.getBool();default:return c.skip(),
null}return null}function e(c){var m,u=m||(m={});u[u.NAME=1]="NAME";u[u.TYPE=2]="TYPE";u[u.ALIAS=3]="ALIAS";u[u.SQL_TYPE=4]="SQL_TYPE";u[u.DOMAIN=5]="DOMAIN";u[u.DEFAULT_VALUE=6]="DEFAULT_VALUE";for(u={type:y[0]};c.next();)switch(c.tag()){case m.NAME:u.name=c.getString();break;case m.TYPE:u.type=y[c.getEnum()];break;case m.ALIAS:u.alias=c.getString();break;case m.SQL_TYPE:u.sqlType=B[c.getEnum()];break;case m.DOMAIN:c.skip();break;case m.DEFAULT_VALUE:c.skip();break;default:c.skip()}return u}function l(c,
m){var u,w=u||(u={});w[w.ATTRIBUTES=1]="ATTRIBUTES";w[w.GEOMETRY=2]="GEOMETRY";w[w.CENTROID=4]="CENTROID";w=new p.OptimizedFeature;for(var A=0;c.next();)switch(c.tag()){case u.ATTRIBUTES:var C=c.getMessage(),E=m[A++].name;w.attributes[E]=d(C);break;case u.GEOMETRY:C=void 0;E=c.getMessage();var G=C||(C={});G[G.TYPE=1]="TYPE";G[G.LENGTHS=2]="LENGTHS";G[G.COORDS=3]="COORDS";G=new p.OptimizedGeometry;for(var F=G.coords,I=G.lengths;E.next();)switch(E.tag()){case C.LENGTHS:var M=E.getUInt32();for(M=E.pos()+
M;E.pos()<M;)I.push(E.getUInt32());break;case C.COORDS:M=E.getUInt32();M=E.pos()+M;for(var Y=0;E.pos()<M;)F[Y++]=E.getSInt64();break;default:E.skip()}w.geometry=G;break;case u.CENTROID:C=void 0;E=c.getMessage();G=C||(C={});G[G.TYPE=1]="TYPE";G[G.LENGTHS=2]="LENGTHS";G[G.COORDS=3]="COORDS";G=new p.OptimizedGeometry;for(F=G.coords;E.next();)switch(E.tag()){case C.COORDS:I=E.getUInt32();I=E.pos()+I;for(M=0;E.pos()<I;)F[M++]=E.getSInt64();break;default:E.skip()}w.centroid=G;break;default:c.skip()}return w}
function h(c){var m,u=m||(m={});u[u.X=1]="X";u[u.Y=2]="Y";u[u.M=3]="M";u[u.Z=4]="Z";for(u=[0,0];c.next();)switch(c.tag()){case m.X:u[0]=c.getDouble();break;case m.Y:u[1]=c.getDouble();break;case m.M:u.push(c.getDouble());break;case m.Z:u.push(c.getDouble());break;default:c.skip()}return u}function t(c){var m,u=m||(m={});u[u.X=1]="X";u[u.Y=2]="Y";u[u.M=3]="M";u[u.Z=4]="Z";for(u=[0,0];c.next();)switch(c.tag()){case m.X:u[0]=c.getDouble();break;case m.Y:u[1]=c.getDouble();break;case m.M:u.push(c.getDouble());
break;case m.Z:u.push(c.getDouble());break;default:c.skip()}return u}function r(c){var m,u=m||(m={});u[u.ORIGIN_POSTION=1]="ORIGIN_POSTION";u[u.SCALE=2]="SCALE";u[u.TRANSLATE=3]="TRANSLATE";u=b[0];for(var w,A;c.next();)switch(c.tag()){case m.ORIGIN_POSTION:u=b[c.getEnum()];break;case m.SCALE:w=h(c.getMessage());break;case m.TRANSLATE:A=t(c.getMessage());break;default:c.skip()}return{originPosition:u,scale:w,translate:A}}function q(c){var m,u=m||(m={});u[u.AREA_FIELD_NAME=1]="AREA_FIELD_NAME";u[u.LENGTH_FIELD_NAME=
2]="LENGTH_FIELD_NAME";u[u.UNITS=3]="UNITS";for(u={};c.next();)switch(c.tag()){case m.AREA_FIELD_NAME:u.shapeAreaFieldName=c.getString();break;case m.LENGTH_FIELD_NAME:u.shapeLengthFieldName=c.getString();break;case m.UNITS:u.units=c.getString();break;default:c.skip()}return u}function v(c){var m,u=m||(m={});u[u.WKID=1]="WKID";u[u.LASTEST_WKID=2]="LASTEST_WKID";u[u.VCS_WKID=3]="VCS_WKID";u[u.LATEST_VCS_WKID=4]="LATEST_VCS_WKID";u[u.WKT=5]="WKT";for(u={};c.next();)switch(c.tag()){case m.WKID:u.wkid=
c.getUInt32();break;case m.WKT:u.wkt=c.getString();break;default:c.skip()}return u}Object.defineProperty(k,"__esModule",{value:!0});var x=f.getLogger("esri.tasks.operations.pbfQueryUtils"),y="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),B="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
z=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],b=["upperLeft","lowerLeft"];k.parsePBFFeatureQuery=function(c){try{var m,u=m||(m={});u[u.QUERY_RESULT=2]="QUERY_RESULT";for(var w=new g(new Uint8Array(c),new DataView(c)),A;w.next();)switch(w.tag()){case m.QUERY_RESULT:c=void 0;var C=w.getMessage(),E=c||(c={});E[E.FEATURE_RESULT=1]="FEATURE_RESULT";for(u={};C.next();)switch(C.tag()){case c.FEATURE_RESULT:var G=void 0,F=C.getMessage(),I=G||(G={});I[I.OBJECT_ID_NAME=
1]="OBJECT_ID_NAME";I[I.UNIQUE_ID_NAME=2]="UNIQUE_ID_NAME";I[I.GLOBAL_ID_NAME=3]="GLOBAL_ID_NAME";I[I.GEOHASH_NAME=4]="GEOHASH_NAME";I[I.GEOMETRY_PROPERTIES=5]="GEOMETRY_PROPERTIES";I[I.SERVER_GENS=6]="SERVER_GENS";I[I.GEOMETRY_TYPE=7]="GEOMETRY_TYPE";I[I.SPATIAL_REFERENCE=8]="SPATIAL_REFERENCE";I[I.EXCEEDED_TRANSFER_LIMIT=9]="EXCEEDED_TRANSFER_LIMIT";I[I.HAS_Z=10]="HAS_Z";I[I.HAS_M=11]="HAS_M";I[I.TRANSFORM=12]="TRANSFORM";I[I.FIELDS=13]="FIELDS";I[I.FEATURES=15]="FEATURES";var M=new p.OptimizedFeatureSet;
for(M.geometryType=n(0);F.next();)switch(F.tag()){case G.OBJECT_ID_NAME:M.objectIdFieldName=F.getString();break;case G.GLOBAL_ID_NAME:M.globalIdFieldName=F.getString();break;case G.GEOHASH_NAME:M.geohashFieldName=F.getString();break;case G.GEOMETRY_PROPERTIES:M.geometryProperties=q(F.getMessage());break;case G.GEOMETRY_TYPE:M.geometryType=n(F.getEnum());break;case G.SPATIAL_REFERENCE:M.spatialReference=v(F.getMessage());break;case G.HAS_Z:M.hasZ=F.getBool();break;case G.HAS_M:M.hasM=F.getBool();break;
case G.TRANSFORM:var Y=F.getMessage();M.transform=r(Y);break;case G.EXCEEDED_TRANSFER_LIMIT:var R=F.getBool();M.exceededTransferLimit=R;break;case G.FIELDS:var S=F.getMessage();M.fields.push(e(S));break;case G.FEATURES:var O=F.getMessage();M.features.push(l(O,M.fields));break;default:F.skip()}var L=M;u.featureResult=L;break;default:C.skip()}A=u;break;default:w.skip()}return A.featureResult}catch(P){return m=new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:P}),x.error(m),
new p.OptimizedFeatureSet}}})},"esri/layers/vectorTiles/layers/graphics/optimizedFeatures":function(){define(["require","exports","../../core/Error","../../core/Logger"],function(D,k,a,f){function g(P,X){return Math.round((X-P.translate[0])/P.scale[0])}function p(P,X){return Math.round((P.translate[1]-X)/P.scale[1])}function n(P,X){return X*P.scale[0]+P.translate[0]}function d(P,X){return P.translate[1]-X*P.scale[1]}function e(P){P=P.coords;return{x:P[0],y:P[1]}}function l(P){var X=new O;X.coords[0]=
P.x;X.coords[1]=P.y;return X}function h(P){P=P.coords;return{x:P[0],y:P[1],z:P[2]}}function t(P){var X=new O;X.coords[0]=P.x;X.coords[1]=P.y;X.coords[2]=P.z;return X}function r(P){P=P.coords;return{x:P[0],y:P[1],m:P[2]}}function q(P){var X=new O;X.coords[0]=P.x;X.coords[1]=P.y;X.coords[2]=P.m;return X}function v(P){P=P.coords;return{x:P[0],y:P[1],z:P[2],m:P[3]}}function x(P){var X=new O;X.coords[0]=P.x;X.coords[1]=P.y;X.coords[2]=P.z;X.coords[3]=P.m;return X}function y(P,X,Q){for(var K=X?Q?4:3:Q?
3:2,U=[],da=0;da<P.coords.length;da+=K){for(var fa=[],ia=0;ia<K;ia++)fa.push(P.coords[da+ia]);U.push(fa)}return X?Q?{points:U,hasZ:X,hasM:Q}:{points:U,hasZ:X}:Q?{points:U,hasM:Q}:{points:U}}function B(P,X,Q){var K=X?Q?4:3:Q?3:2,U=P.coords,da=[],fa=0,ia=0;for(P=P.lengths;ia<P.length;ia++){for(var la=P[ia],ma=[],ta=0;ta<la;ta++){for(var ua=[],Ca=0;Ca<K;Ca++)ua.push(U[fa++]);ma.push(ua)}da.push(ma)}return X?Q?{paths:da,hasZ:X,hasM:Q}:{paths:da,hasZ:X}:Q?{paths:da,hasM:Q}:{paths:da}}function z(P,X,Q){var K=
X?Q?4:3:Q?3:2,U=P.coords,da=[],fa=0,ia=0;for(P=P.lengths;ia<P.length;ia++){for(var la=P[ia],ma=[],ta=0;ta<la;ta++){for(var ua=[],Ca=0;Ca<K;Ca++)ua.push(U[fa++]);ma.push(ua)}da.push(ma)}return X?Q?{rings:da,hasZ:X,hasM:Q}:{rings:da,hasZ:X}:Q?{rings:da,hasM:Q}:{rings:da}}function b(P,X,Q,K){if(!X)return[];switch(X){case "esriGeometryPoint":X=l;K&&Q?X=x:K?X=t:Q&&(X=q);Q=[];for(K=0;K<P.length;K++){var U=P[K],da=U.geometry;U=U.attributes;da=da?X(da):void 0;Q.push(new L(da,U))}return Q;case "esriGeometryMultipoint":X=
Q?K?4:3:K?3:2;Q=[];for(K=0;K<P.length;K++){da=P[K];var fa=da.geometry;da=da.attributes;U=void 0;if(fa){U=new O;U.lengths[0]=fa.points.length;var ia=U.coords,la=0,ma=0;for(fa=fa.points;ma<fa.length;ma++)for(var ta=fa[ma],ua=0;ua<X;ua++)ia[la++]=ta[ua]}Q.push(new L(U,da))}return Q;case "esriGeometryPolyline":X=Q?K?4:3:K?3:2;Q=[];for(K=0;K<P.length;K++){da=P[K];ta=da.geometry;da=da.attributes;U=void 0;if(ta)for(U=new O,ia=U.lengths,la=U.coords,fa=ma=0,ta=ta.paths;fa<ta.length;fa++){ua=ta[fa];for(var Ca=
0,xa=ua;Ca<xa.length;Ca++)for(var Ba=xa[Ca],Z=0;Z<X;Z++)la[ma++]=Ba[Z];ia.push(ua.length)}Q.push(new L(U,da))}return Q;case "esriGeometryPolygon":X=Q?K?4:3:K?3:2;Q=[];for(K=0;K<P.length;K++){U=P[K];ua=U.geometry;da=U.centroid;U=U.attributes;ia=void 0;if(ua)for(ia=new O,la=ia.lengths,ma=ia.coords,ta=fa=0,ua=ua.rings;ta<ua.length;ta++){Ca=ua[ta];xa=0;for(Ba=Ca;xa<Ba.length;xa++){Z=Ba[xa];for(var ka=0;ka<X;ka++)ma[fa++]=Z[ka]}la.push(Ca.length)}da?Q.push(new L(ia,U,l(da))):Q.push(new L(ia,U))}return Q;
default:return F.error("convertToFeatureSet:unknown-geometry",new a("Unable to parse unknown geometry type "+X)),[]}}function c(P,X,Q,K,U,da){U=I[U];var fa=X.coords;X=X.lengths;var ia=Q?K?4:3:K?3:2;Q=Q?K?R:Y:K?Y:M;P.lengths.length=0;P.coords.length=0;if(!fa.length)return P;if(!X.length)return Q(P.coords,fa,0,0,g(da,fa[0]),p(da,fa[1])),P.lengths.length=0,P.coords.length=ia,P;for(var la,ma,ta,ua=0,Ca,xa=0,Ba=0;Ba<X.length;Ba++){var Z=X[Ba];if(!(Z<U)){var ka=0;Ca=xa;ma=K=g(da,fa[ua]);ta=la=p(da,fa[ua+
1]);Q(P.coords,fa,Ca,ua,ma,ta);ka++;ua+=ia;Ca+=ia;for(var qa=1;qa<Z;qa++,ua+=ia)if(ma=g(da,fa[ua]),ta=p(da,fa[ua+1]),ma!==K||ta!==la)Q(P.coords,fa,Ca,ua,ma-K,ta-la),Ca+=ia,ka++,K=ma,la=ta;ka>=U&&(P.lengths.push(ka),xa=Ca)}}P.coords.length=xa;return P.coords.length?P:null}function m(P,X,Q,K,U){var da=X.coords;X=X.lengths;var fa=Q?K?R:Y:K?Y:M;Q=Q?K?4:3:K?3:2;if(!da.length)return P.lengths.length=0,P.coords.length=0,P;if(!X.length)return fa(P.coords,da,0,0,n(U,da[0]),d(U,da[1])),P.lengths.length=0,P.coords.length=
Q,P;var ia=U.scale;K=ia[0];ia=ia[1];for(var la=0,ma=0;ma<X.length;ma++){var ta=X[ma];P.lengths[ma]=ta;var ua=n(U,da[la]),Ca=d(U,da[la+1]);fa(P.coords,da,la,la,ua,Ca);la+=Q;for(var xa=1;xa<ta;xa++,la+=Q)ua+=da[la]*K,Ca-=da[la+1]*ia,fa(P.coords,da,la,la,ua,Ca)}P.lengths.length=X.length;P.coords.length=da.length;return P}function u(P,X,Q,K,U,da){da=U?da?4:3:da?3:2;var fa=Q,ia=Q+da,la=0,ma=0,ta=Q=0,ua=0,Ca=0;for(--K;Ca<K;Ca++,fa+=da,ia+=da){var xa=X[fa],Ba=X[fa+1],Z=X[fa+2],ka=X[ia],qa=X[ia+1],ha=X[ia+
2],ea=xa*qa-ka*Ba;ta+=ea;la+=(xa+ka)*ea;ma+=(Ba+qa)*ea;U&&(ea=xa*ha-ka*Z,Q+=(Z+ha)*ea,ua+=ea);xa<P[0]&&(P[0]=xa);xa>P[1]&&(P[1]=xa);Ba<P[2]&&(P[2]=Ba);Ba>P[3]&&(P[3]=Ba);U&&(Z<P[4]&&(P[4]=Z),Z>P[5]&&(P[5]=Z))}0<ta&&(ta*=-1);0<ua&&(ua*=-1);if(!ta)return null;P=[la,ma,.5*ta];U&&(P[3]=Q,P[4]=.5*ua);return P}function w(P,X,Q,K,U){U=K?U?4:3:U?3:2;for(var da=X,fa=X+U,ia=0,la=0,ma=0,ta=0,ua=0,Ca=Q-1;ua<Ca;ua++,da+=U,fa+=U){var xa=P[da],Ba=P[da+1],Z=P[da+2],ka=P[fa],qa=P[fa+1],ha=P[fa+2],ea=K?C(xa,Ba,Z,ka,
qa,ha):A(xa,Ba,ka,qa);ea&&(ia+=ea,K?(xa=G(xa,Ba,Z,ka,qa,ha),la+=ea*xa[0],ma+=ea*xa[1],ta+=ea*xa[2]):(xa=E(xa,Ba,ka,qa),la+=ea*xa[0],ma+=ea*xa[1]))}return 0<ia?K?[la/ia,ma/ia,ta/ia]:[la/ia,ma/ia]:0<Q?K?[P[X],P[X+1],P[X+2]]:[P[X],P[X+1]]:null}function A(P,X,Q,K){P=Q-P;X=K-X;return Math.sqrt(P*P+X*X)}function C(P,X,Q,K,U,da){P=K-P;X=U-X;Q=da-Q;return Math.sqrt(P*P+X*X+Q*Q)}function E(P,X,Q,K){return[P+.5*(Q-P),X+.5*(K-X)]}function G(P,X,Q,K,U,da){return[P+.5*(K-P),X+.5*(U-X),Q+.5*(da-Q)]}Object.defineProperty(k,
"__esModule",{value:!0});var F=f.getLogger("esri.tasks.support.optimizedFeatureSet"),I={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},M=function(P,X,Q,K,U,da){P[Q]=U;P[Q+1]=da},Y=function(P,X,Q,K,U,da){P[Q]=U;P[Q+1]=da;P[Q+2]=X[K+2]},R=function(P,X,Q,K,U,da){P[Q]=U;P[Q+1]=da;P[Q+2]=X[K+2];P[Q+3]=X[K+3]};k.quantizeX=g;k.quantizeY=p;k.hydrateX=n;k.hydrateY=d;var S=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=
this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();k.OptimizedFeatureSet=S;var O=function(){return function(P,X){void 0===P&&(P=[]);void 0===X&&(X=[]);this.lengths=P;this.coords=X}}();k.OptimizedGeometry=O;var L=function(){return function(P,X,Q){void 0===P&&(P=null);void 0===X&&(X={});this.geometry=P;this.attributes=X;Q&&(this.centroid=Q)}}();k.OptimizedFeature=L;k.convertToPoint=
function(P,X,Q){return X?Q?v(P):h(P):Q?r(P):e(P)};k.convertToMultipoint=y;k.convertToPolyline=B;k.convertToPolygon=z;k.convertFromFeatures=b;k.convertToFeatureSet=function(P){var X=[],Q=P.objectIdFieldName,K=P.spatialReference,U=P.transform,da=P.fields,fa=P.hasM,ia=P.hasZ,la=P.features,ma=P.geometryType;P=P.exceededTransferLimit;switch(ma){case "esriGeometryPoint":X=e;fa&&ia?X=v:fa?X=h:ia&&(X=r);for(var ta=[],ua=0;ua<la.length;ua++){var Ca=la[ua],xa=Ca.geometry;Ca=Ca.attributes;xa=xa?X(xa):null;ta.push({attributes:Ca,
geometry:xa})}X=ta;break;case "esriGeometryMultipoint":X=[];for(ta=0;ta<la.length;ta++)xa=la[ta],ua=xa.geometry,xa=xa.attributes,Ca=void 0,ua&&(Ca=y(ua,ia,fa)),X.push({attributes:xa,geometry:Ca});break;case "esriGeometryPolyline":X=[];for(ta=0;ta<la.length;ta++)xa=la[ta],ua=xa.geometry,xa=xa.attributes,Ca=void 0,ua&&(Ca=B(ua,ia,fa)),X.push({attributes:xa,geometry:Ca});break;case "esriGeometryPolygon":X=[];for(ta=0;ta<la.length;ta++){Ca=la[ta];xa=Ca.geometry;ua=Ca.attributes;var Ba=Ca.centroid;Ca=
void 0;xa&&(Ca=z(xa,ia,fa));Ba?(xa=e(Ba),X.push({attributes:ua,centroid:xa,geometry:Ca})):X.push({attributes:ua,geometry:Ca})}break;default:F.error("convertToFeatureSet:unknown-geometry",new a("Unable to parse unknown geometry type "+ma))}Q={features:X,fields:da,geometryType:ma,objectIdFieldName:Q,spatialReference:K};U&&(Q.transform=U);P&&(Q.exceededTransferLimit=P);fa&&(Q.hasM=fa);ia&&(Q.hasZ=ia);return Q};k.convertFromFeatureSet=function(P){var X=new S,Q=P.hasM,K=P.hasZ,U=P.features,da=P.objectIdFieldName,
fa=P.spatialReference,ia=P.geometryType,la=P.exceededTransferLimit,ma=P.transform;X.fields=P.fields;X.geometryType=ia;X.objectIdFieldName=da;X.spatialReference=fa;X.features=b(U,ia,K,Q);la&&(X.exceededTransferLimit=la);Q&&(X.hasM=Q);K&&(X.hasZ=K);ma&&(X.transform=ma);return X};k.hydrateOptimizedFeatureSet=function(P){var X=P.transform,Q=P.hasM,K=P.hasZ;if(!X)return P;for(var U=0,da=P.features;U<da.length;U++){var fa=da[U];m(fa.geometry,fa.geometry,Q,K,X);fa.centroid&&m(fa.centroid,fa.centroid,Q,K,
X)}P.transform=null;return P};k.quantizeOptimizedFeatureSet=function(P,X){var Q=X.geometryType,K=X.features,U=X.hasM,da=X.hasZ;if("esriGeometryEnvelope"===Q)return F.error(new a("optimized-features:invalid-geometry-type",'FeatureSet with geometry type "'+Q+'" is not supported')),X;if(!P)return X;for(var fa=0;fa<K.length;fa++){var ia=K[fa],la=new L(new O,ia.attributes);c(la.geometry,ia.geometry,U,da,Q,P);ia.centroid&&(la.centroid=new O,c(la.centroid,ia.centroid,U,da,"esriGeometryPoint",P));K[fa]=la}X.transform=
P;return X};k.quantizeOptimizedGeometry=c;k.quantizeOptimizedGeometryRemoveCollinear=function(P,X,Q,K,U,da){U=I[U];var fa=X.coords;X=X.lengths;var ia=Q?K?4:3:K?3:2;Q=Q?K?R:Y:K?Y:M;P.lengths.length=0;P.coords.length=0;if(!fa.length)return P;if(!X.length)return Q(P.coords,fa,0,0,g(da,fa[0]),p(da,fa[1])),P.lengths.length=0,P.coords.length=ia,P;for(var la,ma,ta,ua=0,Ca,xa=0,Ba=0;Ba<X.length;Ba++){var Z=X[Ba];if(!(Z<U)){var ka=0;Ca=xa;K=la=g(da,fa[ua]);ta=ma=p(da,fa[ua+1]);Q(P.coords,fa,Ca,ua,K,ta);ka++;
ua+=ia;for(var qa=!1,ha=0,ea=0,na=1;na<Z;na++,ua+=ia)if(K=g(da,fa[ua]),ta=p(da,fa[ua+1]),K!==la||ta!==ma)la=K-la,ma=ta-ma,qa&&(0===ha&&0===la||0===ea&&0===ma)?(ha+=la,ea+=ma):(qa=!0,ha=la,ea=ma,Ca+=ia,ka++),Q(P.coords,fa,Ca,ua,ha,ea),la=K,ma=ta;qa&&(Ca+=ia,Q(P.coords,fa,Ca,ua,ha,ea));ka>=U&&(P.lengths.push(ka),xa=Ca)}}P.coords.length=xa;return P.coords.length?P:null};k.getBoundsOptimizedGeometry=function(P,X,Q,K){Q=Q?K?4:3:K?3:2;X=X.coords;for(var U=K=Number.POSITIVE_INFINITY,da=Number.NEGATIVE_INFINITY,
fa=Number.NEGATIVE_INFINITY,ia=0;ia<X.length;ia+=Q){var la=X[ia],ma=X[ia+1];K=Math.min(K,la);da=Math.max(da,la);U=Math.min(U,ma);fa=Math.max(fa,ma)}P[0]=K;P[1]=U;P[2]=da;P[3]=fa;return P};k.getQuantizedBoundsOptimizedGeometry=function(P,X,Q,K){Q=Q?K?4:3:K?3:2;K=X.coords;var U=Number.POSITIVE_INFINITY,da=Number.POSITIVE_INFINITY,fa=Number.NEGATIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,la=0,ma=0;for(X=X.lengths;ma<X.length;ma++){var ta=X[ma],ua=K[la],Ca=K[la+1];U=Math.min(ua,U);da=Math.min(Ca,da);fa=
Math.max(ua,fa);ia=Math.max(Ca,ia);la+=Q;for(var xa=1;xa<ta;xa++,la+=Q){var Ba=K[la],Z=K[la+1];ua+=Ba;Ca+=Z;0>Ba&&(U=Math.min(U,ua));0<Ba&&(fa=Math.max(fa,ua));0>Z?da=Math.min(da,Ca):0<Z&&(ia=Math.max(ia,Ca))}}P[0]=U;P[1]=da;P[2]=fa;P[3]=ia;return P};k.hydrateOptimizedGeometry=m;k.getCentroidOptimizedGeometry=function(P,X,Q,K){if(!X||!X.lengths.length)return null;P.lengths.length=0;P.coords.length=0;for(var U=P.coords,da=[],fa=Q?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],ia=X.lengths,la=X.coords,ma=Q?K?4:3:K?3:2,ta=0,ua=0;ua<ia.length;ua++){var Ca=ia[ua],xa=u(fa,la,ta,Ca,Q,K);xa&&da.push(xa);ta+=Ca*ma}da.sort(function(Ba,Z){var ka=Ba[2]-Z[2];0===ka&&Q&&(ka=Ba[4]-Z[4]);return ka});da.length&&(ma=6*da[0][2],U[0]=da[0][0]/ma,U[1]=da[0][1]/ma,Q&&(ma=6*da[0][4],U[2]=0!==ma?da[0][3]/ma:0),U[0]<
fa[0]||U[0]>fa[1]||U[1]<fa[2]||U[1]>fa[3]||Q&&(U[2]<fa[4]||U[2]>fa[5]))&&(U.length=0);if(!U.length)if(X=X.lengths[0]?w(la,0,ia[0],Q,K):null)U[0]=X[0],U[1]=X[1],Q&&2<X.length&&(U[2]=X[2]);else return null;return P};k.lineCentroid=w;k.getLength2D=A;k.getLength3D=C;k.getMidpoint2D=E;k.getMidpoint3D=G})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(D,k,a,f){function g(e,l){e.length=0;l.forEach(function(h){return e.push(h)});
return e}var p=new Set,n=[],d=new Map;return function(){function e(l){var h=this;this._keysToRequests=new Map;this.tileInfoView=null;var t=l.strategy&&"scale-first"!==l.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=l.tileInfoView;this._queues=l.tileServers&&0<l.tileServers.length?l.tileServers.map(function(r){return new a({concurrency:l.concurrency||6,process:function(q){q=h._keysToRequests.get(q);return l.process(q,r)},peeker:t})}):[new a({concurrency:l.concurrency||
6,process:function(r){r=h._keysToRequests.get(r);return l.process(r)},peeker:t})]}Object.defineProperty(e.prototype,"length",{get:function(){return this._queues.reduce(function(l,h){return l+h.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});e.prototype.clear=function(){for(var l=0,h=this._queues;l<h.length;l++)h[l].clear();this._keysToRequests.clear()};e.prototype.find=function(l,
h){for(var t=this,r=0,q=this._queues;r<q.length;r++){var v=q[r].find(function(x){return l(t._keysToRequests.get(x).key)});if(v)return v}};e.prototype.get=function(l){l="string"===typeof l?l:l.id;for(var h=0,t=this._queues;h<t.length;h++){var r=t[h].get(l);if(r)return r}};e.prototype.getRequest=function(l){return this._keysToRequests.get("string"===typeof l?l:l.id)};e.prototype.has=function(l){return"string"===typeof l?this._keysToRequests.has(l):this._keysToRequests.has(l.id)};e.prototype.isOngoing=
function(l){var h="string"===typeof l?l:l.id;return this.has(h)&&this._queues.some(function(t){return t.isOngoing(h)})};e.prototype.pause=function(){for(var l=0,h=this._queues;l<h.length;l++)h[l].pause()};e.prototype.push=function(l){var h=this,t=l.key.id,r=this._queues[l.key.row%this._queues.length].push(t);this._keysToRequests.set(t,l);r.then(function(){h._keysToRequests["delete"](t)});r["catch"](function(){h._keysToRequests["delete"](t)});return r};e.prototype.reset=function(){for(var l=0,h=this._queues;l<
h.length;l++)h[l].reset()};e.prototype.resume=function(){for(var l=0,h=this._queues;l<h.length;l++)h[l].resume()};e.prototype._peekByScaleFirst=function(l){if(!this.state)return l[0];for(var h=this.tileInfoView,t=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,q=0;q<l.length;q++){var v=this._keysToRequests.get(l[q]),x=this.tileInfoView.getTileScale(v.key);d.has(x)||(d.set(x,[]),t=Math.max(x,t),r=Math.min(x,r));d.get(x).push(v.key);p.add(x)}var y=this.state.scale;d.has(y)||(g(n,p),n.sort(),y=n.reduce(function(c,
m,u,w){return Math.abs(m-y)<Math.abs(c-y)?m:c},n[0]));y=Math.min(y,t);y=Math.max(y,r);l=d.get(y);var B=h.getClosestInfoForScale(y),z=B.getColumnForX(this.state.center[0]),b=B.getRowForY(this.state.center[1]);l.sort(function(c,m){var u=B.denormalizeCol(c.col,c.world),w=B.denormalizeCol(m.col,m.world);return Math.sqrt((z-u)*(z-u)+(b-c.row)*(b-c.row))-Math.sqrt((z-w)*(z-w)+(b-m.row)*(b-m.row))});p.clear();d.clear();return l[0].id};e.prototype._peekByCenterFirst=function(l){if(!this.state)return l[0];
for(var h=this.tileInfoView,t=this.state.center,r=[0,0],q=Number.POSITIVE_INFINITY,v=null,x=0;x<l.length;x++){var y=this._keysToRequests.get(l[x]);h.getTileCoords(r,y.key);var B=f.distance(r,t);B<q&&(q=B,v=y.key)}return v.id};return e}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(D,k,a,f,g){return function(){function p(n){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=
null;this.concurrency=1;this.ordered=!1;n.concurrency&&(this.concurrency=n.concurrency);this.ordered=!!n.ordered;this._queue=new f(n.peeker?{peeker:n.peeker}:void 0);this.process=n.process}Object.defineProperty(p.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});p.prototype.clear=function(){this._queue.clear();var n=[];this._processingItems.forEach(function(d){return n.push(d.resultPromise)});this._processingItems.clear();n.forEach(function(d){return d.cancel()});
n.length=0;this._apiPromises.forEach(function(d){return n.push(d)});this._apiPromises.clear();n.forEach(function(d){return d.cancel()});this._cancelNext()};p.prototype.find=function(n,d){var e=this,l=void 0;this._apiPromises.forEach(function(h,t){n.call(d,t)&&(l=e._apiPromises.get(t).promise)});return l};p.prototype.get=function(n){return(n=this._apiPromises.get(n))&&n.promise||void 0};p.prototype.isOngoing=function(n){return this._processingItems.has(n)};p.prototype.has=function(n){return this._apiPromises.has(n)};
p.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};p.prototype.push=function(n){var d=this;if(this._apiPromises.has(n))return this._apiPromises.get(n).promise;var e=new a(function(l){var h=d._processingItems.get(n);h?h.resultPromise.cancel(l):(d._remove(n),d._scheduleNext())});this._add(n,e);this._scheduleNext();return e.promise};p.prototype.reset=function(){var n=[];this._processingItems.forEach(function(l){return n.push(l)});this._processingItems.clear();for(var d=
0;d<n.length;d++){var e=n[d];e.resultPromise.isFulfilled()?this._processReset(e):(e.isReset=!0,e.resultPromise.cancel())}};p.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};p.prototype._scheduleNext=function(){var n=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=g.schedule(function(){n._scheduledNextHandle=null;n._next()}))};p.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};
p.prototype._processResult=function(n,d){this._remove(n.item);this._scheduleNext();n.dfd.resolve(d)};p.prototype._processError=function(n,d){n.isReset?this._processReset(n):(this._remove(n.item),this._scheduleNext(),n.dfd.reject(d))};p.prototype._processReset=function(n){this._remove(n.item);this._add(n.item,n.dfd);this._scheduleNext()};p.prototype._processOrdered=function(n,d){var e=this,l=!1;if(n.isReset)this._processReset(n);else{n.result=d;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(q){l||
(q.result?e._itemsToProcess.push(q):l=!0)});for(var h=0,t=this._itemsToProcess;h<t.length;h++){var r=t[h];!1===r.result.ok?this._processError(r,r.result.error):this._processResult(r,r.result.value)}this._itemsToProcess.length=0}};p.prototype._process=function(n){var d=this;if(null!=n){var e=this._apiPromises.get(n),l=this.process(n);if(l&&"function"===typeof l.then){var h={item:n,resultPromise:l,result:null,dfd:e,isReset:!1};this._processingItems.set(n,h);this.ordered?l.then(function(t){return d._processOrdered(h,
{ok:!0,value:t})},function(t){return d._processOrdered(h,{ok:!1,error:t})}):l.then(function(t){return d._processResult(h,t)},function(t){return d._processError(h,t)})}else e.resolve(l),this._remove(n)}};p.prototype._add=function(n,d){this._apiPromises.set(n,d);this._queue.push(n)};p.prototype._remove=function(n){this._queue.remove(n);this._apiPromises["delete"](n);this._processingItems["delete"](n)};p.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),
this._scheduledNextHandle=null)};return p}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(D,k){return function(){function a(f){this._items=[];this._itemSet=new Set;this._peeker=function(g){return g[0]};this._length=0;f&&f.peeker&&(this._peeker=f.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=
function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(f){this.contains(f)||this._add(f)};a.prototype.contains=function(f){return 0<this._length&&this._itemSet.has(f)};a.prototype.pop=function(){if(0!==this._length){var f=this.peek();this._remove(f);return f}};a.prototype.remove=function(f){this.contains(f)&&this._remove(f)};a.prototype._add=function(f){this._items.push(f);this._itemSet.add(f);this._length++};a.prototype._remove=function(f){this._itemSet["delete"](f);
this._items.splice(this._items.indexOf(f),1);this._length--};return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./enums","./TileKey"],function(D,k,a,f,g){var p=new g(0,0,0,0),n=new Map,d=[],e=[];return function(){function l(h){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=h.acquireTile;
this.releaseTile=h.releaseTile;this.tileInfoView=h.tileInfoView;h.cachePolicy&&(this.cachePolicy=h.cachePolicy);h.coveragePolicy&&(this.coveragePolicy=h.coveragePolicy);null!=h.buffer&&(this.buffer=h.buffer)}l.prototype.destroy=function(){this.clear()};l.prototype.update=function(h){var t=this,r=this.tileIndex,q=this.tileInfoView.getTileCoverage(h.state,this.buffer,this.coveragePolicy);if(q){var v=q.spans,x=q.lodInfo,y=x.level,B=h.state.resolution,z=!h.stationary&&B>this._previousResolution;this._previousResolution=
B;r.forEach(function(E){return E.visible=!0});this.tiles.length=0;n.clear();var b=0,c=0;if(0<v.length)for(var m=0;m<v.length;m++){h=v[m];for(var u=h.row,w=h.colTo,A=h.colFrom;A<=w;A++)b++,h=p.set(y,u,x.normalizeCol(A),x.getWorldForColumn(A)).id,r.has(h)?(B=r.get(h),B.status!==f.TileStatus.INITIALIZED&&c++,B.attached?n.set(h,B):B.attached||z||this._addParentTile(h,n)):(B=this.acquireTile(p),this.tileIndex.set(h,B),z||this._addParentTile(h,n))}var C=c===b;e.length=0;d.length=0;r.forEach(function(E,
G){p.set(G);if(!n.has(G)){var F=t.tileInfoView.intersects(q,p);!F||!z&&C?"purge"===t.cachePolicy&&E.status!==f.TileStatus.MODIFIED&&E.status!==f.TileStatus.READY?d.push(G):(p.level>y||!F)&&d.push(G):E.attached?e.push(G):p.level>y&&d.push(G)}});for(v=0;v<e.length;v++)h=e[v],(B=r.get(h))&&B.attached&&n.set(h,B);for(v=0;v<d.length;v++)h=d[v],B=r.get(h),this.releaseTile(B),r["delete"](h);n.forEach(function(E){return t.tiles.push(E)});r.forEach(function(E){n.has(E.key.id)||(E.visible=!1)});e.length=0;
d.length=0;n.clear();return C}};l.prototype.clear=function(){var h=this,t=this.tileIndex;t.forEach(function(r){h.releaseTile(r)});t.clear()};l.prototype._addParentTile=function(h,t){for(var r=h,q=null;;){r=this.tileInfoView.getTileParentId(r);if(!r)break;if(this.tileIndex.has(r)&&(q=this.tileIndex.get(r))&&q.attached){t.has(q.key.id)||t.set(q.key.id,q);break}}};return l}()})},"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"*now":function(D){D(['dojo/i18n!*preload*esri/layers/support/nls/webglDeps*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/support/webglDeps",["./WebGLRenderer","../OnDemandDrillMode"],function(D,k){return{WebGLRenderer:D,OnDemandDrillMode:k}});