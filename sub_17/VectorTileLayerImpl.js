// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.41/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
require({cache:{"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n){function p(){}b={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var l=F(c,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(m,r,t,x,v){g.isObject(m)?(g.mixin(this,m),this.spatialReference&&(this.spatialReference=
n.createSpatialReference(this.spatialReference))):this.update(m,r,t,x,v);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new d((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new d(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new d(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new d(this.xmin,
this.ymin,this.spatialReference)},getBottomRight:function(){return new d(this.xmax,this.ymin,this.spatialReference)},centerAt:function(m){var r=this.getCenter(),t=m.x-r.x;m=m.y-r.y;return new l(this.xmin+t,this.ymin+m,this.xmax+t,this.ymax+m,this.spatialReference)},update:function(m,r,t,x,v){this.xmin=m;this.ymin=r;this.xmax=t;this.ymax=x;this.spatialReference=v;this.clearCache();return this},offset:function(m,r){return new l(this.xmin+m,this.ymin+r,this.xmax+m,this.ymax+r,this.spatialReference)},
expand:function(m){var r=(1-m)/2;m=this.getWidth()*r;r*=this.getHeight();return new l(this.xmin+m,this.ymin+r,this.xmax-m,this.ymax-r,this.spatialReference)},intersects:function(m){if(!m)return!1;var r=m.type,t=this.spatialReference,x=m.spatialReference;t&&x&&!t.equals(x)&&t._canProject(x)&&(m=t.isWebMercator()?f.geographicToWebMercator(m):f.webMercatorToGeographic(m,!0));switch(r){case "point":return this.contains(m);case "multipoint":return this._intersectsMultipoint(m);case "extent":return this._intersectsExtent(m);
case "polygon":return this._intersectsPolygon(m);case "polyline":return this._intersectsPolyline(m)}},normalize:function(){var m=this._normalize(!1,!0);a.isArray(m)||(m=[m]);return m},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var m=this.spatialReference,r=m&&m._getInfo(),t=[],x=0;if(r&&this._isOutOfBounds(r)){var v=this;x=v.xmin;var z=v.ymin,A=v.ymax,B=r.valid[0],u=r.valid[1];v.getWidth()>2*u&&(v=v.getCenter(),v=new l(v.x-u,z,v.x+u,A,new k(m.toJson())));x=v.xmin-
x;var w=this._normalizeX(v.xmin,r);r=this._normalizeX(v.xmax,r);w.frameId===r.frameId?t.push(new l(w.x,z,r.x,A,new k(m.toJson()))):t.push(new l(w.x,z,u,A,new k(m.toJson())),new l(B,z,r.x,A,new k(m.toJson())))}else t.push(this.getExtent());return{extents:t,marginLeft:x}},_intersectsMultipoint:function(m){var r=m.points.length,t;for(t=0;t<r;t++)if(this.contains(m.getPoint(t)))return!0;return!1},_intersectsExtent:function(m){var r,t,x=!1;if(this.xmin<=m.xmin){var v=m.xmin;this.xmax<v?x=!0:r=Math.min(this.xmax,
m.xmax)-v}else v=this.xmin,m.xmax<v?x=!0:r=Math.min(this.xmax,m.xmax)-v;if(this.ymin<=m.ymin){var z=m.ymin;this.ymax<z?x=!0:t=Math.min(this.ymax,m.ymax)-z}else z=this.ymin,m.ymax<z?x=!0:t=Math.min(this.ymax,m.ymax)-z;return x?null:new l(v,z,v+r,z+t,this.spatialReference)},_intersectsPolygon:function(m){var r=[this.xmin,this.ymax],t=[this.xmax,this.ymax],x=[this.xmin,this.ymin],v=[this.xmax,this.ymin],z=[r,t,x,v];r=[[x,r],[r,t],[t,v],[v,x]];x=m.rings;v=x.length;var A=new d(0,0,this.spatialReference);
var B=z.length;for(t=0;t<B;t++)if(A.update(z[t][0],z[t][1]),m.contains(A))return!0;A.setSpatialReference(m.spatialReference);for(t=0;t<v;t++)if(z=x[t],B=z.length){var u=z[0];A.update(u[0],u[1]);if(this.contains(A))return!0;for(m=1;m<B;m++){var w=z[m];A.update(w[0],w[1]);if(this.contains(A)||this._intersectsLine([u,w],r))return!0;u=w}}return!1},_intersectsPolyline:function(m){var r=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,
this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],t,x=m.paths,v=x.length,z,A=new d(0,0,m.spatialReference);for(m=0;m<v;m++){var B=x[m];if(z=B.length){var u=B[0];A.update(u[0],u[1]);if(this.contains(A))return!0;for(t=1;t<z;t++){var w=B[t];A.update(w[0],w[1]);if(this.contains(A)||this._intersectsLine([u,w],r))return!0;u=w}}}return!1},_intersectsLine:function(m,r){var t=h._getLineIntersection2,x,v=r.length;for(x=0;x<v;x++)if(t(m,r[x]))return!0;return!1},contains:function(m){if(!m)return!1;var r=
m.type;if("point"===r){var t=this.spatialReference,x=m.spatialReference;r=m.x;m=m.y;t&&x&&!t.equals(x)&&t._canProject(x)&&(m=t.isWebMercator()?d.lngLatToXY(r,m):d.xyToLngLat(r,m,!0),r=m[0],m=m[1]);return r>=this.xmin&&r<=this.xmax&&m>=this.ymin&&m<=this.ymax}return"extent"===r?this._containsExtent(m):!1},_containsExtent:function(m){var r=m.xmin,t=m.ymin,x=m.xmax,v=m.ymax,z=m.spatialReference;m=new d(r,t,z);r=new d(r,v,z);v=new d(x,v,z);t=new d(x,t,z);return this.contains(m)&&this.contains(r)&&this.contains(v)&&
this.contains(t)?!0:!1},union:function(m){return new l(Math.min(this.xmin,m.xmin),Math.min(this.ymin,m.ymin),Math.max(this.xmax,m.xmax),Math.max(this.ymax,m.ymax),this.spatialReference)},getExtent:function(){var m=this.spatialReference;return new l(this.xmin,this.ymin,this.xmax,this.ymax,m&&new k(m.toJson()))},_shiftCM:function(m){var r=this.getCacheValue("_shifted");if(!r){r=new l(this.toJson());var t=r.spatialReference;if(m=m||t._getInfo()){var x=this._getCM(m);if(x){var v=t._isWebMercator()?f.webMercatorToGeographic(x):
x;r.xmin-=x.x;r.xmax-=x.x;t._isWebMercator()||(v.x=this._normalizeX(v.x,m).x);r.setSpatialReference(new k(g.substitute({Central_Meridian:v.x},4326===t.wkid?m.altTemplate:m.wkTemplate)))}}this.setCacheValue("_shifted",r)}return r},_getCM:function(m){var r;this._isOutOfBounds(m)&&(r=this.getCenter());return r},_isOutOfBounds:function(m){var r=m.valid[0];m=m.valid[1];var t=this.xmin,x=this.xmax;return!(t>=r&&t<=m&&x>=r&&x<=m)},_normalize:function(m,r,t){var x=new l(this.toJson()),v=x.spatialReference;
if(v&&(t=t||v._getInfo())){var z=q.map(this._getParts(t),function(A){return A.extent});return 2<z.length?m?this._shiftCM(t):x.update(t.valid[0],x.ymin,t.valid[1],x.ymax,v):2===z.length?m?this._shiftCM(t):r?z:{rings:q.map(z,function(A){return[[A.xmin,A.ymin],[A.xmin,A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]}),spatialReference:v}:z[0]||x}return x},_getParts:function(m){var r=this.getCacheValue("_parts");if(!r){r=[];var t=this.xmin,x=this.xmax,v=this.ymin,z=this.ymax,A=this.spatialReference,
B=this.getWidth(),u=t,w=x,D=0,y=0;m=m||A._getInfo();var C=m.valid[0];var G=m.valid[1];y=this._normalizeX(t,m);t=y.x;D=y.frameId;y=this._normalizeX(x,m);x=y.x;y=y.frameId;m=t===x&&0<B;if(B>2*G){B=new l(u<w?t:x,v,G,z,A);t=new l(C,v,u<w?x:t,z,A);G=new l(0,v,G,z,A);v=new l(C,v,0,z,A);A=[];C=[];B.contains(G)&&A.push(D);B.contains(v)&&C.push(D);t.contains(G)&&A.push(y);t.contains(v)&&C.push(y);for(z=D+1;z<y;z++)A.push(z),C.push(z);r.push({extent:B,frameIds:[D]},{extent:t,frameIds:[y]},{extent:G,frameIds:A},
{extent:v,frameIds:C})}else t>x||m?r.push({extent:new l(t,v,G,z,A),frameIds:[D]},{extent:new l(C,v,x,z,A),frameIds:[y]}):r.push({extent:new l(t,v,x,z,A),frameIds:[D]});this.setCacheValue("_parts",r)}return r},_normalizeX:function(m,r){var t=0,x=r.valid[0],v=r.valid[1],z=2*v;m>v?(t=Math.ceil(Math.abs(m-v)/z),m-=t*z):m<x&&(t=Math.ceil(Math.abs(m-x)/z),m+=t*z,t=-t);return{x:m,frameId:t}},toJson:function(){var m={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},r=this.spatialReference;r&&
(m.spatialReference=r.toJson());return m}});p.prototype=l.prototype;l.simpleConstructor=p;l.defaultProps=b;a.setObject("geometry.Extent",l,e);e.geometry.defaultExtent=b;return l})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(F,q,a){F=function(){return this}();var b=F.location,e=b.pathname;a=b.protocol;b={version:"3.41",_appBaseUrl:a+"//"+b.host+e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]))};q.noGlobals||(F.esri=b);(b.dijit=b.dijit||
{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";return b})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(F,q,a,b,e,g,k,c,d){function f(x,v,z,A){(v=v&&v[x])?v={formatType:v.formatType,options:v}:A&&-1!==F.indexOf(A.properties||"",x)?v={formatType:A.formatter||"DateString",options:null}:z&&-1!==F.indexOf(z.properties||"",x)&&(v={formatType:z.formatter||
"NumberFormat",options:null});return v}function h(x,v,z){return[b.isString(x)?x.split(""):x,v||a.global,b.isString(z)?new Function("item","index","array",z):z]}function n(x){return void 0!==x&&null!==x}function p(x){return n(x)?x:""}function l(x,v,z,A){var B=z.match(/([^\(]+)(\([^\)]+\))?/i);z=b.trim(B[1]);var u=B[2]?b.trim(B[2]):null;B=v[x];A=A||(u?q.fromJson(u.replace(/^\(/,"({").replace(/\)$/,"})")):{});u=A.utcOffset;if(-1===F.indexOf(r,z))z=b.getObject(z),b.isFunction(z)&&(B=z(B,x,v,A));else if("number"===
typeof B||"string"===typeof B&&B&&!isNaN(Number(B)))switch(B=Number(B),z){case "NumberFormat":return k.format(B,A);case "DateString":x=new Date(B);if(A.local||A.systemLocale)return A.systemLocale?x.toLocaleDateString()+(A.hideTime?"":" "+x.toLocaleTimeString()):x.toDateString()+(A.hideTime?"":" "+x.toTimeString());x=x.toUTCString();A.hideTime&&(x=x.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return x;case "DateFormat":return x=new Date(B),n(u)&&(x=e.add(x,"minute",x.getTimezoneOffset()-u)),c.format(x,
A)}return p(B)}function m(x,v){var z;if(v)for(z in x)x.hasOwnProperty(z)&&(void 0===x[z]?delete x[z]:x[z]instanceof Object&&m(x[z],!0));else for(z in x)x.hasOwnProperty(z)&&void 0===x[z]&&delete x[z];return x}var r=["NumberFormat","DateString","DateFormat"],t=/<\/?[^>]+>/g;g={valueOf:function(x,v){for(var z in x)if(x[z]==v)return z;return null},stripTags:function(x){if(x){var v=typeof x;if("string"===v)x=x.replace(t,"");else if("object"===v)for(var z in x)(v=x[z])&&"string"===typeof v&&(v=v.replace(t,
"")),x[z]=v}return x},substitute:function(x,v,z){if(n(z))if(b.isObject(z)){var A=z.first;var B=z.dateFormat;var u=z.numberFormat;var w=z.format}else A=z;if(v&&"${*}"!==v)return b.replace(v,b.hitch({obj:x},function(y,C){var G=C.split(":"),I;return 1<G.length?(C=G[0],G.shift(),(I=w&&w[G[0]])?G=I.formatType:(G=G.join(":"),I=null),l(C,this.obj,G,I)):(I=f(C,w,u,B))?l(C,this.obj,I.formatType,I.options):p(this.obj[C])}),/\$\{([^\}]+)\}/g);v=[];for(var D in x)if(z=(z=f(D,w,u,B))?l(D,x,z.formatType,z.options):
x[D],v.push(D+" \x3d "+p(z)+"\x3cbr/\x3e"),A)break;return v.join("")},filter:function(x,v,z){v=h(x,z,v);z={};var A;x=v[0];for(A in x)v[2].call(v[A],x[A],A,x)&&(z[A]=x[A]);return z},startsWith:function(x,v,z){z=z||0;return x.indexOf(v,z)===z},endsWith:function(x,v,z){if("number"!==typeof z||!isFinite(z)||Math.floor(z)!==z||z>x.length)z=x.length;z-=v.length;x=x.indexOf(v,z);return-1!==x&&x===z},isDefined:n,fixJson:m,isObject:function(x){return x&&"object"===typeof x},isString:function(x){return"string"===
typeof x},mixin:function(x,v){for(var z in v)v.hasOwnProperty(z)&&(x[z]=v[z]);return x},clone2DArray:function(x){if(x=x?x.slice(0):null){var v,z=x.length;for(v=0;v<z;v++)x[v]=x[v]?x[v].slice(0):null}return x},clone3DArray:function(x){if(x=x?x.slice(0):null){var v,z=x.length;for(v=0;v<z;v++){x[v]=x[v]?x[v].slice(0):null;var A=x[v];if(A){var B,u=A.length;for(B=0;B<u;B++)A[B]=A[B]?A[B].slice(0):null}}}return x}};b.mixin(d,g);d._isDefined=n;d._getParts=h;d._sanitize=m;return g})},"esri/SpatialReference":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/has","./kernel","./lang"],function(F,q,a,b,e){function g(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var k=[-2.0037508342787E7,2.0037508342787E7];F=F(null,{declaredClass:"esri.SpatialReference",constructor:function(c){c&&(e.isObject(c)?e.mixin(this,c):e.isString(c)?this.wkt=c:this.wkid=c)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:k,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:k,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:k,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:k,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==q.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==q.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(c){var d=!1;c&&(d=this.isWebMercator()&&4326===c.wkid||c.isWebMercator()&&4326===this.wkid);return d},isWebMercator:function(){return this._isWebMercator()},equals:function(c){var d=!1;c&&(this===c&&
(d=!0),this.wkid||c.wkid?d=this.wkid===c.wkid||this.isWebMercator()&&c.isWebMercator()||this.wkid===c.latestWkid||c.wkid===this.latestWkid:this.wkt&&c.wkt&&(d=this.wkt.toUpperCase()===c.wkt.toUpperCase()));return d},toJson:function(){var c=null;null!=this.wkid?c={wkid:this.wkid}:null!=this.wkt&&(c={wkt:this.wkt});c&&null!=this.latestWkid&&(c.latestWkid=this.latestWkid);return c}});g.prototype=F.prototype;F.simpleConstructor=g;return b.SpatialReference=F})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(F,q,a,b,e){F=F(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(g){this.spatialReference=g;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new e(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(g){return this.cache&&this.cache[g]},setCacheValue:function(g,k){this.cache||
(this.cache={});this.cache[g]=k}});q.setObject("geometry.Geometry",F,b);return F})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(F,q,a,b,e,g,k,c){function d(l,m){89.99999<m?m=89.99999:-89.99999>m&&(m=-89.99999);var r=.017453292519943*m;return[111319.49079327169*l,3189068.5*Math.log((1+Math.sin(r))/(1-Math.sin(r)))]}function f(l,m,r){l=l/6378137*57.29577951308232;return r?[l,57.29577951308232*
(1.5707963267948966-2*Math.atan(Math.exp(-1*m/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*m/6378137)))]}function h(){}function n(){}function p(l){var m=l._json;l._unquantizeFn?(m=l._unquantizeFn({x:m.x,y:m.y}),l._xVal=m.x,l._yVal=m.y,l._unquantizeFn=null):(l._xVal=m.x,l._yVal=m.y);l._json=null}a={type:"point",x:0,y:0};F=F(k,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(l,m,r){q.isArray(l)?(this.x=l[0],this.y=
l[1],this.spatialReference=m):e.isObject(l)?(e.mixin(this,l),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference))):(this.x=l,this.y=m,this.spatialReference=r);this.verifySR()},offset:function(l,m){return new this.constructor(this.x+l,this.y+m,this.spatialReference)},setX:function(l){this.x=l;this.clearCache();return this},setY:function(l){this.y=l;this.clearCache();return this},
setLongitude:function(l){var m=this.spatialReference;m&&(m._isWebMercator()?this.setX(d(l,this.y)[0]):4326===m.wkid&&this.setX(l));return this},setLatitude:function(l){var m=this.spatialReference;m&&(m._isWebMercator()?this.setY(d(this.x,l)[1]):4326===m.wkid&&this.setY(l));return this},getLongitude:function(){var l=this.spatialReference;if(l)if(l._isWebMercator())var m=f(this.x,this.y)[0];else 4326===l.wkid&&(m=this.x);return m},getLatitude:function(){var l=this.spatialReference;if(l)if(l._isWebMercator())var m=
f(this.x,this.y)[1];else 4326===l.wkid&&(m=this.y);return m},update:function(l,m){this.x=l;this.y=m;this.clearCache();return this},normalize:function(){var l=this.x,m=this.spatialReference;if(m){var r=m._getInfo();r&&(l=this._normalizeX(l,r))}return new this.constructor(l,this.y,m)},_normalizeX:function(l,m){var r=m.valid[0],t=m.valid[1],x=2*t;l>t?(r=Math.ceil(Math.abs(l-t)/x),l-=r*x):l<r&&(r=Math.ceil(Math.abs(l-r)/x),l+=r*x);return l},toJson:function(){var l={x:this.x,y:this.y},m=this.spatialReference;
m&&(l.spatialReference=m.toJson());return l}});h.prototype=F.prototype;n.prototype=new h;Object.defineProperty(n.prototype,"x",{get:function(){this._json&&p(this);return this._xVal},set:function(l){this._xVal=l}});Object.defineProperty(n.prototype,"y",{get:function(){this._json&&p(this);return this._yVal},set:function(l){this._yVal=l}});n.prototype.setupLazyUnquantization=function(l,m){this._unquantizeFn=l;this._json=m};F.simpleConstructor=h;F.accessorConstructor=n;F.lngLatToXY=d;F.xyToLngLat=f;F.defaultProps=
a;F.metersPerDegree=6378137*Math.PI/180;q.setObject("geometry.Point",F,b);b.geometry.defaultPoint=a;return F})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(F,q,a,b,e){function g(k){var c=!1;k&&(k.ics||k.icsid)&&(c=!0);return c}b={isICS:g,createSpatialReference:function(k){var c=null;k&&(c=g(k)?new q(k):new F(k));return c}};e.mixin(a,b);return b})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(F,q,a,b,e,g){F=F(g,{declaredClass:"esri.ImageSpatialReference",constructor:function(k){k&&q.isObject(k)&&q.mixin(this,k)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(k){var c=!1;if(k)if(this.icsid&&k.icsid){if(c=this.icsid===k.icsid,this.icsns||k.icsns)c=c&&this.icsns===k.icsns}else this.ics&&k.ics&&(c=this.ics===k.ics);return c},toJson:function(k){var c=null,d=e.isDefined;k=d(k)?k:!0;d(this.icsid)?(c={icsid:this.icsid},
d(this.icsns)&&(c.icsns=this.icsns)):d(this.ics)&&(c={ics:this.ics});d(this.url)&&d(c)&&k&&(c.url=this.url);return c}});return b.ImageSpatialReference=F})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(F,q,a){var b=F("ff"),e=F("ie"),g=void 0===e&&7<=F("trident"),k=F("edge"),c=F("webkit"),d=F("opera"),f=F("chrome"),h=F("safari"),n=navigator.userAgent,p;(p=n.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&F.add("esri-iphone",parseFloat(p[2].replace("_",".")));
(p=n.match(/Android\s+(\d+(\.\d+)*)/i))&&F.add("esri-android",parseFloat(p[1]));(p=n.match(/Fennec\/(\d+\.\d+)/i))&&F.add("esri-fennec",parseFloat(p[1]));0<=n.indexOf("BlackBerry")&&0<=n.indexOf("WebKit")&&F.add("esri-blackberry",1);F.add("esri-touch",F("esri-iphone")||F("esri-android")||F("esri-blackberry")||6<=F("esri-fennec")||(b||c)&&(document.createTouch||"ontouchstart"in q||q.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(p=n.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&
F.add("esri-mobile",!!p);F.add("esri-pointer",!b&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!q.PointerEvent));a._getDOMAccessor=function(m){var r="";b?r="Moz":c?r="Webkit":e?r="ms":d&&(r="O");return r+m.charAt(0).toUpperCase()+m.substr(1)};F.add("esri-phonegap",!!q.cordova);F.add("esri-cors",F("esri-phonegap")||q.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);F.add("esri-file-upload",q.FormData&&q.FileList?!0:!1);F.add("esri-script-sandbox",function(){return"MessageChannel"in
q&&"HTMLIFrameElement"in q&&"sandbox"in HTMLIFrameElement.prototype});F.add("esri-secure-context",function(){if("isSecureContext"in q)return q.isSecureContext;if(q.location&&q.location.origin)return 0===q.location.origin.indexOf("https:")});F.add("esri-wasm","WebAssembly"in q);F.add("esri-workers",q.Worker?!0:!1);F.add("esri-featurelayer-webgl",!1);if(n=F("esri-featurelayer-webgl")){var l=F("esri-mobile");p=l?1:2;l=l?1:3;"object"===typeof n?(n.maxDrillLevel=null==n.maxDrillLevel?p:n.maxDrillLevel,
n.maxRecordCountFactor=null==n.maxRecordCountFactor?l:n.maxRecordCountFactor,n.enablePBFQuery=null==n.enablePBFQuery?!0:n.enablePBFQuery):F.add("esri-featurelayer-webgl",{maxDrillLevel:p,maxRecordCountFactor:l,enablePBFQuery:!0},null,!0)}F.add("esri-featurelayer-webgl-labeling",!1);F.add("esri-pbf",!e||10<=e);F.add("esri-featurelayer-pbf",!0);F.add("esri-transforms",g||k||9<=e||3.5<=b||4<=f||3.1<=h||10.5<=d||3.2<=F("esri-iphone")||2.1<=F("esri-android"));F.add("esri-transitions",g||k||10<=e||4<=b||
4<=f||3.1<=h||10.5<=d||3.2<=F("esri-iphone")||2.1<=F("esri-android"));F.add("esri-transforms3d",g||k||10<=b||12<=f||4<=h||3.2<=F("esri-iphone")||3<=F("esri-android"));F.add("esri-url-encodes-apostrophe",function(){if(!q.document)return!1;var m=q.document.createElement("a");m.href="?'";return-1<m.href.indexOf("?%27")});3>F("esri-android")&&(F.add("esri-transforms",!1,!1,!0),F.add("esri-transitions",!1,!1,!0),F.add("esri-transforms3d",!1,!1,!0));F.add("esri-will-change",F("esri-transforms")&&(52<=f||
11.1<=h));a._css=function(m){var r=F("esri-transforms3d");void 0!==m&&null!==m?r=m:r&&(f||h&&!F("esri-iphone"))&&(r=!1);var t=r?"translate3d(":"translate(",x=r?f?",-1px)":",0px)":")",v=r?"scale3d(":"scale(",z=r?",1)":")",A=r?"rotate3d(0,0,1,":"rotate(",B=r?"matrix3d(":"matrix(",u=r?",0,0,":",",w=r?",0,0,0,0,1,0,":",",D=r?",0,1)":")";return{names:{transition:c&&"-webkit-transition"||b&&"MozTransition"||d&&"OTransition"||e&&"msTransition"||"transition",transform:c&&"-webkit-transform"||b&&"MozTransform"||
d&&"OTransform"||e&&"msTransform"||"transform",transformName:c&&"-webkit-transform"||b&&"-moz-transform"||d&&"-o-transform"||e&&"-ms-transform"||"transform",origin:c&&"-webkit-transform-origin"||b&&"MozTransformOrigin"||d&&"OTransformOrigin"||e&&"msTransformOrigin"||"transformOrigin",endEvent:c&&"webkitTransitionEnd"||b&&"transitionend"||d&&"oTransitionEnd"||e&&"MSTransitionEnd"||"transitionend"},translate:function(y,C){return t+y+"px,"+C+"px"+x},scale:function(y){return v+y+","+y+z},rotate:function(y){return A+
y+"deg)"},matrix:function(y){return B+y.xx+","+y.xy+u+y.yx+","+y.yy+w+y.dx.toFixed(10)+(b&&59>=b?"px,":",")+y.dy.toFixed(10)+(b&&59>=b?"px":"")+D},getScaleFromMatrix:function(y){if(!y)return 1;y=y.toLowerCase();var C=-1<y.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(y.substring(C.length,y.indexOf(",")))}}};a.isiPhone=F("esri-iphone");a.isAndroid=F("esri-android");a.isFennec=F("esri-fennec");a.isBlackBerry=F("esri-blackberry");a.isTouchEnabled=F("esri-touch");a.isPointerEnabled=F("esri-pointer");
a._hasCors=F("esri-cors");a._hasFileUpload=F("esri-file-upload");a._hasTransforms=F("esri-transforms");a._hasTransitions=F("esri-transitions");a._has3DTransforms=F("esri-transforms3d");return F})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(F,q,a,b,e,g){function k(d,f,h,n){if("point"===d.type){var p=f(d.x,d.y,n);return new d.constructor(p[0],p[1],new e(h))}if("extent"===d.type){p=f(d.xmin,
d.ymin,n);var l=f(d.xmax,d.ymax,n);return new d.constructor(p[0],p[1],l[0],l[1],new e(h))}if("polyline"===d.type||"polygon"===d.type){p="polyline"===d.type;var m=[],r;F.forEach(p?d.paths:d.rings,function(x){m.push(r=[]);F.forEach(x,function(v){r.push(f(v[0],v[1],n))})});return p?new d.constructor({paths:m,spatialReference:new e(h)}):new d.constructor({rings:m,spatialReference:new e(h)})}if("multipoint"===d.type){var t=[];F.forEach(d.points,function(x){t.push(f(x[0],x[1],n))});return new d.constructor({points:t,
spatialReference:new e(h)})}}function c(d,f){var h=d&&(null!=d.wkid?d:d.spatialReference),n=f&&(null!=f.wkid?f:f.spatialReference);return h&&n?n.equals(h)?!0:n._canProject(h):!1}a={canProject:c,project:function(d,f){var h=d&&d.spatialReference,n=f&&(null!=f.wkid?f:f.spatialReference);h&&n?h.equals(n)?d=new d.constructor(d.toJson()):c(h,n)?n.isWebMercator()?d=k(d,g.lngLatToXY,{wkid:102100}):4326===n.wkid&&(d=k(d,g.xyToLngLat,{wkid:4326})):d=null:d=null;return d},lngLatToXY:g.lngLatToXY,xyToLngLat:g.xyToLngLat,
metersPerDegree:g.metersPerDegree,geographicToWebMercator:function(d){return k(d,g.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(d,f){return k(d,g.xyToLngLat,{wkid:4326},f)}};q.mixin(q.getObject("geometry",!0,b),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(F,q,a,b){function e(c,d,f){return c instanceof b?new b(c.x+f*(d.x-c.x),c.y+f*(d.y-c.y)):[c[0]+f*(d[0]-c[0]),c[1]+f*(d[1]-c[1])]}function g(c,d){return 1E-8>
Math.abs(c-d)}function k(c,d,f,h){var n=g(c[0],d[0])?1E10:(c[1]-d[1])/(c[0]-d[0]),p=g(f[0],h[0])?1E10:(f[1]-h[1])/(f[0]-h[0]),l=c[1]-n*c[0],m=f[1]-p*f[0];if(g(n,p)){if(g(l,m)){if(g(c[0],d[0]))if(Math.min(c[1],d[1])<Math.max(f[1],h[1])||Math.max(c[1],d[1])>Math.min(f[1],h[1])){c=(c[1]+d[1]+f[1]+h[1]-Math.min(c[1],d[1],f[1],h[1])-Math.max(c[1],d[1],f[1],h[1]))/2;var r=(c-l)/n}else return null;else if(Math.min(c[0],d[0])<Math.max(f[0],h[0])||Math.max(c[0],d[0])>Math.min(f[0],h[0]))r=(c[0]+d[0]+f[0]+
h[0]-Math.min(c[0],d[0],f[0],h[0])-Math.max(c[0],d[0],f[0],h[0]))/2,c=n*r+l;else return null;return[r,c]}return null}g(n,1E10)?(r=c[0],c=p*r+m):g(p,1E10)?(r=f[0],c=n*r+l):(r=-(l-m)/(n-p),c=c[1]===d[1]?c[1]:f[1]===h[1]?f[1]:n*r+l);return[r,c]}q={getLength:function(c,d){var f=d.x-c.x,h=d.y-c.y;return Math.sqrt(f*f+h*h)},_getLength:function(c,d){var f=d[0]-c[0],h=d[1]-c[1];return Math.sqrt(f*f+h*h)},getPointOnLine:e,getMidpoint:function(c,d){return e(c,d,.5)},_equals:g,_getLineIntersection:k,getLineIntersection:function(c,
d,f,h,n){(c=k([c.x,c.y],[d.x,d.y],[f.x,f.y],[h.x,h.y]))&&(c=new b(c[0],c[1],n));return c},_getLineIntersection2:function(c,d){var f=c[0],h=c[1],n=d[0],p=d[1],l=f[0];f=f[1];var m=h[0];h=h[1];var r=n[0],t=n[1];n=p[0]-r;r=l-r;var x=m-l;p=p[1]-t;t=f-t;var v=h-f,z=p*x-n*v;if(0===z)return!1;n=(n*t-p*r)/z;r=(x*t-v*r)/z;return 0<=n&&1>=n&&0<=r&&1>=r?[l+n*(m-l),f+n*(h-f)]:!1},_pointLineDistance:function(c,d){var f=d[0],h=d[1],n=f[0],p=f[1];f=c[0];var l=c[1],m=h[0]-n,r=h[1]-p,t=f-n,x=l-p;h=Math.sqrt;var v=
Math.pow,z=h(v(m,2)+v(r,2));t=(t*m+x*r)/(z*z);p+=t*r;return h(v(f-(n+t*m),2)+v(l-p,2))}};F.mixin(F.getObject("geometry",!0,a),q);return q})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(F,q,a,b,e,g,k,c,d,f){var h=function(){return 9>a("ie")?function(p,l,m,r,t,x,v,z,A){var B=[],u=Math.round,w,D=v.length,y;for(w=0;w<D;w++){var C=v[w];var G=z?z(C[0][0],C[0][1],
A):C[0];if(1<(y=C.length)){var I=u((G[0]-p)*m+t);var O=u((l-G[1])*r+x);G=z?z(C[1][0],C[1][1],A):C[1];var R=u((G[0]-p)*m+t);G=u((l-G[1])*r+x);B.push("M",I+","+O,"L",R+","+G);for(R=2;R<y;R++)G=z?z(C[R][0],C[R][1],A):C[R],I=u((G[0]-p)*m+t),O=u((l-G[1])*r+x),B.push(I+","+O)}else I=u((G[0]-p)*m+t),O=u((l-G[1])*r+x),B.push("M",I+","+O)}return B}:function(p,l,m,r,t,x,v,z,A,B){var u=[],w,D,y=Math.round;var C=0;for(w=v?v.length:0;C<w;C++){var G=v[C];u.push("M");var I=0;for(D=G?G.length:0;I<D;I++){var O=z?
z(G[I][0],G[I][1],A):G[I];u.push(y((O[0]-p)*m+t)+","+y((l-O[1])*r+x))}B||u.push("Z")}return u}}(),n={toScreenPoint:function(p,l,m,r,t){var x=p.spatialReference,v=r.spatialReference,z=r.x;r=r.y;x&&v&&!x.equals(v)&&x._canProject(v)&&(x=x.isWebMercator()?e.lngLatToXY(z,r):e.xyToLngLat(z,r,!0),z=x[0],r=x[1]);z=(z-p.xmin)*(l/p.getWidth());r=(p.ymax-r)*(m/p.getHeight());t||(z=Math.round(z),r=Math.round(r));return new g(z,r)},toScreenGeometry:function(p,l,m,r){var t=p.xmin,x=p.ymax,v=l/p.getWidth(),z=m/
p.getHeight(),A=F.forEach,B=Math.round;if(r instanceof e)return new e(B((r.x-t)*v),B((x-r.y)*z));if(r instanceof d){p=new d;var u=p.points;A(r.points,function(G,I){u[I]=[B((G[0]-t)*v),B((x-G[1])*z)]});return p}if(r instanceof f)return new f(B((r.xmin-t)*v),B((x-r.ymin)*z),B((r.xmax-t)*v),B((x-r.ymax)*v));if(r instanceof k){p=new k;var w=p.paths,D;A(r.paths,function(G,I){D=w[I]=[];A(G,function(O,R){D[R]=[B((O[0]-t)*v),B((x-O[1])*z)]})});return p}if(r instanceof c){p=new c;var y=p.rings,C;A(r.rings,
function(G,I){C=y[I]=[];A(G,function(O,R){C[R]=[B((O[0]-t)*v),B((x-O[1])*z)]})});return p}},_toScreenPath:function(p,l,m,r,t,x){var v=r instanceof k,z=p.spatialReference,A=r.spatialReference;if(z&&A&&!z.equals(A)&&z._canProject(A))if(z.isWebMercator())var B=e.lngLatToXY;else{B=e.xyToLngLat;var u=!0}return h(p.xmin,p.ymax,l/p.getWidth(),m/p.getHeight(),t,x,v?r.paths:r.rings,B,u,v)},toMapPoint:function(p,l,m,r){return new e(p.xmin+r.x/(l/p.getWidth()),p.ymax-r.y/(m/p.getHeight()),p.spatialReference)},
toMapGeometry:function(p,l,m,r){var t=p.xmin,x=p.ymax,v=p.spatialReference,z=l/p.getWidth(),A=m/p.getHeight(),B=F.forEach;if(r instanceof e)return new e(t+r.x/z,x-r.y/A,v);if(r instanceof d){p=new d(v);var u=p.points;B(r.points,function(G,I){u[I]=[t+G[0]/z,x-G[1]/A]});return p}if(r instanceof f)return new f(t+r.xmin/z,x-r.ymin/A,t+r.xmax/z,x-r.ymax/A,v);if(r instanceof k){p=new k(v);var w=p.paths,D;B(r.paths,function(G,I){D=w[I]=[];B(G,function(O,R){D[R]=[t+O[0]/z,x-O[1]/A]})});return p}if(r instanceof
c){p=new c(v);var y=p.rings,C;B(r.rings,function(G,I){C=y[I]=[];B(G,function(O,R){C[R]=[t+O[0]/z,x-O[1]/A]})});return p}}};q.mixin(q.getObject("geometry",!0,b),n);return n})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(F,q,a,b,e){F=F(e,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});q.setObject("geometry.ScreenPoint",F,b);return F})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h){function n(){}function p(){}b={type:"polyline",paths:null};F=F(c,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(l){this.paths=[];this._path=0;l&&(a.isArray(l)?this.paths=a.isArray(l[0][0])?l:[l]:l.paths?g.mixin(this,l):this.spatialReference=l,this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(l){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.isArray(l[0])?q.forEach(l,this._addPointArr,this):q.forEach(l,this._addPoint,this);return this},_addPointArr:function(l){this.paths[this._path].push(l)},_addPoint:function(l){this.paths[this._path].push([l.x,l.y])},_insertPoints:function(l,m){this.clearCache();this._path=m;this.paths[this._path]||(this.paths[this._path]=[]);q.forEach(l,this._addPoint,this)},_validateInputs:function(l,m){return null!==l&&void 0!==l&&(0>l||l>=this.paths.length)||null!==m&&void 0!==l&&(0>m||m>=this.paths[l].length)?
!1:!0},getPoint:function(l,m){if(this._validateInputs(l,m))return new d(this.paths[l][m],this.spatialReference)},setPoint:function(l,m,r){if(this._validateInputs(l,m))return this.clearCache(),this.paths[l][m]=[r.x,r.y],this},insertPoint:function(l,m,r){if(this._validateInputs(l)&&null!=m&&0<=m&&m<=this.paths[l].length)return this.clearCache(),this.paths[l].splice(m,0,[r.x,r.y]),this},removePath:function(l){if(this._validateInputs(l,null)){this.clearCache();l=this.paths.splice(l,1)[0];var m,r=l.length,
t=this.spatialReference;for(m=0;m<r;m++)l[m]=new d(l[m],t);return l}},removePoint:function(l,m){if(this._validateInputs(l,m))return this.clearCache(),new d(this.paths[l].splice(m,1)[0],this.spatialReference)},getExtent:function(){var l=this.getCacheValue("_extent");var m=this.getCacheValue("_partwise");if(l)return l=new f(l),l._partwise=m,l;l=this.paths;var r=l.length;if(r&&l[0].length){var t,x,v,z,A=t=l[0][0][0],B=x=l[0][0][1],u=Math.min,w=Math.max,D=this.spatialReference;m=[];var y,C;for(v=0;v<
r;v++){var G=l[v];var I=y=G[0]&&G[0][0];var O=C=G[0]&&G[0][1];var R=G.length;for(z=0;z<R;z++){var Z=G[z];var W=Z[0];Z=Z[1];A=u(A,W);B=u(B,Z);t=w(t,W);x=w(x,Z);I=u(I,W);O=u(O,Z);y=w(y,W);C=w(C,Z)}m.push(new f({xmin:I,ymin:O,xmax:y,ymax:C,spatialReference:D?D.toJson():null}))}l={xmin:A,ymin:B,xmax:t,ymax:x,spatialReference:D?D.toJson():null};m=1<m.length?m:null;this.setCacheValue("_extent",l);this.setCacheValue("_partwise",m);l=new f(l);l._partwise=m;return l}},toJson:function(){var l={paths:g.clone3DArray(this.paths)},
m=this.spatialReference;m&&(l.spatialReference=m.toJson());return l}});n.prototype=F.prototype;p.prototype=new n;Object.defineProperty(p.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:g.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(l){this._pathsVal=l}});p.prototype.setupLazyUnquantization=function(l,m){this._unquantizeFn=l;this._pathsVal=m.paths};F.simpleConstructor=n;F.accessorConstructor=p;F.defaultProps=
b;a.setObject("geometry.Polyline",F,e);e.geometry.defaultPolyline=b;return F})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n){function p(){}function l(){}b={type:"polygon",rings:null};var m=F(c,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(r){this.rings=[];this._ring=
0;r&&(a.isArray(r)?this.rings=a.isArray(r[0][0])?r:[r]:r.rings?g.mixin(this,r):this.spatialReference=r,this.spatialReference&&(this.spatialReference=n.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(r){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(r[0])?q.forEach(r,this._addPointArr,this):q.forEach(r,this._addPoint,this);return this},_addPointArr:function(r){this.rings[this._ring].push(r)},_addPoint:function(r){this.rings[this._ring].push([r.x,
r.y])},_insertPoints:function(r,t){this.clearCache();this._ring=t;this.rings[this._ring]||(this.rings[this._ring]=[]);q.forEach(r,this._addPoint,this)},_validateInputs:function(r,t){return null!==r&&void 0!==r&&(0>r||r>=this.rings.length)||null!==t&&void 0!==r&&(0>t||t>=this.rings[r].length)?!1:!0},getPoint:function(r,t){if(this._validateInputs(r,t))return new d(this.rings[r][t],this.spatialReference)},setPoint:function(r,t,x){if(this._validateInputs(r,t))return this.clearCache(),this.rings[r][t]=
[x.x,x.y],this},insertPoint:function(r,t,x){if(this._validateInputs(r)&&null!=t&&0<=t&&t<=this.rings[r].length)return this.clearCache(),this.rings[r].splice(t,0,[x.x,x.y]),this},removeRing:function(r){if(this._validateInputs(r,null)){this.clearCache();r=this.rings.splice(r,1)[0];var t,x=r.length,v=this.spatialReference;for(t=0;t<x;t++)r[t]=new d(r[t],v);return r}},removePoint:function(r,t){if(this._validateInputs(r,t))return this.clearCache(),new d(this.rings[r].splice(t,1)[0],this.spatialReference)},
getExtent:function(){var r=this.getCacheValue("_extent");var t=this.getCacheValue("_partwise");if(r)return r=new f(r),r._partwise=t,r;r=this.rings;var x=r.length;if(x&&r[0].length){var v,z,A,B,u=v=r[0][0][0],w=z=r[0][0][1],D=Math.min,y=Math.max,C=this.spatialReference;t=[];var G,I;for(A=0;A<x;A++){var O=r[A];var R=G=O[0]&&O[0][0];var Z=I=O[0]&&O[0][1];var W=O.length;for(B=0;B<W;B++){var da=O[B];var ea=da[0];da=da[1];u=D(u,ea);w=D(w,da);v=y(v,ea);z=y(z,da);R=D(R,ea);Z=D(Z,da);G=y(G,ea);I=y(I,da)}t.push(new f({xmin:R,
ymin:Z,xmax:G,ymax:I,spatialReference:C?C.toJson():null}))}r={xmin:u,ymin:w,xmax:v,ymax:z,spatialReference:C?C.toJson():null};t=1<t.length?t:null;this.setCacheValue("_extent",r);this.setCacheValue("_partwise",t);r=new f(r);r._partwise=t;return r}},contains:function(r){var t=this.rings,x=!1,v,z,A,B=t.length;var u=this.spatialReference;var w=r.spatialReference;var D=r.x;r=r.y;u&&w&&!u.equals(w)&&u._canProject(w)&&(r=u.isWebMercator()?d.lngLatToXY(D,r):d.xyToLngLat(D,r,!0),D=r[0],r=r[1]);for(A=0;A<B;A++){u=
t[A];var y=u.length;for(z=v=0;z<y;z++){v++;v===y&&(v=0);w=u[z];var C=u[v];(w[1]<r&&C[1]>=r||C[1]<r&&w[1]>=r)&&w[0]+(r-w[1])/(C[1]-w[1])*(C[0]-w[0])<D&&(x=!x)}}return x},getCentroid:function(){var r=this.getCacheValue("_centroid");if(void 0!==r)return r;r=this.rings;var t,x,v=[],z,A,B=Infinity,u=-Infinity,w=Infinity,D=-Infinity;q.forEach(r,function(G){y=t=x=0;q.forEach(G,function(I,O){O<G.length-1&&(z=G[O+1],A=I[0]*z[1]-z[0]*I[1],y+=(I[0]+z[0])*A,t+=(I[1]+z[1])*A,x+=A,I[0]<B&&(B=I[0]),I[0]>u&&(u=I[0]),
I[1]<w&&(w=I[1]),I[1]>D&&(D=I[1]))});0<x&&(x*=-1);x&&v.push([y,t,x/2])});v.sort(function(G,I){return G[2]-I[2]});var y=t=void 0;if(v[0]){var C=6*v[0][2];y=v[0][0]/C;t=v[0][1]/C;if(y<B||y>u||t<w||t>D)y=t=void 0}if(void 0===y||void 0===t)if(r=r[0]&&r[0].length?this._getLineCentroid(r[0]):null)y=r.x,t=r.y;r=isNaN(y)||isNaN(t)?null:new d(y,t,this.spatialReference);this.setCacheValue("_centroid",r);return r},_getLineCentroid:function(r){var t=0,x=0,v=0,z={x:0,y:0},A={x:0,y:0},B,u=r.length,w;for(B=0;B<
u-1;B++){var D=r[B];var y=r[B+1];if(D&&y){z.x=D[0];z.y=D[1];A.x=y[0];A.y=y[1];var C=h.getLength(z,A);0<C&&(t+=C,D=h.getMidpoint(D,y),x+=C*D[0],v+=C*D[1])}}0<t?w={x:x/t,y:v/t}:r[0]&&(w={x:r[0][0],y:r[0][1]});return w},isClockwise:function(r){var t=0,x,v=r.length,z=a.isArray(r[0])?function(A,B){return A[0]*B[1]-B[0]*A[1]}:function(A,B){return A.x*B.y-B.x*A.y};for(x=0;x<v;x++)t+=z(r[x],r[(x+1)%v]);return 0>=t/2},isSelfIntersecting:function(r){r=r||this;var t,x,v,z,A,B=r.rings.length;for(v=0;v<B;v++){for(t=
0;t<r.rings[v].length-1;t++){var u=[[r.rings[v][t][0],r.rings[v][t][1]],[r.rings[v][t+1][0],r.rings[v][t+1][1]]];for(x=v+1;x<B;x++)for(z=0;z<r.rings[x].length-1;z++){var w=[[r.rings[x][z][0],r.rings[x][z][1]],[r.rings[x][z+1][0],r.rings[x][z+1][1]]];if((A=h._getLineIntersection2(u,w))&&!(A[0]===u[0][0]&&A[1]===u[0][1]||A[0]===w[0][0]&&A[1]===w[0][1]||A[0]===u[1][0]&&A[1]===u[1][1]||A[0]===w[1][0]&&A[1]===w[1][1]))return!0}}z=r.rings[v].length;if(!(4>=z))for(t=0;t<z-3;t++){var D=z-1;0===t&&(D=z-2);
u=[[r.rings[v][t][0],r.rings[v][t][1]],[r.rings[v][t+1][0],r.rings[v][t+1][1]]];for(x=t+2;x<D;x++)if(w=[[r.rings[v][x][0],r.rings[v][x][1]],[r.rings[v][x+1][0],r.rings[v][x+1][1]]],(A=h._getLineIntersection2(u,w))&&!(A[0]===u[0][0]&&A[1]===u[0][1]||A[0]===w[0][0]&&A[1]===w[0][1]||A[0]===u[1][0]&&A[1]===u[1][1]||A[0]===w[1][0]&&A[1]===w[1][1]))return!0}}return!1},toJson:function(){var r={rings:g.clone3DArray(this.rings)},t=this.spatialReference;t&&(r.spatialReference=t.toJson());return r}});p.prototype=
m.prototype;l.prototype=new p;Object.defineProperty(l.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:g.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(r){this._ringsVal=r}});l.prototype.setupLazyUnquantization=function(r,t){this._unquantizeFn=r;this._ringsVal=t.rings};m.simpleConstructor=p;m.accessorConstructor=l;m.defaultProps=b;m.createEllipse=function(r){var t=r.center.x,x=r.center.y,v=r.longAxis,
z=r.shortAxis,A=r.numberOfPoints,B=r.map,u;r=[];var w=2*Math.PI/A;for(u=0;u<A;u++){var D=Math.cos(u*w);var y=Math.sin(u*w);D=B.toMap({x:v*D+t,y:z*y+x});r.push(D)}r.push(r[0]);t=new m(B.spatialReference);t.addRing(r);return t};m.createCircle=function(r){return m.createEllipse({center:r.center,longAxis:r.r,shortAxis:r.r,numberOfPoints:r.numberOfPoints,map:r.map})};m.fromExtent=function(r){var t=r.normalize();r=r.spatialReference;return new m({rings:q.map(t,function(x){return[[x.xmin,x.ymin],[x.xmin,
x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]}),spatialReference:r?r.toJson():null})};a.setObject("geometry.Polygon",m,e);e.geometry.defaultPolygon=b;e.geometry.createEllipse=m.createEllipse;e.geometry.createCircle=m.createCircle;e.geometry.isClockwise=m.prototype.isClockwise;e.geometry.polygonSelfIntersecting=m.prototype.isSelfIntersecting;return m})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(F,q,a,b,e,g,k,c,d,f){function h(){}function n(){}a={type:"multipoint",points:null};F=F(k,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(p){this.points=[];p&&(p.points?e.mixin(this,p):this.spatialReference=p,this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(p){this.clearCache();q.isArray(p)?this.points.push(p):this.points.push([p.x,p.y]);return this},removePoint:function(p){if(this._validateInputs(p))return this.clearCache(),
new c(this.points.splice(p,1)[0],this.spatialReference)},getExtent:function(){var p=this.getCacheValue("_extent");if(p)return new d(p);p=this.points;var l=p.length;if(l){var m=p[0],r,t,x=r=m[0],v=t=m[1],z=Math.min,A=Math.max,B=this.spatialReference,u;for(u=0;u<l;u++){m=p[u];var w=m[0];m=m[1];x=z(x,w);v=z(v,m);r=A(r,w);t=A(t,m)}p={xmin:x,ymin:v,xmax:r,ymax:t,spatialReference:B?B.toJson():null};this.setCacheValue("_extent",p);return new d(p)}},_validateInputs:function(p){return null===p||0>p||p>=this.points.length?
!1:!0},getPoint:function(p){if(this._validateInputs(p))return p=this.points[p],new c(p[0],p[1],this.spatialReference)},setPoint:function(p,l){if(this._validateInputs(p))return this.clearCache(),this.points[p]=[l.x,l.y],this},toJson:function(){var p={points:e.clone2DArray(this.points)},l=this.spatialReference;l&&(p.spatialReference=l.toJson());return p}});h.prototype=F.prototype;n.prototype=new h;Object.defineProperty(n.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:e.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(p){this._pointsVal=p}});n.prototype.setupLazyUnquantization=function(p,l){this._unquantizeFn=p;this._pointsVal=l.points};F.simpleConstructor=h;F.accessorConstructor=n;F.defaultProps=a;q.setObject("geometry.Multipoint",F,b);b.geometry.defaultMultipoint=a;return F})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(F,q,a,b,e){function g(n,p,l){return n&&p?
n.getWidth()/p*(l||c)*39.37*d.screenDPI:0}function k(n,p,l,m,r){return n.expand(m*p/(39.37*((r?l:f.values[f[l]])||c)*d.screenDPI)/n.getWidth())}var c=6370997*Math.PI/180,d=b.defaults,f=e,h={getUnitValueForSR:function(n){return this.getUnitValue(n)||c},getUnitValue:function(n){if(n)if("object"===typeof n){var p=n.wkid;var l=n.wkt}else"number"===typeof n?p=n:"string"===typeof n&&(l=n);if(p)var m=f.values[f[p]];else l&&-1!==l.search(/^PROJCS/i)&&(n=/UNIT\[([^\]]+)\]\]$/i.exec(l))&&n[1]&&(m=parseFloat(n[1].split(",")[1]));
return m},getScale:function(n,p,l){if(1<arguments.length&&null!=p&&!p.declaredClass){var m=n;var r=p;p=null;var t=h.getUnitValue(l)}else m=p||n.extent,r=n.width,t=h.getUnitValue(m&&m.spatialReference);return g(m,r,t)},getExtentForScale:function(n,p,l){return k(l||n.extent,n.width,h.getUnitValue(n.spatialReference),p,!0)}};F.mixin(F.getObject("geometry",!0,a),h);a.geometry._getScale=g;a.geometry._getExtentForScale=k;return h})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has",
"./kernel"],function(F,q,a,b){a=function(){return this}();var e={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,
zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(g,k){q.publish("esri.Error",[g])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com",
"tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com",
"qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com",
"basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},
packages:[]}}}};b.config=e;F.noGlobals||(a.esriConfig=e);return e})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(F,q){var a,b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,
22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,
29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,
102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,
103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,
103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,
103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,
103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=a;a++)b[a]=0;for(a=2056;2065>=a;a++)b[a]=0;for(a=2067;2135>=a;a++)b[a]=0;for(a=2137;2154>=a;a++)b[a]=0;for(a=2161;2170>=a;a++)b[a]=0;for(a=2172;2193>=a;a++)b[a]=0;for(a=2195;2198>=a;a++)b[a]=0;for(a=2200;2203>=a;a++)b[a]=0;for(a=2205;2217>=a;a++)b[a]=0;for(a=2222;2224>=a;a++)b[a]=1;for(a=2225;2250>=a;a++)b[a]=2;for(a=2251;2253>=a;a++)b[a]=1;for(a=2257;2264>=a;a++)b[a]=2;for(a=2274;2279>=a;a++)b[a]=2;for(a=2280;2282>=a;a++)b[a]=1;for(a=
2283;2289>=a;a++)b[a]=2;for(a=2290;2292>=a;a++)b[a]=0;for(a=2308;2313>=a;a++)b[a]=0;for(a=2315;2491>=a;a++)b[a]=0;for(a=2494;2866>=a;a++)b[a]=0;for(a=2867;2869>=a;a++)b[a]=1;for(a=2870;2888>=a;a++)b[a]=2;for(a=2891;2895>=a;a++)b[a]=2;for(a=2896;2898>=a;a++)b[a]=1;for(a=2902;2908>=a;a++)b[a]=2;for(a=2915;2920>=a;a++)b[a]=2;for(a=2921;2923>=a;a++)b[a]=1;for(a=2924;2930>=a;a++)b[a]=2;for(a=2931;2962>=a;a++)b[a]=0;for(a=2964;2968>=a;a++)b[a]=2;for(a=2969;2973>=a;a++)b[a]=0;for(a=2975;2991>=a;a++)b[a]=
0;for(a=2995;3051>=a;a++)b[a]=0;for(a=3054;3079>=a;a++)b[a]=0;for(a=3081;3088>=a;a++)b[a]=0;for(a=3092;3101>=a;a++)b[a]=0;for(a=3106;3138>=a;a++)b[a]=0;for(a=3146;3151>=a;a++)b[a]=0;for(a=3153;3166>=a;a++)b[a]=0;for(a=3168;3172>=a;a++)b[a]=0;for(a=3174;3203>=a;a++)b[a]=0;for(a=3294;3358>=a;a++)b[a]=0;for(a=3367;3403>=a;a++)b[a]=0;for(a=3408;3416>=a;a++)b[a]=0;for(a=3417;3438>=a;a++)b[a]=2;for(a=3441;3446>=a;a++)b[a]=2;for(a=3447;3450>=a;a++)b[a]=0;for(a=3451;3459>=a;a++)b[a]=2;for(a=3460;3478>=a;a++)b[a]=
0;for(a=3554;3559>=a;a++)b[a]=0;for(a=3560;3570>=a;a++)b[a]=2;for(a=3571;3581>=a;a++)b[a]=0;for(a=3594;3597>=a;a++)b[a]=0;for(a=3601;3604>=a;a++)b[a]=0;for(a=3637;3639>=a;a++)b[a]=0;for(a=3665;3667>=a;a++)b[a]=0;for(a=3693;3695>=a;a++)b[a]=0;for(a=3701;3727>=a;a++)b[a]=0;for(a=3728;3739>=a;a++)b[a]=2;for(a=3740;3751>=a;a++)b[a]=0;for(a=3753;3760>=a;a++)b[a]=2;for(a=3761;3773>=a;a++)b[a]=0;for(a=3775;3777>=a;a++)b[a]=0;for(a=3779;3781>=a;a++)b[a]=0;for(a=3783;3785>=a;a++)b[a]=0;for(a=3788;3791>=a;a++)b[a]=
0;for(a=3797;3802>=a;a++)b[a]=0;for(a=3814;3816>=a;a++)b[a]=0;for(a=3825;3829>=a;a++)b[a]=0;for(a=3832;3841>=a;a++)b[a]=0;for(a=3844;3852>=a;a++)b[a]=0;for(a=3873;3885>=a;a++)b[a]=0;for(a=3890;3893>=a;a++)b[a]=0;for(a=3907;3912>=a;a++)b[a]=0;for(a=3942;3950>=a;a++)b[a]=0;for(a=3968;3970>=a;a++)b[a]=0;for(a=3973;3976>=a;a++)b[a]=0;for(a=3986;3989>=a;a++)b[a]=0;for(a=3994;3997>=a;a++)b[a]=0;for(a=4048;4051>=a;a++)b[a]=0;for(a=4056;4063>=a;a++)b[a]=0;for(a=4093;4096>=a;a++)b[a]=0;for(a=4390;4398>=a;a++)b[a]=
0;for(a=4399;4413>=a;a++)b[a]=2;for(a=4418;4433>=a;a++)b[a]=2;for(a=4455;4457>=a;a++)b[a]=2;for(a=4484;4489>=a;a++)b[a]=0;for(a=4491;4554>=a;a++)b[a]=0;for(a=4568;4589>=a;a++)b[a]=0;for(a=4652;4656>=a;a++)b[a]=0;for(a=4766;4800>=a;a++)b[a]=0;for(a=5014;5016>=a;a++)b[a]=0;for(a=5069;5072>=a;a++)b[a]=0;for(a=5105;5130>=a;a++)b[a]=0;for(a=5173;5188>=a;a++)b[a]=0;for(a=5253;5259>=a;a++)b[a]=0;for(a=5269;5275>=a;a++)b[a]=0;for(a=5292;5311>=a;a++)b[a]=0;for(a=5329;5331>=a;a++)b[a]=0;for(a=5343;5349>=a;a++)b[a]=
0;for(a=5355;5357>=a;a++)b[a]=0;for(a=5387;5389>=a;a++)b[a]=0;for(a=5459;5463>=a;a++)b[a]=0;for(a=5479;5482>=a;a++)b[a]=0;for(a=5518;5520>=a;a++)b[a]=0;for(a=5530;5539>=a;a++)b[a]=0;for(a=5550;5552>=a;a++)b[a]=0;for(a=5562;5583>=a;a++)b[a]=0;for(a=5623;5625>=a;a++)b[a]=2;for(a=5631;5639>=a;a++)b[a]=0;for(a=5649;5653>=a;a++)b[a]=0;for(a=5663;5680>=a;a++)b[a]=0;for(a=5682;5685>=a;a++)b[a]=0;for(a=5875;5877>=a;a++)b[a]=0;for(a=5896;5899>=a;a++)b[a]=0;for(a=5921;5940>=a;a++)b[a]=0;for(a=6050;6125>=a;a++)b[a]=
0;for(a=6244;6275>=a;a++)b[a]=0;for(a=6328;6348>=a;a++)b[a]=0;for(a=6350;6356>=a;a++)b[a]=0;for(a=6366;6372>=a;a++)b[a]=0;for(a=6381;6387>=a;a++)b[a]=0;for(a=6393;6404>=a;a++)b[a]=0;for(a=6480;6483>=a;a++)b[a]=0;for(a=6511;6514>=a;a++)b[a]=0;for(a=6579;6581>=a;a++)b[a]=0;for(a=6619;6624>=a;a++)b[a]=0;for(a=6625;6627>=a;a++)b[a]=2;for(a=6628;6632>=a;a++)b[a]=0;for(a=6634;6637>=a;a++)b[a]=0;for(a=6669;6692>=a;a++)b[a]=0;for(a=6707;6709>=a;a++)b[a]=0;for(a=6720;6723>=a;a++)b[a]=0;for(a=6732;6738>=a;a++)b[a]=
0;for(a=6931;6933>=a;a++)b[a]=0;for(a=6956;6959>=a;a++)b[a]=0;for(a=7005;7007>=a;a++)b[a]=0;for(a=7057;7070>=a;a++)b[a]=2;for(a=7074;7082>=a;a++)b[a]=0;for(a=7109;7118>=a;a++)b[a]=0;for(a=7119;7127>=a;a++)b[a]=1;for(a=7374;7376>=a;a++)b[a]=0;for(a=7528;7586>=a;a++)b[a]=0;for(a=7587;7645>=a;a++)b[a]=2;for(a=7692;7696>=a;a++)b[a]=0;for(a=7755;7787>=a;a++)b[a]=0;for(a=7791;7795>=a;a++)b[a]=0;for(a=7799;7801>=a;a++)b[a]=0;for(a=7803;7805>=a;a++)b[a]=0;for(a=7825;7831>=a;a++)b[a]=0;for(a=7845;7859>=a;a++)b[a]=
0;for(a=8013;8032>=a;a++)b[a]=0;for(a=8065;8068>=a;a++)b[a]=1;for(a=8518;8529>=a;a++)b[a]=2;for(a=8533;8536>=a;a++)b[a]=2;for(a=8538;8540>=a;a++)b[a]=2;for(a=8677;8679>=a;a++)b[a]=0;for(a=8836;8840>=a;a++)b[a]=0;for(a=8857;8859>=a;a++)b[a]=0;for(a=8908;8910>=a;a++)b[a]=0;for(a=9154;9159>=a;a++)b[a]=0;for(a=9205;9218>=a;a++)b[a]=0;for(a=9271;9273>=a;a++)b[a]=0;for(a=9295;9297>=a;a++)b[a]=0;for(a=9356;9360>=a;a++)b[a]=0;for(a=9404;9407>=a;a++)b[a]=0;for(a=9476;9482>=a;a++)b[a]=0;for(a=9487;9494>=a;a++)b[a]=
0;for(a=9697;9699>=a;a++)b[a]=0;for(a=20002;20032>=a;a++)b[a]=0;for(a=20062;20092>=a;a++)b[a]=0;for(a=20135;20138>=a;a++)b[a]=0;for(a=20248;20258>=a;a++)b[a]=0;for(a=20348;20358>=a;a++)b[a]=0;for(a=20436;20440>=a;a++)b[a]=0;for(a=20822;20824>=a;a++)b[a]=0;for(a=20904;20932>=a;a++)b[a]=0;for(a=20934;20936>=a;a++)b[a]=0;for(a=21004;21032>=a;a++)b[a]=0;for(a=21035;21037>=a;a++)b[a]=0;for(a=21095;21097>=a;a++)b[a]=0;for(a=21148;21150>=a;a++)b[a]=0;for(a=21207;21264>=a;a++)b[a]=0;for(a=21307;21364>=a;a++)b[a]=
0;for(a=21413;21423>=a;a++)b[a]=0;for(a=21453;21463>=a;a++)b[a]=0;for(a=21473;21483>=a;a++)b[a]=0;for(a=21780;21782>=a;a++)b[a]=0;for(a=21891;21894>=a;a++)b[a]=0;for(a=21896;21899>=a;a++)b[a]=0;for(a=22171;22177>=a;a++)b[a]=0;for(a=22181;22187>=a;a++)b[a]=0;for(a=22191;22197>=a;a++)b[a]=0;for(a=22234;22236>=a;a++)b[a]=0;for(a=22521;22525>=a;a++)b[a]=0;for(a=22991;22994>=a;a++)b[a]=0;for(a=23028;23038>=a;a++)b[a]=0;for(a=23830;23853>=a;a++)b[a]=0;for(a=23866;23872>=a;a++)b[a]=0;for(a=23877;23884>=
a;a++)b[a]=0;for(a=23886;23894>=a;a++)b[a]=0;for(a=23946;23948>=a;a++)b[a]=0;for(a=24311;24313>=a;a++)b[a]=0;for(a=24342;24347>=a;a++)b[a]=0;for(a=24370;24374>=a;a++)b[a]=10;for(a=24375;24381>=a;a++)b[a]=0;for(a=24718;24721>=a;a++)b[a]=0;for(a=24817;24821>=a;a++)b[a]=0;for(a=24877;24882>=a;a++)b[a]=0;for(a=24891;24893>=a;a++)b[a]=0;for(a=25391;25395>=a;a++)b[a]=0;for(a=25828;25838>=a;a++)b[a]=0;for(a=26191;26195>=a;a++)b[a]=0;for(a=26391;26393>=a;a++)b[a]=0;for(a=26701;26722>=a;a++)b[a]=0;for(a=26729;26799>=
a;a++)b[a]=2;for(a=26801;26803>=a;a++)b[a]=2;for(a=26811;26813>=a;a++)b[a]=2;for(a=26847;26870>=a;a++)b[a]=2;for(a=26891;26899>=a;a++)b[a]=0;for(a=26901;26923>=a;a++)b[a]=0;for(a=26929;26946>=a;a++)b[a]=0;for(a=26948;26998>=a;a++)b[a]=0;for(a=27037;27040>=a;a++)b[a]=0;for(a=27205;27232>=a;a++)b[a]=0;for(a=27258;27260>=a;a++)b[a]=0;for(a=27391;27398>=a;a++)b[a]=0;for(a=27561;27564>=a;a++)b[a]=0;for(a=27571;27574>=a;a++)b[a]=0;for(a=27581;27584>=a;a++)b[a]=0;for(a=27591;27594>=a;a++)b[a]=0;for(a=28191;28193>=
a;a++)b[a]=0;for(a=28348;28358>=a;a++)b[a]=0;for(a=28402;28432>=a;a++)b[a]=0;for(a=28462;28492>=a;a++)b[a]=0;for(a=29118;29122>=a;a++)b[a]=0;for(a=29168;29172>=a;a++)b[a]=0;for(a=29177;29185>=a;a++)b[a]=0;for(a=29187;29195>=a;a++)b[a]=0;for(a=29900;29903>=a;a++)b[a]=0;for(a=30161;30179>=a;a++)b[a]=0;for(a=30491;30494>=a;a++)b[a]=0;for(a=30729;30732>=a;a++)b[a]=0;for(a=31251;31259>=a;a++)b[a]=0;for(a=31265;31268>=a;a++)b[a]=0;for(a=31275;31279>=a;a++)b[a]=0;for(a=31281;31297>=a;a++)b[a]=0;for(a=31461;31469>=
a;a++)b[a]=0;for(a=31491;31495>=a;a++)b[a]=0;for(a=31917;31922>=a;a++)b[a]=0;for(a=31965;32E3>=a;a++)b[a]=0;for(a=32001;32003>=a;a++)b[a]=2;for(a=32005;32031>=a;a++)b[a]=2;for(a=32033;32060>=a;a++)b[a]=2;for(a=32064;32067>=a;a++)b[a]=2;for(a=32074;32077>=a;a++)b[a]=2;for(a=32081;32086>=a;a++)b[a]=0;for(a=32107;32130>=a;a++)b[a]=0;for(a=32133;32158>=a;a++)b[a]=0;for(a=32164;32167>=a;a++)b[a]=2;for(a=32180;32199>=a;a++)b[a]=0;for(a=32201;32260>=a;a++)b[a]=0;for(a=32301;32360>=a;a++)b[a]=0;for(a=32601;32662>=
a;a++)b[a]=0;for(a=32664;32667>=a;a++)b[a]=2;for(a=32701;32761>=a;a++)b[a]=0;for(a=53001;53004>=a;a++)b[a]=0;for(a=53008;53019>=a;a++)b[a]=0;for(a=53021;53032>=a;a++)b[a]=0;for(a=53034;53037>=a;a++)b[a]=0;for(a=53042;53046>=a;a++)b[a]=0;for(a=53074;53080>=a;a++)b[a]=0;for(a=54001;54004>=a;a++)b[a]=0;for(a=54008;54019>=a;a++)b[a]=0;for(a=54021;54032>=a;a++)b[a]=0;for(a=54034;54037>=a;a++)b[a]=0;for(a=54042;54046>=a;a++)b[a]=0;for(a=54048;54053>=a;a++)b[a]=0;for(a=54074;54080>=a;a++)b[a]=0;for(a=54098;54101>=
a;a++)b[a]=0;for(a=102001;102040>=a;a++)b[a]=0;for(a=102042;102063>=a;a++)b[a]=0;for(a=102065;102067>=a;a++)b[a]=0;for(a=102070;102117>=a;a++)b[a]=0;for(a=102122;102216>=a;a++)b[a]=0;for(a=102221;102377>=a;a++)b[a]=0;for(a=102382;102388>=a;a++)b[a]=0;for(a=102389;102398>=a;a++)b[a]=2;for(a=102399;102444>=a;a++)b[a]=0;for(a=102445;102447>=a;a++)b[a]=2;for(a=102448;102458>=a;a++)b[a]=0;for(a=102459;102468>=a;a++)b[a]=2;for(a=102469;102499>=a;a++)b[a]=0;for(a=102500;102519>=a;a++)b[a]=1;for(a=102520;102524>=
a;a++)b[a]=0;for(a=102525;102529>=a;a++)b[a]=2;for(a=102530;102588>=a;a++)b[a]=0;for(a=102590;102598>=a;a++)b[a]=0;for(a=102601;102603>=a;a++)b[a]=0;for(a=102605;102628>=a;a++)b[a]=0;for(a=102629;102646>=a;a++)b[a]=2;for(a=102648;102700>=a;a++)b[a]=2;for(a=102701;102703>=a;a++)b[a]=0;for(a=102707;102730>=a;a++)b[a]=2;for(a=102733;102758>=a;a++)b[a]=2;for(a=102767;102900>=a;a++)b[a]=0;for(a=102901;102933>=a;a++)b[a]=2;for(a=102934;102950>=a;a++)b[a]=13;for(a=102951;102955>=a;a++)b[a]=0;for(a=102961;102963>=
a;a++)b[a]=0;for(a=102965;102969>=a;a++)b[a]=0;for(a=102971;102973>=a;a++)b[a]=0;for(a=102975;102989>=a;a++)b[a]=0;for(a=102990;102992>=a;a++)b[a]=1;for(a=102997;103002>=a;a++)b[a]=0;for(a=103003;103008>=a;a++)b[a]=2;for(a=103009;103011>=a;a++)b[a]=0;for(a=103012;103014>=a;a++)b[a]=2;for(a=103019;103021>=a;a++)b[a]=0;for(a=103022;103024>=a;a++)b[a]=2;for(a=103029;103031>=a;a++)b[a]=0;for(a=103032;103034>=a;a++)b[a]=2;for(a=103065;103068>=a;a++)b[a]=0;for(a=103074;103076>=a;a++)b[a]=0;for(a=103077;103079>=
a;a++)b[a]=1;for(a=103080;103082>=a;a++)b[a]=0;for(a=103083;103085>=a;a++)b[a]=2;for(a=103090;103093>=a;a++)b[a]=0;for(a=103097;103099>=a;a++)b[a]=0;for(a=103100;103102>=a;a++)b[a]=2;for(a=103107;103109>=a;a++)b[a]=0;for(a=103110;103112>=a;a++)b[a]=2;for(a=103113;103116>=a;a++)b[a]=0;for(a=103117;103120>=a;a++)b[a]=2;for(a=103153;103157>=a;a++)b[a]=0;for(a=103158;103162>=a;a++)b[a]=2;for(a=103163;103165>=a;a++)b[a]=0;for(a=103166;103168>=a;a++)b[a]=1;for(a=103169;103171>=a;a++)b[a]=2;for(a=103186;103188>=
a;a++)b[a]=0;for(a=103189;103191>=a;a++)b[a]=2;for(a=103192;103195>=a;a++)b[a]=0;for(a=103196;103199>=a;a++)b[a]=2;for(a=103200;103224>=a;a++)b[a]=0;for(a=103225;103227>=a;a++)b[a]=1;for(a=103232;103237>=a;a++)b[a]=0;for(a=103238;103243>=a;a++)b[a]=2;for(a=103244;103246>=a;a++)b[a]=0;for(a=103247;103249>=a;a++)b[a]=2;for(a=103254;103256>=a;a++)b[a]=0;for(a=103257;103259>=a;a++)b[a]=2;for(a=103264;103266>=a;a++)b[a]=0;for(a=103267;103269>=a;a++)b[a]=2;for(a=103300;103375>=a;a++)b[a]=0;for(a=103381;103383>=
a;a++)b[a]=0;for(a=103384;103386>=a;a++)b[a]=1;for(a=103387;103389>=a;a++)b[a]=0;for(a=103390;103392>=a;a++)b[a]=2;for(a=103397;103399>=a;a++)b[a]=0;for(a=103400;103471>=a;a++)b[a]=2;for(a=103476;103478>=a;a++)b[a]=0;for(a=103479;103481>=a;a++)b[a]=2;for(a=103486;103488>=a;a++)b[a]=0;for(a=103489;103491>=a;a++)b[a]=2;for(a=103492;103495>=a;a++)b[a]=0;for(a=103496;103499>=a;a++)b[a]=2;for(a=103528;103543>=a;a++)b[a]=0;for(a=103544;103548>=a;a++)b[a]=2;for(a=103549;103551>=a;a++)b[a]=0;for(a=103552;103554>=
a;a++)b[a]=1;for(a=103555;103557>=a;a++)b[a]=2;for(a=103558;103560>=a;a++)b[a]=0;for(a=103571;103573>=a;a++)b[a]=0;for(a=103574;103576>=a;a++)b[a]=2;for(a=103577;103580>=a;a++)b[a]=0;for(a=103581;103583>=a;a++)b[a]=2;for(a=103595;103694>=a;a++)b[a]=0;for(a=103696;103699>=a;a++)b[a]=0;for(a=103700;103793>=a;a++)b[a]=2;for(a=103794;103887>=a;a++)b[a]=0;for(a=103900;103971>=a;a++)b[a]=2;return q.WKIDUnitConversion=b})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang",
"dojo/dom-style","dojo/has"],function(F,q,a,b,e){var g={show:function(k){if(k=g.getNode(k))k.style.display="block"},getNode:function(k){return k&&k.domNode||k},hide:function(k){if(k=g.getNode(k))k.style.display="none"},toggle:function(k){if(k=g.getNode(k))k.style.display="none"===k.style.display?"block":"none"},documentBox:8>=e("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(k){if(k=this.getNode(k)){var c=
0,d=0,f=0,h=0,n=0,p=0;return[q.connect(k,"ontouchstart",function(l){c=l.touches[0].screenX;d=l.touches[0].screenY;f=k.scrollWidth;h=k.scrollHeight;n=k.clientWidth;p=k.clientHeight}),q.connect(k,"ontouchmove",function(l){l.preventDefault();var m=k.firstChild;m instanceof Text&&(m=k.childNodes[1]);var r=m._currentX||0,t=m._currentY||0;r+=l.touches[0].screenX-c;0<r?r=0:0>r&&Math.abs(r)+n>f&&(r=-1*(f-n));m._currentX=r;t+=l.touches[0].screenY-d;0<t?t=0:0>t&&Math.abs(t)+p>h&&(t=-1*(h-p));m._currentY=t;
b.set(m,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+r+"px, "+t+"px)"});c=l.touches[0].screenX;d=l.touches[0].screenY})]}}};a.mixin(F,g);return g})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(F,q,a,b,e,g,k,c,d,f){var h={},n=c.defaults.io,p=/^[a-z][a-z0-9\+\-\.]*:/i,l=/^\s*http:/i,m=/^\s*https:/i,r=/:\d+$/,t=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;
h.isHTTP=function(v){var z=b.location.protocol;return null==v?"http:"===z||"https:"===z:v?"https:"===z:"http:"===z};h.getProtocolForWebResource=function(v){return h.isHTTP()?b.location.protocol:v?"https:":"http:"};h.urlToObject=function(v){var z={},A=new a(v),B=v.indexOf("?");null===A.query?z={path:v,query:null}:(z.path=v.substring(0,B),z.query=e.queryToObject(A.query));A.fragment&&(z.hash=A.fragment,null===A.query&&(z.path=z.path.substring(0,z.path.length-(A.fragment.length+1))));return z};h.getProxyUrl=
function(v,z){var A=F.isString(v)?0===F.trim(v).toLowerCase().indexOf("https:"):v,B=n.proxyUrl,u,w=f.io.proxyNotSet;F.isString(v)&&(u=h.getProxyRule(v))&&(B=u.proxyUrl);if(!B)throw Error(w);if(A&&!1!==z&&0!==b.location.href.toLowerCase().indexOf("https:")&&(A=B,0!==A.toLowerCase().indexOf("http")&&(A=h.getAbsoluteUrl(A)),A=A.replace(/^http:/i,"https:"),h.canUseXhr(A))){B=A;var D=1}B=h.urlToObject(B);B._xo=D;return B};h.addProxy=function(v){var z=h.getProxyRule(v),A;z?A=h.urlToObject(z.proxyUrl):n.alwaysUseProxy&&
(A=h.getProxyUrl());A&&(z=h.urlToObject(v),v=A.path+"?"+z.path,(A=e.objectToQuery(F.mixin(A.query||{},z.query)))&&(v+="?"+A));return v};h.addProxyRule=function(v){var z=v.urlPrefix=h.urlToObject(v.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),A=n.proxyRules,B,u=A.length,w=u;for(B=0;B<u;B++){var D=A[B].urlPrefix;if(0===z.indexOf(D)){if(z.length===D)return-1;w=B;break}else 0===D.indexOf(z)&&(w=B+1)}A.splice(w,0,v);return w};h.getProxyRule=function(v){var z=n.proxyRules,
A=z.length,B=h.urlToObject(v).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(v=0;v<A;v++)if(0===B.indexOf(z[v].urlPrefix)){var u=z[v];break}return u};h.hasSameOrigin=function(v,z,A){v=v.toLowerCase();z=z.toLowerCase();var B=b.location.href.toLowerCase();v=0===v.indexOf("http")?new a(v):B=new a(B);z=0===z.indexOf("http")?new a(z):F.isString(B)?new a(B):B;return(A||v.scheme===z.scheme)&&v.host===z.host&&v.port===z.port};h.canUseXhr=function(v,z){var A=d("esri-phonegap")?
!0:!1,B=h.hasSameOrigin,u=n.corsEnabledServers,w,D=-1;!A&&d("esri-cors")&&u&&u.length&&(A=q.some(u,function(y,C){var G=!y||"object"!==typeof y||y instanceof RegExp?y:y.host;if(G instanceof RegExp){if(G.test(v))return D=C,!0}else if(G&&(w=0!==G.trim().toLowerCase().indexOf("http"),B(v,w?"http://"+G:G)||w&&B(v,"https://"+G)))return D=C,!0;return!1}));return z?D:A};h.getAbsoluteUrl=function(v){var z=h.getProtocolForWebResource();return F.isString(v)&&!p.test(v)?0===v.indexOf("//")?z+v:0===v.indexOf("/")?
z+"//"+b.location.host+v:g._appBaseUrl+v:v};h.fixUrl=function(v){v=F.trim(v);v=h.getAbsoluteUrl(v);v=h.normalizeSlashes(v);v=v.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");v=h.downgradeToHTTP(v);return v=h.upgradeToHTTPS(v)};h.normalize=function(v){return h.fixUrl(v)};h.normalizeSlashes=function(v){if(/^https?:\/\//i.test(v)){var z=v.indexOf("?");if(-1<z){var A=v.slice(0,z);var B=v.slice(z+1)}else A=v;v=A.replace(/\/{2,}/g,"/");v=v.replace("/","//");B&&(v+="?"+B)}return v};h.downgradeToHTTP=
function(v){return h.isHTTP(!1)&&m.test(v)&&h.hasSameOrigin(b.location.href,v,!0)&&!h.canUseXhr(v)?v.replace(m,"http:"):v};h.upgradeToHTTPS=function(v){var z=n.httpsDomains,A=h.isHTTP(!1),B=h.isHTTP(!0);if(!l.test(v))return v;v=F.trim(v);var u=v.indexOf("/",7);u=-1===u?v:v.slice(0,u);u=u.toLowerCase().slice(7);if(r.test(u))if(k.endsWith(u,":80"))u=u.slice(0,-3),v=v.replace(":80","");else return v;if(A&&u===b.location.host&&(!t.test(v)||!h.canUseXhr(v)))return v;A=!1;if(B&&u===b.location.host)A=!0;
else if(z)for(var w=0;w<z.length;w++){var D=z[w];if(u===D||k.endsWith(u,"."+D)){A=!0;break}}A||!B||n.alwaysUseProxy||h.getProxyRule(v)||(A=!0);A&&(v=v.replace(l,"https:"));return v};c=f.widgets.popup;var x=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:c.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:c.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,
appName:"Collector",label:c.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:c.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:c.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:c.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:c.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",
label:c.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:c.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:c.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:c.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:c.NLS_openLinkInApp}];h.getURIInfo=function(v){var z;q.some(x,function(A){A.pattern.test(v)&&(z=A);return!!z});return z};h.isKnownURI=
function(v){return!!h.getURIInfo(v)};h.base64UrlEncode=function(v){return btoa(String.fromCharCode.apply(null,v)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};F.mixin(g,h);g._getProxyUrl=h.getProxyUrl;g._getProxiedUrl=h.addProxy;g._hasSameOrigin=h.hasSameOrigin;g._canDoXOXHR=h.canUseXhr;g._getAbsoluteUrl=h.getAbsoluteUrl;g.fixUrl=h.fixUrl;return h})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m){var r=F([c],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(t,x){this._attrs={};t&&b.isString(t)?this._url=p.urlToObject(this.url=p.normalize(t)):(this.url=this._url=null,(x=x||t)&&(x.layerDefinition||x.query)&&(x=null));this.spatialReference=new l(4326);this.initialExtent=new m(-180,-90,180,90,new l(4326));this._map=this._div=
null;this.normalization=!0;x&&(x.id&&(this.id=x.id),this.arcgisProps=x.arcgisProps,this.parentLayer=x.parentLayer,!1===x.visible&&(this.visible=!1),f.isDefined(x.opacity)&&(this.opacity=x.opacity),f.isDefined(x.minScale)&&this.setMinScale(x.minScale),f.isDefined(x.maxScale)&&this.setMaxScale(x.maxScale),this.attributionDataUrl=x.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,f.isDefined(x.showAttribution)&&(this.showAttribution=x.showAttribution),this.className=x.className,
this.refreshInterval=x.refreshInterval||0);this._errorHandler=b.hitch(this,this._errorHandler);this._scheduledRefresh=b.hitch(this,this._scheduledRefresh);this.refresh=b.hitch(this,this.refresh);if(this.managedSuspension){var v=this._setMap;this._setMap=function(z){var A=v.apply(this,arguments);this._fireAttach(z);this.evaluateSuspension();if(this.suspended&&!z.loaded)var B=a.connect(z,"onLoad",this,function(){a.disconnect(B);B=null;this.evaluateSuspension()});return A}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(t){this.loaded||(this.loadError=t);this.onError(t)},_setMap:function(t,x,v,z){this._map=t;this._lyrZEHandle=a.connect(t,"onZoomEnd",this,this._processMapScale);if(t.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var A=a.connect(t,"onLoad",this,function(){a.disconnect(A);
A=null;this._processMapScale()})},_unsetMap:function(t,x){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(t)},_fireAttach:function(t){this.attached=!0;this.onAttach({map:t})},_fireDetach:function(t){this.attached=!1;this.onDetach({map:t})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(t,x){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(t,x),this._map&&this._map._decr())},_getToken:function(){var t=this._url,x=this.credential;return t&&t.query&&t.query.token||x&&x.token||void 0},_findCredential:function(){this.credential=d.id&&this._url&&d.id.findCredential(this._url.path)},_useSSL:function(){var t=this._url,x=/^http:/i;this.url&&(this.url=this.url.replace(x,"https:"));t&&t.path&&(t.path=t.path.replace(x,"https:"))},
refresh:function(t){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(t){this.setScaleRange(t)},setMaxScale:function(t){this.setScaleRange(null,t)},setScaleRange:function(t,x){var v=f.isDefined(t),z=f.isDefined(x);this.loaded||(this._hasMin=this._hasMin||v,this._hasMax=this._hasMax||z);var A=this.minScale,B=this.maxScale;this.minScale=(v?t:this.minScale)||0;this.maxScale=(z?x:this.maxScale)||0;if(A!==this.minScale||B!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var t=void 0===this._resumedOnce,x=this.className,v=this._attrs,z=this.getNode(),A;if(t){this._resumedOnce=!0;if(x&&z){var B=z.getAttribute("class")||"";(new RegExp("(^|\\s)"+x+"(\\s|$)","i")).test(B)||z.setAttribute("class",B+((B?" ":"")+x))}if(v&&z)for(A in v)v.hasOwnProperty(A)&&z.setAttribute(A,v[A])}this._refreshRT();this.onResume({firstOccurrence:t});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var t=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();t!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(t){return t?r.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(t,x){if(!(t||this._map&&this._map.loaded))return!1;var v=this._map;t=t||v.getScale();var z=this.minScale,A=this.maxScale,B=!z,u=!A,w;x&&(w=v.width>v.height?v.width:v.height);B||(t<=z?B=!0:x&&(B=Math.abs(z-t)/z<1/
w));u||(t>=A?u=!0:x&&(u=Math.abs(A-t)/A<1/w));return B&&u},getAttributionData:function(){var t=this.attributionDataUrl,x=new e(n._dfdCanceller);this.hasAttributionData&&t?(x._pendingDfd=h({url:t,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),x._pendingDfd.then(function(v){x.callback(v)},function(v){x.errback(v)})):(t=Error("Layer does not have attribution data"),t.log=!!q.isDebug,x.errback(t));return x},getResourceInfo:function(){var t=this.resourceInfo;return b.isString(t)?g.fromJson(t):
b.clone(t)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(t,x){var v=this.getNode();if("data-reference"===t&&11>k("ie"))return this;v&&(null==x?v.removeAttribute(t):v.setAttribute(t,x));this._attrs&&(null==x?delete this._attrs[t]:this._attrs[t]=x);return this},setRefreshInterval:function(t){var x=this.refreshInterval;this.refreshInterval=t;this._toggleRT(!1);t&&this._toggleRT(!0);if(x!==t)this.onRefreshIntervalChange();return this},_toggleRT:function(t){t&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(t){var x=
this._refreshTS;x&&(t=this._reCheckTS.test(t)?t.replace(this._reReplaceTS,"$$$1"+x):t+((-1===t.indexOf("?")?"?":"\x26")+"_ts\x3d"+x));return t},setNormalization:function(t){this.normalization=t},setVisibility:function(t){this.visible!==t&&(this.visible=t,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",t?null:"")},onLoad:function(){},onAttach:function(t){},onDetach:function(t){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});b.setObject("layers.Layer",r,d);return r})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(F,q,a,b,e,g){F=F([b],{declaredClass:"esri.Evented",registerConnectEvents:function(){var k=this.constructor,c=this.constructor._meta.parents,
d=[{}],f={},h,n=function(l,m){q.isArray(l)||(l=[l]);for(var r=0;r<l.length;r++){var t=l[r];t._meta&&t._meta.parents&&n(t._meta.parents,m);t.prototype._eventMap&&m.push(q.mixin({},t.prototype._eventMap))}return m};if(!k._onMap){n(c,d);d.push(this._eventMap);c=q.mixin.apply(this,d);for(p in this)/^on\w/.test(p)&&q.isFunction(this[p])&&(d=this._hyphenLower(p).toLowerCase(),c[d]||(f[d]={method:p}));for(h in c){var p=this._onCamelCase(h);f[h]={method:p,argKeys:c[h]}}k._onMap=f;return k._onMap}},on:function(k,
c){if(-1<k.indexOf(",")){for(var d=k.split(/\s*,\s*/),f=d.length,h=[];f--;)h.push(this.on(d[f],c));h.remove=function(){for(var l=0;l<h.length;l++)h[l].remove()};return h}d=this.constructor._onMap||this.registerConnectEvents();f="string"==typeof k&&k.toLowerCase();var n=this._onCamelCase(f),p=d&&d[f];return(n=p&&p.method||this[n]&&q.isFunction(this[n])&&n)?p&&q.isArray(p.argKeys)?(d=this._onArr2Obj(c,d[f].argKeys),a.after(this,n,d,!0)):a.after(this,n,function(l){l=l||{};l.target||(l.target=this);c.call(this,
l)},!0):this.inherited(arguments)},emit:function(k,c){var d,f,h=k.toLowerCase();var n=this._onCamelCase(k);var p=this.constructor._onMap||this.registerConnectEvents();n=(f=p&&p[h]&&p[h].method||q.isFunction(this[n])&&n)&&this[f];f&&p&&p[h]&&this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},p[h].argKeys)(c);c=c||{};c.target||(c.target=this);if(n){var l=d&&d.length?d:[c];l=n.apply(this,l)}this.inherited(arguments,[k,c]);return l},_onObj2Arr:function(k,c){if(c){var d=this;return function(f){var h,
n=[],p=c.length;for(h=0;h<p;h++)n[h]=f[c[h]];k.apply(d,n)}}return k},_onArr2Obj:function(k,c){if(c){var d=this;return function(){var f,h={},n=arguments.length;for(f=0;f<n;f++)h[c[f]]=arguments[f];h.target||(h.target=d);k.call(d,h)}}return k},_hyphenLower:function(k){return k.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(c,d){return(d?"-":"")+c.toLowerCase()})},_onCamelCase:function(k){return"on"+k.substr(0,1).toUpperCase()+k.substr(1).replace(/\-([a-z])/g,function(c,d){return d.toUpperCase()})}});
return g.Evented=F})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v){function z(Y){Y=new g(Y);return(Y.host+(Y.port?":"+Y.port:"")).toLowerCase()}function A(Y){return this._xhr?
this._xhr.getResponseHeader(Y):null}function B(Y,ba){var Q=n.objectToQuery(Y.content);Q&&(Y.url+=(-1===Y.url.indexOf("?")?"?":"\x26")+Q);if(2E3<Y.url.length){if("data:"!==Y.url.toLowerCase().slice(0,5))return Q=new b,Q.reject(e.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),Q;if(3E6<Y.url.length)return Q=new b,Q.reject(e.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),Q}var fa=new Image;
ba.allowImageDataAccess&&(fa.crossOrigin=Y.withCredentials?"use-credentials":"anonymous");var S=!1,X=new b(function(la){S=!0;fa.onload=fa.onerror=fa.onabort=null;fa.src=""});Q=function(la){fa.onload=fa.onerror=fa.onabort=null;S||X.reject(Error("Unable to load the resource"))};fa.onload=function(){fa.onload=fa.onerror=fa.onabort=null;S||X.resolve(this)};fa.onerror=Q;fa.onabort=Q;fa.alt="";fa.src=Y.url;return X}function u(Y,ba,Q,fa){var S=!1,X=!1,la=!1,na;if(r.isDefined(ba))if(e.isObject(ba)){S=!!ba.useProxy;
X=!!ba.usePost;la=!!ba.returnProgress;var qa=ba.crossOrigin}else S=!!ba;Y=e.mixin({},Y);delete Y._credential;Y._ssl&&(Y.url=Y.url.replace(/^http:/i,"https:"));10>m("ie")&&!da.test(Y.url)&&(Y.url=encodeURI(Y.url));var ta=Y.content,ya=Y.url,za=Q&&Y.form,va=R;qa=r.isDefined(qa)?qa:va.useCors;Y.load=function(Ba){if(Ba){if(Ba.error){var La=e.mixin(Error(),Ba.error);La.log=!!a.isDebug}else"error"===Ba.status&&(La=e.mixin(Error(),Ba),La.log=!!a.isDebug);La&&(Y.failOk=!La.log,r.isDefined(La.httpCode)||(La.httpCode=
La.code))}return La||Ba};Y.error=function(Ba,La){La&&La.xhr&&La.xhr.abort();Ba instanceof Error||(Ba=e.mixin(Error(),Ba));Ba.log=!!a.isDebug;Y.failOk=!Ba.log;va.errorHandler(Ba,La);return Ba};Y._token&&(Y.content=Y.content||{},Y.content.token=Y._token);var Fa=0;if(ta&&ya){var Ea=n.objectToQuery(ta);Fa=Ea.length+ya.length+1;m("esri-url-encodes-apostrophe")&&(Fa=Ea.replace(/'/g,"%27").length+ya.length+1)}Y.timeout=r.isDefined(Y.timeout)?Y.timeout:va.timeout;Y.handleAs=Y.handleAs||"json";try{var ra=
qa&&t.canUseXhr(Y.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(Y.url),M=t.hasSameOrigin(Y.url,window.location.href)||ra,aa=X||Q||Fa>va.postLength?!0:!1,ma=M||-1===Y.handleAs.indexOf("json")||!Y.callbackParamName||Q?!1:!0,U=t.getProxyRule(Y.url)||va.alwaysUseProxy||S||!("image"===Y.handleAs&&!ba.allowImageDataAccess||ma&&!aa||M)?!0:!1;Q&&!m("esri-file-upload")&&!U&&ra&&(U=!0);if(U){var T=t.getProxyUrl(ya,qa);var ha=T.path;T._xo&&(ra=!0);!aa&&ha.length+1+Fa>va.postLength&&(aa=!0);Y.url=
ha+"?"+ya;if(aa)Y.content=e.mixin(T.query||{},ta);else{var ka=n.objectToQuery(e.mixin(T.query||{},ta));ka&&(Y.url+="?"+ka);Y.content=null}}if(!ma||aa||U){var K=Y.headers;!ra||K&&K.hasOwnProperty("X-Requested-With")||(K=Y.headers=K||{},K["X-Requested-With"]=null);if(Q){var P=Y.callbackParamName||"callback.html",ca=Y.callbackElementName||"textarea",ia,oa,Aa=za.elements?za.elements.length:0;if(ta=Y.content)for(ia in ta.token&&/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(ya)&&(ya+=(-1===ya.indexOf("?")?
"?":"\x26")+"token\x3d"+ta.token,Y.url=U?ha+"?"+ya:ya,delete ta.token),ta){var Ca=ta[ia];if(r.isDefined(Ca)){var Na=null;for(oa=0;oa<Aa;oa++){var Ja=za.elements[oa];if(Ja.name===ia){Na=Ja;break}}Na?Na.value=Ca:fa?za.append(ia,Ca):za.appendChild(h.create("input",{type:"hidden",name:ia,value:Ca}))}}if(m("esri-file-upload")){q.forEach(za.elements,function(Ba){Ba.name===P&&za.removeChild(Ba)});var Ia=fa?za:new FormData(za);if(11<=m("safari")&&"entries"in Ia&&"delete"in Ia){fa=[];for(var wa=Ia.entries(),
ua=wa.next();!ua.done;){var Pa=ua.value;Pa[1]instanceof File&&""===Pa[1].name&&fa.push(Pa[0]);ua=wa.next()}fa.forEach(function(Ba){Ia["delete"](Ba)})}Y.contentType=!1;Y.postData=Ia;delete Y.form}else{za.enctype="multipart/form-data";9>m("ie")&&(za.encoding="multipart/form-data");za.method="post";q.some(za.elements,function(Ba){return Ba.name===P})||za.appendChild(h.create("input",{type:"hidden",name:P,value:ca}));if(-1!==ya.toLowerCase().indexOf("addattachment")||-1!==ya.toLowerCase().indexOf("updateattachment"))ya+=
(-1===ya.indexOf("?")?"?":"\x26")+P+"\x3d"+ca,Y.url=U?ha+"?"+ya:ya;delete Y.content}}if(ra&&!Y.hasOwnProperty("withCredentials")&&"with-credentials"===R.useCors){ha=U?ha:ya;var Ma=t.canUseXhr(ha,!0),Ya=-1<Ma?R.corsEnabledServers[Ma]:null;if(Ya&&Ya.hasOwnProperty("withCredentials"))Ya.withCredentials&&(Y.withCredentials=!0);else if(p.id){var Ua=p.id.findServerInfo(ha);Ua&&Ua.webTierAuth&&(Y.withCredentials=!0)}}Y=O?O(Y):Y;var Va=function(){if("image"===Y.handleAs)return B(Y,ba);if(aa){if(Q&&!m("esri-file-upload")){na=
new b(function(){Ba.cancel()});var Ba=f.post(Y.url,Y).then(function(Ga){na.resolve(Ga)}).otherwise(function(Ga){na.reject(Ga)});na.addCallback(function(Ga){return Y.load(Ga)});na.addErrback(function(Ga){return Y.error(Ga)});return na}!U&&m("safari")&&(Y.url+=(-1===Y.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+W++);if(la){Y.uploadProgress=!0;Y.data=Y.postData;Y.query=Y.content;na=new b(function(){La.cancel()});var La=c.post(Y.url,Y).then(function(Ga){na.resolve(Ga)},function(Ga){na.reject(Ga)},
function(Ga){na.progress({transferType:Ga.transferType,loaded:Ga.loaded,total:Ga.total})});na.addCallback(function(Ga){return Y.load(Ga)});na.addErrback(function(Ga){return Y.error(Ga)});return na}return k.post(Y)}return k.get(Y)};return Y.withCredentials&&v.isNoCorsRequestRequired(ya)?na=v.sendNoCorsRequest(ya,ta).addBoth(function(){var Ba=Va();na.ioArgs=Ba.ioArgs;return Ba}):Va()}Y=O?O(Y):Y;Y.jsonp=Y.callbackParamName;Y.query=Y.content;na=new b(function(){Wa.cancel()});var Wa=d.get(Y.url,Y).then(function(Ba){na.resolve(Ba)}).otherwise(function(Ba){na.reject(Ba)});
na.addCallback(function(Ba){return Y.load(Ba)});na.addErrback(function(Ba){return Y.error(Ba)});return na}catch(Ba){return na=new b,na.errback(Y.error(Ba)),na}}function w(Y){var ba=R.corsStatus,Q=t.canUseXhr(Y,!0);-1<Q&&R.corsEnabledServers.splice(Q,1);var fa=new b;fa.reject({log:!!a.isDebug});ba[z(Y)]=fa.promise;return Q}function D(Y){var ba=R.corsStatus;try{var Q=z(Y);if(R.corsDetection&&R.useCors&&m("esri-cors")&&Y&&-1!==Y.toLowerCase().indexOf("/rest/services")&&!t.hasSameOrigin(Y,window.location.href)&&
!t.canUseXhr(Y)){if(ba[Q]&&!ba[Q].isCanceled())return ba[Q];var fa=new b(x._dfdCanceller);ba[Q]=fa.promise;var S=k.get({url:Y.substring(0,Y.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*R.corsDetectionTimeout});fa._pendingDfd=S;S.then(function(X){X?(t.canUseXhr(Y)||R.corsEnabledServers.push(Q),fa.resolve()):fa.reject()},function(X){fa.reject(X)});return fa.promise}}catch(X){}return ea}function y(Y){O=Y}function C(Y,
ba,Q,fa){function S(ra){ra._pendingDfd=u(Q,fa,za,ya);if(!ra._pendingDfd){ra.ioArgs=ra._pendingDfd&&ra._pendingDfd.ioArgs;var M=Error("Deferred object is missing");M.log=!!a.isDebug;ra.errback(M);ra._pendingDfd=null;return ra}ra._pendingDfd.addCallback(function(aa){if(!aa)return aa;var ma=ra._pendingDfd&&ra._pendingDfd.ioArgs&&ra._pendingDfd.ioArgs.xhr;if(!ma)return aa;if(ma=ma.getResponseHeader("Content-Type"))if(ma=ma.toLowerCase(),-1===ma.indexOf("text/plain")&&-1===ma.indexOf("application/json"))return aa;
if(aa instanceof ArrayBuffer&&750>=aa.byteLength)ma=new Blob([aa]);else if(aa instanceof Blob&&750>=aa.size)ma=aa;else return aa;var U=new b,T=new FileReader;T.readAsText(ma);T.onloadend=function(){if(!T.error)try{var ha=JSON.parse(T.result);if(ha.error)var ka=ha.error}catch(K){}ka?(ka=e.mixin(Error(),ka),ka.log=!!a.isDebug,null==ka.httpCode&&(ka.httpCode=ka.code),U.reject(ka)):U.resolve(aa)};return U.promise}).addCallback(function(aa){ra.ioArgs=ra._pendingDfd&&ra._pendingDfd.ioArgs;fa.returnFullResponse&&
(aa={data:aa,_xhr:ra.ioArgs&&ra.ioArgs.xhr,getHeader:A});ra.callback(aa);ra._pendingDfd=null}).addErrback(function(aa){if(aa){var ma=aa.code;var U=aa.subcode;var T=(T=aa.messageCode)&&T.toUpperCase()}if(aa&&403==ma&&(4==U||aa.message&&-1<aa.message.toLowerCase().indexOf("ssl")&&-1===aa.message.toLowerCase().indexOf("permission"))){if(!Q._ssl){Q._ssl=Q._sslFromServer=!0;C(ra,!0,Q,fa);return}}else if(aa&&415==aa.status){if(w(Q.url),!Q._err415){Q._err415=1;C(ra,!0,Q,fa);return}}else if(p.id&&-1!==q.indexOf(p.id._errorCodes,
ma)&&!p.id._isPublic(Q.url)&&!la&&(403!=ma||-1===q.indexOf(Z,T)&&(!r.isDefined(U)||2==U&&Q._token))){ra._pendingDfd=p.id.getCredential(Q.url,{token:Q._token,error:aa});ra._pendingDfd.addCallback(function(ha){Q._token=ha.token;Q._credential=ha;Q._ssl=Q._sslFromServer||ha.ssl;C(ra,!0,Q,fa)}).addErrback(function(ha){ra.errback(ha);ra._pendingDfd=null});return}ra.ioArgs=ra._pendingDfd&&ra._pendingDfd.ioArgs;ra.isFulfilled()||ra.errback(aa);ra._pendingDfd=null}).then(null,null,function(aa){ra.progress(aa)})}
var X=Q.form,la=fa.disableIdentityLookup,na=fa._preLookup,qa=!1;if(m("esri-workers")&&!1!==R.useWorkers)if(!0===fa.useWorkers||!0===R.useWorkers)qa=!0;else if(fa.workerOptions){var ta=fa.workerOptions;if(ta.callback||ta.worker&&ta.worker.worker instanceof Worker)qa=!0}var ya=X&&m("esri-file-upload")&&X instanceof FormData,za=X&&(X.elements?q.some(X.elements,function(ra){return"file"===ra.type}):ya),va=-1!==Q.url.toLowerCase().indexOf("token\x3d")||Q.content&&Q.content.token||za&&q.some(X.elements,
function(ra){return"token"===ra.name})?1:0;if(!ba){Y.addCallback(function(ra){if(ra&&(/\/sharing\/rest\/accounts\/self/i.test(Q.url)||/\/sharing\/rest\/portals\/self/i.test(Q.url))){if(!va&&!Q._token&&ra.user&&ra.user.username){R.webTierAuthServers.push(z(Q.url));var M=R.corsEnabledServers,aa=t.canUseXhr(Q.url,!0),ma={host:z(Q.url),withCredentials:!0};if(-1===aa)M.push(ma);else{var U=M[aa];U instanceof RegExp?(ma.host=U,M.splice(aa,1,ma)):"object"===typeof U?U.withCredentials=!0:M.splice(aa,1,ma)}}Array.isArray(ra.authorizedCrossOriginNoCorsDomains)&&
v.registerNoCorsDomains(ra.authorizedCrossOriginNoCorsDomains)}if(ra=Q._credential)if(M=(M=p.id.findServerInfo(ra.server))&&M.owningSystemUrl)M=M.replace(/\/?$/,"/sharing"),(ra=p.id.findCredential(M,ra.userId))&&-1===p.id._getIdenticalSvcIdx(M,ra)&&ra.resources.splice(0,0,M)});Y.addBoth(function(ra){delete Q._credential;!ra||m("ie")&&ra.nodeType||(ra._ssl=Q._ssl)});var Fa=Q.load,Ea=Q.error;Fa&&Y.addCallback(function(ra){var M=Y._pendingDfd;M=M&&M.ioArgs;return Fa.call(M&&M.args,ra,M)});Ea&&Y.addErrback(function(ra){var M=
Y._pendingDfd;M=M&&M.ioArgs;return Ea.call(M&&M.args,ra,M)})}!p.id||va||Q._token||p.id._isPublic(Q.url)||la&&!na||!(ba=p.id.findCredential(Q.url))||(Q._token=ba.token,Q._ssl=ba.ssl);qa?fa.workerOptions&&fa.workerOptions.worker?(I||(I=k),k=fa.workerOptions.worker,S(Y)):F(["./workers/RequestClient"],function(ra){I||(I=k);if(fa.workerOptions){var M=fa.workerOptions;k=ra.getClient(M.callback,M.cbFunction)}else k=ra.getClient();S(Y)}):(I&&(k=I,I=null),S(Y));return Y}function G(Y,ba){Y.url=t.fixUrl(Y.url);
ba=ba||{};var Q=new b(x._dfdCanceller),fa=D(Y.url);Q._pendingDfd=fa;fa.always(function(S){S&&"cancel"===S.dojoType?Q.reject(S):C(Q,!1,Y,ba)});return Q}var I=null,O,R=l.defaults.io,Z=["COM_0056","COM_0057","SB_0008"],W=0,da=/%[0-9A-F]{2}/i,ea=function(){var Y=new b;Y.resolve();return Y.promise}();G._makeRequest=u;G._processRequest=C;G._disableCors=w;G._detectCors=D;G.setRequestPreCallback=y;p.request=G;p._makeRequest=u;p._processRequest=C;p._disableCors=w;p._detectCors=D;p.setRequestPreCallback=y;
return G})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(F,q,a,b,e,g){function k(){var t=document.createElement("iframe");t.name="esri_core_jsonp_iframe";t.style.display="none";t.setAttribute("sandbox","allow-scripts");if(!g("ff")&&"srcdoc"in t){var x=F.toUrl("dojo/dojo.js"),v=e.replace("../../../dojo/dojo.js",x);x=x.slice(0,-7);v=v.replace("../../../dojo/",x);t.srcdoc=v}else v=F.toUrl("./iframe.html"),
"http:"===window.location.protocol&&0===v.indexOf("https:")&&(v=v.replace("https:","http:")),t.src=v;document.body.appendChild(t);return t}function c(){var t=new MessageChannel;t.port1.addEventListener("message",d);t.port1.start();return t}function d(t){var x=t.data;if("ready"===x){x=0;for(var v=m;x<v.length;x++)t=v[x],h(t,p);m=null}else if(t=r[x.id])delete r[x.id],x.isError?t.dfd.reject(Error(x.message)):t.dfd.resolve(x.response)}function f(t,x){t.addEventListener("load",function(){t.contentWindow.postMessage("init",
"*",[x.port2])})}function h(t,x){r[t.message.id]=t;x.port1.postMessage(t.message)}Object.defineProperty(q,"__esModule",{value:!0});var n,p,l=0,m=[],r={};q.get=function(t,x){if(!g("esri-script-sandbox"))return b.get(t,x);var v=null;x&&(v={jsonp:x.jsonp,preventCache:x.preventCache,query:x.query,timeout:x.timeout});var z=new a(function(){if(m){var B=m.indexOf(A);-1<B&&m.splice(B,1)}else A.message.id in r&&delete r[A.message.id]}),A={dfd:z,message:{id:"id"+(++l+Math.random()),url:t,options:v}};n||(n=
k(),p=c(),f(n,p));m?m.push(A):h(A,p);return z.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(F,q,a,b,e,g,k,c,d,f,h){function n(w,D){w.canDelete&&t._remove(w.id,D.options.frameDoc,!0)}function p(w){u&&u.length&&(e.forEach(u,function(D){t._remove(D.id,D.frameDoc);D.frameDoc=null}),u=[]);return w.options.jsonp?!w.data:!0}function l(w){return!!this.scriptLoaded}
function m(w){return(w=w.options.checkString)&&eval("typeof("+w+') !\x3d\x3d "undefined"')}function r(w,D){if(this.canDelete){var y=this.response.options;u.push({id:this.id,frameDoc:y.ioArgs?y.ioArgs.frameDoc:y.frameDoc});y.ioArgs&&(y.ioArgs.frameDoc=null);y.frameDoc=null}D?this.reject(D):this.resolve(w)}function t(w,D,y){var C=a.parseArgs(w,a.deepCopy({},D));w=C.url;D=C.options;var G=a.deferred(C,n,p,D.jsonp?null:D.checkString?m:l,r);g.mixin(G,{id:x+v++,canDelete:!1});D.jsonp&&((new RegExp("[?\x26]"+
D.jsonp+"\x3d")).test(w)||(w+=(~w.indexOf("?")?"\x26":"?")+D.jsonp+"\x3d"+(D.frameDoc?"parent.":"")+x+"_callbacks."+G.id),G.canDelete=!0,B[G.id]=function(R){C.data=R;G.handleResponse(C)});a.notify&&a.notify.emit("send",C,G.promise.cancel);if(!D.canAttach||D.canAttach(G)){var I=t._attach(G.id,w,D.frameDoc,function(R){if(!(R instanceof Error)){var Z=Error("Error loading "+(R.target?R.target.src:"script"));Z.source=R;R=Z}G.reject(R);t._remove(G.id,D.frameDoc,!0)});if(!D.jsonp&&!D.checkString)var O=k(I,
z,function(R){if("load"===R.type||A.test(I.readyState))O.remove(),G.scriptLoaded=R})}q(G);return y?G:G.promise}f.add("script-readystatechange",function(w,D){return"undefined"!==typeof D.createElement("script").onreadystatechange&&("undefined"===typeof w.opera||"[object Opera]"!==w.opera.toString())});var x=F.id.replace(/[\/\.\-]/g,"_"),v=0,z=f("script-readystatechange")?"readystatechange":"load",A=/complete|loaded/,B=b.global[x+"_callbacks"]={},u=[];t.get=t;t._attach=function(w,D,y,C){y=y||h.doc;
var G=y.createElement("script");if(C)k.once(G,"error",C);G.type="text/javascript";try{G.src=D}catch(I){C&&C(G)}G.id=w;G.async=!0;G.charset="utf-8";return y.getElementsByTagName("head")[0].appendChild(G)};t._remove=function(w,D,y){d.destroy(c.byId(w,D));B[w]&&(y?B[w]=function(){delete B[w]}:delete B[w])};t._callbacksProperty=x+"_callbacks";return t})},"esri/core/sniff":function(){define(["../sniff"],function(F){return F})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n){function p(A){return!this.isFulfilled()}function l(A){return!!this._finished}function m(A,B){if(!B)try{var u=A.options,w=t.doc(t._frame),D=u.handleAs;if("html"!==D){if("xml"===D)if("html"===w.documentElement.tagName.toLowerCase()){c("a",w.documentElement).orphan();var y=w.documentElement.innerText||w.documentElement.textContent;y=y.replace(/>\s+</g,"\x3e\x3c");A.text=g.trim(y)}else A.data=w;else A.text=w.getElementsByTagName("textarea")[0].value;e(A)}else A.data=
w}catch(C){B=C}B?this.reject(B):this._finished?this.resolve(A):this.reject(Error("Invalid dojo/request/iframe request state"))}function r(A){this._callNext()}function t(A,B,u){var w=b.parseArgs(A,b.deepCreate(z,B),!0);A=w.url;B=w.options;if("GET"!==B.method&&"POST"!==B.method)throw Error(B.method+" not supported by dojo/request/iframe");t._frame||(t._frame=t.create(t._iframeName,v+"();"));A=b.deferred(w,null,p,l,m,r);A._callNext=function(){this._calledNext||(this._calledNext=!0,t._currentDfd=null,
t._fireNextRequest())};A._legacy=u;t._dfdQueue.push(A);t._fireNextRequest();a(A);return u?A:A.promise}var x=F.id.replace(/[\/\.\-]/g,"_"),v=x+"_onload";n.global[v]||(n.global[v]=function(){var A=t._currentDfd;if(A){var B=f.byId(A.response.options.form)||A._tmpForm;if(B){for(var u=A._contentToClean,w=0;w<u.length;w++)for(var D=u[w],y=0;y<B.childNodes.length;y++){var C=B.childNodes[y];if(C.name===D){h.destroy(C);break}}A._originalAction&&B.setAttribute("action",A._originalAction);A._originalMethod&&
(B.setAttribute("method",A._originalMethod),B.method=A._originalMethod);A._originalTarget&&(B.setAttribute("target",A._originalTarget),B.target=A._originalTarget)}A._tmpForm&&(h.destroy(A._tmpForm),delete A._tmpForm);A._finished=!0}else t._fireNextRequest()});var z={method:"POST"};t.create=function(A,B,u){if(n.global[A])return n.global[A];if(n.global.frames[A])return n.global.frames[A];u||(d("config-useXDomain")&&d("config-dojoBlankHtmlUrl"),u=d("config-dojoBlankHtmlUrl")||q.toUrl("dojo/resources/blank.html"));
B=h.place('\x3ciframe id\x3d"'+A+'" name\x3d"'+A+'" src\x3d"'+u+'" onload\x3d"'+B+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',n.body());return n.global[A]=B};t.doc=function(A){if(A.contentDocument)return A.contentDocument;var B=A.name;if(B){var u=n.doc.getElementsByTagName("iframe");if(A.document&&u[B].contentWindow&&u[B].contentWindow.document)return u[B].contentWindow.document;if(n.doc.frames[B]&&n.doc.frames[B].document)return n.doc.frames[B].document}return null};
t.setSrc=function(A,B,u){A=n.global.frames[A.name];A.contentWindow&&(A=A.contentWindow);try{u?A.location.replace(B):A.location=B}catch(w){}};t._iframeName=x+"_IoIframe";t._notifyStart=function(){};t._dfdQueue=[];t._currentDfd=null;t._fireNextRequest=function(){try{if(!t._currentDfd&&t._dfdQueue.length){do var A=t._currentDfd=t._dfdQueue.shift();while(A&&(A.canceled||A.isCanceled&&A.isCanceled())&&t._dfdQueue.length);if(!A||A.canceled||A.isCanceled&&A.isCanceled())t._currentDfd=null;else{var B=A.response,
u=B.options,w=A._contentToClean=[],D=f.byId(u.form),y=b.notify,C=u.data||null;if(!A._legacy&&"POST"===u.method&&!D)D=A._tmpForm=h.create("form",{name:x+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},n.body());else if("GET"===u.method&&D&&-1<B.url.indexOf("?")){var G=B.url.slice(B.url.indexOf("?")+1);C=g.mixin(k.queryToObject(G),C)}if(D){if(!A._legacy){var I=D;do I=I.parentNode;while(I&&I!==n.doc.documentElement);I||(D.style.position="absolute",D.style.left="-1000px",D.style.top=
"-1000px",n.body().appendChild(D));D.name||(D.name=x+"_form")}if(C){I=function(Y,ba){h.create("input",{type:"hidden",name:Y,value:ba},D);w.push(Y)};for(var O in C){var R=C[O];if(g.isArray(R)&&1<R.length)for(G=0;G<R.length;G++)I(O,R[G]);else{var Z=c("input[name\x3d'"+O+"']",D);-1==Z.indexOf()?I(O,R):Z.val(R)}}}var W=D.getAttributeNode("action"),da=D.getAttributeNode("method"),ea=D.getAttributeNode("target");B.url&&(A._originalAction=W?W.value:null,W?W.value=B.url:D.setAttribute("action",B.url));A._legacy?
da&&da.value||(da?da.value=u.method:D.setAttribute("method",u.method)):(A._originalMethod=da?da.value:null,da?da.value=u.method:D.setAttribute("method",u.method));A._originalTarget=ea?ea.value:null;ea?ea.value=t._iframeName:D.setAttribute("target",t._iframeName);D.target=t._iframeName;y&&y.emit("send",B,A.promise.cancel);t._notifyStart(B);D.submit()}else u="",B.options.data&&(u=B.options.data,"string"!==typeof u&&(u=k.objectToQuery(u))),I=B.url+(-1<B.url.indexOf("?")?"\x26":"?")+u,y&&y.emit("send",
B,A.promise.cancel),t._notifyStart(B),t.setSrc(t._frame,I,!0)}}}catch(Y){A.reject(Y)}};b.addCommonMethods(t,["GET","POST"]);return t})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(F,q,a,b,e){function g(d){for(;d.childNodes[0]&&1==d.childNodes[0].nodeType;)d=d.childNodes[0];return d}function k(d,f){"string"==typeof d?(d=b.toDom(d,f&&f.ownerDocument),11==d.nodeType&&(d=d.childNodes[0])):1==d.nodeType&&
d.parentNode&&(d=d.cloneNode(!1));return d}var c=F.NodeList;q.extend(c,{_placeMultiple:function(d,f){for(var h="string"==typeof d||d.nodeType?F(d):d,n=[],p=0;p<h.length;p++)for(var l=h[p],m=this.length,r=m-1,t;t=this[r];r--)0<p&&(t=this._cloneNode(t),n.unshift(t)),r==m-1?b.place(t,l,f):l.parentNode.insertBefore(t,l),l=t;n.length&&(n.unshift(0),n.unshift(this.length-1),Array.prototype.splice.apply(this,n));return this},innerHTML:function(d){return arguments.length?this.addContent(d,"only"):this[0].innerHTML},
text:function(d){if(arguments.length){for(var f=0,h;h=this[f];f++)1==h.nodeType&&e.set(h,"textContent",d);return this}var n="";for(f=0;h=this[f];f++)n+=e.get(h,"textContent");return n},val:function(d){if(arguments.length){for(var f=q.isArray(d),h=0,n;n=this[h];h++){var p=n.nodeName.toUpperCase(),l=n.type,m=f?d[h]:d;if("SELECT"==p)for(p=n.options,l=0;l<p.length;l++){var r=p[l];r.selected=n.multiple?-1!=a.indexOf(d,r.value):r.value==m}else"checkbox"==l||"radio"==l?n.checked=n.value==m:n.value=m}return this}if((n=
this[0])&&1==n.nodeType){d=n.value||"";if("SELECT"==n.nodeName.toUpperCase()&&n.multiple){d=[];p=n.options;for(l=0;l<p.length;l++)r=p[l],r.selected&&d.push(r.value);d.length||(d=null)}return d}},append:function(d){return this.addContent(d,"last")},appendTo:function(d){return this._placeMultiple(d,"last")},prepend:function(d){return this.addContent(d,"first")},prependTo:function(d){return this._placeMultiple(d,"first")},after:function(d){return this.addContent(d,"after")},insertAfter:function(d){return this._placeMultiple(d,
"after")},before:function(d){return this.addContent(d,"before")},insertBefore:function(d){return this._placeMultiple(d,"before")},remove:c.prototype.orphan,wrap:function(d){if(this[0]){d=k(d,this[0]);for(var f=0,h;h=this[f];f++){var n=this._cloneNode(d);h.parentNode&&h.parentNode.replaceChild(n,h);g(n).appendChild(h)}}return this},wrapAll:function(d){if(this[0]){d=k(d,this[0]);this[0].parentNode.replaceChild(d,this[0]);d=g(d);for(var f=0,h;h=this[f];f++)d.appendChild(h)}return this},wrapInner:function(d){if(this[0]){d=
k(d,this[0]);for(var f=0;f<this.length;f++){var h=this._cloneNode(d);this._wrap(q._toArray(this[f].childNodes),null,this._NodeListCtor).wrapAll(h)}}return this},replaceWith:function(d){d=this._normalize(d,this[0]);for(var f=0,h;h=this[f];f++)this._place(d,h,"before",0<f),h.parentNode.removeChild(h);return this},replaceAll:function(d){d=F(d);for(var f=this._normalize(this,this[0]),h=0,n;n=d[h];h++)this._place(f,n,"before",0<h),n.parentNode.removeChild(n);return this},clone:function(){for(var d=[],
f=0;f<this.length;f++)d.push(this._cloneNode(this[f]));return this._wrap(d,this,this._NodeListCtor)}});c.prototype.html||(c.prototype.html=c.prototype.innerHTML);return c})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(F,q,a){q={_dfdCanceller:function(b){b.canceled=!0;var e=b._pendingDfd;if(!b.isFulfilled()&&e&&!e.isFulfilled()){e.cancel();var g=e.results&&e.results[1]}b._pendingDfd=null;return g},_fixDfd:function(b){var e=b.then;b.then=function(g,k,c){if(g){var d=
g;g=function(f){return f&&f._argsArray?d.apply(null,f):d(f)}}return e.call(this,g,k,c)};return b},_resDfd:function(b,e,g){var k=e.length;1===k?g?b.errback(e[0]):b.callback(e[0]):1<k?(e._argsArray=!0,b.callback(e)):b.callback()}};F.mixin(a,q);return q})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred","dojo/_base/url","../config","../urlUtils"],function(F,q,a,b){function e(k){k=new q(k);return k.scheme+"://"+k.authority}var g=a.defaults.io;return{registerNoCorsDomains:function(k){g.crossOriginNoCorsDomains||
(g.crossOriginNoCorsDomains={});for(var c=g.crossOriginNoCorsDomains,d=0;d<k.length;d++){var f=k[d];f=f.toLowerCase();/^https?:\/\//.test(f)?c[e(f)]=0:(c[e("http://"+f)]=0,c[e("https://"+f)]=0)}},isNoCorsRequestRequired:function(k){var c=g.crossOriginNoCorsDomains;return c?(k=e(k),k=k.toLowerCase(),!b.hasSameOrigin(k,window.location.origin)&&c[k]<Date.now()-36E5):!1},sendNoCorsRequest:function(k,c){var d=new F,f=g.crossOriginNoCorsDomains;f&&(f[e(k).toLowerCase()]=Date.now());f=b.urlToObject(k);k=
f.path;if(f.query&&"json"===f.query.f||c&&"json"===c.f)k+="?f\x3djson";fetch(k,{mode:"no-cors",credentials:"include"}).then(d.resolve,d.resolve);return d}}})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(F,q,a,b,e,g,k,c,d){F=F(null,{declaredClass:"esri.layers.TileInfo",constructor:function(f){q.mixin(this,f);this.width=this.cols;this.height=this.rows;this._levelToLOD=
{};f=this.spatialReference;var h=this.origin;f&&(f=this.spatialReference=new k(f.toJson?f.toJson():f));h&&(this.origin=new c(h.toJson?h.toJson():h),!h.spatialReference&&f&&this.origin.setSpatialReference(new k(f.toJson())));this.lods=a.map(this.lods,function(l){return new d(l)});a.forEach(this.lods,function(l){this._levelToLOD[l.level]=l},this);f=!1;h=this.spatialReference;var n=this.origin;if(h&&n){var p=h._getInfo();p&&(f=h._isWrappable()&&Math.abs(p.origin[0]-n.x)<=p.dx)}this.isWrappable=f;this._initializeUpsampleLevels()},
toJson:function(){return g.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(f){return f.toJson()})})},lodAt:function(f){return this._levelToLOD&&this._levelToLOD[f]||null},updateTileInfo:function(f){var h=this.lodAt(f.level),n=h.resolution*this.width;h=h.resolution*this.height;f.id=
f.level+"/"+f.row+"/"+f.col;f.extent||(f.extent=[0,0,0,0]);f.extent[0]=this.origin.x+f.col*n;f.extent[1]=this.origin.y-(f.row+1)*h;f.extent[2]=f.extent[0]+n;f.extent[3]=f.extent[1]+h},upsampleTile:function(f){var h=this._upsampleLevels[f.level];if(!h||-1===h.parentLevel)return!1;f.level=h.parentLevel;f.row=Math.floor(f.row/h.factor+.001);f.col=Math.floor(f.col/h.factor+.001);this.updateTileInfo(f);return!0},_initializeUpsampleLevels:function(){var f=this.lods;this._upsampleLevels=[];for(var h=null,
n=0;n<f.length;n++){var p=f[n];this._upsampleLevels[p.level]={parentLevel:h?h.level:-1,factor:h?h.resolution/p.resolution:0};h=p}}});q.setObject("layers.TileInfo",F,e);return F})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,q,a,b,e){F=F(null,{declaredClass:"esri.layers.LOD",constructor:function(g){q.mixin(this,g)},toJson:function(){return e.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});
q.setObject("layers.LOD",F,b);return F})},"esri/layers/unitBezier":function(){define([],function(){var F=function(a,b,e,g){function k(l,m){var r;m=null==m?1E-6:m;var t=l;for(r=0;8>r;r++){var x=((f*t+d)*t+c)*t-l;if(Math.abs(x)<m)return t;var v=(3*f*t+2*d)*t+c;if(1E-6>Math.abs(v))break;t-=x/v}v=0;r=1;t=l;if(t<v)return v;if(t>r)return r;for(;v<r;){x=((f*t+d)*t+c)*t;if(Math.abs(x-l)<m)break;l>x?v=t:r=t;t=.5*(r-v)+v}return t}var c=3*a,d=3*(e-a)-c,f=1-c-d,h=3*b,n=3*(g-b)-h,p=1-h-n;return function(l,m){var r=
k(l,m);return((p*r+n)*r+h)*r}},q=/^cubic-bezier\((.*)\)/;F.parse=function(a){var b=F[a]||null;!b&&(a=q.exec(a))&&(a=a[1].split(",").map(function(e){return parseFloat(e.trim())}),4!==a.length||a.some(function(e){return isNaN(e)})||(b=F.apply(F,a)));return b};F.ease=F(.25,.1,.25,1);F.linear=F(0,0,1,1);F.easeIn=F["ease-in"]=F(.42,0,1,1);F.easeOut=F["ease-out"]=F(0,0,.58,1);F.easeInOut=F["ease-in-out"]=F(.42,0,.58,1);return F})},"esri/layers/vectorTiles/request":function(){define(["require","exports",
"esri/request","dojo/_base/lang","dojo/Deferred"],function(F,q,a,b,e){return function(g,k){var c=b.mixin({},{url:g,failOk:!0},k);"array-buffer"===k.responseType?(c.handleAs="arraybuffer",delete c.responseType):k.responseType&&(c.handleAs=k.responseType,delete c.responseType);null!==k.query&&(c.content=c.query,delete c.query);if(k.hasOwnProperty("allowImageDataAccess")){var d={allowImageDataAccess:k.allowImageDataAccess};delete c.allowImageDataAccess}var f=new e(function(){h.isFulfilled()||h.cancel()});
var h=a(c,d).then(function(n){f.resolve({data:n})})["catch"](function(n){n&&null!=n.httpCode&&(n.details=n.details||{},n.details.httpStatus=n.httpCode);f.reject(n)});return f.promise}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(F,q,a,b,e,g){function k(c){if(c){if("function"!==typeof c.forEach){var d=Object.keys(c),f=d.map(function(l){return c[l]});return k(f).then(function(l){var m={};d.forEach(function(r,
t){return m[r]=l[t]});return m})}var h=new a,n=[],p=c.length;0===p&&h.resolve(n);c.forEach(function(l){var m={promise:l};n.push(m);l.then(function(r){m.value=r})["catch"](function(r){m.error=r}).then(function(){--p;0===p&&h.resolve(n)})});return h.promise}}Object.defineProperty(q,"__esModule",{value:!0});q.all=function(c){return e(c)};q.filter=function(c,d){var f=c.slice();return e(c.map(function(h,n){return d(h,n)})).then(function(h){return f.filter(function(n,p){return h[p]})})};q.eachAlways=k;
q.create=function(c,d){var f=new a(d);c(function(h){void 0===h&&(h=null);return b(h).then(f.resolve)},f.reject);return f.promise};q.reject=function(c){var d=new a;d.reject(c);return d.promise};q.resolve=function(c){void 0===c&&(c=null);var d=new a;d.resolve(c);return d.promise};q.after=function(c,d){void 0===d&&(d=null);var f=0,h=new a(function(){f&&(clearTimeout(f),f=0)});f=setTimeout(function(){h.resolve(d)},c);return h.promise};q.timeout=function(c,d,f){var h=0,n=new a(c.cancel);c.then(function(p){n.isFulfilled()||
(n.resolve(p),h&&(clearTimeout(h),h=0))});c["catch"](function(p){n.isFulfilled()||(n.reject(p),h&&(clearTimeout(h),h=0))});h=setTimeout(function(){var p=f||new g("promiseUtils:timeout","The wrapped promise did not resolve within "+d+" ms");n.reject(p)},d);return n.promise};q.wrapCallback=function(c){var d=!1,f=new a(function(){return d=!0});c(function(h){d||f.resolve(h)});return f.promise};q.isThenable=function(c){return c&&"function"===typeof c.then};q.when=function(c){return b(c)}})},"dojo/promise/all":function(){define(["../_base/array",
"../_base/lang","../Deferred","../when"],function(F,q,a,b){var e=F.some;return function(g){var k,c;q.isArray(g)?c=g:g&&"object"===typeof g&&(k=g);var d=[];if(k){c=[];for(var f in k)Object.hasOwnProperty.call(k,f)&&(d.push(f),c.push(k[f]));var h={}}else c&&(h=[]);if(!c||!c.length)return(new a).resolve(h);var n=new a;n.promise.always(function(){h=d=null});var p=c.length;e(c,function(l,m){k||d.push(m);b(l,function(r){n.isFulfilled()||(h[d[m]]=r,0===--p&&n.resolve(h))},n.reject);return n.isFulfilled()});
return n.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(F,q,a,b,e){F=function(g){function k(c,d,f){var h=g.call(this,c,d,f)||this;return h instanceof k?h:new k(c,d,f)}a(k,g);k.prototype.toJSON=function(){return{name:this.name,message:this.message,details:b.clone(this.details),dojoType:this.dojoType}};k.fromJSON=function(c){var d=new k(c.name,c.message,c.details);null!=c.dojoType&&(d.dojoType=c.dojoType);
return d};return k}(e);F.prototype.type="error";return F})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,a){q.__proto__=a}||function(q,a){for(var b in a)a.hasOwnProperty(b)&&(q[b]=a[b])};return function(q,a){function b(){this.constructor=q}F(q,a);q.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),
function(F,q,a,b,e,g){function k(l){return void 0!==l&&null!==l}function c(l){return k(l)?l:""}function d(l,m,r){var t=r.match(/([^\(]+)(\([^\)]+\))?/i),x=q.trim(t[1]);r=m[l];t=JSON.parse((t[2]?q.trim(t[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var v=t.utcOffset;if(-1===n.indexOf(x))x=q.getObject(x),q.isFunction(x)&&(r=x(r,l,m,t));else if("number"===typeof r||"string"===typeof r&&
r&&!isNaN(Number(r)))switch(r=Number(r),x){case "NumberFormat":l=q.mixin({},t);m=parseFloat(l.places);if(isNaN(m)||0>m)l.places=Infinity;return b.format(r,l);case "DateString":r=new Date(r);if(t.local||t.systemLocale)return t.systemLocale?r.toLocaleDateString()+(t.hideTime?"":" "+r.toLocaleTimeString()):r.toDateString()+(t.hideTime?"":" "+r.toTimeString());r=r.toUTCString();t.hideTime&&(r=r.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return r;case "DateFormat":return r=new Date(r),k(v)&&(r=a.add(r,
"minute",r.getTimezoneOffset()-v)),e.format(r,t)}return c(r)}function f(l,m){var r;if(m)for(r in l)l.hasOwnProperty(r)&&(void 0===l[r]?delete l[r]:l[r]instanceof Object&&f(l[r],!0));else for(r in l)l.hasOwnProperty(r)&&void 0===l[r]&&delete l[r];return l}function h(l){if(!l||"object"!=typeof l||q.isFunction(l))return l;if(l instanceof Int8Array||l instanceof Uint8Array||l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Int32Array||l instanceof Uint16Array||l instanceof Uint32Array||
l instanceof Float32Array||l instanceof Float64Array||l instanceof Date)return new l.constructor(l);if(l instanceof ArrayBuffer)return l.slice(0,l.byteLength);if("function"===typeof l.clone)l=l.clone();else if("function"===typeof l.map&&"function"===typeof l.forEach)l=l.map(h);else if("function"===typeof l.notifyChange&&"function"===typeof l.watch)l=l.clone();else{var m={},r,t={};for(r in l){var x=l[r];var v=!(r in t)||t[r]!==x;if(!(r in m)||m[r]!==x&&v)m[r]=h?h(x):x}l=m}return l}var n=["NumberFormat",
"DateString","DateFormat"],p=/<\/?[^>]+>/g;return{equals:function(l,m){return l===m||"number"===typeof l&&isNaN(l)&&"number"===typeof m&&isNaN(m)||q.isFunction((l||{}).getTime)&&q.isFunction((m||{}).getTime)&&l.getTime()==m.getTime()||q.isFunction((l||{}).equals)&&l.equals(m)||q.isFunction((m||{}).equals)&&m.equals(l)||!1},mixin:q.mixin,valueOf:function(l,m){for(var r in l)if(l[r]==m)return r;return null},stripTags:function(l){if(l){var m=typeof l;if("string"===m)l=l.replace(p,"");else if("object"===
m)for(var r in l)(m=l[r])&&"string"===typeof m&&(m=m.replace(p,"")),l[r]=m}return l},substitute:function(l,m,r){if(k(r))if(q.isObject(r)){var t=r.first;var x=r.dateFormat;var v=r.numberFormat}else t=r;if(m&&"{*}"!==m)return q.replace(m,q.hitch({obj:l},function(A,B){var u=B.split(":");return 1<u.length?(B=u[0],u.shift(),d(B,this.obj,u.join(":"))):x&&-1!==(x.properties||[]).indexOf(B)?d(B,this.obj,x.formatter||"DateString"):v&&-1!==(v.properties||[]).indexOf(B)?d(B,this.obj,v.formatter||"NumberFormat"):
c(this.obj[B])}));m=[];var z;m.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+g.fieldsSummary+'"\x3e\x3ctbody\x3e');for(z in l)if(r=l[z],x&&-1!==(x.properties||[]).indexOf(z)?r=d(z,l,x.formatter||"DateString"):v&&-1!==(v.properties||[]).indexOf(z)&&(r=d(z,l,v.formatter||"NumberFormat")),m.push("\x3ctr\x3e\x3cth\x3e"+z+"\x3c/th\x3e\x3ctd\x3e"+c(r)+"\x3c/td\x3e\x3c/tr\x3e"),t)break;m.push("\x3c/tbody\x3e\x3c/table\x3e");return m.join("")},filter:function(l,m,r){m=[q.isString(l)?l.split(""):
l,r||F.global,q.isString(m)?new Function("item","index","array",m):m];r={};var t;l=m[0];for(t in l)m[2].call(m[t],l[t],t,l)&&(r[t]=l[t]);return r},startsWith:function(l,m,r){r=r||0;return l.indexOf(m,r)===r},endsWith:function(l,m,r){if("number"!==typeof r||!isFinite(r)||Math.floor(r)!==r||r>l.length)r=l.length;r-=m.length;l=l.indexOf(m,r);return-1!==l&&l===r},isDefined:k,fixJson:f,clone:h}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(F,q,
a){return function(){function b(e,g,k){this instanceof b&&(this.name=e,this.message=g&&a.substitute(g,k,function(c){return null==c?"":c})||"",this.details=k)}b.prototype.toString=function(){return"["+this.name+"]: "+this.message};return b}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(F,q,a,b){function e(z){return a.normalize(z)}function g(z){return"data:"===z.slice(0,5)}function k(z){return c(z)||x.test(z)}function c(z){return z&&
"/"===z[0]&&"/"===z[1]}function d(z){return a.urlToObject(z)}function f(z){if("string"===typeof z)return new b(n(z));z.scheme||(z.scheme=q.appUrl.scheme);return z}function h(z){if(g(z))return null;var A=z.indexOf("://");if(-1===A&&c(z))A=2;else if(-1!==A)A+=3;else return null;A=z.indexOf("/",A);return-1===A?z:z.slice(0,A)}function n(z,A,B){void 0===A&&(A=q.appBaseUrl);if(c(z))return B&&B.preserveProtocolRelative?z:"http"===q.appUrl.scheme&&q.appUrl.authority===h(z).slice(2)?"http:"+z:"https:"+z;if(x.test(z))return z;
"/"===z[0]&&(B=A.indexOf("//"),B=A.indexOf("/",B+2),A=-1===B?A:A.slice(0,B));return l(A,z)}function p(z,A,B){void 0===B&&(B=!1);z=f(z);A=f(A);return B||z.scheme===A.scheme?z.host.toLowerCase()===A.host.toLowerCase()&&z.port===A.port:!1}function l(){for(var z=[],A=0;A<arguments.length;A++)z[A]=arguments[A];if(z&&z.length){A=[];if(k(z[0])){var B=z[0],u=B.indexOf("//");A.push(B.slice(0,u+1));t.test(z[0])&&(A[0]+="/");z[0]=B.slice(u+2)}else"/"===z[0][0]&&A.push("");z=z.reduce(function(w,D){return D?w.concat(D.split("/")):
w},[]);for(B=0;B<z.length;B++)u=z[B],".."===u&&0<A.length?A.pop():!u||"."===u&&0!==A.length||A.push(u);return A.join("/")}}function m(z,A,B){if(!(A&&B&&z&&k(z)))return z;var u=z.indexOf("//"),w=z.indexOf("/",u+2),D=z.indexOf(":",u+2);w=Math.min(0>w?z.length:w,0>D?z.length:D);if(z.slice(u+2,w).toLowerCase()!==A.toLowerCase())return z;A=z.slice(0,u+2);z=z.slice(w);return""+A+B+z}function r(z,A,B){void 0===A&&(A=q.appBaseUrl);if(!k(z))return z;var u=e(z),w=u.toLowerCase();A=e(A).toLowerCase().replace(/\/+$/,
"");if((B=B?e(B).toLowerCase().replace(/\/+$/,""):null)&&0!==A.indexOf(B))return z;for(var D=function(G,I,O){O=G.indexOf(I,O);return-1===O?G.length:O},y=D(w,"/",w.indexOf("//")+2),C=-1;w.slice(0,y+1)===A.slice(0,y)+"/";){C=y+1;if(y===w.length)break;y=D(w,"/",y+1)}if(-1===C||B&&C<B.length)return z;z=u.slice(C);u=A.slice(C-1).replace(/[^/]+/g,"").length;if(0<u)for(w=0;w<u;w++)z="../"+z;else z="./"+z;return z}Object.defineProperty(q,"__esModule",{value:!0});q.normalize=e;q.canUseXhr=function(z){return a.canUseXhr(z)};
q.removeTrailingSlash=function(z){return z.replace(/\/+$/,"")};F=Function("return this")();q.appUrl=new b(F.location);q.appBaseUrl=function(){var z=q.appUrl.path;z=z.substring(0,z.lastIndexOf(z.split("/")[z.split("/").length-1]));return q.appUrl.scheme+"://"+q.appUrl.host+(null!=q.appUrl.port?":"+q.appUrl.port:"")+z}();var t=/^\s*file:/i,x=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;q.isDataProtocol=g;q.isAbsolute=k;q.isProtocolRelative=c;q.urlToObject=d;q.getOrigin=h;q.makeAbsolute=n;q.hasSameOrigin=p;q.join=
l;q.removeFile=function(z){var A=0;if(k(z)){var B=z.indexOf("//");-1!==B&&(A=B+2)}B=z.lastIndexOf("/");return B<A?z:z.slice(0,B+1)};q.addProxy=function(z){return a.addProxy(z)};q.makeData=function(z){return z.isBase64?"data:"+z.mediaType+";base64,"+z.data:"data:"+z.mediaType+","+z.data};var v=/^data:(.*?)(;base64)?,(.*)$/;q.dataComponents=function(z){return(z=z.match(v))?{mediaType:z[1],isBase64:!!z[2],data:z[3]}:null};q.changeDomain=m;q.read=function(z,A){var B=A&&A.url&&A.url.path;z&&B&&(z=n(z,
B,{preserveProtocolRelative:!0}));B=z;var u=A&&A.portal;if(u&&!u.isPortal&&u.urlKey&&u.customBaseUrl){var w=u.urlKey+"."+u.customBaseUrl;B=p(q.appUrl,q.appUrl.scheme+"://"+w)?m(B,u.portalHostname,w):m(B,w,u.portalHostname)}return B};q.write=function(z,A){if(!z)return z;!k(z)&&A&&A.blockedRelativeUrls&&A.blockedRelativeUrls.push(z);var B=n(z);if(A){var u=A.verifyItemRelativeUrls&&A.verifyItemRelativeUrls.rootPath||A.url&&A.url.path;u&&(B=r(B,u,u),B!==z&&A.verifyItemRelativeUrls&&A.verifyItemRelativeUrls.writtenUrls.push(B))}B=
(u=A&&A.portal)&&!u.isPortal&&u.urlKey&&u.customBaseUrl?m(B,u.urlKey+"."+u.customBaseUrl,u.portalHostname):B;return B};q.makeRelative=r;q.removeQueryParameters=function(z){z=d(z);Object.keys(z.query||{});return z.path}})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(F,q,a){function b(d){return d.wkid&&!0===e[d.wkid]}Object.defineProperty(q,"__esModule",{value:!0});var e={102113:!0,102100:!0,3857:!0,3785:!0},
g={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};F=[-2.0037508342788905E7,2.0037508342788905E7];var k=[-2.0037508342787E7,2.0037508342787E7],c={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:F,origin:k,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:F,origin:k,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:F,origin:k,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:F,origin:k,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};q.equals=function(d,f){if(f){if(d===f)return!0;if(null!=d.wkid||null!=f.wkid)return d.wkid===f.wkid||b(d)&&b(f)||null!=f.latestWkid&&d.wkid===f.latestWkid||null!=d.latestWkid&&f.wkid===d.latestWkid;if(d.wkt&&f.wkt)return d.wkt.toUpperCase()===f.wkt.toUpperCase()}return!1};q.getInfo=function(d){return d.wkid?c[d.wkid]:null};q.isGeographic=function(d){return d.wkid?null==a[d.wkid]:d.wkt?!!/^\s*GEOGCS/i.test(d.wkt):!1};q.isWGS84=function(d){return 4326===
d.wkid};q.isWebMercator=b;q.isWrappable=function(d){return d.wkid&&!0===g[d.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(F){return F})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(F,q,a,b,e,g,k){function c(n){n&&(n=k.getOrigin(n),k.canUseXhr(n)||
-1!==h.indexOf(n)||h.push(n))}function d(){for(var n=[],p=0;p<arguments.length;p++)n[p]=arguments[p];p=void 0;for(var l=0;l<n.length;++l)k.isProtocolRelative(n[l])?p&&(p=p.split("://")[0]+":"+n[l].trim()):p=k.isAbsolute(n[l])?n[l]:k.join(p,n[l]);return p}function f(n,p,l){var m;if("string"===typeof p){p=k.normalize(p);c(p);var r=k.urlToObject(p);r=e(r.path,{query:{f:"json"},responseType:"json"});var t=m=p}else r=g.resolve({data:p}),m=p.jsonUrl||null,t=l;return r.then(function(x){var v=x.data;x.ssl&&
(m&&(m=m.replace(/^http:/i,"https:")),t&&(t=t.replace(/^http:/i,"https:")));if(v.sources){n.styleUrl=m||null;x=t?k.removeFile(t):k.appBaseUrl;n.styleBase=x;n.style=v;n.styleUrl&&c(n.styleUrl);if(n.source)v=g.resolve();else{b:if(v=v.sources,v.esri)v=v.esri;else{for(var z=0,A=Object.keys(v);z<A.length;z++){var B=A[z];if("vector"===v[B].type){v=v[B];break b}}v=null}v=v.url?f(n,d(x,v.url)):f(n,v,x)}return v}if(v.sources)return g.reject("You must specify the URL or the JSON for a service or for a style.");
n.sourceUrl=m||null;x=t?k.removeTrailingSlash(t)+"/":k.appBaseUrl;n.sourceBase=x;n.source=v;if(v.hasOwnProperty("tileInfo"))z=v;else{z={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}};B=(z.xmax-z.xmin)/512;A=[];for(var u=v.hasOwnProperty("minzoom")?parseFloat(v.minzoom):0,w=v.hasOwnProperty("maxzoom")?parseFloat(v.maxzoom):16;u<w;u++){var D=B/Math.pow(2,u);A.push({level:u,scale:Math.floor(3779.527559055118*D),
resolution:D})}B=0;for(w=v.tiles;B<w.length;B++)c(d(x,w[B]));z={capabilities:"TilesOnly",initialExtent:z,fullExtent:z,minScale:A[0].scale,maxScale:A[A.length-1].scale,tiles:v.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:A,spatialReference:{wkid:102100}}}}n.validatedSource=z;n.sourceUrl&&c(n.sourceUrl);v=n.style?g.resolve():null==v.defaultStyles?g.reject():"string"===typeof v.defaultStyles?f(n,d(x,v.defaultStyles,"root.json")):f(n,v.defaultStyles,
d(x,"root.json"));return v})}Object.defineProperty(q,"__esModule",{value:!0});var h=b.defaults&&b.defaults.io.corsEnabledServers||b.request.corsEnabledServers;q.loadMetadata=function(n){var p={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null},l="string"===typeof n?[n,null]:[null,n.jsonUrl],m=l[0];l=l[1];var r=m?k.urlToObject(m):null;return f(p,n,l).then(function(){var t={layerDefinition:p.validatedSource,url:m,parsedUrl:r,serviceUrl:p.sourceUrl,
style:p.style,styleUrl:p.styleUrl,spriteUrl:p.style.sprite&&d(p.styleBase,p.style.sprite),glyphsUrl:p.style.glyphs&&d(p.styleBase,p.style.glyphs)};c(t.spriteUrl);c(t.glyphsUrl);return t})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(F){for(var q,a=1,b=arguments.length;a<b;a++){q=arguments[a];for(var e in q)Object.prototype.hasOwnProperty.call(q,e)&&(F[e]=q[e])}return F}})},"esri/layers/vectorTiles/config":function(){define(["require",
"exports","esri/config"],function(F,q,a){Object.defineProperty(a,"workers",{get:function(){return a.defaults.workers},set:function(b){return a.defaults.workers=b}});return a})},"esri/layers/vectorTiles/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r){var t=h.getLogger("esri.layers.support.TilemapCache");return function(x){function v(z){z=x.call(this)||this;z._handles=new f;z._pendingTilemapRequests={};z._availableLevels={};z.levels=5;z.cacheByteSize=2097152;z.request=k;return z}b(v,x);v.prototype.initialize=function(){var z=this;this._tilemapCache=new n(this.cacheByteSize,{sizeOfFunction:function(A){return A.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return z._initializeTilemapDefinition()}),
l.init(this,"layer.tileInfo.lods",function(A){return z._initializeAvailableLevels(A)},!0)]);this._initializeTilemapDefinition()};v.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};v.prototype.castLevels=function(z){return 2>=z?(t.error("Minimum levels for Tilemap is 3, but got ",z),3):z};Object.defineProperty(v.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});v.prototype.getTilemap=function(z,A,B){return this._tilemapFromCache(z,
A,B,this._tmpTilemapDefinition)};v.prototype.fetchTilemap=function(z,A,B,u){var w=this;if(!this._availableLevels[z])return p.reject(new d("tilemap-cache:level-unavailable","Level "+z+" is unavailable in the service"));var D=this._tmpTilemapDefinition;if(z=this._tilemapFromCache(z,A,B,D))return p.resolve(z);var y=r.tilemapDefinitionId(D),C=this._pendingTilemapRequests[y];C||(C=r.Tilemap.fromDefinition(D,u).then(function(G){w._tilemapCache.set(y,G);delete w._pendingTilemapRequests[y];return G})["catch"](function(G){delete w._pendingTilemapRequests[y];
return p.reject(G)}),this._pendingTilemapRequests[y]=C);return p.create(function(G,I){C.then(G,I)})};v.prototype.getAvailability=function(z,A,B){return this._availableLevels[z]?(z=this.getTilemap(z,A,B))?z.getAvailability(A,B):"unknown":"unavailable"};v.prototype.getAvailabilityUpsample=function(z,A,B,u){u.level=z;u.row=A;u.col=B;z=this.layer.tileInfo;for(z.updateTileInfo(u);;)if(A=this.getAvailability(u.level,u.row,u.col),"unavailable"===A){if(!z.upsampleTile(u))return"unavailable"}else return A};
v.prototype.fetchAvailability=function(z,A,B,u){return this._availableLevels[z]?this.fetchTilemap(z,A,B,u).always(function(w){return w instanceof r.Tilemap?(w=w.getAvailability(A,B),"unavailable"===w?p.reject(new d("tile-map:tile-unavailable","Tile is not available",{level:z,row:A,col:B})):w):w&&"cancel"===w.dojoType?p.reject(w):"unknown"}):p.reject(new d("tilemap-cache:level-unavailable","Level "+z+" is unavailable in the service"))};v.prototype.fetchAvailabilityUpsample=function(z,A,B,u,w){var D=
this;u.level=z;u.row=A;u.col=B;var y=this.layer.tileInfo;y.updateTileInfo(u);return this.fetchAvailability(z,A,B,w)["catch"](function(C){return C&&"cancel"===C.dojoType?p.reject(C):y.upsampleTile(u)?D.fetchAvailabilityUpsample(u.level,u.row,u.col,u):p.reject(C)})};v.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var z=this.layer.parsedUrl,A=z.query;A&&A.token||!this.layer.token||(A=a({},A,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition=
{service:{url:z.path,query:A?g.objectToQuery(A):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};v.prototype._tilemapFromCache=function(z,A,B,u){z=this._getTilemapDefinition(z,A,B,u);z=r.tilemapDefinitionId(z);return this._tilemapCache.get(z)};v.prototype._getTilemapDefinition=function(z,A,B,u){u.level=z;u.row=A-A%this.size;u.col=B-B%this.size;return u};v.prototype._initializeAvailableLevels=function(z){var A=
this;this._availableLevels={};z&&z.forEach(function(B){return A._availableLevels[B.level]=!0})};e([m.property({constructOnly:!0,type:Number})],v.prototype,"levels",void 0);e([m.cast("levels")],v.prototype,"castLevels",null);e([m.property({readOnly:!0,dependsOn:["levels"],type:Number})],v.prototype,"size",null);e([m.property({constructOnly:!0,type:Number})],v.prototype,"cacheByteSize",void 0);e([m.property({constructOnly:!0})],v.prototype,"layer",void 0);e([m.property({constructOnly:!0})],v.prototype,
"request",void 0);return v=e([m.subclass("esri.layers.support.TilemapCache")],v)}(m.declared(c))})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(F,q){return function(a,b){a.__bases__=b.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(F,q,a,b){var e=arguments.length,g=3>e?q:null===b?b=Object.getOwnPropertyDescriptor(q,a):b,k;if("object"===typeof Reflect&&"function"===
typeof Reflect.decorate)g=Reflect.decorate(F,q,a,b);else for(var c=F.length-1;0<=c;c--)if(k=F[c])g=(3>e?k(g):3<e?k(q,a,g):k(q,a))||g;return 3<e&&g&&Object.defineProperty(q,a,g),g}})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(F,q,a,b,e,g){q=q["default"];F.before(function(c,d){F.hasMixin(c,k)&&b.processPrototype(d)});F.after(function(c){F.hasMixin(c,
k)&&(b.processClass(c),Object.defineProperties(c.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var k=F(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===k)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new q(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var c=[],d=0;d<arguments.length;d++)c.push(arguments[d]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,c)}},__accessor__:null,postscript:function(c){var d=this.__accessor__;c=d.ctorArgs||c;if(null!=this.getDefaults){var f=this.getDefaults(c||{});this.set(f)}d.initialize();c&&(this.set(c),d.ctorArgs=null);d.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(c){}else g.removeTarget(this),this.__accessor__.destroy()},get:function(c){return a.get(this,c)},hasOwnProperty:function(c){return this.__accessor__?this.__accessor__.has(c):Object.prototype.hasOwnProperty.call(this,c)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(c,d){e.set(this,c,d);return this},watch:function(c,d,f){return g.watch(this,c,d,f)},_clearOverride:function(c){return this.__accessor__.clearOverride(c)},_override:function(c,d){return this.__accessor__.override(c,
d)},_isOverridden:function(c){return this.__accessor__.isOverridden(c)},notifyChange:function(c){this.__accessor__.propertyInvalidated(c)},_get:function(c){return this.__accessor__.internalGet(c)},_set:function(c,d){return this.__accessor__.internalSet(c,d)}});return k})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(F,q,a){function b(c,d){c&&!Array.isArray(c)&&"function"!==typeof c&&(d=c,c=null);c=c||[];d=d||{};return e([this].concat(c),
d)}function e(c,d){c&&!Array.isArray(c)&&"function"!==typeof c&&(d=c,c=null);"function"===typeof c?c=[c]:c||(c=[]);d=d||{};var f;var h=0;for(f=g.length;h<f;h++)g[h](c,d);var n=a(c,d);n.createSubclass=b;h=0;for(f=k.length;h<f;h++)k[h](n);return n}var g=[],k=[];(function(c){c.hasMixin=function(d,f){var h=Array.isArray(d)?d.reduce(function(p,l){return l._meta?p.concat(l._meta.bases):p},[]):d._meta?d._meta.bases:d;if(!h)return!1;if("string"===typeof f)for(var n=h.length-1;0<=n;n--)if(h[n].prototype.declaredClass===
f)return!0;return-1!==h.indexOf(f)};c.safeMixin=function(d,f){return a.safeMixin(d,f)};c.before=function(d){g.push(d)};c.after=function(d){k.push(d)}})(e||(e={}));return e})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(F,q,a,b,e,g,k){Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.Properties");F=function(){function c(d){this.host=d;
this._origin=g.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new k["default"];d=this.host.constructor.__accessorMetadata__;this.metadatas=d.properties;this.autoDestroy=d.autoDestroy}c.prototype.initialize=function(){this.lifecycle=1;e.instanceCreated(this.host,this.metadatas)};c.prototype.constructed=function(){this.lifecycle=2};c.prototype.destroy=function(){this.destroyed=!0;var d=this.cursors;if(this.cursors)for(var f=
0,h=Object.getOwnPropertyNames(d);f<h.length;f++){var n=h[f],p=d[n];if(p){for(;0<p.length;)p.pop().propertyDestroyed(this,n);d[n]=null}}if(this.autoDestroy)for(n in this.metadatas)(d=this.internalGet(n))&&d&&"function"===typeof d.destroy&&(d.destroy(),this.metadatas[n].nonNullable||this.internalSet(n,null))};Object.defineProperty(c.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});c.prototype.clearOverride=function(d){this.isOverridden(d)&&(this.overridden[d]=
!1,this.propertyInvalidated(d))};c.prototype.get=function(d){var f=this.metadatas[d];if(this.store.has(d)&&!this.dirties[d])return this.store.get(d);var h=f.get;return h?(f=h.call(this.host),this.store.set(d,f,g.OriginId.COMPUTED),this.propertyCommitted(d),f):f.value};c.prototype.originOf=function(d){var f=this.store.originOf(d);return void 0===f&&(d=this.metadatas[d])&&d.hasOwnProperty("value")?"defaults":g.idToName(f)};c.prototype.has=function(d){return this.metadatas[d]?this.store.has(d):!1};c.prototype.internalGet=
function(d){if(this.metadatas[d]){var f=this.store;return f.has(d)?f.get(d):this.metadatas[d].value}};c.prototype.internalSet=function(d,f){this.metadatas[d]&&(this.propertyInvalidated(d),this.initialized?this.store.set(d,f,this._origin):this.store.set(d,f,g.OriginId.DEFAULTS),this.propertyCommitted(d))};c.prototype.isOverridden=function(d){return null!=this.overridden&&!0===this.overridden[d]};c.prototype.keys=function(){return this.store.keys()};c.prototype.override=function(d,f){if(this.metadatas[d]){this.overridden||
(this.overridden={});var h=this.metadatas[d];h.nonNullable&&null==f||((h=h.cast)&&(f=h.call(this.host,f)),this.overridden[d]=!0,this.internalSet(d,f))}};c.prototype.set=function(d,f){if(this.metadatas[d]){var h=this.metadatas[d];if(!h.nonNullable||null!=f){var n=h.set;(h=h.cast)&&(f=h.call(this.host,f));n?n.call(this.host,f):this.internalSet(d,f)}}};c.prototype.setDefaultOrigin=function(d){this._origin=g.nameToId(d)};c.prototype.propertyInvalidated=function(d){var f=this.dirties,h=this.isOverridden(d),
n=this.cursors&&this.cursors[d],p=this.metadatas[d].computes;if(n)for(var l=0;l<n.length;l++)n[l].propertyInvalidated(this,d);h||(f[d]=!0);if(p)for(d=0;d<p.length;d++)this.propertyInvalidated(p[d])};c.prototype.propertyCommitted=function(d){var f=this.cursors&&this.cursors[d];this.dirties[d]=!1;if(f)for(var h=0;h<f.length;h++)f[h].propertyCommitted(this,d)};c.prototype.addCursor=function(d,f){this.cursors||(this.cursors={});var h=this.cursors[d];h||(this.cursors[d]=h=[]);h.push(f)};c.prototype.removeCursor=
function(d,f){var h=this.cursors[d];this.cursors[d]&&(h.splice(h.indexOf(f),1),0===h.length&&(this.cursors[d]=null))};return c}();q["default"]=F})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(F,q,a){var b={info:0,warn:1,error:2};F=function(){function e(g){void 0===g&&(g={});this.module=g.module||"";this.writer=g.writer||null;this.level=g.level||null;null!=g.enabled&&(this.enabled=!!g.enabled);e._loggers[this.module]=this;g=this.module.lastIndexOf(".");
-1!==g&&(this.parent=e.getLogger(this.module.slice(0,g)))}e.prototype.log=function(g){for(var k=[],c=1;c<arguments.length;c++)k[c-1]=arguments[c];this._isEnabled()&&this._matchLevel(g)&&(c=this._inheritedWriter())&&c.apply(void 0,[g,this.module].concat(k))};e.prototype.error=function(){for(var g=[],k=0;k<arguments.length;k++)g[k]=arguments[k];this.log.apply(this,["error"].concat(g))};e.prototype.warn=function(){for(var g=[],k=0;k<arguments.length;k++)g[k]=arguments[k];this.log.apply(this,["warn"].concat(g))};
e.prototype.info=function(){for(var g=[],k=0;k<arguments.length;k++)g[k]=arguments[k];this.log.apply(this,["info"].concat(g))};e.prototype.getLogger=function(g){return e.getLogger(this.module+"."+g)};e.getLogger=function(g){var k=e._loggers[g];k||(k=new e({module:g}));return k};e.prototype._parentWithMember=function(g,k){for(var c=this;c&&null==c[g];)c=c.parent;return c?c[g]:k};e.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};e.prototype._consoleWriter=
function(g,k){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];console[g].apply(console,["["+k+"]"].concat(c))};e.prototype._matchLevel=function(g){return b[this._parentWithMember("level","error")]<=b[g]};e.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};e._loggers={};return e}();F.getLogger("esri").level="warn";return F})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty",
"./extensions/serializableProperty"],function(F,q,a,b,e){Object.defineProperty(q,"__esModule",{value:!0});var g=[a["default"],b["default"],e["default"]];q.processPrototypeMetadatas=function(k,c){for(var d=Object.getOwnPropertyNames(k),f=0;f<g.length;f++){var h=g[f];if(h.processPrototypePropertyMetadata)for(var n=0,p=d;n<p.length;n++){var l=p[n];h.processPrototypePropertyMetadata(l,k[l],k,c)}}};q.processClassMetadatas=function(k,c){for(var d=Object.getOwnPropertyNames(k),f=0;f<g.length;f++){var h=
g[f];if(h.processClassPropertyMetadata)for(var n=0,p=d;n<p.length;n++){var l=p[n];h.processClassPropertyMetadata(l,k[l],k,c)}}};q.instanceCreated=function(k,c){for(var d=Object.getOwnPropertyNames(c),f=0;f<g.length;f++){var h=g[f];h.instanceCreated&&h.instanceCreated(k,c,d)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(F,q,a,b,e,g,k){function c(d,f,h){var n=g.getProperties(d);
return k.wire(d,h.aliasOf,function(){n.propertyInvalidated(f)})}Object.defineProperty(q,"__esModule",{value:!0});q.AliasedPropertyExtension={processClassPropertyMetadata:function(d,f,h,n){var p=f.aliasOf;if(p&&(d=p.split(".")[0],null!=h[d]&&!f.set&&!f.get)){var l;f.get=function(){var m=b["default"](this,p);if("function"===typeof m){l||(l=p.split(".").slice(0,-1).join("."));var r=b["default"](this,l);r&&(m=m.bind(r))}return m};f.readOnly||(f.set=function(m){return e["default"](this,p,m)})}},instanceCreated:function(d,
f,h){for(var n=0;n<h.length;n++){var p=h[n],l=f[p];l.aliasOf&&c(d,p,l)}}};q["default"]=q.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(F,q,a){function b(c,d,f){if(null!=f.getItemAt||Array.isArray(f)){var h=parseInt(c,10);if(!isNaN(h))return Array.isArray(f)?f[h]:f.getItemAt(h)}h=a.getProperties(f);return d?a.isPropertyDeclared(h,c)?h.get(c):f[c]:a.isPropertyDeclared(h,c)?h.internalGet(c):f[c]}function e(c,
d,f,h){if(null==c)return c;if((c=b(d[h],f,c))||!(h<d.length-1))return h===d.length-1?c:e(c,d,f,h+1)}function g(c,d,f,h){void 0===f&&(f=!1);void 0===h&&(h=0);return"string"===typeof d&&-1===d.indexOf(".")?b(d,f,c):e(c,a.pathToArray(d),f,h)}function k(c,d){return g(c,d,!0)}Object.defineProperty(q,"__esModule",{value:!0});q.valueOf=g;q.get=k;q.exists=function(c,d){return void 0!==g(d,c,!0)};q["default"]=k})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports",
"../lang"],function(F,q,a){function b(c,d){return d?Object.keys(d).reduce(function(f,h){if("value"===h)return f[h]=d[h],f;if(void 0===f[h])return f[h]=a.clone(d[h]),f;var n=f[h],p=d[h];if(n===p)return f;if(Array.isArray(p)||Array.isArray(f))n=n?Array.isArray(n)?f[h]=n.concat():f[h]=[n]:f[h]=[],p&&(Array.isArray(p)||(p=[p]),p.forEach(function(l){-1===n.indexOf(l)&&n.push(l)}));else if(p&&"object"===typeof p)f[h]=b(n,p);else if(!f.hasOwnProperty(h)||d.hasOwnProperty(h))f[h]=p;return f},c||{}):c}function e(c){return Array.isArray(c)?
c:c.split(".")}function g(c){if(Array.isArray(c)||-1<c.indexOf(",")){c=Array.isArray(c)?c:c.split(",");for(var d=0;d<c.length;d++)c[d]=c[d].trim();return 1===c.length?c[0]:c}return c.trim()}function k(c){var d=!1;return function(){d||(d=!0,c())}}Object.defineProperty(q,"__esModule",{value:!0});q.getProperties=function(c){return c?c.__accessor__?c.__accessor__:c.propertyInvalidated?c:null:null};q.isPropertyDeclared=function(c,d){return c&&c.metadatas&&null!=c.metadatas[d]};q.merge=b;q.pathToStringOrArray=
function(c){return c?"string"===typeof c&&-1===c.indexOf(".")?c:e(c):c};q.pathToArray=e;q.splitPath=g;q.parse=function(c,d,f,h){d=g(d);if(Array.isArray(d)){var n=d.map(function(p){return h(c,p.trim(),f)});return{remove:k(function(){return n.forEach(function(p){return p.remove()})})}}return h(c,d.trim(),f)};q.once=k})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(F,q,a,b,e){function g(k,c,d){if(k&&c)if("object"===
typeof c){d=0;for(var f=Object.getOwnPropertyNames(c);d<f.length;d++){var h=f[d];g(k,h,c[h])}}else"_"!==c[0]&&(-1!==c.indexOf(".")?(c=c.split("."),h=c.splice(c.length-1,1)[0],g(e["default"](k,c),h,d)):k[c]=d)}Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.set");q.set=g;q["default"]=g})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(F,q,a){function b(f,h,n){h=a.splitPath(h);if(Array.isArray(h)){for(var p=
[],l=0;l<h.length;l++)p.push((new e(h[l],n)).install(f));return new c(p)}f=(new e(h,n)).install(f);return new d(f)}Object.defineProperty(q,"__esModule",{value:!0});var e=function(){function f(h,n){this.path=h;this.callback=n;this.chain=null;this.path=h;-1<h.indexOf(".")&&(this.chain=a.pathToArray(h));this.callback=n;return this}f.prototype.install=function(h){h=this.chain?new k(this,h):new g(this,h);return h};f.prototype.notify=function(h){this.callback(h,this.path)};return f}(),g=function(){function f(h,
n){this.binding=h;this.target=n;a.getProperties(n).addCursor(this.binding.path,this)}f.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};f.prototype.propertyDestroyed=function(h,n){a.getProperties(this.target).removeCursor(n,this)};f.prototype.propertyInvalidated=function(h,n){this.binding&&this.binding.notify(this.target)};f.prototype.propertyCommitted=function(h,n){this.binding&&this.binding.notify(this.target)};
return f}(),k=function(){function f(h,n){this.binding=h;this.target=n;this.stack=[];this.properties=a.getProperties(n);this.stack.push({properties:this.properties,propertyName:h.chain[0]});this.properties.addCursor(h.chain[0],this);this.moveForward();return this}f.prototype.destroy=function(){for(;;){var h=this.stack.pop();if(null==h)break;h.properties.removeCursor(h.propertyName,this)}this.target=this.binding=null};f.prototype.propertyDestroyed=function(h,n){this.moveBackward(h,n)};f.prototype.propertyInvalidated=
function(h,n){this.binding&&this.binding.notify(this.target)};f.prototype.propertyCommitted=function(h,n){this.binding&&(this.moveBackward(h,n),this.moveForward(),this.binding.notify(this.target))};f.prototype.moveBackward=function(h,n){for(var p=this.stack,l=p[p.length-1];l.properties!==h&&l.propertyName!==n;)l.properties.removeCursor(l.propertyName,this),p.pop(),l=p[p.length-1]};f.prototype.moveForward=function(){var h=this.stack,n=h[h.length-1];n=n.properties.internalGet(n.propertyName);(n=a.getProperties(n))&&
h.length<this.binding.chain.length&&(h=this.binding.chain[h.length],this.stack.push({properties:n,propertyName:h}),n.addCursor(h,this),this.moveForward())};return f}(),c=function(){function f(h){this.cursors=h}f.prototype.remove=function(){for(var h=this.cursors;0<h.length;)h.pop().destroy();this.cursors=null};return f}(),d=function(){function f(h){this.cursor=h}f.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return f}();q.create=function(f,h){var n=a.splitPath(f);if(Array.isArray(n)){for(var p=
[],l=0;l<n.length;l++)p.push(new e(n[l],h));return function(r){for(var t=[],x=0;x<p.length;x++)t[x]=p[x].install(r);return new c(t)}}var m=new e(n,h);return function(r){return new d(m.install(r))}};q.wire=b;q["default"]=b})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(F,q,a,b,e,g){Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.extensions.computedProperty");
q.ComputedPropertyExtension={processClassPropertyMetadata:function(k,c,d,f){c.dependsOn&&(d=void 0,d=c.dependsOn.slice())&&(c.wire=g.create(d,function(h){return e.getProperties(h).propertyInvalidated(k)}))},instanceCreated:function(k,c,d){for(var f=0;f<d.length;f++){var h=c[d[f]];h.wire&&h.wire(k)}}};q["default"]=q.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(F,q,a,b,e,g){function k(c,d,f){var h=c&&c.json;c&&c.json&&c.json.origins&&f&&(c=c.json.origins[f.origin])&&d in c&&(h=c);return h}Object.defineProperty(q,"__esModule",{value:!0});q.originSpecificReadPropertyDefinition=function(c,d){return k(c,"read",d)};q.originSpecificWritePropertyDefinition=function(c,d){return k(c,"write",d)};q.SerializablePropertyExtension={processPrototypePropertyMetadata:function(c,d,f,h){if(e.process(d)){a.process(d);f=d.type;for(h=0;Array.isArray(f);)f=f[0],h++;if(d.json.origins)for(var n in d.json.origins){var p=
d.json.origins[n];b.create(f,h,c,p);g.create(f,h,c,p)}b.create(f,h,c,d.json);g.create(f,h,c,d.json)}}};q["default"]=q.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,e={"web-document":["web-scene","web-map"]};a=function(k){if(b[k]){var c=b[k];e[k].forEach(function(d){b[d]=
c});delete b[k]}};for(var g in e)a(g)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(F,q,a,b){function e(n,p,l,m){if(1<p)return c(n,p);if(1===p)return d(n);if(f(n)){var r=d(n.prototype.itemType.Type);return function(t,x,v){return(t=r(t,x,v))?new n(t):t}}return g(n)}function g(n){return n.prototype.read?function(p,l,m){return null==p?p:(new n).read(p,m)}:n.fromJSON}function k(n,p,
l,m){return 0!==m&&Array.isArray(p)?p.map(function(r){return k(n,r,l,m-1)}):n(p,null,l)}function c(n,p){var l=g(n),m=k.bind(null,l);return function(r,t,x){if(null==r)return r;r=m(r,x,p);t=p;for(x=r;0<t&&Array.isArray(x);)t--,x=x[0];if(void 0!==x)for(x=0;x<t;x++)r=[r];return r}}function d(n){var p=g(n);return function(l,m,r){return null==l?l:Array.isArray(l)?l.map(function(t){return p(t,null,r)}):[p(l,null,r)]}}function f(n){return b.isCollection(n)?(n=n.prototype.itemType)&&n.Type&&"function"===typeof n.Type?
h(n.Type):!1:!1}function h(n){return!!n&&(!!n.prototype.read||!!n.fromJSON||f(n))}Object.defineProperty(q,"__esModule",{value:!0});q.create=function(n,p,l,m){(!m.read||!m.read.reader&&!1!==m.read.enabled)&&h(n)&&a.setDeepValue("read.reader",e(n,p,l,m),m)}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(F,q){function a(b,e,g){for(var k=0;k<b.length;k++){var c=b[k];if(!(c in g))if(e)g[c]={};else return;g=g[c]}return g}Object.defineProperty(q,"__esModule",{value:!0});
q.getDeepValue=function(b,e){return a(b.split("."),!1,e)};q.setDeepValue=function(b,e,g){var k=b.split(".");b=k.pop();(g=a(k,!0,g))&&b&&(g[b]=e)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require",
"exports"],function(F,q){function a(e){"boolean"===typeof e.read?e.read={enabled:e.read}:"function"===typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"===typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function b(e){"boolean"===typeof e.write?e.write={enabled:e.write}:"function"===typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"===typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}Object.defineProperty(q,"__esModule",{value:!0});q.process=
function(e){e.json||(e.json={});a(e.json);b(e.json);if(e.json.origins)for(var g in e.json.origins)a(e.json.origins[g]),b(e.json.origins[g]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(F,q,a,b){function e(f,h,n,p){a.setDeepValue(n,g(f,p),h)}function g(f,h){var n;return n=f&&"function"===typeof f.write?f.write({},h):f&&"function"===typeof f.toJSON?f.toJSON():"number"===
typeof f?-Infinity===f?-Number.MAX_VALUE:Infinity===f?Number.MAX_VALUE:isNaN(f)?null:f:f}function k(f,h,n,p){null===f?f=null:f&&"function"===typeof f.map?(f=f.map(function(l){return g(l,p)}),"function"===typeof f.toArray&&(f=f.toArray())):f=[g(f,p)];a.setDeepValue(n,f,h)}function c(f,h,n){return 0!==n&&Array.isArray(f)?f.map(function(p){return c(p,h,n-1)}):g(f,h)}function d(f){return function(h,n,p,l){if(null===h)h=null;else{h=c(h,l,f);l=f;for(var m=h;0<l&&Array.isArray(m);)l--,m=m[0];if(void 0!==
m)for(m=0;m<l;m++)h=[h]}a.setDeepValue(p,h,n)}}Object.defineProperty(q,"__esModule",{value:!0});q.create=function(f,h,n,p){p.write&&!p.write.writer&&!1!==p.write.enabled&&(1===h||b.isCollection(f)?p.write.writer=k:p.write.writer=1<h?d(h):e)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(F,q){function a(g){switch(g){case "defaults":return e.DEFAULTS;case "service":return e.SERVICE;case "portal-item":return e.PORTAL_ITEM;case "web-scene":return e.WEB_SCENE;
case "web-map":return e.WEB_MAP;case "user":return e.USER}}function b(g){switch(g){case e.DEFAULTS:return"defaults";case e.SERVICE:return"service";case e.PORTAL_ITEM:return"portal-item";case e.WEB_SCENE:return"web-scene";case e.WEB_MAP:return"web-map";case e.USER:return"user"}}Object.defineProperty(q,"__esModule",{value:!0});var e;(function(g){g[g.DEFAULTS=0]="DEFAULTS";g[g.COMPUTED=1]="COMPUTED";g[g.SERVICE=2]="SERVICE";g[g.PORTAL_ITEM=3]="PORTAL_ITEM";g[g.WEB_SCENE=4]="WEB_SCENE";g[g.WEB_MAP=5]=
"WEB_MAP";g[g.USER=6]="USER";g[g.NUM=7]="NUM"})(e=q.OriginId||(q.OriginId={}));q.nameToId=a;q.idToName=b;q.readableNameToId=function(g){return a(g)};q.idToReadableName=function(g){return b(g)};q.writableNameToId=function(g){return a(g)};q.idToWritableName=function(g){return b(g)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});F=function(){function b(){this._values={}}
b.prototype.get=function(e){return this._values[e]};b.prototype.originOf=function(e){return a.OriginId.USER};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(e,g){this._values[e]=g};b.prototype.clear=function(e){delete this._values[e]};b.prototype.has=function(e){return e in this._values};return b}();q["default"]=F})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(F,q,a,b,e,g,k,c){Object.defineProperty(q,"__esModule",{value:!0});var d=Object.prototype.hasOwnProperty,f=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,h={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},n=/^_(set|get)([a-zA-Z0-9]+)Attr$/;q.processPrototype=function(p){for(var l=p.declaredClass,m=p.properties||{},r=0,t=Object.getOwnPropertyNames(m);r<t.length;r++){var x=t[r],v=m[x],z=typeof v;null==v?g.setPropertyMetadata(p,x,{value:v}):
Array.isArray(v)?g.setPropertyMetadata(p,x,{type:[v[0]],value:null}):"object"===z?k.getProperties(v)||v instanceof Date?g.setPropertyMetadata(p,x,{type:v.constructor,value:v}):g.setPropertyMetadata(p,x,v):"boolean"===z?g.setPropertyMetadata(p,x,{type:Boolean,value:v}):"string"===z?g.setPropertyMetadata(p,x,{type:String,value:v}):"number"===z?g.setPropertyMetadata(p,x,{type:Number,value:v}):"function"===z&&g.setPropertyMetadata(p,x,{type:v,value:null})}r=0;for(t=Object.getOwnPropertyNames(p);r<t.length;r++){z=
t[r];v=p[z];m=x=void 0;var A=f.exec(z);if(A)x=A[1],m=h[A[2]];else if(A=n.exec(z))x=A[2][0].toLowerCase()+A[2].substr(1),m=A[1].toLowerCase();x&&m&&(x=g.getPropertyMetadata(p,x),a.setDeepValue(m,v,x))}r=0;for(t=Object.getOwnPropertyNames(g.getPropertiesMetadata(p));r<t.length;r++)if(x=t[r],v=g.getPropertyMetadata(p,x),m=v.type,z=v.types,void 0===v.value&&d.call(p,x)&&(v.value=p[x]),!v.cast&&m){x=v;v=0;for(z=m;Array.isArray(z);)z=z[0],v++;m=1===v?b.ensureArray(z):1<v?b.ensureNArray(z,v):b.ensureType(m);
x.cast=m}else!v.cast&&z&&(Array.isArray(z)?v.cast=b.ensureArrayTyped(b.ensureOneOfType(z[0])):v.cast=b.ensureOneOfType(z));e.processPrototypeMetadatas(g.getPropertiesMetadata(p),l);return g.getPropertiesMetadata(p)};q.processClass=function(p){for(var l=p.prototype,m=l.declaredClass,r=p._meta.bases,t={},x=r.length-1;0<=x;x--)k.merge(t,g.getMetadata(r[x].prototype));var v=t.properties;e.processClassMetadatas(v,m);Object.defineProperty(p,"__accessorMetadata__",{value:{properties:v,autoDestroy:!!t.autoDestroy}});
var z={};m=function(A){var B=v[A];z[A]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(A):B.value},set:function(u){var w=this.__accessor__;if(!w)Object.defineProperty(this,A,{enumerable:!0,configurable:!0,writable:!0,value:u});else if(!Object.isFrozen(this)){if(w.initialized&&B.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+A+"' of "+this.declaredClass);if(2===w.lifecycle&&B.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
A+"' of "+this.declaredClass);w.set(A,u)}}}};r=0;for(x=Object.getOwnPropertyNames(v);r<x.length;r++)m(x[r]);Object.defineProperties(p.prototype,z);if(t.parameters)for(p=0,m=Object.getOwnPropertyNames(t.parameters);p<m.length;p++)r=m[p],x=Object.getOwnPropertyDescriptor(l,r)||{value:l[r]},(x=c.autocastMethod(l,r,x))&&Object.defineProperty(l,r,x);return t}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(F,q,a){function b(A,B){return B.isInstanceOf?
B.isInstanceOf(A):B instanceof A}function e(A){return null==A?A:new Date(A)}function g(A){return null==A?A:!!A}function k(A){return null==A?A:A.toString()}function c(A){return null==A?A:parseFloat(A)}function d(A){return null==A?A:Math.round(parseFloat(A))}function f(A){return A&&A.constructor&&void 0!==A.constructor._meta}function h(A,B){return null!=B&&A&&!b(A,B)}function n(A,B){h(A,B)&&(f(B)?v.error("Accessor#set","Assigning an instance of '"+(B.declaredClass||"unknown")+"' which is not a subclass of '"+
(A&&A.prototype&&A.prototype.declaredClass||"unknown")+"'"):B=new A(B));return B}function p(A){switch(A){case Number:return c;case z:return d;case Boolean:return g;case String:return k;case Date:return e;default:return n.bind(null,A)}}function l(A,B){var u=p(A);return 1===arguments.length?u:u(B)}function m(A,B){return 1===arguments.length?m.bind(null,A):B?Array.isArray(B)?B.map(A):[A(B)]:B}function r(A,B,u){return 0!==B&&Array.isArray(u)?u.map(function(w){return r(A,B-1,w)}):A(u)}function t(A,B,u){if(2===
arguments.length)return t.bind(null,A,B);if(!u)return u;u=r(A,B,u);for(var w=B,D=u;0<w&&Array.isArray(D);)w--,D=D[0];if(void 0!==D)for(D=0;D<w;D++)u=[u];return u}function x(A,B){if(2===arguments.length)return x(A).call(null,B);var u={},w=[],D=[],y;for(y in A.typeMap){var C=A.typeMap[y];u[y]=l(C);w.push(C&&C.prototype&&C.prototype.declaredClass||"unknown");D.push(y)}var G="string"===typeof A.key?function(I){return I[A.key]}:A.key;return function(I){if(A.base&&!h(A.base,I))return I;var O=G(I)||A.defaultKeyValue,
R=u[O];if(!R)return v.error("Accessor#set","Invalid property value, value needs to be one of '"+(w.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(D.join("', '")+"')")),null;if(!h(A.typeMap[O],I))return I;if("string"!==typeof A.key||f(I))return R(I);O={};for(var Z in I)Z!==A.key&&(O[Z]=I[Z]);return R(O)}}Object.defineProperty(q,"__esModule",{value:!0});var v=a.getLogger("esri.core.Accessor");q.isInstanceOf=b;q.ensureDate=e;q.ensureBoolean=g;q.ensureString=k;q.ensureNumber=
c;q.ensureInteger=d;q.isClassedType=f;q.requiresType=h;q.ensureClass=n;q.ensureType=l;q.ensureArrayTyped=m;q.ensureArray=function(A,B){return 1===arguments.length?m(l.bind(null,A)):m(l.bind(null,A),B)};q.ensureNArrayTyped=t;q.ensureNArray=function(A,B,u){return 2===arguments.length?t(l.bind(null,A),B):t(l.bind(null,A),B,u)};q.ensureOneOfType=x;var z=function(){return function(){}}();q.Integer=z;q["default"]=l})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(F,q){function a(c){return null!=c.__accessorMetadata__}function b(c){return a(c)&&null!=e(c).properties}function e(c){c.__accessorMetadata__||Object.defineProperty(c,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return c.__accessorMetadata__}function g(c){c=e(c);var d=c.properties;d||(d=c.properties={});return d}function k(c,d){var f=e(c),h=f.parameters;h||(h=f.parameters={});f=h[d];f||(f=[],h[d]=f);return f}Object.defineProperty(q,"__esModule",{value:!0});
q.hasMetadata=a;q.hasPropertiesMetadata=b;q.hasPropertyMetadata=function(c,d){return b(c)&&null!=g(c)[d]};q.hasParametersMetadata=function(c,d){return a(c)&&null!=e(c).parameters&&null!=e(c).parameters[d]};q.getMetadata=e;q.getPropertiesMetadata=g;q.getPropertyMetadata=function(c,d){var f=g(c),h=f[d];h||(h=f[d]={});return h};q.setPropertyMetadata=function(c,d,f){g(c)[d]=f};q.getParametersMetadata=k;q.getParameterMetadata=function(c,d,f){var h=k(c,d)[f];h||(k(c,d)[f]=h={index:f});return h}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require",
"exports","../ensureType","../metadata"],function(F,q,a,b){function e(f){var h="_meta"in f?a.ensureType(f):f;return function(){for(var n=[],p=0;p<arguments.length;p++)n[p]=arguments[p];n.push(h);return"number"===typeof n[2]?k.apply(this,n):g.apply(this,n)}}function g(f,h,n,p){b.getPropertyMetadata(f,h).cast=p}function k(f,h,n,p){b.getParameterMetadata(f,h,n).cast=p}function c(f){return function(h,n,p){b.getPropertyMetadata(h,f).cast=h[n]}}Object.defineProperty(q,"__esModule",{value:!0});var d=Object.prototype.toString;
q.autocastMethod=function(f,h,n){if(b.hasParametersMetadata(f,h)){var p=b.getParametersMetadata(f,h).filter(function(m){return null!=m.cast});if(p.length){var l=n.value;n.value=function(){for(var m=[],r=0;r<arguments.length;r++)m[r]=arguments[r];for(r=0;r<p.length;r++){var t=p[r];m[t.index]=t.cast(m[t.index])}return l.apply(this,m)};return n}}};q.cast=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];if(3!==f.length||"string"!==typeof f[1]){if(1===f.length&&"[object Function]"===
d.call(f[0]))return e(f[0]);if(1===f.length&&"string"===typeof f[0])return c(f[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(F,q,a,b,e,g,k,c,d){function f(B){x.has(B)?v.splice(v.indexOf(B),1):x.add(B);v.push(B);z||(z=g.schedule(n))}function h(B){if(!B.removed){var u=B.callback,w=B.path,D=B.oldValue,y=B.target,C=k.valueOf(y,B.propertyPath,!0);b.equals(D,C)||
(B.oldValue=C,u.call(y,C,D,w,y))}}function n(){if(z){z=null;var B=v;v=t.acquire();x.clear();for(var u=t.acquire(),w=0;w<B.length;w++){var D=B[w];h(D);D.removed&&u.push(D)}for(w=0;w<v.length;w++)D=v[w],D.removed&&(u.push(D),x["delete"](D),v.splice(w,1),--w);for(w=0;w<u.length;w++)r.pool.release(u[w]);t.release(B);t.release(u);A.forEach(function(y){return y()})}}function p(B,u,w){var D=c.parse(B,u,w,function(y,C,G){var I=k.valueOf(y,C,!0),O,R=d.wire(y,C,function(Z,W){Z.__accessor__.destroyed?D.remove():
(O||(O=r.pool.acquire(Z,W,I,G),I=null),f(O))});return{remove:c.once(function(){R.remove();O&&(O.removed=!0,f(O),O=null);D=R=I=null})}});return D}function l(B,u,w){var D=c.parse(B,u,w,function(y,C,G){var I=k.valueOf(y,C,!0),O=!1;return d.wire(y,C,function(R,Z){if(R.__accessor__.destroyed)D.remove();else if(!O){O=!0;var W=k.valueOf(R,Z,!0);b.equals(I,W)||G.call(R,W,I,Z,R);I=k.valueOf(R,Z,!0);O=!1}})});return D}function m(B,u,w,D){void 0===D&&(D=!1);return!B.__accessor__||B.__accessor__.destroyed?{remove:function(){}}:
D?l(B,u,w):p(B,u,w)}Object.defineProperty(q,"__esModule",{value:!0});var r=function(){function B(u,w,D,y){this.target=u;this.path=w;this.oldValue=D;this.callback=y;this.removed=!1;this.propertyPath=c.pathToStringOrArray(w)}B.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};B.pool=new e(B,!0);return B}(),t=new a,x=new Set,v=t.acquire(),z;q.dispatchTarget=function(B){for(var u=t.copy(v),w=0;w<u.length;w++){var D=u[w];D.target===B&&
(h(D),x["delete"](D),v.splice(v.indexOf(D),1))}};q.removeTarget=function(B){for(var u=0;u<v.length;u++){var w=v[u];w.target===B&&(w.removed=!0)}};q.dispatch=n;var A=new Set;q.afterDispatch=function(B){A.add(B);return{remove:function(){A["delete"](B)}}};q.watch=m;q.isValueInUse=function(B){return v.some(function(u){return u.oldValue===B})};q["default"]=m})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(F,q,a){function b(k){k.length=0}var e=
Array.prototype.splice;F=function(){function k(c,d){void 0===c&&(c=50);void 0===d&&(d=50);this._pool=new a(Array,!1,b,d,c)}k.prototype.acquire=function(){return this._pool.acquire()};k.prototype.copy=function(c){var d=this.acquire();c.unshift(0,0);e.apply(d,c);c.splice(0,2);return d};k.prototype.release=function(c){this._pool.release(c)};k.acquire=function(){return g.acquire()};k.copy=function(c){return g.copy(c)};k.release=function(c){return g.release(c)};return k}();var g=new F(100);return F})},
"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(F,q){var a=function(){return function(){}}();return function(){function b(e,g,k,c,d){void 0===c&&(c=1);void 0===d&&(d=0);this.classConstructor=e;this.acquireFunctionOrWithConstructor=g;this.releaseFunction=k;this.growthSize=c;!0===g?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof g&&(this.acquireFunction=g);this._pool=Array(d);this._set=new Set;this._initialSize=d;for(e=0;e<d;e++)this._pool[e]=
new this.classConstructor;this.growthSize=Math.max(c,1)}b.prototype.acquire=function(){for(var e=[],g=0;g<arguments.length;g++)e[g]=arguments[g];g=this.classConstructor||a;if(0===this._pool.length)for(var k=this.growthSize,c=0;c<k;c++)this._pool[c]=new g;g=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[g].concat(e)):g&&g.acquire&&"function"===typeof g.acquire&&g.acquire.apply(g,e);this._set["delete"](g);return g};b.prototype.release=function(e){e&&!this._set.has(e)&&(this.releaseFunction?
this.releaseFunction(e):e&&e.release&&"function"===typeof e.release&&e.release(),this._pool.push(e),this._set.add(e))};b.prototype.prune=function(e){void 0===e&&(e=this._initialSize);if(!(this._pool.length<=e))for(var g;e>this._pool.length;)g=this._pool.shift(),this._set["delete"](g),g.dispose&&"function"===typeof g.dispose&&g.dispose()};b.prototype._constructorAcquireFunction=function(e){for(var g=[],k=1;k<arguments.length;k++)g[k-1]=arguments[k];(c=this.classConstructor).call.apply(c,[e].concat(g));
var c};return b}()})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(F,q,a,b,e){function g(u){void 0===u&&(u=q.now());q.debug.rafId=null;0<z.length&&(q.debug.rafId=k());if(0<p){var w=u-p;r=Math.min(w,r);if(w<l)return}q.debug.executeFrameTasks(u)}function k(){return q.debug.requestNextFrame?q.debug.requestNextFrame(f):f()}function c(){for(var u=0;u<z.length;){var w=z[u];u++;if(w.removed){z.splice(u-1,1);for(var D=
0;D<x.length;D++){var y=x[D];if(w.phases[y]){y=A[y];var C=y.indexOf(w);-1!==C&&y.splice(C,1)}}}}}function d(){for(;v.length;){var u=v.shift();u.isActive&&(u.isActive=!1,u.callback())}q.debug.willDispatch=!1}function f(){return e(g)}Object.defineProperty(q,"__esModule",{value:!0});q.now=b;var h=function(){return function(u){this.phases=u;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),n=function(){function u(w){this.callback=w;this.isActive=!0}u.prototype.remove=
function(){this.isActive=!1};return u}(),p=-1,l=0,m=0,r=Number.POSITIVE_INFINITY,t={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},x=["prepare","preRender","render","postRender","update"],v=[],z=[],A={prepare:[],preRender:[],render:[],postRender:[],update:[]},B=function(){function u(w){this._task=w}u.prototype.remove=function(){this._task.removed=!0};u.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=q.now())};u.prototype.resume=function(){this._task.paused&&
(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=q.now()-this._task.pausedAt))};return u}();q.FrameTaskHandle=B;q.debug={frameTasks:z,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(u){void 0===u&&(u=!1);for(var w=0;w<z.length;w++)z[w].removed=!0;u&&c()},dispatch:d,executeFrameTasks:function(u){void 0===u&&(u=q.now());0>p&&(p=u);var w=u-p;p=u;for(var D=0;D<z.length;D++){var y=z[D];-1!==y.epoch&&(y.dt=w)}for(D=0;D<x.length;D++){w=x[D];for(var C=A[w],G=0;G<C.length;G++)y=
C[G],y.paused||y.removed||(0===D&&y.ticks++,-1===y.epoch&&(y.epoch=u),t.time=u,t.deltaTime=y.dt,t.elapsedFrameTime=q.now()-u,t.frameDuration=0<m?m:r,t.spendInTask=u-y.epoch,y.phases[w].call(y,t))}c()}};q.schedule=function(u){u=new n(u);v.push(u);q.debug.willDispatch||(q.debug.willDispatch=!0,a(d));return u};q.addFrameTask=function(u){var w=new h(u);z.push(w);for(var D=0,y=x;D<y.length;D++){var C=y[D];u[C]&&A[C].push(w)}q.debug.rafId||(p=-1,q.debug.rafId=k());return new B(w)};q.setFrameRate=function(u){if(0>=
u)m=l=0;else{var w=1.05*r;u=Math.ceil(1E3/u/w);l=(u-1)*w;m=u*r}};q.requestNextFrame=k})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(F,q,a){function b(){if(a.postMessage&&!a.importScripts){var g=a.onmessage,k=!0;a.onmessage=function(){k=!1};a.postMessage("","*");a.onmessage=g;return k}return!1}var e=a.MutationObserver||a.WebKitMutationObserver;return function(){if(a.process&&a.process.nextTick)var g=function(f){a.process.nextTick(f)};else if(a.Promise)g=
function(f){a.Promise.resolve().then(f)};else if(e){var k=[],c=document.createElement("div");(new e(function(){for(;0<k.length;)k.shift()()})).observe(c,{attributes:!0});g=function(f){k.push(f);c.setAttribute("queueStatus","1")}}else if(b()){var d=[];a.addEventListener("message",function(f){if(f.source===a&&"esri-nexttick-message"===f.data)for(f.stopPropagation();d.length;)d.shift()()},!0);g=function(f){d.push(f);a.postMessage("esri-nexttick-message","*")}}else g=a.setImmediate?function(f){return a.setImmediate(f)}:
function(f){return a.setTimeout(f,0)};return g}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(F,q){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(F,q,a){return function(){var b=a.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};
if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};if(b.oNow)return function(){return b.oNow()};var e=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-e}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(F,q,a,b){var e=b();F=a.requestAnimationFrame;if(!F){q=["ms","moz","webkit","o"];for(var g=0;g<q.length&&!F;++g)F=a[q[g]+
"RequestAnimationFrame"];F||(F=function(k){var c=b(),d=Math.max(0,16-(c-e)),f=a.setTimeout(function(){k(b())},d);e=c+d;return f})}return F})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(F,q,a,b,e,g,k){return function(c){function d(f){f=c.call(this)||this;f._groups=new Map;return f}a(d,c);d.prototype.destroy=function(){this.removeAll()};
Object.defineProperty(d.prototype,"size",{get:function(){var f=0;this._groups.forEach(function(h){f+=h.length});return f},enumerable:!0,configurable:!0});d.prototype.add=function(f,h){if(!this._isHandle(f)&&!Array.isArray(f)&&!g.isCollection(f))return this;var n=this._getOrCreateGroup(h);Array.isArray(f)||g.isCollection(f)?f.forEach(function(p){return n.push(p)}):n.push(f);this.notifyChange("size");return this};d.prototype.has=function(f){return this._groups.has(this._ensureGroupKey(f))};d.prototype.remove=
function(f){if(Array.isArray(f)||g.isCollection(f))return f.forEach(this.remove,this),this;if(!this.has(f))return this;for(var h=this._getGroup(f),n=0;n<h.length;n++)h[n].remove();this._deleteGroup(f);this.notifyChange("size");return this};d.prototype.removeAll=function(){this._groups.forEach(function(f){for(var h=0;h<f.length;h++)f[h].remove()});this._groups.clear();this.notifyChange("size");return this};d.prototype._isHandle=function(f){return f&&!!f.remove};d.prototype._getOrCreateGroup=function(f){if(this.has(f))return this._getGroup(f);
var h=[];this._groups.set(this._ensureGroupKey(f),h);return h};d.prototype._getGroup=function(f){return this._groups.get(this._ensureGroupKey(f))};d.prototype._deleteGroup=function(f){return this._groups["delete"](this._ensureGroupKey(f))};d.prototype._ensureGroupKey=function(f){return f||"_default_"};b([k.property({readOnly:!0})],d.prototype,"size",null);return d=b([k.subclass("esri.core.Handles")],d)}(k.declared(e))})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p){function l(y){return y?y.isInstanceOf&&y.isInstanceOf(D):!1}function m(y){return y?l(y)?y.toArray():y.length?Array.prototype.slice.apply(y):[]:[]}function r(y){if(y&&y.length)return y[0]}function t(y,C,G,I){C&&C.forEach(function(O,R,Z){y.push(O);t(y,G.call(I,O,R,Z),G,I)})}F=function(){function y(){this.target=null;this.defaultPrevented=this.cancellable=!1}y.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};y.prototype.reset=function(C){this.defaultPrevented=
!1;this.item=C};return y}();var x=function(){},v=new f(F,!0,function(y){y.item=null;y.target=null}),z=new Set,A=new Set,B=new Set,u=new Map,w=0,D=function(y){function C(I){I=y.call(this,I)||this;I._boundDispatch=I._dispatchColChange.bind(I);I._chgListeners=[];I._notifications=null;I._timer=null;I.length=0;I._items=[];Object.defineProperty(I,"uid",{value:w++});return I}a(C,y);var G=C;C.ofType=function(I){if(!I)return G;if(u.has(I))return u.get(I);if("function"===typeof I)var O=I.prototype.declaredClass;
else if(I.base)O=I.base.prototype.declaredClass;else for(var R in I.typeMap){var Z=I.typeMap[R].prototype.declaredClass;O=O?O+(" | "+Z):Z}O=G.createSubclass({declaredClass:"esri.core.Collection\x3c"+O+"\x3e"});R={Type:I,ensureType:"function"===typeof I?p.ensureType(I):p.ensureOneOfType(I)};Object.defineProperty(O.prototype,"itemType",{value:R});u.set(I,O);return O};C.prototype.normalizeCtorArgs=function(I){return I?Array.isArray(I)||l(I)?{items:I}:I:{}};Object.defineProperty(C.prototype,"items",{get:function(){return this._items},
set:function(I){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(m(I))),this._emitAfterChanges())},enumerable:!0,configurable:!0});C.prototype.on=function(I,O){var R;Array.isArray(I)?R=I:-1<I.indexOf(",")&&(R=I.split(/\s*,\s*/));if(R){for(var Z=[],W=0;W<R.length;W++)Z.push(this.on(R[W],O));Z.remove=function(){for(var Y=0;Y<Z.length;Y++)Z[Y].remove()};return Z}if("change"===I){var da=this._chgListeners,ea={removed:!1,callback:O};da.push(ea);this._notifications&&this._notifications.push({listeners:da.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=x;ea.removed=!0;da.splice(da.indexOf(ea),1)}}}return e.after(this,"on"+I,O,!0)};C.prototype.hasEventListener=function(I){return"change"===I?0<this._chgListeners.length:this.inherited(arguments)};C.prototype.add=function(I,O){if(this._emitBeforeChanges())return this;var R=this.getNextIndex(O);this._splice(R,0,I);this._emitAfterChanges();return this};C.prototype.addMany=function(I,O){void 0===O&&(O=this._items.length);if(!I||
!I.length||this._emitBeforeChanges())return this;var R=this.getNextIndex(O);this._splice.apply(this,[R,0].concat(m(I)));this._emitAfterChanges();return this};C.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var I=this._splice(0,this.length)||[];this._emitAfterChanges();return I};C.prototype.clone=function(){return this._createNewInstance({items:this._items.map(d.clone)})};C.prototype.concat=function(){for(var I=[],O=0;O<arguments.length;O++)I[O]=arguments[O];I=
I.map(m);return this._createNewInstance({items:(R=this._items).concat.apply(R,I)});var R};C.prototype.drain=function(I,O){if(this.length&&!this._emitBeforeChanges()){for(var R=this._splice(0,this.length),Z=R.length,W=0;W<Z;W++)I.call(O,R[W],W,R);this._emitAfterChanges()}};C.prototype.every=function(I,O){return this._items.every(I,O)};C.prototype.filter=function(I,O){var R=2===arguments.length?this._items.filter(I,O):this._items.filter(I);return this._createNewInstance({items:R})};C.prototype.find=
function(I,O){if("function"!==typeof I)throw new TypeError(I+" is not a function");for(var R=this._items,Z=R.length,W=0;W<Z;W++){var da=R[W];if(I.call(O,da,W,R))return da}};C.prototype.findIndex=function(I,O){if("function"!==typeof I)throw new TypeError(I+" is not a function");for(var R=this._items,Z=R.length,W=0;W<Z;W++)if(I.call(O,R[W],W,R))return W;return-1};C.prototype.flatten=function(I,O){var R=[];t(R,this,I,O);return new G(R)};C.prototype.forEach=function(I,O){for(var R=this._items,Z=R.length,
W=0;W<Z;W++)I.call(O,R[W],W,R)};C.prototype.getItemAt=function(I){return this._items[I]};C.prototype.getNextIndex=function(I){var O=this.length;I=null==I?O:I;0>I?I=0:I>O&&(I=O);return I};C.prototype.includes=function(I,O){void 0===O&&(O=0);return arguments.length?-1!==this._items.indexOf(I,O):!1};C.prototype.indexOf=function(I,O){void 0===O&&(O=0);return this._items.indexOf(I,O)};C.prototype.join=function(I){void 0===I&&(I=",");return this._items.join(I)};C.prototype.lastIndexOf=function(I,O){void 0===
O&&(O=this.length-1);return this._items.lastIndexOf(I,O)};C.prototype.map=function(I,O){var R=this._items.map(I,O);return new G({items:R})};C.prototype.reorder=function(I,O){void 0===O&&(O=this.length-1);var R=this.indexOf(I);if(-1!==R){0>O?O=0:O>=this.length&&(O=this.length-1);if(R!==O){if(this._emitBeforeChanges())return I;this._splice(R,1);this._splice(O,0,I);this._emitAfterChanges()}return I}};C.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var I=r(this._splice(this.length-
1,1));this._emitAfterChanges();return I}};C.prototype.push=function(){for(var I=[],O=0;O<arguments.length;O++)I[O]=arguments[O];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(I));this._emitAfterChanges();return this.length};C.prototype.reduce=function(I,O){var R=this._items;return 2===arguments.length?R.reduce(I,O):R.reduce(I)};C.prototype.reduceRight=function(I,O){var R=this._items;return 2===arguments.length?R.reduceRight(I,O):R.reduceRight(I)};C.prototype.remove=
function(I){return this.removeAt(this.indexOf(I))};C.prototype.removeAt=function(I){if(!(0>I||I>=this.length||this._emitBeforeChanges()))return I=r(this._splice(I,1)),this._emitAfterChanges(),I};C.prototype.removeMany=function(I){if(!I||!I.length||this._emitBeforeChanges())return[];I=l(I)?I.toArray():I;for(var O=this._items,R=[],Z=I.length,W=0;W<Z;W++){var da=O.indexOf(I[W]);if(-1<da){for(var ea=W+1,Y=da+1,ba=Math.min(I.length-ea,O.length-Y),Q=0;Q<ba&&I[ea+Q]===O[Y+Q];)Q++;ea=1+Q;(da=this._splice(da,
ea))&&0<da.length&&R.push.apply(R,da);W+=ea-1}}this._emitAfterChanges();return R};C.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var I=this._splice(0,this.length);I&&(I.reverse(),this._splice.apply(this,[0,0].concat(I)));this._emitAfterChanges();return this};C.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var I=r(this._splice(0,1));this._emitAfterChanges();return I}};C.prototype.slice=function(I,O){void 0===I&&(I=0);void 0===O&&(O=this.length);return this._createNewInstance({items:this._items.slice(I,
O)})};C.prototype.some=function(I,O){return this._items.some(I,O)};C.prototype.sort=function(I){if(!this.length||this._emitBeforeChanges())return this;var O=this._splice(0,this.length);arguments.length?O.sort(I):O.sort();this._splice.apply(this,[0,0].concat(O));return this};C.prototype.splice=function(I,O){for(var R=[],Z=2;Z<arguments.length;Z++)R[Z-2]=arguments[Z];if(this._emitBeforeChanges())return[];R=this._splice.apply(this,[I,O].concat(R))||[];this._emitAfterChanges();return R};C.prototype.toArray=
function(){return this._items.slice()};C.prototype.toJSON=function(){return this.toArray()};C.prototype.toLocaleString=function(){return this._items.toLocaleString()};C.prototype.toString=function(){return this._items.toString()};C.prototype.unshift=function(){for(var I=[],O=0;O<arguments.length;O++)I[O]=arguments[O];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(I));this._emitAfterChanges();return this.length};C.prototype._createNewInstance=function(I){return new this.constructor(I)};
C.prototype._splice=function(I,O){for(var R=[],Z=2;Z<arguments.length;Z++)R[Z-2]=arguments[Z];Z=this._items;var W=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=h.schedule(this._boundDispatch));if(O){var da=Z.splice(I,O);if(this.hasEventListener("before-remove")){var ea=v.acquire();ea.target=this;ea.cancellable=
!0;for(var Y=0,ba=da.length;Y<ba;Y++){var Q=da[Y];ea.reset(Q);this.emit("before-remove",ea);ea.defaultPrevented&&(da.splice(Y,1),Z.splice(I,0,Q),I+=1,--Y,--ba)}v.release(ea)}this.length=this._items.length;if(this.hasEventListener("after-remove")){Q=v.acquire();Q.target=this;Q.cancellable=!1;ba=da.length;for(Y=0;Y<ba;Y++)Q.reset(da[Y]),this.emit("after-remove",Q);v.release(Q)}}if(R&&R.length){if(W){Y=[];for(ba=0;ba<R.length;ba++)Q=R[ba],ea=W.ensureType(Q),null==ea&&null!=Q||Y.push(ea);R=Y}W=this.hasEventListener("before-add");
Y=this.hasEventListener("after-add");ba=I===this.length;if(W||Y){Q=v.acquire();Q.target=this;Q.cancellable=!0;ea=v.acquire();ea.target=this;ea.cancellable=!1;for(var fa=0,S=R;fa<S.length;fa++){var X=S[fa];W?(Q.reset(X),this.emit("before-add",Q),Q.defaultPrevented||(ba?Z.push(X):Z.splice(I++,0,X),this._set("length",Z.length),Y&&(ea.reset(X),this.emit("after-add",ea)))):(ba?Z.push(X):Z.splice(I++,0,X),this._set("length",Z.length),ea.reset(X),this.emit("after-add",ea))}v.release(Q)}else ba?Z.push.apply(Z,
R):Z.splice.apply(Z,[I,0].concat(R)),this._set("length",Z.length)}(R&&R.length||da&&da.length)&&this._notifyChangeEvent(R,da);return da};C.prototype._emitBeforeChanges=function(){var I=!1;if(this.hasEventListener("before-changes")){var O=v.acquire();O.target=this;O.cancellable=!0;this.emit("before-changes",O);I=O.defaultPrevented;v.release(O)}return I};C.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var I=v.acquire();I.target=this;I.cancellable=!1;this.emit("after-changes",
I);v.release(I)}};C.prototype._notifyChangeEvent=function(I,O){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:I,removed:O})};C.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var I=this._notifications;this._notifications=null;for(var O=function(W){var da=W.changes;z.clear();A.clear();B.clear();for(var ea=0;ea<da.length;ea++){var Y=da[ea],ba=Y.added;Y=Y.removed;if(ba)if(0===
B.size&&0===A.size)for(var Q=0,fa=ba;Q<fa.length;Q++)ba=fa[Q],z.add(ba);else for(Q=0,fa=ba;Q<fa.length;Q++)ba=fa[Q],A.has(ba)?(B.add(ba),A["delete"](ba)):B.has(ba)||z.add(ba);if(Y)if(0===B.size&&0===z.size)for(Q=0;Q<Y.length;Q++)ba=Y[Q],A.add(ba);else for(Q=0;Q<Y.length;Q++)ba=Y[Q],z.has(ba)?z["delete"](ba):(B["delete"](ba),A.add(ba))}var S=k.acquire();z.forEach(function(ta){S.push(ta)});var X=k.acquire();A.forEach(function(ta){X.push(ta)});var la=R._items,na=W.items,qa=k.acquire();B.forEach(function(ta){na.indexOf(ta)!==
la.indexOf(ta)&&qa.push(ta)});if(W.listeners&&(S.length||X.length||qa.length))for(da={target:R,added:S,removed:X,moved:qa},ea=W.listeners.length,ba=0;ba<ea;ba++)Y=W.listeners[ba],Y.removed||Y.callback.call(R,da);k.release(S);k.release(X);k.release(qa)},R=this,Z=0;Z<I.length;Z++)O(I[Z]);z.clear();A.clear();B.clear()}};C.isCollection=l;b([n.property()],C.prototype,"length",void 0);b([n.property()],C.prototype,"items",null);return C=G=b([n.subclass("esri.core.Collection")],C)}(n.declared(g,c));return D})},
"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(F,q,a,b){function e(g,k,c,d){var f;Array.isArray(k)?f=k:-1<k.indexOf(",")&&(f=k.split(/\s*,\s*/));if(f){var h=[];for(k=0;k<f.length;k++)h.push(e(g,f[k],c,d));h.remove=function(){for(var n=0;n<h.length;n++)h[n].remove()};return h}return d(g,k)}return function(){function g(){}g.prototype.emit=function(k,c){if(this.hasEventListener(k))return c=c||{},c.target||(c.target=this),b.emit(this,k,
c)};g.prototype.on=function(k,c){return e(this,k,c,function(d,f){return a.after(d,"on"+f,c,!0)})};g.prototype.hasEventListener=function(k){k="on"+k;return!(!this[k]||!this[k].after)};return g}()})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(F,
q,a,b,e,g,k,c,d,f,h){function n(p){for(var l in p)q.hasOwnProperty(l)||(q[l]=p[l])}Object.defineProperty(q,"__esModule",{value:!0});n(a);n(b);n(e);n(g);n(k);n(c);n(d);n(f);n(h)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.aliasOf=function(b){return function(e,g){a.getPropertyMetadata(e,g).aliasOf=b}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.autoDestroy=function(){return function(b,e,g){a.getMetadata(b).autoDestroy=!0;return b[e]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.declared=function(a){for(var b=[],e=1;e<arguments.length;e++)b[e-1]=arguments[e];e=function(){return this||{}};e.__bases__=[a].concat(b);return e}})},
"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(F,q,a,b,e,g){Object.defineProperty(q,"__esModule",{value:!0});e.getLogger("esri.core.accessorSupport.decorators.property");q.property=function(k){void 0===k&&(k={});return function(c,d){var f=c.constructor.prototype;if(f!==Function.prototype){var h=Object.getOwnPropertyDescriptor(c,d);h&&(h.get||h.set)?(k=b.clone(k),h.set&&(k.set=h.set),
h.get&&(k.get=h.get)):h&&h.hasOwnProperty("value")&&(k=b.clone(k),k.value=h.value);f=g.getPropertyMetadata(f,d);for(var n in k)h=k[n],Array.isArray(h)?f[n]=(f[n]||[]).concat(h):f[n]=h}}};q.propertyJSONMeta=function(k,c,d){k=g.getPropertyMetadata(k.constructor.prototype,d);k.json||(k.json={});k=k.json;void 0!==c&&(k.origins||(k.origins={}),k.origins[c]||(k.origins[c]={}),k=k.origins[c]);return k}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports",
"../../object","./property"],function(F,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.reader=function(e,g,k){if(void 0===g||Array.isArray(g)){var c=e;k=g;var d=[void 0]}else c=g,d=Array.isArray(e)?e:[e];return function(f,h,n){var p=f.constructor.prototype;d.forEach(function(l){l=b.propertyJSONMeta(f,l,c);l.read&&"object"!==typeof l.read&&(l.read={});a.setDeepValue("read.reader",p[h],l);k&&(l.read.source=(l.read.source||[]).concat(k))})}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require",
"exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.shared=function(a){return function(b,e){b[e]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(F,q,a,b){function e(h,n){h.read&&("function"===typeof h.read?n.push(h.read):"object"===typeof h.read&&h.read.reader&&n.push(h.read.reader))}function g(h,n){h.write&&("function"===typeof h.write?n.push(h.write):"object"===typeof h.write&&
h.write.writer&&n.push(h.write.writer))}function k(h){var n=[];h=b.getPropertiesMetadata(h.prototype);if(!h)return n;for(var p in h){var l=h[p];l.cast&&n.push(l.cast);l.copy&&n.push(l.copy);if(l=l.json)if(e(l,n),g(l,n),l=l.origins)for(var m in l){var r=l[m];e(r,n);g(r,n)}}return n}function c(h){var n={values:{},descriptors:{}},p=["__bases__"],l=b.getPropertiesMetadata(h.prototype),m=k(h);Object.getOwnPropertyNames(h.prototype).filter(function(r){return-1!==p.indexOf(r)||l&&l.hasOwnProperty(r)||!f(Object.getOwnPropertyDescriptor(h.prototype,
r))&&-1!==m.indexOf(h.prototype[r])?!1:!0}).forEach(function(r){var t=Object.getOwnPropertyDescriptor(h.prototype,r);f(t)?n.descriptors[r]=t:n.values[r]=h.prototype[r]});return n}function d(h){var n=Object.getOwnPropertyNames(h),p=Object.getPrototypeOf(h.prototype).constructor,l=Object.getOwnPropertyNames(Function);l.push("__bases__");var m=Object.getOwnPropertyNames(p),r={values:{},descriptors:{}};n.filter(function(t){return-1!==l.indexOf(t)?!1:-1===m.indexOf(t)||p[t]!==h[t]?!0:!1}).forEach(function(t){var x=
Object.getOwnPropertyDescriptor(h,t);f(x)?r.descriptors[t]=x:r.values[t]=h[t]});return r}function f(h){return h&&!(!h.get&&!h.set)}Object.defineProperty(q,"__esModule",{value:!0});q.subclass=function(h){return function(n){var p=c(n),l=d(n);null!=h&&(p.values.declaredClass=h);n=a(n.__bases__,p.values);Object.defineProperties(n.prototype,p.descriptors);for(var m in l.values)n[m]=l.values[m];Object.defineProperties(n,l.descriptors);return n}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require",
"exports","../../object","./property"],function(F,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.writer=function(e,g,k){if(void 0===g){var c=e;var d=[void 0]}else"string"!==typeof g?(c=e,d=[void 0],k=g):(c=g,d=Array.isArray(e)?e:[e]);return function(f,h,n){var p=f.constructor.prototype;d.forEach(function(l){l=b.propertyJSONMeta(f,l,c);l.write&&"object"!==typeof l.write&&(l.write={});k&&a.setDeepValue("write.target",k,l);a.setDeepValue("write.writer",p[h],l)})}}})},"esri/layers/vectorTiles/core/LRUMap":function(){define(["require",
"exports"],function(F,q){return function(){function a(b,e){void 0===b&&(b=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=b;e&&(e.disposeFunction&&(this.disposeFunction=e.disposeFunction),e.sizeOfFunction&&(this.sizeOfFunction=e.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});a.prototype.clear=function(){var b=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(e,g){b.disposeFunction(g,e)});this._cache.clear();this._sizeOf=0};a.prototype["delete"]=function(b){var e=this._cache.get(b);return this._cache["delete"](b)?(this._sizeOf-=this.sizeOfFunction(e),this._queue.splice(this._queue.indexOf(b),1),this.disposeFunction&&this.disposeFunction(b,e),!0):!1};a.prototype.forEach=
function(b,e){this._cache.forEach(b,e)};a.prototype.get=function(b){var e=this._cache.get(b);if(void 0!==e)return this._queue.splice(this._queue.indexOf(b),1),this._queue.unshift(b),e};a.prototype.has=function(b){return this._cache.has(b)};a.prototype.set=function(b,e){var g=this.get(b);void 0!==g?this._sizeOf-=this.sizeOfFunction(g):this._queue.unshift(b);this._sizeOf+=this.sizeOfFunction(e);this._cache.set(b,e);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&
this._sizeOf>this._maxSize;){var b=this._queue.pop(),e=this._cache.get(b);this._cache["delete"](b)&&(this._sizeOf-=this.sizeOfFunction(e),this.disposeFunction&&this.disposeFunction(b,e))}};return a}()})},"esri/layers/vectorTiles/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(F,q,a,b){function e(m,r){Array.isArray(m)?m.forEach(r):r(m)}function g(m,r,t,x,v){v=m.watch(r,function(z,A,B,u){x&&!x(z)||t.call(m,z,A,B,u)},v);e(r,function(z){var A=m.get(z);
x&&x(A)&&t.call(m,A,A,z,m)});return v}function k(m,r,t,x,v){function z(){w&&(w.remove(),w=null)}var A=!1,B=new a(z),u=new b;u.cancel=B.cancel;u.isCanceled=B.isCanceled;u.isFulfilled=B.isFulfilled;u.isRejected=B.isRejected;u.isResolved=B.isResolved;u.then=B.then;u.remove=z;Object.freeze(u);var w=g(m,r,function(D,y,C,G){A=!0;z();t&&t.call(m,D,y,C,G);B.resolve({value:D,oldValue:y,propertyName:C,target:G})},x,v);A&&w.remove();return u}function c(m){return!!m}function d(m){return!m}function f(m){return!0===
m}function h(m){return!1===m}function n(m){return void 0!==m}function p(m){return void 0===m}function l(m,r,t,x){var v=Array.isArray(r)?r:-1<r.indexOf(",")?r.split(","):[r];r=m.watch(r,t,x);v.forEach(function(z){z=z.trim();var A=m.get(z);t.call(m,A,A,z,m)});return r}Object.defineProperty(q,"__esModule",{value:!0});q.init=l;q.watch=function(m,r,t,x){return m.watch(r,t,x)};q.once=function(m,r,t,x){return k(m,r,t,null,x)};q.when=function(m,r,t,x){return g(m,r,t,c,x)};q.whenOnce=function(m,r,t,x){return k(m,
r,t,c,x)};q.whenNot=function(m,r,t,x){return g(m,r,t,d,x)};q.whenNotOnce=function(m,r,t,x){return k(m,r,t,d,x)};q.whenTrue=function(m,r,t,x){return g(m,r,t,f,x)};q.whenTrueOnce=function(m,r,t,x){return k(m,r,t,f,x)};q.whenFalse=function(m,r,t,x){return g(m,r,t,h,x)};q.whenFalseOnce=function(m,r,t,x){return k(m,r,t,h,x)};q.whenDefined=function(m,r,t,x){return g(m,r,t,n,x)};q.whenDefinedOnce=function(m,r,t,x){return k(m,r,t,n,x)};q.whenUndefined=function(m,r,t,x){return g(m,r,t,p,x)};q.whenUndefinedOnce=
function(m,r,t,x){return k(m,r,t,p,x)};q.pausable=function(m,r,t,x){var v=!1,z=m.watch(r,function(A,B,u,w){v||t.call(m,A,B,u,w)},x);return{remove:function(){z.remove()},pause:function(){v=!0},resume:function(){v=!1}}};q.on=function(m,r,t,x,v,z,A){function B(D){var y=u[D];y&&(z&&z(y.target,D,m,t),y.handle.remove(),delete u[D])}var u={},w=l(m,r,function(D,y,C){B(C);D&&"function"===typeof D.on&&(u[C]={handle:D.on(t,x),target:D},v&&v(D,C,m,t))},A);return{remove:function(){w.remove();for(var D in u)B(D)}}}})},
"esri/layers/vectorTiles/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),function(F,q,a,b,e,g,k){function c(d){if("vector-tile"===d.service.type)var f=d.service.url+"/tilemap/"+d.level+"/"+d.row+"/"+d.col+"/"+d.width+"/"+d.height;else f=d.service.tileServers,f=(f&&f.length?f[d.row%f.length]:d.service.url)+"/tilemap/"+d.level+"/"+d.row+"/"+d.col+"/"+d.width+"/"+d.height;(d=
d.service.query)&&(f=f+"?"+d);return f}Object.defineProperty(q,"__esModule",{value:!0});F=function(){function d(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}d.prototype.getAvailability=function(f,h){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";var n=(f-this.location.top)*this.location.width+(h-this.location.left),p=n>>3,l=this._tileAvailabilityBitSet;return 0>p||p>l.length?"unknown":l[p]&1<<n%8?"available":"unavailable"};d.prototype._updateFromData=
function(f){for(var h=!0,n=!0,p=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),l=0,m=0;m<f.length;m++){var r=m%8;f[m]?(n=!1,p[l]|=1<<r):h=!1;7===r&&++l}this._isAllUnvailable=n;this._isAllAvailable=h;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=p,this.byteSize+=p.length)};d.fromDefinition=function(f,h){var n=f.service.request||b,p=f.row,l=f.col,m=f.width,r=f.height,t={query:{f:"json"},callbackParamName:"callback"};h=h?a({},t,h):t;return n(c(f),h).then(function(x){return x.data})["catch"](function(x){if(x&&
x.details&&422===x.details.httpStatus){x=[];for(var v=0,z=m*r;v<z;v++)x[v]=0;return{location:{top:p,left:l,width:m,height:r},valid:!0,data:x}}return k.reject(x)}).then(function(x){if(x.location&&(x.location.top!==p||x.location.left!==l||x.location.width!==m||x.location.height!==r))throw new e("tilemap:location-mismatch","Tilemap response for different location than requested",{response:x,definition:{top:p,left:l,width:m,height:r}});return d.fromJSON(x)})};d.fromJSON=function(f){d.validateJSON(f);
var h=new d;h.location=Object.freeze(g.clone(f.location));h._updateFromData(f.data);return Object.freeze(h)};d.validateJSON=function(f){if(!f||!f.location)throw new e("tilemap:missing-location","Location missing from tilemap response");if(!1===f.valid)throw new e("tilemap:invalid","Tilemap response was marked as invalid");if(!f.data)throw new e("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(f.data))throw new e("tilemap:data-mismatch","Data must be an array of numbers");
if(f.data.length!==f.location.width*f.location.height)throw new e("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return d}();q.Tilemap=F;q.tilemapDefinitionId=function(d){return d.level+"/"+d.row+"/"+d.col+"/"+d.width+"/"+d.height};q.tilemapDefinitionUrl=c;q["default"]=F})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(F,q,a,b){return function(){function e(g,k){this.styleJSON=
g;this.version=parseFloat(g.version);this.sprite=k?k.spriteUrl:g.sprite;this.glyphs=k?k.glyphsUrl:g.glyphs;if(a("stable-symbol-rendering")){var c=(g.layers||[]).filter(function(d){return d.layout&&d.layout["text-font"]})[0];c&&(g.layers||[]).forEach(function(d){d.layout&&d.layout["text-font"]&&(d.layout["text-font"]=c.layout["text-font"])})}this.layers=(g.layers||[]).map(e._create);this._identifyRefLayers()}e.prototype._identifyRefLayers=function(){for(var g=[],k=[],c=0,d=0,f=this.layers;d<f.length;d++){var h=
f[d];if(1===h.type){var n=h,p=h.sourceLayer;p+="|"+JSON.stringify(h.minzoom);p+="|"+JSON.stringify(h.maxzoom);p+="|"+JSON.stringify(h.filter);if(n.hasDataDrivenFill||n.hasDataDrivenOutline)p+="|"+JSON.stringify(c);g.push({key:p,layer:h})}2===h.type&&(n=h,p=h.sourceLayer,p+="|"+JSON.stringify(h.minzoom),p+="|"+JSON.stringify(h.maxzoom),p+="|"+JSON.stringify(h.filter),p+="|"+JSON.stringify(h.layout&&h.layout["line-cap"]),p+="|"+JSON.stringify(h.layout&&h.layout["line-join"]),n.hasDataDrivenLine&&(p+=
"|"+JSON.stringify(c)),k.push({key:p,layer:h}));++c}this._assignRefLayers(g);this._assignRefLayers(k)};e.prototype._assignRefLayers=function(g){g.sort(function(l,m){return l.key<m.key?-1:l.key>m.key?1:0});for(var k,c,d=g.length,f=0;f<d;f++){var h=g[f];if(h.key===k)h.layer.refLayerId=c;else if(k=h.key,c=h.layer.id,1===h.layer.type&&!h.layer.getPaintProperty("fill-outline-color"))for(var n=f+1;n<d;n++){var p=g[n];if(p.key===k){if(p.layer.getPaintProperty("fill-outline-color")){g[f]=p;g[n]=h;c=p.layer.id;
break}}else break}}};e._create=function(g,k,c){k=1-1/(c.length+1)*(1+k);switch(g.type){case "background":return new b.BackgroundStyleLayer(0,g,k);case "fill":return new b.FillStyleLayer(1,g,k);case "line":return new b.LineStyleLayer(2,g,k);case "symbol":return new b.SymbolStyleLayer(3,g,k);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new b.CircleStyleLayer(4,g,k)}throw Error("Unknown vector tile layer");};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),
function(F,q,a,b,e,g,k){Object.defineProperty(q,"__esModule",{value:!0});F=function(){function c(d,f,h){this.type=d;this.id=f.id;this.source=f.source;this.sourceLayer=f["source-layer"];this.minzoom=f.minzoom;this.maxzoom=f.maxzoom;this.filter=f.filter;this.layout=f.layout;this.paint=f.paint;this.z=h;switch(d){case 0:this._layoutDefinition=g.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=g.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=g.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=g.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=g.StyleDefinition.lineLayoutDefinition;this._paintDefinition=g.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=g.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=g.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=g.StyleDefinition.circleLayoutDefinition,this._paintDefinition=g.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}c.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=e.createFilter(this.filter)};c.prototype.getLayoutProperty=function(d){var f=this._layoutProperties;if(f)return f[d]};c.prototype.getPaintProperty=function(d){var f=this._paintProperties;if(f)return f[d]};c.prototype.getLayoutValue=function(d,f,h){var n,p=this._layoutProperties;p&&(p=p[d])&&(n=p.getValue(f,h));d=this._layoutDefinition[d];
void 0===n&&(n=d["default"]);"enum"===d.type&&(n=d.values.indexOf(n));return n};c.prototype.getPaintValue=function(d,f,h){var n,p=this._paintProperties;p&&(p=p[d])&&(n=p.getValue(f,h));d=this._paintDefinition[d];void 0===n&&(n=d["default"]);"enum"===d.type&&(n=d.values.indexOf(n));return n};c.prototype._parseLayout=function(d){var f={},h;for(h in d){var n=this._layoutDefinition[h];n&&(f[h]=new k(h,n,d[h]))}return f};c.prototype._parsePaint=function(d){var f={},h;for(h in d){var n=this._paintDefinition[h];
n&&(f[h]=new k(h,n,d[h]))}return f};return c}();q.StyleLayer=F;b=function(c){function d(f,h,n){return c.call(this,f,h,n)||this}a(d,c);return d}(F);q.BackgroundStyleLayer=b;b=function(c){function d(f,h,n){f=c.call(this,f,h,n)||this;h=f.getPaintProperty("fill-color");f.hasDataDrivenColor=h?h.isDataDriven:!1;h=f.getPaintProperty("fill-opacity");f.hasDataDrivenOpacity=h?h.isDataDriven:!1;f.hasDataDrivenFill=f.hasDataDrivenColor||f.hasDataDrivenOpacity;h=f.getPaintProperty("fill-outline-color");f.outlineUsesFillColor=
!h;f.hasDataDrivenOutlineColor=h?h.isDataDriven:!1;f.hasDataDrivenOutline=(h?f.hasDataDrivenOutlineColor:f.hasDataDrivenColor)||f.hasDataDrivenOpacity;return f}a(d,c);return d}(F);q.FillStyleLayer=b;b=function(c){function d(f,h,n){f=c.call(this,f,h,n)||this;h=f.getPaintProperty("line-color");f.hasDataDrivenColor=h?h.isDataDriven:!1;h=f.getPaintProperty("line-opacity");f.hasDataDrivenOpacity=h?h.isDataDriven:!1;h=f.getPaintProperty("line-width");f.hasDataDrivenWidth=h?h.isDataDriven:!1;f.hasDataDrivenLine=
f.hasDataDrivenColor||f.hasDataDrivenOpacity||f.hasDataDrivenWidth;return f}a(d,c);return d}(F);q.LineStyleLayer=b;b=function(c){function d(f,h,n){f=c.call(this,f,h,n)||this;h=f.getPaintProperty("icon-color");f.hasDataDrivenIconColor=h?h.isDataDriven:!1;h=f.getPaintProperty("icon-opacity");f.hasDataDrivenIconOpacity=h?h.isDataDriven:!1;h=f.getLayoutProperty("icon-size");f.hasDataDrivenIconSize=h?h.isDataDriven:!1;f.hasDataDrivenIcon=f.hasDataDrivenIconColor||f.hasDataDrivenIconOpacity||f.hasDataDrivenIconSize;
h=f.getPaintProperty("text-color");f.hasDataDrivenTextColor=h?h.isDataDriven:!1;h=f.getPaintProperty("text-opacity");f.hasDataDrivenTextOpacity=h?h.isDataDriven:!1;h=f.getLayoutProperty("text-size");f.hasDataDrivenTextSize=h?h.isDataDriven:!1;f.hasDataDrivenText=f.hasDataDrivenTextColor||f.hasDataDrivenTextOpacity||f.hasDataDrivenTextSize;return f}a(d,c);return d}(F);q.SymbolStyleLayer=b;F=function(c){function d(f,h,n){f=c.call(this,f,h,n)||this;h=f.getPaintProperty("circle-radius");f.hasDataDrivenRadius=
h?h.isDataDriven:!1;h=f.getPaintProperty("circle-color");f.hasDataDrivenColor=h?h.isDataDriven:!1;h=f.getPaintProperty("circle-opacity");f.hasDataDrivenOpacity=h?h.isDataDriven:!1;h=f.getPaintProperty("circle-stroke-width");f.hasDataDrivenStrokeWidth=h?h.isDataDriven:!1;h=f.getPaintProperty("circle-stroke-color");f.hasDataDrivenStrokeColor=h?h.isDataDriven:!1;h=f.getPaintProperty("circle-stroke-opacity");f.hasDataDrivenStrokeOpacity=h?h.isDataDriven:!1;h=f.getPaintProperty("circle-blur");f.hasDataDrivenBlur=
h?h.isDataDriven:!1;return f}a(d,c);return d}(F);q.CircleStyleLayer=F;F=function(){return function(c,d,f){this.cap=c.getLayoutValue("line-cap",d,f);this.join=c.getLayoutValue("line-join",d,f);this.miterLimit=c.getLayoutValue("line-miter-limit",d,f);this.roundLimit=c.getLayoutValue("line-round-limit",d,f)}}();q.LineLayout=F;F=function(){return function(c,d,f,h){this.allowOverlap=c.getLayoutValue("icon-allow-overlap",d,h);this.ignorePlacement=c.getLayoutValue("icon-ignore-placement",d,h);this.optional=
c.getLayoutValue("icon-optional",d,h);this.rotationAlignment=c.getLayoutValue("icon-rotation-alignment",d,h);this.size=c.getLayoutValue("icon-size",d,h);this.rotate=c.getLayoutValue("icon-rotate",d,h);this.padding=c.getLayoutValue("icon-padding",d,h);this.keepUpright=c.getLayoutValue("icon-keep-upright",d,h);this.offset=c.getLayoutValue("icon-offset",d,h);2===this.rotationAlignment&&(this.rotationAlignment=f?0:1)}}();q.IconLayout=F;F=function(){return function(c,d,f,h){this.allowOverlap=c.getLayoutValue("text-allow-overlap",
d,h);this.ignorePlacement=c.getLayoutValue("text-ignore-placement",d,h);this.optional=c.getLayoutValue("text-optional",d,h);this.rotationAlignment=c.getLayoutValue("text-rotation-alignment",d,h);this.fontArray=c.getLayoutValue("text-font",d,h);this.maxWidth=c.getLayoutValue("text-max-width",d,h);this.lineHeight=c.getLayoutValue("text-line-height",d,h);this.letterSpacing=c.getLayoutValue("text-letter-spacing",d,h);this.justify=c.getLayoutValue("text-justify",d,h);this.anchor=c.getLayoutValue("text-anchor",
d,h);this.maxAngle=c.getLayoutValue("text-max-angle",d,h);this.size=c.getLayoutValue("text-size",d,h);this.rotate=c.getLayoutValue("text-rotate",d,h);this.padding=c.getLayoutValue("text-padding",d,h);this.keepUpright=c.getLayoutValue("text-keep-upright",d,h);this.transform=c.getLayoutValue("text-transform",d,h);this.offset=c.getLayoutValue("text-offset",d,h);2===this.rotationAlignment&&(this.rotationAlignment=f?0:1)}}();q.TextLayout=F})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(F,q){return function(){function a(b,e,g){this._op=b;"$type"===e?(this._val=g instanceof Array?g.map(function(k){return a._types.indexOf(k)}):a._types.indexOf(g),this._op+=11):(this._key=e,this._val=g)}a.prototype.filter=function(b){switch(this._op){case 0:return this._val;case 1:return b.values[this._key]===this._val;case 2:return b.values[this._key]!==this._val;case 3:return b.values[this._key]<this._val;case 4:return b.values[this._key]>this._val;case 5:return b.values[this._key]<=
this._val;case 6:return b.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(b.values[this._key]);case 8:return-1===this._val.indexOf(b.values[this._key]);case 9:for(var e=0,g=this._val;e<g.length;e++){var k=g[e];if(k.filter(b))return!0}return!1;case 10:e=0;for(g=this._val;e<g.length;e++)if(k=g[e],!k.filter(b))return!1;return!0;case 11:e=0;for(g=this._val;e<g.length;e++)if(k=g[e],k.filter(b))return!1;return!0;case 12:return b.type===this._val;case 13:return b.type!==this._val;case 14:return b.type<
this._val;case 15:return b.type>this._val;case 16:return b.type>=this._val;case 17:return b.type<=this._val;case 18:return-1!==this._val.indexOf(b.type);case 19:return-1===this._val.indexOf(b.type);case 20:return void 0!==b.values[this._key];case 21:return void 0===b.values[this._key]}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var e=b[0];if(1>=b.length)return new a(0,void 0,"any"!==e);switch(e){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,
b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,b[1],b[2]);case "\x3c\x3d":return new a(5,b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));case "has":return new a(20,b[1],void 0);case "!has":return new a(21,
b[1],void 0);default:throw Error("invalid operator: "+e);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){function b(){}b.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};b.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],
"default":"visible"}};b.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};b.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point",
"line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",
minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number",
"default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",
values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};b.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};b.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color",
"default":[0,0,0,1]},"background-pattern":{type:"string"}};b.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};b.linePaintDefinition=
{"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number",
"default":[]},"line-pattern":{type:"string"}};b.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",
minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};b.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number",
"default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};b.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},
"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"circle-stroke-width":{type:"number",minimum:0,"default":0},"circle-stroke-color":{type:"color","default":[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,"default":1}};return b}();q.StyleDefinition=a})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require",
"exports","../../../Color","../GeometryUtils"],function(F,q,a,b){return function(){function e(g,k,c){this.isDataDriven=!1;switch(k.type){case "number":g=!0;break;case "color":g=!0;c=e._parseColor(c);break;case "array":g="number"===k.value;break;default:g=!1}null==c&&(c=k["default"]);g&&"interval"===c.type&&(g=!1);var d=c&&c.stops&&0<c.stops.length;if(d)for(var f=0,h=c.stops;f<h.length;f++){var n=h[f];n[1]=this._validate(n[1],k)}if(this.isDataDriven=c?!!c.property:!1)if(void 0!==c["default"]&&(c["default"]=
this._validate(c["default"],k)),d)switch(c.type){case "identity":this.getValue=this._buildIdentity(c,k);break;case "categorical":this.getValue=this._buildCategorical(c,k);break;default:this.getValue=g?this._buildInterpolate(c,k):this._buildInterval(c,k)}else this.getValue=this._buildIdentity(c,k);else d?this.getValue=g?this._buildZoomInterpolate(c):this._buildZoomInterval(c):(c=this._validate(c,k),this.getValue=this._buildSimple(c))}e.prototype._validate=function(g,k){if("number"===k.type){if(g<k.minimum)return k.minimum;
if(g>k.maximum)return k.maximum}return g};e.prototype._buildSimple=function(g){return function(){return g}};e.prototype._buildIdentity=function(g,k){var c=this;return function(d,f){if(f){var h=f.values[g.property];"color"===k.type&&(h=e._parseColor(h))}void 0===h&&(h=g["default"]);return void 0!==h?c._validate(h,k):k["default"]}};e.prototype._buildCategorical=function(g,k){var c=this;return function(d,f){var h;f&&(h=f.values[g.property]);h=c._categorical(h,g.stops);return void 0!==h?h:void 0!==g["default"]?
g["default"]:k["default"]}};e.prototype._buildInterval=function(g,k){var c=this;return function(d,f){var h;f&&(h=f.values[g.property]);return"number"===typeof h?c._interval(h,g.stops):void 0!==g["default"]?g["default"]:k["default"]}};e.prototype._buildInterpolate=function(g,k){var c=this;return function(d,f){var h;f&&(h=f.values[g.property]);return"number"===typeof h?c._interpolate(h,g.stops,g.base||1):void 0!==g["default"]?g["default"]:k["default"]}};e.prototype._buildZoomInterpolate=function(g){var k=
this;return function(c){return k._interpolate(c,g.stops,g.base||1)}};e.prototype._buildZoomInterval=function(g){var k=this;return function(c){return k._interval(c,g.stops)}};e.prototype._categorical=function(g,k){for(var c=k.length,d=0;d<c;d++)if(k[d][0]===g)return k[d][1]};e.prototype._interval=function(g,k){for(var c=k.length,d=0,f=0;f<c;f++)if(k[f][0]<=g)d=f;else break;return k[d][1]};e.prototype._interpolate=function(g,k,c){for(var d,f,h=k.length,n=0;n<h;n++){var p=k[n];if(p[0]<=g)d=p;else{f=
p;break}}if(d&&f){n=f[0]-d[0];g-=d[0];c=1===c?g/n:(Math.pow(c,g)-1)/(Math.pow(c,n)-1);if(Array.isArray(d[1])){d=d[1];f=f[1];g=[];for(n=0;n<d.length;n++)g.push(b.interpolate(d[n],f[n],c));return g}return b.interpolate(d[1],f[1],c)}if(d)return d[1];if(f)return f[1]};e._isEmpty=function(g){for(var k in g)if(g.hasOwnProperty(k))return!1;return!0};e._parseColor=function(g){if(Array.isArray(g))return g;if("string"===typeof g){if(g=new a(g),!this._isEmpty(g))return a.toUnitRGBA(g)}else return g&&g["default"]&&
(g["default"]=e._parseColor(g["default"])),g&&g.stops&&(g.stops=g.stops.map(function(k){return[k[0],e._parseColor(k[1])]})),g};return e}()})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(F,q,a){function b(k){return Math.max(0,Math.min(q.ensureInteger(k),255))}var e=F([a],{declaredClass:"esri.Color",toJSON:function(){return[b(this.r),b(this.g),b(this.b),1<this.a?this.a:b(255*this.a)]},clone:function(){return new e(this.toRgba())}});
e.toJSON=function(k){return k&&[b(k.r),b(k.g),b(k.b),1<k.a?k.a:b(255*k.a)]};e.fromJSON=function(k){return k&&new e([k[0],k[1],k[2],k[3]/255])};e.toUnitRGB=function(k){return[k.r/255,k.g/255,k.b/255]};e.toUnitRGBA=function(k){return[k.r/255,k.g/255,k.b/255,null!=k.a?k.a:1]};var g="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(F=0;F<g.length;F++)e[g[F]]=a[g[F]];e.named.rebeccapurple=[102,51,153];return e})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color",
"./_base/array"],function(F,q,a,b){var e={};q.setObject("dojo.colors",e);var g=function(c,d,f){0>f&&++f;1<f&&--f;var h=6*f;return 1>h?c+(d-c)*h:1>2*f?d:2>3*f?c+(d-c)*(2/3-f)*6:c};F.colorFromRgb=a.fromRgb=function(c,d){var f=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(f){var h=f[2].split(/\s*,\s*/),n=h.length;f=f[1];if("rgb"==f&&3==n||"rgba"==f&&4==n)return f=h[0],"%"==f.charAt(f.length-1)?(f=b.map(h,function(m){return 2.56*parseFloat(m)}),4==n&&(f[3]=h[3]),a.fromArray(f,d)):a.fromArray(h,
d);if("hsl"==f&&3==n||"hsla"==f&&4==n){f=(parseFloat(h[0])%360+360)%360/360;var p=parseFloat(h[1])/100,l=parseFloat(h[2])/100;p=.5>=l?l*(p+1):l+p-l*p;l=2*l-p;f=[256*g(l,p,f+1/3),256*g(l,p,f),256*g(l,p,f-1/3),1];4==n&&(f[3]=h[3]);return a.fromArray(f,d)}}return null};var k=function(c,d,f){c=Number(c);return isNaN(c)?f:c<d?d:c>f?f:c};a.prototype.sanitize=function(){this.r=Math.round(k(this.r,0,255));this.g=Math.round(k(this.g,0,255));this.b=Math.round(k(this.b,0,255));this.a=k(this.a,0,1);return this};
e.makeGrey=a.makeGrey=function(c,d){return a.fromArray([c,c,c,d])};q.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,
105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],
lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,
85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,
112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,
191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(F,q){function a(e,g){e%=g;return 0<=e?e:e+g}Object.defineProperty(q,"__esModule",{value:!0});q.C_INFINITY=Number.POSITIVE_INFINITY;q.C_PI=Math.PI;q.C_2PI=2*q.C_PI;q.C_PI_BY_2=q.C_PI/2;q.C_RAD_TO_256=128/q.C_PI;q.C_256_TO_RAD=q.C_PI/128;q.C_DEG_TO_256=
256/360;q.C_DEG_TO_RAD=q.C_PI/180;q.C_SQRT2=1.414213562;q.C_SQRT2_INV=1/q.C_SQRT2;var b=1/Math.LN2;q.positiveMod=a;q.radToByte=function(e){return a(e*q.C_RAD_TO_256,256)};q.degToByte=function(e){return a(e*q.C_DEG_TO_256,256)};q.log2=function(e){return Math.log(e)*b};q.sqr=function(e){return e*e};q.clamp=function(e,g,k){return Math.min(Math.max(e,g),k)};q.interpolate=function(e,g,k){return e*(1-k)+g*k};q.between=function(e,g,k){return e>=g&&e<=k||e>=k&&e<=g}})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/promiseUtils ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec3 ../2d/engine/Container ../2d/engine/webgl/enums ../2d/engine/webgl/WGLPainter ./GeometryUtils ./renderers/Renderer".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n){return function(p){function l(){var m=p.call(this)||this;m.isInitialized=!1;m._displayWidth=0;m._displayHeight=0;m._pointToCallbacks=new Map;m._tileCoordinateScale=k.create();m._orientationVec=k.create();m._displayScale=k.create();m._orientationVec.set([0,0,1]);m._defaultTransform=g.create();return m}a(l,p);l.prototype.initialize=function(m,r,t,x){this._renderer=new n;this._renderer.initialize(m,r);this._tileInfoView=x;this._tileInfo=t;this.isInitialized=!0};l.prototype.destroy=
function(){this._renderer&&(this._renderer.dispose(),this._renderer=null)};l.prototype.hittest=function(m,r){var t=this,x=[m,r];return e.create(function(v,z){t._pointToCallbacks.set(x,{resolve:v,reject:z});t.requestRender()},function(){t._pointToCallbacks.has(x)&&t._pointToCallbacks["delete"](x)})};l.prototype.prepareChildrenRenderParameters=function(m){var r=m.state;if(!r||!this._tileInfo||!this.isInitialized)return m;m.displayLevel=this._tileInfo.scaleToZoom(r.scale);m.requiredLevel=this._tileInfoView.getSmallestInfoForScale(r.scale).level;
m.renderer=this._renderer;return m};l.prototype.renderChildren=function(m){var r=this;if(0!==this.children.length&&this.isInitialized&&m&&m.state){var t=f["default"].toWGLDrawPhases(m.drawPhase);if(!(0<t.length&&t[0]===d.WGLDrawPhase.LABEL)){this.sortChildren(function(A,B){return A.key.level-B.key.level});t=this.children.length;for(var x=1;x<=t;x++){var v=this.children[x-1];v.attached&&(v.stencilData.reference=x,v.stencilData.mask=255)}this._updateTilesTransform(m.state,this._tileInfoView.getSmallestInfoForScale(m.state.scale).level,
this.children);t=m.context;t.setDepthWriteEnabled(!0);this._renderer.setStateParams(m.state,m.pixelRatio,m.displayLevel);this._renderer.drawClippingMasks(t,this.children);t.setStencilWriteMask(0);t.setBlendFunctionSeparate(1,771,1,771);t.setStencilOp(7680,7680,7681);t.setDepthFunction(515);t.setBlendingEnabled(!1);t.setStencilTestEnabled(!0);t.setDepthTestEnabled(!0);t.setDepthWriteEnabled(!0);m.drawphase=0;p.prototype.renderChildren.call(this,m);t.setDepthWriteEnabled(!1);t.setBlendingEnabled(!0);
m.drawphase=1;p.prototype.renderChildren.call(this,m);m.drawphase=2;p.prototype.renderChildren.call(this,m);t.setStencilTestEnabled(!1);t.setDepthTestEnabled(!1);if(b("esri-vector-tiles-debug"))for(x=0,v=this.children;x<v.length;x++){var z=v[x];z.attached&&z.visible&&this._renderer.renderTileInfo(t,z)}0<this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(A,B){A.resolve(r._hitTest(m,B[0],B[1]))}),this._pointToCallbacks.clear());this._renderer.needsRedraw()&&this.requestRender()}}};
l.prototype.removeAllChildren=function(){for(var m=0;m<this.children.length;m++)this.children[m].dispose();p.prototype.removeAllChildren.call(this)};l.prototype._hitTest=function(m,r,t){var x=this._tileInfoView.getClosestInfoForScale(m.state.scale).level,v=[0,0];m.state.toMap(v,[r,t]);var z=m.state.clone(),A=z.viewpoint.clone(),B=A.targetGeometry;B.x=v[0];B.y=v[1];A.targetGeometry=B;z.viewpoint=A;z.size=[3,3];this._renderer.setStateParams(z,m.pixelRatio,m.displayLevel);return(m=this._renderer.hitTest({drawPhase:0,
pixelRatio:m.pixelRatio,stationary:m.stationary,opacity:m.opacity,context:m.context,displayLevel:m.displayLevel,requiredLevel:m.requiredLevel,renderer:m.renderer,layerOpacity:m.layerOpacity,state:z,drawphase:3,painter:null},r,t,this.children,x,3,this._updateTilesTransform.bind(this)))&&0!==m.length?m[0]:null};l.prototype._updateTilesTransform=function(m,r,t){var x=1/m.width,v=1/m.height,z=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(r).resolution,m.resolution,m.rotation,this._tileInfo.size[1],
4096,m.width,m.height,this._defaultTransform);for(var A=0;A<t.length;A++){var B=t[A];m.toScreen(z,B.coords);z[1]=m.height-z[1];B.tileTransform.displayCoord[0]=2*z[0]*x-1;B.tileTransform.displayCoord[1]=2*z[1]*v-1;B.key.level===r&&4096===B.coordRange?B.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(B.key.level).resolution,m.resolution,m.rotation,this._tileInfo.size[1],B.coordRange,m.width,m.height,B.tileTransform.transform)}};l.prototype._calculateRelativeViewProjMat=
function(m,r,t,x,v,z,A,B){var u=.125;512!==x&&4096!==v&&(u=x/v);m=m/r*u;this._tileCoordinateScale.set([m,m,1]);if(z!==this._displayWidth||A!==this._displayHeight)this._displayScale.set([2/z,-2/A,1]),this._displayWidth=z,this._displayHeight=A;g.identity(B);g.scale(B,B,this._tileCoordinateScale);g.rotate(B,B,-t*h.C_DEG_TO_RAD,this._orientationVec);g.scale(B,B,this._displayScale);g.transpose(B,B)};return l}(c)})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(F){var q=
{scalar:{},SIMD:{},create:function(){var a=new F.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new F.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=
b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x){var v=new F.ARRAY_TYPE(16);v[0]=a;v[1]=b;v[2]=e;v[3]=g;v[4]=k;v[5]=c;v[6]=d;v[7]=f;v[8]=h;v[9]=n;v[10]=p;v[11]=l;v[12]=m;v[13]=r;v[14]=t;v[15]=x;return v},set:function(a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v){a[0]=b;a[1]=e;a[2]=g;a[3]=k;a[4]=c;a[5]=d;a[6]=f;a[7]=h;a[8]=n;a[9]=p;a[10]=l;a[11]=m;a[12]=r;a[13]=t;a[14]=x;a[15]=v;return a},
identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};q.scalar.transpose=function(a,b){if(a===b){var e=b[1],g=b[2],k=b[3],c=b[6],d=b[7],f=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=e;a[6]=b[9];a[7]=b[13];a[8]=g;a[9]=c;a[11]=b[14];a[12]=k;a[13]=d;a[14]=f}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],
a[14]=b[11],a[15]=b[15];return a};q.SIMD.transpose=function(a,b){var e=SIMD.Float32x4.load(b,0);var g=SIMD.Float32x4.load(b,4);var k=SIMD.Float32x4.load(b,8);var c=SIMD.Float32x4.load(b,12);var d=SIMD.Float32x4.shuffle(e,g,0,1,4,5);var f=SIMD.Float32x4.shuffle(k,c,0,1,4,5);var h=SIMD.Float32x4.shuffle(d,f,0,2,4,6);d=SIMD.Float32x4.shuffle(d,f,1,3,5,7);SIMD.Float32x4.store(a,0,h);SIMD.Float32x4.store(a,4,d);d=SIMD.Float32x4.shuffle(e,g,2,3,6,7);f=SIMD.Float32x4.shuffle(k,c,2,3,6,7);e=SIMD.Float32x4.shuffle(d,
f,0,2,4,6);g=SIMD.Float32x4.shuffle(d,f,1,3,5,7);SIMD.Float32x4.store(a,8,e);SIMD.Float32x4.store(a,12,g);return a};q.transpose=F.USE_SIMD?q.SIMD.transpose:q.scalar.transpose;q.scalar.invert=function(a,b){var e=b[0],g=b[1],k=b[2],c=b[3],d=b[4],f=b[5],h=b[6],n=b[7],p=b[8],l=b[9],m=b[10],r=b[11],t=b[12],x=b[13],v=b[14],z=b[15],A=e*f-g*d,B=e*h-k*d,u=e*n-c*d,w=g*h-k*f,D=g*n-c*f,y=k*n-c*h,C=p*x-l*t,G=p*v-m*t,I=p*z-r*t,O=l*v-m*x,R=l*z-r*x,Z=m*z-r*v,W=A*Z-B*R+u*O+w*I-D*G+y*C;if(!W)return null;W=1/W;a[0]=
(f*Z-h*R+n*O)*W;a[1]=(k*R-g*Z-c*O)*W;a[2]=(x*y-v*D+z*w)*W;a[3]=(m*D-l*y-r*w)*W;a[4]=(h*I-d*Z-n*G)*W;a[5]=(e*Z-k*I+c*G)*W;a[6]=(v*u-t*y-z*B)*W;a[7]=(p*y-m*u+r*B)*W;a[8]=(d*R-f*I+n*C)*W;a[9]=(g*I-e*R-c*C)*W;a[10]=(t*D-x*u+z*A)*W;a[11]=(l*u-p*D-r*A)*W;a[12]=(f*G-d*O-h*C)*W;a[13]=(e*O-g*G+k*C)*W;a[14]=(x*B-t*w-v*A)*W;a[15]=(p*w-l*B+m*A)*W;return a};q.SIMD.invert=function(a,b){var e=SIMD.Float32x4.load(b,0);var g=SIMD.Float32x4.load(b,4);var k=SIMD.Float32x4.load(b,8);var c=SIMD.Float32x4.load(b,12);var d=
SIMD.Float32x4.shuffle(e,g,0,1,4,5);var f=SIMD.Float32x4.shuffle(k,c,0,1,4,5);var h=SIMD.Float32x4.shuffle(d,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,d,1,3,5,7);d=SIMD.Float32x4.shuffle(e,g,2,3,6,7);var n=SIMD.Float32x4.shuffle(k,c,2,3,6,7);var p=SIMD.Float32x4.shuffle(d,n,0,2,4,6);n=SIMD.Float32x4.shuffle(n,d,1,3,5,7);d=SIMD.Float32x4.mul(p,n);d=SIMD.Float32x4.swizzle(d,1,0,3,2);e=SIMD.Float32x4.mul(f,d);g=SIMD.Float32x4.mul(h,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,
d),e);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,d),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);d=SIMD.Float32x4.mul(f,p);d=SIMD.Float32x4.swizzle(d,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,d),e);c=SIMD.Float32x4.mul(h,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(n,d));c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,d),c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,3,0,1),n);d=SIMD.Float32x4.swizzle(d,1,0,3,2);p=SIMD.Float32x4.swizzle(p,
2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,d),e);k=SIMD.Float32x4.mul(h,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(p,d));k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,d),k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);d=SIMD.Float32x4.mul(h,f);d=SIMD.Float32x4.swizzle(d,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,d),k);c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,d),c);d=SIMD.Float32x4.swizzle(d,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,d),k);c=SIMD.Float32x4.sub(c,
SIMD.Float32x4.mul(p,d));d=SIMD.Float32x4.mul(h,n);d=SIMD.Float32x4.swizzle(d,1,0,3,2);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(p,d));k=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),k);d=SIMD.Float32x4.swizzle(d,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,d),g);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(f,d));d=SIMD.Float32x4.mul(h,p);d=SIMD.Float32x4.swizzle(d,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,d),g);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(f,d));d=SIMD.Float32x4.swizzle(d,2,
3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(n,d));c=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),c);h=SIMD.Float32x4.mul(h,e);h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h);h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h);d=SIMD.Float32x4.reciprocalApproximation(h);h=SIMD.Float32x4.sub(SIMD.Float32x4.add(d,d),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(d,d)));h=SIMD.Float32x4.swizzle(h,0,0,0,0);if(!h)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(h,e));SIMD.Float32x4.store(a,
4,SIMD.Float32x4.mul(h,g));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(h,k));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(h,c));return a};q.invert=F.USE_SIMD?q.SIMD.invert:q.scalar.invert;q.scalar.adjoint=function(a,b){var e=b[0],g=b[1],k=b[2],c=b[3],d=b[4],f=b[5],h=b[6],n=b[7],p=b[8],l=b[9],m=b[10],r=b[11],t=b[12],x=b[13],v=b[14],z=b[15];a[0]=f*(m*z-r*v)-l*(h*z-n*v)+x*(h*r-n*m);a[1]=-(g*(m*z-r*v)-l*(k*z-c*v)+x*(k*r-c*m));a[2]=g*(h*z-n*v)-f*(k*z-c*v)+x*(k*n-c*h);a[3]=-(g*(h*r-n*m)-f*(k*r-c*m)+l*(k*
n-c*h));a[4]=-(d*(m*z-r*v)-p*(h*z-n*v)+t*(h*r-n*m));a[5]=e*(m*z-r*v)-p*(k*z-c*v)+t*(k*r-c*m);a[6]=-(e*(h*z-n*v)-d*(k*z-c*v)+t*(k*n-c*h));a[7]=e*(h*r-n*m)-d*(k*r-c*m)+p*(k*n-c*h);a[8]=d*(l*z-r*x)-p*(f*z-n*x)+t*(f*r-n*l);a[9]=-(e*(l*z-r*x)-p*(g*z-c*x)+t*(g*r-c*l));a[10]=e*(f*z-n*x)-d*(g*z-c*x)+t*(g*n-c*f);a[11]=-(e*(f*r-n*l)-d*(g*r-c*l)+p*(g*n-c*f));a[12]=-(d*(l*v-m*x)-p*(f*v-h*x)+t*(f*m-h*l));a[13]=e*(l*v-m*x)-p*(g*v-k*x)+t*(g*m-k*l);a[14]=-(e*(f*v-h*x)-d*(g*v-k*x)+t*(g*h-k*f));a[15]=e*(f*m-h*l)-d*
(g*m-k*l)+p*(g*h-k*f);return a};q.SIMD.adjoint=function(a,b){var e=SIMD.Float32x4.load(b,0);var g=SIMD.Float32x4.load(b,4);var k=SIMD.Float32x4.load(b,8);var c=SIMD.Float32x4.load(b,12);var d=SIMD.Float32x4.shuffle(e,g,0,1,4,5);var f=SIMD.Float32x4.shuffle(k,c,0,1,4,5);var h=SIMD.Float32x4.shuffle(d,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,d,1,3,5,7);d=SIMD.Float32x4.shuffle(e,g,2,3,6,7);g=SIMD.Float32x4.shuffle(k,c,2,3,6,7);e=SIMD.Float32x4.shuffle(d,g,0,2,4,6);g=SIMD.Float32x4.shuffle(g,d,1,3,5,7);
d=SIMD.Float32x4.mul(e,g);d=SIMD.Float32x4.swizzle(d,1,0,3,2);k=SIMD.Float32x4.mul(f,d);c=SIMD.Float32x4.mul(h,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,d),k);c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,d),c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.mul(f,e);d=SIMD.Float32x4.swizzle(d,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,d),k);var n=SIMD.Float32x4.mul(h,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(g,
d));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,d),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);d=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,3,0,1),g);d=SIMD.Float32x4.swizzle(d,1,0,3,2);e=SIMD.Float32x4.swizzle(e,2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,d),k);var p=SIMD.Float32x4.mul(h,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,d));p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,d),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);d=SIMD.Float32x4.mul(h,f);d=SIMD.Float32x4.swizzle(d,
1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,d),p);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,d),n);d=SIMD.Float32x4.swizzle(d,2,3,0,1);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,d),p);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(e,d));d=SIMD.Float32x4.mul(h,g);d=SIMD.Float32x4.swizzle(d,1,0,3,2);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,d));p=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),p);d=SIMD.Float32x4.swizzle(d,2,3,0,1);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,d),c);p=SIMD.Float32x4.sub(p,
SIMD.Float32x4.mul(f,d));d=SIMD.Float32x4.mul(h,e);d=SIMD.Float32x4.swizzle(d,1,0,3,2);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,d),c);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(f,d));d=SIMD.Float32x4.swizzle(d,2,3,0,1);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(g,d));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),n);SIMD.Float32x4.store(a,0,k);SIMD.Float32x4.store(a,4,c);SIMD.Float32x4.store(a,8,p);SIMD.Float32x4.store(a,12,n);return a};q.adjoint=F.USE_SIMD?q.SIMD.adjoint:q.scalar.adjoint;q.determinant=
function(a){var b=a[0],e=a[1],g=a[2],k=a[3],c=a[4],d=a[5],f=a[6],h=a[7],n=a[8],p=a[9],l=a[10],m=a[11],r=a[12],t=a[13],x=a[14];a=a[15];return(b*d-e*c)*(l*a-m*x)-(b*f-g*c)*(p*a-m*t)+(b*h-k*c)*(p*x-l*t)+(e*f-g*d)*(n*a-m*r)-(e*h-k*d)*(n*x-l*r)+(g*h-k*f)*(n*t-p*r)};q.SIMD.multiply=function(a,b,e){var g=SIMD.Float32x4.load(b,0),k=SIMD.Float32x4.load(b,4),c=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var d=SIMD.Float32x4.load(e,0);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,
0,0,0,0),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),c),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),b))));SIMD.Float32x4.store(a,0,d);d=SIMD.Float32x4.load(e,4);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),c),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),b))));SIMD.Float32x4.store(a,4,d);d=SIMD.Float32x4.load(e,8);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),c),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),b))));SIMD.Float32x4.store(a,8,d);e=SIMD.Float32x4.load(e,12);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,
0,0,0,0),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),c),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),b))));SIMD.Float32x4.store(a,12,g);return a};q.scalar.multiply=function(a,b,e){var g=b[0],k=b[1],c=b[2],d=b[3],f=b[4],h=b[5],n=b[6],p=b[7],l=b[8],m=b[9],r=b[10],t=b[11],x=b[12],v=b[13],z=b[14];b=b[15];var A=e[0],B=e[1],u=e[2],w=e[3];a[0]=A*g+B*f+u*l+w*x;a[1]=A*k+B*h+u*m+w*v;a[2]=A*c+B*
n+u*r+w*z;a[3]=A*d+B*p+u*t+w*b;A=e[4];B=e[5];u=e[6];w=e[7];a[4]=A*g+B*f+u*l+w*x;a[5]=A*k+B*h+u*m+w*v;a[6]=A*c+B*n+u*r+w*z;a[7]=A*d+B*p+u*t+w*b;A=e[8];B=e[9];u=e[10];w=e[11];a[8]=A*g+B*f+u*l+w*x;a[9]=A*k+B*h+u*m+w*v;a[10]=A*c+B*n+u*r+w*z;a[11]=A*d+B*p+u*t+w*b;A=e[12];B=e[13];u=e[14];w=e[15];a[12]=A*g+B*f+u*l+w*x;a[13]=A*k+B*h+u*m+w*v;a[14]=A*c+B*n+u*r+w*z;a[15]=A*d+B*p+u*t+w*b;return a};q.multiply=F.USE_SIMD?q.SIMD.multiply:q.scalar.multiply;q.mul=q.multiply;q.scalar.translate=function(a,b,e){var g=
e[0],k=e[1];e=e[2];if(b===a)a[12]=b[0]*g+b[4]*k+b[8]*e+b[12],a[13]=b[1]*g+b[5]*k+b[9]*e+b[13],a[14]=b[2]*g+b[6]*k+b[10]*e+b[14],a[15]=b[3]*g+b[7]*k+b[11]*e+b[15];else{var c=b[0];var d=b[1];var f=b[2];var h=b[3];var n=b[4];var p=b[5];var l=b[6];var m=b[7];var r=b[8];var t=b[9];var x=b[10];var v=b[11];a[0]=c;a[1]=d;a[2]=f;a[3]=h;a[4]=n;a[5]=p;a[6]=l;a[7]=m;a[8]=r;a[9]=t;a[10]=x;a[11]=v;a[12]=c*g+n*k+r*e+b[12];a[13]=d*g+p*k+t*e+b[13];a[14]=f*g+l*k+x*e+b[14];a[15]=h*g+m*k+v*e+b[15]}return a};q.SIMD.translate=
function(a,b,e){var g=SIMD.Float32x4.load(b,0),k=SIMD.Float32x4.load(b,4),c=SIMD.Float32x4.load(b,8),d=SIMD.Float32x4.load(b,12);e=SIMD.Float32x4(e[0],e[1],e[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);g=SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(e,0,0,0,0));k=SIMD.Float32x4.mul(k,SIMD.Float32x4.swizzle(e,1,1,1,1));c=SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(e,2,2,2,2));b=SIMD.Float32x4.add(g,SIMD.Float32x4.add(k,
SIMD.Float32x4.add(c,d)));SIMD.Float32x4.store(a,12,b);return a};q.translate=F.USE_SIMD?q.SIMD.translate:q.scalar.translate;q.scalar.scale=function(a,b,e){var g=e[0],k=e[1];e=e[2];a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*k;a[5]=b[5]*k;a[6]=b[6]*k;a[7]=b[7]*k;a[8]=b[8]*e;a[9]=b[9]*e;a[10]=b[10]*e;a[11]=b[11]*e;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};q.SIMD.scale=function(a,b,e){e=SIMD.Float32x4(e[0],e[1],e[2],0);var g=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,
0,SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(e,0,0,0,0)));g=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(e,1,1,1,1)));g=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(e,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};q.scale=F.USE_SIMD?q.SIMD.scale:q.scalar.scale;q.rotate=function(a,b,e,g){var k=g[0],c=g[1];g=g[2];var d=Math.sqrt(k*k+c*c+g*g);if(Math.abs(d)<F.EPSILON)return null;d=
1/d;k*=d;c*=d;g*=d;var f=Math.sin(e);var h=Math.cos(e);var n=1-h;e=b[0];d=b[1];var p=b[2];var l=b[3];var m=b[4];var r=b[5];var t=b[6];var x=b[7];var v=b[8];var z=b[9];var A=b[10];var B=b[11];var u=k*k*n+h;var w=c*k*n+g*f;var D=g*k*n-c*f;var y=k*c*n-g*f;var C=c*c*n+h;var G=g*c*n+k*f;var I=k*g*n+c*f;k=c*g*n-k*f;c=g*g*n+h;a[0]=e*u+m*w+v*D;a[1]=d*u+r*w+z*D;a[2]=p*u+t*w+A*D;a[3]=l*u+x*w+B*D;a[4]=e*y+m*C+v*G;a[5]=d*y+r*C+z*G;a[6]=p*y+t*C+A*G;a[7]=l*y+x*C+B*G;a[8]=e*I+m*k+v*c;a[9]=d*I+r*k+z*c;a[10]=p*I+
t*k+A*c;a[11]=l*I+x*k+B*c;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};q.scalar.rotateX=function(a,b,e){var g=Math.sin(e);e=Math.cos(e);var k=b[4],c=b[5],d=b[6],f=b[7],h=b[8],n=b[9],p=b[10],l=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=k*e+h*g;a[5]=c*e+n*g;a[6]=d*e+p*g;a[7]=f*e+l*g;a[8]=h*e-k*g;a[9]=n*e-c*g;a[10]=p*e-d*g;a[11]=l*e-f*g;return a};q.SIMD.rotateX=function(a,b,e){var g=SIMD.Float32x4.splat(Math.sin(e));
e=SIMD.Float32x4.splat(Math.cos(e));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var k=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),SIMD.Float32x4.mul(b,g)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),SIMD.Float32x4.mul(k,g)));return a};q.rotateX=F.USE_SIMD?q.SIMD.rotateX:q.scalar.rotateX;q.scalar.rotateY=function(a,b,e){var g=Math.sin(e);e=Math.cos(e);
var k=b[0],c=b[1],d=b[2],f=b[3],h=b[8],n=b[9],p=b[10],l=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=k*e-h*g;a[1]=c*e-n*g;a[2]=d*e-p*g;a[3]=f*e-l*g;a[8]=k*g+h*e;a[9]=c*g+n*e;a[10]=d*g+p*e;a[11]=f*g+l*e;return a};q.SIMD.rotateY=function(a,b,e){var g=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var k=SIMD.Float32x4.load(b,
0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,e),SIMD.Float32x4.mul(b,g)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,g),SIMD.Float32x4.mul(b,e)));return a};q.rotateY=F.USE_SIMD?q.SIMD.rotateY:q.scalar.rotateY;q.scalar.rotateZ=function(a,b,e){var g=Math.sin(e);e=Math.cos(e);var k=b[0],c=b[1],d=b[2],f=b[3],h=b[4],n=b[5],p=b[6],l=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);
a[0]=k*e+h*g;a[1]=c*e+n*g;a[2]=d*e+p*g;a[3]=f*e+l*g;a[4]=h*e-k*g;a[5]=n*e-c*g;a[6]=p*e-d*g;a[7]=l*e-f*g;return a};q.SIMD.rotateZ=function(a,b,e){var g=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var k=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),SIMD.Float32x4.mul(b,g)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,
e),SIMD.Float32x4.mul(k,g)));return a};q.rotateZ=F.USE_SIMD?q.SIMD.rotateZ:q.scalar.rotateZ;q.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};q.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromRotation=function(a,b,e){var g=e[0],k=e[1];e=e[2];var c=Math.sqrt(g*g+
k*k+e*e);if(Math.abs(c)<F.EPSILON)return null;c=1/c;g*=c;k*=c;e*=c;c=Math.sin(b);b=Math.cos(b);var d=1-b;a[0]=g*g*d+b;a[1]=k*g*d+e*c;a[2]=e*g*d-k*c;a[3]=0;a[4]=g*k*d-e*c;a[5]=k*k*d+b;a[6]=e*k*d+g*c;a[7]=0;a[8]=g*e*d+k*c;a[9]=k*e*d-g*c;a[10]=e*e*d+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromXRotation=function(a,b){var e=Math.sin(b),g=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=e;a[7]=0;a[8]=0;a[9]=-e;a[10]=g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromYRotation=
function(a,b){var e=Math.sin(b),g=Math.cos(b);a[0]=g;a[1]=0;a[2]=-e;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=e;a[9]=0;a[10]=g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromZRotation=function(a,b){var e=Math.sin(b),g=Math.cos(b);a[0]=g;a[1]=e;a[2]=0;a[3]=0;a[4]=-e;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromRotationTranslation=function(a,b,e){var g=b[0],k=b[1],c=b[2],d=b[3],f=g+g,h=k+k,n=c+c;b=g*f;var p=g*h;g*=n;var l=k*h;k*=n;c*=n;f*=
d;h*=d;d*=n;a[0]=1-(l+c);a[1]=p+d;a[2]=g-h;a[3]=0;a[4]=p-d;a[5]=1-(b+c);a[6]=k+f;a[7]=0;a[8]=g+h;a[9]=k-f;a[10]=1-(b+l);a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a};q.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};q.getRotation=function(a,b){var e=b[0]+b[5]+b[10],g=0;0<e?(g=2*Math.sqrt(e+1),a[3]=.25*g,a[0]=(b[6]-b[9])/g,a[1]=(b[8]-b[2])/g,a[2]=(b[1]-b[4])/g):b[0]>b[5]&b[0]>b[10]?(g=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/g,a[0]=.25*g,a[1]=(b[1]+b[4])/
g,a[2]=(b[8]+b[2])/g):b[5]>b[10]?(g=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/g,a[0]=(b[1]+b[4])/g,a[1]=.25*g,a[2]=(b[6]+b[9])/g):(g=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/g,a[0]=(b[8]+b[2])/g,a[1]=(b[6]+b[9])/g,a[2]=.25*g);return a};q.fromRotationTranslationScale=function(a,b,e,g){var k=b[0],c=b[1],d=b[2],f=b[3],h=k+k,n=c+c,p=d+d;b=k*h;var l=k*n;k*=p;var m=c*n;c*=p;d*=p;h*=f;n*=f;f*=p;p=g[0];var r=g[1];g=g[2];a[0]=(1-(m+d))*p;a[1]=(l+f)*p;a[2]=(k-n)*p;a[3]=0;a[4]=(l-f)*r;a[5]=(1-(b+
d))*r;a[6]=(c+h)*r;a[7]=0;a[8]=(k+n)*g;a[9]=(c-h)*g;a[10]=(1-(b+m))*g;a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a};q.fromRotationTranslationScaleOrigin=function(a,b,e,g,k){var c=b[0],d=b[1],f=b[2],h=b[3],n=c+c,p=d+d,l=f+f;b=c*n;var m=c*p;c*=l;var r=d*p;d*=l;f*=l;n*=h;p*=h;h*=l;l=g[0];var t=g[1];g=g[2];var x=k[0],v=k[1];k=k[2];a[0]=(1-(r+f))*l;a[1]=(m+h)*l;a[2]=(c-p)*l;a[3]=0;a[4]=(m-h)*t;a[5]=(1-(b+f))*t;a[6]=(d+n)*t;a[7]=0;a[8]=(c+p)*g;a[9]=(d-n)*g;a[10]=(1-(b+r))*g;a[11]=0;a[12]=e[0]+
x-(a[0]*x+a[4]*v+a[8]*k);a[13]=e[1]+v-(a[1]*x+a[5]*v+a[9]*k);a[14]=e[2]+k-(a[2]*x+a[6]*v+a[10]*k);a[15]=1;return a};q.fromQuat=function(a,b){var e=b[0],g=b[1],k=b[2],c=b[3],d=e+e,f=g+g,h=k+k;e*=d;var n=g*d;g*=f;var p=k*d,l=k*f;k*=h;d*=c;f*=c;c*=h;a[0]=1-g-k;a[1]=n+c;a[2]=p-f;a[3]=0;a[4]=n-c;a[5]=1-e-k;a[6]=l+d;a[7]=0;a[8]=p+f;a[9]=l-d;a[10]=1-e-g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.frustum=function(a,b,e,g,k,c,d){var f=1/(e-b),h=1/(k-g),n=1/(c-d);a[0]=2*c*f;a[1]=0;a[2]=0;a[3]=0;a[4]=
0;a[5]=2*c*h;a[6]=0;a[7]=0;a[8]=(e+b)*f;a[9]=(k+g)*h;a[10]=(d+c)*n;a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c*2*n;a[15]=0;return a};q.perspective=function(a,b,e,g,k){b=1/Math.tan(b/2);var c=1/(g-k);a[0]=b/e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(k+g)*c;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*k*g*c;a[15]=0;return a};q.perspectiveFromFieldOfView=function(a,b,e,g){var k=Math.tan(b.upDegrees*Math.PI/180),c=Math.tan(b.downDegrees*Math.PI/180),d=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*
Math.PI/180);var f=2/(d+b),h=2/(k+c);a[0]=f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=0;a[7]=0;a[8]=-((d-b)*f*.5);a[9]=(k-c)*h*.5;a[10]=g/(e-g);a[11]=-1;a[12]=0;a[13]=0;a[14]=g*e/(e-g);a[15]=0;return a};q.ortho=function(a,b,e,g,k,c,d){var f=1/(b-e),h=1/(g-k),n=1/(c-d);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(b+e)*f;a[13]=(k+g)*h;a[14]=(d+c)*n;a[15]=1;return a};q.lookAt=function(a,b,e,g){var k=b[0],c=b[1];b=b[2];var d=g[0];var f=g[1];var h=
g[2];var n=e[0];g=e[1];var p=e[2];if(Math.abs(k-n)<F.EPSILON&&Math.abs(c-g)<F.EPSILON&&Math.abs(b-p)<F.EPSILON)return q.identity(a);e=k-n;g=c-g;n=b-p;var l=1/Math.sqrt(e*e+g*g+n*n);e*=l;g*=l;n*=l;p=f*n-h*g;h=h*e-d*n;d=d*g-f*e;(l=Math.sqrt(p*p+h*h+d*d))?(l=1/l,p*=l,h*=l,d*=l):d=h=p=0;f=g*d-n*h;var m=n*p-e*d;var r=e*h-g*p;(l=Math.sqrt(f*f+m*m+r*r))?(l=1/l,f*=l,m*=l,r*=l):r=m=f=0;a[0]=p;a[1]=f;a[2]=e;a[3]=0;a[4]=h;a[5]=m;a[6]=g;a[7]=0;a[8]=d;a[9]=r;a[10]=n;a[11]=0;a[12]=-(p*k+h*c+d*b);a[13]=-(f*k+m*
c+r*b);a[14]=-(e*k+g*c+n*b);a[15]=1;return a};q.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],
2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};q.add=function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=b[2]+e[2];a[3]=b[3]+e[3];a[4]=b[4]+e[4];a[5]=b[5]+e[5];a[6]=b[6]+e[6];a[7]=b[7]+e[7];a[8]=b[8]+e[8];a[9]=b[9]+e[9];a[10]=b[10]+e[10];a[11]=b[11]+e[11];a[12]=b[12]+e[12];a[13]=b[13]+e[13];a[14]=b[14]+e[14];a[15]=b[15]+e[15];return a};q.subtract=function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=b[3]-e[3];a[4]=b[4]-e[4];a[5]=b[5]-e[5];a[6]=b[6]-e[6];a[7]=b[7]-e[7];a[8]=
b[8]-e[8];a[9]=b[9]-e[9];a[10]=b[10]-e[10];a[11]=b[11]-e[11];a[12]=b[12]-e[12];a[13]=b[13]-e[13];a[14]=b[14]-e[14];a[15]=b[15]-e[15];return a};q.sub=q.subtract;q.multiplyScalar=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*e;a[9]=b[9]*e;a[10]=b[10]*e;a[11]=b[11]*e;a[12]=b[12]*e;a[13]=b[13]*e;a[14]=b[14]*e;a[15]=b[15]*e;return a};q.multiplyScalarAndAdd=function(a,b,e,g){a[0]=b[0]+e[0]*g;a[1]=b[1]+e[1]*g;a[2]=b[2]+e[2]*g;a[3]=
b[3]+e[3]*g;a[4]=b[4]+e[4]*g;a[5]=b[5]+e[5]*g;a[6]=b[6]+e[6]*g;a[7]=b[7]+e[7]*g;a[8]=b[8]+e[8]*g;a[9]=b[9]+e[9]*g;a[10]=b[10]+e[10]*g;a[11]=b[11]+e[11]*g;a[12]=b[12]+e[12]*g;a[13]=b[13]+e[13]*g;a[14]=b[14]+e[14]*g;a[15]=b[15]+e[15]*g;return a};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};q.equals=
function(a,b){var e=a[0],g=a[1],k=a[2],c=a[3],d=a[4],f=a[5],h=a[6],n=a[7],p=a[8],l=a[9],m=a[10],r=a[11],t=a[12],x=a[13],v=a[14],z=a[15],A=b[0],B=b[1],u=b[2],w=b[3],D=b[4],y=b[5],C=b[6],G=b[7],I=b[8],O=b[9],R=b[10],Z=b[11],W=b[12],da=b[13],ea=b[14],Y=b[15];return Math.abs(e-A)<=F.EPSILON*Math.max(1,Math.abs(e),Math.abs(A))&&Math.abs(g-B)<=F.EPSILON*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(k-u)<=F.EPSILON*Math.max(1,Math.abs(k),Math.abs(u))&&Math.abs(c-w)<=F.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&
Math.abs(d-D)<=F.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(f-y)<=F.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(h-C)<=F.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(n-G)<=F.EPSILON*Math.max(1,Math.abs(n),Math.abs(G))&&Math.abs(p-I)<=F.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(l-O)<=F.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(m-R)<=F.EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(r-Z)<=F.EPSILON*Math.max(1,Math.abs(r),Math.abs(Z))&&Math.abs(t-
W)<=F.EPSILON*Math.max(1,Math.abs(t),Math.abs(W))&&Math.abs(x-da)<=F.EPSILON*Math.max(1,Math.abs(x),Math.abs(da))&&Math.abs(v-ea)<=F.EPSILON*Math.max(1,Math.abs(v),Math.abs(ea))&&Math.abs(z-Y)<=F.EPSILON*Math.max(1,Math.abs(z),Math.abs(Y))};return q})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var F={EPSILON:1E-6};F.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;F.RANDOM=Math.random;F.ENABLE_SIMD=!1;F.SIMD_AVAILABLE=F.ARRAY_TYPE===Float32Array&&
"SIMD"in this;F.USE_SIMD=F.ENABLE_SIMD&&F.SIMD_AVAILABLE;F.setMatrixArrayType=function(a){F.ARRAY_TYPE=a};var q=Math.PI/180;F.toRadian=function(a){return a*q};F.equals=function(a,b){return Math.abs(a-b)<=F.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return F})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(F){var q={create:function(){var a=new F.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new F.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];
b[2]=a[2];return b},fromValues:function(a,b,e){var g=new F.ARRAY_TYPE(3);g[0]=a;g[1]=b;g[2]=e;return g},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,e,g){a[0]=b;a[1]=e;a[2]=g;return a},add:function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=b[2]+e[2];return a},subtract:function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];return a}};q.sub=q.subtract;q.multiply=function(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];a[2]=b[2]*e[2];return a};q.mul=q.multiply;q.divide=function(a,
b,e){a[0]=b[0]/e[0];a[1]=b[1]/e[1];a[2]=b[2]/e[2];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};q.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);a[2]=Math.min(b[2],e[2]);return a};q.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);a[2]=Math.max(b[2],e[2]);return a};q.round=function(a,b){a[0]=
Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};q.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;return a};q.scaleAndAdd=function(a,b,e,g){a[0]=b[0]+e[0]*g;a[1]=b[1]+e[1]*g;a[2]=b[2]+e[2]*g;return a};q.distance=function(a,b){var e=b[0]-a[0],g=b[1]-a[1],k=b[2]-a[2];return Math.sqrt(e*e+g*g+k*k)};q.dist=q.distance;q.squaredDistance=function(a,b){var e=b[0]-a[0],g=b[1]-a[1],k=b[2]-a[2];return e*e+g*g+k*k};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],e=
a[1];a=a[2];return Math.sqrt(b*b+e*e+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],e=a[1];a=a[2];return b*b+e*e+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};q.normalize=function(a,b){var e=b[0],g=b[1],k=b[2];e=e*e+g*g+k*k;0<e&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e,a[2]=b[2]*e);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};q.cross=function(a,
b,e){var g=b[0],k=b[1];b=b[2];var c=e[0],d=e[1];e=e[2];a[0]=k*e-b*d;a[1]=b*c-g*e;a[2]=g*d-k*c;return a};q.lerp=function(a,b,e,g){var k=b[0],c=b[1];b=b[2];a[0]=k+g*(e[0]-k);a[1]=c+g*(e[1]-c);a[2]=b+g*(e[2]-b);return a};q.hermite=function(a,b,e,g,k,c){var d=c*c,f=d*(2*c-3)+1,h=d*(c-2)+c,n=d*(c-1);c=d*(3-2*c);a[0]=b[0]*f+e[0]*h+g[0]*n+k[0]*c;a[1]=b[1]*f+e[1]*h+g[1]*n+k[1]*c;a[2]=b[2]*f+e[2]*h+g[2]*n+k[2]*c;return a};q.bezier=function(a,b,e,g,k,c){var d=1-c,f=d*d,h=c*c,n=f*d;f*=3*c;d*=3*h;c*=h;a[0]=b[0]*
n+e[0]*f+g[0]*d+k[0]*c;a[1]=b[1]*n+e[1]*f+g[1]*d+k[1]*c;a[2]=b[2]*n+e[2]*f+g[2]*d+k[2]*c;return a};q.random=function(a,b){b=b||1;var e=2*F.RANDOM()*Math.PI,g=2*F.RANDOM()-1,k=Math.sqrt(1-g*g)*b;a[0]=Math.cos(e)*k;a[1]=Math.sin(e)*k;a[2]=g*b;return a};q.transformMat4=function(a,b,e){var g=b[0],k=b[1];b=b[2];var c=e[3]*g+e[7]*k+e[11]*b+e[15];c=c||1;a[0]=(e[0]*g+e[4]*k+e[8]*b+e[12])/c;a[1]=(e[1]*g+e[5]*k+e[9]*b+e[13])/c;a[2]=(e[2]*g+e[6]*k+e[10]*b+e[14])/c;return a};q.transformMat3=function(a,b,e){var g=
b[0],k=b[1];b=b[2];a[0]=g*e[0]+k*e[3]+b*e[6];a[1]=g*e[1]+k*e[4]+b*e[7];a[2]=g*e[2]+k*e[5]+b*e[8];return a};q.transformQuat=function(a,b,e){var g=b[0],k=b[1],c=b[2];b=e[0];var d=e[1],f=e[2];e=e[3];var h=e*g+d*c-f*k,n=e*k+f*g-b*c,p=e*c+b*k-d*g;g=-b*g-d*k-f*c;a[0]=h*e+g*-b+n*-f-p*-d;a[1]=n*e+g*-d+p*-b-h*-f;a[2]=p*e+g*-f+h*-d-n*-b;return a};q.rotateX=function(a,b,e,g){var k=[],c=[];k[0]=b[0]-e[0];k[1]=b[1]-e[1];k[2]=b[2]-e[2];c[0]=k[0];c[1]=k[1]*Math.cos(g)-k[2]*Math.sin(g);c[2]=k[1]*Math.sin(g)+k[2]*
Math.cos(g);a[0]=c[0]+e[0];a[1]=c[1]+e[1];a[2]=c[2]+e[2];return a};q.rotateY=function(a,b,e,g){var k=[],c=[];k[0]=b[0]-e[0];k[1]=b[1]-e[1];k[2]=b[2]-e[2];c[0]=k[2]*Math.sin(g)+k[0]*Math.cos(g);c[1]=k[1];c[2]=k[2]*Math.cos(g)-k[0]*Math.sin(g);a[0]=c[0]+e[0];a[1]=c[1]+e[1];a[2]=c[2]+e[2];return a};q.rotateZ=function(a,b,e,g){var k=[],c=[];k[0]=b[0]-e[0];k[1]=b[1]-e[1];k[2]=b[2]-e[2];c[0]=k[0]*Math.cos(g)-k[1]*Math.sin(g);c[1]=k[0]*Math.sin(g)+k[1]*Math.cos(g);c[2]=k[2];a[0]=c[0]+e[0];a[1]=c[1]+e[1];
a[2]=c[2]+e[2];return a};q.forEach=function(){var a=q.create();return function(b,e,g,k,c,d){e||(e=3);g||(g=0);for(k=k?Math.min(k*e+g,b.length):b.length;g<k;g+=e)a[0]=b[g],a[1]=b[g+1],a[2]=b[g+2],c(a,a,d),b[g]=a[0],b[g+1]=a[1],b[g+2]=a[2];return b}}();q.angle=function(a,b){var e=q.fromValues(a[0],a[1],a[2]),g=q.fromValues(b[0],b[1],b[2]);q.normalize(e,e);q.normalize(g,g);e=q.dot(e,g);return 1<e?0:Math.acos(e)};q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};q.exactEquals=function(a,b){return a[0]===
b[0]&&a[1]===b[1]&&a[2]===b[2]};q.equals=function(a,b){var e=a[0],g=a[1],k=a[2],c=b[0],d=b[1],f=b[2];return Math.abs(e-c)<=F.EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(g-d)<=F.EPSILON*Math.max(1,Math.abs(g),Math.abs(d))&&Math.abs(k-f)<=F.EPSILON*Math.max(1,Math.abs(k),Math.abs(f))};return q})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(F,q,a,b){var e;(function(g){g[g.BEFORE=
0]="BEFORE";g[g.ATTACHING=1]="ATTACHING";g[g.DETACHING=2]="DETACHING";g[g.RENDERING=3]="RENDERING";g[g.AFTER=4]="AFTER";g[g.DONE=5]="DONE"})(e||(e={}));return function(g){function k(){var c=null!==g&&g.apply(this,arguments)||this;c._childrenSet=new Set;c._childrenToAttach=[];c._childrenToDetach=[];c._renderPhase=e.DONE;c.children=[];return c}a(k,g);Object.defineProperty(k.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});k.prototype.detach=function(c){var d=
this.children.concat(this._childrenToDetach);c=this.prepareChildrenRenderParameters(c);for(var f=0;f<d.length;f++){var h=d[f];h.attached&&(this.detachChild(h,c),h.attached=!1,h.parent=null)}};k.prototype.doRender=function(c){var d=this.prepareChildrenRenderParameters(c);this._renderPhase=e.BEFORE;this.beforeRenderChildren(c,d);this._renderPhase=e.ATTACHING;this.attachChildren(d);this._renderPhase=e.DETACHING;for(var f=this._childrenToDetach;0<f.length;){var h=f.shift();this.detachChild(h,d);h.attached=
!1;h.parent=null}this._renderPhase=e.RENDERING;this.renderChildren(d);this._renderPhase=e.AFTER;this.afterRenderChildren(c,d);this._renderPhase=e.DONE};k.prototype.addChild=function(c){return this.addChildAt(c,this.children.length)};k.prototype.addChildAt=function(c,d){void 0===d&&(d=this.numChildren);if(!c||this.contains(c))return c;var f=c.parent;f&&f!==this&&f.removeChild(c);d>=this.numChildren?this.children.push(c):this.children.splice(d,0,c);this._childrenSet.add(c);f=this._childrenToDetach.indexOf(c);
-1<f&&this._childrenToDetach.splice(f,1);this._childrenToAttach.push(c);this._renderPhase>=e.RENDERING&&this.requestRender();return c};k.prototype.contains=function(c){return this._childrenSet.has(c)};k.prototype.getChildIndex=function(c){return this.children.indexOf(c)};k.prototype.getChildAt=function(c){return 0>c||c>this.children.length?null:this.children[c]};k.prototype.removeAllChildren=function(){for(var c=this.numChildren;c--;)this.removeChildAt(0)};k.prototype.removeChild=function(c){return this.contains(c)?
this.removeChildAt(this.getChildIndex(c)):c};k.prototype.removeChildAt=function(c){if(0>c||c>=this.children.length)return null;c=this.children.splice(c,1)[0];this._childrenSet["delete"](c);if(c.attached)this._childrenToDetach.push(c),this._renderPhase>=e.RENDERING&&this.requestRender();else{var d=this._childrenToAttach.indexOf(c);-1<d&&this._childrenToAttach.splice(d,1)}return c};k.prototype.requestChildRender=function(c){c&&c.parent===this&&this._renderPhase>=e.RENDERING&&this.requestRender()};k.prototype.setChildIndex=
function(c,d){var f=this.getChildIndex(c);-1<f&&(this.children.splice(f,1),this.children.splice(d,0,c),this._renderPhase>=e.RENDERING&&this.requestRender())};k.prototype.sortChildren=function(c){this._renderPhase>e.RENDERING&&this.requestRender();return this.children.sort(c)};k.prototype.attachChildren=function(c){var d=this._childrenToAttach;if(0!==d.length)for(var f=0,h=!1;!h;)h=d[f],this.attachChild(h,c)?(h.attached=!0,h.parent=this,d.splice(f,1)):++f,h=d.length===f};k.prototype.renderChildren=
function(c){for(var d=this.children,f=d.length,h=0;h<f;h++){var n=d[h];n.attached&&this.renderChild(n,c)}};k.prototype.beforeRenderChildren=function(c,d){};k.prototype.attachChild=function(c,d){return c.attach(d)};k.prototype.detachChild=function(c,d){c.detach(d)};k.prototype.renderChild=function(c,d){c.processRender(d)};k.prototype.afterRenderChildren=function(c,d){};return k}(b)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./Evented"],function(F,q,a,b){return function(e){function g(){var k=null!==e&&e.apply(this,arguments)||this;k._renderRequestedCalled=!1;k._attached=!1;k._opacity=1;k.renderRequested=!1;k._visible=!0;return k}a(g,e);Object.defineProperty(g.prototype,"attached",{get:function(){return this._attached},set:function(k){this._attached!==k&&((this._attached=k)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"opacity",{get:function(){return this._opacity},set:function(k){this._opacity!==k&&(this._opacity=k,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"visible",{get:function(){return this._visible},set:function(k){this._visible!==k&&(this._visible=k,this.requestRender())},enumerable:!0,configurable:!0});g.prototype.attach=function(k){return!0};g.prototype.detach=function(k){};g.prototype.processRender=function(k){this._renderRequestedCalled=!1;this.doRender(k);
this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};g.prototype.requestRender=function(){var k=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);k!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};g.prototype.dispose=function(){};return g}(b.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(F,q,a,b,e){Object.defineProperty(q,"__esModule",{value:!0});F=function(){function g(){}g.prototype.on=function(k,c){return b.after(this,"on"+k,c,!0)};g.prototype.once=function(k,c){return e.once(this,k,c)};g.prototype.emit=function(k){e.emit(this,k,this)};g.prototype.hasEventListener=function(k){k="on"+k;return!(!this[k]||!this[k].after)};return g}();q.Evented=F;q.EventedMixin=function(g){return function(k){function c(){return null!==
k&&k.apply(this,arguments)||this}a(c,k);c.prototype.on=function(d,f){return b.after(this,"on"+d,f,!0)};c.prototype.once=function(d,f){return e.once(this,d,f)};c.prototype.emit=function(d,f){e.emit(this,d,f)};c.prototype.hasEventListener=function(d){d="on"+d;return!(!this[d]||!this[d].after)};return c}(g)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(q.WGLGeometryType||(q.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(q.WGLGeometryTransactionStatus||(q.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(q.WGLDrawPhase||(q.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(q.VVType||(q.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(q.WGLVVFlag||(q.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(q.WGLVVTarget||(q.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(q.CapType||(q.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(q.JoinType||(q.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(q.EsriSymbolType||(q.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(q.EsriSymbolTypeKebab||(q.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x){Object.defineProperty(q,"__esModule",{value:!0});F=function(){function A(){this._initialized=!1}A.prototype.registerPass=function(B,u){this._initialize();for(var w=0;w<u.length;w++)this._passMap.set(u[w],B);return this};A.prototype.getPaintPassTs=function(B){this._initialize();return this._passMap.has(B)?[this._passMap.get(B)]:[]};A.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return A}();q.WGLPainterOptions=
F;var v=new Uint8Array(4*d.C_HITTEST_SEARCH_SIZE*d.C_HITTEST_SEARCH_SIZE),z=new Uint32Array(v.buffer);F=function(){function A(){this._hlPainter=new t;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new c}A.allGeometryPhases=function(){return[g.WGLDrawPhase.FILL,
g.WGLDrawPhase.LINE,g.WGLDrawPhase.MARKER,g.WGLDrawPhase.TEXT]};A.toWGLDrawPhases=function(B){for(var u=[],w,D=0;D<g.WGLDrawPhase.NUM_DRAW_PHASES;D++)w=1<<D,w&B&&u.push(w);return u};Object.defineProperty(A.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});A.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(B){return B.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(B){return B.forEach(function(u){return u.dispose()})}),this._brushes.clear())};A.prototype.initialize=function(B){this.materialManager.initialize(B)};A.prototype.update=function(B,u){this._state=B;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/B.width,this._extrudeScaleVector[1]=-2/B.height,e.identity(this._extrudeMatrix),e.rotate(this._extrudeMatrix,this._extrudeMatrix,-B.rotation*k.C_DEG_TO_RAD,this._extrudeRotateVector),e.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),e.transpose(this._extrudeMatrix,this._extrudeMatrix),e.identity(this._extrudeNoRotationMatrix),e.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),e.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};A.prototype.getBrushes=function(B){if(!this._brushes){var u=new n["default"],w=new m["default"],D=new l["default"],y=new r["default"],C=new p["default"],G=new f["default"],I=new h["default"];this._brushes=new Map;this._brushes.set(g.WGLDrawPhase.FILL,[u]);
this._brushes.set(g.WGLDrawPhase.MARKER,[w]);this._brushes.set(g.WGLDrawPhase.LINE,[D]);this._brushes.set(g.WGLDrawPhase.TEXT,[y]);this._brushes.set(g.WGLDrawPhase.LABEL,[C]);this._brushes.set(g.WGLDrawPhase.LABEL_ALPHA,[C]);this._brushes.set(g.WGLDrawPhase.HITTEST,[u,w,D,y]);this._brushes.set(g.WGLDrawPhase.HIGHLIGHT,[u,w,D,y]);this._brushes.set(g.WGLDrawPhase.CLIP,[I]);this._brushes.set(g.WGLDrawPhase.DEBUG,[G])}if(!this._brushes.has(B))throw Error("WGLPainter: Tried to get brush for unknown phase: "+
B);return this._brushes.get(B)};A.prototype.bindTextureManager=function(B){this.textureManager=B};A.prototype.draw=function(B,u,w,D){w[0]===g.WGLDrawPhase.LABEL_ALPHA&&w[0]===g.WGLDrawPhase.LABEL||this._drawClippingRects(B,u);var y=B.context;y.setBlendingEnabled(!0);y.setStencilWriteMask(0);y.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(B,u,w,D);this._debugTiles(B,u)};A.prototype.setHighlightOptions=function(B){this._hlPainter.setHighlightOptions(B)};A.prototype.highlight=function(B,u){var w=
B.context,D=w.getViewport();this._hlPainter.setup(w,D.width,D.height);this._hlPainter.startMaskDraw(w);this._drawClippingRects(B,u);w.setBlendingEnabled(!0);w.setStencilWriteMask(0);w.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(B,u,[g.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(w)};A.prototype.hitTest=function(B,u){var w=d.C_HITTEST_SEARCH_SIZE,D=[0,0],y=[0,0],C=B.state;C.toMap(D,[0,0]);C.toMap(y,[w,w]);if(0===u.filter(function(da){return!(D[0]>da.bounds[2]||y[0]<da.bounds[0]||D[1]<da.bounds[1]||
y[1]>da.bounds[3])}).length)return[];C=B.context;this._hittestFBO||(this._hittestFBO=x.create(C,{colorTarget:0,depthStencilTarget:3,width:w,height:w}));var G=C.getViewport(),I=C.getBoundFramebufferObject();C.bindFramebuffer(this._hittestFBO);C.setViewport(0,0,w,w);this._drawClippingRects(B,u);var O=C.gl;C.setClearColor(1,1,1,1);C.clear(O.COLOR_BUFFER_BIT);C.setBlendingEnabled(!1);C.setStencilWriteMask(0);this._drawPhases(B,u,[g.WGLDrawPhase.HITTEST]);C.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,
0,w,w,6408,5121,v);w*=w;O=new Set;for(var R=0;R<w;R++){var Z=z[R];4294967295!==Z&&O.add(Z)}C.bindFramebuffer(I);C.setViewport(G.x,G.y,G.width,G.height);var W=[];O.forEach(function(da){W.push(da)});return W};A.prototype._getPaintPass=function(B){this._passes||(this._passes=new Map);if(!this._passes.has(B))try{this._passes.set(B,new B)}catch(u){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+B+",\n"+u);}return this._passes.get(B)};A.prototype._getPaintPasses=function(B,u){var w=
this;return u.getPaintPassTs(B).map(function(D){return w._getPaintPass(D)})};A.prototype._drawPhases=function(B,u,w,D){B.context.setStencilTestEnabled(!0);for(var y=0;y<w.length;y++){var C=w[y],G=D?this._getPaintPasses(C,D):[];C=a({},B,{drawPhase:C});G.forEach(function(R){return R.preRender(B,B.rendererInfo)});for(var I=0,O=u;I<O.length;I++)O[I].doRender(C);G.reverse().forEach(function(R){return R.postRender(B,B.rendererInfo)})}B.context.setStencilTestEnabled(!1)};A.prototype._debugTiles=function(B,
u){b("esri-feature-tiles-debug")&&this._drawPhases(B,u,[g.WGLDrawPhase.DEBUG])};A.prototype._drawClippingRects=function(B,u){if(0!==u.length){var w=B.context;w.setDepthWriteEnabled(!1);w.setDepthTestEnabled(!1);w.setStencilTestEnabled(!0);w.setBlendingEnabled(!1);w.setColorMask(!1,!1,!1,!1);w.setStencilOp(7680,7680,7681);w.setClearStencil(0);w.clear(w.gl.STENCIL_BUFFER_BIT);w.setStencilWriteMask(255);w=0;for(var D=u.length;w<u.length;w++,D--){var y=u[w];y.attached&&(y.stencilRef=D)}this._drawPhases(B,
u,[g.WGLDrawPhase.CLIP]);B.context.setColorMask(!0,!0,!0,!0)}};return A}();q["default"]=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(F,q){function a(e,g){e%=g;return 0<=e?e:e+g}Object.defineProperty(q,"__esModule",{value:!0});q.C_INFINITY=Number.POSITIVE_INFINITY;q.C_PI=Math.PI;q.C_2PI=2*q.C_PI;q.C_PI_BY_2=q.C_PI/2;q.C_RAD_TO_256=128/q.C_PI;q.C_256_TO_RAD=q.C_PI/128;q.C_DEG_TO_256=256/360;q.C_DEG_TO_RAD=q.C_PI/180;q.C_SQRT2=1.414213562;
q.C_SQRT2_INV=1/q.C_SQRT2;var b=1/Math.LN2;q.positiveMod=a;q.radToByte=function(e){return a(e*q.C_RAD_TO_256,256)};q.degToByte=function(e){return a(e*q.C_DEG_TO_256,256)};q.log2=function(e){return Math.log(e)*b};q.sqr=function(e){return e*e};q.clamp=function(e,g,k){return Math.min(Math.max(e,g),k)};q.interpolate=function(e,g,k){return e*(1-k)+g*k};q.between=function(e,g,k){return e>=g&&e<=k||e>=k&&e<=g}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(F,q,a,b,e,g,k,c,d,f){return function(){function h(){this._programRep=new Map;this.isInitialize=!1}h.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),
this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(n){return n.dispose()}),this._programRep.clear())};h.prototype.initialize=function(n){if(!this.isInitialize){var p=new f("label",["labelVS","labelFS"],[],k,n);p.addDefine("ID","ID",[!0,!0],"ID");p.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");p.addDefine("SDF","SDF",[!1,!1],"SDF");p.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");p.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");p.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");p.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");p.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");p.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");p.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");p.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");p.addDefine("PATTERN",
"PATTERN",[!1,!1],"PATTERN");p.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var l=new f("text",["textVS","textFS"],[],d,n);l.addDefine("ID","ID",[!0,!0],"ID");l.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");l.addDefine("SDF","SDF",[!1,!1],"SDF");l.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");l.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");l.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],
"VV_SIZE_FIELD_STOPS");l.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");l.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");l.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");l.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");l.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");l.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");l.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var m=new f("icon",["iconVS","iconFS"],
[],g,n);m.addDefine("ID","ID",[!0,!0],"ID");m.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");m.addDefine("SDF","SDF",[!0,!0],"SDF");m.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");m.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");m.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");m.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");m.addDefine("VV_COLOR",
"VV_COLOR",[!0,!1],"VV_COLOR");m.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");m.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");m.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var r=new f("fill",["fillVS","fillFS"],[],e,n);r.addDefine("ID","ID",[!0,!0],"ID");r.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");r.addDefine("SDF","SDF",
[!1,!1],"SDF");r.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");r.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");r.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");r.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");r.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");r.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");r.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");r.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");r.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");r.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");n=new f("line",["lineVS","lineFS"],[],c,n);n.addDefine("ID","ID",[!0,!0],"ID");n.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");n.addDefine("SDF","SDF",[!0,!0],"SDF");n.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");n.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");n.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");n.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");n.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");n.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");n.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");n.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");n.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");n.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=p;this._textShaderVariations=l;this._fillShaderVariations=r;this._iconShaderVariations=m;this._lineShaderVariations=n;this.isInitialize=!0}};h.prototype.getProgram=function(n,p,l){n|=p===a.WGLDrawPhase.HITTEST?8:0;n|=p===a.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[n])return this._programRep[n];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;
p=b.getMaterialVariations(n);switch(p.geometryType){case a.WGLGeometryType.MARKER:var m=this._iconShaderVariations.getProgram(p.variations,null,null,l);break;case a.WGLGeometryType.TEXT:m=this._textShaderVariations.getProgram(p.variations,null,null,l);break;case a.WGLGeometryType.LABEL:m=this._labelShaderVariations.getProgram(p.variations,null,null,l);break;case a.WGLGeometryType.FILL:m=this._fillShaderVariations.getProgram(p.variations,null,null,l);break;case a.WGLGeometryType.LINE:m=this._lineShaderVariations.getProgram(p.variations,
null,null,l)}m&&(this._programRep[n]=m);return m};return h}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(F,q,a,b,e){function g(c){var d=[];d[0]=c.sdf?!0:!1;d[1]=c.vvSizeMinMaxValue?!0:!1;d[2]=c.vvSizeScaleStops?!0:!1;d[3]=c.vvSizeFieldStops?!0:!1;d[4]=c.vvSizeUnitValue?!0:!1;d[5]=c.vvColor?!0:!1;d[6]=c.vvRotation?!0:!1;d[7]=c.vvOpacity?!0:!1;d[8]=c.visibility?!0:!1;d[9]=c.pattern?
!0:!1;d[10]=c.heatmap?!0:!1;return d.reduce(function(f,h,n){h&&(f|=1<<n+2);return f},0)}function k(c){if(c.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var d=g(c)<<3;return c.geometryType+d}Object.defineProperty(q,"__esModule",{value:!0});q.createTextMaterialInfo=function(c,d,f){var h=new b["default"],n=new e;n.geometryType=f;n.sdf=!0;n.pattern=!1;n.visibility=!1;n.heatmap=!1;h.texBindingInfo.push(new b.TexBindingInfo(2,c.page,"u_texture"));0===d?n.vvOpacity=n.vvSizeMinMaxValue=n.vvSizeScaleStops=
n.vvSizeFieldStops=n.vvSizeUnitValue=n.vvColor=n.vvRotation=!1:(n.vvOpacity=0!==(d&a.WGLVVFlag.OPACITY),n.vvSizeMinMaxValue=0!==(d&a.WGLVVFlag.SIZE_MINMAX_VALUE),n.vvSizeScaleStops=0!==(d&a.WGLVVFlag.SIZE_SCALE_STOPS),n.vvSizeFieldStops=0!==(d&a.WGLVVFlag.SIZE_FIELD_STOPS),n.vvSizeUnitValue=0!==(d&a.WGLVVFlag.SIZE_UNIT_VALUE),n.vvColor=0!==(d&a.WGLVVFlag.COLOR),n.vvRotation=0!==(d&a.WGLVVFlag.ROTATION));h.materialKey=k(n);h.materialKeyInfo=n;return h};q.createMaterialInfo=function(c,d,f){var h=new b["default"],
n=new e;n.geometryType=d;c?(c=c.spriteMosaicItem,n.sdf=c.sdf,n.pattern=!0,h.texBindingInfo.push(new b.TexBindingInfo(1,c.page,"u_texture"))):(n.sdf=!1,n.pattern=!1);0===f?n.vvOpacity=n.vvSizeMinMaxValue=n.vvSizeScaleStops=n.vvSizeFieldStops=n.vvSizeUnitValue=n.vvColor=n.vvRotation=!1:(n.vvOpacity=0!==(f&a.WGLVVFlag.OPACITY),n.vvSizeMinMaxValue=0!==(f&a.WGLVVFlag.SIZE_MINMAX_VALUE),n.vvSizeScaleStops=0!==(f&a.WGLVVFlag.SIZE_SCALE_STOPS),n.vvSizeFieldStops=0!==(f&a.WGLVVFlag.SIZE_FIELD_STOPS),n.vvSizeUnitValue=
0!==(f&a.WGLVVFlag.SIZE_UNIT_VALUE),n.vvColor=0!==(f&a.WGLVVFlag.COLOR),n.vvRotation=0!==(f&a.WGLVVFlag.ROTATION));n.visibility=!1;h.materialKey=k(n);h.materialKeyInfo=n;return h};q.getMaterialKey=k;q.getMaterialVariations=function(c){var d=c&7;c>>=3;return{geometryType:d,variations:[0!==(c&1),0!==(c&2),0!==(c&4),0!==(c&8),0!==(c&16),0!==(c&32),0!==(c&64),0!==(c&128),0!==(c&256),0!==(c&512),0!==(c&1024),0!==(c&2048),0!==(c&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(F,q,a,b,e,g,k){Object.defineProperty(q,"__esModule",{value:!0});var c=function(){function f(h,n,p){this.unit=h;this.pageId=n;this.semantic=p}f.prototype.clone=function(){return new f(this.unit,this.pageId,this.semantic)};f.prototype.serialize=function(h){h.writeInt32(this.unit);h.writeInt32(this.pageId);return h};f.deserialize=function(h){var n=h.readInt32();h=h.readInt32();return new f(n,h,"u_texture")};return f}();q.TexBindingInfo=c;var d=function(){function f(h,n){this.name=h;this.value=
n}f.prototype.clone=function(){return new f(this.name,this.value)};f.prototype.serialize=function(h){h.writeInt32(this.value);return h};f.deserialize=function(h){h=h.readInt32();return new f("u_my_param",h)};return f}();q.MaterialParam=d;F=function(){function f(){this.texBindingInfo=[];this.materialParams=[]}f.fromSprite=function(h,n,p){var l=new f,m=new g;m.geometryType=n;h?(m.sdf=h.sdf,m.pattern=!0,l.texBindingInfo.push(new c(1,h.page,"u_texture"))):(m.sdf=!1,m.pattern=!1);0===p?m.vvOpacity=m.vvSizeMinMaxValue=
m.vvSizeScaleStops=m.vvSizeFieldStops=m.vvSizeUnitValue=m.vvColor=m.vvRotation=!1:(m.vvOpacity=0!==(p&a.WGLVVFlag.OPACITY),m.vvSizeMinMaxValue=0!==(p&a.WGLVVFlag.SIZE_MINMAX_VALUE),m.vvSizeScaleStops=0!==(p&a.WGLVVFlag.SIZE_SCALE_STOPS),m.vvSizeFieldStops=0!==(p&a.WGLVVFlag.SIZE_FIELD_STOPS),m.vvSizeUnitValue=0!==(p&a.WGLVVFlag.SIZE_UNIT_VALUE),m.vvColor=0!==(p&a.WGLVVFlag.COLOR),m.vvRotation=0!==(p&a.WGLVVFlag.ROTATION));m.visibility=!1;l.materialKey=b.getMaterialKey(m);l.materialKeyInfo=m;return l};
f.fromGlyph=function(h,n,p){var l=new f,m=new g;m.geometryType=n;m.sdf=!0;m.pattern=!1;m.visibility=!1;m.heatmap=!1;l.texBindingInfo.push(new c(2,h.page,"u_texture"));0===p?m.vvOpacity=m.vvSizeMinMaxValue=m.vvSizeScaleStops=m.vvSizeFieldStops=m.vvSizeUnitValue=m.vvColor=m.vvRotation=!1:(m.vvOpacity=0!==(p&a.WGLVVFlag.OPACITY),m.vvSizeMinMaxValue=0!==(p&a.WGLVVFlag.SIZE_MINMAX_VALUE),m.vvSizeScaleStops=0!==(p&a.WGLVVFlag.SIZE_SCALE_STOPS),m.vvSizeFieldStops=0!==(p&a.WGLVVFlag.SIZE_FIELD_STOPS),m.vvSizeUnitValue=
0!==(p&a.WGLVVFlag.SIZE_UNIT_VALUE),m.vvColor=0!==(p&a.WGLVVFlag.COLOR),m.vvRotation=0!==(p&a.WGLVVFlag.ROTATION));l.materialKey=b.getMaterialKey(m);l.materialKeyInfo=m;return l};f.prototype.copy=function(h){this.materialParams=h.materialParams.map(function(n){return n.clone()});this.texBindingInfo=h.texBindingInfo.map(function(n){return n.clone()});h.materialKeyInfo&&(this.materialKeyInfo=new g,this.materialKeyInfo.copy(h.materialKeyInfo));this.materialKey=h.materialKey};f.prototype.serialize=function(h){h.writeInt32(this.materialKey);
k.serializeList(h,this.texBindingInfo);k.serializeList(h,this.materialParams);return h};f.deserialize=function(h){var n=new f;n.materialKey=h.readInt32();n.texBindingInfo=k.deserializeList(h,c);n.materialParams=k.deserializeList(h,d);n.materialKeyInfo=new g;e(n.materialKeyInfo,n.materialKey);return n};return f}();q["default"]=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(F,q){return function(a,b){a.geometryType=
b&7;b>>=3;a.sdf=0!==(b&4);a.vvSizeMinMaxValue=0!==(b&8);a.vvSizeScaleStops=0!==(b&16);a.vvSizeFieldStops=0!==(b&32);a.vvSizeUnitValue=0!==(b&64);a.vvColor=0!==(b&128);a.vvRotation=0!==(b&256);a.vvOpacity=0!==(b&512);a.visibility=0!==(b&1024);a.pattern=0!==(b&2048);a.heatmap=0!==(b&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(F,q){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(b){this.geometryType=b.geometryType;this.sdf=b.sdf;this.vvSizeMinMaxValue=b.vvSizeMinMaxValue;this.vvSizeScaleStops=b.vvSizeScaleStops;this.vvSizeFieldStops=b.vvSizeFieldStops;this.vvSizeUnitValue=b.vvSizeUnitValue;this.vvColor=b.vvColor;this.vvRotation=b.vvRotation;this.vvOpacity=b.vvOpacity;this.visibility=b.visibility;this.pattern=b.pattern;
this.heatmap=b.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.serializeList=function(a,b){if(null===b)a.writeInt32(0);else{a.writeInt32(b.length);for(var e=0;e<b.length;e++)b[e].serialize(a);return a}};q.deserializeList=function(a,b,e){var g=a.readInt32();g=Array(g);for(var k=0;k<g.length;k++)g[k]=b.deserialize(a,e);return g}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(F,q,a,b){F=new b;b.parse(a,F);return F})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(F,q,a){return function(){function b(e){if(e)for(var g in e)this[g]=e[g]}b.parse=function(e,g){for(var k=a.parse(e).getElementsByTagName("snippet"),c=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,d=/[\$\s]+/g,f=/\(([^\(\)]*)\)/,h=0;h<k.length;h++){for(var n=
k[h].getAttribute("name"),p=k[h].textContent;;){var l=p.match(c);if(null==l)break;var m=l[0].replace(d,""),r=m.match(f),t=void 0;r&&(t=r[1].split(",").map(function(x){return x.trim()}));m=m.replace(f,"");t=g._instantiate(m,t);p=p.replace(l[0],t)}g[n]=p}};b.prototype._instantiate=function(e,g){var k=this[e];for(g||(g=[]);;){var c=k.match(/\$(\d+)/);if(null==c)break;var d=parseInt(c[1],10);k=k.replace(c[0],g[d])}return k};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require",
"exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(F,q,a,b){F=new b;b.parse(a,F);return F})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml","../../../../webgl/ShaderSnippets"],function(F,q,a,b){F=new b;b.parse(a,F);return F})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml",
"../../../../webgl/ShaderSnippets"],function(F,q,a,b){F=new b;b.parse(a,F);return F})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(F,q,a,b){F=new b;b.parse(a,F);return F})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(F,q,a,b,e){function g(k){return k.reduce(function(c,
d,f){d&&(c|=1<<f);return c},0)}return function(){function k(c,d,f,h,n,p){"string"===typeof c?this._initParams(c,d,f,h,n,p):this._initObject({programNamePrefix:c.programNamePrefix,shaderSnippetPrefixes:c.shaderSnippetPrefixes,baseDefines:c.baseDefines,snippets:c.snippets,rctx:c.rctx,vertexAttribLocs:c.vertexAttribLocs})}k.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(c){return c.dispose()}),this._programCache.clear())};k.prototype._initObject=function(c){this._initParams(c.programNamePrefix,
c.shaderSnippetPrefixes,c.baseDefines,c.snippets,c.rctx,c.vertexAttribLocs)};k.prototype._initParams=function(c,d,f,h,n,p){this._defaultSnippets=h;this._defaultRctx=n;this._defaultVertexAttribLocs=p;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new b(c,d,f)};k.prototype.addDefine=function(c,d,f,h){this._shaderSourceVariator.addDefine(c,d,f,h)};k.prototype.addBinaryShaderSnippetSuffix=function(c,d,f){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(c,d,f)};
k.prototype.addNaryShaderSnippetSuffix=function(c,d){this._shaderSourceVariator.addNaryShaderSnippetSuffix(c,d)};k.prototype.getProgram=function(c,d,f,h){d=d||this._defaultSnippets;f=f||this._defaultRctx;h=h||this._defaultVertexAttribLocs;if(!d)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!f)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!h)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");
var n=g(c);if(this._programCache.has(n))return this._programCache.get(n);c=this._shaderSourceVariator.getShaderVariation(c);var p=c.shaderSnippetNames[0];var l=d[p];e.assert(null!=l,"shader snippet '"+p+"' does not exist");p=c.shaderSnippetNames[1];d=d[p];e.assert(null!=d,"shader snippet '"+p+"' does not exist");f=new a(f,l,d,h,c.defines);this._programCache.set(n,f);return f};k.prototype.getProgramByKey=function(c){if(this._programCache.has(c))return this._programCache.get(c);if(!this._variationInfo[c])return null;
var d=this._variationInfo[c],f=this._defaultSnippets,h=this._defaultRctx,n=this._defaultVertexAttribLocs;var p=d.shaderSnippetNames[0];var l=f[p];e.assert(null!=l,"shader snippet '"+p+"' does not exist");p=d.shaderSnippetNames[1];f=f[p];e.assert(null!=f,"shader snippet '"+p+"' does not exist");d=new a(h,l,f,n,d.defines);this._programCache.set(c,d);return d};k.prototype.getProgramInfo=function(c){var d=this._shaderSourceVariator.getShaderVariation(c);c=g(c);this._variationInfo[c]||(this._variationInfo[c]=
d);return{name:d.programName,key:c}};return k}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has","./ShaderTranspiler"],function(F,q,a,b){return function(){function e(g,k,c,d,f){void 0===f&&(f={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3=
{};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=g;this._vertexShaderSource=k;this._fragmentShaderSource=c;if(Array.isArray(f))for(k=0;k<f.length;k++)this._defines[f[k]]="1";else this._defines=f;this._id=e._nextId++;this._locations=d;a("esri-webgl-debug")&&g.instanceCounter.incrementCount(3)}Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});e.prototype.getDefine=function(g){return this._defines[g]};e.prototype.dispose=function(){if(this._context){var g=this._context.gl;this._vShader&&(g.deleteShader(this._vShader),this._vShader=null);this._fShader&&(g.deleteShader(this._fShader),this._fShader=null);this._glName&&(g.deleteProgram(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);
this._context=null}};e.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);var g=this._context.gl,k=g.createProgram();g.attachShader(k,this._vShader);g.attachShader(k,this._fShader);for(var c in this._locations)g.bindAttribLocation(k,this._locations[c],c);g.linkProgram(k);g.getProgramParameter(k,g.LINK_STATUS);this._glName=k;this._initialized=!0}};e.prototype.getUniformLocation=function(g){this.initialize();void 0===this._nameToUniformLocation[g]&&
(this._nameToUniformLocation[g]=this._context.gl.getUniformLocation(this._glName,g));return this._nameToUniformLocation[g]};e.prototype.hasUniform=function(g){return null!==this.getUniformLocation(g)};e.prototype.getAttribLocation=function(g){this.initialize();void 0===this._nameToAttribLocation[g]&&(this._nameToAttribLocation[g]=this._context.gl.getAttribLocation(this._glName,g));return this._nameToAttribLocation[g]};e.prototype.setUniform1i=function(g,k){var c=this._nameToUniform1[g];if(void 0===
c||k!==c)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(g),k),this._nameToUniform1[g]=k};e.prototype.setUniform1f=function(g,k){var c=this._nameToUniform1[g];if(void 0===c||k!==c)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(g),k),this._nameToUniform1[g]=k};e.prototype.setUniform1fv=function(g,k){var c=this._nameToUniform2[g];void 0!==c&&e._arraysEqual(k,c)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(g),
k),void 0===c?this._nameToUniform2[g]=new Float32Array(k):c.set(k))};e.prototype.setUniform2f=function(g,k,c){var d=this._nameToUniform2[g];if(void 0===d||k!==d[0]||c!==d[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(g),k,c),void 0===d?this._nameToUniform2[g]=new Float32Array([k,c]):(d[0]=k,d[1]=c)};e.prototype.setUniform2fv=function(g,k){var c=this._nameToUniform2[g];void 0!==c&&e._arraysEqual(k,c)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(g),
k),void 0===c?this._nameToUniform2[g]=new Float32Array(k):c.set(k))};e.prototype.setUniform3f=function(g,k,c,d){var f=this._nameToUniform3[g];if(void 0===f||k!==f[0]||c!==f[1]||d!==f[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(g),k,c,d),void 0===f?this._nameToUniform3[g]=new Float32Array([k,c,d]):(f[0]=k,f[1]=c,f[2]=d)};e.prototype.setUniform3fv=function(g,k){var c=this._nameToUniform3[g];void 0!==c&&e._arraysEqual(k,c)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(g),
k),void 0===c?this._nameToUniform3[g]=new Float32Array(k):c.set(k))};e.prototype.setUniform4f=function(g,k,c,d,f){var h=this._nameToUniform4[g];if(void 0===h||k!==h[0]||c!==h[1]||d!==h[2]||f!==h[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(g),k,c,d,f),void 0===h?this._nameToUniform4[g]=new Float32Array([k,c,d,f]):(h[0]=k,h[1]=c,h[2]=d,h[3]=f)};e.prototype.setUniform4fv=function(g,k){var c=this._nameToUniform4[g];void 0!==c&&e._arraysEqual(k,c)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(g),k),void 0===c?this._nameToUniform4[g]=new Float32Array(k):c.set(k))};e.prototype.setUniformMatrix3fv=function(g,k,c){void 0===c&&(c=!1);var d=this._nameToUniformMatrix3[g];void 0!==d&&(9===d.length?e._matrix3Equal(d,k):e._arraysEqual(k,d))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(g),c,k),void 0===d?this._nameToUniformMatrix3[g]=new Float32Array(k):d.set(k))};e.prototype.setUniformMatrix4fv=function(g,
k,c){void 0===c&&(c=!1);var d=this._nameToUniformMatrix4[g];void 0!==d&&(16===d.length?e._matrix4Equal(d,k):e._arraysEqual(k,d))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(g),c,k),void 0===d?this._nameToUniformMatrix4[g]=new Float32Array(k):d.set(k))};e._padToThree=function(g){var k=g.toString();1E3>g&&(k=("  "+g).slice(-3));return k};e.prototype._addLineNumbers=function(g){var k=2;return g.replace(/\n/g,function(){return"\n"+e._padToThree(k++)+":"})};
e.prototype._loadShader=function(g){var k=35633===g,c=k?this._vertexShaderSource:this._fragmentShaderSource,d="",f;for(f in this._defines)d+="#define "+f+" "+this._defines[f]+"\n";c=d+c;"webgl2"===this._context.contextVersion&&(c=b.transpileShader(c,k?"vertex":"fragment"));k=this._context.gl;g=k.createShader(g);k.shaderSource(g,c);k.compileShader(g);k.getShaderParameter(g,k.COMPILE_STATUS);return g};e._matrix4Equal=function(g,k){return g[0]===k[0]&&g[1]===k[1]&&g[2]===k[2]&&g[3]===k[3]&&g[4]===k[4]&&
g[5]===k[5]&&g[6]===k[6]&&g[7]===k[7]&&g[8]===k[8]&&g[9]===k[9]&&g[10]===k[10]&&g[11]===k[11]&&g[12]===k[12]&&g[13]===k[13]&&g[14]===k[14]&&g[15]===k[15]};e._matrix3Equal=function(g,k){return g[0]===k[0]&&g[1]===k[1]&&g[2]===k[2]&&g[3]===k[3]&&g[4]===k[4]&&g[5]===k[5]&&g[6]===k[6]&&g[7]===k[7]&&g[8]===k[8]};e._arraysEqual=function(g,k){if(g.length!==k.length)return!1;for(var c=0;c<g.length;++c)if(g[c]!==k[c])return!1;return!0};e._nextId=0;return e}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require",
"exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(F,q,a,b){function e(d){return d.map(function(f){return"eof"!==f.type?f.data:""}).join("")}function g(d,f,h,n){n=n||h;for(var p=0;p<d.length;p++){var l=d[p];if("ident"===l.type&&l.data===h)return n in f?f[n]++:f[n]=0,g(d,f,n+"_"+f[n],n)}return h}function k(d,f,h){void 0===h&&(h="afterVersion");var n={data:"\n",type:"whitespace"},p=function(t){return t<d.length?/[^\r\n]$/.test(d[t].data):!1},l=function(t){for(var x=-1,v=0,z=-1,
A=0;A<t.length;A++){var B=t[A];"preprocessor"===B.type&&(B.data.match(/#(if|ifdef|ifndef)\s+.+/)?++v:B.data.match(/#endif\s*.*/)&&--v);("afterVersion"===h||"afterPrecision"===h)&&"preprocessor"===B.type&&/^#version/.test(B.data)&&(z=Math.max(z,A));if("afterPrecision"===h&&"keyword"===B.type&&"precision"===B.data){a:{for(B=A;B<t.length;B++){var u=t[B];if("operator"===u.type&&";"===u.data)break a}B=null}if(null===B)throw Error("precision statement not followed by any semicolons!");z=Math.max(z,B)}x<
z&&0===v&&(x=A)}return x+1}(d);p(l-1)&&d.splice(l++,0,n);for(var m=0;m<f.length;m++){var r=f[m];d.splice(l++,0,r)}p(l-1)&&p(l)&&d.splice(l,0,n)}Object.defineProperty(q,"__esModule",{value:!0});var c=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];q.transpileShader=function(d,f){var h=b(d);a:{var n="100";var p="300 es";void 0===n&&(n="100");void 0===p&&(p="300 es");for(var l=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,m=0;m<h.length;m++){var r=
h[m];if("preprocessor"===r.type){var t=l.exec(r.data);if(t)if(l=t[1].replace(/\s\s+/g," "),l===p){n=l;break a}else if(l===n){r.data="#version "+p;break a}else throw Error("unknown glsl version: "+l);}}h.splice(0,0,{type:"preprocessor",data:"#version "+p},{type:"whitespace",data:"\n"});n=null}if("300 es"===n)throw Error("shader is already glsl 300 es");l=r=null;m={};t={};for(n=0;n<h.length;++n)switch(p=h[n],p.type){case "keyword":"vertex"===f&&"attribute"===p.data?p.data="in":"varying"===p.data&&(p.data=
"vertex"===f?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(p.data.trim())&&(p.data=p.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===f&&"gl_FragColor"===p.data){if(!r){r=g(h,m,"fragColor");var x=void 0;void 0===x&&(x="lowp");k(h,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:x},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:r},{type:"operator",data:";"}],"afterPrecision")}p.data=
r}else"fragment"===f&&"gl_FragDepthEXT"===p.data&&(l||(l=g(h,m,"gl_FragDepth")),p.data=l);break;case "ident":if(0<=a.indexOf(p.data)){if(x="vertex"===f)a:{for(x=n-1;0<=x;x--){var v=h[x];if("whitespace"!==v.type&&"block-comment"!==v.type)if("keyword"===v.type){if("attribute"===v.data||"in"===v.data){x=!0;break a}}else break}x=!1}if(x)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");p.data in t||(t[p.data]=g(h,m,p.data));p.data=t[p.data]}}for(n=h.length-1;0<=
n;--n)p=h[n],"preprocessor"===p.type&&((r=p.data.match(/#extension\s+(.*):/))&&r[1]&&0<=c.indexOf(r[1].trim())&&(r=h[n+1],h.splice(n,r&&"whitespace"===r.type?2:1)),(r=p.data.match(/#ifdef\s+(.*)/))&&r[1]&&0<=c.indexOf(r[1].trim())&&(p.data="#if 1"),(r=p.data.match(/#ifndef\s+(.*)/))&&r[1]&&0<=c.indexOf(r[1].trim())&&(p.data="#if 0"));return e(h)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(F,q){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(F){"use strict;";return function(q){var a=F(),b=[];b=b.concat(a(q));return b=b.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(F,q,a){"use strict;";var b="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function e(y){y.length&&
x.push({type:b[l],data:y,position:A,line:v,column:z})}function g(){t=t.length?[]:t;if("/"===r&&"*"===m)return A=p+n-1,l=0,r=m,n+1;if("/"===r&&"/"===m)return A=p+n-1,l=1,r=m,n+1;if("#"===m)return l=2,A=p+n,n;if(/\s/.test(m))return l=9,A=p+n,n;B=/\d/.test(m);u=/[^\w_]/.test(m);A=p+n;l=B?4:u?3:9999;return n}function k(){if(("\r"===m||"\n"===m)&&"\\"!==r)return e(t.join("")),l=999,n;t.push(m);r=m;return n+1}function c(){if("."===r&&/\d/.test(m))return l=5,n;if("/"===r&&"*"===m)return l=0,n;if("/"===r&&
"/"===m)return l=1,n;if("."===m&&t.length){for(;d(t););l=5;return n}if(";"===m||")"===m||"("===m){if(t.length)for(;d(t););e(m);l=999;return n+1}var y=2===t.length&&"\x3d"!==m;if(/[\w_\d\s]/.test(m)||y){for(;d(t););l=999;return n}t.push(m);r=m;return n+1}function d(y){var C=0;do{var G=q.indexOf(y.slice(0,y.length+C).join(""));var I=q[G];if(-1===G){if(0<C--+y.length)continue;I=y.slice(0,1).join("")}e(I);A+=I.length;t=t.slice(I.length);return t.length}while(1)}function f(){if("."===m||/[eE]/.test(m))return t.push(m),
l=5,r=m,n+1;if("x"===m&&1===t.length&&"0"===t[0])return l=11,t.push(m),r=m,n+1;if(/[^\d]/.test(m))return e(t.join("")),l=999,n;t.push(m);r=m;return n+1}function h(){"f"===m&&(t.push(m),r=m,n+=1);if(/[eE]/.test(m)||"-"===m&&/[eE]/.test(r))return t.push(m),r=m,n+1;if(/[^\d]/.test(m))return e(t.join("")),l=999,n;t.push(m);r=m;return n+1}var n=0,p=0,l=999,m,r,t=[],x=[],v=1,z=0,A=0,B=!1,u=!1,w="",D;return function(y){x=[];if(null!==y){y=y.replace?y.replace(/\r\n/g,"\n"):y;n=0;w+=y;for(D=w.length;m=w[n],
n<D;){y=n;switch(l){case 0:"/"===m&&"*"===r?(t.push(m),e(t.join("")),l=999):(t.push(m),r=m);n+=1;break;case 1:n=k();break;case 2:n=k();break;case 3:n=c();break;case 4:n=f();break;case 11:/[^a-fA-F0-9]/.test(m)?(e(t.join("")),l=999):(t.push(m),r=m,n+=1);break;case 5:n=h();break;case 9999:if(/[^\d\w_]/.test(m)){var C=t.join("");l=-1<F.indexOf(C)?8:-1<a.indexOf(C)?7:6;e(t.join(""));l=999}else t.push(m),r=m,n+=1;break;case 9:/[^\s]/g.test(m)?(e(t.join("")),l=999):(t.push(m),r=m,n+=1);break;case 999:n=
g()}if(y!==n)switch(w[y]){case "\n":z=0;++v;break;default:++z}}p+=n;w=w.slice(n);return x}t.length&&e(t.join(""));l=10;e("(eof)");return x}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(F,q,a,b){return function(){function e(g,k,c){if("string"===typeof g)var d=g;else d=g.programNamePrefix,k=g.shaderSnippetPrefixes,c=g.baseDefines;b.assert(k,"you must specify shader snippet prefixes");b.assert(2===k.length,"you must specify shader snippet prefixes for vertex and fragment shaders");c&&0!==c.length||(c=[]);this.programNamePrefix=d;this.shaderSnippetPrefixes=
k;this.baseDefines=c;this.variables=[];this.sealed=!1}e.prototype.addDefine=function(g,k,c,d){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");b.assert(g,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",g],shaderNameSuffixes:d||g,defineStr:k,affectsShaderTypes:c||[!0,!0]})};e.prototype.addBinaryShaderSnippetSuffix=function(g,k,c){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
b.assert(g,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",g],shaderSnippetSuffixes:["",k],affectsShaderTypes:c||[!0,!0]})};e.prototype.addNaryShaderSnippetSuffix=function(g,k){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var c=g.map(function(d){b.assert(null!=d.value,"value must always be specified");return d.value});this.variables.push({values:c,programNameSuffixes:g.map(function(d,f){return null!=d.programNameSuffix?
d.programNameSuffix:c[f]}),shaderSnippetSuffixes:g.map(function(d,f){return null!=d.shaderSnippetSuffix?d.shaderSnippetSuffix:c[f]}),affectsShaderTypes:k||[!0,!0]})};e.prototype.getShaderVariation=function(g){b.assert(g.length===this.variables.length,"you must specify a value for each variable");for(var k=this.programNamePrefix,c=a.clone(this.shaderSnippetPrefixes),d=a.clone(this.shaderSnippetPrefixes),f=a.clone(this.baseDefines),h=0;h<this.variables.length;h++){var n=this.variables[h],p=g[h],l=void 0;
n.values?(l=n.values.indexOf(p),b.assert(0<=l,"invalid value "+p+" for variable "+h)):l=p?1:0;k+=n.programNameSuffixes[l];for(p=0;2>p;p++)n.affectsShaderTypes[p]&&(n.shaderSnippetSuffixes&&(c[p]+=n.shaderSnippetSuffixes[l],d[p]+=n.shaderSnippetSuffixes[l]),n.defineStr&&l&&(f.push(n.defineStr),d[p]+=n.shaderNameSuffixes))}return{programName:k,shaderSnippetNames:c,shaderNames:d,defines:f}};return e}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/Error"],function(F,q,a,b){return function(){function e(){}e.vertexCount=function(g,k){return g.vertexBuffers[k].size/e.getStride(g.layout[k])};e.getStride=function(g){return g[0].stride};e.getBytesPerElement=function(g){switch(g){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};e.addDescriptor=function(g,k,c,d,f,h){var n=e.getBytesPerElement(d);if(0<g.length){var p=
g[0].stride,l=p+n*c;g.forEach(function(m){return m.stride=l});g.push({name:k,count:c,type:d,offset:p,stride:l,normalized:f,divisor:h})}else g.push({name:k,count:c,type:d,offset:0,stride:n*c,normalized:f,divisor:h})};e.assertCompatibleVertexAttributeLocations=function(g,k){return g.locations===k.locations};e.hasAttribute=function(g,k){for(var c=0;c<g.length;c++)if(g[c].name===k)return!0;return!1};e.findAttribute=function(g,k){for(var c=0;c<g.length;c++)if(g[c].name===k)return g[c];return null};e.copyFramebufferToTexture=
function(g,k,c,d,f){void 0===f&&(f=0);var h=g.getBoundFramebufferObject(),n=g.getBoundTexture(0);g.bindFramebuffer(k);g.bindTexture(c,0);g.gl.copyTexImage2D(g.gl.TEXTURE_2D,f,c.descriptor.pixelFormat,d[0],d[1],d[2],d[3],0);g.gl.flush();g.bindFramebuffer(h);g.bindTexture(n,0)};e.assert=function(g,k){if(!g)throw new b(k);};e.setBaseInstanceOffset=function(g,k){var c={},d;for(d in g)c[d]=g[d].map(function(f){return f.divisor?a({},f,{baseInstance:k}):f});return c};e.bindVertexBufferLayout=function(g,
k,c,d,f){var h=g.gl,n=g.capabilities.instancing;g.bindBuffer(c);d.forEach(function(p){var l=k[p.name],m=(f?f:0+p.baseInstance?p.baseInstance:0)*p.stride;if(4>=p.count)h.vertexAttribPointer(l,p.count,p.type,p.normalized,p.stride,p.offset+m),h.enableVertexAttribArray(l),p.divisor&&0<p.divisor&&n&&n.vertexAttribDivisor(l,p.divisor);else if(9===p.count)for(var r=0;3>r;r++)h.vertexAttribPointer(l+r,3,p.type,p.normalized,p.stride,p.offset+12*r+m),h.enableVertexAttribArray(l+r),p.divisor&&0<p.divisor&&n&&
n.vertexAttribDivisor(l+r,p.divisor);else if(16===p.count)for(r=0;4>r;r++)h.vertexAttribPointer(l+r,4,p.type,p.normalized,p.stride,p.offset+16*r+m),h.enableVertexAttribArray(l+r),p.divisor&&0<p.divisor&&n&&n.vertexAttribDivisor(l+r,p.divisor)})};e.unbindVertexBufferLayout=function(g,k,c,d){var f=g.gl;g.bindBuffer(c);d.forEach(function(h){var n=k[h.name];if(4>=h.count)f.disableVertexAttribArray(n);else if(9===h.count)for(h=0;3>h;h++)f.disableVertexAttribArray(n+h);else if(16===h.count)for(h=0;4>h;h++)f.disableVertexAttribArray(n+
h)});g.unbindBuffer(34962)};return e}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(F,q,a,b,e,g,k,c,d,f){function h(u){return u.map(function(w){return w.name})}function n(u){for(var w={},D=0;D<u.length;D++){var y=u[D];w[y.name]=y.strideInBytes}return w}function p(u,
w){switch(u){case d.WGLGeometryType.MARKER:return w?q.C_ICON_VERTEX_NAMES_VV:q.C_ICON_VERTEX_NAMES;case d.WGLGeometryType.FILL:return w?q.C_FILL_VERTEX_NAMES_VV:q.C_FILL_VERTEX_NAMES;case d.WGLGeometryType.LINE:return w?q.C_LINE_VERTEX_NAMES_VV:q.C_LINE_VERTEX_NAMES;case d.WGLGeometryType.TEXT:return w?q.C_TEXT_VERTEX_NAMES_VV:q.C_TEXT_VERTEX_NAMES;case d.WGLGeometryType.LABEL:return q.C_LABEL_VERTEX_NAMES}return null}function l(u){switch(u){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return u}function m(u){if(u=l(u.type)){switch(u){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function r(u){if(u=l(u.type)){switch(u){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function t(u){if(u=l(u.type)){switch(u){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}}function x(u){if(u=l(u.type)){switch(u){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function v(u){return u&&u.length||0}function z(u){return"string"===typeof u}Object.defineProperty(q,"__esModule",{value:!0});var A=e.getLogger("esri.views.2d.engine.webgl.Utils");q.C_HITTEST_SEARCH_SIZE=4;q.C_VBO_GEOMETRY="geometry";q.C_VBO_PERINSTANCE="per_instance";q.C_VBO_PERINSTANCE_VV="per_instance_vv";q.C_VBO_VISIBILITY="visibility";q.C_VBO_VISIBILITY_RANGE=
"visibilityRange";q.C_ICON_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];q.C_ICON_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];q.C_ICON_HEATMAP=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_FILL_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];q.C_FILL_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_LINE_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_LINE_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,
strideInBytes:44,divisor:0}];q.C_TEXT_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];q.C_TEXT_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];q.C_LABEL_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:q.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];q.C_ICON_VERTEX_NAMES=h(q.C_ICON_VERTEX_DEF);
q.C_ICON_VERTEX_NAMES_VV=h(q.C_ICON_VERTEX_DEF_VV);q.C_FILL_VERTEX_NAMES=h(q.C_FILL_VERTEX_DEF);q.C_FILL_VERTEX_NAMES_VV=h(q.C_FILL_VERTEX_DEF_VV);q.C_LINE_VERTEX_NAMES=h(q.C_LINE_VERTEX_DEF);q.C_LINE_VERTEX_NAMES_VV=h(q.C_LINE_VERTEX_DEF_VV);q.C_TEXT_VERTEX_NAMES=h(q.C_TEXT_VERTEX_DEF);q.C_TEXT_VERTEX_NAMES_VV=h(q.C_TEXT_VERTEX_DEF_VV);q.C_LABEL_VERTEX_NAMES=h(q.C_LABEL_VERTEX_DEF);q.C_ICON_STRIDE_SPEC=n(q.C_ICON_VERTEX_DEF);q.C_ICON_STRIDE_SPEC_VV=n(q.C_ICON_VERTEX_DEF_VV);q.C_ICON_STRIDE_SPEC_HEATMAP=
n(q.C_ICON_HEATMAP);q.C_FILL_STRIDE_SPEC=n(q.C_FILL_VERTEX_DEF);q.C_FILL_STRIDE_SPEC_VV=n(q.C_FILL_VERTEX_DEF_VV);q.C_LINE_STRIDE_SPEC=n(q.C_LINE_VERTEX_DEF);q.C_LINE_STRIDE_SPEC_VV=n(q.C_LINE_VERTEX_DEF_VV);q.C_TEXT_STRIDE_SPEC=n(q.C_TEXT_VERTEX_DEF);q.C_TEXT_STRIDE_SPEC_VV=n(q.C_TEXT_VERTEX_DEF_VV);q.C_LABEL_STRIDE_SPEC=n(q.C_LABEL_VERTEX_DEF);q.getStrides=function(u,w,D){void 0===D&&(D=!1);switch(u){case d.WGLGeometryType.MARKER:return w?q.C_ICON_STRIDE_SPEC_VV:D?q.C_ICON_STRIDE_SPEC_HEATMAP:q.C_ICON_STRIDE_SPEC;
case d.WGLGeometryType.FILL:return w?q.C_FILL_STRIDE_SPEC_VV:q.C_FILL_STRIDE_SPEC;case d.WGLGeometryType.LINE:return w?q.C_LINE_STRIDE_SPEC_VV:q.C_LINE_STRIDE_SPEC;case d.WGLGeometryType.TEXT:return w?q.C_TEXT_STRIDE_SPEC_VV:q.C_TEXT_STRIDE_SPEC;case d.WGLGeometryType.LABEL:return q.C_LABEL_STRIDE_SPEC}return null};q.getNamedBuffers=p;q.getSymbolGeometryType=function(u){return m(u)?d.WGLGeometryType.MARKER:t(u)?d.WGLGeometryType.LINE:r(u)?d.WGLGeometryType.FILL:x(u)?d.WGLGeometryType.TEXT:d.WGLGeometryType.UNKNOWN};
q.normalizeSymbolType=l;q.isMarkerSymbol=m;q.isFillSymbol=r;q.isLineSymbol=t;q.isPictureSymbol=function(u){if(u=l(u.type))switch(u){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};q.isTextSymbol=x;q.getTextProperties=function(u){return f.TextProperties.pool.acquire(u.color?c.copyAndPremultiply(u.color):[255,255,255,255],u.haloColor?c.copyAndPremultiply(u.haloColor):[255,255,255,255],g.pt2px(u.haloSize),g.pt2px(u.font.size),u.angle*Math.PI/180,u.xoffset/u.font.size,
u.yoffset/u.font.size,"left"===u.horizontalAlignment?0:"right"===u.horizontalAlignment?1:.5,"top"===u.verticalAlignment?0:"bottom"===u.verticalAlignment?1:.5)};q.isSameUniformValue=function(u,w){return!1};q.isSameMaterialInfo=function(u,w){if(u.materialKey!==w.materialKey||v(u.texBindingInfo)!==v(w.texBindingInfo)||v(u.materialParams)!==v(w.materialParams))return!1;for(var D=u.texBindingInfo.length,y=0;y<D;++y){var C=u.texBindingInfo[y],G=w.texBindingInfo[y];if(C.unit!==G.unit||C.pageId!==G.pageId||
C.semantic!==G.semantic)return!1}D=u.materialParams.length;for(y=0;y<D;)return!1;return!0};q.serializeString=function(u,w,D){for(var y=0,C=u.length,G=0;G<C;++G)w&&(w[D+y]=u.charCodeAt(G)),++y;w&&(w[D+y]=0);++y;return y};q.deserializeString=function(u,w,D){var y=0;u.s="";for(var C=!0;C;){var G=w[D+y];++y;0!==G?u.s+=String.fromCharCode(G):C=!1}return y};q.isDefined=function(u){return null!==u&&void 0!==u};q.isNumber=function(u){return"number"===typeof u};q.isString=z;q.isStringOrNull=function(u){return null==
u||z(u)};q.lerp=function(u,w,D){return u+(w-u)*D};F=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(w,D){this._arr.push(D)};u.prototype.getKeys=function(w){this._arr.length=0;w&&w.forEach(this._push);return this._arr};return u}();q.KeysGetter=F;F=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(w,D){this._arr.push(w)};u.prototype.getValues=function(w){this._arr.length=0;w&&w.forEach(this._push);return this._arr};
return u}();q.ValuesGetter=F;q.getCapType=function(u){switch(u){case "butt":return d.CapType.BUTT;case "round":return d.CapType.ROUND;case "square":return d.CapType.SQUARE;default:return A.error("Cannot interpret unknown cap: "+u),d.CapType.UNKNOWN}};q.getJoinType=function(u){switch(u){case "miter":return d.JoinType.MITER;case "bevel":return d.JoinType.BEVEL;case "round":return d.JoinType.ROUND;default:return A.error("Cannot interpret unknown join: "+u),d.JoinType.UNKNOWN}};q.getVVType=function(u){switch(u){case "opacity":return d.VVType.OPACITY;
case "color":return d.VVType.COLOR;case "rotation":return d.VVType.ROTATION;case "size":return d.VVType.SIZE;default:return A.error("Cannot interpret unknown vv: "+u),null}};q.createArcadeFunction=function(u,w){var D=u.spatialReference,y=u.layer,C=k.createFunction(u.valueExpression),G=new b;return function(I,O){G.repurposeFromGraphicLikeObject(I.geometry,I.attributes,y);var R=O&&new a({viewingMode:O.viewingMode,scale:O.scale});R=k.executeFunction(C,{vars:{$feature:G,$view:R||{}},spatialReference:D});
return w?w(R):R}};q.copyMeshData=function(u,w,D,y,C,G,I){for(var O in G){var R=G[O].stride,Z=G[O].data,W=D[O].data,da=R*C.vertexCount/4,ea=R*u/4,Y=R*C.vertexFrom/4;for(R=0;R<da;++R)W[R+ea]=Z[R+Y]}D=C.indexCount;for(R=0;R<D;++R)y[R+w]=I[R+C.indexFrom]-C.vertexFrom+u};q.C_VBO_INFO=(B={},B[q.C_VBO_GEOMETRY]=35044,B[q.C_VBO_VISIBILITY]=35044,B[q.C_VBO_VISIBILITY_RANGE]=35048,B);q.createGeometryData=function(u,w,D){for(var y=[],C=0;5>C;++C){for(var G={},I=0,O=p(C,u);I<O.length;I++){var R=O[I];G[R]={data:D(C,
R)}}y.push({data:w(C),buffers:G})}return y};var B})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(F,q,a){return a})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),function(F,q,a,b,e,g,k){function c(f,h){void 0===h&&(h=!1);if(null===f||void 0===f)return null;if(g.isNumber(f))return g.toNumber(f);
if(g.isBoolean(f))return g.toBoolean(f);if(g.isString(f))return g.toString(f);if(g.isDate(f))return g.toDate(f);if(g.isArray(f)){for(var n=[],p=0;p<f.length;p++)n.push(c(f[p],h));return n}p=new d;p.immutable=!1;for(var l=0,m=Object.keys(f);l<m.length;l++){var r=m[l];n=f[r];void 0!==n&&p.setField(r,c(n,h))}p.immutable=h;return p}var d=function(){function f(h){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=h instanceof f?h.attributes:
void 0===h?{}:null===h?{}:h}f.prototype.field=function(h){var n=h.toLowerCase(),p=this.attributes[h];if(void 0!==p)return p;for(var l in this.attributes)if(l.toLowerCase()===n)return this.attributes[l];throw Error("Field not Found : "+h);};f.prototype.setField=function(h,n){if(this.immutable)throw Error("Dictionary is Immutable");var p=h.toLowerCase();if(void 0===this.attributes[h])for(var l in this.attributes)if(l.toLowerCase()===p){this.attributes[l]=n;return}this.attributes[h]=n};f.prototype.hasField=
function(h){var n=h.toLowerCase();if(void 0!==this.attributes[h])return!0;for(var p in this.attributes)if(p.toLowerCase()===n)return!0;return!1};f.prototype.keys=function(){var h=[],n;for(n in this.attributes)h.push(n);return h=h.sort()};f.prototype.castToText=function(){var h="",n;for(n in this.attributes){""!==h&&(h+=",");var p=this.attributes[n];null==p?h+=JSON.stringify(n)+":null":g.isBoolean(p)||g.isNumber(p)||g.isString(p)?h+=JSON.stringify(n)+":"+JSON.stringify(p):p instanceof k?h+=JSON.stringify(n)+
":"+g.toStringExplicit(p):p instanceof e?h+=JSON.stringify(n)+":"+g.toStringExplicit(p):p instanceof Array?h+=JSON.stringify(n)+":"+g.toStringExplicit(p):p instanceof Date?h+=JSON.stringify(n)+":"+JSON.stringify(p):null!==p&&"object"===typeof p&&void 0!==p.castToText&&(h+=JSON.stringify(n)+":"+p.castToText())}return"{"+h+"}"};f.convertObjectToArcadeDictionary=function(h,n){void 0===n&&(n=!0);var p=new f;p.immutable=!1;for(var l in h){var m=h[l];void 0!==m&&p.setField(l.toString(),c(m))}p.immutable=
n;return p};f.convertJsonToArcade=function(h,n){void 0===n&&(n=!1);return c(h,n)};f.prototype.castAsJson=function(h){void 0===h&&(h=null);var n={};for(l in this.attributes){var p=this.attributes[l];if(void 0!==p){if(null===h||void 0===h?0:h.keyTranslate)var l=h.keyTranslate(l);n[l]=g.castAsJson(p,h)}}return n};f.prototype.castDictionaryValueAsJsonAsync=function(h,n,p,l,m){void 0===l&&(l=null);return a(this,void 0,void 0,function(){var r;return b(this,function(t){switch(t.label){case 0:return[4,g.castAsJsonAsync(p,
l,m)];case 1:return r=t.sent(),h[n]=r,[2,r]}})})};f.prototype.castAsJsonAsync=function(h,n){void 0===h&&(h=null);void 0===n&&(n=null);return a(this,void 0,void 0,function(){var p,l,m,r;return b(this,function(t){switch(t.label){case 0:p={};l=[];for(m in this.attributes){r=this.attributes[m];if(null===n||void 0===n?0:n.keyTranslate)m=n.keyTranslate(m);void 0!==r&&(g.isSimpleType(r)||r instanceof k||r instanceof Date?p[m]=g.castAsJson(r,n):l.push(this.castDictionaryValueAsJsonAsync(p,m,r,h,n)))}return 0<
l.length?[4,Promise.all(l)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,p]}})})};return f}();return d})},"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(F,q,a,b){function e(g){return g instanceof a?g:new a(function(k){k(g)})}return new (a||(a=Promise))(function(g,k){function c(h){try{f(b.next(h))}catch(n){k(n)}}function d(h){try{f(b["throw"](h))}catch(n){k(n)}}function f(h){h.done?g(h.value):e(h.value).then(c,d)}f((b=b.apply(F,q||[])).next())})}}()})},
"esri/arcade/polyfill/tsSupport/generator":function(){define([],function(){return function(){return function(F,q){function a(f){return function(h){return b([f,h])}}function b(f){if(g)throw new TypeError("Generator is already executing.");for(;e;)try{if(g=1,k&&(c=f[0]&2?k["return"]:f[0]?k["throw"]||((c=k["return"])&&c.call(k),0):k.next)&&!(c=c.call(k,f[1])).done)return c;if(k=0,c)f=[f[0]&2,c.value];switch(f[0]){case 0:case 1:c=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++;k=
f[1];f=[0];continue;case 7:f=e.ops.pop();e.trys.pop();continue;default:if(!(c=e.trys,c=0<c.length&&c[c.length-1])&&(6===f[0]||2===f[0])){e=0;continue}if(3===f[0]&&(!c||f[1]>c[0]&&f[1]<c[3]))e.label=f[1];else if(6===f[0]&&e.label<c[1])e.label=c[1],c=f;else if(c&&e.label<c[2])e.label=c[2],e.ops.push(f);else{c[2]&&e.ops.pop();e.trys.pop();continue}}f=q.call(F,e)}catch(h){f=[6,h],k=0}finally{g=c=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}var e={label:0,sent:function(){if(c[0]&1)throw c[1];
return c[1]},trys:[],ops:[]},g,k,c,d;return d={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(F,q){return function(){function a(b){void 0===b&&(b=[]);this._elements=b}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(b){return this._elements[b]};a.prototype.toArray=function(){for(var b=[],e=0;e<this.length();e++)b.push(this.get(e));
return b};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared".split(" "),function(F,
q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v,z){function A(M,aa,ma){return""===aa||null===aa||void 0===aa||aa===ma||aa===ma?M:M=M.split(aa).join(ma)}function B(M){return M instanceof Fa||M instanceof k||M instanceof Ea}function u(M){return w(M)||y(M)||I(M)||D(M)||null===M||M===q.voidOperation||"number"===typeof M?!0:!1}function w(M){return"string"===typeof M||M instanceof String}function D(M){return"boolean"===typeof M}function y(M){return"number"===typeof M}function C(M){return M instanceof Array}function G(M){return M instanceof
c}function I(M){return M instanceof Date}function O(M,aa){if(!1===isNaN(M)){if(void 0===aa||null===aa||""===aa)return M.toString();aa=A(aa,"\u2030","");aa=A(aa,"\u00a4","");return x.format(M,{pattern:aa})}return M.toString()}function R(M,aa){var ma=t.DateTime.fromJSDate(M);return void 0===aa||null===aa||""===aa?ma.toISO({suppressMilliseconds:!0}):ma.toFormat(Z(aa),{locale:v.locale,numberingSystem:"latn"})}function Z(M){M=M.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var aa="",ma=0;for(M=M.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);ma<
M.length;ma++){var U=M[ma];switch(U){case "D":aa+="d";break;case "DD":aa+="dd";break;case "DDD":aa+="o";break;case "d":aa+="c";break;case "ddd":aa+="ccc";break;case "dddd":aa+="cccc";break;case "M":aa+="L";break;case "MM":aa+="LL";break;case "MMM":aa+="LLL";break;case "MMMM":aa+="LLLL";break;case "YY":aa+="yy";break;case "Y":case "YYYY":aa+="yyyy";break;case "Q":aa+="q";break;case "Z":aa+="ZZ";break;case "ZZ":aa+="ZZZ";break;case "S":aa+="'S'";break;case "SS":aa+="'SS'";break;case "SSS":aa+="u";break;
case "A":case "a":aa+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":aa+=U;break;default:aa=2<=U.length&&"["===U.slice(0,1)&&"]"===U.slice(-1)?aa+("'"+U.slice(1,-1)+"'"):aa+("'"+U+"'")}}return aa}function W(M,aa,ma){switch(ma){case "\x3e":return M>aa;case "\x3c":return M<aa;case "\x3e\x3d":return M>=aa;case "\x3c\x3d":return M<=aa}return!1}function da(M,aa){if(M===aa||null===M&&aa===q.voidOperation||null===aa&&M===q.voidOperation)return!0;if(I(M)&&
I(aa))return M.getTime()===aa.getTime();if(M instanceof d||M instanceof f)return M.equalityTest(aa);if(M instanceof l&&aa instanceof l){var ma=M.getCacheValue("_arcadeCacheId"),U=aa.getCacheValue("_arcadeCacheId");if(void 0!==ma&&null!==ma)return ma===U}return void 0!==M&&void 0!==aa&&null!==M&&null!==aa&&"object"===typeof M&&"object"===typeof aa&&(M._arcadeCacheId===aa._arcadeCacheId&&void 0!==M._arcadeCacheId&&null!==M._arcadeCacheId||M._underlyingGraphic===aa._underlyingGraphic&&void 0!==M._underlyingGraphic&&
null!==M._underlyingGraphic)?!0:!1}function ea(M,aa){if(w(M))return M;if(null===M)return"";if(y(M))return O(M,aa);if(D(M))return M.toString();if(I(M))return R(M,aa);if(M instanceof n)return JSON.stringify(M.toJson());if(C(M)){for(var ma=[],U=0;U<M.length;U++)ma[U]=ba(M[U]);return"["+ma.join(",")+"]"}if(M instanceof c){ma=[];for(U=0;U<M.length();U++)ma[U]=ba(M.get(U));return"["+ma.join(",")+"]"}return null!==M&&"object"===typeof M&&void 0!==M.castToText?M.castToText():B(M)?"object, Function":""}function Y(M,
aa){if(w(M))return M;if(null===M)return"";if(y(M))return O(M,aa);if(D(M))return M.toString();if(I(M))return R(M,aa);if(M instanceof n)return M instanceof h?'{"xmin":'+M.xmin.toString()+',"ymin":'+M.ymin.toString()+","+(M.hasZ?'"zmin":'+M.zmin.toString()+",":"")+(M.hasM?'"mmin":'+M.mmin.toString()+",":"")+'"xmax":'+M.xmax.toString()+',"ymax":'+M.ymax.toString()+","+(M.hasZ?'"zmax":'+M.zmax.toString()+",":"")+(M.hasM?'"mmax":'+M.mmax.toString()+",":"")+'"spatialReference":'+qa(M.spatialReference)+"}":
qa(M.toJson(),function(T,ha){return T.key===ha.key?0:"spatialReference"===T.key?1:"spatialReference"===ha.key||T.key<ha.key?-1:T.key>ha.key?1:0});if(C(M)){for(var ma=[],U=0;U<M.length;U++)ma[U]=ba(M[U]);return"["+ma.join(",")+"]"}if(M instanceof c){ma=[];for(U=0;U<M.length();U++)ma[U]=ba(M.get(U));return"["+ma.join(",")+"]"}return null!==M&&"object"===typeof M&&void 0!==M.castToText?M.castToText():B(M)?"object, Function":""}function ba(M){return null===M?"null":D(M)||y(M)||w(M)?JSON.stringify(M):
M instanceof n||M instanceof c||M instanceof Array?Y(M):M instanceof Date?JSON.stringify(R(M,"")):null!==M&&"object"===typeof M&&void 0!==M.castToText?M.castToText():"null"}function Q(M,aa){return y(M)?M:null===M||""===M?0:I(M)?NaN:D(M)?M?1:0:C(M)||""===M||void 0===M?NaN:void 0!==aa&&w(M)?(aa=A(aa,"\u2030",""),aa=A(aa,"\u00a4",""),x.parse(M,{pattern:aa})):M===q.voidOperation?0:Number(M)}function fa(M){var aa=/ (\d\d)/,ma=t.DateTime.fromISO(M);return ma.isValid||aa.test(M)&&(M=M.replace(aa,"T$1"),
ma=t.DateTime.fromISO(M),ma.isValid)?ma:null}function S(M,aa){if(!M||!M.domain)return aa;var ma=null;if("string"===M.field.type||"esriFieldTypeString"===M.field.type)aa=ea(aa);else{if(null===aa||void 0===aa)return null;if(""===aa)return aa;aa=Q(aa)}for(var U=0;U<M.domain.codedValues.length;U++){var T=M.domain.codedValues[U];T.code===aa&&(ma=T)}return null===ma?aa:ma.name}function X(M,aa){if(!M||!M.domain)return aa;var ma=null;aa=ea(aa);for(var U=0;U<M.domain.codedValues.length;U++){var T=M.domain.codedValues[U];
T.name===aa&&(ma=T)}return null===ma?aa:ma.code}function la(M,aa,ma,U){void 0===ma&&(ma=null);void 0===U&&(U=null);if(!aa||!aa.fields)return null;for(var T=null,ha=0;ha<aa.fields.length;ha++){var ka=aa.fields[ha];ka.name.toLowerCase()===M.toString().toLowerCase()&&(T=ka)}if(null===T)throw Error("Field not found");var K,P;null===U&&ma&&aa.typeIdField&&(U=ma.hasField(aa.typeIdField)?ma.field(aa.typeIdField):null);null!==U&&void 0!==U&&aa.types.some(function(ca){return ca.id===U?((K=ca.domains&&ca.domains[T.name])&&
"inherited"===K.type&&(K=na(T.name,aa),P=!0),!0):!1});P||K||(K=na(M,aa));return{field:T,domain:K}}function na(M,aa){var ma;aa.fields.some(function(U){U.name.toLowerCase()===M.toLowerCase()&&(ma=U.domain);return!!ma});return ma}function qa(M,aa){aa||(aa={});"function"===typeof aa&&(aa={cmp:aa});var ma="boolean"===typeof aa.cycles?aa.cycles:!1,U=aa.cmp&&function(ha){return function(ka){return function(K,P){return ha({key:K,value:ka[K]},{key:P,value:ka[P]})}}}(aa.cmp),T=[];return function K(ka){ka&&
ka.toJson&&"function"===typeof ka.toJson&&(ka=ka.toJson());if(void 0!==ka){if("number"===typeof ka)return isFinite(ka)?""+ka:"null";if("object"!==typeof ka)return JSON.stringify(ka);var P;if(Array.isArray(ka)){var ca="[";for(P=0;P<ka.length;P++)P&&(ca+=","),ca+=K(ka[P])||"null";return ca+"]"}if(null===ka)return"null";if(T.includes(ka)){if(ma)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ia=T.push(ka)-1,oa=Object.keys(ka).sort(U&&U(ka));ca="";
for(P=0;P<oa.length;P++){var Aa=oa[P],Ca=K(ka[Aa]);Ca&&(ca&&(ca+=","),ca+=JSON.stringify(Aa)+":"+Ca)}T.splice(ia,1);return"{"+ca+"}"}}(M)}function ta(M,aa){if(aa instanceof l)M.push([aa.x,aa.y]);else throw Error("Invalid Argument");}function ya(M,aa){void 0===aa&&(aa=null);if(null!=M){if(D(M)||y(M)||w(M))return M;if(M instanceof n)return!0===(null===aa||void 0===aa?void 0:aa.keepGeometryType)?M:M.toJson();if(M instanceof c)return M.toArray().map(function(ma){return ya(ma,aa)});if(M instanceof Array)return M.map(function(ma){return ya(ma,
aa)});if(M instanceof Date)return M;if(null!==M&&"object"===typeof M&&void 0!==M.castAsJson)return M.castAsJson(aa)}return null}function za(M,aa,ma,U,T){return a(this,void 0,void 0,function(){var ha;return b(this,function(ka){switch(ka.label){case 0:return[4,va(M,aa,ma)];case 1:return ha=ka.sent(),T[U]=ha,[2]}})})}function va(M,aa,ma){void 0===aa&&(aa=null);void 0===ma&&(ma=null);return a(this,void 0,void 0,function(){var U,T,ha,ka,K;return b(this,function(P){switch(P.label){case 0:return M instanceof
c&&(M=M.toArray()),null!=M?[3,1]:[2,null];case 1:return u(M)||M instanceof n||M instanceof Date?[2,ya(M,ma)]:[3,2];case 2:if(!(M instanceof Array))return[3,5];U=[];T=[];ha=0;for(ka=M;ha<ka.length;ha++)K=ka[ha],null===K||u(K)||K instanceof n||K instanceof Date?T.push(ya(K,ma)):(T.push(null),U.push(za(K,aa,ma,T.length-1,T)));return 0<U.length?[4,Promise.all(U)]:[3,4];case 3:P.sent(),P.label=4;case 4:return[2,T];case 5:if(null!==M&&"object"===typeof M&&void 0!==M.castAsJsonAsync)return[2,M.castAsJsonAsync(aa,
ma)];P.label=6;case 6:return[2,null]}})})}Object.defineProperty(q,"__esModule",{value:!0});q.featureSchema=q.featureDomainCodeLookup=q.featureDomainValueLookup=q.featureSubtypes=q.featureFullDomain=q.castAsJsonAsync=q.castAsJson=q.binaryOperator=q.tick=q.toStringArray=q.autoCastArrayOfPointsToMultiPoint=q.autoCastArrayOfPointsToPolyline=q.autoCastArrayOfPointsToPolygon=q.autoCastFeatureToGeometry=q.stableStringify=q.getDomain=q.getDomainCode=q.getDomainValue=q.fixNullGeometry=q.fixSpatialReference=
q.toBoolean=q.toDateTime=q.toDate=q.toNumber=q.toStringExplicit=q.toNumberArray=q.toString=q.equalityTest=q.greaterThanLessThan=q.standardiseDateFormat=q.formatDate=q.formatNumber=q.generateUUID=q.absRound=q.pcCheck=q.isDate=q.isImmutableArray=q.isFeatureSetCollection=q.isFeatureSet=q.isFeature=q.isArray=q.isInteger=q.isNumber=q.isBoolean=q.isString=q.defaultUndefined=q.isSimpleType=q.isFunctionParameter=q.multiReplace=q.continueResult=q.breakResult=q.voidOperation=q.SizzleFunction=q.ReturnResult=
q.ImplicitResult=q.NativeFunction=q.SizzleFunctionE=q.NativeFunctionE=q.ImplicitResultE=q.ReturnResultE=void 0;F=function(){return function(M){this.value=M}}();q.ReturnResultE=F;e=function(){return function(M){this.value=M}}();q.ImplicitResultE=e;var Fa=function(){return function(M){this.fn=M}}();q.NativeFunctionE=Fa;var Ea=function(){return function(M,aa){this.paramCount=aa;this.fn=M}}();q.SizzleFunctionE=Ea;q.NativeFunction=Fa;q.ImplicitResult=e;q.ReturnResult=F;q.SizzleFunction=Ea;q.voidOperation=
{type:"VOID"};q.breakResult={type:"BREAK"};q.continueResult={type:"CONTINUE"};q.multiReplace=A;q.isFunctionParameter=B;q.isSimpleType=u;q.defaultUndefined=function(M,aa){return void 0===M?aa:M};q.isString=w;q.isBoolean=D;q.isNumber=y;q.isInteger=function(M){return"number"===typeof M&&isFinite(M)&&Math.floor(M)===M};q.isArray=C;q.isFeature=function(M){return"esri.arcade.Feature"===(null===M||void 0===M?void 0:M.arcadeDeclaredClass)?!0:!1};q.isFeatureSet=function(M){return!0===(M&&M.declaredRootClass&&
"esri.arcade.featureset.support.FeatureSet"===M.declaredRootClass)};q.isFeatureSetCollection=function(M){return!0===(M&&M.declaredRootClass&&"esri.arcade.featureSetCollection"===M.declaredRootClass)};q.isImmutableArray=G;q.isDate=I;q.pcCheck=function(M,aa,ma){if(M.length<aa||M.length>ma)throw Error("Function called with wrong number of Parameters");};q.absRound=function(M){return 0>M?-Math.round(-M):Math.round(M)};q.generateUUID=function(){var M=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(aa){var ma=(M+16*Math.random())%16|0;M=Math.floor(M/16);return("x"===aa?ma:ma&3|8).toString(16)})};q.formatNumber=O;q.formatDate=R;q.standardiseDateFormat=Z;q.greaterThanLessThan=function(M,aa,ma){if(null===M){if(null===aa||aa===q.voidOperation)return W(null,null,ma);if(y(aa))return W(0,aa,ma);if(w(aa)||D(aa))return W(0,Q(aa),ma);if(I(aa))return W(0,aa.getTime(),ma)}if(M===q.voidOperation){if(null===aa||aa===q.voidOperation)return W(null,null,ma);if(y(aa))return W(0,aa,ma);if(w(aa)||D(aa))return W(0,
Q(aa),ma);if(I(aa))return W(0,aa.getTime(),ma)}else if(y(M)){if(y(aa))return W(M,aa,ma);if(D(aa))return W(M,Q(aa),ma);if(null===aa||aa===q.voidOperation)return W(M,0,ma);if(w(aa))return W(M,Q(aa),ma);if(I(aa))return W(M,aa.getTime(),ma)}else if(w(M)){if(w(aa))return W(ea(M),ea(aa),ma);if(I(aa))return W(Q(M),aa.getTime(),ma);if(y(aa))return W(Q(M),aa,ma);if(null===aa||aa===q.voidOperation)return W(Q(M),0,ma);if(D(aa))return W(Q(M),Q(aa),ma)}else if(I(M)){if(I(aa))return W(M,aa,ma);if(null===aa||aa===
q.voidOperation)return W(M.getTime(),0,ma);if(y(aa))return W(M.getTime(),aa,ma);if(D(aa)||w(aa))return W(M.getTime(),Q(aa),ma)}else if(D(M)){if(D(aa))return W(M,aa,ma);if(y(aa))return W(Q(M),Q(aa),ma);if(I(aa))return W(Q(M),aa.getTime(),ma);if(null===aa||aa===q.voidOperation)return W(Q(M),0,ma);if(w(aa))return W(Q(M),Q(aa),ma)}return!da(M,aa)||"\x3c\x3d"!==ma&&"\x3e\x3d"!==ma?!1:!0};q.equalityTest=da;q.toString=ea;q.toNumberArray=function(M){var aa=[];if(!1===C(M))return null;if(M instanceof c){for(var ma=
0;ma<M.length();ma++)aa[ma]=Q(M.get(ma));return aa}for(ma=0;ma<M.length;ma++)aa[ma]=Q(M[ma]);return aa};q.toStringExplicit=Y;q.toNumber=Q;q.toDate=function(M){return I(M)?M:w(M)&&(M=fa(M))?M.toJSDate():null};q.toDateTime=function(M){return I(M)?t.DateTime.fromJSDate(M):w(M)?fa(M):null};q.toBoolean=function(M){return D(M)?M:w(M)?(M=M.toLowerCase(),"true"===M?!0:!1):y(M)?0===M||isNaN(M)?!1:!0:!1};q.fixSpatialReference=function(M,aa){if(null===M||void 0===M)return null;if(null===M.spatialReference||
void 0===M.spatialReference)M.spatialReference=aa;return M};q.fixNullGeometry=function(M){if(null===M)return null;if(M instanceof l)return"NaN"===M.x||null===M.x||isNaN(M.x)?null:M;if(M instanceof m){if(0===M.rings.length)return null;for(var aa=0,ma=M.rings;aa<ma.length;aa++){var U=ma[aa];if(0<U.length)return M}return null}if(M instanceof r){if(0===M.paths.length)return null;aa=0;for(ma=M.paths;aa<ma.length;aa++)if(U=ma[aa],0<U.length)return M;return null}return M instanceof p?0===M.points.length?
null:M:M instanceof h?"NaN"===M.xmin||null===M.xmin||isNaN(M.xmin)?null:M:null};q.getDomainValue=S;q.getDomainCode=X;q.getDomain=la;q.stableStringify=qa;q.autoCastFeatureToGeometry=function(M){if(null===M)return null;for(var aa=[],ma=0;ma<M.length;ma++){var U=M[ma];U&&U.arcadeDeclaredClass&&"esri.arcade.Feature"===U.arcadeDeclaredClass?aa.push(U.geometry()):aa.push(U)}return aa};q.autoCastArrayOfPointsToPolygon=function(M,aa){if(C(M)||G(M)){var ma=!1,U=!1,T=[],ha=aa;if(C(M)){for(var ka=0;ka<M.length;ka++){var K=
M[ka];ta(T,K)}0<T.length&&(ha=M[0].spatialReference,ma=M[0].hasZ,U=M[0].hasM)}else if(M instanceof f)T=M._elements,0<T.length&&(ma=M._hasZ,U=M._hasM,ha=M.get(0).spatialReference);else if(G(M)){ka=0;for(var P=M.toArray();ka<P.length;ka++)K=P[ka],ta(T,K);0<T.length&&(ha=M.get(0).spatialReference,ma=!0===M.get(0).hasZ,U=!0===M.get(0).hasM)}else throw Error("Invalid Argument");if(0===T.length)return null;!1===(new m({rings:[],spatialReference:{wkid:4326}})).isClockwise(T)&&(T=T.slice(0).reverse());return new m({rings:[T],
spatialReference:ha,hasZ:ma,hasM:U})}return M};q.autoCastArrayOfPointsToPolyline=function(M,aa){if(C(M)||G(M)){var ma=!1,U=!1,T=[],ha=aa;if(C(M)){for(var ka=0;ka<M.length;ka++){var K=M[ka];ta(T,K)}0<T.length&&(ha=M[0].spatialReference,ma=!0===M[0].hasZ,U=!0===M[0].hasM)}else if(M instanceof f)T=M._elements,0<T.length&&(ma=M._hasZ,U=M._hasM,ha=M.get(0).spatialReference);else if(G(M)){ka=0;for(var P=M.toArray();ka<P.length;ka++)K=P[ka],ta(T,K);0<T.length&&(ha=M.get(0).spatialReference,ma=!0===M.get(0).hasZ,
U=!0===M.get(0).hasM)}return 0===T.length?null:new r({paths:[T],spatialReference:ha,hasZ:ma,hasM:U})}return M};q.autoCastArrayOfPointsToMultiPoint=function(M,aa){if(C(M)||G(M)){var ma=!1,U=!1,T=[],ha=aa;if(C(M)){for(var ka=0;ka<M.length;ka++){var K=M[ka];ta(T,K)}0<T.length&&(ha=M[0].spatialReference,ma=!0===M[0].hasZ,U=!0===M[0].hasM)}else if(M instanceof f)T=M._elements,0<T.length&&(ma=M._hasZ,U=M._hasM,ha=M.get(0).spatialReference);else if(G(M)){ka=0;for(var P=M.toArray();ka<P.length;ka++)K=P[ka],
ta(T,K);0<T.length&&(ha=M.get(0).spatialReference,ma=!0===M.get(0).hasZ,U=!0===M.get(0).hasM)}return 0===T.length?null:new p({points:T,spatialReference:ha,hasZ:ma,hasM:U})}return M};q.toStringArray=function(M,aa){void 0===aa&&(aa=!1);var ma=[];if(null===M)return ma;if(!0===C(M)){for(var U=0;U<M.length;U++){var T=ea(M[U]);""===T&&!0!==aa||ma.push(T)}return ma}if(M instanceof c){for(U=0;U<M.length();U++)T=ea(M.get(U)),""===T&&!0!==aa||ma.push(T);return ma}return u(M)?(T=ea(M),""===T&&!0!==aa||ma.push(T),
ma):[]};var ra=0;q.tick=function(M){ra++;return 0===ra%100?(ra=0,new Promise(function(aa){setTimeout(function(){aa(M)},0)})):M};q.binaryOperator=function(M,aa,ma){switch(ma){case "\x26":return M&aa;case "|":return M|aa;case "^":return M^aa;case "\x3c\x3c":return M<<aa;case "\x3e\x3e":return M>>aa;case "\x3e\x3e\x3e":return M>>>aa}};q.castAsJson=ya;q.castAsJsonAsync=va;q.featureFullDomain=function(M,aa,ma){var U=M.fullSchema();return null!==U&&U.fields?la(aa,U,M,ma):null};q.featureSubtypes=function(M){M=
M.fullSchema();return null!==M&&M.fields?M.typeIdField?{subtypeField:M.typeIdField,subtypes:M.types?M.types.map(function(aa){return{name:aa.name,code:aa.id}}):[]}:null:null};q.featureDomainValueLookup=function(M,aa,ma,U){var T=M.fullSchema();if(null===T||!T.fields)return null;U=la(aa,T,M,U);if(void 0===ma)try{ma=M.field(aa)}catch(ha){return null}return S(U,ma)};q.featureDomainCodeLookup=function(M,aa,ma,U){var T=M.fullSchema();if(null===T||!T.fields)return null;if(void 0===ma){try{ma=M.field(aa)}catch(ha){return null}return ma}M=
la(aa,T,M,U);return X(M,ma)};q.featureSchema=function(M){M=M.fullSchema();if(null===M||!M.fields)return null;for(var aa=[],ma=0,U=M.fields;ma<U.length;ma++)aa.push(z.esriFieldToJson(U[ma]));return{objectIdField:M.objectIdField,globalIdField:M.globalIdField,geometryType:void 0===z.layerGeometryEsriRestConstants[M.geometryType]?"":z.layerGeometryEsriRestConstants[M.geometryType],fields:aa}}})},"esri/arcade/polyfill/tsSupport/assign":function(){define([],function(){return function(){return function(){return(Object.assign||
function(F){for(var q,a=1,b=arguments.length;a<b;a++){q=arguments[a];for(var e in q)Object.prototype.hasOwnProperty.call(q,e)&&(F[e]=q[e])}return F}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(F,q,a){if(a||2===arguments.length)for(var b=0,e=q.length,g;b<e;b++)!g&&b in q||(g||(g=Array.prototype.slice.call(q,0,b)),g[b]=q[b]);return F.concat(g||Array.prototype.slice.call(q))}}()})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(F,q){return function(){return function(a,b){this.context=this.definition=null;this.definition=a;this.context=b}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","./ImmutablePointArray"],function(F,q,a,b,e){return function(g){function k(c,d,f,h,n){c=g.call(this,c)||this;c._lazyPath=[];c._hasZ=!1;c._hasM=!1;c._hasZ=f;c._hasM=h;c._spRef=d;c._cacheId=n;return c}a(k,g);k.prototype.get=function(c){if(void 0===
this._lazyPath[c]){var d=this._elements[c];if(void 0===d)return;this._lazyPath[c]=new e(d,this._spRef,this._hasZ,this._hasM,this._cacheId,c)}return this._lazyPath[c]};k.prototype.equalityTest=function(c){return c===this?!0:null===c||!1===c instanceof k?!1:c.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()};return k}(b)})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var F=function(q,a){F=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(b,e){b.__proto__=e}||function(b,e){for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&(b[g]=e[g])};return F(q,a)};return function(q,a){function b(){this.constructor=q}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");F(q,a);q.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}()})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends",
"./ImmutableArray","../geometry/Point"],function(F,q,a,b,e){return function(g){function k(c,d,f,h,n,p){c=g.call(this,c)||this;c._lazyPt=[];c._hasZ=!1;c._hasM=!1;c._spRef=d;c._hasZ=f;c._hasM=h;c._cacheId=n;c._partId=p;return c}a(k,g);k.prototype.get=function(c){if(void 0===this._lazyPt[c]){var d=this._elements[c];if(void 0===d)return;var f=this._hasZ,h=this._hasM,n=null;n=f&&!h?new e(d[0],d[1],d[2],void 0,this._spRef):h&&!f?new e(d[0],d[1],void 0,d[2],this._spRef):f&&h?new e(d[0],d[1],d[2],d[3],this._spRef):
new e(d[0],d[1],this._spRef);n.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+c.toString());this._lazyPt[c]=n}return this._lazyPt[c]};k.prototype.equalityTest=function(c){return c===this?!0:null===c||!1===c instanceof k?!1:c.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return k}(b)})},"esri/libs/luxon/luxon":function(){define(["exports"],function(F){function q(H,L){for(var E=
0;E<L.length;E++){var J=L[E];J.enumerable=J.enumerable||!1;J.configurable=!0;"value"in J&&(J.writable=!0);Object.defineProperty(H,J.key,J)}}function a(H,L,E){L&&q(H.prototype,L);E&&q(H,E);return H}function b(){b=Object.assign||function(H){for(var L=1;L<arguments.length;L++){var E=arguments[L],J;for(J in E)Object.prototype.hasOwnProperty.call(E,J)&&(H[J]=E[J])}return H};return b.apply(this,arguments)}function e(H,L){H.prototype=Object.create(L.prototype);H.prototype.constructor=H;k(H,L)}function g(H){g=
Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)};return g(H)}function k(H,L){k=Object.setPrototypeOf||function(E,J){E.__proto__=J;return E};return k(H,L)}function c(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(H){return!1}}function d(H,L,E){d=c()?Reflect.construct:function(J,
N,V){var ja=[null];ja.push.apply(ja,N);J=new (Function.bind.apply(J,ja));V&&k(J,V.prototype);return J};return d.apply(null,arguments)}function f(H){var L="function"===typeof Map?new Map:void 0;f=function(E){function J(){return d(E,arguments,g(this).constructor)}if(null===E||-1===Function.toString.call(E).indexOf("[native code]"))return E;if("function"!==typeof E)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof L){if(L.has(E))return L.get(E);L.set(E,
J)}J.prototype=Object.create(E.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}});return k(J,E)};return f(H)}function h(H,L){if(null==H)return{};var E={},J=Object.keys(H),N;for(N=0;N<J.length;N++){var V=J[N];0<=L.indexOf(V)||(E[V]=H[V])}return E}function n(H,L){if(H){if("string"===typeof H)return p(H,L);var E=Object.prototype.toString.call(H).slice(8,-1);"Object"===E&&H.constructor&&(E=H.constructor.name);if("Map"===E||"Set"===E)return Array.from(H);if("Arguments"===E||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return p(H,
L)}}function p(H,L){if(null==L||L>H.length)L=H.length;for(var E=0,J=Array(L);E<L;E++)J[E]=H[E];return J}function l(H,L){var E="undefined"!==typeof Symbol&&H[Symbol.iterator]||H["@@iterator"];if(E)return(E=E.call(H)).next.bind(E);if(Array.isArray(H)||(E=n(H))||L&&H&&"number"===typeof H.length){E&&(H=E);var J=0;return function(){return J>=H.length?{done:!0}:{done:!1,value:H[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function m(H){return"undefined"===typeof H}function r(H){return"number"===typeof H}function t(H){return"number"===typeof H&&0===H%1}function x(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(H){return!1}}function v(H,L,E){if(0!==H.length)return H.reduce(function(J,N){var V=[L(N),N];return J?E(J[0],V[0])===J[0]?J:V:V},null)[1]}function z(H,L){return L.reduce(function(E,J){E[J]=H[J];return E},{})}function A(H,L){return Object.prototype.hasOwnProperty.call(H,L)}function B(H,L,
E){return t(H)&&H>=L&&H<=E}function u(H,L){void 0===L&&(L=2);return 0>H?"-"+(""+-H).padStart(L,"0"):(""+H).padStart(L,"0")}function w(H){if(!m(H)&&null!==H&&""!==H)return parseInt(H,10)}function D(H){if(!m(H)&&null!==H&&""!==H)return parseFloat(H)}function y(H){if(!m(H)&&null!==H&&""!==H)return H=1E3*parseFloat("0."+H),Math.floor(H)}function C(H,L,E){void 0===E&&(E=!1);L=Math.pow(10,L);return(E?Math.trunc:Math.round)(H*L)/L}function G(H){return 0===H%4&&(0!==H%100||0===H%400)}function I(H,L){var E=
L-1;E=E-12*Math.floor(E/12)+1;return 2===E?G(H+(L-E)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][E-1]}function O(H){var L=Date.UTC(H.year,H.month-1,H.day,H.hour,H.minute,H.second,H.millisecond);100>H.year&&0<=H.year&&(L=new Date(L),L.setUTCFullYear(L.getUTCFullYear()-1900));return+L}function R(H){var L=H-1;L=(L+Math.floor(L/4)-Math.floor(L/100)+Math.floor(L/400))%7;return 4===(H+Math.floor(H/4)-Math.floor(H/100)+Math.floor(H/400))%7||3===L?53:52}function Z(H){return 99<H?H:60<H?1900+H:2E3+H}
function W(H,L,E,J){void 0===J&&(J=null);H=new Date(H);var N={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};J&&(N.timeZone=J);L=b({timeZoneName:L},N);return(E=(new Intl.DateTimeFormat(E,L)).formatToParts(H).find(function(V){return"timezonename"===V.type.toLowerCase()}))?E.value:null}function da(H,L){var E=parseInt(H,10);Number.isNaN(E)&&(E=0);var J=parseInt(L,10)||0;J=0>E||Object.is(E,-0)?-J:J;return 60*E+J}function ea(H){var L=Number(H);if("boolean"===
typeof H||""===H||Number.isNaN(L))throw new cb("Invalid unit value "+H);return L}function Y(H,L){var E={},J;for(J in H)if(A(H,J)){var N=H[J];void 0!==N&&null!==N&&(E[L(J)]=ea(N))}return E}function ba(H,L){var E=Math.trunc(Math.abs(H/60)),J=Math.trunc(Math.abs(H%60)),N=0<=H?"+":"-";switch(L){case "short":return""+N+u(E,2)+":"+u(J,2);case "narrow":return""+N+E+(0<J?":"+J:"");case "techie":return""+N+u(E,2)+u(J,2);default:throw new RangeError("Value format "+L+" is out of range for property format");
}}function Q(H){return z(H,["hour","minute","second","millisecond"])}function fa(H){switch(H){case "narrow":return[].concat(Sc);case "short":return[].concat(Ub);case "long":return[].concat(Tc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function S(H){switch(H){case "narrow":return[].concat(Uc);case "short":return[].concat(Vb);case "long":return[].concat(Wb);case "numeric":return"1234567".split("");
default:return null}}function X(H){switch(H){case "narrow":return[].concat(Vc);case "short":return[].concat(Wc);case "long":return[].concat(Xc);default:return null}}function la(H,L,E,J){void 0===E&&(E="always");void 0===J&&(J=!1);var N={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},V=-1===["hours","minutes","seconds"].indexOf(H);if("auto"===E&&V)switch(E=
"days"===H,L){case 1:return E?"tomorrow":"next "+N[H][0];case -1:return E?"yesterday":"last "+N[H][0];case 0:return E?"today":"this "+N[H][0]}E=Object.is(L,-0)||0>L;L=Math.abs(L);V=1===L;var ja=N[H];H=J?V?ja[1]:ja[2]||ja[1]:V?N[H][0]:H;return E?L+" "+H+" ago":"in "+L+" "+H}function na(H,L){for(var E="",J=l(H),N;!(N=J()).done;)N=N.value,E=N.literal?E+N.val:E+L(N.val);return E}function qa(H,L){if(m(H)||null===H)return L;if(H instanceof nb)return H;if("string"===typeof H){var E=H.toLowerCase();return"local"===
E||"system"===E?L:"utc"===E||"gmt"===E?eb.utcInstance:eb.parseSpecifier(E)||jb.create(H)}return r(H)?eb.instance(H):"object"===typeof H&&H.offset&&"number"===typeof H.offset?H:new Xb(H)}function ta(H,L){void 0===L&&(L={});var E=JSON.stringify([H,L]),J=Fb[E];J||(J=new Intl.DateTimeFormat(H,L),Fb[E]=J);return J}function ya(H){for(var L=[],E=1;12>=E;E++){var J=Ra.utc(2016,E,1);L.push(H(J))}return L}function za(H){for(var L=[],E=1;7>=E;E++){var J=Ra.utc(2016,11,13+E);L.push(H(J))}return L}function va(H,
L,E,J,N){H=H.listingMode(E);return"error"===H?null:"en"===H?J(L):N(L)}function Fa(){for(var H=arguments.length,L=Array(H),E=0;E<H;E++)L[E]=arguments[E];H=L.reduce(function(J,N){return J+N.source},"");return RegExp("^"+H+"$")}function Ea(){for(var H=arguments.length,L=Array(H),E=0;E<H;E++)L[E]=arguments[E];return function(J){return L.reduce(function(N,V){var ja=N[0],pa=N[1],sa=V(J,N[2]),xa=sa[1],Da=sa[2];return[b({},ja,sa[0]),xa||pa,Da]},[{},null,1]).slice(0,2)}}function ra(H){if(null==H)return[null,
null];for(var L=arguments.length,E=Array(1<L?L-1:0),J=1;J<L;J++)E[J-1]=arguments[J];for(L=0;L<E.length;L++){var N=E[L];J=N[1];if(N=N[0].exec(H))return J(N)}return[null,null]}function M(){for(var H=arguments.length,L=Array(H),E=0;E<H;E++)L[E]=arguments[E];return function(J,N){var V={},ja;for(ja=0;ja<L.length;ja++)V[L[ja]]=w(J[N+ja]);return[V,null,N+ja]}}function aa(H,L,E){H=H[L];return m(H)?E:w(H)}function ma(H,L){return[{hours:aa(H,L,0),minutes:aa(H,L+1,0),seconds:aa(H,L+2,0),milliseconds:y(H[L+3])},
null,L+4]}function U(H,L){var E=!H[L]&&!H[L+1],J=da(H[L+1],H[L+2]);return[{},E?null:eb.instance(J),L+3]}function T(H,L){return[{},H[L]?jb.create(H[L]):null,L+1]}function ha(H){var L=H[2],E=H[3],J=H[4],N=H[5],V=H[6],ja=H[7],pa=H[8],sa="-"===H[0][0],xa=ja&&"-"===ja[0],Da=function(Qa,Ha){void 0===Ha&&(Ha=!1);return void 0!==Qa&&(Ha||Qa&&sa)?-Qa:Qa};return[{years:Da(D(H[1])),months:Da(D(L)),weeks:Da(D(E)),days:Da(D(J)),hours:Da(D(N)),minutes:Da(D(V)),seconds:Da(D(ja),"-0"===ja),milliseconds:Da(y(pa),
xa)}]}function ka(H,L,E,J,N,V,ja){L={year:2===L.length?Z(w(L)):w(L),month:Ub.indexOf(E)+1,day:w(J),hour:w(N),minute:w(V)};ja&&(L.second=w(ja));H&&(L.weekday=3<H.length?Wb.indexOf(H)+1:Vb.indexOf(H)+1);return L}function K(H){var L=H[8],E=H[9],J=H[10],N=H[11];H=ka(H[1],H[4],H[3],H[2],H[5],H[6],H[7]);L=L?Yc[L]:E?0:da(J,N);return[H,new eb(L)]}function P(H){return[ka(H[1],H[4],H[3],H[2],H[5],H[6],H[7]),eb.utcInstance]}function ca(H){return[ka(H[1],H[7],H[2],H[3],H[4],H[5],H[6]),eb.utcInstance]}function ia(H,
L,E){void 0===E&&(E=!1);H={values:E?L.values:b({},H.values,L.values||{}),loc:H.loc.clone(L.loc),conversionAccuracy:L.conversionAccuracy||H.conversionAccuracy};return new Za(H)}function oa(H,L,E,J,N){H=H[N][E];var V=L[E]/H;V=Math.sign(V)!==Math.sign(J[N])&&0!==J[N]&&1>=Math.abs(V)?0>V?Math.floor(V):Math.ceil(V):Math.trunc(V);J[N]+=V;L[E]-=V*H}function Aa(H,L){Zc.reduce(function(E,J){if(m(L[J]))return E;E&&oa(H,L,E,L,J);return J},null)}function Ca(H,L){var E=function(J){return J.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};
E=E(L)-E(H);return Math.floor(Za.fromMillis(E).as("days"))}function Na(H,L,E){for(var J={},N,V,ja=0,pa=[["years",function(Ha,Oa){return Oa.year-Ha.year}],["quarters",function(Ha,Oa){return Oa.quarter-Ha.quarter}],["months",function(Ha,Oa){return Oa.month-Ha.month+12*(Oa.year-Ha.year)}],["weeks",function(Ha,Oa){var db=Ca(Ha,Oa);return(db-db%7)/7}],["days",Ca]];ja<pa.length;ja++){var sa=pa[ja],xa=sa[0];sa=sa[1];if(0<=E.indexOf(xa)){var Da;N=xa;sa=sa(H,L);V=H.plus((Da={},Da[xa]=sa,Da));if(V>L){var Qa;
H=H.plus((Qa={},Qa[xa]=sa-1,Qa));--sa}else H=V;J[xa]=sa}}return[H,J,V,N]}function Ja(H,L,E,J){var N=Na(H,L,E);H=N[0];var V=N[1],ja=N[2],pa=N[3];N=L-H;E=E.filter(function(Da){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(Da)});if(0===E.length){if(ja<L){var sa;ja=H.plus((sa={},sa[pa]=1,sa))}ja!==H&&(V[pa]=(V[pa]||0)+N/(ja-H))}L=Za.fromObject(V,J);if(0<E.length){var xa;return(xa=Za.fromMillis(N,J)).shiftTo.apply(xa,E).plus(L)}return L}function Ia(H,L){var E=H.numberingSystem;void 0===
L&&(L="");return new RegExp(""+Gb[E||"latn"]+L)}function wa(H,L){void 0===L&&(L=function(E){return E});return{regex:H,deser:function(E){var J=L;E=E[0];var N=parseInt(E,10);if(isNaN(N)){N="";for(var V=0;V<E.length;V++){var ja=E.charCodeAt(V);if(-1!==E[V].search(Gb.hanidec))N+=$c.indexOf(E[V]);else for(xa in Yb){var pa=Yb[xa],sa=pa[0];pa=pa[1];ja>=sa&&ja<=pa&&(N+=ja-sa)}}var xa=parseInt(N,10)}else xa=N;return J(xa)}}}function ua(H){return H.replace(/\./g,"\\.?").replace(Hb,Zb)}function Pa(H,L){return null===
H?null:{regex:RegExp(H.map(ua).join("|")),deser:function(E){var J=E[0];return H.findIndex(function(N){return J.replace(/\./g,"").replace(Hb," ").toLowerCase()===N.replace(/\./g,"").replace(Hb," ").toLowerCase()})+L}}}function Ma(H,L){return{regex:H,deser:function(E){return da(E[1],E[2])},groups:L}}function Ya(H){return{regex:H,deser:function(L){return L[0]}}}function Ua(H,L){var E=Ia(L),J=Ia(L,"{2}"),N=Ia(L,"{3}"),V=Ia(L,"{4}"),ja=Ia(L,"{6}"),pa=Ia(L,"{1,2}"),sa=Ia(L,"{1,3}"),xa=Ia(L,"{1,6}"),Da=
Ia(L,"{1,9}"),Qa=Ia(L,"{2,4}"),Ha=Ia(L,"{4,6}"),Oa=function(ab){return{regex:RegExp(ab.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(ad){return ad[0]},literal:!0}},db=function(ab){if(H.literal)return Oa(ab);switch(ab.val){case "G":return Pa(L.eras("short",!1),0);case "GG":return Pa(L.eras("long",!1),0);case "y":return wa(xa);case "yy":return wa(Qa,Z);case "yyyy":return wa(V);case "yyyyy":return wa(Ha);case "yyyyyy":return wa(ja);case "M":return wa(pa);case "MM":return wa(J);
case "MMM":return Pa(L.months("short",!0,!1),1);case "MMMM":return Pa(L.months("long",!0,!1),1);case "L":return wa(pa);case "LL":return wa(J);case "LLL":return Pa(L.months("short",!1,!1),1);case "LLLL":return Pa(L.months("long",!1,!1),1);case "d":return wa(pa);case "dd":return wa(J);case "o":return wa(sa);case "ooo":return wa(N);case "HH":return wa(J);case "H":return wa(pa);case "hh":return wa(J);case "h":return wa(pa);case "mm":return wa(J);case "m":return wa(pa);case "q":return wa(pa);case "qq":return wa(J);
case "s":return wa(pa);case "ss":return wa(J);case "S":return wa(sa);case "SSS":return wa(N);case "u":return Ya(Da);case "uu":return Ya(pa);case "uuu":return wa(E);case "a":return Pa(L.meridiems(),0);case "kkkk":return wa(V);case "kk":return wa(Qa,Z);case "W":return wa(pa);case "WW":return wa(J);case "E":case "c":return wa(E);case "EEE":return Pa(L.weekdays("short",!1,!1),1);case "EEEE":return Pa(L.weekdays("long",!1,!1),1);case "ccc":return Pa(L.weekdays("short",!0,!1),1);case "cccc":return Pa(L.weekdays("long",
!0,!1),1);case "Z":case "ZZ":return Ma(new RegExp("([+-]"+pa.source+")(?::("+J.source+"))?"),2);case "ZZZ":return Ma(new RegExp("([+-]"+pa.source+")("+J.source+")?"),2);case "z":return Ya(/[a-z_+-/]{1,256}?/i);default:return Oa(ab)}}(H)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};db.token=H;return db}function Va(H){return["^"+H.map(function(L){return L.regex}).reduce(function(L,E){return L+"("+E.source+")"},"")+"$",H]}function Wa(H,L,E){if(H=H.match(L)){L={};var J=1,N;for(N in E)if(A(E,
N)){var V=E[N],ja=V.groups?V.groups+1:1;!V.literal&&V.token&&(L[V.token.val[0]]=V.deser(H.slice(J,J+ja)));J+=ja}return[H,L]}return[H,{}]}function Ba(H){var L=function(N){switch(N){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";
default:return null}},E=null;m(H.z)||(E=jb.create(H.z));if(!m(H.Z)){E||(E=new eb(H.Z));var J=H.Z}m(H.q)||(H.M=3*(H.q-1)+1);m(H.h)||(12>H.h&&1===H.a?H.h+=12:12===H.h&&0===H.a&&(H.h=0));0===H.G&&H.y&&(H.y=-H.y);m(H.u)||(H.S=y(H.u));return[Object.keys(H).reduce(function(N,V){var ja=L(V);ja&&(N[ja]=H[V]);return N},{}),E,J]}function La(){Ib||(Ib=Ra.fromMillis(1555555555555));return Ib}function Ga(H,L){if(H.literal)return H;var E=hb.macroTokenToFormatOpts(H.val);if(!E)return H;var J=hb.create(L,E).formatDateTimeParts(La()).map(function(N){var V=
N.type;N=N.value;"literal"===V?V={literal:!0,val:N}:(N=E[V],V=bd[V],"object"===typeof V&&(V=V[N]),V=V?{literal:!1,val:V}:void 0);return V});return J.includes(void 0)?H:J}function Ka(H,L){var E;return(E=Array.prototype).concat.apply(E,H.map(function(J){return Ga(J,L)}))}function bb(H,L,E){E=Ka(hb.parseFormat(E),H);var J=E.map(function(xa){return Ua(xa,H)}),N=J.find(function(xa){return xa.invalidReason});if(N)return{input:L,tokens:E,invalidReason:N.invalidReason};N=Va(J);J=RegExp(N[0],"i");var V=Wa(L,
J,N[1]);N=V[0];var ja=(V=V[1])?Ba(V):[null,null,void 0],pa=ja[0],sa=ja[1];ja=ja[2];if(A(V,"a")&&A(V,"H"))throw new ob("Can't include meridiem when specifying 24-hour format");return{input:L,tokens:E,regex:J,rawMatches:N,matches:V,result:pa,zone:sa,specificOffset:ja}}function $a(H,L){return new fb("unit out of range","you specified "+L+" (of type "+typeof L+") as a "+H+", which is invalid")}function gb(H,L,E){L=new Date(Date.UTC(H,L-1,E));100>H&&0<=H&&L.setUTCFullYear(L.getUTCFullYear()-1900);H=L.getUTCDay();
return 0===H?7:H}function wb(H,L){var E=G(H)?Jb:Kb,J=E.findIndex(function(N){return N<L});return{month:J+1,day:L-E[J]}}function pb(H){var L=H.year,E=H.month,J=H.day;var N=J+(G(L)?Jb:Kb)[E-1];E=gb(L,E,J);N=Math.floor((N-E+10)/7);1>N?(--L,N=R(L)):N>R(L)&&(L+=1,N=1);return b({weekYear:L,weekNumber:N,weekday:E},Q(H))}function xb(H){var L=H.weekYear,E=H.weekNumber,J=H.weekday,N=gb(L,1,4),V=G(L)?366:365;E=7*E+J-N-3;1>E?(V=L-1,E+=G(V)?366:365):E>V?(V=L+1,E-=G(L)?366:365):V=L;L=wb(V,E);return b({year:V,month:L.month,
day:L.day},Q(H))}function qb(H){var L=H.year;var E=H.month;E=H.day+(G(L)?Jb:Kb)[E-1];return b({year:L,ordinal:E},Q(H))}function kb(H){var L=H.year,E=wb(L,H.ordinal);return b({year:L,month:E.month,day:E.day},Q(H))}function yb(H){var L=t(H.year),E=B(H.month,1,12),J=B(H.day,1,I(H.year,H.month));return L?E?J?!1:$a("day",H.day):$a("month",H.month):$a("year",H.year)}function zb(H){var L=H.hour,E=H.minute,J=H.second;H=H.millisecond;var N=B(L,0,23)||24===L&&0===E&&0===J&&0===H,V=B(E,0,59),ja=B(J,0,59),pa=
B(H,0,999);return N?V?ja?pa?!1:$a("millisecond",H):$a("second",J):$a("minute",E):$a("hour",L)}function Sa(H){return new fb("unsupported zone",'the zone "'+H.name+'" is not supported')}function Lb(H){null===H.weekData&&(H.weekData=pb(H.c));return H.weekData}function rb(H,L){var E={ts:H.ts,zone:H.zone,c:H.c,o:H.o,loc:H.loc,invalid:H.invalid};return new Ra(b({},E,L,{old:E}))}function $b(H,L,E){var J=H-6E4*L,N=E.offset(J);if(L===N)return[J,L];J-=6E4*(N-L);L=E.offset(J);return N===L?[J,N]:[H-6E4*Math.min(N,
L),Math.max(N,L)]}function ac(H,L){var E=new Date(H+6E4*L);return{year:E.getUTCFullYear(),month:E.getUTCMonth()+1,day:E.getUTCDate(),hour:E.getUTCHours(),minute:E.getUTCMinutes(),second:E.getUTCSeconds(),millisecond:E.getUTCMilliseconds()}}function Ab(H,L,E){return $b(O(H),L,E)}function bc(H,L){var E=H.o,J=H.c.year+Math.trunc(L.years),N=H.c.month+Math.trunc(L.months)+3*Math.trunc(L.quarters);N=b({},H.c,{year:J,month:N,day:Math.min(H.c.day,I(J,N))+Math.trunc(L.days)+7*Math.trunc(L.weeks)});J=Za.fromObject({years:L.years-
Math.trunc(L.years),quarters:L.quarters-Math.trunc(L.quarters),months:L.months-Math.trunc(L.months),weeks:L.weeks-Math.trunc(L.weeks),days:L.days-Math.trunc(L.days),hours:L.hours,minutes:L.minutes,seconds:L.seconds,milliseconds:L.milliseconds}).as("milliseconds");N=O(N);N=$b(N,E,H.zone);E=N[0];N=N[1];0!==J&&(E+=J,N=H.zone.offset(E));return{ts:E,o:N}}function sb(H,L,E,J,N,V){var ja=E.setZone,pa=E.zone;return H&&0!==Object.keys(H).length?(H=Ra.fromObject(H,b({},E,{zone:L||pa,specificOffset:V})),ja?
H:H.setZone(pa)):Ra.invalid(new fb("unparsable",'the input "'+N+"\" can't be parsed as "+J))}function Bb(H,L,E){void 0===E&&(E=!0);return H.isValid?hb.create(Xa.create("en-US"),{allowZ:E,forceSimple:!0}).formatDateTimeFromString(H,L):null}function Mb(H,L){var E=9999<H.c.year||0>H.c.year,J="";E&&0<=H.c.year&&(J+="+");J+=u(H.c.year,E?6:4);L?(J=J+"-"+u(H.c.month),J=J+"-"+u(H.c.day)):(J+=u(H.c.month),J+=u(H.c.day));return J}function cc(H,L,E,J,N,V){var ja=u(H.c.hour);L?(ja=ja+":"+u(H.c.minute),0===H.c.second&&
E||(ja+=":")):ja+=u(H.c.minute);0===H.c.second&&E||(ja+=u(H.c.second),0===H.c.millisecond&&J||(ja=ja+"."+u(H.c.millisecond,3)));N&&(H.isOffsetFixed&&0===H.offset&&!V?ja+="Z":0>H.o?(ja=ja+"-"+u(Math.trunc(-H.o/60)),ja=ja+":"+u(Math.trunc(-H.o%60))):(ja=ja+"+"+u(Math.trunc(H.o/60)),ja=ja+":"+u(Math.trunc(H.o%60))));V&&(ja+="["+H.zone.ianaName+"]");return ja}function dc(H){var L={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",
quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[H.toLowerCase()];if(!L)throw new ec(H);return L}function fc(H,L){var E=qa(L.zone,Ta.defaultZone),J=Xa.fromObject(L),N=Ta.now();if(!m(H.year)){var V=l(gc);for(var ja;!(ja=V()).done;)ja=ja.value,m(H[ja])&&(H[ja]=
hc[ja]);if(V=yb(H)||zb(H))return Ra.invalid(V);N=E.offset(N);V=Ab(H,N,E);N=V[0];V=V[1]}return new Ra({ts:N,zone:E,loc:J,o:V})}function ic(H,L,E){var J=m(E.round)?!0:E.round,N=function(xa,Da){xa=C(xa,J||E.calendary?0:2,!0);return L.loc.clone(E).relFormatter(E).format(xa,Da)},V=function(xa){return E.calendary?L.hasSame(H,xa)?0:L.startOf(xa).diff(H.startOf(xa),xa).get(xa):L.diff(H,xa).get(xa)};if(E.unit)return N(V(E.unit),E.unit);for(var ja=l(E.units),pa;!(pa=ja()).done;){pa=pa.value;var sa=V(pa);if(1<=
Math.abs(sa))return N(sa,pa)}return N(H>L?-0:0,E.units[E.units.length-1])}function jc(H){var L={};0<H.length&&"object"===typeof H[H.length-1]?(L=H[H.length-1],H=Array.from(H).slice(0,H.length-1)):H=Array.from(H);return[L,H]}function tb(H){if(Ra.isDateTime(H))return H;if(H&&H.valueOf&&r(H.valueOf()))return Ra.fromJSDate(H);if(H&&"object"===typeof H)return Ra.fromObject(H);throw new cb("Unknown datetime argument: "+H+", of type "+typeof H);}var lb=function(H){function L(){return H.apply(this,arguments)||
this}e(L,H);return L}(f(Error)),cd=function(H){function L(E){return H.call(this,"Invalid DateTime: "+E.toMessage())||this}e(L,H);return L}(lb),dd=function(H){function L(E){return H.call(this,"Invalid Interval: "+E.toMessage())||this}e(L,H);return L}(lb),ed=function(H){function L(E){return H.call(this,"Invalid Duration: "+E.toMessage())||this}e(L,H);return L}(lb),ob=function(H){function L(){return H.apply(this,arguments)||this}e(L,H);return L}(lb),ec=function(H){function L(E){return H.call(this,"Invalid unit "+
E)||this}e(L,H);return L}(lb),cb=function(H){function L(){return H.apply(this,arguments)||this}e(L,H);return L}(lb),ib=function(H){function L(){return H.call(this,"Zone is an abstract class")||this}e(L,H);return L}(lb),Nb={year:"numeric",month:"numeric",day:"numeric"},kc={year:"numeric",month:"short",day:"numeric"},fd={year:"numeric",month:"short",day:"numeric",weekday:"short"},lc={year:"numeric",month:"long",day:"numeric"},mc={year:"numeric",month:"long",day:"numeric",weekday:"long"},nc={hour:"numeric",
minute:"numeric"},oc={hour:"numeric",minute:"numeric",second:"numeric"},pc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},qc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},rc={hour:"numeric",minute:"numeric",hourCycle:"h23"},sc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},tc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},uc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",
timeZoneName:"long"},vc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},wc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},yc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},gd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},zc={year:"numeric",month:"long",
day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Ac={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Cc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Dc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Tc="January February March April May June July August September October November December".split(" "),Ub="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Sc="JFMAMJJASOND".split(""),Wb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Vb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Uc="MTWTFSS".split(""),Ec=["AM","PM"],Xc=["Before Christ","Anno Domini"],Wc=["BC","AD"],Vc=["B","A"],hd={D:Nb,DD:kc,DDD:lc,DDDD:mc,t:nc,tt:oc,ttt:pc,tttt:qc,T:rc,TT:sc,TTT:tc,TTTT:uc,f:vc,ff:xc,
fff:zc,ffff:Bc,F:wc,FF:yc,FFF:Ac,FFFF:Cc},hb=function(){function H(E,J){this.opts=J;this.loc=E;this.systemLoc=null}H.create=function(E,J){void 0===J&&(J={});return new H(E,J)};H.parseFormat=function(E){for(var J=null,N="",V=!1,ja=[],pa=0;pa<E.length;pa++){var sa=E.charAt(pa);"'"===sa?(0<N.length&&ja.push({literal:V,val:N}),J=null,N="",V=!V):V?N+=sa:sa===J?N+=sa:(0<N.length&&ja.push({literal:!1,val:N}),J=N=sa)}0<N.length&&ja.push({literal:V,val:N});return ja};H.macroTokenToFormatOpts=function(E){return hd[E]};
var L=H.prototype;L.formatWithSystemDefault=function(E,J){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(E,b({},this.opts,J)).format()};L.formatDateTime=function(E,J){void 0===J&&(J={});return this.loc.dtFormatter(E,b({},this.opts,J)).format()};L.formatDateTimeParts=function(E,J){void 0===J&&(J={});return this.loc.dtFormatter(E,b({},this.opts,J)).formatToParts()};L.resolvedOptions=function(E,J){void 0===J&&(J={});return this.loc.dtFormatter(E,
b({},this.opts,J)).resolvedOptions()};L.num=function(E,J){void 0===J&&(J=0);if(this.opts.forceSimple)return u(E,J);var N=b({},this.opts);0<J&&(N.padTo=J);return this.loc.numberFormatter(N).format(E)};L.formatDateTimeFromString=function(E,J){var N=this,V="en"===this.loc.listingMode(),ja=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,pa=function(Ha,Oa){return N.loc.extract(E,Ha,Oa)},sa=function(Ha){return E.isOffsetFixed&&0===E.offset&&Ha.allowZ?"Z":E.isValid?E.zone.formatOffset(E.ts,
Ha.format):""},xa=function(Ha,Oa){return V?fa(Ha)[E.month-1]:pa(Oa?{month:Ha}:{month:Ha,day:"numeric"},"month")},Da=function(Ha,Oa){return V?S(Ha)[E.weekday-1]:pa(Oa?{weekday:Ha}:{weekday:Ha,month:"long",day:"numeric"},"weekday")},Qa=function(Ha){return V?X(Ha)[0>E.year?0:1]:pa({era:Ha},"era")};return na(H.parseFormat(J),function(Ha){switch(Ha){case "S":return N.num(E.millisecond);case "u":case "SSS":return N.num(E.millisecond,3);case "s":return N.num(E.second);case "ss":return N.num(E.second,2);
case "uu":return N.num(Math.floor(E.millisecond/10),2);case "uuu":return N.num(Math.floor(E.millisecond/100));case "m":return N.num(E.minute);case "mm":return N.num(E.minute,2);case "h":return N.num(0===E.hour%12?12:E.hour%12);case "hh":return N.num(0===E.hour%12?12:E.hour%12,2);case "H":return N.num(E.hour);case "HH":return N.num(E.hour,2);case "Z":return sa({format:"narrow",allowZ:N.opts.allowZ});case "ZZ":return sa({format:"short",allowZ:N.opts.allowZ});case "ZZZ":return sa({format:"techie",allowZ:N.opts.allowZ});
case "ZZZZ":return E.zone.offsetName(E.ts,{format:"short",locale:N.loc.locale});case "ZZZZZ":return E.zone.offsetName(E.ts,{format:"long",locale:N.loc.locale});case "z":return E.zoneName;case "a":return V?Ec[12>E.hour?0:1]:pa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ja?pa({day:"numeric"},"day"):N.num(E.day);case "dd":return ja?pa({day:"2-digit"},"day"):N.num(E.day,2);case "c":return N.num(E.weekday);case "ccc":return Da("short",!0);case "cccc":return Da("long",!0);case "ccccc":return Da("narrow",
!0);case "E":return N.num(E.weekday);case "EEE":return Da("short",!1);case "EEEE":return Da("long",!1);case "EEEEE":return Da("narrow",!1);case "L":return ja?pa({month:"numeric",day:"numeric"},"month"):N.num(E.month);case "LL":return ja?pa({month:"2-digit",day:"numeric"},"month"):N.num(E.month,2);case "LLL":return xa("short",!0);case "LLLL":return xa("long",!0);case "LLLLL":return xa("narrow",!0);case "M":return ja?pa({month:"numeric"},"month"):N.num(E.month);case "MM":return ja?pa({month:"2-digit"},
"month"):N.num(E.month,2);case "MMM":return xa("short",!1);case "MMMM":return xa("long",!1);case "MMMMM":return xa("narrow",!1);case "y":return ja?pa({year:"numeric"},"year"):N.num(E.year);case "yy":return ja?pa({year:"2-digit"},"year"):N.num(E.year.toString().slice(-2),2);case "yyyy":return ja?pa({year:"numeric"},"year"):N.num(E.year,4);case "yyyyyy":return ja?pa({year:"numeric"},"year"):N.num(E.year,6);case "G":return Qa("short");case "GG":return Qa("long");case "GGGGG":return Qa("narrow");case "kk":return N.num(E.weekYear.toString().slice(-2),
2);case "kkkk":return N.num(E.weekYear,4);case "W":return N.num(E.weekNumber);case "WW":return N.num(E.weekNumber,2);case "o":return N.num(E.ordinal);case "ooo":return N.num(E.ordinal,3);case "q":return N.num(E.quarter);case "qq":return N.num(E.quarter,2);case "X":return N.num(Math.floor(E.ts/1E3));case "x":return N.num(E.ts);default:var Oa=H.macroTokenToFormatOpts(Ha);Ha=Oa?N.formatWithSystemDefault(E,Oa):Ha;return Ha}})};L.formatDurationFromString=function(E,J){var N=this,V=function(sa){switch(sa[0]){case "S":return"millisecond";
case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}},ja=H.parseFormat(J),pa=ja.reduce(function(sa,xa){var Da=xa.val;return xa.literal?sa:sa.concat(Da)},[]);pa=E.shiftTo.apply(E,pa.map(V).filter(function(sa){return sa}));return na(ja,function(sa){return function(xa){var Da=V(xa);return Da?N.num(sa.get(Da),xa.length):xa}}(pa))};return H}(),fb=function(){function H(L,E){this.reason=
L;this.explanation=E}H.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return H}(),nb=function(){function H(){}var L=H.prototype;L.offsetName=function(E,J){throw new ib;};L.formatOffset=function(E,J){throw new ib;};L.offset=function(E){throw new ib;};L.equals=function(E){throw new ib;};a(H,[{key:"type",get:function(){throw new ib;}},{key:"name",get:function(){throw new ib;}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",
get:function(){throw new ib;}},{key:"isValid",get:function(){throw new ib;}}]);return H}(),Ob=null,Fc=function(H){function L(){return H.apply(this,arguments)||this}e(L,H);var E=L.prototype;E.offsetName=function(J,N){return W(J,N.format,N.locale)};E.formatOffset=function(J,N){return ba(this.offset(J),N)};E.offset=function(J){return-(new Date(J)).getTimezoneOffset()};E.equals=function(J){return"system"===J.type};a(L,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},
{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===Ob&&(Ob=new L);return Ob}}]);return L}(nb),Cb={},id={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},Db={},jb=function(H){function L(J){var N=H.call(this)||this;N.zoneName=J;N.valid=L.isValidZone(J);return N}e(L,H);L.create=function(J){Db[J]||(Db[J]=new L(J));return Db[J]};L.resetCache=function(){Db={};Cb={}};L.isValidSpecifier=function(J){return this.isValidZone(J)};
L.isValidZone=function(J){if(!J)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:J})).format(),!0}catch(N){return!1}};var E=L.prototype;E.offsetName=function(J,N){return W(J,N.format,N.locale,this.name)};E.formatOffset=function(J,N){return ba(this.offset(J),N)};E.offset=function(J){J=new Date(J);if(isNaN(J))return NaN;var N=this.name;Cb[N]||(Cb[N]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:N,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",
era:"short"}));N=Cb[N];if(N.formatToParts){N=N.formatToParts(J);for(var V=[],ja=0;ja<N.length;ja++){var pa=N[ja],sa=pa.type;pa=pa.value;var xa=id[sa];"era"===sa?V[xa]=pa:m(xa)||(V[xa]=parseInt(pa,10))}N=V}else N=N.format(J).replace(/\u200E/g,""),N=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(N),N=[N[3],N[1],N[2],N[4],N[5],N[6],N[7]];V=N[0];ja=N[1];sa=N[2];pa=N[4];xa=N[5];var Da=N[6];"BC"===N[3]&&(V=-Math.abs(V)+1);N=O({year:V,month:ja,day:sa,hour:24===pa?0:pa,minute:xa,second:Da,millisecond:0});
J=+J;V=J%1E3;return(N-(J-(0<=V?V:1E3+V)))/6E4};E.equals=function(J){return"iana"===J.type&&J.name===this.name};a(L,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return L}(nb),Pb=null,eb=function(H){function L(J){var N=H.call(this)||this;N.fixed=J;return N}e(L,H);L.instance=function(J){return 0===J?L.utcInstance:new L(J)};L.parseSpecifier=function(J){return J&&
(J=J.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new L(da(J[1],J[2])):null};var E=L.prototype;E.offsetName=function(){return this.name};E.formatOffset=function(J,N){return ba(this.fixed,N)};E.offset=function(){return this.fixed};E.equals=function(J){return"fixed"===J.type&&J.fixed===this.fixed};a(L,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+ba(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+
ba(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===Pb&&(Pb=new L(0));return Pb}}]);return L}(nb),Xb=function(H){function L(J){var N=H.call(this)||this;N.zoneName=J;return N}e(L,H);var E=L.prototype;E.offsetName=function(){return null};E.formatOffset=function(){return""};E.offset=function(){return NaN};E.equals=function(){return!1};a(L,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},
{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return L}(nb),Gc=function(){return Date.now()},Hc="system",Ic=null,Jc=null,Kc=null,Lc,Ta=function(){function H(){}H.resetCaches=function(){Xa.resetCache();jb.resetCache()};a(H,null,[{key:"now",get:function(){return Gc},set:function(L){Gc=L}},{key:"defaultZone",get:function(){return qa(Hc,Fc.instance)},set:function(L){Hc=L}},{key:"defaultLocale",get:function(){return Ic},set:function(L){Ic=L}},{key:"defaultNumberingSystem",
get:function(){return Jc},set:function(L){Jc=L}},{key:"defaultOutputCalendar",get:function(){return Kc},set:function(L){Kc=L}},{key:"throwOnInvalid",get:function(){return Lc},set:function(L){Lc=L}}]);return H}(),jd=["base"],kd=["padTo","floor"],Mc={},Fb={},Qb={},Rb={},Eb=null,ld=function(){function H(L,E,J){this.padTo=J.padTo||0;this.floor=J.floor||!1;J.padTo;J.floor;var N=h(J,kd);if(!E||0<Object.keys(N).length)E=b({useGrouping:!1},J),0<J.padTo&&(E.minimumIntegerDigits=J.padTo),J=E,void 0===J&&(J=
{}),E=JSON.stringify([L,J]),N=Qb[E],N||(N=new Intl.NumberFormat(L,J),Qb[E]=N),this.inf=N}H.prototype.format=function(L){if(this.inf)return this.inf.format(this.floor?Math.floor(L):L);L=this.floor?Math.floor(L):C(L,3);return u(L,this.padTo)};return H}(),md=function(){function H(E,J,N){this.opts=N;if(E.zone.isUniversal){var V=E.offset/60*-1;V=0<=V?"Etc/GMT+"+V:"Etc/GMT"+V;0!==E.offset&&jb.create(V).valid?this.dt=E:(V="UTC",this.dt=N.timeZoneName?E:0===E.offset?E:Ra.fromMillis(E.ts+6E4*E.offset))}else"system"===
E.zone.type?this.dt=E:(this.dt=E,V=E.zone.name);E=b({},this.opts);V&&(E.timeZone=V);this.dtf=ta(J,E)}var L=H.prototype;L.format=function(){return this.dtf.format(this.dt.toJSDate())};L.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};L.resolvedOptions=function(){return this.dtf.resolvedOptions()};return H}(),nd=function(){function H(E,J,N){this.opts=b({style:"long"},N);if(!J&&x()){J=N;void 0===J&&(J={});N=J;N.base;N=h(N,jd);N=JSON.stringify([E,N]);var V=Rb[N];V||(V=new Intl.RelativeTimeFormat(E,
J),Rb[N]=V);this.rtf=V}}var L=H.prototype;L.format=function(E,J){return this.rtf?this.rtf.format(E,J):la(J,E,this.opts.numeric,"long"!==this.opts.style)};L.formatToParts=function(E,J){return this.rtf?this.rtf.formatToParts(E,J):[]};return H}(),Xa=function(){function H(E,J,N,V){var ja=E.indexOf("-u-");if(-1===ja)E=[E];else{ja=E.substring(0,ja);try{var pa=ta(E).resolvedOptions()}catch(sa){pa=ta(ja).resolvedOptions()}E=pa;E=[ja,E.numberingSystem,E.calendar]}pa=E[1];ja=E[2];this.locale=E[0];this.numberingSystem=
J||pa||null;this.outputCalendar=N||ja||null;J=this.locale;N=this.numberingSystem;if((E=this.outputCalendar)||N)J+="-u",E&&(J+="-ca-"+E),N&&(J+="-nu-"+N);this.intl=J;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=V;this.fastNumbersCached=null}H.fromOpts=function(E){return H.create(E.locale,E.numberingSystem,E.outputCalendar,E.defaultToEN)};H.create=function(E,J,N,V){void 0===V&&(V=!1);E=E||Ta.defaultLocale;
var ja;(ja=E)||(V?V="en-US":(Eb||(Eb=(new Intl.DateTimeFormat).resolvedOptions().locale),V=Eb),ja=V);return new H(ja,J||Ta.defaultNumberingSystem,N||Ta.defaultOutputCalendar,E)};H.resetCache=function(){Eb=null;Fb={};Qb={};Rb={}};H.fromObject=function(E){E=void 0===E?{}:E;return H.create(E.locale,E.numberingSystem,E.outputCalendar)};var L=H.prototype;L.listingMode=function(){var E=this.isEnglish(),J=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===
this.outputCalendar);return E&&J?"en":"intl"};L.clone=function(E){return E&&0!==Object.getOwnPropertyNames(E).length?H.create(E.locale||this.specifiedLocale,E.numberingSystem||this.numberingSystem,E.outputCalendar||this.outputCalendar,E.defaultToEN||!1):this};L.redefaultToEN=function(E){void 0===E&&(E={});return this.clone(b({},E,{defaultToEN:!0}))};L.redefaultToSystem=function(E){void 0===E&&(E={});return this.clone(b({},E,{defaultToEN:!1}))};L.months=function(E,J,N){var V=this;void 0===J&&(J=!1);
void 0===N&&(N=!0);return va(this,E,N,fa,function(){var ja=J?{month:E,day:"numeric"}:{month:E},pa=J?"format":"standalone";V.monthsCache[pa][E]||(V.monthsCache[pa][E]=ya(function(sa){return V.extract(sa,ja,"month")}));return V.monthsCache[pa][E]})};L.weekdays=function(E,J,N){var V=this;void 0===J&&(J=!1);void 0===N&&(N=!0);return va(this,E,N,S,function(){var ja=J?{weekday:E,year:"numeric",month:"long",day:"numeric"}:{weekday:E},pa=J?"format":"standalone";V.weekdaysCache[pa][E]||(V.weekdaysCache[pa][E]=
za(function(sa){return V.extract(sa,ja,"weekday")}));return V.weekdaysCache[pa][E]})};L.meridiems=function(E){var J=this;void 0===E&&(E=!0);return va(this,void 0,E,function(){return Ec},function(){if(!J.meridiemCache){var N={hour:"numeric",hourCycle:"h12"};J.meridiemCache=[Ra.utc(2016,11,13,9),Ra.utc(2016,11,13,19)].map(function(V){return J.extract(V,N,"dayperiod")})}return J.meridiemCache})};L.eras=function(E,J){var N=this;void 0===J&&(J=!0);return va(this,E,J,X,function(){var V={era:E};N.eraCache[E]||
(N.eraCache[E]=[Ra.utc(-40,1,1),Ra.utc(2017,1,1)].map(function(ja){return N.extract(ja,V,"era")}));return N.eraCache[E]})};L.extract=function(E,J,N){return(E=this.dtFormatter(E,J).formatToParts().find(function(V){return V.type.toLowerCase()===N}))?E.value:null};L.numberFormatter=function(E){void 0===E&&(E={});return new ld(this.intl,E.forceSimple||this.fastNumbers,E)};L.dtFormatter=function(E,J){void 0===J&&(J={});return new md(E,this.intl,J)};L.relFormatter=function(E){void 0===E&&(E={});return new nd(this.intl,
this.isEnglish(),E)};L.listFormatter=function(E){void 0===E&&(E={});var J=this.intl;void 0===E&&(E={});var N=JSON.stringify([J,E]),V=Mc[N];V||(V=new Intl.ListFormat(J,E),Mc[N]=V);return V};L.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};L.equals=function(E){return this.locale===E.locale&&this.numberingSystem===E.numberingSystem&&this.outputCalendar===E.outputCalendar};a(H,[{key:"fastNumbers",
get:function(){if(null==this.fastNumbersCached){var E=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=E}return this.fastNumbersCached}}]);return H}(),Nc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Sb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Oc=RegExp(""+Sb.source+("(?:"+Nc.source+"?(?:\\[("+Dc.source+")\\])?)?")),
Tb=RegExp("(?:T"+Oc.source+")?"),od=M("weekYear","weekNumber","weekDay"),pd=M("year","ordinal"),Pc=RegExp(Sb.source+" ?(?:"+Nc.source+"|("+Dc.source+"))?"),qd=RegExp("(?: "+Pc.source+")?"),rd=RegExp("^T?"+Sb.source+"$"),sd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,Yc={GMT:0,EDT:-240,EST:-300,CDT:-300,
CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},td=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,ud=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
wd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,xd=Fa(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Tb),yd=Fa(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Tb),zd=Fa(/(\d{4})-?(\d{3})/,Tb),Ad=Fa(Oc),Qc=Ea(function(H,L){return[{year:aa(H,L),month:aa(H,L+1,1),day:aa(H,L+2,1)},null,L+3]},ma,U,T),Bd=Ea(od,ma,U,T),Cd=Ea(pd,ma,U,T),Dd=Ea(ma,U,T),Ed=Ea(ma),Fd=Fa(/(\d{4})-(\d\d)-(\d\d)/,qd),Gd=Fa(Pc),Hd=Ea(ma,U,T),Rc={weeks:{days:7,hours:168,
minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Id=b({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6}},Rc),Jd=b({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Rc),mb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Zc=mb.slice(0).reverse(),
Za=function(){function H(E){var J="longterm"===E.conversionAccuracy||!1;this.values=E.values;this.loc=E.loc||Xa.create();this.conversionAccuracy=J?"longterm":"casual";this.invalid=E.invalid||null;this.matrix=J?Jd:Id;this.isLuxonDuration=!0}H.fromMillis=function(E,J){return H.fromObject({milliseconds:E},J)};H.fromObject=function(E,J){void 0===J&&(J={});if(null==E||"object"!==typeof E)throw new cb("Duration.fromObject: argument expected to be an object, got "+(null===E?"null":typeof E));return new H({values:Y(E,
H.normalizeUnit),loc:Xa.fromObject(J),conversionAccuracy:J.conversionAccuracy})};H.fromDurationLike=function(E){if(r(E))return H.fromMillis(E);if(H.isDuration(E))return E;if("object"===typeof E)return H.fromObject(E);throw new cb("Unknown duration argument "+E+" of type "+typeof E);};H.fromISO=function(E,J){var N=ra(E,[sd,ha])[0];return N?H.fromObject(N,J):H.invalid("unparsable",'the input "'+E+"\" can't be parsed as ISO 8601")};H.fromISOTime=function(E,J){var N=ra(E,[rd,Ed])[0];return N?H.fromObject(N,
J):H.invalid("unparsable",'the input "'+E+"\" can't be parsed as ISO 8601")};H.invalid=function(E,J){void 0===J&&(J=null);if(!E)throw new cb("need to specify a reason the Duration is invalid");var N=E instanceof fb?E:new fb(E,J);if(Ta.throwOnInvalid)throw new ed(N);return new H({invalid:N})};H.normalizeUnit=function(E){var J={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",
minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[E?E.toLowerCase():E];if(!J)throw new ec(E);return J};H.isDuration=function(E){return E&&E.isLuxonDuration||!1};var L=H.prototype;L.toFormat=function(E,J){void 0===J&&(J={});var N=b({},J,{floor:!1!==J.round&&!1!==J.floor});return this.isValid?hb.create(this.loc,N).formatDurationFromString(this,E):"Invalid Duration"};L.toHuman=function(E){var J=this;void 0===E&&(E={});var N=
mb.map(function(V){var ja=J.values[V];return m(ja)?null:J.loc.numberFormatter(b({style:"unit",unitDisplay:"long"},E,{unit:V.slice(0,-1)})).format(ja)}).filter(function(V){return V});return this.loc.listFormatter(b({type:"conjunction",style:E.listStyle||"narrow"},E)).format(N)};L.toObject=function(){return this.isValid?b({},this.values):{}};L.toISO=function(){if(!this.isValid)return null;var E="P";0!==this.years&&(E+=this.years+"Y");if(0!==this.months||0!==this.quarters)E+=this.months+3*this.quarters+
"M";0!==this.weeks&&(E+=this.weeks+"W");0!==this.days&&(E+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)E+="T";0!==this.hours&&(E+=this.hours+"H");0!==this.minutes&&(E+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)E+=C(this.seconds+this.milliseconds/1E3,3)+"S";"P"===E&&(E+="T0S");return E};L.toISOTime=function(E){void 0===E&&(E={});if(!this.isValid)return null;var J=this.toMillis();if(0>J||864E5<=J)return null;E=b({suppressMilliseconds:!1,
suppressSeconds:!1,includePrefix:!1,format:"extended"},E);J=this.shiftTo("hours","minutes","seconds","milliseconds");var N="basic"===E.format?"hhmm":"hh:mm";E.suppressSeconds&&0===J.seconds&&0===J.milliseconds||(N+="basic"===E.format?"ss":":ss",E.suppressMilliseconds&&0===J.milliseconds||(N+=".SSS"));J=J.toFormat(N);E.includePrefix&&(J="T"+J);return J};L.toJSON=function(){return this.toISO()};L.toString=function(){return this.toISO()};L.toMillis=function(){return this.as("milliseconds")};L.valueOf=
function(){return this.toMillis()};L.plus=function(E){if(!this.isValid)return this;E=H.fromDurationLike(E);for(var J={},N=l(mb),V;!(V=N()).done;)if(V=V.value,A(E.values,V)||A(this.values,V))J[V]=E.get(V)+this.get(V);return ia(this,{values:J},!0)};L.minus=function(E){if(!this.isValid)return this;E=H.fromDurationLike(E);return this.plus(E.negate())};L.mapUnits=function(E){if(!this.isValid)return this;for(var J={},N=0,V=Object.keys(this.values);N<V.length;N++){var ja=V[N];J[ja]=ea(E(this.values[ja],
ja))}return ia(this,{values:J},!0)};L.get=function(E){return this[H.normalizeUnit(E)]};L.set=function(E){if(!this.isValid)return this;E=b({},this.values,Y(E,H.normalizeUnit));return ia(this,{values:E})};L.reconfigure=function(E){var J=void 0===E?{}:E;E=J.conversionAccuracy;J={loc:this.loc.clone({locale:J.locale,numberingSystem:J.numberingSystem})};E&&(J.conversionAccuracy=E);return ia(this,J)};L.as=function(E){return this.isValid?this.shiftTo(E).get(E):NaN};L.normalize=function(){if(!this.isValid)return this;
var E=this.toObject();Aa(this.matrix,E);return ia(this,{values:E},!0)};L.shiftTo=function(){for(var E=arguments.length,J=Array(E),N=0;N<E;N++)J[N]=arguments[N];if(!this.isValid||0===J.length)return this;J=J.map(function(db){return H.normalizeUnit(db)});E={};N={};for(var V=this.toObject(),ja,pa=l(mb),sa;!(sa=pa()).done;)if(sa=sa.value,0<=J.indexOf(sa)){ja=sa;var xa=0,Da;for(Da in N)xa+=this.matrix[Da][sa]*N[Da],N[Da]=0;r(V[sa])&&(xa+=V[sa]);var Qa=Math.trunc(xa);E[sa]=Qa;N[sa]=(1E3*xa-1E3*Qa)/1E3;
for(var Ha in V)mb.indexOf(Ha)>mb.indexOf(sa)&&oa(this.matrix,V,Ha,E,sa)}else r(V[sa])&&(N[sa]=V[sa]);for(var Oa in N)0!==N[Oa]&&(E[ja]+=Oa===ja?N[Oa]:N[Oa]/this.matrix[ja][Oa]);return ia(this,{values:E},!0).normalize()};L.negate=function(){if(!this.isValid)return this;for(var E={},J=0,N=Object.keys(this.values);J<N.length;J++){var V=N[J];E[V]=0===this.values[V]?0:-this.values[V]}return ia(this,{values:E},!0)};L.equals=function(E){if(!this.isValid||!E.isValid||!this.loc.equals(E.loc))return!1;for(var J=
l(mb),N;!(N=J()).done;){var V=N.value;N=this.values[V];V=E.values[V];N=void 0===N||0===N?void 0===V||0===V:N===V;if(!N)return!1}return!0};a(H,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?
this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",
get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return H}(),ub=function(){function H(E){this.s=E.start;this.e=E.end;this.invalid=E.invalid||null;this.isLuxonInterval=!0}H.invalid=function(E,J){void 0===J&&(J=null);if(!E)throw new cb("need to specify a reason the Interval is invalid");var N=E instanceof fb?E:new fb(E,J);if(Ta.throwOnInvalid)throw new dd(N);
return new H({invalid:N})};H.fromDateTimes=function(E,J){var N=tb(E),V=tb(J);var ja=N&&N.isValid?V&&V.isValid?V<N?ub.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+N.toISO()+" and end\x3d"+V.toISO()):null:ub.invalid("missing or invalid end"):ub.invalid("missing or invalid start");return null==ja?new H({start:N,end:V}):ja};H.after=function(E,J){var N=Za.fromDurationLike(J),V=tb(E);return H.fromDateTimes(V,V.plus(N))};H.before=function(E,J){var N=
Za.fromDurationLike(J),V=tb(E);return H.fromDateTimes(V.minus(N),V)};H.fromISO=function(E,J){var N=(E||"").split("/",2),V=N[0];N=N[1];if(V&&N){try{var ja=Ra.fromISO(V,J);var pa=ja.isValid}catch(Da){pa=!1}try{var sa=Ra.fromISO(N,J);var xa=sa.isValid}catch(Da){xa=!1}if(pa&&xa)return H.fromDateTimes(ja,sa);if(pa){if(sa=Za.fromISO(N,J),sa.isValid)return H.after(ja,sa)}else if(xa&&(ja=Za.fromISO(V,J),ja.isValid))return H.before(sa,ja)}return H.invalid("unparsable",'the input "'+E+"\" can't be parsed as ISO 8601")};
H.isInterval=function(E){return E&&E.isLuxonInterval||!1};var L=H.prototype;L.length=function(E){void 0===E&&(E="milliseconds");return this.isValid?this.toDuration.apply(this,[E]).get(E):NaN};L.count=function(E){void 0===E&&(E="milliseconds");if(!this.isValid)return NaN;var J=this.start.startOf(E),N=this.end.startOf(E);return Math.floor(N.diff(J,E).get(E))+1};L.hasSame=function(E){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,E):!1};L.isEmpty=function(){return this.s.valueOf()===
this.e.valueOf()};L.isAfter=function(E){return this.isValid?this.s>E:!1};L.isBefore=function(E){return this.isValid?this.e<=E:!1};L.contains=function(E){return this.isValid?this.s<=E&&this.e>E:!1};L.set=function(E){E=void 0===E?{}:E;return this.isValid?H.fromDateTimes(E.start||this.s,E.end||this.e):this};L.splitAt=function(){var E=this;if(!this.isValid)return[];for(var J=arguments.length,N=Array(J),V=0;V<J;V++)N[V]=arguments[V];J=N.map(tb).filter(function(sa){return E.contains(sa)}).sort();N=[];V=
this.s;for(var ja=0;V<this.e;){var pa=J[ja]||this.e;pa=+pa>+this.e?this.e:pa;N.push(H.fromDateTimes(V,pa));V=pa;ja+=1}return N};L.splitBy=function(E){E=Za.fromDurationLike(E);if(!this.isValid||!E.isValid||0===E.as("milliseconds"))return[];for(var J=this.s,N=1,V,ja=[];J<this.e;)V=this.start.plus(E.mapUnits(function(pa){return pa*N})),V=+V>+this.e?this.e:V,ja.push(H.fromDateTimes(J,V)),J=V,N+=1;return ja};L.divideEqually=function(E){return this.isValid?this.splitBy(this.length()/E).slice(0,E):[]};L.overlaps=
function(E){return this.e>E.s&&this.s<E.e};L.abutsStart=function(E){return this.isValid?+this.e===+E.s:!1};L.abutsEnd=function(E){return this.isValid?+E.e===+this.s:!1};L.engulfs=function(E){return this.isValid?this.s<=E.s&&this.e>=E.e:!1};L.equals=function(E){return this.isValid&&E.isValid?this.s.equals(E.s)&&this.e.equals(E.e):!1};L.intersection=function(E){if(!this.isValid)return this;var J=this.s>E.s?this.s:E.s;E=this.e<E.e?this.e:E.e;return J>=E?null:H.fromDateTimes(J,E)};L.union=function(E){return this.isValid?
H.fromDateTimes(this.s<E.s?this.s:E.s,this.e>E.e?this.e:E.e):this};H.merge=function(E){var J=E.sort(function(N,V){return N.s-V.s}).reduce(function(N,V){var ja=N[0],pa=N[1];return pa?pa.overlaps(V)||pa.abutsStart(V)?[ja,pa.union(V)]:[ja.concat([pa]),V]:[ja,V]},[[],null]);E=J[0];(J=J[1])&&E.push(J);return E};H.xor=function(E){var J,N=null,V=0,ja=[];E=E.map(function(pa){return[{time:pa.s,type:"s"},{time:pa.e,type:"e"}]});E=(J=Array.prototype).concat.apply(J,E).sort(function(pa,sa){return pa.time-sa.time});
for(J=l(E);!(E=J()).done;)E=E.value,V+="s"===E.type?1:-1,1===V?N=E.time:(N&&+N!==+E.time&&ja.push(H.fromDateTimes(N,E.time)),N=null);return H.merge(ja)};L.difference=function(){for(var E=this,J=arguments.length,N=Array(J),V=0;V<J;V++)N[V]=arguments[V];return H.xor([this].concat(N)).map(function(ja){return E.intersection(ja)}).filter(function(ja){return ja&&!ja.isEmpty()})};L.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};L.toISO=function(E){return this.isValid?
this.s.toISO(E)+"/"+this.e.toISO(E):"Invalid Interval"};L.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};L.toISOTime=function(E){return this.isValid?this.s.toISOTime(E)+"/"+this.e.toISOTime(E):"Invalid Interval"};L.toFormat=function(E,J){var N=(void 0===J?{}:J).separator;N=void 0===N?" \u2013 ":N;return this.isValid?""+this.s.toFormat(E)+N+this.e.toFormat(E):"Invalid Interval"};L.toDuration=function(E,J){return this.isValid?this.e.diff(this.s,
E,J):Za.invalid(this.invalidReason)};L.mapEndpoints=function(E){return H.fromDateTimes(E(this.s),E(this.e))};a(H,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return H}(),vb=function(){function H(){}
H.hasDST=function(L){void 0===L&&(L=Ta.defaultZone);var E=Ra.now().setZone(L).set({month:12});return!L.isUniversal&&E.offset!==E.set({month:6}).offset};H.isValidIANAZone=function(L){return jb.isValidZone(L)};H.normalizeZone=function(L){return qa(L,Ta.defaultZone)};H.months=function(L,E){void 0===L&&(L="long");var J=void 0===E?{}:E,N=J.locale,V=J.numberingSystem,ja=J.locObj;J=J.outputCalendar;return((void 0===ja?null:ja)||Xa.create(void 0===N?null:N,void 0===V?null:V,void 0===J?"gregory":J)).months(L)};
H.monthsFormat=function(L,E){void 0===L&&(L="long");var J=void 0===E?{}:E,N=J.locale,V=J.numberingSystem,ja=J.locObj;J=J.outputCalendar;return((void 0===ja?null:ja)||Xa.create(void 0===N?null:N,void 0===V?null:V,void 0===J?"gregory":J)).months(L,!0)};H.weekdays=function(L,E){void 0===L&&(L="long");var J=void 0===E?{}:E,N=J.locale,V=J.numberingSystem;J=J.locObj;return((void 0===J?null:J)||Xa.create(void 0===N?null:N,void 0===V?null:V,null)).weekdays(L)};H.weekdaysFormat=function(L,E){void 0===L&&(L=
"long");var J=void 0===E?{}:E,N=J.locale,V=J.numberingSystem;J=J.locObj;return((void 0===J?null:J)||Xa.create(void 0===N?null:N,void 0===V?null:V,null)).weekdays(L,!0)};H.meridiems=function(L){L=(void 0===L?{}:L).locale;return Xa.create(void 0===L?null:L).meridiems()};H.eras=function(L,E){void 0===L&&(L="short");var J=(void 0===E?{}:E).locale;return Xa.create(void 0===J?null:J,null,"gregory").eras(L)};H.features=function(){return{relative:x()}};return H}(),Gb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",
bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Yb={arab:[1632,
1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},$c=Gb.hanidec.replace(/[\[|\]]/g,"").split(""),Zb="[ "+String.fromCharCode(160)+"]",Hb=new RegExp(Zb,"g"),bd={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",
"short":"MMM","long":"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Ib=null,Kb=[0,31,59,90,120,151,181,212,243,273,304,334],Jb=[0,31,60,91,121,152,182,213,244,274,305,335],hc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ld={ordinal:1,hour:0,minute:0,second:0,
millisecond:0},gc="year month day hour minute second millisecond".split(" "),Md="weekYear weekNumber weekday hour minute second millisecond".split(" "),Nd="year ordinal hour minute second millisecond".split(" "),Ra=function(){function H(E){var J=E.zone||Ta.defaultZone,N=E.invalid||(Number.isNaN(E.ts)?new fb("invalid input"):null)||(J.isValid?null:Sa(J));this.ts=m(E.ts)?Ta.now():E.ts;var V=null,ja=null;N||(E.old&&E.old.ts===this.ts&&E.old.zone.equals(J)?(ja=[E.old.c,E.old.o],V=ja[0],ja=ja[1]):(ja=
J.offset(this.ts),V=ac(this.ts,ja),V=(N=Number.isNaN(V.year)?new fb("invalid input"):null)?null:V,ja=N?null:ja));this._zone=J;this.loc=E.loc||Xa.create();this.invalid=N;this.weekData=null;this.c=V;this.o=ja;this.isLuxonDateTime=!0}H.now=function(){return new H({})};H.local=function(){var E=jc(arguments),J=E[1];return fc({year:J[0],month:J[1],day:J[2],hour:J[3],minute:J[4],second:J[5],millisecond:J[6]},E[0])};H.utc=function(){var E=jc(arguments),J=E[0],N=E[1];E=N[0];var V=N[1],ja=N[2],pa=N[3],sa=N[4],
xa=N[5];N=N[6];J.zone=eb.utcInstance;return fc({year:E,month:V,day:ja,hour:pa,minute:sa,second:xa,millisecond:N},J)};H.fromJSDate=function(E,J){void 0===J&&(J={});var N="[object Date]"===Object.prototype.toString.call(E)?E.valueOf():NaN;if(Number.isNaN(N))return H.invalid("invalid input");var V=qa(J.zone,Ta.defaultZone);return V.isValid?new H({ts:N,zone:V,loc:Xa.fromObject(J)}):H.invalid(Sa(V))};H.fromMillis=function(E,J){void 0===J&&(J={});if(r(E))return-864E13>E||864E13<E?H.invalid("Timestamp out of range"):
new H({ts:E,zone:qa(J.zone,Ta.defaultZone),loc:Xa.fromObject(J)});throw new cb("fromMillis requires a numerical input, but received a "+typeof E+" with value "+E);};H.fromSeconds=function(E,J){void 0===J&&(J={});if(r(E))return new H({ts:1E3*E,zone:qa(J.zone,Ta.defaultZone),loc:Xa.fromObject(J)});throw new cb("fromSeconds requires a numerical input");};H.fromObject=function(E,J){void 0===J&&(J={});E=E||{};var N=qa(J.zone,Ta.defaultZone);if(!N.isValid)return H.invalid(Sa(N));var V=Ta.now(),ja=m(J.specificOffset)?
N.offset(V):J.specificOffset,pa=Y(E,dc),sa=!m(pa.ordinal),xa=!m(pa.year),Da=!m(pa.month)||!m(pa.day);xa=xa||Da;var Qa=pa.weekYear||pa.weekNumber,Ha=Xa.fromObject(J);if((xa||sa)&&Qa)throw new ob("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Da&&sa)throw new ob("Can't mix ordinal dates with month/day");Da=Qa||pa.weekday&&!xa;Qa=ac(V,ja);if(Da){var Oa=Md;V=Kd;Qa=pb(Qa)}else sa?(Oa=Nd,V=Ld,Qa=qb(Qa)):(Oa=gc,V=hc);var db=!1;Oa=l(Oa);for(var ab;!(ab=Oa()).done;)ab=ab.value,m(pa[ab])?
pa[ab]=db?V[ab]:Qa[ab]:db=!0;Da?(V=t(pa.weekYear),Qa=B(pa.weekNumber,1,R(pa.weekYear)),db=B(pa.weekday,1,7),V=V?Qa?db?!1:$a("weekday",pa.weekday):$a("week",pa.week):$a("weekYear",pa.weekYear)):sa?(V=t(pa.year),Qa=B(pa.ordinal,1,G(pa.year)?366:365),V=V?Qa?!1:$a("ordinal",pa.ordinal):$a("year",pa.year)):V=yb(pa);if(V=V||zb(pa))return H.invalid(V);sa=Da?xb(pa):sa?kb(pa):pa;ja=Ab(sa,ja,N);N=new H({ts:ja[0],zone:N,o:ja[1],loc:Ha});return pa.weekday&&xa&&E.weekday!==N.weekday?H.invalid("mismatched weekday",
"you can't specify both a weekday of "+pa.weekday+" and a date of "+N.toISO()):N};H.fromISO=function(E,J){void 0===J&&(J={});var N=ra(E,[xd,Qc],[yd,Bd],[zd,Cd],[Ad,Dd]);return sb(N[0],N[1],J,"ISO 8601",E)};H.fromRFC2822=function(E,J){void 0===J&&(J={});var N=ra(E.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[td,K]);return sb(N[0],N[1],J,"RFC 2822",E)};H.fromHTTP=function(E,J){void 0===J&&(J={});var N=ra(E,[ud,P],[vd,P],[wd,ca]);return sb(N[0],N[1],J,"HTTP",J)};H.fromFormat=function(E,
J,N){void 0===N&&(N={});if(m(E)||m(J))throw new cb("fromFormat requires an input string and a format");var V=N,ja=V.locale;V=V.numberingSystem;ja=Xa.fromOpts({locale:void 0===ja?null:ja,numberingSystem:void 0===V?null:V,defaultToEN:!0});ja=bb(ja,E,J);var pa=[ja.result,ja.zone,ja.specificOffset,ja.invalidReason];ja=pa[0];V=pa[1];var sa=pa[2];return(pa=pa[3])?H.invalid(pa):sb(ja,V,N,"format "+J,E,sa)};H.fromString=function(E,J,N){void 0===N&&(N={});return H.fromFormat(E,J,N)};H.fromSQL=function(E,J){void 0===
J&&(J={});var N=ra(E,[Fd,Qc],[Gd,Hd]);return sb(N[0],N[1],J,"SQL",E)};H.invalid=function(E,J){void 0===J&&(J=null);if(!E)throw new cb("need to specify a reason the DateTime is invalid");var N=E instanceof fb?E:new fb(E,J);if(Ta.throwOnInvalid)throw new cd(N);return new H({invalid:N})};H.isDateTime=function(E){return E&&E.isLuxonDateTime||!1};var L=H.prototype;L.get=function(E){return this[E]};L.resolvedLocaleOptions=function(E){void 0===E&&(E={});E=hb.create(this.loc.clone(E),E).resolvedOptions(this);
return{locale:E.locale,numberingSystem:E.numberingSystem,outputCalendar:E.calendar}};L.toUTC=function(E,J){void 0===E&&(E=0);void 0===J&&(J={});return this.setZone(eb.instance(E),J)};L.toLocal=function(){return this.setZone(Ta.defaultZone)};L.setZone=function(E,J){var N=void 0===J?{}:J,V=N.keepLocalTime;V=void 0===V?!1:V;N=N.keepCalendarTime;N=void 0===N?!1:N;E=qa(E,Ta.defaultZone);if(E.equals(this.zone))return this;if(E.isValid){var ja=this.ts;if(V||N)V=E.offset(this.ts),N=this.toObject(),ja=Ab(N,
V,E)[0];return rb(this,{ts:ja,zone:E})}return H.invalid(Sa(E))};L.reconfigure=function(E){E=void 0===E?{}:E;E=this.loc.clone({locale:E.locale,numberingSystem:E.numberingSystem,outputCalendar:E.outputCalendar});return rb(this,{loc:E})};L.setLocale=function(E){return this.reconfigure({locale:E})};L.set=function(E){if(!this.isValid)return this;E=Y(E,dc);var J=!m(E.weekYear)||!m(E.weekNumber)||!m(E.weekday),N=!m(E.ordinal),V=!m(E.year),ja=!m(E.month)||!m(E.day),pa=E.weekYear||E.weekNumber;if((V||ja||
N)&&pa)throw new ob("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ja&&N)throw new ob("Can't mix ordinal dates with month/day");J?J=xb(b({},pb(this.c),E)):m(E.ordinal)?(J=b({},this.toObject(),E),m(E.day)&&(J.day=Math.min(I(J.year,J.month),J.day))):J=kb(b({},qb(this.c),E));E=Ab(J,this.o,this.zone);return rb(this,{ts:E[0],o:E[1]})};L.plus=function(E){if(!this.isValid)return this;E=Za.fromDurationLike(E);return rb(this,bc(this,E))};L.minus=function(E){if(!this.isValid)return this;
E=Za.fromDurationLike(E).negate();return rb(this,bc(this,E))};L.startOf=function(E){if(!this.isValid)return this;var J={};E=Za.normalizeUnit(E);switch(E){case "years":J.month=1;case "quarters":case "months":J.day=1;case "weeks":case "days":J.hour=0;case "hours":J.minute=0;case "minutes":J.second=0;case "seconds":J.millisecond=0}"weeks"===E&&(J.weekday=1);"quarters"===E&&(J.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(J)};L.endOf=function(E){var J;return this.isValid?this.plus((J={},J[E]=
1,J)).startOf(E).minus(1):this};L.toFormat=function(E,J){void 0===J&&(J={});return this.isValid?hb.create(this.loc.redefaultToEN(J)).formatDateTimeFromString(this,E):"Invalid DateTime"};L.toLocaleString=function(E,J){void 0===E&&(E=Nb);void 0===J&&(J={});return this.isValid?hb.create(this.loc.clone(J),E).formatDateTime(this):"Invalid DateTime"};L.toLocaleParts=function(E){void 0===E&&(E={});return this.isValid?hb.create(this.loc.clone(E),E).formatDateTimeParts(this):[]};L.toISO=function(E){var J=
void 0===E?{}:E,N=J.format;E=J.suppressSeconds;E=void 0===E?!1:E;var V=J.suppressMilliseconds;V=void 0===V?!1:V;var ja=J.includeOffset;ja=void 0===ja?!0:ja;J=J.extendedZone;J=void 0===J?!1:J;if(!this.isValid)return null;N="extended"===(void 0===N?"extended":N);var pa=Mb(this,N);return pa=pa+"T"+cc(this,N,E,V,ja,J)};L.toISODate=function(E){E=(void 0===E?{}:E).format;return this.isValid?Mb(this,"extended"===(void 0===E?"extended":E)):null};L.toISOWeekDate=function(){return Bb(this,"kkkk-'W'WW-c")};
L.toISOTime=function(E){var J=void 0===E?{}:E;E=J.suppressMilliseconds;var N=J.suppressSeconds,V=J.includeOffset,ja=J.includePrefix,pa=J.extendedZone;J=J.format;return this.isValid?((void 0===ja?0:ja)?"T":"")+cc(this,"extended"===(void 0===J?"extended":J),void 0===N?!1:N,void 0===E?!1:E,void 0===V?!0:V,void 0===pa?!1:pa):null};L.toRFC2822=function(){return Bb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};L.toHTTP=function(){return Bb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};L.toSQLDate=function(){return this.isValid?
Mb(this,!0):null};L.toSQLTime=function(E){var J=void 0===E?{}:E;E=J.includeOffset;E=void 0===E?!0:E;var N=J.includeZone;N=void 0===N?!1:N;J=J.includeOffsetSpace;J=void 0===J?!0:J;var V="HH:mm:ss.SSS";if(N||E)J&&(V+=" "),N?V+="z":E&&(V+="ZZ");return Bb(this,V,!0)};L.toSQL=function(E){void 0===E&&(E={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(E):null};L.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};L.valueOf=function(){return this.toMillis()};L.toMillis=function(){return this.isValid?
this.ts:NaN};L.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};L.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1E3):NaN};L.toJSON=function(){return this.toISO()};L.toBSON=function(){return this.toJSDate()};L.toObject=function(E){void 0===E&&(E={});if(!this.isValid)return{};var J=b({},this.c);E.includeConfig&&(J.outputCalendar=this.outputCalendar,J.numberingSystem=this.loc.numberingSystem,J.locale=this.loc.locale);return J};L.toJSDate=function(){return new Date(this.isValid?
this.ts:NaN)};L.diff=function(E,J,N){void 0===J&&(J="milliseconds");void 0===N&&(N={});if(!this.isValid||!E.isValid)return Za.invalid("created by diffing an invalid DateTime");N=b({locale:this.locale,numberingSystem:this.numberingSystem},N);var V=(Array.isArray(J)?J:[J]).map(Za.normalizeUnit);J=E.valueOf()>this.valueOf();E=Ja(J?this:E,J?E:this,V,N);return J?E.negate():E};L.diffNow=function(E,J){void 0===E&&(E="milliseconds");void 0===J&&(J={});return this.diff(H.now(),E,J)};L.until=function(E){return this.isValid?
ub.fromDateTimes(this,E):this};L.hasSame=function(E,J){if(!this.isValid)return!1;var N=E.valueOf(),V=this.setZone(E.zone,{keepLocalTime:!0});return V.startOf(J)<=N&&N<=V.endOf(J)};L.equals=function(E){return this.isValid&&E.isValid&&this.valueOf()===E.valueOf()&&this.zone.equals(E.zone)&&this.loc.equals(E.loc)};L.toRelative=function(E){void 0===E&&(E={});if(!this.isValid)return null;var J=E.base||H.fromObject({},{zone:this.zone}),N=E.padding?this<J?-E.padding:E.padding:0,V="years months days hours minutes seconds".split(" "),
ja=E.unit;Array.isArray(E.unit)&&(V=E.unit,ja=void 0);return ic(J,this.plus(N),b({},E,{numeric:"always",units:V,unit:ja}))};L.toRelativeCalendar=function(E){void 0===E&&(E={});return this.isValid?ic(E.base||H.fromObject({},{zone:this.zone}),this,b({},E,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};H.min=function(){for(var E=arguments.length,J=Array(E),N=0;N<E;N++)J[N]=arguments[N];if(!J.every(H.isDateTime))throw new cb("min requires all arguments be DateTimes");return v(J,
function(V){return V.valueOf()},Math.min)};H.max=function(){for(var E=arguments.length,J=Array(E),N=0;N<E;N++)J[N]=arguments[N];if(!J.every(H.isDateTime))throw new cb("max requires all arguments be DateTimes");return v(J,function(V){return V.valueOf()},Math.max)};H.fromFormatExplain=function(E,J,N){void 0===N&&(N={});var V=N;N=V.locale;V=V.numberingSystem;N=Xa.fromOpts({locale:void 0===N?null:N,numberingSystem:void 0===V?null:V,defaultToEN:!0});return bb(N,E,J)};H.fromStringExplain=function(E,J,N){void 0===
N&&(N={});return H.fromFormatExplain(E,J,N)};a(H,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?
this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",
get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Lb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Lb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Lb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?qb(this.c).ordinal:NaN}},
{key:"monthShort",get:function(){return this.isValid?vb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?vb.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?vb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?vb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?
+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},
{key:"isInLeapYear",get:function(){return G(this.year)}},{key:"daysInMonth",get:function(){return I(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?G(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?R(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Nb}},{key:"DATE_MED",get:function(){return kc}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return fd}},{key:"DATE_FULL",get:function(){return lc}},{key:"DATE_HUGE",get:function(){return mc}},
{key:"TIME_SIMPLE",get:function(){return nc}},{key:"TIME_WITH_SECONDS",get:function(){return oc}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return pc}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return qc}},{key:"TIME_24_SIMPLE",get:function(){return rc}},{key:"TIME_24_WITH_SECONDS",get:function(){return sc}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return tc}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return uc}},{key:"DATETIME_SHORT",get:function(){return vc}},{key:"DATETIME_SHORT_WITH_SECONDS",
get:function(){return wc}},{key:"DATETIME_MED",get:function(){return xc}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return yc}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return gd}},{key:"DATETIME_FULL",get:function(){return zc}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Ac}},{key:"DATETIME_HUGE",get:function(){return Bc}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Cc}}]);return H}();F.DateTime=Ra;F.Duration=Za;F.FixedOffsetZone=eb;F.IANAZone=jb;F.Info=vb;F.Interval=
ub;F.InvalidZone=Xb;F.Settings=Ta;F.SystemZone=Fc;F.VERSION="2.4.0";F.Zone=nb;Object.defineProperty(F,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../../geometry/Extent ../../../layers/Field".split(" "),function(F,q,a,b,e,g){function k(d){var f=null;d.domain&&(f="range"===d.domain.type?{type:"range",range:[d.domain.minValue,d.domain.maxValue]}:{type:"codedValue",codedValues:d.domain.toJson().codedValues});
return a(a({name:d.name,type:d.type,alias:d.alias},void 0!==d.length?{length:d.length}:{}),{editable:!0===d.editable,nullable:!0===d.nullable,domain:f})}function c(d){return d instanceof Date}Object.defineProperty(q,"__esModule",{value:!0});q.stableStringify=q.extractServiceUrl=q.toEsriGeometryType=q.layerFieldEsriConstants=q.layerGeometryEsriRestConstants=q.layerGeometryEsriConstants=q.callback=q.errback=q.defaultMaxRecords=q.sameGeomType=q.convertLinearUnitsToCode=q.shapeExtent=q.convertSquareUnitsToCode=
q.cloneAttributes=q.equalityTest=q.isDate=q.isArray=q.isNumber=q.isBoolean=q.isString=q.IdState=q.esriFieldToJson=q.cloneField=q.FeatureServiceDatabaseType=void 0;(function(d){d[d.Standardised=0]="Standardised";d[d.StandardisedNoInterval=1]="StandardisedNoInterval";d[d.SqlServer=2]="SqlServer";d[d.Oracle=3]="Oracle";d[d.Postgres=4]="Postgres";d[d.PGDB=5]="PGDB";d[d.FILEGDB=6]="FILEGDB";d[d.NotEvaluated=7]="NotEvaluated"})(q.FeatureServiceDatabaseType||(q.FeatureServiceDatabaseType={}));q.cloneField=
function(d){return new g(k(d))};q.esriFieldToJson=k;(function(d){d[d.InFeatureSet=0]="InFeatureSet";d[d.NotInFeatureSet=1]="NotInFeatureSet";d[d.Unknown=2]="Unknown"})(q.IdState||(q.IdState={}));q.isString=function(d){return"string"===typeof d||d instanceof String};q.isBoolean=function(d){return"boolean"===typeof d};q.isNumber=function(d){return"number"===typeof d};q.isArray=function(d){return d instanceof Array};q.isDate=c;q.equalityTest=function(d,f){return d===f?!0:c(d)&&c(f)?d.getTime()===f.getTime():
!1};q.cloneAttributes=function(d){var f={},h;for(h in d)f[h]=d[h];return f};q.convertSquareUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};q.shapeExtent=function(d){if(null===d)return null;switch(d.type){case "polygon":case "multipoint":case "polyline":return d.getExtent();case "point":return new e({xmin:d.x,
ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference});case "extent":return d}return null};q.convertLinearUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d||"number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};q.sameGeomType=function(d,f){return d===f||"point"===d&&"esriGeometryPoint"===f||"polyline"===d&&"esriGeometryPolyline"===
f||"polygon"===d&&"esriGeometryPolygon"===f||"extent"===d&&"esriGeometryEnvelope"===f||"multipoint"===d&&"esriGeometryMultipoint"===f||"point"===f&&"esriGeometryPoint"===d||"polyline"===f&&"esriGeometryPolyline"===d||"polygon"===f&&"esriGeometryPolygon"===d||"extent"===f&&"esriGeometryEnvelope"===d||"multipoint"===f&&"esriGeometryMultipoint"===d?!0:!1};q.defaultMaxRecords=1E3;q.errback=function(d){return function(f){d.reject(f)}};q.callback=function(d,f){return function(){try{d.apply(null,arguments)}catch(h){f.reject(h)}}};
q.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};q.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",
esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};q.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",
blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",
esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};q.toEsriGeometryType=function(d){switch(d){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};q.extractServiceUrl=function(d){if(void 0===
d)return"";d=d.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");d=d.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return d=d.split("?")[0]};q.stableStringify=function(d,f){f||(f={});"function"===typeof f&&(f={cmp:f});var h="boolean"===typeof f.cycles?f.cycles:!1,n=f.cmp&&function(l){return function(m){return function(r,t){return l({key:r,value:m[r]},{key:t,value:m[t]})}}}(f.cmp),p=[];return function r(m){m&&m.toJson&&"function"===typeof m.toJson&&(m=m.toJson());if(void 0!==m){if("number"===typeof m)return isFinite(m)?
""+m:"null";if("object"!==typeof m)return JSON.stringify(m);var t;if(Array.isArray(m)){var x="[";for(t=0;t<m.length;t++)t&&(x+=","),x+=r(m[t])||"null";return x+"]"}if(null===m)return"null";if(p.includes(m)){if(h)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var v=p.push(m)-1,z=Object.keys(m).sort(n&&n(m));x="";for(t=0;t<z.length;t++){var A=z[t],B=r(m[A]);B&&(x&&(x+=","),x+=JSON.stringify(A)+":"+B)}p.splice(v,1);return"{"+x+"}"}}(d)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),
function(F,q,a,b,e,g,k){F=F(null,{declaredClass:"esri.layers.Field",constructor:function(c){if(c&&q.isObject(c)&&(this.name=c.name,this.type=c.type,this.alias=c.alias,this.length=c.length,this.editable=c.editable,this.nullable=c.nullable,this.defaultValue=c.defaultValue,this.description=c.description?JSON.parse(c.description):null,this.isViewOverride=!!c.isViewOverride,(c=c.domain)&&q.isObject(c)))switch(c.type){case "range":this.domain=new g(c);break;case "codedValue":this.domain=new k(c)}},toJson:function(){return e.fixJson({name:this.name,
type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});q.setObject("layers.Field",F,b);return F})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(F,
q,a,b,e,g){F=F([g],{declaredClass:"esri.layers.RangeDomain",constructor:function(k){k&&q.isObject(k)&&(this.minValue=k.range[0],this.maxValue=k.range[1])},toJson:function(){var k=this.inherited(arguments);k.range=[this.minValue,this.maxValue];return e.fixJson(k)}});q.setObject("layers.RangeDomain",F,b);return F})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,q,a,b,e){F=F(null,{declaredClass:"esri.layers.Domain",constructor:function(g){g&&
q.isObject(g)&&(this.name=g.name,this.type=g.type)},toJson:function(){return e.fixJson({name:this.name,type:this.type})}});q.setObject("layers.Domain",F,b);return F})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(F,q,a,b,e,g,k){F=F([k],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(c){c&&q.isObject(c)&&(this.codedValues=c.codedValues)},getName:function(c){var d;a.some(this.codedValues,
function(f){f.code==c&&(d=f.name);return!!d});return d},toJson:function(){var c=this.inherited(arguments);c.codedValues=q.clone(this.codedValues);return g.fixJson(c)}});q.setObject("layers.CodedValueDomain",F,e);return F})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(F,q,a){a.prototype.repurposeFromGraphicLikeObject=function(b,e,g){void 0===g&&(g=null);null===e&&(e={});this.attributes=e;this.geometry=b;this._datesfixed=(this._layer=
g)?!1:!0};return a})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n){return function(){function p(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this._datesfixed=
!0;this._datefields=null;this.immutable=!0}p.createFromGraphic=function(l){var m=new p;m._geometry=l.geometry?l.geometry:null;m.attributes=void 0===l.attributes?{}:null===l.attributes?{}:l.attributes;l._sourceLayer?(m._layer=l._sourceLayer,m._datesfixed=!1):l._layer?(m._layer=l._layer,m._datesfixed=!1):l.layer&&"fields"in l.layer?(m._layer=l.layer,m._datesfixed=!1):l.sourceLayer&&"fields"in l.sourceLayer&&(m._layer=l.sourceLayer,m._datesfixed=!1);return m};p.createFromArcadeFeature=function(l){var m=
new p;m._datesfixed=l._datesfixed;m.attributes=l.attributes;m._geometry=l._geometry;l._layer&&(m._layer=l._layer);return m};p.createFromArcadeDictionary=function(l){var m=new p;m.attributes=l.field("attributes");null!==m.attributes?m.attributes instanceof k?(m.attributes=m.attributes.attributes,null===m.attributes&&(m.attributes={})):m.attributes={}:m.attributes={};m._geometry=l.field("geometry");null!==m._geometry&&(m._geometry instanceof k?m._geometry=p.parseGeometryFromDictionary(m._geometry):
m._geometry instanceof f||(m._geometry=null));return m};p.createFromGraphicLikeObject=function(l,m,r){void 0===r&&(r=null);var t=new p;null===m&&(m={});t.attributes=m;t._geometry=l?l:null;t._layer=r;t._layer&&(t._datesfixed=!1);return t};p.prototype.repurposeFromGraphicLikeObject=function(l,m,r){void 0===r&&(r=null);null===m&&(m={});this.attributes=m;this._geometry=l?l:null;this._datesfixed=(this._layer=r)?!1:!0};p.prototype.castToText=function(){var l="";!1===this._datesfixed&&this._fixDates();for(var m in this.attributes){""!==
l&&(l+=",");var r=this.attributes[m];null==r?l+=JSON.stringify(m)+":null":d.isBoolean(r)||d.isNumber(r)||d.isString(r)?l+=JSON.stringify(m)+":"+JSON.stringify(r):r instanceof f?l+=JSON.stringify(m)+":"+d.toStringExplicit(r):r instanceof c?l+=JSON.stringify(m)+":"+d.toStringExplicit(r):r instanceof Array?l+=JSON.stringify(m)+":"+d.toStringExplicit(r):r instanceof Date?l+=JSON.stringify(m)+":"+JSON.stringify(r):null!==r&&"object"===typeof r&&void 0!==r.castToText&&(l+=JSON.stringify(m)+":"+r.castToText())}return'{"geometry":'+
(null===this.geometry()?"null":d.toStringExplicit(this.geometry()))+',"attributes":{'+l+"}}"};p.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var l=[],m=0;m<this._layer.fields.length;m++){var r=this._layer.fields[m];"date"!==r.type&&"esriFieldTypeDate"!==r.type||l.push(r.name)}this._datefields=l;0<l.length&&this._fixDateFields(l)}this._datesfixed=!0};p.prototype._fixDateFields=function(l){this.attributes=e({},this.attributes);
for(var m=0;m<l.length;m++){var r=this.attributes[l[m]];if(null!==r)if(void 0===r)for(var t in this.attributes){if(t.toLowerCase()===l[m].toLowerCase()){r=this.attributes[t];null===r||r instanceof Date||(this.attributes[t]=new Date(r));break}}else r instanceof Date||(this.attributes[l[m]]=new Date(r))}};p.prototype.geometry=function(){if(null===this._geometry)return this._geometry;this._geometry instanceof f||(this._geometry=n.fromJson(this._geometry));return this._geometry};p.prototype.field=function(l){!1===
this._datesfixed&&this._fixDates();var m=this.attributes[l];if(void 0!==m)return m;m=l.toLowerCase();for(var r in this.attributes)if(r.toLowerCase()===m)return this.attributes[r];if(this._hasFieldDefinition(m))return null;throw Error("Field not Found : "+l);};p.prototype._hasFieldDefinition=function(l){if(null===this._layer)return!1;for(var m=0;m<this._layer.fields.length;m++)if(this._layer.fields[m].name.toLowerCase()===l)return!0;return!1};p.prototype.setField=function(l,m){if(this.immutable)throw Error("Feature is Immutable");
if(!1===d.isSimpleType(m))throw Error("Illegal Value Assignment to Feature");var r=l.toLowerCase();if(void 0===this.attributes[l])for(var t in this.attributes)if(t.toLowerCase()===r){this.attributes[t]=m;return}this.attributes[l]=m};p.prototype.hasField=function(l){var m=l.toLowerCase();if(void 0!==this.attributes[l])return!0;for(var r in this.attributes)if(r.toLowerCase()===m)return!0;return this._hasFieldDefinition(m)?!0:!1};p.prototype.keys=function(){var l=[],m={},r;for(r in this.attributes)l.push(r),
m[r.toLowerCase()]=1;if(null!==this._layer)for(r=0;r<this._layer.fields.length;r++){var t=this._layer.fields[r];1!==m[t.name.toLowerCase()]&&l.push(t.name)}return l=l.sort()};p.parseGeometryFromDictionary=function(l){l=p._convertDictionaryToJson(l,!0);void 0!==l.hasm&&(l.hasM=l.hasm,delete l.hasm);void 0!==l.hasz&&(l.hasZ=l.hasz,delete l.hasz);void 0!==l.spatialreference&&(l.spatialReference=l.spatialreference,delete l.spatialreference);void 0!==l.rings&&(l.rings=this._fixPathArrays(l.rings,!0===
l.hasZ,!0===l.hasZ));void 0!==l.paths&&(l.paths=this._fixPathArrays(l.paths,!0===l.hasZ,!0===l.hasM));void 0!==l.points&&(l.points=this._fixPointArrays(l.points,!0===l.hasZ,!0===l.hasM));return n.fromJson(l)};p._fixPathArrays=function(l,m,r){var t=[];if(l instanceof Array)for(var x=0;x<l.length;x++)t.push(this._fixPointArrays(l[x],m,r));else if(l instanceof c)for(x=0;x<l.length();x++)t.push(this._fixPointArrays(l.get(x),m,r));return t};p._fixPointArrays=function(l,m,r){var t=[];if(l instanceof Array)for(var x=
0;x<l.length;x++){var v=l[x];v instanceof h?m&&r?t.push([v.x,v.y,v.z,v.m]):m?t.push([v.x,v.y,v.z]):r?t.push([v.x,v.y,v.m]):t.push([v.x,v.y]):v instanceof c?t.push(v.toArray()):t.push(v)}else if(l instanceof c)for(x=0;x<l.length();x++)v=l.get(x),v instanceof h?m&&r?t.push([v.x,v.y,v.z,v.m]):m?t.push([v.x,v.y,v.z]):r?t.push([v.x,v.y,v.m]):t.push([v.x,v.y]):v instanceof c?t.push(v.toArray()):t.push(v);return t};p._convertDictionaryToJson=function(l,m){void 0===m&&(m=!1);var r={},t;for(t in l.attributes){var x=
l.attributes[t];x instanceof k&&(x=p._convertDictionaryToJson(x));m?r[t.toLowerCase()]=x:r[t]=x}return r};p.parseAttributesFromDictionary=function(l){var m={},r;for(r in l.attributes){var t=l.attributes[r];if(d.isSimpleType(t))m[r]=t;else throw Error("Illegal Argument");}return m};p.fromJson=function(l){var m=null;null!==l.geometry&&void 0!==l.geometry&&(m=n.fromJson(l.geometry));var r={};if(null!==l.attributes&&void 0!==l.attributes)for(var t in l.attributes){var x=l.attributes[t];if(null===x)r[t]=
x;else if(d.isString(x)||d.isNumber(x)||d.isBoolean(x)||d.isDate(x))r[t]=x;else throw Error("Illegal Argument");}return p.createFromGraphicLikeObject(m,r,null)};p.prototype.fullSchema=function(){return this._layer};p.prototype.gdbVersion=function(){if(null===this._layer)return"";var l=this._layer.gdbVersion;return void 0===l?"":""===l&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":l};p.prototype.castAsJson=function(l){var m={attributes:{},geometry:!0===(null===l||void 0===
l?void 0:l.keepGeometryType)?this.geometry():this.geometry().toJson()},r;for(r in this.attributes){var t=this.attributes[r];void 0!==t&&(m.attributes[r]=d.castAsJson(t,l))}return m};p.prototype.castAsJsonAsync=function(l,m){void 0===l&&(l=null);return a(this,void 0,void 0,function(){return b(this,function(r){return[2,this.castAsJson(m)]})})};return p}()})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(F,q,a,b,e,g,k,c,d){function f(l,m,r){var t=l.rings||l.paths,x,v;var z=0;for(x=t.length;z<x;z++){var A=t[z];var B=0;for(v=A.length;B<v;B++){var u=A[B];if(0<B)w+=u[0],D+=u[1];else{var w=u[0];var D=u[1]}u[0]=m(w);u[1]=r(D)}}return l}var h={esriGeometryPoint:function(l,m,r){l.x=m(l.x);l.y=r(l.y);return l},esriGeometryPolyline:f,esriGeometryPolygon:f,esriGeometryEnvelope:function(l,m,r){l.xmin=m(l.xmin);l.ymin=r(l.ymin);l.xmax=m(l.xmax);l.ymax=r(l.ymax);return l},esriGeometryMultipoint:function(l,
m,r){var t=l.points,x;var v=0;for(x=t.length;v<x;v++){var z=t[v];if(0<v)A+=z[0],B+=z[1];else{var A=z[0];var B=z[1]}z[0]=m(A);z[1]=r(B)}return l}},n={esriGeometryPoint:function(l,m,r){l.x=m(l.x);l.y=r(l.y);return l}},p={createInstance:function(l,m){var r=new l;m&&b.mixin(r,m);return r},fromJson:function(l){if(void 0!==l.x&&void 0!==l.y)return new e(l);if(void 0!==l.paths)return new g(l);if(void 0!==l.rings)return new k(l);if(void 0!==l.points)return new c(l);if(void 0!==l.xmin&&void 0!==l.ymin&&void 0!==
l.xmax&&void 0!==l.ymax)return new d(l)},getJsonType:function(l){return l instanceof e?"esriGeometryPoint":l instanceof g?"esriGeometryPolyline":l instanceof k?"esriGeometryPolygon":l instanceof d?"esriGeometryEnvelope":l instanceof c?"esriGeometryMultipoint":null},getGeometryType:function(l){return"esriGeometryPoint"===l?e:"esriGeometryPolyline"===l?g:"esriGeometryPolygon"===l?k:"esriGeometryEnvelope"===l?d:"esriGeometryMultipoint"===l?c:null},supportsLazyUnquantization:function(l){return"esriGeometryPoint"===
l||"esriGeometryPolyline"===l||"esriGeometryPolygon"===l||"esriGeometryMultipoint"===l},unquantizeFunction:function(l,m){if(l&&m){var r=m.translate[0],t=m.translate[1],x=m.scale[0],v=m.scale[1],z=function(u){return u*x+r},A=function(u){return t-u*v},B=h[l];return function(u){return u?B(u,z,A):null}}},unquantize:function(l,m,r){if(m=p.unquantizeFunction(m,r)){var t=l.length;for(r=0;r<t;r++)m(l[r].geometry)}},quantizeFunction:function(l,m){if(l&&"esriGeometryPoint"===l&&m){var r=m.translate[0],t=m.translate[1],
x=m.scale[0],v=m.scale[1],z=function(u){return Math.round((u-r)/x)},A=function(u){return Math.round((t-u)/v)},B=n[l];return function(u){return u?B(u,z,A):null}}},quantize:function(l,m,r){if(m=p.quantizeFunction(m,r)){var t=l.length;for(r=0;r<t;r++)m(l[r].geometry)}}};F.mixin(F.getObject("geometry",!0,a),p);return p})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],function(F,q){function a(e){return e?72*e/q.DPI:0}Object.defineProperty(q,"__esModule",{value:!0});
var b=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;q.DPI=96;q.pt2px=function(e){return e?e/72*q.DPI:0};q.px2pt=a;q.toPt=function(e){if("string"===typeof e){if(b.test(e)){var g=e.match(b),k=Number(g[1]);g=g[3]&&g[3].toLowerCase();e="-"===e.charAt(0);k="px"===g?a(k):k;return e?-k:k}return null}return e}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils","esri/arcade/Dictionary"],function(F,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});
q.createSyntaxTree=function(e){return a.createSyntaxTree(e)};q.createFunction=function(e,g){return a.createFunction(e,g)};q.createExecContext=function(e,g){return a.createExecContext(e,g)};q.executeFunction=function(e,g){return a.executeFunction(e,g)};q.extractFieldNames=function(e){return a.extractFieldNames(e)};q.getViewInfo=function(e){if(e&&e.viewingMode&&null!=e.scale&&e.spatialReference)return{view:new b({viewingMode:e.viewingMode,scale:e.scale}),sr:e.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang",
"dojo/has","../kernel","../support/expressionUtils"],function(F,q,a,b){F.setObject("renderer.arcadeUtils",b,a);return b})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(F,q,a,b,e,g,k){function c(p){var l=new b;p.then(function(m){if(!l.isFulfilled())return l.resolve(m)},function(m){if(!l.isFulfilled())return l.reject(m)});return l.promise}function d(p){return p.replace(/[|\\{}()[\]^$+*?.]/g,
"\\$\x26")}var f={vars:{$feature:"any",$view:"any"}},h=/^\$(feature|aggregatedFeatures)\./i,n={_getSyntaxTree:function(p){return"string"===typeof p?n.createSyntaxTree(p):p},createSyntaxTree:function(p){try{var l=p?g.parseScript(p):null}catch(m){l=null}return l},createFunction:function(p,l){l=l||F.clone(f);var m=n._getSyntaxTree(p);try{var r=m?g.compileScript(m,l):null}catch(t){r=null}return r},createExecContext:function(p,l){return{vars:{$feature:p?k.createFromGraphic(p):new k,$view:l&&l.view},spatialReference:l&&
l.sr}},evalSyntaxTree:function(p,l){try{var m=g.executeScript(p,l)}catch(r){m=null}return m},executeFunction:function(p,l){try{var m=p?p(l):null}catch(r){m=null}return m},executeAsyncFunction:function(p,l){try{var m=p?c(p(l)):(new b).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(r){m=(new b).reject(r)}return m},extractFieldNames:function(p,l){var m=n._getSyntaxTree(p);m=g.extractExpectedFieldLiterals(m);var r=[];q.forEach(m,function(x){h.test(x)&&
(x=x.replace(h,""),r.push(x))});var t=q.filter(r,function(x){return-1!==x.indexOf("*")});r=q.filter(r,function(x){return-1===t.indexOf(x)});l&&q.forEach(t,function(x){var v=new RegExp("^"+x.split(/\*+/).map(d).join(".*")+"$","i");q.forEach(l,function(z){v.test(z)&&r.push(z)})});r.sort();return q.filter(r,function(x,v){return 0===v||r[v-1]!==x})},dependsOnView:function(p){return n.hasVariable(p,"$view")},hasGeometryFunctions:function(p){return(p=n._getSyntaxTree(p))?g.scriptTouchesGeometry(p):!1},
hasGeometryOperations:function(p){return(p=n._getSyntaxTree(p))?g.scriptUsesGeometryEngine(p):!1},enableGeometryOperations:function(){return c(g.enableGeometrySupport())},hasVariable:function(p,l){var m=n._getSyntaxTree(p);return m?g.referencesMember(m,l):!1},hasFunction:function(p,l){var m=n._getSyntaxTree(p);return m?g.referencesFunction(m,l):!1},createFeatureSetFromLayer:function(p,l){l=l||{};var m=g.featureSetUtils();return m?m.constructFeatureSet(p,l.spatialReference,l.outFields,l.returnGeometry,
l.cache):null},createFeatureSetFromLayerUrl:function(p,l){l=l||{};var m=g.featureSetUtils();return m?m.constructFeatureSetFromUrlRaw(p,l.spatialReference,l.outFields,l.returnGeometry,l.cache):null},createFeatureSetCollectionFromMap:function(p,l){var m=g.featureSetUtils();return m?m.createFeatureSetCollectionFromMap(p,p.spatialReference,l&&l.cache):null},createFeatureSetCollectionFromServiceUrl:function(p,l){l=l||{};var m=g.featureSetUtils();return m?m.createFeatureSetCollectionFromService(p,l.spatialReference,
l.cache):null},hasFeatureSetOperations:function(p){return(p=n._getSyntaxTree(p))?g.scriptUsesFeatureSet(p):!1},enableFeatureSetOperations:function(){return c(g.enableFeatureSetSupport().then(function(){var p=g.featureSetUtils();p&&p.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return c(g.enableAsyncSupport())}};F.setObject("support.expressionUtils",n,e);return n})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has".split(" "),
function(F,q,a,b,e,g,k,c,d){function f(W,da){if(null===C)throw Error("Async Arcade must be enabled for this script");return d("esri-csp-restrictions")||!1===w?function(ea){return C.executeScript(W,ea)}:e.compileScript(W,da,!0)}function h(W,da){void 0===da&&(da=[]);return k.parseScript(W,da)}function n(W,da){if(!0===da.useAsync||!0===W.isAsync){if(null===C)throw Error("Async Arcade must be enabled for this script");return C.executeScript(W,da)}return g.executeScript(W,da)}function p(W,da){return g.referencesMember(W,
da)}function l(W,da){void 0===da&&(da=[]);void 0===W.usesGeometry&&c.findScriptDependencies(W,da);return!0===W.usesGeometry}function m(){return I?I:I=r()}function r(){return a(this,void 0,void 0,function(){return b(this,function(W){return[2,new Promise(function(da,ea){F(["../geometry/geometryEngine","./functions/geomsync"],function(Y,ba){y=!0;ba.setGeometryEngine(Y);da(!0)},function(Y){ea(Y)})})]})})}function t(){return null!==O?O:O=x()}function x(){return a(this,void 0,void 0,function(){var W,da,
ea;return b(this,function(Y){switch(Y.label){case 0:return[4,e.enableAsyncSupport()];case 1:return Y.sent(),[4,new Promise(function(ba,Q){F(["./arcadeAsyncRuntime"],function(fa){ba(fa)},Q)})];case 2:C=Y.sent();W=0;for(da=G;W<da.length;W++)ea=da[W],C.extend(ea),e.extend(ea,"async");G=null;return[2,!0]}})})}function v(){return C?!0:!1}function z(){return R?R:R=A()}function A(){return a(this,void 0,void 0,function(){var W;return b(this,function(da){switch(da.label){case 0:return[4,t()];case 1:return da.sent(),
[4,new Promise(function(ea,Y){F(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(ba,Q,fa,S,X){ea({featuresetutils:ba,libraries:[Q,fa,S,X]})},Y)})];case 2:return W=da.sent(),Z=W.featuresetutils,C.extend(W.libraries),e.extend(W.libraries,"async"),D=!0,[2,!0]}})})}function B(W,da){void 0===da&&(da=[]);void 0===W.usesFeatureSet&&c.findScriptDependencies(W,da);return!0===W.usesFeatureSet}Object.defineProperty(q,
"__esModule",{value:!0});q.featureSetUtils=q.scriptTouchesGeometry=q.loadScriptDependencies=q.scriptIsAsync=q.scriptUsesFeatureSet=q.enableFeatureSetSupportImpl=q.enableFeatureSetSupport=q.isGeometryEnabled=q.isAsyncEnabled=q.isFeatureSetSupportEnabled=q.enableAsyncSupportImpl=q.enableAsyncSupport=q.enableGeometrySupportImpl=q.enableGeometrySupport=q.scriptUsesGeometryEngine=q.extractExpectedFieldLiterals=q.extractFieldLiterals=q.referencesFunction=q.referencesMember=q.executeScript=q.parseAndExecuteScript=
q.scriptCheck=q.validateScript=q.parseScript=q.extend=q.compileScript=void 0;var u="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),w=function(){if(d("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(W){return!1}}(),D=!1,y=!1,C=null,G=[];q.compileScript=function(W,da){return!0===da.useAsync||!0===W.isAsync?f(W,da):d("esri-csp-restrictions")?function(ea){return g.executeScript(W,ea)}:e.compileScript(W,
da)};q.extend=function(W){g.extend(W);e.extend(W,"sync");null===C?G.push(W):(e.extend(W,"async"),C.extend(W))};q.parseScript=h;q.validateScript=function(W,da,ea){void 0===ea&&(ea="");return k.validateScript(W,da,ea)};q.scriptCheck=function(W,da,ea,Y){void 0===Y&&(Y="");return k.scriptCheck(W,da,ea,Y)};q.parseAndExecuteScript=function(W,da,ea){void 0===ea&&(ea=[]);W=k.parseScript(W,ea);return n(W,da)};q.executeScript=n;q.referencesMember=p;q.referencesFunction=function(W,da){return g.referencesFunction(W,
da)};q.extractFieldLiterals=function(W,da){void 0===da&&(da=!1);return k.extractFieldLiterals(W,da)};q.extractExpectedFieldLiterals=function(W){return k.extractExpectedFieldLiterals(W)};q.scriptUsesGeometryEngine=l;var I=null;q.enableGeometrySupport=m;q.enableGeometrySupportImpl=r;var O=null;q.enableAsyncSupport=t;q.enableAsyncSupportImpl=x;q.isFeatureSetSupportEnabled=function(){return D};q.isAsyncEnabled=v;q.isGeometryEnabled=function(){return y};var R=null;q.enableFeatureSetSupport=z;q.enableFeatureSetSupportImpl=
A;q.scriptUsesFeatureSet=B;q.scriptIsAsync=function(W,da){void 0===da&&(da=[]);void 0===W.isAsync&&c.findScriptDependencies(W,da);return!0===W.isAsync};q.loadScriptDependencies=function(W,da,ea,Y){void 0===ea&&(ea=[]);void 0===Y&&(Y=!1);return a(this,void 0,void 0,function(){var ba,Q;return b(this,function(fa){switch(fa.label){case 0:ba="string"===typeof W?h(W):W;Q=[];if(ba&&(!1===y&&(l(ba)||Y)&&Q.push(m()),!1===v()&&(!0===ba.isAsync||da)&&Q.push(t()),!1===D)){if(!(fa=B(ba)))a:{fa=ba;if(ea)for(var S=
0,X=ea;S<X.length;S++)if(p(fa,X[S])){fa=!0;break a}fa=!1}fa&&Q.push(z())}return Q.length?[4,Promise.all(Q)]:[3,2];case 1:return fa.sent(),[2,!0];case 2:return[2,!0]}})})};q.scriptTouchesGeometry=function(W){if(l(W))return!0;W=c.findFunctionCalls(W);for(var da=!1,ea=0;ea<W.length;ea++)if(u.includes(W[ea])){da=!0;break}return da};var Z=null;q.featureSetUtils=function(){return Z}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v,z,A,B,u,w,D,y,C,G,I){function O(K,P,ca){try{return ca(K,null,P.arguments)}catch(ia){throw ia;}}function R(K,P){try{switch(P.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return Y(K,P);case "VariableDeclaration":for(var ca=[],ia=0;ia<P.declarations.length;ia++)ca.push(R(K,P.declarations[ia]));return ca.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return ea(K,P);case "FunctionDeclaration":var oa=
P.id.name.toLowerCase(),Aa={isAsync:K.isAsync,spatialReference:K.spatialReference,console:K.console,lrucache:K.lrucache,interceptor:K.interceptor,services:K.services,symbols:K.symbols,mangleMap:K.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:K.depthCounter+1,globalScope:K.globalScope};if(64<Aa.depthCounter)throw Error("Exceeded maximum function depth");ca="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(ia=0;ia<P.params.length;ia++){var Ca=P.params[ia].name.toLowerCase(),Na=ta(K);Aa.localScope._SymbolsMap[Ca]=Na;Aa.mangleMap[Ca]=Na;ca+="lscope['"+Na+"']\x3darguments["+ia.toString()+"];\n"}!0===K.isAsync?(ca=ca+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(ea(Aa,P.body)+"\n return lastStatement; "),ca=ca+"});  }, runtimeCtx),"+(P.params.length+")")):ca+=ea(Aa,P.body)+"\n return lastStatement; }, runtimeCtx),"+P.params.length+")";ca+="\n lastStatement \x3d lc.voidOperation; \n";
if(void 0!==K.globalScope[oa])var Ja="gscope['"+oa+"']\x3d"+ca;else void 0!==K.globalScope._SymbolsMap[oa]?Ja="gscope['"+K.globalScope._SymbolsMap[oa]+"']\x3d"+ca:(Na=ta(K),K.globalScope._SymbolsMap[oa]=Na,K.mangleMap[oa]=Na,Ja="gscope['"+Na+"']\x3d"+ca);return Ja;case "ReturnStatement":var Ia=null===P.argument?"return lc.voidOperation":"return "+R(K,P.argument);return Ia;case "IfStatement":if("AssignmentExpression"===P.test.type||"UpdateExpression"===P.test.type)throw Error(l.nodeErrorMessage(P.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var wa=R(K,P.test),ua=ya(K),Pa="var "+ua+" \x3d "+wa+";\n if ("+ua+" \x3d\x3d\x3d true) {\n"+da(K,P.consequent)+"\n }\n";Pa=null!==P.alternate?Pa+("else if ("+ua+"\x3d\x3d\x3dfalse)   { \n"+da(K,P.alternate)+"}\n"):Pa+("else if ("+ua+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return Pa+="else { lang.error({type: '"+P.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Ma="AssignmentExpression"===
P.expression.type?"lastStatement \x3d lc.voidOperation; "+R(K,P.expression)+"; \n ":"lastStatement \x3d "+R(K,P.expression)+"; ";return Ma;case "AssignmentExpression":return W(K,P);case "UpdateExpression":return Z(K,P);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Ya=[];oa=Ja=0;for(ia=P.quasis;oa<ia.length;oa++){var Ua=ia[oa];Ya.push(Ua.value?JSON.stringify(Ua.value.cooked):JSON.stringify(""));!1===Ua.tail&&(Ya.push(P.expressions[Ja]?
"lang.castString(lang.aCheck("+R(K,P.expressions[Ja])+", 'TemplateLiteral'))":""),Ja++)}ca="(["+Ya.join(",")+"]).join('')"}catch(Sa){throw Sa;}return ca;case "TemplateElement":return JSON.stringify(P.value?P.value.cooked:"");case "ForStatement":ca="lastStatement \x3d lc.voidOperation; \n";null!==P.init&&(ca+=R(K,P.init)+"; ");var Va=ya(K),Wa=ya(K);ca+="var "+Va+" \x3d true; \n do { ";null!==P.update&&(ca+=" if ("+Va+"\x3d\x3d\x3dfalse) {\n "+R(K,P.update)+"  \n}\n "+Va+"\x3dfalse; \n");null!==P.test&&
(ca+="var "+Wa+" \x3d "+R(K,P.test)+"; ",ca+="if ("+Wa+"\x3d\x3d\x3dfalse) { break; } else if ("+Wa+"!\x3d\x3dtrue) { lang.error({type: '"+P.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");ca+=R(K,P.body);null!==P.update&&(ca+="\n "+R(K,P.update));return ca+("\n"+Va+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ba=ya(K),La=ya(K),Ga=ya(K),Ka="var "+Ba+" \x3d "+R(K,P.right)+";\n";"VariableDeclaration"===P.left.type&&(Ka+=R(K,P.left));
var bb="VariableDeclaration"===P.left.type?P.left.declarations[0].id.name:P.left.name;bb=bb.toLowerCase();ca="";null!==K.localScope&&(void 0!==K.localScope[bb]?ca="lscope['"+bb+"']":void 0!==K.localScope._SymbolsMap[bb]&&(ca="lscope['"+K.localScope._SymbolsMap[bb]+"']"));""===ca&&(void 0!==K.globalScope[bb]?ca="gscope['"+bb+"']":void 0!==K.globalScope._SymbolsMap[bb]&&(ca="gscope['"+K.globalScope._SymbolsMap[bb]+"']"));Ka=Ka+("if ("+Ba+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ba+") || lc.isString("+Ba+")) {var ")+(La+"\x3d"+Ba+".length; \nfor(var ")+(Ga+"\x3d0; "+Ga+"\x3c"+La+"; "+Ga+"++) {\n");Ka+=ca+"\x3d"+Ga+";\n";Ka+=R(K,P.body);Ka+="\n}\n";Ka+=" lastStatement \x3d lc.voidOperation; \n";Ka+=" \n}\n";Ka+="else if (lc.isImmutableArray("+Ba+")) {";Ka=Ka+("var "+La+"\x3d"+Ba+".length(); \nfor(var ")+(Ga+"\x3d0; "+Ga+"\x3c"+La+"; "+Ga+"++) {\n");Ka+=ca+"\x3d"+Ga+";\n";Ka+=R(K,P.body);Ka+="\n}\n";Ka+=" lastStatement \x3d lc.voidOperation; \n";Ka+=" \n}\n";Ka+="else if (( "+
Ba+" instanceof lang.Dictionary) || ( "+Ba+" instanceof lang.Feature)) {";Ka=Ka+("var "+La+"\x3d"+Ba+".keys(); \nfor(var ")+(Ga+"\x3d0; "+Ga+"\x3c"+La+".length; "+Ga+"++) {\n");Ka+=ca+"\x3d"+La+"["+Ga+"];\n";Ka+=R(K,P.body);Ka+="\n}\n";Ka+=" lastStatement \x3d lc.voidOperation; \n";Ka+=" \n}\n";K.isAsync&&(Ka+="else if (lc.isFeatureSet("+Ba+")) {",Ka=Ka+("var "+La+"\x3d"+Ba+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Ga+"\x3dlang. graphicToFeature( yield "+La+".next(),"+Ba+"); "+Ga+"!\x3dnull; "+
Ga+"\x3dlang. graphicToFeature( yield "+La+".next(),"+Ba+")) {\n")+(ca+"\x3d"+Ga+";\n"),Ka+=R(K,P.body),Ka+="\n}\n",Ka+=" lastStatement \x3d lc.voidOperation; \n",Ka+=" \n}\n");return Ka+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return Q(K,P);case "MemberExpression":try{ca=void 0;ca=!0===P.computed?R(K,P.property):"'"+P.property.name+"'";var $a="lang.member("+R(K,P.object)+","+ca+")"}catch(Sa){throw Sa;}return $a;case "Literal":return null===P.value||void 0===P.value?"null":
JSON.stringify(P.value);case "ThisExpression":throw Error(l.nodeErrorMessage(P,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==P.callee.type)throw Error(l.nodeErrorMessage(P,"RUNTIME","ONLYNODESSUPPORTED"));var gb=P.callee.name.toLowerCase();ca="";null!==K.localScope&&(void 0!==K.localScope[gb]?ca="lscope['"+gb+"']":void 0!==K.localScope._SymbolsMap[gb]&&(ca="lscope['"+K.localScope._SymbolsMap[gb]+"']"));""===ca&&(void 0!==K.globalScope[gb]?ca="gscope['"+gb+"']":void 0!==K.globalScope._SymbolsMap[gb]&&
(ca="gscope['"+K.globalScope._SymbolsMap[gb]+"']"));if(""!==ca){ia="[";for(Ua=0;Ua<P.arguments.length;Ua++)0<Ua&&(ia+=", "),ia+=R(K,P.arguments[Ua]);ia+="]";Ya=K.isAsync?"(yield lang.callfunc("+ca+","+ia+",runtimeCtx) )":"lang.callfunc("+ca+","+ia+",runtimeCtx)"}else throw Error(l.nodeErrorMessage(P,"RUNTIME","NOTFOUND"));}catch(Sa){throw Sa;}return Ya;case "UnaryExpression":try{var wb="lang.unary("+R(K,P.argument)+",'"+P.operator+"')"}catch(Sa){throw Sa;}return wb;case "BinaryExpression":try{var pb=
"lang.binary("+R(K,P.left)+","+R(K,P.right)+",'"+P.operator+"')"}catch(Sa){throw Sa;}return pb;case "LogicalExpression":try{if("AssignmentExpression"===P.left.type||"UpdateExpression"===P.left.type)throw Error(l.nodeErrorMessage(P.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===P.right.type||"UpdateExpression"===P.right.type)throw Error(l.nodeErrorMessage(P.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===P.operator||"||"===P.operator)var xb=
"(lang.logicalCheck("+R(K,P.left)+") "+P.operator+" lang.logicalCheck("+R(K,P.right)+"))";else throw Error(l.nodeErrorMessage(P,"RUNTIME","ONLYORORAND"));}catch(Sa){throw Sa;}return xb;case "ConditionalExpression":throw Error(l.nodeErrorMessage(P,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{ca=[];for(ia=0;ia<P.elements.length;ia++)"Literal"===P.elements[ia].type?ca.push(R(K,P.elements[ia])):ca.push("lang.aCheck("+R(K,P.elements[ia])+",'ArrayExpression')");var qb="["+ca.join(",")+"]"}catch(Sa){throw Sa;
}return qb;case "ObjectExpression":ca="lang.dictionary([";for(ia=0;ia<P.properties.length;ia++){var kb=P.properties[ia],yb="Identifier"===kb.key.type?"'"+kb.key.name+"'":R(K,kb.key),zb=R(K,kb.value);0<ia&&(ca+=",");ca+="lang.strCheck("+yb+",'ObjectExpression'),lang.aCheck("+zb+", 'ObjectExpression')"}return ca+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(l.nodeErrorMessage(P,"RUNTIME","NOTSUPPORTED"));default:throw Error(l.nodeErrorMessage(P,"RUNTIME","UNREOGNISED"));
}}catch(Sa){throw Sa;}}function Z(K,P){var ca=null,ia="";if("MemberExpression"===P.argument.type)return ca=R(K,P.argument.object),ia=!0===P.argument.computed?R(K,P.argument.property):"'"+P.argument.property.name+"'","lang.memberupdate("+ca+","+ia+",'"+P.operator+"',"+P.prefix+")";ca=P.argument.name.toLowerCase();if(null!==K.localScope){if(void 0!==K.localScope[ca])return"lang.update(lscope, '"+ca+"','"+P.operator+"',"+P.prefix+")";if(void 0!==K.localScope._SymbolsMap[ca])return"lang.update(lscope, '"+
K.localScope._SymbolsMap[ca]+"','"+P.operator+"',"+P.prefix+")"}if(void 0!==K.globalScope[ca])return"lang.update(gscope, '"+ca+"','"+P.operator+"',"+P.prefix+")";if(void 0!==K.globalScope._SymbolsMap[ca])return"lang.update(gscope, '"+K.globalScope._SymbolsMap[ca]+"','"+P.operator+"',"+P.prefix+")";throw Error("Variable not recognised");}function W(K,P){var ca=R(K,P.right),ia=null,oa="";if("MemberExpression"===P.left.type)return ia=R(K,P.left.object),oa=!0===P.left.computed?R(K,P.left.property):"'"+
P.left.property.name+"'","lang.assignmember("+ia+","+oa+",'"+P.operator+"',"+ca+")";ia=P.left.name.toLowerCase();if(null!==K.localScope){if(void 0!==K.localScope[ia])return"lscope['"+ia+"']\x3dlang.assign("+ca+",'"+P.operator+"', lscope['"+ia+"'])";if(void 0!==K.localScope._SymbolsMap[ia])return"lscope['"+K.localScope._SymbolsMap[ia]+"']\x3dlang.assign("+ca+",'"+P.operator+"', lscope['"+K.localScope._SymbolsMap[ia]+"'])"}if(void 0!==K.globalScope[ia])return"gscope['"+ia+"']\x3dlang.assign("+ca+",'"+
P.operator+"', gscope['"+ia+"'])";if(void 0!==K.globalScope._SymbolsMap[ia])return"gscope['"+K.globalScope._SymbolsMap[ia]+"']\x3dlang.assign("+ca+",'"+P.operator+"', gscope['"+K.globalScope._SymbolsMap[ia]+"'])";throw Error("Variable not recognised");}function da(K,P){return"BlockStatement"===P.type?R(K,P):"ReturnStatement"===P.type||"BreakStatement"===P.type||"ContinueStatement"===P.type?R(K,P)+"; ":"UpdateExpression"===P.type?"lastStatement \x3d "+R(K,P)+"; ":"ExpressionStatement"===P.type?R(K,
P):"ObjectExpression"===P.type?"lastStatement \x3d "+R(K,P)+"; ":R(K,P)+"; "}function ea(K,P){for(var ca="",ia=0;ia<P.body.length;ia++)ca="ReturnStatement"===P.body[ia].type?ca+(R(K,P.body[ia])+"; \n"):"BreakStatement"===P.body[ia].type?ca+(R(K,P.body[ia])+"; \n"):"ContinueStatement"===P.body[ia].type?ca+(R(K,P.body[ia])+"; \n"):"UpdateExpression"===P.body[ia].type?ca+("lastStatement \x3d "+R(K,P.body[ia])+"; \n"):"ObjectExpression"===P.body[ia].type?ca+("lastStatement \x3d "+R(K,P.body[ia])+"; \n"):
ca+(R(K,P.body[ia])+" \n");return ca}function Y(K,P){var ca=null===P.init?null:R(K,P.init);ca===p.voidOperation&&(ca=null);var ia=P.id.name.toLowerCase();if(null!==K.localScope){if(void 0!==K.localScope[ia])return"lscope['"+ia+"']\x3d"+ca+"; ";if(void 0!==K.localScope._SymbolsMap[ia])return"lscope['"+K.localScope._SymbolsMap[ia]+"']\x3d"+ca+"; ";var oa=ta(K);K.localScope._SymbolsMap[ia]=oa;K.mangleMap[ia]=oa;return"lscope['"+oa+"']\x3d"+ca+"; "}if(void 0!==K.globalScope[ia])return"gscope['"+ia+"']\x3d"+
ca+"; ";if(void 0!==K.globalScope._SymbolsMap[ia])return"gscope['"+K.globalScope._SymbolsMap[ia]+"']\x3d"+ca+"; ";oa=ta(K);K.globalScope._SymbolsMap[ia]=oa;K.mangleMap[ia]=oa;return"gscope['"+oa+"']\x3d"+ca+"; "}function ba(K,P,ca){P=P.toLowerCase();switch(P){case "hasz":return K=K.hasZ,void 0===K?!1:K;case "hasm":return K=K.hasM,void 0===K?!1:K;case "spatialreference":return P=K.spatialReference._arcadeCacheId,void 0===P&&(ca=!0,Object.freeze&&Object.isFrozen(K.spatialReference)&&(ca=!1),ca&&(ra++,
P=K.spatialReference._arcadeCacheId=ra)),K=new d({wkt:K.spatialReference.wkt,wkid:K.spatialReference.wkid}),void 0!==P&&(K._arcadeCacheId="SPREF"+P.toString()),K}switch(K.type){case "extent":switch(P){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return K=K[P],void 0!==K?K:null;case "type":return"Extent"}break;case "polygon":switch(P){case "rings":return P=K.getCacheValue("_arcadeCacheId"),void 0===P&&(ra++,P=ra,K.setCacheValue("_arcadeCacheId",P)),
K=new h(K.rings,K.spatialReference,!0===K.hasZ,!0===K.hasM,P);case "type":return"Polygon"}break;case "point":switch(P){case "x":case "y":case "z":case "m":return void 0!==K[P]?K[P]:null;case "type":return"Point"}break;case "polyline":switch(P){case "paths":return P=K.getCacheValue("_arcadeCacheId"),void 0===P&&(ra++,P=ra,K.setCacheValue("_arcadeCacheId",P)),K=new h(K.paths,K.spatialReference,!0===K.hasZ,!0===K.hasM,P);case "type":return"Polyline"}break;case "multipoint":switch(P){case "points":return P=
K.getCacheValue("_arcadeCacheId"),void 0===P&&(ra++,P=ra,K.setCacheValue("_arcadeCacheId",P)),K=new n(K.points,K.spatialReference,!0===K.hasZ,!0===K.hasM,P,1);case "type":return"Multipoint"}}throw Error(l.nodeErrorMessage(ca,"RUNTIME","PROPERTYNOTFOUND"));}function Q(K,P){try{var ca=P.name.toLowerCase();if(null!==K.localScope){if(void 0!==K.localScope[ca])return"lscope['"+ca+"']";if(void 0!==K.localScope._SymbolsMap[ca])return"lscope['"+K.localScope._SymbolsMap[ca]+"']"}if(void 0!==K.globalScope[ca])return"gscope['"+
ca+"']";if(void 0!==K.globalScope._SymbolsMap[ca])return"gscope['"+K.globalScope._SymbolsMap[ca]+"']";throw Error(l.nodeErrorMessage(P,"RUNTIME","VARIABLENOTFOUND"));}catch(ia){throw ia;}}function fa(K){return null===K?"":p.isArray(K)||p.isImmutableArray(K)?"Array":p.isDate(K)?"Date":p.isString(K)?"String":p.isBoolean(K)?"Boolean":p.isNumber(K)?"Number":K instanceof c?"Attachment":K instanceof k?"Portal":K instanceof d?"Dictionary":p.isFeature(K)?"Feature":K instanceof y?"Point":K instanceof C?"Polygon":
K instanceof G?"Polyline":K instanceof D?"Multipoint":K instanceof u?"Extent":p.isFunctionParameter(K)?"Function":p.isFeatureSet(K)?"FeatureSet":p.isFeatureSetCollection(K)?"FeatureSetCollection":K===p.voidOperation?"":"number"===typeof K&&isNaN(K)?"Number":"Unrecognised Type"}function S(K,P,ca,ia){try{if(p.equalityTest(P[ca],ia))return P[ca+1];var oa=P.length-ca;return 1===oa?P[ca]:2===oa?null:3===oa?P[ca+2]:S(K,P,ca+2,ia)}catch(Aa){throw Aa;}}function X(K,P,ca,ia){try{if(!0===ia)return P[ca+1];
if(3===P.length-ca)return P[ca+2];var oa=P[ca+2];if(!1===p.isBoolean(oa))throw Error("WHEN needs boolean test conditions");return X(K,P,ca+2,oa)}catch(Aa){throw Aa;}}function la(K,P){var ca=K.length,ia=Math.floor(ca/2);if(0===ca)return[];if(1===ca)return[K[0]];var oa=la(K.slice(0,ia),P);ca=la(K.slice(ia,ca),P);for(ia=[];0<oa.length||0<ca.length;)if(0<oa.length&&0<ca.length){var Aa=P(oa[0],ca[0]);isNaN(Aa)&&(Aa=0);0>=Aa?(ia.push(oa[0]),oa=oa.slice(1)):(ia.push(ca[0]),ca=ca.slice(1))}else 0<oa.length?
(ia.push(oa[0]),oa=oa.slice(1)):0<ca.length&&(ia.push(ca[0]),ca=ca.slice(1));return ia}function na(K,P){return a(this,void 0,void 0,function(){var ca,ia,oa,Aa;return b(this,function(Ca){switch(Ca.label){case 0:ca=K.length;ia=Math.floor(ca/2);if(0===ca)return[2,[]];if(1===ca)return[2,[K[0]]];oa=[na(K.slice(0,ia),P),na(K.slice(ia,ca),P)];return[4,Promise.all(oa)];case 1:return Aa=Ca.sent(),[2,qa(Aa[0],Aa[1],P,[])]}})})}function qa(K,P,ca,ia){return a(this,void 0,void 0,function(){var oa,Aa;return b(this,
function(Ca){switch(Ca.label){case 0:return oa=ia,0<K.length||0<P.length?0<K.length&&0<P.length?[4,ca(K[0],P[0])]:[3,2]:[3,4];case 1:return Aa=Ca.sent(),isNaN(Aa)&&(Aa=1),0>=Aa?(oa.push(K[0]),K=K.slice(1)):(oa.push(P[0]),P=P.slice(1)),[2,qa(K,P,ca,ia)];case 2:if(0<K.length)return oa.push(K[0]),K=K.slice(1),[2,qa(K,P,ca,ia)];if(0<P.length)return oa.push(P[0]),P=P.slice(1),[2,qa(K,P,ca,ia)];Ca.label=3;case 3:return[3,5];case 4:return[2,ia];case 5:return[2]}})})}function ta(K){K.symbols.symbolCounter++;
return"_T"+K.symbols.symbolCounter.toString()}function ya(K){K.symbols.symbolCounter++;return"_Tvar"+K.symbols.symbolCounter.toString()}function za(K,P,ca){var ia={};K||(K={});ca||(ca={});ia._SymbolsMap={};ia.textformatting=1;ia.infinity=1;ia.pi=1;for(var oa in P)ia[oa]=1;for(oa in ca)ia[oa]=1;for(oa in K)ia[oa]=1;return ia}function va(K,P){for(var ca={mode:P,compiled:!0,functions:{},signatures:[],standardFunction:O,standardFunctionAsync:O,evaluateIdentifier:Fa},ia=0;ia<K.length;ia++)K[ia].registerFunctions(ca);
if("sync"===P){for(var oa in ca.functions)M[oa]=new p.NativeFunction(ca.functions[oa]),U.prototype[oa]=M[oa];for(ia=0;ia<ca.signatures.length;ia++)l.addFunctionDeclaration(ca.signatures[ia],"sync")}else{for(oa in ca.functions)aa[oa]=new p.NativeFunction(ca.functions[oa]),T.prototype[oa]=aa[oa];for(ia=0;ia<ca.signatures.length;ia++)l.addFunctionDeclaration(ca.signatures[ia],"async")}}function Fa(K,P){var ca=P.name;if("_SymbolsMap"===ca)throw Error("Illegal");if(0<K.localStack.length){if("_t"!==ca.substr(0,
2).toLowerCase()&&void 0!==K.localStack[K.localStack.length-1][ca])return K.localStack[K.localStack.length-1][ca];var ia=K.mangleMap[ca];if(void 0!==ia&&void 0!==K.localStack[K.localStack.length-1][ia])return K.localStack[K.localStack.length-1][ia]}if("_t"!==ca.substr(0,2).toLowerCase()&&void 0!==K.globalScope[ca]||1===K.globalScope._SymbolsMap[ca])return K.globalScope[ca];ca=K.mangleMap[ca];if(void 0!==ca)return K.globalScope[ca]}function Ea(K){}Object.defineProperty(q,"__esModule",{value:!0});q.enableAsyncSupport=
q.compileScript=q.referencesFunction=q.referencesMember=q.validateScript=q.extractExpectedFieldLiterals=q.extractFieldLiterals=q.executeScript=q.extend=q.functionHelper=void 0;var ra=0,M={};r.registerFunctions(M,O);A.registerFunctions(M,O);v.registerFunctions(M,O);t.registerFunctions(M,O);z.registerFunctions(M,O);M["typeof"]=function(K,P){return O(K,P,function(ca,ia,oa){p.pcCheck(oa,1,1);ca=fa(oa[0]);if("Unrecognised Type"===ca)throw Error("Unrecognised Type");return ca})};M.iif=function(K,P){try{return O(K,
P,function(ca,ia,oa){p.pcCheck(oa,3,3);if(!1===p.isBoolean(oa[0]))throw Error("IF Function must have a boolean test condition");return oa[0]?oa[1]:oa[2]})}catch(ca){throw ca;}};M.decode=function(K,P){try{return O(K,P,function(ca,ia,oa){if(2>oa.length)throw Error("Missing Parameters");if(2===oa.length)return oa[1];if(0===(oa.length-1)%2)throw Error("Must have a default value result.");return S(K,oa,1,oa[0])})}catch(ca){throw ca;}};M.when=function(K,P){try{return O(K,P,function(ca,ia,oa){if(3>oa.length)throw Error("Missing Parameters");
if(0===oa.length%2)throw Error("Must have a default value result.");ca=oa[0];if(!1===p.isBoolean(ca))throw Error("WHEN needs boolean test conditions");return X(K,oa,0,ca)})}catch(ca){throw ca;}};M.top=function(K,P){return O(K,P,function(ca,ia,oa){p.pcCheck(oa,2,2);if(p.isArray(oa[0]))return p.toNumber(oa[1])>=oa[0].length?oa[0].slice(0):oa[0].slice(0,p.toNumber(oa[1]));if(p.isImmutableArray(oa[0]))return p.toNumber(oa[1])>=oa[0].length()?oa[0].slice(0):oa[0].slice(0,p.toNumber(oa[1]));throw Error("Top cannot accept this parameter type");
})};M.first=function(K,P){return O(K,P,function(ca,ia,oa){p.pcCheck(oa,1,1);return p.isArray(oa[0])?0===oa[0].length?null:oa[0][0]:p.isImmutableArray(oa[0])?0===oa[0].length()?null:oa[0].get(0):null})};M.sort=function(K,P){return O(K,P,function(ca,ia,oa){p.pcCheck(oa,1,2);ia=oa[0];p.isImmutableArray(ia)&&(ia=ia.toArray());if(!1===p.isArray(ia))throw Error("Illegal Argument");if(1<oa.length){if(!1===p.isFunctionParameter(oa[1]))throw Error("Illegal Argument");var Aa=function(wa,ua){return ka.callfunc(oa[1],
[wa,ua],ca)};return K.isAsync?na(ia,Aa):ia=la(ia,function(wa,ua){return Aa(wa,ua)})}if(0===ia.length)return[];for(var Ca={},Na=0;Na<ia.length;Na++){var Ja=fa(ia[Na]);""!==Ja&&(Ca[Ja]=!0)}if(!0===Ca.Array||!0===Ca.Dictionary||!0===Ca.Feature||!0===Ca.Point||!0===Ca.Polygon||!0===Ca.Polyline||!0===Ca.Multipoint||!0===Ca.Extent||!0===Ca.Function)return ia.slice(0);Na=0;Ja="";for(var Ia in Ca)Na++,Ja=Ia;return ia=1<Na||"String"===Ja?la(ia,function(wa,ua){if(null===wa||void 0===wa||wa===p.voidOperation)return null===
ua||void 0===ua||ua===p.voidOperation?0:1;if(null===ua||void 0===ua||ua===p.voidOperation)return-1;var Pa=p.toString(wa),Ma=p.toString(ua);return Pa<Ma?-1:Pa===Ma?0:1}):"Number"===Ja?la(ia,function(wa,ua){return wa-ua}):"Boolean"===Ja?la(ia,function(wa,ua){return wa===ua?0:ua?-1:1}):"Date"===Ja?la(ia,function(wa,ua){return ua-wa}):ia.slice(0)})};var aa={},ma;for(ma in M)aa[ma]=new p.NativeFunction(M[ma]);x.registerFunctions(M,O);for(ma in M)M[ma]=new p.NativeFunction(M[ma]);var U=function(){};U.prototype=
M;var T=function(){};T.prototype=aa;q.functionHelper={fixSpatialReference:p.fixSpatialReference,parseArguments:function(K,P){for(var ca=[],ia=0;ia<P.arguments.length;ia++)ca.push(R(K,P.arguments[ia]));return ca},standardFunction:O};q.extend=va;va([m],"sync");va([m],"async");q.executeScript=function(K,P){return K(P)};q.extractFieldLiterals=function(K,P){void 0===P&&(P=!1);return l.findFieldLiterals(K)};q.extractExpectedFieldLiterals=function(K){return l.findExpectedFieldLiterals(K)};q.validateScript=
function(K,P){return l.validateScript(K,P,"sync")};q.referencesMember=function(K,P){return l.referencesMember(K,P)};q.referencesFunction=function(K,P){return l.referencesFunction(K,P)};var ha=0,ka={error:function(K,P,ca){throw Error(l.nodeErrorMessage(K,P,ca));},__awaiter:function(K,P,ca,ia){return new Promise(function(oa,Aa){function Ca(Ia){try{Ja(ia.next(Ia))}catch(wa){Aa(wa)}}function Na(Ia){try{Ja(ia["throw"](Ia))}catch(wa){Aa(wa)}}function Ja(Ia){Ia.done?oa(Ia.value):Ia.value&&Ia.value.then?
Ia.value.then(Ca,Na):(ha++,0===ha%100?setTimeout(function(){ha=0;Ca(Ia.value)},0):Ca(Ia.value))}Ja((ia=ia.apply(K,P||[])).next())})},functionDepthchecker:function(K,P){return function(){P.depthCounter++;P.localStack.push([]);if(64<P.depthCounter)throw Error("Exceeded maximum function depth");var ca=K.apply(this,arguments);if(B.isPromiseLike(ca))return ca.then(function(ia){P.depthCounter--;--P.localStack.length;return ia});P.depthCounter--;--P.localStack.length;return ca}},castString:function(K){return p.toString(K)},
aCheck:function(K,P){if(p.isFunctionParameter(K))throw Error(l.nodeErrorMessage({type:P},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return K===p.voidOperation?null:K},Dictionary:d,Feature:f,dictionary:function(K){for(var P={},ca=0;ca<K.length;ca+=2){if(p.isFunctionParameter(K[ca+1]))throw Error("Illegal Argument");if(!1===p.isString(K[ca]))throw Error("Illegal Argument");P[K[ca].toString()]=K[ca+1]===p.voidOperation?null:K[ca+1]}K=new d(P);K.immutable=!1;return K},strCheck:function(K){if(!1===p.isString(K))throw Error("Illegal Argument");
return K},unary:function(K,P){if(p.isBoolean(K)){if("!"===P)return!K;if("-"===P)return-1*p.toNumber(K);if("+"===P)return 1*p.toNumber(K);if("~"===P)return~p.toNumber(K);throw Error(l.nodeErrorMessage({type:"UnaryExpression",operator:P,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===P)return-1*p.toNumber(K);if("+"===P)return 1*p.toNumber(K);if("~"===P)return~p.toNumber(K);throw Error(l.nodeErrorMessage({type:"UnaryExpression",operator:P,prefix:null,argument:null},"RUNTIME",
"NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(K){if(!1===p.isBoolean(K))throw Error(l.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return K},logical:function(K,P,ca){if(p.isBoolean(K)&&p.isBoolean(P))switch(ca){case "||":return K||P;case "\x26\x26":return K&&P}throw Error(l.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(K,P,ca){switch(ca){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return p.binaryOperator(p.toNumber(K),
p.toNumber(P),ca);case "\x3d\x3d":return p.equalityTest(K,P);case "\x3d":return p.equalityTest(K,P);case "!\x3d":return!p.equalityTest(K,P);case "\x3c":return p.greaterThanLessThan(K,P,ca);case "\x3e":return p.greaterThanLessThan(K,P,ca);case "\x3c\x3d":return p.greaterThanLessThan(K,P,ca);case "\x3e\x3d":return p.greaterThanLessThan(K,P,ca);case "+":return p.isString(K)||p.isString(P)?p.toString(K)+p.toString(P):p.toNumber(K)+p.toNumber(P);case "-":return p.toNumber(K)-p.toNumber(P);case "*":return p.toNumber(K)*
p.toNumber(P);case "/":return p.toNumber(K)/p.toNumber(P);case "%":return p.toNumber(K)%p.toNumber(P);default:throw Error(l.nodeErrorMessage({type:"BinaryExpression",operator:ca,left:K,right:P},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(K,P,ca){switch(P){case "\x3d":return K===p.voidOperation?null:K;case "/\x3d":return p.toNumber(ca)/p.toNumber(K);case "*\x3d":return p.toNumber(ca)*p.toNumber(K);case "-\x3d":return p.toNumber(ca)-p.toNumber(K);case "+\x3d":return p.isString(ca)||p.isString(K)?
p.toString(ca)+p.toString(K):p.toNumber(ca)+p.toNumber(K);case "%\x3d":return p.toNumber(ca)%p.toNumber(K);default:throw Error(l.nodeErrorMessage({type:"AssignmentExpression",operator:P,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(K,P,ca,ia){var oa=p.toNumber(K[P]);K[P]="++"===ca?oa+1:oa-1;return!1===ia?oa:"++"===ca?oa+1:oa-1},graphicToFeature:function(K,P){return null===K?null:f.createFromGraphicLikeObject(K.geometry,K.attributes,P)},memberupdate:function(K,P,ca,ia){if(p.isArray(K))if(p.isNumber(P)){0>
P&&(P=K.length+P);if(0>P||P>=K.length)throw Error("Assignment outside of array bounds");var oa=p.toNumber(K[P]);K[P]="++"===ca?oa+1:oa-1}else throw Error("Invalid Parameter");else if(K instanceof d){if(!1===p.isString(P))throw Error("Dictionary accessor must be a string");if(!0===K.hasField(P))oa=p.toNumber(K.field(P)),K.setField(P,"++"===ca?oa+1:oa-1);else throw Error("Invalid Parameter");}else if(p.isFeature(K)){if(!1===p.isString(P))throw Error("Feature accessor must be a string");if(!0===K.hasField(P))oa=
p.toNumber(K.field(P)),K.setField(P,"++"===ca?oa+1:oa-1);else throw Error("Invalid Parameter");}else{if(p.isImmutableArray(K))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===ia?oa:"++"===ca?oa+1:oa-1},assignmember:function(K,P,ca,ia){if(p.isArray(K))if(p.isNumber(P)){0>P&&(P=K.length+P);if(0>P||P>K.length)throw Error("Assignment outside of array bounds");if(P===K.length&&"\x3d"!==ca)throw Error("Invalid Parameter");K[P]=this.assign(ia,ca,K[P])}else throw Error("Invalid Parameter");
else if(K instanceof d){if(!1===p.isString(P))throw Error("Dictionary accessor must be a string");if(!0===K.hasField(P))K.setField(P,this.assign(ia,ca,K.field(P)));else{if("\x3d"!==ca)throw Error("Invalid Parameter");K.setField(P,this.assign(ia,ca,null))}}else if(p.isFeature(K)){if(!1===p.isString(P))throw Error("Feature accessor must be a string");if(!0===K.hasField(P))K.setField(P,this.assign(ia,ca,K.field(P)));else{if("\x3d"!==ca)throw Error("Invalid Parameter");K.setField(P,this.assign(ia,ca,
null))}}else{if(p.isImmutableArray(K))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(K,P){if(null===K)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(K instanceof d||p.isFeature(K)){if(p.isString(P))return K.field(P);throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(K instanceof w){if(p.isString(P))return ba(K,
P,"MemberExpression");throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(p.isArray(K)){if(p.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=K.length+P);if(P>=K.length||0>P)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return K[P]}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));
}if(p.isString(K)){if(p.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=K.length+P);if(P>=K.length||0>P)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return K[P]}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(p.isImmutableArray(K)&&p.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=K.length()+P);if(P>=K.length()||0>P)throw Error(l.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return K.get(P)}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(K,P,ca){return K instanceof p.NativeFunction?K.fn(ca,{arguments:P,preparsed:!0}):K instanceof p.SizzleFunction?K.fn.apply(this,P):K.apply(this,P)}};q.compileScript=function(K,P,ca){void 0===P&&(P=null);void 0===ca&&(ca=!1);null===P&&(P={vars:{},customfunctions:{}});P={isAsync:ca,
globalScope:za(P.vars,ca?aa:M,P.customfunctions),localScope:null,mangleMap:{},console:Ea,lrucache:P.lrucache,interceptor:P.interceptor,services:P.services,symbols:{symbolCounter:0}};K=R(P,K.body[0].body);""===K&&(K="lc.voidOperation; ");P={lc:p,lang:ka,mangles:P.mangleMap,postProcess:function(ia){ia instanceof p.ReturnResult&&(ia=ia.value);ia instanceof p.ImplicitResult&&(ia=ia.value);ia===p.voidOperation&&(ia=null);if(ia===p.breakResult)throw Error("Cannot return BREAK");if(ia===p.continueResult)throw Error("Cannot return CONTINUE");
if(p.isFunctionParameter(ia))throw Error("Cannot return FUNCTION");return ia},prepare:function(ia,oa){var Aa=ia.spatialReference;if(null===Aa||void 0===Aa)Aa=new I({wkid:102100});var Ca=ia.vars,Na=ia.customfunctions,Ja=oa?new T:new U;Ca||(Ca={});Na||(Na={});var Ia=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Ia.immutable=!1;Ja._SymbolsMap={textformatting:1,infinity:1,pi:1};Ja.textformatting=Ia;Ja.infinity=Number.POSITIVE_INFINITY;Ja.pi=Math.PI;
for(var wa in Na)Ja[wa]=Na[wa],Ja._SymbolsMap[wa]=1;for(wa in Ca)Ja._SymbolsMap[wa]=1,Ja[wa]=Ca[wa]&&"esri.Graphic"===Ca[wa].declaredClass?f.createFromGraphic(Ca[wa]):Ca[wa];return{localStack:[],isAsync:oa,mangleMap:this.mangles,spatialReference:Aa,globalScope:Ja,abortSignal:void 0===ia.abortSignal||null===ia.abortSignal?{aborted:!1}:ia.abortSignal,localScope:null,services:ia.services,console:ia.console?ia.console:Ea,lrucache:ia.lrucache,interceptor:ia.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};
return(new Function("context","spatialReference",ca?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+K+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
K+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(P)};q.enableAsyncSupport=function(){return new Promise(function(K,P){F(["./functions/geomasync"],function(ca){va([ca],"async");K(!0)},function(ca){P(ca)})})}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(F,q,a,b){return function(e){function g(k){var c=e.call(this)||this;c.immutable=!1;c.setField("url",k);c.immutable=!0;return c}a(g,e);return g}(b)})},
"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(F,q,a,b){return function(e){function g(k,c,d,f,h,n){var p=e.call(this)||this;p.attachmentUrl=h;p.immutable=!1;p.setField("id",k);p.setField("name",c);p.setField("contenttype",d);p.setField("size",f);p.setField("exifinfo",n);p.immutable=!0;return p}a(g,e);return g}(b)})},"esri/arcade/treeAnalysis":function(){define(["require","exports","./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],
function(F,q,a,b){function e(w){return"string"===typeof w||w instanceof String}function g(w,D){return"0"!==w.min&&D.length<Number(w.min)||"*"!==w.max&&D.length>Number(w.max)?-2:1}function k(w,D,y){if(null!==y.localScope&&void 0!==y.localScope[w.toLowerCase()]){var C=y.localScope[w.toLowerCase()];if("FormulaFunction"===C.type||"any"===C.type)return void 0===C.signature&&(C.signature={min:"0",max:"*"}),g(C.signature,D)}return void 0!==y.globalScope[w.toLowerCase()]&&(C=y.globalScope[w.toLowerCase()],
"FormulaFunction"===C.type||"any"===C.type)?(void 0===C.signature&&(C.signature={min:"0",max:"*"}),g(C.signature,D)):-1}function c(w,D){if(w)for(var y=0;y<w.length;y++)d(w[y],D)}function d(w,D){if(w&&!1!==D(w))switch(w.type){case "ArrayExpression":c(w.elements,D);break;case "AssignmentExpression":case "BinaryExpression":d(w.left,D);d(w.right,D);break;case "BlockStatement":c(w.body,D);break;case "CallExpression":d(w.callee,D);c(w.arguments,D);break;case "ExpressionStatement":d(w.expression,D);break;
case "ForInStatement":d(w.left,D);d(w.right,D);d(w.body,D);break;case "ForStatement":d(w.init,D);d(w.test,D);d(w.update,D);d(w.body,D);break;case "FunctionDeclaration":d(w.id,D);c(w.params,D);d(w.body,D);break;case "IfStatement":d(w.test,D);d(w.consequent,D);d(w.alternate,D);break;case "LogicalExpression":d(w.left,D);d(w.right,D);break;case "MemberExpression":d(w.object,D);d(w.property,D);break;case "ObjectExpression":c(w.properties,D);break;case "Program":c(w.body,D);break;case "Property":d(w.key,
D);d(w.value,D);break;case "ReturnStatement":d(w.argument,D);break;case "UnaryExpression":d(w.argument,D);break;case "UpdateExpression":d(w.argument,D);break;case "VariableDeclaration":c(w.declarations,D);break;case "VariableDeclarator":d(w.id,D);d(w.init,D);break;case "TemplateLiteral":c(w.expressions,D),c(w.quasis,D)}}function f(w,D){void 0===D&&(D=!0);var y=r(w,"SYNTAX","UNREOGNISED");try{switch(w.type){case "VariableDeclarator":return"Identifier"!==w.id.type?r(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):
null!==w.init?f(w.init,!1):"";case "VariableDeclaration":for(var C=0;C<w.declarations.length;C++)if(y=f(w.declarations[C],D),""!==y)return y;return"";case "ForInStatement":y=f(w.left,D);if(""!==y)break;if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return r(w,"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return r(w,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return r(w,"SYNTAX","LEFTNOTVAR");y=f(w.right,D);if(""!==y)break;y=f(w.body,D);if(""!==
y)break;return"";case "ForStatement":if(null!==w.test&&(y=f(w.test,D),""!==y))break;if(null!==w.init&&(y=f(w.init,D),""!==y))break;if(null!==w.update&&(y=f(w.update,D),""!==y))break;if(null!==w.body&&(y=f(w.body,D),""!==y))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":y=f(w.test,D);if(""!==y)break;if(null!==w.consequent&&(y=f(w.consequent,!1),""!==y))break;if(null!==w.alternate&&(y=f(w.alternate,!1),""!==y))break;
return"";case "BlockStatement":var G=[];for(C=0;C<w.body.length;C++)"EmptyStatement"!==w.body[C].type&&G.push(w.body[C]);w.body=G;for(C=0;C<w.body.length;C++)if(y=f(w.body[C],D),""!==y)return y;return"";case "FunctionDeclaration":return!1===D?r(w,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==w.id.type?r(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):f(w.body,!1);case "ReturnStatement":return null!==w.argument?f(w.argument,D):"";case "UpdateExpression":return"Identifier"!==w.argument.type&&"MemberExpression"!==
w.argument.type?r(w,"SYNTAX","ASSIGNMENTTOVARSONLY"):f(w.argument,D);case "AssignmentExpression":if("Identifier"!==w.left.type&&"MemberExpression"!==w.left.type)return r(w,"SYNTAX","ASSIGNMENTTOVARSONLY");y=f(w.left,D);if(""!==y)break;switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return r(w,"SYNTAX","OPERATORNOTRECOGNISED")}return f(w.right,!1);case "ExpressionStatement":return f(w.expression,!1);case "Identifier":y="";break;case "MemberExpression":y=
f(w.object,D);if(""!==y)break;return!0===w.computed?f(w.property,D):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==w.callee.type)return r(w,"SYNTAX","ONLYNODESSUPPORTED");y="";for(C=0;C<w.arguments.length;C++)if(y=f(w.arguments[C],D),""!==y)return y;return"";case "UnaryExpression":y=f(w.argument,D);break;case "BinaryExpression":y=f(w.left,D);if(""!==y)break;y=f(w.right,D);if(""!==y)break;switch(w.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return r(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":y=f(w.left,D);if(""!==y)break;y=f(w.right);if(""!==y)break;switch(w.operator){case "\x26\x26":case "||":break;default:return r(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":y="";for(C=0;C<w.elements.length&&(y=f(w.elements[C],D),""===y);C++);break;case "TemplateLiteral":y="";for(C=0;C<w.quasis.length;C++)if(y=f(w.quasis[C],D),""!==y)return y;for(C=0;C<w.expressions.length&&(y=f(w.expressions[C],
D),""===y);C++);break;case "ObjectExpression":y="";for(C=0;C<w.properties.length;C++){y="";if(null!==w.properties[C].key&&("Literal"!==w.properties[C].key.type&&"Identifier"!==w.properties[C].key.type&&(y=r(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[C].key.type)){G=w.properties[C].key;var I="value"in G?G.value:null;"string"===typeof I||I instanceof String||(y=r(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===y&&(y=f(w.properties[C],D));if(""!==y)break}break;case "Property":if("Literal"!==
w.key.type&&"Identifier"!==w.key.type)return r(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&(y=f(w.key,D),""!==y))break;y=f(w.value,D)}return y}catch(O){throw O;}}function h(w,D){var y=r(w,"SYNTAX","UNREOGNISED"),C=null,G="";try{switch(w.type){case "VariableDeclarator":var I=null===w.init?"":h(w.init,D);if(""!==I)return I;"Identifier"===w.id.type&&(null===D.localScope?D.globalScope[w.id.name.toLowerCase()]={type:"any"}:D.localScope[w.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":C=
p(w.id.name.toLowerCase(),w);G=l(w,D);if(""!==G)return G;if(null!==D.localScope)return r(w,"SYNTAX","GLOBALFUNCTIONSONLY");C.isnative=!1;D.globalScope[w.id.name.toLowerCase()]={type:"FormulaFunction",signature:[C]};return"";case "VariableDeclaration":y="";for(var O=0;O<w.declarations.length&&(y=h(w.declarations[O],D),""===y);O++);break;case "IfStatement":y=h(w.test,D);if(""!==y)break;if("AssignmentExpression"===w.test.type||"UpdateExpression"===w.test.type)return r(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
if(null!==w.consequent&&(y=h(w.consequent,D),""!==y))break;if(null!==w.alternate&&(y=h(w.alternate,D),""!==y))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(O=0;O<w.body.length;O++)if(y=h(w.body[O],D),""!==y)return y;return"";case "ReturnStatement":return null!==w.argument?h(w.argument,D):"";case "ForInStatement":if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return r(w,"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return r(w,"SYNTAX",
"CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return r(w,"SYNTAX","LEFTNOTVAR");y=h(w.left,D);if(""!==y)break;y=h(w.right,D);if(""!==y)break;y=h(w.body,D);if(""!==y)break;return"";case "ForStatement":if(null!==w.init&&(y=h(w.init,D),""!==y))break;if(null!==w.test&&(y=h(w.test,D),""!==y))break;if(null!==w.body&&(y=h(w.body,D),""!==y))break;if(null!==w.update&&(y=h(w.update,D),""!==y))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==
w.argument.type&&"MemberExpression"!==w.argument.type)return r(w,"SYNTAX","ASSIGNMENTTOVARSONLY");var R=!1;if("MemberExpression"===w.argument.type)return h(w.argument,D);null!==D.localScope&&void 0!==D.localScope[w.argument.name.toLowerCase()]&&(R=!0);void 0!==D.globalScope[w.argument.name.toLowerCase()]&&(R=!0);return!1===R?"Identifier "+w.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==w.left.type&&"MemberExpression"!==w.left.type)return r(w,"SYNTAX","ASSIGNMENTTOVARSONLY");
var Z=h(w.right,D);if(""!==Z)return Z;R=!1;if("MemberExpression"===w.left.type)return Z=h(w.left,D),""!==Z?Z:"";null!==D.localScope&&void 0!==D.localScope[w.left.name.toLowerCase()]&&(R=!0);void 0!==D.globalScope[w.left.name.toLowerCase()]&&(R=!0);return!1===R?"Identifier "+w.left.name+" has not been declared.":"";case "ExpressionStatement":return h(w.expression,D);case "Identifier":var W=w.name.toLowerCase();if(null!==D.localScope&&void 0!==D.localScope[W])return"";y=void 0!==D.globalScope[W]?"":
r(w,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":y=h(w.object,D);if(""!==y)break;return!0===w.computed?h(w.property,D):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==w.callee.type)return r(w,"SYNTAX","ONLYNODESSUPPORTED");y="";for(O=0;O<w.arguments.length;O++)if(y=h(w.arguments[O],D),""!==y)return y;var da=k(w.callee.name,w.arguments,D);-1===da&&(y=r(w,"SYNTAX","NOTFOUND"));-2===da&&(y=r(w,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":y=
h(w.argument,D);break;case "BinaryExpression":y=h(w.left,D);if(""!==y)break;y=h(w.right,D);if(""!==y)break;return"";case "LogicalExpression":y=h(w.left,D);if(""!==y)break;if("AssignmentExpression"===w.left.type||"UpdateExpression"===w.left.type)return r(w.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");y=h(w.right,D);if(""!==y)break;return"AssignmentExpression"===w.right.type||"UpdateExpression"===w.right.type?r(w.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":y=
"";for(O=0;O<w.elements.length&&(y=h(w.elements[O],D),""===y);O++);break;case "TemplateLiteral":y="";for(O=0;O<w.quasis.length;O++)if(y=h(w.quasis[O],D),""!==y)return y;for(O=0;O<w.expressions.length&&(y=h(w.expressions[O],D),""===y);O++);break;case "ObjectExpression":y="";for(O=0;O<w.properties.length;O++){y="";if(null!==w.properties[O].key&&("Literal"!==w.properties[O].key.type&&"Identifier"!==w.properties[O].key.type&&(y=r(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[O].key.type)){var ea=
w.properties[O].key,Y="value"in ea?ea.value:null;"string"===typeof Y||Y instanceof String||(y=r(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===y&&(y=h(w.properties[O],D));if(""!==y)break}break;case "Property":if("Literal"!==w.key.type&&"Identifier"!==w.key.type)return r(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&(y=h(w.key,D),""!==y))break;y=h(w.value,D)}return y}catch(ba){throw ba;}}function n(w,D){var y=!1,C=D.toLowerCase();d(w,function(G){if(y)return!1;"Identifier"===G.type&&G.name&&
G.name.toLowerCase()===C&&(y=!0);return!0});return y}function p(w,D){var y=[];if(void 0!==D.params&&null!==D.params)for(var C=0;C<D.params.length;C++)y.push("any");return{name:w,"return":"any",params:y}}function l(w,D){for(var y={globalScope:D.globalScope,localScope:{}},C=0;C<w.params.length;C++)y.localScope[w.params[C].name.toLowerCase()]={type:"any"};return h(w.body,y)}function m(w,D,y,C){var G={};if(void 0===w||null===w)w={};if(void 0===y||null===y)y={};G.infinity={type:"any"};G.textformatting=
{type:"any"};G.pi={type:"any"};for(var I in D)"sync"===C&&void 0!==D[I].min?G[I]={type:"FormulaFunction",signature:{min:D[I].min,max:D[I].max}}:"sync"!==C&&void 0!==D[I].fmin&&(G[I]={type:"FormulaFunction",signature:{min:D[I].fmin,max:D[I].fmax}});for(D=0;D<y.length;D++)I=y[D],G[I.name]={type:"FormulaFunction",signature:I};for(I in w)G[I]=w[I],G[I].type="any";return G}function r(w,D,y){var C="";switch(D){case "SYNTAX":C="Syntax Error: ";break;case "RUNTIME":C="Runtime Error: ";break;default:C="Syntax Error: "}try{switch(w.type){case "IfStatement":switch(y){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":C+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":C+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(y){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":C+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":C+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":C+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(y){case "GLOBALFUNCTIONSONLY":C+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":C+=" Function Definition must have an identifier"}break;case "VariableDeclaration":C+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(y){case "FUNCTIONVARIABLEDECLARATOR":C+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":C+=" Variable Definition must have an identifier"}break;case "Identifier":C+=" Identifier Not Found. ";C+=w.name;break;case "ObjectExpression":switch(y){case "OBJECTPROPERTYMUSTBESTRING":C+=
" Property name must be a string"}break;case "ForStatement":switch(y){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":C+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(y){case "ONLY1VAR":C+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":C+=" Can only declare value for use with IN";break;case "LEFTNOVAR":C+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":C+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":C+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(y){case "PROPERTYNOTFOUND":C+="Cannot find member property. ";C+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "OUTOFBOUNDS":C+="Out of Bounds. ";C+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "NOTFOUND":C+="Cannot call member method on null. ";C+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "INVALIDTYPE":C+="Cannot call member property on object of this type. ",
C+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":""}break;case "Property":switch(y){case "ONLYLITERAL":C+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(y){case "WRONGSIGNATURE":C+="Function signature does not match: ";C+="Identifier"===w.callee.type?w.callee.name:"";break;case "ONLYNODESUPPORTED":C+="Functions must be declared.";C+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTAFUNCTION":C+="Not a Function: ";
C+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTFOUND":C+="Function Not Found: "+("Identifier"===w.callee.type?w.callee.name:"")}break;case "UnaryExpression":switch(y){case "NOTSUPPORTEDUNARYOPERATOR":C+="Operator "+w.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":C+="Unary operator "+w.operator+" cannot be used with this argument."}case "BinaryExpression":switch(y){case "OPERATORNOTRECOGNISED":C+="Binary Operator not recognised "+
w.operator}break;case "LogicalExpression":switch(y){case "ONLYBOOLEAN":C+="Operator "+w.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":C+="Logical Expression "+w.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(y){case "FUNCTIONCONTEXTILLEGAL":C+=" Cannot Put Function inside Array."}break;default:C+="Expression contains unrecognised code structures."}}catch(G){throw G;}return C}function t(w,D,y){return{line:w.loc.start.line,
character:w.loc.start.column,reason:r(w,D,y)}}function x(w,D,y,C){D={globalScope:D.globalScope,localScope:{}};for(var G=0;G<w.params.length;G++)D.localScope[w.params[G].name.toLowerCase()]={type:"any"};v(w.body,D,y,C,!1)}function v(w,D,y,C,G){void 0===G&&(G=!0);if(null===w)throw Error("Unnexpexted Expression Syntax");var I=null;try{switch(w.type){case "VariableDeclarator":"Identifier"!==w.id.type?C.push(t(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(w.id.name.toLowerCase(),null===D.localScope?D.globalScope[w.id.name.toLowerCase()]=
{type:"any"}:D.localScope[w.id.name.toLowerCase()]={type:"any"});null!==w.init&&v(w.init,D,y,C,G);break;case "FunctionDeclaration":!1===G&&C.push(t(w,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==w.id.type&&C.push(t(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));I=p("",w);x(w,D,y,C);null!==D.localScope&&C.push(t(w,"SYNTAX","GLOBALFUNCTIONSONLY"));I.isnative=!1;"Identifier"===w.id.type&&(D.globalScope[w.id.name.toLowerCase()]={type:"FormulaFunction",signature:[I]});break;case "VariableDeclaration":for(var O=
0;O<w.declarations.length;O++)v(w.declarations[O],D,y,C,G);break;case "IfStatement":null!==w.test&&(v(w.test,D,y,C,G),"AssignmentExpression"!==w.test.type&&"UpdateExpression"!==w.test.type||C.push(t(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==w.consequent&&v(w.consequent,D,y,C,G);null!==w.alternate&&v(w.alternate,D,y,C,G);break;case "EmptyStatement":break;case "BlockStatement":if(null!==w.body)for(O=0;O<w.body.length;O++)v(w.body[O],D,y,C,G);break;case "ReturnStatement":null!==
w.argument&&v(w.argument,D,y,C,G);break;case "ForInStatement":"VariableDeclaration"===w.left.type?(1<w.left.declarations.length&&C.push(t(w,"SYNTAX","ONLY1VAR")),null!==w.left.declarations[0].init&&C.push(t(w,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==w.left.type&&C.push(t(w,"SYNTAX","LEFTNOTVAR"));v(w.left,D,y,C,G);v(w.right,D,y,C,G);v(w.body,D,y,C,G);break;case "ForStatement":null!==w.init&&v(w.init,D,y,C,G);null!==w.test&&v(w.test,D,y,C,G);null!==w.body&&v(w.body,D,y,C,G);null!==w.update&&v(w.update,
D,y,C,G);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type)C.push(t(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===w.argument.type){var R=!1;!1===y&&(null!==D.localScope&&void 0!==D.localScope[w.argument.name.toLowerCase()]&&(R=!0),void 0!==D.globalScope[w.argument.name.toLowerCase()]&&(R=!0),!1===R&&C.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,
reason:"Identifier "+w.argument.name+" has not been declared."}))}"MemberExpression"===w.argument.type&&v(w.argument,D,y,C,G)}break;case "AssignmentExpression":"Identifier"!==w.left.type&&"MemberExpression"!==w.left.type&&C.push(t(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:C.push(t(w,"SYNTAX","OPERATORNOTRECOGNISED"))}v(w.right,D,y,C,G);R=!1;"Identifier"===w.left.type&&(null!==D.localScope&&void 0!==
D.localScope[w.left.name.toLowerCase()]&&(R=!0),void 0!==D.globalScope[w.left.name.toLowerCase()]&&(R=!0),!1===y&&!1===R&&C.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Identifier "+w.left.name+" has not been declared."}));"MemberExpression"===w.left.type&&v(w.left,D,y,C,G);break;case "ExpressionStatement":v(w.expression,D,y,C,G);break;case "Identifier":var Z=w.name.toLowerCase();if(null!==D.localScope&&void 0!==D.localScope[Z]||void 0!==D.globalScope[Z])break;
!1===y&&C.push(t(w,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":v(w.object,D,y,C,G);!0===w.computed&&v(w.property,D,y,C,G);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==w.callee.type&&C.push(t(w,"SYNTAX","ONLYNODESSUPPORTED"));for(O=0;O<w.arguments.length;O++)v(w.arguments[O],D,y,C,G);if("Identifier"===w.callee.type){var W=k(w.callee.name,w.arguments,D);!1===y&&-1===W&&C.push(t(w,"SYNTAX","NOTFOUND"));-2===W&&C.push(t(w,"SYNTAX","WRONGSIGNATURE"))}break;
case "UnaryExpression":v(w.argument,D,y,C,G);break;case "BinaryExpression":v(w.left,D,y,C,G);v(w.right,D,y,C,G);switch(w.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:C.push(t(w,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(w.operator){case "\x26\x26":case "||":break;default:C.push(t(w,
"SYNTAX","OPERATORNOTRECOGNISED"))}v(w.left,D,y,C,G);"AssignmentExpression"!==w.left.type&&"UpdateExpression"!==w.left.type||C.push(t(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));v(w.right,D,y,C,G);"AssignmentExpression"!==w.right.type&&"UpdateExpression"!==w.right.type||C.push(t(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(O=0;O<w.elements.length;O++)v(w.elements[O],D,y,C,G);break;case "TemplateLiteral":for(O=0;O<w.quasis.length;O++)v(w.quasis[O],D,y,C,
G);for(O=0;O<w.expressions.length;O++)v(w.expressions[O],D,y,C,G);break;case "ObjectExpression":for(O=0;O<w.properties.length;O++)v(w.properties[O],D,y,C,G);break;case "Property":"Literal"!==w.key.type&&"Identifier"!==w.key.type&&C.push(t(w,"SYNTAX","ONLYLITERAL"));"Literal"===w.key.type&&v(w.key,D,y,C,G);v(w.value,D,y,C,G);break;default:C.push(t(w,"SYNTAX","UNRECOGNISED"))}}catch(da){C.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Unnexpected Syntax"})}}function z(w){var D=
[];d(w,function(y){"CallExpression"===y.type&&"Identifier"===y.callee.type&&D.push(y.callee.name.toLowerCase());return!0});return D}Object.defineProperty(q,"__esModule",{value:!0});q.scriptUsesFeatureSet=q.findScriptDependencies=q.findFunctionCalls=q.checkScript=q.extractAllIssues=q.extractAllIssuesInFunction=q.makeError=q.nodeErrorMessage=q.validateLanguage=q.validateScript=q.constructGlobalScope=q.validateFunction=q.extractFunctionDeclaration=q.findExpectedFieldLiterals=q.findFieldLiterals=q.referencesFunction=
q.referencesMember=q.testValidityOfExpression=q.validateLanguageNode=q.walk=q.findFunction=q.checkFunctionSignature=q.addFunctionDeclaration=q.functionDecls=void 0;q.functionDecls={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",
max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},
split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",
max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},
multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",
max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},
haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},
length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},
portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var A in q.functionDecls)q.functionDecls[A].fmin=q.functionDecls[A].min,q.functionDecls[A].fmax=q.functionDecls[A].max;var B="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),
u="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");q.addFunctionDeclaration=function(w,D){var y=q.functionDecls[w.name.toLowerCase()];void 0===y?"sync"===D?q.functionDecls[w.name.toLowerCase()]={min:w.min,max:w.max}:q.functionDecls[w.name.toLowerCase()]=
{fmin:w.min,fmax:w.max}:"sync"===D?(y.min=w.min,y.max=w.max):(y.fmin=w.min,y.fmax=w.max)};q.checkFunctionSignature=g;q.findFunction=k;q.walk=d;q.validateLanguageNode=f;q.testValidityOfExpression=h;q.referencesMember=n;q.referencesFunction=function(w,D){var y=!1,C=D.toLowerCase();d(w,function(G){return y?!1:"CallExpression"===G.type&&"Identifier"===G.callee.type&&G.callee.name&&G.callee.name.toLowerCase()===C?(y=!0,!1):!0});return y};q.findFieldLiterals=function(w){var D=[];d(w,function(y){if("MemberExpression"!==
y.type||"Identifier"!==y.object.type)return!0;!1===y.computed&&y.object&&y.object.name&&y.property&&"Identifier"===y.property.type&&y.property.name?D.push(y.object.name.toLowerCase()+"."+y.property.name.toLowerCase()):y.object&&y.object.name&&y.property&&"Literal"===y.property.type&&"string"===typeof y.property.value&&D.push(y.object.name.toLowerCase()+"."+y.property.value.toString().toLowerCase());return!1});return D};q.findExpectedFieldLiterals=function(w){var D=[];d(w,function(y){if("CallExpression"===
y.type){if("Identifier"===y.callee.type&&"expects"===y.callee.name.toLowerCase()){for(var C="",G=0;G<(y.arguments||[]).length;G++)0===G?"Identifier"===y.arguments[G].type&&(C=y.arguments[G].name.toLowerCase()):C&&"Literal"===y.arguments[G].type&&e(y.arguments[G].value)&&D.push(C+"."+y.arguments[G].value.toLowerCase());return!1}if("Identifier"===y.callee.type&&["domainname","domaincode","domain","haskey"].includes(y.callee.name.toLowerCase())&&2<=y.arguments.length)return C="","Identifier"===y.arguments[0].type&&
(C=y.arguments[0].name.toLowerCase()),C&&"Literal"===y.arguments[1].type&&e(y.arguments[1].value)&&D.push(C+"."+y.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==y.type||"Identifier"!==y.object.type)return!0;!1===y.computed&&y.object&&y.object.name&&y.property&&"Identifier"===y.property.type&&y.property.name?D.push(y.object.name.toLowerCase()+"."+y.property.name.toLowerCase()):y.object&&y.object.name&&y.property&&"Literal"===y.property.type&&"string"===typeof y.property.value&&D.push(y.object.name.toLowerCase()+
"."+y.property.value.toString().toLowerCase());return!1});return D};q.extractFunctionDeclaration=p;q.validateFunction=l;q.constructGlobalScope=m;q.validateScript=function(w,D,y,C){void 0===y&&(y="async");void 0===C&&(C=q.functionDecls);D={globalScope:m(D.vars,C,D.customFunctions,y),localScope:null};return h(w.body[0].body,D)};q.validateLanguage=function(w){return"BlockStatement"!==w.body[0].body.type?"Invalid formula content.":f(w.body[0].body)};q.nodeErrorMessage=r;q.makeError=t;q.extractAllIssuesInFunction=
x;q.extractAllIssues=v;q.checkScript=function(w,D,y,C,G){void 0===C&&(C="async");void 0===G&&(G=q.functionDecls);var I=[];if("BlockStatement"!==w.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===D||void 0===D)D={vars:{},customFunctions:[]};D={globalScope:m(D.vars,G,D.customFunctions,C),localScope:null};try{v(w.body[0].body,D,y,I)}catch(O){}return I};q.findFunctionCalls=z;q.findScriptDependencies=function(w,D){void 0===D&&(D=[]);var y=null;if(void 0===w.usesFeatureSet){null===
y&&(y=z(w));w.usesFeatureSet=!1;for(var C=0;C<y.length;C++)B.includes(y[C])&&(w.usesFeatureSet=!0,w.isAsync=!0);if(!1===w.usesFeatureSet&&D&&0<D.length){C=0;for(var G=D;C<G.length;C++)if(n(w,G[C])){w.usesFeatureSet=!0;w.isAsync=!0;break}}}if(void 0===w.usesGeometry)for(w.usesGeometry=!1,null===y&&(y=z(w)),C=0;C<y.length;C++)u.includes(y[C])&&(w.usesGeometry=!0)};q.scriptUsesFeatureSet=function(w){w=z(w);for(var D=0;D<w.length;D++)if(B.includes(w[D]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../FunctionWrapper ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),
function(F,q,a,b,e,g,k,c,d,f){Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(h){function n(l,m){if(m instanceof k)return h.arcadeCustomFunctionHandler(m);if(m instanceof d.NativeFunction)return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return m.fn(l,{preparsed:!0,arguments:r})};if(m instanceof d.SizzleFunction)return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length!==m.paramCount)throw Error("Invalid parameters");
return m.fn.apply(m,r)};throw Error("Invalid Parameter");}function p(l){if(l instanceof c)return l.toArray();if(d.isArray(l))return l;throw Error("Invalid Parameter");}h.functions.array=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,1,2);r=d.toNumber(x[0]);if(isNaN(r)||!1===d.isInteger(r))throw Error("Invalid Parameter");x=d.defaultUndefined(x[1],null);r=Array(r);r.fill(x);return r})};h.functions.front=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,
1,1);if(d.isImmutableArray(x[0])){if(0>=x[0].length())throw Error("Array is empty");return x[0].get(0)}if(d.isArray(x[0])){if(0>=x[0].length)throw Error("Array is empty");return x[0][0]}throw Error("Invalid Parameter");})};h.functions.back=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,1,1);if(d.isImmutableArray(x[0])){if(0>=x[0].length())throw Error("Array is empty");return x[0].get(x[0].length()-1)}if(d.isArray(x[0])){if(0>=x[0].length)throw Error("Array is empty");return x[0][x[0].length-
1]}throw Error("Invalid Parameter");})};h.functions.push=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,1,2);if(d.isArray(x[0]))return x[0][x[0].length]=x[1],x[0].length;throw Error("Invalid Parameter");})};h.functions.pop=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,1,1);if(d.isArray(x[0])){if(0>=x[0].length)throw Error("Array is empty");r=x[0][x[0].length-1];--x[0].length;return r}throw Error("Invalid Parameter");})};h.functions.erase=function(l,
m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,2);if(d.isArray(x[0])){r=d.toNumber(x[1]);if(isNaN(r)||!1===d.isInteger(r))throw Error("Invalid Parameter");x=x[0];if(0>=x.length)throw Error("Array is empty");0>r&&(r=x.length+r);if(0>r)throw Error("Element not found");if(r>=x.length)throw Error("Index is greater than array");x.splice(r,1);return d.voidOperation}throw Error("Invalid Parameter");})};h.functions.insert=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,
3,3);if(d.isArray(x[0])){r=d.toNumber(x[1]);if(isNaN(r)||!1===d.isInteger(r))throw Error("Invalid Parameter");t=x[2];x=x[0];if(r>x.length)throw Error("Index is greater than array");if(0>r&&r<-1*x.length)throw Error("Index is greater than array");if(r===x.length)return x[r]=t,d.voidOperation;x.splice(r,0,t);return d.voidOperation}throw Error("Invalid Parameter");})};h.functions.resize=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,3);if(d.isArray(x[0])){t=d.toNumber(x[1]);
if(isNaN(t)||!1===d.isInteger(t))throw Error("Invalid Parameter");if(0>t)throw Error("Size cannot be negative");r=d.defaultUndefined(x[2],null);x=x[0];if(x.length>=t)return x.length=t,d.voidOperation;var v=x.length;x.length=t;for(t=v;t<x.length;t++)x[t]=r;return d.voidOperation}throw Error("Invalid Parameter");})};h.functions.includes=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,2);if(d.isArray(x[0])){var v=x[1];r=x[0];return-1<r.findIndex(function(A){return d.equalityTest(A,
v)})?!0:!1}if(d.isImmutableArray(x[0])){var z=x[1];r=x[0].toArray();return-1<r.findIndex(function(A){return d.equalityTest(A,z)})?!0:!1}throw Error("Invalid Parameter");})};h.functions.slice=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,1,3);if(d.isArray(x[0])){r=d.toNumber(d.defaultUndefined(x[1],0));t=d.toNumber(d.defaultUndefined(x[2],x[0].length));if(isNaN(r)||!1===d.isInteger(r))throw Error("Invalid Parameter");if(isNaN(t)||!1===d.isInteger(t))throw Error("Invalid Parameter");
var v=x[0];return v.slice(r,t)}if(d.isImmutableArray(x[0])){v=x[0];r=d.toNumber(d.defaultUndefined(x[1],0));t=d.toNumber(d.defaultUndefined(x[2],v.length()));if(isNaN(r)||!1===d.isInteger(r))throw Error("Invalid Parameter");if(isNaN(t)||!1===d.isInteger(t))throw Error("Invalid Parameter");return v.toArray().slice(r,t)}throw Error("Invalid Parameter");})};h.functions.splice=function(l,m){return h.standardFunction(l,m,function(r,t,x){r=[];for(t=0;t<x.length;t++)d.isArray(x[t])?r.push.apply(r,x[t]):
d.isImmutableArray(x[t])?r.push.apply(r,x[t].toArray()):r.push(x[t]);return r})};"sync"===h.mode&&(h.functions.any=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,2);r=n(l,x[1]);t=0;for(x=p(x[0]);t<x.length;t++){var v=r(x[t]);if(d.isBoolean(v)&&!0===v)return!0}return!1})},h.functions.all=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,2);r=n(l,x[1]);t=0;for(x=p(x[0]);t<x.length;t++)if(!0!==r(x[t]))return!1;return!0})},h.functions.none=function(l,
m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,2);r=n(l,x[1]);t=0;for(x=p(x[0]);t<x.length;t++)if(!0===r(x[t]))return!1;return!0})},h.functions.reduce=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,3);var v=n(l,x[1]);r=p(x[0]);return 2===x.length?0===r.length?null:r.reduce(function(z,A){var B=v(z,A);return z=void 0!==B&&B!==d.voidOperation?B:null}):r.reduce(function(z,A){var B=v(z,A);return z=void 0!==B&&B!==d.voidOperation?B:null},x[2])})},h.functions.map=
function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,2);r=n(l,x[1]);t=[];var v=0;for(x=p(x[0]);v<x.length;v++){var z=r(x[v]);void 0!==z&&z!==d.voidOperation?t.push(z):t.push(null)}return t})},h.functions.filter=function(l,m){return h.standardFunction(l,m,function(r,t,x){d.pcCheck(x,2,2);r=n(l,x[1]);t=[];var v=0;for(x=p(x[0]);v<x.length;v++){var z=x[v];!0===r(z)&&t.push(z)}return t})});"async"===h.mode&&(h.functions.any=function(l,m){return h.standardFunctionAsync(l,m,function(r,
t,x){return a(this,void 0,void 0,function(){var v,z,A,B,u,w,D;return b(this,function(y){switch(y.label){case 0:d.pcCheck(x,2,2),v=n(l,x[1]),z=p(x[0]),A=0,B=z,y.label=1;case 1:if(!(A<B.length))return[3,7];u=B[A];return[4,v(u)];case 2:return w=y.sent(),D=null,f.isPromiseLike(D)?[4,w]:[3,4];case 3:return D=y.sent(),[3,5];case 4:D=w,y.label=5;case 5:if(d.isBoolean(D)&&!0===D)return[2,!0];y.label=6;case 6:return A++,[3,1];case 7:return[2,!1]}})})})},h.functions.all=function(l,m){return h.standardFunctionAsync(l,
m,function(r,t,x){return a(this,void 0,void 0,function(){var v,z,A,B,u,w,D;return b(this,function(y){switch(y.label){case 0:d.pcCheck(x,2,2),v=n(l,x[1]),z=p(x[0]),A=0,B=z,y.label=1;case 1:if(!(A<B.length))return[3,7];u=B[A];return[4,v(u)];case 2:return w=y.sent(),D=null,f.isPromiseLike(D)?[4,w]:[3,4];case 3:return D=y.sent(),[3,5];case 4:D=w,y.label=5;case 5:if(!0!==D)return[2,!1];y.label=6;case 6:return A++,[3,1];case 7:return[2,!0]}})})})},h.functions.none=function(l,m){return h.standardFunctionAsync(l,
m,function(r,t,x){return a(this,void 0,void 0,function(){var v,z,A,B,u,w,D;return b(this,function(y){switch(y.label){case 0:d.pcCheck(x,2,2),v=n(l,x[1]),z=p(x[0]),A=0,B=z,y.label=1;case 1:if(!(A<B.length))return[3,7];u=B[A];return[4,v(u)];case 2:return w=y.sent(),D=null,f.isPromiseLike(D)?[4,w]:[3,4];case 3:return D=y.sent(),[3,5];case 4:D=w,y.label=5;case 5:if(!0===D)return[2,!1];y.label=6;case 6:return A++,[3,1];case 7:return[2,!0]}})})})},h.functions.filter=function(l,m){return h.standardFunctionAsync(l,
m,function(r,t,x){return a(this,void 0,void 0,function(){var v,z,A,B,u,w,D,y;return b(this,function(C){switch(C.label){case 0:d.pcCheck(x,2,2),v=n(l,x[1]),z=p(x[0]),A=[],B=0,u=z,C.label=1;case 1:if(!(B<u.length))return[3,7];w=u[B];return[4,v(w)];case 2:return D=C.sent(),y=null,f.isPromiseLike(y)?[4,D]:[3,4];case 3:return y=C.sent(),[3,5];case 4:y=D,C.label=5;case 5:!0===y&&A.push(w),C.label=6;case 6:return B++,[3,1];case 7:return[2,A]}})})})},h.functions.reduce=function(l,m){return h.standardFunctionAsync(l,
m,function(r,t,x){var v=this;d.pcCheck(x,2,3);var z=n(l,x[1]);r=p(x[0]);t=null;if(2<x.length)x=d.defaultUndefined(x[2],null),t=r.reduce(function(A,B){return a(v,void 0,void 0,function(){var u;return b(this,function(w){switch(w.label){case 0:return[4,A];case 1:u=w.sent();if(void 0===u||u===d.voidOperation)u=null;return[2,z(u,B)]}})})},Promise.resolve(x));else{if(0===r.length)return null;t=r.reduce(function(A,B,u){return a(v,void 0,void 0,function(){var w;return b(this,function(D){switch(D.label){case 0:return 1>=
u?[2,z(A,B)]:[4,A];case 1:w=D.sent();if(void 0===w||w===d.voidOperation)w=null;return[2,z(w,B)]}})})})}return t.then(function(A){return void 0!==A&&A!==d.voidOperation?A:null})})},h.functions.map=function(l,m){return h.standardFunctionAsync(l,m,function(r,t,x){return a(this,void 0,void 0,function(){var v,z,A,B,u,w,D,y;return b(this,function(C){switch(C.label){case 0:d.pcCheck(x,2,2),v=n(l,x[1]),z=p(x[0]),A=[],B=0,u=z,C.label=1;case 1:if(!(B<u.length))return[3,7];w=u[B];return[4,v(w)];case 2:return D=
C.sent(),y=null,f.isPromiseLike(y)?[4,D]:[3,4];case 3:return y=C.sent(),[3,5];case 4:y=D,C.label=5;case 5:void 0!==y&&y!==d.voidOperation?A.push(y):A.push(null),C.label=6;case 6:return B++,[3,1];case 7:return[2,A]}})})})})}})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(F,q,a,b){function e(d,f){var h=new a(f);d(function(n){return c(n).then(h.resolve)},h.reject);return h.promise}function g(d){if(d){if("function"!==typeof d.forEach){var f=
Object.keys(d),h=f.map(function(p){return d[p]});return g(h).then(function(p){var l={};f.forEach(function(m,r){return l[m]=p[r]});return l})}var n=null;return e(function(p,l){var m=[],r=d.length;0===r&&p(m);d.forEach(function(t){var x={promise:t};m.push(x);t.then(function(v){x.value=v})["catch"](function(v){x.error=v}).then(function(){--r;0===r&&(n?l(Error("AbortError")):p(m))})})},function(p){n=p||"Invocation cancellation";d.forEach(function(l){return l.cancel(p)})})}}function k(d){void 0===d&&(d=
void 0);var f=new a;f.resolve(d);return f.promise}function c(d){return d&&"function"===typeof d.then?d:k(d)}Object.defineProperty(q,"__esModule",{value:!0});q.createResolver=q.when=q.isPromiseLike=q.wrapCallback=q.timeout=q.after=q.resolve=q.reject=q.first=q.eachAlwaysValues=q.eachAlways=q.createDeferred=q.create=q.filter=q.all=void 0;q.all=function(d){return b(d)};q.filter=function(d,f){var h=d.slice();return b(d.map(function(n,p){return f(n,p)})).then(function(n){return h.filter(function(p,l){return n[l]})})};
q.create=e;q.createDeferred=function(d){var f=null;d=e(function(h,n){f={resolve:h,reject:n}},d);f.promise=d;f.cancel=function(){f.reject(Error("AbortError"))};return f};q.eachAlways=g;q.eachAlwaysValues=function(d){return g(d).then(function(f){return f.filter(function(h){return!!h.value}).map(function(h){return h.value})})};q.first=function(d){return d&&d.length?e(function(f,h){for(var n=0;n<d.length;n++)d[n].then(f,h)}):k()};q.reject=function(d){var f=new a;f.reject(d);return f.promise};q.resolve=
k;q.after=function(d,f){void 0===f&&(f=void 0);var h=0;return e(function(n){h=setTimeout(function(){n(f)},d)},function(){h&&(clearTimeout(h),h=0)})};q.timeout=function(d,f,h){var n=0,p=new a(d.cancel);d.then(function(l){p.isFulfilled()||(p.resolve(l),n&&(clearTimeout(n),n=0))});d["catch"](function(l){p.isFulfilled()||(p.reject(l),n&&(clearTimeout(n),n=0))});n=setTimeout(function(){p.reject(h||Error("promiseUtils:timeout"))},f);return p.promise};q.wrapCallback=function(d){var f=!1;return e(function(){d(function(h){f||
k(h)})},function(){return f=!0})};q.isPromiseLike=function(d){return d&&"function"===typeof d.then};q.when=c;q.createResolver=function(d){var f,h;d=e(function(p,l){f=p;h=l},d);var n=function(p){f(p)};n.resolve=function(p){return f(p)};n.reject=function(p){return h(p)};n.promise=d;return n}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(F,q,a,b,e){function g(h){h=new Date(h.getTime());var n=h.getFullYear(),
p=new Date(0);p.setFullYear(n+1,0,4);p.setHours(0,0,0,0);p=k(p);var l=new Date(0);l.setFullYear(n,0,4);l.setHours(0,0,0,0);l=k(l);return h.getTime()>=p.getTime()?n+1:h.getTime()>=l.getTime()?n:n-1}function k(h){h=new Date(h.getTime());var n=h.getDay();n=(1>n?7:0)+n-1;h.setDate(h.getDate()-n);h.setHours(0,0,0,0);return h}function c(h){return null===h?h:isNaN(h.getTime())?null:h}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;var d=[0,31,59,90,120,151,181,212,243,273,304,
334],f=[0,31,60,91,121,152,182,213,244,274,305,335];q.registerFunctions=function(h,n){h.today=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,0,0);m=new Date;m.setHours(0,0,0,0);return m})};h.now=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,0,0);return new Date})};h.timestamp=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,0,0);m=new Date;return m=new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds())})};
h.toutc=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?null:new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds())})};h.tolocal=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?null:b.DateTime.utc(m.getFullYear(),m.getMonth()+1,m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds()).toJSDate()})};h.day=function(p,
l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getDate()})};h.month=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getMonth()})};h.year=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getFullYear()})};h.hour=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getHours()})};h.second=function(p,l){return n(p,l,
function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getSeconds()})};h.millisecond=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getMilliseconds()})};h.minute=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getMinutes()})};h.week=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,2);m=a.toDate(t[0]);if(null===m)return NaN;t=a.toNumber(a.defaultUndefined(t[1],0));if(0>t||
6<t)throw Error("Invalid Parameter");r=m.getDate();var x=m.getMonth(),v=m.getFullYear();m=m.getDay();r=r+(0!==v%4||0===v%100&&0!==v%400?d:f)[x]-1;x=Math.floor(r/7);return m-t+(0>m-t?7:0)<r-7*x?x+1:x})};h.weekday=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getDay()})};h.isoweekday=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);if(null===m)return NaN;m=m.getDay();0===m&&(m=7);return m})};h.isomonth=function(p,l){return n(p,
l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getMonth()+1})};h.isoweek=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);r=a.toDate(t[0]);if(null===r)return NaN;m=k(r).getTime();r=g(r);t=new Date(0);t.setFullYear(r,0,4);t.setHours(0,0,0,0);r=k(t);m-=r.getTime();return Math.round(m/6048E5)+1})};h.isoyear=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:g(m)})};h.date=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,
0,7);if(3===t.length)return c(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),0,0,0,0));if(4===t.length)return c(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),0,0,0));if(5===t.length)return c(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),0,0));if(6===t.length)return c(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),a.toNumber(t[5]),0));if(7===t.length)return c(new Date(a.toNumber(t[0]),
a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),a.toNumber(t[5]),a.toNumber(t[6])));if(2===t.length){m=a.toString(t[1]);if(""===m)return null;m=a.standardiseDateFormat(m);r=void 0;r="X"===m?b.DateTime.fromSeconds(a.toNumber(t[0])):"x"===m?b.DateTime.fromMillis(a.toNumber(t[0])):b.DateTime.fromFormat(a.toString(t[0]),m,{locale:e.locale,numberingSystem:"latn"});return r.isValid?r.toJSDate():null}if(1===t.length){if(a.isString(t[0])){if(""===t[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(t[0]))return a.toDate(t[0]+"-01-01")}m=a.toNumber(t[0]);return!1===isNaN(m)?c(new Date(m)):a.toDate(t[0])}if(0===t.length)return new Date})};h.datediff=function(p,l){return n(p,l,function(m,r,t){a.pcCheck(t,2,3);m=a.toDateTime(t[0]);r=a.toDateTime(t[1]);if(null===m||null===r)return NaN;switch(a.toString(t[2]).toLowerCase()){case "days":case "day":case "d":return m.diff(r,"days").days;case "months":case "month":return m.diff(r,"months").months;
case "minutes":case "minute":case "m":return"M"===t[2]?m.diff(r,"months").months:m.diff(r,"minutes").minutes;case "seconds":case "second":case "s":return m.diff(r,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return m.diff(r).milliseconds;case "hours":case "hour":case "h":return m.diff(r,"hours").hours;case "years":case "year":case "y":return m.diff(r,"years").years;default:return m.diff(r).milliseconds}})};h.dateadd=function(p,l){return n(p,l,function(m,r,t){var x;a.pcCheck(t,
2,3);m=a.toDateTime(t[0]);if(null===m)return null;r=a.toNumber(t[1]);if(isNaN(r))return m.toJSDate();var v="milliseconds";switch(a.toString(t[2]).toLowerCase()){case "days":case "day":case "d":v="days";r=a.absRound(r);break;case "months":case "month":v="months";r=a.absRound(r);break;case "minutes":case "minute":case "m":v="M"===t[2]?"months":"minutes";break;case "seconds":case "second":case "s":v="seconds";break;case "milliseconds":case "millisecond":case "ms":v="milliseconds";break;case "hours":case "hour":case "h":v=
"hours";break;case "years":case "year":case "y":v="years"}return m.plus((x={},x[v]=r,x)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(F,
q,a,b,e,g,k,c,d,f,h,n,p,l,m,r){function t(x){return x&&"esri.arcade.Feature"===x.arcadeDeclaredClass}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(x,v){x.ringisclockwise=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,1,1);B=[];if(null===w[0])return!1;if(c.isArray(w[0])){var D=0;for(w=w[0];D<w.length;D++)if(u=w[D],u instanceof n)B.push([u.x,u.y]);else throw Error("Invalid Argument");}else if(w[0]instanceof k)B=w[0]._elements;else if(c.isImmutableArray(w[0])){D=
0;for(var y=w[0].toArray();D<y.length;D++)if(u=y[D],u instanceof n)B.push([u.x,u.y]);else throw Error("Invalid Argument");0<B.length&&(w[0].get(0),w[0].get(0))}else throw Error("Invalid Argument");return 3>B.length?!1:(new p({rings:[],spatialReference:{wkid:4326}})).isClockwise(B)})};x.polygon=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,1,1);B=null;if(w[0]instanceof e){if(B=c.fixSpatialReference(g.parseGeometryFromDictionary(w[0]),z.spatialReference),!1===B instanceof p)throw Error("Illegal Parameter");
}else B=w[0]instanceof p?r.fromJson(w[0].toJson()):c.fixSpatialReference(new p(JSON.parse(w[0])),z.spatialReference);if(null!==B&&!1===B.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(B)})};x.polyline=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,1,1);B=null;if(w[0]instanceof e){if(B=c.fixSpatialReference(g.parseGeometryFromDictionary(w[0]),z.spatialReference),
!1===B instanceof l)throw Error("Illegal Parameter");}else B=w[0]instanceof l?r.fromJson(w[0].toJson()):c.fixSpatialReference(new l(JSON.parse(w[0])),z.spatialReference);if(null!==B&&!1===B.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(B)})};x.point=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,1,1);B=null;if(w[0]instanceof e){if(B=c.fixSpatialReference(g.parseGeometryFromDictionary(w[0]),
z.spatialReference),!1===B instanceof n)throw Error("Illegal Parameter");}else B=w[0]instanceof n?r.fromJson(w[0].toJson()):c.fixSpatialReference(new n(JSON.parse(w[0])),z.spatialReference);if(null!==B&&!1===B.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(B)})};x.multipoint=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,1,1);B=null;if(w[0]instanceof e){if(B=
c.fixSpatialReference(g.parseGeometryFromDictionary(w[0]),z.spatialReference),!1===B instanceof h)throw Error("Illegal Parameter");}else B=w[0]instanceof h?r.fromJson(w[0].toJson()):c.fixSpatialReference(new h(JSON.parse(w[0])),z.spatialReference);if(null!==B&&!1===B.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(B)})};x.extent=function(z,A){return v(z,A,function(B,
u,w){w=c.autoCastFeatureToGeometry(w);c.pcCheck(w,1,1);B=null;w[0]instanceof e?B=c.fixSpatialReference(g.parseGeometryFromDictionary(w[0]),z.spatialReference):w[0]instanceof n?(B={xmin:w[0].x,ymin:w[0].y,xmax:w[0].x,ymax:w[0].y,spatialReference:w[0].spatialReference.toJson()},w=w[0],w.hasZ?(B.zmin=w.z,B.zmax=w.z):w.hasM&&(B.mmin=w.m,B.mmax=w.m),B=r.fromJson(B)):B=w[0]instanceof p?r.fromJson(w[0].getExtent().toJson()):w[0]instanceof l?r.fromJson(w[0].getExtent().toJson()):w[0]instanceof h?r.fromJson(w[0].getExtent().toJson()):
w[0]instanceof d?r.fromJson(w[0].toJson()):c.fixSpatialReference(new d(JSON.parse(w[0])),z.spatialReference);if(null!==B&&!1===B.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(B)})};x.geometry=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,1,1);B=null;if(null===w[0])return null;B=t(w[0])?c.fixSpatialReference(w[0].geometry(),z.spatialReference):w[0]instanceof
e?c.fixSpatialReference(g.parseGeometryFromDictionary(w[0]),z.spatialReference):c.fixSpatialReference(r.fromJson(JSON.parse(w[0])),z.spatialReference);if(null!==B&&!1===B.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(B)})};x.setgeometry=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,2,2);if(t(w[0])){if(!0===w[0].immutable)throw Error("Feature is Immutable");
if(w[1]instanceof f||null===w[1])w[0]._geometry=w[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return c.voidOperation})};x.feature=function(z,A){return v(z,A,function(B,u,w){if(0===w.length)throw Error("Missing Parameters");B=null;if(1===w.length)if(c.isString(w[0]))B=g.fromJson(JSON.parse(w[0]));else if(t(w[0]))B=g.createFromArcadeFeature(w[0]);else if(w[0]instanceof f)B=g.createFromGraphicLikeObject(w[0],null,null);else if(w[0]instanceof e)B=w[0].hasField("geometry")?
w[0].field("geometry"):null,u=w[0].hasField("attributes")?w[0].field("attributes"):null,null!==B&&B instanceof e&&(B=g.parseGeometryFromDictionary(B)),null!==u&&(u=g.parseAttributesFromDictionary(u)),B=g.createFromGraphicLikeObject(B,u,null);else throw Error("Illegal Argument");else{if(2===w.length){u=B=null;if(null!==w[0])if(w[0]instanceof f)B=w[0];else if(B instanceof e)B=g.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");if(null!==w[1])if(w[1]instanceof e)u=g.parseAttributesFromDictionary(w[1]);
else throw Error("Illegal Argument");}else{B=null;u={};if(null!==w[0])if(w[0]instanceof f)B=w[0];else if(B instanceof e)B=g.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");for(var D=1;D<w.length;D+=2){var y=c.toString(w[D]),C=w[D+1];if(null===C||void 0===C||c.isString(C)||isNaN(C)||c.isDate(C)||c.isNumber(C)||c.isBoolean(C)){if(c.isFunctionParameter(C)||!1===c.isSimpleType(C))throw Error("Illegal Argument");u[y]=C===c.voidOperation?null:C}else throw Error("Illegal Argument");
}}B=g.createFromGraphicLikeObject(B,u,null)}B._geometry=c.fixSpatialReference(B.geometry(),z.spatialReference);B.immutable=!1;return B})};x.dictionary=function(z,A){return v(z,A,function(B,u,w){if(0===w.length)return w=new e,w.immutable=!1,w;if(1===w.length&&c.isString(w[0]))try{var D=JSON.parse(w[0]),y=e.convertObjectToArcadeDictionary(D,!1);y.immutable=!1;return y}catch(C){throw Error("Missing Parameters or Illegal Json");}if(0!==w.length%2)throw Error("Missing Parameters");B={};for(u=0;u<w.length;u+=
2)if(D=c.toString(w[u]),y=w[u+1],null===y||void 0===y||c.isString(y)||isNaN(y)||c.isDate(y)||c.isNumber(y)||c.isBoolean(y)||c.isArray(y)||c.isImmutableArray(y)){if(c.isFunctionParameter(y))throw Error("Illegal Argument");B[D]=y===c.voidOperation?null:y}else throw Error("Illegal Argument");w=new e(B);w.immutable=!1;return w})};x.haskey=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,2,2);B=c.toString(w[1]);if(t(w[0])||w[0]instanceof e)return w[0].hasField(B);throw Error("Illegal Argument");
})};x.indexof=function(z,A){return v(z,A,function(B,u,w){c.pcCheck(w,2,2);B=w[1];if(c.isArray(w[0])){for(u=0;u<w[0].length;u++)if(c.equalityTest(B,w[0][u]))return u;return-1}if(c.isImmutableArray(w[0])){var D=w[0].length();for(u=0;u<D;u++)if(c.equalityTest(B,w[0].get(u)))return u;return-1}throw Error("Illegal Argument");})};x.angle=function(z,A){return v(z,A,function(B,u,w){w=c.autoCastFeatureToGeometry(w);c.pcCheck(w,2,3);if(!(w[0]instanceof n))throw Error("Illegal Argument");if(!(w[1]instanceof
n))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof n))throw Error("Illegal Argument");return 2===w.length?m.angle2D(w[0],w[1]):m.angleBetween2D(w[0],w[1],w[2])})};x.bearing=function(z,A){return v(z,A,function(B,u,w){w=c.autoCastFeatureToGeometry(w);c.pcCheck(w,2,3);if(!(w[0]instanceof n))throw Error("Illegal Argument");if(!(w[1]instanceof n))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof n))throw Error("Illegal Argument");return 2===w.length?m.bearing2D(w[0],w[1]):
m.bearingBetween2D(w[0],w[1],w[2])})};x.isselfintersecting=function(z,A){return v(z,A,function(B,u,w){w=c.autoCastFeatureToGeometry(w);c.pcCheck(w,1,1);B=w[0];if(B instanceof p)return B.isSelfIntersecting(B);if(B instanceof l)return B=B.paths,m.pathsSelfIntersecting(B);if(B instanceof h)for(u=B.points,w=0;w<u.length;w++)for(var D=0;D<u.length;D++)if(D!==w){for(var y=!0,C=0;C<u[w].length;C++)if(u[w][C]!==u[D][C]){y=!1;break}if(!0===y)return!0}return c.isArray(B)||c.isImmutableArray(B)?(B=c.autoCastArrayOfPointsToPolyline(B,
z.spatialReference),null!==B&&(B=B.paths),m.pathsSelfIntersecting(B)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(F,q,a){function b(h,n,p){var l={x:0,y:0};n&&(l.z=0);p&&(l.m=0);for(var m=0,r=h[0],t=0;t<h.length;t++){var x=h[t];a:if(x.length!==r.length)var v=!1;else{for(v=0;v<x.length;v++)if(x[v]!==r[v]){v=!1;break a}v=!0}if(!1===v){v=e(r,x,n);var z=x,A=n,B=p,u={x:(r[0]+z[0])/2,y:(r[1]+z[1])/2};A&&(u.z=(r[2]+z[2])/2);A&&B?u.m=(r[3]+
z[3])/2:B&&(u.m=(r[2]+z[2])/2);r=u;r.x*=v;r.y*=v;l.x+=r.x;l.y+=r.y;n&&(r.z*=v,l.z+=r.z);p&&(r.m*=v,l.m+=r.m);m+=v;r=x}}0<m?(l.x/=m,l.y/=m,n&&(l.z/=m),p&&(l.m/=m)):(l.x=h[0][0],l.y=h[0][1],n&&(l.z=h[0][2]),p&&n?l.m=h[0][3]:p&&(l.m=h[0][2]));return l}function e(h,n,p){var l=n[0]-h[0];h=n[1]-h[1];return p?(n=n[2]-n[2],Math.sqrt(l*l+h*h+n*n)):Math.sqrt(l*l+h*h)}function g(h,n,p){for(void 0===p&&(p=0);h<p;)h+=n;for(p+=n;h>=p;)h-=n;return h}function k(h,n){return Math.atan2(n.y-h.y,n.x-h.x)}function c(h,
n,p){var l=h.x-n.x;h=h.y-n.y;var m=p.x-n.x;n=p.y-n.y;return Math.atan2(l*n-m*h,l*m+h*n)}function d(h,n,p,l,m){var r=h[0];h=h[1];var t=n[0];n=n[1];var x=p[0],v=p[1];p=l[0]-x;x=r-x;var z=t-r;l=l[1]-v;v=h-v;var A=n-h,B=l*z-p*A;if(0===B)return!1;p=(p*v-l*x)/B;x=(z*v-A*x)/B;return 0<=p&&1>=p&&0<=x&&1>=x?(m&&(m[0]=r+p*(t-r),m[1]=h+p*(n-h)),!0):!1}Object.defineProperty(q,"__esModule",{value:!0});q.pathsSelfIntersecting=q.bearingBetween2D=q.angleBetween2D=q.angleBetweenRad=q.bearing2D=q.angle2D=q.angleRad=
q.centroidMultiPoint=q.centroidPolyline=void 0;q.centroidPolyline=function(h){for(var n={x:0,y:0,spatialReference:h.spatialReference.toJson()},p={x:0,y:0,spatialReference:h.spatialReference.toJson()},l=0,m=0,r=0;r<h.paths.length;r++)if(0!==h.paths[r].length){var t=h.paths[r];var x=!0===h.hasZ;if(1>=t.length)t=0;else{for(var v=0,z=1;z<t.length;z++)v+=e(t[z-1],t[z],x);t=v}0===t?(x=b(h.paths[r],!0===h.hasZ,!0===h.hasM),n.x+=x.x,n.y+=x.y,!0===h.hasZ&&(n.z+=x.z),!0===h.hasM&&(n.m+=x.m),++l):(x=b(h.paths[r],
!0===h.hasZ,!0===h.hasM),p.x+=x.x*t,p.y+=x.y*t,!0===h.hasZ&&(p.z+=x.z*t),!0===h.hasM&&(p.m+=x.m*t),m+=t)}return 0<m?(p.x/=m,p.y/=m,!0===h.hasZ&&(p.z/=m),!0===h.hasM&&(p.m/=m),new a(p)):0<l?(n.x/=l,n.y/=l,!0===h.hasZ&&(p.z/=l),!0===h.hasM&&(n.m/=l),new a(n)):null};q.centroidMultiPoint=function(h){if(0===h.points.length)return null;for(var n=0,p=0,l=0,m=0,r=0;r<h.points.length;r++){var t=h.getPoint(r);!0===t.hasZ&&(l+=t.z);!0===t.hasM&&(m+=t.m);n+=t.x;p+=t.y;m+=t.m}n={x:n/h.points.length,y:p/h.points.length,
spatialReference:null};n.spatialReference=h.spatialReference.toJson();!0===h.hasZ&&(n.z=l/h.points.length);!0===h.hasM&&(n.m=m/h.points.length);return new a(n)};q.angleRad=k;q.angle2D=function(h,n){return g(k(h,n),2*Math.PI)*(180/Math.PI)};q.bearing2D=function(h,n){return g(Math.PI/2-k(h,n),2*Math.PI)*(180/Math.PI)};q.angleBetweenRad=c;q.angleBetween2D=function(h,n,p){return g(c(h,n,p),2*Math.PI)*(180/Math.PI)};q.bearingBetween2D=function(h,n,p){return g(-1*c(h,n,p),2*Math.PI)*(180/Math.PI)};var f=
[0,0];q.pathsSelfIntersecting=function(h){for(var n=0;n<h.length;n++){for(var p=h[n],l=0;l<p.length-1;l++)for(var m=p[l],r=p[l+1],t=n+1;t<h.length;t++)for(var x=0;x<h[t].length-1;x++){var v=h[t][x],z=h[t][x+1],A=d(m,r,v,z,f);if(A&&!(f[0]===m[0]&&f[1]===m[1]||f[0]===v[0]&&f[1]===v[1]||f[0]===r[0]&&f[1]===r[1]||f[0]===z[0]&&f[1]===z[1]))return!0}x=p.length;if(!(3>x))for(l=0;l<=x-2;l++)for(m=p[l],r=p[l+1],t=l+2;t<=x-2;t++)if(v=p[t],z=p[t+1],(A=d(m,r,v,z,f))&&!(f[0]===m[0]&&f[1]===m[1]||f[0]===v[0]&&
f[1]===v[1]||f[0]===r[0]&&f[1]===r[1]||f[0]===z[0]&&f[1]===z[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n,p){function l(r){return 0===a.version.indexOf("4.")?h.fromExtent(r):new h({spatialReference:r.spatialReference,
rings:[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]})}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=q.setGeometryEngine=void 0;var m=null;q.setGeometryEngine=function(r){m=r};q.registerFunctions=function(r,t){function x(v){e.pcCheck(v,2,2);if(!(v[0]instanceof c&&v[1]instanceof c||v[0]instanceof c&&null===v[1]||v[1]instanceof c&&null===v[0]||null===v[0]&&null===v[1]))throw Error("Illegal Argument");}r.disjoint=function(v,z){return t(v,z,
function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null===u[0]||null===u[1]?!0:m.disjoint(u[0],u[1])})};r.intersects=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null===u[0]||null===u[1]?!1:m.intersects(u[0],u[1])})};r.touches=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null===u[0]||null===u[1]?!1:m.touches(u[0],u[1])})};r.crosses=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);
x(u);return null===u[0]||null===u[1]?!1:m.crosses(u[0],u[1])})};r.within=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null===u[0]||null===u[1]?!1:m.within(u[0],u[1])})};r.contains=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null===u[0]||null===u[1]?!1:m.contains(u[0],u[1])})};r.overlaps=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null===u[0]||null===u[1]?!1:m.overlaps(u[0],
u[1])})};r.equals=function(v,z){return t(v,z,function(A,B,u){e.pcCheck(u,2,2);return u[0]===u[1]?!0:u[0]instanceof c&&u[1]instanceof c?m.equals(u[0],u[1]):e.isDate(u[0])&&e.isDate(u[1])?u[0].getTime()===u[1].getTime():!1})};r.relate=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,3,3);if(u[0]instanceof c&&u[1]instanceof c)return m.relate(u[0],u[1],e.toString(u[2]));if(u[0]instanceof c&&null===u[1]||u[1]instanceof c&&null===u[0]||null===u[0]&&null===u[1])return!1;
throw Error("Illegal Argument");})};r.intersection=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null===u[0]||null===u[1]?null:m.intersect(u[0],u[1])})};r.union=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);A=[];if(0===u.length)throw Error("Function called with wrong number of Parameters");if(1===u.length)if(e.isArray(u[0]))for(u=e.autoCastFeatureToGeometry(u[0]),B=0;B<u.length;B++){if(null!==u[B]){if(!(u[B]instanceof c))throw Error("Illegal Argument");
A.push(u[B])}}else if(e.isImmutableArray(u[0]))for(u=e.autoCastFeatureToGeometry(u[0].toArray()),B=0;B<u.length;B++){if(null!==u[B]){if(!(u[B]instanceof c))throw Error("Illegal Argument");A.push(u[B])}}else{if(u[0]instanceof c)return e.fixSpatialReference(b.cloneGeometry(u[0]),v.spatialReference);if(null===u[0])return null;throw Error("Illegal Argument");}else for(B=0;B<u.length;B++)if(null!==u[B]){if(!(u[B]instanceof c))throw Error("Illegal Argument");A.push(u[B])}return 0===A.length?null:m.union(A)})};
r.difference=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null!==u[0]&&null===u[1]?b.cloneGeometry(u[0]):null===u[0]?null:m.difference(u[0],u[1])})};r.symmetricdifference=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);x(u);return null===u[0]&&null===u[1]?null:null===u[0]?b.cloneGeometry(u[1]):null===u[1]?b.cloneGeometry(u[0]):m.symmetricDifference(u[0],u[1])})};r.clip=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);
e.pcCheck(u,2,2);if(!(u[1]instanceof k)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return null;if(!(u[0]instanceof c))throw Error("Illegal Argument");return null===u[1]?null:m.clip(u[0],u[1])})};r.cut=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,2);if(!(u[1]instanceof n)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return[];if(!(u[0]instanceof c))throw Error("Illegal Argument");return null===u[1]?[b.cloneGeometry(u[0])]:
m.cut(u[0],u[1])})};r.area=function(v,z){return t(v,z,function(A,B,u){e.pcCheck(u,1,2);u=e.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(e.isArray(u[0])||e.isImmutableArray(u[0]))return A=e.autoCastArrayOfPointsToPolygon(u[0],v.spatialReference),null===A?0:m.planarArea(A,b.convertSquareUnitsToCode(e.defaultUndefined(u[1],-1)));if(!(u[0]instanceof c))throw Error("Illegal Argument");return m.planarArea(u[0],b.convertSquareUnitsToCode(e.defaultUndefined(u[1],-1)))})};r.areageodetic=function(v,
z){return t(v,z,function(A,B,u){e.pcCheck(u,1,2);u=e.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(e.isArray(u[0])||e.isImmutableArray(u[0]))return A=e.autoCastArrayOfPointsToPolygon(u[0],v.spatialReference),null===A?0:m.geodesicArea(A,b.convertSquareUnitsToCode(e.defaultUndefined(u[1],-1)));if(!(u[0]instanceof c))throw Error("Illegal Argument");return m.geodesicArea(u[0],b.convertSquareUnitsToCode(e.defaultUndefined(u[1],-1)))})};r.length=function(v,z){return t(v,z,function(A,B,u){e.pcCheck(u,
1,2);u=e.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(e.isArray(u[0])||e.isImmutableArray(u[0]))return A=e.autoCastArrayOfPointsToPolyline(u[0],v.spatialReference),null===A?0:m.planarLength(A,b.convertLinearUnitsToCode(e.defaultUndefined(u[1],-1)));if(!(u[0]instanceof c))throw Error("Illegal Argument");return m.planarLength(u[0],b.convertLinearUnitsToCode(e.defaultUndefined(u[1],-1)))})};r.length3d=function(v,z){return t(v,z,function(A,B,u){e.pcCheck(u,1,2);u=e.autoCastFeatureToGeometry(u);
if(null===u[0])return 0;if(e.isArray(u[0])||e.isImmutableArray(u[0]))return A=e.autoCastArrayOfPointsToPolyline(u[0],v.spatialReference),null===A?0:m.planarLength(A,b.convertLinearUnitsToCode(e.defaultUndefined(u[1],-1)));if(!(u[0]instanceof c))throw Error("Illegal Argument");return m.planarLength(u[0],b.convertLinearUnitsToCode(e.defaultUndefined(u[1],-1)))})};r.lengthgeodetic=function(v,z){return t(v,z,function(A,B,u){e.pcCheck(u,1,2);u=e.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(e.isArray(u[0])||
e.isImmutableArray(u[0]))return A=e.autoCastArrayOfPointsToPolyline(u[0],v.spatialReference),null===A?0:m.geodesicLength(A,b.convertLinearUnitsToCode(e.defaultUndefined(u[1],-1)));if(!(u[0]instanceof c))throw Error("Illegal Argument");return m.geodesicLength(u[0],b.convertLinearUnitsToCode(e.defaultUndefined(u[1],-1)))})};r.distance=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,3);A=u[0];if(e.isArray(u[0])||e.isImmutableArray(u[0]))A=e.autoCastArrayOfPointsToMultiPoint(u[0],
v.spatialReference);B=u[1];if(e.isArray(u[1])||e.isImmutableArray(u[1]))B=e.autoCastArrayOfPointsToMultiPoint(u[1],v.spatialReference);if(!(A instanceof c))throw Error("Illegal Argument");if(!(B instanceof c))throw Error("Illegal Argument");return m.distance(A,B,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1)))})};r.distancegeodetic=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,3);A=u[0];B=u[1];if(!(A instanceof f))throw Error("Illegal Argument");
if(!(B instanceof f))throw Error("Illegal Argument");var w=new n({paths:[],spatialReference:A.spatialReference});w.addPath([A,B]);return m.geodesicLength(w,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1)))})};r.densify=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof c))throw Error("Illegal Argument");A=e.toNumber(u[1]);if(isNaN(A))throw Error("Illegal Argument");if(0>=A)throw Error("Illegal Argument");
return u[0]instanceof h||u[0]instanceof n?m.densify(u[0],A,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1))):u[0]instanceof k?m.densify(l(u[0]),A,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1))):u[0]})};r.densifygeodetic=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof c))throw Error("Illegal Argument");A=e.toNumber(u[1]);if(isNaN(A))throw Error("Illegal Argument");if(0>=A)throw Error("Illegal Argument");
return u[0]instanceof h||u[0]instanceof n?m.geodesicDensify(u[0],A,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1))):u[0]instanceof k?m.geodesicDensify(l(u[0]),A,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1))):u[0]})};r.generalize=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,4);if(null===u[0])return null;if(!(u[0]instanceof c))throw Error("Illegal Argument");A=e.toNumber(u[1]);if(isNaN(A))throw Error("Illegal Argument");return m.generalize(u[0],
A,e.toBoolean(e.defaultUndefined(u[2],!0)),b.convertLinearUnitsToCode(e.defaultUndefined(u[3],-1)))})};r.buffer=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof c))throw Error("Illegal Argument");A=e.toNumber(u[1]);if(isNaN(A))throw Error("Illegal Argument");return 0===A?b.cloneGeometry(u[0]):m.buffer(u[0],A,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1)))})};r.buffergeodetic=function(v,z){return t(v,
z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof c))throw Error("Illegal Argument");A=e.toNumber(u[1]);if(isNaN(A))throw Error("Illegal Argument");return 0===A?b.cloneGeometry(u[0]):m.geodesicBuffer(u[0],A,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1)))})};r.offset=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,6);if(null===u[0])return null;if(!(u[0]instanceof h||u[0]instanceof n))throw Error("Illegal Argument");
A=e.toNumber(u[1]);if(isNaN(A))throw Error("Illegal Argument");B=e.toNumber(e.defaultUndefined(u[4],10));if(isNaN(B))throw Error("Illegal Argument");var w=e.toNumber(e.defaultUndefined(u[5],0));if(isNaN(w))throw Error("Illegal Argument");return m.offset(u[0],A,b.convertLinearUnitsToCode(e.defaultUndefined(u[2],-1)),e.toString(e.defaultUndefined(u[3],"round")).toLowerCase(),B,w)})};r.rotate=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,2,3);A=u[0];if(null===
A)return null;if(!(A instanceof c))throw Error("Illegal Argument");A instanceof k&&(A=h.fromExtent(A));B=e.toNumber(u[1]);if(isNaN(B))throw Error("Illegal Argument");u=e.defaultUndefined(u[2],null);if(null===u)return m.rotate(A,B);if(u instanceof f)return m.rotate(A,B,u);throw Error("Illegal Argument");})};r.centroid=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,1,1);if(null===u[0])return null;A=u[0];if(e.isArray(u[0])||e.isImmutableArray(u[0]))A=e.autoCastArrayOfPointsToMultiPoint(u[0],
v.spatialReference);if(null===A)return null;if(!(A instanceof c))throw Error("Illegal Argument");return A instanceof f?e.fixSpatialReference(b.cloneGeometry(u[0]),v.spatialReference):A instanceof h?A.getCentroid():A instanceof n?g.centroidPolyline(A):A instanceof d?g.centroidMultiPoint(A):A instanceof k?A.getCenter():null})};r.multiparttosinglepart=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,1,1);B=[];if(null===u[0])return null;if(!(u[0]instanceof c))throw Error("Illegal Argument");
if(u[0]instanceof f||u[0]instanceof k)return[e.fixSpatialReference(b.cloneGeometry(u[0]),v.spatialReference)];A=m.simplify(u[0]);if(A instanceof h){B=[];var w=[];for(u=0;u<A.rings.length;u++)if(A.isClockwise(A.rings[u])){var D=p.fromJson({rings:[A.rings[u]],hasZ:!0===A.hasZ,hasM:!0===A.hasM,spatialReference:A.spatialReference.toJson()});B.push(D)}else w.push({ring:A.rings[u],pt:A.getPoint(u,0)});for(A=0;A<w.length;A++)for(u=0;u<B.length;u++)if(B[u].contains(w[A].pt)){B[u].addRing(w[A].ring);break}return B}if(A instanceof
n){B=[];for(u=0;u<A.paths.length;u++)w=p.fromJson({paths:[A.paths[u]],hasZ:!0===A.hasZ,hasM:!0===A.hasM,spatialReference:A.spatialReference.toJson()}),B.push(w);return B}if(u[0]instanceof d){A=e.fixSpatialReference(b.cloneGeometry(u[0]),v.spatialReference);for(u=0;u<A.points.length;u++)B.push(A.getPoint(u));return B}return null})};r.issimple=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,1,1);if(null===u[0])return!0;if(!(u[0]instanceof c))throw Error("Illegal Argument");
return m.isSimple(u[0])})};r.simplify=function(v,z){return t(v,z,function(A,B,u){u=e.autoCastFeatureToGeometry(u);e.pcCheck(u,1,1);if(null===u[0])return null;if(!(u[0]instanceof c))throw Error("Illegal Argument");return m.simplify(u[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(F,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.cloneGeometry=q.sameGeomType=q.convertLinearUnitsToCode=q.shapeExtent=q.convertSquareUnitsToCode=
void 0;q.convertSquareUnitsToCode=function(e){if(void 0===e)return null;if("number"===typeof e)return e;e=e.toLowerCase();e=e.replace(/\s/g,"");e=e.replace(/-/g,"");switch(e){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};q.shapeExtent=function(e){if(null===e)return null;switch(e.type){case "polygon":case "multipoint":case "polyline":return e.extent;case "point":return new a({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,
spatialReference:e.spatialReference});case "extent":return e}return null};q.convertLinearUnitsToCode=function(e){if(void 0===e)return null;if("number"===typeof e)return e;e=e.toLowerCase();e=e.replace(/\s/g,"");e=e.replace(/-/g,"");switch(e){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};q.sameGeomType=function(e,g){return e===g||"point"===e&&"esriGeometryPoint"===g||"polyline"===e&&"esriGeometryPolyline"===g||"polygon"===e&&"esriGeometryPolygon"===g||"extent"===e&&"esriGeometryEnvelope"===
g||"multipoint"===e&&"esriGeometryMultipoint"===g||"point"===g&&"esriGeometryPoint"===e||"polyline"===g&&"esriGeometryPolyline"===e||"polygon"===g&&"esriGeometryPolygon"===e||"extent"===g&&"esriGeometryEnvelope"===e||"multipoint"===g&&"esriGeometryMultipoint"===e?!0:!1};q.cloneGeometry=function(e){if(null===e)return null;var g=b.fromJson(e.toJson());e.getCacheValue("_geVersion")&&g.setCacheValue("_geVersion",e.getCacheValue("_geVersion"));return g}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),
function(F,q,a,b,e,g){function k(c,d,f){if("undefined"===typeof f||0===+f)return Math[c](d);d=+d;f=+f;if(isNaN(d)||"number"!==typeof f||0!==f%1)return NaN;d=d.toString().split("e");d=Math[c](+(d[0]+"e"+(d[1]?+d[1]-f:-f)));d=d.toString().split("e");return+(d[0]+"e"+(d[1]?+d[1]+f:f))}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(c,d){function f(h,n,p){h=e.toNumber(h);return isNaN(h)?h:isNaN(n)||isNaN(p)||n>p?NaN:h<n?n:h>p?p:h}c.number=function(h,
n){return d(h,n,function(p,l,m){e.pcCheck(m,1,2);p=m[0];return e.isNumber(p)?p:null===p?0:e.isDate(p)||e.isBoolean(p)?Number(p):e.isArray(p)?NaN:""===p||void 0===p?Number(p):e.isString(p)?void 0!==m[1]?(m=e.multiReplace(m[1],"\u2030",""),m=e.multiReplace(m,"\u00a4",""),g.parse(p,{pattern:m})):Number(p.trim()):Number(p)})};c.abs=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.abs(e.toNumber(m[0]))})};c.acos=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.acos(e.toNumber(m[0]))})};
c.asin=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.asin(e.toNumber(m[0]))})};c.atan=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.atan(e.toNumber(m[0]))})};c.atan2=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,2,2);return Math.atan2(e.toNumber(m[0]),e.toNumber(m[1]))})};c.ceil=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,2);return 2===m.length?(p=e.toNumber(m[1]),isNaN(p)&&(p=0),k("ceil",e.toNumber(m[0]),-1*p)):Math.ceil(e.toNumber(m[0]))})};
c.round=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,2);return 2===m.length?(p=e.toNumber(m[1]),isNaN(p)&&(p=0),k("round",e.toNumber(m[0]),-1*p)):Math.round(e.toNumber(m[0]))})};c.floor=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,2);return 2===m.length?(p=e.toNumber(m[1]),isNaN(p)&&(p=0),k("floor",e.toNumber(m[0]),-1*p)):Math.floor(e.toNumber(m[0]))})};c.cos=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.cos(e.toNumber(m[0]))})};c.isnan=function(h,
n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return"number"===typeof m[0]&&isNaN(m[0])})};c.exp=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.exp(e.toNumber(m[0]))})};c.log=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.log(e.toNumber(m[0]))})};c.pow=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,2,2);return Math.pow(e.toNumber(m[0]),e.toNumber(m[1]))})};c.random=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,0,0);return Math.random()})};
c.sin=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.sin(e.toNumber(m[0]))})};c.sqrt=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.sqrt(e.toNumber(m[0]))})};c.tan=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return Math.tan(e.toNumber(m[0]))})};c.defaultvalue=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,2,2);return null===m[0]||""===m[0]||void 0===m[0]?m[1]:m[0]})};c.isempty=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,
1,1);return null===m[0]||""===m[0]||void 0===m[0]?!0:!1})};c["boolean"]=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,1,1);return e.toBoolean(m[0])})};c.constrain=function(h,n){return d(h,n,function(p,l,m){e.pcCheck(m,3,3);p=e.toNumber(m[1]);l=e.toNumber(m[2]);if(e.isArray(m[0])){var r=[],t=0;for(m=m[0];t<m.length;t++)r.push(f(m[t],p,l));return r}if(e.isImmutableArray(m[0])){r=[];for(t=0;t<m[0].length();t++)r.push(f(m[0].get(t),p,l));return r}return f(m[0],p,l)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(F,q,a,b){function e(g,k,c,d){if(1===d.length){if(a.isArray(d[0]))return b.calculateStat(g,d[0],-1);if(a.isImmutableArray(d[0]))return b.calculateStat(g,d[0].toArray(),-1)}return b.calculateStat(g,d,-1)}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(g,k){g.stdev=function(c,d){return k(c,d,function(f,h,n){return e("stdev",f,h,n)})};g.variance=function(c,d){return k(c,d,function(f,h,n){return e("variance",
f,h,n)})};g.average=function(c,d){return k(c,d,function(f,h,n){return e("mean",f,h,n)})};g.mean=function(c,d){return k(c,d,function(f,h,n){return e("mean",f,h,n)})};g.sum=function(c,d){return k(c,d,function(f,h,n){return e("sum",f,h,n)})};g.min=function(c,d){return k(c,d,function(f,h,n){return e("min",f,h,n)})};g.max=function(c,d){return k(c,d,function(f,h,n){return e("max",f,h,n)})};g.distinct=function(c,d){return k(c,d,function(f,h,n){return e("distinct",f,h,n)})};g.count=function(c,d){return k(c,
d,function(f,h,n){a.pcCheck(n,1,1);if(a.isArray(n[0])||a.isString(n[0]))return n[0].length;if(a.isImmutableArray(n[0]))return n[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(F,q,a){function b(g){for(var k=0,c=0;c<g.length;c++)k+=g[c];return k/g.length}function e(g){for(var k=b(g),c=0,d=0;d<g.length;d++)c+=Math.pow(k-g[d],2);return c/g.length}Object.defineProperty(q,"__esModule",
{value:!0});q.calculateStat=q.decodeStatType=void 0;q.decodeStatType=function(g){switch(g.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};q.calculateStat=function(g,k,c){void 0===c&&(c=1E3);switch(g.toLowerCase()){case "distinct":a:{g=c;c=[];for(var d={},f=[],h=0;h<k.length;h++){if(void 0!==
k[h]&&null!==k[h]&&k[h]!==a.voidOperation){var n=k[h];if(a.isNumber(n)||a.isString(n))void 0===d[n]&&(c.push(n),d[n]=1);else{for(var p=!1,l=0;l<f.length;l++)!0===a.equalityTest(f[l],n)&&(p=!0);!1===p&&(f.push(n),c.push(n))}}if(c.length>=g&&-1!==g){k=c;break a}}k=c}return k;case "avg":case "mean":return b(a.toNumberArray(k));case "min":return Math.min.apply(Math,a.toNumberArray(k));case "sum":k=a.toNumberArray(k);for(c=g=0;c<k.length;c++)g+=k[c];return g;case "max":return Math.max.apply(Math,a.toNumberArray(k));
case "stdev":case "stddev":return Math.sqrt(e(a.toNumberArray(k)));case "var":case "variance":return e(a.toNumberArray(k));case "count":return k.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t){function x(v,z,A){if(null===v)z.updateUint8Array([0,139]);else if(c.isArray(v)){z.updateUint8Array([61]);if(A.map.has(v))v=A.map.get(v),z.updateIntArray([v^61237541]);else{A.map.set(v,A.currentLength++);for(var B=0;B<v.length;B++){var u=v[B];x(u,z,A)}A.map["delete"](v);A.currentLength--}z.updateUint8Array([199])}else if(c.isImmutableArray(v)){z.updateUint8Array([61]);if(A.map.has(v))v=A.map.get(v),z.updateIntArray([v^61237541]);else{A.map.set(v,A.currentLength++);
B=0;for(var w=v.toArray();B<w.length;B++)u=w[B],x(u,z,A);A.map["delete"](v);A.currentLength--}z.updateUint8Array([199])}else if(c.isDate(v))z.updateIntArray([v.getTime()]),z.updateUint8Array([241]);else if(c.isString(v))z.updateIntArray([v.length]),z.updateWithString(v),z.updateUint8Array([41]);else if(c.isBoolean(v))z.updateUint8Array([!0===v?1:0,113]);else if(c.isNumber(v))z.updateFloatArray([v]),z.updateUint8Array([173]);else{if(v instanceof g)throw Error("Type not supported in Hash");if(v instanceof
e)throw Error("Type not supported in Hash");if(v instanceof k){z.updateUint8Array([223]);if(A.map.has(v))v=A.map.get(v),z.updateIntArray([v^61237541]);else{A.map.set(v,A.currentLength++);B=0;for(w=v.keys();B<w.length;B++)u=w[B],z.updateIntArray([u.length]),z.updateWithString(u),z.updateUint8Array([251]),u=v.field(u),x(u,z,A),z.updateUint8Array([239]);A.map["delete"](v);A.currentLength--}z.updateUint8Array([73])}else{if(c.isFeature(v))throw Error("Type not supported in Hash");if(v instanceof l)z.updateIntArray([3833836621]),
z.updateIntArray([0]),z.updateFloatArray([v.x]),z.updateIntArray([1]),z.updateFloatArray([v.y]),z.updateIntArray([3765347959]),x(v.spatialReference.wkid,z,A);else if(v instanceof m){z.updateIntArray([1266616829]);for(B=0;B<v.rings.length;B++){w=v.rings[B];var D=[],y=null,C=null;for(u=0;u<w.length;u++){var G=v.getPoint(B,u);if(0===u)y=G;else if(C.x===G.x&&C.y===G.y)continue;C=G;u===w.length-1&&y.x===G.x&&y.y===G.y||D.push(G)}z.updateIntArray([1397116793,D.length]);for(u=0;u<D.length;u++)G=D[u],z.updateIntArray([3962308117,
u]),x(G,z,A),z.updateIntArray([2716288009]);z.updateIntArray([2278822459])}z.updateIntArray([3878477243]);x(v.spatialReference.wkid,z,A)}else if(v instanceof r){z.updateIntArray([4106883559]);for(B=0;B<v.paths.length;B++){w=v.paths[B];z.updateIntArray([1397116793,w.length]);for(u=0;u<w.length;u++)z.updateIntArray([3962308117,u]),x(v.getPoint(B,u),z,A),z.updateIntArray([2716288009]);z.updateIntArray([2278822459])}z.updateIntArray([2568784753]);x(v.spatialReference.wkid,z,A)}else if(v instanceof p){z.updateIntArray([588535921,
v.points.length]);for(u=0;u<v.points.length;u++)B=v.getPoint(u),z.updateIntArray([u]),x(B,z,A);z.updateIntArray([1700171621]);x(v.spatialReference.wkid,z,A)}else if(v instanceof n)z.updateIntArray([3483648373]),z.updateIntArray([0]),z.updateFloatArray([v.xmax]),z.updateIntArray([1]),z.updateFloatArray([v.xmin]),z.updateIntArray([2]),z.updateFloatArray([v.ymax]),z.updateIntArray([3]),z.updateFloatArray([v.ymin]),z.updateIntArray([3622027469]),x(v.spatialReference.wkid,z,A);else if(v instanceof t)z.updateIntArray([14]),
void 0!==v.wkid&&null!==v.wkid&&z.updateIntArray([v.wkid]),v.wkt&&z.updateWithString(v.wkt);else{if(c.isFunctionParameter(v))throw Error("Type not supported in Hash");if(c.isFeatureSet(v))throw Error("Type not supported in Hash");c.isFeatureSetCollection(v);throw Error("Type not supported in Hash");}}}}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(v,z){v.portal=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);return new e(c.toString(D[0]))})};
v.trim=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);return c.toString(D[0]).trim()})};v.tohex=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);u=c.toNumber(D[0]);return isNaN(u)?u:u.toString(16)})};v.upper=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);return c.toString(D[0]).toUpperCase()})};v.proper=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,2);u=1;2===D.length&&"firstword"===c.toString(D[1]).toLowerCase()&&(u=2);w=/\s/;D=c.toString(D[0]);for(var y=
"",C=!0,G=0;G<D.length;G++){var I=D[G];w.test(I)?1===u&&(C=!0):I.toUpperCase()!==I.toLowerCase()&&(C?(I=I.toUpperCase(),C=!1):I=I.toLowerCase());y+=I}return y})};v.lower=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);return c.toString(D[0]).toLowerCase()})};v.guid=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,0,1);if(0<D.length)switch(c.toString(D[0]).toLowerCase()){case "digits":return c.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return c.generateUUID();
case "digits-hyphen-parentheses":return"("+c.generateUUID()+")"}return"{"+c.generateUUID()+"}"})};v.console=function(A,B){return z(A,B,function(u,w,D){0!==D.length&&(1===D.length?A.console(c.toString(D[0])):A.console(c.toString(D)));return c.voidOperation})};v.mid=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,2,3);u=c.toNumber(D[1]);if(isNaN(u))return"";0>u&&(u=0);if(2===D.length)return c.toString(D[0]).substr(u);w=c.toNumber(D[2]);if(isNaN(w))return"";0>w&&(w=0);return c.toString(D[0]).substr(u,
w)})};v.find=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,2,3);u=0;if(2<D.length){u=c.toNumber(c.defaultUndefined(D[2],0));if(isNaN(u))return-1;0>u&&(u=0)}return c.toString(D[1]).indexOf(c.toString(D[0]),u)})};v.left=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,2,2);u=c.toNumber(D[1]);if(isNaN(u))return"";0>u&&(u=0);return c.toString(D[0]).substr(0,u)})};v.right=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,2,2);u=c.toNumber(D[1]);if(isNaN(u))return"";0>u&&(u=0);return c.toString(D[0]).substr(-1*
u,u)})};v.split=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,2,4);u=c.toNumber(c.defaultUndefined(D[2],-1));w=c.toBoolean(c.defaultUndefined(D[3],!1));-1===u||null===u||!0===w?D=c.toString(D[0]).split(c.toString(D[1])):(isNaN(u)&&(u=-1),-1>u&&(u=-1),D=c.toString(D[0]).split(c.toString(D[1]),u));if(!1===w)return D;w=[];for(var y=0;y<D.length&&!(-1!==u&&w.length>=u);y++)""!==D[y]&&void 0!==D[y]&&w.push(D[y]);return w})};v.text=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,2);return c.toStringExplicit(D[0],
D[1])})};v.concatenate=function(A,B){return z(A,B,function(u,w,D){u=[];if(1>D.length)return"";if(c.isArray(D[0])){w=c.defaultUndefined(D[2],"");for(var y=0;y<D[0].length;y++)u[y]=c.toStringExplicit(D[0][y],w);return 1<D.length?u.join(D[1]):u.join("")}if(c.isImmutableArray(D[0])){w=c.defaultUndefined(D[2],"");for(y=0;y<D[0].length();y++)u[y]=c.toStringExplicit(D[0].get(y),w);return 1<D.length?u.join(D[1]):u.join("")}for(y=0;y<D.length;y++)u[y]=c.toStringExplicit(D[y]);return u.join("")})};v.reverse=
function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);if(c.isArray(D[0]))return u=D[0].slice(0),u.reverse(),u;if(c.isImmutableArray(D[0]))return u=D[0].toArray().slice(0),u.reverse(),u;throw Error("Invalid Parameter");})};v.replace=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,3,4);u=c.toString(D[0]);w=c.toString(D[1]);var y=c.toString(D[2]);return(4===D.length?c.toBoolean(D[3]):1)?c.multiReplace(u,w,y):u.replace(w,y)})};v.schema=function(A,B){return z(A,B,function(u,w,D){if(c.isFeature(D[0]))return(u=
c.featureSchema(D[0]))?k.convertObjectToArcadeDictionary(u):null;throw Error("Invalid Parameter");})};v.subtypes=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);if(c.isFeature(D[0]))return(u=c.featureSubtypes(D[0]))?k.convertObjectToArcadeDictionary(u):null;throw Error("Invalid Parameter");})};v.subtypecode=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);if(c.isFeature(D[0])){w=c.featureSubtypes(D[0]);if(!w)return null;if(w.subtypeField&&D[0].hasField(w.subtypeField))for(D=
D[0].field(w.subtypeField),u=0,w=w.subtypes;u<w.length;u++){var y=w[u];if(y.code===D)return y.code}return null}throw Error("Invalid Parameter");})};v.subtypename=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);if(c.isFeature(D[0])){w=c.featureSubtypes(D[0]);if(!w)return"";if(w.subtypeField&&D[0].hasField(w.subtypeField))for(D=D[0].field(w.subtypeField),u=0,w=w.subtypes;u<w.length;u++){var y=w[u];if(y.code===D)return y.name}return""}throw Error("Invalid Parameter");})};v.gdbversion=function(A,
B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);if(c.isFeature(D[0]))return D[0].gdbVersion();throw Error("Invalid Parameter");})};v.domain=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,2,3);if(c.isFeature(D[0]))return(u=c.featureFullDomain(D[0],c.toString(D[1]),void 0===D[2]?void 0:c.toNumber(D[2])))&&u.domain?"coded-value"===u.domain.type||"codedValue"===u.domain.type?k.convertObjectToArcadeDictionary({type:"codedValue",name:u.domain.name,dataType:d.layerFieldEsriConstants[u.field.type],
codedValues:u.domain.codedValues.map(function(y){return{name:y.name,code:y.code}})}):k.convertObjectToArcadeDictionary({type:"range",name:u.domain.name,dataType:d.layerFieldEsriConstants[u.field.type],min:u.domain.min,max:u.domain.max}):null;throw Error("Invalid Parameter");})};v.domainname=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,2,4);if(c.isFeature(D[0]))return c.featureDomainValueLookup(D[0],c.toString(D[1]),D[2],void 0===D[3]?void 0:c.toNumber(D[3]));throw Error("Invalid Parameter");
})};v.domaincode=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,2,4);if(c.isFeature(D[0]))return c.featureDomainCodeLookup(D[0],c.toString(D[1]),D[2],void 0===D[3]?void 0:c.toNumber(D[3]));throw Error("Invalid Parameter");})};v.urlencode=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);if(null===D[0])return"";if(D[0]instanceof k){u="";w=0;for(var y=D[0].keys();w<y.length;w++){var C=y[w],G=D[0].field(C);""!==u&&(u+="\x26");u=null===G?u+(encodeURIComponent(C)+"\x3d"):u+(encodeURIComponent(C)+
"\x3d"+encodeURIComponent(G))}return u}return encodeURIComponent(c.toString(D[0]))})};v.hash=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);u=new h.XXH(0);x(D[0],u,{map:new Map,currentLength:0});return u.digest()})};v.convertdirection=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,3,3);return f.convertDirection(D[0],D[1],D[2])})};v.fromjson=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,1);if(!1===c.isString(D[0]))throw Error("Invalid Parameter");return k.convertJsonToArcade(JSON.parse(c.toString(D[0])))})};
v.expects=function(A,B){return z(A,B,function(u,w,D){if(1>D.length)throw Error("Function called with wrong number of Parameters");return c.voidOperation})};v.tocharcode=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,2);u=c.toNumber(c.defaultUndefined(D[1],0));w=c.toString(D[0]);if(0===w.length&&1===D.length)return null;if(w.length<=u||0>u)throw Error("Illegal argument");return w.charCodeAt(u)})};v.tocodepoint=function(A,B){return z(A,B,function(u,w,D){c.pcCheck(D,1,2);u=c.toNumber(c.defaultUndefined(D[1],
0));w=c.toString(D[0]);if(0===w.length&&1===D.length)return null;if(w.length<=u||0>u)throw Error("Illegal argument");return w.codePointAt(u)})};v.fromcharcode=function(A,B){return z(A,B,function(u,w,D){if(1>D.length)throw Error("Function called with wrong number of Parameters");u=D.map(function(y){return Math.trunc(c.toNumber(y))}).filter(function(y){return 0<=y&&65535>=y});return 0===u.length?null:String.fromCharCode.apply(null,u)})};v.fromcodepoint=function(A,B){return z(A,B,function(u,w,D){if(1>
D.length)throw Error("Function called with wrong number of Parameters");try{var y=D.map(function(C){return Math.trunc(c.toNumber(C))}).filter(function(C){return 1114111>=C&&C>>>0===C})}catch(C){return null}return 0===y.length?null:String.fromCodePoint.apply(null,y)})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(F,q,a,b){function e(S){if(!1===b.isString(S))throw Error("Invalid Parameter");return S}function g(S,X){var la=
Math.pow(10,X);return Math.round(S*la)/la}function k(S){S=+S;return isFinite(S)?S-S%1||(0>S?-0:0===S?S:0):S}function c(S){var X=parseFloat(S.toString().replace(k(S).toString(),"0"))*((0<S)-(0>S)||+S);return 0>S?{fraction:X,integer:Math.ceil(S)}:{fraction:X,integer:Math.floor(S)}}function d(S,X){switch(S){case 0:return"SHORT"===X?"N":"North";case 1:return"SHORT"===X?"E":"East";case 2:return"SHORT"===X?"S":"South";case 3:return"SHORT"===X?"W":"West"}}function f(S,X,la){for(;S.length<la;)S=X+S;return S}
function h(S,X){return S-Math.floor(S/X)*X}function n(S){switch(S){case 6:case 1:return 360;case 4:return G;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function p(S){switch(S.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");}function l(S){switch(S.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function m(S,X,la){var na=null;switch(X){case 1:na=q.preciseMultiply(S,3600);break;case 2:na=S;break;case 5:na=q.preciseMultiply(S,3240);break;case 4:na=q.preciseMultiply(S,I);break;default:throw Error("Unnexpected evaluation");
}switch(la){case 1:return q.preciseDivide(na,3600);case 2:return na;case 5:return q.preciseDivide(na,3240);case 4:return na/I;default:throw Error("Unnexpected evaluation");}}function r(S){switch(S){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function t(S){switch(b.toNumber(S)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function x(S){switch(S.toUpperCase().trim()){case "N":case "NORTH":return 0;
case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function v(S){S=parseFloat(S);if(b.isNumber(S)){if(isNaN(S))throw Error("Invalid conversion");return S}throw Error("Invalid conversion");}function z(S,X,la){var na=3===la,qa=null,ta=null,ya=0,za=0;za=0;if(na){if(2>S.length)throw Error("Conversion Error");za=1;(ta=t(b.toString(S[S.length-1])))?(qa=ta.first,ta=ta.second):(ya=1,qa=x(b.toString(S[0])),ta=x(b.toString(S[S.length-1])));if(null===qa||null===
ta)throw Error("Invalid Conversion");}switch(X){case 1:case 4:case 5:if(0===S.length)throw Error("Invalid Conversion");return na?ba.createFromAngleMeridianAndDirection(Q.createFromAngleAndUnits(v(S[ya]),r(X)),qa,ta):ba.createFromAngleAndDirection(Q.createFromAngleAndUnits(v(S[ya]),r(X)),la);case 3:za=S.length-za-ya;if(3===za)return S=Q.createFromDegreesMinutesSeconds(v(S[ya]),v(S[ya+1]),v(S[ya+2])),na?ba.createFromAngleMeridianAndDirection(S,qa,ta):ba.createFromAngleAndDirection(S,la);if(1===za)return S=
v(S[ya]),S=ea.numberToDms(S),S=Q.createFromDegreesMinutesSeconds(S.m_degrees,S.m_minutes,S.m_seconds),na?ba.createFromAngleMeridianAndDirection(S,qa,ta):ba.createFromAngleAndDirection(S,la)}throw Error("Conversion Error");}function A(S){for(var X=[" ","-","/","'",'"',"\\","^","\u00b0",O,"\t","\r","\n","*"],la="",na=0;na<S.length;na++){var qa=S.charAt(na);la=X.includes(qa)?la+"RRSPLITRRSPLITRR":la+qa}return la.split("RRSPLITRRSPLITRR").filter(function(ta){return""!==ta})}function B(S,X,la){for(var na=
{padding:0,rounding:0,newpos:X},qa=!1;X<S.length;){var ta=S[X];if(ta===la)qa?na.rounding++:na.padding++,X++;else if("."===ta)qa=!0,X++;else break}na.newpos=X-1;return na}Object.defineProperty(q,"__esModule",{value:!0});q.convertDirection=q.preciseDivide=q.preciseMultiply=q.preciseMinus=q.preciseAdd=void 0;var u=function(S){return function(X,la,na){na=na||14;return+S(X,la).toFixed(na)}},w=function(S,X){return S+X},D=function(S,X){return S-X},y=function(S,X){return S*X},C=function(S,X){return S/X};
q.preciseAdd=function(S,X,la){return u(w)(S,X,la)};q.preciseMinus=function(S,X,la){return u(D)(S,X,la)};q.preciseMultiply=function(S,X,la){return u(y)(S,X,la)};q.preciseDivide=function(S,X,la){return u(C)(S,X,la)};var G=2*Math.PI,I=648E3/Math.PI,O=String.fromCharCode(7501),R;(function(S){S[S.north=0]="north";S[S.east=1]="east";S[S.south=2]="south";S[S.west=3]="west"})(R||(R={}));var Z;(function(S){S[S.decimal_degrees=1]="decimal_degrees";S[S.seconds=2]="seconds";S[S.degrees_minutes_seconds=3]="degrees_minutes_seconds";
S[S.radians=4]="radians";S[S.gradians=5]="gradians";S[S.truncated_degrees=6]="truncated_degrees";S[S.fractional_degree_minutes=7]="fractional_degree_minutes";S[S.fractional_minute_seconds=8]="fractional_minute_seconds"})(Z||(Z={}));var W;(function(S){S[S.north_azimuth=1]="north_azimuth";S[S.polar=2]="polar";S[S.quadrant=3]="quadrant";S[S.south_azimuth=4]="south_azimuth"})(W||(W={}));var da;(function(S){S[S.meridian=0]="meridian";S[S.direction=1]="direction"})(da||(da={}));var ea=function(){function S(X,
la,na){this.m_degrees=X;this.m_minutes=la;this.m_seconds=na}S.prototype.getField=function(X){switch(X){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};S.secondsToDMS=function(X){var la=c(X).fraction;X=c(X).integer;var na=Math.floor(X/3600);X-=3600*na;var qa=Math.floor(X/60);return new S(na,qa,X-60*qa+la)};S.numberToDms=function(X){var la=c(X).fraction;X=c(X).integer;var na=q.preciseMultiply(c(100*
la).fraction,100);la=c(100*la).integer;return new S(X,la,na)};S.prototype.format=function(X,la){var na=g(this.m_seconds,la),qa=this.m_minutes,ta=this.m_degrees;if(2===X||8===X)60<=na&&(na-=60,++qa),60<=qa&&(qa=0,++ta),360<=ta&&(ta=0);else if(7===X)na=0,qa=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ta=this.m_degrees,60<=qa&&(qa=0,++ta),360<=ta&&(ta=0);else if(1===X||6===X)na=q.preciseDivide(this.m_seconds,3600),qa=q.preciseDivide(this.m_minutes,60),ta=Math.round(this.m_degrees+qa+na),na=qa=
0;return new S(ta,qa,na)};S.dmsToSeconds=function(X,la,na){return 3600*X+60*la+na};return S}(),Y=function(){function S(X,la,na){this.meridian=X;this.angle=la;this.direction=na}S.prototype.fetchAzimuth=function(X){return X===da.meridian?this.meridian:this.direction};return S}(),ba=function(){function S(X){this.m_angle=X}S.createFromAngleAndDirection=function(X,la){return new S(new Q(S._convertDirectionFormat(X.extractAngularUnits(2),la,1)))};S.prototype.getAngle=function(X){var la=this.m_angle.extractAngularUnits(2);
switch(X){case 1:case 4:case 2:return X=new Q(S._convertDirectionFormat(la,1,X));case 3:return X=S.secondsNorthAzimuthToQuadrant(la),X=new Q(X.angle)}};S.prototype.getMeridian=function(X){var la=this.m_angle.extractAngularUnits(2);switch(X){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return S.secondsNorthAzimuthToQuadrant(la).meridian}};S.prototype.getDirection=function(X){var la=this.m_angle.extractAngularUnits(2);switch(X){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return S.secondsNorthAzimuthToQuadrant(la).direction}};
S.secondsNorthAzimuthToQuadrant=function(X){var la=324E3>=X||972E3<=X?0:2;return new Y(la,0===la?Math.min(1296E3-X,X):Math.abs(X-648E3),648E3<X?3:1)};S.createFromAngleMeridianAndDirection=function(X,la,na){return new S(new Q(S.secondsQuadrantToNorthAzimuth(X.extractAngularUnits(2),la,na)))};S.secondsQuadrantToNorthAzimuth=function(X,la,na){return 0===la?1===na?X:1296E3-X:1===na?648E3-X:648E3+X};S._convertDirectionFormat=function(X,la,na){var qa=0;switch(la){case 1:qa=X;break;case 2:qa=324E3-X;break;
case 3:throw Error("Unnexpected evaluation");case 4:qa=X+648E3}X=0;switch(na){case 1:X=qa;break;case 2:X=324E3-qa;break;case 3:throw Error("Unnexpected evaluation");case 4:X=qa-648E3}X%=1296E3;return 0>X?1296E3+X:X};return S}(),Q=function(){function S(X){this.m_seconds=X}S.createFromAngleAndUnits=function(X,la){return new S(m(X,la,2))};S.prototype.extractAngularUnits=function(X){return m(this.m_seconds,2,r(X))};S.createFromDegreesMinutesSeconds=function(X,la,na){return new S(q.preciseAdd(q.preciseAdd(q.preciseMultiply(X,
3600),q.preciseMultiply(la,60)),na))};return S}(),fa=function(){function S(X,la,na,qa){this.m_view=X;this.m_angle=la;this.m_merdian=na;this.m_direction=qa;this.m_formatted_dms=this.m_dms=null}S.createFromStringAndBearing=function(X,la,na){return new S(X,la.getAngle(na),la.getMeridian(na),la.getDirection(na))};S.prototype.fetchAngle=function(){return this.m_angle};S.prototype.fetchMeridian=function(){return this.m_merdian};S.prototype.fetchDirection=function(){return this.m_direction};S.prototype.fetchView=
function(){return this.m_view};S.prototype.fetchDms=function(){null===this.m_dms&&this._calculateDms();return this.m_dms};S.prototype.fetchFormattedDms=function(){null===this.m_formatted_dms&&this._calculateDms();return this.m_formatted_dms};S.prototype._calculateDms=function(){var X=null,la=6,na=0;for(X=0;X<this.m_view.length;X++){var qa=this.m_view[X];switch(qa){case "m":X=B(this.m_view,X,qa);la=6===la?7:la;X=X.newpos;continue;case "s":X=B(this.m_view,X,qa),la=8,na=na<X.rounding?X.rounding:na,X=
X.newpos}}this.m_dms=ea.secondsToDMS(this.m_angle.extractAngularUnits(2));this.m_formatted_dms=ea.secondsToDMS(this.m_angle.extractAngularUnits(2)).format(la,na)};return S}();q.convertDirection=function(S,X,la){if(!(X instanceof a))throw Error("Invalid Parameter");if(!1===X.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===X.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var na=p(e(X.field("directiontype")));X=l(e(X.field("angletype")));
if(b.isNumber(S)){S=b.toNumber(S);if(3===na)throw Error("Conversion error");3===X?(S=ea.numberToDms(S),X=ba.createFromAngleAndDirection(Q.createFromDegreesMinutesSeconds(S.m_degrees,S.m_minutes,S.m_seconds),na)):X=ba.createFromAngleAndDirection(Q.createFromAngleAndUnits(S,r(X)),na)}else if(b.isString(S))X=z(A(S),X,na);else if(b.isArray(S))X=z(S,X,na);else if(b.isImmutableArray(S))X=z(S.toArray(),X,na);else throw Error("Conversion Error");if(!(la instanceof a))throw Error("Invalid Parameter");if(!1===
la.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===la.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");na=p(e(la.field("directiontype")));S=la.hasField("angleType")?l(e(la.field("angletype"))):null;var qa=e(la.field("outputType")).toUpperCase().trim();if(!na||!qa)throw Error("Conversion error");if(!(S||"TEXT"===qa&&la.hasField("format")))throw Error("Invalid unit");switch(qa){case "VALUE":if(3===na||3===S)return la=X,X=la.getAngle(na),
3===na&&3===S?(S=ea.secondsToDMS(X.extractAngularUnits(2)),na=[d(la.getMeridian(na),"SHORT"),S.m_degrees,S.m_minutes,S.m_seconds,d(la.getDirection(na),"SHORT")]):3===S?(S=ea.secondsToDMS(X.extractAngularUnits(2)),na=[S.m_degrees,S.m_minutes,S.m_seconds]):na=3===na?[d(la.getMeridian(na),"SHORT"),X.extractAngularUnits(S),d(la.getDirection(na),"SHORT")]:[X.extractAngularUnits(S)],na;la=X;if((X=r(S))&&3!==S)na=la.getAngle(na).extractAngularUnits(X);else throw Error("Conversion Error");return na;case "TEXT":qa=
"";la.hasField("format")&&(qa=b.toString(la.field("format")));if(null===qa||""===qa){la="";switch(S){case 1:la=3===na?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:la=3===na?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:la="R.RR";break;case 5:la="GGG.GG"+O;break;default:throw Error("Conversion error");}3===na&&(la="p "+la+" b");qa=la}la=X;S=qa;var ta="",ya=null,za=null;X=fa.createFromStringAndBearing(S,la,na);qa={D:1,d:6,m:7,s:8,R:4,G:5};for(za=0;za<S.length;za++){var va=S[za];switch(va){case "[":ya=
S;va={escaped:"",newpos:za};for(za++;za<ya.length;){var Fa=ya[za];za++;if("]"===Fa)break;va.escaped+=Fa}va.newpos=za-1;ya=va;ta+=ya.escaped;za=ya.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":ya=B(S,za,va);za=la.getAngle(na);a:{va=qa[va];Fa=ya.padding;var Ea=ya.rounding,ra=X,M=null;switch(va){case 1:case 4:case 5:M=h(g(za.extractAngularUnits(va),Ea),n(va));za=f(M.toFixed(Ea),"0",Fa+Ea+(0<Ea?1:0));break a;case 6:case 7:M=h(ra.fetchFormattedDms().getField(va),n(va));za=f(M.toFixed(Ea),
"0",Fa+Ea+(0<Ea?1:0));break a;case 8:M=h(g(ra.fetchDms().getField(va),Ea),n(va));za=f(M.toFixed(Ea),"0",Fa+Ea+(0<Ea?1:0));break a;default:throw Error("Unnexepected evaluation");}}ta+=za;za=ya.newpos;continue;case "P":case "p":ta+=d(X.fetchMeridian(),"p"===va?"SHORT":"LONG");continue;case "B":case "b":ta+=d(X.fetchDirection(),"b"===va?"SHORT":"LONG");continue;default:ta+=va}}return ta;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],
function(F,q){function a(e){for(var g=[],k=0,c=e.length;k<c;k++){var d=e.charCodeAt(k);128>d?g.push(d):2048>d?g.push(192|d>>6,128|d&63):55296>d||57344<=d?g.push(224|d>>12,128|d>>6&63,128|d&63):(k++,d=65536+((d&1023)<<10|e.charCodeAt(k)&1023),g.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|d&63))}return new Uint8Array(g)}Object.defineProperty(q,"__esModule",{value:!0});q.XXH=void 0;var b=function(){function e(g){this.seed=g;this.totallen=0;this.bufs=[];this.init()}e.prototype.init=function(){this.bufs=
[];this.totallen=0;return this};e.prototype.updateFloatArray=function(g){for(var k=[],c=0;c<g.length;c++){var d=g[c];isNaN(d)?k.push("NaN"):Infinity===d?k.push("Infinity"):-Infinity===d?k.push("-Infinity"):0===d?k.push("0"):k.push(d.toString(16))}this.update(a(k.join("")))};e.prototype.updateIntArray=function(g){g=Int32Array.from(g);this.update(new Uint8Array(g.buffer))};e.prototype.updateUint8Array=function(g){this.update(Uint8Array.from(g))};e.prototype.updateWithString=function(g){return this.update(a(g))};
e.prototype.update=function(g){this.bufs.push(g);this.totallen+=g.length;return this};e.prototype.digest=function(){for(var g=new Uint8Array(this.totallen),k=0,c=0,d=this.bufs;c<d.length;c++){var f=d[c];g.set(f,k);k+=f.length}this.init();return this._xxHash32(g,this.seed)};e.prototype._xxHash32=function(g,k){void 0===k&&(k=0);var c=k+374761393&4294967295,d=0;if(16<=g.length){c=[k+2654435761+2246822519&4294967295,k+2246822519&4294967295,k+0&4294967295,k-2654435761&4294967295];var f=g.length-16,h=0;
for(d=0;(d&4294967280)<=f;d+=4){var n=d,p=g[n+0]+(g[n+1]<<8);n=g[n+2]+(g[n+3]<<8);p=c[h]+(2246822519*p+(2246822519*n<<16))&4294967295;p=p<<13|p>>>19;c[h]=2654435761*(p&65535)+(2654435761*(p>>>16)<<16)&4294967295;h=h+1&3}c=(c[0]<<1|c[0]>>>31)+(c[1]<<7|c[1]>>>25)+(c[2]<<12|c[2]>>>20)+(c[3]<<18|c[3]>>>14)&4294967295}c=c+g.length&4294967295;for(h=g.length-4;d<=h;d+=4)n=d,p=g[n+0]+(g[n+1]<<8),n=g[n+2]+(g[n+3]<<8),c=c+(3266489917*p+(3266489917*n<<16))&4294967295,c=c<<17|c>>>15,c=668265263*(c&65535)+(668265263*
(c>>>16)<<16)&4294967295;for(;d<g.length;++d)h=g[d],c+=374761393*h,c=c<<11|c>>>21,c=2654435761*(c&65535)+(2654435761*(c>>>16)<<16)&4294967295;c^=c>>>15;c=(2246822519*(c&65535)&4294967295)+(2246822519*(c>>>16)<<16);c^=c>>>13;c=(3266489917*(c&65535)&4294967295)+(3266489917*(c>>>16)<<16);c^=c>>>16;return 0>c?c+4294967296:c};return e}();q.XXH=b})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v,z,A,B,u,w,D,y,C,G,I){function O(U,T){for(var ha=[],ka=0;ka<T.arguments.length;ka++)ha.push(Z(U,T.arguments[ka]));return ha}function R(U,T,ha){try{return!0===T.preparsed?ha(U,null,T.arguments):ha(U,T,O(U,T))}catch(ka){throw ka;}}function Z(U,T){try{switch(T.type){case "EmptyStatement":return l.voidOperation;case "VariableDeclarator":var ha=null===T.init?null:Z(U,T.init);ha===l.voidOperation&&(ha=null);if("Identifier"!==T.id.type)throw Error("Can only assign a regular variable");
var ka=T.id.name.toLowerCase();null!==U.localScope?U.localScope[ka]={value:ha,valueset:!0,node:T.init}:U.globalScope[ka]={value:ha,valueset:!0,node:T.init};return l.voidOperation;case "VariableDeclaration":for(var K=0;K<T.declarations.length;K++)Z(U,T.declarations[K]);return l.voidOperation;case "BlockStatement":a:{var P=l.voidOperation;for(K=0;K<T.body.length;K++)if(P=Z(U,T.body[K]),P instanceof l.ReturnResult||P===l.breakResult||P===l.continueResult){var ca=P;break a}ca=P}return ca;case "FunctionDeclaration":var ia=
T.id.name.toLowerCase();U.globalScope[ia]={valueset:!0,node:null,value:new h(T,U)};return l.voidOperation;case "ReturnStatement":if(null===T.argument)var oa=new l.ReturnResult(l.voidOperation);else{var Aa=Z(U,T.argument);oa=new l.ReturnResult(Aa)}return oa;case "IfStatement":if("AssignmentExpression"===T.test.type||"UpdateExpression"===T.test.type)throw Error(m.nodeErrorMessage(T.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Ca=Z(U,T.test);if(!0===Ca)var Na=Z(U,T.consequent);else if(!1===
Ca)Na=null!==T.alternate?Z(U,T.alternate):l.voidOperation;else throw Error(m.nodeErrorMessage(T,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return Na;case "ExpressionStatement":if("AssignmentExpression"===T.expression.type||"UpdateExpression"===T.expression.type)var Ja=Z(U,T.expression);else{var Ia=Z(U,T.expression);Ja=Ia===l.voidOperation?l.voidOperation:new l.ImplicitResult(Ia)}return Ja;case "AssignmentExpression":var wa=Z(U,T.right);K=null;var ua="";if("MemberExpression"===T.left.type){K=
Z(U,T.left.object);!0===T.left.computed?ua=Z(U,T.left.property):"Identifier"===T.left.property.type&&(ua=T.left.property.name);if(l.isArray(K))if(l.isNumber(ua)){0>ua&&(ua=K.length+ua);if(0>ua||ua>K.length)throw Error("Assignment outside of array bounds");if(ua===K.length&&"\x3d"!==T.operator)throw Error("Invalid Parameter");K[ua]=da(wa,T.operator,K[ua],T)}else throw Error("Invalid Parameter");else if(K instanceof d){if(!1===l.isString(ua))throw Error("Dictionary accessor must be a string");if(!0===
K.hasField(ua))K.setField(ua,da(wa,T.operator,K.field(ua),T));else{if("\x3d"!==T.operator)throw Error("Invalid Parameter");K.setField(ua,da(wa,T.operator,null,T))}}else if(l.isFeature(K)){if(!1===l.isString(ua))throw Error("Feature accessor must be a string");if(!0===K.hasField(ua))K.setField(ua,da(wa,T.operator,K.field(ua),T));else{if("\x3d"!==T.operator)throw Error("Invalid Parameter");K.setField(ua,da(wa,T.operator,null,T))}}else{if(l.isImmutableArray(K))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}var Pa=l.voidOperation}else if(K=T.left.name.toLowerCase(),null!==U.localScope&&void 0!==U.localScope[K])U.localScope[K]={value:da(wa,T.operator,U.localScope[K].value,T),valueset:!0,node:T.right},Pa=l.voidOperation;else if(void 0!==U.globalScope[K])U.globalScope[K]={value:da(wa,T.operator,U.globalScope[K].value,T),valueset:!0,node:T.right},Pa=l.voidOperation;else throw Error("Variable not recognised");return Pa;case "UpdateExpression":K=null;ua="";if("MemberExpression"===T.argument.type){K=Z(U,T.argument.object);
!0===T.argument.computed?ua=Z(U,T.argument.property):"Identifier"===T.argument.property.type&&(ua=T.argument.property.name);if(l.isArray(K))if(l.isNumber(ua)){0>ua&&(ua=K.length+ua);if(0>ua||ua>=K.length)throw Error("Assignment outside of array bounds");var Ma=l.toNumber(K[ua]);K[ua]="++"===T.operator?Ma+1:Ma-1}else throw Error("Invalid Parameter");else if(K instanceof d){if(!1===l.isString(ua))throw Error("Dictionary accessor must be a string");if(!0===K.hasField(ua))Ma=l.toNumber(K.field(ua)),K.setField(ua,
"++"===T.operator?Ma+1:Ma-1);else throw Error("Invalid Parameter");}else if(l.isFeature(K)){if(!1===l.isString(ua))throw Error("Feature accessor must be a string");if(!0===K.hasField(ua))Ma=l.toNumber(K.field(ua)),K.setField(ua,"++"===T.operator?Ma+1:Ma-1);else throw Error("Invalid Parameter");}else{if(l.isImmutableArray(K))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var Ya=!1===T.prefix?Ma:"++"===T.operator?Ma+1:Ma-1}else{K="Identifier"===T.argument.type?T.argument.name.toLowerCase():
"";if(!K)throw Error("Invalid identifier");if(null!==U.localScope&&void 0!==U.localScope[K])Ma=l.toNumber(U.localScope[K].value),U.localScope[K]={value:"++"===T.operator?Ma+1:Ma-1,valueset:!0,node:T},Ya=!1===T.prefix?Ma:"++"===T.operator?Ma+1:Ma-1;else if(void 0!==U.globalScope[K])Ma=l.toNumber(U.globalScope[K].value),U.globalScope[K]={value:"++"===T.operator?Ma+1:Ma-1,valueset:!0,node:T},Ya=!1===T.prefix?Ma:"++"===T.operator?Ma+1:Ma-1;else throw Error("Variable not recognised");}return Ya;case "BreakStatement":return l.breakResult;
case "ContinueStatement":return l.continueResult;case "TemplateElement":return T.value?T.value.cooked:"";case "TemplateLiteral":var Ua="",Va=0;Pa=0;for(K=T.quasis;Pa<K.length;Pa++)if(ua=K[Pa],Ua+=ua.value?ua.value.cooked:"",!1===ua.tail){var Wa=T.expressions[Va]?l.toString(Z(U,T.expressions[Va])):"";Ua+=Wa;Va++}return Ua;case "ForStatement":null!==T.init&&Z(U,T.init);Va={testResult:!0,lastAction:l.voidOperation};do b:{K=U;ua=T;Wa=Va;if(null!==ua.test){Wa.testResult=Z(K,ua.test);if(!1===Wa.testResult)break b;
if(!0!==Wa.testResult)throw Error(m.nodeErrorMessage(ua,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Wa.lastAction=Z(K,ua.body);Wa.lastAction===l.breakResult?Wa.testResult=!1:Wa.lastAction instanceof l.ReturnResult?Wa.testResult=!1:null!==ua.update&&Z(K,ua.update)}while(!0===Va.testResult);Ua=Va.lastAction instanceof l.ReturnResult?Va.lastAction:l.voidOperation;return Ua;case "ForInStatement":return W(U,T);case "Identifier":return S(U,T);case "MemberExpression":return Y(U,T);case "Literal":return T.value;
case "CallExpression":return X(U,T);case "UnaryExpression":return ba(U,T);case "BinaryExpression":return Q(U,T);case "LogicalExpression":return fa(U,T);case "ArrayExpression":try{for(K=[],ua=0;ua<T.elements.length;ua++){var Ba=Z(U,T.elements[ua]);if(l.isFunctionParameter(Ba))throw Error(m.nodeErrorMessage(T,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Ba===l.voidOperation?K.push(null):K.push(Ba)}}catch(Ka){throw Ka;}return K;case "ObjectExpression":K={};for(ua=0;ua<T.properties.length;ua++){var La=Z(U,T.properties[ua]);
if(l.isFunctionParameter(La.value))throw Error("Illegal Argument");if(!1===l.isString(La.key))throw Error("Illegal Argument");K[La.key.toString()]=La.value===l.voidOperation?null:La.value}var Ga=new d(K);Ga.immutable=!1;return Ga;case "Property":return{key:"Identifier"===T.key.type?T.key.name:Z(U,T.key),value:Z(U,T.value)};default:throw Error(m.nodeErrorMessage(T,"RUNTIME","UNREOGNISED"));}}catch(Ka){throw Ka;}}function W(U,T){var ha=Z(U,T.right);"VariableDeclaration"===T.left.type&&Z(U,T.left);var ka=
null,K="";if("VariableDeclaration"===T.left.type){var P=T.left.declarations[0].id;"Identifier"===P.type&&(K=P.name)}else"Identifier"===T.left.type&&(K=T.left.name);if(!K)throw Error(m.nodeErrorMessage(T,"RUNTIME","INVALIDVARIABLE"));K=K.toLowerCase();null!==U.localScope&&void 0!==U.localScope[K]&&(ka=U.localScope[K]);null===ka&&void 0!==U.globalScope[K]&&(ka=U.globalScope[K]);if(null===ka)throw Error(m.nodeErrorMessage(T,"RUNTIME","VARIABLENOTDECLARED"));if(l.isArray(ha)||l.isString(ha)){ha=ha.length;
for(P=0;P<ha;P++){ka.value=P;K=Z(U,T.body);if(K===l.breakResult)break;if(K instanceof l.ReturnResult)return K}return l.voidOperation}if(l.isImmutableArray(ha)){for(P=0;P<ha.length();P++){ka.value=P;K=Z(U,T.body);if(K===l.breakResult)break;if(K instanceof l.ReturnResult)return K}return l.voidOperation}if(ha instanceof d||l.isFeature(ha))for(ha=ha.keys(),P=0;P<ha.length;P++){ka.value=ha[P];K=Z(U,T.body);if(K===l.breakResult)break;if(K instanceof l.ReturnResult)return K}else return l.voidOperation}function da(U,
T,ha,ka){switch(T){case "\x3d":return U===l.voidOperation?null:U;case "/\x3d":return l.toNumber(ha)/l.toNumber(U);case "*\x3d":return l.toNumber(ha)*l.toNumber(U);case "-\x3d":return l.toNumber(ha)-l.toNumber(U);case "+\x3d":return l.isString(ha)||l.isString(U)?l.toString(ha)+l.toString(U):l.toNumber(ha)+l.toNumber(U);case "%\x3d":return l.toNumber(ha)%l.toNumber(U);default:throw Error(m.nodeErrorMessage(ka,"RUNTIME","OPERATORNOTRECOGNISED"));}}function ea(U,T,ha){T=T.toLowerCase();switch(T){case "hasz":return U=
U.hasZ,void 0===U?!1:U;case "hasm":return U=U.hasM,void 0===U?!1:U;case "spatialreference":return T=U.spatialReference._arcadeCacheId,void 0===T&&(ha=!0,Object.freeze&&Object.isFrozen(U.spatialReference)&&(ha=!1),ha&&(ra++,T=U.spatialReference._arcadeCacheId=ra)),U=new d({wkt:U.spatialReference.wkt,wkid:U.spatialReference.wkid}),void 0!==T&&(U._arcadeCacheId="SPREF"+T.toString()),U}switch(U.type){case "extent":switch(T){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return U=
U[T],void 0!==U?U:null;case "type":return"Extent"}break;case "polygon":switch(T){case "rings":return T=U.getCacheValue("_arcadeCacheId"),void 0===T&&(ra++,T=ra,U.setCacheValue("_arcadeCacheId",T)),U=new n(U.rings,U.spatialReference,!0===U.hasZ,!0===U.hasM,T);case "type":return"Polygon"}break;case "point":switch(T){case "x":case "y":case "z":case "m":return void 0!==U[T]?U[T]:null;case "type":return"Point"}break;case "polyline":switch(T){case "paths":return T=U.getCacheValue("_arcadeCacheId"),void 0===
T&&(ra++,T=ra,U.setCacheValue("_arcadeCacheId",T)),U=new n(U.paths,U.spatialReference,!0===U.hasZ,!0===U.hasM,T);case "type":return"Polyline"}break;case "multipoint":switch(T){case "points":return T=U.getCacheValue("_arcadeCacheId"),void 0===T&&(ra++,T=ra,U.setCacheValue("_arcadeCacheId",T)),U=new p(U.points,U.spatialReference,!0===U.hasZ,!0===U.hasM,T,1);case "type":return"Multipoint"}}throw Error(m.nodeErrorMessage(ha,"RUNTIME","PROPERTYNOTFOUND"));}function Y(U,T){try{var ha=Z(U,T.object);if(null===
ha)throw Error(m.nodeErrorMessage(T,"RUNTIME","NOTFOUND"));if(!1===T.computed){if("Identifier"===T.property.type){if(ha instanceof d||l.isFeature(ha))return ha.field(T.property.name);if(ha instanceof w)return ea(ha,T.property.name,T)}throw Error(m.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}var ka=Z(U,T.property);if(ha instanceof d||l.isFeature(ha)){if(l.isString(ka))return ha.field(ka);throw Error(m.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(ha instanceof w){if(l.isString(ka))return ea(ha,
ka,T);throw Error(m.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(l.isArray(ha)){if(l.isNumber(ka)&&isFinite(ka)&&Math.floor(ka)===ka){0>ka&&(ka=ha.length+ka);if(ka>=ha.length||0>ka)throw Error(m.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return ha[ka]}throw Error(m.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(l.isString(ha)){if(l.isNumber(ka)&&isFinite(ka)&&Math.floor(ka)===ka){0>ka&&(ka=ha.length+ka);if(ka>=ha.length||0>ka)throw Error(m.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return ha[ka]}throw Error(m.nodeErrorMessage(T,
"RUNTIME","INVALIDTYPE"));}if(l.isImmutableArray(ha)&&l.isNumber(ka)&&isFinite(ka)&&Math.floor(ka)===ka){0>ka&&(ka=ha.length()+ka);if(ka>=ha.length()||0>ka)throw Error(m.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return ha.get(ka)}throw Error(m.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}catch(K){throw K;}}function ba(U,T){try{var ha=Z(U,T.argument);if(l.isBoolean(ha)){if("!"===T.operator)return!ha;if("-"===T.operator)return-1*l.toNumber(ha);if("+"===T.operator)return 1*l.toNumber(ha);if("~"===
T.operator)return~l.toNumber(ha);throw Error(m.nodeErrorMessage(T,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===T.operator)return~l.toNumber(ha);if("-"===T.operator)return-1*l.toNumber(ha);if("+"===T.operator)return 1*l.toNumber(ha);throw Error(m.nodeErrorMessage(T,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ka){throw ka;}}function Q(U,T){try{var ha=[Z(U,T.left),Z(U,T.right)],ka=ha[0],K=ha[1];switch(T.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return l.binaryOperator(l.toNumber(ka),
l.toNumber(K),T.operator);case "\x3d\x3d":return l.equalityTest(ka,K);case "!\x3d":return!l.equalityTest(ka,K);case "\x3c":return l.greaterThanLessThan(ka,K,T.operator);case "\x3e":return l.greaterThanLessThan(ka,K,T.operator);case "\x3c\x3d":return l.greaterThanLessThan(ka,K,T.operator);case "\x3e\x3d":return l.greaterThanLessThan(ka,K,T.operator);case "+":return l.isString(ka)||l.isString(K)?l.toString(ka)+l.toString(K):l.toNumber(ka)+l.toNumber(K);case "-":return l.toNumber(ka)-l.toNumber(K);case "*":return l.toNumber(ka)*
l.toNumber(K);case "/":return l.toNumber(ka)/l.toNumber(K);case "%":return l.toNumber(ka)%l.toNumber(K);default:throw Error(m.nodeErrorMessage(T,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(P){throw P;}}function fa(U,T){try{if("AssignmentExpression"===T.left.type||"UpdateExpression"===T.left.type)throw Error(m.nodeErrorMessage(T.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===T.right.type||"UpdateExpression"===T.right.type)throw Error(m.nodeErrorMessage(T.right,"RUNTIME",
"CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ha=Z(U,T.left);if(l.isBoolean(ha))switch(T.operator){case "||":if(!0===ha)return ha;var ka=Z(U,T.right);if(l.isBoolean(ka))return ka;throw Error(m.nodeErrorMessage(T,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===ha)return ha;ka=Z(U,T.right);if(l.isBoolean(ka))return ka;throw Error(m.nodeErrorMessage(T,"RUNTIME","ONLYORORAND"));default:throw Error(m.nodeErrorMessage(T,"RUNTIME","ONLYORORAND"));}throw Error(m.nodeErrorMessage(T,"RUNTIME","ONLYBOOLEAN"));
}catch(K){throw K;}}function S(U,T){try{var ha=T.name.toLowerCase();if(null!==U.localScope&&void 0!==U.localScope[ha]){var ka=U.localScope[ha];if(!0===ka.valueset)return ka.value;ka.value=Z(U,ka.node);ka.valueset=!0;return ka.value}if(void 0!==U.globalScope[ha]){ka=U.globalScope[ha];if(!0===ka.valueset)return ka.value;ka.value=Z(U,ka.node);ka.valueset=!0;return ka.value}throw Error(m.nodeErrorMessage(T,"RUNTIME","VARIABLENOTFOUND"));}catch(K){throw K;}}function X(U,T){try{if("Identifier"!==T.callee.type)throw Error(m.nodeErrorMessage(T,
"RUNTIME","ONLYNODESSUPPORTED"));if(null!==U.localScope&&void 0!==U.localScope[T.callee.name.toLowerCase()]){var ha=U.localScope[T.callee.name.toLowerCase()];if(ha.value instanceof l.NativeFunction)return ha.value.fn(U,T);if(ha.value instanceof h)return za(U,T,ha.value.definition);throw Error(m.nodeErrorMessage(T,"RUNTIME","NOTAFUNCTION"));}if(void 0!==U.globalScope[T.callee.name.toLowerCase()]){ha=U.globalScope[T.callee.name.toLowerCase()];if(ha.value instanceof l.NativeFunction)return ha.value.fn(U,
T);if(ha.value instanceof h)return za(U,T,ha.value.definition);throw Error(m.nodeErrorMessage(T,"RUNTIME","NOTAFUNCTION"));}throw Error(m.nodeErrorMessage(T,"RUNTIME","NOTFOUND"));}catch(ka){throw ka;}}function la(U){return null==U?"":l.isArray(U)||l.isImmutableArray(U)?"Array":l.isDate(U)?"Date":l.isString(U)?"String":l.isBoolean(U)?"Boolean":l.isNumber(U)?"Number":U instanceof c?"Attachment":U instanceof k?"Portal":U instanceof d?"Dictionary":l.isFeature(U)?"Feature":U instanceof y?"Point":U instanceof
C?"Polygon":U instanceof G?"Polyline":U instanceof D?"Multipoint":U instanceof u?"Extent":l.isFunctionParameter(U)?"Function":l.isFeatureSet(U)?"FeatureSet":l.isFeatureSetCollection(U)?"FeatureSetCollection":U===l.voidOperation?"":"number"===typeof U&&isNaN(U)?"Number":"Unrecognised Type"}function na(U,T,ha,ka){try{var K=Z(U,T.arguments[ha]);if(l.equalityTest(K,ka))return Z(U,T.arguments[ha+1]);var P=T.arguments.length-ha;return 1===P?Z(U,T.arguments[ha]):2===P?null:3===P?Z(U,T.arguments[ha+2]):na(U,
T,ha+2,ka)}catch(ca){throw ca;}}function qa(U,T,ha,ka){try{if(!0===ka)return Z(U,T.arguments[ha+1]);if(3===T.arguments.length-ha)return Z(U,T.arguments[ha+2]);var K=Z(U,T.arguments[ha+2]);if(!1===l.isBoolean(K))throw Error("WHEN needs boolean test conditions");return qa(U,T,ha+2,K)}catch(P){throw P;}}function ta(U,T){var ha=U.length,ka=Math.floor(ha/2);if(0===ha)return[];if(1===ha)return[U[0]];var K=ta(U.slice(0,ka),T);ha=ta(U.slice(ka,ha),T);for(ka=[];0<K.length||0<ha.length;)if(0<K.length&&0<ha.length){var P=
T(K[0],ha[0]);isNaN(P)&&(P=0);0>=P?(ka.push(K[0]),K=K.slice(1)):(ka.push(ha[0]),ha=ha.slice(1))}else 0<K.length?(ka.push(K[0]),K=K.slice(1)):0<ha.length&&(ka.push(ha[0]),ha=ha.slice(1));return ka}function ya(U,T,ha){try{var ka=U.body;if(ha.length!==U.params.length)throw Error("Invalid Parameter calls to function.");for(var K=0;K<ha.length;K++)T.localScope[U.params[K].name.toLowerCase()]={value:ha[K],valueset:!0,node:null};var P=Z(T,ka);if(P instanceof l.ReturnResult)return P.value;if(P===l.breakResult)throw Error("Cannot Break from a Function");
if(P===l.continueResult)throw Error("Cannot Continue from a Function");return P instanceof l.ImplicitResult?P.value:P}catch(ca){throw ca;}}function za(U,T,ha){return R(U,T,function(ka,K,P){ka={spatialReference:U.spatialReference,globalScope:U.globalScope,depthCounter:U.depthCounter+1,console:U.console,lrucache:U.lrucache,interceptor:U.interceptor,localScope:{}};if(64<ka.depthCounter)throw Error("Exceeded maximum function depth");return ya(ha,ka,P)})}function va(U){return function(){var T={spatialReference:U.context.spatialReference,
console:U.context.console,lrucache:U.context.lrucache,interceptor:U.context.interceptor,localScope:{},depthCounter:U.context.depthCounter+1,globalScope:U.context.globalScope};if(64<T.depthCounter)throw Error("Exceeded maximum function depth");return ya(U.definition,T,arguments)}}function Fa(U){}function Ea(U){for(var T={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:R,evaluateIdentifier:S,arcadeCustomFunctionHandler:va},ha=0;ha<U.length;ha++)U[ha].registerFunctions(T);for(var ka in T.functions)M[ka]=
{value:new l.NativeFunction(T.functions[ka]),valueset:!0,node:null},ma.prototype[ka]=M[ka];for(ha=0;ha<T.signatures.length;ha++)m.addFunctionDeclaration(T.signatures[ha],"async")}Object.defineProperty(q,"__esModule",{value:!0});q.findFunctionCalls=q.referencesFunction=q.referencesMember=q.validateScript=q.extractExpectedFieldLiterals=q.extractFieldLiterals=q.executeScript=q.extend=q.functionHelper=void 0;var ra=0,M={};t.registerFunctions(M,R);B.registerFunctions(M,R);z.registerFunctions(M,R);x.registerFunctions(M,
R);A.registerFunctions(M,R);v.registerFunctions(M,R);M["typeof"]=function(U,T){return R(U,T,function(ha,ka,K){l.pcCheck(K,1,1);ha=la(K[0]);if("Unrecognised Type"===ha)throw Error("Unrecognised Type");return ha})};M.iif=function(U,T){try{l.pcCheck(null===T.arguments?[]:T.arguments,3,3);var ha=Z(U,T.arguments[0]);if(!1===l.isBoolean(ha))throw Error("IF Function must have a boolean test condition");var ka=Z(U,T.arguments[1]),K=Z(U,T.arguments[2]);return!0===ha?ka:K}catch(P){throw P;}};M.decode=function(U,
T){try{if(2>T.arguments.length)throw Error("Missing Parameters");if(2===T.arguments.length)return Z(U,T.arguments[1]);if(0===(T.arguments.length-1)%2)throw Error("Must have a default value result.");var ha=Z(U,T.arguments[0]);return na(U,T,1,ha)}catch(ka){throw ka;}};M.when=function(U,T){try{if(3>T.arguments.length)throw Error("Missing Parameters");if(0===T.arguments.length%2)throw Error("Must have a default value result.");var ha=Z(U,T.arguments[0]);if(!1===l.isBoolean(ha))throw Error("WHEN needs boolean test conditions");
return qa(U,T,0,ha)}catch(ka){throw ka;}};M.top=function(U,T){return R(U,T,function(ha,ka,K){l.pcCheck(K,2,2);if(l.isArray(K[0]))return l.toNumber(K[1])>=K[0].length?K[0].slice(0):K[0].slice(0,l.toNumber(K[1]));if(l.isImmutableArray(K[0]))return l.toNumber(K[1])>=K[0].length()?K[0].slice(0):K[0].slice(0,l.toNumber(K[1]));throw Error("Top cannot accept this parameter type");})};M.first=function(U,T){return R(U,T,function(ha,ka,K){l.pcCheck(K,1,1);return l.isArray(K[0])?0===K[0].length?null:K[0][0]:
l.isImmutableArray(K[0])?0===K[0].length()?null:K[0].get(0):null})};M.sort=function(U,T){return R(U,T,function(ha,ka,K){l.pcCheck(K,1,2);ha=K[0];l.isImmutableArray(ha)&&(ha=ha.toArray());if(!1===l.isArray(ha))throw Error("Illegal Argument");if(1<K.length){if(!1===l.isFunctionParameter(K[1]))throw Error("Illegal Argument");var P=va(K[1]);return ha=ta(ha,function(oa,Aa){return P(oa,Aa)})}if(0===ha.length)return[];K={};for(ka=0;ka<ha.length;ka++){var ca=la(ha[ka]);""!==ca&&(K[ca]=!0)}if(!0===K.Array||
!0===K.Dictionary||!0===K.Feature||!0===K.Point||!0===K.Polygon||!0===K.Polyline||!0===K.Multipoint||!0===K.Extent||!0===K.Function)return ha.slice(0);ka=0;ca="";for(var ia in K)ka++,ca=ia;return ha=1<ka||"String"===ca?ta(ha,function(oa,Aa){if(null===oa||void 0===oa||oa===l.voidOperation)return null===Aa||void 0===Aa||Aa===l.voidOperation?0:1;if(null===Aa||void 0===Aa||Aa===l.voidOperation)return-1;var Ca=l.toString(oa),Na=l.toString(Aa);return Ca<Na?-1:Ca===Na?0:1}):"Number"===ca?ta(ha,function(oa,
Aa){return oa-Aa}):"Boolean"===ca?ta(ha,function(oa,Aa){return oa===Aa?0:Aa?-1:1}):"Date"===ca?ta(ha,function(oa,Aa){return Aa-oa}):ha.slice(0)})};for(var aa in M)M[aa]={value:new l.NativeFunction(M[aa]),valueset:!0,node:null};var ma=function(){};ma.prototype=M;ma.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ma.prototype.pi={value:Math.PI,valueset:!0,node:null};q.functionHelper={fixSpatialReference:l.fixSpatialReference,parseArguments:O,standardFunction:R};q.extend=Ea;
Ea([r]);q.executeScript=function(U,T){var ha=T.spatialReference;if(null===ha||void 0===ha)ha=new I({wkid:102100});var ka=T.vars,K=T.customfunctions,P=new ma;ka||(ka={});K||(K={});var ca=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});ca.immutable=!1;P.textformatting={value:ca,valueset:!0,node:null};for(var ia in K)P[ia]={value:new l.NativeFunction(K[ia]),"native":!0,valueset:!0,node:null};for(ia in ka)P[ia]=ka[ia]&&"esri.Graphic"===ka[ia].declaredClass?
{value:f.createFromGraphic(ka[ia]),valueset:!0,node:null}:{value:ka[ia],valueset:!0,node:null};ha=Z({spatialReference:ha,globalScope:P,localScope:null,console:T.console?T.console:Fa,lrucache:T.lrucache,interceptor:T.interceptor,depthCounter:1},U.body[0].body);ha instanceof l.ReturnResult&&(ha=ha.value);ha instanceof l.ImplicitResult&&(ha=ha.value);ha===l.voidOperation&&(ha=null);if(ha===l.breakResult)throw Error("Cannot return BREAK");if(ha===l.continueResult)throw Error("Cannot return CONTINUE");
if(ha instanceof h)throw Error("Cannot return FUNCTION");if(ha instanceof l.NativeFunction)throw Error("Cannot return FUNCTION");return ha};q.extractFieldLiterals=function(U,T){void 0===T&&(T=!1);return m.findFieldLiterals(U)};q.extractExpectedFieldLiterals=function(U){return m.findExpectedFieldLiterals(U)};q.validateScript=function(U,T){return m.validateScript(U,T,"simple")};q.referencesMember=function(U,T){return m.referencesMember(U,T)};q.referencesFunction=function(U,T){return m.referencesFunction(U,
T)};q.findFunctionCalls=function(U){return m.findFunctionCalls(U)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/arcade-parser"],function(F,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.referencesFunction=q.referencesMember=q.extractExpectedFieldLiterals=q.validateScript=q.extractFieldLiterals=q.scriptCheck=q.parseScript=void 0;q.parseScript=function(e,g){void 0===g&&(g=[]);var k=b.parse("function _() { "+e+"\n}");if(null===k.body||void 0===k.body)throw Error("No formula provided.");
if(0===k.body.length)throw Error("No formula provided.");if(0===k.body.length)throw Error("No formula provided.");if("BlockStatement"!==k.body[0].body.type)throw Error("Invalid formula content.");var c=a.validateLanguage(k);if(""!==c)throw Error(c);a.findScriptDependencies(k,g);return k};q.scriptCheck=function(e,g,k,c,d){var f=[];e="function _() { \n"+e+"\n}";try{var h=b.parse(e,{tolerant:!0,loc:!0,range:!0}),n=h.errors;if(0<n.length)for(var p=0;p<n.length;p++)f.push({line:n[p].lineNumber-2,character:n[p].column,
reason:n[p].description});var l=a.checkScript(h,g,k,c,d);for(g=0;g<l.length;g++)l[g].line-=2,l[g].range&&(l[g].range=[l[g][0]-15,l[g][1]-15]),l[g].loc&&(l[g].loc.start.line-=2,l[g].loc.end.line-=2),f.push(l[g])}catch(r){try{if("Unexpected token }"===r.description){var m=e.split("\n").length;r.lineNumber===m?(r.index=e.length-1,f.push({line:r.lineNumber-4,character:r.column,reason:"Unexpected end of script"})):(r.index=e.length-1,f.push({line:r.lineNumber-2,character:r.column,reason:"Unexpected end of script"}))}else f.push({line:r.lineNumber-
2,character:r.column,reason:r.description})}catch(t){}}return f};q.extractFieldLiterals=function(e,g){void 0===g&&(g=!1);return a.findFieldLiterals(e)};q.validateScript=function(e,g,k){return a.validateScript(e,g,k)};q.extractExpectedFieldLiterals=function(e){return a.findExpectedFieldLiterals(e)};q.referencesMember=function(e,g){return a.referencesMember(e,g)};q.referencesFunction=function(e,g){return a.referencesFunction(e,g)}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),
function(F,q,a,b,e,g,k,c,d){Object.defineProperty(q,"__esModule",{value:!0});q.version=q.Syntax=q.tokenize=q.parse=void 0;q.parse=function(f,h,n){var p=null,l=function(x,v){n&&n(x,v);p&&p.visit(x,v)},m="function"===typeof n?l:void 0,r=!1;if(h){r="boolean"===typeof h.comment&&h.comment;var t="boolean"===typeof h.attachComment&&h.attachComment;if(r||t)p=new b.CommentHandler,p.attach=t,h.comment=!0,m=l}f=new e.Parser(f,h,m);h=f.parseScript();r&&p&&(h.comments=p.comments);f.config.tokens&&(h.tokens=f.tokens);
f.config.tolerant&&(h.errors=f.errorHandler.errors);return h};q.tokenize=function(f,h,n){f=new g.Tokenizer(f,h);h=[];var p=void 0;try{for(;;){var l=f.getNextToken();if(!l)break;n&&(l=n(l));h.push(l)}}catch(m){f.errorHandler.tolerate(m)}f.errorHandler.tolerant&&(p=f.errors());return{tokens:h,errors:p}};Object.defineProperty(q,"Syntax",{enumerable:!0,get:function(){return k.Syntax}});a(c,q);a(d,q);q.version="4.0.0-dev"})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var F=
this&&this.__createBinding||(Object.create?function(q,a,b,e){void 0===e&&(e=b);Object.defineProperty(q,e,{enumerable:!0,get:function(){return a[b]}})}:function(q,a,b,e){void 0===e&&(e=b);q[e]=a[b]});return function(q,a){for(var b in q)"default"===b||Object.prototype.hasOwnProperty.call(a,b)||F(a,q,b)}}()})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.CommentHandler=void 0;F=function(){function b(){this.attach=
!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}b.prototype.insertInnerComments=function(e,g){if(e.type===a.Syntax.BlockStatement&&0===e.body.length){for(var k=[],c=this.leading.length-1;0<=c;--c){var d=this.leading[c];g.end.offset>=d.start&&(k.unshift(d.comment),this.leading.splice(c,1),this.trailing.splice(c,1))}k.length&&(e.innerComments=k)}};b.prototype.findTrailingComments=function(e){var g=[];if(0<this.trailing.length){for(var k=this.trailing.length-1;0<=k;--k){var c=this.trailing[k];
c.start>=e.end.offset&&g.unshift(c.comment)}this.trailing.length=0;return g}(k=this.stack[this.stack.length-1])&&k.node.trailingComments&&(c=k.node.trailingComments[0])&&c.range[0]>=e.end.offset&&(g=k.node.trailingComments,delete k.node.trailingComments);return g};b.prototype.findLeadingComments=function(e){for(var g=[],k;0<this.stack.length;){var c=this.stack[this.stack.length-1];if(c&&c.start>=e.start.offset)k=c.node,this.stack.pop();else break}if(k){for(var d=(k.leadingComments?k.leadingComments.length:
0)-1;0<=d;--d)c=k.leadingComments[d],c.range[1]<=e.start.offset&&(g.unshift(c),k.leadingComments.splice(d,1));k.leadingComments&&0===k.leadingComments.length&&delete k.leadingComments;return g}for(d=this.leading.length-1;0<=d;--d)c=this.leading[d],c.start<=e.start.offset&&(g.unshift(c.comment),this.leading.splice(d,1));return g};b.prototype.visitNode=function(e,g){if(!(e.type===a.Syntax.Program&&0<e.body.length)){this.insertInnerComments(e,g);var k=this.findTrailingComments(g),c=this.findLeadingComments(g);
0<c.length&&(e.leadingComments=c);0<k.length&&(e.trailingComments=k);this.stack.push({node:e,start:g.start.offset})}};b.prototype.visitComment=function(e,g){this.comments.push(e);if(this.attach){var k={comment:{type:e.type,value:e.value,range:[g.start.offset,g.end.offset]},start:g.start.offset};e.loc&&(k.comment.loc=e.loc);this.leading.push(k);this.trailing.push(k)}};b.prototype.visit=function(e,g){"Line"===e.type||"Block"===e.type?this.visitComment(e,g):this.attach&&this.visitNode(e,g)};return b}();
q.CommentHandler=F})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.Syntax=void 0;q.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",
ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",
VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n){Object.defineProperty(q,"__esModule",{value:!0});q.Parser=void 0;F=function(){function p(l,m,r){void 0===m&&(m={});this.config={range:"boolean"===
typeof m.range&&m.range,loc:"boolean"===typeof m.loc&&m.loc,source:null,tokens:"boolean"===typeof m.tokens&&m.tokens,comment:"boolean"===typeof m.comment&&m.comment,tolerant:"boolean"===typeof m.tolerant&&m.tolerant,globalReturn:!!m.globalReturn};this.config.loc&&m.source&&null!==m.source&&(this.config.source=String(m.source));this.delegate=r;this.errorHandler=new k.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new f.Scanner(l,this.errorHandler);this.scanner.trackComment=
this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:n.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,
isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}p.prototype.tolerateError=function(l){for(var m=[],r=1;r<arguments.length;r++)m[r-1]=arguments[r];var t=m.slice();m=l.replace(/%(\d)/g,function(x,
v){g.assert(v<t.length,"Message reference must be in range");return t[v]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,m)};p.prototype.unexpectedTokenError=function(l,m){var r=m||c.Messages.UnexpectedToken;if(l){m||(r=l.type===n.TokenType.EOF?c.Messages.UnexpectedEOS:l.type===n.TokenType.Identifier?c.Messages.UnexpectedIdentifier:l.type===n.TokenType.NumericLiteral?c.Messages.UnexpectedNumber:l.type===n.TokenType.StringLiteral?c.Messages.UnexpectedString:
l.type===n.TokenType.Template?c.Messages.UnexpectedTemplate:c.Messages.UnexpectedToken);var t=l.value.toString()}else t="ILLEGAL";r=r.replace("%0",t);return l&&"number"===typeof l.lineNumber?this.errorHandler.createError(l.start,l.lineNumber,l.start-(this.lastMarker.index-this.lastMarker.column)+1,r):this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,r)};p.prototype.throwUnexpectedToken=function(l,m){throw this.unexpectedTokenError(l,m);};p.prototype.tolerateUnexpectedToken=
function(l,m){this.errorHandler.tolerate(this.unexpectedTokenError(l,m))};p.prototype.collectComments=function(){if(this.config.comment){var l=this.scanner.scanComments();if(l&&0<l.length&&this.delegate)for(var m=0;m<l.length;++m){var r=l[m],t=new d.Comment(r.multiLine?"Block":"Line",this.scanner.source.slice(r.slice[0],r.slice[1]));this.config.range&&(t.range=r.range);this.config.loc&&(t.loc=r.loc);this.delegate(t,{start:{line:r.loc.start.line,column:r.loc.start.column,offset:r.range[0]},end:{line:r.loc.end.line,
column:r.loc.end.column,offset:r.range[1]}})}}else this.scanner.scanComments()};p.prototype.peekAhead=function(l){var m=this,r=this.scanner.saveState();l.call(this,function(){m.scanner.scanComments();return m.scanner.lex()});this.scanner.restoreState(r)};p.prototype.getTokenRaw=function(l){return this.scanner.source.slice(l.start,l.end)};p.prototype.convertToken=function(l){var m={type:n.TokenName[l.type],value:this.getTokenRaw(l)};this.config.range&&(m.range=[l.start,l.end]);this.config.loc&&(m.loc=
{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});l.type===n.TokenType.RegularExpression&&(m.regex={pattern:l.pattern,flags:l.flags});return m};p.prototype.nextToken=function(){var l=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&
(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var m=this.scanner.lex();this.hasLineTerminator=l.lineNumber!==m.lineNumber;this.lookahead=m;this.config.tokens&&m.type!==n.TokenType.EOF&&this.tokens.push(this.convertToken(m));return l};p.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};p.prototype.startNode=function(l,
m){void 0===m&&(m=0);var r=l.start-l.lineStart,t=l.lineNumber;0>r&&(r+=m,t--);return{index:l.start,line:t,column:r}};p.prototype.finalize=function(l,m){this.config.range&&(m.range=[l.index,this.lastMarker.index]);this.config.loc&&(m.loc={start:{line:l.line,column:l.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(m.loc.source=this.config.source));this.delegate&&this.delegate(m,{start:{line:l.line,column:l.column,offset:l.index},end:{line:this.lastMarker.line,
column:this.lastMarker.column,offset:this.lastMarker.index}});return m};p.prototype.expect=function(l){var m=this.nextToken();m.type===n.TokenType.Punctuator&&m.value===l||this.throwUnexpectedToken(m)};p.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var l=this.lookahead;l.type===n.TokenType.Punctuator&&","===l.value?this.nextToken():l.type===n.TokenType.Punctuator&&";"===l.value?(this.nextToken(),this.tolerateUnexpectedToken(l)):this.tolerateUnexpectedToken(l,c.Messages.UnexpectedToken)}else this.expect(",")};
p.prototype.expectKeyword=function(l){var m=this.nextToken();m.type===n.TokenType.Keyword&&m.value.toString().toLowerCase()===l.toLowerCase()||this.throwUnexpectedToken(m)};p.prototype.match=function(l){return this.lookahead.type===n.TokenType.Punctuator&&this.lookahead.value===l};p.prototype.matchKeyword=function(l){return this.lookahead.type===n.TokenType.Keyword&&this.lookahead.value.toLowerCase()===l.toLowerCase()};p.prototype.matchContextualKeyword=function(l){return this.lookahead.type===n.TokenType.Identifier&&
this.lookahead.value===l};p.prototype.matchAssign=function(){return this.lookahead.type!==n.TokenType.Punctuator?!1:d.AssignmentOperators.includes(this.lookahead.value)};p.prototype.isolateCoverGrammar=function(l){var m=this.context.isBindingElement,r=this.context.isAssignmentTarget,t=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;l=l.call(this);null!==this.context.firstCoverInitializedNameError&&
this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=m;this.context.isAssignmentTarget=r;this.context.firstCoverInitializedNameError=t;return l};p.prototype.inheritCoverGrammar=function(l){var m=this.context.isBindingElement,r=this.context.isAssignmentTarget,t=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;l=l.call(this);this.context.isBindingElement=
this.context.isBindingElement&&m;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&r;this.context.firstCoverInitializedNameError=t||this.context.firstCoverInitializedNameError;return l};p.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===n.TokenType.EOF||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=
this.startMarker.column)};p.prototype.parsePrimaryExpression=function(){var l=this.createNode();switch(this.lookahead.type){case n.TokenType.Identifier:l=this.finalize(l,new d.Identifier(this.nextToken().value));break;case n.TokenType.NumericLiteral:case n.TokenType.StringLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var m=this.nextToken();var r=this.getTokenRaw(m);l=this.finalize(l,new d.Literal(m.value,r));break;case n.TokenType.BooleanLiteral:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;m=this.nextToken();r=this.getTokenRaw(m);l=this.finalize(l,new d.Literal("true"===m.value.toString().toLowerCase(),r));break;case n.TokenType.NullLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;m=this.nextToken();r=this.getTokenRaw(m);l=this.finalize(l,new d.Literal(null,r));break;case n.TokenType.Template:l=this.parseTemplateLiteral();break;case n.TokenType.Punctuator:switch(this.lookahead.value){case "(":this.context.isBindingElement=
!1;l=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":l=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":l=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:l=this.throwUnexpectedToken(this.nextToken())}break;case n.TokenType.Keyword:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;l=this.throwUnexpectedToken(this.nextToken());break;default:l=this.throwUnexpectedToken(this.nextToken())}return l};p.prototype.parseArrayInitializer=
function(){var l=this.createNode(),m=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),m.push(null)):(m.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(l,new d.ArrayExpression(m))};p.prototype.parseObjectPropertyKey=function(){var l=this.createNode(),m=this.nextToken();switch(m.type){case n.TokenType.StringLiteral:case n.TokenType.NumericLiteral:l=this.finalize(l,new d.Literal(m.value,
this.getTokenRaw(m)));break;case n.TokenType.Identifier:case n.TokenType.BooleanLiteral:case n.TokenType.NullLiteral:case n.TokenType.Keyword:l=this.finalize(l,new d.Identifier(m.value));break;default:l=this.throwUnexpectedToken(m)}return l};p.prototype.parseObjectProperty=function(){var l=this.createNode(),m=this.lookahead,r=!1,t=!1,x=null;if(m.type===n.TokenType.Identifier){var v=m.value;this.nextToken();r=this.match("[");x=this.finalize(l,new d.Identifier(v))}else this.match("*")?this.nextToken():
(r=this.match("["),x=this.parseObjectPropertyKey());x||this.throwUnexpectedToken(this.lookahead);v=null;this.match(":")?(this.nextToken(),v=this.inheritCoverGrammar(this.parseAssignmentExpression)):m.type===n.TokenType.Identifier?(v=this.finalize(l,new d.Identifier(m.value)),t=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(l,new d.Property("init",x,r,v,!1,t))};p.prototype.parseObjectInitializer=function(){var l=this.createNode();this.expect("{");for(var m=[];!this.match("}");)m.push(this.parseObjectProperty()),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(l,new d.ObjectExpression(m))};p.prototype.parseTemplateHead=function(){g.assert(this.lookahead.head,"Template literal must start with a template head");var l=this.createNode(),m=this.nextToken();return this.finalize(l,new d.TemplateElement({raw:m.value,cooked:m.cooked},m.tail))};p.prototype.parseTemplateElement=function(){this.lookahead.type!==n.TokenType.Template&&this.throwUnexpectedToken();var l=this.createNode(),
m=this.nextToken();return this.finalize(l,new d.TemplateElement({raw:m.value,cooked:m.cooked},m.tail))};p.prototype.parseTemplateLiteral=function(){var l=this.createNode(),m=[],r=[],t=this.parseTemplateHead();for(r.push(t);!t.tail;)m.push(this.parseExpression()),t=this.parseTemplateElement(),r.push(t);return this.finalize(l,new d.TemplateLiteral(r,m))};p.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var l=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.expect(")");this.context.isBindingElement=!1;return l};p.prototype.parseArguments=function(){this.expect("(");var l=[];if(!this.match(")"))for(;;){var m=this.isolateCoverGrammar(this.parseAssignmentExpression);l.push(m);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return l};p.prototype.isIdentifierName=function(l){return l.type===n.TokenType.Identifier||l.type===n.TokenType.Keyword||l.type===n.TokenType.BooleanLiteral||l.type===n.TokenType.NullLiteral};
p.prototype.parseIdentifierName=function(){var l=this.createNode(),m=this.nextToken();this.isIdentifierName(m)||this.throwUnexpectedToken(m);return this.finalize(l,new d.Identifier(m.value))};p.prototype.parseLeftHandSideExpressionAllowCall=function(){var l=this.lookahead,m=this.context.allowIn;this.context.allowIn=!0;for(var r=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!1;var t=this.parseArguments();
r=this.finalize(this.startNode(l),new d.CallExpression(r,t))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),t=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),r=this.finalize(this.startNode(l),new d.ComputedMemberExpression(r,t));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),t=this.parseIdentifierName(),r=this.finalize(this.startNode(l),new d.StaticMemberExpression(r,
t));else break;this.context.allowIn=m;return r};p.prototype.parseLeftHandSideExpression=function(){g.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var l=this.startNode(this.lookahead),m=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var r=this.isolateCoverGrammar(this.parseExpression);this.expect("]");m=this.finalize(l,new d.ComputedMemberExpression(m,
r))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),r=this.parseIdentifierName(),m=this.finalize(l,new d.StaticMemberExpression(m,r));else break;return m};p.prototype.parseUpdateExpression=function(){var l=this.lookahead;if(this.match("++")||this.match("--")){l=this.startNode(l);var m=this.nextToken();var r=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment);
r=this.finalize(l,new d.UpdateExpression(m.value,r,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else r=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||this.lookahead.type!==n.TokenType.Punctuator||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,m=this.nextToken().value,r=this.finalize(this.startNode(l),
new d.UpdateExpression(m,r,!1)));return r};p.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var l=this.startNode(this.lookahead),m=this.nextToken();var r=this.inheritCoverGrammar(this.parseUnaryExpression);r=this.finalize(l,new d.UnaryExpression(m.value,r));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else r=this.parseUpdateExpression();return r};p.prototype.binaryPrecedence=function(l){var m=l.value;return l.type===
n.TokenType.Punctuator?this.operatorPrecedence[m]||0:l.type===n.TokenType.Keyword?this.context.allowIn&&"in"===m?12:0:0};p.prototype.parseBinaryExpression=function(){var l=this.lookahead,m=this.inheritCoverGrammar(this.parseUnaryExpression),r=this.lookahead,t=this.binaryPrecedence(r);if(0<t){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;l=[l,this.lookahead];var x=this.inheritCoverGrammar(this.parseUnaryExpression);r=[m,r.value,x];for(var v=[t];;){t=this.binaryPrecedence(this.lookahead);
if(0>=t)break;for(;2<r.length&&t<=v[v.length-1];){x=r.pop();var z=r.pop();v.pop();m=r.pop();l.pop();var A=l[l.length-1],B=this.startNode(A,A.lineStart);r.push(this.finalize(B,new d.BinaryExpression(z,m,x)))}r.push(this.nextToken().value);v.push(t);l.push(this.lookahead);r.push(this.inheritCoverGrammar(this.parseUnaryExpression))}t=r.length-1;m=r[t];for(z=l.pop();1<t;){A=l.pop();if(!A)break;B=this.startNode(A,z&&z.lineStart);z=r[t-1];m=this.finalize(B,new d.BinaryExpression(z,r[t-2],m));t-=2;z=A}}return m};
p.prototype.parseAssignmentExpression=function(){var l=this.lookahead,m=l,r=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);m=this.nextToken();m=m.value;var t=this.isolateCoverGrammar(this.parseAssignmentExpression);r=this.finalize(this.startNode(l),new d.AssignmentExpression(m,r,t));this.context.firstCoverInitializedNameError=
null}return r};p.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};p.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(this.lookahead.type===n.TokenType.Keyword)switch(this.lookahead.value){case "function":var l=this.parseFunctionDeclaration();break;default:l=this.parseStatement()}else l=this.parseStatement();return l};p.prototype.parseBlock=function(){var l=this.createNode();this.expect("{");
for(var m=[];!this.match("}");)m.push(this.parseStatementListItem());this.expect("}");return this.finalize(l,new d.BlockStatement(m))};p.prototype.parseObjectStatement=function(){var l=this.createNode(),m=this.parseObjectInitializer();return this.finalize(l,new d.ExpressionStatement(m))};p.prototype.parseBlockOrObjectStatement=function(){var l="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(m){var r=m();if(r.type===n.TokenType.Identifier||
r.type===n.TokenType.StringLiteral)r=m(),r.type===n.TokenType.Punctuator&&":"===r.value&&(l=!0)});return l?this.parseObjectStatement():this.parseBlock()};p.prototype.parseVariableIdentifier=function(){var l=this.createNode(),m=this.nextToken();m.type!==n.TokenType.Identifier&&this.throwUnexpectedToken(m,c.Messages.IdentiferExpected);return this.finalize(l,new d.Identifier(m.value))};p.prototype.parseVariableDeclaration=function(l){var m=this.createNode(),r=this.parseVariableIdentifier(),t=null;this.match("\x3d")?
(this.nextToken(),t=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type===h.Syntax.Identifier||l.inFor||this.expect("\x3d");return this.finalize(m,new d.VariableDeclarator(r,t))};p.prototype.parseVariableDeclarationList=function(l){for(var m=[this.parseVariableDeclaration(l)];this.match(",");)this.nextToken(),m.push(this.parseVariableDeclaration(l));return m};p.prototype.parseVariableStatement=function(){var l=this.createNode();this.expectKeyword("var");var m=this.parseVariableDeclarationList({inFor:!1});
this.consumeSemicolon();return this.finalize(l,new d.VariableDeclaration(m,"var"))};p.prototype.parseEmptyStatement=function(){var l=this.createNode();this.expect(";");return this.finalize(l,new d.EmptyStatement)};p.prototype.parseExpressionStatement=function(){var l=this.createNode(),m=this.parseExpression();this.consumeSemicolon();return this.finalize(l,new d.ExpressionStatement(m))};p.prototype.parseIfClause=function(){var l=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";
var m=this.parseStatement();this.context.curlyParsing=l;return m};p.prototype.parseIfStatement=function(){var l=this.createNode(),m=null;this.expectKeyword("if");this.expect("(");var r=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var t=this.finalize(this.createNode(),new d.EmptyStatement)}else this.expect(")"),t=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),m=this.parseIfClause());return this.finalize(l,new d.IfStatement(r,
t,m))};p.prototype.parseForStatement=function(){var l=null,m=null,r=null,t=null,x=null,v=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var z=this.createNode();this.nextToken();var A=this.context.allowIn;this.context.allowIn=!1;var B=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=A;1===B.length&&this.matchKeyword("in")?(B[0].init&&this.tolerateError(c.Messages.ForInOfLoopInitializer,"for-in"),t=
this.finalize(z,new d.VariableDeclaration(B,"var")),this.nextToken(),x=this.parseExpression()):(l=this.finalize(z,new d.VariableDeclaration(B,"var")),this.expect(";"))}else{z=this.context.isBindingElement;B=this.context.isAssignmentTarget;var u=this.context.firstCoverInitializedNameError;A=this.context.allowIn;this.context.allowIn=!1;l=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=A;this.matchKeyword("in")?(this.context.isAssignmentTarget&&l.type!==h.Syntax.AssignmentExpression||
this.tolerateError(c.Messages.InvalidLHSInForIn),this.nextToken(),t=l,x=this.parseExpression(),l=null):(this.context.isBindingElement=z,this.context.isAssignmentTarget=B,this.context.firstCoverInitializedNameError=u,this.expect(";"))}t||(this.match(";")||(m=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(r=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),A=this.finalize(this.createNode(),
new d.EmptyStatement)):(this.expect(")"),z=this.context.inIteration,B=this.context.curlyParsing,this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",A=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=B,this.context.inIteration=z);return t&&x?this.finalize(v,new d.ForInStatement(t,x,A)):this.finalize(v,new d.ForStatement(l,m,r,A))};p.prototype.parseContinueStatement=function(){var l=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(l,
new d.ContinueStatement)};p.prototype.parseBreakStatement=function(){var l=this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(l,new d.BreakStatement)};p.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(c.Messages.IllegalReturn);var l=this.createNode();this.expectKeyword("return");var m=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===n.TokenType.EOF)&&this.lookahead.type!==
n.TokenType.StringLiteral&&this.lookahead.type!==n.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize(l,new d.ReturnStatement(m))};p.prototype.parseStatement=function(){switch(this.lookahead.type){case n.TokenType.BooleanLiteral:case n.TokenType.NullLiteral:case n.TokenType.NumericLiteral:case n.TokenType.StringLiteral:case n.TokenType.Template:case n.TokenType.Identifier:var l=this.parseExpressionStatement();break;case n.TokenType.Punctuator:l=this.lookahead.value;
l="{"===l?this.parseBlockOrObjectStatement():"("===l?this.parseExpressionStatement():";"===l?this.parseEmptyStatement():this.parseExpressionStatement();break;case n.TokenType.Keyword:switch(this.lookahead.value.toLowerCase()){case "break":l=this.parseBreakStatement();break;case "continue":l=this.parseContinueStatement();break;case "for":l=this.parseForStatement();break;case "function":l=this.parseFunctionDeclaration();break;case "if":l=this.parseIfStatement();break;case "return":l=this.parseReturnStatement();
break;case "var":l=this.parseVariableStatement();break;default:l=this.parseExpressionStatement()}break;default:l=this.throwUnexpectedToken(this.lookahead)}return l};p.prototype.parseFunctionSourceElements=function(){var l=this.createNode();this.expect("{");var m=this.context.inIteration,r=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var t=[];this.lookahead.type!==n.TokenType.EOF&&!this.match("}");)t.push(this.parseStatementListItem());this.expect("}");
this.context.inIteration=m;this.context.inFunctionBody=r;return this.finalize(l,new d.BlockStatement(t))};p.prototype.parseFormalParameters=function(){var l=[];this.expect("(");if(!this.match(")"))for(;this.lookahead.type!==n.TokenType.EOF;){l.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return l};p.prototype.parseFunctionDeclaration=function(){var l=this.createNode();this.expectKeyword("function");var m=this.parseVariableIdentifier(),
r=this.parseFormalParameters(),t=this.parseFunctionSourceElements();return this.finalize(l,new d.FunctionDeclaration(m,r,t))};p.prototype.parseScript=function(){for(var l=this.createNode(),m=[];this.lookahead.type!==n.TokenType.EOF;)m.push(this.parseStatementListItem());return this.finalize(l,new d.Program(m))};return p}();q.Parser=F})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.assert=void 0;q.assert=function(a,
b){if(!a)throw Error("ASSERT: "+b);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.ErrorHandler=void 0;var a=function(){function b(){this.errors=[];this.tolerant=!1}b.prototype.recordError=function(e){this.errors.push(e)};b.prototype.tolerate=function(e){if(this.tolerant)this.recordError(e);else throw e;};b.prototype.constructError=function(e,g){var k=Error(e);try{throw k;}catch(c){Object.create&&Object.defineProperty&&
(k=Object.create(c),Object.defineProperty(k,"column",{value:g}))}return k};b.prototype.createError=function(e,g,k,c){k=this.constructError("Line "+g+": "+c,k);k.index=e;k.lineNumber=g;k.description=c;return k};b.prototype.throwError=function(e,g,k,c){throw this.createError(e,g,k,c);};b.prototype.tolerateError=function(e,g,k,c){e=this.createError(e,g,k,c);if(this.tolerant)this.recordError(e);else throw e;};return b}();q.ErrorHandler=a})},"esri/arcade/lib/messages":function(){define(["require","exports"],
function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.Messages=void 0;q.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",
InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",
UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},"esri/arcade/lib/nodes":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/extends ./syntax".split(" "),
function(F,q,a,b,e,g){Object.defineProperty(q,"__esModule",{value:!0});q.VariableDeclarator=q.VariableDeclaration=q.UpdateExpression=q.UpdateOperators=q.UnaryExpression=q.UnaryOperators=q.TemplateLiteral=q.TemplateElement=q.Program=q.ReturnStatement=q.Property=q.ObjectExpression=q.Literal=q.IfStatement=q.Identifier=q.FunctionDeclaration=q.ForStatement=q.ForInStatement=q.ExpressionStatement=q.EmptyStatement=q.ContinueStatement=q.StaticMemberExpression=q.ComputedMemberExpression=q.CallExpression=q.BreakStatement=
q.BlockStatement=q.BinaryExpression=q.BinaryOperators=q.LogicalOperators=q.AssignmentExpression=q.AssignmentOperators=q.ArrayExpression=q.Comment=void 0;F=function(){return function(){}}();a=function(k){function c(d,f){var h=k.call(this)||this;h.type=d;h.value=f;return h}e(c,k);return c}(F);q.Comment=a;a=function(k){function c(d){var f=k.call(this)||this;f.elements=d;f.type=g.Syntax.ArrayExpression;return f}e(c,k);return c}(F);q.ArrayExpression=a;q.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");
a=function(k){function c(d,f,h){var n=k.call(this)||this;n.operator=d;n.left=f;n.right=h;n.type=g.Syntax.AssignmentExpression;return n}e(c,k);return c}(F);q.AssignmentExpression=a;q.LogicalOperators=["||","\x26\x26"];q.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");a=function(k){function c(d,f,h){var n=k.call(this)||this;n.operator=d;n.left=f;n.right=h;n.type=q.LogicalOperators.includes(d)?g.Syntax.LogicalExpression:
g.Syntax.BinaryExpression;return n}e(c,k);return c}(F);q.BinaryExpression=a;a=function(k){function c(d){var f=k.call(this)||this;f.body=d;f.type=g.Syntax.BlockStatement;return f}e(c,k);return c}(F);q.BlockStatement=a;a=function(k){function c(){var d=null!==k&&k.apply(this,arguments)||this;d.type=g.Syntax.BreakStatement;return d}e(c,k);return c}(F);q.BreakStatement=a;a=function(k){function c(d,f){var h=k.call(this)||this;h.callee=d;h.args=f;h.type=g.Syntax.CallExpression;h.arguments=f;return h}e(c,
k);return c}(F);q.CallExpression=a;a=function(k){function c(d,f){var h=k.call(this)||this;h.object=d;h.property=f;h.type=g.Syntax.MemberExpression;h.computed=!0;return h}e(c,k);return c}(F);q.ComputedMemberExpression=a;a=function(k){function c(d,f){var h=k.call(this)||this;h.object=d;h.property=f;h.type=g.Syntax.MemberExpression;h.computed=!1;return h}e(c,k);return c}(F);q.StaticMemberExpression=a;a=function(k){function c(){var d=null!==k&&k.apply(this,arguments)||this;d.type=g.Syntax.ContinueStatement;
return d}e(c,k);return c}(F);q.ContinueStatement=a;a=function(k){function c(){var d=null!==k&&k.apply(this,arguments)||this;d.type=g.Syntax.EmptyStatement;return d}e(c,k);return c}(F);q.EmptyStatement=a;a=function(k){function c(d){var f=k.call(this)||this;f.expression=d;f.type=g.Syntax.ExpressionStatement;return f}e(c,k);return c}(F);q.ExpressionStatement=a;a=function(k){function c(d,f,h){var n=k.call(this)||this;n.left=d;n.right=f;n.body=h;n.type=g.Syntax.ForInStatement;n.each=!1;return n}e(c,k);
return c}(F);q.ForInStatement=a;a=function(k){function c(d,f,h,n){var p=k.call(this)||this;p.init=d;p.test=f;p.update=h;p.body=n;p.type=g.Syntax.ForStatement;return p}e(c,k);return c}(F);q.ForStatement=a;a=function(k){function c(d,f,h){var n=k.call(this)||this;n.id=d;n.params=f;n.body=h;n.type=g.Syntax.FunctionDeclaration;n.generator=!1;n.expression=!1;n.async=!1;return n}e(c,k);return c}(F);q.FunctionDeclaration=a;a=function(k){function c(d){var f=k.call(this)||this;f.name=d;f.type=g.Syntax.Identifier;
return f}e(c,k);return c}(F);q.Identifier=a;a=function(k){function c(d,f,h){var n=k.call(this)||this;n.test=d;n.consequent=f;n.alternate=h;n.type=g.Syntax.IfStatement;return n}e(c,k);return c}(F);q.IfStatement=a;a=function(k){function c(d,f){var h=k.call(this)||this;h.value=d;h.raw=f;h.type=g.Syntax.Literal;return h}e(c,k);return c}(F);q.Literal=a;a=function(k){function c(d){var f=k.call(this)||this;f.properties=d;f.type=g.Syntax.ObjectExpression;return f}e(c,k);return c}(F);q.ObjectExpression=a;
a=function(k){function c(d,f,h,n,p,l){var m=k.call(this)||this;m.kind=d;m.key=f;m.computed=h;m.value=n;m.method=p;m.shorthand=l;m.type=g.Syntax.Property;return m}e(c,k);return c}(F);q.Property=a;a=function(k){function c(d){var f=k.call(this)||this;f.argument=d;f.type=g.Syntax.ReturnStatement;return f}e(c,k);return c}(F);q.ReturnStatement=a;a=function(k){function c(d){var f=k.call(this)||this;f.body=d;f.type=g.Syntax.Program;return f}e(c,k);return c}(F);q.Program=a;a=function(k){function c(d,f){var h=
k.call(this)||this;h.value=d;h.tail=f;h.type=g.Syntax.TemplateElement;return h}e(c,k);return c}(F);q.TemplateElement=a;a=function(k){function c(d,f){var h=k.call(this)||this;h.quasis=d;h.expressions=f;h.type=g.Syntax.TemplateLiteral;return h}e(c,k);return c}(F);q.TemplateLiteral=a;q.UnaryOperators=["-","+","!","~"];a=function(k){function c(d,f){var h=k.call(this)||this;h.operator=d;h.argument=f;h.type=g.Syntax.UnaryExpression;h.prefix=!0;return h}e(c,k);return c}(F);q.UnaryExpression=a;q.UpdateOperators=
["++","--"];a=function(k){function c(d,f,h){var n=k.call(this)||this;n.operator=d;n.argument=f;n.prefix=h;n.type=g.Syntax.UpdateExpression;return n}e(c,k);return c}(F);q.UpdateExpression=a;a=function(k){function c(d,f){var h=k.call(this)||this;h.declarations=d;h.kind=f;h.type=g.Syntax.VariableDeclaration;return h}e(c,k);return c}(F);q.VariableDeclaration=a;F=function(k){function c(d,f){var h=k.call(this)||this;h.id=d;h.init=f;h.type=g.Syntax.VariableDeclarator;return h}e(c,k);return c}(F);q.VariableDeclarator=
F})},"esri/arcade/lib/scanner":function(){define("require exports ./assert ./character ./messages ./token".split(" "),function(F,q,a,b,e,g){Object.defineProperty(q,"__esModule",{value:!0});q.Scanner=void 0;F=function(){function k(c,d){this.source=c;this.errorHandler=d;this.isModule=this.trackComment=!1;this.length=c.length;this.index=0;this.lineNumber=0<c.length?1:0;this.lineStart=0;this.curlyStack=[]}k.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,
curlyStack:this.curlyStack.slice()}};k.prototype.restoreState=function(c){this.index=c.index;this.lineNumber=c.lineNumber;this.lineStart=c.lineStart;this.curlyStack=c.curlyStack};k.prototype.eof=function(){return this.index>=this.length};k.prototype.throwUnexpectedToken=function(c){void 0===c&&(c=e.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,c)};k.prototype._tolerateUnexpectedToken=function(c){void 0===c&&(c=e.Messages.UnexpectedTokenIllegal);
this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,c)};k.prototype._skipSingleLineComment=function(c){var d=[],f=0,h=null;this.trackComment&&(d=[],f=this.index-c,h={start:{line:this.lineNumber,column:this.index-this.lineStart-c},end:{line:0,column:0}});for(;!this.eof();){var n=this.source.charCodeAt(this.index);++this.index;if(b.Character.isLineTerminator(n))return h&&(h.end={line:this.lineNumber,column:this.index-this.lineStart-1},c={multiLine:!1,slice:[f+c,this.index-
1],range:[f,this.index-1],loc:h},d.push(c)),13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,d}h&&(h.end={line:this.lineNumber,column:this.index-this.lineStart},c={multiLine:!1,slice:[f+c,this.index],range:[f,this.index],loc:h},d.push(c));return d};k.prototype._skipMultiLineComment=function(){var c=[],d=0,f=null;this.trackComment&&(d=this.index-2,f={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var h=
this.source.charCodeAt(this.index);if(b.Character.isLineTerminator(h))13===h&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===h&&47===this.source.charCodeAt(this.index+1))return this.index+=2,f&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!0,slice:[d+2,this.index-2],range:[d,this.index],loc:f},c.push(d)),c;++this.index}}f&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!0,
slice:[d+2,this.index],range:[d,this.index],loc:f},c.push(d));this._tolerateUnexpectedToken();return c};k.prototype.scanComments=function(){var c=null;this.trackComment&&(c=[]);for(var d=0===this.index;!this.eof();){var f=this.source.charCodeAt(this.index);if(b.Character.isWhiteSpace(f))++this.index;else if(b.Character.isLineTerminator(f))++this.index,13===f&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,d=!0;else if(47===f)if(f=this.source.charCodeAt(this.index+
1),47===f)this.index+=2,f=this._skipSingleLineComment(2),c&&(c=c.concat(f)),d=!0;else if(42===f)this.index+=2,f=this._skipMultiLineComment(),c&&(c=c.concat(f));else break;else if(d&&45===f)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,f=this._skipSingleLineComment(3),c&&(c=c.concat(f));else break;else if(60!==f||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,f=this._skipSingleLineComment(4),c&&
(c=c.concat(f));else break}return c};k.prototype._isKeyword=function(c){c=c.toLowerCase();switch(c.length){case 2:return"if"===c||"in"===c;case 3:return"var"===c||"for"===c;case 4:return"else"===c;case 5:return"break"===c;case 6:return"return"===c;case 8:return"function"===c||"continue"===c;default:return!1}};k.prototype._codePointAt=function(c){var d=this.source.charCodeAt(c);55296<=d&&56319>=d&&(c=this.source.charCodeAt(c+1),56320<=c&&57343>=c&&(d=1024*(d-55296)+c-56320+65536));return d};k.prototype._scanHexEscape=
function(c){c="u"===c?4:2;for(var d=0,f=0;f<c;++f)if(!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index)))d=16*d+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(d)};k.prototype._scanUnicodeCodePointEscape=function(){var c=this.source[this.index],d=0;for("}"===c&&this.throwUnexpectedToken();!this.eof();){c=this.source[this.index++];if(!b.Character.isHexDigit(c.charCodeAt(0)))break;d=16*d+"0123456789abcdef".indexOf(c.toLowerCase())}(1114111<
d||"}"!==c)&&this.throwUnexpectedToken();return b.Character.fromCodePoint(d)};k.prototype._getIdentifier=function(){for(var c=this.index++;!this.eof();){var d=this.source.charCodeAt(this.index);if(92===d||55296<=d&&57343>d)return this.index=c,this._getComplexIdentifier();if(b.Character.isIdentifierPart(d))++this.index;else break}return this.source.slice(c,this.index)};k.prototype._getComplexIdentifier=function(){var c=this._codePointAt(this.index),d=b.Character.fromCodePoint(c);this.index+=d.length;
if(92===c){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var f=this._scanUnicodeCodePointEscape()}else f=this._scanHexEscape("u"),null!==f&&"\\"!==f&&b.Character.isIdentifierStart(f.charCodeAt(0))||this.throwUnexpectedToken();d=f}for(;!this.eof();){c=this._codePointAt(this.index);if(!b.Character.isIdentifierPart(c))break;f=b.Character.fromCodePoint(c);d+=f;this.index+=f.length;92===c&&(d=d.substr(0,d.length-1),117!==
this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,f=this._scanUnicodeCodePointEscape()):(f=this._scanHexEscape("u"),null!==f&&"\\"!==f&&b.Character.isIdentifierPart(f.charCodeAt(0))||this.throwUnexpectedToken()),d+=f)}return d};k.prototype._octalToDecimal=function(c){var d="0"!==c,f="01234567".indexOf(c);!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(d=!0,f=8*f+"01234567".indexOf(this.source[this.index++]),
"0123".includes(c)&&!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(f=8*f+"01234567".indexOf(this.source[this.index++])));return{code:f,octal:d}};k.prototype._scanIdentifier=function(){var c=this.index,d=92===this.source.charCodeAt(c)?this._getComplexIdentifier():this._getIdentifier();var f=1===d.length?g.TokenType.Identifier:this._isKeyword(d)?g.TokenType.Keyword:"null"===d.toLowerCase()?g.TokenType.NullLiteral:"true"===d.toLowerCase()||"false"===d.toLowerCase()?g.TokenType.BooleanLiteral:
g.TokenType.Identifier;if(f!==g.TokenType.Identifier&&c+d.length!==this.index){var h=this.index;this.index=c;this._tolerateUnexpectedToken(e.Messages.InvalidEscapedReservedWord);this.index=h}return{type:f,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};k.prototype._scanPunctuator=function(){var c=this.index,d=this.source[this.index];switch(d){case "(":case "{":"{"===d&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;
this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:d=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===d?this.index+=4:(d=d.substr(0,3),"\x3d\x3d\x3d"===d||"!\x3d\x3d"===d||"\x3e\x3e\x3e"===d||"\x3c\x3c\x3d"===d||"\x3e\x3e\x3d"===d||"**\x3d"===d?this.index+=3:(d=d.substr(0,2),"\x26\x26"===d||"||"===d||"\x3d\x3d"===d||"!\x3d"===d||"+\x3d"===d||"-\x3d"===d||"*\x3d"===d||"/\x3d"===d||"++"===d||"--"===d||"\x3c\x3c"===d||"\x3e\x3e"===
d||"\x26\x3d"===d||"|\x3d"===d||"^\x3d"===d||"%\x3d"===d||"\x3c\x3d"===d||"\x3e\x3d"===d||"\x3d\x3e"===d||"**"===d?this.index+=2:(d=this.source[this.index],"\x3c\x3e\x3d!+-*%\x26|^/".includes(d)&&++this.index)))}this.index===c&&this.throwUnexpectedToken();return{type:g.TokenType.Punctuator,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};k.prototype._scanHexLiteral=function(c){for(var d="";!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index));)d+=
this.source[this.index++];0===d.length&&this.throwUnexpectedToken();b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:g.TokenType.NumericLiteral,value:parseInt("0x"+d,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};k.prototype._scanBinaryLiteral=function(c){for(var d="";!this.eof();){var f=this.source[this.index];if("0"!==f&&"1"!==f)break;d+=this.source[this.index++]}0===d.length&&this.throwUnexpectedToken();
this.eof()||(f=this.source.charCodeAt(this.index),(b.Character.isIdentifierStart(f)||b.Character.isDecimalDigit(f))&&this.throwUnexpectedToken());return{type:g.TokenType.NumericLiteral,value:parseInt(d,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};k.prototype._scanOctalLiteral=function(c,d){var f="",h=!1;b.Character.isOctalDigit(c.charCodeAt(0))?(h=!0,f="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index));)f+=
this.source[this.index++];h||0!==f.length||this.throwUnexpectedToken();(b.Character.isIdentifierStart(this.source.charCodeAt(this.index))||b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:g.TokenType.NumericLiteral,value:parseInt(f,8),octal:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};k.prototype._scanNumericLiteral=function(){var c=this.index,d=this.source[c];a.assert(b.Character.isDecimalDigit(d.charCodeAt(0))||
"."===d,"Numeric literal must start with a decimal digit or a decimal point");var f="";if("."!==d){f=this.source[this.index++];d=this.source[this.index];if("0"===f){if("x"===d||"X"===d)return++this.index,this._scanHexLiteral(c);if("b"===d||"B"===d)return++this.index,this._scanBinaryLiteral(c);if("o"===d||"O"===d)return this._scanOctalLiteral(d,c)}for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];d=this.source[this.index]}if("."===d){for(f+=this.source[this.index++];b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=
this.source[this.index++];d=this.source[this.index]}if("e"===d||"E"===d){f+=this.source[this.index++];d=this.source[this.index];if("+"===d||"-"===d)f+=this.source[this.index++];if(b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];else this.throwUnexpectedToken()}b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:g.TokenType.NumericLiteral,
value:parseFloat(f),lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};k.prototype._scanStringLiteral=function(){var c=this.index,d=this.source[c];a.assert("'"===d||'"'===d,"String literal must starts with a quote");++this.index;for(var f=!1,h="";!this.eof();){var n=this.source[this.index++];if(n===d){d="";break}if("\\"===n)if((n=this.source[this.index++])&&b.Character.isLineTerminator(n.charCodeAt(0)))++this.lineNumber,"\r"===n&&"\n"===this.source[this.index]&&++this.index,
this.lineStart=this.index;else switch(n){case "u":"{"===this.source[this.index]?(++this.index,h+=this._scanUnicodeCodePointEscape()):(n=this._scanHexEscape(n),null===n&&this.throwUnexpectedToken(),h+=n);break;case "x":n=this._scanHexEscape(n);null===n&&this.throwUnexpectedToken(e.Messages.InvalidHexEscapeSequence);h+=n;break;case "n":h+="\n";break;case "r":h+="\r";break;case "t":h+="\t";break;case "b":h+="\b";break;case "f":h+="\f";break;case "v":h+="\x0B";break;case "8":case "9":h+=n;this._tolerateUnexpectedToken();
break;default:n&&b.Character.isOctalDigit(n.charCodeAt(0))?(n=this._octalToDecimal(n),f=n.octal||f,h+=String.fromCharCode(n.code)):h+=n}else if(b.Character.isLineTerminator(n.charCodeAt(0)))break;else h+=n}""!==d&&(this.index=c,this.throwUnexpectedToken());return{type:g.TokenType.StringLiteral,value:h,octal:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};k.prototype._scanTemplate=function(){var c="",d=!1,f=this.index,h="`"===this.source[f],n=!1,p=2;for(++this.index;!this.eof();){var l=
this.source[this.index++];if("`"===l){p=1;d=n=!0;break}if("$"===l){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;d=!0;break}c+=l}else if("\\"===l)if(l=this.source[this.index++],b.Character.isLineTerminator(l.charCodeAt(0)))++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(l){case "n":c+="\n";break;case "r":c+="\r";break;case "t":c+="\t";break;case "u":if("{"===this.source[this.index])++this.index,c+=this._scanUnicodeCodePointEscape();
else{var m=this.index,r=this._scanHexEscape(l);null!==r?c+=r:(this.index=m,c+=l)}break;case "x":l=this._scanHexEscape(l);null===l&&this.throwUnexpectedToken(e.Messages.InvalidHexEscapeSequence);c+=l;break;case "b":c+="\b";break;case "f":c+="\f";break;case "v":c+="\v";break;default:"0"===l?(b.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(e.Messages.TemplateOctalLiteral),c+="\x00"):b.Character.isOctalDigit(l.charCodeAt(0))?this.throwUnexpectedToken(e.Messages.TemplateOctalLiteral):
c+=l}else b.Character.isLineTerminator(l.charCodeAt(0))?(++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,c+="\n"):c+=l}d||this.throwUnexpectedToken();h||this.curlyStack.pop();return{type:g.TokenType.Template,value:this.source.slice(f+1,this.index-p),cooked:c,head:h,tail:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};k.prototype._testRegExp=function(c,d){var f=this,h=c;d.includes("u")&&(h=h.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(n,p,l){n=parseInt(p||l,16);1114111<n&&f.throwUnexpectedToken(e.Messages.InvalidRegExp);return 65535>=n?String.fromCharCode(n):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(h)}catch(n){this.throwUnexpectedToken(e.Messages.InvalidRegExp)}try{return new RegExp(c,d)}catch(n){return null}};k.prototype._scanRegExpBody=function(){var c=this.source[this.index];a.assert("/"===c,"Regular expression literal must start with a slash");for(var d=this.source[this.index++],f=
!1,h=!1;!this.eof();)if(c=this.source[this.index++],d+=c,"\\"===c)c=this.source[this.index++],b.Character.isLineTerminator(c.charCodeAt(0))&&this.throwUnexpectedToken(e.Messages.UnterminatedRegExp),d+=c;else if(b.Character.isLineTerminator(c.charCodeAt(0)))this.throwUnexpectedToken(e.Messages.UnterminatedRegExp);else if(f)"]"===c&&(f=!1);else{if("/"===c){h=!0;break}"["===c&&(f=!0)}h||this.throwUnexpectedToken(e.Messages.UnterminatedRegExp);return d.substr(1,d.length-2)};k.prototype._scanRegExpFlags=
function(){for(var c="";!this.eof();){var d=this.source[this.index];if(!b.Character.isIdentifierPart(d.charCodeAt(0)))break;++this.index;if("\\"!==d||this.eof())c+=d;else{d=this.source[this.index];if("u"===d){++this.index;d=this.index;var f=this._scanHexEscape("u");if(null!==f)for(c+=f;d<this.index;++d);else this.index=d,c+="u"}this._tolerateUnexpectedToken()}}return c};k.prototype.scanRegExp=function(){var c=this.index,d=this._scanRegExpBody(),f=this._scanRegExpFlags(),h=this._testRegExp(d,f);return{type:g.TokenType.RegularExpression,
value:"",pattern:d,flags:f,regex:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};k.prototype.lex=function(){if(this.eof())return{type:g.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var c=this.source.charCodeAt(this.index);return b.Character.isIdentifierStart(c)?this._scanIdentifier():40===c||41===c||59===c?this._scanPunctuator():39===c||34===c?this._scanStringLiteral():46===c?b.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this._scanNumericLiteral():this._scanPunctuator():b.Character.isDecimalDigit(c)?this._scanNumericLiteral():96===c||125===c&&"${"===this.curlyStack[this.curlyStack.length-1]?this._scanTemplate():55296<=c&&57343>c&&b.Character.isIdentifierStart(this._codePointAt(this.index))?this._scanIdentifier():this._scanPunctuator()};return k}();q.Scanner=F})},"esri/arcade/lib/character":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.Character=void 0;
var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
q.Character={fromCodePoint:function(e){return 65536>e?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||92===e||
128<=e&&a.test(q.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||48<=e&&57>=e||92===e||128<=e&&b.test(q.Character.fromCodePoint(e))},isDecimalDigit:function(e){return 48<=e&&57>=e},isHexDigit:function(e){return 48<=e&&57>=e||65<=e&&70>=e||97<=e&&102>=e},isOctalDigit:function(e){return 48<=e&&55>=e}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.TokenName=
q.TokenType=void 0;var a,b=a=q.TokenType||(q.TokenType={});b[b.BooleanLiteral=1]="BooleanLiteral";b[b.EOF=2]="EOF";b[b.Identifier=3]="Identifier";b[b.Keyword=4]="Keyword";b[b.NullLiteral=5]="NullLiteral";b[b.NumericLiteral=6]="NumericLiteral";b[b.Punctuator=7]="Punctuator";b[b.StringLiteral=8]="StringLiteral";b[b.RegularExpression=9]="RegularExpression";b[b.Template=10]="Template";q.TokenName={};q.TokenName[a.BooleanLiteral]="Boolean";q.TokenName[a.EOF]="\x3cend\x3e";q.TokenName[a.Identifier]="Identifier";
q.TokenName[a.Keyword]="Keyword";q.TokenName[a.NullLiteral]="Null";q.TokenName[a.NumericLiteral]="Numeric";q.TokenName[a.Punctuator]="Punctuator";q.TokenName[a.StringLiteral]="String";q.TokenName[a.RegularExpression]="RegularExpression";q.TokenName[a.Template]="Template"})},"esri/arcade/lib/tokenizer":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ./error-handler ./nodes ./scanner ./token".split(" "),function(F,q,a,b,e,g,k,c){Object.defineProperty(q,
"__esModule",{value:!0});q.Tokenizer=void 0;var d=function(){function f(){this.values=[];this.curly=this.paren=-1}f.prototype.beforeFunctionExpression=function(h){return b(b(b(b(["(","{","[","return",","],g.AssignmentOperators),g.BinaryOperators),g.LogicalOperators),g.UnaryOperators).includes(h)};f.prototype.isRegexStart=function(){var h=this.values[this.values.length-1],n=null!==h;switch(h){case "this":case "]":n=!1;break;case ")":h=this.values[this.paren-1];n="if"===h||"while"===h||"for"===h||"with"===
h;break;case "}":n=!0,"function"===this.values[this.curly-3]?n=(h=this.values[this.curly-4])?!this.beforeFunctionExpression(h):!1:"function"===this.values[this.curly-4]&&(n=(h=this.values[this.curly-5])?!this.beforeFunctionExpression(h):!0)}return n};f.prototype.push=function(h){h.type===c.TokenType.Punctuator||h.type===c.TokenType.Keyword?("{"===h.value?this.curly=this.values.length:"("===h.value&&(this.paren=this.values.length),this.values.push(h.value)):this.values.push(null)};return f}();F=function(){function f(h,
n){this.errorHandler=new e.ErrorHandler;this.errorHandler.tolerant=n?"boolean"===typeof n.tolerant&&n.tolerant:!1;this.scanner=new k.Scanner(h,this.errorHandler);this.scanner.trackComment=n?"boolean"===typeof n.comment&&n.comment:!1;this.trackRange=n?"boolean"===typeof n.range&&n.range:!1;this.trackLoc=n?"boolean"===typeof n.loc&&n.loc:!1;this.buffer=[];this.reader=new d}f.prototype.errors=function(){return this.errorHandler.errors};f.prototype.getNextToken=function(){if(0===this.buffer.length){var h=
this.scanner.scanComments();if(h)for(var n=0;n<h.length;++n){var p=h[n],l=this.scanner.source.slice(p.slice[0],p.slice[1]);l={type:p.multiLine?"BlockComment":"LineComment",value:l};this.trackRange&&(l.range=p.range);this.trackLoc&&(l.loc=p.loc);this.buffer.push(l)}if(!this.scanner.eof()){h=null;this.trackLoc&&(h={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});n=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){p=
this.scanner.saveState();try{n=this.scanner.scanRegExp()}catch(m){this.scanner.restoreState(p),n=this.scanner.lex()}}else n=this.scanner.lex();this.reader.push(n);p={type:c.TokenName[n.type],value:this.scanner.source.slice(n.start,n.end)};this.trackRange&&(p.range=[n.start,n.end]);this.trackLoc&&h&&(h.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},p.loc=h);n.type===c.TokenType.RegularExpression&&(p.regex={pattern:n.pattern,flags:n.flags});this.buffer.push(p)}}return this.buffer.shift()};
return f}();q.Tokenizer=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(F,q,a){function b(k,c){Array.isArray(c)?(k[0]=c[0],k[1]=c[1],k[2]=c[2],k[3]=c[3]):(k[0]=c.r,k[1]=c.g,k[2]=c.b,k[3]=c.a);return k}function e(k,c,d){void 0===c&&(c=0);void 0===d&&(d=!1);var f=k[c+3];k[c+0]*=f;k[c+1]*=f;k[c+2]*=f;d||(k[c+3]*=255);return k}Object.defineProperty(q,"__esModule",{value:!0});q.white=[255,255,255,1];var g=[0,0,0,0];q.premultiplyAlpha=
e;q.copyAndPremultiply=function(k){return e(b([],k))};q.premultiplyAlphaUint32=function(k){e(b(g,k));return a.i8888to32(g[0],g[1],g[2],g[3])};q.premultiplyAlphaRGBA=function(k){if(!k)return 0;var c=k.a;return a.i8888to32(k.r*c,k.g*c,k.b*c,255*c)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});var a=new Float32Array(1),b=new Uint32Array(a.buffer);q.nextHighestPowerOfTwo=function(e){e--;
e|=e>>1;e|=e>>2;e|=e>>4;e|=e>>8;e|=e>>16;e++;return e};q.toUint32=function(e){a[0]=e;return b[0]};q.i1616to32=function(e,g){return 65535&e|g<<16};q.i8888to32=function(e,g,k,c){return e&255|(g&255)<<8|(k&255)<<16|c<<24};q.i8816to32=function(e,g,k){return e&255|(g&255)<<8|k<<16};q.numTo32=function(e){return e|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(F,q,a){Object.defineProperty(q,"__esModule",
{value:!0});F=function(){function b(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}b.prototype.acquire=function(e,g,k,c,d,f,h,n,p){this.color=e;this.haloColor=g;this.haloSize=k;this.size=c;this.angle=d;this.offsetX=f;this.offsetY=h;this.hAnchor=n;this.vAnchor=p};b.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=
this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};b.pool=new a(b);return b}();q.TextProperties=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h){Object.defineProperty(q,"__esModule",{value:!0});F=function(n){function p(){var l=n.call(this)||this;l._initialized=!1;l._maxWidth=0;l._color=new Float32Array([1,0,0,1]);return l}a(p,n);p.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=
null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};p.prototype.draw=function(l,m){var r=l.context;if(m.status!==k.TileStatus.INITIALIZED){this._initialized||this._initialize(r);r.bindVAO(this._outlineVertexArrayObject);r.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",m.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord);
this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);r.setLineWidth(2);r.drawArrays(3,0,4);r.bindVAO();var t=this._getTexture(r,m);t&&(r.bindVAO(this._tileInfoVertexArrayObject),r.bindProgram(this._tileInfoProgram),r.bindTexture(t,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",m.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord),
this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",t.descriptor.width,t.descriptor.height),r.drawArrays(5,0,4),r.bindVAO())}};p.prototype._initialize=function(l){if(this._initialized)return!0;var m={a_pos:0},r=new d(l,g.backgroundVS,g.backgroundFS,m),t=new d(l,g.tileInfoVS,g.tileInfoFS,m),x={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,
normalized:!1,divisor:0}]},v=new Int8Array([0,0,1,0,1,1,0,1]);v=c.createVertex(l,35044,v);v=new h(l,m,x,{geometry:v});var z=new Int8Array([0,0,1,0,0,1,1,1]);z=c.createVertex(l,35044,z);l=new h(l,m,x,{geometry:z});this._outlineProgram=r;this._tileInfoProgram=t;this._outlineVertexArrayObject=v;this._tileInfoVertexArrayObject=l;return this._initialized=!0};p.prototype._getTexture=function(l,m){if(m.texture)return m.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",
"canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var r=m.key.id,t=this._canvas.getContext("2d");t.font="24px sans-serif";t.textAlign="left";t.textBaseline="middle";var x=t.measureText(r);x=Math.pow(2,Math.ceil(b.log2(x.width+2)));x>this._maxWidth&&(this._maxWidth=x);t.clearRect(0,0,this._maxWidth,32);t.fillStyle="blue";t.fillText(r,0,16);m.texture=new f(l,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},
this._canvas);return m.texture};return p}(e["default"]);q["default"]=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){return function(){}}();q["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),
function(F,q,a,b,e,g,k){F=new k;k.parse(a,F);k.parse(b,F);k.parse(e,F);k.parse(g,F);return F})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});var a=q.TileStatus||(q.TileStatus={});a[a.INITIALIZED=0]="INITIALIZED";a[a.NO_DATA=1]="NO_DATA";a[a.READY=2]="READY";a[a.MODIFIED=3]="MODIFIED";a[a.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports",
"dojo/has"],function(F,q,a){return function(){function b(e,g,k,c,d){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=e;this._bufferType=g;this._usage=k;this._id=b._nextId++;this._glName=this._context.gl.createBuffer();a("esri-webgl-debug")&&e.instanceCounter.incrementCount(1);c&&this.setData(c,d)}b.createIndex=function(e,g,k,c){return new b(e,34963,g,k,c)};b.createVertex=function(e,g,k){return new b(e,34962,g,k)};Object.defineProperty(b.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),
this._context=null)};b.prototype.setData=function(e,g){if(e){if("number"===typeof e){if(34963===this._bufferType&&g)switch(this._indexType=g,this._size=e,g){case 5123:e*=2;break;case 5125:e*=4}}else{var k=e.byteLength;e instanceof Uint16Array&&(k/=2,this._indexType=5123);e instanceof Uint32Array&&(k/=4,this._indexType=5125);this._size=k;ArrayBuffer.isView(e)&&(e=e.buffer)}k=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,
e,this._usage);this._context.bindVAO(k)}};b.prototype.setSubData=function(e,g,k,c){void 0===g&&(g=0);void 0===k&&(k=0);if(e){var d=c,f=e.byteLength;e instanceof Uint16Array&&(f/=2,g*=2,k*=2,d*=2);e instanceof Uint32Array&&(f/=4,g*=4,k*=4,d*=4);void 0===c&&(c=f-1);c=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);f=this._context.gl;e=ArrayBuffer.isView(e)?e.buffer:e;f.bufferSubData(this._bufferType,g,e.slice(k,d));this._context.bindVAO(c)}};b._nextId=0;return b}()})},
"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(F,q,a){return function(){function b(e,g,k){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=e;this._desc={pixelFormat:g.pixelFormat,internalFormat:g.internalFormat,dataType:g.dataType,target:g.target?g.target:3553,samplingMode:g.samplingMode?g.samplingMode:9729,wrapMode:g.wrapMode?g.wrapMode:10497,
maxAnisotropy:g.maxAnisotropy,flipped:void 0!==g.flipped?g.flipped:!1,hasMipmap:void 0!==g.hasMipmap?g.hasMipmap:!1,level:void 0!==g.level?g.level:0,unpackAlignment:g.unpackAlignment?g.unpackAlignment:4,width:g.width,height:g.height,preMultiplyAlpha:void 0!==g.preMultiplyAlpha?g.preMultiplyAlpha:!1};this._id=++b._nextId;a("esri-webgl-debug")&&e.instanceCounter.incrementCount(0);this.setData(k)}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});b.prototype.dispose=function(){var e=this;if(this._context){if(this._glName){var g=this._context.gl;this._boundToUnits.forEach(function(k){e._context.bindTexture(null,k)});g.deleteTexture(this._glName);this._glName=null}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);
this._context=null}};b.prototype.resize=function(e,g){var k=this._desc;if(k.width!==e||k.height!==g)k.width=e,k.height=g,this.setData(null)};b.prototype.setData=function(e){var g=this._context.gl;this._glName||(this._glName=g.createTexture());void 0===e&&(e=null);null===e&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var k=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var c=this._desc;b._validateTexture(c);g.pixelStorei(g.UNPACK_ALIGNMENT,c.unpackAlignment);
g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0);g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha);if(e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)g.texImage2D(g.TEXTURE_2D,c.level,c.internalFormat?c.internalFormat:c.pixelFormat,c.pixelFormat,c.dataType,e),void 0===this._desc.width&&(this._desc.width=e.width),void 0===this._desc.height&&(this._desc.height=e.height);else{var d=c.internalFormat?c.internalFormat:
c.pixelFormat,f=c.pixelFormat;g.DEPTH24_STENCIL8&&d===g.DEPTH_STENCIL&&(d=g.DEPTH24_STENCIL8);g.texImage2D(g.TEXTURE_2D,c.level,d,c.width,c.height,0,f,c.dataType,e)}c.hasMipmap&&this.generateMipmap();b._applySamplingMode(g,this._desc);b._applyWrapMode(g,this._desc);b._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(k,0)};b.prototype.updateData=function(e,g,k,c,d,f){var h=this._context.gl,n=this._desc,p=this._context.getBoundTexture(0);this._context.bindTexture(this,
0);f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement?h.texSubImage2D(h.TEXTURE_2D,e,g,k,n.pixelFormat,n.dataType,f):h.texSubImage2D(h.TEXTURE_2D,e,g,k,c,d,n.pixelFormat,n.dataType,f);this._context.bindTexture(p,0)};b.prototype.generateMipmap=function(){var e=this._desc;e.hasMipmap||(e.hasMipmap=!0,b._validateTexture(e));9729===e.samplingMode?(this._samplingModeDirty=!0,e.samplingMode=9985):9728===e.samplingMode&&(this._samplingModeDirty=
!0,e.samplingMode=9984);e=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var g=this._context.gl;g.generateMipmap(g.TEXTURE_2D);this._context.bindTexture(e,0)};b.prototype.setSamplingMode=function(e){e!==this._desc.samplingMode&&(this._desc.samplingMode=e,b._validateTexture(this._desc),this._samplingModeDirty=!0)};b.prototype.setWrapMode=function(e){e!==this._desc.wrapMode&&(this._desc.wrapMode=e,b._validateTexture(this._desc),this._wrapModeDirty=!0)};b.prototype.applyChanges=function(){var e=
this._context.gl,g=this._desc;this._samplingModeDirty&&(b._applySamplingMode(e,g),this._samplingModeDirty=!1);this._wrapModeDirty&&(b._applyWrapMode(e,g),this._wrapModeDirty=!1)};b.prototype.setBoundToUnit=function(e,g){g?this._boundToUnits.add(e):this._boundToUnits["delete"](e)};b._isPowerOfTwo=function(e){return 0===(e&e-1)};b._validateTexture=function(e){b._isPowerOfTwo(e.width)&&b._isPowerOfTwo(e.height)};b._applySamplingMode=function(e,g){var k=g.samplingMode;if(9985===k||9987===k)k=9729;else if(9984===
k||9986===k)k=9728;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,k);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,g.samplingMode)};b._applyWrapMode=function(e,g){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,g.wrapMode);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,g.wrapMode)};b._applyAnisotropicFilteringParameters=function(e,g){if(null!=g.maxAnisotropy){var k=e.capabilities.textureFilterAnisotropic;if(k){var c=e.gl;c.texParameterf(c.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY,g.maxAnisotropy)}}};
b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(F,q,a,b){return function(){function e(g,k,c,d,f){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=g;this._layout=c;this._buffers=d;this._locations=k;f&&(this._indexBuffer=f);this._id=e._nextId++;a("esri-webgl-debug")&&g.instanceCounter.incrementCount(2)}Object.defineProperty(e.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"size",{get:function(){var g=this;return Object.keys(this._buffers).reduce(function(k,
c){return k+g._buffers[c].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});e.prototype.dispose=function(g){void 0===g&&(g=!0);if(this._context){var k=this._context.capabilities.vao;k&&this._glName&&(k.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(g){for(var c in this._buffers)this._buffers[c].dispose(),delete this._buffers[c];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};e.prototype.initialize=function(){if(!this._initialized){var g=this._context.capabilities.vao;if(g){var k=g.createVertexArray();g.bindVertexArray(k);this._bindLayout();g.bindVertexArray(null);
this._glName=k}this._initialized=!0}};e.prototype.bind=function(){this.initialize();var g=this._context.capabilities.vao;g?g.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};e.prototype._bindLayout=function(){var g=this._buffers,k=!!this._context.capabilities.vao,c=this._layout,d=this._indexBuffer,f=this._context.gl,h;for(h in g)b.bindVertexBufferLayout(this._context,this._locations,g[h],c[h]);d&&(k?f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,d.glName):this._context.bindBuffer(d))};
e.prototype.unbind=function(){this.initialize();var g=this._context.capabilities.vao;g?g.bindVertexArray(null):this._unbindLayout()};e.prototype._unbindLayout=function(){var g=this._buffers,k=this._layout,c;for(c in g)b.unbindVertexBufferLayout(this._context,this._locations,g[c],k[c]);(g=this._indexBuffer)&&this._context.unbindBuffer(g.bufferType)};e._nextId=0;return e}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k,c,d){Object.defineProperty(q,"__esModule",{value:!0});F=function(f){function h(){var n=f.call(this)||this;n._color=b.create();n._initialized=!1;n._color.set([1,0,0,1]);return n}a(h,f);h.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};h.prototype.draw=function(n,p){var l=n.context;this._initialized||this._initialize(l);
l.setStencilFunctionSeparate(1032,519,p.stencilRef,255);l.bindVAO(this._solidVertexArrayObject);l.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",p.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",p.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);l.drawArrays(5,0,4);l.bindVAO()};h.prototype._initialize=
function(n){if(this._initialized)return!0;var p={a_pos:0},l=new c(n,g.backgroundVS,g.backgroundFS,p);if(!l)return!1;var m=new Int8Array([0,0,1,0,0,1,1,1]);m=k.createVertex(n,35044,m);n=new d(n,p,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:m});this._solidProgram=l;this._solidVertexArrayObject=n;return this._initialized=!0};return h}(e["default"]);q["default"]=F})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],
function(F){var q={create:function(){var a=new F.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new F.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,e,g){var k=new F.ARRAY_TYPE(4);k[0]=a;k[1]=b;k[2]=e;k[3]=g;return k},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,e,g,k){a[0]=b;a[1]=e;a[2]=g;a[3]=k;return a},add:function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=b[2]+e[2];a[3]=b[3]+e[3];return a},
subtract:function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=b[3]-e[3];return a}};q.sub=q.subtract;q.multiply=function(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];a[2]=b[2]*e[2];a[3]=b[3]*e[3];return a};q.mul=q.multiply;q.divide=function(a,b,e){a[0]=b[0]/e[0];a[1]=b[1]/e[1];a[2]=b[2]/e[2];a[3]=b[3]/e[3];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=
Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};q.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);a[2]=Math.min(b[2],e[2]);a[3]=Math.min(b[3],e[3]);return a};q.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);a[2]=Math.max(b[2],e[2]);a[3]=Math.max(b[3],e[3]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};q.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*
e;a[2]=b[2]*e;a[3]=b[3]*e;return a};q.scaleAndAdd=function(a,b,e,g){a[0]=b[0]+e[0]*g;a[1]=b[1]+e[1]*g;a[2]=b[2]+e[2]*g;a[3]=b[3]+e[3]*g;return a};q.distance=function(a,b){var e=b[0]-a[0],g=b[1]-a[1],k=b[2]-a[2],c=b[3]-a[3];return Math.sqrt(e*e+g*g+k*k+c*c)};q.dist=q.distance;q.squaredDistance=function(a,b){var e=b[0]-a[0],g=b[1]-a[1],k=b[2]-a[2],c=b[3]-a[3];return e*e+g*g+k*k+c*c};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],e=a[1],g=a[2];a=a[3];return Math.sqrt(b*b+e*e+g*g+a*a)};q.len=
q.length;q.squaredLength=function(a){var b=a[0],e=a[1],g=a[2];a=a[3];return b*b+e*e+g*g+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};q.normalize=function(a,b){var e=b[0],g=b[1],k=b[2],c=b[3],d=e*e+g*g+k*k+c*c;0<d&&(d=1/Math.sqrt(d),a[0]=e*d,a[1]=g*d,a[2]=k*d,a[3]=c*d);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.lerp=function(a,
b,e,g){var k=b[0],c=b[1],d=b[2];b=b[3];a[0]=k+g*(e[0]-k);a[1]=c+g*(e[1]-c);a[2]=d+g*(e[2]-d);a[3]=b+g*(e[3]-b);return a};q.random=function(a,b){b=b||1;a[0]=F.RANDOM();a[1]=F.RANDOM();a[2]=F.RANDOM();a[3]=F.RANDOM();q.normalize(a,a);q.scale(a,a,b);return a};q.transformMat4=function(a,b,e){var g=b[0],k=b[1],c=b[2];b=b[3];a[0]=e[0]*g+e[4]*k+e[8]*c+e[12]*b;a[1]=e[1]*g+e[5]*k+e[9]*c+e[13]*b;a[2]=e[2]*g+e[6]*k+e[10]*c+e[14]*b;a[3]=e[3]*g+e[7]*k+e[11]*c+e[15]*b;return a};q.transformQuat=function(a,b,e){var g=
b[0],k=b[1],c=b[2],d=e[0],f=e[1],h=e[2];e=e[3];var n=e*g+f*c-h*k,p=e*k+h*g-d*c,l=e*c+d*k-f*g;g=-d*g-f*k-h*c;a[0]=n*e+g*-d+p*-h-l*-f;a[1]=p*e+g*-f+l*-d-n*-h;a[2]=l*e+g*-h+n*-f-p*-d;a[3]=b[3];return a};q.forEach=function(){var a=q.create();return function(b,e,g,k,c,d){e||(e=4);g||(g=0);for(k=k?Math.min(k*e+g,b.length):b.length;g<k;g+=e)a[0]=b[g],a[1]=b[g+1],a[2]=b[g+2],a[3]=b[g+3],c(a,a,d),b[g]=a[0],b[g+1]=a[1],b[g+2]=a[2],b[g+3]=a[3];return b}}();q.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};q.equals=function(a,b){var e=a[0],g=a[1],k=a[2],c=a[3],d=b[0],f=b[1],h=b[2],n=b[3];return Math.abs(e-d)<=F.EPSILON*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(g-f)<=F.EPSILON*Math.max(1,Math.abs(g),Math.abs(f))&&Math.abs(k-h)<=F.EPSILON*Math.max(1,Math.abs(k),Math.abs(h))&&Math.abs(c-n)<=F.EPSILON*Math.max(1,Math.abs(c),Math.abs(n))};return q})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k){Object.defineProperty(q,"__esModule",{value:!0});F=function(c){function d(){var f=null!==c&&c.apply(this,arguments)||this;f._isInitialized=!1;f._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};f._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};f._spritesTextureSize=new Float32Array(2);return f}a(d,c);d.prototype.dispose=function(){};d.prototype.getGeometryType=function(){return b.WGLGeometryType.FILL};d.prototype.drawGeometry=
function(f,h,n,p){p=f.context;var l=f.painter,m=f.rendererInfo,r=f.requiredLevel,t=f.stationary,x=n.indexCount,v=n.indexFrom;this._initialize();var z=n.materialInfo.materialKeyInfo,A=z.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(A=f.painter.materialManager.getProgram(n.materialInfo.materialKey,f.drawPhase,A)){p.bindProgram(A);var B=this._getVAO(p,h,z.hasVV());p.bindVAO(B);if(0<n.materialInfo.texBindingInfo.length){n=n.materialInfo.texBindingInfo[0];B=n.pageId;var u=f.painter.textureManager.sprites;
this._spritesTextureSize[0]=u.getWidth(B);this._spritesTextureSize[1]=u.getHeight(B);A.setUniform1f("u_zoomFactor",1/Math.pow(2,r-h.key.level)/f.pixelRatio);l.textureManager.bindSpritePage(p,B,n.unit,t?9728:9729);A.setUniform1i(n.semantic,n.unit);A.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}A.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform);A.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord);A.setUniform1f("u_opacity",1);z.vvColor&&(A.setUniform1fv("u_vvColorValues",
m.vvColorValues),A.setUniform4fv("u_vvColors",m.vvColors));z.vvOpacity&&(A.setUniform1fv("u_vvOpacityValues",m.vvOpacityValues),A.setUniform1fv("u_vvOpacities",m.vvOpacities));p.drawElements(4,x,5125,4*v);p.bindVAO(null)}};d.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};d.prototype._getVAO=function(f,h,n){if(h.fillGeometry.vao)return h.fillGeometry.vao;var p=h.fillGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],l=h.fillGeometry.indexBuffer;if(!p||!l)return null;h.fillGeometry.vao=n?new k(f,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:p},l):new k(f,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:p},l);return h.fillGeometry.vao};return d}(g["default"]);q["default"]=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(F,q,a,b,e){Object.defineProperty(q,"__esModule",{value:!0});F=function(g){function k(){return null!==g&&g.apply(this,arguments)||this}
a(k,g);k.prototype.draw=function(c,d){var f=this;if(d.canDisplay){var h=this.getGeometryType(),n=d.getDisplayList(c.drawPhase),p=d.getGeometry(h);p&&e.forEachIter(n.ofType(h),function(l){return f.drawGeometry(c,d,l,p)})}};return k}(b["default"]);q["default"]=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.forEachIter=function(a,b){for(;;){var e=a.next();if(e.done)break;b(e.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(F,q,a,b,e,g,k){Object.defineProperty(q,"__esModule",{value:!0});F=function(c){function d(){var f=null!==c&&c.apply(this,arguments)||this;f._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};f._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};f._glyphsTextureSize=new Float32Array(2);return f}a(d,c);d.prototype.dispose=function(){};d.prototype.drawGeometry=function(f,h,n,p){if(f.requiredLevel===h.key.level){p=f.context;var l=f.painter,m=f.drawPhase,r=n.materialInfo,t=n.indexCount;n=n.indexFrom;var x=this._attributeLocations,v=f.drawPhase===b.WGLDrawPhase.LABEL_ALPHA,z=r.materialKey;
v&&(z|=8);if(m=l.materialManager.getProgram(z,m,x))p.setStencilTestEnabled(!1),p.bindProgram(m),x=this._getVAO(p,h),p.bindVAO(x),v?(p.setBlendingEnabled(!1),m.setUniform1f("u_fadeStep",f.labelStep)):(r=r.texBindingInfo[0],l.textureManager.bindGlyphsPage(p,r.pageId,r.unit),m.setUniform1i(r.semantic,r.unit)),r=l.textureManager.glyphs,this._glyphsTextureSize[0]=r.width/4,this._glyphsTextureSize[1]=r.height/4,l=l.extrudeNoRotationMatrix,p.bindTexture(f.labelFBO.colorTexture,3),m.setUniform1i("u_referenceTex",
3),m.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform),m.setUniformMatrix4fv("u_extrudeMatrix",l),m.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord),m.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),m.setUniform1f("u_pixelRatio",f.pixelRatio),m.setUniform1f("u_opacity",1),m.setUniform1f("u_zoomLevel",10*f.displayLevel),m.setUniform1f("u_mapRotation",f.state.rotation),m.setUniform1f("u_mapAligned",0),m.setUniform2fv("u_screenSize",f.state.size),p.drawElements(4,
t,5125,4*n),p.bindVAO(null),p.setStencilTestEnabled(!0),p.setBlendingEnabled(!0)}};d.prototype.getGeometryType=function(){return b.WGLGeometryType.LABEL};d.prototype._getVAO=function(f,h){var n=h.labelGeometry;if(n&&n.vao)return n.vao;var p=n.vertexBufferMap[e.C_VBO_GEOMETRY],l=n.vertexBufferMap[e.C_VBO_VISIBILITY_RANGE],m=n.indexBuffer;if(!p||!m||!l)return null;n.vao=new k(f,this._attributeLocations,this._vertexAttributeLayout,{geometry:p,visibility:n.vertexBufferMap[e.C_VBO_VISIBILITY],visibilityRange:l},
m);return n.vao};return d}(g["default"]);q["default"]=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(F,q,a,b,e,g,k){Object.defineProperty(q,"__esModule",{value:!0});F=function(c){function d(){var f=null!==c&&c.apply(this,arguments)||this;f._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};f._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};f._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};f._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};f._spritesTextureSize=new Float32Array(2);return f}a(d,c);d.prototype.dispose=function(){};d.prototype.getGeometryType=function(){return b.WGLGeometryType.LINE};d.prototype.drawGeometry=function(f,h,n,p){p=f.context;var l=f.painter,m=f.rendererInfo,r=f.requiredLevel,t=f.drawPhase,x=n.indexFrom,v=n.indexCount,z=n.materialInfo;n=z.materialKeyInfo;var A=n.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(t=l.materialManager.getProgram(z.materialKey,
t,A)){p.bindProgram(t);A=this._getVAO(p,h,n.hasVV());p.bindVAO(A);A=1/f.pixelRatio;if(0<z.texBindingInfo.length){z=z.texBindingInfo[0];var B=z.pageId,u=l.textureManager.sprites;this._spritesTextureSize[0]=u.getWidth(B);this._spritesTextureSize[1]=u.getHeight(B);l.textureManager.bindSpritePage(p,B,z.unit);t.setUniform1i(z.semantic,z.unit);t.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}f=Math.pow(2,r-h.key.level)/f.pixelRatio;t.setUniform1f("u_zoomFactor",f);t.setUniformMatrix4fv("u_transformMatrix",
h.tileTransform.transform);t.setUniformMatrix4fv("u_extrudeMatrix",l.extrudeMatrix);t.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord);t.setUniform1f("u_opacity",1);t.setUniform1f("u_blur",0+A);t.setUniform1f("u_antialiasing",A);t.setUniform1f("u_zoomFactor",f);n.vvSizeMinMaxValue&&t.setUniform4fv("u_vvSizeMinMaxValue",m.vvSizeMinMaxValue);n.vvSizeScaleStops&&t.setUniform1f("u_vvSizeScaleStopsValue",m.vvSizeScaleStopsValue);n.vvSizeFieldStops&&(t.setUniform1fv("u_vvSizeFieldStopsValues",
m.vvSizeFieldStopsValues),t.setUniform1fv("u_vvSizeFieldStopsSizes",m.vvSizeFieldStopsSizes));n.vvSizeUnitValue&&t.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",m.vvSizeUnitValueToPixelsRatio);n.vvColor&&(t.setUniform1fv("u_vvColorValues",m.vvColorValues),t.setUniform4fv("u_vvColors",m.vvColors));n.vvOpacity&&(t.setUniform1fv("u_vvOpacityValues",m.vvOpacityValues),t.setUniform1fv("u_vvOpacities",m.vvOpacities));p.setFaceCullingEnabled(!0);p.setFrontFace(2305);p.setCullFace(1029);p.drawElements(4,
v,5125,4*x);p.setFaceCullingEnabled(!1);p.bindVAO(null)}};d.prototype._getVAO=function(f,h,n){if(h.lineGeometry.vao)return h.lineGeometry.vao;var p=h.lineGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],l=h.lineGeometry.indexBuffer;if(!p||!l)return null;h.lineGeometry.vao=n?new k(f,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:p},l):new k(f,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:p},l);return h.lineGeometry.vao};return d}(g["default"]);q["default"]=
F})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(F,q,a,b,e,g,k,c){Object.defineProperty(q,"__esModule",{value:!0});F=function(d){function f(){var h=null!==d&&d.apply(this,arguments)||this;h._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};h._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};h._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};h._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};h._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};h._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};h._spritesTextureSize=new Float32Array(2);return h}a(f,d);f.prototype.dispose=function(){};f.prototype.getGeometryType=function(){return b.WGLGeometryType.MARKER};f.prototype.drawGeometry=
function(h,n,p,l){l=h.context;var m=h.painter,r=h.rendererInfo,t=h.drawPhase;h=p.indexCount;var x=p.indexFrom,v=p.materialInfo;p=v.materialKeyInfo;var z=p.heatmap,A=p.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(t=m.materialManager.getProgram(v.materialKey,t,A))l.bindProgram(t),A=this._getVAO(l,n,p.hasVV(),z),l.bindVAO(A),z?(v=this._getIntensityTexture(l,r.heatmapParameters),l.bindTexture(v,1),t.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(r.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(r.heatmapParameters.radius)):(z=v.texBindingInfo[0],v=z.pageId,m.textureManager.bindSpritePage(l,v,z.unit),t.setUniform1i(z.semantic,z.unit),z=m.textureManager.sprites,this._spritesTextureSize[0]=z.getWidth(v)/4,this._spritesTextureSize[1]=z.getHeight(v)/4),m=r.vvMaterialParameters.vvRotationEnabled&&"geographic"===r.vvMaterialParameters.vvRotationType?m.extrudeMatrix:m.extrudeNoRotationMatrix,t.setUniformMatrix4fv("u_transformMatrix",n.tileTransform.transform),
t.setUniformMatrix4fv("u_extrudeMatrix",m),t.setUniform2fv("u_normalized_origin",n.tileTransform.displayCoord),t.setUniform2fv("u_mosaicSize",this._spritesTextureSize),t.setUniform1f("u_opacity",1),p.vvSizeMinMaxValue&&t.setUniform4fv("u_vvSizeMinMaxValue",r.vvSizeMinMaxValue),p.vvSizeScaleStops&&t.setUniform1f("u_vvSizeScaleStopsValue",r.vvSizeScaleStopsValue),p.vvSizeFieldStops&&(t.setUniform1fv("u_vvSizeFieldStopsValues",r.vvSizeFieldStopsValues),t.setUniform1fv("u_vvSizeFieldStopsSizes",r.vvSizeFieldStopsSizes)),
p.vvSizeUnitValue&&t.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",r.vvSizeUnitValueToPixelsRatio),p.vvColor&&(t.setUniform1fv("u_vvColorValues",r.vvColorValues),t.setUniform4fv("u_vvColors",r.vvColors)),p.vvOpacity&&(t.setUniform1fv("u_vvOpacityValues",r.vvOpacityValues),t.setUniform1fv("u_vvOpacities",r.vvOpacities)),p.vvRotation&&t.setUniform1f("u_vvRotationType","geographic"===r.vvMaterialParameters.vvRotationType?0:1),l.drawElements(4,h,5125,4*x),l.bindVAO(null)};f.prototype._getVAO=function(h,
n,p,l){if(n.iconGeometry.vao)return n.iconGeometry.vao;var m=n.iconGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],r=n.iconGeometry.indexBuffer;if(!m||!r)return null;n.iconGeometry.vao=p?new c(h,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:m},r):l?new c(h,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:m},r):new c(h,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:m},r);return n.iconGeometry.vao};f.prototype._getIntensityTexture=
function(h,n){if(n.intensityKernel&&!n.refreshIntensityKernel)return n.intensityKernel;n.intensityKernel&&(n.intensityKernel.dispose(),n.intensityKernel=null);for(var p=n.radius,l=n.kernelSize,m=n.blurRadius,r=p*p,t=[],x=-1;++x<l;)t[x]=Math.exp(-Math.pow(x-m,2)/(2*r))/(p/2*Math.sqrt(2*Math.PI));p=[];for(var v,z=0;z<l;z++)for(r=t[z],x=0;x<l;x++)v=z*l+x,m=t[x],p[4*v]=r*m,p[4*v+1]=0,p[4*v+2]=0,p[4*v+3]=1;l=new k(h,{target:3553,pixelFormat:6408,internalFormat:h.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:h.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:l,height:l},new Float32Array(p));n.intensityKernel=l;n.refreshIntensityKernel=!1;return l};return f}(g["default"]);q["default"]=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(F,q,a,b,e,g,k){Object.defineProperty(q,"__esModule",
{value:!0});F=function(c){function d(){var f=null!==c&&c.apply(this,arguments)||this;f._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};f._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};f._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};f._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};f._glyphsTextureSize=new Float32Array(2);return f}a(d,c);d.prototype.dispose=function(){};d.prototype.getGeometryType=
function(){return b.WGLGeometryType.TEXT};d.prototype.drawGeometry=function(f,h,n,p){p=f.context;var l=f.painter,m=f.rendererInfo,r=n.materialInfo,t=n.indexCount;n=n.indexFrom;var x=r.materialKeyInfo,v=x.vvSizeMinMaxValue||x.vvSizeScaleStops||x.vvSizeFieldStops||x.vvSizeUnitValue||x.vvColor||x.vvRotation||x.vvOpacity;if(f=l.materialManager.getProgram(r.materialKey,f.drawPhase,v?this._attributeLocationsVV:this._attributeLocations))p.bindProgram(f),v=this._getVAO(p,h,v,this.getGeometryType()),p.bindVAO(v),
r=r.texBindingInfo[0],l.textureManager.bindGlyphsPage(p,r.pageId,r.unit),f.setUniform1i(r.semantic,r.unit),r=l.textureManager.glyphs,this._glyphsTextureSize[0]=r.width/4,this._glyphsTextureSize[1]=r.height/4,l=m.vvMaterialParameters.vvRotationEnabled&&"geographic"===m.vvMaterialParameters.vvRotationType?l.extrudeMatrix:l.extrudeNoRotationMatrix,f.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform),f.setUniformMatrix4fv("u_extrudeMatrix",l),f.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord),
f.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),f.setUniform1f("u_pixelRatio",1),f.setUniform1f("u_opacity",1),x.vvSizeMinMaxValue&&f.setUniform4fv("u_vvSizeMinMaxValue",m.vvSizeMinMaxValue),x.vvSizeScaleStops&&f.setUniform1f("u_vvSizeScaleStopsValue",m.vvSizeScaleStopsValue),x.vvSizeFieldStops&&(f.setUniform1fv("u_vvSizeFieldStopsValues",m.vvSizeFieldStopsValues),f.setUniform1fv("u_vvSizeFieldStopsSizes",m.vvSizeFieldStopsSizes)),x.vvSizeUnitValue&&f.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
m.vvSizeUnitValueToPixelsRatio),x.vvColor&&(f.setUniform1fv("u_vvColorValues",m.vvColorValues),f.setUniform4fv("u_vvColors",m.vvColors)),x.vvOpacity&&(f.setUniform1fv("u_vvOpacityValues",m.vvOpacityValues),f.setUniform1fv("u_vvOpacities",m.vvOpacities)),x.vvRotation&&f.setUniform1f("u_vvRotationType","geographic"===m.vvMaterialParameters.vvRotationType?0:1),p.drawElements(4,t,5125,4*n),p.bindVAO(null)};d.prototype._getVAO=function(f,h,n,p){if((h=h.getGeometry(p))&&h.vao)return h.vao;p=h.vertexBufferMap[e.C_VBO_GEOMETRY];
var l=h.vertexBufferMap[e.C_VBO_VISIBILITY],m=h.indexBuffer;if(!p||!m)return null;h.vao=n?new k(f,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:p,visibility:l},m):new k(f,this._attributeLocations,this._vertexAttributeLayout,{geometry:p,visibility:l},m);return h.vao};return d}(g["default"]);q["default"]=F})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(F,q,a,b,e){return function(){function g(){this._hlRenderer=new b;this._hlSurfaces=new e;this._height=this._width=void 0}g.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};g.prototype.setup=function(k,c,d){var f=c%4,h=d%4;c+=2>f?-f:4-f;d+=2>h?-h:4-h;this._width=c;this._height=d;this._boundFBO=k.getBoundFramebufferObject();c=Math.round(.75*c);d=Math.round(.75*d);this._hlRenderer.setup(k,c,d);this._hlSurfaces.setup(k,
c,d)};g.prototype.setHighlightOptions=function(k){this._hlRenderer.setHighlightOptions({fillColor:k.fillColor,outlineColor:k.outlineColor,outlineWidth:.75*k.outlineWidth,outerHaloWidth:.75*k.outerHaloWidth,innerHaloWidth:.75*k.innerHaloWidth,outlinePosition:.75*k.outlinePosition})};g.prototype.startMaskDraw=function(k){k.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);k.setClearColor(0,0,0,0);k.setClearStencil(0);k.clear(k.gl.COLOR_BUFFER_BIT|k.gl.STENCIL_BUFFER_BIT);k.setViewport(0,0,.75*this._width,
.75*this._height)};g.prototype.draw=function(k){k.setStencilTestEnabled(!1);k.setBlendingEnabled(!1);k.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);k.setClearColor(0,0,0,0);k.clear(k.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(k,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?(k.bindFramebuffer(null),k.clear(k.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(k,this._hlSurfaces.sharedBlur2Tex)):(k.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),k.setClearColor(0,0,0,0),k.clear(k.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(k,this._hlSurfaces.sharedBlur2Tex),k.bindFramebuffer(this._boundFBO),k.setBlendingEnabled(!0),k.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(k,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return g}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k){var c=[void 0,void 0,void 0,1],d=[3,4],f=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function n(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}n.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};n.prototype.preBlur=function(p,l){p.bindTexture(l,d[0]);p.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",f);p.bindVAO(this._resources.quadVAO);p.drawArrays(5,0,4);p.bindVAO()};n.prototype.finalBlur=function(p,l){p.bindTexture(l,d[0]);p.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",h);p.bindVAO(this._resources.quadVAO);p.drawArrays(5,0,4);p.bindVAO()};n.prototype.renderHighlight=function(p,l){p.bindTexture(l,d[0]);p.bindTexture(this._resources.shadeTex,d[1]);p.bindProgram(this._resources.highlightProgram);p.bindVAO(this._resources.quadVAO);p.drawArrays(5,0,4);p.bindVAO()};n.prototype._initialize=function(p,l,m){this._width=l;this._height=
m;l=new b(p,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);m=new k(p,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:l});var r=(new e("hl",["texturedVS","highlightFS"],[],a,p,{a_position:0,a_texcoord:1})).getProgram([]),t=(new e("hl",["texturedVS","blurFS"],[],a,p,{a_position:0,a_texcoord:1})).getProgram([]);
r.setUniform1i("u_texture",d[0]);r.setUniform1i("u_shade",d[1]);r.setUniform4fv("u_sigmas",c);t.setUniform1i("u_texture",d[0]);t.setUniform4fv("u_sigmas",c);p=new g(p,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:l,quadVAO:m,highlightProgram:r,blurProgram:t,shadeTex:p}};n.prototype.setHighlightOptions=function(p){function l(u,w,D){A[0]=(1-D)*u[0]+D*w[0];A[1]=(1-D)*u[1]+D*w[1];A[2]=(1-D)*u[2]+D*w[2];A[3]=(1-D)*u[3]+D*
w[3]}this._highlightOptions=p;if(this._resources){for(var m=p.outlinePosition-p.outlineWidth/2-p.outerHaloWidth,r=p.outlinePosition-p.outlineWidth/2,t=p.outlinePosition+p.outlineWidth/2,x=p.outlinePosition+p.outlineWidth/2+p.innerHaloWidth,v=new Uint8Array(1024),z,A=[void 0,void 0,void 0,void 0],B=0;256>B;++B)z=m+B/255*(x-m),z<m?(v[4*B]=0,v[4*B+1]=0,v[4*B+2]=0,v[4*B+3]=0):z<r?l([0,0,0,0],p.outlineColor,(z-m)/(r-m)):z<t?(A[0]=p.outlineColor[0],A[1]=p.outlineColor[1],A[2]=p.outlineColor[2],A[3]=p.outlineColor[3]):
z<x?l(p.outlineColor,p.fillColor,(z-t)/(x-t)):(v[4*B]=p.fillColor[0],v[4*B+1]=p.fillColor[1],v[4*B+2]=p.fillColor[2],v[4*B+3]=p.fillColor[3]),v[4*B]=255*A[0]*A[3],v[4*B+1]=255*A[1]*A[3],v[4*B+2]=255*A[2]*A[3],v[4*B+3]=255*A[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[m,x]);this._resources.shadeTex.updateData(0,0,0,256,1,v)}};n.prototype.setup=function(p,l,m){this._resources?(this._width=l,this._height=m):(this._initialize(p,l,m),this.setHighlightOptions(this._highlightOptions))};
return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(F,q,a,b){F=new b;b.parse(a,F);return F})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(F,q,a,b){function e(g,k,c){k=new b(g,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:k,height:c,samplingMode:9729});g=a.createWithAttachments(g,k,{colorTarget:0,depthStencilTarget:2});return[k,g]}return function(){function g(){this._height=this._width=void 0;this._resources=null}g.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};g.prototype._initialize=function(k,
c,d){this._width=c;this._height=d;var f=e(k,c,d),h=f[0];f=f[1];k=e(k,c,d);this._resources={sharedBlur1Tex:h,sharedBlur1Fbo:f,sharedBlur2Tex:k[0],sharedBlur2Fbo:k[1]}};g.prototype.setup=function(k,c,d){!this._resources||this._width===c&&this._height===d||this.dispose();this._resources||this._initialize(k,c,d)};Object.defineProperty(g.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return g}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(F,q,a,b,e){return function(){function g(k,
c,d,f){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=k;this._desc={colorTarget:c.colorTarget,depthStencilTarget:c.depthStencilTarget,width:c.width,height:c.height,multisampled:c.multisampled};this._id=g._nextId++;a("esri-webgl-debug")&&k.instanceCounter.incrementCount(4);d&&(k=void 0,d instanceof e?(this._colorAttachment=d,k=d.descriptor):(k=d,this._colorAttachment=new e(this._context,k)),g._validateTextureDimensions(k,
this._desc));if(f instanceof b){if(2===c.depthStencilTarget)this._stencilAttachment=f;else if(1===c.depthStencilTarget||3===c.depthStencilTarget)this._depthAttachment=f;g._validateBufferDimensions(f.descriptor,this._desc)}else f&&(c=void 0,f instanceof e?(this._depthStencilTexture=f,c=this._depthStencilTexture.descriptor):(c=f,this._depthStencilTexture=new e(this._context,c)),g._validateTextureDimensions(c,this._desc))}g.create=function(k,c){return new g(k,c)};g.createWithAttachments=function(k,c,
d,f){return new g(k,d,c,f)};Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof e?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});g.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};g.prototype.attachColorTexture=function(k){if(k){g._validateTextureDimensions(k.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,k.glName,0)}this._colorAttachment=k}};g.prototype.detachColorTexture=
function(){var k=void 0;if(this._colorAttachment instanceof e){k=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}this._colorAttachment=null}return k};g.prototype.attachDepthStencilTexture=function(k){if(k){g._validateTextureDimensions(k.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,k.glName,0)}this._depthStencilTexture=k}};g.prototype.detachDepthStencilTexture=function(){var k=this._depthStencilTexture;if(k&&this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return k};
g.prototype.attachDepthStencilBuffer=function(k){if(k){var c=k.descriptor;g._validateBufferDimensions(c,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===c.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,k.glName));this._depthAttachment=k}};g.prototype.detachDepthStencilBuffer=function(){var k=
this._context.gl,c=this._depthAttachment;c&&this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,1===this._desc.depthStencilTarget?k.DEPTH_ATTACHMENT:k.DEPTH_STENCIL_ATTACHMENT,k.RENDERBUFFER,null));this._depthAttachment=null;return c};g.prototype.copyToTexture=function(k,c,d,f,h,n,p){var l=this._context;l.bindTexture(p);l.bindFramebuffer(this);l.gl.copyTexSubImage2D(3553,0,h,n,k,c,d,f)};g.prototype.readPixels=function(k,c,d,f,h,n,p){this._context.bindFramebuffer(this);
this._context.gl.readPixels(k,c,d,f,h,n,p)};g.prototype.resize=function(k,c){var d=this._desc;if(d.width!==k||d.height!==c)if(this._initialized)d.width=k,d.height=c,this._colorAttachment instanceof e?(f=this._colorAttachment,d=f.descriptor,d.width=k,d.height=c,this._colorAttachment.dispose(),this._colorAttachment=new e(this._context,d),g._validateTextureDimensions(f.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(d=this._depthStencilTexture.descriptor,
d.width=k,d.height=c,this._depthStencilTexture.dispose(),this._depthStencilTexture=new e(this._context,d)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{d.width=k;d.height=c;if(this._colorAttachment instanceof e){var f=this._colorAttachment;f.resize(k,c)}this._depthStencilTexture&&this._depthStencilTexture.resize(k,c)}};g.prototype.initialize=function(){if(this._initialized)return!1;
var k=this._context.gl;this._glName&&k.deleteFramebuffer(this._glName);var c=k.createFramebuffer(),d=this._desc;k.bindFramebuffer(k.FRAMEBUFFER,c);if(!this._colorAttachment)if(0===d.colorTarget)this._colorAttachment=new e(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:d.width,height:d.height});else{var f=new b(this._context,{internalFormat:32854,width:d.width,height:d.height});k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,
f.glName);this._colorAttachment=f}this._colorAttachment instanceof e&&k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,this._colorAttachment.glName,0);switch(d.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new b(this._context,{internalFormat:1===d.depthStencilTarget?33189:34041,width:d.width,height:d.height}));k.framebufferRenderbuffer(k.FRAMEBUFFER,1===d.depthStencilTarget?k.DEPTH_ATTACHMENT:k.DEPTH_STENCIL_ATTACHMENT,k.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new b(this._context,{internalFormat:36168,width:d.width,height:d.height}));k.framebufferRenderbuffer(k.FRAMEBUFFER,k.STENCIL_ATTACHMENT,k.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new e(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:d.width,height:d.height})),k.framebufferTexture2D(k.FRAMEBUFFER,k.DEPTH_STENCIL_ATTACHMENT,
k.TEXTURE_2D,this._depthStencilTexture.glName,0)}k.checkFramebufferStatus(k.FRAMEBUFFER);this._glName=c;return this._initialized=!0};g.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof e){var k=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}k.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(k=this._colorAttachment,c=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(k));this._colorAttachment=null};g.prototype._disposeDepthStencilAttachments=function(){var k=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,1===this._desc.depthStencilTarget?k.DEPTH_ATTACHMENT:k.DEPTH_STENCIL_ATTACHMENT,
k.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.STENCIL_ATTACHMENT,k.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferTexture2D(k.FRAMEBUFFER,k.DEPTH_STENCIL_ATTACHMENT,k.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};g._validateBufferDimensions=function(k,c){void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height||(c.width=k.width,c.height=k.height)};g._validateTextureDimensions=function(k,c){void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height||(c.width=k.width,c.height=k.height)};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(F,q,a){return function(){function b(e,g){this._context=
e;this._desc=g;this._glName=null;this._id=-1;var k=this._context.gl;a("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++b._nextId;this._glName=k.createRenderbuffer();this._context.bindRenderbuffer(this);k.renderbufferStorage(k.RENDERBUFFER,g.internalFormat,g.width,g.height)}Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});b.prototype.resize=function(e,g){var k=this._context.gl,c=this._desc;if(c.width!==e||c.height!==g)c.width=e,c.height=g,this._context.bindRenderbuffer(this),k.renderbufferStorage(k.RENDERBUFFER,c.internalFormat,c.width,c.height)};b.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./CircleRenderer ./FadeRecorder ./FillRenderer ./LineRenderer ./SymbolRenderer ./TileInfoRenderer ../../webgl/FramebufferObject".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n){return function(){function p(){this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,
1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0}p.prototype.initialize=function(l,m,r){void 0===r&&(r=!0);this._SpriteMosaic=l;this._glyphMosaic=m;this._ignoreSpeed=!r;this._backgroundRenderer=new e;this._lineRenderer=new d;this._fillRenderer=new c;this._symbolRenderer=new f;this._circleRenderer=new g;this._tileInfoRenderer=new h;this._fadeRecorder=new k.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=
new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])};p.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null);this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null);this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null);this._symbolRenderer&&(this._symbolRenderer.dispose(),this._symbolRenderer=null);this._circleRenderer&&(this._circleRenderer.dispose(),this._circleRenderer=
null);this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null)};p.prototype.setStateParams=function(l,m,r){this._fadeRecorder.recordLevel(r);this._state=l;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/l.width,this._extrudeScaleVector[1]=-2/l.height,a.identity(this._extrudeMatrix),a.rotate(this._extrudeMatrix,
this._extrudeMatrix,-l.rotation*b.C_DEG_TO_RAD,this._extrudeRotateVector),a.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),a.transpose(this._extrudeMatrix,this._extrudeMatrix),a.identity(this._extrudeNoRotationMatrix),a.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),a.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=
this._state.rotation};p.prototype.drawClippingMasks=function(l,m){if(0!==m.length){l.setDepthWriteEnabled(!1);l.setDepthTestEnabled(!1);l.setStencilTestEnabled(!0);l.setBlendingEnabled(!1);l.setColorMask(!1,!1,!1,!1);l.setStencilOp(7680,7680,7681);l.setStencilWriteMask(255);l.setClearStencil(0);l.clear(l.gl.STENCIL_BUFFER_BIT);for(var r=0;r<m.length;r++){var t=m[r];t.attached&&t.visible&&(l.setStencilFunctionSeparate(1032,519,t.stencilData.reference,t.stencilData.mask),this._backgroundRenderer.renderSolidColor(l,
{u_matrix:t.tileTransform.transform,u_normalized_origin:t.tileTransform.displayCoord,u_coord_range:t.coordRange,u_depth:0,u_color:this._backgroundColor}))}l.setColorMask(!0,!0,!0,!0);l.setBlendingEnabled(!0)}};p.prototype.renderDebug=function(l,m){var r=m.key;this._backgroundColor.set([r.col%2,r.row%2,0===r.col%2&&0===r.row%2?1:0,.5]);this._backgroundRenderer.renderSolidColor(l,{u_matrix:m.tileTransform.transform,u_normalized_origin:m.tileTransform.displayCoord,u_coord_range:m.coordRange,u_depth:0,
u_color:this._backgroundColor})};p.prototype.renderBucket=function(l,m,r,t,x,v,z,A){if(!(void 0!==z.minzoom&&z.minzoom>=r+1E-6||void 0!==z.maxzoom&&z.maxzoom<r-1E-6))switch(m.type){case 0:2!==x&&this._renderBackground(l,m,r,x,v,z,A);break;case 1:2!==x&&this._renderFill(l,m,r,x,v,z,A);break;case 2:1!==x&&3!==x||this._renderLine(l,m,r,x,v,z,A);break;case 3:2!==x&&3!==x||this._renderSymbol(l,m,r,x,t,v,z,A);break;case 4:2!==x&&3!==x||this._renderCircle(l,m,r,x,t,v,z,A)}};p.prototype.renderTileInfo=function(l,
m){this._tileInfoRenderer.render(l,m)};p.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()};p.prototype.hitTest=function(l,m,r,t,x,v,z){var A=[0,0],B=[0,0],u=l.state;u.toMap(A,[0,0]);u.toMap(B,[v,v]);m=t.filter(function(y){return!(A[0]>y.bounds[2]||B[0]<y.bounds[0]||A[1]<y.bounds[3]||B[1]>y.bounds[1])});if(0===m.length)return[];m.sort(function(y,C){return y.key.level-C.key.level});r=m.length;for(t=1;t<=r;t++){var w=m[t-1];w.attached&&(w.stencilData.reference=t,w.stencilData.mask=
255)}z(u,x,m);x=l.context;this._hittestFBO||(this._hittestFBO=n.create(x,{colorTarget:0,depthStencilTarget:3,width:v,height:v}));z=x.getViewport();u=x.getBoundFramebufferObject();x.bindFramebuffer(this._hittestFBO);x.setViewport(0,0,v,v);t=x.gl;x.setDepthWriteEnabled(!0);x.setStencilWriteMask(255);x.setClearColor(1,1,1,1);x.setClearDepth(1);x.setClearStencil(0);x.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT);x.setDepthWriteEnabled(!1);this.drawClippingMasks(x,m);x.setBlendingEnabled(!1);
x.setStencilWriteMask(0);x.setStencilOp(7680,7680,7681);x.setDepthFunction(515);x.setDepthTestEnabled(!0);x.setDepthWriteEnabled(!0);x.setStencilTestEnabled(!0);for(t=0;t<r;t++)w=m[t],w.attached&&w.doRender(l);x.setStencilTestEnabled(!1);x.setDepthTestEnabled(!1);this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*v*v),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer));this._hittestFBO.readPixels(0,0,v,v,6408,5121,this._readbackBuffer);l=new Set;v*=v;m=this._readbackBuffer32[Math.round(v/
2)];4294967295!==m&&l.add(m);for(t=0;t<v;t++)m=this._readbackBuffer32[t],4294967295!==m&&l.add(m);x.bindFramebuffer(u);x.setViewport(z.x,z.y,z.width,z.height);var D=[];l.forEach(function(y){D.push(y)});return D};p.prototype._renderBackground=function(l,m,r,t,x,v,z){this._backgroundRenderer.render(l,m,r,t,x,v,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,z)};p.prototype._renderLine=function(l,m,r,t,x,v,z){this._lineRenderer.render(l,m,r,t,this._state,x,v,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,
z)};p.prototype._renderFill=function(l,m,r,t,x,v,z){this._fillRenderer.render(l,m,r,this._state.rotation,t,x,v,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,z)};p.prototype._renderCircle=function(l,m,r,t,x,v,z,A){var B=!0;x===v.key.level&&(B=!1);l.setStencilTestEnabled(B);this._circleRenderer.render(l,m,r,t,this._state.rotation,v,z,this._extrudeMatrix,A)};p.prototype._renderSymbol=function(l,m,r,t,x,v,z,A){var B=!0;x===v.key.level&&(B=!1);l.setStencilTestEnabled(B);this._symbolRenderer.render(l,
m,r,t,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),v,z,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,A)};return p}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../MemoryBuffer ./rendererUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k,c,d,f){return function(){function h(){this._solidAttributeLocations={a_pos:0};this._attributeLocations={a_pos:0,a_id:1};this._patternMatrix=a.create();this._color=b.create();this._rendererInitialized=this._solidrendererInitialized=!1;this._color.set([1,0,0,1])}h.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=
null)};h.prototype.renderSolidColor=function(n,p){this._solidrendererInitialized||this._initializeSolidRenderer(n);n.bindVAO(this._solidVertexArrayObject);var l=this._shaderVariations.getProgram([!1,!1],void 0,void 0,this._solidAttributeLocations);n.bindProgram(l);l.setUniformMatrix4fv("u_transformMatrix",p.u_matrix);l.setUniform2fv("u_normalized_origin",p.u_normalized_origin);l.setUniform1f("u_coord_range",p.u_coord_range||4096);l.setUniform1f("u_depth",p.u_depth||0);l.setUniform4fv("u_color",p.u_color||
this._color);n.drawArrays(5,0,4);n.bindVAO()};h.prototype.render=function(n,p,l,m,r,t,x,v,z){this._rendererInitialized||this._initialize(n);var A=t.getPaintValue("background-color",l);z*=t.getPaintValue("background-opacity",l);var B=t.getPaintValue("background-pattern",l),u=void 0!==B,w=A[3]*z,D=u||1>w;if(!D||0!==m)if(D||1!==m){D=3===m;m=this._shaderVariations.getProgram([u,D],void 0,void 0,this._attributeLocations);n.bindVAO(this._vertexArrayObject);n.bindProgram(m);m.setUniform1f("u_coord_range",
r.coordRange);m.setUniform1f("u_depth",t.z||0);m.setUniformMatrix4fv("u_transformMatrix",r.tileTransform.transform);m.setUniform2fv("u_normalized_origin",r.tileTransform.displayCoord);if(u){t=x.getMosaicItemPosition(B,!0);if(!t)return;l=512*Math.pow(2,Math.floor(l)-r.key.level)*v;a.identity(this._patternMatrix);r=l/t.size[1];this._patternMatrix[0]=l/t.size[0];this._patternMatrix[4]=r;x.bind(n,9729,t.page||0);m.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix);m.setUniform1f("u_opacity",
z);m.setUniform2f("u_pattern_tl",t.tl[0],t.tl[1]);m.setUniform2f("u_pattern_br",t.br[0],t.br[1]);m.setUniform1i("u_texture",0)}else this._color[0]=w*A[0],this._color[1]=w*A[1],this._color[2]=w*A[2],this._color[3]=w,m.setUniform4fv("u_color",this._color);D&&(p=g.int32To4Bytes(p.layerID),m.setUniform4f("u_id",p[0],p[1],p[2],p[3]));n.drawArrays(5,0,4);n.bindVAO()}};h.prototype._initializeSolidRenderer=function(n){if(this._solidrendererInitialized)return!0;if(!this._shaderVariations){var p=new d("background",
["backgroundVS","backgroundFS"],[],k,n);p.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");p.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=p}p=new Int8Array([0,0,1,0,0,1,1,1]);p=c.createVertex(n,35044,p);this._solidVertexArrayObject=new f(n,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:p});return this._solidrendererInitialized=!0};h.prototype._initialize=function(n){if(this._rendererInitialized)return!0;if(!this._shaderVariations){var p=
new d("background",["backgroundVS","backgroundFS"],[],k,n);p.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");p.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=p}p=[];p.push(e.i1616to32(0,0));p.push(e.i1616to32(1,0));p.push(e.i1616to32(0,1));p.push(e.i1616to32(1,1));p=new Uint32Array(p);p=c.createVertex(n,35044,p);this._vertexArrayObject=new f(n,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:p});return this._rendererInitialized=
!0};return h}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],function(F){var q={create:function(){var a=new F.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new F.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},
copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},fromValues:function(a,b,e,g,k,c,d,f,h){var n=new F.ARRAY_TYPE(9);n[0]=a;n[1]=b;n[2]=e;n[3]=g;n[4]=k;n[5]=c;n[6]=d;n[7]=f;n[8]=h;return n},set:function(a,b,e,g,k,c,d,f,h,n){a[0]=b;a[1]=e;a[2]=g;a[3]=k;a[4]=c;a[5]=d;a[6]=f;a[7]=h;a[8]=n;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var e=b[1],
g=b[2],k=b[5];a[1]=b[3];a[2]=b[6];a[3]=e;a[5]=b[7];a[6]=g;a[7]=k}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var e=b[0],g=b[1],k=b[2],c=b[3],d=b[4],f=b[5],h=b[6],n=b[7],p=b[8],l=p*d-f*n,m=-p*c+f*h,r=n*c-d*h,t=e*l+g*m+k*r;if(!t)return null;t=1/t;a[0]=l*t;a[1]=(-p*g+k*n)*t;a[2]=(f*g-k*d)*t;a[3]=m*t;a[4]=(p*e-k*h)*t;a[5]=(-f*e+k*c)*t;a[6]=r*t;a[7]=(-n*e+g*h)*t;a[8]=(d*e-g*c)*t;return a},adjoint:function(a,b){var e=b[0],
g=b[1],k=b[2],c=b[3],d=b[4],f=b[5],h=b[6],n=b[7],p=b[8];a[0]=d*p-f*n;a[1]=k*n-g*p;a[2]=g*f-k*d;a[3]=f*h-c*p;a[4]=e*p-k*h;a[5]=k*c-e*f;a[6]=c*n-d*h;a[7]=g*h-e*n;a[8]=e*d-g*c;return a},determinant:function(a){var b=a[3],e=a[4],g=a[5],k=a[6],c=a[7],d=a[8];return a[0]*(d*e-g*c)+a[1]*(-d*b+g*k)+a[2]*(c*b-e*k)},multiply:function(a,b,e){var g=b[0],k=b[1],c=b[2],d=b[3],f=b[4],h=b[5],n=b[6],p=b[7];b=b[8];var l=e[0],m=e[1],r=e[2],t=e[3],x=e[4],v=e[5],z=e[6],A=e[7];e=e[8];a[0]=l*g+m*d+r*n;a[1]=l*k+m*f+r*p;a[2]=
l*c+m*h+r*b;a[3]=t*g+x*d+v*n;a[4]=t*k+x*f+v*p;a[5]=t*c+x*h+v*b;a[6]=z*g+A*d+e*n;a[7]=z*k+A*f+e*p;a[8]=z*c+A*h+e*b;return a}};q.mul=q.multiply;q.translate=function(a,b,e){var g=b[0],k=b[1],c=b[2],d=b[3],f=b[4],h=b[5],n=b[6],p=b[7];b=b[8];var l=e[0];e=e[1];a[0]=g;a[1]=k;a[2]=c;a[3]=d;a[4]=f;a[5]=h;a[6]=l*g+e*d+n;a[7]=l*k+e*f+p;a[8]=l*c+e*h+b;return a};q.rotate=function(a,b,e){var g=b[0],k=b[1],c=b[2],d=b[3],f=b[4],h=b[5],n=b[6],p=b[7];b=b[8];var l=Math.sin(e);e=Math.cos(e);a[0]=e*g+l*d;a[1]=e*k+l*f;
a[2]=e*c+l*h;a[3]=e*d-l*g;a[4]=e*f-l*k;a[5]=e*h-l*c;a[6]=n;a[7]=p;a[8]=b;return a};q.scale=function(a,b,e){var g=e[0];e=e[1];a[0]=g*b[0];a[1]=g*b[1];a[2]=g*b[2];a[3]=e*b[3];a[4]=e*b[4];a[5]=e*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};q.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};q.fromRotation=function(a,b){var e=Math.sin(b),g=Math.cos(b);a[0]=g;a[1]=e;a[2]=0;a[3]=-e;a[4]=g;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};q.fromScaling=function(a,
b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};q.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};q.fromQuat=function(a,b){var e=b[0],g=b[1],k=b[2],c=b[3],d=e+e,f=g+g,h=k+k;e*=d;var n=g*d;g*=f;var p=k*d,l=k*f;k*=h;d*=c;f*=c;c*=h;a[0]=1-g-k;a[3]=n-c;a[6]=p+f;a[1]=n+c;a[4]=1-e-k;a[7]=l-d;a[2]=p-f;a[5]=l+d;a[8]=1-e-g;return a};q.normalFromMat4=function(a,b){var e=b[0],g=b[1],k=b[2],c=b[3],d=b[4],f=b[5],
h=b[6],n=b[7],p=b[8],l=b[9],m=b[10],r=b[11],t=b[12],x=b[13],v=b[14],z=b[15],A=e*f-g*d,B=e*h-k*d,u=e*n-c*d,w=g*h-k*f,D=g*n-c*f,y=k*n-c*h,C=p*x-l*t,G=p*v-m*t;p=p*z-r*t;var I=l*v-m*x;l=l*z-r*x;m=m*z-r*v;r=A*m-B*l+u*I+w*p-D*G+y*C;if(!r)return null;r=1/r;a[0]=(f*m-h*l+n*I)*r;a[1]=(h*p-d*m-n*G)*r;a[2]=(d*l-f*p+n*C)*r;a[3]=(k*l-g*m-c*I)*r;a[4]=(e*m-k*p+c*G)*r;a[5]=(g*p-e*l-c*C)*r;a[6]=(x*y-v*D+z*w)*r;a[7]=(v*u-t*y-z*B)*r;a[8]=(t*D-x*u+z*A)*r;return a};q.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};q.add=function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=b[2]+e[2];a[3]=b[3]+e[3];a[4]=b[4]+e[4];a[5]=b[5]+e[5];a[6]=b[6]+e[6];a[7]=b[7]+e[7];a[8]=b[8]+e[8];return a};q.subtract=function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=
b[3]-e[3];a[4]=b[4]-e[4];a[5]=b[5]-e[5];a[6]=b[6]-e[6];a[7]=b[7]-e[7];a[8]=b[8]-e[8];return a};q.sub=q.subtract;q.multiplyScalar=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*e;return a};q.multiplyScalarAndAdd=function(a,b,e,g){a[0]=b[0]+e[0]*g;a[1]=b[1]+e[1]*g;a[2]=b[2]+e[2]*g;a[3]=b[3]+e[3]*g;a[4]=b[4]+e[4]*g;a[5]=b[5]+e[5]*g;a[6]=b[6]+e[6]*g;a[7]=b[7]+e[7]*g;a[8]=b[8]+e[8]*g;return a};q.exactEquals=function(a,b){return a[0]===
b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};q.equals=function(a,b){var e=a[0],g=a[1],k=a[2],c=a[3],d=a[4],f=a[5],h=a[6],n=a[7],p=a[8],l=b[0],m=b[1],r=b[2],t=b[3],x=b[4],v=b[5],z=a[6],A=b[7],B=b[8];return Math.abs(e-l)<=F.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(g-m)<=F.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(k-r)<=F.EPSILON*Math.max(1,Math.abs(k),Math.abs(r))&&Math.abs(c-t)<=F.EPSILON*Math.max(1,Math.abs(c),
Math.abs(t))&&Math.abs(d-x)<=F.EPSILON*Math.max(1,Math.abs(d),Math.abs(x))&&Math.abs(f-v)<=F.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(h-z)<=F.EPSILON*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(n-A)<=F.EPSILON*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(p-B)<=F.EPSILON*Math.max(1,Math.abs(p),Math.abs(B))};return q})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(F,q){return function(){function a(b){this._array=[];this._stride=
b}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=
function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(b,e){return 65535&b|e<<16};a.i8888to32=function(b,e,g,k){return b&255|(e&255)<<8|(g&255)<<16|k<<24};a.i8816to32=function(b,e,g){return b&255|(e&255)<<8|g<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/rendererUtils":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});var a=new Uint32Array(1),b=
new Uint8Array(a.buffer);q.int32To4Bytes=function(e){a[0]=e|0;return[b[0],b[1],b[2],b[3]]}})},"esri/layers/vectorTiles/views/vectorTiles/renderers/vtShaderSnippets":function(){define("require exports dojo/text!../../2d/engine/webgl/shaders/tileInfo.xml dojo/text!./shaders/backgroundShaders.xml dojo/text!./shaders/circleShaders.xml dojo/text!./shaders/fillShaders.xml dojo/text!./shaders/iconShaders.xml dojo/text!./shaders/lineShaders.xml dojo/text!./shaders/outlineShaders.xml dojo/text!./shaders/textShaders.xml ../../webgl/ShaderSnippets".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h){F=new h;h.parse(b,F);h.parse(a,F);h.parse(g,F);h.parse(d,F);h.parse(c,F);h.parse(k,F);h.parse(f,F);h.parse(e,F);return F})},"esri/layers/vectorTiles/views/vectorTiles/renderers/CircleRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(F,q,a,b,
e,g,k,c,d,f){return function(){function h(){this._attributeLocations={a_pos:0,a_color:1,a_stroke_color:2,a_data:3};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._color=e.create();this._strokeColor=e.create()}h.prototype.dispose=function(){};h.prototype.render=function(n,p,l,m,r,t,x,v,z){if(0!==p.triangleElementCount){this._initialized||this._initialize(n);var A=x.hasDataDrivenRadius?1:x.getPaintValue("circle-radius",l),B=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("circle-color",
l),u=x.hasDataDrivenOpacity?1:x.getPaintValue("circle-opacity",l),w=x.hasDataDrivenStrokeWidth?1:x.getPaintValue("circle-stroke-width",l),D=x.hasDataDrivenStrokeColor?[1,1,1,1]:x.getPaintValue("circle-stroke-color",l),y=x.hasDataDrivenStrokeOpacity?1:x.getPaintValue("circle-stroke-opacity",l),C=x.hasDataDrivenBlur?0:x.getPaintValue("circle-blur",l);u=u*B[3]*z;this._color[0]=u*B[0];this._color[1]=u*B[1];this._color[2]=u*B[2];this._color[3]=u;u=y*D[3]*z;this._strokeColor[0]=u*D[0];this._strokeColor[1]=
u*D[1];this._strokeColor[2]=u*D[2];this._strokeColor[3]=u;z=t.tileTransform.transform;B=x.getPaintValue("circle-translate",l);if(0!==B[0]||0!==B[1])a.copy(this._viewProjMat,t.tileTransform.transform),z=B[0],B=B[1],y=D=0,y=(1<<t.key.level)/Math.pow(2,l)*(t.coordRange/512),1===x.getPaintValue("circle-translate-anchor",l)?(r*=-g.C_DEG_TO_RAD,l=Math.sin(r),r=Math.cos(r),D=y*(z*r-B*l),y*=z*l+B*r):(D=y*z,y*=B),this._offsetVector[0]=D,this._offsetVector[1]=y,this._offsetVector[2]=0,a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector),z=this._viewProjMat;if(l=this._getCircleVAO(n,t))n.bindVAO(l),l=3===m,m=this._shaderVariations.getProgram([l],void 0,void 0,this._attributeLocations),n.bindProgram(m),m.setUniformMatrix4fv("u_transformMatrix",z),m.setUniformMatrix4fv("u_extrudeMatrix",v),m.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord),m.setUniform1f("u_depth",x.z),m.setUniform1f("u_radius",A),m.setUniform4fv("u_color",this._color),m.setUniform1f("u_blur",C),m.setUniform1f("u_stroke_width",
w),m.setUniform4fv("u_stroke_color",this._strokeColor),m.setUniform1f("u_antialiasingWidth",1.2),l&&(t=k.int32To4Bytes(p.layerID),m.setUniform4f("u_id",t[0],t[1],t[2],t[3])),n.drawElements(4,p.triangleElementCount,5125,12*p.triangleElementStart),n.bindVAO()}};h.prototype._initialize=function(n){if(this._initialized)return!0;n=new d("circle",["circleVS","circleFS"],[],c,n);n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};h.prototype._getCircleVAO=function(n,p){if(p.circleVertexArrayObject)return p.circleVertexArrayObject;var l=p.circleVertexBuffer,m=p.circleIndexBuffer;if(!l||!m)return null;p.circleVertexArrayObject=
new f(n,this._attributeLocations,this._vertexAttributes,{geometry:l},m);return p.circleVertexArrayObject};return h}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});(function(){return function(b,e){this.level=b;this.now=e}})();F=function(){return function(b,e,g,k){this.fadeSpeed=b;this.minfadeLevel=e;this.maxfadeLevel=g;this.fadeChange=k}}();q.FadeProperties=
F;F=function(){function b(e){void 0===e&&(e=300);this._levelSnapshots=[];this._duration=e}b.prototype.recordLevel=function(e){var g=a(),k=this._levelSnapshots;0===k.length&&(k.push({level:e,now:0}),k.push({level:e,now:0}));2!==k.length&&k[0].level===e||k.push({level:e,now:g})};b.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var e=this._duration,g=this._levelSnapshots,k=g.length,c=g[k-1],d=-1;k>d+1&&g[d+1].now+e<c.now;)d++;for(0>d&&(d=0);d<k;d++)if(g[d].level!==c.level)return!0;
return!1};b.prototype.getFadeValues=function(e){void 0===e&&(e=!1);for(var g=this._duration,k=a(),c=this._levelSnapshots;3<c.length&&c[1].now+g<k;)c.shift();c[1].now+g<k&&(c[0].level=c[1].level);var d=c[0].level,f=c[c.length-1],h=f.level,n=Math.min(d,h);d=Math.max(d,h);c=(f.level-c[1].level)/((f.now-c[1].now)/g);return e?{fadeSpeed:0,minfadeLevel:n,maxfadeLevel:d,fadeChange:0}:{fadeSpeed:c,minfadeLevel:n,maxfadeLevel:d,fadeChange:(k-f.now)/g*c}};return b}();q.FadeRecorder=F})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h){var n=1/65536;return function(){function p(){this._fillAttributeLocations={a_pos:0};this._fillAttributeLocationsDD={a_pos:0,a_color:1};this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._outlineAttributeLocationsDD={a_pos:0,a_offset:1,a_xnormal:2,a_color:3};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=e.create();this._patternMatrix=a.create();this._color=g.create();this._outlineColor=g.create()}p.prototype.dispose=function(){};
p.prototype.render=function(l,m,r,t,x,v,z,A,B,u,w){if(0!==m.triangleElementCount){this._initialized||this._initialize(l);var D=void 0!==z.getPaintValue("fill-pattern",r),y=z.hasDataDrivenColor?[1,1,1,1]:z.getPaintValue("fill-color",r),C=z.hasDataDrivenOpacity?1:z.getPaintValue("fill-opacity",r),G=C*y[3]*w;this._color[0]=G*y[0];this._color[1]=G*y[1];this._color[2]=G*y[2];this._color[3]=G;y=3===x;var I;y&&(I=c.int32To4Bytes(m.layerID));G=v.tileTransform.transform;var O=v.coordRange/512,R=z.getPaintValue("fill-translate",
r);if(0!==R[0]||0!==R[1]){b.copy(this._viewProjMat,v.tileTransform.transform);G=R[0];R=R[1];var Z=0,W=0;O*=(1<<v.key.level)/Math.pow(2,r);1===z.getPaintValue("fill-translate-anchor",r)?(Z=-k.C_DEG_TO_RAD*t,t=Math.sin(Z),W=Math.cos(Z),Z=O*(G*W-R*t),W=O*(G*t+R*W)):(Z=O*G,W=O*R);this._offsetVector[0]=Z;this._offsetVector[1]=W;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);G=this._viewProjMat}this._drawFill(l,m,r,x,v,z,A,G,u,w,y,I);if(z.getPaintValue("fill-antialias",
r)&&!D&&0<m.outlineElementCount&&(1===x||3===x)){x=z.hasDataDrivenOutline;if(z.outlineUsesFillColor){if(1!==this._color[3])return;this._outlineColor[0]=this._color[0];this._outlineColor[1]=this._color[1];this._outlineColor[2]=this._color[2];this._outlineColor[3]=this._color[3]}else r=z.hasDataDrivenOutlineColor?[1,1,1,1]:z.getPaintValue("fill-outline-color",r),w*=C*r[3],this._outlineColor[0]=w*r[0],this._outlineColor[1]=w*r[1],this._outlineColor[2]=w*r[2],this._outlineColor[3]=w;u=.75/u;if(w=this._getOutlineVAO(l,
v,x))l.bindVAO(w),w=this._outlineShaderVariations.getProgram([x,y],void 0,void 0,x?this._outlineAttributeLocationsDD:this._outlineAttributeLocations),l.bindProgram(w),w.setUniformMatrix4fv("u_transformMatrix",G),w.setUniformMatrix4fv("u_extrudeMatrix",B),w.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord),w.setUniform1f("u_depth",z.z+n),w.setUniform1f("u_outline_width",u),w.setUniform4fv("u_color",this._outlineColor),y&&w.setUniform4f("u_id",I[0],I[1],I[2],I[3]),l.drawElements(4,m.outlineElementCount,
5125,12*m.outlineElementStart),l.bindVAO()}}};p.prototype._initialize=function(l){if(this._initialized)return!0;var m=new f("fill",["fillVS","fillFS"],[],d,l);m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("DD","DD",[!0,!1],"DD");m.addDefine("ID","ID",[!0,!0],"ID");this._fillShaderVariations=m;this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,
stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]};l=new f("outline",["outlineVS","outlineFS"],[],d,l);l.addDefine("DD","DD",[!0,!1],"DD");l.addDefine("ID","ID",[!0,!0],"ID");this._outlineShaderVariations=l;this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,
stride:8,normalized:!1,divisor:0}]};this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]};return this._initialized=!0};p.prototype._drawFill=function(l,m,r,t,x,v,z,A,B,u,w,D){var y=v.getPaintValue("fill-pattern",
r),C=void 0!==y,G=v.hasDataDrivenOpacity?1:u*v.getPaintValue("fill-opacity",r),I=v.hasDataDrivenColor?[1,1,1,1]:v.getPaintValue("fill-color",r);u*=G*I[3];this._color[0]=u*I[0];this._color[1]=u*I[1];this._color[2]=u*I[2];this._color[3]=u;I=v.hasDataDrivenFill;G=!1;!C&&(I?0:1===u)&&(G=!0);if(!C||0!==t)if(!G||1!==t)if(C||G||0!==t)if(t=this._getFillVAO(l,x,I))l.bindVAO(t),t=this._fillShaderVariations.getProgram([C,I,w],void 0,void 0,I?this._fillAttributeLocationsDD:this._fillAttributeLocations),l.bindProgram(t),
C&&(y=z.getMosaicItemPosition(y,!0))&&(r=x.coordRange/512/Math.pow(2,Math.round(r)-x.key.level)/B,a.identity(this._patternMatrix),B=1/(y.size[1]*r),this._patternMatrix[0]=1/(y.size[0]*r),this._patternMatrix[4]=B,z.bind(l,9729,y.page,1),t.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),t.setUniform2f("u_pattern_tl",y.tl[0],y.tl[1]),t.setUniform2f("u_pattern_br",y.br[0],y.br[1]),t.setUniform1i("u_texture",1)),t.setUniformMatrix4fv("u_transformMatrix",A),t.setUniform2fv("u_normalized_origin",
x.tileTransform.displayCoord),t.setUniform1f("u_depth",v.z+n),t.setUniform4fv("u_color",this._color),w&&t.setUniform4f("u_id",D[0],D[1],D[2],D[3]),l.drawElements(4,m.triangleElementCount,5125,12*m.triangleElementStart),l.bindVAO()};p.prototype._getFillVAO=function(l,m,r){if(r){if(m.fillDDVertexArrayObject)return m.fillDDVertexArrayObject;r=m.fillDDVertexBuffer;var t=m.fillIndexBuffer;if(!r||!t)return null;m.fillDDVertexArrayObject=new h(l,this._fillAttributeLocationsDD,this._fillVertexAttributesDD,
{geometry:r},t);return m.fillDDVertexArrayObject}if(m.fillVertexArrayObject)return m.fillVertexArrayObject;r=m.fillVertexBuffer;t=m.fillIndexBuffer;if(!r||!t)return null;m.fillVertexArrayObject=new h(l,this._fillAttributeLocations,this._fillVertexAttributes,{geometry:r},t);return m.fillVertexArrayObject};p.prototype._getOutlineVAO=function(l,m,r){if(r){if(m.outlineDDVertexArrayObject)return m.outlineDDVertexArrayObject;r=m.outlineDDVertexBuffer;var t=m.outlineIndexBuffer;if(!r||!t)return null;m.outlineDDVertexArrayObject=
new h(l,this._outlineAttributeLocationsDD,this._outlineVertexAttributesDD,{geometry:r},t);return m.outlineDDVertexArrayObject}if(m.outlineVertexArrayObject)return m.outlineVertexArrayObject;r=m.outlineVertexBuffer;t=m.outlineIndexBuffer;if(!r||!t)return null;m.outlineVertexArrayObject=new h(l,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:r},t);return m.outlineVertexArrayObject};return p}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec2 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h){return function(){function n(){this._attributeLocations={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2};this._attributeLocationsDD={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=e.create();this._color=g.create();this._dashArray=b.create()}n.prototype.dispose=function(){};n.prototype.render=function(p,l,m,r,t,x,v,z,A,B,u){if(0!==l.triangleElementCount){this._initialized||
this._initialize(p);var w=x.tileTransform.transform,D=x.coordRange/512,y=v.getPaintValue("line-translate",m);if(0!==y[0]||0!==y[1]){a.copy(this._viewProjMat,x.tileTransform.transform);w=y[0];y=y[1];var C=0,G=0;G=(1<<x.key.level)/Math.pow(2,m)*D;t=t.rotation;if(1===v.getPaintValue("line-translate-anchor",m)){C=-k.C_DEG_TO_RAD*t;t=Math.sin(C);var I=Math.cos(C);C=G*(w*I-y*t);G*=w*t+y*I}else C=G*w,G*=y;this._offsetVector[0]=C;this._offsetVector[1]=G;this._offsetVector[2]=0;a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector);w=this._viewProjMat}y=v.getPaintValue("line-pattern",m);G=void 0!==y;B=1/B;t=v.getPaintValue("line-blur",m);I=v.hasDataDrivenColor?[1,1,1,1]:v.getPaintValue("line-color",m);var O=v.hasDataDrivenOpacity?1:v.getPaintValue("line-opacity",m);C=v.hasDataDrivenWidth?1:v.getPaintValue("line-width",m);u*=O*I[3];this._color[0]=u*I[0];this._color[1]=u*I[1];this._color[2]=u*I[2];this._color[3]=u;u=v.hasDataDrivenLine;r=3===r;var R;r&&(R=c.int32To4Bytes(l.layerID));if(I=
this._getLineVAO(p,x,u)){p.bindVAO(I);u=this._shaderVariations.getProgram([G,u,r],void 0,void 0,u?this._attributeLocationsDD:this._attributeLocations);p.bindProgram(u);u.setUniformMatrix4fv("u_transformMatrix",w);u.setUniformMatrix4fv("u_extrudeMatrix",A);u.setUniform2fv("u_normalized_origin",x.tileTransform.displayCoord);u.setUniform1f("u_depth",v.z);u.setUniform1f("u_blur",t);u.setUniform1f("u_antialiasing",B);u.setUniform4fv("u_color",this._color);u.setUniform1f("u_width",C);r&&u.setUniform4f("u_id",
R[0],R[1],R[2],R[3]);if(G){if(m=z.getMosaicItemPosition(y,!0))z.bind(p,9729,m.page,1),u.setUniform2f("u_pattern_tl",m.tl[0],m.br[1]),u.setUniform2f("u_pattern_br",m.br[0],m.tl[1]),u.setUniform2f("u_spriteSize",D*m.size[0],m.size[1]),u.setUniform1i("u_texture",1)}else z=v.getPaintValue("line-dasharray",m),2>z.length&&(z=[1,-1]),this._dashArray[0]=D*z[0],this._dashArray[1]=D*z[1],u.setUniform2fv("u_dasharray",this._dashArray);p.drawElements(4,l.triangleElementCount,5125,12*l.triangleElementStart);p.bindVAO()}}};
n.prototype._initialize=function(p){if(this._initialized)return!0;p=new f("line",["lineVS","lineFS"],[],d,p);p.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");p.addDefine("DD","DD",[!0,!1],"DD");p.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=p;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,
offset:8,stride:12,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]};return this._initialized=
!0};n.prototype._getLineVAO=function(p,l,m){if(m){if(l.lineDDVertexArrayObject)return l.lineDDVertexArrayObject;m=l.lineDDVertexBuffer;var r=l.lineIndexBuffer;if(!m||!r)return null;l.lineDDVertexArrayObject=new h(p,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:m},r);return l.lineDDVertexArrayObject}if(l.lineVertexArrayObject)return l.lineVertexArrayObject;m=l.lineVertexBuffer;r=l.lineIndexBuffer;if(!m||!r)return null;l.lineVertexArrayObject=new h(p,this._attributeLocations,this._vertexAttributes,
{geometry:m},r);return l.lineVertexArrayObject};return n}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(F){var q={create:function(){var a=new F.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new F.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var e=new F.ARRAY_TYPE(2);e[0]=a;e[1]=b;return e},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,e){a[0]=b;a[1]=e;return a},add:function(a,b,e){a[0]=b[0]+
e[0];a[1]=b[1]+e[1];return a},subtract:function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];return a}};q.sub=q.subtract;q.multiply=function(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];return a};q.mul=q.multiply;q.divide=function(a,b,e){a[0]=b[0]/e[0];a[1]=b[1]/e[1];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};q.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);return a};
q.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};q.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;return a};q.scaleAndAdd=function(a,b,e,g){a[0]=b[0]+e[0]*g;a[1]=b[1]+e[1]*g;return a};q.distance=function(a,b){var e=b[0]-a[0],g=b[1]-a[1];return Math.sqrt(e*e+g*g)};q.dist=q.distance;q.squaredDistance=function(a,b){var e=b[0]-a[0],g=b[1]-a[1];return e*e+g*g};q.sqrDist=q.squaredDistance;q.length=
function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};q.normalize=function(a,b){var e=b[0],g=b[1];e=e*e+g*g;0<e&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};q.cross=function(a,b,e){b=b[0]*e[1]-b[1]*e[0];a[0]=a[1]=0;a[2]=b;return a};
q.lerp=function(a,b,e,g){var k=b[0];b=b[1];a[0]=k+g*(e[0]-k);a[1]=b+g*(e[1]-b);return a};q.random=function(a,b){b=b||1;var e=2*F.RANDOM()*Math.PI;a[0]=Math.cos(e)*b;a[1]=Math.sin(e)*b;return a};q.transformMat2=function(a,b,e){var g=b[0];b=b[1];a[0]=e[0]*g+e[2]*b;a[1]=e[1]*g+e[3]*b;return a};q.transformMat2d=function(a,b,e){var g=b[0];b=b[1];a[0]=e[0]*g+e[2]*b+e[4];a[1]=e[1]*g+e[3]*b+e[5];return a};q.transformMat3=function(a,b,e){var g=b[0];b=b[1];a[0]=e[0]*g+e[3]*b+e[6];a[1]=e[1]*g+e[4]*b+e[7];return a};
q.transformMat4=function(a,b,e){var g=b[0];b=b[1];a[0]=e[0]*g+e[4]*b+e[12];a[1]=e[1]*g+e[5]*b+e[13];return a};q.forEach=function(){var a=q.create();return function(b,e,g,k,c,d){e||(e=2);g||(g=0);for(k=k?Math.min(k*e+g,b.length):b.length;g<k;g+=e)a[0]=b[g],a[1]=b[g+1],c(a,a,d),b[g]=a[0],b[g+1]=a[1];return b}}();q.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};q.equals=function(a,b){var e=a[0],g=a[1],k=b[0],c=b[1];return Math.abs(e-k)<=
F.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(g-c)<=F.EPSILON*Math.max(1,Math.abs(g),Math.abs(c))};return q})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer","./SDFRenderer"],function(F,q,a,b){return function(){function e(){this._iconRenderer=new a;this._sdfRenderer=new b}e.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null);this._sdfRenderer&&(this._sdfRenderer.dispose(),
this._sdfRenderer=null)};e.prototype.render=function(g,k,c,d,f,h,n,p,l,m,r,t,x,v){k.hasData()&&(0<k.markerPerPageElementsMap.size&&this._iconRenderer.render(g,k,c,d,f,h,n,p,l,r,t,v),0<k.glyphPerPageElementsMap.size&&this._sdfRenderer.render(g,k,c,d,f,h,n,p,m,r,t,x,v))};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k,c,d,f){return function(){function h(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._extrudeMat=a.create();this._color=e.create()}h.prototype.dispose=function(){};h.prototype.render=function(n,p,l,m,r,t,x,v,z,A,B,u){var w=this;
this._initialized||this._initialize(n);var D=v.hasDataDrivenIconSize?1:v.getLayoutValue("icon-size",l),y=v.hasDataDrivenIconColor?[1,1,1,1]:v.getPaintValue("icon-color",l),C=v.hasDataDrivenIconOpacity?1:v.getPaintValue("icon-opacity",l);u*=y[3]*C;this._color[0]=u*y[0];this._color[1]=u*y[1];this._color[2]=u*y[2];this._color[3]=u;y=v.getLayoutValue("icon-rotation-alignment",l);2===y&&(y=1===v.getLayoutValue("symbol-placement",l)?0:1);var G=0===y;u=p.isSDF;C=v.hasDataDrivenIcon;m=3===m;y=g.degToByte(r);
var I=x.tileTransform.transform,O=v.getPaintValue("icon-translate",l);if(0!==O[0]||0!==O[1]){a.copy(this._viewProjMat,x.tileTransform.transform);I=O[0];O=O[1];var R=0,Z=0;Z=(1<<x.key.level)/Math.pow(2,l)*(x.coordRange/512);if(1===v.getPaintValue("icon-translate-anchor",l)){R=-g.C_DEG_TO_RAD*r;r=Math.sin(R);var W=Math.cos(R);R=Z*(I*W-O*r);Z*=I*r+O*W}else R=Z*I,Z*=O;this._offsetVector[0]=R;this._offsetVector[1]=Z;this._offsetVector[2]=0;a.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
I=this._viewProjMat}G?a.copy(this._extrudeMat,A):a.copy(this._extrudeMat,B);if(A=this._getIconVAO(n,x,C)){n.bindVAO(A);var da=this._shaderVariations.getProgram([u,C,m],void 0,void 0,C?this._attributeLocationsDD:this._attributeLocations);n.bindProgram(da);u&&(A=v.getPaintValue("icon-halo-color",l),B=v.getPaintValue("icon-halo-width",l),da.setUniform4f("u_outlineColor",A[0],A[1],A[2],A[3]),da.setUniform1f("u_outlineSize",B));da.setUniformMatrix4fv("u_transformMatrix",I);da.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);da.setUniform2fv("u_normalized_origin",x.tileTransform.displayCoord);da.setUniform1f("u_depth",v.z);da.setUniform1f("u_mapRotation",y);da.setUniform1f("u_keepUpright",0);da.setUniform1f("u_level",10*l);da.setUniform1f("u_fadeSpeed",10*t.fadeSpeed);da.setUniform1f("u_minfadeLevel",10*t.minfadeLevel);da.setUniform1f("u_maxfadeLevel",10*t.maxfadeLevel);da.setUniform1f("u_fadeChange",10*(l+t.fadeChange));da.setUniform1i("u_texture",1);da.setUniform1f("u_size",D);da.setUniform4fv("u_color",
this._color);m&&(l=k.int32To4Bytes(p.layerID),da.setUniform4f("u_id",l[0],l[1],l[2],l[3]));p.markerPerPageElementsMap.forEach(function(ea,Y){w._spritesTextureSize[0]=z.getWidth(Y)/4;w._spritesTextureSize[1]=z.getHeight(Y)/4;da.setUniform2fv("u_mosaicSize",w._spritesTextureSize);z.bind(n,9729,Y,1);n.drawElements(4,ea[1],5125,12*ea[0])});n.bindVAO()}};h.prototype._initialize=function(n){if(this._initialized)return!0;n=new d("icon",["iconVS","iconFS"],[],c,n);n.addDefine("SDF","SDF",[!0,!0],"SDF");n.addDefine("DD",
"DD",[!0,!1],"DD");n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};h.prototype._getIconVAO=function(n,
p,l){if(l){if(p.iconDDVertexArrayObject)return p.iconDDVertexArrayObject;l=p.iconDDVertexBuffer;var m=p.iconIndexBuffer;if(!l||!m)return null;p.iconDDVertexArrayObject=new f(n,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:l},m);return p.iconDDVertexArrayObject}if(p.iconVertexArrayObject)return p.iconVertexArrayObject;l=p.iconVertexBuffer;m=p.iconIndexBuffer;if(!l||!m)return null;p.iconVertexArrayObject=new f(n,this._attributeLocations,this._vertexAttributes,{geometry:l},m);return p.iconVertexArrayObject};
return h}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports dojo/has ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(F,q,a,b,e,g,k,c,d,f,h){var n=1/65536;return function(){function p(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};
this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=e.create();this._extrudeMat=b.create();this._haloColor=g.create();this._sdfColor=g.create();this._scaleVec=e.create()}p.prototype.dispose=function(){};p.prototype.render=function(l,m,r,t,x,v,z,A,B,u,w,D,y){var C=this;if(!a("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(l);var G=k.degToByte(x),I=A.getLayoutValue("text-rotation-alignment",
r);2===I&&(I=1===A.getLayoutValue("symbol-placement",r)?0:1);var O=0===I;I=A.getLayoutValue("text-keep-upright",r)&&O;t=3===t;D=.8*3/D;var R=A.hasDataDrivenTextSize?1:A.getLayoutValue("text-size",r),Z=A.hasDataDrivenTextColor?[1,1,1,1]:A.getPaintValue("text-color",r),W=A.hasDataDrivenTextOpacity?1:A.getPaintValue("text-opacity",r),da=Z[3]*W*y;this._sdfColor[0]=da*Z[0];this._sdfColor[1]=da*Z[1];this._sdfColor[2]=da*Z[2];this._sdfColor[3]=da;this._glyphTextureSize||(this._glyphTextureSize=new Float32Array([B.width/
4,B.height/4]));Z=z.tileTransform.transform;da=A.getPaintValue("text-translate",r);if(0!==da[0]||0!==da[1]){b.copy(this._viewProjMat,z.tileTransform.transform);Z=da[0];da=da[1];var ea=0,Y=0;Y=(1<<z.key.level)/Math.pow(2,r)*(z.coordRange/512);if(1===A.getPaintValue("text-translate-anchor",r)){ea=-k.C_DEG_TO_RAD*x;x=Math.sin(ea);var ba=Math.cos(ea);ea=Y*(Z*ba-da*x);Y*=Z*x+da*ba}else ea=Y*Z,Y*=da;this._offsetVector[0]=ea;this._offsetVector[1]=Y;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,
this._offsetVector);Z=this._viewProjMat}O?b.copy(this._extrudeMat,u):b.copy(this._extrudeMat,w);this._scaleVec[0]=1/24;this._scaleVec[1]=1/24;this._scaleVec[2]=1;b.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);u=A.hasDataDrivenText;if(w=this._getSDFVAO(l,z,u)){l.bindVAO(w);var Q=this._shaderVariations.getProgram([u,t],void 0,void 0,u?this._attributeLocationsDD:this._attributeLocations);l.bindProgram(Q);Q.setUniformMatrix4fv("u_transformMatrix",Z);Q.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);Q.setUniform2fv("u_normalized_origin",z.tileTransform.displayCoord);Q.setUniform1f("u_depth",A.z+n);Q.setUniform2fv("u_mosaicSize",this._glyphTextureSize);Q.setUniform1f("u_mapRotation",G);Q.setUniform1f("u_keepUpright",I?1:0);Q.setUniform1f("u_level",10*r);Q.setUniform1f("u_fadeSpeed",10*v.fadeSpeed);Q.setUniform1f("u_minfadeLevel",10*v.minfadeLevel);Q.setUniform1f("u_maxfadeLevel",10*v.maxfadeLevel);Q.setUniform1f("u_fadeChange",10*(r+v.fadeChange));Q.setUniform1i("u_texture",
0);Q.setUniform1f("u_size",R);Q.setUniform1f("u_antialiasingWidth",D);t&&(v=c.int32To4Bytes(m.layerID),Q.setUniform4f("u_id",v[0],v[1],v[2],v[3]));m.glyphPerPageElementsMap.forEach(function(fa,S){B.bind(l,9729,S,0);var X=A.getPaintValue("text-halo-color",r),la=A.getPaintValue("text-halo-width",r);if(0<X[3]&&0<la){var na=X[3]*W*y;C._haloColor[0]=na*X[0];C._haloColor[1]=na*X[1];C._haloColor[2]=na*X[2];C._haloColor[3]=na;X=3*A.getPaintValue("text-halo-blur",r);la*=3;Q.setUniform4fv("u_color",C._haloColor);
Q.setUniform1f("u_halo",1);Q.setUniform1f("u_edgeDistance",la);Q.setUniform1f("u_edgeBlur",X);l.drawElements(4,fa[1],5125,12*fa[0])}0<C._sdfColor[3]&&(Q.setUniform4fv("u_color",C._sdfColor),Q.setUniform1f("u_halo",0),Q.setUniform1f("u_edgeDistance",0),Q.setUniform1f("u_edgeBlur",0),l.drawElements(4,fa[1],5125,12*fa[0]))});l.bindVAO()}}};p.prototype._initialize=function(l){if(this._initialized)return!0;l=new f("text",["textVS","textFS"],[],d,l);l.addDefine("DD","DD",[!0,!1],"DD");l.addDefine("ID",
"ID",[!0,!0],"ID");this._shaderVariations=l;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,
divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};p.prototype._getSDFVAO=function(l,m,r){if(r){if(m.textDDVertexArrayObject)return m.textDDVertexArrayObject;
r=m.textDDVertexBuffer;var t=m.textIndexBuffer;if(!r||!t)return null;m.textDDVertexArrayObject=new h(l,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:r},t);return m.textDDVertexArrayObject}if(m.textVertexArrayObject)return m.textVertexArrayObject;r=m.textVertexBuffer;t=m.textIndexBuffer;if(!r||!t)return null;m.textVertexArrayObject=new h(l,this._attributeLocations,this._vertexAttributes,{geometry:r},t);return m.textVertexArrayObject};return p}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports ../GeometryUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/Program ../../webgl/Texture ../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k,c){return function(){function d(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}d.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),
this._tileInfoVertexArrayObject=null)};d.prototype.render=function(f,h){this._initialized||this._initialize(f);f.bindVAO(this._outlineVertexArrayObject);f.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",h.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",
this._color);f.setLineWidth(2);f.drawArrays(3,0,4);f.bindVAO();var n=this._getTexture(f,h);n&&(f.bindVAO(this._tileInfoVertexArrayObject),f.bindProgram(this._tileInfoProgram),f.bindTexture(n,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",h.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",
8,8),this._tileInfoProgram.setUniform2f("u_dimensions",n.descriptor.width,n.descriptor.height),f.drawArrays(5,0,4),f.bindVAO())};d.prototype._initialize=function(f){if(this._initialized)return!0;var h={a_pos:0},n=new g(f,b.backgroundVS,b.backgroundFS,h),p=new g(f,b.tileInfoVS,b.tileInfoFS,h),l={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},m=new Int8Array([0,0,1,0,1,1,0,1]);m=e.createVertex(f,35044,m);m=new c(f,h,l,{geometry:m});var r=new Int8Array([0,0,1,
0,0,1,1,1]);r=e.createVertex(f,35044,r);f=new c(f,h,l,{geometry:r});this._outlineProgram=n;this._tileInfoProgram=p;this._outlineVertexArrayObject=m;this._tileInfoVertexArrayObject=f;return this._initialized=!0};d.prototype._getTexture=function(f,h){if(h.texture)return h.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));
var n=h.key.id,p=this._canvas.getContext("2d");p.font="24px sans-serif";p.textAlign="left";p.textBaseline="middle";var l=p.measureText(n);l=Math.pow(2,Math.ceil(a.log2(l.width+2)));l>this._maxWidth&&(this._maxWidth=l);p.clearRect(0,0,this._maxWidth,32);p.fillStyle=h.key.level>h.refKey.level?"red":"blue";p.fillText(n,0,16);h.texture=new k(f,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return h.texture};return d}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/ObjectPool ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec2 ../../geometry/support/spatialReferenceUtils ../2d/engine/DisplayObject ../2d/tiling/enums ../2d/tiling/TileKey ./RenderBucket ../webgl/BufferObject".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n){var p="fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer".split(" ");return function(l){function m(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];t=l.call(this)||this;t._renderBuckets=[];t._vectorTileData=
null;t._symbolUpdateData=null;t.status=d.TileStatus.INITIALIZED;t.coords=[0,0];t.bounds=[0,0,0,0];t.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};t.stencilData={mask:0,reference:0};t.status=d.TileStatus.INITIALIZED;t.tileTransform.transform=e.create();t.tileTransform.displayCoord=g.create();0<r.length&&(x=t.acquire).call.apply(x,[t].concat(r));return t;var x}a(m,l);m.prototype.reset=function(){f.pool.release(this.key);this.refKey=this.key=null;this.coords[0]=0;this.coords[1]=
0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.height=this.width=this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this.client=this.styleLayers=this._vectorTileData=null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this._symbolUpdateData=null;this.status=d.TileStatus.INITIALIZED};m.prototype.acquire=function(r,t,x,v,z){this.key=r;this.refKey=t;t=x.lodAt(r.level).resolution;
var A=x.size[0]*t,B=x.origin,u=r.col*A,w=r.row*A,D=x.spatialReference,y=0;D&&(D._isWrappable?D._isWrappable():D.isWrappable)&&(D=k.getInfo(D),y=D.valid[1]-D.valid[0]);u=B.x+u+r.world*y;B=B.y-w;this.coords[0]=u;this.coords[1]=B;this.bounds[0]=u;this.bounds[1]=B;this.bounds[2]=u+A;this.bounds[3]=B-A;this.widthInPixels=x.size[1];this.coordRange=4096;this.resolution=t;this.rotation=z;this.styleLayers=v;this.id=r.id};m.prototype.setData=function(r,t){this._vectorTileData=r;this.client=t;r&&r.bufferDataInfo||
(this.status=d.TileStatus.NO_DATA)};m.prototype.updateSymbolData=function(r){r&&(this._symbolUpdateData=r,this.requestRender())};m.prototype.dispose=function(){this.fillVertexArrayObject&&(this.fillVertexArrayObject.dispose(),this.fillVertexArrayObject=null);this.fillDDVertexArrayObject&&(this.fillDDVertexArrayObject.dispose(),this.fillDDVertexArrayObject=null);this.outlineVertexArrayObject&&(this.outlineVertexArrayObject.dispose(),this.outlineVertexArrayObject=null);this.outlineDDVertexArrayObject&&
(this.outlineDDVertexArrayObject.dispose(),this.outlineDDVertexArrayObject=null);this.lineVertexArrayObject&&(this.lineVertexArrayObject.dispose(),this.lineVertexArrayObject=null);this.lineDDVertexArrayObject&&(this.lineDDVertexArrayObject.dispose(),this.lineDDVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&
(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this.circleVertexArrayObject&&(this.circleVertexArrayObject.dispose(),this.circleVertexArrayObject=null);this.fillVertexBuffer&&(this.fillVertexBuffer.dispose(),this.fillVertexBuffer=null);this.fillDDVertexBuffer&&(this.fillDDVertexBuffer.dispose(),this.fillDDVertexBuffer=null);this.fillIndexBuffer&&(this.fillIndexBuffer.dispose(),
this.fillIndexBuffer=null);this.outlineVertexBuffer&&(this.outlineVertexBuffer.dispose(),this.outlineVertexBuffer=null);this.outlineDDVertexBuffer&&(this.outlineDDVertexBuffer.dispose(),this.outlineDDVertexBuffer=null);this.outlineIndexBuffer&&(this.outlineIndexBuffer.dispose(),this.outlineIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineDDVertexBuffer&&(this.lineDDVertexBuffer.dispose(),this.lineDDVertexBuffer=null);this.lineIndexBuffer&&
(this.lineIndexBuffer.dispose(),this.lineIndexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textIndexBuffer&&
(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this.circleVertexBuffer&&(this.circleVertexBuffer.dispose(),this.circleVertexBuffer=null);this.circleIndexBuffer&&(this.circleIndexBuffer.dispose(),this.circleIndexBuffer=null);this.texture&&(this.texture.dispose(),this.texture=null);this._renderBuckets.length=0;this.status=d.TileStatus.INITIALIZED};m.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(r,
t){return r+t.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0};m.prototype.getGpuMemoryUsage=function(){var r=this,t=p.reduce(function(x,v){return r[v]?x+r[v].size:x},0);this.texture&&(t+=this.texture.descriptor.width*this.texture.descriptor.height*4);return t};m.prototype.attach=function(r){if(this.status!==d.TileStatus.INITIALIZED)return!0;if(0===this._renderBuckets.length)for(var t=new Uint32Array(this._vectorTileData.bucketDataInfo),
x=t.length,v=0;v<x;){var z=t[v],A=t[v+1];if(0===A)A=new h.BackgroundRenderBucket,A.layerID=z,this._renderBuckets.push(A),v+=2;else if(1===A)A=new h.FillRenderBucket,A.layerID=z,A.triangleElementStart=t[v+2],A.triangleElementCount=t[v+3],A.outlineElementStart=t[v+4],A.outlineElementCount=t[v+5],this._renderBuckets.push(A),v+=6;else if(2===A)A=new h.LineRenderBucket,A.layerID=z,A.triangleElementStart=t[v+2],A.triangleElementCount=t[v+3],this._renderBuckets.push(A),v+=4;else if(3===A){A=new h.SymbolRenderBucket;
A.layerID=z;A.isSDF=0!==t[v+2];var B=v+3;z=t[B];B++;if(0<z)for(var u=void 0,w=void 0,D=void 0,y=0;y<z;y++)u=t[B],w=t[B+1],D=t[B+2],A.markerPerPageElementsMap.set(u,[w,D]),B+=3;var C=t[B];B++;if(0<C)for(D=w=u=void 0,y=0;y<C;y++)u=t[B],w=t[B+1],D=t[B+2],A.glyphPerPageElementsMap.set(u,[w,D]),B+=3;this._renderBuckets.push(A);v+=5+3*z+3*C}else 4===A&&(A=new h.CircleRenderBucket,A.layerID=z,A.triangleElementStart=t[v+2],A.triangleElementCount=t[v+3],this._renderBuckets.push(A),v+=4)}r=r.context;t=new Uint32Array(this._vectorTileData.bufferDataInfo);
x=t.length;for(A=v=0;A<x;A+=2,v++)if(!(0>=t[A+1]||0===this._vectorTileData.bufferData[v].byteLength))switch(t[A]){case 1:this.fillVertexBuffer?this.fillVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.fillVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 2:this.fillDDVertexBuffer?this.fillDDVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.fillDDVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 3:this.fillIndexBuffer?
this.fillIndexBuffer.setData(this._vectorTileData.bufferData[v]):this.fillIndexBuffer=n.createIndex(r,35044,this._vectorTileData.bufferData[v]);break;case 4:this.outlineVertexBuffer?this.outlineVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.outlineVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 5:this.outlineDDVertexBuffer?this.outlineDDVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.outlineDDVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);
break;case 6:this.outlineIndexBuffer?this.outlineIndexBuffer.setData(this._vectorTileData.bufferData[v]):this.outlineIndexBuffer=n.createIndex(r,35044,this._vectorTileData.bufferData[v]);break;case 7:this.lineVertexBuffer?this.lineVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.lineVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 8:this.lineDDVertexBuffer?this.lineDDVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.lineDDVertexBuffer=n.createVertex(r,
35044,this._vectorTileData.bufferData[v]);break;case 9:this.lineIndexBuffer?this.lineIndexBuffer.setData(this._vectorTileData.bufferData[v]):this.lineIndexBuffer=n.createIndex(r,35044,this._vectorTileData.bufferData[v]);break;case 10:this.iconVertexBuffer?this.iconVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.iconVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 11:this.iconDDVertexBuffer?this.iconDDVertexBuffer.setData(this._vectorTileData.bufferData[v]):
this.iconDDVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 12:this.iconIndexBuffer?this.iconIndexBuffer.setData(this._vectorTileData.bufferData[v]):this.iconIndexBuffer=n.createIndex(r,35044,this._vectorTileData.bufferData[v]);break;case 13:this.textVertexBuffer?this.textVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.textVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 14:this.textDDVertexBuffer?this.textDDVertexBuffer.setData(this._vectorTileData.bufferData[v]):
this.textDDVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 15:this.textIndexBuffer?this.textIndexBuffer.setData(this._vectorTileData.bufferData[v]):this.textIndexBuffer=n.createIndex(r,35044,this._vectorTileData.bufferData[v]);break;case 16:this.circleVertexBuffer?this.circleVertexBuffer.setData(this._vectorTileData.bufferData[v]):this.circleVertexBuffer=n.createVertex(r,35044,this._vectorTileData.bufferData[v]);break;case 17:this.circleIndexBuffer?this.circleIndexBuffer.setData(this._vectorTileData.bufferData[v]):
this.circleIndexBuffer=n.createIndex(r,35044,this._vectorTileData.bufferData[v])}this._vectorTileData=null;this.status=d.TileStatus.READY;return!0};m.prototype.detach=function(r){this.client&&this.status!==d.TileStatus.INVALID&&this.status!==d.TileStatus.INITIALIZED&&this.client.invoke("destructTileData",this.id);this.dispose();l.prototype.detach.call(this,r)};m.prototype.doRender=function(r){if(this.visible&&this.status===d.TileStatus.READY){var t=r.context,x=r.renderer;if(t&&x){var v=r.drawphase;
this._symbolUpdateData&&this._updateSymbolData(r);t.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var z=this.styleLayers,A=void 0!==r.layerOpacity?r.layerOpacity:1;if(0!==A){var B=this._renderBuckets.length,u=0;if(0===v)for(u=B-1;0<=u;u--){var w=this._renderBuckets[u];3!==w.type&&4!==w.type&&w.hasData()&&x.renderBucket(t,w,r.displayLevel,r.requiredLevel,v,this,z.layers[w.layerID],A)}else for(u=0;u<B;u++)w=this._renderBuckets[u],w.hasData()&&x.renderBucket(t,w,r.displayLevel,
r.requiredLevel,v,this,z.layers[w.layerID],A)}}}};m.prototype._updateSymbolData=function(r){if(!this._symbolUpdateData.bucketDataInfo)return!0;var t=new Uint32Array(this._symbolUpdateData.bucketDataInfo),x=t.length;if(0===x)return this._symbolUpdateData=null,!0;if(this.status!==d.TileStatus.READY)return this.requestRender(),!1;r=r.context;for(var v=new Uint32Array(this._symbolUpdateData.bufferDataInfo),z=v.length,A=0,B=0;B<z;B+=2,A++)switch(v[B]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),
this.iconVertexBuffer=null);this.iconVertexBuffer=n.createVertex(r,35044,this._symbolUpdateData.bufferData[A]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=n.createVertex(r,35044,this._symbolUpdateData.bufferData[A]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=n.createIndex(r,35044,this._symbolUpdateData.bufferData[A]);break;case 13:this.textVertexBuffer&&
(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=n.createVertex(r,35044,this._symbolUpdateData.bufferData[A]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=n.createVertex(r,35044,this._symbolUpdateData.bufferData[A]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=n.createIndex(r,35044,this._symbolUpdateData.bufferData[A])}r=
this._renderBuckets.length;for(v=0;v<r;v++)this._renderBuckets[v]instanceof h.SymbolRenderBucket&&(z=this._renderBuckets[v],z.markerPerPageElementsMap.clear(),z.glyphPerPageElementsMap.clear());for(r=0;r<x;){z=t[r];A=-1;B=this._renderBuckets.length;for(v=0;v<B;v++)if(this._renderBuckets[v].layerID===z){A=v;break}v=this._renderBuckets[A];v||(v=new h.SymbolRenderBucket,v.layerID=z,v.isSDF=0!==t[r+2],this._renderBuckets.push(v));var u=r+3;z=t[u];u++;if(0<z)for(var w=B=A=void 0,D=0;D<z;D++)A=t[u],B=t[u+
1],w=t[u+2],v.markerPerPageElementsMap.set(A,[B,w]),u+=3;var y=t[u];u++;if(0<y)for(w=B=A=void 0,D=0;D<y;D++)A=t[u],B=t[u+1],w=t[u+2],v.glyphPerPageElementsMap.set(A,[B,w]),u+=3;r+=5+3*z+3*y}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&
(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this._symbolUpdateData=null;return!0};m.pool=new b(m);return m}(c)})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(F,q,a){return function(){function b(e,g,k,c){this.set(e,g,k,c)}b.from=function(e,g,k,c){return b.pool.acquire(e,g,k,c)};b.getId=function(e,g,k,c){return"object"===typeof e?e.level+"/"+e.row+"/"+e.col+"/"+e.world:e+"/"+g+"/"+k+"/"+
c};Object.defineProperty(b.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});b.prototype.equals=function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world};b.prototype.release=function(){this.world=this.col=this.row=this.level=0};b.prototype.set=function(e,g,k,c){null==e?this.world=this.col=this.row=this.level=0:"object"===
typeof e?(this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0):"string"===typeof e?(e=e.split("/"),g=e[1],k=e[2],c=e[3],this.level=parseFloat(e[0]),this.row=parseFloat(g),this.col=parseFloat(k),this.world=parseFloat(c)):(this.level=+e,this.row=+g,this.col=+k,this.world=+c||0);return this};b.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};b.prototype.getChildKeys=function(){var e=this.level+1,g=this.row<<1,k=this.col<<1,c=this.world;
return[b.pool.acquire(e,g,k,c),b.pool.acquire(e,g,k+1,c),b.pool.acquire(e,g+1,k,c),b.pool.acquire(e,g+1,k+1,c)]};b.prototype._compare=function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0};b.sort=function(e){return e.map(function(g){return b.from(g)}).sort(function(g,k){return g._compare(k)}).map(function(g){return g.id})};b.pool=new a(b,!0,null,25,50);return b}()})},"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(F,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});F=function(){return function(e){this.type=e}}();q.RenderBucket=F;b=function(e){function g(){var k=e.call(this,2)||this;k.triangleElementStart=0;k.triangleElementCount=0;return k}a(g,e);g.prototype.hasData=function(){return 0<this.triangleElementCount};return g}(F);q.LineRenderBucket=b;b=function(e){function g(){var k=e.call(this,1)||this;k.triangleElementStart=
0;k.triangleElementCount=0;k.outlineElementStart=0;k.outlineElementCount=0;return k}a(g,e);g.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return g}(F);q.FillRenderBucket=b;b=function(e){function g(){var k=e.call(this,3)||this;k.markerPerPageElementsMap=new Map;k.glyphPerPageElementsMap=new Map;k.isSDF=!1;return k}a(g,e);g.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};return g}(F);q.SymbolRenderBucket=
b;b=function(e){function g(){var k=e.call(this,4)||this;k.triangleElementStart=0;k.triangleElementCount=0;return k}a(g,e);g.prototype.hasData=function(){return 0<this.triangleElementCount};return g}(F);q.CircleRenderBucket=b;F=function(e){function g(){return e.call(this,0)||this}a(g,e);g.prototype.hasData=function(){return!0};return g}(F);q.BackgroundRenderBucket=F})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports dojo/Deferred dojo/has dojo/promise/all ../../request ../../core/LRUCache ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../2d/tiling/TileKey ./GeometryUtils ./GlyphMosaic ./GlyphSource ./SpriteMosaic ./SpriteSource ./TileIndex ./VectorTileDisplayObject module".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v){var z=new k(10),A=new Map;return function(){function B(u,w,D,y,C){void 0===y&&(y=!1);this.devicePixelRatio=D;this.allowUpdates=y;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._updateQueue=new Map;this._ongoingRequests=new Map;this._vectorTileLayer=u;this._styleRepository=u.styleRepository;this._requestUpdate=w}B.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=this._styleRepository=
null;this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)};Object.defineProperty(B.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0});Object.defineProperty(B.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(B.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},
enumerable:!0,configurable:!0});Object.defineProperty(B.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0});B.prototype.start=function(){var u=this;this.stop();var w=this._styleRepository,D=new r(w.sprite,this.devicePixelRatio);D.devicePixelRatio=this.devicePixelRatio;var y=D.load().then(function(){u._spriteMosaic=new m(1024,1024,250);u._spriteMosaic.setSpriteSource(D);b("stable-symbol-rendering")&&u._spriteMosaic.preloadSpriteItems()}),
C=new l(w.glyphs);this._glyphMosaic=new p(1024,1024,C);var G=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),I=f.open(d.getAbsMid("./WorkerTileHandler",F,v),{client:this}).then(function(R){u._connection=R}),O=new a(function(R){y.isFulfilled()||y.cancel();G.isFulfilled()||G.cancel();I.isFulfilled()||I.cancel()});e([y,G,I]).then(function(R){e(u._connection.broadcast("setLayers",w.styleJSON)).then(function(){O.resolve()})});return this._broadcastPromise=O.promise};B.prototype.stop=function(){this._broadcastPromise&&
!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._updateQueue.forEach(function(u){return u.cancel()});this._ongoingRequests.forEach(function(u){return u.cancel()});this._connection&&(this._connection.close(),this._connection=null)};B.prototype.updateTile=function(u,w){var D=this;if(!this.allowUpdates)return c.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return c.reject(Error("no connection"));var y=Math.round(n.degToByte(w.state.rotation));if(u.rotation===
y)return c.resolve(null);var C=u.key;if(this._updateQueue.has(C.id)){var G=this._updateQueue.get(C.id);G.cancel()}u.rotation=y;G=this._connection.invoke("update",{key:u.id,rotation:y},null,{client:u.client}).then(function(I){u.updateSymbolData(I);return I}).always(function(){D._updateQueue["delete"](C.id)});this._updateQueue.set(u.id,G);return G};B.prototype.getVectorTileWithLRC=function(u,w,D,y){var C=this;void 0===y&&(y=0);var G=new h(u,w,D,0);return this.getRefKey(G).then(function(I){var O=new x(G,
I,C._vectorTileLayer.tileInfo,C._styleRepository,0);if(I)return C.getTileData(O.key,0).then(function(R){O.setData(R.tileData,R.client);return O});O.setData(null,null);return O})};B.prototype.getTileData=function(u,w){var D=this;return this._broadcastPromise.isFulfilled()&&this._connection?this.getRefKey(u).then(function(y){if(!y)return c.resolve(null);var C=Math.round(n.degToByte(w));return D._getTileData(D._connection,u,y,C).then(function(G){return G&&G.tileData?{tileData:G.tileData,client:G.client}:
c.reject("No data")})}):c.reject(Error("no connection"))};B.prototype.getRefKey=function(u){return this._tileIndex?this._tileIndex.dataKey(u):c.resolve(u)};B.prototype.fetchTileData=function(u){u=h.pool.acquire(u);var w=this._vectorTileLayer.getTileUrl(u.level,u.row,u.col);h.pool.release(u);return g(w,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(D){return{result:D.data,transferList:[D.data]}})};B.prototype.getSprites=function(u){return this._spriteMosaic.getSpriteItems(u)};
B.prototype.getGlyphs=function(u){return this._glyphMosaic.getGlyphItems(u.tileID,u.font,u.codePoints)};B.prototype.getStyleRepository=function(){return this._styleRepository};B.prototype.getTileIndex=function(){return this._tileIndex};B.prototype._getTileData=function(u,w,D,y){var C=this,G={client:null};if(u=this._ongoingRequests.get(w.id))return u;u=this._connection.invoke("getTile",{key:w.id,refKey:D.id,rotation:y,cacheTile:this.allowUpdates},null,G).then(function(I){C._ongoingRequests["delete"](w.id);
return{tileData:I,client:G.client}})["catch"](function(I){C._ongoingRequests["delete"](w.id);C._connection.invoke("destructTileData",w.id,null,G);return c.reject(I)});this._ongoingRequests.set(w.id,u);return u};B.prototype._fetchTileMap=function(u){var w=this;if(this._vectorTileLayer.capabilities.operations.supportsTileMap&&this._vectorTileLayer.tilemapCache)return this._tileIndex=new t(this._vectorTileLayer.tilemapCache),c.resolve();if(!u)return c.resolve();if(z.has(u))return this._tileIndex=z.use(u),
c.resolve();if(A.has(u))return A.get(u).then(function(y){w._tileIndex=new t(y.data)});var D=g(u,{callbackParamName:"callback",responseType:"json"});D.then(function(y){w._tileIndex=new t(y.data);A["delete"](u);z.insert(u,w._tileIndex)});A.set(u,D);return D};return B}()})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(F,q){return function(){function a(b){this._cache={};this._lruQueue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=
b}a.prototype.has=function(b){return void 0!==this._cache[b]};a.prototype.insert=function(b,e){null!==this.use(b)?this._cache[b]=e:(this._collect(),this._cache[b]=e,this._lruQueue.unshift(b))};a.prototype.use=function(b){var e=this._cache[b];if(!e)return null;this._lruQueue.splice(this._lruQueue.indexOf(b),1);this._lruQueue.unshift(b);return e};a.prototype.print=function(){for(var b=0,e=this._lruQueue;b<e.length;b++);};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var b=
this._lruQueue.pop(),e=this._cache[b];e&&e.release&&e.release();delete this._cache[b]}};return a}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(F,q,a){function b(e,g){if(Array.isArray(g)){var k=new a;e(g,function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];k.resolve(c)});return k.promise}return b(e,[g]).then(function(c){return c[0]})}Object.defineProperty(q,"__esModule",{value:!0});q.when=b;q.getAbsMid=function(e,
g,k){return g.toAbsMid?g.toAbsMid(e):k.id.replace(/\/[^\/]*$/gi,"/")+e}})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});for(var b in a)q.hasOwnProperty(b)||(q[b]=a[b])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(F,q,a,b,e,g,
k,c,d){function f(){if(r)return r;for(var t=h+n,x=[],v=function(A){var B=d.create(A).then(function(u){return m[A]=u});x.push(B)},z=0;z<t;z++)v(z);return r=b(x).then(function(){})}Object.defineProperty(q,"__esModule",{value:!0});q.Connection=k;q.RemoteClient=c;(k=navigator.hardwareConcurrency)||(k=a("safari")&&a("mac")||a("trident")?8:2);var h=a("esri-workers-debug")?1:Math.max(1,Math.ceil(k/2)),n=a("esri-workers-debug")?1:Math.max(1,Math.floor(k/2)),p=e.getLogger("esri.core.workers"),l=0,m=[];q.initialize=
function(){f()};q.open=function(t,x,v){void 0===x&&(x={});if(Array.isArray(t))return new q.Connection(t.map(function(B){return new q.RemoteClient(B,x.client)}));if("string"!==typeof t){p.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var z=t;t=x;x={client:z,strategy:v?"dedicated":"distributed"}}var A=x.strategy||"distributed";return"local"===A?g.create(function(B){F([t],function(u){B(q.RemoteClient.connect(u))})}).then(function(B){return new q.Connection([new q.RemoteClient(B,
x.client)])}):f().then(function(){if("dedicated"===A){var B=h+l++;l%=n;return m[B].open(t).then(function(u){return new q.Connection([new q.RemoteClient(u,x.client)])})}return g.all(m.map(function(u){return u.open(t)})).then(function(u){return new q.Connection(u.map(function(w){return new q.RemoteClient(w,x.client)}))})})};q.terminate=function(){for(var t=0;t<m.length;t++)m[t]&&m[t].terminate();m.length=0};var r})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports",
"../promiseUtils"],function(F,q,a){return function(){function b(e){this._clientIdx=0;this._clients=e}b.prototype.broadcast=function(e,g,k){for(var c=[],d=0,f=this._clients;d<f.length;d++)c.push(f[d].invoke(e,g,k));return c};b.prototype.close=function(){for(var e=0,g=this._clients;e<g.length;e++)g[e].close();this._clients=[]};b.prototype.invoke=function(e,g,k,c){var d=c&&c.client;if(!this._clients||!this._clients.length)return a.reject(Error("Connection closed"));null!=d&&-1!==this._clients.indexOf(d)||
this._clients.some(function(f){return f.isBusy()?!1:(d=f,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,d=this._clients[this._clientIdx]);e=d.invoke(e,g,k);c&&(c.client=d);return e};b.prototype.openPorts=function(){return a.all(this._clients.map(function(e){return e.openPort()}))};return b}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(F,q,a,b,e,g){function k(l,m){l["delete"](m)}
var c=g.MessageType.CLOSE,d=g.MessageType.CANCEL,f=g.MessageType.INVOKE,h=g.MessageType.RESPONSE,n=g.MessageType.OPEN_PORT,p=function(){function l(m){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=m;this._timer=null;this._process=this._process.bind(this)}l.prototype.push=function(m){m.type===g.MessageType.CANCEL?this._cancelledJobIds.add(m.jobId):(this._invokeMessages.push(m),null===this._timer&&(this._timer=setTimeout(this._process,0)))};l.prototype.clear=function(){this._invokeMessages.length=
0;this._cancelledJobIds.clear();this._timer=null};l.prototype._process=function(){this._timer=null;for(var m=0,r=this._invokeMessages;m<r.length;m++){var t=r[m];this._cancelledJobIds.has(t.jobId)||this._invoke(t)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return l}();return function(){function l(m,r,t){this._outJobs=new Map;this._inJobs=new Map;this._queue=new p(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=r;this._port=m;this._port.addEventListener("message",
this._onMessage);this._port.start();this._channel=t}l.connect=function(m){var r=new MessageChannel;m="function"===typeof m?new m:"default"in m&&"function"===typeof m["default"]?new m["default"]:m;m.remoteClient=new l(r.port1,m,r);return r.port2};l.prototype.close=function(){this._post({type:c});this._close()};l.prototype.isBusy=function(){return 0<this._outJobs.size};l.prototype.invoke=function(m,r,t){var x=this;if(!this._port)return e.reject(new b("remote-client:port-closed","Can't invoke(), port is closed"));
var v=g.newJobId(),z=new a(function(){k(x._outJobs,v);x._post({type:d,jobId:v})});this._outJobs.set(v,z);this._post({type:f,jobId:v,methodName:m},r,t);return z.promise};l.prototype.openPort=function(){var m=this,r=g.newJobId(),t=new a(function(){k(m._outJobs,r);m._post({type:d,jobId:r})});this._outJobs.set(r,t);this._post({type:n,jobId:r});return t.promise};l.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();
this._outJobs.forEach(function(m){m.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};l.prototype._onMessage=function(m){if(m=g.receiveMessage(m))switch(m.type){case h:this._onResponse(m);break;case f:this._queue.push(m);break;case d:this._onCancel(m);break;case c:this._close();break;case n:this._onOpenPort(m)}};l.prototype._onCancel=function(m){var r=this._inJobs,t=m.jobId,x=r.get(t);this._queue.push(m);x&&(k(r,t),x.cancel())};l.prototype._onInvoke=
function(m){var r=this,t=m.methodName,x=m.jobId;m=m.data;var v=this._inJobs,z=this._client,A=z[t];try{if(!A&&t&&-1!==t.indexOf("."))for(var B=t.split("."),u=0;u<B.length-1;u++)z=z[B[u]],A=z[B[u+1]];if("function"!==typeof A)throw new TypeError(t+" is not a function");var w=A.call(z,m,this)}catch(D){this._post({type:h,jobId:x,error:g.toInvokeError(D)});return}e.isThenable(w)?(v.set(x,w),w.then(function(D){v.has(x)&&(k(v,x),r._post({type:h,jobId:x},D))})["catch"](function(D){v.has(x)&&(k(v,x),D&&"cancel"===
D.dojoType||r._post({type:h,jobId:x,error:g.toInvokeError(D||{message:"Error encountered at method "+t})}))})):this._post({type:h,jobId:x},w)};l.prototype._onOpenPort=function(m){var r=new MessageChannel;new l(r.port1,this._client);this._post({type:h,jobId:m.jobId},r.port2,[r.port2])};l.prototype._onResponse=function(m){var r=m.jobId,t=m.error;m=m.data;var x=this._outJobs;if(x.has(r)){var v=x.get(r);k(x,r);t?v.reject(b.fromJSON(JSON.parse(t))):v.resolve(m)}};l.prototype._post=function(m,r,t){return g.postMessage(this._port,
m,r,t)};return l}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(F,q,a){function b(g){return g&&"object"===typeof g&&("result"in g||"transferList"in g)}Object.defineProperty(q,"__esModule",{value:!0});(function(g){g[g.HANDSHAKE=0]="HANDSHAKE";g[g.CONFIGURE=1]="CONFIGURE";g[g.CONFIGURED=2]="CONFIGURED";g[g.OPEN=3]="OPEN";g[g.OPENED=4]="OPENED";g[g.RESPONSE=5]="RESPONSE";g[g.INVOKE=6]="INVOKE";g[g.CANCEL=7]="CANCEL";g[g.CLOSE=8]="CLOSE";
g[g.OPEN_PORT=9]="OPEN_PORT"})(q.MessageType||(q.MessageType={}));var e=0;q.newJobId=function(){return e++};q.isTranferableResult=b;q.toInvokeError=function(g){return g?g.toJSON?JSON.stringify(g):JSON.stringify({name:g.name,message:g.message,details:g.details,stack:g.stack}):null};q.postMessage=function(g,k,c,d){2===arguments.length||void 0===c&&void 0===d?g.postMessage(k):(a("esri-workers-supports-transfer-arraybuffer")||(d?(d=d.filter(function(f){return!(f instanceof ArrayBuffer)}),d.length||(d=
null)):b(c)&&c.transferList&&(c.transferList=c.transferList.filter(function(f){return!(f instanceof ArrayBuffer)}),c.transferList.length||(c.transferList=null))),d?(k.data=c,g.postMessage(k,d)):b(c)?(k.data=c.result,c.transferList?g.postMessage(k,c.transferList):g.postMessage(k)):(k.data=c,g.postMessage(k)))};q.receiveMessage=function(g){return g?(g=g.data)?"string"===typeof g?JSON.parse(g):g:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(F,q,a,b,e,g,k,c,d){var f=g.getLogger("esri.core.workers"),h=c.MessageType.CANCEL,n=c.MessageType.INVOKE,p=c.MessageType.OPEN,l=c.MessageType.OPENED,m=c.MessageType.RESPONSE;return function(){function r(t,x){this._outJobs=new Map;this._inJobs=new Map;this.worker=t;this.id=x;t.addEventListener("message",this._onMessage.bind(this));t.addEventListener("error",function(v){v.preventDefault();f.error(v)})}r.create=function(t){return d.createWorker().then(function(x){return new r(x,t)})};r.prototype.terminate=
function(){this.worker.terminate()};r.prototype.open=function(t){var x=this,v=c.newJobId(),z=new a(function(A){x._outJobs["delete"](v);x._post({type:h,jobId:v})});this._outJobs.set(v,z);this._post({type:p,jobId:v,modulePath:t});return z.promise};r.prototype._onMessage=function(t){if(t=c.receiveMessage(t))switch(t.type){case l:case m:this._onResponse(t);break;case h:this._onCancel(t);break;case n:this._onInvoke(t)}};r.prototype._onCancel=function(t){(t=this._inJobs.get(t.jobId))&&t.cancel()};r.prototype._onInvoke=
function(t){var x=this,v=t.methodName,z=t.jobId;t=t.data;var A=this._inJobs,B=b.workerMessages[v];try{if("function"!==typeof B)throw new TypeError(v+" is not a function");var u=B.call(null,t)}catch(w){this._post({type:m,jobId:z,error:c.toInvokeError(w)});return}k.isThenable(u)?(A.set(z,u),u.then(function(w){A["delete"](z);x._post({type:m,jobId:z},w)})["catch"](function(w){A["delete"](z);w||(w={message:"Error encountered at method"+v});w.dojoType&&"cancel"===w.dojoType||x._post({type:m,jobId:z,error:c.toInvokeError(w)})})):
this._post({type:m,jobId:z},u)};r.prototype._onResponse=function(t){var x=t.jobId,v=t.error;t=t.data;var z=this._outJobs.get(x);z&&(this._outJobs["delete"](x),v?z.reject(e.fromJSON(JSON.parse(v))):z.resolve(t))};r.prototype._post=function(t,x,v){return c.postMessage(this.worker,t,x,v)};return r}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(F,q,a,b){return function(){function e(){}Object.defineProperty(e,"id",{get:function(){return a.id?
b:null},enumerable:!0,configurable:!0});e.workerMessages={};return e}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.findCredential=function(b){return a.findCredential(b)}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(F,q,a,b){F=new F;q.id=b.safeMixin(F,a);return q.id})},
"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r){q=q([m],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(t){e.mixin(this,
t);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(t,x,v){this._nls||(this._nls=r.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var z=this._loginDialog,A=v&&v.error,B=v&&v.token,u=new b(function(){z.onCancel()});if(z.open)return t=Error("BUSY"),t.name="identity-manager:busy",t.code="IdentityManager.1",t.log=!!a.isDebug,u.errback(t),u;p.hide(z.errMsg_);A&&403==A.code&&B&&(k.set(z.errMsg_,"innerHTML",this._nls.forbidden),
p.show(z.errMsg_));z.dfd_=u;z.serverInfo_=x;z.resUrl_=t;z.admin_=v&&v.isAdmin;k.set(z.resLink_,{title:t,innerHTML:"("+(this.getResourceName(t)||this._nls.lblItem)+")"});k.set(z.serverLink_,{title:x.server,innerHTML:(-1!==x.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":x.server)+" "});z.txtPwd_.set("value","");z.show();return u},_createLoginDialog:function(){var t=this._nls,x=n.substitute(t,this._dialogContent);x=n.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},x);var v=new f({title:t.title,content:x,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(z){z.charOrCode===c.ENTER&&this.execute_()},execute_:function(){var z=this.txtUser_.get("value"),A=this.txtPwd_.get("value"),B=this.dfd_,u=this;if(this.form_.validate()&&z&&A){this.btnSubmit_.set("label",t.lblSigning);var w=h.id.findCredential(u.resUrl_,z),D=function(y){u.btnSubmit_.set("label",
t.lblOk);u.btnSubmit_.set("disabled",!1);p.hide(u.errMsg_);u.hide();f._DialogLevelManager.hide(u);var C=u.serverInfo_;u.dfd_=u.serverInfo_=u.generateDfd_=u.resUrl_=null;var G=w;if(y){var I=y.token;var O=n.isDefined(y.expires)?Number(y.expires):null;var R=!!y.ssl;G?(G.userId=z,G.token=I,G.expires=O,G.validity=y.validity,G.ssl=R,G.creationTime=(new Date).getTime()):G=new l({userId:z,server:C.server,token:I,expires:O,ssl:R,isAdmin:u.admin_,validity:y.validity})}B.callback(G)};w&&!w._enqueued?D():(u.btnSubmit_.set("disabled",
!0),u.generateDfd_=h.id.generateToken(this.serverInfo_,{username:z,password:A},{isAdmin:this.admin_}).addCallback(D).addErrback(function(y){u.btnSubmit_.set("disabled",!1);u.generateDfd_=null;u.btnSubmit_.set("label",t.lblOk);k.set(u.errMsg_,"innerHTML",y&&y.code?t.invalidUser:t.noAuthService);p.show(u.errMsg_)}))}},cancel_:function(){v.generateDfd_&&v.generateDfd_.cancel();var z=v.dfd_,A=v.resUrl_,B=v.serverInfo_;v.btnSubmit_.set("disabled",!1);v.dfd_=v.serverInfo_=v.generateDfd_=v.resUrl_=null;
p.hide(v.errMsg_);f._DialogLevelManager.hide(v);v.esriIdMgr_.onDialogCancel({resourceUrl:A,serverInfo:B});A=Error("ABORTED");A.name="identity-manager:user-aborted";A.code="IdentityManager.2";A.log=!!a.isDebug;z.errback(A)}});x=v.domNode;v.form_=d.byNode(F.query(".esriIdForm",x)[0]);v.txtUser_=d.byNode(F.query(".esriIdUser",x)[0]);v.txtPwd_=d.byNode(F.query(".esriIdPwd",x)[0]);v.btnSubmit_=d.byNode(F.query(".esriIdSubmit",x)[0]);v.btnCancel_=d.byNode(F.query(".esriIdCancel",x)[0]);v.resLink_=F.query(".resLink",
x)[0];v.serverLink_=F.query(".serverLink",x)[0];v.errMsg_=F.query(".esriErrorMsg",x)[0];v.connect(v.txtUser_,"onKeyPress",v.keypressed_);v.connect(v.txtPwd_,"onKeyPress",v.keypressed_);v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v}});return h.IdentityManagerDialog=h.IdentityManager=q})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v,z,A,B,u,w,D,y,C,G,I,O,R){function Z(){}var W=new e;W.resolve(!0);B=b("dijit._DialogBase"+(r("dojo-bidi")?"_NoBidi":""),[w,y,C,D],{templateString:R,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:B.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(ba){this._set("draggable",ba)},maxRatio:.9,
closable:!0,_setClosableAttr:function(ba){this.closeButtonNode.style.display=ba?"":"none";this._set("closable",ba)},postMixInProperties:function(){var ba=h.getLocalization("dijit","common");p.mixin(this,ba);this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",p.hitch(this,"hide"),!0);a.after(this,"onCancel",p.hitch(this,"hide"),!0);l(this.closeButtonNode,
t.press,function(ba){ba.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&ea.isTop(this)&&(this._getFocusItems(),A.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();A.focus(this._firstFocusItem)},_endDrag:function(){var ba=c.position(this.domNode),Q=x.getBox(this.ownerDocument);ba.y=Math.min(Math.max(ba.y,0),Q.h-ba.h);ba.x=Math.min(Math.max(ba.x,0),Q.w-ba.w);this._relativePosition=ba;this._position()},
_setup:function(){var ba=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==r("ie")?z:v)(ba,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",p.hitch(this,"_endDrag"),!0)):k.add(ba,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":q.map(this["class"].split(/\s/),function(Q){return Q+"_underlay"}).join(" "),_onKeyDown:p.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!k.contains(this.ownerDocumentBody,
"dojoMove")){var ba=this.domNode,Q=x.getBox(this.ownerDocument),fa=this._relativePosition,S=c.position(ba);d.set(ba,{left:Math.floor(Q.l+(fa?Math.min(fa.x,Q.w-S.w):(Q.w-S.w)/2))+"px",top:Math.floor(Q.t+(fa?Math.min(fa.y,Q.h-S.h):(Q.h-S.h)/2))+"px"})}},_onKey:function(ba){if(ba.keyCode==n.TAB){this._getFocusItems();var Q=ba.target;this._firstFocusItem==this._lastFocusItem?(ba.stopPropagation(),ba.preventDefault()):Q==this._firstFocusItem&&ba.shiftKey?(A.focus(this._lastFocusItem),ba.stopPropagation(),
ba.preventDefault()):Q!=this._lastFocusItem||ba.shiftKey||(A.focus(this._firstFocusItem),ba.stopPropagation(),ba.preventDefault())}else this.closable&&ba.keyCode==n.ESCAPE&&(this.onCancel(),ba.stopPropagation(),ba.preventDefault())},show:function(){if(this.open)return W.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),ea.hide(this));var ba=x.get(this.ownerDocument);this._modalconnects.push(l(ba,
"scroll",p.hitch(this,"resize",null)));this._modalconnects.push(l(this.domNode,"keydown",p.hitch(this,"_onKey")));d.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new e(p.hitch(this,function(){Q.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,Z);ba=this._fadeInDeferred.promise;var Q=f.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:p.hitch(this,function(){ea.show(this,this.underlayAttrs)}),
onEnd:p.hitch(this,function(){this.autofocus&&ea.isTop(this)&&(this._getFocusItems(),A.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return ba},hide:function(){if(!this._alreadyInitialized||!this.open)return W.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new e(p.hitch(this,function(){Q.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,Z);this._fadeOutDeferred.then(p.hitch(this,"onHide"));
var ba=this._fadeOutDeferred.promise;var Q=f.fadeOut({node:this.domNode,duration:this.duration,onEnd:p.hitch(this,function(){this.domNode.style.display="none";ea.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var fa;fa=this._modalconnects.pop();)fa.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return ba},resize:function(ba){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!ba){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),q.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(X){X&&d.set(X,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var Q=x.getBox(this.ownerDocument);Q.w*=this.maxRatio;Q.h*=this.maxRatio;var fa=c.position(this.domNode);this._shrunk=
!1;fa.w>=Q.w&&(ba={w:Q.w},c.setMarginBox(this.domNode,ba),fa=c.position(this.domNode),this._shrunk=!0);fa.h>=Q.h&&(ba||(ba={w:fa.w}),ba.h=Q.h,this._shrunk=!0);ba&&(ba.w||(ba.w=fa.w),ba.h||(ba.h=fa.h))}if(ba){c.setMarginBox(this.domNode,ba);Q=[];this.titleBar&&Q.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&Q.push({domNode:this.actionBarNode,region:"bottom"});fa={domNode:this.containerNode,region:"center"};Q.push(fa);var S=O.marginBox2contentBox(this.domNode,ba);O.layoutChildren(this.domNode,
S,Q);this._singleChild?(Q=O.marginBox2contentBox(this.containerNode,fa),this._singleChild.resize({w:Q.w,h:Q.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();r("touch")||ba||this._position()}},_layoutChildren:function(){q.forEach(this.getChildren(),function(ba){ba.resize&&ba.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();
for(var ba;ba=this._modalconnects.pop();)ba.remove();ea.hide(this);this.inherited(arguments)}});r("dojo-bidi")&&(B=b("dijit._DialogBase",B,{_setTitleAttr:function(ba){this._set("title",ba);this.titleNode.innerHTML=ba;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(ba){this._created&&this.textDir!=ba&&(this._set("textDir",ba),this.set("title",this.title))}}));var da=b("dijit.Dialog",[I,B],{});da._DialogBase=B;var ea=da._DialogLevelManager={_beginZIndex:950,show:function(ba,Q){Y[Y.length-
1].focus=A.curNode;var fa=Y[Y.length-1].dialog?Y[Y.length-1].zIndex+2:da._DialogLevelManager._beginZIndex;d.set(ba.domNode,"zIndex",fa);G.show(Q,fa-1);Y.push({dialog:ba,underlayAttrs:Q,zIndex:fa})},hide:function(ba){if(Y[Y.length-1].dialog==ba){Y.pop();var Q=Y[Y.length-1];1==Y.length?G.hide():G.show(Q.underlayAttrs,Q.zIndex-1);if(ba.refocus&&(ba=Q.focus,!Q.dialog||ba&&g.isDescendant(ba,Q.dialog.domNode)||(Q.dialog._getFocusItems(),ba=Q.dialog._firstFocusItem),ba))try{ba.focus()}catch(fa){}}else Q=
q.indexOf(q.map(Y,function(fa){return fa.dialog}),ba),-1!=Q&&Y.splice(Q,1)},isTop:function(ba){return Y[Y.length-1].dialog==ba}},Y=da._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];A.watch("curNode",function(ba,Q,fa){ba=Y[Y.length-1].dialog;if(fa&&ba&&!ba._fadeOutDeferred&&fa.ownerDocument==ba.ownerDocument){do if(fa==ba.domNode||k.contains(fa,"dijitPopup"))return;while(fa=fa.parentNode);ba.focus()}});r("dijit-legacy-requires")&&m(0,function(){F(["dijit/TooltipDialog"])});return da})},
"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(F,q){var a=q.prototype.onMove;return F("dojo.dnd.TimedMoveable",q,{timeout:40,constructor:function(b,e){e||(e={});e.timeout&&"number"==typeof e.timeout&&0<=e.timeout&&(this.timeout=e.timeout)},onMoveStop:function(b){b._timer&&(clearTimeout(b._timer),a.call(this,b,b._leftTop));q.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,e){b._leftTop=e;if(!b._timer){var g=this;b._timer=setTimeout(function(){b._timer=
null;a.call(g,b,b._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(F,q,a,b,e,g){return q("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(k){var c=[];F.forEach(k||this.getChildren(),function(d){"value"in d?c.push(d):c=c.concat(this._getDescendantFormWidgets(d.getChildren()))},this);return c},reset:function(){F.forEach(this._getDescendantFormWidgets(),
function(k){k.reset&&k.reset()})},validate:function(){var k=!1;return F.every(F.map(this._getDescendantFormWidgets(),function(c){c._hasBeenBlurred=!0;var d=c.disabled||!c.validate||c.validate();d||k||(g.scrollIntoView(c.containerNode||c.domNode),c.focus(),k=!0);return d}),function(c){return c})},setValues:function(k){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",k)},_setValueAttr:function(k){var c={};F.forEach(this._getDescendantFormWidgets(),
function(n){n.name&&(c[n.name]||(c[n.name]=[])).push(n)});for(var d in c)if(c.hasOwnProperty(d)){var f=c[d],h=b.getObject(d,!1,k);void 0!==h&&(h=[].concat(h),"boolean"==typeof f[0].checked?F.forEach(f,function(n){n.set("value",-1!=F.indexOf(h,n._get("value")))}):f[0].multiple?f[0].set("value",h):F.forEach(f,function(n,p){n.set("value",h[p])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var k=
{};F.forEach(this._getDescendantFormWidgets(),function(c){var d=c.name;if(d&&!c.disabled){var f=c.get("value");"boolean"==typeof c.checked?/Radio/.test(c.declaredClass)?!1!==f?b.setObject(d,f,k):(f=b.getObject(d,!1,k),void 0===f&&b.setObject(d,null,k)):(c=b.getObject(d,!1,k),c||(c=[],b.setObject(d,c,k)),!1!==f&&c.push(f)):(c=b.getObject(d,!1,k),"undefined"!=typeof c?b.isArray(c)?c.push(f):b.setObject(d,[c,f],k):b.setObject(d,f,k))}});return k},isValid:function(){return""==this.state},onValidStateChange:function(){},
_getState:function(){var k=F.map(this._descendants,function(c){return c.get("state")||""});return 0<=F.indexOf(k,"Error")?"Error":0<=F.indexOf(k,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(k){this._descendants=this._getDescendantFormWidgets();F.forEach(this._descendants,function(c){c._started||c.startup()});k||this._onChildChange()},_onChildChange:function(k){k&&"state"!=k&&"disabled"!=k||this._set("state",this._getState());k&&"value"!=k&&"disabled"!=k&&
"checked"!=k||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var k=this;this.own(e(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(c){c.target!=k.domNode&&
k._onChildChange(c.type.replace("attrmodified-",""))}));this.watch("state",function(c,d,f){this.onValidStateChange(""==f)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(F,q){return F("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=q._getTabNavigable(this.domNode);
this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n){var p=F("dijit.DialogUnderlay",[c,d],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(l){b.set(this.node,"id",l+"_underlay");this._set("dialogId",l)},_setClassAttr:function(l){this.node.className="dijitDialogUnderlay "+l;this._set("class",l)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(g(this.domNode,"keydown",q.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var l=this.node.style,m=this.domNode.style;m.display="none";var r=k.getBox(this.ownerDocument);m.top=
r.t+"px";m.left=r.l+"px";l.width=r.w+"px";l.height=r.h+"px";m.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new f(this.domNode);var l=k.get(this.ownerDocument);this._modalConnects=[h.on("resize",q.hitch(this,"layout")),g(l,"scroll",q.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});p.show=function(l,m){var r=p._singleton;!r||r._destroyed?r=n._underlay=p._singleton=new p(l):l&&r.set(l);e.set(r.domNode,"zIndex",m);r.open||r.show()};p.hide=function(){var l=p._singleton;l&&!l._destroyed&&l.hide()};return p})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r){return d("dijit.layout.ContentPane",[a,b,e],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:F._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(t,x,v){var z=new v(t,x);return!z.href&&z._contentSetter&&z._contentSetter.parseDeferred&&!z._contentSetter.parseDeferred.isFulfilled()?z._contentSetter.parseDeferred.then(function(){return z}):z},create:function(t,x){if(!(t&&t.template||!x||"href"in t||"content"in t)){x=h.byId(x);for(var v=x.ownerDocument.createDocumentFragment();x.firstChild;)v.appendChild(x.firstChild);
t=q.delegate(t,{content:v})}this.inherited(arguments,[t,x])},postMixInProperties:function(){this.inherited(arguments);var t=m.getLocalization("dijit","loading",this.lang);this.loadingMessage=g.substitute(this.loadingMessage,t);this.errorMessage=g.substitute(this.errorMessage,t)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&c.forEach(this._contentSetter.parseResults,
function(t){t._started||t._destroyed||!q.isFunction(t.startup)||(t.startup(),t._started=!0)},this)},_startChildren:function(){c.forEach(this.getChildren(),function(t){t._started||t._destroyed||!q.isFunction(t.startup)||(t.startup(),t._started=!0)});this._contentSetter&&c.forEach(this._contentSetter.parseResults,function(t){t._started||t._destroyed||!q.isFunction(t.startup)||(t.startup(),t._started=!0)},this)},setHref:function(t){F.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",t)},_setHrefAttr:function(t){this.cancel();this.onLoadDeferred=new f(q.hitch(this,"cancel"));this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._set("href",t);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(t){F.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",t)},_setContentAttr:function(t){this._set("href",
"");this.cancel();this.onLoadDeferred=new f(q.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._setContent(t||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(t){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new f(q.hitch(this,"cancel"));this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var t=this,x={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
q.isObject(this.ioArgs)&&q.mixin(x,this.ioArgs);var v=this._xhrDfd=(this.ioMethod||l.get)(x),z;v.then(function(A){z=A;try{return t._isDownloaded=!0,t._setContent(A,!1)}catch(B){t._onError("Content",B)}},function(A){v.canceled||t._onError("Download",A);delete t._xhrDfd;return A}).then(function(){t.onDownloadEnd();delete t._xhrDfd;return z});delete this._hrefChanged},_onLoadHandler:function(t){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(t)}catch(x){}},_onUnloadHandler:function(){this._set("isLoaded",
!1);try{this.onUnload()}catch(t){}},destroyDescendants:function(t){this.isLoaded&&this._onUnloadHandler();var x=this._contentSetter;c.forEach(this.getChildren(),function(v){v.destroyRecursive?v.destroyRecursive(t):v.destroy&&v.destroy(t);v._destroyed=!0});x&&(c.forEach(x.parseResults,function(v){v._destroyed||(v.destroyRecursive?v.destroyRecursive(t):v.destroy&&v.destroy(t),v._destroyed=!0)}),delete x.parseResults);t||p.empty(this.containerNode);delete this._singleChild},_setContent:function(t,x){t=
this.preprocessContent(t);this.destroyDescendants();var v=this._contentSetter;v&&v instanceof k._ContentSetter||(v=this._contentSetter=new k._ContentSetter({node:this.containerNode,_onError:q.hitch(this,this._onError),onContentError:q.hitch(this,function(B){B=this.onContentError(B);try{this.containerNode.innerHTML=B}catch(u){}})}));var z=q.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!t.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,
lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});z=v.set(q.isObject(t)&&t.domNode?t.domNode:t,z);var A=this;return r(z&&z.then?z:v.parseDeferred,function(){delete A._contentSetterParams;x||(A._started&&(A._startChildren(),A._scheduleLayout()),A._onLoadHandler(t))})},preprocessContent:function(t){return t},_onError:function(t,x,v){this.onLoadDeferred.reject(x);t=this["on"+t+"Error"].call(this,x);v||t&&this._setContent(t,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},
onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(F,q,a,b,e,g,k,c,d,f){return q("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var h=this.getParent();
this._childOfLayoutWidget=h&&h.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",g.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var h=[],n=!1;k("\x3e *",this.containerNode).some(function(p){var l=c.byNode(p);l&&l.resize?h.push(l):!/script|link|style/i.test(p.nodeName)&&p.offsetHeight&&(n=!0)});this._singleChild=1!=h.length||n?null:h[0];a.toggle(this.containerNode,
this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(h,n){this._resizeCalled=!0;this._scheduleLayout(h,n)},_scheduleLayout:function(h,n){this._isShown()?this._layout(h,n):(this._needLayout=!0,this._changeSize=h,this._resultSize=n)},_layout:function(h,n){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();h&&b.setMarginBox(this.domNode,h);var p=this.containerNode;if(p===this.domNode){var l=n||{};g.mixin(l,h||{});"h"in l&&"w"in l||(l=g.mixin(b.getMarginBox(p),l));this._contentBox=
f.marginBox2contentBox(p,l)}else this._contentBox=b.getContentBox(p);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var h=this._contentBox||b.getContentBox(this.containerNode);this._singleChild.resize({w:h.w,h:h.h})}else{h=this.getChildren();for(var n,p=0;n=h[p++];)n.resize&&n.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;
var h=this.domNode,n=this.domNode.parentNode;return"none"!=h.style.display&&"hidden"!=h.style.visibility&&!a.contains(h,"dijitHidden")&&n&&n.style&&"none"!=n.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(F,q,a,b,e){function g(d){return d.substring(0,1).toUpperCase()+
d.substring(1)}function k(d,f){var h=d.resize?d.resize(f):a.setMarginBox(d.domNode,f);h?e.mixin(d,h):(e.mixin(d,a.getMarginBox(d.domNode)),e.mixin(d,f))}var c={marginBox2contentBox:function(d,f){var h=b.getComputedStyle(d),n=a.getMarginExtents(d,h),p=a.getPadBorderExtents(d,h);return{l:b.toPixelValue(d,h.paddingLeft),t:b.toPixelValue(d,h.paddingTop),w:f.w-(n.w+p.w),h:f.h-(n.h+p.h)}},layoutChildren:function(d,f,h,n,p){f=e.mixin({},f);q.add(d,"dijitLayoutContainer");h=F.filter(h,function(l){return"center"!=
l.region&&"client"!=l.layoutAlign}).concat(F.filter(h,function(l){return"center"==l.region||"client"==l.layoutAlign}));F.forEach(h,function(l){var m=l.domNode,r=l.region||l.layoutAlign;if(!r)throw Error("No region setting for "+l.id);var t=m.style;t.left=f.l+"px";t.top=f.t+"px";t.position="absolute";q.add(m,"dijitAlign"+g(r));m={};n&&n==l.id&&(m["top"==l.region||"bottom"==l.region?"h":"w"]=p);"leading"==r&&(r=l.isLeftToRight()?"left":"right");"trailing"==r&&(r=l.isLeftToRight()?"right":"left");"top"==
r||"bottom"==r?(m.w=f.w,k(l,m),f.h-=l.h,"top"==r?f.t+=l.h:t.top=f.t+f.h+"px"):"left"==r||"right"==r?(m.h=f.h,k(l,m),f.w-=l.w,"left"==r?f.l+=l.w:t.left=f.l+f.w+"px"):"client"!=r&&"center"!=r||k(l,f)})}};e.setObject("dijit.layout.utils",c);return c})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(F,q,a,b,e,g,k){var c=0,d={_secureForInnerHtml:function(f){return f.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")},_emptyNode:g.empty,_setNodeContent:function(f,h){g.empty(f);if(h)if("number"==typeof h&&(h=h.toString()),"string"==typeof h&&(h=g.toDom(h,f.ownerDocument)),!h.nodeType&&q.isArrayLike(h))for(var n=h.length,p=0;p<h.length;p=n==h.length?p+1:0)g.place(h[p],f,"last");else g.place(h,f,"last");return f},_ContentSetter:b("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:F._scopeName,startup:!0,constructor:function(f,h){q.mixin(this,
f||{});h=this.node=e.byId(this.node||h);this.id||(this.id=["Setter",h?h.id||h.tagName:"",c++].join("_"))},set:function(f,h){void 0!==f&&(this.content=f);"number"==typeof f&&(f=f.toString());h&&this._mixin(h);this.onBegin();this.setContent();var n=this.onEnd();return n&&n.then?n:this.node},setContent:function(){var f=this.node;if(!f)throw Error(this.declaredClass+": setContent given no node");try{f=d._setNodeContent(f,this.content)}catch(n){var h=this.onContentError(n);try{f.innerHTML=h}catch(p){}}this.node=
f},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(f){f.destroy&&f.destroy()}),delete this.parseResults);g.empty(this.node)},onBegin:function(){var f=this.content;if(q.isString(f)&&(this.cleanContent&&(f=d._secureForInnerHtml(f)),this.extractContent)){var h=f.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);h&&(f=h[1])}this.empty();this.content=
f;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(f){return"Error occurred setting content: "+f},onExecError:function(f){return"Error occurred executing scripts: "+f},_mixin:function(f){var h={},n;for(n in f)n in h||(this[n]=f[n])},_parse:function(){var f=this.node;try{var h={};a.forEach(["dir","lang","textDir"],function(p){this[p]&&
(h[p]=this[p])},this);var n=this;this.parseDeferred=k.parse({rootNode:f,noStart:!this.startup,inherited:h,scope:this.parserScope}).then(function(p){return n.parseResults=p},function(p){n._onError("Content",p,"Error parsing in _ContentSetter#"+n.id)})}catch(p){this._onError("Content",p,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(f,h,n){f=this["on"+f+"Error"].call(this,h);n||f&&d._setNodeContent(this.node,f,!0)}}),set:function(f,h,n){void 0==h&&(h="");"number"==typeof h&&(h=h.toString());
return n?(new d._ContentSetter(q.mixin(n,{content:h,node:f}))).set():d._setNodeContent(f,h,!0)}};q.setObject("dojo.html",d);return d})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r){function t(B){return eval("("+B+")")}function x(B){var u=B._nameCaseMap,w=B.prototype;if(!u||u._extendCnt<
z){u=B._nameCaseMap={};for(var D in w)"_"!==D.charAt(0)&&(u[D.toLowerCase()]=D);u._extendCnt=z}return u}function v(B,u){u||(u=F);var w=u._dojoParserCtorMap||(u._dojoParserCtorMap={}),D=B.join();if(!w[D]){for(var y=[],C=0,G=B.length;C<G;C++){var I=B[C];y[y.length]=w[I]=w[I]||a.getObject(I)||~I.indexOf("/")&&u(I)}C=y.shift();w[D]=y.length?C.createSubclass?C.createSubclass(y):C.extend.apply(C,y):C}return w[D]}new Date("X");var z=0;d.after(a,"extend",function(){z++},!0);var A={_clearCache:function(){z++;
_ctorMap={}},_functionFromScript:function(B,u){var w="",D="",y=B.getAttribute(u+"args")||B.getAttribute("args"),C=B.getAttribute("with");y=(y||"").split(/\s*,\s*/);C&&C.length&&b.forEach(C.split(/\s*,\s*/),function(G){w+="with("+G+"){";D+="}"});return new Function(y,w+B.innerHTML+D)},instantiate:function(B,u,w){u=u||{};w=w||{};var D=(w.scope||q._scopeName)+"Type",y="data-"+(w.scope||q._scopeName)+"-",C=y+"type",G=y+"mixins",I=[];b.forEach(B,function(O){var R=D in u?u[D]:O.getAttribute(C)||O.getAttribute(D);
if(R){var Z=O.getAttribute(G);R=Z?[R].concat(Z.split(/\s*,\s*/)):[R];I.push({node:O,types:R})}});return this._instantiate(I,u,w)},_instantiate:function(B,u,w,D){function y(C){u._started||w.noStart||b.forEach(C,function(G){"function"!==typeof G.startup||G._started||G.startup()});return C}B=b.map(B,function(C){var G=C.ctor||v(C.types,w.contextRequire);if(!G)throw Error("Unable to resolve constructor for: '"+C.types.join()+"'");return this.construct(G,C.node,u,w,C.scripts,C.inherited)},this);return D?
f(B).then(y):y(B)},construct:function(B,u,w,D,y,C){function G(qa){Y&&a.setObject(Y,qa);for(da=0;da<S.length;da++)d[S[da].advice||"after"](qa,S[da].method,a.hitch(qa,S[da].func),!0);for(da=0;da<X.length;da++)X[da].call(qa);for(da=0;da<la.length;da++)qa.watch(la[da].prop,la[da].func);for(da=0;da<na.length;da++)m(qa,na[da].event,na[da].func);return qa}var I=B&&B.prototype;D=D||{};var O={};D.defaults&&a.mixin(O,D.defaults);C&&a.mixin(O,C);if(p("dom-attributes-explicit"))var R=u.attributes;else p("dom-attributes-specified-flag")?
R=b.filter(u.attributes,function(qa){return qa.specified}):(C=(/^input$|^img$/i.test(u.nodeName)?u:u.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),R=b.map(C.split(/\s+/),function(qa){var ta=qa.toLowerCase();return{name:qa,value:"LI"==u.nodeName&&"value"==qa||"enctype"==ta?u.getAttribute(ta):u.getAttributeNode(ta).value}}));var Z=D.scope||q._scopeName;C="data-"+Z+"-";var W={};"dojo"!==Z&&(W[C+"props"]="data-dojo-props",
W[C+"type"]="data-dojo-type",W[C+"mixins"]="data-dojo-mixins",W[Z+"type"]="dojotype",W[C+"id"]="data-dojo-id");var da=0,ea;Z=[];for(var Y,ba;ea=R[da++];){var Q=ea.name,fa=Q.toLowerCase();ea=ea.value;switch(W[fa]||fa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":ba=ea;break;case "data-dojo-id":case "jsid":Y=ea;break;case "data-dojo-attach-point":case "dojoattachpoint":O.dojoAttachPoint=ea;break;case "data-dojo-attach-event":case "dojoattachevent":O.dojoAttachEvent=
ea;break;case "class":O["class"]=u.className;break;case "style":O.style=u.style&&u.style.cssText;break;default:if(Q in I||(Q=x(B)[fa]||Q),Q in I)switch(typeof I[Q]){case "string":O[Q]=ea;break;case "number":O[Q]=ea.length?Number(ea):NaN;break;case "boolean":O[Q]="false"!=ea.toLowerCase();break;case "function":""===ea||-1!=ea.search(/[^\w\.]+/i)?O[Q]=new Function(ea):O[Q]=a.getObject(ea,!1)||new Function(ea);Z.push(Q);break;default:fa=I[Q],O[Q]=fa&&"length"in fa?ea?ea.split(/\s*,\s*/):[]:fa instanceof
Date?""==ea?new Date(""):"now"==ea?new Date:h.fromISOString(ea):fa instanceof c?q.baseUrl+ea:t(ea)}else O[Q]=ea}}for(R=0;R<Z.length;R++)W=Z[R].toLowerCase(),u.removeAttribute(W),u[W]=null;if(ba)try{ba=t.call(D.propsThis,"{"+ba+"}"),a.mixin(O,ba)}catch(qa){throw Error(qa.toString()+" in data-dojo-props\x3d'"+ba+"'");}a.mixin(O,w);y||(y=B&&(B._noScript||I._noScript)?[]:l("\x3e script[type^\x3d'dojo/']",u));var S=[],X=[],la=[],na=[];if(y)for(da=0;da<y.length;da++)W=y[da],u.removeChild(W),w=W.getAttribute(C+
"event")||W.getAttribute("event"),D=W.getAttribute(C+"prop"),ba=W.getAttribute(C+"method"),Z=W.getAttribute(C+"advice"),R=W.getAttribute("type"),W=this._functionFromScript(W,C),w?"dojo/connect"==R?S.push({method:w,func:W}):"dojo/on"==R?na.push({event:w,func:W}):O[w]=W:"dojo/aspect"==R?S.push({method:ba,advice:Z,func:W}):"dojo/watch"==R?la.push({prop:D,func:W}):X.push(W);B=(y=B.markupFactory||I.markupFactory)?y(O,u,B):new B(O,u);return B.then?B.then(G):G(B)},scan:function(B,u){function w(S){if(!S.inherited){S.inherited=
{};var X=S.node,la=w(S.parent);X={dir:X.getAttribute("dir")||la.dir,lang:X.getAttribute("lang")||la.lang,textDir:X.getAttribute(R)||la.textDir};for(var na in X)X[na]&&(S.inherited[na]=X[na])}return S.inherited}var D=[],y=[],C={},G=(u.scope||q._scopeName)+"Type",I="data-"+(u.scope||q._scopeName)+"-",O=I+"type",R=I+"textdir";I+="mixins";var Z=B.firstChild,W=u.inherited;if(!W){W=function na(X,la){return X.getAttribute&&X.getAttribute(la)||X.parentNode&&na(X.parentNode,la)};W={dir:W(B,"dir"),lang:W(B,
"lang"),textDir:W(B,R)};for(var da in W)W[da]||delete W[da]}W={inherited:W};for(var ea,Y;;)if(Z)if(1!=Z.nodeType)Z=Z.nextSibling;else if(ea&&"script"==Z.nodeName.toLowerCase())(ba=Z.getAttribute("type"))&&/^dojo\/\w/i.test(ba)&&ea.push(Z),Z=Z.nextSibling;else if(Y)Z=Z.nextSibling;else{var ba=Z.getAttribute(O)||Z.getAttribute(G);da=Z.firstChild;if(ba||da&&(3!=da.nodeType||da.nextSibling)){Y=null;if(ba){var Q=Z.getAttribute(I);ea=Q?[ba].concat(Q.split(/\s*,\s*/)):[ba];try{Y=v(ea,u.contextRequire)}catch(S){}Y||
b.forEach(ea,function(S){~S.indexOf("/")&&!C[S]&&(C[S]=!0,y[y.length]=S)});Q=Y&&!Y.prototype._noScript?[]:null;W={types:ea,ctor:Y,parent:W,node:Z,scripts:Q};W.inherited=w(W);D.push(W)}else W={node:Z,scripts:ea,parent:W};ea=Q;Y=Z.stopParser||Y&&Y.prototype.stopParser&&!u.template;Z=da}else Z=Z.nextSibling}else{if(!W||!W.node)break;Z=W.node.nextSibling;Y=!1;W=W.parent;ea=W.scripts}var fa=new n;y.length?(u.contextRequire||F)(y,function(){fa.resolve(b.filter(D,function(S){if(!S.ctor)try{S.ctor=v(S.types,
u.contextRequire)}catch(na){}for(var X=S.parent;X&&!X.types;)X=X.parent;var la=S.ctor&&S.ctor.prototype;S.instantiateChildren=!(la&&la.stopParser&&!u.template);S.instantiate=!X||X.instantiate&&X.instantiateChildren;return S.instantiate}))}):fa.resolve(D);return fa.promise},_require:function(B,u){var w=t("{"+B.innerHTML+"}"),D=[],y=[],C=new n,G=u&&u.contextRequire||F,I;for(I in w)D.push(I),y.push(w[I]);G(y,function(){for(var O=0;O<D.length;O++)a.setObject(D[O],arguments[O]);C.resolve(arguments)});
return C.promise},_scanAmd:function(B,u){var w=new n,D=w.promise;w.resolve(!0);var y=this;l("script[type\x3d'dojo/require']",B).forEach(function(C){D=D.then(function(){return y._require(C,u)});C.parentNode.removeChild(C)});return D},parse:function(B,u){!B||"string"==typeof B||"nodeType"in B||(u=B,B=u.rootNode);var w=B?g.byId(B):k.body();u=u||{};var D=u.template?{template:!0}:{},y=[],C=this,G=this._scanAmd(w,u).then(function(){return C.scan(w,u)}).then(function(I){return C._instantiate(I,D,u,!0)}).then(function(I){return y=
y.concat(I)}).otherwise(function(I){throw I;});a.mixin(y,G);return y}};q.parser=A;e.parseOnLoad&&r(100,A,"parse");return A})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(F,q,a,b){F=F(b.Credential,{});return a.Credential=F})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v){var z={},A=function(y){var C=(new g(y.owningSystemUrl)).host;y=(new g(y.server)).host;var G=/.+\.arcgis\.com$/i;return G.test(C)&&G.test(y)},B=function(y,C){return!!(A(y)&&C&&b.some(C,function(G){return G.test(y.server)}))},u=null,w=null;try{u=window.localStorage,w=window.sessionStorage}catch(y){}k=F(t,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=
[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();d(window,"pageshow",a.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:l.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(y){var C=this.serverInfos;C?(y=b.filter(y,function(G){return!this.findServerInfo(G.server)},this),this.serverInfos=C.concat(y)):
this.serverInfos=y;b.forEach(y,function(G){G.owningSystemUrl&&this._portals.push(G.owningSystemUrl);if(G.hasPortal){this._portals.push(G.server);var I=h.defaults.io.corsEnabledServers,O=this._getOrigin(G.tokenServiceUrl);l.canUseXhr(G.server)||I.push(G.server.replace(/^https?:\/\//i,""));l.canUseXhr(O)||I.push(O.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(y){var C=this.oAuthInfos;C?(b.forEach(y,function(G){(G=this.findOAuthInfo(G.portalUrl))&&C.splice(C.indexOf(G),1)},this),
this.oAuthInfos=C.concat(y)):this.oAuthInfos=y},registerToken:function(y){y=n.mixin({},y);var C=this._sanitizeUrl(y.server),G=this.findServerInfo(C),I=!0,O;G||(G=new p,G.server=this._getServerInstanceRoot(C),G.tokenServiceUrl=this._getTokenSvcUrl(C),G.hasPortal=!0,this.registerServers([G]));(O=this.findCredential(C,y.userId))?(delete y.server,a.mixin(O,y),I=!1):(O=new D({userId:y.userId,server:G.server,token:y.token,expires:y.expires,ssl:y.ssl,scope:this._isServerRsrc(C)?"server":"portal"}),O.resources=
[C],this.credentials.push(O));O.onTokenChange(!1);I||O.refreshServerTokens()},toJson:function(){return n.fixJson({serverInfos:b.map(this.serverInfos,function(y){return y.toJson()}),oAuthInfos:b.map(this.oAuthInfos,function(y){return y.toJson()}),credentials:b.map(this.credentials,function(y){return y.toJson()})})},initialize:function(y){if(y){a.isString(y)&&(y=JSON.parse(y));var C=y.serverInfos,G=y.oAuthInfos;y=y.credentials;if(C){var I=[];b.forEach(C,function(R){R.server&&R.tokenServiceUrl&&I.push(R.declaredClass?
R:new p(R))});I.length&&this.registerServers(I)}if(G){var O=[];b.forEach(G,function(R){R.appId&&O.push(R.declaredClass?R:new v(R))});O.length&&this.registerOAuthInfos(O)}y&&b.forEach(y,function(R){R.userId&&R.server&&R.token&&R.expires&&R.expires>(new Date).getTime()&&(R=R.declaredClass?R:new D(R),R.onTokenChange(),this.credentials.push(R))},this)}},findServerInfo:function(y){var C;y=this._sanitizeUrl(y);b.some(this.serverInfos,function(G){this._hasSameServerInstance(G.server,y)&&(C=G);return!!C},
this);return C},findOAuthInfo:function(y){var C;y=this._sanitizeUrl(y);b.some(this.oAuthInfos,function(G){this._hasSameServerInstance(G.portalUrl,y)&&(C=G);return!!C},this);return C},findCredential:function(y,C){var G;y=this._sanitizeUrl(y);var I=this._isServerRsrc(y)?"server":"portal";C?b.some(this.credentials,function(O){this._hasSameServerInstance(O.server,y)&&C===O.userId&&O.scope===I&&(G=O);return!!G},this):b.some(this.credentials,function(O){this._hasSameServerInstance(O.server,y)&&-1!==this._getIdenticalSvcIdx(y,
O)&&O.scope===I&&(G=O);return!!G},this);return G},getCredential:function(y,C){var G=!0;if(n.isDefined(C))if(a.isObject(C)){var I=!!C.token;var O=C.error;G=!1!==C.prompt}else I=C;y=this._sanitizeUrl(y);var R=new e(m._dfdCanceller),Z=this._isAdminResource(y);if((I=I?this.findCredential(y):null)&&O&&498===O.code)I.destroy();else if(I)return G=Error("You are currently signed in as: '"+I.userId+"'. You do not have access to this resource: "+y),G.name="identity-manager:not-authorized",G.code="IdentityManagerBase.1",
G.httpCode=O&&O.httpCode,G.messageCode=O?O.messageCode:null,G.subcode=O?O.subcode:null,G.details=O?O.details:null,G.log=!!q.isDebug,R.errback(G),R;if(O=this._findCredential(y,C))return R.callback(O),R;var W=this.findServerInfo(y);if(W)!W.hasServer&&this._isServerRsrc(y)&&(W._restInfoDfd=this._getTokenSvcUrl(y,!0),W.hasServer=!0);else{O=this._getTokenSvcUrl(y);if(!O)return G=Error("Unknown resource - could not find token service endpoint."),G.name="identity-manager:unknown-resource",G.code="IdentityManagerBase.2",
G.log=!!q.isDebug,R.errback(G),R;W=new p;W.server=this._getServerInstanceRoot(y);a.isString(O)?(W.tokenServiceUrl=O,W.hasPortal=!0):(W._restInfoDfd=O,W.hasServer=!0);this.registerServers([W])}W.hasPortal&&void 0===W._selfReq&&(G||l.hasSameOrigin(W.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(da){return da.tokenServiceUrl===W.tokenServiceUrl}))&&(W._selfReq={owningTenant:C&&C.owningTenant,selfDfd:this._getPortalSelf(W.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),
y)});return this._enqueue(y,W,C,R,Z)},getResourceName:function(y){return this._isRESTService(y)?y.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(y)&&y.replace(this._gwUser,"$1")||this._gwItem.test(y)&&y.replace(this._gwItem,"$1")||this._gwGroup.test(y)&&y.replace(this._gwGroup,"$1")||""},generateToken:function(y,C,G){var I=this._rePortalTokenSvc.test(y.tokenServiceUrl),O=new g(window.location.href.toLowerCase()),R=!C;var Z=y.shortLivedTokenValidity;if(C){var W=
f.id.tokenValidity||Z||f.id.defaultTokenValidity;W>Z&&(W=Z)}if(G){var da=G.isAdmin;var ea=G.serverUrl;var Y=G.token;var ba=G.ssl;y.customParameters=G.customParameters}if(da)Z=y.adminTokenServiceUrl;else{Z=y.tokenServiceUrl;var Q=new g(Z.toLowerCase());y.webTierAuth&&G&&G.serverUrl&&!ba&&"http"===O.scheme&&(l.hasSameOrigin(O.uri,Z,!0)||"https"===Q.scheme&&O.host===Q.host&&"7080"===O.port&&"7443"===Q.port)&&(Z=Z.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));R&&I&&(Z=Z.replace(/\/rest/i,""))}da=
a.mixin({url:Z,content:a.mixin({request:"getToken",username:C&&C.username,password:C&&C.password,serverUrl:ea,token:Y,expiration:W,referer:da||I?window.location.host:null,client:da?"referer":null,f:"json"},y.customParameters),handleAs:"json",callbackParamName:R?"callback":void 0},G&&G.ioArgs);G={usePost:!R,disableIdentityLookup:!0,useProxy:this._useProxy(y,G)};I||(da.withCredentials=!1);I=r(da,G);I.addCallback(function(fa){if(!fa||!fa.token)return fa=Error("Unable to generate token"),fa.name="identity-manager:authentication-failed",
fa.code="IdentityManagerBase.3",fa.log=!!q.isDebug,fa;var S=y.server;z[S]||(z[S]={});C&&(z[S][C.username]=C.password);fa.validity=W;return fa});I.addErrback(function(fa){});return I},isBusy:function(){return!!this._busy},checkSignInStatus:function(y){var C=new e;this.checkAppAccess(y,"").then(function(G){C.resolve(G.credential)})["catch"](function(G){C.reject(G)});return C},checkAppAccess:function(y,C,G){var I=this,O=!1;return this.getCredential(y,{prompt:!1}).then(function(R){var Z={f:"json"};if("portal"===
R.scope)if(C&&(I._doPortalSignIn(y)||G&&G.force)){var W=R.server+"/sharing/rest/oauth2/validateAppAccess";Z.client_id=C}else if(R.token)W=R.server+"/sharing/rest";else return{credential:R};else if(R.token)W=R.server+"/rest/services";else return{credential:R};R.token&&(Z.token=R.token);return r({url:W,content:Z,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(da){if(!1===da.valid){var ea=Error("You are currently signed in as: '"+R.userId+"'.  You do not have access to this app: '"+
C+"'.");ea.name="identity-manager:not-authorized";ea.code="IdentityManagerBase.1";ea.log=!!q.isDebug;ea.details=da;throw ea;}O=!!da.viewOnlyUserTypeApp;return{credential:R}})["catch"](function(da){if("IdentityManagerBase.1"===da.code||400===da.code)throw 400===da.code&&(da.name="identity-manager:invalid-request"),da;if(498===da.code)throw R.destroy(),da=Error("User is not signed in."),da.name="identity-manager:not-authenticated",da.code="IdentityManagerBase.6",da.log=!!q.isDebug,da;return{credential:R}})}).then(function(R){return{credential:R.credential,
viewOnly:O}})},setProtocolErrorHandler:function(y){this._protocolFunc=y},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var y=this.credentials.slice();b.forEach(y,function(C){C.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(y){y||(y="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
d(window,"message",function(C){(C.origin===window.location.origin||n.endsWith(C.origin,".arcgis.com"))&&C.data&&"arcgis:auth:requestCredential"===C.data.type&&this.getCredential(y).then(function(G){C.source.postMessage({type:"arcgis:auth:credential",credential:{expires:G.expires,server:G.server,ssl:G.ssl,token:G.token,userId:G.userId}},C.origin)})["catch"](function(G){C.source.postMessage({type:"arcgis:auth:error",error:{name:G.name,message:G.message}},C.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var y=window.location.hash;if(y){"#"===y.charAt(0)&&(y=y.substring(1));y=c.queryToObject(y);var C=!1;if(y.access_token&&y.expires_in&&y.state&&y.hasOwnProperty("username"))try{y.state=JSON.parse(y.state),y.state.portalUrl&&(this._oAuthLocationParams=y,C=!0)}catch(I){}else if(y.error&&y.error_description&&"access_denied"===y.error&&(C=!0,y.state))try{y.state=JSON.parse(y.state)}catch(I){}C&&
(window.location.hash=y.state&&y.state.hash||"")}if(y=window.location.search){"?"===y.charAt(0)&&(y=y.substring(1));y=c.queryToObject(y);C=!1;if(y.code&&y.state)try{y.state=JSON.parse(y.state),y.state.portalUrl&&y.state.uid&&(this._oAuthLocationParams=y,C=!0)}catch(I){}else if(y.error&&y.error_description&&"access_denied"===y.error&&(C=!0,y.state))try{y.state=JSON.parse(y.state)}catch(I){}if(C){var G=n.mixin({},y);"code error error_description message_code persist state".split(" ").forEach(function(I){delete G[I]});
C=c.objectToQuery(G);window.history.replaceState(window.history.state,"",window.location.pathname+(C?"?"+C:"")+(y.state&&y.state.hash||""))}}},_getOAuthToken:function(y,C,G,I,O){y=y.replace(/^http:/i,"https:");return r({url:y+"/sharing/rest/oauth2/token",content:I&&O?{grant_type:"authorization_code",code:C,redirect_uri:I,client_id:G,code_verifier:O}:{grant_type:"refresh_token",refresh_token:C,client_id:G}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(y){y.persisted&&this.isBusy()&&
this._rejectOnPersistedPageShow&&(y=Error("ABORTED"),y.name="identity-manager:user-aborted",y.code="IdentityManager.2",y.log=!!q.isDebug,this._errbackFunc(y))},_findCredential:function(y,C){var G=-1,I,O,R=C&&C.token;var Z=C&&C.resource;var W=this._isServerRsrc(y)?"server":"portal",da=b.filter(this.credentials,function(Q){return this._hasSameServerInstance(Q.server,y)&&Q.scope===W},this);y=Z||y;if(da.length)if(1===da.length){Z=da[0];var ea=(I=(O=this.findServerInfo(Z.server))&&O.owningSystemUrl)&&
this.findCredential(I,Z.userId);G=this._getIdenticalSvcIdx(y,Z);if(R)-1!==G&&(Z.resources.splice(G,1),this._removeResource(y,ea));else return-1===G&&Z.resources.push(y),this._addResource(y,ea),Z}else{var Y,ba;b.some(da,function(Q){ba=this._getIdenticalSvcIdx(y,Q);return-1!==ba?(Y=Q,ea=(I=(O=this.findServerInfo(Y.server))&&O.owningSystemUrl)&&this.findCredential(I,Y.userId),G=ba,!0):!1},this);if(R)Y&&(Y.resources.splice(G,1),this._removeResource(y,ea));else if(Y)return this._addResource(y,ea),Y}},
_findOAuthInfo:function(y){var C=this.findOAuthInfo(y);C||b.some(this.oAuthInfos,function(G){this._isIdProvider(G.portalUrl,y)&&(C=G);return!!C},this);return C},_addResource:function(y,C){C&&-1===this._getIdenticalSvcIdx(y,C)&&C.resources.push(y)},_removeResource:function(y,C){var G=-1;C&&(G=this._getIdenticalSvcIdx(y,C),-1<G&&C.resources.splice(G,1))},_useProxy:function(y,C){return C&&C.isAdmin&&!l.hasSameOrigin(y.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(y.tokenServiceUrl)&&
10.1==y.currentVersion&&!l.hasSameOrigin(y.tokenServiceUrl,window.location.href)},_getOrigin:function(y){y=new g(y);return y.scheme+"://"+y.host+(n.isDefined(y.port)?":"+y.port:"")},_getServerInstanceRoot:function(y){var C=y.toLowerCase(),G=C.indexOf(this._agsRest);-1===G&&this._isAdminResource(y)&&(G=this._agsAdmin.test(y)?y.replace(this._agsAdmin,"$1").length:y.search(this._adminSvcs));-1===G&&(G=C.indexOf("/sharing"));-1===G&&"/"===C.substr(-1)&&(G=C.length-1);return-1<G?y.substring(0,G):y},_hasSameServerInstance:function(y,
C){"/"===y.substr(-1)&&(y=y.slice(0,-1));y=y.toLowerCase();C=this._getServerInstanceRoot(C).toLowerCase();y=this._normalizeAGOLorgDomain(y);C=this._normalizeAGOLorgDomain(C);y=y.substr(y.indexOf(":"));C=C.substr(C.indexOf(":"));return y===C},_normalizeAGOLorgDomain:function(y){var C=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,G=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,I=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;C.test(y)?y=y.replace(C,"https://www.arcgis.com"):
G.test(y)?y=y.replace(G,"https://devext.arcgis.com"):I.test(y)&&(y=y.replace(I,"https://qaext.arcgis.com"));return y},_sanitizeUrl:function(y){var C=(h.defaults.io.proxyUrl||"").toLowerCase(),G=C?y.toLowerCase().indexOf(C+"?"):-1;-1!==G&&(y=y.substring(G+C.length+1));y=l.normalize(y);return l.urlToObject(y).path},_isRESTService:function(y){return-1<y.indexOf(this._agsRest)},_isAdminResource:function(y){return this._agsAdmin.test(y)||this._adminSvcs.test(y)},_isServerRsrc:function(y){return this._isRESTService(y)||
this._isAdminResource(y)},_isIdenticalService:function(y,C){if(this._isRESTService(y)&&this._isRESTService(C)){var G=this._getSuffix(y).toLowerCase(),I=this._getSuffix(C).toLowerCase();var O=G===I;O||(O=/(.*)\/(MapServer|FeatureServer).*/ig,O=G.replace(O,"$1")===I.replace(O,"$1"))}else this._isAdminResource(y)&&this._isAdminResource(C)?O=!0:this._isServerRsrc(y)||this._isServerRsrc(C)||!this._isPortalDomain(y)||(O=!0);return O},_isPortalDomain:function(y){var C=new g(y.toLowerCase()),G=this._portalConfig;
y=b.some(this._gwDomains,function(I){return I.regex.test(C.uri)});!y&&G&&(y=this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),C.uri));y||(!this._arcgisUrl&&(G=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new g(G)).authority),this._arcgisUrl&&(y=this._arcgisUrl.toLowerCase()===C.authority));y||(y=b.some(this._portals,function(I){return this._hasSameServerInstance(I,C.uri)},this));return y=y||this._agsPortal.test(C.path)},_isIdProvider:function(y,C){var G=-1,I=
-1;b.forEach(this._gwDomains,function(W,da){-1===G&&W.regex.test(y)&&(G=da);-1===I&&W.regex.test(C)&&(I=da)});var O=!1;if(-1<G&&-1<I)if(0===G||4===G){if(0===I||4===I)O=!0}else if(1===G){if(1===I||2===I)O=!0}else 2===G?2===I&&(O=!0):3===G&&3===I&&(O=!0);if(!O){var R=this.findServerInfo(C),Z=R&&R.owningSystemUrl;Z&&A(R)&&this._isPortalDomain(Z)&&this._isIdProvider(y,Z)&&(O=!0)}return O},_isPublic:function(y){y=this._sanitizeUrl(y);return b.some(this._publicUrls,function(C){return C.test(y)})},_getIdenticalSvcIdx:function(y,
C){var G=-1;b.some(C.resources,function(I,O){return this._isIdenticalService(y,I)?(G=O,!0):!1},this);return G},_getSuffix:function(y){return y.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(y){if(this._isRESTService(y)||this._isAdminResource(y)){var C=this._getServerInstanceRoot(y);var G=C+"/admin/generateToken";y=C+"/rest/info";C=r({url:y,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});C.adminUrl_=G;return C}if(this._isPortalDomain(y)){var I=
"";b.some(this._gwDomains,function(O){O.regex.test(y)&&(I=O.tokenServiceUrl);return!!I});I||b.some(this._portals,function(O){this._hasSameServerInstance(O,y)&&(I=O+this._gwTokenUrl);return!!I},this);I||(G=y.toLowerCase().indexOf("/sharing"),-1!==G&&(I=y.substring(0,G)+this._gwTokenUrl));I||(I=this._getOrigin(y)+this._gwTokenUrl);I&&(G=(new g(y)).port,/^http:\/\//i.test(y)&&"7080"===G&&(I=I.replace(/:7080/i,":7443")),I=I.replace(/http:/i,"https:"));return I}if(-1!==y.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_exchangeToken:function(y,C,G){return r({url:y+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:C,token:G}},{disableIdentityLookup:!0,usePost:!0}).then(function(I){return I.token})},_getPlatformSelf:function(y,C){y=y.replace(/^http:/i,"https:");return r({url:y+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":C,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},
_getPortalSelf:function(y,C){var G="";b.some(this._gwDomains,function(O){O.regex.test(y)&&(G=O.customBaseUrl);return!!G});if(G){var I=new e;I.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:G,portalMode:"multitenant",supportsOAuth:!0});return I}"https:"===window.location.protocol?y=y.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(C)&&(y=y.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return r({url:y,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},
{disableIdentityLookup:!0})},_doPortalSignIn:function(y){var C=this._portalConfig,G=window.location.href,I=this.findServerInfo(y);return(C||this._isPortalDomain(G))&&(I?I.hasPortal||I.owningSystemUrl&&this._isPortalDomain(I.owningSystemUrl):this._isPortalDomain(y))&&(this._isIdProvider(G,y)||C&&(this._hasSameServerInstance(this._getServerInstanceRoot(C.restBaseUrl),y)||this._isIdProvider(C.restBaseUrl,y))||l.hasSameOrigin(G,y,!0))?!0:!1},_checkProtocol:function(y,C,G,I){var O=!0;I=I?C.adminTokenServiceUrl:
C.tokenServiceUrl;0!==a.trim(I).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||h.defaults.io.useCors&&(l.canUseXhr(I)||l.canUseXhr(l.getProxyUrl(!0).path))||(O=this._protocolFunc?!!this._protocolFunc({resourceUrl:y,serverInfo:C}):!1,O||(y=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),y.name="identity-manager:aborted",y.code="IdentityManagerBase.4",y.log=!!q.isDebug,G(y)));return O},_enqueue:function(y,C,G,I,O,R){I||
(I=new e(m._dfdCanceller));I.resUrl_=y;I.sinfo_=C;I.options_=G;I.admin_=O;I.refresh_=R;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(y),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(I)):this._xoReqs.push(I):this._doSignIn(I);return I},_doSignIn:function(y){this._busy=y;this._rejectOnPersistedPageShow=!1;var C=this,G=function(ea){var Y=y.options_&&y.options_.resource,ba=y.resUrl_,Q=y.refresh_,fa=!1;-1===b.indexOf(C.credentials,
ea)&&(Q&&-1!==b.indexOf(C.credentials,Q)?(Q.userId=ea.userId,Q.token=ea.token,Q.expires=ea.expires,Q.validity=ea.validity,Q.ssl=ea.ssl,Q.creationTime=ea.creationTime,fa=!0,ea=Q):C.credentials.push(ea));ea.resources||(ea.resources=[]);-1===ea.resources.indexOf(Y||ba)&&ea.resources.push(Y||ba);ea.scope=C._isServerRsrc(ba)?"server":"portal";ea.onTokenChange();Y=C._soReqs;var S={};C._soReqs=[];b.forEach(Y,function(X){if(!this._isIdenticalService(ba,X.resUrl_)){var la=this._getSuffix(X.resUrl_);S[la]||
(S[la]=!0,ea.resources.push(X.resUrl_))}},C);y.callback(ea);b.forEach(Y,function(X){this._hasSameServerInstance(this._getServerInstanceRoot(ba),X.resUrl_)?X.callback(ea):this._soReqs.push(X)},C);C._busy=y.resUrl_=y.sinfo_=y.refresh_=null;if(!fa)C.onCredentialCreate({credential:ea});C._soReqs.length?C._doSignIn(C._soReqs.shift()):C._xoReqs.length&&C._doSignIn(C._xoReqs.shift())},I=function(ea){y.errback(ea);C._busy=y.resUrl_=y.sinfo_=y.refresh_=null;C._soReqs.length?C._doSignIn(C._soReqs.shift()):
C._xoReqs.length&&C._doSignIn(C._xoReqs.shift())},O=function(ea,Y,ba,Q){var fa=y.sinfo_,S=!y.options_||!1!==y.options_.prompt,X=fa.hasPortal&&C._findOAuthInfo(y.resUrl_);if(ea)G(new D({userId:ea,server:fa.server,token:ba||null,expires:n.isDefined(Q)?Number(Q):null,ssl:!!Y}));else if(window!==window.parent&&C._appUrlObj.query&&C._appUrlObj.query["arcgis-auth-origin"]&&C._appUrlObj.query["arcgis-auth-portal"]&&C._hasSameServerInstance(C._getServerInstanceRoot(C._appUrlObj.query["arcgis-auth-portal"]),
y.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},C._appUrlObj.query["arcgis-auth-origin"]);var la=d(window,"message",function(va){if(va.source===window.parent&&va.data)if("arcgis:auth:credential"===va.data.type&&va.data.credential.expires<Date.now()&&(va.data.type="arcgis:auth:error",va.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===va.data.type)la.remove(),G(new D(va.data.credential));else if("arcgis:auth:error"===va.data.type){la.remove();va=va.data.error;
switch(va.name){case "identity-manager:busy":case "identity-manager:not-authorized":var Fa="IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":Fa="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":Fa="IdentityManager.3";"tokenExpiredError"===va.name&&(va.name="identity-manager:credential-request-failed",
va.message="Parent application's token has expired.");break;case "identity-manager:aborted":Fa="IdentityManager.4";break;case "identity-manager:not-authenticated":Fa="IdentityManager.6";break;case "identity-manager:invalid-request":Fa=400}var Ea=Error(va.message);Ea.name=va.name;Ea.code=Fa;Ea.log=!!q.isDebug;I(Ea)}})}else if(X){var na=X._oAuthCred;na||(ea=new x(X,u),Y=new x(X,w),ea.isValid()&&Y.isValid()?ea.expires>Y.expires?(na=ea,Y.destroy()):(na=Y,ea.destroy()):na=ea.isValid()?ea:Y,X._oAuthCred=
na);if(na.isValid()){var qa=new D({userId:na.userId,server:fa.server,token:na.token,expires:na.expires,ssl:na.ssl,_oAuthCred:na});var ta=X.appId!==na.appId&&C._doPortalSignIn(y.resUrl_);ta||na.refreshToken?(na.refreshToken?y._pendingDfd=C._getOAuthToken(fa.server,na.refreshToken,na.appId).then(function(va){qa.expires=Date.now()+1E3*va.expires_in;qa.token=va.access_token;return qa}):(ea=new e,ea.resolve(qa),y._pendingDfd=ea),y._pendingDfd.then(function(va){return ta?C._exchangeToken(va.server,X.appId,
va.token).then(function(Fa){va.token=Fa;return va})["catch"](function(){return va}):va}).then(function(va){G(va)})["catch"](function(){na.destroy();O()})):G(qa)}else if(C._oAuthLocationParams&&C._hasSameServerInstance(X.portalUrl,C._oAuthLocationParams.state.portalUrl)&&(C._oAuthLocationParams.access_token||C._oAuthLocationParams.code&&C._oAuthLocationParams.state.uid===na.stateUID&&na.codeVerifier))ea=C._oAuthLocationParams,C._oAuthLocationParams=null,y._pendingDfd=C._processOAuthResponseParams(ea,
X,fa).then(function(va){G(va)})["catch"](I);else{var ya=function(){S?y._pendingDfd=C.oAuthSignIn(y.resUrl_,fa,X,y.options_).addCallbacks(G,I):(za=Error("User is not signed in."),za.name="identity-manager:not-authenticated",za.code="IdentityManagerBase.6",za.log=!!q.isDebug,I(za))};C._doPortalSignIn(y.resUrl_)?y._pendingDfd=C._getPlatformSelf(fa.server,X.appId).then(function(va){var Fa=va.portalUrl;!Fa||l.hasSameOrigin(Fa,window.location.origin,!0)?(qa=new D({userId:va.username,server:fa.server,expires:Date.now()+
1E3*va.expires_in,token:va.token}),G(qa)):ya()})["catch"](ya):ya()}}else if(S)C._checkProtocol(y.resUrl_,fa,I,y.admin_)&&(ea=y.options_,y.admin_&&(ea=ea||{},ea.isAdmin=!0),y._pendingDfd=C.signIn(y.resUrl_,fa,ea).addCallbacks(G,I));else{var za=Error("User is not signed in.");za.name="identity-manager:not-authenticated";za.code="IdentityManagerBase.6";za.log=!!q.isDebug;I(za)}},R=function(){var ea=y.sinfo_,Y=ea.owningSystemUrl,ba=y.options_,Q;if(ba){var fa=ba.token;var S=ba.error;var X=ba.prompt}(Q=
C._findCredential(Y,{token:fa,resource:y.resUrl_}))||b.some(C.credentials,function(la){this._isIdProvider(Y,la.server)&&(Q=la);return!!Q},C);Q?(ba=C.findCredential(y.resUrl_,Q.userId))?G(ba):B(ea,C._legacyFed)?(ba=Q.toJson(),ba.server=ea.server,ba.resources=null,G(new D(ba))):(y._pendingDfd=C.generateToken(C.findServerInfo(Q.server),null,{serverUrl:y.resUrl_,token:Q.token,ssl:Q.ssl})).addCallbacks(function(la){G(new D({userId:Q.userId,server:ea.server,token:la.token,expires:n.isDefined(la.expires)?
Number(la.expires):null,ssl:!!la.ssl,isAdmin:y.admin_,validity:la.validity}))},I):(C._busy=null,fa&&(y.options_.token=null),(y._pendingDfd=C.getCredential(Y.replace(/\/?$/,"/sharing"),{resource:y.resUrl_,owningTenant:ea.owningTenant,token:fa,error:S,prompt:X})).addCallbacks(function(la){C._enqueue(y.resUrl_,y.sinfo_,y.options_,y,y.admin_)},function(la){I(la)}))};this._errbackFunc=I;var Z=y.sinfo_.owningSystemUrl,W=this._isServerRsrc(y.resUrl_),da=y.sinfo_._restInfoDfd;da?da.addCallbacks(function(ea){var Y=
y.sinfo_;Y._restInfoDfd&&(Y.adminTokenServiceUrl=Y._restInfoDfd.adminUrl_,Y._restInfoDfd=null,Y.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,ea)||a.getObject("authInfo.tokenServiceUrl",!1,ea)||a.getObject("tokenServiceUrl",!1,ea),Y.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,ea),Y.currentVersion=ea.currentVersion,Y.owningTenant=ea.owningTenant,(ea=Y.owningSystemUrl=ea.owningSystemUrl)&&C._portals.push(ea));W&&Y.owningSystemUrl?R():O()},function(){y.sinfo_._restInfoDfd=
null;var ea=Error("Unknown resource - could not find token service endpoint.");ea.name="identity-manager:server-identification-failed";ea.code="IdentityManagerBase.2";ea.log=!!q.isDebug;I(ea)}):W&&Z?R():y.sinfo_._selfReq?y.sinfo_._selfReq.selfDfd.then(function(ea){var Y={};if(ea){var ba=ea.user&&ea.user.username;Y.username=ba;Y.allSSL=ea.allSSL;var Q=ea.supportsOAuth;var fa=parseFloat(ea.currentVersion);if("multitenant"===ea.portalMode)var S=ea.customBaseUrl;y.sinfo_.currentVersion=fa}y.sinfo_.webTierAuth=
!!ba;return ba&&C.normalizeWebTierAuth?C.generateToken(y.sinfo_,null,{ssl:Y.allSSL}).addBoth(function(X){Y.portalToken=X&&X.token;Y.tokenExpiration=X&&X.expires;return Y}):!ba&&Q&&4.4<=fa&&!C._findOAuthInfo(y.resUrl_)?C._generateOAuthInfo({portalUrl:y.sinfo_.server,customBaseUrl:S,owningTenant:y.sinfo_._selfReq.owningTenant}).always(function(){return Y}):Y}).always(function(ea){y.sinfo_._selfReq=null;ea?O(ea.username,ea.allSSL,ea.portalToken,ea.tokenExpiration):O()}):O()},_generateOAuthInfo:function(y){var C=
this,G=y.portalUrl,I=y.customBaseUrl,O=y.owningTenant;if(y=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var R=window.location.href;var Z=R.indexOf("?");-1<Z&&(R=R.slice(0,Z));Z=R.search(/\/(apps|home)\//);R=-1<Z?R.slice(0,Z):null}y&&R?(this._hasTestedIfAppIsOnPortal=!0,y=r({url:R+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){C.defaultOAuthInfo=new v({appId:"arcgisonline",popupCallbackUrl:R+"/home/oauth-callback.html"})})):(y=new e,y.resolve(),
y=y.promise);return y.then(function(){if(C.defaultOAuthInfo)return G=G.replace(/^http:/i,"https:"),r({url:G+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:O,client_id:C.defaultOAuthInfo.appId,redirect_uri:l.getAbsoluteUrl(C.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(W){if(W.valid){var da=C.defaultOAuthInfo.clone();da.portalUrl=W.urlKey&&I?"https://"+W.urlKey.toLowerCase()+"."+I:G;da.popup=window!==window.top||!(l.hasSameOrigin(G,
window.location.origin)||C._gwDomains.some(function(ea){return ea.regex.test(G)&&ea.regex.test(window.location.origin)}));C.oAuthInfos.push(da)}})})}});var D=F(t,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(y){a.mixin(this,y);this.resources=this.resources||[];n.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var y=this,C=this.resources&&this.resources[0],G=f.id.findServerInfo(this.server),I=G&&G.owningSystemUrl,
O=!!I&&"server"===this.scope,R=O&&B(G,f.id._legacyFed),Z=O&&f.id.findServerInfo(I),W,da=(W=G.webTierAuth)&&f.id.normalizeWebTierAuth,ea=z[this.server];ea=ea&&ea[this.userId];var Y={username:this.userId,password:ea};if(!W||da)if(O&&!Z&&b.some(f.id.serverInfos,function(fa){f.id._isIdProvider(I,fa.server)&&(Z=fa);return!!Z}),W=Z&&f.id.findCredential(Z.server,this.userId),!O||W)if(R)W.refreshToken();else{if(O)var ba={serverUrl:C,token:W&&W.token,ssl:W&&W.ssl};else if(da)Y=null,ba={ssl:this.ssl};else if(ea)this.isAdmin&&
(ba={isAdmin:!0});else{if(C){C=f.id._sanitizeUrl(C);this._enqueued=1;var Q=f.id._enqueue(C,G,null,null,this.isAdmin,this);Q.addCallback(function(){y._enqueued=0;y.refreshServerTokens()}).addErrback(function(){y._enqueued=0})}return Q}return f.id.generateToken(O?Z:G,O?null:Y,ba).addCallback(function(fa){y.token=fa.token;y.expires=n.isDefined(fa.expires)?Number(fa.expires):null;y.creationTime=(new Date).getTime();y.validity=fa.validity;y.onTokenChange();y.refreshServerTokens()}).addErrback(function(){})}},
refreshServerTokens:function(){"portal"===this.scope&&b.forEach(f.id.credentials,function(y){var C=f.id.findServerInfo(y.server),G=C&&C.owningSystemUrl;y!==this&&y.userId===this.userId&&G&&"server"===y.scope&&(f.id._hasSameServerInstance(this.server,G)||f.id._isIdProvider(G,this.server))&&(B(C,f.id._legacyFed)?(y.token=this.token,y.expires=this.expires,y.creationTime=this.creationTime,y.validity=this.validity,y.onTokenChange()):y.refreshToken())},this)},onTokenChange:function(y){clearTimeout(this._refreshTimer);
var C=this.server&&f.id.findServerInfo(this.server),G=(C=C&&C.owningSystemUrl)&&f.id.findServerInfo(C);!1!==y&&(!C||"portal"===this.scope||G&&G.webTierAuth&&!f.id.normalizeWebTierAuth)&&(n.isDefined(this.expires)||n.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var y=b.indexOf(f.id.credentials,
this);-1<y&&f.id.credentials.splice(y,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var y=n.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),C=this.resources;C&&0<C.length&&(y.resources=C.slice());return y},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var y=6E4*this.tokenRefreshBuffer,
C=Math.pow(2,31)-1,G=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>G?G=0:G>C&&(G=C);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),G>y?G-y:G)}});k.Credential=D;return f.IdentityManagerBase=k})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(F,q,a,b,e){F=F(null,{declaredClass:"esri.ServerInfo",constructor:function(g){q.mixin(this,g)},toJson:function(){return e.fixJson({server:this.server,
tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return b.ServerInfo=F})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(F,q,a){q=q(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,
storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(b,e){this.oAuthInfo=b;this.storage=e;this._init()},isValid:function(){var b=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)b=!0;else{var e=Date.now();this.expires>e&&(this.expires-e)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(b=!0)}return b},save:function(){if(!this.storage)return!1;var b=this._load(),
e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){var g=b[e.authNamespace];g||(g=b[e.authNamespace]={});this.appId||(this.appId=e.appId);g[e.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(b))}catch(k){return!1}return!0}return!1},destroy:function(){var b=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&
(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var g=e.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",k=new FormData;k.append("f","json");k.append("auth_token",this.refreshToken||this.token);k.append("client_id",e.appId);k.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(g,k);else{var c=new XMLHttpRequest;c.open("POST",g);c.send(k)}}if(e&&e.authNamespace&&
e.portalUrl&&this.storage&&(g=b[e.authNamespace])){delete g[e.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(b))}catch(d){}}e&&(this.oAuthInfo=e._oAuthCred=null)},_init:function(){var b=this._load(),e=this.oAuthInfo;e&&e.authNamespace&&e.portalUrl&&(b=b[e.authNamespace])&&(b=b[e.portalUrl])&&(this.appId=b.appId,this.codeVerifier=b.codeVerifier,this.expires=b.expires,this.refreshToken=b.refreshToken,this.ssl=b.ssl,this.stateUID=b.stateUID,this.token=b.token,this.userId=b.userId)},
_load:function(){var b={};if(this.storage){var e=this.storage.getItem("esriJSAPIOAuth");if(e)try{b=JSON.parse(e)}catch(g){}}return b}});return F.OAuthCredential=q})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(F,q,a,b,e){var g=a(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(k){b.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,
popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},k)},_oAuthCred:null,toJson:function(){return q.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,
preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new g(this.toJson())}});b.setObject("arcgis.OAuthInfo",g,F);return g})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(F,q,a,b,e,g,k,c){return F("dijit.form.Form",[e,g,k,c],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(d){q.set(this.domNode,"encType",d);b("ie")&&(this.domNode.encoding=d);this._set("encType",d)},reset:function(d){var f={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:d?d.target:this.domNode,target:d?d.target:this.domNode};!1!==this.onReset(f)&&f.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(d){this.reset(d);d.stopPropagation();d.preventDefault();return!1},_onSubmit:function(d){var f=this.constructor.prototype;if(this.execute!=f.execute||this.onExecute!=f.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(d)&&(d.stopPropagation(),d.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),function(F,q,a,b,e,g,k,c,d,f,h,n,p){var l=null,m=null;try{l=window.localStorage,m=window.sessionStorage}catch(t){}var r=window.crypto||window.msCrypto;
return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(t){this._oAuthRedirectFunc=t},oAuthSignIn:function(t,x,v,z){var A=this._oAuthDfd=new c;A.resUrl_=t;A.sinfo_=x;A.oinfo_=v;var B=v._oAuthCred;if(B.storage&&("authorization-code"===v.flowType||"auto"===v.flowType&&!v.popup&&8.4<=x.currentVersion)){var u=r.getRandomValues(new Uint8Array(32));var w=b.base64UrlEncode(u);B.codeVerifier=w;u=r.getRandomValues(new Uint8Array(32));B.stateUID=b.base64UrlEncode(u);B.save()||(B.codeVerifier=w=null)}else B.codeVerifier=null;var D=
this;this._getCodeChallenge(w).then(function(y){var C=!z||!1!==z.oAuthPopupConfirmation;if(!v.popup||!C)return D._doOAuthSignIn(t,x,v,y),A;A.codeChallenge_=y;D._nls||(D._nls=h.identity);D.oAuthDialog||(D.oAuthDialog=D._createOAuthDialog());y=D.oAuthDialog;C=z&&z.error;var G=z&&z.token;q.hide(y.errMsg_);C&&403==C.code&&G&&(f.set(y.errMsg_,"innerHTML",D._nls.forbidden),q.show(y.errMsg_));f.set(y.serverLink_,{title:x.server,innerHTML:-1!==x.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":
x.server});y.show()});return A},setOAuthResponseHash:function(t){t&&("#"===t.charAt(0)&&(t=t.substring(1)),this._processOAuthPopupParams(n.queryToObject(t)))},_createOAuthDialog:function(){var t=this._nls,x=a.substitute(t,this._oAuthDialogContent);x=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},x);var v=new e({title:t.title,content:x,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var z=v.esriIdMgr_._oAuthDfd;
v.hide_();v.esriIdMgr_._doOAuthSignIn(z.resUrl_,z.sinfo_,z.oinfo_,z.codeChallenge_)},cancel_:function(){var z=v.esriIdMgr_._oAuthDfd;v.esriIdMgr_._oAuthDfd=null;v.hide_();var A=Error("ABORTED");A.code="IdentityManager.2";A.log=!!k.isDebug;z.errback(A)},hide_:function(){q.hide(v.errMsg_);v.hide();e._DialogLevelManager.hide(v)}});t=v.domNode;v.btnSubmit_=g.byNode(d.query(".esriIdSubmit",t)[0]);v.btnCancel_=g.byNode(d.query(".esriIdCancel",t)[0]);v.serverLink_=d.query(".serverLink",t)[0];v.errMsg_=d.query(".esriErrorMsg",
t)[0];v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v},_doOAuthSignIn:function(t,x,v,z){var A=this,B=v._oAuthCred,u={portalUrl:v.portalUrl};!v.popup&&v.preserveUrlHash&&window.location.hash&&(u.hash=window.location.hash);B.stateUID&&(u.uid=B.stateUID);u={client_id:v.appId,response_type:B.codeVerifier?"code":"token",state:JSON.stringify(u),expiration:v.expiration,locale:v.locale,redirect_uri:this._getRedirectURI(v,
!!B.codeVerifier)};v.forceLogin&&(u.force_login=!0);v.forceUserId&&v.userId&&(u.prepopulatedusername=v.userId);!v.popup&&this._doPortalSignIn(t)&&(u.redirectToUserOrgUrl=!0);B.codeVerifier&&(u.code_challenge=z||B.codeVerifier,u.code_challenge_method=z?"S256":"plain");z=v.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";B=z+"?"+n.objectToQuery(u);if(v.popup){var w=window.open(B,"esriJSAPIOAuth",v.popupWindowFeatures);w?(w.focus(),this._oAuthDfd.oAuthWin_=w,this._oAuthIntervalId=setInterval(function(){if(w.closed){clearInterval(A._oAuthIntervalId);
A._oAuthOnPopupHandle.remove();var D=A._oAuthDfd;if(D){var y=Error("ABORTED");y.code="IdentityManager.2";y.log=!!k.isDebug;D.errback(y)}}},500),A._oAuthOnPopupHandle=p.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(D){"arcgis:auth:hash"===D.type?A.setOAuthResponseHash(D.detail):A._setOAuthResponseQueryString(D.detail)})):(t=Error("ABORTED"),t.name="identity-manager:user-aborted",t.code="IdentityManager.2",t.log=!!k.isDebug,this._oAuthDfd.errback(t))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:u,authorizeUrl:z,resourceUrl:t,serverInfo:x,oAuthInfo:v}):window.location.href=B},_getCodeChallenge:function(t){if(t&&window.isSecureContext)return t=(new TextEncoder).encode(t),r.subtle.digest("SHA-256",t).then(function(x){return b.base64UrlEncode(new Uint8Array(x))});t=new c;t.resolve(null);return t},_getRedirectURI:function(t,x){var v=window.location.href.replace(/#.*$/,"");if(t.popup)return b.getAbsoluteUrl(t.popupCallbackUrl);
if(x){var z=b.urlToObject(v);if(z.query)return"code error error_description message_code persist state".split(" ").forEach(function(A){delete z.query[A]}),(v=n.objectToQuery(z.query))?z.path+"?"+v:z.path}return v},_processOAuthPopupParams:function(t){var x=this._oAuthDfd;this._oAuthDfd=null;if(x)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),t.error){var v="access_denied"===t.error;t=Error(v?"ABORTED":"OAuth: "+t.error+" - "+t.error_description);
t.name=v?"identity-manager:user-aborted":"identity-manager:authentication-failed";t.code="IdentityManagerBase."+(v?2:3);t.log=!!k.isDebug;x.errback(t)}else this._processOAuthResponseParams(t,x.oinfo_,x.sinfo_).then(function(z){x.resolve(z)})["catch"](function(z){x.reject(z)})},_processOAuthResponseParams:function(t,x,v){var z=x._oAuthCred;if(t.code){var A=z.codeVerifier;z.codeVerifier=null;z.stateUID=null;z.save();return this._getOAuthToken(v.server,t.code,x.appId,this._getRedirectURI(x,!0),A).then(function(u){var w=
new F({userId:u.username,server:v.server,token:u.access_token,expires:Date.now()+1E3*u.expires_in,ssl:u.ssl,oAuthState:t.state,_oAuthCred:z});x.userId=w.userId;z.storage=u.persist?l:m;z.refreshToken=u.refresh_token;z.token=null;z.expires=u.refresh_token_expires_in?Date.now()+1E3*u.refresh_token_expires_in:null;z.userId=w.userId;z.ssl=w.ssl;z.save();return w})}A=new F({userId:t.username,server:v.server,token:t.access_token,expires:Date.now()+1E3*Number(t.expires_in),ssl:"true"===t.ssl,oAuthState:t.state,
_oAuthCred:z});x.userId=A.userId;z.storage=t.persist?l:m;z.refreshToken=null;z.token=A.token;z.expires=A.expires;z.userId=A.userId;z.ssl=A.ssl;z.save();var B=new c;B.resolve(A);return B},_setOAuthResponseQueryString:function(t){t&&("?"===t.charAt(0)&&(t=t.substring(1)),this._processOAuthPopupParams(n.queryToObject(t)))}}})},"esri/core/events":function(){define([],function(){return{on:function(F,q,a){if(!F||"function"!==typeof F.on&&"function"!==typeof F.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in F)return F.on(q,a);if(Array.isArray(q)){for(var b=q.slice(),e=0;e<b.length;e++)F.addEventListener(b[e],a);return{remove:function(){for(var g=0;g<b.length;g++)F.removeEventListener(b[g],a)}}}F.addEventListener(q,a);return{remove:function(){F.removeEventListener(q,a)}}}}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p){function l(B){return c.create(function(u){function w(y){if(y=n.receiveMessage(y))switch(y.type){case A:y=B;var C=e.workers.loaderUrl||h.DEFAULT_LOADER_URL;if(null!=e["default"]){var G=a({},e);delete G["default"];G=JSON.parse(JSON.stringify(G))}else G=JSON.parse(JSON.stringify(e));var I=e.workers.loaderConfig;I=h["default"]({baseUrl:I.baseUrl,locale:b.locale,has:a({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":d("esri-secure-context"),
"esri-workers-supports-transfer-arraybuffer":d("esri-workers-supports-transfer-arraybuffer"),"events-keypress-typed":0,"host-webworker":1},I.has),map:a({},I.map),paths:a({},I.paths),packages:I.packages||[]});y.postMessage({type:z,configure:{esriConfig:G,loaderUrl:C,loaderConfig:I}});break;case v:B.removeEventListener("message",w),B.removeEventListener("error",D),u(B)}}function D(y){y.preventDefault();B.removeEventListener("message",w);B.removeEventListener("error",D);t.warn("Failed to create Worker. Fallback to execute module in main thread",
y);B=new p;B.addEventListener("message",w);B.addEventListener("error",D)}B.addEventListener("message",w);B.addEventListener("error",D)})}Object.defineProperty(q,"__esModule",{value:!0});var m=f.normalize(F.toUrl("./worker.js")),r=!f.hasSameOrigin(m,location.href),t=k.getLogger("esri.core.workers"),x=null,v=n.MessageType.CONFIGURED,z=n.MessageType.CONFIGURE,A=n.MessageType.HANDSHAKE;q.createWorker=function(){if(!d("esri-workers"))return l(new p);if(!r){var B=void 0;try{B=new Worker(m)}catch(u){t.warn("Failed to create Worker. Fallback to execute module in main thread",
event),B=new p}return l(B)}x||(x=g(m,{responseType:"text"}));return x.then(function(u){return new Worker(URL.createObjectURL(new Blob([u.data],{type:"text/javascript"})))})["catch"](function(u){t.warn("Failed to create Worker. Fallback to execute module in main thread",u);return new p}).then(function(u){return l(u)})}})},"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(F,q,a,b,e){function g(){var f={available:!1,
version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},h=document.createElement("canvas");if(!h)return f;var n=e.createContext(h,{failIfMajorPerformanceCaveat:!0},"webgl");!n&&(n=e.createContext(h,{},"webgl"))&&(f.majorPerformanceCaveat=!0);if(!n)return f;h=n.getParameter(n.VERSION);if(!h)return f;if(h=h.match(/^WebGL\s+([\d.]*)/))f.version=parseFloat(h[1]),f.available=.94<=f.version,h=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,
n.HIGH_FLOAT),f.supportsHighPrecisionFragment=h&&0<h.precision,f.supportsVertexShaderSamplers=0<n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f.supportsElementIndexUint=null!==n.getExtension("OES_element_index_uint"),f.supportsStandardDerivatives=null!==n.getExtension("OES_standard_derivatives");return f}function k(){var f={available:!1,version:0},h=document.createElement("canvas");if(!h)return f;h=e.createContext(h,{},"webgl2");if(!h)return f;f.available=!0;h=h.getParameter(h.VERSION);if(!h)return f;
if(h=h.match(/^WebGL\s+([\d.]*)/))f.version=parseFloat(h[1]);return f}(function(){var f=navigator.userAgent,h=f.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);f=f.match(/iPhone/i);h&&a.add("esri-mobile",h);f&&a.add("esri-iPhone",f);a.add("esri-phonegap",!!b.cordova);a.add("esri-cors",a("esri-phonegap")||"XMLHttpRequest"in b&&"withCredentials"in new XMLHttpRequest);a.add("esri-geolocation",function(){return!!navigator.geolocation});a.add("esri-canvas-svg-support",function(){return!(a("trident")||
a("ie"))});a.add("esri-secure-context",function(){if("isSecureContext"in b)return b.isSecureContext;if(b.location&&b.location.origin)return 0===b.location.origin.indexOf("https:")});a.add("esri-wasm","WebAssembly"in b);a("host-webworker")||(a.add("esri-workers","Worker"in b),a.add("esri-script-sandbox",function(){return"MessageChannel"in b&&"HTMLIFrameElement"in b&&"sandbox"in HTMLIFrameElement.prototype}),a.add("esri-url-encodes-apostrophe",function(){var n=b.document.createElement("a");n.href="?'";
return-1<n.href.indexOf("?%27")}),c||(c=g()),a.add("esri-webgl",c.available),a.add("esri-webgl-high-precision-fragment",c.supportsHighPrecisionFragment),a.add("esri-webgl-vertex-shader-samplers",c.supportsVertexShaderSamplers),a.add("esri-webgl-element-index-uint",c.supportsElementIndexUint),a.add("esri-webgl-standard-derivatives",c.supportsStandardDerivatives),a.add("esri-webgl-major-performance-caveat",c.majorPerformanceCaveat),a.add("esri-featurelayer-webgl-labeling",!0),d||(d=k()),a.add("esri-webgl2",
d.available))})();var c=null,d=null;return a})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(F,q){function a(k,c,d){void 0===c&&(c={});switch(d){case "webgl":var f=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":f=["webgl2"];break;default:f=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}d=null;for(var h=0;h<f.length;h++){var n=f[h];try{d=k.getContext(n,c)}catch(p){}if(d)break}return d}function b(k,c){var d=k.parentNode;
d&&(d.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+c+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(q,"__esModule",{value:!0});q.createContextOrErrorHTML=function(k,c,d){void 0===c&&(c={});if(!window.WebGLRenderingContext)return b(k,e),null;c=a(k,c,d);return c?c:(b(k,g),null)};q.createContext=
a;var e='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',g='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(F,q,a,b,e){Object.defineProperty(q,
"__esModule",{value:!0});q.DEFAULT_LOADER_URL=e.makeAbsolute(e.removeQueryParameters(F.toUrl("./worker-init.js")));q.DEFAULT_CONFIG={baseUrl:function(){var g=e.removeQueryParameters(F.toUrl("dojo/x.js"));return e.makeAbsolute(g.slice(0,g.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",
main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};q["default"]=function(g){var k={async:g.async,isDebug:g.isDebug,locale:g.locale,baseUrl:g.baseUrl,has:a({},g.has),map:a({},g.map),packages:g.packages&&g.packages.concat()||[],paths:a({},g.paths)};g.hasOwnProperty("async")||
(k.async=!0);g.hasOwnProperty("isDebug")||(k.isDebug=!1);g.baseUrl||(k.baseUrl=q.DEFAULT_CONFIG.baseUrl);q.DEFAULT_CONFIG.packages.forEach(function(h){a:{for(var n=k.packages,p=0;p<n.length;p++)if(n[p].name===h.name)break a;h=a({},h);p=e.removeQueryParameters(F.toUrl(h.name+"/x.js"));p=p.slice(0,p.length-5);h.location=e.makeAbsolute(p);n.push(h)}});g=k.map=k.map||{};for(var c=0,d=Object.keys(q.DEFAULT_CONFIG.map);c<d.length;c++){var f=d[c];g[f]||(g[f]=q.DEFAULT_CONFIG.map[f])}return k}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require",
"exports","dojo/has","../global","./utils"],function(F,q,a,b,e){var g=function(){return function(){var d=this,f=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(h){d[h]=function(){for(var n=[],p=0;p<arguments.length;p++)n[p]=arguments[p];return f[h].apply(f,n)}})}}(),k=b.MutationObserver||b.WebKitMutationObserver,c=function(){if(b.process&&b.process.nextTick)var d=function(n){b.process.nextTick(n)};else if(b.Promise)d=function(n){b.Promise.resolve().then(n)};
else if(k){var f=[],h=document.createElement("div");(new k(function(){for(;0<f.length;)f.shift()()})).observe(h,{attributes:!0});d=function(n){f.push(n);h.setAttribute("queueStatus","1")}}return d}();return function(){function d(){this._dispatcher=new g;this._isInitialized=!1;this._workerPostMessage({type:e.MessageType.HANDSHAKE})}d.prototype.terminate=function(){};Object.defineProperty(d.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(f){this._onmessageHandler&&
this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=f)&&this.addEventListener("message",f)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(f){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=f)&&this.addEventListener("error",f)},enumerable:!0,configurable:!0});d.prototype.postMessage=function(f,h){var n=this;c(function(){n._workerMessageHandler(new MessageEvent("message",
{data:f}))})};d.prototype.dispatchEvent=function(f){return this._dispatcher.dispatchEvent(f)};d.prototype.addEventListener=function(f,h,n){this._dispatcher.addEventListener(f,h,n)};d.prototype.removeEventListener=function(f,h,n){this._dispatcher.removeEventListener(f,h,n)};d.prototype._workerPostMessage=function(f,h){var n=this;c(function(){n.dispatchEvent(new MessageEvent("message",{data:f}))})};d.prototype._workerMessageHandler=function(f){var h=this;if(f=e.receiveMessage(f)){var n=f.jobId;switch(f.type){case e.MessageType.CONFIGURE:this._isInitialized||
this._workerPostMessage({type:e.MessageType.CONFIGURED});break;case e.MessageType.OPEN:f=f.modulePath,a("esri-webpack")?F(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline","esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",f],function(p,l,m,r,t,x,v,z){switch(z){case "esri/views/vectorTiles/WorkerTileHandler":break;
case "esri/views/2d/layers/features/Pipeline":l=m;break;case "esri/views/3d/layers/PointCloudWorker":l=r;break;case "esri/views/3d/layers/SceneLayerWorker":l=t;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":l=x;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":l=v;break;default:l=z}p=p.connect(l);h._workerPostMessage({type:e.MessageType.OPENED,jobId:n,data:p})}):F(["./RemoteClient",f],function(p,l){var m=p.connect(l);h._workerPostMessage({type:e.MessageType.OPENED,
jobId:n,data:m})})}}};return d}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/has ../../core/promiseUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),function(F,q,a,b,e,g,k){var c;a("stable-symbol-rendering")&&(c=new Set);return function(){function d(f,h,n){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=f;this.height=h;this._glyphSource=
n;this._binPack=new g(f-4,h-4);this._glyphData.push(new Uint8Array(f*h));this._dirties.push(!0);this._textures.push(void 0)}d.prototype.getGlyphItems=function(f,h,n){var p=this,l=[],m=this._glyphSource,r=new Set;f=1/256;for(var t=0;t<n.length;t++)r.add(Math.floor(n[t]*f));var x=[];r.forEach(function(v){if(256>=v){var z=h+v;p._rangePromises.has(z)?x.push(p._rangePromises.get(z)):(v=m.getRange(h,v).always(function(){p._rangePromises["delete"](z)}),p._rangePromises.set(z,v),x.push(v))}});return b.all(x).then(function(v){v=
p._glyphIndex[h];v||(v={},p._glyphIndex[h]=v);if(a("stable-symbol-rendering")){c.clear();for(var z=0;z<n.length;z++){var A=n[z];c.add(A)}var B=[];r.forEach(function(da){B.push(da)});B.sort();A=[];for(z=0;z<B.length;z++)for(var u=B[z],w=0;256>w;++w)A.push(256*u+w)}else A=n;z=0;for(u=A;z<u.length;z++)if(A=u[z],w=v[A]){if(!a("stable-symbol-rendering")||c.has(A))l[A]={rect:w.rect,metrics:w.metrics,page:w.page}}else{var D=m.getGlyph(h,A);if(D&&D.metrics){w=D.metrics;var y=void 0;if(0===w.width)y=new e(0,
0,0,0);else{var C=w.width+6,G=w.height+6,I=C%4?4-C%4:4,O=G%4?4-G%4:4;1===I&&(I=5);1===O&&(O=5);y=p._binPack.allocate(C+I,G+O);y.isEmpty&&(p._dirties[p._currentPage]||(p._glyphData[p._currentPage]=null),p._currentPage=p._glyphData.length,p._glyphData.push(new Uint8Array(p.width*p.height)),p._dirties.push(!0),p._textures.push(void 0),p._binPack=new g(p.width-4,p.height-4),y=p._binPack.allocate(C+I,G+O));I=p._glyphData[p._currentPage];D=D.bitmap;var R=O=void 0;if(D)for(var Z=0;Z<G;Z++){O=C*Z;R=p.width*
(y.y+Z+1)+y.x;for(var W=0;W<C;W++)I[R+W+1]=D[O+W]}}v[A]={rect:y,metrics:w,tileIDs:null,page:p._currentPage};if(!a("stable-symbol-rendering")||c.has(A))l[A]={rect:y,metrics:w,page:p._currentPage};p._dirties[p._currentPage]=!0}}return l})};d.prototype.removeGlyphs=function(f){for(var h in this._glyphIndex){var n=this._glyphIndex[h];if(n){var p=void 0,l;for(l in n)if(p=n[l],p.tileIDs["delete"](f),0===p.tileIDs.size){for(var m=this._glyphData[p.page],r=p.rect,t=void 0,x=void 0,v=0;v<r.height;v++)for(t=
this.width*(r.y+v)+r.x,x=0;x<r.width;x++)m[t+x]=0;delete n[l];this._dirties[p.page]=!0}}}};d.prototype.bind=function(f,h,n,p){void 0===p&&(p=0);this._textures[n]||(this._textures[n]=new k(f,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var l=this._textures[n];l.setSamplingMode(h);this._dirties[n]&&l.setData(this._glyphData[n]);f.bindTexture(l,p);this._dirties[n]=!1};d.prototype.dispose=function(){this._binPack=null;for(var f=0,h=this._textures;f<
h.length;f++){var n=h[f];n&&n.dispose()}this._textures.length=0};return d}()})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require","exports"],function(F,q){return function(){function a(b,e,g,k){void 0===b&&(b=0);void 0===e&&(e=0);void 0===g&&(g=0);void 0===k&&(k=0);this.x=b;this.y=e;this.width=g;this.height=k}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require",
"exports","./Rect"],function(F,q,a){return function(){function b(e,g){this._height=this._width=0;this._free=[];this._width=e;this._height=g;this._free.push(new a(0,0,e,g))}Object.defineProperty(b.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});b.prototype.allocate=function(e,g){if(e>this._width||g>this._height)return new a;for(var k=null,c=-1,d=0;d<
this._free.length;++d){var f=this._free[d];e<=f.width&&g<=f.height&&(null===k||f.y<=k.y&&f.x<=k.x)&&(k=f,c=d)}if(null===k)return new a;this._free.splice(c,1);k.width<k.height?(k.width>e&&this._free.push(new a(k.x+e,k.y,k.width-e,g)),k.height>g&&this._free.push(new a(k.x,k.y+g,k.width,k.height-g))):(k.width>e&&this._free.push(new a(k.x+e,k.y,k.width-e,k.height)),k.height>g&&this._free.push(new a(k.x,k.y+g,e,k.height-g)));return new a(k.x,k.y,e,g)};b.prototype.release=function(e){for(var g=0;g<this._free.length;++g){var k=
this._free[g];if(k.y===e.y&&k.height===e.height&&k.x+k.width===e.x)k.width+=e.width;else if(k.x===e.x&&k.width===e.width&&k.y+k.height===e.y)k.height+=e.height;else if(e.y===k.y&&e.height===k.height&&e.x+e.width===k.x)k.x=e.x,k.width+=e.width;else if(e.x===k.x&&e.width===k.width&&e.y+e.height===k.y)k.y=e.y,k.height+=e.height;else continue;this._free.splice(g,1);this.release(e)}this._free.push(e)};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require","exports",
"../../request","../../core/pbf","../../core/promiseUtils"],function(F,q,a,b,e){var g=function(){function c(d){this._metrics=[];this._bitmaps=[];if(d)for(;d.next();)switch(d.tag()){case 1:for(var f=d.getMessage();f.next();)switch(f.tag()){case 3:for(var h=f.getMessage(),n=void 0,p=void 0,l=void 0,m=void 0,r=void 0,t=void 0,x=void 0;h.next();)switch(h.tag()){case 1:n=h.getUInt32();break;case 2:p=h.getBytes();break;case 3:l=h.getUInt32();break;case 4:m=h.getUInt32();break;case 5:r=h.getSInt32();break;
case 6:t=h.getSInt32();break;case 7:x=h.getUInt32();break;default:h.skip()}n&&(this._metrics[n]={width:l,height:m,left:r,top:t,advance:x},this._bitmaps[n]=p);break;default:f.skip()}break;default:d.skip()}}c.prototype.getMetrics=function(d){return this._metrics[d]};c.prototype.getBitmap=function(d){return this._bitmaps[d]};return c}(),k=function(){function c(){this._ranges=[]}c.prototype.getRange=function(d){return this._ranges[d]};c.prototype.addRange=function(d,f){this._ranges[d]=f};return c}();
return function(){function c(d){this._glyphInfo={};this._baseURL=d}c.prototype.getRange=function(d,f){var h=this._getFontStack(d);if(h.getRange(f))return e.resolve();var n=256*f,p=n+255;n=this._baseURL.replace("{fontstack}",d).replace("{range}",n+"-"+p);return a(n,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(l){h.addRange(f,new g(new b(new Uint8Array(l.data),new DataView(l.data))))})["catch"](function(){h.addRange(f,new g)})};c.prototype.getGlyph=function(d,f){var h=this._getFontStack(d);
if(h){var n=Math.floor(f/256);if(!(256<n)&&(h=h.getRange(n)))return{metrics:h.getMetrics(f),bitmap:h.getBitmap(f)}}};c.prototype._getFontStack=function(d){var f=this._glyphInfo[d];f||(f=this._glyphInfo[d]=new k);return f};return c}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(F,q){return function(){function a(b,e,g,k){this._tag=0;this._dataType=99;this._data=b;this._dataView=e;this._pos=g||0;this._end=k||b.byteLength}a.prototype.clone=function(){return new a(this._data,
this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(b){for(;;){if(this._pos===this._end)return!1;var e=this._decodeVarint();this._tag=e>>3;this._dataType=e&7;if(!b||b===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=
function(){var b=4294967295;b=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return b};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=
function(){var b=this.getUInt32();return b>>>1^-(b&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var b=0!==this._data[this._pos];this._skip(1);return b};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var b=this._dataView,e=this._pos;b=b.getUint32(e,!0)+4294967296*b.getUint32(e+4,!0);this._skip(8);return b};a.prototype.getSFixed64=function(){var b=this._dataView,e=this._pos;b=b.getUint32(e,!0)+4294967296*
b.getInt32(e+4,!0);this._skip(8);return b};a.prototype.getDouble=function(){var b=this._dataView.getFloat64(this._pos,!0);this._skip(8);return b};a.prototype.getFixed32=function(){var b=this._dataView.getUint32(this._pos,!0);this._skip(4);return b};a.prototype.getSFixed32=function(){var b=this._dataView.getInt32(this._pos,!0);this._skip(4);return b};a.prototype.getFloat=function(){var b=this._dataView.getFloat32(this._pos,!0);this._skip(4);return b};a.prototype.getString=function(){var b=this._getLength(),
e=this._pos;e=this._toString(this._data,e,e+b);this._skip(b);return e};a.prototype.getBytes=function(){var b=this._getLength(),e=this._pos;e=this._toBytes(this._data,e,e+b);this._skip(b);return e};a.prototype.getMessage=function(){var b=this._getLength(),e=this._pos;e=new a(this._data,this._dataView,e,e+b);this._skip(b);return e};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);
break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(b){if(this._pos+b>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=b};a.prototype._decodeVarint=function(){var b=this._data,e=this._pos,g=0;if(10<=this._end-e){var k=b[e++];g|=k&127;if(0!==(k&128)&&(k=b[e++],g|=(k&127)<<7,0!==(k&128)&&(k=b[e++],g|=(k&127)<<14,0!==(k&128)&&(k=b[e++],g|=(k&127)<<21,0!==(k&128)&&(k=b[e++],g+=268435456*(k&127),0!==(k&128)&&(k=b[e++],g+=34359738368*(k&127),0!==(k&128)&&
(k=b[e++],g+=4398046511104*(k&127),0!==(k&128)&&(k=b[e++],g+=562949953421312*(k&127),0!==(k&128)&&(k=b[e++],g+=72057594037927936*(k&127),0!==(k&128)&&(k=b[e++],g+=0x7fffffffffffffff*(k&127),0!==(k&128)))))))))))throw Error("Varint too long!");}else{for(var c=1;e!==this._end;){k=b[e];if(0===(k&128))break;++e;g+=(k&127)*c;c*=128}if(e===this._end)throw Error("Varint overrun!");++e;g+=k*c}this._pos=e;return g};a.prototype._decodeSVarint=function(){var b=this._decodeVarint();return b%2?-(b+1)/2:b/2};a.prototype._getLength=
function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(b,e,g){var k="",c="";for(g=Math.min(this._end,g);e<g;++e){var d=b[e];d&128?c+="%"+d.toString(16):(k+=decodeURIComponent(c)+String.fromCharCode(d),c="")}c.length&&(k+=decodeURIComponent(c));return k};a.prototype._toBytes=function(b,e,g){g=Math.min(this._end,g);return new Uint8Array(b.buffer,e,g-e)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),
function(F,q,a,b,e,g){return function(){function k(c,d,f){void 0===f&&(f=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;this._pageWidth=c;this._pageHeight=d;0<f&&(this._maxItemSize=f);this._binPack=new e(c-4,d-4)}k.prototype.getWidth=function(c){return c>=this._size.length?-1:this._size[c][0]};k.prototype.getHeight=function(c){return c>=this._size.length?-1:this._size[c][1]};
k.prototype.setSpriteSource=function(c){this.dispose();this.pixelRatio=c.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new e(this._pageWidth-4,this._pageHeight-4);var d=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=d;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=c};k.prototype.getSpriteItem=function(c,d){void 0===d&&(d=!1);var f=this._mosaicRects[c];if(f)return f;
if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;f=this._sprites.getSpriteInfo(c);if(!f||!f.width||!f.height||0>f.width||0>f.height)return null;var h=f.width,n=f.height,p=this._allocateImage(h,n),l=p[0],m=p[1];if(0>=l.width)return null;this._copy(l,f,m,p[2],d);f={rect:l,width:h,height:n,anchorX:0,anchorY:0,sdf:f.sdf,pixelRatio:f.pixelRatio,page:m};return this._mosaicRects[c]=f};k.prototype.preloadSpriteItems=function(){for(var c=0,d=this._sprites.spriteNames;c<d.length;c++)this.getSpriteItem(d[c],
!0)};k.prototype.getSpriteItems=function(c){for(var d={},f=0;f<c.length;f++){var h=c[f];d[h]=this.getSpriteItem(h)}return d};k.prototype.getMosaicItemPosition=function(c,d){var f=this.getSpriteItem(c,d),h=f&&f.rect;if(!h)return null;h.width=f.width;h.height=f.height;return{size:[f.width,f.height],tl:[(h.x+2)/this._size[f.page][0],(h.y+2)/this._size[f.page][1]],br:[(h.x+2+f.width)/this._size[f.page][0],(h.y+2+f.height)/this._size[f.page][1]],page:f.page}};k.prototype.bind=function(c,d,f,h){void 0===
f&&(f=0);void 0===h&&(h=0);this._textures[f]||(this._textures[f]=new g(c,{pixelFormat:6408,dataType:5121,width:this._size[f][0],height:this._size[f][1]},new Uint8Array(this._mosaicsData[f].buffer)));var n=this._textures[f];n.setSamplingMode(d);this._dirties[f]&&n.setData(new Uint8Array(this._mosaicsData[f].buffer));c.bindTexture(n,h);this._dirties[f]=!1};k._copyBits=function(c,d,f,h,n,p,l,m,r,t,x){var v=h*d+f;l=m*p+l;if(x)for(l-=p,x=-1;x<=t;x++,v=((x+t)%t+h)*d+f,l+=p)for(m=-1;m<=r;m++)n[l+m]=c[v+
(m+r)%r];else for(x=0;x<t;x++){for(m=0;m<r;m++)n[l+m]=c[v+m];v+=d;l+=p}};k.prototype._copy=function(c,d,f,h,n,p){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(f>=this._mosaicsData.length)){var l=new Uint32Array(p?p.buffer:this._sprites.image.buffer);k._copyBits(l,p?d.width:this._sprites.width,d.x,d.y,this._mosaicsData[f],h[0],c.x+2,c.y+2,d.width,d.height,n);this._dirties[f]=!0}};k.prototype._allocateImage=function(c,d){c+=2;d+=2;var f=Math.max(c,d);if(this._maxItemSize&&this._maxItemSize<
f){f=Math.pow(2,Math.ceil(a.log2(c)));var h=Math.pow(2,Math.ceil(a.log2(d))),n=new b(0,0,c,d);this._mosaicsData.push(new Uint32Array(f*h));this._dirties.push(!0);this._size.push([f,h]);this._textures.push(void 0);return[n,this._mosaicsData.length-1,[f,h]]}f=c%4?4-c%4:4;h=d%4?4-d%4:4;1===f&&(f=5);1===h&&(h=5);f=this._binPack.allocate(c+f,d+h);return 0>=f.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*
this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new e(this._pageWidth-4,this._pageHeight-4),this._allocateImage(c,d)):[f,this._currentPage,[this._pageWidth,this._pageHeight]]};k.prototype.dispose=function(){this._binPack=null;this._mosaicRects={};for(var c=0,d=this._textures;c<d.length;c++){var f=d[c];f&&f.dispose()}this._textures.length=0};return k}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred ../../kernel ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),
function(F,q,a,b,e,g,k,c,d){return function(){function f(h,n){this.baseURL=h;this.devicePixelRatio=n;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(f.prototype,"spriteNames",{get:function(){var h=[],n;for(n in this._spritesData)h.push(n);h.sort();return h},enumerable:!0,configurable:!0});f.prototype.getSpriteInfo=function(h){return this._spritesData[h]};f.prototype.load=function(){var h=this;this.loadStatus="loading";
return this.baseURL?this._loadSprites().then(function(){h.loadStatus="loaded";return h})["catch"](function(n){h.loadStatus="failed";return h}):c.resolve(this)};f.prototype._loadSprites=function(){var h=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var n=this.baseURL,p=this._isRetina?"@2x":"";return k(n+p+".json",{callbackParamName:"callback",responseType:"json"}).then(function(l){var m=Object.keys(l.data);if(!m||0===m.length||1===m.length&&"_ssl"===m[0])return c.resolve(null);h._spritesData=
l.data;var r=new e,t=new Image;t.crossOrigin="anonymous";t.onload=function(){t.onload=null;h.width=t.width;h.height=t.height;var x=document.createElement("canvas");x.width=t.width;x.height=t.height;x=x.getContext("2d");x.drawImage(t,0,0,t.width,t.height);x=x.getImageData(0,0,t.width,t.height);x=new Uint8Array(x.data);for(var v,z=0;z<x.length;z+=4)v=x[z+3]/255,x[z]*=v,x[z+1]*=v,x[z+2]*=v;h.image=x;r.resolve()};t.onerror=function(){h._spritesData=null;r.reject()};l=""+n+p+".png";g.id&&(m=g.id.findCredential(l))&&
m.token&&(l+="?token\x3d"+m.token);t.src=d.addProxy(l);return r})};return f}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports","../../core/promiseUtils","../../layers/support/TilemapCache","../2d/tiling/TileKey"],function(F,q,a,b,e){return function(){function g(k){if(k instanceof b)this._tilemapCache=k;else if(k&&"index"in k)this._tilemap=k.index;else throw Error("Invalid tilemap!");}g.prototype.dataKey=function(k){if(this._tilemapCache){var c=k.level,
d=k.row,f=k.col,h=new e(k);return this._tilemapCache.fetchAvailabilityUpsample(c,d,f,h).then(function(){return h})["catch"](function(n){if(n&&"cancel"===n.dojoType)throw n;h.level=c;h.row=d;h.col=f;return h})}return this._getIndexedDataKey(k)};g.prototype.forEach=function(k,c,d,f,h){this._callback=h;this._maxLevel=c+k;this._forEach(this._tilemap,c,d,f)};g.prototype._forEach=function(k,c,d,f){0!==k&&(this._callback(c,d,f),c!==this._maxLevel&&"object"===typeof k&&(this._forEach(k[0],c+1,2*d,2*f),this._forEach(k[1],
c+1,2*d,2*f+1),this._forEach(k[2],c+1,2*d+1,2*f),this._forEach(k[3],c+1,2*d+1,2*f+1)))};g.prototype._getIndexedDataKey=function(k){var c=[k];if(0>k.level||0>k.row||0>k.col||0<k.row>>k.level||0<k.col>>k.level)return a.resolve(null);for(;0!==k.level;)k=new e(k.level-1,k.row>>1,k.col>>1,k.world),c.push(k);k=this._tilemap;var d=c.pop();if(1===k)return a.resolve(d);for(;c.length;){var f=c.pop();var h=(f.col&1)+((f.row&1)<<1);if(k)if(0===k[h]){d=null;break}else if(1===k[h]){d=f;break}else d=f,k=k[h]}return a.resolve(d)};
return g}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(F,q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v,z,A){function B(w){return{state:w.state,pixelRatio:w.pixelRatio,stationary:w.stationary}}var u={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(w){function D(){var y=null!==w&&w.apply(this,arguments)||this;y._clipData=new Float32Array(8);y._upperLeft=l.create();y._upperRight=l.create();y._lowerLeft=l.create();y._lowerRight=l.create();y._mat2=p.create();y._clipRendererInitialized=!1;y._contextVersion=null;y._labelFader=new k["default"](y);
return y}a(D,w);Object.defineProperty(D.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});D.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};D.prototype.createElement=function(){var y=document.createElement("canvas");y.setAttribute("class","esri-display-object");return y};D.prototype.setElement=function(y){this.element=y};D.prototype.useContextVersion=function(y){this._renderingContext||(this._contextVersion=y)};D.prototype.attach=
function(y){if(this.attached)return!0;this._resizeCanvas(y);var C=t.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new z(C);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=B(y);this._painter||(this._painter=new f["default"],this._painter.initialize(this._renderingContext));return w.prototype.attach.call(this,y)};D.prototype.detach=function(y){w.prototype.detach.call(this,
y);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};D.prototype.renderChildren=function(y){var C=this.children;y.drawPhase=d.WGLDrawPhase.FILL|d.WGLDrawPhase.LINE|d.WGLDrawPhase.MARKER|d.WGLDrawPhase.TEXT;for(var G=C.length,I=0;I<G;I++){var O=C[I];O.attached&&this.renderChild(O,y)}if(b("esri-featurelayer-webgl-labeling")){var R=y.context,Z=R.getBoundFramebufferObject();R.bindFramebuffer(this._labelsFBO2);I=y.stationary;R.setClearColor(0,
0,0,I?0:1);R.clear(R.gl.COLOR_BUFFER_BIT);if(I)for(y.drawPhase=d.WGLDrawPhase.LABEL_ALPHA,y.labelFBO=this._labelsFBO1,y.labelStep=this._labelFader.step(),I=0;I<G;I++)O=C[I],O.attached&&this.renderChild(O,y);else this._labelFader.reset();R.bindFramebuffer(Z);y.labelFBO=this._labelsFBO2;y.drawPhase=d.WGLDrawPhase.LABEL;for(I=0;I<G;I++)O=C[I],O.attached&&this.renderChild(O,y);y=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=y}};D.prototype.beforeRenderChildren=function(y,C){var G=
C.context,I=C.state,O=C.pixelRatio,R=this._painter;if(R){G.enforceState();R.update(I,O);var Z=I.width;R=I.height;var W=I.rotation;Z=Math.round(Z*O);R=Math.round(R*O);this._boundFBO=G.getBoundFramebufferObject();!b("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===Z&&this._labelsFBO1.height===R||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=x.createWithAttachments(G,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:Z,height:R},{colorTarget:0,depthStencilTarget:0}),G.bindFramebuffer(this._labelsFBO1),G.setDepthWriteEnabled(!0),G.setStencilWriteMask(255),G.setClearColor(0,0,0,0),G.setClearDepth(1),G.setClearStencil(0),G.clear(G.gl.COLOR_BUFFER_BIT|G.gl.DEPTH_BUFFER_BIT|G.gl.STENCIL_BUFFER_BIT),G.setDepthWriteEnabled(!1),G.bindFramebuffer(this._boundFBO),this._labelsFBO2=x.createWithAttachments(G,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:Z,height:R},{colorTarget:0,depthStencilTarget:0}));if(I.spatialReference&&(I.spatialReference._isWrappable?I.spatialReference._isWrappable():I.spatialReference.isWrappable)){var da=n.toRadian(W),ea=Math.abs(Math.cos(da)),Y=Math.abs(Math.sin(da)),ba=Math.round(I.worldScreenWidth);if(Math.round(Z*ea+R*Y)<=ba)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===Z&&this._clipFBO.height===R||(this._clipFBO=new x(G,{colorTarget:0,depthStencilTarget:3,width:Z,height:R}));var Q=
.5*Z,fa=.5*R;I=1/Z;var S=1/R;O*=.5*ba;var X=.5*(Z*Y+R*ea);Z=this._upperLeft;ea=this._upperRight;Y=this._lowerLeft;ba=this._lowerRight;l.set(Z,-O,-X);l.set(ea,O,-X);l.set(Y,-O,X);l.set(ba,O,X);p.identity(this._mat2);p.translate(this._mat2,this._mat2,[Q,fa]);0!==W&&p.rotate(this._mat2,this._mat2,da);l.transformMat2d(Z,Z,this._mat2);l.transformMat2d(ea,ea,this._mat2);l.transformMat2d(Y,Y,this._mat2);l.transformMat2d(ba,ba,this._mat2);W=this._clipData;W.set([2*Y[0]*I-1,2*(R-Y[1])*S-1,2*ba[0]*I-1,2*(R-
ba[1])*S-1,2*Z[0]*I-1,2*(R-Z[1])*S-1,2*ea[0]*I-1,2*(R-ea[1])*S-1]);this._clipRendererInitialized||this._initializeClipRenderer(G);this._clipVBO.setData(W);this._boundFBO=G.getBoundFramebufferObject();G.bindFramebuffer(this._clipFBO);G.setDepthWriteEnabled(!0);G.setStencilWriteMask(255);G.setClearColor(0,0,0,0);G.setClearDepth(1);G.setClearStencil(0);G.clear(G.gl.COLOR_BUFFER_BIT|G.gl.DEPTH_BUFFER_BIT|G.gl.STENCIL_BUFFER_BIT);G.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};
D.prototype.afterRenderChildren=function(y,C){if(this._clipFrame&&this._clipRendererInitialized){var G=this._renderingContext;G.bindFramebuffer(this._boundFBO);this._boundFBO=null;G.bindVAO(this._clipVAO);G.bindProgram(this._clipStencilProgram);G.setDepthWriteEnabled(!1);G.setDepthTestEnabled(!1);G.setStencilTestEnabled(!0);G.setBlendingEnabled(!1);G.setColorMask(!1,!1,!1,!1);G.setStencilOp(7680,7680,7681);G.setStencilWriteMask(255);G.setStencilFunction(519,1,255);G.drawElements(4,6,5123,0);G.bindVAO();
G.setColorMask(!0,!0,!0,!0);G.setBlendingEnabled(!0);G.setStencilFunction(514,1,255);this._blitRenderer.render(G,this._clipFBO.colorTexture,9728,1);G.setStencilTestEnabled(!1)}};D.prototype.doRender=function(y){var C=this.element.style;this.visible?(C.display="block",C.opacity=""+this.opacity,this._resizeCanvas(y),w.prototype.doRender.call(this,y),this._cachedRenderParams=B(y)):C.display="none"};D.prototype.takeScreenshot=function(y){void 0===y&&(y={});var C=y.pixelRatio||1;this._cachedRenderParams.pixelRatio=
C;var G=Math.round(C*this._cachedRenderParams.state.width),I=Math.round(C*this._cachedRenderParams.state.height),O=0,R=0,Z=G,W=I,da=G,ea=I;if(da=y.area)O=Math.round(C*da.x),R=Math.round(C*da.y),Z=Math.round(C*da.width),W=Math.round(C*da.height);void 0!==y.width&&void 0!==y.height?(da=y.width/y.height,W*da<Z?(da*=W,O+=Math.floor((Z-da)/2),Z=Math.floor(da)):(da=Z/da,R+=Math.floor((W-da)/2),W=Math.floor(da)),da=y.width,ea=y.height):(da=Z,ea=W);C=document.createElement("canvas");C.width=da;C.height=ea;
var Y=C.getContext("2d"),ba=new Uint8Array(Z*W*4),Q=this._renderingContext,fa=x.create(Q,{colorTarget:1,depthStencilTarget:3,width:G,height:I});Q.bindFramebuffer(fa);Q.setViewport(0,0,G,I);var S=this._cachedRenderParams,X=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(X.COLOR_BUFFER_BIT|X.DEPTH_BUFFER_BIT|X.STENCIL_BUFFER_BIT);S.context=this._renderingContext;S.painter=
this._painter;this.beforeRenderChildren(S,S);if(void 0!==y.rotation&&null!==y.rotation){X=S.state;var la=X.clone();la.viewpoint.rotation=y.rotation;S.state=la;this.renderChildren(S);S.state=X}else this.renderChildren(S);this.afterRenderChildren(S,S);fa.readPixels(O,I-(R+W),Z,W,6408,5121,ba);Q.bindFramebuffer();Q=Y.getImageData(0,0,da,ea);if(0!==O||0!==R||Z!==G||W!==I||da!==G||ea!==I)m.resampleHermite(ba,Z,W,Q.data,da,ea,!0);else{R=W-1;W=0;fa=4*Z;for(la=X=O=I=G=Z=S=void 0;W<R;){X=W*fa;la=R*fa;for(S=
0;S<fa;S+=4)Z=ba[X+S],G=ba[X+S+1],I=ba[X+S+2],O=ba[X+S+3],ba[X+S]=ba[la+S],ba[X+S+1]=ba[la+S+1],ba[X+S+2]=ba[la+S+2],ba[X+S+3]=ba[la+S+3],ba[la+S]=Z,ba[la+S+1]=G,ba[la+S+2]=I,ba[la+S+3]=O;W++;R--}Z=Q.data;G=ba.length;for(R=0;R<G;R++)Z[R]=ba[R]}ba=Q.data;W=ba.length;for(R=0;R<W;R+=4)O=ba[R+3],0<O&&(I=O/255,Z=Math.floor(ba[R+0]/I),G=Math.floor(ba[R+1]/I),I=Math.floor(ba[R+2]/I),ba[R+0]=255>=Z?Z:255,ba[R+1]=255>=G?G:255,ba[R+2]=255>=I?I:255);Y.putImageData(Q,0,0);Y=u[y.format?y.format.toLowerCase():
"png"];ba=1;void 0!==y.quality&&(ba=y.quality/100);y=C.toDataURL(Y,ba);return e.resolve({dataURL:y,x:0,y:0,width:da,height:ea})};D.prototype.prepareChildrenRenderParameters=function(y){if(!this.attached||!this._renderingContext)return null;y=B(y);var C=this._renderingContext,G=C.gl;C.setDepthWriteEnabled(!0);C.setStencilWriteMask(255);C.setClearColor(0,0,0,0);C.setClearDepth(1);C.setClearStencil(0);C.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT|G.STENCIL_BUFFER_BIT);C.setViewport(0,0,this.element.width,
this.element.height);C.setDepthWriteEnabled(!1);y.context=C;y.painter=this._painter;return y};D.prototype.attachChild=function(y,C){return y.attach(C)};D.prototype.detachChild=function(y,C){return y.detach(C)};D.prototype.renderChild=function(y,C){return y.processRender(C)};D.prototype._resizeCanvas=function(y){var C=this.element,G=C.style,I=y.state,O=y.pixelRatio;y=Math.round(I.width*O);O=Math.round(I.height*O);if(C.width!==y||C.height!==O)C.width=y,C.height=O;G.width=I.width+"px";G.height=I.height+
"px"};D.prototype._initializeClipRenderer=function(y){if(this._clipRendererInitialized)return!0;this._blitRenderer=new c;var C={a_pos:0},G=new v(y,h.stencilVS,h.stencilFS,C);if(!G)return!1;var I=r.createVertex(y,35040,32),O=new Uint16Array([0,1,2,2,1,3]);O=r.createIndex(y,35044,O);y=new A(y,C,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:I},O);this._clipStencilProgram=G;this._clipVBO=I;this._clipVAO=y;return this._clipRendererInitialized=!0};return D}(g)})},
"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){function b(e,g){void 0===g&&(g=250);this.duration=g;this._startTime=this._lastTime=0;this._parent=e}b.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};b.prototype.step=function(){var e=performance.now();if(0===this._lastTime)return this._lastTime=e,this._parent.requestRender(),0;var g=e-this._lastTime;
this._lastTime=e;e-this._startTime<2*this.duration&&this._parent.requestRender();return g/this.duration};return b}();q["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),function(F,q,a,b,e,g){return function(){function k(){this._initialized=!1}k.prototype.dispose=function(){this._program&&(this._program.dispose(),
this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};k.prototype.render=function(c,d,f,h){c&&(this._initialized||this._initialize(c),c.setBlendFunctionSeparate(1,771,1,771),c.bindVAO(this._vertexArrayObject),c.bindProgram(this._program),d.setSamplingMode(f),c.bindTexture(d,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",h),c.drawArrays(5,0,4),c.bindVAO())};k.prototype._initialize=function(c){if(this._initialized)return!0;
var d={a_pos:0,a_tex:1},f=new e(c,a.bitblitVS,a.bitblitFS,d);if(!f)return!1;var h=new Int8Array(16);h[0]=-1;h[1]=-1;h[2]=0;h[3]=0;h[4]=1;h[5]=-1;h[6]=1;h[7]=0;h[8]=-1;h[9]=1;h[10]=0;h[11]=1;h[12]=1;h[13]=1;h[14]=1;h[15]=1;c=new g(c,d,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:b.createVertex(c,35044,h)});this._program=f;this._vertexArrayObject=c;return this._initialized=
!0};return k}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!F)var F=1E-6;if(!q)var q="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var b={GLMAT_EPSILON:F,GLMAT_ARRAY_TYPE:q,GLMAT_RANDOM:a,setMatrixArrayType:function(k){b.GLMAT_ARRAY_TYPE=k}},e=Math.PI/180,g=180/Math.PI;b.toRadian=function(k){return k*e};b.toDegree=function(k){return k*g};b.setMatrixArrayType(Array);return b})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],
function(F){var q=F.GLMAT_ARRAY_TYPE;F={create:function(){var a=new q(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new q(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var e=b[0],g=b[1],k=b[2],c=b[3],d=b[4],f=b[5],h=e*c-g*k;if(!h)return null;h=1/h;a[0]=c*h;a[1]=
-g*h;a[2]=-k*h;a[3]=e*h;a[4]=(k*f-c*d)*h;a[5]=(g*d-e*f)*h;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,e){var g=b[0],k=b[1],c=b[2],d=b[3],f=b[4];b=b[5];var h=e[0],n=e[1],p=e[2],l=e[3],m=e[4];e=e[5];a[0]=g*h+c*n;a[1]=k*h+d*n;a[2]=g*p+c*l;a[3]=k*p+d*l;a[4]=g*m+c*e+f;a[5]=k*m+d*e+b;return a}};F.mul=F.multiply;F.rotate=function(a,b,e){var g=b[0],k=b[1],c=b[2],d=b[3],f=b[4];b=b[5];var h=Math.sin(e);e=Math.cos(e);a[0]=g*e+c*h;a[1]=k*e+d*h;a[2]=g*-h+c*e;a[3]=k*-h+d*
e;a[4]=f;a[5]=b;return a};F.scale=function(a,b,e){var g=b[1],k=b[2],c=b[3],d=b[4],f=b[5],h=e[0];e=e[1];a[0]=b[0]*h;a[1]=g*h;a[2]=k*e;a[3]=c*e;a[4]=d;a[5]=f;return a};F.translate=function(a,b,e){var g=b[0],k=b[1],c=b[2],d=b[3],f=b[4];b=b[5];var h=e[0];e=e[1];a[0]=g;a[1]=k;a[2]=c;a[3]=d;a[4]=g*h+c*e+f;a[5]=k*h+d*e+b;return a};F.fromRotation=function(a,b){var e=Math.sin(b),g=Math.cos(b);a[0]=g;a[1]=e;a[2]=-e;a[3]=g;a[4]=0;a[5]=0;return a};F.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];
a[4]=0;a[5]=0;return a};F.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};F.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};F.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return F})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(F){var q=F.GLMAT_ARRAY_TYPE,a=F.GLMAT_RANDOM,
b={create:function(){var e=new q(2);e[0]=0;e[1]=0;return e},clone:function(e){var g=new q(2);g[0]=e[0];g[1]=e[1];return g},fromValues:function(e,g){var k=new q(2);k[0]=e;k[1]=g;return k},copy:function(e,g){e[0]=g[0];e[1]=g[1];return e},set:function(e,g,k){e[0]=g;e[1]=k;return e},add:function(e,g,k){e[0]=g[0]+k[0];e[1]=g[1]+k[1];return e},subtract:function(e,g,k){e[0]=g[0]-k[0];e[1]=g[1]-k[1];return e}};b.sub=b.subtract;b.multiply=function(e,g,k){e[0]=g[0]*k[0];e[1]=g[1]*k[1];return e};b.mul=b.multiply;
b.divide=function(e,g,k){e[0]=g[0]/k[0];e[1]=g[1]/k[1];return e};b.div=b.divide;b.min=function(e,g,k){e[0]=Math.min(g[0],k[0]);e[1]=Math.min(g[1],k[1]);return e};b.max=function(e,g,k){e[0]=Math.max(g[0],k[0]);e[1]=Math.max(g[1],k[1]);return e};b.scale=function(e,g,k){e[0]=g[0]*k;e[1]=g[1]*k;return e};b.scaleAndAdd=function(e,g,k,c){e[0]=g[0]+k[0]*c;e[1]=g[1]+k[1]*c;return e};b.distance=function(e,g){var k=g[0]-e[0],c=g[1]-e[1];return Math.sqrt(k*k+c*c)};b.dist=b.distance;b.squaredDistance=function(e,
g){var k=g[0]-e[0],c=g[1]-e[1];return k*k+c*c};b.sqrDist=b.squaredDistance;b.length=function(e){var g=e[0];e=e[1];return Math.sqrt(g*g+e*e)};b.len=b.length;b.squaredLength=function(e){var g=e[0];e=e[1];return g*g+e*e};b.sqrLen=b.squaredLength;b.negate=function(e,g){e[0]=-g[0];e[1]=-g[1];return e};b.inverse=function(e,g){e[0]=1/g[0];e[1]=1/g[1];return e};b.normalize=function(e,g){var k=g[0],c=g[1];k=k*k+c*c;0<k&&(k=1/Math.sqrt(k),e[0]=g[0]*k,e[1]=g[1]*k);return e};b.dot=function(e,g){return e[0]*g[0]+
e[1]*g[1]};b.cross=function(e,g,k){g=g[0]*k[1]-g[1]*k[0];e[0]=e[1]=0;e[2]=g;return e};b.lerp=function(e,g,k,c){var d=g[0];g=g[1];e[0]=d+c*(k[0]-d);e[1]=g+c*(k[1]-g);return e};b.random=function(e,g){g=g||1;var k=2*a()*Math.PI;e[0]=Math.cos(k)*g;e[1]=Math.sin(k)*g;return e};b.transformMat2=function(e,g,k){var c=g[0];g=g[1];e[0]=k[0]*c+k[2]*g;e[1]=k[1]*c+k[3]*g;return e};b.transformMat2d=function(e,g,k){var c=g[0];g=g[1];e[0]=k[0]*c+k[2]*g+k[4];e[1]=k[1]*c+k[3]*g+k[5];return e};b.transformMat3=function(e,
g,k){var c=g[0];g=g[1];e[0]=k[0]*c+k[3]*g+k[6];e[1]=k[1]*c+k[4]*g+k[7];return e};b.transformMat4=function(e,g,k){var c=g[0];g=g[1];e[0]=k[0]*c+k[4]*g+k[12];e[1]=k[1]*c+k[5]*g+k[13];return e};b.forEach=function(){var e=b.create();return function(g,k,c,d,f,h){k||(k=2);c||(c=0);for(d=d?Math.min(d*k+c,g.length):g.length;c<d;c+=k)e[0]=g[c],e[1]=g[c+1],f(e,e,h),g[c]=e[0],g[c+1]=e[1];return g}}();b.str=function(e){return"vec2("+e[0]+", "+e[1]+")"};return b})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","../../core/tsSupport/assignHelper"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.adjustScreenshotSettings=function(b,e){b=a({format:"png",quality:100},b);if(b.includePadding){var g=e.width;var k=e.height}else g=e.width-e.padding.left-e.padding.right,k=e.height-e.padding.top-e.padding.bottom;var c=g/k;void 0!==b.width&&void 0===b.height?b.height=b.width/c:void 0!==b.height&&void 0===b.width&&(b.width=c*b.height);void 0!==b.height&&(b.height=Math.floor(b.height));void 0!==
b.width&&(b.width=Math.floor(b.width));b.area||b.includePadding||(b.area={x:e.padding.left,y:e.padding.top,width:g,height:k});return b};q.resampleHermite=function(b,e,g,k,c,d,f){void 0===f&&(f=!0);var h=e/c;g/=d;for(var n=Math.ceil(h/2),p=Math.ceil(g/2),l=0;l<d;l++)for(var m=0;m<c;m++){for(var r=4*(m+(f?d-l-1:l)*c),t=0,x=0,v=0,z=0,A=0,B=0,u=0,w=(l+.5)*g,D=Math.floor(l*g);D<(l+1)*g;D++){var y=Math.abs(w-(D+.5))/p,C=(m+.5)*h;y*=y;for(var G=Math.floor(m*h);G<(m+1)*h;G++){var I=Math.abs(C-(G+.5))/n;t=
Math.sqrt(y+I*I);-1<=t&&1>=t&&(t=2*t*t*t-3*t*t+1,0<t&&(I=4*(G+D*e),u+=t*b[I+3],v+=t,255>b[I+3]&&(t=t*b[I+3]/250),z+=t*b[I],A+=t*b[I+1],B+=t*b[I+2],x+=t))}}k[r]=z/x;k[r+1]=A/x;k[r+2]=B/x;k[r+3]=u/v}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(F,q,a,b,e,g,k){return function(){function c(d,f){this.gl=null;this._blendEnabled=!1;this._blendColorState=
{r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=
this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=g["default"](d)?"webgl2":"webgl";
this.gl=d;d instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=k.loadCapabilities(d,f);var h=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:h[0],y:h[1],width:h[2],height:h[3]};h=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),
maxMaxAnisotropy:h?this.gl.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};a("esri-webgl-debug")&&(this.instanceCounter=new e);this.enforceState()}Object.defineProperty(c.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});c.prototype.dispose=
function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};a("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};c.prototype.setBlendingEnabled=function(d){this._blendEnabled!==d&&(!0===d?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=d)};c.prototype.setBlendColor=function(d,f,h,n){if(d!==this._blendColorState.r||f!==this._blendColorState.g||h!==this._blendColorState.b||n!==this._blendColorState.a)this.gl.blendColor(d,
f,h,n),this._blendColorState.r=d,this._blendColorState.g=f,this._blendColorState.b=h,this._blendColorState.a=n};c.prototype.setBlendFunction=function(d,f){if(d!==this._blendFunctionState.srcRGB||f!==this._blendFunctionState.dstRGB)this.gl.blendFunc(d,f),this._blendFunctionState.srcRGB=d,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=f,this._blendFunctionState.dstAlpha=f};c.prototype.setBlendFunctionSeparate=function(d,f,h,n){if(this._blendFunctionState.srcRGB!==d||this._blendFunctionState.srcAlpha!==
h||this._blendFunctionState.dstRGB!==f||this._blendFunctionState.dstAlpha!==n)this.gl.blendFuncSeparate(d,f,h,n),this._blendFunctionState.srcRGB=d,this._blendFunctionState.srcAlpha=h,this._blendFunctionState.dstRGB=f,this._blendFunctionState.dstAlpha=n};c.prototype.setBlendEquation=function(d){this._blendEquationState.mode!==d&&(this.gl.blendEquation(d),this._blendEquationState.mode=d,this._blendEquationState.modeAlpha=d)};c.prototype.setBlendEquationSeparate=function(d,f){if(this._blendEquationState.mode!==
d||this._blendEquationState.modeAlpha!==f)this.gl.blendEquationSeparate(d,f),this._blendEquationState.mode=d,this._blendEquationState.modeAlpha=f};c.prototype.setColorMask=function(d,f,h,n){if(this._colorMaskState.r!==d||this._colorMaskState.g!==f||this._colorMaskState.b!==h||this._colorMaskState.a!==n)this.gl.colorMask(d,f,h,n),this._colorMaskState.r=d,this._colorMaskState.g=f,this._colorMaskState.b=h,this._colorMaskState.a=n};c.prototype.setClearColor=function(d,f,h,n){if(this._clearColor.r!==d||
this._clearColor.g!==f||this._clearColor.b!==h||this._clearColor.a!==n)this.gl.clearColor(d,f,h,n),this._clearColor.r=d,this._clearColor.g=f,this._clearColor.b=h,this._clearColor.a=n};c.prototype.setFaceCullingEnabled=function(d){this._polygonCullingEnabled!==d&&(!0===d?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=d)};c.prototype.setPolygonOffsetFillEnabled=function(d){this._polygonOffsetFillEnabled!==d&&(!0===d?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):
this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=d)};c.prototype.setPolygonOffset=function(d,f){if(this._polygonOffset[0]!==d||this._polygonOffset[1]!==f)this._polygonOffset[0]=d,this._polygonOffset[1]=f,this.gl.polygonOffset(d,f)};c.prototype.setCullFace=function(d){this._cullFace!==d&&(this.gl.cullFace(d),this._cullFace=d)};c.prototype.setFrontFace=function(d){this._frontFace!==d&&(this.gl.frontFace(d),this._frontFace=d)};c.prototype.setScissorTestEnabled=function(d){this._scissorTestEnabled!==
d&&(!0===d?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=d)};c.prototype.setScissorRect=function(d,f,h,n){if(this._scissorRect.x!==d||this._scissorRect.y!==f||this._scissorRect.width!==h||this._scissorRect.height!==n)this.gl.scissor(d,f,h,n),this._scissorRect.x=d,this._scissorRect.y=f,this._scissorRect.width=h,this._scissorRect.height=n};c.prototype.setDepthTestEnabled=function(d){this._depthTestEnabled!==d&&(!0===d?this.gl.enable(this.gl.DEPTH_TEST):
this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=d)};c.prototype.setClearDepth=function(d){this._clearDepth!==d&&(this.gl.clearDepth(d),this._clearDepth=d)};c.prototype.setDepthFunction=function(d){this._depthFunction!==d&&(this.gl.depthFunc(d),this._depthFunction=d)};c.prototype.setDepthWriteEnabled=function(d){this._depthWriteEnabled!==d&&(this.gl.depthMask(d),this._depthWriteEnabled=d)};c.prototype.setDepthRange=function(d,f){if(this._depthRange.zNear!==d||this._depthRange.zFar!==f)this.gl.depthRange(d,
f),this._depthRange.zNear=d,this._depthRange.zFar=f};c.prototype.setStencilTestEnabled=function(d){this._stencilTestEnabled!==d&&(!0===d?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=d)};c.prototype.setClearStencil=function(d){d!==this._clearStencil&&(this.gl.clearStencil(d),this._clearStencil=d)};c.prototype.setStencilFunction=function(d,f,h){if(this._stencilFunction.func!==d||this._stencilFunction.ref!==f||this._stencilFunction.mask!==h)this.gl.stencilFunc(d,
f,h),this._stencilFunction.face=1032,this._stencilFunction.func=d,this._stencilFunction.ref=f,this._stencilFunction.mask=h};c.prototype.setStencilFunctionSeparate=function(d,f,h,n){if(this._stencilFunction.face!==d||this._stencilFunction.func!==f||this._stencilFunction.ref!==h||this._stencilFunction.mask!==n)this.gl.stencilFuncSeparate(d,f,h,n),this._stencilFunction.face=d,this._stencilFunction.func=f,this._stencilFunction.ref=h,this._stencilFunction.mask=n};c.prototype.setStencilWriteMask=function(d){this._stencilWriteMask!==
d&&(this.gl.stencilMask(d),this._stencilWriteMask=d)};c.prototype.setStencilOp=function(d,f,h){if(this._stencilOperation.fail!==d||this._stencilOperation.zFail!==f||this._stencilOperation.zPass!==h)this.gl.stencilOp(d,f,h),this._stencilOperation.face=1032,this._stencilOperation.fail=d,this._stencilOperation.zFail=f,this._stencilOperation.zPass=h};c.prototype.setStencilOpSeparate=function(d,f,h,n){if(this._stencilOperation.face!==d||this._stencilOperation.fail!==f||this._stencilOperation.zFail!==h||
this._stencilOperation.zPass!==n)this.gl.stencilOpSeparate(d,f,h,n),this._stencilOperation.face=d,this._stencilOperation.face=d,this._stencilOperation.fail=f,this._stencilOperation.zFail=h,this._stencilOperation.zPass=n};c.prototype.setLineWidth=function(d){var f=this._lineWidth;this._lineWidth!==d&&(this.gl.lineWidth(d),this._lineWidth=d);return f};c.prototype.setActiveTexture=function(d){var f=this._activeTextureUnit;0<=d&&d!==this._activeTextureUnit&&(this.gl.activeTexture(b.BASE_TEXTURE_UNIT+
d),this._activeTextureUnit=d);return f};c.prototype.clear=function(d){d&&this.gl.clear(d)};c.prototype.drawArrays=function(d,f,h){this.gl.drawArrays(d,f,h)};c.prototype.drawElements=function(d,f,h,n){5123===h?this.gl.drawElements(d,f,h,n):5125===h&&this.gl.drawElements(d,f,h,n)};Object.defineProperty(c.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});c.prototype.setViewport=function(d,f,h,n){var p=this._viewport;if(p.x!==d||p.y!==f||p.width!==h||
p.height!==n)p.x=d,p.y=f,p.width=h,p.height=n,this.gl.viewport(d,f,h,n)};c.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};c.prototype.bindProgram=function(d){d?this._activeShaderProgram!==d&&(d.initialize(),this.gl.useProgram(d.glName),this._activeShaderProgram=d):(this.gl.useProgram(null),this._activeShaderProgram=null)};c.prototype.bindTexture=function(d,f){void 0===f&&(f=0);-1===c._MAX_TEXTURE_IMAGE_UNITS&&
(c._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));var h=this._textureUnitMap[f];this.setActiveTexture(f);null==d||null==d.glName?(null!=h&&(this.gl.bindTexture(h.descriptor.target,null),h.setBoundToUnit(f,!1)),this._textureUnitMap[f]=null):h&&h.id===d.id?d.applyChanges():(this.gl.bindTexture(d.descriptor.target,d.glName),d.setBoundToUnit(f,!0),d.applyChanges(),this._textureUnitMap[f]=d)};c.prototype.bindFramebuffer=function(d){d?this._activeFramebuffer!==d&&(d.initialize()||
this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,d.glName),this._activeFramebuffer=d):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};c.prototype.bindBuffer=function(d){d&&(34962===d.bufferType?this._activeVertexBuffer=c._bindBuffer(this.gl,d,d.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=c._bindBuffer(this.gl,d,d.bufferType,this._activeIndexBuffer))};c.prototype.bindRenderbuffer=function(d){var f=this.gl;d||(f.bindRenderbuffer(f.RENDERBUFFER,null),this._activeRenderbuffer=
null);this._activeRenderbuffer!==d&&(f.bindRenderbuffer(f.RENDERBUFFER,d.glName),this._activeRenderbuffer=d)};c.prototype.unbindBuffer=function(d){34962===d?this._activeVertexBuffer=c._bindBuffer(this.gl,null,d,this._activeVertexBuffer):this._activeIndexBuffer=c._bindBuffer(this.gl,null,d,this._activeIndexBuffer)};c.prototype.bindVAO=function(d){d?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===d.id||(d.bind(),this._activeVertexArrayObject=d):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null)};c.prototype.getBoundTexture=function(d){return this._textureUnitMap[d]};c.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};c.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};c.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var d=0;d<this.parameters.maxTextureImageUnits;d++)this.bindTexture(null,d);this.setBlendingEnabled(!1);
this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);
this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};c.prototype.enforceState=function(){var d=this.gl,f=this._capabilities.vao;f&&f.bindVertexArray(null);for(var h=0;h<this.parameters.maxVertexAttributes;h++)d.disableVertexAttribArray(h);this._activeVertexBuffer?d.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
d.bindBuffer(34962,null);this._activeIndexBuffer?d.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):d.bindBuffer(34963,null);if(f&&this._activeVertexArrayObject){if(f=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(f)}d.bindFramebuffer(d.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);d.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);d.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);d.bindRenderbuffer(d.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?d.enable(this.gl.BLEND):d.disable(this.gl.BLEND);d.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);d.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);d.clearColor(this._clearColor.r,
this._clearColor.g,this._clearColor.b,this._clearColor.a);d.clearDepth(this._clearDepth);d.clearStencil(this._clearStencil);d.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);d.cullFace(this._cullFace);d.depthFunc(this._depthFunction);d.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST);d.depthMask(this._depthWriteEnabled);d.frontFace(this._frontFace);d.lineWidth(this._lineWidth);
!0===this._polygonCullingEnabled?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE);d.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?d.enable(d.POLYGON_OFFSET_FILL):d.disable(d.POLYGON_OFFSET_FILL);d.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?d.enable(d.SCISSOR_TEST):d.disable(d.SCISSOR_TEST);d.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);
d.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST);d.stencilMask(this._stencilWriteMask);for(f=0;f<this.parameters.maxTextureImageUnits;f++)d.activeTexture(b.BASE_TEXTURE_UNIT+f),d.bindTexture(3553,null),(h=this._textureUnitMap[f])&&d.bindTexture(h.descriptor.target,h.glName);d.activeTexture(b.BASE_TEXTURE_UNIT+this._activeTextureUnit);
d.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};c._bindBuffer=function(d,f,h,n){if(!f)return d.bindBuffer(h,null),null;if(n===f)return n;d.bindBuffer(h,f.glName);return f};c._MAX_TEXTURE_IMAGE_UNITS=-1;return c}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require",
"exports"],function(F,q){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};
a.prototype.decrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],
function(F,q){Object.defineProperty(q,"__esModule",{value:!0});q["default"]=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(F,q,a,b,e,g){function k(c,d,f,h,n){if(h&&e["default"](c))return!0;if(d[f])return!1;for(d=0;d<n.length;d++)if(c.getExtension(n[d]))return!0;return!1}
Object.defineProperty(q,"__esModule",{value:!0});q.loadCapabilities=function(c,d){var f=d&&d.disabledExtensions||{},h=b.load(c,f),n=g.load(c,f);var p=f.compressedTextureS3TC?null:(p=c.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:p.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:p.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:p.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:p.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var l=f.textureFilterAnisotropic?
null:(l=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:l.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:l.TEXTURE_MAX_ANISOTROPY_EXT}:null;var m=a.load(c,f);if(e["default"](c))var r=f.colorBufferFloat||!c.getExtension("EXT_color_buffer_float")?null:{R16F:c.R16F,RG16F:c.RG16F,RGBA16F:c.RGBA16F,R32F:c.R32F,RG32F:c.RG32F,RGBA32F:c.RGBA32F,R11F_G11F_B10F:c.R11F_G11F_B10F};
else if(c instanceof WebGLRenderingContext){r=!f.colorBufferFloat&&c.getExtension("EXT_color_buffer_half_float");var t=!f.colorBufferFloat&&c.getExtension("WEBGL_color_buffer_float");r=r||t?{RGBA16F:r?r.RGBA16F_EXT:void 0,RGBA32F:t?t.RGBA32F_EXT:void 0}:null}else r=void 0;t=e["default"](c)?{MIN:c.MIN,MAX:c.MAX}:f.blendMinMax?null:(t=c.getExtension("EXT_blend_minmax"))?{MIN:t.MIN_EXT,MAX:t.MAX_EXT}:null;return{instancing:h,vao:n,compressedTextureS3TC:p,textureFilterAnisotropic:l,disjointTimerQuery:m,
colorBufferFloat:r,blendMinMax:t,depthTexture:k(c,f,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:k(c,f,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:k(c,f,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:k(c,f,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:k(c,f,"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require",
"exports","./isWebGL2Context"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,e){if(e.disjointTimerQuery)return null;var g=b.getExtension("EXT_disjoint_timer_query")||b.getExtension("EXT_disjoint_timer_query_webgl2");return g?a["default"](b)?{createQuery:function(){return b.createQuery()},resultAvailable:function(k){return b.getQueryParameter(k,b.QUERY_RESULT_AVAILABLE)},getResult:function(k){return b.getQueryParameter(k,b.QUERY_RESULT)},disjoint:function(){return b.getParameter(g.GPU_DISJOINT_EXT)},
beginTimeElapsed:function(k){return b.beginQuery(g.TIME_ELAPSED_EXT,k)},endTimeElapsed:function(){return b.endQuery(g.TIME_ELAPSED_EXT)},createTimestamp:function(k){return g.queryCounterEXT(k,g.TIMESTAMP_EXT)},timestampBits:function(){return b.getQuery(g.TIMESTAMP_EXT,g.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return g.createQueryEXT()},resultAvailable:function(k){return g.getQueryObjectEXT(k,g.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(k){return g.getQueryObjectEXT(k,g.QUERY_RESULT_EXT)},
disjoint:function(){return b.getParameter(g.GPU_DISJOINT_EXT)},beginTimeElapsed:function(k){return g.beginQueryEXT(g.TIME_ELAPSED_EXT,k)},endTimeElapsed:function(){return g.endQueryEXT(g.TIME_ELAPSED_EXT)},createTimestamp:function(k){return g.queryCounterEXT(k,g.TIMESTAMP_EXT)},timestampBits:function(){return g.getQueryEXT(g.TIMESTAMP_EXT,g.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(F,
q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,e){if(a["default"](b))return{drawArraysInstanced:b.drawArraysInstanced.bind(b),drawElementsInstanced:b.drawElementsInstanced.bind(b),vertexAttribDivisor:b.vertexAttribDivisor.bind(b)};if(e.angleInstancedArrays)return null;var g=b.getExtension("ANGLE_instanced_arrays");return g?{drawArraysInstanced:g.drawArraysInstancedANGLE.bind(g),drawElementsInstanced:g.drawElementsInstancedANGLE.bind(g),vertexAttribDivisor:g.vertexAttribDivisorANGLE.bind(g)}:
null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(F,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,e){if(a["default"](b))return{createVertexArray:b.createVertexArray.bind(b),deleteVertexArray:b.deleteVertexArray.bind(b),bindVertexArray:b.bindVertexArray.bind(b)};if(e.vao)return null;var g=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||
b.getExtension("WEBKIT_OES_vertex_array_object");return g?{createVertexArray:g.createVertexArrayOES.bind(g),deleteVertexArray:g.deleteVertexArrayOES.bind(g),bindVertexArray:g.bindVertexArrayOES.bind(g)}:null}})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(F,q,a,b,e,g,k){var c=new g("0/0/0/0"),d=function(){function h(n,p,l,m,r,t,x,v){this.x=
n;this.ymin=p;this.ymax=l;this.invM=m;this.leftAdjust=r;this.rightAdjust=t;this.leftBound=x;this.rightBound=v}h.create=function(n,p){if(n[1]>p[1]){var l=[p,n];n=l[0];p=l[1]}l=n[0];var m=n[1],r=p[0],t=p[1],x=r-l,v=t-m;v=0!==v?x/v:0;var z=(Math.ceil(m)-m)*v,A=(Math.floor(m)-m)*v;return new h(l,Math.floor(m),Math.ceil(t),v,0>x?z:A,0>x?A:z,0>x?r:l,0>x?l:r)};h.prototype.incrRow=function(){this.x+=this.invM};h.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};h.prototype.getRightCol=
function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return h}(),f=[[0,0],[0,0],[0,0],[0,0]];return function(){function h(n,p){var l=this;this.tileInfo=n;this.fullExtent=p;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var m=n.lods.slice();m.sort(function(t,x){return x.scale-t.scale});var r=this._lodInfos=m.map(function(t){return b.create(n,t,p)});m.forEach(function(t,x){l._infoByLevel[t.level]=r[x];l._infoByScale[t.scale]=r[x];l.scales[x]=t.scale},this);
this._wrap=n.isWrappable}h.prototype.getLODInfoAt=function(n){return this._infoByLevel[n.level]};h.prototype.getTileBounds=function(n,p,l){void 0===l&&(l=!1);c.set(p);return(p=this._infoByLevel[c.level])?p.getTileBounds(n,c,l):n};h.prototype.getTileCoords=function(n,p,l){void 0===l&&(l=!1);c.set(p);return(p=this._infoByLevel[c.level])?p.getTileCoords(n,c,l):n};h.prototype.getTileCoverage=function(n,p,l){void 0===p&&(p=192);void 0===l&&(l="closest");l="closest"===l?this.getClosestInfoForScale(n.scale):
this.getSmallestInfoForScale(n.scale);var m=e.pool.acquire(l),r=this._wrap;var t=Infinity;var x=-Infinity,v=m.spans;f[0][0]=f[0][1]=f[1][1]=f[3][0]=-p;f[1][0]=f[2][0]=n.size[0]+p;f[2][1]=f[3][1]=n.size[1]+p;for(p=0;p<f.length;p++){var z=f[p];n.toMap(z,z);z[0]=l.getColumnForX(z[0]);z[1]=l.getRowForY(z[1])}n=[];z=3;for(p=0;4>p;p++){if(f[p][1]!==f[z][1]){var A=d.create(f[p],f[z]);t=Math.min(A.ymin,t);x=Math.max(A.ymax,x);void 0===n[A.ymin]&&(n[A.ymin]=[]);n[A.ymin].push(A)}z=p}if(null==t||null==x||100<
x-t)return null;for(z=[];t<x;){null!=n[t]&&(z=z.concat(n[t]));var B=Infinity;var u=-Infinity;for(p=z.length-1;0<=p;p--)A=z[p],B=Math.min(B,A.getLeftCol()),u=Math.max(u,A.getRightCol());B=Math.floor(B);u=Math.floor(u);if(t>=l.first[1]&&t<=l.last[1])if(r)if(l.size[0]<l.worldSize[0])for(A=Math.floor(u/l.worldSize[0]),p=Math.floor(B/l.worldSize[0]);p<=A;p++)v.push(new k(t,Math.max(l.getFirstColumnForWorld(p),B),Math.min(l.getLastColumnForWorld(p),u)));else v.push(new k(t,B,u));else B>l.last[0]||u<l.first[0]||
(B=Math.max(B,l.first[0]),u=Math.min(u,l.last[0]),v.push(new k(t,B,u)));t+=1;for(p=z.length-1;0<=p;p--)A=z[p],A.ymax>=t?A.incrRow():z.splice(p,1)}return m};h.prototype.getTileIdAtParent=function(n,p){var l=g.pool.acquire(p),m=this._infoByLevel[l.level];if(n.resolution<m.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+n.resolution+" is not a parent resolution of "+m.resolution);return n.resolution===m.resolution?l.id:g.getId(n.level,Math.floor(l.row*m.resolution/
n.resolution+.01),Math.floor(l.col*m.resolution/n.resolution+.01),l.world)};h.prototype.getTileParentId=function(n){n=g.pool.acquire(n);var p=this._lodInfos.indexOf(this._infoByLevel[n.level])-1;if(0>p)return g.pool.release(n),null;p=this.getTileIdAtParent(this._lodInfos[p],n);g.pool.release(n);return p};h.prototype.getTileResolution=function(n){return(n=this._infoByLevel[n.level])?n.resolution:-1};h.prototype.getTileScale=function(n){return(n=this._infoByLevel[n.level])?n.scale:-1};h.prototype.intersects=
function(n,p){var l=g.pool.acquire(p),m=this._infoByLevel[l.level],r=n.lodInfo;if(r.resolution>m.resolution){var t=g.pool.acquire(this.getTileIdAtParent(r,l)),x=r.denormalizeCol(t.col,t.world),v=n.spans.some(function(C){return C.row===t.row&&C.colFrom<=x&&C.colTo>=x});g.pool.release(l);g.pool.release(t);return v}if(r.resolution<m.resolution){var z=n.spans.reduce(function(C,G){C[0]=Math.min(C[0],G.row);C[1]=Math.max(C[1],G.row);C[2]=Math.min(C[2],G.colFrom);C[3]=Math.max(C[3],G.colTo);return C},[Infinity,
-Infinity,Infinity,-Infinity]);v=z[0];var A=z[1],B=z[2];z=z[3];var u=m.denormalizeCol(l.col,l.world),w=r.getColumnForX(m.getXForColumn(u)),D=r.getRowForY(m.getYForRow(l.row));u=r.getColumnForX(m.getXForColumn(u+1))-1;m=r.getRowForY(m.getYForRow(l.row+1))-1;g.pool.release(l);return!(w>z||u<B||D>A||m<v)}var y=r.denormalizeCol(l.col,l.world);v=n.spans.some(function(C){return C.row===l.row&&C.colFrom<=y&&C.colTo>=y});g.pool.release(l);return v};h.prototype.normalizeBounds=function(n,p,l){n[0]=p[0];n[1]=
p[1];n[2]=p[2];n[3]=p[3];this._wrap&&(p=a.getInfo(this.tileInfo.spatialReference),l=-l*(p.valid[1]-p.valid[0]),n[0]+=l,n[2]+=l);return n};h.prototype.getSmallestInfoForScale=function(n){var p=this.scales;if(this._infoByScale[n])return this._infoByScale[n];if(n>p[0])return this._infoByScale[p[0]];for(var l=1;l<p.length-1;l++)if(n>p[l]+1E-6)return this._infoByScale[p[l-1]];return this._infoByScale[p[p.length-1]]};h.prototype.getClosestInfoForScale=function(n){var p=this.scales;this._infoByScale[n]||
(n=p.reduce(function(l,m,r,t){return Math.abs(m-n)<Math.abs(l-n)?m:l},p[0]));return this._infoByScale[n]};return h}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(F,q,a,b){function e(k,c,d){k[0]=c;k[1]=d;return k}var g=new b("0/0/0/0");return function(){function k(c,d,f,h,n,p,l,m,r,t,x,v){this.level=c;this.resolution=d;this.scale=f;this.origin=h;this.first=n;this.last=p;this.size=
l;this.norm=m;this.worldStart=r;this.worldEnd=t;this.worldSize=x;this.wrap=v}k.create=function(c,d,f){var h=a.getInfo(c.spatialReference),n=[c.origin.x,c.origin.y],p=[c.size[0]*d.resolution,c.size[1]*d.resolution],l=[-Infinity,-Infinity],m=[Infinity,Infinity],r=[Infinity,Infinity];f&&(e(l,Math.max(0,Math.floor((f.xmin-n[0])/p[0])),Math.max(0,Math.floor((n[1]-f.ymax)/p[1]))),e(m,Math.max(0,Math.floor((f.xmax-n[0])/p[0])),Math.max(0,Math.floor((n[1]-f.ymin)/p[1]))),e(r,m[0]-l[0]+1,m[1]-l[1]+1));if(c.isWrappable){c=
[Math.ceil(Math.round(2*h.origin[1]/d.resolution)/c.size[0]),r[1]];h=[Math.floor((h.origin[0]-n[0])/p[0]),l[1]];f=[c[0]+h[0]-1,m[1]];var t=!0}else h=l,f=m,c=r,t=!1;return new k(d.level,d.resolution,d.scale,n,l,m,r,p,h,f,c,t)};k.prototype.normalizeCol=function(c){if(!this.wrap)return c;var d=this.worldSize[0];return 0>c?d-1-Math.abs((c+1)%d):c%d};k.prototype.denormalizeCol=function(c,d){return this.wrap?this.worldSize[0]*d+c:c};k.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/
this.worldSize[0]):0};k.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};k.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};k.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};k.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};k.prototype.getRowForY=function(c){return(this.origin[1]-c)/this.norm[1]};k.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};
k.prototype.getTileBounds=function(c,d,f){void 0===f&&(f=!1);g.set(d);var h=f?g.col:this.denormalizeCol(g.col,g.world),n=g.row;d=this.getXForColumn(h);f=this.getYForRow(n+1);h=this.getXForColumn(h+1);n=this.getYForRow(n);c[0]=d;c[1]=f;c[2]=h;c[3]=n;return c};k.prototype.getTileCoords=function(c,d,f){void 0===f&&(f=!1);g.set(d);d=f?g.col:this.denormalizeCol(g.col,g.world);Array.isArray(c)?e(c,this.getXForColumn(d),this.getYForRow(g.row)):(c.x=this.getXForColumn(d),c.y=this.getYForRow(g.row));return c};
return k}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(F,q,a,b,e){return function(){function g(k){this.lodInfo=k;this.spans=a.acquire()}g.prototype.release=function(){for(var k=0,c=this.spans;k<c.length;k++)e.pool.release(c[k]);a.release(this.spans)};g.prototype.forEach=function(k,c){var d=this.spans,f=this.lodInfo,h=f.level;if(0!==d.length)for(var n=0;n<d.length;n++){var p=
d[n],l=p.row,m=p.colTo;for(p=p.colFrom;p<=m;p++)k.call(c,h,l,f.normalizeCol(p),f.getWorldForColumn(p))}};g.pool=new b(g,!0);return g}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(F,q,a){return function(){function b(e,g,k){this.row=e;this.colFrom=g;this.colTo=k}b.pool=new a(b,!0);return b}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./enums","./TileKey"],function(F,q,a,b,e){var g=new e(0,0,0,0),k=new Map,c=[],d=[];return function(){function f(h){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=h.acquireTile;this.releaseTile=h.releaseTile;this.tileInfoView=h.tileInfoView;h.cachePolicy&&(this.cachePolicy=h.cachePolicy);h.coveragePolicy&&(this.coveragePolicy=h.coveragePolicy);null!=h.buffer&&(this.buffer=
h.buffer)}f.prototype.destroy=function(){this.clear()};f.prototype.update=function(h){var n=this,p=this.tileIndex,l=this.tileInfoView.getTileCoverage(h.state,this.buffer,this.coveragePolicy);if(l){var m=l.spans,r=l.lodInfo,t=r.level,x=h.state.resolution,v=!h.stationary&&x>this._previousResolution;this._previousResolution=x;p.forEach(function(C){return C.visible=!0});this.tiles.length=0;k.clear();var z=0,A=0;if(0<m.length)for(var B=0;B<m.length;B++){h=m[B];for(var u=h.row,w=h.colTo,D=h.colFrom;D<=
w;D++)z++,h=g.set(t,u,r.normalizeCol(D),r.getWorldForColumn(D)).id,p.has(h)?(x=p.get(h),x.status!==b.TileStatus.INITIALIZED&&A++,x.attached?k.set(h,x):x.attached||v||this._addParentTile(h,k)):(x=this.acquireTile(g),this.tileIndex.set(h,x),v||this._addParentTile(h,k))}var y=A===z;d.length=0;c.length=0;p.forEach(function(C,G){g.set(G);if(!k.has(G)){var I=n.tileInfoView.intersects(l,g);!I||!v&&y?"purge"===n.cachePolicy&&C.status!==b.TileStatus.MODIFIED&&C.status!==b.TileStatus.READY?c.push(G):(g.level>
t||!I)&&c.push(G):C.attached?d.push(G):g.level>t&&c.push(G)}});for(m=0;m<d.length;m++)h=d[m],(x=p.get(h))&&x.attached&&k.set(h,x);for(m=0;m<c.length;m++)h=c[m],x=p.get(h),this.releaseTile(x),p["delete"](h);k.forEach(function(C){return n.tiles.push(C)});p.forEach(function(C){k.has(C.key.id)||(C.visible=!1)});d.length=0;c.length=0;k.clear();return y}};f.prototype.clear=function(){var h=this,n=this.tileIndex;n.forEach(function(p){h.releaseTile(p)});n.clear()};f.prototype._addParentTile=function(h,n){for(var p=
h,l=null;;){p=this.tileInfoView.getTileParentId(p);if(!p)break;if(this.tileIndex.has(p)&&(l=this.tileIndex.get(p))&&l.attached){n.has(l.key.id)||n.set(l.key.id,l);break}}};return f}()})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(F,q,a,b){function e(d,f){d.length=0;f.forEach(function(h){return d.push(h)});return d}var g=new Set,k=[],c=new Map;return function(){function d(f){var h=this;
this._keysToRequests=new Map;this.tileInfoView=null;var n=f.strategy&&"scale-first"!==f.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=f.tileInfoView;this._queues=f.tileServers&&0<f.tileServers.length?f.tileServers.map(function(p){return new a({concurrency:f.concurrency||6,process:function(l){l=h._keysToRequests.get(l);return f.process(l,p)},peeker:n})}):[new a({concurrency:f.concurrency||6,process:function(p){p=h._keysToRequests.get(p);return f.process(p)},
peeker:n})]}Object.defineProperty(d.prototype,"length",{get:function(){return this._queues.reduce(function(f,h){return f+h.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});d.prototype.clear=function(){for(var f=0,h=this._queues;f<h.length;f++)h[f].clear();this._keysToRequests.clear()};d.prototype.find=function(f,h){for(var n=this,p=0,l=this._queues;p<l.length;p++){var m=l[p].find(function(r){return f(n._keysToRequests.get(r).key)});
if(m)return m}};d.prototype.get=function(f){f="string"===typeof f?f:f.id;for(var h=0,n=this._queues;h<n.length;h++){var p=n[h].get(f);if(p)return p}};d.prototype.getRequest=function(f){return this._keysToRequests.get("string"===typeof f?f:f.id)};d.prototype.has=function(f){return"string"===typeof f?this._keysToRequests.has(f):this._keysToRequests.has(f.id)};d.prototype.isOngoing=function(f){var h="string"===typeof f?f:f.id;return this.has(h)&&this._queues.some(function(n){return n.isOngoing(h)})};
d.prototype.pause=function(){for(var f=0,h=this._queues;f<h.length;f++)h[f].pause()};d.prototype.push=function(f){var h=this,n=f.key.id,p=this._queues[f.key.row%this._queues.length].push(n);this._keysToRequests.set(n,f);p.then(function(){h._keysToRequests["delete"](n)});p["catch"](function(){h._keysToRequests["delete"](n)});return p};d.prototype.reset=function(){for(var f=0,h=this._queues;f<h.length;f++)h[f].reset()};d.prototype.resume=function(){for(var f=0,h=this._queues;f<h.length;f++)h[f].resume()};
d.prototype._peekByScaleFirst=function(f){if(!this.state)return f[0];for(var h=this.tileInfoView,n=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY,l=0;l<f.length;l++){var m=this._keysToRequests.get(f[l]),r=this.tileInfoView.getTileScale(m.key);c.has(r)||(c.set(r,[]),n=Math.max(r,n),p=Math.min(r,p));c.get(r).push(m.key);g.add(r)}var t=this.state.scale;c.has(t)||(e(k,g),k.sort(),t=k.reduce(function(A,B,u,w){return Math.abs(B-t)<Math.abs(A-t)?B:A},k[0]));t=Math.min(t,n);t=Math.max(t,p);f=c.get(t);
var x=h.getClosestInfoForScale(t),v=x.getColumnForX(this.state.center[0]),z=x.getRowForY(this.state.center[1]);f.sort(function(A,B){var u=x.denormalizeCol(A.col,A.world),w=x.denormalizeCol(B.col,B.world);return Math.sqrt((v-u)*(v-u)+(z-A.row)*(z-A.row))-Math.sqrt((v-w)*(v-w)+(z-B.row)*(z-B.row))});g.clear();c.clear();return f[0].id};d.prototype._peekByCenterFirst=function(f){if(!this.state)return f[0];for(var h=this.tileInfoView,n=this.state.center,p=[0,0],l=Number.POSITIVE_INFINITY,m=null,r=0;r<
f.length;r++){var t=this._keysToRequests.get(f[r]);h.getTileCoords(p,t.key);var x=b.distance(p,n);x<l&&(l=x,m=t.key)}return m.id};return d}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(F,q,a,b,e){return function(){function g(k){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;k.concurrency&&(this.concurrency=k.concurrency);
this.ordered=!!k.ordered;this._queue=new b(k.peeker?{peeker:k.peeker}:void 0);this.process=k.process}Object.defineProperty(g.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});g.prototype.clear=function(){this._queue.clear();var k=[];this._processingItems.forEach(function(c){return k.push(c.resultPromise)});this._processingItems.clear();k.forEach(function(c){return c.cancel()});k.length=0;this._apiPromises.forEach(function(c){return k.push(c)});
this._apiPromises.clear();k.forEach(function(c){return c.cancel()});this._cancelNext()};g.prototype.find=function(k,c){var d=this,f=void 0;this._apiPromises.forEach(function(h,n){k.call(c,n)&&(f=d._apiPromises.get(n).promise)});return f};g.prototype.get=function(k){return(k=this._apiPromises.get(k))&&k.promise||void 0};g.prototype.isOngoing=function(k){return this._processingItems.has(k)};g.prototype.has=function(k){return this._apiPromises.has(k)};g.prototype.pause=function(){this._isPaused||(this._isPaused=
!0,this._cancelNext())};g.prototype.push=function(k){var c=this;if(this._apiPromises.has(k))return this._apiPromises.get(k).promise;var d=new a(function(f){var h=c._processingItems.get(k);h?h.resultPromise.cancel(f):(c._remove(k),c._scheduleNext())});this._add(k,d);this._scheduleNext();return d.promise};g.prototype.reset=function(){var k=[];this._processingItems.forEach(function(f){return k.push(f)});this._processingItems.clear();for(var c=0;c<k.length;c++){var d=k[c];d.resultPromise.isFulfilled()?
this._processReset(d):(d.isReset=!0,d.resultPromise.cancel())}};g.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};g.prototype._scheduleNext=function(){var k=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=e.schedule(function(){k._scheduledNextHandle=null;k._next()}))};g.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};g.prototype._processResult=function(k,
c){this._remove(k.item);this._scheduleNext();k.dfd.resolve(c)};g.prototype._processError=function(k,c){k.isReset?this._processReset(k):(this._remove(k.item),this._scheduleNext(),k.dfd.reject(c))};g.prototype._processReset=function(k){this._remove(k.item);this._add(k.item,k.dfd);this._scheduleNext()};g.prototype._processOrdered=function(k,c){var d=this,f=!1;if(k.isReset)this._processReset(k);else{k.result=c;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(l){f||
(l.result?d._itemsToProcess.push(l):f=!0)});for(var h=0,n=this._itemsToProcess;h<n.length;h++){var p=n[h];!1===p.result.ok?this._processError(p,p.result.error):this._processResult(p,p.result.value)}this._itemsToProcess.length=0}};g.prototype._process=function(k){var c=this;if(null!=k){var d=this._apiPromises.get(k),f=this.process(k);if(f&&"function"===typeof f.then){var h={item:k,resultPromise:f,result:null,dfd:d,isReset:!1};this._processingItems.set(k,h);this.ordered?f.then(function(n){return c._processOrdered(h,
{ok:!0,value:n})},function(n){return c._processOrdered(h,{ok:!1,error:n})}):f.then(function(n){return c._processResult(h,n)},function(n){return c._processError(h,n)})}else d.resolve(f),this._remove(k)}};g.prototype._add=function(k,c){this._apiPromises.set(k,c);this._queue.push(k)};g.prototype._remove=function(k){this._queue.remove(k);this._apiPromises["delete"](k);this._processingItems["delete"](k)};g.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),
this._scheduledNextHandle=null)};return g}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(F,q){return function(){function a(b){this._items=[];this._itemSet=new Set;this._peeker=function(e){return e[0]};this._length=0;b&&b.peeker&&(this._peeker=b.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=
function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(b){this.contains(b)||this._add(b)};a.prototype.contains=function(b){return 0<this._length&&this._itemSet.has(b)};a.prototype.pop=function(){if(0!==this._length){var b=this.peek();this._remove(b);return b}};a.prototype.remove=function(b){this.contains(b)&&this._remove(b)};a.prototype._add=function(b){this._items.push(b);this._itemSet.add(b);this._length++};a.prototype._remove=function(b){this._itemSet["delete"](b);
this._items.splice(this._items.indexOf(b),1);this._length--};return a}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var F=function(q,a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=null,g=0;g<b.length;++g){try{e=q.getContext(b[g],a)}catch(k){}if(e)break}return e};return{create3DContext:F,setupWebGL:function(q,a){function b(g){var k=q.parentNode;k&&(k.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
g+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];var e=F(q,a);return e?[e]:(b('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){try{var q=window.WebGLRenderingContext}catch(b){q=[!1,0]}try{var a=F(document.createElement("canvas"))}catch(b){a=[!1,1]}q?a?(q=a,q=[!0,{VERSION:q.getParameter(q.VERSION),SHADING_LANGUAGE_VERSION:q.getParameter(q.SHADING_LANGUAGE_VERSION),VENDOR:q.getParameter(q.VENDOR),RENDERER:q.getParameter(q.RENDERER),
EXTENSIONS:q.getSupportedExtensions(),MAX_TEXTURE_SIZE:q.getParameter(q.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:q.getParameter(q.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:q.getParameter(q.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):q=[!1,1]:q=[!1,0];return q}}})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/backgroundShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n    \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    attribute vec2 a_pos;\r\n\r\n  #ifdef ID\r\n    uniform mediump vec4 u_id;\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump mat3 u_pattern_matrix; // can we use medium precision?\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n\r\n  #ifdef PATTERN\r\n      // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n      // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n      v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      v_id \x3d u_id / 255.0;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef PATTERN\r\n    uniform lowp float u_opacity;\r\n    uniform mediump vec2 u_pattern_tl;\r\n    uniform mediump vec2 u_pattern_br;\r\n    uniform sampler2D u_texture;\r\n\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #else\r\n    uniform lowp vec4 u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    void main() {\r\n  #ifdef PATTERN\r\n      // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n      mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n      // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n      // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n      // we need to only sample from area that has our sprite in the mosaic.\r\n      mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n      // sample the sprite mosaic\r\n      lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n      gl_FragColor \x3d u_opacity * color;\r\n  #else\r\n      gl_FragColor \x3d u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/circleShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"circleVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_stroke_color;\r\n      attribute vec4 a_data;\r\n\r\n      const float sizePrecision \x3d 0.25; // 1/4\r\n      const float blurPrecision \x3d 0.03125; // 1/32\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_radius;\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_stroke_width;\r\n      uniform lowp vec4 u_stroke_color;\r\n\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      void main()\r\n      {\r\n        v_color \x3d a_color * u_color;\r\n        v_stroke_color \x3d a_stroke_color * u_stroke_color;\r\n        v_stroke_width \x3d a_data[1] * sizePrecision * u_stroke_width;\r\n        v_radius \x3d a_data[2] * u_radius;\r\n        v_blur \x3d max(a_data[0] * blurPrecision + u_blur, u_antialiasingWidth / (v_radius + v_stroke_width));\r\n\r\n        mediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\r\n        v_offset \x3d offset;\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos * 0.5, 0.0, 1.0) + u_extrudeMatrix * (v_radius + v_stroke_width) * vec4(offset, 0.0, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"circleFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        mediump float dist \x3d length(v_offset);\r\n\r\n        mediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\r\n\r\n        lowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\r\n\r\n        gl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump mat3 u_pattern_matrix;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n      #ifdef PATTERN\r\n        // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n        // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n        // (-4k to 8k -1) to texture coordinates.\r\n        v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n      #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n      void main()\r\n      {\r\n      #ifdef PATTERN\r\n        // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n        mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n        // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n        // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n        // we need to only sample from area that has our sprite in the mosaic.\r\n        mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n        // sample the sprite mosaic\r\n        lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n        gl_FragColor \x3d v_color[3] * color;\r\n      #else\r\n        gl_FragColor \x3d v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader devide by the same number\r\n      const float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\r\n\r\n      const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n      const float tileCoordRatio \x3d 1.0 / 8.0;\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle         \x3d a_levelInfo[1];\r\n        mediump float a_minLevel      \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel      \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label had been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        vec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\r\n\r\n        v_size \x3d abs(offset);\r\n\r\n      #ifdef SDF\r\n        offset \x3d (120.0 / 86.0) * offset;\r\n      #endif // SDF\r\n\r\n      #ifdef DD\r\n        mediump float icon_size \x3d a_size * u_size;\r\n      #else\r\n        mediump float icon_size \x3d u_size;\r\n      #endif // DD\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\r\n\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n        v_transparency *\x3d v_color.w;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      uniform lowp sampler2D u_texture; // SDF texture\r\n    #ifdef SDF\r\n      uniform lowp vec4 u_color; // a color to override the one of the vertex\r\n      uniform lowp vec4 u_outlineColor;\r\n      uniform mediump float u_outlineSize;\r\n    #endif // SDF\r\n\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // we need the conversion function from RGBA to float\r\n      $rgba2float\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n\r\n      void main()\r\n      {\r\n      #ifdef SDF\r\n        lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n        // calculate the distance from the edge [-0.5, 0.5]\r\n        float d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\r\n\r\n        // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n        // 1 / 86 represents a single pixel given the size of the SDF is 128 and we add 4 pixels margins to deal with\r\n        // other non SDF types.\r\n        // The rasterized geometry takes only 86 pixels because of the extra 16 pixels margin for the outline.\r\n        const float sofetEdgeRatio \x3d 0.248062016; // \x3d\x3d\x3e (32.0 / 86.0) / 1.5;\r\n        float size \x3d max(v_size.x, v_size.y);\r\n        float dist \x3d d * sofetEdgeRatio * size;\r\n\r\n        // set the fragment\'s transparency according to the distance from the edge\r\n        fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n        // count for the outline\r\n        // therefore tint the entire icon area.\r\n        if (u_outlineSize \x3e 0.25) {\r\n          lowp vec4 outlinePixelColor \x3d u_outlineColor;\r\n          // the outline limit ratio is derived from the 16 pixels allocated for the outline and the fact that 1/86 represents\r\n          // a single pixel.\r\n          const float outlineLimitRatio \x3d (16.0 / 86.0);\r\n          float clampedOutlineSize \x3d sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\r\n\r\n          outlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\r\n\r\n          // finally combine the outline and the fill colors\r\n          gl_FragColor \x3d v_transparency * mixColors(fillPixelColor, outlinePixelColor);\r\n        }\r\n        else {\r\n          gl_FragColor \x3d v_transparency * fillPixelColor;\r\n        }\r\n      #else // not an SDF\r\n        lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n        gl_FragColor \x3d v_transparency * texColor;\r\n      #endif // SDF\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n      /* The implementation of the renderer is based on the article and implementation of MB described here:\r\n      * https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n      */\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_offsetAndNormal;\r\n      attribute vec2 a_accumulatedDistance;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_antialiasing; // the feather distance at which the line edge fades out\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n      varying mediump vec2 v_normal;\r\n\r\n      // the accumulated distance along the line. We need this information in order to render the dashes.\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      const float scale \x3d 1.0 / 31.0;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_width;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_width;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_lineHalfWidth; // the inset and outset of the line\r\n      varying mediump float v_blur;\r\n\r\n    #ifndef PATTERN\r\n      uniform mediump vec2 u_dasharray;\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n      void main()\r\n      {\r\n        v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n      #ifdef DD\r\n        v_lineHalfWidth \x3d a_width * u_width;\r\n      #else\r\n        v_lineHalfWidth \x3d u_width;\r\n      #endif // DD\r\n\r\n        v_lineHalfWidth +\x3d u_antialiasing;\r\n        v_lineHalfWidth *\x3d 0.5;\r\n\r\n      #ifndef PATTERN\r\n      #ifdef DD\r\n        v_dasharray \x3d u_dasharray * a_width;\r\n      #else\r\n        v_dasharray \x3d u_dasharray * u_width;\r\n      #endif // DD\r\n      #endif\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec2 dist \x3d v_lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n        // transform the vertex\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n        // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n        v_accumulatedDistance \x3d a_accumulatedDistance.x;\r\n\r\n        v_blur \x3d u_blur + u_antialiasing;\r\n\r\n        #ifdef DD\r\n          v_color \x3d a_color * u_color;\r\n        #else\r\n          v_color \x3d u_color;\r\n        #endif // DD\r\n\r\n        #ifdef ID\r\n          v_id \x3d u_id / 255.0;\r\n        #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying mediump vec2 v_normal;\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      varying mediump float v_lineHalfWidth;\r\n      varying lowp vec4 v_color;\r\n\r\n      varying mediump float v_blur;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform mediump vec2 u_spriteSize;\r\n      uniform sampler2D u_texture;\r\n\r\n      // Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\r\n      // accumulated distance. Most vertices will have v_normal.x \x3d\x3d 0, because the pattern must be sampled only depending on\r\n      // the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x !\x3d 0, thus allowing to\r\n      // "keep moving" for a few more pixel even when the line has ended or has not started yet.\r\n      const mediump float tileCoordRatio \x3d 8.0;\r\n    #else\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n        // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n        // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n        mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n        // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n        // We need to count for both sides of the line.\r\n        lowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\r\n\r\n      #ifdef PATTERN\r\n        // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n        // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n        mediump float relativeTexX \x3d mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\r\n\r\n        // in order to calculate the texture coordinates perpendicular to the line (Y axis), we use the interpolated normal values\r\n        // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n        // texture value should be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n        // (TL) ---------------------------      --\x3e left edge of line. Interpolated normal is 1.0\r\n        //              | -\x3e line-width / 2\r\n        //      - - - - - - - - - - - - - -\r\n        //              | -\x3e line-width / 2\r\n        //      ---------------------------- (BR)--\x3e right edge of line. Interpolated normal is -1.0\r\n\r\n        mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\r\n\r\n        // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n        mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n        // get the color from the texture\r\n        lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n        // finally write the fragment value\r\n        gl_FragColor \x3d alpha * v_color[3] * color;\r\n      #else\r\n        // now calculate the dashes given the accumulated distance of the line:\r\n        // start with calculating a normalized position along the line\r\n        lowp float dashPos \x3d  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\r\n\r\n        // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n        // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n        //   | \x3c--- pos along the dash part\r\n        // -------_______-------_______\r\n        // when the dashPos is over the \'gap\' part of the dash dasharray.x - dashPos is negative and therefore the alpha will\r\n        // get clamped to zero.\r\n        // when dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n        // along the direction of the line.\r\n        lowp float dashAlpha \x3d clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\r\n\r\n        // if we don\'t have a no-data part to the dash then it is a solid line\r\n        dashAlpha \x3d max(sign(-v_dasharray.y), dashAlpha);\r\n        // finally multiply the fragment\'s alpha by the calculated dash-alpha\r\n        alpha *\x3d dashAlpha;\r\n\r\n        // output the fragment color\r\n        gl_FragColor \x3d alpha * v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/outlineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"outlineVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_offset;\r\n      attribute vec2 a_xnormal;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n      uniform mediump float u_outline_width;\r\n\r\n      varying lowp vec2 v_normal;\r\n\r\n      const float scale \x3d 1.0 / 15.0;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_normal \x3d a_xnormal;\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n        // Remove the texture normal bit of the position before scaling it with the\r\n        // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n        // because we\'re extruding the line in pixel space, regardless of the current\r\n        // tile\'s zoom level.\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"outlineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying lowp vec4 v_color;\r\n      varying mediump vec2 v_normal;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // Calculate the distance of the pixel from the line in pixels.\r\n        lowp float dist \x3d abs(v_normal.y);\r\n\r\n        lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO this snippet should only be in views/3d/webgl-engine/materials/internal/Util.xml\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 toFloat \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, toFloat);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n      uniform lowp vec4 u_color; // always defined as halo does not support data driven but text does\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n      uniform mediump float u_size;\r\n    #ifdef DD\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      varying mediump float v_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n\r\n      // attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying lowp vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader divide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n\r\n      // outline position and appearance\r\n      const mediump float edgePos \x3d 0.75; // defined by the SDF encoding\r\n      uniform mediump float u_edgeDistance;\r\n      uniform mediump float u_edgeBlur;\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      varying mediump float v_edgeDistance; // will factor in the size\r\n      varying mediump float v_edgeWidth; // will factor in the size\r\n\r\n      uniform lowp float u_halo; // needed to avoid using the color attribute for halo\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle        \x3d a_levelInfo[1];\r\n        mediump float a_minLevel    \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // TODO: force clipping the vertex in case that the vertex isn\'t visible\r\n        //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label has been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n      #ifdef DD\r\n        if (u_halo \x3e 0.5)\r\n        {\r\n          v_color \x3d u_color;\r\n        }\r\n        else\r\n        {\r\n          v_color \x3d a_color * u_color;\r\n          // opacity already factored in a_color\r\n        }\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef DD\r\n        v_size \x3d a_size * u_size;\r\n      #else\r\n        v_size \x3d u_size;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_edgeDistance \x3d edgePos - u_edgeDistance / v_size;\r\n        v_edgeWidth \x3d (u_antialiasingWidth + u_edgeBlur) / v_size;\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      uniform lowp sampler2D u_texture;\r\n      uniform mediump float u_edgeDistance;\r\n\r\n      varying lowp vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_edgeWidth;\r\n      varying mediump float v_edgeDistance;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n      // and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n      // http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        mediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"*now":function(F){F(['dojo/i18n!*preload*esri/layers/nls/VectorTileLayerImpl*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/VectorTileLayerImpl","dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/geometry/support/spatialReferenceUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/layers/support/TilemapCache ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/VectorTileDisplayObject ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/tiling/TileInfoView ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/webgl/webgl-utils".split(" "),function(F,
q,a,b,e,g,k,c,d,f,h,n,p,l,m,r,t,x,v,z,A,B,u,w,D,y,C,G,I,O,R,Z,W){var da=t.ease;k=m.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:"OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" "),_eventMap:{"style-change":["style"]},constructor:function(Q,fa){this._frame=this._frame.bind(this);this._params=
fa||{};fa&&fa.tileServers&&fa.tileServers.length&&(this.tileServers=fa.tileServers=fa.tileServers.map(function(S){return p.getAbsoluteUrl(S)},this));fa&&fa.copyright&&(this.copyright=fa.copyright);this._viewState={scale:0,width:0,height:0,size:[0,0],rotation:0,resolution:1,center:[0,0],worldScreenWidth:0,spatialReference:null,toScreen:function(S,X){var la=this.center[1]+this.resolution*this.height*.5;S[0]=(X[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;S[1]=(la-X[1])/this.resolution;
return S},toMap:function(S,X){var la=this.center[1]+this.resolution*this.height*.5;S[0]=this.center[0]-this.resolution*this.width*.5+X[0]*this.resolution;S[1]=la-X[1]*this.resolution;return S}};this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this.type="vector-tile";fa&&fa.resourceInfo?(this._stopDisplay(),this._applyMetadata(fa.resourceInfo)):this.setStyle(Q);
this.registerConnectEvents()},setStyle:function(Q){return this.loadStyle(Q)},getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(Q){if(this.opacity!=Q)this.onOpacityChange(this.opacity=Q)},onOpacityChange:function(){},_pinching:!1,getTileUrl:function(Q,fa,S){var X=this._url&&this._url.query,la=this.tileServers[fa%this.tileServers.length];la=la.replace(/\{z\}/gi,Q.toString()).replace(/\{level\}/gi,Q.toString()).replace(/\{y\}/gi,fa.toString()).replace(/\{row\}/gi,
fa.toString()).replace(/\{x\}/gi,S.toString()).replace(/\{col\}/gi,S.toString());X&&(la+="?"+e.objectToQuery(X));la=this.addTimestampToURL(la);return p.addProxy(la)},loadStyle:function(Q){if(this._loadingPromise&&"string"===typeof Q&&this.url===Q)return this._loadingPromise;this._stopDisplay();var fa=this._loadingPromise;this._loadingPromise=B.loadMetadata(Q).then(function(S){this._applyMetadata(S)}.bind(this)).otherwise(function(S){this._errorHandler(S);throw S;}.bind(this));fa&&!fa.isFulfilled()&&
fa.cancel();return this._loadingPromise},_applyMetadata:function(Q){this.url=Q.url;this._url=Q.parsedUrl;!this._url&&Q.styleUrl&&(this._url=z.urlToObject(Q.styleUrl));this.currentStyleInfo={glyphsUrl:Q.glyphsUrl,serviceUrl:Q.serviceUrl,spriteUrl:Q.spriteUrl,styleUrl:Q.styleUrl,style:Q.style,layerDefinition:Q.layerDefinition};this.styleRepository=new w(Q.style,Q);this._read(Q.layerDefinition);this.onStyleChange(this.getStyle());this.loaded||(this._findCredential(),this.loaded=!0,this.onLoad(this));
this.suspended||this._tileHandler||this._startDisplay()},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},takeScreenshot:function(Q){return this._stageGL?this._stageGL.takeScreenshot(Q):v.reject("No valid GL context!")},_setMap:function(Q,fa,S){this.inherited(arguments);this._map=Q;var X=this._div=a.create("div",null,fa);b.set(X,{position:"absolute",width:Q.width+"px",height:Q.height+"px",overflow:"visible",opacity:this.opacity});
this.attr("data-vectortiles",!0);this._onResizeHandle=Q.on("resize",F.hitch(this,this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",F.hitch(this,this._opacityChangeHandler));this._onScaleVisHandle=this.on("scale-visibility-change",F.hitch(this,function(){}));this._onVisibilityHandle=this.on("visibility-change",F.hitch(this,function(){}));Q.acquireWebGLContext(this);this._stageGL=new G;this._stageGL.setElement(this._stageGL.createElement());this._div.appendChild(this._stageGL.element);
this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)};this._stageGL.attach(this._renderParameters);this._startDisplay();this.evaluateSuspension();if(this.suspended&&!Q.loaded)var la=Q.on("load",F.hitch(this,function(){la.remove();this.evaluateSuspension()}));return X},_unsetMap:function(Q,fa){Q.releaseWebGLContext(this);this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;a.destroy(this._div);this._div=null;this._handles&&
this._handles.forEach(function(S){S.remove()});this._handles=null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(Q){this.version=Q.currentVersion||Q.version;this.copyright=
this.copyright||Q.copyrightText;this.fullExtent=new g(Q.fullExtent);this.initialExtent=new g(Q.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new r(Q.tileInfo);this.tileInfo.size=[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();this.tileInfo.scales=this.tileInfo.lods.map(function(S){return S.scale});this.tileInfo.scaleToZoom=function(S){for(var X=this.scales,la=X.length-1,na=0;na<
la;na++){var qa=X[na],ta=X[na+1];if(qa<=S)break;if(ta===S)return na+1;if(qa>S&&ta<S)return na+1-(S-ta)/(qa-ta)}return na};this._hasMin||this.setMinScale(Q.minScale);this._hasMax||this.setMaxScale(Q.maxScale);Q.tileMap&&(this.tileIndexUrl=z.join(this.currentStyleInfo.serviceUrl,Q.tileMap));if(!this._params.tileServers){var fa=Q.tiles;this.currentStyleInfo&&this.currentStyleInfo.serviceUrl&&fa.forEach(function(S,X,la){z.isAbsolute(S)?la[X]=S:la[X]=z.join(this.currentStyleInfo.serviceUrl,S)}.bind(this));
this.tileServers=fa}fa=null;this.currentStyleInfo.serviceUrl&&(this.parsedUrl=z.urlToObject(this.currentStyleInfo.serviceUrl),fa=this._getDefaultAttribution(this.parsedUrl.path));fa?(this.attributionDataUrl=fa,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1);this.capabilities=this._getCapabilities(Q);this.tilemapCache=this.capabilities.supportsTileMapIndexing?new u({layer:this}):null},_getCapabilities:function(Q){var fa=Q.hasOwnProperty("exportTilesAllowed")?Q.exportTilesAllowed:
!1;Q=Q.capabilities?-1!==Q.capabilities.toLowerCase().indexOf("tilemap"):!1;return{exportTilesAllowed:fa,supportsTileMapIndexing:Q}},_getDefaultAttribution:function(Q){var fa=Q.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(fa&&(Q=fa[3])){fa=fa[2]||"";Q=Q.toLowerCase();for(var S=0,X=this._mapsWithAttribution.length;S<X;S++){var la=this._mapsWithAttribution[S];if(-1<la.toLowerCase().indexOf(Q))return Q=
window.location.protocol,("http:"===Q||"https:"===Q?Q:"https:")+"//static.arcgis.com/attribution/Vector"+fa+"/"+la}}},_startDisplay:function(){var Q={capabilities:{operations:{supportsTileMap:this.capabilities.supportsTileMapIndexing}},styleRepository:this.styleRepository,tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,tilemapCache:this.tilemapCache,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._vectorTileContainer=new D;this._stageGL.addChild(this._vectorTileContainer);this._viewState.spatialReference=this.tileInfo.spatialReference;this._tileInfoView=new I(this.tileInfo,this.fullExtent);this._tileRequests=new Map;this._tileHandler=new C(Q,this._scheduleUpdate.bind(this),window.devicePixelRatio||1,!1,this._tileInfoView);this._viewState.spatialReference=this.spatialReference;this._allTilesAreHandled=!1;this._tileHandlerPromise=this._tileHandler.start().then(function(){this._fetchQueue=
new Z({tileInfoView:this._tileInfoView,process:this._getTileData.bind(this)});this._tileStrategy=new O({cachePolicy:"keep",coveragePolicy:"smallest",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileHandlerPromise&&!this._tileHandlerPromise.isFulfilled()&&
this._tileHandlerPromise.cancel();this._tileStrategy&&(this._frameRequested=this._updateRequested=this._renderRequested=!1,this._animation&&(this._animation.stop(),this._animation=null),this._tileRequests.forEach(function(Q){Q.cancel("cancel")}),this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),this._tileInfoView=this._tileHandler=this._tileStrategy=null,this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),this._vectorTileContainer=
null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&!this._frameRequested&&(this._frameRequested=!0,ba(this._frame))},_frame:function(){if(this._frameRequested){this._frameRequested=!1;this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._viewState.resolution=this._viewState.scale/(39.37*c.getUnitValueForSR(this.spatialReference)*96);var Q=0;this._viewState.spatialReference&&this._viewState.spatialReference._isWrappable()&&(Q=A.getInfo(this._viewState.spatialReference),
Q=Q.valid[1]-Q.valid[0]);this._viewState.worldScreenWidth=Math.round(Q/this._viewState.resolution);this._renderRequested&&(this._renderRequested=!1,this._stageGL.doRender(this._renderParameters));this._updateRequested&&(this._updateRequested=!1,this._fetchQueue.pause(),this._fetchQueue.state=this._updateParameters.state,this._allTilesAreHandled=this._tileStrategy.update(this._updateParameters),this._fetchQueue.resume());this._animation&&(this._scheduleRender(),this._scheduleUpdate());this._checkUpdating()}},
_setViewState:function(Q){Q=F.mixin(this._viewState,Q);Q.center.type&&(Q.center=[Q.center.x,Q.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(Q,fa){var S=fa.immediate||0===f.defaults.map.zoomDuration;this._animation=null;if(S)this._setViewState(Q);else{S=this._viewState;var X=f.defaults.map.zoomDuration,la=ea()+16,na=S.center[0],qa=S.center[1],ta=S.scale,ya=Array.isArray(Q.center)?Q.center[0]:Q.center.x,za=Array.isArray(Q.center)?Q.center[1]:Q.center.y,va=Q.scale||
S.scale,Fa=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var Ea=(ea()+16-la)/X;1<=Ea&&(Ea=1,this.running=!1);Ea=da(Ea);Fa._setViewState({center:[na+(ya-na)*Ea,qa+(za-qa)*Ea],scale:ta+(va-ta)*Ea})}}};this._scheduleRender();this._scheduleUpdate()}},_checkUpdating:function(){var Q=!0;this._tileRequests.forEach(function(fa){Q|=fa.isFulfilled()});Q&&this._tileStrategy&&(Q=this._allTilesAreHandled);Q?this._fireUpdateEnd():this._fireUpdateStart()},_acquireTile:function(Q){var fa=
R.pool.acquire();fa.set(Q.level,Q.row,Q.col,Q.world);Q=this._tileHandler.getStyleRepository();var S=y.pool.acquire(fa,fa,this.tileInfo,Q,this._tileHandler.glyphMosaic,0);this._tileHandlerPromise.then(function(){var X=this._tileHandler.getRefKey(fa).then(function(la){S.refKey=la;return this._fetchQueue.push(fa).then(function(na){S.setData(na.tileData,na.workerId,na.connection);S.once("attach",this._scheduleUpdate.bind(this));this._vectorTileContainer.addChild(S)}.bind(this))}.bind(this));this._tileRequests.set(fa.id,
X)}.bind(this));return S},_releaseTile:function(Q){var fa=Q.key.id,S=this._tileRequests.get(fa);S.isFulfilled()||S.cancel();this._tileRequests["delete"](fa);this._vectorTileContainer.removeChild(Q);this._scheduleUpdate();Q.once("detach",function(){y.pool.release(Q)})},_getTileData:function(Q){return this._tileHandler.getTileData(Q,0)},onStyleChange:function(Q){},_opacityChangeHandler:function(Q){this._div&&(this._div.style.opacity=Q.opacity)},_onResizeHandler:function(Q){var fa=this._div&&this._div.style;
fa&&(fa.width=Q.width+"px",fa.height=Q.height+"px",this._setViewState({center:Q.extent.getCenter(),width:Q.width,height:Q.height,size:[Q.width,Q.height]}))},onResume:function(){var Q=this._map;this.inherited(arguments);n.show(this._div);this._setViewState({center:Q.extent.getCenter(),scale:Q.getScale(),width:Q.width,height:Q.height,size:[Q.width,Q.height],spatialReference:Q.spatialReference});this._handles=[Q.on("pan-end",F.hitch(this,this._onPanEndHandler)),Q.on("pan",F.hitch(this,this._onPanExtentChangeHandler)),
Q.on("extent-change",F.hitch(this,this._onExtentChangeHandler)),Q.on("scale",F.hitch(this,this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);n.hide(this._div);this._handles.forEach(function(Q){Q.remove()});this._handles=null},_onPanEndHandler:function(Q){this._panning=!1;this._setViewState({center:Q.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(Q){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=null);this._setViewState({center:Q.extent.getCenter(),
scale:this._map.getScale()})},_onExtentChangeHandler:function(Q){var fa=this._pinching||Q.immediate;this._animateViewState({center:Q.extent.getCenter(),scale:Q.lod.scale},{immediate:fa});this._pinching=!1},_onScaleHandler:function(Q){this._animation&&(this._animation.stop(),this._animation=null);var fa=this._map;if(fa._zoomAnimDiv.extent)this._pinching=this._panning=!1,this._animateViewState({center:fa._zoomAnimDiv.extent.getCenter(),scale:fa._zoomAnimDiv.newLod.scale},{immediate:Q.immediate});else{var S=
fa.navigationManager,X=S._dragOrigin;Q=fa.extent.getCenter();var la=X.x-.5*fa.width;X=X.y-.5*fa.height;var na=fa.extent.getWidth()/fa.width;if(S._pinchScale){this._pinching=!0;S=S._pinchScale;var qa=na/S;Q.x-=la*(qa-na);Q.y+=X*(qa-na);fa=fa.__LOD.scale/S;this._setViewState({center:Q,scale:fa})}else S._zoomEndExtent&&(this._pinching=!1,S=fa.getScale()/fa.navigationManager._zoomEndLod.scale,qa=na/S,Q.x-=la*(qa-na),Q.y+=X*(qa-na),fa=fa.navigationManager._zoomEndLod.scale,this._animateViewState({center:Q,
scale:fa},{immediate:!1}))}}});k.ACCESS_TOKEN=null;k.supported=function(){return W.detectWebGL()[0]};var ea=function(){var Q=window.performance||{},fa=Q.now||Q.webkitNow||Q.msNow||Q.oNow||Q.mozNow;if(void 0!==fa)return function(){return fa.call(Q)};var S=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-S}}();d=q("ff");h=q("ie");l=q("webkit");q=q("opera");
var Y=(new Date).getTime(),ba=window.requestAnimationFrame;ba||(ba=window[(l&&"webkit"||d&&"moz"||q&&"o"||h&&"ms")+"RequestAnimationFrame"])||(ba=function(Q){var fa=ea(),S=Math.max(0,16-(fa-Y)),X=window.setTimeout(function(){Q(ea())},S);Y=fa+S;return X});return k});